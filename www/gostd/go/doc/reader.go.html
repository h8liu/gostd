<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5479934">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5479989">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5480043">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5480094">package</span>&nbsp;<span class="ident" id="5480102">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5480107">import</span>&nbsp;<span class="op" id="5480114">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5480117">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5480127">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5480139">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5480149">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5480157">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="5480167">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5480170">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5480250">//&nbsp;function/method&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="5480274">//</span><br>
<span class="lineno"></span><span class="comment" id="5480277">//&nbsp;Internally,&nbsp;we&nbsp;treat&nbsp;functions&nbsp;like&nbsp;methods&nbsp;and&nbsp;collect&nbsp;them&nbsp;in&nbsp;method&nbsp;sets.</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5480358">//&nbsp;A&nbsp;methodSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;methods.&nbsp;Entries&nbsp;where&nbsp;Decl&nbsp;==&nbsp;nil&nbsp;are&nbsp;conflict</span><br>
<span class="lineno"></span><span class="comment" id="5480440">//&nbsp;entries&nbsp;(more&nbsp;then&nbsp;one&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;embedding&nbsp;level).</span><br>
<span class="lineno"></span><span class="comment" id="5480522">//</span><br>
<span class="lineno"></span><span class="keyword" id="5480525">type</span>&nbsp;<span class="ident" id="5480530">methodSet</span>&nbsp;<span class="keyword" id="5480540">map</span><span class="op" id="5480543">[</span><span class="builtintype" id="5480544">string</span><span class="op" id="5480550">]</span><span class="op" id="5480551">*</span><span class="ident" id="5480552">Func</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5480558">//&nbsp;recvString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;recv&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5480619">//&nbsp;form&nbsp;&#34;T&#34;,&nbsp;&#34;*T&#34;,&nbsp;or&nbsp;&#34;BADRECV&#34;&nbsp;(if&nbsp;not&nbsp;a&nbsp;proper&nbsp;receiver&nbsp;type).</span><br>
<span class="lineno"></span><span class="comment" id="5480684">//</span><br>
<span class="lineno"></span><span class="keyword" id="5480687">func</span>&nbsp;<span class="ident" id="5480692">recvString</span><span class="op" id="5480702">(</span><span class="ident" id="5480703">recv</span>&nbsp;<span class="ident" id="5480708">ast</span><span class="op" id="5480711">.</span><span class="ident" id="5480712">Expr</span><span class="op" id="5480716">)</span>&nbsp;<span class="builtintype" id="5480718">string</span>&nbsp;<span class="op" id="5480725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5480728">switch</span>&nbsp;<span class="ident" id="5480735">t</span>&nbsp;<span class="op" id="5480737">:=</span>&nbsp;<span class="ident" id="5480740">recv</span><span class="op" id="5480744">.</span><span class="op" id="5480745">(</span><span class="keyword" id="5480746">type</span><span class="op" id="5480750">)</span>&nbsp;<span class="op" id="5480752">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5480755">case</span>&nbsp;<span class="op" id="5480760">*</span><span class="ident" id="5480761">ast</span><span class="op" id="5480764">.</span><span class="ident" id="5480765">Ident</span><span class="op" id="5480770">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5480774">return</span>&nbsp;<span class="ident" id="5480781">t</span><span class="op" id="5480782">.</span><span class="ident" id="5480783">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5480789">case</span>&nbsp;<span class="op" id="5480794">*</span><span class="ident" id="5480795">ast</span><span class="op" id="5480798">.</span><span class="ident" id="5480799">StarExpr</span><span class="op" id="5480807">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5480811">return</span>&nbsp;<span class="string" id="5480818">&#34;*&#34;</span>&nbsp;<span class="op" id="5480822">+</span>&nbsp;<span class="ident" id="5480824">recvString</span><span class="op" id="5480834">(</span><span class="ident" id="5480835">t</span><span class="op" id="5480836">.</span><span class="ident" id="5480837">X</span><span class="op" id="5480838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5480841">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5480844">return</span>&nbsp;<span class="string" id="5480851">&#34;BADRECV&#34;</span><br>
<span class="lineno"></span><span class="op" id="5480861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5480864">//&nbsp;set&nbsp;creates&nbsp;the&nbsp;corresponding&nbsp;Func&nbsp;for&nbsp;f&nbsp;and&nbsp;adds&nbsp;it&nbsp;to&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="5480929">//&nbsp;If&nbsp;there&nbsp;are&nbsp;multiple&nbsp;f&#39;s&nbsp;with&nbsp;the&nbsp;same&nbsp;name,&nbsp;set&nbsp;keeps&nbsp;the&nbsp;first</span><br>
<span class="lineno">40</span><span class="comment" id="5480998">//&nbsp;one&nbsp;with&nbsp;documentation;&nbsp;conflicts&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="5481048">//</span><br>
<span class="lineno"></span><span class="keyword" id="5481051">func</span>&nbsp;<span class="op" id="5481056">(</span><span class="ident" id="5481057">mset</span>&nbsp;<span class="ident" id="5481062">methodSet</span><span class="op" id="5481071">)</span>&nbsp;<span class="ident" id="5481073">set</span><span class="op" id="5481076">(</span><span class="ident" id="5481077">f</span>&nbsp;<span class="op" id="5481079">*</span><span class="ident" id="5481080">ast</span><span class="op" id="5481083">.</span><span class="ident" id="5481084">FuncDecl</span><span class="op" id="5481092">)</span>&nbsp;<span class="op" id="5481094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481097">name</span>&nbsp;<span class="op" id="5481102">:=</span>&nbsp;<span class="ident" id="5481105">f</span><span class="op" id="5481106">.</span><span class="ident" id="5481107">Name</span><span class="op" id="5481111">.</span><span class="ident" id="5481112">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5481118">if</span>&nbsp;<span class="ident" id="5481121">g</span>&nbsp;<span class="op" id="5481123">:=</span>&nbsp;<span class="ident" id="5481126">mset</span><span class="op" id="5481130">[</span><span class="ident" id="5481131">name</span><span class="op" id="5481135">]</span><span class="op" id="5481136">;</span>&nbsp;<span class="ident" id="5481138">g</span>&nbsp;<span class="op" id="5481140">!=</span>&nbsp;<span class="builtintype" id="5481143">nil</span>&nbsp;<span class="op" id="5481147">&amp;&amp;</span>&nbsp;<span class="ident" id="5481150">g</span><span class="op" id="5481151">.</span><span class="ident" id="5481152">Doc</span>&nbsp;<span class="op" id="5481156">!=</span>&nbsp;<span class="string" id="5481159">&#34;&#34;</span>&nbsp;<span class="op" id="5481162">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5481166">//&nbsp;A&nbsp;function&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;has&nbsp;already&nbsp;been&nbsp;registered;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5481230">//&nbsp;since&nbsp;it&nbsp;has&nbsp;documentation,&nbsp;assume&nbsp;f&nbsp;is&nbsp;simply&nbsp;another</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5481290">//&nbsp;implementation&nbsp;and&nbsp;ignore&nbsp;it.&nbsp;This&nbsp;does&nbsp;not&nbsp;happen&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5481353">//&nbsp;caller&nbsp;is&nbsp;using&nbsp;go/build.ScanDir&nbsp;to&nbsp;determine&nbsp;the&nbsp;list&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5481416">//&nbsp;files&nbsp;implementing&nbsp;a&nbsp;package.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5481451">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5481459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5481462">//&nbsp;function&nbsp;doesn&#39;t&nbsp;exist&nbsp;or&nbsp;has&nbsp;no&nbsp;documentation;&nbsp;use&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481520">recv</span>&nbsp;<span class="op" id="5481525">:=</span>&nbsp;<span class="string" id="5481528">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5481532">if</span>&nbsp;<span class="ident" id="5481535">f</span><span class="op" id="5481536">.</span><span class="ident" id="5481537">Recv</span>&nbsp;<span class="op" id="5481542">!=</span>&nbsp;<span class="builtintype" id="5481545">nil</span>&nbsp;<span class="op" id="5481549">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5481553">var</span>&nbsp;<span class="ident" id="5481557">typ</span>&nbsp;<span class="ident" id="5481561">ast</span><span class="op" id="5481564">.</span><span class="ident" id="5481565">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5481572">//&nbsp;be&nbsp;careful&nbsp;in&nbsp;case&nbsp;of&nbsp;incorrect&nbsp;ASTs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5481614">if</span>&nbsp;<span class="ident" id="5481617">list</span>&nbsp;<span class="op" id="5481622">:=</span>&nbsp;<span class="ident" id="5481625">f</span><span class="op" id="5481626">.</span><span class="ident" id="5481627">Recv</span><span class="op" id="5481631">.</span><span class="ident" id="5481632">List</span><span class="op" id="5481636">;</span>&nbsp;<span class="builtinfunc" id="5481638">len</span><span class="op" id="5481641">(</span><span class="ident" id="5481642">list</span><span class="op" id="5481646">)</span>&nbsp;<span class="op" id="5481648">==</span>&nbsp;<span class="num" id="5481651">1</span>&nbsp;<span class="op" id="5481653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481658">typ</span>&nbsp;<span class="op" id="5481662">=</span>&nbsp;<span class="ident" id="5481664">list</span><span class="op" id="5481668">[</span><span class="num" id="5481669">0</span><span class="op" id="5481670">]</span><span class="op" id="5481671">.</span><span class="ident" id="5481672">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5481679">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481683">recv</span>&nbsp;<span class="op" id="5481688">=</span>&nbsp;<span class="ident" id="5481690">recvString</span><span class="op" id="5481700">(</span><span class="ident" id="5481701">typ</span><span class="op" id="5481704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5481707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481710">mset</span><span class="op" id="5481714">[</span><span class="ident" id="5481715">name</span><span class="op" id="5481719">]</span>&nbsp;<span class="op" id="5481721">=</span>&nbsp;<span class="op" id="5481723">&amp;</span><span class="ident" id="5481724">Func</span><span class="op" id="5481728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481732">Doc</span><span class="op" id="5481735">:</span>&nbsp;&nbsp;<span class="ident" id="5481738">f</span><span class="op" id="5481739">.</span><span class="ident" id="5481740">Doc</span><span class="op" id="5481743">.</span><span class="ident" id="5481744">Text</span><span class="op" id="5481748">(</span><span class="op" id="5481749">)</span><span class="op" id="5481750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481754">Name</span><span class="op" id="5481758">:</span>&nbsp;<span class="ident" id="5481760">name</span><span class="op" id="5481764">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481768">Decl</span><span class="op" id="5481772">:</span>&nbsp;<span class="ident" id="5481774">f</span><span class="op" id="5481775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481779">Recv</span><span class="op" id="5481783">:</span>&nbsp;<span class="ident" id="5481785">recv</span><span class="op" id="5481789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481793">Orig</span><span class="op" id="5481797">:</span>&nbsp;<span class="ident" id="5481799">recv</span><span class="op" id="5481803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5481806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481809">f</span><span class="op" id="5481810">.</span><span class="ident" id="5481811">Doc</span>&nbsp;<span class="op" id="5481815">=</span>&nbsp;<span class="builtintype" id="5481817">nil</span>&nbsp;<span class="comment" id="5481821">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno">70</span><span class="op" id="5481855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5481858">//&nbsp;add&nbsp;adds&nbsp;method&nbsp;m&nbsp;to&nbsp;the&nbsp;method&nbsp;set;&nbsp;m&nbsp;is&nbsp;ignored&nbsp;if&nbsp;the&nbsp;method&nbsp;set</span><br>
<span class="lineno"></span><span class="comment" id="5481929">//&nbsp;already&nbsp;contains&nbsp;a&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;or&nbsp;a&nbsp;higher</span><br>
<span class="lineno"></span><span class="comment" id="5482001">//&nbsp;level&nbsp;then&nbsp;m.</span><br>
<span class="lineno">75</span><span class="comment" id="5482018">//</span><br>
<span class="lineno"></span><span class="keyword" id="5482021">func</span>&nbsp;<span class="op" id="5482026">(</span><span class="ident" id="5482027">mset</span>&nbsp;<span class="ident" id="5482032">methodSet</span><span class="op" id="5482041">)</span>&nbsp;<span class="ident" id="5482043">add</span><span class="op" id="5482046">(</span><span class="ident" id="5482047">m</span>&nbsp;<span class="op" id="5482049">*</span><span class="ident" id="5482050">Func</span><span class="op" id="5482054">)</span>&nbsp;<span class="op" id="5482056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482059">old</span>&nbsp;<span class="op" id="5482063">:=</span>&nbsp;<span class="ident" id="5482066">mset</span><span class="op" id="5482070">[</span><span class="ident" id="5482071">m</span><span class="op" id="5482072">.</span><span class="ident" id="5482073">Name</span><span class="op" id="5482077">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482080">if</span>&nbsp;<span class="ident" id="5482083">old</span>&nbsp;<span class="op" id="5482087">==</span>&nbsp;<span class="builtintype" id="5482090">nil</span>&nbsp;<span class="op" id="5482094">||</span>&nbsp;<span class="ident" id="5482097">m</span><span class="op" id="5482098">.</span><span class="ident" id="5482099">Level</span>&nbsp;<span class="op" id="5482105">&lt;</span>&nbsp;<span class="ident" id="5482107">old</span><span class="op" id="5482110">.</span><span class="ident" id="5482111">Level</span>&nbsp;<span class="op" id="5482117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482121">mset</span><span class="op" id="5482125">[</span><span class="ident" id="5482126">m</span><span class="op" id="5482127">.</span><span class="ident" id="5482128">Name</span><span class="op" id="5482132">]</span>&nbsp;<span class="op" id="5482134">=</span>&nbsp;<span class="ident" id="5482136">m</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482140">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5482148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482151">if</span>&nbsp;<span class="ident" id="5482154">old</span>&nbsp;<span class="op" id="5482158">!=</span>&nbsp;<span class="builtintype" id="5482161">nil</span>&nbsp;<span class="op" id="5482165">&amp;&amp;</span>&nbsp;<span class="ident" id="5482168">m</span><span class="op" id="5482169">.</span><span class="ident" id="5482170">Level</span>&nbsp;<span class="op" id="5482176">==</span>&nbsp;<span class="ident" id="5482179">old</span><span class="op" id="5482182">.</span><span class="ident" id="5482183">Level</span>&nbsp;<span class="op" id="5482189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5482193">//&nbsp;conflict&nbsp;-&nbsp;mark&nbsp;it&nbsp;using&nbsp;a&nbsp;method&nbsp;with&nbsp;nil&nbsp;Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482246">mset</span><span class="op" id="5482250">[</span><span class="ident" id="5482251">m</span><span class="op" id="5482252">.</span><span class="ident" id="5482253">Name</span><span class="op" id="5482257">]</span>&nbsp;<span class="op" id="5482259">=</span>&nbsp;<span class="op" id="5482261">&amp;</span><span class="ident" id="5482262">Func</span><span class="op" id="5482266">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482271">Name</span><span class="op" id="5482275">:</span>&nbsp;&nbsp;<span class="ident" id="5482278">m</span><span class="op" id="5482279">.</span><span class="ident" id="5482280">Name</span><span class="op" id="5482284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482289">Level</span><span class="op" id="5482294">:</span>&nbsp;<span class="ident" id="5482296">m</span><span class="op" id="5482297">.</span><span class="ident" id="5482298">Level</span><span class="op" id="5482303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5482307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5482310">}</span><br>
<span class="lineno"></span><span class="op" id="5482312">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="5482315">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5482395">//&nbsp;Named&nbsp;types</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5482411">//&nbsp;baseTypeName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;base&nbsp;type&nbsp;of&nbsp;x&nbsp;(or&nbsp;&#34;&#34;)</span><br>
<span class="lineno">95</span><span class="comment" id="5482474">//&nbsp;and&nbsp;whether&nbsp;the&nbsp;type&nbsp;is&nbsp;imported&nbsp;or&nbsp;not.</span><br>
<span class="lineno"></span><span class="comment" id="5482518">//</span><br>
<span class="lineno"></span><span class="keyword" id="5482521">func</span>&nbsp;<span class="ident" id="5482526">baseTypeName</span><span class="op" id="5482538">(</span><span class="ident" id="5482539">x</span>&nbsp;<span class="ident" id="5482541">ast</span><span class="op" id="5482544">.</span><span class="ident" id="5482545">Expr</span><span class="op" id="5482549">)</span>&nbsp;<span class="op" id="5482551">(</span><span class="ident" id="5482552">name</span>&nbsp;<span class="builtintype" id="5482557">string</span><span class="op" id="5482563">,</span>&nbsp;<span class="ident" id="5482565">imported</span>&nbsp;<span class="builtintype" id="5482574">bool</span><span class="op" id="5482578">)</span>&nbsp;<span class="op" id="5482580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482583">switch</span>&nbsp;<span class="ident" id="5482590">t</span>&nbsp;<span class="op" id="5482592">:=</span>&nbsp;<span class="ident" id="5482595">x</span><span class="op" id="5482596">.</span><span class="op" id="5482597">(</span><span class="keyword" id="5482598">type</span><span class="op" id="5482602">)</span>&nbsp;<span class="op" id="5482604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482607">case</span>&nbsp;<span class="op" id="5482612">*</span><span class="ident" id="5482613">ast</span><span class="op" id="5482616">.</span><span class="ident" id="5482617">Ident</span><span class="op" id="5482622">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482626">return</span>&nbsp;<span class="ident" id="5482633">t</span><span class="op" id="5482634">.</span><span class="ident" id="5482635">Name</span><span class="op" id="5482639">,</span>&nbsp;<span class="builtintype" id="5482641">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482648">case</span>&nbsp;<span class="op" id="5482653">*</span><span class="ident" id="5482654">ast</span><span class="op" id="5482657">.</span><span class="ident" id="5482658">SelectorExpr</span><span class="op" id="5482670">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482674">if</span>&nbsp;<span class="ident" id="5482677">_</span><span class="op" id="5482678">,</span>&nbsp;<span class="ident" id="5482680">ok</span>&nbsp;<span class="op" id="5482683">:=</span>&nbsp;<span class="ident" id="5482686">t</span><span class="op" id="5482687">.</span><span class="ident" id="5482688">X</span><span class="op" id="5482689">.</span><span class="op" id="5482690">(</span><span class="op" id="5482691">*</span><span class="ident" id="5482692">ast</span><span class="op" id="5482695">.</span><span class="ident" id="5482696">Ident</span><span class="op" id="5482701">)</span><span class="op" id="5482702">;</span>&nbsp;<span class="ident" id="5482704">ok</span>&nbsp;<span class="op" id="5482707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5482712">//&nbsp;only&nbsp;possible&nbsp;for&nbsp;qualified&nbsp;type&nbsp;names;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5482758">//&nbsp;assume&nbsp;type&nbsp;is&nbsp;imported</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482788">return</span>&nbsp;<span class="ident" id="5482795">t</span><span class="op" id="5482796">.</span><span class="ident" id="5482797">Sel</span><span class="op" id="5482800">.</span><span class="ident" id="5482801">Name</span><span class="op" id="5482805">,</span>&nbsp;<span class="builtintype" id="5482807">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5482814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482817">case</span>&nbsp;<span class="op" id="5482822">*</span><span class="ident" id="5482823">ast</span><span class="op" id="5482826">.</span><span class="ident" id="5482827">StarExpr</span><span class="op" id="5482835">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482839">return</span>&nbsp;<span class="ident" id="5482846">baseTypeName</span><span class="op" id="5482858">(</span><span class="ident" id="5482859">t</span><span class="op" id="5482860">.</span><span class="ident" id="5482861">X</span><span class="op" id="5482862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5482865">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482868">return</span><br>
<span class="lineno"></span><span class="op" id="5482875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5482878">//&nbsp;An&nbsp;embeddedSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;embedded&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="5482931">type</span>&nbsp;<span class="ident" id="5482936">embeddedSet</span>&nbsp;<span class="keyword" id="5482948">map</span><span class="op" id="5482951">[</span><span class="op" id="5482952">*</span><span class="ident" id="5482953">namedType</span><span class="op" id="5482962">]</span><span class="builtintype" id="5482963">bool</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5482969">//&nbsp;A&nbsp;namedType&nbsp;represents&nbsp;a&nbsp;named&nbsp;unqualified&nbsp;(package&nbsp;local,&nbsp;or&nbsp;possibly</span><br>
<span class="lineno"></span><span class="comment" id="5483043">//&nbsp;predeclared)&nbsp;type.&nbsp;The&nbsp;namedType&nbsp;for&nbsp;a&nbsp;type&nbsp;name&nbsp;is&nbsp;always&nbsp;found&nbsp;via</span><br>
<span class="lineno"></span><span class="comment" id="5483115">//&nbsp;reader.lookupType.</span><br>
<span class="lineno"></span><span class="comment" id="5483137">//</span><br>
<span class="lineno">120</span><span class="keyword" id="5483140">type</span>&nbsp;<span class="ident" id="5483145">namedType</span>&nbsp;<span class="keyword" id="5483155">struct</span>&nbsp;<span class="op" id="5483162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483165">doc</span>&nbsp;&nbsp;<span class="builtintype" id="5483170">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5483183">//&nbsp;doc&nbsp;comment&nbsp;for&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483208">name</span>&nbsp;<span class="builtintype" id="5483213">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5483226">//&nbsp;type&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483240">decl</span>&nbsp;<span class="op" id="5483245">*</span><span class="ident" id="5483246">ast</span><span class="op" id="5483249">.</span><span class="ident" id="5483250">GenDecl</span>&nbsp;<span class="comment" id="5483258">//&nbsp;nil&nbsp;if&nbsp;declaration&nbsp;hasn&#39;t&nbsp;been&nbsp;seen&nbsp;yet</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483303">isEmbedded</span>&nbsp;<span class="builtintype" id="5483314">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5483326">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483360">isStruct</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5483371">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5483383">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;a&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483417">embedded</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5483428">embeddedSet</span>&nbsp;<span class="comment" id="5483440">//&nbsp;true&nbsp;if&nbsp;the&nbsp;embedded&nbsp;type&nbsp;is&nbsp;a&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5483484">//&nbsp;associated&nbsp;declarations</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483512">values</span>&nbsp;&nbsp;<span class="op" id="5483520">[</span><span class="op" id="5483521">]</span><span class="op" id="5483522">*</span><span class="ident" id="5483523">Value</span>&nbsp;<span class="comment" id="5483529">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483549">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5483557">methodSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483568">methods</span>&nbsp;<span class="ident" id="5483576">methodSet</span><br>
<span class="lineno"></span><span class="op" id="5483586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="5483589">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5483669">//&nbsp;AST&nbsp;reader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5483684">//&nbsp;reader&nbsp;accumulates&nbsp;documentation&nbsp;for&nbsp;a&nbsp;single&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="5483742">//&nbsp;It&nbsp;modifies&nbsp;the&nbsp;AST:&nbsp;Comments&nbsp;(declaration&nbsp;documentation)</span><br>
<span class="lineno">140</span><span class="comment" id="5483803">//&nbsp;that&nbsp;have&nbsp;been&nbsp;collected&nbsp;by&nbsp;the&nbsp;reader&nbsp;are&nbsp;set&nbsp;to&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="5483860">//&nbsp;in&nbsp;the&nbsp;respective&nbsp;AST&nbsp;nodes&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;printed</span><br>
<span class="lineno"></span><span class="comment" id="5483920">//&nbsp;twice&nbsp;(once&nbsp;when&nbsp;printing&nbsp;the&nbsp;documentation&nbsp;and&nbsp;once&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5483981">//&nbsp;printing&nbsp;the&nbsp;corresponding&nbsp;AST&nbsp;node).</span><br>
<span class="lineno"></span><span class="comment" id="5484022">//</span><br>
<span class="lineno">145</span><span class="keyword" id="5484025">type</span>&nbsp;<span class="ident" id="5484030">reader</span>&nbsp;<span class="keyword" id="5484037">struct</span>&nbsp;<span class="op" id="5484044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484047">mode</span>&nbsp;<span class="ident" id="5484052">Mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5484059">//&nbsp;package&nbsp;properties</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484082">doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5484092">string</span>&nbsp;<span class="comment" id="5484099">//&nbsp;package&nbsp;documentation,&nbsp;if&nbsp;any</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484133">filenames</span>&nbsp;<span class="op" id="5484143">[</span><span class="op" id="5484144">]</span><span class="builtintype" id="5484145">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484153">notes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484163">map</span><span class="op" id="5484166">[</span><span class="builtintype" id="5484167">string</span><span class="op" id="5484173">]</span><span class="op" id="5484174">[</span><span class="op" id="5484175">]</span><span class="op" id="5484176">*</span><span class="ident" id="5484177">Note</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5484184">//&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484201">imports</span>&nbsp;<span class="keyword" id="5484209">map</span><span class="op" id="5484212">[</span><span class="builtintype" id="5484213">string</span><span class="op" id="5484219">]</span><span class="builtintype" id="5484220">int</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484225">values</span>&nbsp;&nbsp;<span class="op" id="5484233">[</span><span class="op" id="5484234">]</span><span class="op" id="5484235">*</span><span class="ident" id="5484236">Value</span>&nbsp;<span class="comment" id="5484242">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484262">types</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484270">map</span><span class="op" id="5484273">[</span><span class="builtintype" id="5484274">string</span><span class="op" id="5484280">]</span><span class="op" id="5484281">*</span><span class="ident" id="5484282">namedType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484293">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5484301">methodSet</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5484313">//&nbsp;support&nbsp;for&nbsp;package-local&nbsp;error&nbsp;type&nbsp;declarations</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484367">errorDecl</span>&nbsp;<span class="builtintype" id="5484377">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5484398">//&nbsp;if&nbsp;set,&nbsp;type&nbsp;&#34;error&#34;&nbsp;was&nbsp;declared&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484444">fixlist</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5484454">[</span><span class="op" id="5484455">]</span><span class="op" id="5484456">*</span><span class="ident" id="5484457">ast</span><span class="op" id="5484460">.</span><span class="ident" id="5484461">InterfaceType</span>&nbsp;<span class="comment" id="5484475">//&nbsp;list&nbsp;of&nbsp;interfaces&nbsp;containing&nbsp;anonymous&nbsp;field&nbsp;&#34;error&#34;</span><br>
<span class="lineno"></span><span class="op" id="5484532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5484535">func</span>&nbsp;<span class="op" id="5484540">(</span><span class="ident" id="5484541">r</span>&nbsp;<span class="op" id="5484543">*</span><span class="ident" id="5484544">reader</span><span class="op" id="5484550">)</span>&nbsp;<span class="ident" id="5484552">isVisible</span><span class="op" id="5484561">(</span><span class="ident" id="5484562">name</span>&nbsp;<span class="builtintype" id="5484567">string</span><span class="op" id="5484573">)</span>&nbsp;<span class="builtintype" id="5484575">bool</span>&nbsp;<span class="op" id="5484580">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484583">return</span>&nbsp;<span class="ident" id="5484590">r</span><span class="op" id="5484591">.</span><span class="ident" id="5484592">mode</span><span class="op" id="5484596">&amp;</span><span class="ident" id="5484597">AllDecls</span>&nbsp;<span class="op" id="5484606">!=</span>&nbsp;<span class="num" id="5484609">0</span>&nbsp;<span class="op" id="5484611">||</span>&nbsp;<span class="ident" id="5484614">ast</span><span class="op" id="5484617">.</span><span class="ident" id="5484618">IsExported</span><span class="op" id="5484628">(</span><span class="ident" id="5484629">name</span><span class="op" id="5484633">)</span><br>
<span class="lineno"></span><span class="op" id="5484635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5484638">//&nbsp;lookupType&nbsp;returns&nbsp;the&nbsp;base&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="5484695">//&nbsp;If&nbsp;the&nbsp;base&nbsp;type&nbsp;has&nbsp;not&nbsp;been&nbsp;encountered&nbsp;yet,&nbsp;a&nbsp;new</span><br>
<span class="lineno">170</span><span class="comment" id="5484751">//&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;but&nbsp;no&nbsp;associated&nbsp;declaration</span><br>
<span class="lineno"></span><span class="comment" id="5484809">//&nbsp;is&nbsp;added&nbsp;to&nbsp;the&nbsp;type&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="5484838">//</span><br>
<span class="lineno"></span><span class="keyword" id="5484841">func</span>&nbsp;<span class="op" id="5484846">(</span><span class="ident" id="5484847">r</span>&nbsp;<span class="op" id="5484849">*</span><span class="ident" id="5484850">reader</span><span class="op" id="5484856">)</span>&nbsp;<span class="ident" id="5484858">lookupType</span><span class="op" id="5484868">(</span><span class="ident" id="5484869">name</span>&nbsp;<span class="builtintype" id="5484874">string</span><span class="op" id="5484880">)</span>&nbsp;<span class="op" id="5484882">*</span><span class="ident" id="5484883">namedType</span>&nbsp;<span class="op" id="5484893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484896">if</span>&nbsp;<span class="ident" id="5484899">name</span>&nbsp;<span class="op" id="5484904">==</span>&nbsp;<span class="string" id="5484907">&#34;&#34;</span>&nbsp;<span class="op" id="5484910">||</span>&nbsp;<span class="ident" id="5484913">name</span>&nbsp;<span class="op" id="5484918">==</span>&nbsp;<span class="string" id="5484921">&#34;_&#34;</span>&nbsp;<span class="op" id="5484925">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484929">return</span>&nbsp;<span class="builtintype" id="5484936">nil</span>&nbsp;<span class="comment" id="5484940">//&nbsp;no&nbsp;type&nbsp;docs&nbsp;for&nbsp;anonymous&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5484977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484980">if</span>&nbsp;<span class="ident" id="5484983">typ</span><span class="op" id="5484986">,</span>&nbsp;<span class="ident" id="5484988">found</span>&nbsp;<span class="op" id="5484994">:=</span>&nbsp;<span class="ident" id="5484997">r</span><span class="op" id="5484998">.</span><span class="ident" id="5484999">types</span><span class="op" id="5485004">[</span><span class="ident" id="5485005">name</span><span class="op" id="5485009">]</span><span class="op" id="5485010">;</span>&nbsp;<span class="ident" id="5485012">found</span>&nbsp;<span class="op" id="5485018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485022">return</span>&nbsp;<span class="ident" id="5485029">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5485034">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5485037">//&nbsp;type&nbsp;not&nbsp;found&nbsp;-&nbsp;add&nbsp;one&nbsp;without&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485086">typ</span>&nbsp;<span class="op" id="5485090">:=</span>&nbsp;<span class="op" id="5485093">&amp;</span><span class="ident" id="5485094">namedType</span><span class="op" id="5485103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485107">name</span><span class="op" id="5485111">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485117">name</span><span class="op" id="5485121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485125">embedded</span><span class="op" id="5485133">:</span>&nbsp;<span class="builtinfunc" id="5485135">make</span><span class="op" id="5485139">(</span><span class="ident" id="5485140">embeddedSet</span><span class="op" id="5485151">)</span><span class="op" id="5485152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485156">funcs</span><span class="op" id="5485161">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5485166">make</span><span class="op" id="5485170">(</span><span class="ident" id="5485171">methodSet</span><span class="op" id="5485180">)</span><span class="op" id="5485181">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485185">methods</span><span class="op" id="5485192">:</span>&nbsp;&nbsp;<span class="builtinfunc" id="5485195">make</span><span class="op" id="5485199">(</span><span class="ident" id="5485200">methodSet</span><span class="op" id="5485209">)</span><span class="op" id="5485210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5485213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485216">r</span><span class="op" id="5485217">.</span><span class="ident" id="5485218">types</span><span class="op" id="5485223">[</span><span class="ident" id="5485224">name</span><span class="op" id="5485228">]</span>&nbsp;<span class="op" id="5485230">=</span>&nbsp;<span class="ident" id="5485232">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485237">return</span>&nbsp;<span class="ident" id="5485244">typ</span><br>
<span class="lineno"></span><span class="op" id="5485248">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5485251">//&nbsp;recordAnonymousField&nbsp;registers&nbsp;fieldType&nbsp;as&nbsp;the&nbsp;type&nbsp;of&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="5485313">//&nbsp;anonymous&nbsp;field&nbsp;in&nbsp;the&nbsp;parent&nbsp;type.&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="5485377">//&nbsp;(qualified&nbsp;name)&nbsp;or&nbsp;the&nbsp;parent&nbsp;is&nbsp;nil,&nbsp;the&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="5485441">//&nbsp;The&nbsp;function&nbsp;returns&nbsp;the&nbsp;field&nbsp;name.</span><br>
<span class="lineno">195</span><span class="comment" id="5485481">//</span><br>
<span class="lineno"></span><span class="keyword" id="5485484">func</span>&nbsp;<span class="op" id="5485489">(</span><span class="ident" id="5485490">r</span>&nbsp;<span class="op" id="5485492">*</span><span class="ident" id="5485493">reader</span><span class="op" id="5485499">)</span>&nbsp;<span class="ident" id="5485501">recordAnonymousField</span><span class="op" id="5485521">(</span><span class="ident" id="5485522">parent</span>&nbsp;<span class="op" id="5485529">*</span><span class="ident" id="5485530">namedType</span><span class="op" id="5485539">,</span>&nbsp;<span class="ident" id="5485541">fieldType</span>&nbsp;<span class="ident" id="5485551">ast</span><span class="op" id="5485554">.</span><span class="ident" id="5485555">Expr</span><span class="op" id="5485559">)</span>&nbsp;<span class="op" id="5485561">(</span><span class="ident" id="5485562">fname</span>&nbsp;<span class="builtintype" id="5485568">string</span><span class="op" id="5485574">)</span>&nbsp;<span class="op" id="5485576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485579">fname</span><span class="op" id="5485584">,</span>&nbsp;<span class="ident" id="5485586">imp</span>&nbsp;<span class="op" id="5485590">:=</span>&nbsp;<span class="ident" id="5485593">baseTypeName</span><span class="op" id="5485605">(</span><span class="ident" id="5485606">fieldType</span><span class="op" id="5485615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485618">if</span>&nbsp;<span class="ident" id="5485621">parent</span>&nbsp;<span class="op" id="5485628">==</span>&nbsp;<span class="builtintype" id="5485631">nil</span>&nbsp;<span class="op" id="5485635">||</span>&nbsp;<span class="ident" id="5485638">imp</span>&nbsp;<span class="op" id="5485642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485646">return</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5485654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485657">if</span>&nbsp;<span class="ident" id="5485660">ftype</span>&nbsp;<span class="op" id="5485666">:=</span>&nbsp;<span class="ident" id="5485669">r</span><span class="op" id="5485670">.</span><span class="ident" id="5485671">lookupType</span><span class="op" id="5485681">(</span><span class="ident" id="5485682">fname</span><span class="op" id="5485687">)</span><span class="op" id="5485688">;</span>&nbsp;<span class="ident" id="5485690">ftype</span>&nbsp;<span class="op" id="5485696">!=</span>&nbsp;<span class="builtintype" id="5485699">nil</span>&nbsp;<span class="op" id="5485703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485707">ftype</span><span class="op" id="5485712">.</span><span class="ident" id="5485713">isEmbedded</span>&nbsp;<span class="op" id="5485724">=</span>&nbsp;<span class="builtintype" id="5485726">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485733">_</span><span class="op" id="5485734">,</span>&nbsp;<span class="ident" id="5485736">ptr</span>&nbsp;<span class="op" id="5485740">:=</span>&nbsp;<span class="ident" id="5485743">fieldType</span><span class="op" id="5485752">.</span><span class="op" id="5485753">(</span><span class="op" id="5485754">*</span><span class="ident" id="5485755">ast</span><span class="op" id="5485758">.</span><span class="ident" id="5485759">StarExpr</span><span class="op" id="5485767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485771">parent</span><span class="op" id="5485777">.</span><span class="ident" id="5485778">embedded</span><span class="op" id="5485786">[</span><span class="ident" id="5485787">ftype</span><span class="op" id="5485792">]</span>&nbsp;<span class="op" id="5485794">=</span>&nbsp;<span class="ident" id="5485796">ptr</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5485801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485804">return</span><br>
<span class="lineno"></span><span class="op" id="5485811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5485814">func</span>&nbsp;<span class="op" id="5485819">(</span><span class="ident" id="5485820">r</span>&nbsp;<span class="op" id="5485822">*</span><span class="ident" id="5485823">reader</span><span class="op" id="5485829">)</span>&nbsp;<span class="ident" id="5485831">readDoc</span><span class="op" id="5485838">(</span><span class="ident" id="5485839">comment</span>&nbsp;<span class="op" id="5485847">*</span><span class="ident" id="5485848">ast</span><span class="op" id="5485851">.</span><span class="ident" id="5485852">CommentGroup</span><span class="op" id="5485864">)</span>&nbsp;<span class="op" id="5485866">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5485869">//&nbsp;By&nbsp;convention&nbsp;there&nbsp;should&nbsp;be&nbsp;only&nbsp;one&nbsp;package&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5485928">//&nbsp;but&nbsp;collect&nbsp;all&nbsp;of&nbsp;them&nbsp;if&nbsp;there&nbsp;are&nbsp;more&nbsp;then&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485984">text</span>&nbsp;<span class="op" id="5485989">:=</span>&nbsp;<span class="ident" id="5485992">comment</span><span class="op" id="5485999">.</span><span class="ident" id="5486000">Text</span><span class="op" id="5486004">(</span><span class="op" id="5486005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486008">if</span>&nbsp;<span class="ident" id="5486011">r</span><span class="op" id="5486012">.</span><span class="ident" id="5486013">doc</span>&nbsp;<span class="op" id="5486017">==</span>&nbsp;<span class="string" id="5486020">&#34;&#34;</span>&nbsp;<span class="op" id="5486023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486027">r</span><span class="op" id="5486028">.</span><span class="ident" id="5486029">doc</span>&nbsp;<span class="op" id="5486033">=</span>&nbsp;<span class="ident" id="5486035">text</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486042">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5486050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486053">r</span><span class="op" id="5486054">.</span><span class="ident" id="5486055">doc</span>&nbsp;<span class="op" id="5486059">+=</span>&nbsp;<span class="string" id="5486062">&#34;\n&#34;</span>&nbsp;<span class="op" id="5486067">+</span>&nbsp;<span class="ident" id="5486069">text</span><br>
<span class="lineno"></span><span class="op" id="5486074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="5486077">func</span>&nbsp;<span class="op" id="5486082">(</span><span class="ident" id="5486083">r</span>&nbsp;<span class="op" id="5486085">*</span><span class="ident" id="5486086">reader</span><span class="op" id="5486092">)</span>&nbsp;<span class="ident" id="5486094">remember</span><span class="op" id="5486102">(</span><span class="ident" id="5486103">typ</span>&nbsp;<span class="op" id="5486107">*</span><span class="ident" id="5486108">ast</span><span class="op" id="5486111">.</span><span class="ident" id="5486112">InterfaceType</span><span class="op" id="5486125">)</span>&nbsp;<span class="op" id="5486127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486130">r</span><span class="op" id="5486131">.</span><span class="ident" id="5486132">fixlist</span>&nbsp;<span class="op" id="5486140">=</span>&nbsp;<span class="builtinfunc" id="5486142">append</span><span class="op" id="5486148">(</span><span class="ident" id="5486149">r</span><span class="op" id="5486150">.</span><span class="ident" id="5486151">fixlist</span><span class="op" id="5486158">,</span>&nbsp;<span class="ident" id="5486160">typ</span><span class="op" id="5486163">)</span><br>
<span class="lineno"></span><span class="op" id="5486165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5486168">func</span>&nbsp;<span class="ident" id="5486173">specNames</span><span class="op" id="5486182">(</span><span class="ident" id="5486183">specs</span>&nbsp;<span class="op" id="5486189">[</span><span class="op" id="5486190">]</span><span class="ident" id="5486191">ast</span><span class="op" id="5486194">.</span><span class="ident" id="5486195">Spec</span><span class="op" id="5486199">)</span>&nbsp;<span class="op" id="5486201">[</span><span class="op" id="5486202">]</span><span class="builtintype" id="5486203">string</span>&nbsp;<span class="op" id="5486210">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486213">names</span>&nbsp;<span class="op" id="5486219">:=</span>&nbsp;<span class="builtinfunc" id="5486222">make</span><span class="op" id="5486226">(</span><span class="op" id="5486227">[</span><span class="op" id="5486228">]</span><span class="builtintype" id="5486229">string</span><span class="op" id="5486235">,</span>&nbsp;<span class="num" id="5486237">0</span><span class="op" id="5486238">,</span>&nbsp;<span class="builtinfunc" id="5486240">len</span><span class="op" id="5486243">(</span><span class="ident" id="5486244">specs</span><span class="op" id="5486249">)</span><span class="op" id="5486250">)</span>&nbsp;<span class="comment" id="5486252">//&nbsp;reasonable&nbsp;estimate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486276">for</span>&nbsp;<span class="ident" id="5486280">_</span><span class="op" id="5486281">,</span>&nbsp;<span class="ident" id="5486283">s</span>&nbsp;<span class="op" id="5486285">:=</span>&nbsp;<span class="keyword" id="5486288">range</span>&nbsp;<span class="ident" id="5486294">specs</span>&nbsp;<span class="op" id="5486300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5486304">//&nbsp;s&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;an&nbsp;*ast.ValueSpec&nbsp;by&nbsp;readValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486359">for</span>&nbsp;<span class="ident" id="5486363">_</span><span class="op" id="5486364">,</span>&nbsp;<span class="ident" id="5486366">ident</span>&nbsp;<span class="op" id="5486372">:=</span>&nbsp;<span class="keyword" id="5486375">range</span>&nbsp;<span class="ident" id="5486381">s</span><span class="op" id="5486382">.</span><span class="op" id="5486383">(</span><span class="op" id="5486384">*</span><span class="ident" id="5486385">ast</span><span class="op" id="5486388">.</span><span class="ident" id="5486389">ValueSpec</span><span class="op" id="5486398">)</span><span class="op" id="5486399">.</span><span class="ident" id="5486400">Names</span>&nbsp;<span class="op" id="5486406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486411">names</span>&nbsp;<span class="op" id="5486417">=</span>&nbsp;<span class="builtinfunc" id="5486419">append</span><span class="op" id="5486425">(</span><span class="ident" id="5486426">names</span><span class="op" id="5486431">,</span>&nbsp;<span class="ident" id="5486433">ident</span><span class="op" id="5486438">.</span><span class="ident" id="5486439">Name</span><span class="op" id="5486443">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5486447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5486450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486453">return</span>&nbsp;<span class="ident" id="5486460">names</span><br>
<span class="lineno"></span><span class="op" id="5486466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="comment" id="5486469">//&nbsp;readValue&nbsp;processes&nbsp;a&nbsp;const&nbsp;or&nbsp;var&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5486520">//</span><br>
<span class="lineno"></span><span class="keyword" id="5486523">func</span>&nbsp;<span class="op" id="5486528">(</span><span class="ident" id="5486529">r</span>&nbsp;<span class="op" id="5486531">*</span><span class="ident" id="5486532">reader</span><span class="op" id="5486538">)</span>&nbsp;<span class="ident" id="5486540">readValue</span><span class="op" id="5486549">(</span><span class="ident" id="5486550">decl</span>&nbsp;<span class="op" id="5486555">*</span><span class="ident" id="5486556">ast</span><span class="op" id="5486559">.</span><span class="ident" id="5486560">GenDecl</span><span class="op" id="5486567">)</span>&nbsp;<span class="op" id="5486569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5486572">//&nbsp;determine&nbsp;if&nbsp;decl&nbsp;should&nbsp;be&nbsp;associated&nbsp;with&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5486627">//&nbsp;Heuristic:&nbsp;For&nbsp;each&nbsp;typed&nbsp;entry,&nbsp;determine&nbsp;the&nbsp;type&nbsp;name,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5486697">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;exactly&nbsp;one&nbsp;type&nbsp;name&nbsp;that&nbsp;is&nbsp;sufficiently</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5486767">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frequent,&nbsp;associate&nbsp;the&nbsp;decl&nbsp;with&nbsp;the&nbsp;respective&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486837">domName</span>&nbsp;<span class="op" id="5486845">:=</span>&nbsp;<span class="string" id="5486848">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486852">domFreq</span>&nbsp;<span class="op" id="5486860">:=</span>&nbsp;<span class="num" id="5486863">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486866">prev</span>&nbsp;<span class="op" id="5486871">:=</span>&nbsp;<span class="string" id="5486874">&#34;&#34;</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486878">n</span>&nbsp;<span class="op" id="5486880">:=</span>&nbsp;<span class="num" id="5486883">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486886">for</span>&nbsp;<span class="ident" id="5486890">_</span><span class="op" id="5486891">,</span>&nbsp;<span class="ident" id="5486893">spec</span>&nbsp;<span class="op" id="5486898">:=</span>&nbsp;<span class="keyword" id="5486901">range</span>&nbsp;<span class="ident" id="5486907">decl</span><span class="op" id="5486911">.</span><span class="ident" id="5486912">Specs</span>&nbsp;<span class="op" id="5486918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486922">s</span><span class="op" id="5486923">,</span>&nbsp;<span class="ident" id="5486925">ok</span>&nbsp;<span class="op" id="5486928">:=</span>&nbsp;<span class="ident" id="5486931">spec</span><span class="op" id="5486935">.</span><span class="op" id="5486936">(</span><span class="op" id="5486937">*</span><span class="ident" id="5486938">ast</span><span class="op" id="5486941">.</span><span class="ident" id="5486942">ValueSpec</span><span class="op" id="5486951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486955">if</span>&nbsp;<span class="op" id="5486958">!</span><span class="ident" id="5486959">ok</span>&nbsp;<span class="op" id="5486962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486967">continue</span>&nbsp;<span class="comment" id="5486976">//&nbsp;should&nbsp;not&nbsp;happen,&nbsp;but&nbsp;be&nbsp;conservative</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487024">name</span>&nbsp;<span class="op" id="5487029">:=</span>&nbsp;<span class="string" id="5487032">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487037">switch</span>&nbsp;<span class="op" id="5487044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487048">case</span>&nbsp;<span class="ident" id="5487053">s</span><span class="op" id="5487054">.</span><span class="ident" id="5487055">Type</span>&nbsp;<span class="op" id="5487060">!=</span>&nbsp;<span class="builtintype" id="5487063">nil</span><span class="op" id="5487066">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5487071">//&nbsp;a&nbsp;type&nbsp;is&nbsp;present;&nbsp;determine&nbsp;its&nbsp;name</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487115">if</span>&nbsp;<span class="ident" id="5487118">n</span><span class="op" id="5487119">,</span>&nbsp;<span class="ident" id="5487121">imp</span>&nbsp;<span class="op" id="5487125">:=</span>&nbsp;<span class="ident" id="5487128">baseTypeName</span><span class="op" id="5487140">(</span><span class="ident" id="5487141">s</span><span class="op" id="5487142">.</span><span class="ident" id="5487143">Type</span><span class="op" id="5487147">)</span><span class="op" id="5487148">;</span>&nbsp;<span class="op" id="5487150">!</span><span class="ident" id="5487151">imp</span>&nbsp;<span class="op" id="5487155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487161">name</span>&nbsp;<span class="op" id="5487166">=</span>&nbsp;<span class="ident" id="5487168">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487177">case</span>&nbsp;<span class="ident" id="5487182">decl</span><span class="op" id="5487186">.</span><span class="ident" id="5487187">Tok</span>&nbsp;<span class="op" id="5487191">==</span>&nbsp;<span class="ident" id="5487194">token</span><span class="op" id="5487199">.</span><span class="ident" id="5487200">CONST</span><span class="op" id="5487205">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5487210">//&nbsp;no&nbsp;type&nbsp;is&nbsp;present&nbsp;but&nbsp;we&nbsp;have&nbsp;a&nbsp;constant&nbsp;declaration;</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5487271">//&nbsp;use&nbsp;the&nbsp;previous&nbsp;type&nbsp;name&nbsp;(w/o&nbsp;more&nbsp;type&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5487331">//&nbsp;we&nbsp;cannot&nbsp;handle&nbsp;the&nbsp;case&nbsp;of&nbsp;unnamed&nbsp;variables&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5487389">//&nbsp;initializer&nbsp;expressions&nbsp;except&nbsp;for&nbsp;some&nbsp;trivial&nbsp;cases)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487450">name</span>&nbsp;<span class="op" id="5487455">=</span>&nbsp;<span class="ident" id="5487457">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487464">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487468">if</span>&nbsp;<span class="ident" id="5487471">name</span>&nbsp;<span class="op" id="5487476">!=</span>&nbsp;<span class="string" id="5487479">&#34;&#34;</span>&nbsp;<span class="op" id="5487482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5487487">//&nbsp;entry&nbsp;has&nbsp;a&nbsp;named&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487516">if</span>&nbsp;<span class="ident" id="5487519">domName</span>&nbsp;<span class="op" id="5487527">!=</span>&nbsp;<span class="string" id="5487530">&#34;&#34;</span>&nbsp;<span class="op" id="5487533">&amp;&amp;</span>&nbsp;<span class="ident" id="5487536">domName</span>&nbsp;<span class="op" id="5487544">!=</span>&nbsp;<span class="ident" id="5487547">name</span>&nbsp;<span class="op" id="5487552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5487558">//&nbsp;more&nbsp;than&nbsp;one&nbsp;type&nbsp;name&nbsp;-&nbsp;do&nbsp;not&nbsp;associate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5487608">//&nbsp;with&nbsp;any&nbsp;type</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487629">domName</span>&nbsp;<span class="op" id="5487637">=</span>&nbsp;<span class="string" id="5487639">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487646">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487660">domName</span>&nbsp;<span class="op" id="5487668">=</span>&nbsp;<span class="ident" id="5487670">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487678">domFreq</span><span class="op" id="5487685">++</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487694">prev</span>&nbsp;<span class="op" id="5487699">=</span>&nbsp;<span class="ident" id="5487701">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487708">n</span><span class="op" id="5487709">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5487717">//&nbsp;nothing&nbsp;to&nbsp;do&nbsp;w/o&nbsp;a&nbsp;legal&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487759">if</span>&nbsp;<span class="ident" id="5487762">n</span>&nbsp;<span class="op" id="5487764">==</span>&nbsp;<span class="num" id="5487767">0</span>&nbsp;<span class="op" id="5487769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487773">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5487785">//&nbsp;determine&nbsp;values&nbsp;list&nbsp;with&nbsp;which&nbsp;to&nbsp;associate&nbsp;the&nbsp;Value&nbsp;for&nbsp;this&nbsp;decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487859">values</span>&nbsp;<span class="op" id="5487866">:=</span>&nbsp;<span class="op" id="5487869">&amp;</span><span class="ident" id="5487870">r</span><span class="op" id="5487871">.</span><span class="ident" id="5487872">values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487880">const</span>&nbsp;<span class="ident" id="5487886">threshold</span>&nbsp;<span class="op" id="5487896">=</span>&nbsp;<span class="num" id="5487898">0.75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487904">if</span>&nbsp;<span class="ident" id="5487907">domName</span>&nbsp;<span class="op" id="5487915">!=</span>&nbsp;<span class="string" id="5487918">&#34;&#34;</span>&nbsp;<span class="op" id="5487921">&amp;&amp;</span>&nbsp;<span class="ident" id="5487924">r</span><span class="op" id="5487925">.</span><span class="ident" id="5487926">isVisible</span><span class="op" id="5487935">(</span><span class="ident" id="5487936">domName</span><span class="op" id="5487943">)</span>&nbsp;<span class="op" id="5487945">&amp;&amp;</span>&nbsp;<span class="ident" id="5487948">domFreq</span>&nbsp;<span class="op" id="5487956">&gt;=</span>&nbsp;<span class="builtintype" id="5487959">int</span><span class="op" id="5487962">(</span><span class="builtintype" id="5487963">float64</span><span class="op" id="5487970">(</span><span class="builtinfunc" id="5487971">len</span><span class="op" id="5487974">(</span><span class="ident" id="5487975">decl</span><span class="op" id="5487979">.</span><span class="ident" id="5487980">Specs</span><span class="op" id="5487985">)</span><span class="op" id="5487986">)</span><span class="op" id="5487987">*</span><span class="ident" id="5487988">threshold</span><span class="op" id="5487997">)</span>&nbsp;<span class="op" id="5487999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5488003">//&nbsp;typed&nbsp;entries&nbsp;are&nbsp;sufficiently&nbsp;frequent</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488048">if</span>&nbsp;<span class="ident" id="5488051">typ</span>&nbsp;<span class="op" id="5488055">:=</span>&nbsp;<span class="ident" id="5488058">r</span><span class="op" id="5488059">.</span><span class="ident" id="5488060">lookupType</span><span class="op" id="5488070">(</span><span class="ident" id="5488071">domName</span><span class="op" id="5488078">)</span><span class="op" id="5488079">;</span>&nbsp;<span class="ident" id="5488081">typ</span>&nbsp;<span class="op" id="5488085">!=</span>&nbsp;<span class="builtintype" id="5488088">nil</span>&nbsp;<span class="op" id="5488092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5488097">values</span>&nbsp;<span class="op" id="5488104">=</span>&nbsp;<span class="op" id="5488106">&amp;</span><span class="ident" id="5488107">typ</span><span class="op" id="5488110">.</span><span class="ident" id="5488111">values</span>&nbsp;<span class="comment" id="5488118">//&nbsp;associate&nbsp;with&nbsp;that&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5488148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5488151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5488155">*</span><span class="ident" id="5488156">values</span>&nbsp;<span class="op" id="5488163">=</span>&nbsp;<span class="builtinfunc" id="5488165">append</span><span class="op" id="5488171">(</span><span class="op" id="5488172">*</span><span class="ident" id="5488173">values</span><span class="op" id="5488179">,</span>&nbsp;<span class="op" id="5488181">&amp;</span><span class="ident" id="5488182">Value</span><span class="op" id="5488187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5488191">Doc</span><span class="op" id="5488194">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5488198">decl</span><span class="op" id="5488202">.</span><span class="ident" id="5488203">Doc</span><span class="op" id="5488206">.</span><span class="ident" id="5488207">Text</span><span class="op" id="5488211">(</span><span class="op" id="5488212">)</span><span class="op" id="5488213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5488217">Names</span><span class="op" id="5488222">:</span>&nbsp;<span class="ident" id="5488224">specNames</span><span class="op" id="5488233">(</span><span class="ident" id="5488234">decl</span><span class="op" id="5488238">.</span><span class="ident" id="5488239">Specs</span><span class="op" id="5488244">)</span><span class="op" id="5488245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5488249">Decl</span><span class="op" id="5488253">:</span>&nbsp;&nbsp;<span class="ident" id="5488256">decl</span><span class="op" id="5488260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5488264">order</span><span class="op" id="5488269">:</span>&nbsp;<span class="builtinfunc" id="5488271">len</span><span class="op" id="5488274">(</span><span class="op" id="5488275">*</span><span class="ident" id="5488276">values</span><span class="op" id="5488282">)</span><span class="op" id="5488283">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5488286">}</span><span class="op" id="5488287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5488290">decl</span><span class="op" id="5488294">.</span><span class="ident" id="5488295">Doc</span>&nbsp;<span class="op" id="5488299">=</span>&nbsp;<span class="builtintype" id="5488301">nil</span>&nbsp;<span class="comment" id="5488305">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="5488339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5488342">//&nbsp;fields&nbsp;returns&nbsp;a&nbsp;struct&#39;s&nbsp;fields&nbsp;or&nbsp;an&nbsp;interface&#39;s&nbsp;methods.</span><br>
<span class="lineno">305</span><span class="comment" id="5488405">//</span><br>
<span class="lineno"></span><span class="keyword" id="5488408">func</span>&nbsp;<span class="ident" id="5488413">fields</span><span class="op" id="5488419">(</span><span class="ident" id="5488420">typ</span>&nbsp;<span class="ident" id="5488424">ast</span><span class="op" id="5488427">.</span><span class="ident" id="5488428">Expr</span><span class="op" id="5488432">)</span>&nbsp;<span class="op" id="5488434">(</span><span class="ident" id="5488435">list</span>&nbsp;<span class="op" id="5488440">[</span><span class="op" id="5488441">]</span><span class="op" id="5488442">*</span><span class="ident" id="5488443">ast</span><span class="op" id="5488446">.</span><span class="ident" id="5488447">Field</span><span class="op" id="5488452">,</span>&nbsp;<span class="ident" id="5488454">isStruct</span>&nbsp;<span class="builtintype" id="5488463">bool</span><span class="op" id="5488467">)</span>&nbsp;<span class="op" id="5488469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488472">var</span>&nbsp;<span class="ident" id="5488476">fields</span>&nbsp;<span class="op" id="5488483">*</span><span class="ident" id="5488484">ast</span><span class="op" id="5488487">.</span><span class="ident" id="5488488">FieldList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488499">switch</span>&nbsp;<span class="ident" id="5488506">t</span>&nbsp;<span class="op" id="5488508">:=</span>&nbsp;<span class="ident" id="5488511">typ</span><span class="op" id="5488514">.</span><span class="op" id="5488515">(</span><span class="keyword" id="5488516">type</span><span class="op" id="5488520">)</span>&nbsp;<span class="op" id="5488522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488525">case</span>&nbsp;<span class="op" id="5488530">*</span><span class="ident" id="5488531">ast</span><span class="op" id="5488534">.</span><span class="ident" id="5488535">StructType</span><span class="op" id="5488545">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5488549">fields</span>&nbsp;<span class="op" id="5488556">=</span>&nbsp;<span class="ident" id="5488558">t</span><span class="op" id="5488559">.</span><span class="ident" id="5488560">Fields</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5488569">isStruct</span>&nbsp;<span class="op" id="5488578">=</span>&nbsp;<span class="builtintype" id="5488580">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488586">case</span>&nbsp;<span class="op" id="5488591">*</span><span class="ident" id="5488592">ast</span><span class="op" id="5488595">.</span><span class="ident" id="5488596">InterfaceType</span><span class="op" id="5488609">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5488613">fields</span>&nbsp;<span class="op" id="5488620">=</span>&nbsp;<span class="ident" id="5488622">t</span><span class="op" id="5488623">.</span><span class="ident" id="5488624">Methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5488633">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488636">if</span>&nbsp;<span class="ident" id="5488639">fields</span>&nbsp;<span class="op" id="5488646">!=</span>&nbsp;<span class="builtintype" id="5488649">nil</span>&nbsp;<span class="op" id="5488653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5488657">list</span>&nbsp;<span class="op" id="5488662">=</span>&nbsp;<span class="ident" id="5488664">fields</span><span class="op" id="5488670">.</span><span class="ident" id="5488671">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5488677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488680">return</span><br>
<span class="lineno"></span><span class="op" id="5488687">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="5488690">//&nbsp;readType&nbsp;processes&nbsp;a&nbsp;type&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5488732">//</span><br>
<span class="lineno"></span><span class="keyword" id="5488735">func</span>&nbsp;<span class="op" id="5488740">(</span><span class="ident" id="5488741">r</span>&nbsp;<span class="op" id="5488743">*</span><span class="ident" id="5488744">reader</span><span class="op" id="5488750">)</span>&nbsp;<span class="ident" id="5488752">readType</span><span class="op" id="5488760">(</span><span class="ident" id="5488761">decl</span>&nbsp;<span class="op" id="5488766">*</span><span class="ident" id="5488767">ast</span><span class="op" id="5488770">.</span><span class="ident" id="5488771">GenDecl</span><span class="op" id="5488778">,</span>&nbsp;<span class="ident" id="5488780">spec</span>&nbsp;<span class="op" id="5488785">*</span><span class="ident" id="5488786">ast</span><span class="op" id="5488789">.</span><span class="ident" id="5488790">TypeSpec</span><span class="op" id="5488798">)</span>&nbsp;<span class="op" id="5488800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5488803">typ</span>&nbsp;<span class="op" id="5488807">:=</span>&nbsp;<span class="ident" id="5488810">r</span><span class="op" id="5488811">.</span><span class="ident" id="5488812">lookupType</span><span class="op" id="5488822">(</span><span class="ident" id="5488823">spec</span><span class="op" id="5488827">.</span><span class="ident" id="5488828">Name</span><span class="op" id="5488832">.</span><span class="ident" id="5488833">Name</span><span class="op" id="5488837">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488840">if</span>&nbsp;<span class="ident" id="5488843">typ</span>&nbsp;<span class="op" id="5488847">==</span>&nbsp;<span class="builtintype" id="5488850">nil</span>&nbsp;<span class="op" id="5488854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488858">return</span>&nbsp;<span class="comment" id="5488865">//&nbsp;no&nbsp;name&nbsp;or&nbsp;blank&nbsp;name&nbsp;-&nbsp;ignore&nbsp;the&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5488909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5488913">//&nbsp;A&nbsp;type&nbsp;should&nbsp;be&nbsp;added&nbsp;at&nbsp;most&nbsp;once,&nbsp;so&nbsp;typ.decl</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5488966">//&nbsp;should&nbsp;be&nbsp;nil&nbsp;-&nbsp;if&nbsp;it&nbsp;is&nbsp;not,&nbsp;simply&nbsp;overwrite&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489021">typ</span><span class="op" id="5489024">.</span><span class="ident" id="5489025">decl</span>&nbsp;<span class="op" id="5489030">=</span>&nbsp;<span class="ident" id="5489032">decl</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5489039">//&nbsp;compute&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489065">doc</span>&nbsp;<span class="op" id="5489069">:=</span>&nbsp;<span class="ident" id="5489072">spec</span><span class="op" id="5489076">.</span><span class="ident" id="5489077">Doc</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489082">spec</span><span class="op" id="5489086">.</span><span class="ident" id="5489087">Doc</span>&nbsp;<span class="op" id="5489091">=</span>&nbsp;<span class="builtintype" id="5489093">nil</span>&nbsp;<span class="comment" id="5489097">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489132">if</span>&nbsp;<span class="ident" id="5489135">doc</span>&nbsp;<span class="op" id="5489139">==</span>&nbsp;<span class="builtintype" id="5489142">nil</span>&nbsp;<span class="op" id="5489146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5489150">//&nbsp;no&nbsp;doc&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec,&nbsp;use&nbsp;the&nbsp;declaration&nbsp;doc,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489220">doc</span>&nbsp;<span class="op" id="5489224">=</span>&nbsp;<span class="ident" id="5489226">decl</span><span class="op" id="5489230">.</span><span class="ident" id="5489231">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5489236">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489239">decl</span><span class="op" id="5489243">.</span><span class="ident" id="5489244">Doc</span>&nbsp;<span class="op" id="5489248">=</span>&nbsp;<span class="builtintype" id="5489250">nil</span>&nbsp;<span class="comment" id="5489254">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489289">typ</span><span class="op" id="5489292">.</span><span class="ident" id="5489293">doc</span>&nbsp;<span class="op" id="5489297">=</span>&nbsp;<span class="ident" id="5489299">doc</span><span class="op" id="5489302">.</span><span class="ident" id="5489303">Text</span><span class="op" id="5489307">(</span><span class="op" id="5489308">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5489312">//&nbsp;record&nbsp;anonymous&nbsp;fields&nbsp;(they&nbsp;may&nbsp;contribute&nbsp;methods)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5489370">//&nbsp;(some&nbsp;fields&nbsp;may&nbsp;have&nbsp;been&nbsp;recorded&nbsp;already&nbsp;when&nbsp;filtering</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5489433">//&nbsp;exports,&nbsp;but&nbsp;that&#39;s&nbsp;ok)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489461">var</span>&nbsp;<span class="ident" id="5489465">list</span>&nbsp;<span class="op" id="5489470">[</span><span class="op" id="5489471">]</span><span class="op" id="5489472">*</span><span class="ident" id="5489473">ast</span><span class="op" id="5489476">.</span><span class="ident" id="5489477">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489484">list</span><span class="op" id="5489488">,</span>&nbsp;<span class="ident" id="5489490">typ</span><span class="op" id="5489493">.</span><span class="ident" id="5489494">isStruct</span>&nbsp;<span class="op" id="5489503">=</span>&nbsp;<span class="ident" id="5489505">fields</span><span class="op" id="5489511">(</span><span class="ident" id="5489512">spec</span><span class="op" id="5489516">.</span><span class="ident" id="5489517">Type</span><span class="op" id="5489521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489524">for</span>&nbsp;<span class="ident" id="5489528">_</span><span class="op" id="5489529">,</span>&nbsp;<span class="ident" id="5489531">field</span>&nbsp;<span class="op" id="5489537">:=</span>&nbsp;<span class="keyword" id="5489540">range</span>&nbsp;<span class="ident" id="5489546">list</span>&nbsp;<span class="op" id="5489551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489555">if</span>&nbsp;<span class="builtinfunc" id="5489558">len</span><span class="op" id="5489561">(</span><span class="ident" id="5489562">field</span><span class="op" id="5489567">.</span><span class="ident" id="5489568">Names</span><span class="op" id="5489573">)</span>&nbsp;<span class="op" id="5489575">==</span>&nbsp;<span class="num" id="5489578">0</span>&nbsp;<span class="op" id="5489580">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489585">r</span><span class="op" id="5489586">.</span><span class="ident" id="5489587">recordAnonymousField</span><span class="op" id="5489607">(</span><span class="ident" id="5489608">typ</span><span class="op" id="5489611">,</span>&nbsp;<span class="ident" id="5489613">field</span><span class="op" id="5489618">.</span><span class="ident" id="5489619">Type</span><span class="op" id="5489623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5489627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5489630">}</span><br>
<span class="lineno"></span><span class="op" id="5489632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="5489635">//&nbsp;readFunc&nbsp;processes&nbsp;a&nbsp;func&nbsp;or&nbsp;method&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5489687">//</span><br>
<span class="lineno"></span><span class="keyword" id="5489690">func</span>&nbsp;<span class="op" id="5489695">(</span><span class="ident" id="5489696">r</span>&nbsp;<span class="op" id="5489698">*</span><span class="ident" id="5489699">reader</span><span class="op" id="5489705">)</span>&nbsp;<span class="ident" id="5489707">readFunc</span><span class="op" id="5489715">(</span><span class="ident" id="5489716">fun</span>&nbsp;<span class="op" id="5489720">*</span><span class="ident" id="5489721">ast</span><span class="op" id="5489724">.</span><span class="ident" id="5489725">FuncDecl</span><span class="op" id="5489733">)</span>&nbsp;<span class="op" id="5489735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5489738">//&nbsp;strip&nbsp;function&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489762">fun</span><span class="op" id="5489765">.</span><span class="ident" id="5489766">Body</span>&nbsp;<span class="op" id="5489771">=</span>&nbsp;<span class="builtintype" id="5489773">nil</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5489779">//&nbsp;associate&nbsp;methods&nbsp;with&nbsp;the&nbsp;receiver&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489832">if</span>&nbsp;<span class="ident" id="5489835">fun</span><span class="op" id="5489838">.</span><span class="ident" id="5489839">Recv</span>&nbsp;<span class="op" id="5489844">!=</span>&nbsp;<span class="builtintype" id="5489847">nil</span>&nbsp;<span class="op" id="5489851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5489855">//&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489867">recvTypeName</span><span class="op" id="5489879">,</span>&nbsp;<span class="ident" id="5489881">imp</span>&nbsp;<span class="op" id="5489885">:=</span>&nbsp;<span class="ident" id="5489888">baseTypeName</span><span class="op" id="5489900">(</span><span class="ident" id="5489901">fun</span><span class="op" id="5489904">.</span><span class="ident" id="5489905">Recv</span><span class="op" id="5489909">.</span><span class="ident" id="5489910">List</span><span class="op" id="5489914">[</span><span class="num" id="5489915">0</span><span class="op" id="5489916">]</span><span class="op" id="5489917">.</span><span class="ident" id="5489918">Type</span><span class="op" id="5489922">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489926">if</span>&nbsp;<span class="ident" id="5489929">imp</span>&nbsp;<span class="op" id="5489933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5489938">//&nbsp;should&nbsp;not&nbsp;happen&nbsp;(incorrect&nbsp;AST);</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5489979">//&nbsp;don&#39;t&nbsp;show&nbsp;this&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5490008">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5490017">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5490021">if</span>&nbsp;<span class="ident" id="5490024">typ</span>&nbsp;<span class="op" id="5490028">:=</span>&nbsp;<span class="ident" id="5490031">r</span><span class="op" id="5490032">.</span><span class="ident" id="5490033">lookupType</span><span class="op" id="5490043">(</span><span class="ident" id="5490044">recvTypeName</span><span class="op" id="5490056">)</span><span class="op" id="5490057">;</span>&nbsp;<span class="ident" id="5490059">typ</span>&nbsp;<span class="op" id="5490063">!=</span>&nbsp;<span class="builtintype" id="5490066">nil</span>&nbsp;<span class="op" id="5490070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5490075">typ</span><span class="op" id="5490078">.</span><span class="ident" id="5490079">methods</span><span class="op" id="5490086">.</span><span class="ident" id="5490087">set</span><span class="op" id="5490090">(</span><span class="ident" id="5490091">fun</span><span class="op" id="5490094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5490098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5490102">//&nbsp;otherwise&nbsp;ignore&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5490135">//&nbsp;TODO(gri):&nbsp;There&nbsp;may&nbsp;be&nbsp;exported&nbsp;methods&nbsp;of&nbsp;non-exported&nbsp;types</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5490203">//&nbsp;that&nbsp;can&nbsp;be&nbsp;called&nbsp;because&nbsp;of&nbsp;exported&nbsp;values&nbsp;(consts,&nbsp;vars,&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5490272">//&nbsp;function&nbsp;results)&nbsp;of&nbsp;that&nbsp;type.&nbsp;Could&nbsp;determine&nbsp;if&nbsp;that&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5490340">//&nbsp;case&nbsp;and&nbsp;then&nbsp;show&nbsp;those&nbsp;methods&nbsp;in&nbsp;an&nbsp;appropriate&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5490405">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5490413">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5490417">//&nbsp;associate&nbsp;factory&nbsp;functions&nbsp;with&nbsp;the&nbsp;first&nbsp;visible&nbsp;result&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5490492">if</span>&nbsp;<span class="ident" id="5490495">fun</span><span class="op" id="5490498">.</span><span class="ident" id="5490499">Type</span><span class="op" id="5490503">.</span><span class="ident" id="5490504">Results</span><span class="op" id="5490511">.</span><span class="ident" id="5490512">NumFields</span><span class="op" id="5490521">(</span><span class="op" id="5490522">)</span>&nbsp;<span class="op" id="5490524">&gt;=</span>&nbsp;<span class="num" id="5490527">1</span>&nbsp;<span class="op" id="5490529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5490533">res</span>&nbsp;<span class="op" id="5490537">:=</span>&nbsp;<span class="ident" id="5490540">fun</span><span class="op" id="5490543">.</span><span class="ident" id="5490544">Type</span><span class="op" id="5490548">.</span><span class="ident" id="5490549">Results</span><span class="op" id="5490556">.</span><span class="ident" id="5490557">List</span><span class="op" id="5490561">[</span><span class="num" id="5490562">0</span><span class="op" id="5490563">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5490567">if</span>&nbsp;<span class="builtinfunc" id="5490570">len</span><span class="op" id="5490573">(</span><span class="ident" id="5490574">res</span><span class="op" id="5490577">.</span><span class="ident" id="5490578">Names</span><span class="op" id="5490583">)</span>&nbsp;<span class="op" id="5490585">&lt;=</span>&nbsp;<span class="num" id="5490588">1</span>&nbsp;<span class="op" id="5490590">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5490595">//&nbsp;exactly&nbsp;one&nbsp;(named&nbsp;or&nbsp;anonymous)&nbsp;result&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5490652">//&nbsp;with&nbsp;the&nbsp;first&nbsp;type&nbsp;in&nbsp;result&nbsp;signature&nbsp;(there&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5490709">//&nbsp;be&nbsp;more&nbsp;than&nbsp;one&nbsp;result)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5490740">if</span>&nbsp;<span class="ident" id="5490743">n</span><span class="op" id="5490744">,</span>&nbsp;<span class="ident" id="5490746">imp</span>&nbsp;<span class="op" id="5490750">:=</span>&nbsp;<span class="ident" id="5490753">baseTypeName</span><span class="op" id="5490765">(</span><span class="ident" id="5490766">res</span><span class="op" id="5490769">.</span><span class="ident" id="5490770">Type</span><span class="op" id="5490774">)</span><span class="op" id="5490775">;</span>&nbsp;<span class="op" id="5490777">!</span><span class="ident" id="5490778">imp</span>&nbsp;<span class="op" id="5490782">&amp;&amp;</span>&nbsp;<span class="ident" id="5490785">r</span><span class="op" id="5490786">.</span><span class="ident" id="5490787">isVisible</span><span class="op" id="5490796">(</span><span class="ident" id="5490797">n</span><span class="op" id="5490798">)</span>&nbsp;<span class="op" id="5490800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5490806">if</span>&nbsp;<span class="ident" id="5490809">typ</span>&nbsp;<span class="op" id="5490813">:=</span>&nbsp;<span class="ident" id="5490816">r</span><span class="op" id="5490817">.</span><span class="ident" id="5490818">lookupType</span><span class="op" id="5490828">(</span><span class="ident" id="5490829">n</span><span class="op" id="5490830">)</span><span class="op" id="5490831">;</span>&nbsp;<span class="ident" id="5490833">typ</span>&nbsp;<span class="op" id="5490837">!=</span>&nbsp;<span class="builtintype" id="5490840">nil</span>&nbsp;<span class="op" id="5490844">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5490851">//&nbsp;associate&nbsp;function&nbsp;with&nbsp;typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5490887">typ</span><span class="op" id="5490890">.</span><span class="ident" id="5490891">funcs</span><span class="op" id="5490896">.</span><span class="ident" id="5490897">set</span><span class="op" id="5490900">(</span><span class="ident" id="5490901">fun</span><span class="op" id="5490904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5490911">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5490922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5490927">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5490931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5490934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5490938">//&nbsp;just&nbsp;an&nbsp;ordinary&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5490968">r</span><span class="op" id="5490969">.</span><span class="ident" id="5490970">funcs</span><span class="op" id="5490975">.</span><span class="ident" id="5490976">set</span><span class="op" id="5490979">(</span><span class="ident" id="5490980">fun</span><span class="op" id="5490983">)</span><br>
<span class="lineno">400</span><span class="op" id="5490985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5490988">var</span>&nbsp;<span class="op" id="5490992">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5490995">noteMarker</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5491009">=</span>&nbsp;<span class="string" id="5491011">`([A-Z][A-Z]+)\(([^)]+)\):?`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5491059">//&nbsp;MARKER(uid),&nbsp;MARKER&nbsp;at&nbsp;least&nbsp;2&nbsp;chars,&nbsp;uid&nbsp;at&nbsp;least&nbsp;1&nbsp;char</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5491121">noteMarkerRx</span>&nbsp;&nbsp;<span class="op" id="5491135">=</span>&nbsp;<span class="ident" id="5491137">regexp</span><span class="op" id="5491143">.</span><span class="ident" id="5491144">MustCompile</span><span class="op" id="5491155">(</span><span class="string" id="5491156">`^[&nbsp;\t]*`</span>&nbsp;<span class="op" id="5491166">+</span>&nbsp;<span class="ident" id="5491168">noteMarker</span><span class="op" id="5491178">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5491185">//&nbsp;MARKER(uid)&nbsp;at&nbsp;text&nbsp;start</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5491215">noteCommentRx</span>&nbsp;<span class="op" id="5491229">=</span>&nbsp;<span class="ident" id="5491231">regexp</span><span class="op" id="5491237">.</span><span class="ident" id="5491238">MustCompile</span><span class="op" id="5491249">(</span><span class="string" id="5491250">`^/[/*][&nbsp;\t]*`</span>&nbsp;<span class="op" id="5491265">+</span>&nbsp;<span class="ident" id="5491267">noteMarker</span><span class="op" id="5491277">)</span>&nbsp;<span class="comment" id="5491279">//&nbsp;MARKER(uid)&nbsp;at&nbsp;comment&nbsp;start</span><br>
<span class="lineno"></span><span class="op" id="5491311">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5491314">//&nbsp;readNote&nbsp;collects&nbsp;a&nbsp;single&nbsp;note&nbsp;from&nbsp;a&nbsp;sequence&nbsp;of&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5491378">//</span><br>
<span class="lineno">410</span><span class="keyword" id="5491381">func</span>&nbsp;<span class="op" id="5491386">(</span><span class="ident" id="5491387">r</span>&nbsp;<span class="op" id="5491389">*</span><span class="ident" id="5491390">reader</span><span class="op" id="5491396">)</span>&nbsp;<span class="ident" id="5491398">readNote</span><span class="op" id="5491406">(</span><span class="ident" id="5491407">list</span>&nbsp;<span class="op" id="5491412">[</span><span class="op" id="5491413">]</span><span class="op" id="5491414">*</span><span class="ident" id="5491415">ast</span><span class="op" id="5491418">.</span><span class="ident" id="5491419">Comment</span><span class="op" id="5491426">)</span>&nbsp;<span class="op" id="5491428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5491431">text</span>&nbsp;<span class="op" id="5491436">:=</span>&nbsp;<span class="op" id="5491439">(</span><span class="op" id="5491440">&amp;</span><span class="ident" id="5491441">ast</span><span class="op" id="5491444">.</span><span class="ident" id="5491445">CommentGroup</span><span class="op" id="5491457">{</span><span class="ident" id="5491458">List</span><span class="op" id="5491462">:</span>&nbsp;<span class="ident" id="5491464">list</span><span class="op" id="5491468">}</span><span class="op" id="5491469">)</span><span class="op" id="5491470">.</span><span class="ident" id="5491471">Text</span><span class="op" id="5491475">(</span><span class="op" id="5491476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5491479">if</span>&nbsp;<span class="ident" id="5491482">m</span>&nbsp;<span class="op" id="5491484">:=</span>&nbsp;<span class="ident" id="5491487">noteMarkerRx</span><span class="op" id="5491499">.</span><span class="ident" id="5491500">FindStringSubmatchIndex</span><span class="op" id="5491523">(</span><span class="ident" id="5491524">text</span><span class="op" id="5491528">)</span><span class="op" id="5491529">;</span>&nbsp;<span class="ident" id="5491531">m</span>&nbsp;<span class="op" id="5491533">!=</span>&nbsp;<span class="builtintype" id="5491536">nil</span>&nbsp;<span class="op" id="5491540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5491544">//&nbsp;The&nbsp;note&nbsp;body&nbsp;starts&nbsp;after&nbsp;the&nbsp;marker.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5491588">//&nbsp;We&nbsp;remove&nbsp;any&nbsp;formatting&nbsp;so&nbsp;that&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5491635">//&nbsp;get&nbsp;spurious&nbsp;line&nbsp;breaks/indentation&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5491682">//&nbsp;showing&nbsp;the&nbsp;TODO&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5491710">body</span>&nbsp;<span class="op" id="5491715">:=</span>&nbsp;<span class="ident" id="5491718">clean</span><span class="op" id="5491723">(</span><span class="ident" id="5491724">text</span><span class="op" id="5491728">[</span><span class="ident" id="5491729">m</span><span class="op" id="5491730">[</span><span class="num" id="5491731">1</span><span class="op" id="5491732">]</span><span class="op" id="5491733">:</span><span class="op" id="5491734">]</span><span class="op" id="5491735">,</span>&nbsp;<span class="ident" id="5491737">keepNL</span><span class="op" id="5491743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5491747">if</span>&nbsp;<span class="ident" id="5491750">body</span>&nbsp;<span class="op" id="5491755">!=</span>&nbsp;<span class="string" id="5491758">&#34;&#34;</span>&nbsp;<span class="op" id="5491761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5491766">marker</span>&nbsp;<span class="op" id="5491773">:=</span>&nbsp;<span class="ident" id="5491776">text</span><span class="op" id="5491780">[</span><span class="ident" id="5491781">m</span><span class="op" id="5491782">[</span><span class="num" id="5491783">2</span><span class="op" id="5491784">]</span><span class="op" id="5491785">:</span><span class="ident" id="5491786">m</span><span class="op" id="5491787">[</span><span class="num" id="5491788">3</span><span class="op" id="5491789">]</span><span class="op" id="5491790">]</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5491795">r</span><span class="op" id="5491796">.</span><span class="ident" id="5491797">notes</span><span class="op" id="5491802">[</span><span class="ident" id="5491803">marker</span><span class="op" id="5491809">]</span>&nbsp;<span class="op" id="5491811">=</span>&nbsp;<span class="builtinfunc" id="5491813">append</span><span class="op" id="5491819">(</span><span class="ident" id="5491820">r</span><span class="op" id="5491821">.</span><span class="ident" id="5491822">notes</span><span class="op" id="5491827">[</span><span class="ident" id="5491828">marker</span><span class="op" id="5491834">]</span><span class="op" id="5491835">,</span>&nbsp;<span class="op" id="5491837">&amp;</span><span class="ident" id="5491838">Note</span><span class="op" id="5491842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5491848">Pos</span><span class="op" id="5491851">:</span>&nbsp;&nbsp;<span class="ident" id="5491854">list</span><span class="op" id="5491858">[</span><span class="num" id="5491859">0</span><span class="op" id="5491860">]</span><span class="op" id="5491861">.</span><span class="ident" id="5491862">Pos</span><span class="op" id="5491865">(</span><span class="op" id="5491866">)</span><span class="op" id="5491867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5491873">End</span><span class="op" id="5491876">:</span>&nbsp;&nbsp;<span class="ident" id="5491879">list</span><span class="op" id="5491883">[</span><span class="builtinfunc" id="5491884">len</span><span class="op" id="5491887">(</span><span class="ident" id="5491888">list</span><span class="op" id="5491892">)</span><span class="op" id="5491893">-</span><span class="num" id="5491894">1</span><span class="op" id="5491895">]</span><span class="op" id="5491896">.</span><span class="ident" id="5491897">End</span><span class="op" id="5491900">(</span><span class="op" id="5491901">)</span><span class="op" id="5491902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5491908">UID</span><span class="op" id="5491911">:</span>&nbsp;&nbsp;<span class="ident" id="5491914">text</span><span class="op" id="5491918">[</span><span class="ident" id="5491919">m</span><span class="op" id="5491920">[</span><span class="num" id="5491921">4</span><span class="op" id="5491922">]</span><span class="op" id="5491923">:</span><span class="ident" id="5491924">m</span><span class="op" id="5491925">[</span><span class="num" id="5491926">5</span><span class="op" id="5491927">]</span><span class="op" id="5491928">]</span><span class="op" id="5491929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5491935">Body</span><span class="op" id="5491939">:</span>&nbsp;<span class="ident" id="5491941">body</span><span class="op" id="5491945">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5491950">}</span><span class="op" id="5491951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5491955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5491958">}</span><br>
<span class="lineno"></span><span class="op" id="5491960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="comment" id="5491963">//&nbsp;readNotes&nbsp;extracts&nbsp;notes&nbsp;from&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5492006">//&nbsp;A&nbsp;note&nbsp;must&nbsp;start&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;comment&nbsp;with&nbsp;&#34;MARKER(uid):&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5492077">//&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;the&nbsp;note&nbsp;body&nbsp;(e.g.,&nbsp;&#34;//&nbsp;BUG(gri):&nbsp;fix&nbsp;this&#34;).</span><br>
<span class="lineno"></span><span class="comment" id="5492146">//&nbsp;The&nbsp;note&nbsp;ends&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;comment&nbsp;group&nbsp;or&nbsp;at&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5492214">//&nbsp;another&nbsp;note&nbsp;in&nbsp;the&nbsp;same&nbsp;comment&nbsp;group,&nbsp;whichever&nbsp;comes&nbsp;first.</span><br>
<span class="lineno">435</span><span class="comment" id="5492280">//</span><br>
<span class="lineno"></span><span class="keyword" id="5492283">func</span>&nbsp;<span class="op" id="5492288">(</span><span class="ident" id="5492289">r</span>&nbsp;<span class="op" id="5492291">*</span><span class="ident" id="5492292">reader</span><span class="op" id="5492298">)</span>&nbsp;<span class="ident" id="5492300">readNotes</span><span class="op" id="5492309">(</span><span class="ident" id="5492310">comments</span>&nbsp;<span class="op" id="5492319">[</span><span class="op" id="5492320">]</span><span class="op" id="5492321">*</span><span class="ident" id="5492322">ast</span><span class="op" id="5492325">.</span><span class="ident" id="5492326">CommentGroup</span><span class="op" id="5492338">)</span>&nbsp;<span class="op" id="5492340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5492343">for</span>&nbsp;<span class="ident" id="5492347">_</span><span class="op" id="5492348">,</span>&nbsp;<span class="ident" id="5492350">group</span>&nbsp;<span class="op" id="5492356">:=</span>&nbsp;<span class="keyword" id="5492359">range</span>&nbsp;<span class="ident" id="5492365">comments</span>&nbsp;<span class="op" id="5492374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5492378">i</span>&nbsp;<span class="op" id="5492380">:=</span>&nbsp;<span class="op" id="5492383">-</span><span class="num" id="5492384">1</span>&nbsp;<span class="comment" id="5492386">//&nbsp;comment&nbsp;index&nbsp;of&nbsp;most&nbsp;recent&nbsp;note&nbsp;start,&nbsp;valid&nbsp;if&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5492446">list</span>&nbsp;<span class="op" id="5492451">:=</span>&nbsp;<span class="ident" id="5492454">group</span><span class="op" id="5492459">.</span><span class="ident" id="5492460">List</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5492467">for</span>&nbsp;<span class="ident" id="5492471">j</span><span class="op" id="5492472">,</span>&nbsp;<span class="ident" id="5492474">c</span>&nbsp;<span class="op" id="5492476">:=</span>&nbsp;<span class="keyword" id="5492479">range</span>&nbsp;<span class="ident" id="5492485">list</span>&nbsp;<span class="op" id="5492490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5492495">if</span>&nbsp;<span class="ident" id="5492498">noteCommentRx</span><span class="op" id="5492511">.</span><span class="ident" id="5492512">MatchString</span><span class="op" id="5492523">(</span><span class="ident" id="5492524">c</span><span class="op" id="5492525">.</span><span class="ident" id="5492526">Text</span><span class="op" id="5492530">)</span>&nbsp;<span class="op" id="5492532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5492538">if</span>&nbsp;<span class="ident" id="5492541">i</span>&nbsp;<span class="op" id="5492543">&gt;=</span>&nbsp;<span class="num" id="5492546">0</span>&nbsp;<span class="op" id="5492548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5492555">r</span><span class="op" id="5492556">.</span><span class="ident" id="5492557">readNote</span><span class="op" id="5492565">(</span><span class="ident" id="5492566">list</span><span class="op" id="5492570">[</span><span class="ident" id="5492571">i</span><span class="op" id="5492572">:</span><span class="ident" id="5492573">j</span><span class="op" id="5492574">]</span><span class="op" id="5492575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5492581">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5492587">i</span>&nbsp;<span class="op" id="5492589">=</span>&nbsp;<span class="ident" id="5492591">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5492596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5492600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5492604">if</span>&nbsp;<span class="ident" id="5492607">i</span>&nbsp;<span class="op" id="5492609">&gt;=</span>&nbsp;<span class="num" id="5492612">0</span>&nbsp;<span class="op" id="5492614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5492619">r</span><span class="op" id="5492620">.</span><span class="ident" id="5492621">readNote</span><span class="op" id="5492629">(</span><span class="ident" id="5492630">list</span><span class="op" id="5492634">[</span><span class="ident" id="5492635">i</span><span class="op" id="5492636">:</span><span class="op" id="5492637">]</span><span class="op" id="5492638">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5492642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5492645">}</span><br>
<span class="lineno"></span><span class="op" id="5492647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5492650">//&nbsp;readFile&nbsp;adds&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;source&nbsp;file&nbsp;to&nbsp;the&nbsp;reader.</span><br>
<span class="lineno">455</span><span class="comment" id="5492708">//</span><br>
<span class="lineno"></span><span class="keyword" id="5492711">func</span>&nbsp;<span class="op" id="5492716">(</span><span class="ident" id="5492717">r</span>&nbsp;<span class="op" id="5492719">*</span><span class="ident" id="5492720">reader</span><span class="op" id="5492726">)</span>&nbsp;<span class="ident" id="5492728">readFile</span><span class="op" id="5492736">(</span><span class="ident" id="5492737">src</span>&nbsp;<span class="op" id="5492741">*</span><span class="ident" id="5492742">ast</span><span class="op" id="5492745">.</span><span class="ident" id="5492746">File</span><span class="op" id="5492750">)</span>&nbsp;<span class="op" id="5492752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5492755">//&nbsp;add&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5492785">if</span>&nbsp;<span class="ident" id="5492788">src</span><span class="op" id="5492791">.</span><span class="ident" id="5492792">Doc</span>&nbsp;<span class="op" id="5492796">!=</span>&nbsp;<span class="builtintype" id="5492799">nil</span>&nbsp;<span class="op" id="5492803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5492807">r</span><span class="op" id="5492808">.</span><span class="ident" id="5492809">readDoc</span><span class="op" id="5492816">(</span><span class="ident" id="5492817">src</span><span class="op" id="5492820">.</span><span class="ident" id="5492821">Doc</span><span class="op" id="5492824">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5492828">src</span><span class="op" id="5492831">.</span><span class="ident" id="5492832">Doc</span>&nbsp;<span class="op" id="5492836">=</span>&nbsp;<span class="builtintype" id="5492838">nil</span>&nbsp;<span class="comment" id="5492842">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5492877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5492881">//&nbsp;add&nbsp;all&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5492906">for</span>&nbsp;<span class="ident" id="5492910">_</span><span class="op" id="5492911">,</span>&nbsp;<span class="ident" id="5492913">decl</span>&nbsp;<span class="op" id="5492918">:=</span>&nbsp;<span class="keyword" id="5492921">range</span>&nbsp;<span class="ident" id="5492927">src</span><span class="op" id="5492930">.</span><span class="ident" id="5492931">Decls</span>&nbsp;<span class="op" id="5492937">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5492941">switch</span>&nbsp;<span class="ident" id="5492948">d</span>&nbsp;<span class="op" id="5492950">:=</span>&nbsp;<span class="ident" id="5492953">decl</span><span class="op" id="5492957">.</span><span class="op" id="5492958">(</span><span class="keyword" id="5492959">type</span><span class="op" id="5492963">)</span>&nbsp;<span class="op" id="5492965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5492969">case</span>&nbsp;<span class="op" id="5492974">*</span><span class="ident" id="5492975">ast</span><span class="op" id="5492978">.</span><span class="ident" id="5492979">GenDecl</span><span class="op" id="5492986">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5492991">switch</span>&nbsp;<span class="ident" id="5492998">d</span><span class="op" id="5492999">.</span><span class="ident" id="5493000">Tok</span>&nbsp;<span class="op" id="5493004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5493009">case</span>&nbsp;<span class="ident" id="5493014">token</span><span class="op" id="5493019">.</span><span class="ident" id="5493020">IMPORT</span><span class="op" id="5493026">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5493032">//&nbsp;imports&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5493072">for</span>&nbsp;<span class="ident" id="5493076">_</span><span class="op" id="5493077">,</span>&nbsp;<span class="ident" id="5493079">spec</span>&nbsp;<span class="op" id="5493084">:=</span>&nbsp;<span class="keyword" id="5493087">range</span>&nbsp;<span class="ident" id="5493093">d</span><span class="op" id="5493094">.</span><span class="ident" id="5493095">Specs</span>&nbsp;<span class="op" id="5493101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5493108">if</span>&nbsp;<span class="ident" id="5493111">s</span><span class="op" id="5493112">,</span>&nbsp;<span class="ident" id="5493114">ok</span>&nbsp;<span class="op" id="5493117">:=</span>&nbsp;<span class="ident" id="5493120">spec</span><span class="op" id="5493124">.</span><span class="op" id="5493125">(</span><span class="op" id="5493126">*</span><span class="ident" id="5493127">ast</span><span class="op" id="5493130">.</span><span class="ident" id="5493131">ImportSpec</span><span class="op" id="5493141">)</span><span class="op" id="5493142">;</span>&nbsp;<span class="ident" id="5493144">ok</span>&nbsp;<span class="op" id="5493147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5493155">if</span>&nbsp;<span class="ident" id="5493158">import_</span><span class="op" id="5493165">,</span>&nbsp;<span class="ident" id="5493167">err</span>&nbsp;<span class="op" id="5493171">:=</span>&nbsp;<span class="ident" id="5493174">strconv</span><span class="op" id="5493181">.</span><span class="ident" id="5493182">Unquote</span><span class="op" id="5493189">(</span><span class="ident" id="5493190">s</span><span class="op" id="5493191">.</span><span class="ident" id="5493192">Path</span><span class="op" id="5493196">.</span><span class="ident" id="5493197">Value</span><span class="op" id="5493202">)</span><span class="op" id="5493203">;</span>&nbsp;<span class="ident" id="5493205">err</span>&nbsp;<span class="op" id="5493209">==</span>&nbsp;<span class="builtintype" id="5493212">nil</span>&nbsp;<span class="op" id="5493216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5493225">r</span><span class="op" id="5493226">.</span><span class="ident" id="5493227">imports</span><span class="op" id="5493234">[</span><span class="ident" id="5493235">import_</span><span class="op" id="5493242">]</span>&nbsp;<span class="op" id="5493244">=</span>&nbsp;<span class="num" id="5493246">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5493254">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5493261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5493267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5493272">case</span>&nbsp;<span class="ident" id="5493277">token</span><span class="op" id="5493282">.</span><span class="ident" id="5493283">CONST</span><span class="op" id="5493288">,</span>&nbsp;<span class="ident" id="5493290">token</span><span class="op" id="5493295">.</span><span class="ident" id="5493296">VAR</span><span class="op" id="5493299">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5493305">//&nbsp;constants&nbsp;and&nbsp;variables&nbsp;are&nbsp;always&nbsp;handled&nbsp;as&nbsp;a&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5493366">r</span><span class="op" id="5493367">.</span><span class="ident" id="5493368">readValue</span><span class="op" id="5493377">(</span><span class="ident" id="5493378">d</span><span class="op" id="5493379">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5493384">case</span>&nbsp;<span class="ident" id="5493389">token</span><span class="op" id="5493394">.</span><span class="ident" id="5493395">TYPE</span><span class="op" id="5493399">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5493405">//&nbsp;types&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5493443">if</span>&nbsp;<span class="builtinfunc" id="5493446">len</span><span class="op" id="5493449">(</span><span class="ident" id="5493450">d</span><span class="op" id="5493451">.</span><span class="ident" id="5493452">Specs</span><span class="op" id="5493457">)</span>&nbsp;<span class="op" id="5493459">==</span>&nbsp;<span class="num" id="5493462">1</span>&nbsp;<span class="op" id="5493464">&amp;&amp;</span>&nbsp;<span class="op" id="5493467">!</span><span class="ident" id="5493468">d</span><span class="op" id="5493469">.</span><span class="ident" id="5493470">Lparen</span><span class="op" id="5493476">.</span><span class="ident" id="5493477">IsValid</span><span class="op" id="5493484">(</span><span class="op" id="5493485">)</span>&nbsp;<span class="op" id="5493487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5493494">//&nbsp;common&nbsp;case:&nbsp;single&nbsp;declaration&nbsp;w/o&nbsp;parentheses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5493550">//&nbsp;(if&nbsp;a&nbsp;single&nbsp;declaration&nbsp;is&nbsp;parenthesized,</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5493601">//&nbsp;create&nbsp;a&nbsp;new&nbsp;fake&nbsp;declaration&nbsp;below,&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5493654">//&nbsp;go/doc&nbsp;type&nbsp;declarations&nbsp;always&nbsp;appear&nbsp;w/o</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5493705">//&nbsp;parentheses)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5493726">if</span>&nbsp;<span class="ident" id="5493729">s</span><span class="op" id="5493730">,</span>&nbsp;<span class="ident" id="5493732">ok</span>&nbsp;<span class="op" id="5493735">:=</span>&nbsp;<span class="ident" id="5493738">d</span><span class="op" id="5493739">.</span><span class="ident" id="5493740">Specs</span><span class="op" id="5493745">[</span><span class="num" id="5493746">0</span><span class="op" id="5493747">]</span><span class="op" id="5493748">.</span><span class="op" id="5493749">(</span><span class="op" id="5493750">*</span><span class="ident" id="5493751">ast</span><span class="op" id="5493754">.</span><span class="ident" id="5493755">TypeSpec</span><span class="op" id="5493763">)</span><span class="op" id="5493764">;</span>&nbsp;<span class="ident" id="5493766">ok</span>&nbsp;<span class="op" id="5493769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5493777">r</span><span class="op" id="5493778">.</span><span class="ident" id="5493779">readType</span><span class="op" id="5493787">(</span><span class="ident" id="5493788">d</span><span class="op" id="5493789">,</span>&nbsp;<span class="ident" id="5493791">s</span><span class="op" id="5493792">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5493799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5493806">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5493816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5493822">for</span>&nbsp;<span class="ident" id="5493826">_</span><span class="op" id="5493827">,</span>&nbsp;<span class="ident" id="5493829">spec</span>&nbsp;<span class="op" id="5493834">:=</span>&nbsp;<span class="keyword" id="5493837">range</span>&nbsp;<span class="ident" id="5493843">d</span><span class="op" id="5493844">.</span><span class="ident" id="5493845">Specs</span>&nbsp;<span class="op" id="5493851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5493858">if</span>&nbsp;<span class="ident" id="5493861">s</span><span class="op" id="5493862">,</span>&nbsp;<span class="ident" id="5493864">ok</span>&nbsp;<span class="op" id="5493867">:=</span>&nbsp;<span class="ident" id="5493870">spec</span><span class="op" id="5493874">.</span><span class="op" id="5493875">(</span><span class="op" id="5493876">*</span><span class="ident" id="5493877">ast</span><span class="op" id="5493880">.</span><span class="ident" id="5493881">TypeSpec</span><span class="op" id="5493889">)</span><span class="op" id="5493890">;</span>&nbsp;<span class="ident" id="5493892">ok</span>&nbsp;<span class="op" id="5493895">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5493903">//&nbsp;use&nbsp;an&nbsp;individual&nbsp;(possibly&nbsp;fake)&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5493958">//&nbsp;for&nbsp;each&nbsp;type;&nbsp;this&nbsp;also&nbsp;ensures&nbsp;that&nbsp;each&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5494015">//&nbsp;gets&nbsp;to&nbsp;(re-)use&nbsp;the&nbsp;declaration&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5494071">//&nbsp;if&nbsp;there&#39;s&nbsp;none&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494128">fake</span>&nbsp;<span class="op" id="5494133">:=</span>&nbsp;<span class="op" id="5494136">&amp;</span><span class="ident" id="5494137">ast</span><span class="op" id="5494140">.</span><span class="ident" id="5494141">GenDecl</span><span class="op" id="5494148">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494157">Doc</span><span class="op" id="5494160">:</span>&nbsp;<span class="ident" id="5494162">d</span><span class="op" id="5494163">.</span><span class="ident" id="5494164">Doc</span><span class="op" id="5494167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5494176">//&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;existing&nbsp;TokPos&nbsp;because&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5494227">//&nbsp;will&nbsp;lead&nbsp;to&nbsp;the&nbsp;wrong&nbsp;selection&nbsp;range&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5494280">//&nbsp;the&nbsp;fake&nbsp;declaration&nbsp;if&nbsp;there&nbsp;are&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5494329">//&nbsp;than&nbsp;one&nbsp;type&nbsp;in&nbsp;the&nbsp;group&nbsp;(this&nbsp;affects</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5494380">//&nbsp;src/cmd/godoc/godoc.go&#39;s&nbsp;posLink_urlFunc)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494432">TokPos</span><span class="op" id="5494438">:</span>&nbsp;<span class="ident" id="5494440">s</span><span class="op" id="5494441">.</span><span class="ident" id="5494442">Pos</span><span class="op" id="5494445">(</span><span class="op" id="5494446">)</span><span class="op" id="5494447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494456">Tok</span><span class="op" id="5494459">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494464">token</span><span class="op" id="5494469">.</span><span class="ident" id="5494470">TYPE</span><span class="op" id="5494474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494483">Specs</span><span class="op" id="5494488">:</span>&nbsp;&nbsp;<span class="op" id="5494491">[</span><span class="op" id="5494492">]</span><span class="ident" id="5494493">ast</span><span class="op" id="5494496">.</span><span class="ident" id="5494497">Spec</span><span class="op" id="5494501">{</span><span class="ident" id="5494502">s</span><span class="op" id="5494503">}</span><span class="op" id="5494504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5494512">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494520">r</span><span class="op" id="5494521">.</span><span class="ident" id="5494522">readType</span><span class="op" id="5494530">(</span><span class="ident" id="5494531">fake</span><span class="op" id="5494535">,</span>&nbsp;<span class="ident" id="5494537">s</span><span class="op" id="5494538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5494545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5494551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5494556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5494560">case</span>&nbsp;<span class="op" id="5494565">*</span><span class="ident" id="5494566">ast</span><span class="op" id="5494569">.</span><span class="ident" id="5494570">FuncDecl</span><span class="op" id="5494578">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494583">r</span><span class="op" id="5494584">.</span><span class="ident" id="5494585">readFunc</span><span class="op" id="5494593">(</span><span class="ident" id="5494594">d</span><span class="op" id="5494595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5494599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5494602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5494606">//&nbsp;collect&nbsp;MARKER(...):&nbsp;annotations</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494643">r</span><span class="op" id="5494644">.</span><span class="ident" id="5494645">readNotes</span><span class="op" id="5494654">(</span><span class="ident" id="5494655">src</span><span class="op" id="5494658">.</span><span class="ident" id="5494659">Comments</span><span class="op" id="5494667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494670">src</span><span class="op" id="5494673">.</span><span class="ident" id="5494674">Comments</span>&nbsp;<span class="op" id="5494683">=</span>&nbsp;<span class="builtintype" id="5494685">nil</span>&nbsp;<span class="comment" id="5494689">//&nbsp;consumed&nbsp;unassociated&nbsp;comments&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="5494741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5494744">func</span>&nbsp;<span class="op" id="5494749">(</span><span class="ident" id="5494750">r</span>&nbsp;<span class="op" id="5494752">*</span><span class="ident" id="5494753">reader</span><span class="op" id="5494759">)</span>&nbsp;<span class="ident" id="5494761">readPackage</span><span class="op" id="5494772">(</span><span class="ident" id="5494773">pkg</span>&nbsp;<span class="op" id="5494777">*</span><span class="ident" id="5494778">ast</span><span class="op" id="5494781">.</span><span class="ident" id="5494782">Package</span><span class="op" id="5494789">,</span>&nbsp;<span class="ident" id="5494791">mode</span>&nbsp;<span class="ident" id="5494796">Mode</span><span class="op" id="5494800">)</span>&nbsp;<span class="op" id="5494802">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5494805">//&nbsp;initialize&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494827">r</span><span class="op" id="5494828">.</span><span class="ident" id="5494829">filenames</span>&nbsp;<span class="op" id="5494839">=</span>&nbsp;<span class="builtinfunc" id="5494841">make</span><span class="op" id="5494845">(</span><span class="op" id="5494846">[</span><span class="op" id="5494847">]</span><span class="builtintype" id="5494848">string</span><span class="op" id="5494854">,</span>&nbsp;<span class="builtinfunc" id="5494856">len</span><span class="op" id="5494859">(</span><span class="ident" id="5494860">pkg</span><span class="op" id="5494863">.</span><span class="ident" id="5494864">Files</span><span class="op" id="5494869">)</span><span class="op" id="5494870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494873">r</span><span class="op" id="5494874">.</span><span class="ident" id="5494875">imports</span>&nbsp;<span class="op" id="5494883">=</span>&nbsp;<span class="builtinfunc" id="5494885">make</span><span class="op" id="5494889">(</span><span class="keyword" id="5494890">map</span><span class="op" id="5494893">[</span><span class="builtintype" id="5494894">string</span><span class="op" id="5494900">]</span><span class="builtintype" id="5494901">int</span><span class="op" id="5494904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494907">r</span><span class="op" id="5494908">.</span><span class="ident" id="5494909">mode</span>&nbsp;<span class="op" id="5494914">=</span>&nbsp;<span class="ident" id="5494916">mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494922">r</span><span class="op" id="5494923">.</span><span class="ident" id="5494924">types</span>&nbsp;<span class="op" id="5494930">=</span>&nbsp;<span class="builtinfunc" id="5494932">make</span><span class="op" id="5494936">(</span><span class="keyword" id="5494937">map</span><span class="op" id="5494940">[</span><span class="builtintype" id="5494941">string</span><span class="op" id="5494947">]</span><span class="op" id="5494948">*</span><span class="ident" id="5494949">namedType</span><span class="op" id="5494958">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494961">r</span><span class="op" id="5494962">.</span><span class="ident" id="5494963">funcs</span>&nbsp;<span class="op" id="5494969">=</span>&nbsp;<span class="builtinfunc" id="5494971">make</span><span class="op" id="5494975">(</span><span class="ident" id="5494976">methodSet</span><span class="op" id="5494985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5494988">r</span><span class="op" id="5494989">.</span><span class="ident" id="5494990">notes</span>&nbsp;<span class="op" id="5494996">=</span>&nbsp;<span class="builtinfunc" id="5494998">make</span><span class="op" id="5495002">(</span><span class="keyword" id="5495003">map</span><span class="op" id="5495006">[</span><span class="builtintype" id="5495007">string</span><span class="op" id="5495013">]</span><span class="op" id="5495014">[</span><span class="op" id="5495015">]</span><span class="op" id="5495016">*</span><span class="ident" id="5495017">Note</span><span class="op" id="5495021">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5495025">//&nbsp;sort&nbsp;package&nbsp;files&nbsp;before&nbsp;reading&nbsp;them&nbsp;so&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5495080">//&nbsp;result&nbsp;does&nbsp;not&nbsp;depend&nbsp;on&nbsp;map&nbsp;iteration&nbsp;order</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5495130">i</span>&nbsp;<span class="op" id="5495132">:=</span>&nbsp;<span class="num" id="5495135">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5495138">for</span>&nbsp;<span class="ident" id="5495142">filename</span>&nbsp;<span class="op" id="5495151">:=</span>&nbsp;<span class="keyword" id="5495154">range</span>&nbsp;<span class="ident" id="5495160">pkg</span><span class="op" id="5495163">.</span><span class="ident" id="5495164">Files</span>&nbsp;<span class="op" id="5495170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5495174">r</span><span class="op" id="5495175">.</span><span class="ident" id="5495176">filenames</span><span class="op" id="5495185">[</span><span class="ident" id="5495186">i</span><span class="op" id="5495187">]</span>&nbsp;<span class="op" id="5495189">=</span>&nbsp;<span class="ident" id="5495191">filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5495202">i</span><span class="op" id="5495203">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5495207">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5495210">sort</span><span class="op" id="5495214">.</span><span class="ident" id="5495215">Strings</span><span class="op" id="5495222">(</span><span class="ident" id="5495223">r</span><span class="op" id="5495224">.</span><span class="ident" id="5495225">filenames</span><span class="op" id="5495234">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5495238">//&nbsp;process&nbsp;files&nbsp;in&nbsp;sorted&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5495272">for</span>&nbsp;<span class="ident" id="5495276">_</span><span class="op" id="5495277">,</span>&nbsp;<span class="ident" id="5495279">filename</span>&nbsp;<span class="op" id="5495288">:=</span>&nbsp;<span class="keyword" id="5495291">range</span>&nbsp;<span class="ident" id="5495297">r</span><span class="op" id="5495298">.</span><span class="ident" id="5495299">filenames</span>&nbsp;<span class="op" id="5495309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5495313">f</span>&nbsp;<span class="op" id="5495315">:=</span>&nbsp;<span class="ident" id="5495318">pkg</span><span class="op" id="5495321">.</span><span class="ident" id="5495322">Files</span><span class="op" id="5495327">[</span><span class="ident" id="5495328">filename</span><span class="op" id="5495336">]</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5495340">if</span>&nbsp;<span class="ident" id="5495343">mode</span><span class="op" id="5495347">&amp;</span><span class="ident" id="5495348">AllDecls</span>&nbsp;<span class="op" id="5495357">==</span>&nbsp;<span class="num" id="5495360">0</span>&nbsp;<span class="op" id="5495362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5495367">r</span><span class="op" id="5495368">.</span><span class="ident" id="5495369">fileExports</span><span class="op" id="5495380">(</span><span class="ident" id="5495381">f</span><span class="op" id="5495382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5495386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5495390">r</span><span class="op" id="5495391">.</span><span class="ident" id="5495392">readFile</span><span class="op" id="5495400">(</span><span class="ident" id="5495401">f</span><span class="op" id="5495402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5495405">}</span><br>
<span class="lineno">550</span><span class="op" id="5495407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5495410">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5495490">//&nbsp;Types</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="5495500">func</span>&nbsp;<span class="ident" id="5495505">customizeRecv</span><span class="op" id="5495518">(</span><span class="ident" id="5495519">f</span>&nbsp;<span class="op" id="5495521">*</span><span class="ident" id="5495522">Func</span><span class="op" id="5495526">,</span>&nbsp;<span class="ident" id="5495528">recvTypeName</span>&nbsp;<span class="builtintype" id="5495541">string</span><span class="op" id="5495547">,</span>&nbsp;<span class="ident" id="5495549">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="5495563">bool</span><span class="op" id="5495567">,</span>&nbsp;<span class="ident" id="5495569">level</span>&nbsp;<span class="builtintype" id="5495575">int</span><span class="op" id="5495578">)</span>&nbsp;<span class="op" id="5495580">*</span><span class="ident" id="5495581">Func</span>&nbsp;<span class="op" id="5495586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5495589">if</span>&nbsp;<span class="ident" id="5495592">f</span>&nbsp;<span class="op" id="5495594">==</span>&nbsp;<span class="builtintype" id="5495597">nil</span>&nbsp;<span class="op" id="5495601">||</span>&nbsp;<span class="ident" id="5495604">f</span><span class="op" id="5495605">.</span><span class="ident" id="5495606">Decl</span>&nbsp;<span class="op" id="5495611">==</span>&nbsp;<span class="builtintype" id="5495614">nil</span>&nbsp;<span class="op" id="5495618">||</span>&nbsp;<span class="ident" id="5495621">f</span><span class="op" id="5495622">.</span><span class="ident" id="5495623">Decl</span><span class="op" id="5495627">.</span><span class="ident" id="5495628">Recv</span>&nbsp;<span class="op" id="5495633">==</span>&nbsp;<span class="builtintype" id="5495636">nil</span>&nbsp;<span class="op" id="5495640">||</span>&nbsp;<span class="builtinfunc" id="5495643">len</span><span class="op" id="5495646">(</span><span class="ident" id="5495647">f</span><span class="op" id="5495648">.</span><span class="ident" id="5495649">Decl</span><span class="op" id="5495653">.</span><span class="ident" id="5495654">Recv</span><span class="op" id="5495658">.</span><span class="ident" id="5495659">List</span><span class="op" id="5495663">)</span>&nbsp;<span class="op" id="5495665">!=</span>&nbsp;<span class="num" id="5495668">1</span>&nbsp;<span class="op" id="5495670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5495674">return</span>&nbsp;<span class="ident" id="5495681">f</span>&nbsp;<span class="comment" id="5495683">//&nbsp;shouldn&#39;t&nbsp;happen,&nbsp;but&nbsp;be&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5495717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5495721">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;and&nbsp;set&nbsp;new&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5495771">newField</span>&nbsp;<span class="op" id="5495780">:=</span>&nbsp;<span class="op" id="5495783">*</span><span class="ident" id="5495784">f</span><span class="op" id="5495785">.</span><span class="ident" id="5495786">Decl</span><span class="op" id="5495790">.</span><span class="ident" id="5495791">Recv</span><span class="op" id="5495795">.</span><span class="ident" id="5495796">List</span><span class="op" id="5495800">[</span><span class="num" id="5495801">0</span><span class="op" id="5495802">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5495805">origPos</span>&nbsp;<span class="op" id="5495813">:=</span>&nbsp;<span class="ident" id="5495816">newField</span><span class="op" id="5495824">.</span><span class="ident" id="5495825">Type</span><span class="op" id="5495829">.</span><span class="ident" id="5495830">Pos</span><span class="op" id="5495833">(</span><span class="op" id="5495834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5495837">_</span><span class="op" id="5495838">,</span>&nbsp;<span class="ident" id="5495840">origRecvIsPtr</span>&nbsp;<span class="op" id="5495854">:=</span>&nbsp;<span class="ident" id="5495857">newField</span><span class="op" id="5495865">.</span><span class="ident" id="5495866">Type</span><span class="op" id="5495870">.</span><span class="op" id="5495871">(</span><span class="op" id="5495872">*</span><span class="ident" id="5495873">ast</span><span class="op" id="5495876">.</span><span class="ident" id="5495877">StarExpr</span><span class="op" id="5495885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5495888">newIdent</span>&nbsp;<span class="op" id="5495897">:=</span>&nbsp;<span class="op" id="5495900">&amp;</span><span class="ident" id="5495901">ast</span><span class="op" id="5495904">.</span><span class="ident" id="5495905">Ident</span><span class="op" id="5495910">{</span><span class="ident" id="5495911">NamePos</span><span class="op" id="5495918">:</span>&nbsp;<span class="ident" id="5495920">origPos</span><span class="op" id="5495927">,</span>&nbsp;<span class="ident" id="5495929">Name</span><span class="op" id="5495933">:</span>&nbsp;<span class="ident" id="5495935">recvTypeName</span><span class="op" id="5495947">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5495950">var</span>&nbsp;<span class="ident" id="5495954">typ</span>&nbsp;<span class="ident" id="5495958">ast</span><span class="op" id="5495961">.</span><span class="ident" id="5495962">Expr</span>&nbsp;<span class="op" id="5495967">=</span>&nbsp;<span class="ident" id="5495969">newIdent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5495979">if</span>&nbsp;<span class="op" id="5495982">!</span><span class="ident" id="5495983">embeddedIsPtr</span>&nbsp;<span class="op" id="5495997">&amp;&amp;</span>&nbsp;<span class="ident" id="5496000">origRecvIsPtr</span>&nbsp;<span class="op" id="5496014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5496018">newIdent</span><span class="op" id="5496026">.</span><span class="ident" id="5496027">NamePos</span><span class="op" id="5496034">++</span>&nbsp;<span class="comment" id="5496037">//&nbsp;&#39;*&#39;&nbsp;is&nbsp;one&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5496063">typ</span>&nbsp;<span class="op" id="5496067">=</span>&nbsp;<span class="op" id="5496069">&amp;</span><span class="ident" id="5496070">ast</span><span class="op" id="5496073">.</span><span class="ident" id="5496074">StarExpr</span><span class="op" id="5496082">{</span><span class="ident" id="5496083">Star</span><span class="op" id="5496087">:</span>&nbsp;<span class="ident" id="5496089">origPos</span><span class="op" id="5496096">,</span>&nbsp;<span class="ident" id="5496098">X</span><span class="op" id="5496099">:</span>&nbsp;<span class="ident" id="5496101">newIdent</span><span class="op" id="5496109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5496112">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5496115">newField</span><span class="op" id="5496123">.</span><span class="ident" id="5496124">Type</span>&nbsp;<span class="op" id="5496129">=</span>&nbsp;<span class="ident" id="5496131">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5496137">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;list&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5496202">newFieldList</span>&nbsp;<span class="op" id="5496215">:=</span>&nbsp;<span class="op" id="5496218">*</span><span class="ident" id="5496219">f</span><span class="op" id="5496220">.</span><span class="ident" id="5496221">Decl</span><span class="op" id="5496225">.</span><span class="ident" id="5496226">Recv</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5496232">newFieldList</span><span class="op" id="5496244">.</span><span class="ident" id="5496245">List</span>&nbsp;<span class="op" id="5496250">=</span>&nbsp;<span class="op" id="5496252">[</span><span class="op" id="5496253">]</span><span class="op" id="5496254">*</span><span class="ident" id="5496255">ast</span><span class="op" id="5496258">.</span><span class="ident" id="5496259">Field</span><span class="op" id="5496264">{</span><span class="op" id="5496265">&amp;</span><span class="ident" id="5496266">newField</span><span class="op" id="5496274">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5496278">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;declaration&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5496349">newFuncDecl</span>&nbsp;<span class="op" id="5496361">:=</span>&nbsp;<span class="op" id="5496364">*</span><span class="ident" id="5496365">f</span><span class="op" id="5496366">.</span><span class="ident" id="5496367">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5496373">newFuncDecl</span><span class="op" id="5496384">.</span><span class="ident" id="5496385">Recv</span>&nbsp;<span class="op" id="5496390">=</span>&nbsp;<span class="op" id="5496392">&amp;</span><span class="ident" id="5496393">newFieldList</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5496408">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;documentation&nbsp;and&nbsp;set&nbsp;new&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5496473">newF</span>&nbsp;<span class="op" id="5496478">:=</span>&nbsp;<span class="op" id="5496481">*</span><span class="ident" id="5496482">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5496485">newF</span><span class="op" id="5496489">.</span><span class="ident" id="5496490">Decl</span>&nbsp;<span class="op" id="5496495">=</span>&nbsp;<span class="op" id="5496497">&amp;</span><span class="ident" id="5496498">newFuncDecl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5496511">newF</span><span class="op" id="5496515">.</span><span class="ident" id="5496516">Recv</span>&nbsp;<span class="op" id="5496521">=</span>&nbsp;<span class="ident" id="5496523">recvString</span><span class="op" id="5496533">(</span><span class="ident" id="5496534">typ</span><span class="op" id="5496537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5496540">//&nbsp;the&nbsp;Orig&nbsp;field&nbsp;never&nbsp;changes</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5496573">newF</span><span class="op" id="5496577">.</span><span class="ident" id="5496578">Level</span>&nbsp;<span class="op" id="5496584">=</span>&nbsp;<span class="ident" id="5496586">level</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5496594">return</span>&nbsp;<span class="op" id="5496601">&amp;</span><span class="ident" id="5496602">newF</span><br>
<span class="lineno"></span><span class="op" id="5496607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="5496610">//&nbsp;collectEmbeddedMethods&nbsp;collects&nbsp;the&nbsp;embedded&nbsp;methods&nbsp;of&nbsp;typ&nbsp;in&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="5496682">//</span><br>
<span class="lineno"></span><span class="keyword" id="5496685">func</span>&nbsp;<span class="op" id="5496690">(</span><span class="ident" id="5496691">r</span>&nbsp;<span class="op" id="5496693">*</span><span class="ident" id="5496694">reader</span><span class="op" id="5496700">)</span>&nbsp;<span class="ident" id="5496702">collectEmbeddedMethods</span><span class="op" id="5496724">(</span><span class="ident" id="5496725">mset</span>&nbsp;<span class="ident" id="5496730">methodSet</span><span class="op" id="5496739">,</span>&nbsp;<span class="ident" id="5496741">typ</span>&nbsp;<span class="op" id="5496745">*</span><span class="ident" id="5496746">namedType</span><span class="op" id="5496755">,</span>&nbsp;<span class="ident" id="5496757">recvTypeName</span>&nbsp;<span class="builtintype" id="5496770">string</span><span class="op" id="5496776">,</span>&nbsp;<span class="ident" id="5496778">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="5496792">bool</span><span class="op" id="5496796">,</span>&nbsp;<span class="ident" id="5496798">level</span>&nbsp;<span class="builtintype" id="5496804">int</span><span class="op" id="5496807">,</span>&nbsp;<span class="ident" id="5496809">visited</span>&nbsp;<span class="ident" id="5496817">embeddedSet</span><span class="op" id="5496828">)</span>&nbsp;<span class="op" id="5496830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5496833">visited</span><span class="op" id="5496840">[</span><span class="ident" id="5496841">typ</span><span class="op" id="5496844">]</span>&nbsp;<span class="op" id="5496846">=</span>&nbsp;<span class="builtintype" id="5496848">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5496854">for</span>&nbsp;<span class="ident" id="5496858">embedded</span><span class="op" id="5496866">,</span>&nbsp;<span class="ident" id="5496868">isPtr</span>&nbsp;<span class="op" id="5496874">:=</span>&nbsp;<span class="keyword" id="5496877">range</span>&nbsp;<span class="ident" id="5496883">typ</span><span class="op" id="5496886">.</span><span class="ident" id="5496887">embedded</span>&nbsp;<span class="op" id="5496896">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5496900">//&nbsp;Once&nbsp;an&nbsp;embedded&nbsp;type&nbsp;is&nbsp;embedded&nbsp;as&nbsp;a&nbsp;pointer&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5496957">//&nbsp;all&nbsp;embedded&nbsp;types&nbsp;in&nbsp;those&nbsp;types&nbsp;are&nbsp;treated&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5497013">//&nbsp;pointer&nbsp;types&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;receiver&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5497069">//&nbsp;computation;&nbsp;i.e.,&nbsp;embeddedIsPtr&nbsp;is&nbsp;sticky&nbsp;for&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5497126">//&nbsp;embedding&nbsp;hierarchy.</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5497152">thisEmbeddedIsPtr</span>&nbsp;<span class="op" id="5497170">:=</span>&nbsp;<span class="ident" id="5497173">embeddedIsPtr</span>&nbsp;<span class="op" id="5497187">||</span>&nbsp;<span class="ident" id="5497190">isPtr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5497198">for</span>&nbsp;<span class="ident" id="5497202">_</span><span class="op" id="5497203">,</span>&nbsp;<span class="ident" id="5497205">m</span>&nbsp;<span class="op" id="5497207">:=</span>&nbsp;<span class="keyword" id="5497210">range</span>&nbsp;<span class="ident" id="5497216">embedded</span><span class="op" id="5497224">.</span><span class="ident" id="5497225">methods</span>&nbsp;<span class="op" id="5497233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5497238">//&nbsp;only&nbsp;top-level&nbsp;methods&nbsp;are&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5497280">if</span>&nbsp;<span class="ident" id="5497283">m</span><span class="op" id="5497284">.</span><span class="ident" id="5497285">Level</span>&nbsp;<span class="op" id="5497291">==</span>&nbsp;<span class="num" id="5497294">0</span>&nbsp;<span class="op" id="5497296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5497302">mset</span><span class="op" id="5497306">.</span><span class="ident" id="5497307">add</span><span class="op" id="5497310">(</span><span class="ident" id="5497311">customizeRecv</span><span class="op" id="5497324">(</span><span class="ident" id="5497325">m</span><span class="op" id="5497326">,</span>&nbsp;<span class="ident" id="5497328">recvTypeName</span><span class="op" id="5497340">,</span>&nbsp;<span class="ident" id="5497342">thisEmbeddedIsPtr</span><span class="op" id="5497359">,</span>&nbsp;<span class="ident" id="5497361">level</span><span class="op" id="5497366">)</span><span class="op" id="5497367">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5497372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5497376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5497380">if</span>&nbsp;<span class="op" id="5497383">!</span><span class="ident" id="5497384">visited</span><span class="op" id="5497391">[</span><span class="ident" id="5497392">embedded</span><span class="op" id="5497400">]</span>&nbsp;<span class="op" id="5497402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5497407">r</span><span class="op" id="5497408">.</span><span class="ident" id="5497409">collectEmbeddedMethods</span><span class="op" id="5497431">(</span><span class="ident" id="5497432">mset</span><span class="op" id="5497436">,</span>&nbsp;<span class="ident" id="5497438">embedded</span><span class="op" id="5497446">,</span>&nbsp;<span class="ident" id="5497448">recvTypeName</span><span class="op" id="5497460">,</span>&nbsp;<span class="ident" id="5497462">thisEmbeddedIsPtr</span><span class="op" id="5497479">,</span>&nbsp;<span class="ident" id="5497481">level</span><span class="op" id="5497486">+</span><span class="num" id="5497487">1</span><span class="op" id="5497488">,</span>&nbsp;<span class="ident" id="5497490">visited</span><span class="op" id="5497497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5497501">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5497504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5497507">delete</span><span class="op" id="5497513">(</span><span class="ident" id="5497514">visited</span><span class="op" id="5497521">,</span>&nbsp;<span class="ident" id="5497523">typ</span><span class="op" id="5497526">)</span><br>
<span class="lineno"></span><span class="op" id="5497528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5497531">//&nbsp;computeMethodSets&nbsp;determines&nbsp;the&nbsp;actual&nbsp;method&nbsp;sets&nbsp;for&nbsp;each&nbsp;type&nbsp;encountered.</span><br>
<span class="lineno">615</span><span class="comment" id="5497613">//</span><br>
<span class="lineno"></span><span class="keyword" id="5497616">func</span>&nbsp;<span class="op" id="5497621">(</span><span class="ident" id="5497622">r</span>&nbsp;<span class="op" id="5497624">*</span><span class="ident" id="5497625">reader</span><span class="op" id="5497631">)</span>&nbsp;<span class="ident" id="5497633">computeMethodSets</span><span class="op" id="5497650">(</span><span class="op" id="5497651">)</span>&nbsp;<span class="op" id="5497653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5497656">for</span>&nbsp;<span class="ident" id="5497660">_</span><span class="op" id="5497661">,</span>&nbsp;<span class="ident" id="5497663">t</span>&nbsp;<span class="op" id="5497665">:=</span>&nbsp;<span class="keyword" id="5497668">range</span>&nbsp;<span class="ident" id="5497674">r</span><span class="op" id="5497675">.</span><span class="ident" id="5497676">types</span>&nbsp;<span class="op" id="5497682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5497686">//&nbsp;collect&nbsp;embedded&nbsp;methods&nbsp;for&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5497722">if</span>&nbsp;<span class="ident" id="5497725">t</span><span class="op" id="5497726">.</span><span class="ident" id="5497727">isStruct</span>&nbsp;<span class="op" id="5497736">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5497741">//&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5497754">r</span><span class="op" id="5497755">.</span><span class="ident" id="5497756">collectEmbeddedMethods</span><span class="op" id="5497778">(</span><span class="ident" id="5497779">t</span><span class="op" id="5497780">.</span><span class="ident" id="5497781">methods</span><span class="op" id="5497788">,</span>&nbsp;<span class="ident" id="5497790">t</span><span class="op" id="5497791">,</span>&nbsp;<span class="ident" id="5497793">t</span><span class="op" id="5497794">.</span><span class="ident" id="5497795">name</span><span class="op" id="5497799">,</span>&nbsp;<span class="builtintype" id="5497801">false</span><span class="op" id="5497806">,</span>&nbsp;<span class="num" id="5497808">1</span><span class="op" id="5497809">,</span>&nbsp;<span class="builtinfunc" id="5497811">make</span><span class="op" id="5497815">(</span><span class="ident" id="5497816">embeddedSet</span><span class="op" id="5497827">)</span><span class="op" id="5497828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5497832">}</span>&nbsp;<span class="keyword" id="5497834">else</span>&nbsp;<span class="op" id="5497839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5497844">//&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5497860">//&nbsp;TODO(gri)&nbsp;fix&nbsp;this</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5497884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5497887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5497891">//&nbsp;if&nbsp;error&nbsp;was&nbsp;declared&nbsp;locally,&nbsp;don&#39;t&nbsp;treat&nbsp;it&nbsp;as&nbsp;exported&nbsp;field&nbsp;anymore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5497967">if</span>&nbsp;<span class="ident" id="5497970">r</span><span class="op" id="5497971">.</span><span class="ident" id="5497972">errorDecl</span>&nbsp;<span class="op" id="5497982">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5497986">for</span>&nbsp;<span class="ident" id="5497990">_</span><span class="op" id="5497991">,</span>&nbsp;<span class="ident" id="5497993">ityp</span>&nbsp;<span class="op" id="5497998">:=</span>&nbsp;<span class="keyword" id="5498001">range</span>&nbsp;<span class="ident" id="5498007">r</span><span class="op" id="5498008">.</span><span class="ident" id="5498009">fixlist</span>&nbsp;<span class="op" id="5498017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5498022">removeErrorField</span><span class="op" id="5498038">(</span><span class="ident" id="5498039">ityp</span><span class="op" id="5498043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5498047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5498050">}</span><br>
<span class="lineno"></span><span class="op" id="5498052">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="5498055">//&nbsp;cleanupTypes&nbsp;removes&nbsp;the&nbsp;association&nbsp;of&nbsp;functions&nbsp;and&nbsp;methods&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5498125">//&nbsp;types&nbsp;that&nbsp;have&nbsp;no&nbsp;declaration.&nbsp;Instead,&nbsp;these&nbsp;functions&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span><span class="comment" id="5498197">//&nbsp;are&nbsp;shown&nbsp;at&nbsp;the&nbsp;package&nbsp;level.&nbsp;It&nbsp;also&nbsp;removes&nbsp;types&nbsp;with&nbsp;missing</span><br>
<span class="lineno"></span><span class="comment" id="5498267">//&nbsp;declarations&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible.</span><br>
<span class="lineno">640</span><span class="comment" id="5498309">//</span><br>
<span class="lineno"></span><span class="keyword" id="5498312">func</span>&nbsp;<span class="op" id="5498317">(</span><span class="ident" id="5498318">r</span>&nbsp;<span class="op" id="5498320">*</span><span class="ident" id="5498321">reader</span><span class="op" id="5498327">)</span>&nbsp;<span class="ident" id="5498329">cleanupTypes</span><span class="op" id="5498341">(</span><span class="op" id="5498342">)</span>&nbsp;<span class="op" id="5498344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5498347">for</span>&nbsp;<span class="ident" id="5498351">_</span><span class="op" id="5498352">,</span>&nbsp;<span class="ident" id="5498354">t</span>&nbsp;<span class="op" id="5498356">:=</span>&nbsp;<span class="keyword" id="5498359">range</span>&nbsp;<span class="ident" id="5498365">r</span><span class="op" id="5498366">.</span><span class="ident" id="5498367">types</span>&nbsp;<span class="op" id="5498373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5498377">visible</span>&nbsp;<span class="op" id="5498385">:=</span>&nbsp;<span class="ident" id="5498388">r</span><span class="op" id="5498389">.</span><span class="ident" id="5498390">isVisible</span><span class="op" id="5498399">(</span><span class="ident" id="5498400">t</span><span class="op" id="5498401">.</span><span class="ident" id="5498402">name</span><span class="op" id="5498406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5498410">if</span>&nbsp;<span class="ident" id="5498413">t</span><span class="op" id="5498414">.</span><span class="ident" id="5498415">decl</span>&nbsp;<span class="op" id="5498420">==</span>&nbsp;<span class="builtintype" id="5498423">nil</span>&nbsp;<span class="op" id="5498427">&amp;&amp;</span>&nbsp;<span class="op" id="5498430">(</span><span class="ident" id="5498431">predeclaredTypes</span><span class="op" id="5498447">[</span><span class="ident" id="5498448">t</span><span class="op" id="5498449">.</span><span class="ident" id="5498450">name</span><span class="op" id="5498454">]</span>&nbsp;<span class="op" id="5498456">||</span>&nbsp;<span class="ident" id="5498459">t</span><span class="op" id="5498460">.</span><span class="ident" id="5498461">isEmbedded</span>&nbsp;<span class="op" id="5498472">&amp;&amp;</span>&nbsp;<span class="ident" id="5498475">visible</span><span class="op" id="5498482">)</span>&nbsp;<span class="op" id="5498484">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5498489">//&nbsp;t.name&nbsp;is&nbsp;a&nbsp;predeclared&nbsp;type&nbsp;(and&nbsp;was&nbsp;not&nbsp;redeclared&nbsp;in&nbsp;this&nbsp;package),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5498566">//&nbsp;or&nbsp;it&nbsp;was&nbsp;embedded&nbsp;somewhere&nbsp;but&nbsp;its&nbsp;declaration&nbsp;is&nbsp;missing&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5498641">//&nbsp;the&nbsp;AST&nbsp;is&nbsp;incomplete):&nbsp;move&nbsp;any&nbsp;associated&nbsp;values,&nbsp;funcs,&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5498718">//&nbsp;back&nbsp;to&nbsp;the&nbsp;top-level&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;lost.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5498773">//&nbsp;1)&nbsp;move&nbsp;values</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5498794">r</span><span class="op" id="5498795">.</span><span class="ident" id="5498796">values</span>&nbsp;<span class="op" id="5498803">=</span>&nbsp;<span class="builtinfunc" id="5498805">append</span><span class="op" id="5498811">(</span><span class="ident" id="5498812">r</span><span class="op" id="5498813">.</span><span class="ident" id="5498814">values</span><span class="op" id="5498820">,</span>&nbsp;<span class="ident" id="5498822">t</span><span class="op" id="5498823">.</span><span class="ident" id="5498824">values</span><span class="op" id="5498830">...</span><span class="op" id="5498833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5498838">//&nbsp;2)&nbsp;move&nbsp;factory&nbsp;functions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5498870">for</span>&nbsp;<span class="ident" id="5498874">name</span><span class="op" id="5498878">,</span>&nbsp;<span class="ident" id="5498880">f</span>&nbsp;<span class="op" id="5498882">:=</span>&nbsp;<span class="keyword" id="5498885">range</span>&nbsp;<span class="ident" id="5498891">t</span><span class="op" id="5498892">.</span><span class="ident" id="5498893">funcs</span>&nbsp;<span class="op" id="5498899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5498905">//&nbsp;in&nbsp;a&nbsp;correct&nbsp;AST,&nbsp;package-level&nbsp;function&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5498959">//&nbsp;are&nbsp;all&nbsp;different&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;check&nbsp;for&nbsp;conflicts</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5499017">r</span><span class="op" id="5499018">.</span><span class="ident" id="5499019">funcs</span><span class="op" id="5499024">[</span><span class="ident" id="5499025">name</span><span class="op" id="5499029">]</span>&nbsp;<span class="op" id="5499031">=</span>&nbsp;<span class="ident" id="5499033">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5499038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5499043">//&nbsp;3)&nbsp;move&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5499065">for</span>&nbsp;<span class="ident" id="5499069">name</span><span class="op" id="5499073">,</span>&nbsp;<span class="ident" id="5499075">m</span>&nbsp;<span class="op" id="5499077">:=</span>&nbsp;<span class="keyword" id="5499080">range</span>&nbsp;<span class="ident" id="5499086">t</span><span class="op" id="5499087">.</span><span class="ident" id="5499088">methods</span>&nbsp;<span class="op" id="5499096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5499102">//&nbsp;don&#39;t&nbsp;overwrite&nbsp;functions&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;-&nbsp;drop&nbsp;them</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5499166">if</span>&nbsp;<span class="ident" id="5499169">_</span><span class="op" id="5499170">,</span>&nbsp;<span class="ident" id="5499172">found</span>&nbsp;<span class="op" id="5499178">:=</span>&nbsp;<span class="ident" id="5499181">r</span><span class="op" id="5499182">.</span><span class="ident" id="5499183">funcs</span><span class="op" id="5499188">[</span><span class="ident" id="5499189">name</span><span class="op" id="5499193">]</span><span class="op" id="5499194">;</span>&nbsp;<span class="op" id="5499196">!</span><span class="ident" id="5499197">found</span>&nbsp;<span class="op" id="5499203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5499210">r</span><span class="op" id="5499211">.</span><span class="ident" id="5499212">funcs</span><span class="op" id="5499217">[</span><span class="ident" id="5499218">name</span><span class="op" id="5499222">]</span>&nbsp;<span class="op" id="5499224">=</span>&nbsp;<span class="ident" id="5499226">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5499232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5499237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5499241">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5499245">//&nbsp;remove&nbsp;types&nbsp;w/o&nbsp;declaration&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5499304">if</span>&nbsp;<span class="ident" id="5499307">t</span><span class="op" id="5499308">.</span><span class="ident" id="5499309">decl</span>&nbsp;<span class="op" id="5499314">==</span>&nbsp;<span class="builtintype" id="5499317">nil</span>&nbsp;<span class="op" id="5499321">||</span>&nbsp;<span class="op" id="5499324">!</span><span class="ident" id="5499325">visible</span>&nbsp;<span class="op" id="5499333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5499338">delete</span><span class="op" id="5499344">(</span><span class="ident" id="5499345">r</span><span class="op" id="5499346">.</span><span class="ident" id="5499347">types</span><span class="op" id="5499352">,</span>&nbsp;<span class="ident" id="5499354">t</span><span class="op" id="5499355">.</span><span class="ident" id="5499356">name</span><span class="op" id="5499360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5499364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5499367">}</span><br>
<span class="lineno">670</span><span class="op" id="5499369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5499372">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5499452">//&nbsp;Sorting</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="5499464">type</span>&nbsp;<span class="ident" id="5499469">data</span>&nbsp;<span class="keyword" id="5499474">struct</span>&nbsp;<span class="op" id="5499481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5499484">n</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5499489">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5499494">swap</span>&nbsp;<span class="keyword" id="5499499">func</span><span class="op" id="5499503">(</span><span class="ident" id="5499504">i</span><span class="op" id="5499505">,</span>&nbsp;<span class="ident" id="5499507">j</span>&nbsp;<span class="builtintype" id="5499509">int</span><span class="op" id="5499512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5499515">less</span>&nbsp;<span class="keyword" id="5499520">func</span><span class="op" id="5499524">(</span><span class="ident" id="5499525">i</span><span class="op" id="5499526">,</span>&nbsp;<span class="ident" id="5499528">j</span>&nbsp;<span class="builtintype" id="5499530">int</span><span class="op" id="5499533">)</span>&nbsp;<span class="builtintype" id="5499535">bool</span><br>
<span class="lineno"></span><span class="op" id="5499540">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="5499543">func</span>&nbsp;<span class="op" id="5499548">(</span><span class="ident" id="5499549">d</span>&nbsp;<span class="op" id="5499551">*</span><span class="ident" id="5499552">data</span><span class="op" id="5499556">)</span>&nbsp;<span class="ident" id="5499558">Len</span><span class="op" id="5499561">(</span><span class="op" id="5499562">)</span>&nbsp;<span class="builtintype" id="5499564">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5499578">{</span>&nbsp;<span class="keyword" id="5499580">return</span>&nbsp;<span class="ident" id="5499587">d</span><span class="op" id="5499588">.</span><span class="ident" id="5499589">n</span>&nbsp;<span class="op" id="5499591">}</span><br>
<span class="lineno"></span><span class="keyword" id="5499593">func</span>&nbsp;<span class="op" id="5499598">(</span><span class="ident" id="5499599">d</span>&nbsp;<span class="op" id="5499601">*</span><span class="ident" id="5499602">data</span><span class="op" id="5499606">)</span>&nbsp;<span class="ident" id="5499608">Swap</span><span class="op" id="5499612">(</span><span class="ident" id="5499613">i</span><span class="op" id="5499614">,</span>&nbsp;<span class="ident" id="5499616">j</span>&nbsp;<span class="builtintype" id="5499618">int</span><span class="op" id="5499621">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5499628">{</span>&nbsp;<span class="ident" id="5499630">d</span><span class="op" id="5499631">.</span><span class="ident" id="5499632">swap</span><span class="op" id="5499636">(</span><span class="ident" id="5499637">i</span><span class="op" id="5499638">,</span>&nbsp;<span class="ident" id="5499640">j</span><span class="op" id="5499641">)</span>&nbsp;<span class="op" id="5499643">}</span><br>
<span class="lineno"></span><span class="keyword" id="5499645">func</span>&nbsp;<span class="op" id="5499650">(</span><span class="ident" id="5499651">d</span>&nbsp;<span class="op" id="5499653">*</span><span class="ident" id="5499654">data</span><span class="op" id="5499658">)</span>&nbsp;<span class="ident" id="5499660">Less</span><span class="op" id="5499664">(</span><span class="ident" id="5499665">i</span><span class="op" id="5499666">,</span>&nbsp;<span class="ident" id="5499668">j</span>&nbsp;<span class="builtintype" id="5499670">int</span><span class="op" id="5499673">)</span>&nbsp;<span class="builtintype" id="5499675">bool</span>&nbsp;<span class="op" id="5499680">{</span>&nbsp;<span class="keyword" id="5499682">return</span>&nbsp;<span class="ident" id="5499689">d</span><span class="op" id="5499690">.</span><span class="ident" id="5499691">less</span><span class="op" id="5499695">(</span><span class="ident" id="5499696">i</span><span class="op" id="5499697">,</span>&nbsp;<span class="ident" id="5499699">j</span><span class="op" id="5499700">)</span>&nbsp;<span class="op" id="5499702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">685</span><span class="comment" id="5499705">//&nbsp;sortBy&nbsp;is&nbsp;a&nbsp;helper&nbsp;function&nbsp;for&nbsp;sorting</span><br>
<span class="lineno"></span><span class="keyword" id="5499748">func</span>&nbsp;<span class="ident" id="5499753">sortBy</span><span class="op" id="5499759">(</span><span class="ident" id="5499760">less</span>&nbsp;<span class="keyword" id="5499765">func</span><span class="op" id="5499769">(</span><span class="ident" id="5499770">i</span><span class="op" id="5499771">,</span>&nbsp;<span class="ident" id="5499773">j</span>&nbsp;<span class="builtintype" id="5499775">int</span><span class="op" id="5499778">)</span>&nbsp;<span class="builtintype" id="5499780">bool</span><span class="op" id="5499784">,</span>&nbsp;<span class="ident" id="5499786">swap</span>&nbsp;<span class="keyword" id="5499791">func</span><span class="op" id="5499795">(</span><span class="ident" id="5499796">i</span><span class="op" id="5499797">,</span>&nbsp;<span class="ident" id="5499799">j</span>&nbsp;<span class="builtintype" id="5499801">int</span><span class="op" id="5499804">)</span><span class="op" id="5499805">,</span>&nbsp;<span class="ident" id="5499807">n</span>&nbsp;<span class="builtintype" id="5499809">int</span><span class="op" id="5499812">)</span>&nbsp;<span class="op" id="5499814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5499817">sort</span><span class="op" id="5499821">.</span><span class="ident" id="5499822">Sort</span><span class="op" id="5499826">(</span><span class="op" id="5499827">&amp;</span><span class="ident" id="5499828">data</span><span class="op" id="5499832">{</span><span class="ident" id="5499833">n</span><span class="op" id="5499834">,</span>&nbsp;<span class="ident" id="5499836">swap</span><span class="op" id="5499840">,</span>&nbsp;<span class="ident" id="5499842">less</span><span class="op" id="5499846">}</span><span class="op" id="5499847">)</span><br>
<span class="lineno"></span><span class="op" id="5499849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">690</span><span class="keyword" id="5499852">func</span>&nbsp;<span class="ident" id="5499857">sortedKeys</span><span class="op" id="5499867">(</span><span class="ident" id="5499868">m</span>&nbsp;<span class="keyword" id="5499870">map</span><span class="op" id="5499873">[</span><span class="builtintype" id="5499874">string</span><span class="op" id="5499880">]</span><span class="builtintype" id="5499881">int</span><span class="op" id="5499884">)</span>&nbsp;<span class="op" id="5499886">[</span><span class="op" id="5499887">]</span><span class="builtintype" id="5499888">string</span>&nbsp;<span class="op" id="5499895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5499898">list</span>&nbsp;<span class="op" id="5499903">:=</span>&nbsp;<span class="builtinfunc" id="5499906">make</span><span class="op" id="5499910">(</span><span class="op" id="5499911">[</span><span class="op" id="5499912">]</span><span class="builtintype" id="5499913">string</span><span class="op" id="5499919">,</span>&nbsp;<span class="builtinfunc" id="5499921">len</span><span class="op" id="5499924">(</span><span class="ident" id="5499925">m</span><span class="op" id="5499926">)</span><span class="op" id="5499927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5499930">i</span>&nbsp;<span class="op" id="5499932">:=</span>&nbsp;<span class="num" id="5499935">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5499938">for</span>&nbsp;<span class="ident" id="5499942">key</span>&nbsp;<span class="op" id="5499946">:=</span>&nbsp;<span class="keyword" id="5499949">range</span>&nbsp;<span class="ident" id="5499955">m</span>&nbsp;<span class="op" id="5499957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5499961">list</span><span class="op" id="5499965">[</span><span class="ident" id="5499966">i</span><span class="op" id="5499967">]</span>&nbsp;<span class="op" id="5499969">=</span>&nbsp;<span class="ident" id="5499971">key</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5499977">i</span><span class="op" id="5499978">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5499982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5499985">sort</span><span class="op" id="5499989">.</span><span class="ident" id="5499990">Strings</span><span class="op" id="5499997">(</span><span class="ident" id="5499998">list</span><span class="op" id="5500002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500005">return</span>&nbsp;<span class="ident" id="5500012">list</span><br>
<span class="lineno"></span><span class="op" id="5500017">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="comment" id="5500020">//&nbsp;sortingName&nbsp;returns&nbsp;the&nbsp;name&nbsp;to&nbsp;use&nbsp;when&nbsp;sorting&nbsp;d&nbsp;into&nbsp;place.</span><br>
<span class="lineno"></span><span class="comment" id="5500086">//</span><br>
<span class="lineno"></span><span class="keyword" id="5500089">func</span>&nbsp;<span class="ident" id="5500094">sortingName</span><span class="op" id="5500105">(</span><span class="ident" id="5500106">d</span>&nbsp;<span class="op" id="5500108">*</span><span class="ident" id="5500109">ast</span><span class="op" id="5500112">.</span><span class="ident" id="5500113">GenDecl</span><span class="op" id="5500120">)</span>&nbsp;<span class="builtintype" id="5500122">string</span>&nbsp;<span class="op" id="5500129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500132">if</span>&nbsp;<span class="builtinfunc" id="5500135">len</span><span class="op" id="5500138">(</span><span class="ident" id="5500139">d</span><span class="op" id="5500140">.</span><span class="ident" id="5500141">Specs</span><span class="op" id="5500146">)</span>&nbsp;<span class="op" id="5500148">==</span>&nbsp;<span class="num" id="5500151">1</span>&nbsp;<span class="op" id="5500153">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500157">if</span>&nbsp;<span class="ident" id="5500160">s</span><span class="op" id="5500161">,</span>&nbsp;<span class="ident" id="5500163">ok</span>&nbsp;<span class="op" id="5500166">:=</span>&nbsp;<span class="ident" id="5500169">d</span><span class="op" id="5500170">.</span><span class="ident" id="5500171">Specs</span><span class="op" id="5500176">[</span><span class="num" id="5500177">0</span><span class="op" id="5500178">]</span><span class="op" id="5500179">.</span><span class="op" id="5500180">(</span><span class="op" id="5500181">*</span><span class="ident" id="5500182">ast</span><span class="op" id="5500185">.</span><span class="ident" id="5500186">ValueSpec</span><span class="op" id="5500195">)</span><span class="op" id="5500196">;</span>&nbsp;<span class="ident" id="5500198">ok</span>&nbsp;<span class="op" id="5500201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500206">return</span>&nbsp;<span class="ident" id="5500213">s</span><span class="op" id="5500214">.</span><span class="ident" id="5500215">Names</span><span class="op" id="5500220">[</span><span class="num" id="5500221">0</span><span class="op" id="5500222">]</span><span class="op" id="5500223">.</span><span class="ident" id="5500224">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5500231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5500234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500237">return</span>&nbsp;<span class="string" id="5500244">&#34;&#34;</span><br>
<span class="lineno">710</span><span class="op" id="5500247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5500250">func</span>&nbsp;<span class="ident" id="5500255">sortedValues</span><span class="op" id="5500267">(</span><span class="ident" id="5500268">m</span>&nbsp;<span class="op" id="5500270">[</span><span class="op" id="5500271">]</span><span class="op" id="5500272">*</span><span class="ident" id="5500273">Value</span><span class="op" id="5500278">,</span>&nbsp;<span class="ident" id="5500280">tok</span>&nbsp;<span class="ident" id="5500284">token</span><span class="op" id="5500289">.</span><span class="ident" id="5500290">Token</span><span class="op" id="5500295">)</span>&nbsp;<span class="op" id="5500297">[</span><span class="op" id="5500298">]</span><span class="op" id="5500299">*</span><span class="ident" id="5500300">Value</span>&nbsp;<span class="op" id="5500306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500309">list</span>&nbsp;<span class="op" id="5500314">:=</span>&nbsp;<span class="builtinfunc" id="5500317">make</span><span class="op" id="5500321">(</span><span class="op" id="5500322">[</span><span class="op" id="5500323">]</span><span class="op" id="5500324">*</span><span class="ident" id="5500325">Value</span><span class="op" id="5500330">,</span>&nbsp;<span class="builtinfunc" id="5500332">len</span><span class="op" id="5500335">(</span><span class="ident" id="5500336">m</span><span class="op" id="5500337">)</span><span class="op" id="5500338">)</span>&nbsp;<span class="comment" id="5500340">//&nbsp;big&nbsp;enough&nbsp;in&nbsp;any&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500367">i</span>&nbsp;<span class="op" id="5500369">:=</span>&nbsp;<span class="num" id="5500372">0</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500375">for</span>&nbsp;<span class="ident" id="5500379">_</span><span class="op" id="5500380">,</span>&nbsp;<span class="ident" id="5500382">val</span>&nbsp;<span class="op" id="5500386">:=</span>&nbsp;<span class="keyword" id="5500389">range</span>&nbsp;<span class="ident" id="5500395">m</span>&nbsp;<span class="op" id="5500397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500401">if</span>&nbsp;<span class="ident" id="5500404">val</span><span class="op" id="5500407">.</span><span class="ident" id="5500408">Decl</span><span class="op" id="5500412">.</span><span class="ident" id="5500413">Tok</span>&nbsp;<span class="op" id="5500417">==</span>&nbsp;<span class="ident" id="5500420">tok</span>&nbsp;<span class="op" id="5500424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500429">list</span><span class="op" id="5500433">[</span><span class="ident" id="5500434">i</span><span class="op" id="5500435">]</span>&nbsp;<span class="op" id="5500437">=</span>&nbsp;<span class="ident" id="5500439">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500446">i</span><span class="op" id="5500447">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5500452">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5500455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500458">list</span>&nbsp;<span class="op" id="5500463">=</span>&nbsp;<span class="ident" id="5500465">list</span><span class="op" id="5500469">[</span><span class="num" id="5500470">0</span><span class="op" id="5500471">:</span><span class="ident" id="5500472">i</span><span class="op" id="5500473">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500477">sortBy</span><span class="op" id="5500483">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500487">func</span><span class="op" id="5500491">(</span><span class="ident" id="5500492">i</span><span class="op" id="5500493">,</span>&nbsp;<span class="ident" id="5500495">j</span>&nbsp;<span class="builtintype" id="5500497">int</span><span class="op" id="5500500">)</span>&nbsp;<span class="builtintype" id="5500502">bool</span>&nbsp;<span class="op" id="5500507">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500512">if</span>&nbsp;<span class="ident" id="5500515">ni</span><span class="op" id="5500517">,</span>&nbsp;<span class="ident" id="5500519">nj</span>&nbsp;<span class="op" id="5500522">:=</span>&nbsp;<span class="ident" id="5500525">sortingName</span><span class="op" id="5500536">(</span><span class="ident" id="5500537">list</span><span class="op" id="5500541">[</span><span class="ident" id="5500542">i</span><span class="op" id="5500543">]</span><span class="op" id="5500544">.</span><span class="ident" id="5500545">Decl</span><span class="op" id="5500549">)</span><span class="op" id="5500550">,</span>&nbsp;<span class="ident" id="5500552">sortingName</span><span class="op" id="5500563">(</span><span class="ident" id="5500564">list</span><span class="op" id="5500568">[</span><span class="ident" id="5500569">j</span><span class="op" id="5500570">]</span><span class="op" id="5500571">.</span><span class="ident" id="5500572">Decl</span><span class="op" id="5500576">)</span><span class="op" id="5500577">;</span>&nbsp;<span class="ident" id="5500579">ni</span>&nbsp;<span class="op" id="5500582">!=</span>&nbsp;<span class="ident" id="5500585">nj</span>&nbsp;<span class="op" id="5500588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500594">return</span>&nbsp;<span class="ident" id="5500601">ni</span>&nbsp;<span class="op" id="5500604">&lt;</span>&nbsp;<span class="ident" id="5500606">nj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5500612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500617">return</span>&nbsp;<span class="ident" id="5500624">list</span><span class="op" id="5500628">[</span><span class="ident" id="5500629">i</span><span class="op" id="5500630">]</span><span class="op" id="5500631">.</span><span class="ident" id="5500632">order</span>&nbsp;<span class="op" id="5500638">&lt;</span>&nbsp;<span class="ident" id="5500640">list</span><span class="op" id="5500644">[</span><span class="ident" id="5500645">j</span><span class="op" id="5500646">]</span><span class="op" id="5500647">.</span><span class="ident" id="5500648">order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5500656">}</span><span class="op" id="5500657">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500661">func</span><span class="op" id="5500665">(</span><span class="ident" id="5500666">i</span><span class="op" id="5500667">,</span>&nbsp;<span class="ident" id="5500669">j</span>&nbsp;<span class="builtintype" id="5500671">int</span><span class="op" id="5500674">)</span>&nbsp;<span class="op" id="5500676">{</span>&nbsp;<span class="ident" id="5500678">list</span><span class="op" id="5500682">[</span><span class="ident" id="5500683">i</span><span class="op" id="5500684">]</span><span class="op" id="5500685">,</span>&nbsp;<span class="ident" id="5500687">list</span><span class="op" id="5500691">[</span><span class="ident" id="5500692">j</span><span class="op" id="5500693">]</span>&nbsp;<span class="op" id="5500695">=</span>&nbsp;<span class="ident" id="5500697">list</span><span class="op" id="5500701">[</span><span class="ident" id="5500702">j</span><span class="op" id="5500703">]</span><span class="op" id="5500704">,</span>&nbsp;<span class="ident" id="5500706">list</span><span class="op" id="5500710">[</span><span class="ident" id="5500711">i</span><span class="op" id="5500712">]</span>&nbsp;<span class="op" id="5500714">}</span><span class="op" id="5500715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5500719">len</span><span class="op" id="5500722">(</span><span class="ident" id="5500723">list</span><span class="op" id="5500727">)</span><span class="op" id="5500728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5500731">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500735">return</span>&nbsp;<span class="ident" id="5500742">list</span><br>
<span class="lineno">735</span><span class="op" id="5500747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5500750">func</span>&nbsp;<span class="ident" id="5500755">sortedTypes</span><span class="op" id="5500766">(</span><span class="ident" id="5500767">m</span>&nbsp;<span class="keyword" id="5500769">map</span><span class="op" id="5500772">[</span><span class="builtintype" id="5500773">string</span><span class="op" id="5500779">]</span><span class="op" id="5500780">*</span><span class="ident" id="5500781">namedType</span><span class="op" id="5500790">,</span>&nbsp;<span class="ident" id="5500792">allMethods</span>&nbsp;<span class="builtintype" id="5500803">bool</span><span class="op" id="5500807">)</span>&nbsp;<span class="op" id="5500809">[</span><span class="op" id="5500810">]</span><span class="op" id="5500811">*</span><span class="ident" id="5500812">Type</span>&nbsp;<span class="op" id="5500817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500820">list</span>&nbsp;<span class="op" id="5500825">:=</span>&nbsp;<span class="builtinfunc" id="5500828">make</span><span class="op" id="5500832">(</span><span class="op" id="5500833">[</span><span class="op" id="5500834">]</span><span class="op" id="5500835">*</span><span class="ident" id="5500836">Type</span><span class="op" id="5500840">,</span>&nbsp;<span class="builtinfunc" id="5500842">len</span><span class="op" id="5500845">(</span><span class="ident" id="5500846">m</span><span class="op" id="5500847">)</span><span class="op" id="5500848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500851">i</span>&nbsp;<span class="op" id="5500853">:=</span>&nbsp;<span class="num" id="5500856">0</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5500859">for</span>&nbsp;<span class="ident" id="5500863">_</span><span class="op" id="5500864">,</span>&nbsp;<span class="ident" id="5500866">t</span>&nbsp;<span class="op" id="5500868">:=</span>&nbsp;<span class="keyword" id="5500871">range</span>&nbsp;<span class="ident" id="5500877">m</span>&nbsp;<span class="op" id="5500879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500883">list</span><span class="op" id="5500887">[</span><span class="ident" id="5500888">i</span><span class="op" id="5500889">]</span>&nbsp;<span class="op" id="5500891">=</span>&nbsp;<span class="op" id="5500893">&amp;</span><span class="ident" id="5500894">Type</span><span class="op" id="5500898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500903">Doc</span><span class="op" id="5500906">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500912">t</span><span class="op" id="5500913">.</span><span class="ident" id="5500914">doc</span><span class="op" id="5500917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500922">Name</span><span class="op" id="5500926">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500931">t</span><span class="op" id="5500932">.</span><span class="ident" id="5500933">name</span><span class="op" id="5500937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500942">Decl</span><span class="op" id="5500946">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500951">t</span><span class="op" id="5500952">.</span><span class="ident" id="5500953">decl</span><span class="op" id="5500957">,</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5500962">Consts</span><span class="op" id="5500968">:</span>&nbsp;&nbsp;<span class="ident" id="5500971">sortedValues</span><span class="op" id="5500983">(</span><span class="ident" id="5500984">t</span><span class="op" id="5500985">.</span><span class="ident" id="5500986">values</span><span class="op" id="5500992">,</span>&nbsp;<span class="ident" id="5500994">token</span><span class="op" id="5500999">.</span><span class="ident" id="5501000">CONST</span><span class="op" id="5501005">)</span><span class="op" id="5501006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5501011">Vars</span><span class="op" id="5501015">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5501020">sortedValues</span><span class="op" id="5501032">(</span><span class="ident" id="5501033">t</span><span class="op" id="5501034">.</span><span class="ident" id="5501035">values</span><span class="op" id="5501041">,</span>&nbsp;<span class="ident" id="5501043">token</span><span class="op" id="5501048">.</span><span class="ident" id="5501049">VAR</span><span class="op" id="5501052">)</span><span class="op" id="5501053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5501058">Funcs</span><span class="op" id="5501063">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5501067">sortedFuncs</span><span class="op" id="5501078">(</span><span class="ident" id="5501079">t</span><span class="op" id="5501080">.</span><span class="ident" id="5501081">funcs</span><span class="op" id="5501086">,</span>&nbsp;<span class="builtintype" id="5501088">true</span><span class="op" id="5501092">)</span><span class="op" id="5501093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5501098">Methods</span><span class="op" id="5501105">:</span>&nbsp;<span class="ident" id="5501107">sortedFuncs</span><span class="op" id="5501118">(</span><span class="ident" id="5501119">t</span><span class="op" id="5501120">.</span><span class="ident" id="5501121">methods</span><span class="op" id="5501128">,</span>&nbsp;<span class="ident" id="5501130">allMethods</span><span class="op" id="5501140">)</span><span class="op" id="5501141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5501145">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5501149">i</span><span class="op" id="5501150">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5501154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5501158">sortBy</span><span class="op" id="5501164">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5501168">func</span><span class="op" id="5501172">(</span><span class="ident" id="5501173">i</span><span class="op" id="5501174">,</span>&nbsp;<span class="ident" id="5501176">j</span>&nbsp;<span class="builtintype" id="5501178">int</span><span class="op" id="5501181">)</span>&nbsp;<span class="builtintype" id="5501183">bool</span>&nbsp;<span class="op" id="5501188">{</span>&nbsp;<span class="keyword" id="5501190">return</span>&nbsp;<span class="ident" id="5501197">list</span><span class="op" id="5501201">[</span><span class="ident" id="5501202">i</span><span class="op" id="5501203">]</span><span class="op" id="5501204">.</span><span class="ident" id="5501205">Name</span>&nbsp;<span class="op" id="5501210">&lt;</span>&nbsp;<span class="ident" id="5501212">list</span><span class="op" id="5501216">[</span><span class="ident" id="5501217">j</span><span class="op" id="5501218">]</span><span class="op" id="5501219">.</span><span class="ident" id="5501220">Name</span>&nbsp;<span class="op" id="5501225">}</span><span class="op" id="5501226">,</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5501230">func</span><span class="op" id="5501234">(</span><span class="ident" id="5501235">i</span><span class="op" id="5501236">,</span>&nbsp;<span class="ident" id="5501238">j</span>&nbsp;<span class="builtintype" id="5501240">int</span><span class="op" id="5501243">)</span>&nbsp;<span class="op" id="5501245">{</span>&nbsp;<span class="ident" id="5501247">list</span><span class="op" id="5501251">[</span><span class="ident" id="5501252">i</span><span class="op" id="5501253">]</span><span class="op" id="5501254">,</span>&nbsp;<span class="ident" id="5501256">list</span><span class="op" id="5501260">[</span><span class="ident" id="5501261">j</span><span class="op" id="5501262">]</span>&nbsp;<span class="op" id="5501264">=</span>&nbsp;<span class="ident" id="5501266">list</span><span class="op" id="5501270">[</span><span class="ident" id="5501271">j</span><span class="op" id="5501272">]</span><span class="op" id="5501273">,</span>&nbsp;<span class="ident" id="5501275">list</span><span class="op" id="5501279">[</span><span class="ident" id="5501280">i</span><span class="op" id="5501281">]</span>&nbsp;<span class="op" id="5501283">}</span><span class="op" id="5501284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5501288">len</span><span class="op" id="5501291">(</span><span class="ident" id="5501292">list</span><span class="op" id="5501296">)</span><span class="op" id="5501297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5501300">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5501304">return</span>&nbsp;<span class="ident" id="5501311">list</span><br>
<span class="lineno">760</span><span class="op" id="5501316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5501319">func</span>&nbsp;<span class="ident" id="5501324">removeStar</span><span class="op" id="5501334">(</span><span class="ident" id="5501335">s</span>&nbsp;<span class="builtintype" id="5501337">string</span><span class="op" id="5501343">)</span>&nbsp;<span class="builtintype" id="5501345">string</span>&nbsp;<span class="op" id="5501352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5501355">if</span>&nbsp;<span class="builtinfunc" id="5501358">len</span><span class="op" id="5501361">(</span><span class="ident" id="5501362">s</span><span class="op" id="5501363">)</span>&nbsp;<span class="op" id="5501365">&gt;</span>&nbsp;<span class="num" id="5501367">0</span>&nbsp;<span class="op" id="5501369">&amp;&amp;</span>&nbsp;<span class="ident" id="5501372">s</span><span class="op" id="5501373">[</span><span class="num" id="5501374">0</span><span class="op" id="5501375">]</span>&nbsp;<span class="op" id="5501377">==</span>&nbsp;<span class="string" id="5501380">&#39;*&#39;</span>&nbsp;<span class="op" id="5501384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5501388">return</span>&nbsp;<span class="ident" id="5501395">s</span><span class="op" id="5501396">[</span><span class="num" id="5501397">1</span><span class="op" id="5501398">:</span><span class="op" id="5501399">]</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5501402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5501405">return</span>&nbsp;<span class="ident" id="5501412">s</span><br>
<span class="lineno"></span><span class="op" id="5501414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5501417">func</span>&nbsp;<span class="ident" id="5501422">sortedFuncs</span><span class="op" id="5501433">(</span><span class="ident" id="5501434">m</span>&nbsp;<span class="ident" id="5501436">methodSet</span><span class="op" id="5501445">,</span>&nbsp;<span class="ident" id="5501447">allMethods</span>&nbsp;<span class="builtintype" id="5501458">bool</span><span class="op" id="5501462">)</span>&nbsp;<span class="op" id="5501464">[</span><span class="op" id="5501465">]</span><span class="op" id="5501466">*</span><span class="ident" id="5501467">Func</span>&nbsp;<span class="op" id="5501472">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5501475">list</span>&nbsp;<span class="op" id="5501480">:=</span>&nbsp;<span class="builtinfunc" id="5501483">make</span><span class="op" id="5501487">(</span><span class="op" id="5501488">[</span><span class="op" id="5501489">]</span><span class="op" id="5501490">*</span><span class="ident" id="5501491">Func</span><span class="op" id="5501495">,</span>&nbsp;<span class="builtinfunc" id="5501497">len</span><span class="op" id="5501500">(</span><span class="ident" id="5501501">m</span><span class="op" id="5501502">)</span><span class="op" id="5501503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5501506">i</span>&nbsp;<span class="op" id="5501508">:=</span>&nbsp;<span class="num" id="5501511">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5501514">for</span>&nbsp;<span class="ident" id="5501518">_</span><span class="op" id="5501519">,</span>&nbsp;<span class="ident" id="5501521">m</span>&nbsp;<span class="op" id="5501523">:=</span>&nbsp;<span class="keyword" id="5501526">range</span>&nbsp;<span class="ident" id="5501532">m</span>&nbsp;<span class="op" id="5501534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5501538">//&nbsp;determine&nbsp;which&nbsp;methods&nbsp;to&nbsp;include</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5501578">switch</span>&nbsp;<span class="op" id="5501585">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5501589">case</span>&nbsp;<span class="ident" id="5501594">m</span><span class="op" id="5501595">.</span><span class="ident" id="5501596">Decl</span>&nbsp;<span class="op" id="5501601">==</span>&nbsp;<span class="builtintype" id="5501604">nil</span><span class="op" id="5501607">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5501612">//&nbsp;exclude&nbsp;conflict&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5501640">case</span>&nbsp;<span class="ident" id="5501645">allMethods</span><span class="op" id="5501655">,</span>&nbsp;<span class="ident" id="5501657">m</span><span class="op" id="5501658">.</span><span class="ident" id="5501659">Level</span>&nbsp;<span class="op" id="5501665">==</span>&nbsp;<span class="num" id="5501668">0</span><span class="op" id="5501669">,</span>&nbsp;<span class="op" id="5501671">!</span><span class="ident" id="5501672">ast</span><span class="op" id="5501675">.</span><span class="ident" id="5501676">IsExported</span><span class="op" id="5501686">(</span><span class="ident" id="5501687">removeStar</span><span class="op" id="5501697">(</span><span class="ident" id="5501698">m</span><span class="op" id="5501699">.</span><span class="ident" id="5501700">Orig</span><span class="op" id="5501704">)</span><span class="op" id="5501705">)</span><span class="op" id="5501706">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5501711">//&nbsp;forced&nbsp;inclusion,&nbsp;method&nbsp;not&nbsp;embedded,&nbsp;or&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5501766">//&nbsp;embedded&nbsp;but&nbsp;original&nbsp;receiver&nbsp;type&nbsp;not&nbsp;exported</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5501821">list</span><span class="op" id="5501825">[</span><span class="ident" id="5501826">i</span><span class="op" id="5501827">]</span>&nbsp;<span class="op" id="5501829">=</span>&nbsp;<span class="ident" id="5501831">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5501836">i</span><span class="op" id="5501837">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5501842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5501845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5501848">list</span>&nbsp;<span class="op" id="5501853">=</span>&nbsp;<span class="ident" id="5501855">list</span><span class="op" id="5501859">[</span><span class="num" id="5501860">0</span><span class="op" id="5501861">:</span><span class="ident" id="5501862">i</span><span class="op" id="5501863">]</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5501866">sortBy</span><span class="op" id="5501872">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5501876">func</span><span class="op" id="5501880">(</span><span class="ident" id="5501881">i</span><span class="op" id="5501882">,</span>&nbsp;<span class="ident" id="5501884">j</span>&nbsp;<span class="builtintype" id="5501886">int</span><span class="op" id="5501889">)</span>&nbsp;<span class="builtintype" id="5501891">bool</span>&nbsp;<span class="op" id="5501896">{</span>&nbsp;<span class="keyword" id="5501898">return</span>&nbsp;<span class="ident" id="5501905">list</span><span class="op" id="5501909">[</span><span class="ident" id="5501910">i</span><span class="op" id="5501911">]</span><span class="op" id="5501912">.</span><span class="ident" id="5501913">Name</span>&nbsp;<span class="op" id="5501918">&lt;</span>&nbsp;<span class="ident" id="5501920">list</span><span class="op" id="5501924">[</span><span class="ident" id="5501925">j</span><span class="op" id="5501926">]</span><span class="op" id="5501927">.</span><span class="ident" id="5501928">Name</span>&nbsp;<span class="op" id="5501933">}</span><span class="op" id="5501934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5501938">func</span><span class="op" id="5501942">(</span><span class="ident" id="5501943">i</span><span class="op" id="5501944">,</span>&nbsp;<span class="ident" id="5501946">j</span>&nbsp;<span class="builtintype" id="5501948">int</span><span class="op" id="5501951">)</span>&nbsp;<span class="op" id="5501953">{</span>&nbsp;<span class="ident" id="5501955">list</span><span class="op" id="5501959">[</span><span class="ident" id="5501960">i</span><span class="op" id="5501961">]</span><span class="op" id="5501962">,</span>&nbsp;<span class="ident" id="5501964">list</span><span class="op" id="5501968">[</span><span class="ident" id="5501969">j</span><span class="op" id="5501970">]</span>&nbsp;<span class="op" id="5501972">=</span>&nbsp;<span class="ident" id="5501974">list</span><span class="op" id="5501978">[</span><span class="ident" id="5501979">j</span><span class="op" id="5501980">]</span><span class="op" id="5501981">,</span>&nbsp;<span class="ident" id="5501983">list</span><span class="op" id="5501987">[</span><span class="ident" id="5501988">i</span><span class="op" id="5501989">]</span>&nbsp;<span class="op" id="5501991">}</span><span class="op" id="5501992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5501996">len</span><span class="op" id="5501999">(</span><span class="ident" id="5502000">list</span><span class="op" id="5502004">)</span><span class="op" id="5502005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5502008">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5502011">return</span>&nbsp;<span class="ident" id="5502018">list</span><br>
<span class="lineno"></span><span class="op" id="5502023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5502026">//&nbsp;noteBodies&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;note&nbsp;body&nbsp;strings&nbsp;given&nbsp;a&nbsp;list&nbsp;of&nbsp;notes.</span><br>
<span class="lineno"></span><span class="comment" id="5502099">//&nbsp;This&nbsp;is&nbsp;only&nbsp;used&nbsp;to&nbsp;populate&nbsp;the&nbsp;deprecated&nbsp;Package.Bugs&nbsp;field.</span><br>
<span class="lineno">795</span><span class="comment" id="5502167">//</span><br>
<span class="lineno"></span><span class="keyword" id="5502170">func</span>&nbsp;<span class="ident" id="5502175">noteBodies</span><span class="op" id="5502185">(</span><span class="ident" id="5502186">notes</span>&nbsp;<span class="op" id="5502192">[</span><span class="op" id="5502193">]</span><span class="op" id="5502194">*</span><span class="ident" id="5502195">Note</span><span class="op" id="5502199">)</span>&nbsp;<span class="op" id="5502201">[</span><span class="op" id="5502202">]</span><span class="builtintype" id="5502203">string</span>&nbsp;<span class="op" id="5502210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5502213">var</span>&nbsp;<span class="ident" id="5502217">list</span>&nbsp;<span class="op" id="5502222">[</span><span class="op" id="5502223">]</span><span class="builtintype" id="5502224">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5502232">for</span>&nbsp;<span class="ident" id="5502236">_</span><span class="op" id="5502237">,</span>&nbsp;<span class="ident" id="5502239">n</span>&nbsp;<span class="op" id="5502241">:=</span>&nbsp;<span class="keyword" id="5502244">range</span>&nbsp;<span class="ident" id="5502250">notes</span>&nbsp;<span class="op" id="5502256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5502260">list</span>&nbsp;<span class="op" id="5502265">=</span>&nbsp;<span class="builtinfunc" id="5502267">append</span><span class="op" id="5502273">(</span><span class="ident" id="5502274">list</span><span class="op" id="5502278">,</span>&nbsp;<span class="ident" id="5502280">n</span><span class="op" id="5502281">.</span><span class="ident" id="5502282">Body</span><span class="op" id="5502286">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5502289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5502292">return</span>&nbsp;<span class="ident" id="5502299">list</span><br>
<span class="lineno"></span><span class="op" id="5502304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5502307">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">805</span><span class="comment" id="5502387">//&nbsp;Predeclared&nbsp;identifiers</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5502415">var</span>&nbsp;<span class="ident" id="5502419">predeclaredTypes</span>&nbsp;<span class="op" id="5502436">=</span>&nbsp;<span class="keyword" id="5502438">map</span><span class="op" id="5502441">[</span><span class="builtintype" id="5502442">string</span><span class="op" id="5502448">]</span><span class="builtintype" id="5502449">bool</span><span class="op" id="5502453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502456">&#34;bool&#34;</span><span class="op" id="5502462">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502470">true</span><span class="op" id="5502474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502477">&#34;byte&#34;</span><span class="op" id="5502483">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502491">true</span><span class="op" id="5502495">,</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502498">&#34;complex64&#34;</span><span class="op" id="5502509">:</span>&nbsp;&nbsp;<span class="builtintype" id="5502512">true</span><span class="op" id="5502516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502519">&#34;complex128&#34;</span><span class="op" id="5502531">:</span>&nbsp;<span class="builtintype" id="5502533">true</span><span class="op" id="5502537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502540">&#34;error&#34;</span><span class="op" id="5502547">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502554">true</span><span class="op" id="5502558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502561">&#34;float32&#34;</span><span class="op" id="5502570">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502575">true</span><span class="op" id="5502579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502582">&#34;float64&#34;</span><span class="op" id="5502591">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502596">true</span><span class="op" id="5502600">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502603">&#34;int&#34;</span><span class="op" id="5502608">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502617">true</span><span class="op" id="5502621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502624">&#34;int8&#34;</span><span class="op" id="5502630">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502638">true</span><span class="op" id="5502642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502645">&#34;int16&#34;</span><span class="op" id="5502652">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502659">true</span><span class="op" id="5502663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502666">&#34;int32&#34;</span><span class="op" id="5502673">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502680">true</span><span class="op" id="5502684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502687">&#34;int64&#34;</span><span class="op" id="5502694">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502701">true</span><span class="op" id="5502705">,</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502708">&#34;rune&#34;</span><span class="op" id="5502714">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502722">true</span><span class="op" id="5502726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502729">&#34;string&#34;</span><span class="op" id="5502737">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502743">true</span><span class="op" id="5502747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502750">&#34;uint&#34;</span><span class="op" id="5502756">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502764">true</span><span class="op" id="5502768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502771">&#34;uint8&#34;</span><span class="op" id="5502778">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502785">true</span><span class="op" id="5502789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502792">&#34;uint16&#34;</span><span class="op" id="5502800">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502806">true</span><span class="op" id="5502810">,</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502813">&#34;uint32&#34;</span><span class="op" id="5502821">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502827">true</span><span class="op" id="5502831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502834">&#34;uint64&#34;</span><span class="op" id="5502842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502848">true</span><span class="op" id="5502852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502855">&#34;uintptr&#34;</span><span class="op" id="5502864">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502869">true</span><span class="op" id="5502873">,</span><br>
<span class="lineno"></span><span class="op" id="5502875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">830</span><span class="keyword" id="5502878">var</span>&nbsp;<span class="ident" id="5502882">predeclaredFuncs</span>&nbsp;<span class="op" id="5502899">=</span>&nbsp;<span class="keyword" id="5502901">map</span><span class="op" id="5502904">[</span><span class="builtintype" id="5502905">string</span><span class="op" id="5502911">]</span><span class="builtintype" id="5502912">bool</span><span class="op" id="5502916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502919">&#34;append&#34;</span><span class="op" id="5502927">:</span>&nbsp;&nbsp;<span class="builtintype" id="5502930">true</span><span class="op" id="5502934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502937">&#34;cap&#34;</span><span class="op" id="5502942">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502948">true</span><span class="op" id="5502952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502955">&#34;close&#34;</span><span class="op" id="5502962">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5502966">true</span><span class="op" id="5502970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502973">&#34;complex&#34;</span><span class="op" id="5502982">:</span>&nbsp;<span class="builtintype" id="5502984">true</span><span class="op" id="5502988">,</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5502991">&#34;copy&#34;</span><span class="op" id="5502997">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5503002">true</span><span class="op" id="5503006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503009">&#34;delete&#34;</span><span class="op" id="5503017">:</span>&nbsp;&nbsp;<span class="builtintype" id="5503020">true</span><span class="op" id="5503024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503027">&#34;imag&#34;</span><span class="op" id="5503033">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5503038">true</span><span class="op" id="5503042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503045">&#34;len&#34;</span><span class="op" id="5503050">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5503056">true</span><span class="op" id="5503060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503063">&#34;make&#34;</span><span class="op" id="5503069">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5503074">true</span><span class="op" id="5503078">,</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503081">&#34;new&#34;</span><span class="op" id="5503086">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5503092">true</span><span class="op" id="5503096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503099">&#34;panic&#34;</span><span class="op" id="5503106">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5503110">true</span><span class="op" id="5503114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503117">&#34;print&#34;</span><span class="op" id="5503124">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5503128">true</span><span class="op" id="5503132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503135">&#34;println&#34;</span><span class="op" id="5503144">:</span>&nbsp;<span class="builtintype" id="5503146">true</span><span class="op" id="5503150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503153">&#34;real&#34;</span><span class="op" id="5503159">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5503164">true</span><span class="op" id="5503168">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503171">&#34;recover&#34;</span><span class="op" id="5503180">:</span>&nbsp;<span class="builtintype" id="5503182">true</span><span class="op" id="5503186">,</span><br>
<span class="lineno"></span><span class="op" id="5503188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5503191">var</span>&nbsp;<span class="ident" id="5503195">predeclaredConstants</span>&nbsp;<span class="op" id="5503216">=</span>&nbsp;<span class="keyword" id="5503218">map</span><span class="op" id="5503221">[</span><span class="builtintype" id="5503222">string</span><span class="op" id="5503228">]</span><span class="builtintype" id="5503229">bool</span><span class="op" id="5503233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503236">&#34;false&#34;</span><span class="op" id="5503243">:</span>&nbsp;<span class="builtintype" id="5503245">true</span><span class="op" id="5503249">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503252">&#34;iota&#34;</span><span class="op" id="5503258">:</span>&nbsp;&nbsp;<span class="builtintype" id="5503261">true</span><span class="op" id="5503265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503268">&#34;nil&#34;</span><span class="op" id="5503273">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5503277">true</span><span class="op" id="5503281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5503284">&#34;true&#34;</span><span class="op" id="5503290">:</span>&nbsp;&nbsp;<span class="builtintype" id="5503293">true</span><span class="op" id="5503297">,</span><br>
<span class="lineno"></span><span class="op" id="5503299">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
