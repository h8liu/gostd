<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6570154">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6570209">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6570263">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6570314">package</span>&nbsp;<span class="ident" id="6570322">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6570327">import</span>&nbsp;<span class="op" id="6570334">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570337">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570346">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570360">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570367">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570373">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570386">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570392">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570403">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570414">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6570425">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6570432">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="6570435">type</span>&nbsp;<span class="ident" id="6570440">untarTest</span>&nbsp;<span class="keyword" id="6570450">struct</span>&nbsp;<span class="op" id="6570457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570460">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6570468">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570476">headers</span>&nbsp;<span class="op" id="6570484">[</span><span class="op" id="6570485">]</span><span class="op" id="6570486">*</span><span class="ident" id="6570487">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570495">cksums</span>&nbsp;&nbsp;<span class="op" id="6570503">[</span><span class="op" id="6570504">]</span><span class="builtintype" id="6570505">string</span><br>
<span class="lineno"></span><span class="op" id="6570512">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6570515">var</span>&nbsp;<span class="ident" id="6570519">gnuTarTest</span>&nbsp;<span class="op" id="6570530">=</span>&nbsp;<span class="op" id="6570532">&amp;</span><span class="ident" id="6570533">untarTest</span><span class="op" id="6570542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570545">file</span><span class="op" id="6570549">:</span>&nbsp;<span class="string" id="6570551">&#34;testdata/gnu.tar&#34;</span><span class="op" id="6570569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570572">headers</span><span class="op" id="6570579">:</span>&nbsp;<span class="op" id="6570581">[</span><span class="op" id="6570582">]</span><span class="op" id="6570583">*</span><span class="ident" id="6570584">Header</span><span class="op" id="6570590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570594">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570599">Name</span><span class="op" id="6570603">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6570609">&#34;small.txt&#34;</span><span class="op" id="6570620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570625">Mode</span><span class="op" id="6570629">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6570635">0640</span><span class="op" id="6570639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570644">Uid</span><span class="op" id="6570647">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6570654">73025</span><span class="op" id="6570659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570664">Gid</span><span class="op" id="6570667">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6570674">5000</span><span class="op" id="6570678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570683">Size</span><span class="op" id="6570687">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6570693">5</span><span class="op" id="6570694">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570699">ModTime</span><span class="op" id="6570706">:</span>&nbsp;&nbsp;<span class="ident" id="6570709">time</span><span class="op" id="6570713">.</span><span class="ident" id="6570714">Unix</span><span class="op" id="6570718">(</span><span class="num" id="6570719">1244428340</span><span class="op" id="6570729">,</span>&nbsp;<span class="num" id="6570731">0</span><span class="op" id="6570732">)</span><span class="op" id="6570733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570738">Typeflag</span><span class="op" id="6570746">:</span>&nbsp;<span class="string" id="6570748">&#39;0&#39;</span><span class="op" id="6570751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570756">Uname</span><span class="op" id="6570761">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6570766">&#34;dsymonds&#34;</span><span class="op" id="6570776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570781">Gname</span><span class="op" id="6570786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6570791">&#34;eng&#34;</span><span class="op" id="6570796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570800">}</span><span class="op" id="6570801">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6570805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570810">Name</span><span class="op" id="6570814">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6570820">&#34;small2.txt&#34;</span><span class="op" id="6570832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570837">Mode</span><span class="op" id="6570841">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6570847">0640</span><span class="op" id="6570851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570856">Uid</span><span class="op" id="6570859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6570866">73025</span><span class="op" id="6570871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570876">Gid</span><span class="op" id="6570879">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6570886">5000</span><span class="op" id="6570890">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570895">Size</span><span class="op" id="6570899">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6570905">11</span><span class="op" id="6570907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570912">ModTime</span><span class="op" id="6570919">:</span>&nbsp;&nbsp;<span class="ident" id="6570922">time</span><span class="op" id="6570926">.</span><span class="ident" id="6570927">Unix</span><span class="op" id="6570931">(</span><span class="num" id="6570932">1244436044</span><span class="op" id="6570942">,</span>&nbsp;<span class="num" id="6570944">0</span><span class="op" id="6570945">)</span><span class="op" id="6570946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570951">Typeflag</span><span class="op" id="6570959">:</span>&nbsp;<span class="string" id="6570961">&#39;0&#39;</span><span class="op" id="6570964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570969">Uname</span><span class="op" id="6570974">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6570979">&#34;dsymonds&#34;</span><span class="op" id="6570989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6570994">Gname</span><span class="op" id="6570999">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571004">&#34;eng&#34;</span><span class="op" id="6571009">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571013">}</span><span class="op" id="6571014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571017">}</span><span class="op" id="6571018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571021">cksums</span><span class="op" id="6571027">:</span>&nbsp;<span class="op" id="6571029">[</span><span class="op" id="6571030">]</span><span class="builtintype" id="6571031">string</span><span class="op" id="6571037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6571041">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="6571075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6571079">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="6571113">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571116">}</span><span class="op" id="6571117">,</span><br>
<span class="lineno"></span><span class="op" id="6571119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6571122">var</span>&nbsp;<span class="ident" id="6571126">sparseTarTest</span>&nbsp;<span class="op" id="6571140">=</span>&nbsp;<span class="op" id="6571142">&amp;</span><span class="ident" id="6571143">untarTest</span><span class="op" id="6571152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571155">file</span><span class="op" id="6571159">:</span>&nbsp;<span class="string" id="6571161">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="6571190">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571193">headers</span><span class="op" id="6571200">:</span>&nbsp;<span class="op" id="6571202">[</span><span class="op" id="6571203">]</span><span class="op" id="6571204">*</span><span class="ident" id="6571205">Header</span><span class="op" id="6571211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571220">Name</span><span class="op" id="6571224">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571230">&#34;sparse-gnu&#34;</span><span class="op" id="6571242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571247">Mode</span><span class="op" id="6571251">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571257">420</span><span class="op" id="6571260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571265">Uid</span><span class="op" id="6571268">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571275">1000</span><span class="op" id="6571279">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571284">Gid</span><span class="op" id="6571287">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571294">1000</span><span class="op" id="6571298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571303">Size</span><span class="op" id="6571307">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571313">200</span><span class="op" id="6571316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571321">ModTime</span><span class="op" id="6571328">:</span>&nbsp;&nbsp;<span class="ident" id="6571331">time</span><span class="op" id="6571335">.</span><span class="ident" id="6571336">Unix</span><span class="op" id="6571340">(</span><span class="num" id="6571341">1392395740</span><span class="op" id="6571351">,</span>&nbsp;<span class="num" id="6571353">0</span><span class="op" id="6571354">)</span><span class="op" id="6571355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571360">Typeflag</span><span class="op" id="6571368">:</span>&nbsp;<span class="num" id="6571370">0x53</span><span class="op" id="6571374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571379">Linkname</span><span class="op" id="6571387">:</span>&nbsp;<span class="string" id="6571389">&#34;&#34;</span><span class="op" id="6571391">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571396">Uname</span><span class="op" id="6571401">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571406">&#34;david&#34;</span><span class="op" id="6571413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571418">Gname</span><span class="op" id="6571423">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571428">&#34;david&#34;</span><span class="op" id="6571435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571440">Devmajor</span><span class="op" id="6571448">:</span>&nbsp;<span class="num" id="6571450">0</span><span class="op" id="6571451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571456">Devminor</span><span class="op" id="6571464">:</span>&nbsp;<span class="num" id="6571466">0</span><span class="op" id="6571467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571471">}</span><span class="op" id="6571472">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571481">Name</span><span class="op" id="6571485">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571491">&#34;sparse-posix-0.0&#34;</span><span class="op" id="6571509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571514">Mode</span><span class="op" id="6571518">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571524">420</span><span class="op" id="6571527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571532">Uid</span><span class="op" id="6571535">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571542">1000</span><span class="op" id="6571546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571551">Gid</span><span class="op" id="6571554">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571561">1000</span><span class="op" id="6571565">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571570">Size</span><span class="op" id="6571574">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571580">200</span><span class="op" id="6571583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571588">ModTime</span><span class="op" id="6571595">:</span>&nbsp;&nbsp;<span class="ident" id="6571598">time</span><span class="op" id="6571602">.</span><span class="ident" id="6571603">Unix</span><span class="op" id="6571607">(</span><span class="num" id="6571608">1392342187</span><span class="op" id="6571618">,</span>&nbsp;<span class="num" id="6571620">0</span><span class="op" id="6571621">)</span><span class="op" id="6571622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571627">Typeflag</span><span class="op" id="6571635">:</span>&nbsp;<span class="num" id="6571637">0x30</span><span class="op" id="6571641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571646">Linkname</span><span class="op" id="6571654">:</span>&nbsp;<span class="string" id="6571656">&#34;&#34;</span><span class="op" id="6571658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571663">Uname</span><span class="op" id="6571668">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571673">&#34;david&#34;</span><span class="op" id="6571680">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571685">Gname</span><span class="op" id="6571690">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571695">&#34;david&#34;</span><span class="op" id="6571702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571707">Devmajor</span><span class="op" id="6571715">:</span>&nbsp;<span class="num" id="6571717">0</span><span class="op" id="6571718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571723">Devminor</span><span class="op" id="6571731">:</span>&nbsp;<span class="num" id="6571733">0</span><span class="op" id="6571734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571738">}</span><span class="op" id="6571739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6571743">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571748">Name</span><span class="op" id="6571752">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571758">&#34;sparse-posix-0.1&#34;</span><span class="op" id="6571776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571781">Mode</span><span class="op" id="6571785">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571791">420</span><span class="op" id="6571794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571799">Uid</span><span class="op" id="6571802">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571809">1000</span><span class="op" id="6571813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571818">Gid</span><span class="op" id="6571821">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571828">1000</span><span class="op" id="6571832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571837">Size</span><span class="op" id="6571841">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6571847">200</span><span class="op" id="6571850">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571855">ModTime</span><span class="op" id="6571862">:</span>&nbsp;&nbsp;<span class="ident" id="6571865">time</span><span class="op" id="6571869">.</span><span class="ident" id="6571870">Unix</span><span class="op" id="6571874">(</span><span class="num" id="6571875">1392340456</span><span class="op" id="6571885">,</span>&nbsp;<span class="num" id="6571887">0</span><span class="op" id="6571888">)</span><span class="op" id="6571889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571894">Typeflag</span><span class="op" id="6571902">:</span>&nbsp;<span class="num" id="6571904">0x30</span><span class="op" id="6571908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571913">Linkname</span><span class="op" id="6571921">:</span>&nbsp;<span class="string" id="6571923">&#34;&#34;</span><span class="op" id="6571925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571930">Uname</span><span class="op" id="6571935">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571940">&#34;david&#34;</span><span class="op" id="6571947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571952">Gname</span><span class="op" id="6571957">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6571962">&#34;david&#34;</span><span class="op" id="6571969">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571974">Devmajor</span><span class="op" id="6571982">:</span>&nbsp;<span class="num" id="6571984">0</span><span class="op" id="6571985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6571990">Devminor</span><span class="op" id="6571998">:</span>&nbsp;<span class="num" id="6572000">0</span><span class="op" id="6572001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572005">}</span><span class="op" id="6572006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572015">Name</span><span class="op" id="6572019">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572025">&#34;sparse-posix-1.0&#34;</span><span class="op" id="6572043">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572048">Mode</span><span class="op" id="6572052">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572058">420</span><span class="op" id="6572061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572066">Uid</span><span class="op" id="6572069">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572076">1000</span><span class="op" id="6572080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572085">Gid</span><span class="op" id="6572088">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572095">1000</span><span class="op" id="6572099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572104">Size</span><span class="op" id="6572108">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572114">200</span><span class="op" id="6572117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572122">ModTime</span><span class="op" id="6572129">:</span>&nbsp;&nbsp;<span class="ident" id="6572132">time</span><span class="op" id="6572136">.</span><span class="ident" id="6572137">Unix</span><span class="op" id="6572141">(</span><span class="num" id="6572142">1392337404</span><span class="op" id="6572152">,</span>&nbsp;<span class="num" id="6572154">0</span><span class="op" id="6572155">)</span><span class="op" id="6572156">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572161">Typeflag</span><span class="op" id="6572169">:</span>&nbsp;<span class="num" id="6572171">0x30</span><span class="op" id="6572175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572180">Linkname</span><span class="op" id="6572188">:</span>&nbsp;<span class="string" id="6572190">&#34;&#34;</span><span class="op" id="6572192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572197">Uname</span><span class="op" id="6572202">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572207">&#34;david&#34;</span><span class="op" id="6572214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572219">Gname</span><span class="op" id="6572224">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572229">&#34;david&#34;</span><span class="op" id="6572236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572241">Devmajor</span><span class="op" id="6572249">:</span>&nbsp;<span class="num" id="6572251">0</span><span class="op" id="6572252">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572257">Devminor</span><span class="op" id="6572265">:</span>&nbsp;<span class="num" id="6572267">0</span><span class="op" id="6572268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572272">}</span><span class="op" id="6572273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572282">Name</span><span class="op" id="6572286">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572292">&#34;end&#34;</span><span class="op" id="6572297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572302">Mode</span><span class="op" id="6572306">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572312">420</span><span class="op" id="6572315">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572320">Uid</span><span class="op" id="6572323">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572330">1000</span><span class="op" id="6572334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572339">Gid</span><span class="op" id="6572342">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572349">1000</span><span class="op" id="6572353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572358">Size</span><span class="op" id="6572362">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572368">4</span><span class="op" id="6572369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572374">ModTime</span><span class="op" id="6572381">:</span>&nbsp;&nbsp;<span class="ident" id="6572384">time</span><span class="op" id="6572388">.</span><span class="ident" id="6572389">Unix</span><span class="op" id="6572393">(</span><span class="num" id="6572394">1392398319</span><span class="op" id="6572404">,</span>&nbsp;<span class="num" id="6572406">0</span><span class="op" id="6572407">)</span><span class="op" id="6572408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572413">Typeflag</span><span class="op" id="6572421">:</span>&nbsp;<span class="num" id="6572423">0x30</span><span class="op" id="6572427">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572432">Linkname</span><span class="op" id="6572440">:</span>&nbsp;<span class="string" id="6572442">&#34;&#34;</span><span class="op" id="6572444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572449">Uname</span><span class="op" id="6572454">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572459">&#34;david&#34;</span><span class="op" id="6572466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572471">Gname</span><span class="op" id="6572476">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572481">&#34;david&#34;</span><span class="op" id="6572488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572493">Devmajor</span><span class="op" id="6572501">:</span>&nbsp;<span class="num" id="6572503">0</span><span class="op" id="6572504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572509">Devminor</span><span class="op" id="6572517">:</span>&nbsp;<span class="num" id="6572519">0</span><span class="op" id="6572520">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572524">}</span><span class="op" id="6572525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572528">}</span><span class="op" id="6572529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572532">cksums</span><span class="op" id="6572538">:</span>&nbsp;<span class="op" id="6572540">[</span><span class="op" id="6572541">]</span><span class="builtintype" id="6572542">string</span><span class="op" id="6572548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572552">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6572586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572590">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6572624">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572628">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6572662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572666">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6572700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6572704">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="6572738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572741">}</span><span class="op" id="6572742">,</span><br>
<span class="lineno"></span><span class="op" id="6572744">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="6572747">var</span>&nbsp;<span class="ident" id="6572751">untarTests</span>&nbsp;<span class="op" id="6572762">=</span>&nbsp;<span class="op" id="6572764">[</span><span class="op" id="6572765">]</span><span class="op" id="6572766">*</span><span class="ident" id="6572767">untarTest</span><span class="op" id="6572776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572779">gnuTarTest</span><span class="op" id="6572789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572792">sparseTarTest</span><span class="op" id="6572805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572808">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572812">file</span><span class="op" id="6572816">:</span>&nbsp;<span class="string" id="6572818">&#34;testdata/star.tar&#34;</span><span class="op" id="6572837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572841">headers</span><span class="op" id="6572848">:</span>&nbsp;<span class="op" id="6572850">[</span><span class="op" id="6572851">]</span><span class="op" id="6572852">*</span><span class="ident" id="6572853">Header</span><span class="op" id="6572859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6572864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572870">Name</span><span class="op" id="6572874">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6572882">&#34;small.txt&#34;</span><span class="op" id="6572893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572899">Mode</span><span class="op" id="6572903">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572911">0640</span><span class="op" id="6572915">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572921">Uid</span><span class="op" id="6572924">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572933">73025</span><span class="op" id="6572938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572944">Gid</span><span class="op" id="6572947">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572956">5000</span><span class="op" id="6572960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572966">Size</span><span class="op" id="6572970">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6572978">5</span><span class="op" id="6572979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6572985">ModTime</span><span class="op" id="6572992">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6572997">time</span><span class="op" id="6573001">.</span><span class="ident" id="6573002">Unix</span><span class="op" id="6573006">(</span><span class="num" id="6573007">1244592783</span><span class="op" id="6573017">,</span>&nbsp;<span class="num" id="6573019">0</span><span class="op" id="6573020">)</span><span class="op" id="6573021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573027">Typeflag</span><span class="op" id="6573035">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6573039">&#39;0&#39;</span><span class="op" id="6573042">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573048">Uname</span><span class="op" id="6573053">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6573060">&#34;dsymonds&#34;</span><span class="op" id="6573070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573076">Gname</span><span class="op" id="6573081">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6573088">&#34;eng&#34;</span><span class="op" id="6573093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573099">AccessTime</span><span class="op" id="6573109">:</span>&nbsp;<span class="ident" id="6573111">time</span><span class="op" id="6573115">.</span><span class="ident" id="6573116">Unix</span><span class="op" id="6573120">(</span><span class="num" id="6573121">1244592783</span><span class="op" id="6573131">,</span>&nbsp;<span class="num" id="6573133">0</span><span class="op" id="6573134">)</span><span class="op" id="6573135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573141">ChangeTime</span><span class="op" id="6573151">:</span>&nbsp;<span class="ident" id="6573153">time</span><span class="op" id="6573157">.</span><span class="ident" id="6573158">Unix</span><span class="op" id="6573162">(</span><span class="num" id="6573163">1244592783</span><span class="op" id="6573173">,</span>&nbsp;<span class="num" id="6573175">0</span><span class="op" id="6573176">)</span><span class="op" id="6573177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573182">}</span><span class="op" id="6573183">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573194">Name</span><span class="op" id="6573198">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6573206">&#34;small2.txt&#34;</span><span class="op" id="6573218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573224">Mode</span><span class="op" id="6573228">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6573236">0640</span><span class="op" id="6573240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573246">Uid</span><span class="op" id="6573249">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6573258">73025</span><span class="op" id="6573263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573269">Gid</span><span class="op" id="6573272">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6573281">5000</span><span class="op" id="6573285">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573291">Size</span><span class="op" id="6573295">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6573303">11</span><span class="op" id="6573305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573311">ModTime</span><span class="op" id="6573318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6573323">time</span><span class="op" id="6573327">.</span><span class="ident" id="6573328">Unix</span><span class="op" id="6573332">(</span><span class="num" id="6573333">1244592783</span><span class="op" id="6573343">,</span>&nbsp;<span class="num" id="6573345">0</span><span class="op" id="6573346">)</span><span class="op" id="6573347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573353">Typeflag</span><span class="op" id="6573361">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6573365">&#39;0&#39;</span><span class="op" id="6573368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573374">Uname</span><span class="op" id="6573379">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6573386">&#34;dsymonds&#34;</span><span class="op" id="6573396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573402">Gname</span><span class="op" id="6573407">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6573414">&#34;eng&#34;</span><span class="op" id="6573419">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573425">AccessTime</span><span class="op" id="6573435">:</span>&nbsp;<span class="ident" id="6573437">time</span><span class="op" id="6573441">.</span><span class="ident" id="6573442">Unix</span><span class="op" id="6573446">(</span><span class="num" id="6573447">1244592783</span><span class="op" id="6573457">,</span>&nbsp;<span class="num" id="6573459">0</span><span class="op" id="6573460">)</span><span class="op" id="6573461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573467">ChangeTime</span><span class="op" id="6573477">:</span>&nbsp;<span class="ident" id="6573479">time</span><span class="op" id="6573483">.</span><span class="ident" id="6573484">Unix</span><span class="op" id="6573488">(</span><span class="num" id="6573489">1244592783</span><span class="op" id="6573499">,</span>&nbsp;<span class="num" id="6573501">0</span><span class="op" id="6573502">)</span><span class="op" id="6573503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573508">}</span><span class="op" id="6573509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573513">}</span><span class="op" id="6573514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573517">}</span><span class="op" id="6573518">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573525">file</span><span class="op" id="6573529">:</span>&nbsp;<span class="string" id="6573531">&#34;testdata/v7.tar&#34;</span><span class="op" id="6573548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573552">headers</span><span class="op" id="6573559">:</span>&nbsp;<span class="op" id="6573561">[</span><span class="op" id="6573562">]</span><span class="op" id="6573563">*</span><span class="ident" id="6573564">Header</span><span class="op" id="6573570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573581">Name</span><span class="op" id="6573585">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6573591">&#34;small.txt&#34;</span><span class="op" id="6573602">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573608">Mode</span><span class="op" id="6573612">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6573618">0444</span><span class="op" id="6573622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573628">Uid</span><span class="op" id="6573631">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6573638">73025</span><span class="op" id="6573643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573649">Gid</span><span class="op" id="6573652">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6573659">5000</span><span class="op" id="6573663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573669">Size</span><span class="op" id="6573673">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6573679">5</span><span class="op" id="6573680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573686">ModTime</span><span class="op" id="6573693">:</span>&nbsp;&nbsp;<span class="ident" id="6573696">time</span><span class="op" id="6573700">.</span><span class="ident" id="6573701">Unix</span><span class="op" id="6573705">(</span><span class="num" id="6573706">1244593104</span><span class="op" id="6573716">,</span>&nbsp;<span class="num" id="6573718">0</span><span class="op" id="6573719">)</span><span class="op" id="6573720">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573726">Typeflag</span><span class="op" id="6573734">:</span>&nbsp;<span class="string" id="6573736">&#39;\x00&#39;</span><span class="op" id="6573742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573747">}</span><span class="op" id="6573748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573759">Name</span><span class="op" id="6573763">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6573769">&#34;small2.txt&#34;</span><span class="op" id="6573781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573787">Mode</span><span class="op" id="6573791">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6573797">0444</span><span class="op" id="6573801">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573807">Uid</span><span class="op" id="6573810">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6573817">73025</span><span class="op" id="6573822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573828">Gid</span><span class="op" id="6573831">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6573838">5000</span><span class="op" id="6573842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573848">Size</span><span class="op" id="6573852">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6573858">11</span><span class="op" id="6573860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573866">ModTime</span><span class="op" id="6573873">:</span>&nbsp;&nbsp;<span class="ident" id="6573876">time</span><span class="op" id="6573880">.</span><span class="ident" id="6573881">Unix</span><span class="op" id="6573885">(</span><span class="num" id="6573886">1244593104</span><span class="op" id="6573896">,</span>&nbsp;<span class="num" id="6573898">0</span><span class="op" id="6573899">)</span><span class="op" id="6573900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573906">Typeflag</span><span class="op" id="6573914">:</span>&nbsp;<span class="string" id="6573916">&#39;\x00&#39;</span><span class="op" id="6573922">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573927">}</span><span class="op" id="6573928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573932">}</span><span class="op" id="6573933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573936">}</span><span class="op" id="6573937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573944">file</span><span class="op" id="6573948">:</span>&nbsp;<span class="string" id="6573950">&#34;testdata/pax.tar&#34;</span><span class="op" id="6573968">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6573972">headers</span><span class="op" id="6573979">:</span>&nbsp;<span class="op" id="6573981">[</span><span class="op" id="6573982">]</span><span class="op" id="6573983">*</span><span class="ident" id="6573984">Header</span><span class="op" id="6573990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6573995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574001">Name</span><span class="op" id="6574005">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6574013">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="6574209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574215">Mode</span><span class="op" id="6574219">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6574227">0664</span><span class="op" id="6574231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574237">Uid</span><span class="op" id="6574240">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6574249">1000</span><span class="op" id="6574253">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574259">Gid</span><span class="op" id="6574262">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6574271">1000</span><span class="op" id="6574275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574281">Uname</span><span class="op" id="6574286">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6574293">&#34;shane&#34;</span><span class="op" id="6574300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574306">Gname</span><span class="op" id="6574311">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6574318">&#34;shane&#34;</span><span class="op" id="6574325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574331">Size</span><span class="op" id="6574335">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6574343">7</span><span class="op" id="6574344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574350">ModTime</span><span class="op" id="6574357">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6574362">time</span><span class="op" id="6574366">.</span><span class="ident" id="6574367">Unix</span><span class="op" id="6574371">(</span><span class="num" id="6574372">1350244992</span><span class="op" id="6574382">,</span>&nbsp;<span class="num" id="6574384">23960108</span><span class="op" id="6574392">)</span><span class="op" id="6574393">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574399">ChangeTime</span><span class="op" id="6574409">:</span>&nbsp;<span class="ident" id="6574411">time</span><span class="op" id="6574415">.</span><span class="ident" id="6574416">Unix</span><span class="op" id="6574420">(</span><span class="num" id="6574421">1350244992</span><span class="op" id="6574431">,</span>&nbsp;<span class="num" id="6574433">23960108</span><span class="op" id="6574441">)</span><span class="op" id="6574442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574448">AccessTime</span><span class="op" id="6574458">:</span>&nbsp;<span class="ident" id="6574460">time</span><span class="op" id="6574464">.</span><span class="ident" id="6574465">Unix</span><span class="op" id="6574469">(</span><span class="num" id="6574470">1350244992</span><span class="op" id="6574480">,</span>&nbsp;<span class="num" id="6574482">23960108</span><span class="op" id="6574490">)</span><span class="op" id="6574491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574497">Typeflag</span><span class="op" id="6574505">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6574509">TypeReg</span><span class="op" id="6574516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574521">}</span><span class="op" id="6574522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6574527">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574533">Name</span><span class="op" id="6574537">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6574545">&#34;a/b&#34;</span><span class="op" id="6574550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574556">Mode</span><span class="op" id="6574560">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6574568">0777</span><span class="op" id="6574572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574578">Uid</span><span class="op" id="6574581">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6574590">1000</span><span class="op" id="6574594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574600">Gid</span><span class="op" id="6574603">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6574612">1000</span><span class="op" id="6574616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574622">Uname</span><span class="op" id="6574627">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6574634">&#34;shane&#34;</span><span class="op" id="6574641">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574647">Gname</span><span class="op" id="6574652">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6574659">&#34;shane&#34;</span><span class="op" id="6574666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574672">Size</span><span class="op" id="6574676">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6574684">0</span><span class="op" id="6574685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574691">ModTime</span><span class="op" id="6574698">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6574703">time</span><span class="op" id="6574707">.</span><span class="ident" id="6574708">Unix</span><span class="op" id="6574712">(</span><span class="num" id="6574713">1350266320</span><span class="op" id="6574723">,</span>&nbsp;<span class="num" id="6574725">910238425</span><span class="op" id="6574734">)</span><span class="op" id="6574735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574741">ChangeTime</span><span class="op" id="6574751">:</span>&nbsp;<span class="ident" id="6574753">time</span><span class="op" id="6574757">.</span><span class="ident" id="6574758">Unix</span><span class="op" id="6574762">(</span><span class="num" id="6574763">1350266320</span><span class="op" id="6574773">,</span>&nbsp;<span class="num" id="6574775">910238425</span><span class="op" id="6574784">)</span><span class="op" id="6574785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574791">AccessTime</span><span class="op" id="6574801">:</span>&nbsp;<span class="ident" id="6574803">time</span><span class="op" id="6574807">.</span><span class="ident" id="6574808">Unix</span><span class="op" id="6574812">(</span><span class="num" id="6574813">1350266320</span><span class="op" id="6574823">,</span>&nbsp;<span class="num" id="6574825">910238425</span><span class="op" id="6574834">)</span><span class="op" id="6574835">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574841">Typeflag</span><span class="op" id="6574849">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6574853">TypeSymlink</span><span class="op" id="6574864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6574870">Linkname</span><span class="op" id="6574878">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6574882">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="6575076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575081">}</span><span class="op" id="6575082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575086">}</span><span class="op" id="6575087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575090">}</span><span class="op" id="6575091">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575098">file</span><span class="op" id="6575102">:</span>&nbsp;<span class="string" id="6575104">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="6575126">,</span>&nbsp;<span class="comment" id="6575128">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575155">headers</span><span class="op" id="6575162">:</span>&nbsp;<span class="op" id="6575164">[</span><span class="op" id="6575165">]</span><span class="op" id="6575166">*</span><span class="ident" id="6575167">Header</span><span class="op" id="6575173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575184">Name</span><span class="op" id="6575188">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6575194">&#34;P1050238.JPG.log&#34;</span><span class="op" id="6575212">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575218">Mode</span><span class="op" id="6575222">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6575228">0664</span><span class="op" id="6575232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575238">Uid</span><span class="op" id="6575241">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6575248">0</span><span class="op" id="6575249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575255">Gid</span><span class="op" id="6575258">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6575265">0</span><span class="op" id="6575266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575272">Size</span><span class="op" id="6575276">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6575282">14</span><span class="op" id="6575284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575290">ModTime</span><span class="op" id="6575297">:</span>&nbsp;&nbsp;<span class="ident" id="6575300">time</span><span class="op" id="6575304">.</span><span class="ident" id="6575305">Unix</span><span class="op" id="6575309">(</span><span class="num" id="6575310">1365454838</span><span class="op" id="6575320">,</span>&nbsp;<span class="num" id="6575322">0</span><span class="op" id="6575323">)</span><span class="op" id="6575324">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575330">Typeflag</span><span class="op" id="6575338">:</span>&nbsp;<span class="ident" id="6575340">TypeReg</span><span class="op" id="6575347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575353">Linkname</span><span class="op" id="6575361">:</span>&nbsp;<span class="string" id="6575363">&#34;&#34;</span><span class="op" id="6575365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575371">Uname</span><span class="op" id="6575376">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6575381">&#34;eyefi&#34;</span><span class="op" id="6575388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575394">Gname</span><span class="op" id="6575399">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6575404">&#34;eyefi&#34;</span><span class="op" id="6575411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575417">Devmajor</span><span class="op" id="6575425">:</span>&nbsp;<span class="num" id="6575427">0</span><span class="op" id="6575428">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575434">Devminor</span><span class="op" id="6575442">:</span>&nbsp;<span class="num" id="6575444">0</span><span class="op" id="6575445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575450">}</span><span class="op" id="6575451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575455">}</span><span class="op" id="6575456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575459">}</span><span class="op" id="6575460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575463">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575467">file</span><span class="op" id="6575471">:</span>&nbsp;<span class="string" id="6575473">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="6575494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575498">headers</span><span class="op" id="6575505">:</span>&nbsp;<span class="op" id="6575507">[</span><span class="op" id="6575508">]</span><span class="op" id="6575509">*</span><span class="ident" id="6575510">Header</span><span class="op" id="6575516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6575521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575527">Name</span><span class="op" id="6575531">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6575539">&#34;small.txt&#34;</span><span class="op" id="6575550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575556">Mode</span><span class="op" id="6575560">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6575568">0644</span><span class="op" id="6575572">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575578">Uid</span><span class="op" id="6575581">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6575590">1000</span><span class="op" id="6575594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575600">Gid</span><span class="op" id="6575603">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6575612">10</span><span class="op" id="6575614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575620">Size</span><span class="op" id="6575624">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6575632">5</span><span class="op" id="6575633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575639">ModTime</span><span class="op" id="6575646">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6575651">time</span><span class="op" id="6575655">.</span><span class="ident" id="6575656">Unix</span><span class="op" id="6575660">(</span><span class="num" id="6575661">1386065770</span><span class="op" id="6575671">,</span>&nbsp;<span class="num" id="6575673">448252320</span><span class="op" id="6575682">)</span><span class="op" id="6575683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575689">Typeflag</span><span class="op" id="6575697">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6575701">&#39;0&#39;</span><span class="op" id="6575704">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575710">Uname</span><span class="op" id="6575715">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6575722">&#34;alex&#34;</span><span class="op" id="6575728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575734">Gname</span><span class="op" id="6575739">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6575746">&#34;wheel&#34;</span><span class="op" id="6575753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575759">AccessTime</span><span class="op" id="6575769">:</span>&nbsp;<span class="ident" id="6575771">time</span><span class="op" id="6575775">.</span><span class="ident" id="6575776">Unix</span><span class="op" id="6575780">(</span><span class="num" id="6575781">1389782991</span><span class="op" id="6575791">,</span>&nbsp;<span class="num" id="6575793">419875220</span><span class="op" id="6575802">)</span><span class="op" id="6575803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575809">ChangeTime</span><span class="op" id="6575819">:</span>&nbsp;<span class="ident" id="6575821">time</span><span class="op" id="6575825">.</span><span class="ident" id="6575826">Unix</span><span class="op" id="6575830">(</span><span class="num" id="6575831">1389782956</span><span class="op" id="6575841">,</span>&nbsp;<span class="num" id="6575843">794414986</span><span class="op" id="6575852">)</span><span class="op" id="6575853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6575859">Xattrs</span><span class="op" id="6575865">:</span>&nbsp;<span class="keyword" id="6575867">map</span><span class="op" id="6575870">[</span><span class="builtintype" id="6575871">string</span><span class="op" id="6575877">]</span><span class="builtintype" id="6575878">string</span><span class="op" id="6575884">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6575891">&#34;user.key&#34;</span><span class="op" id="6575901">:</span>&nbsp;&nbsp;<span class="string" id="6575904">&#34;value&#34;</span><span class="op" id="6575911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6575918">&#34;user.key2&#34;</span><span class="op" id="6575929">:</span>&nbsp;<span class="string" id="6575931">&#34;value2&#34;</span><span class="op" id="6575939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6575946">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6576023">&#34;security.selinux&#34;</span><span class="op" id="6576041">:</span>&nbsp;<span class="string" id="6576043">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="6576083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576089">}</span><span class="op" id="6576090">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576095">}</span><span class="op" id="6576096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576107">Name</span><span class="op" id="6576111">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6576119">&#34;small2.txt&#34;</span><span class="op" id="6576131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576137">Mode</span><span class="op" id="6576141">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6576149">0644</span><span class="op" id="6576153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576159">Uid</span><span class="op" id="6576162">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6576171">1000</span><span class="op" id="6576175">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576181">Gid</span><span class="op" id="6576184">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6576193">10</span><span class="op" id="6576195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576201">Size</span><span class="op" id="6576205">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6576213">11</span><span class="op" id="6576215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576221">ModTime</span><span class="op" id="6576228">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6576233">time</span><span class="op" id="6576237">.</span><span class="ident" id="6576238">Unix</span><span class="op" id="6576242">(</span><span class="num" id="6576243">1386065770</span><span class="op" id="6576253">,</span>&nbsp;<span class="num" id="6576255">449252304</span><span class="op" id="6576264">)</span><span class="op" id="6576265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576271">Typeflag</span><span class="op" id="6576279">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6576283">&#39;0&#39;</span><span class="op" id="6576286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576292">Uname</span><span class="op" id="6576297">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6576304">&#34;alex&#34;</span><span class="op" id="6576310">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576316">Gname</span><span class="op" id="6576321">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6576328">&#34;wheel&#34;</span><span class="op" id="6576335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576341">AccessTime</span><span class="op" id="6576351">:</span>&nbsp;<span class="ident" id="6576353">time</span><span class="op" id="6576357">.</span><span class="ident" id="6576358">Unix</span><span class="op" id="6576362">(</span><span class="num" id="6576363">1389782991</span><span class="op" id="6576373">,</span>&nbsp;<span class="num" id="6576375">419875220</span><span class="op" id="6576384">)</span><span class="op" id="6576385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576391">ChangeTime</span><span class="op" id="6576401">:</span>&nbsp;<span class="ident" id="6576403">time</span><span class="op" id="6576407">.</span><span class="ident" id="6576408">Unix</span><span class="op" id="6576412">(</span><span class="num" id="6576413">1386065770</span><span class="op" id="6576423">,</span>&nbsp;<span class="num" id="6576425">449252304</span><span class="op" id="6576434">)</span><span class="op" id="6576435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576441">Xattrs</span><span class="op" id="6576447">:</span>&nbsp;<span class="keyword" id="6576449">map</span><span class="op" id="6576452">[</span><span class="builtintype" id="6576453">string</span><span class="op" id="6576459">]</span><span class="builtintype" id="6576460">string</span><span class="op" id="6576466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6576473">&#34;security.selinux&#34;</span><span class="op" id="6576491">:</span>&nbsp;<span class="string" id="6576493">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="6576533">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576539">}</span><span class="op" id="6576540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576545">}</span><span class="op" id="6576546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576550">}</span><span class="op" id="6576551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576554">}</span><span class="op" id="6576555">,</span><br>
<span class="lineno"></span><span class="op" id="6576557">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="6576560">func</span>&nbsp;<span class="ident" id="6576565">TestReader</span><span class="op" id="6576575">(</span><span class="ident" id="6576576">t</span>&nbsp;<span class="op" id="6576578">*</span><span class="ident" id="6576579">testing</span><span class="op" id="6576586">.</span><span class="ident" id="6576587">T</span><span class="op" id="6576588">)</span>&nbsp;<span class="op" id="6576590">{</span><br>
<span class="lineno"></span><span class="ident" id="6576592">testLoop</span><span class="op" id="6576600">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6576603">for</span>&nbsp;<span class="ident" id="6576607">i</span><span class="op" id="6576608">,</span>&nbsp;<span class="ident" id="6576610">test</span>&nbsp;<span class="op" id="6576615">:=</span>&nbsp;<span class="keyword" id="6576618">range</span>&nbsp;<span class="ident" id="6576624">untarTests</span>&nbsp;<span class="op" id="6576635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576639">f</span><span class="op" id="6576640">,</span>&nbsp;<span class="ident" id="6576642">err</span>&nbsp;<span class="op" id="6576646">:=</span>&nbsp;<span class="ident" id="6576649">os</span><span class="op" id="6576651">.</span><span class="ident" id="6576652">Open</span><span class="op" id="6576656">(</span><span class="ident" id="6576657">test</span><span class="op" id="6576661">.</span><span class="ident" id="6576662">file</span><span class="op" id="6576666">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6576670">if</span>&nbsp;<span class="ident" id="6576673">err</span>&nbsp;<span class="op" id="6576677">!=</span>&nbsp;<span class="ident" id="6576680">nil</span>&nbsp;<span class="op" id="6576684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576689">t</span><span class="op" id="6576690">.</span><span class="ident" id="6576691">Errorf</span><span class="op" id="6576697">(</span><span class="string" id="6576698">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6576729">,</span>&nbsp;<span class="ident" id="6576731">i</span><span class="op" id="6576732">,</span>&nbsp;<span class="ident" id="6576734">err</span><span class="op" id="6576737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6576742">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6576757">defer</span>&nbsp;<span class="ident" id="6576763">f</span><span class="op" id="6576764">.</span><span class="ident" id="6576765">Close</span><span class="op" id="6576770">(</span><span class="op" id="6576771">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576775">tr</span>&nbsp;<span class="op" id="6576778">:=</span>&nbsp;<span class="ident" id="6576781">NewReader</span><span class="op" id="6576790">(</span><span class="ident" id="6576791">f</span><span class="op" id="6576792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6576796">for</span>&nbsp;<span class="ident" id="6576800">j</span><span class="op" id="6576801">,</span>&nbsp;<span class="ident" id="6576803">header</span>&nbsp;<span class="op" id="6576810">:=</span>&nbsp;<span class="keyword" id="6576813">range</span>&nbsp;<span class="ident" id="6576819">test</span><span class="op" id="6576823">.</span><span class="ident" id="6576824">headers</span>&nbsp;<span class="op" id="6576832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576837">hdr</span><span class="op" id="6576840">,</span>&nbsp;<span class="ident" id="6576842">err</span>&nbsp;<span class="op" id="6576846">:=</span>&nbsp;<span class="ident" id="6576849">tr</span><span class="op" id="6576851">.</span><span class="ident" id="6576852">Next</span><span class="op" id="6576856">(</span><span class="op" id="6576857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6576862">if</span>&nbsp;<span class="ident" id="6576865">err</span>&nbsp;<span class="op" id="6576869">!=</span>&nbsp;<span class="ident" id="6576872">nil</span>&nbsp;<span class="op" id="6576876">||</span>&nbsp;<span class="ident" id="6576879">hdr</span>&nbsp;<span class="op" id="6576883">==</span>&nbsp;<span class="ident" id="6576886">nil</span>&nbsp;<span class="op" id="6576890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576896">t</span><span class="op" id="6576897">.</span><span class="ident" id="6576898">Errorf</span><span class="op" id="6576904">(</span><span class="string" id="6576905">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="6576946">,</span>&nbsp;<span class="ident" id="6576948">i</span><span class="op" id="6576949">,</span>&nbsp;<span class="ident" id="6576951">j</span><span class="op" id="6576952">,</span>&nbsp;<span class="ident" id="6576954">err</span><span class="op" id="6576957">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6576963">f</span><span class="op" id="6576964">.</span><span class="ident" id="6576965">Close</span><span class="op" id="6576970">(</span><span class="op" id="6576971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6576977">continue</span>&nbsp;<span class="ident" id="6576986">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6576998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577003">if</span>&nbsp;<span class="op" id="6577006">!</span><span class="ident" id="6577007">reflect</span><span class="op" id="6577014">.</span><span class="ident" id="6577015">DeepEqual</span><span class="op" id="6577024">(</span><span class="op" id="6577025">*</span><span class="ident" id="6577026">hdr</span><span class="op" id="6577029">,</span>&nbsp;<span class="op" id="6577031">*</span><span class="ident" id="6577032">header</span><span class="op" id="6577038">)</span>&nbsp;<span class="op" id="6577040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577046">t</span><span class="op" id="6577047">.</span><span class="ident" id="6577048">Errorf</span><span class="op" id="6577054">(</span><span class="string" id="6577055">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6577113">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577120">i</span><span class="op" id="6577121">,</span>&nbsp;<span class="ident" id="6577123">j</span><span class="op" id="6577124">,</span>&nbsp;<span class="op" id="6577126">*</span><span class="ident" id="6577127">hdr</span><span class="op" id="6577130">,</span>&nbsp;<span class="op" id="6577132">*</span><span class="ident" id="6577133">header</span><span class="op" id="6577139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577152">hdr</span><span class="op" id="6577155">,</span>&nbsp;<span class="ident" id="6577157">err</span>&nbsp;<span class="op" id="6577161">:=</span>&nbsp;<span class="ident" id="6577164">tr</span><span class="op" id="6577166">.</span><span class="ident" id="6577167">Next</span><span class="op" id="6577171">(</span><span class="op" id="6577172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577176">if</span>&nbsp;<span class="ident" id="6577179">err</span>&nbsp;<span class="op" id="6577183">==</span>&nbsp;<span class="ident" id="6577186">io</span><span class="op" id="6577188">.</span><span class="ident" id="6577189">EOF</span>&nbsp;<span class="op" id="6577193">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577198">continue</span>&nbsp;<span class="ident" id="6577207">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577222">if</span>&nbsp;<span class="ident" id="6577225">hdr</span>&nbsp;<span class="op" id="6577229">!=</span>&nbsp;<span class="ident" id="6577232">nil</span>&nbsp;<span class="op" id="6577236">||</span>&nbsp;<span class="ident" id="6577239">err</span>&nbsp;<span class="op" id="6577243">!=</span>&nbsp;<span class="ident" id="6577246">nil</span>&nbsp;<span class="op" id="6577250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577255">t</span><span class="op" id="6577256">.</span><span class="ident" id="6577257">Errorf</span><span class="op" id="6577263">(</span><span class="string" id="6577264">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="6577315">,</span>&nbsp;<span class="ident" id="6577317">i</span><span class="op" id="6577318">,</span>&nbsp;<span class="ident" id="6577320">hdr</span><span class="op" id="6577323">,</span>&nbsp;<span class="ident" id="6577325">err</span><span class="op" id="6577328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577332">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577335">}</span><br>
<span class="lineno"></span><span class="op" id="6577337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6577340">func</span>&nbsp;<span class="ident" id="6577345">TestPartialRead</span><span class="op" id="6577360">(</span><span class="ident" id="6577361">t</span>&nbsp;<span class="op" id="6577363">*</span><span class="ident" id="6577364">testing</span><span class="op" id="6577371">.</span><span class="ident" id="6577372">T</span><span class="op" id="6577373">)</span>&nbsp;<span class="op" id="6577375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577378">f</span><span class="op" id="6577379">,</span>&nbsp;<span class="ident" id="6577381">err</span>&nbsp;<span class="op" id="6577385">:=</span>&nbsp;<span class="ident" id="6577388">os</span><span class="op" id="6577390">.</span><span class="ident" id="6577391">Open</span><span class="op" id="6577395">(</span><span class="string" id="6577396">&#34;testdata/gnu.tar&#34;</span><span class="op" id="6577414">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577417">if</span>&nbsp;<span class="ident" id="6577420">err</span>&nbsp;<span class="op" id="6577424">!=</span>&nbsp;<span class="ident" id="6577427">nil</span>&nbsp;<span class="op" id="6577431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577435">t</span><span class="op" id="6577436">.</span><span class="ident" id="6577437">Fatalf</span><span class="op" id="6577443">(</span><span class="string" id="6577444">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6577466">,</span>&nbsp;<span class="ident" id="6577468">err</span><span class="op" id="6577471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577477">defer</span>&nbsp;<span class="ident" id="6577483">f</span><span class="op" id="6577484">.</span><span class="ident" id="6577485">Close</span><span class="op" id="6577490">(</span><span class="op" id="6577491">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577495">tr</span>&nbsp;<span class="op" id="6577498">:=</span>&nbsp;<span class="ident" id="6577501">NewReader</span><span class="op" id="6577510">(</span><span class="ident" id="6577511">f</span><span class="op" id="6577512">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6577516">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577581">hdr</span><span class="op" id="6577584">,</span>&nbsp;<span class="ident" id="6577586">err</span>&nbsp;<span class="op" id="6577590">:=</span>&nbsp;<span class="ident" id="6577593">tr</span><span class="op" id="6577595">.</span><span class="ident" id="6577596">Next</span><span class="op" id="6577600">(</span><span class="op" id="6577601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577604">if</span>&nbsp;<span class="ident" id="6577607">err</span>&nbsp;<span class="op" id="6577611">!=</span>&nbsp;<span class="ident" id="6577614">nil</span>&nbsp;<span class="op" id="6577618">||</span>&nbsp;<span class="ident" id="6577621">hdr</span>&nbsp;<span class="op" id="6577625">==</span>&nbsp;<span class="ident" id="6577628">nil</span>&nbsp;<span class="op" id="6577632">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577636">t</span><span class="op" id="6577637">.</span><span class="ident" id="6577638">Fatalf</span><span class="op" id="6577644">(</span><span class="string" id="6577645">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="6577672">,</span>&nbsp;<span class="ident" id="6577674">err</span><span class="op" id="6577677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577683">buf</span>&nbsp;<span class="op" id="6577687">:=</span>&nbsp;<span class="builtinfunc" id="6577690">make</span><span class="op" id="6577694">(</span><span class="op" id="6577695">[</span><span class="op" id="6577696">]</span><span class="builtintype" id="6577697">byte</span><span class="op" id="6577701">,</span>&nbsp;<span class="num" id="6577703">4</span><span class="op" id="6577704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577707">if</span>&nbsp;<span class="ident" id="6577710">_</span><span class="op" id="6577711">,</span>&nbsp;<span class="ident" id="6577713">err</span>&nbsp;<span class="op" id="6577717">:=</span>&nbsp;<span class="ident" id="6577720">io</span><span class="op" id="6577722">.</span><span class="ident" id="6577723">ReadFull</span><span class="op" id="6577731">(</span><span class="ident" id="6577732">tr</span><span class="op" id="6577734">,</span>&nbsp;<span class="ident" id="6577736">buf</span><span class="op" id="6577739">)</span><span class="op" id="6577740">;</span>&nbsp;<span class="ident" id="6577742">err</span>&nbsp;<span class="op" id="6577746">!=</span>&nbsp;<span class="ident" id="6577749">nil</span>&nbsp;<span class="op" id="6577753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577757">t</span><span class="op" id="6577758">.</span><span class="ident" id="6577759">Fatalf</span><span class="op" id="6577765">(</span><span class="string" id="6577766">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6577788">,</span>&nbsp;<span class="ident" id="6577790">err</span><span class="op" id="6577793">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577799">if</span>&nbsp;<span class="ident" id="6577802">expected</span>&nbsp;<span class="op" id="6577811">:=</span>&nbsp;<span class="op" id="6577814">[</span><span class="op" id="6577815">]</span><span class="builtintype" id="6577816">byte</span><span class="op" id="6577820">(</span><span class="string" id="6577821">&#34;Kilt&#34;</span><span class="op" id="6577827">)</span><span class="op" id="6577828">;</span>&nbsp;<span class="op" id="6577830">!</span><span class="ident" id="6577831">bytes</span><span class="op" id="6577836">.</span><span class="ident" id="6577837">Equal</span><span class="op" id="6577842">(</span><span class="ident" id="6577843">buf</span><span class="op" id="6577846">,</span>&nbsp;<span class="ident" id="6577848">expected</span><span class="op" id="6577856">)</span>&nbsp;<span class="op" id="6577858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577862">t</span><span class="op" id="6577863">.</span><span class="ident" id="6577864">Errorf</span><span class="op" id="6577870">(</span><span class="string" id="6577871">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6577895">,</span>&nbsp;<span class="ident" id="6577897">buf</span><span class="op" id="6577900">,</span>&nbsp;<span class="ident" id="6577902">expected</span><span class="op" id="6577910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6577913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6577917">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577933">hdr</span><span class="op" id="6577936">,</span>&nbsp;<span class="ident" id="6577938">err</span>&nbsp;<span class="op" id="6577942">=</span>&nbsp;<span class="ident" id="6577944">tr</span><span class="op" id="6577946">.</span><span class="ident" id="6577947">Next</span><span class="op" id="6577951">(</span><span class="op" id="6577952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6577955">if</span>&nbsp;<span class="ident" id="6577958">err</span>&nbsp;<span class="op" id="6577962">!=</span>&nbsp;<span class="ident" id="6577965">nil</span>&nbsp;<span class="op" id="6577969">||</span>&nbsp;<span class="ident" id="6577972">hdr</span>&nbsp;<span class="op" id="6577976">==</span>&nbsp;<span class="ident" id="6577979">nil</span>&nbsp;<span class="op" id="6577983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6577987">t</span><span class="op" id="6577988">.</span><span class="ident" id="6577989">Fatalf</span><span class="op" id="6577995">(</span><span class="string" id="6577996">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="6578024">,</span>&nbsp;<span class="ident" id="6578026">err</span><span class="op" id="6578029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6578032">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578035">buf</span>&nbsp;<span class="op" id="6578039">=</span>&nbsp;<span class="builtinfunc" id="6578041">make</span><span class="op" id="6578045">(</span><span class="op" id="6578046">[</span><span class="op" id="6578047">]</span><span class="builtintype" id="6578048">byte</span><span class="op" id="6578052">,</span>&nbsp;<span class="num" id="6578054">6</span><span class="op" id="6578055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6578058">if</span>&nbsp;<span class="ident" id="6578061">_</span><span class="op" id="6578062">,</span>&nbsp;<span class="ident" id="6578064">err</span>&nbsp;<span class="op" id="6578068">:=</span>&nbsp;<span class="ident" id="6578071">io</span><span class="op" id="6578073">.</span><span class="ident" id="6578074">ReadFull</span><span class="op" id="6578082">(</span><span class="ident" id="6578083">tr</span><span class="op" id="6578085">,</span>&nbsp;<span class="ident" id="6578087">buf</span><span class="op" id="6578090">)</span><span class="op" id="6578091">;</span>&nbsp;<span class="ident" id="6578093">err</span>&nbsp;<span class="op" id="6578097">!=</span>&nbsp;<span class="ident" id="6578100">nil</span>&nbsp;<span class="op" id="6578104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578108">t</span><span class="op" id="6578109">.</span><span class="ident" id="6578110">Fatalf</span><span class="op" id="6578116">(</span><span class="string" id="6578117">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6578139">,</span>&nbsp;<span class="ident" id="6578141">err</span><span class="op" id="6578144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6578147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6578150">if</span>&nbsp;<span class="ident" id="6578153">expected</span>&nbsp;<span class="op" id="6578162">:=</span>&nbsp;<span class="op" id="6578165">[</span><span class="op" id="6578166">]</span><span class="builtintype" id="6578167">byte</span><span class="op" id="6578171">(</span><span class="string" id="6578172">&#34;Google&#34;</span><span class="op" id="6578180">)</span><span class="op" id="6578181">;</span>&nbsp;<span class="op" id="6578183">!</span><span class="ident" id="6578184">bytes</span><span class="op" id="6578189">.</span><span class="ident" id="6578190">Equal</span><span class="op" id="6578195">(</span><span class="ident" id="6578196">buf</span><span class="op" id="6578199">,</span>&nbsp;<span class="ident" id="6578201">expected</span><span class="op" id="6578209">)</span>&nbsp;<span class="op" id="6578211">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578215">t</span><span class="op" id="6578216">.</span><span class="ident" id="6578217">Errorf</span><span class="op" id="6578223">(</span><span class="string" id="6578224">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6578248">,</span>&nbsp;<span class="ident" id="6578250">buf</span><span class="op" id="6578253">,</span>&nbsp;<span class="ident" id="6578255">expected</span><span class="op" id="6578263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6578266">}</span><br>
<span class="lineno"></span><span class="op" id="6578268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6578271">func</span>&nbsp;<span class="ident" id="6578276">TestIncrementalRead</span><span class="op" id="6578295">(</span><span class="ident" id="6578296">t</span>&nbsp;<span class="op" id="6578298">*</span><span class="ident" id="6578299">testing</span><span class="op" id="6578306">.</span><span class="ident" id="6578307">T</span><span class="op" id="6578308">)</span>&nbsp;<span class="op" id="6578310">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578313">test</span>&nbsp;<span class="op" id="6578318">:=</span>&nbsp;<span class="ident" id="6578321">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578333">f</span><span class="op" id="6578334">,</span>&nbsp;<span class="ident" id="6578336">err</span>&nbsp;<span class="op" id="6578340">:=</span>&nbsp;<span class="ident" id="6578343">os</span><span class="op" id="6578345">.</span><span class="ident" id="6578346">Open</span><span class="op" id="6578350">(</span><span class="ident" id="6578351">test</span><span class="op" id="6578355">.</span><span class="ident" id="6578356">file</span><span class="op" id="6578360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6578363">if</span>&nbsp;<span class="ident" id="6578366">err</span>&nbsp;<span class="op" id="6578370">!=</span>&nbsp;<span class="ident" id="6578373">nil</span>&nbsp;<span class="op" id="6578377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578381">t</span><span class="op" id="6578382">.</span><span class="ident" id="6578383">Fatalf</span><span class="op" id="6578389">(</span><span class="string" id="6578390">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6578412">,</span>&nbsp;<span class="ident" id="6578414">err</span><span class="op" id="6578417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6578420">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6578423">defer</span>&nbsp;<span class="ident" id="6578429">f</span><span class="op" id="6578430">.</span><span class="ident" id="6578431">Close</span><span class="op" id="6578436">(</span><span class="op" id="6578437">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578441">tr</span>&nbsp;<span class="op" id="6578444">:=</span>&nbsp;<span class="ident" id="6578447">NewReader</span><span class="op" id="6578456">(</span><span class="ident" id="6578457">f</span><span class="op" id="6578458">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578462">headers</span>&nbsp;<span class="op" id="6578470">:=</span>&nbsp;<span class="ident" id="6578473">test</span><span class="op" id="6578477">.</span><span class="ident" id="6578478">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578487">cksums</span>&nbsp;<span class="op" id="6578494">:=</span>&nbsp;<span class="ident" id="6578497">test</span><span class="op" id="6578501">.</span><span class="ident" id="6578502">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578510">nread</span>&nbsp;<span class="op" id="6578516">:=</span>&nbsp;<span class="num" id="6578519">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6578523">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6578547">for</span>&nbsp;<span class="op" id="6578551">;</span>&nbsp;<span class="op" id="6578553">;</span>&nbsp;<span class="ident" id="6578555">nread</span><span class="op" id="6578560">++</span>&nbsp;<span class="op" id="6578563">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578567">hdr</span><span class="op" id="6578570">,</span>&nbsp;<span class="ident" id="6578572">err</span>&nbsp;<span class="op" id="6578576">:=</span>&nbsp;<span class="ident" id="6578579">tr</span><span class="op" id="6578581">.</span><span class="ident" id="6578582">Next</span><span class="op" id="6578586">(</span><span class="op" id="6578587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6578591">if</span>&nbsp;<span class="ident" id="6578594">hdr</span>&nbsp;<span class="op" id="6578598">==</span>&nbsp;<span class="ident" id="6578601">nil</span>&nbsp;<span class="op" id="6578605">||</span>&nbsp;<span class="ident" id="6578608">err</span>&nbsp;<span class="op" id="6578612">==</span>&nbsp;<span class="ident" id="6578615">io</span><span class="op" id="6578617">.</span><span class="ident" id="6578618">EOF</span>&nbsp;<span class="op" id="6578622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6578627">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6578635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6578640">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6578662">if</span>&nbsp;<span class="op" id="6578665">!</span><span class="ident" id="6578666">reflect</span><span class="op" id="6578673">.</span><span class="ident" id="6578674">DeepEqual</span><span class="op" id="6578683">(</span><span class="op" id="6578684">*</span><span class="ident" id="6578685">hdr</span><span class="op" id="6578688">,</span>&nbsp;<span class="op" id="6578690">*</span><span class="ident" id="6578691">headers</span><span class="op" id="6578698">[</span><span class="ident" id="6578699">nread</span><span class="op" id="6578704">]</span><span class="op" id="6578705">)</span>&nbsp;<span class="op" id="6578707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578712">t</span><span class="op" id="6578713">.</span><span class="ident" id="6578714">Errorf</span><span class="op" id="6578720">(</span><span class="string" id="6578721">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6578760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6578766">*</span><span class="ident" id="6578767">hdr</span><span class="op" id="6578770">,</span>&nbsp;<span class="ident" id="6578772">headers</span><span class="op" id="6578779">[</span><span class="ident" id="6578780">nread</span><span class="op" id="6578785">]</span><span class="op" id="6578786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6578790">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6578795">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6578841">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578871">h</span>&nbsp;<span class="op" id="6578873">:=</span>&nbsp;<span class="ident" id="6578876">md5</span><span class="op" id="6578879">.</span><span class="ident" id="6578880">New</span><span class="op" id="6578883">(</span><span class="op" id="6578884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578888">rdbuf</span>&nbsp;<span class="op" id="6578894">:=</span>&nbsp;<span class="builtinfunc" id="6578897">make</span><span class="op" id="6578901">(</span><span class="op" id="6578902">[</span><span class="op" id="6578903">]</span><span class="builtintype" id="6578904">uint8</span><span class="op" id="6578909">,</span>&nbsp;<span class="num" id="6578911">8</span><span class="op" id="6578912">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6578916">for</span>&nbsp;<span class="op" id="6578920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578925">nr</span><span class="op" id="6578927">,</span>&nbsp;<span class="ident" id="6578929">err</span>&nbsp;<span class="op" id="6578933">:=</span>&nbsp;<span class="ident" id="6578936">tr</span><span class="op" id="6578938">.</span><span class="ident" id="6578939">Read</span><span class="op" id="6578943">(</span><span class="ident" id="6578944">rdbuf</span><span class="op" id="6578949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6578954">if</span>&nbsp;<span class="ident" id="6578957">err</span>&nbsp;<span class="op" id="6578961">==</span>&nbsp;<span class="ident" id="6578964">io</span><span class="op" id="6578966">.</span><span class="ident" id="6578967">EOF</span>&nbsp;<span class="op" id="6578971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6578977">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6578986">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6578991">if</span>&nbsp;<span class="ident" id="6578994">err</span>&nbsp;<span class="op" id="6578998">!=</span>&nbsp;<span class="ident" id="6579001">nil</span>&nbsp;<span class="op" id="6579005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579011">t</span><span class="op" id="6579012">.</span><span class="ident" id="6579013">Errorf</span><span class="op" id="6579019">(</span><span class="string" id="6579020">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6579049">,</span>&nbsp;<span class="ident" id="6579051">err</span><span class="op" id="6579054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6579060">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6579069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579074">h</span><span class="op" id="6579075">.</span><span class="ident" id="6579076">Write</span><span class="op" id="6579081">(</span><span class="ident" id="6579082">rdbuf</span><span class="op" id="6579087">[</span><span class="num" id="6579088">0</span><span class="op" id="6579089">:</span><span class="ident" id="6579090">nr</span><span class="op" id="6579092">]</span><span class="op" id="6579093">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6579097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6579101">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579122">have</span>&nbsp;<span class="op" id="6579127">:=</span>&nbsp;<span class="ident" id="6579130">fmt</span><span class="op" id="6579133">.</span><span class="ident" id="6579134">Sprintf</span><span class="op" id="6579141">(</span><span class="string" id="6579142">&#34;%x&#34;</span><span class="op" id="6579146">,</span>&nbsp;<span class="ident" id="6579148">h</span><span class="op" id="6579149">.</span><span class="ident" id="6579150">Sum</span><span class="op" id="6579153">(</span><span class="ident" id="6579154">nil</span><span class="op" id="6579157">)</span><span class="op" id="6579158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579162">want</span>&nbsp;<span class="op" id="6579167">:=</span>&nbsp;<span class="ident" id="6579170">cksums</span><span class="op" id="6579176">[</span><span class="ident" id="6579177">nread</span><span class="op" id="6579182">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6579186">if</span>&nbsp;<span class="ident" id="6579189">want</span>&nbsp;<span class="op" id="6579194">!=</span>&nbsp;<span class="ident" id="6579197">have</span>&nbsp;<span class="op" id="6579202">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579207">t</span><span class="op" id="6579208">.</span><span class="ident" id="6579209">Errorf</span><span class="op" id="6579215">(</span><span class="string" id="6579216">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6579262">,</span>&nbsp;<span class="ident" id="6579264">hdr</span><span class="op" id="6579267">.</span><span class="ident" id="6579268">Name</span><span class="op" id="6579272">,</span>&nbsp;<span class="ident" id="6579274">have</span><span class="op" id="6579278">,</span>&nbsp;<span class="ident" id="6579280">want</span><span class="op" id="6579284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6579288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6579291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6579294">if</span>&nbsp;<span class="ident" id="6579297">nread</span>&nbsp;<span class="op" id="6579303">!=</span>&nbsp;<span class="builtinfunc" id="6579306">len</span><span class="op" id="6579309">(</span><span class="ident" id="6579310">headers</span><span class="op" id="6579317">)</span>&nbsp;<span class="op" id="6579319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579323">t</span><span class="op" id="6579324">.</span><span class="ident" id="6579325">Errorf</span><span class="op" id="6579331">(</span><span class="string" id="6579332">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6579388">,</span>&nbsp;<span class="builtinfunc" id="6579390">len</span><span class="op" id="6579393">(</span><span class="ident" id="6579394">headers</span><span class="op" id="6579401">)</span><span class="op" id="6579402">,</span>&nbsp;<span class="ident" id="6579404">nread</span><span class="op" id="6579409">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6579412">}</span><br>
<span class="lineno"></span><span class="op" id="6579414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6579417">func</span>&nbsp;<span class="ident" id="6579422">TestNonSeekable</span><span class="op" id="6579437">(</span><span class="ident" id="6579438">t</span>&nbsp;<span class="op" id="6579440">*</span><span class="ident" id="6579441">testing</span><span class="op" id="6579448">.</span><span class="ident" id="6579449">T</span><span class="op" id="6579450">)</span>&nbsp;<span class="op" id="6579452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579455">test</span>&nbsp;<span class="op" id="6579460">:=</span>&nbsp;<span class="ident" id="6579463">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579475">f</span><span class="op" id="6579476">,</span>&nbsp;<span class="ident" id="6579478">err</span>&nbsp;<span class="op" id="6579482">:=</span>&nbsp;<span class="ident" id="6579485">os</span><span class="op" id="6579487">.</span><span class="ident" id="6579488">Open</span><span class="op" id="6579492">(</span><span class="ident" id="6579493">test</span><span class="op" id="6579497">.</span><span class="ident" id="6579498">file</span><span class="op" id="6579502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6579505">if</span>&nbsp;<span class="ident" id="6579508">err</span>&nbsp;<span class="op" id="6579512">!=</span>&nbsp;<span class="ident" id="6579515">nil</span>&nbsp;<span class="op" id="6579519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579523">t</span><span class="op" id="6579524">.</span><span class="ident" id="6579525">Fatalf</span><span class="op" id="6579531">(</span><span class="string" id="6579532">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6579554">,</span>&nbsp;<span class="ident" id="6579556">err</span><span class="op" id="6579559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6579562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6579565">defer</span>&nbsp;<span class="ident" id="6579571">f</span><span class="op" id="6579572">.</span><span class="ident" id="6579573">Close</span><span class="op" id="6579578">(</span><span class="op" id="6579579">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6579583">type</span>&nbsp;<span class="ident" id="6579588">readerOnly</span>&nbsp;<span class="keyword" id="6579599">struct</span>&nbsp;<span class="op" id="6579606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579610">io</span><span class="op" id="6579612">.</span><span class="ident" id="6579613">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6579621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579624">tr</span>&nbsp;<span class="op" id="6579627">:=</span>&nbsp;<span class="ident" id="6579630">NewReader</span><span class="op" id="6579639">(</span><span class="ident" id="6579640">readerOnly</span><span class="op" id="6579650">{</span><span class="ident" id="6579651">f</span><span class="op" id="6579652">}</span><span class="op" id="6579653">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579656">nread</span>&nbsp;<span class="op" id="6579662">:=</span>&nbsp;<span class="num" id="6579665">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6579669">for</span>&nbsp;<span class="op" id="6579673">;</span>&nbsp;<span class="op" id="6579675">;</span>&nbsp;<span class="ident" id="6579677">nread</span><span class="op" id="6579682">++</span>&nbsp;<span class="op" id="6579685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579689">_</span><span class="op" id="6579690">,</span>&nbsp;<span class="ident" id="6579692">err</span>&nbsp;<span class="op" id="6579696">:=</span>&nbsp;<span class="ident" id="6579699">tr</span><span class="op" id="6579701">.</span><span class="ident" id="6579702">Next</span><span class="op" id="6579706">(</span><span class="op" id="6579707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6579711">if</span>&nbsp;<span class="ident" id="6579714">err</span>&nbsp;<span class="op" id="6579718">==</span>&nbsp;<span class="ident" id="6579721">io</span><span class="op" id="6579723">.</span><span class="ident" id="6579724">EOF</span>&nbsp;<span class="op" id="6579728">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6579733">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6579741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6579745">if</span>&nbsp;<span class="ident" id="6579748">err</span>&nbsp;<span class="op" id="6579752">!=</span>&nbsp;<span class="ident" id="6579755">nil</span>&nbsp;<span class="op" id="6579759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579764">t</span><span class="op" id="6579765">.</span><span class="ident" id="6579766">Fatalf</span><span class="op" id="6579772">(</span><span class="string" id="6579773">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6579795">,</span>&nbsp;<span class="ident" id="6579797">err</span><span class="op" id="6579800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6579804">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6579807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6579811">if</span>&nbsp;<span class="ident" id="6579814">nread</span>&nbsp;<span class="op" id="6579820">!=</span>&nbsp;<span class="builtinfunc" id="6579823">len</span><span class="op" id="6579826">(</span><span class="ident" id="6579827">test</span><span class="op" id="6579831">.</span><span class="ident" id="6579832">headers</span><span class="op" id="6579839">)</span>&nbsp;<span class="op" id="6579841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579845">t</span><span class="op" id="6579846">.</span><span class="ident" id="6579847">Errorf</span><span class="op" id="6579853">(</span><span class="string" id="6579854">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6579910">,</span>&nbsp;<span class="builtinfunc" id="6579912">len</span><span class="op" id="6579915">(</span><span class="ident" id="6579916">test</span><span class="op" id="6579920">.</span><span class="ident" id="6579921">headers</span><span class="op" id="6579928">)</span><span class="op" id="6579929">,</span>&nbsp;<span class="ident" id="6579931">nread</span><span class="op" id="6579936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6579939">}</span><br>
<span class="lineno">440</span><span class="op" id="6579941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6579944">func</span>&nbsp;<span class="ident" id="6579949">TestParsePAXHeader</span><span class="op" id="6579967">(</span><span class="ident" id="6579968">t</span>&nbsp;<span class="op" id="6579970">*</span><span class="ident" id="6579971">testing</span><span class="op" id="6579978">.</span><span class="ident" id="6579979">T</span><span class="op" id="6579980">)</span>&nbsp;<span class="op" id="6579982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6579985">paxTests</span>&nbsp;<span class="op" id="6579994">:=</span>&nbsp;<span class="op" id="6579997">[</span><span class="op" id="6579998">]</span><span class="op" id="6579999">[</span><span class="num" id="6580000">3</span><span class="op" id="6580001">]</span><span class="builtintype" id="6580002">string</span><span class="op" id="6580008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6580012">{</span><span class="string" id="6580013">&#34;a&#34;</span><span class="op" id="6580016">,</span>&nbsp;<span class="string" id="6580018">&#34;a=name&#34;</span><span class="op" id="6580026">,</span>&nbsp;<span class="string" id="6580028">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="6580041">}</span><span class="op" id="6580042">,</span>&nbsp;<span class="comment" id="6580044">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6580097">{</span><span class="string" id="6580098">&#34;a&#34;</span><span class="op" id="6580101">,</span>&nbsp;<span class="string" id="6580103">&#34;a=name&#34;</span><span class="op" id="6580111">,</span>&nbsp;<span class="string" id="6580113">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="6580125">}</span><span class="op" id="6580126">,</span>&nbsp;&nbsp;<span class="comment" id="6580129">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6580181">{</span><span class="string" id="6580182">&#34;mtime&#34;</span><span class="op" id="6580189">,</span>&nbsp;<span class="string" id="6580191">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="6580219">,</span>&nbsp;<span class="string" id="6580221">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="6580254">}</span><span class="op" id="6580255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6580258">for</span>&nbsp;<span class="ident" id="6580262">_</span><span class="op" id="6580263">,</span>&nbsp;<span class="ident" id="6580265">test</span>&nbsp;<span class="op" id="6580270">:=</span>&nbsp;<span class="keyword" id="6580273">range</span>&nbsp;<span class="ident" id="6580279">paxTests</span>&nbsp;<span class="op" id="6580288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6580292">key</span><span class="op" id="6580295">,</span>&nbsp;<span class="ident" id="6580297">expected</span><span class="op" id="6580305">,</span>&nbsp;<span class="ident" id="6580307">raw</span>&nbsp;<span class="op" id="6580311">:=</span>&nbsp;<span class="ident" id="6580314">test</span><span class="op" id="6580318">[</span><span class="num" id="6580319">0</span><span class="op" id="6580320">]</span><span class="op" id="6580321">,</span>&nbsp;<span class="ident" id="6580323">test</span><span class="op" id="6580327">[</span><span class="num" id="6580328">1</span><span class="op" id="6580329">]</span><span class="op" id="6580330">,</span>&nbsp;<span class="ident" id="6580332">test</span><span class="op" id="6580336">[</span><span class="num" id="6580337">2</span><span class="op" id="6580338">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6580342">reader</span>&nbsp;<span class="op" id="6580349">:=</span>&nbsp;<span class="ident" id="6580352">bytes</span><span class="op" id="6580357">.</span><span class="ident" id="6580358">NewReader</span><span class="op" id="6580367">(</span><span class="op" id="6580368">[</span><span class="op" id="6580369">]</span><span class="builtintype" id="6580370">byte</span><span class="op" id="6580374">(</span><span class="ident" id="6580375">raw</span><span class="op" id="6580378">)</span><span class="op" id="6580379">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6580383">headers</span><span class="op" id="6580390">,</span>&nbsp;<span class="ident" id="6580392">err</span>&nbsp;<span class="op" id="6580396">:=</span>&nbsp;<span class="ident" id="6580399">parsePAX</span><span class="op" id="6580407">(</span><span class="ident" id="6580408">reader</span><span class="op" id="6580414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6580418">if</span>&nbsp;<span class="ident" id="6580421">err</span>&nbsp;<span class="op" id="6580425">!=</span>&nbsp;<span class="ident" id="6580428">nil</span>&nbsp;<span class="op" id="6580432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6580437">t</span><span class="op" id="6580438">.</span><span class="ident" id="6580439">Errorf</span><span class="op" id="6580445">(</span><span class="string" id="6580446">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="6580494">,</span>&nbsp;<span class="ident" id="6580496">err</span><span class="op" id="6580499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6580504">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6580515">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6580519">if</span>&nbsp;<span class="ident" id="6580522">strings</span><span class="op" id="6580529">.</span><span class="ident" id="6580530">EqualFold</span><span class="op" id="6580539">(</span><span class="ident" id="6580540">headers</span><span class="op" id="6580547">[</span><span class="ident" id="6580548">key</span><span class="op" id="6580551">]</span><span class="op" id="6580552">,</span>&nbsp;<span class="ident" id="6580554">expected</span><span class="op" id="6580562">)</span>&nbsp;<span class="op" id="6580564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6580569">t</span><span class="op" id="6580570">.</span><span class="ident" id="6580571">Errorf</span><span class="op" id="6580577">(</span><span class="string" id="6580578">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="6580630">,</span>&nbsp;<span class="ident" id="6580632">headers</span><span class="op" id="6580639">[</span><span class="ident" id="6580640">key</span><span class="op" id="6580643">]</span><span class="op" id="6580644">,</span>&nbsp;<span class="ident" id="6580646">expected</span><span class="op" id="6580654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6580659">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6580670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6580674">trailer</span>&nbsp;<span class="op" id="6580682">:=</span>&nbsp;<span class="builtinfunc" id="6580685">make</span><span class="op" id="6580689">(</span><span class="op" id="6580690">[</span><span class="op" id="6580691">]</span><span class="builtintype" id="6580692">byte</span><span class="op" id="6580696">,</span>&nbsp;<span class="num" id="6580698">100</span><span class="op" id="6580701">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6580705">n</span><span class="op" id="6580706">,</span>&nbsp;<span class="ident" id="6580708">err</span>&nbsp;<span class="op" id="6580712">:=</span>&nbsp;<span class="ident" id="6580715">reader</span><span class="op" id="6580721">.</span><span class="ident" id="6580722">Read</span><span class="op" id="6580726">(</span><span class="ident" id="6580727">trailer</span><span class="op" id="6580734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6580738">if</span>&nbsp;<span class="ident" id="6580741">err</span>&nbsp;<span class="op" id="6580745">!=</span>&nbsp;<span class="ident" id="6580748">io</span><span class="op" id="6580750">.</span><span class="ident" id="6580751">EOF</span>&nbsp;<span class="op" id="6580755">||</span>&nbsp;<span class="ident" id="6580758">n</span>&nbsp;<span class="op" id="6580760">!=</span>&nbsp;<span class="num" id="6580763">0</span>&nbsp;<span class="op" id="6580765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6580770">t</span><span class="op" id="6580771">.</span><span class="ident" id="6580772">Error</span><span class="op" id="6580777">(</span><span class="string" id="6580778">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="6580802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6580806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6580809">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6580812">badHeader</span>&nbsp;<span class="op" id="6580822">:=</span>&nbsp;<span class="ident" id="6580825">bytes</span><span class="op" id="6580830">.</span><span class="ident" id="6580831">NewReader</span><span class="op" id="6580840">(</span><span class="op" id="6580841">[</span><span class="op" id="6580842">]</span><span class="builtintype" id="6580843">byte</span><span class="op" id="6580847">(</span><span class="string" id="6580848">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="6580864">)</span><span class="op" id="6580865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6580868">if</span>&nbsp;<span class="ident" id="6580871">_</span><span class="op" id="6580872">,</span>&nbsp;<span class="ident" id="6580874">err</span>&nbsp;<span class="op" id="6580878">:=</span>&nbsp;<span class="ident" id="6580881">parsePAX</span><span class="op" id="6580889">(</span><span class="ident" id="6580890">badHeader</span><span class="op" id="6580899">)</span><span class="op" id="6580900">;</span>&nbsp;<span class="ident" id="6580902">err</span>&nbsp;<span class="op" id="6580906">!=</span>&nbsp;<span class="ident" id="6580909">ErrHeader</span>&nbsp;<span class="op" id="6580919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6580923">t</span><span class="op" id="6580924">.</span><span class="ident" id="6580925">Fatal</span><span class="op" id="6580930">(</span><span class="string" id="6580931">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="6580975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6580978">}</span><br>
<span class="lineno"></span><span class="op" id="6580980">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="6580983">func</span>&nbsp;<span class="ident" id="6580988">TestParsePAXTime</span><span class="op" id="6581004">(</span><span class="ident" id="6581005">t</span>&nbsp;<span class="op" id="6581007">*</span><span class="ident" id="6581008">testing</span><span class="op" id="6581015">.</span><span class="ident" id="6581016">T</span><span class="op" id="6581017">)</span>&nbsp;<span class="op" id="6581019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6581022">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6581053">timestamps</span>&nbsp;<span class="op" id="6581064">:=</span>&nbsp;<span class="keyword" id="6581067">map</span><span class="op" id="6581070">[</span><span class="builtintype" id="6581071">string</span><span class="op" id="6581077">]</span><span class="ident" id="6581078">time</span><span class="op" id="6581082">.</span><span class="ident" id="6581083">Time</span><span class="op" id="6581087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6581091">&#34;1350244992.023960108&#34;</span><span class="op" id="6581113">:</span>&nbsp;&nbsp;<span class="ident" id="6581116">time</span><span class="op" id="6581120">.</span><span class="ident" id="6581121">Unix</span><span class="op" id="6581125">(</span><span class="num" id="6581126">1350244992</span><span class="op" id="6581136">,</span>&nbsp;<span class="num" id="6581138">23960108</span><span class="op" id="6581146">)</span><span class="op" id="6581147">,</span>&nbsp;<span class="comment" id="6581149">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6581170">&#34;1350244992.02396010&#34;</span><span class="op" id="6581191">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6581195">time</span><span class="op" id="6581199">.</span><span class="ident" id="6581200">Unix</span><span class="op" id="6581204">(</span><span class="num" id="6581205">1350244992</span><span class="op" id="6581215">,</span>&nbsp;<span class="num" id="6581217">23960100</span><span class="op" id="6581225">)</span><span class="op" id="6581226">,</span>&nbsp;<span class="comment" id="6581228">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6581255">&#34;1350244992.0239601089&#34;</span><span class="op" id="6581278">:</span>&nbsp;<span class="ident" id="6581280">time</span><span class="op" id="6581284">.</span><span class="ident" id="6581285">Unix</span><span class="op" id="6581289">(</span><span class="num" id="6581290">1350244992</span><span class="op" id="6581300">,</span>&nbsp;<span class="num" id="6581302">23960108</span><span class="op" id="6581310">)</span><span class="op" id="6581311">,</span>&nbsp;<span class="comment" id="6581313">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6581341">&#34;1350244992&#34;</span><span class="op" id="6581353">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6581366">time</span><span class="op" id="6581370">.</span><span class="ident" id="6581371">Unix</span><span class="op" id="6581375">(</span><span class="num" id="6581376">1350244992</span><span class="op" id="6581386">,</span>&nbsp;<span class="num" id="6581388">0</span><span class="op" id="6581389">)</span><span class="op" id="6581390">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6581399">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6581423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6581426">for</span>&nbsp;<span class="ident" id="6581430">input</span><span class="op" id="6581435">,</span>&nbsp;<span class="ident" id="6581437">expected</span>&nbsp;<span class="op" id="6581446">:=</span>&nbsp;<span class="keyword" id="6581449">range</span>&nbsp;<span class="ident" id="6581455">timestamps</span>&nbsp;<span class="op" id="6581466">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6581470">ts</span><span class="op" id="6581472">,</span>&nbsp;<span class="ident" id="6581474">err</span>&nbsp;<span class="op" id="6581478">:=</span>&nbsp;<span class="ident" id="6581481">parsePAXTime</span><span class="op" id="6581493">(</span><span class="ident" id="6581494">input</span><span class="op" id="6581499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6581503">if</span>&nbsp;<span class="ident" id="6581506">err</span>&nbsp;<span class="op" id="6581510">!=</span>&nbsp;<span class="ident" id="6581513">nil</span>&nbsp;<span class="op" id="6581517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6581522">t</span><span class="op" id="6581523">.</span><span class="ident" id="6581524">Fatal</span><span class="op" id="6581529">(</span><span class="ident" id="6581530">err</span><span class="op" id="6581533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6581537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6581541">if</span>&nbsp;<span class="op" id="6581544">!</span><span class="ident" id="6581545">ts</span><span class="op" id="6581547">.</span><span class="ident" id="6581548">Equal</span><span class="op" id="6581553">(</span><span class="ident" id="6581554">expected</span><span class="op" id="6581562">)</span>&nbsp;<span class="op" id="6581564">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6581569">t</span><span class="op" id="6581570">.</span><span class="ident" id="6581571">Fatalf</span><span class="op" id="6581577">(</span><span class="string" id="6581578">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="6581606">,</span>&nbsp;<span class="ident" id="6581608">ts</span><span class="op" id="6581610">,</span>&nbsp;<span class="ident" id="6581612">expected</span><span class="op" id="6581620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6581624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6581627">}</span><br>
<span class="lineno"></span><span class="op" id="6581629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="6581632">func</span>&nbsp;<span class="ident" id="6581637">TestMergePAX</span><span class="op" id="6581649">(</span><span class="ident" id="6581650">t</span>&nbsp;<span class="op" id="6581652">*</span><span class="ident" id="6581653">testing</span><span class="op" id="6581660">.</span><span class="ident" id="6581661">T</span><span class="op" id="6581662">)</span>&nbsp;<span class="op" id="6581664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6581667">hdr</span>&nbsp;<span class="op" id="6581671">:=</span>&nbsp;<span class="builtinfunc" id="6581674">new</span><span class="op" id="6581677">(</span><span class="ident" id="6581678">Header</span><span class="op" id="6581684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6581687">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6581737">headers</span>&nbsp;<span class="op" id="6581745">:=</span>&nbsp;<span class="keyword" id="6581748">map</span><span class="op" id="6581751">[</span><span class="builtintype" id="6581752">string</span><span class="op" id="6581758">]</span><span class="builtintype" id="6581759">string</span><span class="op" id="6581765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6581769">&#34;path&#34;</span><span class="op" id="6581775">:</span>&nbsp;&nbsp;<span class="string" id="6581778">&#34;a/b/c&#34;</span><span class="op" id="6581785">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6581789">&#34;uid&#34;</span><span class="op" id="6581794">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6581798">&#34;1000&#34;</span><span class="op" id="6581804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6581808">&#34;mtime&#34;</span><span class="op" id="6581815">:</span>&nbsp;<span class="string" id="6581817">&#34;1350244992.023960108&#34;</span><span class="op" id="6581839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6581842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6581845">err</span>&nbsp;<span class="op" id="6581849">:=</span>&nbsp;<span class="ident" id="6581852">mergePAX</span><span class="op" id="6581860">(</span><span class="ident" id="6581861">hdr</span><span class="op" id="6581864">,</span>&nbsp;<span class="ident" id="6581866">headers</span><span class="op" id="6581873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6581876">if</span>&nbsp;<span class="ident" id="6581879">err</span>&nbsp;<span class="op" id="6581883">!=</span>&nbsp;<span class="ident" id="6581886">nil</span>&nbsp;<span class="op" id="6581890">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6581894">t</span><span class="op" id="6581895">.</span><span class="ident" id="6581896">Fatal</span><span class="op" id="6581901">(</span><span class="ident" id="6581902">err</span><span class="op" id="6581905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6581908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6581911">want</span>&nbsp;<span class="op" id="6581916">:=</span>&nbsp;<span class="op" id="6581919">&amp;</span><span class="ident" id="6581920">Header</span><span class="op" id="6581926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6581930">Name</span><span class="op" id="6581934">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6581939">&#34;a/b/c&#34;</span><span class="op" id="6581946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6581950">Uid</span><span class="op" id="6581953">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6581959">1000</span><span class="op" id="6581963">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6581967">ModTime</span><span class="op" id="6581974">:</span>&nbsp;<span class="ident" id="6581976">time</span><span class="op" id="6581980">.</span><span class="ident" id="6581981">Unix</span><span class="op" id="6581985">(</span><span class="num" id="6581986">1350244992</span><span class="op" id="6581996">,</span>&nbsp;<span class="num" id="6581998">23960108</span><span class="op" id="6582006">)</span><span class="op" id="6582007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6582010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6582013">if</span>&nbsp;<span class="op" id="6582016">!</span><span class="ident" id="6582017">reflect</span><span class="op" id="6582024">.</span><span class="ident" id="6582025">DeepEqual</span><span class="op" id="6582034">(</span><span class="ident" id="6582035">hdr</span><span class="op" id="6582038">,</span>&nbsp;<span class="ident" id="6582040">want</span><span class="op" id="6582044">)</span>&nbsp;<span class="op" id="6582046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582050">t</span><span class="op" id="6582051">.</span><span class="ident" id="6582052">Errorf</span><span class="op" id="6582058">(</span><span class="string" id="6582059">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="6582095">,</span>&nbsp;<span class="ident" id="6582097">hdr</span><span class="op" id="6582100">,</span>&nbsp;<span class="ident" id="6582102">want</span><span class="op" id="6582106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6582109">}</span><br>
<span class="lineno">510</span><span class="op" id="6582111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6582114">func</span>&nbsp;<span class="ident" id="6582119">TestSparseEndToEnd</span><span class="op" id="6582137">(</span><span class="ident" id="6582138">t</span>&nbsp;<span class="op" id="6582140">*</span><span class="ident" id="6582141">testing</span><span class="op" id="6582148">.</span><span class="ident" id="6582149">T</span><span class="op" id="6582150">)</span>&nbsp;<span class="op" id="6582152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582155">test</span>&nbsp;<span class="op" id="6582160">:=</span>&nbsp;<span class="ident" id="6582163">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582178">f</span><span class="op" id="6582179">,</span>&nbsp;<span class="ident" id="6582181">err</span>&nbsp;<span class="op" id="6582185">:=</span>&nbsp;<span class="ident" id="6582188">os</span><span class="op" id="6582190">.</span><span class="ident" id="6582191">Open</span><span class="op" id="6582195">(</span><span class="ident" id="6582196">test</span><span class="op" id="6582200">.</span><span class="ident" id="6582201">file</span><span class="op" id="6582205">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6582208">if</span>&nbsp;<span class="ident" id="6582211">err</span>&nbsp;<span class="op" id="6582215">!=</span>&nbsp;<span class="ident" id="6582218">nil</span>&nbsp;<span class="op" id="6582222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582226">t</span><span class="op" id="6582227">.</span><span class="ident" id="6582228">Fatalf</span><span class="op" id="6582234">(</span><span class="string" id="6582235">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6582257">,</span>&nbsp;<span class="ident" id="6582259">err</span><span class="op" id="6582262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6582265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6582268">defer</span>&nbsp;<span class="ident" id="6582274">f</span><span class="op" id="6582275">.</span><span class="ident" id="6582276">Close</span><span class="op" id="6582281">(</span><span class="op" id="6582282">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582286">tr</span>&nbsp;<span class="op" id="6582289">:=</span>&nbsp;<span class="ident" id="6582292">NewReader</span><span class="op" id="6582301">(</span><span class="ident" id="6582302">f</span><span class="op" id="6582303">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582307">headers</span>&nbsp;<span class="op" id="6582315">:=</span>&nbsp;<span class="ident" id="6582318">test</span><span class="op" id="6582322">.</span><span class="ident" id="6582323">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582332">cksums</span>&nbsp;<span class="op" id="6582339">:=</span>&nbsp;<span class="ident" id="6582342">test</span><span class="op" id="6582346">.</span><span class="ident" id="6582347">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582355">nread</span>&nbsp;<span class="op" id="6582361">:=</span>&nbsp;<span class="num" id="6582364">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6582368">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6582392">for</span>&nbsp;<span class="op" id="6582396">;</span>&nbsp;<span class="op" id="6582398">;</span>&nbsp;<span class="ident" id="6582400">nread</span><span class="op" id="6582405">++</span>&nbsp;<span class="op" id="6582408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582412">hdr</span><span class="op" id="6582415">,</span>&nbsp;<span class="ident" id="6582417">err</span>&nbsp;<span class="op" id="6582421">:=</span>&nbsp;<span class="ident" id="6582424">tr</span><span class="op" id="6582426">.</span><span class="ident" id="6582427">Next</span><span class="op" id="6582431">(</span><span class="op" id="6582432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6582436">if</span>&nbsp;<span class="ident" id="6582439">hdr</span>&nbsp;<span class="op" id="6582443">==</span>&nbsp;<span class="ident" id="6582446">nil</span>&nbsp;<span class="op" id="6582450">||</span>&nbsp;<span class="ident" id="6582453">err</span>&nbsp;<span class="op" id="6582457">==</span>&nbsp;<span class="ident" id="6582460">io</span><span class="op" id="6582462">.</span><span class="ident" id="6582463">EOF</span>&nbsp;<span class="op" id="6582467">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6582472">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6582480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6582485">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6582507">if</span>&nbsp;<span class="op" id="6582510">!</span><span class="ident" id="6582511">reflect</span><span class="op" id="6582518">.</span><span class="ident" id="6582519">DeepEqual</span><span class="op" id="6582528">(</span><span class="op" id="6582529">*</span><span class="ident" id="6582530">hdr</span><span class="op" id="6582533">,</span>&nbsp;<span class="op" id="6582535">*</span><span class="ident" id="6582536">headers</span><span class="op" id="6582543">[</span><span class="ident" id="6582544">nread</span><span class="op" id="6582549">]</span><span class="op" id="6582550">)</span>&nbsp;<span class="op" id="6582552">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582557">t</span><span class="op" id="6582558">.</span><span class="ident" id="6582559">Errorf</span><span class="op" id="6582565">(</span><span class="string" id="6582566">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6582605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6582611">*</span><span class="ident" id="6582612">hdr</span><span class="op" id="6582615">,</span>&nbsp;<span class="ident" id="6582617">headers</span><span class="op" id="6582624">[</span><span class="ident" id="6582625">nread</span><span class="op" id="6582630">]</span><span class="op" id="6582631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6582635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6582640">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582677">h</span>&nbsp;<span class="op" id="6582679">:=</span>&nbsp;<span class="ident" id="6582682">md5</span><span class="op" id="6582685">.</span><span class="ident" id="6582686">New</span><span class="op" id="6582689">(</span><span class="op" id="6582690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582694">_</span><span class="op" id="6582695">,</span>&nbsp;<span class="ident" id="6582697">err</span>&nbsp;<span class="op" id="6582701">=</span>&nbsp;<span class="ident" id="6582703">io</span><span class="op" id="6582705">.</span><span class="ident" id="6582706">Copy</span><span class="op" id="6582710">(</span><span class="ident" id="6582711">h</span><span class="op" id="6582712">,</span>&nbsp;<span class="ident" id="6582714">tr</span><span class="op" id="6582716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6582720">if</span>&nbsp;<span class="ident" id="6582723">err</span>&nbsp;<span class="op" id="6582727">!=</span>&nbsp;<span class="ident" id="6582730">nil</span>&nbsp;<span class="op" id="6582734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582739">t</span><span class="op" id="6582740">.</span><span class="ident" id="6582741">Fatalf</span><span class="op" id="6582747">(</span><span class="string" id="6582748">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6582770">,</span>&nbsp;<span class="ident" id="6582772">err</span><span class="op" id="6582775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6582779">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6582784">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582805">have</span>&nbsp;<span class="op" id="6582810">:=</span>&nbsp;<span class="ident" id="6582813">fmt</span><span class="op" id="6582816">.</span><span class="ident" id="6582817">Sprintf</span><span class="op" id="6582824">(</span><span class="string" id="6582825">&#34;%x&#34;</span><span class="op" id="6582829">,</span>&nbsp;<span class="ident" id="6582831">h</span><span class="op" id="6582832">.</span><span class="ident" id="6582833">Sum</span><span class="op" id="6582836">(</span><span class="ident" id="6582837">nil</span><span class="op" id="6582840">)</span><span class="op" id="6582841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582845">want</span>&nbsp;<span class="op" id="6582850">:=</span>&nbsp;<span class="ident" id="6582853">cksums</span><span class="op" id="6582859">[</span><span class="ident" id="6582860">nread</span><span class="op" id="6582865">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6582869">if</span>&nbsp;<span class="ident" id="6582872">want</span>&nbsp;<span class="op" id="6582877">!=</span>&nbsp;<span class="ident" id="6582880">have</span>&nbsp;<span class="op" id="6582885">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6582890">t</span><span class="op" id="6582891">.</span><span class="ident" id="6582892">Errorf</span><span class="op" id="6582898">(</span><span class="string" id="6582899">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6582945">,</span>&nbsp;<span class="ident" id="6582947">hdr</span><span class="op" id="6582950">.</span><span class="ident" id="6582951">Name</span><span class="op" id="6582955">,</span>&nbsp;<span class="ident" id="6582957">have</span><span class="op" id="6582961">,</span>&nbsp;<span class="ident" id="6582963">want</span><span class="op" id="6582967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6582971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6582974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6582977">if</span>&nbsp;<span class="ident" id="6582980">nread</span>&nbsp;<span class="op" id="6582986">!=</span>&nbsp;<span class="builtinfunc" id="6582989">len</span><span class="op" id="6582992">(</span><span class="ident" id="6582993">headers</span><span class="op" id="6583000">)</span>&nbsp;<span class="op" id="6583002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583006">t</span><span class="op" id="6583007">.</span><span class="ident" id="6583008">Errorf</span><span class="op" id="6583014">(</span><span class="string" id="6583015">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6583071">,</span>&nbsp;<span class="builtinfunc" id="6583073">len</span><span class="op" id="6583076">(</span><span class="ident" id="6583077">headers</span><span class="op" id="6583084">)</span><span class="op" id="6583085">,</span>&nbsp;<span class="ident" id="6583087">nread</span><span class="op" id="6583092">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583095">}</span><br>
<span class="lineno"></span><span class="op" id="6583097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6583100">type</span>&nbsp;<span class="ident" id="6583105">sparseFileReadTest</span>&nbsp;<span class="keyword" id="6583124">struct</span>&nbsp;<span class="op" id="6583131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583134">sparseData</span>&nbsp;<span class="op" id="6583145">[</span><span class="op" id="6583146">]</span><span class="builtintype" id="6583147">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583153">sparseMap</span>&nbsp;&nbsp;<span class="op" id="6583164">[</span><span class="op" id="6583165">]</span><span class="ident" id="6583166">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583179">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6583190">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583197">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6583208">[</span><span class="op" id="6583209">]</span><span class="builtintype" id="6583210">byte</span><br>
<span class="lineno"></span><span class="op" id="6583215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="6583218">var</span>&nbsp;<span class="ident" id="6583222">sparseFileReadTests</span>&nbsp;<span class="op" id="6583242">=</span>&nbsp;<span class="op" id="6583244">[</span><span class="op" id="6583245">]</span><span class="ident" id="6583246">sparseFileReadTest</span><span class="op" id="6583264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583271">sparseData</span><span class="op" id="6583281">:</span>&nbsp;<span class="op" id="6583283">[</span><span class="op" id="6583284">]</span><span class="builtintype" id="6583285">byte</span><span class="op" id="6583289">(</span><span class="string" id="6583290">&#34;abcde&#34;</span><span class="op" id="6583297">)</span><span class="op" id="6583298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583302">sparseMap</span><span class="op" id="6583311">:</span>&nbsp;<span class="op" id="6583313">[</span><span class="op" id="6583314">]</span><span class="ident" id="6583315">sparseEntry</span><span class="op" id="6583326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583331">{</span><span class="ident" id="6583332">offset</span><span class="op" id="6583338">:</span>&nbsp;<span class="num" id="6583340">0</span><span class="op" id="6583341">,</span>&nbsp;<span class="ident" id="6583343">numBytes</span><span class="op" id="6583351">:</span>&nbsp;<span class="num" id="6583353">2</span><span class="op" id="6583354">}</span><span class="op" id="6583355">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583360">{</span><span class="ident" id="6583361">offset</span><span class="op" id="6583367">:</span>&nbsp;<span class="num" id="6583369">5</span><span class="op" id="6583370">,</span>&nbsp;<span class="ident" id="6583372">numBytes</span><span class="op" id="6583380">:</span>&nbsp;<span class="num" id="6583382">3</span><span class="op" id="6583383">}</span><span class="op" id="6583384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583388">}</span><span class="op" id="6583389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583393">realSize</span><span class="op" id="6583401">:</span>&nbsp;<span class="num" id="6583403">8</span><span class="op" id="6583404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583408">expected</span><span class="op" id="6583416">:</span>&nbsp;<span class="op" id="6583418">[</span><span class="op" id="6583419">]</span><span class="builtintype" id="6583420">byte</span><span class="op" id="6583424">(</span><span class="string" id="6583425">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="6583444">)</span><span class="op" id="6583445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583448">}</span><span class="op" id="6583449">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583456">sparseData</span><span class="op" id="6583466">:</span>&nbsp;<span class="op" id="6583468">[</span><span class="op" id="6583469">]</span><span class="builtintype" id="6583470">byte</span><span class="op" id="6583474">(</span><span class="string" id="6583475">&#34;abcde&#34;</span><span class="op" id="6583482">)</span><span class="op" id="6583483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583487">sparseMap</span><span class="op" id="6583496">:</span>&nbsp;<span class="op" id="6583498">[</span><span class="op" id="6583499">]</span><span class="ident" id="6583500">sparseEntry</span><span class="op" id="6583511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583516">{</span><span class="ident" id="6583517">offset</span><span class="op" id="6583523">:</span>&nbsp;<span class="num" id="6583525">0</span><span class="op" id="6583526">,</span>&nbsp;<span class="ident" id="6583528">numBytes</span><span class="op" id="6583536">:</span>&nbsp;<span class="num" id="6583538">2</span><span class="op" id="6583539">}</span><span class="op" id="6583540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583545">{</span><span class="ident" id="6583546">offset</span><span class="op" id="6583552">:</span>&nbsp;<span class="num" id="6583554">5</span><span class="op" id="6583555">,</span>&nbsp;<span class="ident" id="6583557">numBytes</span><span class="op" id="6583565">:</span>&nbsp;<span class="num" id="6583567">3</span><span class="op" id="6583568">}</span><span class="op" id="6583569">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583573">}</span><span class="op" id="6583574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583578">realSize</span><span class="op" id="6583586">:</span>&nbsp;<span class="num" id="6583588">10</span><span class="op" id="6583590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583594">expected</span><span class="op" id="6583602">:</span>&nbsp;<span class="op" id="6583604">[</span><span class="op" id="6583605">]</span><span class="builtintype" id="6583606">byte</span><span class="op" id="6583610">(</span><span class="string" id="6583611">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="6583638">)</span><span class="op" id="6583639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583642">}</span><span class="op" id="6583643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583646">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583650">sparseData</span><span class="op" id="6583660">:</span>&nbsp;<span class="op" id="6583662">[</span><span class="op" id="6583663">]</span><span class="builtintype" id="6583664">byte</span><span class="op" id="6583668">(</span><span class="string" id="6583669">&#34;abcde&#34;</span><span class="op" id="6583676">)</span><span class="op" id="6583677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583681">sparseMap</span><span class="op" id="6583690">:</span>&nbsp;<span class="op" id="6583692">[</span><span class="op" id="6583693">]</span><span class="ident" id="6583694">sparseEntry</span><span class="op" id="6583705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583710">{</span><span class="ident" id="6583711">offset</span><span class="op" id="6583717">:</span>&nbsp;<span class="num" id="6583719">1</span><span class="op" id="6583720">,</span>&nbsp;<span class="ident" id="6583722">numBytes</span><span class="op" id="6583730">:</span>&nbsp;<span class="num" id="6583732">3</span><span class="op" id="6583733">}</span><span class="op" id="6583734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583739">{</span><span class="ident" id="6583740">offset</span><span class="op" id="6583746">:</span>&nbsp;<span class="num" id="6583748">6</span><span class="op" id="6583749">,</span>&nbsp;<span class="ident" id="6583751">numBytes</span><span class="op" id="6583759">:</span>&nbsp;<span class="num" id="6583761">2</span><span class="op" id="6583762">}</span><span class="op" id="6583763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583767">}</span><span class="op" id="6583768">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583772">realSize</span><span class="op" id="6583780">:</span>&nbsp;<span class="num" id="6583782">8</span><span class="op" id="6583783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583787">expected</span><span class="op" id="6583795">:</span>&nbsp;<span class="op" id="6583797">[</span><span class="op" id="6583798">]</span><span class="builtintype" id="6583799">byte</span><span class="op" id="6583803">(</span><span class="string" id="6583804">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="6583823">)</span><span class="op" id="6583824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583827">}</span><span class="op" id="6583828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583835">sparseData</span><span class="op" id="6583845">:</span>&nbsp;<span class="op" id="6583847">[</span><span class="op" id="6583848">]</span><span class="builtintype" id="6583849">byte</span><span class="op" id="6583853">(</span><span class="string" id="6583854">&#34;abcde&#34;</span><span class="op" id="6583861">)</span><span class="op" id="6583862">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583866">sparseMap</span><span class="op" id="6583875">:</span>&nbsp;<span class="op" id="6583877">[</span><span class="op" id="6583878">]</span><span class="ident" id="6583879">sparseEntry</span><span class="op" id="6583890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583895">{</span><span class="ident" id="6583896">offset</span><span class="op" id="6583902">:</span>&nbsp;<span class="num" id="6583904">1</span><span class="op" id="6583905">,</span>&nbsp;<span class="ident" id="6583907">numBytes</span><span class="op" id="6583915">:</span>&nbsp;<span class="num" id="6583917">3</span><span class="op" id="6583918">}</span><span class="op" id="6583919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583924">{</span><span class="ident" id="6583925">offset</span><span class="op" id="6583931">:</span>&nbsp;<span class="num" id="6583933">6</span><span class="op" id="6583934">,</span>&nbsp;<span class="ident" id="6583936">numBytes</span><span class="op" id="6583944">:</span>&nbsp;<span class="num" id="6583946">2</span><span class="op" id="6583947">}</span><span class="op" id="6583948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6583952">}</span><span class="op" id="6583953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583957">realSize</span><span class="op" id="6583965">:</span>&nbsp;<span class="num" id="6583967">10</span><span class="op" id="6583969">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6583973">expected</span><span class="op" id="6583981">:</span>&nbsp;<span class="op" id="6583983">[</span><span class="op" id="6583984">]</span><span class="builtintype" id="6583985">byte</span><span class="op" id="6583989">(</span><span class="string" id="6583990">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="6584017">)</span><span class="op" id="6584018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6584021">}</span><span class="op" id="6584022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6584025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584029">sparseData</span><span class="op" id="6584039">:</span>&nbsp;<span class="op" id="6584041">[</span><span class="op" id="6584042">]</span><span class="builtintype" id="6584043">byte</span><span class="op" id="6584047">(</span><span class="string" id="6584048">&#34;&#34;</span><span class="op" id="6584050">)</span><span class="op" id="6584051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584055">sparseMap</span><span class="op" id="6584064">:</span>&nbsp;&nbsp;<span class="ident" id="6584067">nil</span><span class="op" id="6584070">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584074">realSize</span><span class="op" id="6584082">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="6584086">2</span><span class="op" id="6584087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584091">expected</span><span class="op" id="6584099">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6584103">[</span><span class="op" id="6584104">]</span><span class="builtintype" id="6584105">byte</span><span class="op" id="6584109">(</span><span class="string" id="6584110">&#34;\x00\x00&#34;</span><span class="op" id="6584120">)</span><span class="op" id="6584121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6584124">}</span><span class="op" id="6584125">,</span><br>
<span class="lineno"></span><span class="op" id="6584127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="6584130">func</span>&nbsp;<span class="ident" id="6584135">TestSparseFileReader</span><span class="op" id="6584155">(</span><span class="ident" id="6584156">t</span>&nbsp;<span class="op" id="6584158">*</span><span class="ident" id="6584159">testing</span><span class="op" id="6584166">.</span><span class="ident" id="6584167">T</span><span class="op" id="6584168">)</span>&nbsp;<span class="op" id="6584170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6584173">for</span>&nbsp;<span class="ident" id="6584177">i</span><span class="op" id="6584178">,</span>&nbsp;<span class="ident" id="6584180">test</span>&nbsp;<span class="op" id="6584185">:=</span>&nbsp;<span class="keyword" id="6584188">range</span>&nbsp;<span class="ident" id="6584194">sparseFileReadTests</span>&nbsp;<span class="op" id="6584214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584218">r</span>&nbsp;<span class="op" id="6584220">:=</span>&nbsp;<span class="ident" id="6584223">bytes</span><span class="op" id="6584228">.</span><span class="ident" id="6584229">NewReader</span><span class="op" id="6584238">(</span><span class="ident" id="6584239">test</span><span class="op" id="6584243">.</span><span class="ident" id="6584244">sparseData</span><span class="op" id="6584254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584258">nb</span>&nbsp;<span class="op" id="6584261">:=</span>&nbsp;<span class="ident" id="6584264">int64</span><span class="op" id="6584269">(</span><span class="ident" id="6584270">r</span><span class="op" id="6584271">.</span><span class="ident" id="6584272">Len</span><span class="op" id="6584275">(</span><span class="op" id="6584276">)</span><span class="op" id="6584277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584281">sfr</span>&nbsp;<span class="op" id="6584285">:=</span>&nbsp;<span class="op" id="6584288">&amp;</span><span class="ident" id="6584289">sparseFileReader</span><span class="op" id="6584305">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584310">rfr</span><span class="op" id="6584313">:</span>&nbsp;<span class="op" id="6584315">&amp;</span><span class="ident" id="6584316">regFileReader</span><span class="op" id="6584329">{</span><span class="ident" id="6584330">r</span><span class="op" id="6584331">:</span>&nbsp;<span class="ident" id="6584333">r</span><span class="op" id="6584334">,</span>&nbsp;<span class="ident" id="6584336">nb</span><span class="op" id="6584338">:</span>&nbsp;<span class="ident" id="6584340">nb</span><span class="op" id="6584342">}</span><span class="op" id="6584343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584348">sp</span><span class="op" id="6584350">:</span>&nbsp;&nbsp;<span class="ident" id="6584353">test</span><span class="op" id="6584357">.</span><span class="ident" id="6584358">sparseMap</span><span class="op" id="6584367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584372">pos</span><span class="op" id="6584375">:</span>&nbsp;<span class="num" id="6584377">0</span><span class="op" id="6584378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584383">tot</span><span class="op" id="6584386">:</span>&nbsp;<span class="ident" id="6584388">test</span><span class="op" id="6584392">.</span><span class="ident" id="6584393">realSize</span><span class="op" id="6584401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6584405">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6584409">if</span>&nbsp;<span class="ident" id="6584412">sfr</span><span class="op" id="6584415">.</span><span class="ident" id="6584416">numBytes</span><span class="op" id="6584424">(</span><span class="op" id="6584425">)</span>&nbsp;<span class="op" id="6584427">!=</span>&nbsp;<span class="ident" id="6584430">nb</span>&nbsp;<span class="op" id="6584433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584438">t</span><span class="op" id="6584439">.</span><span class="ident" id="6584440">Errorf</span><span class="op" id="6584446">(</span><span class="string" id="6584447">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6584502">,</span>&nbsp;<span class="ident" id="6584504">i</span><span class="op" id="6584505">,</span>&nbsp;<span class="ident" id="6584507">sfr</span><span class="op" id="6584510">.</span><span class="ident" id="6584511">numBytes</span><span class="op" id="6584519">(</span><span class="op" id="6584520">)</span><span class="op" id="6584521">,</span>&nbsp;<span class="ident" id="6584523">nb</span><span class="op" id="6584525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6584529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584533">buf</span><span class="op" id="6584536">,</span>&nbsp;<span class="ident" id="6584538">err</span>&nbsp;<span class="op" id="6584542">:=</span>&nbsp;<span class="ident" id="6584545">ioutil</span><span class="op" id="6584551">.</span><span class="ident" id="6584552">ReadAll</span><span class="op" id="6584559">(</span><span class="ident" id="6584560">sfr</span><span class="op" id="6584563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6584567">if</span>&nbsp;<span class="ident" id="6584570">err</span>&nbsp;<span class="op" id="6584574">!=</span>&nbsp;<span class="ident" id="6584577">nil</span>&nbsp;<span class="op" id="6584581">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584586">t</span><span class="op" id="6584587">.</span><span class="ident" id="6584588">Errorf</span><span class="op" id="6584594">(</span><span class="string" id="6584595">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6584626">,</span>&nbsp;<span class="ident" id="6584628">i</span><span class="op" id="6584629">,</span>&nbsp;<span class="ident" id="6584631">err</span><span class="op" id="6584634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6584638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6584642">if</span>&nbsp;<span class="ident" id="6584645">e</span>&nbsp;<span class="op" id="6584647">:=</span>&nbsp;<span class="ident" id="6584650">test</span><span class="op" id="6584654">.</span><span class="ident" id="6584655">expected</span><span class="op" id="6584663">;</span>&nbsp;<span class="op" id="6584665">!</span><span class="ident" id="6584666">bytes</span><span class="op" id="6584671">.</span><span class="ident" id="6584672">Equal</span><span class="op" id="6584677">(</span><span class="ident" id="6584678">buf</span><span class="op" id="6584681">,</span>&nbsp;<span class="ident" id="6584683">e</span><span class="op" id="6584684">)</span>&nbsp;<span class="op" id="6584686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584691">t</span><span class="op" id="6584692">.</span><span class="ident" id="6584693">Errorf</span><span class="op" id="6584699">(</span><span class="string" id="6584700">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6584733">,</span>&nbsp;<span class="ident" id="6584735">i</span><span class="op" id="6584736">,</span>&nbsp;<span class="ident" id="6584738">buf</span><span class="op" id="6584741">,</span>&nbsp;<span class="ident" id="6584743">e</span><span class="op" id="6584744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6584748">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6584752">if</span>&nbsp;<span class="ident" id="6584755">sfr</span><span class="op" id="6584758">.</span><span class="ident" id="6584759">numBytes</span><span class="op" id="6584767">(</span><span class="op" id="6584768">)</span>&nbsp;<span class="op" id="6584770">!=</span>&nbsp;<span class="num" id="6584773">0</span>&nbsp;<span class="op" id="6584775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584780">t</span><span class="op" id="6584781">.</span><span class="ident" id="6584782">Errorf</span><span class="op" id="6584788">(</span><span class="string" id="6584789">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="6584849">,</span>&nbsp;<span class="ident" id="6584851">i</span><span class="op" id="6584852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6584856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6584859">}</span><br>
<span class="lineno"></span><span class="op" id="6584861">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="6584864">func</span>&nbsp;<span class="ident" id="6584869">TestSparseIncrementalRead</span><span class="op" id="6584894">(</span><span class="ident" id="6584895">t</span>&nbsp;<span class="op" id="6584897">*</span><span class="ident" id="6584898">testing</span><span class="op" id="6584905">.</span><span class="ident" id="6584906">T</span><span class="op" id="6584907">)</span>&nbsp;<span class="op" id="6584909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584912">sparseMap</span>&nbsp;<span class="op" id="6584922">:=</span>&nbsp;<span class="op" id="6584925">[</span><span class="op" id="6584926">]</span><span class="ident" id="6584927">sparseEntry</span><span class="op" id="6584938">{</span><span class="op" id="6584939">{</span><span class="num" id="6584940">10</span><span class="op" id="6584942">,</span>&nbsp;<span class="num" id="6584944">2</span><span class="op" id="6584945">}</span><span class="op" id="6584946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584949">sparseData</span>&nbsp;<span class="op" id="6584960">:=</span>&nbsp;<span class="op" id="6584963">[</span><span class="op" id="6584964">]</span><span class="builtintype" id="6584965">byte</span><span class="op" id="6584969">(</span><span class="string" id="6584970">&#34;Go&#34;</span><span class="op" id="6584974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6584977">expected</span>&nbsp;<span class="op" id="6584986">:=</span>&nbsp;<span class="string" id="6584989">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585068">r</span>&nbsp;<span class="op" id="6585070">:=</span>&nbsp;<span class="ident" id="6585073">bytes</span><span class="op" id="6585078">.</span><span class="ident" id="6585079">NewReader</span><span class="op" id="6585088">(</span><span class="ident" id="6585089">sparseData</span><span class="op" id="6585099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585102">nb</span>&nbsp;<span class="op" id="6585105">:=</span>&nbsp;<span class="ident" id="6585108">int64</span><span class="op" id="6585113">(</span><span class="ident" id="6585114">r</span><span class="op" id="6585115">.</span><span class="ident" id="6585116">Len</span><span class="op" id="6585119">(</span><span class="op" id="6585120">)</span><span class="op" id="6585121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585124">sfr</span>&nbsp;<span class="op" id="6585128">:=</span>&nbsp;<span class="op" id="6585131">&amp;</span><span class="ident" id="6585132">sparseFileReader</span><span class="op" id="6585148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585152">rfr</span><span class="op" id="6585155">:</span>&nbsp;<span class="op" id="6585157">&amp;</span><span class="ident" id="6585158">regFileReader</span><span class="op" id="6585171">{</span><span class="ident" id="6585172">r</span><span class="op" id="6585173">:</span>&nbsp;<span class="ident" id="6585175">r</span><span class="op" id="6585176">,</span>&nbsp;<span class="ident" id="6585178">nb</span><span class="op" id="6585180">:</span>&nbsp;<span class="ident" id="6585182">nb</span><span class="op" id="6585184">}</span><span class="op" id="6585185">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585189">sp</span><span class="op" id="6585191">:</span>&nbsp;&nbsp;<span class="ident" id="6585194">sparseMap</span><span class="op" id="6585203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585207">pos</span><span class="op" id="6585210">:</span>&nbsp;<span class="num" id="6585212">0</span><span class="op" id="6585213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585217">tot</span><span class="op" id="6585220">:</span>&nbsp;<span class="ident" id="6585222">int64</span><span class="op" id="6585227">(</span><span class="builtinfunc" id="6585228">len</span><span class="op" id="6585231">(</span><span class="ident" id="6585232">expected</span><span class="op" id="6585240">)</span><span class="op" id="6585241">)</span><span class="op" id="6585242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6585245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6585249">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6585318">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6585366">var</span>&nbsp;<span class="ident" id="6585370">outputBuf</span>&nbsp;<span class="ident" id="6585380">bytes</span><span class="op" id="6585385">.</span><span class="ident" id="6585386">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585394">buf</span>&nbsp;<span class="op" id="6585398">:=</span>&nbsp;<span class="builtinfunc" id="6585401">make</span><span class="op" id="6585405">(</span><span class="op" id="6585406">[</span><span class="op" id="6585407">]</span><span class="builtintype" id="6585408">byte</span><span class="op" id="6585412">,</span>&nbsp;<span class="num" id="6585414">6</span><span class="op" id="6585415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6585418">for</span>&nbsp;<span class="op" id="6585422">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585426">n</span><span class="op" id="6585427">,</span>&nbsp;<span class="ident" id="6585429">err</span>&nbsp;<span class="op" id="6585433">:=</span>&nbsp;<span class="ident" id="6585436">sfr</span><span class="op" id="6585439">.</span><span class="ident" id="6585440">Read</span><span class="op" id="6585444">(</span><span class="ident" id="6585445">buf</span><span class="op" id="6585448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6585452">if</span>&nbsp;<span class="ident" id="6585455">err</span>&nbsp;<span class="op" id="6585459">==</span>&nbsp;<span class="ident" id="6585462">io</span><span class="op" id="6585464">.</span><span class="ident" id="6585465">EOF</span>&nbsp;<span class="op" id="6585469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6585474">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6585482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6585486">if</span>&nbsp;<span class="ident" id="6585489">err</span>&nbsp;<span class="op" id="6585493">!=</span>&nbsp;<span class="ident" id="6585496">nil</span>&nbsp;<span class="op" id="6585500">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585505">t</span><span class="op" id="6585506">.</span><span class="ident" id="6585507">Errorf</span><span class="op" id="6585513">(</span><span class="string" id="6585514">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6585543">,</span>&nbsp;<span class="ident" id="6585545">err</span><span class="op" id="6585548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6585552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6585556">if</span>&nbsp;<span class="ident" id="6585559">n</span>&nbsp;<span class="op" id="6585561">&gt;</span>&nbsp;<span class="num" id="6585563">0</span>&nbsp;<span class="op" id="6585565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585570">_</span><span class="op" id="6585571">,</span>&nbsp;<span class="ident" id="6585573">err</span>&nbsp;<span class="op" id="6585577">:=</span>&nbsp;<span class="ident" id="6585580">outputBuf</span><span class="op" id="6585589">.</span><span class="ident" id="6585590">Write</span><span class="op" id="6585595">(</span><span class="ident" id="6585596">buf</span><span class="op" id="6585599">[</span><span class="op" id="6585600">:</span><span class="ident" id="6585601">n</span><span class="op" id="6585602">]</span><span class="op" id="6585603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6585608">if</span>&nbsp;<span class="ident" id="6585611">err</span>&nbsp;<span class="op" id="6585615">!=</span>&nbsp;<span class="ident" id="6585618">nil</span>&nbsp;<span class="op" id="6585622">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585628">t</span><span class="op" id="6585629">.</span><span class="ident" id="6585630">Errorf</span><span class="op" id="6585636">(</span><span class="string" id="6585637">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6585667">,</span>&nbsp;<span class="ident" id="6585669">err</span><span class="op" id="6585672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6585677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6585681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6585684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585687">got</span>&nbsp;<span class="op" id="6585691">:=</span>&nbsp;<span class="ident" id="6585694">outputBuf</span><span class="op" id="6585703">.</span><span class="ident" id="6585704">String</span><span class="op" id="6585710">(</span><span class="op" id="6585711">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6585714">if</span>&nbsp;<span class="ident" id="6585717">got</span>&nbsp;<span class="op" id="6585721">!=</span>&nbsp;<span class="ident" id="6585724">expected</span>&nbsp;<span class="op" id="6585733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585737">t</span><span class="op" id="6585738">.</span><span class="ident" id="6585739">Errorf</span><span class="op" id="6585745">(</span><span class="string" id="6585746">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6585770">,</span>&nbsp;<span class="ident" id="6585772">got</span><span class="op" id="6585775">,</span>&nbsp;<span class="ident" id="6585777">expected</span><span class="op" id="6585785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6585788">}</span><br>
<span class="lineno"></span><span class="op" id="6585790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="6585793">func</span>&nbsp;<span class="ident" id="6585798">TestReadGNUSparseMap0x1</span><span class="op" id="6585821">(</span><span class="ident" id="6585822">t</span>&nbsp;<span class="op" id="6585824">*</span><span class="ident" id="6585825">testing</span><span class="op" id="6585832">.</span><span class="ident" id="6585833">T</span><span class="op" id="6585834">)</span>&nbsp;<span class="op" id="6585836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585839">headers</span>&nbsp;<span class="op" id="6585847">:=</span>&nbsp;<span class="keyword" id="6585850">map</span><span class="op" id="6585853">[</span><span class="builtintype" id="6585854">string</span><span class="op" id="6585860">]</span><span class="builtintype" id="6585861">string</span><span class="op" id="6585867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585871">paxGNUSparseNumBlocks</span><span class="op" id="6585892">:</span>&nbsp;<span class="string" id="6585894">&#34;4&#34;</span><span class="op" id="6585897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585901">paxGNUSparseMap</span><span class="op" id="6585916">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6585924">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="6585944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6585947">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6585950">expected</span>&nbsp;<span class="op" id="6585959">:=</span>&nbsp;<span class="op" id="6585962">[</span><span class="op" id="6585963">]</span><span class="ident" id="6585964">sparseEntry</span><span class="op" id="6585975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6585979">{</span><span class="ident" id="6585980">offset</span><span class="op" id="6585986">:</span>&nbsp;<span class="num" id="6585988">0</span><span class="op" id="6585989">,</span>&nbsp;<span class="ident" id="6585991">numBytes</span><span class="op" id="6585999">:</span>&nbsp;<span class="num" id="6586001">5</span><span class="op" id="6586002">}</span><span class="op" id="6586003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6586007">{</span><span class="ident" id="6586008">offset</span><span class="op" id="6586014">:</span>&nbsp;<span class="num" id="6586016">10</span><span class="op" id="6586018">,</span>&nbsp;<span class="ident" id="6586020">numBytes</span><span class="op" id="6586028">:</span>&nbsp;<span class="num" id="6586030">5</span><span class="op" id="6586031">}</span><span class="op" id="6586032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6586036">{</span><span class="ident" id="6586037">offset</span><span class="op" id="6586043">:</span>&nbsp;<span class="num" id="6586045">20</span><span class="op" id="6586047">,</span>&nbsp;<span class="ident" id="6586049">numBytes</span><span class="op" id="6586057">:</span>&nbsp;<span class="num" id="6586059">5</span><span class="op" id="6586060">}</span><span class="op" id="6586061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6586065">{</span><span class="ident" id="6586066">offset</span><span class="op" id="6586072">:</span>&nbsp;<span class="num" id="6586074">30</span><span class="op" id="6586076">,</span>&nbsp;<span class="ident" id="6586078">numBytes</span><span class="op" id="6586086">:</span>&nbsp;<span class="num" id="6586088">5</span><span class="op" id="6586089">}</span><span class="op" id="6586090">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6586093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586097">sp</span><span class="op" id="6586099">,</span>&nbsp;<span class="ident" id="6586101">err</span>&nbsp;<span class="op" id="6586105">:=</span>&nbsp;<span class="ident" id="6586108">readGNUSparseMap0x1</span><span class="op" id="6586127">(</span><span class="ident" id="6586128">headers</span><span class="op" id="6586135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6586138">if</span>&nbsp;<span class="ident" id="6586141">err</span>&nbsp;<span class="op" id="6586145">!=</span>&nbsp;<span class="ident" id="6586148">nil</span>&nbsp;<span class="op" id="6586152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586156">t</span><span class="op" id="6586157">.</span><span class="ident" id="6586158">Errorf</span><span class="op" id="6586164">(</span><span class="string" id="6586165">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6586187">,</span>&nbsp;<span class="ident" id="6586189">err</span><span class="op" id="6586192">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6586195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6586198">if</span>&nbsp;<span class="op" id="6586201">!</span><span class="ident" id="6586202">reflect</span><span class="op" id="6586209">.</span><span class="ident" id="6586210">DeepEqual</span><span class="op" id="6586219">(</span><span class="ident" id="6586220">sp</span><span class="op" id="6586222">,</span>&nbsp;<span class="ident" id="6586224">expected</span><span class="op" id="6586232">)</span>&nbsp;<span class="op" id="6586234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586238">t</span><span class="op" id="6586239">.</span><span class="ident" id="6586240">Errorf</span><span class="op" id="6586246">(</span><span class="string" id="6586247">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6586288">,</span>&nbsp;<span class="ident" id="6586290">sp</span><span class="op" id="6586292">,</span>&nbsp;<span class="ident" id="6586294">expected</span><span class="op" id="6586302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6586305">}</span><br>
<span class="lineno"></span><span class="op" id="6586307">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="6586310">func</span>&nbsp;<span class="ident" id="6586315">TestReadGNUSparseMap1x0</span><span class="op" id="6586338">(</span><span class="ident" id="6586339">t</span>&nbsp;<span class="op" id="6586341">*</span><span class="ident" id="6586342">testing</span><span class="op" id="6586349">.</span><span class="ident" id="6586350">T</span><span class="op" id="6586351">)</span>&nbsp;<span class="op" id="6586353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6586356">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586440">numEntries</span>&nbsp;<span class="op" id="6586451">:=</span>&nbsp;<span class="num" id="6586454">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586459">expected</span>&nbsp;<span class="op" id="6586468">:=</span>&nbsp;<span class="builtinfunc" id="6586471">make</span><span class="op" id="6586475">(</span><span class="op" id="6586476">[</span><span class="op" id="6586477">]</span><span class="ident" id="6586478">sparseEntry</span><span class="op" id="6586489">,</span>&nbsp;<span class="num" id="6586491">0</span><span class="op" id="6586492">,</span>&nbsp;<span class="ident" id="6586494">numEntries</span><span class="op" id="6586504">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586507">sparseMap</span>&nbsp;<span class="op" id="6586517">:=</span>&nbsp;<span class="builtinfunc" id="6586520">new</span><span class="op" id="6586523">(</span><span class="ident" id="6586524">bytes</span><span class="op" id="6586529">.</span><span class="ident" id="6586530">Buffer</span><span class="op" id="6586536">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586540">fmt</span><span class="op" id="6586543">.</span><span class="ident" id="6586544">Fprintf</span><span class="op" id="6586551">(</span><span class="ident" id="6586552">sparseMap</span><span class="op" id="6586561">,</span>&nbsp;<span class="string" id="6586563">&#34;%d\n&#34;</span><span class="op" id="6586569">,</span>&nbsp;<span class="ident" id="6586571">numEntries</span><span class="op" id="6586581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6586584">for</span>&nbsp;<span class="ident" id="6586588">i</span>&nbsp;<span class="op" id="6586590">:=</span>&nbsp;<span class="num" id="6586593">0</span><span class="op" id="6586594">;</span>&nbsp;<span class="ident" id="6586596">i</span>&nbsp;<span class="op" id="6586598">&lt;</span>&nbsp;<span class="ident" id="6586600">numEntries</span><span class="op" id="6586610">;</span>&nbsp;<span class="ident" id="6586612">i</span><span class="op" id="6586613">++</span>&nbsp;<span class="op" id="6586616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586620">offset</span>&nbsp;<span class="op" id="6586627">:=</span>&nbsp;<span class="ident" id="6586630">int64</span><span class="op" id="6586635">(</span><span class="num" id="6586636">2048</span>&nbsp;<span class="op" id="6586641">*</span>&nbsp;<span class="ident" id="6586643">i</span><span class="op" id="6586644">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586648">numBytes</span>&nbsp;<span class="op" id="6586657">:=</span>&nbsp;<span class="ident" id="6586660">int64</span><span class="op" id="6586665">(</span><span class="num" id="6586666">1024</span><span class="op" id="6586670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586674">expected</span>&nbsp;<span class="op" id="6586683">=</span>&nbsp;<span class="builtinfunc" id="6586685">append</span><span class="op" id="6586691">(</span><span class="ident" id="6586692">expected</span><span class="op" id="6586700">,</span>&nbsp;<span class="ident" id="6586702">sparseEntry</span><span class="op" id="6586713">{</span><span class="ident" id="6586714">offset</span><span class="op" id="6586720">:</span>&nbsp;<span class="ident" id="6586722">offset</span><span class="op" id="6586728">,</span>&nbsp;<span class="ident" id="6586730">numBytes</span><span class="op" id="6586738">:</span>&nbsp;<span class="ident" id="6586740">numBytes</span><span class="op" id="6586748">}</span><span class="op" id="6586749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586753">fmt</span><span class="op" id="6586756">.</span><span class="ident" id="6586757">Fprintf</span><span class="op" id="6586764">(</span><span class="ident" id="6586765">sparseMap</span><span class="op" id="6586774">,</span>&nbsp;<span class="string" id="6586776">&#34;%d\n%d\n&#34;</span><span class="op" id="6586786">,</span>&nbsp;<span class="ident" id="6586788">offset</span><span class="op" id="6586794">,</span>&nbsp;<span class="ident" id="6586796">numBytes</span><span class="op" id="6586804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6586807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6586811">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586890">headerBlocks</span>&nbsp;<span class="op" id="6586903">:=</span>&nbsp;<span class="op" id="6586906">(</span><span class="ident" id="6586907">sparseMap</span><span class="op" id="6586916">.</span><span class="ident" id="6586917">Len</span><span class="op" id="6586920">(</span><span class="op" id="6586921">)</span>&nbsp;<span class="op" id="6586923">+</span>&nbsp;<span class="ident" id="6586925">blockSize</span>&nbsp;<span class="op" id="6586935">-</span>&nbsp;<span class="num" id="6586937">1</span><span class="op" id="6586938">)</span>&nbsp;<span class="op" id="6586940">/</span>&nbsp;<span class="ident" id="6586942">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586953">bufLen</span>&nbsp;<span class="op" id="6586960">:=</span>&nbsp;<span class="ident" id="6586963">blockSize</span>&nbsp;<span class="op" id="6586973">*</span>&nbsp;<span class="ident" id="6586975">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6586989">buf</span>&nbsp;<span class="op" id="6586993">:=</span>&nbsp;<span class="builtinfunc" id="6586996">make</span><span class="op" id="6587000">(</span><span class="op" id="6587001">[</span><span class="op" id="6587002">]</span><span class="builtintype" id="6587003">byte</span><span class="op" id="6587007">,</span>&nbsp;<span class="ident" id="6587009">bufLen</span><span class="op" id="6587015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6587018">copy</span><span class="op" id="6587022">(</span><span class="ident" id="6587023">buf</span><span class="op" id="6587026">,</span>&nbsp;<span class="ident" id="6587028">sparseMap</span><span class="op" id="6587037">.</span><span class="ident" id="6587038">Bytes</span><span class="op" id="6587043">(</span><span class="op" id="6587044">)</span><span class="op" id="6587045">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6587049">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6587090">r</span>&nbsp;<span class="op" id="6587092">:=</span>&nbsp;<span class="ident" id="6587095">bytes</span><span class="op" id="6587100">.</span><span class="ident" id="6587101">NewReader</span><span class="op" id="6587110">(</span><span class="ident" id="6587111">buf</span><span class="op" id="6587114">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6587118">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6587142">sp</span><span class="op" id="6587144">,</span>&nbsp;<span class="ident" id="6587146">err</span>&nbsp;<span class="op" id="6587150">:=</span>&nbsp;<span class="ident" id="6587153">readGNUSparseMap1x0</span><span class="op" id="6587172">(</span><span class="ident" id="6587173">r</span><span class="op" id="6587174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6587177">if</span>&nbsp;<span class="ident" id="6587180">err</span>&nbsp;<span class="op" id="6587184">!=</span>&nbsp;<span class="ident" id="6587187">nil</span>&nbsp;<span class="op" id="6587191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6587195">t</span><span class="op" id="6587196">.</span><span class="ident" id="6587197">Errorf</span><span class="op" id="6587203">(</span><span class="string" id="6587204">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6587226">,</span>&nbsp;<span class="ident" id="6587228">err</span><span class="op" id="6587231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6587234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6587237">if</span>&nbsp;<span class="op" id="6587240">!</span><span class="ident" id="6587241">reflect</span><span class="op" id="6587248">.</span><span class="ident" id="6587249">DeepEqual</span><span class="op" id="6587258">(</span><span class="ident" id="6587259">sp</span><span class="op" id="6587261">,</span>&nbsp;<span class="ident" id="6587263">expected</span><span class="op" id="6587271">)</span>&nbsp;<span class="op" id="6587273">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6587277">t</span><span class="op" id="6587278">.</span><span class="ident" id="6587279">Errorf</span><span class="op" id="6587285">(</span><span class="string" id="6587286">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6587327">,</span>&nbsp;<span class="ident" id="6587329">sp</span><span class="op" id="6587331">,</span>&nbsp;<span class="ident" id="6587333">expected</span><span class="op" id="6587341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6587344">}</span><br>
<span class="lineno"></span><span class="op" id="6587346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6587349">func</span>&nbsp;<span class="ident" id="6587354">TestUninitializedRead</span><span class="op" id="6587375">(</span><span class="ident" id="6587376">t</span>&nbsp;<span class="op" id="6587378">*</span><span class="ident" id="6587379">testing</span><span class="op" id="6587386">.</span><span class="ident" id="6587387">T</span><span class="op" id="6587388">)</span>&nbsp;<span class="op" id="6587390">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6587393">test</span>&nbsp;<span class="op" id="6587398">:=</span>&nbsp;<span class="ident" id="6587401">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6587413">f</span><span class="op" id="6587414">,</span>&nbsp;<span class="ident" id="6587416">err</span>&nbsp;<span class="op" id="6587420">:=</span>&nbsp;<span class="ident" id="6587423">os</span><span class="op" id="6587425">.</span><span class="ident" id="6587426">Open</span><span class="op" id="6587430">(</span><span class="ident" id="6587431">test</span><span class="op" id="6587435">.</span><span class="ident" id="6587436">file</span><span class="op" id="6587440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6587443">if</span>&nbsp;<span class="ident" id="6587446">err</span>&nbsp;<span class="op" id="6587450">!=</span>&nbsp;<span class="ident" id="6587453">nil</span>&nbsp;<span class="op" id="6587457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6587461">t</span><span class="op" id="6587462">.</span><span class="ident" id="6587463">Fatalf</span><span class="op" id="6587469">(</span><span class="string" id="6587470">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6587492">,</span>&nbsp;<span class="ident" id="6587494">err</span><span class="op" id="6587497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6587500">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6587503">defer</span>&nbsp;<span class="ident" id="6587509">f</span><span class="op" id="6587510">.</span><span class="ident" id="6587511">Close</span><span class="op" id="6587516">(</span><span class="op" id="6587517">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6587521">tr</span>&nbsp;<span class="op" id="6587524">:=</span>&nbsp;<span class="ident" id="6587527">NewReader</span><span class="op" id="6587536">(</span><span class="ident" id="6587537">f</span><span class="op" id="6587538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6587541">_</span><span class="op" id="6587542">,</span>&nbsp;<span class="ident" id="6587544">err</span>&nbsp;<span class="op" id="6587548">=</span>&nbsp;<span class="ident" id="6587550">tr</span><span class="op" id="6587552">.</span><span class="ident" id="6587553">Read</span><span class="op" id="6587557">(</span><span class="op" id="6587558">[</span><span class="op" id="6587559">]</span><span class="builtintype" id="6587560">byte</span><span class="op" id="6587564">{</span><span class="op" id="6587565">}</span><span class="op" id="6587566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6587569">if</span>&nbsp;<span class="ident" id="6587572">err</span>&nbsp;<span class="op" id="6587576">==</span>&nbsp;<span class="ident" id="6587579">nil</span>&nbsp;<span class="op" id="6587583">||</span>&nbsp;<span class="ident" id="6587586">err</span>&nbsp;<span class="op" id="6587590">!=</span>&nbsp;<span class="ident" id="6587593">io</span><span class="op" id="6587595">.</span><span class="ident" id="6587596">EOF</span>&nbsp;<span class="op" id="6587600">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6587604">t</span><span class="op" id="6587605">.</span><span class="ident" id="6587606">Errorf</span><span class="op" id="6587612">(</span><span class="string" id="6587613">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6587646">,</span>&nbsp;<span class="ident" id="6587648">err</span><span class="op" id="6587651">,</span>&nbsp;<span class="ident" id="6587653">io</span><span class="op" id="6587655">.</span><span class="ident" id="6587656">EOF</span><span class="op" id="6587659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6587662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="6587665">}</span>
</div>
</body>
</html>
