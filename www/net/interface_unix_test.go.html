<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7447126">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7447182">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7447236">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7447287">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7447344">package</span>&nbsp;<span class="ident" id="7447352">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7447357">import</span>&nbsp;<span class="op" id="7447364">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7447367">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7447373">&#34;os/exec&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7447384">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7447395">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7447406">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="7447413">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7447416">type</span>&nbsp;<span class="ident" id="7447421">testInterface</span>&nbsp;<span class="keyword" id="7447435">struct</span>&nbsp;<span class="op" id="7447442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7447445">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7447458">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7447466">local</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7447479">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7447487">remote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7447500">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7447508">setupCmds</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7447521">[</span><span class="op" id="7447522">]</span><span class="op" id="7447523">*</span><span class="ident" id="7447524">exec</span><span class="op" id="7447528">.</span><span class="ident" id="7447529">Cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7447534">teardownCmds</span>&nbsp;<span class="op" id="7447547">[</span><span class="op" id="7447548">]</span><span class="op" id="7447549">*</span><span class="ident" id="7447550">exec</span><span class="op" id="7447554">.</span><span class="ident" id="7447555">Cmd</span><br>
<span class="lineno"></span><span class="op" id="7447559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7447562">func</span>&nbsp;<span class="op" id="7447567">(</span><span class="ident" id="7447568">ti</span>&nbsp;<span class="op" id="7447571">*</span><span class="ident" id="7447572">testInterface</span><span class="op" id="7447585">)</span>&nbsp;<span class="ident" id="7447587">setup</span><span class="op" id="7447592">(</span><span class="op" id="7447593">)</span>&nbsp;<span class="builtintype" id="7447595">error</span>&nbsp;<span class="op" id="7447601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7447604">for</span>&nbsp;<span class="ident" id="7447608">_</span><span class="op" id="7447609">,</span>&nbsp;<span class="ident" id="7447611">cmd</span>&nbsp;<span class="op" id="7447615">:=</span>&nbsp;<span class="keyword" id="7447618">range</span>&nbsp;<span class="ident" id="7447624">ti</span><span class="op" id="7447626">.</span><span class="ident" id="7447627">setupCmds</span>&nbsp;<span class="op" id="7447637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7447641">if</span>&nbsp;<span class="ident" id="7447644">err</span>&nbsp;<span class="op" id="7447648">:=</span>&nbsp;<span class="ident" id="7447651">cmd</span><span class="op" id="7447654">.</span><span class="ident" id="7447655">Run</span><span class="op" id="7447658">(</span><span class="op" id="7447659">)</span><span class="op" id="7447660">;</span>&nbsp;<span class="ident" id="7447662">err</span>&nbsp;<span class="op" id="7447666">!=</span>&nbsp;<span class="ident" id="7447669">nil</span>&nbsp;<span class="op" id="7447673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7447678">return</span>&nbsp;<span class="ident" id="7447685">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7447691">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7447694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7447697">return</span>&nbsp;<span class="ident" id="7447704">nil</span><br>
<span class="lineno"></span><span class="op" id="7447708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7447711">func</span>&nbsp;<span class="op" id="7447716">(</span><span class="ident" id="7447717">ti</span>&nbsp;<span class="op" id="7447720">*</span><span class="ident" id="7447721">testInterface</span><span class="op" id="7447734">)</span>&nbsp;<span class="ident" id="7447736">teardown</span><span class="op" id="7447744">(</span><span class="op" id="7447745">)</span>&nbsp;<span class="builtintype" id="7447747">error</span>&nbsp;<span class="op" id="7447753">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7447756">for</span>&nbsp;<span class="ident" id="7447760">_</span><span class="op" id="7447761">,</span>&nbsp;<span class="ident" id="7447763">cmd</span>&nbsp;<span class="op" id="7447767">:=</span>&nbsp;<span class="keyword" id="7447770">range</span>&nbsp;<span class="ident" id="7447776">ti</span><span class="op" id="7447778">.</span><span class="ident" id="7447779">teardownCmds</span>&nbsp;<span class="op" id="7447792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7447796">if</span>&nbsp;<span class="ident" id="7447799">err</span>&nbsp;<span class="op" id="7447803">:=</span>&nbsp;<span class="ident" id="7447806">cmd</span><span class="op" id="7447809">.</span><span class="ident" id="7447810">Run</span><span class="op" id="7447813">(</span><span class="op" id="7447814">)</span><span class="op" id="7447815">;</span>&nbsp;<span class="ident" id="7447817">err</span>&nbsp;<span class="op" id="7447821">!=</span>&nbsp;<span class="ident" id="7447824">nil</span>&nbsp;<span class="op" id="7447828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7447833">return</span>&nbsp;<span class="ident" id="7447840">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7447846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7447849">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7447852">return</span>&nbsp;<span class="ident" id="7447859">nil</span><br>
<span class="lineno"></span><span class="op" id="7447863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7447866">func</span>&nbsp;<span class="ident" id="7447871">TestPointToPointInterface</span><span class="op" id="7447896">(</span><span class="ident" id="7447897">t</span>&nbsp;<span class="op" id="7447899">*</span><span class="ident" id="7447900">testing</span><span class="op" id="7447907">.</span><span class="ident" id="7447908">T</span><span class="op" id="7447909">)</span>&nbsp;<span class="op" id="7447911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7447914">if</span>&nbsp;<span class="ident" id="7447917">testing</span><span class="op" id="7447924">.</span><span class="ident" id="7447925">Short</span><span class="op" id="7447930">(</span><span class="op" id="7447931">)</span>&nbsp;<span class="op" id="7447933">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7447937">t</span><span class="op" id="7447938">.</span><span class="ident" id="7447939">Skip</span><span class="op" id="7447943">(</span><span class="string" id="7447944">&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7447973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7447976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7447979">switch</span>&nbsp;<span class="op" id="7447986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7447989">case</span>&nbsp;<span class="ident" id="7447994">runtime</span><span class="op" id="7448001">.</span><span class="ident" id="7448002">GOOS</span>&nbsp;<span class="op" id="7448007">==</span>&nbsp;<span class="string" id="7448010">&#34;darwin&#34;</span><span class="op" id="7448018">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448022">t</span><span class="op" id="7448023">.</span><span class="ident" id="7448024">Skipf</span><span class="op" id="7448029">(</span><span class="string" id="7448030">&#34;skipping&nbsp;read&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7448056">,</span>&nbsp;<span class="ident" id="7448058">runtime</span><span class="op" id="7448065">.</span><span class="ident" id="7448066">GOOS</span><span class="op" id="7448070">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7448076">if</span>&nbsp;<span class="ident" id="7448079">os</span><span class="op" id="7448081">.</span><span class="ident" id="7448082">Getuid</span><span class="op" id="7448088">(</span><span class="op" id="7448089">)</span>&nbsp;<span class="op" id="7448091">!=</span>&nbsp;<span class="num" id="7448094">0</span>&nbsp;<span class="op" id="7448096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448100">t</span><span class="op" id="7448101">.</span><span class="ident" id="7448102">Skip</span><span class="op" id="7448106">(</span><span class="string" id="7448107">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="7448136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448143">local</span><span class="op" id="7448148">,</span>&nbsp;<span class="ident" id="7448150">remote</span>&nbsp;<span class="op" id="7448157">:=</span>&nbsp;<span class="string" id="7448160">&#34;169.254.0.1&#34;</span><span class="op" id="7448173">,</span>&nbsp;<span class="string" id="7448175">&#34;169.254.0.254&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448192">ip</span>&nbsp;<span class="op" id="7448195">:=</span>&nbsp;<span class="ident" id="7448198">ParseIP</span><span class="op" id="7448205">(</span><span class="ident" id="7448206">remote</span><span class="op" id="7448212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7448215">for</span>&nbsp;<span class="ident" id="7448219">i</span>&nbsp;<span class="op" id="7448221">:=</span>&nbsp;<span class="num" id="7448224">0</span><span class="op" id="7448225">;</span>&nbsp;<span class="ident" id="7448227">i</span>&nbsp;<span class="op" id="7448229">&lt;</span>&nbsp;<span class="num" id="7448231">3</span><span class="op" id="7448232">;</span>&nbsp;<span class="ident" id="7448234">i</span><span class="op" id="7448235">++</span>&nbsp;<span class="op" id="7448238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448242">ti</span>&nbsp;<span class="op" id="7448245">:=</span>&nbsp;<span class="op" id="7448248">&amp;</span><span class="ident" id="7448249">testInterface</span><span class="op" id="7448262">{</span><span class="op" id="7448263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7448267">if</span>&nbsp;<span class="ident" id="7448270">err</span>&nbsp;<span class="op" id="7448274">:=</span>&nbsp;<span class="ident" id="7448277">ti</span><span class="op" id="7448279">.</span><span class="ident" id="7448280">setPointToPoint</span><span class="op" id="7448295">(</span><span class="num" id="7448296">5963</span><span class="op" id="7448300">+</span><span class="ident" id="7448301">i</span><span class="op" id="7448302">,</span>&nbsp;<span class="ident" id="7448304">local</span><span class="op" id="7448309">,</span>&nbsp;<span class="ident" id="7448311">remote</span><span class="op" id="7448317">)</span><span class="op" id="7448318">;</span>&nbsp;<span class="ident" id="7448320">err</span>&nbsp;<span class="op" id="7448324">!=</span>&nbsp;<span class="ident" id="7448327">nil</span>&nbsp;<span class="op" id="7448331">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448336">t</span><span class="op" id="7448337">.</span><span class="ident" id="7448338">Skipf</span><span class="op" id="7448343">(</span><span class="string" id="7448344">&#34;test&nbsp;requries&nbsp;external&nbsp;command:&nbsp;%v&#34;</span><span class="op" id="7448380">,</span>&nbsp;<span class="ident" id="7448382">err</span><span class="op" id="7448385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7448393">if</span>&nbsp;<span class="ident" id="7448396">err</span>&nbsp;<span class="op" id="7448400">:=</span>&nbsp;<span class="ident" id="7448403">ti</span><span class="op" id="7448405">.</span><span class="ident" id="7448406">setup</span><span class="op" id="7448411">(</span><span class="op" id="7448412">)</span><span class="op" id="7448413">;</span>&nbsp;<span class="ident" id="7448415">err</span>&nbsp;<span class="op" id="7448419">!=</span>&nbsp;<span class="ident" id="7448422">nil</span>&nbsp;<span class="op" id="7448426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448431">t</span><span class="op" id="7448432">.</span><span class="ident" id="7448433">Fatalf</span><span class="op" id="7448439">(</span><span class="string" id="7448440">&#34;testInterface.setup&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7448472">,</span>&nbsp;<span class="ident" id="7448474">err</span><span class="op" id="7448477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448481">}</span>&nbsp;<span class="keyword" id="7448483">else</span>&nbsp;<span class="op" id="7448488">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448493">time</span><span class="op" id="7448497">.</span><span class="ident" id="7448498">Sleep</span><span class="op" id="7448503">(</span><span class="num" id="7448504">3</span>&nbsp;<span class="op" id="7448506">*</span>&nbsp;<span class="ident" id="7448508">time</span><span class="op" id="7448512">.</span><span class="ident" id="7448513">Millisecond</span><span class="op" id="7448524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448532">ift</span><span class="op" id="7448535">,</span>&nbsp;<span class="ident" id="7448537">err</span>&nbsp;<span class="op" id="7448541">:=</span>&nbsp;<span class="ident" id="7448544">Interfaces</span><span class="op" id="7448554">(</span><span class="op" id="7448555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7448559">if</span>&nbsp;<span class="ident" id="7448562">err</span>&nbsp;<span class="op" id="7448566">!=</span>&nbsp;<span class="ident" id="7448569">nil</span>&nbsp;<span class="op" id="7448573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448578">ti</span><span class="op" id="7448580">.</span><span class="ident" id="7448581">teardown</span><span class="op" id="7448589">(</span><span class="op" id="7448590">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448595">t</span><span class="op" id="7448596">.</span><span class="ident" id="7448597">Fatalf</span><span class="op" id="7448603">(</span><span class="string" id="7448604">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7448627">,</span>&nbsp;<span class="ident" id="7448629">err</span><span class="op" id="7448632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7448640">for</span>&nbsp;<span class="ident" id="7448644">_</span><span class="op" id="7448645">,</span>&nbsp;<span class="ident" id="7448647">ifi</span>&nbsp;<span class="op" id="7448651">:=</span>&nbsp;<span class="keyword" id="7448654">range</span>&nbsp;<span class="ident" id="7448660">ift</span>&nbsp;<span class="op" id="7448664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7448669">if</span>&nbsp;<span class="ident" id="7448672">ti</span><span class="op" id="7448674">.</span><span class="ident" id="7448675">name</span>&nbsp;<span class="op" id="7448680">==</span>&nbsp;<span class="ident" id="7448683">ifi</span><span class="op" id="7448686">.</span><span class="ident" id="7448687">Name</span>&nbsp;<span class="op" id="7448692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448698">ifat</span><span class="op" id="7448702">,</span>&nbsp;<span class="ident" id="7448704">err</span>&nbsp;<span class="op" id="7448708">:=</span>&nbsp;<span class="ident" id="7448711">ifi</span><span class="op" id="7448714">.</span><span class="ident" id="7448715">Addrs</span><span class="op" id="7448720">(</span><span class="op" id="7448721">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7448727">if</span>&nbsp;<span class="ident" id="7448730">err</span>&nbsp;<span class="op" id="7448734">!=</span>&nbsp;<span class="ident" id="7448737">nil</span>&nbsp;<span class="op" id="7448741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448748">ti</span><span class="op" id="7448750">.</span><span class="ident" id="7448751">teardown</span><span class="op" id="7448759">(</span><span class="op" id="7448760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448767">t</span><span class="op" id="7448768">.</span><span class="ident" id="7448769">Fatalf</span><span class="op" id="7448775">(</span><span class="string" id="7448776">&#34;Interface.Addrs&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7448804">,</span>&nbsp;<span class="ident" id="7448806">err</span><span class="op" id="7448809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7448821">for</span>&nbsp;<span class="ident" id="7448825">_</span><span class="op" id="7448826">,</span>&nbsp;<span class="ident" id="7448828">ifa</span>&nbsp;<span class="op" id="7448832">:=</span>&nbsp;<span class="keyword" id="7448835">range</span>&nbsp;<span class="ident" id="7448841">ifat</span>&nbsp;<span class="op" id="7448846">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7448853">if</span>&nbsp;<span class="ident" id="7448856">ip</span><span class="op" id="7448858">.</span><span class="ident" id="7448859">Equal</span><span class="op" id="7448864">(</span><span class="ident" id="7448865">ifa</span><span class="op" id="7448868">.</span><span class="op" id="7448869">(</span><span class="op" id="7448870">*</span><span class="ident" id="7448871">IPNet</span><span class="op" id="7448876">)</span><span class="op" id="7448877">.</span><span class="ident" id="7448878">IP</span><span class="op" id="7448880">)</span>&nbsp;<span class="op" id="7448882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448890">ti</span><span class="op" id="7448892">.</span><span class="ident" id="7448893">teardown</span><span class="op" id="7448901">(</span><span class="op" id="7448902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448910">t</span><span class="op" id="7448911">.</span><span class="ident" id="7448912">Fatalf</span><span class="op" id="7448918">(</span><span class="string" id="7448919">&#34;got&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7448936">,</span>&nbsp;<span class="ident" id="7448938">ip</span><span class="op" id="7448940">,</span>&nbsp;<span class="ident" id="7448942">local</span><span class="op" id="7448947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448960">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7448973">if</span>&nbsp;<span class="ident" id="7448976">err</span>&nbsp;<span class="op" id="7448980">:=</span>&nbsp;<span class="ident" id="7448983">ti</span><span class="op" id="7448985">.</span><span class="ident" id="7448986">teardown</span><span class="op" id="7448994">(</span><span class="op" id="7448995">)</span><span class="op" id="7448996">;</span>&nbsp;<span class="ident" id="7448998">err</span>&nbsp;<span class="op" id="7449002">!=</span>&nbsp;<span class="ident" id="7449005">nil</span>&nbsp;<span class="op" id="7449009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449014">t</span><span class="op" id="7449015">.</span><span class="ident" id="7449016">Fatalf</span><span class="op" id="7449022">(</span><span class="string" id="7449023">&#34;testInterface.teardown&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7449058">,</span>&nbsp;<span class="ident" id="7449060">err</span><span class="op" id="7449063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449067">}</span>&nbsp;<span class="keyword" id="7449069">else</span>&nbsp;<span class="op" id="7449074">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449079">time</span><span class="op" id="7449083">.</span><span class="ident" id="7449084">Sleep</span><span class="op" id="7449089">(</span><span class="num" id="7449090">3</span>&nbsp;<span class="op" id="7449092">*</span>&nbsp;<span class="ident" id="7449094">time</span><span class="op" id="7449098">.</span><span class="ident" id="7449099">Millisecond</span><span class="op" id="7449110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449117">}</span><br>
<span class="lineno"></span><span class="op" id="7449119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7449122">func</span>&nbsp;<span class="ident" id="7449127">TestInterfaceArrivalAndDeparture</span><span class="op" id="7449159">(</span><span class="ident" id="7449160">t</span>&nbsp;<span class="op" id="7449162">*</span><span class="ident" id="7449163">testing</span><span class="op" id="7449170">.</span><span class="ident" id="7449171">T</span><span class="op" id="7449172">)</span>&nbsp;<span class="op" id="7449174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7449177">if</span>&nbsp;<span class="ident" id="7449180">testing</span><span class="op" id="7449187">.</span><span class="ident" id="7449188">Short</span><span class="op" id="7449193">(</span><span class="op" id="7449194">)</span>&nbsp;<span class="op" id="7449196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449200">t</span><span class="op" id="7449201">.</span><span class="ident" id="7449202">Skip</span><span class="op" id="7449206">(</span><span class="string" id="7449207">&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7449236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7449242">if</span>&nbsp;<span class="ident" id="7449245">os</span><span class="op" id="7449247">.</span><span class="ident" id="7449248">Getuid</span><span class="op" id="7449254">(</span><span class="op" id="7449255">)</span>&nbsp;<span class="op" id="7449257">!=</span>&nbsp;<span class="num" id="7449260">0</span>&nbsp;<span class="op" id="7449262">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449266">t</span><span class="op" id="7449267">.</span><span class="ident" id="7449268">Skip</span><span class="op" id="7449272">(</span><span class="string" id="7449273">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="7449302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7449309">for</span>&nbsp;<span class="ident" id="7449313">i</span>&nbsp;<span class="op" id="7449315">:=</span>&nbsp;<span class="num" id="7449318">0</span><span class="op" id="7449319">;</span>&nbsp;<span class="ident" id="7449321">i</span>&nbsp;<span class="op" id="7449323">&lt;</span>&nbsp;<span class="num" id="7449325">3</span><span class="op" id="7449326">;</span>&nbsp;<span class="ident" id="7449328">i</span><span class="op" id="7449329">++</span>&nbsp;<span class="op" id="7449332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449336">ift1</span><span class="op" id="7449340">,</span>&nbsp;<span class="ident" id="7449342">err</span>&nbsp;<span class="op" id="7449346">:=</span>&nbsp;<span class="ident" id="7449349">Interfaces</span><span class="op" id="7449359">(</span><span class="op" id="7449360">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7449364">if</span>&nbsp;<span class="ident" id="7449367">err</span>&nbsp;<span class="op" id="7449371">!=</span>&nbsp;<span class="ident" id="7449374">nil</span>&nbsp;<span class="op" id="7449378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449383">t</span><span class="op" id="7449384">.</span><span class="ident" id="7449385">Fatalf</span><span class="op" id="7449391">(</span><span class="string" id="7449392">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7449415">,</span>&nbsp;<span class="ident" id="7449417">err</span><span class="op" id="7449420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449428">ti</span>&nbsp;<span class="op" id="7449431">:=</span>&nbsp;<span class="op" id="7449434">&amp;</span><span class="ident" id="7449435">testInterface</span><span class="op" id="7449448">{</span><span class="op" id="7449449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7449453">if</span>&nbsp;<span class="ident" id="7449456">err</span>&nbsp;<span class="op" id="7449460">:=</span>&nbsp;<span class="ident" id="7449463">ti</span><span class="op" id="7449465">.</span><span class="ident" id="7449466">setBroadcast</span><span class="op" id="7449478">(</span><span class="num" id="7449479">5682</span>&nbsp;<span class="op" id="7449484">+</span>&nbsp;<span class="ident" id="7449486">i</span><span class="op" id="7449487">)</span><span class="op" id="7449488">;</span>&nbsp;<span class="ident" id="7449490">err</span>&nbsp;<span class="op" id="7449494">!=</span>&nbsp;<span class="ident" id="7449497">nil</span>&nbsp;<span class="op" id="7449501">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449506">t</span><span class="op" id="7449507">.</span><span class="ident" id="7449508">Skipf</span><span class="op" id="7449513">(</span><span class="string" id="7449514">&#34;test&nbsp;requires&nbsp;external&nbsp;command:&nbsp;%v&#34;</span><span class="op" id="7449550">,</span>&nbsp;<span class="ident" id="7449552">err</span><span class="op" id="7449555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7449563">if</span>&nbsp;<span class="ident" id="7449566">err</span>&nbsp;<span class="op" id="7449570">:=</span>&nbsp;<span class="ident" id="7449573">ti</span><span class="op" id="7449575">.</span><span class="ident" id="7449576">setup</span><span class="op" id="7449581">(</span><span class="op" id="7449582">)</span><span class="op" id="7449583">;</span>&nbsp;<span class="ident" id="7449585">err</span>&nbsp;<span class="op" id="7449589">!=</span>&nbsp;<span class="ident" id="7449592">nil</span>&nbsp;<span class="op" id="7449596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449601">t</span><span class="op" id="7449602">.</span><span class="ident" id="7449603">Fatalf</span><span class="op" id="7449609">(</span><span class="string" id="7449610">&#34;testInterface.setup&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7449642">,</span>&nbsp;<span class="ident" id="7449644">err</span><span class="op" id="7449647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449651">}</span>&nbsp;<span class="keyword" id="7449653">else</span>&nbsp;<span class="op" id="7449658">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449663">time</span><span class="op" id="7449667">.</span><span class="ident" id="7449668">Sleep</span><span class="op" id="7449673">(</span><span class="num" id="7449674">3</span>&nbsp;<span class="op" id="7449676">*</span>&nbsp;<span class="ident" id="7449678">time</span><span class="op" id="7449682">.</span><span class="ident" id="7449683">Millisecond</span><span class="op" id="7449694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449702">ift2</span><span class="op" id="7449706">,</span>&nbsp;<span class="ident" id="7449708">err</span>&nbsp;<span class="op" id="7449712">:=</span>&nbsp;<span class="ident" id="7449715">Interfaces</span><span class="op" id="7449725">(</span><span class="op" id="7449726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7449730">if</span>&nbsp;<span class="ident" id="7449733">err</span>&nbsp;<span class="op" id="7449737">!=</span>&nbsp;<span class="ident" id="7449740">nil</span>&nbsp;<span class="op" id="7449744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449749">ti</span><span class="op" id="7449751">.</span><span class="ident" id="7449752">teardown</span><span class="op" id="7449760">(</span><span class="op" id="7449761">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449766">t</span><span class="op" id="7449767">.</span><span class="ident" id="7449768">Fatalf</span><span class="op" id="7449774">(</span><span class="string" id="7449775">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7449798">,</span>&nbsp;<span class="ident" id="7449800">err</span><span class="op" id="7449803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7449811">if</span>&nbsp;<span class="builtinfunc" id="7449814">len</span><span class="op" id="7449817">(</span><span class="ident" id="7449818">ift2</span><span class="op" id="7449822">)</span>&nbsp;<span class="op" id="7449824">&lt;=</span>&nbsp;<span class="builtinfunc" id="7449827">len</span><span class="op" id="7449830">(</span><span class="ident" id="7449831">ift1</span><span class="op" id="7449835">)</span>&nbsp;<span class="op" id="7449837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7449842">for</span>&nbsp;<span class="ident" id="7449846">_</span><span class="op" id="7449847">,</span>&nbsp;<span class="ident" id="7449849">ifi</span>&nbsp;<span class="op" id="7449853">:=</span>&nbsp;<span class="keyword" id="7449856">range</span>&nbsp;<span class="ident" id="7449862">ift1</span>&nbsp;<span class="op" id="7449867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449873">t</span><span class="op" id="7449874">.</span><span class="ident" id="7449875">Logf</span><span class="op" id="7449879">(</span><span class="string" id="7449880">&#34;before:&nbsp;%v&#34;</span><span class="op" id="7449892">,</span>&nbsp;<span class="ident" id="7449894">ifi</span><span class="op" id="7449897">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7449907">for</span>&nbsp;<span class="ident" id="7449911">_</span><span class="op" id="7449912">,</span>&nbsp;<span class="ident" id="7449914">ifi</span>&nbsp;<span class="op" id="7449918">:=</span>&nbsp;<span class="keyword" id="7449921">range</span>&nbsp;<span class="ident" id="7449927">ift2</span>&nbsp;<span class="op" id="7449932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449938">t</span><span class="op" id="7449939">.</span><span class="ident" id="7449940">Logf</span><span class="op" id="7449944">(</span><span class="string" id="7449945">&#34;after:&nbsp;%v&#34;</span><span class="op" id="7449956">,</span>&nbsp;<span class="ident" id="7449958">ifi</span><span class="op" id="7449961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449971">ti</span><span class="op" id="7449973">.</span><span class="ident" id="7449974">teardown</span><span class="op" id="7449982">(</span><span class="op" id="7449983">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7449988">t</span><span class="op" id="7449989">.</span><span class="ident" id="7449990">Fatalf</span><span class="op" id="7449996">(</span><span class="string" id="7449997">&#34;got&nbsp;%v;&nbsp;want&nbsp;gt&nbsp;%v&#34;</span><span class="op" id="7450017">,</span>&nbsp;<span class="builtinfunc" id="7450019">len</span><span class="op" id="7450022">(</span><span class="ident" id="7450023">ift2</span><span class="op" id="7450027">)</span><span class="op" id="7450028">,</span>&nbsp;<span class="builtinfunc" id="7450030">len</span><span class="op" id="7450033">(</span><span class="ident" id="7450034">ift1</span><span class="op" id="7450038">)</span><span class="op" id="7450039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7450047">if</span>&nbsp;<span class="ident" id="7450050">err</span>&nbsp;<span class="op" id="7450054">:=</span>&nbsp;<span class="ident" id="7450057">ti</span><span class="op" id="7450059">.</span><span class="ident" id="7450060">teardown</span><span class="op" id="7450068">(</span><span class="op" id="7450069">)</span><span class="op" id="7450070">;</span>&nbsp;<span class="ident" id="7450072">err</span>&nbsp;<span class="op" id="7450076">!=</span>&nbsp;<span class="ident" id="7450079">nil</span>&nbsp;<span class="op" id="7450083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7450088">t</span><span class="op" id="7450089">.</span><span class="ident" id="7450090">Fatalf</span><span class="op" id="7450096">(</span><span class="string" id="7450097">&#34;testInterface.teardown&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7450132">,</span>&nbsp;<span class="ident" id="7450134">err</span><span class="op" id="7450137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450141">}</span>&nbsp;<span class="keyword" id="7450143">else</span>&nbsp;<span class="op" id="7450148">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7450153">time</span><span class="op" id="7450157">.</span><span class="ident" id="7450158">Sleep</span><span class="op" id="7450163">(</span><span class="num" id="7450164">3</span>&nbsp;<span class="op" id="7450166">*</span>&nbsp;<span class="ident" id="7450168">time</span><span class="op" id="7450172">.</span><span class="ident" id="7450173">Millisecond</span><span class="op" id="7450184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7450192">ift3</span><span class="op" id="7450196">,</span>&nbsp;<span class="ident" id="7450198">err</span>&nbsp;<span class="op" id="7450202">:=</span>&nbsp;<span class="ident" id="7450205">Interfaces</span><span class="op" id="7450215">(</span><span class="op" id="7450216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7450220">if</span>&nbsp;<span class="ident" id="7450223">err</span>&nbsp;<span class="op" id="7450227">!=</span>&nbsp;<span class="ident" id="7450230">nil</span>&nbsp;<span class="op" id="7450234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7450239">t</span><span class="op" id="7450240">.</span><span class="ident" id="7450241">Fatalf</span><span class="op" id="7450247">(</span><span class="string" id="7450248">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7450271">,</span>&nbsp;<span class="ident" id="7450273">err</span><span class="op" id="7450276">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7450284">if</span>&nbsp;<span class="builtinfunc" id="7450287">len</span><span class="op" id="7450290">(</span><span class="ident" id="7450291">ift3</span><span class="op" id="7450295">)</span>&nbsp;<span class="op" id="7450297">&gt;=</span>&nbsp;<span class="builtinfunc" id="7450300">len</span><span class="op" id="7450303">(</span><span class="ident" id="7450304">ift2</span><span class="op" id="7450308">)</span>&nbsp;<span class="op" id="7450310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7450315">for</span>&nbsp;<span class="ident" id="7450319">_</span><span class="op" id="7450320">,</span>&nbsp;<span class="ident" id="7450322">ifi</span>&nbsp;<span class="op" id="7450326">:=</span>&nbsp;<span class="keyword" id="7450329">range</span>&nbsp;<span class="ident" id="7450335">ift2</span>&nbsp;<span class="op" id="7450340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7450346">t</span><span class="op" id="7450347">.</span><span class="ident" id="7450348">Logf</span><span class="op" id="7450352">(</span><span class="string" id="7450353">&#34;before:&nbsp;%v&#34;</span><span class="op" id="7450365">,</span>&nbsp;<span class="ident" id="7450367">ifi</span><span class="op" id="7450370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450375">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7450380">for</span>&nbsp;<span class="ident" id="7450384">_</span><span class="op" id="7450385">,</span>&nbsp;<span class="ident" id="7450387">ifi</span>&nbsp;<span class="op" id="7450391">:=</span>&nbsp;<span class="keyword" id="7450394">range</span>&nbsp;<span class="ident" id="7450400">ift3</span>&nbsp;<span class="op" id="7450405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7450411">t</span><span class="op" id="7450412">.</span><span class="ident" id="7450413">Logf</span><span class="op" id="7450417">(</span><span class="string" id="7450418">&#34;after:&nbsp;%v&#34;</span><span class="op" id="7450429">,</span>&nbsp;<span class="ident" id="7450431">ifi</span><span class="op" id="7450434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7450444">t</span><span class="op" id="7450445">.</span><span class="ident" id="7450446">Fatalf</span><span class="op" id="7450452">(</span><span class="string" id="7450453">&#34;got&nbsp;%v;&nbsp;want&nbsp;lt&nbsp;%v&#34;</span><span class="op" id="7450473">,</span>&nbsp;<span class="builtinfunc" id="7450475">len</span><span class="op" id="7450478">(</span><span class="ident" id="7450479">ift3</span><span class="op" id="7450483">)</span><span class="op" id="7450484">,</span>&nbsp;<span class="builtinfunc" id="7450486">len</span><span class="op" id="7450489">(</span><span class="ident" id="7450490">ift2</span><span class="op" id="7450494">)</span><span class="op" id="7450495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450499">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450502">}</span><br>
<span class="lineno"></span><span class="op" id="7450504">}</span>
</div>
</body>
</html>
