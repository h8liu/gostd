<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html" class="current">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1581443">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1581498">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1581552">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1581603">package</span>&nbsp;<span class="ident" id="1581611">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1581620">import</span>&nbsp;<span class="string" id="1581627">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1581637">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*m.</span><br>
<span class="lineno">10</span><span class="keyword" id="1581679">func</span>&nbsp;<span class="ident" id="1581684">gc_m_ptr</span><span class="op" id="1581692">(</span><span class="ident" id="1581693">ret</span>&nbsp;<span class="op" id="1581697">*</span><span class="keyword" id="1581698">interface</span><span class="op" id="1581707">{</span><span class="op" id="1581708">}</span><span class="op" id="1581709">)</span>&nbsp;<span class="op" id="1581711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1581714">*</span><span class="ident" id="1581715">ret</span>&nbsp;<span class="op" id="1581719">=</span>&nbsp;<span class="op" id="1581721">(</span><span class="op" id="1581722">*</span><span class="ident" id="1581723">m</span><span class="op" id="1581724">)</span><span class="op" id="1581725">(</span><span class="builtintype" id="1581726">nil</span><span class="op" id="1581729">)</span><br>
<span class="lineno"></span><span class="op" id="1581731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1581734">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*g.</span><br>
<span class="lineno">15</span><span class="keyword" id="1581776">func</span>&nbsp;<span class="ident" id="1581781">gc_g_ptr</span><span class="op" id="1581789">(</span><span class="ident" id="1581790">ret</span>&nbsp;<span class="op" id="1581794">*</span><span class="keyword" id="1581795">interface</span><span class="op" id="1581804">{</span><span class="op" id="1581805">}</span><span class="op" id="1581806">)</span>&nbsp;<span class="op" id="1581808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1581811">*</span><span class="ident" id="1581812">ret</span>&nbsp;<span class="op" id="1581816">=</span>&nbsp;<span class="op" id="1581818">(</span><span class="op" id="1581819">*</span><span class="ident" id="1581820">g</span><span class="op" id="1581821">)</span><span class="op" id="1581822">(</span><span class="builtintype" id="1581823">nil</span><span class="op" id="1581826">)</span><br>
<span class="lineno"></span><span class="op" id="1581828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1581831">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*itab.</span><br>
<span class="lineno">20</span><span class="keyword" id="1581876">func</span>&nbsp;<span class="ident" id="1581881">gc_itab_ptr</span><span class="op" id="1581892">(</span><span class="ident" id="1581893">ret</span>&nbsp;<span class="op" id="1581897">*</span><span class="keyword" id="1581898">interface</span><span class="op" id="1581907">{</span><span class="op" id="1581908">}</span><span class="op" id="1581909">)</span>&nbsp;<span class="op" id="1581911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1581914">*</span><span class="ident" id="1581915">ret</span>&nbsp;<span class="op" id="1581919">=</span>&nbsp;<span class="op" id="1581921">(</span><span class="op" id="1581922">*</span><span class="ident" id="1581923">itab</span><span class="op" id="1581927">)</span><span class="op" id="1581928">(</span><span class="builtintype" id="1581929">nil</span><span class="op" id="1581932">)</span><br>
<span class="lineno"></span><span class="op" id="1581934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1581937">func</span>&nbsp;<span class="ident" id="1581942">gc_unixnanotime</span><span class="op" id="1581957">(</span><span class="ident" id="1581958">now</span>&nbsp;<span class="op" id="1581962">*</span><span class="ident" id="1581963">int64</span><span class="op" id="1581968">)</span>&nbsp;<span class="op" id="1581970">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1581973">sec</span><span class="op" id="1581976">,</span>&nbsp;<span class="ident" id="1581978">nsec</span>&nbsp;<span class="op" id="1581983">:=</span>&nbsp;<span class="ident" id="1581986">timenow</span><span class="op" id="1581993">(</span><span class="op" id="1581994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1581997">*</span><span class="ident" id="1581998">now</span>&nbsp;<span class="op" id="1582002">=</span>&nbsp;<span class="ident" id="1582004">sec</span><span class="op" id="1582007">*</span><span class="num" id="1582008">1e9</span>&nbsp;<span class="op" id="1582012">+</span>&nbsp;<span class="ident" id="1582014">int64</span><span class="op" id="1582019">(</span><span class="ident" id="1582020">nsec</span><span class="op" id="1582024">)</span><br>
<span class="lineno"></span><span class="op" id="1582026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1582029">func</span>&nbsp;<span class="ident" id="1582034">freeOSMemory</span><span class="op" id="1582046">(</span><span class="op" id="1582047">)</span>&nbsp;<span class="op" id="1582049">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1582052">gogc</span><span class="op" id="1582056">(</span><span class="num" id="1582057">2</span><span class="op" id="1582058">)</span>&nbsp;<span class="comment" id="1582060">//&nbsp;force&nbsp;GC&nbsp;and&nbsp;do&nbsp;eager&nbsp;sweep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1582092">onM</span><span class="op" id="1582095">(</span><span class="ident" id="1582096">scavenge_m</span><span class="op" id="1582106">)</span><br>
<span class="lineno"></span><span class="op" id="1582108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1582111">var</span>&nbsp;<span class="ident" id="1582115">poolcleanup</span>&nbsp;<span class="keyword" id="1582127">func</span><span class="op" id="1582131">(</span><span class="op" id="1582132">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="1582135">func</span>&nbsp;<span class="ident" id="1582140">registerPoolCleanup</span><span class="op" id="1582159">(</span><span class="ident" id="1582160">f</span>&nbsp;<span class="keyword" id="1582162">func</span><span class="op" id="1582166">(</span><span class="op" id="1582167">)</span><span class="op" id="1582168">)</span>&nbsp;<span class="op" id="1582170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1582173">poolcleanup</span>&nbsp;<span class="op" id="1582185">=</span>&nbsp;<span class="ident" id="1582187">f</span><br>
<span class="lineno"></span><span class="op" id="1582189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="1582192">func</span>&nbsp;<span class="ident" id="1582197">clearpools</span><span class="op" id="1582207">(</span><span class="op" id="1582208">)</span>&nbsp;<span class="op" id="1582210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1582213">//&nbsp;clear&nbsp;sync.Pools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1582234">if</span>&nbsp;<span class="ident" id="1582237">poolcleanup</span>&nbsp;<span class="op" id="1582249">!=</span>&nbsp;<span class="builtintype" id="1582252">nil</span>&nbsp;<span class="op" id="1582256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1582260">poolcleanup</span><span class="op" id="1582271">(</span><span class="op" id="1582272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1582275">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1582279">for</span>&nbsp;<span class="ident" id="1582283">_</span><span class="op" id="1582284">,</span>&nbsp;<span class="ident" id="1582286">p</span>&nbsp;<span class="op" id="1582288">:=</span>&nbsp;<span class="keyword" id="1582291">range</span>&nbsp;<span class="op" id="1582297">&amp;</span><span class="ident" id="1582298">allp</span>&nbsp;<span class="op" id="1582303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1582307">if</span>&nbsp;<span class="ident" id="1582310">p</span>&nbsp;<span class="op" id="1582312">==</span>&nbsp;<span class="builtintype" id="1582315">nil</span>&nbsp;<span class="op" id="1582319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1582324">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1582332">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1582336">//&nbsp;clear&nbsp;tinyalloc&nbsp;pool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1582362">if</span>&nbsp;<span class="ident" id="1582365">c</span>&nbsp;<span class="op" id="1582367">:=</span>&nbsp;<span class="ident" id="1582370">p</span><span class="op" id="1582371">.</span><span class="ident" id="1582372">mcache</span><span class="op" id="1582378">;</span>&nbsp;<span class="ident" id="1582380">c</span>&nbsp;<span class="op" id="1582382">!=</span>&nbsp;<span class="builtintype" id="1582385">nil</span>&nbsp;<span class="op" id="1582389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1582394">c</span><span class="op" id="1582395">.</span><span class="ident" id="1582396">tiny</span>&nbsp;<span class="op" id="1582401">=</span>&nbsp;<span class="builtintype" id="1582403">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1582410">c</span><span class="op" id="1582411">.</span><span class="ident" id="1582412">tinysize</span>&nbsp;<span class="op" id="1582421">=</span>&nbsp;<span class="num" id="1582423">0</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1582429">//&nbsp;disconnect&nbsp;cached&nbsp;list&nbsp;before&nbsp;dropping&nbsp;it&nbsp;on&nbsp;the&nbsp;floor,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1582491">//&nbsp;so&nbsp;that&nbsp;a&nbsp;dangling&nbsp;ref&nbsp;to&nbsp;one&nbsp;entry&nbsp;does&nbsp;not&nbsp;pin&nbsp;all&nbsp;of&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1582559">var</span>&nbsp;<span class="ident" id="1582563">sg</span><span class="op" id="1582565">,</span>&nbsp;<span class="ident" id="1582567">sgnext</span>&nbsp;<span class="op" id="1582574">*</span><span class="ident" id="1582575">sudog</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1582584">for</span>&nbsp;<span class="ident" id="1582588">sg</span>&nbsp;<span class="op" id="1582591">=</span>&nbsp;<span class="ident" id="1582593">c</span><span class="op" id="1582594">.</span><span class="ident" id="1582595">sudogcache</span><span class="op" id="1582605">;</span>&nbsp;<span class="ident" id="1582607">sg</span>&nbsp;<span class="op" id="1582610">!=</span>&nbsp;<span class="builtintype" id="1582613">nil</span><span class="op" id="1582616">;</span>&nbsp;<span class="ident" id="1582618">sg</span>&nbsp;<span class="op" id="1582621">=</span>&nbsp;<span class="ident" id="1582623">sgnext</span>&nbsp;<span class="op" id="1582630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1582636">sgnext</span>&nbsp;<span class="op" id="1582643">=</span>&nbsp;<span class="ident" id="1582645">sg</span><span class="op" id="1582647">.</span><span class="ident" id="1582648">next</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1582657">sg</span><span class="op" id="1582659">.</span><span class="ident" id="1582660">next</span>&nbsp;<span class="op" id="1582665">=</span>&nbsp;<span class="builtintype" id="1582667">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1582674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1582679">c</span><span class="op" id="1582680">.</span><span class="ident" id="1582681">sudogcache</span>&nbsp;<span class="op" id="1582692">=</span>&nbsp;<span class="builtintype" id="1582694">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1582700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1582705">//&nbsp;clear&nbsp;defer&nbsp;pools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1582728">for</span>&nbsp;<span class="ident" id="1582732">i</span>&nbsp;<span class="op" id="1582734">:=</span>&nbsp;<span class="keyword" id="1582737">range</span>&nbsp;<span class="ident" id="1582743">p</span><span class="op" id="1582744">.</span><span class="ident" id="1582745">deferpool</span>&nbsp;<span class="op" id="1582755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1582760">//&nbsp;disconnect&nbsp;cached&nbsp;list&nbsp;before&nbsp;dropping&nbsp;it&nbsp;on&nbsp;the&nbsp;floor,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1582822">//&nbsp;so&nbsp;that&nbsp;a&nbsp;dangling&nbsp;ref&nbsp;to&nbsp;one&nbsp;entry&nbsp;does&nbsp;not&nbsp;pin&nbsp;all&nbsp;of&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1582890">var</span>&nbsp;<span class="ident" id="1582894">d</span><span class="op" id="1582895">,</span>&nbsp;<span class="ident" id="1582897">dlink</span>&nbsp;<span class="op" id="1582903">*</span><span class="ident" id="1582904">_defer</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1582914">for</span>&nbsp;<span class="ident" id="1582918">d</span>&nbsp;<span class="op" id="1582920">=</span>&nbsp;<span class="ident" id="1582922">p</span><span class="op" id="1582923">.</span><span class="ident" id="1582924">deferpool</span><span class="op" id="1582933">[</span><span class="ident" id="1582934">i</span><span class="op" id="1582935">]</span><span class="op" id="1582936">;</span>&nbsp;<span class="ident" id="1582938">d</span>&nbsp;<span class="op" id="1582940">!=</span>&nbsp;<span class="builtintype" id="1582943">nil</span><span class="op" id="1582946">;</span>&nbsp;<span class="ident" id="1582948">d</span>&nbsp;<span class="op" id="1582950">=</span>&nbsp;<span class="ident" id="1582952">dlink</span>&nbsp;<span class="op" id="1582958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1582964">dlink</span>&nbsp;<span class="op" id="1582970">=</span>&nbsp;<span class="ident" id="1582972">d</span><span class="op" id="1582973">.</span><span class="ident" id="1582974">link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1582983">d</span><span class="op" id="1582984">.</span><span class="ident" id="1582985">link</span>&nbsp;<span class="op" id="1582990">=</span>&nbsp;<span class="builtintype" id="1582992">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1582999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583004">p</span><span class="op" id="1583005">.</span><span class="ident" id="1583006">deferpool</span><span class="op" id="1583015">[</span><span class="ident" id="1583016">i</span><span class="op" id="1583017">]</span>&nbsp;<span class="op" id="1583019">=</span>&nbsp;<span class="builtintype" id="1583021">nil</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1583027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1583030">}</span><br>
<span class="lineno"></span><span class="op" id="1583032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1583035">func</span>&nbsp;<span class="ident" id="1583040">gosweepone</span><span class="op" id="1583050">(</span><span class="op" id="1583051">)</span>&nbsp;<span class="builtintype" id="1583053">uintptr</span><br>
<span class="lineno">80</span><span class="keyword" id="1583061">func</span>&nbsp;<span class="ident" id="1583066">gosweepdone</span><span class="op" id="1583077">(</span><span class="op" id="1583078">)</span>&nbsp;<span class="builtintype" id="1583080">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1583086">func</span>&nbsp;<span class="ident" id="1583091">bgsweep</span><span class="op" id="1583098">(</span><span class="op" id="1583099">)</span>&nbsp;<span class="op" id="1583101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583104">getg</span><span class="op" id="1583108">(</span><span class="op" id="1583109">)</span><span class="op" id="1583110">.</span><span class="ident" id="1583111">issystem</span>&nbsp;<span class="op" id="1583120">=</span>&nbsp;<span class="builtintype" id="1583122">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1583128">for</span>&nbsp;<span class="op" id="1583132">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1583136">for</span>&nbsp;<span class="ident" id="1583140">gosweepone</span><span class="op" id="1583150">(</span><span class="op" id="1583151">)</span>&nbsp;<span class="op" id="1583153">!=</span>&nbsp;<span class="op" id="1583156">^</span><span class="builtintype" id="1583157">uintptr</span><span class="op" id="1583164">(</span><span class="num" id="1583165">0</span><span class="op" id="1583166">)</span>&nbsp;<span class="op" id="1583168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583173">sweep</span><span class="op" id="1583178">.</span><span class="ident" id="1583179">nbgsweep</span><span class="op" id="1583187">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583193">Gosched</span><span class="op" id="1583200">(</span><span class="op" id="1583201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1583205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583209">lock</span><span class="op" id="1583213">(</span><span class="op" id="1583214">&amp;</span><span class="ident" id="1583215">gclock</span><span class="op" id="1583221">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1583225">if</span>&nbsp;<span class="op" id="1583228">!</span><span class="ident" id="1583229">gosweepdone</span><span class="op" id="1583240">(</span><span class="op" id="1583241">)</span>&nbsp;<span class="op" id="1583243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1583248">//&nbsp;This&nbsp;can&nbsp;happen&nbsp;if&nbsp;a&nbsp;GC&nbsp;runs&nbsp;between</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1583291">//&nbsp;gosweepone&nbsp;returning&nbsp;^0&nbsp;above</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1583327">//&nbsp;and&nbsp;the&nbsp;lock&nbsp;being&nbsp;acquired.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583362">unlock</span><span class="op" id="1583368">(</span><span class="op" id="1583369">&amp;</span><span class="ident" id="1583370">gclock</span><span class="op" id="1583376">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1583381">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1583392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583396">sweep</span><span class="op" id="1583401">.</span><span class="ident" id="1583402">parked</span>&nbsp;<span class="op" id="1583409">=</span>&nbsp;<span class="builtintype" id="1583411">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583418">goparkunlock</span><span class="op" id="1583430">(</span><span class="op" id="1583431">&amp;</span><span class="ident" id="1583432">gclock</span><span class="op" id="1583438">,</span>&nbsp;<span class="string" id="1583440">&#34;GC&nbsp;sweep&nbsp;wait&#34;</span><span class="op" id="1583455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1583458">}</span><br>
<span class="lineno">100</span><span class="op" id="1583460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1583463">//&nbsp;NOTE:&nbsp;Really&nbsp;dst&nbsp;*unsafe.Pointer,&nbsp;src&nbsp;unsafe.Pointer,</span><br>
<span class="lineno"></span><span class="comment" id="1583520">//&nbsp;but&nbsp;if&nbsp;we&nbsp;do&nbsp;that,&nbsp;Go&nbsp;inserts&nbsp;a&nbsp;write&nbsp;barrier&nbsp;on&nbsp;*dst&nbsp;=&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="1583584">//go:nosplit</span><br>
<span class="lineno">105</span><span class="keyword" id="1583597">func</span>&nbsp;<span class="ident" id="1583602">writebarrierptr</span><span class="op" id="1583617">(</span><span class="ident" id="1583618">dst</span>&nbsp;<span class="op" id="1583622">*</span><span class="builtintype" id="1583623">uintptr</span><span class="op" id="1583630">,</span>&nbsp;<span class="ident" id="1583632">src</span>&nbsp;<span class="builtintype" id="1583636">uintptr</span><span class="op" id="1583643">)</span>&nbsp;<span class="op" id="1583645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1583648">*</span><span class="ident" id="1583649">dst</span>&nbsp;<span class="op" id="1583653">=</span>&nbsp;<span class="ident" id="1583655">src</span><br>
<span class="lineno"></span><span class="op" id="1583659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1583662">//go:nosplit</span><br>
<span class="lineno">110</span><span class="keyword" id="1583675">func</span>&nbsp;<span class="ident" id="1583680">writebarrierstring</span><span class="op" id="1583698">(</span><span class="ident" id="1583699">dst</span>&nbsp;<span class="op" id="1583703">*</span><span class="op" id="1583704">[</span><span class="num" id="1583705">2</span><span class="op" id="1583706">]</span><span class="builtintype" id="1583707">uintptr</span><span class="op" id="1583714">,</span>&nbsp;<span class="ident" id="1583716">src</span>&nbsp;<span class="op" id="1583720">[</span><span class="num" id="1583721">2</span><span class="op" id="1583722">]</span><span class="builtintype" id="1583723">uintptr</span><span class="op" id="1583730">)</span>&nbsp;<span class="op" id="1583732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583735">dst</span><span class="op" id="1583738">[</span><span class="num" id="1583739">0</span><span class="op" id="1583740">]</span>&nbsp;<span class="op" id="1583742">=</span>&nbsp;<span class="ident" id="1583744">src</span><span class="op" id="1583747">[</span><span class="num" id="1583748">0</span><span class="op" id="1583749">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583752">dst</span><span class="op" id="1583755">[</span><span class="num" id="1583756">1</span><span class="op" id="1583757">]</span>&nbsp;<span class="op" id="1583759">=</span>&nbsp;<span class="ident" id="1583761">src</span><span class="op" id="1583764">[</span><span class="num" id="1583765">1</span><span class="op" id="1583766">]</span><br>
<span class="lineno"></span><span class="op" id="1583768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="1583771">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1583784">func</span>&nbsp;<span class="ident" id="1583789">writebarrierslice</span><span class="op" id="1583806">(</span><span class="ident" id="1583807">dst</span>&nbsp;<span class="op" id="1583811">*</span><span class="op" id="1583812">[</span><span class="num" id="1583813">3</span><span class="op" id="1583814">]</span><span class="builtintype" id="1583815">uintptr</span><span class="op" id="1583822">,</span>&nbsp;<span class="ident" id="1583824">src</span>&nbsp;<span class="op" id="1583828">[</span><span class="num" id="1583829">3</span><span class="op" id="1583830">]</span><span class="builtintype" id="1583831">uintptr</span><span class="op" id="1583838">)</span>&nbsp;<span class="op" id="1583840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583843">dst</span><span class="op" id="1583846">[</span><span class="num" id="1583847">0</span><span class="op" id="1583848">]</span>&nbsp;<span class="op" id="1583850">=</span>&nbsp;<span class="ident" id="1583852">src</span><span class="op" id="1583855">[</span><span class="num" id="1583856">0</span><span class="op" id="1583857">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583860">dst</span><span class="op" id="1583863">[</span><span class="num" id="1583864">1</span><span class="op" id="1583865">]</span>&nbsp;<span class="op" id="1583867">=</span>&nbsp;<span class="ident" id="1583869">src</span><span class="op" id="1583872">[</span><span class="num" id="1583873">1</span><span class="op" id="1583874">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583877">dst</span><span class="op" id="1583880">[</span><span class="num" id="1583881">2</span><span class="op" id="1583882">]</span>&nbsp;<span class="op" id="1583884">=</span>&nbsp;<span class="ident" id="1583886">src</span><span class="op" id="1583889">[</span><span class="num" id="1583890">2</span><span class="op" id="1583891">]</span><br>
<span class="lineno">120</span><span class="op" id="1583893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1583896">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1583909">func</span>&nbsp;<span class="ident" id="1583914">writebarrieriface</span><span class="op" id="1583931">(</span><span class="ident" id="1583932">dst</span>&nbsp;<span class="op" id="1583936">*</span><span class="op" id="1583937">[</span><span class="num" id="1583938">2</span><span class="op" id="1583939">]</span><span class="builtintype" id="1583940">uintptr</span><span class="op" id="1583947">,</span>&nbsp;<span class="ident" id="1583949">src</span>&nbsp;<span class="op" id="1583953">[</span><span class="num" id="1583954">2</span><span class="op" id="1583955">]</span><span class="builtintype" id="1583956">uintptr</span><span class="op" id="1583963">)</span>&nbsp;<span class="op" id="1583965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583968">dst</span><span class="op" id="1583971">[</span><span class="num" id="1583972">0</span><span class="op" id="1583973">]</span>&nbsp;<span class="op" id="1583975">=</span>&nbsp;<span class="ident" id="1583977">src</span><span class="op" id="1583980">[</span><span class="num" id="1583981">0</span><span class="op" id="1583982">]</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1583985">dst</span><span class="op" id="1583988">[</span><span class="num" id="1583989">1</span><span class="op" id="1583990">]</span>&nbsp;<span class="op" id="1583992">=</span>&nbsp;<span class="ident" id="1583994">src</span><span class="op" id="1583997">[</span><span class="num" id="1583998">1</span><span class="op" id="1583999">]</span><br>
<span class="lineno"></span><span class="op" id="1584001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1584004">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1584017">func</span>&nbsp;<span class="ident" id="1584022">writebarrierfat2</span><span class="op" id="1584038">(</span><span class="ident" id="1584039">dst</span>&nbsp;<span class="op" id="1584043">*</span><span class="op" id="1584044">[</span><span class="num" id="1584045">2</span><span class="op" id="1584046">]</span><span class="builtintype" id="1584047">uintptr</span><span class="op" id="1584054">,</span>&nbsp;<span class="ident" id="1584056">_</span>&nbsp;<span class="op" id="1584058">*</span><span class="builtintype" id="1584059">byte</span><span class="op" id="1584063">,</span>&nbsp;<span class="ident" id="1584065">src</span>&nbsp;<span class="op" id="1584069">[</span><span class="num" id="1584070">2</span><span class="op" id="1584071">]</span><span class="builtintype" id="1584072">uintptr</span><span class="op" id="1584079">)</span>&nbsp;<span class="op" id="1584081">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1584084">dst</span><span class="op" id="1584087">[</span><span class="num" id="1584088">0</span><span class="op" id="1584089">]</span>&nbsp;<span class="op" id="1584091">=</span>&nbsp;<span class="ident" id="1584093">src</span><span class="op" id="1584096">[</span><span class="num" id="1584097">0</span><span class="op" id="1584098">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1584101">dst</span><span class="op" id="1584104">[</span><span class="num" id="1584105">1</span><span class="op" id="1584106">]</span>&nbsp;<span class="op" id="1584108">=</span>&nbsp;<span class="ident" id="1584110">src</span><span class="op" id="1584113">[</span><span class="num" id="1584114">1</span><span class="op" id="1584115">]</span><br>
<span class="lineno"></span><span class="op" id="1584117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1584120">//go:nosplit</span><br>
<span class="lineno">135</span><span class="keyword" id="1584133">func</span>&nbsp;<span class="ident" id="1584138">writebarrierfat3</span><span class="op" id="1584154">(</span><span class="ident" id="1584155">dst</span>&nbsp;<span class="op" id="1584159">*</span><span class="op" id="1584160">[</span><span class="num" id="1584161">3</span><span class="op" id="1584162">]</span><span class="builtintype" id="1584163">uintptr</span><span class="op" id="1584170">,</span>&nbsp;<span class="ident" id="1584172">_</span>&nbsp;<span class="op" id="1584174">*</span><span class="builtintype" id="1584175">byte</span><span class="op" id="1584179">,</span>&nbsp;<span class="ident" id="1584181">src</span>&nbsp;<span class="op" id="1584185">[</span><span class="num" id="1584186">3</span><span class="op" id="1584187">]</span><span class="builtintype" id="1584188">uintptr</span><span class="op" id="1584195">)</span>&nbsp;<span class="op" id="1584197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1584200">dst</span><span class="op" id="1584203">[</span><span class="num" id="1584204">0</span><span class="op" id="1584205">]</span>&nbsp;<span class="op" id="1584207">=</span>&nbsp;<span class="ident" id="1584209">src</span><span class="op" id="1584212">[</span><span class="num" id="1584213">0</span><span class="op" id="1584214">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1584217">dst</span><span class="op" id="1584220">[</span><span class="num" id="1584221">1</span><span class="op" id="1584222">]</span>&nbsp;<span class="op" id="1584224">=</span>&nbsp;<span class="ident" id="1584226">src</span><span class="op" id="1584229">[</span><span class="num" id="1584230">1</span><span class="op" id="1584231">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1584234">dst</span><span class="op" id="1584237">[</span><span class="num" id="1584238">2</span><span class="op" id="1584239">]</span>&nbsp;<span class="op" id="1584241">=</span>&nbsp;<span class="ident" id="1584243">src</span><span class="op" id="1584246">[</span><span class="num" id="1584247">2</span><span class="op" id="1584248">]</span><br>
<span class="lineno"></span><span class="op" id="1584250">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="1584253">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1584266">func</span>&nbsp;<span class="ident" id="1584271">writebarrierfat4</span><span class="op" id="1584287">(</span><span class="ident" id="1584288">dst</span>&nbsp;<span class="op" id="1584292">*</span><span class="op" id="1584293">[</span><span class="num" id="1584294">4</span><span class="op" id="1584295">]</span><span class="builtintype" id="1584296">uintptr</span><span class="op" id="1584303">,</span>&nbsp;<span class="ident" id="1584305">_</span>&nbsp;<span class="op" id="1584307">*</span><span class="builtintype" id="1584308">byte</span><span class="op" id="1584312">,</span>&nbsp;<span class="ident" id="1584314">src</span>&nbsp;<span class="op" id="1584318">[</span><span class="num" id="1584319">4</span><span class="op" id="1584320">]</span><span class="builtintype" id="1584321">uintptr</span><span class="op" id="1584328">)</span>&nbsp;<span class="op" id="1584330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1584333">dst</span><span class="op" id="1584336">[</span><span class="num" id="1584337">0</span><span class="op" id="1584338">]</span>&nbsp;<span class="op" id="1584340">=</span>&nbsp;<span class="ident" id="1584342">src</span><span class="op" id="1584345">[</span><span class="num" id="1584346">0</span><span class="op" id="1584347">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1584350">dst</span><span class="op" id="1584353">[</span><span class="num" id="1584354">1</span><span class="op" id="1584355">]</span>&nbsp;<span class="op" id="1584357">=</span>&nbsp;<span class="ident" id="1584359">src</span><span class="op" id="1584362">[</span><span class="num" id="1584363">1</span><span class="op" id="1584364">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1584367">dst</span><span class="op" id="1584370">[</span><span class="num" id="1584371">2</span><span class="op" id="1584372">]</span>&nbsp;<span class="op" id="1584374">=</span>&nbsp;<span class="ident" id="1584376">src</span><span class="op" id="1584379">[</span><span class="num" id="1584380">2</span><span class="op" id="1584381">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1584384">dst</span><span class="op" id="1584387">[</span><span class="num" id="1584388">3</span><span class="op" id="1584389">]</span>&nbsp;<span class="op" id="1584391">=</span>&nbsp;<span class="ident" id="1584393">src</span><span class="op" id="1584396">[</span><span class="num" id="1584397">3</span><span class="op" id="1584398">]</span><br>
<span class="lineno"></span><span class="op" id="1584400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1584403">//go:nosplit</span><br>
<span class="lineno">150</span><span class="keyword" id="1584416">func</span>&nbsp;<span class="ident" id="1584421">writebarrierfat</span><span class="op" id="1584436">(</span><span class="ident" id="1584437">typ</span>&nbsp;<span class="op" id="1584441">*</span><span class="ident" id="1584442">_type</span><span class="op" id="1584447">,</span>&nbsp;<span class="ident" id="1584449">dst</span><span class="op" id="1584452">,</span>&nbsp;<span class="ident" id="1584454">src</span>&nbsp;<span class="ident" id="1584458">unsafe</span><span class="op" id="1584464">.</span><span class="ident" id="1584465">Pointer</span><span class="op" id="1584472">)</span>&nbsp;<span class="op" id="1584474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1584477">memmove</span><span class="op" id="1584484">(</span><span class="ident" id="1584485">dst</span><span class="op" id="1584488">,</span>&nbsp;<span class="ident" id="1584490">src</span><span class="op" id="1584493">,</span>&nbsp;<span class="ident" id="1584495">typ</span><span class="op" id="1584498">.</span><span class="ident" id="1584499">size</span><span class="op" id="1584503">)</span><br>
<span class="lineno"></span><span class="op" id="1584505">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
