<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6529249">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6529305">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6529359">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6529410">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6529475">package</span>&nbsp;<span class="ident" id="6529483">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6529489">import</span>&nbsp;<span class="op" id="6529496">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6529499">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6529512">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6529518">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6529528">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6529531">func</span>&nbsp;<span class="ident" id="6529536">TestLookPathUnixEmptyPath</span><span class="op" id="6529561">(</span><span class="ident" id="6529562">t</span>&nbsp;<span class="op" id="6529564">*</span><span class="ident" id="6529565"><a href="/os/exec/lp_unix_test.go.html#6529518">testing</a></span><span class="op" id="6529572">.</span><span class="ident" id="6529573">T</span><span class="op" id="6529574">)</span>&nbsp;<span class="op" id="6529576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6529579">tmp</span><span class="op" id="6529582">,</span>&nbsp;<span class="ident" id="6529584">err</span>&nbsp;<span class="op" id="6529588">:=</span>&nbsp;<span class="ident" id="6529591"><a href="/os/exec/lp_unix_test.go.html#6529499">ioutil</a></span><span class="op" id="6529597">.</span><span class="ident" id="6529598">TempDir</span><span class="op" id="6529605">(</span><span class="string" id="6529606">&#34;&#34;</span><span class="op" id="6529608">,</span>&nbsp;<span class="string" id="6529610">&#34;TestLookPathUnixEmptyPath&#34;</span><span class="op" id="6529637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6529640">if</span>&nbsp;<span class="ident" id="6529643"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6529647">!=</span>&nbsp;<span class="ident" id="6529650">nil</span>&nbsp;<span class="op" id="6529654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6529658"><a href="/os/exec/lp_unix_test.go.html#6529562">t</a></span><span class="op" id="6529659">.</span><span class="ident" id="6529660">Fatal</span><span class="op" id="6529665">(</span><span class="string" id="6529666">&#34;TempDir&nbsp;failed:&nbsp;&#34;</span><span class="op" id="6529684">,</span>&nbsp;<span class="ident" id="6529686"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span><span class="op" id="6529689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529692">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6529695">defer</span>&nbsp;<span class="ident" id="6529701"><a href="/os/exec/lp_unix_test.go.html#6529512">os</a></span><span class="op" id="6529703">.</span><span class="ident" id="6529704">RemoveAll</span><span class="op" id="6529713">(</span><span class="ident" id="6529714"><a href="/os/exec/lp_unix_test.go.html#6529579">tmp</a></span><span class="op" id="6529717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6529720">wd</span><span class="op" id="6529722">,</span>&nbsp;<span class="ident" id="6529724"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6529728">:=</span>&nbsp;<span class="ident" id="6529731"><a href="/os/exec/lp_unix_test.go.html#6529512">os</a></span><span class="op" id="6529733">.</span><span class="ident" id="6529734">Getwd</span><span class="op" id="6529739">(</span><span class="op" id="6529740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6529743">if</span>&nbsp;<span class="ident" id="6529746"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6529750">!=</span>&nbsp;<span class="ident" id="6529753">nil</span>&nbsp;<span class="op" id="6529757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6529761"><a href="/os/exec/lp_unix_test.go.html#6529562">t</a></span><span class="op" id="6529762">.</span><span class="ident" id="6529763">Fatal</span><span class="op" id="6529768">(</span><span class="string" id="6529769">&#34;Getwd&nbsp;failed:&nbsp;&#34;</span><span class="op" id="6529785">,</span>&nbsp;<span class="ident" id="6529787"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span><span class="op" id="6529790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529793">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6529796"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6529800">=</span>&nbsp;<span class="ident" id="6529802"><a href="/os/exec/lp_unix_test.go.html#6529512">os</a></span><span class="op" id="6529804">.</span><span class="ident" id="6529805">Chdir</span><span class="op" id="6529810">(</span><span class="ident" id="6529811"><a href="/os/exec/lp_unix_test.go.html#6529579">tmp</a></span><span class="op" id="6529814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6529817">if</span>&nbsp;<span class="ident" id="6529820"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6529824">!=</span>&nbsp;<span class="ident" id="6529827">nil</span>&nbsp;<span class="op" id="6529831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6529835"><a href="/os/exec/lp_unix_test.go.html#6529562">t</a></span><span class="op" id="6529836">.</span><span class="ident" id="6529837">Fatal</span><span class="op" id="6529842">(</span><span class="string" id="6529843">&#34;Chdir&nbsp;failed:&nbsp;&#34;</span><span class="op" id="6529859">,</span>&nbsp;<span class="ident" id="6529861"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span><span class="op" id="6529864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6529867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6529870">defer</span>&nbsp;<span class="ident" id="6529876"><a href="/os/exec/lp_unix_test.go.html#6529512">os</a></span><span class="op" id="6529878">.</span><span class="ident" id="6529879">Chdir</span><span class="op" id="6529884">(</span><span class="ident" id="6529885"><a href="/os/exec/lp_unix_test.go.html#6529720">wd</a></span><span class="op" id="6529887">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6529891">f</span><span class="op" id="6529892">,</span>&nbsp;<span class="ident" id="6529894"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6529898">:=</span>&nbsp;<span class="ident" id="6529901"><a href="/os/exec/lp_unix_test.go.html#6529512">os</a></span><span class="op" id="6529903">.</span><span class="ident" id="6529904">OpenFile</span><span class="op" id="6529912">(</span><span class="string" id="6529913">&#34;exec_me&#34;</span><span class="op" id="6529922">,</span>&nbsp;<span class="ident" id="6529924"><a href="/os/exec/lp_unix_test.go.html#6529512">os</a></span><span class="op" id="6529926">.</span><span class="ident" id="6529927">O_CREATE</span><span class="op" id="6529935">|</span><span class="ident" id="6529936"><a href="/os/exec/lp_unix_test.go.html#6529512">os</a></span><span class="op" id="6529938">.</span><span class="ident" id="6529939">O_EXCL</span><span class="op" id="6529945">,</span>&nbsp;<span class="num" id="6529947">0700</span><span class="op" id="6529951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6529954">if</span>&nbsp;<span class="ident" id="6529957"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6529961">!=</span>&nbsp;<span class="ident" id="6529964">nil</span>&nbsp;<span class="op" id="6529968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6529972"><a href="/os/exec/lp_unix_test.go.html#6529562">t</a></span><span class="op" id="6529973">.</span><span class="ident" id="6529974">Fatal</span><span class="op" id="6529979">(</span><span class="string" id="6529980">&#34;OpenFile&nbsp;failed:&nbsp;&#34;</span><span class="op" id="6529999">,</span>&nbsp;<span class="ident" id="6530001"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span><span class="op" id="6530004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6530007">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530010"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6530014">=</span>&nbsp;<span class="ident" id="6530016"><a href="/os/exec/lp_unix_test.go.html#6529891">f</a></span><span class="op" id="6530017">.</span><span class="ident" id="6530018">Close</span><span class="op" id="6530023">(</span><span class="op" id="6530024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6530027">if</span>&nbsp;<span class="ident" id="6530030"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6530034">!=</span>&nbsp;<span class="ident" id="6530037">nil</span>&nbsp;<span class="op" id="6530041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530045"><a href="/os/exec/lp_unix_test.go.html#6529562">t</a></span><span class="op" id="6530046">.</span><span class="ident" id="6530047">Fatal</span><span class="op" id="6530052">(</span><span class="string" id="6530053">&#34;Close&nbsp;failed:&nbsp;&#34;</span><span class="op" id="6530069">,</span>&nbsp;<span class="ident" id="6530071"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span><span class="op" id="6530074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6530077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530081">pathenv</span>&nbsp;<span class="op" id="6530089">:=</span>&nbsp;<span class="ident" id="6530092"><a href="/os/exec/lp_unix_test.go.html#6529512">os</a></span><span class="op" id="6530094">.</span><span class="ident" id="6530095">Getenv</span><span class="op" id="6530101">(</span><span class="string" id="6530102">&#34;PATH&#34;</span><span class="op" id="6530108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6530111">defer</span>&nbsp;<span class="ident" id="6530117"><a href="/os/exec/lp_unix_test.go.html#6529512">os</a></span><span class="op" id="6530119">.</span><span class="ident" id="6530120">Setenv</span><span class="op" id="6530126">(</span><span class="string" id="6530127">&#34;PATH&#34;</span><span class="op" id="6530133">,</span>&nbsp;<span class="ident" id="6530135"><a href="/os/exec/lp_unix_test.go.html#6530081">pathenv</a></span><span class="op" id="6530142">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530146"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6530150">=</span>&nbsp;<span class="ident" id="6530152"><a href="/os/exec/lp_unix_test.go.html#6529512">os</a></span><span class="op" id="6530154">.</span><span class="ident" id="6530155">Setenv</span><span class="op" id="6530161">(</span><span class="string" id="6530162">&#34;PATH&#34;</span><span class="op" id="6530168">,</span>&nbsp;<span class="string" id="6530170">&#34;&#34;</span><span class="op" id="6530172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6530175">if</span>&nbsp;<span class="ident" id="6530178"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6530182">!=</span>&nbsp;<span class="ident" id="6530185">nil</span>&nbsp;<span class="op" id="6530189">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530193"><a href="/os/exec/lp_unix_test.go.html#6529562">t</a></span><span class="op" id="6530194">.</span><span class="ident" id="6530195">Fatal</span><span class="op" id="6530200">(</span><span class="string" id="6530201">&#34;Setenv&nbsp;failed:&nbsp;&#34;</span><span class="op" id="6530218">,</span>&nbsp;<span class="ident" id="6530220"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span><span class="op" id="6530223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6530226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530230">path</span><span class="op" id="6530234">,</span>&nbsp;<span class="ident" id="6530236"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6530240">:=</span>&nbsp;<span class="ident" id="6530243"><a href="/os/exec/lp_unix.go.html#5516280">LookPath</a></span><span class="op" id="6530251">(</span><span class="string" id="6530252">&#34;exec_me&#34;</span><span class="op" id="6530261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6530264">if</span>&nbsp;<span class="ident" id="6530267"><a href="/os/exec/lp_unix_test.go.html#6529584">err</a></span>&nbsp;<span class="op" id="6530271">==</span>&nbsp;<span class="ident" id="6530274">nil</span>&nbsp;<span class="op" id="6530278">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530282"><a href="/os/exec/lp_unix_test.go.html#6529562">t</a></span><span class="op" id="6530283">.</span><span class="ident" id="6530284">Fatal</span><span class="op" id="6530289">(</span><span class="string" id="6530290">&#34;LookPath&nbsp;found&nbsp;exec_me&nbsp;in&nbsp;empty&nbsp;$PATH&#34;</span><span class="op" id="6530329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6530332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6530335">if</span>&nbsp;<span class="ident" id="6530338"><a href="/os/exec/lp_unix_test.go.html#6530230">path</a></span>&nbsp;<span class="op" id="6530343">!=</span>&nbsp;<span class="string" id="6530346">&#34;&#34;</span>&nbsp;<span class="op" id="6530349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6530353"><a href="/os/exec/lp_unix_test.go.html#6529562">t</a></span><span class="op" id="6530354">.</span><span class="ident" id="6530355">Fatalf</span><span class="op" id="6530361">(</span><span class="string" id="6530362">&#34;LookPath&nbsp;path&nbsp;==&nbsp;%q&nbsp;when&nbsp;err&nbsp;!=&nbsp;nil&#34;</span><span class="op" id="6530399">,</span>&nbsp;<span class="ident" id="6530401"><a href="/os/exec/lp_unix_test.go.html#6530230">path</a></span><span class="op" id="6530405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6530408">}</span><br>
<span class="lineno">55</span><span class="op" id="6530410">}</span>
</div>
</body>
</html>
