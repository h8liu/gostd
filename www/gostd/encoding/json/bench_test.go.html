<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html" class="current">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7026480">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7026536">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7026590">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7026641">//&nbsp;Large&nbsp;data&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="7026666">//&nbsp;The&nbsp;JSON&nbsp;data&nbsp;is&nbsp;a&nbsp;summary&nbsp;of&nbsp;agl&#39;s&nbsp;changes&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7026720">//&nbsp;go,&nbsp;webkit,&nbsp;and&nbsp;chromium&nbsp;open&nbsp;source&nbsp;projects.</span><br>
<span class="lineno"></span><span class="comment" id="7026770">//&nbsp;We&nbsp;benchmark&nbsp;converting&nbsp;between&nbsp;the&nbsp;JSON&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="7026819">//&nbsp;and&nbsp;in-memory&nbsp;data&nbsp;structures.</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="7026854">package</span>&nbsp;<span class="ident" id="7026862">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7026868">import</span>&nbsp;<span class="op" id="7026875">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7026878">&#34;bytes&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7026887">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7026904">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7026917">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7026923">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7026933">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7026936">type</span>&nbsp;<span class="ident" id="7026941">codeResponse</span>&nbsp;<span class="keyword" id="7026954">struct</span>&nbsp;<span class="op" id="7026961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7026964">Tree</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7026973">*</span><span class="ident" id="7026974">codeNode</span>&nbsp;<span class="string" id="7026983">`json:&#34;tree&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7026998">Username</span>&nbsp;<span class="builtintype" id="7027007">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7027017">`json:&#34;username&#34;`</span><br>
<span class="lineno"></span><span class="op" id="7027035">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7027038">type</span>&nbsp;<span class="ident" id="7027043">codeNode</span>&nbsp;<span class="keyword" id="7027052">struct</span>&nbsp;<span class="op" id="7027059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7027062">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7027071">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7027083">`json:&#34;name&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7027098">Kids</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7027107">[</span><span class="op" id="7027108">]</span><span class="op" id="7027109">*</span><span class="ident" id="7027110">codeNode</span>&nbsp;<span class="string" id="7027119">`json:&#34;kids&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7027134">CLWeight</span>&nbsp;<span class="builtintype" id="7027143">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7027155">`json:&#34;cl_weight&#34;`</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7027175">Touches</span>&nbsp;&nbsp;<span class="builtintype" id="7027184">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7027196">`json:&#34;touches&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7027214">MinT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7027223">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7027235">`json:&#34;min_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7027251">MaxT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7027260">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7027272">`json:&#34;max_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7027288">MeanT</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7027297">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7027309">`json:&#34;mean_t&#34;`</span><br>
<span class="lineno"></span><span class="op" id="7027325">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="7027328">var</span>&nbsp;<span class="ident" id="7027332">codeJSON</span>&nbsp;<span class="op" id="7027341">[</span><span class="op" id="7027342">]</span><span class="builtintype" id="7027343">byte</span><br>
<span class="lineno"></span><span class="keyword" id="7027348">var</span>&nbsp;<span class="ident" id="7027352">codeStruct</span>&nbsp;<span class="ident" id="7027363">codeResponse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7027377">func</span>&nbsp;<span class="ident" id="7027382">codeInit</span><span class="op" id="7027390">(</span><span class="op" id="7027391">)</span>&nbsp;<span class="op" id="7027393">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7027396">f</span><span class="op" id="7027397">,</span>&nbsp;<span class="ident" id="7027399">err</span>&nbsp;<span class="op" id="7027403">:=</span>&nbsp;<span class="ident" id="7027406">os</span><span class="op" id="7027408">.</span><span class="ident" id="7027409">Open</span><span class="op" id="7027413">(</span><span class="string" id="7027414">&#34;testdata/code.json.gz&#34;</span><span class="op" id="7027437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7027440">if</span>&nbsp;<span class="ident" id="7027443">err</span>&nbsp;<span class="op" id="7027447">!=</span>&nbsp;<span class="builtintype" id="7027450">nil</span>&nbsp;<span class="op" id="7027454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7027458">panic</span><span class="op" id="7027463">(</span><span class="ident" id="7027464">err</span><span class="op" id="7027467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7027470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7027473">defer</span>&nbsp;<span class="ident" id="7027479">f</span><span class="op" id="7027480">.</span><span class="ident" id="7027481">Close</span><span class="op" id="7027486">(</span><span class="op" id="7027487">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7027490">gz</span><span class="op" id="7027492">,</span>&nbsp;<span class="ident" id="7027494">err</span>&nbsp;<span class="op" id="7027498">:=</span>&nbsp;<span class="ident" id="7027501">gzip</span><span class="op" id="7027505">.</span><span class="ident" id="7027506">NewReader</span><span class="op" id="7027515">(</span><span class="ident" id="7027516">f</span><span class="op" id="7027517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7027520">if</span>&nbsp;<span class="ident" id="7027523">err</span>&nbsp;<span class="op" id="7027527">!=</span>&nbsp;<span class="builtintype" id="7027530">nil</span>&nbsp;<span class="op" id="7027534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7027538">panic</span><span class="op" id="7027543">(</span><span class="ident" id="7027544">err</span><span class="op" id="7027547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7027550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7027553">data</span><span class="op" id="7027557">,</span>&nbsp;<span class="ident" id="7027559">err</span>&nbsp;<span class="op" id="7027563">:=</span>&nbsp;<span class="ident" id="7027566">ioutil</span><span class="op" id="7027572">.</span><span class="ident" id="7027573">ReadAll</span><span class="op" id="7027580">(</span><span class="ident" id="7027581">gz</span><span class="op" id="7027583">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7027586">if</span>&nbsp;<span class="ident" id="7027589">err</span>&nbsp;<span class="op" id="7027593">!=</span>&nbsp;<span class="builtintype" id="7027596">nil</span>&nbsp;<span class="op" id="7027600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7027604">panic</span><span class="op" id="7027609">(</span><span class="ident" id="7027610">err</span><span class="op" id="7027613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7027616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7027620">codeJSON</span>&nbsp;<span class="op" id="7027629">=</span>&nbsp;<span class="ident" id="7027631">data</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7027638">if</span>&nbsp;<span class="ident" id="7027641">err</span>&nbsp;<span class="op" id="7027645">:=</span>&nbsp;<span class="ident" id="7027648">Unmarshal</span><span class="op" id="7027657">(</span><span class="ident" id="7027658">codeJSON</span><span class="op" id="7027666">,</span>&nbsp;<span class="op" id="7027668">&amp;</span><span class="ident" id="7027669">codeStruct</span><span class="op" id="7027679">)</span><span class="op" id="7027680">;</span>&nbsp;<span class="ident" id="7027682">err</span>&nbsp;<span class="op" id="7027686">!=</span>&nbsp;<span class="builtintype" id="7027689">nil</span>&nbsp;<span class="op" id="7027693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7027697">panic</span><span class="op" id="7027702">(</span><span class="string" id="7027703">&#34;unmarshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="7027727">+</span>&nbsp;<span class="ident" id="7027729">err</span><span class="op" id="7027732">.</span><span class="ident" id="7027733">Error</span><span class="op" id="7027738">(</span><span class="op" id="7027739">)</span><span class="op" id="7027740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7027743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7027747">if</span>&nbsp;<span class="ident" id="7027750">data</span><span class="op" id="7027754">,</span>&nbsp;<span class="ident" id="7027756">err</span>&nbsp;<span class="op" id="7027760">=</span>&nbsp;<span class="ident" id="7027762">Marshal</span><span class="op" id="7027769">(</span><span class="op" id="7027770">&amp;</span><span class="ident" id="7027771">codeStruct</span><span class="op" id="7027781">)</span><span class="op" id="7027782">;</span>&nbsp;<span class="ident" id="7027784">err</span>&nbsp;<span class="op" id="7027788">!=</span>&nbsp;<span class="builtintype" id="7027791">nil</span>&nbsp;<span class="op" id="7027795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7027799">panic</span><span class="op" id="7027804">(</span><span class="string" id="7027805">&#34;marshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="7027827">+</span>&nbsp;<span class="ident" id="7027829">err</span><span class="op" id="7027832">.</span><span class="ident" id="7027833">Error</span><span class="op" id="7027838">(</span><span class="op" id="7027839">)</span><span class="op" id="7027840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7027843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7027847">if</span>&nbsp;<span class="op" id="7027850">!</span><span class="ident" id="7027851">bytes</span><span class="op" id="7027856">.</span><span class="ident" id="7027857">Equal</span><span class="op" id="7027862">(</span><span class="ident" id="7027863">data</span><span class="op" id="7027867">,</span>&nbsp;<span class="ident" id="7027869">codeJSON</span><span class="op" id="7027877">)</span>&nbsp;<span class="op" id="7027879">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7027883">println</span><span class="op" id="7027890">(</span><span class="string" id="7027891">&#34;different&nbsp;lengths&#34;</span><span class="op" id="7027910">,</span>&nbsp;<span class="builtinfunc" id="7027912">len</span><span class="op" id="7027915">(</span><span class="ident" id="7027916">data</span><span class="op" id="7027920">)</span><span class="op" id="7027921">,</span>&nbsp;<span class="builtinfunc" id="7027923">len</span><span class="op" id="7027926">(</span><span class="ident" id="7027927">codeJSON</span><span class="op" id="7027935">)</span><span class="op" id="7027936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7027940">for</span>&nbsp;<span class="ident" id="7027944">i</span>&nbsp;<span class="op" id="7027946">:=</span>&nbsp;<span class="num" id="7027949">0</span><span class="op" id="7027950">;</span>&nbsp;<span class="ident" id="7027952">i</span>&nbsp;<span class="op" id="7027954">&lt;</span>&nbsp;<span class="builtinfunc" id="7027956">len</span><span class="op" id="7027959">(</span><span class="ident" id="7027960">data</span><span class="op" id="7027964">)</span>&nbsp;<span class="op" id="7027966">&amp;&amp;</span>&nbsp;<span class="ident" id="7027969">i</span>&nbsp;<span class="op" id="7027971">&lt;</span>&nbsp;<span class="builtinfunc" id="7027973">len</span><span class="op" id="7027976">(</span><span class="ident" id="7027977">codeJSON</span><span class="op" id="7027985">)</span><span class="op" id="7027986">;</span>&nbsp;<span class="ident" id="7027988">i</span><span class="op" id="7027989">++</span>&nbsp;<span class="op" id="7027992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7027997">if</span>&nbsp;<span class="ident" id="7028000">data</span><span class="op" id="7028004">[</span><span class="ident" id="7028005">i</span><span class="op" id="7028006">]</span>&nbsp;<span class="op" id="7028008">!=</span>&nbsp;<span class="ident" id="7028011">codeJSON</span><span class="op" id="7028019">[</span><span class="ident" id="7028020">i</span><span class="op" id="7028021">]</span>&nbsp;<span class="op" id="7028023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7028029">println</span><span class="op" id="7028036">(</span><span class="string" id="7028037">&#34;re-marshal:&nbsp;changed&nbsp;at&nbsp;byte&#34;</span><span class="op" id="7028066">,</span>&nbsp;<span class="ident" id="7028068">i</span><span class="op" id="7028069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7028075">println</span><span class="op" id="7028082">(</span><span class="string" id="7028083">&#34;orig:&nbsp;&#34;</span><span class="op" id="7028091">,</span>&nbsp;<span class="builtintype" id="7028093">string</span><span class="op" id="7028099">(</span><span class="ident" id="7028100">codeJSON</span><span class="op" id="7028108">[</span><span class="ident" id="7028109">i</span><span class="op" id="7028110">-</span><span class="num" id="7028111">10</span><span class="op" id="7028113">:</span><span class="ident" id="7028114">i</span><span class="op" id="7028115">+</span><span class="num" id="7028116">10</span><span class="op" id="7028118">]</span><span class="op" id="7028119">)</span><span class="op" id="7028120">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7028126">println</span><span class="op" id="7028133">(</span><span class="string" id="7028134">&#34;new:&nbsp;&#34;</span><span class="op" id="7028141">,</span>&nbsp;<span class="builtintype" id="7028143">string</span><span class="op" id="7028149">(</span><span class="ident" id="7028150">data</span><span class="op" id="7028154">[</span><span class="ident" id="7028155">i</span><span class="op" id="7028156">-</span><span class="num" id="7028157">10</span><span class="op" id="7028159">:</span><span class="ident" id="7028160">i</span><span class="op" id="7028161">+</span><span class="num" id="7028162">10</span><span class="op" id="7028164">]</span><span class="op" id="7028165">)</span><span class="op" id="7028166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7028172">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7028181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7028185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7028189">panic</span><span class="op" id="7028194">(</span><span class="string" id="7028195">&#34;re-marshal&nbsp;code.json:&nbsp;different&nbsp;result&#34;</span><span class="op" id="7028235">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7028238">}</span><br>
<span class="lineno"></span><span class="op" id="7028240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7028243">func</span>&nbsp;<span class="ident" id="7028248">BenchmarkCodeEncoder</span><span class="op" id="7028268">(</span><span class="ident" id="7028269">b</span>&nbsp;<span class="op" id="7028271">*</span><span class="ident" id="7028272">testing</span><span class="op" id="7028279">.</span><span class="ident" id="7028280">B</span><span class="op" id="7028281">)</span>&nbsp;<span class="op" id="7028283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7028286">if</span>&nbsp;<span class="ident" id="7028289">codeJSON</span>&nbsp;<span class="op" id="7028298">==</span>&nbsp;<span class="builtintype" id="7028301">nil</span>&nbsp;<span class="op" id="7028305">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028309">b</span><span class="op" id="7028310">.</span><span class="ident" id="7028311">StopTimer</span><span class="op" id="7028320">(</span><span class="op" id="7028321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028325">codeInit</span><span class="op" id="7028333">(</span><span class="op" id="7028334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028338">b</span><span class="op" id="7028339">.</span><span class="ident" id="7028340">StartTimer</span><span class="op" id="7028350">(</span><span class="op" id="7028351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7028354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028357">enc</span>&nbsp;<span class="op" id="7028361">:=</span>&nbsp;<span class="ident" id="7028364">NewEncoder</span><span class="op" id="7028374">(</span><span class="ident" id="7028375">ioutil</span><span class="op" id="7028381">.</span><span class="ident" id="7028382">Discard</span><span class="op" id="7028389">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7028392">for</span>&nbsp;<span class="ident" id="7028396">i</span>&nbsp;<span class="op" id="7028398">:=</span>&nbsp;<span class="num" id="7028401">0</span><span class="op" id="7028402">;</span>&nbsp;<span class="ident" id="7028404">i</span>&nbsp;<span class="op" id="7028406">&lt;</span>&nbsp;<span class="ident" id="7028408">b</span><span class="op" id="7028409">.</span><span class="ident" id="7028410">N</span><span class="op" id="7028411">;</span>&nbsp;<span class="ident" id="7028413">i</span><span class="op" id="7028414">++</span>&nbsp;<span class="op" id="7028417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7028421">if</span>&nbsp;<span class="ident" id="7028424">err</span>&nbsp;<span class="op" id="7028428">:=</span>&nbsp;<span class="ident" id="7028431">enc</span><span class="op" id="7028434">.</span><span class="ident" id="7028435">Encode</span><span class="op" id="7028441">(</span><span class="op" id="7028442">&amp;</span><span class="ident" id="7028443">codeStruct</span><span class="op" id="7028453">)</span><span class="op" id="7028454">;</span>&nbsp;<span class="ident" id="7028456">err</span>&nbsp;<span class="op" id="7028460">!=</span>&nbsp;<span class="builtintype" id="7028463">nil</span>&nbsp;<span class="op" id="7028467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028472">b</span><span class="op" id="7028473">.</span><span class="ident" id="7028474">Fatal</span><span class="op" id="7028479">(</span><span class="string" id="7028480">&#34;Encode:&#34;</span><span class="op" id="7028489">,</span>&nbsp;<span class="ident" id="7028491">err</span><span class="op" id="7028494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7028498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7028501">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028504">b</span><span class="op" id="7028505">.</span><span class="ident" id="7028506">SetBytes</span><span class="op" id="7028514">(</span><span class="builtintype" id="7028515">int64</span><span class="op" id="7028520">(</span><span class="builtinfunc" id="7028521">len</span><span class="op" id="7028524">(</span><span class="ident" id="7028525">codeJSON</span><span class="op" id="7028533">)</span><span class="op" id="7028534">)</span><span class="op" id="7028535">)</span><br>
<span class="lineno"></span><span class="op" id="7028537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7028540">func</span>&nbsp;<span class="ident" id="7028545">BenchmarkCodeMarshal</span><span class="op" id="7028565">(</span><span class="ident" id="7028566">b</span>&nbsp;<span class="op" id="7028568">*</span><span class="ident" id="7028569">testing</span><span class="op" id="7028576">.</span><span class="ident" id="7028577">B</span><span class="op" id="7028578">)</span>&nbsp;<span class="op" id="7028580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7028583">if</span>&nbsp;<span class="ident" id="7028586">codeJSON</span>&nbsp;<span class="op" id="7028595">==</span>&nbsp;<span class="builtintype" id="7028598">nil</span>&nbsp;<span class="op" id="7028602">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028606">b</span><span class="op" id="7028607">.</span><span class="ident" id="7028608">StopTimer</span><span class="op" id="7028617">(</span><span class="op" id="7028618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028622">codeInit</span><span class="op" id="7028630">(</span><span class="op" id="7028631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028635">b</span><span class="op" id="7028636">.</span><span class="ident" id="7028637">StartTimer</span><span class="op" id="7028647">(</span><span class="op" id="7028648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7028651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7028654">for</span>&nbsp;<span class="ident" id="7028658">i</span>&nbsp;<span class="op" id="7028660">:=</span>&nbsp;<span class="num" id="7028663">0</span><span class="op" id="7028664">;</span>&nbsp;<span class="ident" id="7028666">i</span>&nbsp;<span class="op" id="7028668">&lt;</span>&nbsp;<span class="ident" id="7028670">b</span><span class="op" id="7028671">.</span><span class="ident" id="7028672">N</span><span class="op" id="7028673">;</span>&nbsp;<span class="ident" id="7028675">i</span><span class="op" id="7028676">++</span>&nbsp;<span class="op" id="7028679">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7028683">if</span>&nbsp;<span class="ident" id="7028686">_</span><span class="op" id="7028687">,</span>&nbsp;<span class="ident" id="7028689">err</span>&nbsp;<span class="op" id="7028693">:=</span>&nbsp;<span class="ident" id="7028696">Marshal</span><span class="op" id="7028703">(</span><span class="op" id="7028704">&amp;</span><span class="ident" id="7028705">codeStruct</span><span class="op" id="7028715">)</span><span class="op" id="7028716">;</span>&nbsp;<span class="ident" id="7028718">err</span>&nbsp;<span class="op" id="7028722">!=</span>&nbsp;<span class="builtintype" id="7028725">nil</span>&nbsp;<span class="op" id="7028729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028734">b</span><span class="op" id="7028735">.</span><span class="ident" id="7028736">Fatal</span><span class="op" id="7028741">(</span><span class="string" id="7028742">&#34;Marshal:&#34;</span><span class="op" id="7028752">,</span>&nbsp;<span class="ident" id="7028754">err</span><span class="op" id="7028757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7028761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7028764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028767">b</span><span class="op" id="7028768">.</span><span class="ident" id="7028769">SetBytes</span><span class="op" id="7028777">(</span><span class="builtintype" id="7028778">int64</span><span class="op" id="7028783">(</span><span class="builtinfunc" id="7028784">len</span><span class="op" id="7028787">(</span><span class="ident" id="7028788">codeJSON</span><span class="op" id="7028796">)</span><span class="op" id="7028797">)</span><span class="op" id="7028798">)</span><br>
<span class="lineno">105</span><span class="op" id="7028800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7028803">func</span>&nbsp;<span class="ident" id="7028808">BenchmarkCodeDecoder</span><span class="op" id="7028828">(</span><span class="ident" id="7028829">b</span>&nbsp;<span class="op" id="7028831">*</span><span class="ident" id="7028832">testing</span><span class="op" id="7028839">.</span><span class="ident" id="7028840">B</span><span class="op" id="7028841">)</span>&nbsp;<span class="op" id="7028843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7028846">if</span>&nbsp;<span class="ident" id="7028849">codeJSON</span>&nbsp;<span class="op" id="7028858">==</span>&nbsp;<span class="builtintype" id="7028861">nil</span>&nbsp;<span class="op" id="7028865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028869">b</span><span class="op" id="7028870">.</span><span class="ident" id="7028871">StopTimer</span><span class="op" id="7028880">(</span><span class="op" id="7028881">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028885">codeInit</span><span class="op" id="7028893">(</span><span class="op" id="7028894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028898">b</span><span class="op" id="7028899">.</span><span class="ident" id="7028900">StartTimer</span><span class="op" id="7028910">(</span><span class="op" id="7028911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7028914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7028917">var</span>&nbsp;<span class="ident" id="7028921">buf</span>&nbsp;<span class="ident" id="7028925">bytes</span><span class="op" id="7028930">.</span><span class="ident" id="7028931">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7028939">dec</span>&nbsp;<span class="op" id="7028943">:=</span>&nbsp;<span class="ident" id="7028946">NewDecoder</span><span class="op" id="7028956">(</span><span class="op" id="7028957">&amp;</span><span class="ident" id="7028958">buf</span><span class="op" id="7028961">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7028964">var</span>&nbsp;<span class="ident" id="7028968">r</span>&nbsp;<span class="ident" id="7028970">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7028984">for</span>&nbsp;<span class="ident" id="7028988">i</span>&nbsp;<span class="op" id="7028990">:=</span>&nbsp;<span class="num" id="7028993">0</span><span class="op" id="7028994">;</span>&nbsp;<span class="ident" id="7028996">i</span>&nbsp;<span class="op" id="7028998">&lt;</span>&nbsp;<span class="ident" id="7029000">b</span><span class="op" id="7029001">.</span><span class="ident" id="7029002">N</span><span class="op" id="7029003">;</span>&nbsp;<span class="ident" id="7029005">i</span><span class="op" id="7029006">++</span>&nbsp;<span class="op" id="7029009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029013">buf</span><span class="op" id="7029016">.</span><span class="ident" id="7029017">Write</span><span class="op" id="7029022">(</span><span class="ident" id="7029023">codeJSON</span><span class="op" id="7029031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7029035">//&nbsp;hide&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029049">buf</span><span class="op" id="7029052">.</span><span class="ident" id="7029053">WriteByte</span><span class="op" id="7029062">(</span><span class="string" id="7029063">&#39;\n&#39;</span><span class="op" id="7029067">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029071">buf</span><span class="op" id="7029074">.</span><span class="ident" id="7029075">WriteByte</span><span class="op" id="7029084">(</span><span class="string" id="7029085">&#39;\n&#39;</span><span class="op" id="7029089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029093">buf</span><span class="op" id="7029096">.</span><span class="ident" id="7029097">WriteByte</span><span class="op" id="7029106">(</span><span class="string" id="7029107">&#39;\n&#39;</span><span class="op" id="7029111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7029115">if</span>&nbsp;<span class="ident" id="7029118">err</span>&nbsp;<span class="op" id="7029122">:=</span>&nbsp;<span class="ident" id="7029125">dec</span><span class="op" id="7029128">.</span><span class="ident" id="7029129">Decode</span><span class="op" id="7029135">(</span><span class="op" id="7029136">&amp;</span><span class="ident" id="7029137">r</span><span class="op" id="7029138">)</span><span class="op" id="7029139">;</span>&nbsp;<span class="ident" id="7029141">err</span>&nbsp;<span class="op" id="7029145">!=</span>&nbsp;<span class="builtintype" id="7029148">nil</span>&nbsp;<span class="op" id="7029152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029157">b</span><span class="op" id="7029158">.</span><span class="ident" id="7029159">Fatal</span><span class="op" id="7029164">(</span><span class="string" id="7029165">&#34;Decode:&#34;</span><span class="op" id="7029174">,</span>&nbsp;<span class="ident" id="7029176">err</span><span class="op" id="7029179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7029183">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7029186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029189">b</span><span class="op" id="7029190">.</span><span class="ident" id="7029191">SetBytes</span><span class="op" id="7029199">(</span><span class="builtintype" id="7029200">int64</span><span class="op" id="7029205">(</span><span class="builtinfunc" id="7029206">len</span><span class="op" id="7029209">(</span><span class="ident" id="7029210">codeJSON</span><span class="op" id="7029218">)</span><span class="op" id="7029219">)</span><span class="op" id="7029220">)</span><br>
<span class="lineno"></span><span class="op" id="7029222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7029225">func</span>&nbsp;<span class="ident" id="7029230">BenchmarkCodeUnmarshal</span><span class="op" id="7029252">(</span><span class="ident" id="7029253">b</span>&nbsp;<span class="op" id="7029255">*</span><span class="ident" id="7029256">testing</span><span class="op" id="7029263">.</span><span class="ident" id="7029264">B</span><span class="op" id="7029265">)</span>&nbsp;<span class="op" id="7029267">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7029270">if</span>&nbsp;<span class="ident" id="7029273">codeJSON</span>&nbsp;<span class="op" id="7029282">==</span>&nbsp;<span class="builtintype" id="7029285">nil</span>&nbsp;<span class="op" id="7029289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029293">b</span><span class="op" id="7029294">.</span><span class="ident" id="7029295">StopTimer</span><span class="op" id="7029304">(</span><span class="op" id="7029305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029309">codeInit</span><span class="op" id="7029317">(</span><span class="op" id="7029318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029322">b</span><span class="op" id="7029323">.</span><span class="ident" id="7029324">StartTimer</span><span class="op" id="7029334">(</span><span class="op" id="7029335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7029338">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7029341">for</span>&nbsp;<span class="ident" id="7029345">i</span>&nbsp;<span class="op" id="7029347">:=</span>&nbsp;<span class="num" id="7029350">0</span><span class="op" id="7029351">;</span>&nbsp;<span class="ident" id="7029353">i</span>&nbsp;<span class="op" id="7029355">&lt;</span>&nbsp;<span class="ident" id="7029357">b</span><span class="op" id="7029358">.</span><span class="ident" id="7029359">N</span><span class="op" id="7029360">;</span>&nbsp;<span class="ident" id="7029362">i</span><span class="op" id="7029363">++</span>&nbsp;<span class="op" id="7029366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7029370">var</span>&nbsp;<span class="ident" id="7029374">r</span>&nbsp;<span class="ident" id="7029376">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7029391">if</span>&nbsp;<span class="ident" id="7029394">err</span>&nbsp;<span class="op" id="7029398">:=</span>&nbsp;<span class="ident" id="7029401">Unmarshal</span><span class="op" id="7029410">(</span><span class="ident" id="7029411">codeJSON</span><span class="op" id="7029419">,</span>&nbsp;<span class="op" id="7029421">&amp;</span><span class="ident" id="7029422">r</span><span class="op" id="7029423">)</span><span class="op" id="7029424">;</span>&nbsp;<span class="ident" id="7029426">err</span>&nbsp;<span class="op" id="7029430">!=</span>&nbsp;<span class="builtintype" id="7029433">nil</span>&nbsp;<span class="op" id="7029437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029442">b</span><span class="op" id="7029443">.</span><span class="ident" id="7029444">Fatal</span><span class="op" id="7029449">(</span><span class="string" id="7029450">&#34;Unmmarshal:&#34;</span><span class="op" id="7029463">,</span>&nbsp;<span class="ident" id="7029465">err</span><span class="op" id="7029468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7029472">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7029475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029478">b</span><span class="op" id="7029479">.</span><span class="ident" id="7029480">SetBytes</span><span class="op" id="7029488">(</span><span class="builtintype" id="7029489">int64</span><span class="op" id="7029494">(</span><span class="builtinfunc" id="7029495">len</span><span class="op" id="7029498">(</span><span class="ident" id="7029499">codeJSON</span><span class="op" id="7029507">)</span><span class="op" id="7029508">)</span><span class="op" id="7029509">)</span><br>
<span class="lineno"></span><span class="op" id="7029511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7029514">func</span>&nbsp;<span class="ident" id="7029519">BenchmarkCodeUnmarshalReuse</span><span class="op" id="7029546">(</span><span class="ident" id="7029547">b</span>&nbsp;<span class="op" id="7029549">*</span><span class="ident" id="7029550">testing</span><span class="op" id="7029557">.</span><span class="ident" id="7029558">B</span><span class="op" id="7029559">)</span>&nbsp;<span class="op" id="7029561">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7029564">if</span>&nbsp;<span class="ident" id="7029567">codeJSON</span>&nbsp;<span class="op" id="7029576">==</span>&nbsp;<span class="builtintype" id="7029579">nil</span>&nbsp;<span class="op" id="7029583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029587">b</span><span class="op" id="7029588">.</span><span class="ident" id="7029589">StopTimer</span><span class="op" id="7029598">(</span><span class="op" id="7029599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029603">codeInit</span><span class="op" id="7029611">(</span><span class="op" id="7029612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029616">b</span><span class="op" id="7029617">.</span><span class="ident" id="7029618">StartTimer</span><span class="op" id="7029628">(</span><span class="op" id="7029629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7029632">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7029635">var</span>&nbsp;<span class="ident" id="7029639">r</span>&nbsp;<span class="ident" id="7029641">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7029655">for</span>&nbsp;<span class="ident" id="7029659">i</span>&nbsp;<span class="op" id="7029661">:=</span>&nbsp;<span class="num" id="7029664">0</span><span class="op" id="7029665">;</span>&nbsp;<span class="ident" id="7029667">i</span>&nbsp;<span class="op" id="7029669">&lt;</span>&nbsp;<span class="ident" id="7029671">b</span><span class="op" id="7029672">.</span><span class="ident" id="7029673">N</span><span class="op" id="7029674">;</span>&nbsp;<span class="ident" id="7029676">i</span><span class="op" id="7029677">++</span>&nbsp;<span class="op" id="7029680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7029684">if</span>&nbsp;<span class="ident" id="7029687">err</span>&nbsp;<span class="op" id="7029691">:=</span>&nbsp;<span class="ident" id="7029694">Unmarshal</span><span class="op" id="7029703">(</span><span class="ident" id="7029704">codeJSON</span><span class="op" id="7029712">,</span>&nbsp;<span class="op" id="7029714">&amp;</span><span class="ident" id="7029715">r</span><span class="op" id="7029716">)</span><span class="op" id="7029717">;</span>&nbsp;<span class="ident" id="7029719">err</span>&nbsp;<span class="op" id="7029723">!=</span>&nbsp;<span class="builtintype" id="7029726">nil</span>&nbsp;<span class="op" id="7029730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029735">b</span><span class="op" id="7029736">.</span><span class="ident" id="7029737">Fatal</span><span class="op" id="7029742">(</span><span class="string" id="7029743">&#34;Unmmarshal:&#34;</span><span class="op" id="7029756">,</span>&nbsp;<span class="ident" id="7029758">err</span><span class="op" id="7029761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7029765">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7029768">}</span><br>
<span class="lineno"></span><span class="op" id="7029770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7029773">func</span>&nbsp;<span class="ident" id="7029778">BenchmarkUnmarshalString</span><span class="op" id="7029802">(</span><span class="ident" id="7029803">b</span>&nbsp;<span class="op" id="7029805">*</span><span class="ident" id="7029806">testing</span><span class="op" id="7029813">.</span><span class="ident" id="7029814">B</span><span class="op" id="7029815">)</span>&nbsp;<span class="op" id="7029817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029820">data</span>&nbsp;<span class="op" id="7029825">:=</span>&nbsp;<span class="op" id="7029828">[</span><span class="op" id="7029829">]</span><span class="builtintype" id="7029830">byte</span><span class="op" id="7029834">(</span><span class="string" id="7029835">`&#34;hello,&nbsp;world&#34;`</span><span class="op" id="7029851">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7029854">var</span>&nbsp;<span class="ident" id="7029858">s</span>&nbsp;<span class="builtintype" id="7029860">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7029869">for</span>&nbsp;<span class="ident" id="7029873">i</span>&nbsp;<span class="op" id="7029875">:=</span>&nbsp;<span class="num" id="7029878">0</span><span class="op" id="7029879">;</span>&nbsp;<span class="ident" id="7029881">i</span>&nbsp;<span class="op" id="7029883">&lt;</span>&nbsp;<span class="ident" id="7029885">b</span><span class="op" id="7029886">.</span><span class="ident" id="7029887">N</span><span class="op" id="7029888">;</span>&nbsp;<span class="ident" id="7029890">i</span><span class="op" id="7029891">++</span>&nbsp;<span class="op" id="7029894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7029898">if</span>&nbsp;<span class="ident" id="7029901">err</span>&nbsp;<span class="op" id="7029905">:=</span>&nbsp;<span class="ident" id="7029908">Unmarshal</span><span class="op" id="7029917">(</span><span class="ident" id="7029918">data</span><span class="op" id="7029922">,</span>&nbsp;<span class="op" id="7029924">&amp;</span><span class="ident" id="7029925">s</span><span class="op" id="7029926">)</span><span class="op" id="7029927">;</span>&nbsp;<span class="ident" id="7029929">err</span>&nbsp;<span class="op" id="7029933">!=</span>&nbsp;<span class="builtintype" id="7029936">nil</span>&nbsp;<span class="op" id="7029940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7029945">b</span><span class="op" id="7029946">.</span><span class="ident" id="7029947">Fatal</span><span class="op" id="7029952">(</span><span class="string" id="7029953">&#34;Unmarshal:&#34;</span><span class="op" id="7029965">,</span>&nbsp;<span class="ident" id="7029967">err</span><span class="op" id="7029970">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7029974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7029977">}</span><br>
<span class="lineno"></span><span class="op" id="7029979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7029982">func</span>&nbsp;<span class="ident" id="7029987">BenchmarkUnmarshalFloat64</span><span class="op" id="7030012">(</span><span class="ident" id="7030013">b</span>&nbsp;<span class="op" id="7030015">*</span><span class="ident" id="7030016">testing</span><span class="op" id="7030023">.</span><span class="ident" id="7030024">B</span><span class="op" id="7030025">)</span>&nbsp;<span class="op" id="7030027">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7030030">var</span>&nbsp;<span class="ident" id="7030034">f</span>&nbsp;<span class="builtintype" id="7030036">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7030045">data</span>&nbsp;<span class="op" id="7030050">:=</span>&nbsp;<span class="op" id="7030053">[</span><span class="op" id="7030054">]</span><span class="builtintype" id="7030055">byte</span><span class="op" id="7030059">(</span><span class="string" id="7030060">`3.14`</span><span class="op" id="7030066">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7030070">for</span>&nbsp;<span class="ident" id="7030074">i</span>&nbsp;<span class="op" id="7030076">:=</span>&nbsp;<span class="num" id="7030079">0</span><span class="op" id="7030080">;</span>&nbsp;<span class="ident" id="7030082">i</span>&nbsp;<span class="op" id="7030084">&lt;</span>&nbsp;<span class="ident" id="7030086">b</span><span class="op" id="7030087">.</span><span class="ident" id="7030088">N</span><span class="op" id="7030089">;</span>&nbsp;<span class="ident" id="7030091">i</span><span class="op" id="7030092">++</span>&nbsp;<span class="op" id="7030095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7030099">if</span>&nbsp;<span class="ident" id="7030102">err</span>&nbsp;<span class="op" id="7030106">:=</span>&nbsp;<span class="ident" id="7030109">Unmarshal</span><span class="op" id="7030118">(</span><span class="ident" id="7030119">data</span><span class="op" id="7030123">,</span>&nbsp;<span class="op" id="7030125">&amp;</span><span class="ident" id="7030126">f</span><span class="op" id="7030127">)</span><span class="op" id="7030128">;</span>&nbsp;<span class="ident" id="7030130">err</span>&nbsp;<span class="op" id="7030134">!=</span>&nbsp;<span class="builtintype" id="7030137">nil</span>&nbsp;<span class="op" id="7030141">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7030146">b</span><span class="op" id="7030147">.</span><span class="ident" id="7030148">Fatal</span><span class="op" id="7030153">(</span><span class="string" id="7030154">&#34;Unmarshal:&#34;</span><span class="op" id="7030166">,</span>&nbsp;<span class="ident" id="7030168">err</span><span class="op" id="7030171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7030175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7030178">}</span><br>
<span class="lineno"></span><span class="op" id="7030180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="7030183">func</span>&nbsp;<span class="ident" id="7030188">BenchmarkUnmarshalInt64</span><span class="op" id="7030211">(</span><span class="ident" id="7030212">b</span>&nbsp;<span class="op" id="7030214">*</span><span class="ident" id="7030215">testing</span><span class="op" id="7030222">.</span><span class="ident" id="7030223">B</span><span class="op" id="7030224">)</span>&nbsp;<span class="op" id="7030226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7030229">var</span>&nbsp;<span class="ident" id="7030233">x</span>&nbsp;<span class="builtintype" id="7030235">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7030242">data</span>&nbsp;<span class="op" id="7030247">:=</span>&nbsp;<span class="op" id="7030250">[</span><span class="op" id="7030251">]</span><span class="builtintype" id="7030252">byte</span><span class="op" id="7030256">(</span><span class="string" id="7030257">`3`</span><span class="op" id="7030260">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7030264">for</span>&nbsp;<span class="ident" id="7030268">i</span>&nbsp;<span class="op" id="7030270">:=</span>&nbsp;<span class="num" id="7030273">0</span><span class="op" id="7030274">;</span>&nbsp;<span class="ident" id="7030276">i</span>&nbsp;<span class="op" id="7030278">&lt;</span>&nbsp;<span class="ident" id="7030280">b</span><span class="op" id="7030281">.</span><span class="ident" id="7030282">N</span><span class="op" id="7030283">;</span>&nbsp;<span class="ident" id="7030285">i</span><span class="op" id="7030286">++</span>&nbsp;<span class="op" id="7030289">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7030293">if</span>&nbsp;<span class="ident" id="7030296">err</span>&nbsp;<span class="op" id="7030300">:=</span>&nbsp;<span class="ident" id="7030303">Unmarshal</span><span class="op" id="7030312">(</span><span class="ident" id="7030313">data</span><span class="op" id="7030317">,</span>&nbsp;<span class="op" id="7030319">&amp;</span><span class="ident" id="7030320">x</span><span class="op" id="7030321">)</span><span class="op" id="7030322">;</span>&nbsp;<span class="ident" id="7030324">err</span>&nbsp;<span class="op" id="7030328">!=</span>&nbsp;<span class="builtintype" id="7030331">nil</span>&nbsp;<span class="op" id="7030335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7030340">b</span><span class="op" id="7030341">.</span><span class="ident" id="7030342">Fatal</span><span class="op" id="7030347">(</span><span class="string" id="7030348">&#34;Unmarshal:&#34;</span><span class="op" id="7030360">,</span>&nbsp;<span class="ident" id="7030362">err</span><span class="op" id="7030365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7030369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7030372">}</span><br>
<span class="lineno"></span><span class="op" id="7030374">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
