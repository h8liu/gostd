<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1480170">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1480226">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1480280">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1480331">package</span>&nbsp;<span class="ident" id="1480339">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1480344">import</span>&nbsp;<span class="op" id="1480351">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1480354">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1480364">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1480370">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="1480377">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1480380">//&nbsp;Pipe&nbsp;creates&nbsp;a&nbsp;synchronous,&nbsp;in-memory,&nbsp;full&nbsp;duplex</span><br>
<span class="lineno"></span><span class="comment" id="1480434">//&nbsp;network&nbsp;connection;&nbsp;both&nbsp;ends&nbsp;implement&nbsp;the&nbsp;Conn&nbsp;interface.</span><br>
<span class="lineno">15</span><span class="comment" id="1480497">//&nbsp;Reads&nbsp;on&nbsp;one&nbsp;end&nbsp;are&nbsp;matched&nbsp;with&nbsp;writes&nbsp;on&nbsp;the&nbsp;other,</span><br>
<span class="lineno"></span><span class="comment" id="1480555">//&nbsp;copying&nbsp;data&nbsp;directly&nbsp;between&nbsp;the&nbsp;two;&nbsp;there&nbsp;is&nbsp;no&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="1480618">//&nbsp;buffering.</span><br>
<span class="lineno"></span><span class="keyword" id="1480632">func</span>&nbsp;<span class="ident" id="1480637">Pipe</span><span class="op" id="1480641">(</span><span class="op" id="1480642">)</span>&nbsp;<span class="op" id="1480644">(</span><span class="ident" id="1480645"><a href="/net/net.go.html#1465335">Conn</a></span><span class="op" id="1480649">,</span>&nbsp;<span class="ident" id="1480651"><a href="/net/net.go.html#1465335">Conn</a></span><span class="op" id="1480655">)</span>&nbsp;<span class="op" id="1480657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1480660">r1</span><span class="op" id="1480662">,</span>&nbsp;<span class="ident" id="1480664">w1</span>&nbsp;<span class="op" id="1480667">:=</span>&nbsp;<span class="ident" id="1480670"><a href="/net/pipe.go.html#1480364">io</a></span><span class="op" id="1480672">.</span><span class="ident" id="1480673">Pipe</span><span class="op" id="1480677">(</span><span class="op" id="1480678">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1480681">r2</span><span class="op" id="1480683">,</span>&nbsp;<span class="ident" id="1480685">w2</span>&nbsp;<span class="op" id="1480688">:=</span>&nbsp;<span class="ident" id="1480691"><a href="/net/pipe.go.html#1480364">io</a></span><span class="op" id="1480693">.</span><span class="ident" id="1480694">Pipe</span><span class="op" id="1480698">(</span><span class="op" id="1480699">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1480703">return</span>&nbsp;<span class="op" id="1480710">&amp;</span><span class="ident" id="1480711"><a href="/net/pipe.go.html#1480747">pipe</a></span><span class="op" id="1480715">{</span><span class="ident" id="1480716"><a href="/net/pipe.go.html#1480660">r1</a></span><span class="op" id="1480718">,</span>&nbsp;<span class="ident" id="1480720"><a href="/net/pipe.go.html#1480685">w2</a></span><span class="op" id="1480722">}</span><span class="op" id="1480723">,</span>&nbsp;<span class="op" id="1480725">&amp;</span><span class="ident" id="1480726"><a href="/net/pipe.go.html#1480747">pipe</a></span><span class="op" id="1480730">{</span><span class="ident" id="1480731"><a href="/net/pipe.go.html#1480681">r2</a></span><span class="op" id="1480733">,</span>&nbsp;<span class="ident" id="1480735"><a href="/net/pipe.go.html#1480664">w1</a></span><span class="op" id="1480737">}</span><br>
<span class="lineno"></span><span class="op" id="1480739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="1480742">type</span>&nbsp;<span class="ident" id="1480747">pipe</span>&nbsp;<span class="keyword" id="1480752">struct</span>&nbsp;<span class="op" id="1480759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1480762">*</span><span class="ident" id="1480763"><a href="/net/pipe.go.html#1480364">io</a></span><span class="op" id="1480765">.</span><span class="ident" id="1480766">PipeReader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1480778">*</span><span class="ident" id="1480779"><a href="/net/pipe.go.html#1480364">io</a></span><span class="op" id="1480781">.</span><span class="ident" id="1480782">PipeWriter</span><br>
<span class="lineno"></span><span class="op" id="1480793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="1480796">type</span>&nbsp;<span class="ident" id="1480801">pipeAddr</span>&nbsp;<span class="builtintype" id="1480810">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1480815">func</span>&nbsp;<span class="op" id="1480820">(</span><span class="ident" id="1480821"><a href="/net/pipe.go.html#1480801">pipeAddr</a></span><span class="op" id="1480829">)</span>&nbsp;<span class="ident" id="1480831">Network</span><span class="op" id="1480838">(</span><span class="op" id="1480839">)</span>&nbsp;<span class="builtintype" id="1480841">string</span>&nbsp;<span class="op" id="1480848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1480851">return</span>&nbsp;<span class="string" id="1480858">&#34;pipe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1480865">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="1480868">func</span>&nbsp;<span class="op" id="1480873">(</span><span class="ident" id="1480874"><a href="/net/pipe.go.html#1480801">pipeAddr</a></span><span class="op" id="1480882">)</span>&nbsp;<span class="ident" id="1480884">String</span><span class="op" id="1480890">(</span><span class="op" id="1480891">)</span>&nbsp;<span class="builtintype" id="1480893">string</span>&nbsp;<span class="op" id="1480900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1480903">return</span>&nbsp;<span class="string" id="1480910">&#34;pipe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1480917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="1480920">func</span>&nbsp;<span class="op" id="1480925">(</span><span class="ident" id="1480926">p</span>&nbsp;<span class="op" id="1480928">*</span><span class="ident" id="1480929"><a href="/net/pipe.go.html#1480747">pipe</a></span><span class="op" id="1480933">)</span>&nbsp;<span class="ident" id="1480935">Close</span><span class="op" id="1480940">(</span><span class="op" id="1480941">)</span>&nbsp;<span class="builtintype" id="1480943">error</span>&nbsp;<span class="op" id="1480949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1480952">err</span>&nbsp;<span class="op" id="1480956">:=</span>&nbsp;<span class="ident" id="1480959"><a href="/net/pipe.go.html#1480926">p</a></span><span class="op" id="1480960">.</span><span class="ident" id="1480961">PipeReader</span><span class="op" id="1480971">.</span><span class="ident" id="1480972">Close</span><span class="op" id="1480977">(</span><span class="op" id="1480978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1480981">err1</span>&nbsp;<span class="op" id="1480986">:=</span>&nbsp;<span class="ident" id="1480989"><a href="/net/pipe.go.html#1480926">p</a></span><span class="op" id="1480990">.</span><span class="ident" id="1480991">PipeWriter</span><span class="op" id="1481001">.</span><span class="ident" id="1481002">Close</span><span class="op" id="1481007">(</span><span class="op" id="1481008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1481011">if</span>&nbsp;<span class="ident" id="1481014"><a href="/net/pipe.go.html#1480952">err</a></span>&nbsp;<span class="op" id="1481018">==</span>&nbsp;<span class="ident" id="1481021">nil</span>&nbsp;<span class="op" id="1481025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1481029"><a href="/net/pipe.go.html#1480952">err</a></span>&nbsp;<span class="op" id="1481033">=</span>&nbsp;<span class="ident" id="1481035"><a href="/net/pipe.go.html#1480981">err1</a></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1481041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1481044">return</span>&nbsp;<span class="ident" id="1481051"><a href="/net/pipe.go.html#1480952">err</a></span><br>
<span class="lineno"></span><span class="op" id="1481055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1481058">func</span>&nbsp;<span class="op" id="1481063">(</span><span class="ident" id="1481064">p</span>&nbsp;<span class="op" id="1481066">*</span><span class="ident" id="1481067"><a href="/net/pipe.go.html#1480747">pipe</a></span><span class="op" id="1481071">)</span>&nbsp;<span class="ident" id="1481073">LocalAddr</span><span class="op" id="1481082">(</span><span class="op" id="1481083">)</span>&nbsp;<span class="ident" id="1481085"><a href="/net/net.go.html#1465097">Addr</a></span>&nbsp;<span class="op" id="1481090">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1481093">return</span>&nbsp;<span class="ident" id="1481100"><a href="/net/pipe.go.html#1480801">pipeAddr</a></span><span class="op" id="1481108">(</span><span class="num" id="1481109">0</span><span class="op" id="1481110">)</span><br>
<span class="lineno"></span><span class="op" id="1481112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1481115">func</span>&nbsp;<span class="op" id="1481120">(</span><span class="ident" id="1481121">p</span>&nbsp;<span class="op" id="1481123">*</span><span class="ident" id="1481124"><a href="/net/pipe.go.html#1480747">pipe</a></span><span class="op" id="1481128">)</span>&nbsp;<span class="ident" id="1481130">RemoteAddr</span><span class="op" id="1481140">(</span><span class="op" id="1481141">)</span>&nbsp;<span class="ident" id="1481143"><a href="/net/net.go.html#1465097">Addr</a></span>&nbsp;<span class="op" id="1481148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1481151">return</span>&nbsp;<span class="ident" id="1481158"><a href="/net/pipe.go.html#1480801">pipeAddr</a></span><span class="op" id="1481166">(</span><span class="num" id="1481167">0</span><span class="op" id="1481168">)</span><br>
<span class="lineno">55</span><span class="op" id="1481170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1481173">func</span>&nbsp;<span class="op" id="1481178">(</span><span class="ident" id="1481179">p</span>&nbsp;<span class="op" id="1481181">*</span><span class="ident" id="1481182"><a href="/net/pipe.go.html#1480747">pipe</a></span><span class="op" id="1481186">)</span>&nbsp;<span class="ident" id="1481188">SetDeadline</span><span class="op" id="1481199">(</span><span class="ident" id="1481200">t</span>&nbsp;<span class="ident" id="1481202"><a href="/net/pipe.go.html#1480370">time</a></span><span class="op" id="1481206">.</span><span class="ident" id="1481207">Time</span><span class="op" id="1481211">)</span>&nbsp;<span class="builtintype" id="1481213">error</span>&nbsp;<span class="op" id="1481219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1481222">return</span>&nbsp;<span class="ident" id="1481229"><a href="/net/pipe.go.html#1480354">errors</a></span><span class="op" id="1481235">.</span><span class="ident" id="1481236">New</span><span class="op" id="1481239">(</span><span class="string" id="1481240">&#34;net.Pipe&nbsp;does&nbsp;not&nbsp;support&nbsp;deadlines&#34;</span><span class="op" id="1481277">)</span><br>
<span class="lineno"></span><span class="op" id="1481279">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="1481282">func</span>&nbsp;<span class="op" id="1481287">(</span><span class="ident" id="1481288">p</span>&nbsp;<span class="op" id="1481290">*</span><span class="ident" id="1481291"><a href="/net/pipe.go.html#1480747">pipe</a></span><span class="op" id="1481295">)</span>&nbsp;<span class="ident" id="1481297">SetReadDeadline</span><span class="op" id="1481312">(</span><span class="ident" id="1481313">t</span>&nbsp;<span class="ident" id="1481315"><a href="/net/pipe.go.html#1480370">time</a></span><span class="op" id="1481319">.</span><span class="ident" id="1481320">Time</span><span class="op" id="1481324">)</span>&nbsp;<span class="builtintype" id="1481326">error</span>&nbsp;<span class="op" id="1481332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1481335">return</span>&nbsp;<span class="ident" id="1481342"><a href="/net/pipe.go.html#1480354">errors</a></span><span class="op" id="1481348">.</span><span class="ident" id="1481349">New</span><span class="op" id="1481352">(</span><span class="string" id="1481353">&#34;net.Pipe&nbsp;does&nbsp;not&nbsp;support&nbsp;deadlines&#34;</span><span class="op" id="1481390">)</span><br>
<span class="lineno"></span><span class="op" id="1481392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="1481395">func</span>&nbsp;<span class="op" id="1481400">(</span><span class="ident" id="1481401">p</span>&nbsp;<span class="op" id="1481403">*</span><span class="ident" id="1481404"><a href="/net/pipe.go.html#1480747">pipe</a></span><span class="op" id="1481408">)</span>&nbsp;<span class="ident" id="1481410">SetWriteDeadline</span><span class="op" id="1481426">(</span><span class="ident" id="1481427">t</span>&nbsp;<span class="ident" id="1481429"><a href="/net/pipe.go.html#1480370">time</a></span><span class="op" id="1481433">.</span><span class="ident" id="1481434">Time</span><span class="op" id="1481438">)</span>&nbsp;<span class="builtintype" id="1481440">error</span>&nbsp;<span class="op" id="1481446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1481449">return</span>&nbsp;<span class="ident" id="1481456"><a href="/net/pipe.go.html#1480354">errors</a></span><span class="op" id="1481462">.</span><span class="ident" id="1481463">New</span><span class="op" id="1481466">(</span><span class="string" id="1481467">&#34;net.Pipe&nbsp;does&nbsp;not&nbsp;support&nbsp;deadlines&#34;</span><span class="op" id="1481504">)</span><br>
<span class="lineno"></span><span class="op" id="1481506">}</span>
</div>
</body>
</html>
