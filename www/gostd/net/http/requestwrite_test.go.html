<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6844197">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6844253">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6844307">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6844358">package</span>&nbsp;<span class="ident" id="6844366">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6844372">import</span>&nbsp;<span class="op" id="6844379">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6844382">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6844391">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6844401">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6844408">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6844414">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6844427">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6844438">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6844449">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6844459">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6844462">type</span>&nbsp;<span class="ident" id="6844467">reqWriteTest</span>&nbsp;<span class="keyword" id="6844480">struct</span>&nbsp;<span class="op" id="6844487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844490">Req</span>&nbsp;&nbsp;<span class="ident" id="6844495">Request</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844504">Body</span>&nbsp;<span class="keyword" id="6844509">interface</span><span class="op" id="6844518">{</span><span class="op" id="6844519">}</span>&nbsp;<span class="comment" id="6844521">//&nbsp;optional&nbsp;[]byte&nbsp;or&nbsp;func()&nbsp;io.ReadCloser&nbsp;to&nbsp;populate&nbsp;Req.Body</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6844587">//&nbsp;Any&nbsp;of&nbsp;these&nbsp;three&nbsp;may&nbsp;be&nbsp;empty&nbsp;to&nbsp;skip&nbsp;that&nbsp;test.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844642">WantWrite</span>&nbsp;<span class="builtintype" id="6844652">string</span>&nbsp;<span class="comment" id="6844659">//&nbsp;Request.Write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844677">WantProxy</span>&nbsp;<span class="builtintype" id="6844687">string</span>&nbsp;<span class="comment" id="6844694">//&nbsp;Request.WriteProxy</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844718">WantError</span>&nbsp;<span class="builtintype" id="6844728">error</span>&nbsp;<span class="comment" id="6844734">//&nbsp;wanted&nbsp;error&nbsp;from&nbsp;Request.Write</span><br>
<span class="lineno"></span><span class="op" id="6844769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6844772">var</span>&nbsp;<span class="ident" id="6844776">reqWriteTests</span>&nbsp;<span class="op" id="6844790">=</span>&nbsp;<span class="op" id="6844792">[</span><span class="op" id="6844793">]</span><span class="ident" id="6844794">reqWriteTest</span><span class="op" id="6844806">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6844809">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;no&nbsp;body;&nbsp;no&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6844861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844865">Req</span><span class="op" id="6844868">:</span>&nbsp;<span class="ident" id="6844870">Request</span><span class="op" id="6844877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844882">Method</span><span class="op" id="6844888">:</span>&nbsp;<span class="string" id="6844890">&#34;GET&#34;</span><span class="op" id="6844895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844900">URL</span><span class="op" id="6844903">:</span>&nbsp;<span class="op" id="6844905">&amp;</span><span class="ident" id="6844906">url</span><span class="op" id="6844909">.</span><span class="ident" id="6844910">URL</span><span class="op" id="6844913">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844919">Scheme</span><span class="op" id="6844925">:</span>&nbsp;<span class="string" id="6844927">&#34;http&#34;</span><span class="op" id="6844933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844939">Host</span><span class="op" id="6844943">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6844947">&#34;www.techcrunch.com&#34;</span><span class="op" id="6844967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844973">Path</span><span class="op" id="6844977">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6844981">&#34;/&#34;</span><span class="op" id="6844984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6844989">}</span><span class="op" id="6844990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6844995">Proto</span><span class="op" id="6845000">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6845007">&#34;HTTP/1.1&#34;</span><span class="op" id="6845017">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6845022">ProtoMajor</span><span class="op" id="6845032">:</span>&nbsp;<span class="num" id="6845034">1</span><span class="op" id="6845035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6845040">ProtoMinor</span><span class="op" id="6845050">:</span>&nbsp;<span class="num" id="6845052">1</span><span class="op" id="6845053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6845058">Header</span><span class="op" id="6845064">:</span>&nbsp;<span class="ident" id="6845066">Header</span><span class="op" id="6845072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845078">&#34;Accept&#34;</span><span class="op" id="6845086">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6845098">{</span><span class="string" id="6845099">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="6845164">}</span><span class="op" id="6845165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845171">&#34;Accept-Charset&#34;</span><span class="op" id="6845187">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6845191">{</span><span class="string" id="6845192">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="6845224">}</span><span class="op" id="6845225">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845231">&#34;Accept-Encoding&#34;</span><span class="op" id="6845248">:</span>&nbsp;&nbsp;<span class="op" id="6845251">{</span><span class="string" id="6845252">&#34;gzip,deflate&#34;</span><span class="op" id="6845266">}</span><span class="op" id="6845267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845273">&#34;Accept-Language&#34;</span><span class="op" id="6845290">:</span>&nbsp;&nbsp;<span class="op" id="6845293">{</span><span class="string" id="6845294">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="6845310">}</span><span class="op" id="6845311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845317">&#34;Keep-Alive&#34;</span><span class="op" id="6845329">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6845337">{</span><span class="string" id="6845338">&#34;300&#34;</span><span class="op" id="6845343">}</span><span class="op" id="6845344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845350">&#34;Proxy-Connection&#34;</span><span class="op" id="6845368">:</span>&nbsp;<span class="op" id="6845370">{</span><span class="string" id="6845371">&#34;keep-alive&#34;</span><span class="op" id="6845383">}</span><span class="op" id="6845384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845390">&#34;User-Agent&#34;</span><span class="op" id="6845402">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6845410">{</span><span class="string" id="6845411">&#34;Fake&#34;</span><span class="op" id="6845417">}</span><span class="op" id="6845418">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6845423">}</span><span class="op" id="6845424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6845429">Body</span><span class="op" id="6845433">:</span>&nbsp;&nbsp;<span class="ident" id="6845436">nil</span><span class="op" id="6845439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6845444">Close</span><span class="op" id="6845449">:</span>&nbsp;<span class="builtintype" id="6845451">false</span><span class="op" id="6845456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6845461">Host</span><span class="op" id="6845465">:</span>&nbsp;&nbsp;<span class="string" id="6845468">&#34;www.techcrunch.com&#34;</span><span class="op" id="6845488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6845493">Form</span><span class="op" id="6845497">:</span>&nbsp;&nbsp;<span class="keyword" id="6845500">map</span><span class="op" id="6845503">[</span><span class="builtintype" id="6845504">string</span><span class="op" id="6845510">]</span><span class="op" id="6845511">[</span><span class="op" id="6845512">]</span><span class="builtintype" id="6845513">string</span><span class="op" id="6845519">{</span><span class="op" id="6845520">}</span><span class="op" id="6845521">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6845525">}</span><span class="op" id="6845526">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6845531">WantWrite</span><span class="op" id="6845540">:</span>&nbsp;<span class="string" id="6845542">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6845563">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845568">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="6845599">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845604">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="6845627">+</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845632">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="6845710">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845715">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="6845768">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845773">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="6845809">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845814">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="6845852">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845857">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="6845879">+</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845884">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span><span class="op" id="6845922">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6845927">WantProxy</span><span class="op" id="6845936">:</span>&nbsp;<span class="string" id="6845938">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6845984">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6845989">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="6846020">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6846025">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="6846048">+</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6846053">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="6846131">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6846136">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="6846189">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6846194">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="6846230">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6846235">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="6846273">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6846278">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="6846300">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6846305">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span><span class="op" id="6846343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6846346">}</span><span class="op" id="6846347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6846350">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6846402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846406">Req</span><span class="op" id="6846409">:</span>&nbsp;<span class="ident" id="6846411">Request</span><span class="op" id="6846418">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846423">Method</span><span class="op" id="6846429">:</span>&nbsp;<span class="string" id="6846431">&#34;GET&#34;</span><span class="op" id="6846436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846441">URL</span><span class="op" id="6846444">:</span>&nbsp;<span class="op" id="6846446">&amp;</span><span class="ident" id="6846447">url</span><span class="op" id="6846450">.</span><span class="ident" id="6846451">URL</span><span class="op" id="6846454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846460">Scheme</span><span class="op" id="6846466">:</span>&nbsp;<span class="string" id="6846468">&#34;http&#34;</span><span class="op" id="6846474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846480">Host</span><span class="op" id="6846484">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6846488">&#34;www.google.com&#34;</span><span class="op" id="6846504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846510">Path</span><span class="op" id="6846514">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6846518">&#34;/search&#34;</span><span class="op" id="6846527">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6846532">}</span><span class="op" id="6846533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846538">ProtoMajor</span><span class="op" id="6846548">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6846556">1</span><span class="op" id="6846557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846562">ProtoMinor</span><span class="op" id="6846572">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6846580">1</span><span class="op" id="6846581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846586">Header</span><span class="op" id="6846592">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6846604">Header</span><span class="op" id="6846610">{</span><span class="op" id="6846611">}</span><span class="op" id="6846612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846617">TransferEncoding</span><span class="op" id="6846633">:</span>&nbsp;<span class="op" id="6846635">[</span><span class="op" id="6846636">]</span><span class="builtintype" id="6846637">string</span><span class="op" id="6846643">{</span><span class="string" id="6846644">&#34;chunked&#34;</span><span class="op" id="6846653">}</span><span class="op" id="6846654">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6846658">}</span><span class="op" id="6846659">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846664">Body</span><span class="op" id="6846668">:</span>&nbsp;<span class="op" id="6846670">[</span><span class="op" id="6846671">]</span><span class="builtintype" id="6846672">byte</span><span class="op" id="6846676">(</span><span class="string" id="6846677">&#34;abcdef&#34;</span><span class="op" id="6846685">)</span><span class="op" id="6846686">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846691">WantWrite</span><span class="op" id="6846700">:</span>&nbsp;<span class="string" id="6846702">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6846729">+</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6846734">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="6846761">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6846766">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6846804">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6846809">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6846846">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846851">chunk</span><span class="op" id="6846856">(</span><span class="string" id="6846857">&#34;abcdef&#34;</span><span class="op" id="6846865">)</span>&nbsp;<span class="op" id="6846867">+</span>&nbsp;<span class="ident" id="6846869">chunk</span><span class="op" id="6846874">(</span><span class="string" id="6846875">&#34;&#34;</span><span class="op" id="6846877">)</span><span class="op" id="6846878">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6846883">WantProxy</span><span class="op" id="6846892">:</span>&nbsp;<span class="string" id="6846894">&#34;GET&nbsp;http://www.google.com/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6846942">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6846947">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="6846974">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6846979">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6847017">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6847022">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6847059">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847064">chunk</span><span class="op" id="6847069">(</span><span class="string" id="6847070">&#34;abcdef&#34;</span><span class="op" id="6847078">)</span>&nbsp;<span class="op" id="6847080">+</span>&nbsp;<span class="ident" id="6847082">chunk</span><span class="op" id="6847087">(</span><span class="string" id="6847088">&#34;&#34;</span><span class="op" id="6847090">)</span><span class="op" id="6847091">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6847094">}</span><span class="op" id="6847095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6847098">//&nbsp;HTTP/1.1&nbsp;POST&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6847155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847159">Req</span><span class="op" id="6847162">:</span>&nbsp;<span class="ident" id="6847164">Request</span><span class="op" id="6847171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847176">Method</span><span class="op" id="6847182">:</span>&nbsp;<span class="string" id="6847184">&#34;POST&#34;</span><span class="op" id="6847190">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847195">URL</span><span class="op" id="6847198">:</span>&nbsp;<span class="op" id="6847200">&amp;</span><span class="ident" id="6847201">url</span><span class="op" id="6847204">.</span><span class="ident" id="6847205">URL</span><span class="op" id="6847208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847214">Scheme</span><span class="op" id="6847220">:</span>&nbsp;<span class="string" id="6847222">&#34;http&#34;</span><span class="op" id="6847228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847234">Host</span><span class="op" id="6847238">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6847242">&#34;www.google.com&#34;</span><span class="op" id="6847258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847264">Path</span><span class="op" id="6847268">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6847272">&#34;/search&#34;</span><span class="op" id="6847281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6847286">}</span><span class="op" id="6847287">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847292">ProtoMajor</span><span class="op" id="6847302">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6847310">1</span><span class="op" id="6847311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847316">ProtoMinor</span><span class="op" id="6847326">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6847334">1</span><span class="op" id="6847335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847340">Header</span><span class="op" id="6847346">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6847358">Header</span><span class="op" id="6847364">{</span><span class="op" id="6847365">}</span><span class="op" id="6847366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847371">Close</span><span class="op" id="6847376">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6847389">true</span><span class="op" id="6847393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847398">TransferEncoding</span><span class="op" id="6847414">:</span>&nbsp;<span class="op" id="6847416">[</span><span class="op" id="6847417">]</span><span class="builtintype" id="6847418">string</span><span class="op" id="6847424">{</span><span class="string" id="6847425">&#34;chunked&#34;</span><span class="op" id="6847434">}</span><span class="op" id="6847435">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6847439">}</span><span class="op" id="6847440">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847445">Body</span><span class="op" id="6847449">:</span>&nbsp;<span class="op" id="6847451">[</span><span class="op" id="6847452">]</span><span class="builtintype" id="6847453">byte</span><span class="op" id="6847457">(</span><span class="string" id="6847458">&#34;abcdef&#34;</span><span class="op" id="6847466">)</span><span class="op" id="6847467">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847472">WantWrite</span><span class="op" id="6847481">:</span>&nbsp;<span class="string" id="6847483">&#34;POST&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6847511">+</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6847516">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="6847543">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6847548">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6847586">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6847591">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="6847615">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6847620">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6847657">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847662">chunk</span><span class="op" id="6847667">(</span><span class="string" id="6847668">&#34;abcdef&#34;</span><span class="op" id="6847676">)</span>&nbsp;<span class="op" id="6847678">+</span>&nbsp;<span class="ident" id="6847680">chunk</span><span class="op" id="6847685">(</span><span class="string" id="6847686">&#34;&#34;</span><span class="op" id="6847688">)</span><span class="op" id="6847689">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847694">WantProxy</span><span class="op" id="6847703">:</span>&nbsp;<span class="string" id="6847705">&#34;POST&nbsp;http://www.google.com/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6847754">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6847759">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="6847786">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6847791">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6847829">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6847834">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="6847858">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6847863">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6847900">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847905">chunk</span><span class="op" id="6847910">(</span><span class="string" id="6847911">&#34;abcdef&#34;</span><span class="op" id="6847919">)</span>&nbsp;<span class="op" id="6847921">+</span>&nbsp;<span class="ident" id="6847923">chunk</span><span class="op" id="6847928">(</span><span class="string" id="6847929">&#34;&#34;</span><span class="op" id="6847931">)</span><span class="op" id="6847932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6847935">}</span><span class="op" id="6847936">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6847940">//&nbsp;HTTP/1.1&nbsp;POST&nbsp;with&nbsp;Content-Length,&nbsp;no&nbsp;chunking</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6847991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6847995">Req</span><span class="op" id="6847998">:</span>&nbsp;<span class="ident" id="6848000">Request</span><span class="op" id="6848007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848012">Method</span><span class="op" id="6848018">:</span>&nbsp;<span class="string" id="6848020">&#34;POST&#34;</span><span class="op" id="6848026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848031">URL</span><span class="op" id="6848034">:</span>&nbsp;<span class="op" id="6848036">&amp;</span><span class="ident" id="6848037">url</span><span class="op" id="6848040">.</span><span class="ident" id="6848041">URL</span><span class="op" id="6848044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848050">Scheme</span><span class="op" id="6848056">:</span>&nbsp;<span class="string" id="6848058">&#34;http&#34;</span><span class="op" id="6848064">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848070">Host</span><span class="op" id="6848074">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6848078">&#34;www.google.com&#34;</span><span class="op" id="6848094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848100">Path</span><span class="op" id="6848104">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6848108">&#34;/search&#34;</span><span class="op" id="6848117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6848122">}</span><span class="op" id="6848123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848128">ProtoMajor</span><span class="op" id="6848138">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6848143">1</span><span class="op" id="6848144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848149">ProtoMinor</span><span class="op" id="6848159">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6848164">1</span><span class="op" id="6848165">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848170">Header</span><span class="op" id="6848176">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6848185">Header</span><span class="op" id="6848191">{</span><span class="op" id="6848192">}</span><span class="op" id="6848193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848198">Close</span><span class="op" id="6848203">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6848213">true</span><span class="op" id="6848217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848222">ContentLength</span><span class="op" id="6848235">:</span>&nbsp;<span class="num" id="6848237">6</span><span class="op" id="6848238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6848242">}</span><span class="op" id="6848243">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848248">Body</span><span class="op" id="6848252">:</span>&nbsp;<span class="op" id="6848254">[</span><span class="op" id="6848255">]</span><span class="builtintype" id="6848256">byte</span><span class="op" id="6848260">(</span><span class="string" id="6848261">&#34;abcdef&#34;</span><span class="op" id="6848269">)</span><span class="op" id="6848270">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848275">WantWrite</span><span class="op" id="6848284">:</span>&nbsp;<span class="string" id="6848286">&#34;POST&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6848314">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848319">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="6848346">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848351">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6848389">+</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848394">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="6848418">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848423">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="6848447">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848452">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="6848459">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848464">&#34;abcdef&#34;</span><span class="op" id="6848472">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848477">WantProxy</span><span class="op" id="6848486">:</span>&nbsp;<span class="string" id="6848488">&#34;POST&nbsp;http://www.google.com/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6848537">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848542">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="6848569">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848574">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6848612">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848617">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="6848641">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848646">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="6848670">+</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848675">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="6848682">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848687">&#34;abcdef&#34;</span><span class="op" id="6848695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6848698">}</span><span class="op" id="6848699">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6848703">//&nbsp;HTTP/1.1&nbsp;POST&nbsp;with&nbsp;Content-Length&nbsp;in&nbsp;headers</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6848752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848756">Req</span><span class="op" id="6848759">:</span>&nbsp;<span class="ident" id="6848761">Request</span><span class="op" id="6848768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848773">Method</span><span class="op" id="6848779">:</span>&nbsp;<span class="string" id="6848781">&#34;POST&#34;</span><span class="op" id="6848787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848792">URL</span><span class="op" id="6848795">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6848800">mustParseURL</span><span class="op" id="6848812">(</span><span class="string" id="6848813">&#34;http://example.com/&#34;</span><span class="op" id="6848834">)</span><span class="op" id="6848835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848840">Host</span><span class="op" id="6848844">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6848848">&#34;example.com&#34;</span><span class="op" id="6848861">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848866">Header</span><span class="op" id="6848872">:</span>&nbsp;<span class="ident" id="6848874">Header</span><span class="op" id="6848880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848886">&#34;Content-Length&#34;</span><span class="op" id="6848902">:</span>&nbsp;<span class="op" id="6848904">[</span><span class="op" id="6848905">]</span><span class="builtintype" id="6848906">string</span><span class="op" id="6848912">{</span><span class="string" id="6848913">&#34;10&#34;</span><span class="op" id="6848917">}</span><span class="op" id="6848918">,</span>&nbsp;<span class="comment" id="6848920">//&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6848934">}</span><span class="op" id="6848935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848940">ContentLength</span><span class="op" id="6848953">:</span>&nbsp;<span class="num" id="6848955">6</span><span class="op" id="6848956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6848960">}</span><span class="op" id="6848961">,</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848966">Body</span><span class="op" id="6848970">:</span>&nbsp;<span class="op" id="6848972">[</span><span class="op" id="6848973">]</span><span class="builtintype" id="6848974">byte</span><span class="op" id="6848978">(</span><span class="string" id="6848979">&#34;abcdef&#34;</span><span class="op" id="6848987">)</span><span class="op" id="6848988">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6848993">WantWrite</span><span class="op" id="6849002">:</span>&nbsp;<span class="string" id="6849004">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6849026">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849031">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="6849055">+</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849060">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6849098">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849103">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="6849127">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849132">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="6849139">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849144">&#34;abcdef&#34;</span><span class="op" id="6849152">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849157">WantProxy</span><span class="op" id="6849166">:</span>&nbsp;<span class="string" id="6849168">&#34;POST&nbsp;http://example.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6849208">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849213">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="6849237">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849242">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6849280">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849285">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="6849309">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849314">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="6849321">+</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849326">&#34;abcdef&#34;</span><span class="op" id="6849334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6849337">}</span><span class="op" id="6849338">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6849342">//&nbsp;default&nbsp;to&nbsp;HTTP/1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6849366">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849370">Req</span><span class="op" id="6849373">:</span>&nbsp;<span class="ident" id="6849375">Request</span><span class="op" id="6849382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849387">Method</span><span class="op" id="6849393">:</span>&nbsp;<span class="string" id="6849395">&#34;GET&#34;</span><span class="op" id="6849400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849405">URL</span><span class="op" id="6849408">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6849413">mustParseURL</span><span class="op" id="6849425">(</span><span class="string" id="6849426">&#34;/search&#34;</span><span class="op" id="6849435">)</span><span class="op" id="6849436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849441">Host</span><span class="op" id="6849445">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6849449">&#34;www.google.com&#34;</span><span class="op" id="6849465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6849469">}</span><span class="op" id="6849470">,</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849475">WantWrite</span><span class="op" id="6849484">:</span>&nbsp;<span class="string" id="6849486">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6849513">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849518">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="6849545">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849550">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6849588">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6849593">&#34;\r\n&#34;</span><span class="op" id="6849599">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6849602">}</span><span class="op" id="6849603">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6849607">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;0&nbsp;ContentLength&nbsp;and&nbsp;a&nbsp;0&nbsp;byte&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6849661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849665">Req</span><span class="op" id="6849668">:</span>&nbsp;<span class="ident" id="6849670">Request</span><span class="op" id="6849677">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849682">Method</span><span class="op" id="6849688">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6849697">&#34;POST&#34;</span><span class="op" id="6849703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849708">URL</span><span class="op" id="6849711">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6849723">mustParseURL</span><span class="op" id="6849735">(</span><span class="string" id="6849736">&#34;/&#34;</span><span class="op" id="6849739">)</span><span class="op" id="6849740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849745">Host</span><span class="op" id="6849749">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6849760">&#34;example.com&#34;</span><span class="op" id="6849773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849778">ProtoMajor</span><span class="op" id="6849788">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6849793">1</span><span class="op" id="6849794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849799">ProtoMinor</span><span class="op" id="6849809">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6849814">1</span><span class="op" id="6849815">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849820">ContentLength</span><span class="op" id="6849833">:</span>&nbsp;<span class="num" id="6849835">0</span><span class="op" id="6849836">,</span>&nbsp;<span class="comment" id="6849838">//&nbsp;as&nbsp;if&nbsp;unset&nbsp;by&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6849863">}</span><span class="op" id="6849864">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849869">Body</span><span class="op" id="6849873">:</span>&nbsp;<span class="keyword" id="6849875">func</span><span class="op" id="6849879">(</span><span class="op" id="6849880">)</span>&nbsp;<span class="ident" id="6849882">io</span><span class="op" id="6849884">.</span><span class="ident" id="6849885">ReadCloser</span>&nbsp;<span class="op" id="6849896">{</span>&nbsp;<span class="keyword" id="6849898">return</span>&nbsp;<span class="ident" id="6849905">ioutil</span><span class="op" id="6849911">.</span><span class="ident" id="6849912">NopCloser</span><span class="op" id="6849921">(</span><span class="ident" id="6849922">io</span><span class="op" id="6849924">.</span><span class="ident" id="6849925">LimitReader</span><span class="op" id="6849936">(</span><span class="ident" id="6849937">strings</span><span class="op" id="6849944">.</span><span class="ident" id="6849945">NewReader</span><span class="op" id="6849954">(</span><span class="string" id="6849955">&#34;xx&#34;</span><span class="op" id="6849959">)</span><span class="op" id="6849960">,</span>&nbsp;<span class="num" id="6849962">0</span><span class="op" id="6849963">)</span><span class="op" id="6849964">)</span>&nbsp;<span class="op" id="6849966">}</span><span class="op" id="6849967">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6849972">//&nbsp;RFC&nbsp;2616&nbsp;Section&nbsp;14.13&nbsp;says&nbsp;Content-Length&nbsp;should&nbsp;be&nbsp;specified</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6850040">//&nbsp;unless&nbsp;body&nbsp;is&nbsp;prohibited&nbsp;by&nbsp;the&nbsp;request&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6850094">//&nbsp;Also,&nbsp;nginx&nbsp;expects&nbsp;it&nbsp;for&nbsp;POST&nbsp;and&nbsp;PUT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850140">WantWrite</span><span class="op" id="6850149">:</span>&nbsp;<span class="string" id="6850151">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6850173">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6850178">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="6850202">+</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6850207">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6850245">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6850250">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="6850274">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6850279">&#34;\r\n&#34;</span><span class="op" id="6850285">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850290">WantProxy</span><span class="op" id="6850299">:</span>&nbsp;<span class="string" id="6850301">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6850323">+</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6850328">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="6850352">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6850357">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6850395">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6850400">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="6850424">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6850429">&#34;\r\n&#34;</span><span class="op" id="6850435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6850438">}</span><span class="op" id="6850439">,</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6850443">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;0&nbsp;ContentLength&nbsp;and&nbsp;a&nbsp;1&nbsp;byte&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6850497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850501">Req</span><span class="op" id="6850504">:</span>&nbsp;<span class="ident" id="6850506">Request</span><span class="op" id="6850513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850518">Method</span><span class="op" id="6850524">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6850533">&#34;POST&#34;</span><span class="op" id="6850539">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850544">URL</span><span class="op" id="6850547">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6850559">mustParseURL</span><span class="op" id="6850571">(</span><span class="string" id="6850572">&#34;/&#34;</span><span class="op" id="6850575">)</span><span class="op" id="6850576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850581">Host</span><span class="op" id="6850585">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6850596">&#34;example.com&#34;</span><span class="op" id="6850609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850614">ProtoMajor</span><span class="op" id="6850624">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6850629">1</span><span class="op" id="6850630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850635">ProtoMinor</span><span class="op" id="6850645">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6850650">1</span><span class="op" id="6850651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850656">ContentLength</span><span class="op" id="6850669">:</span>&nbsp;<span class="num" id="6850671">0</span><span class="op" id="6850672">,</span>&nbsp;<span class="comment" id="6850674">//&nbsp;as&nbsp;if&nbsp;unset&nbsp;by&nbsp;user</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6850699">}</span><span class="op" id="6850700">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850705">Body</span><span class="op" id="6850709">:</span>&nbsp;<span class="keyword" id="6850711">func</span><span class="op" id="6850715">(</span><span class="op" id="6850716">)</span>&nbsp;<span class="ident" id="6850718">io</span><span class="op" id="6850720">.</span><span class="ident" id="6850721">ReadCloser</span>&nbsp;<span class="op" id="6850732">{</span>&nbsp;<span class="keyword" id="6850734">return</span>&nbsp;<span class="ident" id="6850741">ioutil</span><span class="op" id="6850747">.</span><span class="ident" id="6850748">NopCloser</span><span class="op" id="6850757">(</span><span class="ident" id="6850758">io</span><span class="op" id="6850760">.</span><span class="ident" id="6850761">LimitReader</span><span class="op" id="6850772">(</span><span class="ident" id="6850773">strings</span><span class="op" id="6850780">.</span><span class="ident" id="6850781">NewReader</span><span class="op" id="6850790">(</span><span class="string" id="6850791">&#34;xx&#34;</span><span class="op" id="6850795">)</span><span class="op" id="6850796">,</span>&nbsp;<span class="num" id="6850798">1</span><span class="op" id="6850799">)</span><span class="op" id="6850800">)</span>&nbsp;<span class="op" id="6850802">}</span><span class="op" id="6850803">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850808">WantWrite</span><span class="op" id="6850817">:</span>&nbsp;<span class="string" id="6850819">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6850841">+</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6850846">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="6850870">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6850875">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6850913">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6850918">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6850955">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850960">chunk</span><span class="op" id="6850965">(</span><span class="string" id="6850966">&#34;x&#34;</span><span class="op" id="6850969">)</span>&nbsp;<span class="op" id="6850971">+</span>&nbsp;<span class="ident" id="6850973">chunk</span><span class="op" id="6850978">(</span><span class="string" id="6850979">&#34;&#34;</span><span class="op" id="6850981">)</span><span class="op" id="6850982">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850987">WantProxy</span><span class="op" id="6850996">:</span>&nbsp;<span class="string" id="6850998">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6851020">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6851025">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="6851049">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6851054">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6851092">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6851097">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6851134">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851139">chunk</span><span class="op" id="6851144">(</span><span class="string" id="6851145">&#34;x&#34;</span><span class="op" id="6851148">)</span>&nbsp;<span class="op" id="6851150">+</span>&nbsp;<span class="ident" id="6851152">chunk</span><span class="op" id="6851157">(</span><span class="string" id="6851158">&#34;&#34;</span><span class="op" id="6851160">)</span><span class="op" id="6851161">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851164">}</span><span class="op" id="6851165">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6851169">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;ContentLength&nbsp;of&nbsp;10&nbsp;but&nbsp;a&nbsp;5&nbsp;byte&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851231">Req</span><span class="op" id="6851234">:</span>&nbsp;<span class="ident" id="6851236">Request</span><span class="op" id="6851243">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851248">Method</span><span class="op" id="6851254">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6851263">&#34;POST&#34;</span><span class="op" id="6851269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851274">URL</span><span class="op" id="6851277">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6851289">mustParseURL</span><span class="op" id="6851301">(</span><span class="string" id="6851302">&#34;/&#34;</span><span class="op" id="6851305">)</span><span class="op" id="6851306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851311">Host</span><span class="op" id="6851315">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6851326">&#34;example.com&#34;</span><span class="op" id="6851339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851344">ProtoMajor</span><span class="op" id="6851354">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6851359">1</span><span class="op" id="6851360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851365">ProtoMinor</span><span class="op" id="6851375">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6851380">1</span><span class="op" id="6851381">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851386">ContentLength</span><span class="op" id="6851399">:</span>&nbsp;<span class="num" id="6851401">10</span><span class="op" id="6851403">,</span>&nbsp;<span class="comment" id="6851405">//&nbsp;but&nbsp;we&#39;re&nbsp;going&nbsp;to&nbsp;send&nbsp;only&nbsp;5&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851447">}</span><span class="op" id="6851448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851452">Body</span><span class="op" id="6851456">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6851463">[</span><span class="op" id="6851464">]</span><span class="builtintype" id="6851465">byte</span><span class="op" id="6851469">(</span><span class="string" id="6851470">&#34;12345&#34;</span><span class="op" id="6851477">)</span><span class="op" id="6851478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851482">WantError</span><span class="op" id="6851491">:</span>&nbsp;<span class="ident" id="6851493">errors</span><span class="op" id="6851499">.</span><span class="ident" id="6851500">New</span><span class="op" id="6851503">(</span><span class="string" id="6851504">&#34;http:&nbsp;ContentLength=10&nbsp;with&nbsp;Body&nbsp;length&nbsp;5&#34;</span><span class="op" id="6851547">)</span><span class="op" id="6851548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851551">}</span><span class="op" id="6851552">,</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6851556">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;ContentLength&nbsp;of&nbsp;4&nbsp;but&nbsp;an&nbsp;8&nbsp;byte&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851618">Req</span><span class="op" id="6851621">:</span>&nbsp;<span class="ident" id="6851623">Request</span><span class="op" id="6851630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851635">Method</span><span class="op" id="6851641">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6851650">&#34;POST&#34;</span><span class="op" id="6851656">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851661">URL</span><span class="op" id="6851664">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6851676">mustParseURL</span><span class="op" id="6851688">(</span><span class="string" id="6851689">&#34;/&#34;</span><span class="op" id="6851692">)</span><span class="op" id="6851693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851698">Host</span><span class="op" id="6851702">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6851713">&#34;example.com&#34;</span><span class="op" id="6851726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851731">ProtoMajor</span><span class="op" id="6851741">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6851746">1</span><span class="op" id="6851747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851752">ProtoMinor</span><span class="op" id="6851762">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6851767">1</span><span class="op" id="6851768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851773">ContentLength</span><span class="op" id="6851786">:</span>&nbsp;<span class="num" id="6851788">4</span><span class="op" id="6851789">,</span>&nbsp;<span class="comment" id="6851791">//&nbsp;but&nbsp;we&#39;re&nbsp;going&nbsp;to&nbsp;try&nbsp;to&nbsp;send&nbsp;8&nbsp;bytes</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851835">}</span><span class="op" id="6851836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851840">Body</span><span class="op" id="6851844">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6851851">[</span><span class="op" id="6851852">]</span><span class="builtintype" id="6851853">byte</span><span class="op" id="6851857">(</span><span class="string" id="6851858">&#34;12345678&#34;</span><span class="op" id="6851868">)</span><span class="op" id="6851869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851873">WantError</span><span class="op" id="6851882">:</span>&nbsp;<span class="ident" id="6851884">errors</span><span class="op" id="6851890">.</span><span class="ident" id="6851891">New</span><span class="op" id="6851894">(</span><span class="string" id="6851895">&#34;http:&nbsp;ContentLength=4&nbsp;with&nbsp;Body&nbsp;length&nbsp;8&#34;</span><span class="op" id="6851937">)</span><span class="op" id="6851938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851941">}</span><span class="op" id="6851942">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6851946">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;5&nbsp;ContentLength&nbsp;and&nbsp;nil&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851999">Req</span><span class="op" id="6852002">:</span>&nbsp;<span class="ident" id="6852004">Request</span><span class="op" id="6852011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852016">Method</span><span class="op" id="6852022">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6852031">&#34;POST&#34;</span><span class="op" id="6852037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852042">URL</span><span class="op" id="6852045">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6852057">mustParseURL</span><span class="op" id="6852069">(</span><span class="string" id="6852070">&#34;/&#34;</span><span class="op" id="6852073">)</span><span class="op" id="6852074">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852079">Host</span><span class="op" id="6852083">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6852094">&#34;example.com&#34;</span><span class="op" id="6852107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852112">ProtoMajor</span><span class="op" id="6852122">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6852127">1</span><span class="op" id="6852128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852133">ProtoMinor</span><span class="op" id="6852143">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6852148">1</span><span class="op" id="6852149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852154">ContentLength</span><span class="op" id="6852167">:</span>&nbsp;<span class="num" id="6852169">5</span><span class="op" id="6852170">,</span>&nbsp;<span class="comment" id="6852172">//&nbsp;but&nbsp;we&#39;ll&nbsp;omit&nbsp;the&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6852201">}</span><span class="op" id="6852202">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852206">WantError</span><span class="op" id="6852215">:</span>&nbsp;<span class="ident" id="6852217">errors</span><span class="op" id="6852223">.</span><span class="ident" id="6852224">New</span><span class="op" id="6852227">(</span><span class="string" id="6852228">&#34;http:&nbsp;Request.ContentLength=5&nbsp;with&nbsp;nil&nbsp;Body&#34;</span><span class="op" id="6852273">)</span><span class="op" id="6852274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6852277">}</span><span class="op" id="6852278">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6852282">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;0&nbsp;ContentLength&nbsp;and&nbsp;a&nbsp;body&nbsp;with&nbsp;1&nbsp;byte&nbsp;content&nbsp;and&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6852362">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852366">Req</span><span class="op" id="6852369">:</span>&nbsp;<span class="ident" id="6852371">Request</span><span class="op" id="6852378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852383">Method</span><span class="op" id="6852389">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6852398">&#34;POST&#34;</span><span class="op" id="6852404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852409">URL</span><span class="op" id="6852412">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6852424">mustParseURL</span><span class="op" id="6852436">(</span><span class="string" id="6852437">&#34;/&#34;</span><span class="op" id="6852440">)</span><span class="op" id="6852441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852446">Host</span><span class="op" id="6852450">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6852461">&#34;example.com&#34;</span><span class="op" id="6852474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852479">ProtoMajor</span><span class="op" id="6852489">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6852494">1</span><span class="op" id="6852495">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852500">ProtoMinor</span><span class="op" id="6852510">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6852515">1</span><span class="op" id="6852516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852521">ContentLength</span><span class="op" id="6852534">:</span>&nbsp;<span class="num" id="6852536">0</span><span class="op" id="6852537">,</span>&nbsp;<span class="comment" id="6852539">//&nbsp;as&nbsp;if&nbsp;unset&nbsp;by&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6852564">}</span><span class="op" id="6852565">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852570">Body</span><span class="op" id="6852574">:</span>&nbsp;<span class="keyword" id="6852576">func</span><span class="op" id="6852580">(</span><span class="op" id="6852581">)</span>&nbsp;<span class="ident" id="6852583">io</span><span class="op" id="6852585">.</span><span class="ident" id="6852586">ReadCloser</span>&nbsp;<span class="op" id="6852597">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852602">err</span>&nbsp;<span class="op" id="6852606">:=</span>&nbsp;<span class="ident" id="6852609">errors</span><span class="op" id="6852615">.</span><span class="ident" id="6852616">New</span><span class="op" id="6852619">(</span><span class="string" id="6852620">&#34;Custom&nbsp;reader&nbsp;error&#34;</span><span class="op" id="6852641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852646">errReader</span>&nbsp;<span class="op" id="6852656">:=</span>&nbsp;<span class="op" id="6852659">&amp;</span><span class="ident" id="6852660">errorReader</span><span class="op" id="6852671">{</span><span class="ident" id="6852672">err</span><span class="op" id="6852675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6852680">return</span>&nbsp;<span class="ident" id="6852687">ioutil</span><span class="op" id="6852693">.</span><span class="ident" id="6852694">NopCloser</span><span class="op" id="6852703">(</span><span class="ident" id="6852704">io</span><span class="op" id="6852706">.</span><span class="ident" id="6852707">MultiReader</span><span class="op" id="6852718">(</span><span class="ident" id="6852719">strings</span><span class="op" id="6852726">.</span><span class="ident" id="6852727">NewReader</span><span class="op" id="6852736">(</span><span class="string" id="6852737">&#34;x&#34;</span><span class="op" id="6852740">)</span><span class="op" id="6852741">,</span>&nbsp;<span class="ident" id="6852743">errReader</span><span class="op" id="6852752">)</span><span class="op" id="6852753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6852757">}</span><span class="op" id="6852758">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852763">WantError</span><span class="op" id="6852772">:</span>&nbsp;<span class="ident" id="6852774">errors</span><span class="op" id="6852780">.</span><span class="ident" id="6852781">New</span><span class="op" id="6852784">(</span><span class="string" id="6852785">&#34;Custom&nbsp;reader&nbsp;error&#34;</span><span class="op" id="6852806">)</span><span class="op" id="6852807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6852810">}</span><span class="op" id="6852811">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6852815">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;0&nbsp;ContentLength&nbsp;and&nbsp;a&nbsp;body&nbsp;without&nbsp;content&nbsp;and&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6852891">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852895">Req</span><span class="op" id="6852898">:</span>&nbsp;<span class="ident" id="6852900">Request</span><span class="op" id="6852907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852912">Method</span><span class="op" id="6852918">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6852927">&#34;POST&#34;</span><span class="op" id="6852933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852938">URL</span><span class="op" id="6852941">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6852953">mustParseURL</span><span class="op" id="6852965">(</span><span class="string" id="6852966">&#34;/&#34;</span><span class="op" id="6852969">)</span><span class="op" id="6852970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852975">Host</span><span class="op" id="6852979">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6852990">&#34;example.com&#34;</span><span class="op" id="6853003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853008">ProtoMajor</span><span class="op" id="6853018">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6853023">1</span><span class="op" id="6853024">,</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853029">ProtoMinor</span><span class="op" id="6853039">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6853044">1</span><span class="op" id="6853045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853050">ContentLength</span><span class="op" id="6853063">:</span>&nbsp;<span class="num" id="6853065">0</span><span class="op" id="6853066">,</span>&nbsp;<span class="comment" id="6853068">//&nbsp;as&nbsp;if&nbsp;unset&nbsp;by&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853093">}</span><span class="op" id="6853094">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853099">Body</span><span class="op" id="6853103">:</span>&nbsp;<span class="keyword" id="6853105">func</span><span class="op" id="6853109">(</span><span class="op" id="6853110">)</span>&nbsp;<span class="ident" id="6853112">io</span><span class="op" id="6853114">.</span><span class="ident" id="6853115">ReadCloser</span>&nbsp;<span class="op" id="6853126">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853131">err</span>&nbsp;<span class="op" id="6853135">:=</span>&nbsp;<span class="ident" id="6853138">errors</span><span class="op" id="6853144">.</span><span class="ident" id="6853145">New</span><span class="op" id="6853148">(</span><span class="string" id="6853149">&#34;Custom&nbsp;reader&nbsp;error&#34;</span><span class="op" id="6853170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853175">errReader</span>&nbsp;<span class="op" id="6853185">:=</span>&nbsp;<span class="op" id="6853188">&amp;</span><span class="ident" id="6853189">errorReader</span><span class="op" id="6853200">{</span><span class="ident" id="6853201">err</span><span class="op" id="6853204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6853209">return</span>&nbsp;<span class="ident" id="6853216">ioutil</span><span class="op" id="6853222">.</span><span class="ident" id="6853223">NopCloser</span><span class="op" id="6853232">(</span><span class="ident" id="6853233">errReader</span><span class="op" id="6853242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853246">}</span><span class="op" id="6853247">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853252">WantError</span><span class="op" id="6853261">:</span>&nbsp;<span class="ident" id="6853263">errors</span><span class="op" id="6853269">.</span><span class="ident" id="6853270">New</span><span class="op" id="6853273">(</span><span class="string" id="6853274">&#34;Custom&nbsp;reader&nbsp;error&#34;</span><span class="op" id="6853295">)</span><span class="op" id="6853296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853299">}</span><span class="op" id="6853300">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6853304">//&nbsp;Verify&nbsp;that&nbsp;DumpRequest&nbsp;preserves&nbsp;the&nbsp;HTTP&nbsp;version&nbsp;number,&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;Host,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6853387">//&nbsp;and&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;User-Agent.</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853425">Req</span><span class="op" id="6853428">:</span>&nbsp;<span class="ident" id="6853430">Request</span><span class="op" id="6853437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853442">Method</span><span class="op" id="6853448">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6853454">&#34;GET&#34;</span><span class="op" id="6853459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853464">URL</span><span class="op" id="6853467">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6853476">mustParseURL</span><span class="op" id="6853488">(</span><span class="string" id="6853489">&#34;/foo&#34;</span><span class="op" id="6853495">)</span><span class="op" id="6853496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853501">ProtoMajor</span><span class="op" id="6853511">:</span>&nbsp;<span class="num" id="6853513">1</span><span class="op" id="6853514">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853519">ProtoMinor</span><span class="op" id="6853529">:</span>&nbsp;<span class="num" id="6853531">0</span><span class="op" id="6853532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853537">Header</span><span class="op" id="6853543">:</span>&nbsp;<span class="ident" id="6853545">Header</span><span class="op" id="6853551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6853557">&#34;X-Foo&#34;</span><span class="op" id="6853564">:</span>&nbsp;<span class="op" id="6853566">[</span><span class="op" id="6853567">]</span><span class="builtintype" id="6853568">string</span><span class="op" id="6853574">{</span><span class="string" id="6853575">&#34;X-Bar&#34;</span><span class="op" id="6853582">}</span><span class="op" id="6853583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853588">}</span><span class="op" id="6853589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853593">}</span><span class="op" id="6853594">,</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853599">WantWrite</span><span class="op" id="6853608">:</span>&nbsp;<span class="string" id="6853610">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6853634">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6853639">&#34;Host:&nbsp;\r\n&#34;</span>&nbsp;<span class="op" id="6853652">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6853657">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6853695">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6853700">&#34;X-Foo:&nbsp;X-Bar\r\n\r\n&#34;</span><span class="op" id="6853722">,</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853725">}</span><span class="op" id="6853726">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6853730">//&nbsp;If&nbsp;no&nbsp;Request.Host&nbsp;and&nbsp;no&nbsp;Request.URL.Host,&nbsp;we&nbsp;send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6853786">//&nbsp;an&nbsp;empty&nbsp;Host&nbsp;header,&nbsp;and&nbsp;don&#39;t&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6853826">//&nbsp;Request.Header[&#34;Host&#34;].&nbsp;This&nbsp;is&nbsp;just&nbsp;testing&nbsp;that</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6853880">//&nbsp;we&nbsp;don&#39;t&nbsp;change&nbsp;Go&nbsp;1.0&nbsp;behavior.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853921">Req</span><span class="op" id="6853924">:</span>&nbsp;<span class="ident" id="6853926">Request</span><span class="op" id="6853933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853938">Method</span><span class="op" id="6853944">:</span>&nbsp;<span class="string" id="6853946">&#34;GET&#34;</span><span class="op" id="6853951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853956">Host</span><span class="op" id="6853960">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6853964">&#34;&#34;</span><span class="op" id="6853966">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853971">URL</span><span class="op" id="6853974">:</span>&nbsp;<span class="op" id="6853976">&amp;</span><span class="ident" id="6853977">url</span><span class="op" id="6853980">.</span><span class="ident" id="6853981">URL</span><span class="op" id="6853984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853990">Scheme</span><span class="op" id="6853996">:</span>&nbsp;<span class="string" id="6853998">&#34;http&#34;</span><span class="op" id="6854004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854010">Host</span><span class="op" id="6854014">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6854018">&#34;&#34;</span><span class="op" id="6854020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854026">Path</span><span class="op" id="6854030">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6854034">&#34;/search&#34;</span><span class="op" id="6854043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854048">}</span><span class="op" id="6854049">,</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854054">ProtoMajor</span><span class="op" id="6854064">:</span>&nbsp;<span class="num" id="6854066">1</span><span class="op" id="6854067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854072">ProtoMinor</span><span class="op" id="6854082">:</span>&nbsp;<span class="num" id="6854084">1</span><span class="op" id="6854085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854090">Header</span><span class="op" id="6854096">:</span>&nbsp;<span class="ident" id="6854098">Header</span><span class="op" id="6854104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6854110">&#34;Host&#34;</span><span class="op" id="6854116">:</span>&nbsp;<span class="op" id="6854118">[</span><span class="op" id="6854119">]</span><span class="builtintype" id="6854120">string</span><span class="op" id="6854126">{</span><span class="string" id="6854127">&#34;bad.example.com&#34;</span><span class="op" id="6854144">}</span><span class="op" id="6854145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854150">}</span><span class="op" id="6854151">,</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854155">}</span><span class="op" id="6854156">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854161">WantWrite</span><span class="op" id="6854170">:</span>&nbsp;<span class="string" id="6854172">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6854199">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6854204">&#34;Host:&nbsp;\r\n&#34;</span>&nbsp;<span class="op" id="6854217">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6854222">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n\r\n&#34;</span><span class="op" id="6854263">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854266">}</span><span class="op" id="6854267">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6854271">//&nbsp;Opaque&nbsp;test&nbsp;#1&nbsp;from&nbsp;golang.org/issue/4860</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854321">Req</span><span class="op" id="6854324">:</span>&nbsp;<span class="ident" id="6854326">Request</span><span class="op" id="6854333">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854338">Method</span><span class="op" id="6854344">:</span>&nbsp;<span class="string" id="6854346">&#34;GET&#34;</span><span class="op" id="6854351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854356">URL</span><span class="op" id="6854359">:</span>&nbsp;<span class="op" id="6854361">&amp;</span><span class="ident" id="6854362">url</span><span class="op" id="6854365">.</span><span class="ident" id="6854366">URL</span><span class="op" id="6854369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854375">Scheme</span><span class="op" id="6854381">:</span>&nbsp;<span class="string" id="6854383">&#34;http&#34;</span><span class="op" id="6854389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854395">Host</span><span class="op" id="6854399">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6854403">&#34;www.google.com&#34;</span><span class="op" id="6854419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854425">Opaque</span><span class="op" id="6854431">:</span>&nbsp;<span class="string" id="6854433">&#34;/%2F/%2F/&#34;</span><span class="op" id="6854444">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854449">}</span><span class="op" id="6854450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854455">ProtoMajor</span><span class="op" id="6854465">:</span>&nbsp;<span class="num" id="6854467">1</span><span class="op" id="6854468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854473">ProtoMinor</span><span class="op" id="6854483">:</span>&nbsp;<span class="num" id="6854485">1</span><span class="op" id="6854486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854491">Header</span><span class="op" id="6854497">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6854503">Header</span><span class="op" id="6854509">{</span><span class="op" id="6854510">}</span><span class="op" id="6854511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854515">}</span><span class="op" id="6854516">,</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854521">WantWrite</span><span class="op" id="6854530">:</span>&nbsp;<span class="string" id="6854532">&#34;GET&nbsp;/%2F/%2F/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6854561">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6854566">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="6854593">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6854598">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n\r\n&#34;</span><span class="op" id="6854639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854642">}</span><span class="op" id="6854643">,</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6854647">//&nbsp;Opaque&nbsp;test&nbsp;#2&nbsp;from&nbsp;golang.org/issue/4860</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854697">Req</span><span class="op" id="6854700">:</span>&nbsp;<span class="ident" id="6854702">Request</span><span class="op" id="6854709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854714">Method</span><span class="op" id="6854720">:</span>&nbsp;<span class="string" id="6854722">&#34;GET&#34;</span><span class="op" id="6854727">,</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854732">URL</span><span class="op" id="6854735">:</span>&nbsp;<span class="op" id="6854737">&amp;</span><span class="ident" id="6854738">url</span><span class="op" id="6854741">.</span><span class="ident" id="6854742">URL</span><span class="op" id="6854745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854751">Scheme</span><span class="op" id="6854757">:</span>&nbsp;<span class="string" id="6854759">&#34;http&#34;</span><span class="op" id="6854765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854771">Host</span><span class="op" id="6854775">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6854779">&#34;x.google.com&#34;</span><span class="op" id="6854793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854799">Opaque</span><span class="op" id="6854805">:</span>&nbsp;<span class="string" id="6854807">&#34;//y.google.com/%2F/%2F/&#34;</span><span class="op" id="6854832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854837">}</span><span class="op" id="6854838">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854843">ProtoMajor</span><span class="op" id="6854853">:</span>&nbsp;<span class="num" id="6854855">1</span><span class="op" id="6854856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854861">ProtoMinor</span><span class="op" id="6854871">:</span>&nbsp;<span class="num" id="6854873">1</span><span class="op" id="6854874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854879">Header</span><span class="op" id="6854885">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6854891">Header</span><span class="op" id="6854897">{</span><span class="op" id="6854898">}</span><span class="op" id="6854899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854903">}</span><span class="op" id="6854904">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854909">WantWrite</span><span class="op" id="6854918">:</span>&nbsp;<span class="string" id="6854920">&#34;GET&nbsp;http://y.google.com/%2F/%2F/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6854968">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6854973">&#34;Host:&nbsp;x.google.com\r\n&#34;</span>&nbsp;<span class="op" id="6854998">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6855003">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n\r\n&#34;</span><span class="op" id="6855044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855047">}</span><span class="op" id="6855048">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6855052">//&nbsp;Testing&nbsp;custom&nbsp;case&nbsp;in&nbsp;header&nbsp;keys.&nbsp;Issue&nbsp;5022.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855108">Req</span><span class="op" id="6855111">:</span>&nbsp;<span class="ident" id="6855113">Request</span><span class="op" id="6855120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855125">Method</span><span class="op" id="6855131">:</span>&nbsp;<span class="string" id="6855133">&#34;GET&#34;</span><span class="op" id="6855138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855143">URL</span><span class="op" id="6855146">:</span>&nbsp;<span class="op" id="6855148">&amp;</span><span class="ident" id="6855149">url</span><span class="op" id="6855152">.</span><span class="ident" id="6855153">URL</span><span class="op" id="6855156">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855162">Scheme</span><span class="op" id="6855168">:</span>&nbsp;<span class="string" id="6855170">&#34;http&#34;</span><span class="op" id="6855176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855182">Host</span><span class="op" id="6855186">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6855190">&#34;www.google.com&#34;</span><span class="op" id="6855206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855212">Path</span><span class="op" id="6855216">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6855220">&#34;/&#34;</span><span class="op" id="6855223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855228">}</span><span class="op" id="6855229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855234">Proto</span><span class="op" id="6855239">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6855246">&#34;HTTP/1.1&#34;</span><span class="op" id="6855256">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855261">ProtoMajor</span><span class="op" id="6855271">:</span>&nbsp;<span class="num" id="6855273">1</span><span class="op" id="6855274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855279">ProtoMinor</span><span class="op" id="6855289">:</span>&nbsp;<span class="num" id="6855291">1</span><span class="op" id="6855292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855297">Header</span><span class="op" id="6855303">:</span>&nbsp;<span class="ident" id="6855305">Header</span><span class="op" id="6855311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6855317">&#34;ALL-CAPS&#34;</span><span class="op" id="6855327">:</span>&nbsp;<span class="op" id="6855329">{</span><span class="string" id="6855330">&#34;x&#34;</span><span class="op" id="6855333">}</span><span class="op" id="6855334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855339">}</span><span class="op" id="6855340">,</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855344">}</span><span class="op" id="6855345">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855350">WantWrite</span><span class="op" id="6855359">:</span>&nbsp;<span class="string" id="6855361">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6855382">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6855387">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="6855414">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6855419">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6855457">+</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6855462">&#34;ALL-CAPS:&nbsp;x\r\n&#34;</span>&nbsp;<span class="op" id="6855480">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6855485">&#34;\r\n&#34;</span><span class="op" id="6855491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855494">}</span><span class="op" id="6855495">,</span><br>
<span class="lineno"></span><span class="op" id="6855497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span><span class="keyword" id="6855500">func</span>&nbsp;<span class="ident" id="6855505">TestRequestWrite</span><span class="op" id="6855521">(</span><span class="ident" id="6855522">t</span>&nbsp;<span class="op" id="6855524">*</span><span class="ident" id="6855525">testing</span><span class="op" id="6855532">.</span><span class="ident" id="6855533">T</span><span class="op" id="6855534">)</span>&nbsp;<span class="op" id="6855536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855539">for</span>&nbsp;<span class="ident" id="6855543">i</span>&nbsp;<span class="op" id="6855545">:=</span>&nbsp;<span class="keyword" id="6855548">range</span>&nbsp;<span class="ident" id="6855554">reqWriteTests</span>&nbsp;<span class="op" id="6855568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855572">tt</span>&nbsp;<span class="op" id="6855575">:=</span>&nbsp;<span class="op" id="6855578">&amp;</span><span class="ident" id="6855579">reqWriteTests</span><span class="op" id="6855592">[</span><span class="ident" id="6855593">i</span><span class="op" id="6855594">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855599">setBody</span>&nbsp;<span class="op" id="6855607">:=</span>&nbsp;<span class="keyword" id="6855610">func</span><span class="op" id="6855614">(</span><span class="op" id="6855615">)</span>&nbsp;<span class="op" id="6855617">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855622">if</span>&nbsp;<span class="ident" id="6855625">tt</span><span class="op" id="6855627">.</span><span class="ident" id="6855628">Body</span>&nbsp;<span class="op" id="6855633">==</span>&nbsp;<span class="ident" id="6855636">nil</span>&nbsp;<span class="op" id="6855640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855646">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855661">switch</span>&nbsp;<span class="ident" id="6855668">b</span>&nbsp;<span class="op" id="6855670">:=</span>&nbsp;<span class="ident" id="6855673">tt</span><span class="op" id="6855675">.</span><span class="ident" id="6855676">Body</span><span class="op" id="6855680">.</span><span class="op" id="6855681">(</span><span class="keyword" id="6855682">type</span><span class="op" id="6855686">)</span>&nbsp;<span class="op" id="6855688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855693">case</span>&nbsp;<span class="op" id="6855698">[</span><span class="op" id="6855699">]</span><span class="builtintype" id="6855700">byte</span><span class="op" id="6855704">:</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855710">tt</span><span class="op" id="6855712">.</span><span class="ident" id="6855713">Req</span><span class="op" id="6855716">.</span><span class="ident" id="6855717">Body</span>&nbsp;<span class="op" id="6855722">=</span>&nbsp;<span class="ident" id="6855724">ioutil</span><span class="op" id="6855730">.</span><span class="ident" id="6855731">NopCloser</span><span class="op" id="6855740">(</span><span class="ident" id="6855741">bytes</span><span class="op" id="6855746">.</span><span class="ident" id="6855747">NewReader</span><span class="op" id="6855756">(</span><span class="ident" id="6855757">b</span><span class="op" id="6855758">)</span><span class="op" id="6855759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855764">case</span>&nbsp;<span class="keyword" id="6855769">func</span><span class="op" id="6855773">(</span><span class="op" id="6855774">)</span>&nbsp;<span class="ident" id="6855776">io</span><span class="op" id="6855778">.</span><span class="ident" id="6855779">ReadCloser</span><span class="op" id="6855789">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855795">tt</span><span class="op" id="6855797">.</span><span class="ident" id="6855798">Req</span><span class="op" id="6855801">.</span><span class="ident" id="6855802">Body</span>&nbsp;<span class="op" id="6855807">=</span>&nbsp;<span class="ident" id="6855809">b</span><span class="op" id="6855810">(</span><span class="op" id="6855811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855820">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855824">setBody</span><span class="op" id="6855831">(</span><span class="op" id="6855832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855836">if</span>&nbsp;<span class="ident" id="6855839">tt</span><span class="op" id="6855841">.</span><span class="ident" id="6855842">Req</span><span class="op" id="6855845">.</span><span class="ident" id="6855846">Header</span>&nbsp;<span class="op" id="6855853">==</span>&nbsp;<span class="ident" id="6855856">nil</span>&nbsp;<span class="op" id="6855860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855865">tt</span><span class="op" id="6855867">.</span><span class="ident" id="6855868">Req</span><span class="op" id="6855871">.</span><span class="ident" id="6855872">Header</span>&nbsp;<span class="op" id="6855879">=</span>&nbsp;<span class="builtinfunc" id="6855881">make</span><span class="op" id="6855885">(</span><span class="ident" id="6855886">Header</span><span class="op" id="6855892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855901">var</span>&nbsp;<span class="ident" id="6855905">braw</span>&nbsp;<span class="ident" id="6855910">bytes</span><span class="op" id="6855915">.</span><span class="ident" id="6855916">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855925">err</span>&nbsp;<span class="op" id="6855929">:=</span>&nbsp;<span class="ident" id="6855932">tt</span><span class="op" id="6855934">.</span><span class="ident" id="6855935">Req</span><span class="op" id="6855938">.</span><span class="ident" id="6855939">Write</span><span class="op" id="6855944">(</span><span class="op" id="6855945">&amp;</span><span class="ident" id="6855946">braw</span><span class="op" id="6855950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855954">if</span>&nbsp;<span class="ident" id="6855957">g</span><span class="op" id="6855958">,</span>&nbsp;<span class="ident" id="6855960">e</span>&nbsp;<span class="op" id="6855962">:=</span>&nbsp;<span class="ident" id="6855965">fmt</span><span class="op" id="6855968">.</span><span class="ident" id="6855969">Sprintf</span><span class="op" id="6855976">(</span><span class="string" id="6855977">&#34;%v&#34;</span><span class="op" id="6855981">,</span>&nbsp;<span class="ident" id="6855983">err</span><span class="op" id="6855986">)</span><span class="op" id="6855987">,</span>&nbsp;<span class="ident" id="6855989">fmt</span><span class="op" id="6855992">.</span><span class="ident" id="6855993">Sprintf</span><span class="op" id="6856000">(</span><span class="string" id="6856001">&#34;%v&#34;</span><span class="op" id="6856005">,</span>&nbsp;<span class="ident" id="6856007">tt</span><span class="op" id="6856009">.</span><span class="ident" id="6856010">WantError</span><span class="op" id="6856019">)</span><span class="op" id="6856020">;</span>&nbsp;<span class="ident" id="6856022">g</span>&nbsp;<span class="op" id="6856024">!=</span>&nbsp;<span class="ident" id="6856027">e</span>&nbsp;<span class="op" id="6856029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856034">t</span><span class="op" id="6856035">.</span><span class="ident" id="6856036">Errorf</span><span class="op" id="6856042">(</span><span class="string" id="6856043">&#34;writing&nbsp;#%d,&nbsp;err&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6856075">,</span>&nbsp;<span class="ident" id="6856077">i</span><span class="op" id="6856078">,</span>&nbsp;<span class="ident" id="6856080">g</span><span class="op" id="6856081">,</span>&nbsp;<span class="ident" id="6856083">e</span><span class="op" id="6856084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856089">continue</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856104">if</span>&nbsp;<span class="ident" id="6856107">err</span>&nbsp;<span class="op" id="6856111">!=</span>&nbsp;<span class="ident" id="6856114">nil</span>&nbsp;<span class="op" id="6856118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856123">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856139">if</span>&nbsp;<span class="ident" id="6856142">tt</span><span class="op" id="6856144">.</span><span class="ident" id="6856145">WantWrite</span>&nbsp;<span class="op" id="6856155">!=</span>&nbsp;<span class="string" id="6856158">&#34;&#34;</span>&nbsp;<span class="op" id="6856161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856166">sraw</span>&nbsp;<span class="op" id="6856171">:=</span>&nbsp;<span class="ident" id="6856174">braw</span><span class="op" id="6856178">.</span><span class="ident" id="6856179">String</span><span class="op" id="6856185">(</span><span class="op" id="6856186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856191">if</span>&nbsp;<span class="ident" id="6856194">sraw</span>&nbsp;<span class="op" id="6856199">!=</span>&nbsp;<span class="ident" id="6856202">tt</span><span class="op" id="6856204">.</span><span class="ident" id="6856205">WantWrite</span>&nbsp;<span class="op" id="6856215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856221">t</span><span class="op" id="6856222">.</span><span class="ident" id="6856223">Errorf</span><span class="op" id="6856229">(</span><span class="string" id="6856230">&#34;Test&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="6856267">,</span>&nbsp;<span class="ident" id="6856269">i</span><span class="op" id="6856270">,</span>&nbsp;<span class="ident" id="6856272">tt</span><span class="op" id="6856274">.</span><span class="ident" id="6856275">WantWrite</span><span class="op" id="6856284">,</span>&nbsp;<span class="ident" id="6856286">sraw</span><span class="op" id="6856290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856296">continue</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856317">if</span>&nbsp;<span class="ident" id="6856320">tt</span><span class="op" id="6856322">.</span><span class="ident" id="6856323">WantProxy</span>&nbsp;<span class="op" id="6856333">!=</span>&nbsp;<span class="string" id="6856336">&#34;&#34;</span>&nbsp;<span class="op" id="6856339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856344">setBody</span><span class="op" id="6856351">(</span><span class="op" id="6856352">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856357">var</span>&nbsp;<span class="ident" id="6856361">praw</span>&nbsp;<span class="ident" id="6856366">bytes</span><span class="op" id="6856371">.</span><span class="ident" id="6856372">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856382">err</span>&nbsp;<span class="op" id="6856386">=</span>&nbsp;<span class="ident" id="6856388">tt</span><span class="op" id="6856390">.</span><span class="ident" id="6856391">Req</span><span class="op" id="6856394">.</span><span class="ident" id="6856395">WriteProxy</span><span class="op" id="6856405">(</span><span class="op" id="6856406">&amp;</span><span class="ident" id="6856407">praw</span><span class="op" id="6856411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856416">if</span>&nbsp;<span class="ident" id="6856419">err</span>&nbsp;<span class="op" id="6856423">!=</span>&nbsp;<span class="ident" id="6856426">nil</span>&nbsp;<span class="op" id="6856430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856436">t</span><span class="op" id="6856437">.</span><span class="ident" id="6856438">Errorf</span><span class="op" id="6856444">(</span><span class="string" id="6856445">&#34;WriteProxy&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="6856465">,</span>&nbsp;<span class="ident" id="6856467">i</span><span class="op" id="6856468">,</span>&nbsp;<span class="ident" id="6856470">err</span><span class="op" id="6856473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856479">continue</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856496">sraw</span>&nbsp;<span class="op" id="6856501">:=</span>&nbsp;<span class="ident" id="6856504">praw</span><span class="op" id="6856508">.</span><span class="ident" id="6856509">String</span><span class="op" id="6856515">(</span><span class="op" id="6856516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856521">if</span>&nbsp;<span class="ident" id="6856524">sraw</span>&nbsp;<span class="op" id="6856529">!=</span>&nbsp;<span class="ident" id="6856532">tt</span><span class="op" id="6856534">.</span><span class="ident" id="6856535">WantProxy</span>&nbsp;<span class="op" id="6856545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856551">t</span><span class="op" id="6856552">.</span><span class="ident" id="6856553">Errorf</span><span class="op" id="6856559">(</span><span class="string" id="6856560">&#34;Test&nbsp;Proxy&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="6856603">,</span>&nbsp;<span class="ident" id="6856605">i</span><span class="op" id="6856606">,</span>&nbsp;<span class="ident" id="6856608">tt</span><span class="op" id="6856610">.</span><span class="ident" id="6856611">WantProxy</span><span class="op" id="6856620">,</span>&nbsp;<span class="ident" id="6856622">sraw</span><span class="op" id="6856626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856632">continue</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856651">}</span><br>
<span class="lineno"></span><span class="op" id="6856653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="keyword" id="6856656">type</span>&nbsp;<span class="ident" id="6856661">closeChecker</span>&nbsp;<span class="keyword" id="6856674">struct</span>&nbsp;<span class="op" id="6856681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856684">io</span><span class="op" id="6856686">.</span><span class="ident" id="6856687">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856695">closed</span>&nbsp;<span class="builtintype" id="6856702">bool</span><br>
<span class="lineno"></span><span class="op" id="6856707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span><span class="keyword" id="6856710">func</span>&nbsp;<span class="op" id="6856715">(</span><span class="ident" id="6856716">rc</span>&nbsp;<span class="op" id="6856719">*</span><span class="ident" id="6856720">closeChecker</span><span class="op" id="6856732">)</span>&nbsp;<span class="ident" id="6856734">Close</span><span class="op" id="6856739">(</span><span class="op" id="6856740">)</span>&nbsp;<span class="builtintype" id="6856742">error</span>&nbsp;<span class="op" id="6856748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856751">rc</span><span class="op" id="6856753">.</span><span class="ident" id="6856754">closed</span>&nbsp;<span class="op" id="6856761">=</span>&nbsp;<span class="builtintype" id="6856763">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856769">return</span>&nbsp;<span class="ident" id="6856776">nil</span><br>
<span class="lineno"></span><span class="op" id="6856780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="comment" id="6856783">//&nbsp;TestRequestWriteClosesBody&nbsp;tests&nbsp;that&nbsp;Request.Write&nbsp;does&nbsp;close&nbsp;its&nbsp;request.Body.</span><br>
<span class="lineno"></span><span class="comment" id="6856867">//&nbsp;It&nbsp;also&nbsp;indirectly&nbsp;tests&nbsp;NewRequest&nbsp;and&nbsp;that&nbsp;it&nbsp;doesn&#39;t&nbsp;wrap&nbsp;an&nbsp;existing&nbsp;Closer</span><br>
<span class="lineno"></span><span class="comment" id="6856950">//&nbsp;inside&nbsp;a&nbsp;NopCloser,&nbsp;and&nbsp;that&nbsp;it&nbsp;serializes&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno"></span><span class="keyword" id="6857010">func</span>&nbsp;<span class="ident" id="6857015">TestRequestWriteClosesBody</span><span class="op" id="6857041">(</span><span class="ident" id="6857042">t</span>&nbsp;<span class="op" id="6857044">*</span><span class="ident" id="6857045">testing</span><span class="op" id="6857052">.</span><span class="ident" id="6857053">T</span><span class="op" id="6857054">)</span>&nbsp;<span class="op" id="6857056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857059">rc</span>&nbsp;<span class="op" id="6857062">:=</span>&nbsp;<span class="op" id="6857065">&amp;</span><span class="ident" id="6857066">closeChecker</span><span class="op" id="6857078">{</span><span class="ident" id="6857079">Reader</span><span class="op" id="6857085">:</span>&nbsp;<span class="ident" id="6857087">strings</span><span class="op" id="6857094">.</span><span class="ident" id="6857095">NewReader</span><span class="op" id="6857104">(</span><span class="string" id="6857105">&#34;my&nbsp;body&#34;</span><span class="op" id="6857114">)</span><span class="op" id="6857115">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857118">req</span><span class="op" id="6857121">,</span>&nbsp;<span class="ident" id="6857123">_</span>&nbsp;<span class="op" id="6857125">:=</span>&nbsp;<span class="ident" id="6857128">NewRequest</span><span class="op" id="6857138">(</span><span class="string" id="6857139">&#34;POST&#34;</span><span class="op" id="6857145">,</span>&nbsp;<span class="string" id="6857147">&#34;http://foo.com/&#34;</span><span class="op" id="6857164">,</span>&nbsp;<span class="ident" id="6857166">rc</span><span class="op" id="6857168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857171">if</span>&nbsp;<span class="ident" id="6857174">req</span><span class="op" id="6857177">.</span><span class="ident" id="6857178">ContentLength</span>&nbsp;<span class="op" id="6857192">!=</span>&nbsp;<span class="num" id="6857195">0</span>&nbsp;<span class="op" id="6857197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857201">t</span><span class="op" id="6857202">.</span><span class="ident" id="6857203">Errorf</span><span class="op" id="6857209">(</span><span class="string" id="6857210">&#34;got&nbsp;req.ContentLength&nbsp;%d,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6857244">,</span>&nbsp;<span class="ident" id="6857246">req</span><span class="op" id="6857249">.</span><span class="ident" id="6857250">ContentLength</span><span class="op" id="6857263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857269">buf</span>&nbsp;<span class="op" id="6857273">:=</span>&nbsp;<span class="builtinfunc" id="6857276">new</span><span class="op" id="6857279">(</span><span class="ident" id="6857280">bytes</span><span class="op" id="6857285">.</span><span class="ident" id="6857286">Buffer</span><span class="op" id="6857292">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857295">req</span><span class="op" id="6857298">.</span><span class="ident" id="6857299">Write</span><span class="op" id="6857304">(</span><span class="ident" id="6857305">buf</span><span class="op" id="6857308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857311">if</span>&nbsp;<span class="op" id="6857314">!</span><span class="ident" id="6857315">rc</span><span class="op" id="6857317">.</span><span class="ident" id="6857318">closed</span>&nbsp;<span class="op" id="6857325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857329">t</span><span class="op" id="6857330">.</span><span class="ident" id="6857331">Error</span><span class="op" id="6857336">(</span><span class="string" id="6857337">&#34;body&nbsp;not&nbsp;closed&nbsp;after&nbsp;write&#34;</span><span class="op" id="6857366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857372">expected</span>&nbsp;<span class="op" id="6857381">:=</span>&nbsp;<span class="string" id="6857384">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6857406">+</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6857410">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="6857430">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6857434">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6857472">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6857476">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6857513">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6857517">//&nbsp;TODO:&nbsp;currently&nbsp;we&nbsp;don&#39;t&nbsp;buffer&nbsp;before&nbsp;chunking,&nbsp;so&nbsp;we&nbsp;get&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6857583">//&nbsp;single&nbsp;&#34;m&#34;&nbsp;chunk&nbsp;before&nbsp;the&nbsp;other&nbsp;chunks,&nbsp;as&nbsp;this&nbsp;was&nbsp;the&nbsp;1-byte</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6857653">//&nbsp;read&nbsp;from&nbsp;our&nbsp;MultiReader&nbsp;where&nbsp;we&nbsp;stiched&nbsp;the&nbsp;Body&nbsp;back&nbsp;together</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6857724">//&nbsp;after&nbsp;sniffing&nbsp;whether&nbsp;the&nbsp;Body&nbsp;was&nbsp;0&nbsp;bytes&nbsp;or&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857781">chunk</span><span class="op" id="6857786">(</span><span class="string" id="6857787">&#34;m&#34;</span><span class="op" id="6857790">)</span>&nbsp;<span class="op" id="6857792">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857796">chunk</span><span class="op" id="6857801">(</span><span class="string" id="6857802">&#34;y&nbsp;body&#34;</span><span class="op" id="6857810">)</span>&nbsp;<span class="op" id="6857812">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857816">chunk</span><span class="op" id="6857821">(</span><span class="string" id="6857822">&#34;&#34;</span><span class="op" id="6857824">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857827">if</span>&nbsp;<span class="ident" id="6857830">buf</span><span class="op" id="6857833">.</span><span class="ident" id="6857834">String</span><span class="op" id="6857840">(</span><span class="op" id="6857841">)</span>&nbsp;<span class="op" id="6857843">!=</span>&nbsp;<span class="ident" id="6857846">expected</span>&nbsp;<span class="op" id="6857855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857859">t</span><span class="op" id="6857860">.</span><span class="ident" id="6857861">Errorf</span><span class="op" id="6857867">(</span><span class="string" id="6857868">&#34;write:\n&nbsp;got:&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="6857896">,</span>&nbsp;<span class="ident" id="6857898">buf</span><span class="op" id="6857901">.</span><span class="ident" id="6857902">String</span><span class="op" id="6857908">(</span><span class="op" id="6857909">)</span><span class="op" id="6857910">,</span>&nbsp;<span class="ident" id="6857912">expected</span><span class="op" id="6857920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857923">}</span><br>
<span class="lineno"></span><span class="op" id="6857925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="6857928">func</span>&nbsp;<span class="ident" id="6857933">chunk</span><span class="op" id="6857938">(</span><span class="ident" id="6857939">s</span>&nbsp;<span class="builtintype" id="6857941">string</span><span class="op" id="6857947">)</span>&nbsp;<span class="builtintype" id="6857949">string</span>&nbsp;<span class="op" id="6857956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857959">return</span>&nbsp;<span class="ident" id="6857966">fmt</span><span class="op" id="6857969">.</span><span class="ident" id="6857970">Sprintf</span><span class="op" id="6857977">(</span><span class="string" id="6857978">&#34;%x\r\n%s\r\n&#34;</span><span class="op" id="6857992">,</span>&nbsp;<span class="builtinfunc" id="6857994">len</span><span class="op" id="6857997">(</span><span class="ident" id="6857998">s</span><span class="op" id="6857999">)</span><span class="op" id="6858000">,</span>&nbsp;<span class="ident" id="6858002">s</span><span class="op" id="6858003">)</span><br>
<span class="lineno"></span><span class="op" id="6858005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6858008">func</span>&nbsp;<span class="ident" id="6858013">mustParseURL</span><span class="op" id="6858025">(</span><span class="ident" id="6858026">s</span>&nbsp;<span class="builtintype" id="6858028">string</span><span class="op" id="6858034">)</span>&nbsp;<span class="op" id="6858036">*</span><span class="ident" id="6858037">url</span><span class="op" id="6858040">.</span><span class="ident" id="6858041">URL</span>&nbsp;<span class="op" id="6858045">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858048">u</span><span class="op" id="6858049">,</span>&nbsp;<span class="ident" id="6858051">err</span>&nbsp;<span class="op" id="6858055">:=</span>&nbsp;<span class="ident" id="6858058">url</span><span class="op" id="6858061">.</span><span class="ident" id="6858062">Parse</span><span class="op" id="6858067">(</span><span class="ident" id="6858068">s</span><span class="op" id="6858069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858072">if</span>&nbsp;<span class="ident" id="6858075">err</span>&nbsp;<span class="op" id="6858079">!=</span>&nbsp;<span class="ident" id="6858082">nil</span>&nbsp;<span class="op" id="6858086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6858090">panic</span><span class="op" id="6858095">(</span><span class="ident" id="6858096">fmt</span><span class="op" id="6858099">.</span><span class="ident" id="6858100">Sprintf</span><span class="op" id="6858107">(</span><span class="string" id="6858108">&#34;Error&nbsp;parsing&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="6858134">,</span>&nbsp;<span class="ident" id="6858136">s</span><span class="op" id="6858137">,</span>&nbsp;<span class="ident" id="6858139">err</span><span class="op" id="6858142">)</span><span class="op" id="6858143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858149">return</span>&nbsp;<span class="ident" id="6858156">u</span><br>
<span class="lineno">565</span><span class="op" id="6858158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6858161">type</span>&nbsp;<span class="ident" id="6858166">writerFunc</span>&nbsp;<span class="keyword" id="6858177">func</span><span class="op" id="6858181">(</span><span class="op" id="6858182">[</span><span class="op" id="6858183">]</span><span class="builtintype" id="6858184">byte</span><span class="op" id="6858188">)</span>&nbsp;<span class="op" id="6858190">(</span><span class="builtintype" id="6858191">int</span><span class="op" id="6858194">,</span>&nbsp;<span class="builtintype" id="6858196">error</span><span class="op" id="6858201">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6858204">func</span>&nbsp;<span class="op" id="6858209">(</span><span class="ident" id="6858210">f</span>&nbsp;<span class="ident" id="6858212">writerFunc</span><span class="op" id="6858222">)</span>&nbsp;<span class="ident" id="6858224">Write</span><span class="op" id="6858229">(</span><span class="ident" id="6858230">p</span>&nbsp;<span class="op" id="6858232">[</span><span class="op" id="6858233">]</span><span class="builtintype" id="6858234">byte</span><span class="op" id="6858238">)</span>&nbsp;<span class="op" id="6858240">(</span><span class="builtintype" id="6858241">int</span><span class="op" id="6858244">,</span>&nbsp;<span class="builtintype" id="6858246">error</span><span class="op" id="6858251">)</span>&nbsp;<span class="op" id="6858253">{</span>&nbsp;<span class="keyword" id="6858255">return</span>&nbsp;<span class="ident" id="6858262">f</span><span class="op" id="6858263">(</span><span class="ident" id="6858264">p</span><span class="op" id="6858265">)</span>&nbsp;<span class="op" id="6858267">}</span><br>
<span class="lineno">570</span><br>
<span class="lineno"></span><span class="comment" id="6858270">//&nbsp;TestRequestWriteError&nbsp;tests&nbsp;the&nbsp;Write&nbsp;err&nbsp;!=&nbsp;nil&nbsp;checks&nbsp;in&nbsp;(*Request).write.</span><br>
<span class="lineno"></span><span class="keyword" id="6858350">func</span>&nbsp;<span class="ident" id="6858355">TestRequestWriteError</span><span class="op" id="6858376">(</span><span class="ident" id="6858377">t</span>&nbsp;<span class="op" id="6858379">*</span><span class="ident" id="6858380">testing</span><span class="op" id="6858387">.</span><span class="ident" id="6858388">T</span><span class="op" id="6858389">)</span>&nbsp;<span class="op" id="6858391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858394">failAfter</span><span class="op" id="6858403">,</span>&nbsp;<span class="ident" id="6858405">writeCount</span>&nbsp;<span class="op" id="6858416">:=</span>&nbsp;<span class="num" id="6858419">0</span><span class="op" id="6858420">,</span>&nbsp;<span class="num" id="6858422">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858425">errFail</span>&nbsp;<span class="op" id="6858433">:=</span>&nbsp;<span class="ident" id="6858436">errors</span><span class="op" id="6858442">.</span><span class="ident" id="6858443">New</span><span class="op" id="6858446">(</span><span class="string" id="6858447">&#34;fake&nbsp;write&nbsp;failure&#34;</span><span class="op" id="6858467">)</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6858471">//&nbsp;w&nbsp;is&nbsp;the&nbsp;buffered&nbsp;io.Writer&nbsp;to&nbsp;write&nbsp;the&nbsp;request&nbsp;to.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6858532">//&nbsp;fails&nbsp;exactly&nbsp;once&nbsp;on&nbsp;its&nbsp;Nth&nbsp;Write&nbsp;call,&nbsp;as&nbsp;controlled&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6858595">//&nbsp;failAfter.&nbsp;It&nbsp;also&nbsp;tracks&nbsp;the&nbsp;number&nbsp;of&nbsp;calls&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6858648">//&nbsp;writeCount.</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858664">w</span>&nbsp;<span class="op" id="6858666">:=</span>&nbsp;<span class="keyword" id="6858669">struct</span>&nbsp;<span class="op" id="6858676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858680">io</span><span class="op" id="6858682">.</span><span class="ident" id="6858683">ByteWriter</span>&nbsp;<span class="comment" id="6858694">//&nbsp;to&nbsp;avoid&nbsp;being&nbsp;wrapped&nbsp;by&nbsp;a&nbsp;bufio.Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858740">io</span><span class="op" id="6858742">.</span><span class="ident" id="6858743">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858751">}</span><span class="op" id="6858752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858756">nil</span><span class="op" id="6858759">,</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858763">writerFunc</span><span class="op" id="6858773">(</span><span class="keyword" id="6858774">func</span><span class="op" id="6858778">(</span><span class="ident" id="6858779">p</span>&nbsp;<span class="op" id="6858781">[</span><span class="op" id="6858782">]</span><span class="builtintype" id="6858783">byte</span><span class="op" id="6858787">)</span>&nbsp;<span class="op" id="6858789">(</span><span class="ident" id="6858790">n</span>&nbsp;<span class="builtintype" id="6858792">int</span><span class="op" id="6858795">,</span>&nbsp;<span class="ident" id="6858797">err</span>&nbsp;<span class="builtintype" id="6858801">error</span><span class="op" id="6858806">)</span>&nbsp;<span class="op" id="6858808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858813">writeCount</span><span class="op" id="6858823">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858829">if</span>&nbsp;<span class="ident" id="6858832">failAfter</span>&nbsp;<span class="op" id="6858842">==</span>&nbsp;<span class="num" id="6858845">0</span>&nbsp;<span class="op" id="6858847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858853">err</span>&nbsp;<span class="op" id="6858857">=</span>&nbsp;<span class="ident" id="6858859">errFail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858870">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858875">failAfter</span><span class="op" id="6858884">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858890">return</span>&nbsp;<span class="builtinfunc" id="6858897">len</span><span class="op" id="6858900">(</span><span class="ident" id="6858901">p</span><span class="op" id="6858902">)</span><span class="op" id="6858903">,</span>&nbsp;<span class="ident" id="6858905">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858911">}</span><span class="op" id="6858912">)</span><span class="op" id="6858913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858920">req</span><span class="op" id="6858923">,</span>&nbsp;<span class="ident" id="6858925">_</span>&nbsp;<span class="op" id="6858927">:=</span>&nbsp;<span class="ident" id="6858930">NewRequest</span><span class="op" id="6858940">(</span><span class="string" id="6858941">&#34;GET&#34;</span><span class="op" id="6858946">,</span>&nbsp;<span class="string" id="6858948">&#34;http://example.com/&#34;</span><span class="op" id="6858969">,</span>&nbsp;<span class="ident" id="6858971">nil</span><span class="op" id="6858974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858977">const</span>&nbsp;<span class="ident" id="6858983">writeCalls</span>&nbsp;<span class="op" id="6858994">=</span>&nbsp;<span class="num" id="6858996">4</span>&nbsp;<span class="comment" id="6858998">//&nbsp;number&nbsp;of&nbsp;Write&nbsp;calls&nbsp;in&nbsp;current&nbsp;implementation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859050">sawGood</span>&nbsp;<span class="op" id="6859058">:=</span>&nbsp;<span class="builtintype" id="6859061">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859068">for</span>&nbsp;<span class="ident" id="6859072">n</span>&nbsp;<span class="op" id="6859074">:=</span>&nbsp;<span class="num" id="6859077">0</span><span class="op" id="6859078">;</span>&nbsp;<span class="ident" id="6859080">n</span>&nbsp;<span class="op" id="6859082">&lt;=</span>&nbsp;<span class="ident" id="6859085">writeCalls</span><span class="op" id="6859095">+</span><span class="num" id="6859096">2</span><span class="op" id="6859097">;</span>&nbsp;<span class="ident" id="6859099">n</span><span class="op" id="6859100">++</span>&nbsp;<span class="op" id="6859103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859107">failAfter</span>&nbsp;<span class="op" id="6859117">=</span>&nbsp;<span class="ident" id="6859119">n</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859123">writeCount</span>&nbsp;<span class="op" id="6859134">=</span>&nbsp;<span class="num" id="6859136">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859140">err</span>&nbsp;<span class="op" id="6859144">:=</span>&nbsp;<span class="ident" id="6859147">req</span><span class="op" id="6859150">.</span><span class="ident" id="6859151">Write</span><span class="op" id="6859156">(</span><span class="ident" id="6859157">w</span><span class="op" id="6859158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859162">var</span>&nbsp;<span class="ident" id="6859166">wantErr</span>&nbsp;<span class="builtintype" id="6859174">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859182">if</span>&nbsp;<span class="ident" id="6859185">n</span>&nbsp;<span class="op" id="6859187">&lt;</span>&nbsp;<span class="ident" id="6859189">writeCalls</span>&nbsp;<span class="op" id="6859200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859205">wantErr</span>&nbsp;<span class="op" id="6859213">=</span>&nbsp;<span class="ident" id="6859215">errFail</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859229">if</span>&nbsp;<span class="ident" id="6859232">err</span>&nbsp;<span class="op" id="6859236">!=</span>&nbsp;<span class="ident" id="6859239">wantErr</span>&nbsp;<span class="op" id="6859247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859252">t</span><span class="op" id="6859253">.</span><span class="ident" id="6859254">Errorf</span><span class="op" id="6859260">(</span><span class="string" id="6859261">&#34;for&nbsp;fail-after&nbsp;%d&nbsp;Writes,&nbsp;err&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6859306">,</span>&nbsp;<span class="ident" id="6859308">n</span><span class="op" id="6859309">,</span>&nbsp;<span class="ident" id="6859311">err</span><span class="op" id="6859314">,</span>&nbsp;<span class="ident" id="6859316">wantErr</span><span class="op" id="6859323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859328">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859339">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859343">if</span>&nbsp;<span class="ident" id="6859346">err</span>&nbsp;<span class="op" id="6859350">==</span>&nbsp;<span class="ident" id="6859353">nil</span>&nbsp;<span class="op" id="6859357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859362">sawGood</span>&nbsp;<span class="op" id="6859370">=</span>&nbsp;<span class="builtintype" id="6859372">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859380">if</span>&nbsp;<span class="ident" id="6859383">writeCount</span>&nbsp;<span class="op" id="6859394">!=</span>&nbsp;<span class="ident" id="6859397">writeCalls</span>&nbsp;<span class="op" id="6859408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859414">t</span><span class="op" id="6859415">.</span><span class="ident" id="6859416">Fatalf</span><span class="op" id="6859422">(</span><span class="string" id="6859423">&#34;writeCalls&nbsp;constant&nbsp;is&nbsp;outdated&nbsp;in&nbsp;test&#34;</span><span class="op" id="6859464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859469">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859477">if</span>&nbsp;<span class="ident" id="6859480">writeCount</span>&nbsp;<span class="op" id="6859491">&gt;</span>&nbsp;<span class="ident" id="6859493">writeCalls</span>&nbsp;<span class="op" id="6859504">||</span>&nbsp;<span class="ident" id="6859507">writeCount</span>&nbsp;<span class="op" id="6859518">&gt;</span>&nbsp;<span class="ident" id="6859520">n</span><span class="op" id="6859521">+</span><span class="num" id="6859522">1</span>&nbsp;<span class="op" id="6859524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859529">t</span><span class="op" id="6859530">.</span><span class="ident" id="6859531">Errorf</span><span class="op" id="6859537">(</span><span class="string" id="6859538">&#34;for&nbsp;fail-after&nbsp;%d,&nbsp;saw&nbsp;unexpectedly&nbsp;high&nbsp;(%d)&nbsp;write&nbsp;calls&#34;</span><span class="op" id="6859597">,</span>&nbsp;<span class="ident" id="6859599">n</span><span class="op" id="6859600">,</span>&nbsp;<span class="ident" id="6859602">writeCount</span><span class="op" id="6859612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859619">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859622">if</span>&nbsp;<span class="op" id="6859625">!</span><span class="ident" id="6859626">sawGood</span>&nbsp;<span class="op" id="6859634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859638">t</span><span class="op" id="6859639">.</span><span class="ident" id="6859640">Fatalf</span><span class="op" id="6859646">(</span><span class="string" id="6859647">&#34;writeCalls&nbsp;constant&nbsp;is&nbsp;outdated&nbsp;in&nbsp;test&#34;</span><span class="op" id="6859688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859691">}</span><br>
<span class="lineno"></span><span class="op" id="6859693">}</span>
</div>
</body>
</html>
