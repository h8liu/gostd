<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html" class="current">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2250792">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2250847">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2250901">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2250952">//&nbsp;Multiprecision&nbsp;decimal&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2250987">//&nbsp;For&nbsp;floating-point&nbsp;formatting&nbsp;only;&nbsp;not&nbsp;general&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="comment" id="2251047">//&nbsp;Only&nbsp;operations&nbsp;are&nbsp;assign&nbsp;and&nbsp;(binary)&nbsp;left/right&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="2251108">//&nbsp;Can&nbsp;do&nbsp;binary&nbsp;floating&nbsp;point&nbsp;in&nbsp;multiprecision&nbsp;decimal&nbsp;precisely</span><br>
<span class="lineno"></span><span class="comment" id="2251176">//&nbsp;because&nbsp;2&nbsp;divides&nbsp;10;&nbsp;cannot&nbsp;do&nbsp;decimal&nbsp;floating&nbsp;point</span><br>
<span class="lineno">10</span><span class="comment" id="2251234">//&nbsp;in&nbsp;multiprecision&nbsp;binary&nbsp;precisely.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2251274">package</span>&nbsp;<span class="ident" id="2251282">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2251291">type</span>&nbsp;<span class="ident" id="2251296">decimal</span>&nbsp;<span class="keyword" id="2251304">struct</span>&nbsp;<span class="op" id="2251311">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251314">d</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251320">[</span><span class="num" id="2251321">800</span><span class="op" id="2251324">]</span><span class="builtintype" id="2251325">byte</span>&nbsp;<span class="comment" id="2251330">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251341">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2251347">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2251357">//&nbsp;number&nbsp;of&nbsp;digits&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251383">dp</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2251389">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2251399">//&nbsp;decimal&nbsp;point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251417">neg</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2251423">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251429">trunc</span>&nbsp;<span class="builtintype" id="2251435">bool</span>&nbsp;<span class="comment" id="2251440">//&nbsp;discarded&nbsp;nonzero&nbsp;digits&nbsp;beyond&nbsp;d[:nd]</span><br>
<span class="lineno">20</span><span class="op" id="2251482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2251485">func</span>&nbsp;<span class="op" id="2251490">(</span><span class="ident" id="2251491">a</span>&nbsp;<span class="op" id="2251493">*</span><span class="ident" id="2251494">decimal</span><span class="op" id="2251501">)</span>&nbsp;<span class="ident" id="2251503">String</span><span class="op" id="2251509">(</span><span class="op" id="2251510">)</span>&nbsp;<span class="builtintype" id="2251512">string</span>&nbsp;<span class="op" id="2251519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251522">n</span>&nbsp;<span class="op" id="2251524">:=</span>&nbsp;<span class="num" id="2251527">10</span>&nbsp;<span class="op" id="2251530">+</span>&nbsp;<span class="ident" id="2251532">a</span><span class="op" id="2251533">.</span><span class="ident" id="2251534">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251538">if</span>&nbsp;<span class="ident" id="2251541">a</span><span class="op" id="2251542">.</span><span class="ident" id="2251543">dp</span>&nbsp;<span class="op" id="2251546">&gt;</span>&nbsp;<span class="num" id="2251548">0</span>&nbsp;<span class="op" id="2251550">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251554">n</span>&nbsp;<span class="op" id="2251556">+=</span>&nbsp;<span class="ident" id="2251559">a</span><span class="op" id="2251560">.</span><span class="ident" id="2251561">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251568">if</span>&nbsp;<span class="ident" id="2251571">a</span><span class="op" id="2251572">.</span><span class="ident" id="2251573">dp</span>&nbsp;<span class="op" id="2251576">&lt;</span>&nbsp;<span class="num" id="2251578">0</span>&nbsp;<span class="op" id="2251580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251584">n</span>&nbsp;<span class="op" id="2251586">+=</span>&nbsp;<span class="op" id="2251589">-</span><span class="ident" id="2251590">a</span><span class="op" id="2251591">.</span><span class="ident" id="2251592">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2251596">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251600">buf</span>&nbsp;<span class="op" id="2251604">:=</span>&nbsp;<span class="builtinfunc" id="2251607">make</span><span class="op" id="2251611">(</span><span class="op" id="2251612">[</span><span class="op" id="2251613">]</span><span class="builtintype" id="2251614">byte</span><span class="op" id="2251618">,</span>&nbsp;<span class="ident" id="2251620">n</span><span class="op" id="2251621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251624">w</span>&nbsp;<span class="op" id="2251626">:=</span>&nbsp;<span class="num" id="2251629">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251632">switch</span>&nbsp;<span class="op" id="2251639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251642">case</span>&nbsp;<span class="ident" id="2251647">a</span><span class="op" id="2251648">.</span><span class="ident" id="2251649">nd</span>&nbsp;<span class="op" id="2251652">==</span>&nbsp;<span class="num" id="2251655">0</span><span class="op" id="2251656">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251660">return</span>&nbsp;<span class="string" id="2251667">&#34;0&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251673">case</span>&nbsp;<span class="ident" id="2251678">a</span><span class="op" id="2251679">.</span><span class="ident" id="2251680">dp</span>&nbsp;<span class="op" id="2251683">&lt;=</span>&nbsp;<span class="num" id="2251686">0</span><span class="op" id="2251687">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2251691">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;decimal&nbsp;point&nbsp;and&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251746">buf</span><span class="op" id="2251749">[</span><span class="ident" id="2251750">w</span><span class="op" id="2251751">]</span>&nbsp;<span class="op" id="2251753">=</span>&nbsp;<span class="string" id="2251755">&#39;0&#39;</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251761">w</span><span class="op" id="2251762">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251767">buf</span><span class="op" id="2251770">[</span><span class="ident" id="2251771">w</span><span class="op" id="2251772">]</span>&nbsp;<span class="op" id="2251774">=</span>&nbsp;<span class="string" id="2251776">&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251782">w</span><span class="op" id="2251783">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251788">w</span>&nbsp;<span class="op" id="2251790">+=</span>&nbsp;<span class="ident" id="2251793">digitZero</span><span class="op" id="2251802">(</span><span class="ident" id="2251803">buf</span><span class="op" id="2251806">[</span><span class="ident" id="2251807">w</span>&nbsp;<span class="op" id="2251809">:</span>&nbsp;<span class="ident" id="2251811">w</span><span class="op" id="2251812">+</span><span class="op" id="2251813">-</span><span class="ident" id="2251814">a</span><span class="op" id="2251815">.</span><span class="ident" id="2251816">dp</span><span class="op" id="2251818">]</span><span class="op" id="2251819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251823">w</span>&nbsp;<span class="op" id="2251825">+=</span>&nbsp;<span class="builtinfunc" id="2251828">copy</span><span class="op" id="2251832">(</span><span class="ident" id="2251833">buf</span><span class="op" id="2251836">[</span><span class="ident" id="2251837">w</span><span class="op" id="2251838">:</span><span class="op" id="2251839">]</span><span class="op" id="2251840">,</span>&nbsp;<span class="ident" id="2251842">a</span><span class="op" id="2251843">.</span><span class="ident" id="2251844">d</span><span class="op" id="2251845">[</span><span class="num" id="2251846">0</span><span class="op" id="2251847">:</span><span class="ident" id="2251848">a</span><span class="op" id="2251849">.</span><span class="ident" id="2251850">nd</span><span class="op" id="2251852">]</span><span class="op" id="2251853">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2251857">case</span>&nbsp;<span class="ident" id="2251862">a</span><span class="op" id="2251863">.</span><span class="ident" id="2251864">dp</span>&nbsp;<span class="op" id="2251867">&lt;</span>&nbsp;<span class="ident" id="2251869">a</span><span class="op" id="2251870">.</span><span class="ident" id="2251871">nd</span><span class="op" id="2251873">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2251877">//&nbsp;decimal&nbsp;point&nbsp;in&nbsp;middle&nbsp;of&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251916">w</span>&nbsp;<span class="op" id="2251918">+=</span>&nbsp;<span class="builtinfunc" id="2251921">copy</span><span class="op" id="2251925">(</span><span class="ident" id="2251926">buf</span><span class="op" id="2251929">[</span><span class="ident" id="2251930">w</span><span class="op" id="2251931">:</span><span class="op" id="2251932">]</span><span class="op" id="2251933">,</span>&nbsp;<span class="ident" id="2251935">a</span><span class="op" id="2251936">.</span><span class="ident" id="2251937">d</span><span class="op" id="2251938">[</span><span class="num" id="2251939">0</span><span class="op" id="2251940">:</span><span class="ident" id="2251941">a</span><span class="op" id="2251942">.</span><span class="ident" id="2251943">dp</span><span class="op" id="2251945">]</span><span class="op" id="2251946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251950">buf</span><span class="op" id="2251953">[</span><span class="ident" id="2251954">w</span><span class="op" id="2251955">]</span>&nbsp;<span class="op" id="2251957">=</span>&nbsp;<span class="string" id="2251959">&#39;.&#39;</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251965">w</span><span class="op" id="2251966">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2251971">w</span>&nbsp;<span class="op" id="2251973">+=</span>&nbsp;<span class="builtinfunc" id="2251976">copy</span><span class="op" id="2251980">(</span><span class="ident" id="2251981">buf</span><span class="op" id="2251984">[</span><span class="ident" id="2251985">w</span><span class="op" id="2251986">:</span><span class="op" id="2251987">]</span><span class="op" id="2251988">,</span>&nbsp;<span class="ident" id="2251990">a</span><span class="op" id="2251991">.</span><span class="ident" id="2251992">d</span><span class="op" id="2251993">[</span><span class="ident" id="2251994">a</span><span class="op" id="2251995">.</span><span class="ident" id="2251996">dp</span><span class="op" id="2251998">:</span><span class="ident" id="2251999">a</span><span class="op" id="2252000">.</span><span class="ident" id="2252001">nd</span><span class="op" id="2252003">]</span><span class="op" id="2252004">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252008">default</span><span class="op" id="2252015">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2252019">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;digits&nbsp;and&nbsp;decimal&nbsp;point</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252074">w</span>&nbsp;<span class="op" id="2252076">+=</span>&nbsp;<span class="builtinfunc" id="2252079">copy</span><span class="op" id="2252083">(</span><span class="ident" id="2252084">buf</span><span class="op" id="2252087">[</span><span class="ident" id="2252088">w</span><span class="op" id="2252089">:</span><span class="op" id="2252090">]</span><span class="op" id="2252091">,</span>&nbsp;<span class="ident" id="2252093">a</span><span class="op" id="2252094">.</span><span class="ident" id="2252095">d</span><span class="op" id="2252096">[</span><span class="num" id="2252097">0</span><span class="op" id="2252098">:</span><span class="ident" id="2252099">a</span><span class="op" id="2252100">.</span><span class="ident" id="2252101">nd</span><span class="op" id="2252103">]</span><span class="op" id="2252104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252108">w</span>&nbsp;<span class="op" id="2252110">+=</span>&nbsp;<span class="ident" id="2252113">digitZero</span><span class="op" id="2252122">(</span><span class="ident" id="2252123">buf</span><span class="op" id="2252126">[</span><span class="ident" id="2252127">w</span>&nbsp;<span class="op" id="2252129">:</span>&nbsp;<span class="ident" id="2252131">w</span><span class="op" id="2252132">+</span><span class="ident" id="2252133">a</span><span class="op" id="2252134">.</span><span class="ident" id="2252135">dp</span><span class="op" id="2252137">-</span><span class="ident" id="2252138">a</span><span class="op" id="2252139">.</span><span class="ident" id="2252140">nd</span><span class="op" id="2252142">]</span><span class="op" id="2252143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252149">return</span>&nbsp;<span class="builtintype" id="2252156">string</span><span class="op" id="2252162">(</span><span class="ident" id="2252163">buf</span><span class="op" id="2252166">[</span><span class="num" id="2252167">0</span><span class="op" id="2252168">:</span><span class="ident" id="2252169">w</span><span class="op" id="2252170">]</span><span class="op" id="2252171">)</span><br>
<span class="lineno"></span><span class="op" id="2252173">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2252176">func</span>&nbsp;<span class="ident" id="2252181">digitZero</span><span class="op" id="2252190">(</span><span class="ident" id="2252191">dst</span>&nbsp;<span class="op" id="2252195">[</span><span class="op" id="2252196">]</span><span class="builtintype" id="2252197">byte</span><span class="op" id="2252201">)</span>&nbsp;<span class="builtintype" id="2252203">int</span>&nbsp;<span class="op" id="2252207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252210">for</span>&nbsp;<span class="ident" id="2252214">i</span>&nbsp;<span class="op" id="2252216">:=</span>&nbsp;<span class="keyword" id="2252219">range</span>&nbsp;<span class="ident" id="2252225">dst</span>&nbsp;<span class="op" id="2252229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252233">dst</span><span class="op" id="2252236">[</span><span class="ident" id="2252237">i</span><span class="op" id="2252238">]</span>&nbsp;<span class="op" id="2252240">=</span>&nbsp;<span class="string" id="2252242">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252247">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252250">return</span>&nbsp;<span class="builtinfunc" id="2252257">len</span><span class="op" id="2252260">(</span><span class="ident" id="2252261">dst</span><span class="op" id="2252264">)</span><br>
<span class="lineno"></span><span class="op" id="2252266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2252269">//&nbsp;trim&nbsp;trailing&nbsp;zeros&nbsp;from&nbsp;number.</span><br>
<span class="lineno"></span><span class="comment" id="2252305">//&nbsp;(They&nbsp;are&nbsp;meaningless;&nbsp;the&nbsp;decimal&nbsp;point&nbsp;is&nbsp;tracked</span><br>
<span class="lineno">70</span><span class="comment" id="2252360">//&nbsp;independent&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;digits.)</span><br>
<span class="lineno"></span><span class="keyword" id="2252401">func</span>&nbsp;<span class="ident" id="2252406">trim</span><span class="op" id="2252410">(</span><span class="ident" id="2252411">a</span>&nbsp;<span class="op" id="2252413">*</span><span class="ident" id="2252414">decimal</span><span class="op" id="2252421">)</span>&nbsp;<span class="op" id="2252423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252426">for</span>&nbsp;<span class="ident" id="2252430">a</span><span class="op" id="2252431">.</span><span class="ident" id="2252432">nd</span>&nbsp;<span class="op" id="2252435">&gt;</span>&nbsp;<span class="num" id="2252437">0</span>&nbsp;<span class="op" id="2252439">&amp;&amp;</span>&nbsp;<span class="ident" id="2252442">a</span><span class="op" id="2252443">.</span><span class="ident" id="2252444">d</span><span class="op" id="2252445">[</span><span class="ident" id="2252446">a</span><span class="op" id="2252447">.</span><span class="ident" id="2252448">nd</span><span class="op" id="2252450">-</span><span class="num" id="2252451">1</span><span class="op" id="2252452">]</span>&nbsp;<span class="op" id="2252454">==</span>&nbsp;<span class="string" id="2252457">&#39;0&#39;</span>&nbsp;<span class="op" id="2252461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252465">a</span><span class="op" id="2252466">.</span><span class="ident" id="2252467">nd</span><span class="op" id="2252469">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252473">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252476">if</span>&nbsp;<span class="ident" id="2252479">a</span><span class="op" id="2252480">.</span><span class="ident" id="2252481">nd</span>&nbsp;<span class="op" id="2252484">==</span>&nbsp;<span class="num" id="2252487">0</span>&nbsp;<span class="op" id="2252489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252493">a</span><span class="op" id="2252494">.</span><span class="ident" id="2252495">dp</span>&nbsp;<span class="op" id="2252498">=</span>&nbsp;<span class="num" id="2252500">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252503">}</span><br>
<span class="lineno"></span><span class="op" id="2252505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="2252508">//&nbsp;Assign&nbsp;v&nbsp;to&nbsp;a.</span><br>
<span class="lineno"></span><span class="keyword" id="2252526">func</span>&nbsp;<span class="op" id="2252531">(</span><span class="ident" id="2252532">a</span>&nbsp;<span class="op" id="2252534">*</span><span class="ident" id="2252535">decimal</span><span class="op" id="2252542">)</span>&nbsp;<span class="ident" id="2252544">Assign</span><span class="op" id="2252550">(</span><span class="ident" id="2252551">v</span>&nbsp;<span class="ident" id="2252553">uint64</span><span class="op" id="2252559">)</span>&nbsp;<span class="op" id="2252561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252564">var</span>&nbsp;<span class="ident" id="2252568">buf</span>&nbsp;<span class="op" id="2252572">[</span><span class="num" id="2252573">24</span><span class="op" id="2252575">]</span><span class="builtintype" id="2252576">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2252583">//&nbsp;Write&nbsp;reversed&nbsp;decimal&nbsp;in&nbsp;buf.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252618">n</span>&nbsp;<span class="op" id="2252620">:=</span>&nbsp;<span class="num" id="2252623">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252626">for</span>&nbsp;<span class="ident" id="2252630">v</span>&nbsp;<span class="op" id="2252632">&gt;</span>&nbsp;<span class="num" id="2252634">0</span>&nbsp;<span class="op" id="2252636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252640">v1</span>&nbsp;<span class="op" id="2252643">:=</span>&nbsp;<span class="ident" id="2252646">v</span>&nbsp;<span class="op" id="2252648">/</span>&nbsp;<span class="num" id="2252650">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252655">v</span>&nbsp;<span class="op" id="2252657">-=</span>&nbsp;<span class="num" id="2252660">10</span>&nbsp;<span class="op" id="2252663">*</span>&nbsp;<span class="ident" id="2252665">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252670">buf</span><span class="op" id="2252673">[</span><span class="ident" id="2252674">n</span><span class="op" id="2252675">]</span>&nbsp;<span class="op" id="2252677">=</span>&nbsp;<span class="builtintype" id="2252679">byte</span><span class="op" id="2252683">(</span><span class="ident" id="2252684">v</span>&nbsp;<span class="op" id="2252686">+</span>&nbsp;<span class="string" id="2252688">&#39;0&#39;</span><span class="op" id="2252691">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252695">n</span><span class="op" id="2252696">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252701">v</span>&nbsp;<span class="op" id="2252703">=</span>&nbsp;<span class="ident" id="2252705">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2252713">//&nbsp;Reverse&nbsp;again&nbsp;to&nbsp;produce&nbsp;forward&nbsp;decimal&nbsp;in&nbsp;a.d.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252766">a</span><span class="op" id="2252767">.</span><span class="ident" id="2252768">nd</span>&nbsp;<span class="op" id="2252771">=</span>&nbsp;<span class="num" id="2252773">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2252776">for</span>&nbsp;<span class="ident" id="2252780">n</span><span class="op" id="2252781">--</span><span class="op" id="2252783">;</span>&nbsp;<span class="ident" id="2252785">n</span>&nbsp;<span class="op" id="2252787">&gt;=</span>&nbsp;<span class="num" id="2252790">0</span><span class="op" id="2252791">;</span>&nbsp;<span class="ident" id="2252793">n</span><span class="op" id="2252794">--</span>&nbsp;<span class="op" id="2252797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252801">a</span><span class="op" id="2252802">.</span><span class="ident" id="2252803">d</span><span class="op" id="2252804">[</span><span class="ident" id="2252805">a</span><span class="op" id="2252806">.</span><span class="ident" id="2252807">nd</span><span class="op" id="2252809">]</span>&nbsp;<span class="op" id="2252811">=</span>&nbsp;<span class="ident" id="2252813">buf</span><span class="op" id="2252816">[</span><span class="ident" id="2252817">n</span><span class="op" id="2252818">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252822">a</span><span class="op" id="2252823">.</span><span class="ident" id="2252824">nd</span><span class="op" id="2252826">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2252830">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252833">a</span><span class="op" id="2252834">.</span><span class="ident" id="2252835">dp</span>&nbsp;<span class="op" id="2252838">=</span>&nbsp;<span class="ident" id="2252840">a</span><span class="op" id="2252841">.</span><span class="ident" id="2252842">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2252846">trim</span><span class="op" id="2252850">(</span><span class="ident" id="2252851">a</span><span class="op" id="2252852">)</span><br>
<span class="lineno"></span><span class="op" id="2252854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2252857">//&nbsp;Maximum&nbsp;shift&nbsp;that&nbsp;we&nbsp;can&nbsp;do&nbsp;in&nbsp;one&nbsp;pass&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno">105</span><span class="comment" id="2252919">//&nbsp;Signed&nbsp;int&nbsp;has&nbsp;31&nbsp;bits,&nbsp;and&nbsp;we&nbsp;have&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;accommodate&nbsp;9&lt;&lt;k.</span><br>
<span class="lineno"></span><span class="keyword" id="2252990">const</span>&nbsp;<span class="ident" id="2252996">maxShift</span>&nbsp;<span class="op" id="2253005">=</span>&nbsp;<span class="num" id="2253007">27</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2253011">//&nbsp;Binary&nbsp;shift&nbsp;right&nbsp;(*&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2253084">func</span>&nbsp;<span class="ident" id="2253089">rightShift</span><span class="op" id="2253099">(</span><span class="ident" id="2253100">a</span>&nbsp;<span class="op" id="2253102">*</span><span class="ident" id="2253103">decimal</span><span class="op" id="2253110">,</span>&nbsp;<span class="ident" id="2253112">k</span>&nbsp;<span class="builtintype" id="2253114">uint</span><span class="op" id="2253118">)</span>&nbsp;<span class="op" id="2253120">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253123">r</span>&nbsp;<span class="op" id="2253125">:=</span>&nbsp;<span class="num" id="2253128">0</span>&nbsp;<span class="comment" id="2253130">//&nbsp;read&nbsp;pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253147">w</span>&nbsp;<span class="op" id="2253149">:=</span>&nbsp;<span class="num" id="2253152">0</span>&nbsp;<span class="comment" id="2253154">//&nbsp;write&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2253173">//&nbsp;Pick&nbsp;up&nbsp;enough&nbsp;leading&nbsp;digits&nbsp;to&nbsp;cover&nbsp;first&nbsp;shift.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253229">n</span>&nbsp;<span class="op" id="2253231">:=</span>&nbsp;<span class="num" id="2253234">0</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253237">for</span>&nbsp;<span class="op" id="2253241">;</span>&nbsp;<span class="ident" id="2253243">n</span><span class="op" id="2253244">&gt;&gt;</span><span class="ident" id="2253246">k</span>&nbsp;<span class="op" id="2253248">==</span>&nbsp;<span class="num" id="2253251">0</span><span class="op" id="2253252">;</span>&nbsp;<span class="ident" id="2253254">r</span><span class="op" id="2253255">++</span>&nbsp;<span class="op" id="2253258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253262">if</span>&nbsp;<span class="ident" id="2253265">r</span>&nbsp;<span class="op" id="2253267">&gt;=</span>&nbsp;<span class="ident" id="2253270">a</span><span class="op" id="2253271">.</span><span class="ident" id="2253272">nd</span>&nbsp;<span class="op" id="2253275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253280">if</span>&nbsp;<span class="ident" id="2253283">n</span>&nbsp;<span class="op" id="2253285">==</span>&nbsp;<span class="num" id="2253288">0</span>&nbsp;<span class="op" id="2253290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2253296">//&nbsp;a&nbsp;==&nbsp;0;&nbsp;shouldn&#39;t&nbsp;get&nbsp;here,&nbsp;but&nbsp;handle&nbsp;anyway.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253350">a</span><span class="op" id="2253351">.</span><span class="ident" id="2253352">nd</span>&nbsp;<span class="op" id="2253355">=</span>&nbsp;<span class="num" id="2253357">0</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253363">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253378">for</span>&nbsp;<span class="ident" id="2253382">n</span><span class="op" id="2253383">&gt;&gt;</span><span class="ident" id="2253385">k</span>&nbsp;<span class="op" id="2253387">==</span>&nbsp;<span class="num" id="2253390">0</span>&nbsp;<span class="op" id="2253392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253398">n</span>&nbsp;<span class="op" id="2253400">=</span>&nbsp;<span class="ident" id="2253402">n</span>&nbsp;<span class="op" id="2253404">*</span>&nbsp;<span class="num" id="2253406">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253413">r</span><span class="op" id="2253414">++</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253425">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253437">c</span>&nbsp;<span class="op" id="2253439">:=</span>&nbsp;<span class="builtintype" id="2253442">int</span><span class="op" id="2253445">(</span><span class="ident" id="2253446">a</span><span class="op" id="2253447">.</span><span class="ident" id="2253448">d</span><span class="op" id="2253449">[</span><span class="ident" id="2253450">r</span><span class="op" id="2253451">]</span><span class="op" id="2253452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253456">n</span>&nbsp;<span class="op" id="2253458">=</span>&nbsp;<span class="ident" id="2253460">n</span><span class="op" id="2253461">*</span><span class="num" id="2253462">10</span>&nbsp;<span class="op" id="2253465">+</span>&nbsp;<span class="ident" id="2253467">c</span>&nbsp;<span class="op" id="2253469">-</span>&nbsp;<span class="string" id="2253471">&#39;0&#39;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253479">a</span><span class="op" id="2253480">.</span><span class="ident" id="2253481">dp</span>&nbsp;<span class="op" id="2253484">-=</span>&nbsp;<span class="ident" id="2253487">r</span>&nbsp;<span class="op" id="2253489">-</span>&nbsp;<span class="num" id="2253491">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2253495">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253534">for</span>&nbsp;<span class="op" id="2253538">;</span>&nbsp;<span class="ident" id="2253540">r</span>&nbsp;<span class="op" id="2253542">&lt;</span>&nbsp;<span class="ident" id="2253544">a</span><span class="op" id="2253545">.</span><span class="ident" id="2253546">nd</span><span class="op" id="2253548">;</span>&nbsp;<span class="ident" id="2253550">r</span><span class="op" id="2253551">++</span>&nbsp;<span class="op" id="2253554">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253558">c</span>&nbsp;<span class="op" id="2253560">:=</span>&nbsp;<span class="builtintype" id="2253563">int</span><span class="op" id="2253566">(</span><span class="ident" id="2253567">a</span><span class="op" id="2253568">.</span><span class="ident" id="2253569">d</span><span class="op" id="2253570">[</span><span class="ident" id="2253571">r</span><span class="op" id="2253572">]</span><span class="op" id="2253573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253577">dig</span>&nbsp;<span class="op" id="2253581">:=</span>&nbsp;<span class="ident" id="2253584">n</span>&nbsp;<span class="op" id="2253586">&gt;&gt;</span>&nbsp;<span class="ident" id="2253589">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253593">n</span>&nbsp;<span class="op" id="2253595">-=</span>&nbsp;<span class="ident" id="2253598">dig</span>&nbsp;<span class="op" id="2253602">&lt;&lt;</span>&nbsp;<span class="ident" id="2253605">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253609">a</span><span class="op" id="2253610">.</span><span class="ident" id="2253611">d</span><span class="op" id="2253612">[</span><span class="ident" id="2253613">w</span><span class="op" id="2253614">]</span>&nbsp;<span class="op" id="2253616">=</span>&nbsp;<span class="builtintype" id="2253618">byte</span><span class="op" id="2253622">(</span><span class="ident" id="2253623">dig</span>&nbsp;<span class="op" id="2253627">+</span>&nbsp;<span class="string" id="2253629">&#39;0&#39;</span><span class="op" id="2253632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253636">w</span><span class="op" id="2253637">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253642">n</span>&nbsp;<span class="op" id="2253644">=</span>&nbsp;<span class="ident" id="2253646">n</span><span class="op" id="2253647">*</span><span class="num" id="2253648">10</span>&nbsp;<span class="op" id="2253651">+</span>&nbsp;<span class="ident" id="2253653">c</span>&nbsp;<span class="op" id="2253655">-</span>&nbsp;<span class="string" id="2253657">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2253666">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253693">for</span>&nbsp;<span class="ident" id="2253697">n</span>&nbsp;<span class="op" id="2253699">&gt;</span>&nbsp;<span class="num" id="2253701">0</span>&nbsp;<span class="op" id="2253703">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253707">dig</span>&nbsp;<span class="op" id="2253711">:=</span>&nbsp;<span class="ident" id="2253714">n</span>&nbsp;<span class="op" id="2253716">&gt;&gt;</span>&nbsp;<span class="ident" id="2253719">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253723">n</span>&nbsp;<span class="op" id="2253725">-=</span>&nbsp;<span class="ident" id="2253728">dig</span>&nbsp;<span class="op" id="2253732">&lt;&lt;</span>&nbsp;<span class="ident" id="2253735">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2253739">if</span>&nbsp;<span class="ident" id="2253742">w</span>&nbsp;<span class="op" id="2253744">&lt;</span>&nbsp;<span class="builtinfunc" id="2253746">len</span><span class="op" id="2253749">(</span><span class="ident" id="2253750">a</span><span class="op" id="2253751">.</span><span class="ident" id="2253752">d</span><span class="op" id="2253753">)</span>&nbsp;<span class="op" id="2253755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253760">a</span><span class="op" id="2253761">.</span><span class="ident" id="2253762">d</span><span class="op" id="2253763">[</span><span class="ident" id="2253764">w</span><span class="op" id="2253765">]</span>&nbsp;<span class="op" id="2253767">=</span>&nbsp;<span class="builtintype" id="2253769">byte</span><span class="op" id="2253773">(</span><span class="ident" id="2253774">dig</span>&nbsp;<span class="op" id="2253778">+</span>&nbsp;<span class="string" id="2253780">&#39;0&#39;</span><span class="op" id="2253783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253788">w</span><span class="op" id="2253789">++</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253794">}</span>&nbsp;<span class="keyword" id="2253796">else</span>&nbsp;<span class="keyword" id="2253801">if</span>&nbsp;<span class="ident" id="2253804">dig</span>&nbsp;<span class="op" id="2253808">&gt;</span>&nbsp;<span class="num" id="2253810">0</span>&nbsp;<span class="op" id="2253812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253817">a</span><span class="op" id="2253818">.</span><span class="ident" id="2253819">trunc</span>&nbsp;<span class="op" id="2253825">=</span>&nbsp;<span class="builtintype" id="2253827">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253838">n</span>&nbsp;<span class="op" id="2253840">=</span>&nbsp;<span class="ident" id="2253842">n</span>&nbsp;<span class="op" id="2253844">*</span>&nbsp;<span class="num" id="2253846">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2253850">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253854">a</span><span class="op" id="2253855">.</span><span class="ident" id="2253856">nd</span>&nbsp;<span class="op" id="2253859">=</span>&nbsp;<span class="ident" id="2253861">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2253864">trim</span><span class="op" id="2253868">(</span><span class="ident" id="2253869">a</span><span class="op" id="2253870">)</span><br>
<span class="lineno"></span><span class="op" id="2253872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="2253875">//&nbsp;Cheat&nbsp;sheet&nbsp;for&nbsp;left&nbsp;shift:&nbsp;table&nbsp;indexed&nbsp;by&nbsp;shift&nbsp;count&nbsp;giving</span><br>
<span class="lineno"></span><span class="comment" id="2253942">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits&nbsp;that&nbsp;will&nbsp;be&nbsp;introduced&nbsp;by&nbsp;that&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="2254005">//</span><br>
<span class="lineno"></span><span class="comment" id="2254008">//&nbsp;For&nbsp;example,&nbsp;leftcheats[4]&nbsp;=&nbsp;{2,&nbsp;&#34;625&#34;}.&nbsp;&nbsp;That&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2254069">//&nbsp;if&nbsp;we&nbsp;are&nbsp;shifting&nbsp;by&nbsp;4&nbsp;(multiplying&nbsp;by&nbsp;16),&nbsp;it&nbsp;will&nbsp;add&nbsp;2&nbsp;digits</span><br>
<span class="lineno">165</span><span class="comment" id="2254138">//&nbsp;when&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;625&#34;&nbsp;through&nbsp;&#34;999&#34;,&nbsp;and&nbsp;one&nbsp;fewer&nbsp;digit</span><br>
<span class="lineno"></span><span class="comment" id="2254208">//&nbsp;if&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;000&#34;&nbsp;through&nbsp;&#34;624&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2254256">//</span><br>
<span class="lineno"></span><span class="comment" id="2254259">//&nbsp;Credit&nbsp;for&nbsp;this&nbsp;trick&nbsp;goes&nbsp;to&nbsp;Ken.</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="2254298">type</span>&nbsp;<span class="ident" id="2254303">leftCheat</span>&nbsp;<span class="keyword" id="2254313">struct</span>&nbsp;<span class="op" id="2254320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2254323">delta</span>&nbsp;&nbsp;<span class="builtintype" id="2254330">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2254337">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2254362">cutoff</span>&nbsp;<span class="builtintype" id="2254369">string</span>&nbsp;<span class="comment" id="2254376">//&nbsp;&nbsp;&nbsp;minus&nbsp;one&nbsp;digit&nbsp;if&nbsp;original&nbsp;&lt;&nbsp;a.</span><br>
<span class="lineno"></span><span class="op" id="2254414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="2254417">var</span>&nbsp;<span class="ident" id="2254421">leftcheats</span>&nbsp;<span class="op" id="2254432">=</span>&nbsp;<span class="op" id="2254434">[</span><span class="op" id="2254435">]</span><span class="ident" id="2254436">leftCheat</span><span class="op" id="2254445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2254448">//&nbsp;Leading&nbsp;digits&nbsp;of&nbsp;1/2^i&nbsp;=&nbsp;5^i.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2254483">//&nbsp;5^23&nbsp;is&nbsp;not&nbsp;an&nbsp;exact&nbsp;64-bit&nbsp;floating&nbsp;point&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2254538">//&nbsp;so&nbsp;have&nbsp;to&nbsp;use&nbsp;bc&nbsp;for&nbsp;the&nbsp;math.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2254574">/*<br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seq&nbsp;27&nbsp;|&nbsp;sed&nbsp;&#39;s/^/5^/&#39;&nbsp;|&nbsp;bc&nbsp;|<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;&#39;BEGIN{&nbsp;print&nbsp;&#34;\tleftCheat{&nbsp;0,&nbsp;\&#34;\&#34;&nbsp;},&#34;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log2&nbsp;=&nbsp;log(2)/log(10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&#34;\tleftCheat{&nbsp;%d,&nbsp;\&#34;%s\&#34;&nbsp;},\t//&nbsp;*&nbsp;%d\n&#34;,<br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int(log2*NR+1),&nbsp;$0,&nbsp;2**NR)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#39;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2254778">{</span><span class="num" id="2254779">0</span><span class="op" id="2254780">,</span>&nbsp;<span class="string" id="2254782">&#34;&#34;</span><span class="op" id="2254784">}</span><span class="op" id="2254785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2254788">{</span><span class="num" id="2254789">1</span><span class="op" id="2254790">,</span>&nbsp;<span class="string" id="2254792">&#34;5&#34;</span><span class="op" id="2254795">}</span><span class="op" id="2254796">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2254816">//&nbsp;*&nbsp;2</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2254824">{</span><span class="num" id="2254825">1</span><span class="op" id="2254826">,</span>&nbsp;<span class="string" id="2254828">&#34;25&#34;</span><span class="op" id="2254832">}</span><span class="op" id="2254833">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2254852">//&nbsp;*&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2254860">{</span><span class="num" id="2254861">1</span><span class="op" id="2254862">,</span>&nbsp;<span class="string" id="2254864">&#34;125&#34;</span><span class="op" id="2254869">}</span><span class="op" id="2254870">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2254888">//&nbsp;*&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2254896">{</span><span class="num" id="2254897">2</span><span class="op" id="2254898">,</span>&nbsp;<span class="string" id="2254900">&#34;625&#34;</span><span class="op" id="2254905">}</span><span class="op" id="2254906">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2254924">//&nbsp;*&nbsp;16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2254933">{</span><span class="num" id="2254934">2</span><span class="op" id="2254935">,</span>&nbsp;<span class="string" id="2254937">&#34;3125&#34;</span><span class="op" id="2254943">}</span><span class="op" id="2254944">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2254961">//&nbsp;*&nbsp;32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2254970">{</span><span class="num" id="2254971">2</span><span class="op" id="2254972">,</span>&nbsp;<span class="string" id="2254974">&#34;15625&#34;</span><span class="op" id="2254981">}</span><span class="op" id="2254982">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2254998">//&nbsp;*&nbsp;64</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255007">{</span><span class="num" id="2255008">3</span><span class="op" id="2255009">,</span>&nbsp;<span class="string" id="2255011">&#34;78125&#34;</span><span class="op" id="2255018">}</span><span class="op" id="2255019">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255035">//&nbsp;*&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255045">{</span><span class="num" id="2255046">3</span><span class="op" id="2255047">,</span>&nbsp;<span class="string" id="2255049">&#34;390625&#34;</span><span class="op" id="2255057">}</span><span class="op" id="2255058">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255073">//&nbsp;*&nbsp;256</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255083">{</span><span class="num" id="2255084">3</span><span class="op" id="2255085">,</span>&nbsp;<span class="string" id="2255087">&#34;1953125&#34;</span><span class="op" id="2255096">}</span><span class="op" id="2255097">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255111">//&nbsp;*&nbsp;512</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255121">{</span><span class="num" id="2255122">4</span><span class="op" id="2255123">,</span>&nbsp;<span class="string" id="2255125">&#34;9765625&#34;</span><span class="op" id="2255134">}</span><span class="op" id="2255135">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255149">//&nbsp;*&nbsp;1024</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255160">{</span><span class="num" id="2255161">4</span><span class="op" id="2255162">,</span>&nbsp;<span class="string" id="2255164">&#34;48828125&#34;</span><span class="op" id="2255174">}</span><span class="op" id="2255175">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255188">//&nbsp;*&nbsp;2048</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255199">{</span><span class="num" id="2255200">4</span><span class="op" id="2255201">,</span>&nbsp;<span class="string" id="2255203">&#34;244140625&#34;</span><span class="op" id="2255214">}</span><span class="op" id="2255215">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255227">//&nbsp;*&nbsp;4096</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255238">{</span><span class="num" id="2255239">4</span><span class="op" id="2255240">,</span>&nbsp;<span class="string" id="2255242">&#34;1220703125&#34;</span><span class="op" id="2255254">}</span><span class="op" id="2255255">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255266">//&nbsp;*&nbsp;8192</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255277">{</span><span class="num" id="2255278">5</span><span class="op" id="2255279">,</span>&nbsp;<span class="string" id="2255281">&#34;6103515625&#34;</span><span class="op" id="2255293">}</span><span class="op" id="2255294">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255305">//&nbsp;*&nbsp;16384</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255317">{</span><span class="num" id="2255318">5</span><span class="op" id="2255319">,</span>&nbsp;<span class="string" id="2255321">&#34;30517578125&#34;</span><span class="op" id="2255334">}</span><span class="op" id="2255335">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255345">//&nbsp;*&nbsp;32768</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255357">{</span><span class="num" id="2255358">5</span><span class="op" id="2255359">,</span>&nbsp;<span class="string" id="2255361">&#34;152587890625&#34;</span><span class="op" id="2255375">}</span><span class="op" id="2255376">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255385">//&nbsp;*&nbsp;65536</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255397">{</span><span class="num" id="2255398">6</span><span class="op" id="2255399">,</span>&nbsp;<span class="string" id="2255401">&#34;762939453125&#34;</span><span class="op" id="2255415">}</span><span class="op" id="2255416">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255425">//&nbsp;*&nbsp;131072</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255438">{</span><span class="num" id="2255439">6</span><span class="op" id="2255440">,</span>&nbsp;<span class="string" id="2255442">&#34;3814697265625&#34;</span><span class="op" id="2255457">}</span><span class="op" id="2255458">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255466">//&nbsp;*&nbsp;262144</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255479">{</span><span class="num" id="2255480">6</span><span class="op" id="2255481">,</span>&nbsp;<span class="string" id="2255483">&#34;19073486328125&#34;</span><span class="op" id="2255499">}</span><span class="op" id="2255500">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255507">//&nbsp;*&nbsp;524288</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255520">{</span><span class="num" id="2255521">7</span><span class="op" id="2255522">,</span>&nbsp;<span class="string" id="2255524">&#34;95367431640625&#34;</span><span class="op" id="2255540">}</span><span class="op" id="2255541">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255548">//&nbsp;*&nbsp;1048576</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255562">{</span><span class="num" id="2255563">7</span><span class="op" id="2255564">,</span>&nbsp;<span class="string" id="2255566">&#34;476837158203125&#34;</span><span class="op" id="2255583">}</span><span class="op" id="2255584">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255590">//&nbsp;*&nbsp;2097152</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255604">{</span><span class="num" id="2255605">7</span><span class="op" id="2255606">,</span>&nbsp;<span class="string" id="2255608">&#34;2384185791015625&#34;</span><span class="op" id="2255626">}</span><span class="op" id="2255627">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2255632">//&nbsp;*&nbsp;4194304</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255646">{</span><span class="num" id="2255647">7</span><span class="op" id="2255648">,</span>&nbsp;<span class="string" id="2255650">&#34;11920928955078125&#34;</span><span class="op" id="2255669">}</span><span class="op" id="2255670">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2255674">//&nbsp;*&nbsp;8388608</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255688">{</span><span class="num" id="2255689">8</span><span class="op" id="2255690">,</span>&nbsp;<span class="string" id="2255692">&#34;59604644775390625&#34;</span><span class="op" id="2255711">}</span><span class="op" id="2255712">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2255716">//&nbsp;*&nbsp;16777216</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255731">{</span><span class="num" id="2255732">8</span><span class="op" id="2255733">,</span>&nbsp;<span class="string" id="2255735">&#34;298023223876953125&#34;</span><span class="op" id="2255755">}</span><span class="op" id="2255756">,</span>&nbsp;&nbsp;<span class="comment" id="2255759">//&nbsp;*&nbsp;33554432</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255774">{</span><span class="num" id="2255775">8</span><span class="op" id="2255776">,</span>&nbsp;<span class="string" id="2255778">&#34;1490116119384765625&#34;</span><span class="op" id="2255799">}</span><span class="op" id="2255800">,</span>&nbsp;<span class="comment" id="2255802">//&nbsp;*&nbsp;67108864</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2255817">{</span><span class="num" id="2255818">9</span><span class="op" id="2255819">,</span>&nbsp;<span class="string" id="2255821">&#34;7450580596923828125&#34;</span><span class="op" id="2255842">}</span><span class="op" id="2255843">,</span>&nbsp;<span class="comment" id="2255845">//&nbsp;*&nbsp;134217728</span><br>
<span class="lineno"></span><span class="op" id="2255860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2255863">//&nbsp;Is&nbsp;the&nbsp;leading&nbsp;prefix&nbsp;of&nbsp;b&nbsp;lexicographically&nbsp;less&nbsp;than&nbsp;s?</span><br>
<span class="lineno"></span><span class="keyword" id="2255924">func</span>&nbsp;<span class="ident" id="2255929">prefixIsLessThan</span><span class="op" id="2255945">(</span><span class="ident" id="2255946">b</span>&nbsp;<span class="op" id="2255948">[</span><span class="op" id="2255949">]</span><span class="builtintype" id="2255950">byte</span><span class="op" id="2255954">,</span>&nbsp;<span class="ident" id="2255956">s</span>&nbsp;<span class="builtintype" id="2255958">string</span><span class="op" id="2255964">)</span>&nbsp;<span class="builtintype" id="2255966">bool</span>&nbsp;<span class="op" id="2255971">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2255974">for</span>&nbsp;<span class="ident" id="2255978">i</span>&nbsp;<span class="op" id="2255980">:=</span>&nbsp;<span class="num" id="2255983">0</span><span class="op" id="2255984">;</span>&nbsp;<span class="ident" id="2255986">i</span>&nbsp;<span class="op" id="2255988">&lt;</span>&nbsp;<span class="builtinfunc" id="2255990">len</span><span class="op" id="2255993">(</span><span class="ident" id="2255994">s</span><span class="op" id="2255995">)</span><span class="op" id="2255996">;</span>&nbsp;<span class="ident" id="2255998">i</span><span class="op" id="2255999">++</span>&nbsp;<span class="op" id="2256002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256006">if</span>&nbsp;<span class="ident" id="2256009">i</span>&nbsp;<span class="op" id="2256011">&gt;=</span>&nbsp;<span class="builtinfunc" id="2256014">len</span><span class="op" id="2256017">(</span><span class="ident" id="2256018">b</span><span class="op" id="2256019">)</span>&nbsp;<span class="op" id="2256021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256026">return</span>&nbsp;<span class="builtintype" id="2256033">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256044">if</span>&nbsp;<span class="ident" id="2256047">b</span><span class="op" id="2256048">[</span><span class="ident" id="2256049">i</span><span class="op" id="2256050">]</span>&nbsp;<span class="op" id="2256052">!=</span>&nbsp;<span class="ident" id="2256055">s</span><span class="op" id="2256056">[</span><span class="ident" id="2256057">i</span><span class="op" id="2256058">]</span>&nbsp;<span class="op" id="2256060">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256065">return</span>&nbsp;<span class="ident" id="2256072">b</span><span class="op" id="2256073">[</span><span class="ident" id="2256074">i</span><span class="op" id="2256075">]</span>&nbsp;<span class="op" id="2256077">&lt;</span>&nbsp;<span class="ident" id="2256079">s</span><span class="op" id="2256080">[</span><span class="ident" id="2256081">i</span><span class="op" id="2256082">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256092">return</span>&nbsp;<span class="builtintype" id="2256099">false</span><br>
<span class="lineno"></span><span class="op" id="2256105">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="2256108">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(/&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2256180">func</span>&nbsp;<span class="ident" id="2256185">leftShift</span><span class="op" id="2256194">(</span><span class="ident" id="2256195">a</span>&nbsp;<span class="op" id="2256197">*</span><span class="ident" id="2256198">decimal</span><span class="op" id="2256205">,</span>&nbsp;<span class="ident" id="2256207">k</span>&nbsp;<span class="builtintype" id="2256209">uint</span><span class="op" id="2256213">)</span>&nbsp;<span class="op" id="2256215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256218">delta</span>&nbsp;<span class="op" id="2256224">:=</span>&nbsp;<span class="ident" id="2256227">leftcheats</span><span class="op" id="2256237">[</span><span class="ident" id="2256238">k</span><span class="op" id="2256239">]</span><span class="op" id="2256240">.</span><span class="ident" id="2256241">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256248">if</span>&nbsp;<span class="ident" id="2256251">prefixIsLessThan</span><span class="op" id="2256267">(</span><span class="ident" id="2256268">a</span><span class="op" id="2256269">.</span><span class="ident" id="2256270">d</span><span class="op" id="2256271">[</span><span class="num" id="2256272">0</span><span class="op" id="2256273">:</span><span class="ident" id="2256274">a</span><span class="op" id="2256275">.</span><span class="ident" id="2256276">nd</span><span class="op" id="2256278">]</span><span class="op" id="2256279">,</span>&nbsp;<span class="ident" id="2256281">leftcheats</span><span class="op" id="2256291">[</span><span class="ident" id="2256292">k</span><span class="op" id="2256293">]</span><span class="op" id="2256294">.</span><span class="ident" id="2256295">cutoff</span><span class="op" id="2256301">)</span>&nbsp;<span class="op" id="2256303">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256307">delta</span><span class="op" id="2256312">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256320">r</span>&nbsp;<span class="op" id="2256322">:=</span>&nbsp;<span class="ident" id="2256325">a</span><span class="op" id="2256326">.</span><span class="ident" id="2256327">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2256338">//&nbsp;read&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256353">w</span>&nbsp;<span class="op" id="2256355">:=</span>&nbsp;<span class="ident" id="2256358">a</span><span class="op" id="2256359">.</span><span class="ident" id="2256360">nd</span>&nbsp;<span class="op" id="2256363">+</span>&nbsp;<span class="ident" id="2256365">delta</span>&nbsp;<span class="comment" id="2256371">//&nbsp;write&nbsp;index</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256387">n</span>&nbsp;<span class="op" id="2256389">:=</span>&nbsp;<span class="num" id="2256392">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2256396">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256435">for</span>&nbsp;<span class="ident" id="2256439">r</span><span class="op" id="2256440">--</span><span class="op" id="2256442">;</span>&nbsp;<span class="ident" id="2256444">r</span>&nbsp;<span class="op" id="2256446">&gt;=</span>&nbsp;<span class="num" id="2256449">0</span><span class="op" id="2256450">;</span>&nbsp;<span class="ident" id="2256452">r</span><span class="op" id="2256453">--</span>&nbsp;<span class="op" id="2256456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256460">n</span>&nbsp;<span class="op" id="2256462">+=</span>&nbsp;<span class="op" id="2256465">(</span><span class="builtintype" id="2256466">int</span><span class="op" id="2256469">(</span><span class="ident" id="2256470">a</span><span class="op" id="2256471">.</span><span class="ident" id="2256472">d</span><span class="op" id="2256473">[</span><span class="ident" id="2256474">r</span><span class="op" id="2256475">]</span><span class="op" id="2256476">)</span>&nbsp;<span class="op" id="2256478">-</span>&nbsp;<span class="string" id="2256480">&#39;0&#39;</span><span class="op" id="2256483">)</span>&nbsp;<span class="op" id="2256485">&lt;&lt;</span>&nbsp;<span class="ident" id="2256488">k</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256492">quo</span>&nbsp;<span class="op" id="2256496">:=</span>&nbsp;<span class="ident" id="2256499">n</span>&nbsp;<span class="op" id="2256501">/</span>&nbsp;<span class="num" id="2256503">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256508">rem</span>&nbsp;<span class="op" id="2256512">:=</span>&nbsp;<span class="ident" id="2256515">n</span>&nbsp;<span class="op" id="2256517">-</span>&nbsp;<span class="num" id="2256519">10</span><span class="op" id="2256521">*</span><span class="ident" id="2256522">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256528">w</span><span class="op" id="2256529">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256534">if</span>&nbsp;<span class="ident" id="2256537">w</span>&nbsp;<span class="op" id="2256539">&lt;</span>&nbsp;<span class="builtinfunc" id="2256541">len</span><span class="op" id="2256544">(</span><span class="ident" id="2256545">a</span><span class="op" id="2256546">.</span><span class="ident" id="2256547">d</span><span class="op" id="2256548">)</span>&nbsp;<span class="op" id="2256550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256555">a</span><span class="op" id="2256556">.</span><span class="ident" id="2256557">d</span><span class="op" id="2256558">[</span><span class="ident" id="2256559">w</span><span class="op" id="2256560">]</span>&nbsp;<span class="op" id="2256562">=</span>&nbsp;<span class="builtintype" id="2256564">byte</span><span class="op" id="2256568">(</span><span class="ident" id="2256569">rem</span>&nbsp;<span class="op" id="2256573">+</span>&nbsp;<span class="string" id="2256575">&#39;0&#39;</span><span class="op" id="2256578">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256582">}</span>&nbsp;<span class="keyword" id="2256584">else</span>&nbsp;<span class="keyword" id="2256589">if</span>&nbsp;<span class="ident" id="2256592">rem</span>&nbsp;<span class="op" id="2256596">!=</span>&nbsp;<span class="num" id="2256599">0</span>&nbsp;<span class="op" id="2256601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256606">a</span><span class="op" id="2256607">.</span><span class="ident" id="2256608">trunc</span>&nbsp;<span class="op" id="2256614">=</span>&nbsp;<span class="builtintype" id="2256616">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256627">n</span>&nbsp;<span class="op" id="2256629">=</span>&nbsp;<span class="ident" id="2256631">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256636">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2256640">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256667">for</span>&nbsp;<span class="ident" id="2256671">n</span>&nbsp;<span class="op" id="2256673">&gt;</span>&nbsp;<span class="num" id="2256675">0</span>&nbsp;<span class="op" id="2256677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256681">quo</span>&nbsp;<span class="op" id="2256685">:=</span>&nbsp;<span class="ident" id="2256688">n</span>&nbsp;<span class="op" id="2256690">/</span>&nbsp;<span class="num" id="2256692">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256697">rem</span>&nbsp;<span class="op" id="2256701">:=</span>&nbsp;<span class="ident" id="2256704">n</span>&nbsp;<span class="op" id="2256706">-</span>&nbsp;<span class="num" id="2256708">10</span><span class="op" id="2256710">*</span><span class="ident" id="2256711">quo</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256717">w</span><span class="op" id="2256718">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256723">if</span>&nbsp;<span class="ident" id="2256726">w</span>&nbsp;<span class="op" id="2256728">&lt;</span>&nbsp;<span class="builtinfunc" id="2256730">len</span><span class="op" id="2256733">(</span><span class="ident" id="2256734">a</span><span class="op" id="2256735">.</span><span class="ident" id="2256736">d</span><span class="op" id="2256737">)</span>&nbsp;<span class="op" id="2256739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256744">a</span><span class="op" id="2256745">.</span><span class="ident" id="2256746">d</span><span class="op" id="2256747">[</span><span class="ident" id="2256748">w</span><span class="op" id="2256749">]</span>&nbsp;<span class="op" id="2256751">=</span>&nbsp;<span class="builtintype" id="2256753">byte</span><span class="op" id="2256757">(</span><span class="ident" id="2256758">rem</span>&nbsp;<span class="op" id="2256762">+</span>&nbsp;<span class="string" id="2256764">&#39;0&#39;</span><span class="op" id="2256767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256771">}</span>&nbsp;<span class="keyword" id="2256773">else</span>&nbsp;<span class="keyword" id="2256778">if</span>&nbsp;<span class="ident" id="2256781">rem</span>&nbsp;<span class="op" id="2256785">!=</span>&nbsp;<span class="num" id="2256788">0</span>&nbsp;<span class="op" id="2256790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256795">a</span><span class="op" id="2256796">.</span><span class="ident" id="2256797">trunc</span>&nbsp;<span class="op" id="2256803">=</span>&nbsp;<span class="builtintype" id="2256805">true</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256816">n</span>&nbsp;<span class="op" id="2256818">=</span>&nbsp;<span class="ident" id="2256820">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256829">a</span><span class="op" id="2256830">.</span><span class="ident" id="2256831">nd</span>&nbsp;<span class="op" id="2256834">+=</span>&nbsp;<span class="ident" id="2256837">delta</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256844">if</span>&nbsp;<span class="ident" id="2256847">a</span><span class="op" id="2256848">.</span><span class="ident" id="2256849">nd</span>&nbsp;<span class="op" id="2256852">&gt;=</span>&nbsp;<span class="builtinfunc" id="2256855">len</span><span class="op" id="2256858">(</span><span class="ident" id="2256859">a</span><span class="op" id="2256860">.</span><span class="ident" id="2256861">d</span><span class="op" id="2256862">)</span>&nbsp;<span class="op" id="2256864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256868">a</span><span class="op" id="2256869">.</span><span class="ident" id="2256870">nd</span>&nbsp;<span class="op" id="2256873">=</span>&nbsp;<span class="builtinfunc" id="2256875">len</span><span class="op" id="2256878">(</span><span class="ident" id="2256879">a</span><span class="op" id="2256880">.</span><span class="ident" id="2256881">d</span><span class="op" id="2256882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2256885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256888">a</span><span class="op" id="2256889">.</span><span class="ident" id="2256890">dp</span>&nbsp;<span class="op" id="2256893">+=</span>&nbsp;<span class="ident" id="2256896">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2256903">trim</span><span class="op" id="2256907">(</span><span class="ident" id="2256908">a</span><span class="op" id="2256909">)</span><br>
<span class="lineno">275</span><span class="op" id="2256911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2256914">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(k&nbsp;&gt;&nbsp;0)&nbsp;or&nbsp;right&nbsp;(k&nbsp;&lt;&nbsp;0).</span><br>
<span class="lineno"></span><span class="keyword" id="2256961">func</span>&nbsp;<span class="op" id="2256966">(</span><span class="ident" id="2256967">a</span>&nbsp;<span class="op" id="2256969">*</span><span class="ident" id="2256970">decimal</span><span class="op" id="2256977">)</span>&nbsp;<span class="ident" id="2256979">Shift</span><span class="op" id="2256984">(</span><span class="ident" id="2256985">k</span>&nbsp;<span class="builtintype" id="2256987">int</span><span class="op" id="2256990">)</span>&nbsp;<span class="op" id="2256992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2256995">switch</span>&nbsp;<span class="op" id="2257002">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257005">case</span>&nbsp;<span class="ident" id="2257010">a</span><span class="op" id="2257011">.</span><span class="ident" id="2257012">nd</span>&nbsp;<span class="op" id="2257015">==</span>&nbsp;<span class="num" id="2257018">0</span><span class="op" id="2257019">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2257023">//&nbsp;nothing&nbsp;to&nbsp;do:&nbsp;a&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257049">case</span>&nbsp;<span class="ident" id="2257054">k</span>&nbsp;<span class="op" id="2257056">&gt;</span>&nbsp;<span class="num" id="2257058">0</span><span class="op" id="2257059">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257063">for</span>&nbsp;<span class="ident" id="2257067">k</span>&nbsp;<span class="op" id="2257069">&gt;</span>&nbsp;<span class="ident" id="2257071">maxShift</span>&nbsp;<span class="op" id="2257080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257085">leftShift</span><span class="op" id="2257094">(</span><span class="ident" id="2257095">a</span><span class="op" id="2257096">,</span>&nbsp;<span class="ident" id="2257098">maxShift</span><span class="op" id="2257106">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257111">k</span>&nbsp;<span class="op" id="2257113">-=</span>&nbsp;<span class="ident" id="2257116">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257131">leftShift</span><span class="op" id="2257140">(</span><span class="ident" id="2257141">a</span><span class="op" id="2257142">,</span>&nbsp;<span class="builtintype" id="2257144">uint</span><span class="op" id="2257148">(</span><span class="ident" id="2257149">k</span><span class="op" id="2257150">)</span><span class="op" id="2257151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257154">case</span>&nbsp;<span class="ident" id="2257159">k</span>&nbsp;<span class="op" id="2257161">&lt;</span>&nbsp;<span class="num" id="2257163">0</span><span class="op" id="2257164">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257168">for</span>&nbsp;<span class="ident" id="2257172">k</span>&nbsp;<span class="op" id="2257174">&lt;</span>&nbsp;<span class="op" id="2257176">-</span><span class="ident" id="2257177">maxShift</span>&nbsp;<span class="op" id="2257186">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257191">rightShift</span><span class="op" id="2257201">(</span><span class="ident" id="2257202">a</span><span class="op" id="2257203">,</span>&nbsp;<span class="ident" id="2257205">maxShift</span><span class="op" id="2257213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257218">k</span>&nbsp;<span class="op" id="2257220">+=</span>&nbsp;<span class="ident" id="2257223">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257238">rightShift</span><span class="op" id="2257248">(</span><span class="ident" id="2257249">a</span><span class="op" id="2257250">,</span>&nbsp;<span class="builtintype" id="2257252">uint</span><span class="op" id="2257256">(</span><span class="op" id="2257257">-</span><span class="ident" id="2257258">k</span><span class="op" id="2257259">)</span><span class="op" id="2257260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257263">}</span><br>
<span class="lineno">295</span><span class="op" id="2257265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2257268">//&nbsp;If&nbsp;we&nbsp;chop&nbsp;a&nbsp;at&nbsp;nd&nbsp;digits,&nbsp;should&nbsp;we&nbsp;round&nbsp;up?</span><br>
<span class="lineno"></span><span class="keyword" id="2257318">func</span>&nbsp;<span class="ident" id="2257323">shouldRoundUp</span><span class="op" id="2257336">(</span><span class="ident" id="2257337">a</span>&nbsp;<span class="op" id="2257339">*</span><span class="ident" id="2257340">decimal</span><span class="op" id="2257347">,</span>&nbsp;<span class="ident" id="2257349">nd</span>&nbsp;<span class="builtintype" id="2257352">int</span><span class="op" id="2257355">)</span>&nbsp;<span class="builtintype" id="2257357">bool</span>&nbsp;<span class="op" id="2257362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257365">if</span>&nbsp;<span class="ident" id="2257368">nd</span>&nbsp;<span class="op" id="2257371">&lt;</span>&nbsp;<span class="num" id="2257373">0</span>&nbsp;<span class="op" id="2257375">||</span>&nbsp;<span class="ident" id="2257378">nd</span>&nbsp;<span class="op" id="2257381">&gt;=</span>&nbsp;<span class="ident" id="2257384">a</span><span class="op" id="2257385">.</span><span class="ident" id="2257386">nd</span>&nbsp;<span class="op" id="2257389">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257393">return</span>&nbsp;<span class="builtintype" id="2257400">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257410">if</span>&nbsp;<span class="ident" id="2257413">a</span><span class="op" id="2257414">.</span><span class="ident" id="2257415">d</span><span class="op" id="2257416">[</span><span class="ident" id="2257417">nd</span><span class="op" id="2257419">]</span>&nbsp;<span class="op" id="2257421">==</span>&nbsp;<span class="string" id="2257424">&#39;5&#39;</span>&nbsp;<span class="op" id="2257428">&amp;&amp;</span>&nbsp;<span class="ident" id="2257431">nd</span><span class="op" id="2257433">+</span><span class="num" id="2257434">1</span>&nbsp;<span class="op" id="2257436">==</span>&nbsp;<span class="ident" id="2257439">a</span><span class="op" id="2257440">.</span><span class="ident" id="2257441">nd</span>&nbsp;<span class="op" id="2257444">{</span>&nbsp;<span class="comment" id="2257446">//&nbsp;exactly&nbsp;halfway&nbsp;-&nbsp;round&nbsp;to&nbsp;even</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2257483">//&nbsp;if&nbsp;we&nbsp;truncated,&nbsp;a&nbsp;little&nbsp;higher&nbsp;than&nbsp;what&#39;s&nbsp;recorded&nbsp;-&nbsp;always&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257560">if</span>&nbsp;<span class="ident" id="2257563">a</span><span class="op" id="2257564">.</span><span class="ident" id="2257565">trunc</span>&nbsp;<span class="op" id="2257571">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257576">return</span>&nbsp;<span class="builtintype" id="2257583">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257594">return</span>&nbsp;<span class="ident" id="2257601">nd</span>&nbsp;<span class="op" id="2257604">&gt;</span>&nbsp;<span class="num" id="2257606">0</span>&nbsp;<span class="op" id="2257608">&amp;&amp;</span>&nbsp;<span class="op" id="2257611">(</span><span class="ident" id="2257612">a</span><span class="op" id="2257613">.</span><span class="ident" id="2257614">d</span><span class="op" id="2257615">[</span><span class="ident" id="2257616">nd</span><span class="op" id="2257618">-</span><span class="num" id="2257619">1</span><span class="op" id="2257620">]</span><span class="op" id="2257621">-</span><span class="string" id="2257622">&#39;0&#39;</span><span class="op" id="2257625">)</span><span class="op" id="2257626">%</span><span class="num" id="2257627">2</span>&nbsp;<span class="op" id="2257629">!=</span>&nbsp;<span class="num" id="2257632">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2257638">//&nbsp;not&nbsp;halfway&nbsp;-&nbsp;digit&nbsp;tells&nbsp;all</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257672">return</span>&nbsp;<span class="ident" id="2257679">a</span><span class="op" id="2257680">.</span><span class="ident" id="2257681">d</span><span class="op" id="2257682">[</span><span class="ident" id="2257683">nd</span><span class="op" id="2257685">]</span>&nbsp;<span class="op" id="2257687">&gt;=</span>&nbsp;<span class="string" id="2257690">&#39;5&#39;</span><br>
<span class="lineno"></span><span class="op" id="2257694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2257697">//&nbsp;Round&nbsp;a&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="comment" id="2257733">//&nbsp;If&nbsp;nd&nbsp;is&nbsp;zero,&nbsp;it&nbsp;means&nbsp;we&#39;re&nbsp;rounding</span><br>
<span class="lineno">315</span><span class="comment" id="2257775">//&nbsp;just&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;digits,&nbsp;as&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2257816">//&nbsp;0.09&nbsp;-&gt;&nbsp;0.1.</span><br>
<span class="lineno"></span><span class="keyword" id="2257832">func</span>&nbsp;<span class="op" id="2257837">(</span><span class="ident" id="2257838">a</span>&nbsp;<span class="op" id="2257840">*</span><span class="ident" id="2257841">decimal</span><span class="op" id="2257848">)</span>&nbsp;<span class="ident" id="2257850">Round</span><span class="op" id="2257855">(</span><span class="ident" id="2257856">nd</span>&nbsp;<span class="builtintype" id="2257859">int</span><span class="op" id="2257862">)</span>&nbsp;<span class="op" id="2257864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257867">if</span>&nbsp;<span class="ident" id="2257870">nd</span>&nbsp;<span class="op" id="2257873">&lt;</span>&nbsp;<span class="num" id="2257875">0</span>&nbsp;<span class="op" id="2257877">||</span>&nbsp;<span class="ident" id="2257880">nd</span>&nbsp;<span class="op" id="2257883">&gt;=</span>&nbsp;<span class="ident" id="2257886">a</span><span class="op" id="2257887">.</span><span class="ident" id="2257888">nd</span>&nbsp;<span class="op" id="2257891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257895">return</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2257906">if</span>&nbsp;<span class="ident" id="2257909">shouldRoundUp</span><span class="op" id="2257922">(</span><span class="ident" id="2257923">a</span><span class="op" id="2257924">,</span>&nbsp;<span class="ident" id="2257926">nd</span><span class="op" id="2257928">)</span>&nbsp;<span class="op" id="2257930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257934">a</span><span class="op" id="2257935">.</span><span class="ident" id="2257936">RoundUp</span><span class="op" id="2257943">(</span><span class="ident" id="2257944">nd</span><span class="op" id="2257946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257949">}</span>&nbsp;<span class="keyword" id="2257951">else</span>&nbsp;<span class="op" id="2257956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2257960">a</span><span class="op" id="2257961">.</span><span class="ident" id="2257962">RoundDown</span><span class="op" id="2257971">(</span><span class="ident" id="2257972">nd</span><span class="op" id="2257974">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2257977">}</span><br>
<span class="lineno"></span><span class="op" id="2257979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2257982">//&nbsp;Round&nbsp;a&nbsp;down&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="2258023">func</span>&nbsp;<span class="op" id="2258028">(</span><span class="ident" id="2258029">a</span>&nbsp;<span class="op" id="2258031">*</span><span class="ident" id="2258032">decimal</span><span class="op" id="2258039">)</span>&nbsp;<span class="ident" id="2258041">RoundDown</span><span class="op" id="2258050">(</span><span class="ident" id="2258051">nd</span>&nbsp;<span class="builtintype" id="2258054">int</span><span class="op" id="2258057">)</span>&nbsp;<span class="op" id="2258059">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258062">if</span>&nbsp;<span class="ident" id="2258065">nd</span>&nbsp;<span class="op" id="2258068">&lt;</span>&nbsp;<span class="num" id="2258070">0</span>&nbsp;<span class="op" id="2258072">||</span>&nbsp;<span class="ident" id="2258075">nd</span>&nbsp;<span class="op" id="2258078">&gt;=</span>&nbsp;<span class="ident" id="2258081">a</span><span class="op" id="2258082">.</span><span class="ident" id="2258083">nd</span>&nbsp;<span class="op" id="2258086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258090">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258101">a</span><span class="op" id="2258102">.</span><span class="ident" id="2258103">nd</span>&nbsp;<span class="op" id="2258106">=</span>&nbsp;<span class="ident" id="2258108">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258112">trim</span><span class="op" id="2258116">(</span><span class="ident" id="2258117">a</span><span class="op" id="2258118">)</span><br>
<span class="lineno">335</span><span class="op" id="2258120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2258123">//&nbsp;Round&nbsp;a&nbsp;up&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="2258162">func</span>&nbsp;<span class="op" id="2258167">(</span><span class="ident" id="2258168">a</span>&nbsp;<span class="op" id="2258170">*</span><span class="ident" id="2258171">decimal</span><span class="op" id="2258178">)</span>&nbsp;<span class="ident" id="2258180">RoundUp</span><span class="op" id="2258187">(</span><span class="ident" id="2258188">nd</span>&nbsp;<span class="builtintype" id="2258191">int</span><span class="op" id="2258194">)</span>&nbsp;<span class="op" id="2258196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258199">if</span>&nbsp;<span class="ident" id="2258202">nd</span>&nbsp;<span class="op" id="2258205">&lt;</span>&nbsp;<span class="num" id="2258207">0</span>&nbsp;<span class="op" id="2258209">||</span>&nbsp;<span class="ident" id="2258212">nd</span>&nbsp;<span class="op" id="2258215">&gt;=</span>&nbsp;<span class="ident" id="2258218">a</span><span class="op" id="2258219">.</span><span class="ident" id="2258220">nd</span>&nbsp;<span class="op" id="2258223">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258227">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2258239">//&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258252">for</span>&nbsp;<span class="ident" id="2258256">i</span>&nbsp;<span class="op" id="2258258">:=</span>&nbsp;<span class="ident" id="2258261">nd</span>&nbsp;<span class="op" id="2258264">-</span>&nbsp;<span class="num" id="2258266">1</span><span class="op" id="2258267">;</span>&nbsp;<span class="ident" id="2258269">i</span>&nbsp;<span class="op" id="2258271">&gt;=</span>&nbsp;<span class="num" id="2258274">0</span><span class="op" id="2258275">;</span>&nbsp;<span class="ident" id="2258277">i</span><span class="op" id="2258278">--</span>&nbsp;<span class="op" id="2258281">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258285">c</span>&nbsp;<span class="op" id="2258287">:=</span>&nbsp;<span class="ident" id="2258290">a</span><span class="op" id="2258291">.</span><span class="ident" id="2258292">d</span><span class="op" id="2258293">[</span><span class="ident" id="2258294">i</span><span class="op" id="2258295">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258299">if</span>&nbsp;<span class="ident" id="2258302">c</span>&nbsp;<span class="op" id="2258304">&lt;</span>&nbsp;<span class="string" id="2258306">&#39;9&#39;</span>&nbsp;<span class="op" id="2258310">{</span>&nbsp;<span class="comment" id="2258312">//&nbsp;can&nbsp;stop&nbsp;after&nbsp;this&nbsp;digit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258344">a</span><span class="op" id="2258345">.</span><span class="ident" id="2258346">d</span><span class="op" id="2258347">[</span><span class="ident" id="2258348">i</span><span class="op" id="2258349">]</span><span class="op" id="2258350">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258356">a</span><span class="op" id="2258357">.</span><span class="ident" id="2258358">nd</span>&nbsp;<span class="op" id="2258361">=</span>&nbsp;<span class="ident" id="2258363">i</span>&nbsp;<span class="op" id="2258365">+</span>&nbsp;<span class="num" id="2258367">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258372">return</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2258388">//&nbsp;Number&nbsp;is&nbsp;all&nbsp;9s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2258410">//&nbsp;Change&nbsp;to&nbsp;single&nbsp;1&nbsp;with&nbsp;adjusted&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258462">a</span><span class="op" id="2258463">.</span><span class="ident" id="2258464">d</span><span class="op" id="2258465">[</span><span class="num" id="2258466">0</span><span class="op" id="2258467">]</span>&nbsp;<span class="op" id="2258469">=</span>&nbsp;<span class="string" id="2258471">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258476">a</span><span class="op" id="2258477">.</span><span class="ident" id="2258478">nd</span>&nbsp;<span class="op" id="2258481">=</span>&nbsp;<span class="num" id="2258483">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258486">a</span><span class="op" id="2258487">.</span><span class="ident" id="2258488">dp</span><span class="op" id="2258490">++</span><br>
<span class="lineno"></span><span class="op" id="2258493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="2258496">//&nbsp;Extract&nbsp;integer&nbsp;part,&nbsp;rounded&nbsp;appropriately.</span><br>
<span class="lineno"></span><span class="comment" id="2258544">//&nbsp;No&nbsp;guarantees&nbsp;about&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2258577">func</span>&nbsp;<span class="op" id="2258582">(</span><span class="ident" id="2258583">a</span>&nbsp;<span class="op" id="2258585">*</span><span class="ident" id="2258586">decimal</span><span class="op" id="2258593">)</span>&nbsp;<span class="ident" id="2258595">RoundedInteger</span><span class="op" id="2258609">(</span><span class="op" id="2258610">)</span>&nbsp;<span class="ident" id="2258612">uint64</span>&nbsp;<span class="op" id="2258619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258622">if</span>&nbsp;<span class="ident" id="2258625">a</span><span class="op" id="2258626">.</span><span class="ident" id="2258627">dp</span>&nbsp;<span class="op" id="2258630">&gt;</span>&nbsp;<span class="num" id="2258632">20</span>&nbsp;<span class="op" id="2258635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258639">return</span>&nbsp;<span class="num" id="2258646">0xFFFFFFFFFFFFFFFF</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258669">var</span>&nbsp;<span class="ident" id="2258673">i</span>&nbsp;<span class="builtintype" id="2258675">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258680">n</span>&nbsp;<span class="op" id="2258682">:=</span>&nbsp;<span class="ident" id="2258685">uint64</span><span class="op" id="2258691">(</span><span class="num" id="2258692">0</span><span class="op" id="2258693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258696">for</span>&nbsp;<span class="ident" id="2258700">i</span>&nbsp;<span class="op" id="2258702">=</span>&nbsp;<span class="num" id="2258704">0</span><span class="op" id="2258705">;</span>&nbsp;<span class="ident" id="2258707">i</span>&nbsp;<span class="op" id="2258709">&lt;</span>&nbsp;<span class="ident" id="2258711">a</span><span class="op" id="2258712">.</span><span class="ident" id="2258713">dp</span>&nbsp;<span class="op" id="2258716">&amp;&amp;</span>&nbsp;<span class="ident" id="2258719">i</span>&nbsp;<span class="op" id="2258721">&lt;</span>&nbsp;<span class="ident" id="2258723">a</span><span class="op" id="2258724">.</span><span class="ident" id="2258725">nd</span><span class="op" id="2258727">;</span>&nbsp;<span class="ident" id="2258729">i</span><span class="op" id="2258730">++</span>&nbsp;<span class="op" id="2258733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258737">n</span>&nbsp;<span class="op" id="2258739">=</span>&nbsp;<span class="ident" id="2258741">n</span><span class="op" id="2258742">*</span><span class="num" id="2258743">10</span>&nbsp;<span class="op" id="2258746">+</span>&nbsp;<span class="ident" id="2258748">uint64</span><span class="op" id="2258754">(</span><span class="ident" id="2258755">a</span><span class="op" id="2258756">.</span><span class="ident" id="2258757">d</span><span class="op" id="2258758">[</span><span class="ident" id="2258759">i</span><span class="op" id="2258760">]</span><span class="op" id="2258761">-</span><span class="string" id="2258762">&#39;0&#39;</span><span class="op" id="2258765">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258771">for</span>&nbsp;<span class="op" id="2258775">;</span>&nbsp;<span class="ident" id="2258777">i</span>&nbsp;<span class="op" id="2258779">&lt;</span>&nbsp;<span class="ident" id="2258781">a</span><span class="op" id="2258782">.</span><span class="ident" id="2258783">dp</span><span class="op" id="2258785">;</span>&nbsp;<span class="ident" id="2258787">i</span><span class="op" id="2258788">++</span>&nbsp;<span class="op" id="2258791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258795">n</span>&nbsp;<span class="op" id="2258797">*=</span>&nbsp;<span class="num" id="2258800">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258807">if</span>&nbsp;<span class="ident" id="2258810">shouldRoundUp</span><span class="op" id="2258823">(</span><span class="ident" id="2258824">a</span><span class="op" id="2258825">,</span>&nbsp;<span class="ident" id="2258827">a</span><span class="op" id="2258828">.</span><span class="ident" id="2258829">dp</span><span class="op" id="2258831">)</span>&nbsp;<span class="op" id="2258833">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2258837">n</span><span class="op" id="2258838">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2258842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2258845">return</span>&nbsp;<span class="ident" id="2258852">n</span><br>
<span class="lineno"></span><span class="op" id="2258854">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
