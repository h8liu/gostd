<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html" class="current">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8304383">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8304438">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8304492">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8304543">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8304610">package</span>&nbsp;<span class="ident" id="8304618">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8304623">import</span>&nbsp;<span class="op" id="8304630">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8304633">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8304642">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8304652">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8304659">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8304665">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8304672">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8304683">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8304694">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8304701">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8304704">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8304764">type</span>&nbsp;<span class="ident" id="8304769">ByteStruct</span>&nbsp;<span class="keyword" id="8304780">struct</span>&nbsp;<span class="op" id="8304787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8304790">a</span>&nbsp;<span class="builtintype" id="8304792">byte</span>&nbsp;<span class="comment" id="8304797">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8304822">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8304825">type</span>&nbsp;<span class="ident" id="8304830">StringStruct</span>&nbsp;<span class="keyword" id="8304843">struct</span>&nbsp;<span class="op" id="8304850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8304853">s</span>&nbsp;<span class="builtintype" id="8304855">string</span>&nbsp;<span class="comment" id="8304862">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8304887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8304890">type</span>&nbsp;<span class="ident" id="8304895">ArrayStruct</span>&nbsp;<span class="keyword" id="8304907">struct</span>&nbsp;<span class="op" id="8304914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8304917">a</span>&nbsp;<span class="op" id="8304919">[</span><span class="num" id="8304920">8192</span><span class="op" id="8304924">]</span><span class="builtintype" id="8304925">byte</span>&nbsp;<span class="comment" id="8304930">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8304955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8304958">type</span>&nbsp;<span class="ident" id="8304963">Gobber</span>&nbsp;<span class="builtintype" id="8304970">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="8304975">type</span>&nbsp;<span class="ident" id="8304980">ValueGobber</span>&nbsp;<span class="builtintype" id="8304992">string</span>&nbsp;<span class="comment" id="8304999">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8305049">type</span>&nbsp;<span class="ident" id="8305054">BinaryGobber</span>&nbsp;<span class="builtintype" id="8305067">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="8305072">type</span>&nbsp;<span class="ident" id="8305077">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="8305095">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8305103">type</span>&nbsp;<span class="ident" id="8305108">TextGobber</span>&nbsp;<span class="builtintype" id="8305119">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8305124">type</span>&nbsp;<span class="ident" id="8305129">TextValueGobber</span>&nbsp;<span class="builtintype" id="8305145">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="8305153">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8305178">func</span>&nbsp;<span class="op" id="8305183">(</span><span class="ident" id="8305184">g</span>&nbsp;<span class="op" id="8305186">*</span><span class="ident" id="8305187">ByteStruct</span><span class="op" id="8305197">)</span>&nbsp;<span class="ident" id="8305199">GobEncode</span><span class="op" id="8305208">(</span><span class="op" id="8305209">)</span>&nbsp;<span class="op" id="8305211">(</span><span class="op" id="8305212">[</span><span class="op" id="8305213">]</span><span class="builtintype" id="8305214">byte</span><span class="op" id="8305218">,</span>&nbsp;<span class="builtintype" id="8305220">error</span><span class="op" id="8305225">)</span>&nbsp;<span class="op" id="8305227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8305230">b</span>&nbsp;<span class="op" id="8305232">:=</span>&nbsp;<span class="builtinfunc" id="8305235">make</span><span class="op" id="8305239">(</span><span class="op" id="8305240">[</span><span class="op" id="8305241">]</span><span class="builtintype" id="8305242">byte</span><span class="op" id="8305246">,</span>&nbsp;<span class="num" id="8305248">3</span><span class="op" id="8305249">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8305252">b</span><span class="op" id="8305253">[</span><span class="num" id="8305254">0</span><span class="op" id="8305255">]</span>&nbsp;<span class="op" id="8305257">=</span>&nbsp;<span class="ident" id="8305259">g</span><span class="op" id="8305260">.</span><span class="ident" id="8305261">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8305264">b</span><span class="op" id="8305265">[</span><span class="num" id="8305266">1</span><span class="op" id="8305267">]</span>&nbsp;<span class="op" id="8305269">=</span>&nbsp;<span class="ident" id="8305271">g</span><span class="op" id="8305272">.</span><span class="ident" id="8305273">a</span>&nbsp;<span class="op" id="8305275">+</span>&nbsp;<span class="num" id="8305277">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8305280">b</span><span class="op" id="8305281">[</span><span class="num" id="8305282">2</span><span class="op" id="8305283">]</span>&nbsp;<span class="op" id="8305285">=</span>&nbsp;<span class="ident" id="8305287">g</span><span class="op" id="8305288">.</span><span class="ident" id="8305289">a</span>&nbsp;<span class="op" id="8305291">+</span>&nbsp;<span class="num" id="8305293">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305296">return</span>&nbsp;<span class="ident" id="8305303">b</span><span class="op" id="8305304">,</span>&nbsp;<span class="builtintype" id="8305306">nil</span><br>
<span class="lineno"></span><span class="op" id="8305310">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="8305313">func</span>&nbsp;<span class="op" id="8305318">(</span><span class="ident" id="8305319">g</span>&nbsp;<span class="op" id="8305321">*</span><span class="ident" id="8305322">ByteStruct</span><span class="op" id="8305332">)</span>&nbsp;<span class="ident" id="8305334">GobDecode</span><span class="op" id="8305343">(</span><span class="ident" id="8305344">data</span>&nbsp;<span class="op" id="8305349">[</span><span class="op" id="8305350">]</span><span class="builtintype" id="8305351">byte</span><span class="op" id="8305355">)</span>&nbsp;<span class="builtintype" id="8305357">error</span>&nbsp;<span class="op" id="8305363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305366">if</span>&nbsp;<span class="ident" id="8305369">g</span>&nbsp;<span class="op" id="8305371">==</span>&nbsp;<span class="builtintype" id="8305374">nil</span>&nbsp;<span class="op" id="8305378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305382">return</span>&nbsp;<span class="ident" id="8305389">errors</span><span class="op" id="8305395">.</span><span class="ident" id="8305396">New</span><span class="op" id="8305399">(</span><span class="string" id="8305400">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="8305414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8305417">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8305420">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305458">if</span>&nbsp;<span class="builtinfunc" id="8305461">len</span><span class="op" id="8305464">(</span><span class="ident" id="8305465">data</span><span class="op" id="8305469">)</span>&nbsp;<span class="op" id="8305471">==</span>&nbsp;<span class="num" id="8305474">0</span>&nbsp;<span class="op" id="8305476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305480">return</span>&nbsp;<span class="ident" id="8305487">io</span><span class="op" id="8305489">.</span><span class="ident" id="8305490">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8305495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8305498">g</span><span class="op" id="8305499">.</span><span class="ident" id="8305500">a</span>&nbsp;<span class="op" id="8305502">=</span>&nbsp;<span class="ident" id="8305504">data</span><span class="op" id="8305508">[</span><span class="num" id="8305509">0</span><span class="op" id="8305510">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305513">for</span>&nbsp;<span class="ident" id="8305517">i</span><span class="op" id="8305518">,</span>&nbsp;<span class="ident" id="8305520">c</span>&nbsp;<span class="op" id="8305522">:=</span>&nbsp;<span class="keyword" id="8305525">range</span>&nbsp;<span class="ident" id="8305531">data</span>&nbsp;<span class="op" id="8305536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305540">if</span>&nbsp;<span class="ident" id="8305543">c</span>&nbsp;<span class="op" id="8305545">!=</span>&nbsp;<span class="ident" id="8305548">g</span><span class="op" id="8305549">.</span><span class="ident" id="8305550">a</span><span class="op" id="8305551">+</span><span class="builtintype" id="8305552">byte</span><span class="op" id="8305556">(</span><span class="ident" id="8305557">i</span><span class="op" id="8305558">)</span>&nbsp;<span class="op" id="8305560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305565">return</span>&nbsp;<span class="ident" id="8305572">errors</span><span class="op" id="8305578">.</span><span class="ident" id="8305579">New</span><span class="op" id="8305582">(</span><span class="string" id="8305583">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="8305606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8305610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8305613">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305616">return</span>&nbsp;<span class="builtintype" id="8305623">nil</span><br>
<span class="lineno"></span><span class="op" id="8305627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8305630">func</span>&nbsp;<span class="op" id="8305635">(</span><span class="ident" id="8305636">g</span>&nbsp;<span class="op" id="8305638">*</span><span class="ident" id="8305639">StringStruct</span><span class="op" id="8305651">)</span>&nbsp;<span class="ident" id="8305653">GobEncode</span><span class="op" id="8305662">(</span><span class="op" id="8305663">)</span>&nbsp;<span class="op" id="8305665">(</span><span class="op" id="8305666">[</span><span class="op" id="8305667">]</span><span class="builtintype" id="8305668">byte</span><span class="op" id="8305672">,</span>&nbsp;<span class="builtintype" id="8305674">error</span><span class="op" id="8305679">)</span>&nbsp;<span class="op" id="8305681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305684">return</span>&nbsp;<span class="op" id="8305691">[</span><span class="op" id="8305692">]</span><span class="builtintype" id="8305693">byte</span><span class="op" id="8305697">(</span><span class="ident" id="8305698">g</span><span class="op" id="8305699">.</span><span class="ident" id="8305700">s</span><span class="op" id="8305701">)</span><span class="op" id="8305702">,</span>&nbsp;<span class="builtintype" id="8305704">nil</span><br>
<span class="lineno">75</span><span class="op" id="8305708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8305711">func</span>&nbsp;<span class="op" id="8305716">(</span><span class="ident" id="8305717">g</span>&nbsp;<span class="op" id="8305719">*</span><span class="ident" id="8305720">StringStruct</span><span class="op" id="8305732">)</span>&nbsp;<span class="ident" id="8305734">GobDecode</span><span class="op" id="8305743">(</span><span class="ident" id="8305744">data</span>&nbsp;<span class="op" id="8305749">[</span><span class="op" id="8305750">]</span><span class="builtintype" id="8305751">byte</span><span class="op" id="8305755">)</span>&nbsp;<span class="builtintype" id="8305757">error</span>&nbsp;<span class="op" id="8305763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8305766">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305804">if</span>&nbsp;<span class="builtinfunc" id="8305807">len</span><span class="op" id="8305810">(</span><span class="ident" id="8305811">data</span><span class="op" id="8305815">)</span>&nbsp;<span class="op" id="8305817">==</span>&nbsp;<span class="num" id="8305820">0</span>&nbsp;<span class="op" id="8305822">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305826">return</span>&nbsp;<span class="ident" id="8305833">io</span><span class="op" id="8305835">.</span><span class="ident" id="8305836">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8305841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8305844">a</span>&nbsp;<span class="op" id="8305846">:=</span>&nbsp;<span class="ident" id="8305849">data</span><span class="op" id="8305853">[</span><span class="num" id="8305854">0</span><span class="op" id="8305855">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305858">for</span>&nbsp;<span class="ident" id="8305862">i</span><span class="op" id="8305863">,</span>&nbsp;<span class="ident" id="8305865">c</span>&nbsp;<span class="op" id="8305867">:=</span>&nbsp;<span class="keyword" id="8305870">range</span>&nbsp;<span class="ident" id="8305876">data</span>&nbsp;<span class="op" id="8305881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305885">if</span>&nbsp;<span class="ident" id="8305888">c</span>&nbsp;<span class="op" id="8305890">!=</span>&nbsp;<span class="ident" id="8305893">a</span><span class="op" id="8305894">+</span><span class="builtintype" id="8305895">byte</span><span class="op" id="8305899">(</span><span class="ident" id="8305900">i</span><span class="op" id="8305901">)</span>&nbsp;<span class="op" id="8305903">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305908">return</span>&nbsp;<span class="ident" id="8305915">errors</span><span class="op" id="8305921">.</span><span class="ident" id="8305922">New</span><span class="op" id="8305925">(</span><span class="string" id="8305926">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="8305949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8305953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8305956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8305959">g</span><span class="op" id="8305960">.</span><span class="ident" id="8305961">s</span>&nbsp;<span class="op" id="8305963">=</span>&nbsp;<span class="builtintype" id="8305965">string</span><span class="op" id="8305971">(</span><span class="ident" id="8305972">data</span><span class="op" id="8305976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8305979">return</span>&nbsp;<span class="builtintype" id="8305986">nil</span><br>
<span class="lineno">90</span><span class="op" id="8305990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8305993">func</span>&nbsp;<span class="op" id="8305998">(</span><span class="ident" id="8305999">a</span>&nbsp;<span class="op" id="8306001">*</span><span class="ident" id="8306002">ArrayStruct</span><span class="op" id="8306013">)</span>&nbsp;<span class="ident" id="8306015">GobEncode</span><span class="op" id="8306024">(</span><span class="op" id="8306025">)</span>&nbsp;<span class="op" id="8306027">(</span><span class="op" id="8306028">[</span><span class="op" id="8306029">]</span><span class="builtintype" id="8306030">byte</span><span class="op" id="8306034">,</span>&nbsp;<span class="builtintype" id="8306036">error</span><span class="op" id="8306041">)</span>&nbsp;<span class="op" id="8306043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8306046">return</span>&nbsp;<span class="ident" id="8306053">a</span><span class="op" id="8306054">.</span><span class="ident" id="8306055">a</span><span class="op" id="8306056">[</span><span class="op" id="8306057">:</span><span class="op" id="8306058">]</span><span class="op" id="8306059">,</span>&nbsp;<span class="builtintype" id="8306061">nil</span><br>
<span class="lineno"></span><span class="op" id="8306065">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="8306068">func</span>&nbsp;<span class="op" id="8306073">(</span><span class="ident" id="8306074">a</span>&nbsp;<span class="op" id="8306076">*</span><span class="ident" id="8306077">ArrayStruct</span><span class="op" id="8306088">)</span>&nbsp;<span class="ident" id="8306090">GobDecode</span><span class="op" id="8306099">(</span><span class="ident" id="8306100">data</span>&nbsp;<span class="op" id="8306105">[</span><span class="op" id="8306106">]</span><span class="builtintype" id="8306107">byte</span><span class="op" id="8306111">)</span>&nbsp;<span class="builtintype" id="8306113">error</span>&nbsp;<span class="op" id="8306119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8306122">if</span>&nbsp;<span class="builtinfunc" id="8306125">len</span><span class="op" id="8306128">(</span><span class="ident" id="8306129">data</span><span class="op" id="8306133">)</span>&nbsp;<span class="op" id="8306135">!=</span>&nbsp;<span class="builtinfunc" id="8306138">len</span><span class="op" id="8306141">(</span><span class="ident" id="8306142">a</span><span class="op" id="8306143">.</span><span class="ident" id="8306144">a</span><span class="op" id="8306145">)</span>&nbsp;<span class="op" id="8306147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8306151">return</span>&nbsp;<span class="ident" id="8306158">errors</span><span class="op" id="8306164">.</span><span class="ident" id="8306165">New</span><span class="op" id="8306168">(</span><span class="string" id="8306169">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="8306199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8306202">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8306205">copy</span><span class="op" id="8306209">(</span><span class="ident" id="8306210">a</span><span class="op" id="8306211">.</span><span class="ident" id="8306212">a</span><span class="op" id="8306213">[</span><span class="op" id="8306214">:</span><span class="op" id="8306215">]</span><span class="op" id="8306216">,</span>&nbsp;<span class="ident" id="8306218">data</span><span class="op" id="8306222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8306225">return</span>&nbsp;<span class="builtintype" id="8306232">nil</span><br>
<span class="lineno"></span><span class="op" id="8306236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8306239">func</span>&nbsp;<span class="op" id="8306244">(</span><span class="ident" id="8306245">g</span>&nbsp;<span class="op" id="8306247">*</span><span class="ident" id="8306248">Gobber</span><span class="op" id="8306254">)</span>&nbsp;<span class="ident" id="8306256">GobEncode</span><span class="op" id="8306265">(</span><span class="op" id="8306266">)</span>&nbsp;<span class="op" id="8306268">(</span><span class="op" id="8306269">[</span><span class="op" id="8306270">]</span><span class="builtintype" id="8306271">byte</span><span class="op" id="8306275">,</span>&nbsp;<span class="builtintype" id="8306277">error</span><span class="op" id="8306282">)</span>&nbsp;<span class="op" id="8306284">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8306287">return</span>&nbsp;<span class="op" id="8306294">[</span><span class="op" id="8306295">]</span><span class="builtintype" id="8306296">byte</span><span class="op" id="8306300">(</span><span class="ident" id="8306301">fmt</span><span class="op" id="8306304">.</span><span class="ident" id="8306305">Sprintf</span><span class="op" id="8306312">(</span><span class="string" id="8306313">&#34;VALUE=%d&#34;</span><span class="op" id="8306323">,</span>&nbsp;<span class="op" id="8306325">*</span><span class="ident" id="8306326">g</span><span class="op" id="8306327">)</span><span class="op" id="8306328">)</span><span class="op" id="8306329">,</span>&nbsp;<span class="builtintype" id="8306331">nil</span><br>
<span class="lineno"></span><span class="op" id="8306335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8306338">func</span>&nbsp;<span class="op" id="8306343">(</span><span class="ident" id="8306344">g</span>&nbsp;<span class="op" id="8306346">*</span><span class="ident" id="8306347">Gobber</span><span class="op" id="8306353">)</span>&nbsp;<span class="ident" id="8306355">GobDecode</span><span class="op" id="8306364">(</span><span class="ident" id="8306365">data</span>&nbsp;<span class="op" id="8306370">[</span><span class="op" id="8306371">]</span><span class="builtintype" id="8306372">byte</span><span class="op" id="8306376">)</span>&nbsp;<span class="builtintype" id="8306378">error</span>&nbsp;<span class="op" id="8306384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8306387">_</span><span class="op" id="8306388">,</span>&nbsp;<span class="ident" id="8306390">err</span>&nbsp;<span class="op" id="8306394">:=</span>&nbsp;<span class="ident" id="8306397">fmt</span><span class="op" id="8306400">.</span><span class="ident" id="8306401">Sscanf</span><span class="op" id="8306407">(</span><span class="builtintype" id="8306408">string</span><span class="op" id="8306414">(</span><span class="ident" id="8306415">data</span><span class="op" id="8306419">)</span><span class="op" id="8306420">,</span>&nbsp;<span class="string" id="8306422">&#34;VALUE=%d&#34;</span><span class="op" id="8306432">,</span>&nbsp;<span class="op" id="8306434">(</span><span class="op" id="8306435">*</span><span class="builtintype" id="8306436">int</span><span class="op" id="8306439">)</span><span class="op" id="8306440">(</span><span class="ident" id="8306441">g</span><span class="op" id="8306442">)</span><span class="op" id="8306443">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8306446">return</span>&nbsp;<span class="ident" id="8306453">err</span><br>
<span class="lineno"></span><span class="op" id="8306457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8306460">func</span>&nbsp;<span class="op" id="8306465">(</span><span class="ident" id="8306466">g</span>&nbsp;<span class="op" id="8306468">*</span><span class="ident" id="8306469">BinaryGobber</span><span class="op" id="8306481">)</span>&nbsp;<span class="ident" id="8306483">MarshalBinary</span><span class="op" id="8306496">(</span><span class="op" id="8306497">)</span>&nbsp;<span class="op" id="8306499">(</span><span class="op" id="8306500">[</span><span class="op" id="8306501">]</span><span class="builtintype" id="8306502">byte</span><span class="op" id="8306506">,</span>&nbsp;<span class="builtintype" id="8306508">error</span><span class="op" id="8306513">)</span>&nbsp;<span class="op" id="8306515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8306518">return</span>&nbsp;<span class="op" id="8306525">[</span><span class="op" id="8306526">]</span><span class="builtintype" id="8306527">byte</span><span class="op" id="8306531">(</span><span class="ident" id="8306532">fmt</span><span class="op" id="8306535">.</span><span class="ident" id="8306536">Sprintf</span><span class="op" id="8306543">(</span><span class="string" id="8306544">&#34;VALUE=%d&#34;</span><span class="op" id="8306554">,</span>&nbsp;<span class="op" id="8306556">*</span><span class="ident" id="8306557">g</span><span class="op" id="8306558">)</span><span class="op" id="8306559">)</span><span class="op" id="8306560">,</span>&nbsp;<span class="builtintype" id="8306562">nil</span><br>
<span class="lineno">115</span><span class="op" id="8306566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8306569">func</span>&nbsp;<span class="op" id="8306574">(</span><span class="ident" id="8306575">g</span>&nbsp;<span class="op" id="8306577">*</span><span class="ident" id="8306578">BinaryGobber</span><span class="op" id="8306590">)</span>&nbsp;<span class="ident" id="8306592">UnmarshalBinary</span><span class="op" id="8306607">(</span><span class="ident" id="8306608">data</span>&nbsp;<span class="op" id="8306613">[</span><span class="op" id="8306614">]</span><span class="builtintype" id="8306615">byte</span><span class="op" id="8306619">)</span>&nbsp;<span class="builtintype" id="8306621">error</span>&nbsp;<span class="op" id="8306627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8306630">_</span><span class="op" id="8306631">,</span>&nbsp;<span class="ident" id="8306633">err</span>&nbsp;<span class="op" id="8306637">:=</span>&nbsp;<span class="ident" id="8306640">fmt</span><span class="op" id="8306643">.</span><span class="ident" id="8306644">Sscanf</span><span class="op" id="8306650">(</span><span class="builtintype" id="8306651">string</span><span class="op" id="8306657">(</span><span class="ident" id="8306658">data</span><span class="op" id="8306662">)</span><span class="op" id="8306663">,</span>&nbsp;<span class="string" id="8306665">&#34;VALUE=%d&#34;</span><span class="op" id="8306675">,</span>&nbsp;<span class="op" id="8306677">(</span><span class="op" id="8306678">*</span><span class="builtintype" id="8306679">int</span><span class="op" id="8306682">)</span><span class="op" id="8306683">(</span><span class="ident" id="8306684">g</span><span class="op" id="8306685">)</span><span class="op" id="8306686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8306689">return</span>&nbsp;<span class="ident" id="8306696">err</span><br>
<span class="lineno">120</span><span class="op" id="8306700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8306703">func</span>&nbsp;<span class="op" id="8306708">(</span><span class="ident" id="8306709">g</span>&nbsp;<span class="op" id="8306711">*</span><span class="ident" id="8306712">TextGobber</span><span class="op" id="8306722">)</span>&nbsp;<span class="ident" id="8306724">MarshalText</span><span class="op" id="8306735">(</span><span class="op" id="8306736">)</span>&nbsp;<span class="op" id="8306738">(</span><span class="op" id="8306739">[</span><span class="op" id="8306740">]</span><span class="builtintype" id="8306741">byte</span><span class="op" id="8306745">,</span>&nbsp;<span class="builtintype" id="8306747">error</span><span class="op" id="8306752">)</span>&nbsp;<span class="op" id="8306754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8306757">return</span>&nbsp;<span class="op" id="8306764">[</span><span class="op" id="8306765">]</span><span class="builtintype" id="8306766">byte</span><span class="op" id="8306770">(</span><span class="ident" id="8306771">fmt</span><span class="op" id="8306774">.</span><span class="ident" id="8306775">Sprintf</span><span class="op" id="8306782">(</span><span class="string" id="8306783">&#34;VALUE=%d&#34;</span><span class="op" id="8306793">,</span>&nbsp;<span class="op" id="8306795">*</span><span class="ident" id="8306796">g</span><span class="op" id="8306797">)</span><span class="op" id="8306798">)</span><span class="op" id="8306799">,</span>&nbsp;<span class="builtintype" id="8306801">nil</span><br>
<span class="lineno"></span><span class="op" id="8306805">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="8306808">func</span>&nbsp;<span class="op" id="8306813">(</span><span class="ident" id="8306814">g</span>&nbsp;<span class="op" id="8306816">*</span><span class="ident" id="8306817">TextGobber</span><span class="op" id="8306827">)</span>&nbsp;<span class="ident" id="8306829">UnmarshalText</span><span class="op" id="8306842">(</span><span class="ident" id="8306843">data</span>&nbsp;<span class="op" id="8306848">[</span><span class="op" id="8306849">]</span><span class="builtintype" id="8306850">byte</span><span class="op" id="8306854">)</span>&nbsp;<span class="builtintype" id="8306856">error</span>&nbsp;<span class="op" id="8306862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8306865">_</span><span class="op" id="8306866">,</span>&nbsp;<span class="ident" id="8306868">err</span>&nbsp;<span class="op" id="8306872">:=</span>&nbsp;<span class="ident" id="8306875">fmt</span><span class="op" id="8306878">.</span><span class="ident" id="8306879">Sscanf</span><span class="op" id="8306885">(</span><span class="builtintype" id="8306886">string</span><span class="op" id="8306892">(</span><span class="ident" id="8306893">data</span><span class="op" id="8306897">)</span><span class="op" id="8306898">,</span>&nbsp;<span class="string" id="8306900">&#34;VALUE=%d&#34;</span><span class="op" id="8306910">,</span>&nbsp;<span class="op" id="8306912">(</span><span class="op" id="8306913">*</span><span class="builtintype" id="8306914">int</span><span class="op" id="8306917">)</span><span class="op" id="8306918">(</span><span class="ident" id="8306919">g</span><span class="op" id="8306920">)</span><span class="op" id="8306921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8306924">return</span>&nbsp;<span class="ident" id="8306931">err</span><br>
<span class="lineno"></span><span class="op" id="8306935">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="8306938">func</span>&nbsp;<span class="op" id="8306943">(</span><span class="ident" id="8306944">v</span>&nbsp;<span class="ident" id="8306946">ValueGobber</span><span class="op" id="8306957">)</span>&nbsp;<span class="ident" id="8306959">GobEncode</span><span class="op" id="8306968">(</span><span class="op" id="8306969">)</span>&nbsp;<span class="op" id="8306971">(</span><span class="op" id="8306972">[</span><span class="op" id="8306973">]</span><span class="builtintype" id="8306974">byte</span><span class="op" id="8306978">,</span>&nbsp;<span class="builtintype" id="8306980">error</span><span class="op" id="8306985">)</span>&nbsp;<span class="op" id="8306987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8306990">return</span>&nbsp;<span class="op" id="8306997">[</span><span class="op" id="8306998">]</span><span class="builtintype" id="8306999">byte</span><span class="op" id="8307003">(</span><span class="ident" id="8307004">fmt</span><span class="op" id="8307007">.</span><span class="ident" id="8307008">Sprintf</span><span class="op" id="8307015">(</span><span class="string" id="8307016">&#34;VALUE=%s&#34;</span><span class="op" id="8307026">,</span>&nbsp;<span class="ident" id="8307028">v</span><span class="op" id="8307029">)</span><span class="op" id="8307030">)</span><span class="op" id="8307031">,</span>&nbsp;<span class="builtintype" id="8307033">nil</span><br>
<span class="lineno"></span><span class="op" id="8307037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8307040">func</span>&nbsp;<span class="op" id="8307045">(</span><span class="ident" id="8307046">v</span>&nbsp;<span class="op" id="8307048">*</span><span class="ident" id="8307049">ValueGobber</span><span class="op" id="8307060">)</span>&nbsp;<span class="ident" id="8307062">GobDecode</span><span class="op" id="8307071">(</span><span class="ident" id="8307072">data</span>&nbsp;<span class="op" id="8307077">[</span><span class="op" id="8307078">]</span><span class="builtintype" id="8307079">byte</span><span class="op" id="8307083">)</span>&nbsp;<span class="builtintype" id="8307085">error</span>&nbsp;<span class="op" id="8307091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8307094">_</span><span class="op" id="8307095">,</span>&nbsp;<span class="ident" id="8307097">err</span>&nbsp;<span class="op" id="8307101">:=</span>&nbsp;<span class="ident" id="8307104">fmt</span><span class="op" id="8307107">.</span><span class="ident" id="8307108">Sscanf</span><span class="op" id="8307114">(</span><span class="builtintype" id="8307115">string</span><span class="op" id="8307121">(</span><span class="ident" id="8307122">data</span><span class="op" id="8307126">)</span><span class="op" id="8307127">,</span>&nbsp;<span class="string" id="8307129">&#34;VALUE=%s&#34;</span><span class="op" id="8307139">,</span>&nbsp;<span class="op" id="8307141">(</span><span class="op" id="8307142">*</span><span class="builtintype" id="8307143">string</span><span class="op" id="8307149">)</span><span class="op" id="8307150">(</span><span class="ident" id="8307151">v</span><span class="op" id="8307152">)</span><span class="op" id="8307153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8307156">return</span>&nbsp;<span class="ident" id="8307163">err</span><br>
<span class="lineno"></span><span class="op" id="8307167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="8307170">func</span>&nbsp;<span class="op" id="8307175">(</span><span class="ident" id="8307176">v</span>&nbsp;<span class="ident" id="8307178">BinaryValueGobber</span><span class="op" id="8307195">)</span>&nbsp;<span class="ident" id="8307197">MarshalBinary</span><span class="op" id="8307210">(</span><span class="op" id="8307211">)</span>&nbsp;<span class="op" id="8307213">(</span><span class="op" id="8307214">[</span><span class="op" id="8307215">]</span><span class="builtintype" id="8307216">byte</span><span class="op" id="8307220">,</span>&nbsp;<span class="builtintype" id="8307222">error</span><span class="op" id="8307227">)</span>&nbsp;<span class="op" id="8307229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8307232">return</span>&nbsp;<span class="op" id="8307239">[</span><span class="op" id="8307240">]</span><span class="builtintype" id="8307241">byte</span><span class="op" id="8307245">(</span><span class="ident" id="8307246">fmt</span><span class="op" id="8307249">.</span><span class="ident" id="8307250">Sprintf</span><span class="op" id="8307257">(</span><span class="string" id="8307258">&#34;VALUE=%s&#34;</span><span class="op" id="8307268">,</span>&nbsp;<span class="ident" id="8307270">v</span><span class="op" id="8307271">)</span><span class="op" id="8307272">)</span><span class="op" id="8307273">,</span>&nbsp;<span class="builtintype" id="8307275">nil</span><br>
<span class="lineno"></span><span class="op" id="8307279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8307282">func</span>&nbsp;<span class="op" id="8307287">(</span><span class="ident" id="8307288">v</span>&nbsp;<span class="op" id="8307290">*</span><span class="ident" id="8307291">BinaryValueGobber</span><span class="op" id="8307308">)</span>&nbsp;<span class="ident" id="8307310">UnmarshalBinary</span><span class="op" id="8307325">(</span><span class="ident" id="8307326">data</span>&nbsp;<span class="op" id="8307331">[</span><span class="op" id="8307332">]</span><span class="builtintype" id="8307333">byte</span><span class="op" id="8307337">)</span>&nbsp;<span class="builtintype" id="8307339">error</span>&nbsp;<span class="op" id="8307345">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8307348">_</span><span class="op" id="8307349">,</span>&nbsp;<span class="ident" id="8307351">err</span>&nbsp;<span class="op" id="8307355">:=</span>&nbsp;<span class="ident" id="8307358">fmt</span><span class="op" id="8307361">.</span><span class="ident" id="8307362">Sscanf</span><span class="op" id="8307368">(</span><span class="builtintype" id="8307369">string</span><span class="op" id="8307375">(</span><span class="ident" id="8307376">data</span><span class="op" id="8307380">)</span><span class="op" id="8307381">,</span>&nbsp;<span class="string" id="8307383">&#34;VALUE=%s&#34;</span><span class="op" id="8307393">,</span>&nbsp;<span class="op" id="8307395">(</span><span class="op" id="8307396">*</span><span class="builtintype" id="8307397">string</span><span class="op" id="8307403">)</span><span class="op" id="8307404">(</span><span class="ident" id="8307405">v</span><span class="op" id="8307406">)</span><span class="op" id="8307407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8307410">return</span>&nbsp;<span class="ident" id="8307417">err</span><br>
<span class="lineno"></span><span class="op" id="8307421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8307424">func</span>&nbsp;<span class="op" id="8307429">(</span><span class="ident" id="8307430">v</span>&nbsp;<span class="ident" id="8307432">TextValueGobber</span><span class="op" id="8307447">)</span>&nbsp;<span class="ident" id="8307449">MarshalText</span><span class="op" id="8307460">(</span><span class="op" id="8307461">)</span>&nbsp;<span class="op" id="8307463">(</span><span class="op" id="8307464">[</span><span class="op" id="8307465">]</span><span class="builtintype" id="8307466">byte</span><span class="op" id="8307470">,</span>&nbsp;<span class="builtintype" id="8307472">error</span><span class="op" id="8307477">)</span>&nbsp;<span class="op" id="8307479">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8307482">return</span>&nbsp;<span class="op" id="8307489">[</span><span class="op" id="8307490">]</span><span class="builtintype" id="8307491">byte</span><span class="op" id="8307495">(</span><span class="ident" id="8307496">fmt</span><span class="op" id="8307499">.</span><span class="ident" id="8307500">Sprintf</span><span class="op" id="8307507">(</span><span class="string" id="8307508">&#34;VALUE=%s&#34;</span><span class="op" id="8307518">,</span>&nbsp;<span class="ident" id="8307520">v</span><span class="op" id="8307521">)</span><span class="op" id="8307522">)</span><span class="op" id="8307523">,</span>&nbsp;<span class="builtintype" id="8307525">nil</span><br>
<span class="lineno"></span><span class="op" id="8307529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8307532">func</span>&nbsp;<span class="op" id="8307537">(</span><span class="ident" id="8307538">v</span>&nbsp;<span class="op" id="8307540">*</span><span class="ident" id="8307541">TextValueGobber</span><span class="op" id="8307556">)</span>&nbsp;<span class="ident" id="8307558">UnmarshalText</span><span class="op" id="8307571">(</span><span class="ident" id="8307572">data</span>&nbsp;<span class="op" id="8307577">[</span><span class="op" id="8307578">]</span><span class="builtintype" id="8307579">byte</span><span class="op" id="8307583">)</span>&nbsp;<span class="builtintype" id="8307585">error</span>&nbsp;<span class="op" id="8307591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8307594">_</span><span class="op" id="8307595">,</span>&nbsp;<span class="ident" id="8307597">err</span>&nbsp;<span class="op" id="8307601">:=</span>&nbsp;<span class="ident" id="8307604">fmt</span><span class="op" id="8307607">.</span><span class="ident" id="8307608">Sscanf</span><span class="op" id="8307614">(</span><span class="builtintype" id="8307615">string</span><span class="op" id="8307621">(</span><span class="ident" id="8307622">data</span><span class="op" id="8307626">)</span><span class="op" id="8307627">,</span>&nbsp;<span class="string" id="8307629">&#34;VALUE=%s&#34;</span><span class="op" id="8307639">,</span>&nbsp;<span class="op" id="8307641">(</span><span class="op" id="8307642">*</span><span class="builtintype" id="8307643">string</span><span class="op" id="8307649">)</span><span class="op" id="8307650">(</span><span class="ident" id="8307651">v</span><span class="op" id="8307652">)</span><span class="op" id="8307653">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8307656">return</span>&nbsp;<span class="ident" id="8307663">err</span><br>
<span class="lineno"></span><span class="op" id="8307667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8307670">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="8307716">type</span>&nbsp;<span class="ident" id="8307721">GobTest0</span>&nbsp;<span class="keyword" id="8307730">struct</span>&nbsp;<span class="op" id="8307737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8307740">X</span>&nbsp;<span class="builtintype" id="8307742">int</span>&nbsp;<span class="comment" id="8307746">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8307803">G</span>&nbsp;<span class="op" id="8307805">*</span><span class="ident" id="8307806">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="8307817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="8307820">type</span>&nbsp;<span class="ident" id="8307825">GobTest1</span>&nbsp;<span class="keyword" id="8307834">struct</span>&nbsp;<span class="op" id="8307841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8307844">X</span>&nbsp;<span class="builtintype" id="8307846">int</span>&nbsp;<span class="comment" id="8307850">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8307907">G</span>&nbsp;<span class="op" id="8307909">*</span><span class="ident" id="8307910">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="8307923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="8307926">type</span>&nbsp;<span class="ident" id="8307931">GobTest2</span>&nbsp;<span class="keyword" id="8307940">struct</span>&nbsp;<span class="op" id="8307947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8307950">X</span>&nbsp;<span class="builtintype" id="8307952">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8307959">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308016">G</span>&nbsp;<span class="builtintype" id="8308018">string</span>&nbsp;<span class="comment" id="8308025">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="8308069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="8308072">type</span>&nbsp;<span class="ident" id="8308077">GobTest3</span>&nbsp;<span class="keyword" id="8308086">struct</span>&nbsp;<span class="op" id="8308093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308096">X</span>&nbsp;<span class="builtintype" id="8308098">int</span>&nbsp;<span class="comment" id="8308102">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308159">G</span>&nbsp;<span class="op" id="8308161">*</span><span class="ident" id="8308162">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308170">B</span>&nbsp;<span class="op" id="8308172">*</span><span class="ident" id="8308173">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308187">T</span>&nbsp;<span class="op" id="8308189">*</span><span class="ident" id="8308190">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="8308201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8308204">type</span>&nbsp;<span class="ident" id="8308209">GobTest4</span>&nbsp;<span class="keyword" id="8308218">struct</span>&nbsp;<span class="op" id="8308225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308228">X</span>&nbsp;&nbsp;<span class="builtintype" id="8308231">int</span>&nbsp;<span class="comment" id="8308235">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308292">V</span>&nbsp;&nbsp;<span class="ident" id="8308295">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308308">BV</span>&nbsp;<span class="ident" id="8308311">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308330">TV</span>&nbsp;<span class="ident" id="8308333">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8308349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8308352">type</span>&nbsp;<span class="ident" id="8308357">GobTest5</span>&nbsp;<span class="keyword" id="8308366">struct</span>&nbsp;<span class="op" id="8308373">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308376">X</span>&nbsp;&nbsp;<span class="builtintype" id="8308379">int</span>&nbsp;<span class="comment" id="8308383">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308440">V</span>&nbsp;&nbsp;<span class="op" id="8308443">*</span><span class="ident" id="8308444">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308457">BV</span>&nbsp;<span class="op" id="8308460">*</span><span class="ident" id="8308461">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308480">TV</span>&nbsp;<span class="op" id="8308483">*</span><span class="ident" id="8308484">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8308500">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="8308503">type</span>&nbsp;<span class="ident" id="8308508">GobTest6</span>&nbsp;<span class="keyword" id="8308517">struct</span>&nbsp;<span class="op" id="8308524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308527">X</span>&nbsp;&nbsp;<span class="builtintype" id="8308530">int</span>&nbsp;<span class="comment" id="8308534">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308591">V</span>&nbsp;&nbsp;<span class="ident" id="8308594">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308607">W</span>&nbsp;&nbsp;<span class="op" id="8308610">*</span><span class="ident" id="8308611">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308624">BV</span>&nbsp;<span class="ident" id="8308627">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308646">BW</span>&nbsp;<span class="op" id="8308649">*</span><span class="ident" id="8308650">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308669">TV</span>&nbsp;<span class="ident" id="8308672">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308689">TW</span>&nbsp;<span class="op" id="8308692">*</span><span class="ident" id="8308693">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8308709">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="8308712">type</span>&nbsp;<span class="ident" id="8308717">GobTest7</span>&nbsp;<span class="keyword" id="8308726">struct</span>&nbsp;<span class="op" id="8308733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308736">X</span>&nbsp;&nbsp;<span class="builtintype" id="8308739">int</span>&nbsp;<span class="comment" id="8308743">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308800">V</span>&nbsp;&nbsp;<span class="op" id="8308803">*</span><span class="ident" id="8308804">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308817">W</span>&nbsp;&nbsp;<span class="ident" id="8308820">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308833">BV</span>&nbsp;<span class="op" id="8308836">*</span><span class="ident" id="8308837">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308856">BW</span>&nbsp;<span class="ident" id="8308859">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308878">TV</span>&nbsp;<span class="op" id="8308881">*</span><span class="ident" id="8308882">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308899">TW</span>&nbsp;<span class="ident" id="8308902">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8308918">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="8308921">type</span>&nbsp;<span class="ident" id="8308926">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="8308947">struct</span>&nbsp;<span class="op" id="8308954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8308957">X</span>&nbsp;<span class="builtintype" id="8308959">int</span>&nbsp;<span class="comment" id="8308963">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="8309019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="8309022">type</span>&nbsp;<span class="ident" id="8309027">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="8309046">struct</span>&nbsp;<span class="op" id="8309053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309056">X</span>&nbsp;<span class="builtintype" id="8309058">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8309071">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309128">G</span>&nbsp;<span class="ident" id="8309130">StringStruct</span>&nbsp;<span class="comment" id="8309143">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="8309161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="8309164">type</span>&nbsp;<span class="ident" id="8309169">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="8309191">struct</span>&nbsp;<span class="op" id="8309198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309201">X</span>&nbsp;<span class="builtintype" id="8309203">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8309219">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309276">G</span>&nbsp;<span class="op" id="8309278">*</span><span class="op" id="8309279">*</span><span class="op" id="8309280">*</span><span class="ident" id="8309281">StringStruct</span>&nbsp;<span class="comment" id="8309294">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="8309327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="8309330">type</span>&nbsp;<span class="ident" id="8309335">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="8309354">struct</span>&nbsp;<span class="op" id="8309361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309364">X</span>&nbsp;<span class="builtintype" id="8309366">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8309378">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309435">A</span>&nbsp;<span class="ident" id="8309437">ArrayStruct</span>&nbsp;<span class="comment" id="8309449">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="8309467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="8309470">type</span>&nbsp;<span class="ident" id="8309475">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="8309502">struct</span>&nbsp;<span class="op" id="8309509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309512">X</span>&nbsp;<span class="builtintype" id="8309514">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8309529">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309586">A</span>&nbsp;<span class="op" id="8309588">*</span><span class="op" id="8309589">*</span><span class="op" id="8309590">*</span><span class="ident" id="8309591">ArrayStruct</span>&nbsp;<span class="comment" id="8309603">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="8309640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8309643">func</span>&nbsp;<span class="ident" id="8309648">TestGobEncoderField</span><span class="op" id="8309667">(</span><span class="ident" id="8309668">t</span>&nbsp;<span class="op" id="8309670">*</span><span class="ident" id="8309671">testing</span><span class="op" id="8309678">.</span><span class="ident" id="8309679">T</span><span class="op" id="8309680">)</span>&nbsp;<span class="op" id="8309682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309685">b</span>&nbsp;<span class="op" id="8309687">:=</span>&nbsp;<span class="builtinfunc" id="8309690">new</span><span class="op" id="8309693">(</span><span class="ident" id="8309694">bytes</span><span class="op" id="8309699">.</span><span class="ident" id="8309700">Buffer</span><span class="op" id="8309706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8309709">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309747">enc</span>&nbsp;<span class="op" id="8309751">:=</span>&nbsp;<span class="ident" id="8309754">NewEncoder</span><span class="op" id="8309764">(</span><span class="ident" id="8309765">b</span><span class="op" id="8309766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309769">err</span>&nbsp;<span class="op" id="8309773">:=</span>&nbsp;<span class="ident" id="8309776">enc</span><span class="op" id="8309779">.</span><span class="ident" id="8309780">Encode</span><span class="op" id="8309786">(</span><span class="ident" id="8309787">GobTest0</span><span class="op" id="8309795">{</span><span class="num" id="8309796">17</span><span class="op" id="8309798">,</span>&nbsp;<span class="op" id="8309800">&amp;</span><span class="ident" id="8309801">ByteStruct</span><span class="op" id="8309811">{</span><span class="string" id="8309812">&#39;A&#39;</span><span class="op" id="8309815">}</span><span class="op" id="8309816">}</span><span class="op" id="8309817">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309820">if</span>&nbsp;<span class="ident" id="8309823">err</span>&nbsp;<span class="op" id="8309827">!=</span>&nbsp;<span class="builtintype" id="8309830">nil</span>&nbsp;<span class="op" id="8309834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309838">t</span><span class="op" id="8309839">.</span><span class="ident" id="8309840">Fatal</span><span class="op" id="8309845">(</span><span class="string" id="8309846">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8309861">,</span>&nbsp;<span class="ident" id="8309863">err</span><span class="op" id="8309866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8309869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309872">dec</span>&nbsp;<span class="op" id="8309876">:=</span>&nbsp;<span class="ident" id="8309879">NewDecoder</span><span class="op" id="8309889">(</span><span class="ident" id="8309890">b</span><span class="op" id="8309891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309894">x</span>&nbsp;<span class="op" id="8309896">:=</span>&nbsp;<span class="builtinfunc" id="8309899">new</span><span class="op" id="8309902">(</span><span class="ident" id="8309903">GobTest0</span><span class="op" id="8309911">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309914">err</span>&nbsp;<span class="op" id="8309918">=</span>&nbsp;<span class="ident" id="8309920">dec</span><span class="op" id="8309923">.</span><span class="ident" id="8309924">Decode</span><span class="op" id="8309930">(</span><span class="ident" id="8309931">x</span><span class="op" id="8309932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309935">if</span>&nbsp;<span class="ident" id="8309938">err</span>&nbsp;<span class="op" id="8309942">!=</span>&nbsp;<span class="builtintype" id="8309945">nil</span>&nbsp;<span class="op" id="8309949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8309953">t</span><span class="op" id="8309954">.</span><span class="ident" id="8309955">Fatal</span><span class="op" id="8309960">(</span><span class="string" id="8309961">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8309976">,</span>&nbsp;<span class="ident" id="8309978">err</span><span class="op" id="8309981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8309984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8309987">if</span>&nbsp;<span class="ident" id="8309990">x</span><span class="op" id="8309991">.</span><span class="ident" id="8309992">G</span><span class="op" id="8309993">.</span><span class="ident" id="8309994">a</span>&nbsp;<span class="op" id="8309996">!=</span>&nbsp;<span class="string" id="8309999">&#39;A&#39;</span>&nbsp;<span class="op" id="8310003">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310007">t</span><span class="op" id="8310008">.</span><span class="ident" id="8310009">Errorf</span><span class="op" id="8310015">(</span><span class="string" id="8310016">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8310037">,</span>&nbsp;<span class="ident" id="8310039">x</span><span class="op" id="8310040">.</span><span class="ident" id="8310041">G</span><span class="op" id="8310042">.</span><span class="ident" id="8310043">a</span><span class="op" id="8310044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8310047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8310050">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310090">b</span><span class="op" id="8310091">.</span><span class="ident" id="8310092">Reset</span><span class="op" id="8310097">(</span><span class="op" id="8310098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310101">gobber</span>&nbsp;<span class="op" id="8310108">:=</span>&nbsp;<span class="ident" id="8310111">Gobber</span><span class="op" id="8310117">(</span><span class="num" id="8310118">23</span><span class="op" id="8310120">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310123">bgobber</span>&nbsp;<span class="op" id="8310131">:=</span>&nbsp;<span class="ident" id="8310134">BinaryGobber</span><span class="op" id="8310146">(</span><span class="num" id="8310147">24</span><span class="op" id="8310149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310152">tgobber</span>&nbsp;<span class="op" id="8310160">:=</span>&nbsp;<span class="ident" id="8310163">TextGobber</span><span class="op" id="8310173">(</span><span class="num" id="8310174">25</span><span class="op" id="8310176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310179">err</span>&nbsp;<span class="op" id="8310183">=</span>&nbsp;<span class="ident" id="8310185">enc</span><span class="op" id="8310188">.</span><span class="ident" id="8310189">Encode</span><span class="op" id="8310195">(</span><span class="ident" id="8310196">GobTest3</span><span class="op" id="8310204">{</span><span class="num" id="8310205">17</span><span class="op" id="8310207">,</span>&nbsp;<span class="op" id="8310209">&amp;</span><span class="ident" id="8310210">gobber</span><span class="op" id="8310216">,</span>&nbsp;<span class="op" id="8310218">&amp;</span><span class="ident" id="8310219">bgobber</span><span class="op" id="8310226">,</span>&nbsp;<span class="op" id="8310228">&amp;</span><span class="ident" id="8310229">tgobber</span><span class="op" id="8310236">}</span><span class="op" id="8310237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8310240">if</span>&nbsp;<span class="ident" id="8310243">err</span>&nbsp;<span class="op" id="8310247">!=</span>&nbsp;<span class="builtintype" id="8310250">nil</span>&nbsp;<span class="op" id="8310254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310258">t</span><span class="op" id="8310259">.</span><span class="ident" id="8310260">Fatal</span><span class="op" id="8310265">(</span><span class="string" id="8310266">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8310281">,</span>&nbsp;<span class="ident" id="8310283">err</span><span class="op" id="8310286">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8310289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310292">y</span>&nbsp;<span class="op" id="8310294">:=</span>&nbsp;<span class="builtinfunc" id="8310297">new</span><span class="op" id="8310300">(</span><span class="ident" id="8310301">GobTest3</span><span class="op" id="8310309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310312">err</span>&nbsp;<span class="op" id="8310316">=</span>&nbsp;<span class="ident" id="8310318">dec</span><span class="op" id="8310321">.</span><span class="ident" id="8310322">Decode</span><span class="op" id="8310328">(</span><span class="ident" id="8310329">y</span><span class="op" id="8310330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8310333">if</span>&nbsp;<span class="ident" id="8310336">err</span>&nbsp;<span class="op" id="8310340">!=</span>&nbsp;<span class="builtintype" id="8310343">nil</span>&nbsp;<span class="op" id="8310347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310351">t</span><span class="op" id="8310352">.</span><span class="ident" id="8310353">Fatal</span><span class="op" id="8310358">(</span><span class="string" id="8310359">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8310374">,</span>&nbsp;<span class="ident" id="8310376">err</span><span class="op" id="8310379">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8310382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8310385">if</span>&nbsp;<span class="op" id="8310388">*</span><span class="ident" id="8310389">y</span><span class="op" id="8310390">.</span><span class="ident" id="8310391">G</span>&nbsp;<span class="op" id="8310393">!=</span>&nbsp;<span class="num" id="8310396">23</span>&nbsp;<span class="op" id="8310399">||</span>&nbsp;<span class="op" id="8310402">*</span><span class="ident" id="8310403">y</span><span class="op" id="8310404">.</span><span class="ident" id="8310405">B</span>&nbsp;<span class="op" id="8310407">!=</span>&nbsp;<span class="num" id="8310410">24</span>&nbsp;<span class="op" id="8310413">||</span>&nbsp;<span class="op" id="8310416">*</span><span class="ident" id="8310417">y</span><span class="op" id="8310418">.</span><span class="ident" id="8310419">T</span>&nbsp;<span class="op" id="8310421">!=</span>&nbsp;<span class="num" id="8310424">25</span>&nbsp;<span class="op" id="8310427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310431">t</span><span class="op" id="8310432">.</span><span class="ident" id="8310433">Errorf</span><span class="op" id="8310439">(</span><span class="string" id="8310440">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8310461">,</span>&nbsp;<span class="op" id="8310463">*</span><span class="ident" id="8310464">y</span><span class="op" id="8310465">.</span><span class="ident" id="8310466">G</span><span class="op" id="8310467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8310470">}</span><br>
<span class="lineno"></span><span class="op" id="8310472">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="8310475">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="8310542">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8310585">func</span>&nbsp;<span class="ident" id="8310590">TestGobEncoderValueField</span><span class="op" id="8310614">(</span><span class="ident" id="8310615">t</span>&nbsp;<span class="op" id="8310617">*</span><span class="ident" id="8310618">testing</span><span class="op" id="8310625">.</span><span class="ident" id="8310626">T</span><span class="op" id="8310627">)</span>&nbsp;<span class="op" id="8310629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310632">b</span>&nbsp;<span class="op" id="8310634">:=</span>&nbsp;<span class="builtinfunc" id="8310637">new</span><span class="op" id="8310640">(</span><span class="ident" id="8310641">bytes</span><span class="op" id="8310646">.</span><span class="ident" id="8310647">Buffer</span><span class="op" id="8310653">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8310656">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310694">enc</span>&nbsp;<span class="op" id="8310698">:=</span>&nbsp;<span class="ident" id="8310701">NewEncoder</span><span class="op" id="8310711">(</span><span class="ident" id="8310712">b</span><span class="op" id="8310713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310716">err</span>&nbsp;<span class="op" id="8310720">:=</span>&nbsp;<span class="ident" id="8310723">enc</span><span class="op" id="8310726">.</span><span class="ident" id="8310727">Encode</span><span class="op" id="8310733">(</span><span class="op" id="8310734">&amp;</span><span class="ident" id="8310735">GobTestValueEncDec</span><span class="op" id="8310753">{</span><span class="num" id="8310754">17</span><span class="op" id="8310756">,</span>&nbsp;<span class="ident" id="8310758">StringStruct</span><span class="op" id="8310770">{</span><span class="string" id="8310771">&#34;HIJKL&#34;</span><span class="op" id="8310778">}</span><span class="op" id="8310779">}</span><span class="op" id="8310780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8310783">if</span>&nbsp;<span class="ident" id="8310786">err</span>&nbsp;<span class="op" id="8310790">!=</span>&nbsp;<span class="builtintype" id="8310793">nil</span>&nbsp;<span class="op" id="8310797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310801">t</span><span class="op" id="8310802">.</span><span class="ident" id="8310803">Fatal</span><span class="op" id="8310808">(</span><span class="string" id="8310809">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8310824">,</span>&nbsp;<span class="ident" id="8310826">err</span><span class="op" id="8310829">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8310832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310835">dec</span>&nbsp;<span class="op" id="8310839">:=</span>&nbsp;<span class="ident" id="8310842">NewDecoder</span><span class="op" id="8310852">(</span><span class="ident" id="8310853">b</span><span class="op" id="8310854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310857">x</span>&nbsp;<span class="op" id="8310859">:=</span>&nbsp;<span class="builtinfunc" id="8310862">new</span><span class="op" id="8310865">(</span><span class="ident" id="8310866">GobTestValueEncDec</span><span class="op" id="8310884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310887">err</span>&nbsp;<span class="op" id="8310891">=</span>&nbsp;<span class="ident" id="8310893">dec</span><span class="op" id="8310896">.</span><span class="ident" id="8310897">Decode</span><span class="op" id="8310903">(</span><span class="ident" id="8310904">x</span><span class="op" id="8310905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8310908">if</span>&nbsp;<span class="ident" id="8310911">err</span>&nbsp;<span class="op" id="8310915">!=</span>&nbsp;<span class="builtintype" id="8310918">nil</span>&nbsp;<span class="op" id="8310922">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310926">t</span><span class="op" id="8310927">.</span><span class="ident" id="8310928">Fatal</span><span class="op" id="8310933">(</span><span class="string" id="8310934">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8310949">,</span>&nbsp;<span class="ident" id="8310951">err</span><span class="op" id="8310954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8310957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8310960">if</span>&nbsp;<span class="ident" id="8310963">x</span><span class="op" id="8310964">.</span><span class="ident" id="8310965">G</span><span class="op" id="8310966">.</span><span class="ident" id="8310967">s</span>&nbsp;<span class="op" id="8310969">!=</span>&nbsp;<span class="string" id="8310972">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="8310980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8310984">t</span><span class="op" id="8310985">.</span><span class="ident" id="8310986">Errorf</span><span class="op" id="8310992">(</span><span class="string" id="8310993">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8311018">,</span>&nbsp;<span class="ident" id="8311020">x</span><span class="op" id="8311021">.</span><span class="ident" id="8311022">G</span><span class="op" id="8311023">.</span><span class="ident" id="8311024">s</span><span class="op" id="8311025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8311028">}</span><br>
<span class="lineno">295</span><span class="op" id="8311030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8311033">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="8311086">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="8311122">func</span>&nbsp;<span class="ident" id="8311127">TestGobEncoderIndirectField</span><span class="op" id="8311154">(</span><span class="ident" id="8311155">t</span>&nbsp;<span class="op" id="8311157">*</span><span class="ident" id="8311158">testing</span><span class="op" id="8311165">.</span><span class="ident" id="8311166">T</span><span class="op" id="8311167">)</span>&nbsp;<span class="op" id="8311169">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311172">b</span>&nbsp;<span class="op" id="8311174">:=</span>&nbsp;<span class="builtinfunc" id="8311177">new</span><span class="op" id="8311180">(</span><span class="ident" id="8311181">bytes</span><span class="op" id="8311186">.</span><span class="ident" id="8311187">Buffer</span><span class="op" id="8311193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8311196">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311234">enc</span>&nbsp;<span class="op" id="8311238">:=</span>&nbsp;<span class="ident" id="8311241">NewEncoder</span><span class="op" id="8311251">(</span><span class="ident" id="8311252">b</span><span class="op" id="8311253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311256">s</span>&nbsp;<span class="op" id="8311258">:=</span>&nbsp;<span class="op" id="8311261">&amp;</span><span class="ident" id="8311262">StringStruct</span><span class="op" id="8311274">{</span><span class="string" id="8311275">&#34;HIJKL&#34;</span><span class="op" id="8311282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311285">sp</span>&nbsp;<span class="op" id="8311288">:=</span>&nbsp;<span class="op" id="8311291">&amp;</span><span class="ident" id="8311292">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311295">err</span>&nbsp;<span class="op" id="8311299">:=</span>&nbsp;<span class="ident" id="8311302">enc</span><span class="op" id="8311305">.</span><span class="ident" id="8311306">Encode</span><span class="op" id="8311312">(</span><span class="ident" id="8311313">GobTestIndirectEncDec</span><span class="op" id="8311334">{</span><span class="num" id="8311335">17</span><span class="op" id="8311337">,</span>&nbsp;<span class="op" id="8311339">&amp;</span><span class="ident" id="8311340">sp</span><span class="op" id="8311342">}</span><span class="op" id="8311343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8311346">if</span>&nbsp;<span class="ident" id="8311349">err</span>&nbsp;<span class="op" id="8311353">!=</span>&nbsp;<span class="builtintype" id="8311356">nil</span>&nbsp;<span class="op" id="8311360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311364">t</span><span class="op" id="8311365">.</span><span class="ident" id="8311366">Fatal</span><span class="op" id="8311371">(</span><span class="string" id="8311372">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8311387">,</span>&nbsp;<span class="ident" id="8311389">err</span><span class="op" id="8311392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8311395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311398">dec</span>&nbsp;<span class="op" id="8311402">:=</span>&nbsp;<span class="ident" id="8311405">NewDecoder</span><span class="op" id="8311415">(</span><span class="ident" id="8311416">b</span><span class="op" id="8311417">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311420">x</span>&nbsp;<span class="op" id="8311422">:=</span>&nbsp;<span class="builtinfunc" id="8311425">new</span><span class="op" id="8311428">(</span><span class="ident" id="8311429">GobTestIndirectEncDec</span><span class="op" id="8311450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311453">err</span>&nbsp;<span class="op" id="8311457">=</span>&nbsp;<span class="ident" id="8311459">dec</span><span class="op" id="8311462">.</span><span class="ident" id="8311463">Decode</span><span class="op" id="8311469">(</span><span class="ident" id="8311470">x</span><span class="op" id="8311471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8311474">if</span>&nbsp;<span class="ident" id="8311477">err</span>&nbsp;<span class="op" id="8311481">!=</span>&nbsp;<span class="builtintype" id="8311484">nil</span>&nbsp;<span class="op" id="8311488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311492">t</span><span class="op" id="8311493">.</span><span class="ident" id="8311494">Fatal</span><span class="op" id="8311499">(</span><span class="string" id="8311500">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8311515">,</span>&nbsp;<span class="ident" id="8311517">err</span><span class="op" id="8311520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8311523">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8311526">if</span>&nbsp;<span class="op" id="8311529">(</span><span class="op" id="8311530">*</span><span class="op" id="8311531">*</span><span class="op" id="8311532">*</span><span class="ident" id="8311533">x</span><span class="op" id="8311534">.</span><span class="ident" id="8311535">G</span><span class="op" id="8311536">)</span><span class="op" id="8311537">.</span><span class="ident" id="8311538">s</span>&nbsp;<span class="op" id="8311540">!=</span>&nbsp;<span class="string" id="8311543">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="8311551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311555">t</span><span class="op" id="8311556">.</span><span class="ident" id="8311557">Errorf</span><span class="op" id="8311563">(</span><span class="string" id="8311564">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8311589">,</span>&nbsp;<span class="op" id="8311591">(</span><span class="op" id="8311592">*</span><span class="op" id="8311593">*</span><span class="op" id="8311594">*</span><span class="ident" id="8311595">x</span><span class="op" id="8311596">.</span><span class="ident" id="8311597">G</span><span class="op" id="8311598">)</span><span class="op" id="8311599">.</span><span class="ident" id="8311600">s</span><span class="op" id="8311601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8311604">}</span><br>
<span class="lineno"></span><span class="op" id="8311606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="8311609">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8311650">func</span>&nbsp;<span class="ident" id="8311655">TestGobEncoderArrayField</span><span class="op" id="8311679">(</span><span class="ident" id="8311680">t</span>&nbsp;<span class="op" id="8311682">*</span><span class="ident" id="8311683">testing</span><span class="op" id="8311690">.</span><span class="ident" id="8311691">T</span><span class="op" id="8311692">)</span>&nbsp;<span class="op" id="8311694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311697">b</span>&nbsp;<span class="op" id="8311699">:=</span>&nbsp;<span class="builtinfunc" id="8311702">new</span><span class="op" id="8311705">(</span><span class="ident" id="8311706">bytes</span><span class="op" id="8311711">.</span><span class="ident" id="8311712">Buffer</span><span class="op" id="8311718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311721">enc</span>&nbsp;<span class="op" id="8311725">:=</span>&nbsp;<span class="ident" id="8311728">NewEncoder</span><span class="op" id="8311738">(</span><span class="ident" id="8311739">b</span><span class="op" id="8311740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8311743">var</span>&nbsp;<span class="ident" id="8311747">a</span>&nbsp;<span class="ident" id="8311749">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311769">a</span><span class="op" id="8311770">.</span><span class="ident" id="8311771">X</span>&nbsp;<span class="op" id="8311773">=</span>&nbsp;<span class="num" id="8311775">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8311779">for</span>&nbsp;<span class="ident" id="8311783">i</span>&nbsp;<span class="op" id="8311785">:=</span>&nbsp;<span class="keyword" id="8311788">range</span>&nbsp;<span class="ident" id="8311794">a</span><span class="op" id="8311795">.</span><span class="ident" id="8311796">A</span><span class="op" id="8311797">.</span><span class="ident" id="8311798">a</span>&nbsp;<span class="op" id="8311800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311804">a</span><span class="op" id="8311805">.</span><span class="ident" id="8311806">A</span><span class="op" id="8311807">.</span><span class="ident" id="8311808">a</span><span class="op" id="8311809">[</span><span class="ident" id="8311810">i</span><span class="op" id="8311811">]</span>&nbsp;<span class="op" id="8311813">=</span>&nbsp;<span class="builtintype" id="8311815">byte</span><span class="op" id="8311819">(</span><span class="ident" id="8311820">i</span><span class="op" id="8311821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8311824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311827">err</span>&nbsp;<span class="op" id="8311831">:=</span>&nbsp;<span class="ident" id="8311834">enc</span><span class="op" id="8311837">.</span><span class="ident" id="8311838">Encode</span><span class="op" id="8311844">(</span><span class="op" id="8311845">&amp;</span><span class="ident" id="8311846">a</span><span class="op" id="8311847">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8311850">if</span>&nbsp;<span class="ident" id="8311853">err</span>&nbsp;<span class="op" id="8311857">!=</span>&nbsp;<span class="builtintype" id="8311860">nil</span>&nbsp;<span class="op" id="8311864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311868">t</span><span class="op" id="8311869">.</span><span class="ident" id="8311870">Fatal</span><span class="op" id="8311875">(</span><span class="string" id="8311876">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8311891">,</span>&nbsp;<span class="ident" id="8311893">err</span><span class="op" id="8311896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8311899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311902">dec</span>&nbsp;<span class="op" id="8311906">:=</span>&nbsp;<span class="ident" id="8311909">NewDecoder</span><span class="op" id="8311919">(</span><span class="ident" id="8311920">b</span><span class="op" id="8311921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311924">x</span>&nbsp;<span class="op" id="8311926">:=</span>&nbsp;<span class="builtinfunc" id="8311929">new</span><span class="op" id="8311932">(</span><span class="ident" id="8311933">GobTestArrayEncDec</span><span class="op" id="8311951">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311954">err</span>&nbsp;<span class="op" id="8311958">=</span>&nbsp;<span class="ident" id="8311960">dec</span><span class="op" id="8311963">.</span><span class="ident" id="8311964">Decode</span><span class="op" id="8311970">(</span><span class="ident" id="8311971">x</span><span class="op" id="8311972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8311975">if</span>&nbsp;<span class="ident" id="8311978">err</span>&nbsp;<span class="op" id="8311982">!=</span>&nbsp;<span class="builtintype" id="8311985">nil</span>&nbsp;<span class="op" id="8311989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8311993">t</span><span class="op" id="8311994">.</span><span class="ident" id="8311995">Fatal</span><span class="op" id="8312000">(</span><span class="string" id="8312001">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8312016">,</span>&nbsp;<span class="ident" id="8312018">err</span><span class="op" id="8312021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8312024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8312027">for</span>&nbsp;<span class="ident" id="8312031">i</span><span class="op" id="8312032">,</span>&nbsp;<span class="ident" id="8312034">v</span>&nbsp;<span class="op" id="8312036">:=</span>&nbsp;<span class="keyword" id="8312039">range</span>&nbsp;<span class="ident" id="8312045">x</span><span class="op" id="8312046">.</span><span class="ident" id="8312047">A</span><span class="op" id="8312048">.</span><span class="ident" id="8312049">a</span>&nbsp;<span class="op" id="8312051">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8312055">if</span>&nbsp;<span class="ident" id="8312058">v</span>&nbsp;<span class="op" id="8312060">!=</span>&nbsp;<span class="builtintype" id="8312063">byte</span><span class="op" id="8312067">(</span><span class="ident" id="8312068">i</span><span class="op" id="8312069">)</span>&nbsp;<span class="op" id="8312071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312076">t</span><span class="op" id="8312077">.</span><span class="ident" id="8312078">Errorf</span><span class="op" id="8312084">(</span><span class="string" id="8312085">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8312105">,</span>&nbsp;<span class="builtintype" id="8312107">byte</span><span class="op" id="8312111">(</span><span class="ident" id="8312112">i</span><span class="op" id="8312113">)</span><span class="op" id="8312114">,</span>&nbsp;<span class="ident" id="8312116">v</span><span class="op" id="8312117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8312122">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8312130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8312133">}</span><br>
<span class="lineno">345</span><span class="op" id="8312135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8312138">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8312192">func</span>&nbsp;<span class="ident" id="8312197">TestGobEncoderIndirectArrayField</span><span class="op" id="8312229">(</span><span class="ident" id="8312230">t</span>&nbsp;<span class="op" id="8312232">*</span><span class="ident" id="8312233">testing</span><span class="op" id="8312240">.</span><span class="ident" id="8312241">T</span><span class="op" id="8312242">)</span>&nbsp;<span class="op" id="8312244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312247">b</span>&nbsp;<span class="op" id="8312249">:=</span>&nbsp;<span class="builtinfunc" id="8312252">new</span><span class="op" id="8312255">(</span><span class="ident" id="8312256">bytes</span><span class="op" id="8312261">.</span><span class="ident" id="8312262">Buffer</span><span class="op" id="8312268">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312271">enc</span>&nbsp;<span class="op" id="8312275">:=</span>&nbsp;<span class="ident" id="8312278">NewEncoder</span><span class="op" id="8312288">(</span><span class="ident" id="8312289">b</span><span class="op" id="8312290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8312293">var</span>&nbsp;<span class="ident" id="8312297">a</span>&nbsp;<span class="ident" id="8312299">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312327">a</span><span class="op" id="8312328">.</span><span class="ident" id="8312329">X</span>&nbsp;<span class="op" id="8312331">=</span>&nbsp;<span class="num" id="8312333">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8312337">var</span>&nbsp;<span class="ident" id="8312341">array</span>&nbsp;<span class="ident" id="8312347">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312360">ap</span>&nbsp;<span class="op" id="8312363">:=</span>&nbsp;<span class="op" id="8312366">&amp;</span><span class="ident" id="8312367">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312374">app</span>&nbsp;<span class="op" id="8312378">:=</span>&nbsp;<span class="op" id="8312381">&amp;</span><span class="ident" id="8312382">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312386">a</span><span class="op" id="8312387">.</span><span class="ident" id="8312388">A</span>&nbsp;<span class="op" id="8312390">=</span>&nbsp;<span class="op" id="8312392">&amp;</span><span class="ident" id="8312393">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8312398">for</span>&nbsp;<span class="ident" id="8312402">i</span>&nbsp;<span class="op" id="8312404">:=</span>&nbsp;<span class="keyword" id="8312407">range</span>&nbsp;<span class="ident" id="8312413">array</span><span class="op" id="8312418">.</span><span class="ident" id="8312419">a</span>&nbsp;<span class="op" id="8312421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312425">array</span><span class="op" id="8312430">.</span><span class="ident" id="8312431">a</span><span class="op" id="8312432">[</span><span class="ident" id="8312433">i</span><span class="op" id="8312434">]</span>&nbsp;<span class="op" id="8312436">=</span>&nbsp;<span class="builtintype" id="8312438">byte</span><span class="op" id="8312442">(</span><span class="ident" id="8312443">i</span><span class="op" id="8312444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8312447">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312450">err</span>&nbsp;<span class="op" id="8312454">:=</span>&nbsp;<span class="ident" id="8312457">enc</span><span class="op" id="8312460">.</span><span class="ident" id="8312461">Encode</span><span class="op" id="8312467">(</span><span class="ident" id="8312468">a</span><span class="op" id="8312469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8312472">if</span>&nbsp;<span class="ident" id="8312475">err</span>&nbsp;<span class="op" id="8312479">!=</span>&nbsp;<span class="builtintype" id="8312482">nil</span>&nbsp;<span class="op" id="8312486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312490">t</span><span class="op" id="8312491">.</span><span class="ident" id="8312492">Fatal</span><span class="op" id="8312497">(</span><span class="string" id="8312498">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8312513">,</span>&nbsp;<span class="ident" id="8312515">err</span><span class="op" id="8312518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8312521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312524">dec</span>&nbsp;<span class="op" id="8312528">:=</span>&nbsp;<span class="ident" id="8312531">NewDecoder</span><span class="op" id="8312541">(</span><span class="ident" id="8312542">b</span><span class="op" id="8312543">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312546">x</span>&nbsp;<span class="op" id="8312548">:=</span>&nbsp;<span class="builtinfunc" id="8312551">new</span><span class="op" id="8312554">(</span><span class="ident" id="8312555">GobTestIndirectArrayEncDec</span><span class="op" id="8312581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312584">err</span>&nbsp;<span class="op" id="8312588">=</span>&nbsp;<span class="ident" id="8312590">dec</span><span class="op" id="8312593">.</span><span class="ident" id="8312594">Decode</span><span class="op" id="8312600">(</span><span class="ident" id="8312601">x</span><span class="op" id="8312602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8312605">if</span>&nbsp;<span class="ident" id="8312608">err</span>&nbsp;<span class="op" id="8312612">!=</span>&nbsp;<span class="builtintype" id="8312615">nil</span>&nbsp;<span class="op" id="8312619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312623">t</span><span class="op" id="8312624">.</span><span class="ident" id="8312625">Fatal</span><span class="op" id="8312630">(</span><span class="string" id="8312631">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8312646">,</span>&nbsp;<span class="ident" id="8312648">err</span><span class="op" id="8312651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8312654">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8312657">for</span>&nbsp;<span class="ident" id="8312661">i</span><span class="op" id="8312662">,</span>&nbsp;<span class="ident" id="8312664">v</span>&nbsp;<span class="op" id="8312666">:=</span>&nbsp;<span class="keyword" id="8312669">range</span>&nbsp;<span class="op" id="8312675">(</span><span class="op" id="8312676">*</span><span class="op" id="8312677">*</span><span class="op" id="8312678">*</span><span class="ident" id="8312679">x</span><span class="op" id="8312680">.</span><span class="ident" id="8312681">A</span><span class="op" id="8312682">)</span><span class="op" id="8312683">.</span><span class="ident" id="8312684">a</span>&nbsp;<span class="op" id="8312686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8312690">if</span>&nbsp;<span class="ident" id="8312693">v</span>&nbsp;<span class="op" id="8312695">!=</span>&nbsp;<span class="builtintype" id="8312698">byte</span><span class="op" id="8312702">(</span><span class="ident" id="8312703">i</span><span class="op" id="8312704">)</span>&nbsp;<span class="op" id="8312706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8312711">t</span><span class="op" id="8312712">.</span><span class="ident" id="8312713">Errorf</span><span class="op" id="8312719">(</span><span class="string" id="8312720">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8312740">,</span>&nbsp;<span class="builtintype" id="8312742">byte</span><span class="op" id="8312746">(</span><span class="ident" id="8312747">i</span><span class="op" id="8312748">)</span><span class="op" id="8312749">,</span>&nbsp;<span class="ident" id="8312751">v</span><span class="op" id="8312752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8312757">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8312765">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8312768">}</span><br>
<span class="lineno"></span><span class="op" id="8312770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8312773">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8312835">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="8312898">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="8312959">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="8313019">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="8313042">func</span>&nbsp;<span class="ident" id="8313047">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="8313082">(</span><span class="ident" id="8313083">t</span>&nbsp;<span class="op" id="8313085">*</span><span class="ident" id="8313086">testing</span><span class="op" id="8313093">.</span><span class="ident" id="8313094">T</span><span class="op" id="8313095">)</span>&nbsp;<span class="op" id="8313097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8313100">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313144">b</span>&nbsp;<span class="op" id="8313146">:=</span>&nbsp;<span class="builtinfunc" id="8313149">new</span><span class="op" id="8313152">(</span><span class="ident" id="8313153">bytes</span><span class="op" id="8313158">.</span><span class="ident" id="8313159">Buffer</span><span class="op" id="8313165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313168">enc</span>&nbsp;<span class="op" id="8313172">:=</span>&nbsp;<span class="ident" id="8313175">NewEncoder</span><span class="op" id="8313185">(</span><span class="ident" id="8313186">b</span><span class="op" id="8313187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313190">err</span>&nbsp;<span class="op" id="8313194">:=</span>&nbsp;<span class="ident" id="8313197">enc</span><span class="op" id="8313200">.</span><span class="ident" id="8313201">Encode</span><span class="op" id="8313207">(</span><span class="ident" id="8313208">GobTest1</span><span class="op" id="8313216">{</span><span class="num" id="8313217">17</span><span class="op" id="8313219">,</span>&nbsp;<span class="op" id="8313221">&amp;</span><span class="ident" id="8313222">StringStruct</span><span class="op" id="8313234">{</span><span class="string" id="8313235">&#34;ABC&#34;</span><span class="op" id="8313240">}</span><span class="op" id="8313241">}</span><span class="op" id="8313242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8313245">if</span>&nbsp;<span class="ident" id="8313248">err</span>&nbsp;<span class="op" id="8313252">!=</span>&nbsp;<span class="builtintype" id="8313255">nil</span>&nbsp;<span class="op" id="8313259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313263">t</span><span class="op" id="8313264">.</span><span class="ident" id="8313265">Fatal</span><span class="op" id="8313270">(</span><span class="string" id="8313271">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8313286">,</span>&nbsp;<span class="ident" id="8313288">err</span><span class="op" id="8313291">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8313294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313297">dec</span>&nbsp;<span class="op" id="8313301">:=</span>&nbsp;<span class="ident" id="8313304">NewDecoder</span><span class="op" id="8313314">(</span><span class="ident" id="8313315">b</span><span class="op" id="8313316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313319">x</span>&nbsp;<span class="op" id="8313321">:=</span>&nbsp;<span class="builtinfunc" id="8313324">new</span><span class="op" id="8313327">(</span><span class="ident" id="8313328">GobTest0</span><span class="op" id="8313336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313339">err</span>&nbsp;<span class="op" id="8313343">=</span>&nbsp;<span class="ident" id="8313345">dec</span><span class="op" id="8313348">.</span><span class="ident" id="8313349">Decode</span><span class="op" id="8313355">(</span><span class="ident" id="8313356">x</span><span class="op" id="8313357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8313360">if</span>&nbsp;<span class="ident" id="8313363">err</span>&nbsp;<span class="op" id="8313367">!=</span>&nbsp;<span class="builtintype" id="8313370">nil</span>&nbsp;<span class="op" id="8313374">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313378">t</span><span class="op" id="8313379">.</span><span class="ident" id="8313380">Fatal</span><span class="op" id="8313385">(</span><span class="string" id="8313386">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8313401">,</span>&nbsp;<span class="ident" id="8313403">err</span><span class="op" id="8313406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8313409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8313412">if</span>&nbsp;<span class="ident" id="8313415">x</span><span class="op" id="8313416">.</span><span class="ident" id="8313417">G</span><span class="op" id="8313418">.</span><span class="ident" id="8313419">a</span>&nbsp;<span class="op" id="8313421">!=</span>&nbsp;<span class="string" id="8313424">&#39;A&#39;</span>&nbsp;<span class="op" id="8313428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313432">t</span><span class="op" id="8313433">.</span><span class="ident" id="8313434">Errorf</span><span class="op" id="8313440">(</span><span class="string" id="8313441">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8313462">,</span>&nbsp;<span class="ident" id="8313464">x</span><span class="op" id="8313465">.</span><span class="ident" id="8313466">G</span><span class="op" id="8313467">.</span><span class="ident" id="8313468">a</span><span class="op" id="8313469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8313472">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8313475">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313537">b</span><span class="op" id="8313538">.</span><span class="ident" id="8313539">Reset</span><span class="op" id="8313544">(</span><span class="op" id="8313545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313548">err</span>&nbsp;<span class="op" id="8313552">=</span>&nbsp;<span class="ident" id="8313554">enc</span><span class="op" id="8313557">.</span><span class="ident" id="8313558">Encode</span><span class="op" id="8313564">(</span><span class="ident" id="8313565">GobTest0</span><span class="op" id="8313573">{</span><span class="num" id="8313574">17</span><span class="op" id="8313576">,</span>&nbsp;<span class="op" id="8313578">&amp;</span><span class="ident" id="8313579">ByteStruct</span><span class="op" id="8313589">{</span><span class="string" id="8313590">&#39;X&#39;</span><span class="op" id="8313593">}</span><span class="op" id="8313594">}</span><span class="op" id="8313595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8313598">if</span>&nbsp;<span class="ident" id="8313601">err</span>&nbsp;<span class="op" id="8313605">!=</span>&nbsp;<span class="builtintype" id="8313608">nil</span>&nbsp;<span class="op" id="8313612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313616">t</span><span class="op" id="8313617">.</span><span class="ident" id="8313618">Fatal</span><span class="op" id="8313623">(</span><span class="string" id="8313624">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8313639">,</span>&nbsp;<span class="ident" id="8313641">err</span><span class="op" id="8313644">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8313647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313650">y</span>&nbsp;<span class="op" id="8313652">:=</span>&nbsp;<span class="builtinfunc" id="8313655">new</span><span class="op" id="8313658">(</span><span class="ident" id="8313659">GobTest1</span><span class="op" id="8313667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313670">err</span>&nbsp;<span class="op" id="8313674">=</span>&nbsp;<span class="ident" id="8313676">dec</span><span class="op" id="8313679">.</span><span class="ident" id="8313680">Decode</span><span class="op" id="8313686">(</span><span class="ident" id="8313687">y</span><span class="op" id="8313688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8313691">if</span>&nbsp;<span class="ident" id="8313694">err</span>&nbsp;<span class="op" id="8313698">!=</span>&nbsp;<span class="builtintype" id="8313701">nil</span>&nbsp;<span class="op" id="8313705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313709">t</span><span class="op" id="8313710">.</span><span class="ident" id="8313711">Fatal</span><span class="op" id="8313716">(</span><span class="string" id="8313717">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8313732">,</span>&nbsp;<span class="ident" id="8313734">err</span><span class="op" id="8313737">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8313740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8313743">if</span>&nbsp;<span class="ident" id="8313746">y</span><span class="op" id="8313747">.</span><span class="ident" id="8313748">G</span><span class="op" id="8313749">.</span><span class="ident" id="8313750">s</span>&nbsp;<span class="op" id="8313752">!=</span>&nbsp;<span class="string" id="8313755">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="8313761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313765">t</span><span class="op" id="8313766">.</span><span class="ident" id="8313767">Fatalf</span><span class="op" id="8313773">(</span><span class="string" id="8313774">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8313797">,</span>&nbsp;<span class="ident" id="8313799">y</span><span class="op" id="8313800">.</span><span class="ident" id="8313801">G</span><span class="op" id="8313802">.</span><span class="ident" id="8313803">s</span><span class="op" id="8313804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8313807">}</span><br>
<span class="lineno"></span><span class="op" id="8313809">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="8313812">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="8313874">func</span>&nbsp;<span class="ident" id="8313879">TestGobEncoderValueEncoder</span><span class="op" id="8313905">(</span><span class="ident" id="8313906">t</span>&nbsp;<span class="op" id="8313908">*</span><span class="ident" id="8313909">testing</span><span class="op" id="8313916">.</span><span class="ident" id="8313917">T</span><span class="op" id="8313918">)</span>&nbsp;<span class="op" id="8313920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8313923">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313967">b</span>&nbsp;<span class="op" id="8313969">:=</span>&nbsp;<span class="builtinfunc" id="8313972">new</span><span class="op" id="8313975">(</span><span class="ident" id="8313976">bytes</span><span class="op" id="8313981">.</span><span class="ident" id="8313982">Buffer</span><span class="op" id="8313988">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8313991">enc</span>&nbsp;<span class="op" id="8313995">:=</span>&nbsp;<span class="ident" id="8313998">NewEncoder</span><span class="op" id="8314008">(</span><span class="ident" id="8314009">b</span><span class="op" id="8314010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314013">err</span>&nbsp;<span class="op" id="8314017">:=</span>&nbsp;<span class="ident" id="8314020">enc</span><span class="op" id="8314023">.</span><span class="ident" id="8314024">Encode</span><span class="op" id="8314030">(</span><span class="ident" id="8314031">GobTest4</span><span class="op" id="8314039">{</span><span class="num" id="8314040">17</span><span class="op" id="8314042">,</span>&nbsp;<span class="ident" id="8314044">ValueGobber</span><span class="op" id="8314055">(</span><span class="string" id="8314056">&#34;hello&#34;</span><span class="op" id="8314063">)</span><span class="op" id="8314064">,</span>&nbsp;<span class="ident" id="8314066">BinaryValueGobber</span><span class="op" id="8314083">(</span><span class="string" id="8314084">&#34;&#34;</span><span class="op" id="8314102">)</span><span class="op" id="8314103">,</span>&nbsp;<span class="ident" id="8314105">TextValueGobber</span><span class="op" id="8314120">(</span><span class="string" id="8314121">&#34;&#34;</span><span class="op" id="8314138">)</span><span class="op" id="8314139">}</span><span class="op" id="8314140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8314143">if</span>&nbsp;<span class="ident" id="8314146">err</span>&nbsp;<span class="op" id="8314150">!=</span>&nbsp;<span class="builtintype" id="8314153">nil</span>&nbsp;<span class="op" id="8314157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314161">t</span><span class="op" id="8314162">.</span><span class="ident" id="8314163">Fatal</span><span class="op" id="8314168">(</span><span class="string" id="8314169">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8314184">,</span>&nbsp;<span class="ident" id="8314186">err</span><span class="op" id="8314189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8314192">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314195">dec</span>&nbsp;<span class="op" id="8314199">:=</span>&nbsp;<span class="ident" id="8314202">NewDecoder</span><span class="op" id="8314212">(</span><span class="ident" id="8314213">b</span><span class="op" id="8314214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314217">x</span>&nbsp;<span class="op" id="8314219">:=</span>&nbsp;<span class="builtinfunc" id="8314222">new</span><span class="op" id="8314225">(</span><span class="ident" id="8314226">GobTest5</span><span class="op" id="8314234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314237">err</span>&nbsp;<span class="op" id="8314241">=</span>&nbsp;<span class="ident" id="8314243">dec</span><span class="op" id="8314246">.</span><span class="ident" id="8314247">Decode</span><span class="op" id="8314253">(</span><span class="ident" id="8314254">x</span><span class="op" id="8314255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8314258">if</span>&nbsp;<span class="ident" id="8314261">err</span>&nbsp;<span class="op" id="8314265">!=</span>&nbsp;<span class="builtintype" id="8314268">nil</span>&nbsp;<span class="op" id="8314272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314276">t</span><span class="op" id="8314277">.</span><span class="ident" id="8314278">Fatal</span><span class="op" id="8314283">(</span><span class="string" id="8314284">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8314299">,</span>&nbsp;<span class="ident" id="8314301">err</span><span class="op" id="8314304">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8314307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8314310">if</span>&nbsp;<span class="op" id="8314313">*</span><span class="ident" id="8314314">x</span><span class="op" id="8314315">.</span><span class="ident" id="8314316">V</span>&nbsp;<span class="op" id="8314318">!=</span>&nbsp;<span class="string" id="8314321">&#34;hello&#34;</span>&nbsp;<span class="op" id="8314329">||</span>&nbsp;<span class="op" id="8314332">*</span><span class="ident" id="8314333">x</span><span class="op" id="8314334">.</span><span class="ident" id="8314335">BV</span>&nbsp;<span class="op" id="8314338">!=</span>&nbsp;<span class="string" id="8314341">&#34;&#34;</span>&nbsp;<span class="op" id="8314360">||</span>&nbsp;<span class="op" id="8314363">*</span><span class="ident" id="8314364">x</span><span class="op" id="8314365">.</span><span class="ident" id="8314366">TV</span>&nbsp;<span class="op" id="8314369">!=</span>&nbsp;<span class="string" id="8314372">&#34;&#34;</span>&nbsp;<span class="op" id="8314390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314394">t</span><span class="op" id="8314395">.</span><span class="ident" id="8314396">Errorf</span><span class="op" id="8314402">(</span><span class="string" id="8314403">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8314428">,</span>&nbsp;<span class="op" id="8314430">*</span><span class="ident" id="8314431">x</span><span class="op" id="8314432">.</span><span class="ident" id="8314433">V</span><span class="op" id="8314434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8314437">}</span><br>
<span class="lineno"></span><span class="op" id="8314439">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="8314442">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="8314510">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="8314551">func</span>&nbsp;<span class="ident" id="8314556">TestGobEncoderValueThenPointer</span><span class="op" id="8314586">(</span><span class="ident" id="8314587">t</span>&nbsp;<span class="op" id="8314589">*</span><span class="ident" id="8314590">testing</span><span class="op" id="8314597">.</span><span class="ident" id="8314598">T</span><span class="op" id="8314599">)</span>&nbsp;<span class="op" id="8314601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314604">v</span>&nbsp;<span class="op" id="8314606">:=</span>&nbsp;<span class="ident" id="8314609">ValueGobber</span><span class="op" id="8314620">(</span><span class="string" id="8314621">&#34;forty-two&#34;</span><span class="op" id="8314632">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314635">w</span>&nbsp;<span class="op" id="8314637">:=</span>&nbsp;<span class="ident" id="8314640">ValueGobber</span><span class="op" id="8314651">(</span><span class="string" id="8314652">&#34;six-by-nine&#34;</span><span class="op" id="8314665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314668">bv</span>&nbsp;<span class="op" id="8314671">:=</span>&nbsp;<span class="ident" id="8314674">BinaryValueGobber</span><span class="op" id="8314691">(</span><span class="string" id="8314692">&#34;1nanocentury&#34;</span><span class="op" id="8314706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314709">bw</span>&nbsp;<span class="op" id="8314712">:=</span>&nbsp;<span class="ident" id="8314715">BinaryValueGobber</span><span class="op" id="8314732">(</span><span class="string" id="8314733">&#34;seconds&#34;</span><span class="op" id="8314744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314747">tv</span>&nbsp;<span class="op" id="8314750">:=</span>&nbsp;<span class="ident" id="8314753">TextValueGobber</span><span class="op" id="8314768">(</span><span class="string" id="8314769">&#34;gravitationalacceleration&#34;</span><span class="op" id="8314796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314799">tw</span>&nbsp;<span class="op" id="8314802">:=</span>&nbsp;<span class="ident" id="8314805">TextValueGobber</span><span class="op" id="8314820">(</span><span class="string" id="8314821">&#34;ft/s&#34;</span><span class="op" id="8314833">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8314837">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8314908">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314972">b</span>&nbsp;<span class="op" id="8314974">:=</span>&nbsp;<span class="builtinfunc" id="8314977">new</span><span class="op" id="8314980">(</span><span class="ident" id="8314981">bytes</span><span class="op" id="8314986">.</span><span class="ident" id="8314987">Buffer</span><span class="op" id="8314993">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8314996">enc</span>&nbsp;<span class="op" id="8315000">:=</span>&nbsp;<span class="ident" id="8315003">NewEncoder</span><span class="op" id="8315013">(</span><span class="ident" id="8315014">b</span><span class="op" id="8315015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8315018">if</span>&nbsp;<span class="ident" id="8315021">err</span>&nbsp;<span class="op" id="8315025">:=</span>&nbsp;<span class="ident" id="8315028">enc</span><span class="op" id="8315031">.</span><span class="ident" id="8315032">Encode</span><span class="op" id="8315038">(</span><span class="ident" id="8315039">GobTest6</span><span class="op" id="8315047">{</span><span class="num" id="8315048">42</span><span class="op" id="8315050">,</span>&nbsp;<span class="ident" id="8315052">v</span><span class="op" id="8315053">,</span>&nbsp;<span class="op" id="8315055">&amp;</span><span class="ident" id="8315056">w</span><span class="op" id="8315057">,</span>&nbsp;<span class="ident" id="8315059">bv</span><span class="op" id="8315061">,</span>&nbsp;<span class="op" id="8315063">&amp;</span><span class="ident" id="8315064">bw</span><span class="op" id="8315066">,</span>&nbsp;<span class="ident" id="8315068">tv</span><span class="op" id="8315070">,</span>&nbsp;<span class="op" id="8315072">&amp;</span><span class="ident" id="8315073">tw</span><span class="op" id="8315075">}</span><span class="op" id="8315076">)</span><span class="op" id="8315077">;</span>&nbsp;<span class="ident" id="8315079">err</span>&nbsp;<span class="op" id="8315083">!=</span>&nbsp;<span class="builtintype" id="8315086">nil</span>&nbsp;<span class="op" id="8315090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315094">t</span><span class="op" id="8315095">.</span><span class="ident" id="8315096">Fatal</span><span class="op" id="8315101">(</span><span class="string" id="8315102">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8315117">,</span>&nbsp;<span class="ident" id="8315119">err</span><span class="op" id="8315122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8315125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315128">dec</span>&nbsp;<span class="op" id="8315132">:=</span>&nbsp;<span class="ident" id="8315135">NewDecoder</span><span class="op" id="8315145">(</span><span class="ident" id="8315146">b</span><span class="op" id="8315147">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315150">x</span>&nbsp;<span class="op" id="8315152">:=</span>&nbsp;<span class="builtinfunc" id="8315155">new</span><span class="op" id="8315158">(</span><span class="ident" id="8315159">GobTest6</span><span class="op" id="8315167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8315170">if</span>&nbsp;<span class="ident" id="8315173">err</span>&nbsp;<span class="op" id="8315177">:=</span>&nbsp;<span class="ident" id="8315180">dec</span><span class="op" id="8315183">.</span><span class="ident" id="8315184">Decode</span><span class="op" id="8315190">(</span><span class="ident" id="8315191">x</span><span class="op" id="8315192">)</span><span class="op" id="8315193">;</span>&nbsp;<span class="ident" id="8315195">err</span>&nbsp;<span class="op" id="8315199">!=</span>&nbsp;<span class="builtintype" id="8315202">nil</span>&nbsp;<span class="op" id="8315206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315210">t</span><span class="op" id="8315211">.</span><span class="ident" id="8315212">Fatal</span><span class="op" id="8315217">(</span><span class="string" id="8315218">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8315233">,</span>&nbsp;<span class="ident" id="8315235">err</span><span class="op" id="8315238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8315241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8315245">if</span>&nbsp;<span class="ident" id="8315248">got</span><span class="op" id="8315251">,</span>&nbsp;<span class="ident" id="8315253">want</span>&nbsp;<span class="op" id="8315258">:=</span>&nbsp;<span class="ident" id="8315261">x</span><span class="op" id="8315262">.</span><span class="ident" id="8315263">V</span><span class="op" id="8315264">,</span>&nbsp;<span class="ident" id="8315266">v</span><span class="op" id="8315267">;</span>&nbsp;<span class="ident" id="8315269">got</span>&nbsp;<span class="op" id="8315273">!=</span>&nbsp;<span class="ident" id="8315276">want</span>&nbsp;<span class="op" id="8315281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315285">t</span><span class="op" id="8315286">.</span><span class="ident" id="8315287">Errorf</span><span class="op" id="8315293">(</span><span class="string" id="8315294">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8315311">,</span>&nbsp;<span class="ident" id="8315313">got</span><span class="op" id="8315316">,</span>&nbsp;<span class="ident" id="8315318">want</span><span class="op" id="8315322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8315325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8315328">if</span>&nbsp;<span class="ident" id="8315331">got</span><span class="op" id="8315334">,</span>&nbsp;<span class="ident" id="8315336">want</span>&nbsp;<span class="op" id="8315341">:=</span>&nbsp;<span class="ident" id="8315344">x</span><span class="op" id="8315345">.</span><span class="ident" id="8315346">W</span><span class="op" id="8315347">,</span>&nbsp;<span class="ident" id="8315349">w</span><span class="op" id="8315350">;</span>&nbsp;<span class="ident" id="8315352">got</span>&nbsp;<span class="op" id="8315356">==</span>&nbsp;<span class="builtintype" id="8315359">nil</span>&nbsp;<span class="op" id="8315363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315367">t</span><span class="op" id="8315368">.</span><span class="ident" id="8315369">Errorf</span><span class="op" id="8315375">(</span><span class="string" id="8315376">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8315394">,</span>&nbsp;<span class="ident" id="8315396">want</span><span class="op" id="8315400">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8315403">}</span>&nbsp;<span class="keyword" id="8315405">else</span>&nbsp;<span class="keyword" id="8315410">if</span>&nbsp;<span class="op" id="8315413">*</span><span class="ident" id="8315414">got</span>&nbsp;<span class="op" id="8315418">!=</span>&nbsp;<span class="ident" id="8315421">want</span>&nbsp;<span class="op" id="8315426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315430">t</span><span class="op" id="8315431">.</span><span class="ident" id="8315432">Errorf</span><span class="op" id="8315438">(</span><span class="string" id="8315439">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8315456">,</span>&nbsp;<span class="op" id="8315458">*</span><span class="ident" id="8315459">got</span><span class="op" id="8315462">,</span>&nbsp;<span class="ident" id="8315464">want</span><span class="op" id="8315468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8315471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8315475">if</span>&nbsp;<span class="ident" id="8315478">got</span><span class="op" id="8315481">,</span>&nbsp;<span class="ident" id="8315483">want</span>&nbsp;<span class="op" id="8315488">:=</span>&nbsp;<span class="ident" id="8315491">x</span><span class="op" id="8315492">.</span><span class="ident" id="8315493">BV</span><span class="op" id="8315495">,</span>&nbsp;<span class="ident" id="8315497">bv</span><span class="op" id="8315499">;</span>&nbsp;<span class="ident" id="8315501">got</span>&nbsp;<span class="op" id="8315505">!=</span>&nbsp;<span class="ident" id="8315508">want</span>&nbsp;<span class="op" id="8315513">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315517">t</span><span class="op" id="8315518">.</span><span class="ident" id="8315519">Errorf</span><span class="op" id="8315525">(</span><span class="string" id="8315526">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8315544">,</span>&nbsp;<span class="ident" id="8315546">got</span><span class="op" id="8315549">,</span>&nbsp;<span class="ident" id="8315551">want</span><span class="op" id="8315555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8315558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8315561">if</span>&nbsp;<span class="ident" id="8315564">got</span><span class="op" id="8315567">,</span>&nbsp;<span class="ident" id="8315569">want</span>&nbsp;<span class="op" id="8315574">:=</span>&nbsp;<span class="ident" id="8315577">x</span><span class="op" id="8315578">.</span><span class="ident" id="8315579">BW</span><span class="op" id="8315581">,</span>&nbsp;<span class="ident" id="8315583">bw</span><span class="op" id="8315585">;</span>&nbsp;<span class="ident" id="8315587">got</span>&nbsp;<span class="op" id="8315591">==</span>&nbsp;<span class="builtintype" id="8315594">nil</span>&nbsp;<span class="op" id="8315598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315602">t</span><span class="op" id="8315603">.</span><span class="ident" id="8315604">Errorf</span><span class="op" id="8315610">(</span><span class="string" id="8315611">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8315630">,</span>&nbsp;<span class="ident" id="8315632">want</span><span class="op" id="8315636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8315639">}</span>&nbsp;<span class="keyword" id="8315641">else</span>&nbsp;<span class="keyword" id="8315646">if</span>&nbsp;<span class="op" id="8315649">*</span><span class="ident" id="8315650">got</span>&nbsp;<span class="op" id="8315654">!=</span>&nbsp;<span class="ident" id="8315657">want</span>&nbsp;<span class="op" id="8315662">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315666">t</span><span class="op" id="8315667">.</span><span class="ident" id="8315668">Errorf</span><span class="op" id="8315674">(</span><span class="string" id="8315675">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8315693">,</span>&nbsp;<span class="op" id="8315695">*</span><span class="ident" id="8315696">got</span><span class="op" id="8315699">,</span>&nbsp;<span class="ident" id="8315701">want</span><span class="op" id="8315705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8315708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8315712">if</span>&nbsp;<span class="ident" id="8315715">got</span><span class="op" id="8315718">,</span>&nbsp;<span class="ident" id="8315720">want</span>&nbsp;<span class="op" id="8315725">:=</span>&nbsp;<span class="ident" id="8315728">x</span><span class="op" id="8315729">.</span><span class="ident" id="8315730">TV</span><span class="op" id="8315732">,</span>&nbsp;<span class="ident" id="8315734">tv</span><span class="op" id="8315736">;</span>&nbsp;<span class="ident" id="8315738">got</span>&nbsp;<span class="op" id="8315742">!=</span>&nbsp;<span class="ident" id="8315745">want</span>&nbsp;<span class="op" id="8315750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315754">t</span><span class="op" id="8315755">.</span><span class="ident" id="8315756">Errorf</span><span class="op" id="8315762">(</span><span class="string" id="8315763">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8315781">,</span>&nbsp;<span class="ident" id="8315783">got</span><span class="op" id="8315786">,</span>&nbsp;<span class="ident" id="8315788">want</span><span class="op" id="8315792">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8315795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8315798">if</span>&nbsp;<span class="ident" id="8315801">got</span><span class="op" id="8315804">,</span>&nbsp;<span class="ident" id="8315806">want</span>&nbsp;<span class="op" id="8315811">:=</span>&nbsp;<span class="ident" id="8315814">x</span><span class="op" id="8315815">.</span><span class="ident" id="8315816">TW</span><span class="op" id="8315818">,</span>&nbsp;<span class="ident" id="8315820">tw</span><span class="op" id="8315822">;</span>&nbsp;<span class="ident" id="8315824">got</span>&nbsp;<span class="op" id="8315828">==</span>&nbsp;<span class="builtintype" id="8315831">nil</span>&nbsp;<span class="op" id="8315835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315839">t</span><span class="op" id="8315840">.</span><span class="ident" id="8315841">Errorf</span><span class="op" id="8315847">(</span><span class="string" id="8315848">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8315867">,</span>&nbsp;<span class="ident" id="8315869">want</span><span class="op" id="8315873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8315876">}</span>&nbsp;<span class="keyword" id="8315878">else</span>&nbsp;<span class="keyword" id="8315883">if</span>&nbsp;<span class="op" id="8315886">*</span><span class="ident" id="8315887">got</span>&nbsp;<span class="op" id="8315891">!=</span>&nbsp;<span class="ident" id="8315894">want</span>&nbsp;<span class="op" id="8315899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8315903">t</span><span class="op" id="8315904">.</span><span class="ident" id="8315905">Errorf</span><span class="op" id="8315911">(</span><span class="string" id="8315912">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8315930">,</span>&nbsp;<span class="op" id="8315932">*</span><span class="ident" id="8315933">got</span><span class="op" id="8315936">,</span>&nbsp;<span class="ident" id="8315938">want</span><span class="op" id="8315942">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8315945">}</span><br>
<span class="lineno"></span><span class="op" id="8315947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8315950">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="8316018">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="8316048">func</span>&nbsp;<span class="ident" id="8316053">TestGobEncoderPointerThenValue</span><span class="op" id="8316083">(</span><span class="ident" id="8316084">t</span>&nbsp;<span class="op" id="8316086">*</span><span class="ident" id="8316087">testing</span><span class="op" id="8316094">.</span><span class="ident" id="8316095">T</span><span class="op" id="8316096">)</span>&nbsp;<span class="op" id="8316098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316101">v</span>&nbsp;<span class="op" id="8316103">:=</span>&nbsp;<span class="ident" id="8316106">ValueGobber</span><span class="op" id="8316117">(</span><span class="string" id="8316118">&#34;forty-two&#34;</span><span class="op" id="8316129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316132">w</span>&nbsp;<span class="op" id="8316134">:=</span>&nbsp;<span class="ident" id="8316137">ValueGobber</span><span class="op" id="8316148">(</span><span class="string" id="8316149">&#34;six-by-nine&#34;</span><span class="op" id="8316162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316165">bv</span>&nbsp;<span class="op" id="8316168">:=</span>&nbsp;<span class="ident" id="8316171">BinaryValueGobber</span><span class="op" id="8316188">(</span><span class="string" id="8316189">&#34;1nanocentury&#34;</span><span class="op" id="8316203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316206">bw</span>&nbsp;<span class="op" id="8316209">:=</span>&nbsp;<span class="ident" id="8316212">BinaryValueGobber</span><span class="op" id="8316229">(</span><span class="string" id="8316230">&#34;seconds&#34;</span><span class="op" id="8316241">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316244">tv</span>&nbsp;<span class="op" id="8316247">:=</span>&nbsp;<span class="ident" id="8316250">TextValueGobber</span><span class="op" id="8316265">(</span><span class="string" id="8316266">&#34;gravitationalacceleration&#34;</span><span class="op" id="8316293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316296">tw</span>&nbsp;<span class="op" id="8316299">:=</span>&nbsp;<span class="ident" id="8316302">TextValueGobber</span><span class="op" id="8316317">(</span><span class="string" id="8316318">&#34;ft/s&#34;</span><span class="op" id="8316330">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316334">b</span>&nbsp;<span class="op" id="8316336">:=</span>&nbsp;<span class="builtinfunc" id="8316339">new</span><span class="op" id="8316342">(</span><span class="ident" id="8316343">bytes</span><span class="op" id="8316348">.</span><span class="ident" id="8316349">Buffer</span><span class="op" id="8316355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316358">enc</span>&nbsp;<span class="op" id="8316362">:=</span>&nbsp;<span class="ident" id="8316365">NewEncoder</span><span class="op" id="8316375">(</span><span class="ident" id="8316376">b</span><span class="op" id="8316377">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8316380">if</span>&nbsp;<span class="ident" id="8316383">err</span>&nbsp;<span class="op" id="8316387">:=</span>&nbsp;<span class="ident" id="8316390">enc</span><span class="op" id="8316393">.</span><span class="ident" id="8316394">Encode</span><span class="op" id="8316400">(</span><span class="ident" id="8316401">GobTest7</span><span class="op" id="8316409">{</span><span class="num" id="8316410">42</span><span class="op" id="8316412">,</span>&nbsp;<span class="op" id="8316414">&amp;</span><span class="ident" id="8316415">v</span><span class="op" id="8316416">,</span>&nbsp;<span class="ident" id="8316418">w</span><span class="op" id="8316419">,</span>&nbsp;<span class="op" id="8316421">&amp;</span><span class="ident" id="8316422">bv</span><span class="op" id="8316424">,</span>&nbsp;<span class="ident" id="8316426">bw</span><span class="op" id="8316428">,</span>&nbsp;<span class="op" id="8316430">&amp;</span><span class="ident" id="8316431">tv</span><span class="op" id="8316433">,</span>&nbsp;<span class="ident" id="8316435">tw</span><span class="op" id="8316437">}</span><span class="op" id="8316438">)</span><span class="op" id="8316439">;</span>&nbsp;<span class="ident" id="8316441">err</span>&nbsp;<span class="op" id="8316445">!=</span>&nbsp;<span class="builtintype" id="8316448">nil</span>&nbsp;<span class="op" id="8316452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316456">t</span><span class="op" id="8316457">.</span><span class="ident" id="8316458">Fatal</span><span class="op" id="8316463">(</span><span class="string" id="8316464">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8316479">,</span>&nbsp;<span class="ident" id="8316481">err</span><span class="op" id="8316484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8316487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316490">dec</span>&nbsp;<span class="op" id="8316494">:=</span>&nbsp;<span class="ident" id="8316497">NewDecoder</span><span class="op" id="8316507">(</span><span class="ident" id="8316508">b</span><span class="op" id="8316509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316512">x</span>&nbsp;<span class="op" id="8316514">:=</span>&nbsp;<span class="builtinfunc" id="8316517">new</span><span class="op" id="8316520">(</span><span class="ident" id="8316521">GobTest7</span><span class="op" id="8316529">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8316532">if</span>&nbsp;<span class="ident" id="8316535">err</span>&nbsp;<span class="op" id="8316539">:=</span>&nbsp;<span class="ident" id="8316542">dec</span><span class="op" id="8316545">.</span><span class="ident" id="8316546">Decode</span><span class="op" id="8316552">(</span><span class="ident" id="8316553">x</span><span class="op" id="8316554">)</span><span class="op" id="8316555">;</span>&nbsp;<span class="ident" id="8316557">err</span>&nbsp;<span class="op" id="8316561">!=</span>&nbsp;<span class="builtintype" id="8316564">nil</span>&nbsp;<span class="op" id="8316568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316572">t</span><span class="op" id="8316573">.</span><span class="ident" id="8316574">Fatal</span><span class="op" id="8316579">(</span><span class="string" id="8316580">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8316595">,</span>&nbsp;<span class="ident" id="8316597">err</span><span class="op" id="8316600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8316603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8316607">if</span>&nbsp;<span class="ident" id="8316610">got</span><span class="op" id="8316613">,</span>&nbsp;<span class="ident" id="8316615">want</span>&nbsp;<span class="op" id="8316620">:=</span>&nbsp;<span class="ident" id="8316623">x</span><span class="op" id="8316624">.</span><span class="ident" id="8316625">V</span><span class="op" id="8316626">,</span>&nbsp;<span class="ident" id="8316628">v</span><span class="op" id="8316629">;</span>&nbsp;<span class="ident" id="8316631">got</span>&nbsp;<span class="op" id="8316635">==</span>&nbsp;<span class="builtintype" id="8316638">nil</span>&nbsp;<span class="op" id="8316642">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316646">t</span><span class="op" id="8316647">.</span><span class="ident" id="8316648">Errorf</span><span class="op" id="8316654">(</span><span class="string" id="8316655">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8316673">,</span>&nbsp;<span class="ident" id="8316675">want</span><span class="op" id="8316679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8316682">}</span>&nbsp;<span class="keyword" id="8316684">else</span>&nbsp;<span class="keyword" id="8316689">if</span>&nbsp;<span class="op" id="8316692">*</span><span class="ident" id="8316693">got</span>&nbsp;<span class="op" id="8316697">!=</span>&nbsp;<span class="ident" id="8316700">want</span>&nbsp;<span class="op" id="8316705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316709">t</span><span class="op" id="8316710">.</span><span class="ident" id="8316711">Errorf</span><span class="op" id="8316717">(</span><span class="string" id="8316718">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8316735">,</span>&nbsp;<span class="op" id="8316737">*</span><span class="ident" id="8316738">got</span><span class="op" id="8316741">,</span>&nbsp;<span class="ident" id="8316743">want</span><span class="op" id="8316747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8316750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8316753">if</span>&nbsp;<span class="ident" id="8316756">got</span><span class="op" id="8316759">,</span>&nbsp;<span class="ident" id="8316761">want</span>&nbsp;<span class="op" id="8316766">:=</span>&nbsp;<span class="ident" id="8316769">x</span><span class="op" id="8316770">.</span><span class="ident" id="8316771">W</span><span class="op" id="8316772">,</span>&nbsp;<span class="ident" id="8316774">w</span><span class="op" id="8316775">;</span>&nbsp;<span class="ident" id="8316777">got</span>&nbsp;<span class="op" id="8316781">!=</span>&nbsp;<span class="ident" id="8316784">want</span>&nbsp;<span class="op" id="8316789">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316793">t</span><span class="op" id="8316794">.</span><span class="ident" id="8316795">Errorf</span><span class="op" id="8316801">(</span><span class="string" id="8316802">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8316819">,</span>&nbsp;<span class="ident" id="8316821">got</span><span class="op" id="8316824">,</span>&nbsp;<span class="ident" id="8316826">want</span><span class="op" id="8316830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8316833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8316837">if</span>&nbsp;<span class="ident" id="8316840">got</span><span class="op" id="8316843">,</span>&nbsp;<span class="ident" id="8316845">want</span>&nbsp;<span class="op" id="8316850">:=</span>&nbsp;<span class="ident" id="8316853">x</span><span class="op" id="8316854">.</span><span class="ident" id="8316855">BV</span><span class="op" id="8316857">,</span>&nbsp;<span class="ident" id="8316859">bv</span><span class="op" id="8316861">;</span>&nbsp;<span class="ident" id="8316863">got</span>&nbsp;<span class="op" id="8316867">==</span>&nbsp;<span class="builtintype" id="8316870">nil</span>&nbsp;<span class="op" id="8316874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316878">t</span><span class="op" id="8316879">.</span><span class="ident" id="8316880">Errorf</span><span class="op" id="8316886">(</span><span class="string" id="8316887">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8316906">,</span>&nbsp;<span class="ident" id="8316908">want</span><span class="op" id="8316912">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8316915">}</span>&nbsp;<span class="keyword" id="8316917">else</span>&nbsp;<span class="keyword" id="8316922">if</span>&nbsp;<span class="op" id="8316925">*</span><span class="ident" id="8316926">got</span>&nbsp;<span class="op" id="8316930">!=</span>&nbsp;<span class="ident" id="8316933">want</span>&nbsp;<span class="op" id="8316938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8316942">t</span><span class="op" id="8316943">.</span><span class="ident" id="8316944">Errorf</span><span class="op" id="8316950">(</span><span class="string" id="8316951">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8316969">,</span>&nbsp;<span class="op" id="8316971">*</span><span class="ident" id="8316972">got</span><span class="op" id="8316975">,</span>&nbsp;<span class="ident" id="8316977">want</span><span class="op" id="8316981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8316984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8316987">if</span>&nbsp;<span class="ident" id="8316990">got</span><span class="op" id="8316993">,</span>&nbsp;<span class="ident" id="8316995">want</span>&nbsp;<span class="op" id="8317000">:=</span>&nbsp;<span class="ident" id="8317003">x</span><span class="op" id="8317004">.</span><span class="ident" id="8317005">BW</span><span class="op" id="8317007">,</span>&nbsp;<span class="ident" id="8317009">bw</span><span class="op" id="8317011">;</span>&nbsp;<span class="ident" id="8317013">got</span>&nbsp;<span class="op" id="8317017">!=</span>&nbsp;<span class="ident" id="8317020">want</span>&nbsp;<span class="op" id="8317025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317029">t</span><span class="op" id="8317030">.</span><span class="ident" id="8317031">Errorf</span><span class="op" id="8317037">(</span><span class="string" id="8317038">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8317056">,</span>&nbsp;<span class="ident" id="8317058">got</span><span class="op" id="8317061">,</span>&nbsp;<span class="ident" id="8317063">want</span><span class="op" id="8317067">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8317070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8317074">if</span>&nbsp;<span class="ident" id="8317077">got</span><span class="op" id="8317080">,</span>&nbsp;<span class="ident" id="8317082">want</span>&nbsp;<span class="op" id="8317087">:=</span>&nbsp;<span class="ident" id="8317090">x</span><span class="op" id="8317091">.</span><span class="ident" id="8317092">TV</span><span class="op" id="8317094">,</span>&nbsp;<span class="ident" id="8317096">tv</span><span class="op" id="8317098">;</span>&nbsp;<span class="ident" id="8317100">got</span>&nbsp;<span class="op" id="8317104">==</span>&nbsp;<span class="builtintype" id="8317107">nil</span>&nbsp;<span class="op" id="8317111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317115">t</span><span class="op" id="8317116">.</span><span class="ident" id="8317117">Errorf</span><span class="op" id="8317123">(</span><span class="string" id="8317124">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8317143">,</span>&nbsp;<span class="ident" id="8317145">want</span><span class="op" id="8317149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8317152">}</span>&nbsp;<span class="keyword" id="8317154">else</span>&nbsp;<span class="keyword" id="8317159">if</span>&nbsp;<span class="op" id="8317162">*</span><span class="ident" id="8317163">got</span>&nbsp;<span class="op" id="8317167">!=</span>&nbsp;<span class="ident" id="8317170">want</span>&nbsp;<span class="op" id="8317175">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317179">t</span><span class="op" id="8317180">.</span><span class="ident" id="8317181">Errorf</span><span class="op" id="8317187">(</span><span class="string" id="8317188">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8317206">,</span>&nbsp;<span class="op" id="8317208">*</span><span class="ident" id="8317209">got</span><span class="op" id="8317212">,</span>&nbsp;<span class="ident" id="8317214">want</span><span class="op" id="8317218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8317221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8317224">if</span>&nbsp;<span class="ident" id="8317227">got</span><span class="op" id="8317230">,</span>&nbsp;<span class="ident" id="8317232">want</span>&nbsp;<span class="op" id="8317237">:=</span>&nbsp;<span class="ident" id="8317240">x</span><span class="op" id="8317241">.</span><span class="ident" id="8317242">TW</span><span class="op" id="8317244">,</span>&nbsp;<span class="ident" id="8317246">tw</span><span class="op" id="8317248">;</span>&nbsp;<span class="ident" id="8317250">got</span>&nbsp;<span class="op" id="8317254">!=</span>&nbsp;<span class="ident" id="8317257">want</span>&nbsp;<span class="op" id="8317262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317266">t</span><span class="op" id="8317267">.</span><span class="ident" id="8317268">Errorf</span><span class="op" id="8317274">(</span><span class="string" id="8317275">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8317293">,</span>&nbsp;<span class="ident" id="8317295">got</span><span class="op" id="8317298">,</span>&nbsp;<span class="ident" id="8317300">want</span><span class="op" id="8317304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8317307">}</span><br>
<span class="lineno">535</span><span class="op" id="8317309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8317312">func</span>&nbsp;<span class="ident" id="8317317">TestGobEncoderFieldTypeError</span><span class="op" id="8317345">(</span><span class="ident" id="8317346">t</span>&nbsp;<span class="op" id="8317348">*</span><span class="ident" id="8317349">testing</span><span class="op" id="8317356">.</span><span class="ident" id="8317357">T</span><span class="op" id="8317358">)</span>&nbsp;<span class="op" id="8317360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8317363">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317400">b</span>&nbsp;<span class="op" id="8317402">:=</span>&nbsp;<span class="builtinfunc" id="8317405">new</span><span class="op" id="8317408">(</span><span class="ident" id="8317409">bytes</span><span class="op" id="8317414">.</span><span class="ident" id="8317415">Buffer</span><span class="op" id="8317421">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317424">enc</span>&nbsp;<span class="op" id="8317428">:=</span>&nbsp;<span class="ident" id="8317431">NewEncoder</span><span class="op" id="8317441">(</span><span class="ident" id="8317442">b</span><span class="op" id="8317443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317446">err</span>&nbsp;<span class="op" id="8317450">:=</span>&nbsp;<span class="ident" id="8317453">enc</span><span class="op" id="8317456">.</span><span class="ident" id="8317457">Encode</span><span class="op" id="8317463">(</span><span class="ident" id="8317464">GobTest1</span><span class="op" id="8317472">{</span><span class="num" id="8317473">17</span><span class="op" id="8317475">,</span>&nbsp;<span class="op" id="8317477">&amp;</span><span class="ident" id="8317478">StringStruct</span><span class="op" id="8317490">{</span><span class="string" id="8317491">&#34;ABC&#34;</span><span class="op" id="8317496">}</span><span class="op" id="8317497">}</span><span class="op" id="8317498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8317501">if</span>&nbsp;<span class="ident" id="8317504">err</span>&nbsp;<span class="op" id="8317508">!=</span>&nbsp;<span class="builtintype" id="8317511">nil</span>&nbsp;<span class="op" id="8317515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317519">t</span><span class="op" id="8317520">.</span><span class="ident" id="8317521">Fatal</span><span class="op" id="8317526">(</span><span class="string" id="8317527">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8317542">,</span>&nbsp;<span class="ident" id="8317544">err</span><span class="op" id="8317547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8317550">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317553">dec</span>&nbsp;<span class="op" id="8317557">:=</span>&nbsp;<span class="ident" id="8317560">NewDecoder</span><span class="op" id="8317570">(</span><span class="ident" id="8317571">b</span><span class="op" id="8317572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317575">x</span>&nbsp;<span class="op" id="8317577">:=</span>&nbsp;<span class="op" id="8317580">&amp;</span><span class="ident" id="8317581">GobTest2</span><span class="op" id="8317589">{</span><span class="op" id="8317590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317593">err</span>&nbsp;<span class="op" id="8317597">=</span>&nbsp;<span class="ident" id="8317599">dec</span><span class="op" id="8317602">.</span><span class="ident" id="8317603">Decode</span><span class="op" id="8317609">(</span><span class="ident" id="8317610">x</span><span class="op" id="8317611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8317614">if</span>&nbsp;<span class="ident" id="8317617">err</span>&nbsp;<span class="op" id="8317621">==</span>&nbsp;<span class="builtintype" id="8317624">nil</span>&nbsp;<span class="op" id="8317628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317632">t</span><span class="op" id="8317633">.</span><span class="ident" id="8317634">Fatal</span><span class="op" id="8317639">(</span><span class="string" id="8317640">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="8317710">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8317713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8317716">if</span>&nbsp;<span class="ident" id="8317719">strings</span><span class="op" id="8317726">.</span><span class="ident" id="8317727">Index</span><span class="op" id="8317732">(</span><span class="ident" id="8317733">err</span><span class="op" id="8317736">.</span><span class="ident" id="8317737">Error</span><span class="op" id="8317742">(</span><span class="op" id="8317743">)</span><span class="op" id="8317744">,</span>&nbsp;<span class="string" id="8317746">&#34;type&#34;</span><span class="op" id="8317752">)</span>&nbsp;<span class="op" id="8317754">&lt;</span>&nbsp;<span class="num" id="8317756">0</span>&nbsp;<span class="op" id="8317758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317762">t</span><span class="op" id="8317763">.</span><span class="ident" id="8317764">Fatal</span><span class="op" id="8317769">(</span><span class="string" id="8317770">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8317796">,</span>&nbsp;<span class="ident" id="8317798">err</span><span class="op" id="8317801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8317804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8317807">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317844">b</span><span class="op" id="8317845">.</span><span class="ident" id="8317846">Reset</span><span class="op" id="8317851">(</span><span class="op" id="8317852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317855">err</span>&nbsp;<span class="op" id="8317859">=</span>&nbsp;<span class="ident" id="8317861">enc</span><span class="op" id="8317864">.</span><span class="ident" id="8317865">Encode</span><span class="op" id="8317871">(</span><span class="ident" id="8317872">GobTest2</span><span class="op" id="8317880">{</span><span class="num" id="8317881">17</span><span class="op" id="8317883">,</span>&nbsp;<span class="string" id="8317885">&#34;ABC&#34;</span><span class="op" id="8317890">}</span><span class="op" id="8317891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8317894">if</span>&nbsp;<span class="ident" id="8317897">err</span>&nbsp;<span class="op" id="8317901">!=</span>&nbsp;<span class="builtintype" id="8317904">nil</span>&nbsp;<span class="op" id="8317908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317912">t</span><span class="op" id="8317913">.</span><span class="ident" id="8317914">Fatal</span><span class="op" id="8317919">(</span><span class="string" id="8317920">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8317935">,</span>&nbsp;<span class="ident" id="8317937">err</span><span class="op" id="8317940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8317943">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317946">y</span>&nbsp;<span class="op" id="8317948">:=</span>&nbsp;<span class="op" id="8317951">&amp;</span><span class="ident" id="8317952">GobTest1</span><span class="op" id="8317960">{</span><span class="op" id="8317961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8317964">err</span>&nbsp;<span class="op" id="8317968">=</span>&nbsp;<span class="ident" id="8317970">dec</span><span class="op" id="8317973">.</span><span class="ident" id="8317974">Decode</span><span class="op" id="8317980">(</span><span class="ident" id="8317981">y</span><span class="op" id="8317982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8317985">if</span>&nbsp;<span class="ident" id="8317988">err</span>&nbsp;<span class="op" id="8317992">==</span>&nbsp;<span class="builtintype" id="8317995">nil</span>&nbsp;<span class="op" id="8317999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318003">t</span><span class="op" id="8318004">.</span><span class="ident" id="8318005">Fatal</span><span class="op" id="8318010">(</span><span class="string" id="8318011">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="8318081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8318084">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8318087">if</span>&nbsp;<span class="ident" id="8318090">strings</span><span class="op" id="8318097">.</span><span class="ident" id="8318098">Index</span><span class="op" id="8318103">(</span><span class="ident" id="8318104">err</span><span class="op" id="8318107">.</span><span class="ident" id="8318108">Error</span><span class="op" id="8318113">(</span><span class="op" id="8318114">)</span><span class="op" id="8318115">,</span>&nbsp;<span class="string" id="8318117">&#34;type&#34;</span><span class="op" id="8318123">)</span>&nbsp;<span class="op" id="8318125">&lt;</span>&nbsp;<span class="num" id="8318127">0</span>&nbsp;<span class="op" id="8318129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318133">t</span><span class="op" id="8318134">.</span><span class="ident" id="8318135">Fatal</span><span class="op" id="8318140">(</span><span class="string" id="8318141">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8318167">,</span>&nbsp;<span class="ident" id="8318169">err</span><span class="op" id="8318172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8318175">}</span><br>
<span class="lineno"></span><span class="op" id="8318177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="8318180">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="8318265">func</span>&nbsp;<span class="ident" id="8318270">TestGobEncoderStructSingleton</span><span class="op" id="8318299">(</span><span class="ident" id="8318300">t</span>&nbsp;<span class="op" id="8318302">*</span><span class="ident" id="8318303">testing</span><span class="op" id="8318310">.</span><span class="ident" id="8318311">T</span><span class="op" id="8318312">)</span>&nbsp;<span class="op" id="8318314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318317">b</span>&nbsp;<span class="op" id="8318319">:=</span>&nbsp;<span class="builtinfunc" id="8318322">new</span><span class="op" id="8318325">(</span><span class="ident" id="8318326">bytes</span><span class="op" id="8318331">.</span><span class="ident" id="8318332">Buffer</span><span class="op" id="8318338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318341">enc</span>&nbsp;<span class="op" id="8318345">:=</span>&nbsp;<span class="ident" id="8318348">NewEncoder</span><span class="op" id="8318358">(</span><span class="ident" id="8318359">b</span><span class="op" id="8318360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318363">err</span>&nbsp;<span class="op" id="8318367">:=</span>&nbsp;<span class="ident" id="8318370">enc</span><span class="op" id="8318373">.</span><span class="ident" id="8318374">Encode</span><span class="op" id="8318380">(</span><span class="op" id="8318381">&amp;</span><span class="ident" id="8318382">ByteStruct</span><span class="op" id="8318392">{</span><span class="string" id="8318393">&#39;A&#39;</span><span class="op" id="8318396">}</span><span class="op" id="8318397">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8318400">if</span>&nbsp;<span class="ident" id="8318403">err</span>&nbsp;<span class="op" id="8318407">!=</span>&nbsp;<span class="builtintype" id="8318410">nil</span>&nbsp;<span class="op" id="8318414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318418">t</span><span class="op" id="8318419">.</span><span class="ident" id="8318420">Fatal</span><span class="op" id="8318425">(</span><span class="string" id="8318426">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8318441">,</span>&nbsp;<span class="ident" id="8318443">err</span><span class="op" id="8318446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8318449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318452">dec</span>&nbsp;<span class="op" id="8318456">:=</span>&nbsp;<span class="ident" id="8318459">NewDecoder</span><span class="op" id="8318469">(</span><span class="ident" id="8318470">b</span><span class="op" id="8318471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318474">x</span>&nbsp;<span class="op" id="8318476">:=</span>&nbsp;<span class="builtinfunc" id="8318479">new</span><span class="op" id="8318482">(</span><span class="ident" id="8318483">ByteStruct</span><span class="op" id="8318493">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318496">err</span>&nbsp;<span class="op" id="8318500">=</span>&nbsp;<span class="ident" id="8318502">dec</span><span class="op" id="8318505">.</span><span class="ident" id="8318506">Decode</span><span class="op" id="8318512">(</span><span class="ident" id="8318513">x</span><span class="op" id="8318514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8318517">if</span>&nbsp;<span class="ident" id="8318520">err</span>&nbsp;<span class="op" id="8318524">!=</span>&nbsp;<span class="builtintype" id="8318527">nil</span>&nbsp;<span class="op" id="8318531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318535">t</span><span class="op" id="8318536">.</span><span class="ident" id="8318537">Fatal</span><span class="op" id="8318542">(</span><span class="string" id="8318543">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8318558">,</span>&nbsp;<span class="ident" id="8318560">err</span><span class="op" id="8318563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8318566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8318569">if</span>&nbsp;<span class="ident" id="8318572">x</span><span class="op" id="8318573">.</span><span class="ident" id="8318574">a</span>&nbsp;<span class="op" id="8318576">!=</span>&nbsp;<span class="string" id="8318579">&#39;A&#39;</span>&nbsp;<span class="op" id="8318583">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318587">t</span><span class="op" id="8318588">.</span><span class="ident" id="8318589">Errorf</span><span class="op" id="8318595">(</span><span class="string" id="8318596">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8318617">,</span>&nbsp;<span class="ident" id="8318619">x</span><span class="op" id="8318620">.</span><span class="ident" id="8318621">a</span><span class="op" id="8318622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8318625">}</span><br>
<span class="lineno"></span><span class="op" id="8318627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8318630">func</span>&nbsp;<span class="ident" id="8318635">TestGobEncoderNonStructSingleton</span><span class="op" id="8318667">(</span><span class="ident" id="8318668">t</span>&nbsp;<span class="op" id="8318670">*</span><span class="ident" id="8318671">testing</span><span class="op" id="8318678">.</span><span class="ident" id="8318679">T</span><span class="op" id="8318680">)</span>&nbsp;<span class="op" id="8318682">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318685">b</span>&nbsp;<span class="op" id="8318687">:=</span>&nbsp;<span class="builtinfunc" id="8318690">new</span><span class="op" id="8318693">(</span><span class="ident" id="8318694">bytes</span><span class="op" id="8318699">.</span><span class="ident" id="8318700">Buffer</span><span class="op" id="8318706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318709">enc</span>&nbsp;<span class="op" id="8318713">:=</span>&nbsp;<span class="ident" id="8318716">NewEncoder</span><span class="op" id="8318726">(</span><span class="ident" id="8318727">b</span><span class="op" id="8318728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8318731">var</span>&nbsp;<span class="ident" id="8318735">g</span>&nbsp;<span class="ident" id="8318737">Gobber</span>&nbsp;<span class="op" id="8318744">=</span>&nbsp;<span class="num" id="8318746">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318752">err</span>&nbsp;<span class="op" id="8318756">:=</span>&nbsp;<span class="ident" id="8318759">enc</span><span class="op" id="8318762">.</span><span class="ident" id="8318763">Encode</span><span class="op" id="8318769">(</span><span class="op" id="8318770">&amp;</span><span class="ident" id="8318771">g</span><span class="op" id="8318772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8318775">if</span>&nbsp;<span class="ident" id="8318778">err</span>&nbsp;<span class="op" id="8318782">!=</span>&nbsp;<span class="builtintype" id="8318785">nil</span>&nbsp;<span class="op" id="8318789">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318793">t</span><span class="op" id="8318794">.</span><span class="ident" id="8318795">Fatal</span><span class="op" id="8318800">(</span><span class="string" id="8318801">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8318816">,</span>&nbsp;<span class="ident" id="8318818">err</span><span class="op" id="8318821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8318824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318827">dec</span>&nbsp;<span class="op" id="8318831">:=</span>&nbsp;<span class="ident" id="8318834">NewDecoder</span><span class="op" id="8318844">(</span><span class="ident" id="8318845">b</span><span class="op" id="8318846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8318849">var</span>&nbsp;<span class="ident" id="8318853">x</span>&nbsp;<span class="ident" id="8318855">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318863">err</span>&nbsp;<span class="op" id="8318867">=</span>&nbsp;<span class="ident" id="8318869">dec</span><span class="op" id="8318872">.</span><span class="ident" id="8318873">Decode</span><span class="op" id="8318879">(</span><span class="op" id="8318880">&amp;</span><span class="ident" id="8318881">x</span><span class="op" id="8318882">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8318885">if</span>&nbsp;<span class="ident" id="8318888">err</span>&nbsp;<span class="op" id="8318892">!=</span>&nbsp;<span class="builtintype" id="8318895">nil</span>&nbsp;<span class="op" id="8318899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318903">t</span><span class="op" id="8318904">.</span><span class="ident" id="8318905">Fatal</span><span class="op" id="8318910">(</span><span class="string" id="8318911">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8318926">,</span>&nbsp;<span class="ident" id="8318928">err</span><span class="op" id="8318931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8318934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8318937">if</span>&nbsp;<span class="ident" id="8318940">x</span>&nbsp;<span class="op" id="8318942">!=</span>&nbsp;<span class="num" id="8318945">1234</span>&nbsp;<span class="op" id="8318950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8318954">t</span><span class="op" id="8318955">.</span><span class="ident" id="8318956">Errorf</span><span class="op" id="8318962">(</span><span class="string" id="8318963">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8318985">,</span>&nbsp;<span class="ident" id="8318987">x</span><span class="op" id="8318988">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8318991">}</span><br>
<span class="lineno"></span><span class="op" id="8318993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8318996">func</span>&nbsp;<span class="ident" id="8319001">TestGobEncoderIgnoreStructField</span><span class="op" id="8319032">(</span><span class="ident" id="8319033">t</span>&nbsp;<span class="op" id="8319035">*</span><span class="ident" id="8319036">testing</span><span class="op" id="8319043">.</span><span class="ident" id="8319044">T</span><span class="op" id="8319045">)</span>&nbsp;<span class="op" id="8319047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319050">b</span>&nbsp;<span class="op" id="8319052">:=</span>&nbsp;<span class="builtinfunc" id="8319055">new</span><span class="op" id="8319058">(</span><span class="ident" id="8319059">bytes</span><span class="op" id="8319064">.</span><span class="ident" id="8319065">Buffer</span><span class="op" id="8319071">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8319074">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319112">enc</span>&nbsp;<span class="op" id="8319116">:=</span>&nbsp;<span class="ident" id="8319119">NewEncoder</span><span class="op" id="8319129">(</span><span class="ident" id="8319130">b</span><span class="op" id="8319131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319134">err</span>&nbsp;<span class="op" id="8319138">:=</span>&nbsp;<span class="ident" id="8319141">enc</span><span class="op" id="8319144">.</span><span class="ident" id="8319145">Encode</span><span class="op" id="8319151">(</span><span class="ident" id="8319152">GobTest0</span><span class="op" id="8319160">{</span><span class="num" id="8319161">17</span><span class="op" id="8319163">,</span>&nbsp;<span class="op" id="8319165">&amp;</span><span class="ident" id="8319166">ByteStruct</span><span class="op" id="8319176">{</span><span class="string" id="8319177">&#39;A&#39;</span><span class="op" id="8319180">}</span><span class="op" id="8319181">}</span><span class="op" id="8319182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319185">if</span>&nbsp;<span class="ident" id="8319188">err</span>&nbsp;<span class="op" id="8319192">!=</span>&nbsp;<span class="builtintype" id="8319195">nil</span>&nbsp;<span class="op" id="8319199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319203">t</span><span class="op" id="8319204">.</span><span class="ident" id="8319205">Fatal</span><span class="op" id="8319210">(</span><span class="string" id="8319211">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8319226">,</span>&nbsp;<span class="ident" id="8319228">err</span><span class="op" id="8319231">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8319234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319237">dec</span>&nbsp;<span class="op" id="8319241">:=</span>&nbsp;<span class="ident" id="8319244">NewDecoder</span><span class="op" id="8319254">(</span><span class="ident" id="8319255">b</span><span class="op" id="8319256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319259">x</span>&nbsp;<span class="op" id="8319261">:=</span>&nbsp;<span class="builtinfunc" id="8319264">new</span><span class="op" id="8319267">(</span><span class="ident" id="8319268">GobTestIgnoreEncoder</span><span class="op" id="8319288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319291">err</span>&nbsp;<span class="op" id="8319295">=</span>&nbsp;<span class="ident" id="8319297">dec</span><span class="op" id="8319300">.</span><span class="ident" id="8319301">Decode</span><span class="op" id="8319307">(</span><span class="ident" id="8319308">x</span><span class="op" id="8319309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319312">if</span>&nbsp;<span class="ident" id="8319315">err</span>&nbsp;<span class="op" id="8319319">!=</span>&nbsp;<span class="builtintype" id="8319322">nil</span>&nbsp;<span class="op" id="8319326">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319330">t</span><span class="op" id="8319331">.</span><span class="ident" id="8319332">Fatal</span><span class="op" id="8319337">(</span><span class="string" id="8319338">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8319353">,</span>&nbsp;<span class="ident" id="8319355">err</span><span class="op" id="8319358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8319361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319364">if</span>&nbsp;<span class="ident" id="8319367">x</span><span class="op" id="8319368">.</span><span class="ident" id="8319369">X</span>&nbsp;<span class="op" id="8319371">!=</span>&nbsp;<span class="num" id="8319374">17</span>&nbsp;<span class="op" id="8319377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319381">t</span><span class="op" id="8319382">.</span><span class="ident" id="8319383">Errorf</span><span class="op" id="8319389">(</span><span class="string" id="8319390">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8319410">,</span>&nbsp;<span class="ident" id="8319412">x</span><span class="op" id="8319413">.</span><span class="ident" id="8319414">X</span><span class="op" id="8319415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8319418">}</span><br>
<span class="lineno">625</span><span class="op" id="8319420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8319423">func</span>&nbsp;<span class="ident" id="8319428">TestGobEncoderIgnoreNonStructField</span><span class="op" id="8319462">(</span><span class="ident" id="8319463">t</span>&nbsp;<span class="op" id="8319465">*</span><span class="ident" id="8319466">testing</span><span class="op" id="8319473">.</span><span class="ident" id="8319474">T</span><span class="op" id="8319475">)</span>&nbsp;<span class="op" id="8319477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319480">b</span>&nbsp;<span class="op" id="8319482">:=</span>&nbsp;<span class="builtinfunc" id="8319485">new</span><span class="op" id="8319488">(</span><span class="ident" id="8319489">bytes</span><span class="op" id="8319494">.</span><span class="ident" id="8319495">Buffer</span><span class="op" id="8319501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8319504">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319542">enc</span>&nbsp;<span class="op" id="8319546">:=</span>&nbsp;<span class="ident" id="8319549">NewEncoder</span><span class="op" id="8319559">(</span><span class="ident" id="8319560">b</span><span class="op" id="8319561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319564">gobber</span>&nbsp;<span class="op" id="8319571">:=</span>&nbsp;<span class="ident" id="8319574">Gobber</span><span class="op" id="8319580">(</span><span class="num" id="8319581">23</span><span class="op" id="8319583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319586">bgobber</span>&nbsp;<span class="op" id="8319594">:=</span>&nbsp;<span class="ident" id="8319597">BinaryGobber</span><span class="op" id="8319609">(</span><span class="num" id="8319610">24</span><span class="op" id="8319612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319615">tgobber</span>&nbsp;<span class="op" id="8319623">:=</span>&nbsp;<span class="ident" id="8319626">TextGobber</span><span class="op" id="8319636">(</span><span class="num" id="8319637">25</span><span class="op" id="8319639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319642">err</span>&nbsp;<span class="op" id="8319646">:=</span>&nbsp;<span class="ident" id="8319649">enc</span><span class="op" id="8319652">.</span><span class="ident" id="8319653">Encode</span><span class="op" id="8319659">(</span><span class="ident" id="8319660">GobTest3</span><span class="op" id="8319668">{</span><span class="num" id="8319669">17</span><span class="op" id="8319671">,</span>&nbsp;<span class="op" id="8319673">&amp;</span><span class="ident" id="8319674">gobber</span><span class="op" id="8319680">,</span>&nbsp;<span class="op" id="8319682">&amp;</span><span class="ident" id="8319683">bgobber</span><span class="op" id="8319690">,</span>&nbsp;<span class="op" id="8319692">&amp;</span><span class="ident" id="8319693">tgobber</span><span class="op" id="8319700">}</span><span class="op" id="8319701">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319704">if</span>&nbsp;<span class="ident" id="8319707">err</span>&nbsp;<span class="op" id="8319711">!=</span>&nbsp;<span class="builtintype" id="8319714">nil</span>&nbsp;<span class="op" id="8319718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319722">t</span><span class="op" id="8319723">.</span><span class="ident" id="8319724">Fatal</span><span class="op" id="8319729">(</span><span class="string" id="8319730">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8319745">,</span>&nbsp;<span class="ident" id="8319747">err</span><span class="op" id="8319750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8319753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319756">dec</span>&nbsp;<span class="op" id="8319760">:=</span>&nbsp;<span class="ident" id="8319763">NewDecoder</span><span class="op" id="8319773">(</span><span class="ident" id="8319774">b</span><span class="op" id="8319775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319778">x</span>&nbsp;<span class="op" id="8319780">:=</span>&nbsp;<span class="builtinfunc" id="8319783">new</span><span class="op" id="8319786">(</span><span class="ident" id="8319787">GobTestIgnoreEncoder</span><span class="op" id="8319807">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319810">err</span>&nbsp;<span class="op" id="8319814">=</span>&nbsp;<span class="ident" id="8319816">dec</span><span class="op" id="8319819">.</span><span class="ident" id="8319820">Decode</span><span class="op" id="8319826">(</span><span class="ident" id="8319827">x</span><span class="op" id="8319828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319831">if</span>&nbsp;<span class="ident" id="8319834">err</span>&nbsp;<span class="op" id="8319838">!=</span>&nbsp;<span class="builtintype" id="8319841">nil</span>&nbsp;<span class="op" id="8319845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319849">t</span><span class="op" id="8319850">.</span><span class="ident" id="8319851">Fatal</span><span class="op" id="8319856">(</span><span class="string" id="8319857">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8319872">,</span>&nbsp;<span class="ident" id="8319874">err</span><span class="op" id="8319877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8319880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319883">if</span>&nbsp;<span class="ident" id="8319886">x</span><span class="op" id="8319887">.</span><span class="ident" id="8319888">X</span>&nbsp;<span class="op" id="8319890">!=</span>&nbsp;<span class="num" id="8319893">17</span>&nbsp;<span class="op" id="8319896">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319900">t</span><span class="op" id="8319901">.</span><span class="ident" id="8319902">Errorf</span><span class="op" id="8319908">(</span><span class="string" id="8319909">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8319929">,</span>&nbsp;<span class="ident" id="8319931">x</span><span class="op" id="8319932">.</span><span class="ident" id="8319933">X</span><span class="op" id="8319934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8319937">}</span><br>
<span class="lineno"></span><span class="op" id="8319939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8319942">func</span>&nbsp;<span class="ident" id="8319947">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="8319977">(</span><span class="ident" id="8319978">t</span>&nbsp;<span class="op" id="8319980">*</span><span class="ident" id="8319981">testing</span><span class="op" id="8319988">.</span><span class="ident" id="8319989">T</span><span class="op" id="8319990">)</span>&nbsp;<span class="op" id="8319992">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319995">b</span>&nbsp;<span class="op" id="8319997">:=</span>&nbsp;<span class="builtinfunc" id="8320000">new</span><span class="op" id="8320003">(</span><span class="ident" id="8320004">bytes</span><span class="op" id="8320009">.</span><span class="ident" id="8320010">Buffer</span><span class="op" id="8320016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8320019">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320057">enc</span>&nbsp;<span class="op" id="8320061">:=</span>&nbsp;<span class="ident" id="8320064">NewEncoder</span><span class="op" id="8320074">(</span><span class="ident" id="8320075">b</span><span class="op" id="8320076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320079">err</span>&nbsp;<span class="op" id="8320083">:=</span>&nbsp;<span class="ident" id="8320086">enc</span><span class="op" id="8320089">.</span><span class="ident" id="8320090">Encode</span><span class="op" id="8320096">(</span><span class="ident" id="8320097">GobTest0</span><span class="op" id="8320105">{</span><span class="ident" id="8320106">X</span><span class="op" id="8320107">:</span>&nbsp;<span class="num" id="8320109">18</span><span class="op" id="8320111">}</span><span class="op" id="8320112">)</span>&nbsp;<span class="comment" id="8320114">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320127">if</span>&nbsp;<span class="ident" id="8320130">err</span>&nbsp;<span class="op" id="8320134">!=</span>&nbsp;<span class="builtintype" id="8320137">nil</span>&nbsp;<span class="op" id="8320141">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320145">t</span><span class="op" id="8320146">.</span><span class="ident" id="8320147">Fatal</span><span class="op" id="8320152">(</span><span class="string" id="8320153">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8320168">,</span>&nbsp;<span class="ident" id="8320170">err</span><span class="op" id="8320173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8320176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320179">dec</span>&nbsp;<span class="op" id="8320183">:=</span>&nbsp;<span class="ident" id="8320186">NewDecoder</span><span class="op" id="8320196">(</span><span class="ident" id="8320197">b</span><span class="op" id="8320198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320201">x</span>&nbsp;<span class="op" id="8320203">:=</span>&nbsp;<span class="builtinfunc" id="8320206">new</span><span class="op" id="8320209">(</span><span class="ident" id="8320210">GobTest0</span><span class="op" id="8320218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320221">err</span>&nbsp;<span class="op" id="8320225">=</span>&nbsp;<span class="ident" id="8320227">dec</span><span class="op" id="8320230">.</span><span class="ident" id="8320231">Decode</span><span class="op" id="8320237">(</span><span class="ident" id="8320238">x</span><span class="op" id="8320239">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320242">if</span>&nbsp;<span class="ident" id="8320245">err</span>&nbsp;<span class="op" id="8320249">!=</span>&nbsp;<span class="builtintype" id="8320252">nil</span>&nbsp;<span class="op" id="8320256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320260">t</span><span class="op" id="8320261">.</span><span class="ident" id="8320262">Fatal</span><span class="op" id="8320267">(</span><span class="string" id="8320268">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8320283">,</span>&nbsp;<span class="ident" id="8320285">err</span><span class="op" id="8320288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8320291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320294">if</span>&nbsp;<span class="ident" id="8320297">x</span><span class="op" id="8320298">.</span><span class="ident" id="8320299">X</span>&nbsp;<span class="op" id="8320301">!=</span>&nbsp;<span class="num" id="8320304">18</span>&nbsp;<span class="op" id="8320307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320311">t</span><span class="op" id="8320312">.</span><span class="ident" id="8320313">Errorf</span><span class="op" id="8320319">(</span><span class="string" id="8320320">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8320347">,</span>&nbsp;<span class="ident" id="8320349">x</span><span class="op" id="8320350">.</span><span class="ident" id="8320351">X</span><span class="op" id="8320352">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8320355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320358">if</span>&nbsp;<span class="ident" id="8320361">x</span><span class="op" id="8320362">.</span><span class="ident" id="8320363">G</span>&nbsp;<span class="op" id="8320365">!=</span>&nbsp;<span class="builtintype" id="8320368">nil</span>&nbsp;<span class="op" id="8320372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320376">t</span><span class="op" id="8320377">.</span><span class="ident" id="8320378">Errorf</span><span class="op" id="8320384">(</span><span class="string" id="8320385">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8320413">,</span>&nbsp;<span class="ident" id="8320415">x</span><span class="op" id="8320416">.</span><span class="ident" id="8320417">G</span><span class="op" id="8320418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8320421">}</span><br>
<span class="lineno"></span><span class="op" id="8320423">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="8320426">type</span>&nbsp;<span class="ident" id="8320431">gobDecoderBug0</span>&nbsp;<span class="keyword" id="8320446">struct</span>&nbsp;<span class="op" id="8320453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320456">foo</span><span class="op" id="8320459">,</span>&nbsp;<span class="ident" id="8320461">bar</span>&nbsp;<span class="builtintype" id="8320465">string</span><br>
<span class="lineno"></span><span class="op" id="8320472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="8320475">func</span>&nbsp;<span class="op" id="8320480">(</span><span class="ident" id="8320481">br</span>&nbsp;<span class="op" id="8320484">*</span><span class="ident" id="8320485">gobDecoderBug0</span><span class="op" id="8320499">)</span>&nbsp;<span class="ident" id="8320501">String</span><span class="op" id="8320507">(</span><span class="op" id="8320508">)</span>&nbsp;<span class="builtintype" id="8320510">string</span>&nbsp;<span class="op" id="8320517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320520">return</span>&nbsp;<span class="ident" id="8320527">br</span><span class="op" id="8320529">.</span><span class="ident" id="8320530">foo</span>&nbsp;<span class="op" id="8320534">+</span>&nbsp;<span class="string" id="8320536">&#34;-&#34;</span>&nbsp;<span class="op" id="8320540">+</span>&nbsp;<span class="ident" id="8320542">br</span><span class="op" id="8320544">.</span><span class="ident" id="8320545">bar</span><br>
<span class="lineno"></span><span class="op" id="8320549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8320552">func</span>&nbsp;<span class="op" id="8320557">(</span><span class="ident" id="8320558">br</span>&nbsp;<span class="op" id="8320561">*</span><span class="ident" id="8320562">gobDecoderBug0</span><span class="op" id="8320576">)</span>&nbsp;<span class="ident" id="8320578">GobEncode</span><span class="op" id="8320587">(</span><span class="op" id="8320588">)</span>&nbsp;<span class="op" id="8320590">(</span><span class="op" id="8320591">[</span><span class="op" id="8320592">]</span><span class="builtintype" id="8320593">byte</span><span class="op" id="8320597">,</span>&nbsp;<span class="builtintype" id="8320599">error</span><span class="op" id="8320604">)</span>&nbsp;<span class="op" id="8320606">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320609">return</span>&nbsp;<span class="op" id="8320616">[</span><span class="op" id="8320617">]</span><span class="builtintype" id="8320618">byte</span><span class="op" id="8320622">(</span><span class="ident" id="8320623">br</span><span class="op" id="8320625">.</span><span class="ident" id="8320626">String</span><span class="op" id="8320632">(</span><span class="op" id="8320633">)</span><span class="op" id="8320634">)</span><span class="op" id="8320635">,</span>&nbsp;<span class="builtintype" id="8320637">nil</span><br>
<span class="lineno"></span><span class="op" id="8320641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8320644">func</span>&nbsp;<span class="op" id="8320649">(</span><span class="ident" id="8320650">br</span>&nbsp;<span class="op" id="8320653">*</span><span class="ident" id="8320654">gobDecoderBug0</span><span class="op" id="8320668">)</span>&nbsp;<span class="ident" id="8320670">GobDecode</span><span class="op" id="8320679">(</span><span class="ident" id="8320680">b</span>&nbsp;<span class="op" id="8320682">[</span><span class="op" id="8320683">]</span><span class="builtintype" id="8320684">byte</span><span class="op" id="8320688">)</span>&nbsp;<span class="builtintype" id="8320690">error</span>&nbsp;<span class="op" id="8320696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320699">br</span><span class="op" id="8320701">.</span><span class="ident" id="8320702">foo</span>&nbsp;<span class="op" id="8320706">=</span>&nbsp;<span class="string" id="8320708">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320715">br</span><span class="op" id="8320717">.</span><span class="ident" id="8320718">bar</span>&nbsp;<span class="op" id="8320722">=</span>&nbsp;<span class="string" id="8320724">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320731">return</span>&nbsp;<span class="builtintype" id="8320738">nil</span><br>
<span class="lineno"></span><span class="op" id="8320742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8320745">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="8320811">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="8320833">func</span>&nbsp;<span class="ident" id="8320838">TestGobEncoderExtraIndirect</span><span class="op" id="8320865">(</span><span class="ident" id="8320866">t</span>&nbsp;<span class="op" id="8320868">*</span><span class="ident" id="8320869">testing</span><span class="op" id="8320876">.</span><span class="ident" id="8320877">T</span><span class="op" id="8320878">)</span>&nbsp;<span class="op" id="8320880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320883">gdb</span>&nbsp;<span class="op" id="8320887">:=</span>&nbsp;<span class="op" id="8320890">&amp;</span><span class="ident" id="8320891">gobDecoderBug0</span><span class="op" id="8320905">{</span><span class="string" id="8320906">&#34;foo&#34;</span><span class="op" id="8320911">,</span>&nbsp;<span class="string" id="8320913">&#34;bar&#34;</span><span class="op" id="8320918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320921">buf</span>&nbsp;<span class="op" id="8320925">:=</span>&nbsp;<span class="builtinfunc" id="8320928">new</span><span class="op" id="8320931">(</span><span class="ident" id="8320932">bytes</span><span class="op" id="8320937">.</span><span class="ident" id="8320938">Buffer</span><span class="op" id="8320944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320947">e</span>&nbsp;<span class="op" id="8320949">:=</span>&nbsp;<span class="ident" id="8320952">NewEncoder</span><span class="op" id="8320962">(</span><span class="ident" id="8320963">buf</span><span class="op" id="8320966">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320969">if</span>&nbsp;<span class="ident" id="8320972">err</span>&nbsp;<span class="op" id="8320976">:=</span>&nbsp;<span class="ident" id="8320979">e</span><span class="op" id="8320980">.</span><span class="ident" id="8320981">Encode</span><span class="op" id="8320987">(</span><span class="ident" id="8320988">gdb</span><span class="op" id="8320991">)</span><span class="op" id="8320992">;</span>&nbsp;<span class="ident" id="8320994">err</span>&nbsp;<span class="op" id="8320998">!=</span>&nbsp;<span class="builtintype" id="8321001">nil</span>&nbsp;<span class="op" id="8321005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321009">t</span><span class="op" id="8321010">.</span><span class="ident" id="8321011">Fatalf</span><span class="op" id="8321017">(</span><span class="string" id="8321018">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="8321030">,</span>&nbsp;<span class="ident" id="8321032">err</span><span class="op" id="8321035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8321038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321041">d</span>&nbsp;<span class="op" id="8321043">:=</span>&nbsp;<span class="ident" id="8321046">NewDecoder</span><span class="op" id="8321056">(</span><span class="ident" id="8321057">buf</span><span class="op" id="8321060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321063">var</span>&nbsp;<span class="ident" id="8321067">got</span>&nbsp;<span class="op" id="8321071">*</span><span class="ident" id="8321072">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321088">if</span>&nbsp;<span class="ident" id="8321091">err</span>&nbsp;<span class="op" id="8321095">:=</span>&nbsp;<span class="ident" id="8321098">d</span><span class="op" id="8321099">.</span><span class="ident" id="8321100">Decode</span><span class="op" id="8321106">(</span><span class="op" id="8321107">&amp;</span><span class="ident" id="8321108">got</span><span class="op" id="8321111">)</span><span class="op" id="8321112">;</span>&nbsp;<span class="ident" id="8321114">err</span>&nbsp;<span class="op" id="8321118">!=</span>&nbsp;<span class="builtintype" id="8321121">nil</span>&nbsp;<span class="op" id="8321125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321129">t</span><span class="op" id="8321130">.</span><span class="ident" id="8321131">Fatalf</span><span class="op" id="8321137">(</span><span class="string" id="8321138">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8321150">,</span>&nbsp;<span class="ident" id="8321152">err</span><span class="op" id="8321155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8321158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321161">if</span>&nbsp;<span class="ident" id="8321164">got</span><span class="op" id="8321167">.</span><span class="ident" id="8321168">foo</span>&nbsp;<span class="op" id="8321172">!=</span>&nbsp;<span class="ident" id="8321175">gdb</span><span class="op" id="8321178">.</span><span class="ident" id="8321179">foo</span>&nbsp;<span class="op" id="8321183">||</span>&nbsp;<span class="ident" id="8321186">got</span><span class="op" id="8321189">.</span><span class="ident" id="8321190">bar</span>&nbsp;<span class="op" id="8321194">!=</span>&nbsp;<span class="ident" id="8321197">gdb</span><span class="op" id="8321200">.</span><span class="ident" id="8321201">bar</span>&nbsp;<span class="op" id="8321205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321209">t</span><span class="op" id="8321210">.</span><span class="ident" id="8321211">Errorf</span><span class="op" id="8321217">(</span><span class="string" id="8321218">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8321237">,</span>&nbsp;<span class="ident" id="8321239">got</span><span class="op" id="8321242">,</span>&nbsp;<span class="ident" id="8321244">gdb</span><span class="op" id="8321247">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8321250">}</span><br>
<span class="lineno"></span><span class="op" id="8321252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8321255">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="8321319">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="8321388">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="8321450">type</span>&nbsp;<span class="ident" id="8321455">isZeroBug</span>&nbsp;<span class="keyword" id="8321465">struct</span>&nbsp;<span class="op" id="8321472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321475">T</span>&nbsp;<span class="ident" id="8321477">time</span><span class="op" id="8321481">.</span><span class="ident" id="8321482">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321488">S</span>&nbsp;<span class="builtintype" id="8321490">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321498">I</span>&nbsp;<span class="builtintype" id="8321500">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321505">A</span>&nbsp;<span class="ident" id="8321507">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321523">F</span>&nbsp;<span class="ident" id="8321525">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="8321544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8321547">type</span>&nbsp;<span class="ident" id="8321552">isZeroBugArray</span>&nbsp;<span class="op" id="8321567">[</span><span class="num" id="8321568">2</span><span class="op" id="8321569">]</span><span class="builtintype" id="8321570">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="8321577">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="8321637">func</span>&nbsp;<span class="op" id="8321642">(</span><span class="ident" id="8321643">a</span>&nbsp;<span class="ident" id="8321645">isZeroBugArray</span><span class="op" id="8321659">)</span>&nbsp;<span class="ident" id="8321661">GobEncode</span><span class="op" id="8321670">(</span><span class="op" id="8321671">)</span>&nbsp;<span class="op" id="8321673">(</span><span class="ident" id="8321674">b</span>&nbsp;<span class="op" id="8321676">[</span><span class="op" id="8321677">]</span><span class="builtintype" id="8321678">byte</span><span class="op" id="8321682">,</span>&nbsp;<span class="ident" id="8321684">e</span>&nbsp;<span class="builtintype" id="8321686">error</span><span class="op" id="8321691">)</span>&nbsp;<span class="op" id="8321693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321696">b</span>&nbsp;<span class="op" id="8321698">=</span>&nbsp;<span class="builtinfunc" id="8321700">append</span><span class="op" id="8321706">(</span><span class="ident" id="8321707">b</span><span class="op" id="8321708">,</span>&nbsp;<span class="ident" id="8321710">a</span><span class="op" id="8321711">[</span><span class="op" id="8321712">:</span><span class="op" id="8321713">]</span><span class="op" id="8321714">...</span><span class="op" id="8321717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321720">return</span>&nbsp;<span class="ident" id="8321727">b</span><span class="op" id="8321728">,</span>&nbsp;<span class="builtintype" id="8321730">nil</span><br>
<span class="lineno">725</span><span class="op" id="8321734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8321737">func</span>&nbsp;<span class="op" id="8321742">(</span><span class="ident" id="8321743">a</span>&nbsp;<span class="op" id="8321745">*</span><span class="ident" id="8321746">isZeroBugArray</span><span class="op" id="8321760">)</span>&nbsp;<span class="ident" id="8321762">GobDecode</span><span class="op" id="8321771">(</span><span class="ident" id="8321772">data</span>&nbsp;<span class="op" id="8321777">[</span><span class="op" id="8321778">]</span><span class="builtintype" id="8321779">byte</span><span class="op" id="8321783">)</span>&nbsp;<span class="builtintype" id="8321785">error</span>&nbsp;<span class="op" id="8321791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321794">if</span>&nbsp;<span class="builtinfunc" id="8321797">len</span><span class="op" id="8321800">(</span><span class="ident" id="8321801">data</span><span class="op" id="8321805">)</span>&nbsp;<span class="op" id="8321807">!=</span>&nbsp;<span class="builtinfunc" id="8321810">len</span><span class="op" id="8321813">(</span><span class="ident" id="8321814">a</span><span class="op" id="8321815">)</span>&nbsp;<span class="op" id="8321817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321821">return</span>&nbsp;<span class="ident" id="8321828">io</span><span class="op" id="8321830">.</span><span class="ident" id="8321831">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8321836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321839">a</span><span class="op" id="8321840">[</span><span class="num" id="8321841">0</span><span class="op" id="8321842">]</span>&nbsp;<span class="op" id="8321844">=</span>&nbsp;<span class="ident" id="8321846">data</span><span class="op" id="8321850">[</span><span class="num" id="8321851">0</span><span class="op" id="8321852">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321855">a</span><span class="op" id="8321856">[</span><span class="num" id="8321857">1</span><span class="op" id="8321858">]</span>&nbsp;<span class="op" id="8321860">=</span>&nbsp;<span class="ident" id="8321862">data</span><span class="op" id="8321866">[</span><span class="num" id="8321867">1</span><span class="op" id="8321868">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321871">return</span>&nbsp;<span class="builtintype" id="8321878">nil</span><br>
<span class="lineno"></span><span class="op" id="8321882">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="8321885">type</span>&nbsp;<span class="ident" id="8321890">isZeroBugInterface</span>&nbsp;<span class="keyword" id="8321909">struct</span>&nbsp;<span class="op" id="8321916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321919">I</span>&nbsp;<span class="keyword" id="8321921">interface</span><span class="op" id="8321930">{</span><span class="op" id="8321931">}</span><br>
<span class="lineno"></span><span class="op" id="8321933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="8321936">func</span>&nbsp;<span class="op" id="8321941">(</span><span class="ident" id="8321942">i</span>&nbsp;<span class="ident" id="8321944">isZeroBugInterface</span><span class="op" id="8321962">)</span>&nbsp;<span class="ident" id="8321964">GobEncode</span><span class="op" id="8321973">(</span><span class="op" id="8321974">)</span>&nbsp;<span class="op" id="8321976">(</span><span class="ident" id="8321977">b</span>&nbsp;<span class="op" id="8321979">[</span><span class="op" id="8321980">]</span><span class="builtintype" id="8321981">byte</span><span class="op" id="8321985">,</span>&nbsp;<span class="ident" id="8321987">e</span>&nbsp;<span class="builtintype" id="8321989">error</span><span class="op" id="8321994">)</span>&nbsp;<span class="op" id="8321996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321999">return</span>&nbsp;<span class="op" id="8322006">[</span><span class="op" id="8322007">]</span><span class="builtintype" id="8322008">byte</span><span class="op" id="8322012">{</span><span class="op" id="8322013">}</span><span class="op" id="8322014">,</span>&nbsp;<span class="builtintype" id="8322016">nil</span><br>
<span class="lineno"></span><span class="op" id="8322020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8322023">func</span>&nbsp;<span class="op" id="8322028">(</span><span class="ident" id="8322029">i</span>&nbsp;<span class="op" id="8322031">*</span><span class="ident" id="8322032">isZeroBugInterface</span><span class="op" id="8322050">)</span>&nbsp;<span class="ident" id="8322052">GobDecode</span><span class="op" id="8322061">(</span><span class="ident" id="8322062">data</span>&nbsp;<span class="op" id="8322067">[</span><span class="op" id="8322068">]</span><span class="builtintype" id="8322069">byte</span><span class="op" id="8322073">)</span>&nbsp;<span class="builtintype" id="8322075">error</span>&nbsp;<span class="op" id="8322081">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322084">return</span>&nbsp;<span class="builtintype" id="8322091">nil</span><br>
<span class="lineno"></span><span class="op" id="8322095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8322098">func</span>&nbsp;<span class="ident" id="8322103">TestGobEncodeIsZero</span><span class="op" id="8322122">(</span><span class="ident" id="8322123">t</span>&nbsp;<span class="op" id="8322125">*</span><span class="ident" id="8322126">testing</span><span class="op" id="8322133">.</span><span class="ident" id="8322134">T</span><span class="op" id="8322135">)</span>&nbsp;<span class="op" id="8322137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322140">x</span>&nbsp;<span class="op" id="8322142">:=</span>&nbsp;<span class="ident" id="8322145">isZeroBug</span><span class="op" id="8322154">{</span><span class="ident" id="8322155">time</span><span class="op" id="8322159">.</span><span class="ident" id="8322160">Now</span><span class="op" id="8322163">(</span><span class="op" id="8322164">)</span><span class="op" id="8322165">,</span>&nbsp;<span class="string" id="8322167">&#34;hello&#34;</span><span class="op" id="8322174">,</span>&nbsp;<span class="op" id="8322176">-</span><span class="num" id="8322177">55</span><span class="op" id="8322179">,</span>&nbsp;<span class="ident" id="8322181">isZeroBugArray</span><span class="op" id="8322195">{</span><span class="num" id="8322196">1</span><span class="op" id="8322197">,</span>&nbsp;<span class="num" id="8322199">2</span><span class="op" id="8322200">}</span><span class="op" id="8322201">,</span>&nbsp;<span class="ident" id="8322203">isZeroBugInterface</span><span class="op" id="8322221">{</span><span class="op" id="8322222">}</span><span class="op" id="8322223">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322226">b</span>&nbsp;<span class="op" id="8322228">:=</span>&nbsp;<span class="builtinfunc" id="8322231">new</span><span class="op" id="8322234">(</span><span class="ident" id="8322235">bytes</span><span class="op" id="8322240">.</span><span class="ident" id="8322241">Buffer</span><span class="op" id="8322247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322250">enc</span>&nbsp;<span class="op" id="8322254">:=</span>&nbsp;<span class="ident" id="8322257">NewEncoder</span><span class="op" id="8322267">(</span><span class="ident" id="8322268">b</span><span class="op" id="8322269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322272">err</span>&nbsp;<span class="op" id="8322276">:=</span>&nbsp;<span class="ident" id="8322279">enc</span><span class="op" id="8322282">.</span><span class="ident" id="8322283">Encode</span><span class="op" id="8322289">(</span><span class="ident" id="8322290">x</span><span class="op" id="8322291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322294">if</span>&nbsp;<span class="ident" id="8322297">err</span>&nbsp;<span class="op" id="8322301">!=</span>&nbsp;<span class="builtintype" id="8322304">nil</span>&nbsp;<span class="op" id="8322308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322312">t</span><span class="op" id="8322313">.</span><span class="ident" id="8322314">Fatal</span><span class="op" id="8322319">(</span><span class="string" id="8322320">&#34;encode:&#34;</span><span class="op" id="8322329">,</span>&nbsp;<span class="ident" id="8322331">err</span><span class="op" id="8322334">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8322337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322340">var</span>&nbsp;<span class="ident" id="8322344">y</span>&nbsp;<span class="ident" id="8322346">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322357">dec</span>&nbsp;<span class="op" id="8322361">:=</span>&nbsp;<span class="ident" id="8322364">NewDecoder</span><span class="op" id="8322374">(</span><span class="ident" id="8322375">b</span><span class="op" id="8322376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322379">err</span>&nbsp;<span class="op" id="8322383">=</span>&nbsp;<span class="ident" id="8322385">dec</span><span class="op" id="8322388">.</span><span class="ident" id="8322389">Decode</span><span class="op" id="8322395">(</span><span class="op" id="8322396">&amp;</span><span class="ident" id="8322397">y</span><span class="op" id="8322398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322401">if</span>&nbsp;<span class="ident" id="8322404">err</span>&nbsp;<span class="op" id="8322408">!=</span>&nbsp;<span class="builtintype" id="8322411">nil</span>&nbsp;<span class="op" id="8322415">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322419">t</span><span class="op" id="8322420">.</span><span class="ident" id="8322421">Fatal</span><span class="op" id="8322426">(</span><span class="string" id="8322427">&#34;decode:&#34;</span><span class="op" id="8322436">,</span>&nbsp;<span class="ident" id="8322438">err</span><span class="op" id="8322441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8322444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322447">if</span>&nbsp;<span class="ident" id="8322450">x</span>&nbsp;<span class="op" id="8322452">!=</span>&nbsp;<span class="ident" id="8322455">y</span>&nbsp;<span class="op" id="8322457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322461">t</span><span class="op" id="8322462">.</span><span class="ident" id="8322463">Fatalf</span><span class="op" id="8322469">(</span><span class="string" id="8322470">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8322480">,</span>&nbsp;<span class="ident" id="8322482">x</span><span class="op" id="8322483">,</span>&nbsp;<span class="ident" id="8322485">y</span><span class="op" id="8322486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8322489">}</span><br>
<span class="lineno">765</span><span class="op" id="8322491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8322494">func</span>&nbsp;<span class="ident" id="8322499">TestGobEncodePtrError</span><span class="op" id="8322520">(</span><span class="ident" id="8322521">t</span>&nbsp;<span class="op" id="8322523">*</span><span class="ident" id="8322524">testing</span><span class="op" id="8322531">.</span><span class="ident" id="8322532">T</span><span class="op" id="8322533">)</span>&nbsp;<span class="op" id="8322535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322538">var</span>&nbsp;<span class="ident" id="8322542">err</span>&nbsp;<span class="builtintype" id="8322546">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322553">b</span>&nbsp;<span class="op" id="8322555">:=</span>&nbsp;<span class="builtinfunc" id="8322558">new</span><span class="op" id="8322561">(</span><span class="ident" id="8322562">bytes</span><span class="op" id="8322567">.</span><span class="ident" id="8322568">Buffer</span><span class="op" id="8322574">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322577">enc</span>&nbsp;<span class="op" id="8322581">:=</span>&nbsp;<span class="ident" id="8322584">NewEncoder</span><span class="op" id="8322594">(</span><span class="ident" id="8322595">b</span><span class="op" id="8322596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322599">err</span>&nbsp;<span class="op" id="8322603">=</span>&nbsp;<span class="ident" id="8322605">enc</span><span class="op" id="8322608">.</span><span class="ident" id="8322609">Encode</span><span class="op" id="8322615">(</span><span class="op" id="8322616">&amp;</span><span class="ident" id="8322617">err</span><span class="op" id="8322620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322623">if</span>&nbsp;<span class="ident" id="8322626">err</span>&nbsp;<span class="op" id="8322630">!=</span>&nbsp;<span class="builtintype" id="8322633">nil</span>&nbsp;<span class="op" id="8322637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322641">t</span><span class="op" id="8322642">.</span><span class="ident" id="8322643">Fatal</span><span class="op" id="8322648">(</span><span class="string" id="8322649">&#34;encode:&#34;</span><span class="op" id="8322658">,</span>&nbsp;<span class="ident" id="8322660">err</span><span class="op" id="8322663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8322666">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322669">dec</span>&nbsp;<span class="op" id="8322673">:=</span>&nbsp;<span class="ident" id="8322676">NewDecoder</span><span class="op" id="8322686">(</span><span class="ident" id="8322687">b</span><span class="op" id="8322688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322691">err2</span>&nbsp;<span class="op" id="8322696">:=</span>&nbsp;<span class="ident" id="8322699">fmt</span><span class="op" id="8322702">.</span><span class="ident" id="8322703">Errorf</span><span class="op" id="8322709">(</span><span class="string" id="8322710">&#34;foo&#34;</span><span class="op" id="8322715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322718">err</span>&nbsp;<span class="op" id="8322722">=</span>&nbsp;<span class="ident" id="8322724">dec</span><span class="op" id="8322727">.</span><span class="ident" id="8322728">Decode</span><span class="op" id="8322734">(</span><span class="op" id="8322735">&amp;</span><span class="ident" id="8322736">err2</span><span class="op" id="8322740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322743">if</span>&nbsp;<span class="ident" id="8322746">err</span>&nbsp;<span class="op" id="8322750">!=</span>&nbsp;<span class="builtintype" id="8322753">nil</span>&nbsp;<span class="op" id="8322757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322761">t</span><span class="op" id="8322762">.</span><span class="ident" id="8322763">Fatal</span><span class="op" id="8322768">(</span><span class="string" id="8322769">&#34;decode:&#34;</span><span class="op" id="8322778">,</span>&nbsp;<span class="ident" id="8322780">err</span><span class="op" id="8322783">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8322786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322789">if</span>&nbsp;<span class="ident" id="8322792">err2</span>&nbsp;<span class="op" id="8322797">!=</span>&nbsp;<span class="builtintype" id="8322800">nil</span>&nbsp;<span class="op" id="8322804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322808">t</span><span class="op" id="8322809">.</span><span class="ident" id="8322810">Fatalf</span><span class="op" id="8322816">(</span><span class="string" id="8322817">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8322839">,</span>&nbsp;<span class="ident" id="8322841">err2</span><span class="op" id="8322845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8322848">}</span><br>
<span class="lineno"></span><span class="op" id="8322850">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="8322853">func</span>&nbsp;<span class="ident" id="8322858">TestNetIP</span><span class="op" id="8322867">(</span><span class="ident" id="8322868">t</span>&nbsp;<span class="op" id="8322870">*</span><span class="ident" id="8322871">testing</span><span class="op" id="8322878">.</span><span class="ident" id="8322879">T</span><span class="op" id="8322880">)</span>&nbsp;<span class="op" id="8322882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8322885">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322928">enc</span>&nbsp;<span class="op" id="8322932">:=</span>&nbsp;<span class="op" id="8322935">[</span><span class="op" id="8322936">]</span><span class="builtintype" id="8322937">byte</span><span class="op" id="8322941">{</span><span class="num" id="8322942">0x07</span><span class="op" id="8322946">,</span>&nbsp;<span class="num" id="8322948">0x0a</span><span class="op" id="8322952">,</span>&nbsp;<span class="num" id="8322954">0x00</span><span class="op" id="8322958">,</span>&nbsp;<span class="num" id="8322960">0x04</span><span class="op" id="8322964">,</span>&nbsp;<span class="num" id="8322966">0x01</span><span class="op" id="8322970">,</span>&nbsp;<span class="num" id="8322972">0x02</span><span class="op" id="8322976">,</span>&nbsp;<span class="num" id="8322978">0x03</span><span class="op" id="8322982">,</span>&nbsp;<span class="num" id="8322984">0x04</span><span class="op" id="8322988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322992">var</span>&nbsp;<span class="ident" id="8322996">ip</span>&nbsp;<span class="ident" id="8322999">net</span><span class="op" id="8323002">.</span><span class="ident" id="8323003">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323007">err</span>&nbsp;<span class="op" id="8323011">:=</span>&nbsp;<span class="ident" id="8323014">NewDecoder</span><span class="op" id="8323024">(</span><span class="ident" id="8323025">bytes</span><span class="op" id="8323030">.</span><span class="ident" id="8323031">NewReader</span><span class="op" id="8323040">(</span><span class="ident" id="8323041">enc</span><span class="op" id="8323044">)</span><span class="op" id="8323045">)</span><span class="op" id="8323046">.</span><span class="ident" id="8323047">Decode</span><span class="op" id="8323053">(</span><span class="op" id="8323054">&amp;</span><span class="ident" id="8323055">ip</span><span class="op" id="8323057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323060">if</span>&nbsp;<span class="ident" id="8323063">err</span>&nbsp;<span class="op" id="8323067">!=</span>&nbsp;<span class="builtintype" id="8323070">nil</span>&nbsp;<span class="op" id="8323074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323078">t</span><span class="op" id="8323079">.</span><span class="ident" id="8323080">Fatalf</span><span class="op" id="8323086">(</span><span class="string" id="8323087">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8323099">,</span>&nbsp;<span class="ident" id="8323101">err</span><span class="op" id="8323104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323107">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323110">if</span>&nbsp;<span class="ident" id="8323113">ip</span><span class="op" id="8323115">.</span><span class="ident" id="8323116">String</span><span class="op" id="8323122">(</span><span class="op" id="8323123">)</span>&nbsp;<span class="op" id="8323125">!=</span>&nbsp;<span class="string" id="8323128">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="8323138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323142">t</span><span class="op" id="8323143">.</span><span class="ident" id="8323144">Errorf</span><span class="op" id="8323150">(</span><span class="string" id="8323151">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="8323180">,</span>&nbsp;<span class="ident" id="8323182">ip</span><span class="op" id="8323184">.</span><span class="ident" id="8323185">String</span><span class="op" id="8323191">(</span><span class="op" id="8323192">)</span><span class="op" id="8323193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323196">}</span><br>
<span class="lineno"></span><span class="op" id="8323198">}</span>
</div>
</body>
</html>
