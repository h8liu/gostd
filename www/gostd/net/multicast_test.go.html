<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html" class="current">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6731936">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6731991">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6732045">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6732096">package</span>&nbsp;<span class="ident" id="6732104">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6732109">import</span>&nbsp;<span class="op" id="6732116">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6732119">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6732126">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6732132">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6732143">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6732153">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6732156">var</span>&nbsp;<span class="ident" id="6732160">ipv4MulticastListenerTests</span>&nbsp;<span class="op" id="6732187">=</span>&nbsp;<span class="op" id="6732189">[</span><span class="op" id="6732190">]</span><span class="keyword" id="6732191">struct</span>&nbsp;<span class="op" id="6732198">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6732201">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6732207">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6732215">gaddr</span>&nbsp;<span class="op" id="6732221">*</span><span class="ident" id="6732222">UDPAddr</span>&nbsp;<span class="comment" id="6732230">//&nbsp;see&nbsp;RFC&nbsp;4727</span><br>
<span class="lineno"></span><span class="op" id="6732246">}</span><span class="op" id="6732247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6732250">{</span><span class="string" id="6732251">&#34;udp&#34;</span><span class="op" id="6732256">,</span>&nbsp;<span class="op" id="6732258">&amp;</span><span class="ident" id="6732259">UDPAddr</span><span class="op" id="6732266">{</span><span class="ident" id="6732267">IP</span><span class="op" id="6732269">:</span>&nbsp;<span class="ident" id="6732271">IPv4</span><span class="op" id="6732275">(</span><span class="num" id="6732276">224</span><span class="op" id="6732279">,</span>&nbsp;<span class="num" id="6732281">0</span><span class="op" id="6732282">,</span>&nbsp;<span class="num" id="6732284">0</span><span class="op" id="6732285">,</span>&nbsp;<span class="num" id="6732287">254</span><span class="op" id="6732290">)</span><span class="op" id="6732291">,</span>&nbsp;<span class="ident" id="6732293">Port</span><span class="op" id="6732297">:</span>&nbsp;<span class="num" id="6732299">12345</span><span class="op" id="6732304">}</span><span class="op" id="6732305">}</span><span class="op" id="6732306">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6732310">{</span><span class="string" id="6732311">&#34;udp4&#34;</span><span class="op" id="6732317">,</span>&nbsp;<span class="op" id="6732319">&amp;</span><span class="ident" id="6732320">UDPAddr</span><span class="op" id="6732327">{</span><span class="ident" id="6732328">IP</span><span class="op" id="6732330">:</span>&nbsp;<span class="ident" id="6732332">IPv4</span><span class="op" id="6732336">(</span><span class="num" id="6732337">224</span><span class="op" id="6732340">,</span>&nbsp;<span class="num" id="6732342">0</span><span class="op" id="6732343">,</span>&nbsp;<span class="num" id="6732345">0</span><span class="op" id="6732346">,</span>&nbsp;<span class="num" id="6732348">254</span><span class="op" id="6732351">)</span><span class="op" id="6732352">,</span>&nbsp;<span class="ident" id="6732354">Port</span><span class="op" id="6732358">:</span>&nbsp;<span class="num" id="6732360">12345</span><span class="op" id="6732365">}</span><span class="op" id="6732366">}</span><span class="op" id="6732367">,</span><br>
<span class="lineno"></span><span class="op" id="6732369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6732372">//&nbsp;TestIPv4MulticastListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6732442">//&nbsp;test&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;group&nbsp;address&nbsp;and&nbsp;same</span><br>
<span class="lineno">25</span><span class="comment" id="6732513">//&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="6732522">func</span>&nbsp;<span class="ident" id="6732527">TestIPv4MulticastListener</span><span class="op" id="6732552">(</span><span class="ident" id="6732553">t</span>&nbsp;<span class="op" id="6732555">*</span><span class="ident" id="6732556">testing</span><span class="op" id="6732563">.</span><span class="ident" id="6732564">T</span><span class="op" id="6732565">)</span>&nbsp;<span class="op" id="6732567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6732570">switch</span>&nbsp;<span class="ident" id="6732577">runtime</span><span class="op" id="6732584">.</span><span class="ident" id="6732585">GOOS</span>&nbsp;<span class="op" id="6732590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6732593">case</span>&nbsp;<span class="string" id="6732598">&#34;android&#34;</span><span class="op" id="6732607">,</span>&nbsp;<span class="string" id="6732609">&#34;nacl&#34;</span><span class="op" id="6732615">,</span>&nbsp;<span class="string" id="6732617">&#34;plan9&#34;</span><span class="op" id="6732624">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6732628">t</span><span class="op" id="6732629">.</span><span class="ident" id="6732630">Skipf</span><span class="op" id="6732635">(</span><span class="string" id="6732636">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6732657">,</span>&nbsp;<span class="ident" id="6732659">runtime</span><span class="op" id="6732666">.</span><span class="ident" id="6732667">GOOS</span><span class="op" id="6732671">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6732674">case</span>&nbsp;<span class="string" id="6732679">&#34;solaris&#34;</span><span class="op" id="6732688">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6732692">t</span><span class="op" id="6732693">.</span><span class="ident" id="6732694">Skipf</span><span class="op" id="6732699">(</span><span class="string" id="6732700">&#34;skipping&nbsp;test&nbsp;on&nbsp;solaris,&nbsp;see&nbsp;issue&nbsp;7399&#34;</span><span class="op" id="6732742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6732745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6732749">closer</span>&nbsp;<span class="op" id="6732756">:=</span>&nbsp;<span class="keyword" id="6732759">func</span><span class="op" id="6732763">(</span><span class="ident" id="6732764">cs</span>&nbsp;<span class="op" id="6732767">[</span><span class="op" id="6732768">]</span><span class="op" id="6732769">*</span><span class="ident" id="6732770">UDPConn</span><span class="op" id="6732777">)</span>&nbsp;<span class="op" id="6732779">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6732783">for</span>&nbsp;<span class="ident" id="6732787">_</span><span class="op" id="6732788">,</span>&nbsp;<span class="ident" id="6732790">c</span>&nbsp;<span class="op" id="6732792">:=</span>&nbsp;<span class="keyword" id="6732795">range</span>&nbsp;<span class="ident" id="6732801">cs</span>&nbsp;<span class="op" id="6732804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6732809">if</span>&nbsp;<span class="ident" id="6732812">c</span>&nbsp;<span class="op" id="6732814">!=</span>&nbsp;<span class="builtintype" id="6732817">nil</span>&nbsp;<span class="op" id="6732821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6732827">c</span><span class="op" id="6732828">.</span><span class="ident" id="6732829">Close</span><span class="op" id="6732834">(</span><span class="op" id="6732835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6732840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6732844">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6732847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6732851">for</span>&nbsp;<span class="ident" id="6732855">_</span><span class="op" id="6732856">,</span>&nbsp;<span class="ident" id="6732858">ifi</span>&nbsp;<span class="op" id="6732862">:=</span>&nbsp;<span class="keyword" id="6732865">range</span>&nbsp;<span class="op" id="6732871">[</span><span class="op" id="6732872">]</span><span class="op" id="6732873">*</span><span class="ident" id="6732874">Interface</span><span class="op" id="6732883">{</span><span class="ident" id="6732884">loopbackInterface</span><span class="op" id="6732901">(</span><span class="op" id="6732902">)</span><span class="op" id="6732903">,</span>&nbsp;<span class="builtintype" id="6732905">nil</span><span class="op" id="6732908">}</span>&nbsp;<span class="op" id="6732910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6732914">//&nbsp;Note&nbsp;that&nbsp;multicast&nbsp;interface&nbsp;assignment&nbsp;by&nbsp;system</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6732970">//&nbsp;is&nbsp;not&nbsp;recommended&nbsp;because&nbsp;it&nbsp;usually&nbsp;relies&nbsp;on</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6733023">//&nbsp;routing&nbsp;stuff&nbsp;for&nbsp;finding&nbsp;out&nbsp;an&nbsp;appropriate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6733073">//&nbsp;nexthop&nbsp;containing&nbsp;both&nbsp;network&nbsp;and&nbsp;link&nbsp;layer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6733125">//&nbsp;adjacencies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6733143">if</span>&nbsp;<span class="ident" id="6733146">ifi</span>&nbsp;<span class="op" id="6733150">==</span>&nbsp;<span class="builtintype" id="6733153">nil</span>&nbsp;<span class="op" id="6733157">&amp;&amp;</span>&nbsp;<span class="op" id="6733160">!</span><span class="op" id="6733161">*</span><span class="ident" id="6733162">testExternal</span>&nbsp;<span class="op" id="6733175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6733180">continue</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6733191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6733195">for</span>&nbsp;<span class="ident" id="6733199">_</span><span class="op" id="6733200">,</span>&nbsp;<span class="ident" id="6733202">tt</span>&nbsp;<span class="op" id="6733205">:=</span>&nbsp;<span class="keyword" id="6733208">range</span>&nbsp;<span class="ident" id="6733214">ipv4MulticastListenerTests</span>&nbsp;<span class="op" id="6733241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6733246">var</span>&nbsp;<span class="ident" id="6733250">err</span>&nbsp;<span class="builtintype" id="6733254">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6733263">cs</span>&nbsp;<span class="op" id="6733266">:=</span>&nbsp;<span class="builtinfunc" id="6733269">make</span><span class="op" id="6733273">(</span><span class="op" id="6733274">[</span><span class="op" id="6733275">]</span><span class="op" id="6733276">*</span><span class="ident" id="6733277">UDPConn</span><span class="op" id="6733284">,</span>&nbsp;<span class="num" id="6733286">2</span><span class="op" id="6733287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6733292">if</span>&nbsp;<span class="ident" id="6733295">cs</span><span class="op" id="6733297">[</span><span class="num" id="6733298">0</span><span class="op" id="6733299">]</span><span class="op" id="6733300">,</span>&nbsp;<span class="ident" id="6733302">err</span>&nbsp;<span class="op" id="6733306">=</span>&nbsp;<span class="ident" id="6733308">ListenMulticastUDP</span><span class="op" id="6733326">(</span><span class="ident" id="6733327">tt</span><span class="op" id="6733329">.</span><span class="ident" id="6733330">net</span><span class="op" id="6733333">,</span>&nbsp;<span class="ident" id="6733335">ifi</span><span class="op" id="6733338">,</span>&nbsp;<span class="ident" id="6733340">tt</span><span class="op" id="6733342">.</span><span class="ident" id="6733343">gaddr</span><span class="op" id="6733348">)</span><span class="op" id="6733349">;</span>&nbsp;<span class="ident" id="6733351">err</span>&nbsp;<span class="op" id="6733355">!=</span>&nbsp;<span class="builtintype" id="6733358">nil</span>&nbsp;<span class="op" id="6733362">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6733368">t</span><span class="op" id="6733369">.</span><span class="ident" id="6733370">Fatalf</span><span class="op" id="6733376">(</span><span class="string" id="6733377">&#34;First&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6733420">,</span>&nbsp;<span class="ident" id="6733422">ifi</span><span class="op" id="6733425">,</span>&nbsp;<span class="ident" id="6733427">err</span><span class="op" id="6733430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6733435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6733440">if</span>&nbsp;<span class="ident" id="6733443">err</span>&nbsp;<span class="op" id="6733447">:=</span>&nbsp;<span class="ident" id="6733450">checkMulticastListener</span><span class="op" id="6733472">(</span><span class="ident" id="6733473">cs</span><span class="op" id="6733475">[</span><span class="num" id="6733476">0</span><span class="op" id="6733477">]</span><span class="op" id="6733478">,</span>&nbsp;<span class="ident" id="6733480">tt</span><span class="op" id="6733482">.</span><span class="ident" id="6733483">gaddr</span><span class="op" id="6733488">.</span><span class="ident" id="6733489">IP</span><span class="op" id="6733491">)</span><span class="op" id="6733492">;</span>&nbsp;<span class="ident" id="6733494">err</span>&nbsp;<span class="op" id="6733498">!=</span>&nbsp;<span class="builtintype" id="6733501">nil</span>&nbsp;<span class="op" id="6733505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6733511">closer</span><span class="op" id="6733517">(</span><span class="ident" id="6733518">cs</span><span class="op" id="6733520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6733526">t</span><span class="op" id="6733527">.</span><span class="ident" id="6733528">Fatal</span><span class="op" id="6733533">(</span><span class="ident" id="6733534">err</span><span class="op" id="6733537">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6733542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6733547">if</span>&nbsp;<span class="ident" id="6733550">cs</span><span class="op" id="6733552">[</span><span class="num" id="6733553">1</span><span class="op" id="6733554">]</span><span class="op" id="6733555">,</span>&nbsp;<span class="ident" id="6733557">err</span>&nbsp;<span class="op" id="6733561">=</span>&nbsp;<span class="ident" id="6733563">ListenMulticastUDP</span><span class="op" id="6733581">(</span><span class="ident" id="6733582">tt</span><span class="op" id="6733584">.</span><span class="ident" id="6733585">net</span><span class="op" id="6733588">,</span>&nbsp;<span class="ident" id="6733590">ifi</span><span class="op" id="6733593">,</span>&nbsp;<span class="ident" id="6733595">tt</span><span class="op" id="6733597">.</span><span class="ident" id="6733598">gaddr</span><span class="op" id="6733603">)</span><span class="op" id="6733604">;</span>&nbsp;<span class="ident" id="6733606">err</span>&nbsp;<span class="op" id="6733610">!=</span>&nbsp;<span class="builtintype" id="6733613">nil</span>&nbsp;<span class="op" id="6733617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6733623">closer</span><span class="op" id="6733629">(</span><span class="ident" id="6733630">cs</span><span class="op" id="6733632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6733638">t</span><span class="op" id="6733639">.</span><span class="ident" id="6733640">Fatalf</span><span class="op" id="6733646">(</span><span class="string" id="6733647">&#34;Second&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6733691">,</span>&nbsp;<span class="ident" id="6733693">ifi</span><span class="op" id="6733696">,</span>&nbsp;<span class="ident" id="6733698">err</span><span class="op" id="6733701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6733706">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6733711">if</span>&nbsp;<span class="ident" id="6733714">err</span>&nbsp;<span class="op" id="6733718">:=</span>&nbsp;<span class="ident" id="6733721">checkMulticastListener</span><span class="op" id="6733743">(</span><span class="ident" id="6733744">cs</span><span class="op" id="6733746">[</span><span class="num" id="6733747">1</span><span class="op" id="6733748">]</span><span class="op" id="6733749">,</span>&nbsp;<span class="ident" id="6733751">tt</span><span class="op" id="6733753">.</span><span class="ident" id="6733754">gaddr</span><span class="op" id="6733759">.</span><span class="ident" id="6733760">IP</span><span class="op" id="6733762">)</span><span class="op" id="6733763">;</span>&nbsp;<span class="ident" id="6733765">err</span>&nbsp;<span class="op" id="6733769">!=</span>&nbsp;<span class="builtintype" id="6733772">nil</span>&nbsp;<span class="op" id="6733776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6733782">closer</span><span class="op" id="6733788">(</span><span class="ident" id="6733789">cs</span><span class="op" id="6733791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6733797">t</span><span class="op" id="6733798">.</span><span class="ident" id="6733799">Fatal</span><span class="op" id="6733804">(</span><span class="ident" id="6733805">err</span><span class="op" id="6733808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6733813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6733818">closer</span><span class="op" id="6733824">(</span><span class="ident" id="6733825">cs</span><span class="op" id="6733827">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6733831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6733834">}</span><br>
<span class="lineno"></span><span class="op" id="6733836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6733839">var</span>&nbsp;<span class="ident" id="6733843">ipv6MulticastListenerTests</span>&nbsp;<span class="op" id="6733870">=</span>&nbsp;<span class="op" id="6733872">[</span><span class="op" id="6733873">]</span><span class="keyword" id="6733874">struct</span>&nbsp;<span class="op" id="6733881">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6733884">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6733890">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6733898">gaddr</span>&nbsp;<span class="op" id="6733904">*</span><span class="ident" id="6733905">UDPAddr</span>&nbsp;<span class="comment" id="6733913">//&nbsp;see&nbsp;RFC&nbsp;4727</span><br>
<span class="lineno"></span><span class="op" id="6733929">}</span><span class="op" id="6733930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6733933">{</span><span class="string" id="6733934">&#34;udp&#34;</span><span class="op" id="6733939">,</span>&nbsp;<span class="op" id="6733941">&amp;</span><span class="ident" id="6733942">UDPAddr</span><span class="op" id="6733949">{</span><span class="ident" id="6733950">IP</span><span class="op" id="6733952">:</span>&nbsp;<span class="ident" id="6733954">ParseIP</span><span class="op" id="6733961">(</span><span class="string" id="6733962">&#34;ff01::114&#34;</span><span class="op" id="6733973">)</span><span class="op" id="6733974">,</span>&nbsp;<span class="ident" id="6733976">Port</span><span class="op" id="6733980">:</span>&nbsp;<span class="num" id="6733982">12345</span><span class="op" id="6733987">}</span><span class="op" id="6733988">}</span><span class="op" id="6733989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6733992">{</span><span class="string" id="6733993">&#34;udp&#34;</span><span class="op" id="6733998">,</span>&nbsp;<span class="op" id="6734000">&amp;</span><span class="ident" id="6734001">UDPAddr</span><span class="op" id="6734008">{</span><span class="ident" id="6734009">IP</span><span class="op" id="6734011">:</span>&nbsp;<span class="ident" id="6734013">ParseIP</span><span class="op" id="6734020">(</span><span class="string" id="6734021">&#34;ff02::114&#34;</span><span class="op" id="6734032">)</span><span class="op" id="6734033">,</span>&nbsp;<span class="ident" id="6734035">Port</span><span class="op" id="6734039">:</span>&nbsp;<span class="num" id="6734041">12345</span><span class="op" id="6734046">}</span><span class="op" id="6734047">}</span><span class="op" id="6734048">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6734051">{</span><span class="string" id="6734052">&#34;udp&#34;</span><span class="op" id="6734057">,</span>&nbsp;<span class="op" id="6734059">&amp;</span><span class="ident" id="6734060">UDPAddr</span><span class="op" id="6734067">{</span><span class="ident" id="6734068">IP</span><span class="op" id="6734070">:</span>&nbsp;<span class="ident" id="6734072">ParseIP</span><span class="op" id="6734079">(</span><span class="string" id="6734080">&#34;ff04::114&#34;</span><span class="op" id="6734091">)</span><span class="op" id="6734092">,</span>&nbsp;<span class="ident" id="6734094">Port</span><span class="op" id="6734098">:</span>&nbsp;<span class="num" id="6734100">12345</span><span class="op" id="6734105">}</span><span class="op" id="6734106">}</span><span class="op" id="6734107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6734110">{</span><span class="string" id="6734111">&#34;udp&#34;</span><span class="op" id="6734116">,</span>&nbsp;<span class="op" id="6734118">&amp;</span><span class="ident" id="6734119">UDPAddr</span><span class="op" id="6734126">{</span><span class="ident" id="6734127">IP</span><span class="op" id="6734129">:</span>&nbsp;<span class="ident" id="6734131">ParseIP</span><span class="op" id="6734138">(</span><span class="string" id="6734139">&#34;ff05::114&#34;</span><span class="op" id="6734150">)</span><span class="op" id="6734151">,</span>&nbsp;<span class="ident" id="6734153">Port</span><span class="op" id="6734157">:</span>&nbsp;<span class="num" id="6734159">12345</span><span class="op" id="6734164">}</span><span class="op" id="6734165">}</span><span class="op" id="6734166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6734169">{</span><span class="string" id="6734170">&#34;udp&#34;</span><span class="op" id="6734175">,</span>&nbsp;<span class="op" id="6734177">&amp;</span><span class="ident" id="6734178">UDPAddr</span><span class="op" id="6734185">{</span><span class="ident" id="6734186">IP</span><span class="op" id="6734188">:</span>&nbsp;<span class="ident" id="6734190">ParseIP</span><span class="op" id="6734197">(</span><span class="string" id="6734198">&#34;ff08::114&#34;</span><span class="op" id="6734209">)</span><span class="op" id="6734210">,</span>&nbsp;<span class="ident" id="6734212">Port</span><span class="op" id="6734216">:</span>&nbsp;<span class="num" id="6734218">12345</span><span class="op" id="6734223">}</span><span class="op" id="6734224">}</span><span class="op" id="6734225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6734228">{</span><span class="string" id="6734229">&#34;udp&#34;</span><span class="op" id="6734234">,</span>&nbsp;<span class="op" id="6734236">&amp;</span><span class="ident" id="6734237">UDPAddr</span><span class="op" id="6734244">{</span><span class="ident" id="6734245">IP</span><span class="op" id="6734247">:</span>&nbsp;<span class="ident" id="6734249">ParseIP</span><span class="op" id="6734256">(</span><span class="string" id="6734257">&#34;ff0e::114&#34;</span><span class="op" id="6734268">)</span><span class="op" id="6734269">,</span>&nbsp;<span class="ident" id="6734271">Port</span><span class="op" id="6734275">:</span>&nbsp;<span class="num" id="6734277">12345</span><span class="op" id="6734282">}</span><span class="op" id="6734283">}</span><span class="op" id="6734284">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6734288">{</span><span class="string" id="6734289">&#34;udp6&#34;</span><span class="op" id="6734295">,</span>&nbsp;<span class="op" id="6734297">&amp;</span><span class="ident" id="6734298">UDPAddr</span><span class="op" id="6734305">{</span><span class="ident" id="6734306">IP</span><span class="op" id="6734308">:</span>&nbsp;<span class="ident" id="6734310">ParseIP</span><span class="op" id="6734317">(</span><span class="string" id="6734318">&#34;ff01::114&#34;</span><span class="op" id="6734329">)</span><span class="op" id="6734330">,</span>&nbsp;<span class="ident" id="6734332">Port</span><span class="op" id="6734336">:</span>&nbsp;<span class="num" id="6734338">12345</span><span class="op" id="6734343">}</span><span class="op" id="6734344">}</span><span class="op" id="6734345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6734348">{</span><span class="string" id="6734349">&#34;udp6&#34;</span><span class="op" id="6734355">,</span>&nbsp;<span class="op" id="6734357">&amp;</span><span class="ident" id="6734358">UDPAddr</span><span class="op" id="6734365">{</span><span class="ident" id="6734366">IP</span><span class="op" id="6734368">:</span>&nbsp;<span class="ident" id="6734370">ParseIP</span><span class="op" id="6734377">(</span><span class="string" id="6734378">&#34;ff02::114&#34;</span><span class="op" id="6734389">)</span><span class="op" id="6734390">,</span>&nbsp;<span class="ident" id="6734392">Port</span><span class="op" id="6734396">:</span>&nbsp;<span class="num" id="6734398">12345</span><span class="op" id="6734403">}</span><span class="op" id="6734404">}</span><span class="op" id="6734405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6734408">{</span><span class="string" id="6734409">&#34;udp6&#34;</span><span class="op" id="6734415">,</span>&nbsp;<span class="op" id="6734417">&amp;</span><span class="ident" id="6734418">UDPAddr</span><span class="op" id="6734425">{</span><span class="ident" id="6734426">IP</span><span class="op" id="6734428">:</span>&nbsp;<span class="ident" id="6734430">ParseIP</span><span class="op" id="6734437">(</span><span class="string" id="6734438">&#34;ff04::114&#34;</span><span class="op" id="6734449">)</span><span class="op" id="6734450">,</span>&nbsp;<span class="ident" id="6734452">Port</span><span class="op" id="6734456">:</span>&nbsp;<span class="num" id="6734458">12345</span><span class="op" id="6734463">}</span><span class="op" id="6734464">}</span><span class="op" id="6734465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6734468">{</span><span class="string" id="6734469">&#34;udp6&#34;</span><span class="op" id="6734475">,</span>&nbsp;<span class="op" id="6734477">&amp;</span><span class="ident" id="6734478">UDPAddr</span><span class="op" id="6734485">{</span><span class="ident" id="6734486">IP</span><span class="op" id="6734488">:</span>&nbsp;<span class="ident" id="6734490">ParseIP</span><span class="op" id="6734497">(</span><span class="string" id="6734498">&#34;ff05::114&#34;</span><span class="op" id="6734509">)</span><span class="op" id="6734510">,</span>&nbsp;<span class="ident" id="6734512">Port</span><span class="op" id="6734516">:</span>&nbsp;<span class="num" id="6734518">12345</span><span class="op" id="6734523">}</span><span class="op" id="6734524">}</span><span class="op" id="6734525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6734528">{</span><span class="string" id="6734529">&#34;udp6&#34;</span><span class="op" id="6734535">,</span>&nbsp;<span class="op" id="6734537">&amp;</span><span class="ident" id="6734538">UDPAddr</span><span class="op" id="6734545">{</span><span class="ident" id="6734546">IP</span><span class="op" id="6734548">:</span>&nbsp;<span class="ident" id="6734550">ParseIP</span><span class="op" id="6734557">(</span><span class="string" id="6734558">&#34;ff08::114&#34;</span><span class="op" id="6734569">)</span><span class="op" id="6734570">,</span>&nbsp;<span class="ident" id="6734572">Port</span><span class="op" id="6734576">:</span>&nbsp;<span class="num" id="6734578">12345</span><span class="op" id="6734583">}</span><span class="op" id="6734584">}</span><span class="op" id="6734585">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6734588">{</span><span class="string" id="6734589">&#34;udp6&#34;</span><span class="op" id="6734595">,</span>&nbsp;<span class="op" id="6734597">&amp;</span><span class="ident" id="6734598">UDPAddr</span><span class="op" id="6734605">{</span><span class="ident" id="6734606">IP</span><span class="op" id="6734608">:</span>&nbsp;<span class="ident" id="6734610">ParseIP</span><span class="op" id="6734617">(</span><span class="string" id="6734618">&#34;ff0e::114&#34;</span><span class="op" id="6734629">)</span><span class="op" id="6734630">,</span>&nbsp;<span class="ident" id="6734632">Port</span><span class="op" id="6734636">:</span>&nbsp;<span class="num" id="6734638">12345</span><span class="op" id="6734643">}</span><span class="op" id="6734644">}</span><span class="op" id="6734645">,</span><br>
<span class="lineno"></span><span class="op" id="6734647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6734650">//&nbsp;TestIPv6MulticastListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6734720">//&nbsp;test&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;group&nbsp;address&nbsp;and&nbsp;same</span><br>
<span class="lineno">95</span><span class="comment" id="6734791">//&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="6734800">func</span>&nbsp;<span class="ident" id="6734805">TestIPv6MulticastListener</span><span class="op" id="6734830">(</span><span class="ident" id="6734831">t</span>&nbsp;<span class="op" id="6734833">*</span><span class="ident" id="6734834">testing</span><span class="op" id="6734841">.</span><span class="ident" id="6734842">T</span><span class="op" id="6734843">)</span>&nbsp;<span class="op" id="6734845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6734848">switch</span>&nbsp;<span class="ident" id="6734855">runtime</span><span class="op" id="6734862">.</span><span class="ident" id="6734863">GOOS</span>&nbsp;<span class="op" id="6734868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6734871">case</span>&nbsp;<span class="string" id="6734876">&#34;plan9&#34;</span><span class="op" id="6734883">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6734887">t</span><span class="op" id="6734888">.</span><span class="ident" id="6734889">Skipf</span><span class="op" id="6734894">(</span><span class="string" id="6734895">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6734916">,</span>&nbsp;<span class="ident" id="6734918">runtime</span><span class="op" id="6734925">.</span><span class="ident" id="6734926">GOOS</span><span class="op" id="6734930">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6734933">case</span>&nbsp;<span class="string" id="6734938">&#34;solaris&#34;</span><span class="op" id="6734947">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6734951">t</span><span class="op" id="6734952">.</span><span class="ident" id="6734953">Skipf</span><span class="op" id="6734958">(</span><span class="string" id="6734959">&#34;skipping&nbsp;test&nbsp;on&nbsp;solaris,&nbsp;see&nbsp;issue&nbsp;7399&#34;</span><span class="op" id="6735001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6735004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6735007">if</span>&nbsp;<span class="op" id="6735010">!</span><span class="ident" id="6735011">supportsIPv6</span>&nbsp;<span class="op" id="6735024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6735028">t</span><span class="op" id="6735029">.</span><span class="ident" id="6735030">Skip</span><span class="op" id="6735034">(</span><span class="string" id="6735035">&#34;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6735058">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6735061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6735064">if</span>&nbsp;<span class="ident" id="6735067">os</span><span class="op" id="6735069">.</span><span class="ident" id="6735070">Getuid</span><span class="op" id="6735076">(</span><span class="op" id="6735077">)</span>&nbsp;<span class="op" id="6735079">!=</span>&nbsp;<span class="num" id="6735082">0</span>&nbsp;<span class="op" id="6735084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6735088">t</span><span class="op" id="6735089">.</span><span class="ident" id="6735090">Skip</span><span class="op" id="6735094">(</span><span class="string" id="6735095">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="6735124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6735127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6735131">closer</span>&nbsp;<span class="op" id="6735138">:=</span>&nbsp;<span class="keyword" id="6735141">func</span><span class="op" id="6735145">(</span><span class="ident" id="6735146">cs</span>&nbsp;<span class="op" id="6735149">[</span><span class="op" id="6735150">]</span><span class="op" id="6735151">*</span><span class="ident" id="6735152">UDPConn</span><span class="op" id="6735159">)</span>&nbsp;<span class="op" id="6735161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6735165">for</span>&nbsp;<span class="ident" id="6735169">_</span><span class="op" id="6735170">,</span>&nbsp;<span class="ident" id="6735172">c</span>&nbsp;<span class="op" id="6735174">:=</span>&nbsp;<span class="keyword" id="6735177">range</span>&nbsp;<span class="ident" id="6735183">cs</span>&nbsp;<span class="op" id="6735186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6735191">if</span>&nbsp;<span class="ident" id="6735194">c</span>&nbsp;<span class="op" id="6735196">!=</span>&nbsp;<span class="builtintype" id="6735199">nil</span>&nbsp;<span class="op" id="6735203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6735209">c</span><span class="op" id="6735210">.</span><span class="ident" id="6735211">Close</span><span class="op" id="6735216">(</span><span class="op" id="6735217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6735222">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6735226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6735229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6735233">for</span>&nbsp;<span class="ident" id="6735237">_</span><span class="op" id="6735238">,</span>&nbsp;<span class="ident" id="6735240">ifi</span>&nbsp;<span class="op" id="6735244">:=</span>&nbsp;<span class="keyword" id="6735247">range</span>&nbsp;<span class="op" id="6735253">[</span><span class="op" id="6735254">]</span><span class="op" id="6735255">*</span><span class="ident" id="6735256">Interface</span><span class="op" id="6735265">{</span><span class="ident" id="6735266">loopbackInterface</span><span class="op" id="6735283">(</span><span class="op" id="6735284">)</span><span class="op" id="6735285">,</span>&nbsp;<span class="builtintype" id="6735287">nil</span><span class="op" id="6735290">}</span>&nbsp;<span class="op" id="6735292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6735296">//&nbsp;Note&nbsp;that&nbsp;multicast&nbsp;interface&nbsp;assignment&nbsp;by&nbsp;system</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6735352">//&nbsp;is&nbsp;not&nbsp;recommended&nbsp;because&nbsp;it&nbsp;usually&nbsp;relies&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6735405">//&nbsp;routing&nbsp;stuff&nbsp;for&nbsp;finding&nbsp;out&nbsp;an&nbsp;appropriate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6735455">//&nbsp;nexthop&nbsp;containing&nbsp;both&nbsp;network&nbsp;and&nbsp;link&nbsp;layer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6735507">//&nbsp;adjacencies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6735525">if</span>&nbsp;<span class="ident" id="6735528">ifi</span>&nbsp;<span class="op" id="6735532">==</span>&nbsp;<span class="builtintype" id="6735535">nil</span>&nbsp;<span class="op" id="6735539">&amp;&amp;</span>&nbsp;<span class="op" id="6735542">(</span><span class="op" id="6735543">!</span><span class="op" id="6735544">*</span><span class="ident" id="6735545">testExternal</span>&nbsp;<span class="op" id="6735558">||</span>&nbsp;<span class="op" id="6735561">!</span><span class="op" id="6735562">*</span><span class="ident" id="6735563">testIPv6</span><span class="op" id="6735571">)</span>&nbsp;<span class="op" id="6735573">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6735578">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6735589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6735593">for</span>&nbsp;<span class="ident" id="6735597">_</span><span class="op" id="6735598">,</span>&nbsp;<span class="ident" id="6735600">tt</span>&nbsp;<span class="op" id="6735603">:=</span>&nbsp;<span class="keyword" id="6735606">range</span>&nbsp;<span class="ident" id="6735612">ipv6MulticastListenerTests</span>&nbsp;<span class="op" id="6735639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6735644">var</span>&nbsp;<span class="ident" id="6735648">err</span>&nbsp;<span class="builtintype" id="6735652">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6735661">cs</span>&nbsp;<span class="op" id="6735664">:=</span>&nbsp;<span class="builtinfunc" id="6735667">make</span><span class="op" id="6735671">(</span><span class="op" id="6735672">[</span><span class="op" id="6735673">]</span><span class="op" id="6735674">*</span><span class="ident" id="6735675">UDPConn</span><span class="op" id="6735682">,</span>&nbsp;<span class="num" id="6735684">2</span><span class="op" id="6735685">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6735690">if</span>&nbsp;<span class="ident" id="6735693">cs</span><span class="op" id="6735695">[</span><span class="num" id="6735696">0</span><span class="op" id="6735697">]</span><span class="op" id="6735698">,</span>&nbsp;<span class="ident" id="6735700">err</span>&nbsp;<span class="op" id="6735704">=</span>&nbsp;<span class="ident" id="6735706">ListenMulticastUDP</span><span class="op" id="6735724">(</span><span class="ident" id="6735725">tt</span><span class="op" id="6735727">.</span><span class="ident" id="6735728">net</span><span class="op" id="6735731">,</span>&nbsp;<span class="ident" id="6735733">ifi</span><span class="op" id="6735736">,</span>&nbsp;<span class="ident" id="6735738">tt</span><span class="op" id="6735740">.</span><span class="ident" id="6735741">gaddr</span><span class="op" id="6735746">)</span><span class="op" id="6735747">;</span>&nbsp;<span class="ident" id="6735749">err</span>&nbsp;<span class="op" id="6735753">!=</span>&nbsp;<span class="builtintype" id="6735756">nil</span>&nbsp;<span class="op" id="6735760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6735766">t</span><span class="op" id="6735767">.</span><span class="ident" id="6735768">Fatalf</span><span class="op" id="6735774">(</span><span class="string" id="6735775">&#34;First&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6735818">,</span>&nbsp;<span class="ident" id="6735820">ifi</span><span class="op" id="6735823">,</span>&nbsp;<span class="ident" id="6735825">err</span><span class="op" id="6735828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6735833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6735838">if</span>&nbsp;<span class="ident" id="6735841">err</span>&nbsp;<span class="op" id="6735845">:=</span>&nbsp;<span class="ident" id="6735848">checkMulticastListener</span><span class="op" id="6735870">(</span><span class="ident" id="6735871">cs</span><span class="op" id="6735873">[</span><span class="num" id="6735874">0</span><span class="op" id="6735875">]</span><span class="op" id="6735876">,</span>&nbsp;<span class="ident" id="6735878">tt</span><span class="op" id="6735880">.</span><span class="ident" id="6735881">gaddr</span><span class="op" id="6735886">.</span><span class="ident" id="6735887">IP</span><span class="op" id="6735889">)</span><span class="op" id="6735890">;</span>&nbsp;<span class="ident" id="6735892">err</span>&nbsp;<span class="op" id="6735896">!=</span>&nbsp;<span class="builtintype" id="6735899">nil</span>&nbsp;<span class="op" id="6735903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6735909">closer</span><span class="op" id="6735915">(</span><span class="ident" id="6735916">cs</span><span class="op" id="6735918">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6735924">t</span><span class="op" id="6735925">.</span><span class="ident" id="6735926">Fatal</span><span class="op" id="6735931">(</span><span class="ident" id="6735932">err</span><span class="op" id="6735935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6735940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6735945">if</span>&nbsp;<span class="ident" id="6735948">cs</span><span class="op" id="6735950">[</span><span class="num" id="6735951">1</span><span class="op" id="6735952">]</span><span class="op" id="6735953">,</span>&nbsp;<span class="ident" id="6735955">err</span>&nbsp;<span class="op" id="6735959">=</span>&nbsp;<span class="ident" id="6735961">ListenMulticastUDP</span><span class="op" id="6735979">(</span><span class="ident" id="6735980">tt</span><span class="op" id="6735982">.</span><span class="ident" id="6735983">net</span><span class="op" id="6735986">,</span>&nbsp;<span class="ident" id="6735988">ifi</span><span class="op" id="6735991">,</span>&nbsp;<span class="ident" id="6735993">tt</span><span class="op" id="6735995">.</span><span class="ident" id="6735996">gaddr</span><span class="op" id="6736001">)</span><span class="op" id="6736002">;</span>&nbsp;<span class="ident" id="6736004">err</span>&nbsp;<span class="op" id="6736008">!=</span>&nbsp;<span class="builtintype" id="6736011">nil</span>&nbsp;<span class="op" id="6736015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6736021">closer</span><span class="op" id="6736027">(</span><span class="ident" id="6736028">cs</span><span class="op" id="6736030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6736036">t</span><span class="op" id="6736037">.</span><span class="ident" id="6736038">Fatalf</span><span class="op" id="6736044">(</span><span class="string" id="6736045">&#34;Second&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6736089">,</span>&nbsp;<span class="ident" id="6736091">ifi</span><span class="op" id="6736094">,</span>&nbsp;<span class="ident" id="6736096">err</span><span class="op" id="6736099">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6736104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736109">if</span>&nbsp;<span class="ident" id="6736112">err</span>&nbsp;<span class="op" id="6736116">:=</span>&nbsp;<span class="ident" id="6736119">checkMulticastListener</span><span class="op" id="6736141">(</span><span class="ident" id="6736142">cs</span><span class="op" id="6736144">[</span><span class="num" id="6736145">1</span><span class="op" id="6736146">]</span><span class="op" id="6736147">,</span>&nbsp;<span class="ident" id="6736149">tt</span><span class="op" id="6736151">.</span><span class="ident" id="6736152">gaddr</span><span class="op" id="6736157">.</span><span class="ident" id="6736158">IP</span><span class="op" id="6736160">)</span><span class="op" id="6736161">;</span>&nbsp;<span class="ident" id="6736163">err</span>&nbsp;<span class="op" id="6736167">!=</span>&nbsp;<span class="builtintype" id="6736170">nil</span>&nbsp;<span class="op" id="6736174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6736180">closer</span><span class="op" id="6736186">(</span><span class="ident" id="6736187">cs</span><span class="op" id="6736189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6736195">t</span><span class="op" id="6736196">.</span><span class="ident" id="6736197">Fatal</span><span class="op" id="6736202">(</span><span class="ident" id="6736203">err</span><span class="op" id="6736206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6736211">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6736216">closer</span><span class="op" id="6736222">(</span><span class="ident" id="6736223">cs</span><span class="op" id="6736225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6736229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6736232">}</span><br>
<span class="lineno"></span><span class="op" id="6736234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="6736237">func</span>&nbsp;<span class="ident" id="6736242">checkMulticastListener</span><span class="op" id="6736264">(</span><span class="ident" id="6736265">c</span>&nbsp;<span class="op" id="6736267">*</span><span class="ident" id="6736268">UDPConn</span><span class="op" id="6736275">,</span>&nbsp;<span class="ident" id="6736277">ip</span>&nbsp;<span class="ident" id="6736280">IP</span><span class="op" id="6736282">)</span>&nbsp;<span class="builtintype" id="6736284">error</span>&nbsp;<span class="op" id="6736290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736293">if</span>&nbsp;<span class="ident" id="6736296">ok</span><span class="op" id="6736298">,</span>&nbsp;<span class="ident" id="6736300">err</span>&nbsp;<span class="op" id="6736304">:=</span>&nbsp;<span class="ident" id="6736307">multicastRIBContains</span><span class="op" id="6736327">(</span><span class="ident" id="6736328">ip</span><span class="op" id="6736330">)</span><span class="op" id="6736331">;</span>&nbsp;<span class="ident" id="6736333">err</span>&nbsp;<span class="op" id="6736337">!=</span>&nbsp;<span class="builtintype" id="6736340">nil</span>&nbsp;<span class="op" id="6736344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736348">return</span>&nbsp;<span class="ident" id="6736355">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6736360">}</span>&nbsp;<span class="keyword" id="6736362">else</span>&nbsp;<span class="keyword" id="6736367">if</span>&nbsp;<span class="op" id="6736370">!</span><span class="ident" id="6736371">ok</span>&nbsp;<span class="op" id="6736374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736378">return</span>&nbsp;<span class="ident" id="6736385">fmt</span><span class="op" id="6736388">.</span><span class="ident" id="6736389">Errorf</span><span class="op" id="6736395">(</span><span class="string" id="6736396">&#34;%q&nbsp;not&nbsp;found&nbsp;in&nbsp;multicast&nbsp;RIB&#34;</span><span class="op" id="6736427">,</span>&nbsp;<span class="ident" id="6736429">ip</span><span class="op" id="6736431">.</span><span class="ident" id="6736432">String</span><span class="op" id="6736438">(</span><span class="op" id="6736439">)</span><span class="op" id="6736440">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6736443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6736446">la</span>&nbsp;<span class="op" id="6736449">:=</span>&nbsp;<span class="ident" id="6736452">c</span><span class="op" id="6736453">.</span><span class="ident" id="6736454">LocalAddr</span><span class="op" id="6736463">(</span><span class="op" id="6736464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736467">if</span>&nbsp;<span class="ident" id="6736470">la</span><span class="op" id="6736472">,</span>&nbsp;<span class="ident" id="6736474">ok</span>&nbsp;<span class="op" id="6736477">:=</span>&nbsp;<span class="ident" id="6736480">la</span><span class="op" id="6736482">.</span><span class="op" id="6736483">(</span><span class="op" id="6736484">*</span><span class="ident" id="6736485">UDPAddr</span><span class="op" id="6736492">)</span><span class="op" id="6736493">;</span>&nbsp;<span class="op" id="6736495">!</span><span class="ident" id="6736496">ok</span>&nbsp;<span class="op" id="6736499">||</span>&nbsp;<span class="ident" id="6736502">la</span><span class="op" id="6736504">.</span><span class="ident" id="6736505">Port</span>&nbsp;<span class="op" id="6736510">==</span>&nbsp;<span class="num" id="6736513">0</span>&nbsp;<span class="op" id="6736515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736519">return</span>&nbsp;<span class="ident" id="6736526">fmt</span><span class="op" id="6736529">.</span><span class="ident" id="6736530">Errorf</span><span class="op" id="6736536">(</span><span class="string" id="6736537">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;non-zero&nbsp;port&nbsp;number&#34;</span><span class="op" id="6736598">,</span>&nbsp;<span class="ident" id="6736600">la</span><span class="op" id="6736602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6736605">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736608">return</span>&nbsp;<span class="builtintype" id="6736615">nil</span><br>
<span class="lineno"></span><span class="op" id="6736619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6736622">func</span>&nbsp;<span class="ident" id="6736627">multicastRIBContains</span><span class="op" id="6736647">(</span><span class="ident" id="6736648">ip</span>&nbsp;<span class="ident" id="6736651">IP</span><span class="op" id="6736653">)</span>&nbsp;<span class="op" id="6736655">(</span><span class="builtintype" id="6736656">bool</span><span class="op" id="6736660">,</span>&nbsp;<span class="builtintype" id="6736662">error</span><span class="op" id="6736667">)</span>&nbsp;<span class="op" id="6736669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736672">switch</span>&nbsp;<span class="ident" id="6736679">runtime</span><span class="op" id="6736686">.</span><span class="ident" id="6736687">GOOS</span>&nbsp;<span class="op" id="6736692">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736695">case</span>&nbsp;<span class="string" id="6736700">&#34;dragonfly&#34;</span><span class="op" id="6736711">,</span>&nbsp;<span class="string" id="6736713">&#34;netbsd&#34;</span><span class="op" id="6736721">,</span>&nbsp;<span class="string" id="6736723">&#34;openbsd&#34;</span><span class="op" id="6736732">,</span>&nbsp;<span class="string" id="6736734">&#34;plan9&#34;</span><span class="op" id="6736741">,</span>&nbsp;<span class="string" id="6736743">&#34;solaris&#34;</span><span class="op" id="6736752">,</span>&nbsp;<span class="string" id="6736754">&#34;windows&#34;</span><span class="op" id="6736763">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736767">return</span>&nbsp;<span class="builtintype" id="6736774">true</span><span class="op" id="6736778">,</span>&nbsp;<span class="builtintype" id="6736780">nil</span>&nbsp;<span class="comment" id="6736784">//&nbsp;not&nbsp;implemented&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736808">case</span>&nbsp;<span class="string" id="6736813">&#34;linux&#34;</span><span class="op" id="6736820">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736824">if</span>&nbsp;<span class="ident" id="6736827">runtime</span><span class="op" id="6736834">.</span><span class="ident" id="6736835">GOARCH</span>&nbsp;<span class="op" id="6736842">==</span>&nbsp;<span class="string" id="6736845">&#34;arm&#34;</span>&nbsp;<span class="op" id="6736851">||</span>&nbsp;<span class="ident" id="6736854">runtime</span><span class="op" id="6736861">.</span><span class="ident" id="6736862">GOARCH</span>&nbsp;<span class="op" id="6736869">==</span>&nbsp;<span class="string" id="6736872">&#34;alpha&#34;</span>&nbsp;<span class="op" id="6736880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736885">return</span>&nbsp;<span class="builtintype" id="6736892">true</span><span class="op" id="6736896">,</span>&nbsp;<span class="builtintype" id="6736898">nil</span>&nbsp;<span class="comment" id="6736902">//&nbsp;not&nbsp;implemented&nbsp;yet</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6736927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6736930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6736933">ift</span><span class="op" id="6736936">,</span>&nbsp;<span class="ident" id="6736938">err</span>&nbsp;<span class="op" id="6736942">:=</span>&nbsp;<span class="ident" id="6736945">Interfaces</span><span class="op" id="6736955">(</span><span class="op" id="6736956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736959">if</span>&nbsp;<span class="ident" id="6736962">err</span>&nbsp;<span class="op" id="6736966">!=</span>&nbsp;<span class="builtintype" id="6736969">nil</span>&nbsp;<span class="op" id="6736973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736977">return</span>&nbsp;<span class="builtintype" id="6736984">false</span><span class="op" id="6736989">,</span>&nbsp;<span class="ident" id="6736991">err</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6736996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6736999">for</span>&nbsp;<span class="ident" id="6737003">_</span><span class="op" id="6737004">,</span>&nbsp;<span class="ident" id="6737006">ifi</span>&nbsp;<span class="op" id="6737010">:=</span>&nbsp;<span class="keyword" id="6737013">range</span>&nbsp;<span class="ident" id="6737019">ift</span>&nbsp;<span class="op" id="6737023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6737027">ifmat</span><span class="op" id="6737032">,</span>&nbsp;<span class="ident" id="6737034">err</span>&nbsp;<span class="op" id="6737038">:=</span>&nbsp;<span class="ident" id="6737041">ifi</span><span class="op" id="6737044">.</span><span class="ident" id="6737045">MulticastAddrs</span><span class="op" id="6737059">(</span><span class="op" id="6737060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6737064">if</span>&nbsp;<span class="ident" id="6737067">err</span>&nbsp;<span class="op" id="6737071">!=</span>&nbsp;<span class="builtintype" id="6737074">nil</span>&nbsp;<span class="op" id="6737078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6737083">return</span>&nbsp;<span class="builtintype" id="6737090">false</span><span class="op" id="6737095">,</span>&nbsp;<span class="ident" id="6737097">err</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6737103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6737107">for</span>&nbsp;<span class="ident" id="6737111">_</span><span class="op" id="6737112">,</span>&nbsp;<span class="ident" id="6737114">ifma</span>&nbsp;<span class="op" id="6737119">:=</span>&nbsp;<span class="keyword" id="6737122">range</span>&nbsp;<span class="ident" id="6737128">ifmat</span>&nbsp;<span class="op" id="6737134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6737139">if</span>&nbsp;<span class="ident" id="6737142">ifma</span><span class="op" id="6737146">.</span><span class="op" id="6737147">(</span><span class="op" id="6737148">*</span><span class="ident" id="6737149">IPAddr</span><span class="op" id="6737155">)</span><span class="op" id="6737156">.</span><span class="ident" id="6737157">IP</span><span class="op" id="6737159">.</span><span class="ident" id="6737160">Equal</span><span class="op" id="6737165">(</span><span class="ident" id="6737166">ip</span><span class="op" id="6737168">)</span>&nbsp;<span class="op" id="6737170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6737176">return</span>&nbsp;<span class="builtintype" id="6737183">true</span><span class="op" id="6737187">,</span>&nbsp;<span class="builtintype" id="6737189">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6737196">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6737200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6737203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6737206">return</span>&nbsp;<span class="builtintype" id="6737213">false</span><span class="op" id="6737218">,</span>&nbsp;<span class="builtintype" id="6737220">nil</span><br>
<span class="lineno"></span><span class="op" id="6737224">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
