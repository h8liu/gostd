<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7404974">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7405030">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7405084">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7405135">package</span>&nbsp;<span class="ident" id="7405143">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7405149">import</span>&nbsp;<span class="op" id="7405156">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405159">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405168">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405185">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405192">&#34;log&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405199">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405205">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405216">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405227">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405238">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7405245">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7405248">var</span>&nbsp;<span class="ident" id="7405252">writeSetCookiesTests</span>&nbsp;<span class="op" id="7405273">=</span>&nbsp;<span class="op" id="7405275">[</span><span class="op" id="7405276">]</span><span class="keyword" id="7405277">struct</span>&nbsp;<span class="op" id="7405284">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7405287">Cookie</span>&nbsp;<span class="op" id="7405294">*</span><span class="ident" id="7405295"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7405303">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7405310">string</span><br>
<span class="lineno"></span><span class="op" id="7405317">}</span><span class="op" id="7405318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405325">&amp;</span><span class="ident" id="7405326"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7405332">{</span><span class="ident" id="7405333">Name</span><span class="op" id="7405337">:</span>&nbsp;<span class="string" id="7405339">&#34;cookie-1&#34;</span><span class="op" id="7405349">,</span>&nbsp;<span class="ident" id="7405351">Value</span><span class="op" id="7405356">:</span>&nbsp;<span class="string" id="7405358">&#34;v$1&#34;</span><span class="op" id="7405363">}</span><span class="op" id="7405364">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405368">&#34;cookie-1=v$1&#34;</span><span class="op" id="7405382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405385">}</span><span class="op" id="7405386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405393">&amp;</span><span class="ident" id="7405394"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7405400">{</span><span class="ident" id="7405401">Name</span><span class="op" id="7405405">:</span>&nbsp;<span class="string" id="7405407">&#34;cookie-2&#34;</span><span class="op" id="7405417">,</span>&nbsp;<span class="ident" id="7405419">Value</span><span class="op" id="7405424">:</span>&nbsp;<span class="string" id="7405426">&#34;two&#34;</span><span class="op" id="7405431">,</span>&nbsp;<span class="ident" id="7405433">MaxAge</span><span class="op" id="7405439">:</span>&nbsp;<span class="num" id="7405441">3600</span><span class="op" id="7405445">}</span><span class="op" id="7405446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405450">&#34;cookie-2=two;&nbsp;Max-Age=3600&#34;</span><span class="op" id="7405478">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405481">}</span><span class="op" id="7405482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405489">&amp;</span><span class="ident" id="7405490"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7405496">{</span><span class="ident" id="7405497">Name</span><span class="op" id="7405501">:</span>&nbsp;<span class="string" id="7405503">&#34;cookie-3&#34;</span><span class="op" id="7405513">,</span>&nbsp;<span class="ident" id="7405515">Value</span><span class="op" id="7405520">:</span>&nbsp;<span class="string" id="7405522">&#34;three&#34;</span><span class="op" id="7405529">,</span>&nbsp;<span class="ident" id="7405531">Domain</span><span class="op" id="7405537">:</span>&nbsp;<span class="string" id="7405539">&#34;.example.com&#34;</span><span class="op" id="7405553">}</span><span class="op" id="7405554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405558">&#34;cookie-3=three;&nbsp;Domain=example.com&#34;</span><span class="op" id="7405594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405597">}</span><span class="op" id="7405598">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405605">&amp;</span><span class="ident" id="7405606"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7405612">{</span><span class="ident" id="7405613">Name</span><span class="op" id="7405617">:</span>&nbsp;<span class="string" id="7405619">&#34;cookie-4&#34;</span><span class="op" id="7405629">,</span>&nbsp;<span class="ident" id="7405631">Value</span><span class="op" id="7405636">:</span>&nbsp;<span class="string" id="7405638">&#34;four&#34;</span><span class="op" id="7405644">,</span>&nbsp;<span class="ident" id="7405646">Path</span><span class="op" id="7405650">:</span>&nbsp;<span class="string" id="7405652">&#34;/restricted/&#34;</span><span class="op" id="7405666">}</span><span class="op" id="7405667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405671">&#34;cookie-4=four;&nbsp;Path=/restricted/&#34;</span><span class="op" id="7405705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405708">}</span><span class="op" id="7405709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405712">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405716">&amp;</span><span class="ident" id="7405717"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7405723">{</span><span class="ident" id="7405724">Name</span><span class="op" id="7405728">:</span>&nbsp;<span class="string" id="7405730">&#34;cookie-5&#34;</span><span class="op" id="7405740">,</span>&nbsp;<span class="ident" id="7405742">Value</span><span class="op" id="7405747">:</span>&nbsp;<span class="string" id="7405749">&#34;five&#34;</span><span class="op" id="7405755">,</span>&nbsp;<span class="ident" id="7405757">Domain</span><span class="op" id="7405763">:</span>&nbsp;<span class="string" id="7405765">&#34;wrong;bad.abc&#34;</span><span class="op" id="7405780">}</span><span class="op" id="7405781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405785">&#34;cookie-5=five&#34;</span><span class="op" id="7405800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405803">}</span><span class="op" id="7405804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405811">&amp;</span><span class="ident" id="7405812"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7405818">{</span><span class="ident" id="7405819">Name</span><span class="op" id="7405823">:</span>&nbsp;<span class="string" id="7405825">&#34;cookie-6&#34;</span><span class="op" id="7405835">,</span>&nbsp;<span class="ident" id="7405837">Value</span><span class="op" id="7405842">:</span>&nbsp;<span class="string" id="7405844">&#34;six&#34;</span><span class="op" id="7405849">,</span>&nbsp;<span class="ident" id="7405851">Domain</span><span class="op" id="7405857">:</span>&nbsp;<span class="string" id="7405859">&#34;bad-.abc&#34;</span><span class="op" id="7405869">}</span><span class="op" id="7405870">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405874">&#34;cookie-6=six&#34;</span><span class="op" id="7405888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405891">}</span><span class="op" id="7405892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7405899">&amp;</span><span class="ident" id="7405900"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7405906">{</span><span class="ident" id="7405907">Name</span><span class="op" id="7405911">:</span>&nbsp;<span class="string" id="7405913">&#34;cookie-7&#34;</span><span class="op" id="7405923">,</span>&nbsp;<span class="ident" id="7405925">Value</span><span class="op" id="7405930">:</span>&nbsp;<span class="string" id="7405932">&#34;seven&#34;</span><span class="op" id="7405939">,</span>&nbsp;<span class="ident" id="7405941">Domain</span><span class="op" id="7405947">:</span>&nbsp;<span class="string" id="7405949">&#34;127.0.0.1&#34;</span><span class="op" id="7405960">}</span><span class="op" id="7405961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7405965">&#34;cookie-7=seven;&nbsp;Domain=127.0.0.1&#34;</span><span class="op" id="7405999">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406002">}</span><span class="op" id="7406003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406010">&amp;</span><span class="ident" id="7406011"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7406017">{</span><span class="ident" id="7406018">Name</span><span class="op" id="7406022">:</span>&nbsp;<span class="string" id="7406024">&#34;cookie-8&#34;</span><span class="op" id="7406034">,</span>&nbsp;<span class="ident" id="7406036">Value</span><span class="op" id="7406041">:</span>&nbsp;<span class="string" id="7406043">&#34;eight&#34;</span><span class="op" id="7406050">,</span>&nbsp;<span class="ident" id="7406052">Domain</span><span class="op" id="7406058">:</span>&nbsp;<span class="string" id="7406060">&#34;::1&#34;</span><span class="op" id="7406065">}</span><span class="op" id="7406066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7406070">&#34;cookie-8=eight&#34;</span><span class="op" id="7406086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406089">}</span><span class="op" id="7406090">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7406093">//&nbsp;The&nbsp;&#34;special&#34;&nbsp;cookies&nbsp;have&nbsp;values&nbsp;containing&nbsp;commas&nbsp;or&nbsp;spaces&nbsp;which</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7406165">//&nbsp;are&nbsp;disallowed&nbsp;by&nbsp;RFC&nbsp;6265&nbsp;but&nbsp;are&nbsp;common&nbsp;in&nbsp;the&nbsp;wild.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406228">&amp;</span><span class="ident" id="7406229"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7406235">{</span><span class="ident" id="7406236">Name</span><span class="op" id="7406240">:</span>&nbsp;<span class="string" id="7406242">&#34;special-1&#34;</span><span class="op" id="7406253">,</span>&nbsp;<span class="ident" id="7406255">Value</span><span class="op" id="7406260">:</span>&nbsp;<span class="string" id="7406262">&#34;a&nbsp;z&#34;</span><span class="op" id="7406267">}</span><span class="op" id="7406268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7406272">`special-1=a&nbsp;z`</span><span class="op" id="7406287">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406290">}</span><span class="op" id="7406291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406298">&amp;</span><span class="ident" id="7406299"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7406305">{</span><span class="ident" id="7406306">Name</span><span class="op" id="7406310">:</span>&nbsp;<span class="string" id="7406312">&#34;special-2&#34;</span><span class="op" id="7406323">,</span>&nbsp;<span class="ident" id="7406325">Value</span><span class="op" id="7406330">:</span>&nbsp;<span class="string" id="7406332">&#34;&nbsp;z&#34;</span><span class="op" id="7406336">}</span><span class="op" id="7406337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7406341">`special-2=&#34;&nbsp;z&#34;`</span><span class="op" id="7406357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406360">}</span><span class="op" id="7406361">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406368">&amp;</span><span class="ident" id="7406369"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7406375">{</span><span class="ident" id="7406376">Name</span><span class="op" id="7406380">:</span>&nbsp;<span class="string" id="7406382">&#34;special-3&#34;</span><span class="op" id="7406393">,</span>&nbsp;<span class="ident" id="7406395">Value</span><span class="op" id="7406400">:</span>&nbsp;<span class="string" id="7406402">&#34;a&nbsp;&#34;</span><span class="op" id="7406406">}</span><span class="op" id="7406407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7406411">`special-3=&#34;a&nbsp;&#34;`</span><span class="op" id="7406427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406430">}</span><span class="op" id="7406431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406434">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406438">&amp;</span><span class="ident" id="7406439"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7406445">{</span><span class="ident" id="7406446">Name</span><span class="op" id="7406450">:</span>&nbsp;<span class="string" id="7406452">&#34;special-4&#34;</span><span class="op" id="7406463">,</span>&nbsp;<span class="ident" id="7406465">Value</span><span class="op" id="7406470">:</span>&nbsp;<span class="string" id="7406472">&#34;&nbsp;&#34;</span><span class="op" id="7406475">}</span><span class="op" id="7406476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7406480">`special-4=&#34;&nbsp;&#34;`</span><span class="op" id="7406495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406498">}</span><span class="op" id="7406499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406506">&amp;</span><span class="ident" id="7406507"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7406513">{</span><span class="ident" id="7406514">Name</span><span class="op" id="7406518">:</span>&nbsp;<span class="string" id="7406520">&#34;special-5&#34;</span><span class="op" id="7406531">,</span>&nbsp;<span class="ident" id="7406533">Value</span><span class="op" id="7406538">:</span>&nbsp;<span class="string" id="7406540">&#34;a,z&#34;</span><span class="op" id="7406545">}</span><span class="op" id="7406546">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7406550">`special-5=a,z`</span><span class="op" id="7406565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406568">}</span><span class="op" id="7406569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406576">&amp;</span><span class="ident" id="7406577"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7406583">{</span><span class="ident" id="7406584">Name</span><span class="op" id="7406588">:</span>&nbsp;<span class="string" id="7406590">&#34;special-6&#34;</span><span class="op" id="7406601">,</span>&nbsp;<span class="ident" id="7406603">Value</span><span class="op" id="7406608">:</span>&nbsp;<span class="string" id="7406610">&#34;,z&#34;</span><span class="op" id="7406614">}</span><span class="op" id="7406615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7406619">`special-6=&#34;,z&#34;`</span><span class="op" id="7406635">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406638">}</span><span class="op" id="7406639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406646">&amp;</span><span class="ident" id="7406647"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7406653">{</span><span class="ident" id="7406654">Name</span><span class="op" id="7406658">:</span>&nbsp;<span class="string" id="7406660">&#34;special-7&#34;</span><span class="op" id="7406671">,</span>&nbsp;<span class="ident" id="7406673">Value</span><span class="op" id="7406678">:</span>&nbsp;<span class="string" id="7406680">&#34;a,&#34;</span><span class="op" id="7406684">}</span><span class="op" id="7406685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7406689">`special-7=&#34;a,&#34;`</span><span class="op" id="7406705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406708">}</span><span class="op" id="7406709">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406716">&amp;</span><span class="ident" id="7406717"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7406723">{</span><span class="ident" id="7406724">Name</span><span class="op" id="7406728">:</span>&nbsp;<span class="string" id="7406730">&#34;special-8&#34;</span><span class="op" id="7406741">,</span>&nbsp;<span class="ident" id="7406743">Value</span><span class="op" id="7406748">:</span>&nbsp;<span class="string" id="7406750">&#34;,&#34;</span><span class="op" id="7406753">}</span><span class="op" id="7406754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7406758">`special-8=&#34;,&#34;`</span><span class="op" id="7406773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406776">}</span><span class="op" id="7406777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406780">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406784">&amp;</span><span class="ident" id="7406785"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7406791">{</span><span class="ident" id="7406792">Name</span><span class="op" id="7406796">:</span>&nbsp;<span class="string" id="7406798">&#34;empty-value&#34;</span><span class="op" id="7406811">,</span>&nbsp;<span class="ident" id="7406813">Value</span><span class="op" id="7406818">:</span>&nbsp;<span class="string" id="7406820">&#34;&#34;</span><span class="op" id="7406822">}</span><span class="op" id="7406823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7406827">`empty-value=`</span><span class="op" id="7406841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7406844">}</span><span class="op" id="7406845">,</span><br>
<span class="lineno"></span><span class="op" id="7406847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7406850">func</span>&nbsp;<span class="ident" id="7406855">TestWriteSetCookies</span><span class="op" id="7406874">(</span><span class="ident" id="7406875">t</span>&nbsp;<span class="op" id="7406877">*</span><span class="ident" id="7406878"><a href="/net/http/cookie_test.go.html#7405227">testing</a></span><span class="op" id="7406885">.</span><span class="ident" id="7406886">T</span><span class="op" id="7406887">)</span>&nbsp;<span class="op" id="7406889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7406892">defer</span>&nbsp;<span class="ident" id="7406898"><a href="/net/http/cookie_test.go.html#7405192">log</a></span><span class="op" id="7406901">.</span><span class="ident" id="7406902">SetOutput</span><span class="op" id="7406911">(</span><span class="ident" id="7406912"><a href="/net/http/cookie_test.go.html#7405199">os</a></span><span class="op" id="7406914">.</span><span class="ident" id="7406915">Stderr</span><span class="op" id="7406921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7406924">var</span>&nbsp;<span class="ident" id="7406928">logbuf</span>&nbsp;<span class="ident" id="7406935"><a href="/net/http/cookie_test.go.html#7405159">bytes</a></span><span class="op" id="7406940">.</span><span class="ident" id="7406941">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7406949"><a href="/net/http/cookie_test.go.html#7405192">log</a></span><span class="op" id="7406952">.</span><span class="ident" id="7406953">SetOutput</span><span class="op" id="7406962">(</span><span class="op" id="7406963">&amp;</span><span class="ident" id="7406964"><a href="/net/http/cookie_test.go.html#7406928">logbuf</a></span><span class="op" id="7406970">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7406974">for</span>&nbsp;<span class="ident" id="7406978">i</span><span class="op" id="7406979">,</span>&nbsp;<span class="ident" id="7406981">tt</span>&nbsp;<span class="op" id="7406984">:=</span>&nbsp;<span class="keyword" id="7406987">range</span>&nbsp;<span class="ident" id="7406993"><a href="/net/http/cookie_test.go.html#7405252">writeSetCookiesTests</a></span>&nbsp;<span class="op" id="7407014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7407018">if</span>&nbsp;<span class="ident" id="7407021">g</span><span class="op" id="7407022">,</span>&nbsp;<span class="ident" id="7407024">e</span>&nbsp;<span class="op" id="7407026">:=</span>&nbsp;<span class="ident" id="7407029"><a href="/net/http/cookie_test.go.html#7406981">tt</a></span><span class="op" id="7407031">.</span><span class="ident" id="7407032">Cookie</span><span class="op" id="7407038">.</span><span class="ident" id="7407039">String</span><span class="op" id="7407045">(</span><span class="op" id="7407046">)</span><span class="op" id="7407047">,</span>&nbsp;<span class="ident" id="7407049"><a href="/net/http/cookie_test.go.html#7406981">tt</a></span><span class="op" id="7407051">.</span><span class="ident" id="7407052">Raw</span><span class="op" id="7407055">;</span>&nbsp;<span class="ident" id="7407057"><a href="/net/http/cookie_test.go.html#7407021">g</a></span>&nbsp;<span class="op" id="7407059">!=</span>&nbsp;<span class="ident" id="7407062"><a href="/net/http/cookie_test.go.html#7407024">e</a></span>&nbsp;<span class="op" id="7407064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7407069"><a href="/net/http/cookie_test.go.html#7406875">t</a></span><span class="op" id="7407070">.</span><span class="ident" id="7407071">Errorf</span><span class="op" id="7407077">(</span><span class="string" id="7407078">&#34;Test&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7407115">,</span>&nbsp;<span class="ident" id="7407117"><a href="/net/http/cookie_test.go.html#7406978">i</a></span><span class="op" id="7407118">,</span>&nbsp;<span class="ident" id="7407120"><a href="/net/http/cookie_test.go.html#7407024">e</a></span><span class="op" id="7407121">,</span>&nbsp;<span class="ident" id="7407123"><a href="/net/http/cookie_test.go.html#7407021">g</a></span><span class="op" id="7407124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7407129">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7407140">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7407143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7407147">if</span>&nbsp;<span class="ident" id="7407150">got</span><span class="op" id="7407153">,</span>&nbsp;<span class="ident" id="7407155">sub</span>&nbsp;<span class="op" id="7407159">:=</span>&nbsp;<span class="ident" id="7407162"><a href="/net/http/cookie_test.go.html#7406928">logbuf</a></span><span class="op" id="7407168">.</span><span class="ident" id="7407169">String</span><span class="op" id="7407175">(</span><span class="op" id="7407176">)</span><span class="op" id="7407177">,</span>&nbsp;<span class="string" id="7407179">&#34;dropping&nbsp;domain&nbsp;attribute&#34;</span><span class="op" id="7407206">;</span>&nbsp;<span class="op" id="7407208">!</span><span class="ident" id="7407209"><a href="/net/http/cookie_test.go.html#7405216">strings</a></span><span class="op" id="7407216">.</span><span class="ident" id="7407217">Contains</span><span class="op" id="7407225">(</span><span class="ident" id="7407226"><a href="/net/http/cookie_test.go.html#7407150">got</a></span><span class="op" id="7407229">,</span>&nbsp;<span class="ident" id="7407231"><a href="/net/http/cookie_test.go.html#7407155">sub</a></span><span class="op" id="7407234">)</span>&nbsp;<span class="op" id="7407236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7407240"><a href="/net/http/cookie_test.go.html#7406875">t</a></span><span class="op" id="7407241">.</span><span class="ident" id="7407242">Errorf</span><span class="op" id="7407248">(</span><span class="string" id="7407249">&#34;Expected&nbsp;substring&nbsp;%q&nbsp;in&nbsp;log&nbsp;output.&nbsp;Got:\n%s&#34;</span><span class="op" id="7407296">,</span>&nbsp;<span class="ident" id="7407298"><a href="/net/http/cookie_test.go.html#7407155">sub</a></span><span class="op" id="7407301">,</span>&nbsp;<span class="ident" id="7407303"><a href="/net/http/cookie_test.go.html#7407150">got</a></span><span class="op" id="7407306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7407309">}</span><br>
<span class="lineno">110</span><span class="op" id="7407311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7407314">type</span>&nbsp;<span class="ident" id="7407319">headerOnlyResponseWriter</span>&nbsp;<span class="ident" id="7407344"><a href="/net/http/header.go.html#3781581">Header</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7407352">func</span>&nbsp;<span class="op" id="7407357">(</span><span class="ident" id="7407358">ho</span>&nbsp;<span class="ident" id="7407361"><a href="/net/http/cookie_test.go.html#7407319">headerOnlyResponseWriter</a></span><span class="op" id="7407385">)</span>&nbsp;<span class="ident" id="7407387">Header</span><span class="op" id="7407393">(</span><span class="op" id="7407394">)</span>&nbsp;<span class="ident" id="7407396"><a href="/net/http/header.go.html#3781581">Header</a></span>&nbsp;<span class="op" id="7407403">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7407406">return</span>&nbsp;<span class="ident" id="7407413"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7407419">(</span><span class="ident" id="7407420"><a href="/net/http/cookie_test.go.html#7407358">ho</a></span><span class="op" id="7407422">)</span><br>
<span class="lineno"></span><span class="op" id="7407424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7407427">func</span>&nbsp;<span class="op" id="7407432">(</span><span class="ident" id="7407433">ho</span>&nbsp;<span class="ident" id="7407436"><a href="/net/http/cookie_test.go.html#7407319">headerOnlyResponseWriter</a></span><span class="op" id="7407460">)</span>&nbsp;<span class="ident" id="7407462">Write</span><span class="op" id="7407467">(</span><span class="op" id="7407468">[</span><span class="op" id="7407469">]</span><span class="builtintype" id="7407470">byte</span><span class="op" id="7407474">)</span>&nbsp;<span class="op" id="7407476">(</span><span class="builtintype" id="7407477">int</span><span class="op" id="7407480">,</span>&nbsp;<span class="builtintype" id="7407482">error</span><span class="op" id="7407487">)</span>&nbsp;<span class="op" id="7407489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7407492">panic</span><span class="op" id="7407497">(</span><span class="string" id="7407498">&#34;NOIMPL&#34;</span><span class="op" id="7407506">)</span><br>
<span class="lineno">120</span><span class="op" id="7407508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7407511">func</span>&nbsp;<span class="op" id="7407516">(</span><span class="ident" id="7407517">ho</span>&nbsp;<span class="ident" id="7407520"><a href="/net/http/cookie_test.go.html#7407319">headerOnlyResponseWriter</a></span><span class="op" id="7407544">)</span>&nbsp;<span class="ident" id="7407546">WriteHeader</span><span class="op" id="7407557">(</span><span class="builtintype" id="7407558">int</span><span class="op" id="7407561">)</span>&nbsp;<span class="op" id="7407563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7407566">panic</span><span class="op" id="7407571">(</span><span class="string" id="7407572">&#34;NOIMPL&#34;</span><span class="op" id="7407580">)</span><br>
<span class="lineno"></span><span class="op" id="7407582">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="7407585">func</span>&nbsp;<span class="ident" id="7407590">TestSetCookie</span><span class="op" id="7407603">(</span><span class="ident" id="7407604">t</span>&nbsp;<span class="op" id="7407606">*</span><span class="ident" id="7407607"><a href="/net/http/cookie_test.go.html#7405227">testing</a></span><span class="op" id="7407614">.</span><span class="ident" id="7407615">T</span><span class="op" id="7407616">)</span>&nbsp;<span class="op" id="7407618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7407621">m</span>&nbsp;<span class="op" id="7407623">:=</span>&nbsp;<span class="builtinfunc" id="7407626">make</span><span class="op" id="7407630">(</span><span class="ident" id="7407631"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7407637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7407640"><a href="/net/http/cookie.go.html#3753926">SetCookie</a></span><span class="op" id="7407649">(</span><span class="ident" id="7407650"><a href="/net/http/cookie_test.go.html#7407319">headerOnlyResponseWriter</a></span><span class="op" id="7407674">(</span><span class="ident" id="7407675"><a href="/net/http/cookie_test.go.html#7407621">m</a></span><span class="op" id="7407676">)</span><span class="op" id="7407677">,</span>&nbsp;<span class="op" id="7407679">&amp;</span><span class="ident" id="7407680"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7407686">{</span><span class="ident" id="7407687">Name</span><span class="op" id="7407691">:</span>&nbsp;<span class="string" id="7407693">&#34;cookie-1&#34;</span><span class="op" id="7407703">,</span>&nbsp;<span class="ident" id="7407705">Value</span><span class="op" id="7407710">:</span>&nbsp;<span class="string" id="7407712">&#34;one&#34;</span><span class="op" id="7407717">,</span>&nbsp;<span class="ident" id="7407719">Path</span><span class="op" id="7407723">:</span>&nbsp;<span class="string" id="7407725">&#34;/restricted/&#34;</span><span class="op" id="7407739">}</span><span class="op" id="7407740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7407743"><a href="/net/http/cookie.go.html#3753926">SetCookie</a></span><span class="op" id="7407752">(</span><span class="ident" id="7407753"><a href="/net/http/cookie_test.go.html#7407319">headerOnlyResponseWriter</a></span><span class="op" id="7407777">(</span><span class="ident" id="7407778"><a href="/net/http/cookie_test.go.html#7407621">m</a></span><span class="op" id="7407779">)</span><span class="op" id="7407780">,</span>&nbsp;<span class="op" id="7407782">&amp;</span><span class="ident" id="7407783"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7407789">{</span><span class="ident" id="7407790">Name</span><span class="op" id="7407794">:</span>&nbsp;<span class="string" id="7407796">&#34;cookie-2&#34;</span><span class="op" id="7407806">,</span>&nbsp;<span class="ident" id="7407808">Value</span><span class="op" id="7407813">:</span>&nbsp;<span class="string" id="7407815">&#34;two&#34;</span><span class="op" id="7407820">,</span>&nbsp;<span class="ident" id="7407822">MaxAge</span><span class="op" id="7407828">:</span>&nbsp;<span class="num" id="7407830">3600</span><span class="op" id="7407834">}</span><span class="op" id="7407835">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7407838">if</span>&nbsp;<span class="ident" id="7407841">l</span>&nbsp;<span class="op" id="7407843">:=</span>&nbsp;<span class="builtinfunc" id="7407846">len</span><span class="op" id="7407849">(</span><span class="ident" id="7407850"><a href="/net/http/cookie_test.go.html#7407621">m</a></span><span class="op" id="7407851">[</span><span class="string" id="7407852">&#34;Set-Cookie&#34;</span><span class="op" id="7407864">]</span><span class="op" id="7407865">)</span><span class="op" id="7407866">;</span>&nbsp;<span class="ident" id="7407868"><a href="/net/http/cookie_test.go.html#7407841">l</a></span>&nbsp;<span class="op" id="7407870">!=</span>&nbsp;<span class="num" id="7407873">2</span>&nbsp;<span class="op" id="7407875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7407879"><a href="/net/http/cookie_test.go.html#7407604">t</a></span><span class="op" id="7407880">.</span><span class="ident" id="7407881">Fatalf</span><span class="op" id="7407887">(</span><span class="string" id="7407888">&#34;expected&nbsp;%d&nbsp;cookies,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7407917">,</span>&nbsp;<span class="num" id="7407919">2</span><span class="op" id="7407920">,</span>&nbsp;<span class="ident" id="7407922"><a href="/net/http/cookie_test.go.html#7407841">l</a></span><span class="op" id="7407923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7407926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7407929">if</span>&nbsp;<span class="ident" id="7407932">g</span><span class="op" id="7407933">,</span>&nbsp;<span class="ident" id="7407935">e</span>&nbsp;<span class="op" id="7407937">:=</span>&nbsp;<span class="ident" id="7407940"><a href="/net/http/cookie_test.go.html#7407621">m</a></span><span class="op" id="7407941">[</span><span class="string" id="7407942">&#34;Set-Cookie&#34;</span><span class="op" id="7407954">]</span><span class="op" id="7407955">[</span><span class="num" id="7407956">0</span><span class="op" id="7407957">]</span><span class="op" id="7407958">,</span>&nbsp;<span class="string" id="7407960">&#34;cookie-1=one;&nbsp;Path=/restricted/&#34;</span><span class="op" id="7407993">;</span>&nbsp;<span class="ident" id="7407995"><a href="/net/http/cookie_test.go.html#7407932">g</a></span>&nbsp;<span class="op" id="7407997">!=</span>&nbsp;<span class="ident" id="7408000"><a href="/net/http/cookie_test.go.html#7407935">e</a></span>&nbsp;<span class="op" id="7408002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7408006"><a href="/net/http/cookie_test.go.html#7407604">t</a></span><span class="op" id="7408007">.</span><span class="ident" id="7408008">Errorf</span><span class="op" id="7408014">(</span><span class="string" id="7408015">&#34;cookie&nbsp;#1:&nbsp;want&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7408043">,</span>&nbsp;<span class="ident" id="7408045"><a href="/net/http/cookie_test.go.html#7407935">e</a></span><span class="op" id="7408046">,</span>&nbsp;<span class="ident" id="7408048"><a href="/net/http/cookie_test.go.html#7407932">g</a></span><span class="op" id="7408049">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7408055">if</span>&nbsp;<span class="ident" id="7408058">g</span><span class="op" id="7408059">,</span>&nbsp;<span class="ident" id="7408061">e</span>&nbsp;<span class="op" id="7408063">:=</span>&nbsp;<span class="ident" id="7408066"><a href="/net/http/cookie_test.go.html#7407621">m</a></span><span class="op" id="7408067">[</span><span class="string" id="7408068">&#34;Set-Cookie&#34;</span><span class="op" id="7408080">]</span><span class="op" id="7408081">[</span><span class="num" id="7408082">1</span><span class="op" id="7408083">]</span><span class="op" id="7408084">,</span>&nbsp;<span class="string" id="7408086">&#34;cookie-2=two;&nbsp;Max-Age=3600&#34;</span><span class="op" id="7408114">;</span>&nbsp;<span class="ident" id="7408116"><a href="/net/http/cookie_test.go.html#7408058">g</a></span>&nbsp;<span class="op" id="7408118">!=</span>&nbsp;<span class="ident" id="7408121"><a href="/net/http/cookie_test.go.html#7408061">e</a></span>&nbsp;<span class="op" id="7408123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7408127"><a href="/net/http/cookie_test.go.html#7407604">t</a></span><span class="op" id="7408128">.</span><span class="ident" id="7408129">Errorf</span><span class="op" id="7408135">(</span><span class="string" id="7408136">&#34;cookie&nbsp;#2:&nbsp;want&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7408164">,</span>&nbsp;<span class="ident" id="7408166"><a href="/net/http/cookie_test.go.html#7408061">e</a></span><span class="op" id="7408167">,</span>&nbsp;<span class="ident" id="7408169"><a href="/net/http/cookie_test.go.html#7408058">g</a></span><span class="op" id="7408170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408173">}</span><br>
<span class="lineno"></span><span class="op" id="7408175">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7408178">var</span>&nbsp;<span class="ident" id="7408182">addCookieTests</span>&nbsp;<span class="op" id="7408197">=</span>&nbsp;<span class="op" id="7408199">[</span><span class="op" id="7408200">]</span><span class="keyword" id="7408201">struct</span>&nbsp;<span class="op" id="7408208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7408211">Cookies</span>&nbsp;<span class="op" id="7408219">[</span><span class="op" id="7408220">]</span><span class="op" id="7408221">*</span><span class="ident" id="7408222"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7408230">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7408238">string</span><br>
<span class="lineno"></span><span class="op" id="7408245">}</span><span class="op" id="7408246">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408253">[</span><span class="op" id="7408254">]</span><span class="op" id="7408255">*</span><span class="ident" id="7408256"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7408262">{</span><span class="op" id="7408263">}</span><span class="op" id="7408264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7408268">&#34;&#34;</span><span class="op" id="7408270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408273">}</span><span class="op" id="7408274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408277">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408281">[</span><span class="op" id="7408282">]</span><span class="op" id="7408283">*</span><span class="ident" id="7408284"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7408290">{</span><span class="op" id="7408291">{</span><span class="ident" id="7408292">Name</span><span class="op" id="7408296">:</span>&nbsp;<span class="string" id="7408298">&#34;cookie-1&#34;</span><span class="op" id="7408308">,</span>&nbsp;<span class="ident" id="7408310">Value</span><span class="op" id="7408315">:</span>&nbsp;<span class="string" id="7408317">&#34;v$1&#34;</span><span class="op" id="7408322">}</span><span class="op" id="7408323">}</span><span class="op" id="7408324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7408328">&#34;cookie-1=v$1&#34;</span><span class="op" id="7408342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408345">}</span><span class="op" id="7408346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408353">[</span><span class="op" id="7408354">]</span><span class="op" id="7408355">*</span><span class="ident" id="7408356"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7408362">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408367">{</span><span class="ident" id="7408368">Name</span><span class="op" id="7408372">:</span>&nbsp;<span class="string" id="7408374">&#34;cookie-1&#34;</span><span class="op" id="7408384">,</span>&nbsp;<span class="ident" id="7408386">Value</span><span class="op" id="7408391">:</span>&nbsp;<span class="string" id="7408393">&#34;v$1&#34;</span><span class="op" id="7408398">}</span><span class="op" id="7408399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408404">{</span><span class="ident" id="7408405">Name</span><span class="op" id="7408409">:</span>&nbsp;<span class="string" id="7408411">&#34;cookie-2&#34;</span><span class="op" id="7408421">,</span>&nbsp;<span class="ident" id="7408423">Value</span><span class="op" id="7408428">:</span>&nbsp;<span class="string" id="7408430">&#34;v$2&#34;</span><span class="op" id="7408435">}</span><span class="op" id="7408436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408441">{</span><span class="ident" id="7408442">Name</span><span class="op" id="7408446">:</span>&nbsp;<span class="string" id="7408448">&#34;cookie-3&#34;</span><span class="op" id="7408458">,</span>&nbsp;<span class="ident" id="7408460">Value</span><span class="op" id="7408465">:</span>&nbsp;<span class="string" id="7408467">&#34;v$3&#34;</span><span class="op" id="7408472">}</span><span class="op" id="7408473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408477">}</span><span class="op" id="7408478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7408482">&#34;cookie-1=v$1;&nbsp;cookie-2=v$2;&nbsp;cookie-3=v$3&#34;</span><span class="op" id="7408524">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408527">}</span><span class="op" id="7408528">,</span><br>
<span class="lineno"></span><span class="op" id="7408530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7408533">func</span>&nbsp;<span class="ident" id="7408538">TestAddCookie</span><span class="op" id="7408551">(</span><span class="ident" id="7408552">t</span>&nbsp;<span class="op" id="7408554">*</span><span class="ident" id="7408555"><a href="/net/http/cookie_test.go.html#7405227">testing</a></span><span class="op" id="7408562">.</span><span class="ident" id="7408563">T</span><span class="op" id="7408564">)</span>&nbsp;<span class="op" id="7408566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7408569">for</span>&nbsp;<span class="ident" id="7408573">i</span><span class="op" id="7408574">,</span>&nbsp;<span class="ident" id="7408576">tt</span>&nbsp;<span class="op" id="7408579">:=</span>&nbsp;<span class="keyword" id="7408582">range</span>&nbsp;<span class="ident" id="7408588"><a href="/net/http/cookie_test.go.html#7408182">addCookieTests</a></span>&nbsp;<span class="op" id="7408603">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7408607">req</span><span class="op" id="7408610">,</span>&nbsp;<span class="ident" id="7408612">_</span>&nbsp;<span class="op" id="7408614">:=</span>&nbsp;<span class="ident" id="7408617"><a href="/net/http/request.go.html#3804993">NewRequest</a></span><span class="op" id="7408627">(</span><span class="string" id="7408628">&#34;GET&#34;</span><span class="op" id="7408633">,</span>&nbsp;<span class="string" id="7408635">&#34;http://example.com/&#34;</span><span class="op" id="7408656">,</span>&nbsp;<span class="ident" id="7408658">nil</span><span class="op" id="7408661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7408665">for</span>&nbsp;<span class="ident" id="7408669">_</span><span class="op" id="7408670">,</span>&nbsp;<span class="ident" id="7408672">c</span>&nbsp;<span class="op" id="7408674">:=</span>&nbsp;<span class="keyword" id="7408677">range</span>&nbsp;<span class="ident" id="7408683"><a href="/net/http/cookie_test.go.html#7408576">tt</a></span><span class="op" id="7408685">.</span><span class="ident" id="7408686">Cookies</span>&nbsp;<span class="op" id="7408694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7408699"><a href="/net/http/cookie_test.go.html#7408607">req</a></span><span class="op" id="7408702">.</span><span class="ident" id="7408703">AddCookie</span><span class="op" id="7408712">(</span><span class="ident" id="7408713"><a href="/net/http/cookie_test.go.html#7408672">c</a></span><span class="op" id="7408714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7408722">if</span>&nbsp;<span class="ident" id="7408725">g</span>&nbsp;<span class="op" id="7408727">:=</span>&nbsp;<span class="ident" id="7408730"><a href="/net/http/cookie_test.go.html#7408607">req</a></span><span class="op" id="7408733">.</span><span class="ident" id="7408734">Header</span><span class="op" id="7408740">.</span><span class="ident" id="7408741">Get</span><span class="op" id="7408744">(</span><span class="string" id="7408745">&#34;Cookie&#34;</span><span class="op" id="7408753">)</span><span class="op" id="7408754">;</span>&nbsp;<span class="ident" id="7408756"><a href="/net/http/cookie_test.go.html#7408725">g</a></span>&nbsp;<span class="op" id="7408758">!=</span>&nbsp;<span class="ident" id="7408761"><a href="/net/http/cookie_test.go.html#7408576">tt</a></span><span class="op" id="7408763">.</span><span class="ident" id="7408764">Raw</span>&nbsp;<span class="op" id="7408768">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7408773"><a href="/net/http/cookie_test.go.html#7408552">t</a></span><span class="op" id="7408774">.</span><span class="ident" id="7408775">Errorf</span><span class="op" id="7408781">(</span><span class="string" id="7408782">&#34;Test&nbsp;%d:\nwant:&nbsp;%s\n&nbsp;got:&nbsp;%s\n&#34;</span><span class="op" id="7408814">,</span>&nbsp;<span class="ident" id="7408816"><a href="/net/http/cookie_test.go.html#7408573">i</a></span><span class="op" id="7408817">,</span>&nbsp;<span class="ident" id="7408819"><a href="/net/http/cookie_test.go.html#7408576">tt</a></span><span class="op" id="7408821">.</span><span class="ident" id="7408822">Raw</span><span class="op" id="7408825">,</span>&nbsp;<span class="ident" id="7408827"><a href="/net/http/cookie_test.go.html#7408725">g</a></span><span class="op" id="7408828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7408833">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408847">}</span><br>
<span class="lineno"></span><span class="op" id="7408849">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="7408852">var</span>&nbsp;<span class="ident" id="7408856">readSetCookiesTests</span>&nbsp;<span class="op" id="7408876">=</span>&nbsp;<span class="op" id="7408878">[</span><span class="op" id="7408879">]</span><span class="keyword" id="7408880">struct</span>&nbsp;<span class="op" id="7408887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7408890">Header</span>&nbsp;&nbsp;<span class="ident" id="7408898"><a href="/net/http/header.go.html#3781581">Header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7408906">Cookies</span>&nbsp;<span class="op" id="7408914">[</span><span class="op" id="7408915">]</span><span class="op" id="7408916">*</span><span class="ident" id="7408917"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><br>
<span class="lineno"></span><span class="op" id="7408924">}</span><span class="op" id="7408925">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7408932"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7408938">{</span><span class="string" id="7408939">&#34;Set-Cookie&#34;</span><span class="op" id="7408951">:</span>&nbsp;<span class="op" id="7408953">{</span><span class="string" id="7408954">&#34;Cookie-1=v$1&#34;</span><span class="op" id="7408968">}</span><span class="op" id="7408969">}</span><span class="op" id="7408970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7408974">[</span><span class="op" id="7408975">]</span><span class="op" id="7408976">*</span><span class="ident" id="7408977"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7408983">{</span><span class="op" id="7408984">{</span><span class="ident" id="7408985">Name</span><span class="op" id="7408989">:</span>&nbsp;<span class="string" id="7408991">&#34;Cookie-1&#34;</span><span class="op" id="7409001">,</span>&nbsp;<span class="ident" id="7409003">Value</span><span class="op" id="7409008">:</span>&nbsp;<span class="string" id="7409010">&#34;v$1&#34;</span><span class="op" id="7409015">,</span>&nbsp;<span class="ident" id="7409017">Raw</span><span class="op" id="7409020">:</span>&nbsp;<span class="string" id="7409022">&#34;Cookie-1=v$1&#34;</span><span class="op" id="7409036">}</span><span class="op" id="7409037">}</span><span class="op" id="7409038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7409041">}</span><span class="op" id="7409042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7409045">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409049"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7409055">{</span><span class="string" id="7409056">&#34;Set-Cookie&#34;</span><span class="op" id="7409068">:</span>&nbsp;<span class="op" id="7409070">{</span><span class="string" id="7409071">&#34;NID=99=YsDT5i3E-CXax-;&nbsp;expires=Wed,&nbsp;23-Nov-2011&nbsp;01:05:03&nbsp;GMT;&nbsp;path=/;&nbsp;domain=.google.ch;&nbsp;HttpOnly&#34;</span><span class="op" id="7409170">}</span><span class="op" id="7409171">}</span><span class="op" id="7409172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7409176">[</span><span class="op" id="7409177">]</span><span class="op" id="7409178">*</span><span class="ident" id="7409179"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7409185">{</span><span class="op" id="7409186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409191">Name</span><span class="op" id="7409195">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409203">&#34;NID&#34;</span><span class="op" id="7409208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409213">Value</span><span class="op" id="7409218">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409225">&#34;99=YsDT5i3E-CXax-&#34;</span><span class="op" id="7409244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409249">Path</span><span class="op" id="7409253">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409261">&#34;/&#34;</span><span class="op" id="7409264">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409269">Domain</span><span class="op" id="7409275">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409281">&#34;.google.ch&#34;</span><span class="op" id="7409293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409298">HttpOnly</span><span class="op" id="7409306">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7409310">true</span><span class="op" id="7409314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409319">Expires</span><span class="op" id="7409326">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409331"><a href="/net/http/cookie_test.go.html#7405238">time</a></span><span class="op" id="7409335">.</span><span class="ident" id="7409336">Date</span><span class="op" id="7409340">(</span><span class="num" id="7409341">2011</span><span class="op" id="7409345">,</span>&nbsp;<span class="num" id="7409347">11</span><span class="op" id="7409349">,</span>&nbsp;<span class="num" id="7409351">23</span><span class="op" id="7409353">,</span>&nbsp;<span class="num" id="7409355">1</span><span class="op" id="7409356">,</span>&nbsp;<span class="num" id="7409358">5</span><span class="op" id="7409359">,</span>&nbsp;<span class="num" id="7409361">3</span><span class="op" id="7409362">,</span>&nbsp;<span class="num" id="7409364">0</span><span class="op" id="7409365">,</span>&nbsp;<span class="ident" id="7409367"><a href="/net/http/cookie_test.go.html#7405238">time</a></span><span class="op" id="7409371">.</span><span class="ident" id="7409372">UTC</span><span class="op" id="7409375">)</span><span class="op" id="7409376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409381">RawExpires</span><span class="op" id="7409391">:</span>&nbsp;<span class="string" id="7409393">&#34;Wed,&nbsp;23-Nov-2011&nbsp;01:05:03&nbsp;GMT&#34;</span><span class="op" id="7409424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409429">Raw</span><span class="op" id="7409432">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409441">&#34;NID=99=YsDT5i3E-CXax-;&nbsp;expires=Wed,&nbsp;23-Nov-2011&nbsp;01:05:03&nbsp;GMT;&nbsp;path=/;&nbsp;domain=.google.ch;&nbsp;HttpOnly&#34;</span><span class="op" id="7409540">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7409544">}</span><span class="op" id="7409545">}</span><span class="op" id="7409546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7409549">}</span><span class="op" id="7409550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7409553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409557"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7409563">{</span><span class="string" id="7409564">&#34;Set-Cookie&#34;</span><span class="op" id="7409576">:</span>&nbsp;<span class="op" id="7409578">{</span><span class="string" id="7409579">&#34;.ASPXAUTH=7E3AA;&nbsp;expires=Wed,&nbsp;07-Mar-2012&nbsp;14:25:06&nbsp;GMT;&nbsp;path=/;&nbsp;HttpOnly&#34;</span><span class="op" id="7409653">}</span><span class="op" id="7409654">}</span><span class="op" id="7409655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7409659">[</span><span class="op" id="7409660">]</span><span class="op" id="7409661">*</span><span class="ident" id="7409662"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7409668">{</span><span class="op" id="7409669">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409674">Name</span><span class="op" id="7409678">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409686">&#34;.ASPXAUTH&#34;</span><span class="op" id="7409697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409702">Value</span><span class="op" id="7409707">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409714">&#34;7E3AA&#34;</span><span class="op" id="7409721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409726">Path</span><span class="op" id="7409730">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409738">&#34;/&#34;</span><span class="op" id="7409741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409746">Expires</span><span class="op" id="7409753">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7409758"><a href="/net/http/cookie_test.go.html#7405238">time</a></span><span class="op" id="7409762">.</span><span class="ident" id="7409763">Date</span><span class="op" id="7409767">(</span><span class="num" id="7409768">2012</span><span class="op" id="7409772">,</span>&nbsp;<span class="num" id="7409774">3</span><span class="op" id="7409775">,</span>&nbsp;<span class="num" id="7409777">7</span><span class="op" id="7409778">,</span>&nbsp;<span class="num" id="7409780">14</span><span class="op" id="7409782">,</span>&nbsp;<span class="num" id="7409784">25</span><span class="op" id="7409786">,</span>&nbsp;<span class="num" id="7409788">6</span><span class="op" id="7409789">,</span>&nbsp;<span class="num" id="7409791">0</span><span class="op" id="7409792">,</span>&nbsp;<span class="ident" id="7409794"><a href="/net/http/cookie_test.go.html#7405238">time</a></span><span class="op" id="7409798">.</span><span class="ident" id="7409799">UTC</span><span class="op" id="7409802">)</span><span class="op" id="7409803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409808">RawExpires</span><span class="op" id="7409818">:</span>&nbsp;<span class="string" id="7409820">&#34;Wed,&nbsp;07-Mar-2012&nbsp;14:25:06&nbsp;GMT&#34;</span><span class="op" id="7409851">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409856">HttpOnly</span><span class="op" id="7409864">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7409868">true</span><span class="op" id="7409872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409877">Raw</span><span class="op" id="7409880">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7409889">&#34;.ASPXAUTH=7E3AA;&nbsp;expires=Wed,&nbsp;07-Mar-2012&nbsp;14:25:06&nbsp;GMT;&nbsp;path=/;&nbsp;HttpOnly&#34;</span><span class="op" id="7409963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7409967">}</span><span class="op" id="7409968">}</span><span class="op" id="7409969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7409972">}</span><span class="op" id="7409973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7409976">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7409980"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7409986">{</span><span class="string" id="7409987">&#34;Set-Cookie&#34;</span><span class="op" id="7409999">:</span>&nbsp;<span class="op" id="7410001">{</span><span class="string" id="7410002">&#34;ASP.NET_SessionId=foo;&nbsp;path=/;&nbsp;HttpOnly&#34;</span><span class="op" id="7410043">}</span><span class="op" id="7410044">}</span><span class="op" id="7410045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410049">[</span><span class="op" id="7410050">]</span><span class="op" id="7410051">*</span><span class="ident" id="7410052"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7410058">{</span><span class="op" id="7410059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7410064">Name</span><span class="op" id="7410068">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7410074">&#34;ASP.NET_SessionId&#34;</span><span class="op" id="7410093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7410098">Value</span><span class="op" id="7410103">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7410108">&#34;foo&#34;</span><span class="op" id="7410113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7410118">Path</span><span class="op" id="7410122">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7410128">&#34;/&#34;</span><span class="op" id="7410131">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7410136">HttpOnly</span><span class="op" id="7410144">:</span>&nbsp;<span class="ident" id="7410146">true</span><span class="op" id="7410150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7410155">Raw</span><span class="op" id="7410158">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7410165">&#34;ASP.NET_SessionId=foo;&nbsp;path=/;&nbsp;HttpOnly&#34;</span><span class="op" id="7410206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410210">}</span><span class="op" id="7410211">}</span><span class="op" id="7410212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410215">}</span><span class="op" id="7410216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7410219">//&nbsp;Make&nbsp;sure&nbsp;we&nbsp;can&nbsp;properly&nbsp;read&nbsp;back&nbsp;the&nbsp;Set-Cookie&nbsp;headers&nbsp;we&nbsp;create</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7410292">//&nbsp;for&nbsp;values&nbsp;containing&nbsp;spaces&nbsp;or&nbsp;commas:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7410340"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7410346">{</span><span class="string" id="7410347">&#34;Set-Cookie&#34;</span><span class="op" id="7410359">:</span>&nbsp;<span class="op" id="7410361">{</span><span class="string" id="7410362">`special-1=a&nbsp;z`</span><span class="op" id="7410377">}</span><span class="op" id="7410378">}</span><span class="op" id="7410379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410383">[</span><span class="op" id="7410384">]</span><span class="op" id="7410385">*</span><span class="ident" id="7410386"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7410392">{</span><span class="op" id="7410393">{</span><span class="ident" id="7410394">Name</span><span class="op" id="7410398">:</span>&nbsp;<span class="string" id="7410400">&#34;special-1&#34;</span><span class="op" id="7410411">,</span>&nbsp;<span class="ident" id="7410413">Value</span><span class="op" id="7410418">:</span>&nbsp;<span class="string" id="7410420">&#34;a&nbsp;z&#34;</span><span class="op" id="7410425">,</span>&nbsp;<span class="ident" id="7410427">Raw</span><span class="op" id="7410430">:</span>&nbsp;<span class="string" id="7410432">`special-1=a&nbsp;z`</span><span class="op" id="7410447">}</span><span class="op" id="7410448">}</span><span class="op" id="7410449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410452">}</span><span class="op" id="7410453">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7410460"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7410466">{</span><span class="string" id="7410467">&#34;Set-Cookie&#34;</span><span class="op" id="7410479">:</span>&nbsp;<span class="op" id="7410481">{</span><span class="string" id="7410482">`special-2=&#34;&nbsp;z&#34;`</span><span class="op" id="7410498">}</span><span class="op" id="7410499">}</span><span class="op" id="7410500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410504">[</span><span class="op" id="7410505">]</span><span class="op" id="7410506">*</span><span class="ident" id="7410507"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7410513">{</span><span class="op" id="7410514">{</span><span class="ident" id="7410515">Name</span><span class="op" id="7410519">:</span>&nbsp;<span class="string" id="7410521">&#34;special-2&#34;</span><span class="op" id="7410532">,</span>&nbsp;<span class="ident" id="7410534">Value</span><span class="op" id="7410539">:</span>&nbsp;<span class="string" id="7410541">&#34;&nbsp;z&#34;</span><span class="op" id="7410545">,</span>&nbsp;<span class="ident" id="7410547">Raw</span><span class="op" id="7410550">:</span>&nbsp;<span class="string" id="7410552">`special-2=&#34;&nbsp;z&#34;`</span><span class="op" id="7410568">}</span><span class="op" id="7410569">}</span><span class="op" id="7410570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410573">}</span><span class="op" id="7410574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410577">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7410581"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7410587">{</span><span class="string" id="7410588">&#34;Set-Cookie&#34;</span><span class="op" id="7410600">:</span>&nbsp;<span class="op" id="7410602">{</span><span class="string" id="7410603">`special-3=&#34;a&nbsp;&#34;`</span><span class="op" id="7410619">}</span><span class="op" id="7410620">}</span><span class="op" id="7410621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410625">[</span><span class="op" id="7410626">]</span><span class="op" id="7410627">*</span><span class="ident" id="7410628"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7410634">{</span><span class="op" id="7410635">{</span><span class="ident" id="7410636">Name</span><span class="op" id="7410640">:</span>&nbsp;<span class="string" id="7410642">&#34;special-3&#34;</span><span class="op" id="7410653">,</span>&nbsp;<span class="ident" id="7410655">Value</span><span class="op" id="7410660">:</span>&nbsp;<span class="string" id="7410662">&#34;a&nbsp;&#34;</span><span class="op" id="7410666">,</span>&nbsp;<span class="ident" id="7410668">Raw</span><span class="op" id="7410671">:</span>&nbsp;<span class="string" id="7410673">`special-3=&#34;a&nbsp;&#34;`</span><span class="op" id="7410689">}</span><span class="op" id="7410690">}</span><span class="op" id="7410691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410694">}</span><span class="op" id="7410695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7410702"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7410708">{</span><span class="string" id="7410709">&#34;Set-Cookie&#34;</span><span class="op" id="7410721">:</span>&nbsp;<span class="op" id="7410723">{</span><span class="string" id="7410724">`special-4=&#34;&nbsp;&#34;`</span><span class="op" id="7410739">}</span><span class="op" id="7410740">}</span><span class="op" id="7410741">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410745">[</span><span class="op" id="7410746">]</span><span class="op" id="7410747">*</span><span class="ident" id="7410748"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7410754">{</span><span class="op" id="7410755">{</span><span class="ident" id="7410756">Name</span><span class="op" id="7410760">:</span>&nbsp;<span class="string" id="7410762">&#34;special-4&#34;</span><span class="op" id="7410773">,</span>&nbsp;<span class="ident" id="7410775">Value</span><span class="op" id="7410780">:</span>&nbsp;<span class="string" id="7410782">&#34;&nbsp;&#34;</span><span class="op" id="7410785">,</span>&nbsp;<span class="ident" id="7410787">Raw</span><span class="op" id="7410790">:</span>&nbsp;<span class="string" id="7410792">`special-4=&#34;&nbsp;&#34;`</span><span class="op" id="7410807">}</span><span class="op" id="7410808">}</span><span class="op" id="7410809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410812">}</span><span class="op" id="7410813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7410820"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7410826">{</span><span class="string" id="7410827">&#34;Set-Cookie&#34;</span><span class="op" id="7410839">:</span>&nbsp;<span class="op" id="7410841">{</span><span class="string" id="7410842">`special-5=a,z`</span><span class="op" id="7410857">}</span><span class="op" id="7410858">}</span><span class="op" id="7410859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410863">[</span><span class="op" id="7410864">]</span><span class="op" id="7410865">*</span><span class="ident" id="7410866"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7410872">{</span><span class="op" id="7410873">{</span><span class="ident" id="7410874">Name</span><span class="op" id="7410878">:</span>&nbsp;<span class="string" id="7410880">&#34;special-5&#34;</span><span class="op" id="7410891">,</span>&nbsp;<span class="ident" id="7410893">Value</span><span class="op" id="7410898">:</span>&nbsp;<span class="string" id="7410900">&#34;a,z&#34;</span><span class="op" id="7410905">,</span>&nbsp;<span class="ident" id="7410907">Raw</span><span class="op" id="7410910">:</span>&nbsp;<span class="string" id="7410912">`special-5=a,z`</span><span class="op" id="7410927">}</span><span class="op" id="7410928">}</span><span class="op" id="7410929">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410932">}</span><span class="op" id="7410933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7410940"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7410946">{</span><span class="string" id="7410947">&#34;Set-Cookie&#34;</span><span class="op" id="7410959">:</span>&nbsp;<span class="op" id="7410961">{</span><span class="string" id="7410962">`special-6=&#34;,z&#34;`</span><span class="op" id="7410978">}</span><span class="op" id="7410979">}</span><span class="op" id="7410980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7410984">[</span><span class="op" id="7410985">]</span><span class="op" id="7410986">*</span><span class="ident" id="7410987"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7410993">{</span><span class="op" id="7410994">{</span><span class="ident" id="7410995">Name</span><span class="op" id="7410999">:</span>&nbsp;<span class="string" id="7411001">&#34;special-6&#34;</span><span class="op" id="7411012">,</span>&nbsp;<span class="ident" id="7411014">Value</span><span class="op" id="7411019">:</span>&nbsp;<span class="string" id="7411021">&#34;,z&#34;</span><span class="op" id="7411025">,</span>&nbsp;<span class="ident" id="7411027">Raw</span><span class="op" id="7411030">:</span>&nbsp;<span class="string" id="7411032">`special-6=&#34;,z&#34;`</span><span class="op" id="7411048">}</span><span class="op" id="7411049">}</span><span class="op" id="7411050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7411053">}</span><span class="op" id="7411054">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7411057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7411061"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7411067">{</span><span class="string" id="7411068">&#34;Set-Cookie&#34;</span><span class="op" id="7411080">:</span>&nbsp;<span class="op" id="7411082">{</span><span class="string" id="7411083">`special-7=a,`</span><span class="op" id="7411097">}</span><span class="op" id="7411098">}</span><span class="op" id="7411099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7411103">[</span><span class="op" id="7411104">]</span><span class="op" id="7411105">*</span><span class="ident" id="7411106"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7411112">{</span><span class="op" id="7411113">{</span><span class="ident" id="7411114">Name</span><span class="op" id="7411118">:</span>&nbsp;<span class="string" id="7411120">&#34;special-7&#34;</span><span class="op" id="7411131">,</span>&nbsp;<span class="ident" id="7411133">Value</span><span class="op" id="7411138">:</span>&nbsp;<span class="string" id="7411140">&#34;a,&#34;</span><span class="op" id="7411144">,</span>&nbsp;<span class="ident" id="7411146">Raw</span><span class="op" id="7411149">:</span>&nbsp;<span class="string" id="7411151">`special-7=a,`</span><span class="op" id="7411165">}</span><span class="op" id="7411166">}</span><span class="op" id="7411167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7411170">}</span><span class="op" id="7411171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7411174">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7411178"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7411184">{</span><span class="string" id="7411185">&#34;Set-Cookie&#34;</span><span class="op" id="7411197">:</span>&nbsp;<span class="op" id="7411199">{</span><span class="string" id="7411200">`special-8=&#34;,&#34;`</span><span class="op" id="7411215">}</span><span class="op" id="7411216">}</span><span class="op" id="7411217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7411221">[</span><span class="op" id="7411222">]</span><span class="op" id="7411223">*</span><span class="ident" id="7411224"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7411230">{</span><span class="op" id="7411231">{</span><span class="ident" id="7411232">Name</span><span class="op" id="7411236">:</span>&nbsp;<span class="string" id="7411238">&#34;special-8&#34;</span><span class="op" id="7411249">,</span>&nbsp;<span class="ident" id="7411251">Value</span><span class="op" id="7411256">:</span>&nbsp;<span class="string" id="7411258">&#34;,&#34;</span><span class="op" id="7411261">,</span>&nbsp;<span class="ident" id="7411263">Raw</span><span class="op" id="7411266">:</span>&nbsp;<span class="string" id="7411268">`special-8=&#34;,&#34;`</span><span class="op" id="7411283">}</span><span class="op" id="7411284">}</span><span class="op" id="7411285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7411288">}</span><span class="op" id="7411289">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7411293">//&nbsp;TODO(bradfitz):&nbsp;users&nbsp;have&nbsp;reported&nbsp;seeing&nbsp;this&nbsp;in&nbsp;the</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7411352">//&nbsp;wild,&nbsp;but&nbsp;do&nbsp;browsers&nbsp;handle&nbsp;it?&nbsp;RFC&nbsp;6265&nbsp;just&nbsp;says&nbsp;&#34;don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7411415">//&nbsp;do&nbsp;that&#34;&nbsp;(section&nbsp;3)&nbsp;and&nbsp;then&nbsp;never&nbsp;mentions&nbsp;header&nbsp;folding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7411479">//&nbsp;again.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7411490">//&nbsp;Header{&#34;Set-Cookie&#34;:&nbsp;{&#34;ASP.NET_SessionId=foo;&nbsp;path=/;&nbsp;HttpOnly,&nbsp;.ASPXAUTH=7E3AA;&nbsp;expires=Wed,&nbsp;07-Mar-2012&nbsp;14:25:06&nbsp;GMT;&nbsp;path=/;&nbsp;HttpOnly&#34;}},</span><br>
<span class="lineno"></span><span class="op" id="7411634">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="7411637">func</span>&nbsp;<span class="ident" id="7411642">toJSON</span><span class="op" id="7411648">(</span><span class="ident" id="7411649">v</span>&nbsp;<span class="keyword" id="7411651">interface</span><span class="op" id="7411660">{</span><span class="op" id="7411661">}</span><span class="op" id="7411662">)</span>&nbsp;<span class="builtintype" id="7411664">string</span>&nbsp;<span class="op" id="7411671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7411674">b</span><span class="op" id="7411675">,</span>&nbsp;<span class="ident" id="7411677">err</span>&nbsp;<span class="op" id="7411681">:=</span>&nbsp;<span class="ident" id="7411684"><a href="/net/http/cookie_test.go.html#7405168">json</a></span><span class="op" id="7411688">.</span><span class="ident" id="7411689">Marshal</span><span class="op" id="7411696">(</span><span class="ident" id="7411697"><a href="/net/http/cookie_test.go.html#7411649">v</a></span><span class="op" id="7411698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7411701">if</span>&nbsp;<span class="ident" id="7411704"><a href="/net/http/cookie_test.go.html#7411677">err</a></span>&nbsp;<span class="op" id="7411708">!=</span>&nbsp;<span class="ident" id="7411711">nil</span>&nbsp;<span class="op" id="7411715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7411719">return</span>&nbsp;<span class="ident" id="7411726"><a href="/net/http/cookie_test.go.html#7405185">fmt</a></span><span class="op" id="7411729">.</span><span class="ident" id="7411730">Sprintf</span><span class="op" id="7411737">(</span><span class="string" id="7411738">&#34;%#v&#34;</span><span class="op" id="7411743">,</span>&nbsp;<span class="ident" id="7411745"><a href="/net/http/cookie_test.go.html#7411649">v</a></span><span class="op" id="7411746">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7411749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7411752">return</span>&nbsp;<span class="builtintype" id="7411759">string</span><span class="op" id="7411765">(</span><span class="ident" id="7411766"><a href="/net/http/cookie_test.go.html#7411674">b</a></span><span class="op" id="7411767">)</span><br>
<span class="lineno"></span><span class="op" id="7411769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7411772">func</span>&nbsp;<span class="ident" id="7411777">TestReadSetCookies</span><span class="op" id="7411795">(</span><span class="ident" id="7411796">t</span>&nbsp;<span class="op" id="7411798">*</span><span class="ident" id="7411799"><a href="/net/http/cookie_test.go.html#7405227">testing</a></span><span class="op" id="7411806">.</span><span class="ident" id="7411807">T</span><span class="op" id="7411808">)</span>&nbsp;<span class="op" id="7411810">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7411813">for</span>&nbsp;<span class="ident" id="7411817">i</span><span class="op" id="7411818">,</span>&nbsp;<span class="ident" id="7411820">tt</span>&nbsp;<span class="op" id="7411823">:=</span>&nbsp;<span class="keyword" id="7411826">range</span>&nbsp;<span class="ident" id="7411832"><a href="/net/http/cookie_test.go.html#7408856">readSetCookiesTests</a></span>&nbsp;<span class="op" id="7411852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7411856">for</span>&nbsp;<span class="ident" id="7411860">n</span>&nbsp;<span class="op" id="7411862">:=</span>&nbsp;<span class="num" id="7411865">0</span><span class="op" id="7411866">;</span>&nbsp;<span class="ident" id="7411868"><a href="/net/http/cookie_test.go.html#7411860">n</a></span>&nbsp;<span class="op" id="7411870">&lt;</span>&nbsp;<span class="num" id="7411872">2</span><span class="op" id="7411873">;</span>&nbsp;<span class="ident" id="7411875"><a href="/net/http/cookie_test.go.html#7411860">n</a></span><span class="op" id="7411876">++</span>&nbsp;<span class="op" id="7411879">{</span>&nbsp;<span class="comment" id="7411881">//&nbsp;to&nbsp;verify&nbsp;readSetCookies&nbsp;doesn&#39;t&nbsp;mutate&nbsp;its&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7411937">c</span>&nbsp;<span class="op" id="7411939">:=</span>&nbsp;<span class="ident" id="7411942"><a href="/net/http/cookie.go.html#3752027">readSetCookies</a></span><span class="op" id="7411956">(</span><span class="ident" id="7411957"><a href="/net/http/cookie_test.go.html#7411820">tt</a></span><span class="op" id="7411959">.</span><span class="ident" id="7411960">Header</span><span class="op" id="7411966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7411971">if</span>&nbsp;<span class="op" id="7411974">!</span><span class="ident" id="7411975"><a href="/net/http/cookie_test.go.html#7405205">reflect</a></span><span class="op" id="7411982">.</span><span class="ident" id="7411983">DeepEqual</span><span class="op" id="7411992">(</span><span class="ident" id="7411993"><a href="/net/http/cookie_test.go.html#7411937">c</a></span><span class="op" id="7411994">,</span>&nbsp;<span class="ident" id="7411996"><a href="/net/http/cookie_test.go.html#7411820">tt</a></span><span class="op" id="7411998">.</span><span class="ident" id="7411999">Cookies</span><span class="op" id="7412006">)</span>&nbsp;<span class="op" id="7412008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7412014"><a href="/net/http/cookie_test.go.html#7411796">t</a></span><span class="op" id="7412015">.</span><span class="ident" id="7412016">Errorf</span><span class="op" id="7412022">(</span><span class="string" id="7412023">&#34;#%d&nbsp;readSetCookies:&nbsp;have\n%s\nwant\n%s\n&#34;</span><span class="op" id="7412065">,</span>&nbsp;<span class="ident" id="7412067"><a href="/net/http/cookie_test.go.html#7411817">i</a></span><span class="op" id="7412068">,</span>&nbsp;<span class="ident" id="7412070"><a href="/net/http/cookie_test.go.html#7411642">toJSON</a></span><span class="op" id="7412076">(</span><span class="ident" id="7412077"><a href="/net/http/cookie_test.go.html#7411937">c</a></span><span class="op" id="7412078">)</span><span class="op" id="7412079">,</span>&nbsp;<span class="ident" id="7412081"><a href="/net/http/cookie_test.go.html#7411642">toJSON</a></span><span class="op" id="7412087">(</span><span class="ident" id="7412088"><a href="/net/http/cookie_test.go.html#7411820">tt</a></span><span class="op" id="7412090">.</span><span class="ident" id="7412091">Cookies</span><span class="op" id="7412098">)</span><span class="op" id="7412099">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7412105">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412124">}</span><br>
<span class="lineno"></span><span class="op" id="7412126">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="7412129">var</span>&nbsp;<span class="ident" id="7412133">readCookiesTests</span>&nbsp;<span class="op" id="7412150">=</span>&nbsp;<span class="op" id="7412152">[</span><span class="op" id="7412153">]</span><span class="keyword" id="7412154">struct</span>&nbsp;<span class="op" id="7412161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7412164">Header</span>&nbsp;&nbsp;<span class="ident" id="7412172"><a href="/net/http/header.go.html#3781581">Header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7412180">Filter</span>&nbsp;&nbsp;<span class="builtintype" id="7412188">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7412196">Cookies</span>&nbsp;<span class="op" id="7412204">[</span><span class="op" id="7412205">]</span><span class="op" id="7412206">*</span><span class="ident" id="7412207"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><br>
<span class="lineno">285</span><span class="op" id="7412214">}</span><span class="op" id="7412215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7412222"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7412228">{</span><span class="string" id="7412229">&#34;Cookie&#34;</span><span class="op" id="7412237">:</span>&nbsp;<span class="op" id="7412239">{</span><span class="string" id="7412240">&#34;Cookie-1=v$1&#34;</span><span class="op" id="7412254">,</span>&nbsp;<span class="string" id="7412256">&#34;c2=v2&#34;</span><span class="op" id="7412263">}</span><span class="op" id="7412264">}</span><span class="op" id="7412265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7412269">&#34;&#34;</span><span class="op" id="7412271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412275">[</span><span class="op" id="7412276">]</span><span class="op" id="7412277">*</span><span class="ident" id="7412278"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7412284">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412289">{</span><span class="ident" id="7412290">Name</span><span class="op" id="7412294">:</span>&nbsp;<span class="string" id="7412296">&#34;Cookie-1&#34;</span><span class="op" id="7412306">,</span>&nbsp;<span class="ident" id="7412308">Value</span><span class="op" id="7412313">:</span>&nbsp;<span class="string" id="7412315">&#34;v$1&#34;</span><span class="op" id="7412320">}</span><span class="op" id="7412321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412326">{</span><span class="ident" id="7412327">Name</span><span class="op" id="7412331">:</span>&nbsp;<span class="string" id="7412333">&#34;c2&#34;</span><span class="op" id="7412337">,</span>&nbsp;<span class="ident" id="7412339">Value</span><span class="op" id="7412344">:</span>&nbsp;<span class="string" id="7412346">&#34;v2&#34;</span><span class="op" id="7412350">}</span><span class="op" id="7412351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412355">}</span><span class="op" id="7412356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412359">}</span><span class="op" id="7412360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412363">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7412367"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7412373">{</span><span class="string" id="7412374">&#34;Cookie&#34;</span><span class="op" id="7412382">:</span>&nbsp;<span class="op" id="7412384">{</span><span class="string" id="7412385">&#34;Cookie-1=v$1&#34;</span><span class="op" id="7412399">,</span>&nbsp;<span class="string" id="7412401">&#34;c2=v2&#34;</span><span class="op" id="7412408">}</span><span class="op" id="7412409">}</span><span class="op" id="7412410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7412414">&#34;c2&#34;</span><span class="op" id="7412418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412422">[</span><span class="op" id="7412423">]</span><span class="op" id="7412424">*</span><span class="ident" id="7412425"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7412431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412436">{</span><span class="ident" id="7412437">Name</span><span class="op" id="7412441">:</span>&nbsp;<span class="string" id="7412443">&#34;c2&#34;</span><span class="op" id="7412447">,</span>&nbsp;<span class="ident" id="7412449">Value</span><span class="op" id="7412454">:</span>&nbsp;<span class="string" id="7412456">&#34;v2&#34;</span><span class="op" id="7412460">}</span><span class="op" id="7412461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412465">}</span><span class="op" id="7412466">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412469">}</span><span class="op" id="7412470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7412477"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7412483">{</span><span class="string" id="7412484">&#34;Cookie&#34;</span><span class="op" id="7412492">:</span>&nbsp;<span class="op" id="7412494">{</span><span class="string" id="7412495">&#34;Cookie-1=v$1;&nbsp;c2=v2&#34;</span><span class="op" id="7412516">}</span><span class="op" id="7412517">}</span><span class="op" id="7412518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7412522">&#34;&#34;</span><span class="op" id="7412524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412528">[</span><span class="op" id="7412529">]</span><span class="op" id="7412530">*</span><span class="ident" id="7412531"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7412537">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412542">{</span><span class="ident" id="7412543">Name</span><span class="op" id="7412547">:</span>&nbsp;<span class="string" id="7412549">&#34;Cookie-1&#34;</span><span class="op" id="7412559">,</span>&nbsp;<span class="ident" id="7412561">Value</span><span class="op" id="7412566">:</span>&nbsp;<span class="string" id="7412568">&#34;v$1&#34;</span><span class="op" id="7412573">}</span><span class="op" id="7412574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412579">{</span><span class="ident" id="7412580">Name</span><span class="op" id="7412584">:</span>&nbsp;<span class="string" id="7412586">&#34;c2&#34;</span><span class="op" id="7412590">,</span>&nbsp;<span class="ident" id="7412592">Value</span><span class="op" id="7412597">:</span>&nbsp;<span class="string" id="7412599">&#34;v2&#34;</span><span class="op" id="7412603">}</span><span class="op" id="7412604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412608">}</span><span class="op" id="7412609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412612">}</span><span class="op" id="7412613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412616">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7412620"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7412626">{</span><span class="string" id="7412627">&#34;Cookie&#34;</span><span class="op" id="7412635">:</span>&nbsp;<span class="op" id="7412637">{</span><span class="string" id="7412638">&#34;Cookie-1=v$1;&nbsp;c2=v2&#34;</span><span class="op" id="7412659">}</span><span class="op" id="7412660">}</span><span class="op" id="7412661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7412665">&#34;c2&#34;</span><span class="op" id="7412669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412673">[</span><span class="op" id="7412674">]</span><span class="op" id="7412675">*</span><span class="ident" id="7412676"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7412682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412687">{</span><span class="ident" id="7412688">Name</span><span class="op" id="7412692">:</span>&nbsp;<span class="string" id="7412694">&#34;c2&#34;</span><span class="op" id="7412698">,</span>&nbsp;<span class="ident" id="7412700">Value</span><span class="op" id="7412705">:</span>&nbsp;<span class="string" id="7412707">&#34;v2&#34;</span><span class="op" id="7412711">}</span><span class="op" id="7412712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412716">}</span><span class="op" id="7412717">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412720">}</span><span class="op" id="7412721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7412728"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7412734">{</span><span class="string" id="7412735">&#34;Cookie&#34;</span><span class="op" id="7412743">:</span>&nbsp;<span class="op" id="7412745">{</span><span class="string" id="7412746">`Cookie-1=&#34;v$1&#34;;&nbsp;c2=&#34;v2&#34;`</span><span class="op" id="7412771">}</span><span class="op" id="7412772">}</span><span class="op" id="7412773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7412777">&#34;&#34;</span><span class="op" id="7412779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412783">[</span><span class="op" id="7412784">]</span><span class="op" id="7412785">*</span><span class="ident" id="7412786"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7412792">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412797">{</span><span class="ident" id="7412798">Name</span><span class="op" id="7412802">:</span>&nbsp;<span class="string" id="7412804">&#34;Cookie-1&#34;</span><span class="op" id="7412814">,</span>&nbsp;<span class="ident" id="7412816">Value</span><span class="op" id="7412821">:</span>&nbsp;<span class="string" id="7412823">&#34;v$1&#34;</span><span class="op" id="7412828">}</span><span class="op" id="7412829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412834">{</span><span class="ident" id="7412835">Name</span><span class="op" id="7412839">:</span>&nbsp;<span class="string" id="7412841">&#34;c2&#34;</span><span class="op" id="7412845">,</span>&nbsp;<span class="ident" id="7412847">Value</span><span class="op" id="7412852">:</span>&nbsp;<span class="string" id="7412854">&#34;v2&#34;</span><span class="op" id="7412858">}</span><span class="op" id="7412859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412863">}</span><span class="op" id="7412864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7412867">}</span><span class="op" id="7412868">,</span><br>
<span class="lineno"></span><span class="op" id="7412870">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="keyword" id="7412873">func</span>&nbsp;<span class="ident" id="7412878">TestReadCookies</span><span class="op" id="7412893">(</span><span class="ident" id="7412894">t</span>&nbsp;<span class="op" id="7412896">*</span><span class="ident" id="7412897"><a href="/net/http/cookie_test.go.html#7405227">testing</a></span><span class="op" id="7412904">.</span><span class="ident" id="7412905">T</span><span class="op" id="7412906">)</span>&nbsp;<span class="op" id="7412908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7412911">for</span>&nbsp;<span class="ident" id="7412915">i</span><span class="op" id="7412916">,</span>&nbsp;<span class="ident" id="7412918">tt</span>&nbsp;<span class="op" id="7412921">:=</span>&nbsp;<span class="keyword" id="7412924">range</span>&nbsp;<span class="ident" id="7412930"><a href="/net/http/cookie_test.go.html#7412133">readCookiesTests</a></span>&nbsp;<span class="op" id="7412947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7412951">for</span>&nbsp;<span class="ident" id="7412955">n</span>&nbsp;<span class="op" id="7412957">:=</span>&nbsp;<span class="num" id="7412960">0</span><span class="op" id="7412961">;</span>&nbsp;<span class="ident" id="7412963"><a href="/net/http/cookie_test.go.html#7412955">n</a></span>&nbsp;<span class="op" id="7412965">&lt;</span>&nbsp;<span class="num" id="7412967">2</span><span class="op" id="7412968">;</span>&nbsp;<span class="ident" id="7412970"><a href="/net/http/cookie_test.go.html#7412955">n</a></span><span class="op" id="7412971">++</span>&nbsp;<span class="op" id="7412974">{</span>&nbsp;<span class="comment" id="7412976">//&nbsp;to&nbsp;verify&nbsp;readCookies&nbsp;doesn&#39;t&nbsp;mutate&nbsp;its&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7413029">c</span>&nbsp;<span class="op" id="7413031">:=</span>&nbsp;<span class="ident" id="7413034"><a href="/net/http/cookie.go.html#3755403">readCookies</a></span><span class="op" id="7413045">(</span><span class="ident" id="7413046"><a href="/net/http/cookie_test.go.html#7412918">tt</a></span><span class="op" id="7413048">.</span><span class="ident" id="7413049">Header</span><span class="op" id="7413055">,</span>&nbsp;<span class="ident" id="7413057"><a href="/net/http/cookie_test.go.html#7412918">tt</a></span><span class="op" id="7413059">.</span><span class="ident" id="7413060">Filter</span><span class="op" id="7413066">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7413071">if</span>&nbsp;<span class="op" id="7413074">!</span><span class="ident" id="7413075"><a href="/net/http/cookie_test.go.html#7405205">reflect</a></span><span class="op" id="7413082">.</span><span class="ident" id="7413083">DeepEqual</span><span class="op" id="7413092">(</span><span class="ident" id="7413093"><a href="/net/http/cookie_test.go.html#7413029">c</a></span><span class="op" id="7413094">,</span>&nbsp;<span class="ident" id="7413096"><a href="/net/http/cookie_test.go.html#7412918">tt</a></span><span class="op" id="7413098">.</span><span class="ident" id="7413099">Cookies</span><span class="op" id="7413106">)</span>&nbsp;<span class="op" id="7413108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7413114"><a href="/net/http/cookie_test.go.html#7412894">t</a></span><span class="op" id="7413115">.</span><span class="ident" id="7413116">Errorf</span><span class="op" id="7413122">(</span><span class="string" id="7413123">&#34;#%d&nbsp;readCookies:\nhave:&nbsp;%s\nwant:&nbsp;%s\n&#34;</span><span class="op" id="7413163">,</span>&nbsp;<span class="ident" id="7413165"><a href="/net/http/cookie_test.go.html#7412915">i</a></span><span class="op" id="7413166">,</span>&nbsp;<span class="ident" id="7413168"><a href="/net/http/cookie_test.go.html#7411642">toJSON</a></span><span class="op" id="7413174">(</span><span class="ident" id="7413175"><a href="/net/http/cookie_test.go.html#7413029">c</a></span><span class="op" id="7413176">)</span><span class="op" id="7413177">,</span>&nbsp;<span class="ident" id="7413179"><a href="/net/http/cookie_test.go.html#7411642">toJSON</a></span><span class="op" id="7413185">(</span><span class="ident" id="7413186"><a href="/net/http/cookie_test.go.html#7412918">tt</a></span><span class="op" id="7413188">.</span><span class="ident" id="7413189">Cookies</span><span class="op" id="7413196">)</span><span class="op" id="7413197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7413203">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7413215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7413219">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7413222">}</span><br>
<span class="lineno"></span><span class="op" id="7413224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7413227">func</span>&nbsp;<span class="ident" id="7413232">TestSetCookieDoubleQuotes</span><span class="op" id="7413257">(</span><span class="ident" id="7413258">t</span>&nbsp;<span class="op" id="7413260">*</span><span class="ident" id="7413261"><a href="/net/http/cookie_test.go.html#7405227">testing</a></span><span class="op" id="7413268">.</span><span class="ident" id="7413269">T</span><span class="op" id="7413270">)</span>&nbsp;<span class="op" id="7413272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7413275">res</span>&nbsp;<span class="op" id="7413279">:=</span>&nbsp;<span class="op" id="7413282">&amp;</span><span class="ident" id="7413283"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7413291">{</span><span class="ident" id="7413292">Header</span><span class="op" id="7413298">:</span>&nbsp;<span class="ident" id="7413300"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7413306">{</span><span class="op" id="7413307">}</span><span class="op" id="7413308">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7413311"><a href="/net/http/cookie_test.go.html#7413275">res</a></span><span class="op" id="7413314">.</span><span class="ident" id="7413315">Header</span><span class="op" id="7413321">.</span><span class="ident" id="7413322">Add</span><span class="op" id="7413325">(</span><span class="string" id="7413326">&#34;Set-Cookie&#34;</span><span class="op" id="7413338">,</span>&nbsp;<span class="string" id="7413340">`quoted0=none;&nbsp;max-age=30`</span><span class="op" id="7413366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7413369"><a href="/net/http/cookie_test.go.html#7413275">res</a></span><span class="op" id="7413372">.</span><span class="ident" id="7413373">Header</span><span class="op" id="7413379">.</span><span class="ident" id="7413380">Add</span><span class="op" id="7413383">(</span><span class="string" id="7413384">&#34;Set-Cookie&#34;</span><span class="op" id="7413396">,</span>&nbsp;<span class="string" id="7413398">`quoted1=&#34;cookieValue&#34;;&nbsp;max-age=31`</span><span class="op" id="7413433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7413436"><a href="/net/http/cookie_test.go.html#7413275">res</a></span><span class="op" id="7413439">.</span><span class="ident" id="7413440">Header</span><span class="op" id="7413446">.</span><span class="ident" id="7413447">Add</span><span class="op" id="7413450">(</span><span class="string" id="7413451">&#34;Set-Cookie&#34;</span><span class="op" id="7413463">,</span>&nbsp;<span class="string" id="7413465">`quoted2=cookieAV;&nbsp;max-age=&#34;32&#34;`</span><span class="op" id="7413497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7413500"><a href="/net/http/cookie_test.go.html#7413275">res</a></span><span class="op" id="7413503">.</span><span class="ident" id="7413504">Header</span><span class="op" id="7413510">.</span><span class="ident" id="7413511">Add</span><span class="op" id="7413514">(</span><span class="string" id="7413515">&#34;Set-Cookie&#34;</span><span class="op" id="7413527">,</span>&nbsp;<span class="string" id="7413529">`quoted3=&#34;both&#34;;&nbsp;max-age=&#34;33&#34;`</span><span class="op" id="7413559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7413562">got</span>&nbsp;<span class="op" id="7413566">:=</span>&nbsp;<span class="ident" id="7413569"><a href="/net/http/cookie_test.go.html#7413275">res</a></span><span class="op" id="7413572">.</span><span class="ident" id="7413573">Cookies</span><span class="op" id="7413580">(</span><span class="op" id="7413581">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7413584">want</span>&nbsp;<span class="op" id="7413589">:=</span>&nbsp;<span class="op" id="7413592">[</span><span class="op" id="7413593">]</span><span class="op" id="7413594">*</span><span class="ident" id="7413595"><a href="/net/http/cookie.go.html#3751461">Cookie</a></span><span class="op" id="7413601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7413605">{</span><span class="ident" id="7413606">Name</span><span class="op" id="7413610">:</span>&nbsp;<span class="string" id="7413612">&#34;quoted0&#34;</span><span class="op" id="7413621">,</span>&nbsp;<span class="ident" id="7413623">Value</span><span class="op" id="7413628">:</span>&nbsp;<span class="string" id="7413630">&#34;none&#34;</span><span class="op" id="7413636">,</span>&nbsp;<span class="ident" id="7413638">MaxAge</span><span class="op" id="7413644">:</span>&nbsp;<span class="num" id="7413646">30</span><span class="op" id="7413648">}</span><span class="op" id="7413649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7413653">{</span><span class="ident" id="7413654">Name</span><span class="op" id="7413658">:</span>&nbsp;<span class="string" id="7413660">&#34;quoted1&#34;</span><span class="op" id="7413669">,</span>&nbsp;<span class="ident" id="7413671">Value</span><span class="op" id="7413676">:</span>&nbsp;<span class="string" id="7413678">&#34;cookieValue&#34;</span><span class="op" id="7413691">,</span>&nbsp;<span class="ident" id="7413693">MaxAge</span><span class="op" id="7413699">:</span>&nbsp;<span class="num" id="7413701">31</span><span class="op" id="7413703">}</span><span class="op" id="7413704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7413708">{</span><span class="ident" id="7413709">Name</span><span class="op" id="7413713">:</span>&nbsp;<span class="string" id="7413715">&#34;quoted2&#34;</span><span class="op" id="7413724">,</span>&nbsp;<span class="ident" id="7413726">Value</span><span class="op" id="7413731">:</span>&nbsp;<span class="string" id="7413733">&#34;cookieAV&#34;</span><span class="op" id="7413743">}</span><span class="op" id="7413744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7413748">{</span><span class="ident" id="7413749">Name</span><span class="op" id="7413753">:</span>&nbsp;<span class="string" id="7413755">&#34;quoted3&#34;</span><span class="op" id="7413764">,</span>&nbsp;<span class="ident" id="7413766">Value</span><span class="op" id="7413771">:</span>&nbsp;<span class="string" id="7413773">&#34;both&#34;</span><span class="op" id="7413779">}</span><span class="op" id="7413780">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7413783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7413786">if</span>&nbsp;<span class="builtinfunc" id="7413789">len</span><span class="op" id="7413792">(</span><span class="ident" id="7413793"><a href="/net/http/cookie_test.go.html#7413562">got</a></span><span class="op" id="7413796">)</span>&nbsp;<span class="op" id="7413798">!=</span>&nbsp;<span class="builtinfunc" id="7413801">len</span><span class="op" id="7413804">(</span><span class="ident" id="7413805"><a href="/net/http/cookie_test.go.html#7413584">want</a></span><span class="op" id="7413809">)</span>&nbsp;<span class="op" id="7413811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7413815"><a href="/net/http/cookie_test.go.html#7413258">t</a></span><span class="op" id="7413816">.</span><span class="ident" id="7413817">Fatal</span><span class="op" id="7413822">(</span><span class="string" id="7413823">&#34;got&nbsp;%d&nbsp;cookies,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7413848">,</span>&nbsp;<span class="builtinfunc" id="7413850">len</span><span class="op" id="7413853">(</span><span class="ident" id="7413854"><a href="/net/http/cookie_test.go.html#7413562">got</a></span><span class="op" id="7413857">)</span><span class="op" id="7413858">,</span>&nbsp;<span class="builtinfunc" id="7413860">len</span><span class="op" id="7413863">(</span><span class="ident" id="7413864"><a href="/net/http/cookie_test.go.html#7413584">want</a></span><span class="op" id="7413868">)</span><span class="op" id="7413869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7413872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7413875">for</span>&nbsp;<span class="ident" id="7413879">i</span><span class="op" id="7413880">,</span>&nbsp;<span class="ident" id="7413882">w</span>&nbsp;<span class="op" id="7413884">:=</span>&nbsp;<span class="keyword" id="7413887">range</span>&nbsp;<span class="ident" id="7413893"><a href="/net/http/cookie_test.go.html#7413584">want</a></span>&nbsp;<span class="op" id="7413898">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7413902">g</span>&nbsp;<span class="op" id="7413904">:=</span>&nbsp;<span class="ident" id="7413907"><a href="/net/http/cookie_test.go.html#7413562">got</a></span><span class="op" id="7413910">[</span><span class="ident" id="7413911"><a href="/net/http/cookie_test.go.html#7413879">i</a></span><span class="op" id="7413912">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7413916">if</span>&nbsp;<span class="ident" id="7413919"><a href="/net/http/cookie_test.go.html#7413902">g</a></span><span class="op" id="7413920">.</span><span class="ident" id="7413921">Name</span>&nbsp;<span class="op" id="7413926">!=</span>&nbsp;<span class="ident" id="7413929"><a href="/net/http/cookie_test.go.html#7413882">w</a></span><span class="op" id="7413930">.</span><span class="ident" id="7413931">Name</span>&nbsp;<span class="op" id="7413936">||</span>&nbsp;<span class="ident" id="7413939"><a href="/net/http/cookie_test.go.html#7413902">g</a></span><span class="op" id="7413940">.</span><span class="ident" id="7413941">Value</span>&nbsp;<span class="op" id="7413947">!=</span>&nbsp;<span class="ident" id="7413950"><a href="/net/http/cookie_test.go.html#7413882">w</a></span><span class="op" id="7413951">.</span><span class="ident" id="7413952">Value</span>&nbsp;<span class="op" id="7413958">||</span>&nbsp;<span class="ident" id="7413961"><a href="/net/http/cookie_test.go.html#7413902">g</a></span><span class="op" id="7413962">.</span><span class="ident" id="7413963">MaxAge</span>&nbsp;<span class="op" id="7413970">!=</span>&nbsp;<span class="ident" id="7413973"><a href="/net/http/cookie_test.go.html#7413882">w</a></span><span class="op" id="7413974">.</span><span class="ident" id="7413975">MaxAge</span>&nbsp;<span class="op" id="7413982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7413987"><a href="/net/http/cookie_test.go.html#7413258">t</a></span><span class="op" id="7413988">.</span><span class="ident" id="7413989">Errorf</span><span class="op" id="7413995">(</span><span class="string" id="7413996">&#34;cookie&nbsp;#%d:\ngot&nbsp;&nbsp;%v\nwant&nbsp;%v&#34;</span><span class="op" id="7414027">,</span>&nbsp;<span class="ident" id="7414029"><a href="/net/http/cookie_test.go.html#7413879">i</a></span><span class="op" id="7414030">,</span>&nbsp;<span class="ident" id="7414032"><a href="/net/http/cookie_test.go.html#7413902">g</a></span><span class="op" id="7414033">,</span>&nbsp;<span class="ident" id="7414035"><a href="/net/http/cookie_test.go.html#7413882">w</a></span><span class="op" id="7414036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414043">}</span><br>
<span class="lineno">360</span><span class="op" id="7414045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7414048">func</span>&nbsp;<span class="ident" id="7414053">TestCookieSanitizeValue</span><span class="op" id="7414076">(</span><span class="ident" id="7414077">t</span>&nbsp;<span class="op" id="7414079">*</span><span class="ident" id="7414080"><a href="/net/http/cookie_test.go.html#7405227">testing</a></span><span class="op" id="7414087">.</span><span class="ident" id="7414088">T</span><span class="op" id="7414089">)</span>&nbsp;<span class="op" id="7414091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7414094">defer</span>&nbsp;<span class="ident" id="7414100"><a href="/net/http/cookie_test.go.html#7405192">log</a></span><span class="op" id="7414103">.</span><span class="ident" id="7414104">SetOutput</span><span class="op" id="7414113">(</span><span class="ident" id="7414114"><a href="/net/http/cookie_test.go.html#7405199">os</a></span><span class="op" id="7414116">.</span><span class="ident" id="7414117">Stderr</span><span class="op" id="7414123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7414126">var</span>&nbsp;<span class="ident" id="7414130">logbuf</span>&nbsp;<span class="ident" id="7414137"><a href="/net/http/cookie_test.go.html#7405159">bytes</a></span><span class="op" id="7414142">.</span><span class="ident" id="7414143">Buffer</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7414151"><a href="/net/http/cookie_test.go.html#7405192">log</a></span><span class="op" id="7414154">.</span><span class="ident" id="7414155">SetOutput</span><span class="op" id="7414164">(</span><span class="op" id="7414165">&amp;</span><span class="ident" id="7414166"><a href="/net/http/cookie_test.go.html#7414130">logbuf</a></span><span class="op" id="7414172">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7414176">tests</span>&nbsp;<span class="op" id="7414182">:=</span>&nbsp;<span class="op" id="7414185">[</span><span class="op" id="7414186">]</span><span class="keyword" id="7414187">struct</span>&nbsp;<span class="op" id="7414194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7414198">in</span><span class="op" id="7414200">,</span>&nbsp;<span class="ident" id="7414202">want</span>&nbsp;<span class="builtintype" id="7414207">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414215">}</span><span class="op" id="7414216">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414220">{</span><span class="string" id="7414221">&#34;foo&#34;</span><span class="op" id="7414226">,</span>&nbsp;<span class="string" id="7414228">&#34;foo&#34;</span><span class="op" id="7414233">}</span><span class="op" id="7414234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414238">{</span><span class="string" id="7414239">&#34;foo;bar&#34;</span><span class="op" id="7414248">,</span>&nbsp;<span class="string" id="7414250">&#34;foobar&#34;</span><span class="op" id="7414258">}</span><span class="op" id="7414259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414263">{</span><span class="string" id="7414264">&#34;foo\\bar&#34;</span><span class="op" id="7414274">,</span>&nbsp;<span class="string" id="7414276">&#34;foobar&#34;</span><span class="op" id="7414284">}</span><span class="op" id="7414285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414289">{</span><span class="string" id="7414290">&#34;foo\&#34;bar&#34;</span><span class="op" id="7414300">,</span>&nbsp;<span class="string" id="7414302">&#34;foobar&#34;</span><span class="op" id="7414310">}</span><span class="op" id="7414311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414315">{</span><span class="string" id="7414316">&#34;\x00\x7e\x7f\x80&#34;</span><span class="op" id="7414334">,</span>&nbsp;<span class="string" id="7414336">&#34;\x7e&#34;</span><span class="op" id="7414342">}</span><span class="op" id="7414343">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414347">{</span><span class="string" id="7414348">`&#34;withquotes&#34;`</span><span class="op" id="7414362">,</span>&nbsp;<span class="string" id="7414364">&#34;withquotes&#34;</span><span class="op" id="7414376">}</span><span class="op" id="7414377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414381">{</span><span class="string" id="7414382">&#34;a&nbsp;z&#34;</span><span class="op" id="7414387">,</span>&nbsp;<span class="string" id="7414389">&#34;a&nbsp;z&#34;</span><span class="op" id="7414394">}</span><span class="op" id="7414395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414399">{</span><span class="string" id="7414400">&#34;&nbsp;z&#34;</span><span class="op" id="7414404">,</span>&nbsp;<span class="string" id="7414406">`&#34;&nbsp;z&#34;`</span><span class="op" id="7414412">}</span><span class="op" id="7414413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414417">{</span><span class="string" id="7414418">&#34;a&nbsp;&#34;</span><span class="op" id="7414422">,</span>&nbsp;<span class="string" id="7414424">`&#34;a&nbsp;&#34;`</span><span class="op" id="7414430">}</span><span class="op" id="7414431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414434">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7414437">for</span>&nbsp;<span class="ident" id="7414441">_</span><span class="op" id="7414442">,</span>&nbsp;<span class="ident" id="7414444">tt</span>&nbsp;<span class="op" id="7414447">:=</span>&nbsp;<span class="keyword" id="7414450">range</span>&nbsp;<span class="ident" id="7414456"><a href="/net/http/cookie_test.go.html#7414176">tests</a></span>&nbsp;<span class="op" id="7414462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7414466">if</span>&nbsp;<span class="ident" id="7414469">got</span>&nbsp;<span class="op" id="7414473">:=</span>&nbsp;<span class="ident" id="7414476"><a href="/net/http/cookie.go.html#3758319">sanitizeCookieValue</a></span><span class="op" id="7414495">(</span><span class="ident" id="7414496"><a href="/net/http/cookie_test.go.html#7414444">tt</a></span><span class="op" id="7414498">.</span><span class="ident" id="7414499">in</span><span class="op" id="7414501">)</span><span class="op" id="7414502">;</span>&nbsp;<span class="ident" id="7414504"><a href="/net/http/cookie_test.go.html#7414469">got</a></span>&nbsp;<span class="op" id="7414508">!=</span>&nbsp;<span class="ident" id="7414511"><a href="/net/http/cookie_test.go.html#7414444">tt</a></span><span class="op" id="7414513">.</span><span class="ident" id="7414514">want</span>&nbsp;<span class="op" id="7414519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7414524"><a href="/net/http/cookie_test.go.html#7414077">t</a></span><span class="op" id="7414525">.</span><span class="ident" id="7414526">Errorf</span><span class="op" id="7414532">(</span><span class="string" id="7414533">&#34;sanitizeCookieValue(%q)&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7414572">,</span>&nbsp;<span class="ident" id="7414574"><a href="/net/http/cookie_test.go.html#7414444">tt</a></span><span class="op" id="7414576">.</span><span class="ident" id="7414577">in</span><span class="op" id="7414579">,</span>&nbsp;<span class="ident" id="7414581"><a href="/net/http/cookie_test.go.html#7414469">got</a></span><span class="op" id="7414584">,</span>&nbsp;<span class="ident" id="7414586"><a href="/net/http/cookie_test.go.html#7414444">tt</a></span><span class="op" id="7414588">.</span><span class="ident" id="7414589">want</span><span class="op" id="7414593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414600">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7414604">if</span>&nbsp;<span class="ident" id="7414607">got</span><span class="op" id="7414610">,</span>&nbsp;<span class="ident" id="7414612">sub</span>&nbsp;<span class="op" id="7414616">:=</span>&nbsp;<span class="ident" id="7414619"><a href="/net/http/cookie_test.go.html#7414130">logbuf</a></span><span class="op" id="7414625">.</span><span class="ident" id="7414626">String</span><span class="op" id="7414632">(</span><span class="op" id="7414633">)</span><span class="op" id="7414634">,</span>&nbsp;<span class="string" id="7414636">&#34;dropping&nbsp;invalid&nbsp;bytes&#34;</span><span class="op" id="7414660">;</span>&nbsp;<span class="op" id="7414662">!</span><span class="ident" id="7414663"><a href="/net/http/cookie_test.go.html#7405216">strings</a></span><span class="op" id="7414670">.</span><span class="ident" id="7414671">Contains</span><span class="op" id="7414679">(</span><span class="ident" id="7414680"><a href="/net/http/cookie_test.go.html#7414607">got</a></span><span class="op" id="7414683">,</span>&nbsp;<span class="ident" id="7414685"><a href="/net/http/cookie_test.go.html#7414612">sub</a></span><span class="op" id="7414688">)</span>&nbsp;<span class="op" id="7414690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7414694"><a href="/net/http/cookie_test.go.html#7414077">t</a></span><span class="op" id="7414695">.</span><span class="ident" id="7414696">Errorf</span><span class="op" id="7414702">(</span><span class="string" id="7414703">&#34;Expected&nbsp;substring&nbsp;%q&nbsp;in&nbsp;log&nbsp;output.&nbsp;Got:\n%s&#34;</span><span class="op" id="7414750">,</span>&nbsp;<span class="ident" id="7414752"><a href="/net/http/cookie_test.go.html#7414612">sub</a></span><span class="op" id="7414755">,</span>&nbsp;<span class="ident" id="7414757"><a href="/net/http/cookie_test.go.html#7414607">got</a></span><span class="op" id="7414760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414763">}</span><br>
<span class="lineno"></span><span class="op" id="7414765">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="7414768">func</span>&nbsp;<span class="ident" id="7414773">TestCookieSanitizePath</span><span class="op" id="7414795">(</span><span class="ident" id="7414796">t</span>&nbsp;<span class="op" id="7414798">*</span><span class="ident" id="7414799"><a href="/net/http/cookie_test.go.html#7405227">testing</a></span><span class="op" id="7414806">.</span><span class="ident" id="7414807">T</span><span class="op" id="7414808">)</span>&nbsp;<span class="op" id="7414810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7414813">defer</span>&nbsp;<span class="ident" id="7414819"><a href="/net/http/cookie_test.go.html#7405192">log</a></span><span class="op" id="7414822">.</span><span class="ident" id="7414823">SetOutput</span><span class="op" id="7414832">(</span><span class="ident" id="7414833"><a href="/net/http/cookie_test.go.html#7405199">os</a></span><span class="op" id="7414835">.</span><span class="ident" id="7414836">Stderr</span><span class="op" id="7414842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7414845">var</span>&nbsp;<span class="ident" id="7414849">logbuf</span>&nbsp;<span class="ident" id="7414856"><a href="/net/http/cookie_test.go.html#7405159">bytes</a></span><span class="op" id="7414861">.</span><span class="ident" id="7414862">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7414870"><a href="/net/http/cookie_test.go.html#7405192">log</a></span><span class="op" id="7414873">.</span><span class="ident" id="7414874">SetOutput</span><span class="op" id="7414883">(</span><span class="op" id="7414884">&amp;</span><span class="ident" id="7414885"><a href="/net/http/cookie_test.go.html#7414849">logbuf</a></span><span class="op" id="7414891">)</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7414895">tests</span>&nbsp;<span class="op" id="7414901">:=</span>&nbsp;<span class="op" id="7414904">[</span><span class="op" id="7414905">]</span><span class="keyword" id="7414906">struct</span>&nbsp;<span class="op" id="7414913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7414917">in</span><span class="op" id="7414919">,</span>&nbsp;<span class="ident" id="7414921">want</span>&nbsp;<span class="builtintype" id="7414926">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414934">}</span><span class="op" id="7414935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414939">{</span><span class="string" id="7414940">&#34;/path&#34;</span><span class="op" id="7414947">,</span>&nbsp;<span class="string" id="7414949">&#34;/path&#34;</span><span class="op" id="7414956">}</span><span class="op" id="7414957">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7414961">{</span><span class="string" id="7414962">&#34;/path&nbsp;with&nbsp;space/&#34;</span><span class="op" id="7414981">,</span>&nbsp;<span class="string" id="7414983">&#34;/path&nbsp;with&nbsp;space/&#34;</span><span class="op" id="7415002">}</span><span class="op" id="7415003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7415007">{</span><span class="string" id="7415008">&#34;/just;no;semicolon\x00orstuff/&#34;</span><span class="op" id="7415040">,</span>&nbsp;<span class="string" id="7415042">&#34;/justnosemicolonorstuff/&#34;</span><span class="op" id="7415068">}</span><span class="op" id="7415069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7415072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7415075">for</span>&nbsp;<span class="ident" id="7415079">_</span><span class="op" id="7415080">,</span>&nbsp;<span class="ident" id="7415082">tt</span>&nbsp;<span class="op" id="7415085">:=</span>&nbsp;<span class="keyword" id="7415088">range</span>&nbsp;<span class="ident" id="7415094"><a href="/net/http/cookie_test.go.html#7414895">tests</a></span>&nbsp;<span class="op" id="7415100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7415104">if</span>&nbsp;<span class="ident" id="7415107">got</span>&nbsp;<span class="op" id="7415111">:=</span>&nbsp;<span class="ident" id="7415114"><a href="/net/http/cookie.go.html#3758778">sanitizeCookiePath</a></span><span class="op" id="7415132">(</span><span class="ident" id="7415133"><a href="/net/http/cookie_test.go.html#7415082">tt</a></span><span class="op" id="7415135">.</span><span class="ident" id="7415136">in</span><span class="op" id="7415138">)</span><span class="op" id="7415139">;</span>&nbsp;<span class="ident" id="7415141"><a href="/net/http/cookie_test.go.html#7415107">got</a></span>&nbsp;<span class="op" id="7415145">!=</span>&nbsp;<span class="ident" id="7415148"><a href="/net/http/cookie_test.go.html#7415082">tt</a></span><span class="op" id="7415150">.</span><span class="ident" id="7415151">want</span>&nbsp;<span class="op" id="7415156">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7415161"><a href="/net/http/cookie_test.go.html#7414796">t</a></span><span class="op" id="7415162">.</span><span class="ident" id="7415163">Errorf</span><span class="op" id="7415169">(</span><span class="string" id="7415170">&#34;sanitizeCookiePath(%q)&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7415208">,</span>&nbsp;<span class="ident" id="7415210"><a href="/net/http/cookie_test.go.html#7415082">tt</a></span><span class="op" id="7415212">.</span><span class="ident" id="7415213">in</span><span class="op" id="7415215">,</span>&nbsp;<span class="ident" id="7415217"><a href="/net/http/cookie_test.go.html#7415107">got</a></span><span class="op" id="7415220">,</span>&nbsp;<span class="ident" id="7415222"><a href="/net/http/cookie_test.go.html#7415082">tt</a></span><span class="op" id="7415224">.</span><span class="ident" id="7415225">want</span><span class="op" id="7415229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7415233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7415236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7415240">if</span>&nbsp;<span class="ident" id="7415243">got</span><span class="op" id="7415246">,</span>&nbsp;<span class="ident" id="7415248">sub</span>&nbsp;<span class="op" id="7415252">:=</span>&nbsp;<span class="ident" id="7415255"><a href="/net/http/cookie_test.go.html#7414849">logbuf</a></span><span class="op" id="7415261">.</span><span class="ident" id="7415262">String</span><span class="op" id="7415268">(</span><span class="op" id="7415269">)</span><span class="op" id="7415270">,</span>&nbsp;<span class="string" id="7415272">&#34;dropping&nbsp;invalid&nbsp;bytes&#34;</span><span class="op" id="7415296">;</span>&nbsp;<span class="op" id="7415298">!</span><span class="ident" id="7415299"><a href="/net/http/cookie_test.go.html#7405216">strings</a></span><span class="op" id="7415306">.</span><span class="ident" id="7415307">Contains</span><span class="op" id="7415315">(</span><span class="ident" id="7415316"><a href="/net/http/cookie_test.go.html#7415243">got</a></span><span class="op" id="7415319">,</span>&nbsp;<span class="ident" id="7415321"><a href="/net/http/cookie_test.go.html#7415248">sub</a></span><span class="op" id="7415324">)</span>&nbsp;<span class="op" id="7415326">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7415330"><a href="/net/http/cookie_test.go.html#7414796">t</a></span><span class="op" id="7415331">.</span><span class="ident" id="7415332">Errorf</span><span class="op" id="7415338">(</span><span class="string" id="7415339">&#34;Expected&nbsp;substring&nbsp;%q&nbsp;in&nbsp;log&nbsp;output.&nbsp;Got:\n%s&#34;</span><span class="op" id="7415386">,</span>&nbsp;<span class="ident" id="7415388"><a href="/net/http/cookie_test.go.html#7415248">sub</a></span><span class="op" id="7415391">,</span>&nbsp;<span class="ident" id="7415393"><a href="/net/http/cookie_test.go.html#7415243">got</a></span><span class="op" id="7415396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7415399">}</span><br>
<span class="lineno"></span><span class="op" id="7415401">}</span>
</div>
</body>
</html>
