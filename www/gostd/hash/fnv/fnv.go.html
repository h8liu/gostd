<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/fnv</h2>
<ul>
<li><a href="/gostd/hash/fnv/fnv.go.html">fnv.go</a></li>
<li><a href="/gostd/hash/fnv/fnv_test.go.html">fnv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6042405">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6042460">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6042514">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6042565">//&nbsp;Package&nbsp;fnv&nbsp;implements&nbsp;FNV-1&nbsp;and&nbsp;FNV-1a,&nbsp;non-cryptographic&nbsp;hash&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="6042642">//&nbsp;created&nbsp;by&nbsp;Glenn&nbsp;Fowler,&nbsp;Landon&nbsp;Curt&nbsp;Noll,&nbsp;and&nbsp;Phong&nbsp;Vo.</span><br>
<span class="lineno"></span><span class="comment" id="6042702">//&nbsp;See</span><br>
<span class="lineno"></span><span class="comment" id="6042709">//&nbsp;http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function.</span><br>
<span class="lineno"></span><span class="keyword" id="6042787">package</span>&nbsp;<span class="ident" id="6042795">fnv</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6042800">import</span>&nbsp;<span class="op" id="6042807">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6042810">&#34;hash&#34;</span><br>
<span class="lineno"></span><span class="op" id="6042817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6042820">type</span>&nbsp;<span class="op" id="6042825">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042828">sum32</span>&nbsp;&nbsp;<span class="builtintype" id="6042835">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042843">sum32a</span>&nbsp;<span class="builtintype" id="6042850">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042858">sum64</span>&nbsp;&nbsp;<span class="ident" id="6042865">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042873">sum64a</span>&nbsp;<span class="ident" id="6042880">uint64</span><br>
<span class="lineno">20</span><span class="op" id="6042887">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6042890">const</span>&nbsp;<span class="op" id="6042896">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042899">offset32</span>&nbsp;<span class="op" id="6042908">=</span>&nbsp;<span class="num" id="6042910">2166136261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042922">offset64</span>&nbsp;<span class="op" id="6042931">=</span>&nbsp;<span class="num" id="6042933">14695981039346656037</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042955">prime32</span>&nbsp;&nbsp;<span class="op" id="6042964">=</span>&nbsp;<span class="num" id="6042966">16777619</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042976">prime64</span>&nbsp;&nbsp;<span class="op" id="6042985">=</span>&nbsp;<span class="num" id="6042987">1099511628211</span><br>
<span class="lineno"></span><span class="op" id="6043001">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6043004">//&nbsp;New32&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno">30</span><span class="keyword" id="6043051">func</span>&nbsp;<span class="ident" id="6043056">New32</span><span class="op" id="6043061">(</span><span class="op" id="6043062">)</span>&nbsp;<span class="ident" id="6043064">hash</span><span class="op" id="6043068">.</span><span class="ident" id="6043069">Hash32</span>&nbsp;<span class="op" id="6043076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043079">var</span>&nbsp;<span class="ident" id="6043083">s</span>&nbsp;<span class="ident" id="6043085">sum32</span>&nbsp;<span class="op" id="6043091">=</span>&nbsp;<span class="ident" id="6043093">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043103">return</span>&nbsp;<span class="op" id="6043110">&amp;</span><span class="ident" id="6043111">s</span><br>
<span class="lineno"></span><span class="op" id="6043113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="6043116">//&nbsp;New32a&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="6043165">func</span>&nbsp;<span class="ident" id="6043170">New32a</span><span class="op" id="6043176">(</span><span class="op" id="6043177">)</span>&nbsp;<span class="ident" id="6043179">hash</span><span class="op" id="6043183">.</span><span class="ident" id="6043184">Hash32</span>&nbsp;<span class="op" id="6043191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043194">var</span>&nbsp;<span class="ident" id="6043198">s</span>&nbsp;<span class="ident" id="6043200">sum32a</span>&nbsp;<span class="op" id="6043207">=</span>&nbsp;<span class="ident" id="6043209">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043219">return</span>&nbsp;<span class="op" id="6043226">&amp;</span><span class="ident" id="6043227">s</span><br>
<span class="lineno"></span><span class="op" id="6043229">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="6043232">//&nbsp;New64&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="6043279">func</span>&nbsp;<span class="ident" id="6043284">New64</span><span class="op" id="6043289">(</span><span class="op" id="6043290">)</span>&nbsp;<span class="ident" id="6043292">hash</span><span class="op" id="6043296">.</span><span class="ident" id="6043297">Hash64</span>&nbsp;<span class="op" id="6043304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043307">var</span>&nbsp;<span class="ident" id="6043311">s</span>&nbsp;<span class="ident" id="6043313">sum64</span>&nbsp;<span class="op" id="6043319">=</span>&nbsp;<span class="ident" id="6043321">offset64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043331">return</span>&nbsp;<span class="op" id="6043338">&amp;</span><span class="ident" id="6043339">s</span><br>
<span class="lineno">45</span><span class="op" id="6043341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6043344">//&nbsp;New64a&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="6043393">func</span>&nbsp;<span class="ident" id="6043398">New64a</span><span class="op" id="6043404">(</span><span class="op" id="6043405">)</span>&nbsp;<span class="ident" id="6043407">hash</span><span class="op" id="6043411">.</span><span class="ident" id="6043412">Hash64</span>&nbsp;<span class="op" id="6043419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043422">var</span>&nbsp;<span class="ident" id="6043426">s</span>&nbsp;<span class="ident" id="6043428">sum64a</span>&nbsp;<span class="op" id="6043435">=</span>&nbsp;<span class="ident" id="6043437">offset64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043447">return</span>&nbsp;<span class="op" id="6043454">&amp;</span><span class="ident" id="6043455">s</span><br>
<span class="lineno"></span><span class="op" id="6043457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6043460">func</span>&nbsp;<span class="op" id="6043465">(</span><span class="ident" id="6043466">s</span>&nbsp;<span class="op" id="6043468">*</span><span class="ident" id="6043469">sum32</span><span class="op" id="6043474">)</span>&nbsp;<span class="ident" id="6043476">Reset</span><span class="op" id="6043481">(</span><span class="op" id="6043482">)</span>&nbsp;&nbsp;<span class="op" id="6043485">{</span>&nbsp;<span class="op" id="6043487">*</span><span class="ident" id="6043488">s</span>&nbsp;<span class="op" id="6043490">=</span>&nbsp;<span class="ident" id="6043492">offset32</span>&nbsp;<span class="op" id="6043501">}</span><br>
<span class="lineno"></span><span class="keyword" id="6043503">func</span>&nbsp;<span class="op" id="6043508">(</span><span class="ident" id="6043509">s</span>&nbsp;<span class="op" id="6043511">*</span><span class="ident" id="6043512">sum32a</span><span class="op" id="6043518">)</span>&nbsp;<span class="ident" id="6043520">Reset</span><span class="op" id="6043525">(</span><span class="op" id="6043526">)</span>&nbsp;<span class="op" id="6043528">{</span>&nbsp;<span class="op" id="6043530">*</span><span class="ident" id="6043531">s</span>&nbsp;<span class="op" id="6043533">=</span>&nbsp;<span class="ident" id="6043535">offset32</span>&nbsp;<span class="op" id="6043544">}</span><br>
<span class="lineno">55</span><span class="keyword" id="6043546">func</span>&nbsp;<span class="op" id="6043551">(</span><span class="ident" id="6043552">s</span>&nbsp;<span class="op" id="6043554">*</span><span class="ident" id="6043555">sum64</span><span class="op" id="6043560">)</span>&nbsp;<span class="ident" id="6043562">Reset</span><span class="op" id="6043567">(</span><span class="op" id="6043568">)</span>&nbsp;&nbsp;<span class="op" id="6043571">{</span>&nbsp;<span class="op" id="6043573">*</span><span class="ident" id="6043574">s</span>&nbsp;<span class="op" id="6043576">=</span>&nbsp;<span class="ident" id="6043578">offset64</span>&nbsp;<span class="op" id="6043587">}</span><br>
<span class="lineno"></span><span class="keyword" id="6043589">func</span>&nbsp;<span class="op" id="6043594">(</span><span class="ident" id="6043595">s</span>&nbsp;<span class="op" id="6043597">*</span><span class="ident" id="6043598">sum64a</span><span class="op" id="6043604">)</span>&nbsp;<span class="ident" id="6043606">Reset</span><span class="op" id="6043611">(</span><span class="op" id="6043612">)</span>&nbsp;<span class="op" id="6043614">{</span>&nbsp;<span class="op" id="6043616">*</span><span class="ident" id="6043617">s</span>&nbsp;<span class="op" id="6043619">=</span>&nbsp;<span class="ident" id="6043621">offset64</span>&nbsp;<span class="op" id="6043630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6043633">func</span>&nbsp;<span class="op" id="6043638">(</span><span class="ident" id="6043639">s</span>&nbsp;<span class="op" id="6043641">*</span><span class="ident" id="6043642">sum32</span><span class="op" id="6043647">)</span>&nbsp;<span class="ident" id="6043649">Sum32</span><span class="op" id="6043654">(</span><span class="op" id="6043655">)</span>&nbsp;<span class="builtintype" id="6043657">uint32</span>&nbsp;&nbsp;<span class="op" id="6043665">{</span>&nbsp;<span class="keyword" id="6043667">return</span>&nbsp;<span class="builtintype" id="6043674">uint32</span><span class="op" id="6043680">(</span><span class="op" id="6043681">*</span><span class="ident" id="6043682">s</span><span class="op" id="6043683">)</span>&nbsp;<span class="op" id="6043685">}</span><br>
<span class="lineno"></span><span class="keyword" id="6043687">func</span>&nbsp;<span class="op" id="6043692">(</span><span class="ident" id="6043693">s</span>&nbsp;<span class="op" id="6043695">*</span><span class="ident" id="6043696">sum32a</span><span class="op" id="6043702">)</span>&nbsp;<span class="ident" id="6043704">Sum32</span><span class="op" id="6043709">(</span><span class="op" id="6043710">)</span>&nbsp;<span class="builtintype" id="6043712">uint32</span>&nbsp;<span class="op" id="6043719">{</span>&nbsp;<span class="keyword" id="6043721">return</span>&nbsp;<span class="builtintype" id="6043728">uint32</span><span class="op" id="6043734">(</span><span class="op" id="6043735">*</span><span class="ident" id="6043736">s</span><span class="op" id="6043737">)</span>&nbsp;<span class="op" id="6043739">}</span><br>
<span class="lineno">60</span><span class="keyword" id="6043741">func</span>&nbsp;<span class="op" id="6043746">(</span><span class="ident" id="6043747">s</span>&nbsp;<span class="op" id="6043749">*</span><span class="ident" id="6043750">sum64</span><span class="op" id="6043755">)</span>&nbsp;<span class="ident" id="6043757">Sum64</span><span class="op" id="6043762">(</span><span class="op" id="6043763">)</span>&nbsp;<span class="ident" id="6043765">uint64</span>&nbsp;&nbsp;<span class="op" id="6043773">{</span>&nbsp;<span class="keyword" id="6043775">return</span>&nbsp;<span class="ident" id="6043782">uint64</span><span class="op" id="6043788">(</span><span class="op" id="6043789">*</span><span class="ident" id="6043790">s</span><span class="op" id="6043791">)</span>&nbsp;<span class="op" id="6043793">}</span><br>
<span class="lineno"></span><span class="keyword" id="6043795">func</span>&nbsp;<span class="op" id="6043800">(</span><span class="ident" id="6043801">s</span>&nbsp;<span class="op" id="6043803">*</span><span class="ident" id="6043804">sum64a</span><span class="op" id="6043810">)</span>&nbsp;<span class="ident" id="6043812">Sum64</span><span class="op" id="6043817">(</span><span class="op" id="6043818">)</span>&nbsp;<span class="ident" id="6043820">uint64</span>&nbsp;<span class="op" id="6043827">{</span>&nbsp;<span class="keyword" id="6043829">return</span>&nbsp;<span class="ident" id="6043836">uint64</span><span class="op" id="6043842">(</span><span class="op" id="6043843">*</span><span class="ident" id="6043844">s</span><span class="op" id="6043845">)</span>&nbsp;<span class="op" id="6043847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6043850">func</span>&nbsp;<span class="op" id="6043855">(</span><span class="ident" id="6043856">s</span>&nbsp;<span class="op" id="6043858">*</span><span class="ident" id="6043859">sum32</span><span class="op" id="6043864">)</span>&nbsp;<span class="ident" id="6043866">Write</span><span class="op" id="6043871">(</span><span class="ident" id="6043872">data</span>&nbsp;<span class="op" id="6043877">[</span><span class="op" id="6043878">]</span><span class="builtintype" id="6043879">byte</span><span class="op" id="6043883">)</span>&nbsp;<span class="op" id="6043885">(</span><span class="builtintype" id="6043886">int</span><span class="op" id="6043889">,</span>&nbsp;<span class="builtintype" id="6043891">error</span><span class="op" id="6043896">)</span>&nbsp;<span class="op" id="6043898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043901">hash</span>&nbsp;<span class="op" id="6043906">:=</span>&nbsp;<span class="op" id="6043909">*</span><span class="ident" id="6043910">s</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043913">for</span>&nbsp;<span class="ident" id="6043917">_</span><span class="op" id="6043918">,</span>&nbsp;<span class="ident" id="6043920">c</span>&nbsp;<span class="op" id="6043922">:=</span>&nbsp;<span class="keyword" id="6043925">range</span>&nbsp;<span class="ident" id="6043931">data</span>&nbsp;<span class="op" id="6043936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043940">hash</span>&nbsp;<span class="op" id="6043945">*=</span>&nbsp;<span class="ident" id="6043948">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043958">hash</span>&nbsp;<span class="op" id="6043963">^=</span>&nbsp;<span class="ident" id="6043966">sum32</span><span class="op" id="6043971">(</span><span class="ident" id="6043972">c</span><span class="op" id="6043973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043979">*</span><span class="ident" id="6043980">s</span>&nbsp;<span class="op" id="6043982">=</span>&nbsp;<span class="ident" id="6043984">hash</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043990">return</span>&nbsp;<span class="builtinfunc" id="6043997">len</span><span class="op" id="6044000">(</span><span class="ident" id="6044001">data</span><span class="op" id="6044005">)</span><span class="op" id="6044006">,</span>&nbsp;<span class="ident" id="6044008">nil</span><br>
<span class="lineno"></span><span class="op" id="6044012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6044015">func</span>&nbsp;<span class="op" id="6044020">(</span><span class="ident" id="6044021">s</span>&nbsp;<span class="op" id="6044023">*</span><span class="ident" id="6044024">sum32a</span><span class="op" id="6044030">)</span>&nbsp;<span class="ident" id="6044032">Write</span><span class="op" id="6044037">(</span><span class="ident" id="6044038">data</span>&nbsp;<span class="op" id="6044043">[</span><span class="op" id="6044044">]</span><span class="builtintype" id="6044045">byte</span><span class="op" id="6044049">)</span>&nbsp;<span class="op" id="6044051">(</span><span class="builtintype" id="6044052">int</span><span class="op" id="6044055">,</span>&nbsp;<span class="builtintype" id="6044057">error</span><span class="op" id="6044062">)</span>&nbsp;<span class="op" id="6044064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044067">hash</span>&nbsp;<span class="op" id="6044072">:=</span>&nbsp;<span class="op" id="6044075">*</span><span class="ident" id="6044076">s</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044079">for</span>&nbsp;<span class="ident" id="6044083">_</span><span class="op" id="6044084">,</span>&nbsp;<span class="ident" id="6044086">c</span>&nbsp;<span class="op" id="6044088">:=</span>&nbsp;<span class="keyword" id="6044091">range</span>&nbsp;<span class="ident" id="6044097">data</span>&nbsp;<span class="op" id="6044102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044106">hash</span>&nbsp;<span class="op" id="6044111">^=</span>&nbsp;<span class="ident" id="6044114">sum32a</span><span class="op" id="6044120">(</span><span class="ident" id="6044121">c</span><span class="op" id="6044122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044126">hash</span>&nbsp;<span class="op" id="6044131">*=</span>&nbsp;<span class="ident" id="6044134">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044146">*</span><span class="ident" id="6044147">s</span>&nbsp;<span class="op" id="6044149">=</span>&nbsp;<span class="ident" id="6044151">hash</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044157">return</span>&nbsp;<span class="builtinfunc" id="6044164">len</span><span class="op" id="6044167">(</span><span class="ident" id="6044168">data</span><span class="op" id="6044172">)</span><span class="op" id="6044173">,</span>&nbsp;<span class="ident" id="6044175">nil</span><br>
<span class="lineno"></span><span class="op" id="6044179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6044182">func</span>&nbsp;<span class="op" id="6044187">(</span><span class="ident" id="6044188">s</span>&nbsp;<span class="op" id="6044190">*</span><span class="ident" id="6044191">sum64</span><span class="op" id="6044196">)</span>&nbsp;<span class="ident" id="6044198">Write</span><span class="op" id="6044203">(</span><span class="ident" id="6044204">data</span>&nbsp;<span class="op" id="6044209">[</span><span class="op" id="6044210">]</span><span class="builtintype" id="6044211">byte</span><span class="op" id="6044215">)</span>&nbsp;<span class="op" id="6044217">(</span><span class="builtintype" id="6044218">int</span><span class="op" id="6044221">,</span>&nbsp;<span class="builtintype" id="6044223">error</span><span class="op" id="6044228">)</span>&nbsp;<span class="op" id="6044230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044233">hash</span>&nbsp;<span class="op" id="6044238">:=</span>&nbsp;<span class="op" id="6044241">*</span><span class="ident" id="6044242">s</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044245">for</span>&nbsp;<span class="ident" id="6044249">_</span><span class="op" id="6044250">,</span>&nbsp;<span class="ident" id="6044252">c</span>&nbsp;<span class="op" id="6044254">:=</span>&nbsp;<span class="keyword" id="6044257">range</span>&nbsp;<span class="ident" id="6044263">data</span>&nbsp;<span class="op" id="6044268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044272">hash</span>&nbsp;<span class="op" id="6044277">*=</span>&nbsp;<span class="ident" id="6044280">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044290">hash</span>&nbsp;<span class="op" id="6044295">^=</span>&nbsp;<span class="ident" id="6044298">sum64</span><span class="op" id="6044303">(</span><span class="ident" id="6044304">c</span><span class="op" id="6044305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044311">*</span><span class="ident" id="6044312">s</span>&nbsp;<span class="op" id="6044314">=</span>&nbsp;<span class="ident" id="6044316">hash</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044322">return</span>&nbsp;<span class="builtinfunc" id="6044329">len</span><span class="op" id="6044332">(</span><span class="ident" id="6044333">data</span><span class="op" id="6044337">)</span><span class="op" id="6044338">,</span>&nbsp;<span class="ident" id="6044340">nil</span><br>
<span class="lineno"></span><span class="op" id="6044344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6044347">func</span>&nbsp;<span class="op" id="6044352">(</span><span class="ident" id="6044353">s</span>&nbsp;<span class="op" id="6044355">*</span><span class="ident" id="6044356">sum64a</span><span class="op" id="6044362">)</span>&nbsp;<span class="ident" id="6044364">Write</span><span class="op" id="6044369">(</span><span class="ident" id="6044370">data</span>&nbsp;<span class="op" id="6044375">[</span><span class="op" id="6044376">]</span><span class="builtintype" id="6044377">byte</span><span class="op" id="6044381">)</span>&nbsp;<span class="op" id="6044383">(</span><span class="builtintype" id="6044384">int</span><span class="op" id="6044387">,</span>&nbsp;<span class="builtintype" id="6044389">error</span><span class="op" id="6044394">)</span>&nbsp;<span class="op" id="6044396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044399">hash</span>&nbsp;<span class="op" id="6044404">:=</span>&nbsp;<span class="op" id="6044407">*</span><span class="ident" id="6044408">s</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044411">for</span>&nbsp;<span class="ident" id="6044415">_</span><span class="op" id="6044416">,</span>&nbsp;<span class="ident" id="6044418">c</span>&nbsp;<span class="op" id="6044420">:=</span>&nbsp;<span class="keyword" id="6044423">range</span>&nbsp;<span class="ident" id="6044429">data</span>&nbsp;<span class="op" id="6044434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044438">hash</span>&nbsp;<span class="op" id="6044443">^=</span>&nbsp;<span class="ident" id="6044446">sum64a</span><span class="op" id="6044452">(</span><span class="ident" id="6044453">c</span><span class="op" id="6044454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044458">hash</span>&nbsp;<span class="op" id="6044463">*=</span>&nbsp;<span class="ident" id="6044466">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044478">*</span><span class="ident" id="6044479">s</span>&nbsp;<span class="op" id="6044481">=</span>&nbsp;<span class="ident" id="6044483">hash</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044489">return</span>&nbsp;<span class="builtinfunc" id="6044496">len</span><span class="op" id="6044499">(</span><span class="ident" id="6044500">data</span><span class="op" id="6044504">)</span><span class="op" id="6044505">,</span>&nbsp;<span class="ident" id="6044507">nil</span><br>
<span class="lineno"></span><span class="op" id="6044511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6044514">func</span>&nbsp;<span class="op" id="6044519">(</span><span class="ident" id="6044520">s</span>&nbsp;<span class="op" id="6044522">*</span><span class="ident" id="6044523">sum32</span><span class="op" id="6044528">)</span>&nbsp;<span class="ident" id="6044530">Size</span><span class="op" id="6044534">(</span><span class="op" id="6044535">)</span>&nbsp;<span class="builtintype" id="6044537">int</span>&nbsp;&nbsp;<span class="op" id="6044542">{</span>&nbsp;<span class="keyword" id="6044544">return</span>&nbsp;<span class="num" id="6044551">4</span>&nbsp;<span class="op" id="6044553">}</span><br>
<span class="lineno"></span><span class="keyword" id="6044555">func</span>&nbsp;<span class="op" id="6044560">(</span><span class="ident" id="6044561">s</span>&nbsp;<span class="op" id="6044563">*</span><span class="ident" id="6044564">sum32a</span><span class="op" id="6044570">)</span>&nbsp;<span class="ident" id="6044572">Size</span><span class="op" id="6044576">(</span><span class="op" id="6044577">)</span>&nbsp;<span class="builtintype" id="6044579">int</span>&nbsp;<span class="op" id="6044583">{</span>&nbsp;<span class="keyword" id="6044585">return</span>&nbsp;<span class="num" id="6044592">4</span>&nbsp;<span class="op" id="6044594">}</span><br>
<span class="lineno">105</span><span class="keyword" id="6044596">func</span>&nbsp;<span class="op" id="6044601">(</span><span class="ident" id="6044602">s</span>&nbsp;<span class="op" id="6044604">*</span><span class="ident" id="6044605">sum64</span><span class="op" id="6044610">)</span>&nbsp;<span class="ident" id="6044612">Size</span><span class="op" id="6044616">(</span><span class="op" id="6044617">)</span>&nbsp;<span class="builtintype" id="6044619">int</span>&nbsp;&nbsp;<span class="op" id="6044624">{</span>&nbsp;<span class="keyword" id="6044626">return</span>&nbsp;<span class="num" id="6044633">8</span>&nbsp;<span class="op" id="6044635">}</span><br>
<span class="lineno"></span><span class="keyword" id="6044637">func</span>&nbsp;<span class="op" id="6044642">(</span><span class="ident" id="6044643">s</span>&nbsp;<span class="op" id="6044645">*</span><span class="ident" id="6044646">sum64a</span><span class="op" id="6044652">)</span>&nbsp;<span class="ident" id="6044654">Size</span><span class="op" id="6044658">(</span><span class="op" id="6044659">)</span>&nbsp;<span class="builtintype" id="6044661">int</span>&nbsp;<span class="op" id="6044665">{</span>&nbsp;<span class="keyword" id="6044667">return</span>&nbsp;<span class="num" id="6044674">8</span>&nbsp;<span class="op" id="6044676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6044679">func</span>&nbsp;<span class="op" id="6044684">(</span><span class="ident" id="6044685">s</span>&nbsp;<span class="op" id="6044687">*</span><span class="ident" id="6044688">sum32</span><span class="op" id="6044693">)</span>&nbsp;<span class="ident" id="6044695">BlockSize</span><span class="op" id="6044704">(</span><span class="op" id="6044705">)</span>&nbsp;<span class="builtintype" id="6044707">int</span>&nbsp;&nbsp;<span class="op" id="6044712">{</span>&nbsp;<span class="keyword" id="6044714">return</span>&nbsp;<span class="num" id="6044721">1</span>&nbsp;<span class="op" id="6044723">}</span><br>
<span class="lineno"></span><span class="keyword" id="6044725">func</span>&nbsp;<span class="op" id="6044730">(</span><span class="ident" id="6044731">s</span>&nbsp;<span class="op" id="6044733">*</span><span class="ident" id="6044734">sum32a</span><span class="op" id="6044740">)</span>&nbsp;<span class="ident" id="6044742">BlockSize</span><span class="op" id="6044751">(</span><span class="op" id="6044752">)</span>&nbsp;<span class="builtintype" id="6044754">int</span>&nbsp;<span class="op" id="6044758">{</span>&nbsp;<span class="keyword" id="6044760">return</span>&nbsp;<span class="num" id="6044767">1</span>&nbsp;<span class="op" id="6044769">}</span><br>
<span class="lineno">110</span><span class="keyword" id="6044771">func</span>&nbsp;<span class="op" id="6044776">(</span><span class="ident" id="6044777">s</span>&nbsp;<span class="op" id="6044779">*</span><span class="ident" id="6044780">sum64</span><span class="op" id="6044785">)</span>&nbsp;<span class="ident" id="6044787">BlockSize</span><span class="op" id="6044796">(</span><span class="op" id="6044797">)</span>&nbsp;<span class="builtintype" id="6044799">int</span>&nbsp;&nbsp;<span class="op" id="6044804">{</span>&nbsp;<span class="keyword" id="6044806">return</span>&nbsp;<span class="num" id="6044813">1</span>&nbsp;<span class="op" id="6044815">}</span><br>
<span class="lineno"></span><span class="keyword" id="6044817">func</span>&nbsp;<span class="op" id="6044822">(</span><span class="ident" id="6044823">s</span>&nbsp;<span class="op" id="6044825">*</span><span class="ident" id="6044826">sum64a</span><span class="op" id="6044832">)</span>&nbsp;<span class="ident" id="6044834">BlockSize</span><span class="op" id="6044843">(</span><span class="op" id="6044844">)</span>&nbsp;<span class="builtintype" id="6044846">int</span>&nbsp;<span class="op" id="6044850">{</span>&nbsp;<span class="keyword" id="6044852">return</span>&nbsp;<span class="num" id="6044859">1</span>&nbsp;<span class="op" id="6044861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6044864">func</span>&nbsp;<span class="op" id="6044869">(</span><span class="ident" id="6044870">s</span>&nbsp;<span class="op" id="6044872">*</span><span class="ident" id="6044873">sum32</span><span class="op" id="6044878">)</span>&nbsp;<span class="ident" id="6044880">Sum</span><span class="op" id="6044883">(</span><span class="ident" id="6044884">in</span>&nbsp;<span class="op" id="6044887">[</span><span class="op" id="6044888">]</span><span class="builtintype" id="6044889">byte</span><span class="op" id="6044893">)</span>&nbsp;<span class="op" id="6044895">[</span><span class="op" id="6044896">]</span><span class="builtintype" id="6044897">byte</span>&nbsp;<span class="op" id="6044902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044905">v</span>&nbsp;<span class="op" id="6044907">:=</span>&nbsp;<span class="builtintype" id="6044910">uint32</span><span class="op" id="6044916">(</span><span class="op" id="6044917">*</span><span class="ident" id="6044918">s</span><span class="op" id="6044919">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044922">return</span>&nbsp;<span class="builtinfunc" id="6044929">append</span><span class="op" id="6044935">(</span><span class="ident" id="6044936">in</span><span class="op" id="6044938">,</span>&nbsp;<span class="builtintype" id="6044940">byte</span><span class="op" id="6044944">(</span><span class="ident" id="6044945">v</span><span class="op" id="6044946">&gt;&gt;</span><span class="num" id="6044948">24</span><span class="op" id="6044950">)</span><span class="op" id="6044951">,</span>&nbsp;<span class="builtintype" id="6044953">byte</span><span class="op" id="6044957">(</span><span class="ident" id="6044958">v</span><span class="op" id="6044959">&gt;&gt;</span><span class="num" id="6044961">16</span><span class="op" id="6044963">)</span><span class="op" id="6044964">,</span>&nbsp;<span class="builtintype" id="6044966">byte</span><span class="op" id="6044970">(</span><span class="ident" id="6044971">v</span><span class="op" id="6044972">&gt;&gt;</span><span class="num" id="6044974">8</span><span class="op" id="6044975">)</span><span class="op" id="6044976">,</span>&nbsp;<span class="builtintype" id="6044978">byte</span><span class="op" id="6044982">(</span><span class="ident" id="6044983">v</span><span class="op" id="6044984">)</span><span class="op" id="6044985">)</span><br>
<span class="lineno"></span><span class="op" id="6044987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6044990">func</span>&nbsp;<span class="op" id="6044995">(</span><span class="ident" id="6044996">s</span>&nbsp;<span class="op" id="6044998">*</span><span class="ident" id="6044999">sum32a</span><span class="op" id="6045005">)</span>&nbsp;<span class="ident" id="6045007">Sum</span><span class="op" id="6045010">(</span><span class="ident" id="6045011">in</span>&nbsp;<span class="op" id="6045014">[</span><span class="op" id="6045015">]</span><span class="builtintype" id="6045016">byte</span><span class="op" id="6045020">)</span>&nbsp;<span class="op" id="6045022">[</span><span class="op" id="6045023">]</span><span class="builtintype" id="6045024">byte</span>&nbsp;<span class="op" id="6045029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045032">v</span>&nbsp;<span class="op" id="6045034">:=</span>&nbsp;<span class="builtintype" id="6045037">uint32</span><span class="op" id="6045043">(</span><span class="op" id="6045044">*</span><span class="ident" id="6045045">s</span><span class="op" id="6045046">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045049">return</span>&nbsp;<span class="builtinfunc" id="6045056">append</span><span class="op" id="6045062">(</span><span class="ident" id="6045063">in</span><span class="op" id="6045065">,</span>&nbsp;<span class="builtintype" id="6045067">byte</span><span class="op" id="6045071">(</span><span class="ident" id="6045072">v</span><span class="op" id="6045073">&gt;&gt;</span><span class="num" id="6045075">24</span><span class="op" id="6045077">)</span><span class="op" id="6045078">,</span>&nbsp;<span class="builtintype" id="6045080">byte</span><span class="op" id="6045084">(</span><span class="ident" id="6045085">v</span><span class="op" id="6045086">&gt;&gt;</span><span class="num" id="6045088">16</span><span class="op" id="6045090">)</span><span class="op" id="6045091">,</span>&nbsp;<span class="builtintype" id="6045093">byte</span><span class="op" id="6045097">(</span><span class="ident" id="6045098">v</span><span class="op" id="6045099">&gt;&gt;</span><span class="num" id="6045101">8</span><span class="op" id="6045102">)</span><span class="op" id="6045103">,</span>&nbsp;<span class="builtintype" id="6045105">byte</span><span class="op" id="6045109">(</span><span class="ident" id="6045110">v</span><span class="op" id="6045111">)</span><span class="op" id="6045112">)</span><br>
<span class="lineno"></span><span class="op" id="6045114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6045117">func</span>&nbsp;<span class="op" id="6045122">(</span><span class="ident" id="6045123">s</span>&nbsp;<span class="op" id="6045125">*</span><span class="ident" id="6045126">sum64</span><span class="op" id="6045131">)</span>&nbsp;<span class="ident" id="6045133">Sum</span><span class="op" id="6045136">(</span><span class="ident" id="6045137">in</span>&nbsp;<span class="op" id="6045140">[</span><span class="op" id="6045141">]</span><span class="builtintype" id="6045142">byte</span><span class="op" id="6045146">)</span>&nbsp;<span class="op" id="6045148">[</span><span class="op" id="6045149">]</span><span class="builtintype" id="6045150">byte</span>&nbsp;<span class="op" id="6045155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045158">v</span>&nbsp;<span class="op" id="6045160">:=</span>&nbsp;<span class="ident" id="6045163">uint64</span><span class="op" id="6045169">(</span><span class="op" id="6045170">*</span><span class="ident" id="6045171">s</span><span class="op" id="6045172">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045175">return</span>&nbsp;<span class="builtinfunc" id="6045182">append</span><span class="op" id="6045188">(</span><span class="ident" id="6045189">in</span><span class="op" id="6045191">,</span>&nbsp;<span class="builtintype" id="6045193">byte</span><span class="op" id="6045197">(</span><span class="ident" id="6045198">v</span><span class="op" id="6045199">&gt;&gt;</span><span class="num" id="6045201">56</span><span class="op" id="6045203">)</span><span class="op" id="6045204">,</span>&nbsp;<span class="builtintype" id="6045206">byte</span><span class="op" id="6045210">(</span><span class="ident" id="6045211">v</span><span class="op" id="6045212">&gt;&gt;</span><span class="num" id="6045214">48</span><span class="op" id="6045216">)</span><span class="op" id="6045217">,</span>&nbsp;<span class="builtintype" id="6045219">byte</span><span class="op" id="6045223">(</span><span class="ident" id="6045224">v</span><span class="op" id="6045225">&gt;&gt;</span><span class="num" id="6045227">40</span><span class="op" id="6045229">)</span><span class="op" id="6045230">,</span>&nbsp;<span class="builtintype" id="6045232">byte</span><span class="op" id="6045236">(</span><span class="ident" id="6045237">v</span><span class="op" id="6045238">&gt;&gt;</span><span class="num" id="6045240">32</span><span class="op" id="6045242">)</span><span class="op" id="6045243">,</span>&nbsp;<span class="builtintype" id="6045245">byte</span><span class="op" id="6045249">(</span><span class="ident" id="6045250">v</span><span class="op" id="6045251">&gt;&gt;</span><span class="num" id="6045253">24</span><span class="op" id="6045255">)</span><span class="op" id="6045256">,</span>&nbsp;<span class="builtintype" id="6045258">byte</span><span class="op" id="6045262">(</span><span class="ident" id="6045263">v</span><span class="op" id="6045264">&gt;&gt;</span><span class="num" id="6045266">16</span><span class="op" id="6045268">)</span><span class="op" id="6045269">,</span>&nbsp;<span class="builtintype" id="6045271">byte</span><span class="op" id="6045275">(</span><span class="ident" id="6045276">v</span><span class="op" id="6045277">&gt;&gt;</span><span class="num" id="6045279">8</span><span class="op" id="6045280">)</span><span class="op" id="6045281">,</span>&nbsp;<span class="builtintype" id="6045283">byte</span><span class="op" id="6045287">(</span><span class="ident" id="6045288">v</span><span class="op" id="6045289">)</span><span class="op" id="6045290">)</span><br>
<span class="lineno"></span><span class="op" id="6045292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6045295">func</span>&nbsp;<span class="op" id="6045300">(</span><span class="ident" id="6045301">s</span>&nbsp;<span class="op" id="6045303">*</span><span class="ident" id="6045304">sum64a</span><span class="op" id="6045310">)</span>&nbsp;<span class="ident" id="6045312">Sum</span><span class="op" id="6045315">(</span><span class="ident" id="6045316">in</span>&nbsp;<span class="op" id="6045319">[</span><span class="op" id="6045320">]</span><span class="builtintype" id="6045321">byte</span><span class="op" id="6045325">)</span>&nbsp;<span class="op" id="6045327">[</span><span class="op" id="6045328">]</span><span class="builtintype" id="6045329">byte</span>&nbsp;<span class="op" id="6045334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045337">v</span>&nbsp;<span class="op" id="6045339">:=</span>&nbsp;<span class="ident" id="6045342">uint64</span><span class="op" id="6045348">(</span><span class="op" id="6045349">*</span><span class="ident" id="6045350">s</span><span class="op" id="6045351">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045354">return</span>&nbsp;<span class="builtinfunc" id="6045361">append</span><span class="op" id="6045367">(</span><span class="ident" id="6045368">in</span><span class="op" id="6045370">,</span>&nbsp;<span class="builtintype" id="6045372">byte</span><span class="op" id="6045376">(</span><span class="ident" id="6045377">v</span><span class="op" id="6045378">&gt;&gt;</span><span class="num" id="6045380">56</span><span class="op" id="6045382">)</span><span class="op" id="6045383">,</span>&nbsp;<span class="builtintype" id="6045385">byte</span><span class="op" id="6045389">(</span><span class="ident" id="6045390">v</span><span class="op" id="6045391">&gt;&gt;</span><span class="num" id="6045393">48</span><span class="op" id="6045395">)</span><span class="op" id="6045396">,</span>&nbsp;<span class="builtintype" id="6045398">byte</span><span class="op" id="6045402">(</span><span class="ident" id="6045403">v</span><span class="op" id="6045404">&gt;&gt;</span><span class="num" id="6045406">40</span><span class="op" id="6045408">)</span><span class="op" id="6045409">,</span>&nbsp;<span class="builtintype" id="6045411">byte</span><span class="op" id="6045415">(</span><span class="ident" id="6045416">v</span><span class="op" id="6045417">&gt;&gt;</span><span class="num" id="6045419">32</span><span class="op" id="6045421">)</span><span class="op" id="6045422">,</span>&nbsp;<span class="builtintype" id="6045424">byte</span><span class="op" id="6045428">(</span><span class="ident" id="6045429">v</span><span class="op" id="6045430">&gt;&gt;</span><span class="num" id="6045432">24</span><span class="op" id="6045434">)</span><span class="op" id="6045435">,</span>&nbsp;<span class="builtintype" id="6045437">byte</span><span class="op" id="6045441">(</span><span class="ident" id="6045442">v</span><span class="op" id="6045443">&gt;&gt;</span><span class="num" id="6045445">16</span><span class="op" id="6045447">)</span><span class="op" id="6045448">,</span>&nbsp;<span class="builtintype" id="6045450">byte</span><span class="op" id="6045454">(</span><span class="ident" id="6045455">v</span><span class="op" id="6045456">&gt;&gt;</span><span class="num" id="6045458">8</span><span class="op" id="6045459">)</span><span class="op" id="6045460">,</span>&nbsp;<span class="builtintype" id="6045462">byte</span><span class="op" id="6045466">(</span><span class="ident" id="6045467">v</span><span class="op" id="6045468">)</span><span class="op" id="6045469">)</span><br>
<span class="lineno"></span><span class="op" id="6045471">}</span>
</div>
</body>
</html>
