<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/rand</h2>
<ul>
<li><a href="/gostd/math/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/rand/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/rand/normal.go.html">normal.go</a></li>
<li><a href="/gostd/math/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/math/rand/rand_test.go.html" class="current">rand_test.go</a></li>
<li><a href="/gostd/math/rand/regress_test.go.html">regress_test.go</a></li>
<li><a href="/gostd/math/rand/rng.go.html">rng.go</a></li>
<li><a href="/gostd/math/rand/zipf.go.html">zipf.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7882693">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7882748">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7882802">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7882853">package</span>&nbsp;<span class="ident" id="7882861">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7882867">import</span>&nbsp;<span class="op" id="7882874">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7882877">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7882887">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7882894">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7882902">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7882912">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7882915">const</span>&nbsp;<span class="op" id="7882921">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7882924">numTestSamples</span>&nbsp;<span class="op" id="7882939">=</span>&nbsp;<span class="num" id="7882941">10000</span><br>
<span class="lineno"></span><span class="op" id="7882947">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7882950">type</span>&nbsp;<span class="ident" id="7882955">statsResults</span>&nbsp;<span class="keyword" id="7882968">struct</span>&nbsp;<span class="op" id="7882975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7882978">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7882990">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7882999">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7883011">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7883020">closeEnough</span>&nbsp;<span class="builtintype" id="7883032">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7883041">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7883053">float64</span><br>
<span class="lineno"></span><span class="op" id="7883061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7883064">func</span>&nbsp;<span class="ident" id="7883069">max</span><span class="op" id="7883072">(</span><span class="ident" id="7883073">a</span><span class="op" id="7883074">,</span>&nbsp;<span class="ident" id="7883076">b</span>&nbsp;<span class="builtintype" id="7883078">float64</span><span class="op" id="7883085">)</span>&nbsp;<span class="builtintype" id="7883087">float64</span>&nbsp;<span class="op" id="7883095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7883098">if</span>&nbsp;<span class="ident" id="7883101">a</span>&nbsp;<span class="op" id="7883103">&gt;</span>&nbsp;<span class="ident" id="7883105">b</span>&nbsp;<span class="op" id="7883107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7883111">return</span>&nbsp;<span class="ident" id="7883118">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7883121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7883124">return</span>&nbsp;<span class="ident" id="7883131">b</span><br>
<span class="lineno">30</span><span class="op" id="7883133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7883136">func</span>&nbsp;<span class="ident" id="7883141">nearEqual</span><span class="op" id="7883150">(</span><span class="ident" id="7883151">a</span><span class="op" id="7883152">,</span>&nbsp;<span class="ident" id="7883154">b</span><span class="op" id="7883155">,</span>&nbsp;<span class="ident" id="7883157">closeEnough</span><span class="op" id="7883168">,</span>&nbsp;<span class="ident" id="7883170">maxError</span>&nbsp;<span class="builtintype" id="7883179">float64</span><span class="op" id="7883186">)</span>&nbsp;<span class="builtintype" id="7883188">bool</span>&nbsp;<span class="op" id="7883193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7883196">absDiff</span>&nbsp;<span class="op" id="7883204">:=</span>&nbsp;<span class="ident" id="7883207">math</span><span class="op" id="7883211">.</span><span class="ident" id="7883212">Abs</span><span class="op" id="7883215">(</span><span class="ident" id="7883216">a</span>&nbsp;<span class="op" id="7883218">-</span>&nbsp;<span class="ident" id="7883220">b</span><span class="op" id="7883221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7883224">if</span>&nbsp;<span class="ident" id="7883227">absDiff</span>&nbsp;<span class="op" id="7883235">&lt;</span>&nbsp;<span class="ident" id="7883237">closeEnough</span>&nbsp;<span class="op" id="7883249">{</span>&nbsp;<span class="comment" id="7883251">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7883321">return</span>&nbsp;<span class="builtintype" id="7883328">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7883334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7883337">return</span>&nbsp;<span class="ident" id="7883344">absDiff</span><span class="op" id="7883351">/</span><span class="ident" id="7883352">max</span><span class="op" id="7883355">(</span><span class="ident" id="7883356">math</span><span class="op" id="7883360">.</span><span class="ident" id="7883361">Abs</span><span class="op" id="7883364">(</span><span class="ident" id="7883365">a</span><span class="op" id="7883366">)</span><span class="op" id="7883367">,</span>&nbsp;<span class="ident" id="7883369">math</span><span class="op" id="7883373">.</span><span class="ident" id="7883374">Abs</span><span class="op" id="7883377">(</span><span class="ident" id="7883378">b</span><span class="op" id="7883379">)</span><span class="op" id="7883380">)</span>&nbsp;<span class="op" id="7883382">&lt;</span>&nbsp;<span class="ident" id="7883384">maxError</span><br>
<span class="lineno"></span><span class="op" id="7883393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7883396">var</span>&nbsp;<span class="ident" id="7883400">testSeeds</span>&nbsp;<span class="op" id="7883410">=</span>&nbsp;<span class="op" id="7883412">[</span><span class="op" id="7883413">]</span><span class="ident" id="7883414">int64</span><span class="op" id="7883419">{</span><span class="num" id="7883420">1</span><span class="op" id="7883421">,</span>&nbsp;<span class="num" id="7883423">1754801282</span><span class="op" id="7883433">,</span>&nbsp;<span class="num" id="7883435">1698661970</span><span class="op" id="7883445">,</span>&nbsp;<span class="num" id="7883447">1550503961</span><span class="op" id="7883457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7883460">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7883534">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="7883567">func</span>&nbsp;<span class="op" id="7883572">(</span><span class="ident" id="7883573">this</span>&nbsp;<span class="op" id="7883578">*</span><span class="ident" id="7883579">statsResults</span><span class="op" id="7883591">)</span>&nbsp;<span class="ident" id="7883593">checkSimilarDistribution</span><span class="op" id="7883617">(</span><span class="ident" id="7883618">expected</span>&nbsp;<span class="op" id="7883627">*</span><span class="ident" id="7883628">statsResults</span><span class="op" id="7883640">)</span>&nbsp;<span class="builtintype" id="7883642">error</span>&nbsp;<span class="op" id="7883648">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7883651">if</span>&nbsp;<span class="op" id="7883654">!</span><span class="ident" id="7883655">nearEqual</span><span class="op" id="7883664">(</span><span class="ident" id="7883665">this</span><span class="op" id="7883669">.</span><span class="ident" id="7883670">mean</span><span class="op" id="7883674">,</span>&nbsp;<span class="ident" id="7883676">expected</span><span class="op" id="7883684">.</span><span class="ident" id="7883685">mean</span><span class="op" id="7883689">,</span>&nbsp;<span class="ident" id="7883691">expected</span><span class="op" id="7883699">.</span><span class="ident" id="7883700">closeEnough</span><span class="op" id="7883711">,</span>&nbsp;<span class="ident" id="7883713">expected</span><span class="op" id="7883721">.</span><span class="ident" id="7883722">maxError</span><span class="op" id="7883730">)</span>&nbsp;<span class="op" id="7883732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7883736">s</span>&nbsp;<span class="op" id="7883738">:=</span>&nbsp;<span class="ident" id="7883741">fmt</span><span class="op" id="7883744">.</span><span class="ident" id="7883745">Sprintf</span><span class="op" id="7883752">(</span><span class="string" id="7883753">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7883791">,</span>&nbsp;<span class="ident" id="7883793">this</span><span class="op" id="7883797">.</span><span class="ident" id="7883798">mean</span><span class="op" id="7883802">,</span>&nbsp;<span class="ident" id="7883804">expected</span><span class="op" id="7883812">.</span><span class="ident" id="7883813">mean</span><span class="op" id="7883817">,</span>&nbsp;<span class="ident" id="7883819">expected</span><span class="op" id="7883827">.</span><span class="ident" id="7883828">closeEnough</span><span class="op" id="7883839">,</span>&nbsp;<span class="ident" id="7883841">expected</span><span class="op" id="7883849">.</span><span class="ident" id="7883850">maxError</span><span class="op" id="7883858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7883862">fmt</span><span class="op" id="7883865">.</span><span class="ident" id="7883866">Println</span><span class="op" id="7883873">(</span><span class="ident" id="7883874">s</span><span class="op" id="7883875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7883879">return</span>&nbsp;<span class="ident" id="7883886">errors</span><span class="op" id="7883892">.</span><span class="ident" id="7883893">New</span><span class="op" id="7883896">(</span><span class="ident" id="7883897">s</span><span class="op" id="7883898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7883901">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7883904">if</span>&nbsp;<span class="op" id="7883907">!</span><span class="ident" id="7883908">nearEqual</span><span class="op" id="7883917">(</span><span class="ident" id="7883918">this</span><span class="op" id="7883922">.</span><span class="ident" id="7883923">stddev</span><span class="op" id="7883929">,</span>&nbsp;<span class="ident" id="7883931">expected</span><span class="op" id="7883939">.</span><span class="ident" id="7883940">stddev</span><span class="op" id="7883946">,</span>&nbsp;<span class="num" id="7883948">0</span><span class="op" id="7883949">,</span>&nbsp;<span class="ident" id="7883951">expected</span><span class="op" id="7883959">.</span><span class="ident" id="7883960">maxError</span><span class="op" id="7883968">)</span>&nbsp;<span class="op" id="7883970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7883974">s</span>&nbsp;<span class="op" id="7883976">:=</span>&nbsp;<span class="ident" id="7883979">fmt</span><span class="op" id="7883982">.</span><span class="ident" id="7883983">Sprintf</span><span class="op" id="7883990">(</span><span class="string" id="7883991">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7884031">,</span>&nbsp;<span class="ident" id="7884033">this</span><span class="op" id="7884037">.</span><span class="ident" id="7884038">stddev</span><span class="op" id="7884044">,</span>&nbsp;<span class="ident" id="7884046">expected</span><span class="op" id="7884054">.</span><span class="ident" id="7884055">stddev</span><span class="op" id="7884061">,</span>&nbsp;<span class="ident" id="7884063">expected</span><span class="op" id="7884071">.</span><span class="ident" id="7884072">closeEnough</span><span class="op" id="7884083">,</span>&nbsp;<span class="ident" id="7884085">expected</span><span class="op" id="7884093">.</span><span class="ident" id="7884094">maxError</span><span class="op" id="7884102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884106">fmt</span><span class="op" id="7884109">.</span><span class="ident" id="7884110">Println</span><span class="op" id="7884117">(</span><span class="ident" id="7884118">s</span><span class="op" id="7884119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7884123">return</span>&nbsp;<span class="ident" id="7884130">errors</span><span class="op" id="7884136">.</span><span class="ident" id="7884137">New</span><span class="op" id="7884140">(</span><span class="ident" id="7884141">s</span><span class="op" id="7884142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7884145">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7884148">return</span>&nbsp;<span class="ident" id="7884155">nil</span><br>
<span class="lineno"></span><span class="op" id="7884159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7884162">func</span>&nbsp;<span class="ident" id="7884167">getStatsResults</span><span class="op" id="7884182">(</span><span class="ident" id="7884183">samples</span>&nbsp;<span class="op" id="7884191">[</span><span class="op" id="7884192">]</span><span class="builtintype" id="7884193">float64</span><span class="op" id="7884200">)</span>&nbsp;<span class="op" id="7884202">*</span><span class="ident" id="7884203">statsResults</span>&nbsp;<span class="op" id="7884216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884219">res</span>&nbsp;<span class="op" id="7884223">:=</span>&nbsp;<span class="builtinfunc" id="7884226">new</span><span class="op" id="7884229">(</span><span class="ident" id="7884230">statsResults</span><span class="op" id="7884242">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7884245">var</span>&nbsp;<span class="ident" id="7884249">sum</span><span class="op" id="7884252">,</span>&nbsp;<span class="ident" id="7884254">squaresum</span>&nbsp;<span class="builtintype" id="7884264">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7884273">for</span>&nbsp;<span class="ident" id="7884277">_</span><span class="op" id="7884278">,</span>&nbsp;<span class="ident" id="7884280">s</span>&nbsp;<span class="op" id="7884282">:=</span>&nbsp;<span class="keyword" id="7884285">range</span>&nbsp;<span class="ident" id="7884291">samples</span>&nbsp;<span class="op" id="7884299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884303">sum</span>&nbsp;<span class="op" id="7884307">+=</span>&nbsp;<span class="ident" id="7884310">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884314">squaresum</span>&nbsp;<span class="op" id="7884324">+=</span>&nbsp;<span class="ident" id="7884327">s</span>&nbsp;<span class="op" id="7884329">*</span>&nbsp;<span class="ident" id="7884331">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7884334">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884337">res</span><span class="op" id="7884340">.</span><span class="ident" id="7884341">mean</span>&nbsp;<span class="op" id="7884346">=</span>&nbsp;<span class="ident" id="7884348">sum</span>&nbsp;<span class="op" id="7884352">/</span>&nbsp;<span class="builtintype" id="7884354">float64</span><span class="op" id="7884361">(</span><span class="builtinfunc" id="7884362">len</span><span class="op" id="7884365">(</span><span class="ident" id="7884366">samples</span><span class="op" id="7884373">)</span><span class="op" id="7884374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884377">res</span><span class="op" id="7884380">.</span><span class="ident" id="7884381">stddev</span>&nbsp;<span class="op" id="7884388">=</span>&nbsp;<span class="ident" id="7884390">math</span><span class="op" id="7884394">.</span><span class="ident" id="7884395">Sqrt</span><span class="op" id="7884399">(</span><span class="ident" id="7884400">squaresum</span><span class="op" id="7884409">/</span><span class="builtintype" id="7884410">float64</span><span class="op" id="7884417">(</span><span class="builtinfunc" id="7884418">len</span><span class="op" id="7884421">(</span><span class="ident" id="7884422">samples</span><span class="op" id="7884429">)</span><span class="op" id="7884430">)</span>&nbsp;<span class="op" id="7884432">-</span>&nbsp;<span class="ident" id="7884434">res</span><span class="op" id="7884437">.</span><span class="ident" id="7884438">mean</span><span class="op" id="7884442">*</span><span class="ident" id="7884443">res</span><span class="op" id="7884446">.</span><span class="ident" id="7884447">mean</span><span class="op" id="7884451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7884454">return</span>&nbsp;<span class="ident" id="7884461">res</span><br>
<span class="lineno"></span><span class="op" id="7884465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="7884468">func</span>&nbsp;<span class="ident" id="7884473">checkSampleDistribution</span><span class="op" id="7884496">(</span><span class="ident" id="7884497">t</span>&nbsp;<span class="op" id="7884499">*</span><span class="ident" id="7884500">testing</span><span class="op" id="7884507">.</span><span class="ident" id="7884508">T</span><span class="op" id="7884509">,</span>&nbsp;<span class="ident" id="7884511">samples</span>&nbsp;<span class="op" id="7884519">[</span><span class="op" id="7884520">]</span><span class="builtintype" id="7884521">float64</span><span class="op" id="7884528">,</span>&nbsp;<span class="ident" id="7884530">expected</span>&nbsp;<span class="op" id="7884539">*</span><span class="ident" id="7884540">statsResults</span><span class="op" id="7884552">)</span>&nbsp;<span class="op" id="7884554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884557">actual</span>&nbsp;<span class="op" id="7884564">:=</span>&nbsp;<span class="ident" id="7884567">getStatsResults</span><span class="op" id="7884582">(</span><span class="ident" id="7884583">samples</span><span class="op" id="7884590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884593">err</span>&nbsp;<span class="op" id="7884597">:=</span>&nbsp;<span class="ident" id="7884600">actual</span><span class="op" id="7884606">.</span><span class="ident" id="7884607">checkSimilarDistribution</span><span class="op" id="7884631">(</span><span class="ident" id="7884632">expected</span><span class="op" id="7884640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7884643">if</span>&nbsp;<span class="ident" id="7884646">err</span>&nbsp;<span class="op" id="7884650">!=</span>&nbsp;<span class="ident" id="7884653">nil</span>&nbsp;<span class="op" id="7884657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884661">t</span><span class="op" id="7884662">.</span><span class="ident" id="7884663">Errorf</span><span class="op" id="7884669">(</span><span class="ident" id="7884670">err</span><span class="op" id="7884673">.</span><span class="ident" id="7884674">Error</span><span class="op" id="7884679">(</span><span class="op" id="7884680">)</span><span class="op" id="7884681">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7884684">}</span><br>
<span class="lineno"></span><span class="op" id="7884686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7884689">func</span>&nbsp;<span class="ident" id="7884694">checkSampleSliceDistributions</span><span class="op" id="7884723">(</span><span class="ident" id="7884724">t</span>&nbsp;<span class="op" id="7884726">*</span><span class="ident" id="7884727">testing</span><span class="op" id="7884734">.</span><span class="ident" id="7884735">T</span><span class="op" id="7884736">,</span>&nbsp;<span class="ident" id="7884738">samples</span>&nbsp;<span class="op" id="7884746">[</span><span class="op" id="7884747">]</span><span class="builtintype" id="7884748">float64</span><span class="op" id="7884755">,</span>&nbsp;<span class="ident" id="7884757">nslices</span>&nbsp;<span class="builtintype" id="7884765">int</span><span class="op" id="7884768">,</span>&nbsp;<span class="ident" id="7884770">expected</span>&nbsp;<span class="op" id="7884779">*</span><span class="ident" id="7884780">statsResults</span><span class="op" id="7884792">)</span>&nbsp;<span class="op" id="7884794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884797">chunk</span>&nbsp;<span class="op" id="7884803">:=</span>&nbsp;<span class="builtinfunc" id="7884806">len</span><span class="op" id="7884809">(</span><span class="ident" id="7884810">samples</span><span class="op" id="7884817">)</span>&nbsp;<span class="op" id="7884819">/</span>&nbsp;<span class="ident" id="7884821">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7884830">for</span>&nbsp;<span class="ident" id="7884834">i</span>&nbsp;<span class="op" id="7884836">:=</span>&nbsp;<span class="num" id="7884839">0</span><span class="op" id="7884840">;</span>&nbsp;<span class="ident" id="7884842">i</span>&nbsp;<span class="op" id="7884844">&lt;</span>&nbsp;<span class="ident" id="7884846">nslices</span><span class="op" id="7884853">;</span>&nbsp;<span class="ident" id="7884855">i</span><span class="op" id="7884856">++</span>&nbsp;<span class="op" id="7884859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884863">low</span>&nbsp;<span class="op" id="7884867">:=</span>&nbsp;<span class="ident" id="7884870">i</span>&nbsp;<span class="op" id="7884872">*</span>&nbsp;<span class="ident" id="7884874">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7884882">var</span>&nbsp;<span class="ident" id="7884886">high</span>&nbsp;<span class="builtintype" id="7884891">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7884897">if</span>&nbsp;<span class="ident" id="7884900">i</span>&nbsp;<span class="op" id="7884902">==</span>&nbsp;<span class="ident" id="7884905">nslices</span><span class="op" id="7884912">-</span><span class="num" id="7884913">1</span>&nbsp;<span class="op" id="7884915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884920">high</span>&nbsp;<span class="op" id="7884925">=</span>&nbsp;<span class="builtinfunc" id="7884927">len</span><span class="op" id="7884930">(</span><span class="ident" id="7884931">samples</span><span class="op" id="7884938">)</span>&nbsp;<span class="op" id="7884940">-</span>&nbsp;<span class="num" id="7884942">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7884946">}</span>&nbsp;<span class="keyword" id="7884948">else</span>&nbsp;<span class="op" id="7884953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884958">high</span>&nbsp;<span class="op" id="7884963">=</span>&nbsp;<span class="op" id="7884965">(</span><span class="ident" id="7884966">i</span>&nbsp;<span class="op" id="7884968">+</span>&nbsp;<span class="num" id="7884970">1</span><span class="op" id="7884971">)</span>&nbsp;<span class="op" id="7884973">*</span>&nbsp;<span class="ident" id="7884975">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7884983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884987">checkSampleDistribution</span><span class="op" id="7885010">(</span><span class="ident" id="7885011">t</span><span class="op" id="7885012">,</span>&nbsp;<span class="ident" id="7885014">samples</span><span class="op" id="7885021">[</span><span class="ident" id="7885022">low</span><span class="op" id="7885025">:</span><span class="ident" id="7885026">high</span><span class="op" id="7885030">]</span><span class="op" id="7885031">,</span>&nbsp;<span class="ident" id="7885033">expected</span><span class="op" id="7885041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7885044">}</span><br>
<span class="lineno">90</span><span class="op" id="7885046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7885049">//</span><br>
<span class="lineno"></span><span class="comment" id="7885052">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7885081">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7885085">func</span>&nbsp;<span class="ident" id="7885090">generateNormalSamples</span><span class="op" id="7885111">(</span><span class="ident" id="7885112">nsamples</span>&nbsp;<span class="builtintype" id="7885121">int</span><span class="op" id="7885124">,</span>&nbsp;<span class="ident" id="7885126">mean</span><span class="op" id="7885130">,</span>&nbsp;<span class="ident" id="7885132">stddev</span>&nbsp;<span class="builtintype" id="7885139">float64</span><span class="op" id="7885146">,</span>&nbsp;<span class="ident" id="7885148">seed</span>&nbsp;<span class="ident" id="7885153">int64</span><span class="op" id="7885158">)</span>&nbsp;<span class="op" id="7885160">[</span><span class="op" id="7885161">]</span><span class="builtintype" id="7885162">float64</span>&nbsp;<span class="op" id="7885170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7885173">r</span>&nbsp;<span class="op" id="7885175">:=</span>&nbsp;<span class="ident" id="7885178">New</span><span class="op" id="7885181">(</span><span class="ident" id="7885182">NewSource</span><span class="op" id="7885191">(</span><span class="ident" id="7885192">seed</span><span class="op" id="7885196">)</span><span class="op" id="7885197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7885200">samples</span>&nbsp;<span class="op" id="7885208">:=</span>&nbsp;<span class="builtinfunc" id="7885211">make</span><span class="op" id="7885215">(</span><span class="op" id="7885216">[</span><span class="op" id="7885217">]</span><span class="builtintype" id="7885218">float64</span><span class="op" id="7885225">,</span>&nbsp;<span class="ident" id="7885227">nsamples</span><span class="op" id="7885235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7885238">for</span>&nbsp;<span class="ident" id="7885242">i</span>&nbsp;<span class="op" id="7885244">:=</span>&nbsp;<span class="keyword" id="7885247">range</span>&nbsp;<span class="ident" id="7885253">samples</span>&nbsp;<span class="op" id="7885261">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7885265">samples</span><span class="op" id="7885272">[</span><span class="ident" id="7885273">i</span><span class="op" id="7885274">]</span>&nbsp;<span class="op" id="7885276">=</span>&nbsp;<span class="ident" id="7885278">r</span><span class="op" id="7885279">.</span><span class="ident" id="7885280">NormFloat64</span><span class="op" id="7885291">(</span><span class="op" id="7885292">)</span><span class="op" id="7885293">*</span><span class="ident" id="7885294">stddev</span>&nbsp;<span class="op" id="7885301">+</span>&nbsp;<span class="ident" id="7885303">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7885309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7885312">return</span>&nbsp;<span class="ident" id="7885319">samples</span><br>
<span class="lineno"></span><span class="op" id="7885327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7885330">func</span>&nbsp;<span class="ident" id="7885335">testNormalDistribution</span><span class="op" id="7885357">(</span><span class="ident" id="7885358">t</span>&nbsp;<span class="op" id="7885360">*</span><span class="ident" id="7885361">testing</span><span class="op" id="7885368">.</span><span class="ident" id="7885369">T</span><span class="op" id="7885370">,</span>&nbsp;<span class="ident" id="7885372">nsamples</span>&nbsp;<span class="builtintype" id="7885381">int</span><span class="op" id="7885384">,</span>&nbsp;<span class="ident" id="7885386">mean</span><span class="op" id="7885390">,</span>&nbsp;<span class="ident" id="7885392">stddev</span>&nbsp;<span class="builtintype" id="7885399">float64</span><span class="op" id="7885406">,</span>&nbsp;<span class="ident" id="7885408">seed</span>&nbsp;<span class="ident" id="7885413">int64</span><span class="op" id="7885418">)</span>&nbsp;<span class="op" id="7885420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7885423">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7885520">samples</span>&nbsp;<span class="op" id="7885528">:=</span>&nbsp;<span class="ident" id="7885531">generateNormalSamples</span><span class="op" id="7885552">(</span><span class="ident" id="7885553">nsamples</span><span class="op" id="7885561">,</span>&nbsp;<span class="ident" id="7885563">mean</span><span class="op" id="7885567">,</span>&nbsp;<span class="ident" id="7885569">stddev</span><span class="op" id="7885575">,</span>&nbsp;<span class="ident" id="7885577">seed</span><span class="op" id="7885581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7885584">errorScale</span>&nbsp;<span class="op" id="7885595">:=</span>&nbsp;<span class="ident" id="7885598">max</span><span class="op" id="7885601">(</span><span class="num" id="7885602">1.0</span><span class="op" id="7885605">,</span>&nbsp;<span class="ident" id="7885607">stddev</span><span class="op" id="7885613">)</span>&nbsp;<span class="comment" id="7885615">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7885644">expected</span>&nbsp;<span class="op" id="7885653">:=</span>&nbsp;<span class="op" id="7885656">&amp;</span><span class="ident" id="7885657">statsResults</span><span class="op" id="7885669">{</span><span class="ident" id="7885670">mean</span><span class="op" id="7885674">,</span>&nbsp;<span class="ident" id="7885676">stddev</span><span class="op" id="7885682">,</span>&nbsp;<span class="num" id="7885684">0.10</span>&nbsp;<span class="op" id="7885689">*</span>&nbsp;<span class="ident" id="7885691">errorScale</span><span class="op" id="7885701">,</span>&nbsp;<span class="num" id="7885703">0.08</span>&nbsp;<span class="op" id="7885708">*</span>&nbsp;<span class="ident" id="7885710">errorScale</span><span class="op" id="7885720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7885724">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7885793">checkSampleDistribution</span><span class="op" id="7885816">(</span><span class="ident" id="7885817">t</span><span class="op" id="7885818">,</span>&nbsp;<span class="ident" id="7885820">samples</span><span class="op" id="7885827">,</span>&nbsp;<span class="ident" id="7885829">expected</span><span class="op" id="7885837">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7885841">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7885916">checkSampleSliceDistributions</span><span class="op" id="7885945">(</span><span class="ident" id="7885946">t</span><span class="op" id="7885947">,</span>&nbsp;<span class="ident" id="7885949">samples</span><span class="op" id="7885956">,</span>&nbsp;<span class="num" id="7885958">2</span><span class="op" id="7885959">,</span>&nbsp;<span class="ident" id="7885961">expected</span><span class="op" id="7885969">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7885973">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886047">checkSampleSliceDistributions</span><span class="op" id="7886076">(</span><span class="ident" id="7886077">t</span><span class="op" id="7886078">,</span>&nbsp;<span class="ident" id="7886080">samples</span><span class="op" id="7886087">,</span>&nbsp;<span class="num" id="7886089">7</span><span class="op" id="7886090">,</span>&nbsp;<span class="ident" id="7886092">expected</span><span class="op" id="7886100">)</span><br>
<span class="lineno">120</span><span class="op" id="7886102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7886105">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7886122">func</span>&nbsp;<span class="ident" id="7886127">TestStandardNormalValues</span><span class="op" id="7886151">(</span><span class="ident" id="7886152">t</span>&nbsp;<span class="op" id="7886154">*</span><span class="ident" id="7886155">testing</span><span class="op" id="7886162">.</span><span class="ident" id="7886163">T</span><span class="op" id="7886164">)</span>&nbsp;<span class="op" id="7886166">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7886169">for</span>&nbsp;<span class="ident" id="7886173">_</span><span class="op" id="7886174">,</span>&nbsp;<span class="ident" id="7886176">seed</span>&nbsp;<span class="op" id="7886181">:=</span>&nbsp;<span class="keyword" id="7886184">range</span>&nbsp;<span class="ident" id="7886190">testSeeds</span>&nbsp;<span class="op" id="7886200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886204">testNormalDistribution</span><span class="op" id="7886226">(</span><span class="ident" id="7886227">t</span><span class="op" id="7886228">,</span>&nbsp;<span class="ident" id="7886230">numTestSamples</span><span class="op" id="7886244">,</span>&nbsp;<span class="num" id="7886246">0</span><span class="op" id="7886247">,</span>&nbsp;<span class="num" id="7886249">1</span><span class="op" id="7886250">,</span>&nbsp;<span class="ident" id="7886252">seed</span><span class="op" id="7886256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7886259">}</span><br>
<span class="lineno"></span><span class="op" id="7886261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="7886264">func</span>&nbsp;<span class="ident" id="7886269">TestNonStandardNormalValues</span><span class="op" id="7886296">(</span><span class="ident" id="7886297">t</span>&nbsp;<span class="op" id="7886299">*</span><span class="ident" id="7886300">testing</span><span class="op" id="7886307">.</span><span class="ident" id="7886308">T</span><span class="op" id="7886309">)</span>&nbsp;<span class="op" id="7886311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886314">sdmax</span>&nbsp;<span class="op" id="7886320">:=</span>&nbsp;<span class="num" id="7886323">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886331">mmax</span>&nbsp;<span class="op" id="7886336">:=</span>&nbsp;<span class="num" id="7886339">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7886347">if</span>&nbsp;<span class="ident" id="7886350">testing</span><span class="op" id="7886357">.</span><span class="ident" id="7886358">Short</span><span class="op" id="7886363">(</span><span class="op" id="7886364">)</span>&nbsp;<span class="op" id="7886366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886370">sdmax</span>&nbsp;<span class="op" id="7886376">=</span>&nbsp;<span class="num" id="7886378">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886382">mmax</span>&nbsp;<span class="op" id="7886387">=</span>&nbsp;<span class="num" id="7886389">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7886392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7886395">for</span>&nbsp;<span class="ident" id="7886399">sd</span>&nbsp;<span class="op" id="7886402">:=</span>&nbsp;<span class="num" id="7886405">0.5</span><span class="op" id="7886408">;</span>&nbsp;<span class="ident" id="7886410">sd</span>&nbsp;<span class="op" id="7886413">&lt;</span>&nbsp;<span class="ident" id="7886415">sdmax</span><span class="op" id="7886420">;</span>&nbsp;<span class="ident" id="7886422">sd</span>&nbsp;<span class="op" id="7886425">*=</span>&nbsp;<span class="num" id="7886428">2</span>&nbsp;<span class="op" id="7886430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7886434">for</span>&nbsp;<span class="ident" id="7886438">m</span>&nbsp;<span class="op" id="7886440">:=</span>&nbsp;<span class="num" id="7886443">0.5</span><span class="op" id="7886446">;</span>&nbsp;<span class="ident" id="7886448">m</span>&nbsp;<span class="op" id="7886450">&lt;</span>&nbsp;<span class="ident" id="7886452">mmax</span><span class="op" id="7886456">;</span>&nbsp;<span class="ident" id="7886458">m</span>&nbsp;<span class="op" id="7886460">*=</span>&nbsp;<span class="num" id="7886463">2</span>&nbsp;<span class="op" id="7886465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7886470">for</span>&nbsp;<span class="ident" id="7886474">_</span><span class="op" id="7886475">,</span>&nbsp;<span class="ident" id="7886477">seed</span>&nbsp;<span class="op" id="7886482">:=</span>&nbsp;<span class="keyword" id="7886485">range</span>&nbsp;<span class="ident" id="7886491">testSeeds</span>&nbsp;<span class="op" id="7886501">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886507">testNormalDistribution</span><span class="op" id="7886529">(</span><span class="ident" id="7886530">t</span><span class="op" id="7886531">,</span>&nbsp;<span class="ident" id="7886533">numTestSamples</span><span class="op" id="7886547">,</span>&nbsp;<span class="ident" id="7886549">m</span><span class="op" id="7886550">,</span>&nbsp;<span class="ident" id="7886552">sd</span><span class="op" id="7886554">,</span>&nbsp;<span class="ident" id="7886556">seed</span><span class="op" id="7886560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7886566">if</span>&nbsp;<span class="ident" id="7886569">testing</span><span class="op" id="7886576">.</span><span class="ident" id="7886577">Short</span><span class="op" id="7886582">(</span><span class="op" id="7886583">)</span>&nbsp;<span class="op" id="7886585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7886592">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7886602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7886607">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7886611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7886614">}</span><br>
<span class="lineno"></span><span class="op" id="7886616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7886619">//</span><br>
<span class="lineno">150</span><span class="comment" id="7886622">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7886656">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7886660">func</span>&nbsp;<span class="ident" id="7886665">generateExponentialSamples</span><span class="op" id="7886691">(</span><span class="ident" id="7886692">nsamples</span>&nbsp;<span class="builtintype" id="7886701">int</span><span class="op" id="7886704">,</span>&nbsp;<span class="ident" id="7886706">rate</span>&nbsp;<span class="builtintype" id="7886711">float64</span><span class="op" id="7886718">,</span>&nbsp;<span class="ident" id="7886720">seed</span>&nbsp;<span class="ident" id="7886725">int64</span><span class="op" id="7886730">)</span>&nbsp;<span class="op" id="7886732">[</span><span class="op" id="7886733">]</span><span class="builtintype" id="7886734">float64</span>&nbsp;<span class="op" id="7886742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886745">r</span>&nbsp;<span class="op" id="7886747">:=</span>&nbsp;<span class="ident" id="7886750">New</span><span class="op" id="7886753">(</span><span class="ident" id="7886754">NewSource</span><span class="op" id="7886763">(</span><span class="ident" id="7886764">seed</span><span class="op" id="7886768">)</span><span class="op" id="7886769">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886772">samples</span>&nbsp;<span class="op" id="7886780">:=</span>&nbsp;<span class="builtinfunc" id="7886783">make</span><span class="op" id="7886787">(</span><span class="op" id="7886788">[</span><span class="op" id="7886789">]</span><span class="builtintype" id="7886790">float64</span><span class="op" id="7886797">,</span>&nbsp;<span class="ident" id="7886799">nsamples</span><span class="op" id="7886807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7886810">for</span>&nbsp;<span class="ident" id="7886814">i</span>&nbsp;<span class="op" id="7886816">:=</span>&nbsp;<span class="keyword" id="7886819">range</span>&nbsp;<span class="ident" id="7886825">samples</span>&nbsp;<span class="op" id="7886833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886837">samples</span><span class="op" id="7886844">[</span><span class="ident" id="7886845">i</span><span class="op" id="7886846">]</span>&nbsp;<span class="op" id="7886848">=</span>&nbsp;<span class="ident" id="7886850">r</span><span class="op" id="7886851">.</span><span class="ident" id="7886852">ExpFloat64</span><span class="op" id="7886862">(</span><span class="op" id="7886863">)</span>&nbsp;<span class="op" id="7886865">/</span>&nbsp;<span class="ident" id="7886867">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7886873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7886876">return</span>&nbsp;<span class="ident" id="7886883">samples</span><br>
<span class="lineno">160</span><span class="op" id="7886891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7886894">func</span>&nbsp;<span class="ident" id="7886899">testExponentialDistribution</span><span class="op" id="7886926">(</span><span class="ident" id="7886927">t</span>&nbsp;<span class="op" id="7886929">*</span><span class="ident" id="7886930">testing</span><span class="op" id="7886937">.</span><span class="ident" id="7886938">T</span><span class="op" id="7886939">,</span>&nbsp;<span class="ident" id="7886941">nsamples</span>&nbsp;<span class="builtintype" id="7886950">int</span><span class="op" id="7886953">,</span>&nbsp;<span class="ident" id="7886955">rate</span>&nbsp;<span class="builtintype" id="7886960">float64</span><span class="op" id="7886967">,</span>&nbsp;<span class="ident" id="7886969">seed</span>&nbsp;<span class="ident" id="7886974">int64</span><span class="op" id="7886979">)</span>&nbsp;<span class="op" id="7886981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7886984">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887063">mean</span>&nbsp;<span class="op" id="7887068">:=</span>&nbsp;<span class="num" id="7887071">1</span>&nbsp;<span class="op" id="7887073">/</span>&nbsp;<span class="ident" id="7887075">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887081">stddev</span>&nbsp;<span class="op" id="7887088">:=</span>&nbsp;<span class="ident" id="7887091">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887098">samples</span>&nbsp;<span class="op" id="7887106">:=</span>&nbsp;<span class="ident" id="7887109">generateExponentialSamples</span><span class="op" id="7887135">(</span><span class="ident" id="7887136">nsamples</span><span class="op" id="7887144">,</span>&nbsp;<span class="ident" id="7887146">rate</span><span class="op" id="7887150">,</span>&nbsp;<span class="ident" id="7887152">seed</span><span class="op" id="7887156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887159">errorScale</span>&nbsp;<span class="op" id="7887170">:=</span>&nbsp;<span class="ident" id="7887173">max</span><span class="op" id="7887176">(</span><span class="num" id="7887177">1.0</span><span class="op" id="7887180">,</span>&nbsp;<span class="num" id="7887182">1</span><span class="op" id="7887183">/</span><span class="ident" id="7887184">rate</span><span class="op" id="7887188">)</span>&nbsp;<span class="comment" id="7887190">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887236">expected</span>&nbsp;<span class="op" id="7887245">:=</span>&nbsp;<span class="op" id="7887248">&amp;</span><span class="ident" id="7887249">statsResults</span><span class="op" id="7887261">{</span><span class="ident" id="7887262">mean</span><span class="op" id="7887266">,</span>&nbsp;<span class="ident" id="7887268">stddev</span><span class="op" id="7887274">,</span>&nbsp;<span class="num" id="7887276">0.10</span>&nbsp;<span class="op" id="7887281">*</span>&nbsp;<span class="ident" id="7887283">errorScale</span><span class="op" id="7887293">,</span>&nbsp;<span class="num" id="7887295">0.20</span>&nbsp;<span class="op" id="7887300">*</span>&nbsp;<span class="ident" id="7887302">errorScale</span><span class="op" id="7887312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7887316">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887385">checkSampleDistribution</span><span class="op" id="7887408">(</span><span class="ident" id="7887409">t</span><span class="op" id="7887410">,</span>&nbsp;<span class="ident" id="7887412">samples</span><span class="op" id="7887419">,</span>&nbsp;<span class="ident" id="7887421">expected</span><span class="op" id="7887429">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7887433">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887508">checkSampleSliceDistributions</span><span class="op" id="7887537">(</span><span class="ident" id="7887538">t</span><span class="op" id="7887539">,</span>&nbsp;<span class="ident" id="7887541">samples</span><span class="op" id="7887548">,</span>&nbsp;<span class="num" id="7887550">2</span><span class="op" id="7887551">,</span>&nbsp;<span class="ident" id="7887553">expected</span><span class="op" id="7887561">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7887565">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887639">checkSampleSliceDistributions</span><span class="op" id="7887668">(</span><span class="ident" id="7887669">t</span><span class="op" id="7887670">,</span>&nbsp;<span class="ident" id="7887672">samples</span><span class="op" id="7887679">,</span>&nbsp;<span class="num" id="7887681">7</span><span class="op" id="7887682">,</span>&nbsp;<span class="ident" id="7887684">expected</span><span class="op" id="7887692">)</span><br>
<span class="lineno">180</span><span class="op" id="7887694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7887697">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7887714">func</span>&nbsp;<span class="ident" id="7887719">TestStandardExponentialValues</span><span class="op" id="7887748">(</span><span class="ident" id="7887749">t</span>&nbsp;<span class="op" id="7887751">*</span><span class="ident" id="7887752">testing</span><span class="op" id="7887759">.</span><span class="ident" id="7887760">T</span><span class="op" id="7887761">)</span>&nbsp;<span class="op" id="7887763">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7887766">for</span>&nbsp;<span class="ident" id="7887770">_</span><span class="op" id="7887771">,</span>&nbsp;<span class="ident" id="7887773">seed</span>&nbsp;<span class="op" id="7887778">:=</span>&nbsp;<span class="keyword" id="7887781">range</span>&nbsp;<span class="ident" id="7887787">testSeeds</span>&nbsp;<span class="op" id="7887797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887801">testExponentialDistribution</span><span class="op" id="7887828">(</span><span class="ident" id="7887829">t</span><span class="op" id="7887830">,</span>&nbsp;<span class="ident" id="7887832">numTestSamples</span><span class="op" id="7887846">,</span>&nbsp;<span class="num" id="7887848">1</span><span class="op" id="7887849">,</span>&nbsp;<span class="ident" id="7887851">seed</span><span class="op" id="7887855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7887858">}</span><br>
<span class="lineno"></span><span class="op" id="7887860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="7887863">func</span>&nbsp;<span class="ident" id="7887868">TestNonStandardExponentialValues</span><span class="op" id="7887900">(</span><span class="ident" id="7887901">t</span>&nbsp;<span class="op" id="7887903">*</span><span class="ident" id="7887904">testing</span><span class="op" id="7887911">.</span><span class="ident" id="7887912">T</span><span class="op" id="7887913">)</span>&nbsp;<span class="op" id="7887915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7887918">for</span>&nbsp;<span class="ident" id="7887922">rate</span>&nbsp;<span class="op" id="7887927">:=</span>&nbsp;<span class="num" id="7887930">0.05</span><span class="op" id="7887934">;</span>&nbsp;<span class="ident" id="7887936">rate</span>&nbsp;<span class="op" id="7887941">&lt;</span>&nbsp;<span class="num" id="7887943">10</span><span class="op" id="7887945">;</span>&nbsp;<span class="ident" id="7887947">rate</span>&nbsp;<span class="op" id="7887952">*=</span>&nbsp;<span class="num" id="7887955">2</span>&nbsp;<span class="op" id="7887957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7887961">for</span>&nbsp;<span class="ident" id="7887965">_</span><span class="op" id="7887966">,</span>&nbsp;<span class="ident" id="7887968">seed</span>&nbsp;<span class="op" id="7887973">:=</span>&nbsp;<span class="keyword" id="7887976">range</span>&nbsp;<span class="ident" id="7887982">testSeeds</span>&nbsp;<span class="op" id="7887992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887997">testExponentialDistribution</span><span class="op" id="7888024">(</span><span class="ident" id="7888025">t</span><span class="op" id="7888026">,</span>&nbsp;<span class="ident" id="7888028">numTestSamples</span><span class="op" id="7888042">,</span>&nbsp;<span class="ident" id="7888044">rate</span><span class="op" id="7888048">,</span>&nbsp;<span class="ident" id="7888050">seed</span><span class="op" id="7888054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7888059">if</span>&nbsp;<span class="ident" id="7888062">testing</span><span class="op" id="7888069">.</span><span class="ident" id="7888070">Short</span><span class="op" id="7888075">(</span><span class="op" id="7888076">)</span>&nbsp;<span class="op" id="7888078">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7888084">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888100">}</span><br>
<span class="lineno"></span><span class="op" id="7888102">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="7888105">//</span><br>
<span class="lineno"></span><span class="comment" id="7888108">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7888134">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="7888138">func</span>&nbsp;<span class="ident" id="7888143">initNorm</span><span class="op" id="7888151">(</span><span class="op" id="7888152">)</span>&nbsp;<span class="op" id="7888154">(</span><span class="ident" id="7888155">testKn</span>&nbsp;<span class="op" id="7888162">[</span><span class="op" id="7888163">]</span><span class="builtintype" id="7888164">uint32</span><span class="op" id="7888170">,</span>&nbsp;<span class="ident" id="7888172">testWn</span><span class="op" id="7888178">,</span>&nbsp;<span class="ident" id="7888180">testFn</span>&nbsp;<span class="op" id="7888187">[</span><span class="op" id="7888188">]</span><span class="builtintype" id="7888189">float32</span><span class="op" id="7888196">)</span>&nbsp;<span class="op" id="7888198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7888201">const</span>&nbsp;<span class="ident" id="7888207">m1</span>&nbsp;<span class="op" id="7888210">=</span>&nbsp;<span class="num" id="7888212">1</span>&nbsp;<span class="op" id="7888214">&lt;&lt;</span>&nbsp;<span class="num" id="7888217">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7888221">var</span>&nbsp;<span class="op" id="7888225">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888229">dn</span>&nbsp;<span class="builtintype" id="7888232">float64</span>&nbsp;<span class="op" id="7888240">=</span>&nbsp;<span class="ident" id="7888242">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888247">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888258">=</span>&nbsp;<span class="ident" id="7888260">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888265">vn</span>&nbsp;<span class="builtintype" id="7888268">float64</span>&nbsp;<span class="op" id="7888276">=</span>&nbsp;<span class="num" id="7888278">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888299">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888303">testKn</span>&nbsp;<span class="op" id="7888310">=</span>&nbsp;<span class="builtinfunc" id="7888312">make</span><span class="op" id="7888316">(</span><span class="op" id="7888317">[</span><span class="op" id="7888318">]</span><span class="builtintype" id="7888319">uint32</span><span class="op" id="7888325">,</span>&nbsp;<span class="num" id="7888327">128</span><span class="op" id="7888330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888333">testWn</span>&nbsp;<span class="op" id="7888340">=</span>&nbsp;<span class="builtinfunc" id="7888342">make</span><span class="op" id="7888346">(</span><span class="op" id="7888347">[</span><span class="op" id="7888348">]</span><span class="builtintype" id="7888349">float32</span><span class="op" id="7888356">,</span>&nbsp;<span class="num" id="7888358">128</span><span class="op" id="7888361">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888364">testFn</span>&nbsp;<span class="op" id="7888371">=</span>&nbsp;<span class="builtinfunc" id="7888373">make</span><span class="op" id="7888377">(</span><span class="op" id="7888378">[</span><span class="op" id="7888379">]</span><span class="builtintype" id="7888380">float32</span><span class="op" id="7888387">,</span>&nbsp;<span class="num" id="7888389">128</span><span class="op" id="7888392">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888396">q</span>&nbsp;<span class="op" id="7888398">:=</span>&nbsp;<span class="ident" id="7888401">vn</span>&nbsp;<span class="op" id="7888404">/</span>&nbsp;<span class="ident" id="7888406">math</span><span class="op" id="7888410">.</span><span class="ident" id="7888411">Exp</span><span class="op" id="7888414">(</span><span class="op" id="7888415">-</span><span class="num" id="7888416">0.5</span><span class="op" id="7888419">*</span><span class="ident" id="7888420">dn</span><span class="op" id="7888422">*</span><span class="ident" id="7888423">dn</span><span class="op" id="7888425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888428">testKn</span><span class="op" id="7888434">[</span><span class="num" id="7888435">0</span><span class="op" id="7888436">]</span>&nbsp;<span class="op" id="7888438">=</span>&nbsp;<span class="builtintype" id="7888440">uint32</span><span class="op" id="7888446">(</span><span class="op" id="7888447">(</span><span class="ident" id="7888448">dn</span>&nbsp;<span class="op" id="7888451">/</span>&nbsp;<span class="ident" id="7888453">q</span><span class="op" id="7888454">)</span>&nbsp;<span class="op" id="7888456">*</span>&nbsp;<span class="ident" id="7888458">m1</span><span class="op" id="7888460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888463">testKn</span><span class="op" id="7888469">[</span><span class="num" id="7888470">1</span><span class="op" id="7888471">]</span>&nbsp;<span class="op" id="7888473">=</span>&nbsp;<span class="num" id="7888475">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888478">testWn</span><span class="op" id="7888484">[</span><span class="num" id="7888485">0</span><span class="op" id="7888486">]</span>&nbsp;<span class="op" id="7888488">=</span>&nbsp;<span class="builtintype" id="7888490">float32</span><span class="op" id="7888497">(</span><span class="ident" id="7888498">q</span>&nbsp;<span class="op" id="7888500">/</span>&nbsp;<span class="ident" id="7888502">m1</span><span class="op" id="7888504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888507">testWn</span><span class="op" id="7888513">[</span><span class="num" id="7888514">127</span><span class="op" id="7888517">]</span>&nbsp;<span class="op" id="7888519">=</span>&nbsp;<span class="builtintype" id="7888521">float32</span><span class="op" id="7888528">(</span><span class="ident" id="7888529">dn</span>&nbsp;<span class="op" id="7888532">/</span>&nbsp;<span class="ident" id="7888534">m1</span><span class="op" id="7888536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888539">testFn</span><span class="op" id="7888545">[</span><span class="num" id="7888546">0</span><span class="op" id="7888547">]</span>&nbsp;<span class="op" id="7888549">=</span>&nbsp;<span class="num" id="7888551">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888556">testFn</span><span class="op" id="7888562">[</span><span class="num" id="7888563">127</span><span class="op" id="7888566">]</span>&nbsp;<span class="op" id="7888568">=</span>&nbsp;<span class="builtintype" id="7888570">float32</span><span class="op" id="7888577">(</span><span class="ident" id="7888578">math</span><span class="op" id="7888582">.</span><span class="ident" id="7888583">Exp</span><span class="op" id="7888586">(</span><span class="op" id="7888587">-</span><span class="num" id="7888588">0.5</span>&nbsp;<span class="op" id="7888592">*</span>&nbsp;<span class="ident" id="7888594">dn</span>&nbsp;<span class="op" id="7888597">*</span>&nbsp;<span class="ident" id="7888599">dn</span><span class="op" id="7888601">)</span><span class="op" id="7888602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7888605">for</span>&nbsp;<span class="ident" id="7888609">i</span>&nbsp;<span class="op" id="7888611">:=</span>&nbsp;<span class="num" id="7888614">126</span><span class="op" id="7888617">;</span>&nbsp;<span class="ident" id="7888619">i</span>&nbsp;<span class="op" id="7888621">&gt;=</span>&nbsp;<span class="num" id="7888624">1</span><span class="op" id="7888625">;</span>&nbsp;<span class="ident" id="7888627">i</span><span class="op" id="7888628">--</span>&nbsp;<span class="op" id="7888631">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888635">dn</span>&nbsp;<span class="op" id="7888638">=</span>&nbsp;<span class="ident" id="7888640">math</span><span class="op" id="7888644">.</span><span class="ident" id="7888645">Sqrt</span><span class="op" id="7888649">(</span><span class="op" id="7888650">-</span><span class="num" id="7888651">2.0</span>&nbsp;<span class="op" id="7888655">*</span>&nbsp;<span class="ident" id="7888657">math</span><span class="op" id="7888661">.</span><span class="ident" id="7888662">Log</span><span class="op" id="7888665">(</span><span class="ident" id="7888666">vn</span><span class="op" id="7888668">/</span><span class="ident" id="7888669">dn</span><span class="op" id="7888671">+</span><span class="ident" id="7888672">math</span><span class="op" id="7888676">.</span><span class="ident" id="7888677">Exp</span><span class="op" id="7888680">(</span><span class="op" id="7888681">-</span><span class="num" id="7888682">0.5</span><span class="op" id="7888685">*</span><span class="ident" id="7888686">dn</span><span class="op" id="7888688">*</span><span class="ident" id="7888689">dn</span><span class="op" id="7888691">)</span><span class="op" id="7888692">)</span><span class="op" id="7888693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888697">testKn</span><span class="op" id="7888703">[</span><span class="ident" id="7888704">i</span><span class="op" id="7888705">+</span><span class="num" id="7888706">1</span><span class="op" id="7888707">]</span>&nbsp;<span class="op" id="7888709">=</span>&nbsp;<span class="builtintype" id="7888711">uint32</span><span class="op" id="7888717">(</span><span class="op" id="7888718">(</span><span class="ident" id="7888719">dn</span>&nbsp;<span class="op" id="7888722">/</span>&nbsp;<span class="ident" id="7888724">tn</span><span class="op" id="7888726">)</span>&nbsp;<span class="op" id="7888728">*</span>&nbsp;<span class="ident" id="7888730">m1</span><span class="op" id="7888732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888736">tn</span>&nbsp;<span class="op" id="7888739">=</span>&nbsp;<span class="ident" id="7888741">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888746">testFn</span><span class="op" id="7888752">[</span><span class="ident" id="7888753">i</span><span class="op" id="7888754">]</span>&nbsp;<span class="op" id="7888756">=</span>&nbsp;<span class="builtintype" id="7888758">float32</span><span class="op" id="7888765">(</span><span class="ident" id="7888766">math</span><span class="op" id="7888770">.</span><span class="ident" id="7888771">Exp</span><span class="op" id="7888774">(</span><span class="op" id="7888775">-</span><span class="num" id="7888776">0.5</span>&nbsp;<span class="op" id="7888780">*</span>&nbsp;<span class="ident" id="7888782">dn</span>&nbsp;<span class="op" id="7888785">*</span>&nbsp;<span class="ident" id="7888787">dn</span><span class="op" id="7888789">)</span><span class="op" id="7888790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888794">testWn</span><span class="op" id="7888800">[</span><span class="ident" id="7888801">i</span><span class="op" id="7888802">]</span>&nbsp;<span class="op" id="7888804">=</span>&nbsp;<span class="builtintype" id="7888806">float32</span><span class="op" id="7888813">(</span><span class="ident" id="7888814">dn</span>&nbsp;<span class="op" id="7888817">/</span>&nbsp;<span class="ident" id="7888819">m1</span><span class="op" id="7888821">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7888827">return</span><br>
<span class="lineno"></span><span class="op" id="7888834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7888837">func</span>&nbsp;<span class="ident" id="7888842">initExp</span><span class="op" id="7888849">(</span><span class="op" id="7888850">)</span>&nbsp;<span class="op" id="7888852">(</span><span class="ident" id="7888853">testKe</span>&nbsp;<span class="op" id="7888860">[</span><span class="op" id="7888861">]</span><span class="builtintype" id="7888862">uint32</span><span class="op" id="7888868">,</span>&nbsp;<span class="ident" id="7888870">testWe</span><span class="op" id="7888876">,</span>&nbsp;<span class="ident" id="7888878">testFe</span>&nbsp;<span class="op" id="7888885">[</span><span class="op" id="7888886">]</span><span class="builtintype" id="7888887">float32</span><span class="op" id="7888894">)</span>&nbsp;<span class="op" id="7888896">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7888899">const</span>&nbsp;<span class="ident" id="7888905">m2</span>&nbsp;<span class="op" id="7888908">=</span>&nbsp;<span class="num" id="7888910">1</span>&nbsp;<span class="op" id="7888912">&lt;&lt;</span>&nbsp;<span class="num" id="7888915">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7888919">var</span>&nbsp;<span class="op" id="7888923">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888927">de</span>&nbsp;<span class="builtintype" id="7888930">float64</span>&nbsp;<span class="op" id="7888938">=</span>&nbsp;<span class="ident" id="7888940">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888945">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888956">=</span>&nbsp;<span class="ident" id="7888958">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888963">ve</span>&nbsp;<span class="builtintype" id="7888966">float64</span>&nbsp;<span class="op" id="7888974">=</span>&nbsp;<span class="num" id="7888976">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889002">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889006">testKe</span>&nbsp;<span class="op" id="7889013">=</span>&nbsp;<span class="builtinfunc" id="7889015">make</span><span class="op" id="7889019">(</span><span class="op" id="7889020">[</span><span class="op" id="7889021">]</span><span class="builtintype" id="7889022">uint32</span><span class="op" id="7889028">,</span>&nbsp;<span class="num" id="7889030">256</span><span class="op" id="7889033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889036">testWe</span>&nbsp;<span class="op" id="7889043">=</span>&nbsp;<span class="builtinfunc" id="7889045">make</span><span class="op" id="7889049">(</span><span class="op" id="7889050">[</span><span class="op" id="7889051">]</span><span class="builtintype" id="7889052">float32</span><span class="op" id="7889059">,</span>&nbsp;<span class="num" id="7889061">256</span><span class="op" id="7889064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889067">testFe</span>&nbsp;<span class="op" id="7889074">=</span>&nbsp;<span class="builtinfunc" id="7889076">make</span><span class="op" id="7889080">(</span><span class="op" id="7889081">[</span><span class="op" id="7889082">]</span><span class="builtintype" id="7889083">float32</span><span class="op" id="7889090">,</span>&nbsp;<span class="num" id="7889092">256</span><span class="op" id="7889095">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889099">q</span>&nbsp;<span class="op" id="7889101">:=</span>&nbsp;<span class="ident" id="7889104">ve</span>&nbsp;<span class="op" id="7889107">/</span>&nbsp;<span class="ident" id="7889109">math</span><span class="op" id="7889113">.</span><span class="ident" id="7889114">Exp</span><span class="op" id="7889117">(</span><span class="op" id="7889118">-</span><span class="ident" id="7889119">de</span><span class="op" id="7889121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889124">testKe</span><span class="op" id="7889130">[</span><span class="num" id="7889131">0</span><span class="op" id="7889132">]</span>&nbsp;<span class="op" id="7889134">=</span>&nbsp;<span class="builtintype" id="7889136">uint32</span><span class="op" id="7889142">(</span><span class="op" id="7889143">(</span><span class="ident" id="7889144">de</span>&nbsp;<span class="op" id="7889147">/</span>&nbsp;<span class="ident" id="7889149">q</span><span class="op" id="7889150">)</span>&nbsp;<span class="op" id="7889152">*</span>&nbsp;<span class="ident" id="7889154">m2</span><span class="op" id="7889156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889159">testKe</span><span class="op" id="7889165">[</span><span class="num" id="7889166">1</span><span class="op" id="7889167">]</span>&nbsp;<span class="op" id="7889169">=</span>&nbsp;<span class="num" id="7889171">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889174">testWe</span><span class="op" id="7889180">[</span><span class="num" id="7889181">0</span><span class="op" id="7889182">]</span>&nbsp;<span class="op" id="7889184">=</span>&nbsp;<span class="builtintype" id="7889186">float32</span><span class="op" id="7889193">(</span><span class="ident" id="7889194">q</span>&nbsp;<span class="op" id="7889196">/</span>&nbsp;<span class="ident" id="7889198">m2</span><span class="op" id="7889200">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889203">testWe</span><span class="op" id="7889209">[</span><span class="num" id="7889210">255</span><span class="op" id="7889213">]</span>&nbsp;<span class="op" id="7889215">=</span>&nbsp;<span class="builtintype" id="7889217">float32</span><span class="op" id="7889224">(</span><span class="ident" id="7889225">de</span>&nbsp;<span class="op" id="7889228">/</span>&nbsp;<span class="ident" id="7889230">m2</span><span class="op" id="7889232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889235">testFe</span><span class="op" id="7889241">[</span><span class="num" id="7889242">0</span><span class="op" id="7889243">]</span>&nbsp;<span class="op" id="7889245">=</span>&nbsp;<span class="num" id="7889247">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889252">testFe</span><span class="op" id="7889258">[</span><span class="num" id="7889259">255</span><span class="op" id="7889262">]</span>&nbsp;<span class="op" id="7889264">=</span>&nbsp;<span class="builtintype" id="7889266">float32</span><span class="op" id="7889273">(</span><span class="ident" id="7889274">math</span><span class="op" id="7889278">.</span><span class="ident" id="7889279">Exp</span><span class="op" id="7889282">(</span><span class="op" id="7889283">-</span><span class="ident" id="7889284">de</span><span class="op" id="7889286">)</span><span class="op" id="7889287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7889290">for</span>&nbsp;<span class="ident" id="7889294">i</span>&nbsp;<span class="op" id="7889296">:=</span>&nbsp;<span class="num" id="7889299">254</span><span class="op" id="7889302">;</span>&nbsp;<span class="ident" id="7889304">i</span>&nbsp;<span class="op" id="7889306">&gt;=</span>&nbsp;<span class="num" id="7889309">1</span><span class="op" id="7889310">;</span>&nbsp;<span class="ident" id="7889312">i</span><span class="op" id="7889313">--</span>&nbsp;<span class="op" id="7889316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889320">de</span>&nbsp;<span class="op" id="7889323">=</span>&nbsp;<span class="op" id="7889325">-</span><span class="ident" id="7889326">math</span><span class="op" id="7889330">.</span><span class="ident" id="7889331">Log</span><span class="op" id="7889334">(</span><span class="ident" id="7889335">ve</span><span class="op" id="7889337">/</span><span class="ident" id="7889338">de</span>&nbsp;<span class="op" id="7889341">+</span>&nbsp;<span class="ident" id="7889343">math</span><span class="op" id="7889347">.</span><span class="ident" id="7889348">Exp</span><span class="op" id="7889351">(</span><span class="op" id="7889352">-</span><span class="ident" id="7889353">de</span><span class="op" id="7889355">)</span><span class="op" id="7889356">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889360">testKe</span><span class="op" id="7889366">[</span><span class="ident" id="7889367">i</span><span class="op" id="7889368">+</span><span class="num" id="7889369">1</span><span class="op" id="7889370">]</span>&nbsp;<span class="op" id="7889372">=</span>&nbsp;<span class="builtintype" id="7889374">uint32</span><span class="op" id="7889380">(</span><span class="op" id="7889381">(</span><span class="ident" id="7889382">de</span>&nbsp;<span class="op" id="7889385">/</span>&nbsp;<span class="ident" id="7889387">te</span><span class="op" id="7889389">)</span>&nbsp;<span class="op" id="7889391">*</span>&nbsp;<span class="ident" id="7889393">m2</span><span class="op" id="7889395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889399">te</span>&nbsp;<span class="op" id="7889402">=</span>&nbsp;<span class="ident" id="7889404">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889409">testFe</span><span class="op" id="7889415">[</span><span class="ident" id="7889416">i</span><span class="op" id="7889417">]</span>&nbsp;<span class="op" id="7889419">=</span>&nbsp;<span class="builtintype" id="7889421">float32</span><span class="op" id="7889428">(</span><span class="ident" id="7889429">math</span><span class="op" id="7889433">.</span><span class="ident" id="7889434">Exp</span><span class="op" id="7889437">(</span><span class="op" id="7889438">-</span><span class="ident" id="7889439">de</span><span class="op" id="7889441">)</span><span class="op" id="7889442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889446">testWe</span><span class="op" id="7889452">[</span><span class="ident" id="7889453">i</span><span class="op" id="7889454">]</span>&nbsp;<span class="op" id="7889456">=</span>&nbsp;<span class="builtintype" id="7889458">float32</span><span class="op" id="7889465">(</span><span class="ident" id="7889466">de</span>&nbsp;<span class="op" id="7889469">/</span>&nbsp;<span class="ident" id="7889471">m2</span><span class="op" id="7889473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889476">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7889479">return</span><br>
<span class="lineno"></span><span class="op" id="7889486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7889489">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7889557">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="7889621">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7889639">func</span>&nbsp;<span class="ident" id="7889644">compareUint32Slices</span><span class="op" id="7889663">(</span><span class="ident" id="7889664">s1</span><span class="op" id="7889666">,</span>&nbsp;<span class="ident" id="7889668">s2</span>&nbsp;<span class="op" id="7889671">[</span><span class="op" id="7889672">]</span><span class="builtintype" id="7889673">uint32</span><span class="op" id="7889679">)</span>&nbsp;<span class="builtintype" id="7889681">int</span>&nbsp;<span class="op" id="7889685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7889688">if</span>&nbsp;<span class="builtinfunc" id="7889691">len</span><span class="op" id="7889694">(</span><span class="ident" id="7889695">s1</span><span class="op" id="7889697">)</span>&nbsp;<span class="op" id="7889699">!=</span>&nbsp;<span class="builtinfunc" id="7889702">len</span><span class="op" id="7889705">(</span><span class="ident" id="7889706">s2</span><span class="op" id="7889708">)</span>&nbsp;<span class="op" id="7889710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7889714">if</span>&nbsp;<span class="builtinfunc" id="7889717">len</span><span class="op" id="7889720">(</span><span class="ident" id="7889721">s1</span><span class="op" id="7889723">)</span>&nbsp;<span class="op" id="7889725">&gt;</span>&nbsp;<span class="builtinfunc" id="7889727">len</span><span class="op" id="7889730">(</span><span class="ident" id="7889731">s2</span><span class="op" id="7889733">)</span>&nbsp;<span class="op" id="7889735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7889740">return</span>&nbsp;<span class="builtinfunc" id="7889747">len</span><span class="op" id="7889750">(</span><span class="ident" id="7889751">s2</span><span class="op" id="7889753">)</span>&nbsp;<span class="op" id="7889755">+</span>&nbsp;<span class="num" id="7889757">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7889765">return</span>&nbsp;<span class="builtinfunc" id="7889772">len</span><span class="op" id="7889775">(</span><span class="ident" id="7889776">s1</span><span class="op" id="7889778">)</span>&nbsp;<span class="op" id="7889780">+</span>&nbsp;<span class="num" id="7889782">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7889788">for</span>&nbsp;<span class="ident" id="7889792">i</span>&nbsp;<span class="op" id="7889794">:=</span>&nbsp;<span class="keyword" id="7889797">range</span>&nbsp;<span class="ident" id="7889803">s1</span>&nbsp;<span class="op" id="7889806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7889810">if</span>&nbsp;<span class="ident" id="7889813">s1</span><span class="op" id="7889815">[</span><span class="ident" id="7889816">i</span><span class="op" id="7889817">]</span>&nbsp;<span class="op" id="7889819">!=</span>&nbsp;<span class="ident" id="7889822">s2</span><span class="op" id="7889824">[</span><span class="ident" id="7889825">i</span><span class="op" id="7889826">]</span>&nbsp;<span class="op" id="7889828">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7889833">return</span>&nbsp;<span class="ident" id="7889840">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7889850">return</span>&nbsp;<span class="op" id="7889857">-</span><span class="num" id="7889858">1</span><br>
<span class="lineno"></span><span class="op" id="7889860">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="7889863">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7889932">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="7889996">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7890014">func</span>&nbsp;<span class="ident" id="7890019">compareFloat32Slices</span><span class="op" id="7890039">(</span><span class="ident" id="7890040">s1</span><span class="op" id="7890042">,</span>&nbsp;<span class="ident" id="7890044">s2</span>&nbsp;<span class="op" id="7890047">[</span><span class="op" id="7890048">]</span><span class="builtintype" id="7890049">float32</span><span class="op" id="7890056">)</span>&nbsp;<span class="builtintype" id="7890058">int</span>&nbsp;<span class="op" id="7890062">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890065">if</span>&nbsp;<span class="builtinfunc" id="7890068">len</span><span class="op" id="7890071">(</span><span class="ident" id="7890072">s1</span><span class="op" id="7890074">)</span>&nbsp;<span class="op" id="7890076">!=</span>&nbsp;<span class="builtinfunc" id="7890079">len</span><span class="op" id="7890082">(</span><span class="ident" id="7890083">s2</span><span class="op" id="7890085">)</span>&nbsp;<span class="op" id="7890087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890091">if</span>&nbsp;<span class="builtinfunc" id="7890094">len</span><span class="op" id="7890097">(</span><span class="ident" id="7890098">s1</span><span class="op" id="7890100">)</span>&nbsp;<span class="op" id="7890102">&gt;</span>&nbsp;<span class="builtinfunc" id="7890104">len</span><span class="op" id="7890107">(</span><span class="ident" id="7890108">s2</span><span class="op" id="7890110">)</span>&nbsp;<span class="op" id="7890112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890117">return</span>&nbsp;<span class="builtinfunc" id="7890124">len</span><span class="op" id="7890127">(</span><span class="ident" id="7890128">s2</span><span class="op" id="7890130">)</span>&nbsp;<span class="op" id="7890132">+</span>&nbsp;<span class="num" id="7890134">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890142">return</span>&nbsp;<span class="builtinfunc" id="7890149">len</span><span class="op" id="7890152">(</span><span class="ident" id="7890153">s1</span><span class="op" id="7890155">)</span>&nbsp;<span class="op" id="7890157">+</span>&nbsp;<span class="num" id="7890159">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890165">for</span>&nbsp;<span class="ident" id="7890169">i</span>&nbsp;<span class="op" id="7890171">:=</span>&nbsp;<span class="keyword" id="7890174">range</span>&nbsp;<span class="ident" id="7890180">s1</span>&nbsp;<span class="op" id="7890183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890187">if</span>&nbsp;<span class="op" id="7890190">!</span><span class="ident" id="7890191">nearEqual</span><span class="op" id="7890200">(</span><span class="builtintype" id="7890201">float64</span><span class="op" id="7890208">(</span><span class="ident" id="7890209">s1</span><span class="op" id="7890211">[</span><span class="ident" id="7890212">i</span><span class="op" id="7890213">]</span><span class="op" id="7890214">)</span><span class="op" id="7890215">,</span>&nbsp;<span class="builtintype" id="7890217">float64</span><span class="op" id="7890224">(</span><span class="ident" id="7890225">s2</span><span class="op" id="7890227">[</span><span class="ident" id="7890228">i</span><span class="op" id="7890229">]</span><span class="op" id="7890230">)</span><span class="op" id="7890231">,</span>&nbsp;<span class="num" id="7890233">0</span><span class="op" id="7890234">,</span>&nbsp;<span class="num" id="7890236">1e-7</span><span class="op" id="7890240">)</span>&nbsp;<span class="op" id="7890242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890247">return</span>&nbsp;<span class="ident" id="7890254">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890258">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890264">return</span>&nbsp;<span class="op" id="7890271">-</span><span class="num" id="7890272">1</span><br>
<span class="lineno"></span><span class="op" id="7890274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7890277">func</span>&nbsp;<span class="ident" id="7890282">TestNormTables</span><span class="op" id="7890296">(</span><span class="ident" id="7890297">t</span>&nbsp;<span class="op" id="7890299">*</span><span class="ident" id="7890300">testing</span><span class="op" id="7890307">.</span><span class="ident" id="7890308">T</span><span class="op" id="7890309">)</span>&nbsp;<span class="op" id="7890311">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890314">testKn</span><span class="op" id="7890320">,</span>&nbsp;<span class="ident" id="7890322">testWn</span><span class="op" id="7890328">,</span>&nbsp;<span class="ident" id="7890330">testFn</span>&nbsp;<span class="op" id="7890337">:=</span>&nbsp;<span class="ident" id="7890340">initNorm</span><span class="op" id="7890348">(</span><span class="op" id="7890349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890352">if</span>&nbsp;<span class="ident" id="7890355">i</span>&nbsp;<span class="op" id="7890357">:=</span>&nbsp;<span class="ident" id="7890360">compareUint32Slices</span><span class="op" id="7890379">(</span><span class="ident" id="7890380">kn</span><span class="op" id="7890382">[</span><span class="num" id="7890383">0</span><span class="op" id="7890384">:</span><span class="op" id="7890385">]</span><span class="op" id="7890386">,</span>&nbsp;<span class="ident" id="7890388">testKn</span><span class="op" id="7890394">)</span><span class="op" id="7890395">;</span>&nbsp;<span class="ident" id="7890397">i</span>&nbsp;<span class="op" id="7890399">&gt;=</span>&nbsp;<span class="num" id="7890402">0</span>&nbsp;<span class="op" id="7890404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890408">t</span><span class="op" id="7890409">.</span><span class="ident" id="7890410">Errorf</span><span class="op" id="7890416">(</span><span class="string" id="7890417">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7890453">,</span>&nbsp;<span class="ident" id="7890455">i</span><span class="op" id="7890456">,</span>&nbsp;<span class="ident" id="7890458">kn</span><span class="op" id="7890460">[</span><span class="ident" id="7890461">i</span><span class="op" id="7890462">]</span><span class="op" id="7890463">,</span>&nbsp;<span class="ident" id="7890465">testKn</span><span class="op" id="7890471">[</span><span class="ident" id="7890472">i</span><span class="op" id="7890473">]</span><span class="op" id="7890474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890480">if</span>&nbsp;<span class="ident" id="7890483">i</span>&nbsp;<span class="op" id="7890485">:=</span>&nbsp;<span class="ident" id="7890488">compareFloat32Slices</span><span class="op" id="7890508">(</span><span class="ident" id="7890509">wn</span><span class="op" id="7890511">[</span><span class="num" id="7890512">0</span><span class="op" id="7890513">:</span><span class="op" id="7890514">]</span><span class="op" id="7890515">,</span>&nbsp;<span class="ident" id="7890517">testWn</span><span class="op" id="7890523">)</span><span class="op" id="7890524">;</span>&nbsp;<span class="ident" id="7890526">i</span>&nbsp;<span class="op" id="7890528">&gt;=</span>&nbsp;<span class="num" id="7890531">0</span>&nbsp;<span class="op" id="7890533">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890537">t</span><span class="op" id="7890538">.</span><span class="ident" id="7890539">Errorf</span><span class="op" id="7890545">(</span><span class="string" id="7890546">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7890582">,</span>&nbsp;<span class="ident" id="7890584">i</span><span class="op" id="7890585">,</span>&nbsp;<span class="ident" id="7890587">wn</span><span class="op" id="7890589">[</span><span class="ident" id="7890590">i</span><span class="op" id="7890591">]</span><span class="op" id="7890592">,</span>&nbsp;<span class="ident" id="7890594">testWn</span><span class="op" id="7890600">[</span><span class="ident" id="7890601">i</span><span class="op" id="7890602">]</span><span class="op" id="7890603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890609">if</span>&nbsp;<span class="ident" id="7890612">i</span>&nbsp;<span class="op" id="7890614">:=</span>&nbsp;<span class="ident" id="7890617">compareFloat32Slices</span><span class="op" id="7890637">(</span><span class="ident" id="7890638">fn</span><span class="op" id="7890640">[</span><span class="num" id="7890641">0</span><span class="op" id="7890642">:</span><span class="op" id="7890643">]</span><span class="op" id="7890644">,</span>&nbsp;<span class="ident" id="7890646">testFn</span><span class="op" id="7890652">)</span><span class="op" id="7890653">;</span>&nbsp;<span class="ident" id="7890655">i</span>&nbsp;<span class="op" id="7890657">&gt;=</span>&nbsp;<span class="num" id="7890660">0</span>&nbsp;<span class="op" id="7890662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890666">t</span><span class="op" id="7890667">.</span><span class="ident" id="7890668">Errorf</span><span class="op" id="7890674">(</span><span class="string" id="7890675">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7890711">,</span>&nbsp;<span class="ident" id="7890713">i</span><span class="op" id="7890714">,</span>&nbsp;<span class="ident" id="7890716">fn</span><span class="op" id="7890718">[</span><span class="ident" id="7890719">i</span><span class="op" id="7890720">]</span><span class="op" id="7890721">,</span>&nbsp;<span class="ident" id="7890723">testFn</span><span class="op" id="7890729">[</span><span class="ident" id="7890730">i</span><span class="op" id="7890731">]</span><span class="op" id="7890732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890735">}</span><br>
<span class="lineno">310</span><span class="op" id="7890737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7890740">func</span>&nbsp;<span class="ident" id="7890745">TestExpTables</span><span class="op" id="7890758">(</span><span class="ident" id="7890759">t</span>&nbsp;<span class="op" id="7890761">*</span><span class="ident" id="7890762">testing</span><span class="op" id="7890769">.</span><span class="ident" id="7890770">T</span><span class="op" id="7890771">)</span>&nbsp;<span class="op" id="7890773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890776">testKe</span><span class="op" id="7890782">,</span>&nbsp;<span class="ident" id="7890784">testWe</span><span class="op" id="7890790">,</span>&nbsp;<span class="ident" id="7890792">testFe</span>&nbsp;<span class="op" id="7890799">:=</span>&nbsp;<span class="ident" id="7890802">initExp</span><span class="op" id="7890809">(</span><span class="op" id="7890810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890813">if</span>&nbsp;<span class="ident" id="7890816">i</span>&nbsp;<span class="op" id="7890818">:=</span>&nbsp;<span class="ident" id="7890821">compareUint32Slices</span><span class="op" id="7890840">(</span><span class="ident" id="7890841">ke</span><span class="op" id="7890843">[</span><span class="num" id="7890844">0</span><span class="op" id="7890845">:</span><span class="op" id="7890846">]</span><span class="op" id="7890847">,</span>&nbsp;<span class="ident" id="7890849">testKe</span><span class="op" id="7890855">)</span><span class="op" id="7890856">;</span>&nbsp;<span class="ident" id="7890858">i</span>&nbsp;<span class="op" id="7890860">&gt;=</span>&nbsp;<span class="num" id="7890863">0</span>&nbsp;<span class="op" id="7890865">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890869">t</span><span class="op" id="7890870">.</span><span class="ident" id="7890871">Errorf</span><span class="op" id="7890877">(</span><span class="string" id="7890878">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7890914">,</span>&nbsp;<span class="ident" id="7890916">i</span><span class="op" id="7890917">,</span>&nbsp;<span class="ident" id="7890919">ke</span><span class="op" id="7890921">[</span><span class="ident" id="7890922">i</span><span class="op" id="7890923">]</span><span class="op" id="7890924">,</span>&nbsp;<span class="ident" id="7890926">testKe</span><span class="op" id="7890932">[</span><span class="ident" id="7890933">i</span><span class="op" id="7890934">]</span><span class="op" id="7890935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7890941">if</span>&nbsp;<span class="ident" id="7890944">i</span>&nbsp;<span class="op" id="7890946">:=</span>&nbsp;<span class="ident" id="7890949">compareFloat32Slices</span><span class="op" id="7890969">(</span><span class="ident" id="7890970">we</span><span class="op" id="7890972">[</span><span class="num" id="7890973">0</span><span class="op" id="7890974">:</span><span class="op" id="7890975">]</span><span class="op" id="7890976">,</span>&nbsp;<span class="ident" id="7890978">testWe</span><span class="op" id="7890984">)</span><span class="op" id="7890985">;</span>&nbsp;<span class="ident" id="7890987">i</span>&nbsp;<span class="op" id="7890989">&gt;=</span>&nbsp;<span class="num" id="7890992">0</span>&nbsp;<span class="op" id="7890994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890998">t</span><span class="op" id="7890999">.</span><span class="ident" id="7891000">Errorf</span><span class="op" id="7891006">(</span><span class="string" id="7891007">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7891043">,</span>&nbsp;<span class="ident" id="7891045">i</span><span class="op" id="7891046">,</span>&nbsp;<span class="ident" id="7891048">we</span><span class="op" id="7891050">[</span><span class="ident" id="7891051">i</span><span class="op" id="7891052">]</span><span class="op" id="7891053">,</span>&nbsp;<span class="ident" id="7891055">testWe</span><span class="op" id="7891061">[</span><span class="ident" id="7891062">i</span><span class="op" id="7891063">]</span><span class="op" id="7891064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891067">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7891070">if</span>&nbsp;<span class="ident" id="7891073">i</span>&nbsp;<span class="op" id="7891075">:=</span>&nbsp;<span class="ident" id="7891078">compareFloat32Slices</span><span class="op" id="7891098">(</span><span class="ident" id="7891099">fe</span><span class="op" id="7891101">[</span><span class="num" id="7891102">0</span><span class="op" id="7891103">:</span><span class="op" id="7891104">]</span><span class="op" id="7891105">,</span>&nbsp;<span class="ident" id="7891107">testFe</span><span class="op" id="7891113">)</span><span class="op" id="7891114">;</span>&nbsp;<span class="ident" id="7891116">i</span>&nbsp;<span class="op" id="7891118">&gt;=</span>&nbsp;<span class="num" id="7891121">0</span>&nbsp;<span class="op" id="7891123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891127">t</span><span class="op" id="7891128">.</span><span class="ident" id="7891129">Errorf</span><span class="op" id="7891135">(</span><span class="string" id="7891136">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7891172">,</span>&nbsp;<span class="ident" id="7891174">i</span><span class="op" id="7891175">,</span>&nbsp;<span class="ident" id="7891177">fe</span><span class="op" id="7891179">[</span><span class="ident" id="7891180">i</span><span class="op" id="7891181">]</span><span class="op" id="7891182">,</span>&nbsp;<span class="ident" id="7891184">testFe</span><span class="op" id="7891190">[</span><span class="ident" id="7891191">i</span><span class="op" id="7891192">]</span><span class="op" id="7891193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891196">}</span><br>
<span class="lineno"></span><span class="op" id="7891198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="7891201">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="7891273">func</span>&nbsp;<span class="ident" id="7891278">TestFloat32</span><span class="op" id="7891289">(</span><span class="ident" id="7891290">t</span>&nbsp;<span class="op" id="7891292">*</span><span class="ident" id="7891293">testing</span><span class="op" id="7891300">.</span><span class="ident" id="7891301">T</span><span class="op" id="7891302">)</span>&nbsp;<span class="op" id="7891304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891307">r</span>&nbsp;<span class="op" id="7891309">:=</span>&nbsp;<span class="ident" id="7891312">New</span><span class="op" id="7891315">(</span><span class="ident" id="7891316">NewSource</span><span class="op" id="7891325">(</span><span class="num" id="7891326">1</span><span class="op" id="7891327">)</span><span class="op" id="7891328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7891331">for</span>&nbsp;<span class="ident" id="7891335">ct</span>&nbsp;<span class="op" id="7891338">:=</span>&nbsp;<span class="num" id="7891341">0</span><span class="op" id="7891342">;</span>&nbsp;<span class="ident" id="7891344">ct</span>&nbsp;<span class="op" id="7891347">&lt;</span>&nbsp;<span class="num" id="7891349">10e6</span><span class="op" id="7891353">;</span>&nbsp;<span class="ident" id="7891355">ct</span><span class="op" id="7891357">++</span>&nbsp;<span class="op" id="7891360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891364">f</span>&nbsp;<span class="op" id="7891366">:=</span>&nbsp;<span class="ident" id="7891369">r</span><span class="op" id="7891370">.</span><span class="ident" id="7891371">Float32</span><span class="op" id="7891378">(</span><span class="op" id="7891379">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7891383">if</span>&nbsp;<span class="ident" id="7891386">f</span>&nbsp;<span class="op" id="7891388">&gt;=</span>&nbsp;<span class="num" id="7891391">1</span>&nbsp;<span class="op" id="7891393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891398">t</span><span class="op" id="7891399">.</span><span class="ident" id="7891400">Fatal</span><span class="op" id="7891405">(</span><span class="string" id="7891406">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="7891447">,</span>&nbsp;<span class="ident" id="7891449">ct</span><span class="op" id="7891451">,</span>&nbsp;<span class="string" id="7891453">&#34;f:&#34;</span><span class="op" id="7891457">,</span>&nbsp;<span class="ident" id="7891459">f</span><span class="op" id="7891460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891467">}</span><br>
<span class="lineno"></span><span class="op" id="7891469">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="7891472">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7891487">func</span>&nbsp;<span class="ident" id="7891492">BenchmarkInt63Threadsafe</span><span class="op" id="7891516">(</span><span class="ident" id="7891517">b</span>&nbsp;<span class="op" id="7891519">*</span><span class="ident" id="7891520">testing</span><span class="op" id="7891527">.</span><span class="ident" id="7891528">B</span><span class="op" id="7891529">)</span>&nbsp;<span class="op" id="7891531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7891534">for</span>&nbsp;<span class="ident" id="7891538">n</span>&nbsp;<span class="op" id="7891540">:=</span>&nbsp;<span class="ident" id="7891543">b</span><span class="op" id="7891544">.</span><span class="ident" id="7891545">N</span><span class="op" id="7891546">;</span>&nbsp;<span class="ident" id="7891548">n</span>&nbsp;<span class="op" id="7891550">&gt;</span>&nbsp;<span class="num" id="7891552">0</span><span class="op" id="7891553">;</span>&nbsp;<span class="ident" id="7891555">n</span><span class="op" id="7891556">--</span>&nbsp;<span class="op" id="7891559">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891563">Int63</span><span class="op" id="7891568">(</span><span class="op" id="7891569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891572">}</span><br>
<span class="lineno"></span><span class="op" id="7891574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7891577">func</span>&nbsp;<span class="ident" id="7891582">BenchmarkInt63Unthreadsafe</span><span class="op" id="7891608">(</span><span class="ident" id="7891609">b</span>&nbsp;<span class="op" id="7891611">*</span><span class="ident" id="7891612">testing</span><span class="op" id="7891619">.</span><span class="ident" id="7891620">B</span><span class="op" id="7891621">)</span>&nbsp;<span class="op" id="7891623">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891626">r</span>&nbsp;<span class="op" id="7891628">:=</span>&nbsp;<span class="ident" id="7891631">New</span><span class="op" id="7891634">(</span><span class="ident" id="7891635">NewSource</span><span class="op" id="7891644">(</span><span class="num" id="7891645">1</span><span class="op" id="7891646">)</span><span class="op" id="7891647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7891650">for</span>&nbsp;<span class="ident" id="7891654">n</span>&nbsp;<span class="op" id="7891656">:=</span>&nbsp;<span class="ident" id="7891659">b</span><span class="op" id="7891660">.</span><span class="ident" id="7891661">N</span><span class="op" id="7891662">;</span>&nbsp;<span class="ident" id="7891664">n</span>&nbsp;<span class="op" id="7891666">&gt;</span>&nbsp;<span class="num" id="7891668">0</span><span class="op" id="7891669">;</span>&nbsp;<span class="ident" id="7891671">n</span><span class="op" id="7891672">--</span>&nbsp;<span class="op" id="7891675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891679">r</span><span class="op" id="7891680">.</span><span class="ident" id="7891681">Int63</span><span class="op" id="7891686">(</span><span class="op" id="7891687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891690">}</span><br>
<span class="lineno"></span><span class="op" id="7891692">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7891695">func</span>&nbsp;<span class="ident" id="7891700">BenchmarkIntn1000</span><span class="op" id="7891717">(</span><span class="ident" id="7891718">b</span>&nbsp;<span class="op" id="7891720">*</span><span class="ident" id="7891721">testing</span><span class="op" id="7891728">.</span><span class="ident" id="7891729">B</span><span class="op" id="7891730">)</span>&nbsp;<span class="op" id="7891732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891735">r</span>&nbsp;<span class="op" id="7891737">:=</span>&nbsp;<span class="ident" id="7891740">New</span><span class="op" id="7891743">(</span><span class="ident" id="7891744">NewSource</span><span class="op" id="7891753">(</span><span class="num" id="7891754">1</span><span class="op" id="7891755">)</span><span class="op" id="7891756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7891759">for</span>&nbsp;<span class="ident" id="7891763">n</span>&nbsp;<span class="op" id="7891765">:=</span>&nbsp;<span class="ident" id="7891768">b</span><span class="op" id="7891769">.</span><span class="ident" id="7891770">N</span><span class="op" id="7891771">;</span>&nbsp;<span class="ident" id="7891773">n</span>&nbsp;<span class="op" id="7891775">&gt;</span>&nbsp;<span class="num" id="7891777">0</span><span class="op" id="7891778">;</span>&nbsp;<span class="ident" id="7891780">n</span><span class="op" id="7891781">--</span>&nbsp;<span class="op" id="7891784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891788">r</span><span class="op" id="7891789">.</span><span class="ident" id="7891790">Intn</span><span class="op" id="7891794">(</span><span class="num" id="7891795">1000</span><span class="op" id="7891799">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891802">}</span><br>
<span class="lineno"></span><span class="op" id="7891804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7891807">func</span>&nbsp;<span class="ident" id="7891812">BenchmarkInt63n1000</span><span class="op" id="7891831">(</span><span class="ident" id="7891832">b</span>&nbsp;<span class="op" id="7891834">*</span><span class="ident" id="7891835">testing</span><span class="op" id="7891842">.</span><span class="ident" id="7891843">B</span><span class="op" id="7891844">)</span>&nbsp;<span class="op" id="7891846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891849">r</span>&nbsp;<span class="op" id="7891851">:=</span>&nbsp;<span class="ident" id="7891854">New</span><span class="op" id="7891857">(</span><span class="ident" id="7891858">NewSource</span><span class="op" id="7891867">(</span><span class="num" id="7891868">1</span><span class="op" id="7891869">)</span><span class="op" id="7891870">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7891873">for</span>&nbsp;<span class="ident" id="7891877">n</span>&nbsp;<span class="op" id="7891879">:=</span>&nbsp;<span class="ident" id="7891882">b</span><span class="op" id="7891883">.</span><span class="ident" id="7891884">N</span><span class="op" id="7891885">;</span>&nbsp;<span class="ident" id="7891887">n</span>&nbsp;<span class="op" id="7891889">&gt;</span>&nbsp;<span class="num" id="7891891">0</span><span class="op" id="7891892">;</span>&nbsp;<span class="ident" id="7891894">n</span><span class="op" id="7891895">--</span>&nbsp;<span class="op" id="7891898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891902">r</span><span class="op" id="7891903">.</span><span class="ident" id="7891904">Int63n</span><span class="op" id="7891910">(</span><span class="num" id="7891911">1000</span><span class="op" id="7891915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891918">}</span><br>
<span class="lineno"></span><span class="op" id="7891920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="7891923">func</span>&nbsp;<span class="ident" id="7891928">BenchmarkInt31n1000</span><span class="op" id="7891947">(</span><span class="ident" id="7891948">b</span>&nbsp;<span class="op" id="7891950">*</span><span class="ident" id="7891951">testing</span><span class="op" id="7891958">.</span><span class="ident" id="7891959">B</span><span class="op" id="7891960">)</span>&nbsp;<span class="op" id="7891962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891965">r</span>&nbsp;<span class="op" id="7891967">:=</span>&nbsp;<span class="ident" id="7891970">New</span><span class="op" id="7891973">(</span><span class="ident" id="7891974">NewSource</span><span class="op" id="7891983">(</span><span class="num" id="7891984">1</span><span class="op" id="7891985">)</span><span class="op" id="7891986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7891989">for</span>&nbsp;<span class="ident" id="7891993">n</span>&nbsp;<span class="op" id="7891995">:=</span>&nbsp;<span class="ident" id="7891998">b</span><span class="op" id="7891999">.</span><span class="ident" id="7892000">N</span><span class="op" id="7892001">;</span>&nbsp;<span class="ident" id="7892003">n</span>&nbsp;<span class="op" id="7892005">&gt;</span>&nbsp;<span class="num" id="7892007">0</span><span class="op" id="7892008">;</span>&nbsp;<span class="ident" id="7892010">n</span><span class="op" id="7892011">--</span>&nbsp;<span class="op" id="7892014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892018">r</span><span class="op" id="7892019">.</span><span class="ident" id="7892020">Int31n</span><span class="op" id="7892026">(</span><span class="num" id="7892027">1000</span><span class="op" id="7892031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892034">}</span><br>
<span class="lineno">370</span><span class="op" id="7892036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7892039">func</span>&nbsp;<span class="ident" id="7892044">BenchmarkFloat32</span><span class="op" id="7892060">(</span><span class="ident" id="7892061">b</span>&nbsp;<span class="op" id="7892063">*</span><span class="ident" id="7892064">testing</span><span class="op" id="7892071">.</span><span class="ident" id="7892072">B</span><span class="op" id="7892073">)</span>&nbsp;<span class="op" id="7892075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892078">r</span>&nbsp;<span class="op" id="7892080">:=</span>&nbsp;<span class="ident" id="7892083">New</span><span class="op" id="7892086">(</span><span class="ident" id="7892087">NewSource</span><span class="op" id="7892096">(</span><span class="num" id="7892097">1</span><span class="op" id="7892098">)</span><span class="op" id="7892099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7892102">for</span>&nbsp;<span class="ident" id="7892106">n</span>&nbsp;<span class="op" id="7892108">:=</span>&nbsp;<span class="ident" id="7892111">b</span><span class="op" id="7892112">.</span><span class="ident" id="7892113">N</span><span class="op" id="7892114">;</span>&nbsp;<span class="ident" id="7892116">n</span>&nbsp;<span class="op" id="7892118">&gt;</span>&nbsp;<span class="num" id="7892120">0</span><span class="op" id="7892121">;</span>&nbsp;<span class="ident" id="7892123">n</span><span class="op" id="7892124">--</span>&nbsp;<span class="op" id="7892127">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892131">r</span><span class="op" id="7892132">.</span><span class="ident" id="7892133">Float32</span><span class="op" id="7892140">(</span><span class="op" id="7892141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892144">}</span><br>
<span class="lineno"></span><span class="op" id="7892146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7892149">func</span>&nbsp;<span class="ident" id="7892154">BenchmarkFloat64</span><span class="op" id="7892170">(</span><span class="ident" id="7892171">b</span>&nbsp;<span class="op" id="7892173">*</span><span class="ident" id="7892174">testing</span><span class="op" id="7892181">.</span><span class="ident" id="7892182">B</span><span class="op" id="7892183">)</span>&nbsp;<span class="op" id="7892185">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892188">r</span>&nbsp;<span class="op" id="7892190">:=</span>&nbsp;<span class="ident" id="7892193">New</span><span class="op" id="7892196">(</span><span class="ident" id="7892197">NewSource</span><span class="op" id="7892206">(</span><span class="num" id="7892207">1</span><span class="op" id="7892208">)</span><span class="op" id="7892209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7892212">for</span>&nbsp;<span class="ident" id="7892216">n</span>&nbsp;<span class="op" id="7892218">:=</span>&nbsp;<span class="ident" id="7892221">b</span><span class="op" id="7892222">.</span><span class="ident" id="7892223">N</span><span class="op" id="7892224">;</span>&nbsp;<span class="ident" id="7892226">n</span>&nbsp;<span class="op" id="7892228">&gt;</span>&nbsp;<span class="num" id="7892230">0</span><span class="op" id="7892231">;</span>&nbsp;<span class="ident" id="7892233">n</span><span class="op" id="7892234">--</span>&nbsp;<span class="op" id="7892237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892241">r</span><span class="op" id="7892242">.</span><span class="ident" id="7892243">Float64</span><span class="op" id="7892250">(</span><span class="op" id="7892251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892254">}</span><br>
<span class="lineno"></span><span class="op" id="7892256">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="7892259">func</span>&nbsp;<span class="ident" id="7892264">BenchmarkPerm3</span><span class="op" id="7892278">(</span><span class="ident" id="7892279">b</span>&nbsp;<span class="op" id="7892281">*</span><span class="ident" id="7892282">testing</span><span class="op" id="7892289">.</span><span class="ident" id="7892290">B</span><span class="op" id="7892291">)</span>&nbsp;<span class="op" id="7892293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892296">r</span>&nbsp;<span class="op" id="7892298">:=</span>&nbsp;<span class="ident" id="7892301">New</span><span class="op" id="7892304">(</span><span class="ident" id="7892305">NewSource</span><span class="op" id="7892314">(</span><span class="num" id="7892315">1</span><span class="op" id="7892316">)</span><span class="op" id="7892317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7892320">for</span>&nbsp;<span class="ident" id="7892324">n</span>&nbsp;<span class="op" id="7892326">:=</span>&nbsp;<span class="ident" id="7892329">b</span><span class="op" id="7892330">.</span><span class="ident" id="7892331">N</span><span class="op" id="7892332">;</span>&nbsp;<span class="ident" id="7892334">n</span>&nbsp;<span class="op" id="7892336">&gt;</span>&nbsp;<span class="num" id="7892338">0</span><span class="op" id="7892339">;</span>&nbsp;<span class="ident" id="7892341">n</span><span class="op" id="7892342">--</span>&nbsp;<span class="op" id="7892345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892349">r</span><span class="op" id="7892350">.</span><span class="ident" id="7892351">Perm</span><span class="op" id="7892355">(</span><span class="num" id="7892356">3</span><span class="op" id="7892357">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892360">}</span><br>
<span class="lineno"></span><span class="op" id="7892362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7892365">func</span>&nbsp;<span class="ident" id="7892370">BenchmarkPerm30</span><span class="op" id="7892385">(</span><span class="ident" id="7892386">b</span>&nbsp;<span class="op" id="7892388">*</span><span class="ident" id="7892389">testing</span><span class="op" id="7892396">.</span><span class="ident" id="7892397">B</span><span class="op" id="7892398">)</span>&nbsp;<span class="op" id="7892400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892403">r</span>&nbsp;<span class="op" id="7892405">:=</span>&nbsp;<span class="ident" id="7892408">New</span><span class="op" id="7892411">(</span><span class="ident" id="7892412">NewSource</span><span class="op" id="7892421">(</span><span class="num" id="7892422">1</span><span class="op" id="7892423">)</span><span class="op" id="7892424">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7892427">for</span>&nbsp;<span class="ident" id="7892431">n</span>&nbsp;<span class="op" id="7892433">:=</span>&nbsp;<span class="ident" id="7892436">b</span><span class="op" id="7892437">.</span><span class="ident" id="7892438">N</span><span class="op" id="7892439">;</span>&nbsp;<span class="ident" id="7892441">n</span>&nbsp;<span class="op" id="7892443">&gt;</span>&nbsp;<span class="num" id="7892445">0</span><span class="op" id="7892446">;</span>&nbsp;<span class="ident" id="7892448">n</span><span class="op" id="7892449">--</span>&nbsp;<span class="op" id="7892452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892456">r</span><span class="op" id="7892457">.</span><span class="ident" id="7892458">Perm</span><span class="op" id="7892462">(</span><span class="num" id="7892463">30</span><span class="op" id="7892465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892468">}</span><br>
<span class="lineno"></span><span class="op" id="7892470">}</span>
</div>
</body>
</html>
