<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html" class="current">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6074356">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6074411">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6074465">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6074516">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6074549">package</span>&nbsp;<span class="ident" id="6074557">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6074565">import</span>&nbsp;<span class="op" id="6074572">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6074575">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6074585">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="6074591">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6074594">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="6074663">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6074709">func</span>&nbsp;<span class="ident" id="6074714">unixSyslog</span><span class="op" id="6074724">(</span><span class="op" id="6074725">)</span>&nbsp;<span class="op" id="6074727">(</span><span class="ident" id="6074728">conn</span>&nbsp;<span class="ident" id="6074733">serverConn</span><span class="op" id="6074743">,</span>&nbsp;<span class="ident" id="6074745">err</span>&nbsp;<span class="builtintype" id="6074749">error</span><span class="op" id="6074754">)</span>&nbsp;<span class="op" id="6074756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074759">logTypes</span>&nbsp;<span class="op" id="6074768">:=</span>&nbsp;<span class="op" id="6074771">[</span><span class="op" id="6074772">]</span><span class="builtintype" id="6074773">string</span><span class="op" id="6074779">{</span><span class="string" id="6074780">&#34;unixgram&#34;</span><span class="op" id="6074790">,</span>&nbsp;<span class="string" id="6074792">&#34;unix&#34;</span><span class="op" id="6074798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074801">logPaths</span>&nbsp;<span class="op" id="6074810">:=</span>&nbsp;<span class="op" id="6074813">[</span><span class="op" id="6074814">]</span><span class="builtintype" id="6074815">string</span><span class="op" id="6074821">{</span><span class="string" id="6074822">&#34;/dev/log&#34;</span><span class="op" id="6074832">,</span>&nbsp;<span class="string" id="6074834">&#34;/var/run/syslog&#34;</span><span class="op" id="6074851">,</span>&nbsp;<span class="string" id="6074853">&#34;/var/run/log&#34;</span><span class="op" id="6074867">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074870">for</span>&nbsp;<span class="ident" id="6074874">_</span><span class="op" id="6074875">,</span>&nbsp;<span class="ident" id="6074877">network</span>&nbsp;<span class="op" id="6074885">:=</span>&nbsp;<span class="keyword" id="6074888">range</span>&nbsp;<span class="ident" id="6074894">logTypes</span>&nbsp;<span class="op" id="6074903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074907">for</span>&nbsp;<span class="ident" id="6074911">_</span><span class="op" id="6074912">,</span>&nbsp;<span class="ident" id="6074914">path</span>&nbsp;<span class="op" id="6074919">:=</span>&nbsp;<span class="keyword" id="6074922">range</span>&nbsp;<span class="ident" id="6074928">logPaths</span>&nbsp;<span class="op" id="6074937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074942">conn</span><span class="op" id="6074946">,</span>&nbsp;<span class="ident" id="6074948">err</span>&nbsp;<span class="op" id="6074952">:=</span>&nbsp;<span class="ident" id="6074955">net</span><span class="op" id="6074958">.</span><span class="ident" id="6074959">Dial</span><span class="op" id="6074963">(</span><span class="ident" id="6074964">network</span><span class="op" id="6074971">,</span>&nbsp;<span class="ident" id="6074973">path</span><span class="op" id="6074977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074982">if</span>&nbsp;<span class="ident" id="6074985">err</span>&nbsp;<span class="op" id="6074989">!=</span>&nbsp;<span class="ident" id="6074992">nil</span>&nbsp;<span class="op" id="6074996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075002">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075014">}</span>&nbsp;<span class="keyword" id="6075016">else</span>&nbsp;<span class="op" id="6075021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075027">return</span>&nbsp;<span class="op" id="6075034">&amp;</span><span class="ident" id="6075035">netConn</span><span class="op" id="6075042">{</span><span class="ident" id="6075043">conn</span><span class="op" id="6075047">:</span>&nbsp;<span class="ident" id="6075049">conn</span><span class="op" id="6075053">,</span>&nbsp;<span class="ident" id="6075055">local</span><span class="op" id="6075060">:</span>&nbsp;<span class="builtintype" id="6075062">true</span><span class="op" id="6075066">}</span><span class="op" id="6075067">,</span>&nbsp;<span class="ident" id="6075069">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075083">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075086">return</span>&nbsp;<span class="ident" id="6075093">nil</span><span class="op" id="6075096">,</span>&nbsp;<span class="ident" id="6075098">errors</span><span class="op" id="6075104">.</span><span class="ident" id="6075105">New</span><span class="op" id="6075108">(</span><span class="string" id="6075109">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="6075137">)</span><br>
<span class="lineno"></span><span class="op" id="6075139">}</span>
</div>
</body>
</html>
