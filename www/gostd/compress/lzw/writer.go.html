<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/lzw</h2>
<ul>
<li><a href="/gostd/compress/lzw/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/lzw/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/lzw/writer.go.html" class="current">writer.go</a></li>
<li><a href="/gostd/compress/lzw/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5740399">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5740454">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5740508">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5740559">package</span>&nbsp;<span class="ident" id="5740567">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5740572">import</span>&nbsp;<span class="op" id="5740579">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5740582">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5740591">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5740601">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5740608">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5740613">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5740616">//&nbsp;A&nbsp;writer&nbsp;is&nbsp;a&nbsp;buffered,&nbsp;flushable&nbsp;writer.</span><br>
<span class="lineno">15</span><span class="keyword" id="5740661">type</span>&nbsp;<span class="ident" id="5740666">writer</span>&nbsp;<span class="keyword" id="5740673">interface</span>&nbsp;<span class="op" id="5740683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5740686"><a href="/gostd/compress/lzw/writer.go.html#5740608">io</a></span><span class="op" id="5740688">.</span><span class="ident" id="5740689"><a href="/gostd/io/io.go.html#1427455">ByteWriter</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5740701">Flush</span><span class="op" id="5740706">(</span><span class="op" id="5740707">)</span>&nbsp;<span class="builtintype" id="5740709">error</span><br>
<span class="lineno"></span><span class="op" id="5740715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5740718">//&nbsp;An&nbsp;errWriteCloser&nbsp;is&nbsp;an&nbsp;io.WriteCloser&nbsp;that&nbsp;always&nbsp;returns&nbsp;a&nbsp;given&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5740795">type</span>&nbsp;<span class="ident" id="5740800">errWriteCloser</span>&nbsp;<span class="keyword" id="5740815">struct</span>&nbsp;<span class="op" id="5740822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5740825">err</span>&nbsp;<span class="builtintype" id="5740829">error</span><br>
<span class="lineno"></span><span class="op" id="5740835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="5740838">func</span>&nbsp;<span class="op" id="5740843">(</span><span class="ident" id="5740844">e</span>&nbsp;<span class="op" id="5740846">*</span><span class="ident" id="5740847"><a href="/gostd/compress/lzw/writer.go.html#5740800">errWriteCloser</a></span><span class="op" id="5740861">)</span>&nbsp;<span class="ident" id="5740863">Write</span><span class="op" id="5740868">(</span><span class="op" id="5740869">[</span><span class="op" id="5740870">]</span><span class="builtintype" id="5740871">byte</span><span class="op" id="5740875">)</span>&nbsp;<span class="op" id="5740877">(</span><span class="builtintype" id="5740878">int</span><span class="op" id="5740881">,</span>&nbsp;<span class="builtintype" id="5740883">error</span><span class="op" id="5740888">)</span>&nbsp;<span class="op" id="5740890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5740893">return</span>&nbsp;<span class="num" id="5740900">0</span><span class="op" id="5740901">,</span>&nbsp;<span class="ident" id="5740903"><a href="/gostd/compress/lzw/writer.go.html#5740844">e</a></span><span class="op" id="5740904">.</span><span class="ident" id="5740905"><a href="/gostd/compress/lzw/writer.go.html#5740825">err</a></span><br>
<span class="lineno"></span><span class="op" id="5740909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5740912">func</span>&nbsp;<span class="op" id="5740917">(</span><span class="ident" id="5740918">e</span>&nbsp;<span class="op" id="5740920">*</span><span class="ident" id="5740921"><a href="/gostd/compress/lzw/writer.go.html#5740800">errWriteCloser</a></span><span class="op" id="5740935">)</span>&nbsp;<span class="ident" id="5740937">Close</span><span class="op" id="5740942">(</span><span class="op" id="5740943">)</span>&nbsp;<span class="builtintype" id="5740945">error</span>&nbsp;<span class="op" id="5740951">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5740954">return</span>&nbsp;<span class="ident" id="5740961"><a href="/gostd/compress/lzw/writer.go.html#5740918">e</a></span><span class="op" id="5740962">.</span><span class="ident" id="5740963"><a href="/gostd/compress/lzw/writer.go.html#5740825">err</a></span><br>
<span class="lineno"></span><span class="op" id="5740967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5740970">const</span>&nbsp;<span class="op" id="5740976">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5740979">//&nbsp;A&nbsp;code&nbsp;is&nbsp;a&nbsp;12&nbsp;bit&nbsp;value,&nbsp;stored&nbsp;as&nbsp;a&nbsp;uint32&nbsp;when&nbsp;encoding&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5741051">//&nbsp;type&nbsp;conversions&nbsp;when&nbsp;shifting&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5741092">maxCode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5741104">=</span>&nbsp;<span class="num" id="5741106">1</span><span class="op" id="5741107">&lt;&lt;</span><span class="num" id="5741109">12</span>&nbsp;<span class="op" id="5741112">-</span>&nbsp;<span class="num" id="5741114">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5741117">invalidCode</span>&nbsp;<span class="op" id="5741129">=</span>&nbsp;<span class="num" id="5741131">1</span><span class="op" id="5741132">&lt;&lt;</span><span class="num" id="5741134">32</span>&nbsp;<span class="op" id="5741137">-</span>&nbsp;<span class="num" id="5741139">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5741142">//&nbsp;There&nbsp;are&nbsp;1&lt;&lt;12&nbsp;possible&nbsp;codes,&nbsp;which&nbsp;is&nbsp;an&nbsp;upper&nbsp;bound&nbsp;on&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5741219">//&nbsp;valid&nbsp;hash&nbsp;table&nbsp;entries&nbsp;at&nbsp;any&nbsp;given&nbsp;point&nbsp;in&nbsp;time.&nbsp;tableSize&nbsp;is&nbsp;4x&nbsp;that.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5741298">tableSize</span>&nbsp;<span class="op" id="5741308">=</span>&nbsp;<span class="num" id="5741310">4</span>&nbsp;<span class="op" id="5741312">*</span>&nbsp;<span class="num" id="5741314">1</span>&nbsp;<span class="op" id="5741316">&lt;&lt;</span>&nbsp;<span class="num" id="5741319">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5741323">tableMask</span>&nbsp;<span class="op" id="5741333">=</span>&nbsp;<span class="ident" id="5741335"><a href="/gostd/compress/lzw/writer.go.html#5741298">tableSize</a></span>&nbsp;<span class="op" id="5741345">-</span>&nbsp;<span class="num" id="5741347">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5741350">//&nbsp;A&nbsp;hash&nbsp;table&nbsp;entry&nbsp;is&nbsp;a&nbsp;uint32.&nbsp;Zero&nbsp;is&nbsp;an&nbsp;invalid&nbsp;entry&nbsp;since&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5741421">//&nbsp;lower&nbsp;12&nbsp;bits&nbsp;of&nbsp;a&nbsp;valid&nbsp;entry&nbsp;must&nbsp;be&nbsp;a&nbsp;non-literal&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5741484">invalidEntry</span>&nbsp;<span class="op" id="5741497">=</span>&nbsp;<span class="num" id="5741499">0</span><br>
<span class="lineno">45</span><span class="op" id="5741501">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5741504">//&nbsp;encoder&nbsp;is&nbsp;LZW&nbsp;compressor.</span><br>
<span class="lineno"></span><span class="keyword" id="5741534">type</span>&nbsp;<span class="ident" id="5741539">encoder</span>&nbsp;<span class="keyword" id="5741547">struct</span>&nbsp;<span class="op" id="5741554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5741557">//&nbsp;w&nbsp;is&nbsp;the&nbsp;writer&nbsp;that&nbsp;compressed&nbsp;bytes&nbsp;are&nbsp;written&nbsp;to.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5741615">w</span>&nbsp;<span class="ident" id="5741617"><a href="/gostd/compress/lzw/writer.go.html#5740666">writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5741625">//&nbsp;order,&nbsp;write,&nbsp;bits,&nbsp;nBits&nbsp;and&nbsp;width&nbsp;are&nbsp;the&nbsp;state&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5741683">//&nbsp;converting&nbsp;a&nbsp;code&nbsp;stream&nbsp;into&nbsp;a&nbsp;byte&nbsp;stream.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5741732">order</span>&nbsp;<span class="ident" id="5741738"><a href="/gostd/compress/lzw/reader.go.html#5734288">Order</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5741745">write</span>&nbsp;<span class="keyword" id="5741751">func</span><span class="op" id="5741755">(</span><span class="op" id="5741756">*</span><span class="ident" id="5741757"><a href="/gostd/compress/lzw/writer.go.html#5741539">encoder</a></span><span class="op" id="5741764">,</span>&nbsp;<span class="builtintype" id="5741766">uint32</span><span class="op" id="5741772">)</span>&nbsp;<span class="builtintype" id="5741774">error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5741781">bits</span>&nbsp;&nbsp;<span class="builtintype" id="5741787">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5741795">nBits</span>&nbsp;<span class="builtintype" id="5741801">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5741807">width</span>&nbsp;<span class="builtintype" id="5741813">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5741819">//&nbsp;litWidth&nbsp;is&nbsp;the&nbsp;width&nbsp;in&nbsp;bits&nbsp;of&nbsp;literal&nbsp;codes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5741871">litWidth</span>&nbsp;<span class="builtintype" id="5741880">uint</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5741886">//&nbsp;hi&nbsp;is&nbsp;the&nbsp;code&nbsp;implied&nbsp;by&nbsp;the&nbsp;next&nbsp;code&nbsp;emission.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5741940">//&nbsp;overflow&nbsp;is&nbsp;the&nbsp;code&nbsp;at&nbsp;which&nbsp;hi&nbsp;overflows&nbsp;the&nbsp;code&nbsp;width.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742003">hi</span><span class="op" id="5742005">,</span>&nbsp;<span class="ident" id="5742007">overflow</span>&nbsp;<span class="builtintype" id="5742016">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5742024">//&nbsp;savedCode&nbsp;is&nbsp;the&nbsp;accumulated&nbsp;code&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;most&nbsp;recent&nbsp;Write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5742098">//&nbsp;call.&nbsp;It&nbsp;is&nbsp;equal&nbsp;to&nbsp;invalidCode&nbsp;if&nbsp;there&nbsp;was&nbsp;no&nbsp;such&nbsp;call.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742162">savedCode</span>&nbsp;<span class="builtintype" id="5742172">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5742180">//&nbsp;err&nbsp;is&nbsp;the&nbsp;first&nbsp;error&nbsp;encountered&nbsp;during&nbsp;writing.&nbsp;Closing&nbsp;the&nbsp;encoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5742255">//&nbsp;will&nbsp;make&nbsp;any&nbsp;future&nbsp;Write&nbsp;calls&nbsp;return&nbsp;errClosed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742309">err</span>&nbsp;<span class="builtintype" id="5742313">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5742320">//&nbsp;table&nbsp;is&nbsp;the&nbsp;hash&nbsp;table&nbsp;from&nbsp;20-bit&nbsp;keys&nbsp;to&nbsp;12-bit&nbsp;values.&nbsp;Each&nbsp;table</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5742394">//&nbsp;entry&nbsp;contains&nbsp;key&lt;&lt;12|val&nbsp;and&nbsp;collisions&nbsp;resolve&nbsp;by&nbsp;linear&nbsp;probing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5742467">//&nbsp;The&nbsp;keys&nbsp;consist&nbsp;of&nbsp;a&nbsp;12-bit&nbsp;code&nbsp;prefix&nbsp;and&nbsp;an&nbsp;8-bit&nbsp;byte&nbsp;suffix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5742538">//&nbsp;The&nbsp;values&nbsp;are&nbsp;a&nbsp;12-bit&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742572">table</span>&nbsp;<span class="op" id="5742578">[</span><span class="ident" id="5742579"><a href="/gostd/compress/lzw/writer.go.html#5741298">tableSize</a></span><span class="op" id="5742588">]</span><span class="builtintype" id="5742589">uint32</span><br>
<span class="lineno"></span><span class="op" id="5742596">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="5742599">//&nbsp;writeLSB&nbsp;writes&nbsp;the&nbsp;code&nbsp;c&nbsp;for&nbsp;&#34;Least&nbsp;Significant&nbsp;Bits&nbsp;first&#34;&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="5742670">func</span>&nbsp;<span class="op" id="5742675">(</span><span class="ident" id="5742676">e</span>&nbsp;<span class="op" id="5742678">*</span><span class="ident" id="5742679"><a href="/gostd/compress/lzw/writer.go.html#5741539">encoder</a></span><span class="op" id="5742686">)</span>&nbsp;<span class="ident" id="5742688">writeLSB</span><span class="op" id="5742696">(</span><span class="ident" id="5742697">c</span>&nbsp;<span class="builtintype" id="5742699">uint32</span><span class="op" id="5742705">)</span>&nbsp;<span class="builtintype" id="5742707">error</span>&nbsp;<span class="op" id="5742713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742716"><a href="/gostd/compress/lzw/writer.go.html#5742676">e</a></span><span class="op" id="5742717">.</span><span class="ident" id="5742718"><a href="/gostd/compress/lzw/writer.go.html#5741781">bits</a></span>&nbsp;<span class="op" id="5742723">|=</span>&nbsp;<span class="ident" id="5742726"><a href="/gostd/compress/lzw/writer.go.html#5742697">c</a></span>&nbsp;<span class="op" id="5742728">&lt;&lt;</span>&nbsp;<span class="ident" id="5742731"><a href="/gostd/compress/lzw/writer.go.html#5742676">e</a></span><span class="op" id="5742732">.</span><span class="ident" id="5742733"><a href="/gostd/compress/lzw/writer.go.html#5741795">nBits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742740"><a href="/gostd/compress/lzw/writer.go.html#5742676">e</a></span><span class="op" id="5742741">.</span><span class="ident" id="5742742"><a href="/gostd/compress/lzw/writer.go.html#5741795">nBits</a></span>&nbsp;<span class="op" id="5742748">+=</span>&nbsp;<span class="ident" id="5742751"><a href="/gostd/compress/lzw/writer.go.html#5742676">e</a></span><span class="op" id="5742752">.</span><span class="ident" id="5742753"><a href="/gostd/compress/lzw/writer.go.html#5741807">width</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5742760">for</span>&nbsp;<span class="ident" id="5742764"><a href="/gostd/compress/lzw/writer.go.html#5742676">e</a></span><span class="op" id="5742765">.</span><span class="ident" id="5742766"><a href="/gostd/compress/lzw/writer.go.html#5741795">nBits</a></span>&nbsp;<span class="op" id="5742772">&gt;=</span>&nbsp;<span class="num" id="5742775">8</span>&nbsp;<span class="op" id="5742777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5742781">if</span>&nbsp;<span class="ident" id="5742784">err</span>&nbsp;<span class="op" id="5742788">:=</span>&nbsp;<span class="ident" id="5742791"><a href="/gostd/compress/lzw/writer.go.html#5742676">e</a></span><span class="op" id="5742792">.</span><span class="ident" id="5742793"><a href="/gostd/compress/lzw/writer.go.html#5741615">w</a></span><span class="op" id="5742794">.</span><span class="ident" id="5742795"><a href="/gostd/io/io.go.html#1427479">WriteByte</a></span><span class="op" id="5742804">(</span><span class="builtintype" id="5742805">uint8</span><span class="op" id="5742810">(</span><span class="ident" id="5742811"><a href="/gostd/compress/lzw/writer.go.html#5742676">e</a></span><span class="op" id="5742812">.</span><span class="ident" id="5742813"><a href="/gostd/compress/lzw/writer.go.html#5741781">bits</a></span><span class="op" id="5742817">)</span><span class="op" id="5742818">)</span><span class="op" id="5742819">;</span>&nbsp;<span class="ident" id="5742821"><a href="/gostd/compress/lzw/writer.go.html#5742784">err</a></span>&nbsp;<span class="op" id="5742825">!=</span>&nbsp;<span class="builtintype" id="5742828">nil</span>&nbsp;<span class="op" id="5742832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5742837">return</span>&nbsp;<span class="ident" id="5742844"><a href="/gostd/compress/lzw/writer.go.html#5742784">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5742850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742854"><a href="/gostd/compress/lzw/writer.go.html#5742676">e</a></span><span class="op" id="5742855">.</span><span class="ident" id="5742856"><a href="/gostd/compress/lzw/writer.go.html#5741781">bits</a></span>&nbsp;<span class="op" id="5742861">&gt;&gt;=</span>&nbsp;<span class="num" id="5742865">8</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5742869"><a href="/gostd/compress/lzw/writer.go.html#5742676">e</a></span><span class="op" id="5742870">.</span><span class="ident" id="5742871"><a href="/gostd/compress/lzw/writer.go.html#5741795">nBits</a></span>&nbsp;<span class="op" id="5742877">-=</span>&nbsp;<span class="num" id="5742880">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5742883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5742886">return</span>&nbsp;<span class="builtintype" id="5742893">nil</span><br>
<span class="lineno"></span><span class="op" id="5742897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="5742900">//&nbsp;writeMSB&nbsp;writes&nbsp;the&nbsp;code&nbsp;c&nbsp;for&nbsp;&#34;Most&nbsp;Significant&nbsp;Bits&nbsp;first&#34;&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="5742970">func</span>&nbsp;<span class="op" id="5742975">(</span><span class="ident" id="5742976">e</span>&nbsp;<span class="op" id="5742978">*</span><span class="ident" id="5742979"><a href="/gostd/compress/lzw/writer.go.html#5741539">encoder</a></span><span class="op" id="5742986">)</span>&nbsp;<span class="ident" id="5742988">writeMSB</span><span class="op" id="5742996">(</span><span class="ident" id="5742997">c</span>&nbsp;<span class="builtintype" id="5742999">uint32</span><span class="op" id="5743005">)</span>&nbsp;<span class="builtintype" id="5743007">error</span>&nbsp;<span class="op" id="5743013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743016"><a href="/gostd/compress/lzw/writer.go.html#5742976">e</a></span><span class="op" id="5743017">.</span><span class="ident" id="5743018"><a href="/gostd/compress/lzw/writer.go.html#5741781">bits</a></span>&nbsp;<span class="op" id="5743023">|=</span>&nbsp;<span class="ident" id="5743026"><a href="/gostd/compress/lzw/writer.go.html#5742997">c</a></span>&nbsp;<span class="op" id="5743028">&lt;&lt;</span>&nbsp;<span class="op" id="5743031">(</span><span class="num" id="5743032">32</span>&nbsp;<span class="op" id="5743035">-</span>&nbsp;<span class="ident" id="5743037"><a href="/gostd/compress/lzw/writer.go.html#5742976">e</a></span><span class="op" id="5743038">.</span><span class="ident" id="5743039"><a href="/gostd/compress/lzw/writer.go.html#5741807">width</a></span>&nbsp;<span class="op" id="5743045">-</span>&nbsp;<span class="ident" id="5743047"><a href="/gostd/compress/lzw/writer.go.html#5742976">e</a></span><span class="op" id="5743048">.</span><span class="ident" id="5743049"><a href="/gostd/compress/lzw/writer.go.html#5741795">nBits</a></span><span class="op" id="5743054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743057"><a href="/gostd/compress/lzw/writer.go.html#5742976">e</a></span><span class="op" id="5743058">.</span><span class="ident" id="5743059"><a href="/gostd/compress/lzw/writer.go.html#5741795">nBits</a></span>&nbsp;<span class="op" id="5743065">+=</span>&nbsp;<span class="ident" id="5743068"><a href="/gostd/compress/lzw/writer.go.html#5742976">e</a></span><span class="op" id="5743069">.</span><span class="ident" id="5743070"><a href="/gostd/compress/lzw/writer.go.html#5741807">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743077">for</span>&nbsp;<span class="ident" id="5743081"><a href="/gostd/compress/lzw/writer.go.html#5742976">e</a></span><span class="op" id="5743082">.</span><span class="ident" id="5743083"><a href="/gostd/compress/lzw/writer.go.html#5741795">nBits</a></span>&nbsp;<span class="op" id="5743089">&gt;=</span>&nbsp;<span class="num" id="5743092">8</span>&nbsp;<span class="op" id="5743094">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743098">if</span>&nbsp;<span class="ident" id="5743101">err</span>&nbsp;<span class="op" id="5743105">:=</span>&nbsp;<span class="ident" id="5743108"><a href="/gostd/compress/lzw/writer.go.html#5742976">e</a></span><span class="op" id="5743109">.</span><span class="ident" id="5743110"><a href="/gostd/compress/lzw/writer.go.html#5741615">w</a></span><span class="op" id="5743111">.</span><span class="ident" id="5743112"><a href="/gostd/io/io.go.html#1427479">WriteByte</a></span><span class="op" id="5743121">(</span><span class="builtintype" id="5743122">uint8</span><span class="op" id="5743127">(</span><span class="ident" id="5743128"><a href="/gostd/compress/lzw/writer.go.html#5742976">e</a></span><span class="op" id="5743129">.</span><span class="ident" id="5743130"><a href="/gostd/compress/lzw/writer.go.html#5741781">bits</a></span>&nbsp;<span class="op" id="5743135">&gt;&gt;</span>&nbsp;<span class="num" id="5743138">24</span><span class="op" id="5743140">)</span><span class="op" id="5743141">)</span><span class="op" id="5743142">;</span>&nbsp;<span class="ident" id="5743144"><a href="/gostd/compress/lzw/writer.go.html#5743101">err</a></span>&nbsp;<span class="op" id="5743148">!=</span>&nbsp;<span class="builtintype" id="5743151">nil</span>&nbsp;<span class="op" id="5743155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743160">return</span>&nbsp;<span class="ident" id="5743167"><a href="/gostd/compress/lzw/writer.go.html#5743101">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5743173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743177"><a href="/gostd/compress/lzw/writer.go.html#5742976">e</a></span><span class="op" id="5743178">.</span><span class="ident" id="5743179"><a href="/gostd/compress/lzw/writer.go.html#5741781">bits</a></span>&nbsp;<span class="op" id="5743184">&lt;&lt;=</span>&nbsp;<span class="num" id="5743188">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743192"><a href="/gostd/compress/lzw/writer.go.html#5742976">e</a></span><span class="op" id="5743193">.</span><span class="ident" id="5743194"><a href="/gostd/compress/lzw/writer.go.html#5741795">nBits</a></span>&nbsp;<span class="op" id="5743200">-=</span>&nbsp;<span class="num" id="5743203">8</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5743206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743209">return</span>&nbsp;<span class="builtintype" id="5743216">nil</span><br>
<span class="lineno"></span><span class="op" id="5743220">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5743223">//&nbsp;errOutOfCodes&nbsp;is&nbsp;an&nbsp;internal&nbsp;error&nbsp;that&nbsp;means&nbsp;that&nbsp;the&nbsp;encoder&nbsp;has&nbsp;run&nbsp;out</span><br>
<span class="lineno">105</span><span class="comment" id="5743301">//&nbsp;of&nbsp;unused&nbsp;codes&nbsp;and&nbsp;a&nbsp;clear&nbsp;code&nbsp;needs&nbsp;to&nbsp;be&nbsp;sent&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="5743360">var</span>&nbsp;<span class="ident" id="5743364">errOutOfCodes</span>&nbsp;<span class="op" id="5743378">=</span>&nbsp;<span class="ident" id="5743380"><a href="/gostd/compress/lzw/writer.go.html#5740591">errors</a></span><span class="op" id="5743386">.</span><span class="ident" id="5743387"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5743390">(</span><span class="string" id="5743391">&#34;lzw:&nbsp;out&nbsp;of&nbsp;codes&#34;</span><span class="op" id="5743410">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5743413">//&nbsp;incHi&nbsp;increments&nbsp;e.hi&nbsp;and&nbsp;checks&nbsp;for&nbsp;both&nbsp;overflow&nbsp;and&nbsp;running&nbsp;out&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5743486">//&nbsp;unused&nbsp;codes.&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;incHi&nbsp;sends&nbsp;a&nbsp;clear&nbsp;code,&nbsp;resets&nbsp;the</span><br>
<span class="lineno">110</span><span class="comment" id="5743560">//&nbsp;encoder&nbsp;state&nbsp;and&nbsp;returns&nbsp;errOutOfCodes.</span><br>
<span class="lineno"></span><span class="keyword" id="5743604">func</span>&nbsp;<span class="op" id="5743609">(</span><span class="ident" id="5743610">e</span>&nbsp;<span class="op" id="5743612">*</span><span class="ident" id="5743613"><a href="/gostd/compress/lzw/writer.go.html#5741539">encoder</a></span><span class="op" id="5743620">)</span>&nbsp;<span class="ident" id="5743622">incHi</span><span class="op" id="5743627">(</span><span class="op" id="5743628">)</span>&nbsp;<span class="builtintype" id="5743630">error</span>&nbsp;<span class="op" id="5743636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743639"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743640">.</span><span class="ident" id="5743641"><a href="/gostd/compress/lzw/writer.go.html#5742003">hi</a></span><span class="op" id="5743643">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743647">if</span>&nbsp;<span class="ident" id="5743650"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743651">.</span><span class="ident" id="5743652"><a href="/gostd/compress/lzw/writer.go.html#5742003">hi</a></span>&nbsp;<span class="op" id="5743655">==</span>&nbsp;<span class="ident" id="5743658"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743659">.</span><span class="ident" id="5743660"><a href="/gostd/compress/lzw/writer.go.html#5742007">overflow</a></span>&nbsp;<span class="op" id="5743669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743673"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743674">.</span><span class="ident" id="5743675"><a href="/gostd/compress/lzw/writer.go.html#5741807">width</a></span><span class="op" id="5743680">++</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743685"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743686">.</span><span class="ident" id="5743687"><a href="/gostd/compress/lzw/writer.go.html#5742007">overflow</a></span>&nbsp;<span class="op" id="5743696">&lt;&lt;=</span>&nbsp;<span class="num" id="5743700">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5743703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743706">if</span>&nbsp;<span class="ident" id="5743709"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743710">.</span><span class="ident" id="5743711"><a href="/gostd/compress/lzw/writer.go.html#5742003">hi</a></span>&nbsp;<span class="op" id="5743714">==</span>&nbsp;<span class="ident" id="5743717"><a href="/gostd/compress/lzw/writer.go.html#5741092">maxCode</a></span>&nbsp;<span class="op" id="5743725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743729">clear</span>&nbsp;<span class="op" id="5743735">:=</span>&nbsp;<span class="builtintype" id="5743738">uint32</span><span class="op" id="5743744">(</span><span class="num" id="5743745">1</span><span class="op" id="5743746">)</span>&nbsp;<span class="op" id="5743748">&lt;&lt;</span>&nbsp;<span class="ident" id="5743751"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743752">.</span><span class="ident" id="5743753"><a href="/gostd/compress/lzw/writer.go.html#5741871">litWidth</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743764">if</span>&nbsp;<span class="ident" id="5743767">err</span>&nbsp;<span class="op" id="5743771">:=</span>&nbsp;<span class="ident" id="5743774"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743775">.</span><span class="ident" id="5743776"><a href="/gostd/compress/lzw/writer.go.html#5741745">write</a></span><span class="op" id="5743781">(</span><span class="ident" id="5743782"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743783">,</span>&nbsp;<span class="ident" id="5743785"><a href="/gostd/compress/lzw/writer.go.html#5743729">clear</a></span><span class="op" id="5743790">)</span><span class="op" id="5743791">;</span>&nbsp;<span class="ident" id="5743793"><a href="/gostd/compress/lzw/writer.go.html#5743767">err</a></span>&nbsp;<span class="op" id="5743797">!=</span>&nbsp;<span class="builtintype" id="5743800">nil</span>&nbsp;<span class="op" id="5743804">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743809">return</span>&nbsp;<span class="ident" id="5743816"><a href="/gostd/compress/lzw/writer.go.html#5743767">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5743822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743826"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743827">.</span><span class="ident" id="5743828"><a href="/gostd/compress/lzw/writer.go.html#5741807">width</a></span>&nbsp;<span class="op" id="5743834">=</span>&nbsp;<span class="builtintype" id="5743836">uint</span><span class="op" id="5743840">(</span><span class="ident" id="5743841"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743842">.</span><span class="ident" id="5743843"><a href="/gostd/compress/lzw/writer.go.html#5741871">litWidth</a></span><span class="op" id="5743851">)</span>&nbsp;<span class="op" id="5743853">+</span>&nbsp;<span class="num" id="5743855">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743859"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743860">.</span><span class="ident" id="5743861"><a href="/gostd/compress/lzw/writer.go.html#5742003">hi</a></span>&nbsp;<span class="op" id="5743864">=</span>&nbsp;<span class="ident" id="5743866"><a href="/gostd/compress/lzw/writer.go.html#5743729">clear</a></span>&nbsp;<span class="op" id="5743872">+</span>&nbsp;<span class="num" id="5743874">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743878"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743879">.</span><span class="ident" id="5743880"><a href="/gostd/compress/lzw/writer.go.html#5742007">overflow</a></span>&nbsp;<span class="op" id="5743889">=</span>&nbsp;<span class="ident" id="5743891"><a href="/gostd/compress/lzw/writer.go.html#5743729">clear</a></span>&nbsp;<span class="op" id="5743897">&lt;&lt;</span>&nbsp;<span class="num" id="5743900">1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743904">for</span>&nbsp;<span class="ident" id="5743908">i</span>&nbsp;<span class="op" id="5743910">:=</span>&nbsp;<span class="keyword" id="5743913">range</span>&nbsp;<span class="ident" id="5743919"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743920">.</span><span class="ident" id="5743921"><a href="/gostd/compress/lzw/writer.go.html#5742572">table</a></span>&nbsp;<span class="op" id="5743927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5743932"><a href="/gostd/compress/lzw/writer.go.html#5743610">e</a></span><span class="op" id="5743933">.</span><span class="ident" id="5743934"><a href="/gostd/compress/lzw/writer.go.html#5742572">table</a></span><span class="op" id="5743939">[</span><span class="ident" id="5743940"><a href="/gostd/compress/lzw/writer.go.html#5743908">i</a></span><span class="op" id="5743941">]</span>&nbsp;<span class="op" id="5743943">=</span>&nbsp;<span class="ident" id="5743945"><a href="/gostd/compress/lzw/writer.go.html#5741484">invalidEntry</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5743960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743964">return</span>&nbsp;<span class="ident" id="5743971"><a href="/gostd/compress/lzw/writer.go.html#5743364">errOutOfCodes</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5743986">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5743989">return</span>&nbsp;<span class="builtintype" id="5743996">nil</span><br>
<span class="lineno"></span><span class="op" id="5744000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5744003">//&nbsp;Write&nbsp;writes&nbsp;a&nbsp;compressed&nbsp;representation&nbsp;of&nbsp;p&nbsp;to&nbsp;e&#39;s&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno"></span><span class="keyword" id="5744078">func</span>&nbsp;<span class="op" id="5744083">(</span><span class="ident" id="5744084">e</span>&nbsp;<span class="op" id="5744086">*</span><span class="ident" id="5744087"><a href="/gostd/compress/lzw/writer.go.html#5741539">encoder</a></span><span class="op" id="5744094">)</span>&nbsp;<span class="ident" id="5744096">Write</span><span class="op" id="5744101">(</span><span class="ident" id="5744102">p</span>&nbsp;<span class="op" id="5744104">[</span><span class="op" id="5744105">]</span><span class="builtintype" id="5744106">byte</span><span class="op" id="5744110">)</span>&nbsp;<span class="op" id="5744112">(</span><span class="ident" id="5744113">n</span>&nbsp;<span class="builtintype" id="5744115">int</span><span class="op" id="5744118">,</span>&nbsp;<span class="ident" id="5744120">err</span>&nbsp;<span class="builtintype" id="5744124">error</span><span class="op" id="5744129">)</span>&nbsp;<span class="op" id="5744131">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744134">if</span>&nbsp;<span class="ident" id="5744137"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5744138">.</span><span class="ident" id="5744139"><a href="/gostd/compress/lzw/writer.go.html#5742309">err</a></span>&nbsp;<span class="op" id="5744143">!=</span>&nbsp;<span class="builtintype" id="5744146">nil</span>&nbsp;<span class="op" id="5744150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744154">return</span>&nbsp;<span class="num" id="5744161">0</span><span class="op" id="5744162">,</span>&nbsp;<span class="ident" id="5744164"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5744165">.</span><span class="ident" id="5744166"><a href="/gostd/compress/lzw/writer.go.html#5742309">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744174">if</span>&nbsp;<span class="builtinfunc" id="5744177">len</span><span class="op" id="5744180">(</span><span class="ident" id="5744181"><a href="/gostd/compress/lzw/writer.go.html#5744102">p</a></span><span class="op" id="5744182">)</span>&nbsp;<span class="op" id="5744184">==</span>&nbsp;<span class="num" id="5744187">0</span>&nbsp;<span class="op" id="5744189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744193">return</span>&nbsp;<span class="num" id="5744200">0</span><span class="op" id="5744201">,</span>&nbsp;<span class="builtintype" id="5744203">nil</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744211"><a href="/gostd/compress/lzw/writer.go.html#5744113">n</a></span>&nbsp;<span class="op" id="5744213">=</span>&nbsp;<span class="builtinfunc" id="5744215">len</span><span class="op" id="5744218">(</span><span class="ident" id="5744219"><a href="/gostd/compress/lzw/writer.go.html#5744102">p</a></span><span class="op" id="5744220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744223">litMask</span>&nbsp;<span class="op" id="5744231">:=</span>&nbsp;<span class="builtintype" id="5744234">uint32</span><span class="op" id="5744240">(</span><span class="num" id="5744241">1</span><span class="op" id="5744242">&lt;&lt;</span><span class="ident" id="5744244"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5744245">.</span><span class="ident" id="5744246"><a href="/gostd/compress/lzw/writer.go.html#5741871">litWidth</a></span>&nbsp;<span class="op" id="5744255">-</span>&nbsp;<span class="num" id="5744257">1</span><span class="op" id="5744258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744261">code</span>&nbsp;<span class="op" id="5744266">:=</span>&nbsp;<span class="ident" id="5744269"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5744270">.</span><span class="ident" id="5744271"><a href="/gostd/compress/lzw/writer.go.html#5742162">savedCode</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744282">if</span>&nbsp;<span class="ident" id="5744285"><a href="/gostd/compress/lzw/writer.go.html#5744261">code</a></span>&nbsp;<span class="op" id="5744290">==</span>&nbsp;<span class="ident" id="5744293"><a href="/gostd/compress/lzw/writer.go.html#5741117">invalidCode</a></span>&nbsp;<span class="op" id="5744305">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5744309">//&nbsp;The&nbsp;first&nbsp;code&nbsp;sent&nbsp;is&nbsp;always&nbsp;a&nbsp;literal&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744360"><a href="/gostd/compress/lzw/writer.go.html#5744261">code</a></span><span class="op" id="5744364">,</span>&nbsp;<span class="ident" id="5744366"><a href="/gostd/compress/lzw/writer.go.html#5744102">p</a></span>&nbsp;<span class="op" id="5744368">=</span>&nbsp;<span class="builtintype" id="5744370">uint32</span><span class="op" id="5744376">(</span><span class="ident" id="5744377"><a href="/gostd/compress/lzw/writer.go.html#5744102">p</a></span><span class="op" id="5744378">[</span><span class="num" id="5744379">0</span><span class="op" id="5744380">]</span><span class="op" id="5744381">)</span><span class="op" id="5744382">&amp;</span><span class="ident" id="5744383"><a href="/gostd/compress/lzw/writer.go.html#5744223">litMask</a></span><span class="op" id="5744390">,</span>&nbsp;<span class="ident" id="5744392"><a href="/gostd/compress/lzw/writer.go.html#5744102">p</a></span><span class="op" id="5744393">[</span><span class="num" id="5744394">1</span><span class="op" id="5744395">:</span><span class="op" id="5744396">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744399">}</span><br>
<span class="lineno"></span><span class="ident" id="5744401">loop</span><span class="op" id="5744405">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744408">for</span>&nbsp;<span class="ident" id="5744412">_</span><span class="op" id="5744413">,</span>&nbsp;<span class="ident" id="5744415">x</span>&nbsp;<span class="op" id="5744417">:=</span>&nbsp;<span class="keyword" id="5744420">range</span>&nbsp;<span class="ident" id="5744426"><a href="/gostd/compress/lzw/writer.go.html#5744102">p</a></span>&nbsp;<span class="op" id="5744428">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744432">literal</span>&nbsp;<span class="op" id="5744440">:=</span>&nbsp;<span class="builtintype" id="5744443">uint32</span><span class="op" id="5744449">(</span><span class="ident" id="5744450"><a href="/gostd/compress/lzw/writer.go.html#5744415">x</a></span><span class="op" id="5744451">)</span>&nbsp;<span class="op" id="5744453">&amp;</span>&nbsp;<span class="ident" id="5744455"><a href="/gostd/compress/lzw/writer.go.html#5744223">litMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744465">key</span>&nbsp;<span class="op" id="5744469">:=</span>&nbsp;<span class="ident" id="5744472"><a href="/gostd/compress/lzw/writer.go.html#5744261">code</a></span><span class="op" id="5744476">&lt;&lt;</span><span class="num" id="5744478">8</span>&nbsp;<span class="op" id="5744480">|</span>&nbsp;<span class="ident" id="5744482"><a href="/gostd/compress/lzw/writer.go.html#5744432">literal</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5744492">//&nbsp;If&nbsp;there&nbsp;is&nbsp;a&nbsp;hash&nbsp;table&nbsp;hit&nbsp;for&nbsp;this&nbsp;key&nbsp;then&nbsp;we&nbsp;continue&nbsp;the&nbsp;loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5744565">//&nbsp;and&nbsp;do&nbsp;not&nbsp;emit&nbsp;a&nbsp;code&nbsp;yet.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744598">hash</span>&nbsp;<span class="op" id="5744603">:=</span>&nbsp;<span class="op" id="5744606">(</span><span class="ident" id="5744607"><a href="/gostd/compress/lzw/writer.go.html#5744465">key</a></span><span class="op" id="5744610">&gt;&gt;</span><span class="num" id="5744612">12</span>&nbsp;<span class="op" id="5744615">^</span>&nbsp;<span class="ident" id="5744617"><a href="/gostd/compress/lzw/writer.go.html#5744465">key</a></span><span class="op" id="5744620">)</span>&nbsp;<span class="op" id="5744622">&amp;</span>&nbsp;<span class="ident" id="5744624"><a href="/gostd/compress/lzw/writer.go.html#5741323">tableMask</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744636">for</span>&nbsp;<span class="ident" id="5744640">h</span><span class="op" id="5744641">,</span>&nbsp;<span class="ident" id="5744643">t</span>&nbsp;<span class="op" id="5744645">:=</span>&nbsp;<span class="ident" id="5744648"><a href="/gostd/compress/lzw/writer.go.html#5744598">hash</a></span><span class="op" id="5744652">,</span>&nbsp;<span class="ident" id="5744654"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5744655">.</span><span class="ident" id="5744656"><a href="/gostd/compress/lzw/writer.go.html#5742572">table</a></span><span class="op" id="5744661">[</span><span class="ident" id="5744662"><a href="/gostd/compress/lzw/writer.go.html#5744598">hash</a></span><span class="op" id="5744666">]</span><span class="op" id="5744667">;</span>&nbsp;<span class="ident" id="5744669"><a href="/gostd/compress/lzw/writer.go.html#5744643">t</a></span>&nbsp;<span class="op" id="5744671">!=</span>&nbsp;<span class="ident" id="5744674"><a href="/gostd/compress/lzw/writer.go.html#5741484">invalidEntry</a></span><span class="op" id="5744686">;</span>&nbsp;<span class="op" id="5744688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744693">if</span>&nbsp;<span class="ident" id="5744696"><a href="/gostd/compress/lzw/writer.go.html#5744465">key</a></span>&nbsp;<span class="op" id="5744700">==</span>&nbsp;<span class="ident" id="5744703"><a href="/gostd/compress/lzw/writer.go.html#5744643">t</a></span><span class="op" id="5744704">&gt;&gt;</span><span class="num" id="5744706">12</span>&nbsp;<span class="op" id="5744709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744715"><a href="/gostd/compress/lzw/writer.go.html#5744261">code</a></span>&nbsp;<span class="op" id="5744720">=</span>&nbsp;<span class="ident" id="5744722"><a href="/gostd/compress/lzw/writer.go.html#5744643">t</a></span>&nbsp;<span class="op" id="5744724">&amp;</span>&nbsp;<span class="ident" id="5744726"><a href="/gostd/compress/lzw/writer.go.html#5741092">maxCode</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744738">continue</span>&nbsp;<span class="ident" id="5744747"><a href="/gostd/compress/lzw/writer.go.html#5744401">loop</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744755">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744760"><a href="/gostd/compress/lzw/writer.go.html#5744640">h</a></span>&nbsp;<span class="op" id="5744762">=</span>&nbsp;<span class="op" id="5744764">(</span><span class="ident" id="5744765"><a href="/gostd/compress/lzw/writer.go.html#5744640">h</a></span>&nbsp;<span class="op" id="5744767">+</span>&nbsp;<span class="num" id="5744769">1</span><span class="op" id="5744770">)</span>&nbsp;<span class="op" id="5744772">&amp;</span>&nbsp;<span class="ident" id="5744774"><a href="/gostd/compress/lzw/writer.go.html#5741323">tableMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744787"><a href="/gostd/compress/lzw/writer.go.html#5744643">t</a></span>&nbsp;<span class="op" id="5744789">=</span>&nbsp;<span class="ident" id="5744791"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5744792">.</span><span class="ident" id="5744793"><a href="/gostd/compress/lzw/writer.go.html#5742572">table</a></span><span class="op" id="5744798">[</span><span class="ident" id="5744799"><a href="/gostd/compress/lzw/writer.go.html#5744640">h</a></span><span class="op" id="5744800">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5744808">//&nbsp;Otherwise,&nbsp;write&nbsp;the&nbsp;current&nbsp;code,&nbsp;and&nbsp;literal&nbsp;becomes&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5744881">//&nbsp;the&nbsp;next&nbsp;emitted&nbsp;code.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744909">if</span>&nbsp;<span class="ident" id="5744912"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5744913">.</span><span class="ident" id="5744914"><a href="/gostd/compress/lzw/writer.go.html#5742309">err</a></span>&nbsp;<span class="op" id="5744918">=</span>&nbsp;<span class="ident" id="5744920"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5744921">.</span><span class="ident" id="5744922"><a href="/gostd/compress/lzw/writer.go.html#5741745">write</a></span><span class="op" id="5744927">(</span><span class="ident" id="5744928"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5744929">,</span>&nbsp;<span class="ident" id="5744931"><a href="/gostd/compress/lzw/writer.go.html#5744261">code</a></span><span class="op" id="5744935">)</span><span class="op" id="5744936">;</span>&nbsp;<span class="ident" id="5744938"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5744939">.</span><span class="ident" id="5744940"><a href="/gostd/compress/lzw/writer.go.html#5742309">err</a></span>&nbsp;<span class="op" id="5744944">!=</span>&nbsp;<span class="builtintype" id="5744947">nil</span>&nbsp;<span class="op" id="5744951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5744956">return</span>&nbsp;<span class="num" id="5744963">0</span><span class="op" id="5744964">,</span>&nbsp;<span class="ident" id="5744966"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5744967">.</span><span class="ident" id="5744968"><a href="/gostd/compress/lzw/writer.go.html#5742309">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5744974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5744978"><a href="/gostd/compress/lzw/writer.go.html#5744261">code</a></span>&nbsp;<span class="op" id="5744983">=</span>&nbsp;<span class="ident" id="5744985"><a href="/gostd/compress/lzw/writer.go.html#5744432">literal</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5744995">//&nbsp;Increment&nbsp;e.hi,&nbsp;the&nbsp;next&nbsp;implied&nbsp;code.&nbsp;If&nbsp;we&nbsp;run&nbsp;out&nbsp;of&nbsp;codes,&nbsp;reset</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5745069">//&nbsp;the&nbsp;encoder&nbsp;state&nbsp;(including&nbsp;clearing&nbsp;the&nbsp;hash&nbsp;table)&nbsp;and&nbsp;continue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745142">if</span>&nbsp;<span class="ident" id="5745145">err1</span>&nbsp;<span class="op" id="5745150">:=</span>&nbsp;<span class="ident" id="5745153"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5745154">.</span><span class="ident" id="5745155"><a href="/gostd/compress/lzw/writer.go.html#5743622">incHi</a></span><span class="op" id="5745160">(</span><span class="op" id="5745161">)</span><span class="op" id="5745162">;</span>&nbsp;<span class="ident" id="5745164"><a href="/gostd/compress/lzw/writer.go.html#5745145">err1</a></span>&nbsp;<span class="op" id="5745169">!=</span>&nbsp;<span class="builtintype" id="5745172">nil</span>&nbsp;<span class="op" id="5745176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745181">if</span>&nbsp;<span class="ident" id="5745184"><a href="/gostd/compress/lzw/writer.go.html#5745145">err1</a></span>&nbsp;<span class="op" id="5745189">==</span>&nbsp;<span class="ident" id="5745192"><a href="/gostd/compress/lzw/writer.go.html#5743364">errOutOfCodes</a></span>&nbsp;<span class="op" id="5745206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745212">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745224">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745229"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5745230">.</span><span class="ident" id="5745231"><a href="/gostd/compress/lzw/writer.go.html#5742309">err</a></span>&nbsp;<span class="op" id="5745235">=</span>&nbsp;<span class="ident" id="5745237"><a href="/gostd/compress/lzw/writer.go.html#5745145">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745245">return</span>&nbsp;<span class="num" id="5745252">0</span><span class="op" id="5745253">,</span>&nbsp;<span class="ident" id="5745255"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5745256">.</span><span class="ident" id="5745257"><a href="/gostd/compress/lzw/writer.go.html#5742309">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5745267">//&nbsp;Otherwise,&nbsp;insert&nbsp;key&nbsp;-&gt;&nbsp;e.hi&nbsp;into&nbsp;the&nbsp;map&nbsp;that&nbsp;e.table&nbsp;represents.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745340">for</span>&nbsp;<span class="op" id="5745344">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745349">if</span>&nbsp;<span class="ident" id="5745352"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5745353">.</span><span class="ident" id="5745354"><a href="/gostd/compress/lzw/writer.go.html#5742572">table</a></span><span class="op" id="5745359">[</span><span class="ident" id="5745360"><a href="/gostd/compress/lzw/writer.go.html#5744598">hash</a></span><span class="op" id="5745364">]</span>&nbsp;<span class="op" id="5745366">==</span>&nbsp;<span class="ident" id="5745369"><a href="/gostd/compress/lzw/writer.go.html#5741484">invalidEntry</a></span>&nbsp;<span class="op" id="5745382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745388"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5745389">.</span><span class="ident" id="5745390"><a href="/gostd/compress/lzw/writer.go.html#5742572">table</a></span><span class="op" id="5745395">[</span><span class="ident" id="5745396"><a href="/gostd/compress/lzw/writer.go.html#5744598">hash</a></span><span class="op" id="5745400">]</span>&nbsp;<span class="op" id="5745402">=</span>&nbsp;<span class="op" id="5745404">(</span><span class="ident" id="5745405"><a href="/gostd/compress/lzw/writer.go.html#5744465">key</a></span>&nbsp;<span class="op" id="5745409">&lt;&lt;</span>&nbsp;<span class="num" id="5745412">12</span><span class="op" id="5745414">)</span>&nbsp;<span class="op" id="5745416">|</span>&nbsp;<span class="ident" id="5745418"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5745419">.</span><span class="ident" id="5745420"><a href="/gostd/compress/lzw/writer.go.html#5742003">hi</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745427">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745441"><a href="/gostd/compress/lzw/writer.go.html#5744598">hash</a></span>&nbsp;<span class="op" id="5745446">=</span>&nbsp;<span class="op" id="5745448">(</span><span class="ident" id="5745449"><a href="/gostd/compress/lzw/writer.go.html#5744598">hash</a></span>&nbsp;<span class="op" id="5745454">+</span>&nbsp;<span class="num" id="5745456">1</span><span class="op" id="5745457">)</span>&nbsp;<span class="op" id="5745459">&amp;</span>&nbsp;<span class="ident" id="5745461"><a href="/gostd/compress/lzw/writer.go.html#5741323">tableMask</a></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745479"><a href="/gostd/compress/lzw/writer.go.html#5744084">e</a></span><span class="op" id="5745480">.</span><span class="ident" id="5745481"><a href="/gostd/compress/lzw/writer.go.html#5742162">savedCode</a></span>&nbsp;<span class="op" id="5745491">=</span>&nbsp;<span class="ident" id="5745493"><a href="/gostd/compress/lzw/writer.go.html#5744261">code</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745499">return</span>&nbsp;<span class="ident" id="5745506"><a href="/gostd/compress/lzw/writer.go.html#5744113">n</a></span><span class="op" id="5745507">,</span>&nbsp;<span class="builtintype" id="5745509">nil</span><br>
<span class="lineno"></span><span class="op" id="5745513">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5745516">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;encoder,&nbsp;flushing&nbsp;any&nbsp;pending&nbsp;output.&nbsp;It&nbsp;does&nbsp;not&nbsp;close&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5745595">//&nbsp;flush&nbsp;e&#39;s&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno"></span><span class="keyword" id="5745627">func</span>&nbsp;<span class="op" id="5745632">(</span><span class="ident" id="5745633">e</span>&nbsp;<span class="op" id="5745635">*</span><span class="ident" id="5745636"><a href="/gostd/compress/lzw/writer.go.html#5741539">encoder</a></span><span class="op" id="5745643">)</span>&nbsp;<span class="ident" id="5745645">Close</span><span class="op" id="5745650">(</span><span class="op" id="5745651">)</span>&nbsp;<span class="builtintype" id="5745653">error</span>&nbsp;<span class="op" id="5745659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745662">if</span>&nbsp;<span class="ident" id="5745665"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5745666">.</span><span class="ident" id="5745667"><a href="/gostd/compress/lzw/writer.go.html#5742309">err</a></span>&nbsp;<span class="op" id="5745671">!=</span>&nbsp;<span class="builtintype" id="5745674">nil</span>&nbsp;<span class="op" id="5745678">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745682">if</span>&nbsp;<span class="ident" id="5745685"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5745686">.</span><span class="ident" id="5745687"><a href="/gostd/compress/lzw/writer.go.html#5742309">err</a></span>&nbsp;<span class="op" id="5745691">==</span>&nbsp;<span class="ident" id="5745694"><a href="/gostd/compress/lzw/reader.go.html#5739143">errClosed</a></span>&nbsp;<span class="op" id="5745704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745709">return</span>&nbsp;<span class="builtintype" id="5745716">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745726">return</span>&nbsp;<span class="ident" id="5745733"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5745734">.</span><span class="ident" id="5745735"><a href="/gostd/compress/lzw/writer.go.html#5742309">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745740">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5745743">//&nbsp;Make&nbsp;any&nbsp;future&nbsp;calls&nbsp;to&nbsp;Write&nbsp;return&nbsp;errClosed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5745796"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5745797">.</span><span class="ident" id="5745798"><a href="/gostd/compress/lzw/writer.go.html#5742309">err</a></span>&nbsp;<span class="op" id="5745802">=</span>&nbsp;<span class="ident" id="5745804"><a href="/gostd/compress/lzw/reader.go.html#5739143">errClosed</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5745815">//&nbsp;Write&nbsp;the&nbsp;savedCode&nbsp;if&nbsp;valid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745849">if</span>&nbsp;<span class="ident" id="5745852"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5745853">.</span><span class="ident" id="5745854"><a href="/gostd/compress/lzw/writer.go.html#5742162">savedCode</a></span>&nbsp;<span class="op" id="5745864">!=</span>&nbsp;<span class="ident" id="5745867"><a href="/gostd/compress/lzw/writer.go.html#5741117">invalidCode</a></span>&nbsp;<span class="op" id="5745879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745883">if</span>&nbsp;<span class="ident" id="5745886">err</span>&nbsp;<span class="op" id="5745890">:=</span>&nbsp;<span class="ident" id="5745893"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5745894">.</span><span class="ident" id="5745895"><a href="/gostd/compress/lzw/writer.go.html#5741745">write</a></span><span class="op" id="5745900">(</span><span class="ident" id="5745901"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5745902">,</span>&nbsp;<span class="ident" id="5745904"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5745905">.</span><span class="ident" id="5745906"><a href="/gostd/compress/lzw/writer.go.html#5742162">savedCode</a></span><span class="op" id="5745915">)</span><span class="op" id="5745916">;</span>&nbsp;<span class="ident" id="5745918"><a href="/gostd/compress/lzw/writer.go.html#5745886">err</a></span>&nbsp;<span class="op" id="5745922">!=</span>&nbsp;<span class="builtintype" id="5745925">nil</span>&nbsp;<span class="op" id="5745929">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745934">return</span>&nbsp;<span class="ident" id="5745941"><a href="/gostd/compress/lzw/writer.go.html#5745886">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5745947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5745951">if</span>&nbsp;<span class="ident" id="5745954">err</span>&nbsp;<span class="op" id="5745958">:=</span>&nbsp;<span class="ident" id="5745961"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5745962">.</span><span class="ident" id="5745963"><a href="/gostd/compress/lzw/writer.go.html#5743622">incHi</a></span><span class="op" id="5745968">(</span><span class="op" id="5745969">)</span><span class="op" id="5745970">;</span>&nbsp;<span class="ident" id="5745972"><a href="/gostd/compress/lzw/writer.go.html#5745954">err</a></span>&nbsp;<span class="op" id="5745976">!=</span>&nbsp;<span class="builtintype" id="5745979">nil</span>&nbsp;<span class="op" id="5745983">&amp;&amp;</span>&nbsp;<span class="ident" id="5745986"><a href="/gostd/compress/lzw/writer.go.html#5745954">err</a></span>&nbsp;<span class="op" id="5745990">!=</span>&nbsp;<span class="ident" id="5745993"><a href="/gostd/compress/lzw/writer.go.html#5743364">errOutOfCodes</a></span>&nbsp;<span class="op" id="5746007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746012">return</span>&nbsp;<span class="ident" id="5746019"><a href="/gostd/compress/lzw/writer.go.html#5745954">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746025">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5746031">//&nbsp;Write&nbsp;the&nbsp;eof&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746055">eof</span>&nbsp;<span class="op" id="5746059">:=</span>&nbsp;<span class="builtintype" id="5746062">uint32</span><span class="op" id="5746068">(</span><span class="num" id="5746069">1</span><span class="op" id="5746070">)</span><span class="op" id="5746071">&lt;&lt;</span><span class="ident" id="5746073"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5746074">.</span><span class="ident" id="5746075"><a href="/gostd/compress/lzw/writer.go.html#5741871">litWidth</a></span>&nbsp;<span class="op" id="5746084">+</span>&nbsp;<span class="num" id="5746086">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746089">if</span>&nbsp;<span class="ident" id="5746092">err</span>&nbsp;<span class="op" id="5746096">:=</span>&nbsp;<span class="ident" id="5746099"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5746100">.</span><span class="ident" id="5746101"><a href="/gostd/compress/lzw/writer.go.html#5741745">write</a></span><span class="op" id="5746106">(</span><span class="ident" id="5746107"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5746108">,</span>&nbsp;<span class="ident" id="5746110"><a href="/gostd/compress/lzw/writer.go.html#5746055">eof</a></span><span class="op" id="5746113">)</span><span class="op" id="5746114">;</span>&nbsp;<span class="ident" id="5746116"><a href="/gostd/compress/lzw/writer.go.html#5746092">err</a></span>&nbsp;<span class="op" id="5746120">!=</span>&nbsp;<span class="builtintype" id="5746123">nil</span>&nbsp;<span class="op" id="5746127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746131">return</span>&nbsp;<span class="ident" id="5746138"><a href="/gostd/compress/lzw/writer.go.html#5746092">err</a></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5746146">//&nbsp;Write&nbsp;the&nbsp;final&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746172">if</span>&nbsp;<span class="ident" id="5746175"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5746176">.</span><span class="ident" id="5746177"><a href="/gostd/compress/lzw/writer.go.html#5741795">nBits</a></span>&nbsp;<span class="op" id="5746183">&gt;</span>&nbsp;<span class="num" id="5746185">0</span>&nbsp;<span class="op" id="5746187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746191">if</span>&nbsp;<span class="ident" id="5746194"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5746195">.</span><span class="ident" id="5746196"><a href="/gostd/compress/lzw/writer.go.html#5741732">order</a></span>&nbsp;<span class="op" id="5746202">==</span>&nbsp;<span class="ident" id="5746205"><a href="/gostd/compress/lzw/reader.go.html#5734491">MSB</a></span>&nbsp;<span class="op" id="5746209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746214"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5746215">.</span><span class="ident" id="5746216"><a href="/gostd/compress/lzw/writer.go.html#5741781">bits</a></span>&nbsp;<span class="op" id="5746221">&gt;&gt;=</span>&nbsp;<span class="num" id="5746225">24</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746234">if</span>&nbsp;<span class="ident" id="5746237">err</span>&nbsp;<span class="op" id="5746241">:=</span>&nbsp;<span class="ident" id="5746244"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5746245">.</span><span class="ident" id="5746246"><a href="/gostd/compress/lzw/writer.go.html#5741615">w</a></span><span class="op" id="5746247">.</span><span class="ident" id="5746248"><a href="/gostd/io/io.go.html#1427479">WriteByte</a></span><span class="op" id="5746257">(</span><span class="builtintype" id="5746258">uint8</span><span class="op" id="5746263">(</span><span class="ident" id="5746264"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5746265">.</span><span class="ident" id="5746266"><a href="/gostd/compress/lzw/writer.go.html#5741781">bits</a></span><span class="op" id="5746270">)</span><span class="op" id="5746271">)</span><span class="op" id="5746272">;</span>&nbsp;<span class="ident" id="5746274"><a href="/gostd/compress/lzw/writer.go.html#5746237">err</a></span>&nbsp;<span class="op" id="5746278">!=</span>&nbsp;<span class="builtintype" id="5746281">nil</span>&nbsp;<span class="op" id="5746285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746290">return</span>&nbsp;<span class="ident" id="5746297"><a href="/gostd/compress/lzw/writer.go.html#5746237">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746306">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746309">return</span>&nbsp;<span class="ident" id="5746316"><a href="/gostd/compress/lzw/writer.go.html#5745633">e</a></span><span class="op" id="5746317">.</span><span class="ident" id="5746318"><a href="/gostd/compress/lzw/writer.go.html#5741615">w</a></span><span class="op" id="5746319">.</span><span class="ident" id="5746320"><a href="/gostd/compress/lzw/writer.go.html#5740701">Flush</a></span><span class="op" id="5746325">(</span><span class="op" id="5746326">)</span><br>
<span class="lineno"></span><span class="op" id="5746328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5746331">//&nbsp;NewWriter&nbsp;creates&nbsp;a&nbsp;new&nbsp;io.WriteCloser.</span><br>
<span class="lineno"></span><span class="comment" id="5746374">//&nbsp;Writes&nbsp;to&nbsp;the&nbsp;returned&nbsp;io.WriteCloser&nbsp;are&nbsp;compressed&nbsp;and&nbsp;written&nbsp;to&nbsp;w.</span><br>
<span class="lineno">230</span><span class="comment" id="5746448">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;WriteCloser&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5746523">//&nbsp;finished&nbsp;writing.</span><br>
<span class="lineno"></span><span class="comment" id="5746544">//&nbsp;The&nbsp;number&nbsp;of&nbsp;bits&nbsp;to&nbsp;use&nbsp;for&nbsp;literal&nbsp;codes,&nbsp;litWidth,&nbsp;must&nbsp;be&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5746617">//&nbsp;range&nbsp;[2,8]&nbsp;and&nbsp;is&nbsp;typically&nbsp;8.</span><br>
<span class="lineno"></span><span class="keyword" id="5746652">func</span>&nbsp;<span class="ident" id="5746657">NewWriter</span><span class="op" id="5746666">(</span><span class="ident" id="5746667">w</span>&nbsp;<span class="ident" id="5746669"><a href="/gostd/compress/lzw/writer.go.html#5740608">io</a></span><span class="op" id="5746671">.</span><span class="ident" id="5746672"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="5746678">,</span>&nbsp;<span class="ident" id="5746680">order</span>&nbsp;<span class="ident" id="5746686"><a href="/gostd/compress/lzw/reader.go.html#5734288">Order</a></span><span class="op" id="5746691">,</span>&nbsp;<span class="ident" id="5746693">litWidth</span>&nbsp;<span class="builtintype" id="5746702">int</span><span class="op" id="5746705">)</span>&nbsp;<span class="ident" id="5746707"><a href="/gostd/compress/lzw/writer.go.html#5740608">io</a></span><span class="op" id="5746709">.</span><span class="ident" id="5746710"><a href="/gostd/io/io.go.html#1423540">WriteCloser</a></span>&nbsp;<span class="op" id="5746722">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746725">var</span>&nbsp;<span class="ident" id="5746729">write</span>&nbsp;<span class="keyword" id="5746735">func</span><span class="op" id="5746739">(</span><span class="op" id="5746740">*</span><span class="ident" id="5746741"><a href="/gostd/compress/lzw/writer.go.html#5741539">encoder</a></span><span class="op" id="5746748">,</span>&nbsp;<span class="builtintype" id="5746750">uint32</span><span class="op" id="5746756">)</span>&nbsp;<span class="builtintype" id="5746758">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746765">switch</span>&nbsp;<span class="ident" id="5746772"><a href="/gostd/compress/lzw/writer.go.html#5746680">order</a></span>&nbsp;<span class="op" id="5746778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746781">case</span>&nbsp;<span class="ident" id="5746786"><a href="/gostd/compress/lzw/reader.go.html#5734384">LSB</a></span><span class="op" id="5746789">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746793"><a href="/gostd/compress/lzw/writer.go.html#5746729">write</a></span>&nbsp;<span class="op" id="5746799">=</span>&nbsp;<span class="op" id="5746801">(</span><span class="op" id="5746802">*</span><span class="ident" id="5746803"><a href="/gostd/compress/lzw/writer.go.html#5741539">encoder</a></span><span class="op" id="5746810">)</span><span class="op" id="5746811">.</span><span class="ident" id="5746812"><a href="/gostd/compress/lzw/writer.go.html#5742688">writeLSB</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746822">case</span>&nbsp;<span class="ident" id="5746827"><a href="/gostd/compress/lzw/reader.go.html#5734491">MSB</a></span><span class="op" id="5746830">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5746834"><a href="/gostd/compress/lzw/writer.go.html#5746729">write</a></span>&nbsp;<span class="op" id="5746840">=</span>&nbsp;<span class="op" id="5746842">(</span><span class="op" id="5746843">*</span><span class="ident" id="5746844"><a href="/gostd/compress/lzw/writer.go.html#5741539">encoder</a></span><span class="op" id="5746851">)</span><span class="op" id="5746852">.</span><span class="ident" id="5746853"><a href="/gostd/compress/lzw/writer.go.html#5742988">writeMSB</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746863">default</span><span class="op" id="5746870">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746874">return</span>&nbsp;<span class="op" id="5746881">&amp;</span><span class="ident" id="5746882"><a href="/gostd/compress/lzw/writer.go.html#5740800">errWriteCloser</a></span><span class="op" id="5746896">{</span><span class="ident" id="5746897"><a href="/gostd/compress/lzw/writer.go.html#5740591">errors</a></span><span class="op" id="5746903">.</span><span class="ident" id="5746904"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5746907">(</span><span class="string" id="5746908">&#34;lzw:&nbsp;unknown&nbsp;order&#34;</span><span class="op" id="5746928">)</span><span class="op" id="5746929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5746932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746935">if</span>&nbsp;<span class="ident" id="5746938"><a href="/gostd/compress/lzw/writer.go.html#5746693">litWidth</a></span>&nbsp;<span class="op" id="5746947">&lt;</span>&nbsp;<span class="num" id="5746949">2</span>&nbsp;<span class="op" id="5746951">||</span>&nbsp;<span class="num" id="5746954">8</span>&nbsp;<span class="op" id="5746956">&lt;</span>&nbsp;<span class="ident" id="5746958"><a href="/gostd/compress/lzw/writer.go.html#5746693">litWidth</a></span>&nbsp;<span class="op" id="5746967">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5746971">return</span>&nbsp;<span class="op" id="5746978">&amp;</span><span class="ident" id="5746979"><a href="/gostd/compress/lzw/writer.go.html#5740800">errWriteCloser</a></span><span class="op" id="5746993">{</span><span class="ident" id="5746994"><a href="/gostd/compress/lzw/writer.go.html#5740601">fmt</a></span><span class="op" id="5746997">.</span><span class="ident" id="5746998"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5747004">(</span><span class="string" id="5747005">&#34;lzw:&nbsp;litWidth&nbsp;%d&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="5747036">,</span>&nbsp;<span class="ident" id="5747038"><a href="/gostd/compress/lzw/writer.go.html#5746693">litWidth</a></span><span class="op" id="5747046">)</span><span class="op" id="5747047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5747050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747053">bw</span><span class="op" id="5747055">,</span>&nbsp;<span class="ident" id="5747057">ok</span>&nbsp;<span class="op" id="5747060">:=</span>&nbsp;<span class="ident" id="5747063"><a href="/gostd/compress/lzw/writer.go.html#5746667">w</a></span><span class="op" id="5747064">.</span><span class="op" id="5747065">(</span><span class="ident" id="5747066"><a href="/gostd/compress/lzw/writer.go.html#5740666">writer</a></span><span class="op" id="5747072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5747075">if</span>&nbsp;<span class="op" id="5747078">!</span><span class="ident" id="5747079"><a href="/gostd/compress/lzw/writer.go.html#5747057">ok</a></span>&nbsp;<span class="op" id="5747082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747086"><a href="/gostd/compress/lzw/writer.go.html#5747053">bw</a></span>&nbsp;<span class="op" id="5747089">=</span>&nbsp;<span class="ident" id="5747091"><a href="/gostd/compress/lzw/writer.go.html#5740582">bufio</a></span><span class="op" id="5747096">.</span><span class="ident" id="5747097"><a href="/gostd/bufio/bufio.go.html#1367149">NewWriter</a></span><span class="op" id="5747106">(</span><span class="ident" id="5747107"><a href="/gostd/compress/lzw/writer.go.html#5746667">w</a></span><span class="op" id="5747108">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5747111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747114">lw</span>&nbsp;<span class="op" id="5747117">:=</span>&nbsp;<span class="builtintype" id="5747120">uint</span><span class="op" id="5747124">(</span><span class="ident" id="5747125"><a href="/gostd/compress/lzw/writer.go.html#5746693">litWidth</a></span><span class="op" id="5747133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5747136">return</span>&nbsp;<span class="op" id="5747143">&amp;</span><span class="ident" id="5747144"><a href="/gostd/compress/lzw/writer.go.html#5741539">encoder</a></span><span class="op" id="5747151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747155"><a href="/gostd/compress/lzw/writer.go.html#5741615">w</a></span><span class="op" id="5747156">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747166"><a href="/gostd/compress/lzw/writer.go.html#5747053">bw</a></span><span class="op" id="5747168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747172"><a href="/gostd/compress/lzw/writer.go.html#5741732">order</a></span><span class="op" id="5747177">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747183"><a href="/gostd/compress/lzw/writer.go.html#5746680">order</a></span><span class="op" id="5747188">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747192"><a href="/gostd/compress/lzw/writer.go.html#5741745">write</a></span><span class="op" id="5747197">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747203"><a href="/gostd/compress/lzw/writer.go.html#5746729">write</a></span><span class="op" id="5747208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747212"><a href="/gostd/compress/lzw/writer.go.html#5741807">width</a></span><span class="op" id="5747217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="5747223">1</span>&nbsp;<span class="op" id="5747225">+</span>&nbsp;<span class="ident" id="5747227"><a href="/gostd/compress/lzw/writer.go.html#5747114">lw</a></span><span class="op" id="5747229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747233"><a href="/gostd/compress/lzw/writer.go.html#5741871">litWidth</a></span><span class="op" id="5747241">:</span>&nbsp;&nbsp;<span class="ident" id="5747244"><a href="/gostd/compress/lzw/writer.go.html#5747114">lw</a></span><span class="op" id="5747246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747250"><a href="/gostd/compress/lzw/writer.go.html#5742003">hi</a></span><span class="op" id="5747252">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="5747261">1</span><span class="op" id="5747262">&lt;&lt;</span><span class="ident" id="5747264"><a href="/gostd/compress/lzw/writer.go.html#5747114">lw</a></span>&nbsp;<span class="op" id="5747267">+</span>&nbsp;<span class="num" id="5747269">1</span><span class="op" id="5747270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747274"><a href="/gostd/compress/lzw/writer.go.html#5742007">overflow</a></span><span class="op" id="5747282">:</span>&nbsp;&nbsp;<span class="num" id="5747285">1</span>&nbsp;<span class="op" id="5747287">&lt;&lt;</span>&nbsp;<span class="op" id="5747290">(</span><span class="ident" id="5747291"><a href="/gostd/compress/lzw/writer.go.html#5747114">lw</a></span>&nbsp;<span class="op" id="5747294">+</span>&nbsp;<span class="num" id="5747296">1</span><span class="op" id="5747297">)</span><span class="op" id="5747298">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5747302"><a href="/gostd/compress/lzw/writer.go.html#5742162">savedCode</a></span><span class="op" id="5747311">:</span>&nbsp;<span class="ident" id="5747313"><a href="/gostd/compress/lzw/writer.go.html#5741117">invalidCode</a></span><span class="op" id="5747324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5747327">}</span><br>
<span class="lineno"></span><span class="op" id="5747329">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
