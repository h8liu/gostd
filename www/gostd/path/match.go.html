<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2786314">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2786369">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2786423">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2786474">package</span>&nbsp;<span class="ident" id="2786482">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2786488">import</span>&nbsp;<span class="op" id="2786495">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2786498">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2786508">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2786519">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2786534">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2786537">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="2786598">var</span>&nbsp;<span class="ident" id="2786602">ErrBadPattern</span>&nbsp;<span class="op" id="2786616">=</span>&nbsp;<span class="ident" id="2786618">errors</span><span class="op" id="2786624">.</span><span class="ident" id="2786625">New</span><span class="op" id="2786628">(</span><span class="string" id="2786629">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="2786654">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2786657">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="comment" id="2786724">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="2786750">//</span><br>
<span class="lineno"></span><span class="comment" id="2786753">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno">20</span><span class="comment" id="2786765">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="2786778">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno"></span><span class="comment" id="2786787">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-/&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="2786844">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-/&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="2786895">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno">25</span><span class="comment" id="2786935">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="2786987">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="2787050">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="2787086">//</span><br>
<span class="lineno"></span><span class="comment" id="2787089">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno">30</span><span class="comment" id="2787109">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="2787167">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="2787203">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="2787257">//</span><br>
<span class="lineno"></span><span class="comment" id="2787260">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno">35</span><span class="comment" id="2787330">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="2787397">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="comment" id="2787414">//</span><br>
<span class="lineno"></span><span class="keyword" id="2787417">func</span>&nbsp;<span class="ident" id="2787422">Match</span><span class="op" id="2787427">(</span><span class="ident" id="2787428">pattern</span><span class="op" id="2787435">,</span>&nbsp;<span class="ident" id="2787437">name</span>&nbsp;<span class="builtintype" id="2787442">string</span><span class="op" id="2787448">)</span>&nbsp;<span class="op" id="2787450">(</span><span class="ident" id="2787451">matched</span>&nbsp;<span class="builtintype" id="2787459">bool</span><span class="op" id="2787463">,</span>&nbsp;<span class="ident" id="2787465">err</span>&nbsp;<span class="builtintype" id="2787469">error</span><span class="op" id="2787474">)</span>&nbsp;<span class="op" id="2787476">{</span><br>
<span class="lineno"></span><span class="ident" id="2787478">Pattern</span><span class="op" id="2787485">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787488">for</span>&nbsp;<span class="builtinfunc" id="2787492">len</span><span class="op" id="2787495">(</span><span class="ident" id="2787496">pattern</span><span class="op" id="2787503">)</span>&nbsp;<span class="op" id="2787505">&gt;</span>&nbsp;<span class="num" id="2787507">0</span>&nbsp;<span class="op" id="2787509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787513">var</span>&nbsp;<span class="ident" id="2787517">star</span>&nbsp;<span class="builtintype" id="2787522">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787529">var</span>&nbsp;<span class="ident" id="2787533">chunk</span>&nbsp;<span class="builtintype" id="2787539">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2787548">star</span><span class="op" id="2787552">,</span>&nbsp;<span class="ident" id="2787554">chunk</span><span class="op" id="2787559">,</span>&nbsp;<span class="ident" id="2787561">pattern</span>&nbsp;<span class="op" id="2787569">=</span>&nbsp;<span class="ident" id="2787571">scanChunk</span><span class="op" id="2787580">(</span><span class="ident" id="2787581">pattern</span><span class="op" id="2787588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787592">if</span>&nbsp;<span class="ident" id="2787595">star</span>&nbsp;<span class="op" id="2787600">&amp;&amp;</span>&nbsp;<span class="ident" id="2787603">chunk</span>&nbsp;<span class="op" id="2787609">==</span>&nbsp;<span class="string" id="2787612">&#34;&#34;</span>&nbsp;<span class="op" id="2787615">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2787620">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787679">return</span>&nbsp;<span class="ident" id="2787686">strings</span><span class="op" id="2787693">.</span><span class="ident" id="2787694">Index</span><span class="op" id="2787699">(</span><span class="ident" id="2787700">name</span><span class="op" id="2787704">,</span>&nbsp;<span class="string" id="2787706">&#34;/&#34;</span><span class="op" id="2787709">)</span>&nbsp;<span class="op" id="2787711">&lt;</span>&nbsp;<span class="num" id="2787713">0</span><span class="op" id="2787714">,</span>&nbsp;<span class="ident" id="2787716">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2787722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2787726">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2787767">t</span><span class="op" id="2787768">,</span>&nbsp;<span class="ident" id="2787770">ok</span><span class="op" id="2787772">,</span>&nbsp;<span class="ident" id="2787774">err</span>&nbsp;<span class="op" id="2787778">:=</span>&nbsp;<span class="ident" id="2787781">matchChunk</span><span class="op" id="2787791">(</span><span class="ident" id="2787792">chunk</span><span class="op" id="2787797">,</span>&nbsp;<span class="ident" id="2787799">name</span><span class="op" id="2787803">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2787807">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2787872">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2787942">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787962">if</span>&nbsp;<span class="ident" id="2787965">ok</span>&nbsp;<span class="op" id="2787968">&amp;&amp;</span>&nbsp;<span class="op" id="2787971">(</span><span class="builtinfunc" id="2787972">len</span><span class="op" id="2787975">(</span><span class="ident" id="2787976">t</span><span class="op" id="2787977">)</span>&nbsp;<span class="op" id="2787979">==</span>&nbsp;<span class="num" id="2787982">0</span>&nbsp;<span class="op" id="2787984">||</span>&nbsp;<span class="builtinfunc" id="2787987">len</span><span class="op" id="2787990">(</span><span class="ident" id="2787991">pattern</span><span class="op" id="2787998">)</span>&nbsp;<span class="op" id="2788000">&gt;</span>&nbsp;<span class="num" id="2788002">0</span><span class="op" id="2788003">)</span>&nbsp;<span class="op" id="2788005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788010">name</span>&nbsp;<span class="op" id="2788015">=</span>&nbsp;<span class="ident" id="2788017">t</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788022">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788037">if</span>&nbsp;<span class="ident" id="2788040">err</span>&nbsp;<span class="op" id="2788044">!=</span>&nbsp;<span class="ident" id="2788047">nil</span>&nbsp;<span class="op" id="2788051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788056">return</span>&nbsp;<span class="builtintype" id="2788063">false</span><span class="op" id="2788068">,</span>&nbsp;<span class="ident" id="2788070">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788076">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788080">if</span>&nbsp;<span class="ident" id="2788083">star</span>&nbsp;<span class="op" id="2788088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2788093">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2788134">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788155">for</span>&nbsp;<span class="ident" id="2788159">i</span>&nbsp;<span class="op" id="2788161">:=</span>&nbsp;<span class="num" id="2788164">0</span><span class="op" id="2788165">;</span>&nbsp;<span class="ident" id="2788167">i</span>&nbsp;<span class="op" id="2788169">&lt;</span>&nbsp;<span class="builtinfunc" id="2788171">len</span><span class="op" id="2788174">(</span><span class="ident" id="2788175">name</span><span class="op" id="2788179">)</span>&nbsp;<span class="op" id="2788181">&amp;&amp;</span>&nbsp;<span class="ident" id="2788184">name</span><span class="op" id="2788188">[</span><span class="ident" id="2788189">i</span><span class="op" id="2788190">]</span>&nbsp;<span class="op" id="2788192">!=</span>&nbsp;<span class="string" id="2788195">&#39;/&#39;</span><span class="op" id="2788198">;</span>&nbsp;<span class="ident" id="2788200">i</span><span class="op" id="2788201">++</span>&nbsp;<span class="op" id="2788204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788210">t</span><span class="op" id="2788211">,</span>&nbsp;<span class="ident" id="2788213">ok</span><span class="op" id="2788215">,</span>&nbsp;<span class="ident" id="2788217">err</span>&nbsp;<span class="op" id="2788221">:=</span>&nbsp;<span class="ident" id="2788224">matchChunk</span><span class="op" id="2788234">(</span><span class="ident" id="2788235">chunk</span><span class="op" id="2788240">,</span>&nbsp;<span class="ident" id="2788242">name</span><span class="op" id="2788246">[</span><span class="ident" id="2788247">i</span><span class="op" id="2788248">+</span><span class="num" id="2788249">1</span><span class="op" id="2788250">:</span><span class="op" id="2788251">]</span><span class="op" id="2788252">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788258">if</span>&nbsp;<span class="ident" id="2788261">ok</span>&nbsp;<span class="op" id="2788264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2788271">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788336">if</span>&nbsp;<span class="builtinfunc" id="2788339">len</span><span class="op" id="2788342">(</span><span class="ident" id="2788343">pattern</span><span class="op" id="2788350">)</span>&nbsp;<span class="op" id="2788352">==</span>&nbsp;<span class="num" id="2788355">0</span>&nbsp;<span class="op" id="2788357">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2788360">len</span><span class="op" id="2788363">(</span><span class="ident" id="2788364">t</span><span class="op" id="2788365">)</span>&nbsp;<span class="op" id="2788367">&gt;</span>&nbsp;<span class="num" id="2788369">0</span>&nbsp;<span class="op" id="2788371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788379">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788393">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788400">name</span>&nbsp;<span class="op" id="2788405">=</span>&nbsp;<span class="ident" id="2788407">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788414">continue</span>&nbsp;<span class="ident" id="2788423">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788441">if</span>&nbsp;<span class="ident" id="2788444">err</span>&nbsp;<span class="op" id="2788448">!=</span>&nbsp;<span class="ident" id="2788451">nil</span>&nbsp;<span class="op" id="2788455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788462">return</span>&nbsp;<span class="builtintype" id="2788469">false</span><span class="op" id="2788474">,</span>&nbsp;<span class="ident" id="2788476">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788497">return</span>&nbsp;<span class="builtintype" id="2788504">false</span><span class="op" id="2788509">,</span>&nbsp;<span class="ident" id="2788511">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788516">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788519">return</span>&nbsp;<span class="builtinfunc" id="2788526">len</span><span class="op" id="2788529">(</span><span class="ident" id="2788530">name</span><span class="op" id="2788534">)</span>&nbsp;<span class="op" id="2788536">==</span>&nbsp;<span class="num" id="2788539">0</span><span class="op" id="2788540">,</span>&nbsp;<span class="ident" id="2788542">nil</span><br>
<span class="lineno"></span><span class="op" id="2788546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2788549">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="2788623">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno">85</span><span class="keyword" id="2788655">func</span>&nbsp;<span class="ident" id="2788660">scanChunk</span><span class="op" id="2788669">(</span><span class="ident" id="2788670">pattern</span>&nbsp;<span class="builtintype" id="2788678">string</span><span class="op" id="2788684">)</span>&nbsp;<span class="op" id="2788686">(</span><span class="ident" id="2788687">star</span>&nbsp;<span class="builtintype" id="2788692">bool</span><span class="op" id="2788696">,</span>&nbsp;<span class="ident" id="2788698">chunk</span><span class="op" id="2788703">,</span>&nbsp;<span class="ident" id="2788705">rest</span>&nbsp;<span class="builtintype" id="2788710">string</span><span class="op" id="2788716">)</span>&nbsp;<span class="op" id="2788718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788721">for</span>&nbsp;<span class="builtinfunc" id="2788725">len</span><span class="op" id="2788728">(</span><span class="ident" id="2788729">pattern</span><span class="op" id="2788736">)</span>&nbsp;<span class="op" id="2788738">&gt;</span>&nbsp;<span class="num" id="2788740">0</span>&nbsp;<span class="op" id="2788742">&amp;&amp;</span>&nbsp;<span class="ident" id="2788745">pattern</span><span class="op" id="2788752">[</span><span class="num" id="2788753">0</span><span class="op" id="2788754">]</span>&nbsp;<span class="op" id="2788756">==</span>&nbsp;<span class="string" id="2788759">&#39;*&#39;</span>&nbsp;<span class="op" id="2788763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788767">pattern</span>&nbsp;<span class="op" id="2788775">=</span>&nbsp;<span class="ident" id="2788777">pattern</span><span class="op" id="2788784">[</span><span class="num" id="2788785">1</span><span class="op" id="2788786">:</span><span class="op" id="2788787">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788791">star</span>&nbsp;<span class="op" id="2788796">=</span>&nbsp;<span class="builtintype" id="2788798">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788804">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788807">inrange</span>&nbsp;<span class="op" id="2788815">:=</span>&nbsp;<span class="builtintype" id="2788818">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788825">var</span>&nbsp;<span class="ident" id="2788829">i</span>&nbsp;<span class="builtintype" id="2788831">int</span><br>
<span class="lineno"></span><span class="ident" id="2788835">Scan</span><span class="op" id="2788839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788842">for</span>&nbsp;<span class="ident" id="2788846">i</span>&nbsp;<span class="op" id="2788848">=</span>&nbsp;<span class="num" id="2788850">0</span><span class="op" id="2788851">;</span>&nbsp;<span class="ident" id="2788853">i</span>&nbsp;<span class="op" id="2788855">&lt;</span>&nbsp;<span class="builtinfunc" id="2788857">len</span><span class="op" id="2788860">(</span><span class="ident" id="2788861">pattern</span><span class="op" id="2788868">)</span><span class="op" id="2788869">;</span>&nbsp;<span class="ident" id="2788871">i</span><span class="op" id="2788872">++</span>&nbsp;<span class="op" id="2788875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788879">switch</span>&nbsp;<span class="ident" id="2788886">pattern</span><span class="op" id="2788893">[</span><span class="ident" id="2788894">i</span><span class="op" id="2788895">]</span>&nbsp;<span class="op" id="2788897">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788901">case</span>&nbsp;<span class="string" id="2788906">&#39;\\&#39;</span><span class="op" id="2788910">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2788915">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788969">if</span>&nbsp;<span class="ident" id="2788972">i</span><span class="op" id="2788973">+</span><span class="num" id="2788974">1</span>&nbsp;<span class="op" id="2788976">&lt;</span>&nbsp;<span class="builtinfunc" id="2788978">len</span><span class="op" id="2788981">(</span><span class="ident" id="2788982">pattern</span><span class="op" id="2788989">)</span>&nbsp;<span class="op" id="2788991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788997">i</span><span class="op" id="2788998">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2789004">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789008">case</span>&nbsp;<span class="string" id="2789013">&#39;[&#39;</span><span class="op" id="2789016">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2789021">inrange</span>&nbsp;<span class="op" id="2789029">=</span>&nbsp;<span class="builtintype" id="2789031">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789038">case</span>&nbsp;<span class="string" id="2789043">&#39;]&#39;</span><span class="op" id="2789046">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2789051">inrange</span>&nbsp;<span class="op" id="2789059">=</span>&nbsp;<span class="builtintype" id="2789061">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789069">case</span>&nbsp;<span class="string" id="2789074">&#39;*&#39;</span><span class="op" id="2789077">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789082">if</span>&nbsp;<span class="op" id="2789085">!</span><span class="ident" id="2789086">inrange</span>&nbsp;<span class="op" id="2789094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789100">break</span>&nbsp;<span class="ident" id="2789106">Scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2789114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2789118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2789121">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789124">return</span>&nbsp;<span class="ident" id="2789131">star</span><span class="op" id="2789135">,</span>&nbsp;<span class="ident" id="2789137">pattern</span><span class="op" id="2789144">[</span><span class="num" id="2789145">0</span><span class="op" id="2789146">:</span><span class="ident" id="2789147">i</span><span class="op" id="2789148">]</span><span class="op" id="2789149">,</span>&nbsp;<span class="ident" id="2789151">pattern</span><span class="op" id="2789158">[</span><span class="ident" id="2789159">i</span><span class="op" id="2789160">:</span><span class="op" id="2789161">]</span><br>
<span class="lineno"></span><span class="op" id="2789163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2789166">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="2789229">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno">115</span><span class="comment" id="2789288">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="2789363">func</span>&nbsp;<span class="ident" id="2789368">matchChunk</span><span class="op" id="2789378">(</span><span class="ident" id="2789379">chunk</span><span class="op" id="2789384">,</span>&nbsp;<span class="ident" id="2789386">s</span>&nbsp;<span class="builtintype" id="2789388">string</span><span class="op" id="2789394">)</span>&nbsp;<span class="op" id="2789396">(</span><span class="ident" id="2789397">rest</span>&nbsp;<span class="builtintype" id="2789402">string</span><span class="op" id="2789408">,</span>&nbsp;<span class="ident" id="2789410">ok</span>&nbsp;<span class="builtintype" id="2789413">bool</span><span class="op" id="2789417">,</span>&nbsp;<span class="ident" id="2789419">err</span>&nbsp;<span class="builtintype" id="2789423">error</span><span class="op" id="2789428">)</span>&nbsp;<span class="op" id="2789430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789433">for</span>&nbsp;<span class="builtinfunc" id="2789437">len</span><span class="op" id="2789440">(</span><span class="ident" id="2789441">chunk</span><span class="op" id="2789446">)</span>&nbsp;<span class="op" id="2789448">&gt;</span>&nbsp;<span class="num" id="2789450">0</span>&nbsp;<span class="op" id="2789452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789456">if</span>&nbsp;<span class="builtinfunc" id="2789459">len</span><span class="op" id="2789462">(</span><span class="ident" id="2789463">s</span><span class="op" id="2789464">)</span>&nbsp;<span class="op" id="2789466">==</span>&nbsp;<span class="num" id="2789469">0</span>&nbsp;<span class="op" id="2789471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789476">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2789485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789489">switch</span>&nbsp;<span class="ident" id="2789496">chunk</span><span class="op" id="2789501">[</span><span class="num" id="2789502">0</span><span class="op" id="2789503">]</span>&nbsp;<span class="op" id="2789505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789509">case</span>&nbsp;<span class="string" id="2789514">&#39;[&#39;</span><span class="op" id="2789517">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2789522">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2789544">r</span><span class="op" id="2789545">,</span>&nbsp;<span class="ident" id="2789547">n</span>&nbsp;<span class="op" id="2789549">:=</span>&nbsp;<span class="ident" id="2789552">utf8</span><span class="op" id="2789556">.</span><span class="ident" id="2789557">DecodeRuneInString</span><span class="op" id="2789575">(</span><span class="ident" id="2789576">s</span><span class="op" id="2789577">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2789582">s</span>&nbsp;<span class="op" id="2789584">=</span>&nbsp;<span class="ident" id="2789586">s</span><span class="op" id="2789587">[</span><span class="ident" id="2789588">n</span><span class="op" id="2789589">:</span><span class="op" id="2789590">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2789595">chunk</span>&nbsp;<span class="op" id="2789601">=</span>&nbsp;<span class="ident" id="2789603">chunk</span><span class="op" id="2789608">[</span><span class="num" id="2789609">1</span><span class="op" id="2789610">:</span><span class="op" id="2789611">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2789616">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2789639">notNegated</span>&nbsp;<span class="op" id="2789650">:=</span>&nbsp;<span class="builtintype" id="2789653">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789661">if</span>&nbsp;<span class="builtinfunc" id="2789664">len</span><span class="op" id="2789667">(</span><span class="ident" id="2789668">chunk</span><span class="op" id="2789673">)</span>&nbsp;<span class="op" id="2789675">&gt;</span>&nbsp;<span class="num" id="2789677">0</span>&nbsp;<span class="op" id="2789679">&amp;&amp;</span>&nbsp;<span class="ident" id="2789682">chunk</span><span class="op" id="2789687">[</span><span class="num" id="2789688">0</span><span class="op" id="2789689">]</span>&nbsp;<span class="op" id="2789691">==</span>&nbsp;<span class="string" id="2789694">&#39;^&#39;</span>&nbsp;<span class="op" id="2789698">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2789704">notNegated</span>&nbsp;<span class="op" id="2789715">=</span>&nbsp;<span class="builtintype" id="2789717">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2789727">chunk</span>&nbsp;<span class="op" id="2789733">=</span>&nbsp;<span class="ident" id="2789735">chunk</span><span class="op" id="2789740">[</span><span class="num" id="2789741">1</span><span class="op" id="2789742">:</span><span class="op" id="2789743">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2789748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2789753">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2789776">match</span>&nbsp;<span class="op" id="2789782">:=</span>&nbsp;<span class="builtintype" id="2789785">false</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2789794">nrange</span>&nbsp;<span class="op" id="2789801">:=</span>&nbsp;<span class="num" id="2789804">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789809">for</span>&nbsp;<span class="op" id="2789813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789819">if</span>&nbsp;<span class="builtinfunc" id="2789822">len</span><span class="op" id="2789825">(</span><span class="ident" id="2789826">chunk</span><span class="op" id="2789831">)</span>&nbsp;<span class="op" id="2789833">&gt;</span>&nbsp;<span class="num" id="2789835">0</span>&nbsp;<span class="op" id="2789837">&amp;&amp;</span>&nbsp;<span class="ident" id="2789840">chunk</span><span class="op" id="2789845">[</span><span class="num" id="2789846">0</span><span class="op" id="2789847">]</span>&nbsp;<span class="op" id="2789849">==</span>&nbsp;<span class="string" id="2789852">&#39;]&#39;</span>&nbsp;<span class="op" id="2789856">&amp;&amp;</span>&nbsp;<span class="ident" id="2789859">nrange</span>&nbsp;<span class="op" id="2789866">&gt;</span>&nbsp;<span class="num" id="2789868">0</span>&nbsp;<span class="op" id="2789870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2789877">chunk</span>&nbsp;<span class="op" id="2789883">=</span>&nbsp;<span class="ident" id="2789885">chunk</span><span class="op" id="2789890">[</span><span class="num" id="2789891">1</span><span class="op" id="2789892">:</span><span class="op" id="2789893">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789900">break</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2789910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789916">var</span>&nbsp;<span class="ident" id="2789920">lo</span><span class="op" id="2789922">,</span>&nbsp;<span class="ident" id="2789924">hi</span>&nbsp;<span class="builtintype" id="2789927">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789936">if</span>&nbsp;<span class="ident" id="2789939">lo</span><span class="op" id="2789941">,</span>&nbsp;<span class="ident" id="2789943">chunk</span><span class="op" id="2789948">,</span>&nbsp;<span class="ident" id="2789950">err</span>&nbsp;<span class="op" id="2789954">=</span>&nbsp;<span class="ident" id="2789956">getEsc</span><span class="op" id="2789962">(</span><span class="ident" id="2789963">chunk</span><span class="op" id="2789968">)</span><span class="op" id="2789969">;</span>&nbsp;<span class="ident" id="2789971">err</span>&nbsp;<span class="op" id="2789975">!=</span>&nbsp;<span class="ident" id="2789978">nil</span>&nbsp;<span class="op" id="2789982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789989">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790000">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790006">hi</span>&nbsp;<span class="op" id="2790009">=</span>&nbsp;<span class="ident" id="2790011">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790018">if</span>&nbsp;<span class="ident" id="2790021">chunk</span><span class="op" id="2790026">[</span><span class="num" id="2790027">0</span><span class="op" id="2790028">]</span>&nbsp;<span class="op" id="2790030">==</span>&nbsp;<span class="string" id="2790033">&#39;-&#39;</span>&nbsp;<span class="op" id="2790037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790044">if</span>&nbsp;<span class="ident" id="2790047">hi</span><span class="op" id="2790049">,</span>&nbsp;<span class="ident" id="2790051">chunk</span><span class="op" id="2790056">,</span>&nbsp;<span class="ident" id="2790058">err</span>&nbsp;<span class="op" id="2790062">=</span>&nbsp;<span class="ident" id="2790064">getEsc</span><span class="op" id="2790070">(</span><span class="ident" id="2790071">chunk</span><span class="op" id="2790076">[</span><span class="num" id="2790077">1</span><span class="op" id="2790078">:</span><span class="op" id="2790079">]</span><span class="op" id="2790080">)</span><span class="op" id="2790081">;</span>&nbsp;<span class="ident" id="2790083">err</span>&nbsp;<span class="op" id="2790087">!=</span>&nbsp;<span class="ident" id="2790090">nil</span>&nbsp;<span class="op" id="2790094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790102">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790114">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790126">if</span>&nbsp;<span class="ident" id="2790129">lo</span>&nbsp;<span class="op" id="2790132">&lt;=</span>&nbsp;<span class="ident" id="2790135">r</span>&nbsp;<span class="op" id="2790137">&amp;&amp;</span>&nbsp;<span class="ident" id="2790140">r</span>&nbsp;<span class="op" id="2790142">&lt;=</span>&nbsp;<span class="ident" id="2790145">hi</span>&nbsp;<span class="op" id="2790148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790155">match</span>&nbsp;<span class="op" id="2790161">=</span>&nbsp;<span class="builtintype" id="2790163">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790178">nrange</span><span class="op" id="2790184">++</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790195">if</span>&nbsp;<span class="ident" id="2790198">match</span>&nbsp;<span class="op" id="2790204">!=</span>&nbsp;<span class="ident" id="2790207">notNegated</span>&nbsp;<span class="op" id="2790218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790224">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790239">case</span>&nbsp;<span class="string" id="2790244">&#39;?&#39;</span><span class="op" id="2790247">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790252">if</span>&nbsp;<span class="ident" id="2790255">s</span><span class="op" id="2790256">[</span><span class="num" id="2790257">0</span><span class="op" id="2790258">]</span>&nbsp;<span class="op" id="2790260">==</span>&nbsp;<span class="string" id="2790263">&#39;/&#39;</span>&nbsp;<span class="op" id="2790267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790273">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790288">_</span><span class="op" id="2790289">,</span>&nbsp;<span class="ident" id="2790291">n</span>&nbsp;<span class="op" id="2790293">:=</span>&nbsp;<span class="ident" id="2790296">utf8</span><span class="op" id="2790300">.</span><span class="ident" id="2790301">DecodeRuneInString</span><span class="op" id="2790319">(</span><span class="ident" id="2790320">s</span><span class="op" id="2790321">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790326">s</span>&nbsp;<span class="op" id="2790328">=</span>&nbsp;<span class="ident" id="2790330">s</span><span class="op" id="2790331">[</span><span class="ident" id="2790332">n</span><span class="op" id="2790333">:</span><span class="op" id="2790334">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790339">chunk</span>&nbsp;<span class="op" id="2790345">=</span>&nbsp;<span class="ident" id="2790347">chunk</span><span class="op" id="2790352">[</span><span class="num" id="2790353">1</span><span class="op" id="2790354">:</span><span class="op" id="2790355">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790360">case</span>&nbsp;<span class="string" id="2790365">&#39;\\&#39;</span><span class="op" id="2790369">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790374">chunk</span>&nbsp;<span class="op" id="2790380">=</span>&nbsp;<span class="ident" id="2790382">chunk</span><span class="op" id="2790387">[</span><span class="num" id="2790388">1</span><span class="op" id="2790389">:</span><span class="op" id="2790390">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790395">if</span>&nbsp;<span class="builtinfunc" id="2790398">len</span><span class="op" id="2790401">(</span><span class="ident" id="2790402">chunk</span><span class="op" id="2790407">)</span>&nbsp;<span class="op" id="2790409">==</span>&nbsp;<span class="num" id="2790412">0</span>&nbsp;<span class="op" id="2790414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790420">err</span>&nbsp;<span class="op" id="2790424">=</span>&nbsp;<span class="ident" id="2790426">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790444">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790459">fallthrough</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790474">default</span><span class="op" id="2790481">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790486">if</span>&nbsp;<span class="ident" id="2790489">chunk</span><span class="op" id="2790494">[</span><span class="num" id="2790495">0</span><span class="op" id="2790496">]</span>&nbsp;<span class="op" id="2790498">!=</span>&nbsp;<span class="ident" id="2790501">s</span><span class="op" id="2790502">[</span><span class="num" id="2790503">0</span><span class="op" id="2790504">]</span>&nbsp;<span class="op" id="2790506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790512">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790522">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790527">s</span>&nbsp;<span class="op" id="2790529">=</span>&nbsp;<span class="ident" id="2790531">s</span><span class="op" id="2790532">[</span><span class="num" id="2790533">1</span><span class="op" id="2790534">:</span><span class="op" id="2790535">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790540">chunk</span>&nbsp;<span class="op" id="2790546">=</span>&nbsp;<span class="ident" id="2790548">chunk</span><span class="op" id="2790553">[</span><span class="num" id="2790554">1</span><span class="op" id="2790555">:</span><span class="op" id="2790556">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790566">return</span>&nbsp;<span class="ident" id="2790573">s</span><span class="op" id="2790574">,</span>&nbsp;<span class="builtintype" id="2790576">true</span><span class="op" id="2790580">,</span>&nbsp;<span class="ident" id="2790582">nil</span><br>
<span class="lineno">185</span><span class="op" id="2790586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2790589">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="2790668">func</span>&nbsp;<span class="ident" id="2790673">getEsc</span><span class="op" id="2790679">(</span><span class="ident" id="2790680">chunk</span>&nbsp;<span class="builtintype" id="2790686">string</span><span class="op" id="2790692">)</span>&nbsp;<span class="op" id="2790694">(</span><span class="ident" id="2790695">r</span>&nbsp;<span class="builtintype" id="2790697">rune</span><span class="op" id="2790701">,</span>&nbsp;<span class="ident" id="2790703">nchunk</span>&nbsp;<span class="builtintype" id="2790710">string</span><span class="op" id="2790716">,</span>&nbsp;<span class="ident" id="2790718">err</span>&nbsp;<span class="builtintype" id="2790722">error</span><span class="op" id="2790727">)</span>&nbsp;<span class="op" id="2790729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790732">if</span>&nbsp;<span class="builtinfunc" id="2790735">len</span><span class="op" id="2790738">(</span><span class="ident" id="2790739">chunk</span><span class="op" id="2790744">)</span>&nbsp;<span class="op" id="2790746">==</span>&nbsp;<span class="num" id="2790749">0</span>&nbsp;<span class="op" id="2790751">||</span>&nbsp;<span class="ident" id="2790754">chunk</span><span class="op" id="2790759">[</span><span class="num" id="2790760">0</span><span class="op" id="2790761">]</span>&nbsp;<span class="op" id="2790763">==</span>&nbsp;<span class="string" id="2790766">&#39;-&#39;</span>&nbsp;<span class="op" id="2790770">||</span>&nbsp;<span class="ident" id="2790773">chunk</span><span class="op" id="2790778">[</span><span class="num" id="2790779">0</span><span class="op" id="2790780">]</span>&nbsp;<span class="op" id="2790782">==</span>&nbsp;<span class="string" id="2790785">&#39;]&#39;</span>&nbsp;<span class="op" id="2790789">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790793">err</span>&nbsp;<span class="op" id="2790797">=</span>&nbsp;<span class="ident" id="2790799">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790815">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790826">if</span>&nbsp;<span class="ident" id="2790829">chunk</span><span class="op" id="2790834">[</span><span class="num" id="2790835">0</span><span class="op" id="2790836">]</span>&nbsp;<span class="op" id="2790838">==</span>&nbsp;<span class="string" id="2790841">&#39;\\&#39;</span>&nbsp;<span class="op" id="2790846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790850">chunk</span>&nbsp;<span class="op" id="2790856">=</span>&nbsp;<span class="ident" id="2790858">chunk</span><span class="op" id="2790863">[</span><span class="num" id="2790864">1</span><span class="op" id="2790865">:</span><span class="op" id="2790866">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790870">if</span>&nbsp;<span class="builtinfunc" id="2790873">len</span><span class="op" id="2790876">(</span><span class="ident" id="2790877">chunk</span><span class="op" id="2790882">)</span>&nbsp;<span class="op" id="2790884">==</span>&nbsp;<span class="num" id="2790887">0</span>&nbsp;<span class="op" id="2790889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790894">err</span>&nbsp;<span class="op" id="2790898">=</span>&nbsp;<span class="ident" id="2790900">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790917">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2790929">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2790932">r</span><span class="op" id="2790933">,</span>&nbsp;<span class="ident" id="2790935">n</span>&nbsp;<span class="op" id="2790937">:=</span>&nbsp;<span class="ident" id="2790940">utf8</span><span class="op" id="2790944">.</span><span class="ident" id="2790945">DecodeRuneInString</span><span class="op" id="2790963">(</span><span class="ident" id="2790964">chunk</span><span class="op" id="2790969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790972">if</span>&nbsp;<span class="ident" id="2790975">r</span>&nbsp;<span class="op" id="2790977">==</span>&nbsp;<span class="ident" id="2790980">utf8</span><span class="op" id="2790984">.</span><span class="ident" id="2790985">RuneError</span>&nbsp;<span class="op" id="2790995">&amp;&amp;</span>&nbsp;<span class="ident" id="2790998">n</span>&nbsp;<span class="op" id="2791000">==</span>&nbsp;<span class="num" id="2791003">1</span>&nbsp;<span class="op" id="2791005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791009">err</span>&nbsp;<span class="op" id="2791013">=</span>&nbsp;<span class="ident" id="2791015">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2791030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791033">nchunk</span>&nbsp;<span class="op" id="2791040">=</span>&nbsp;<span class="ident" id="2791042">chunk</span><span class="op" id="2791047">[</span><span class="ident" id="2791048">n</span><span class="op" id="2791049">:</span><span class="op" id="2791050">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2791053">if</span>&nbsp;<span class="builtinfunc" id="2791056">len</span><span class="op" id="2791059">(</span><span class="ident" id="2791060">nchunk</span><span class="op" id="2791066">)</span>&nbsp;<span class="op" id="2791068">==</span>&nbsp;<span class="num" id="2791071">0</span>&nbsp;<span class="op" id="2791073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791077">err</span>&nbsp;<span class="op" id="2791081">=</span>&nbsp;<span class="ident" id="2791083">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2791098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2791101">return</span><br>
<span class="lineno"></span><span class="op" id="2791108">}</span>
</div>
</body>
</html>
