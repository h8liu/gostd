<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template</h2>
<ul>
<li><a href="/gostd/text/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/text/template/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/text/template/examplefiles_test.go.html">examplefiles_test.go</a></li>
<li><a href="/gostd/text/template/examplefunc_test.go.html">examplefunc_test.go</a></li>
<li><a href="/gostd/text/template/exec.go.html">exec.go</a></li>
<li><a href="/gostd/text/template/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/text/template/funcs.go.html" class="current">funcs.go</a></li>
<li><a href="/gostd/text/template/helper.go.html">helper.go</a></li>
<li><a href="/gostd/text/template/multi_test.go.html">multi_test.go</a></li>
<li><a href="/gostd/text/template/template.go.html">template.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5329338">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5329393">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5329447">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5329498">package</span>&nbsp;<span class="ident" id="5329506">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5329516">import</span>&nbsp;<span class="op" id="5329523">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5329526">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5329535">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5329545">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5329552">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5329558">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5329569">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5329580">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5329591">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5329602">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5329617">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5329620">//&nbsp;FuncMap&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;map&nbsp;defining&nbsp;the&nbsp;mapping&nbsp;from&nbsp;names&nbsp;to&nbsp;functions.</span><br>
<span class="lineno">20</span><span class="comment" id="5329700">//&nbsp;Each&nbsp;function&nbsp;must&nbsp;have&nbsp;either&nbsp;a&nbsp;single&nbsp;return&nbsp;value,&nbsp;or&nbsp;two&nbsp;return&nbsp;values&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5329781">//&nbsp;which&nbsp;the&nbsp;second&nbsp;has&nbsp;type&nbsp;error.&nbsp;In&nbsp;that&nbsp;case,&nbsp;if&nbsp;the&nbsp;second&nbsp;(error)</span><br>
<span class="lineno"></span><span class="comment" id="5329853">//&nbsp;return&nbsp;value&nbsp;evaluates&nbsp;to&nbsp;non-nil&nbsp;during&nbsp;execution,&nbsp;execution&nbsp;terminates&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5329933">//&nbsp;Execute&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5329964">type</span>&nbsp;<span class="ident" id="5329969">FuncMap</span>&nbsp;<span class="keyword" id="5329977">map</span><span class="op" id="5329980">[</span><span class="builtintype" id="5329981">string</span><span class="op" id="5329987">]</span><span class="keyword" id="5329988">interface</span><span class="op" id="5329997">{</span><span class="op" id="5329998">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5330001">var</span>&nbsp;<span class="ident" id="5330005">builtins</span>&nbsp;<span class="op" id="5330014">=</span>&nbsp;<span class="ident" id="5330016">FuncMap</span><span class="op" id="5330023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330026">&#34;and&#34;</span><span class="op" id="5330031">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5330038">and</span><span class="op" id="5330041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330044">&#34;call&#34;</span><span class="op" id="5330050">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5330056">call</span><span class="op" id="5330060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330063">&#34;html&#34;</span><span class="op" id="5330069">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5330075">HTMLEscaper</span><span class="op" id="5330086">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330089">&#34;index&#34;</span><span class="op" id="5330096">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5330101">index</span><span class="op" id="5330106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330109">&#34;js&#34;</span><span class="op" id="5330113">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5330121">JSEscaper</span><span class="op" id="5330130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330133">&#34;len&#34;</span><span class="op" id="5330138">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5330145">length</span><span class="op" id="5330151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330154">&#34;not&#34;</span><span class="op" id="5330159">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5330166">not</span><span class="op" id="5330169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330172">&#34;or&#34;</span><span class="op" id="5330176">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5330184">or</span><span class="op" id="5330186">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330189">&#34;print&#34;</span><span class="op" id="5330196">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5330201">fmt</span><span class="op" id="5330204">.</span><span class="ident" id="5330205">Sprint</span><span class="op" id="5330211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330214">&#34;printf&#34;</span><span class="op" id="5330222">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5330226">fmt</span><span class="op" id="5330229">.</span><span class="ident" id="5330230">Sprintf</span><span class="op" id="5330237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330240">&#34;println&#34;</span><span class="op" id="5330249">:</span>&nbsp;&nbsp;<span class="ident" id="5330252">fmt</span><span class="op" id="5330255">.</span><span class="ident" id="5330256">Sprintln</span><span class="op" id="5330264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330267">&#34;urlquery&#34;</span><span class="op" id="5330277">:</span>&nbsp;<span class="ident" id="5330279">URLQueryEscaper</span><span class="op" id="5330294">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5330298">//&nbsp;Comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330314">&#34;eq&#34;</span><span class="op" id="5330318">:</span>&nbsp;<span class="ident" id="5330320">eq</span><span class="op" id="5330322">,</span>&nbsp;<span class="comment" id="5330324">//&nbsp;==</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330331">&#34;ge&#34;</span><span class="op" id="5330335">:</span>&nbsp;<span class="ident" id="5330337">ge</span><span class="op" id="5330339">,</span>&nbsp;<span class="comment" id="5330341">//&nbsp;&gt;=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330348">&#34;gt&#34;</span><span class="op" id="5330352">:</span>&nbsp;<span class="ident" id="5330354">gt</span><span class="op" id="5330356">,</span>&nbsp;<span class="comment" id="5330358">//&nbsp;&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330364">&#34;le&#34;</span><span class="op" id="5330368">:</span>&nbsp;<span class="ident" id="5330370">le</span><span class="op" id="5330372">,</span>&nbsp;<span class="comment" id="5330374">//&nbsp;&lt;=</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330381">&#34;lt&#34;</span><span class="op" id="5330385">:</span>&nbsp;<span class="ident" id="5330387">lt</span><span class="op" id="5330389">,</span>&nbsp;<span class="comment" id="5330391">//&nbsp;&lt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5330397">&#34;ne&#34;</span><span class="op" id="5330401">:</span>&nbsp;<span class="ident" id="5330403">ne</span><span class="op" id="5330405">,</span>&nbsp;<span class="comment" id="5330407">//&nbsp;!=</span><br>
<span class="lineno"></span><span class="op" id="5330413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5330416">var</span>&nbsp;<span class="ident" id="5330420">builtinFuncs</span>&nbsp;<span class="op" id="5330433">=</span>&nbsp;<span class="ident" id="5330435">createValueFuncs</span><span class="op" id="5330451">(</span><span class="ident" id="5330452">builtins</span><span class="op" id="5330460">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="5330463">//&nbsp;createValueFuncs&nbsp;turns&nbsp;a&nbsp;FuncMap&nbsp;into&nbsp;a&nbsp;map[string]reflect.Value</span><br>
<span class="lineno"></span><span class="keyword" id="5330531">func</span>&nbsp;<span class="ident" id="5330536">createValueFuncs</span><span class="op" id="5330552">(</span><span class="ident" id="5330553">funcMap</span>&nbsp;<span class="ident" id="5330561">FuncMap</span><span class="op" id="5330568">)</span>&nbsp;<span class="keyword" id="5330570">map</span><span class="op" id="5330573">[</span><span class="builtintype" id="5330574">string</span><span class="op" id="5330580">]</span><span class="ident" id="5330581">reflect</span><span class="op" id="5330588">.</span><span class="ident" id="5330589">Value</span>&nbsp;<span class="op" id="5330595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5330598">m</span>&nbsp;<span class="op" id="5330600">:=</span>&nbsp;<span class="builtinfunc" id="5330603">make</span><span class="op" id="5330607">(</span><span class="keyword" id="5330608">map</span><span class="op" id="5330611">[</span><span class="builtintype" id="5330612">string</span><span class="op" id="5330618">]</span><span class="ident" id="5330619">reflect</span><span class="op" id="5330626">.</span><span class="ident" id="5330627">Value</span><span class="op" id="5330632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5330635">addValueFuncs</span><span class="op" id="5330648">(</span><span class="ident" id="5330649">m</span><span class="op" id="5330650">,</span>&nbsp;<span class="ident" id="5330652">funcMap</span><span class="op" id="5330659">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5330662">return</span>&nbsp;<span class="ident" id="5330669">m</span><br>
<span class="lineno"></span><span class="op" id="5330671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5330674">//&nbsp;addValueFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs,&nbsp;converting&nbsp;them&nbsp;to&nbsp;reflect.Values.</span><br>
<span class="lineno"></span><span class="keyword" id="5330765">func</span>&nbsp;<span class="ident" id="5330770">addValueFuncs</span><span class="op" id="5330783">(</span><span class="ident" id="5330784">out</span>&nbsp;<span class="keyword" id="5330788">map</span><span class="op" id="5330791">[</span><span class="builtintype" id="5330792">string</span><span class="op" id="5330798">]</span><span class="ident" id="5330799">reflect</span><span class="op" id="5330806">.</span><span class="ident" id="5330807">Value</span><span class="op" id="5330812">,</span>&nbsp;<span class="ident" id="5330814">in</span>&nbsp;<span class="ident" id="5330817">FuncMap</span><span class="op" id="5330824">)</span>&nbsp;<span class="op" id="5330826">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5330829">for</span>&nbsp;<span class="ident" id="5330833">name</span><span class="op" id="5330837">,</span>&nbsp;<span class="ident" id="5330839">fn</span>&nbsp;<span class="op" id="5330842">:=</span>&nbsp;<span class="keyword" id="5330845">range</span>&nbsp;<span class="ident" id="5330851">in</span>&nbsp;<span class="op" id="5330854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5330858">v</span>&nbsp;<span class="op" id="5330860">:=</span>&nbsp;<span class="ident" id="5330863">reflect</span><span class="op" id="5330870">.</span><span class="ident" id="5330871">ValueOf</span><span class="op" id="5330878">(</span><span class="ident" id="5330879">fn</span><span class="op" id="5330881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5330885">if</span>&nbsp;<span class="ident" id="5330888">v</span><span class="op" id="5330889">.</span><span class="ident" id="5330890">Kind</span><span class="op" id="5330894">(</span><span class="op" id="5330895">)</span>&nbsp;<span class="op" id="5330897">!=</span>&nbsp;<span class="ident" id="5330900">reflect</span><span class="op" id="5330907">.</span><span class="ident" id="5330908">Func</span>&nbsp;<span class="op" id="5330913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5330918">panic</span><span class="op" id="5330923">(</span><span class="string" id="5330924">&#34;value&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="5330937">+</span>&nbsp;<span class="ident" id="5330939">name</span>&nbsp;<span class="op" id="5330944">+</span>&nbsp;<span class="string" id="5330946">&#34;&nbsp;not&nbsp;a&nbsp;function&#34;</span><span class="op" id="5330963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5330967">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5330971">if</span>&nbsp;<span class="op" id="5330974">!</span><span class="ident" id="5330975">goodFunc</span><span class="op" id="5330983">(</span><span class="ident" id="5330984">v</span><span class="op" id="5330985">.</span><span class="ident" id="5330986">Type</span><span class="op" id="5330990">(</span><span class="op" id="5330991">)</span><span class="op" id="5330992">)</span>&nbsp;<span class="op" id="5330994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5330999">panic</span><span class="op" id="5331004">(</span><span class="ident" id="5331005">fmt</span><span class="op" id="5331008">.</span><span class="ident" id="5331009">Errorf</span><span class="op" id="5331015">(</span><span class="string" id="5331016">&#34;can&#39;t&nbsp;install&nbsp;method/function&nbsp;%q&nbsp;with&nbsp;%d&nbsp;results&#34;</span><span class="op" id="5331066">,</span>&nbsp;<span class="ident" id="5331068">name</span><span class="op" id="5331072">,</span>&nbsp;<span class="ident" id="5331074">v</span><span class="op" id="5331075">.</span><span class="ident" id="5331076">Type</span><span class="op" id="5331080">(</span><span class="op" id="5331081">)</span><span class="op" id="5331082">.</span><span class="ident" id="5331083">NumOut</span><span class="op" id="5331089">(</span><span class="op" id="5331090">)</span><span class="op" id="5331091">)</span><span class="op" id="5331092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5331096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5331100">out</span><span class="op" id="5331103">[</span><span class="ident" id="5331104">name</span><span class="op" id="5331108">]</span>&nbsp;<span class="op" id="5331110">=</span>&nbsp;<span class="ident" id="5331112">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5331115">}</span><br>
<span class="lineno">70</span><span class="op" id="5331117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5331120">//&nbsp;addFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs.&nbsp;It&nbsp;does&nbsp;no&nbsp;checking&nbsp;of&nbsp;the&nbsp;input&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="5331206">//&nbsp;call&nbsp;addValueFuncs&nbsp;first.</span><br>
<span class="lineno"></span><span class="keyword" id="5331235">func</span>&nbsp;<span class="ident" id="5331240">addFuncs</span><span class="op" id="5331248">(</span><span class="ident" id="5331249">out</span><span class="op" id="5331252">,</span>&nbsp;<span class="ident" id="5331254">in</span>&nbsp;<span class="ident" id="5331257">FuncMap</span><span class="op" id="5331264">)</span>&nbsp;<span class="op" id="5331266">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331269">for</span>&nbsp;<span class="ident" id="5331273">name</span><span class="op" id="5331277">,</span>&nbsp;<span class="ident" id="5331279">fn</span>&nbsp;<span class="op" id="5331282">:=</span>&nbsp;<span class="keyword" id="5331285">range</span>&nbsp;<span class="ident" id="5331291">in</span>&nbsp;<span class="op" id="5331294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5331298">out</span><span class="op" id="5331301">[</span><span class="ident" id="5331302">name</span><span class="op" id="5331306">]</span>&nbsp;<span class="op" id="5331308">=</span>&nbsp;<span class="ident" id="5331310">fn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5331314">}</span><br>
<span class="lineno"></span><span class="op" id="5331316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="5331319">//&nbsp;goodFunc&nbsp;checks&nbsp;that&nbsp;the&nbsp;function&nbsp;or&nbsp;method&nbsp;has&nbsp;the&nbsp;right&nbsp;result&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="5331398">func</span>&nbsp;<span class="ident" id="5331403">goodFunc</span><span class="op" id="5331411">(</span><span class="ident" id="5331412">typ</span>&nbsp;<span class="ident" id="5331416">reflect</span><span class="op" id="5331423">.</span><span class="ident" id="5331424">Type</span><span class="op" id="5331428">)</span>&nbsp;<span class="builtintype" id="5331430">bool</span>&nbsp;<span class="op" id="5331435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5331438">//&nbsp;We&nbsp;allow&nbsp;functions&nbsp;with&nbsp;1&nbsp;result&nbsp;or&nbsp;2&nbsp;results&nbsp;where&nbsp;the&nbsp;second&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331518">switch</span>&nbsp;<span class="op" id="5331525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331528">case</span>&nbsp;<span class="ident" id="5331533">typ</span><span class="op" id="5331536">.</span><span class="ident" id="5331537">NumOut</span><span class="op" id="5331543">(</span><span class="op" id="5331544">)</span>&nbsp;<span class="op" id="5331546">==</span>&nbsp;<span class="num" id="5331549">1</span><span class="op" id="5331550">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331554">return</span>&nbsp;<span class="builtintype" id="5331561">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331567">case</span>&nbsp;<span class="ident" id="5331572">typ</span><span class="op" id="5331575">.</span><span class="ident" id="5331576">NumOut</span><span class="op" id="5331582">(</span><span class="op" id="5331583">)</span>&nbsp;<span class="op" id="5331585">==</span>&nbsp;<span class="num" id="5331588">2</span>&nbsp;<span class="op" id="5331590">&amp;&amp;</span>&nbsp;<span class="ident" id="5331593">typ</span><span class="op" id="5331596">.</span><span class="ident" id="5331597">Out</span><span class="op" id="5331600">(</span><span class="num" id="5331601">1</span><span class="op" id="5331602">)</span>&nbsp;<span class="op" id="5331604">==</span>&nbsp;<span class="ident" id="5331607">errorType</span><span class="op" id="5331616">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331620">return</span>&nbsp;<span class="builtintype" id="5331627">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5331633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331636">return</span>&nbsp;<span class="builtintype" id="5331643">false</span><br>
<span class="lineno">90</span><span class="op" id="5331649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5331652">//&nbsp;findFunction&nbsp;looks&nbsp;for&nbsp;a&nbsp;function&nbsp;in&nbsp;the&nbsp;template,&nbsp;and&nbsp;global&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="5331722">func</span>&nbsp;<span class="ident" id="5331727">findFunction</span><span class="op" id="5331739">(</span><span class="ident" id="5331740">name</span>&nbsp;<span class="builtintype" id="5331745">string</span><span class="op" id="5331751">,</span>&nbsp;<span class="ident" id="5331753">tmpl</span>&nbsp;<span class="op" id="5331758">*</span><span class="ident" id="5331759">Template</span><span class="op" id="5331767">)</span>&nbsp;<span class="op" id="5331769">(</span><span class="ident" id="5331770">reflect</span><span class="op" id="5331777">.</span><span class="ident" id="5331778">Value</span><span class="op" id="5331783">,</span>&nbsp;<span class="builtintype" id="5331785">bool</span><span class="op" id="5331789">)</span>&nbsp;<span class="op" id="5331791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331794">if</span>&nbsp;<span class="ident" id="5331797">tmpl</span>&nbsp;<span class="op" id="5331802">!=</span>&nbsp;<span class="ident" id="5331805">nil</span>&nbsp;<span class="op" id="5331809">&amp;&amp;</span>&nbsp;<span class="ident" id="5331812">tmpl</span><span class="op" id="5331816">.</span><span class="ident" id="5331817">common</span>&nbsp;<span class="op" id="5331824">!=</span>&nbsp;<span class="ident" id="5331827">nil</span>&nbsp;<span class="op" id="5331831">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331835">if</span>&nbsp;<span class="ident" id="5331838">fn</span>&nbsp;<span class="op" id="5331841">:=</span>&nbsp;<span class="ident" id="5331844">tmpl</span><span class="op" id="5331848">.</span><span class="ident" id="5331849">execFuncs</span><span class="op" id="5331858">[</span><span class="ident" id="5331859">name</span><span class="op" id="5331863">]</span><span class="op" id="5331864">;</span>&nbsp;<span class="ident" id="5331866">fn</span><span class="op" id="5331868">.</span><span class="ident" id="5331869">IsValid</span><span class="op" id="5331876">(</span><span class="op" id="5331877">)</span>&nbsp;<span class="op" id="5331879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331884">return</span>&nbsp;<span class="ident" id="5331891">fn</span><span class="op" id="5331893">,</span>&nbsp;<span class="builtintype" id="5331895">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5331902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5331905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331908">if</span>&nbsp;<span class="ident" id="5331911">fn</span>&nbsp;<span class="op" id="5331914">:=</span>&nbsp;<span class="ident" id="5331917">builtinFuncs</span><span class="op" id="5331929">[</span><span class="ident" id="5331930">name</span><span class="op" id="5331934">]</span><span class="op" id="5331935">;</span>&nbsp;<span class="ident" id="5331937">fn</span><span class="op" id="5331939">.</span><span class="ident" id="5331940">IsValid</span><span class="op" id="5331947">(</span><span class="op" id="5331948">)</span>&nbsp;<span class="op" id="5331950">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331954">return</span>&nbsp;<span class="ident" id="5331961">fn</span><span class="op" id="5331963">,</span>&nbsp;<span class="builtintype" id="5331965">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5331971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5331974">return</span>&nbsp;<span class="ident" id="5331981">reflect</span><span class="op" id="5331988">.</span><span class="ident" id="5331989">Value</span><span class="op" id="5331994">{</span><span class="op" id="5331995">}</span><span class="op" id="5331996">,</span>&nbsp;<span class="builtintype" id="5331998">false</span><br>
<span class="lineno"></span><span class="op" id="5332004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5332007">//&nbsp;Indexing.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5332021">//&nbsp;index&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;indexing&nbsp;its&nbsp;first&nbsp;argument&nbsp;by&nbsp;the&nbsp;following</span><br>
<span class="lineno"></span><span class="comment" id="5332097">//&nbsp;arguments.&nbsp;&nbsp;Thus&nbsp;&#34;index&nbsp;x&nbsp;1&nbsp;2&nbsp;3&#34;&nbsp;is,&nbsp;in&nbsp;Go&nbsp;syntax,&nbsp;x[1][2][3].&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="5332168">//&nbsp;indexed&nbsp;item&nbsp;must&nbsp;be&nbsp;a&nbsp;map,&nbsp;slice,&nbsp;or&nbsp;array.</span><br>
<span class="lineno">110</span><span class="keyword" id="5332216">func</span>&nbsp;<span class="ident" id="5332221">index</span><span class="op" id="5332226">(</span><span class="ident" id="5332227">item</span>&nbsp;<span class="keyword" id="5332232">interface</span><span class="op" id="5332241">{</span><span class="op" id="5332242">}</span><span class="op" id="5332243">,</span>&nbsp;<span class="ident" id="5332245">indices</span>&nbsp;<span class="op" id="5332253">...</span><span class="keyword" id="5332256">interface</span><span class="op" id="5332265">{</span><span class="op" id="5332266">}</span><span class="op" id="5332267">)</span>&nbsp;<span class="op" id="5332269">(</span><span class="keyword" id="5332270">interface</span><span class="op" id="5332279">{</span><span class="op" id="5332280">}</span><span class="op" id="5332281">,</span>&nbsp;<span class="builtintype" id="5332283">error</span><span class="op" id="5332288">)</span>&nbsp;<span class="op" id="5332290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5332293">v</span>&nbsp;<span class="op" id="5332295">:=</span>&nbsp;<span class="ident" id="5332298">reflect</span><span class="op" id="5332305">.</span><span class="ident" id="5332306">ValueOf</span><span class="op" id="5332313">(</span><span class="ident" id="5332314">item</span><span class="op" id="5332318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332321">for</span>&nbsp;<span class="ident" id="5332325">_</span><span class="op" id="5332326">,</span>&nbsp;<span class="ident" id="5332328">i</span>&nbsp;<span class="op" id="5332330">:=</span>&nbsp;<span class="keyword" id="5332333">range</span>&nbsp;<span class="ident" id="5332339">indices</span>&nbsp;<span class="op" id="5332347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5332351">index</span>&nbsp;<span class="op" id="5332357">:=</span>&nbsp;<span class="ident" id="5332360">reflect</span><span class="op" id="5332367">.</span><span class="ident" id="5332368">ValueOf</span><span class="op" id="5332375">(</span><span class="ident" id="5332376">i</span><span class="op" id="5332377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332381">var</span>&nbsp;<span class="ident" id="5332385">isNil</span>&nbsp;<span class="builtintype" id="5332391">bool</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332398">if</span>&nbsp;<span class="ident" id="5332401">v</span><span class="op" id="5332402">,</span>&nbsp;<span class="ident" id="5332404">isNil</span>&nbsp;<span class="op" id="5332410">=</span>&nbsp;<span class="ident" id="5332412">indirect</span><span class="op" id="5332420">(</span><span class="ident" id="5332421">v</span><span class="op" id="5332422">)</span><span class="op" id="5332423">;</span>&nbsp;<span class="ident" id="5332425">isNil</span>&nbsp;<span class="op" id="5332431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332436">return</span>&nbsp;<span class="ident" id="5332443">nil</span><span class="op" id="5332446">,</span>&nbsp;<span class="ident" id="5332448">fmt</span><span class="op" id="5332451">.</span><span class="ident" id="5332452">Errorf</span><span class="op" id="5332458">(</span><span class="string" id="5332459">&#34;index&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="5332481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5332485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332489">switch</span>&nbsp;<span class="ident" id="5332496">v</span><span class="op" id="5332497">.</span><span class="ident" id="5332498">Kind</span><span class="op" id="5332502">(</span><span class="op" id="5332503">)</span>&nbsp;<span class="op" id="5332505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332509">case</span>&nbsp;<span class="ident" id="5332514">reflect</span><span class="op" id="5332521">.</span><span class="ident" id="5332522">Array</span><span class="op" id="5332527">,</span>&nbsp;<span class="ident" id="5332529">reflect</span><span class="op" id="5332536">.</span><span class="ident" id="5332537">Slice</span><span class="op" id="5332542">,</span>&nbsp;<span class="ident" id="5332544">reflect</span><span class="op" id="5332551">.</span><span class="ident" id="5332552">String</span><span class="op" id="5332558">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332563">var</span>&nbsp;<span class="ident" id="5332567">x</span>&nbsp;<span class="ident" id="5332569">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332578">switch</span>&nbsp;<span class="ident" id="5332585">index</span><span class="op" id="5332590">.</span><span class="ident" id="5332591">Kind</span><span class="op" id="5332595">(</span><span class="op" id="5332596">)</span>&nbsp;<span class="op" id="5332598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332603">case</span>&nbsp;<span class="ident" id="5332608">reflect</span><span class="op" id="5332615">.</span><span class="ident" id="5332616">Int</span><span class="op" id="5332619">,</span>&nbsp;<span class="ident" id="5332621">reflect</span><span class="op" id="5332628">.</span><span class="ident" id="5332629">Int8</span><span class="op" id="5332633">,</span>&nbsp;<span class="ident" id="5332635">reflect</span><span class="op" id="5332642">.</span><span class="ident" id="5332643">Int16</span><span class="op" id="5332648">,</span>&nbsp;<span class="ident" id="5332650">reflect</span><span class="op" id="5332657">.</span><span class="ident" id="5332658">Int32</span><span class="op" id="5332663">,</span>&nbsp;<span class="ident" id="5332665">reflect</span><span class="op" id="5332672">.</span><span class="ident" id="5332673">Int64</span><span class="op" id="5332678">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5332684">x</span>&nbsp;<span class="op" id="5332686">=</span>&nbsp;<span class="ident" id="5332688">index</span><span class="op" id="5332693">.</span><span class="ident" id="5332694">Int</span><span class="op" id="5332697">(</span><span class="op" id="5332698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332703">case</span>&nbsp;<span class="ident" id="5332708">reflect</span><span class="op" id="5332715">.</span><span class="ident" id="5332716">Uint</span><span class="op" id="5332720">,</span>&nbsp;<span class="ident" id="5332722">reflect</span><span class="op" id="5332729">.</span><span class="ident" id="5332730">Uint8</span><span class="op" id="5332735">,</span>&nbsp;<span class="ident" id="5332737">reflect</span><span class="op" id="5332744">.</span><span class="ident" id="5332745">Uint16</span><span class="op" id="5332751">,</span>&nbsp;<span class="ident" id="5332753">reflect</span><span class="op" id="5332760">.</span><span class="ident" id="5332761">Uint32</span><span class="op" id="5332767">,</span>&nbsp;<span class="ident" id="5332769">reflect</span><span class="op" id="5332776">.</span><span class="ident" id="5332777">Uint64</span><span class="op" id="5332783">,</span>&nbsp;<span class="ident" id="5332785">reflect</span><span class="op" id="5332792">.</span><span class="ident" id="5332793">Uintptr</span><span class="op" id="5332800">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5332806">x</span>&nbsp;<span class="op" id="5332808">=</span>&nbsp;<span class="ident" id="5332810">int64</span><span class="op" id="5332815">(</span><span class="ident" id="5332816">index</span><span class="op" id="5332821">.</span><span class="ident" id="5332822">Uint</span><span class="op" id="5332826">(</span><span class="op" id="5332827">)</span><span class="op" id="5332828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332833">default</span><span class="op" id="5332840">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332846">return</span>&nbsp;<span class="ident" id="5332853">nil</span><span class="op" id="5332856">,</span>&nbsp;<span class="ident" id="5332858">fmt</span><span class="op" id="5332861">.</span><span class="ident" id="5332862">Errorf</span><span class="op" id="5332868">(</span><span class="string" id="5332869">&#34;cannot&nbsp;index&nbsp;slice/array&nbsp;with&nbsp;type&nbsp;%s&#34;</span><span class="op" id="5332908">,</span>&nbsp;<span class="ident" id="5332910">index</span><span class="op" id="5332915">.</span><span class="ident" id="5332916">Type</span><span class="op" id="5332920">(</span><span class="op" id="5332921">)</span><span class="op" id="5332922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5332927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332932">if</span>&nbsp;<span class="ident" id="5332935">x</span>&nbsp;<span class="op" id="5332937">&lt;</span>&nbsp;<span class="num" id="5332939">0</span>&nbsp;<span class="op" id="5332941">||</span>&nbsp;<span class="ident" id="5332944">x</span>&nbsp;<span class="op" id="5332946">&gt;=</span>&nbsp;<span class="ident" id="5332949">int64</span><span class="op" id="5332954">(</span><span class="ident" id="5332955">v</span><span class="op" id="5332956">.</span><span class="ident" id="5332957">Len</span><span class="op" id="5332960">(</span><span class="op" id="5332961">)</span><span class="op" id="5332962">)</span>&nbsp;<span class="op" id="5332964">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5332970">return</span>&nbsp;<span class="ident" id="5332977">nil</span><span class="op" id="5332980">,</span>&nbsp;<span class="ident" id="5332982">fmt</span><span class="op" id="5332985">.</span><span class="ident" id="5332986">Errorf</span><span class="op" id="5332992">(</span><span class="string" id="5332993">&#34;index&nbsp;out&nbsp;of&nbsp;range:&nbsp;%d&#34;</span><span class="op" id="5333017">,</span>&nbsp;<span class="ident" id="5333019">x</span><span class="op" id="5333020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5333025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5333030">v</span>&nbsp;<span class="op" id="5333032">=</span>&nbsp;<span class="ident" id="5333034">v</span><span class="op" id="5333035">.</span><span class="ident" id="5333036">Index</span><span class="op" id="5333041">(</span><span class="builtintype" id="5333042">int</span><span class="op" id="5333045">(</span><span class="ident" id="5333046">x</span><span class="op" id="5333047">)</span><span class="op" id="5333048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333052">case</span>&nbsp;<span class="ident" id="5333057">reflect</span><span class="op" id="5333064">.</span><span class="ident" id="5333065">Map</span><span class="op" id="5333068">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333073">if</span>&nbsp;<span class="op" id="5333076">!</span><span class="ident" id="5333077">index</span><span class="op" id="5333082">.</span><span class="ident" id="5333083">IsValid</span><span class="op" id="5333090">(</span><span class="op" id="5333091">)</span>&nbsp;<span class="op" id="5333093">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5333099">index</span>&nbsp;<span class="op" id="5333105">=</span>&nbsp;<span class="ident" id="5333107">reflect</span><span class="op" id="5333114">.</span><span class="ident" id="5333115">Zero</span><span class="op" id="5333119">(</span><span class="ident" id="5333120">v</span><span class="op" id="5333121">.</span><span class="ident" id="5333122">Type</span><span class="op" id="5333126">(</span><span class="op" id="5333127">)</span><span class="op" id="5333128">.</span><span class="ident" id="5333129">Key</span><span class="op" id="5333132">(</span><span class="op" id="5333133">)</span><span class="op" id="5333134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5333139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333144">if</span>&nbsp;<span class="op" id="5333147">!</span><span class="ident" id="5333148">index</span><span class="op" id="5333153">.</span><span class="ident" id="5333154">Type</span><span class="op" id="5333158">(</span><span class="op" id="5333159">)</span><span class="op" id="5333160">.</span><span class="ident" id="5333161">AssignableTo</span><span class="op" id="5333173">(</span><span class="ident" id="5333174">v</span><span class="op" id="5333175">.</span><span class="ident" id="5333176">Type</span><span class="op" id="5333180">(</span><span class="op" id="5333181">)</span><span class="op" id="5333182">.</span><span class="ident" id="5333183">Key</span><span class="op" id="5333186">(</span><span class="op" id="5333187">)</span><span class="op" id="5333188">)</span>&nbsp;<span class="op" id="5333190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333196">return</span>&nbsp;<span class="ident" id="5333203">nil</span><span class="op" id="5333206">,</span>&nbsp;<span class="ident" id="5333208">fmt</span><span class="op" id="5333211">.</span><span class="ident" id="5333212">Errorf</span><span class="op" id="5333218">(</span><span class="string" id="5333219">&#34;%s&nbsp;is&nbsp;not&nbsp;index&nbsp;type&nbsp;for&nbsp;%s&#34;</span><span class="op" id="5333248">,</span>&nbsp;<span class="ident" id="5333250">index</span><span class="op" id="5333255">.</span><span class="ident" id="5333256">Type</span><span class="op" id="5333260">(</span><span class="op" id="5333261">)</span><span class="op" id="5333262">,</span>&nbsp;<span class="ident" id="5333264">v</span><span class="op" id="5333265">.</span><span class="ident" id="5333266">Type</span><span class="op" id="5333270">(</span><span class="op" id="5333271">)</span><span class="op" id="5333272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5333277">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333282">if</span>&nbsp;<span class="ident" id="5333285">x</span>&nbsp;<span class="op" id="5333287">:=</span>&nbsp;<span class="ident" id="5333290">v</span><span class="op" id="5333291">.</span><span class="ident" id="5333292">MapIndex</span><span class="op" id="5333300">(</span><span class="ident" id="5333301">index</span><span class="op" id="5333306">)</span><span class="op" id="5333307">;</span>&nbsp;<span class="ident" id="5333309">x</span><span class="op" id="5333310">.</span><span class="ident" id="5333311">IsValid</span><span class="op" id="5333318">(</span><span class="op" id="5333319">)</span>&nbsp;<span class="op" id="5333321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5333327">v</span>&nbsp;<span class="op" id="5333329">=</span>&nbsp;<span class="ident" id="5333331">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5333336">}</span>&nbsp;<span class="keyword" id="5333338">else</span>&nbsp;<span class="op" id="5333343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5333349">v</span>&nbsp;<span class="op" id="5333351">=</span>&nbsp;<span class="ident" id="5333353">reflect</span><span class="op" id="5333360">.</span><span class="ident" id="5333361">Zero</span><span class="op" id="5333365">(</span><span class="ident" id="5333366">v</span><span class="op" id="5333367">.</span><span class="ident" id="5333368">Type</span><span class="op" id="5333372">(</span><span class="op" id="5333373">)</span><span class="op" id="5333374">.</span><span class="ident" id="5333375">Elem</span><span class="op" id="5333379">(</span><span class="op" id="5333380">)</span><span class="op" id="5333381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5333386">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333390">default</span><span class="op" id="5333397">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333402">return</span>&nbsp;<span class="ident" id="5333409">nil</span><span class="op" id="5333412">,</span>&nbsp;<span class="ident" id="5333414">fmt</span><span class="op" id="5333417">.</span><span class="ident" id="5333418">Errorf</span><span class="op" id="5333424">(</span><span class="string" id="5333425">&#34;can&#39;t&nbsp;index&nbsp;item&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="5333454">,</span>&nbsp;<span class="ident" id="5333456">v</span><span class="op" id="5333457">.</span><span class="ident" id="5333458">Type</span><span class="op" id="5333462">(</span><span class="op" id="5333463">)</span><span class="op" id="5333464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5333468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5333471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333474">return</span>&nbsp;<span class="ident" id="5333481">v</span><span class="op" id="5333482">.</span><span class="ident" id="5333483">Interface</span><span class="op" id="5333492">(</span><span class="op" id="5333493">)</span><span class="op" id="5333494">,</span>&nbsp;<span class="ident" id="5333496">nil</span><br>
<span class="lineno">150</span><span class="op" id="5333500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5333503">//&nbsp;Length</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5333514">//&nbsp;length&nbsp;returns&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;item,&nbsp;with&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;has&nbsp;no&nbsp;defined&nbsp;length.</span><br>
<span class="lineno">155</span><span class="keyword" id="5333599">func</span>&nbsp;<span class="ident" id="5333604">length</span><span class="op" id="5333610">(</span><span class="ident" id="5333611">item</span>&nbsp;<span class="keyword" id="5333616">interface</span><span class="op" id="5333625">{</span><span class="op" id="5333626">}</span><span class="op" id="5333627">)</span>&nbsp;<span class="op" id="5333629">(</span><span class="builtintype" id="5333630">int</span><span class="op" id="5333633">,</span>&nbsp;<span class="builtintype" id="5333635">error</span><span class="op" id="5333640">)</span>&nbsp;<span class="op" id="5333642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5333645">v</span><span class="op" id="5333646">,</span>&nbsp;<span class="ident" id="5333648">isNil</span>&nbsp;<span class="op" id="5333654">:=</span>&nbsp;<span class="ident" id="5333657">indirect</span><span class="op" id="5333665">(</span><span class="ident" id="5333666">reflect</span><span class="op" id="5333673">.</span><span class="ident" id="5333674">ValueOf</span><span class="op" id="5333681">(</span><span class="ident" id="5333682">item</span><span class="op" id="5333686">)</span><span class="op" id="5333687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333690">if</span>&nbsp;<span class="ident" id="5333693">isNil</span>&nbsp;<span class="op" id="5333699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333703">return</span>&nbsp;<span class="num" id="5333710">0</span><span class="op" id="5333711">,</span>&nbsp;<span class="ident" id="5333713">fmt</span><span class="op" id="5333716">.</span><span class="ident" id="5333717">Errorf</span><span class="op" id="5333723">(</span><span class="string" id="5333724">&#34;len&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="5333744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5333747">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333750">switch</span>&nbsp;<span class="ident" id="5333757">v</span><span class="op" id="5333758">.</span><span class="ident" id="5333759">Kind</span><span class="op" id="5333763">(</span><span class="op" id="5333764">)</span>&nbsp;<span class="op" id="5333766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333769">case</span>&nbsp;<span class="ident" id="5333774">reflect</span><span class="op" id="5333781">.</span><span class="ident" id="5333782">Array</span><span class="op" id="5333787">,</span>&nbsp;<span class="ident" id="5333789">reflect</span><span class="op" id="5333796">.</span><span class="ident" id="5333797">Chan</span><span class="op" id="5333801">,</span>&nbsp;<span class="ident" id="5333803">reflect</span><span class="op" id="5333810">.</span><span class="ident" id="5333811">Map</span><span class="op" id="5333814">,</span>&nbsp;<span class="ident" id="5333816">reflect</span><span class="op" id="5333823">.</span><span class="ident" id="5333824">Slice</span><span class="op" id="5333829">,</span>&nbsp;<span class="ident" id="5333831">reflect</span><span class="op" id="5333838">.</span><span class="ident" id="5333839">String</span><span class="op" id="5333845">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333849">return</span>&nbsp;<span class="ident" id="5333856">v</span><span class="op" id="5333857">.</span><span class="ident" id="5333858">Len</span><span class="op" id="5333861">(</span><span class="op" id="5333862">)</span><span class="op" id="5333863">,</span>&nbsp;<span class="ident" id="5333865">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5333870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5333873">return</span>&nbsp;<span class="num" id="5333880">0</span><span class="op" id="5333881">,</span>&nbsp;<span class="ident" id="5333883">fmt</span><span class="op" id="5333886">.</span><span class="ident" id="5333887">Errorf</span><span class="op" id="5333893">(</span><span class="string" id="5333894">&#34;len&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="5333910">,</span>&nbsp;<span class="ident" id="5333912">v</span><span class="op" id="5333913">.</span><span class="ident" id="5333914">Type</span><span class="op" id="5333918">(</span><span class="op" id="5333919">)</span><span class="op" id="5333920">)</span><br>
<span class="lineno">165</span><span class="op" id="5333922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5333925">//&nbsp;Function&nbsp;invocation</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5333949">//&nbsp;call&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;evaluating&nbsp;the&nbsp;first&nbsp;argument&nbsp;as&nbsp;a&nbsp;function.</span><br>
<span class="lineno">170</span><span class="comment" id="5334024">//&nbsp;The&nbsp;function&nbsp;must&nbsp;return&nbsp;1&nbsp;result,&nbsp;or&nbsp;2&nbsp;results,&nbsp;the&nbsp;second&nbsp;of&nbsp;which&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5334109">func</span>&nbsp;<span class="ident" id="5334114">call</span><span class="op" id="5334118">(</span><span class="ident" id="5334119">fn</span>&nbsp;<span class="keyword" id="5334122">interface</span><span class="op" id="5334131">{</span><span class="op" id="5334132">}</span><span class="op" id="5334133">,</span>&nbsp;<span class="ident" id="5334135">args</span>&nbsp;<span class="op" id="5334140">...</span><span class="keyword" id="5334143">interface</span><span class="op" id="5334152">{</span><span class="op" id="5334153">}</span><span class="op" id="5334154">)</span>&nbsp;<span class="op" id="5334156">(</span><span class="keyword" id="5334157">interface</span><span class="op" id="5334166">{</span><span class="op" id="5334167">}</span><span class="op" id="5334168">,</span>&nbsp;<span class="builtintype" id="5334170">error</span><span class="op" id="5334175">)</span>&nbsp;<span class="op" id="5334177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5334180">v</span>&nbsp;<span class="op" id="5334182">:=</span>&nbsp;<span class="ident" id="5334185">reflect</span><span class="op" id="5334192">.</span><span class="ident" id="5334193">ValueOf</span><span class="op" id="5334200">(</span><span class="ident" id="5334201">fn</span><span class="op" id="5334203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5334206">typ</span>&nbsp;<span class="op" id="5334210">:=</span>&nbsp;<span class="ident" id="5334213">v</span><span class="op" id="5334214">.</span><span class="ident" id="5334215">Type</span><span class="op" id="5334219">(</span><span class="op" id="5334220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334223">if</span>&nbsp;<span class="ident" id="5334226">typ</span><span class="op" id="5334229">.</span><span class="ident" id="5334230">Kind</span><span class="op" id="5334234">(</span><span class="op" id="5334235">)</span>&nbsp;<span class="op" id="5334237">!=</span>&nbsp;<span class="ident" id="5334240">reflect</span><span class="op" id="5334247">.</span><span class="ident" id="5334248">Func</span>&nbsp;<span class="op" id="5334253">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334257">return</span>&nbsp;<span class="ident" id="5334264">nil</span><span class="op" id="5334267">,</span>&nbsp;<span class="ident" id="5334269">fmt</span><span class="op" id="5334272">.</span><span class="ident" id="5334273">Errorf</span><span class="op" id="5334279">(</span><span class="string" id="5334280">&#34;non-function&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="5334305">,</span>&nbsp;<span class="ident" id="5334307">typ</span><span class="op" id="5334310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5334313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334316">if</span>&nbsp;<span class="op" id="5334319">!</span><span class="ident" id="5334320">goodFunc</span><span class="op" id="5334328">(</span><span class="ident" id="5334329">typ</span><span class="op" id="5334332">)</span>&nbsp;<span class="op" id="5334334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334338">return</span>&nbsp;<span class="ident" id="5334345">nil</span><span class="op" id="5334348">,</span>&nbsp;<span class="ident" id="5334350">fmt</span><span class="op" id="5334353">.</span><span class="ident" id="5334354">Errorf</span><span class="op" id="5334360">(</span><span class="string" id="5334361">&#34;function&nbsp;called&nbsp;with&nbsp;%d&nbsp;args;&nbsp;should&nbsp;be&nbsp;1&nbsp;or&nbsp;2&#34;</span><span class="op" id="5334409">,</span>&nbsp;<span class="ident" id="5334411">typ</span><span class="op" id="5334414">.</span><span class="ident" id="5334415">NumOut</span><span class="op" id="5334421">(</span><span class="op" id="5334422">)</span><span class="op" id="5334423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5334426">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5334429">numIn</span>&nbsp;<span class="op" id="5334435">:=</span>&nbsp;<span class="ident" id="5334438">typ</span><span class="op" id="5334441">.</span><span class="ident" id="5334442">NumIn</span><span class="op" id="5334447">(</span><span class="op" id="5334448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334451">var</span>&nbsp;<span class="ident" id="5334455">dddType</span>&nbsp;<span class="ident" id="5334463">reflect</span><span class="op" id="5334470">.</span><span class="ident" id="5334471">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334477">if</span>&nbsp;<span class="ident" id="5334480">typ</span><span class="op" id="5334483">.</span><span class="ident" id="5334484">IsVariadic</span><span class="op" id="5334494">(</span><span class="op" id="5334495">)</span>&nbsp;<span class="op" id="5334497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334501">if</span>&nbsp;<span class="builtinfunc" id="5334504">len</span><span class="op" id="5334507">(</span><span class="ident" id="5334508">args</span><span class="op" id="5334512">)</span>&nbsp;<span class="op" id="5334514">&lt;</span>&nbsp;<span class="ident" id="5334516">numIn</span><span class="op" id="5334521">-</span><span class="num" id="5334522">1</span>&nbsp;<span class="op" id="5334524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334529">return</span>&nbsp;<span class="ident" id="5334536">nil</span><span class="op" id="5334539">,</span>&nbsp;<span class="ident" id="5334541">fmt</span><span class="op" id="5334544">.</span><span class="ident" id="5334545">Errorf</span><span class="op" id="5334551">(</span><span class="string" id="5334552">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;at&nbsp;least&nbsp;%d&#34;</span><span class="op" id="5334599">,</span>&nbsp;<span class="builtinfunc" id="5334601">len</span><span class="op" id="5334604">(</span><span class="ident" id="5334605">args</span><span class="op" id="5334609">)</span><span class="op" id="5334610">,</span>&nbsp;<span class="ident" id="5334612">numIn</span><span class="op" id="5334617">-</span><span class="num" id="5334618">1</span><span class="op" id="5334619">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5334623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5334627">dddType</span>&nbsp;<span class="op" id="5334635">=</span>&nbsp;<span class="ident" id="5334637">typ</span><span class="op" id="5334640">.</span><span class="ident" id="5334641">In</span><span class="op" id="5334643">(</span><span class="ident" id="5334644">numIn</span>&nbsp;<span class="op" id="5334650">-</span>&nbsp;<span class="num" id="5334652">1</span><span class="op" id="5334653">)</span><span class="op" id="5334654">.</span><span class="ident" id="5334655">Elem</span><span class="op" id="5334659">(</span><span class="op" id="5334660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5334663">}</span>&nbsp;<span class="keyword" id="5334665">else</span>&nbsp;<span class="op" id="5334670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334674">if</span>&nbsp;<span class="builtinfunc" id="5334677">len</span><span class="op" id="5334680">(</span><span class="ident" id="5334681">args</span><span class="op" id="5334685">)</span>&nbsp;<span class="op" id="5334687">!=</span>&nbsp;<span class="ident" id="5334690">numIn</span>&nbsp;<span class="op" id="5334696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334701">return</span>&nbsp;<span class="ident" id="5334708">nil</span><span class="op" id="5334711">,</span>&nbsp;<span class="ident" id="5334713">fmt</span><span class="op" id="5334716">.</span><span class="ident" id="5334717">Errorf</span><span class="op" id="5334723">(</span><span class="string" id="5334724">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;%d&#34;</span><span class="op" id="5334762">,</span>&nbsp;<span class="builtinfunc" id="5334764">len</span><span class="op" id="5334767">(</span><span class="ident" id="5334768">args</span><span class="op" id="5334772">)</span><span class="op" id="5334773">,</span>&nbsp;<span class="ident" id="5334775">numIn</span><span class="op" id="5334780">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5334784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5334787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5334790">argv</span>&nbsp;<span class="op" id="5334795">:=</span>&nbsp;<span class="builtinfunc" id="5334798">make</span><span class="op" id="5334802">(</span><span class="op" id="5334803">[</span><span class="op" id="5334804">]</span><span class="ident" id="5334805">reflect</span><span class="op" id="5334812">.</span><span class="ident" id="5334813">Value</span><span class="op" id="5334818">,</span>&nbsp;<span class="builtinfunc" id="5334820">len</span><span class="op" id="5334823">(</span><span class="ident" id="5334824">args</span><span class="op" id="5334828">)</span><span class="op" id="5334829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334832">for</span>&nbsp;<span class="ident" id="5334836">i</span><span class="op" id="5334837">,</span>&nbsp;<span class="ident" id="5334839">arg</span>&nbsp;<span class="op" id="5334843">:=</span>&nbsp;<span class="keyword" id="5334846">range</span>&nbsp;<span class="ident" id="5334852">args</span>&nbsp;<span class="op" id="5334857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5334861">value</span>&nbsp;<span class="op" id="5334867">:=</span>&nbsp;<span class="ident" id="5334870">reflect</span><span class="op" id="5334877">.</span><span class="ident" id="5334878">ValueOf</span><span class="op" id="5334885">(</span><span class="ident" id="5334886">arg</span><span class="op" id="5334889">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5334893">//&nbsp;Compute&nbsp;the&nbsp;expected&nbsp;type.&nbsp;Clumsy&nbsp;because&nbsp;of&nbsp;variadics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334954">var</span>&nbsp;<span class="ident" id="5334958">argType</span>&nbsp;<span class="ident" id="5334966">reflect</span><span class="op" id="5334973">.</span><span class="ident" id="5334974">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5334981">if</span>&nbsp;<span class="op" id="5334984">!</span><span class="ident" id="5334985">typ</span><span class="op" id="5334988">.</span><span class="ident" id="5334989">IsVariadic</span><span class="op" id="5334999">(</span><span class="op" id="5335000">)</span>&nbsp;<span class="op" id="5335002">||</span>&nbsp;<span class="ident" id="5335005">i</span>&nbsp;<span class="op" id="5335007">&lt;</span>&nbsp;<span class="ident" id="5335009">numIn</span><span class="op" id="5335014">-</span><span class="num" id="5335015">1</span>&nbsp;<span class="op" id="5335017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5335022">argType</span>&nbsp;<span class="op" id="5335030">=</span>&nbsp;<span class="ident" id="5335032">typ</span><span class="op" id="5335035">.</span><span class="ident" id="5335036">In</span><span class="op" id="5335038">(</span><span class="ident" id="5335039">i</span><span class="op" id="5335040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5335044">}</span>&nbsp;<span class="keyword" id="5335046">else</span>&nbsp;<span class="op" id="5335051">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5335056">argType</span>&nbsp;<span class="op" id="5335064">=</span>&nbsp;<span class="ident" id="5335066">dddType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5335076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335080">if</span>&nbsp;<span class="op" id="5335083">!</span><span class="ident" id="5335084">value</span><span class="op" id="5335089">.</span><span class="ident" id="5335090">IsValid</span><span class="op" id="5335097">(</span><span class="op" id="5335098">)</span>&nbsp;<span class="op" id="5335100">&amp;&amp;</span>&nbsp;<span class="ident" id="5335103">canBeNil</span><span class="op" id="5335111">(</span><span class="ident" id="5335112">argType</span><span class="op" id="5335119">)</span>&nbsp;<span class="op" id="5335121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5335126">value</span>&nbsp;<span class="op" id="5335132">=</span>&nbsp;<span class="ident" id="5335134">reflect</span><span class="op" id="5335141">.</span><span class="ident" id="5335142">Zero</span><span class="op" id="5335146">(</span><span class="ident" id="5335147">argType</span><span class="op" id="5335154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5335158">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335162">if</span>&nbsp;<span class="op" id="5335165">!</span><span class="ident" id="5335166">value</span><span class="op" id="5335171">.</span><span class="ident" id="5335172">Type</span><span class="op" id="5335176">(</span><span class="op" id="5335177">)</span><span class="op" id="5335178">.</span><span class="ident" id="5335179">AssignableTo</span><span class="op" id="5335191">(</span><span class="ident" id="5335192">argType</span><span class="op" id="5335199">)</span>&nbsp;<span class="op" id="5335201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335206">return</span>&nbsp;<span class="ident" id="5335213">nil</span><span class="op" id="5335216">,</span>&nbsp;<span class="ident" id="5335218">fmt</span><span class="op" id="5335221">.</span><span class="ident" id="5335222">Errorf</span><span class="op" id="5335228">(</span><span class="string" id="5335229">&#34;arg&nbsp;%d&nbsp;has&nbsp;type&nbsp;%s;&nbsp;should&nbsp;be&nbsp;%s&#34;</span><span class="op" id="5335263">,</span>&nbsp;<span class="ident" id="5335265">i</span><span class="op" id="5335266">,</span>&nbsp;<span class="ident" id="5335268">value</span><span class="op" id="5335273">.</span><span class="ident" id="5335274">Type</span><span class="op" id="5335278">(</span><span class="op" id="5335279">)</span><span class="op" id="5335280">,</span>&nbsp;<span class="ident" id="5335282">argType</span><span class="op" id="5335289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5335293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5335297">argv</span><span class="op" id="5335301">[</span><span class="ident" id="5335302">i</span><span class="op" id="5335303">]</span>&nbsp;<span class="op" id="5335305">=</span>&nbsp;<span class="ident" id="5335307">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5335314">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5335317">result</span>&nbsp;<span class="op" id="5335324">:=</span>&nbsp;<span class="ident" id="5335327">v</span><span class="op" id="5335328">.</span><span class="ident" id="5335329">Call</span><span class="op" id="5335333">(</span><span class="ident" id="5335334">argv</span><span class="op" id="5335338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335341">if</span>&nbsp;<span class="builtinfunc" id="5335344">len</span><span class="op" id="5335347">(</span><span class="ident" id="5335348">result</span><span class="op" id="5335354">)</span>&nbsp;<span class="op" id="5335356">==</span>&nbsp;<span class="num" id="5335359">2</span>&nbsp;<span class="op" id="5335361">&amp;&amp;</span>&nbsp;<span class="op" id="5335364">!</span><span class="ident" id="5335365">result</span><span class="op" id="5335371">[</span><span class="num" id="5335372">1</span><span class="op" id="5335373">]</span><span class="op" id="5335374">.</span><span class="ident" id="5335375">IsNil</span><span class="op" id="5335380">(</span><span class="op" id="5335381">)</span>&nbsp;<span class="op" id="5335383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335387">return</span>&nbsp;<span class="ident" id="5335394">result</span><span class="op" id="5335400">[</span><span class="num" id="5335401">0</span><span class="op" id="5335402">]</span><span class="op" id="5335403">.</span><span class="ident" id="5335404">Interface</span><span class="op" id="5335413">(</span><span class="op" id="5335414">)</span><span class="op" id="5335415">,</span>&nbsp;<span class="ident" id="5335417">result</span><span class="op" id="5335423">[</span><span class="num" id="5335424">1</span><span class="op" id="5335425">]</span><span class="op" id="5335426">.</span><span class="ident" id="5335427">Interface</span><span class="op" id="5335436">(</span><span class="op" id="5335437">)</span><span class="op" id="5335438">.</span><span class="op" id="5335439">(</span><span class="builtintype" id="5335440">error</span><span class="op" id="5335445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5335448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335451">return</span>&nbsp;<span class="ident" id="5335458">result</span><span class="op" id="5335464">[</span><span class="num" id="5335465">0</span><span class="op" id="5335466">]</span><span class="op" id="5335467">.</span><span class="ident" id="5335468">Interface</span><span class="op" id="5335477">(</span><span class="op" id="5335478">)</span><span class="op" id="5335479">,</span>&nbsp;<span class="ident" id="5335481">nil</span><br>
<span class="lineno">215</span><span class="op" id="5335485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5335488">//&nbsp;Boolean&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5335507">func</span>&nbsp;<span class="ident" id="5335512">truth</span><span class="op" id="5335517">(</span><span class="ident" id="5335518">a</span>&nbsp;<span class="keyword" id="5335520">interface</span><span class="op" id="5335529">{</span><span class="op" id="5335530">}</span><span class="op" id="5335531">)</span>&nbsp;<span class="builtintype" id="5335533">bool</span>&nbsp;<span class="op" id="5335538">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5335541">t</span><span class="op" id="5335542">,</span>&nbsp;<span class="ident" id="5335544">_</span>&nbsp;<span class="op" id="5335546">:=</span>&nbsp;<span class="ident" id="5335549">isTrue</span><span class="op" id="5335555">(</span><span class="ident" id="5335556">reflect</span><span class="op" id="5335563">.</span><span class="ident" id="5335564">ValueOf</span><span class="op" id="5335571">(</span><span class="ident" id="5335572">a</span><span class="op" id="5335573">)</span><span class="op" id="5335574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335577">return</span>&nbsp;<span class="ident" id="5335584">t</span><br>
<span class="lineno"></span><span class="op" id="5335586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5335589">//&nbsp;and&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;AND&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">225</span><span class="comment" id="5335649">//&nbsp;the&nbsp;first&nbsp;false&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="5335714">func</span>&nbsp;<span class="ident" id="5335719">and</span><span class="op" id="5335722">(</span><span class="ident" id="5335723">arg0</span>&nbsp;<span class="keyword" id="5335728">interface</span><span class="op" id="5335737">{</span><span class="op" id="5335738">}</span><span class="op" id="5335739">,</span>&nbsp;<span class="ident" id="5335741">args</span>&nbsp;<span class="op" id="5335746">...</span><span class="keyword" id="5335749">interface</span><span class="op" id="5335758">{</span><span class="op" id="5335759">}</span><span class="op" id="5335760">)</span>&nbsp;<span class="keyword" id="5335762">interface</span><span class="op" id="5335771">{</span><span class="op" id="5335772">}</span>&nbsp;<span class="op" id="5335774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335777">if</span>&nbsp;<span class="op" id="5335780">!</span><span class="ident" id="5335781">truth</span><span class="op" id="5335786">(</span><span class="ident" id="5335787">arg0</span><span class="op" id="5335791">)</span>&nbsp;<span class="op" id="5335793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335797">return</span>&nbsp;<span class="ident" id="5335804">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5335810">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335813">for</span>&nbsp;<span class="ident" id="5335817">i</span>&nbsp;<span class="op" id="5335819">:=</span>&nbsp;<span class="keyword" id="5335822">range</span>&nbsp;<span class="ident" id="5335828">args</span>&nbsp;<span class="op" id="5335833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5335837">arg0</span>&nbsp;<span class="op" id="5335842">=</span>&nbsp;<span class="ident" id="5335844">args</span><span class="op" id="5335848">[</span><span class="ident" id="5335849">i</span><span class="op" id="5335850">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335854">if</span>&nbsp;<span class="op" id="5335857">!</span><span class="ident" id="5335858">truth</span><span class="op" id="5335863">(</span><span class="ident" id="5335864">arg0</span><span class="op" id="5335868">)</span>&nbsp;<span class="op" id="5335870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335875">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5335883">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5335886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5335889">return</span>&nbsp;<span class="ident" id="5335896">arg0</span><br>
<span class="lineno"></span><span class="op" id="5335901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5335904">//&nbsp;or&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;OR&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">240</span><span class="comment" id="5335962">//&nbsp;the&nbsp;first&nbsp;true&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="5336026">func</span>&nbsp;<span class="ident" id="5336031">or</span><span class="op" id="5336033">(</span><span class="ident" id="5336034">arg0</span>&nbsp;<span class="keyword" id="5336039">interface</span><span class="op" id="5336048">{</span><span class="op" id="5336049">}</span><span class="op" id="5336050">,</span>&nbsp;<span class="ident" id="5336052">args</span>&nbsp;<span class="op" id="5336057">...</span><span class="keyword" id="5336060">interface</span><span class="op" id="5336069">{</span><span class="op" id="5336070">}</span><span class="op" id="5336071">)</span>&nbsp;<span class="keyword" id="5336073">interface</span><span class="op" id="5336082">{</span><span class="op" id="5336083">}</span>&nbsp;<span class="op" id="5336085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5336088">if</span>&nbsp;<span class="ident" id="5336091">truth</span><span class="op" id="5336096">(</span><span class="ident" id="5336097">arg0</span><span class="op" id="5336101">)</span>&nbsp;<span class="op" id="5336103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5336107">return</span>&nbsp;<span class="ident" id="5336114">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5336120">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5336123">for</span>&nbsp;<span class="ident" id="5336127">i</span>&nbsp;<span class="op" id="5336129">:=</span>&nbsp;<span class="keyword" id="5336132">range</span>&nbsp;<span class="ident" id="5336138">args</span>&nbsp;<span class="op" id="5336143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336147">arg0</span>&nbsp;<span class="op" id="5336152">=</span>&nbsp;<span class="ident" id="5336154">args</span><span class="op" id="5336158">[</span><span class="ident" id="5336159">i</span><span class="op" id="5336160">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5336164">if</span>&nbsp;<span class="ident" id="5336167">truth</span><span class="op" id="5336172">(</span><span class="ident" id="5336173">arg0</span><span class="op" id="5336177">)</span>&nbsp;<span class="op" id="5336179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5336184">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5336192">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5336195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5336198">return</span>&nbsp;<span class="ident" id="5336205">arg0</span><br>
<span class="lineno"></span><span class="op" id="5336210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5336213">//&nbsp;not&nbsp;returns&nbsp;the&nbsp;Boolean&nbsp;negation&nbsp;of&nbsp;its&nbsp;argument.</span><br>
<span class="lineno">255</span><span class="keyword" id="5336266">func</span>&nbsp;<span class="ident" id="5336271">not</span><span class="op" id="5336274">(</span><span class="ident" id="5336275">arg</span>&nbsp;<span class="keyword" id="5336279">interface</span><span class="op" id="5336288">{</span><span class="op" id="5336289">}</span><span class="op" id="5336290">)</span>&nbsp;<span class="op" id="5336292">(</span><span class="ident" id="5336293">truth</span>&nbsp;<span class="builtintype" id="5336299">bool</span><span class="op" id="5336303">)</span>&nbsp;<span class="op" id="5336305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336308">truth</span><span class="op" id="5336313">,</span>&nbsp;<span class="ident" id="5336315">_</span>&nbsp;<span class="op" id="5336317">=</span>&nbsp;<span class="ident" id="5336319">isTrue</span><span class="op" id="5336325">(</span><span class="ident" id="5336326">reflect</span><span class="op" id="5336333">.</span><span class="ident" id="5336334">ValueOf</span><span class="op" id="5336341">(</span><span class="ident" id="5336342">arg</span><span class="op" id="5336345">)</span><span class="op" id="5336346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5336349">return</span>&nbsp;<span class="op" id="5336356">!</span><span class="ident" id="5336357">truth</span><br>
<span class="lineno"></span><span class="op" id="5336363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="5336366">//&nbsp;Comparison.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5336382">//&nbsp;TODO:&nbsp;Perhaps&nbsp;allow&nbsp;comparison&nbsp;between&nbsp;signed&nbsp;and&nbsp;unsigned&nbsp;integers.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5336455">var</span>&nbsp;<span class="op" id="5336459">(</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336462">errBadComparisonType</span>&nbsp;<span class="op" id="5336483">=</span>&nbsp;<span class="ident" id="5336485">errors</span><span class="op" id="5336491">.</span><span class="ident" id="5336492">New</span><span class="op" id="5336495">(</span><span class="string" id="5336496">&#34;invalid&nbsp;type&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="5336525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336528">errBadComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5336549">=</span>&nbsp;<span class="ident" id="5336551">errors</span><span class="op" id="5336557">.</span><span class="ident" id="5336558">New</span><span class="op" id="5336561">(</span><span class="string" id="5336562">&#34;incompatible&nbsp;types&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="5336597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336600">errNoComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5336621">=</span>&nbsp;<span class="ident" id="5336623">errors</span><span class="op" id="5336629">.</span><span class="ident" id="5336630">New</span><span class="op" id="5336633">(</span><span class="string" id="5336634">&#34;missing&nbsp;argument&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="5336667">)</span><br>
<span class="lineno"></span><span class="op" id="5336669">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="keyword" id="5336672">type</span>&nbsp;<span class="ident" id="5336677">kind</span>&nbsp;<span class="builtintype" id="5336682">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5336687">const</span>&nbsp;<span class="op" id="5336693">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336696">invalidKind</span>&nbsp;<span class="ident" id="5336708">kind</span>&nbsp;<span class="op" id="5336713">=</span>&nbsp;<span class="ident" id="5336715">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336721">boolKind</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336731">complexKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336744">intKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336753">floatKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336764">integerKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336777">stringKind</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5336789">uintKind</span><br>
<span class="lineno"></span><span class="op" id="5336798">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5336801">func</span>&nbsp;<span class="ident" id="5336806">basicKind</span><span class="op" id="5336815">(</span><span class="ident" id="5336816">v</span>&nbsp;<span class="ident" id="5336818">reflect</span><span class="op" id="5336825">.</span><span class="ident" id="5336826">Value</span><span class="op" id="5336831">)</span>&nbsp;<span class="op" id="5336833">(</span><span class="ident" id="5336834">kind</span><span class="op" id="5336838">,</span>&nbsp;<span class="builtintype" id="5336840">error</span><span class="op" id="5336845">)</span>&nbsp;<span class="op" id="5336847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5336850">switch</span>&nbsp;<span class="ident" id="5336857">v</span><span class="op" id="5336858">.</span><span class="ident" id="5336859">Kind</span><span class="op" id="5336863">(</span><span class="op" id="5336864">)</span>&nbsp;<span class="op" id="5336866">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5336869">case</span>&nbsp;<span class="ident" id="5336874">reflect</span><span class="op" id="5336881">.</span><span class="ident" id="5336882">Bool</span><span class="op" id="5336886">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5336890">return</span>&nbsp;<span class="ident" id="5336897">boolKind</span><span class="op" id="5336905">,</span>&nbsp;<span class="ident" id="5336907">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5336912">case</span>&nbsp;<span class="ident" id="5336917">reflect</span><span class="op" id="5336924">.</span><span class="ident" id="5336925">Int</span><span class="op" id="5336928">,</span>&nbsp;<span class="ident" id="5336930">reflect</span><span class="op" id="5336937">.</span><span class="ident" id="5336938">Int8</span><span class="op" id="5336942">,</span>&nbsp;<span class="ident" id="5336944">reflect</span><span class="op" id="5336951">.</span><span class="ident" id="5336952">Int16</span><span class="op" id="5336957">,</span>&nbsp;<span class="ident" id="5336959">reflect</span><span class="op" id="5336966">.</span><span class="ident" id="5336967">Int32</span><span class="op" id="5336972">,</span>&nbsp;<span class="ident" id="5336974">reflect</span><span class="op" id="5336981">.</span><span class="ident" id="5336982">Int64</span><span class="op" id="5336987">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5336991">return</span>&nbsp;<span class="ident" id="5336998">intKind</span><span class="op" id="5337005">,</span>&nbsp;<span class="ident" id="5337007">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337012">case</span>&nbsp;<span class="ident" id="5337017">reflect</span><span class="op" id="5337024">.</span><span class="ident" id="5337025">Uint</span><span class="op" id="5337029">,</span>&nbsp;<span class="ident" id="5337031">reflect</span><span class="op" id="5337038">.</span><span class="ident" id="5337039">Uint8</span><span class="op" id="5337044">,</span>&nbsp;<span class="ident" id="5337046">reflect</span><span class="op" id="5337053">.</span><span class="ident" id="5337054">Uint16</span><span class="op" id="5337060">,</span>&nbsp;<span class="ident" id="5337062">reflect</span><span class="op" id="5337069">.</span><span class="ident" id="5337070">Uint32</span><span class="op" id="5337076">,</span>&nbsp;<span class="ident" id="5337078">reflect</span><span class="op" id="5337085">.</span><span class="ident" id="5337086">Uint64</span><span class="op" id="5337092">,</span>&nbsp;<span class="ident" id="5337094">reflect</span><span class="op" id="5337101">.</span><span class="ident" id="5337102">Uintptr</span><span class="op" id="5337109">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337113">return</span>&nbsp;<span class="ident" id="5337120">uintKind</span><span class="op" id="5337128">,</span>&nbsp;<span class="ident" id="5337130">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337135">case</span>&nbsp;<span class="ident" id="5337140">reflect</span><span class="op" id="5337147">.</span><span class="ident" id="5337148">Float32</span><span class="op" id="5337155">,</span>&nbsp;<span class="ident" id="5337157">reflect</span><span class="op" id="5337164">.</span><span class="ident" id="5337165">Float64</span><span class="op" id="5337172">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337176">return</span>&nbsp;<span class="ident" id="5337183">floatKind</span><span class="op" id="5337192">,</span>&nbsp;<span class="ident" id="5337194">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337199">case</span>&nbsp;<span class="ident" id="5337204">reflect</span><span class="op" id="5337211">.</span><span class="ident" id="5337212">Complex64</span><span class="op" id="5337221">,</span>&nbsp;<span class="ident" id="5337223">reflect</span><span class="op" id="5337230">.</span><span class="ident" id="5337231">Complex128</span><span class="op" id="5337241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337245">return</span>&nbsp;<span class="ident" id="5337252">complexKind</span><span class="op" id="5337263">,</span>&nbsp;<span class="ident" id="5337265">nil</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337270">case</span>&nbsp;<span class="ident" id="5337275">reflect</span><span class="op" id="5337282">.</span><span class="ident" id="5337283">String</span><span class="op" id="5337289">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337293">return</span>&nbsp;<span class="ident" id="5337300">stringKind</span><span class="op" id="5337310">,</span>&nbsp;<span class="ident" id="5337312">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5337317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337320">return</span>&nbsp;<span class="ident" id="5337327">invalidKind</span><span class="op" id="5337338">,</span>&nbsp;<span class="ident" id="5337340">errBadComparisonType</span><br>
<span class="lineno"></span><span class="op" id="5337361">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="5337364">//&nbsp;eq&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;==&nbsp;b&nbsp;||&nbsp;a&nbsp;==&nbsp;c&nbsp;||&nbsp;...</span><br>
<span class="lineno"></span><span class="keyword" id="5337419">func</span>&nbsp;<span class="ident" id="5337424">eq</span><span class="op" id="5337426">(</span><span class="ident" id="5337427">arg1</span>&nbsp;<span class="keyword" id="5337432">interface</span><span class="op" id="5337441">{</span><span class="op" id="5337442">}</span><span class="op" id="5337443">,</span>&nbsp;<span class="ident" id="5337445">arg2</span>&nbsp;<span class="op" id="5337450">...</span><span class="keyword" id="5337453">interface</span><span class="op" id="5337462">{</span><span class="op" id="5337463">}</span><span class="op" id="5337464">)</span>&nbsp;<span class="op" id="5337466">(</span><span class="builtintype" id="5337467">bool</span><span class="op" id="5337471">,</span>&nbsp;<span class="builtintype" id="5337473">error</span><span class="op" id="5337478">)</span>&nbsp;<span class="op" id="5337480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5337483">v1</span>&nbsp;<span class="op" id="5337486">:=</span>&nbsp;<span class="ident" id="5337489">reflect</span><span class="op" id="5337496">.</span><span class="ident" id="5337497">ValueOf</span><span class="op" id="5337504">(</span><span class="ident" id="5337505">arg1</span><span class="op" id="5337509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5337512">k1</span><span class="op" id="5337514">,</span>&nbsp;<span class="ident" id="5337516">err</span>&nbsp;<span class="op" id="5337520">:=</span>&nbsp;<span class="ident" id="5337523">basicKind</span><span class="op" id="5337532">(</span><span class="ident" id="5337533">v1</span><span class="op" id="5337535">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337538">if</span>&nbsp;<span class="ident" id="5337541">err</span>&nbsp;<span class="op" id="5337545">!=</span>&nbsp;<span class="ident" id="5337548">nil</span>&nbsp;<span class="op" id="5337552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337556">return</span>&nbsp;<span class="builtintype" id="5337563">false</span><span class="op" id="5337568">,</span>&nbsp;<span class="ident" id="5337570">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5337575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337578">if</span>&nbsp;<span class="builtinfunc" id="5337581">len</span><span class="op" id="5337584">(</span><span class="ident" id="5337585">arg2</span><span class="op" id="5337589">)</span>&nbsp;<span class="op" id="5337591">==</span>&nbsp;<span class="num" id="5337594">0</span>&nbsp;<span class="op" id="5337596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337600">return</span>&nbsp;<span class="builtintype" id="5337607">false</span><span class="op" id="5337612">,</span>&nbsp;<span class="ident" id="5337614">errNoComparison</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5337631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337634">for</span>&nbsp;<span class="ident" id="5337638">_</span><span class="op" id="5337639">,</span>&nbsp;<span class="ident" id="5337641">arg</span>&nbsp;<span class="op" id="5337645">:=</span>&nbsp;<span class="keyword" id="5337648">range</span>&nbsp;<span class="ident" id="5337654">arg2</span>&nbsp;<span class="op" id="5337659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5337663">v2</span>&nbsp;<span class="op" id="5337666">:=</span>&nbsp;<span class="ident" id="5337669">reflect</span><span class="op" id="5337676">.</span><span class="ident" id="5337677">ValueOf</span><span class="op" id="5337684">(</span><span class="ident" id="5337685">arg</span><span class="op" id="5337688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5337692">k2</span><span class="op" id="5337694">,</span>&nbsp;<span class="ident" id="5337696">err</span>&nbsp;<span class="op" id="5337700">:=</span>&nbsp;<span class="ident" id="5337703">basicKind</span><span class="op" id="5337712">(</span><span class="ident" id="5337713">v2</span><span class="op" id="5337715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337719">if</span>&nbsp;<span class="ident" id="5337722">err</span>&nbsp;<span class="op" id="5337726">!=</span>&nbsp;<span class="ident" id="5337729">nil</span>&nbsp;<span class="op" id="5337733">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337738">return</span>&nbsp;<span class="builtintype" id="5337745">false</span><span class="op" id="5337750">,</span>&nbsp;<span class="ident" id="5337752">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5337758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5337762">truth</span>&nbsp;<span class="op" id="5337768">:=</span>&nbsp;<span class="builtintype" id="5337771">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337779">if</span>&nbsp;<span class="ident" id="5337782">k1</span>&nbsp;<span class="op" id="5337785">!=</span>&nbsp;<span class="ident" id="5337788">k2</span>&nbsp;<span class="op" id="5337791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5337796">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337870">switch</span>&nbsp;<span class="op" id="5337877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337882">case</span>&nbsp;<span class="ident" id="5337887">k1</span>&nbsp;<span class="op" id="5337890">==</span>&nbsp;<span class="ident" id="5337893">intKind</span>&nbsp;<span class="op" id="5337901">&amp;&amp;</span>&nbsp;<span class="ident" id="5337904">k2</span>&nbsp;<span class="op" id="5337907">==</span>&nbsp;<span class="ident" id="5337910">uintKind</span><span class="op" id="5337918">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5337924">truth</span>&nbsp;<span class="op" id="5337930">=</span>&nbsp;<span class="ident" id="5337932">v1</span><span class="op" id="5337934">.</span><span class="ident" id="5337935">Int</span><span class="op" id="5337938">(</span><span class="op" id="5337939">)</span>&nbsp;<span class="op" id="5337941">&gt;=</span>&nbsp;<span class="num" id="5337944">0</span>&nbsp;<span class="op" id="5337946">&amp;&amp;</span>&nbsp;<span class="ident" id="5337949">uint64</span><span class="op" id="5337955">(</span><span class="ident" id="5337956">v1</span><span class="op" id="5337958">.</span><span class="ident" id="5337959">Int</span><span class="op" id="5337962">(</span><span class="op" id="5337963">)</span><span class="op" id="5337964">)</span>&nbsp;<span class="op" id="5337966">==</span>&nbsp;<span class="ident" id="5337969">v2</span><span class="op" id="5337971">.</span><span class="ident" id="5337972">Uint</span><span class="op" id="5337976">(</span><span class="op" id="5337977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5337982">case</span>&nbsp;<span class="ident" id="5337987">k1</span>&nbsp;<span class="op" id="5337990">==</span>&nbsp;<span class="ident" id="5337993">uintKind</span>&nbsp;<span class="op" id="5338002">&amp;&amp;</span>&nbsp;<span class="ident" id="5338005">k2</span>&nbsp;<span class="op" id="5338008">==</span>&nbsp;<span class="ident" id="5338011">intKind</span><span class="op" id="5338018">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5338024">truth</span>&nbsp;<span class="op" id="5338030">=</span>&nbsp;<span class="ident" id="5338032">v2</span><span class="op" id="5338034">.</span><span class="ident" id="5338035">Int</span><span class="op" id="5338038">(</span><span class="op" id="5338039">)</span>&nbsp;<span class="op" id="5338041">&gt;=</span>&nbsp;<span class="num" id="5338044">0</span>&nbsp;<span class="op" id="5338046">&amp;&amp;</span>&nbsp;<span class="ident" id="5338049">v1</span><span class="op" id="5338051">.</span><span class="ident" id="5338052">Uint</span><span class="op" id="5338056">(</span><span class="op" id="5338057">)</span>&nbsp;<span class="op" id="5338059">==</span>&nbsp;<span class="ident" id="5338062">uint64</span><span class="op" id="5338068">(</span><span class="ident" id="5338069">v2</span><span class="op" id="5338071">.</span><span class="ident" id="5338072">Int</span><span class="op" id="5338075">(</span><span class="op" id="5338076">)</span><span class="op" id="5338077">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338082">default</span><span class="op" id="5338089">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338095">return</span>&nbsp;<span class="builtintype" id="5338102">false</span><span class="op" id="5338107">,</span>&nbsp;<span class="ident" id="5338109">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5338129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5338133">}</span>&nbsp;<span class="keyword" id="5338135">else</span>&nbsp;<span class="op" id="5338140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338145">switch</span>&nbsp;<span class="ident" id="5338152">k1</span>&nbsp;<span class="op" id="5338155">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338160">case</span>&nbsp;<span class="ident" id="5338165">boolKind</span><span class="op" id="5338173">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5338179">truth</span>&nbsp;<span class="op" id="5338185">=</span>&nbsp;<span class="ident" id="5338187">v1</span><span class="op" id="5338189">.</span><span class="ident" id="5338190">Bool</span><span class="op" id="5338194">(</span><span class="op" id="5338195">)</span>&nbsp;<span class="op" id="5338197">==</span>&nbsp;<span class="ident" id="5338200">v2</span><span class="op" id="5338202">.</span><span class="ident" id="5338203">Bool</span><span class="op" id="5338207">(</span><span class="op" id="5338208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338213">case</span>&nbsp;<span class="ident" id="5338218">complexKind</span><span class="op" id="5338229">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5338235">truth</span>&nbsp;<span class="op" id="5338241">=</span>&nbsp;<span class="ident" id="5338243">v1</span><span class="op" id="5338245">.</span><span class="ident" id="5338246">Complex</span><span class="op" id="5338253">(</span><span class="op" id="5338254">)</span>&nbsp;<span class="op" id="5338256">==</span>&nbsp;<span class="ident" id="5338259">v2</span><span class="op" id="5338261">.</span><span class="ident" id="5338262">Complex</span><span class="op" id="5338269">(</span><span class="op" id="5338270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338275">case</span>&nbsp;<span class="ident" id="5338280">floatKind</span><span class="op" id="5338289">:</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5338295">truth</span>&nbsp;<span class="op" id="5338301">=</span>&nbsp;<span class="ident" id="5338303">v1</span><span class="op" id="5338305">.</span><span class="ident" id="5338306">Float</span><span class="op" id="5338311">(</span><span class="op" id="5338312">)</span>&nbsp;<span class="op" id="5338314">==</span>&nbsp;<span class="ident" id="5338317">v2</span><span class="op" id="5338319">.</span><span class="ident" id="5338320">Float</span><span class="op" id="5338325">(</span><span class="op" id="5338326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338331">case</span>&nbsp;<span class="ident" id="5338336">intKind</span><span class="op" id="5338343">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5338349">truth</span>&nbsp;<span class="op" id="5338355">=</span>&nbsp;<span class="ident" id="5338357">v1</span><span class="op" id="5338359">.</span><span class="ident" id="5338360">Int</span><span class="op" id="5338363">(</span><span class="op" id="5338364">)</span>&nbsp;<span class="op" id="5338366">==</span>&nbsp;<span class="ident" id="5338369">v2</span><span class="op" id="5338371">.</span><span class="ident" id="5338372">Int</span><span class="op" id="5338375">(</span><span class="op" id="5338376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338381">case</span>&nbsp;<span class="ident" id="5338386">stringKind</span><span class="op" id="5338396">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5338402">truth</span>&nbsp;<span class="op" id="5338408">=</span>&nbsp;<span class="ident" id="5338410">v1</span><span class="op" id="5338412">.</span><span class="ident" id="5338413">String</span><span class="op" id="5338419">(</span><span class="op" id="5338420">)</span>&nbsp;<span class="op" id="5338422">==</span>&nbsp;<span class="ident" id="5338425">v2</span><span class="op" id="5338427">.</span><span class="ident" id="5338428">String</span><span class="op" id="5338434">(</span><span class="op" id="5338435">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338440">case</span>&nbsp;<span class="ident" id="5338445">uintKind</span><span class="op" id="5338453">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5338459">truth</span>&nbsp;<span class="op" id="5338465">=</span>&nbsp;<span class="ident" id="5338467">v1</span><span class="op" id="5338469">.</span><span class="ident" id="5338470">Uint</span><span class="op" id="5338474">(</span><span class="op" id="5338475">)</span>&nbsp;<span class="op" id="5338477">==</span>&nbsp;<span class="ident" id="5338480">v2</span><span class="op" id="5338482">.</span><span class="ident" id="5338483">Uint</span><span class="op" id="5338487">(</span><span class="op" id="5338488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338493">default</span><span class="op" id="5338500">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5338506">panic</span><span class="op" id="5338511">(</span><span class="string" id="5338512">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="5338526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5338531">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5338535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338539">if</span>&nbsp;<span class="ident" id="5338542">truth</span>&nbsp;<span class="op" id="5338548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338553">return</span>&nbsp;<span class="builtintype" id="5338560">true</span><span class="op" id="5338564">,</span>&nbsp;<span class="ident" id="5338566">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5338572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5338575">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338578">return</span>&nbsp;<span class="builtintype" id="5338585">false</span><span class="op" id="5338590">,</span>&nbsp;<span class="ident" id="5338592">nil</span><br>
<span class="lineno"></span><span class="op" id="5338596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5338599">//&nbsp;ne&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;!=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="5338638">func</span>&nbsp;<span class="ident" id="5338643">ne</span><span class="op" id="5338645">(</span><span class="ident" id="5338646">arg1</span><span class="op" id="5338650">,</span>&nbsp;<span class="ident" id="5338652">arg2</span>&nbsp;<span class="keyword" id="5338657">interface</span><span class="op" id="5338666">{</span><span class="op" id="5338667">}</span><span class="op" id="5338668">)</span>&nbsp;<span class="op" id="5338670">(</span><span class="builtintype" id="5338671">bool</span><span class="op" id="5338675">,</span>&nbsp;<span class="builtintype" id="5338677">error</span><span class="op" id="5338682">)</span>&nbsp;<span class="op" id="5338684">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5338687">//&nbsp;!=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;==.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5338716">equal</span><span class="op" id="5338721">,</span>&nbsp;<span class="ident" id="5338723">err</span>&nbsp;<span class="op" id="5338727">:=</span>&nbsp;<span class="ident" id="5338730">eq</span><span class="op" id="5338732">(</span><span class="ident" id="5338733">arg1</span><span class="op" id="5338737">,</span>&nbsp;<span class="ident" id="5338739">arg2</span><span class="op" id="5338743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338746">return</span>&nbsp;<span class="op" id="5338753">!</span><span class="ident" id="5338754">equal</span><span class="op" id="5338759">,</span>&nbsp;<span class="ident" id="5338761">err</span><br>
<span class="lineno"></span><span class="op" id="5338765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="5338768">//&nbsp;lt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&lt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="5338806">func</span>&nbsp;<span class="ident" id="5338811">lt</span><span class="op" id="5338813">(</span><span class="ident" id="5338814">arg1</span><span class="op" id="5338818">,</span>&nbsp;<span class="ident" id="5338820">arg2</span>&nbsp;<span class="keyword" id="5338825">interface</span><span class="op" id="5338834">{</span><span class="op" id="5338835">}</span><span class="op" id="5338836">)</span>&nbsp;<span class="op" id="5338838">(</span><span class="builtintype" id="5338839">bool</span><span class="op" id="5338843">,</span>&nbsp;<span class="builtintype" id="5338845">error</span><span class="op" id="5338850">)</span>&nbsp;<span class="op" id="5338852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5338855">v1</span>&nbsp;<span class="op" id="5338858">:=</span>&nbsp;<span class="ident" id="5338861">reflect</span><span class="op" id="5338868">.</span><span class="ident" id="5338869">ValueOf</span><span class="op" id="5338876">(</span><span class="ident" id="5338877">arg1</span><span class="op" id="5338881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5338884">k1</span><span class="op" id="5338886">,</span>&nbsp;<span class="ident" id="5338888">err</span>&nbsp;<span class="op" id="5338892">:=</span>&nbsp;<span class="ident" id="5338895">basicKind</span><span class="op" id="5338904">(</span><span class="ident" id="5338905">v1</span><span class="op" id="5338907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338910">if</span>&nbsp;<span class="ident" id="5338913">err</span>&nbsp;<span class="op" id="5338917">!=</span>&nbsp;<span class="ident" id="5338920">nil</span>&nbsp;<span class="op" id="5338924">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5338928">return</span>&nbsp;<span class="builtintype" id="5338935">false</span><span class="op" id="5338940">,</span>&nbsp;<span class="ident" id="5338942">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5338947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5338950">v2</span>&nbsp;<span class="op" id="5338953">:=</span>&nbsp;<span class="ident" id="5338956">reflect</span><span class="op" id="5338963">.</span><span class="ident" id="5338964">ValueOf</span><span class="op" id="5338971">(</span><span class="ident" id="5338972">arg2</span><span class="op" id="5338976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5338979">k2</span><span class="op" id="5338981">,</span>&nbsp;<span class="ident" id="5338983">err</span>&nbsp;<span class="op" id="5338987">:=</span>&nbsp;<span class="ident" id="5338990">basicKind</span><span class="op" id="5338999">(</span><span class="ident" id="5339000">v2</span><span class="op" id="5339002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339005">if</span>&nbsp;<span class="ident" id="5339008">err</span>&nbsp;<span class="op" id="5339012">!=</span>&nbsp;<span class="ident" id="5339015">nil</span>&nbsp;<span class="op" id="5339019">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339023">return</span>&nbsp;<span class="builtintype" id="5339030">false</span><span class="op" id="5339035">,</span>&nbsp;<span class="ident" id="5339037">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5339042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5339045">truth</span>&nbsp;<span class="op" id="5339051">:=</span>&nbsp;<span class="builtintype" id="5339054">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339061">if</span>&nbsp;<span class="ident" id="5339064">k1</span>&nbsp;<span class="op" id="5339067">!=</span>&nbsp;<span class="ident" id="5339070">k2</span>&nbsp;<span class="op" id="5339073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5339077">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339150">switch</span>&nbsp;<span class="op" id="5339157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339161">case</span>&nbsp;<span class="ident" id="5339166">k1</span>&nbsp;<span class="op" id="5339169">==</span>&nbsp;<span class="ident" id="5339172">intKind</span>&nbsp;<span class="op" id="5339180">&amp;&amp;</span>&nbsp;<span class="ident" id="5339183">k2</span>&nbsp;<span class="op" id="5339186">==</span>&nbsp;<span class="ident" id="5339189">uintKind</span><span class="op" id="5339197">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5339202">truth</span>&nbsp;<span class="op" id="5339208">=</span>&nbsp;<span class="ident" id="5339210">v1</span><span class="op" id="5339212">.</span><span class="ident" id="5339213">Int</span><span class="op" id="5339216">(</span><span class="op" id="5339217">)</span>&nbsp;<span class="op" id="5339219">&lt;</span>&nbsp;<span class="num" id="5339221">0</span>&nbsp;<span class="op" id="5339223">||</span>&nbsp;<span class="ident" id="5339226">uint64</span><span class="op" id="5339232">(</span><span class="ident" id="5339233">v1</span><span class="op" id="5339235">.</span><span class="ident" id="5339236">Int</span><span class="op" id="5339239">(</span><span class="op" id="5339240">)</span><span class="op" id="5339241">)</span>&nbsp;<span class="op" id="5339243">&lt;</span>&nbsp;<span class="ident" id="5339245">v2</span><span class="op" id="5339247">.</span><span class="ident" id="5339248">Uint</span><span class="op" id="5339252">(</span><span class="op" id="5339253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339257">case</span>&nbsp;<span class="ident" id="5339262">k1</span>&nbsp;<span class="op" id="5339265">==</span>&nbsp;<span class="ident" id="5339268">uintKind</span>&nbsp;<span class="op" id="5339277">&amp;&amp;</span>&nbsp;<span class="ident" id="5339280">k2</span>&nbsp;<span class="op" id="5339283">==</span>&nbsp;<span class="ident" id="5339286">intKind</span><span class="op" id="5339293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5339298">truth</span>&nbsp;<span class="op" id="5339304">=</span>&nbsp;<span class="ident" id="5339306">v2</span><span class="op" id="5339308">.</span><span class="ident" id="5339309">Int</span><span class="op" id="5339312">(</span><span class="op" id="5339313">)</span>&nbsp;<span class="op" id="5339315">&gt;=</span>&nbsp;<span class="num" id="5339318">0</span>&nbsp;<span class="op" id="5339320">&amp;&amp;</span>&nbsp;<span class="ident" id="5339323">v1</span><span class="op" id="5339325">.</span><span class="ident" id="5339326">Uint</span><span class="op" id="5339330">(</span><span class="op" id="5339331">)</span>&nbsp;<span class="op" id="5339333">&lt;</span>&nbsp;<span class="ident" id="5339335">uint64</span><span class="op" id="5339341">(</span><span class="ident" id="5339342">v2</span><span class="op" id="5339344">.</span><span class="ident" id="5339345">Int</span><span class="op" id="5339348">(</span><span class="op" id="5339349">)</span><span class="op" id="5339350">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339354">default</span><span class="op" id="5339361">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339366">return</span>&nbsp;<span class="builtintype" id="5339373">false</span><span class="op" id="5339378">,</span>&nbsp;<span class="ident" id="5339380">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5339399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5339402">}</span>&nbsp;<span class="keyword" id="5339404">else</span>&nbsp;<span class="op" id="5339409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339413">switch</span>&nbsp;<span class="ident" id="5339420">k1</span>&nbsp;<span class="op" id="5339423">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339427">case</span>&nbsp;<span class="ident" id="5339432">boolKind</span><span class="op" id="5339440">,</span>&nbsp;<span class="ident" id="5339442">complexKind</span><span class="op" id="5339453">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339458">return</span>&nbsp;<span class="builtintype" id="5339465">false</span><span class="op" id="5339470">,</span>&nbsp;<span class="ident" id="5339472">errBadComparisonType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339495">case</span>&nbsp;<span class="ident" id="5339500">floatKind</span><span class="op" id="5339509">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5339514">truth</span>&nbsp;<span class="op" id="5339520">=</span>&nbsp;<span class="ident" id="5339522">v1</span><span class="op" id="5339524">.</span><span class="ident" id="5339525">Float</span><span class="op" id="5339530">(</span><span class="op" id="5339531">)</span>&nbsp;<span class="op" id="5339533">&lt;</span>&nbsp;<span class="ident" id="5339535">v2</span><span class="op" id="5339537">.</span><span class="ident" id="5339538">Float</span><span class="op" id="5339543">(</span><span class="op" id="5339544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339548">case</span>&nbsp;<span class="ident" id="5339553">intKind</span><span class="op" id="5339560">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5339565">truth</span>&nbsp;<span class="op" id="5339571">=</span>&nbsp;<span class="ident" id="5339573">v1</span><span class="op" id="5339575">.</span><span class="ident" id="5339576">Int</span><span class="op" id="5339579">(</span><span class="op" id="5339580">)</span>&nbsp;<span class="op" id="5339582">&lt;</span>&nbsp;<span class="ident" id="5339584">v2</span><span class="op" id="5339586">.</span><span class="ident" id="5339587">Int</span><span class="op" id="5339590">(</span><span class="op" id="5339591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339595">case</span>&nbsp;<span class="ident" id="5339600">stringKind</span><span class="op" id="5339610">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5339615">truth</span>&nbsp;<span class="op" id="5339621">=</span>&nbsp;<span class="ident" id="5339623">v1</span><span class="op" id="5339625">.</span><span class="ident" id="5339626">String</span><span class="op" id="5339632">(</span><span class="op" id="5339633">)</span>&nbsp;<span class="op" id="5339635">&lt;</span>&nbsp;<span class="ident" id="5339637">v2</span><span class="op" id="5339639">.</span><span class="ident" id="5339640">String</span><span class="op" id="5339646">(</span><span class="op" id="5339647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339651">case</span>&nbsp;<span class="ident" id="5339656">uintKind</span><span class="op" id="5339664">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5339669">truth</span>&nbsp;<span class="op" id="5339675">=</span>&nbsp;<span class="ident" id="5339677">v1</span><span class="op" id="5339679">.</span><span class="ident" id="5339680">Uint</span><span class="op" id="5339684">(</span><span class="op" id="5339685">)</span>&nbsp;<span class="op" id="5339687">&lt;</span>&nbsp;<span class="ident" id="5339689">v2</span><span class="op" id="5339691">.</span><span class="ident" id="5339692">Uint</span><span class="op" id="5339696">(</span><span class="op" id="5339697">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339701">default</span><span class="op" id="5339708">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5339713">panic</span><span class="op" id="5339718">(</span><span class="string" id="5339719">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="5339733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5339737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5339740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339743">return</span>&nbsp;<span class="ident" id="5339750">truth</span><span class="op" id="5339755">,</span>&nbsp;<span class="ident" id="5339757">nil</span><br>
<span class="lineno">400</span><span class="op" id="5339761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5339764">//&nbsp;le&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;&lt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="5339801">func</span>&nbsp;<span class="ident" id="5339806">le</span><span class="op" id="5339808">(</span><span class="ident" id="5339809">arg1</span><span class="op" id="5339813">,</span>&nbsp;<span class="ident" id="5339815">arg2</span>&nbsp;<span class="keyword" id="5339820">interface</span><span class="op" id="5339829">{</span><span class="op" id="5339830">}</span><span class="op" id="5339831">)</span>&nbsp;<span class="op" id="5339833">(</span><span class="builtintype" id="5339834">bool</span><span class="op" id="5339838">,</span>&nbsp;<span class="builtintype" id="5339840">error</span><span class="op" id="5339845">)</span>&nbsp;<span class="op" id="5339847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5339850">//&nbsp;&lt;=&nbsp;is&nbsp;&lt;&nbsp;or&nbsp;==.</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5339869">lessThan</span><span class="op" id="5339877">,</span>&nbsp;<span class="ident" id="5339879">err</span>&nbsp;<span class="op" id="5339883">:=</span>&nbsp;<span class="ident" id="5339886">lt</span><span class="op" id="5339888">(</span><span class="ident" id="5339889">arg1</span><span class="op" id="5339893">,</span>&nbsp;<span class="ident" id="5339895">arg2</span><span class="op" id="5339899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339902">if</span>&nbsp;<span class="ident" id="5339905">lessThan</span>&nbsp;<span class="op" id="5339914">||</span>&nbsp;<span class="ident" id="5339917">err</span>&nbsp;<span class="op" id="5339921">!=</span>&nbsp;<span class="ident" id="5339924">nil</span>&nbsp;<span class="op" id="5339928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339932">return</span>&nbsp;<span class="ident" id="5339939">lessThan</span><span class="op" id="5339947">,</span>&nbsp;<span class="ident" id="5339949">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5339954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5339957">return</span>&nbsp;<span class="ident" id="5339964">eq</span><span class="op" id="5339966">(</span><span class="ident" id="5339967">arg1</span><span class="op" id="5339971">,</span>&nbsp;<span class="ident" id="5339973">arg2</span><span class="op" id="5339977">)</span><br>
<span class="lineno">410</span><span class="op" id="5339979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5339982">//&nbsp;gt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="5340020">func</span>&nbsp;<span class="ident" id="5340025">gt</span><span class="op" id="5340027">(</span><span class="ident" id="5340028">arg1</span><span class="op" id="5340032">,</span>&nbsp;<span class="ident" id="5340034">arg2</span>&nbsp;<span class="keyword" id="5340039">interface</span><span class="op" id="5340048">{</span><span class="op" id="5340049">}</span><span class="op" id="5340050">)</span>&nbsp;<span class="op" id="5340052">(</span><span class="builtintype" id="5340053">bool</span><span class="op" id="5340057">,</span>&nbsp;<span class="builtintype" id="5340059">error</span><span class="op" id="5340064">)</span>&nbsp;<span class="op" id="5340066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5340069">//&nbsp;&gt;&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;=.</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340097">lessOrEqual</span><span class="op" id="5340108">,</span>&nbsp;<span class="ident" id="5340110">err</span>&nbsp;<span class="op" id="5340114">:=</span>&nbsp;<span class="ident" id="5340117">le</span><span class="op" id="5340119">(</span><span class="ident" id="5340120">arg1</span><span class="op" id="5340124">,</span>&nbsp;<span class="ident" id="5340126">arg2</span><span class="op" id="5340130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340133">if</span>&nbsp;<span class="ident" id="5340136">err</span>&nbsp;<span class="op" id="5340140">!=</span>&nbsp;<span class="ident" id="5340143">nil</span>&nbsp;<span class="op" id="5340147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340151">return</span>&nbsp;<span class="builtintype" id="5340158">false</span><span class="op" id="5340163">,</span>&nbsp;<span class="ident" id="5340165">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5340170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340173">return</span>&nbsp;<span class="op" id="5340180">!</span><span class="ident" id="5340181">lessOrEqual</span><span class="op" id="5340192">,</span>&nbsp;<span class="ident" id="5340194">nil</span><br>
<span class="lineno">420</span><span class="op" id="5340198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5340201">//&nbsp;ge&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="5340240">func</span>&nbsp;<span class="ident" id="5340245">ge</span><span class="op" id="5340247">(</span><span class="ident" id="5340248">arg1</span><span class="op" id="5340252">,</span>&nbsp;<span class="ident" id="5340254">arg2</span>&nbsp;<span class="keyword" id="5340259">interface</span><span class="op" id="5340268">{</span><span class="op" id="5340269">}</span><span class="op" id="5340270">)</span>&nbsp;<span class="op" id="5340272">(</span><span class="builtintype" id="5340273">bool</span><span class="op" id="5340277">,</span>&nbsp;<span class="builtintype" id="5340279">error</span><span class="op" id="5340284">)</span>&nbsp;<span class="op" id="5340286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5340289">//&nbsp;&gt;=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340317">lessThan</span><span class="op" id="5340325">,</span>&nbsp;<span class="ident" id="5340327">err</span>&nbsp;<span class="op" id="5340331">:=</span>&nbsp;<span class="ident" id="5340334">lt</span><span class="op" id="5340336">(</span><span class="ident" id="5340337">arg1</span><span class="op" id="5340341">,</span>&nbsp;<span class="ident" id="5340343">arg2</span><span class="op" id="5340347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340350">if</span>&nbsp;<span class="ident" id="5340353">err</span>&nbsp;<span class="op" id="5340357">!=</span>&nbsp;<span class="ident" id="5340360">nil</span>&nbsp;<span class="op" id="5340364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340368">return</span>&nbsp;<span class="builtintype" id="5340375">false</span><span class="op" id="5340380">,</span>&nbsp;<span class="ident" id="5340382">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5340387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340390">return</span>&nbsp;<span class="op" id="5340397">!</span><span class="ident" id="5340398">lessThan</span><span class="op" id="5340406">,</span>&nbsp;<span class="ident" id="5340408">nil</span><br>
<span class="lineno">430</span><span class="op" id="5340412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5340415">//&nbsp;HTML&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5340434">var</span>&nbsp;<span class="op" id="5340438">(</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340441">htmlQuot</span>&nbsp;<span class="op" id="5340450">=</span>&nbsp;<span class="op" id="5340452">[</span><span class="op" id="5340453">]</span><span class="builtintype" id="5340454">byte</span><span class="op" id="5340458">(</span><span class="string" id="5340459">&#34;&amp;#34;&#34;</span><span class="op" id="5340466">)</span>&nbsp;<span class="comment" id="5340468">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;quot;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340494">htmlApos</span>&nbsp;<span class="op" id="5340503">=</span>&nbsp;<span class="op" id="5340505">[</span><span class="op" id="5340506">]</span><span class="builtintype" id="5340507">byte</span><span class="op" id="5340511">(</span><span class="string" id="5340512">&#34;&amp;#39;&#34;</span><span class="op" id="5340519">)</span>&nbsp;<span class="comment" id="5340521">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;apos;&#34;&nbsp;and&nbsp;apos&nbsp;was&nbsp;not&nbsp;in&nbsp;HTML&nbsp;until&nbsp;HTML5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340584">htmlAmp</span>&nbsp;&nbsp;<span class="op" id="5340593">=</span>&nbsp;<span class="op" id="5340595">[</span><span class="op" id="5340596">]</span><span class="builtintype" id="5340597">byte</span><span class="op" id="5340601">(</span><span class="string" id="5340602">&#34;&amp;amp;&#34;</span><span class="op" id="5340609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340612">htmlLt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5340621">=</span>&nbsp;<span class="op" id="5340623">[</span><span class="op" id="5340624">]</span><span class="builtintype" id="5340625">byte</span><span class="op" id="5340629">(</span><span class="string" id="5340630">&#34;&amp;lt;&#34;</span><span class="op" id="5340636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340639">htmlGt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5340648">=</span>&nbsp;<span class="op" id="5340650">[</span><span class="op" id="5340651">]</span><span class="builtintype" id="5340652">byte</span><span class="op" id="5340656">(</span><span class="string" id="5340657">&#34;&amp;gt;&#34;</span><span class="op" id="5340663">)</span><br>
<span class="lineno">440</span><span class="op" id="5340665">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5340668">//&nbsp;HTMLEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="5340748">func</span>&nbsp;<span class="ident" id="5340753">HTMLEscape</span><span class="op" id="5340763">(</span><span class="ident" id="5340764">w</span>&nbsp;<span class="ident" id="5340766">io</span><span class="op" id="5340768">.</span><span class="ident" id="5340769">Writer</span><span class="op" id="5340775">,</span>&nbsp;<span class="ident" id="5340777">b</span>&nbsp;<span class="op" id="5340779">[</span><span class="op" id="5340780">]</span><span class="builtintype" id="5340781">byte</span><span class="op" id="5340785">)</span>&nbsp;<span class="op" id="5340787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340790">last</span>&nbsp;<span class="op" id="5340795">:=</span>&nbsp;<span class="num" id="5340798">0</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340801">for</span>&nbsp;<span class="ident" id="5340805">i</span><span class="op" id="5340806">,</span>&nbsp;<span class="ident" id="5340808">c</span>&nbsp;<span class="op" id="5340810">:=</span>&nbsp;<span class="keyword" id="5340813">range</span>&nbsp;<span class="ident" id="5340819">b</span>&nbsp;<span class="op" id="5340821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340825">var</span>&nbsp;<span class="ident" id="5340829">html</span>&nbsp;<span class="op" id="5340834">[</span><span class="op" id="5340835">]</span><span class="builtintype" id="5340836">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340843">switch</span>&nbsp;<span class="ident" id="5340850">c</span>&nbsp;<span class="op" id="5340852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340856">case</span>&nbsp;<span class="string" id="5340861">&#39;&#34;&#39;</span><span class="op" id="5340864">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340869">html</span>&nbsp;<span class="op" id="5340874">=</span>&nbsp;<span class="ident" id="5340876">htmlQuot</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340887">case</span>&nbsp;<span class="string" id="5340892">&#39;\&#39;&#39;</span><span class="op" id="5340896">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340901">html</span>&nbsp;<span class="op" id="5340906">=</span>&nbsp;<span class="ident" id="5340908">htmlApos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340919">case</span>&nbsp;<span class="string" id="5340924">&#39;&amp;&#39;</span><span class="op" id="5340927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340932">html</span>&nbsp;<span class="op" id="5340937">=</span>&nbsp;<span class="ident" id="5340939">htmlAmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340949">case</span>&nbsp;<span class="string" id="5340954">&#39;&lt;&#39;</span><span class="op" id="5340957">:</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340962">html</span>&nbsp;<span class="op" id="5340967">=</span>&nbsp;<span class="ident" id="5340969">htmlLt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5340978">case</span>&nbsp;<span class="string" id="5340983">&#39;&gt;&#39;</span><span class="op" id="5340986">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5340991">html</span>&nbsp;<span class="op" id="5340996">=</span>&nbsp;<span class="ident" id="5340998">htmlGt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5341007">default</span><span class="op" id="5341014">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5341019">continue</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5341030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341034">w</span><span class="op" id="5341035">.</span><span class="ident" id="5341036">Write</span><span class="op" id="5341041">(</span><span class="ident" id="5341042">b</span><span class="op" id="5341043">[</span><span class="ident" id="5341044">last</span><span class="op" id="5341048">:</span><span class="ident" id="5341049">i</span><span class="op" id="5341050">]</span><span class="op" id="5341051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341055">w</span><span class="op" id="5341056">.</span><span class="ident" id="5341057">Write</span><span class="op" id="5341062">(</span><span class="ident" id="5341063">html</span><span class="op" id="5341067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341071">last</span>&nbsp;<span class="op" id="5341076">=</span>&nbsp;<span class="ident" id="5341078">i</span>&nbsp;<span class="op" id="5341080">+</span>&nbsp;<span class="num" id="5341082">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5341085">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341088">w</span><span class="op" id="5341089">.</span><span class="ident" id="5341090">Write</span><span class="op" id="5341095">(</span><span class="ident" id="5341096">b</span><span class="op" id="5341097">[</span><span class="ident" id="5341098">last</span><span class="op" id="5341102">:</span><span class="op" id="5341103">]</span><span class="op" id="5341104">)</span><br>
<span class="lineno"></span><span class="op" id="5341106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5341109">//&nbsp;HTMLEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="5341191">func</span>&nbsp;<span class="ident" id="5341196">HTMLEscapeString</span><span class="op" id="5341212">(</span><span class="ident" id="5341213">s</span>&nbsp;<span class="builtintype" id="5341215">string</span><span class="op" id="5341221">)</span>&nbsp;<span class="builtintype" id="5341223">string</span>&nbsp;<span class="op" id="5341230">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5341233">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5341265">if</span>&nbsp;<span class="ident" id="5341268">strings</span><span class="op" id="5341275">.</span><span class="ident" id="5341276">IndexAny</span><span class="op" id="5341284">(</span><span class="ident" id="5341285">s</span><span class="op" id="5341286">,</span>&nbsp;<span class="string" id="5341288">`&#39;&#34;&amp;&lt;&gt;`</span><span class="op" id="5341295">)</span>&nbsp;<span class="op" id="5341297">&lt;</span>&nbsp;<span class="num" id="5341299">0</span>&nbsp;<span class="op" id="5341301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5341305">return</span>&nbsp;<span class="ident" id="5341312">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5341315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5341318">var</span>&nbsp;<span class="ident" id="5341322">b</span>&nbsp;<span class="ident" id="5341324">bytes</span><span class="op" id="5341329">.</span><span class="ident" id="5341330">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341338">HTMLEscape</span><span class="op" id="5341348">(</span><span class="op" id="5341349">&amp;</span><span class="ident" id="5341350">b</span><span class="op" id="5341351">,</span>&nbsp;<span class="op" id="5341353">[</span><span class="op" id="5341354">]</span><span class="builtintype" id="5341355">byte</span><span class="op" id="5341359">(</span><span class="ident" id="5341360">s</span><span class="op" id="5341361">)</span><span class="op" id="5341362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5341365">return</span>&nbsp;<span class="ident" id="5341372">b</span><span class="op" id="5341373">.</span><span class="ident" id="5341374">String</span><span class="op" id="5341380">(</span><span class="op" id="5341381">)</span><br>
<span class="lineno"></span><span class="op" id="5341383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5341386">//&nbsp;HTMLEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">480</span><span class="comment" id="5341452">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="5341488">func</span>&nbsp;<span class="ident" id="5341493">HTMLEscaper</span><span class="op" id="5341504">(</span><span class="ident" id="5341505">args</span>&nbsp;<span class="op" id="5341510">...</span><span class="keyword" id="5341513">interface</span><span class="op" id="5341522">{</span><span class="op" id="5341523">}</span><span class="op" id="5341524">)</span>&nbsp;<span class="builtintype" id="5341526">string</span>&nbsp;<span class="op" id="5341533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5341536">return</span>&nbsp;<span class="ident" id="5341543">HTMLEscapeString</span><span class="op" id="5341559">(</span><span class="ident" id="5341560">evalArgs</span><span class="op" id="5341568">(</span><span class="ident" id="5341569">args</span><span class="op" id="5341573">)</span><span class="op" id="5341574">)</span><br>
<span class="lineno"></span><span class="op" id="5341576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="comment" id="5341579">//&nbsp;JavaScript&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5341604">var</span>&nbsp;<span class="op" id="5341608">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341611">jsLowUni</span>&nbsp;<span class="op" id="5341620">=</span>&nbsp;<span class="op" id="5341622">[</span><span class="op" id="5341623">]</span><span class="builtintype" id="5341624">byte</span><span class="op" id="5341628">(</span><span class="string" id="5341629">`\u00`</span><span class="op" id="5341635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341638">hex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5341647">=</span>&nbsp;<span class="op" id="5341649">[</span><span class="op" id="5341650">]</span><span class="builtintype" id="5341651">byte</span><span class="op" id="5341655">(</span><span class="string" id="5341656">&#34;0123456789ABCDEF&#34;</span><span class="op" id="5341674">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341678">jsBackslash</span>&nbsp;<span class="op" id="5341690">=</span>&nbsp;<span class="op" id="5341692">[</span><span class="op" id="5341693">]</span><span class="builtintype" id="5341694">byte</span><span class="op" id="5341698">(</span><span class="string" id="5341699">`\\`</span><span class="op" id="5341703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341706">jsApos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5341718">=</span>&nbsp;<span class="op" id="5341720">[</span><span class="op" id="5341721">]</span><span class="builtintype" id="5341722">byte</span><span class="op" id="5341726">(</span><span class="string" id="5341727">`\&#39;`</span><span class="op" id="5341731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341734">jsQuot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5341746">=</span>&nbsp;<span class="op" id="5341748">[</span><span class="op" id="5341749">]</span><span class="builtintype" id="5341750">byte</span><span class="op" id="5341754">(</span><span class="string" id="5341755">`\&#34;`</span><span class="op" id="5341759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341762">jsLt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5341774">=</span>&nbsp;<span class="op" id="5341776">[</span><span class="op" id="5341777">]</span><span class="builtintype" id="5341778">byte</span><span class="op" id="5341782">(</span><span class="string" id="5341783">`\x3C`</span><span class="op" id="5341789">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341792">jsGt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5341804">=</span>&nbsp;<span class="op" id="5341806">[</span><span class="op" id="5341807">]</span><span class="builtintype" id="5341808">byte</span><span class="op" id="5341812">(</span><span class="string" id="5341813">`\x3E`</span><span class="op" id="5341819">)</span><br>
<span class="lineno"></span><span class="op" id="5341821">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5341824">//&nbsp;JSEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="5341908">func</span>&nbsp;<span class="ident" id="5341913">JSEscape</span><span class="op" id="5341921">(</span><span class="ident" id="5341922">w</span>&nbsp;<span class="ident" id="5341924">io</span><span class="op" id="5341926">.</span><span class="ident" id="5341927">Writer</span><span class="op" id="5341933">,</span>&nbsp;<span class="ident" id="5341935">b</span>&nbsp;<span class="op" id="5341937">[</span><span class="op" id="5341938">]</span><span class="builtintype" id="5341939">byte</span><span class="op" id="5341943">)</span>&nbsp;<span class="op" id="5341945">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341948">last</span>&nbsp;<span class="op" id="5341953">:=</span>&nbsp;<span class="num" id="5341956">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5341959">for</span>&nbsp;<span class="ident" id="5341963">i</span>&nbsp;<span class="op" id="5341965">:=</span>&nbsp;<span class="num" id="5341968">0</span><span class="op" id="5341969">;</span>&nbsp;<span class="ident" id="5341971">i</span>&nbsp;<span class="op" id="5341973">&lt;</span>&nbsp;<span class="builtinfunc" id="5341975">len</span><span class="op" id="5341978">(</span><span class="ident" id="5341979">b</span><span class="op" id="5341980">)</span><span class="op" id="5341981">;</span>&nbsp;<span class="ident" id="5341983">i</span><span class="op" id="5341984">++</span>&nbsp;<span class="op" id="5341987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5341991">c</span>&nbsp;<span class="op" id="5341993">:=</span>&nbsp;<span class="ident" id="5341996">b</span><span class="op" id="5341997">[</span><span class="ident" id="5341998">i</span><span class="op" id="5341999">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342004">if</span>&nbsp;<span class="op" id="5342007">!</span><span class="ident" id="5342008">jsIsSpecial</span><span class="op" id="5342019">(</span><span class="builtintype" id="5342020">rune</span><span class="op" id="5342024">(</span><span class="ident" id="5342025">c</span><span class="op" id="5342026">)</span><span class="op" id="5342027">)</span>&nbsp;<span class="op" id="5342029">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5342034">//&nbsp;fast&nbsp;path:&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342065">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5342076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342080">w</span><span class="op" id="5342081">.</span><span class="ident" id="5342082">Write</span><span class="op" id="5342087">(</span><span class="ident" id="5342088">b</span><span class="op" id="5342089">[</span><span class="ident" id="5342090">last</span><span class="op" id="5342094">:</span><span class="ident" id="5342095">i</span><span class="op" id="5342096">]</span><span class="op" id="5342097">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342102">if</span>&nbsp;<span class="ident" id="5342105">c</span>&nbsp;<span class="op" id="5342107">&lt;</span>&nbsp;<span class="ident" id="5342109">utf8</span><span class="op" id="5342113">.</span><span class="ident" id="5342114">RuneSelf</span>&nbsp;<span class="op" id="5342123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5342128">//&nbsp;Quotes,&nbsp;slashes&nbsp;and&nbsp;angle&nbsp;brackets&nbsp;get&nbsp;quoted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5342181">//&nbsp;Control&nbsp;characters&nbsp;get&nbsp;written&nbsp;as&nbsp;\u00XX.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342229">switch</span>&nbsp;<span class="ident" id="5342236">c</span>&nbsp;<span class="op" id="5342238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342243">case</span>&nbsp;<span class="string" id="5342248">&#39;\\&#39;</span><span class="op" id="5342252">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342258">w</span><span class="op" id="5342259">.</span><span class="ident" id="5342260">Write</span><span class="op" id="5342265">(</span><span class="ident" id="5342266">jsBackslash</span><span class="op" id="5342277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342282">case</span>&nbsp;<span class="string" id="5342287">&#39;\&#39;&#39;</span><span class="op" id="5342291">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342297">w</span><span class="op" id="5342298">.</span><span class="ident" id="5342299">Write</span><span class="op" id="5342304">(</span><span class="ident" id="5342305">jsApos</span><span class="op" id="5342311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342316">case</span>&nbsp;<span class="string" id="5342321">&#39;&#34;&#39;</span><span class="op" id="5342324">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342330">w</span><span class="op" id="5342331">.</span><span class="ident" id="5342332">Write</span><span class="op" id="5342337">(</span><span class="ident" id="5342338">jsQuot</span><span class="op" id="5342344">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342349">case</span>&nbsp;<span class="string" id="5342354">&#39;&lt;&#39;</span><span class="op" id="5342357">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342363">w</span><span class="op" id="5342364">.</span><span class="ident" id="5342365">Write</span><span class="op" id="5342370">(</span><span class="ident" id="5342371">jsLt</span><span class="op" id="5342375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342380">case</span>&nbsp;<span class="string" id="5342385">&#39;&gt;&#39;</span><span class="op" id="5342388">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342394">w</span><span class="op" id="5342395">.</span><span class="ident" id="5342396">Write</span><span class="op" id="5342401">(</span><span class="ident" id="5342402">jsGt</span><span class="op" id="5342406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342411">default</span><span class="op" id="5342418">:</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342424">w</span><span class="op" id="5342425">.</span><span class="ident" id="5342426">Write</span><span class="op" id="5342431">(</span><span class="ident" id="5342432">jsLowUni</span><span class="op" id="5342440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342446">t</span><span class="op" id="5342447">,</span>&nbsp;<span class="ident" id="5342449">b</span>&nbsp;<span class="op" id="5342451">:=</span>&nbsp;<span class="ident" id="5342454">c</span><span class="op" id="5342455">&gt;&gt;</span><span class="num" id="5342457">4</span><span class="op" id="5342458">,</span>&nbsp;<span class="ident" id="5342460">c</span><span class="op" id="5342461">&amp;</span><span class="num" id="5342462">0x0f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342471">w</span><span class="op" id="5342472">.</span><span class="ident" id="5342473">Write</span><span class="op" id="5342478">(</span><span class="ident" id="5342479">hex</span><span class="op" id="5342482">[</span><span class="ident" id="5342483">t</span>&nbsp;<span class="op" id="5342485">:</span>&nbsp;<span class="ident" id="5342487">t</span><span class="op" id="5342488">+</span><span class="num" id="5342489">1</span><span class="op" id="5342490">]</span><span class="op" id="5342491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342497">w</span><span class="op" id="5342498">.</span><span class="ident" id="5342499">Write</span><span class="op" id="5342504">(</span><span class="ident" id="5342505">hex</span><span class="op" id="5342508">[</span><span class="ident" id="5342509">b</span>&nbsp;<span class="op" id="5342511">:</span>&nbsp;<span class="ident" id="5342513">b</span><span class="op" id="5342514">+</span><span class="num" id="5342515">1</span><span class="op" id="5342516">]</span><span class="op" id="5342517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5342522">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5342526">}</span>&nbsp;<span class="keyword" id="5342528">else</span>&nbsp;<span class="op" id="5342533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5342538">//&nbsp;Unicode&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342558">r</span><span class="op" id="5342559">,</span>&nbsp;<span class="ident" id="5342561">size</span>&nbsp;<span class="op" id="5342566">:=</span>&nbsp;<span class="ident" id="5342569">utf8</span><span class="op" id="5342573">.</span><span class="ident" id="5342574">DecodeRune</span><span class="op" id="5342584">(</span><span class="ident" id="5342585">b</span><span class="op" id="5342586">[</span><span class="ident" id="5342587">i</span><span class="op" id="5342588">:</span><span class="op" id="5342589">]</span><span class="op" id="5342590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342595">if</span>&nbsp;<span class="ident" id="5342598">unicode</span><span class="op" id="5342605">.</span><span class="ident" id="5342606">IsPrint</span><span class="op" id="5342613">(</span><span class="ident" id="5342614">r</span><span class="op" id="5342615">)</span>&nbsp;<span class="op" id="5342617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342623">w</span><span class="op" id="5342624">.</span><span class="ident" id="5342625">Write</span><span class="op" id="5342630">(</span><span class="ident" id="5342631">b</span><span class="op" id="5342632">[</span><span class="ident" id="5342633">i</span>&nbsp;<span class="op" id="5342635">:</span>&nbsp;<span class="ident" id="5342637">i</span><span class="op" id="5342638">+</span><span class="ident" id="5342639">size</span><span class="op" id="5342643">]</span><span class="op" id="5342644">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5342649">}</span>&nbsp;<span class="keyword" id="5342651">else</span>&nbsp;<span class="op" id="5342656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342662">fmt</span><span class="op" id="5342665">.</span><span class="ident" id="5342666">Fprintf</span><span class="op" id="5342673">(</span><span class="ident" id="5342674">w</span><span class="op" id="5342675">,</span>&nbsp;<span class="string" id="5342677">&#34;\\u%04X&#34;</span><span class="op" id="5342686">,</span>&nbsp;<span class="ident" id="5342688">r</span><span class="op" id="5342689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5342694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342699">i</span>&nbsp;<span class="op" id="5342701">+=</span>&nbsp;<span class="ident" id="5342704">size</span>&nbsp;<span class="op" id="5342709">-</span>&nbsp;<span class="num" id="5342711">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5342715">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342719">last</span>&nbsp;<span class="op" id="5342724">=</span>&nbsp;<span class="ident" id="5342726">i</span>&nbsp;<span class="op" id="5342728">+</span>&nbsp;<span class="num" id="5342730">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5342733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342736">w</span><span class="op" id="5342737">.</span><span class="ident" id="5342738">Write</span><span class="op" id="5342743">(</span><span class="ident" id="5342744">b</span><span class="op" id="5342745">[</span><span class="ident" id="5342746">last</span><span class="op" id="5342750">:</span><span class="op" id="5342751">]</span><span class="op" id="5342752">)</span><br>
<span class="lineno"></span><span class="op" id="5342754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span><span class="comment" id="5342757">//&nbsp;JSEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="5342843">func</span>&nbsp;<span class="ident" id="5342848">JSEscapeString</span><span class="op" id="5342862">(</span><span class="ident" id="5342863">s</span>&nbsp;<span class="builtintype" id="5342865">string</span><span class="op" id="5342871">)</span>&nbsp;<span class="builtintype" id="5342873">string</span>&nbsp;<span class="op" id="5342880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5342883">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342915">if</span>&nbsp;<span class="ident" id="5342918">strings</span><span class="op" id="5342925">.</span><span class="ident" id="5342926">IndexFunc</span><span class="op" id="5342935">(</span><span class="ident" id="5342936">s</span><span class="op" id="5342937">,</span>&nbsp;<span class="ident" id="5342939">jsIsSpecial</span><span class="op" id="5342950">)</span>&nbsp;<span class="op" id="5342952">&lt;</span>&nbsp;<span class="num" id="5342954">0</span>&nbsp;<span class="op" id="5342956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342960">return</span>&nbsp;<span class="ident" id="5342967">s</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5342970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5342973">var</span>&nbsp;<span class="ident" id="5342977">b</span>&nbsp;<span class="ident" id="5342979">bytes</span><span class="op" id="5342984">.</span><span class="ident" id="5342985">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5342993">JSEscape</span><span class="op" id="5343001">(</span><span class="op" id="5343002">&amp;</span><span class="ident" id="5343003">b</span><span class="op" id="5343004">,</span>&nbsp;<span class="op" id="5343006">[</span><span class="op" id="5343007">]</span><span class="builtintype" id="5343008">byte</span><span class="op" id="5343012">(</span><span class="ident" id="5343013">s</span><span class="op" id="5343014">)</span><span class="op" id="5343015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5343018">return</span>&nbsp;<span class="ident" id="5343025">b</span><span class="op" id="5343026">.</span><span class="ident" id="5343027">String</span><span class="op" id="5343033">(</span><span class="op" id="5343034">)</span><br>
<span class="lineno"></span><span class="op" id="5343036">}</span><br>
<span class="lineno">555</span><br>
<span class="lineno"></span><span class="keyword" id="5343039">func</span>&nbsp;<span class="ident" id="5343044">jsIsSpecial</span><span class="op" id="5343055">(</span><span class="ident" id="5343056">r</span>&nbsp;<span class="builtintype" id="5343058">rune</span><span class="op" id="5343062">)</span>&nbsp;<span class="builtintype" id="5343064">bool</span>&nbsp;<span class="op" id="5343069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5343072">switch</span>&nbsp;<span class="ident" id="5343079">r</span>&nbsp;<span class="op" id="5343081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5343084">case</span>&nbsp;<span class="string" id="5343089">&#39;\\&#39;</span><span class="op" id="5343093">,</span>&nbsp;<span class="string" id="5343095">&#39;\&#39;&#39;</span><span class="op" id="5343099">,</span>&nbsp;<span class="string" id="5343101">&#39;&#34;&#39;</span><span class="op" id="5343104">,</span>&nbsp;<span class="string" id="5343106">&#39;&lt;&#39;</span><span class="op" id="5343109">,</span>&nbsp;<span class="string" id="5343111">&#39;&gt;&#39;</span><span class="op" id="5343114">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5343118">return</span>&nbsp;<span class="builtintype" id="5343125">true</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5343131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5343134">return</span>&nbsp;<span class="ident" id="5343141">r</span>&nbsp;<span class="op" id="5343143">&lt;</span>&nbsp;<span class="string" id="5343145">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5343149">||</span>&nbsp;<span class="ident" id="5343152">utf8</span><span class="op" id="5343156">.</span><span class="ident" id="5343157">RuneSelf</span>&nbsp;<span class="op" id="5343166">&lt;=</span>&nbsp;<span class="ident" id="5343169">r</span><br>
<span class="lineno"></span><span class="op" id="5343171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5343174">//&nbsp;JSEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">565</span><span class="comment" id="5343244">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="5343280">func</span>&nbsp;<span class="ident" id="5343285">JSEscaper</span><span class="op" id="5343294">(</span><span class="ident" id="5343295">args</span>&nbsp;<span class="op" id="5343300">...</span><span class="keyword" id="5343303">interface</span><span class="op" id="5343312">{</span><span class="op" id="5343313">}</span><span class="op" id="5343314">)</span>&nbsp;<span class="builtintype" id="5343316">string</span>&nbsp;<span class="op" id="5343323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5343326">return</span>&nbsp;<span class="ident" id="5343333">JSEscapeString</span><span class="op" id="5343347">(</span><span class="ident" id="5343348">evalArgs</span><span class="op" id="5343356">(</span><span class="ident" id="5343357">args</span><span class="op" id="5343361">)</span><span class="op" id="5343362">)</span><br>
<span class="lineno"></span><span class="op" id="5343364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="5343367">//&nbsp;URLQueryEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;value&nbsp;of&nbsp;the&nbsp;textual&nbsp;representation&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5343445">//&nbsp;its&nbsp;arguments&nbsp;in&nbsp;a&nbsp;form&nbsp;suitable&nbsp;for&nbsp;embedding&nbsp;in&nbsp;a&nbsp;URL&nbsp;query.</span><br>
<span class="lineno"></span><span class="keyword" id="5343511">func</span>&nbsp;<span class="ident" id="5343516">URLQueryEscaper</span><span class="op" id="5343531">(</span><span class="ident" id="5343532">args</span>&nbsp;<span class="op" id="5343537">...</span><span class="keyword" id="5343540">interface</span><span class="op" id="5343549">{</span><span class="op" id="5343550">}</span><span class="op" id="5343551">)</span>&nbsp;<span class="builtintype" id="5343553">string</span>&nbsp;<span class="op" id="5343560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5343563">return</span>&nbsp;<span class="ident" id="5343570">url</span><span class="op" id="5343573">.</span><span class="ident" id="5343574">QueryEscape</span><span class="op" id="5343585">(</span><span class="ident" id="5343586">evalArgs</span><span class="op" id="5343594">(</span><span class="ident" id="5343595">args</span><span class="op" id="5343599">)</span><span class="op" id="5343600">)</span><br>
<span class="lineno"></span><span class="op" id="5343602">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="5343605">//&nbsp;evalArgs&nbsp;formats&nbsp;the&nbsp;list&nbsp;of&nbsp;arguments&nbsp;into&nbsp;a&nbsp;string.&nbsp;It&nbsp;is&nbsp;therefore&nbsp;equivalent&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5343692">//&nbsp;&nbsp;&nbsp;&nbsp;fmt.Sprint(args...)</span><br>
<span class="lineno"></span><span class="comment" id="5343715">//&nbsp;except&nbsp;that&nbsp;each&nbsp;argument&nbsp;is&nbsp;indirected&nbsp;(if&nbsp;a&nbsp;pointer),&nbsp;as&nbsp;required,</span><br>
<span class="lineno"></span><span class="comment" id="5343787">//&nbsp;using&nbsp;the&nbsp;same&nbsp;rules&nbsp;as&nbsp;the&nbsp;default&nbsp;string&nbsp;evaluation&nbsp;during&nbsp;template</span><br>
<span class="lineno">580</span><span class="comment" id="5343860">//&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="5343874">func</span>&nbsp;<span class="ident" id="5343879">evalArgs</span><span class="op" id="5343887">(</span><span class="ident" id="5343888">args</span>&nbsp;<span class="op" id="5343893">[</span><span class="op" id="5343894">]</span><span class="keyword" id="5343895">interface</span><span class="op" id="5343904">{</span><span class="op" id="5343905">}</span><span class="op" id="5343906">)</span>&nbsp;<span class="builtintype" id="5343908">string</span>&nbsp;<span class="op" id="5343915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5343918">ok</span>&nbsp;<span class="op" id="5343921">:=</span>&nbsp;<span class="builtintype" id="5343924">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5343931">var</span>&nbsp;<span class="ident" id="5343935">s</span>&nbsp;<span class="builtintype" id="5343937">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5343945">//&nbsp;Fast&nbsp;path&nbsp;for&nbsp;simple&nbsp;common&nbsp;case.</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5343983">if</span>&nbsp;<span class="builtinfunc" id="5343986">len</span><span class="op" id="5343989">(</span><span class="ident" id="5343990">args</span><span class="op" id="5343994">)</span>&nbsp;<span class="op" id="5343996">==</span>&nbsp;<span class="num" id="5343999">1</span>&nbsp;<span class="op" id="5344001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5344005">s</span><span class="op" id="5344006">,</span>&nbsp;<span class="ident" id="5344008">ok</span>&nbsp;<span class="op" id="5344011">=</span>&nbsp;<span class="ident" id="5344013">args</span><span class="op" id="5344017">[</span><span class="num" id="5344018">0</span><span class="op" id="5344019">]</span><span class="op" id="5344020">.</span><span class="op" id="5344021">(</span><span class="builtintype" id="5344022">string</span><span class="op" id="5344028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5344031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5344034">if</span>&nbsp;<span class="op" id="5344037">!</span><span class="ident" id="5344038">ok</span>&nbsp;<span class="op" id="5344041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5344045">for</span>&nbsp;<span class="ident" id="5344049">i</span><span class="op" id="5344050">,</span>&nbsp;<span class="ident" id="5344052">arg</span>&nbsp;<span class="op" id="5344056">:=</span>&nbsp;<span class="keyword" id="5344059">range</span>&nbsp;<span class="ident" id="5344065">args</span>&nbsp;<span class="op" id="5344070">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5344075">a</span><span class="op" id="5344076">,</span>&nbsp;<span class="ident" id="5344078">ok</span>&nbsp;<span class="op" id="5344081">:=</span>&nbsp;<span class="ident" id="5344084">printableValue</span><span class="op" id="5344098">(</span><span class="ident" id="5344099">reflect</span><span class="op" id="5344106">.</span><span class="ident" id="5344107">ValueOf</span><span class="op" id="5344114">(</span><span class="ident" id="5344115">arg</span><span class="op" id="5344118">)</span><span class="op" id="5344119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5344124">if</span>&nbsp;<span class="ident" id="5344127">ok</span>&nbsp;<span class="op" id="5344130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5344136">args</span><span class="op" id="5344140">[</span><span class="ident" id="5344141">i</span><span class="op" id="5344142">]</span>&nbsp;<span class="op" id="5344144">=</span>&nbsp;<span class="ident" id="5344146">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5344151">}</span>&nbsp;<span class="comment" id="5344153">//&nbsp;else&nbsp;left&nbsp;fmt&nbsp;do&nbsp;its&nbsp;thing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5344185">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5344189">s</span>&nbsp;<span class="op" id="5344191">=</span>&nbsp;<span class="ident" id="5344193">fmt</span><span class="op" id="5344196">.</span><span class="ident" id="5344197">Sprint</span><span class="op" id="5344203">(</span><span class="ident" id="5344204">args</span><span class="op" id="5344208">...</span><span class="op" id="5344211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5344214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5344217">return</span>&nbsp;<span class="ident" id="5344224">s</span><br>
<span class="lineno"></span><span class="op" id="5344226">}</span>
</div>
</body>
</html>
