<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5084073">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5084128">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5084182">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5084233">//&nbsp;Package&nbsp;format&nbsp;implements&nbsp;standard&nbsp;formatting&nbsp;of&nbsp;Go&nbsp;source.</span><br>
<span class="lineno"></span><span class="keyword" id="5084296">package</span>&nbsp;<span class="ident" id="5084304">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5084312">import</span>&nbsp;<span class="op" id="5084319">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5084322">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5084331">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5084338">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5084348">&#34;go/parser&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5084361">&#34;go/printer&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5084375">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5084387">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5084393">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5084403">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5084406">var</span>&nbsp;<span class="ident" id="5084410">config</span>&nbsp;<span class="op" id="5084417">=</span>&nbsp;<span class="ident" id="5084419"><a href="/go/format/format.go.html#5084361">printer</a></span><span class="op" id="5084426">.</span><span class="ident" id="5084427">Config</span><span class="op" id="5084433">{</span><span class="ident" id="5084434">Mode</span><span class="op" id="5084438">:</span>&nbsp;<span class="ident" id="5084440"><a href="/go/format/format.go.html#5084361">printer</a></span><span class="op" id="5084447">.</span><span class="ident" id="5084448">UseSpaces</span>&nbsp;<span class="op" id="5084458">|</span>&nbsp;<span class="ident" id="5084460"><a href="/go/format/format.go.html#5084361">printer</a></span><span class="op" id="5084467">.</span><span class="ident" id="5084468">TabIndent</span><span class="op" id="5084477">,</span>&nbsp;<span class="ident" id="5084479">Tabwidth</span><span class="op" id="5084487">:</span>&nbsp;<span class="num" id="5084489">8</span><span class="op" id="5084490">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="5084493">const</span>&nbsp;<span class="ident" id="5084499">parserMode</span>&nbsp;<span class="op" id="5084510">=</span>&nbsp;<span class="ident" id="5084512"><a href="/go/format/format.go.html#5084348">parser</a></span><span class="op" id="5084518">.</span><span class="ident" id="5084519">ParseComments</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5084534">//&nbsp;Node&nbsp;formats&nbsp;node&nbsp;in&nbsp;canonical&nbsp;gofmt&nbsp;style&nbsp;and&nbsp;writes&nbsp;the&nbsp;result&nbsp;to&nbsp;dst.</span><br>
<span class="lineno"></span><span class="comment" id="5084610">//</span><br>
<span class="lineno">25</span><span class="comment" id="5084613">//&nbsp;The&nbsp;node&nbsp;type&nbsp;must&nbsp;be&nbsp;*ast.File,&nbsp;*printer.CommentedNode,&nbsp;[]ast.Decl,</span><br>
<span class="lineno"></span><span class="comment" id="5084685">//&nbsp;[]ast.Stmt,&nbsp;or&nbsp;assignment-compatible&nbsp;to&nbsp;ast.Expr,&nbsp;ast.Decl,&nbsp;ast.Spec,</span><br>
<span class="lineno"></span><span class="comment" id="5084758">//&nbsp;or&nbsp;ast.Stmt.&nbsp;Node&nbsp;does&nbsp;not&nbsp;modify&nbsp;node.&nbsp;Imports&nbsp;are&nbsp;not&nbsp;sorted&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="5084828">//&nbsp;nodes&nbsp;representing&nbsp;partial&nbsp;source&nbsp;files&nbsp;(i.e.,&nbsp;if&nbsp;the&nbsp;node&nbsp;is&nbsp;not&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="5084900">//&nbsp;*ast.File&nbsp;or&nbsp;a&nbsp;*printer.CommentedNode&nbsp;not&nbsp;wrapping&nbsp;an&nbsp;*ast.File).</span><br>
<span class="lineno">30</span><span class="comment" id="5084969">//</span><br>
<span class="lineno"></span><span class="comment" id="5084972">//&nbsp;The&nbsp;function&nbsp;may&nbsp;return&nbsp;early&nbsp;(before&nbsp;the&nbsp;entire&nbsp;result&nbsp;is&nbsp;written)</span><br>
<span class="lineno"></span><span class="comment" id="5085043">//&nbsp;and&nbsp;return&nbsp;a&nbsp;formatting&nbsp;error,&nbsp;for&nbsp;instance&nbsp;due&nbsp;to&nbsp;an&nbsp;incorrect&nbsp;AST.</span><br>
<span class="lineno"></span><span class="comment" id="5085115">//</span><br>
<span class="lineno"></span><span class="keyword" id="5085118">func</span>&nbsp;<span class="ident" id="5085123">Node</span><span class="op" id="5085127">(</span><span class="ident" id="5085128">dst</span>&nbsp;<span class="ident" id="5085132"><a href="/go/format/format.go.html#5084387">io</a></span><span class="op" id="5085134">.</span><span class="ident" id="5085135">Writer</span><span class="op" id="5085141">,</span>&nbsp;<span class="ident" id="5085143">fset</span>&nbsp;<span class="op" id="5085148">*</span><span class="ident" id="5085149"><a href="/go/format/format.go.html#5084375">token</a></span><span class="op" id="5085154">.</span><span class="ident" id="5085155">FileSet</span><span class="op" id="5085162">,</span>&nbsp;<span class="ident" id="5085164">node</span>&nbsp;<span class="keyword" id="5085169">interface</span><span class="op" id="5085178">{</span><span class="op" id="5085179">}</span><span class="op" id="5085180">)</span>&nbsp;<span class="builtintype" id="5085182">error</span>&nbsp;<span class="op" id="5085188">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5085191">//&nbsp;Determine&nbsp;if&nbsp;we&nbsp;have&nbsp;a&nbsp;complete&nbsp;source&nbsp;file&nbsp;(file&nbsp;!=&nbsp;nil).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085254">var</span>&nbsp;<span class="ident" id="5085258">file</span>&nbsp;<span class="op" id="5085263">*</span><span class="ident" id="5085264"><a href="/go/format/format.go.html#5084338">ast</a></span><span class="op" id="5085267">.</span><span class="ident" id="5085268">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085274">var</span>&nbsp;<span class="ident" id="5085278">cnode</span>&nbsp;<span class="op" id="5085284">*</span><span class="ident" id="5085285"><a href="/go/format/format.go.html#5084361">printer</a></span><span class="op" id="5085292">.</span><span class="ident" id="5085293">CommentedNode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085308">switch</span>&nbsp;<span class="ident" id="5085315">n</span>&nbsp;<span class="op" id="5085317">:=</span>&nbsp;<span class="ident" id="5085320"><a href="/go/format/format.go.html#5085164">node</a></span><span class="op" id="5085324">.</span><span class="op" id="5085325">(</span><span class="keyword" id="5085326">type</span><span class="op" id="5085330">)</span>&nbsp;<span class="op" id="5085332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085335">case</span>&nbsp;<span class="op" id="5085340">*</span><span class="ident" id="5085341"><a href="/go/format/format.go.html#5084338">ast</a></span><span class="op" id="5085344">.</span><span class="ident" id="5085345">File</span><span class="op" id="5085349">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5085353"><a href="/go/format/format.go.html#5085258">file</a></span>&nbsp;<span class="op" id="5085358">=</span>&nbsp;<span class="ident" id="5085360"><a href="/go/format/format.go.html#5085315">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085363">case</span>&nbsp;<span class="op" id="5085368">*</span><span class="ident" id="5085369"><a href="/go/format/format.go.html#5084361">printer</a></span><span class="op" id="5085376">.</span><span class="ident" id="5085377">CommentedNode</span><span class="op" id="5085390">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085394">if</span>&nbsp;<span class="ident" id="5085397">f</span><span class="op" id="5085398">,</span>&nbsp;<span class="ident" id="5085400">ok</span>&nbsp;<span class="op" id="5085403">:=</span>&nbsp;<span class="ident" id="5085406"><a href="/go/format/format.go.html#5085315">n</a></span><span class="op" id="5085407">.</span><span class="ident" id="5085408">Node</span><span class="op" id="5085412">.</span><span class="op" id="5085413">(</span><span class="op" id="5085414">*</span><span class="ident" id="5085415"><a href="/go/format/format.go.html#5084338">ast</a></span><span class="op" id="5085418">.</span><span class="ident" id="5085419">File</span><span class="op" id="5085423">)</span><span class="op" id="5085424">;</span>&nbsp;<span class="ident" id="5085426"><a href="/go/format/format.go.html#5085400">ok</a></span>&nbsp;<span class="op" id="5085429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5085434"><a href="/go/format/format.go.html#5085258">file</a></span>&nbsp;<span class="op" id="5085439">=</span>&nbsp;<span class="ident" id="5085441"><a href="/go/format/format.go.html#5085397">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5085446"><a href="/go/format/format.go.html#5085278">cnode</a></span>&nbsp;<span class="op" id="5085452">=</span>&nbsp;<span class="ident" id="5085454"><a href="/go/format/format.go.html#5085315">n</a></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5085458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5085461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5085465">//&nbsp;Sort&nbsp;imports&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085496">if</span>&nbsp;<span class="ident" id="5085499"><a href="/go/format/format.go.html#5085258">file</a></span>&nbsp;<span class="op" id="5085504">!=</span>&nbsp;<span class="ident" id="5085507">nil</span>&nbsp;<span class="op" id="5085511">&amp;&amp;</span>&nbsp;<span class="ident" id="5085514"><a href="/go/format/format.go.html#5087085">hasUnsortedImports</a></span><span class="op" id="5085532">(</span><span class="ident" id="5085533"><a href="/go/format/format.go.html#5085258">file</a></span><span class="op" id="5085537">)</span>&nbsp;<span class="op" id="5085539">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5085543">//&nbsp;Make&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;AST&nbsp;because&nbsp;ast.SortImports&nbsp;is&nbsp;destructive.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5085611">//&nbsp;TODO(gri)&nbsp;Do&nbsp;this&nbsp;more&nbsp;efficiently.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085652">var</span>&nbsp;<span class="ident" id="5085656">buf</span>&nbsp;<span class="ident" id="5085660"><a href="/go/format/format.go.html#5084322">bytes</a></span><span class="op" id="5085665">.</span><span class="ident" id="5085666">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5085675">err</span>&nbsp;<span class="op" id="5085679">:=</span>&nbsp;<span class="ident" id="5085682"><a href="/go/format/format.go.html#5084410">config</a></span><span class="op" id="5085688">.</span><span class="ident" id="5085689">Fprint</span><span class="op" id="5085695">(</span><span class="op" id="5085696">&amp;</span><span class="ident" id="5085697"><a href="/go/format/format.go.html#5085656">buf</a></span><span class="op" id="5085700">,</span>&nbsp;<span class="ident" id="5085702"><a href="/go/format/format.go.html#5085143">fset</a></span><span class="op" id="5085706">,</span>&nbsp;<span class="ident" id="5085708"><a href="/go/format/format.go.html#5085258">file</a></span><span class="op" id="5085712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085716">if</span>&nbsp;<span class="ident" id="5085719"><a href="/go/format/format.go.html#5085675">err</a></span>&nbsp;<span class="op" id="5085723">!=</span>&nbsp;<span class="ident" id="5085726">nil</span>&nbsp;<span class="op" id="5085730">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085735">return</span>&nbsp;<span class="ident" id="5085742"><a href="/go/format/format.go.html#5085675">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5085748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5085752"><a href="/go/format/format.go.html#5085258">file</a></span><span class="op" id="5085756">,</span>&nbsp;<span class="ident" id="5085758"><a href="/go/format/format.go.html#5085675">err</a></span>&nbsp;<span class="op" id="5085762">=</span>&nbsp;<span class="ident" id="5085764"><a href="/go/format/format.go.html#5084348">parser</a></span><span class="op" id="5085770">.</span><span class="ident" id="5085771">ParseFile</span><span class="op" id="5085780">(</span><span class="ident" id="5085781"><a href="/go/format/format.go.html#5085143">fset</a></span><span class="op" id="5085785">,</span>&nbsp;<span class="string" id="5085787">&#34;&#34;</span><span class="op" id="5085789">,</span>&nbsp;<span class="ident" id="5085791"><a href="/go/format/format.go.html#5085656">buf</a></span><span class="op" id="5085794">.</span><span class="ident" id="5085795">Bytes</span><span class="op" id="5085800">(</span><span class="op" id="5085801">)</span><span class="op" id="5085802">,</span>&nbsp;<span class="ident" id="5085804"><a href="/go/format/format.go.html#5084499">parserMode</a></span><span class="op" id="5085814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085818">if</span>&nbsp;<span class="ident" id="5085821"><a href="/go/format/format.go.html#5085675">err</a></span>&nbsp;<span class="op" id="5085825">!=</span>&nbsp;<span class="ident" id="5085828">nil</span>&nbsp;<span class="op" id="5085832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5085837">//&nbsp;We&nbsp;should&nbsp;never&nbsp;get&nbsp;here.&nbsp;If&nbsp;we&nbsp;do,&nbsp;provide&nbsp;good&nbsp;diagnostic.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085904">return</span>&nbsp;<span class="ident" id="5085911"><a href="/go/format/format.go.html#5084331">fmt</a></span><span class="op" id="5085914">.</span><span class="ident" id="5085915">Errorf</span><span class="op" id="5085921">(</span><span class="string" id="5085922">&#34;format.Node&nbsp;internal&nbsp;error&nbsp;(%s)&#34;</span><span class="op" id="5085955">,</span>&nbsp;<span class="ident" id="5085957"><a href="/go/format/format.go.html#5085675">err</a></span><span class="op" id="5085960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5085964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5085968"><a href="/go/format/format.go.html#5084338">ast</a></span><span class="op" id="5085971">.</span><span class="ident" id="5085972">SortImports</span><span class="op" id="5085983">(</span><span class="ident" id="5085984"><a href="/go/format/format.go.html#5085143">fset</a></span><span class="op" id="5085988">,</span>&nbsp;<span class="ident" id="5085990"><a href="/go/format/format.go.html#5085258">file</a></span><span class="op" id="5085994">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5085999">//&nbsp;Use&nbsp;new&nbsp;file&nbsp;with&nbsp;sorted&nbsp;imports.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086038"><a href="/go/format/format.go.html#5085164">node</a></span>&nbsp;<span class="op" id="5086043">=</span>&nbsp;<span class="ident" id="5086045"><a href="/go/format/format.go.html#5085258">file</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086052">if</span>&nbsp;<span class="ident" id="5086055"><a href="/go/format/format.go.html#5085278">cnode</a></span>&nbsp;<span class="op" id="5086061">!=</span>&nbsp;<span class="ident" id="5086064">nil</span>&nbsp;<span class="op" id="5086068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086073"><a href="/go/format/format.go.html#5085164">node</a></span>&nbsp;<span class="op" id="5086078">=</span>&nbsp;<span class="op" id="5086080">&amp;</span><span class="ident" id="5086081"><a href="/go/format/format.go.html#5084361">printer</a></span><span class="op" id="5086088">.</span><span class="ident" id="5086089">CommentedNode</span><span class="op" id="5086102">{</span><span class="ident" id="5086103">Node</span><span class="op" id="5086107">:</span>&nbsp;<span class="ident" id="5086109"><a href="/go/format/format.go.html#5085258">file</a></span><span class="op" id="5086113">,</span>&nbsp;<span class="ident" id="5086115">Comments</span><span class="op" id="5086123">:</span>&nbsp;<span class="ident" id="5086125"><a href="/go/format/format.go.html#5085278">cnode</a></span><span class="op" id="5086130">.</span><span class="ident" id="5086131">Comments</span><span class="op" id="5086139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5086143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5086146">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086150">return</span>&nbsp;<span class="ident" id="5086157"><a href="/go/format/format.go.html#5084410">config</a></span><span class="op" id="5086163">.</span><span class="ident" id="5086164">Fprint</span><span class="op" id="5086170">(</span><span class="ident" id="5086171"><a href="/go/format/format.go.html#5085128">dst</a></span><span class="op" id="5086174">,</span>&nbsp;<span class="ident" id="5086176"><a href="/go/format/format.go.html#5085143">fset</a></span><span class="op" id="5086180">,</span>&nbsp;<span class="ident" id="5086182"><a href="/go/format/format.go.html#5085164">node</a></span><span class="op" id="5086186">)</span><br>
<span class="lineno"></span><span class="op" id="5086188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5086191">//&nbsp;Source&nbsp;formats&nbsp;src&nbsp;in&nbsp;canonical&nbsp;gofmt&nbsp;style&nbsp;and&nbsp;returns&nbsp;the&nbsp;result</span><br>
<span class="lineno">75</span><span class="comment" id="5086261">//&nbsp;or&nbsp;an&nbsp;(I/O&nbsp;or&nbsp;syntax)&nbsp;error.&nbsp;src&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;a&nbsp;syntactically</span><br>
<span class="lineno"></span><span class="comment" id="5086331">//&nbsp;correct&nbsp;Go&nbsp;source&nbsp;file,&nbsp;or&nbsp;a&nbsp;list&nbsp;of&nbsp;Go&nbsp;declarations&nbsp;or&nbsp;statements.</span><br>
<span class="lineno"></span><span class="comment" id="5086402">//</span><br>
<span class="lineno"></span><span class="comment" id="5086405">//&nbsp;If&nbsp;src&nbsp;is&nbsp;a&nbsp;partial&nbsp;source&nbsp;file,&nbsp;the&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space&nbsp;of&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="5086479">//&nbsp;is&nbsp;applied&nbsp;to&nbsp;the&nbsp;result&nbsp;(such&nbsp;that&nbsp;it&nbsp;has&nbsp;the&nbsp;same&nbsp;leading&nbsp;and&nbsp;trailing</span><br>
<span class="lineno">80</span><span class="comment" id="5086555">//&nbsp;space&nbsp;as&nbsp;src),&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;indented&nbsp;by&nbsp;the&nbsp;same&nbsp;amount&nbsp;as&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="5086632">//&nbsp;line&nbsp;of&nbsp;src&nbsp;containing&nbsp;code.&nbsp;Imports&nbsp;are&nbsp;not&nbsp;sorted&nbsp;for&nbsp;partial&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="5086713">//</span><br>
<span class="lineno"></span><span class="keyword" id="5086716">func</span>&nbsp;<span class="ident" id="5086721">Source</span><span class="op" id="5086727">(</span><span class="ident" id="5086728">src</span>&nbsp;<span class="op" id="5086732">[</span><span class="op" id="5086733">]</span><span class="builtintype" id="5086734">byte</span><span class="op" id="5086738">)</span>&nbsp;<span class="op" id="5086740">(</span><span class="op" id="5086741">[</span><span class="op" id="5086742">]</span><span class="builtintype" id="5086743">byte</span><span class="op" id="5086747">,</span>&nbsp;<span class="builtintype" id="5086749">error</span><span class="op" id="5086754">)</span>&nbsp;<span class="op" id="5086756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086759">fset</span>&nbsp;<span class="op" id="5086764">:=</span>&nbsp;<span class="ident" id="5086767"><a href="/go/format/format.go.html#5084375">token</a></span><span class="op" id="5086772">.</span><span class="ident" id="5086773">NewFileSet</span><span class="op" id="5086783">(</span><span class="op" id="5086784">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086787">file</span><span class="op" id="5086791">,</span>&nbsp;<span class="ident" id="5086793">sourceAdj</span><span class="op" id="5086802">,</span>&nbsp;<span class="ident" id="5086804">indentAdj</span><span class="op" id="5086813">,</span>&nbsp;<span class="ident" id="5086815">err</span>&nbsp;<span class="op" id="5086819">:=</span>&nbsp;<span class="ident" id="5086822"><a href="/go/format/format.go.html#5087966">parse</a></span><span class="op" id="5086827">(</span><span class="ident" id="5086828"><a href="/go/format/format.go.html#5086759">fset</a></span><span class="op" id="5086832">,</span>&nbsp;<span class="string" id="5086834">&#34;&#34;</span><span class="op" id="5086836">,</span>&nbsp;<span class="ident" id="5086838"><a href="/go/format/format.go.html#5086728">src</a></span><span class="op" id="5086841">,</span>&nbsp;<span class="builtintype" id="5086843">true</span><span class="op" id="5086847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086850">if</span>&nbsp;<span class="ident" id="5086853"><a href="/go/format/format.go.html#5086815">err</a></span>&nbsp;<span class="op" id="5086857">!=</span>&nbsp;<span class="ident" id="5086860">nil</span>&nbsp;<span class="op" id="5086864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086868">return</span>&nbsp;<span class="ident" id="5086875">nil</span><span class="op" id="5086878">,</span>&nbsp;<span class="ident" id="5086880"><a href="/go/format/format.go.html#5086815">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5086885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086889">if</span>&nbsp;<span class="ident" id="5086892"><a href="/go/format/format.go.html#5086793">sourceAdj</a></span>&nbsp;<span class="op" id="5086902">==</span>&nbsp;<span class="ident" id="5086905">nil</span>&nbsp;<span class="op" id="5086909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5086913">//&nbsp;Complete&nbsp;source&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5086940">//&nbsp;TODO(gri)&nbsp;consider&nbsp;doing&nbsp;this&nbsp;always.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086983"><a href="/go/format/format.go.html#5084338">ast</a></span><span class="op" id="5086986">.</span><span class="ident" id="5086987">SortImports</span><span class="op" id="5086998">(</span><span class="ident" id="5086999"><a href="/go/format/format.go.html#5086759">fset</a></span><span class="op" id="5087003">,</span>&nbsp;<span class="ident" id="5087005"><a href="/go/format/format.go.html#5086787">file</a></span><span class="op" id="5087009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087012">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087016">return</span>&nbsp;<span class="ident" id="5087023"><a href="/go/format/format.go.html#5090454">format</a></span><span class="op" id="5087029">(</span><span class="ident" id="5087030"><a href="/go/format/format.go.html#5086759">fset</a></span><span class="op" id="5087034">,</span>&nbsp;<span class="ident" id="5087036"><a href="/go/format/format.go.html#5086787">file</a></span><span class="op" id="5087040">,</span>&nbsp;<span class="ident" id="5087042"><a href="/go/format/format.go.html#5086793">sourceAdj</a></span><span class="op" id="5087051">,</span>&nbsp;<span class="ident" id="5087053"><a href="/go/format/format.go.html#5086804">indentAdj</a></span><span class="op" id="5087062">,</span>&nbsp;<span class="ident" id="5087064"><a href="/go/format/format.go.html#5086728">src</a></span><span class="op" id="5087067">,</span>&nbsp;<span class="ident" id="5087069"><a href="/go/format/format.go.html#5084410">config</a></span><span class="op" id="5087075">)</span><br>
<span class="lineno"></span><span class="op" id="5087077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5087080">func</span>&nbsp;<span class="ident" id="5087085">hasUnsortedImports</span><span class="op" id="5087103">(</span><span class="ident" id="5087104">file</span>&nbsp;<span class="op" id="5087109">*</span><span class="ident" id="5087110"><a href="/go/format/format.go.html#5084338">ast</a></span><span class="op" id="5087113">.</span><span class="ident" id="5087114">File</span><span class="op" id="5087118">)</span>&nbsp;<span class="builtintype" id="5087120">bool</span>&nbsp;<span class="op" id="5087125">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087128">for</span>&nbsp;<span class="ident" id="5087132">_</span><span class="op" id="5087133">,</span>&nbsp;<span class="ident" id="5087135">d</span>&nbsp;<span class="op" id="5087137">:=</span>&nbsp;<span class="keyword" id="5087140">range</span>&nbsp;<span class="ident" id="5087146"><a href="/go/format/format.go.html#5087104">file</a></span><span class="op" id="5087150">.</span><span class="ident" id="5087151">Decls</span>&nbsp;<span class="op" id="5087157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087161">d</span><span class="op" id="5087162">,</span>&nbsp;<span class="ident" id="5087164">ok</span>&nbsp;<span class="op" id="5087167">:=</span>&nbsp;<span class="ident" id="5087170"><a href="/go/format/format.go.html#5087135">d</a></span><span class="op" id="5087171">.</span><span class="op" id="5087172">(</span><span class="op" id="5087173">*</span><span class="ident" id="5087174"><a href="/go/format/format.go.html#5084338">ast</a></span><span class="op" id="5087177">.</span><span class="ident" id="5087178">GenDecl</span><span class="op" id="5087185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087189">if</span>&nbsp;<span class="op" id="5087192">!</span><span class="ident" id="5087193"><a href="/go/format/format.go.html#5087164">ok</a></span>&nbsp;<span class="op" id="5087196">||</span>&nbsp;<span class="ident" id="5087199"><a href="/go/format/format.go.html#5087161">d</a></span><span class="op" id="5087200">.</span><span class="ident" id="5087201">Tok</span>&nbsp;<span class="op" id="5087205">!=</span>&nbsp;<span class="ident" id="5087208"><a href="/go/format/format.go.html#5084375">token</a></span><span class="op" id="5087213">.</span><span class="ident" id="5087214">IMPORT</span>&nbsp;<span class="op" id="5087221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5087226">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5087274">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087306">return</span>&nbsp;<span class="builtintype" id="5087313">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087325">if</span>&nbsp;<span class="ident" id="5087328"><a href="/go/format/format.go.html#5087161">d</a></span><span class="op" id="5087329">.</span><span class="ident" id="5087330">Lparen</span><span class="op" id="5087336">.</span><span class="ident" id="5087337">IsValid</span><span class="op" id="5087344">(</span><span class="op" id="5087345">)</span>&nbsp;<span class="op" id="5087347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5087352">//&nbsp;For&nbsp;now&nbsp;assume&nbsp;all&nbsp;grouped&nbsp;imports&nbsp;are&nbsp;unsorted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5087407">//&nbsp;TODO(gri)&nbsp;Should&nbsp;check&nbsp;if&nbsp;they&nbsp;are&nbsp;sorted&nbsp;already.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087464">return</span>&nbsp;<span class="builtintype" id="5087471">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5087482">//&nbsp;Ungrouped&nbsp;imports&nbsp;are&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087530">return</span>&nbsp;<span class="builtintype" id="5087537">false</span><br>
<span class="lineno">115</span><span class="op" id="5087543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5087546">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5087626">//&nbsp;Support&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="5087647">//</span><br>
<span class="lineno">120</span><span class="comment" id="5087650">//&nbsp;The&nbsp;functions&nbsp;parse,&nbsp;format,&nbsp;and&nbsp;isSpace&nbsp;below&nbsp;are&nbsp;identical&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5087721">//&nbsp;respective&nbsp;functions&nbsp;in&nbsp;cmd/gofmt/gofmt.go&nbsp;-&nbsp;keep&nbsp;them&nbsp;in&nbsp;sync!</span><br>
<span class="lineno"></span><span class="comment" id="5087788">//</span><br>
<span class="lineno"></span><span class="comment" id="5087791">//&nbsp;TODO(gri)&nbsp;Factor&nbsp;out&nbsp;this&nbsp;functionality,&nbsp;eventually.</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="5087848">//&nbsp;parse&nbsp;parses&nbsp;src,&nbsp;which&nbsp;was&nbsp;read&nbsp;from&nbsp;the&nbsp;named&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="5087905">//&nbsp;as&nbsp;a&nbsp;Go&nbsp;source&nbsp;file,&nbsp;declaration,&nbsp;or&nbsp;statement&nbsp;list.</span><br>
<span class="lineno"></span><span class="keyword" id="5087961">func</span>&nbsp;<span class="ident" id="5087966">parse</span><span class="op" id="5087971">(</span><span class="ident" id="5087972">fset</span>&nbsp;<span class="op" id="5087977">*</span><span class="ident" id="5087978"><a href="/go/format/format.go.html#5084375">token</a></span><span class="op" id="5087983">.</span><span class="ident" id="5087984">FileSet</span><span class="op" id="5087991">,</span>&nbsp;<span class="ident" id="5087993">filename</span>&nbsp;<span class="builtintype" id="5088002">string</span><span class="op" id="5088008">,</span>&nbsp;<span class="ident" id="5088010">src</span>&nbsp;<span class="op" id="5088014">[</span><span class="op" id="5088015">]</span><span class="builtintype" id="5088016">byte</span><span class="op" id="5088020">,</span>&nbsp;<span class="ident" id="5088022">fragmentOk</span>&nbsp;<span class="builtintype" id="5088033">bool</span><span class="op" id="5088037">)</span>&nbsp;<span class="op" id="5088039">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088042">file</span>&nbsp;<span class="op" id="5088047">*</span><span class="ident" id="5088048"><a href="/go/format/format.go.html#5084338">ast</a></span><span class="op" id="5088051">.</span><span class="ident" id="5088052">File</span><span class="op" id="5088056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088059">sourceAdj</span>&nbsp;<span class="keyword" id="5088069">func</span><span class="op" id="5088073">(</span><span class="ident" id="5088074">src</span>&nbsp;<span class="op" id="5088078">[</span><span class="op" id="5088079">]</span><span class="builtintype" id="5088080">byte</span><span class="op" id="5088084">,</span>&nbsp;<span class="ident" id="5088086">indent</span>&nbsp;<span class="builtintype" id="5088093">int</span><span class="op" id="5088096">)</span>&nbsp;<span class="op" id="5088098">[</span><span class="op" id="5088099">]</span><span class="builtintype" id="5088100">byte</span><span class="op" id="5088104">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088107">indentAdj</span>&nbsp;<span class="builtintype" id="5088117">int</span><span class="op" id="5088120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088123">err</span>&nbsp;<span class="builtintype" id="5088127">error</span><span class="op" id="5088132">,</span><br>
<span class="lineno"></span><span class="op" id="5088134">)</span>&nbsp;<span class="op" id="5088136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088139">//&nbsp;Try&nbsp;as&nbsp;whole&nbsp;source&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088169"><a href="/go/format/format.go.html#5088042">file</a></span><span class="op" id="5088173">,</span>&nbsp;<span class="ident" id="5088175"><a href="/go/format/format.go.html#5088123">err</a></span>&nbsp;<span class="op" id="5088179">=</span>&nbsp;<span class="ident" id="5088181"><a href="/go/format/format.go.html#5084348">parser</a></span><span class="op" id="5088187">.</span><span class="ident" id="5088188">ParseFile</span><span class="op" id="5088197">(</span><span class="ident" id="5088198"><a href="/go/format/format.go.html#5087972">fset</a></span><span class="op" id="5088202">,</span>&nbsp;<span class="ident" id="5088204"><a href="/go/format/format.go.html#5087993">filename</a></span><span class="op" id="5088212">,</span>&nbsp;<span class="ident" id="5088214"><a href="/go/format/format.go.html#5088010">src</a></span><span class="op" id="5088217">,</span>&nbsp;<span class="ident" id="5088219"><a href="/go/format/format.go.html#5084499">parserMode</a></span><span class="op" id="5088229">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088232">//&nbsp;If&nbsp;there&#39;s&nbsp;no&nbsp;error,&nbsp;return.&nbsp;&nbsp;If&nbsp;the&nbsp;error&nbsp;is&nbsp;that&nbsp;the&nbsp;source&nbsp;file&nbsp;didn&#39;t&nbsp;begin&nbsp;with&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088323">//&nbsp;package&nbsp;line&nbsp;and&nbsp;source&nbsp;fragments&nbsp;are&nbsp;ok,&nbsp;fall&nbsp;through&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088385">//&nbsp;try&nbsp;as&nbsp;a&nbsp;source&nbsp;fragment.&nbsp;&nbsp;Stop&nbsp;and&nbsp;return&nbsp;on&nbsp;any&nbsp;other&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088452">if</span>&nbsp;<span class="ident" id="5088455"><a href="/go/format/format.go.html#5088123">err</a></span>&nbsp;<span class="op" id="5088459">==</span>&nbsp;<span class="ident" id="5088462">nil</span>&nbsp;<span class="op" id="5088466">||</span>&nbsp;<span class="op" id="5088469">!</span><span class="ident" id="5088470"><a href="/go/format/format.go.html#5088022">fragmentOk</a></span>&nbsp;<span class="op" id="5088481">||</span>&nbsp;<span class="op" id="5088484">!</span><span class="ident" id="5088485"><a href="/go/format/format.go.html#5084393">strings</a></span><span class="op" id="5088492">.</span><span class="ident" id="5088493">Contains</span><span class="op" id="5088501">(</span><span class="ident" id="5088502"><a href="/go/format/format.go.html#5088123">err</a></span><span class="op" id="5088505">.</span><span class="ident" id="5088506">Error</span><span class="op" id="5088511">(</span><span class="op" id="5088512">)</span><span class="op" id="5088513">,</span>&nbsp;<span class="string" id="5088515">&#34;expected&nbsp;&#39;package&#39;&#34;</span><span class="op" id="5088535">)</span>&nbsp;<span class="op" id="5088537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088541">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5088549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088553">//&nbsp;If&nbsp;this&nbsp;is&nbsp;a&nbsp;declaration&nbsp;list,&nbsp;make&nbsp;it&nbsp;a&nbsp;source&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088610">//&nbsp;by&nbsp;inserting&nbsp;a&nbsp;package&nbsp;clause.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088645">//&nbsp;Insert&nbsp;using&nbsp;a&nbsp;;,&nbsp;not&nbsp;a&nbsp;newline,&nbsp;so&nbsp;that&nbsp;the&nbsp;line&nbsp;numbers</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088707">//&nbsp;in&nbsp;psrc&nbsp;match&nbsp;the&nbsp;ones&nbsp;in&nbsp;src.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088742">psrc</span>&nbsp;<span class="op" id="5088747">:=</span>&nbsp;<span class="builtinfunc" id="5088750">append</span><span class="op" id="5088756">(</span><span class="op" id="5088757">[</span><span class="op" id="5088758">]</span><span class="builtintype" id="5088759">byte</span><span class="op" id="5088763">(</span><span class="string" id="5088764">&#34;package&nbsp;p;&#34;</span><span class="op" id="5088776">)</span><span class="op" id="5088777">,</span>&nbsp;<span class="ident" id="5088779"><a href="/go/format/format.go.html#5088010">src</a></span><span class="op" id="5088782">...</span><span class="op" id="5088785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088788"><a href="/go/format/format.go.html#5088042">file</a></span><span class="op" id="5088792">,</span>&nbsp;<span class="ident" id="5088794"><a href="/go/format/format.go.html#5088123">err</a></span>&nbsp;<span class="op" id="5088798">=</span>&nbsp;<span class="ident" id="5088800"><a href="/go/format/format.go.html#5084348">parser</a></span><span class="op" id="5088806">.</span><span class="ident" id="5088807">ParseFile</span><span class="op" id="5088816">(</span><span class="ident" id="5088817"><a href="/go/format/format.go.html#5087972">fset</a></span><span class="op" id="5088821">,</span>&nbsp;<span class="ident" id="5088823"><a href="/go/format/format.go.html#5087993">filename</a></span><span class="op" id="5088831">,</span>&nbsp;<span class="ident" id="5088833"><a href="/go/format/format.go.html#5088742">psrc</a></span><span class="op" id="5088837">,</span>&nbsp;<span class="ident" id="5088839"><a href="/go/format/format.go.html#5084499">parserMode</a></span><span class="op" id="5088849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088852">if</span>&nbsp;<span class="ident" id="5088855"><a href="/go/format/format.go.html#5088123">err</a></span>&nbsp;<span class="op" id="5088859">==</span>&nbsp;<span class="ident" id="5088862">nil</span>&nbsp;<span class="op" id="5088866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088870"><a href="/go/format/format.go.html#5088059">sourceAdj</a></span>&nbsp;<span class="op" id="5088880">=</span>&nbsp;<span class="keyword" id="5088882">func</span><span class="op" id="5088886">(</span><span class="ident" id="5088887">src</span>&nbsp;<span class="op" id="5088891">[</span><span class="op" id="5088892">]</span><span class="builtintype" id="5088893">byte</span><span class="op" id="5088897">,</span>&nbsp;<span class="ident" id="5088899">indent</span>&nbsp;<span class="builtintype" id="5088906">int</span><span class="op" id="5088909">)</span>&nbsp;<span class="op" id="5088911">[</span><span class="op" id="5088912">]</span><span class="builtintype" id="5088913">byte</span>&nbsp;<span class="op" id="5088918">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088923">//&nbsp;Remove&nbsp;the&nbsp;package&nbsp;clause.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088956">//&nbsp;Gofmt&nbsp;has&nbsp;turned&nbsp;the&nbsp;;&nbsp;into&nbsp;a&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088996"><a href="/go/format/format.go.html#5088887">src</a></span>&nbsp;<span class="op" id="5089000">=</span>&nbsp;<span class="ident" id="5089002"><a href="/go/format/format.go.html#5088887">src</a></span><span class="op" id="5089005">[</span><span class="ident" id="5089006"><a href="/go/format/format.go.html#5088899">indent</a></span><span class="op" id="5089012">+</span><span class="builtinfunc" id="5089013">len</span><span class="op" id="5089016">(</span><span class="string" id="5089017">&#34;package&nbsp;p\n&#34;</span><span class="op" id="5089030">)</span><span class="op" id="5089031">:</span><span class="op" id="5089032">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089037">return</span>&nbsp;<span class="ident" id="5089044"><a href="/go/format/format.go.html#5084322">bytes</a></span><span class="op" id="5089049">.</span><span class="ident" id="5089050">TrimSpace</span><span class="op" id="5089059">(</span><span class="ident" id="5089060"><a href="/go/format/format.go.html#5088887">src</a></span><span class="op" id="5089063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089067">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089071">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089082">//&nbsp;If&nbsp;the&nbsp;error&nbsp;is&nbsp;that&nbsp;the&nbsp;source&nbsp;file&nbsp;didn&#39;t&nbsp;begin&nbsp;with&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089143">//&nbsp;declaration,&nbsp;fall&nbsp;through&nbsp;to&nbsp;try&nbsp;as&nbsp;a&nbsp;statement&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089201">//&nbsp;Stop&nbsp;and&nbsp;return&nbsp;on&nbsp;any&nbsp;other&nbsp;error.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089241">if</span>&nbsp;<span class="op" id="5089244">!</span><span class="ident" id="5089245"><a href="/go/format/format.go.html#5084393">strings</a></span><span class="op" id="5089252">.</span><span class="ident" id="5089253">Contains</span><span class="op" id="5089261">(</span><span class="ident" id="5089262"><a href="/go/format/format.go.html#5088123">err</a></span><span class="op" id="5089265">.</span><span class="ident" id="5089266">Error</span><span class="op" id="5089271">(</span><span class="op" id="5089272">)</span><span class="op" id="5089273">,</span>&nbsp;<span class="string" id="5089275">&#34;expected&nbsp;declaration&#34;</span><span class="op" id="5089297">)</span>&nbsp;<span class="op" id="5089299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089303">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089315">//&nbsp;If&nbsp;this&nbsp;is&nbsp;a&nbsp;statement&nbsp;list,&nbsp;make&nbsp;it&nbsp;a&nbsp;source&nbsp;file</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089370">//&nbsp;by&nbsp;inserting&nbsp;a&nbsp;package&nbsp;clause&nbsp;and&nbsp;turning&nbsp;the&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089425">//&nbsp;into&nbsp;a&nbsp;function&nbsp;body.&nbsp;&nbsp;This&nbsp;handles&nbsp;expressions&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089482">//&nbsp;Insert&nbsp;using&nbsp;a&nbsp;;,&nbsp;not&nbsp;a&nbsp;newline,&nbsp;so&nbsp;that&nbsp;the&nbsp;line&nbsp;numbers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089544">//&nbsp;in&nbsp;fsrc&nbsp;match&nbsp;the&nbsp;ones&nbsp;in&nbsp;src.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089579">fsrc</span>&nbsp;<span class="op" id="5089584">:=</span>&nbsp;<span class="builtinfunc" id="5089587">append</span><span class="op" id="5089593">(</span><span class="builtinfunc" id="5089594">append</span><span class="op" id="5089600">(</span><span class="op" id="5089601">[</span><span class="op" id="5089602">]</span><span class="builtintype" id="5089603">byte</span><span class="op" id="5089607">(</span><span class="string" id="5089608">&#34;package&nbsp;p;&nbsp;func&nbsp;_()&nbsp;{&#34;</span><span class="op" id="5089631">)</span><span class="op" id="5089632">,</span>&nbsp;<span class="ident" id="5089634"><a href="/go/format/format.go.html#5088010">src</a></span><span class="op" id="5089637">...</span><span class="op" id="5089640">)</span><span class="op" id="5089641">,</span>&nbsp;<span class="string" id="5089643">&#39;\n&#39;</span><span class="op" id="5089647">,</span>&nbsp;<span class="string" id="5089649">&#39;}&#39;</span><span class="op" id="5089652">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089655"><a href="/go/format/format.go.html#5088042">file</a></span><span class="op" id="5089659">,</span>&nbsp;<span class="ident" id="5089661"><a href="/go/format/format.go.html#5088123">err</a></span>&nbsp;<span class="op" id="5089665">=</span>&nbsp;<span class="ident" id="5089667"><a href="/go/format/format.go.html#5084348">parser</a></span><span class="op" id="5089673">.</span><span class="ident" id="5089674">ParseFile</span><span class="op" id="5089683">(</span><span class="ident" id="5089684"><a href="/go/format/format.go.html#5087972">fset</a></span><span class="op" id="5089688">,</span>&nbsp;<span class="ident" id="5089690"><a href="/go/format/format.go.html#5087993">filename</a></span><span class="op" id="5089698">,</span>&nbsp;<span class="ident" id="5089700"><a href="/go/format/format.go.html#5089579">fsrc</a></span><span class="op" id="5089704">,</span>&nbsp;<span class="ident" id="5089706"><a href="/go/format/format.go.html#5084499">parserMode</a></span><span class="op" id="5089716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089719">if</span>&nbsp;<span class="ident" id="5089722"><a href="/go/format/format.go.html#5088123">err</a></span>&nbsp;<span class="op" id="5089726">==</span>&nbsp;<span class="ident" id="5089729">nil</span>&nbsp;<span class="op" id="5089733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089737"><a href="/go/format/format.go.html#5088059">sourceAdj</a></span>&nbsp;<span class="op" id="5089747">=</span>&nbsp;<span class="keyword" id="5089749">func</span><span class="op" id="5089753">(</span><span class="ident" id="5089754">src</span>&nbsp;<span class="op" id="5089758">[</span><span class="op" id="5089759">]</span><span class="builtintype" id="5089760">byte</span><span class="op" id="5089764">,</span>&nbsp;<span class="ident" id="5089766">indent</span>&nbsp;<span class="builtintype" id="5089773">int</span><span class="op" id="5089776">)</span>&nbsp;<span class="op" id="5089778">[</span><span class="op" id="5089779">]</span><span class="builtintype" id="5089780">byte</span>&nbsp;<span class="op" id="5089785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089790">//&nbsp;Cap&nbsp;adjusted&nbsp;indent&nbsp;to&nbsp;zero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089825">if</span>&nbsp;<span class="ident" id="5089828"><a href="/go/format/format.go.html#5089766">indent</a></span>&nbsp;<span class="op" id="5089835">&lt;</span>&nbsp;<span class="num" id="5089837">0</span>&nbsp;<span class="op" id="5089839">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089845"><a href="/go/format/format.go.html#5089766">indent</a></span>&nbsp;<span class="op" id="5089852">=</span>&nbsp;<span class="num" id="5089854">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089864">//&nbsp;Remove&nbsp;the&nbsp;wrapping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089891">//&nbsp;Gofmt&nbsp;has&nbsp;turned&nbsp;the&nbsp;;&nbsp;into&nbsp;a&nbsp;\n\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089933">//&nbsp;There&nbsp;will&nbsp;be&nbsp;two&nbsp;non-blank&nbsp;lines&nbsp;with&nbsp;indent,&nbsp;hence&nbsp;2*indent.</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5090002"><a href="/go/format/format.go.html#5089754">src</a></span>&nbsp;<span class="op" id="5090006">=</span>&nbsp;<span class="ident" id="5090008"><a href="/go/format/format.go.html#5089754">src</a></span><span class="op" id="5090011">[</span><span class="num" id="5090012">2</span><span class="op" id="5090013">*</span><span class="ident" id="5090014"><a href="/go/format/format.go.html#5089766">indent</a></span><span class="op" id="5090020">+</span><span class="builtinfunc" id="5090021">len</span><span class="op" id="5090024">(</span><span class="string" id="5090025">&#34;package&nbsp;p\n\nfunc&nbsp;_()&nbsp;{&#34;</span><span class="op" id="5090050">)</span><span class="op" id="5090051">:</span><span class="op" id="5090052">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5090057"><a href="/go/format/format.go.html#5089754">src</a></span>&nbsp;<span class="op" id="5090061">=</span>&nbsp;<span class="ident" id="5090063"><a href="/go/format/format.go.html#5089754">src</a></span><span class="op" id="5090066">[</span><span class="op" id="5090067">:</span><span class="builtinfunc" id="5090068">len</span><span class="op" id="5090071">(</span><span class="ident" id="5090072"><a href="/go/format/format.go.html#5089754">src</a></span><span class="op" id="5090075">)</span><span class="op" id="5090076">-</span><span class="op" id="5090077">(</span><span class="ident" id="5090078"><a href="/go/format/format.go.html#5089766">indent</a></span><span class="op" id="5090084">+</span><span class="builtinfunc" id="5090085">len</span><span class="op" id="5090088">(</span><span class="string" id="5090089">&#34;\n}\n&#34;</span><span class="op" id="5090096">)</span><span class="op" id="5090097">)</span><span class="op" id="5090098">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5090103">return</span>&nbsp;<span class="ident" id="5090110"><a href="/go/format/format.go.html#5084322">bytes</a></span><span class="op" id="5090115">.</span><span class="ident" id="5090116">TrimSpace</span><span class="op" id="5090125">(</span><span class="ident" id="5090126"><a href="/go/format/format.go.html#5089754">src</a></span><span class="op" id="5090129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5090133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5090137">//&nbsp;Gofmt&nbsp;has&nbsp;also&nbsp;indented&nbsp;the&nbsp;function&nbsp;body&nbsp;one&nbsp;level.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5090195">//&nbsp;Adjust&nbsp;that&nbsp;with&nbsp;indentAdj.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5090228"><a href="/go/format/format.go.html#5088107">indentAdj</a></span>&nbsp;<span class="op" id="5090238">=</span>&nbsp;<span class="op" id="5090240">-</span><span class="num" id="5090241">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5090244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5090248">//&nbsp;Succeeded,&nbsp;or&nbsp;out&nbsp;of&nbsp;options.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5090282">return</span><br>
<span class="lineno"></span><span class="op" id="5090289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5090292">//&nbsp;format&nbsp;formats&nbsp;the&nbsp;given&nbsp;package&nbsp;file&nbsp;originally&nbsp;obtained&nbsp;from&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="5090362">//&nbsp;and&nbsp;adjusts&nbsp;the&nbsp;result&nbsp;based&nbsp;on&nbsp;the&nbsp;original&nbsp;source&nbsp;via&nbsp;sourceAdj</span><br>
<span class="lineno">195</span><span class="comment" id="5090431">//&nbsp;and&nbsp;indentAdj.</span><br>
<span class="lineno"></span><span class="keyword" id="5090449">func</span>&nbsp;<span class="ident" id="5090454">format</span><span class="op" id="5090460">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5090463">fset</span>&nbsp;<span class="op" id="5090468">*</span><span class="ident" id="5090469"><a href="/go/format/format.go.html#5084375">token</a></span><span class="op" id="5090474">.</span><span class="ident" id="5090475">FileSet</span><span class="op" id="5090482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5090485">file</span>&nbsp;<span class="op" id="5090490">*</span><span class="ident" id="5090491"><a href="/go/format/format.go.html#5084338">ast</a></span><span class="op" id="5090494">.</span><span class="ident" id="5090495">File</span><span class="op" id="5090499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5090502">sourceAdj</span>&nbsp;<span class="keyword" id="5090512">func</span><span class="op" id="5090516">(</span><span class="ident" id="5090517">src</span>&nbsp;<span class="op" id="5090521">[</span><span class="op" id="5090522">]</span><span class="builtintype" id="5090523">byte</span><span class="op" id="5090527">,</span>&nbsp;<span class="ident" id="5090529">indent</span>&nbsp;<span class="builtintype" id="5090536">int</span><span class="op" id="5090539">)</span>&nbsp;<span class="op" id="5090541">[</span><span class="op" id="5090542">]</span><span class="builtintype" id="5090543">byte</span><span class="op" id="5090547">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5090550">indentAdj</span>&nbsp;<span class="builtintype" id="5090560">int</span><span class="op" id="5090563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5090566">src</span>&nbsp;<span class="op" id="5090570">[</span><span class="op" id="5090571">]</span><span class="builtintype" id="5090572">byte</span><span class="op" id="5090576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5090579">cfg</span>&nbsp;<span class="ident" id="5090583"><a href="/go/format/format.go.html#5084361">printer</a></span><span class="op" id="5090590">.</span><span class="ident" id="5090591">Config</span><span class="op" id="5090597">,</span><br>
<span class="lineno"></span><span class="op" id="5090599">)</span>&nbsp;<span class="op" id="5090601">(</span><span class="op" id="5090602">[</span><span class="op" id="5090603">]</span><span class="builtintype" id="5090604">byte</span><span class="op" id="5090608">,</span>&nbsp;<span class="builtintype" id="5090610">error</span><span class="op" id="5090615">)</span>&nbsp;<span class="op" id="5090617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5090620">if</span>&nbsp;<span class="ident" id="5090623"><a href="/go/format/format.go.html#5090502">sourceAdj</a></span>&nbsp;<span class="op" id="5090633">==</span>&nbsp;<span class="ident" id="5090636">nil</span>&nbsp;<span class="op" id="5090640">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5090644">//&nbsp;Complete&nbsp;source&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5090671">var</span>&nbsp;<span class="ident" id="5090675">buf</span>&nbsp;<span class="ident" id="5090679"><a href="/go/format/format.go.html#5084322">bytes</a></span><span class="op" id="5090684">.</span><span class="ident" id="5090685">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5090694">err</span>&nbsp;<span class="op" id="5090698">:=</span>&nbsp;<span class="ident" id="5090701"><a href="/go/format/format.go.html#5090579">cfg</a></span><span class="op" id="5090704">.</span><span class="ident" id="5090705">Fprint</span><span class="op" id="5090711">(</span><span class="op" id="5090712">&amp;</span><span class="ident" id="5090713"><a href="/go/format/format.go.html#5090675">buf</a></span><span class="op" id="5090716">,</span>&nbsp;<span class="ident" id="5090718"><a href="/go/format/format.go.html#5090463">fset</a></span><span class="op" id="5090722">,</span>&nbsp;<span class="ident" id="5090724"><a href="/go/format/format.go.html#5090485">file</a></span><span class="op" id="5090728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5090732">if</span>&nbsp;<span class="ident" id="5090735"><a href="/go/format/format.go.html#5090694">err</a></span>&nbsp;<span class="op" id="5090739">!=</span>&nbsp;<span class="ident" id="5090742">nil</span>&nbsp;<span class="op" id="5090746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5090751">return</span>&nbsp;<span class="ident" id="5090758">nil</span><span class="op" id="5090761">,</span>&nbsp;<span class="ident" id="5090763"><a href="/go/format/format.go.html#5090694">err</a></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5090769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5090773">return</span>&nbsp;<span class="ident" id="5090780"><a href="/go/format/format.go.html#5090675">buf</a></span><span class="op" id="5090783">.</span><span class="ident" id="5090784">Bytes</span><span class="op" id="5090789">(</span><span class="op" id="5090790">)</span><span class="op" id="5090791">,</span>&nbsp;<span class="ident" id="5090793">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5090798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5090802">//&nbsp;Partial&nbsp;source&nbsp;file.</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5090827">//&nbsp;Determine&nbsp;and&nbsp;prepend&nbsp;leading&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5090868">i</span><span class="op" id="5090869">,</span>&nbsp;<span class="ident" id="5090871">j</span>&nbsp;<span class="op" id="5090873">:=</span>&nbsp;<span class="num" id="5090876">0</span><span class="op" id="5090877">,</span>&nbsp;<span class="num" id="5090879">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5090882">for</span>&nbsp;<span class="ident" id="5090886"><a href="/go/format/format.go.html#5090871">j</a></span>&nbsp;<span class="op" id="5090888">&lt;</span>&nbsp;<span class="builtinfunc" id="5090890">len</span><span class="op" id="5090893">(</span><span class="ident" id="5090894"><a href="/go/format/format.go.html#5090566">src</a></span><span class="op" id="5090897">)</span>&nbsp;<span class="op" id="5090899">&amp;&amp;</span>&nbsp;<span class="ident" id="5090902"><a href="/go/format/format.go.html#5091864">isSpace</a></span><span class="op" id="5090909">(</span><span class="ident" id="5090910"><a href="/go/format/format.go.html#5090566">src</a></span><span class="op" id="5090913">[</span><span class="ident" id="5090914"><a href="/go/format/format.go.html#5090871">j</a></span><span class="op" id="5090915">]</span><span class="op" id="5090916">)</span>&nbsp;<span class="op" id="5090918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5090922">if</span>&nbsp;<span class="ident" id="5090925"><a href="/go/format/format.go.html#5090566">src</a></span><span class="op" id="5090928">[</span><span class="ident" id="5090929"><a href="/go/format/format.go.html#5090871">j</a></span><span class="op" id="5090930">]</span>&nbsp;<span class="op" id="5090932">==</span>&nbsp;<span class="string" id="5090935">&#39;\n&#39;</span>&nbsp;<span class="op" id="5090940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5090945"><a href="/go/format/format.go.html#5090868">i</a></span>&nbsp;<span class="op" id="5090947">=</span>&nbsp;<span class="ident" id="5090949"><a href="/go/format/format.go.html#5090871">j</a></span>&nbsp;<span class="op" id="5090951">+</span>&nbsp;<span class="num" id="5090953">1</span>&nbsp;<span class="comment" id="5090955">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;last&nbsp;line&nbsp;in&nbsp;leading&nbsp;space</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5091002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091006"><a href="/go/format/format.go.html#5090871">j</a></span><span class="op" id="5091007">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5091011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091014">var</span>&nbsp;<span class="ident" id="5091018">res</span>&nbsp;<span class="op" id="5091022">[</span><span class="op" id="5091023">]</span><span class="builtintype" id="5091024">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091030"><a href="/go/format/format.go.html#5091018">res</a></span>&nbsp;<span class="op" id="5091034">=</span>&nbsp;<span class="builtinfunc" id="5091036">append</span><span class="op" id="5091042">(</span><span class="ident" id="5091043"><a href="/go/format/format.go.html#5091018">res</a></span><span class="op" id="5091046">,</span>&nbsp;<span class="ident" id="5091048"><a href="/go/format/format.go.html#5090566">src</a></span><span class="op" id="5091051">[</span><span class="op" id="5091052">:</span><span class="ident" id="5091053"><a href="/go/format/format.go.html#5090868">i</a></span><span class="op" id="5091054">]</span><span class="op" id="5091055">...</span><span class="op" id="5091058">)</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5091062">//&nbsp;Determine&nbsp;and&nbsp;prepend&nbsp;indentation&nbsp;of&nbsp;first&nbsp;code&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5091120">//&nbsp;Spaces&nbsp;are&nbsp;ignored&nbsp;unless&nbsp;there&nbsp;are&nbsp;no&nbsp;tabs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5091169">//&nbsp;in&nbsp;which&nbsp;case&nbsp;spaces&nbsp;count&nbsp;as&nbsp;one&nbsp;tab.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091212">indent</span>&nbsp;<span class="op" id="5091219">:=</span>&nbsp;<span class="num" id="5091222">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091225">hasSpace</span>&nbsp;<span class="op" id="5091234">:=</span>&nbsp;<span class="builtintype" id="5091237">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091244">for</span>&nbsp;<span class="ident" id="5091248">_</span><span class="op" id="5091249">,</span>&nbsp;<span class="ident" id="5091251">b</span>&nbsp;<span class="op" id="5091253">:=</span>&nbsp;<span class="keyword" id="5091256">range</span>&nbsp;<span class="ident" id="5091262"><a href="/go/format/format.go.html#5090566">src</a></span><span class="op" id="5091265">[</span><span class="ident" id="5091266"><a href="/go/format/format.go.html#5090868">i</a></span><span class="op" id="5091267">:</span><span class="ident" id="5091268"><a href="/go/format/format.go.html#5090871">j</a></span><span class="op" id="5091269">]</span>&nbsp;<span class="op" id="5091271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091275">switch</span>&nbsp;<span class="ident" id="5091282"><a href="/go/format/format.go.html#5091251">b</a></span>&nbsp;<span class="op" id="5091284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091288">case</span>&nbsp;<span class="string" id="5091293">&#39;&nbsp;&#39;</span><span class="op" id="5091296">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091301"><a href="/go/format/format.go.html#5091225">hasSpace</a></span>&nbsp;<span class="op" id="5091310">=</span>&nbsp;<span class="builtintype" id="5091312">true</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091319">case</span>&nbsp;<span class="string" id="5091324">&#39;\t&#39;</span><span class="op" id="5091328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091333"><a href="/go/format/format.go.html#5091212">indent</a></span><span class="op" id="5091339">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5091344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5091347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091350">if</span>&nbsp;<span class="ident" id="5091353"><a href="/go/format/format.go.html#5091212">indent</a></span>&nbsp;<span class="op" id="5091360">==</span>&nbsp;<span class="num" id="5091363">0</span>&nbsp;<span class="op" id="5091365">&amp;&amp;</span>&nbsp;<span class="ident" id="5091368"><a href="/go/format/format.go.html#5091225">hasSpace</a></span>&nbsp;<span class="op" id="5091377">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091381"><a href="/go/format/format.go.html#5091212">indent</a></span>&nbsp;<span class="op" id="5091388">=</span>&nbsp;<span class="num" id="5091390">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5091393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091396">for</span>&nbsp;<span class="ident" id="5091400">i</span>&nbsp;<span class="op" id="5091402">:=</span>&nbsp;<span class="num" id="5091405">0</span><span class="op" id="5091406">;</span>&nbsp;<span class="ident" id="5091408"><a href="/go/format/format.go.html#5091400">i</a></span>&nbsp;<span class="op" id="5091410">&lt;</span>&nbsp;<span class="ident" id="5091412"><a href="/go/format/format.go.html#5091212">indent</a></span><span class="op" id="5091418">;</span>&nbsp;<span class="ident" id="5091420"><a href="/go/format/format.go.html#5091400">i</a></span><span class="op" id="5091421">++</span>&nbsp;<span class="op" id="5091424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091428"><a href="/go/format/format.go.html#5091018">res</a></span>&nbsp;<span class="op" id="5091432">=</span>&nbsp;<span class="builtinfunc" id="5091434">append</span><span class="op" id="5091440">(</span><span class="ident" id="5091441"><a href="/go/format/format.go.html#5091018">res</a></span><span class="op" id="5091444">,</span>&nbsp;<span class="string" id="5091446">&#39;\t&#39;</span><span class="op" id="5091450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5091453">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5091457">//&nbsp;Format&nbsp;the&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5091480">//&nbsp;Write&nbsp;it&nbsp;without&nbsp;any&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091533"><a href="/go/format/format.go.html#5090579">cfg</a></span><span class="op" id="5091536">.</span><span class="ident" id="5091537">Indent</span>&nbsp;<span class="op" id="5091544">=</span>&nbsp;<span class="ident" id="5091546"><a href="/go/format/format.go.html#5091212">indent</a></span>&nbsp;<span class="op" id="5091553">+</span>&nbsp;<span class="ident" id="5091555"><a href="/go/format/format.go.html#5090550">indentAdj</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091566">var</span>&nbsp;<span class="ident" id="5091570">buf</span>&nbsp;<span class="ident" id="5091574"><a href="/go/format/format.go.html#5084322">bytes</a></span><span class="op" id="5091579">.</span><span class="ident" id="5091580">Buffer</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091588">err</span>&nbsp;<span class="op" id="5091592">:=</span>&nbsp;<span class="ident" id="5091595"><a href="/go/format/format.go.html#5090579">cfg</a></span><span class="op" id="5091598">.</span><span class="ident" id="5091599">Fprint</span><span class="op" id="5091605">(</span><span class="op" id="5091606">&amp;</span><span class="ident" id="5091607"><a href="/go/format/format.go.html#5091570">buf</a></span><span class="op" id="5091610">,</span>&nbsp;<span class="ident" id="5091612"><a href="/go/format/format.go.html#5090463">fset</a></span><span class="op" id="5091616">,</span>&nbsp;<span class="ident" id="5091618"><a href="/go/format/format.go.html#5090485">file</a></span><span class="op" id="5091622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091625">if</span>&nbsp;<span class="ident" id="5091628"><a href="/go/format/format.go.html#5091588">err</a></span>&nbsp;<span class="op" id="5091632">!=</span>&nbsp;<span class="ident" id="5091635">nil</span>&nbsp;<span class="op" id="5091639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091643">return</span>&nbsp;<span class="ident" id="5091650">nil</span><span class="op" id="5091653">,</span>&nbsp;<span class="ident" id="5091655"><a href="/go/format/format.go.html#5091588">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5091660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091663"><a href="/go/format/format.go.html#5091018">res</a></span>&nbsp;<span class="op" id="5091667">=</span>&nbsp;<span class="builtinfunc" id="5091669">append</span><span class="op" id="5091675">(</span><span class="ident" id="5091676"><a href="/go/format/format.go.html#5091018">res</a></span><span class="op" id="5091679">,</span>&nbsp;<span class="ident" id="5091681"><a href="/go/format/format.go.html#5090502">sourceAdj</a></span><span class="op" id="5091690">(</span><span class="ident" id="5091691"><a href="/go/format/format.go.html#5091570">buf</a></span><span class="op" id="5091694">.</span><span class="ident" id="5091695">Bytes</span><span class="op" id="5091700">(</span><span class="op" id="5091701">)</span><span class="op" id="5091702">,</span>&nbsp;<span class="ident" id="5091704"><a href="/go/format/format.go.html#5090579">cfg</a></span><span class="op" id="5091707">.</span><span class="ident" id="5091708">Indent</span><span class="op" id="5091714">)</span><span class="op" id="5091715">...</span><span class="op" id="5091718">)</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5091722">//&nbsp;Determine&nbsp;and&nbsp;append&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091763"><a href="/go/format/format.go.html#5090868">i</a></span>&nbsp;<span class="op" id="5091765">=</span>&nbsp;<span class="builtinfunc" id="5091767">len</span><span class="op" id="5091770">(</span><span class="ident" id="5091771"><a href="/go/format/format.go.html#5090566">src</a></span><span class="op" id="5091774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091777">for</span>&nbsp;<span class="ident" id="5091781"><a href="/go/format/format.go.html#5090868">i</a></span>&nbsp;<span class="op" id="5091783">&gt;</span>&nbsp;<span class="num" id="5091785">0</span>&nbsp;<span class="op" id="5091787">&amp;&amp;</span>&nbsp;<span class="ident" id="5091790"><a href="/go/format/format.go.html#5091864">isSpace</a></span><span class="op" id="5091797">(</span><span class="ident" id="5091798"><a href="/go/format/format.go.html#5090566">src</a></span><span class="op" id="5091801">[</span><span class="ident" id="5091802"><a href="/go/format/format.go.html#5090868">i</a></span><span class="op" id="5091803">-</span><span class="num" id="5091804">1</span><span class="op" id="5091805">]</span><span class="op" id="5091806">)</span>&nbsp;<span class="op" id="5091808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5091812"><a href="/go/format/format.go.html#5090868">i</a></span><span class="op" id="5091813">--</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5091817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091820">return</span>&nbsp;<span class="builtinfunc" id="5091827">append</span><span class="op" id="5091833">(</span><span class="ident" id="5091834"><a href="/go/format/format.go.html#5091018">res</a></span><span class="op" id="5091837">,</span>&nbsp;<span class="ident" id="5091839"><a href="/go/format/format.go.html#5090566">src</a></span><span class="op" id="5091842">[</span><span class="ident" id="5091843"><a href="/go/format/format.go.html#5090868">i</a></span><span class="op" id="5091844">:</span><span class="op" id="5091845">]</span><span class="op" id="5091846">...</span><span class="op" id="5091849">)</span><span class="op" id="5091850">,</span>&nbsp;<span class="ident" id="5091852">nil</span><br>
<span class="lineno"></span><span class="op" id="5091856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5091859">func</span>&nbsp;<span class="ident" id="5091864">isSpace</span><span class="op" id="5091871">(</span><span class="ident" id="5091872">b</span>&nbsp;<span class="builtintype" id="5091874">byte</span><span class="op" id="5091878">)</span>&nbsp;<span class="builtintype" id="5091880">bool</span>&nbsp;<span class="op" id="5091885">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5091888">return</span>&nbsp;<span class="ident" id="5091895"><a href="/go/format/format.go.html#5091872">b</a></span>&nbsp;<span class="op" id="5091897">==</span>&nbsp;<span class="string" id="5091900">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5091904">||</span>&nbsp;<span class="ident" id="5091907"><a href="/go/format/format.go.html#5091872">b</a></span>&nbsp;<span class="op" id="5091909">==</span>&nbsp;<span class="string" id="5091912">&#39;\t&#39;</span>&nbsp;<span class="op" id="5091917">||</span>&nbsp;<span class="ident" id="5091920"><a href="/go/format/format.go.html#5091872">b</a></span>&nbsp;<span class="op" id="5091922">==</span>&nbsp;<span class="string" id="5091925">&#39;\n&#39;</span>&nbsp;<span class="op" id="5091930">||</span>&nbsp;<span class="ident" id="5091933"><a href="/go/format/format.go.html#5091872">b</a></span>&nbsp;<span class="op" id="5091935">==</span>&nbsp;<span class="string" id="5091938">&#39;\r&#39;</span><br>
<span class="lineno"></span><span class="op" id="5091943">}</span>
</div>
</body>
</html>
