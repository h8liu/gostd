<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5219501">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5219556">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5219610">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5219661">//&nbsp;Package&nbsp;parser&nbsp;implements&nbsp;a&nbsp;parser&nbsp;for&nbsp;Go&nbsp;source&nbsp;files.&nbsp;Input&nbsp;may&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="5219733">//&nbsp;provided&nbsp;in&nbsp;a&nbsp;variety&nbsp;of&nbsp;forms&nbsp;(see&nbsp;the&nbsp;various&nbsp;Parse*&nbsp;functions);&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5219807">//&nbsp;output&nbsp;is&nbsp;an&nbsp;abstract&nbsp;syntax&nbsp;tree&nbsp;(AST)&nbsp;representing&nbsp;the&nbsp;Go&nbsp;source.&nbsp;The</span><br>
<span class="lineno"></span><span class="comment" id="5219882">//&nbsp;parser&nbsp;is&nbsp;invoked&nbsp;through&nbsp;one&nbsp;of&nbsp;the&nbsp;Parse*&nbsp;functions.</span><br>
<span class="lineno"></span><span class="comment" id="5219940">//</span><br>
<span class="lineno">10</span><span class="keyword" id="5219943">package</span>&nbsp;<span class="ident" id="5219951">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5219959">import</span>&nbsp;<span class="op" id="5219966">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5219969">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5219976">&#34;go/ast&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5219986">&#34;go/scanner&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5220000">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5220012">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5220023">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5220034">&#34;unicode&#34;</span><br>
<span class="lineno">20</span><span class="op" id="5220044">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5220047">//&nbsp;The&nbsp;parser&nbsp;structure&nbsp;holds&nbsp;the&nbsp;parser&#39;s&nbsp;internal&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="5220106">type</span>&nbsp;<span class="ident" id="5220111">parser</span>&nbsp;<span class="keyword" id="5220118">struct</span>&nbsp;<span class="op" id="5220125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220128">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5220136">*</span><span class="ident" id="5220137"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5220142">.</span><span class="ident" id="5220143">File</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220149">errors</span>&nbsp;&nbsp;<span class="ident" id="5220157"><a href="/go/parser/parser.go.html#5219986">scanner</a></span><span class="op" id="5220164">.</span><span class="ident" id="5220165">ErrorList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220176">scanner</span>&nbsp;<span class="ident" id="5220184"><a href="/go/parser/parser.go.html#5219986">scanner</a></span><span class="op" id="5220191">.</span><span class="ident" id="5220192">Scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5220202">//&nbsp;Tracing/debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220224">mode</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5220231"><a href="/go/parser/interface.go.html#5214764">Mode</a></span>&nbsp;<span class="comment" id="5220236">//&nbsp;parsing&nbsp;mode</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220253">trace</span>&nbsp;&nbsp;<span class="builtintype" id="5220260">bool</span>&nbsp;<span class="comment" id="5220265">//&nbsp;==&nbsp;(mode&nbsp;&amp;&nbsp;Trace&nbsp;!=&nbsp;0)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220292">indent</span>&nbsp;<span class="builtintype" id="5220299">int</span>&nbsp;&nbsp;<span class="comment" id="5220304">//&nbsp;indentation&nbsp;used&nbsp;for&nbsp;tracing&nbsp;output</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5220345">//&nbsp;Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220358">comments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5220370">[</span><span class="op" id="5220371">]</span><span class="op" id="5220372">*</span><span class="ident" id="5220373"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5220376">.</span><span class="ident" id="5220377">CommentGroup</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220391">leadComment</span>&nbsp;<span class="op" id="5220403">*</span><span class="ident" id="5220404"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5220407">.</span><span class="ident" id="5220408">CommentGroup</span>&nbsp;<span class="comment" id="5220421">//&nbsp;last&nbsp;lead&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220443">lineComment</span>&nbsp;<span class="op" id="5220455">*</span><span class="ident" id="5220456"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5220459">.</span><span class="ident" id="5220460">CommentGroup</span>&nbsp;<span class="comment" id="5220473">//&nbsp;last&nbsp;line&nbsp;comment</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5220496">//&nbsp;Next&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220511">pos</span>&nbsp;<span class="ident" id="5220515"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5220520">.</span><span class="ident" id="5220521">Pos</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5220527">//&nbsp;token&nbsp;position</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220546">tok</span>&nbsp;<span class="ident" id="5220550"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5220555">.</span><span class="ident" id="5220556">Token</span>&nbsp;<span class="comment" id="5220562">//&nbsp;one&nbsp;token&nbsp;look-ahead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220587">lit</span>&nbsp;<span class="builtintype" id="5220591">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5220603">//&nbsp;token&nbsp;literal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5220622">//&nbsp;Error&nbsp;recovery</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5220641">//&nbsp;(used&nbsp;to&nbsp;limit&nbsp;the&nbsp;number&nbsp;of&nbsp;calls&nbsp;to&nbsp;syncXXX&nbsp;functions</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5220701">//&nbsp;w/o&nbsp;making&nbsp;scanning&nbsp;progress&nbsp;-&nbsp;avoids&nbsp;potential&nbsp;endless</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5220761">//&nbsp;loops&nbsp;across&nbsp;multiple&nbsp;parser&nbsp;functions&nbsp;during&nbsp;error&nbsp;recovery)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220827">syncPos</span>&nbsp;<span class="ident" id="5220835"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5220840">.</span><span class="ident" id="5220841">Pos</span>&nbsp;<span class="comment" id="5220845">//&nbsp;last&nbsp;synchronization&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220879">syncCnt</span>&nbsp;<span class="builtintype" id="5220887">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5220897">//&nbsp;number&nbsp;of&nbsp;calls&nbsp;to&nbsp;syncXXX&nbsp;without&nbsp;progress</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5220946">//&nbsp;Non-syntactic&nbsp;parser&nbsp;control</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5220979">exprLev</span>&nbsp;<span class="builtintype" id="5220987">int</span>&nbsp;&nbsp;<span class="comment" id="5220992">//&nbsp;&lt;&nbsp;0:&nbsp;in&nbsp;control&nbsp;clause,&nbsp;&gt;=&nbsp;0:&nbsp;in&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221040">inRhs</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5221048">bool</span>&nbsp;<span class="comment" id="5221053">//&nbsp;if&nbsp;set,&nbsp;the&nbsp;parser&nbsp;is&nbsp;parsing&nbsp;a&nbsp;rhs&nbsp;expression</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5221105">//&nbsp;Ordinary&nbsp;identifier&nbsp;scopes</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221136">pkgScope</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5221147">*</span><span class="ident" id="5221148"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5221151">.</span><span class="ident" id="5221152">Scope</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5221165">//&nbsp;pkgScope.Outer&nbsp;==&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221191">topScope</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5221202">*</span><span class="ident" id="5221203"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5221206">.</span><span class="ident" id="5221207">Scope</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5221220">//&nbsp;top-most&nbsp;scope;&nbsp;may&nbsp;be&nbsp;pkgScope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221256">unresolved</span>&nbsp;<span class="op" id="5221267">[</span><span class="op" id="5221268">]</span><span class="op" id="5221269">*</span><span class="ident" id="5221270"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5221273">.</span><span class="ident" id="5221274">Ident</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5221285">//&nbsp;unresolved&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221312">imports</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5221323">[</span><span class="op" id="5221324">]</span><span class="op" id="5221325">*</span><span class="ident" id="5221326"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5221329">.</span><span class="ident" id="5221330">ImportSpec</span>&nbsp;<span class="comment" id="5221341">//&nbsp;list&nbsp;of&nbsp;imports</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5221362">//&nbsp;Label&nbsp;scopes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5221379">//&nbsp;(maintained&nbsp;by&nbsp;open/close&nbsp;LabelScope)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221421">labelScope</span>&nbsp;&nbsp;<span class="op" id="5221433">*</span><span class="ident" id="5221434"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5221437">.</span><span class="ident" id="5221438">Scope</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5221448">//&nbsp;label&nbsp;scope&nbsp;for&nbsp;current&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221485">targetStack</span>&nbsp;<span class="op" id="5221497">[</span><span class="op" id="5221498">]</span><span class="op" id="5221499">[</span><span class="op" id="5221500">]</span><span class="op" id="5221501">*</span><span class="ident" id="5221502"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5221505">.</span><span class="ident" id="5221506">Ident</span>&nbsp;<span class="comment" id="5221512">//&nbsp;stack&nbsp;of&nbsp;unresolved&nbsp;labels</span><br>
<span class="lineno"></span><span class="op" id="5221542">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="5221545">func</span>&nbsp;<span class="op" id="5221550">(</span><span class="ident" id="5221551">p</span>&nbsp;<span class="op" id="5221553">*</span><span class="ident" id="5221554"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5221560">)</span>&nbsp;<span class="ident" id="5221562">init</span><span class="op" id="5221566">(</span><span class="ident" id="5221567">fset</span>&nbsp;<span class="op" id="5221572">*</span><span class="ident" id="5221573"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5221578">.</span><span class="ident" id="5221579">FileSet</span><span class="op" id="5221586">,</span>&nbsp;<span class="ident" id="5221588">filename</span>&nbsp;<span class="builtintype" id="5221597">string</span><span class="op" id="5221603">,</span>&nbsp;<span class="ident" id="5221605">src</span>&nbsp;<span class="op" id="5221609">[</span><span class="op" id="5221610">]</span><span class="builtintype" id="5221611">byte</span><span class="op" id="5221615">,</span>&nbsp;<span class="ident" id="5221617">mode</span>&nbsp;<span class="ident" id="5221622"><a href="/go/parser/interface.go.html#5214764">Mode</a></span><span class="op" id="5221626">)</span>&nbsp;<span class="op" id="5221628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221631"><a href="/go/parser/parser.go.html#5221551">p</a></span><span class="op" id="5221632">.</span><span class="ident" id="5221633">file</span>&nbsp;<span class="op" id="5221638">=</span>&nbsp;<span class="ident" id="5221640"><a href="/go/parser/parser.go.html#5221567">fset</a></span><span class="op" id="5221644">.</span><span class="ident" id="5221645">AddFile</span><span class="op" id="5221652">(</span><span class="ident" id="5221653"><a href="/go/parser/parser.go.html#5221588">filename</a></span><span class="op" id="5221661">,</span>&nbsp;<span class="op" id="5221663">-</span><span class="num" id="5221664">1</span><span class="op" id="5221665">,</span>&nbsp;<span class="builtinfunc" id="5221667">len</span><span class="op" id="5221670">(</span><span class="ident" id="5221671"><a href="/go/parser/parser.go.html#5221605">src</a></span><span class="op" id="5221674">)</span><span class="op" id="5221675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5221678">var</span>&nbsp;<span class="ident" id="5221682">m</span>&nbsp;<span class="ident" id="5221684"><a href="/go/parser/parser.go.html#5219986">scanner</a></span><span class="op" id="5221691">.</span><span class="ident" id="5221692">Mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5221698">if</span>&nbsp;<span class="ident" id="5221701"><a href="/go/parser/parser.go.html#5221617">mode</a></span><span class="op" id="5221705">&amp;</span><span class="ident" id="5221706"><a href="/go/parser/interface.go.html#5214959">ParseComments</a></span>&nbsp;<span class="op" id="5221720">!=</span>&nbsp;<span class="num" id="5221723">0</span>&nbsp;<span class="op" id="5221725">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221729"><a href="/go/parser/parser.go.html#5221682">m</a></span>&nbsp;<span class="op" id="5221731">=</span>&nbsp;<span class="ident" id="5221733"><a href="/go/parser/parser.go.html#5219986">scanner</a></span><span class="op" id="5221740">.</span><span class="ident" id="5221741">ScanComments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5221755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221758">eh</span>&nbsp;<span class="op" id="5221761">:=</span>&nbsp;<span class="keyword" id="5221764">func</span><span class="op" id="5221768">(</span><span class="ident" id="5221769">pos</span>&nbsp;<span class="ident" id="5221773"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5221778">.</span><span class="ident" id="5221779">Position</span><span class="op" id="5221787">,</span>&nbsp;<span class="ident" id="5221789">msg</span>&nbsp;<span class="builtintype" id="5221793">string</span><span class="op" id="5221799">)</span>&nbsp;<span class="op" id="5221801">{</span>&nbsp;<span class="ident" id="5221803"><a href="/go/parser/parser.go.html#5221551">p</a></span><span class="op" id="5221804">.</span><span class="ident" id="5221805">errors</span><span class="op" id="5221811">.</span><span class="ident" id="5221812">Add</span><span class="op" id="5221815">(</span><span class="ident" id="5221816"><a href="/go/parser/parser.go.html#5221769">pos</a></span><span class="op" id="5221819">,</span>&nbsp;<span class="ident" id="5221821"><a href="/go/parser/parser.go.html#5221789">msg</a></span><span class="op" id="5221824">)</span>&nbsp;<span class="op" id="5221826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221829"><a href="/go/parser/parser.go.html#5221551">p</a></span><span class="op" id="5221830">.</span><span class="ident" id="5221831">scanner</span><span class="op" id="5221838">.</span><span class="ident" id="5221839">Init</span><span class="op" id="5221843">(</span><span class="ident" id="5221844"><a href="/go/parser/parser.go.html#5221551">p</a></span><span class="op" id="5221845">.</span><span class="ident" id="5221846">file</span><span class="op" id="5221850">,</span>&nbsp;<span class="ident" id="5221852"><a href="/go/parser/parser.go.html#5221605">src</a></span><span class="op" id="5221855">,</span>&nbsp;<span class="ident" id="5221857"><a href="/go/parser/parser.go.html#5221758">eh</a></span><span class="op" id="5221859">,</span>&nbsp;<span class="ident" id="5221861"><a href="/go/parser/parser.go.html#5221682">m</a></span><span class="op" id="5221862">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221866"><a href="/go/parser/parser.go.html#5221551">p</a></span><span class="op" id="5221867">.</span><span class="ident" id="5221868">mode</span>&nbsp;<span class="op" id="5221873">=</span>&nbsp;<span class="ident" id="5221875"><a href="/go/parser/parser.go.html#5221617">mode</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221881"><a href="/go/parser/parser.go.html#5221551">p</a></span><span class="op" id="5221882">.</span><span class="ident" id="5221883">trace</span>&nbsp;<span class="op" id="5221889">=</span>&nbsp;<span class="ident" id="5221891"><a href="/go/parser/parser.go.html#5221617">mode</a></span><span class="op" id="5221895">&amp;</span><span class="ident" id="5221896"><a href="/go/parser/interface.go.html#5215045">Trace</a></span>&nbsp;<span class="op" id="5221902">!=</span>&nbsp;<span class="num" id="5221905">0</span>&nbsp;<span class="comment" id="5221907">//&nbsp;for&nbsp;convenience&nbsp;(p.trace&nbsp;is&nbsp;used&nbsp;frequently)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5221957"><a href="/go/parser/parser.go.html#5221551">p</a></span><span class="op" id="5221958">.</span><span class="ident" id="5221959">next</span><span class="op" id="5221963">(</span><span class="op" id="5221964">)</span><br>
<span class="lineno"></span><span class="op" id="5221966">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="5221969">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5222049">//&nbsp;Scoping&nbsp;support</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5222069">func</span>&nbsp;<span class="op" id="5222074">(</span><span class="ident" id="5222075">p</span>&nbsp;<span class="op" id="5222077">*</span><span class="ident" id="5222078"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5222084">)</span>&nbsp;<span class="ident" id="5222086">openScope</span><span class="op" id="5222095">(</span><span class="op" id="5222096">)</span>&nbsp;<span class="op" id="5222098">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5222101"><a href="/go/parser/parser.go.html#5222075">p</a></span><span class="op" id="5222102">.</span><span class="ident" id="5222103">topScope</span>&nbsp;<span class="op" id="5222112">=</span>&nbsp;<span class="ident" id="5222114"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5222117">.</span><span class="ident" id="5222118">NewScope</span><span class="op" id="5222126">(</span><span class="ident" id="5222127"><a href="/go/parser/parser.go.html#5222075">p</a></span><span class="op" id="5222128">.</span><span class="ident" id="5222129">topScope</span><span class="op" id="5222137">)</span><br>
<span class="lineno"></span><span class="op" id="5222139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5222142">func</span>&nbsp;<span class="op" id="5222147">(</span><span class="ident" id="5222148">p</span>&nbsp;<span class="op" id="5222150">*</span><span class="ident" id="5222151"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5222157">)</span>&nbsp;<span class="ident" id="5222159">closeScope</span><span class="op" id="5222169">(</span><span class="op" id="5222170">)</span>&nbsp;<span class="op" id="5222172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5222175"><a href="/go/parser/parser.go.html#5222148">p</a></span><span class="op" id="5222176">.</span><span class="ident" id="5222177">topScope</span>&nbsp;<span class="op" id="5222186">=</span>&nbsp;<span class="ident" id="5222188"><a href="/go/parser/parser.go.html#5222148">p</a></span><span class="op" id="5222189">.</span><span class="ident" id="5222190">topScope</span><span class="op" id="5222198">.</span><span class="ident" id="5222199">Outer</span><br>
<span class="lineno">90</span><span class="op" id="5222205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5222208">func</span>&nbsp;<span class="op" id="5222213">(</span><span class="ident" id="5222214">p</span>&nbsp;<span class="op" id="5222216">*</span><span class="ident" id="5222217"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5222223">)</span>&nbsp;<span class="ident" id="5222225">openLabelScope</span><span class="op" id="5222239">(</span><span class="op" id="5222240">)</span>&nbsp;<span class="op" id="5222242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5222245"><a href="/go/parser/parser.go.html#5222214">p</a></span><span class="op" id="5222246">.</span><span class="ident" id="5222247">labelScope</span>&nbsp;<span class="op" id="5222258">=</span>&nbsp;<span class="ident" id="5222260"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5222263">.</span><span class="ident" id="5222264">NewScope</span><span class="op" id="5222272">(</span><span class="ident" id="5222273"><a href="/go/parser/parser.go.html#5222214">p</a></span><span class="op" id="5222274">.</span><span class="ident" id="5222275">labelScope</span><span class="op" id="5222285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5222288"><a href="/go/parser/parser.go.html#5222214">p</a></span><span class="op" id="5222289">.</span><span class="ident" id="5222290">targetStack</span>&nbsp;<span class="op" id="5222302">=</span>&nbsp;<span class="builtinfunc" id="5222304">append</span><span class="op" id="5222310">(</span><span class="ident" id="5222311"><a href="/go/parser/parser.go.html#5222214">p</a></span><span class="op" id="5222312">.</span><span class="ident" id="5222313">targetStack</span><span class="op" id="5222324">,</span>&nbsp;<span class="ident" id="5222326">nil</span><span class="op" id="5222329">)</span><br>
<span class="lineno">95</span><span class="op" id="5222331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5222334">func</span>&nbsp;<span class="op" id="5222339">(</span><span class="ident" id="5222340">p</span>&nbsp;<span class="op" id="5222342">*</span><span class="ident" id="5222343"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5222349">)</span>&nbsp;<span class="ident" id="5222351">closeLabelScope</span><span class="op" id="5222366">(</span><span class="op" id="5222367">)</span>&nbsp;<span class="op" id="5222369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5222372">//&nbsp;resolve&nbsp;labels</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5222391">n</span>&nbsp;<span class="op" id="5222393">:=</span>&nbsp;<span class="builtinfunc" id="5222396">len</span><span class="op" id="5222399">(</span><span class="ident" id="5222400"><a href="/go/parser/parser.go.html#5222340">p</a></span><span class="op" id="5222401">.</span><span class="ident" id="5222402">targetStack</span><span class="op" id="5222413">)</span>&nbsp;<span class="op" id="5222415">-</span>&nbsp;<span class="num" id="5222417">1</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5222420">scope</span>&nbsp;<span class="op" id="5222426">:=</span>&nbsp;<span class="ident" id="5222429"><a href="/go/parser/parser.go.html#5222340">p</a></span><span class="op" id="5222430">.</span><span class="ident" id="5222431">labelScope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5222443">for</span>&nbsp;<span class="ident" id="5222447">_</span><span class="op" id="5222448">,</span>&nbsp;<span class="ident" id="5222450">ident</span>&nbsp;<span class="op" id="5222456">:=</span>&nbsp;<span class="keyword" id="5222459">range</span>&nbsp;<span class="ident" id="5222465"><a href="/go/parser/parser.go.html#5222340">p</a></span><span class="op" id="5222466">.</span><span class="ident" id="5222467">targetStack</span><span class="op" id="5222478">[</span><span class="ident" id="5222479"><a href="/go/parser/parser.go.html#5222391">n</a></span><span class="op" id="5222480">]</span>&nbsp;<span class="op" id="5222482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5222486"><a href="/go/parser/parser.go.html#5222450">ident</a></span><span class="op" id="5222491">.</span><span class="ident" id="5222492">Obj</span>&nbsp;<span class="op" id="5222496">=</span>&nbsp;<span class="ident" id="5222498"><a href="/go/parser/parser.go.html#5222420">scope</a></span><span class="op" id="5222503">.</span><span class="ident" id="5222504">Lookup</span><span class="op" id="5222510">(</span><span class="ident" id="5222511"><a href="/go/parser/parser.go.html#5222450">ident</a></span><span class="op" id="5222516">.</span><span class="ident" id="5222517">Name</span><span class="op" id="5222521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5222525">if</span>&nbsp;<span class="ident" id="5222528"><a href="/go/parser/parser.go.html#5222450">ident</a></span><span class="op" id="5222533">.</span><span class="ident" id="5222534">Obj</span>&nbsp;<span class="op" id="5222538">==</span>&nbsp;<span class="ident" id="5222541">nil</span>&nbsp;<span class="op" id="5222545">&amp;&amp;</span>&nbsp;<span class="ident" id="5222548"><a href="/go/parser/parser.go.html#5222340">p</a></span><span class="op" id="5222549">.</span><span class="ident" id="5222550">mode</span><span class="op" id="5222554">&amp;</span><span class="ident" id="5222555"><a href="/go/parser/interface.go.html#5215132">DeclarationErrors</a></span>&nbsp;<span class="op" id="5222573">!=</span>&nbsp;<span class="num" id="5222576">0</span>&nbsp;<span class="op" id="5222578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5222583"><a href="/go/parser/parser.go.html#5222340">p</a></span><span class="op" id="5222584">.</span><span class="builtintype" id="5222585">error</span><span class="op" id="5222590">(</span><span class="ident" id="5222591"><a href="/go/parser/parser.go.html#5222450">ident</a></span><span class="op" id="5222596">.</span><span class="ident" id="5222597">Pos</span><span class="op" id="5222600">(</span><span class="op" id="5222601">)</span><span class="op" id="5222602">,</span>&nbsp;<span class="ident" id="5222604"><a href="/go/parser/parser.go.html#5219969">fmt</a></span><span class="op" id="5222607">.</span><span class="ident" id="5222608">Sprintf</span><span class="op" id="5222615">(</span><span class="string" id="5222616">&#34;label&nbsp;%s&nbsp;undefined&#34;</span><span class="op" id="5222636">,</span>&nbsp;<span class="ident" id="5222638"><a href="/go/parser/parser.go.html#5222450">ident</a></span><span class="op" id="5222643">.</span><span class="ident" id="5222644">Name</span><span class="op" id="5222648">)</span><span class="op" id="5222649">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5222653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5222656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5222659">//&nbsp;pop&nbsp;label&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5222679"><a href="/go/parser/parser.go.html#5222340">p</a></span><span class="op" id="5222680">.</span><span class="ident" id="5222681">targetStack</span>&nbsp;<span class="op" id="5222693">=</span>&nbsp;<span class="ident" id="5222695"><a href="/go/parser/parser.go.html#5222340">p</a></span><span class="op" id="5222696">.</span><span class="ident" id="5222697">targetStack</span><span class="op" id="5222708">[</span><span class="num" id="5222709">0</span><span class="op" id="5222710">:</span><span class="ident" id="5222711"><a href="/go/parser/parser.go.html#5222391">n</a></span><span class="op" id="5222712">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5222715"><a href="/go/parser/parser.go.html#5222340">p</a></span><span class="op" id="5222716">.</span><span class="ident" id="5222717">labelScope</span>&nbsp;<span class="op" id="5222728">=</span>&nbsp;<span class="ident" id="5222730"><a href="/go/parser/parser.go.html#5222340">p</a></span><span class="op" id="5222731">.</span><span class="ident" id="5222732">labelScope</span><span class="op" id="5222742">.</span><span class="ident" id="5222743">Outer</span><br>
<span class="lineno">110</span><span class="op" id="5222749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5222752">func</span>&nbsp;<span class="op" id="5222757">(</span><span class="ident" id="5222758">p</span>&nbsp;<span class="op" id="5222760">*</span><span class="ident" id="5222761"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5222767">)</span>&nbsp;<span class="ident" id="5222769">declare</span><span class="op" id="5222776">(</span><span class="ident" id="5222777">decl</span><span class="op" id="5222781">,</span>&nbsp;<span class="ident" id="5222783">data</span>&nbsp;<span class="keyword" id="5222788">interface</span><span class="op" id="5222797">{</span><span class="op" id="5222798">}</span><span class="op" id="5222799">,</span>&nbsp;<span class="ident" id="5222801">scope</span>&nbsp;<span class="op" id="5222807">*</span><span class="ident" id="5222808"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5222811">.</span><span class="ident" id="5222812">Scope</span><span class="op" id="5222817">,</span>&nbsp;<span class="ident" id="5222819">kind</span>&nbsp;<span class="ident" id="5222824"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5222827">.</span><span class="ident" id="5222828">ObjKind</span><span class="op" id="5222835">,</span>&nbsp;<span class="ident" id="5222837">idents</span>&nbsp;<span class="op" id="5222844">...</span><span class="op" id="5222847">*</span><span class="ident" id="5222848"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5222851">.</span><span class="ident" id="5222852">Ident</span><span class="op" id="5222857">)</span>&nbsp;<span class="op" id="5222859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5222862">for</span>&nbsp;<span class="ident" id="5222866">_</span><span class="op" id="5222867">,</span>&nbsp;<span class="ident" id="5222869">ident</span>&nbsp;<span class="op" id="5222875">:=</span>&nbsp;<span class="keyword" id="5222878">range</span>&nbsp;<span class="ident" id="5222884"><a href="/go/parser/parser.go.html#5222837">idents</a></span>&nbsp;<span class="op" id="5222891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5222895"><a href="/go/parser/parser.go.html#5231787">assert</a></span><span class="op" id="5222901">(</span><span class="ident" id="5222902"><a href="/go/parser/parser.go.html#5222869">ident</a></span><span class="op" id="5222907">.</span><span class="ident" id="5222908">Obj</span>&nbsp;<span class="op" id="5222912">==</span>&nbsp;<span class="ident" id="5222915">nil</span><span class="op" id="5222918">,</span>&nbsp;<span class="string" id="5222920">&#34;identifier&nbsp;already&nbsp;declared&nbsp;or&nbsp;resolved&#34;</span><span class="op" id="5222961">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5222965">obj</span>&nbsp;<span class="op" id="5222969">:=</span>&nbsp;<span class="ident" id="5222972"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5222975">.</span><span class="ident" id="5222976">NewObj</span><span class="op" id="5222982">(</span><span class="ident" id="5222983"><a href="/go/parser/parser.go.html#5222819">kind</a></span><span class="op" id="5222987">,</span>&nbsp;<span class="ident" id="5222989"><a href="/go/parser/parser.go.html#5222869">ident</a></span><span class="op" id="5222994">.</span><span class="ident" id="5222995">Name</span><span class="op" id="5222999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5223003">//&nbsp;remember&nbsp;the&nbsp;corresponding&nbsp;declaration&nbsp;for&nbsp;redeclaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5223065">//&nbsp;errors&nbsp;and&nbsp;global&nbsp;variable&nbsp;resolution/typechecking&nbsp;phase</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5223127"><a href="/go/parser/parser.go.html#5222965">obj</a></span><span class="op" id="5223130">.</span><span class="ident" id="5223131">Decl</span>&nbsp;<span class="op" id="5223136">=</span>&nbsp;<span class="ident" id="5223138"><a href="/go/parser/parser.go.html#5222777">decl</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5223145"><a href="/go/parser/parser.go.html#5222965">obj</a></span><span class="op" id="5223148">.</span><span class="ident" id="5223149">Data</span>&nbsp;<span class="op" id="5223154">=</span>&nbsp;<span class="ident" id="5223156"><a href="/go/parser/parser.go.html#5222783">data</a></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5223163"><a href="/go/parser/parser.go.html#5222869">ident</a></span><span class="op" id="5223168">.</span><span class="ident" id="5223169">Obj</span>&nbsp;<span class="op" id="5223173">=</span>&nbsp;<span class="ident" id="5223175"><a href="/go/parser/parser.go.html#5222965">obj</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223181">if</span>&nbsp;<span class="ident" id="5223184"><a href="/go/parser/parser.go.html#5222869">ident</a></span><span class="op" id="5223189">.</span><span class="ident" id="5223190">Name</span>&nbsp;<span class="op" id="5223195">!=</span>&nbsp;<span class="string" id="5223198">&#34;_&#34;</span>&nbsp;<span class="op" id="5223202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223207">if</span>&nbsp;<span class="ident" id="5223210">alt</span>&nbsp;<span class="op" id="5223214">:=</span>&nbsp;<span class="ident" id="5223217"><a href="/go/parser/parser.go.html#5222801">scope</a></span><span class="op" id="5223222">.</span><span class="ident" id="5223223">Insert</span><span class="op" id="5223229">(</span><span class="ident" id="5223230"><a href="/go/parser/parser.go.html#5222965">obj</a></span><span class="op" id="5223233">)</span><span class="op" id="5223234">;</span>&nbsp;<span class="ident" id="5223236"><a href="/go/parser/parser.go.html#5223210">alt</a></span>&nbsp;<span class="op" id="5223240">!=</span>&nbsp;<span class="ident" id="5223243">nil</span>&nbsp;<span class="op" id="5223247">&amp;&amp;</span>&nbsp;<span class="ident" id="5223250"><a href="/go/parser/parser.go.html#5222758">p</a></span><span class="op" id="5223251">.</span><span class="ident" id="5223252">mode</span><span class="op" id="5223256">&amp;</span><span class="ident" id="5223257"><a href="/go/parser/interface.go.html#5215132">DeclarationErrors</a></span>&nbsp;<span class="op" id="5223275">!=</span>&nbsp;<span class="num" id="5223278">0</span>&nbsp;<span class="op" id="5223280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5223286">prevDecl</span>&nbsp;<span class="op" id="5223295">:=</span>&nbsp;<span class="string" id="5223298">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223305">if</span>&nbsp;<span class="ident" id="5223308">pos</span>&nbsp;<span class="op" id="5223312">:=</span>&nbsp;<span class="ident" id="5223315"><a href="/go/parser/parser.go.html#5223210">alt</a></span><span class="op" id="5223318">.</span><span class="ident" id="5223319">Pos</span><span class="op" id="5223322">(</span><span class="op" id="5223323">)</span><span class="op" id="5223324">;</span>&nbsp;<span class="ident" id="5223326"><a href="/go/parser/parser.go.html#5223308">pos</a></span><span class="op" id="5223329">.</span><span class="ident" id="5223330">IsValid</span><span class="op" id="5223337">(</span><span class="op" id="5223338">)</span>&nbsp;<span class="op" id="5223340">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5223347"><a href="/go/parser/parser.go.html#5223286">prevDecl</a></span>&nbsp;<span class="op" id="5223356">=</span>&nbsp;<span class="ident" id="5223358"><a href="/go/parser/parser.go.html#5219969">fmt</a></span><span class="op" id="5223361">.</span><span class="ident" id="5223362">Sprintf</span><span class="op" id="5223369">(</span><span class="string" id="5223370">&#34;\n\tprevious&nbsp;declaration&nbsp;at&nbsp;%s&#34;</span><span class="op" id="5223402">,</span>&nbsp;<span class="ident" id="5223404"><a href="/go/parser/parser.go.html#5222758">p</a></span><span class="op" id="5223405">.</span><span class="ident" id="5223406">file</span><span class="op" id="5223410">.</span><span class="ident" id="5223411">Position</span><span class="op" id="5223419">(</span><span class="ident" id="5223420"><a href="/go/parser/parser.go.html#5223308">pos</a></span><span class="op" id="5223423">)</span><span class="op" id="5223424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5223430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5223436"><a href="/go/parser/parser.go.html#5222758">p</a></span><span class="op" id="5223437">.</span><span class="builtintype" id="5223438">error</span><span class="op" id="5223443">(</span><span class="ident" id="5223444"><a href="/go/parser/parser.go.html#5222869">ident</a></span><span class="op" id="5223449">.</span><span class="ident" id="5223450">Pos</span><span class="op" id="5223453">(</span><span class="op" id="5223454">)</span><span class="op" id="5223455">,</span>&nbsp;<span class="ident" id="5223457"><a href="/go/parser/parser.go.html#5219969">fmt</a></span><span class="op" id="5223460">.</span><span class="ident" id="5223461">Sprintf</span><span class="op" id="5223468">(</span><span class="string" id="5223469">&#34;%s&nbsp;redeclared&nbsp;in&nbsp;this&nbsp;block%s&#34;</span><span class="op" id="5223500">,</span>&nbsp;<span class="ident" id="5223502"><a href="/go/parser/parser.go.html#5222869">ident</a></span><span class="op" id="5223507">.</span><span class="ident" id="5223508">Name</span><span class="op" id="5223512">,</span>&nbsp;<span class="ident" id="5223514"><a href="/go/parser/parser.go.html#5223286">prevDecl</a></span><span class="op" id="5223522">)</span><span class="op" id="5223523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5223528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5223532">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5223535">}</span><br>
<span class="lineno"></span><span class="op" id="5223537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5223540">func</span>&nbsp;<span class="op" id="5223545">(</span><span class="ident" id="5223546">p</span>&nbsp;<span class="op" id="5223548">*</span><span class="ident" id="5223549"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5223555">)</span>&nbsp;<span class="ident" id="5223557">shortVarDecl</span><span class="op" id="5223569">(</span><span class="ident" id="5223570">decl</span>&nbsp;<span class="op" id="5223575">*</span><span class="ident" id="5223576"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5223579">.</span><span class="ident" id="5223580">AssignStmt</span><span class="op" id="5223590">,</span>&nbsp;<span class="ident" id="5223592">list</span>&nbsp;<span class="op" id="5223597">[</span><span class="op" id="5223598">]</span><span class="ident" id="5223599"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5223602">.</span><span class="ident" id="5223603">Expr</span><span class="op" id="5223607">)</span>&nbsp;<span class="op" id="5223609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5223612">//&nbsp;Go&nbsp;spec:&nbsp;A&nbsp;short&nbsp;variable&nbsp;declaration&nbsp;may&nbsp;redeclare&nbsp;variables</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5223678">//&nbsp;provided&nbsp;they&nbsp;were&nbsp;originally&nbsp;declared&nbsp;in&nbsp;the&nbsp;same&nbsp;block&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5223744">//&nbsp;the&nbsp;same&nbsp;type,&nbsp;and&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;non-blank&nbsp;variables&nbsp;is&nbsp;new.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5223815">n</span>&nbsp;<span class="op" id="5223817">:=</span>&nbsp;<span class="num" id="5223820">0</span>&nbsp;<span class="comment" id="5223822">//&nbsp;number&nbsp;of&nbsp;new&nbsp;variables</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223850">for</span>&nbsp;<span class="ident" id="5223854">_</span><span class="op" id="5223855">,</span>&nbsp;<span class="ident" id="5223857">x</span>&nbsp;<span class="op" id="5223859">:=</span>&nbsp;<span class="keyword" id="5223862">range</span>&nbsp;<span class="ident" id="5223868"><a href="/go/parser/parser.go.html#5223592">list</a></span>&nbsp;<span class="op" id="5223873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5223877">if</span>&nbsp;<span class="ident" id="5223880">ident</span><span class="op" id="5223885">,</span>&nbsp;<span class="ident" id="5223887">isIdent</span>&nbsp;<span class="op" id="5223895">:=</span>&nbsp;<span class="ident" id="5223898"><a href="/go/parser/parser.go.html#5223857">x</a></span><span class="op" id="5223899">.</span><span class="op" id="5223900">(</span><span class="op" id="5223901">*</span><span class="ident" id="5223902"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5223905">.</span><span class="ident" id="5223906">Ident</span><span class="op" id="5223911">)</span><span class="op" id="5223912">;</span>&nbsp;<span class="ident" id="5223914"><a href="/go/parser/parser.go.html#5223887">isIdent</a></span>&nbsp;<span class="op" id="5223922">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5223927"><a href="/go/parser/parser.go.html#5231787">assert</a></span><span class="op" id="5223933">(</span><span class="ident" id="5223934"><a href="/go/parser/parser.go.html#5223880">ident</a></span><span class="op" id="5223939">.</span><span class="ident" id="5223940">Obj</span>&nbsp;<span class="op" id="5223944">==</span>&nbsp;<span class="ident" id="5223947">nil</span><span class="op" id="5223950">,</span>&nbsp;<span class="string" id="5223952">&#34;identifier&nbsp;already&nbsp;declared&nbsp;or&nbsp;resolved&#34;</span><span class="op" id="5223993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5223998">obj</span>&nbsp;<span class="op" id="5224002">:=</span>&nbsp;<span class="ident" id="5224005"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5224008">.</span><span class="ident" id="5224009">NewObj</span><span class="op" id="5224015">(</span><span class="ident" id="5224016"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5224019">.</span><span class="ident" id="5224020">Var</span><span class="op" id="5224023">,</span>&nbsp;<span class="ident" id="5224025"><a href="/go/parser/parser.go.html#5223880">ident</a></span><span class="op" id="5224030">.</span><span class="ident" id="5224031">Name</span><span class="op" id="5224035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5224040">//&nbsp;remember&nbsp;corresponding&nbsp;assignment&nbsp;for&nbsp;other&nbsp;tools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5224096"><a href="/go/parser/parser.go.html#5223998">obj</a></span><span class="op" id="5224099">.</span><span class="ident" id="5224100">Decl</span>&nbsp;<span class="op" id="5224105">=</span>&nbsp;<span class="ident" id="5224107"><a href="/go/parser/parser.go.html#5223570">decl</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5224115"><a href="/go/parser/parser.go.html#5223880">ident</a></span><span class="op" id="5224120">.</span><span class="ident" id="5224121">Obj</span>&nbsp;<span class="op" id="5224125">=</span>&nbsp;<span class="ident" id="5224127"><a href="/go/parser/parser.go.html#5223998">obj</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5224134">if</span>&nbsp;<span class="ident" id="5224137"><a href="/go/parser/parser.go.html#5223880">ident</a></span><span class="op" id="5224142">.</span><span class="ident" id="5224143">Name</span>&nbsp;<span class="op" id="5224148">!=</span>&nbsp;<span class="string" id="5224151">&#34;_&#34;</span>&nbsp;<span class="op" id="5224155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5224161">if</span>&nbsp;<span class="ident" id="5224164">alt</span>&nbsp;<span class="op" id="5224168">:=</span>&nbsp;<span class="ident" id="5224171"><a href="/go/parser/parser.go.html#5223546">p</a></span><span class="op" id="5224172">.</span><span class="ident" id="5224173">topScope</span><span class="op" id="5224181">.</span><span class="ident" id="5224182">Insert</span><span class="op" id="5224188">(</span><span class="ident" id="5224189"><a href="/go/parser/parser.go.html#5223998">obj</a></span><span class="op" id="5224192">)</span><span class="op" id="5224193">;</span>&nbsp;<span class="ident" id="5224195"><a href="/go/parser/parser.go.html#5224164">alt</a></span>&nbsp;<span class="op" id="5224199">!=</span>&nbsp;<span class="ident" id="5224202">nil</span>&nbsp;<span class="op" id="5224206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5224213"><a href="/go/parser/parser.go.html#5223880">ident</a></span><span class="op" id="5224218">.</span><span class="ident" id="5224219">Obj</span>&nbsp;<span class="op" id="5224223">=</span>&nbsp;<span class="ident" id="5224225"><a href="/go/parser/parser.go.html#5224164">alt</a></span>&nbsp;<span class="comment" id="5224229">//&nbsp;redeclaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224250">}</span>&nbsp;<span class="keyword" id="5224252">else</span>&nbsp;<span class="op" id="5224257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5224264"><a href="/go/parser/parser.go.html#5223815">n</a></span><span class="op" id="5224265">++</span>&nbsp;<span class="comment" id="5224268">//&nbsp;new&nbsp;declaration</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224300">}</span>&nbsp;<span class="keyword" id="5224302">else</span>&nbsp;<span class="op" id="5224307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5224312"><a href="/go/parser/parser.go.html#5223546">p</a></span><span class="op" id="5224313">.</span><span class="ident" id="5224314">errorExpected</span><span class="op" id="5224327">(</span><span class="ident" id="5224328"><a href="/go/parser/parser.go.html#5223857">x</a></span><span class="op" id="5224329">.</span><span class="ident" id="5224330">Pos</span><span class="op" id="5224333">(</span><span class="op" id="5224334">)</span><span class="op" id="5224335">,</span>&nbsp;<span class="string" id="5224337">&#34;identifier&nbsp;on&nbsp;left&nbsp;side&nbsp;of&nbsp;:=&#34;</span><span class="op" id="5224368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224372">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5224378">if</span>&nbsp;<span class="ident" id="5224381"><a href="/go/parser/parser.go.html#5223815">n</a></span>&nbsp;<span class="op" id="5224383">==</span>&nbsp;<span class="num" id="5224386">0</span>&nbsp;<span class="op" id="5224388">&amp;&amp;</span>&nbsp;<span class="ident" id="5224391"><a href="/go/parser/parser.go.html#5223546">p</a></span><span class="op" id="5224392">.</span><span class="ident" id="5224393">mode</span><span class="op" id="5224397">&amp;</span><span class="ident" id="5224398"><a href="/go/parser/interface.go.html#5215132">DeclarationErrors</a></span>&nbsp;<span class="op" id="5224416">!=</span>&nbsp;<span class="num" id="5224419">0</span>&nbsp;<span class="op" id="5224421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5224425"><a href="/go/parser/parser.go.html#5223546">p</a></span><span class="op" id="5224426">.</span><span class="builtintype" id="5224427">error</span><span class="op" id="5224432">(</span><span class="ident" id="5224433"><a href="/go/parser/parser.go.html#5223592">list</a></span><span class="op" id="5224437">[</span><span class="num" id="5224438">0</span><span class="op" id="5224439">]</span><span class="op" id="5224440">.</span><span class="ident" id="5224441">Pos</span><span class="op" id="5224444">(</span><span class="op" id="5224445">)</span><span class="op" id="5224446">,</span>&nbsp;<span class="string" id="5224448">&#34;no&nbsp;new&nbsp;variables&nbsp;on&nbsp;left&nbsp;side&nbsp;of&nbsp;:=&#34;</span><span class="op" id="5224485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5224488">}</span><br>
<span class="lineno"></span><span class="op" id="5224490">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="comment" id="5224493">//&nbsp;The&nbsp;unresolved&nbsp;object&nbsp;is&nbsp;a&nbsp;sentinel&nbsp;to&nbsp;mark&nbsp;identifiers&nbsp;that&nbsp;have&nbsp;been&nbsp;added</span><br>
<span class="lineno"></span><span class="comment" id="5224573">//&nbsp;to&nbsp;the&nbsp;list&nbsp;of&nbsp;unresolved&nbsp;identifiers.&nbsp;The&nbsp;sentinel&nbsp;is&nbsp;only&nbsp;used&nbsp;for&nbsp;verifying</span><br>
<span class="lineno"></span><span class="comment" id="5224655">//&nbsp;internal&nbsp;consistency.</span><br>
<span class="lineno"></span><span class="keyword" id="5224680">var</span>&nbsp;<span class="ident" id="5224684">unresolved</span>&nbsp;<span class="op" id="5224695">=</span>&nbsp;<span class="builtinfunc" id="5224697">new</span><span class="op" id="5224700">(</span><span class="ident" id="5224701"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5224704">.</span><span class="ident" id="5224705">Object</span><span class="op" id="5224711">)</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="comment" id="5224714">//&nbsp;If&nbsp;x&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;tryResolve&nbsp;attempts&nbsp;to&nbsp;resolve&nbsp;x&nbsp;by&nbsp;looking&nbsp;up</span><br>
<span class="lineno"></span><span class="comment" id="5224787">//&nbsp;the&nbsp;object&nbsp;it&nbsp;denotes.&nbsp;If&nbsp;no&nbsp;object&nbsp;is&nbsp;found&nbsp;and&nbsp;collectUnresolved&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5224860">//&nbsp;set,&nbsp;x&nbsp;is&nbsp;marked&nbsp;as&nbsp;unresolved&nbsp;and&nbsp;collected&nbsp;in&nbsp;the&nbsp;list&nbsp;of&nbsp;unresolved</span><br>
<span class="lineno"></span><span class="comment" id="5224934">//&nbsp;identifiers.</span><br>
<span class="lineno">170</span><span class="comment" id="5224950">//</span><br>
<span class="lineno"></span><span class="keyword" id="5224953">func</span>&nbsp;<span class="op" id="5224958">(</span><span class="ident" id="5224959">p</span>&nbsp;<span class="op" id="5224961">*</span><span class="ident" id="5224962"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5224968">)</span>&nbsp;<span class="ident" id="5224970">tryResolve</span><span class="op" id="5224980">(</span><span class="ident" id="5224981">x</span>&nbsp;<span class="ident" id="5224983"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5224986">.</span><span class="ident" id="5224987">Expr</span><span class="op" id="5224991">,</span>&nbsp;<span class="ident" id="5224993">collectUnresolved</span>&nbsp;<span class="builtintype" id="5225011">bool</span><span class="op" id="5225015">)</span>&nbsp;<span class="op" id="5225017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5225020">//&nbsp;nothing&nbsp;to&nbsp;do&nbsp;if&nbsp;x&nbsp;is&nbsp;not&nbsp;an&nbsp;identifier&nbsp;or&nbsp;the&nbsp;blank&nbsp;identifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5225088">ident</span><span class="op" id="5225093">,</span>&nbsp;<span class="ident" id="5225095">_</span>&nbsp;<span class="op" id="5225097">:=</span>&nbsp;<span class="ident" id="5225100"><a href="/go/parser/parser.go.html#5224981">x</a></span><span class="op" id="5225101">.</span><span class="op" id="5225102">(</span><span class="op" id="5225103">*</span><span class="ident" id="5225104"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5225107">.</span><span class="ident" id="5225108">Ident</span><span class="op" id="5225113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5225116">if</span>&nbsp;<span class="ident" id="5225119"><a href="/go/parser/parser.go.html#5225088">ident</a></span>&nbsp;<span class="op" id="5225125">==</span>&nbsp;<span class="ident" id="5225128">nil</span>&nbsp;<span class="op" id="5225132">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5225136">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5225144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5225147"><a href="/go/parser/parser.go.html#5231787">assert</a></span><span class="op" id="5225153">(</span><span class="ident" id="5225154"><a href="/go/parser/parser.go.html#5225088">ident</a></span><span class="op" id="5225159">.</span><span class="ident" id="5225160">Obj</span>&nbsp;<span class="op" id="5225164">==</span>&nbsp;<span class="ident" id="5225167">nil</span><span class="op" id="5225170">,</span>&nbsp;<span class="string" id="5225172">&#34;identifier&nbsp;already&nbsp;declared&nbsp;or&nbsp;resolved&#34;</span><span class="op" id="5225213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5225216">if</span>&nbsp;<span class="ident" id="5225219"><a href="/go/parser/parser.go.html#5225088">ident</a></span><span class="op" id="5225224">.</span><span class="ident" id="5225225">Name</span>&nbsp;<span class="op" id="5225230">==</span>&nbsp;<span class="string" id="5225233">&#34;_&#34;</span>&nbsp;<span class="op" id="5225237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5225241">return</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5225249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5225252">//&nbsp;try&nbsp;to&nbsp;resolve&nbsp;the&nbsp;identifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5225286">for</span>&nbsp;<span class="ident" id="5225290">s</span>&nbsp;<span class="op" id="5225292">:=</span>&nbsp;<span class="ident" id="5225295"><a href="/go/parser/parser.go.html#5224959">p</a></span><span class="op" id="5225296">.</span><span class="ident" id="5225297">topScope</span><span class="op" id="5225305">;</span>&nbsp;<span class="ident" id="5225307"><a href="/go/parser/parser.go.html#5225290">s</a></span>&nbsp;<span class="op" id="5225309">!=</span>&nbsp;<span class="ident" id="5225312">nil</span><span class="op" id="5225315">;</span>&nbsp;<span class="ident" id="5225317"><a href="/go/parser/parser.go.html#5225290">s</a></span>&nbsp;<span class="op" id="5225319">=</span>&nbsp;<span class="ident" id="5225321"><a href="/go/parser/parser.go.html#5225290">s</a></span><span class="op" id="5225322">.</span><span class="ident" id="5225323">Outer</span>&nbsp;<span class="op" id="5225329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5225333">if</span>&nbsp;<span class="ident" id="5225336">obj</span>&nbsp;<span class="op" id="5225340">:=</span>&nbsp;<span class="ident" id="5225343"><a href="/go/parser/parser.go.html#5225290">s</a></span><span class="op" id="5225344">.</span><span class="ident" id="5225345">Lookup</span><span class="op" id="5225351">(</span><span class="ident" id="5225352"><a href="/go/parser/parser.go.html#5225088">ident</a></span><span class="op" id="5225357">.</span><span class="ident" id="5225358">Name</span><span class="op" id="5225362">)</span><span class="op" id="5225363">;</span>&nbsp;<span class="ident" id="5225365"><a href="/go/parser/parser.go.html#5225336">obj</a></span>&nbsp;<span class="op" id="5225369">!=</span>&nbsp;<span class="ident" id="5225372">nil</span>&nbsp;<span class="op" id="5225376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5225381"><a href="/go/parser/parser.go.html#5225088">ident</a></span><span class="op" id="5225386">.</span><span class="ident" id="5225387">Obj</span>&nbsp;<span class="op" id="5225391">=</span>&nbsp;<span class="ident" id="5225393"><a href="/go/parser/parser.go.html#5225336">obj</a></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5225400">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5225409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5225412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5225415">//&nbsp;all&nbsp;local&nbsp;scopes&nbsp;are&nbsp;known,&nbsp;so&nbsp;any&nbsp;unresolved&nbsp;identifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5225476">//&nbsp;must&nbsp;be&nbsp;found&nbsp;either&nbsp;in&nbsp;the&nbsp;file&nbsp;scope,&nbsp;package&nbsp;scope</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5225534">//&nbsp;(perhaps&nbsp;in&nbsp;another&nbsp;file),&nbsp;or&nbsp;universe&nbsp;scope&nbsp;---&nbsp;collect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5225595">//&nbsp;them&nbsp;so&nbsp;that&nbsp;they&nbsp;can&nbsp;be&nbsp;resolved&nbsp;later</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5225639">if</span>&nbsp;<span class="ident" id="5225642"><a href="/go/parser/parser.go.html#5224993">collectUnresolved</a></span>&nbsp;<span class="op" id="5225660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5225664"><a href="/go/parser/parser.go.html#5225088">ident</a></span><span class="op" id="5225669">.</span><span class="ident" id="5225670">Obj</span>&nbsp;<span class="op" id="5225674">=</span>&nbsp;<span class="ident" id="5225676"><a href="/go/parser/parser.go.html#5224684">unresolved</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5225689"><a href="/go/parser/parser.go.html#5224959">p</a></span><span class="op" id="5225690">.</span><span class="ident" id="5225691">unresolved</span>&nbsp;<span class="op" id="5225702">=</span>&nbsp;<span class="builtinfunc" id="5225704">append</span><span class="op" id="5225710">(</span><span class="ident" id="5225711"><a href="/go/parser/parser.go.html#5224959">p</a></span><span class="op" id="5225712">.</span><span class="ident" id="5225713">unresolved</span><span class="op" id="5225723">,</span>&nbsp;<span class="ident" id="5225725"><a href="/go/parser/parser.go.html#5225088">ident</a></span><span class="op" id="5225730">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5225733">}</span><br>
<span class="lineno"></span><span class="op" id="5225735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5225738">func</span>&nbsp;<span class="op" id="5225743">(</span><span class="ident" id="5225744">p</span>&nbsp;<span class="op" id="5225746">*</span><span class="ident" id="5225747"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5225753">)</span>&nbsp;<span class="ident" id="5225755">resolve</span><span class="op" id="5225762">(</span><span class="ident" id="5225763">x</span>&nbsp;<span class="ident" id="5225765"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5225768">.</span><span class="ident" id="5225769">Expr</span><span class="op" id="5225773">)</span>&nbsp;<span class="op" id="5225775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5225778"><a href="/go/parser/parser.go.html#5225744">p</a></span><span class="op" id="5225779">.</span><span class="ident" id="5225780">tryResolve</span><span class="op" id="5225790">(</span><span class="ident" id="5225791"><a href="/go/parser/parser.go.html#5225763">x</a></span><span class="op" id="5225792">,</span>&nbsp;<span class="builtintype" id="5225794">true</span><span class="op" id="5225798">)</span><br>
<span class="lineno">200</span><span class="op" id="5225800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5225803">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5225883">//&nbsp;Parsing&nbsp;support</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="5225903">func</span>&nbsp;<span class="op" id="5225908">(</span><span class="ident" id="5225909">p</span>&nbsp;<span class="op" id="5225911">*</span><span class="ident" id="5225912"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5225918">)</span>&nbsp;<span class="ident" id="5225920">printTrace</span><span class="op" id="5225930">(</span><span class="ident" id="5225931">a</span>&nbsp;<span class="op" id="5225933">...</span><span class="keyword" id="5225936">interface</span><span class="op" id="5225945">{</span><span class="op" id="5225946">}</span><span class="op" id="5225947">)</span>&nbsp;<span class="op" id="5225949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5225952">const</span>&nbsp;<span class="ident" id="5225958">dots</span>&nbsp;<span class="op" id="5225963">=</span>&nbsp;<span class="string" id="5225965">&#34;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5226033">const</span>&nbsp;<span class="ident" id="5226039">n</span>&nbsp;<span class="op" id="5226041">=</span>&nbsp;<span class="builtinfunc" id="5226043">len</span><span class="op" id="5226046">(</span><span class="ident" id="5226047"><a href="/go/parser/parser.go.html#5225958">dots</a></span><span class="op" id="5226051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226054">pos</span>&nbsp;<span class="op" id="5226058">:=</span>&nbsp;<span class="ident" id="5226061"><a href="/go/parser/parser.go.html#5225909">p</a></span><span class="op" id="5226062">.</span><span class="ident" id="5226063">file</span><span class="op" id="5226067">.</span><span class="ident" id="5226068">Position</span><span class="op" id="5226076">(</span><span class="ident" id="5226077"><a href="/go/parser/parser.go.html#5225909">p</a></span><span class="op" id="5226078">.</span><span class="ident" id="5226079">pos</span><span class="op" id="5226082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226085"><a href="/go/parser/parser.go.html#5219969">fmt</a></span><span class="op" id="5226088">.</span><span class="ident" id="5226089">Printf</span><span class="op" id="5226095">(</span><span class="string" id="5226096">&#34;%5d:%3d:&nbsp;&#34;</span><span class="op" id="5226107">,</span>&nbsp;<span class="ident" id="5226109"><a href="/go/parser/parser.go.html#5226054">pos</a></span><span class="op" id="5226112">.</span><span class="ident" id="5226113">Line</span><span class="op" id="5226117">,</span>&nbsp;<span class="ident" id="5226119"><a href="/go/parser/parser.go.html#5226054">pos</a></span><span class="op" id="5226122">.</span><span class="ident" id="5226123">Column</span><span class="op" id="5226129">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226132">i</span>&nbsp;<span class="op" id="5226134">:=</span>&nbsp;<span class="num" id="5226137">2</span>&nbsp;<span class="op" id="5226139">*</span>&nbsp;<span class="ident" id="5226141"><a href="/go/parser/parser.go.html#5225909">p</a></span><span class="op" id="5226142">.</span><span class="ident" id="5226143">indent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5226151">for</span>&nbsp;<span class="ident" id="5226155"><a href="/go/parser/parser.go.html#5226132">i</a></span>&nbsp;<span class="op" id="5226157">&gt;</span>&nbsp;<span class="ident" id="5226159"><a href="/go/parser/parser.go.html#5226039">n</a></span>&nbsp;<span class="op" id="5226161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226165"><a href="/go/parser/parser.go.html#5219969">fmt</a></span><span class="op" id="5226168">.</span><span class="ident" id="5226169">Print</span><span class="op" id="5226174">(</span><span class="ident" id="5226175"><a href="/go/parser/parser.go.html#5225958">dots</a></span><span class="op" id="5226179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226183"><a href="/go/parser/parser.go.html#5226132">i</a></span>&nbsp;<span class="op" id="5226185">-=</span>&nbsp;<span class="ident" id="5226188"><a href="/go/parser/parser.go.html#5226039">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5226191">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5226194">//&nbsp;i&nbsp;&lt;=&nbsp;n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226205"><a href="/go/parser/parser.go.html#5219969">fmt</a></span><span class="op" id="5226208">.</span><span class="ident" id="5226209">Print</span><span class="op" id="5226214">(</span><span class="ident" id="5226215"><a href="/go/parser/parser.go.html#5225958">dots</a></span><span class="op" id="5226219">[</span><span class="num" id="5226220">0</span><span class="op" id="5226221">:</span><span class="ident" id="5226222"><a href="/go/parser/parser.go.html#5226132">i</a></span><span class="op" id="5226223">]</span><span class="op" id="5226224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226227"><a href="/go/parser/parser.go.html#5219969">fmt</a></span><span class="op" id="5226230">.</span><span class="ident" id="5226231">Println</span><span class="op" id="5226238">(</span><span class="ident" id="5226239"><a href="/go/parser/parser.go.html#5225931">a</a></span><span class="op" id="5226240">...</span><span class="op" id="5226243">)</span><br>
<span class="lineno"></span><span class="op" id="5226245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="5226248">func</span>&nbsp;<span class="ident" id="5226253">trace</span><span class="op" id="5226258">(</span><span class="ident" id="5226259">p</span>&nbsp;<span class="op" id="5226261">*</span><span class="ident" id="5226262"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5226268">,</span>&nbsp;<span class="ident" id="5226270">msg</span>&nbsp;<span class="builtintype" id="5226274">string</span><span class="op" id="5226280">)</span>&nbsp;<span class="op" id="5226282">*</span><span class="ident" id="5226283"><a href="/go/parser/parser.go.html#5220111">parser</a></span>&nbsp;<span class="op" id="5226290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226293"><a href="/go/parser/parser.go.html#5226259">p</a></span><span class="op" id="5226294">.</span><span class="ident" id="5226295">printTrace</span><span class="op" id="5226305">(</span><span class="ident" id="5226306"><a href="/go/parser/parser.go.html#5226270">msg</a></span><span class="op" id="5226309">,</span>&nbsp;<span class="string" id="5226311">&#34;(&#34;</span><span class="op" id="5226314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226317"><a href="/go/parser/parser.go.html#5226259">p</a></span><span class="op" id="5226318">.</span><span class="ident" id="5226319">indent</span><span class="op" id="5226325">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5226329">return</span>&nbsp;<span class="ident" id="5226336"><a href="/go/parser/parser.go.html#5226259">p</a></span><br>
<span class="lineno"></span><span class="op" id="5226338">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="5226341">//&nbsp;Usage&nbsp;pattern:&nbsp;defer&nbsp;un(trace(p,&nbsp;&#34;...&#34;))</span><br>
<span class="lineno"></span><span class="keyword" id="5226385">func</span>&nbsp;<span class="ident" id="5226390">un</span><span class="op" id="5226392">(</span><span class="ident" id="5226393">p</span>&nbsp;<span class="op" id="5226395">*</span><span class="ident" id="5226396"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5226402">)</span>&nbsp;<span class="op" id="5226404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226407"><a href="/go/parser/parser.go.html#5226393">p</a></span><span class="op" id="5226408">.</span><span class="ident" id="5226409">indent</span><span class="op" id="5226415">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226419"><a href="/go/parser/parser.go.html#5226393">p</a></span><span class="op" id="5226420">.</span><span class="ident" id="5226421">printTrace</span><span class="op" id="5226431">(</span><span class="string" id="5226432">&#34;)&#34;</span><span class="op" id="5226435">)</span><br>
<span class="lineno">230</span><span class="op" id="5226437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5226440">//&nbsp;Advance&nbsp;to&nbsp;the&nbsp;next&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="5226470">func</span>&nbsp;<span class="op" id="5226475">(</span><span class="ident" id="5226476">p</span>&nbsp;<span class="op" id="5226478">*</span><span class="ident" id="5226479"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5226485">)</span>&nbsp;<span class="ident" id="5226487">next0</span><span class="op" id="5226492">(</span><span class="op" id="5226493">)</span>&nbsp;<span class="op" id="5226495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5226498">//&nbsp;Because&nbsp;of&nbsp;one-token&nbsp;look-ahead,&nbsp;print&nbsp;the&nbsp;previous&nbsp;token</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5226560">//&nbsp;when&nbsp;tracing&nbsp;as&nbsp;it&nbsp;provides&nbsp;a&nbsp;more&nbsp;readable&nbsp;output.&nbsp;The</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5226620">//&nbsp;very&nbsp;first&nbsp;token&nbsp;(!p.pos.IsValid())&nbsp;is&nbsp;not&nbsp;initialized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5226679">//&nbsp;(it&nbsp;is&nbsp;token.ILLEGAL),&nbsp;so&nbsp;don&#39;t&nbsp;print&nbsp;it&nbsp;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5226726">if</span>&nbsp;<span class="ident" id="5226729"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226730">.</span><span class="ident" id="5226731">trace</span>&nbsp;<span class="op" id="5226737">&amp;&amp;</span>&nbsp;<span class="ident" id="5226740"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226741">.</span><span class="ident" id="5226742">pos</span><span class="op" id="5226745">.</span><span class="ident" id="5226746">IsValid</span><span class="op" id="5226753">(</span><span class="op" id="5226754">)</span>&nbsp;<span class="op" id="5226756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226760">s</span>&nbsp;<span class="op" id="5226762">:=</span>&nbsp;<span class="ident" id="5226765"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226766">.</span><span class="ident" id="5226767">tok</span><span class="op" id="5226770">.</span><span class="ident" id="5226771">String</span><span class="op" id="5226777">(</span><span class="op" id="5226778">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5226782">switch</span>&nbsp;<span class="op" id="5226789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5226793">case</span>&nbsp;<span class="ident" id="5226798"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226799">.</span><span class="ident" id="5226800">tok</span><span class="op" id="5226803">.</span><span class="ident" id="5226804">IsLiteral</span><span class="op" id="5226813">(</span><span class="op" id="5226814">)</span><span class="op" id="5226815">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226820"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226821">.</span><span class="ident" id="5226822">printTrace</span><span class="op" id="5226832">(</span><span class="ident" id="5226833"><a href="/go/parser/parser.go.html#5226760">s</a></span><span class="op" id="5226834">,</span>&nbsp;<span class="ident" id="5226836"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226837">.</span><span class="ident" id="5226838">lit</span><span class="op" id="5226841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5226845">case</span>&nbsp;<span class="ident" id="5226850"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226851">.</span><span class="ident" id="5226852">tok</span><span class="op" id="5226855">.</span><span class="ident" id="5226856">IsOperator</span><span class="op" id="5226866">(</span><span class="op" id="5226867">)</span><span class="op" id="5226868">,</span>&nbsp;<span class="ident" id="5226870"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226871">.</span><span class="ident" id="5226872">tok</span><span class="op" id="5226875">.</span><span class="ident" id="5226876">IsKeyword</span><span class="op" id="5226885">(</span><span class="op" id="5226886">)</span><span class="op" id="5226887">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226892"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226893">.</span><span class="ident" id="5226894">printTrace</span><span class="op" id="5226904">(</span><span class="string" id="5226905">&#34;\&#34;&#34;</span>&nbsp;<span class="op" id="5226910">+</span>&nbsp;<span class="ident" id="5226912"><a href="/go/parser/parser.go.html#5226760">s</a></span>&nbsp;<span class="op" id="5226914">+</span>&nbsp;<span class="string" id="5226916">&#34;\&#34;&#34;</span><span class="op" id="5226920">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5226924">default</span><span class="op" id="5226931">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226936"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226937">.</span><span class="ident" id="5226938">printTrace</span><span class="op" id="5226948">(</span><span class="ident" id="5226949"><a href="/go/parser/parser.go.html#5226760">s</a></span><span class="op" id="5226950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5226954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5226957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5226961"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226962">.</span><span class="ident" id="5226963">pos</span><span class="op" id="5226966">,</span>&nbsp;<span class="ident" id="5226968"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226969">.</span><span class="ident" id="5226970">tok</span><span class="op" id="5226973">,</span>&nbsp;<span class="ident" id="5226975"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226976">.</span><span class="ident" id="5226977">lit</span>&nbsp;<span class="op" id="5226981">=</span>&nbsp;<span class="ident" id="5226983"><a href="/go/parser/parser.go.html#5226476">p</a></span><span class="op" id="5226984">.</span><span class="ident" id="5226985">scanner</span><span class="op" id="5226992">.</span><span class="ident" id="5226993">Scan</span><span class="op" id="5226997">(</span><span class="op" id="5226998">)</span><br>
<span class="lineno"></span><span class="op" id="5227000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5227003">//&nbsp;Consume&nbsp;a&nbsp;comment&nbsp;and&nbsp;return&nbsp;it&nbsp;and&nbsp;the&nbsp;line&nbsp;on&nbsp;which&nbsp;it&nbsp;ends.</span><br>
<span class="lineno"></span><span class="keyword" id="5227069">func</span>&nbsp;<span class="op" id="5227074">(</span><span class="ident" id="5227075">p</span>&nbsp;<span class="op" id="5227077">*</span><span class="ident" id="5227078"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5227084">)</span>&nbsp;<span class="ident" id="5227086">consumeComment</span><span class="op" id="5227100">(</span><span class="op" id="5227101">)</span>&nbsp;<span class="op" id="5227103">(</span><span class="ident" id="5227104">comment</span>&nbsp;<span class="op" id="5227112">*</span><span class="ident" id="5227113"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5227116">.</span><span class="ident" id="5227117">Comment</span><span class="op" id="5227124">,</span>&nbsp;<span class="ident" id="5227126">endline</span>&nbsp;<span class="builtintype" id="5227134">int</span><span class="op" id="5227137">)</span>&nbsp;<span class="op" id="5227139">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5227142">//&nbsp;/*-style&nbsp;comments&nbsp;may&nbsp;end&nbsp;on&nbsp;a&nbsp;different&nbsp;line&nbsp;than&nbsp;where&nbsp;they&nbsp;start.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5227215">//&nbsp;Scan&nbsp;the&nbsp;comment&nbsp;for&nbsp;&#39;\n&#39;&nbsp;chars&nbsp;and&nbsp;adjust&nbsp;endline&nbsp;accordingly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5227283"><a href="/go/parser/parser.go.html#5227126">endline</a></span>&nbsp;<span class="op" id="5227291">=</span>&nbsp;<span class="ident" id="5227293"><a href="/go/parser/parser.go.html#5227075">p</a></span><span class="op" id="5227294">.</span><span class="ident" id="5227295">file</span><span class="op" id="5227299">.</span><span class="ident" id="5227300">Line</span><span class="op" id="5227304">(</span><span class="ident" id="5227305"><a href="/go/parser/parser.go.html#5227075">p</a></span><span class="op" id="5227306">.</span><span class="ident" id="5227307">pos</span><span class="op" id="5227310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5227313">if</span>&nbsp;<span class="ident" id="5227316"><a href="/go/parser/parser.go.html#5227075">p</a></span><span class="op" id="5227317">.</span><span class="ident" id="5227318">lit</span><span class="op" id="5227321">[</span><span class="num" id="5227322">1</span><span class="op" id="5227323">]</span>&nbsp;<span class="op" id="5227325">==</span>&nbsp;<span class="string" id="5227328">&#39;*&#39;</span>&nbsp;<span class="op" id="5227332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5227336">//&nbsp;don&#39;t&nbsp;use&nbsp;range&nbsp;here&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;decode&nbsp;Unicode&nbsp;code&nbsp;points</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5227402">for</span>&nbsp;<span class="ident" id="5227406">i</span>&nbsp;<span class="op" id="5227408">:=</span>&nbsp;<span class="num" id="5227411">0</span><span class="op" id="5227412">;</span>&nbsp;<span class="ident" id="5227414"><a href="/go/parser/parser.go.html#5227406">i</a></span>&nbsp;<span class="op" id="5227416">&lt;</span>&nbsp;<span class="builtinfunc" id="5227418">len</span><span class="op" id="5227421">(</span><span class="ident" id="5227422"><a href="/go/parser/parser.go.html#5227075">p</a></span><span class="op" id="5227423">.</span><span class="ident" id="5227424">lit</span><span class="op" id="5227427">)</span><span class="op" id="5227428">;</span>&nbsp;<span class="ident" id="5227430"><a href="/go/parser/parser.go.html#5227406">i</a></span><span class="op" id="5227431">++</span>&nbsp;<span class="op" id="5227434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5227439">if</span>&nbsp;<span class="ident" id="5227442"><a href="/go/parser/parser.go.html#5227075">p</a></span><span class="op" id="5227443">.</span><span class="ident" id="5227444">lit</span><span class="op" id="5227447">[</span><span class="ident" id="5227448"><a href="/go/parser/parser.go.html#5227406">i</a></span><span class="op" id="5227449">]</span>&nbsp;<span class="op" id="5227451">==</span>&nbsp;<span class="string" id="5227454">&#39;\n&#39;</span>&nbsp;<span class="op" id="5227459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5227465"><a href="/go/parser/parser.go.html#5227126">endline</a></span><span class="op" id="5227472">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5227478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5227482">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5227485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5227489"><a href="/go/parser/parser.go.html#5227104">comment</a></span>&nbsp;<span class="op" id="5227497">=</span>&nbsp;<span class="op" id="5227499">&amp;</span><span class="ident" id="5227500"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5227503">.</span><span class="ident" id="5227504">Comment</span><span class="op" id="5227511">{</span><span class="ident" id="5227512">Slash</span><span class="op" id="5227517">:</span>&nbsp;<span class="ident" id="5227519"><a href="/go/parser/parser.go.html#5227075">p</a></span><span class="op" id="5227520">.</span><span class="ident" id="5227521">pos</span><span class="op" id="5227524">,</span>&nbsp;<span class="ident" id="5227526">Text</span><span class="op" id="5227530">:</span>&nbsp;<span class="ident" id="5227532"><a href="/go/parser/parser.go.html#5227075">p</a></span><span class="op" id="5227533">.</span><span class="ident" id="5227534">lit</span><span class="op" id="5227537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5227540"><a href="/go/parser/parser.go.html#5227075">p</a></span><span class="op" id="5227541">.</span><span class="ident" id="5227542">next0</span><span class="op" id="5227547">(</span><span class="op" id="5227548">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5227552">return</span><br>
<span class="lineno"></span><span class="op" id="5227559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5227562">//&nbsp;Consume&nbsp;a&nbsp;group&nbsp;of&nbsp;adjacent&nbsp;comments,&nbsp;add&nbsp;it&nbsp;to&nbsp;the&nbsp;parser&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="5227626">//&nbsp;comments&nbsp;list,&nbsp;and&nbsp;return&nbsp;it&nbsp;together&nbsp;with&nbsp;the&nbsp;line&nbsp;at&nbsp;which</span><br>
<span class="lineno">275</span><span class="comment" id="5227690">//&nbsp;the&nbsp;last&nbsp;comment&nbsp;in&nbsp;the&nbsp;group&nbsp;ends.&nbsp;A&nbsp;non-comment&nbsp;token&nbsp;or&nbsp;n</span><br>
<span class="lineno"></span><span class="comment" id="5227754">//&nbsp;empty&nbsp;lines&nbsp;terminate&nbsp;a&nbsp;comment&nbsp;group.</span><br>
<span class="lineno"></span><span class="comment" id="5227796">//</span><br>
<span class="lineno"></span><span class="keyword" id="5227799">func</span>&nbsp;<span class="op" id="5227804">(</span><span class="ident" id="5227805">p</span>&nbsp;<span class="op" id="5227807">*</span><span class="ident" id="5227808"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5227814">)</span>&nbsp;<span class="ident" id="5227816">consumeCommentGroup</span><span class="op" id="5227835">(</span><span class="ident" id="5227836">n</span>&nbsp;<span class="builtintype" id="5227838">int</span><span class="op" id="5227841">)</span>&nbsp;<span class="op" id="5227843">(</span><span class="ident" id="5227844">comments</span>&nbsp;<span class="op" id="5227853">*</span><span class="ident" id="5227854"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5227857">.</span><span class="ident" id="5227858">CommentGroup</span><span class="op" id="5227870">,</span>&nbsp;<span class="ident" id="5227872">endline</span>&nbsp;<span class="builtintype" id="5227880">int</span><span class="op" id="5227883">)</span>&nbsp;<span class="op" id="5227885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5227888">var</span>&nbsp;<span class="ident" id="5227892">list</span>&nbsp;<span class="op" id="5227897">[</span><span class="op" id="5227898">]</span><span class="op" id="5227899">*</span><span class="ident" id="5227900"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5227903">.</span><span class="ident" id="5227904">Comment</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5227913"><a href="/go/parser/parser.go.html#5227872">endline</a></span>&nbsp;<span class="op" id="5227921">=</span>&nbsp;<span class="ident" id="5227923"><a href="/go/parser/parser.go.html#5227805">p</a></span><span class="op" id="5227924">.</span><span class="ident" id="5227925">file</span><span class="op" id="5227929">.</span><span class="ident" id="5227930">Line</span><span class="op" id="5227934">(</span><span class="ident" id="5227935"><a href="/go/parser/parser.go.html#5227805">p</a></span><span class="op" id="5227936">.</span><span class="ident" id="5227937">pos</span><span class="op" id="5227940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5227943">for</span>&nbsp;<span class="ident" id="5227947"><a href="/go/parser/parser.go.html#5227805">p</a></span><span class="op" id="5227948">.</span><span class="ident" id="5227949">tok</span>&nbsp;<span class="op" id="5227953">==</span>&nbsp;<span class="ident" id="5227956"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5227961">.</span><span class="ident" id="5227962">COMMENT</span>&nbsp;<span class="op" id="5227970">&amp;&amp;</span>&nbsp;<span class="ident" id="5227973"><a href="/go/parser/parser.go.html#5227805">p</a></span><span class="op" id="5227974">.</span><span class="ident" id="5227975">file</span><span class="op" id="5227979">.</span><span class="ident" id="5227980">Line</span><span class="op" id="5227984">(</span><span class="ident" id="5227985"><a href="/go/parser/parser.go.html#5227805">p</a></span><span class="op" id="5227986">.</span><span class="ident" id="5227987">pos</span><span class="op" id="5227990">)</span>&nbsp;<span class="op" id="5227992">&lt;=</span>&nbsp;<span class="ident" id="5227995"><a href="/go/parser/parser.go.html#5227872">endline</a></span><span class="op" id="5228002">+</span><span class="ident" id="5228003"><a href="/go/parser/parser.go.html#5227836">n</a></span>&nbsp;<span class="op" id="5228005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5228009">var</span>&nbsp;<span class="ident" id="5228013">comment</span>&nbsp;<span class="op" id="5228021">*</span><span class="ident" id="5228022"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5228025">.</span><span class="ident" id="5228026">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5228036"><a href="/go/parser/parser.go.html#5228013">comment</a></span><span class="op" id="5228043">,</span>&nbsp;<span class="ident" id="5228045"><a href="/go/parser/parser.go.html#5227872">endline</a></span>&nbsp;<span class="op" id="5228053">=</span>&nbsp;<span class="ident" id="5228055"><a href="/go/parser/parser.go.html#5227805">p</a></span><span class="op" id="5228056">.</span><span class="ident" id="5228057">consumeComment</span><span class="op" id="5228071">(</span><span class="op" id="5228072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5228076"><a href="/go/parser/parser.go.html#5227892">list</a></span>&nbsp;<span class="op" id="5228081">=</span>&nbsp;<span class="builtinfunc" id="5228083">append</span><span class="op" id="5228089">(</span><span class="ident" id="5228090"><a href="/go/parser/parser.go.html#5227892">list</a></span><span class="op" id="5228094">,</span>&nbsp;<span class="ident" id="5228096"><a href="/go/parser/parser.go.html#5228013">comment</a></span><span class="op" id="5228103">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5228106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5228110">//&nbsp;add&nbsp;comment&nbsp;group&nbsp;to&nbsp;the&nbsp;comments&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5228153"><a href="/go/parser/parser.go.html#5227844">comments</a></span>&nbsp;<span class="op" id="5228162">=</span>&nbsp;<span class="op" id="5228164">&amp;</span><span class="ident" id="5228165"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5228168">.</span><span class="ident" id="5228169">CommentGroup</span><span class="op" id="5228181">{</span><span class="ident" id="5228182">List</span><span class="op" id="5228186">:</span>&nbsp;<span class="ident" id="5228188"><a href="/go/parser/parser.go.html#5227892">list</a></span><span class="op" id="5228192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5228195"><a href="/go/parser/parser.go.html#5227805">p</a></span><span class="op" id="5228196">.</span><span class="ident" id="5228197">comments</span>&nbsp;<span class="op" id="5228206">=</span>&nbsp;<span class="builtinfunc" id="5228208">append</span><span class="op" id="5228214">(</span><span class="ident" id="5228215"><a href="/go/parser/parser.go.html#5227805">p</a></span><span class="op" id="5228216">.</span><span class="ident" id="5228217">comments</span><span class="op" id="5228225">,</span>&nbsp;<span class="ident" id="5228227"><a href="/go/parser/parser.go.html#5227844">comments</a></span><span class="op" id="5228235">)</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5228239">return</span><br>
<span class="lineno"></span><span class="op" id="5228246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5228249">//&nbsp;Advance&nbsp;to&nbsp;the&nbsp;next&nbsp;non-comment&nbsp;token.&nbsp;In&nbsp;the&nbsp;process,&nbsp;collect</span><br>
<span class="lineno">295</span><span class="comment" id="5228315">//&nbsp;any&nbsp;comment&nbsp;groups&nbsp;encountered,&nbsp;and&nbsp;remember&nbsp;the&nbsp;last&nbsp;lead&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5228381">//&nbsp;and&nbsp;line&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5228403">//</span><br>
<span class="lineno"></span><span class="comment" id="5228406">//&nbsp;A&nbsp;lead&nbsp;comment&nbsp;is&nbsp;a&nbsp;comment&nbsp;group&nbsp;that&nbsp;starts&nbsp;and&nbsp;ends&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5228469">//&nbsp;line&nbsp;without&nbsp;any&nbsp;other&nbsp;tokens&nbsp;and&nbsp;that&nbsp;is&nbsp;followed&nbsp;by&nbsp;a&nbsp;non-comment</span><br>
<span class="lineno">300</span><span class="comment" id="5228540">//&nbsp;token&nbsp;on&nbsp;the&nbsp;line&nbsp;immediately&nbsp;after&nbsp;the&nbsp;comment&nbsp;group.</span><br>
<span class="lineno"></span><span class="comment" id="5228598">//</span><br>
<span class="lineno"></span><span class="comment" id="5228601">//&nbsp;A&nbsp;line&nbsp;comment&nbsp;is&nbsp;a&nbsp;comment&nbsp;group&nbsp;that&nbsp;follows&nbsp;a&nbsp;non-comment</span><br>
<span class="lineno"></span><span class="comment" id="5228665">//&nbsp;token&nbsp;on&nbsp;the&nbsp;same&nbsp;line,&nbsp;and&nbsp;that&nbsp;has&nbsp;no&nbsp;tokens&nbsp;after&nbsp;it&nbsp;on&nbsp;the&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="5228736">//&nbsp;where&nbsp;it&nbsp;ends.</span><br>
<span class="lineno">305</span><span class="comment" id="5228754">//</span><br>
<span class="lineno"></span><span class="comment" id="5228757">//&nbsp;Lead&nbsp;and&nbsp;line&nbsp;comments&nbsp;may&nbsp;be&nbsp;considered&nbsp;documentation&nbsp;that&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5228823">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;AST.</span><br>
<span class="lineno"></span><span class="comment" id="5228845">//</span><br>
<span class="lineno"></span><span class="keyword" id="5228848">func</span>&nbsp;<span class="op" id="5228853">(</span><span class="ident" id="5228854">p</span>&nbsp;<span class="op" id="5228856">*</span><span class="ident" id="5228857"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5228863">)</span>&nbsp;<span class="ident" id="5228865">next</span><span class="op" id="5228869">(</span><span class="op" id="5228870">)</span>&nbsp;<span class="op" id="5228872">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5228875"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5228876">.</span><span class="ident" id="5228877">leadComment</span>&nbsp;<span class="op" id="5228889">=</span>&nbsp;<span class="ident" id="5228891">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5228896"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5228897">.</span><span class="ident" id="5228898">lineComment</span>&nbsp;<span class="op" id="5228910">=</span>&nbsp;<span class="ident" id="5228912">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5228917">prev</span>&nbsp;<span class="op" id="5228922">:=</span>&nbsp;<span class="ident" id="5228925"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5228926">.</span><span class="ident" id="5228927">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5228932"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5228933">.</span><span class="ident" id="5228934">next0</span><span class="op" id="5228939">(</span><span class="op" id="5228940">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5228944">if</span>&nbsp;<span class="ident" id="5228947"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5228948">.</span><span class="ident" id="5228949">tok</span>&nbsp;<span class="op" id="5228953">==</span>&nbsp;<span class="ident" id="5228956"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5228961">.</span><span class="ident" id="5228962">COMMENT</span>&nbsp;<span class="op" id="5228970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5228974">var</span>&nbsp;<span class="ident" id="5228978">comment</span>&nbsp;<span class="op" id="5228986">*</span><span class="ident" id="5228987"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5228990">.</span><span class="ident" id="5228991">CommentGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5229006">var</span>&nbsp;<span class="ident" id="5229010">endline</span>&nbsp;<span class="builtintype" id="5229018">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5229025">if</span>&nbsp;<span class="ident" id="5229028"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5229029">.</span><span class="ident" id="5229030">file</span><span class="op" id="5229034">.</span><span class="ident" id="5229035">Line</span><span class="op" id="5229039">(</span><span class="ident" id="5229040"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5229041">.</span><span class="ident" id="5229042">pos</span><span class="op" id="5229045">)</span>&nbsp;<span class="op" id="5229047">==</span>&nbsp;<span class="ident" id="5229050"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5229051">.</span><span class="ident" id="5229052">file</span><span class="op" id="5229056">.</span><span class="ident" id="5229057">Line</span><span class="op" id="5229061">(</span><span class="ident" id="5229062"><a href="/go/parser/parser.go.html#5228917">prev</a></span><span class="op" id="5229066">)</span>&nbsp;<span class="op" id="5229068">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5229073">//&nbsp;The&nbsp;comment&nbsp;is&nbsp;on&nbsp;same&nbsp;line&nbsp;as&nbsp;the&nbsp;previous&nbsp;token;&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5229133">//&nbsp;cannot&nbsp;be&nbsp;a&nbsp;lead&nbsp;comment&nbsp;but&nbsp;may&nbsp;be&nbsp;a&nbsp;line&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5229191"><a href="/go/parser/parser.go.html#5228978">comment</a></span><span class="op" id="5229198">,</span>&nbsp;<span class="ident" id="5229200"><a href="/go/parser/parser.go.html#5229010">endline</a></span>&nbsp;<span class="op" id="5229208">=</span>&nbsp;<span class="ident" id="5229210"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5229211">.</span><span class="ident" id="5229212">consumeCommentGroup</span><span class="op" id="5229231">(</span><span class="num" id="5229232">0</span><span class="op" id="5229233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5229238">if</span>&nbsp;<span class="ident" id="5229241"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5229242">.</span><span class="ident" id="5229243">file</span><span class="op" id="5229247">.</span><span class="ident" id="5229248">Line</span><span class="op" id="5229252">(</span><span class="ident" id="5229253"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5229254">.</span><span class="ident" id="5229255">pos</span><span class="op" id="5229258">)</span>&nbsp;<span class="op" id="5229260">!=</span>&nbsp;<span class="ident" id="5229263"><a href="/go/parser/parser.go.html#5229010">endline</a></span>&nbsp;<span class="op" id="5229271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5229277">//&nbsp;The&nbsp;next&nbsp;token&nbsp;is&nbsp;on&nbsp;a&nbsp;different&nbsp;line,&nbsp;thus</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5229328">//&nbsp;the&nbsp;last&nbsp;comment&nbsp;group&nbsp;is&nbsp;a&nbsp;line&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5229377"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5229378">.</span><span class="ident" id="5229379">lineComment</span>&nbsp;<span class="op" id="5229391">=</span>&nbsp;<span class="ident" id="5229393"><a href="/go/parser/parser.go.html#5228978">comment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5229404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5229408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5229413">//&nbsp;consume&nbsp;successor&nbsp;comments,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5229453"><a href="/go/parser/parser.go.html#5229010">endline</a></span>&nbsp;<span class="op" id="5229461">=</span>&nbsp;<span class="op" id="5229463">-</span><span class="num" id="5229464">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5229468">for</span>&nbsp;<span class="ident" id="5229472"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5229473">.</span><span class="ident" id="5229474">tok</span>&nbsp;<span class="op" id="5229478">==</span>&nbsp;<span class="ident" id="5229481"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5229486">.</span><span class="ident" id="5229487">COMMENT</span>&nbsp;<span class="op" id="5229495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5229500"><a href="/go/parser/parser.go.html#5228978">comment</a></span><span class="op" id="5229507">,</span>&nbsp;<span class="ident" id="5229509"><a href="/go/parser/parser.go.html#5229010">endline</a></span>&nbsp;<span class="op" id="5229517">=</span>&nbsp;<span class="ident" id="5229519"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5229520">.</span><span class="ident" id="5229521">consumeCommentGroup</span><span class="op" id="5229540">(</span><span class="num" id="5229541">1</span><span class="op" id="5229542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5229546">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5229551">if</span>&nbsp;<span class="ident" id="5229554"><a href="/go/parser/parser.go.html#5229010">endline</a></span><span class="op" id="5229561">+</span><span class="num" id="5229562">1</span>&nbsp;<span class="op" id="5229564">==</span>&nbsp;<span class="ident" id="5229567"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5229568">.</span><span class="ident" id="5229569">file</span><span class="op" id="5229573">.</span><span class="ident" id="5229574">Line</span><span class="op" id="5229578">(</span><span class="ident" id="5229579"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5229580">.</span><span class="ident" id="5229581">pos</span><span class="op" id="5229584">)</span>&nbsp;<span class="op" id="5229586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5229591">//&nbsp;The&nbsp;next&nbsp;token&nbsp;is&nbsp;following&nbsp;on&nbsp;the&nbsp;line&nbsp;immediately&nbsp;after&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5229659">//&nbsp;comment&nbsp;group,&nbsp;thus&nbsp;the&nbsp;last&nbsp;comment&nbsp;group&nbsp;is&nbsp;a&nbsp;lead&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5229727"><a href="/go/parser/parser.go.html#5228854">p</a></span><span class="op" id="5229728">.</span><span class="ident" id="5229729">leadComment</span>&nbsp;<span class="op" id="5229741">=</span>&nbsp;<span class="ident" id="5229743"><a href="/go/parser/parser.go.html#5228978">comment</a></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5229753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5229756">}</span><br>
<span class="lineno"></span><span class="op" id="5229758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5229761">//&nbsp;A&nbsp;bailout&nbsp;panic&nbsp;is&nbsp;raised&nbsp;to&nbsp;indicate&nbsp;early&nbsp;termination.</span><br>
<span class="lineno">345</span><span class="keyword" id="5229821">type</span>&nbsp;<span class="ident" id="5229826">bailout</span>&nbsp;<span class="keyword" id="5229834">struct</span><span class="op" id="5229840">{</span><span class="op" id="5229841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5229844">func</span>&nbsp;<span class="op" id="5229849">(</span><span class="ident" id="5229850">p</span>&nbsp;<span class="op" id="5229852">*</span><span class="ident" id="5229853"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5229859">)</span>&nbsp;<span class="builtintype" id="5229861">error</span><span class="op" id="5229866">(</span><span class="ident" id="5229867">pos</span>&nbsp;<span class="ident" id="5229871"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5229876">.</span><span class="ident" id="5229877">Pos</span><span class="op" id="5229880">,</span>&nbsp;<span class="ident" id="5229882">msg</span>&nbsp;<span class="builtintype" id="5229886">string</span><span class="op" id="5229892">)</span>&nbsp;<span class="op" id="5229894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5229897">epos</span>&nbsp;<span class="op" id="5229902">:=</span>&nbsp;<span class="ident" id="5229905"><a href="/go/parser/parser.go.html#5229850">p</a></span><span class="op" id="5229906">.</span><span class="ident" id="5229907">file</span><span class="op" id="5229911">.</span><span class="ident" id="5229912">Position</span><span class="op" id="5229920">(</span><span class="ident" id="5229921"><a href="/go/parser/parser.go.html#5229867">pos</a></span><span class="op" id="5229924">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5229928">//&nbsp;If&nbsp;AllErrors&nbsp;is&nbsp;not&nbsp;set,&nbsp;discard&nbsp;errors&nbsp;reported&nbsp;on&nbsp;the&nbsp;same&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5229998">//&nbsp;as&nbsp;the&nbsp;last&nbsp;recorded&nbsp;error&nbsp;and&nbsp;stop&nbsp;parsing&nbsp;if&nbsp;there&nbsp;are&nbsp;more&nbsp;than</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5230069">//&nbsp;10&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230084">if</span>&nbsp;<span class="ident" id="5230087"><a href="/go/parser/parser.go.html#5229850">p</a></span><span class="op" id="5230088">.</span><span class="ident" id="5230089">mode</span><span class="op" id="5230093">&amp;</span><span class="ident" id="5230094"><a href="/go/parser/interface.go.html#5215306">AllErrors</a></span>&nbsp;<span class="op" id="5230104">==</span>&nbsp;<span class="num" id="5230107">0</span>&nbsp;<span class="op" id="5230109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5230113">n</span>&nbsp;<span class="op" id="5230115">:=</span>&nbsp;<span class="builtinfunc" id="5230118">len</span><span class="op" id="5230121">(</span><span class="ident" id="5230122"><a href="/go/parser/parser.go.html#5229850">p</a></span><span class="op" id="5230123">.</span><span class="ident" id="5230124">errors</span><span class="op" id="5230130">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230134">if</span>&nbsp;<span class="ident" id="5230137"><a href="/go/parser/parser.go.html#5230113">n</a></span>&nbsp;<span class="op" id="5230139">&gt;</span>&nbsp;<span class="num" id="5230141">0</span>&nbsp;<span class="op" id="5230143">&amp;&amp;</span>&nbsp;<span class="ident" id="5230146"><a href="/go/parser/parser.go.html#5229850">p</a></span><span class="op" id="5230147">.</span><span class="ident" id="5230148">errors</span><span class="op" id="5230154">[</span><span class="ident" id="5230155"><a href="/go/parser/parser.go.html#5230113">n</a></span><span class="op" id="5230156">-</span><span class="num" id="5230157">1</span><span class="op" id="5230158">]</span><span class="op" id="5230159">.</span><span class="ident" id="5230160">Pos</span><span class="op" id="5230163">.</span><span class="ident" id="5230164">Line</span>&nbsp;<span class="op" id="5230169">==</span>&nbsp;<span class="ident" id="5230172"><a href="/go/parser/parser.go.html#5229897">epos</a></span><span class="op" id="5230176">.</span><span class="ident" id="5230177">Line</span>&nbsp;<span class="op" id="5230182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230187">return</span>&nbsp;<span class="comment" id="5230194">//&nbsp;discard&nbsp;-&nbsp;likely&nbsp;a&nbsp;spurious&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5230233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230237">if</span>&nbsp;<span class="ident" id="5230240"><a href="/go/parser/parser.go.html#5230113">n</a></span>&nbsp;<span class="op" id="5230242">&gt;</span>&nbsp;<span class="num" id="5230244">10</span>&nbsp;<span class="op" id="5230247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5230252">panic</span><span class="op" id="5230257">(</span><span class="ident" id="5230258"><a href="/go/parser/parser.go.html#5229826">bailout</a></span><span class="op" id="5230265">{</span><span class="op" id="5230266">}</span><span class="op" id="5230267">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5230271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5230274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5230278"><a href="/go/parser/parser.go.html#5229850">p</a></span><span class="op" id="5230279">.</span><span class="ident" id="5230280">errors</span><span class="op" id="5230286">.</span><span class="ident" id="5230287">Add</span><span class="op" id="5230290">(</span><span class="ident" id="5230291"><a href="/go/parser/parser.go.html#5229897">epos</a></span><span class="op" id="5230295">,</span>&nbsp;<span class="ident" id="5230297"><a href="/go/parser/parser.go.html#5229882">msg</a></span><span class="op" id="5230300">)</span><br>
<span class="lineno"></span><span class="op" id="5230302">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="5230305">func</span>&nbsp;<span class="op" id="5230310">(</span><span class="ident" id="5230311">p</span>&nbsp;<span class="op" id="5230313">*</span><span class="ident" id="5230314"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5230320">)</span>&nbsp;<span class="ident" id="5230322">errorExpected</span><span class="op" id="5230335">(</span><span class="ident" id="5230336">pos</span>&nbsp;<span class="ident" id="5230340"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5230345">.</span><span class="ident" id="5230346">Pos</span><span class="op" id="5230349">,</span>&nbsp;<span class="ident" id="5230351">msg</span>&nbsp;<span class="builtintype" id="5230355">string</span><span class="op" id="5230361">)</span>&nbsp;<span class="op" id="5230363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5230366"><a href="/go/parser/parser.go.html#5230351">msg</a></span>&nbsp;<span class="op" id="5230370">=</span>&nbsp;<span class="string" id="5230372">&#34;expected&nbsp;&#34;</span>&nbsp;<span class="op" id="5230384">+</span>&nbsp;<span class="ident" id="5230386"><a href="/go/parser/parser.go.html#5230351">msg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230391">if</span>&nbsp;<span class="ident" id="5230394"><a href="/go/parser/parser.go.html#5230336">pos</a></span>&nbsp;<span class="op" id="5230398">==</span>&nbsp;<span class="ident" id="5230401"><a href="/go/parser/parser.go.html#5230311">p</a></span><span class="op" id="5230402">.</span><span class="ident" id="5230403">pos</span>&nbsp;<span class="op" id="5230407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5230411">//&nbsp;the&nbsp;error&nbsp;happened&nbsp;at&nbsp;the&nbsp;current&nbsp;position;</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5230460">//&nbsp;make&nbsp;the&nbsp;error&nbsp;message&nbsp;more&nbsp;specific</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230502">if</span>&nbsp;<span class="ident" id="5230505"><a href="/go/parser/parser.go.html#5230311">p</a></span><span class="op" id="5230506">.</span><span class="ident" id="5230507">tok</span>&nbsp;<span class="op" id="5230511">==</span>&nbsp;<span class="ident" id="5230514"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5230519">.</span><span class="ident" id="5230520">SEMICOLON</span>&nbsp;<span class="op" id="5230530">&amp;&amp;</span>&nbsp;<span class="ident" id="5230533"><a href="/go/parser/parser.go.html#5230311">p</a></span><span class="op" id="5230534">.</span><span class="ident" id="5230535">lit</span>&nbsp;<span class="op" id="5230539">==</span>&nbsp;<span class="string" id="5230542">&#34;\n&#34;</span>&nbsp;<span class="op" id="5230547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5230552"><a href="/go/parser/parser.go.html#5230351">msg</a></span>&nbsp;<span class="op" id="5230556">+=</span>&nbsp;<span class="string" id="5230559">&#34;,&nbsp;found&nbsp;newline&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5230579">}</span>&nbsp;<span class="keyword" id="5230581">else</span>&nbsp;<span class="op" id="5230586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5230591"><a href="/go/parser/parser.go.html#5230351">msg</a></span>&nbsp;<span class="op" id="5230595">+=</span>&nbsp;<span class="string" id="5230598">&#34;,&nbsp;found&nbsp;&#39;&#34;</span>&nbsp;<span class="op" id="5230610">+</span>&nbsp;<span class="ident" id="5230612"><a href="/go/parser/parser.go.html#5230311">p</a></span><span class="op" id="5230613">.</span><span class="ident" id="5230614">tok</span><span class="op" id="5230617">.</span><span class="ident" id="5230618">String</span><span class="op" id="5230624">(</span><span class="op" id="5230625">)</span>&nbsp;<span class="op" id="5230627">+</span>&nbsp;<span class="string" id="5230629">&#34;&#39;&#34;</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230636">if</span>&nbsp;<span class="ident" id="5230639"><a href="/go/parser/parser.go.html#5230311">p</a></span><span class="op" id="5230640">.</span><span class="ident" id="5230641">tok</span><span class="op" id="5230644">.</span><span class="ident" id="5230645">IsLiteral</span><span class="op" id="5230654">(</span><span class="op" id="5230655">)</span>&nbsp;<span class="op" id="5230657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5230663"><a href="/go/parser/parser.go.html#5230351">msg</a></span>&nbsp;<span class="op" id="5230667">+=</span>&nbsp;<span class="string" id="5230670">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="5230674">+</span>&nbsp;<span class="ident" id="5230676"><a href="/go/parser/parser.go.html#5230311">p</a></span><span class="op" id="5230677">.</span><span class="ident" id="5230678">lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5230685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5230689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5230692">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5230695"><a href="/go/parser/parser.go.html#5230311">p</a></span><span class="op" id="5230696">.</span><span class="builtintype" id="5230697">error</span><span class="op" id="5230702">(</span><span class="ident" id="5230703"><a href="/go/parser/parser.go.html#5230336">pos</a></span><span class="op" id="5230706">,</span>&nbsp;<span class="ident" id="5230708"><a href="/go/parser/parser.go.html#5230351">msg</a></span><span class="op" id="5230711">)</span><br>
<span class="lineno"></span><span class="op" id="5230713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5230716">func</span>&nbsp;<span class="op" id="5230721">(</span><span class="ident" id="5230722">p</span>&nbsp;<span class="op" id="5230724">*</span><span class="ident" id="5230725"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5230731">)</span>&nbsp;<span class="ident" id="5230733">expect</span><span class="op" id="5230739">(</span><span class="ident" id="5230740">tok</span>&nbsp;<span class="ident" id="5230744"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5230749">.</span><span class="ident" id="5230750">Token</span><span class="op" id="5230755">)</span>&nbsp;<span class="ident" id="5230757"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5230762">.</span><span class="ident" id="5230763">Pos</span>&nbsp;<span class="op" id="5230767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5230770">pos</span>&nbsp;<span class="op" id="5230774">:=</span>&nbsp;<span class="ident" id="5230777"><a href="/go/parser/parser.go.html#5230722">p</a></span><span class="op" id="5230778">.</span><span class="ident" id="5230779">pos</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230784">if</span>&nbsp;<span class="ident" id="5230787"><a href="/go/parser/parser.go.html#5230722">p</a></span><span class="op" id="5230788">.</span><span class="ident" id="5230789">tok</span>&nbsp;<span class="op" id="5230793">!=</span>&nbsp;<span class="ident" id="5230796"><a href="/go/parser/parser.go.html#5230740">tok</a></span>&nbsp;<span class="op" id="5230800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5230804"><a href="/go/parser/parser.go.html#5230722">p</a></span><span class="op" id="5230805">.</span><span class="ident" id="5230806">errorExpected</span><span class="op" id="5230819">(</span><span class="ident" id="5230820"><a href="/go/parser/parser.go.html#5230770">pos</a></span><span class="op" id="5230823">,</span>&nbsp;<span class="string" id="5230825">&#34;&#39;&#34;</span><span class="op" id="5230828">+</span><span class="ident" id="5230829"><a href="/go/parser/parser.go.html#5230740">tok</a></span><span class="op" id="5230832">.</span><span class="ident" id="5230833">String</span><span class="op" id="5230839">(</span><span class="op" id="5230840">)</span><span class="op" id="5230841">+</span><span class="string" id="5230842">&#34;&#39;&#34;</span><span class="op" id="5230845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5230848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5230851"><a href="/go/parser/parser.go.html#5230722">p</a></span><span class="op" id="5230852">.</span><span class="ident" id="5230853">next</span><span class="op" id="5230857">(</span><span class="op" id="5230858">)</span>&nbsp;<span class="comment" id="5230860">//&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5230878">return</span>&nbsp;<span class="ident" id="5230885"><a href="/go/parser/parser.go.html#5230770">pos</a></span><br>
<span class="lineno">390</span><span class="op" id="5230889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5230892">//&nbsp;expectClosing&nbsp;is&nbsp;like&nbsp;expect&nbsp;but&nbsp;provides&nbsp;a&nbsp;better&nbsp;error&nbsp;message</span><br>
<span class="lineno"></span><span class="comment" id="5230960">//&nbsp;for&nbsp;the&nbsp;common&nbsp;case&nbsp;of&nbsp;a&nbsp;missing&nbsp;comma&nbsp;before&nbsp;a&nbsp;newline.</span><br>
<span class="lineno"></span><span class="comment" id="5231020">//</span><br>
<span class="lineno">395</span><span class="keyword" id="5231023">func</span>&nbsp;<span class="op" id="5231028">(</span><span class="ident" id="5231029">p</span>&nbsp;<span class="op" id="5231031">*</span><span class="ident" id="5231032"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5231038">)</span>&nbsp;<span class="ident" id="5231040">expectClosing</span><span class="op" id="5231053">(</span><span class="ident" id="5231054">tok</span>&nbsp;<span class="ident" id="5231058"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5231063">.</span><span class="ident" id="5231064">Token</span><span class="op" id="5231069">,</span>&nbsp;<span class="ident" id="5231071">context</span>&nbsp;<span class="builtintype" id="5231079">string</span><span class="op" id="5231085">)</span>&nbsp;<span class="ident" id="5231087"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5231092">.</span><span class="ident" id="5231093">Pos</span>&nbsp;<span class="op" id="5231097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5231100">if</span>&nbsp;<span class="ident" id="5231103"><a href="/go/parser/parser.go.html#5231029">p</a></span><span class="op" id="5231104">.</span><span class="ident" id="5231105">tok</span>&nbsp;<span class="op" id="5231109">!=</span>&nbsp;<span class="ident" id="5231112"><a href="/go/parser/parser.go.html#5231054">tok</a></span>&nbsp;<span class="op" id="5231116">&amp;&amp;</span>&nbsp;<span class="ident" id="5231119"><a href="/go/parser/parser.go.html#5231029">p</a></span><span class="op" id="5231120">.</span><span class="ident" id="5231121">tok</span>&nbsp;<span class="op" id="5231125">==</span>&nbsp;<span class="ident" id="5231128"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5231133">.</span><span class="ident" id="5231134">SEMICOLON</span>&nbsp;<span class="op" id="5231144">&amp;&amp;</span>&nbsp;<span class="ident" id="5231147"><a href="/go/parser/parser.go.html#5231029">p</a></span><span class="op" id="5231148">.</span><span class="ident" id="5231149">lit</span>&nbsp;<span class="op" id="5231153">==</span>&nbsp;<span class="string" id="5231156">&#34;\n&#34;</span>&nbsp;<span class="op" id="5231161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5231165"><a href="/go/parser/parser.go.html#5231029">p</a></span><span class="op" id="5231166">.</span><span class="builtintype" id="5231167">error</span><span class="op" id="5231172">(</span><span class="ident" id="5231173"><a href="/go/parser/parser.go.html#5231029">p</a></span><span class="op" id="5231174">.</span><span class="ident" id="5231175">pos</span><span class="op" id="5231178">,</span>&nbsp;<span class="string" id="5231180">&#34;missing&nbsp;&#39;,&#39;&nbsp;before&nbsp;newline&nbsp;in&nbsp;&#34;</span><span class="op" id="5231212">+</span><span class="ident" id="5231213"><a href="/go/parser/parser.go.html#5231071">context</a></span><span class="op" id="5231220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5231224"><a href="/go/parser/parser.go.html#5231029">p</a></span><span class="op" id="5231225">.</span><span class="ident" id="5231226">next</span><span class="op" id="5231230">(</span><span class="op" id="5231231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5231234">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5231237">return</span>&nbsp;<span class="ident" id="5231244"><a href="/go/parser/parser.go.html#5231029">p</a></span><span class="op" id="5231245">.</span><span class="ident" id="5231246">expect</span><span class="op" id="5231252">(</span><span class="ident" id="5231253"><a href="/go/parser/parser.go.html#5231054">tok</a></span><span class="op" id="5231256">)</span><br>
<span class="lineno"></span><span class="op" id="5231258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5231261">func</span>&nbsp;<span class="op" id="5231266">(</span><span class="ident" id="5231267">p</span>&nbsp;<span class="op" id="5231269">*</span><span class="ident" id="5231270"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5231276">)</span>&nbsp;<span class="ident" id="5231278">expectSemi</span><span class="op" id="5231288">(</span><span class="op" id="5231289">)</span>&nbsp;<span class="op" id="5231291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5231294">//&nbsp;semicolon&nbsp;is&nbsp;optional&nbsp;before&nbsp;a&nbsp;closing&nbsp;&#39;)&#39;&nbsp;or&nbsp;&#39;}&#39;</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5231348">if</span>&nbsp;<span class="ident" id="5231351"><a href="/go/parser/parser.go.html#5231267">p</a></span><span class="op" id="5231352">.</span><span class="ident" id="5231353">tok</span>&nbsp;<span class="op" id="5231357">!=</span>&nbsp;<span class="ident" id="5231360"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5231365">.</span><span class="ident" id="5231366">RPAREN</span>&nbsp;<span class="op" id="5231373">&amp;&amp;</span>&nbsp;<span class="ident" id="5231376"><a href="/go/parser/parser.go.html#5231267">p</a></span><span class="op" id="5231377">.</span><span class="ident" id="5231378">tok</span>&nbsp;<span class="op" id="5231382">!=</span>&nbsp;<span class="ident" id="5231385"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5231390">.</span><span class="ident" id="5231391">RBRACE</span>&nbsp;<span class="op" id="5231398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5231402">if</span>&nbsp;<span class="ident" id="5231405"><a href="/go/parser/parser.go.html#5231267">p</a></span><span class="op" id="5231406">.</span><span class="ident" id="5231407">tok</span>&nbsp;<span class="op" id="5231411">==</span>&nbsp;<span class="ident" id="5231414"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5231419">.</span><span class="ident" id="5231420">SEMICOLON</span>&nbsp;<span class="op" id="5231430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5231435"><a href="/go/parser/parser.go.html#5231267">p</a></span><span class="op" id="5231436">.</span><span class="ident" id="5231437">next</span><span class="op" id="5231441">(</span><span class="op" id="5231442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5231446">}</span>&nbsp;<span class="keyword" id="5231448">else</span>&nbsp;<span class="op" id="5231453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5231458"><a href="/go/parser/parser.go.html#5231267">p</a></span><span class="op" id="5231459">.</span><span class="ident" id="5231460">errorExpected</span><span class="op" id="5231473">(</span><span class="ident" id="5231474"><a href="/go/parser/parser.go.html#5231267">p</a></span><span class="op" id="5231475">.</span><span class="ident" id="5231476">pos</span><span class="op" id="5231479">,</span>&nbsp;<span class="string" id="5231481">&#34;&#39;;&#39;&#34;</span><span class="op" id="5231486">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5231491"><a href="/go/parser/parser.go.html#5231977">syncStmt</a></span><span class="op" id="5231499">(</span><span class="ident" id="5231500"><a href="/go/parser/parser.go.html#5231267">p</a></span><span class="op" id="5231501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5231505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5231508">}</span><br>
<span class="lineno"></span><span class="op" id="5231510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">415</span><span class="keyword" id="5231513">func</span>&nbsp;<span class="op" id="5231518">(</span><span class="ident" id="5231519">p</span>&nbsp;<span class="op" id="5231521">*</span><span class="ident" id="5231522"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5231528">)</span>&nbsp;<span class="ident" id="5231530">atComma</span><span class="op" id="5231537">(</span><span class="ident" id="5231538">context</span>&nbsp;<span class="builtintype" id="5231546">string</span><span class="op" id="5231552">)</span>&nbsp;<span class="builtintype" id="5231554">bool</span>&nbsp;<span class="op" id="5231559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5231562">if</span>&nbsp;<span class="ident" id="5231565"><a href="/go/parser/parser.go.html#5231519">p</a></span><span class="op" id="5231566">.</span><span class="ident" id="5231567">tok</span>&nbsp;<span class="op" id="5231571">==</span>&nbsp;<span class="ident" id="5231574"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5231579">.</span><span class="ident" id="5231580">COMMA</span>&nbsp;<span class="op" id="5231586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5231590">return</span>&nbsp;<span class="builtintype" id="5231597">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5231603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5231606">if</span>&nbsp;<span class="ident" id="5231609"><a href="/go/parser/parser.go.html#5231519">p</a></span><span class="op" id="5231610">.</span><span class="ident" id="5231611">tok</span>&nbsp;<span class="op" id="5231615">==</span>&nbsp;<span class="ident" id="5231618"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5231623">.</span><span class="ident" id="5231624">SEMICOLON</span>&nbsp;<span class="op" id="5231634">&amp;&amp;</span>&nbsp;<span class="ident" id="5231637"><a href="/go/parser/parser.go.html#5231519">p</a></span><span class="op" id="5231638">.</span><span class="ident" id="5231639">lit</span>&nbsp;<span class="op" id="5231643">==</span>&nbsp;<span class="string" id="5231646">&#34;\n&#34;</span>&nbsp;<span class="op" id="5231651">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5231655"><a href="/go/parser/parser.go.html#5231519">p</a></span><span class="op" id="5231656">.</span><span class="builtintype" id="5231657">error</span><span class="op" id="5231662">(</span><span class="ident" id="5231663"><a href="/go/parser/parser.go.html#5231519">p</a></span><span class="op" id="5231664">.</span><span class="ident" id="5231665">pos</span><span class="op" id="5231668">,</span>&nbsp;<span class="string" id="5231670">&#34;missing&nbsp;&#39;,&#39;&nbsp;before&nbsp;newline&nbsp;in&nbsp;&#34;</span><span class="op" id="5231702">+</span><span class="ident" id="5231703"><a href="/go/parser/parser.go.html#5231538">context</a></span><span class="op" id="5231710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5231714">return</span>&nbsp;<span class="builtintype" id="5231721">true</span>&nbsp;<span class="comment" id="5231726">//&nbsp;&#34;insert&#34;&nbsp;the&nbsp;comma&nbsp;and&nbsp;continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5231763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5231766">return</span>&nbsp;<span class="builtintype" id="5231773">false</span><br>
<span class="lineno">425</span><span class="op" id="5231779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5231782">func</span>&nbsp;<span class="ident" id="5231787">assert</span><span class="op" id="5231793">(</span><span class="ident" id="5231794">cond</span>&nbsp;<span class="builtintype" id="5231799">bool</span><span class="op" id="5231803">,</span>&nbsp;<span class="ident" id="5231805">msg</span>&nbsp;<span class="builtintype" id="5231809">string</span><span class="op" id="5231815">)</span>&nbsp;<span class="op" id="5231817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5231820">if</span>&nbsp;<span class="op" id="5231823">!</span><span class="ident" id="5231824"><a href="/go/parser/parser.go.html#5231794">cond</a></span>&nbsp;<span class="op" id="5231829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5231833">panic</span><span class="op" id="5231838">(</span><span class="string" id="5231839">&#34;go/parser&nbsp;internal&nbsp;error:&nbsp;&#34;</span>&nbsp;<span class="op" id="5231868">+</span>&nbsp;<span class="ident" id="5231870"><a href="/go/parser/parser.go.html#5231805">msg</a></span><span class="op" id="5231873">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5231876">}</span><br>
<span class="lineno"></span><span class="op" id="5231878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5231881">//&nbsp;syncStmt&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;statement.</span><br>
<span class="lineno"></span><span class="comment" id="5231925">//&nbsp;Used&nbsp;for&nbsp;synchronization&nbsp;after&nbsp;an&nbsp;error.</span><br>
<span class="lineno">435</span><span class="comment" id="5231969">//</span><br>
<span class="lineno"></span><span class="keyword" id="5231972">func</span>&nbsp;<span class="ident" id="5231977">syncStmt</span><span class="op" id="5231985">(</span><span class="ident" id="5231986">p</span>&nbsp;<span class="op" id="5231988">*</span><span class="ident" id="5231989"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5231995">)</span>&nbsp;<span class="op" id="5231997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232000">for</span>&nbsp;<span class="op" id="5232004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232008">switch</span>&nbsp;<span class="ident" id="5232015"><a href="/go/parser/parser.go.html#5231986">p</a></span><span class="op" id="5232016">.</span><span class="ident" id="5232017">tok</span>&nbsp;<span class="op" id="5232021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232025">case</span>&nbsp;<span class="ident" id="5232030"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232035">.</span><span class="ident" id="5232036">BREAK</span><span class="op" id="5232041">,</span>&nbsp;<span class="ident" id="5232043"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232048">.</span><span class="ident" id="5232049">CONST</span><span class="op" id="5232054">,</span>&nbsp;<span class="ident" id="5232056"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232061">.</span><span class="ident" id="5232062">CONTINUE</span><span class="op" id="5232070">,</span>&nbsp;<span class="ident" id="5232072"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232077">.</span><span class="ident" id="5232078">DEFER</span><span class="op" id="5232083">,</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5232088"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232093">.</span><span class="ident" id="5232094">FALLTHROUGH</span><span class="op" id="5232105">,</span>&nbsp;<span class="ident" id="5232107"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232112">.</span><span class="ident" id="5232113">FOR</span><span class="op" id="5232116">,</span>&nbsp;<span class="ident" id="5232118"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232123">.</span><span class="ident" id="5232124">GO</span><span class="op" id="5232126">,</span>&nbsp;<span class="ident" id="5232128"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232133">.</span><span class="ident" id="5232134">GOTO</span><span class="op" id="5232138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5232143"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232148">.</span><span class="ident" id="5232149">IF</span><span class="op" id="5232151">,</span>&nbsp;<span class="ident" id="5232153"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232158">.</span><span class="ident" id="5232159">RETURN</span><span class="op" id="5232165">,</span>&nbsp;<span class="ident" id="5232167"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232172">.</span><span class="ident" id="5232173">SELECT</span><span class="op" id="5232179">,</span>&nbsp;<span class="ident" id="5232181"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232186">.</span><span class="ident" id="5232187">SWITCH</span><span class="op" id="5232193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5232198"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232203">.</span><span class="ident" id="5232204">TYPE</span><span class="op" id="5232208">,</span>&nbsp;<span class="ident" id="5232210"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5232215">.</span><span class="ident" id="5232216">VAR</span><span class="op" id="5232219">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232224">//&nbsp;Return&nbsp;only&nbsp;if&nbsp;parser&nbsp;made&nbsp;some&nbsp;progress&nbsp;since&nbsp;last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232282">//&nbsp;sync&nbsp;or&nbsp;if&nbsp;it&nbsp;has&nbsp;not&nbsp;reached&nbsp;10&nbsp;sync&nbsp;calls&nbsp;without</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232340">//&nbsp;progress.&nbsp;Otherwise&nbsp;consume&nbsp;at&nbsp;least&nbsp;one&nbsp;token&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232396">//&nbsp;avoid&nbsp;an&nbsp;endless&nbsp;parser&nbsp;loop&nbsp;(it&nbsp;is&nbsp;possible&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232452">//&nbsp;both&nbsp;parseOperand&nbsp;and&nbsp;parseStmt&nbsp;call&nbsp;syncStmt&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232508">//&nbsp;correctly&nbsp;do&nbsp;not&nbsp;advance,&nbsp;thus&nbsp;the&nbsp;need&nbsp;for&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232562">//&nbsp;invocation&nbsp;limit&nbsp;p.syncCnt).</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232597">if</span>&nbsp;<span class="ident" id="5232600"><a href="/go/parser/parser.go.html#5231986">p</a></span><span class="op" id="5232601">.</span><span class="ident" id="5232602">pos</span>&nbsp;<span class="op" id="5232606">==</span>&nbsp;<span class="ident" id="5232609"><a href="/go/parser/parser.go.html#5231986">p</a></span><span class="op" id="5232610">.</span><span class="ident" id="5232611">syncPos</span>&nbsp;<span class="op" id="5232619">&amp;&amp;</span>&nbsp;<span class="ident" id="5232622"><a href="/go/parser/parser.go.html#5231986">p</a></span><span class="op" id="5232623">.</span><span class="ident" id="5232624">syncCnt</span>&nbsp;<span class="op" id="5232632">&lt;</span>&nbsp;<span class="num" id="5232634">10</span>&nbsp;<span class="op" id="5232637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5232643"><a href="/go/parser/parser.go.html#5231986">p</a></span><span class="op" id="5232644">.</span><span class="ident" id="5232645">syncCnt</span><span class="op" id="5232652">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232659">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5232669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232674">if</span>&nbsp;<span class="ident" id="5232677"><a href="/go/parser/parser.go.html#5231986">p</a></span><span class="op" id="5232678">.</span><span class="ident" id="5232679">pos</span>&nbsp;<span class="op" id="5232683">&gt;</span>&nbsp;<span class="ident" id="5232685"><a href="/go/parser/parser.go.html#5231986">p</a></span><span class="op" id="5232686">.</span><span class="ident" id="5232687">syncPos</span>&nbsp;<span class="op" id="5232695">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5232701"><a href="/go/parser/parser.go.html#5231986">p</a></span><span class="op" id="5232702">.</span><span class="ident" id="5232703">syncPos</span>&nbsp;<span class="op" id="5232711">=</span>&nbsp;<span class="ident" id="5232713"><a href="/go/parser/parser.go.html#5231986">p</a></span><span class="op" id="5232714">.</span><span class="ident" id="5232715">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5232723"><a href="/go/parser/parser.go.html#5231986">p</a></span><span class="op" id="5232724">.</span><span class="ident" id="5232725">syncCnt</span>&nbsp;<span class="op" id="5232733">=</span>&nbsp;<span class="num" id="5232735">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5232741">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5232751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232756">//&nbsp;Reaching&nbsp;here&nbsp;indicates&nbsp;a&nbsp;parser&nbsp;bug,&nbsp;likely&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232810">//&nbsp;incorrect&nbsp;token&nbsp;list&nbsp;in&nbsp;this&nbsp;function,&nbsp;but&nbsp;it&nbsp;only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232867">//&nbsp;leads&nbsp;to&nbsp;skipping&nbsp;of&nbsp;possibly&nbsp;correct&nbsp;code&nbsp;if&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232921">//&nbsp;previous&nbsp;error&nbsp;is&nbsp;present,&nbsp;and&nbsp;thus&nbsp;is&nbsp;preferred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5232976">//&nbsp;over&nbsp;a&nbsp;non-terminating&nbsp;parse.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233011">case</span>&nbsp;<span class="ident" id="5233016"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5233021">.</span><span class="ident" id="5233022">EOF</span><span class="op" id="5233025">:</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233030">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5233039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233043"><a href="/go/parser/parser.go.html#5231986">p</a></span><span class="op" id="5233044">.</span><span class="ident" id="5233045">next</span><span class="op" id="5233049">(</span><span class="op" id="5233050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5233053">}</span><br>
<span class="lineno"></span><span class="op" id="5233055">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="comment" id="5233058">//&nbsp;syncDecl&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5233104">//&nbsp;Used&nbsp;for&nbsp;synchronization&nbsp;after&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5233148">//</span><br>
<span class="lineno"></span><span class="keyword" id="5233151">func</span>&nbsp;<span class="ident" id="5233156">syncDecl</span><span class="op" id="5233164">(</span><span class="ident" id="5233165">p</span>&nbsp;<span class="op" id="5233167">*</span><span class="ident" id="5233168"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5233174">)</span>&nbsp;<span class="op" id="5233176">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233179">for</span>&nbsp;<span class="op" id="5233183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233187">switch</span>&nbsp;<span class="ident" id="5233194"><a href="/go/parser/parser.go.html#5233165">p</a></span><span class="op" id="5233195">.</span><span class="ident" id="5233196">tok</span>&nbsp;<span class="op" id="5233200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233204">case</span>&nbsp;<span class="ident" id="5233209"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5233214">.</span><span class="ident" id="5233215">CONST</span><span class="op" id="5233220">,</span>&nbsp;<span class="ident" id="5233222"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5233227">.</span><span class="ident" id="5233228">TYPE</span><span class="op" id="5233232">,</span>&nbsp;<span class="ident" id="5233234"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5233239">.</span><span class="ident" id="5233240">VAR</span><span class="op" id="5233243">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5233248">//&nbsp;see&nbsp;comments&nbsp;in&nbsp;syncStmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233279">if</span>&nbsp;<span class="ident" id="5233282"><a href="/go/parser/parser.go.html#5233165">p</a></span><span class="op" id="5233283">.</span><span class="ident" id="5233284">pos</span>&nbsp;<span class="op" id="5233288">==</span>&nbsp;<span class="ident" id="5233291"><a href="/go/parser/parser.go.html#5233165">p</a></span><span class="op" id="5233292">.</span><span class="ident" id="5233293">syncPos</span>&nbsp;<span class="op" id="5233301">&amp;&amp;</span>&nbsp;<span class="ident" id="5233304"><a href="/go/parser/parser.go.html#5233165">p</a></span><span class="op" id="5233305">.</span><span class="ident" id="5233306">syncCnt</span>&nbsp;<span class="op" id="5233314">&lt;</span>&nbsp;<span class="num" id="5233316">10</span>&nbsp;<span class="op" id="5233319">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233325"><a href="/go/parser/parser.go.html#5233165">p</a></span><span class="op" id="5233326">.</span><span class="ident" id="5233327">syncCnt</span><span class="op" id="5233334">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233341">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5233351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233356">if</span>&nbsp;<span class="ident" id="5233359"><a href="/go/parser/parser.go.html#5233165">p</a></span><span class="op" id="5233360">.</span><span class="ident" id="5233361">pos</span>&nbsp;<span class="op" id="5233365">&gt;</span>&nbsp;<span class="ident" id="5233367"><a href="/go/parser/parser.go.html#5233165">p</a></span><span class="op" id="5233368">.</span><span class="ident" id="5233369">syncPos</span>&nbsp;<span class="op" id="5233377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233383"><a href="/go/parser/parser.go.html#5233165">p</a></span><span class="op" id="5233384">.</span><span class="ident" id="5233385">syncPos</span>&nbsp;<span class="op" id="5233393">=</span>&nbsp;<span class="ident" id="5233395"><a href="/go/parser/parser.go.html#5233165">p</a></span><span class="op" id="5233396">.</span><span class="ident" id="5233397">pos</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233405"><a href="/go/parser/parser.go.html#5233165">p</a></span><span class="op" id="5233406">.</span><span class="ident" id="5233407">syncCnt</span>&nbsp;<span class="op" id="5233415">=</span>&nbsp;<span class="num" id="5233417">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233423">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5233433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233437">case</span>&nbsp;<span class="ident" id="5233442"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5233447">.</span><span class="ident" id="5233448">EOF</span><span class="op" id="5233451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5233456">return</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5233465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5233469"><a href="/go/parser/parser.go.html#5233165">p</a></span><span class="op" id="5233470">.</span><span class="ident" id="5233471">next</span><span class="op" id="5233475">(</span><span class="op" id="5233476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5233479">}</span><br>
<span class="lineno"></span><span class="op" id="5233481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span><span class="comment" id="5233484">//&nbsp;safePos&nbsp;returns&nbsp;a&nbsp;valid&nbsp;file&nbsp;position&nbsp;for&nbsp;a&nbsp;given&nbsp;position:&nbsp;If&nbsp;pos</span><br>
<span class="lineno"></span><span class="comment" id="5233554">//&nbsp;is&nbsp;valid&nbsp;to&nbsp;begin&nbsp;with,&nbsp;safePos&nbsp;returns&nbsp;pos.&nbsp;If&nbsp;pos&nbsp;is&nbsp;out-of-range,</span><br>
<span class="lineno"></span><span class="comment" id="5233626">//&nbsp;safePos&nbsp;returns&nbsp;the&nbsp;EOF&nbsp;position.</span><br>
<span class="lineno"></span><span class="comment" id="5233663">//</span><br>
<span class="lineno"></span><span class="comment" id="5233666">//&nbsp;This&nbsp;is&nbsp;hack&nbsp;to&nbsp;work&nbsp;around&nbsp;&#34;artificial&#34;&nbsp;end&nbsp;positions&nbsp;in&nbsp;the&nbsp;AST&nbsp;which</span><br>
<span class="lineno">500</span><span class="comment" id="5233741">//&nbsp;are&nbsp;computed&nbsp;by&nbsp;adding&nbsp;1&nbsp;to&nbsp;(presumably&nbsp;valid)&nbsp;token&nbsp;positions.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5233815">//&nbsp;token&nbsp;positions&nbsp;are&nbsp;invalid&nbsp;due&nbsp;to&nbsp;parse&nbsp;errors,&nbsp;the&nbsp;resulting&nbsp;end&nbsp;position</span><br>
<span class="lineno"></span><span class="comment" id="5233894">//&nbsp;may&nbsp;be&nbsp;past&nbsp;the&nbsp;file&#39;s&nbsp;EOF&nbsp;position,&nbsp;which&nbsp;would&nbsp;lead&nbsp;to&nbsp;panics&nbsp;if&nbsp;used</span><br>
<span class="lineno"></span><span class="comment" id="5233969">//&nbsp;later&nbsp;on.</span><br>
<span class="lineno"></span><span class="comment" id="5233982">//</span><br>
<span class="lineno">505</span><span class="keyword" id="5233985">func</span>&nbsp;<span class="op" id="5233990">(</span><span class="ident" id="5233991">p</span>&nbsp;<span class="op" id="5233993">*</span><span class="ident" id="5233994"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5234000">)</span>&nbsp;<span class="ident" id="5234002">safePos</span><span class="op" id="5234009">(</span><span class="ident" id="5234010">pos</span>&nbsp;<span class="ident" id="5234014"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5234019">.</span><span class="ident" id="5234020">Pos</span><span class="op" id="5234023">)</span>&nbsp;<span class="op" id="5234025">(</span><span class="ident" id="5234026">res</span>&nbsp;<span class="ident" id="5234030"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5234035">.</span><span class="ident" id="5234036">Pos</span><span class="op" id="5234039">)</span>&nbsp;<span class="op" id="5234041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234044">defer</span>&nbsp;<span class="keyword" id="5234050">func</span><span class="op" id="5234054">(</span><span class="op" id="5234055">)</span>&nbsp;<span class="op" id="5234057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234061">if</span>&nbsp;<span class="builtinfunc" id="5234064">recover</span><span class="op" id="5234071">(</span><span class="op" id="5234072">)</span>&nbsp;<span class="op" id="5234074">!=</span>&nbsp;<span class="ident" id="5234077">nil</span>&nbsp;<span class="op" id="5234081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234086"><a href="/go/parser/parser.go.html#5234026">res</a></span>&nbsp;<span class="op" id="5234090">=</span>&nbsp;<span class="ident" id="5234092"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5234097">.</span><span class="ident" id="5234098">Pos</span><span class="op" id="5234101">(</span><span class="ident" id="5234102"><a href="/go/parser/parser.go.html#5233991">p</a></span><span class="op" id="5234103">.</span><span class="ident" id="5234104">file</span><span class="op" id="5234108">.</span><span class="ident" id="5234109">Base</span><span class="op" id="5234113">(</span><span class="op" id="5234114">)</span>&nbsp;<span class="op" id="5234116">+</span>&nbsp;<span class="ident" id="5234118"><a href="/go/parser/parser.go.html#5233991">p</a></span><span class="op" id="5234119">.</span><span class="ident" id="5234120">file</span><span class="op" id="5234124">.</span><span class="ident" id="5234125">Size</span><span class="op" id="5234129">(</span><span class="op" id="5234130">)</span><span class="op" id="5234131">)</span>&nbsp;<span class="comment" id="5234133">//&nbsp;EOF&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5234151">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5234154">}</span><span class="op" id="5234155">(</span><span class="op" id="5234156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234159">_</span>&nbsp;<span class="op" id="5234161">=</span>&nbsp;<span class="ident" id="5234163"><a href="/go/parser/parser.go.html#5233991">p</a></span><span class="op" id="5234164">.</span><span class="ident" id="5234165">file</span><span class="op" id="5234169">.</span><span class="ident" id="5234170">Offset</span><span class="op" id="5234176">(</span><span class="ident" id="5234177"><a href="/go/parser/parser.go.html#5234010">pos</a></span><span class="op" id="5234180">)</span>&nbsp;<span class="comment" id="5234182">//&nbsp;trigger&nbsp;a&nbsp;panic&nbsp;if&nbsp;position&nbsp;is&nbsp;out-of-range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234230">return</span>&nbsp;<span class="ident" id="5234237"><a href="/go/parser/parser.go.html#5234010">pos</a></span><br>
<span class="lineno"></span><span class="op" id="5234241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="comment" id="5234244">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5234324">//&nbsp;Identifiers</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5234340">func</span>&nbsp;<span class="op" id="5234345">(</span><span class="ident" id="5234346">p</span>&nbsp;<span class="op" id="5234348">*</span><span class="ident" id="5234349"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5234355">)</span>&nbsp;<span class="ident" id="5234357">parseIdent</span><span class="op" id="5234367">(</span><span class="op" id="5234368">)</span>&nbsp;<span class="op" id="5234370">*</span><span class="ident" id="5234371"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5234374">.</span><span class="ident" id="5234375">Ident</span>&nbsp;<span class="op" id="5234381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234384">pos</span>&nbsp;<span class="op" id="5234388">:=</span>&nbsp;<span class="ident" id="5234391"><a href="/go/parser/parser.go.html#5234346">p</a></span><span class="op" id="5234392">.</span><span class="ident" id="5234393">pos</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234398">name</span>&nbsp;<span class="op" id="5234403">:=</span>&nbsp;<span class="string" id="5234406">&#34;_&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234411">if</span>&nbsp;<span class="ident" id="5234414"><a href="/go/parser/parser.go.html#5234346">p</a></span><span class="op" id="5234415">.</span><span class="ident" id="5234416">tok</span>&nbsp;<span class="op" id="5234420">==</span>&nbsp;<span class="ident" id="5234423"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5234428">.</span><span class="ident" id="5234429">IDENT</span>&nbsp;<span class="op" id="5234435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234439"><a href="/go/parser/parser.go.html#5234398">name</a></span>&nbsp;<span class="op" id="5234444">=</span>&nbsp;<span class="ident" id="5234446"><a href="/go/parser/parser.go.html#5234346">p</a></span><span class="op" id="5234447">.</span><span class="ident" id="5234448">lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234454"><a href="/go/parser/parser.go.html#5234346">p</a></span><span class="op" id="5234455">.</span><span class="ident" id="5234456">next</span><span class="op" id="5234460">(</span><span class="op" id="5234461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5234464">}</span>&nbsp;<span class="keyword" id="5234466">else</span>&nbsp;<span class="op" id="5234471">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234475"><a href="/go/parser/parser.go.html#5234346">p</a></span><span class="op" id="5234476">.</span><span class="ident" id="5234477">expect</span><span class="op" id="5234483">(</span><span class="ident" id="5234484"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5234489">.</span><span class="ident" id="5234490">IDENT</span><span class="op" id="5234495">)</span>&nbsp;<span class="comment" id="5234497">//&nbsp;use&nbsp;expect()&nbsp;error&nbsp;handling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5234529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234532">return</span>&nbsp;<span class="op" id="5234539">&amp;</span><span class="ident" id="5234540"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5234543">.</span><span class="ident" id="5234544">Ident</span><span class="op" id="5234549">{</span><span class="ident" id="5234550">NamePos</span><span class="op" id="5234557">:</span>&nbsp;<span class="ident" id="5234559"><a href="/go/parser/parser.go.html#5234384">pos</a></span><span class="op" id="5234562">,</span>&nbsp;<span class="ident" id="5234564">Name</span><span class="op" id="5234568">:</span>&nbsp;<span class="ident" id="5234570"><a href="/go/parser/parser.go.html#5234398">name</a></span><span class="op" id="5234574">}</span><br>
<span class="lineno"></span><span class="op" id="5234576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span><span class="keyword" id="5234579">func</span>&nbsp;<span class="op" id="5234584">(</span><span class="ident" id="5234585">p</span>&nbsp;<span class="op" id="5234587">*</span><span class="ident" id="5234588"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5234594">)</span>&nbsp;<span class="ident" id="5234596">parseIdentList</span><span class="op" id="5234610">(</span><span class="op" id="5234611">)</span>&nbsp;<span class="op" id="5234613">(</span><span class="ident" id="5234614">list</span>&nbsp;<span class="op" id="5234619">[</span><span class="op" id="5234620">]</span><span class="op" id="5234621">*</span><span class="ident" id="5234622"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5234625">.</span><span class="ident" id="5234626">Ident</span><span class="op" id="5234631">)</span>&nbsp;<span class="op" id="5234633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234636">if</span>&nbsp;<span class="ident" id="5234639"><a href="/go/parser/parser.go.html#5234585">p</a></span><span class="op" id="5234640">.</span><span class="ident" id="5234641">trace</span>&nbsp;<span class="op" id="5234647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234651">defer</span>&nbsp;<span class="ident" id="5234657"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5234659">(</span><span class="ident" id="5234660"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5234665">(</span><span class="ident" id="5234666"><a href="/go/parser/parser.go.html#5234585">p</a></span><span class="op" id="5234667">,</span>&nbsp;<span class="string" id="5234669">&#34;IdentList&#34;</span><span class="op" id="5234680">)</span><span class="op" id="5234681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5234684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234688"><a href="/go/parser/parser.go.html#5234614">list</a></span>&nbsp;<span class="op" id="5234693">=</span>&nbsp;<span class="builtinfunc" id="5234695">append</span><span class="op" id="5234701">(</span><span class="ident" id="5234702"><a href="/go/parser/parser.go.html#5234614">list</a></span><span class="op" id="5234706">,</span>&nbsp;<span class="ident" id="5234708"><a href="/go/parser/parser.go.html#5234585">p</a></span><span class="op" id="5234709">.</span><span class="ident" id="5234710">parseIdent</span><span class="op" id="5234720">(</span><span class="op" id="5234721">)</span><span class="op" id="5234722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234725">for</span>&nbsp;<span class="ident" id="5234729"><a href="/go/parser/parser.go.html#5234585">p</a></span><span class="op" id="5234730">.</span><span class="ident" id="5234731">tok</span>&nbsp;<span class="op" id="5234735">==</span>&nbsp;<span class="ident" id="5234738"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5234743">.</span><span class="ident" id="5234744">COMMA</span>&nbsp;<span class="op" id="5234750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234754"><a href="/go/parser/parser.go.html#5234585">p</a></span><span class="op" id="5234755">.</span><span class="ident" id="5234756">next</span><span class="op" id="5234760">(</span><span class="op" id="5234761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5234765"><a href="/go/parser/parser.go.html#5234614">list</a></span>&nbsp;<span class="op" id="5234770">=</span>&nbsp;<span class="builtinfunc" id="5234772">append</span><span class="op" id="5234778">(</span><span class="ident" id="5234779"><a href="/go/parser/parser.go.html#5234614">list</a></span><span class="op" id="5234783">,</span>&nbsp;<span class="ident" id="5234785"><a href="/go/parser/parser.go.html#5234585">p</a></span><span class="op" id="5234786">.</span><span class="ident" id="5234787">parseIdent</span><span class="op" id="5234797">(</span><span class="op" id="5234798">)</span><span class="op" id="5234799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5234802">}</span><br>
<span class="lineno">540</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5234806">return</span><br>
<span class="lineno"></span><span class="op" id="5234813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5234816">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">545</span><span class="comment" id="5234896">//&nbsp;Common&nbsp;productions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5234919">//&nbsp;If&nbsp;lhs&nbsp;is&nbsp;set,&nbsp;result&nbsp;list&nbsp;elements&nbsp;which&nbsp;are&nbsp;identifiers&nbsp;are&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="5234998">func</span>&nbsp;<span class="op" id="5235003">(</span><span class="ident" id="5235004">p</span>&nbsp;<span class="op" id="5235006">*</span><span class="ident" id="5235007"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5235013">)</span>&nbsp;<span class="ident" id="5235015">parseExprList</span><span class="op" id="5235028">(</span><span class="ident" id="5235029">lhs</span>&nbsp;<span class="builtintype" id="5235033">bool</span><span class="op" id="5235037">)</span>&nbsp;<span class="op" id="5235039">(</span><span class="ident" id="5235040">list</span>&nbsp;<span class="op" id="5235045">[</span><span class="op" id="5235046">]</span><span class="ident" id="5235047"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5235050">.</span><span class="ident" id="5235051">Expr</span><span class="op" id="5235055">)</span>&nbsp;<span class="op" id="5235057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235060">if</span>&nbsp;<span class="ident" id="5235063"><a href="/go/parser/parser.go.html#5235004">p</a></span><span class="op" id="5235064">.</span><span class="ident" id="5235065">trace</span>&nbsp;<span class="op" id="5235071">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235075">defer</span>&nbsp;<span class="ident" id="5235081"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5235083">(</span><span class="ident" id="5235084"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5235089">(</span><span class="ident" id="5235090"><a href="/go/parser/parser.go.html#5235004">p</a></span><span class="op" id="5235091">,</span>&nbsp;<span class="string" id="5235093">&#34;ExpressionList&#34;</span><span class="op" id="5235109">)</span><span class="op" id="5235110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5235113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235117"><a href="/go/parser/parser.go.html#5235040">list</a></span>&nbsp;<span class="op" id="5235122">=</span>&nbsp;<span class="builtinfunc" id="5235124">append</span><span class="op" id="5235130">(</span><span class="ident" id="5235131"><a href="/go/parser/parser.go.html#5235040">list</a></span><span class="op" id="5235135">,</span>&nbsp;<span class="ident" id="5235137"><a href="/go/parser/parser.go.html#5235004">p</a></span><span class="op" id="5235138">.</span><span class="ident" id="5235139">checkExpr</span><span class="op" id="5235148">(</span><span class="ident" id="5235149"><a href="/go/parser/parser.go.html#5235004">p</a></span><span class="op" id="5235150">.</span><span class="ident" id="5235151">parseExpr</span><span class="op" id="5235160">(</span><span class="ident" id="5235161"><a href="/go/parser/parser.go.html#5235029">lhs</a></span><span class="op" id="5235164">)</span><span class="op" id="5235165">)</span><span class="op" id="5235166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235169">for</span>&nbsp;<span class="ident" id="5235173"><a href="/go/parser/parser.go.html#5235004">p</a></span><span class="op" id="5235174">.</span><span class="ident" id="5235175">tok</span>&nbsp;<span class="op" id="5235179">==</span>&nbsp;<span class="ident" id="5235182"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5235187">.</span><span class="ident" id="5235188">COMMA</span>&nbsp;<span class="op" id="5235194">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235198"><a href="/go/parser/parser.go.html#5235004">p</a></span><span class="op" id="5235199">.</span><span class="ident" id="5235200">next</span><span class="op" id="5235204">(</span><span class="op" id="5235205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235209"><a href="/go/parser/parser.go.html#5235040">list</a></span>&nbsp;<span class="op" id="5235214">=</span>&nbsp;<span class="builtinfunc" id="5235216">append</span><span class="op" id="5235222">(</span><span class="ident" id="5235223"><a href="/go/parser/parser.go.html#5235040">list</a></span><span class="op" id="5235227">,</span>&nbsp;<span class="ident" id="5235229"><a href="/go/parser/parser.go.html#5235004">p</a></span><span class="op" id="5235230">.</span><span class="ident" id="5235231">checkExpr</span><span class="op" id="5235240">(</span><span class="ident" id="5235241"><a href="/go/parser/parser.go.html#5235004">p</a></span><span class="op" id="5235242">.</span><span class="ident" id="5235243">parseExpr</span><span class="op" id="5235252">(</span><span class="ident" id="5235253"><a href="/go/parser/parser.go.html#5235029">lhs</a></span><span class="op" id="5235256">)</span><span class="op" id="5235257">)</span><span class="op" id="5235258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5235261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235265">return</span><br>
<span class="lineno">560</span><span class="op" id="5235272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5235275">func</span>&nbsp;<span class="op" id="5235280">(</span><span class="ident" id="5235281">p</span>&nbsp;<span class="op" id="5235283">*</span><span class="ident" id="5235284"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5235290">)</span>&nbsp;<span class="ident" id="5235292">parseLhsList</span><span class="op" id="5235304">(</span><span class="op" id="5235305">)</span>&nbsp;<span class="op" id="5235307">[</span><span class="op" id="5235308">]</span><span class="ident" id="5235309"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5235312">.</span><span class="ident" id="5235313">Expr</span>&nbsp;<span class="op" id="5235318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235321">old</span>&nbsp;<span class="op" id="5235325">:=</span>&nbsp;<span class="ident" id="5235328"><a href="/go/parser/parser.go.html#5235281">p</a></span><span class="op" id="5235329">.</span><span class="ident" id="5235330">inRhs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235337"><a href="/go/parser/parser.go.html#5235281">p</a></span><span class="op" id="5235338">.</span><span class="ident" id="5235339">inRhs</span>&nbsp;<span class="op" id="5235345">=</span>&nbsp;<span class="builtintype" id="5235347">false</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5235354">list</span>&nbsp;<span class="op" id="5235359">:=</span>&nbsp;<span class="ident" id="5235362"><a href="/go/parser/parser.go.html#5235281">p</a></span><span class="op" id="5235363">.</span><span class="ident" id="5235364">parseExprList</span><span class="op" id="5235377">(</span><span class="builtintype" id="5235378">true</span><span class="op" id="5235382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235385">switch</span>&nbsp;<span class="ident" id="5235392"><a href="/go/parser/parser.go.html#5235281">p</a></span><span class="op" id="5235393">.</span><span class="ident" id="5235394">tok</span>&nbsp;<span class="op" id="5235398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235401">case</span>&nbsp;<span class="ident" id="5235406"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5235411">.</span><span class="ident" id="5235412">DEFINE</span><span class="op" id="5235418">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235422">//&nbsp;lhs&nbsp;of&nbsp;a&nbsp;short&nbsp;variable&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235463">//&nbsp;but&nbsp;doesn&#39;t&nbsp;enter&nbsp;scope&nbsp;until&nbsp;later:</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235505">//&nbsp;caller&nbsp;must&nbsp;call&nbsp;p.shortVarDecl(p.makeIdentList(list))</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235565">//&nbsp;at&nbsp;appropriate&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5235590">case</span>&nbsp;<span class="ident" id="5235595"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5235600">.</span><span class="ident" id="5235601">COLON</span><span class="op" id="5235606">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235610">//&nbsp;lhs&nbsp;of&nbsp;a&nbsp;label&nbsp;declaration&nbsp;or&nbsp;a&nbsp;communication&nbsp;clause&nbsp;of&nbsp;a&nbsp;select</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235680">//&nbsp;statement&nbsp;(parseLhsList&nbsp;is&nbsp;not&nbsp;called&nbsp;when&nbsp;parsing&nbsp;the&nbsp;case&nbsp;clause</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235752">//&nbsp;of&nbsp;a&nbsp;switch&nbsp;statement):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235781">//&nbsp;-&nbsp;labels&nbsp;are&nbsp;declared&nbsp;by&nbsp;the&nbsp;caller&nbsp;of&nbsp;parseLhsList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235838">//&nbsp;-&nbsp;for&nbsp;communication&nbsp;clauses,&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;stand-alone&nbsp;identifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235909">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;a&nbsp;colon,&nbsp;we&nbsp;have&nbsp;a&nbsp;syntax&nbsp;error;&nbsp;there&nbsp;is&nbsp;no&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5235978">//&nbsp;&nbsp;&nbsp;to&nbsp;resolve&nbsp;the&nbsp;identifier&nbsp;in&nbsp;that&nbsp;case</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236023">default</span><span class="op" id="5236030">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5236034">//&nbsp;identifiers&nbsp;must&nbsp;be&nbsp;declared&nbsp;elsewhere</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236078">for</span>&nbsp;<span class="ident" id="5236082">_</span><span class="op" id="5236083">,</span>&nbsp;<span class="ident" id="5236085">x</span>&nbsp;<span class="op" id="5236087">:=</span>&nbsp;<span class="keyword" id="5236090">range</span>&nbsp;<span class="ident" id="5236096"><a href="/go/parser/parser.go.html#5235354">list</a></span>&nbsp;<span class="op" id="5236101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236106"><a href="/go/parser/parser.go.html#5235281">p</a></span><span class="op" id="5236107">.</span><span class="ident" id="5236108">resolve</span><span class="op" id="5236115">(</span><span class="ident" id="5236116"><a href="/go/parser/parser.go.html#5236085">x</a></span><span class="op" id="5236117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5236121">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5236124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236127"><a href="/go/parser/parser.go.html#5235281">p</a></span><span class="op" id="5236128">.</span><span class="ident" id="5236129">inRhs</span>&nbsp;<span class="op" id="5236135">=</span>&nbsp;<span class="ident" id="5236137"><a href="/go/parser/parser.go.html#5235321">old</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236142">return</span>&nbsp;<span class="ident" id="5236149"><a href="/go/parser/parser.go.html#5235354">list</a></span><br>
<span class="lineno"></span><span class="op" id="5236154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="keyword" id="5236157">func</span>&nbsp;<span class="op" id="5236162">(</span><span class="ident" id="5236163">p</span>&nbsp;<span class="op" id="5236165">*</span><span class="ident" id="5236166"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5236172">)</span>&nbsp;<span class="ident" id="5236174">parseRhsList</span><span class="op" id="5236186">(</span><span class="op" id="5236187">)</span>&nbsp;<span class="op" id="5236189">[</span><span class="op" id="5236190">]</span><span class="ident" id="5236191"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5236194">.</span><span class="ident" id="5236195">Expr</span>&nbsp;<span class="op" id="5236200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236203">old</span>&nbsp;<span class="op" id="5236207">:=</span>&nbsp;<span class="ident" id="5236210"><a href="/go/parser/parser.go.html#5236163">p</a></span><span class="op" id="5236211">.</span><span class="ident" id="5236212">inRhs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236219"><a href="/go/parser/parser.go.html#5236163">p</a></span><span class="op" id="5236220">.</span><span class="ident" id="5236221">inRhs</span>&nbsp;<span class="op" id="5236227">=</span>&nbsp;<span class="builtintype" id="5236229">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236235">list</span>&nbsp;<span class="op" id="5236240">:=</span>&nbsp;<span class="ident" id="5236243"><a href="/go/parser/parser.go.html#5236163">p</a></span><span class="op" id="5236244">.</span><span class="ident" id="5236245">parseExprList</span><span class="op" id="5236258">(</span><span class="builtintype" id="5236259">false</span><span class="op" id="5236264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236267"><a href="/go/parser/parser.go.html#5236163">p</a></span><span class="op" id="5236268">.</span><span class="ident" id="5236269">inRhs</span>&nbsp;<span class="op" id="5236275">=</span>&nbsp;<span class="ident" id="5236277"><a href="/go/parser/parser.go.html#5236203">old</a></span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236282">return</span>&nbsp;<span class="ident" id="5236289"><a href="/go/parser/parser.go.html#5236235">list</a></span><br>
<span class="lineno"></span><span class="op" id="5236294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5236297">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5236377">//&nbsp;Types</span><br>
<span class="lineno">600</span><br>
<span class="lineno"></span><span class="keyword" id="5236387">func</span>&nbsp;<span class="op" id="5236392">(</span><span class="ident" id="5236393">p</span>&nbsp;<span class="op" id="5236395">*</span><span class="ident" id="5236396"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5236402">)</span>&nbsp;<span class="ident" id="5236404">parseType</span><span class="op" id="5236413">(</span><span class="op" id="5236414">)</span>&nbsp;<span class="ident" id="5236416"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5236419">.</span><span class="ident" id="5236420">Expr</span>&nbsp;<span class="op" id="5236425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236428">if</span>&nbsp;<span class="ident" id="5236431"><a href="/go/parser/parser.go.html#5236393">p</a></span><span class="op" id="5236432">.</span><span class="ident" id="5236433">trace</span>&nbsp;<span class="op" id="5236439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236443">defer</span>&nbsp;<span class="ident" id="5236449"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5236451">(</span><span class="ident" id="5236452"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5236457">(</span><span class="ident" id="5236458"><a href="/go/parser/parser.go.html#5236393">p</a></span><span class="op" id="5236459">,</span>&nbsp;<span class="string" id="5236461">&#34;Type&#34;</span><span class="op" id="5236467">)</span><span class="op" id="5236468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5236471">}</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236475">typ</span>&nbsp;<span class="op" id="5236479">:=</span>&nbsp;<span class="ident" id="5236482"><a href="/go/parser/parser.go.html#5236393">p</a></span><span class="op" id="5236483">.</span><span class="ident" id="5236484">tryType</span><span class="op" id="5236491">(</span><span class="op" id="5236492">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236496">if</span>&nbsp;<span class="ident" id="5236499"><a href="/go/parser/parser.go.html#5236475">typ</a></span>&nbsp;<span class="op" id="5236503">==</span>&nbsp;<span class="ident" id="5236506">nil</span>&nbsp;<span class="op" id="5236510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236514">pos</span>&nbsp;<span class="op" id="5236518">:=</span>&nbsp;<span class="ident" id="5236521"><a href="/go/parser/parser.go.html#5236393">p</a></span><span class="op" id="5236522">.</span><span class="ident" id="5236523">pos</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236529"><a href="/go/parser/parser.go.html#5236393">p</a></span><span class="op" id="5236530">.</span><span class="ident" id="5236531">errorExpected</span><span class="op" id="5236544">(</span><span class="ident" id="5236545"><a href="/go/parser/parser.go.html#5236514">pos</a></span><span class="op" id="5236548">,</span>&nbsp;<span class="string" id="5236550">&#34;type&#34;</span><span class="op" id="5236556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236560"><a href="/go/parser/parser.go.html#5236393">p</a></span><span class="op" id="5236561">.</span><span class="ident" id="5236562">next</span><span class="op" id="5236566">(</span><span class="op" id="5236567">)</span>&nbsp;<span class="comment" id="5236569">//&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236588">return</span>&nbsp;<span class="op" id="5236595">&amp;</span><span class="ident" id="5236596"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5236599">.</span><span class="ident" id="5236600">BadExpr</span><span class="op" id="5236607">{</span><span class="ident" id="5236608">From</span><span class="op" id="5236612">:</span>&nbsp;<span class="ident" id="5236614"><a href="/go/parser/parser.go.html#5236514">pos</a></span><span class="op" id="5236617">,</span>&nbsp;<span class="ident" id="5236619">To</span><span class="op" id="5236621">:</span>&nbsp;<span class="ident" id="5236623"><a href="/go/parser/parser.go.html#5236393">p</a></span><span class="op" id="5236624">.</span><span class="ident" id="5236625">pos</span><span class="op" id="5236628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5236631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236635">return</span>&nbsp;<span class="ident" id="5236642"><a href="/go/parser/parser.go.html#5236475">typ</a></span><br>
<span class="lineno"></span><span class="op" id="5236646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5236649">//&nbsp;If&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="5236704">func</span>&nbsp;<span class="op" id="5236709">(</span><span class="ident" id="5236710">p</span>&nbsp;<span class="op" id="5236712">*</span><span class="ident" id="5236713"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5236719">)</span>&nbsp;<span class="ident" id="5236721">parseTypeName</span><span class="op" id="5236734">(</span><span class="op" id="5236735">)</span>&nbsp;<span class="ident" id="5236737"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5236740">.</span><span class="ident" id="5236741">Expr</span>&nbsp;<span class="op" id="5236746">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236749">if</span>&nbsp;<span class="ident" id="5236752"><a href="/go/parser/parser.go.html#5236710">p</a></span><span class="op" id="5236753">.</span><span class="ident" id="5236754">trace</span>&nbsp;<span class="op" id="5236760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236764">defer</span>&nbsp;<span class="ident" id="5236770"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5236772">(</span><span class="ident" id="5236773"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5236778">(</span><span class="ident" id="5236779"><a href="/go/parser/parser.go.html#5236710">p</a></span><span class="op" id="5236780">,</span>&nbsp;<span class="string" id="5236782">&#34;TypeName&#34;</span><span class="op" id="5236792">)</span><span class="op" id="5236793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5236796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236800">ident</span>&nbsp;<span class="op" id="5236806">:=</span>&nbsp;<span class="ident" id="5236809"><a href="/go/parser/parser.go.html#5236710">p</a></span><span class="op" id="5236810">.</span><span class="ident" id="5236811">parseIdent</span><span class="op" id="5236821">(</span><span class="op" id="5236822">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5236825">//&nbsp;don&#39;t&nbsp;resolve&nbsp;ident&nbsp;yet&nbsp;-&nbsp;it&nbsp;may&nbsp;be&nbsp;a&nbsp;parameter&nbsp;or&nbsp;field&nbsp;name</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5236892">if</span>&nbsp;<span class="ident" id="5236895"><a href="/go/parser/parser.go.html#5236710">p</a></span><span class="op" id="5236896">.</span><span class="ident" id="5236897">tok</span>&nbsp;<span class="op" id="5236901">==</span>&nbsp;<span class="ident" id="5236904"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5236909">.</span><span class="ident" id="5236910">PERIOD</span>&nbsp;<span class="op" id="5236917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5236921">//&nbsp;ident&nbsp;is&nbsp;a&nbsp;package&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236950"><a href="/go/parser/parser.go.html#5236710">p</a></span><span class="op" id="5236951">.</span><span class="ident" id="5236952">next</span><span class="op" id="5236956">(</span><span class="op" id="5236957">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236961"><a href="/go/parser/parser.go.html#5236710">p</a></span><span class="op" id="5236962">.</span><span class="ident" id="5236963">resolve</span><span class="op" id="5236970">(</span><span class="ident" id="5236971"><a href="/go/parser/parser.go.html#5236800">ident</a></span><span class="op" id="5236976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5236980">sel</span>&nbsp;<span class="op" id="5236984">:=</span>&nbsp;<span class="ident" id="5236987"><a href="/go/parser/parser.go.html#5236710">p</a></span><span class="op" id="5236988">.</span><span class="ident" id="5236989">parseIdent</span><span class="op" id="5236999">(</span><span class="op" id="5237000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237004">return</span>&nbsp;<span class="op" id="5237011">&amp;</span><span class="ident" id="5237012"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5237015">.</span><span class="ident" id="5237016">SelectorExpr</span><span class="op" id="5237028">{</span><span class="ident" id="5237029">X</span><span class="op" id="5237030">:</span>&nbsp;<span class="ident" id="5237032"><a href="/go/parser/parser.go.html#5236800">ident</a></span><span class="op" id="5237037">,</span>&nbsp;<span class="ident" id="5237039">Sel</span><span class="op" id="5237042">:</span>&nbsp;<span class="ident" id="5237044"><a href="/go/parser/parser.go.html#5236980">sel</a></span><span class="op" id="5237047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5237050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237054">return</span>&nbsp;<span class="ident" id="5237061"><a href="/go/parser/parser.go.html#5236800">ident</a></span><br>
<span class="lineno"></span><span class="op" id="5237067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5237070">func</span>&nbsp;<span class="op" id="5237075">(</span><span class="ident" id="5237076">p</span>&nbsp;<span class="op" id="5237078">*</span><span class="ident" id="5237079"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5237085">)</span>&nbsp;<span class="ident" id="5237087">parseArrayType</span><span class="op" id="5237101">(</span><span class="op" id="5237102">)</span>&nbsp;<span class="ident" id="5237104"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5237107">.</span><span class="ident" id="5237108">Expr</span>&nbsp;<span class="op" id="5237113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237116">if</span>&nbsp;<span class="ident" id="5237119"><a href="/go/parser/parser.go.html#5237076">p</a></span><span class="op" id="5237120">.</span><span class="ident" id="5237121">trace</span>&nbsp;<span class="op" id="5237127">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237131">defer</span>&nbsp;<span class="ident" id="5237137"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5237139">(</span><span class="ident" id="5237140"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5237145">(</span><span class="ident" id="5237146"><a href="/go/parser/parser.go.html#5237076">p</a></span><span class="op" id="5237147">,</span>&nbsp;<span class="string" id="5237149">&#34;ArrayType&#34;</span><span class="op" id="5237160">)</span><span class="op" id="5237161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5237164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237168">lbrack</span>&nbsp;<span class="op" id="5237175">:=</span>&nbsp;<span class="ident" id="5237178"><a href="/go/parser/parser.go.html#5237076">p</a></span><span class="op" id="5237179">.</span><span class="ident" id="5237180">expect</span><span class="op" id="5237186">(</span><span class="ident" id="5237187"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5237192">.</span><span class="ident" id="5237193">LBRACK</span><span class="op" id="5237199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237202"><a href="/go/parser/parser.go.html#5237076">p</a></span><span class="op" id="5237203">.</span><span class="ident" id="5237204">exprLev</span><span class="op" id="5237211">++</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237215">var</span>&nbsp;<span class="builtinfunc" id="5237219">len</span>&nbsp;<span class="ident" id="5237223"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5237226">.</span><span class="ident" id="5237227">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5237233">//&nbsp;always&nbsp;permit&nbsp;ellipsis&nbsp;for&nbsp;more&nbsp;fault-tolerant&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237292">if</span>&nbsp;<span class="ident" id="5237295"><a href="/go/parser/parser.go.html#5237076">p</a></span><span class="op" id="5237296">.</span><span class="ident" id="5237297">tok</span>&nbsp;<span class="op" id="5237301">==</span>&nbsp;<span class="ident" id="5237304"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5237309">.</span><span class="ident" id="5237310">ELLIPSIS</span>&nbsp;<span class="op" id="5237319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5237323"><a href="/go/parser/parser.go.html#5237219">len</a></span>&nbsp;<span class="op" id="5237327">=</span>&nbsp;<span class="op" id="5237329">&amp;</span><span class="ident" id="5237330"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5237333">.</span><span class="ident" id="5237334">Ellipsis</span><span class="op" id="5237342">{</span><span class="ident" id="5237343">Ellipsis</span><span class="op" id="5237351">:</span>&nbsp;<span class="ident" id="5237353"><a href="/go/parser/parser.go.html#5237076">p</a></span><span class="op" id="5237354">.</span><span class="ident" id="5237355">pos</span><span class="op" id="5237358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237362"><a href="/go/parser/parser.go.html#5237076">p</a></span><span class="op" id="5237363">.</span><span class="ident" id="5237364">next</span><span class="op" id="5237368">(</span><span class="op" id="5237369">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5237372">}</span>&nbsp;<span class="keyword" id="5237374">else</span>&nbsp;<span class="keyword" id="5237379">if</span>&nbsp;<span class="ident" id="5237382"><a href="/go/parser/parser.go.html#5237076">p</a></span><span class="op" id="5237383">.</span><span class="ident" id="5237384">tok</span>&nbsp;<span class="op" id="5237388">!=</span>&nbsp;<span class="ident" id="5237391"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5237396">.</span><span class="ident" id="5237397">RBRACK</span>&nbsp;<span class="op" id="5237404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5237408"><a href="/go/parser/parser.go.html#5237219">len</a></span>&nbsp;<span class="op" id="5237412">=</span>&nbsp;<span class="ident" id="5237414"><a href="/go/parser/parser.go.html#5237076">p</a></span><span class="op" id="5237415">.</span><span class="ident" id="5237416">parseRhs</span><span class="op" id="5237424">(</span><span class="op" id="5237425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5237428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237431"><a href="/go/parser/parser.go.html#5237076">p</a></span><span class="op" id="5237432">.</span><span class="ident" id="5237433">exprLev</span><span class="op" id="5237440">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237444"><a href="/go/parser/parser.go.html#5237076">p</a></span><span class="op" id="5237445">.</span><span class="ident" id="5237446">expect</span><span class="op" id="5237452">(</span><span class="ident" id="5237453"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5237458">.</span><span class="ident" id="5237459">RBRACK</span><span class="op" id="5237465">)</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237468">elt</span>&nbsp;<span class="op" id="5237472">:=</span>&nbsp;<span class="ident" id="5237475"><a href="/go/parser/parser.go.html#5237076">p</a></span><span class="op" id="5237476">.</span><span class="ident" id="5237477">parseType</span><span class="op" id="5237486">(</span><span class="op" id="5237487">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237491">return</span>&nbsp;<span class="op" id="5237498">&amp;</span><span class="ident" id="5237499"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5237502">.</span><span class="ident" id="5237503">ArrayType</span><span class="op" id="5237512">{</span><span class="ident" id="5237513">Lbrack</span><span class="op" id="5237519">:</span>&nbsp;<span class="ident" id="5237521"><a href="/go/parser/parser.go.html#5237168">lbrack</a></span><span class="op" id="5237527">,</span>&nbsp;<span class="ident" id="5237529">Len</span><span class="op" id="5237532">:</span>&nbsp;<span class="builtinfunc" id="5237534"><a href="/go/parser/parser.go.html#5237219">len</a></span><span class="op" id="5237537">,</span>&nbsp;<span class="ident" id="5237539">Elt</span><span class="op" id="5237542">:</span>&nbsp;<span class="ident" id="5237544"><a href="/go/parser/parser.go.html#5237468">elt</a></span><span class="op" id="5237547">}</span><br>
<span class="lineno"></span><span class="op" id="5237549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">660</span><span class="keyword" id="5237552">func</span>&nbsp;<span class="op" id="5237557">(</span><span class="ident" id="5237558">p</span>&nbsp;<span class="op" id="5237560">*</span><span class="ident" id="5237561"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5237567">)</span>&nbsp;<span class="ident" id="5237569">makeIdentList</span><span class="op" id="5237582">(</span><span class="ident" id="5237583">list</span>&nbsp;<span class="op" id="5237588">[</span><span class="op" id="5237589">]</span><span class="ident" id="5237590"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5237593">.</span><span class="ident" id="5237594">Expr</span><span class="op" id="5237598">)</span>&nbsp;<span class="op" id="5237600">[</span><span class="op" id="5237601">]</span><span class="op" id="5237602">*</span><span class="ident" id="5237603"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5237606">.</span><span class="ident" id="5237607">Ident</span>&nbsp;<span class="op" id="5237613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237616">idents</span>&nbsp;<span class="op" id="5237623">:=</span>&nbsp;<span class="builtinfunc" id="5237626">make</span><span class="op" id="5237630">(</span><span class="op" id="5237631">[</span><span class="op" id="5237632">]</span><span class="op" id="5237633">*</span><span class="ident" id="5237634"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5237637">.</span><span class="ident" id="5237638">Ident</span><span class="op" id="5237643">,</span>&nbsp;<span class="builtinfunc" id="5237645">len</span><span class="op" id="5237648">(</span><span class="ident" id="5237649"><a href="/go/parser/parser.go.html#5237583">list</a></span><span class="op" id="5237653">)</span><span class="op" id="5237654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237657">for</span>&nbsp;<span class="ident" id="5237661">i</span><span class="op" id="5237662">,</span>&nbsp;<span class="ident" id="5237664">x</span>&nbsp;<span class="op" id="5237666">:=</span>&nbsp;<span class="keyword" id="5237669">range</span>&nbsp;<span class="ident" id="5237675"><a href="/go/parser/parser.go.html#5237583">list</a></span>&nbsp;<span class="op" id="5237680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237684">ident</span><span class="op" id="5237689">,</span>&nbsp;<span class="ident" id="5237691">isIdent</span>&nbsp;<span class="op" id="5237699">:=</span>&nbsp;<span class="ident" id="5237702"><a href="/go/parser/parser.go.html#5237664">x</a></span><span class="op" id="5237703">.</span><span class="op" id="5237704">(</span><span class="op" id="5237705">*</span><span class="ident" id="5237706"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5237709">.</span><span class="ident" id="5237710">Ident</span><span class="op" id="5237715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237719">if</span>&nbsp;<span class="op" id="5237722">!</span><span class="ident" id="5237723"><a href="/go/parser/parser.go.html#5237691">isIdent</a></span>&nbsp;<span class="op" id="5237731">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237736">if</span>&nbsp;<span class="ident" id="5237739">_</span><span class="op" id="5237740">,</span>&nbsp;<span class="ident" id="5237742">isBad</span>&nbsp;<span class="op" id="5237748">:=</span>&nbsp;<span class="ident" id="5237751"><a href="/go/parser/parser.go.html#5237664">x</a></span><span class="op" id="5237752">.</span><span class="op" id="5237753">(</span><span class="op" id="5237754">*</span><span class="ident" id="5237755"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5237758">.</span><span class="ident" id="5237759">BadExpr</span><span class="op" id="5237766">)</span><span class="op" id="5237767">;</span>&nbsp;<span class="op" id="5237769">!</span><span class="ident" id="5237770"><a href="/go/parser/parser.go.html#5237742">isBad</a></span>&nbsp;<span class="op" id="5237776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5237782">//&nbsp;only&nbsp;report&nbsp;error&nbsp;if&nbsp;it&#39;s&nbsp;a&nbsp;new&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237825"><a href="/go/parser/parser.go.html#5237558">p</a></span><span class="op" id="5237826">.</span><span class="ident" id="5237827">errorExpected</span><span class="op" id="5237840">(</span><span class="ident" id="5237841"><a href="/go/parser/parser.go.html#5237664">x</a></span><span class="op" id="5237842">.</span><span class="ident" id="5237843">Pos</span><span class="op" id="5237846">(</span><span class="op" id="5237847">)</span><span class="op" id="5237848">,</span>&nbsp;<span class="string" id="5237850">&#34;identifier&#34;</span><span class="op" id="5237862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5237867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237872"><a href="/go/parser/parser.go.html#5237684">ident</a></span>&nbsp;<span class="op" id="5237878">=</span>&nbsp;<span class="op" id="5237880">&amp;</span><span class="ident" id="5237881"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5237884">.</span><span class="ident" id="5237885">Ident</span><span class="op" id="5237890">{</span><span class="ident" id="5237891">NamePos</span><span class="op" id="5237898">:</span>&nbsp;<span class="ident" id="5237900"><a href="/go/parser/parser.go.html#5237664">x</a></span><span class="op" id="5237901">.</span><span class="ident" id="5237902">Pos</span><span class="op" id="5237905">(</span><span class="op" id="5237906">)</span><span class="op" id="5237907">,</span>&nbsp;<span class="ident" id="5237909">Name</span><span class="op" id="5237913">:</span>&nbsp;<span class="string" id="5237915">&#34;_&#34;</span><span class="op" id="5237918">}</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5237922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5237926"><a href="/go/parser/parser.go.html#5237616">idents</a></span><span class="op" id="5237932">[</span><span class="ident" id="5237933"><a href="/go/parser/parser.go.html#5237661">i</a></span><span class="op" id="5237934">]</span>&nbsp;<span class="op" id="5237936">=</span>&nbsp;<span class="ident" id="5237938"><a href="/go/parser/parser.go.html#5237684">ident</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5237945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5237948">return</span>&nbsp;<span class="ident" id="5237955"><a href="/go/parser/parser.go.html#5237616">idents</a></span><br>
<span class="lineno"></span><span class="op" id="5237962">}</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span><span class="keyword" id="5237965">func</span>&nbsp;<span class="op" id="5237970">(</span><span class="ident" id="5237971">p</span>&nbsp;<span class="op" id="5237973">*</span><span class="ident" id="5237974"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5237980">)</span>&nbsp;<span class="ident" id="5237982">parseFieldDecl</span><span class="op" id="5237996">(</span><span class="ident" id="5237997">scope</span>&nbsp;<span class="op" id="5238003">*</span><span class="ident" id="5238004"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5238007">.</span><span class="ident" id="5238008">Scope</span><span class="op" id="5238013">)</span>&nbsp;<span class="op" id="5238015">*</span><span class="ident" id="5238016"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5238019">.</span><span class="ident" id="5238020">Field</span>&nbsp;<span class="op" id="5238026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238029">if</span>&nbsp;<span class="ident" id="5238032"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238033">.</span><span class="ident" id="5238034">trace</span>&nbsp;<span class="op" id="5238040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238044">defer</span>&nbsp;<span class="ident" id="5238050"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5238052">(</span><span class="ident" id="5238053"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5238058">(</span><span class="ident" id="5238059"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238060">,</span>&nbsp;<span class="string" id="5238062">&#34;FieldDecl&#34;</span><span class="op" id="5238073">)</span><span class="op" id="5238074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238077">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238081">doc</span>&nbsp;<span class="op" id="5238085">:=</span>&nbsp;<span class="ident" id="5238088"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238089">.</span><span class="ident" id="5238090">leadComment</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5238104">//&nbsp;FieldDecl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238118">list</span><span class="op" id="5238122">,</span>&nbsp;<span class="ident" id="5238124">typ</span>&nbsp;<span class="op" id="5238128">:=</span>&nbsp;<span class="ident" id="5238131"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238132">.</span><span class="ident" id="5238133">parseVarList</span><span class="op" id="5238145">(</span><span class="builtintype" id="5238146">false</span><span class="op" id="5238151">)</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5238155">//&nbsp;Tag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238163">var</span>&nbsp;<span class="ident" id="5238167">tag</span>&nbsp;<span class="op" id="5238171">*</span><span class="ident" id="5238172"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5238175">.</span><span class="ident" id="5238176">BasicLit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238186">if</span>&nbsp;<span class="ident" id="5238189"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238190">.</span><span class="ident" id="5238191">tok</span>&nbsp;<span class="op" id="5238195">==</span>&nbsp;<span class="ident" id="5238198"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5238203">.</span><span class="ident" id="5238204">STRING</span>&nbsp;<span class="op" id="5238211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238215"><a href="/go/parser/parser.go.html#5238167">tag</a></span>&nbsp;<span class="op" id="5238219">=</span>&nbsp;<span class="op" id="5238221">&amp;</span><span class="ident" id="5238222"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5238225">.</span><span class="ident" id="5238226">BasicLit</span><span class="op" id="5238234">{</span><span class="ident" id="5238235">ValuePos</span><span class="op" id="5238243">:</span>&nbsp;<span class="ident" id="5238245"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238246">.</span><span class="ident" id="5238247">pos</span><span class="op" id="5238250">,</span>&nbsp;<span class="ident" id="5238252">Kind</span><span class="op" id="5238256">:</span>&nbsp;<span class="ident" id="5238258"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238259">.</span><span class="ident" id="5238260">tok</span><span class="op" id="5238263">,</span>&nbsp;<span class="ident" id="5238265">Value</span><span class="op" id="5238270">:</span>&nbsp;<span class="ident" id="5238272"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238273">.</span><span class="ident" id="5238274">lit</span><span class="op" id="5238277">}</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238281"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238282">.</span><span class="ident" id="5238283">next</span><span class="op" id="5238287">(</span><span class="op" id="5238288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5238295">//&nbsp;analyze&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238312">var</span>&nbsp;<span class="ident" id="5238316">idents</span>&nbsp;<span class="op" id="5238323">[</span><span class="op" id="5238324">]</span><span class="op" id="5238325">*</span><span class="ident" id="5238326"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5238329">.</span><span class="ident" id="5238330">Ident</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238337">if</span>&nbsp;<span class="ident" id="5238340"><a href="/go/parser/parser.go.html#5238124">typ</a></span>&nbsp;<span class="op" id="5238344">!=</span>&nbsp;<span class="ident" id="5238347">nil</span>&nbsp;<span class="op" id="5238351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5238355">//&nbsp;IdentifierList&nbsp;Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238380"><a href="/go/parser/parser.go.html#5238316">idents</a></span>&nbsp;<span class="op" id="5238387">=</span>&nbsp;<span class="ident" id="5238389"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238390">.</span><span class="ident" id="5238391">makeIdentList</span><span class="op" id="5238404">(</span><span class="ident" id="5238405"><a href="/go/parser/parser.go.html#5238118">list</a></span><span class="op" id="5238409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238412">}</span>&nbsp;<span class="keyword" id="5238414">else</span>&nbsp;<span class="op" id="5238419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5238423">//&nbsp;[&#34;*&#34;]&nbsp;TypeName&nbsp;(AnonymousField)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238460"><a href="/go/parser/parser.go.html#5238124">typ</a></span>&nbsp;<span class="op" id="5238464">=</span>&nbsp;<span class="ident" id="5238466"><a href="/go/parser/parser.go.html#5238118">list</a></span><span class="op" id="5238470">[</span><span class="num" id="5238471">0</span><span class="op" id="5238472">]</span>&nbsp;<span class="comment" id="5238474">//&nbsp;we&nbsp;always&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238515">if</span>&nbsp;<span class="ident" id="5238518">n</span>&nbsp;<span class="op" id="5238520">:=</span>&nbsp;<span class="builtinfunc" id="5238523">len</span><span class="op" id="5238526">(</span><span class="ident" id="5238527"><a href="/go/parser/parser.go.html#5238118">list</a></span><span class="op" id="5238531">)</span><span class="op" id="5238532">;</span>&nbsp;<span class="ident" id="5238534"><a href="/go/parser/parser.go.html#5238518">n</a></span>&nbsp;<span class="op" id="5238536">&gt;</span>&nbsp;<span class="num" id="5238538">1</span>&nbsp;<span class="op" id="5238540">||</span>&nbsp;<span class="op" id="5238543">!</span><span class="ident" id="5238544"><a href="/go/parser/parser.go.html#5255213">isTypeName</a></span><span class="op" id="5238554">(</span><span class="ident" id="5238555"><a href="/go/parser/parser.go.html#5255947">deref</a></span><span class="op" id="5238560">(</span><span class="ident" id="5238561"><a href="/go/parser/parser.go.html#5238124">typ</a></span><span class="op" id="5238564">)</span><span class="op" id="5238565">)</span>&nbsp;<span class="op" id="5238567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238572">pos</span>&nbsp;<span class="op" id="5238576">:=</span>&nbsp;<span class="ident" id="5238579"><a href="/go/parser/parser.go.html#5238124">typ</a></span><span class="op" id="5238582">.</span><span class="ident" id="5238583">Pos</span><span class="op" id="5238586">(</span><span class="op" id="5238587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238592"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238593">.</span><span class="ident" id="5238594">errorExpected</span><span class="op" id="5238607">(</span><span class="ident" id="5238608"><a href="/go/parser/parser.go.html#5238572">pos</a></span><span class="op" id="5238611">,</span>&nbsp;<span class="string" id="5238613">&#34;anonymous&nbsp;field&#34;</span><span class="op" id="5238630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238635"><a href="/go/parser/parser.go.html#5238124">typ</a></span>&nbsp;<span class="op" id="5238639">=</span>&nbsp;<span class="op" id="5238641">&amp;</span><span class="ident" id="5238642"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5238645">.</span><span class="ident" id="5238646">BadExpr</span><span class="op" id="5238653">{</span><span class="ident" id="5238654">From</span><span class="op" id="5238658">:</span>&nbsp;<span class="ident" id="5238660"><a href="/go/parser/parser.go.html#5238572">pos</a></span><span class="op" id="5238663">,</span>&nbsp;<span class="ident" id="5238665">To</span><span class="op" id="5238667">:</span>&nbsp;<span class="ident" id="5238669"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238670">.</span><span class="ident" id="5238671">safePos</span><span class="op" id="5238678">(</span><span class="ident" id="5238679"><a href="/go/parser/parser.go.html#5238118">list</a></span><span class="op" id="5238683">[</span><span class="ident" id="5238684"><a href="/go/parser/parser.go.html#5238518">n</a></span><span class="op" id="5238685">-</span><span class="num" id="5238686">1</span><span class="op" id="5238687">]</span><span class="op" id="5238688">.</span><span class="ident" id="5238689">End</span><span class="op" id="5238692">(</span><span class="op" id="5238693">)</span><span class="op" id="5238694">)</span><span class="op" id="5238695">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5238702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238706"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238707">.</span><span class="ident" id="5238708">expectSemi</span><span class="op" id="5238718">(</span><span class="op" id="5238719">)</span>&nbsp;<span class="comment" id="5238721">//&nbsp;call&nbsp;before&nbsp;accessing&nbsp;p.linecomment</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238762">field</span>&nbsp;<span class="op" id="5238768">:=</span>&nbsp;<span class="op" id="5238771">&amp;</span><span class="ident" id="5238772"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5238775">.</span><span class="ident" id="5238776">Field</span><span class="op" id="5238781">{</span><span class="ident" id="5238782">Doc</span><span class="op" id="5238785">:</span>&nbsp;<span class="ident" id="5238787"><a href="/go/parser/parser.go.html#5238081">doc</a></span><span class="op" id="5238790">,</span>&nbsp;<span class="ident" id="5238792">Names</span><span class="op" id="5238797">:</span>&nbsp;<span class="ident" id="5238799"><a href="/go/parser/parser.go.html#5238316">idents</a></span><span class="op" id="5238805">,</span>&nbsp;<span class="ident" id="5238807">Type</span><span class="op" id="5238811">:</span>&nbsp;<span class="ident" id="5238813"><a href="/go/parser/parser.go.html#5238124">typ</a></span><span class="op" id="5238816">,</span>&nbsp;<span class="ident" id="5238818">Tag</span><span class="op" id="5238821">:</span>&nbsp;<span class="ident" id="5238823"><a href="/go/parser/parser.go.html#5238167">tag</a></span><span class="op" id="5238826">,</span>&nbsp;<span class="ident" id="5238828">Comment</span><span class="op" id="5238835">:</span>&nbsp;<span class="ident" id="5238837"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238838">.</span><span class="ident" id="5238839">lineComment</span><span class="op" id="5238850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238853"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238854">.</span><span class="ident" id="5238855">declare</span><span class="op" id="5238862">(</span><span class="ident" id="5238863"><a href="/go/parser/parser.go.html#5238762">field</a></span><span class="op" id="5238868">,</span>&nbsp;<span class="ident" id="5238870">nil</span><span class="op" id="5238873">,</span>&nbsp;<span class="ident" id="5238875"><a href="/go/parser/parser.go.html#5237997">scope</a></span><span class="op" id="5238880">,</span>&nbsp;<span class="ident" id="5238882"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5238885">.</span><span class="ident" id="5238886">Var</span><span class="op" id="5238889">,</span>&nbsp;<span class="ident" id="5238891"><a href="/go/parser/parser.go.html#5238316">idents</a></span><span class="op" id="5238897">...</span><span class="op" id="5238900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5238903"><a href="/go/parser/parser.go.html#5237971">p</a></span><span class="op" id="5238904">.</span><span class="ident" id="5238905">resolve</span><span class="op" id="5238912">(</span><span class="ident" id="5238913"><a href="/go/parser/parser.go.html#5238124">typ</a></span><span class="op" id="5238916">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238920">return</span>&nbsp;<span class="ident" id="5238927"><a href="/go/parser/parser.go.html#5238762">field</a></span><br>
<span class="lineno">715</span><span class="op" id="5238933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5238936">func</span>&nbsp;<span class="op" id="5238941">(</span><span class="ident" id="5238942">p</span>&nbsp;<span class="op" id="5238944">*</span><span class="ident" id="5238945"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5238951">)</span>&nbsp;<span class="ident" id="5238953">parseStructType</span><span class="op" id="5238968">(</span><span class="op" id="5238969">)</span>&nbsp;<span class="op" id="5238971">*</span><span class="ident" id="5238972"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5238975">.</span><span class="ident" id="5238976">StructType</span>&nbsp;<span class="op" id="5238987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5238990">if</span>&nbsp;<span class="ident" id="5238993"><a href="/go/parser/parser.go.html#5238942">p</a></span><span class="op" id="5238994">.</span><span class="ident" id="5238995">trace</span>&nbsp;<span class="op" id="5239001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239005">defer</span>&nbsp;<span class="ident" id="5239011"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5239013">(</span><span class="ident" id="5239014"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5239019">(</span><span class="ident" id="5239020"><a href="/go/parser/parser.go.html#5238942">p</a></span><span class="op" id="5239021">,</span>&nbsp;<span class="string" id="5239023">&#34;StructType&#34;</span><span class="op" id="5239035">)</span><span class="op" id="5239036">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239043">pos</span>&nbsp;<span class="op" id="5239047">:=</span>&nbsp;<span class="ident" id="5239050"><a href="/go/parser/parser.go.html#5238942">p</a></span><span class="op" id="5239051">.</span><span class="ident" id="5239052">expect</span><span class="op" id="5239058">(</span><span class="ident" id="5239059"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5239064">.</span><span class="ident" id="5239065">STRUCT</span><span class="op" id="5239071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239074">lbrace</span>&nbsp;<span class="op" id="5239081">:=</span>&nbsp;<span class="ident" id="5239084"><a href="/go/parser/parser.go.html#5238942">p</a></span><span class="op" id="5239085">.</span><span class="ident" id="5239086">expect</span><span class="op" id="5239092">(</span><span class="ident" id="5239093"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5239098">.</span><span class="ident" id="5239099">LBRACE</span><span class="op" id="5239105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239108">scope</span>&nbsp;<span class="op" id="5239114">:=</span>&nbsp;<span class="ident" id="5239117"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5239120">.</span><span class="ident" id="5239121">NewScope</span><span class="op" id="5239129">(</span><span class="ident" id="5239130">nil</span><span class="op" id="5239133">)</span>&nbsp;<span class="comment" id="5239135">//&nbsp;struct&nbsp;scope</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239152">var</span>&nbsp;<span class="ident" id="5239156">list</span>&nbsp;<span class="op" id="5239161">[</span><span class="op" id="5239162">]</span><span class="op" id="5239163">*</span><span class="ident" id="5239164"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5239167">.</span><span class="ident" id="5239168">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239175">for</span>&nbsp;<span class="ident" id="5239179"><a href="/go/parser/parser.go.html#5238942">p</a></span><span class="op" id="5239180">.</span><span class="ident" id="5239181">tok</span>&nbsp;<span class="op" id="5239185">==</span>&nbsp;<span class="ident" id="5239188"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5239193">.</span><span class="ident" id="5239194">IDENT</span>&nbsp;<span class="op" id="5239200">||</span>&nbsp;<span class="ident" id="5239203"><a href="/go/parser/parser.go.html#5238942">p</a></span><span class="op" id="5239204">.</span><span class="ident" id="5239205">tok</span>&nbsp;<span class="op" id="5239209">==</span>&nbsp;<span class="ident" id="5239212"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5239217">.</span><span class="ident" id="5239218">MUL</span>&nbsp;<span class="op" id="5239222">||</span>&nbsp;<span class="ident" id="5239225"><a href="/go/parser/parser.go.html#5238942">p</a></span><span class="op" id="5239226">.</span><span class="ident" id="5239227">tok</span>&nbsp;<span class="op" id="5239231">==</span>&nbsp;<span class="ident" id="5239234"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5239239">.</span><span class="ident" id="5239240">LPAREN</span>&nbsp;<span class="op" id="5239247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5239251">//&nbsp;a&nbsp;field&nbsp;declaration&nbsp;cannot&nbsp;start&nbsp;with&nbsp;a&nbsp;&#39;(&#39;&nbsp;but&nbsp;we&nbsp;accept</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5239314">//&nbsp;it&nbsp;here&nbsp;for&nbsp;more&nbsp;robust&nbsp;parsing&nbsp;and&nbsp;better&nbsp;error&nbsp;messages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5239377">//&nbsp;(parseFieldDecl&nbsp;will&nbsp;check&nbsp;and&nbsp;complain&nbsp;if&nbsp;necessary)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239436"><a href="/go/parser/parser.go.html#5239156">list</a></span>&nbsp;<span class="op" id="5239441">=</span>&nbsp;<span class="builtinfunc" id="5239443">append</span><span class="op" id="5239449">(</span><span class="ident" id="5239450"><a href="/go/parser/parser.go.html#5239156">list</a></span><span class="op" id="5239454">,</span>&nbsp;<span class="ident" id="5239456"><a href="/go/parser/parser.go.html#5238942">p</a></span><span class="op" id="5239457">.</span><span class="ident" id="5239458">parseFieldDecl</span><span class="op" id="5239472">(</span><span class="ident" id="5239473"><a href="/go/parser/parser.go.html#5239108">scope</a></span><span class="op" id="5239478">)</span><span class="op" id="5239479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239485">rbrace</span>&nbsp;<span class="op" id="5239492">:=</span>&nbsp;<span class="ident" id="5239495"><a href="/go/parser/parser.go.html#5238942">p</a></span><span class="op" id="5239496">.</span><span class="ident" id="5239497">expect</span><span class="op" id="5239503">(</span><span class="ident" id="5239504"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5239509">.</span><span class="ident" id="5239510">RBRACE</span><span class="op" id="5239516">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239520">return</span>&nbsp;<span class="op" id="5239527">&amp;</span><span class="ident" id="5239528"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5239531">.</span><span class="ident" id="5239532">StructType</span><span class="op" id="5239542">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239546">Struct</span><span class="op" id="5239552">:</span>&nbsp;<span class="ident" id="5239554"><a href="/go/parser/parser.go.html#5239043">pos</a></span><span class="op" id="5239557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239561">Fields</span><span class="op" id="5239567">:</span>&nbsp;<span class="op" id="5239569">&amp;</span><span class="ident" id="5239570"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5239573">.</span><span class="ident" id="5239574">FieldList</span><span class="op" id="5239583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239588">Opening</span><span class="op" id="5239595">:</span>&nbsp;<span class="ident" id="5239597"><a href="/go/parser/parser.go.html#5239074">lbrace</a></span><span class="op" id="5239603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239608">List</span><span class="op" id="5239612">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5239617"><a href="/go/parser/parser.go.html#5239156">list</a></span><span class="op" id="5239621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239626">Closing</span><span class="op" id="5239633">:</span>&nbsp;<span class="ident" id="5239635"><a href="/go/parser/parser.go.html#5239485">rbrace</a></span><span class="op" id="5239641">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239645">}</span><span class="op" id="5239646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239649">}</span><br>
<span class="lineno"></span><span class="op" id="5239651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5239654">func</span>&nbsp;<span class="op" id="5239659">(</span><span class="ident" id="5239660">p</span>&nbsp;<span class="op" id="5239662">*</span><span class="ident" id="5239663"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5239669">)</span>&nbsp;<span class="ident" id="5239671">parsePointerType</span><span class="op" id="5239687">(</span><span class="op" id="5239688">)</span>&nbsp;<span class="op" id="5239690">*</span><span class="ident" id="5239691"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5239694">.</span><span class="ident" id="5239695">StarExpr</span>&nbsp;<span class="op" id="5239704">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239707">if</span>&nbsp;<span class="ident" id="5239710"><a href="/go/parser/parser.go.html#5239660">p</a></span><span class="op" id="5239711">.</span><span class="ident" id="5239712">trace</span>&nbsp;<span class="op" id="5239718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239722">defer</span>&nbsp;<span class="ident" id="5239728"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5239730">(</span><span class="ident" id="5239731"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5239736">(</span><span class="ident" id="5239737"><a href="/go/parser/parser.go.html#5239660">p</a></span><span class="op" id="5239738">,</span>&nbsp;<span class="string" id="5239740">&#34;PointerType&#34;</span><span class="op" id="5239753">)</span><span class="op" id="5239754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5239757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239761">star</span>&nbsp;<span class="op" id="5239766">:=</span>&nbsp;<span class="ident" id="5239769"><a href="/go/parser/parser.go.html#5239660">p</a></span><span class="op" id="5239770">.</span><span class="ident" id="5239771">expect</span><span class="op" id="5239777">(</span><span class="ident" id="5239778"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5239783">.</span><span class="ident" id="5239784">MUL</span><span class="op" id="5239787">)</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5239790">base</span>&nbsp;<span class="op" id="5239795">:=</span>&nbsp;<span class="ident" id="5239798"><a href="/go/parser/parser.go.html#5239660">p</a></span><span class="op" id="5239799">.</span><span class="ident" id="5239800">parseType</span><span class="op" id="5239809">(</span><span class="op" id="5239810">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239814">return</span>&nbsp;<span class="op" id="5239821">&amp;</span><span class="ident" id="5239822"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5239825">.</span><span class="ident" id="5239826">StarExpr</span><span class="op" id="5239834">{</span><span class="ident" id="5239835">Star</span><span class="op" id="5239839">:</span>&nbsp;<span class="ident" id="5239841"><a href="/go/parser/parser.go.html#5239761">star</a></span><span class="op" id="5239845">,</span>&nbsp;<span class="ident" id="5239847">X</span><span class="op" id="5239848">:</span>&nbsp;<span class="ident" id="5239850"><a href="/go/parser/parser.go.html#5239790">base</a></span><span class="op" id="5239854">}</span><br>
<span class="lineno"></span><span class="op" id="5239856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="5239859">//&nbsp;If&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="5239914">func</span>&nbsp;<span class="op" id="5239919">(</span><span class="ident" id="5239920">p</span>&nbsp;<span class="op" id="5239922">*</span><span class="ident" id="5239923"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5239929">)</span>&nbsp;<span class="ident" id="5239931">tryVarType</span><span class="op" id="5239941">(</span><span class="ident" id="5239942">isParam</span>&nbsp;<span class="builtintype" id="5239950">bool</span><span class="op" id="5239954">)</span>&nbsp;<span class="ident" id="5239956"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5239959">.</span><span class="ident" id="5239960">Expr</span>&nbsp;<span class="op" id="5239965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5239968">if</span>&nbsp;<span class="ident" id="5239971"><a href="/go/parser/parser.go.html#5239942">isParam</a></span>&nbsp;<span class="op" id="5239979">&amp;&amp;</span>&nbsp;<span class="ident" id="5239982"><a href="/go/parser/parser.go.html#5239920">p</a></span><span class="op" id="5239983">.</span><span class="ident" id="5239984">tok</span>&nbsp;<span class="op" id="5239988">==</span>&nbsp;<span class="ident" id="5239991"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5239996">.</span><span class="ident" id="5239997">ELLIPSIS</span>&nbsp;<span class="op" id="5240006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240010">pos</span>&nbsp;<span class="op" id="5240014">:=</span>&nbsp;<span class="ident" id="5240017"><a href="/go/parser/parser.go.html#5239920">p</a></span><span class="op" id="5240018">.</span><span class="ident" id="5240019">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240025"><a href="/go/parser/parser.go.html#5239920">p</a></span><span class="op" id="5240026">.</span><span class="ident" id="5240027">next</span><span class="op" id="5240031">(</span><span class="op" id="5240032">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240036">typ</span>&nbsp;<span class="op" id="5240040">:=</span>&nbsp;<span class="ident" id="5240043"><a href="/go/parser/parser.go.html#5239920">p</a></span><span class="op" id="5240044">.</span><span class="ident" id="5240045">tryIdentOrType</span><span class="op" id="5240059">(</span><span class="op" id="5240060">)</span>&nbsp;<span class="comment" id="5240062">//&nbsp;don&#39;t&nbsp;use&nbsp;parseType&nbsp;so&nbsp;we&nbsp;can&nbsp;provide&nbsp;better&nbsp;error&nbsp;message</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240126">if</span>&nbsp;<span class="ident" id="5240129"><a href="/go/parser/parser.go.html#5240036">typ</a></span>&nbsp;<span class="op" id="5240133">!=</span>&nbsp;<span class="ident" id="5240136">nil</span>&nbsp;<span class="op" id="5240140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240145"><a href="/go/parser/parser.go.html#5239920">p</a></span><span class="op" id="5240146">.</span><span class="ident" id="5240147">resolve</span><span class="op" id="5240154">(</span><span class="ident" id="5240155"><a href="/go/parser/parser.go.html#5240036">typ</a></span><span class="op" id="5240158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240162">}</span>&nbsp;<span class="keyword" id="5240164">else</span>&nbsp;<span class="op" id="5240169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240174"><a href="/go/parser/parser.go.html#5239920">p</a></span><span class="op" id="5240175">.</span><span class="builtintype" id="5240176">error</span><span class="op" id="5240181">(</span><span class="ident" id="5240182"><a href="/go/parser/parser.go.html#5240010">pos</a></span><span class="op" id="5240185">,</span>&nbsp;<span class="string" id="5240187">&#34;&#39;...&#39;&nbsp;parameter&nbsp;is&nbsp;missing&nbsp;type&#34;</span><span class="op" id="5240220">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240225"><a href="/go/parser/parser.go.html#5240036">typ</a></span>&nbsp;<span class="op" id="5240229">=</span>&nbsp;<span class="op" id="5240231">&amp;</span><span class="ident" id="5240232"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5240235">.</span><span class="ident" id="5240236">BadExpr</span><span class="op" id="5240243">{</span><span class="ident" id="5240244">From</span><span class="op" id="5240248">:</span>&nbsp;<span class="ident" id="5240250"><a href="/go/parser/parser.go.html#5240010">pos</a></span><span class="op" id="5240253">,</span>&nbsp;<span class="ident" id="5240255">To</span><span class="op" id="5240257">:</span>&nbsp;<span class="ident" id="5240259"><a href="/go/parser/parser.go.html#5239920">p</a></span><span class="op" id="5240260">.</span><span class="ident" id="5240261">pos</span><span class="op" id="5240264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240272">return</span>&nbsp;<span class="op" id="5240279">&amp;</span><span class="ident" id="5240280"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5240283">.</span><span class="ident" id="5240284">Ellipsis</span><span class="op" id="5240292">{</span><span class="ident" id="5240293">Ellipsis</span><span class="op" id="5240301">:</span>&nbsp;<span class="ident" id="5240303"><a href="/go/parser/parser.go.html#5240010">pos</a></span><span class="op" id="5240306">,</span>&nbsp;<span class="ident" id="5240308">Elt</span><span class="op" id="5240311">:</span>&nbsp;<span class="ident" id="5240313"><a href="/go/parser/parser.go.html#5240036">typ</a></span><span class="op" id="5240316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240322">return</span>&nbsp;<span class="ident" id="5240329"><a href="/go/parser/parser.go.html#5239920">p</a></span><span class="op" id="5240330">.</span><span class="ident" id="5240331">tryIdentOrType</span><span class="op" id="5240345">(</span><span class="op" id="5240346">)</span><br>
<span class="lineno">770</span><span class="op" id="5240348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5240351">//&nbsp;If&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="5240406">func</span>&nbsp;<span class="op" id="5240411">(</span><span class="ident" id="5240412">p</span>&nbsp;<span class="op" id="5240414">*</span><span class="ident" id="5240415"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5240421">)</span>&nbsp;<span class="ident" id="5240423">parseVarType</span><span class="op" id="5240435">(</span><span class="ident" id="5240436">isParam</span>&nbsp;<span class="builtintype" id="5240444">bool</span><span class="op" id="5240448">)</span>&nbsp;<span class="ident" id="5240450"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5240453">.</span><span class="ident" id="5240454">Expr</span>&nbsp;<span class="op" id="5240459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240462">typ</span>&nbsp;<span class="op" id="5240466">:=</span>&nbsp;<span class="ident" id="5240469"><a href="/go/parser/parser.go.html#5240412">p</a></span><span class="op" id="5240470">.</span><span class="ident" id="5240471">tryVarType</span><span class="op" id="5240481">(</span><span class="ident" id="5240482"><a href="/go/parser/parser.go.html#5240436">isParam</a></span><span class="op" id="5240489">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240492">if</span>&nbsp;<span class="ident" id="5240495"><a href="/go/parser/parser.go.html#5240462">typ</a></span>&nbsp;<span class="op" id="5240499">==</span>&nbsp;<span class="ident" id="5240502">nil</span>&nbsp;<span class="op" id="5240506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240510">pos</span>&nbsp;<span class="op" id="5240514">:=</span>&nbsp;<span class="ident" id="5240517"><a href="/go/parser/parser.go.html#5240412">p</a></span><span class="op" id="5240518">.</span><span class="ident" id="5240519">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240525"><a href="/go/parser/parser.go.html#5240412">p</a></span><span class="op" id="5240526">.</span><span class="ident" id="5240527">errorExpected</span><span class="op" id="5240540">(</span><span class="ident" id="5240541"><a href="/go/parser/parser.go.html#5240510">pos</a></span><span class="op" id="5240544">,</span>&nbsp;<span class="string" id="5240546">&#34;type&#34;</span><span class="op" id="5240552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240556"><a href="/go/parser/parser.go.html#5240412">p</a></span><span class="op" id="5240557">.</span><span class="ident" id="5240558">next</span><span class="op" id="5240562">(</span><span class="op" id="5240563">)</span>&nbsp;<span class="comment" id="5240565">//&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5240584"><a href="/go/parser/parser.go.html#5240462">typ</a></span>&nbsp;<span class="op" id="5240588">=</span>&nbsp;<span class="op" id="5240590">&amp;</span><span class="ident" id="5240591"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5240594">.</span><span class="ident" id="5240595">BadExpr</span><span class="op" id="5240602">{</span><span class="ident" id="5240603">From</span><span class="op" id="5240607">:</span>&nbsp;<span class="ident" id="5240609"><a href="/go/parser/parser.go.html#5240510">pos</a></span><span class="op" id="5240612">,</span>&nbsp;<span class="ident" id="5240614">To</span><span class="op" id="5240616">:</span>&nbsp;<span class="ident" id="5240618"><a href="/go/parser/parser.go.html#5240412">p</a></span><span class="op" id="5240619">.</span><span class="ident" id="5240620">pos</span><span class="op" id="5240623">}</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240629">return</span>&nbsp;<span class="ident" id="5240636"><a href="/go/parser/parser.go.html#5240462">typ</a></span><br>
<span class="lineno"></span><span class="op" id="5240640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5240643">//&nbsp;If&nbsp;any&nbsp;of&nbsp;the&nbsp;results&nbsp;are&nbsp;identifiers,&nbsp;they&nbsp;are&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno">785</span><span class="keyword" id="5240708">func</span>&nbsp;<span class="op" id="5240713">(</span><span class="ident" id="5240714">p</span>&nbsp;<span class="op" id="5240716">*</span><span class="ident" id="5240717"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5240723">)</span>&nbsp;<span class="ident" id="5240725">parseVarList</span><span class="op" id="5240737">(</span><span class="ident" id="5240738">isParam</span>&nbsp;<span class="builtintype" id="5240746">bool</span><span class="op" id="5240750">)</span>&nbsp;<span class="op" id="5240752">(</span><span class="ident" id="5240753">list</span>&nbsp;<span class="op" id="5240758">[</span><span class="op" id="5240759">]</span><span class="ident" id="5240760"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5240763">.</span><span class="ident" id="5240764">Expr</span><span class="op" id="5240768">,</span>&nbsp;<span class="ident" id="5240770">typ</span>&nbsp;<span class="ident" id="5240774"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5240777">.</span><span class="ident" id="5240778">Expr</span><span class="op" id="5240782">)</span>&nbsp;<span class="op" id="5240784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240787">if</span>&nbsp;<span class="ident" id="5240790"><a href="/go/parser/parser.go.html#5240714">p</a></span><span class="op" id="5240791">.</span><span class="ident" id="5240792">trace</span>&nbsp;<span class="op" id="5240798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5240802">defer</span>&nbsp;<span class="ident" id="5240808"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5240810">(</span><span class="ident" id="5240811"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5240816">(</span><span class="ident" id="5240817"><a href="/go/parser/parser.go.html#5240714">p</a></span><span class="op" id="5240818">,</span>&nbsp;<span class="string" id="5240820">&#34;VarList&#34;</span><span class="op" id="5240829">)</span><span class="op" id="5240830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5240833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5240837">//&nbsp;a&nbsp;list&nbsp;of&nbsp;identifiers&nbsp;looks&nbsp;like&nbsp;a&nbsp;list&nbsp;of&nbsp;type&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5240895">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5240899">//&nbsp;parse/tryVarType&nbsp;accepts&nbsp;any&nbsp;type&nbsp;(including&nbsp;parenthesized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5240962">//&nbsp;ones)&nbsp;even&nbsp;though&nbsp;the&nbsp;syntax&nbsp;does&nbsp;not&nbsp;permit&nbsp;them&nbsp;here:&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241025">//&nbsp;accept&nbsp;them&nbsp;all&nbsp;for&nbsp;more&nbsp;robust&nbsp;parsing&nbsp;and&nbsp;complain&nbsp;later</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241088">for</span>&nbsp;<span class="ident" id="5241092">typ</span>&nbsp;<span class="op" id="5241096">:=</span>&nbsp;<span class="ident" id="5241099"><a href="/go/parser/parser.go.html#5240714">p</a></span><span class="op" id="5241100">.</span><span class="ident" id="5241101">parseVarType</span><span class="op" id="5241113">(</span><span class="ident" id="5241114"><a href="/go/parser/parser.go.html#5240738">isParam</a></span><span class="op" id="5241121">)</span><span class="op" id="5241122">;</span>&nbsp;<span class="ident" id="5241124"><a href="/go/parser/parser.go.html#5241092">typ</a></span>&nbsp;<span class="op" id="5241128">!=</span>&nbsp;<span class="ident" id="5241131">nil</span><span class="op" id="5241134">;</span>&nbsp;<span class="op" id="5241136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241140"><a href="/go/parser/parser.go.html#5240753">list</a></span>&nbsp;<span class="op" id="5241145">=</span>&nbsp;<span class="builtinfunc" id="5241147">append</span><span class="op" id="5241153">(</span><span class="ident" id="5241154"><a href="/go/parser/parser.go.html#5240753">list</a></span><span class="op" id="5241158">,</span>&nbsp;<span class="ident" id="5241160"><a href="/go/parser/parser.go.html#5241092">typ</a></span><span class="op" id="5241163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241167">if</span>&nbsp;<span class="ident" id="5241170"><a href="/go/parser/parser.go.html#5240714">p</a></span><span class="op" id="5241171">.</span><span class="ident" id="5241172">tok</span>&nbsp;<span class="op" id="5241176">!=</span>&nbsp;<span class="ident" id="5241179"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5241184">.</span><span class="ident" id="5241185">COMMA</span>&nbsp;<span class="op" id="5241191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241196">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5241204">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241208"><a href="/go/parser/parser.go.html#5240714">p</a></span><span class="op" id="5241209">.</span><span class="ident" id="5241210">next</span><span class="op" id="5241214">(</span><span class="op" id="5241215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241219"><a href="/go/parser/parser.go.html#5241092">typ</a></span>&nbsp;<span class="op" id="5241223">=</span>&nbsp;<span class="ident" id="5241225"><a href="/go/parser/parser.go.html#5240714">p</a></span><span class="op" id="5241226">.</span><span class="ident" id="5241227">tryVarType</span><span class="op" id="5241237">(</span><span class="ident" id="5241238"><a href="/go/parser/parser.go.html#5240738">isParam</a></span><span class="op" id="5241245">)</span>&nbsp;<span class="comment" id="5241247">//&nbsp;maybe&nbsp;nil&nbsp;as&nbsp;in:&nbsp;func&nbsp;f(int,)&nbsp;{}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5241284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241288">//&nbsp;if&nbsp;we&nbsp;had&nbsp;a&nbsp;list&nbsp;of&nbsp;identifiers,&nbsp;it&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;type</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241355"><a href="/go/parser/parser.go.html#5240770">typ</a></span>&nbsp;<span class="op" id="5241359">=</span>&nbsp;<span class="ident" id="5241361"><a href="/go/parser/parser.go.html#5240714">p</a></span><span class="op" id="5241362">.</span><span class="ident" id="5241363">tryVarType</span><span class="op" id="5241373">(</span><span class="ident" id="5241374"><a href="/go/parser/parser.go.html#5240738">isParam</a></span><span class="op" id="5241381">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241385">return</span><br>
<span class="lineno"></span><span class="op" id="5241392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">810</span><span class="keyword" id="5241395">func</span>&nbsp;<span class="op" id="5241400">(</span><span class="ident" id="5241401">p</span>&nbsp;<span class="op" id="5241403">*</span><span class="ident" id="5241404"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5241410">)</span>&nbsp;<span class="ident" id="5241412">parseParameterList</span><span class="op" id="5241430">(</span><span class="ident" id="5241431">scope</span>&nbsp;<span class="op" id="5241437">*</span><span class="ident" id="5241438"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5241441">.</span><span class="ident" id="5241442">Scope</span><span class="op" id="5241447">,</span>&nbsp;<span class="ident" id="5241449">ellipsisOk</span>&nbsp;<span class="builtintype" id="5241460">bool</span><span class="op" id="5241464">)</span>&nbsp;<span class="op" id="5241466">(</span><span class="ident" id="5241467">params</span>&nbsp;<span class="op" id="5241474">[</span><span class="op" id="5241475">]</span><span class="op" id="5241476">*</span><span class="ident" id="5241477"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5241480">.</span><span class="ident" id="5241481">Field</span><span class="op" id="5241486">)</span>&nbsp;<span class="op" id="5241488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241491">if</span>&nbsp;<span class="ident" id="5241494"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5241495">.</span><span class="ident" id="5241496">trace</span>&nbsp;<span class="op" id="5241502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241506">defer</span>&nbsp;<span class="ident" id="5241512"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5241514">(</span><span class="ident" id="5241515"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5241520">(</span><span class="ident" id="5241521"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5241522">,</span>&nbsp;<span class="string" id="5241524">&#34;ParameterList&#34;</span><span class="op" id="5241539">)</span><span class="op" id="5241540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5241543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241547">//&nbsp;ParameterDecl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241565">list</span><span class="op" id="5241569">,</span>&nbsp;<span class="ident" id="5241571">typ</span>&nbsp;<span class="op" id="5241575">:=</span>&nbsp;<span class="ident" id="5241578"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5241579">.</span><span class="ident" id="5241580">parseVarList</span><span class="op" id="5241592">(</span><span class="ident" id="5241593"><a href="/go/parser/parser.go.html#5241449">ellipsisOk</a></span><span class="op" id="5241603">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241607">//&nbsp;analyze&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241624">if</span>&nbsp;<span class="ident" id="5241627"><a href="/go/parser/parser.go.html#5241571">typ</a></span>&nbsp;<span class="op" id="5241631">!=</span>&nbsp;<span class="ident" id="5241634">nil</span>&nbsp;<span class="op" id="5241638">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241642">//&nbsp;IdentifierList&nbsp;Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241667">idents</span>&nbsp;<span class="op" id="5241674">:=</span>&nbsp;<span class="ident" id="5241677"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5241678">.</span><span class="ident" id="5241679">makeIdentList</span><span class="op" id="5241692">(</span><span class="ident" id="5241693"><a href="/go/parser/parser.go.html#5241565">list</a></span><span class="op" id="5241697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241701">field</span>&nbsp;<span class="op" id="5241707">:=</span>&nbsp;<span class="op" id="5241710">&amp;</span><span class="ident" id="5241711"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5241714">.</span><span class="ident" id="5241715">Field</span><span class="op" id="5241720">{</span><span class="ident" id="5241721">Names</span><span class="op" id="5241726">:</span>&nbsp;<span class="ident" id="5241728"><a href="/go/parser/parser.go.html#5241667">idents</a></span><span class="op" id="5241734">,</span>&nbsp;<span class="ident" id="5241736">Type</span><span class="op" id="5241740">:</span>&nbsp;<span class="ident" id="5241742"><a href="/go/parser/parser.go.html#5241571">typ</a></span><span class="op" id="5241745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241749"><a href="/go/parser/parser.go.html#5241467">params</a></span>&nbsp;<span class="op" id="5241756">=</span>&nbsp;<span class="builtinfunc" id="5241758">append</span><span class="op" id="5241764">(</span><span class="ident" id="5241765"><a href="/go/parser/parser.go.html#5241467">params</a></span><span class="op" id="5241771">,</span>&nbsp;<span class="ident" id="5241773"><a href="/go/parser/parser.go.html#5241701">field</a></span><span class="op" id="5241778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241782">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;scope&nbsp;of&nbsp;an&nbsp;identifier&nbsp;denoting&nbsp;a&nbsp;function</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5241843">//&nbsp;parameter&nbsp;or&nbsp;result&nbsp;variable&nbsp;is&nbsp;the&nbsp;function&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241899"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5241900">.</span><span class="ident" id="5241901">declare</span><span class="op" id="5241908">(</span><span class="ident" id="5241909"><a href="/go/parser/parser.go.html#5241701">field</a></span><span class="op" id="5241914">,</span>&nbsp;<span class="ident" id="5241916">nil</span><span class="op" id="5241919">,</span>&nbsp;<span class="ident" id="5241921"><a href="/go/parser/parser.go.html#5241431">scope</a></span><span class="op" id="5241926">,</span>&nbsp;<span class="ident" id="5241928"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5241931">.</span><span class="ident" id="5241932">Var</span><span class="op" id="5241935">,</span>&nbsp;<span class="ident" id="5241937"><a href="/go/parser/parser.go.html#5241667">idents</a></span><span class="op" id="5241943">...</span><span class="op" id="5241946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5241950"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5241951">.</span><span class="ident" id="5241952">resolve</span><span class="op" id="5241959">(</span><span class="ident" id="5241960"><a href="/go/parser/parser.go.html#5241571">typ</a></span><span class="op" id="5241963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5241967">if</span>&nbsp;<span class="op" id="5241970">!</span><span class="ident" id="5241971"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5241972">.</span><span class="ident" id="5241973">atComma</span><span class="op" id="5241980">(</span><span class="string" id="5241981">&#34;parameter&nbsp;list&#34;</span><span class="op" id="5241997">)</span>&nbsp;<span class="op" id="5241999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242004">return</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242017"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5242018">.</span><span class="ident" id="5242019">next</span><span class="op" id="5242023">(</span><span class="op" id="5242024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242028">for</span>&nbsp;<span class="ident" id="5242032"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5242033">.</span><span class="ident" id="5242034">tok</span>&nbsp;<span class="op" id="5242038">!=</span>&nbsp;<span class="ident" id="5242041"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5242046">.</span><span class="ident" id="5242047">RPAREN</span>&nbsp;<span class="op" id="5242054">&amp;&amp;</span>&nbsp;<span class="ident" id="5242057"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5242058">.</span><span class="ident" id="5242059">tok</span>&nbsp;<span class="op" id="5242063">!=</span>&nbsp;<span class="ident" id="5242066"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5242071">.</span><span class="ident" id="5242072">EOF</span>&nbsp;<span class="op" id="5242076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242081">idents</span>&nbsp;<span class="op" id="5242088">:=</span>&nbsp;<span class="ident" id="5242091"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5242092">.</span><span class="ident" id="5242093">parseIdentList</span><span class="op" id="5242107">(</span><span class="op" id="5242108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242113">typ</span>&nbsp;<span class="op" id="5242117">:=</span>&nbsp;<span class="ident" id="5242120"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5242121">.</span><span class="ident" id="5242122">parseVarType</span><span class="op" id="5242134">(</span><span class="ident" id="5242135"><a href="/go/parser/parser.go.html#5241449">ellipsisOk</a></span><span class="op" id="5242145">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242150">field</span>&nbsp;<span class="op" id="5242156">:=</span>&nbsp;<span class="op" id="5242159">&amp;</span><span class="ident" id="5242160"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5242163">.</span><span class="ident" id="5242164">Field</span><span class="op" id="5242169">{</span><span class="ident" id="5242170">Names</span><span class="op" id="5242175">:</span>&nbsp;<span class="ident" id="5242177"><a href="/go/parser/parser.go.html#5242081">idents</a></span><span class="op" id="5242183">,</span>&nbsp;<span class="ident" id="5242185">Type</span><span class="op" id="5242189">:</span>&nbsp;<span class="ident" id="5242191"><a href="/go/parser/parser.go.html#5242113">typ</a></span><span class="op" id="5242194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242199"><a href="/go/parser/parser.go.html#5241467">params</a></span>&nbsp;<span class="op" id="5242206">=</span>&nbsp;<span class="builtinfunc" id="5242208">append</span><span class="op" id="5242214">(</span><span class="ident" id="5242215"><a href="/go/parser/parser.go.html#5241467">params</a></span><span class="op" id="5242221">,</span>&nbsp;<span class="ident" id="5242223"><a href="/go/parser/parser.go.html#5242150">field</a></span><span class="op" id="5242228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5242233">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;scope&nbsp;of&nbsp;an&nbsp;identifier&nbsp;denoting&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5242295">//&nbsp;parameter&nbsp;or&nbsp;result&nbsp;variable&nbsp;is&nbsp;the&nbsp;function&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242352"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5242353">.</span><span class="ident" id="5242354">declare</span><span class="op" id="5242361">(</span><span class="ident" id="5242362"><a href="/go/parser/parser.go.html#5242150">field</a></span><span class="op" id="5242367">,</span>&nbsp;<span class="ident" id="5242369">nil</span><span class="op" id="5242372">,</span>&nbsp;<span class="ident" id="5242374"><a href="/go/parser/parser.go.html#5241431">scope</a></span><span class="op" id="5242379">,</span>&nbsp;<span class="ident" id="5242381"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5242384">.</span><span class="ident" id="5242385">Var</span><span class="op" id="5242388">,</span>&nbsp;<span class="ident" id="5242390"><a href="/go/parser/parser.go.html#5242081">idents</a></span><span class="op" id="5242396">...</span><span class="op" id="5242399">)</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242404"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5242405">.</span><span class="ident" id="5242406">resolve</span><span class="op" id="5242413">(</span><span class="ident" id="5242414"><a href="/go/parser/parser.go.html#5242113">typ</a></span><span class="op" id="5242417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242422">if</span>&nbsp;<span class="op" id="5242425">!</span><span class="ident" id="5242426"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5242427">.</span><span class="ident" id="5242428">atComma</span><span class="op" id="5242435">(</span><span class="string" id="5242436">&#34;parameter&nbsp;list&#34;</span><span class="op" id="5242452">)</span>&nbsp;<span class="op" id="5242454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242460">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242474"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5242475">.</span><span class="ident" id="5242476">next</span><span class="op" id="5242480">(</span><span class="op" id="5242481">)</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242489">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5242501">//&nbsp;Type&nbsp;{&nbsp;&#34;,&#34;&nbsp;Type&nbsp;}&nbsp;(anonymous&nbsp;parameters)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242546"><a href="/go/parser/parser.go.html#5241467">params</a></span>&nbsp;<span class="op" id="5242553">=</span>&nbsp;<span class="builtinfunc" id="5242555">make</span><span class="op" id="5242559">(</span><span class="op" id="5242560">[</span><span class="op" id="5242561">]</span><span class="op" id="5242562">*</span><span class="ident" id="5242563"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5242566">.</span><span class="ident" id="5242567">Field</span><span class="op" id="5242572">,</span>&nbsp;<span class="builtinfunc" id="5242574">len</span><span class="op" id="5242577">(</span><span class="ident" id="5242578"><a href="/go/parser/parser.go.html#5241565">list</a></span><span class="op" id="5242582">)</span><span class="op" id="5242583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242586">for</span>&nbsp;<span class="ident" id="5242590">i</span><span class="op" id="5242591">,</span>&nbsp;<span class="ident" id="5242593">typ</span>&nbsp;<span class="op" id="5242597">:=</span>&nbsp;<span class="keyword" id="5242600">range</span>&nbsp;<span class="ident" id="5242606"><a href="/go/parser/parser.go.html#5241565">list</a></span>&nbsp;<span class="op" id="5242611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242615"><a href="/go/parser/parser.go.html#5241401">p</a></span><span class="op" id="5242616">.</span><span class="ident" id="5242617">resolve</span><span class="op" id="5242624">(</span><span class="ident" id="5242625"><a href="/go/parser/parser.go.html#5242593">typ</a></span><span class="op" id="5242628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242632"><a href="/go/parser/parser.go.html#5241467">params</a></span><span class="op" id="5242638">[</span><span class="ident" id="5242639"><a href="/go/parser/parser.go.html#5242590">i</a></span><span class="op" id="5242640">]</span>&nbsp;<span class="op" id="5242642">=</span>&nbsp;<span class="op" id="5242644">&amp;</span><span class="ident" id="5242645"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5242648">.</span><span class="ident" id="5242649">Field</span><span class="op" id="5242654">{</span><span class="ident" id="5242655">Type</span><span class="op" id="5242659">:</span>&nbsp;<span class="ident" id="5242661"><a href="/go/parser/parser.go.html#5242593">typ</a></span><span class="op" id="5242664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242667">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242670">return</span><br>
<span class="lineno"></span><span class="op" id="5242677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5242680">func</span>&nbsp;<span class="op" id="5242685">(</span><span class="ident" id="5242686">p</span>&nbsp;<span class="op" id="5242688">*</span><span class="ident" id="5242689"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5242695">)</span>&nbsp;<span class="ident" id="5242697">parseParameters</span><span class="op" id="5242712">(</span><span class="ident" id="5242713">scope</span>&nbsp;<span class="op" id="5242719">*</span><span class="ident" id="5242720"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5242723">.</span><span class="ident" id="5242724">Scope</span><span class="op" id="5242729">,</span>&nbsp;<span class="ident" id="5242731">ellipsisOk</span>&nbsp;<span class="builtintype" id="5242742">bool</span><span class="op" id="5242746">)</span>&nbsp;<span class="op" id="5242748">*</span><span class="ident" id="5242749"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5242752">.</span><span class="ident" id="5242753">FieldList</span>&nbsp;<span class="op" id="5242763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242766">if</span>&nbsp;<span class="ident" id="5242769"><a href="/go/parser/parser.go.html#5242686">p</a></span><span class="op" id="5242770">.</span><span class="ident" id="5242771">trace</span>&nbsp;<span class="op" id="5242777">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242781">defer</span>&nbsp;<span class="ident" id="5242787"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5242789">(</span><span class="ident" id="5242790"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5242795">(</span><span class="ident" id="5242796"><a href="/go/parser/parser.go.html#5242686">p</a></span><span class="op" id="5242797">,</span>&nbsp;<span class="string" id="5242799">&#34;Parameters&#34;</span><span class="op" id="5242811">)</span><span class="op" id="5242812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242819">var</span>&nbsp;<span class="ident" id="5242823">params</span>&nbsp;<span class="op" id="5242830">[</span><span class="op" id="5242831">]</span><span class="op" id="5242832">*</span><span class="ident" id="5242833"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5242836">.</span><span class="ident" id="5242837">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242844">lparen</span>&nbsp;<span class="op" id="5242851">:=</span>&nbsp;<span class="ident" id="5242854"><a href="/go/parser/parser.go.html#5242686">p</a></span><span class="op" id="5242855">.</span><span class="ident" id="5242856">expect</span><span class="op" id="5242862">(</span><span class="ident" id="5242863"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5242868">.</span><span class="ident" id="5242869">LPAREN</span><span class="op" id="5242875">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242878">if</span>&nbsp;<span class="ident" id="5242881"><a href="/go/parser/parser.go.html#5242686">p</a></span><span class="op" id="5242882">.</span><span class="ident" id="5242883">tok</span>&nbsp;<span class="op" id="5242887">!=</span>&nbsp;<span class="ident" id="5242890"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5242895">.</span><span class="ident" id="5242896">RPAREN</span>&nbsp;<span class="op" id="5242903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242907"><a href="/go/parser/parser.go.html#5242823">params</a></span>&nbsp;<span class="op" id="5242914">=</span>&nbsp;<span class="ident" id="5242916"><a href="/go/parser/parser.go.html#5242686">p</a></span><span class="op" id="5242917">.</span><span class="ident" id="5242918">parseParameterList</span><span class="op" id="5242936">(</span><span class="ident" id="5242937"><a href="/go/parser/parser.go.html#5242713">scope</a></span><span class="op" id="5242942">,</span>&nbsp;<span class="ident" id="5242944"><a href="/go/parser/parser.go.html#5242731">ellipsisOk</a></span><span class="op" id="5242954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5242957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5242960">rparen</span>&nbsp;<span class="op" id="5242967">:=</span>&nbsp;<span class="ident" id="5242970"><a href="/go/parser/parser.go.html#5242686">p</a></span><span class="op" id="5242971">.</span><span class="ident" id="5242972">expect</span><span class="op" id="5242978">(</span><span class="ident" id="5242979"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5242984">.</span><span class="ident" id="5242985">RPAREN</span><span class="op" id="5242991">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5242995">return</span>&nbsp;<span class="op" id="5243002">&amp;</span><span class="ident" id="5243003"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243006">.</span><span class="ident" id="5243007">FieldList</span><span class="op" id="5243016">{</span><span class="ident" id="5243017">Opening</span><span class="op" id="5243024">:</span>&nbsp;<span class="ident" id="5243026"><a href="/go/parser/parser.go.html#5242844">lparen</a></span><span class="op" id="5243032">,</span>&nbsp;<span class="ident" id="5243034">List</span><span class="op" id="5243038">:</span>&nbsp;<span class="ident" id="5243040"><a href="/go/parser/parser.go.html#5242823">params</a></span><span class="op" id="5243046">,</span>&nbsp;<span class="ident" id="5243048">Closing</span><span class="op" id="5243055">:</span>&nbsp;<span class="ident" id="5243057"><a href="/go/parser/parser.go.html#5242960">rparen</a></span><span class="op" id="5243063">}</span><br>
<span class="lineno"></span><span class="op" id="5243065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5243068">func</span>&nbsp;<span class="op" id="5243073">(</span><span class="ident" id="5243074">p</span>&nbsp;<span class="op" id="5243076">*</span><span class="ident" id="5243077"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5243083">)</span>&nbsp;<span class="ident" id="5243085">parseResult</span><span class="op" id="5243096">(</span><span class="ident" id="5243097">scope</span>&nbsp;<span class="op" id="5243103">*</span><span class="ident" id="5243104"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243107">.</span><span class="ident" id="5243108">Scope</span><span class="op" id="5243113">)</span>&nbsp;<span class="op" id="5243115">*</span><span class="ident" id="5243116"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243119">.</span><span class="ident" id="5243120">FieldList</span>&nbsp;<span class="op" id="5243130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243133">if</span>&nbsp;<span class="ident" id="5243136"><a href="/go/parser/parser.go.html#5243074">p</a></span><span class="op" id="5243137">.</span><span class="ident" id="5243138">trace</span>&nbsp;<span class="op" id="5243144">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243148">defer</span>&nbsp;<span class="ident" id="5243154"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5243156">(</span><span class="ident" id="5243157"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5243162">(</span><span class="ident" id="5243163"><a href="/go/parser/parser.go.html#5243074">p</a></span><span class="op" id="5243164">,</span>&nbsp;<span class="string" id="5243166">&#34;Result&#34;</span><span class="op" id="5243174">)</span><span class="op" id="5243175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243182">if</span>&nbsp;<span class="ident" id="5243185"><a href="/go/parser/parser.go.html#5243074">p</a></span><span class="op" id="5243186">.</span><span class="ident" id="5243187">tok</span>&nbsp;<span class="op" id="5243191">==</span>&nbsp;<span class="ident" id="5243194"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5243199">.</span><span class="ident" id="5243200">LPAREN</span>&nbsp;<span class="op" id="5243207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243211">return</span>&nbsp;<span class="ident" id="5243218"><a href="/go/parser/parser.go.html#5243074">p</a></span><span class="op" id="5243219">.</span><span class="ident" id="5243220">parseParameters</span><span class="op" id="5243235">(</span><span class="ident" id="5243236"><a href="/go/parser/parser.go.html#5243097">scope</a></span><span class="op" id="5243241">,</span>&nbsp;<span class="builtintype" id="5243243">false</span><span class="op" id="5243248">)</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243255">typ</span>&nbsp;<span class="op" id="5243259">:=</span>&nbsp;<span class="ident" id="5243262"><a href="/go/parser/parser.go.html#5243074">p</a></span><span class="op" id="5243263">.</span><span class="ident" id="5243264">tryType</span><span class="op" id="5243271">(</span><span class="op" id="5243272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243275">if</span>&nbsp;<span class="ident" id="5243278"><a href="/go/parser/parser.go.html#5243255">typ</a></span>&nbsp;<span class="op" id="5243282">!=</span>&nbsp;<span class="ident" id="5243285">nil</span>&nbsp;<span class="op" id="5243289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243293">list</span>&nbsp;<span class="op" id="5243298">:=</span>&nbsp;<span class="builtinfunc" id="5243301">make</span><span class="op" id="5243305">(</span><span class="op" id="5243306">[</span><span class="op" id="5243307">]</span><span class="op" id="5243308">*</span><span class="ident" id="5243309"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243312">.</span><span class="ident" id="5243313">Field</span><span class="op" id="5243318">,</span>&nbsp;<span class="num" id="5243320">1</span><span class="op" id="5243321">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243325"><a href="/go/parser/parser.go.html#5243293">list</a></span><span class="op" id="5243329">[</span><span class="num" id="5243330">0</span><span class="op" id="5243331">]</span>&nbsp;<span class="op" id="5243333">=</span>&nbsp;<span class="op" id="5243335">&amp;</span><span class="ident" id="5243336"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243339">.</span><span class="ident" id="5243340">Field</span><span class="op" id="5243345">{</span><span class="ident" id="5243346">Type</span><span class="op" id="5243350">:</span>&nbsp;<span class="ident" id="5243352"><a href="/go/parser/parser.go.html#5243255">typ</a></span><span class="op" id="5243355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243359">return</span>&nbsp;<span class="op" id="5243366">&amp;</span><span class="ident" id="5243367"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243370">.</span><span class="ident" id="5243371">FieldList</span><span class="op" id="5243380">{</span><span class="ident" id="5243381">List</span><span class="op" id="5243385">:</span>&nbsp;<span class="ident" id="5243387"><a href="/go/parser/parser.go.html#5243293">list</a></span><span class="op" id="5243391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243398">return</span>&nbsp;<span class="ident" id="5243405">nil</span><br>
<span class="lineno">890</span><span class="op" id="5243409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5243412">func</span>&nbsp;<span class="op" id="5243417">(</span><span class="ident" id="5243418">p</span>&nbsp;<span class="op" id="5243420">*</span><span class="ident" id="5243421"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5243427">)</span>&nbsp;<span class="ident" id="5243429">parseSignature</span><span class="op" id="5243443">(</span><span class="ident" id="5243444">scope</span>&nbsp;<span class="op" id="5243450">*</span><span class="ident" id="5243451"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243454">.</span><span class="ident" id="5243455">Scope</span><span class="op" id="5243460">)</span>&nbsp;<span class="op" id="5243462">(</span><span class="ident" id="5243463">params</span><span class="op" id="5243469">,</span>&nbsp;<span class="ident" id="5243471">results</span>&nbsp;<span class="op" id="5243479">*</span><span class="ident" id="5243480"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243483">.</span><span class="ident" id="5243484">FieldList</span><span class="op" id="5243493">)</span>&nbsp;<span class="op" id="5243495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243498">if</span>&nbsp;<span class="ident" id="5243501"><a href="/go/parser/parser.go.html#5243418">p</a></span><span class="op" id="5243502">.</span><span class="ident" id="5243503">trace</span>&nbsp;<span class="op" id="5243509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243513">defer</span>&nbsp;<span class="ident" id="5243519"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5243521">(</span><span class="ident" id="5243522"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5243527">(</span><span class="ident" id="5243528"><a href="/go/parser/parser.go.html#5243418">p</a></span><span class="op" id="5243529">,</span>&nbsp;<span class="string" id="5243531">&#34;Signature&#34;</span><span class="op" id="5243542">)</span><span class="op" id="5243543">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243550"><a href="/go/parser/parser.go.html#5243463">params</a></span>&nbsp;<span class="op" id="5243557">=</span>&nbsp;<span class="ident" id="5243559"><a href="/go/parser/parser.go.html#5243418">p</a></span><span class="op" id="5243560">.</span><span class="ident" id="5243561">parseParameters</span><span class="op" id="5243576">(</span><span class="ident" id="5243577"><a href="/go/parser/parser.go.html#5243444">scope</a></span><span class="op" id="5243582">,</span>&nbsp;<span class="builtintype" id="5243584">true</span><span class="op" id="5243588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243591"><a href="/go/parser/parser.go.html#5243471">results</a></span>&nbsp;<span class="op" id="5243599">=</span>&nbsp;<span class="ident" id="5243601"><a href="/go/parser/parser.go.html#5243418">p</a></span><span class="op" id="5243602">.</span><span class="ident" id="5243603">parseResult</span><span class="op" id="5243614">(</span><span class="ident" id="5243615"><a href="/go/parser/parser.go.html#5243444">scope</a></span><span class="op" id="5243620">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243624">return</span><br>
<span class="lineno"></span><span class="op" id="5243631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5243634">func</span>&nbsp;<span class="op" id="5243639">(</span><span class="ident" id="5243640">p</span>&nbsp;<span class="op" id="5243642">*</span><span class="ident" id="5243643"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5243649">)</span>&nbsp;<span class="ident" id="5243651">parseFuncType</span><span class="op" id="5243664">(</span><span class="op" id="5243665">)</span>&nbsp;<span class="op" id="5243667">(</span><span class="op" id="5243668">*</span><span class="ident" id="5243669"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243672">.</span><span class="ident" id="5243673">FuncType</span><span class="op" id="5243681">,</span>&nbsp;<span class="op" id="5243683">*</span><span class="ident" id="5243684"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243687">.</span><span class="ident" id="5243688">Scope</span><span class="op" id="5243693">)</span>&nbsp;<span class="op" id="5243695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243698">if</span>&nbsp;<span class="ident" id="5243701"><a href="/go/parser/parser.go.html#5243640">p</a></span><span class="op" id="5243702">.</span><span class="ident" id="5243703">trace</span>&nbsp;<span class="op" id="5243709">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243713">defer</span>&nbsp;<span class="ident" id="5243719"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5243721">(</span><span class="ident" id="5243722"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5243727">(</span><span class="ident" id="5243728"><a href="/go/parser/parser.go.html#5243640">p</a></span><span class="op" id="5243729">,</span>&nbsp;<span class="string" id="5243731">&#34;FuncType&#34;</span><span class="op" id="5243741">)</span><span class="op" id="5243742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5243745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243749">pos</span>&nbsp;<span class="op" id="5243753">:=</span>&nbsp;<span class="ident" id="5243756"><a href="/go/parser/parser.go.html#5243640">p</a></span><span class="op" id="5243757">.</span><span class="ident" id="5243758">expect</span><span class="op" id="5243764">(</span><span class="ident" id="5243765"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5243770">.</span><span class="ident" id="5243771">FUNC</span><span class="op" id="5243775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243778">scope</span>&nbsp;<span class="op" id="5243784">:=</span>&nbsp;<span class="ident" id="5243787"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243790">.</span><span class="ident" id="5243791">NewScope</span><span class="op" id="5243799">(</span><span class="ident" id="5243800"><a href="/go/parser/parser.go.html#5243640">p</a></span><span class="op" id="5243801">.</span><span class="ident" id="5243802">topScope</span><span class="op" id="5243810">)</span>&nbsp;<span class="comment" id="5243812">//&nbsp;function&nbsp;scope</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5243831">params</span><span class="op" id="5243837">,</span>&nbsp;<span class="ident" id="5243839">results</span>&nbsp;<span class="op" id="5243847">:=</span>&nbsp;<span class="ident" id="5243850"><a href="/go/parser/parser.go.html#5243640">p</a></span><span class="op" id="5243851">.</span><span class="ident" id="5243852">parseSignature</span><span class="op" id="5243866">(</span><span class="ident" id="5243867"><a href="/go/parser/parser.go.html#5243778">scope</a></span><span class="op" id="5243872">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5243876">return</span>&nbsp;<span class="op" id="5243883">&amp;</span><span class="ident" id="5243884"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243887">.</span><span class="ident" id="5243888">FuncType</span><span class="op" id="5243896">{</span><span class="ident" id="5243897">Func</span><span class="op" id="5243901">:</span>&nbsp;<span class="ident" id="5243903"><a href="/go/parser/parser.go.html#5243749">pos</a></span><span class="op" id="5243906">,</span>&nbsp;<span class="ident" id="5243908">Params</span><span class="op" id="5243914">:</span>&nbsp;<span class="ident" id="5243916"><a href="/go/parser/parser.go.html#5243831">params</a></span><span class="op" id="5243922">,</span>&nbsp;<span class="ident" id="5243924">Results</span><span class="op" id="5243931">:</span>&nbsp;<span class="ident" id="5243933"><a href="/go/parser/parser.go.html#5243839">results</a></span><span class="op" id="5243940">}</span><span class="op" id="5243941">,</span>&nbsp;<span class="ident" id="5243943"><a href="/go/parser/parser.go.html#5243778">scope</a></span><br>
<span class="lineno"></span><span class="op" id="5243949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">915</span><span class="keyword" id="5243952">func</span>&nbsp;<span class="op" id="5243957">(</span><span class="ident" id="5243958">p</span>&nbsp;<span class="op" id="5243960">*</span><span class="ident" id="5243961"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5243967">)</span>&nbsp;<span class="ident" id="5243969">parseMethodSpec</span><span class="op" id="5243984">(</span><span class="ident" id="5243985">scope</span>&nbsp;<span class="op" id="5243991">*</span><span class="ident" id="5243992"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5243995">.</span><span class="ident" id="5243996">Scope</span><span class="op" id="5244001">)</span>&nbsp;<span class="op" id="5244003">*</span><span class="ident" id="5244004"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5244007">.</span><span class="ident" id="5244008">Field</span>&nbsp;<span class="op" id="5244014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244017">if</span>&nbsp;<span class="ident" id="5244020"><a href="/go/parser/parser.go.html#5243958">p</a></span><span class="op" id="5244021">.</span><span class="ident" id="5244022">trace</span>&nbsp;<span class="op" id="5244028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244032">defer</span>&nbsp;<span class="ident" id="5244038"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5244040">(</span><span class="ident" id="5244041"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5244046">(</span><span class="ident" id="5244047"><a href="/go/parser/parser.go.html#5243958">p</a></span><span class="op" id="5244048">,</span>&nbsp;<span class="string" id="5244050">&#34;MethodSpec&#34;</span><span class="op" id="5244062">)</span><span class="op" id="5244063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5244066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244070">doc</span>&nbsp;<span class="op" id="5244074">:=</span>&nbsp;<span class="ident" id="5244077"><a href="/go/parser/parser.go.html#5243958">p</a></span><span class="op" id="5244078">.</span><span class="ident" id="5244079">leadComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244092">var</span>&nbsp;<span class="ident" id="5244096">idents</span>&nbsp;<span class="op" id="5244103">[</span><span class="op" id="5244104">]</span><span class="op" id="5244105">*</span><span class="ident" id="5244106"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5244109">.</span><span class="ident" id="5244110">Ident</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244117">var</span>&nbsp;<span class="ident" id="5244121">typ</span>&nbsp;<span class="ident" id="5244125"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5244128">.</span><span class="ident" id="5244129">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244135">x</span>&nbsp;<span class="op" id="5244137">:=</span>&nbsp;<span class="ident" id="5244140"><a href="/go/parser/parser.go.html#5243958">p</a></span><span class="op" id="5244141">.</span><span class="ident" id="5244142">parseTypeName</span><span class="op" id="5244155">(</span><span class="op" id="5244156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244159">if</span>&nbsp;<span class="ident" id="5244162">ident</span><span class="op" id="5244167">,</span>&nbsp;<span class="ident" id="5244169">isIdent</span>&nbsp;<span class="op" id="5244177">:=</span>&nbsp;<span class="ident" id="5244180"><a href="/go/parser/parser.go.html#5244135">x</a></span><span class="op" id="5244181">.</span><span class="op" id="5244182">(</span><span class="op" id="5244183">*</span><span class="ident" id="5244184"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5244187">.</span><span class="ident" id="5244188">Ident</span><span class="op" id="5244193">)</span><span class="op" id="5244194">;</span>&nbsp;<span class="ident" id="5244196"><a href="/go/parser/parser.go.html#5244169">isIdent</a></span>&nbsp;<span class="op" id="5244204">&amp;&amp;</span>&nbsp;<span class="ident" id="5244207"><a href="/go/parser/parser.go.html#5243958">p</a></span><span class="op" id="5244208">.</span><span class="ident" id="5244209">tok</span>&nbsp;<span class="op" id="5244213">==</span>&nbsp;<span class="ident" id="5244216"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5244221">.</span><span class="ident" id="5244222">LPAREN</span>&nbsp;<span class="op" id="5244229">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5244233">//&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244245"><a href="/go/parser/parser.go.html#5244096">idents</a></span>&nbsp;<span class="op" id="5244252">=</span>&nbsp;<span class="op" id="5244254">[</span><span class="op" id="5244255">]</span><span class="op" id="5244256">*</span><span class="ident" id="5244257"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5244260">.</span><span class="ident" id="5244261">Ident</span><span class="op" id="5244266">{</span><span class="ident" id="5244267"><a href="/go/parser/parser.go.html#5244162">ident</a></span><span class="op" id="5244272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244276">scope</span>&nbsp;<span class="op" id="5244282">:=</span>&nbsp;<span class="ident" id="5244285"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5244288">.</span><span class="ident" id="5244289">NewScope</span><span class="op" id="5244297">(</span><span class="ident" id="5244298">nil</span><span class="op" id="5244301">)</span>&nbsp;<span class="comment" id="5244303">//&nbsp;method&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244321">params</span><span class="op" id="5244327">,</span>&nbsp;<span class="ident" id="5244329">results</span>&nbsp;<span class="op" id="5244337">:=</span>&nbsp;<span class="ident" id="5244340"><a href="/go/parser/parser.go.html#5243958">p</a></span><span class="op" id="5244341">.</span><span class="ident" id="5244342">parseSignature</span><span class="op" id="5244356">(</span><span class="ident" id="5244357"><a href="/go/parser/parser.go.html#5244276">scope</a></span><span class="op" id="5244362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244366"><a href="/go/parser/parser.go.html#5244121">typ</a></span>&nbsp;<span class="op" id="5244370">=</span>&nbsp;<span class="op" id="5244372">&amp;</span><span class="ident" id="5244373"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5244376">.</span><span class="ident" id="5244377">FuncType</span><span class="op" id="5244385">{</span><span class="ident" id="5244386">Func</span><span class="op" id="5244390">:</span>&nbsp;<span class="ident" id="5244392"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5244397">.</span><span class="ident" id="5244398">NoPos</span><span class="op" id="5244403">,</span>&nbsp;<span class="ident" id="5244405">Params</span><span class="op" id="5244411">:</span>&nbsp;<span class="ident" id="5244413"><a href="/go/parser/parser.go.html#5244321">params</a></span><span class="op" id="5244419">,</span>&nbsp;<span class="ident" id="5244421">Results</span><span class="op" id="5244428">:</span>&nbsp;<span class="ident" id="5244430"><a href="/go/parser/parser.go.html#5244329">results</a></span><span class="op" id="5244437">}</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5244440">}</span>&nbsp;<span class="keyword" id="5244442">else</span>&nbsp;<span class="op" id="5244447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5244451">//&nbsp;embedded&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244475"><a href="/go/parser/parser.go.html#5244121">typ</a></span>&nbsp;<span class="op" id="5244479">=</span>&nbsp;<span class="ident" id="5244481"><a href="/go/parser/parser.go.html#5244135">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244485"><a href="/go/parser/parser.go.html#5243958">p</a></span><span class="op" id="5244486">.</span><span class="ident" id="5244487">resolve</span><span class="op" id="5244494">(</span><span class="ident" id="5244495"><a href="/go/parser/parser.go.html#5244121">typ</a></span><span class="op" id="5244498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5244501">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244504"><a href="/go/parser/parser.go.html#5243958">p</a></span><span class="op" id="5244505">.</span><span class="ident" id="5244506">expectSemi</span><span class="op" id="5244516">(</span><span class="op" id="5244517">)</span>&nbsp;<span class="comment" id="5244519">//&nbsp;call&nbsp;before&nbsp;accessing&nbsp;p.linecomment</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244560">spec</span>&nbsp;<span class="op" id="5244565">:=</span>&nbsp;<span class="op" id="5244568">&amp;</span><span class="ident" id="5244569"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5244572">.</span><span class="ident" id="5244573">Field</span><span class="op" id="5244578">{</span><span class="ident" id="5244579">Doc</span><span class="op" id="5244582">:</span>&nbsp;<span class="ident" id="5244584"><a href="/go/parser/parser.go.html#5244070">doc</a></span><span class="op" id="5244587">,</span>&nbsp;<span class="ident" id="5244589">Names</span><span class="op" id="5244594">:</span>&nbsp;<span class="ident" id="5244596"><a href="/go/parser/parser.go.html#5244096">idents</a></span><span class="op" id="5244602">,</span>&nbsp;<span class="ident" id="5244604">Type</span><span class="op" id="5244608">:</span>&nbsp;<span class="ident" id="5244610"><a href="/go/parser/parser.go.html#5244121">typ</a></span><span class="op" id="5244613">,</span>&nbsp;<span class="ident" id="5244615">Comment</span><span class="op" id="5244622">:</span>&nbsp;<span class="ident" id="5244624"><a href="/go/parser/parser.go.html#5243958">p</a></span><span class="op" id="5244625">.</span><span class="ident" id="5244626">lineComment</span><span class="op" id="5244637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244640"><a href="/go/parser/parser.go.html#5243958">p</a></span><span class="op" id="5244641">.</span><span class="ident" id="5244642">declare</span><span class="op" id="5244649">(</span><span class="ident" id="5244650"><a href="/go/parser/parser.go.html#5244560">spec</a></span><span class="op" id="5244654">,</span>&nbsp;<span class="ident" id="5244656">nil</span><span class="op" id="5244659">,</span>&nbsp;<span class="ident" id="5244661"><a href="/go/parser/parser.go.html#5243985">scope</a></span><span class="op" id="5244666">,</span>&nbsp;<span class="ident" id="5244668"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5244671">.</span><span class="ident" id="5244672">Fun</span><span class="op" id="5244675">,</span>&nbsp;<span class="ident" id="5244677"><a href="/go/parser/parser.go.html#5244096">idents</a></span><span class="op" id="5244683">...</span><span class="op" id="5244686">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244690">return</span>&nbsp;<span class="ident" id="5244697"><a href="/go/parser/parser.go.html#5244560">spec</a></span><br>
<span class="lineno"></span><span class="op" id="5244702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5244705">func</span>&nbsp;<span class="op" id="5244710">(</span><span class="ident" id="5244711">p</span>&nbsp;<span class="op" id="5244713">*</span><span class="ident" id="5244714"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5244720">)</span>&nbsp;<span class="ident" id="5244722">parseInterfaceType</span><span class="op" id="5244740">(</span><span class="op" id="5244741">)</span>&nbsp;<span class="op" id="5244743">*</span><span class="ident" id="5244744"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5244747">.</span><span class="ident" id="5244748">InterfaceType</span>&nbsp;<span class="op" id="5244762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244765">if</span>&nbsp;<span class="ident" id="5244768"><a href="/go/parser/parser.go.html#5244711">p</a></span><span class="op" id="5244769">.</span><span class="ident" id="5244770">trace</span>&nbsp;<span class="op" id="5244776">{</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244780">defer</span>&nbsp;<span class="ident" id="5244786"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5244788">(</span><span class="ident" id="5244789"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5244794">(</span><span class="ident" id="5244795"><a href="/go/parser/parser.go.html#5244711">p</a></span><span class="op" id="5244796">,</span>&nbsp;<span class="string" id="5244798">&#34;InterfaceType&#34;</span><span class="op" id="5244813">)</span><span class="op" id="5244814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5244817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244821">pos</span>&nbsp;<span class="op" id="5244825">:=</span>&nbsp;<span class="ident" id="5244828"><a href="/go/parser/parser.go.html#5244711">p</a></span><span class="op" id="5244829">.</span><span class="ident" id="5244830">expect</span><span class="op" id="5244836">(</span><span class="ident" id="5244837"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5244842">.</span><span class="ident" id="5244843">INTERFACE</span><span class="op" id="5244852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244855">lbrace</span>&nbsp;<span class="op" id="5244862">:=</span>&nbsp;<span class="ident" id="5244865"><a href="/go/parser/parser.go.html#5244711">p</a></span><span class="op" id="5244866">.</span><span class="ident" id="5244867">expect</span><span class="op" id="5244873">(</span><span class="ident" id="5244874"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5244879">.</span><span class="ident" id="5244880">LBRACE</span><span class="op" id="5244886">)</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244889">scope</span>&nbsp;<span class="op" id="5244895">:=</span>&nbsp;<span class="ident" id="5244898"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5244901">.</span><span class="ident" id="5244902">NewScope</span><span class="op" id="5244910">(</span><span class="ident" id="5244911">nil</span><span class="op" id="5244914">)</span>&nbsp;<span class="comment" id="5244916">//&nbsp;interface&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244936">var</span>&nbsp;<span class="ident" id="5244940">list</span>&nbsp;<span class="op" id="5244945">[</span><span class="op" id="5244946">]</span><span class="op" id="5244947">*</span><span class="ident" id="5244948"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5244951">.</span><span class="ident" id="5244952">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5244959">for</span>&nbsp;<span class="ident" id="5244963"><a href="/go/parser/parser.go.html#5244711">p</a></span><span class="op" id="5244964">.</span><span class="ident" id="5244965">tok</span>&nbsp;<span class="op" id="5244969">==</span>&nbsp;<span class="ident" id="5244972"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5244977">.</span><span class="ident" id="5244978">IDENT</span>&nbsp;<span class="op" id="5244984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5244988"><a href="/go/parser/parser.go.html#5244940">list</a></span>&nbsp;<span class="op" id="5244993">=</span>&nbsp;<span class="builtinfunc" id="5244995">append</span><span class="op" id="5245001">(</span><span class="ident" id="5245002"><a href="/go/parser/parser.go.html#5244940">list</a></span><span class="op" id="5245006">,</span>&nbsp;<span class="ident" id="5245008"><a href="/go/parser/parser.go.html#5244711">p</a></span><span class="op" id="5245009">.</span><span class="ident" id="5245010">parseMethodSpec</span><span class="op" id="5245025">(</span><span class="ident" id="5245026"><a href="/go/parser/parser.go.html#5244889">scope</a></span><span class="op" id="5245031">)</span><span class="op" id="5245032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245035">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245038">rbrace</span>&nbsp;<span class="op" id="5245045">:=</span>&nbsp;<span class="ident" id="5245048"><a href="/go/parser/parser.go.html#5244711">p</a></span><span class="op" id="5245049">.</span><span class="ident" id="5245050">expect</span><span class="op" id="5245056">(</span><span class="ident" id="5245057"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5245062">.</span><span class="ident" id="5245063">RBRACE</span><span class="op" id="5245069">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245073">return</span>&nbsp;<span class="op" id="5245080">&amp;</span><span class="ident" id="5245081"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5245084">.</span><span class="ident" id="5245085">InterfaceType</span><span class="op" id="5245098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245102">Interface</span><span class="op" id="5245111">:</span>&nbsp;<span class="ident" id="5245113"><a href="/go/parser/parser.go.html#5244821">pos</a></span><span class="op" id="5245116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245120">Methods</span><span class="op" id="5245127">:</span>&nbsp;<span class="op" id="5245129">&amp;</span><span class="ident" id="5245130"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5245133">.</span><span class="ident" id="5245134">FieldList</span><span class="op" id="5245143">{</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245148">Opening</span><span class="op" id="5245155">:</span>&nbsp;<span class="ident" id="5245157"><a href="/go/parser/parser.go.html#5244855">lbrace</a></span><span class="op" id="5245163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245168">List</span><span class="op" id="5245172">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5245177"><a href="/go/parser/parser.go.html#5244940">list</a></span><span class="op" id="5245181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245186">Closing</span><span class="op" id="5245193">:</span>&nbsp;<span class="ident" id="5245195"><a href="/go/parser/parser.go.html#5245038">rbrace</a></span><span class="op" id="5245201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245205">}</span><span class="op" id="5245206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245209">}</span><br>
<span class="lineno">965</span><span class="op" id="5245211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5245214">func</span>&nbsp;<span class="op" id="5245219">(</span><span class="ident" id="5245220">p</span>&nbsp;<span class="op" id="5245222">*</span><span class="ident" id="5245223"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5245229">)</span>&nbsp;<span class="ident" id="5245231">parseMapType</span><span class="op" id="5245243">(</span><span class="op" id="5245244">)</span>&nbsp;<span class="op" id="5245246">*</span><span class="ident" id="5245247"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5245250">.</span><span class="ident" id="5245251">MapType</span>&nbsp;<span class="op" id="5245259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245262">if</span>&nbsp;<span class="ident" id="5245265"><a href="/go/parser/parser.go.html#5245220">p</a></span><span class="op" id="5245266">.</span><span class="ident" id="5245267">trace</span>&nbsp;<span class="op" id="5245273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245277">defer</span>&nbsp;<span class="ident" id="5245283"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5245285">(</span><span class="ident" id="5245286"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5245291">(</span><span class="ident" id="5245292"><a href="/go/parser/parser.go.html#5245220">p</a></span><span class="op" id="5245293">,</span>&nbsp;<span class="string" id="5245295">&#34;MapType&#34;</span><span class="op" id="5245304">)</span><span class="op" id="5245305">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245312">pos</span>&nbsp;<span class="op" id="5245316">:=</span>&nbsp;<span class="ident" id="5245319"><a href="/go/parser/parser.go.html#5245220">p</a></span><span class="op" id="5245320">.</span><span class="ident" id="5245321">expect</span><span class="op" id="5245327">(</span><span class="ident" id="5245328"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5245333">.</span><span class="ident" id="5245334">MAP</span><span class="op" id="5245337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245340"><a href="/go/parser/parser.go.html#5245220">p</a></span><span class="op" id="5245341">.</span><span class="ident" id="5245342">expect</span><span class="op" id="5245348">(</span><span class="ident" id="5245349"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5245354">.</span><span class="ident" id="5245355">LBRACK</span><span class="op" id="5245361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245364">key</span>&nbsp;<span class="op" id="5245368">:=</span>&nbsp;<span class="ident" id="5245371"><a href="/go/parser/parser.go.html#5245220">p</a></span><span class="op" id="5245372">.</span><span class="ident" id="5245373">parseType</span><span class="op" id="5245382">(</span><span class="op" id="5245383">)</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245386"><a href="/go/parser/parser.go.html#5245220">p</a></span><span class="op" id="5245387">.</span><span class="ident" id="5245388">expect</span><span class="op" id="5245394">(</span><span class="ident" id="5245395"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5245400">.</span><span class="ident" id="5245401">RBRACK</span><span class="op" id="5245407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245410">value</span>&nbsp;<span class="op" id="5245416">:=</span>&nbsp;<span class="ident" id="5245419"><a href="/go/parser/parser.go.html#5245220">p</a></span><span class="op" id="5245420">.</span><span class="ident" id="5245421">parseType</span><span class="op" id="5245430">(</span><span class="op" id="5245431">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245435">return</span>&nbsp;<span class="op" id="5245442">&amp;</span><span class="ident" id="5245443"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5245446">.</span><span class="ident" id="5245447">MapType</span><span class="op" id="5245454">{</span><span class="ident" id="5245455">Map</span><span class="op" id="5245458">:</span>&nbsp;<span class="ident" id="5245460"><a href="/go/parser/parser.go.html#5245312">pos</a></span><span class="op" id="5245463">,</span>&nbsp;<span class="ident" id="5245465">Key</span><span class="op" id="5245468">:</span>&nbsp;<span class="ident" id="5245470"><a href="/go/parser/parser.go.html#5245364">key</a></span><span class="op" id="5245473">,</span>&nbsp;<span class="ident" id="5245475">Value</span><span class="op" id="5245480">:</span>&nbsp;<span class="ident" id="5245482"><a href="/go/parser/parser.go.html#5245410">value</a></span><span class="op" id="5245487">}</span><br>
<span class="lineno"></span><span class="op" id="5245489">}</span><br>
<span class="lineno">980</span><br>
<span class="lineno"></span><span class="keyword" id="5245492">func</span>&nbsp;<span class="op" id="5245497">(</span><span class="ident" id="5245498">p</span>&nbsp;<span class="op" id="5245500">*</span><span class="ident" id="5245501"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5245507">)</span>&nbsp;<span class="ident" id="5245509">parseChanType</span><span class="op" id="5245522">(</span><span class="op" id="5245523">)</span>&nbsp;<span class="op" id="5245525">*</span><span class="ident" id="5245526"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5245529">.</span><span class="ident" id="5245530">ChanType</span>&nbsp;<span class="op" id="5245539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245542">if</span>&nbsp;<span class="ident" id="5245545"><a href="/go/parser/parser.go.html#5245498">p</a></span><span class="op" id="5245546">.</span><span class="ident" id="5245547">trace</span>&nbsp;<span class="op" id="5245553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245557">defer</span>&nbsp;<span class="ident" id="5245563"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5245565">(</span><span class="ident" id="5245566"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5245571">(</span><span class="ident" id="5245572"><a href="/go/parser/parser.go.html#5245498">p</a></span><span class="op" id="5245573">,</span>&nbsp;<span class="string" id="5245575">&#34;ChanType&#34;</span><span class="op" id="5245585">)</span><span class="op" id="5245586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245589">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245593">pos</span>&nbsp;<span class="op" id="5245597">:=</span>&nbsp;<span class="ident" id="5245600"><a href="/go/parser/parser.go.html#5245498">p</a></span><span class="op" id="5245601">.</span><span class="ident" id="5245602">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245607">dir</span>&nbsp;<span class="op" id="5245611">:=</span>&nbsp;<span class="ident" id="5245614"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5245617">.</span><span class="ident" id="5245618">SEND</span>&nbsp;<span class="op" id="5245623">|</span>&nbsp;<span class="ident" id="5245625"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5245628">.</span><span class="ident" id="5245629">RECV</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245635">var</span>&nbsp;<span class="ident" id="5245639">arrow</span>&nbsp;<span class="ident" id="5245645"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5245650">.</span><span class="ident" id="5245651">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245656">if</span>&nbsp;<span class="ident" id="5245659"><a href="/go/parser/parser.go.html#5245498">p</a></span><span class="op" id="5245660">.</span><span class="ident" id="5245661">tok</span>&nbsp;<span class="op" id="5245665">==</span>&nbsp;<span class="ident" id="5245668"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5245673">.</span><span class="ident" id="5245674">CHAN</span>&nbsp;<span class="op" id="5245679">{</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245683"><a href="/go/parser/parser.go.html#5245498">p</a></span><span class="op" id="5245684">.</span><span class="ident" id="5245685">next</span><span class="op" id="5245689">(</span><span class="op" id="5245690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245694">if</span>&nbsp;<span class="ident" id="5245697"><a href="/go/parser/parser.go.html#5245498">p</a></span><span class="op" id="5245698">.</span><span class="ident" id="5245699">tok</span>&nbsp;<span class="op" id="5245703">==</span>&nbsp;<span class="ident" id="5245706"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5245711">.</span><span class="ident" id="5245712">ARROW</span>&nbsp;<span class="op" id="5245718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245723"><a href="/go/parser/parser.go.html#5245639">arrow</a></span>&nbsp;<span class="op" id="5245729">=</span>&nbsp;<span class="ident" id="5245731"><a href="/go/parser/parser.go.html#5245498">p</a></span><span class="op" id="5245732">.</span><span class="ident" id="5245733">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245740"><a href="/go/parser/parser.go.html#5245498">p</a></span><span class="op" id="5245741">.</span><span class="ident" id="5245742">next</span><span class="op" id="5245746">(</span><span class="op" id="5245747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245752"><a href="/go/parser/parser.go.html#5245607">dir</a></span>&nbsp;<span class="op" id="5245756">=</span>&nbsp;<span class="ident" id="5245758"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5245761">.</span><span class="ident" id="5245762">SEND</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245772">}</span>&nbsp;<span class="keyword" id="5245774">else</span>&nbsp;<span class="op" id="5245779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245783"><a href="/go/parser/parser.go.html#5245639">arrow</a></span>&nbsp;<span class="op" id="5245789">=</span>&nbsp;<span class="ident" id="5245791"><a href="/go/parser/parser.go.html#5245498">p</a></span><span class="op" id="5245792">.</span><span class="ident" id="5245793">expect</span><span class="op" id="5245799">(</span><span class="ident" id="5245800"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5245805">.</span><span class="ident" id="5245806">ARROW</span><span class="op" id="5245811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245815"><a href="/go/parser/parser.go.html#5245498">p</a></span><span class="op" id="5245816">.</span><span class="ident" id="5245817">expect</span><span class="op" id="5245823">(</span><span class="ident" id="5245824"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5245829">.</span><span class="ident" id="5245830">CHAN</span><span class="op" id="5245834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245838"><a href="/go/parser/parser.go.html#5245607">dir</a></span>&nbsp;<span class="op" id="5245842">=</span>&nbsp;<span class="ident" id="5245844"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5245847">.</span><span class="ident" id="5245848">RECV</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5245854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245857">value</span>&nbsp;<span class="op" id="5245863">:=</span>&nbsp;<span class="ident" id="5245866"><a href="/go/parser/parser.go.html#5245498">p</a></span><span class="op" id="5245867">.</span><span class="ident" id="5245868">parseType</span><span class="op" id="5245877">(</span><span class="op" id="5245878">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5245882">return</span>&nbsp;<span class="op" id="5245889">&amp;</span><span class="ident" id="5245890"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5245893">.</span><span class="ident" id="5245894">ChanType</span><span class="op" id="5245902">{</span><span class="ident" id="5245903">Begin</span><span class="op" id="5245908">:</span>&nbsp;<span class="ident" id="5245910"><a href="/go/parser/parser.go.html#5245593">pos</a></span><span class="op" id="5245913">,</span>&nbsp;<span class="ident" id="5245915">Arrow</span><span class="op" id="5245920">:</span>&nbsp;<span class="ident" id="5245922"><a href="/go/parser/parser.go.html#5245639">arrow</a></span><span class="op" id="5245927">,</span>&nbsp;<span class="ident" id="5245929">Dir</span><span class="op" id="5245932">:</span>&nbsp;<span class="ident" id="5245934"><a href="/go/parser/parser.go.html#5245607">dir</a></span><span class="op" id="5245937">,</span>&nbsp;<span class="ident" id="5245939">Value</span><span class="op" id="5245944">:</span>&nbsp;<span class="ident" id="5245946"><a href="/go/parser/parser.go.html#5245857">value</a></span><span class="op" id="5245951">}</span><br>
<span class="lineno"></span><span class="op" id="5245953">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="5245956">//&nbsp;If&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="5246011">func</span>&nbsp;<span class="op" id="5246016">(</span><span class="ident" id="5246017">p</span>&nbsp;<span class="op" id="5246019">*</span><span class="ident" id="5246020"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5246026">)</span>&nbsp;<span class="ident" id="5246028">tryIdentOrType</span><span class="op" id="5246042">(</span><span class="op" id="5246043">)</span>&nbsp;<span class="ident" id="5246045"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5246048">.</span><span class="ident" id="5246049">Expr</span>&nbsp;<span class="op" id="5246054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246057">switch</span>&nbsp;<span class="ident" id="5246064"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246065">.</span><span class="ident" id="5246066">tok</span>&nbsp;<span class="op" id="5246070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246073">case</span>&nbsp;<span class="ident" id="5246078"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5246083">.</span><span class="ident" id="5246084">IDENT</span><span class="op" id="5246089">:</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246093">return</span>&nbsp;<span class="ident" id="5246100"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246101">.</span><span class="ident" id="5246102">parseTypeName</span><span class="op" id="5246115">(</span><span class="op" id="5246116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246119">case</span>&nbsp;<span class="ident" id="5246124"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5246129">.</span><span class="ident" id="5246130">LBRACK</span><span class="op" id="5246136">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246140">return</span>&nbsp;<span class="ident" id="5246147"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246148">.</span><span class="ident" id="5246149">parseArrayType</span><span class="op" id="5246163">(</span><span class="op" id="5246164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246167">case</span>&nbsp;<span class="ident" id="5246172"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5246177">.</span><span class="ident" id="5246178">STRUCT</span><span class="op" id="5246184">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246188">return</span>&nbsp;<span class="ident" id="5246195"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246196">.</span><span class="ident" id="5246197">parseStructType</span><span class="op" id="5246212">(</span><span class="op" id="5246213">)</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246216">case</span>&nbsp;<span class="ident" id="5246221"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5246226">.</span><span class="ident" id="5246227">MUL</span><span class="op" id="5246230">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246234">return</span>&nbsp;<span class="ident" id="5246241"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246242">.</span><span class="ident" id="5246243">parsePointerType</span><span class="op" id="5246259">(</span><span class="op" id="5246260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246263">case</span>&nbsp;<span class="ident" id="5246268"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5246273">.</span><span class="ident" id="5246274">FUNC</span><span class="op" id="5246278">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246282">typ</span><span class="op" id="5246285">,</span>&nbsp;<span class="ident" id="5246287">_</span>&nbsp;<span class="op" id="5246289">:=</span>&nbsp;<span class="ident" id="5246292"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246293">.</span><span class="ident" id="5246294">parseFuncType</span><span class="op" id="5246307">(</span><span class="op" id="5246308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246312">return</span>&nbsp;<span class="ident" id="5246319"><a href="/go/parser/parser.go.html#5246282">typ</a></span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246324">case</span>&nbsp;<span class="ident" id="5246329"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5246334">.</span><span class="ident" id="5246335">INTERFACE</span><span class="op" id="5246344">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246348">return</span>&nbsp;<span class="ident" id="5246355"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246356">.</span><span class="ident" id="5246357">parseInterfaceType</span><span class="op" id="5246375">(</span><span class="op" id="5246376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246379">case</span>&nbsp;<span class="ident" id="5246384"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5246389">.</span><span class="ident" id="5246390">MAP</span><span class="op" id="5246393">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246397">return</span>&nbsp;<span class="ident" id="5246404"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246405">.</span><span class="ident" id="5246406">parseMapType</span><span class="op" id="5246418">(</span><span class="op" id="5246419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246422">case</span>&nbsp;<span class="ident" id="5246427"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5246432">.</span><span class="ident" id="5246433">CHAN</span><span class="op" id="5246437">,</span>&nbsp;<span class="ident" id="5246439"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5246444">.</span><span class="ident" id="5246445">ARROW</span><span class="op" id="5246450">:</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246454">return</span>&nbsp;<span class="ident" id="5246461"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246462">.</span><span class="ident" id="5246463">parseChanType</span><span class="op" id="5246476">(</span><span class="op" id="5246477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246480">case</span>&nbsp;<span class="ident" id="5246485"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5246490">.</span><span class="ident" id="5246491">LPAREN</span><span class="op" id="5246497">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246501">lparen</span>&nbsp;<span class="op" id="5246508">:=</span>&nbsp;<span class="ident" id="5246511"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246512">.</span><span class="ident" id="5246513">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246519"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246520">.</span><span class="ident" id="5246521">next</span><span class="op" id="5246525">(</span><span class="op" id="5246526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246530">typ</span>&nbsp;<span class="op" id="5246534">:=</span>&nbsp;<span class="ident" id="5246537"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246538">.</span><span class="ident" id="5246539">parseType</span><span class="op" id="5246548">(</span><span class="op" id="5246549">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246553">rparen</span>&nbsp;<span class="op" id="5246560">:=</span>&nbsp;<span class="ident" id="5246563"><a href="/go/parser/parser.go.html#5246017">p</a></span><span class="op" id="5246564">.</span><span class="ident" id="5246565">expect</span><span class="op" id="5246571">(</span><span class="ident" id="5246572"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5246577">.</span><span class="ident" id="5246578">RPAREN</span><span class="op" id="5246584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246588">return</span>&nbsp;<span class="op" id="5246595">&amp;</span><span class="ident" id="5246596"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5246599">.</span><span class="ident" id="5246600">ParenExpr</span><span class="op" id="5246609">{</span><span class="ident" id="5246610">Lparen</span><span class="op" id="5246616">:</span>&nbsp;<span class="ident" id="5246618"><a href="/go/parser/parser.go.html#5246501">lparen</a></span><span class="op" id="5246624">,</span>&nbsp;<span class="ident" id="5246626">X</span><span class="op" id="5246627">:</span>&nbsp;<span class="ident" id="5246629"><a href="/go/parser/parser.go.html#5246530">typ</a></span><span class="op" id="5246632">,</span>&nbsp;<span class="ident" id="5246634">Rparen</span><span class="op" id="5246640">:</span>&nbsp;<span class="ident" id="5246642"><a href="/go/parser/parser.go.html#5246553">rparen</a></span><span class="op" id="5246648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5246651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5246655">//&nbsp;no&nbsp;type&nbsp;found</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246673">return</span>&nbsp;<span class="ident" id="5246680">nil</span><br>
<span class="lineno"></span><span class="op" id="5246684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5246687">func</span>&nbsp;<span class="op" id="5246692">(</span><span class="ident" id="5246693">p</span>&nbsp;<span class="op" id="5246695">*</span><span class="ident" id="5246696"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5246702">)</span>&nbsp;<span class="ident" id="5246704">tryType</span><span class="op" id="5246711">(</span><span class="op" id="5246712">)</span>&nbsp;<span class="ident" id="5246714"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5246717">.</span><span class="ident" id="5246718">Expr</span>&nbsp;<span class="op" id="5246723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246726">typ</span>&nbsp;<span class="op" id="5246730">:=</span>&nbsp;<span class="ident" id="5246733"><a href="/go/parser/parser.go.html#5246693">p</a></span><span class="op" id="5246734">.</span><span class="ident" id="5246735">tryIdentOrType</span><span class="op" id="5246749">(</span><span class="op" id="5246750">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246753">if</span>&nbsp;<span class="ident" id="5246756"><a href="/go/parser/parser.go.html#5246726">typ</a></span>&nbsp;<span class="op" id="5246760">!=</span>&nbsp;<span class="ident" id="5246763">nil</span>&nbsp;<span class="op" id="5246767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5246771"><a href="/go/parser/parser.go.html#5246693">p</a></span><span class="op" id="5246772">.</span><span class="ident" id="5246773">resolve</span><span class="op" id="5246780">(</span><span class="ident" id="5246781"><a href="/go/parser/parser.go.html#5246726">typ</a></span><span class="op" id="5246784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5246787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246790">return</span>&nbsp;<span class="ident" id="5246797"><a href="/go/parser/parser.go.html#5246726">typ</a></span><br>
<span class="lineno"></span><span class="op" id="5246801">}</span><br>
<span class="lineno">1045</span><br>
<span class="lineno"></span><span class="comment" id="5246804">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5246884">//&nbsp;Blocks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5246895">func</span>&nbsp;<span class="op" id="5246900">(</span><span class="ident" id="5246901">p</span>&nbsp;<span class="op" id="5246903">*</span><span class="ident" id="5246904"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5246910">)</span>&nbsp;<span class="ident" id="5246912">parseStmtList</span><span class="op" id="5246925">(</span><span class="op" id="5246926">)</span>&nbsp;<span class="op" id="5246928">(</span><span class="ident" id="5246929">list</span>&nbsp;<span class="op" id="5246934">[</span><span class="op" id="5246935">]</span><span class="ident" id="5246936"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5246939">.</span><span class="ident" id="5246940">Stmt</span><span class="op" id="5246944">)</span>&nbsp;<span class="op" id="5246946">{</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246949">if</span>&nbsp;<span class="ident" id="5246952"><a href="/go/parser/parser.go.html#5246901">p</a></span><span class="op" id="5246953">.</span><span class="ident" id="5246954">trace</span>&nbsp;<span class="op" id="5246960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5246964">defer</span>&nbsp;<span class="ident" id="5246970"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5246972">(</span><span class="ident" id="5246973"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5246978">(</span><span class="ident" id="5246979"><a href="/go/parser/parser.go.html#5246901">p</a></span><span class="op" id="5246980">,</span>&nbsp;<span class="string" id="5246982">&#34;StatementList&#34;</span><span class="op" id="5246997">)</span><span class="op" id="5246998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247005">for</span>&nbsp;<span class="ident" id="5247009"><a href="/go/parser/parser.go.html#5246901">p</a></span><span class="op" id="5247010">.</span><span class="ident" id="5247011">tok</span>&nbsp;<span class="op" id="5247015">!=</span>&nbsp;<span class="ident" id="5247018"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5247023">.</span><span class="ident" id="5247024">CASE</span>&nbsp;<span class="op" id="5247029">&amp;&amp;</span>&nbsp;<span class="ident" id="5247032"><a href="/go/parser/parser.go.html#5246901">p</a></span><span class="op" id="5247033">.</span><span class="ident" id="5247034">tok</span>&nbsp;<span class="op" id="5247038">!=</span>&nbsp;<span class="ident" id="5247041"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5247046">.</span><span class="ident" id="5247047">DEFAULT</span>&nbsp;<span class="op" id="5247055">&amp;&amp;</span>&nbsp;<span class="ident" id="5247058"><a href="/go/parser/parser.go.html#5246901">p</a></span><span class="op" id="5247059">.</span><span class="ident" id="5247060">tok</span>&nbsp;<span class="op" id="5247064">!=</span>&nbsp;<span class="ident" id="5247067"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5247072">.</span><span class="ident" id="5247073">RBRACE</span>&nbsp;<span class="op" id="5247080">&amp;&amp;</span>&nbsp;<span class="ident" id="5247083"><a href="/go/parser/parser.go.html#5246901">p</a></span><span class="op" id="5247084">.</span><span class="ident" id="5247085">tok</span>&nbsp;<span class="op" id="5247089">!=</span>&nbsp;<span class="ident" id="5247092"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5247097">.</span><span class="ident" id="5247098">EOF</span>&nbsp;<span class="op" id="5247102">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247106"><a href="/go/parser/parser.go.html#5246929">list</a></span>&nbsp;<span class="op" id="5247111">=</span>&nbsp;<span class="builtinfunc" id="5247113">append</span><span class="op" id="5247119">(</span><span class="ident" id="5247120"><a href="/go/parser/parser.go.html#5246929">list</a></span><span class="op" id="5247124">,</span>&nbsp;<span class="ident" id="5247126"><a href="/go/parser/parser.go.html#5246901">p</a></span><span class="op" id="5247127">.</span><span class="ident" id="5247128">parseStmt</span><span class="op" id="5247137">(</span><span class="op" id="5247138">)</span><span class="op" id="5247139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247146">return</span><br>
<span class="lineno"></span><span class="op" id="5247153">}</span><br>
<span class="lineno">1060</span><br>
<span class="lineno"></span><span class="keyword" id="5247156">func</span>&nbsp;<span class="op" id="5247161">(</span><span class="ident" id="5247162">p</span>&nbsp;<span class="op" id="5247164">*</span><span class="ident" id="5247165"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5247171">)</span>&nbsp;<span class="ident" id="5247173">parseBody</span><span class="op" id="5247182">(</span><span class="ident" id="5247183">scope</span>&nbsp;<span class="op" id="5247189">*</span><span class="ident" id="5247190"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5247193">.</span><span class="ident" id="5247194">Scope</span><span class="op" id="5247199">)</span>&nbsp;<span class="op" id="5247201">*</span><span class="ident" id="5247202"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5247205">.</span><span class="ident" id="5247206">BlockStmt</span>&nbsp;<span class="op" id="5247216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247219">if</span>&nbsp;<span class="ident" id="5247222"><a href="/go/parser/parser.go.html#5247162">p</a></span><span class="op" id="5247223">.</span><span class="ident" id="5247224">trace</span>&nbsp;<span class="op" id="5247230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247234">defer</span>&nbsp;<span class="ident" id="5247240"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5247242">(</span><span class="ident" id="5247243"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5247248">(</span><span class="ident" id="5247249"><a href="/go/parser/parser.go.html#5247162">p</a></span><span class="op" id="5247250">,</span>&nbsp;<span class="string" id="5247252">&#34;Body&#34;</span><span class="op" id="5247258">)</span><span class="op" id="5247259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247262">}</span><br>
<span class="lineno">1065</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247266">lbrace</span>&nbsp;<span class="op" id="5247273">:=</span>&nbsp;<span class="ident" id="5247276"><a href="/go/parser/parser.go.html#5247162">p</a></span><span class="op" id="5247277">.</span><span class="ident" id="5247278">expect</span><span class="op" id="5247284">(</span><span class="ident" id="5247285"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5247290">.</span><span class="ident" id="5247291">LBRACE</span><span class="op" id="5247297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247300"><a href="/go/parser/parser.go.html#5247162">p</a></span><span class="op" id="5247301">.</span><span class="ident" id="5247302">topScope</span>&nbsp;<span class="op" id="5247311">=</span>&nbsp;<span class="ident" id="5247313"><a href="/go/parser/parser.go.html#5247183">scope</a></span>&nbsp;<span class="comment" id="5247319">//&nbsp;open&nbsp;function&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247343"><a href="/go/parser/parser.go.html#5247162">p</a></span><span class="op" id="5247344">.</span><span class="ident" id="5247345">openLabelScope</span><span class="op" id="5247359">(</span><span class="op" id="5247360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247363">list</span>&nbsp;<span class="op" id="5247368">:=</span>&nbsp;<span class="ident" id="5247371"><a href="/go/parser/parser.go.html#5247162">p</a></span><span class="op" id="5247372">.</span><span class="ident" id="5247373">parseStmtList</span><span class="op" id="5247386">(</span><span class="op" id="5247387">)</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247390"><a href="/go/parser/parser.go.html#5247162">p</a></span><span class="op" id="5247391">.</span><span class="ident" id="5247392">closeLabelScope</span><span class="op" id="5247407">(</span><span class="op" id="5247408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247411"><a href="/go/parser/parser.go.html#5247162">p</a></span><span class="op" id="5247412">.</span><span class="ident" id="5247413">closeScope</span><span class="op" id="5247423">(</span><span class="op" id="5247424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247427">rbrace</span>&nbsp;<span class="op" id="5247434">:=</span>&nbsp;<span class="ident" id="5247437"><a href="/go/parser/parser.go.html#5247162">p</a></span><span class="op" id="5247438">.</span><span class="ident" id="5247439">expect</span><span class="op" id="5247445">(</span><span class="ident" id="5247446"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5247451">.</span><span class="ident" id="5247452">RBRACE</span><span class="op" id="5247458">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247462">return</span>&nbsp;<span class="op" id="5247469">&amp;</span><span class="ident" id="5247470"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5247473">.</span><span class="ident" id="5247474">BlockStmt</span><span class="op" id="5247483">{</span><span class="ident" id="5247484">Lbrace</span><span class="op" id="5247490">:</span>&nbsp;<span class="ident" id="5247492"><a href="/go/parser/parser.go.html#5247266">lbrace</a></span><span class="op" id="5247498">,</span>&nbsp;<span class="ident" id="5247500">List</span><span class="op" id="5247504">:</span>&nbsp;<span class="ident" id="5247506"><a href="/go/parser/parser.go.html#5247363">list</a></span><span class="op" id="5247510">,</span>&nbsp;<span class="ident" id="5247512">Rbrace</span><span class="op" id="5247518">:</span>&nbsp;<span class="ident" id="5247520"><a href="/go/parser/parser.go.html#5247427">rbrace</a></span><span class="op" id="5247526">}</span><br>
<span class="lineno">1075</span><span class="op" id="5247528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5247531">func</span>&nbsp;<span class="op" id="5247536">(</span><span class="ident" id="5247537">p</span>&nbsp;<span class="op" id="5247539">*</span><span class="ident" id="5247540"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5247546">)</span>&nbsp;<span class="ident" id="5247548">parseBlockStmt</span><span class="op" id="5247562">(</span><span class="op" id="5247563">)</span>&nbsp;<span class="op" id="5247565">*</span><span class="ident" id="5247566"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5247569">.</span><span class="ident" id="5247570">BlockStmt</span>&nbsp;<span class="op" id="5247580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247583">if</span>&nbsp;<span class="ident" id="5247586"><a href="/go/parser/parser.go.html#5247537">p</a></span><span class="op" id="5247587">.</span><span class="ident" id="5247588">trace</span>&nbsp;<span class="op" id="5247594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247598">defer</span>&nbsp;<span class="ident" id="5247604"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5247606">(</span><span class="ident" id="5247607"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5247612">(</span><span class="ident" id="5247613"><a href="/go/parser/parser.go.html#5247537">p</a></span><span class="op" id="5247614">,</span>&nbsp;<span class="string" id="5247616">&#34;BlockStmt&#34;</span><span class="op" id="5247627">)</span><span class="op" id="5247628">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5247631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247635">lbrace</span>&nbsp;<span class="op" id="5247642">:=</span>&nbsp;<span class="ident" id="5247645"><a href="/go/parser/parser.go.html#5247537">p</a></span><span class="op" id="5247646">.</span><span class="ident" id="5247647">expect</span><span class="op" id="5247653">(</span><span class="ident" id="5247654"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5247659">.</span><span class="ident" id="5247660">LBRACE</span><span class="op" id="5247666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247669"><a href="/go/parser/parser.go.html#5247537">p</a></span><span class="op" id="5247670">.</span><span class="ident" id="5247671">openScope</span><span class="op" id="5247680">(</span><span class="op" id="5247681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247684">list</span>&nbsp;<span class="op" id="5247689">:=</span>&nbsp;<span class="ident" id="5247692"><a href="/go/parser/parser.go.html#5247537">p</a></span><span class="op" id="5247693">.</span><span class="ident" id="5247694">parseStmtList</span><span class="op" id="5247707">(</span><span class="op" id="5247708">)</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247711"><a href="/go/parser/parser.go.html#5247537">p</a></span><span class="op" id="5247712">.</span><span class="ident" id="5247713">closeScope</span><span class="op" id="5247723">(</span><span class="op" id="5247724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5247727">rbrace</span>&nbsp;<span class="op" id="5247734">:=</span>&nbsp;<span class="ident" id="5247737"><a href="/go/parser/parser.go.html#5247537">p</a></span><span class="op" id="5247738">.</span><span class="ident" id="5247739">expect</span><span class="op" id="5247745">(</span><span class="ident" id="5247746"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5247751">.</span><span class="ident" id="5247752">RBRACE</span><span class="op" id="5247758">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247762">return</span>&nbsp;<span class="op" id="5247769">&amp;</span><span class="ident" id="5247770"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5247773">.</span><span class="ident" id="5247774">BlockStmt</span><span class="op" id="5247783">{</span><span class="ident" id="5247784">Lbrace</span><span class="op" id="5247790">:</span>&nbsp;<span class="ident" id="5247792"><a href="/go/parser/parser.go.html#5247635">lbrace</a></span><span class="op" id="5247798">,</span>&nbsp;<span class="ident" id="5247800">List</span><span class="op" id="5247804">:</span>&nbsp;<span class="ident" id="5247806"><a href="/go/parser/parser.go.html#5247684">list</a></span><span class="op" id="5247810">,</span>&nbsp;<span class="ident" id="5247812">Rbrace</span><span class="op" id="5247818">:</span>&nbsp;<span class="ident" id="5247820"><a href="/go/parser/parser.go.html#5247727">rbrace</a></span><span class="op" id="5247826">}</span><br>
<span class="lineno"></span><span class="op" id="5247828">}</span><br>
<span class="lineno">1090</span><br>
<span class="lineno"></span><span class="comment" id="5247831">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5247911">//&nbsp;Expressions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5247927">func</span>&nbsp;<span class="op" id="5247932">(</span><span class="ident" id="5247933">p</span>&nbsp;<span class="op" id="5247935">*</span><span class="ident" id="5247936"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5247942">)</span>&nbsp;<span class="ident" id="5247944">parseFuncTypeOrLit</span><span class="op" id="5247962">(</span><span class="op" id="5247963">)</span>&nbsp;<span class="ident" id="5247965"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5247968">.</span><span class="ident" id="5247969">Expr</span>&nbsp;<span class="op" id="5247974">{</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247977">if</span>&nbsp;<span class="ident" id="5247980"><a href="/go/parser/parser.go.html#5247933">p</a></span><span class="op" id="5247981">.</span><span class="ident" id="5247982">trace</span>&nbsp;<span class="op" id="5247988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5247992">defer</span>&nbsp;<span class="ident" id="5247998"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5248000">(</span><span class="ident" id="5248001"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5248006">(</span><span class="ident" id="5248007"><a href="/go/parser/parser.go.html#5247933">p</a></span><span class="op" id="5248008">,</span>&nbsp;<span class="string" id="5248010">&#34;FuncTypeOrLit&#34;</span><span class="op" id="5248025">)</span><span class="op" id="5248026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5248029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248033">typ</span><span class="op" id="5248036">,</span>&nbsp;<span class="ident" id="5248038">scope</span>&nbsp;<span class="op" id="5248044">:=</span>&nbsp;<span class="ident" id="5248047"><a href="/go/parser/parser.go.html#5247933">p</a></span><span class="op" id="5248048">.</span><span class="ident" id="5248049">parseFuncType</span><span class="op" id="5248062">(</span><span class="op" id="5248063">)</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248066">if</span>&nbsp;<span class="ident" id="5248069"><a href="/go/parser/parser.go.html#5247933">p</a></span><span class="op" id="5248070">.</span><span class="ident" id="5248071">tok</span>&nbsp;<span class="op" id="5248075">!=</span>&nbsp;<span class="ident" id="5248078"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5248083">.</span><span class="ident" id="5248084">LBRACE</span>&nbsp;<span class="op" id="5248091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5248095">//&nbsp;function&nbsp;type&nbsp;only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248119">return</span>&nbsp;<span class="ident" id="5248126"><a href="/go/parser/parser.go.html#5248033">typ</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5248131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248135"><a href="/go/parser/parser.go.html#5247933">p</a></span><span class="op" id="5248136">.</span><span class="ident" id="5248137">exprLev</span><span class="op" id="5248144">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248148">body</span>&nbsp;<span class="op" id="5248153">:=</span>&nbsp;<span class="ident" id="5248156"><a href="/go/parser/parser.go.html#5247933">p</a></span><span class="op" id="5248157">.</span><span class="ident" id="5248158">parseBody</span><span class="op" id="5248167">(</span><span class="ident" id="5248168"><a href="/go/parser/parser.go.html#5248038">scope</a></span><span class="op" id="5248173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248176"><a href="/go/parser/parser.go.html#5247933">p</a></span><span class="op" id="5248177">.</span><span class="ident" id="5248178">exprLev</span><span class="op" id="5248185">--</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248190">return</span>&nbsp;<span class="op" id="5248197">&amp;</span><span class="ident" id="5248198"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5248201">.</span><span class="ident" id="5248202">FuncLit</span><span class="op" id="5248209">{</span><span class="ident" id="5248210">Type</span><span class="op" id="5248214">:</span>&nbsp;<span class="ident" id="5248216"><a href="/go/parser/parser.go.html#5248033">typ</a></span><span class="op" id="5248219">,</span>&nbsp;<span class="ident" id="5248221">Body</span><span class="op" id="5248225">:</span>&nbsp;<span class="ident" id="5248227"><a href="/go/parser/parser.go.html#5248148">body</a></span><span class="op" id="5248231">}</span><br>
<span class="lineno">1110</span><span class="op" id="5248233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5248236">//&nbsp;parseOperand&nbsp;may&nbsp;return&nbsp;an&nbsp;expression&nbsp;or&nbsp;a&nbsp;raw&nbsp;type&nbsp;(incl.&nbsp;array</span><br>
<span class="lineno"></span><span class="comment" id="5248304">//&nbsp;types&nbsp;of&nbsp;the&nbsp;form&nbsp;[...]T.&nbsp;Callers&nbsp;must&nbsp;verify&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="5248365">//&nbsp;If&nbsp;lhs&nbsp;is&nbsp;set&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno">1115</span><span class="comment" id="5248435">//</span><br>
<span class="lineno"></span><span class="keyword" id="5248438">func</span>&nbsp;<span class="op" id="5248443">(</span><span class="ident" id="5248444">p</span>&nbsp;<span class="op" id="5248446">*</span><span class="ident" id="5248447"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5248453">)</span>&nbsp;<span class="ident" id="5248455">parseOperand</span><span class="op" id="5248467">(</span><span class="ident" id="5248468">lhs</span>&nbsp;<span class="builtintype" id="5248472">bool</span><span class="op" id="5248476">)</span>&nbsp;<span class="ident" id="5248478"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5248481">.</span><span class="ident" id="5248482">Expr</span>&nbsp;<span class="op" id="5248487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248490">if</span>&nbsp;<span class="ident" id="5248493"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248494">.</span><span class="ident" id="5248495">trace</span>&nbsp;<span class="op" id="5248501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248505">defer</span>&nbsp;<span class="ident" id="5248511"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5248513">(</span><span class="ident" id="5248514"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5248519">(</span><span class="ident" id="5248520"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248521">,</span>&nbsp;<span class="string" id="5248523">&#34;Operand&#34;</span><span class="op" id="5248532">)</span><span class="op" id="5248533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5248536">}</span><br>
<span class="lineno">1120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248540">switch</span>&nbsp;<span class="ident" id="5248547"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248548">.</span><span class="ident" id="5248549">tok</span>&nbsp;<span class="op" id="5248553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248556">case</span>&nbsp;<span class="ident" id="5248561"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5248566">.</span><span class="ident" id="5248567">IDENT</span><span class="op" id="5248572">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248576">x</span>&nbsp;<span class="op" id="5248578">:=</span>&nbsp;<span class="ident" id="5248581"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248582">.</span><span class="ident" id="5248583">parseIdent</span><span class="op" id="5248593">(</span><span class="op" id="5248594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248598">if</span>&nbsp;<span class="op" id="5248601">!</span><span class="ident" id="5248602"><a href="/go/parser/parser.go.html#5248468">lhs</a></span>&nbsp;<span class="op" id="5248606">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248611"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248612">.</span><span class="ident" id="5248613">resolve</span><span class="op" id="5248620">(</span><span class="ident" id="5248621"><a href="/go/parser/parser.go.html#5248576">x</a></span><span class="op" id="5248622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5248626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248630">return</span>&nbsp;<span class="ident" id="5248637"><a href="/go/parser/parser.go.html#5248576">x</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248641">case</span>&nbsp;<span class="ident" id="5248646"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5248651">.</span><span class="ident" id="5248652">INT</span><span class="op" id="5248655">,</span>&nbsp;<span class="ident" id="5248657"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5248662">.</span><span class="ident" id="5248663">FLOAT</span><span class="op" id="5248668">,</span>&nbsp;<span class="ident" id="5248670"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5248675">.</span><span class="ident" id="5248676">IMAG</span><span class="op" id="5248680">,</span>&nbsp;<span class="ident" id="5248682"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5248687">.</span><span class="ident" id="5248688">CHAR</span><span class="op" id="5248692">,</span>&nbsp;<span class="ident" id="5248694"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5248699">.</span><span class="ident" id="5248700">STRING</span><span class="op" id="5248706">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248710">x</span>&nbsp;<span class="op" id="5248712">:=</span>&nbsp;<span class="op" id="5248715">&amp;</span><span class="ident" id="5248716"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5248719">.</span><span class="ident" id="5248720">BasicLit</span><span class="op" id="5248728">{</span><span class="ident" id="5248729">ValuePos</span><span class="op" id="5248737">:</span>&nbsp;<span class="ident" id="5248739"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248740">.</span><span class="ident" id="5248741">pos</span><span class="op" id="5248744">,</span>&nbsp;<span class="ident" id="5248746">Kind</span><span class="op" id="5248750">:</span>&nbsp;<span class="ident" id="5248752"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248753">.</span><span class="ident" id="5248754">tok</span><span class="op" id="5248757">,</span>&nbsp;<span class="ident" id="5248759">Value</span><span class="op" id="5248764">:</span>&nbsp;<span class="ident" id="5248766"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248767">.</span><span class="ident" id="5248768">lit</span><span class="op" id="5248771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248775"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248776">.</span><span class="ident" id="5248777">next</span><span class="op" id="5248781">(</span><span class="op" id="5248782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248786">return</span>&nbsp;<span class="ident" id="5248793"><a href="/go/parser/parser.go.html#5248710">x</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248797">case</span>&nbsp;<span class="ident" id="5248802"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5248807">.</span><span class="ident" id="5248808">LPAREN</span><span class="op" id="5248814">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248818">lparen</span>&nbsp;<span class="op" id="5248825">:=</span>&nbsp;<span class="ident" id="5248828"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248829">.</span><span class="ident" id="5248830">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248836"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248837">.</span><span class="ident" id="5248838">next</span><span class="op" id="5248842">(</span><span class="op" id="5248843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248847"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248848">.</span><span class="ident" id="5248849">exprLev</span><span class="op" id="5248856">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248861">x</span>&nbsp;<span class="op" id="5248863">:=</span>&nbsp;<span class="ident" id="5248866"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248867">.</span><span class="ident" id="5248868">parseRhsOrType</span><span class="op" id="5248882">(</span><span class="op" id="5248883">)</span>&nbsp;<span class="comment" id="5248885">//&nbsp;types&nbsp;may&nbsp;be&nbsp;parenthesized:&nbsp;(some&nbsp;type)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248930"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248931">.</span><span class="ident" id="5248932">exprLev</span><span class="op" id="5248939">--</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5248944">rparen</span>&nbsp;<span class="op" id="5248951">:=</span>&nbsp;<span class="ident" id="5248954"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5248955">.</span><span class="ident" id="5248956">expect</span><span class="op" id="5248962">(</span><span class="ident" id="5248963"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5248968">.</span><span class="ident" id="5248969">RPAREN</span><span class="op" id="5248975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5248979">return</span>&nbsp;<span class="op" id="5248986">&amp;</span><span class="ident" id="5248987"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5248990">.</span><span class="ident" id="5248991">ParenExpr</span><span class="op" id="5249000">{</span><span class="ident" id="5249001">Lparen</span><span class="op" id="5249007">:</span>&nbsp;<span class="ident" id="5249009"><a href="/go/parser/parser.go.html#5248818">lparen</a></span><span class="op" id="5249015">,</span>&nbsp;<span class="ident" id="5249017">X</span><span class="op" id="5249018">:</span>&nbsp;<span class="ident" id="5249020"><a href="/go/parser/parser.go.html#5248861">x</a></span><span class="op" id="5249021">,</span>&nbsp;<span class="ident" id="5249023">Rparen</span><span class="op" id="5249029">:</span>&nbsp;<span class="ident" id="5249031"><a href="/go/parser/parser.go.html#5248944">rparen</a></span><span class="op" id="5249037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249041">case</span>&nbsp;<span class="ident" id="5249046"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5249051">.</span><span class="ident" id="5249052">FUNC</span><span class="op" id="5249056">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249060">return</span>&nbsp;<span class="ident" id="5249067"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5249068">.</span><span class="ident" id="5249069">parseFuncTypeOrLit</span><span class="op" id="5249087">(</span><span class="op" id="5249088">)</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5249091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249095">if</span>&nbsp;<span class="ident" id="5249098">typ</span>&nbsp;<span class="op" id="5249102">:=</span>&nbsp;<span class="ident" id="5249105"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5249106">.</span><span class="ident" id="5249107">tryIdentOrType</span><span class="op" id="5249121">(</span><span class="op" id="5249122">)</span><span class="op" id="5249123">;</span>&nbsp;<span class="ident" id="5249125"><a href="/go/parser/parser.go.html#5249098">typ</a></span>&nbsp;<span class="op" id="5249129">!=</span>&nbsp;<span class="ident" id="5249132">nil</span>&nbsp;<span class="op" id="5249136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5249140">//&nbsp;could&nbsp;be&nbsp;type&nbsp;for&nbsp;composite&nbsp;literal&nbsp;or&nbsp;conversion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249195">_</span><span class="op" id="5249196">,</span>&nbsp;<span class="ident" id="5249198">isIdent</span>&nbsp;<span class="op" id="5249206">:=</span>&nbsp;<span class="ident" id="5249209"><a href="/go/parser/parser.go.html#5249098">typ</a></span><span class="op" id="5249212">.</span><span class="op" id="5249213">(</span><span class="op" id="5249214">*</span><span class="ident" id="5249215"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5249218">.</span><span class="ident" id="5249219">Ident</span><span class="op" id="5249224">)</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249228"><a href="/go/parser/parser.go.html#5231787">assert</a></span><span class="op" id="5249234">(</span><span class="op" id="5249235">!</span><span class="ident" id="5249236"><a href="/go/parser/parser.go.html#5249198">isIdent</a></span><span class="op" id="5249243">,</span>&nbsp;<span class="string" id="5249245">&#34;type&nbsp;cannot&nbsp;be&nbsp;identifier&#34;</span><span class="op" id="5249272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249276">return</span>&nbsp;<span class="ident" id="5249283"><a href="/go/parser/parser.go.html#5249098">typ</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5249288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5249292">//&nbsp;we&nbsp;have&nbsp;an&nbsp;error</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249313">pos</span>&nbsp;<span class="op" id="5249317">:=</span>&nbsp;<span class="ident" id="5249320"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5249321">.</span><span class="ident" id="5249322">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249327"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5249328">.</span><span class="ident" id="5249329">errorExpected</span><span class="op" id="5249342">(</span><span class="ident" id="5249343"><a href="/go/parser/parser.go.html#5249313">pos</a></span><span class="op" id="5249346">,</span>&nbsp;<span class="string" id="5249348">&#34;operand&#34;</span><span class="op" id="5249357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249360"><a href="/go/parser/parser.go.html#5231977">syncStmt</a></span><span class="op" id="5249368">(</span><span class="ident" id="5249369"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5249370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249373">return</span>&nbsp;<span class="op" id="5249380">&amp;</span><span class="ident" id="5249381"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5249384">.</span><span class="ident" id="5249385">BadExpr</span><span class="op" id="5249392">{</span><span class="ident" id="5249393">From</span><span class="op" id="5249397">:</span>&nbsp;<span class="ident" id="5249399"><a href="/go/parser/parser.go.html#5249313">pos</a></span><span class="op" id="5249402">,</span>&nbsp;<span class="ident" id="5249404">To</span><span class="op" id="5249406">:</span>&nbsp;<span class="ident" id="5249408"><a href="/go/parser/parser.go.html#5248444">p</a></span><span class="op" id="5249409">.</span><span class="ident" id="5249410">pos</span><span class="op" id="5249413">}</span><br>
<span class="lineno"></span><span class="op" id="5249415">}</span><br>
<span class="lineno">1160</span><br>
<span class="lineno"></span><span class="keyword" id="5249418">func</span>&nbsp;<span class="op" id="5249423">(</span><span class="ident" id="5249424">p</span>&nbsp;<span class="op" id="5249426">*</span><span class="ident" id="5249427"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5249433">)</span>&nbsp;<span class="ident" id="5249435">parseSelector</span><span class="op" id="5249448">(</span><span class="ident" id="5249449">x</span>&nbsp;<span class="ident" id="5249451"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5249454">.</span><span class="ident" id="5249455">Expr</span><span class="op" id="5249459">)</span>&nbsp;<span class="ident" id="5249461"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5249464">.</span><span class="ident" id="5249465">Expr</span>&nbsp;<span class="op" id="5249470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249473">if</span>&nbsp;<span class="ident" id="5249476"><a href="/go/parser/parser.go.html#5249424">p</a></span><span class="op" id="5249477">.</span><span class="ident" id="5249478">trace</span>&nbsp;<span class="op" id="5249484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249488">defer</span>&nbsp;<span class="ident" id="5249494"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5249496">(</span><span class="ident" id="5249497"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5249502">(</span><span class="ident" id="5249503"><a href="/go/parser/parser.go.html#5249424">p</a></span><span class="op" id="5249504">,</span>&nbsp;<span class="string" id="5249506">&#34;Selector&#34;</span><span class="op" id="5249516">)</span><span class="op" id="5249517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5249520">}</span><br>
<span class="lineno">1165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249524">sel</span>&nbsp;<span class="op" id="5249528">:=</span>&nbsp;<span class="ident" id="5249531"><a href="/go/parser/parser.go.html#5249424">p</a></span><span class="op" id="5249532">.</span><span class="ident" id="5249533">parseIdent</span><span class="op" id="5249543">(</span><span class="op" id="5249544">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249548">return</span>&nbsp;<span class="op" id="5249555">&amp;</span><span class="ident" id="5249556"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5249559">.</span><span class="ident" id="5249560">SelectorExpr</span><span class="op" id="5249572">{</span><span class="ident" id="5249573">X</span><span class="op" id="5249574">:</span>&nbsp;<span class="ident" id="5249576"><a href="/go/parser/parser.go.html#5249449">x</a></span><span class="op" id="5249577">,</span>&nbsp;<span class="ident" id="5249579">Sel</span><span class="op" id="5249582">:</span>&nbsp;<span class="ident" id="5249584"><a href="/go/parser/parser.go.html#5249524">sel</a></span><span class="op" id="5249587">}</span><br>
<span class="lineno"></span><span class="op" id="5249589">}</span><br>
<span class="lineno">1170</span><br>
<span class="lineno"></span><span class="keyword" id="5249592">func</span>&nbsp;<span class="op" id="5249597">(</span><span class="ident" id="5249598">p</span>&nbsp;<span class="op" id="5249600">*</span><span class="ident" id="5249601"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5249607">)</span>&nbsp;<span class="ident" id="5249609">parseTypeAssertion</span><span class="op" id="5249627">(</span><span class="ident" id="5249628">x</span>&nbsp;<span class="ident" id="5249630"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5249633">.</span><span class="ident" id="5249634">Expr</span><span class="op" id="5249638">)</span>&nbsp;<span class="ident" id="5249640"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5249643">.</span><span class="ident" id="5249644">Expr</span>&nbsp;<span class="op" id="5249649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249652">if</span>&nbsp;<span class="ident" id="5249655"><a href="/go/parser/parser.go.html#5249598">p</a></span><span class="op" id="5249656">.</span><span class="ident" id="5249657">trace</span>&nbsp;<span class="op" id="5249663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249667">defer</span>&nbsp;<span class="ident" id="5249673"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5249675">(</span><span class="ident" id="5249676"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5249681">(</span><span class="ident" id="5249682"><a href="/go/parser/parser.go.html#5249598">p</a></span><span class="op" id="5249683">,</span>&nbsp;<span class="string" id="5249685">&#34;TypeAssertion&#34;</span><span class="op" id="5249700">)</span><span class="op" id="5249701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5249704">}</span><br>
<span class="lineno">1175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249708">lparen</span>&nbsp;<span class="op" id="5249715">:=</span>&nbsp;<span class="ident" id="5249718"><a href="/go/parser/parser.go.html#5249598">p</a></span><span class="op" id="5249719">.</span><span class="ident" id="5249720">expect</span><span class="op" id="5249726">(</span><span class="ident" id="5249727"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5249732">.</span><span class="ident" id="5249733">LPAREN</span><span class="op" id="5249739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249742">var</span>&nbsp;<span class="ident" id="5249746">typ</span>&nbsp;<span class="ident" id="5249750"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5249753">.</span><span class="ident" id="5249754">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249760">if</span>&nbsp;<span class="ident" id="5249763"><a href="/go/parser/parser.go.html#5249598">p</a></span><span class="op" id="5249764">.</span><span class="ident" id="5249765">tok</span>&nbsp;<span class="op" id="5249769">==</span>&nbsp;<span class="ident" id="5249772"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5249777">.</span><span class="ident" id="5249778">TYPE</span>&nbsp;<span class="op" id="5249783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5249787">//&nbsp;type&nbsp;switch:&nbsp;typ&nbsp;==&nbsp;nil</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249816"><a href="/go/parser/parser.go.html#5249598">p</a></span><span class="op" id="5249817">.</span><span class="ident" id="5249818">next</span><span class="op" id="5249822">(</span><span class="op" id="5249823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5249826">}</span>&nbsp;<span class="keyword" id="5249828">else</span>&nbsp;<span class="op" id="5249833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249837"><a href="/go/parser/parser.go.html#5249746">typ</a></span>&nbsp;<span class="op" id="5249841">=</span>&nbsp;<span class="ident" id="5249843"><a href="/go/parser/parser.go.html#5249598">p</a></span><span class="op" id="5249844">.</span><span class="ident" id="5249845">parseType</span><span class="op" id="5249854">(</span><span class="op" id="5249855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5249858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5249861">rparen</span>&nbsp;<span class="op" id="5249868">:=</span>&nbsp;<span class="ident" id="5249871"><a href="/go/parser/parser.go.html#5249598">p</a></span><span class="op" id="5249872">.</span><span class="ident" id="5249873">expect</span><span class="op" id="5249879">(</span><span class="ident" id="5249880"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5249885">.</span><span class="ident" id="5249886">RPAREN</span><span class="op" id="5249892">)</span><br>
<span class="lineno">1185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5249896">return</span>&nbsp;<span class="op" id="5249903">&amp;</span><span class="ident" id="5249904"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5249907">.</span><span class="ident" id="5249908">TypeAssertExpr</span><span class="op" id="5249922">{</span><span class="ident" id="5249923">X</span><span class="op" id="5249924">:</span>&nbsp;<span class="ident" id="5249926"><a href="/go/parser/parser.go.html#5249628">x</a></span><span class="op" id="5249927">,</span>&nbsp;<span class="ident" id="5249929">Type</span><span class="op" id="5249933">:</span>&nbsp;<span class="ident" id="5249935"><a href="/go/parser/parser.go.html#5249746">typ</a></span><span class="op" id="5249938">,</span>&nbsp;<span class="ident" id="5249940">Lparen</span><span class="op" id="5249946">:</span>&nbsp;<span class="ident" id="5249948"><a href="/go/parser/parser.go.html#5249708">lparen</a></span><span class="op" id="5249954">,</span>&nbsp;<span class="ident" id="5249956">Rparen</span><span class="op" id="5249962">:</span>&nbsp;<span class="ident" id="5249964"><a href="/go/parser/parser.go.html#5249861">rparen</a></span><span class="op" id="5249970">}</span><br>
<span class="lineno"></span><span class="op" id="5249972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5249975">func</span>&nbsp;<span class="op" id="5249980">(</span><span class="ident" id="5249981">p</span>&nbsp;<span class="op" id="5249983">*</span><span class="ident" id="5249984"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5249990">)</span>&nbsp;<span class="ident" id="5249992">parseIndexOrSlice</span><span class="op" id="5250009">(</span><span class="ident" id="5250010">x</span>&nbsp;<span class="ident" id="5250012"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5250015">.</span><span class="ident" id="5250016">Expr</span><span class="op" id="5250020">)</span>&nbsp;<span class="ident" id="5250022"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5250025">.</span><span class="ident" id="5250026">Expr</span>&nbsp;<span class="op" id="5250031">{</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250034">if</span>&nbsp;<span class="ident" id="5250037"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250038">.</span><span class="ident" id="5250039">trace</span>&nbsp;<span class="op" id="5250045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250049">defer</span>&nbsp;<span class="ident" id="5250055"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5250057">(</span><span class="ident" id="5250058"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5250063">(</span><span class="ident" id="5250064"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250065">,</span>&nbsp;<span class="string" id="5250067">&#34;IndexOrSlice&#34;</span><span class="op" id="5250081">)</span><span class="op" id="5250082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5250085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250089">const</span>&nbsp;<span class="ident" id="5250095">N</span>&nbsp;<span class="op" id="5250097">=</span>&nbsp;<span class="num" id="5250099">3</span>&nbsp;<span class="comment" id="5250101">//&nbsp;change&nbsp;the&nbsp;3&nbsp;to&nbsp;2&nbsp;to&nbsp;disable&nbsp;3-index&nbsp;slices</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250149">lbrack</span>&nbsp;<span class="op" id="5250156">:=</span>&nbsp;<span class="ident" id="5250159"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250160">.</span><span class="ident" id="5250161">expect</span><span class="op" id="5250167">(</span><span class="ident" id="5250168"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5250173">.</span><span class="ident" id="5250174">LBRACK</span><span class="op" id="5250180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250183"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250184">.</span><span class="ident" id="5250185">exprLev</span><span class="op" id="5250192">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250196">var</span>&nbsp;<span class="ident" id="5250200">index</span>&nbsp;<span class="op" id="5250206">[</span><span class="ident" id="5250207"><a href="/go/parser/parser.go.html#5250095">N</a></span><span class="op" id="5250208">]</span><span class="ident" id="5250209"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5250212">.</span><span class="ident" id="5250213">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250219">var</span>&nbsp;<span class="ident" id="5250223">colons</span>&nbsp;<span class="op" id="5250230">[</span><span class="ident" id="5250231"><a href="/go/parser/parser.go.html#5250095">N</a></span>&nbsp;<span class="op" id="5250233">-</span>&nbsp;<span class="num" id="5250235">1</span><span class="op" id="5250236">]</span><span class="ident" id="5250237"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5250242">.</span><span class="ident" id="5250243">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250248">if</span>&nbsp;<span class="ident" id="5250251"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250252">.</span><span class="ident" id="5250253">tok</span>&nbsp;<span class="op" id="5250257">!=</span>&nbsp;<span class="ident" id="5250260"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5250265">.</span><span class="ident" id="5250266">COLON</span>&nbsp;<span class="op" id="5250272">{</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250276"><a href="/go/parser/parser.go.html#5250200">index</a></span><span class="op" id="5250281">[</span><span class="num" id="5250282">0</span><span class="op" id="5250283">]</span>&nbsp;<span class="op" id="5250285">=</span>&nbsp;<span class="ident" id="5250287"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250288">.</span><span class="ident" id="5250289">parseRhs</span><span class="op" id="5250297">(</span><span class="op" id="5250298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5250301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250304">ncolons</span>&nbsp;<span class="op" id="5250312">:=</span>&nbsp;<span class="num" id="5250315">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250318">for</span>&nbsp;<span class="ident" id="5250322"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250323">.</span><span class="ident" id="5250324">tok</span>&nbsp;<span class="op" id="5250328">==</span>&nbsp;<span class="ident" id="5250331"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5250336">.</span><span class="ident" id="5250337">COLON</span>&nbsp;<span class="op" id="5250343">&amp;&amp;</span>&nbsp;<span class="ident" id="5250346"><a href="/go/parser/parser.go.html#5250304">ncolons</a></span>&nbsp;<span class="op" id="5250354">&lt;</span>&nbsp;<span class="builtinfunc" id="5250356">len</span><span class="op" id="5250359">(</span><span class="ident" id="5250360"><a href="/go/parser/parser.go.html#5250223">colons</a></span><span class="op" id="5250366">)</span>&nbsp;<span class="op" id="5250368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250372"><a href="/go/parser/parser.go.html#5250223">colons</a></span><span class="op" id="5250378">[</span><span class="ident" id="5250379"><a href="/go/parser/parser.go.html#5250304">ncolons</a></span><span class="op" id="5250386">]</span>&nbsp;<span class="op" id="5250388">=</span>&nbsp;<span class="ident" id="5250390"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250391">.</span><span class="ident" id="5250392">pos</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250398"><a href="/go/parser/parser.go.html#5250304">ncolons</a></span><span class="op" id="5250405">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250410"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250411">.</span><span class="ident" id="5250412">next</span><span class="op" id="5250416">(</span><span class="op" id="5250417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250421">if</span>&nbsp;<span class="ident" id="5250424"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250425">.</span><span class="ident" id="5250426">tok</span>&nbsp;<span class="op" id="5250430">!=</span>&nbsp;<span class="ident" id="5250433"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5250438">.</span><span class="ident" id="5250439">COLON</span>&nbsp;<span class="op" id="5250445">&amp;&amp;</span>&nbsp;<span class="ident" id="5250448"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250449">.</span><span class="ident" id="5250450">tok</span>&nbsp;<span class="op" id="5250454">!=</span>&nbsp;<span class="ident" id="5250457"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5250462">.</span><span class="ident" id="5250463">RBRACK</span>&nbsp;<span class="op" id="5250470">&amp;&amp;</span>&nbsp;<span class="ident" id="5250473"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250474">.</span><span class="ident" id="5250475">tok</span>&nbsp;<span class="op" id="5250479">!=</span>&nbsp;<span class="ident" id="5250482"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5250487">.</span><span class="ident" id="5250488">EOF</span>&nbsp;<span class="op" id="5250492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250497"><a href="/go/parser/parser.go.html#5250200">index</a></span><span class="op" id="5250502">[</span><span class="ident" id="5250503"><a href="/go/parser/parser.go.html#5250304">ncolons</a></span><span class="op" id="5250510">]</span>&nbsp;<span class="op" id="5250512">=</span>&nbsp;<span class="ident" id="5250514"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250515">.</span><span class="ident" id="5250516">parseRhs</span><span class="op" id="5250524">(</span><span class="op" id="5250525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5250529">}</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5250532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250535"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250536">.</span><span class="ident" id="5250537">exprLev</span><span class="op" id="5250544">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250548">rbrack</span>&nbsp;<span class="op" id="5250555">:=</span>&nbsp;<span class="ident" id="5250558"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250559">.</span><span class="ident" id="5250560">expect</span><span class="op" id="5250566">(</span><span class="ident" id="5250567"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5250572">.</span><span class="ident" id="5250573">RBRACK</span><span class="op" id="5250579">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250583">if</span>&nbsp;<span class="ident" id="5250586"><a href="/go/parser/parser.go.html#5250304">ncolons</a></span>&nbsp;<span class="op" id="5250594">&gt;</span>&nbsp;<span class="num" id="5250596">0</span>&nbsp;<span class="op" id="5250598">{</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5250602">//&nbsp;slice&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250624">slice3</span>&nbsp;<span class="op" id="5250631">:=</span>&nbsp;<span class="builtintype" id="5250634">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250642">if</span>&nbsp;<span class="ident" id="5250645"><a href="/go/parser/parser.go.html#5250304">ncolons</a></span>&nbsp;<span class="op" id="5250653">==</span>&nbsp;<span class="num" id="5250656">2</span>&nbsp;<span class="op" id="5250658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250663"><a href="/go/parser/parser.go.html#5250624">slice3</a></span>&nbsp;<span class="op" id="5250670">=</span>&nbsp;<span class="builtintype" id="5250672">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5250680">//&nbsp;Check&nbsp;presence&nbsp;of&nbsp;2nd&nbsp;and&nbsp;3rd&nbsp;index&nbsp;here&nbsp;rather&nbsp;than&nbsp;during&nbsp;type-checking</span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5250760">//&nbsp;to&nbsp;prevent&nbsp;erroneous&nbsp;programs&nbsp;from&nbsp;passing&nbsp;through&nbsp;gofmt&nbsp;(was&nbsp;issue&nbsp;7305).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250841">if</span>&nbsp;<span class="ident" id="5250844"><a href="/go/parser/parser.go.html#5250200">index</a></span><span class="op" id="5250849">[</span><span class="num" id="5250850">1</span><span class="op" id="5250851">]</span>&nbsp;<span class="op" id="5250853">==</span>&nbsp;<span class="ident" id="5250856">nil</span>&nbsp;<span class="op" id="5250860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250866"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5250867">.</span><span class="builtintype" id="5250868">error</span><span class="op" id="5250873">(</span><span class="ident" id="5250874"><a href="/go/parser/parser.go.html#5250223">colons</a></span><span class="op" id="5250880">[</span><span class="num" id="5250881">0</span><span class="op" id="5250882">]</span><span class="op" id="5250883">,</span>&nbsp;<span class="string" id="5250885">&#34;2nd&nbsp;index&nbsp;required&nbsp;in&nbsp;3-index&nbsp;slice&#34;</span><span class="op" id="5250922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5250928"><a href="/go/parser/parser.go.html#5250200">index</a></span><span class="op" id="5250933">[</span><span class="num" id="5250934">1</span><span class="op" id="5250935">]</span>&nbsp;<span class="op" id="5250937">=</span>&nbsp;<span class="op" id="5250939">&amp;</span><span class="ident" id="5250940"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5250943">.</span><span class="ident" id="5250944">BadExpr</span><span class="op" id="5250951">{</span><span class="ident" id="5250952">From</span><span class="op" id="5250956">:</span>&nbsp;<span class="ident" id="5250958"><a href="/go/parser/parser.go.html#5250223">colons</a></span><span class="op" id="5250964">[</span><span class="num" id="5250965">0</span><span class="op" id="5250966">]</span>&nbsp;<span class="op" id="5250968">+</span>&nbsp;<span class="num" id="5250970">1</span><span class="op" id="5250971">,</span>&nbsp;<span class="ident" id="5250973">To</span><span class="op" id="5250975">:</span>&nbsp;<span class="ident" id="5250977"><a href="/go/parser/parser.go.html#5250223">colons</a></span><span class="op" id="5250983">[</span><span class="num" id="5250984">1</span><span class="op" id="5250985">]</span><span class="op" id="5250986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5250991">}</span><br>
<span class="lineno">1225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5250996">if</span>&nbsp;<span class="ident" id="5250999"><a href="/go/parser/parser.go.html#5250200">index</a></span><span class="op" id="5251004">[</span><span class="num" id="5251005">2</span><span class="op" id="5251006">]</span>&nbsp;<span class="op" id="5251008">==</span>&nbsp;<span class="ident" id="5251011">nil</span>&nbsp;<span class="op" id="5251015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251021"><a href="/go/parser/parser.go.html#5249981">p</a></span><span class="op" id="5251022">.</span><span class="builtintype" id="5251023">error</span><span class="op" id="5251028">(</span><span class="ident" id="5251029"><a href="/go/parser/parser.go.html#5250223">colons</a></span><span class="op" id="5251035">[</span><span class="num" id="5251036">1</span><span class="op" id="5251037">]</span><span class="op" id="5251038">,</span>&nbsp;<span class="string" id="5251040">&#34;3rd&nbsp;index&nbsp;required&nbsp;in&nbsp;3-index&nbsp;slice&#34;</span><span class="op" id="5251077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251083"><a href="/go/parser/parser.go.html#5250200">index</a></span><span class="op" id="5251088">[</span><span class="num" id="5251089">2</span><span class="op" id="5251090">]</span>&nbsp;<span class="op" id="5251092">=</span>&nbsp;<span class="op" id="5251094">&amp;</span><span class="ident" id="5251095"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5251098">.</span><span class="ident" id="5251099">BadExpr</span><span class="op" id="5251106">{</span><span class="ident" id="5251107">From</span><span class="op" id="5251111">:</span>&nbsp;<span class="ident" id="5251113"><a href="/go/parser/parser.go.html#5250223">colons</a></span><span class="op" id="5251119">[</span><span class="num" id="5251120">1</span><span class="op" id="5251121">]</span>&nbsp;<span class="op" id="5251123">+</span>&nbsp;<span class="num" id="5251125">1</span><span class="op" id="5251126">,</span>&nbsp;<span class="ident" id="5251128">To</span><span class="op" id="5251130">:</span>&nbsp;<span class="ident" id="5251132"><a href="/go/parser/parser.go.html#5250548">rbrack</a></span><span class="op" id="5251138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251147">}</span><br>
<span class="lineno">1230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251151">return</span>&nbsp;<span class="op" id="5251158">&amp;</span><span class="ident" id="5251159"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5251162">.</span><span class="ident" id="5251163">SliceExpr</span><span class="op" id="5251172">{</span><span class="ident" id="5251173">X</span><span class="op" id="5251174">:</span>&nbsp;<span class="ident" id="5251176"><a href="/go/parser/parser.go.html#5250010">x</a></span><span class="op" id="5251177">,</span>&nbsp;<span class="ident" id="5251179">Lbrack</span><span class="op" id="5251185">:</span>&nbsp;<span class="ident" id="5251187"><a href="/go/parser/parser.go.html#5250149">lbrack</a></span><span class="op" id="5251193">,</span>&nbsp;<span class="ident" id="5251195">Low</span><span class="op" id="5251198">:</span>&nbsp;<span class="ident" id="5251200"><a href="/go/parser/parser.go.html#5250200">index</a></span><span class="op" id="5251205">[</span><span class="num" id="5251206">0</span><span class="op" id="5251207">]</span><span class="op" id="5251208">,</span>&nbsp;<span class="ident" id="5251210">High</span><span class="op" id="5251214">:</span>&nbsp;<span class="ident" id="5251216"><a href="/go/parser/parser.go.html#5250200">index</a></span><span class="op" id="5251221">[</span><span class="num" id="5251222">1</span><span class="op" id="5251223">]</span><span class="op" id="5251224">,</span>&nbsp;<span class="ident" id="5251226">Max</span><span class="op" id="5251229">:</span>&nbsp;<span class="ident" id="5251231"><a href="/go/parser/parser.go.html#5250200">index</a></span><span class="op" id="5251236">[</span><span class="num" id="5251237">2</span><span class="op" id="5251238">]</span><span class="op" id="5251239">,</span>&nbsp;<span class="ident" id="5251241">Slice3</span><span class="op" id="5251247">:</span>&nbsp;<span class="ident" id="5251249"><a href="/go/parser/parser.go.html#5250624">slice3</a></span><span class="op" id="5251255">,</span>&nbsp;<span class="ident" id="5251257">Rbrack</span><span class="op" id="5251263">:</span>&nbsp;<span class="ident" id="5251265"><a href="/go/parser/parser.go.html#5250548">rbrack</a></span><span class="op" id="5251271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251278">return</span>&nbsp;<span class="op" id="5251285">&amp;</span><span class="ident" id="5251286"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5251289">.</span><span class="ident" id="5251290">IndexExpr</span><span class="op" id="5251299">{</span><span class="ident" id="5251300">X</span><span class="op" id="5251301">:</span>&nbsp;<span class="ident" id="5251303"><a href="/go/parser/parser.go.html#5250010">x</a></span><span class="op" id="5251304">,</span>&nbsp;<span class="ident" id="5251306">Lbrack</span><span class="op" id="5251312">:</span>&nbsp;<span class="ident" id="5251314"><a href="/go/parser/parser.go.html#5250149">lbrack</a></span><span class="op" id="5251320">,</span>&nbsp;<span class="ident" id="5251322">Index</span><span class="op" id="5251327">:</span>&nbsp;<span class="ident" id="5251329"><a href="/go/parser/parser.go.html#5250200">index</a></span><span class="op" id="5251334">[</span><span class="num" id="5251335">0</span><span class="op" id="5251336">]</span><span class="op" id="5251337">,</span>&nbsp;<span class="ident" id="5251339">Rbrack</span><span class="op" id="5251345">:</span>&nbsp;<span class="ident" id="5251347"><a href="/go/parser/parser.go.html#5250548">rbrack</a></span><span class="op" id="5251353">}</span><br>
<span class="lineno"></span><span class="op" id="5251355">}</span><br>
<span class="lineno">1235</span><br>
<span class="lineno"></span><span class="keyword" id="5251358">func</span>&nbsp;<span class="op" id="5251363">(</span><span class="ident" id="5251364">p</span>&nbsp;<span class="op" id="5251366">*</span><span class="ident" id="5251367"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5251373">)</span>&nbsp;<span class="ident" id="5251375">parseCallOrConversion</span><span class="op" id="5251396">(</span><span class="ident" id="5251397">fun</span>&nbsp;<span class="ident" id="5251401"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5251404">.</span><span class="ident" id="5251405">Expr</span><span class="op" id="5251409">)</span>&nbsp;<span class="op" id="5251411">*</span><span class="ident" id="5251412"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5251415">.</span><span class="ident" id="5251416">CallExpr</span>&nbsp;<span class="op" id="5251425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251428">if</span>&nbsp;<span class="ident" id="5251431"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251432">.</span><span class="ident" id="5251433">trace</span>&nbsp;<span class="op" id="5251439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251443">defer</span>&nbsp;<span class="ident" id="5251449"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5251451">(</span><span class="ident" id="5251452"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5251457">(</span><span class="ident" id="5251458"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251459">,</span>&nbsp;<span class="string" id="5251461">&#34;CallOrConversion&#34;</span><span class="op" id="5251479">)</span><span class="op" id="5251480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251483">}</span><br>
<span class="lineno">1240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251487">lparen</span>&nbsp;<span class="op" id="5251494">:=</span>&nbsp;<span class="ident" id="5251497"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251498">.</span><span class="ident" id="5251499">expect</span><span class="op" id="5251505">(</span><span class="ident" id="5251506"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5251511">.</span><span class="ident" id="5251512">LPAREN</span><span class="op" id="5251518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251521"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251522">.</span><span class="ident" id="5251523">exprLev</span><span class="op" id="5251530">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251534">var</span>&nbsp;<span class="ident" id="5251538">list</span>&nbsp;<span class="op" id="5251543">[</span><span class="op" id="5251544">]</span><span class="ident" id="5251545"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5251548">.</span><span class="ident" id="5251549">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251555">var</span>&nbsp;<span class="ident" id="5251559">ellipsis</span>&nbsp;<span class="ident" id="5251568"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5251573">.</span><span class="ident" id="5251574">Pos</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251579">for</span>&nbsp;<span class="ident" id="5251583"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251584">.</span><span class="ident" id="5251585">tok</span>&nbsp;<span class="op" id="5251589">!=</span>&nbsp;<span class="ident" id="5251592"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5251597">.</span><span class="ident" id="5251598">RPAREN</span>&nbsp;<span class="op" id="5251605">&amp;&amp;</span>&nbsp;<span class="ident" id="5251608"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251609">.</span><span class="ident" id="5251610">tok</span>&nbsp;<span class="op" id="5251614">!=</span>&nbsp;<span class="ident" id="5251617"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5251622">.</span><span class="ident" id="5251623">EOF</span>&nbsp;<span class="op" id="5251627">&amp;&amp;</span>&nbsp;<span class="op" id="5251630">!</span><span class="ident" id="5251631"><a href="/go/parser/parser.go.html#5251559">ellipsis</a></span><span class="op" id="5251639">.</span><span class="ident" id="5251640">IsValid</span><span class="op" id="5251647">(</span><span class="op" id="5251648">)</span>&nbsp;<span class="op" id="5251650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251654"><a href="/go/parser/parser.go.html#5251538">list</a></span>&nbsp;<span class="op" id="5251659">=</span>&nbsp;<span class="builtinfunc" id="5251661">append</span><span class="op" id="5251667">(</span><span class="ident" id="5251668"><a href="/go/parser/parser.go.html#5251538">list</a></span><span class="op" id="5251672">,</span>&nbsp;<span class="ident" id="5251674"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251675">.</span><span class="ident" id="5251676">parseRhsOrType</span><span class="op" id="5251690">(</span><span class="op" id="5251691">)</span><span class="op" id="5251692">)</span>&nbsp;<span class="comment" id="5251694">//&nbsp;builtins&nbsp;may&nbsp;expect&nbsp;a&nbsp;type:&nbsp;make(some&nbsp;type,&nbsp;...)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251748">if</span>&nbsp;<span class="ident" id="5251751"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251752">.</span><span class="ident" id="5251753">tok</span>&nbsp;<span class="op" id="5251757">==</span>&nbsp;<span class="ident" id="5251760"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5251765">.</span><span class="ident" id="5251766">ELLIPSIS</span>&nbsp;<span class="op" id="5251775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251780"><a href="/go/parser/parser.go.html#5251559">ellipsis</a></span>&nbsp;<span class="op" id="5251789">=</span>&nbsp;<span class="ident" id="5251791"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251792">.</span><span class="ident" id="5251793">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251800"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251801">.</span><span class="ident" id="5251802">next</span><span class="op" id="5251806">(</span><span class="op" id="5251807">)</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251815">if</span>&nbsp;<span class="op" id="5251818">!</span><span class="ident" id="5251819"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251820">.</span><span class="ident" id="5251821">atComma</span><span class="op" id="5251828">(</span><span class="string" id="5251829">&#34;argument&nbsp;list&#34;</span><span class="op" id="5251844">)</span>&nbsp;<span class="op" id="5251846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251851">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251863"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251864">.</span><span class="ident" id="5251865">next</span><span class="op" id="5251869">(</span><span class="op" id="5251870">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5251873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251876"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251877">.</span><span class="ident" id="5251878">exprLev</span><span class="op" id="5251885">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5251889">rparen</span>&nbsp;<span class="op" id="5251896">:=</span>&nbsp;<span class="ident" id="5251899"><a href="/go/parser/parser.go.html#5251364">p</a></span><span class="op" id="5251900">.</span><span class="ident" id="5251901">expectClosing</span><span class="op" id="5251914">(</span><span class="ident" id="5251915"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5251920">.</span><span class="ident" id="5251921">RPAREN</span><span class="op" id="5251927">,</span>&nbsp;<span class="string" id="5251929">&#34;argument&nbsp;list&#34;</span><span class="op" id="5251944">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5251948">return</span>&nbsp;<span class="op" id="5251955">&amp;</span><span class="ident" id="5251956"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5251959">.</span><span class="ident" id="5251960">CallExpr</span><span class="op" id="5251968">{</span><span class="ident" id="5251969">Fun</span><span class="op" id="5251972">:</span>&nbsp;<span class="ident" id="5251974"><a href="/go/parser/parser.go.html#5251397">fun</a></span><span class="op" id="5251977">,</span>&nbsp;<span class="ident" id="5251979">Lparen</span><span class="op" id="5251985">:</span>&nbsp;<span class="ident" id="5251987"><a href="/go/parser/parser.go.html#5251487">lparen</a></span><span class="op" id="5251993">,</span>&nbsp;<span class="ident" id="5251995">Args</span><span class="op" id="5251999">:</span>&nbsp;<span class="ident" id="5252001"><a href="/go/parser/parser.go.html#5251538">list</a></span><span class="op" id="5252005">,</span>&nbsp;<span class="ident" id="5252007">Ellipsis</span><span class="op" id="5252015">:</span>&nbsp;<span class="ident" id="5252017"><a href="/go/parser/parser.go.html#5251559">ellipsis</a></span><span class="op" id="5252025">,</span>&nbsp;<span class="ident" id="5252027">Rparen</span><span class="op" id="5252033">:</span>&nbsp;<span class="ident" id="5252035"><a href="/go/parser/parser.go.html#5251889">rparen</a></span><span class="op" id="5252041">}</span><br>
<span class="lineno">1260</span><span class="op" id="5252043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5252046">func</span>&nbsp;<span class="op" id="5252051">(</span><span class="ident" id="5252052">p</span>&nbsp;<span class="op" id="5252054">*</span><span class="ident" id="5252055"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5252061">)</span>&nbsp;<span class="ident" id="5252063">parseElement</span><span class="op" id="5252075">(</span><span class="ident" id="5252076">keyOk</span>&nbsp;<span class="builtintype" id="5252082">bool</span><span class="op" id="5252086">)</span>&nbsp;<span class="ident" id="5252088"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5252091">.</span><span class="ident" id="5252092">Expr</span>&nbsp;<span class="op" id="5252097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252100">if</span>&nbsp;<span class="ident" id="5252103"><a href="/go/parser/parser.go.html#5252052">p</a></span><span class="op" id="5252104">.</span><span class="ident" id="5252105">trace</span>&nbsp;<span class="op" id="5252111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252115">defer</span>&nbsp;<span class="ident" id="5252121"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5252123">(</span><span class="ident" id="5252124"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5252129">(</span><span class="ident" id="5252130"><a href="/go/parser/parser.go.html#5252052">p</a></span><span class="op" id="5252131">,</span>&nbsp;<span class="string" id="5252133">&#34;Element&#34;</span><span class="op" id="5252142">)</span><span class="op" id="5252143">)</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5252146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252150">if</span>&nbsp;<span class="ident" id="5252153"><a href="/go/parser/parser.go.html#5252052">p</a></span><span class="op" id="5252154">.</span><span class="ident" id="5252155">tok</span>&nbsp;<span class="op" id="5252159">==</span>&nbsp;<span class="ident" id="5252162"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5252167">.</span><span class="ident" id="5252168">LBRACE</span>&nbsp;<span class="op" id="5252175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5252179">return</span>&nbsp;<span class="ident" id="5252186"><a href="/go/parser/parser.go.html#5252052">p</a></span><span class="op" id="5252187">.</span><span class="ident" id="5252188">parseLiteralValue</span><span class="op" id="5252205">(</span><span class="ident" id="5252206">nil</span><span class="op" id="5252209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5252212">}</span><br>
<span class="lineno">1270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252216">//&nbsp;Because&nbsp;the&nbsp;parser&nbsp;doesn&#39;t&nbsp;know&nbsp;the&nbsp;composite&nbsp;literal&nbsp;type,&nbsp;it&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252290">//&nbsp;know&nbsp;if&nbsp;a&nbsp;key&nbsp;that&#39;s&nbsp;an&nbsp;identifier&nbsp;is&nbsp;a&nbsp;struct&nbsp;field&nbsp;name&nbsp;or&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252362">//&nbsp;denoting&nbsp;a&nbsp;value.&nbsp;The&nbsp;former&nbsp;is&nbsp;not&nbsp;resolved&nbsp;by&nbsp;the&nbsp;parser&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252432">//&nbsp;resolver.</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252446">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252450">//&nbsp;Instead,&nbsp;_try_&nbsp;to&nbsp;resolve&nbsp;such&nbsp;a&nbsp;key&nbsp;if&nbsp;possible.&nbsp;If&nbsp;it&nbsp;resolves,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252520">//&nbsp;it&nbsp;a)&nbsp;has&nbsp;correctly&nbsp;resolved,&nbsp;or&nbsp;b)&nbsp;incorrectly&nbsp;resolved&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252589">//&nbsp;the&nbsp;key&nbsp;is&nbsp;a&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name&nbsp;matching&nbsp;another&nbsp;identifier.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252660">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case&nbsp;we&nbsp;are&nbsp;done,&nbsp;and&nbsp;in&nbsp;the&nbsp;latter&nbsp;case&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252728">//&nbsp;care&nbsp;because&nbsp;the&nbsp;type&nbsp;checker&nbsp;will&nbsp;do&nbsp;a&nbsp;separate&nbsp;field&nbsp;lookup.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252795">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252799">//&nbsp;If&nbsp;the&nbsp;key&nbsp;does&nbsp;not&nbsp;resolve,&nbsp;it&nbsp;a)&nbsp;must&nbsp;be&nbsp;defined&nbsp;at&nbsp;the&nbsp;top</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252865">//&nbsp;level&nbsp;in&nbsp;another&nbsp;file&nbsp;of&nbsp;the&nbsp;same&nbsp;package,&nbsp;the&nbsp;universe&nbsp;scope,&nbsp;or&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5252938">//&nbsp;undeclared;&nbsp;or&nbsp;b)&nbsp;it&nbsp;is&nbsp;a&nbsp;struct&nbsp;field.&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;the&nbsp;type</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5253011">//&nbsp;checker&nbsp;can&nbsp;do&nbsp;a&nbsp;top-level&nbsp;lookup,&nbsp;and&nbsp;in&nbsp;the&nbsp;latter&nbsp;case&nbsp;it&nbsp;will&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5253084">//&nbsp;a&nbsp;separate&nbsp;field&nbsp;lookup.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253113">x</span>&nbsp;<span class="op" id="5253115">:=</span>&nbsp;<span class="ident" id="5253118"><a href="/go/parser/parser.go.html#5252052">p</a></span><span class="op" id="5253119">.</span><span class="ident" id="5253120">checkExpr</span><span class="op" id="5253129">(</span><span class="ident" id="5253130"><a href="/go/parser/parser.go.html#5252052">p</a></span><span class="op" id="5253131">.</span><span class="ident" id="5253132">parseExpr</span><span class="op" id="5253141">(</span><span class="ident" id="5253142"><a href="/go/parser/parser.go.html#5252076">keyOk</a></span><span class="op" id="5253147">)</span><span class="op" id="5253148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253151">if</span>&nbsp;<span class="ident" id="5253154"><a href="/go/parser/parser.go.html#5252076">keyOk</a></span>&nbsp;<span class="op" id="5253160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253164">if</span>&nbsp;<span class="ident" id="5253167"><a href="/go/parser/parser.go.html#5252052">p</a></span><span class="op" id="5253168">.</span><span class="ident" id="5253169">tok</span>&nbsp;<span class="op" id="5253173">==</span>&nbsp;<span class="ident" id="5253176"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5253181">.</span><span class="ident" id="5253182">COLON</span>&nbsp;<span class="op" id="5253188">{</span><br>
<span class="lineno">1290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253193">colon</span>&nbsp;<span class="op" id="5253199">:=</span>&nbsp;<span class="ident" id="5253202"><a href="/go/parser/parser.go.html#5252052">p</a></span><span class="op" id="5253203">.</span><span class="ident" id="5253204">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253211"><a href="/go/parser/parser.go.html#5252052">p</a></span><span class="op" id="5253212">.</span><span class="ident" id="5253213">next</span><span class="op" id="5253217">(</span><span class="op" id="5253218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5253223">//&nbsp;Try&nbsp;to&nbsp;resolve&nbsp;the&nbsp;key&nbsp;but&nbsp;don&#39;t&nbsp;collect&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5253273">//&nbsp;as&nbsp;unresolved&nbsp;identifier&nbsp;if&nbsp;it&nbsp;fails&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5253324">//&nbsp;we&nbsp;don&#39;t&nbsp;get&nbsp;(possibly&nbsp;false)&nbsp;errors&nbsp;about</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5253373">//&nbsp;undeclared&nbsp;names.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253397"><a href="/go/parser/parser.go.html#5252052">p</a></span><span class="op" id="5253398">.</span><span class="ident" id="5253399">tryResolve</span><span class="op" id="5253409">(</span><span class="ident" id="5253410"><a href="/go/parser/parser.go.html#5253113">x</a></span><span class="op" id="5253411">,</span>&nbsp;<span class="builtintype" id="5253413">false</span><span class="op" id="5253418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253423">return</span>&nbsp;<span class="op" id="5253430">&amp;</span><span class="ident" id="5253431"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5253434">.</span><span class="ident" id="5253435">KeyValueExpr</span><span class="op" id="5253447">{</span><span class="ident" id="5253448">Key</span><span class="op" id="5253451">:</span>&nbsp;<span class="ident" id="5253453"><a href="/go/parser/parser.go.html#5253113">x</a></span><span class="op" id="5253454">,</span>&nbsp;<span class="ident" id="5253456">Colon</span><span class="op" id="5253461">:</span>&nbsp;<span class="ident" id="5253463"><a href="/go/parser/parser.go.html#5253193">colon</a></span><span class="op" id="5253468">,</span>&nbsp;<span class="ident" id="5253470">Value</span><span class="op" id="5253475">:</span>&nbsp;<span class="ident" id="5253477"><a href="/go/parser/parser.go.html#5252052">p</a></span><span class="op" id="5253478">.</span><span class="ident" id="5253479">parseElement</span><span class="op" id="5253491">(</span><span class="builtintype" id="5253492">false</span><span class="op" id="5253497">)</span><span class="op" id="5253498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5253502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253506"><a href="/go/parser/parser.go.html#5252052">p</a></span><span class="op" id="5253507">.</span><span class="ident" id="5253508">resolve</span><span class="op" id="5253515">(</span><span class="ident" id="5253516"><a href="/go/parser/parser.go.html#5253113">x</a></span><span class="op" id="5253517">)</span>&nbsp;<span class="comment" id="5253519">//&nbsp;not&nbsp;a&nbsp;key</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5253533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253537">return</span>&nbsp;<span class="ident" id="5253544"><a href="/go/parser/parser.go.html#5253113">x</a></span><br>
<span class="lineno"></span><span class="op" id="5253546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1305</span><span class="keyword" id="5253549">func</span>&nbsp;<span class="op" id="5253554">(</span><span class="ident" id="5253555">p</span>&nbsp;<span class="op" id="5253557">*</span><span class="ident" id="5253558"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5253564">)</span>&nbsp;<span class="ident" id="5253566">parseElementList</span><span class="op" id="5253582">(</span><span class="op" id="5253583">)</span>&nbsp;<span class="op" id="5253585">(</span><span class="ident" id="5253586">list</span>&nbsp;<span class="op" id="5253591">[</span><span class="op" id="5253592">]</span><span class="ident" id="5253593"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5253596">.</span><span class="ident" id="5253597">Expr</span><span class="op" id="5253601">)</span>&nbsp;<span class="op" id="5253603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253606">if</span>&nbsp;<span class="ident" id="5253609"><a href="/go/parser/parser.go.html#5253555">p</a></span><span class="op" id="5253610">.</span><span class="ident" id="5253611">trace</span>&nbsp;<span class="op" id="5253617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253621">defer</span>&nbsp;<span class="ident" id="5253627"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5253629">(</span><span class="ident" id="5253630"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5253635">(</span><span class="ident" id="5253636"><a href="/go/parser/parser.go.html#5253555">p</a></span><span class="op" id="5253637">,</span>&nbsp;<span class="string" id="5253639">&#34;ElementList&#34;</span><span class="op" id="5253652">)</span><span class="op" id="5253653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5253656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253660">for</span>&nbsp;<span class="ident" id="5253664"><a href="/go/parser/parser.go.html#5253555">p</a></span><span class="op" id="5253665">.</span><span class="ident" id="5253666">tok</span>&nbsp;<span class="op" id="5253670">!=</span>&nbsp;<span class="ident" id="5253673"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5253678">.</span><span class="ident" id="5253679">RBRACE</span>&nbsp;<span class="op" id="5253686">&amp;&amp;</span>&nbsp;<span class="ident" id="5253689"><a href="/go/parser/parser.go.html#5253555">p</a></span><span class="op" id="5253690">.</span><span class="ident" id="5253691">tok</span>&nbsp;<span class="op" id="5253695">!=</span>&nbsp;<span class="ident" id="5253698"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5253703">.</span><span class="ident" id="5253704">EOF</span>&nbsp;<span class="op" id="5253708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253712"><a href="/go/parser/parser.go.html#5253586">list</a></span>&nbsp;<span class="op" id="5253717">=</span>&nbsp;<span class="builtinfunc" id="5253719">append</span><span class="op" id="5253725">(</span><span class="ident" id="5253726"><a href="/go/parser/parser.go.html#5253586">list</a></span><span class="op" id="5253730">,</span>&nbsp;<span class="ident" id="5253732"><a href="/go/parser/parser.go.html#5253555">p</a></span><span class="op" id="5253733">.</span><span class="ident" id="5253734">parseElement</span><span class="op" id="5253746">(</span><span class="builtintype" id="5253747">true</span><span class="op" id="5253751">)</span><span class="op" id="5253752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253756">if</span>&nbsp;<span class="op" id="5253759">!</span><span class="ident" id="5253760"><a href="/go/parser/parser.go.html#5253555">p</a></span><span class="op" id="5253761">.</span><span class="ident" id="5253762">atComma</span><span class="op" id="5253769">(</span><span class="string" id="5253770">&#34;composite&nbsp;literal&#34;</span><span class="op" id="5253789">)</span>&nbsp;<span class="op" id="5253791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253796">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5253804">}</span><br>
<span class="lineno">1315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253808"><a href="/go/parser/parser.go.html#5253555">p</a></span><span class="op" id="5253809">.</span><span class="ident" id="5253810">next</span><span class="op" id="5253814">(</span><span class="op" id="5253815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5253818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253822">return</span><br>
<span class="lineno"></span><span class="op" id="5253829">}</span><br>
<span class="lineno">1320</span><br>
<span class="lineno"></span><span class="keyword" id="5253832">func</span>&nbsp;<span class="op" id="5253837">(</span><span class="ident" id="5253838">p</span>&nbsp;<span class="op" id="5253840">*</span><span class="ident" id="5253841"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5253847">)</span>&nbsp;<span class="ident" id="5253849">parseLiteralValue</span><span class="op" id="5253866">(</span><span class="ident" id="5253867">typ</span>&nbsp;<span class="ident" id="5253871"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5253874">.</span><span class="ident" id="5253875">Expr</span><span class="op" id="5253879">)</span>&nbsp;<span class="ident" id="5253881"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5253884">.</span><span class="ident" id="5253885">Expr</span>&nbsp;<span class="op" id="5253890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253893">if</span>&nbsp;<span class="ident" id="5253896"><a href="/go/parser/parser.go.html#5253838">p</a></span><span class="op" id="5253897">.</span><span class="ident" id="5253898">trace</span>&nbsp;<span class="op" id="5253904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253908">defer</span>&nbsp;<span class="ident" id="5253914"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5253916">(</span><span class="ident" id="5253917"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5253922">(</span><span class="ident" id="5253923"><a href="/go/parser/parser.go.html#5253838">p</a></span><span class="op" id="5253924">,</span>&nbsp;<span class="string" id="5253926">&#34;LiteralValue&#34;</span><span class="op" id="5253940">)</span><span class="op" id="5253941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5253944">}</span><br>
<span class="lineno">1325</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5253948">lbrace</span>&nbsp;<span class="op" id="5253955">:=</span>&nbsp;<span class="ident" id="5253958"><a href="/go/parser/parser.go.html#5253838">p</a></span><span class="op" id="5253959">.</span><span class="ident" id="5253960">expect</span><span class="op" id="5253966">(</span><span class="ident" id="5253967"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5253972">.</span><span class="ident" id="5253973">LBRACE</span><span class="op" id="5253979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5253982">var</span>&nbsp;<span class="ident" id="5253986">elts</span>&nbsp;<span class="op" id="5253991">[</span><span class="op" id="5253992">]</span><span class="ident" id="5253993"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5253996">.</span><span class="ident" id="5253997">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254003"><a href="/go/parser/parser.go.html#5253838">p</a></span><span class="op" id="5254004">.</span><span class="ident" id="5254005">exprLev</span><span class="op" id="5254012">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254016">if</span>&nbsp;<span class="ident" id="5254019"><a href="/go/parser/parser.go.html#5253838">p</a></span><span class="op" id="5254020">.</span><span class="ident" id="5254021">tok</span>&nbsp;<span class="op" id="5254025">!=</span>&nbsp;<span class="ident" id="5254028"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5254033">.</span><span class="ident" id="5254034">RBRACE</span>&nbsp;<span class="op" id="5254041">{</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254045"><a href="/go/parser/parser.go.html#5253986">elts</a></span>&nbsp;<span class="op" id="5254050">=</span>&nbsp;<span class="ident" id="5254052"><a href="/go/parser/parser.go.html#5253838">p</a></span><span class="op" id="5254053">.</span><span class="ident" id="5254054">parseElementList</span><span class="op" id="5254070">(</span><span class="op" id="5254071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5254074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254077"><a href="/go/parser/parser.go.html#5253838">p</a></span><span class="op" id="5254078">.</span><span class="ident" id="5254079">exprLev</span><span class="op" id="5254086">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5254090">rbrace</span>&nbsp;<span class="op" id="5254097">:=</span>&nbsp;<span class="ident" id="5254100"><a href="/go/parser/parser.go.html#5253838">p</a></span><span class="op" id="5254101">.</span><span class="ident" id="5254102">expectClosing</span><span class="op" id="5254115">(</span><span class="ident" id="5254116"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5254121">.</span><span class="ident" id="5254122">RBRACE</span><span class="op" id="5254128">,</span>&nbsp;<span class="string" id="5254130">&#34;composite&nbsp;literal&#34;</span><span class="op" id="5254149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254152">return</span>&nbsp;<span class="op" id="5254159">&amp;</span><span class="ident" id="5254160"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254163">.</span><span class="ident" id="5254164">CompositeLit</span><span class="op" id="5254176">{</span><span class="ident" id="5254177">Type</span><span class="op" id="5254181">:</span>&nbsp;<span class="ident" id="5254183"><a href="/go/parser/parser.go.html#5253867">typ</a></span><span class="op" id="5254186">,</span>&nbsp;<span class="ident" id="5254188">Lbrace</span><span class="op" id="5254194">:</span>&nbsp;<span class="ident" id="5254196"><a href="/go/parser/parser.go.html#5253948">lbrace</a></span><span class="op" id="5254202">,</span>&nbsp;<span class="ident" id="5254204">Elts</span><span class="op" id="5254208">:</span>&nbsp;<span class="ident" id="5254210"><a href="/go/parser/parser.go.html#5253986">elts</a></span><span class="op" id="5254214">,</span>&nbsp;<span class="ident" id="5254216">Rbrace</span><span class="op" id="5254222">:</span>&nbsp;<span class="ident" id="5254224"><a href="/go/parser/parser.go.html#5254090">rbrace</a></span><span class="op" id="5254230">}</span><br>
<span class="lineno">1335</span><span class="op" id="5254232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5254235">//&nbsp;checkExpr&nbsp;checks&nbsp;that&nbsp;x&nbsp;is&nbsp;an&nbsp;expression&nbsp;(and&nbsp;not&nbsp;a&nbsp;type).</span><br>
<span class="lineno"></span><span class="keyword" id="5254297">func</span>&nbsp;<span class="op" id="5254302">(</span><span class="ident" id="5254303">p</span>&nbsp;<span class="op" id="5254305">*</span><span class="ident" id="5254306"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5254312">)</span>&nbsp;<span class="ident" id="5254314">checkExpr</span><span class="op" id="5254323">(</span><span class="ident" id="5254324">x</span>&nbsp;<span class="ident" id="5254326"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254329">.</span><span class="ident" id="5254330">Expr</span><span class="op" id="5254334">)</span>&nbsp;<span class="ident" id="5254336"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254339">.</span><span class="ident" id="5254340">Expr</span>&nbsp;<span class="op" id="5254345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254348">switch</span>&nbsp;<span class="ident" id="5254355"><a href="/go/parser/parser.go.html#5256130">unparen</a></span><span class="op" id="5254362">(</span><span class="ident" id="5254363"><a href="/go/parser/parser.go.html#5254324">x</a></span><span class="op" id="5254364">)</span><span class="op" id="5254365">.</span><span class="op" id="5254366">(</span><span class="keyword" id="5254367">type</span><span class="op" id="5254371">)</span>&nbsp;<span class="op" id="5254373">{</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254376">case</span>&nbsp;<span class="op" id="5254381">*</span><span class="ident" id="5254382"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254385">.</span><span class="ident" id="5254386">BadExpr</span><span class="op" id="5254393">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254396">case</span>&nbsp;<span class="op" id="5254401">*</span><span class="ident" id="5254402"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254405">.</span><span class="ident" id="5254406">Ident</span><span class="op" id="5254411">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254414">case</span>&nbsp;<span class="op" id="5254419">*</span><span class="ident" id="5254420"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254423">.</span><span class="ident" id="5254424">BasicLit</span><span class="op" id="5254432">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254435">case</span>&nbsp;<span class="op" id="5254440">*</span><span class="ident" id="5254441"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254444">.</span><span class="ident" id="5254445">FuncLit</span><span class="op" id="5254452">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254455">case</span>&nbsp;<span class="op" id="5254460">*</span><span class="ident" id="5254461"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254464">.</span><span class="ident" id="5254465">CompositeLit</span><span class="op" id="5254477">:</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254480">case</span>&nbsp;<span class="op" id="5254485">*</span><span class="ident" id="5254486"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254489">.</span><span class="ident" id="5254490">ParenExpr</span><span class="op" id="5254499">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5254503">panic</span><span class="op" id="5254508">(</span><span class="string" id="5254509">&#34;unreachable&#34;</span><span class="op" id="5254522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254525">case</span>&nbsp;<span class="op" id="5254530">*</span><span class="ident" id="5254531"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254534">.</span><span class="ident" id="5254535">SelectorExpr</span><span class="op" id="5254547">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254550">case</span>&nbsp;<span class="op" id="5254555">*</span><span class="ident" id="5254556"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254559">.</span><span class="ident" id="5254560">IndexExpr</span><span class="op" id="5254569">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254572">case</span>&nbsp;<span class="op" id="5254577">*</span><span class="ident" id="5254578"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254581">.</span><span class="ident" id="5254582">SliceExpr</span><span class="op" id="5254591">:</span><br>
<span class="lineno">1350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254594">case</span>&nbsp;<span class="op" id="5254599">*</span><span class="ident" id="5254600"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254603">.</span><span class="ident" id="5254604">TypeAssertExpr</span><span class="op" id="5254618">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5254622">//&nbsp;If&nbsp;t.Type&nbsp;==&nbsp;nil&nbsp;we&nbsp;have&nbsp;a&nbsp;type&nbsp;assertion&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5254681">//&nbsp;y.(type),&nbsp;which&nbsp;is&nbsp;only&nbsp;allowed&nbsp;in&nbsp;type&nbsp;switch&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5254746">//&nbsp;It&#39;s&nbsp;hard&nbsp;to&nbsp;exclude&nbsp;those&nbsp;but&nbsp;for&nbsp;the&nbsp;case&nbsp;where&nbsp;we&nbsp;are&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5254811">//&nbsp;a&nbsp;type&nbsp;switch.&nbsp;Instead&nbsp;be&nbsp;lenient&nbsp;and&nbsp;test&nbsp;this&nbsp;in&nbsp;the&nbsp;type</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5254876">//&nbsp;checker.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254889">case</span>&nbsp;<span class="op" id="5254894">*</span><span class="ident" id="5254895"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254898">.</span><span class="ident" id="5254899">CallExpr</span><span class="op" id="5254907">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254910">case</span>&nbsp;<span class="op" id="5254915">*</span><span class="ident" id="5254916"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254919">.</span><span class="ident" id="5254920">StarExpr</span><span class="op" id="5254928">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254931">case</span>&nbsp;<span class="op" id="5254936">*</span><span class="ident" id="5254937"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254940">.</span><span class="ident" id="5254941">UnaryExpr</span><span class="op" id="5254950">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254953">case</span>&nbsp;<span class="op" id="5254958">*</span><span class="ident" id="5254959"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5254962">.</span><span class="ident" id="5254963">BinaryExpr</span><span class="op" id="5254973">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5254976">default</span><span class="op" id="5254983">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5254987">//&nbsp;all&nbsp;other&nbsp;nodes&nbsp;are&nbsp;not&nbsp;proper&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5255035"><a href="/go/parser/parser.go.html#5254303">p</a></span><span class="op" id="5255036">.</span><span class="ident" id="5255037">errorExpected</span><span class="op" id="5255050">(</span><span class="ident" id="5255051"><a href="/go/parser/parser.go.html#5254324">x</a></span><span class="op" id="5255052">.</span><span class="ident" id="5255053">Pos</span><span class="op" id="5255056">(</span><span class="op" id="5255057">)</span><span class="op" id="5255058">,</span>&nbsp;<span class="string" id="5255060">&#34;expression&#34;</span><span class="op" id="5255072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5255076"><a href="/go/parser/parser.go.html#5254324">x</a></span>&nbsp;<span class="op" id="5255078">=</span>&nbsp;<span class="op" id="5255080">&amp;</span><span class="ident" id="5255081"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255084">.</span><span class="ident" id="5255085">BadExpr</span><span class="op" id="5255092">{</span><span class="ident" id="5255093">From</span><span class="op" id="5255097">:</span>&nbsp;<span class="ident" id="5255099"><a href="/go/parser/parser.go.html#5254324">x</a></span><span class="op" id="5255100">.</span><span class="ident" id="5255101">Pos</span><span class="op" id="5255104">(</span><span class="op" id="5255105">)</span><span class="op" id="5255106">,</span>&nbsp;<span class="ident" id="5255108">To</span><span class="op" id="5255110">:</span>&nbsp;<span class="ident" id="5255112"><a href="/go/parser/parser.go.html#5254303">p</a></span><span class="op" id="5255113">.</span><span class="ident" id="5255114">safePos</span><span class="op" id="5255121">(</span><span class="ident" id="5255122"><a href="/go/parser/parser.go.html#5254324">x</a></span><span class="op" id="5255123">.</span><span class="ident" id="5255124">End</span><span class="op" id="5255127">(</span><span class="op" id="5255128">)</span><span class="op" id="5255129">)</span><span class="op" id="5255130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5255133">}</span><br>
<span class="lineno">1365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255136">return</span>&nbsp;<span class="ident" id="5255143"><a href="/go/parser/parser.go.html#5254324">x</a></span><br>
<span class="lineno"></span><span class="op" id="5255145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5255148">//&nbsp;isTypeName&nbsp;returns&nbsp;true&nbsp;iff&nbsp;x&nbsp;is&nbsp;a&nbsp;(qualified)&nbsp;TypeName.</span><br>
<span class="lineno"></span><span class="keyword" id="5255208">func</span>&nbsp;<span class="ident" id="5255213">isTypeName</span><span class="op" id="5255223">(</span><span class="ident" id="5255224">x</span>&nbsp;<span class="ident" id="5255226"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255229">.</span><span class="ident" id="5255230">Expr</span><span class="op" id="5255234">)</span>&nbsp;<span class="builtintype" id="5255236">bool</span>&nbsp;<span class="op" id="5255241">{</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255244">switch</span>&nbsp;<span class="ident" id="5255251">t</span>&nbsp;<span class="op" id="5255253">:=</span>&nbsp;<span class="ident" id="5255256"><a href="/go/parser/parser.go.html#5255224">x</a></span><span class="op" id="5255257">.</span><span class="op" id="5255258">(</span><span class="keyword" id="5255259">type</span><span class="op" id="5255263">)</span>&nbsp;<span class="op" id="5255265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255268">case</span>&nbsp;<span class="op" id="5255273">*</span><span class="ident" id="5255274"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255277">.</span><span class="ident" id="5255278">BadExpr</span><span class="op" id="5255285">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255288">case</span>&nbsp;<span class="op" id="5255293">*</span><span class="ident" id="5255294"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255297">.</span><span class="ident" id="5255298">Ident</span><span class="op" id="5255303">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255306">case</span>&nbsp;<span class="op" id="5255311">*</span><span class="ident" id="5255312"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255315">.</span><span class="ident" id="5255316">SelectorExpr</span><span class="op" id="5255328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5255332">_</span><span class="op" id="5255333">,</span>&nbsp;<span class="ident" id="5255335">isIdent</span>&nbsp;<span class="op" id="5255343">:=</span>&nbsp;<span class="ident" id="5255346"><a href="/go/parser/parser.go.html#5255251">t</a></span><span class="op" id="5255347">.</span><span class="ident" id="5255348">X</span><span class="op" id="5255349">.</span><span class="op" id="5255350">(</span><span class="op" id="5255351">*</span><span class="ident" id="5255352"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255355">.</span><span class="ident" id="5255356">Ident</span><span class="op" id="5255361">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255365">return</span>&nbsp;<span class="ident" id="5255372"><a href="/go/parser/parser.go.html#5255335">isIdent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255381">default</span><span class="op" id="5255388">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255392">return</span>&nbsp;<span class="builtintype" id="5255399">false</span>&nbsp;<span class="comment" id="5255405">//&nbsp;all&nbsp;other&nbsp;nodes&nbsp;are&nbsp;not&nbsp;type&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5255444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255447">return</span>&nbsp;<span class="builtintype" id="5255454">true</span><br>
<span class="lineno">1380</span><span class="op" id="5255459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5255462">//&nbsp;isLiteralType&nbsp;returns&nbsp;true&nbsp;iff&nbsp;x&nbsp;is&nbsp;a&nbsp;legal&nbsp;composite&nbsp;literal&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5255533">func</span>&nbsp;<span class="ident" id="5255538">isLiteralType</span><span class="op" id="5255551">(</span><span class="ident" id="5255552">x</span>&nbsp;<span class="ident" id="5255554"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255557">.</span><span class="ident" id="5255558">Expr</span><span class="op" id="5255562">)</span>&nbsp;<span class="builtintype" id="5255564">bool</span>&nbsp;<span class="op" id="5255569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255572">switch</span>&nbsp;<span class="ident" id="5255579">t</span>&nbsp;<span class="op" id="5255581">:=</span>&nbsp;<span class="ident" id="5255584"><a href="/go/parser/parser.go.html#5255552">x</a></span><span class="op" id="5255585">.</span><span class="op" id="5255586">(</span><span class="keyword" id="5255587">type</span><span class="op" id="5255591">)</span>&nbsp;<span class="op" id="5255593">{</span><br>
<span class="lineno">1385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255596">case</span>&nbsp;<span class="op" id="5255601">*</span><span class="ident" id="5255602"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255605">.</span><span class="ident" id="5255606">BadExpr</span><span class="op" id="5255613">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255616">case</span>&nbsp;<span class="op" id="5255621">*</span><span class="ident" id="5255622"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255625">.</span><span class="ident" id="5255626">Ident</span><span class="op" id="5255631">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255634">case</span>&nbsp;<span class="op" id="5255639">*</span><span class="ident" id="5255640"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255643">.</span><span class="ident" id="5255644">SelectorExpr</span><span class="op" id="5255656">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5255660">_</span><span class="op" id="5255661">,</span>&nbsp;<span class="ident" id="5255663">isIdent</span>&nbsp;<span class="op" id="5255671">:=</span>&nbsp;<span class="ident" id="5255674"><a href="/go/parser/parser.go.html#5255579">t</a></span><span class="op" id="5255675">.</span><span class="ident" id="5255676">X</span><span class="op" id="5255677">.</span><span class="op" id="5255678">(</span><span class="op" id="5255679">*</span><span class="ident" id="5255680"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255683">.</span><span class="ident" id="5255684">Ident</span><span class="op" id="5255689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255693">return</span>&nbsp;<span class="ident" id="5255700"><a href="/go/parser/parser.go.html#5255663">isIdent</a></span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255709">case</span>&nbsp;<span class="op" id="5255714">*</span><span class="ident" id="5255715"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255718">.</span><span class="ident" id="5255719">ArrayType</span><span class="op" id="5255728">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255731">case</span>&nbsp;<span class="op" id="5255736">*</span><span class="ident" id="5255737"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255740">.</span><span class="ident" id="5255741">StructType</span><span class="op" id="5255751">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255754">case</span>&nbsp;<span class="op" id="5255759">*</span><span class="ident" id="5255760"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255763">.</span><span class="ident" id="5255764">MapType</span><span class="op" id="5255771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255774">default</span><span class="op" id="5255781">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255785">return</span>&nbsp;<span class="builtintype" id="5255792">false</span>&nbsp;<span class="comment" id="5255798">//&nbsp;all&nbsp;other&nbsp;nodes&nbsp;are&nbsp;not&nbsp;legal&nbsp;composite&nbsp;literal&nbsp;types</span><br>
<span class="lineno">1395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5255856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255859">return</span>&nbsp;<span class="builtintype" id="5255866">true</span><br>
<span class="lineno"></span><span class="op" id="5255871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5255874">//&nbsp;If&nbsp;x&nbsp;is&nbsp;of&nbsp;the&nbsp;form&nbsp;*T,&nbsp;deref&nbsp;returns&nbsp;T,&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;x.</span><br>
<span class="lineno">1400</span><span class="keyword" id="5255942">func</span>&nbsp;<span class="ident" id="5255947">deref</span><span class="op" id="5255952">(</span><span class="ident" id="5255953">x</span>&nbsp;<span class="ident" id="5255955"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255958">.</span><span class="ident" id="5255959">Expr</span><span class="op" id="5255963">)</span>&nbsp;<span class="ident" id="5255965"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255968">.</span><span class="ident" id="5255969">Expr</span>&nbsp;<span class="op" id="5255974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5255977">if</span>&nbsp;<span class="ident" id="5255980">p</span><span class="op" id="5255981">,</span>&nbsp;<span class="ident" id="5255983">isPtr</span>&nbsp;<span class="op" id="5255989">:=</span>&nbsp;<span class="ident" id="5255992"><a href="/go/parser/parser.go.html#5255953">x</a></span><span class="op" id="5255993">.</span><span class="op" id="5255994">(</span><span class="op" id="5255995">*</span><span class="ident" id="5255996"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5255999">.</span><span class="ident" id="5256000">StarExpr</span><span class="op" id="5256008">)</span><span class="op" id="5256009">;</span>&nbsp;<span class="ident" id="5256011"><a href="/go/parser/parser.go.html#5255983">isPtr</a></span>&nbsp;<span class="op" id="5256017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5256021"><a href="/go/parser/parser.go.html#5255953">x</a></span>&nbsp;<span class="op" id="5256023">=</span>&nbsp;<span class="ident" id="5256025"><a href="/go/parser/parser.go.html#5255980">p</a></span><span class="op" id="5256026">.</span><span class="ident" id="5256027">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5256030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256033">return</span>&nbsp;<span class="ident" id="5256040"><a href="/go/parser/parser.go.html#5255953">x</a></span><br>
<span class="lineno">1405</span><span class="op" id="5256042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5256045">//&nbsp;If&nbsp;x&nbsp;is&nbsp;of&nbsp;the&nbsp;form&nbsp;(T),&nbsp;unparen&nbsp;returns&nbsp;unparen(T),&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;x.</span><br>
<span class="lineno"></span><span class="keyword" id="5256125">func</span>&nbsp;<span class="ident" id="5256130">unparen</span><span class="op" id="5256137">(</span><span class="ident" id="5256138">x</span>&nbsp;<span class="ident" id="5256140"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5256143">.</span><span class="ident" id="5256144">Expr</span><span class="op" id="5256148">)</span>&nbsp;<span class="ident" id="5256150"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5256153">.</span><span class="ident" id="5256154">Expr</span>&nbsp;<span class="op" id="5256159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256162">if</span>&nbsp;<span class="ident" id="5256165">p</span><span class="op" id="5256166">,</span>&nbsp;<span class="ident" id="5256168">isParen</span>&nbsp;<span class="op" id="5256176">:=</span>&nbsp;<span class="ident" id="5256179"><a href="/go/parser/parser.go.html#5256138">x</a></span><span class="op" id="5256180">.</span><span class="op" id="5256181">(</span><span class="op" id="5256182">*</span><span class="ident" id="5256183"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5256186">.</span><span class="ident" id="5256187">ParenExpr</span><span class="op" id="5256196">)</span><span class="op" id="5256197">;</span>&nbsp;<span class="ident" id="5256199"><a href="/go/parser/parser.go.html#5256168">isParen</a></span>&nbsp;<span class="op" id="5256207">{</span><br>
<span class="lineno">1410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5256211"><a href="/go/parser/parser.go.html#5256138">x</a></span>&nbsp;<span class="op" id="5256213">=</span>&nbsp;<span class="ident" id="5256215"><a href="/go/parser/parser.go.html#5256130">unparen</a></span><span class="op" id="5256222">(</span><span class="ident" id="5256223"><a href="/go/parser/parser.go.html#5256165">p</a></span><span class="op" id="5256224">.</span><span class="ident" id="5256225">X</span><span class="op" id="5256226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5256229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256232">return</span>&nbsp;<span class="ident" id="5256239"><a href="/go/parser/parser.go.html#5256138">x</a></span><br>
<span class="lineno"></span><span class="op" id="5256241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1415</span><span class="comment" id="5256244">//&nbsp;checkExprOrType&nbsp;checks&nbsp;that&nbsp;x&nbsp;is&nbsp;an&nbsp;expression&nbsp;or&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="5256304">//&nbsp;(and&nbsp;not&nbsp;a&nbsp;raw&nbsp;type&nbsp;such&nbsp;as&nbsp;[...]T).</span><br>
<span class="lineno"></span><span class="comment" id="5256344">//</span><br>
<span class="lineno"></span><span class="keyword" id="5256347">func</span>&nbsp;<span class="op" id="5256352">(</span><span class="ident" id="5256353">p</span>&nbsp;<span class="op" id="5256355">*</span><span class="ident" id="5256356"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5256362">)</span>&nbsp;<span class="ident" id="5256364">checkExprOrType</span><span class="op" id="5256379">(</span><span class="ident" id="5256380">x</span>&nbsp;<span class="ident" id="5256382"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5256385">.</span><span class="ident" id="5256386">Expr</span><span class="op" id="5256390">)</span>&nbsp;<span class="ident" id="5256392"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5256395">.</span><span class="ident" id="5256396">Expr</span>&nbsp;<span class="op" id="5256401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256404">switch</span>&nbsp;<span class="ident" id="5256411">t</span>&nbsp;<span class="op" id="5256413">:=</span>&nbsp;<span class="ident" id="5256416"><a href="/go/parser/parser.go.html#5256130">unparen</a></span><span class="op" id="5256423">(</span><span class="ident" id="5256424"><a href="/go/parser/parser.go.html#5256380">x</a></span><span class="op" id="5256425">)</span><span class="op" id="5256426">.</span><span class="op" id="5256427">(</span><span class="keyword" id="5256428">type</span><span class="op" id="5256432">)</span>&nbsp;<span class="op" id="5256434">{</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256437">case</span>&nbsp;<span class="op" id="5256442">*</span><span class="ident" id="5256443"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5256446">.</span><span class="ident" id="5256447">ParenExpr</span><span class="op" id="5256456">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5256460">panic</span><span class="op" id="5256465">(</span><span class="string" id="5256466">&#34;unreachable&#34;</span><span class="op" id="5256479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256482">case</span>&nbsp;<span class="op" id="5256487">*</span><span class="ident" id="5256488"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5256491">.</span><span class="ident" id="5256492">UnaryExpr</span><span class="op" id="5256501">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256504">case</span>&nbsp;<span class="op" id="5256509">*</span><span class="ident" id="5256510"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5256513">.</span><span class="ident" id="5256514">ArrayType</span><span class="op" id="5256523">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256527">if</span>&nbsp;<span class="builtinfunc" id="5256530">len</span><span class="op" id="5256533">,</span>&nbsp;<span class="ident" id="5256535">isEllipsis</span>&nbsp;<span class="op" id="5256546">:=</span>&nbsp;<span class="ident" id="5256549"><a href="/go/parser/parser.go.html#5256411">t</a></span><span class="op" id="5256550">.</span><span class="ident" id="5256551">Len</span><span class="op" id="5256554">.</span><span class="op" id="5256555">(</span><span class="op" id="5256556">*</span><span class="ident" id="5256557"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5256560">.</span><span class="ident" id="5256561">Ellipsis</span><span class="op" id="5256569">)</span><span class="op" id="5256570">;</span>&nbsp;<span class="ident" id="5256572"><a href="/go/parser/parser.go.html#5256535">isEllipsis</a></span>&nbsp;<span class="op" id="5256583">{</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5256588"><a href="/go/parser/parser.go.html#5256353">p</a></span><span class="op" id="5256589">.</span><span class="builtintype" id="5256590">error</span><span class="op" id="5256595">(</span><span class="builtinfunc" id="5256596"><a href="/go/parser/parser.go.html#5256530">len</a></span><span class="op" id="5256599">.</span><span class="ident" id="5256600">Pos</span><span class="op" id="5256603">(</span><span class="op" id="5256604">)</span><span class="op" id="5256605">,</span>&nbsp;<span class="string" id="5256607">&#34;expected&nbsp;array&nbsp;length,&nbsp;found&nbsp;&#39;...&#39;&#34;</span><span class="op" id="5256643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5256648"><a href="/go/parser/parser.go.html#5256380">x</a></span>&nbsp;<span class="op" id="5256650">=</span>&nbsp;<span class="op" id="5256652">&amp;</span><span class="ident" id="5256653"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5256656">.</span><span class="ident" id="5256657">BadExpr</span><span class="op" id="5256664">{</span><span class="ident" id="5256665">From</span><span class="op" id="5256669">:</span>&nbsp;<span class="ident" id="5256671"><a href="/go/parser/parser.go.html#5256380">x</a></span><span class="op" id="5256672">.</span><span class="ident" id="5256673">Pos</span><span class="op" id="5256676">(</span><span class="op" id="5256677">)</span><span class="op" id="5256678">,</span>&nbsp;<span class="ident" id="5256680">To</span><span class="op" id="5256682">:</span>&nbsp;<span class="ident" id="5256684"><a href="/go/parser/parser.go.html#5256353">p</a></span><span class="op" id="5256685">.</span><span class="ident" id="5256686">safePos</span><span class="op" id="5256693">(</span><span class="ident" id="5256694"><a href="/go/parser/parser.go.html#5256380">x</a></span><span class="op" id="5256695">.</span><span class="ident" id="5256696">End</span><span class="op" id="5256699">(</span><span class="op" id="5256700">)</span><span class="op" id="5256701">)</span><span class="op" id="5256702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5256706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5256709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5256713">//&nbsp;all&nbsp;other&nbsp;nodes&nbsp;are&nbsp;expressions&nbsp;or&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256758">return</span>&nbsp;<span class="ident" id="5256765"><a href="/go/parser/parser.go.html#5256380">x</a></span><br>
<span class="lineno"></span><span class="op" id="5256767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5256770">//&nbsp;If&nbsp;lhs&nbsp;is&nbsp;set&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno">1435</span><span class="keyword" id="5256840">func</span>&nbsp;<span class="op" id="5256845">(</span><span class="ident" id="5256846">p</span>&nbsp;<span class="op" id="5256848">*</span><span class="ident" id="5256849"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5256855">)</span>&nbsp;<span class="ident" id="5256857">parsePrimaryExpr</span><span class="op" id="5256873">(</span><span class="ident" id="5256874">lhs</span>&nbsp;<span class="builtintype" id="5256878">bool</span><span class="op" id="5256882">)</span>&nbsp;<span class="ident" id="5256884"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5256887">.</span><span class="ident" id="5256888">Expr</span>&nbsp;<span class="op" id="5256893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256896">if</span>&nbsp;<span class="ident" id="5256899"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5256900">.</span><span class="ident" id="5256901">trace</span>&nbsp;<span class="op" id="5256907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256911">defer</span>&nbsp;<span class="ident" id="5256917"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5256919">(</span><span class="ident" id="5256920"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5256925">(</span><span class="ident" id="5256926"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5256927">,</span>&nbsp;<span class="string" id="5256929">&#34;PrimaryExpr&#34;</span><span class="op" id="5256942">)</span><span class="op" id="5256943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5256946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5256950">x</span>&nbsp;<span class="op" id="5256952">:=</span>&nbsp;<span class="ident" id="5256955"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5256956">.</span><span class="ident" id="5256957">parseOperand</span><span class="op" id="5256969">(</span><span class="ident" id="5256970"><a href="/go/parser/parser.go.html#5256874">lhs</a></span><span class="op" id="5256973">)</span><br>
<span class="lineno"></span><span class="ident" id="5256975">L</span><span class="op" id="5256976">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256979">for</span>&nbsp;<span class="op" id="5256983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5256987">switch</span>&nbsp;<span class="ident" id="5256994"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5256995">.</span><span class="ident" id="5256996">tok</span>&nbsp;<span class="op" id="5257000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257004">case</span>&nbsp;<span class="ident" id="5257009"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5257014">.</span><span class="ident" id="5257015">PERIOD</span><span class="op" id="5257021">:</span><br>
<span class="lineno">1445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257026"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257027">.</span><span class="ident" id="5257028">next</span><span class="op" id="5257032">(</span><span class="op" id="5257033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257038">if</span>&nbsp;<span class="ident" id="5257041"><a href="/go/parser/parser.go.html#5256874">lhs</a></span>&nbsp;<span class="op" id="5257045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257051"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257052">.</span><span class="ident" id="5257053">resolve</span><span class="op" id="5257060">(</span><span class="ident" id="5257061"><a href="/go/parser/parser.go.html#5256950">x</a></span><span class="op" id="5257062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5257067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257072">switch</span>&nbsp;<span class="ident" id="5257079"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257080">.</span><span class="ident" id="5257081">tok</span>&nbsp;<span class="op" id="5257085">{</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257090">case</span>&nbsp;<span class="ident" id="5257095"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5257100">.</span><span class="ident" id="5257101">IDENT</span><span class="op" id="5257106">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257112"><a href="/go/parser/parser.go.html#5256950">x</a></span>&nbsp;<span class="op" id="5257114">=</span>&nbsp;<span class="ident" id="5257116"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257117">.</span><span class="ident" id="5257118">parseSelector</span><span class="op" id="5257131">(</span><span class="ident" id="5257132"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257133">.</span><span class="ident" id="5257134">checkExprOrType</span><span class="op" id="5257149">(</span><span class="ident" id="5257150"><a href="/go/parser/parser.go.html#5256950">x</a></span><span class="op" id="5257151">)</span><span class="op" id="5257152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257157">case</span>&nbsp;<span class="ident" id="5257162"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5257167">.</span><span class="ident" id="5257168">LPAREN</span><span class="op" id="5257174">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257180"><a href="/go/parser/parser.go.html#5256950">x</a></span>&nbsp;<span class="op" id="5257182">=</span>&nbsp;<span class="ident" id="5257184"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257185">.</span><span class="ident" id="5257186">parseTypeAssertion</span><span class="op" id="5257204">(</span><span class="ident" id="5257205"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257206">.</span><span class="ident" id="5257207">checkExpr</span><span class="op" id="5257216">(</span><span class="ident" id="5257217"><a href="/go/parser/parser.go.html#5256950">x</a></span><span class="op" id="5257218">)</span><span class="op" id="5257219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257224">default</span><span class="op" id="5257231">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257237">pos</span>&nbsp;<span class="op" id="5257241">:=</span>&nbsp;<span class="ident" id="5257244"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257245">.</span><span class="ident" id="5257246">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257254"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257255">.</span><span class="ident" id="5257256">errorExpected</span><span class="op" id="5257269">(</span><span class="ident" id="5257270"><a href="/go/parser/parser.go.html#5257237">pos</a></span><span class="op" id="5257273">,</span>&nbsp;<span class="string" id="5257275">&#34;selector&nbsp;or&nbsp;type&nbsp;assertion&#34;</span><span class="op" id="5257303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257309"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257310">.</span><span class="ident" id="5257311">next</span><span class="op" id="5257315">(</span><span class="op" id="5257316">)</span>&nbsp;<span class="comment" id="5257318">//&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257339"><a href="/go/parser/parser.go.html#5256950">x</a></span>&nbsp;<span class="op" id="5257341">=</span>&nbsp;<span class="op" id="5257343">&amp;</span><span class="ident" id="5257344"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5257347">.</span><span class="ident" id="5257348">BadExpr</span><span class="op" id="5257355">{</span><span class="ident" id="5257356">From</span><span class="op" id="5257360">:</span>&nbsp;<span class="ident" id="5257362"><a href="/go/parser/parser.go.html#5257237">pos</a></span><span class="op" id="5257365">,</span>&nbsp;<span class="ident" id="5257367">To</span><span class="op" id="5257369">:</span>&nbsp;<span class="ident" id="5257371"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257372">.</span><span class="ident" id="5257373">pos</span><span class="op" id="5257376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5257381">}</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257385">case</span>&nbsp;<span class="ident" id="5257390"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5257395">.</span><span class="ident" id="5257396">LBRACK</span><span class="op" id="5257402">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257407">if</span>&nbsp;<span class="ident" id="5257410"><a href="/go/parser/parser.go.html#5256874">lhs</a></span>&nbsp;<span class="op" id="5257414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257420"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257421">.</span><span class="ident" id="5257422">resolve</span><span class="op" id="5257429">(</span><span class="ident" id="5257430"><a href="/go/parser/parser.go.html#5256950">x</a></span><span class="op" id="5257431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5257436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257441"><a href="/go/parser/parser.go.html#5256950">x</a></span>&nbsp;<span class="op" id="5257443">=</span>&nbsp;<span class="ident" id="5257445"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257446">.</span><span class="ident" id="5257447">parseIndexOrSlice</span><span class="op" id="5257464">(</span><span class="ident" id="5257465"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257466">.</span><span class="ident" id="5257467">checkExpr</span><span class="op" id="5257476">(</span><span class="ident" id="5257477"><a href="/go/parser/parser.go.html#5256950">x</a></span><span class="op" id="5257478">)</span><span class="op" id="5257479">)</span><br>
<span class="lineno">1465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257483">case</span>&nbsp;<span class="ident" id="5257488"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5257493">.</span><span class="ident" id="5257494">LPAREN</span><span class="op" id="5257500">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257505">if</span>&nbsp;<span class="ident" id="5257508"><a href="/go/parser/parser.go.html#5256874">lhs</a></span>&nbsp;<span class="op" id="5257512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257518"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257519">.</span><span class="ident" id="5257520">resolve</span><span class="op" id="5257527">(</span><span class="ident" id="5257528"><a href="/go/parser/parser.go.html#5256950">x</a></span><span class="op" id="5257529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5257534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257539"><a href="/go/parser/parser.go.html#5256950">x</a></span>&nbsp;<span class="op" id="5257541">=</span>&nbsp;<span class="ident" id="5257543"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257544">.</span><span class="ident" id="5257545">parseCallOrConversion</span><span class="op" id="5257566">(</span><span class="ident" id="5257567"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257568">.</span><span class="ident" id="5257569">checkExprOrType</span><span class="op" id="5257584">(</span><span class="ident" id="5257585"><a href="/go/parser/parser.go.html#5256950">x</a></span><span class="op" id="5257586">)</span><span class="op" id="5257587">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257591">case</span>&nbsp;<span class="ident" id="5257596"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5257601">.</span><span class="ident" id="5257602">LBRACE</span><span class="op" id="5257608">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257613">if</span>&nbsp;<span class="ident" id="5257616"><a href="/go/parser/parser.go.html#5255538">isLiteralType</a></span><span class="op" id="5257629">(</span><span class="ident" id="5257630"><a href="/go/parser/parser.go.html#5256950">x</a></span><span class="op" id="5257631">)</span>&nbsp;<span class="op" id="5257633">&amp;&amp;</span>&nbsp;<span class="op" id="5257636">(</span><span class="ident" id="5257637"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257638">.</span><span class="ident" id="5257639">exprLev</span>&nbsp;<span class="op" id="5257647">&gt;=</span>&nbsp;<span class="num" id="5257650">0</span>&nbsp;<span class="op" id="5257652">||</span>&nbsp;<span class="op" id="5257655">!</span><span class="ident" id="5257656"><a href="/go/parser/parser.go.html#5255213">isTypeName</a></span><span class="op" id="5257666">(</span><span class="ident" id="5257667"><a href="/go/parser/parser.go.html#5256950">x</a></span><span class="op" id="5257668">)</span><span class="op" id="5257669">)</span>&nbsp;<span class="op" id="5257671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257677">if</span>&nbsp;<span class="ident" id="5257680"><a href="/go/parser/parser.go.html#5256874">lhs</a></span>&nbsp;<span class="op" id="5257684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257691"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257692">.</span><span class="ident" id="5257693">resolve</span><span class="op" id="5257700">(</span><span class="ident" id="5257701"><a href="/go/parser/parser.go.html#5256950">x</a></span><span class="op" id="5257702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5257708">}</span><br>
<span class="lineno">1475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257714"><a href="/go/parser/parser.go.html#5256950">x</a></span>&nbsp;<span class="op" id="5257716">=</span>&nbsp;<span class="ident" id="5257718"><a href="/go/parser/parser.go.html#5256846">p</a></span><span class="op" id="5257719">.</span><span class="ident" id="5257720">parseLiteralValue</span><span class="op" id="5257737">(</span><span class="ident" id="5257738"><a href="/go/parser/parser.go.html#5256950">x</a></span><span class="op" id="5257739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5257744">}</span>&nbsp;<span class="keyword" id="5257746">else</span>&nbsp;<span class="op" id="5257751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257757">break</span>&nbsp;<span class="ident" id="5257763">L</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5257768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257772">default</span><span class="op" id="5257779">:</span><br>
<span class="lineno">1480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257784">break</span>&nbsp;<span class="ident" id="5257790">L</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5257794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5257798"><a href="/go/parser/parser.go.html#5256874">lhs</a></span>&nbsp;<span class="op" id="5257802">=</span>&nbsp;<span class="builtintype" id="5257804">false</span>&nbsp;<span class="comment" id="5257810">//&nbsp;no&nbsp;need&nbsp;to&nbsp;try&nbsp;to&nbsp;resolve&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5257846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257850">return</span>&nbsp;<span class="ident" id="5257857"><a href="/go/parser/parser.go.html#5256950">x</a></span><br>
<span class="lineno"></span><span class="op" id="5257859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5257862">//&nbsp;If&nbsp;lhs&nbsp;is&nbsp;set&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="5257932">func</span>&nbsp;<span class="op" id="5257937">(</span><span class="ident" id="5257938">p</span>&nbsp;<span class="op" id="5257940">*</span><span class="ident" id="5257941"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5257947">)</span>&nbsp;<span class="ident" id="5257949">parseUnaryExpr</span><span class="op" id="5257963">(</span><span class="ident" id="5257964">lhs</span>&nbsp;<span class="builtintype" id="5257968">bool</span><span class="op" id="5257972">)</span>&nbsp;<span class="ident" id="5257974"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5257977">.</span><span class="ident" id="5257978">Expr</span>&nbsp;<span class="op" id="5257983">{</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257986">if</span>&nbsp;<span class="ident" id="5257989"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5257990">.</span><span class="ident" id="5257991">trace</span>&nbsp;<span class="op" id="5257997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5258001">defer</span>&nbsp;<span class="ident" id="5258007"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5258009">(</span><span class="ident" id="5258010"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5258015">(</span><span class="ident" id="5258016"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5258017">,</span>&nbsp;<span class="string" id="5258019">&#34;UnaryExpr&#34;</span><span class="op" id="5258030">)</span><span class="op" id="5258031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5258034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5258038">switch</span>&nbsp;<span class="ident" id="5258045"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5258046">.</span><span class="ident" id="5258047">tok</span>&nbsp;<span class="op" id="5258051">{</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5258054">case</span>&nbsp;<span class="ident" id="5258059"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5258064">.</span><span class="ident" id="5258065">ADD</span><span class="op" id="5258068">,</span>&nbsp;<span class="ident" id="5258070"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5258075">.</span><span class="ident" id="5258076">SUB</span><span class="op" id="5258079">,</span>&nbsp;<span class="ident" id="5258081"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5258086">.</span><span class="ident" id="5258087">NOT</span><span class="op" id="5258090">,</span>&nbsp;<span class="ident" id="5258092"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5258097">.</span><span class="ident" id="5258098">XOR</span><span class="op" id="5258101">,</span>&nbsp;<span class="ident" id="5258103"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5258108">.</span><span class="ident" id="5258109">AND</span><span class="op" id="5258112">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5258116">pos</span><span class="op" id="5258119">,</span>&nbsp;<span class="ident" id="5258121">op</span>&nbsp;<span class="op" id="5258124">:=</span>&nbsp;<span class="ident" id="5258127"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5258128">.</span><span class="ident" id="5258129">pos</span><span class="op" id="5258132">,</span>&nbsp;<span class="ident" id="5258134"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5258135">.</span><span class="ident" id="5258136">tok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5258142"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5258143">.</span><span class="ident" id="5258144">next</span><span class="op" id="5258148">(</span><span class="op" id="5258149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5258153">x</span>&nbsp;<span class="op" id="5258155">:=</span>&nbsp;<span class="ident" id="5258158"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5258159">.</span><span class="ident" id="5258160">parseUnaryExpr</span><span class="op" id="5258174">(</span><span class="builtintype" id="5258175">false</span><span class="op" id="5258180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5258184">return</span>&nbsp;<span class="op" id="5258191">&amp;</span><span class="ident" id="5258192"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5258195">.</span><span class="ident" id="5258196">UnaryExpr</span><span class="op" id="5258205">{</span><span class="ident" id="5258206">OpPos</span><span class="op" id="5258211">:</span>&nbsp;<span class="ident" id="5258213"><a href="/go/parser/parser.go.html#5258116">pos</a></span><span class="op" id="5258216">,</span>&nbsp;<span class="ident" id="5258218">Op</span><span class="op" id="5258220">:</span>&nbsp;<span class="ident" id="5258222"><a href="/go/parser/parser.go.html#5258121">op</a></span><span class="op" id="5258224">,</span>&nbsp;<span class="ident" id="5258226">X</span><span class="op" id="5258227">:</span>&nbsp;<span class="ident" id="5258229"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5258230">.</span><span class="ident" id="5258231">checkExpr</span><span class="op" id="5258240">(</span><span class="ident" id="5258241"><a href="/go/parser/parser.go.html#5258153">x</a></span><span class="op" id="5258242">)</span><span class="op" id="5258243">}</span><br>
<span class="lineno">1500</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5258247">case</span>&nbsp;<span class="ident" id="5258252"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5258257">.</span><span class="ident" id="5258258">ARROW</span><span class="op" id="5258263">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258267">//&nbsp;channel&nbsp;type&nbsp;or&nbsp;receive&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5258307">arrow</span>&nbsp;<span class="op" id="5258313">:=</span>&nbsp;<span class="ident" id="5258316"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5258317">.</span><span class="ident" id="5258318">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5258324"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5258325">.</span><span class="ident" id="5258326">next</span><span class="op" id="5258330">(</span><span class="op" id="5258331">)</span><br>
<span class="lineno">1505</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258336">//&nbsp;If&nbsp;the&nbsp;next&nbsp;token&nbsp;is&nbsp;token.CHAN&nbsp;we&nbsp;still&nbsp;don&#39;t&nbsp;know&nbsp;if&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258399">//&nbsp;is&nbsp;a&nbsp;channel&nbsp;type&nbsp;or&nbsp;a&nbsp;receive&nbsp;operation&nbsp;-&nbsp;we&nbsp;only&nbsp;know</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258460">//&nbsp;once&nbsp;we&nbsp;have&nbsp;found&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;unary&nbsp;expression.&nbsp;There</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258523">//&nbsp;are&nbsp;two&nbsp;cases:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258543">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258548">//&nbsp;&nbsp;&nbsp;&lt;-&nbsp;type&nbsp;&nbsp;=&gt;&nbsp;(&lt;-type)&nbsp;must&nbsp;be&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258597">//&nbsp;&nbsp;&nbsp;&lt;-&nbsp;expr&nbsp;&nbsp;=&gt;&nbsp;&lt;-(expr)&nbsp;is&nbsp;a&nbsp;receive&nbsp;from&nbsp;an&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258657">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258662">//&nbsp;In&nbsp;the&nbsp;first&nbsp;case,&nbsp;the&nbsp;arrow&nbsp;must&nbsp;be&nbsp;re-associated&nbsp;with</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258723">//&nbsp;the&nbsp;channel&nbsp;type&nbsp;parsed&nbsp;already:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258761">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258766">//&nbsp;&nbsp;&nbsp;&lt;-&nbsp;(chan&nbsp;type)&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;&nbsp;(&lt;-chan&nbsp;type)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258809">//&nbsp;&nbsp;&nbsp;&lt;-&nbsp;(chan&lt;-&nbsp;type)&nbsp;&nbsp;=&gt;&nbsp;&nbsp;(&lt;-chan&nbsp;(&lt;-type))</span><br>
<span class="lineno"></span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5258857">x</span>&nbsp;<span class="op" id="5258859">:=</span>&nbsp;<span class="ident" id="5258862"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5258863">.</span><span class="ident" id="5258864">parseUnaryExpr</span><span class="op" id="5258878">(</span><span class="builtintype" id="5258879">false</span><span class="op" id="5258884">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258889">//&nbsp;determine&nbsp;which&nbsp;case&nbsp;we&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5258923">if</span>&nbsp;<span class="ident" id="5258926">typ</span><span class="op" id="5258929">,</span>&nbsp;<span class="ident" id="5258931">ok</span>&nbsp;<span class="op" id="5258934">:=</span>&nbsp;<span class="ident" id="5258937"><a href="/go/parser/parser.go.html#5258857">x</a></span><span class="op" id="5258938">.</span><span class="op" id="5258939">(</span><span class="op" id="5258940">*</span><span class="ident" id="5258941"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5258944">.</span><span class="ident" id="5258945">ChanType</span><span class="op" id="5258953">)</span><span class="op" id="5258954">;</span>&nbsp;<span class="ident" id="5258956"><a href="/go/parser/parser.go.html#5258931">ok</a></span>&nbsp;<span class="op" id="5258959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258964">//&nbsp;(&lt;-type)</span><br>
<span class="lineno">1525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5258980">//&nbsp;re-associate&nbsp;position&nbsp;info&nbsp;and&nbsp;&lt;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5259020">dir</span>&nbsp;<span class="op" id="5259024">:=</span>&nbsp;<span class="ident" id="5259027"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5259030">.</span><span class="ident" id="5259031">SEND</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5259039">for</span>&nbsp;<span class="ident" id="5259043"><a href="/go/parser/parser.go.html#5258931">ok</a></span>&nbsp;<span class="op" id="5259046">&amp;&amp;</span>&nbsp;<span class="ident" id="5259049"><a href="/go/parser/parser.go.html#5259020">dir</a></span>&nbsp;<span class="op" id="5259053">==</span>&nbsp;<span class="ident" id="5259056"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5259059">.</span><span class="ident" id="5259060">SEND</span>&nbsp;<span class="op" id="5259065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5259071">if</span>&nbsp;<span class="ident" id="5259074"><a href="/go/parser/parser.go.html#5258926">typ</a></span><span class="op" id="5259077">.</span><span class="ident" id="5259078">Dir</span>&nbsp;<span class="op" id="5259082">==</span>&nbsp;<span class="ident" id="5259085"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5259088">.</span><span class="ident" id="5259089">RECV</span>&nbsp;<span class="op" id="5259094">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5259101">//&nbsp;error:&nbsp;(&lt;-type)&nbsp;is&nbsp;(&lt;-(&lt;-chan&nbsp;T))</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5259143"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5259144">.</span><span class="ident" id="5259145">errorExpected</span><span class="op" id="5259158">(</span><span class="ident" id="5259159"><a href="/go/parser/parser.go.html#5258926">typ</a></span><span class="op" id="5259162">.</span><span class="ident" id="5259163">Arrow</span><span class="op" id="5259168">,</span>&nbsp;<span class="string" id="5259170">&#34;&#39;chan&#39;&#34;</span><span class="op" id="5259178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5259184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5259190"><a href="/go/parser/parser.go.html#5258307">arrow</a></span><span class="op" id="5259195">,</span>&nbsp;<span class="ident" id="5259197"><a href="/go/parser/parser.go.html#5258926">typ</a></span><span class="op" id="5259200">.</span><span class="ident" id="5259201">Begin</span><span class="op" id="5259206">,</span>&nbsp;<span class="ident" id="5259208"><a href="/go/parser/parser.go.html#5258926">typ</a></span><span class="op" id="5259211">.</span><span class="ident" id="5259212">Arrow</span>&nbsp;<span class="op" id="5259218">=</span>&nbsp;<span class="ident" id="5259220"><a href="/go/parser/parser.go.html#5258926">typ</a></span><span class="op" id="5259223">.</span><span class="ident" id="5259224">Arrow</span><span class="op" id="5259229">,</span>&nbsp;<span class="ident" id="5259231"><a href="/go/parser/parser.go.html#5258307">arrow</a></span><span class="op" id="5259236">,</span>&nbsp;<span class="ident" id="5259238"><a href="/go/parser/parser.go.html#5258307">arrow</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5259248"><a href="/go/parser/parser.go.html#5259020">dir</a></span><span class="op" id="5259251">,</span>&nbsp;<span class="ident" id="5259253"><a href="/go/parser/parser.go.html#5258926">typ</a></span><span class="op" id="5259256">.</span><span class="ident" id="5259257">Dir</span>&nbsp;<span class="op" id="5259261">=</span>&nbsp;<span class="ident" id="5259263"><a href="/go/parser/parser.go.html#5258926">typ</a></span><span class="op" id="5259266">.</span><span class="ident" id="5259267">Dir</span><span class="op" id="5259270">,</span>&nbsp;<span class="ident" id="5259272"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5259275">.</span><span class="ident" id="5259276">RECV</span><br>
<span class="lineno">1535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5259285"><a href="/go/parser/parser.go.html#5258926">typ</a></span><span class="op" id="5259288">,</span>&nbsp;<span class="ident" id="5259290"><a href="/go/parser/parser.go.html#5258931">ok</a></span>&nbsp;<span class="op" id="5259293">=</span>&nbsp;<span class="ident" id="5259295"><a href="/go/parser/parser.go.html#5258926">typ</a></span><span class="op" id="5259298">.</span><span class="ident" id="5259299">Value</span><span class="op" id="5259304">.</span><span class="op" id="5259305">(</span><span class="op" id="5259306">*</span><span class="ident" id="5259307"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5259310">.</span><span class="ident" id="5259311">ChanType</span><span class="op" id="5259319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5259324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5259329">if</span>&nbsp;<span class="ident" id="5259332"><a href="/go/parser/parser.go.html#5259020">dir</a></span>&nbsp;<span class="op" id="5259336">==</span>&nbsp;<span class="ident" id="5259339"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5259342">.</span><span class="ident" id="5259343">SEND</span>&nbsp;<span class="op" id="5259348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5259354"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5259355">.</span><span class="ident" id="5259356">errorExpected</span><span class="op" id="5259369">(</span><span class="ident" id="5259370"><a href="/go/parser/parser.go.html#5258307">arrow</a></span><span class="op" id="5259375">,</span>&nbsp;<span class="string" id="5259377">&#34;channel&nbsp;type&#34;</span><span class="op" id="5259391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5259396">}</span><br>
<span class="lineno">1540</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5259402">return</span>&nbsp;<span class="ident" id="5259409"><a href="/go/parser/parser.go.html#5258857">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5259413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5259418">//&nbsp;&lt;-(expr)</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5259432">return</span>&nbsp;<span class="op" id="5259439">&amp;</span><span class="ident" id="5259440"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5259443">.</span><span class="ident" id="5259444">UnaryExpr</span><span class="op" id="5259453">{</span><span class="ident" id="5259454">OpPos</span><span class="op" id="5259459">:</span>&nbsp;<span class="ident" id="5259461"><a href="/go/parser/parser.go.html#5258307">arrow</a></span><span class="op" id="5259466">,</span>&nbsp;<span class="ident" id="5259468">Op</span><span class="op" id="5259470">:</span>&nbsp;<span class="ident" id="5259472"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5259477">.</span><span class="ident" id="5259478">ARROW</span><span class="op" id="5259483">,</span>&nbsp;<span class="ident" id="5259485">X</span><span class="op" id="5259486">:</span>&nbsp;<span class="ident" id="5259488"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5259489">.</span><span class="ident" id="5259490">checkExpr</span><span class="op" id="5259499">(</span><span class="ident" id="5259500"><a href="/go/parser/parser.go.html#5258857">x</a></span><span class="op" id="5259501">)</span><span class="op" id="5259502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5259506">case</span>&nbsp;<span class="ident" id="5259511"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5259516">.</span><span class="ident" id="5259517">MUL</span><span class="op" id="5259520">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5259524">//&nbsp;pointer&nbsp;type&nbsp;or&nbsp;unary&nbsp;&#34;*&#34;&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5259566">pos</span>&nbsp;<span class="op" id="5259570">:=</span>&nbsp;<span class="ident" id="5259573"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5259574">.</span><span class="ident" id="5259575">pos</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5259581"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5259582">.</span><span class="ident" id="5259583">next</span><span class="op" id="5259587">(</span><span class="op" id="5259588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5259592">x</span>&nbsp;<span class="op" id="5259594">:=</span>&nbsp;<span class="ident" id="5259597"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5259598">.</span><span class="ident" id="5259599">parseUnaryExpr</span><span class="op" id="5259613">(</span><span class="builtintype" id="5259614">false</span><span class="op" id="5259619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5259623">return</span>&nbsp;<span class="op" id="5259630">&amp;</span><span class="ident" id="5259631"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5259634">.</span><span class="ident" id="5259635">StarExpr</span><span class="op" id="5259643">{</span><span class="ident" id="5259644">Star</span><span class="op" id="5259648">:</span>&nbsp;<span class="ident" id="5259650"><a href="/go/parser/parser.go.html#5259566">pos</a></span><span class="op" id="5259653">,</span>&nbsp;<span class="ident" id="5259655">X</span><span class="op" id="5259656">:</span>&nbsp;<span class="ident" id="5259658"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5259659">.</span><span class="ident" id="5259660">checkExprOrType</span><span class="op" id="5259675">(</span><span class="ident" id="5259676"><a href="/go/parser/parser.go.html#5259592">x</a></span><span class="op" id="5259677">)</span><span class="op" id="5259678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5259681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5259685">return</span>&nbsp;<span class="ident" id="5259692"><a href="/go/parser/parser.go.html#5257938">p</a></span><span class="op" id="5259693">.</span><span class="ident" id="5259694">parsePrimaryExpr</span><span class="op" id="5259710">(</span><span class="ident" id="5259711"><a href="/go/parser/parser.go.html#5257964">lhs</a></span><span class="op" id="5259714">)</span><br>
<span class="lineno"></span><span class="op" id="5259716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5259719">func</span>&nbsp;<span class="op" id="5259724">(</span><span class="ident" id="5259725">p</span>&nbsp;<span class="op" id="5259727">*</span><span class="ident" id="5259728"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5259734">)</span>&nbsp;<span class="ident" id="5259736">tokPrec</span><span class="op" id="5259743">(</span><span class="op" id="5259744">)</span>&nbsp;<span class="op" id="5259746">(</span><span class="ident" id="5259747"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5259752">.</span><span class="ident" id="5259753">Token</span><span class="op" id="5259758">,</span>&nbsp;<span class="builtintype" id="5259760">int</span><span class="op" id="5259763">)</span>&nbsp;<span class="op" id="5259765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5259768">tok</span>&nbsp;<span class="op" id="5259772">:=</span>&nbsp;<span class="ident" id="5259775"><a href="/go/parser/parser.go.html#5259725">p</a></span><span class="op" id="5259776">.</span><span class="ident" id="5259777">tok</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5259782">if</span>&nbsp;<span class="ident" id="5259785"><a href="/go/parser/parser.go.html#5259725">p</a></span><span class="op" id="5259786">.</span><span class="ident" id="5259787">inRhs</span>&nbsp;<span class="op" id="5259793">&amp;&amp;</span>&nbsp;<span class="ident" id="5259796"><a href="/go/parser/parser.go.html#5259768">tok</a></span>&nbsp;<span class="op" id="5259800">==</span>&nbsp;<span class="ident" id="5259803"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5259808">.</span><span class="ident" id="5259809">ASSIGN</span>&nbsp;<span class="op" id="5259816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5259820"><a href="/go/parser/parser.go.html#5259768">tok</a></span>&nbsp;<span class="op" id="5259824">=</span>&nbsp;<span class="ident" id="5259826"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5259831">.</span><span class="ident" id="5259832">EQL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5259837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5259840">return</span>&nbsp;<span class="ident" id="5259847"><a href="/go/parser/parser.go.html#5259768">tok</a></span><span class="op" id="5259850">,</span>&nbsp;<span class="ident" id="5259852"><a href="/go/parser/parser.go.html#5259768">tok</a></span><span class="op" id="5259855">.</span><span class="ident" id="5259856">Precedence</span><span class="op" id="5259866">(</span><span class="op" id="5259867">)</span><br>
<span class="lineno"></span><span class="op" id="5259869">}</span><br>
<span class="lineno">1565</span><br>
<span class="lineno"></span><span class="comment" id="5259872">//&nbsp;If&nbsp;lhs&nbsp;is&nbsp;set&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="5259942">func</span>&nbsp;<span class="op" id="5259947">(</span><span class="ident" id="5259948">p</span>&nbsp;<span class="op" id="5259950">*</span><span class="ident" id="5259951"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5259957">)</span>&nbsp;<span class="ident" id="5259959">parseBinaryExpr</span><span class="op" id="5259974">(</span><span class="ident" id="5259975">lhs</span>&nbsp;<span class="builtintype" id="5259979">bool</span><span class="op" id="5259983">,</span>&nbsp;<span class="ident" id="5259985">prec1</span>&nbsp;<span class="builtintype" id="5259991">int</span><span class="op" id="5259994">)</span>&nbsp;<span class="ident" id="5259996"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5259999">.</span><span class="ident" id="5260000">Expr</span>&nbsp;<span class="op" id="5260005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5260008">if</span>&nbsp;<span class="ident" id="5260011"><a href="/go/parser/parser.go.html#5259948">p</a></span><span class="op" id="5260012">.</span><span class="ident" id="5260013">trace</span>&nbsp;<span class="op" id="5260019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5260023">defer</span>&nbsp;<span class="ident" id="5260029"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5260031">(</span><span class="ident" id="5260032"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5260037">(</span><span class="ident" id="5260038"><a href="/go/parser/parser.go.html#5259948">p</a></span><span class="op" id="5260039">,</span>&nbsp;<span class="string" id="5260041">&#34;BinaryExpr&#34;</span><span class="op" id="5260053">)</span><span class="op" id="5260054">)</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5260057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5260061">x</span>&nbsp;<span class="op" id="5260063">:=</span>&nbsp;<span class="ident" id="5260066"><a href="/go/parser/parser.go.html#5259948">p</a></span><span class="op" id="5260067">.</span><span class="ident" id="5260068">parseUnaryExpr</span><span class="op" id="5260082">(</span><span class="ident" id="5260083"><a href="/go/parser/parser.go.html#5259975">lhs</a></span><span class="op" id="5260086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5260089">for</span>&nbsp;<span class="ident" id="5260093">_</span><span class="op" id="5260094">,</span>&nbsp;<span class="ident" id="5260096">prec</span>&nbsp;<span class="op" id="5260101">:=</span>&nbsp;<span class="ident" id="5260104"><a href="/go/parser/parser.go.html#5259948">p</a></span><span class="op" id="5260105">.</span><span class="ident" id="5260106">tokPrec</span><span class="op" id="5260113">(</span><span class="op" id="5260114">)</span><span class="op" id="5260115">;</span>&nbsp;<span class="ident" id="5260117"><a href="/go/parser/parser.go.html#5260096">prec</a></span>&nbsp;<span class="op" id="5260122">&gt;=</span>&nbsp;<span class="ident" id="5260125"><a href="/go/parser/parser.go.html#5259985">prec1</a></span><span class="op" id="5260130">;</span>&nbsp;<span class="ident" id="5260132"><a href="/go/parser/parser.go.html#5260096">prec</a></span><span class="op" id="5260136">--</span>&nbsp;<span class="op" id="5260139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5260143">for</span>&nbsp;<span class="op" id="5260147">{</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5260152">op</span><span class="op" id="5260154">,</span>&nbsp;<span class="ident" id="5260156">oprec</span>&nbsp;<span class="op" id="5260162">:=</span>&nbsp;<span class="ident" id="5260165"><a href="/go/parser/parser.go.html#5259948">p</a></span><span class="op" id="5260166">.</span><span class="ident" id="5260167">tokPrec</span><span class="op" id="5260174">(</span><span class="op" id="5260175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5260180">if</span>&nbsp;<span class="ident" id="5260183"><a href="/go/parser/parser.go.html#5260156">oprec</a></span>&nbsp;<span class="op" id="5260189">!=</span>&nbsp;<span class="ident" id="5260192"><a href="/go/parser/parser.go.html#5260096">prec</a></span>&nbsp;<span class="op" id="5260197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5260203">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5260212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5260217">pos</span>&nbsp;<span class="op" id="5260221">:=</span>&nbsp;<span class="ident" id="5260224"><a href="/go/parser/parser.go.html#5259948">p</a></span><span class="op" id="5260225">.</span><span class="ident" id="5260226">expect</span><span class="op" id="5260232">(</span><span class="ident" id="5260233"><a href="/go/parser/parser.go.html#5260152">op</a></span><span class="op" id="5260235">)</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5260240">if</span>&nbsp;<span class="ident" id="5260243"><a href="/go/parser/parser.go.html#5259975">lhs</a></span>&nbsp;<span class="op" id="5260247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5260253"><a href="/go/parser/parser.go.html#5259948">p</a></span><span class="op" id="5260254">.</span><span class="ident" id="5260255">resolve</span><span class="op" id="5260262">(</span><span class="ident" id="5260263"><a href="/go/parser/parser.go.html#5260061">x</a></span><span class="op" id="5260264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5260270"><a href="/go/parser/parser.go.html#5259975">lhs</a></span>&nbsp;<span class="op" id="5260274">=</span>&nbsp;<span class="builtintype" id="5260276">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5260285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5260290">y</span>&nbsp;<span class="op" id="5260292">:=</span>&nbsp;<span class="ident" id="5260295"><a href="/go/parser/parser.go.html#5259948">p</a></span><span class="op" id="5260296">.</span><span class="ident" id="5260297">parseBinaryExpr</span><span class="op" id="5260312">(</span><span class="builtintype" id="5260313">false</span><span class="op" id="5260318">,</span>&nbsp;<span class="ident" id="5260320"><a href="/go/parser/parser.go.html#5260096">prec</a></span><span class="op" id="5260324">+</span><span class="num" id="5260325">1</span><span class="op" id="5260326">)</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5260331"><a href="/go/parser/parser.go.html#5260061">x</a></span>&nbsp;<span class="op" id="5260333">=</span>&nbsp;<span class="op" id="5260335">&amp;</span><span class="ident" id="5260336"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5260339">.</span><span class="ident" id="5260340">BinaryExpr</span><span class="op" id="5260350">{</span><span class="ident" id="5260351">X</span><span class="op" id="5260352">:</span>&nbsp;<span class="ident" id="5260354"><a href="/go/parser/parser.go.html#5259948">p</a></span><span class="op" id="5260355">.</span><span class="ident" id="5260356">checkExpr</span><span class="op" id="5260365">(</span><span class="ident" id="5260366"><a href="/go/parser/parser.go.html#5260061">x</a></span><span class="op" id="5260367">)</span><span class="op" id="5260368">,</span>&nbsp;<span class="ident" id="5260370">OpPos</span><span class="op" id="5260375">:</span>&nbsp;<span class="ident" id="5260377"><a href="/go/parser/parser.go.html#5260217">pos</a></span><span class="op" id="5260380">,</span>&nbsp;<span class="ident" id="5260382">Op</span><span class="op" id="5260384">:</span>&nbsp;<span class="ident" id="5260386"><a href="/go/parser/parser.go.html#5260152">op</a></span><span class="op" id="5260388">,</span>&nbsp;<span class="ident" id="5260390">Y</span><span class="op" id="5260391">:</span>&nbsp;<span class="ident" id="5260393"><a href="/go/parser/parser.go.html#5259948">p</a></span><span class="op" id="5260394">.</span><span class="ident" id="5260395">checkExpr</span><span class="op" id="5260404">(</span><span class="ident" id="5260405"><a href="/go/parser/parser.go.html#5260290">y</a></span><span class="op" id="5260406">)</span><span class="op" id="5260407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5260411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5260414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5260418">return</span>&nbsp;<span class="ident" id="5260425"><a href="/go/parser/parser.go.html#5260061">x</a></span><br>
<span class="lineno">1590</span><span class="op" id="5260427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5260430">//&nbsp;If&nbsp;lhs&nbsp;is&nbsp;set&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="comment" id="5260500">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;a&nbsp;type&nbsp;or&nbsp;even&nbsp;a&nbsp;raw&nbsp;type&nbsp;([...]int).&nbsp;Callers&nbsp;must</span><br>
<span class="lineno"></span><span class="comment" id="5260572">//&nbsp;check&nbsp;the&nbsp;result&nbsp;(using&nbsp;checkExpr&nbsp;or&nbsp;checkExprOrType),&nbsp;depending&nbsp;on</span><br>
<span class="lineno">1595</span><span class="comment" id="5260643">//&nbsp;context.</span><br>
<span class="lineno"></span><span class="keyword" id="5260655">func</span>&nbsp;<span class="op" id="5260660">(</span><span class="ident" id="5260661">p</span>&nbsp;<span class="op" id="5260663">*</span><span class="ident" id="5260664"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5260670">)</span>&nbsp;<span class="ident" id="5260672">parseExpr</span><span class="op" id="5260681">(</span><span class="ident" id="5260682">lhs</span>&nbsp;<span class="builtintype" id="5260686">bool</span><span class="op" id="5260690">)</span>&nbsp;<span class="ident" id="5260692"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5260695">.</span><span class="ident" id="5260696">Expr</span>&nbsp;<span class="op" id="5260701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5260704">if</span>&nbsp;<span class="ident" id="5260707"><a href="/go/parser/parser.go.html#5260661">p</a></span><span class="op" id="5260708">.</span><span class="ident" id="5260709">trace</span>&nbsp;<span class="op" id="5260715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5260719">defer</span>&nbsp;<span class="ident" id="5260725"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5260727">(</span><span class="ident" id="5260728"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5260733">(</span><span class="ident" id="5260734"><a href="/go/parser/parser.go.html#5260661">p</a></span><span class="op" id="5260735">,</span>&nbsp;<span class="string" id="5260737">&#34;Expression&#34;</span><span class="op" id="5260749">)</span><span class="op" id="5260750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5260753">}</span><br>
<span class="lineno">1600</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5260757">return</span>&nbsp;<span class="ident" id="5260764"><a href="/go/parser/parser.go.html#5260661">p</a></span><span class="op" id="5260765">.</span><span class="ident" id="5260766">parseBinaryExpr</span><span class="op" id="5260781">(</span><span class="ident" id="5260782"><a href="/go/parser/parser.go.html#5260682">lhs</a></span><span class="op" id="5260785">,</span>&nbsp;<span class="ident" id="5260787"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5260792">.</span><span class="ident" id="5260793">LowestPrec</span><span class="op" id="5260803">+</span><span class="num" id="5260804">1</span><span class="op" id="5260805">)</span><br>
<span class="lineno"></span><span class="op" id="5260807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5260810">func</span>&nbsp;<span class="op" id="5260815">(</span><span class="ident" id="5260816">p</span>&nbsp;<span class="op" id="5260818">*</span><span class="ident" id="5260819"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5260825">)</span>&nbsp;<span class="ident" id="5260827">parseRhs</span><span class="op" id="5260835">(</span><span class="op" id="5260836">)</span>&nbsp;<span class="ident" id="5260838"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5260841">.</span><span class="ident" id="5260842">Expr</span>&nbsp;<span class="op" id="5260847">{</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5260850">old</span>&nbsp;<span class="op" id="5260854">:=</span>&nbsp;<span class="ident" id="5260857"><a href="/go/parser/parser.go.html#5260816">p</a></span><span class="op" id="5260858">.</span><span class="ident" id="5260859">inRhs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5260866"><a href="/go/parser/parser.go.html#5260816">p</a></span><span class="op" id="5260867">.</span><span class="ident" id="5260868">inRhs</span>&nbsp;<span class="op" id="5260874">=</span>&nbsp;<span class="builtintype" id="5260876">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5260882">x</span>&nbsp;<span class="op" id="5260884">:=</span>&nbsp;<span class="ident" id="5260887"><a href="/go/parser/parser.go.html#5260816">p</a></span><span class="op" id="5260888">.</span><span class="ident" id="5260889">checkExpr</span><span class="op" id="5260898">(</span><span class="ident" id="5260899"><a href="/go/parser/parser.go.html#5260816">p</a></span><span class="op" id="5260900">.</span><span class="ident" id="5260901">parseExpr</span><span class="op" id="5260910">(</span><span class="builtintype" id="5260911">false</span><span class="op" id="5260916">)</span><span class="op" id="5260917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5260920"><a href="/go/parser/parser.go.html#5260816">p</a></span><span class="op" id="5260921">.</span><span class="ident" id="5260922">inRhs</span>&nbsp;<span class="op" id="5260928">=</span>&nbsp;<span class="ident" id="5260930"><a href="/go/parser/parser.go.html#5260850">old</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5260935">return</span>&nbsp;<span class="ident" id="5260942"><a href="/go/parser/parser.go.html#5260882">x</a></span><br>
<span class="lineno">1610</span><span class="op" id="5260944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5260947">func</span>&nbsp;<span class="op" id="5260952">(</span><span class="ident" id="5260953">p</span>&nbsp;<span class="op" id="5260955">*</span><span class="ident" id="5260956"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5260962">)</span>&nbsp;<span class="ident" id="5260964">parseRhsOrType</span><span class="op" id="5260978">(</span><span class="op" id="5260979">)</span>&nbsp;<span class="ident" id="5260981"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5260984">.</span><span class="ident" id="5260985">Expr</span>&nbsp;<span class="op" id="5260990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5260993">old</span>&nbsp;<span class="op" id="5260997">:=</span>&nbsp;<span class="ident" id="5261000"><a href="/go/parser/parser.go.html#5260953">p</a></span><span class="op" id="5261001">.</span><span class="ident" id="5261002">inRhs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5261009"><a href="/go/parser/parser.go.html#5260953">p</a></span><span class="op" id="5261010">.</span><span class="ident" id="5261011">inRhs</span>&nbsp;<span class="op" id="5261017">=</span>&nbsp;<span class="builtintype" id="5261019">true</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5261025">x</span>&nbsp;<span class="op" id="5261027">:=</span>&nbsp;<span class="ident" id="5261030"><a href="/go/parser/parser.go.html#5260953">p</a></span><span class="op" id="5261031">.</span><span class="ident" id="5261032">checkExprOrType</span><span class="op" id="5261047">(</span><span class="ident" id="5261048"><a href="/go/parser/parser.go.html#5260953">p</a></span><span class="op" id="5261049">.</span><span class="ident" id="5261050">parseExpr</span><span class="op" id="5261059">(</span><span class="builtintype" id="5261060">false</span><span class="op" id="5261065">)</span><span class="op" id="5261066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5261069"><a href="/go/parser/parser.go.html#5260953">p</a></span><span class="op" id="5261070">.</span><span class="ident" id="5261071">inRhs</span>&nbsp;<span class="op" id="5261077">=</span>&nbsp;<span class="ident" id="5261079"><a href="/go/parser/parser.go.html#5260993">old</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5261084">return</span>&nbsp;<span class="ident" id="5261091"><a href="/go/parser/parser.go.html#5261025">x</a></span><br>
<span class="lineno"></span><span class="op" id="5261093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1620</span><span class="comment" id="5261096">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5261176">//&nbsp;Statements</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5261191">//&nbsp;Parsing&nbsp;modes&nbsp;for&nbsp;parseSimpleStmt.</span><br>
<span class="lineno"></span><span class="keyword" id="5261229">const</span>&nbsp;<span class="op" id="5261235">(</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5261238">basic</span>&nbsp;<span class="op" id="5261244">=</span>&nbsp;<span class="ident" id="5261246">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5261252">labelOk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5261261">rangeOk</span><br>
<span class="lineno"></span><span class="op" id="5261269">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1630</span><span class="comment" id="5261272">//&nbsp;parseSimpleStmt&nbsp;returns&nbsp;true&nbsp;as&nbsp;2nd&nbsp;result&nbsp;if&nbsp;it&nbsp;parsed&nbsp;the&nbsp;assignment</span><br>
<span class="lineno"></span><span class="comment" id="5261346">//&nbsp;of&nbsp;a&nbsp;range&nbsp;clause&nbsp;(with&nbsp;mode&nbsp;==&nbsp;rangeOk).&nbsp;The&nbsp;returned&nbsp;statement&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="5261420">//&nbsp;assignment&nbsp;with&nbsp;a&nbsp;right-hand&nbsp;side&nbsp;that&nbsp;is&nbsp;a&nbsp;single&nbsp;unary&nbsp;expression&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5261494">//&nbsp;the&nbsp;form&nbsp;&#34;range&nbsp;x&#34;.&nbsp;No&nbsp;guarantees&nbsp;are&nbsp;given&nbsp;for&nbsp;the&nbsp;left-hand&nbsp;side.</span><br>
<span class="lineno"></span><span class="keyword" id="5261565">func</span>&nbsp;<span class="op" id="5261570">(</span><span class="ident" id="5261571">p</span>&nbsp;<span class="op" id="5261573">*</span><span class="ident" id="5261574"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5261580">)</span>&nbsp;<span class="ident" id="5261582">parseSimpleStmt</span><span class="op" id="5261597">(</span><span class="ident" id="5261598">mode</span>&nbsp;<span class="builtintype" id="5261603">int</span><span class="op" id="5261606">)</span>&nbsp;<span class="op" id="5261608">(</span><span class="ident" id="5261609"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5261612">.</span><span class="ident" id="5261613">Stmt</span><span class="op" id="5261617">,</span>&nbsp;<span class="builtintype" id="5261619">bool</span><span class="op" id="5261623">)</span>&nbsp;<span class="op" id="5261625">{</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5261628">if</span>&nbsp;<span class="ident" id="5261631"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5261632">.</span><span class="ident" id="5261633">trace</span>&nbsp;<span class="op" id="5261639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5261643">defer</span>&nbsp;<span class="ident" id="5261649"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5261651">(</span><span class="ident" id="5261652"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5261657">(</span><span class="ident" id="5261658"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5261659">,</span>&nbsp;<span class="string" id="5261661">&#34;SimpleStmt&#34;</span><span class="op" id="5261673">)</span><span class="op" id="5261674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5261677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5261681">x</span>&nbsp;<span class="op" id="5261683">:=</span>&nbsp;<span class="ident" id="5261686"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5261687">.</span><span class="ident" id="5261688">parseLhsList</span><span class="op" id="5261700">(</span><span class="op" id="5261701">)</span><br>
<span class="lineno">1640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5261705">switch</span>&nbsp;<span class="ident" id="5261712"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5261713">.</span><span class="ident" id="5261714">tok</span>&nbsp;<span class="op" id="5261718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5261721">case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5261728"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261733">.</span><span class="ident" id="5261734">DEFINE</span><span class="op" id="5261740">,</span>&nbsp;<span class="ident" id="5261742"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261747">.</span><span class="ident" id="5261748">ASSIGN</span><span class="op" id="5261754">,</span>&nbsp;<span class="ident" id="5261756"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261761">.</span><span class="ident" id="5261762">ADD_ASSIGN</span><span class="op" id="5261772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5261776"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261781">.</span><span class="ident" id="5261782">SUB_ASSIGN</span><span class="op" id="5261792">,</span>&nbsp;<span class="ident" id="5261794"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261799">.</span><span class="ident" id="5261800">MUL_ASSIGN</span><span class="op" id="5261810">,</span>&nbsp;<span class="ident" id="5261812"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261817">.</span><span class="ident" id="5261818">QUO_ASSIGN</span><span class="op" id="5261828">,</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5261832"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261837">.</span><span class="ident" id="5261838">REM_ASSIGN</span><span class="op" id="5261848">,</span>&nbsp;<span class="ident" id="5261850"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261855">.</span><span class="ident" id="5261856">AND_ASSIGN</span><span class="op" id="5261866">,</span>&nbsp;<span class="ident" id="5261868"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261873">.</span><span class="ident" id="5261874">OR_ASSIGN</span><span class="op" id="5261883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5261887"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261892">.</span><span class="ident" id="5261893">XOR_ASSIGN</span><span class="op" id="5261903">,</span>&nbsp;<span class="ident" id="5261905"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261910">.</span><span class="ident" id="5261911">SHL_ASSIGN</span><span class="op" id="5261921">,</span>&nbsp;<span class="ident" id="5261923"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261928">.</span><span class="ident" id="5261929">SHR_ASSIGN</span><span class="op" id="5261939">,</span>&nbsp;<span class="ident" id="5261941"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5261946">.</span><span class="ident" id="5261947">AND_NOT_ASSIGN</span><span class="op" id="5261961">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5261965">//&nbsp;assignment&nbsp;statement,&nbsp;possibly&nbsp;part&nbsp;of&nbsp;a&nbsp;range&nbsp;clause</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262024">pos</span><span class="op" id="5262027">,</span>&nbsp;<span class="ident" id="5262029">tok</span>&nbsp;<span class="op" id="5262033">:=</span>&nbsp;<span class="ident" id="5262036"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262037">.</span><span class="ident" id="5262038">pos</span><span class="op" id="5262041">,</span>&nbsp;<span class="ident" id="5262043"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262044">.</span><span class="ident" id="5262045">tok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262051"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262052">.</span><span class="ident" id="5262053">next</span><span class="op" id="5262057">(</span><span class="op" id="5262058">)</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5262062">var</span>&nbsp;<span class="ident" id="5262066">y</span>&nbsp;<span class="op" id="5262068">[</span><span class="op" id="5262069">]</span><span class="ident" id="5262070"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5262073">.</span><span class="ident" id="5262074">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262081">isRange</span>&nbsp;<span class="op" id="5262089">:=</span>&nbsp;<span class="builtintype" id="5262092">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5262100">if</span>&nbsp;<span class="ident" id="5262103"><a href="/go/parser/parser.go.html#5261598">mode</a></span>&nbsp;<span class="op" id="5262108">==</span>&nbsp;<span class="ident" id="5262111"><a href="/go/parser/parser.go.html#5261261">rangeOk</a></span>&nbsp;<span class="op" id="5262119">&amp;&amp;</span>&nbsp;<span class="ident" id="5262122"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262123">.</span><span class="ident" id="5262124">tok</span>&nbsp;<span class="op" id="5262128">==</span>&nbsp;<span class="ident" id="5262131"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5262136">.</span><span class="ident" id="5262137">RANGE</span>&nbsp;<span class="op" id="5262143">&amp;&amp;</span>&nbsp;<span class="op" id="5262146">(</span><span class="ident" id="5262147"><a href="/go/parser/parser.go.html#5262029">tok</a></span>&nbsp;<span class="op" id="5262151">==</span>&nbsp;<span class="ident" id="5262154"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5262159">.</span><span class="ident" id="5262160">DEFINE</span>&nbsp;<span class="op" id="5262167">||</span>&nbsp;<span class="ident" id="5262170"><a href="/go/parser/parser.go.html#5262029">tok</a></span>&nbsp;<span class="op" id="5262174">==</span>&nbsp;<span class="ident" id="5262177"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5262182">.</span><span class="ident" id="5262183">ASSIGN</span><span class="op" id="5262189">)</span>&nbsp;<span class="op" id="5262191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262196">pos</span>&nbsp;<span class="op" id="5262200">:=</span>&nbsp;<span class="ident" id="5262203"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262204">.</span><span class="ident" id="5262205">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262212"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262213">.</span><span class="ident" id="5262214">next</span><span class="op" id="5262218">(</span><span class="op" id="5262219">)</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262224"><a href="/go/parser/parser.go.html#5262066">y</a></span>&nbsp;<span class="op" id="5262226">=</span>&nbsp;<span class="op" id="5262228">[</span><span class="op" id="5262229">]</span><span class="ident" id="5262230"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5262233">.</span><span class="ident" id="5262234">Expr</span><span class="op" id="5262238">{</span><span class="op" id="5262239">&amp;</span><span class="ident" id="5262240"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5262243">.</span><span class="ident" id="5262244">UnaryExpr</span><span class="op" id="5262253">{</span><span class="ident" id="5262254">OpPos</span><span class="op" id="5262259">:</span>&nbsp;<span class="ident" id="5262261"><a href="/go/parser/parser.go.html#5262196">pos</a></span><span class="op" id="5262264">,</span>&nbsp;<span class="ident" id="5262266">Op</span><span class="op" id="5262268">:</span>&nbsp;<span class="ident" id="5262270"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5262275">.</span><span class="ident" id="5262276">RANGE</span><span class="op" id="5262281">,</span>&nbsp;<span class="ident" id="5262283">X</span><span class="op" id="5262284">:</span>&nbsp;<span class="ident" id="5262286"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262287">.</span><span class="ident" id="5262288">parseRhs</span><span class="op" id="5262296">(</span><span class="op" id="5262297">)</span><span class="op" id="5262298">}</span><span class="op" id="5262299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262304"><a href="/go/parser/parser.go.html#5262081">isRange</a></span>&nbsp;<span class="op" id="5262312">=</span>&nbsp;<span class="builtintype" id="5262314">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5262321">}</span>&nbsp;<span class="keyword" id="5262323">else</span>&nbsp;<span class="op" id="5262328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262333"><a href="/go/parser/parser.go.html#5262066">y</a></span>&nbsp;<span class="op" id="5262335">=</span>&nbsp;<span class="ident" id="5262337"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262338">.</span><span class="ident" id="5262339">parseRhsList</span><span class="op" id="5262351">(</span><span class="op" id="5262352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5262356">}</span><br>
<span class="lineno">1660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262360">as</span>&nbsp;<span class="op" id="5262363">:=</span>&nbsp;<span class="op" id="5262366">&amp;</span><span class="ident" id="5262367"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5262370">.</span><span class="ident" id="5262371">AssignStmt</span><span class="op" id="5262381">{</span><span class="ident" id="5262382">Lhs</span><span class="op" id="5262385">:</span>&nbsp;<span class="ident" id="5262387"><a href="/go/parser/parser.go.html#5261681">x</a></span><span class="op" id="5262388">,</span>&nbsp;<span class="ident" id="5262390">TokPos</span><span class="op" id="5262396">:</span>&nbsp;<span class="ident" id="5262398"><a href="/go/parser/parser.go.html#5262024">pos</a></span><span class="op" id="5262401">,</span>&nbsp;<span class="ident" id="5262403">Tok</span><span class="op" id="5262406">:</span>&nbsp;<span class="ident" id="5262408"><a href="/go/parser/parser.go.html#5262029">tok</a></span><span class="op" id="5262411">,</span>&nbsp;<span class="ident" id="5262413">Rhs</span><span class="op" id="5262416">:</span>&nbsp;<span class="ident" id="5262418"><a href="/go/parser/parser.go.html#5262066">y</a></span><span class="op" id="5262419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5262423">if</span>&nbsp;<span class="ident" id="5262426"><a href="/go/parser/parser.go.html#5262029">tok</a></span>&nbsp;<span class="op" id="5262430">==</span>&nbsp;<span class="ident" id="5262433"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5262438">.</span><span class="ident" id="5262439">DEFINE</span>&nbsp;<span class="op" id="5262446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262451"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262452">.</span><span class="ident" id="5262453">shortVarDecl</span><span class="op" id="5262465">(</span><span class="ident" id="5262466"><a href="/go/parser/parser.go.html#5262360">as</a></span><span class="op" id="5262468">,</span>&nbsp;<span class="ident" id="5262470"><a href="/go/parser/parser.go.html#5261681">x</a></span><span class="op" id="5262471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5262475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5262479">return</span>&nbsp;<span class="ident" id="5262486"><a href="/go/parser/parser.go.html#5262360">as</a></span><span class="op" id="5262488">,</span>&nbsp;<span class="ident" id="5262490"><a href="/go/parser/parser.go.html#5262081">isRange</a></span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5262499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5262503">if</span>&nbsp;<span class="builtinfunc" id="5262506">len</span><span class="op" id="5262509">(</span><span class="ident" id="5262510"><a href="/go/parser/parser.go.html#5261681">x</a></span><span class="op" id="5262511">)</span>&nbsp;<span class="op" id="5262513">&gt;</span>&nbsp;<span class="num" id="5262515">1</span>&nbsp;<span class="op" id="5262517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262521"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262522">.</span><span class="ident" id="5262523">errorExpected</span><span class="op" id="5262536">(</span><span class="ident" id="5262537"><a href="/go/parser/parser.go.html#5261681">x</a></span><span class="op" id="5262538">[</span><span class="num" id="5262539">0</span><span class="op" id="5262540">]</span><span class="op" id="5262541">.</span><span class="ident" id="5262542">Pos</span><span class="op" id="5262545">(</span><span class="op" id="5262546">)</span><span class="op" id="5262547">,</span>&nbsp;<span class="string" id="5262549">&#34;1&nbsp;expression&#34;</span><span class="op" id="5262563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5262567">//&nbsp;continue&nbsp;with&nbsp;first&nbsp;expression</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5262602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5262606">switch</span>&nbsp;<span class="ident" id="5262613"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262614">.</span><span class="ident" id="5262615">tok</span>&nbsp;<span class="op" id="5262619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5262622">case</span>&nbsp;<span class="ident" id="5262627"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5262632">.</span><span class="ident" id="5262633">COLON</span><span class="op" id="5262638">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5262642">//&nbsp;labeled&nbsp;statement</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262665">colon</span>&nbsp;<span class="op" id="5262671">:=</span>&nbsp;<span class="ident" id="5262674"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262675">.</span><span class="ident" id="5262676">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262682"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262683">.</span><span class="ident" id="5262684">next</span><span class="op" id="5262688">(</span><span class="op" id="5262689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5262693">if</span>&nbsp;<span class="ident" id="5262696">label</span><span class="op" id="5262701">,</span>&nbsp;<span class="ident" id="5262703">isIdent</span>&nbsp;<span class="op" id="5262711">:=</span>&nbsp;<span class="ident" id="5262714"><a href="/go/parser/parser.go.html#5261681">x</a></span><span class="op" id="5262715">[</span><span class="num" id="5262716">0</span><span class="op" id="5262717">]</span><span class="op" id="5262718">.</span><span class="op" id="5262719">(</span><span class="op" id="5262720">*</span><span class="ident" id="5262721"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5262724">.</span><span class="ident" id="5262725">Ident</span><span class="op" id="5262730">)</span><span class="op" id="5262731">;</span>&nbsp;<span class="ident" id="5262733"><a href="/go/parser/parser.go.html#5261598">mode</a></span>&nbsp;<span class="op" id="5262738">==</span>&nbsp;<span class="ident" id="5262741"><a href="/go/parser/parser.go.html#5261252">labelOk</a></span>&nbsp;<span class="op" id="5262749">&amp;&amp;</span>&nbsp;<span class="ident" id="5262752"><a href="/go/parser/parser.go.html#5262703">isIdent</a></span>&nbsp;<span class="op" id="5262760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5262765">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;scope&nbsp;of&nbsp;a&nbsp;label&nbsp;is&nbsp;the&nbsp;body&nbsp;of&nbsp;the&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5262829">//&nbsp;in&nbsp;which&nbsp;it&nbsp;is&nbsp;declared&nbsp;and&nbsp;excludes&nbsp;the&nbsp;body&nbsp;of&nbsp;any&nbsp;nested</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5262895">//&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262911">stmt</span>&nbsp;<span class="op" id="5262916">:=</span>&nbsp;<span class="op" id="5262919">&amp;</span><span class="ident" id="5262920"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5262923">.</span><span class="ident" id="5262924">LabeledStmt</span><span class="op" id="5262935">{</span><span class="ident" id="5262936">Label</span><span class="op" id="5262941">:</span>&nbsp;<span class="ident" id="5262943"><a href="/go/parser/parser.go.html#5262696">label</a></span><span class="op" id="5262948">,</span>&nbsp;<span class="ident" id="5262950">Colon</span><span class="op" id="5262955">:</span>&nbsp;<span class="ident" id="5262957"><a href="/go/parser/parser.go.html#5262665">colon</a></span><span class="op" id="5262962">,</span>&nbsp;<span class="ident" id="5262964">Stmt</span><span class="op" id="5262968">:</span>&nbsp;<span class="ident" id="5262970"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262971">.</span><span class="ident" id="5262972">parseStmt</span><span class="op" id="5262981">(</span><span class="op" id="5262982">)</span><span class="op" id="5262983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5262988"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5262989">.</span><span class="ident" id="5262990">declare</span><span class="op" id="5262997">(</span><span class="ident" id="5262998"><a href="/go/parser/parser.go.html#5262911">stmt</a></span><span class="op" id="5263002">,</span>&nbsp;<span class="ident" id="5263004">nil</span><span class="op" id="5263007">,</span>&nbsp;<span class="ident" id="5263009"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5263010">.</span><span class="ident" id="5263011">labelScope</span><span class="op" id="5263021">,</span>&nbsp;<span class="ident" id="5263023"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5263026">.</span><span class="ident" id="5263027">Lbl</span><span class="op" id="5263030">,</span>&nbsp;<span class="ident" id="5263032"><a href="/go/parser/parser.go.html#5262696">label</a></span><span class="op" id="5263037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5263042">return</span>&nbsp;<span class="ident" id="5263049"><a href="/go/parser/parser.go.html#5262911">stmt</a></span><span class="op" id="5263053">,</span>&nbsp;<span class="builtintype" id="5263055">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5263063">}</span><br>
<span class="lineno">1685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5263067">//&nbsp;The&nbsp;label&nbsp;declaration&nbsp;typically&nbsp;starts&nbsp;at&nbsp;x[0].Pos(),&nbsp;but&nbsp;the&nbsp;label</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5263140">//&nbsp;declaration&nbsp;may&nbsp;be&nbsp;erroneous&nbsp;due&nbsp;to&nbsp;a&nbsp;token&nbsp;after&nbsp;that&nbsp;position&nbsp;(and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5263214">//&nbsp;before&nbsp;the&nbsp;&#39;:&#39;).&nbsp;If&nbsp;SpuriousErrors&nbsp;is&nbsp;not&nbsp;set,&nbsp;the&nbsp;(only)&nbsp;error&nbsp;re-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5263287">//&nbsp;ported&nbsp;for&nbsp;the&nbsp;line&nbsp;is&nbsp;the&nbsp;illegal&nbsp;label&nbsp;error&nbsp;instead&nbsp;of&nbsp;the&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5263360">//&nbsp;before&nbsp;the&nbsp;&#39;:&#39;&nbsp;that&nbsp;caused&nbsp;the&nbsp;problem.&nbsp;Thus,&nbsp;use&nbsp;the&nbsp;(latest)&nbsp;colon</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5263434">//&nbsp;position&nbsp;for&nbsp;error&nbsp;reporting.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5263469"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5263470">.</span><span class="builtintype" id="5263471">error</span><span class="op" id="5263476">(</span><span class="ident" id="5263477"><a href="/go/parser/parser.go.html#5262665">colon</a></span><span class="op" id="5263482">,</span>&nbsp;<span class="string" id="5263484">&#34;illegal&nbsp;label&nbsp;declaration&#34;</span><span class="op" id="5263511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5263515">return</span>&nbsp;<span class="op" id="5263522">&amp;</span><span class="ident" id="5263523"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5263526">.</span><span class="ident" id="5263527">BadStmt</span><span class="op" id="5263534">{</span><span class="ident" id="5263535">From</span><span class="op" id="5263539">:</span>&nbsp;<span class="ident" id="5263541"><a href="/go/parser/parser.go.html#5261681">x</a></span><span class="op" id="5263542">[</span><span class="num" id="5263543">0</span><span class="op" id="5263544">]</span><span class="op" id="5263545">.</span><span class="ident" id="5263546">Pos</span><span class="op" id="5263549">(</span><span class="op" id="5263550">)</span><span class="op" id="5263551">,</span>&nbsp;<span class="ident" id="5263553">To</span><span class="op" id="5263555">:</span>&nbsp;<span class="ident" id="5263557"><a href="/go/parser/parser.go.html#5262665">colon</a></span>&nbsp;<span class="op" id="5263563">+</span>&nbsp;<span class="num" id="5263565">1</span><span class="op" id="5263566">}</span><span class="op" id="5263567">,</span>&nbsp;<span class="builtintype" id="5263569">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5263577">case</span>&nbsp;<span class="ident" id="5263582"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5263587">.</span><span class="ident" id="5263588">ARROW</span><span class="op" id="5263593">:</span><br>
<span class="lineno">1695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5263597">//&nbsp;send&nbsp;statement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5263617">arrow</span>&nbsp;<span class="op" id="5263623">:=</span>&nbsp;<span class="ident" id="5263626"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5263627">.</span><span class="ident" id="5263628">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5263634"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5263635">.</span><span class="ident" id="5263636">next</span><span class="op" id="5263640">(</span><span class="op" id="5263641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5263645">y</span>&nbsp;<span class="op" id="5263647">:=</span>&nbsp;<span class="ident" id="5263650"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5263651">.</span><span class="ident" id="5263652">parseRhs</span><span class="op" id="5263660">(</span><span class="op" id="5263661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5263665">return</span>&nbsp;<span class="op" id="5263672">&amp;</span><span class="ident" id="5263673"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5263676">.</span><span class="ident" id="5263677">SendStmt</span><span class="op" id="5263685">{</span><span class="ident" id="5263686">Chan</span><span class="op" id="5263690">:</span>&nbsp;<span class="ident" id="5263692"><a href="/go/parser/parser.go.html#5261681">x</a></span><span class="op" id="5263693">[</span><span class="num" id="5263694">0</span><span class="op" id="5263695">]</span><span class="op" id="5263696">,</span>&nbsp;<span class="ident" id="5263698">Arrow</span><span class="op" id="5263703">:</span>&nbsp;<span class="ident" id="5263705"><a href="/go/parser/parser.go.html#5263617">arrow</a></span><span class="op" id="5263710">,</span>&nbsp;<span class="ident" id="5263712">Value</span><span class="op" id="5263717">:</span>&nbsp;<span class="ident" id="5263719"><a href="/go/parser/parser.go.html#5263645">y</a></span><span class="op" id="5263720">}</span><span class="op" id="5263721">,</span>&nbsp;<span class="builtintype" id="5263723">false</span><br>
<span class="lineno">1700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5263731">case</span>&nbsp;<span class="ident" id="5263736"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5263741">.</span><span class="ident" id="5263742">INC</span><span class="op" id="5263745">,</span>&nbsp;<span class="ident" id="5263747"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5263752">.</span><span class="ident" id="5263753">DEC</span><span class="op" id="5263756">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5263760">//&nbsp;increment&nbsp;or&nbsp;decrement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5263788">s</span>&nbsp;<span class="op" id="5263790">:=</span>&nbsp;<span class="op" id="5263793">&amp;</span><span class="ident" id="5263794"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5263797">.</span><span class="ident" id="5263798">IncDecStmt</span><span class="op" id="5263808">{</span><span class="ident" id="5263809">X</span><span class="op" id="5263810">:</span>&nbsp;<span class="ident" id="5263812"><a href="/go/parser/parser.go.html#5261681">x</a></span><span class="op" id="5263813">[</span><span class="num" id="5263814">0</span><span class="op" id="5263815">]</span><span class="op" id="5263816">,</span>&nbsp;<span class="ident" id="5263818">TokPos</span><span class="op" id="5263824">:</span>&nbsp;<span class="ident" id="5263826"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5263827">.</span><span class="ident" id="5263828">pos</span><span class="op" id="5263831">,</span>&nbsp;<span class="ident" id="5263833">Tok</span><span class="op" id="5263836">:</span>&nbsp;<span class="ident" id="5263838"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5263839">.</span><span class="ident" id="5263840">tok</span><span class="op" id="5263843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5263847"><a href="/go/parser/parser.go.html#5261571">p</a></span><span class="op" id="5263848">.</span><span class="ident" id="5263849">next</span><span class="op" id="5263853">(</span><span class="op" id="5263854">)</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5263858">return</span>&nbsp;<span class="ident" id="5263865"><a href="/go/parser/parser.go.html#5263788">s</a></span><span class="op" id="5263866">,</span>&nbsp;<span class="builtintype" id="5263868">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5263875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5263879">//&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5263894">return</span>&nbsp;<span class="op" id="5263901">&amp;</span><span class="ident" id="5263902"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5263905">.</span><span class="ident" id="5263906">ExprStmt</span><span class="op" id="5263914">{</span><span class="ident" id="5263915">X</span><span class="op" id="5263916">:</span>&nbsp;<span class="ident" id="5263918"><a href="/go/parser/parser.go.html#5261681">x</a></span><span class="op" id="5263919">[</span><span class="num" id="5263920">0</span><span class="op" id="5263921">]</span><span class="op" id="5263922">}</span><span class="op" id="5263923">,</span>&nbsp;<span class="builtintype" id="5263925">false</span><br>
<span class="lineno">1710</span><span class="op" id="5263931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5263934">func</span>&nbsp;<span class="op" id="5263939">(</span><span class="ident" id="5263940">p</span>&nbsp;<span class="op" id="5263942">*</span><span class="ident" id="5263943"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5263949">)</span>&nbsp;<span class="ident" id="5263951">parseCallExpr</span><span class="op" id="5263964">(</span><span class="ident" id="5263965">callType</span>&nbsp;<span class="builtintype" id="5263974">string</span><span class="op" id="5263980">)</span>&nbsp;<span class="op" id="5263982">*</span><span class="ident" id="5263983"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5263986">.</span><span class="ident" id="5263987">CallExpr</span>&nbsp;<span class="op" id="5263996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5263999">x</span>&nbsp;<span class="op" id="5264001">:=</span>&nbsp;<span class="ident" id="5264004"><a href="/go/parser/parser.go.html#5263940">p</a></span><span class="op" id="5264005">.</span><span class="ident" id="5264006">parseRhsOrType</span><span class="op" id="5264020">(</span><span class="op" id="5264021">)</span>&nbsp;<span class="comment" id="5264023">//&nbsp;could&nbsp;be&nbsp;a&nbsp;conversion:&nbsp;(some&nbsp;type)(x)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264065">if</span>&nbsp;<span class="ident" id="5264068">call</span><span class="op" id="5264072">,</span>&nbsp;<span class="ident" id="5264074">isCall</span>&nbsp;<span class="op" id="5264081">:=</span>&nbsp;<span class="ident" id="5264084"><a href="/go/parser/parser.go.html#5263999">x</a></span><span class="op" id="5264085">.</span><span class="op" id="5264086">(</span><span class="op" id="5264087">*</span><span class="ident" id="5264088"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5264091">.</span><span class="ident" id="5264092">CallExpr</span><span class="op" id="5264100">)</span><span class="op" id="5264101">;</span>&nbsp;<span class="ident" id="5264103"><a href="/go/parser/parser.go.html#5264074">isCall</a></span>&nbsp;<span class="op" id="5264110">{</span><br>
<span class="lineno">1715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264114">return</span>&nbsp;<span class="ident" id="5264121"><a href="/go/parser/parser.go.html#5264068">call</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5264127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264130">if</span>&nbsp;<span class="ident" id="5264133">_</span><span class="op" id="5264134">,</span>&nbsp;<span class="ident" id="5264136">isBad</span>&nbsp;<span class="op" id="5264142">:=</span>&nbsp;<span class="ident" id="5264145"><a href="/go/parser/parser.go.html#5263999">x</a></span><span class="op" id="5264146">.</span><span class="op" id="5264147">(</span><span class="op" id="5264148">*</span><span class="ident" id="5264149"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5264152">.</span><span class="ident" id="5264153">BadExpr</span><span class="op" id="5264160">)</span><span class="op" id="5264161">;</span>&nbsp;<span class="op" id="5264163">!</span><span class="ident" id="5264164"><a href="/go/parser/parser.go.html#5264136">isBad</a></span>&nbsp;<span class="op" id="5264170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5264174">//&nbsp;only&nbsp;report&nbsp;error&nbsp;if&nbsp;it&#39;s&nbsp;a&nbsp;new&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5264215"><a href="/go/parser/parser.go.html#5263940">p</a></span><span class="op" id="5264216">.</span><span class="builtintype" id="5264217">error</span><span class="op" id="5264222">(</span><span class="ident" id="5264223"><a href="/go/parser/parser.go.html#5263940">p</a></span><span class="op" id="5264224">.</span><span class="ident" id="5264225">safePos</span><span class="op" id="5264232">(</span><span class="ident" id="5264233"><a href="/go/parser/parser.go.html#5263999">x</a></span><span class="op" id="5264234">.</span><span class="ident" id="5264235">End</span><span class="op" id="5264238">(</span><span class="op" id="5264239">)</span><span class="op" id="5264240">)</span><span class="op" id="5264241">,</span>&nbsp;<span class="ident" id="5264243"><a href="/go/parser/parser.go.html#5219969">fmt</a></span><span class="op" id="5264246">.</span><span class="ident" id="5264247">Sprintf</span><span class="op" id="5264254">(</span><span class="string" id="5264255">&#34;function&nbsp;must&nbsp;be&nbsp;invoked&nbsp;in&nbsp;%s&nbsp;statement&#34;</span><span class="op" id="5264297">,</span>&nbsp;<span class="ident" id="5264299"><a href="/go/parser/parser.go.html#5263965">callType</a></span><span class="op" id="5264307">)</span><span class="op" id="5264308">)</span><br>
<span class="lineno">1720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5264311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264314">return</span>&nbsp;<span class="ident" id="5264321">nil</span><br>
<span class="lineno"></span><span class="op" id="5264325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5264328">func</span>&nbsp;<span class="op" id="5264333">(</span><span class="ident" id="5264334">p</span>&nbsp;<span class="op" id="5264336">*</span><span class="ident" id="5264337"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5264343">)</span>&nbsp;<span class="ident" id="5264345">parseGoStmt</span><span class="op" id="5264356">(</span><span class="op" id="5264357">)</span>&nbsp;<span class="ident" id="5264359"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5264362">.</span><span class="ident" id="5264363">Stmt</span>&nbsp;<span class="op" id="5264368">{</span><br>
<span class="lineno">1725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264371">if</span>&nbsp;<span class="ident" id="5264374"><a href="/go/parser/parser.go.html#5264334">p</a></span><span class="op" id="5264375">.</span><span class="ident" id="5264376">trace</span>&nbsp;<span class="op" id="5264382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264386">defer</span>&nbsp;<span class="ident" id="5264392"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5264394">(</span><span class="ident" id="5264395"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5264400">(</span><span class="ident" id="5264401"><a href="/go/parser/parser.go.html#5264334">p</a></span><span class="op" id="5264402">,</span>&nbsp;<span class="string" id="5264404">&#34;GoStmt&#34;</span><span class="op" id="5264412">)</span><span class="op" id="5264413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5264416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5264420">pos</span>&nbsp;<span class="op" id="5264424">:=</span>&nbsp;<span class="ident" id="5264427"><a href="/go/parser/parser.go.html#5264334">p</a></span><span class="op" id="5264428">.</span><span class="ident" id="5264429">expect</span><span class="op" id="5264435">(</span><span class="ident" id="5264436"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5264441">.</span><span class="ident" id="5264442">GO</span><span class="op" id="5264444">)</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5264447">call</span>&nbsp;<span class="op" id="5264452">:=</span>&nbsp;<span class="ident" id="5264455"><a href="/go/parser/parser.go.html#5264334">p</a></span><span class="op" id="5264456">.</span><span class="ident" id="5264457">parseCallExpr</span><span class="op" id="5264470">(</span><span class="string" id="5264471">&#34;go&#34;</span><span class="op" id="5264475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5264478"><a href="/go/parser/parser.go.html#5264334">p</a></span><span class="op" id="5264479">.</span><span class="ident" id="5264480">expectSemi</span><span class="op" id="5264490">(</span><span class="op" id="5264491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264494">if</span>&nbsp;<span class="ident" id="5264497"><a href="/go/parser/parser.go.html#5264447">call</a></span>&nbsp;<span class="op" id="5264502">==</span>&nbsp;<span class="ident" id="5264505">nil</span>&nbsp;<span class="op" id="5264509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264513">return</span>&nbsp;<span class="op" id="5264520">&amp;</span><span class="ident" id="5264521"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5264524">.</span><span class="ident" id="5264525">BadStmt</span><span class="op" id="5264532">{</span><span class="ident" id="5264533">From</span><span class="op" id="5264537">:</span>&nbsp;<span class="ident" id="5264539"><a href="/go/parser/parser.go.html#5264420">pos</a></span><span class="op" id="5264542">,</span>&nbsp;<span class="ident" id="5264544">To</span><span class="op" id="5264546">:</span>&nbsp;<span class="ident" id="5264548"><a href="/go/parser/parser.go.html#5264420">pos</a></span>&nbsp;<span class="op" id="5264552">+</span>&nbsp;<span class="num" id="5264554">2</span><span class="op" id="5264555">}</span>&nbsp;<span class="comment" id="5264557">//&nbsp;len(&#34;go&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5264571">}</span><br>
<span class="lineno">1735</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264575">return</span>&nbsp;<span class="op" id="5264582">&amp;</span><span class="ident" id="5264583"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5264586">.</span><span class="ident" id="5264587">GoStmt</span><span class="op" id="5264593">{</span><span class="ident" id="5264594">Go</span><span class="op" id="5264596">:</span>&nbsp;<span class="ident" id="5264598"><a href="/go/parser/parser.go.html#5264420">pos</a></span><span class="op" id="5264601">,</span>&nbsp;<span class="ident" id="5264603">Call</span><span class="op" id="5264607">:</span>&nbsp;<span class="ident" id="5264609"><a href="/go/parser/parser.go.html#5264447">call</a></span><span class="op" id="5264613">}</span><br>
<span class="lineno"></span><span class="op" id="5264615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5264618">func</span>&nbsp;<span class="op" id="5264623">(</span><span class="ident" id="5264624">p</span>&nbsp;<span class="op" id="5264626">*</span><span class="ident" id="5264627"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5264633">)</span>&nbsp;<span class="ident" id="5264635">parseDeferStmt</span><span class="op" id="5264649">(</span><span class="op" id="5264650">)</span>&nbsp;<span class="ident" id="5264652"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5264655">.</span><span class="ident" id="5264656">Stmt</span>&nbsp;<span class="op" id="5264661">{</span><br>
<span class="lineno">1740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264664">if</span>&nbsp;<span class="ident" id="5264667"><a href="/go/parser/parser.go.html#5264624">p</a></span><span class="op" id="5264668">.</span><span class="ident" id="5264669">trace</span>&nbsp;<span class="op" id="5264675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264679">defer</span>&nbsp;<span class="ident" id="5264685"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5264687">(</span><span class="ident" id="5264688"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5264693">(</span><span class="ident" id="5264694"><a href="/go/parser/parser.go.html#5264624">p</a></span><span class="op" id="5264695">,</span>&nbsp;<span class="string" id="5264697">&#34;DeferStmt&#34;</span><span class="op" id="5264708">)</span><span class="op" id="5264709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5264712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5264716">pos</span>&nbsp;<span class="op" id="5264720">:=</span>&nbsp;<span class="ident" id="5264723"><a href="/go/parser/parser.go.html#5264624">p</a></span><span class="op" id="5264724">.</span><span class="ident" id="5264725">expect</span><span class="op" id="5264731">(</span><span class="ident" id="5264732"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5264737">.</span><span class="ident" id="5264738">DEFER</span><span class="op" id="5264743">)</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5264746">call</span>&nbsp;<span class="op" id="5264751">:=</span>&nbsp;<span class="ident" id="5264754"><a href="/go/parser/parser.go.html#5264624">p</a></span><span class="op" id="5264755">.</span><span class="ident" id="5264756">parseCallExpr</span><span class="op" id="5264769">(</span><span class="string" id="5264770">&#34;defer&#34;</span><span class="op" id="5264777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5264780"><a href="/go/parser/parser.go.html#5264624">p</a></span><span class="op" id="5264781">.</span><span class="ident" id="5264782">expectSemi</span><span class="op" id="5264792">(</span><span class="op" id="5264793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264796">if</span>&nbsp;<span class="ident" id="5264799"><a href="/go/parser/parser.go.html#5264746">call</a></span>&nbsp;<span class="op" id="5264804">==</span>&nbsp;<span class="ident" id="5264807">nil</span>&nbsp;<span class="op" id="5264811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264815">return</span>&nbsp;<span class="op" id="5264822">&amp;</span><span class="ident" id="5264823"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5264826">.</span><span class="ident" id="5264827">BadStmt</span><span class="op" id="5264834">{</span><span class="ident" id="5264835">From</span><span class="op" id="5264839">:</span>&nbsp;<span class="ident" id="5264841"><a href="/go/parser/parser.go.html#5264716">pos</a></span><span class="op" id="5264844">,</span>&nbsp;<span class="ident" id="5264846">To</span><span class="op" id="5264848">:</span>&nbsp;<span class="ident" id="5264850"><a href="/go/parser/parser.go.html#5264716">pos</a></span>&nbsp;<span class="op" id="5264854">+</span>&nbsp;<span class="num" id="5264856">5</span><span class="op" id="5264857">}</span>&nbsp;<span class="comment" id="5264859">//&nbsp;len(&#34;defer&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5264876">}</span><br>
<span class="lineno">1750</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264880">return</span>&nbsp;<span class="op" id="5264887">&amp;</span><span class="ident" id="5264888"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5264891">.</span><span class="ident" id="5264892">DeferStmt</span><span class="op" id="5264901">{</span><span class="ident" id="5264902">Defer</span><span class="op" id="5264907">:</span>&nbsp;<span class="ident" id="5264909"><a href="/go/parser/parser.go.html#5264716">pos</a></span><span class="op" id="5264912">,</span>&nbsp;<span class="ident" id="5264914">Call</span><span class="op" id="5264918">:</span>&nbsp;<span class="ident" id="5264920"><a href="/go/parser/parser.go.html#5264746">call</a></span><span class="op" id="5264924">}</span><br>
<span class="lineno"></span><span class="op" id="5264926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5264929">func</span>&nbsp;<span class="op" id="5264934">(</span><span class="ident" id="5264935">p</span>&nbsp;<span class="op" id="5264937">*</span><span class="ident" id="5264938"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5264944">)</span>&nbsp;<span class="ident" id="5264946">parseReturnStmt</span><span class="op" id="5264961">(</span><span class="op" id="5264962">)</span>&nbsp;<span class="op" id="5264964">*</span><span class="ident" id="5264965"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5264968">.</span><span class="ident" id="5264969">ReturnStmt</span>&nbsp;<span class="op" id="5264980">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264983">if</span>&nbsp;<span class="ident" id="5264986"><a href="/go/parser/parser.go.html#5264935">p</a></span><span class="op" id="5264987">.</span><span class="ident" id="5264988">trace</span>&nbsp;<span class="op" id="5264994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5264998">defer</span>&nbsp;<span class="ident" id="5265004"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5265006">(</span><span class="ident" id="5265007"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5265012">(</span><span class="ident" id="5265013"><a href="/go/parser/parser.go.html#5264935">p</a></span><span class="op" id="5265014">,</span>&nbsp;<span class="string" id="5265016">&#34;ReturnStmt&#34;</span><span class="op" id="5265028">)</span><span class="op" id="5265029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5265032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265036">pos</span>&nbsp;<span class="op" id="5265040">:=</span>&nbsp;<span class="ident" id="5265043"><a href="/go/parser/parser.go.html#5264935">p</a></span><span class="op" id="5265044">.</span><span class="ident" id="5265045">pos</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265050"><a href="/go/parser/parser.go.html#5264935">p</a></span><span class="op" id="5265051">.</span><span class="ident" id="5265052">expect</span><span class="op" id="5265058">(</span><span class="ident" id="5265059"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5265064">.</span><span class="ident" id="5265065">RETURN</span><span class="op" id="5265071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265074">var</span>&nbsp;<span class="ident" id="5265078">x</span>&nbsp;<span class="op" id="5265080">[</span><span class="op" id="5265081">]</span><span class="ident" id="5265082"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5265085">.</span><span class="ident" id="5265086">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265092">if</span>&nbsp;<span class="ident" id="5265095"><a href="/go/parser/parser.go.html#5264935">p</a></span><span class="op" id="5265096">.</span><span class="ident" id="5265097">tok</span>&nbsp;<span class="op" id="5265101">!=</span>&nbsp;<span class="ident" id="5265104"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5265109">.</span><span class="ident" id="5265110">SEMICOLON</span>&nbsp;<span class="op" id="5265120">&amp;&amp;</span>&nbsp;<span class="ident" id="5265123"><a href="/go/parser/parser.go.html#5264935">p</a></span><span class="op" id="5265124">.</span><span class="ident" id="5265125">tok</span>&nbsp;<span class="op" id="5265129">!=</span>&nbsp;<span class="ident" id="5265132"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5265137">.</span><span class="ident" id="5265138">RBRACE</span>&nbsp;<span class="op" id="5265145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265149"><a href="/go/parser/parser.go.html#5265078">x</a></span>&nbsp;<span class="op" id="5265151">=</span>&nbsp;<span class="ident" id="5265153"><a href="/go/parser/parser.go.html#5264935">p</a></span><span class="op" id="5265154">.</span><span class="ident" id="5265155">parseRhsList</span><span class="op" id="5265167">(</span><span class="op" id="5265168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5265171">}</span><br>
<span class="lineno">1765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265174"><a href="/go/parser/parser.go.html#5264935">p</a></span><span class="op" id="5265175">.</span><span class="ident" id="5265176">expectSemi</span><span class="op" id="5265186">(</span><span class="op" id="5265187">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265191">return</span>&nbsp;<span class="op" id="5265198">&amp;</span><span class="ident" id="5265199"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5265202">.</span><span class="ident" id="5265203">ReturnStmt</span><span class="op" id="5265213">{</span><span class="ident" id="5265214">Return</span><span class="op" id="5265220">:</span>&nbsp;<span class="ident" id="5265222"><a href="/go/parser/parser.go.html#5265036">pos</a></span><span class="op" id="5265225">,</span>&nbsp;<span class="ident" id="5265227">Results</span><span class="op" id="5265234">:</span>&nbsp;<span class="ident" id="5265236"><a href="/go/parser/parser.go.html#5265078">x</a></span><span class="op" id="5265237">}</span><br>
<span class="lineno"></span><span class="op" id="5265239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1770</span><span class="keyword" id="5265242">func</span>&nbsp;<span class="op" id="5265247">(</span><span class="ident" id="5265248">p</span>&nbsp;<span class="op" id="5265250">*</span><span class="ident" id="5265251"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5265257">)</span>&nbsp;<span class="ident" id="5265259">parseBranchStmt</span><span class="op" id="5265274">(</span><span class="ident" id="5265275">tok</span>&nbsp;<span class="ident" id="5265279"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5265284">.</span><span class="ident" id="5265285">Token</span><span class="op" id="5265290">)</span>&nbsp;<span class="op" id="5265292">*</span><span class="ident" id="5265293"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5265296">.</span><span class="ident" id="5265297">BranchStmt</span>&nbsp;<span class="op" id="5265308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265311">if</span>&nbsp;<span class="ident" id="5265314"><a href="/go/parser/parser.go.html#5265248">p</a></span><span class="op" id="5265315">.</span><span class="ident" id="5265316">trace</span>&nbsp;<span class="op" id="5265322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265326">defer</span>&nbsp;<span class="ident" id="5265332"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5265334">(</span><span class="ident" id="5265335"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5265340">(</span><span class="ident" id="5265341"><a href="/go/parser/parser.go.html#5265248">p</a></span><span class="op" id="5265342">,</span>&nbsp;<span class="string" id="5265344">&#34;BranchStmt&#34;</span><span class="op" id="5265356">)</span><span class="op" id="5265357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5265360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265364">pos</span>&nbsp;<span class="op" id="5265368">:=</span>&nbsp;<span class="ident" id="5265371"><a href="/go/parser/parser.go.html#5265248">p</a></span><span class="op" id="5265372">.</span><span class="ident" id="5265373">expect</span><span class="op" id="5265379">(</span><span class="ident" id="5265380"><a href="/go/parser/parser.go.html#5265275">tok</a></span><span class="op" id="5265383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265386">var</span>&nbsp;<span class="ident" id="5265390">label</span>&nbsp;<span class="op" id="5265396">*</span><span class="ident" id="5265397"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5265400">.</span><span class="ident" id="5265401">Ident</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265408">if</span>&nbsp;<span class="ident" id="5265411"><a href="/go/parser/parser.go.html#5265275">tok</a></span>&nbsp;<span class="op" id="5265415">!=</span>&nbsp;<span class="ident" id="5265418"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5265423">.</span><span class="ident" id="5265424">FALLTHROUGH</span>&nbsp;<span class="op" id="5265436">&amp;&amp;</span>&nbsp;<span class="ident" id="5265439"><a href="/go/parser/parser.go.html#5265248">p</a></span><span class="op" id="5265440">.</span><span class="ident" id="5265441">tok</span>&nbsp;<span class="op" id="5265445">==</span>&nbsp;<span class="ident" id="5265448"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5265453">.</span><span class="ident" id="5265454">IDENT</span>&nbsp;<span class="op" id="5265460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265464"><a href="/go/parser/parser.go.html#5265390">label</a></span>&nbsp;<span class="op" id="5265470">=</span>&nbsp;<span class="ident" id="5265472"><a href="/go/parser/parser.go.html#5265248">p</a></span><span class="op" id="5265473">.</span><span class="ident" id="5265474">parseIdent</span><span class="op" id="5265484">(</span><span class="op" id="5265485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5265489">//&nbsp;add&nbsp;to&nbsp;list&nbsp;of&nbsp;unresolved&nbsp;targets</span><br>
<span class="lineno">1780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265528">n</span>&nbsp;<span class="op" id="5265530">:=</span>&nbsp;<span class="builtinfunc" id="5265533">len</span><span class="op" id="5265536">(</span><span class="ident" id="5265537"><a href="/go/parser/parser.go.html#5265248">p</a></span><span class="op" id="5265538">.</span><span class="ident" id="5265539">targetStack</span><span class="op" id="5265550">)</span>&nbsp;<span class="op" id="5265552">-</span>&nbsp;<span class="num" id="5265554">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265558"><a href="/go/parser/parser.go.html#5265248">p</a></span><span class="op" id="5265559">.</span><span class="ident" id="5265560">targetStack</span><span class="op" id="5265571">[</span><span class="ident" id="5265572"><a href="/go/parser/parser.go.html#5265528">n</a></span><span class="op" id="5265573">]</span>&nbsp;<span class="op" id="5265575">=</span>&nbsp;<span class="builtinfunc" id="5265577">append</span><span class="op" id="5265583">(</span><span class="ident" id="5265584"><a href="/go/parser/parser.go.html#5265248">p</a></span><span class="op" id="5265585">.</span><span class="ident" id="5265586">targetStack</span><span class="op" id="5265597">[</span><span class="ident" id="5265598"><a href="/go/parser/parser.go.html#5265528">n</a></span><span class="op" id="5265599">]</span><span class="op" id="5265600">,</span>&nbsp;<span class="ident" id="5265602"><a href="/go/parser/parser.go.html#5265390">label</a></span><span class="op" id="5265607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5265610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265613"><a href="/go/parser/parser.go.html#5265248">p</a></span><span class="op" id="5265614">.</span><span class="ident" id="5265615">expectSemi</span><span class="op" id="5265625">(</span><span class="op" id="5265626">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265630">return</span>&nbsp;<span class="op" id="5265637">&amp;</span><span class="ident" id="5265638"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5265641">.</span><span class="ident" id="5265642">BranchStmt</span><span class="op" id="5265652">{</span><span class="ident" id="5265653">TokPos</span><span class="op" id="5265659">:</span>&nbsp;<span class="ident" id="5265661"><a href="/go/parser/parser.go.html#5265364">pos</a></span><span class="op" id="5265664">,</span>&nbsp;<span class="ident" id="5265666">Tok</span><span class="op" id="5265669">:</span>&nbsp;<span class="ident" id="5265671"><a href="/go/parser/parser.go.html#5265275">tok</a></span><span class="op" id="5265674">,</span>&nbsp;<span class="ident" id="5265676">Label</span><span class="op" id="5265681">:</span>&nbsp;<span class="ident" id="5265683"><a href="/go/parser/parser.go.html#5265390">label</a></span><span class="op" id="5265688">}</span><br>
<span class="lineno"></span><span class="op" id="5265690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5265693">func</span>&nbsp;<span class="op" id="5265698">(</span><span class="ident" id="5265699">p</span>&nbsp;<span class="op" id="5265701">*</span><span class="ident" id="5265702"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5265708">)</span>&nbsp;<span class="ident" id="5265710">makeExpr</span><span class="op" id="5265718">(</span><span class="ident" id="5265719">s</span>&nbsp;<span class="ident" id="5265721"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5265724">.</span><span class="ident" id="5265725">Stmt</span><span class="op" id="5265729">,</span>&nbsp;<span class="ident" id="5265731">kind</span>&nbsp;<span class="builtintype" id="5265736">string</span><span class="op" id="5265742">)</span>&nbsp;<span class="ident" id="5265744"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5265747">.</span><span class="ident" id="5265748">Expr</span>&nbsp;<span class="op" id="5265753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265756">if</span>&nbsp;<span class="ident" id="5265759"><a href="/go/parser/parser.go.html#5265719">s</a></span>&nbsp;<span class="op" id="5265761">==</span>&nbsp;<span class="ident" id="5265764">nil</span>&nbsp;<span class="op" id="5265768">{</span><br>
<span class="lineno">1790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265772">return</span>&nbsp;<span class="ident" id="5265779">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5265784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265787">if</span>&nbsp;<span class="ident" id="5265790">es</span><span class="op" id="5265792">,</span>&nbsp;<span class="ident" id="5265794">isExpr</span>&nbsp;<span class="op" id="5265801">:=</span>&nbsp;<span class="ident" id="5265804"><a href="/go/parser/parser.go.html#5265719">s</a></span><span class="op" id="5265805">.</span><span class="op" id="5265806">(</span><span class="op" id="5265807">*</span><span class="ident" id="5265808"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5265811">.</span><span class="ident" id="5265812">ExprStmt</span><span class="op" id="5265820">)</span><span class="op" id="5265821">;</span>&nbsp;<span class="ident" id="5265823"><a href="/go/parser/parser.go.html#5265794">isExpr</a></span>&nbsp;<span class="op" id="5265830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265834">return</span>&nbsp;<span class="ident" id="5265841"><a href="/go/parser/parser.go.html#5265699">p</a></span><span class="op" id="5265842">.</span><span class="ident" id="5265843">checkExpr</span><span class="op" id="5265852">(</span><span class="ident" id="5265853"><a href="/go/parser/parser.go.html#5265790">es</a></span><span class="op" id="5265855">.</span><span class="ident" id="5265856">X</span><span class="op" id="5265857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5265860">}</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5265863"><a href="/go/parser/parser.go.html#5265699">p</a></span><span class="op" id="5265864">.</span><span class="builtintype" id="5265865">error</span><span class="op" id="5265870">(</span><span class="ident" id="5265871"><a href="/go/parser/parser.go.html#5265719">s</a></span><span class="op" id="5265872">.</span><span class="ident" id="5265873">Pos</span><span class="op" id="5265876">(</span><span class="op" id="5265877">)</span><span class="op" id="5265878">,</span>&nbsp;<span class="ident" id="5265880"><a href="/go/parser/parser.go.html#5219969">fmt</a></span><span class="op" id="5265883">.</span><span class="ident" id="5265884">Sprintf</span><span class="op" id="5265891">(</span><span class="string" id="5265892">&#34;expected&nbsp;%s,&nbsp;found&nbsp;simple&nbsp;statement&nbsp;(missing&nbsp;parentheses&nbsp;around&nbsp;composite&nbsp;literal?)&#34;</span><span class="op" id="5265977">,</span>&nbsp;<span class="ident" id="5265979"><a href="/go/parser/parser.go.html#5265731">kind</a></span><span class="op" id="5265983">)</span><span class="op" id="5265984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5265987">return</span>&nbsp;<span class="op" id="5265994">&amp;</span><span class="ident" id="5265995"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5265998">.</span><span class="ident" id="5265999">BadExpr</span><span class="op" id="5266006">{</span><span class="ident" id="5266007">From</span><span class="op" id="5266011">:</span>&nbsp;<span class="ident" id="5266013"><a href="/go/parser/parser.go.html#5265719">s</a></span><span class="op" id="5266014">.</span><span class="ident" id="5266015">Pos</span><span class="op" id="5266018">(</span><span class="op" id="5266019">)</span><span class="op" id="5266020">,</span>&nbsp;<span class="ident" id="5266022">To</span><span class="op" id="5266024">:</span>&nbsp;<span class="ident" id="5266026"><a href="/go/parser/parser.go.html#5265699">p</a></span><span class="op" id="5266027">.</span><span class="ident" id="5266028">safePos</span><span class="op" id="5266035">(</span><span class="ident" id="5266036"><a href="/go/parser/parser.go.html#5265719">s</a></span><span class="op" id="5266037">.</span><span class="ident" id="5266038">End</span><span class="op" id="5266041">(</span><span class="op" id="5266042">)</span><span class="op" id="5266043">)</span><span class="op" id="5266044">}</span><br>
<span class="lineno"></span><span class="op" id="5266046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5266049">func</span>&nbsp;<span class="op" id="5266054">(</span><span class="ident" id="5266055">p</span>&nbsp;<span class="op" id="5266057">*</span><span class="ident" id="5266058"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5266064">)</span>&nbsp;<span class="ident" id="5266066">parseIfStmt</span><span class="op" id="5266077">(</span><span class="op" id="5266078">)</span>&nbsp;<span class="op" id="5266080">*</span><span class="ident" id="5266081"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5266084">.</span><span class="ident" id="5266085">IfStmt</span>&nbsp;<span class="op" id="5266092">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266095">if</span>&nbsp;<span class="ident" id="5266098"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266099">.</span><span class="ident" id="5266100">trace</span>&nbsp;<span class="op" id="5266106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266110">defer</span>&nbsp;<span class="ident" id="5266116"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5266118">(</span><span class="ident" id="5266119"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5266124">(</span><span class="ident" id="5266125"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266126">,</span>&nbsp;<span class="string" id="5266128">&#34;IfStmt&#34;</span><span class="op" id="5266136">)</span><span class="op" id="5266137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266144">pos</span>&nbsp;<span class="op" id="5266148">:=</span>&nbsp;<span class="ident" id="5266151"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266152">.</span><span class="ident" id="5266153">expect</span><span class="op" id="5266159">(</span><span class="ident" id="5266160"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5266165">.</span><span class="ident" id="5266166">IF</span><span class="op" id="5266168">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266171"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266172">.</span><span class="ident" id="5266173">openScope</span><span class="op" id="5266182">(</span><span class="op" id="5266183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266186">defer</span>&nbsp;<span class="ident" id="5266192"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266193">.</span><span class="ident" id="5266194">closeScope</span><span class="op" id="5266204">(</span><span class="op" id="5266205">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266209">var</span>&nbsp;<span class="ident" id="5266213">s</span>&nbsp;<span class="ident" id="5266215"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5266218">.</span><span class="ident" id="5266219">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266225">var</span>&nbsp;<span class="ident" id="5266229">x</span>&nbsp;<span class="ident" id="5266231"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5266234">.</span><span class="ident" id="5266235">Expr</span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266245">prevLev</span>&nbsp;<span class="op" id="5266253">:=</span>&nbsp;<span class="ident" id="5266256"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266257">.</span><span class="ident" id="5266258">exprLev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266268"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266269">.</span><span class="ident" id="5266270">exprLev</span>&nbsp;<span class="op" id="5266278">=</span>&nbsp;<span class="op" id="5266280">-</span><span class="num" id="5266281">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266285">if</span>&nbsp;<span class="ident" id="5266288"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266289">.</span><span class="ident" id="5266290">tok</span>&nbsp;<span class="op" id="5266294">==</span>&nbsp;<span class="ident" id="5266297"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5266302">.</span><span class="ident" id="5266303">SEMICOLON</span>&nbsp;<span class="op" id="5266313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266318"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266319">.</span><span class="ident" id="5266320">next</span><span class="op" id="5266324">(</span><span class="op" id="5266325">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266330"><a href="/go/parser/parser.go.html#5266229">x</a></span>&nbsp;<span class="op" id="5266332">=</span>&nbsp;<span class="ident" id="5266334"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266335">.</span><span class="ident" id="5266336">parseRhs</span><span class="op" id="5266344">(</span><span class="op" id="5266345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266349">}</span>&nbsp;<span class="keyword" id="5266351">else</span>&nbsp;<span class="op" id="5266356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266361"><a href="/go/parser/parser.go.html#5266213">s</a></span><span class="op" id="5266362">,</span>&nbsp;<span class="ident" id="5266364">_</span>&nbsp;<span class="op" id="5266366">=</span>&nbsp;<span class="ident" id="5266368"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266369">.</span><span class="ident" id="5266370">parseSimpleStmt</span><span class="op" id="5266385">(</span><span class="ident" id="5266386"><a href="/go/parser/parser.go.html#5261238">basic</a></span><span class="op" id="5266391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266396">if</span>&nbsp;<span class="ident" id="5266399"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266400">.</span><span class="ident" id="5266401">tok</span>&nbsp;<span class="op" id="5266405">==</span>&nbsp;<span class="ident" id="5266408"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5266413">.</span><span class="ident" id="5266414">SEMICOLON</span>&nbsp;<span class="op" id="5266424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266430"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266431">.</span><span class="ident" id="5266432">next</span><span class="op" id="5266436">(</span><span class="op" id="5266437">)</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266443"><a href="/go/parser/parser.go.html#5266229">x</a></span>&nbsp;<span class="op" id="5266445">=</span>&nbsp;<span class="ident" id="5266447"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266448">.</span><span class="ident" id="5266449">parseRhs</span><span class="op" id="5266457">(</span><span class="op" id="5266458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266463">}</span>&nbsp;<span class="keyword" id="5266465">else</span>&nbsp;<span class="op" id="5266470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266476"><a href="/go/parser/parser.go.html#5266229">x</a></span>&nbsp;<span class="op" id="5266478">=</span>&nbsp;<span class="ident" id="5266480"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266481">.</span><span class="ident" id="5266482">makeExpr</span><span class="op" id="5266490">(</span><span class="ident" id="5266491"><a href="/go/parser/parser.go.html#5266213">s</a></span><span class="op" id="5266492">,</span>&nbsp;<span class="string" id="5266494">&#34;boolean&nbsp;expression&#34;</span><span class="op" id="5266514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266520"><a href="/go/parser/parser.go.html#5266213">s</a></span>&nbsp;<span class="op" id="5266522">=</span>&nbsp;<span class="ident" id="5266524">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266531">}</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266539"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266540">.</span><span class="ident" id="5266541">exprLev</span>&nbsp;<span class="op" id="5266549">=</span>&nbsp;<span class="ident" id="5266551"><a href="/go/parser/parser.go.html#5266245">prevLev</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266564">body</span>&nbsp;<span class="op" id="5266569">:=</span>&nbsp;<span class="ident" id="5266572"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266573">.</span><span class="ident" id="5266574">parseBlockStmt</span><span class="op" id="5266588">(</span><span class="op" id="5266589">)</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266592">var</span>&nbsp;<span class="ident" id="5266596">else_</span>&nbsp;<span class="ident" id="5266602"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5266605">.</span><span class="ident" id="5266606">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266612">if</span>&nbsp;<span class="ident" id="5266615"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266616">.</span><span class="ident" id="5266617">tok</span>&nbsp;<span class="op" id="5266621">==</span>&nbsp;<span class="ident" id="5266624"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5266629">.</span><span class="ident" id="5266630">ELSE</span>&nbsp;<span class="op" id="5266635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266639"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266640">.</span><span class="ident" id="5266641">next</span><span class="op" id="5266645">(</span><span class="op" id="5266646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266650"><a href="/go/parser/parser.go.html#5266596">else_</a></span>&nbsp;<span class="op" id="5266656">=</span>&nbsp;<span class="ident" id="5266658"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266659">.</span><span class="ident" id="5266660">parseStmt</span><span class="op" id="5266669">(</span><span class="op" id="5266670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266673">}</span>&nbsp;<span class="keyword" id="5266675">else</span>&nbsp;<span class="op" id="5266680">{</span><br>
<span class="lineno">1835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266684"><a href="/go/parser/parser.go.html#5266055">p</a></span><span class="op" id="5266685">.</span><span class="ident" id="5266686">expectSemi</span><span class="op" id="5266696">(</span><span class="op" id="5266697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266704">return</span>&nbsp;<span class="op" id="5266711">&amp;</span><span class="ident" id="5266712"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5266715">.</span><span class="ident" id="5266716">IfStmt</span><span class="op" id="5266722">{</span><span class="ident" id="5266723">If</span><span class="op" id="5266725">:</span>&nbsp;<span class="ident" id="5266727"><a href="/go/parser/parser.go.html#5266144">pos</a></span><span class="op" id="5266730">,</span>&nbsp;<span class="ident" id="5266732">Init</span><span class="op" id="5266736">:</span>&nbsp;<span class="ident" id="5266738"><a href="/go/parser/parser.go.html#5266213">s</a></span><span class="op" id="5266739">,</span>&nbsp;<span class="ident" id="5266741">Cond</span><span class="op" id="5266745">:</span>&nbsp;<span class="ident" id="5266747"><a href="/go/parser/parser.go.html#5266229">x</a></span><span class="op" id="5266748">,</span>&nbsp;<span class="ident" id="5266750">Body</span><span class="op" id="5266754">:</span>&nbsp;<span class="ident" id="5266756"><a href="/go/parser/parser.go.html#5266564">body</a></span><span class="op" id="5266760">,</span>&nbsp;<span class="ident" id="5266762">Else</span><span class="op" id="5266766">:</span>&nbsp;<span class="ident" id="5266768"><a href="/go/parser/parser.go.html#5266596">else_</a></span><span class="op" id="5266773">}</span><br>
<span class="lineno"></span><span class="op" id="5266775">}</span><br>
<span class="lineno">1840</span><br>
<span class="lineno"></span><span class="keyword" id="5266778">func</span>&nbsp;<span class="op" id="5266783">(</span><span class="ident" id="5266784">p</span>&nbsp;<span class="op" id="5266786">*</span><span class="ident" id="5266787"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5266793">)</span>&nbsp;<span class="ident" id="5266795">parseTypeList</span><span class="op" id="5266808">(</span><span class="op" id="5266809">)</span>&nbsp;<span class="op" id="5266811">(</span><span class="ident" id="5266812">list</span>&nbsp;<span class="op" id="5266817">[</span><span class="op" id="5266818">]</span><span class="ident" id="5266819"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5266822">.</span><span class="ident" id="5266823">Expr</span><span class="op" id="5266827">)</span>&nbsp;<span class="op" id="5266829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266832">if</span>&nbsp;<span class="ident" id="5266835"><a href="/go/parser/parser.go.html#5266784">p</a></span><span class="op" id="5266836">.</span><span class="ident" id="5266837">trace</span>&nbsp;<span class="op" id="5266843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266847">defer</span>&nbsp;<span class="ident" id="5266853"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5266855">(</span><span class="ident" id="5266856"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5266861">(</span><span class="ident" id="5266862"><a href="/go/parser/parser.go.html#5266784">p</a></span><span class="op" id="5266863">,</span>&nbsp;<span class="string" id="5266865">&#34;TypeList&#34;</span><span class="op" id="5266875">)</span><span class="op" id="5266876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266879">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266883"><a href="/go/parser/parser.go.html#5266812">list</a></span>&nbsp;<span class="op" id="5266888">=</span>&nbsp;<span class="builtinfunc" id="5266890">append</span><span class="op" id="5266896">(</span><span class="ident" id="5266897"><a href="/go/parser/parser.go.html#5266812">list</a></span><span class="op" id="5266901">,</span>&nbsp;<span class="ident" id="5266903"><a href="/go/parser/parser.go.html#5266784">p</a></span><span class="op" id="5266904">.</span><span class="ident" id="5266905">parseType</span><span class="op" id="5266914">(</span><span class="op" id="5266915">)</span><span class="op" id="5266916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266919">for</span>&nbsp;<span class="ident" id="5266923"><a href="/go/parser/parser.go.html#5266784">p</a></span><span class="op" id="5266924">.</span><span class="ident" id="5266925">tok</span>&nbsp;<span class="op" id="5266929">==</span>&nbsp;<span class="ident" id="5266932"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5266937">.</span><span class="ident" id="5266938">COMMA</span>&nbsp;<span class="op" id="5266944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266948"><a href="/go/parser/parser.go.html#5266784">p</a></span><span class="op" id="5266949">.</span><span class="ident" id="5266950">next</span><span class="op" id="5266954">(</span><span class="op" id="5266955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5266959"><a href="/go/parser/parser.go.html#5266812">list</a></span>&nbsp;<span class="op" id="5266964">=</span>&nbsp;<span class="builtinfunc" id="5266966">append</span><span class="op" id="5266972">(</span><span class="ident" id="5266973"><a href="/go/parser/parser.go.html#5266812">list</a></span><span class="op" id="5266977">,</span>&nbsp;<span class="ident" id="5266979"><a href="/go/parser/parser.go.html#5266784">p</a></span><span class="op" id="5266980">.</span><span class="ident" id="5266981">parseType</span><span class="op" id="5266990">(</span><span class="op" id="5266991">)</span><span class="op" id="5266992">)</span><br>
<span class="lineno">1850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5266995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5266999">return</span><br>
<span class="lineno"></span><span class="op" id="5267006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1855</span><span class="keyword" id="5267009">func</span>&nbsp;<span class="op" id="5267014">(</span><span class="ident" id="5267015">p</span>&nbsp;<span class="op" id="5267017">*</span><span class="ident" id="5267018"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5267024">)</span>&nbsp;<span class="ident" id="5267026">parseCaseClause</span><span class="op" id="5267041">(</span><span class="ident" id="5267042">typeSwitch</span>&nbsp;<span class="builtintype" id="5267053">bool</span><span class="op" id="5267057">)</span>&nbsp;<span class="op" id="5267059">*</span><span class="ident" id="5267060"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5267063">.</span><span class="ident" id="5267064">CaseClause</span>&nbsp;<span class="op" id="5267075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267078">if</span>&nbsp;<span class="ident" id="5267081"><a href="/go/parser/parser.go.html#5267015">p</a></span><span class="op" id="5267082">.</span><span class="ident" id="5267083">trace</span>&nbsp;<span class="op" id="5267089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267093">defer</span>&nbsp;<span class="ident" id="5267099"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5267101">(</span><span class="ident" id="5267102"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5267107">(</span><span class="ident" id="5267108"><a href="/go/parser/parser.go.html#5267015">p</a></span><span class="op" id="5267109">,</span>&nbsp;<span class="string" id="5267111">&#34;CaseClause&#34;</span><span class="op" id="5267123">)</span><span class="op" id="5267124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5267127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267131">pos</span>&nbsp;<span class="op" id="5267135">:=</span>&nbsp;<span class="ident" id="5267138"><a href="/go/parser/parser.go.html#5267015">p</a></span><span class="op" id="5267139">.</span><span class="ident" id="5267140">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267145">var</span>&nbsp;<span class="ident" id="5267149">list</span>&nbsp;<span class="op" id="5267154">[</span><span class="op" id="5267155">]</span><span class="ident" id="5267156"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5267159">.</span><span class="ident" id="5267160">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267166">if</span>&nbsp;<span class="ident" id="5267169"><a href="/go/parser/parser.go.html#5267015">p</a></span><span class="op" id="5267170">.</span><span class="ident" id="5267171">tok</span>&nbsp;<span class="op" id="5267175">==</span>&nbsp;<span class="ident" id="5267178"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5267183">.</span><span class="ident" id="5267184">CASE</span>&nbsp;<span class="op" id="5267189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267193"><a href="/go/parser/parser.go.html#5267015">p</a></span><span class="op" id="5267194">.</span><span class="ident" id="5267195">next</span><span class="op" id="5267199">(</span><span class="op" id="5267200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267204">if</span>&nbsp;<span class="ident" id="5267207"><a href="/go/parser/parser.go.html#5267042">typeSwitch</a></span>&nbsp;<span class="op" id="5267218">{</span><br>
<span class="lineno">1865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267223"><a href="/go/parser/parser.go.html#5267149">list</a></span>&nbsp;<span class="op" id="5267228">=</span>&nbsp;<span class="ident" id="5267230"><a href="/go/parser/parser.go.html#5267015">p</a></span><span class="op" id="5267231">.</span><span class="ident" id="5267232">parseTypeList</span><span class="op" id="5267245">(</span><span class="op" id="5267246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5267250">}</span>&nbsp;<span class="keyword" id="5267252">else</span>&nbsp;<span class="op" id="5267257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267262"><a href="/go/parser/parser.go.html#5267149">list</a></span>&nbsp;<span class="op" id="5267267">=</span>&nbsp;<span class="ident" id="5267269"><a href="/go/parser/parser.go.html#5267015">p</a></span><span class="op" id="5267270">.</span><span class="ident" id="5267271">parseRhsList</span><span class="op" id="5267283">(</span><span class="op" id="5267284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5267288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5267291">}</span>&nbsp;<span class="keyword" id="5267293">else</span>&nbsp;<span class="op" id="5267298">{</span><br>
<span class="lineno">1870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267302"><a href="/go/parser/parser.go.html#5267015">p</a></span><span class="op" id="5267303">.</span><span class="ident" id="5267304">expect</span><span class="op" id="5267310">(</span><span class="ident" id="5267311"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5267316">.</span><span class="ident" id="5267317">DEFAULT</span><span class="op" id="5267324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5267327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267331">colon</span>&nbsp;<span class="op" id="5267337">:=</span>&nbsp;<span class="ident" id="5267340"><a href="/go/parser/parser.go.html#5267015">p</a></span><span class="op" id="5267341">.</span><span class="ident" id="5267342">expect</span><span class="op" id="5267348">(</span><span class="ident" id="5267349"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5267354">.</span><span class="ident" id="5267355">COLON</span><span class="op" id="5267360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267363"><a href="/go/parser/parser.go.html#5267015">p</a></span><span class="op" id="5267364">.</span><span class="ident" id="5267365">openScope</span><span class="op" id="5267374">(</span><span class="op" id="5267375">)</span><br>
<span class="lineno">1875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267378">body</span>&nbsp;<span class="op" id="5267383">:=</span>&nbsp;<span class="ident" id="5267386"><a href="/go/parser/parser.go.html#5267015">p</a></span><span class="op" id="5267387">.</span><span class="ident" id="5267388">parseStmtList</span><span class="op" id="5267401">(</span><span class="op" id="5267402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267405"><a href="/go/parser/parser.go.html#5267015">p</a></span><span class="op" id="5267406">.</span><span class="ident" id="5267407">closeScope</span><span class="op" id="5267417">(</span><span class="op" id="5267418">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267422">return</span>&nbsp;<span class="op" id="5267429">&amp;</span><span class="ident" id="5267430"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5267433">.</span><span class="ident" id="5267434">CaseClause</span><span class="op" id="5267444">{</span><span class="ident" id="5267445">Case</span><span class="op" id="5267449">:</span>&nbsp;<span class="ident" id="5267451"><a href="/go/parser/parser.go.html#5267131">pos</a></span><span class="op" id="5267454">,</span>&nbsp;<span class="ident" id="5267456">List</span><span class="op" id="5267460">:</span>&nbsp;<span class="ident" id="5267462"><a href="/go/parser/parser.go.html#5267149">list</a></span><span class="op" id="5267466">,</span>&nbsp;<span class="ident" id="5267468">Colon</span><span class="op" id="5267473">:</span>&nbsp;<span class="ident" id="5267475"><a href="/go/parser/parser.go.html#5267331">colon</a></span><span class="op" id="5267480">,</span>&nbsp;<span class="ident" id="5267482">Body</span><span class="op" id="5267486">:</span>&nbsp;<span class="ident" id="5267488"><a href="/go/parser/parser.go.html#5267378">body</a></span><span class="op" id="5267492">}</span><br>
<span class="lineno"></span><span class="op" id="5267494">}</span><br>
<span class="lineno">1880</span><br>
<span class="lineno"></span><span class="keyword" id="5267497">func</span>&nbsp;<span class="ident" id="5267502">isTypeSwitchAssert</span><span class="op" id="5267520">(</span><span class="ident" id="5267521">x</span>&nbsp;<span class="ident" id="5267523"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5267526">.</span><span class="ident" id="5267527">Expr</span><span class="op" id="5267531">)</span>&nbsp;<span class="builtintype" id="5267533">bool</span>&nbsp;<span class="op" id="5267538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5267541">a</span><span class="op" id="5267542">,</span>&nbsp;<span class="ident" id="5267544">ok</span>&nbsp;<span class="op" id="5267547">:=</span>&nbsp;<span class="ident" id="5267550"><a href="/go/parser/parser.go.html#5267521">x</a></span><span class="op" id="5267551">.</span><span class="op" id="5267552">(</span><span class="op" id="5267553">*</span><span class="ident" id="5267554"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5267557">.</span><span class="ident" id="5267558">TypeAssertExpr</span><span class="op" id="5267572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267575">return</span>&nbsp;<span class="ident" id="5267582"><a href="/go/parser/parser.go.html#5267544">ok</a></span>&nbsp;<span class="op" id="5267585">&amp;&amp;</span>&nbsp;<span class="ident" id="5267588"><a href="/go/parser/parser.go.html#5267541">a</a></span><span class="op" id="5267589">.</span><span class="ident" id="5267590">Type</span>&nbsp;<span class="op" id="5267595">==</span>&nbsp;<span class="ident" id="5267598">nil</span><br>
<span class="lineno"></span><span class="op" id="5267602">}</span><br>
<span class="lineno">1885</span><br>
<span class="lineno"></span><span class="keyword" id="5267605">func</span>&nbsp;<span class="ident" id="5267610">isTypeSwitchGuard</span><span class="op" id="5267627">(</span><span class="ident" id="5267628">s</span>&nbsp;<span class="ident" id="5267630"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5267633">.</span><span class="ident" id="5267634">Stmt</span><span class="op" id="5267638">)</span>&nbsp;<span class="builtintype" id="5267640">bool</span>&nbsp;<span class="op" id="5267645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267648">switch</span>&nbsp;<span class="ident" id="5267655">t</span>&nbsp;<span class="op" id="5267657">:=</span>&nbsp;<span class="ident" id="5267660"><a href="/go/parser/parser.go.html#5267628">s</a></span><span class="op" id="5267661">.</span><span class="op" id="5267662">(</span><span class="keyword" id="5267663">type</span><span class="op" id="5267667">)</span>&nbsp;<span class="op" id="5267669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267672">case</span>&nbsp;<span class="op" id="5267677">*</span><span class="ident" id="5267678"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5267681">.</span><span class="ident" id="5267682">ExprStmt</span><span class="op" id="5267690">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5267694">//&nbsp;x.(nil)</span><br>
<span class="lineno">1890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267707">return</span>&nbsp;<span class="ident" id="5267714"><a href="/go/parser/parser.go.html#5267502">isTypeSwitchAssert</a></span><span class="op" id="5267732">(</span><span class="ident" id="5267733"><a href="/go/parser/parser.go.html#5267655">t</a></span><span class="op" id="5267734">.</span><span class="ident" id="5267735">X</span><span class="op" id="5267736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267739">case</span>&nbsp;<span class="op" id="5267744">*</span><span class="ident" id="5267745"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5267748">.</span><span class="ident" id="5267749">AssignStmt</span><span class="op" id="5267759">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5267763">//&nbsp;v&nbsp;:=&nbsp;x.(nil)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267781">return</span>&nbsp;<span class="builtinfunc" id="5267788">len</span><span class="op" id="5267791">(</span><span class="ident" id="5267792"><a href="/go/parser/parser.go.html#5267655">t</a></span><span class="op" id="5267793">.</span><span class="ident" id="5267794">Lhs</span><span class="op" id="5267797">)</span>&nbsp;<span class="op" id="5267799">==</span>&nbsp;<span class="num" id="5267802">1</span>&nbsp;<span class="op" id="5267804">&amp;&amp;</span>&nbsp;<span class="ident" id="5267807"><a href="/go/parser/parser.go.html#5267655">t</a></span><span class="op" id="5267808">.</span><span class="ident" id="5267809">Tok</span>&nbsp;<span class="op" id="5267813">==</span>&nbsp;<span class="ident" id="5267816"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5267821">.</span><span class="ident" id="5267822">DEFINE</span>&nbsp;<span class="op" id="5267829">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5267832">len</span><span class="op" id="5267835">(</span><span class="ident" id="5267836"><a href="/go/parser/parser.go.html#5267655">t</a></span><span class="op" id="5267837">.</span><span class="ident" id="5267838">Rhs</span><span class="op" id="5267841">)</span>&nbsp;<span class="op" id="5267843">==</span>&nbsp;<span class="num" id="5267846">1</span>&nbsp;<span class="op" id="5267848">&amp;&amp;</span>&nbsp;<span class="ident" id="5267851"><a href="/go/parser/parser.go.html#5267502">isTypeSwitchAssert</a></span><span class="op" id="5267869">(</span><span class="ident" id="5267870"><a href="/go/parser/parser.go.html#5267655">t</a></span><span class="op" id="5267871">.</span><span class="ident" id="5267872">Rhs</span><span class="op" id="5267875">[</span><span class="num" id="5267876">0</span><span class="op" id="5267877">]</span><span class="op" id="5267878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5267881">}</span><br>
<span class="lineno">1895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267884">return</span>&nbsp;<span class="builtintype" id="5267891">false</span><br>
<span class="lineno"></span><span class="op" id="5267897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5267900">func</span>&nbsp;<span class="op" id="5267905">(</span><span class="ident" id="5267906">p</span>&nbsp;<span class="op" id="5267908">*</span><span class="ident" id="5267909"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5267915">)</span>&nbsp;<span class="ident" id="5267917">parseSwitchStmt</span><span class="op" id="5267932">(</span><span class="op" id="5267933">)</span>&nbsp;<span class="ident" id="5267935"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5267938">.</span><span class="ident" id="5267939">Stmt</span>&nbsp;<span class="op" id="5267944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267947">if</span>&nbsp;<span class="ident" id="5267950"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5267951">.</span><span class="ident" id="5267952">trace</span>&nbsp;<span class="op" id="5267958">{</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5267962">defer</span>&nbsp;<span class="ident" id="5267968"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5267970">(</span><span class="ident" id="5267971"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5267976">(</span><span class="ident" id="5267977"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5267978">,</span>&nbsp;<span class="string" id="5267980">&#34;SwitchStmt&#34;</span><span class="op" id="5267992">)</span><span class="op" id="5267993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5267996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268000">pos</span>&nbsp;<span class="op" id="5268004">:=</span>&nbsp;<span class="ident" id="5268007"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268008">.</span><span class="ident" id="5268009">expect</span><span class="op" id="5268015">(</span><span class="ident" id="5268016"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5268021">.</span><span class="ident" id="5268022">SWITCH</span><span class="op" id="5268028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268031"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268032">.</span><span class="ident" id="5268033">openScope</span><span class="op" id="5268042">(</span><span class="op" id="5268043">)</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5268046">defer</span>&nbsp;<span class="ident" id="5268052"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268053">.</span><span class="ident" id="5268054">closeScope</span><span class="op" id="5268064">(</span><span class="op" id="5268065">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5268069">var</span>&nbsp;<span class="ident" id="5268073">s1</span><span class="op" id="5268075">,</span>&nbsp;<span class="ident" id="5268077">s2</span>&nbsp;<span class="ident" id="5268080"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5268083">.</span><span class="ident" id="5268084">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5268090">if</span>&nbsp;<span class="ident" id="5268093"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268094">.</span><span class="ident" id="5268095">tok</span>&nbsp;<span class="op" id="5268099">!=</span>&nbsp;<span class="ident" id="5268102"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5268107">.</span><span class="ident" id="5268108">LBRACE</span>&nbsp;<span class="op" id="5268115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268119">prevLev</span>&nbsp;<span class="op" id="5268127">:=</span>&nbsp;<span class="ident" id="5268130"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268131">.</span><span class="ident" id="5268132">exprLev</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268142"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268143">.</span><span class="ident" id="5268144">exprLev</span>&nbsp;<span class="op" id="5268152">=</span>&nbsp;<span class="op" id="5268154">-</span><span class="num" id="5268155">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5268159">if</span>&nbsp;<span class="ident" id="5268162"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268163">.</span><span class="ident" id="5268164">tok</span>&nbsp;<span class="op" id="5268168">!=</span>&nbsp;<span class="ident" id="5268171"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5268176">.</span><span class="ident" id="5268177">SEMICOLON</span>&nbsp;<span class="op" id="5268187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268192"><a href="/go/parser/parser.go.html#5268077">s2</a></span><span class="op" id="5268194">,</span>&nbsp;<span class="ident" id="5268196">_</span>&nbsp;<span class="op" id="5268198">=</span>&nbsp;<span class="ident" id="5268200"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268201">.</span><span class="ident" id="5268202">parseSimpleStmt</span><span class="op" id="5268217">(</span><span class="ident" id="5268218"><a href="/go/parser/parser.go.html#5261238">basic</a></span><span class="op" id="5268223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5268227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5268231">if</span>&nbsp;<span class="ident" id="5268234"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268235">.</span><span class="ident" id="5268236">tok</span>&nbsp;<span class="op" id="5268240">==</span>&nbsp;<span class="ident" id="5268243"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5268248">.</span><span class="ident" id="5268249">SEMICOLON</span>&nbsp;<span class="op" id="5268259">{</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268264"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268265">.</span><span class="ident" id="5268266">next</span><span class="op" id="5268270">(</span><span class="op" id="5268271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268276"><a href="/go/parser/parser.go.html#5268073">s1</a></span>&nbsp;<span class="op" id="5268279">=</span>&nbsp;<span class="ident" id="5268281"><a href="/go/parser/parser.go.html#5268077">s2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268287"><a href="/go/parser/parser.go.html#5268077">s2</a></span>&nbsp;<span class="op" id="5268290">=</span>&nbsp;<span class="ident" id="5268292">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5268299">if</span>&nbsp;<span class="ident" id="5268302"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268303">.</span><span class="ident" id="5268304">tok</span>&nbsp;<span class="op" id="5268308">!=</span>&nbsp;<span class="ident" id="5268311"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5268316">.</span><span class="ident" id="5268317">LBRACE</span>&nbsp;<span class="op" id="5268324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5268330">//&nbsp;A&nbsp;TypeSwitchGuard&nbsp;may&nbsp;declare&nbsp;a&nbsp;variable&nbsp;in&nbsp;addition</span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5268390">//&nbsp;to&nbsp;the&nbsp;variable&nbsp;declared&nbsp;in&nbsp;the&nbsp;initial&nbsp;SimpleStmt.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5268449">//&nbsp;Introduce&nbsp;extra&nbsp;scope&nbsp;to&nbsp;avoid&nbsp;redeclaration&nbsp;errors:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5268509">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5268516">//&nbsp;&nbsp;&nbsp;&nbspswitch&nbsp;t&nbsp;:=&nbsp;0;&nbsp;t&nbsp;:=&nbsp;x.(T)&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5268557">//</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5268564">//&nbsp;(this&nbsp;code&nbsp;is&nbsp;not&nbsp;valid&nbsp;Go&nbsp;because&nbsp;the&nbsp;first&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5268618">//&nbsp;cannot&nbsp;be&nbsp;accessed&nbsp;and&nbsp;thus&nbsp;is&nbsp;never&nbsp;used,&nbsp;the&nbsp;extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5268678">//&nbsp;scope&nbsp;is&nbsp;needed&nbsp;for&nbsp;the&nbsp;correct&nbsp;error&nbsp;message).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5268733">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5268740">//&nbsp;If&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;type&nbsp;switch,&nbsp;s2&nbsp;must&nbsp;be&nbsp;an&nbsp;expression.</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5268805">//&nbsp;Having&nbsp;the&nbsp;extra&nbsp;nested&nbsp;but&nbsp;empty&nbsp;scope&nbsp;won&#39;t&nbsp;affect&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268869"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268870">.</span><span class="ident" id="5268871">openScope</span><span class="op" id="5268880">(</span><span class="op" id="5268881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5268887">defer</span>&nbsp;<span class="ident" id="5268893"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268894">.</span><span class="ident" id="5268895">closeScope</span><span class="op" id="5268905">(</span><span class="op" id="5268906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268912"><a href="/go/parser/parser.go.html#5268077">s2</a></span><span class="op" id="5268914">,</span>&nbsp;<span class="ident" id="5268916">_</span>&nbsp;<span class="op" id="5268918">=</span>&nbsp;<span class="ident" id="5268920"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268921">.</span><span class="ident" id="5268922">parseSimpleStmt</span><span class="op" id="5268937">(</span><span class="ident" id="5268938"><a href="/go/parser/parser.go.html#5261238">basic</a></span><span class="op" id="5268943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5268948">}</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5268952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268956"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5268957">.</span><span class="ident" id="5268958">exprLev</span>&nbsp;<span class="op" id="5268966">=</span>&nbsp;<span class="ident" id="5268968"><a href="/go/parser/parser.go.html#5268119">prevLev</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5268977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5268981">typeSwitch</span>&nbsp;<span class="op" id="5268992">:=</span>&nbsp;<span class="ident" id="5268995"><a href="/go/parser/parser.go.html#5267610">isTypeSwitchGuard</a></span><span class="op" id="5269012">(</span><span class="ident" id="5269013"><a href="/go/parser/parser.go.html#5268077">s2</a></span><span class="op" id="5269015">)</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269018">lbrace</span>&nbsp;<span class="op" id="5269025">:=</span>&nbsp;<span class="ident" id="5269028"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5269029">.</span><span class="ident" id="5269030">expect</span><span class="op" id="5269036">(</span><span class="ident" id="5269037"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5269042">.</span><span class="ident" id="5269043">LBRACE</span><span class="op" id="5269049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269052">var</span>&nbsp;<span class="ident" id="5269056">list</span>&nbsp;<span class="op" id="5269061">[</span><span class="op" id="5269062">]</span><span class="ident" id="5269063"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5269066">.</span><span class="ident" id="5269067">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269073">for</span>&nbsp;<span class="ident" id="5269077"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5269078">.</span><span class="ident" id="5269079">tok</span>&nbsp;<span class="op" id="5269083">==</span>&nbsp;<span class="ident" id="5269086"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5269091">.</span><span class="ident" id="5269092">CASE</span>&nbsp;<span class="op" id="5269097">||</span>&nbsp;<span class="ident" id="5269100"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5269101">.</span><span class="ident" id="5269102">tok</span>&nbsp;<span class="op" id="5269106">==</span>&nbsp;<span class="ident" id="5269109"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5269114">.</span><span class="ident" id="5269115">DEFAULT</span>&nbsp;<span class="op" id="5269123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269127"><a href="/go/parser/parser.go.html#5269056">list</a></span>&nbsp;<span class="op" id="5269132">=</span>&nbsp;<span class="builtinfunc" id="5269134">append</span><span class="op" id="5269140">(</span><span class="ident" id="5269141"><a href="/go/parser/parser.go.html#5269056">list</a></span><span class="op" id="5269145">,</span>&nbsp;<span class="ident" id="5269147"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5269148">.</span><span class="ident" id="5269149">parseCaseClause</span><span class="op" id="5269164">(</span><span class="ident" id="5269165"><a href="/go/parser/parser.go.html#5268981">typeSwitch</a></span><span class="op" id="5269175">)</span><span class="op" id="5269176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5269179">}</span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269182">rbrace</span>&nbsp;<span class="op" id="5269189">:=</span>&nbsp;<span class="ident" id="5269192"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5269193">.</span><span class="ident" id="5269194">expect</span><span class="op" id="5269200">(</span><span class="ident" id="5269201"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5269206">.</span><span class="ident" id="5269207">RBRACE</span><span class="op" id="5269213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269216"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5269217">.</span><span class="ident" id="5269218">expectSemi</span><span class="op" id="5269228">(</span><span class="op" id="5269229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269232">body</span>&nbsp;<span class="op" id="5269237">:=</span>&nbsp;<span class="op" id="5269240">&amp;</span><span class="ident" id="5269241"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5269244">.</span><span class="ident" id="5269245">BlockStmt</span><span class="op" id="5269254">{</span><span class="ident" id="5269255">Lbrace</span><span class="op" id="5269261">:</span>&nbsp;<span class="ident" id="5269263"><a href="/go/parser/parser.go.html#5269018">lbrace</a></span><span class="op" id="5269269">,</span>&nbsp;<span class="ident" id="5269271">List</span><span class="op" id="5269275">:</span>&nbsp;<span class="ident" id="5269277"><a href="/go/parser/parser.go.html#5269056">list</a></span><span class="op" id="5269281">,</span>&nbsp;<span class="ident" id="5269283">Rbrace</span><span class="op" id="5269289">:</span>&nbsp;<span class="ident" id="5269291"><a href="/go/parser/parser.go.html#5269182">rbrace</a></span><span class="op" id="5269297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269301">if</span>&nbsp;<span class="ident" id="5269304"><a href="/go/parser/parser.go.html#5268981">typeSwitch</a></span>&nbsp;<span class="op" id="5269315">{</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269319">return</span>&nbsp;<span class="op" id="5269326">&amp;</span><span class="ident" id="5269327"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5269330">.</span><span class="ident" id="5269331">TypeSwitchStmt</span><span class="op" id="5269345">{</span><span class="ident" id="5269346">Switch</span><span class="op" id="5269352">:</span>&nbsp;<span class="ident" id="5269354"><a href="/go/parser/parser.go.html#5268000">pos</a></span><span class="op" id="5269357">,</span>&nbsp;<span class="ident" id="5269359">Init</span><span class="op" id="5269363">:</span>&nbsp;<span class="ident" id="5269365"><a href="/go/parser/parser.go.html#5268073">s1</a></span><span class="op" id="5269367">,</span>&nbsp;<span class="ident" id="5269369">Assign</span><span class="op" id="5269375">:</span>&nbsp;<span class="ident" id="5269377"><a href="/go/parser/parser.go.html#5268077">s2</a></span><span class="op" id="5269379">,</span>&nbsp;<span class="ident" id="5269381">Body</span><span class="op" id="5269385">:</span>&nbsp;<span class="ident" id="5269387"><a href="/go/parser/parser.go.html#5269232">body</a></span><span class="op" id="5269391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5269394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269398">return</span>&nbsp;<span class="op" id="5269405">&amp;</span><span class="ident" id="5269406"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5269409">.</span><span class="ident" id="5269410">SwitchStmt</span><span class="op" id="5269420">{</span><span class="ident" id="5269421">Switch</span><span class="op" id="5269427">:</span>&nbsp;<span class="ident" id="5269429"><a href="/go/parser/parser.go.html#5268000">pos</a></span><span class="op" id="5269432">,</span>&nbsp;<span class="ident" id="5269434">Init</span><span class="op" id="5269438">:</span>&nbsp;<span class="ident" id="5269440"><a href="/go/parser/parser.go.html#5268073">s1</a></span><span class="op" id="5269442">,</span>&nbsp;<span class="ident" id="5269444">Tag</span><span class="op" id="5269447">:</span>&nbsp;<span class="ident" id="5269449"><a href="/go/parser/parser.go.html#5267906">p</a></span><span class="op" id="5269450">.</span><span class="ident" id="5269451">makeExpr</span><span class="op" id="5269459">(</span><span class="ident" id="5269460"><a href="/go/parser/parser.go.html#5268077">s2</a></span><span class="op" id="5269462">,</span>&nbsp;<span class="string" id="5269464">&#34;switch&nbsp;expression&#34;</span><span class="op" id="5269483">)</span><span class="op" id="5269484">,</span>&nbsp;<span class="ident" id="5269486">Body</span><span class="op" id="5269490">:</span>&nbsp;<span class="ident" id="5269492"><a href="/go/parser/parser.go.html#5269232">body</a></span><span class="op" id="5269496">}</span><br>
<span class="lineno"></span><span class="op" id="5269498">}</span><br>
<span class="lineno">1955</span><br>
<span class="lineno"></span><span class="keyword" id="5269501">func</span>&nbsp;<span class="op" id="5269506">(</span><span class="ident" id="5269507">p</span>&nbsp;<span class="op" id="5269509">*</span><span class="ident" id="5269510"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5269516">)</span>&nbsp;<span class="ident" id="5269518">parseCommClause</span><span class="op" id="5269533">(</span><span class="op" id="5269534">)</span>&nbsp;<span class="op" id="5269536">*</span><span class="ident" id="5269537"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5269540">.</span><span class="ident" id="5269541">CommClause</span>&nbsp;<span class="op" id="5269552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269555">if</span>&nbsp;<span class="ident" id="5269558"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5269559">.</span><span class="ident" id="5269560">trace</span>&nbsp;<span class="op" id="5269566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269570">defer</span>&nbsp;<span class="ident" id="5269576"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5269578">(</span><span class="ident" id="5269579"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5269584">(</span><span class="ident" id="5269585"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5269586">,</span>&nbsp;<span class="string" id="5269588">&#34;CommClause&#34;</span><span class="op" id="5269600">)</span><span class="op" id="5269601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5269604">}</span><br>
<span class="lineno">1960</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269608"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5269609">.</span><span class="ident" id="5269610">openScope</span><span class="op" id="5269619">(</span><span class="op" id="5269620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269623">pos</span>&nbsp;<span class="op" id="5269627">:=</span>&nbsp;<span class="ident" id="5269630"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5269631">.</span><span class="ident" id="5269632">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269637">var</span>&nbsp;<span class="ident" id="5269641">comm</span>&nbsp;<span class="ident" id="5269646"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5269649">.</span><span class="ident" id="5269650">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269656">if</span>&nbsp;<span class="ident" id="5269659"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5269660">.</span><span class="ident" id="5269661">tok</span>&nbsp;<span class="op" id="5269665">==</span>&nbsp;<span class="ident" id="5269668"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5269673">.</span><span class="ident" id="5269674">CASE</span>&nbsp;<span class="op" id="5269679">{</span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269683"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5269684">.</span><span class="ident" id="5269685">next</span><span class="op" id="5269689">(</span><span class="op" id="5269690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269694">lhs</span>&nbsp;<span class="op" id="5269698">:=</span>&nbsp;<span class="ident" id="5269701"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5269702">.</span><span class="ident" id="5269703">parseLhsList</span><span class="op" id="5269715">(</span><span class="op" id="5269716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269720">if</span>&nbsp;<span class="ident" id="5269723"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5269724">.</span><span class="ident" id="5269725">tok</span>&nbsp;<span class="op" id="5269729">==</span>&nbsp;<span class="ident" id="5269732"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5269737">.</span><span class="ident" id="5269738">ARROW</span>&nbsp;<span class="op" id="5269744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5269749">//&nbsp;SendStmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5269764">if</span>&nbsp;<span class="builtinfunc" id="5269767">len</span><span class="op" id="5269770">(</span><span class="ident" id="5269771"><a href="/go/parser/parser.go.html#5269694">lhs</a></span><span class="op" id="5269774">)</span>&nbsp;<span class="op" id="5269776">&gt;</span>&nbsp;<span class="num" id="5269778">1</span>&nbsp;<span class="op" id="5269780">{</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269786"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5269787">.</span><span class="ident" id="5269788">errorExpected</span><span class="op" id="5269801">(</span><span class="ident" id="5269802"><a href="/go/parser/parser.go.html#5269694">lhs</a></span><span class="op" id="5269805">[</span><span class="num" id="5269806">0</span><span class="op" id="5269807">]</span><span class="op" id="5269808">.</span><span class="ident" id="5269809">Pos</span><span class="op" id="5269812">(</span><span class="op" id="5269813">)</span><span class="op" id="5269814">,</span>&nbsp;<span class="string" id="5269816">&#34;1&nbsp;expression&#34;</span><span class="op" id="5269830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5269836">//&nbsp;continue&nbsp;with&nbsp;first&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5269873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269878">arrow</span>&nbsp;<span class="op" id="5269884">:=</span>&nbsp;<span class="ident" id="5269887"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5269888">.</span><span class="ident" id="5269889">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269896"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5269897">.</span><span class="ident" id="5269898">next</span><span class="op" id="5269902">(</span><span class="op" id="5269903">)</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269908">rhs</span>&nbsp;<span class="op" id="5269912">:=</span>&nbsp;<span class="ident" id="5269915"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5269916">.</span><span class="ident" id="5269917">parseRhs</span><span class="op" id="5269925">(</span><span class="op" id="5269926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5269931"><a href="/go/parser/parser.go.html#5269641">comm</a></span>&nbsp;<span class="op" id="5269936">=</span>&nbsp;<span class="op" id="5269938">&amp;</span><span class="ident" id="5269939"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5269942">.</span><span class="ident" id="5269943">SendStmt</span><span class="op" id="5269951">{</span><span class="ident" id="5269952">Chan</span><span class="op" id="5269956">:</span>&nbsp;<span class="ident" id="5269958"><a href="/go/parser/parser.go.html#5269694">lhs</a></span><span class="op" id="5269961">[</span><span class="num" id="5269962">0</span><span class="op" id="5269963">]</span><span class="op" id="5269964">,</span>&nbsp;<span class="ident" id="5269966">Arrow</span><span class="op" id="5269971">:</span>&nbsp;<span class="ident" id="5269973"><a href="/go/parser/parser.go.html#5269878">arrow</a></span><span class="op" id="5269978">,</span>&nbsp;<span class="ident" id="5269980">Value</span><span class="op" id="5269985">:</span>&nbsp;<span class="ident" id="5269987"><a href="/go/parser/parser.go.html#5269908">rhs</a></span><span class="op" id="5269990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5269994">}</span>&nbsp;<span class="keyword" id="5269996">else</span>&nbsp;<span class="op" id="5270001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5270006">//&nbsp;RecvStmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270021">if</span>&nbsp;<span class="ident" id="5270024">tok</span>&nbsp;<span class="op" id="5270028">:=</span>&nbsp;<span class="ident" id="5270031"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5270032">.</span><span class="ident" id="5270033">tok</span><span class="op" id="5270036">;</span>&nbsp;<span class="ident" id="5270038"><a href="/go/parser/parser.go.html#5270024">tok</a></span>&nbsp;<span class="op" id="5270042">==</span>&nbsp;<span class="ident" id="5270045"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5270050">.</span><span class="ident" id="5270051">ASSIGN</span>&nbsp;<span class="op" id="5270058">||</span>&nbsp;<span class="ident" id="5270061"><a href="/go/parser/parser.go.html#5270024">tok</a></span>&nbsp;<span class="op" id="5270065">==</span>&nbsp;<span class="ident" id="5270068"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5270073">.</span><span class="ident" id="5270074">DEFINE</span>&nbsp;<span class="op" id="5270081">{</span><br>
<span class="lineno">1980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5270087">//&nbsp;RecvStmt&nbsp;with&nbsp;assignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270119">if</span>&nbsp;<span class="builtinfunc" id="5270122">len</span><span class="op" id="5270125">(</span><span class="ident" id="5270126"><a href="/go/parser/parser.go.html#5269694">lhs</a></span><span class="op" id="5270129">)</span>&nbsp;<span class="op" id="5270131">&gt;</span>&nbsp;<span class="num" id="5270133">2</span>&nbsp;<span class="op" id="5270135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270142"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5270143">.</span><span class="ident" id="5270144">errorExpected</span><span class="op" id="5270157">(</span><span class="ident" id="5270158"><a href="/go/parser/parser.go.html#5269694">lhs</a></span><span class="op" id="5270161">[</span><span class="num" id="5270162">0</span><span class="op" id="5270163">]</span><span class="op" id="5270164">.</span><span class="ident" id="5270165">Pos</span><span class="op" id="5270168">(</span><span class="op" id="5270169">)</span><span class="op" id="5270170">,</span>&nbsp;<span class="string" id="5270172">&#34;1&nbsp;or&nbsp;2&nbsp;expressions&#34;</span><span class="op" id="5270192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5270199">//&nbsp;continue&nbsp;with&nbsp;first&nbsp;two&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270243"><a href="/go/parser/parser.go.html#5269694">lhs</a></span>&nbsp;<span class="op" id="5270247">=</span>&nbsp;<span class="ident" id="5270249"><a href="/go/parser/parser.go.html#5269694">lhs</a></span><span class="op" id="5270252">[</span><span class="num" id="5270253">0</span><span class="op" id="5270254">:</span><span class="num" id="5270255">2</span><span class="op" id="5270256">]</span><br>
<span class="lineno">1985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270268">pos</span>&nbsp;<span class="op" id="5270272">:=</span>&nbsp;<span class="ident" id="5270275"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5270276">.</span><span class="ident" id="5270277">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270285"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5270286">.</span><span class="ident" id="5270287">next</span><span class="op" id="5270291">(</span><span class="op" id="5270292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270298">rhs</span>&nbsp;<span class="op" id="5270302">:=</span>&nbsp;<span class="ident" id="5270305"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5270306">.</span><span class="ident" id="5270307">parseRhs</span><span class="op" id="5270315">(</span><span class="op" id="5270316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270322">as</span>&nbsp;<span class="op" id="5270325">:=</span>&nbsp;<span class="op" id="5270328">&amp;</span><span class="ident" id="5270329"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5270332">.</span><span class="ident" id="5270333">AssignStmt</span><span class="op" id="5270343">{</span><span class="ident" id="5270344">Lhs</span><span class="op" id="5270347">:</span>&nbsp;<span class="ident" id="5270349"><a href="/go/parser/parser.go.html#5269694">lhs</a></span><span class="op" id="5270352">,</span>&nbsp;<span class="ident" id="5270354">TokPos</span><span class="op" id="5270360">:</span>&nbsp;<span class="ident" id="5270362"><a href="/go/parser/parser.go.html#5270268">pos</a></span><span class="op" id="5270365">,</span>&nbsp;<span class="ident" id="5270367">Tok</span><span class="op" id="5270370">:</span>&nbsp;<span class="ident" id="5270372"><a href="/go/parser/parser.go.html#5270024">tok</a></span><span class="op" id="5270375">,</span>&nbsp;<span class="ident" id="5270377">Rhs</span><span class="op" id="5270380">:</span>&nbsp;<span class="op" id="5270382">[</span><span class="op" id="5270383">]</span><span class="ident" id="5270384"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5270387">.</span><span class="ident" id="5270388">Expr</span><span class="op" id="5270392">{</span><span class="ident" id="5270393"><a href="/go/parser/parser.go.html#5270298">rhs</a></span><span class="op" id="5270396">}</span><span class="op" id="5270397">}</span><br>
<span class="lineno">1990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270403">if</span>&nbsp;<span class="ident" id="5270406"><a href="/go/parser/parser.go.html#5270024">tok</a></span>&nbsp;<span class="op" id="5270410">==</span>&nbsp;<span class="ident" id="5270413"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5270418">.</span><span class="ident" id="5270419">DEFINE</span>&nbsp;<span class="op" id="5270426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270433"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5270434">.</span><span class="ident" id="5270435">shortVarDecl</span><span class="op" id="5270447">(</span><span class="ident" id="5270448"><a href="/go/parser/parser.go.html#5270322">as</a></span><span class="op" id="5270450">,</span>&nbsp;<span class="ident" id="5270452"><a href="/go/parser/parser.go.html#5269694">lhs</a></span><span class="op" id="5270455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270467"><a href="/go/parser/parser.go.html#5269641">comm</a></span>&nbsp;<span class="op" id="5270472">=</span>&nbsp;<span class="ident" id="5270474"><a href="/go/parser/parser.go.html#5270322">as</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270480">}</span>&nbsp;<span class="keyword" id="5270482">else</span>&nbsp;<span class="op" id="5270487">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5270493">//&nbsp;lhs&nbsp;must&nbsp;be&nbsp;single&nbsp;receive&nbsp;operation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270537">if</span>&nbsp;<span class="builtinfunc" id="5270540">len</span><span class="op" id="5270543">(</span><span class="ident" id="5270544"><a href="/go/parser/parser.go.html#5269694">lhs</a></span><span class="op" id="5270547">)</span>&nbsp;<span class="op" id="5270549">&gt;</span>&nbsp;<span class="num" id="5270551">1</span>&nbsp;<span class="op" id="5270553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270560"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5270561">.</span><span class="ident" id="5270562">errorExpected</span><span class="op" id="5270575">(</span><span class="ident" id="5270576"><a href="/go/parser/parser.go.html#5269694">lhs</a></span><span class="op" id="5270579">[</span><span class="num" id="5270580">0</span><span class="op" id="5270581">]</span><span class="op" id="5270582">.</span><span class="ident" id="5270583">Pos</span><span class="op" id="5270586">(</span><span class="op" id="5270587">)</span><span class="op" id="5270588">,</span>&nbsp;<span class="string" id="5270590">&#34;1&nbsp;expression&#34;</span><span class="op" id="5270604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5270611">//&nbsp;continue&nbsp;with&nbsp;first&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270649">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270655"><a href="/go/parser/parser.go.html#5269641">comm</a></span>&nbsp;<span class="op" id="5270660">=</span>&nbsp;<span class="op" id="5270662">&amp;</span><span class="ident" id="5270663"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5270666">.</span><span class="ident" id="5270667">ExprStmt</span><span class="op" id="5270675">{</span><span class="ident" id="5270676">X</span><span class="op" id="5270677">:</span>&nbsp;<span class="ident" id="5270679"><a href="/go/parser/parser.go.html#5269694">lhs</a></span><span class="op" id="5270682">[</span><span class="num" id="5270683">0</span><span class="op" id="5270684">]</span><span class="op" id="5270685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270697">}</span>&nbsp;<span class="keyword" id="5270699">else</span>&nbsp;<span class="op" id="5270704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270708"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5270709">.</span><span class="ident" id="5270710">expect</span><span class="op" id="5270716">(</span><span class="ident" id="5270717"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5270722">.</span><span class="ident" id="5270723">DEFAULT</span><span class="op" id="5270730">)</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270737">colon</span>&nbsp;<span class="op" id="5270743">:=</span>&nbsp;<span class="ident" id="5270746"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5270747">.</span><span class="ident" id="5270748">expect</span><span class="op" id="5270754">(</span><span class="ident" id="5270755"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5270760">.</span><span class="ident" id="5270761">COLON</span><span class="op" id="5270766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270769">body</span>&nbsp;<span class="op" id="5270774">:=</span>&nbsp;<span class="ident" id="5270777"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5270778">.</span><span class="ident" id="5270779">parseStmtList</span><span class="op" id="5270792">(</span><span class="op" id="5270793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270796"><a href="/go/parser/parser.go.html#5269507">p</a></span><span class="op" id="5270797">.</span><span class="ident" id="5270798">closeScope</span><span class="op" id="5270808">(</span><span class="op" id="5270809">)</span><br>
<span class="lineno">2010</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270813">return</span>&nbsp;<span class="op" id="5270820">&amp;</span><span class="ident" id="5270821"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5270824">.</span><span class="ident" id="5270825">CommClause</span><span class="op" id="5270835">{</span><span class="ident" id="5270836">Case</span><span class="op" id="5270840">:</span>&nbsp;<span class="ident" id="5270842"><a href="/go/parser/parser.go.html#5269623">pos</a></span><span class="op" id="5270845">,</span>&nbsp;<span class="ident" id="5270847">Comm</span><span class="op" id="5270851">:</span>&nbsp;<span class="ident" id="5270853"><a href="/go/parser/parser.go.html#5269641">comm</a></span><span class="op" id="5270857">,</span>&nbsp;<span class="ident" id="5270859">Colon</span><span class="op" id="5270864">:</span>&nbsp;<span class="ident" id="5270866"><a href="/go/parser/parser.go.html#5270737">colon</a></span><span class="op" id="5270871">,</span>&nbsp;<span class="ident" id="5270873">Body</span><span class="op" id="5270877">:</span>&nbsp;<span class="ident" id="5270879"><a href="/go/parser/parser.go.html#5270769">body</a></span><span class="op" id="5270883">}</span><br>
<span class="lineno"></span><span class="op" id="5270885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5270888">func</span>&nbsp;<span class="op" id="5270893">(</span><span class="ident" id="5270894">p</span>&nbsp;<span class="op" id="5270896">*</span><span class="ident" id="5270897"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5270903">)</span>&nbsp;<span class="ident" id="5270905">parseSelectStmt</span><span class="op" id="5270920">(</span><span class="op" id="5270921">)</span>&nbsp;<span class="op" id="5270923">*</span><span class="ident" id="5270924"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5270927">.</span><span class="ident" id="5270928">SelectStmt</span>&nbsp;<span class="op" id="5270939">{</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270942">if</span>&nbsp;<span class="ident" id="5270945"><a href="/go/parser/parser.go.html#5270894">p</a></span><span class="op" id="5270946">.</span><span class="ident" id="5270947">trace</span>&nbsp;<span class="op" id="5270953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5270957">defer</span>&nbsp;<span class="ident" id="5270963"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5270965">(</span><span class="ident" id="5270966"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5270971">(</span><span class="ident" id="5270972"><a href="/go/parser/parser.go.html#5270894">p</a></span><span class="op" id="5270973">,</span>&nbsp;<span class="string" id="5270975">&#34;SelectStmt&#34;</span><span class="op" id="5270987">)</span><span class="op" id="5270988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5270991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5270995">pos</span>&nbsp;<span class="op" id="5270999">:=</span>&nbsp;<span class="ident" id="5271002"><a href="/go/parser/parser.go.html#5270894">p</a></span><span class="op" id="5271003">.</span><span class="ident" id="5271004">expect</span><span class="op" id="5271010">(</span><span class="ident" id="5271011"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5271016">.</span><span class="ident" id="5271017">SELECT</span><span class="op" id="5271023">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271026">lbrace</span>&nbsp;<span class="op" id="5271033">:=</span>&nbsp;<span class="ident" id="5271036"><a href="/go/parser/parser.go.html#5270894">p</a></span><span class="op" id="5271037">.</span><span class="ident" id="5271038">expect</span><span class="op" id="5271044">(</span><span class="ident" id="5271045"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5271050">.</span><span class="ident" id="5271051">LBRACE</span><span class="op" id="5271057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5271060">var</span>&nbsp;<span class="ident" id="5271064">list</span>&nbsp;<span class="op" id="5271069">[</span><span class="op" id="5271070">]</span><span class="ident" id="5271071"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5271074">.</span><span class="ident" id="5271075">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5271081">for</span>&nbsp;<span class="ident" id="5271085"><a href="/go/parser/parser.go.html#5270894">p</a></span><span class="op" id="5271086">.</span><span class="ident" id="5271087">tok</span>&nbsp;<span class="op" id="5271091">==</span>&nbsp;<span class="ident" id="5271094"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5271099">.</span><span class="ident" id="5271100">CASE</span>&nbsp;<span class="op" id="5271105">||</span>&nbsp;<span class="ident" id="5271108"><a href="/go/parser/parser.go.html#5270894">p</a></span><span class="op" id="5271109">.</span><span class="ident" id="5271110">tok</span>&nbsp;<span class="op" id="5271114">==</span>&nbsp;<span class="ident" id="5271117"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5271122">.</span><span class="ident" id="5271123">DEFAULT</span>&nbsp;<span class="op" id="5271131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271135"><a href="/go/parser/parser.go.html#5271064">list</a></span>&nbsp;<span class="op" id="5271140">=</span>&nbsp;<span class="builtinfunc" id="5271142">append</span><span class="op" id="5271148">(</span><span class="ident" id="5271149"><a href="/go/parser/parser.go.html#5271064">list</a></span><span class="op" id="5271153">,</span>&nbsp;<span class="ident" id="5271155"><a href="/go/parser/parser.go.html#5270894">p</a></span><span class="op" id="5271156">.</span><span class="ident" id="5271157">parseCommClause</span><span class="op" id="5271172">(</span><span class="op" id="5271173">)</span><span class="op" id="5271174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5271177">}</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271180">rbrace</span>&nbsp;<span class="op" id="5271187">:=</span>&nbsp;<span class="ident" id="5271190"><a href="/go/parser/parser.go.html#5270894">p</a></span><span class="op" id="5271191">.</span><span class="ident" id="5271192">expect</span><span class="op" id="5271198">(</span><span class="ident" id="5271199"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5271204">.</span><span class="ident" id="5271205">RBRACE</span><span class="op" id="5271211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271214"><a href="/go/parser/parser.go.html#5270894">p</a></span><span class="op" id="5271215">.</span><span class="ident" id="5271216">expectSemi</span><span class="op" id="5271226">(</span><span class="op" id="5271227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271230">body</span>&nbsp;<span class="op" id="5271235">:=</span>&nbsp;<span class="op" id="5271238">&amp;</span><span class="ident" id="5271239"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5271242">.</span><span class="ident" id="5271243">BlockStmt</span><span class="op" id="5271252">{</span><span class="ident" id="5271253">Lbrace</span><span class="op" id="5271259">:</span>&nbsp;<span class="ident" id="5271261"><a href="/go/parser/parser.go.html#5271026">lbrace</a></span><span class="op" id="5271267">,</span>&nbsp;<span class="ident" id="5271269">List</span><span class="op" id="5271273">:</span>&nbsp;<span class="ident" id="5271275"><a href="/go/parser/parser.go.html#5271064">list</a></span><span class="op" id="5271279">,</span>&nbsp;<span class="ident" id="5271281">Rbrace</span><span class="op" id="5271287">:</span>&nbsp;<span class="ident" id="5271289"><a href="/go/parser/parser.go.html#5271180">rbrace</a></span><span class="op" id="5271295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5271299">return</span>&nbsp;<span class="op" id="5271306">&amp;</span><span class="ident" id="5271307"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5271310">.</span><span class="ident" id="5271311">SelectStmt</span><span class="op" id="5271321">{</span><span class="ident" id="5271322">Select</span><span class="op" id="5271328">:</span>&nbsp;<span class="ident" id="5271330"><a href="/go/parser/parser.go.html#5270995">pos</a></span><span class="op" id="5271333">,</span>&nbsp;<span class="ident" id="5271335">Body</span><span class="op" id="5271339">:</span>&nbsp;<span class="ident" id="5271341"><a href="/go/parser/parser.go.html#5271230">body</a></span><span class="op" id="5271345">}</span><br>
<span class="lineno">2030</span><span class="op" id="5271347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5271350">func</span>&nbsp;<span class="op" id="5271355">(</span><span class="ident" id="5271356">p</span>&nbsp;<span class="op" id="5271358">*</span><span class="ident" id="5271359"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5271365">)</span>&nbsp;<span class="ident" id="5271367">parseForStmt</span><span class="op" id="5271379">(</span><span class="op" id="5271380">)</span>&nbsp;<span class="ident" id="5271382"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5271385">.</span><span class="ident" id="5271386">Stmt</span>&nbsp;<span class="op" id="5271391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5271394">if</span>&nbsp;<span class="ident" id="5271397"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271398">.</span><span class="ident" id="5271399">trace</span>&nbsp;<span class="op" id="5271405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5271409">defer</span>&nbsp;<span class="ident" id="5271415"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5271417">(</span><span class="ident" id="5271418"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5271423">(</span><span class="ident" id="5271424"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271425">,</span>&nbsp;<span class="string" id="5271427">&#34;ForStmt&#34;</span><span class="op" id="5271436">)</span><span class="op" id="5271437">)</span><br>
<span class="lineno">2035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5271440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271444">pos</span>&nbsp;<span class="op" id="5271448">:=</span>&nbsp;<span class="ident" id="5271451"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271452">.</span><span class="ident" id="5271453">expect</span><span class="op" id="5271459">(</span><span class="ident" id="5271460"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5271465">.</span><span class="ident" id="5271466">FOR</span><span class="op" id="5271469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271472"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271473">.</span><span class="ident" id="5271474">openScope</span><span class="op" id="5271483">(</span><span class="op" id="5271484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5271487">defer</span>&nbsp;<span class="ident" id="5271493"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271494">.</span><span class="ident" id="5271495">closeScope</span><span class="op" id="5271505">(</span><span class="op" id="5271506">)</span><br>
<span class="lineno">2040</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5271510">var</span>&nbsp;<span class="ident" id="5271514">s1</span><span class="op" id="5271516">,</span>&nbsp;<span class="ident" id="5271518">s2</span><span class="op" id="5271520">,</span>&nbsp;<span class="ident" id="5271522">s3</span>&nbsp;<span class="ident" id="5271525"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5271528">.</span><span class="ident" id="5271529">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5271535">var</span>&nbsp;<span class="ident" id="5271539">isRange</span>&nbsp;<span class="builtintype" id="5271547">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5271553">if</span>&nbsp;<span class="ident" id="5271556"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271557">.</span><span class="ident" id="5271558">tok</span>&nbsp;<span class="op" id="5271562">!=</span>&nbsp;<span class="ident" id="5271565"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5271570">.</span><span class="ident" id="5271571">LBRACE</span>&nbsp;<span class="op" id="5271578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271582">prevLev</span>&nbsp;<span class="op" id="5271590">:=</span>&nbsp;<span class="ident" id="5271593"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271594">.</span><span class="ident" id="5271595">exprLev</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271605"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271606">.</span><span class="ident" id="5271607">exprLev</span>&nbsp;<span class="op" id="5271615">=</span>&nbsp;<span class="op" id="5271617">-</span><span class="num" id="5271618">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5271622">if</span>&nbsp;<span class="ident" id="5271625"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271626">.</span><span class="ident" id="5271627">tok</span>&nbsp;<span class="op" id="5271631">!=</span>&nbsp;<span class="ident" id="5271634"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5271639">.</span><span class="ident" id="5271640">SEMICOLON</span>&nbsp;<span class="op" id="5271650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5271655">if</span>&nbsp;<span class="ident" id="5271658"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271659">.</span><span class="ident" id="5271660">tok</span>&nbsp;<span class="op" id="5271664">==</span>&nbsp;<span class="ident" id="5271667"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5271672">.</span><span class="ident" id="5271673">RANGE</span>&nbsp;<span class="op" id="5271679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5271685">//&nbsp;&#34;for&nbsp;range&nbsp;x&#34;&nbsp;(nil&nbsp;lhs&nbsp;in&nbsp;assignment)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271730">pos</span>&nbsp;<span class="op" id="5271734">:=</span>&nbsp;<span class="ident" id="5271737"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271738">.</span><span class="ident" id="5271739">pos</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271747"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271748">.</span><span class="ident" id="5271749">next</span><span class="op" id="5271753">(</span><span class="op" id="5271754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271760">y</span>&nbsp;<span class="op" id="5271762">:=</span>&nbsp;<span class="op" id="5271765">[</span><span class="op" id="5271766">]</span><span class="ident" id="5271767"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5271770">.</span><span class="ident" id="5271771">Expr</span><span class="op" id="5271775">{</span><span class="op" id="5271776">&amp;</span><span class="ident" id="5271777"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5271780">.</span><span class="ident" id="5271781">UnaryExpr</span><span class="op" id="5271790">{</span><span class="ident" id="5271791">OpPos</span><span class="op" id="5271796">:</span>&nbsp;<span class="ident" id="5271798"><a href="/go/parser/parser.go.html#5271730">pos</a></span><span class="op" id="5271801">,</span>&nbsp;<span class="ident" id="5271803">Op</span><span class="op" id="5271805">:</span>&nbsp;<span class="ident" id="5271807"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5271812">.</span><span class="ident" id="5271813">RANGE</span><span class="op" id="5271818">,</span>&nbsp;<span class="ident" id="5271820">X</span><span class="op" id="5271821">:</span>&nbsp;<span class="ident" id="5271823"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271824">.</span><span class="ident" id="5271825">parseRhs</span><span class="op" id="5271833">(</span><span class="op" id="5271834">)</span><span class="op" id="5271835">}</span><span class="op" id="5271836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271842"><a href="/go/parser/parser.go.html#5271518">s2</a></span>&nbsp;<span class="op" id="5271845">=</span>&nbsp;<span class="op" id="5271847">&amp;</span><span class="ident" id="5271848"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5271851">.</span><span class="ident" id="5271852">AssignStmt</span><span class="op" id="5271862">{</span><span class="ident" id="5271863">Rhs</span><span class="op" id="5271866">:</span>&nbsp;<span class="ident" id="5271868"><a href="/go/parser/parser.go.html#5271760">y</a></span><span class="op" id="5271869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271875"><a href="/go/parser/parser.go.html#5271539">isRange</a></span>&nbsp;<span class="op" id="5271883">=</span>&nbsp;<span class="builtintype" id="5271885">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5271893">}</span>&nbsp;<span class="keyword" id="5271895">else</span>&nbsp;<span class="op" id="5271900">{</span><br>
<span class="lineno">2055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5271906"><a href="/go/parser/parser.go.html#5271518">s2</a></span><span class="op" id="5271908">,</span>&nbsp;<span class="ident" id="5271910"><a href="/go/parser/parser.go.html#5271539">isRange</a></span>&nbsp;<span class="op" id="5271918">=</span>&nbsp;<span class="ident" id="5271920"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271921">.</span><span class="ident" id="5271922">parseSimpleStmt</span><span class="op" id="5271937">(</span><span class="ident" id="5271938"><a href="/go/parser/parser.go.html#5261261">rangeOk</a></span><span class="op" id="5271945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5271950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5271954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5271958">if</span>&nbsp;<span class="op" id="5271961">!</span><span class="ident" id="5271962"><a href="/go/parser/parser.go.html#5271539">isRange</a></span>&nbsp;<span class="op" id="5271970">&amp;&amp;</span>&nbsp;<span class="ident" id="5271973"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5271974">.</span><span class="ident" id="5271975">tok</span>&nbsp;<span class="op" id="5271979">==</span>&nbsp;<span class="ident" id="5271982"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5271987">.</span><span class="ident" id="5271988">SEMICOLON</span>&nbsp;<span class="op" id="5271998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272003"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5272004">.</span><span class="ident" id="5272005">next</span><span class="op" id="5272009">(</span><span class="op" id="5272010">)</span><br>
<span class="lineno">2060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272015"><a href="/go/parser/parser.go.html#5271514">s1</a></span>&nbsp;<span class="op" id="5272018">=</span>&nbsp;<span class="ident" id="5272020"><a href="/go/parser/parser.go.html#5271518">s2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272026"><a href="/go/parser/parser.go.html#5271518">s2</a></span>&nbsp;<span class="op" id="5272029">=</span>&nbsp;<span class="ident" id="5272031">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272038">if</span>&nbsp;<span class="ident" id="5272041"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5272042">.</span><span class="ident" id="5272043">tok</span>&nbsp;<span class="op" id="5272047">!=</span>&nbsp;<span class="ident" id="5272050"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5272055">.</span><span class="ident" id="5272056">SEMICOLON</span>&nbsp;<span class="op" id="5272066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272072"><a href="/go/parser/parser.go.html#5271518">s2</a></span><span class="op" id="5272074">,</span>&nbsp;<span class="ident" id="5272076">_</span>&nbsp;<span class="op" id="5272078">=</span>&nbsp;<span class="ident" id="5272080"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5272081">.</span><span class="ident" id="5272082">parseSimpleStmt</span><span class="op" id="5272097">(</span><span class="ident" id="5272098"><a href="/go/parser/parser.go.html#5261238">basic</a></span><span class="op" id="5272103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272108">}</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272113"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5272114">.</span><span class="ident" id="5272115">expectSemi</span><span class="op" id="5272125">(</span><span class="op" id="5272126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272131">if</span>&nbsp;<span class="ident" id="5272134"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5272135">.</span><span class="ident" id="5272136">tok</span>&nbsp;<span class="op" id="5272140">!=</span>&nbsp;<span class="ident" id="5272143"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5272148">.</span><span class="ident" id="5272149">LBRACE</span>&nbsp;<span class="op" id="5272156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272162"><a href="/go/parser/parser.go.html#5271522">s3</a></span><span class="op" id="5272164">,</span>&nbsp;<span class="ident" id="5272166">_</span>&nbsp;<span class="op" id="5272168">=</span>&nbsp;<span class="ident" id="5272170"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5272171">.</span><span class="ident" id="5272172">parseSimpleStmt</span><span class="op" id="5272187">(</span><span class="ident" id="5272188"><a href="/go/parser/parser.go.html#5261238">basic</a></span><span class="op" id="5272193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272202">}</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272206"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5272207">.</span><span class="ident" id="5272208">exprLev</span>&nbsp;<span class="op" id="5272216">=</span>&nbsp;<span class="ident" id="5272218"><a href="/go/parser/parser.go.html#5271582">prevLev</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272231">body</span>&nbsp;<span class="op" id="5272236">:=</span>&nbsp;<span class="ident" id="5272239"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5272240">.</span><span class="ident" id="5272241">parseBlockStmt</span><span class="op" id="5272255">(</span><span class="op" id="5272256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272259"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5272260">.</span><span class="ident" id="5272261">expectSemi</span><span class="op" id="5272271">(</span><span class="op" id="5272272">)</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272276">if</span>&nbsp;<span class="ident" id="5272279"><a href="/go/parser/parser.go.html#5271539">isRange</a></span>&nbsp;<span class="op" id="5272287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272291">as</span>&nbsp;<span class="op" id="5272294">:=</span>&nbsp;<span class="ident" id="5272297"><a href="/go/parser/parser.go.html#5271518">s2</a></span><span class="op" id="5272299">.</span><span class="op" id="5272300">(</span><span class="op" id="5272301">*</span><span class="ident" id="5272302"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5272305">.</span><span class="ident" id="5272306">AssignStmt</span><span class="op" id="5272316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5272320">//&nbsp;check&nbsp;lhs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272335">var</span>&nbsp;<span class="ident" id="5272339">key</span><span class="op" id="5272342">,</span>&nbsp;<span class="ident" id="5272344">value</span>&nbsp;<span class="ident" id="5272350"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5272353">.</span><span class="ident" id="5272354">Expr</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272361">switch</span>&nbsp;<span class="builtinfunc" id="5272368">len</span><span class="op" id="5272371">(</span><span class="ident" id="5272372"><a href="/go/parser/parser.go.html#5272291">as</a></span><span class="op" id="5272374">.</span><span class="ident" id="5272375">Lhs</span><span class="op" id="5272378">)</span>&nbsp;<span class="op" id="5272380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272384">case</span>&nbsp;<span class="num" id="5272389">0</span><span class="op" id="5272390">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5272395">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272414">case</span>&nbsp;<span class="num" id="5272419">1</span><span class="op" id="5272420">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272425"><a href="/go/parser/parser.go.html#5272339">key</a></span>&nbsp;<span class="op" id="5272429">=</span>&nbsp;<span class="ident" id="5272431"><a href="/go/parser/parser.go.html#5272291">as</a></span><span class="op" id="5272433">.</span><span class="ident" id="5272434">Lhs</span><span class="op" id="5272437">[</span><span class="num" id="5272438">0</span><span class="op" id="5272439">]</span><br>
<span class="lineno">2085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272443">case</span>&nbsp;<span class="num" id="5272448">2</span><span class="op" id="5272449">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272454"><a href="/go/parser/parser.go.html#5272339">key</a></span><span class="op" id="5272457">,</span>&nbsp;<span class="ident" id="5272459"><a href="/go/parser/parser.go.html#5272344">value</a></span>&nbsp;<span class="op" id="5272465">=</span>&nbsp;<span class="ident" id="5272467"><a href="/go/parser/parser.go.html#5272291">as</a></span><span class="op" id="5272469">.</span><span class="ident" id="5272470">Lhs</span><span class="op" id="5272473">[</span><span class="num" id="5272474">0</span><span class="op" id="5272475">]</span><span class="op" id="5272476">,</span>&nbsp;<span class="ident" id="5272478"><a href="/go/parser/parser.go.html#5272291">as</a></span><span class="op" id="5272480">.</span><span class="ident" id="5272481">Lhs</span><span class="op" id="5272484">[</span><span class="num" id="5272485">1</span><span class="op" id="5272486">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272490">default</span><span class="op" id="5272497">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272502"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5272503">.</span><span class="ident" id="5272504">errorExpected</span><span class="op" id="5272517">(</span><span class="ident" id="5272518"><a href="/go/parser/parser.go.html#5272291">as</a></span><span class="op" id="5272520">.</span><span class="ident" id="5272521">Lhs</span><span class="op" id="5272524">[</span><span class="builtinfunc" id="5272525">len</span><span class="op" id="5272528">(</span><span class="ident" id="5272529"><a href="/go/parser/parser.go.html#5272291">as</a></span><span class="op" id="5272531">.</span><span class="ident" id="5272532">Lhs</span><span class="op" id="5272535">)</span><span class="op" id="5272536">-</span><span class="num" id="5272537">1</span><span class="op" id="5272538">]</span><span class="op" id="5272539">.</span><span class="ident" id="5272540">Pos</span><span class="op" id="5272543">(</span><span class="op" id="5272544">)</span><span class="op" id="5272545">,</span>&nbsp;<span class="string" id="5272547">&#34;at&nbsp;most&nbsp;2&nbsp;expressions&#34;</span><span class="op" id="5272570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272575">return</span>&nbsp;<span class="op" id="5272582">&amp;</span><span class="ident" id="5272583"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5272586">.</span><span class="ident" id="5272587">BadStmt</span><span class="op" id="5272594">{</span><span class="ident" id="5272595">From</span><span class="op" id="5272599">:</span>&nbsp;<span class="ident" id="5272601"><a href="/go/parser/parser.go.html#5271444">pos</a></span><span class="op" id="5272604">,</span>&nbsp;<span class="ident" id="5272606">To</span><span class="op" id="5272608">:</span>&nbsp;<span class="ident" id="5272610"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5272611">.</span><span class="ident" id="5272612">safePos</span><span class="op" id="5272619">(</span><span class="ident" id="5272620"><a href="/go/parser/parser.go.html#5272231">body</a></span><span class="op" id="5272624">.</span><span class="ident" id="5272625">End</span><span class="op" id="5272628">(</span><span class="op" id="5272629">)</span><span class="op" id="5272630">)</span><span class="op" id="5272631">}</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5272639">//&nbsp;parseSimpleStmt&nbsp;returned&nbsp;a&nbsp;right-hand&nbsp;side&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5272692">//&nbsp;is&nbsp;a&nbsp;single&nbsp;unary&nbsp;expression&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;range&nbsp;x&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272748">x</span>&nbsp;<span class="op" id="5272750">:=</span>&nbsp;<span class="ident" id="5272753"><a href="/go/parser/parser.go.html#5272291">as</a></span><span class="op" id="5272755">.</span><span class="ident" id="5272756">Rhs</span><span class="op" id="5272759">[</span><span class="num" id="5272760">0</span><span class="op" id="5272761">]</span><span class="op" id="5272762">.</span><span class="op" id="5272763">(</span><span class="op" id="5272764">*</span><span class="ident" id="5272765"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5272768">.</span><span class="ident" id="5272769">UnaryExpr</span><span class="op" id="5272778">)</span><span class="op" id="5272779">.</span><span class="ident" id="5272780">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272784">return</span>&nbsp;<span class="op" id="5272791">&amp;</span><span class="ident" id="5272792"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5272795">.</span><span class="ident" id="5272796">RangeStmt</span><span class="op" id="5272805">{</span><br>
<span class="lineno">2095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272810">For</span><span class="op" id="5272813">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5272818"><a href="/go/parser/parser.go.html#5271444">pos</a></span><span class="op" id="5272821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272826">Key</span><span class="op" id="5272829">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5272834"><a href="/go/parser/parser.go.html#5272339">key</a></span><span class="op" id="5272837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272842">Value</span><span class="op" id="5272847">:</span>&nbsp;&nbsp;<span class="ident" id="5272850"><a href="/go/parser/parser.go.html#5272344">value</a></span><span class="op" id="5272855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272860">TokPos</span><span class="op" id="5272866">:</span>&nbsp;<span class="ident" id="5272868"><a href="/go/parser/parser.go.html#5272291">as</a></span><span class="op" id="5272870">.</span><span class="ident" id="5272871">TokPos</span><span class="op" id="5272877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272882">Tok</span><span class="op" id="5272885">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5272890"><a href="/go/parser/parser.go.html#5272291">as</a></span><span class="op" id="5272892">.</span><span class="ident" id="5272893">Tok</span><span class="op" id="5272896">,</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272901">X</span><span class="op" id="5272902">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5272909"><a href="/go/parser/parser.go.html#5272748">x</a></span><span class="op" id="5272910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272915">Body</span><span class="op" id="5272919">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5272923"><a href="/go/parser/parser.go.html#5272231">body</a></span><span class="op" id="5272927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5272934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5272938">//&nbsp;regular&nbsp;for&nbsp;statement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5272964">return</span>&nbsp;<span class="op" id="5272971">&amp;</span><span class="ident" id="5272972"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5272975">.</span><span class="ident" id="5272976">ForStmt</span><span class="op" id="5272983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5272987">For</span><span class="op" id="5272990">:</span>&nbsp;&nbsp;<span class="ident" id="5272993"><a href="/go/parser/parser.go.html#5271444">pos</a></span><span class="op" id="5272996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273000">Init</span><span class="op" id="5273004">:</span>&nbsp;<span class="ident" id="5273006"><a href="/go/parser/parser.go.html#5271514">s1</a></span><span class="op" id="5273008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273012">Cond</span><span class="op" id="5273016">:</span>&nbsp;<span class="ident" id="5273018"><a href="/go/parser/parser.go.html#5271356">p</a></span><span class="op" id="5273019">.</span><span class="ident" id="5273020">makeExpr</span><span class="op" id="5273028">(</span><span class="ident" id="5273029"><a href="/go/parser/parser.go.html#5271518">s2</a></span><span class="op" id="5273031">,</span>&nbsp;<span class="string" id="5273033">&#34;boolean&nbsp;or&nbsp;range&nbsp;expression&#34;</span><span class="op" id="5273062">)</span><span class="op" id="5273063">,</span><br>
<span class="lineno">2110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273067">Post</span><span class="op" id="5273071">:</span>&nbsp;<span class="ident" id="5273073"><a href="/go/parser/parser.go.html#5271522">s3</a></span><span class="op" id="5273075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273079">Body</span><span class="op" id="5273083">:</span>&nbsp;<span class="ident" id="5273085"><a href="/go/parser/parser.go.html#5272231">body</a></span><span class="op" id="5273089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5273092">}</span><br>
<span class="lineno"></span><span class="op" id="5273094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2115</span><span class="keyword" id="5273097">func</span>&nbsp;<span class="op" id="5273102">(</span><span class="ident" id="5273103">p</span>&nbsp;<span class="op" id="5273105">*</span><span class="ident" id="5273106"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5273112">)</span>&nbsp;<span class="ident" id="5273114">parseStmt</span><span class="op" id="5273123">(</span><span class="op" id="5273124">)</span>&nbsp;<span class="op" id="5273126">(</span><span class="ident" id="5273127">s</span>&nbsp;<span class="ident" id="5273129"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5273132">.</span><span class="ident" id="5273133">Stmt</span><span class="op" id="5273137">)</span>&nbsp;<span class="op" id="5273139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273142">if</span>&nbsp;<span class="ident" id="5273145"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5273146">.</span><span class="ident" id="5273147">trace</span>&nbsp;<span class="op" id="5273153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273157">defer</span>&nbsp;<span class="ident" id="5273163"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5273165">(</span><span class="ident" id="5273166"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5273171">(</span><span class="ident" id="5273172"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5273173">,</span>&nbsp;<span class="string" id="5273175">&#34;Statement&#34;</span><span class="op" id="5273186">)</span><span class="op" id="5273187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5273190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273194">switch</span>&nbsp;<span class="ident" id="5273201"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5273202">.</span><span class="ident" id="5273203">tok</span>&nbsp;<span class="op" id="5273207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273210">case</span>&nbsp;<span class="ident" id="5273215"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273220">.</span><span class="ident" id="5273221">CONST</span><span class="op" id="5273226">,</span>&nbsp;<span class="ident" id="5273228"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273233">.</span><span class="ident" id="5273234">TYPE</span><span class="op" id="5273238">,</span>&nbsp;<span class="ident" id="5273240"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273245">.</span><span class="ident" id="5273246">VAR</span><span class="op" id="5273249">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273253"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5273255">=</span>&nbsp;<span class="op" id="5273257">&amp;</span><span class="ident" id="5273258"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5273261">.</span><span class="ident" id="5273262">DeclStmt</span><span class="op" id="5273270">{</span><span class="ident" id="5273271">Decl</span><span class="op" id="5273275">:</span>&nbsp;<span class="ident" id="5273277"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5273278">.</span><span class="ident" id="5273279">parseDecl</span><span class="op" id="5273288">(</span><span class="ident" id="5273289"><a href="/go/parser/parser.go.html#5231977">syncStmt</a></span><span class="op" id="5273297">)</span><span class="op" id="5273298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273301">case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5273308">//&nbsp;tokens&nbsp;that&nbsp;may&nbsp;start&nbsp;an&nbsp;expression</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273349"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273354">.</span><span class="ident" id="5273355">IDENT</span><span class="op" id="5273360">,</span>&nbsp;<span class="ident" id="5273362"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273367">.</span><span class="ident" id="5273368">INT</span><span class="op" id="5273371">,</span>&nbsp;<span class="ident" id="5273373"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273378">.</span><span class="ident" id="5273379">FLOAT</span><span class="op" id="5273384">,</span>&nbsp;<span class="ident" id="5273386"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273391">.</span><span class="ident" id="5273392">IMAG</span><span class="op" id="5273396">,</span>&nbsp;<span class="ident" id="5273398"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273403">.</span><span class="ident" id="5273404">CHAR</span><span class="op" id="5273408">,</span>&nbsp;<span class="ident" id="5273410"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273415">.</span><span class="ident" id="5273416">STRING</span><span class="op" id="5273422">,</span>&nbsp;<span class="ident" id="5273424"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273429">.</span><span class="ident" id="5273430">FUNC</span><span class="op" id="5273434">,</span>&nbsp;<span class="ident" id="5273436"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273441">.</span><span class="ident" id="5273442">LPAREN</span><span class="op" id="5273448">,</span>&nbsp;<span class="comment" id="5273450">//&nbsp;operands</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273464"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273469">.</span><span class="ident" id="5273470">LBRACK</span><span class="op" id="5273476">,</span>&nbsp;<span class="ident" id="5273478"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273483">.</span><span class="ident" id="5273484">STRUCT</span><span class="op" id="5273490">,</span>&nbsp;<span class="comment" id="5273492">//&nbsp;composite&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273513"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273518">.</span><span class="ident" id="5273519">ADD</span><span class="op" id="5273522">,</span>&nbsp;<span class="ident" id="5273524"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273529">.</span><span class="ident" id="5273530">SUB</span><span class="op" id="5273533">,</span>&nbsp;<span class="ident" id="5273535"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273540">.</span><span class="ident" id="5273541">MUL</span><span class="op" id="5273544">,</span>&nbsp;<span class="ident" id="5273546"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273551">.</span><span class="ident" id="5273552">AND</span><span class="op" id="5273555">,</span>&nbsp;<span class="ident" id="5273557"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273562">.</span><span class="ident" id="5273563">XOR</span><span class="op" id="5273566">,</span>&nbsp;<span class="ident" id="5273568"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273573">.</span><span class="ident" id="5273574">ARROW</span><span class="op" id="5273579">,</span>&nbsp;<span class="ident" id="5273581"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273586">.</span><span class="ident" id="5273587">NOT</span><span class="op" id="5273590">:</span>&nbsp;<span class="comment" id="5273592">//&nbsp;unary&nbsp;operators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273613"><a href="/go/parser/parser.go.html#5273127">s</a></span><span class="op" id="5273614">,</span>&nbsp;<span class="ident" id="5273616">_</span>&nbsp;<span class="op" id="5273618">=</span>&nbsp;<span class="ident" id="5273620"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5273621">.</span><span class="ident" id="5273622">parseSimpleStmt</span><span class="op" id="5273637">(</span><span class="ident" id="5273638"><a href="/go/parser/parser.go.html#5261252">labelOk</a></span><span class="op" id="5273645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5273649">//&nbsp;because&nbsp;of&nbsp;the&nbsp;required&nbsp;look-ahead,&nbsp;labeled&nbsp;statements&nbsp;are</span><br>
<span class="lineno">2130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5273713">//&nbsp;parsed&nbsp;by&nbsp;parseSimpleStmt&nbsp;-&nbsp;don&#39;t&nbsp;expect&nbsp;a&nbsp;semicolon&nbsp;after</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5273777">//&nbsp;them</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273787">if</span>&nbsp;<span class="ident" id="5273790">_</span><span class="op" id="5273791">,</span>&nbsp;<span class="ident" id="5273793">isLabeledStmt</span>&nbsp;<span class="op" id="5273807">:=</span>&nbsp;<span class="ident" id="5273810"><a href="/go/parser/parser.go.html#5273127">s</a></span><span class="op" id="5273811">.</span><span class="op" id="5273812">(</span><span class="op" id="5273813">*</span><span class="ident" id="5273814"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5273817">.</span><span class="ident" id="5273818">LabeledStmt</span><span class="op" id="5273829">)</span><span class="op" id="5273830">;</span>&nbsp;<span class="op" id="5273832">!</span><span class="ident" id="5273833"><a href="/go/parser/parser.go.html#5273793">isLabeledStmt</a></span>&nbsp;<span class="op" id="5273847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273852"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5273853">.</span><span class="ident" id="5273854">expectSemi</span><span class="op" id="5273864">(</span><span class="op" id="5273865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5273869">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273872">case</span>&nbsp;<span class="ident" id="5273877"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273882">.</span><span class="ident" id="5273883">GO</span><span class="op" id="5273885">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273889"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5273891">=</span>&nbsp;<span class="ident" id="5273893"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5273894">.</span><span class="ident" id="5273895">parseGoStmt</span><span class="op" id="5273906">(</span><span class="op" id="5273907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273910">case</span>&nbsp;<span class="ident" id="5273915"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273920">.</span><span class="ident" id="5273921">DEFER</span><span class="op" id="5273926">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273930"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5273932">=</span>&nbsp;<span class="ident" id="5273934"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5273935">.</span><span class="ident" id="5273936">parseDeferStmt</span><span class="op" id="5273950">(</span><span class="op" id="5273951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5273954">case</span>&nbsp;<span class="ident" id="5273959"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5273964">.</span><span class="ident" id="5273965">RETURN</span><span class="op" id="5273971">:</span><br>
<span class="lineno">2140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5273975"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5273977">=</span>&nbsp;<span class="ident" id="5273979"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5273980">.</span><span class="ident" id="5273981">parseReturnStmt</span><span class="op" id="5273996">(</span><span class="op" id="5273997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274000">case</span>&nbsp;<span class="ident" id="5274005"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5274010">.</span><span class="ident" id="5274011">BREAK</span><span class="op" id="5274016">,</span>&nbsp;<span class="ident" id="5274018"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5274023">.</span><span class="ident" id="5274024">CONTINUE</span><span class="op" id="5274032">,</span>&nbsp;<span class="ident" id="5274034"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5274039">.</span><span class="ident" id="5274040">GOTO</span><span class="op" id="5274044">,</span>&nbsp;<span class="ident" id="5274046"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5274051">.</span><span class="ident" id="5274052">FALLTHROUGH</span><span class="op" id="5274063">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274067"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5274069">=</span>&nbsp;<span class="ident" id="5274071"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274072">.</span><span class="ident" id="5274073">parseBranchStmt</span><span class="op" id="5274088">(</span><span class="ident" id="5274089"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274090">.</span><span class="ident" id="5274091">tok</span><span class="op" id="5274094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274097">case</span>&nbsp;<span class="ident" id="5274102"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5274107">.</span><span class="ident" id="5274108">LBRACE</span><span class="op" id="5274114">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274118"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5274120">=</span>&nbsp;<span class="ident" id="5274122"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274123">.</span><span class="ident" id="5274124">parseBlockStmt</span><span class="op" id="5274138">(</span><span class="op" id="5274139">)</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274143"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274144">.</span><span class="ident" id="5274145">expectSemi</span><span class="op" id="5274155">(</span><span class="op" id="5274156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274159">case</span>&nbsp;<span class="ident" id="5274164"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5274169">.</span><span class="ident" id="5274170">IF</span><span class="op" id="5274172">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274176"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5274178">=</span>&nbsp;<span class="ident" id="5274180"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274181">.</span><span class="ident" id="5274182">parseIfStmt</span><span class="op" id="5274193">(</span><span class="op" id="5274194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274197">case</span>&nbsp;<span class="ident" id="5274202"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5274207">.</span><span class="ident" id="5274208">SWITCH</span><span class="op" id="5274214">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274218"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5274220">=</span>&nbsp;<span class="ident" id="5274222"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274223">.</span><span class="ident" id="5274224">parseSwitchStmt</span><span class="op" id="5274239">(</span><span class="op" id="5274240">)</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274243">case</span>&nbsp;<span class="ident" id="5274248"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5274253">.</span><span class="ident" id="5274254">SELECT</span><span class="op" id="5274260">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274264"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5274266">=</span>&nbsp;<span class="ident" id="5274268"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274269">.</span><span class="ident" id="5274270">parseSelectStmt</span><span class="op" id="5274285">(</span><span class="op" id="5274286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274289">case</span>&nbsp;<span class="ident" id="5274294"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5274299">.</span><span class="ident" id="5274300">FOR</span><span class="op" id="5274303">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274307"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5274309">=</span>&nbsp;<span class="ident" id="5274311"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274312">.</span><span class="ident" id="5274313">parseForStmt</span><span class="op" id="5274325">(</span><span class="op" id="5274326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274329">case</span>&nbsp;<span class="ident" id="5274334"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5274339">.</span><span class="ident" id="5274340">SEMICOLON</span><span class="op" id="5274349">:</span><br>
<span class="lineno">2155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274353"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5274355">=</span>&nbsp;<span class="op" id="5274357">&amp;</span><span class="ident" id="5274358"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5274361">.</span><span class="ident" id="5274362">EmptyStmt</span><span class="op" id="5274371">{</span><span class="ident" id="5274372">Semicolon</span><span class="op" id="5274381">:</span>&nbsp;<span class="ident" id="5274383"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274384">.</span><span class="ident" id="5274385">pos</span><span class="op" id="5274388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274392"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274393">.</span><span class="ident" id="5274394">next</span><span class="op" id="5274398">(</span><span class="op" id="5274399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274402">case</span>&nbsp;<span class="ident" id="5274407"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5274412">.</span><span class="ident" id="5274413">RBRACE</span><span class="op" id="5274419">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5274423">//&nbsp;a&nbsp;semicolon&nbsp;may&nbsp;be&nbsp;omitted&nbsp;before&nbsp;a&nbsp;closing&nbsp;&#34;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274476"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5274478">=</span>&nbsp;<span class="op" id="5274480">&amp;</span><span class="ident" id="5274481"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5274484">.</span><span class="ident" id="5274485">EmptyStmt</span><span class="op" id="5274494">{</span><span class="ident" id="5274495">Semicolon</span><span class="op" id="5274504">:</span>&nbsp;<span class="ident" id="5274506"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274507">.</span><span class="ident" id="5274508">pos</span><span class="op" id="5274511">}</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274514">default</span><span class="op" id="5274521">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5274525">//&nbsp;no&nbsp;statement&nbsp;found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274549">pos</span>&nbsp;<span class="op" id="5274553">:=</span>&nbsp;<span class="ident" id="5274556"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274557">.</span><span class="ident" id="5274558">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274564"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274565">.</span><span class="ident" id="5274566">errorExpected</span><span class="op" id="5274579">(</span><span class="ident" id="5274580"><a href="/go/parser/parser.go.html#5274549">pos</a></span><span class="op" id="5274583">,</span>&nbsp;<span class="string" id="5274585">&#34;statement&#34;</span><span class="op" id="5274596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274600"><a href="/go/parser/parser.go.html#5231977">syncStmt</a></span><span class="op" id="5274608">(</span><span class="ident" id="5274609"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274610">)</span><br>
<span class="lineno">2165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274614"><a href="/go/parser/parser.go.html#5273127">s</a></span>&nbsp;<span class="op" id="5274616">=</span>&nbsp;<span class="op" id="5274618">&amp;</span><span class="ident" id="5274619"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5274622">.</span><span class="ident" id="5274623">BadStmt</span><span class="op" id="5274630">{</span><span class="ident" id="5274631">From</span><span class="op" id="5274635">:</span>&nbsp;<span class="ident" id="5274637"><a href="/go/parser/parser.go.html#5274549">pos</a></span><span class="op" id="5274640">,</span>&nbsp;<span class="ident" id="5274642">To</span><span class="op" id="5274644">:</span>&nbsp;<span class="ident" id="5274646"><a href="/go/parser/parser.go.html#5273103">p</a></span><span class="op" id="5274647">.</span><span class="ident" id="5274648">pos</span><span class="op" id="5274651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5274654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274658">return</span><br>
<span class="lineno"></span><span class="op" id="5274665">}</span><br>
<span class="lineno">2170</span><br>
<span class="lineno"></span><span class="comment" id="5274668">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5274748">//&nbsp;Declarations</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5274765">type</span>&nbsp;<span class="ident" id="5274770">parseSpecFunction</span>&nbsp;<span class="keyword" id="5274788">func</span><span class="op" id="5274792">(</span><span class="ident" id="5274793">doc</span>&nbsp;<span class="op" id="5274797">*</span><span class="ident" id="5274798"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5274801">.</span><span class="ident" id="5274802">CommentGroup</span><span class="op" id="5274814">,</span>&nbsp;<span class="ident" id="5274816">keyword</span>&nbsp;<span class="ident" id="5274824"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5274829">.</span><span class="ident" id="5274830">Token</span><span class="op" id="5274835">,</span>&nbsp;<span class="ident" id="5274837">iota</span>&nbsp;<span class="builtintype" id="5274842">int</span><span class="op" id="5274845">)</span>&nbsp;<span class="ident" id="5274847"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5274850">.</span><span class="ident" id="5274851">Spec</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span><span class="keyword" id="5274857">func</span>&nbsp;<span class="ident" id="5274862">isValidImport</span><span class="op" id="5274875">(</span><span class="ident" id="5274876">lit</span>&nbsp;<span class="builtintype" id="5274880">string</span><span class="op" id="5274886">)</span>&nbsp;<span class="builtintype" id="5274888">bool</span>&nbsp;<span class="op" id="5274893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5274896">const</span>&nbsp;<span class="ident" id="5274902">illegalChars</span>&nbsp;<span class="op" id="5274915">=</span>&nbsp;<span class="string" id="5274917">`!&#34;#$%&amp;&#39;()*,:;&lt;=&gt;?[\]^{|}`</span>&nbsp;<span class="op" id="5274944">+</span>&nbsp;<span class="string" id="5274946">&#34;`\uFFFD&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5274957">s</span><span class="op" id="5274958">,</span>&nbsp;<span class="ident" id="5274960">_</span>&nbsp;<span class="op" id="5274962">:=</span>&nbsp;<span class="ident" id="5274965"><a href="/go/parser/parser.go.html#5220012">strconv</a></span><span class="op" id="5274972">.</span><span class="ident" id="5274973">Unquote</span><span class="op" id="5274980">(</span><span class="ident" id="5274981"><a href="/go/parser/parser.go.html#5274876">lit</a></span><span class="op" id="5274984">)</span>&nbsp;<span class="comment" id="5274986">//&nbsp;go/scanner&nbsp;returns&nbsp;a&nbsp;legal&nbsp;string&nbsp;literal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275032">for</span>&nbsp;<span class="ident" id="5275036">_</span><span class="op" id="5275037">,</span>&nbsp;<span class="ident" id="5275039">r</span>&nbsp;<span class="op" id="5275041">:=</span>&nbsp;<span class="keyword" id="5275044">range</span>&nbsp;<span class="ident" id="5275050"><a href="/go/parser/parser.go.html#5274957">s</a></span>&nbsp;<span class="op" id="5275052">{</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275056">if</span>&nbsp;<span class="op" id="5275059">!</span><span class="ident" id="5275060"><a href="/go/parser/parser.go.html#5220034">unicode</a></span><span class="op" id="5275067">.</span><span class="ident" id="5275068">IsGraphic</span><span class="op" id="5275077">(</span><span class="ident" id="5275078"><a href="/go/parser/parser.go.html#5275039">r</a></span><span class="op" id="5275079">)</span>&nbsp;<span class="op" id="5275081">||</span>&nbsp;<span class="ident" id="5275084"><a href="/go/parser/parser.go.html#5220034">unicode</a></span><span class="op" id="5275091">.</span><span class="ident" id="5275092">IsSpace</span><span class="op" id="5275099">(</span><span class="ident" id="5275100"><a href="/go/parser/parser.go.html#5275039">r</a></span><span class="op" id="5275101">)</span>&nbsp;<span class="op" id="5275103">||</span>&nbsp;<span class="ident" id="5275106"><a href="/go/parser/parser.go.html#5220023">strings</a></span><span class="op" id="5275113">.</span><span class="ident" id="5275114">ContainsRune</span><span class="op" id="5275126">(</span><span class="ident" id="5275127"><a href="/go/parser/parser.go.html#5274902">illegalChars</a></span><span class="op" id="5275139">,</span>&nbsp;<span class="ident" id="5275141"><a href="/go/parser/parser.go.html#5275039">r</a></span><span class="op" id="5275142">)</span>&nbsp;<span class="op" id="5275144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275149">return</span>&nbsp;<span class="builtintype" id="5275156">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5275164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5275167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275170">return</span>&nbsp;<span class="ident" id="5275177"><a href="/go/parser/parser.go.html#5274957">s</a></span>&nbsp;<span class="op" id="5275179">!=</span>&nbsp;<span class="string" id="5275182">&#34;&#34;</span><br>
<span class="lineno">2185</span><span class="op" id="5275185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5275188">func</span>&nbsp;<span class="op" id="5275193">(</span><span class="ident" id="5275194">p</span>&nbsp;<span class="op" id="5275196">*</span><span class="ident" id="5275197"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5275203">)</span>&nbsp;<span class="ident" id="5275205">parseImportSpec</span><span class="op" id="5275220">(</span><span class="ident" id="5275221">doc</span>&nbsp;<span class="op" id="5275225">*</span><span class="ident" id="5275226"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5275229">.</span><span class="ident" id="5275230">CommentGroup</span><span class="op" id="5275242">,</span>&nbsp;<span class="ident" id="5275244">_</span>&nbsp;<span class="ident" id="5275246"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5275251">.</span><span class="ident" id="5275252">Token</span><span class="op" id="5275257">,</span>&nbsp;<span class="ident" id="5275259">_</span>&nbsp;<span class="builtintype" id="5275261">int</span><span class="op" id="5275264">)</span>&nbsp;<span class="ident" id="5275266"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5275269">.</span><span class="ident" id="5275270">Spec</span>&nbsp;<span class="op" id="5275275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275278">if</span>&nbsp;<span class="ident" id="5275281"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275282">.</span><span class="ident" id="5275283">trace</span>&nbsp;<span class="op" id="5275289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275293">defer</span>&nbsp;<span class="ident" id="5275299"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5275301">(</span><span class="ident" id="5275302"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5275307">(</span><span class="ident" id="5275308"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275309">,</span>&nbsp;<span class="string" id="5275311">&#34;ImportSpec&#34;</span><span class="op" id="5275323">)</span><span class="op" id="5275324">)</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5275327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275331">var</span>&nbsp;<span class="ident" id="5275335">ident</span>&nbsp;<span class="op" id="5275341">*</span><span class="ident" id="5275342"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5275345">.</span><span class="ident" id="5275346">Ident</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275353">switch</span>&nbsp;<span class="ident" id="5275360"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275361">.</span><span class="ident" id="5275362">tok</span>&nbsp;<span class="op" id="5275366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275369">case</span>&nbsp;<span class="ident" id="5275374"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5275379">.</span><span class="ident" id="5275380">PERIOD</span><span class="op" id="5275386">:</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275390"><a href="/go/parser/parser.go.html#5275335">ident</a></span>&nbsp;<span class="op" id="5275396">=</span>&nbsp;<span class="op" id="5275398">&amp;</span><span class="ident" id="5275399"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5275402">.</span><span class="ident" id="5275403">Ident</span><span class="op" id="5275408">{</span><span class="ident" id="5275409">NamePos</span><span class="op" id="5275416">:</span>&nbsp;<span class="ident" id="5275418"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275419">.</span><span class="ident" id="5275420">pos</span><span class="op" id="5275423">,</span>&nbsp;<span class="ident" id="5275425">Name</span><span class="op" id="5275429">:</span>&nbsp;<span class="string" id="5275431">&#34;.&#34;</span><span class="op" id="5275434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275438"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275439">.</span><span class="ident" id="5275440">next</span><span class="op" id="5275444">(</span><span class="op" id="5275445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275448">case</span>&nbsp;<span class="ident" id="5275453"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5275458">.</span><span class="ident" id="5275459">IDENT</span><span class="op" id="5275464">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275468"><a href="/go/parser/parser.go.html#5275335">ident</a></span>&nbsp;<span class="op" id="5275474">=</span>&nbsp;<span class="ident" id="5275476"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275477">.</span><span class="ident" id="5275478">parseIdent</span><span class="op" id="5275488">(</span><span class="op" id="5275489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5275492">}</span><br>
<span class="lineno">2200</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275496">pos</span>&nbsp;<span class="op" id="5275500">:=</span>&nbsp;<span class="ident" id="5275503"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275504">.</span><span class="ident" id="5275505">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275510">var</span>&nbsp;<span class="ident" id="5275514">path</span>&nbsp;<span class="builtintype" id="5275519">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275527">if</span>&nbsp;<span class="ident" id="5275530"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275531">.</span><span class="ident" id="5275532">tok</span>&nbsp;<span class="op" id="5275536">==</span>&nbsp;<span class="ident" id="5275539"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5275544">.</span><span class="ident" id="5275545">STRING</span>&nbsp;<span class="op" id="5275552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275556"><a href="/go/parser/parser.go.html#5275514">path</a></span>&nbsp;<span class="op" id="5275561">=</span>&nbsp;<span class="ident" id="5275563"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275564">.</span><span class="ident" id="5275565">lit</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5275571">if</span>&nbsp;<span class="op" id="5275574">!</span><span class="ident" id="5275575"><a href="/go/parser/parser.go.html#5274862">isValidImport</a></span><span class="op" id="5275588">(</span><span class="ident" id="5275589"><a href="/go/parser/parser.go.html#5275514">path</a></span><span class="op" id="5275593">)</span>&nbsp;<span class="op" id="5275595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275600"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275601">.</span><span class="builtintype" id="5275602">error</span><span class="op" id="5275607">(</span><span class="ident" id="5275608"><a href="/go/parser/parser.go.html#5275496">pos</a></span><span class="op" id="5275611">,</span>&nbsp;<span class="string" id="5275613">&#34;invalid&nbsp;import&nbsp;path:&nbsp;&#34;</span><span class="op" id="5275636">+</span><span class="ident" id="5275637"><a href="/go/parser/parser.go.html#5275514">path</a></span><span class="op" id="5275641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5275645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275649"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275650">.</span><span class="ident" id="5275651">next</span><span class="op" id="5275655">(</span><span class="op" id="5275656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5275659">}</span>&nbsp;<span class="keyword" id="5275661">else</span>&nbsp;<span class="op" id="5275666">{</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275670"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275671">.</span><span class="ident" id="5275672">expect</span><span class="op" id="5275678">(</span><span class="ident" id="5275679"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5275684">.</span><span class="ident" id="5275685">STRING</span><span class="op" id="5275691">)</span>&nbsp;<span class="comment" id="5275693">//&nbsp;use&nbsp;expect()&nbsp;error&nbsp;handling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5275725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275728"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275729">.</span><span class="ident" id="5275730">expectSemi</span><span class="op" id="5275740">(</span><span class="op" id="5275741">)</span>&nbsp;<span class="comment" id="5275743">//&nbsp;call&nbsp;before&nbsp;accessing&nbsp;p.linecomment</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5275784">//&nbsp;collect&nbsp;imports</span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275804">spec</span>&nbsp;<span class="op" id="5275809">:=</span>&nbsp;<span class="op" id="5275812">&amp;</span><span class="ident" id="5275813"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5275816">.</span><span class="ident" id="5275817">ImportSpec</span><span class="op" id="5275827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275831">Doc</span><span class="op" id="5275834">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5275840"><a href="/go/parser/parser.go.html#5275221">doc</a></span><span class="op" id="5275843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275847">Name</span><span class="op" id="5275851">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5275856"><a href="/go/parser/parser.go.html#5275335">ident</a></span><span class="op" id="5275861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275865">Path</span><span class="op" id="5275869">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5275874">&amp;</span><span class="ident" id="5275875"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5275878">.</span><span class="ident" id="5275879">BasicLit</span><span class="op" id="5275887">{</span><span class="ident" id="5275888">ValuePos</span><span class="op" id="5275896">:</span>&nbsp;<span class="ident" id="5275898"><a href="/go/parser/parser.go.html#5275496">pos</a></span><span class="op" id="5275901">,</span>&nbsp;<span class="ident" id="5275903">Kind</span><span class="op" id="5275907">:</span>&nbsp;<span class="ident" id="5275909"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5275914">.</span><span class="ident" id="5275915">STRING</span><span class="op" id="5275921">,</span>&nbsp;<span class="ident" id="5275923">Value</span><span class="op" id="5275928">:</span>&nbsp;<span class="ident" id="5275930"><a href="/go/parser/parser.go.html#5275514">path</a></span><span class="op" id="5275934">}</span><span class="op" id="5275935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275939">Comment</span><span class="op" id="5275946">:</span>&nbsp;<span class="ident" id="5275948"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275949">.</span><span class="ident" id="5275950">lineComment</span><span class="op" id="5275961">,</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5275964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275967"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275968">.</span><span class="ident" id="5275969">imports</span>&nbsp;<span class="op" id="5275977">=</span>&nbsp;<span class="builtinfunc" id="5275979">append</span><span class="op" id="5275985">(</span><span class="ident" id="5275986"><a href="/go/parser/parser.go.html#5275194">p</a></span><span class="op" id="5275987">.</span><span class="ident" id="5275988">imports</span><span class="op" id="5275995">,</span>&nbsp;<span class="ident" id="5275997"><a href="/go/parser/parser.go.html#5275804">spec</a></span><span class="op" id="5276001">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5276005">return</span>&nbsp;<span class="ident" id="5276012"><a href="/go/parser/parser.go.html#5275804">spec</a></span><br>
<span class="lineno"></span><span class="op" id="5276017">}</span><br>
<span class="lineno">2225</span><br>
<span class="lineno"></span><span class="keyword" id="5276020">func</span>&nbsp;<span class="op" id="5276025">(</span><span class="ident" id="5276026">p</span>&nbsp;<span class="op" id="5276028">*</span><span class="ident" id="5276029"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5276035">)</span>&nbsp;<span class="ident" id="5276037">parseValueSpec</span><span class="op" id="5276051">(</span><span class="ident" id="5276052">doc</span>&nbsp;<span class="op" id="5276056">*</span><span class="ident" id="5276057"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5276060">.</span><span class="ident" id="5276061">CommentGroup</span><span class="op" id="5276073">,</span>&nbsp;<span class="ident" id="5276075">keyword</span>&nbsp;<span class="ident" id="5276083"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5276088">.</span><span class="ident" id="5276089">Token</span><span class="op" id="5276094">,</span>&nbsp;<span class="ident" id="5276096">iota</span>&nbsp;<span class="builtintype" id="5276101">int</span><span class="op" id="5276104">)</span>&nbsp;<span class="ident" id="5276106"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5276109">.</span><span class="ident" id="5276110">Spec</span>&nbsp;<span class="op" id="5276115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5276118">if</span>&nbsp;<span class="ident" id="5276121"><a href="/go/parser/parser.go.html#5276026">p</a></span><span class="op" id="5276122">.</span><span class="ident" id="5276123">trace</span>&nbsp;<span class="op" id="5276129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5276133">defer</span>&nbsp;<span class="ident" id="5276139"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5276141">(</span><span class="ident" id="5276142"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5276147">(</span><span class="ident" id="5276148"><a href="/go/parser/parser.go.html#5276026">p</a></span><span class="op" id="5276149">,</span>&nbsp;<span class="ident" id="5276151"><a href="/go/parser/parser.go.html#5276075">keyword</a></span><span class="op" id="5276158">.</span><span class="ident" id="5276159">String</span><span class="op" id="5276165">(</span><span class="op" id="5276166">)</span><span class="op" id="5276167">+</span><span class="string" id="5276168">&#34;Spec&#34;</span><span class="op" id="5276174">)</span><span class="op" id="5276175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5276178">}</span><br>
<span class="lineno">2230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276182">idents</span>&nbsp;<span class="op" id="5276189">:=</span>&nbsp;<span class="ident" id="5276192"><a href="/go/parser/parser.go.html#5276026">p</a></span><span class="op" id="5276193">.</span><span class="ident" id="5276194">parseIdentList</span><span class="op" id="5276208">(</span><span class="op" id="5276209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276212">typ</span>&nbsp;<span class="op" id="5276216">:=</span>&nbsp;<span class="ident" id="5276219"><a href="/go/parser/parser.go.html#5276026">p</a></span><span class="op" id="5276220">.</span><span class="ident" id="5276221">tryType</span><span class="op" id="5276228">(</span><span class="op" id="5276229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5276232">var</span>&nbsp;<span class="ident" id="5276236">values</span>&nbsp;<span class="op" id="5276243">[</span><span class="op" id="5276244">]</span><span class="ident" id="5276245"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5276248">.</span><span class="ident" id="5276249">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5276255">//&nbsp;always&nbsp;permit&nbsp;optional&nbsp;initialization&nbsp;for&nbsp;more&nbsp;tolerant&nbsp;parsing</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5276323">if</span>&nbsp;<span class="ident" id="5276326"><a href="/go/parser/parser.go.html#5276026">p</a></span><span class="op" id="5276327">.</span><span class="ident" id="5276328">tok</span>&nbsp;<span class="op" id="5276332">==</span>&nbsp;<span class="ident" id="5276335"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5276340">.</span><span class="ident" id="5276341">ASSIGN</span>&nbsp;<span class="op" id="5276348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276352"><a href="/go/parser/parser.go.html#5276026">p</a></span><span class="op" id="5276353">.</span><span class="ident" id="5276354">next</span><span class="op" id="5276358">(</span><span class="op" id="5276359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276363"><a href="/go/parser/parser.go.html#5276236">values</a></span>&nbsp;<span class="op" id="5276370">=</span>&nbsp;<span class="ident" id="5276372"><a href="/go/parser/parser.go.html#5276026">p</a></span><span class="op" id="5276373">.</span><span class="ident" id="5276374">parseRhsList</span><span class="op" id="5276386">(</span><span class="op" id="5276387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5276390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276393"><a href="/go/parser/parser.go.html#5276026">p</a></span><span class="op" id="5276394">.</span><span class="ident" id="5276395">expectSemi</span><span class="op" id="5276405">(</span><span class="op" id="5276406">)</span>&nbsp;<span class="comment" id="5276408">//&nbsp;call&nbsp;before&nbsp;accessing&nbsp;p.linecomment</span><br>
<span class="lineno">2240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5276449">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;scope&nbsp;of&nbsp;a&nbsp;constant&nbsp;or&nbsp;variable&nbsp;identifier&nbsp;declared&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5276525">//&nbsp;a&nbsp;function&nbsp;begins&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;ConstSpec&nbsp;or&nbsp;VarSpec&nbsp;and&nbsp;ends&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5276598">//&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;innermost&nbsp;containing&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5276645">//&nbsp;(Global&nbsp;identifiers&nbsp;are&nbsp;resolved&nbsp;in&nbsp;a&nbsp;separate&nbsp;phase&nbsp;after&nbsp;parsing.)</span><br>
<span class="lineno">2245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276718">spec</span>&nbsp;<span class="op" id="5276723">:=</span>&nbsp;<span class="op" id="5276726">&amp;</span><span class="ident" id="5276727"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5276730">.</span><span class="ident" id="5276731">ValueSpec</span><span class="op" id="5276740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276744">Doc</span><span class="op" id="5276747">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5276753"><a href="/go/parser/parser.go.html#5276052">doc</a></span><span class="op" id="5276756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276760">Names</span><span class="op" id="5276765">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5276769"><a href="/go/parser/parser.go.html#5276182">idents</a></span><span class="op" id="5276775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276779">Type</span><span class="op" id="5276783">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5276788"><a href="/go/parser/parser.go.html#5276212">typ</a></span><span class="op" id="5276791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276795">Values</span><span class="op" id="5276801">:</span>&nbsp;&nbsp;<span class="ident" id="5276804"><a href="/go/parser/parser.go.html#5276236">values</a></span><span class="op" id="5276810">,</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276814">Comment</span><span class="op" id="5276821">:</span>&nbsp;<span class="ident" id="5276823"><a href="/go/parser/parser.go.html#5276026">p</a></span><span class="op" id="5276824">.</span><span class="ident" id="5276825">lineComment</span><span class="op" id="5276836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5276839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276842">kind</span>&nbsp;<span class="op" id="5276847">:=</span>&nbsp;<span class="ident" id="5276850"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5276853">.</span><span class="ident" id="5276854">Con</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5276859">if</span>&nbsp;<span class="ident" id="5276862"><a href="/go/parser/parser.go.html#5276075">keyword</a></span>&nbsp;<span class="op" id="5276870">==</span>&nbsp;<span class="ident" id="5276873"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5276878">.</span><span class="ident" id="5276879">VAR</span>&nbsp;<span class="op" id="5276883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276887"><a href="/go/parser/parser.go.html#5276842">kind</a></span>&nbsp;<span class="op" id="5276892">=</span>&nbsp;<span class="ident" id="5276894"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5276897">.</span><span class="ident" id="5276898">Var</span><br>
<span class="lineno">2255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5276903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276906"><a href="/go/parser/parser.go.html#5276026">p</a></span><span class="op" id="5276907">.</span><span class="ident" id="5276908">declare</span><span class="op" id="5276915">(</span><span class="ident" id="5276916"><a href="/go/parser/parser.go.html#5276718">spec</a></span><span class="op" id="5276920">,</span>&nbsp;<span class="ident" id="5276922"><a href="/go/parser/parser.go.html#5276096">iota</a></span><span class="op" id="5276926">,</span>&nbsp;<span class="ident" id="5276928"><a href="/go/parser/parser.go.html#5276026">p</a></span><span class="op" id="5276929">.</span><span class="ident" id="5276930">topScope</span><span class="op" id="5276938">,</span>&nbsp;<span class="ident" id="5276940"><a href="/go/parser/parser.go.html#5276842">kind</a></span><span class="op" id="5276944">,</span>&nbsp;<span class="ident" id="5276946"><a href="/go/parser/parser.go.html#5276182">idents</a></span><span class="op" id="5276952">...</span><span class="op" id="5276955">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5276959">return</span>&nbsp;<span class="ident" id="5276966"><a href="/go/parser/parser.go.html#5276718">spec</a></span><br>
<span class="lineno"></span><span class="op" id="5276971">}</span><br>
<span class="lineno">2260</span><br>
<span class="lineno"></span><span class="keyword" id="5276974">func</span>&nbsp;<span class="op" id="5276979">(</span><span class="ident" id="5276980">p</span>&nbsp;<span class="op" id="5276982">*</span><span class="ident" id="5276983"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5276989">)</span>&nbsp;<span class="ident" id="5276991">parseTypeSpec</span><span class="op" id="5277004">(</span><span class="ident" id="5277005">doc</span>&nbsp;<span class="op" id="5277009">*</span><span class="ident" id="5277010"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5277013">.</span><span class="ident" id="5277014">CommentGroup</span><span class="op" id="5277026">,</span>&nbsp;<span class="ident" id="5277028">_</span>&nbsp;<span class="ident" id="5277030"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5277035">.</span><span class="ident" id="5277036">Token</span><span class="op" id="5277041">,</span>&nbsp;<span class="ident" id="5277043">_</span>&nbsp;<span class="builtintype" id="5277045">int</span><span class="op" id="5277048">)</span>&nbsp;<span class="ident" id="5277050"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5277053">.</span><span class="ident" id="5277054">Spec</span>&nbsp;<span class="op" id="5277059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277062">if</span>&nbsp;<span class="ident" id="5277065"><a href="/go/parser/parser.go.html#5276980">p</a></span><span class="op" id="5277066">.</span><span class="ident" id="5277067">trace</span>&nbsp;<span class="op" id="5277073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277077">defer</span>&nbsp;<span class="ident" id="5277083"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5277085">(</span><span class="ident" id="5277086"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5277091">(</span><span class="ident" id="5277092"><a href="/go/parser/parser.go.html#5276980">p</a></span><span class="op" id="5277093">,</span>&nbsp;<span class="string" id="5277095">&#34;TypeSpec&#34;</span><span class="op" id="5277105">)</span><span class="op" id="5277106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5277109">}</span><br>
<span class="lineno">2265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277113">ident</span>&nbsp;<span class="op" id="5277119">:=</span>&nbsp;<span class="ident" id="5277122"><a href="/go/parser/parser.go.html#5276980">p</a></span><span class="op" id="5277123">.</span><span class="ident" id="5277124">parseIdent</span><span class="op" id="5277134">(</span><span class="op" id="5277135">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5277139">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;scope&nbsp;of&nbsp;a&nbsp;type&nbsp;identifier&nbsp;declared&nbsp;inside&nbsp;a&nbsp;function&nbsp;begins</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5277217">//&nbsp;at&nbsp;the&nbsp;identifier&nbsp;in&nbsp;the&nbsp;TypeSpec&nbsp;and&nbsp;ends&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;innermost</span><br>
<span class="lineno">2270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5277292">//&nbsp;containing&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5277314">//&nbsp;(Global&nbsp;identifiers&nbsp;are&nbsp;resolved&nbsp;in&nbsp;a&nbsp;separate&nbsp;phase&nbsp;after&nbsp;parsing.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277387">spec</span>&nbsp;<span class="op" id="5277392">:=</span>&nbsp;<span class="op" id="5277395">&amp;</span><span class="ident" id="5277396"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5277399">.</span><span class="ident" id="5277400">TypeSpec</span><span class="op" id="5277408">{</span><span class="ident" id="5277409">Doc</span><span class="op" id="5277412">:</span>&nbsp;<span class="ident" id="5277414"><a href="/go/parser/parser.go.html#5277005">doc</a></span><span class="op" id="5277417">,</span>&nbsp;<span class="ident" id="5277419">Name</span><span class="op" id="5277423">:</span>&nbsp;<span class="ident" id="5277425"><a href="/go/parser/parser.go.html#5277113">ident</a></span><span class="op" id="5277430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277433"><a href="/go/parser/parser.go.html#5276980">p</a></span><span class="op" id="5277434">.</span><span class="ident" id="5277435">declare</span><span class="op" id="5277442">(</span><span class="ident" id="5277443"><a href="/go/parser/parser.go.html#5277387">spec</a></span><span class="op" id="5277447">,</span>&nbsp;<span class="ident" id="5277449">nil</span><span class="op" id="5277452">,</span>&nbsp;<span class="ident" id="5277454"><a href="/go/parser/parser.go.html#5276980">p</a></span><span class="op" id="5277455">.</span><span class="ident" id="5277456">topScope</span><span class="op" id="5277464">,</span>&nbsp;<span class="ident" id="5277466"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5277469">.</span><span class="ident" id="5277470">Typ</span><span class="op" id="5277473">,</span>&nbsp;<span class="ident" id="5277475"><a href="/go/parser/parser.go.html#5277113">ident</a></span><span class="op" id="5277480">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277484"><a href="/go/parser/parser.go.html#5277387">spec</a></span><span class="op" id="5277488">.</span><span class="ident" id="5277489">Type</span>&nbsp;<span class="op" id="5277494">=</span>&nbsp;<span class="ident" id="5277496"><a href="/go/parser/parser.go.html#5276980">p</a></span><span class="op" id="5277497">.</span><span class="ident" id="5277498">parseType</span><span class="op" id="5277507">(</span><span class="op" id="5277508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277511"><a href="/go/parser/parser.go.html#5276980">p</a></span><span class="op" id="5277512">.</span><span class="ident" id="5277513">expectSemi</span><span class="op" id="5277523">(</span><span class="op" id="5277524">)</span>&nbsp;<span class="comment" id="5277526">//&nbsp;call&nbsp;before&nbsp;accessing&nbsp;p.linecomment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277566"><a href="/go/parser/parser.go.html#5277387">spec</a></span><span class="op" id="5277570">.</span><span class="ident" id="5277571">Comment</span>&nbsp;<span class="op" id="5277579">=</span>&nbsp;<span class="ident" id="5277581"><a href="/go/parser/parser.go.html#5276980">p</a></span><span class="op" id="5277582">.</span><span class="ident" id="5277583">lineComment</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277597">return</span>&nbsp;<span class="ident" id="5277604"><a href="/go/parser/parser.go.html#5277387">spec</a></span><br>
<span class="lineno">2280</span><span class="op" id="5277609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5277612">func</span>&nbsp;<span class="op" id="5277617">(</span><span class="ident" id="5277618">p</span>&nbsp;<span class="op" id="5277620">*</span><span class="ident" id="5277621"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5277627">)</span>&nbsp;<span class="ident" id="5277629">parseGenDecl</span><span class="op" id="5277641">(</span><span class="ident" id="5277642">keyword</span>&nbsp;<span class="ident" id="5277650"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5277655">.</span><span class="ident" id="5277656">Token</span><span class="op" id="5277661">,</span>&nbsp;<span class="ident" id="5277663">f</span>&nbsp;<span class="ident" id="5277665"><a href="/go/parser/parser.go.html#5274770">parseSpecFunction</a></span><span class="op" id="5277682">)</span>&nbsp;<span class="op" id="5277684">*</span><span class="ident" id="5277685"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5277688">.</span><span class="ident" id="5277689">GenDecl</span>&nbsp;<span class="op" id="5277697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277700">if</span>&nbsp;<span class="ident" id="5277703"><a href="/go/parser/parser.go.html#5277618">p</a></span><span class="op" id="5277704">.</span><span class="ident" id="5277705">trace</span>&nbsp;<span class="op" id="5277711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277715">defer</span>&nbsp;<span class="ident" id="5277721"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5277723">(</span><span class="ident" id="5277724"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5277729">(</span><span class="ident" id="5277730"><a href="/go/parser/parser.go.html#5277618">p</a></span><span class="op" id="5277731">,</span>&nbsp;<span class="string" id="5277733">&#34;GenDecl(&#34;</span><span class="op" id="5277743">+</span><span class="ident" id="5277744"><a href="/go/parser/parser.go.html#5277642">keyword</a></span><span class="op" id="5277751">.</span><span class="ident" id="5277752">String</span><span class="op" id="5277758">(</span><span class="op" id="5277759">)</span><span class="op" id="5277760">+</span><span class="string" id="5277761">&#34;)&#34;</span><span class="op" id="5277764">)</span><span class="op" id="5277765">)</span><br>
<span class="lineno">2285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5277768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277772">doc</span>&nbsp;<span class="op" id="5277776">:=</span>&nbsp;<span class="ident" id="5277779"><a href="/go/parser/parser.go.html#5277618">p</a></span><span class="op" id="5277780">.</span><span class="ident" id="5277781">leadComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277794">pos</span>&nbsp;<span class="op" id="5277798">:=</span>&nbsp;<span class="ident" id="5277801"><a href="/go/parser/parser.go.html#5277618">p</a></span><span class="op" id="5277802">.</span><span class="ident" id="5277803">expect</span><span class="op" id="5277809">(</span><span class="ident" id="5277810"><a href="/go/parser/parser.go.html#5277642">keyword</a></span><span class="op" id="5277817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277820">var</span>&nbsp;<span class="ident" id="5277824">lparen</span><span class="op" id="5277830">,</span>&nbsp;<span class="ident" id="5277832">rparen</span>&nbsp;<span class="ident" id="5277839"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5277844">.</span><span class="ident" id="5277845">Pos</span><br>
<span class="lineno">2290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277850">var</span>&nbsp;<span class="ident" id="5277854">list</span>&nbsp;<span class="op" id="5277859">[</span><span class="op" id="5277860">]</span><span class="ident" id="5277861"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5277864">.</span><span class="ident" id="5277865">Spec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277871">if</span>&nbsp;<span class="ident" id="5277874"><a href="/go/parser/parser.go.html#5277618">p</a></span><span class="op" id="5277875">.</span><span class="ident" id="5277876">tok</span>&nbsp;<span class="op" id="5277880">==</span>&nbsp;<span class="ident" id="5277883"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5277888">.</span><span class="ident" id="5277889">LPAREN</span>&nbsp;<span class="op" id="5277896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277900"><a href="/go/parser/parser.go.html#5277824">lparen</a></span>&nbsp;<span class="op" id="5277907">=</span>&nbsp;<span class="ident" id="5277909"><a href="/go/parser/parser.go.html#5277618">p</a></span><span class="op" id="5277910">.</span><span class="ident" id="5277911">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277917"><a href="/go/parser/parser.go.html#5277618">p</a></span><span class="op" id="5277918">.</span><span class="ident" id="5277919">next</span><span class="op" id="5277923">(</span><span class="op" id="5277924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277928">for</span>&nbsp;<span class="ident" id="5277932">iota</span>&nbsp;<span class="op" id="5277937">:=</span>&nbsp;<span class="num" id="5277940">0</span><span class="op" id="5277941">;</span>&nbsp;<span class="ident" id="5277943"><a href="/go/parser/parser.go.html#5277618">p</a></span><span class="op" id="5277944">.</span><span class="ident" id="5277945">tok</span>&nbsp;<span class="op" id="5277949">!=</span>&nbsp;<span class="ident" id="5277952"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5277957">.</span><span class="ident" id="5277958">RPAREN</span>&nbsp;<span class="op" id="5277965">&amp;&amp;</span>&nbsp;<span class="ident" id="5277968"><a href="/go/parser/parser.go.html#5277618">p</a></span><span class="op" id="5277969">.</span><span class="ident" id="5277970">tok</span>&nbsp;<span class="op" id="5277974">!=</span>&nbsp;<span class="ident" id="5277977"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5277982">.</span><span class="ident" id="5277983">EOF</span><span class="op" id="5277986">;</span>&nbsp;<span class="ident" id="5277988"><a href="/go/parser/parser.go.html#5277932">iota</a></span><span class="op" id="5277992">++</span>&nbsp;<span class="op" id="5277995">{</span><br>
<span class="lineno">2295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278000"><a href="/go/parser/parser.go.html#5277854">list</a></span>&nbsp;<span class="op" id="5278005">=</span>&nbsp;<span class="builtinfunc" id="5278007">append</span><span class="op" id="5278013">(</span><span class="ident" id="5278014"><a href="/go/parser/parser.go.html#5277854">list</a></span><span class="op" id="5278018">,</span>&nbsp;<span class="ident" id="5278020"><a href="/go/parser/parser.go.html#5277663">f</a></span><span class="op" id="5278021">(</span><span class="ident" id="5278022"><a href="/go/parser/parser.go.html#5277618">p</a></span><span class="op" id="5278023">.</span><span class="ident" id="5278024">leadComment</span><span class="op" id="5278035">,</span>&nbsp;<span class="ident" id="5278037"><a href="/go/parser/parser.go.html#5277642">keyword</a></span><span class="op" id="5278044">,</span>&nbsp;<span class="ident" id="5278046"><a href="/go/parser/parser.go.html#5277932">iota</a></span><span class="op" id="5278050">)</span><span class="op" id="5278051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278059"><a href="/go/parser/parser.go.html#5277832">rparen</a></span>&nbsp;<span class="op" id="5278066">=</span>&nbsp;<span class="ident" id="5278068"><a href="/go/parser/parser.go.html#5277618">p</a></span><span class="op" id="5278069">.</span><span class="ident" id="5278070">expect</span><span class="op" id="5278076">(</span><span class="ident" id="5278077"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5278082">.</span><span class="ident" id="5278083">RPAREN</span><span class="op" id="5278089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278093"><a href="/go/parser/parser.go.html#5277618">p</a></span><span class="op" id="5278094">.</span><span class="ident" id="5278095">expectSemi</span><span class="op" id="5278105">(</span><span class="op" id="5278106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278109">}</span>&nbsp;<span class="keyword" id="5278111">else</span>&nbsp;<span class="op" id="5278116">{</span><br>
<span class="lineno">2300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278120"><a href="/go/parser/parser.go.html#5277854">list</a></span>&nbsp;<span class="op" id="5278125">=</span>&nbsp;<span class="builtinfunc" id="5278127">append</span><span class="op" id="5278133">(</span><span class="ident" id="5278134"><a href="/go/parser/parser.go.html#5277854">list</a></span><span class="op" id="5278138">,</span>&nbsp;<span class="ident" id="5278140"><a href="/go/parser/parser.go.html#5277663">f</a></span><span class="op" id="5278141">(</span><span class="ident" id="5278142">nil</span><span class="op" id="5278145">,</span>&nbsp;<span class="ident" id="5278147"><a href="/go/parser/parser.go.html#5277642">keyword</a></span><span class="op" id="5278154">,</span>&nbsp;<span class="num" id="5278156">0</span><span class="op" id="5278157">)</span><span class="op" id="5278158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278165">return</span>&nbsp;<span class="op" id="5278172">&amp;</span><span class="ident" id="5278173"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5278176">.</span><span class="ident" id="5278177">GenDecl</span><span class="op" id="5278184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278188">Doc</span><span class="op" id="5278191">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5278196"><a href="/go/parser/parser.go.html#5277772">doc</a></span><span class="op" id="5278199">,</span><br>
<span class="lineno">2305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278203">TokPos</span><span class="op" id="5278209">:</span>&nbsp;<span class="ident" id="5278211"><a href="/go/parser/parser.go.html#5277794">pos</a></span><span class="op" id="5278214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278218">Tok</span><span class="op" id="5278221">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5278226"><a href="/go/parser/parser.go.html#5277642">keyword</a></span><span class="op" id="5278233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278237">Lparen</span><span class="op" id="5278243">:</span>&nbsp;<span class="ident" id="5278245"><a href="/go/parser/parser.go.html#5277824">lparen</a></span><span class="op" id="5278251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278255">Specs</span><span class="op" id="5278260">:</span>&nbsp;&nbsp;<span class="ident" id="5278263"><a href="/go/parser/parser.go.html#5277854">list</a></span><span class="op" id="5278267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278271">Rparen</span><span class="op" id="5278277">:</span>&nbsp;<span class="ident" id="5278279"><a href="/go/parser/parser.go.html#5277832">rparen</a></span><span class="op" id="5278285">,</span><br>
<span class="lineno">2310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278288">}</span><br>
<span class="lineno"></span><span class="op" id="5278290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5278293">func</span>&nbsp;<span class="op" id="5278298">(</span><span class="ident" id="5278299">p</span>&nbsp;<span class="op" id="5278301">*</span><span class="ident" id="5278302"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5278308">)</span>&nbsp;<span class="ident" id="5278310">parseFuncDecl</span><span class="op" id="5278323">(</span><span class="op" id="5278324">)</span>&nbsp;<span class="op" id="5278326">*</span><span class="ident" id="5278327"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5278330">.</span><span class="ident" id="5278331">FuncDecl</span>&nbsp;<span class="op" id="5278340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278343">if</span>&nbsp;<span class="ident" id="5278346"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5278347">.</span><span class="ident" id="5278348">trace</span>&nbsp;<span class="op" id="5278354">{</span><br>
<span class="lineno">2315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278358">defer</span>&nbsp;<span class="ident" id="5278364"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5278366">(</span><span class="ident" id="5278367"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5278372">(</span><span class="ident" id="5278373"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5278374">,</span>&nbsp;<span class="string" id="5278376">&#34;FunctionDecl&#34;</span><span class="op" id="5278390">)</span><span class="op" id="5278391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278398">doc</span>&nbsp;<span class="op" id="5278402">:=</span>&nbsp;<span class="ident" id="5278405"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5278406">.</span><span class="ident" id="5278407">leadComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278420">pos</span>&nbsp;<span class="op" id="5278424">:=</span>&nbsp;<span class="ident" id="5278427"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5278428">.</span><span class="ident" id="5278429">expect</span><span class="op" id="5278435">(</span><span class="ident" id="5278436"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5278441">.</span><span class="ident" id="5278442">FUNC</span><span class="op" id="5278446">)</span><br>
<span class="lineno">2320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278449">scope</span>&nbsp;<span class="op" id="5278455">:=</span>&nbsp;<span class="ident" id="5278458"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5278461">.</span><span class="ident" id="5278462">NewScope</span><span class="op" id="5278470">(</span><span class="ident" id="5278471"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5278472">.</span><span class="ident" id="5278473">topScope</span><span class="op" id="5278481">)</span>&nbsp;<span class="comment" id="5278483">//&nbsp;function&nbsp;scope</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278503">var</span>&nbsp;<span class="ident" id="5278507">recv</span>&nbsp;<span class="op" id="5278512">*</span><span class="ident" id="5278513"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5278516">.</span><span class="ident" id="5278517">FieldList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278528">if</span>&nbsp;<span class="ident" id="5278531"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5278532">.</span><span class="ident" id="5278533">tok</span>&nbsp;<span class="op" id="5278537">==</span>&nbsp;<span class="ident" id="5278540"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5278545">.</span><span class="ident" id="5278546">LPAREN</span>&nbsp;<span class="op" id="5278553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278557"><a href="/go/parser/parser.go.html#5278507">recv</a></span>&nbsp;<span class="op" id="5278562">=</span>&nbsp;<span class="ident" id="5278564"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5278565">.</span><span class="ident" id="5278566">parseParameters</span><span class="op" id="5278581">(</span><span class="ident" id="5278582"><a href="/go/parser/parser.go.html#5278449">scope</a></span><span class="op" id="5278587">,</span>&nbsp;<span class="builtintype" id="5278589">false</span><span class="op" id="5278594">)</span><br>
<span class="lineno">2325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278601">ident</span>&nbsp;<span class="op" id="5278607">:=</span>&nbsp;<span class="ident" id="5278610"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5278611">.</span><span class="ident" id="5278612">parseIdent</span><span class="op" id="5278622">(</span><span class="op" id="5278623">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278627">params</span><span class="op" id="5278633">,</span>&nbsp;<span class="ident" id="5278635">results</span>&nbsp;<span class="op" id="5278643">:=</span>&nbsp;<span class="ident" id="5278646"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5278647">.</span><span class="ident" id="5278648">parseSignature</span><span class="op" id="5278662">(</span><span class="ident" id="5278663"><a href="/go/parser/parser.go.html#5278449">scope</a></span><span class="op" id="5278668">)</span><br>
<span class="lineno">2330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278672">var</span>&nbsp;<span class="ident" id="5278676">body</span>&nbsp;<span class="op" id="5278681">*</span><span class="ident" id="5278682"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5278685">.</span><span class="ident" id="5278686">BlockStmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278697">if</span>&nbsp;<span class="ident" id="5278700"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5278701">.</span><span class="ident" id="5278702">tok</span>&nbsp;<span class="op" id="5278706">==</span>&nbsp;<span class="ident" id="5278709"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5278714">.</span><span class="ident" id="5278715">LBRACE</span>&nbsp;<span class="op" id="5278722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278726"><a href="/go/parser/parser.go.html#5278676">body</a></span>&nbsp;<span class="op" id="5278731">=</span>&nbsp;<span class="ident" id="5278733"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5278734">.</span><span class="ident" id="5278735">parseBody</span><span class="op" id="5278744">(</span><span class="ident" id="5278745"><a href="/go/parser/parser.go.html#5278449">scope</a></span><span class="op" id="5278750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278753">}</span><br>
<span class="lineno">2335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278756"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5278757">.</span><span class="ident" id="5278758">expectSemi</span><span class="op" id="5278768">(</span><span class="op" id="5278769">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278773">decl</span>&nbsp;<span class="op" id="5278778">:=</span>&nbsp;<span class="op" id="5278781">&amp;</span><span class="ident" id="5278782"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5278785">.</span><span class="ident" id="5278786">FuncDecl</span><span class="op" id="5278794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278798">Doc</span><span class="op" id="5278801">:</span>&nbsp;&nbsp;<span class="ident" id="5278804"><a href="/go/parser/parser.go.html#5278398">doc</a></span><span class="op" id="5278807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278811">Recv</span><span class="op" id="5278815">:</span>&nbsp;<span class="ident" id="5278817"><a href="/go/parser/parser.go.html#5278507">recv</a></span><span class="op" id="5278821">,</span><br>
<span class="lineno">2340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278825">Name</span><span class="op" id="5278829">:</span>&nbsp;<span class="ident" id="5278831"><a href="/go/parser/parser.go.html#5278601">ident</a></span><span class="op" id="5278836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278840">Type</span><span class="op" id="5278844">:</span>&nbsp;<span class="op" id="5278846">&amp;</span><span class="ident" id="5278847"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5278850">.</span><span class="ident" id="5278851">FuncType</span><span class="op" id="5278859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278864">Func</span><span class="op" id="5278868">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5278873"><a href="/go/parser/parser.go.html#5278420">pos</a></span><span class="op" id="5278876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278881">Params</span><span class="op" id="5278887">:</span>&nbsp;&nbsp;<span class="ident" id="5278890"><a href="/go/parser/parser.go.html#5278627">params</a></span><span class="op" id="5278896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278901">Results</span><span class="op" id="5278908">:</span>&nbsp;<span class="ident" id="5278910"><a href="/go/parser/parser.go.html#5278635">results</a></span><span class="op" id="5278917">,</span><br>
<span class="lineno">2345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278921">}</span><span class="op" id="5278922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278926">Body</span><span class="op" id="5278930">:</span>&nbsp;<span class="ident" id="5278932"><a href="/go/parser/parser.go.html#5278676">body</a></span><span class="op" id="5278936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278942">if</span>&nbsp;<span class="ident" id="5278945"><a href="/go/parser/parser.go.html#5278507">recv</a></span>&nbsp;<span class="op" id="5278950">==</span>&nbsp;<span class="ident" id="5278953">nil</span>&nbsp;<span class="op" id="5278957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5278961">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;scope&nbsp;of&nbsp;an&nbsp;identifier&nbsp;denoting&nbsp;a&nbsp;constant,&nbsp;type,</span><br>
<span class="lineno">2350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5279029">//&nbsp;variable,&nbsp;or&nbsp;function&nbsp;(but&nbsp;not&nbsp;method)&nbsp;declared&nbsp;at&nbsp;top&nbsp;level</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5279095">//&nbsp;(outside&nbsp;any&nbsp;function)&nbsp;is&nbsp;the&nbsp;package&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5279145">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5279150">//&nbsp;init()&nbsp;functions&nbsp;cannot&nbsp;be&nbsp;referred&nbsp;to&nbsp;and&nbsp;there&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5279208">//&nbsp;be&nbsp;more&nbsp;than&nbsp;one&nbsp;-&nbsp;don&#39;t&nbsp;put&nbsp;them&nbsp;in&nbsp;the&nbsp;pkgScope</span><br>
<span class="lineno">2355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279263">if</span>&nbsp;<span class="ident" id="5279266"><a href="/go/parser/parser.go.html#5278601">ident</a></span><span class="op" id="5279271">.</span><span class="ident" id="5279272">Name</span>&nbsp;<span class="op" id="5279277">!=</span>&nbsp;<span class="string" id="5279280">&#34;init&#34;</span>&nbsp;<span class="op" id="5279287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5279292"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5279293">.</span><span class="ident" id="5279294">declare</span><span class="op" id="5279301">(</span><span class="ident" id="5279302"><a href="/go/parser/parser.go.html#5278773">decl</a></span><span class="op" id="5279306">,</span>&nbsp;<span class="ident" id="5279308">nil</span><span class="op" id="5279311">,</span>&nbsp;<span class="ident" id="5279313"><a href="/go/parser/parser.go.html#5278299">p</a></span><span class="op" id="5279314">.</span><span class="ident" id="5279315">pkgScope</span><span class="op" id="5279323">,</span>&nbsp;<span class="ident" id="5279325"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5279328">.</span><span class="ident" id="5279329">Fun</span><span class="op" id="5279332">,</span>&nbsp;<span class="ident" id="5279334"><a href="/go/parser/parser.go.html#5278601">ident</a></span><span class="op" id="5279339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5279343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5279346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279350">return</span>&nbsp;<span class="ident" id="5279357"><a href="/go/parser/parser.go.html#5278773">decl</a></span><br>
<span class="lineno"></span><span class="op" id="5279362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5279365">func</span>&nbsp;<span class="op" id="5279370">(</span><span class="ident" id="5279371">p</span>&nbsp;<span class="op" id="5279373">*</span><span class="ident" id="5279374"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5279380">)</span>&nbsp;<span class="ident" id="5279382">parseDecl</span><span class="op" id="5279391">(</span><span class="ident" id="5279392">sync</span>&nbsp;<span class="keyword" id="5279397">func</span><span class="op" id="5279401">(</span><span class="op" id="5279402">*</span><span class="ident" id="5279403"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5279409">)</span><span class="op" id="5279410">)</span>&nbsp;<span class="ident" id="5279412"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5279415">.</span><span class="ident" id="5279416">Decl</span>&nbsp;<span class="op" id="5279421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279424">if</span>&nbsp;<span class="ident" id="5279427"><a href="/go/parser/parser.go.html#5279371">p</a></span><span class="op" id="5279428">.</span><span class="ident" id="5279429">trace</span>&nbsp;<span class="op" id="5279435">{</span><br>
<span class="lineno">2365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279439">defer</span>&nbsp;<span class="ident" id="5279445"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5279447">(</span><span class="ident" id="5279448"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5279453">(</span><span class="ident" id="5279454"><a href="/go/parser/parser.go.html#5279371">p</a></span><span class="op" id="5279455">,</span>&nbsp;<span class="string" id="5279457">&#34;Declaration&#34;</span><span class="op" id="5279470">)</span><span class="op" id="5279471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5279474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279478">var</span>&nbsp;<span class="ident" id="5279482">f</span>&nbsp;<span class="ident" id="5279484"><a href="/go/parser/parser.go.html#5274770">parseSpecFunction</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279503">switch</span>&nbsp;<span class="ident" id="5279510"><a href="/go/parser/parser.go.html#5279371">p</a></span><span class="op" id="5279511">.</span><span class="ident" id="5279512">tok</span>&nbsp;<span class="op" id="5279516">{</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279519">case</span>&nbsp;<span class="ident" id="5279524"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5279529">.</span><span class="ident" id="5279530">CONST</span><span class="op" id="5279535">,</span>&nbsp;<span class="ident" id="5279537"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5279542">.</span><span class="ident" id="5279543">VAR</span><span class="op" id="5279546">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5279550"><a href="/go/parser/parser.go.html#5279482">f</a></span>&nbsp;<span class="op" id="5279552">=</span>&nbsp;<span class="ident" id="5279554"><a href="/go/parser/parser.go.html#5279371">p</a></span><span class="op" id="5279555">.</span><span class="ident" id="5279556">parseValueSpec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279573">case</span>&nbsp;<span class="ident" id="5279578"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5279583">.</span><span class="ident" id="5279584">TYPE</span><span class="op" id="5279588">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5279592"><a href="/go/parser/parser.go.html#5279482">f</a></span>&nbsp;<span class="op" id="5279594">=</span>&nbsp;<span class="ident" id="5279596"><a href="/go/parser/parser.go.html#5279371">p</a></span><span class="op" id="5279597">.</span><span class="ident" id="5279598">parseTypeSpec</span><br>
<span class="lineno">2375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279614">case</span>&nbsp;<span class="ident" id="5279619"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5279624">.</span><span class="ident" id="5279625">FUNC</span><span class="op" id="5279629">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279633">return</span>&nbsp;<span class="ident" id="5279640"><a href="/go/parser/parser.go.html#5279371">p</a></span><span class="op" id="5279641">.</span><span class="ident" id="5279642">parseFuncDecl</span><span class="op" id="5279655">(</span><span class="op" id="5279656">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279660">default</span><span class="op" id="5279667">:</span><br>
<span class="lineno">2380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5279671">pos</span>&nbsp;<span class="op" id="5279675">:=</span>&nbsp;<span class="ident" id="5279678"><a href="/go/parser/parser.go.html#5279371">p</a></span><span class="op" id="5279679">.</span><span class="ident" id="5279680">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5279686"><a href="/go/parser/parser.go.html#5279371">p</a></span><span class="op" id="5279687">.</span><span class="ident" id="5279688">errorExpected</span><span class="op" id="5279701">(</span><span class="ident" id="5279702"><a href="/go/parser/parser.go.html#5279671">pos</a></span><span class="op" id="5279705">,</span>&nbsp;<span class="string" id="5279707">&#34;declaration&#34;</span><span class="op" id="5279720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5279724"><a href="/go/parser/parser.go.html#5279392">sync</a></span><span class="op" id="5279728">(</span><span class="ident" id="5279729"><a href="/go/parser/parser.go.html#5279371">p</a></span><span class="op" id="5279730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279734">return</span>&nbsp;<span class="op" id="5279741">&amp;</span><span class="ident" id="5279742"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5279745">.</span><span class="ident" id="5279746">BadDecl</span><span class="op" id="5279753">{</span><span class="ident" id="5279754">From</span><span class="op" id="5279758">:</span>&nbsp;<span class="ident" id="5279760"><a href="/go/parser/parser.go.html#5279671">pos</a></span><span class="op" id="5279763">,</span>&nbsp;<span class="ident" id="5279765">To</span><span class="op" id="5279767">:</span>&nbsp;<span class="ident" id="5279769"><a href="/go/parser/parser.go.html#5279371">p</a></span><span class="op" id="5279770">.</span><span class="ident" id="5279771">pos</span><span class="op" id="5279774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5279777">}</span><br>
<span class="lineno">2385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279781">return</span>&nbsp;<span class="ident" id="5279788"><a href="/go/parser/parser.go.html#5279371">p</a></span><span class="op" id="5279789">.</span><span class="ident" id="5279790">parseGenDecl</span><span class="op" id="5279802">(</span><span class="ident" id="5279803"><a href="/go/parser/parser.go.html#5279371">p</a></span><span class="op" id="5279804">.</span><span class="ident" id="5279805">tok</span><span class="op" id="5279808">,</span>&nbsp;<span class="ident" id="5279810"><a href="/go/parser/parser.go.html#5279482">f</a></span><span class="op" id="5279811">)</span><br>
<span class="lineno"></span><span class="op" id="5279813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5279816">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">2390</span><span class="comment" id="5279896">//&nbsp;Source&nbsp;files</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5279913">func</span>&nbsp;<span class="op" id="5279918">(</span><span class="ident" id="5279919">p</span>&nbsp;<span class="op" id="5279921">*</span><span class="ident" id="5279922"><a href="/go/parser/parser.go.html#5220111">parser</a></span><span class="op" id="5279928">)</span>&nbsp;<span class="ident" id="5279930">parseFile</span><span class="op" id="5279939">(</span><span class="op" id="5279940">)</span>&nbsp;<span class="op" id="5279942">*</span><span class="ident" id="5279943"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5279946">.</span><span class="ident" id="5279947">File</span>&nbsp;<span class="op" id="5279952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279955">if</span>&nbsp;<span class="ident" id="5279958"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5279959">.</span><span class="ident" id="5279960">trace</span>&nbsp;<span class="op" id="5279966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279970">defer</span>&nbsp;<span class="ident" id="5279976"><a href="/go/parser/parser.go.html#5226390">un</a></span><span class="op" id="5279978">(</span><span class="ident" id="5279979"><a href="/go/parser/parser.go.html#5226253">trace</a></span><span class="op" id="5279984">(</span><span class="ident" id="5279985"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5279986">,</span>&nbsp;<span class="string" id="5279988">&#34;File&#34;</span><span class="op" id="5279994">)</span><span class="op" id="5279995">)</span><br>
<span class="lineno">2395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5279998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5280002">//&nbsp;Don&#39;t&nbsp;bother&nbsp;parsing&nbsp;the&nbsp;rest&nbsp;if&nbsp;we&nbsp;had&nbsp;errors&nbsp;scanning&nbsp;the&nbsp;first&nbsp;token.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5280079">//&nbsp;Likely&nbsp;not&nbsp;a&nbsp;Go&nbsp;source&nbsp;file&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280119">if</span>&nbsp;<span class="ident" id="5280122"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280123">.</span><span class="ident" id="5280124">errors</span><span class="op" id="5280130">.</span><span class="ident" id="5280131">Len</span><span class="op" id="5280134">(</span><span class="op" id="5280135">)</span>&nbsp;<span class="op" id="5280137">!=</span>&nbsp;<span class="num" id="5280140">0</span>&nbsp;<span class="op" id="5280142">{</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280146">return</span>&nbsp;<span class="ident" id="5280153">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5280158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5280162">//&nbsp;package&nbsp;clause</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280181">doc</span>&nbsp;<span class="op" id="5280185">:=</span>&nbsp;<span class="ident" id="5280188"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280189">.</span><span class="ident" id="5280190">leadComment</span><br>
<span class="lineno">2405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280203">pos</span>&nbsp;<span class="op" id="5280207">:=</span>&nbsp;<span class="ident" id="5280210"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280211">.</span><span class="ident" id="5280212">expect</span><span class="op" id="5280218">(</span><span class="ident" id="5280219"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5280224">.</span><span class="ident" id="5280225">PACKAGE</span><span class="op" id="5280232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5280235">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;package&nbsp;clause&nbsp;is&nbsp;not&nbsp;a&nbsp;declaration;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5280289">//&nbsp;the&nbsp;package&nbsp;name&nbsp;does&nbsp;not&nbsp;appear&nbsp;in&nbsp;any&nbsp;scope.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280340">ident</span>&nbsp;<span class="op" id="5280346">:=</span>&nbsp;<span class="ident" id="5280349"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280350">.</span><span class="ident" id="5280351">parseIdent</span><span class="op" id="5280361">(</span><span class="op" id="5280362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280365">if</span>&nbsp;<span class="ident" id="5280368"><a href="/go/parser/parser.go.html#5280340">ident</a></span><span class="op" id="5280373">.</span><span class="ident" id="5280374">Name</span>&nbsp;<span class="op" id="5280379">==</span>&nbsp;<span class="string" id="5280382">&#34;_&#34;</span>&nbsp;<span class="op" id="5280386">&amp;&amp;</span>&nbsp;<span class="ident" id="5280389"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280390">.</span><span class="ident" id="5280391">mode</span><span class="op" id="5280395">&amp;</span><span class="ident" id="5280396"><a href="/go/parser/interface.go.html#5215132">DeclarationErrors</a></span>&nbsp;<span class="op" id="5280414">!=</span>&nbsp;<span class="num" id="5280417">0</span>&nbsp;<span class="op" id="5280419">{</span><br>
<span class="lineno">2410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280423"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280424">.</span><span class="builtintype" id="5280425">error</span><span class="op" id="5280430">(</span><span class="ident" id="5280431"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280432">.</span><span class="ident" id="5280433">pos</span><span class="op" id="5280436">,</span>&nbsp;<span class="string" id="5280438">&#34;invalid&nbsp;package&nbsp;name&nbsp;_&#34;</span><span class="op" id="5280462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5280465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280468"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280469">.</span><span class="ident" id="5280470">expectSemi</span><span class="op" id="5280480">(</span><span class="op" id="5280481">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5280485">//&nbsp;Don&#39;t&nbsp;bother&nbsp;parsing&nbsp;the&nbsp;rest&nbsp;if&nbsp;we&nbsp;had&nbsp;errors&nbsp;parsing&nbsp;the&nbsp;package&nbsp;clause.</span><br>
<span class="lineno">2415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5280564">//&nbsp;Likely&nbsp;not&nbsp;a&nbsp;Go&nbsp;source&nbsp;file&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280604">if</span>&nbsp;<span class="ident" id="5280607"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280608">.</span><span class="ident" id="5280609">errors</span><span class="op" id="5280615">.</span><span class="ident" id="5280616">Len</span><span class="op" id="5280619">(</span><span class="op" id="5280620">)</span>&nbsp;<span class="op" id="5280622">!=</span>&nbsp;<span class="num" id="5280625">0</span>&nbsp;<span class="op" id="5280627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280631">return</span>&nbsp;<span class="ident" id="5280638">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5280643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280647"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280648">.</span><span class="ident" id="5280649">openScope</span><span class="op" id="5280658">(</span><span class="op" id="5280659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280662"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280663">.</span><span class="ident" id="5280664">pkgScope</span>&nbsp;<span class="op" id="5280673">=</span>&nbsp;<span class="ident" id="5280675"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280676">.</span><span class="ident" id="5280677">topScope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280687">var</span>&nbsp;<span class="ident" id="5280691">decls</span>&nbsp;<span class="op" id="5280697">[</span><span class="op" id="5280698">]</span><span class="ident" id="5280699"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5280702">.</span><span class="ident" id="5280703">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280709">if</span>&nbsp;<span class="ident" id="5280712"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280713">.</span><span class="ident" id="5280714">mode</span><span class="op" id="5280718">&amp;</span><span class="ident" id="5280719"><a href="/go/parser/interface.go.html#5214784">PackageClauseOnly</a></span>&nbsp;<span class="op" id="5280737">==</span>&nbsp;<span class="num" id="5280740">0</span>&nbsp;<span class="op" id="5280742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5280746">//&nbsp;import&nbsp;decls</span><br>
<span class="lineno">2425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280764">for</span>&nbsp;<span class="ident" id="5280768"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280769">.</span><span class="ident" id="5280770">tok</span>&nbsp;<span class="op" id="5280774">==</span>&nbsp;<span class="ident" id="5280777"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5280782">.</span><span class="ident" id="5280783">IMPORT</span>&nbsp;<span class="op" id="5280790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280795"><a href="/go/parser/parser.go.html#5280691">decls</a></span>&nbsp;<span class="op" id="5280801">=</span>&nbsp;<span class="builtinfunc" id="5280803">append</span><span class="op" id="5280809">(</span><span class="ident" id="5280810"><a href="/go/parser/parser.go.html#5280691">decls</a></span><span class="op" id="5280815">,</span>&nbsp;<span class="ident" id="5280817"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280818">.</span><span class="ident" id="5280819">parseGenDecl</span><span class="op" id="5280831">(</span><span class="ident" id="5280832"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5280837">.</span><span class="ident" id="5280838">IMPORT</span><span class="op" id="5280844">,</span>&nbsp;<span class="ident" id="5280846"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280847">.</span><span class="ident" id="5280848">parseImportSpec</span><span class="op" id="5280863">)</span><span class="op" id="5280864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5280868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280873">if</span>&nbsp;<span class="ident" id="5280876"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280877">.</span><span class="ident" id="5280878">mode</span><span class="op" id="5280882">&amp;</span><span class="ident" id="5280883"><a href="/go/parser/interface.go.html#5214869">ImportsOnly</a></span>&nbsp;<span class="op" id="5280895">==</span>&nbsp;<span class="num" id="5280898">0</span>&nbsp;<span class="op" id="5280900">{</span><br>
<span class="lineno">2430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5280905">//&nbsp;rest&nbsp;of&nbsp;package&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280932">for</span>&nbsp;<span class="ident" id="5280936"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280937">.</span><span class="ident" id="5280938">tok</span>&nbsp;<span class="op" id="5280942">!=</span>&nbsp;<span class="ident" id="5280945"><a href="/go/parser/parser.go.html#5220000">token</a></span><span class="op" id="5280950">.</span><span class="ident" id="5280951">EOF</span>&nbsp;<span class="op" id="5280955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280961"><a href="/go/parser/parser.go.html#5280691">decls</a></span>&nbsp;<span class="op" id="5280967">=</span>&nbsp;<span class="builtinfunc" id="5280969">append</span><span class="op" id="5280975">(</span><span class="ident" id="5280976"><a href="/go/parser/parser.go.html#5280691">decls</a></span><span class="op" id="5280981">,</span>&nbsp;<span class="ident" id="5280983"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5280984">.</span><span class="ident" id="5280985">parseDecl</span><span class="op" id="5280994">(</span><span class="ident" id="5280995"><a href="/go/parser/parser.go.html#5233156">syncDecl</a></span><span class="op" id="5281003">)</span><span class="op" id="5281004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5281009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5281013">}</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5281016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281019"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5281020">.</span><span class="ident" id="5281021">closeScope</span><span class="op" id="5281031">(</span><span class="op" id="5281032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281035"><a href="/go/parser/parser.go.html#5231787">assert</a></span><span class="op" id="5281041">(</span><span class="ident" id="5281042"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5281043">.</span><span class="ident" id="5281044">topScope</span>&nbsp;<span class="op" id="5281053">==</span>&nbsp;<span class="ident" id="5281056">nil</span><span class="op" id="5281059">,</span>&nbsp;<span class="string" id="5281061">&#34;unbalanced&nbsp;scopes&#34;</span><span class="op" id="5281080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281083"><a href="/go/parser/parser.go.html#5231787">assert</a></span><span class="op" id="5281089">(</span><span class="ident" id="5281090"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5281091">.</span><span class="ident" id="5281092">labelScope</span>&nbsp;<span class="op" id="5281103">==</span>&nbsp;<span class="ident" id="5281106">nil</span><span class="op" id="5281109">,</span>&nbsp;<span class="string" id="5281111">&#34;unbalanced&nbsp;label&nbsp;scopes&#34;</span><span class="op" id="5281136">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5281140">//&nbsp;resolve&nbsp;global&nbsp;identifiers&nbsp;within&nbsp;the&nbsp;same&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281192">i</span>&nbsp;<span class="op" id="5281194">:=</span>&nbsp;<span class="num" id="5281197">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281200">for</span>&nbsp;<span class="ident" id="5281204">_</span><span class="op" id="5281205">,</span>&nbsp;<span class="ident" id="5281207">ident</span>&nbsp;<span class="op" id="5281213">:=</span>&nbsp;<span class="keyword" id="5281216">range</span>&nbsp;<span class="ident" id="5281222"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5281223">.</span><span class="ident" id="5281224">unresolved</span>&nbsp;<span class="op" id="5281235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5281239">//&nbsp;i&nbsp;&lt;=&nbsp;index&nbsp;for&nbsp;current&nbsp;ident</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281273"><a href="/go/parser/parser.go.html#5231787">assert</a></span><span class="op" id="5281279">(</span><span class="ident" id="5281280"><a href="/go/parser/parser.go.html#5281207">ident</a></span><span class="op" id="5281285">.</span><span class="ident" id="5281286">Obj</span>&nbsp;<span class="op" id="5281290">==</span>&nbsp;<span class="ident" id="5281293"><a href="/go/parser/parser.go.html#5224684">unresolved</a></span><span class="op" id="5281303">,</span>&nbsp;<span class="string" id="5281305">&#34;object&nbsp;already&nbsp;resolved&#34;</span><span class="op" id="5281330">)</span><br>
<span class="lineno">2445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281334"><a href="/go/parser/parser.go.html#5281207">ident</a></span><span class="op" id="5281339">.</span><span class="ident" id="5281340">Obj</span>&nbsp;<span class="op" id="5281344">=</span>&nbsp;<span class="ident" id="5281346"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5281347">.</span><span class="ident" id="5281348">pkgScope</span><span class="op" id="5281356">.</span><span class="ident" id="5281357">Lookup</span><span class="op" id="5281363">(</span><span class="ident" id="5281364"><a href="/go/parser/parser.go.html#5281207">ident</a></span><span class="op" id="5281369">.</span><span class="ident" id="5281370">Name</span><span class="op" id="5281374">)</span>&nbsp;<span class="comment" id="5281376">//&nbsp;also&nbsp;removes&nbsp;unresolved&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281414">if</span>&nbsp;<span class="ident" id="5281417"><a href="/go/parser/parser.go.html#5281207">ident</a></span><span class="op" id="5281422">.</span><span class="ident" id="5281423">Obj</span>&nbsp;<span class="op" id="5281427">==</span>&nbsp;<span class="ident" id="5281430">nil</span>&nbsp;<span class="op" id="5281434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281439"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5281440">.</span><span class="ident" id="5281441">unresolved</span><span class="op" id="5281451">[</span><span class="ident" id="5281452"><a href="/go/parser/parser.go.html#5281192">i</a></span><span class="op" id="5281453">]</span>&nbsp;<span class="op" id="5281455">=</span>&nbsp;<span class="ident" id="5281457"><a href="/go/parser/parser.go.html#5281207">ident</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281466"><a href="/go/parser/parser.go.html#5281192">i</a></span><span class="op" id="5281467">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5281472">}</span><br>
<span class="lineno">2450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5281475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281479">return</span>&nbsp;<span class="op" id="5281486">&amp;</span><span class="ident" id="5281487"><a href="/go/parser/parser.go.html#5219976">ast</a></span><span class="op" id="5281490">.</span><span class="ident" id="5281491">File</span><span class="op" id="5281495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281499">Doc</span><span class="op" id="5281502">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5281511"><a href="/go/parser/parser.go.html#5280181">doc</a></span><span class="op" id="5281514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281518">Package</span><span class="op" id="5281525">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5281530"><a href="/go/parser/parser.go.html#5280203">pos</a></span><span class="op" id="5281533">,</span><br>
<span class="lineno">2455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281537">Name</span><span class="op" id="5281541">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5281549"><a href="/go/parser/parser.go.html#5280340">ident</a></span><span class="op" id="5281554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281558">Decls</span><span class="op" id="5281563">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5281570"><a href="/go/parser/parser.go.html#5280691">decls</a></span><span class="op" id="5281575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281579">Scope</span><span class="op" id="5281584">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5281591"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5281592">.</span><span class="ident" id="5281593">pkgScope</span><span class="op" id="5281601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281605">Imports</span><span class="op" id="5281612">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5281617"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5281618">.</span><span class="ident" id="5281619">imports</span><span class="op" id="5281626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281630">Unresolved</span><span class="op" id="5281640">:</span>&nbsp;<span class="ident" id="5281642"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5281643">.</span><span class="ident" id="5281644">unresolved</span><span class="op" id="5281654">[</span><span class="num" id="5281655">0</span><span class="op" id="5281656">:</span><span class="ident" id="5281657"><a href="/go/parser/parser.go.html#5281192">i</a></span><span class="op" id="5281658">]</span><span class="op" id="5281659">,</span><br>
<span class="lineno">2460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281663">Comments</span><span class="op" id="5281671">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5281675"><a href="/go/parser/parser.go.html#5279919">p</a></span><span class="op" id="5281676">.</span><span class="ident" id="5281677">comments</span><span class="op" id="5281685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5281688">}</span><br>
<span class="lineno"></span><span class="op" id="5281690">}</span>
</div>
</body>
</html>
