<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html" class="current">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3227939">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3227994">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3228048">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3228099">//&nbsp;Simple&nbsp;file&nbsp;i/o&nbsp;and&nbsp;string&nbsp;manipulation,&nbsp;to&nbsp;avoid</span><br>
<span class="lineno"></span><span class="comment" id="3228152">//&nbsp;depending&nbsp;on&nbsp;strconv&nbsp;and&nbsp;bufio&nbsp;and&nbsp;strings.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3228200">package</span>&nbsp;<span class="ident" id="3228208">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3228213">import</span>&nbsp;<span class="op" id="3228220">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3228223">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3228229">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="3228234">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3228237">type</span>&nbsp;<span class="ident" id="3228242">file</span>&nbsp;<span class="keyword" id="3228247">struct</span>&nbsp;<span class="op" id="3228254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228257">file</span>&nbsp;&nbsp;<span class="op" id="3228263">*</span><span class="ident" id="3228264">os</span><span class="op" id="3228266">.</span><span class="ident" id="3228267">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228273">data</span>&nbsp;&nbsp;<span class="op" id="3228279">[</span><span class="op" id="3228280">]</span><span class="builtintype" id="3228281">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228287">atEOF</span>&nbsp;<span class="builtintype" id="3228293">bool</span><br>
<span class="lineno"></span><span class="op" id="3228298">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="3228301">func</span>&nbsp;<span class="op" id="3228306">(</span><span class="ident" id="3228307">f</span>&nbsp;<span class="op" id="3228309">*</span><span class="ident" id="3228310">file</span><span class="op" id="3228314">)</span>&nbsp;<span class="builtinfunc" id="3228316">close</span><span class="op" id="3228321">(</span><span class="op" id="3228322">)</span>&nbsp;<span class="op" id="3228324">{</span>&nbsp;<span class="ident" id="3228326">f</span><span class="op" id="3228327">.</span><span class="ident" id="3228328">file</span><span class="op" id="3228332">.</span><span class="ident" id="3228333">Close</span><span class="op" id="3228338">(</span><span class="op" id="3228339">)</span>&nbsp;<span class="op" id="3228341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3228344">func</span>&nbsp;<span class="op" id="3228349">(</span><span class="ident" id="3228350">f</span>&nbsp;<span class="op" id="3228352">*</span><span class="ident" id="3228353">file</span><span class="op" id="3228357">)</span>&nbsp;<span class="ident" id="3228359">getLineFromData</span><span class="op" id="3228374">(</span><span class="op" id="3228375">)</span>&nbsp;<span class="op" id="3228377">(</span><span class="ident" id="3228378">s</span>&nbsp;<span class="builtintype" id="3228380">string</span><span class="op" id="3228386">,</span>&nbsp;<span class="ident" id="3228388">ok</span>&nbsp;<span class="builtintype" id="3228391">bool</span><span class="op" id="3228395">)</span>&nbsp;<span class="op" id="3228397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228400">data</span>&nbsp;<span class="op" id="3228405">:=</span>&nbsp;<span class="ident" id="3228408">f</span><span class="op" id="3228409">.</span><span class="ident" id="3228410">data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228416">i</span>&nbsp;<span class="op" id="3228418">:=</span>&nbsp;<span class="num" id="3228421">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228424">for</span>&nbsp;<span class="ident" id="3228428">i</span>&nbsp;<span class="op" id="3228430">=</span>&nbsp;<span class="num" id="3228432">0</span><span class="op" id="3228433">;</span>&nbsp;<span class="ident" id="3228435">i</span>&nbsp;<span class="op" id="3228437">&lt;</span>&nbsp;<span class="builtinfunc" id="3228439">len</span><span class="op" id="3228442">(</span><span class="ident" id="3228443">data</span><span class="op" id="3228447">)</span><span class="op" id="3228448">;</span>&nbsp;<span class="ident" id="3228450">i</span><span class="op" id="3228451">++</span>&nbsp;<span class="op" id="3228454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228458">if</span>&nbsp;<span class="ident" id="3228461">data</span><span class="op" id="3228465">[</span><span class="ident" id="3228466">i</span><span class="op" id="3228467">]</span>&nbsp;<span class="op" id="3228469">==</span>&nbsp;<span class="string" id="3228472">&#39;\n&#39;</span>&nbsp;<span class="op" id="3228477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228482">s</span>&nbsp;<span class="op" id="3228484">=</span>&nbsp;<span class="builtintype" id="3228486">string</span><span class="op" id="3228492">(</span><span class="ident" id="3228493">data</span><span class="op" id="3228497">[</span><span class="num" id="3228498">0</span><span class="op" id="3228499">:</span><span class="ident" id="3228500">i</span><span class="op" id="3228501">]</span><span class="op" id="3228502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228507">ok</span>&nbsp;<span class="op" id="3228510">=</span>&nbsp;<span class="builtintype" id="3228512">true</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3228520">//&nbsp;move&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228536">i</span><span class="op" id="3228537">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228543">n</span>&nbsp;<span class="op" id="3228545">:=</span>&nbsp;<span class="builtinfunc" id="3228548">len</span><span class="op" id="3228551">(</span><span class="ident" id="3228552">data</span><span class="op" id="3228556">)</span>&nbsp;<span class="op" id="3228558">-</span>&nbsp;<span class="ident" id="3228560">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3228565">copy</span><span class="op" id="3228569">(</span><span class="ident" id="3228570">data</span><span class="op" id="3228574">[</span><span class="num" id="3228575">0</span><span class="op" id="3228576">:</span><span class="op" id="3228577">]</span><span class="op" id="3228578">,</span>&nbsp;<span class="ident" id="3228580">data</span><span class="op" id="3228584">[</span><span class="ident" id="3228585">i</span><span class="op" id="3228586">:</span><span class="op" id="3228587">]</span><span class="op" id="3228588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228593">f</span><span class="op" id="3228594">.</span><span class="ident" id="3228595">data</span>&nbsp;<span class="op" id="3228600">=</span>&nbsp;<span class="ident" id="3228602">data</span><span class="op" id="3228606">[</span><span class="num" id="3228607">0</span><span class="op" id="3228608">:</span><span class="ident" id="3228609">n</span><span class="op" id="3228610">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228615">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3228624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3228627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228630">if</span>&nbsp;<span class="ident" id="3228633">f</span><span class="op" id="3228634">.</span><span class="ident" id="3228635">atEOF</span>&nbsp;<span class="op" id="3228641">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3228644">len</span><span class="op" id="3228647">(</span><span class="ident" id="3228648">f</span><span class="op" id="3228649">.</span><span class="ident" id="3228650">data</span><span class="op" id="3228654">)</span>&nbsp;<span class="op" id="3228656">&gt;</span>&nbsp;<span class="num" id="3228658">0</span>&nbsp;<span class="op" id="3228660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3228664">//&nbsp;EOF,&nbsp;return&nbsp;all&nbsp;we&nbsp;have</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228693">s</span>&nbsp;<span class="op" id="3228695">=</span>&nbsp;<span class="builtintype" id="3228697">string</span><span class="op" id="3228703">(</span><span class="ident" id="3228704">data</span><span class="op" id="3228708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228712">f</span><span class="op" id="3228713">.</span><span class="ident" id="3228714">data</span>&nbsp;<span class="op" id="3228719">=</span>&nbsp;<span class="ident" id="3228721">f</span><span class="op" id="3228722">.</span><span class="ident" id="3228723">data</span><span class="op" id="3228727">[</span><span class="num" id="3228728">0</span><span class="op" id="3228729">:</span><span class="num" id="3228730">0</span><span class="op" id="3228731">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228735">ok</span>&nbsp;<span class="op" id="3228738">=</span>&nbsp;<span class="builtintype" id="3228740">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3228746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228749">return</span><br>
<span class="lineno">45</span><span class="op" id="3228756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3228759">func</span>&nbsp;<span class="op" id="3228764">(</span><span class="ident" id="3228765">f</span>&nbsp;<span class="op" id="3228767">*</span><span class="ident" id="3228768">file</span><span class="op" id="3228772">)</span>&nbsp;<span class="ident" id="3228774">readLine</span><span class="op" id="3228782">(</span><span class="op" id="3228783">)</span>&nbsp;<span class="op" id="3228785">(</span><span class="ident" id="3228786">s</span>&nbsp;<span class="builtintype" id="3228788">string</span><span class="op" id="3228794">,</span>&nbsp;<span class="ident" id="3228796">ok</span>&nbsp;<span class="builtintype" id="3228799">bool</span><span class="op" id="3228803">)</span>&nbsp;<span class="op" id="3228805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228808">if</span>&nbsp;<span class="ident" id="3228811">s</span><span class="op" id="3228812">,</span>&nbsp;<span class="ident" id="3228814">ok</span>&nbsp;<span class="op" id="3228817">=</span>&nbsp;<span class="ident" id="3228819">f</span><span class="op" id="3228820">.</span><span class="ident" id="3228821">getLineFromData</span><span class="op" id="3228836">(</span><span class="op" id="3228837">)</span><span class="op" id="3228838">;</span>&nbsp;<span class="ident" id="3228840">ok</span>&nbsp;<span class="op" id="3228843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228847">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3228855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228858">if</span>&nbsp;<span class="builtinfunc" id="3228861">len</span><span class="op" id="3228864">(</span><span class="ident" id="3228865">f</span><span class="op" id="3228866">.</span><span class="ident" id="3228867">data</span><span class="op" id="3228871">)</span>&nbsp;<span class="op" id="3228873">&lt;</span>&nbsp;<span class="builtinfunc" id="3228875">cap</span><span class="op" id="3228878">(</span><span class="ident" id="3228879">f</span><span class="op" id="3228880">.</span><span class="ident" id="3228881">data</span><span class="op" id="3228885">)</span>&nbsp;<span class="op" id="3228887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228891">ln</span>&nbsp;<span class="op" id="3228894">:=</span>&nbsp;<span class="builtinfunc" id="3228897">len</span><span class="op" id="3228900">(</span><span class="ident" id="3228901">f</span><span class="op" id="3228902">.</span><span class="ident" id="3228903">data</span><span class="op" id="3228907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228911">n</span><span class="op" id="3228912">,</span>&nbsp;<span class="ident" id="3228914">err</span>&nbsp;<span class="op" id="3228918">:=</span>&nbsp;<span class="ident" id="3228921">io</span><span class="op" id="3228923">.</span><span class="ident" id="3228924">ReadFull</span><span class="op" id="3228932">(</span><span class="ident" id="3228933">f</span><span class="op" id="3228934">.</span><span class="ident" id="3228935">file</span><span class="op" id="3228939">,</span>&nbsp;<span class="ident" id="3228941">f</span><span class="op" id="3228942">.</span><span class="ident" id="3228943">data</span><span class="op" id="3228947">[</span><span class="ident" id="3228948">ln</span><span class="op" id="3228950">:</span><span class="builtinfunc" id="3228951">cap</span><span class="op" id="3228954">(</span><span class="ident" id="3228955">f</span><span class="op" id="3228956">.</span><span class="ident" id="3228957">data</span><span class="op" id="3228961">)</span><span class="op" id="3228962">]</span><span class="op" id="3228963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3228967">if</span>&nbsp;<span class="ident" id="3228970">n</span>&nbsp;<span class="op" id="3228972">&gt;=</span>&nbsp;<span class="num" id="3228975">0</span>&nbsp;<span class="op" id="3228977">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3228982">f</span><span class="op" id="3228983">.</span><span class="ident" id="3228984">data</span>&nbsp;<span class="op" id="3228989">=</span>&nbsp;<span class="ident" id="3228991">f</span><span class="op" id="3228992">.</span><span class="ident" id="3228993">data</span><span class="op" id="3228997">[</span><span class="num" id="3228998">0</span>&nbsp;<span class="op" id="3229000">:</span>&nbsp;<span class="ident" id="3229002">ln</span><span class="op" id="3229004">+</span><span class="ident" id="3229005">n</span><span class="op" id="3229006">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229014">if</span>&nbsp;<span class="ident" id="3229017">err</span>&nbsp;<span class="op" id="3229021">==</span>&nbsp;<span class="ident" id="3229024">io</span><span class="op" id="3229026">.</span><span class="ident" id="3229027">EOF</span>&nbsp;<span class="op" id="3229031">||</span>&nbsp;<span class="ident" id="3229034">err</span>&nbsp;<span class="op" id="3229038">==</span>&nbsp;<span class="ident" id="3229041">io</span><span class="op" id="3229043">.</span><span class="ident" id="3229044">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="3229061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229066">f</span><span class="op" id="3229067">.</span><span class="ident" id="3229068">atEOF</span>&nbsp;<span class="op" id="3229074">=</span>&nbsp;<span class="builtintype" id="3229076">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229083">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229089">s</span><span class="op" id="3229090">,</span>&nbsp;<span class="ident" id="3229092">ok</span>&nbsp;<span class="op" id="3229095">=</span>&nbsp;<span class="ident" id="3229097">f</span><span class="op" id="3229098">.</span><span class="ident" id="3229099">getLineFromData</span><span class="op" id="3229114">(</span><span class="op" id="3229115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229118">return</span><br>
<span class="lineno"></span><span class="op" id="3229125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="3229128">func</span>&nbsp;<span class="ident" id="3229133">open</span><span class="op" id="3229137">(</span><span class="ident" id="3229138">name</span>&nbsp;<span class="builtintype" id="3229143">string</span><span class="op" id="3229149">)</span>&nbsp;<span class="op" id="3229151">(</span><span class="op" id="3229152">*</span><span class="ident" id="3229153">file</span><span class="op" id="3229157">,</span>&nbsp;<span class="builtintype" id="3229159">error</span><span class="op" id="3229164">)</span>&nbsp;<span class="op" id="3229166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229169">fd</span><span class="op" id="3229171">,</span>&nbsp;<span class="ident" id="3229173">err</span>&nbsp;<span class="op" id="3229177">:=</span>&nbsp;<span class="ident" id="3229180">os</span><span class="op" id="3229182">.</span><span class="ident" id="3229183">Open</span><span class="op" id="3229187">(</span><span class="ident" id="3229188">name</span><span class="op" id="3229192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229195">if</span>&nbsp;<span class="ident" id="3229198">err</span>&nbsp;<span class="op" id="3229202">!=</span>&nbsp;<span class="ident" id="3229205">nil</span>&nbsp;<span class="op" id="3229209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229213">return</span>&nbsp;<span class="ident" id="3229220">nil</span><span class="op" id="3229223">,</span>&nbsp;<span class="ident" id="3229225">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229230">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229233">return</span>&nbsp;<span class="op" id="3229240">&amp;</span><span class="ident" id="3229241">file</span><span class="op" id="3229245">{</span><span class="ident" id="3229246">fd</span><span class="op" id="3229248">,</span>&nbsp;<span class="builtinfunc" id="3229250">make</span><span class="op" id="3229254">(</span><span class="op" id="3229255">[</span><span class="op" id="3229256">]</span><span class="builtintype" id="3229257">byte</span><span class="op" id="3229261">,</span>&nbsp;<span class="num" id="3229263">0</span><span class="op" id="3229264">,</span>&nbsp;<span class="ident" id="3229266">os</span><span class="op" id="3229268">.</span><span class="ident" id="3229269">Getpagesize</span><span class="op" id="3229280">(</span><span class="op" id="3229281">)</span><span class="op" id="3229282">)</span><span class="op" id="3229283">,</span>&nbsp;<span class="builtintype" id="3229285">false</span><span class="op" id="3229290">}</span><span class="op" id="3229291">,</span>&nbsp;<span class="ident" id="3229293">nil</span><br>
<span class="lineno"></span><span class="op" id="3229297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3229300">func</span>&nbsp;<span class="ident" id="3229305">byteIndex</span><span class="op" id="3229314">(</span><span class="ident" id="3229315">s</span>&nbsp;<span class="builtintype" id="3229317">string</span><span class="op" id="3229323">,</span>&nbsp;<span class="ident" id="3229325">c</span>&nbsp;<span class="builtintype" id="3229327">byte</span><span class="op" id="3229331">)</span>&nbsp;<span class="builtintype" id="3229333">int</span>&nbsp;<span class="op" id="3229337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229340">for</span>&nbsp;<span class="ident" id="3229344">i</span>&nbsp;<span class="op" id="3229346">:=</span>&nbsp;<span class="num" id="3229349">0</span><span class="op" id="3229350">;</span>&nbsp;<span class="ident" id="3229352">i</span>&nbsp;<span class="op" id="3229354">&lt;</span>&nbsp;<span class="builtinfunc" id="3229356">len</span><span class="op" id="3229359">(</span><span class="ident" id="3229360">s</span><span class="op" id="3229361">)</span><span class="op" id="3229362">;</span>&nbsp;<span class="ident" id="3229364">i</span><span class="op" id="3229365">++</span>&nbsp;<span class="op" id="3229368">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229372">if</span>&nbsp;<span class="ident" id="3229375">s</span><span class="op" id="3229376">[</span><span class="ident" id="3229377">i</span><span class="op" id="3229378">]</span>&nbsp;<span class="op" id="3229380">==</span>&nbsp;<span class="ident" id="3229383">c</span>&nbsp;<span class="op" id="3229385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229390">return</span>&nbsp;<span class="ident" id="3229397">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229407">return</span>&nbsp;<span class="op" id="3229414">-</span><span class="num" id="3229415">1</span><br>
<span class="lineno">80</span><span class="op" id="3229417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3229420">//&nbsp;Count&nbsp;occurrences&nbsp;in&nbsp;s&nbsp;of&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="3229465">func</span>&nbsp;<span class="ident" id="3229470">countAnyByte</span><span class="op" id="3229482">(</span><span class="ident" id="3229483">s</span>&nbsp;<span class="builtintype" id="3229485">string</span><span class="op" id="3229491">,</span>&nbsp;<span class="ident" id="3229493">t</span>&nbsp;<span class="builtintype" id="3229495">string</span><span class="op" id="3229501">)</span>&nbsp;<span class="builtintype" id="3229503">int</span>&nbsp;<span class="op" id="3229507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229510">n</span>&nbsp;<span class="op" id="3229512">:=</span>&nbsp;<span class="num" id="3229515">0</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229518">for</span>&nbsp;<span class="ident" id="3229522">i</span>&nbsp;<span class="op" id="3229524">:=</span>&nbsp;<span class="num" id="3229527">0</span><span class="op" id="3229528">;</span>&nbsp;<span class="ident" id="3229530">i</span>&nbsp;<span class="op" id="3229532">&lt;</span>&nbsp;<span class="builtinfunc" id="3229534">len</span><span class="op" id="3229537">(</span><span class="ident" id="3229538">s</span><span class="op" id="3229539">)</span><span class="op" id="3229540">;</span>&nbsp;<span class="ident" id="3229542">i</span><span class="op" id="3229543">++</span>&nbsp;<span class="op" id="3229546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229550">if</span>&nbsp;<span class="ident" id="3229553">byteIndex</span><span class="op" id="3229562">(</span><span class="ident" id="3229563">t</span><span class="op" id="3229564">,</span>&nbsp;<span class="ident" id="3229566">s</span><span class="op" id="3229567">[</span><span class="ident" id="3229568">i</span><span class="op" id="3229569">]</span><span class="op" id="3229570">)</span>&nbsp;<span class="op" id="3229572">&gt;=</span>&nbsp;<span class="num" id="3229575">0</span>&nbsp;<span class="op" id="3229577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229582">n</span><span class="op" id="3229583">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229591">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229594">return</span>&nbsp;<span class="ident" id="3229601">n</span><br>
<span class="lineno"></span><span class="op" id="3229603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3229606">//&nbsp;Split&nbsp;s&nbsp;at&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="3229636">func</span>&nbsp;<span class="ident" id="3229641">splitAtBytes</span><span class="op" id="3229653">(</span><span class="ident" id="3229654">s</span>&nbsp;<span class="builtintype" id="3229656">string</span><span class="op" id="3229662">,</span>&nbsp;<span class="ident" id="3229664">t</span>&nbsp;<span class="builtintype" id="3229666">string</span><span class="op" id="3229672">)</span>&nbsp;<span class="op" id="3229674">[</span><span class="op" id="3229675">]</span><span class="builtintype" id="3229676">string</span>&nbsp;<span class="op" id="3229683">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229686">a</span>&nbsp;<span class="op" id="3229688">:=</span>&nbsp;<span class="builtinfunc" id="3229691">make</span><span class="op" id="3229695">(</span><span class="op" id="3229696">[</span><span class="op" id="3229697">]</span><span class="builtintype" id="3229698">string</span><span class="op" id="3229704">,</span>&nbsp;<span class="num" id="3229706">1</span><span class="op" id="3229707">+</span><span class="ident" id="3229708">countAnyByte</span><span class="op" id="3229720">(</span><span class="ident" id="3229721">s</span><span class="op" id="3229722">,</span>&nbsp;<span class="ident" id="3229724">t</span><span class="op" id="3229725">)</span><span class="op" id="3229726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229729">n</span>&nbsp;<span class="op" id="3229731">:=</span>&nbsp;<span class="num" id="3229734">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229737">last</span>&nbsp;<span class="op" id="3229742">:=</span>&nbsp;<span class="num" id="3229745">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229748">for</span>&nbsp;<span class="ident" id="3229752">i</span>&nbsp;<span class="op" id="3229754">:=</span>&nbsp;<span class="num" id="3229757">0</span><span class="op" id="3229758">;</span>&nbsp;<span class="ident" id="3229760">i</span>&nbsp;<span class="op" id="3229762">&lt;</span>&nbsp;<span class="builtinfunc" id="3229764">len</span><span class="op" id="3229767">(</span><span class="ident" id="3229768">s</span><span class="op" id="3229769">)</span><span class="op" id="3229770">;</span>&nbsp;<span class="ident" id="3229772">i</span><span class="op" id="3229773">++</span>&nbsp;<span class="op" id="3229776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229780">if</span>&nbsp;<span class="ident" id="3229783">byteIndex</span><span class="op" id="3229792">(</span><span class="ident" id="3229793">t</span><span class="op" id="3229794">,</span>&nbsp;<span class="ident" id="3229796">s</span><span class="op" id="3229797">[</span><span class="ident" id="3229798">i</span><span class="op" id="3229799">]</span><span class="op" id="3229800">)</span>&nbsp;<span class="op" id="3229802">&gt;=</span>&nbsp;<span class="num" id="3229805">0</span>&nbsp;<span class="op" id="3229807">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229812">if</span>&nbsp;<span class="ident" id="3229815">last</span>&nbsp;<span class="op" id="3229820">&lt;</span>&nbsp;<span class="ident" id="3229822">i</span>&nbsp;<span class="op" id="3229824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229830">a</span><span class="op" id="3229831">[</span><span class="ident" id="3229832">n</span><span class="op" id="3229833">]</span>&nbsp;<span class="op" id="3229835">=</span>&nbsp;<span class="builtintype" id="3229837">string</span><span class="op" id="3229843">(</span><span class="ident" id="3229844">s</span><span class="op" id="3229845">[</span><span class="ident" id="3229846">last</span><span class="op" id="3229850">:</span><span class="ident" id="3229851">i</span><span class="op" id="3229852">]</span><span class="op" id="3229853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229859">n</span><span class="op" id="3229860">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229871">last</span>&nbsp;<span class="op" id="3229876">=</span>&nbsp;<span class="ident" id="3229878">i</span>&nbsp;<span class="op" id="3229880">+</span>&nbsp;<span class="num" id="3229882">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229892">if</span>&nbsp;<span class="ident" id="3229895">last</span>&nbsp;<span class="op" id="3229900">&lt;</span>&nbsp;<span class="builtinfunc" id="3229902">len</span><span class="op" id="3229905">(</span><span class="ident" id="3229906">s</span><span class="op" id="3229907">)</span>&nbsp;<span class="op" id="3229909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229913">a</span><span class="op" id="3229914">[</span><span class="ident" id="3229915">n</span><span class="op" id="3229916">]</span>&nbsp;<span class="op" id="3229918">=</span>&nbsp;<span class="builtintype" id="3229920">string</span><span class="op" id="3229926">(</span><span class="ident" id="3229927">s</span><span class="op" id="3229928">[</span><span class="ident" id="3229929">last</span><span class="op" id="3229933">:</span><span class="op" id="3229934">]</span><span class="op" id="3229935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3229939">n</span><span class="op" id="3229940">++</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3229944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3229947">return</span>&nbsp;<span class="ident" id="3229954">a</span><span class="op" id="3229955">[</span><span class="num" id="3229956">0</span><span class="op" id="3229957">:</span><span class="ident" id="3229958">n</span><span class="op" id="3229959">]</span><br>
<span class="lineno"></span><span class="op" id="3229961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3229964">func</span>&nbsp;<span class="ident" id="3229969">getFields</span><span class="op" id="3229978">(</span><span class="ident" id="3229979">s</span>&nbsp;<span class="builtintype" id="3229981">string</span><span class="op" id="3229987">)</span>&nbsp;<span class="op" id="3229989">[</span><span class="op" id="3229990">]</span><span class="builtintype" id="3229991">string</span>&nbsp;<span class="op" id="3229998">{</span>&nbsp;<span class="keyword" id="3230000">return</span>&nbsp;<span class="ident" id="3230007">splitAtBytes</span><span class="op" id="3230019">(</span><span class="ident" id="3230020">s</span><span class="op" id="3230021">,</span>&nbsp;<span class="string" id="3230023">&#34;&nbsp;\r\t\n&#34;</span><span class="op" id="3230032">)</span>&nbsp;<span class="op" id="3230034">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3230037">//&nbsp;Bigger&nbsp;than&nbsp;we&nbsp;need,&nbsp;not&nbsp;too&nbsp;big&nbsp;to&nbsp;worry&nbsp;about&nbsp;overflow</span><br>
<span class="lineno"></span><span class="keyword" id="3230097">const</span>&nbsp;<span class="ident" id="3230103">big</span>&nbsp;<span class="op" id="3230107">=</span>&nbsp;<span class="num" id="3230109">0xFFFFFF</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3230119">//&nbsp;Decimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno">120</span><span class="comment" id="3230161">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="3230201">func</span>&nbsp;<span class="ident" id="3230206">dtoi</span><span class="op" id="3230210">(</span><span class="ident" id="3230211">s</span>&nbsp;<span class="builtintype" id="3230213">string</span><span class="op" id="3230219">,</span>&nbsp;<span class="ident" id="3230221">i0</span>&nbsp;<span class="builtintype" id="3230224">int</span><span class="op" id="3230227">)</span>&nbsp;<span class="op" id="3230229">(</span><span class="ident" id="3230230">n</span>&nbsp;<span class="builtintype" id="3230232">int</span><span class="op" id="3230235">,</span>&nbsp;<span class="ident" id="3230237">i</span>&nbsp;<span class="builtintype" id="3230239">int</span><span class="op" id="3230242">,</span>&nbsp;<span class="ident" id="3230244">ok</span>&nbsp;<span class="builtintype" id="3230247">bool</span><span class="op" id="3230251">)</span>&nbsp;<span class="op" id="3230253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230256">n</span>&nbsp;<span class="op" id="3230258">=</span>&nbsp;<span class="num" id="3230260">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230263">for</span>&nbsp;<span class="ident" id="3230267">i</span>&nbsp;<span class="op" id="3230269">=</span>&nbsp;<span class="ident" id="3230271">i0</span><span class="op" id="3230273">;</span>&nbsp;<span class="ident" id="3230275">i</span>&nbsp;<span class="op" id="3230277">&lt;</span>&nbsp;<span class="builtinfunc" id="3230279">len</span><span class="op" id="3230282">(</span><span class="ident" id="3230283">s</span><span class="op" id="3230284">)</span>&nbsp;<span class="op" id="3230286">&amp;&amp;</span>&nbsp;<span class="string" id="3230289">&#39;0&#39;</span>&nbsp;<span class="op" id="3230293">&lt;=</span>&nbsp;<span class="ident" id="3230296">s</span><span class="op" id="3230297">[</span><span class="ident" id="3230298">i</span><span class="op" id="3230299">]</span>&nbsp;<span class="op" id="3230301">&amp;&amp;</span>&nbsp;<span class="ident" id="3230304">s</span><span class="op" id="3230305">[</span><span class="ident" id="3230306">i</span><span class="op" id="3230307">]</span>&nbsp;<span class="op" id="3230309">&lt;=</span>&nbsp;<span class="string" id="3230312">&#39;9&#39;</span><span class="op" id="3230315">;</span>&nbsp;<span class="ident" id="3230317">i</span><span class="op" id="3230318">++</span>&nbsp;<span class="op" id="3230321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230325">n</span>&nbsp;<span class="op" id="3230327">=</span>&nbsp;<span class="ident" id="3230329">n</span><span class="op" id="3230330">*</span><span class="num" id="3230331">10</span>&nbsp;<span class="op" id="3230334">+</span>&nbsp;<span class="builtintype" id="3230336">int</span><span class="op" id="3230339">(</span><span class="ident" id="3230340">s</span><span class="op" id="3230341">[</span><span class="ident" id="3230342">i</span><span class="op" id="3230343">]</span><span class="op" id="3230344">-</span><span class="string" id="3230345">&#39;0&#39;</span><span class="op" id="3230348">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230352">if</span>&nbsp;<span class="ident" id="3230355">n</span>&nbsp;<span class="op" id="3230357">&gt;=</span>&nbsp;<span class="ident" id="3230360">big</span>&nbsp;<span class="op" id="3230364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230369">return</span>&nbsp;<span class="num" id="3230376">0</span><span class="op" id="3230377">,</span>&nbsp;<span class="ident" id="3230379">i</span><span class="op" id="3230380">,</span>&nbsp;<span class="builtintype" id="3230382">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230396">if</span>&nbsp;<span class="ident" id="3230399">i</span>&nbsp;<span class="op" id="3230401">==</span>&nbsp;<span class="ident" id="3230404">i0</span>&nbsp;<span class="op" id="3230407">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230411">return</span>&nbsp;<span class="num" id="3230418">0</span><span class="op" id="3230419">,</span>&nbsp;<span class="ident" id="3230421">i</span><span class="op" id="3230422">,</span>&nbsp;<span class="builtintype" id="3230424">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230434">return</span>&nbsp;<span class="ident" id="3230441">n</span><span class="op" id="3230442">,</span>&nbsp;<span class="ident" id="3230444">i</span><span class="op" id="3230445">,</span>&nbsp;<span class="builtintype" id="3230447">true</span><br>
<span class="lineno"></span><span class="op" id="3230452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="3230455">//&nbsp;Hexadecimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno"></span><span class="comment" id="3230501">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="3230541">func</span>&nbsp;<span class="ident" id="3230546">xtoi</span><span class="op" id="3230550">(</span><span class="ident" id="3230551">s</span>&nbsp;<span class="builtintype" id="3230553">string</span><span class="op" id="3230559">,</span>&nbsp;<span class="ident" id="3230561">i0</span>&nbsp;<span class="builtintype" id="3230564">int</span><span class="op" id="3230567">)</span>&nbsp;<span class="op" id="3230569">(</span><span class="ident" id="3230570">n</span>&nbsp;<span class="builtintype" id="3230572">int</span><span class="op" id="3230575">,</span>&nbsp;<span class="ident" id="3230577">i</span>&nbsp;<span class="builtintype" id="3230579">int</span><span class="op" id="3230582">,</span>&nbsp;<span class="ident" id="3230584">ok</span>&nbsp;<span class="builtintype" id="3230587">bool</span><span class="op" id="3230591">)</span>&nbsp;<span class="op" id="3230593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230596">n</span>&nbsp;<span class="op" id="3230598">=</span>&nbsp;<span class="num" id="3230600">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230603">for</span>&nbsp;<span class="ident" id="3230607">i</span>&nbsp;<span class="op" id="3230609">=</span>&nbsp;<span class="ident" id="3230611">i0</span><span class="op" id="3230613">;</span>&nbsp;<span class="ident" id="3230615">i</span>&nbsp;<span class="op" id="3230617">&lt;</span>&nbsp;<span class="builtinfunc" id="3230619">len</span><span class="op" id="3230622">(</span><span class="ident" id="3230623">s</span><span class="op" id="3230624">)</span><span class="op" id="3230625">;</span>&nbsp;<span class="ident" id="3230627">i</span><span class="op" id="3230628">++</span>&nbsp;<span class="op" id="3230631">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230635">if</span>&nbsp;<span class="string" id="3230638">&#39;0&#39;</span>&nbsp;<span class="op" id="3230642">&lt;=</span>&nbsp;<span class="ident" id="3230645">s</span><span class="op" id="3230646">[</span><span class="ident" id="3230647">i</span><span class="op" id="3230648">]</span>&nbsp;<span class="op" id="3230650">&amp;&amp;</span>&nbsp;<span class="ident" id="3230653">s</span><span class="op" id="3230654">[</span><span class="ident" id="3230655">i</span><span class="op" id="3230656">]</span>&nbsp;<span class="op" id="3230658">&lt;=</span>&nbsp;<span class="string" id="3230661">&#39;9&#39;</span>&nbsp;<span class="op" id="3230665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230670">n</span>&nbsp;<span class="op" id="3230672">*=</span>&nbsp;<span class="num" id="3230675">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230681">n</span>&nbsp;<span class="op" id="3230683">+=</span>&nbsp;<span class="builtintype" id="3230686">int</span><span class="op" id="3230689">(</span><span class="ident" id="3230690">s</span><span class="op" id="3230691">[</span><span class="ident" id="3230692">i</span><span class="op" id="3230693">]</span>&nbsp;<span class="op" id="3230695">-</span>&nbsp;<span class="string" id="3230697">&#39;0&#39;</span><span class="op" id="3230700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230704">}</span>&nbsp;<span class="keyword" id="3230706">else</span>&nbsp;<span class="keyword" id="3230711">if</span>&nbsp;<span class="string" id="3230714">&#39;a&#39;</span>&nbsp;<span class="op" id="3230718">&lt;=</span>&nbsp;<span class="ident" id="3230721">s</span><span class="op" id="3230722">[</span><span class="ident" id="3230723">i</span><span class="op" id="3230724">]</span>&nbsp;<span class="op" id="3230726">&amp;&amp;</span>&nbsp;<span class="ident" id="3230729">s</span><span class="op" id="3230730">[</span><span class="ident" id="3230731">i</span><span class="op" id="3230732">]</span>&nbsp;<span class="op" id="3230734">&lt;=</span>&nbsp;<span class="string" id="3230737">&#39;f&#39;</span>&nbsp;<span class="op" id="3230741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230746">n</span>&nbsp;<span class="op" id="3230748">*=</span>&nbsp;<span class="num" id="3230751">16</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230757">n</span>&nbsp;<span class="op" id="3230759">+=</span>&nbsp;<span class="builtintype" id="3230762">int</span><span class="op" id="3230765">(</span><span class="ident" id="3230766">s</span><span class="op" id="3230767">[</span><span class="ident" id="3230768">i</span><span class="op" id="3230769">]</span><span class="op" id="3230770">-</span><span class="string" id="3230771">&#39;a&#39;</span><span class="op" id="3230774">)</span>&nbsp;<span class="op" id="3230776">+</span>&nbsp;<span class="num" id="3230778">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230783">}</span>&nbsp;<span class="keyword" id="3230785">else</span>&nbsp;<span class="keyword" id="3230790">if</span>&nbsp;<span class="string" id="3230793">&#39;A&#39;</span>&nbsp;<span class="op" id="3230797">&lt;=</span>&nbsp;<span class="ident" id="3230800">s</span><span class="op" id="3230801">[</span><span class="ident" id="3230802">i</span><span class="op" id="3230803">]</span>&nbsp;<span class="op" id="3230805">&amp;&amp;</span>&nbsp;<span class="ident" id="3230808">s</span><span class="op" id="3230809">[</span><span class="ident" id="3230810">i</span><span class="op" id="3230811">]</span>&nbsp;<span class="op" id="3230813">&lt;=</span>&nbsp;<span class="string" id="3230816">&#39;F&#39;</span>&nbsp;<span class="op" id="3230820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230825">n</span>&nbsp;<span class="op" id="3230827">*=</span>&nbsp;<span class="num" id="3230830">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3230836">n</span>&nbsp;<span class="op" id="3230838">+=</span>&nbsp;<span class="builtintype" id="3230841">int</span><span class="op" id="3230844">(</span><span class="ident" id="3230845">s</span><span class="op" id="3230846">[</span><span class="ident" id="3230847">i</span><span class="op" id="3230848">]</span><span class="op" id="3230849">-</span><span class="string" id="3230850">&#39;A&#39;</span><span class="op" id="3230853">)</span>&nbsp;<span class="op" id="3230855">+</span>&nbsp;<span class="num" id="3230857">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230862">}</span>&nbsp;<span class="keyword" id="3230864">else</span>&nbsp;<span class="op" id="3230869">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230874">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230886">if</span>&nbsp;<span class="ident" id="3230889">n</span>&nbsp;<span class="op" id="3230891">&gt;=</span>&nbsp;<span class="ident" id="3230894">big</span>&nbsp;<span class="op" id="3230898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230903">return</span>&nbsp;<span class="num" id="3230910">0</span><span class="op" id="3230911">,</span>&nbsp;<span class="ident" id="3230913">i</span><span class="op" id="3230914">,</span>&nbsp;<span class="builtintype" id="3230916">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230924">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230930">if</span>&nbsp;<span class="ident" id="3230933">i</span>&nbsp;<span class="op" id="3230935">==</span>&nbsp;<span class="ident" id="3230938">i0</span>&nbsp;<span class="op" id="3230941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230945">return</span>&nbsp;<span class="num" id="3230952">0</span><span class="op" id="3230953">,</span>&nbsp;<span class="ident" id="3230955">i</span><span class="op" id="3230956">,</span>&nbsp;<span class="builtintype" id="3230958">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3230965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3230968">return</span>&nbsp;<span class="ident" id="3230975">n</span><span class="op" id="3230976">,</span>&nbsp;<span class="ident" id="3230978">i</span><span class="op" id="3230979">,</span>&nbsp;<span class="builtintype" id="3230981">true</span><br>
<span class="lineno">160</span><span class="op" id="3230986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3230989">//&nbsp;xtoi2&nbsp;converts&nbsp;the&nbsp;next&nbsp;two&nbsp;hex&nbsp;digits&nbsp;of&nbsp;s&nbsp;into&nbsp;a&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="3231049">//&nbsp;If&nbsp;s&nbsp;is&nbsp;longer&nbsp;than&nbsp;2&nbsp;bytes&nbsp;then&nbsp;the&nbsp;third&nbsp;byte&nbsp;must&nbsp;be&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="3231111">//&nbsp;If&nbsp;the&nbsp;first&nbsp;two&nbsp;bytes&nbsp;of&nbsp;s&nbsp;are&nbsp;not&nbsp;hex&nbsp;digits&nbsp;or&nbsp;the&nbsp;third&nbsp;byte</span><br>
<span class="lineno">165</span><span class="comment" id="3231179">//&nbsp;does&nbsp;not&nbsp;match&nbsp;e,&nbsp;false&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span><span class="keyword" id="3231219">func</span>&nbsp;<span class="ident" id="3231224">xtoi2</span><span class="op" id="3231229">(</span><span class="ident" id="3231230">s</span>&nbsp;<span class="builtintype" id="3231232">string</span><span class="op" id="3231238">,</span>&nbsp;<span class="ident" id="3231240">e</span>&nbsp;<span class="builtintype" id="3231242">byte</span><span class="op" id="3231246">)</span>&nbsp;<span class="op" id="3231248">(</span><span class="builtintype" id="3231249">byte</span><span class="op" id="3231253">,</span>&nbsp;<span class="builtintype" id="3231255">bool</span><span class="op" id="3231259">)</span>&nbsp;<span class="op" id="3231261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231264">if</span>&nbsp;<span class="builtinfunc" id="3231267">len</span><span class="op" id="3231270">(</span><span class="ident" id="3231271">s</span><span class="op" id="3231272">)</span>&nbsp;<span class="op" id="3231274">&gt;</span>&nbsp;<span class="num" id="3231276">2</span>&nbsp;<span class="op" id="3231278">&amp;&amp;</span>&nbsp;<span class="ident" id="3231281">s</span><span class="op" id="3231282">[</span><span class="num" id="3231283">2</span><span class="op" id="3231284">]</span>&nbsp;<span class="op" id="3231286">!=</span>&nbsp;<span class="ident" id="3231289">e</span>&nbsp;<span class="op" id="3231291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231295">return</span>&nbsp;<span class="num" id="3231302">0</span><span class="op" id="3231303">,</span>&nbsp;<span class="builtintype" id="3231305">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231312">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231315">n</span><span class="op" id="3231316">,</span>&nbsp;<span class="ident" id="3231318">ei</span><span class="op" id="3231320">,</span>&nbsp;<span class="ident" id="3231322">ok</span>&nbsp;<span class="op" id="3231325">:=</span>&nbsp;<span class="ident" id="3231328">xtoi</span><span class="op" id="3231332">(</span><span class="ident" id="3231333">s</span><span class="op" id="3231334">[</span><span class="op" id="3231335">:</span><span class="num" id="3231336">2</span><span class="op" id="3231337">]</span><span class="op" id="3231338">,</span>&nbsp;<span class="num" id="3231340">0</span><span class="op" id="3231341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231344">return</span>&nbsp;<span class="builtintype" id="3231351">byte</span><span class="op" id="3231355">(</span><span class="ident" id="3231356">n</span><span class="op" id="3231357">)</span><span class="op" id="3231358">,</span>&nbsp;<span class="ident" id="3231360">ok</span>&nbsp;<span class="op" id="3231363">&amp;&amp;</span>&nbsp;<span class="ident" id="3231366">ei</span>&nbsp;<span class="op" id="3231369">==</span>&nbsp;<span class="num" id="3231372">2</span><br>
<span class="lineno"></span><span class="op" id="3231374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3231377">//&nbsp;Integer&nbsp;to&nbsp;decimal.</span><br>
<span class="lineno">175</span><span class="keyword" id="3231400">func</span>&nbsp;<span class="ident" id="3231405">itoa</span><span class="op" id="3231409">(</span><span class="ident" id="3231410">i</span>&nbsp;<span class="builtintype" id="3231412">int</span><span class="op" id="3231415">)</span>&nbsp;<span class="builtintype" id="3231417">string</span>&nbsp;<span class="op" id="3231424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231427">var</span>&nbsp;<span class="ident" id="3231431">buf</span>&nbsp;<span class="op" id="3231435">[</span><span class="num" id="3231436">30</span><span class="op" id="3231438">]</span><span class="builtintype" id="3231439">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231445">n</span>&nbsp;<span class="op" id="3231447">:=</span>&nbsp;<span class="builtinfunc" id="3231450">len</span><span class="op" id="3231453">(</span><span class="ident" id="3231454">buf</span><span class="op" id="3231457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231460">neg</span>&nbsp;<span class="op" id="3231464">:=</span>&nbsp;<span class="builtintype" id="3231467">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231474">if</span>&nbsp;<span class="ident" id="3231477">i</span>&nbsp;<span class="op" id="3231479">&lt;</span>&nbsp;<span class="num" id="3231481">0</span>&nbsp;<span class="op" id="3231483">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231487">i</span>&nbsp;<span class="op" id="3231489">=</span>&nbsp;<span class="op" id="3231491">-</span><span class="ident" id="3231492">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231496">neg</span>&nbsp;<span class="op" id="3231500">=</span>&nbsp;<span class="builtintype" id="3231502">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231511">ui</span>&nbsp;<span class="op" id="3231514">:=</span>&nbsp;<span class="builtintype" id="3231517">uint</span><span class="op" id="3231521">(</span><span class="ident" id="3231522">i</span><span class="op" id="3231523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231526">for</span>&nbsp;<span class="ident" id="3231530">ui</span>&nbsp;<span class="op" id="3231533">&gt;</span>&nbsp;<span class="num" id="3231535">0</span>&nbsp;<span class="op" id="3231537">||</span>&nbsp;<span class="ident" id="3231540">n</span>&nbsp;<span class="op" id="3231542">==</span>&nbsp;<span class="builtinfunc" id="3231545">len</span><span class="op" id="3231548">(</span><span class="ident" id="3231549">buf</span><span class="op" id="3231552">)</span>&nbsp;<span class="op" id="3231554">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231558">n</span><span class="op" id="3231559">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231564">buf</span><span class="op" id="3231567">[</span><span class="ident" id="3231568">n</span><span class="op" id="3231569">]</span>&nbsp;<span class="op" id="3231571">=</span>&nbsp;<span class="builtintype" id="3231573">byte</span><span class="op" id="3231577">(</span><span class="string" id="3231578">&#39;0&#39;</span>&nbsp;<span class="op" id="3231582">+</span>&nbsp;<span class="ident" id="3231584">ui</span><span class="op" id="3231586">%</span><span class="num" id="3231587">10</span><span class="op" id="3231589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231593">ui</span>&nbsp;<span class="op" id="3231596">/=</span>&nbsp;<span class="num" id="3231599">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231606">if</span>&nbsp;<span class="ident" id="3231609">neg</span>&nbsp;<span class="op" id="3231613">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231617">n</span><span class="op" id="3231618">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231623">buf</span><span class="op" id="3231626">[</span><span class="ident" id="3231627">n</span><span class="op" id="3231628">]</span>&nbsp;<span class="op" id="3231630">=</span>&nbsp;<span class="string" id="3231632">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231640">return</span>&nbsp;<span class="builtintype" id="3231647">string</span><span class="op" id="3231653">(</span><span class="ident" id="3231654">buf</span><span class="op" id="3231657">[</span><span class="ident" id="3231658">n</span><span class="op" id="3231659">:</span><span class="op" id="3231660">]</span><span class="op" id="3231661">)</span><br>
<span class="lineno"></span><span class="op" id="3231663">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="3231666">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3231698">func</span>&nbsp;<span class="ident" id="3231703">itod</span><span class="op" id="3231707">(</span><span class="ident" id="3231708">i</span>&nbsp;<span class="builtintype" id="3231710">uint</span><span class="op" id="3231714">)</span>&nbsp;<span class="builtintype" id="3231716">string</span>&nbsp;<span class="op" id="3231723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231726">if</span>&nbsp;<span class="ident" id="3231729">i</span>&nbsp;<span class="op" id="3231731">==</span>&nbsp;<span class="num" id="3231734">0</span>&nbsp;<span class="op" id="3231736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231740">return</span>&nbsp;<span class="string" id="3231747">&#34;0&#34;</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231752">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3231756">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231795">var</span>&nbsp;<span class="ident" id="3231799">b</span>&nbsp;<span class="op" id="3231801">[</span><span class="num" id="3231802">32</span><span class="op" id="3231804">]</span><span class="builtintype" id="3231805">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231811">bp</span>&nbsp;<span class="op" id="3231814">:=</span>&nbsp;<span class="builtinfunc" id="3231817">len</span><span class="op" id="3231820">(</span><span class="ident" id="3231821">b</span><span class="op" id="3231822">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231825">for</span>&nbsp;<span class="op" id="3231829">;</span>&nbsp;<span class="ident" id="3231831">i</span>&nbsp;<span class="op" id="3231833">&gt;</span>&nbsp;<span class="num" id="3231835">0</span><span class="op" id="3231836">;</span>&nbsp;<span class="ident" id="3231838">i</span>&nbsp;<span class="op" id="3231840">/=</span>&nbsp;<span class="num" id="3231843">10</span>&nbsp;<span class="op" id="3231846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231850">bp</span><span class="op" id="3231852">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3231857">b</span><span class="op" id="3231858">[</span><span class="ident" id="3231859">bp</span><span class="op" id="3231861">]</span>&nbsp;<span class="op" id="3231863">=</span>&nbsp;<span class="builtintype" id="3231865">byte</span><span class="op" id="3231869">(</span><span class="ident" id="3231870">i</span><span class="op" id="3231871">%</span><span class="num" id="3231872">10</span><span class="op" id="3231874">)</span>&nbsp;<span class="op" id="3231876">+</span>&nbsp;<span class="string" id="3231878">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3231883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3231887">return</span>&nbsp;<span class="builtintype" id="3231894">string</span><span class="op" id="3231900">(</span><span class="ident" id="3231901">b</span><span class="op" id="3231902">[</span><span class="ident" id="3231903">bp</span><span class="op" id="3231905">:</span><span class="op" id="3231906">]</span><span class="op" id="3231907">)</span><br>
<span class="lineno"></span><span class="op" id="3231909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3231912">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;a&nbsp;hexadecimal&nbsp;string.&nbsp;Leading&nbsp;zeros&nbsp;are&nbsp;not&nbsp;printed.</span><br>
<span class="lineno"></span><span class="keyword" id="3231981">func</span>&nbsp;<span class="ident" id="3231986">appendHex</span><span class="op" id="3231995">(</span><span class="ident" id="3231996">dst</span>&nbsp;<span class="op" id="3232000">[</span><span class="op" id="3232001">]</span><span class="builtintype" id="3232002">byte</span><span class="op" id="3232006">,</span>&nbsp;<span class="ident" id="3232008">i</span>&nbsp;<span class="builtintype" id="3232010">uint32</span><span class="op" id="3232016">)</span>&nbsp;<span class="op" id="3232018">[</span><span class="op" id="3232019">]</span><span class="builtintype" id="3232020">byte</span>&nbsp;<span class="op" id="3232025">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232028">if</span>&nbsp;<span class="ident" id="3232031">i</span>&nbsp;<span class="op" id="3232033">==</span>&nbsp;<span class="num" id="3232036">0</span>&nbsp;<span class="op" id="3232038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232042">return</span>&nbsp;<span class="builtinfunc" id="3232049">append</span><span class="op" id="3232055">(</span><span class="ident" id="3232056">dst</span><span class="op" id="3232059">,</span>&nbsp;<span class="string" id="3232061">&#39;0&#39;</span><span class="op" id="3232064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232070">for</span>&nbsp;<span class="ident" id="3232074">j</span>&nbsp;<span class="op" id="3232076">:=</span>&nbsp;<span class="num" id="3232079">7</span><span class="op" id="3232080">;</span>&nbsp;<span class="ident" id="3232082">j</span>&nbsp;<span class="op" id="3232084">&gt;=</span>&nbsp;<span class="num" id="3232087">0</span><span class="op" id="3232088">;</span>&nbsp;<span class="ident" id="3232090">j</span><span class="op" id="3232091">--</span>&nbsp;<span class="op" id="3232094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232098">v</span>&nbsp;<span class="op" id="3232100">:=</span>&nbsp;<span class="ident" id="3232103">i</span>&nbsp;<span class="op" id="3232105">&gt;&gt;</span>&nbsp;<span class="builtintype" id="3232108">uint</span><span class="op" id="3232112">(</span><span class="ident" id="3232113">j</span><span class="op" id="3232114">*</span><span class="num" id="3232115">4</span><span class="op" id="3232116">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232120">if</span>&nbsp;<span class="ident" id="3232123">v</span>&nbsp;<span class="op" id="3232125">&gt;</span>&nbsp;<span class="num" id="3232127">0</span>&nbsp;<span class="op" id="3232129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232134">dst</span>&nbsp;<span class="op" id="3232138">=</span>&nbsp;<span class="builtinfunc" id="3232140">append</span><span class="op" id="3232146">(</span><span class="ident" id="3232147">dst</span><span class="op" id="3232150">,</span>&nbsp;<span class="ident" id="3232152">hexDigit</span><span class="op" id="3232160">[</span><span class="ident" id="3232161">v</span><span class="op" id="3232162">&amp;</span><span class="num" id="3232163">0xf</span><span class="op" id="3232166">]</span><span class="op" id="3232167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232177">return</span>&nbsp;<span class="ident" id="3232184">dst</span><br>
<span class="lineno">225</span><span class="op" id="3232188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3232191">//&nbsp;Number&nbsp;of&nbsp;occurrences&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3232227">func</span>&nbsp;<span class="ident" id="3232232">count</span><span class="op" id="3232237">(</span><span class="ident" id="3232238">s</span>&nbsp;<span class="builtintype" id="3232240">string</span><span class="op" id="3232246">,</span>&nbsp;<span class="ident" id="3232248">b</span>&nbsp;<span class="builtintype" id="3232250">byte</span><span class="op" id="3232254">)</span>&nbsp;<span class="builtintype" id="3232256">int</span>&nbsp;<span class="op" id="3232260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232263">n</span>&nbsp;<span class="op" id="3232265">:=</span>&nbsp;<span class="num" id="3232268">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232271">for</span>&nbsp;<span class="ident" id="3232275">i</span>&nbsp;<span class="op" id="3232277">:=</span>&nbsp;<span class="num" id="3232280">0</span><span class="op" id="3232281">;</span>&nbsp;<span class="ident" id="3232283">i</span>&nbsp;<span class="op" id="3232285">&lt;</span>&nbsp;<span class="builtinfunc" id="3232287">len</span><span class="op" id="3232290">(</span><span class="ident" id="3232291">s</span><span class="op" id="3232292">)</span><span class="op" id="3232293">;</span>&nbsp;<span class="ident" id="3232295">i</span><span class="op" id="3232296">++</span>&nbsp;<span class="op" id="3232299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232303">if</span>&nbsp;<span class="ident" id="3232306">s</span><span class="op" id="3232307">[</span><span class="ident" id="3232308">i</span><span class="op" id="3232309">]</span>&nbsp;<span class="op" id="3232311">==</span>&nbsp;<span class="ident" id="3232314">b</span>&nbsp;<span class="op" id="3232316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232321">n</span><span class="op" id="3232322">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232330">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232333">return</span>&nbsp;<span class="ident" id="3232340">n</span><br>
<span class="lineno"></span><span class="op" id="3232342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3232345">//&nbsp;Index&nbsp;of&nbsp;rightmost&nbsp;occurrence&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3232389">func</span>&nbsp;<span class="ident" id="3232394">last</span><span class="op" id="3232398">(</span><span class="ident" id="3232399">s</span>&nbsp;<span class="builtintype" id="3232401">string</span><span class="op" id="3232407">,</span>&nbsp;<span class="ident" id="3232409">b</span>&nbsp;<span class="builtintype" id="3232411">byte</span><span class="op" id="3232415">)</span>&nbsp;<span class="builtintype" id="3232417">int</span>&nbsp;<span class="op" id="3232421">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3232424">i</span>&nbsp;<span class="op" id="3232426">:=</span>&nbsp;<span class="builtinfunc" id="3232429">len</span><span class="op" id="3232432">(</span><span class="ident" id="3232433">s</span><span class="op" id="3232434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232437">for</span>&nbsp;<span class="ident" id="3232441">i</span><span class="op" id="3232442">--</span><span class="op" id="3232444">;</span>&nbsp;<span class="ident" id="3232446">i</span>&nbsp;<span class="op" id="3232448">&gt;=</span>&nbsp;<span class="num" id="3232451">0</span><span class="op" id="3232452">;</span>&nbsp;<span class="ident" id="3232454">i</span><span class="op" id="3232455">--</span>&nbsp;<span class="op" id="3232458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232462">if</span>&nbsp;<span class="ident" id="3232465">s</span><span class="op" id="3232466">[</span><span class="ident" id="3232467">i</span><span class="op" id="3232468">]</span>&nbsp;<span class="op" id="3232470">==</span>&nbsp;<span class="ident" id="3232473">b</span>&nbsp;<span class="op" id="3232475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232480">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232488">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3232491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3232494">return</span>&nbsp;<span class="ident" id="3232501">i</span><br>
<span class="lineno"></span><span class="op" id="3232503">}</span>
</div>
</body>
</html>
