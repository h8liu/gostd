<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html" class="current">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6960912">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6960967">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6961021">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6961072">package</span>&nbsp;<span class="ident" id="6961080">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6961090">import</span>&nbsp;<span class="op" id="6961097">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6961100">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6961109">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6961117">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6961128">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6961138">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6961141">func</span>&nbsp;<span class="ident" id="6961146">TestNextJsCtx</span><span class="op" id="6961159">(</span><span class="ident" id="6961160">t</span>&nbsp;<span class="op" id="6961162">*</span><span class="ident" id="6961163"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6961170">.</span><span class="ident" id="6961171"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6961172">)</span>&nbsp;<span class="op" id="6961174">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6961177">tests</span>&nbsp;<span class="op" id="6961183">:=</span>&nbsp;<span class="op" id="6961186">[</span><span class="op" id="6961187">]</span><span class="keyword" id="6961188">struct</span>&nbsp;<span class="op" id="6961195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6961199">jsCtx</span>&nbsp;<span class="ident" id="6961205"><a href="/gostd/html/template/context.go.html#4880324">jsCtx</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6961213">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6961219">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6961227">}</span><span class="op" id="6961228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961232">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6961276">{</span><span class="ident" id="6961277"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6961288">,</span>&nbsp;<span class="string" id="6961290">&#34;;&#34;</span><span class="op" id="6961293">}</span><span class="op" id="6961294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961298">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961325">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961378">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961441">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961504">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961527">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6961577">{</span><span class="ident" id="6961578"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6961589">,</span>&nbsp;<span class="string" id="6961591">&#34;}&#34;</span><span class="op" id="6961594">}</span><span class="op" id="6961595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961599">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961665">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6961687">{</span><span class="ident" id="6961688"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6961698">,</span>&nbsp;<span class="string" id="6961700">&#34;)&#34;</span><span class="op" id="6961703">}</span><span class="op" id="6961704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6961708">{</span><span class="ident" id="6961709"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6961719">,</span>&nbsp;<span class="string" id="6961721">&#34;]&#34;</span><span class="op" id="6961724">}</span><span class="op" id="6961725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961729">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961793">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6961826">{</span><span class="ident" id="6961827"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6961838">,</span>&nbsp;<span class="string" id="6961840">&#34;(&#34;</span><span class="op" id="6961843">}</span><span class="op" id="6961844">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6961848">{</span><span class="ident" id="6961849"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6961860">,</span>&nbsp;<span class="string" id="6961862">&#34;[&#34;</span><span class="op" id="6961865">}</span><span class="op" id="6961866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6961870">{</span><span class="ident" id="6961871"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6961882">,</span>&nbsp;<span class="string" id="6961884">&#34;{&#34;</span><span class="op" id="6961887">}</span><span class="op" id="6961888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961892">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6961956">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6961990">{</span><span class="ident" id="6961991"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962002">,</span>&nbsp;<span class="string" id="6962004">&#34;=&#34;</span><span class="op" id="6962007">}</span><span class="op" id="6962008">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962012">{</span><span class="ident" id="6962013"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962024">,</span>&nbsp;<span class="string" id="6962026">&#34;+=&#34;</span><span class="op" id="6962030">}</span><span class="op" id="6962031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962035">{</span><span class="ident" id="6962036"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962047">,</span>&nbsp;<span class="string" id="6962049">&#34;*=&#34;</span><span class="op" id="6962053">}</span><span class="op" id="6962054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962058">{</span><span class="ident" id="6962059"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962070">,</span>&nbsp;<span class="string" id="6962072">&#34;*&#34;</span><span class="op" id="6962075">}</span><span class="op" id="6962076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962080">{</span><span class="ident" id="6962081"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962092">,</span>&nbsp;<span class="string" id="6962094">&#34;!&#34;</span><span class="op" id="6962097">}</span><span class="op" id="6962098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962102">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962166">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962179">{</span><span class="ident" id="6962180"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962191">,</span>&nbsp;<span class="string" id="6962193">&#34;+&#34;</span><span class="op" id="6962196">}</span><span class="op" id="6962197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962201">{</span><span class="ident" id="6962202"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962213">,</span>&nbsp;<span class="string" id="6962215">&#34;-&#34;</span><span class="op" id="6962218">}</span><span class="op" id="6962219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962223">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962269">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962331">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962395">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962444">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962508">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962521">{</span><span class="ident" id="6962522"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6962532">,</span>&nbsp;<span class="string" id="6962534">&#34;--&#34;</span><span class="op" id="6962538">}</span><span class="op" id="6962539">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962543">{</span><span class="ident" id="6962544"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6962554">,</span>&nbsp;<span class="string" id="6962556">&#34;++&#34;</span><span class="op" id="6962560">}</span><span class="op" id="6962561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962565">{</span><span class="ident" id="6962566"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6962576">,</span>&nbsp;<span class="string" id="6962578">&#34;x--&#34;</span><span class="op" id="6962583">}</span><span class="op" id="6962584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962588">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962651">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962671">{</span><span class="ident" id="6962672"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962683">,</span>&nbsp;<span class="string" id="6962685">&#34;x---&#34;</span><span class="op" id="6962691">}</span><span class="op" id="6962692">,</span>&nbsp;<span class="comment" id="6962694">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962722">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962788">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6962855">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962874">{</span><span class="ident" id="6962875"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962886">,</span>&nbsp;<span class="string" id="6962888">&#34;return&#34;</span><span class="op" id="6962896">}</span><span class="op" id="6962897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962901">{</span><span class="ident" id="6962902"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962913">,</span>&nbsp;<span class="string" id="6962915">&#34;return&nbsp;&#34;</span><span class="op" id="6962924">}</span><span class="op" id="6962925">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962929">{</span><span class="ident" id="6962930"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962941">,</span>&nbsp;<span class="string" id="6962943">&#34;return\t&#34;</span><span class="op" id="6962953">}</span><span class="op" id="6962954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962958">{</span><span class="ident" id="6962959"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962970">,</span>&nbsp;<span class="string" id="6962972">&#34;return\n&#34;</span><span class="op" id="6962982">}</span><span class="op" id="6962983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6962987">{</span><span class="ident" id="6962988"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6962999">,</span>&nbsp;<span class="string" id="6963001">&#34;return\u2028&#34;</span><span class="op" id="6963015">}</span><span class="op" id="6963016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6963020">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6963086">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6963148">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6963214">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6963279">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6963345">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963356">{</span><span class="ident" id="6963357"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6963367">,</span>&nbsp;<span class="string" id="6963369">&#34;x&#34;</span><span class="op" id="6963372">}</span><span class="op" id="6963373">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963377">{</span><span class="ident" id="6963378"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6963388">,</span>&nbsp;<span class="string" id="6963390">&#34;x&nbsp;&#34;</span><span class="op" id="6963394">}</span><span class="op" id="6963395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963399">{</span><span class="ident" id="6963400"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6963410">,</span>&nbsp;<span class="string" id="6963412">&#34;x\t&#34;</span><span class="op" id="6963417">}</span><span class="op" id="6963418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963422">{</span><span class="ident" id="6963423"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6963433">,</span>&nbsp;<span class="string" id="6963435">&#34;x\n&#34;</span><span class="op" id="6963440">}</span><span class="op" id="6963441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963445">{</span><span class="ident" id="6963446"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6963456">,</span>&nbsp;<span class="string" id="6963458">&#34;x\u2028&#34;</span><span class="op" id="6963467">}</span><span class="op" id="6963468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963472">{</span><span class="ident" id="6963473"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6963483">,</span>&nbsp;<span class="string" id="6963485">&#34;preturn&#34;</span><span class="op" id="6963494">}</span><span class="op" id="6963495">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6963499">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963529">{</span><span class="ident" id="6963530"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6963540">,</span>&nbsp;<span class="string" id="6963542">&#34;0&#34;</span><span class="op" id="6963545">}</span><span class="op" id="6963546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6963550">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963605">{</span><span class="ident" id="6963606"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6963616">,</span>&nbsp;<span class="string" id="6963618">&#34;0.&#34;</span><span class="op" id="6963622">}</span><span class="op" id="6963623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963626">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6963630">for</span>&nbsp;<span class="ident" id="6963634">_</span><span class="op" id="6963635">,</span>&nbsp;<span class="ident" id="6963637">test</span>&nbsp;<span class="op" id="6963642">:=</span>&nbsp;<span class="keyword" id="6963645">range</span>&nbsp;<span class="ident" id="6963651"><a href="/gostd/html/template/js_test.go.html#6961177">tests</a></span>&nbsp;<span class="op" id="6963657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6963661">if</span>&nbsp;<span class="ident" id="6963664"><a href="/gostd/html/template/js.go.html#4936932">nextJSCtx</a></span><span class="op" id="6963673">(</span><span class="op" id="6963674">[</span><span class="op" id="6963675">]</span><span class="builtintype" id="6963676">byte</span><span class="op" id="6963680">(</span><span class="ident" id="6963681"><a href="/gostd/html/template/js_test.go.html#6963637">test</a></span><span class="op" id="6963685">.</span><span class="ident" id="6963686"><a href="/gostd/html/template/js_test.go.html#6961213">s</a></span><span class="op" id="6963687">)</span><span class="op" id="6963688">,</span>&nbsp;<span class="ident" id="6963690"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6963701">)</span>&nbsp;<span class="op" id="6963703">!=</span>&nbsp;<span class="ident" id="6963706"><a href="/gostd/html/template/js_test.go.html#6963637">test</a></span><span class="op" id="6963710">.</span><span class="ident" id="6963711"><a href="/gostd/html/template/js_test.go.html#6961199">jsCtx</a></span>&nbsp;<span class="op" id="6963717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6963722"><a href="/gostd/html/template/js_test.go.html#6961160">t</a></span><span class="op" id="6963723">.</span><span class="ident" id="6963724"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6963730">(</span><span class="string" id="6963731">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6963747">,</span>&nbsp;<span class="ident" id="6963749"><a href="/gostd/html/template/js_test.go.html#6963637">test</a></span><span class="op" id="6963753">.</span><span class="ident" id="6963754"><a href="/gostd/html/template/js_test.go.html#6961199">jsCtx</a></span><span class="op" id="6963759">,</span>&nbsp;<span class="ident" id="6963761"><a href="/gostd/html/template/js_test.go.html#6963637">test</a></span><span class="op" id="6963765">.</span><span class="ident" id="6963766"><a href="/gostd/html/template/js_test.go.html#6961213">s</a></span><span class="op" id="6963767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963771">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6963775">if</span>&nbsp;<span class="ident" id="6963778"><a href="/gostd/html/template/js.go.html#4936932">nextJSCtx</a></span><span class="op" id="6963787">(</span><span class="op" id="6963788">[</span><span class="op" id="6963789">]</span><span class="builtintype" id="6963790">byte</span><span class="op" id="6963794">(</span><span class="ident" id="6963795"><a href="/gostd/html/template/js_test.go.html#6963637">test</a></span><span class="op" id="6963799">.</span><span class="ident" id="6963800"><a href="/gostd/html/template/js_test.go.html#6961213">s</a></span><span class="op" id="6963801">)</span><span class="op" id="6963802">,</span>&nbsp;<span class="ident" id="6963804"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6963814">)</span>&nbsp;<span class="op" id="6963816">!=</span>&nbsp;<span class="ident" id="6963819"><a href="/gostd/html/template/js_test.go.html#6963637">test</a></span><span class="op" id="6963823">.</span><span class="ident" id="6963824"><a href="/gostd/html/template/js_test.go.html#6961199">jsCtx</a></span>&nbsp;<span class="op" id="6963830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6963835"><a href="/gostd/html/template/js_test.go.html#6961160">t</a></span><span class="op" id="6963836">.</span><span class="ident" id="6963837"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6963843">(</span><span class="string" id="6963844">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6963860">,</span>&nbsp;<span class="ident" id="6963862"><a href="/gostd/html/template/js_test.go.html#6963637">test</a></span><span class="op" id="6963866">.</span><span class="ident" id="6963867"><a href="/gostd/html/template/js_test.go.html#6961199">jsCtx</a></span><span class="op" id="6963872">,</span>&nbsp;<span class="ident" id="6963874"><a href="/gostd/html/template/js_test.go.html#6963637">test</a></span><span class="op" id="6963878">.</span><span class="ident" id="6963879"><a href="/gostd/html/template/js_test.go.html#6961213">s</a></span><span class="op" id="6963880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6963891">if</span>&nbsp;<span class="ident" id="6963894"><a href="/gostd/html/template/js.go.html#4936932">nextJSCtx</a></span><span class="op" id="6963903">(</span><span class="op" id="6963904">[</span><span class="op" id="6963905">]</span><span class="builtintype" id="6963906">byte</span><span class="op" id="6963910">(</span><span class="string" id="6963911">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="6963916">)</span><span class="op" id="6963917">,</span>&nbsp;<span class="ident" id="6963919"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span><span class="op" id="6963930">)</span>&nbsp;<span class="op" id="6963932">!=</span>&nbsp;<span class="ident" id="6963935"><a href="/gostd/html/template/context.go.html#4880411">jsCtxRegexp</a></span>&nbsp;<span class="op" id="6963947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6963951"><a href="/gostd/html/template/js_test.go.html#6961160">t</a></span><span class="op" id="6963952">.</span><span class="ident" id="6963953"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="6963958">(</span><span class="string" id="6963959">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="6963973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6963976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6963980">if</span>&nbsp;<span class="ident" id="6963983"><a href="/gostd/html/template/js.go.html#4936932">nextJSCtx</a></span><span class="op" id="6963992">(</span><span class="op" id="6963993">[</span><span class="op" id="6963994">]</span><span class="builtintype" id="6963995">byte</span><span class="op" id="6963999">(</span><span class="string" id="6964000">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="6964005">)</span><span class="op" id="6964006">,</span>&nbsp;<span class="ident" id="6964008"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span><span class="op" id="6964018">)</span>&nbsp;<span class="op" id="6964020">!=</span>&nbsp;<span class="ident" id="6964023"><a href="/gostd/html/template/context.go.html#4880504">jsCtxDivOp</a></span>&nbsp;<span class="op" id="6964034">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6964038"><a href="/gostd/html/template/js_test.go.html#6961160">t</a></span><span class="op" id="6964039">.</span><span class="ident" id="6964040"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="6964045">(</span><span class="string" id="6964046">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="6964060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964063">}</span><br>
<span class="lineno"></span><span class="op" id="6964065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6964068">func</span>&nbsp;<span class="ident" id="6964073">TestJSValEscaper</span><span class="op" id="6964089">(</span><span class="ident" id="6964090">t</span>&nbsp;<span class="op" id="6964092">*</span><span class="ident" id="6964093"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6964100">.</span><span class="ident" id="6964101"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6964102">)</span>&nbsp;<span class="op" id="6964104">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6964107">tests</span>&nbsp;<span class="op" id="6964113">:=</span>&nbsp;<span class="op" id="6964116">[</span><span class="op" id="6964117">]</span><span class="keyword" id="6964118">struct</span>&nbsp;<span class="op" id="6964125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6964129">x</span>&nbsp;&nbsp;<span class="keyword" id="6964132">interface</span><span class="op" id="6964141">{</span><span class="op" id="6964142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6964146">js</span>&nbsp;<span class="builtintype" id="6964149">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964157">}</span><span class="op" id="6964158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964162">{</span><span class="builtintype" id="6964163">int</span><span class="op" id="6964166">(</span><span class="num" id="6964167">42</span><span class="op" id="6964169">)</span><span class="op" id="6964170">,</span>&nbsp;<span class="string" id="6964172">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6964178">}</span><span class="op" id="6964179">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964183">{</span><span class="builtintype" id="6964184">uint</span><span class="op" id="6964188">(</span><span class="num" id="6964189">42</span><span class="op" id="6964191">)</span><span class="op" id="6964192">,</span>&nbsp;<span class="string" id="6964194">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6964200">}</span><span class="op" id="6964201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964205">{</span><span class="builtintype" id="6964206">int16</span><span class="op" id="6964211">(</span><span class="num" id="6964212">42</span><span class="op" id="6964214">)</span><span class="op" id="6964215">,</span>&nbsp;<span class="string" id="6964217">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6964223">}</span><span class="op" id="6964224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964228">{</span><span class="builtintype" id="6964229">uint16</span><span class="op" id="6964235">(</span><span class="num" id="6964236">42</span><span class="op" id="6964238">)</span><span class="op" id="6964239">,</span>&nbsp;<span class="string" id="6964241">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6964247">}</span><span class="op" id="6964248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964252">{</span><span class="builtintype" id="6964253">int32</span><span class="op" id="6964258">(</span><span class="op" id="6964259">-</span><span class="num" id="6964260">42</span><span class="op" id="6964262">)</span><span class="op" id="6964263">,</span>&nbsp;<span class="string" id="6964265">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="6964272">}</span><span class="op" id="6964273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964277">{</span><span class="builtintype" id="6964278">uint32</span><span class="op" id="6964284">(</span><span class="num" id="6964285">42</span><span class="op" id="6964287">)</span><span class="op" id="6964288">,</span>&nbsp;<span class="string" id="6964290">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6964296">}</span><span class="op" id="6964297">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964301">{</span><span class="builtintype" id="6964302">int16</span><span class="op" id="6964307">(</span><span class="op" id="6964308">-</span><span class="num" id="6964309">42</span><span class="op" id="6964311">)</span><span class="op" id="6964312">,</span>&nbsp;<span class="string" id="6964314">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="6964321">}</span><span class="op" id="6964322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964326">{</span><span class="builtintype" id="6964327">uint16</span><span class="op" id="6964333">(</span><span class="num" id="6964334">42</span><span class="op" id="6964336">)</span><span class="op" id="6964337">,</span>&nbsp;<span class="string" id="6964339">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6964345">}</span><span class="op" id="6964346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964350">{</span><span class="builtintype" id="6964351">int64</span><span class="op" id="6964356">(</span><span class="op" id="6964357">-</span><span class="num" id="6964358">42</span><span class="op" id="6964360">)</span><span class="op" id="6964361">,</span>&nbsp;<span class="string" id="6964363">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="6964370">}</span><span class="op" id="6964371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964375">{</span><span class="builtintype" id="6964376">uint64</span><span class="op" id="6964382">(</span><span class="num" id="6964383">42</span><span class="op" id="6964385">)</span><span class="op" id="6964386">,</span>&nbsp;<span class="string" id="6964388">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6964394">}</span><span class="op" id="6964395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964399">{</span><span class="builtintype" id="6964400">uint64</span><span class="op" id="6964406">(</span><span class="num" id="6964407">1</span><span class="op" id="6964408">)</span>&nbsp;<span class="op" id="6964410">&lt;&lt;</span>&nbsp;<span class="num" id="6964413">53</span><span class="op" id="6964415">,</span>&nbsp;<span class="string" id="6964417">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="6964437">}</span><span class="op" id="6964438">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6964442">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6964494">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964548">{</span><span class="builtintype" id="6964549">uint64</span><span class="op" id="6964555">(</span><span class="num" id="6964556">1</span><span class="op" id="6964557">)</span><span class="op" id="6964558">&lt;&lt;</span><span class="num" id="6964560">53</span>&nbsp;<span class="op" id="6964563">+</span>&nbsp;<span class="num" id="6964565">1</span><span class="op" id="6964566">,</span>&nbsp;<span class="string" id="6964568">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="6964588">}</span><span class="op" id="6964589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964593">{</span><span class="builtintype" id="6964594">float32</span><span class="op" id="6964601">(</span><span class="num" id="6964602">1.0</span><span class="op" id="6964605">)</span><span class="op" id="6964606">,</span>&nbsp;<span class="string" id="6964608">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="6964613">}</span><span class="op" id="6964614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964618">{</span><span class="builtintype" id="6964619">float32</span><span class="op" id="6964626">(</span><span class="op" id="6964627">-</span><span class="num" id="6964628">1.0</span><span class="op" id="6964631">)</span><span class="op" id="6964632">,</span>&nbsp;<span class="string" id="6964634">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="6964640">}</span><span class="op" id="6964641">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964645">{</span><span class="builtintype" id="6964646">float32</span><span class="op" id="6964653">(</span><span class="num" id="6964654">0.5</span><span class="op" id="6964657">)</span><span class="op" id="6964658">,</span>&nbsp;<span class="string" id="6964660">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="6964667">}</span><span class="op" id="6964668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964672">{</span><span class="builtintype" id="6964673">float32</span><span class="op" id="6964680">(</span><span class="op" id="6964681">-</span><span class="num" id="6964682">0.5</span><span class="op" id="6964685">)</span><span class="op" id="6964686">,</span>&nbsp;<span class="string" id="6964688">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="6964696">}</span><span class="op" id="6964697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964701">{</span><span class="builtintype" id="6964702">float32</span><span class="op" id="6964709">(</span><span class="num" id="6964710">1.0</span><span class="op" id="6964713">)</span>&nbsp;<span class="op" id="6964715">/</span>&nbsp;<span class="builtintype" id="6964717">float32</span><span class="op" id="6964724">(</span><span class="num" id="6964725">256</span><span class="op" id="6964728">)</span><span class="op" id="6964729">,</span>&nbsp;<span class="string" id="6964731">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="6964745">}</span><span class="op" id="6964746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964750">{</span><span class="builtintype" id="6964751">float32</span><span class="op" id="6964758">(</span><span class="num" id="6964759">0</span><span class="op" id="6964760">)</span><span class="op" id="6964761">,</span>&nbsp;<span class="string" id="6964763">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="6964768">}</span><span class="op" id="6964769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964773">{</span><span class="ident" id="6964774"><a href="/gostd/html/template/js_test.go.html#6961109">math</a></span><span class="op" id="6964778">.</span><span class="ident" id="6964779"><a href="/gostd/math/copysign.go.html#2216466">Copysign</a></span><span class="op" id="6964787">(</span><span class="num" id="6964788">0</span><span class="op" id="6964789">,</span>&nbsp;<span class="op" id="6964791">-</span><span class="num" id="6964792">1</span><span class="op" id="6964793">)</span><span class="op" id="6964794">,</span>&nbsp;<span class="string" id="6964796">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="6964802">}</span><span class="op" id="6964803">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964807">{</span><span class="builtintype" id="6964808">float64</span><span class="op" id="6964815">(</span><span class="num" id="6964816">1.0</span><span class="op" id="6964819">)</span><span class="op" id="6964820">,</span>&nbsp;<span class="string" id="6964822">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="6964827">}</span><span class="op" id="6964828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964832">{</span><span class="builtintype" id="6964833">float64</span><span class="op" id="6964840">(</span><span class="op" id="6964841">-</span><span class="num" id="6964842">1.0</span><span class="op" id="6964845">)</span><span class="op" id="6964846">,</span>&nbsp;<span class="string" id="6964848">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="6964854">}</span><span class="op" id="6964855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964859">{</span><span class="builtintype" id="6964860">float64</span><span class="op" id="6964867">(</span><span class="num" id="6964868">0.5</span><span class="op" id="6964871">)</span><span class="op" id="6964872">,</span>&nbsp;<span class="string" id="6964874">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="6964881">}</span><span class="op" id="6964882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964886">{</span><span class="builtintype" id="6964887">float64</span><span class="op" id="6964894">(</span><span class="op" id="6964895">-</span><span class="num" id="6964896">0.5</span><span class="op" id="6964899">)</span><span class="op" id="6964900">,</span>&nbsp;<span class="string" id="6964902">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="6964910">}</span><span class="op" id="6964911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964915">{</span><span class="builtintype" id="6964916">float64</span><span class="op" id="6964923">(</span><span class="num" id="6964924">0</span><span class="op" id="6964925">)</span><span class="op" id="6964926">,</span>&nbsp;<span class="string" id="6964928">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="6964933">}</span><span class="op" id="6964934">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964938">{</span><span class="ident" id="6964939"><a href="/gostd/html/template/js_test.go.html#6961109">math</a></span><span class="op" id="6964943">.</span><span class="ident" id="6964944"><a href="/gostd/math/copysign.go.html#2216466">Copysign</a></span><span class="op" id="6964952">(</span><span class="num" id="6964953">0</span><span class="op" id="6964954">,</span>&nbsp;<span class="op" id="6964956">-</span><span class="num" id="6964957">1</span><span class="op" id="6964958">)</span><span class="op" id="6964959">,</span>&nbsp;<span class="string" id="6964961">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="6964967">}</span><span class="op" id="6964968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964972">{</span><span class="string" id="6964973">&#34;&#34;</span><span class="op" id="6964975">,</span>&nbsp;<span class="string" id="6964977">`&#34;&#34;`</span><span class="op" id="6964981">}</span><span class="op" id="6964982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6964986">{</span><span class="string" id="6964987">&#34;foo&#34;</span><span class="op" id="6964992">,</span>&nbsp;<span class="string" id="6964994">`&#34;foo&#34;`</span><span class="op" id="6965001">}</span><span class="op" id="6965002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6965006">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965021">{</span><span class="string" id="6965022">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="6965040">,</span>&nbsp;<span class="string" id="6965042">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="6965062">}</span><span class="op" id="6965063">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6965067">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965115">{</span><span class="string" id="6965116">&#34;\t\x0b&#34;</span><span class="op" id="6965124">,</span>&nbsp;<span class="string" id="6965126">`&#34;\t\u000b&#34;`</span><span class="op" id="6965138">}</span><span class="op" id="6965139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965143">{</span><span class="keyword" id="6965144">struct</span><span class="op" id="6965150">{</span>&nbsp;<span class="ident" id="6965152">X</span><span class="op" id="6965153">,</span>&nbsp;<span class="ident" id="6965155">Y</span>&nbsp;<span class="builtintype" id="6965157">int</span>&nbsp;<span class="op" id="6965161">}</span><span class="op" id="6965162">{</span><span class="num" id="6965163">1</span><span class="op" id="6965164">,</span>&nbsp;<span class="num" id="6965166">2</span><span class="op" id="6965167">}</span><span class="op" id="6965168">,</span>&nbsp;<span class="string" id="6965170">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="6965185">}</span><span class="op" id="6965186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965190">{</span><span class="op" id="6965191">[</span><span class="op" id="6965192">]</span><span class="keyword" id="6965193">interface</span><span class="op" id="6965202">{</span><span class="op" id="6965203">}</span><span class="op" id="6965204">{</span><span class="op" id="6965205">}</span><span class="op" id="6965206">,</span>&nbsp;<span class="string" id="6965208">&#34;[]&#34;</span><span class="op" id="6965212">}</span><span class="op" id="6965213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965217">{</span><span class="op" id="6965218">[</span><span class="op" id="6965219">]</span><span class="keyword" id="6965220">interface</span><span class="op" id="6965229">{</span><span class="op" id="6965230">}</span><span class="op" id="6965231">{</span><span class="num" id="6965232">42</span><span class="op" id="6965234">,</span>&nbsp;<span class="string" id="6965236">&#34;foo&#34;</span><span class="op" id="6965241">,</span>&nbsp;<span class="builtintype" id="6965243">nil</span><span class="op" id="6965246">}</span><span class="op" id="6965247">,</span>&nbsp;<span class="string" id="6965249">`[42,&#34;foo&#34;,null]`</span><span class="op" id="6965266">}</span><span class="op" id="6965267">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965271">{</span><span class="op" id="6965272">[</span><span class="op" id="6965273">]</span><span class="builtintype" id="6965274">string</span><span class="op" id="6965280">{</span><span class="string" id="6965281">&#34;&lt;!--&#34;</span><span class="op" id="6965287">,</span>&nbsp;<span class="string" id="6965289">&#34;&lt;/script&gt;&#34;</span><span class="op" id="6965300">,</span>&nbsp;<span class="string" id="6965302">&#34;--&gt;&#34;</span><span class="op" id="6965307">}</span><span class="op" id="6965308">,</span>&nbsp;<span class="string" id="6965310">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="6965358">}</span><span class="op" id="6965359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965363">{</span><span class="string" id="6965364">&#34;&lt;!--&#34;</span><span class="op" id="6965370">,</span>&nbsp;<span class="string" id="6965372">`&#34;\u003c!--&#34;`</span><span class="op" id="6965385">}</span><span class="op" id="6965386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965390">{</span><span class="string" id="6965391">&#34;--&gt;&#34;</span><span class="op" id="6965396">,</span>&nbsp;<span class="string" id="6965398">`&#34;--\u003e&#34;`</span><span class="op" id="6965410">}</span><span class="op" id="6965411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965415">{</span><span class="string" id="6965416">&#34;&lt;![CDATA[&#34;</span><span class="op" id="6965427">,</span>&nbsp;<span class="string" id="6965429">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="6965447">}</span><span class="op" id="6965448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965452">{</span><span class="string" id="6965453">&#34;]]&gt;&#34;</span><span class="op" id="6965458">,</span>&nbsp;<span class="string" id="6965460">`&#34;]]\u003e&#34;`</span><span class="op" id="6965472">}</span><span class="op" id="6965473">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965477">{</span><span class="string" id="6965478">&#34;&lt;/script&#34;</span><span class="op" id="6965488">,</span>&nbsp;<span class="string" id="6965490">`&#34;\u003c/script&#34;`</span><span class="op" id="6965507">}</span><span class="op" id="6965508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965512">{</span><span class="string" id="6965513">&#34;\U0001D11E&#34;</span><span class="op" id="6965525">,</span>&nbsp;<span class="string" id="6965527">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="6965543">}</span><span class="op" id="6965544">,</span>&nbsp;<span class="comment" id="6965546">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6965572">for</span>&nbsp;<span class="ident" id="6965576">_</span><span class="op" id="6965577">,</span>&nbsp;<span class="ident" id="6965579">test</span>&nbsp;<span class="op" id="6965584">:=</span>&nbsp;<span class="keyword" id="6965587">range</span>&nbsp;<span class="ident" id="6965593"><a href="/gostd/html/template/js_test.go.html#6964107">tests</a></span>&nbsp;<span class="op" id="6965599">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6965603">if</span>&nbsp;<span class="ident" id="6965606">js</span>&nbsp;<span class="op" id="6965609">:=</span>&nbsp;<span class="ident" id="6965612"><a href="/gostd/html/template/js.go.html#4940394">jsValEscaper</a></span><span class="op" id="6965624">(</span><span class="ident" id="6965625"><a href="/gostd/html/template/js_test.go.html#6965579">test</a></span><span class="op" id="6965629">.</span><span class="ident" id="6965630"><a href="/gostd/html/template/js_test.go.html#6964129">x</a></span><span class="op" id="6965631">)</span><span class="op" id="6965632">;</span>&nbsp;<span class="ident" id="6965634"><a href="/gostd/html/template/js_test.go.html#6965606">js</a></span>&nbsp;<span class="op" id="6965637">!=</span>&nbsp;<span class="ident" id="6965640"><a href="/gostd/html/template/js_test.go.html#6965579">test</a></span><span class="op" id="6965644">.</span><span class="ident" id="6965645"><a href="/gostd/html/template/js_test.go.html#6964146">js</a></span>&nbsp;<span class="op" id="6965648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6965653"><a href="/gostd/html/template/js_test.go.html#6964090">t</a></span><span class="op" id="6965654">.</span><span class="ident" id="6965655"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6965661">(</span><span class="string" id="6965662">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="6965690">,</span>&nbsp;<span class="ident" id="6965692"><a href="/gostd/html/template/js_test.go.html#6965579">test</a></span><span class="op" id="6965696">.</span><span class="ident" id="6965697"><a href="/gostd/html/template/js_test.go.html#6964129">x</a></span><span class="op" id="6965698">,</span>&nbsp;<span class="ident" id="6965700"><a href="/gostd/html/template/js_test.go.html#6965579">test</a></span><span class="op" id="6965704">.</span><span class="ident" id="6965705"><a href="/gostd/html/template/js_test.go.html#6964146">js</a></span><span class="op" id="6965707">,</span>&nbsp;<span class="ident" id="6965709"><a href="/gostd/html/template/js_test.go.html#6965606">js</a></span><span class="op" id="6965711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6965719">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6965776">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6965793">a</span>&nbsp;<span class="op" id="6965795">:=</span>&nbsp;<span class="op" id="6965798">[</span><span class="op" id="6965799">]</span><span class="keyword" id="6965800">interface</span><span class="op" id="6965809">{</span><span class="op" id="6965810">}</span><span class="op" id="6965811">{</span><span class="ident" id="6965812"><a href="/gostd/html/template/js_test.go.html#6965579">test</a></span><span class="op" id="6965816">.</span><span class="ident" id="6965817"><a href="/gostd/html/template/js_test.go.html#6964129">x</a></span><span class="op" id="6965818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6965822">want</span>&nbsp;<span class="op" id="6965827">:=</span>&nbsp;<span class="string" id="6965830">&#34;[&#34;</span>&nbsp;<span class="op" id="6965834">+</span>&nbsp;<span class="ident" id="6965836"><a href="/gostd/html/template/js_test.go.html#6961117">strings</a></span><span class="op" id="6965843">.</span><span class="ident" id="6965844"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="6965853">(</span><span class="ident" id="6965854"><a href="/gostd/html/template/js_test.go.html#6965579">test</a></span><span class="op" id="6965858">.</span><span class="ident" id="6965859"><a href="/gostd/html/template/js_test.go.html#6964146">js</a></span><span class="op" id="6965861">)</span>&nbsp;<span class="op" id="6965863">+</span>&nbsp;<span class="string" id="6965865">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6965871">if</span>&nbsp;<span class="ident" id="6965874">js</span>&nbsp;<span class="op" id="6965877">:=</span>&nbsp;<span class="ident" id="6965880"><a href="/gostd/html/template/js.go.html#4940394">jsValEscaper</a></span><span class="op" id="6965892">(</span><span class="ident" id="6965893"><a href="/gostd/html/template/js_test.go.html#6965793">a</a></span><span class="op" id="6965894">)</span><span class="op" id="6965895">;</span>&nbsp;<span class="ident" id="6965897"><a href="/gostd/html/template/js_test.go.html#6965874">js</a></span>&nbsp;<span class="op" id="6965900">!=</span>&nbsp;<span class="ident" id="6965903"><a href="/gostd/html/template/js_test.go.html#6965822">want</a></span>&nbsp;<span class="op" id="6965908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6965913"><a href="/gostd/html/template/js_test.go.html#6964090">t</a></span><span class="op" id="6965914">.</span><span class="ident" id="6965915"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6965921">(</span><span class="string" id="6965922">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="6965950">,</span>&nbsp;<span class="ident" id="6965952"><a href="/gostd/html/template/js_test.go.html#6965793">a</a></span><span class="op" id="6965953">,</span>&nbsp;<span class="ident" id="6965955"><a href="/gostd/html/template/js_test.go.html#6965822">want</a></span><span class="op" id="6965959">,</span>&nbsp;<span class="ident" id="6965961"><a href="/gostd/html/template/js_test.go.html#6965874">js</a></span><span class="op" id="6965963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965967">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6965970">}</span><br>
<span class="lineno"></span><span class="op" id="6965972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6965975">func</span>&nbsp;<span class="ident" id="6965980">TestJSStrEscaper</span><span class="op" id="6965996">(</span><span class="ident" id="6965997">t</span>&nbsp;<span class="op" id="6965999">*</span><span class="ident" id="6966000"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6966007">.</span><span class="ident" id="6966008"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6966009">)</span>&nbsp;<span class="op" id="6966011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966014">tests</span>&nbsp;<span class="op" id="6966020">:=</span>&nbsp;<span class="op" id="6966023">[</span><span class="op" id="6966024">]</span><span class="keyword" id="6966025">struct</span>&nbsp;<span class="op" id="6966032">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966036">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="6966040">interface</span><span class="op" id="6966049">{</span><span class="op" id="6966050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966054">esc</span>&nbsp;<span class="builtintype" id="6966058">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966066">}</span><span class="op" id="6966067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966071">{</span><span class="string" id="6966072">&#34;&#34;</span><span class="op" id="6966074">,</span>&nbsp;<span class="string" id="6966076">``</span><span class="op" id="6966078">}</span><span class="op" id="6966079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966083">{</span><span class="string" id="6966084">&#34;foo&#34;</span><span class="op" id="6966089">,</span>&nbsp;<span class="string" id="6966091">`foo`</span><span class="op" id="6966096">}</span><span class="op" id="6966097">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966101">{</span><span class="string" id="6966102">&#34;\u0000&#34;</span><span class="op" id="6966110">,</span>&nbsp;<span class="string" id="6966112">`\0`</span><span class="op" id="6966116">}</span><span class="op" id="6966117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966121">{</span><span class="string" id="6966122">&#34;\t&#34;</span><span class="op" id="6966126">,</span>&nbsp;<span class="string" id="6966128">`\t`</span><span class="op" id="6966132">}</span><span class="op" id="6966133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966137">{</span><span class="string" id="6966138">&#34;\n&#34;</span><span class="op" id="6966142">,</span>&nbsp;<span class="string" id="6966144">`\n`</span><span class="op" id="6966148">}</span><span class="op" id="6966149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966153">{</span><span class="string" id="6966154">&#34;\r&#34;</span><span class="op" id="6966158">,</span>&nbsp;<span class="string" id="6966160">`\r`</span><span class="op" id="6966164">}</span><span class="op" id="6966165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966169">{</span><span class="string" id="6966170">&#34;\u2028&#34;</span><span class="op" id="6966178">,</span>&nbsp;<span class="string" id="6966180">`\u2028`</span><span class="op" id="6966188">}</span><span class="op" id="6966189">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966193">{</span><span class="string" id="6966194">&#34;\u2029&#34;</span><span class="op" id="6966202">,</span>&nbsp;<span class="string" id="6966204">`\u2029`</span><span class="op" id="6966212">}</span><span class="op" id="6966213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966217">{</span><span class="string" id="6966218">&#34;\\&#34;</span><span class="op" id="6966222">,</span>&nbsp;<span class="string" id="6966224">`\\`</span><span class="op" id="6966228">}</span><span class="op" id="6966229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966233">{</span><span class="string" id="6966234">&#34;\\n&#34;</span><span class="op" id="6966239">,</span>&nbsp;<span class="string" id="6966241">`\\n`</span><span class="op" id="6966246">}</span><span class="op" id="6966247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966251">{</span><span class="string" id="6966252">&#34;foo\r\nbar&#34;</span><span class="op" id="6966264">,</span>&nbsp;<span class="string" id="6966266">`foo\r\nbar`</span><span class="op" id="6966278">}</span><span class="op" id="6966279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6966283">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966319">{</span><span class="string" id="6966320">`&#34;`</span><span class="op" id="6966323">,</span>&nbsp;<span class="string" id="6966325">`\x22`</span><span class="op" id="6966331">}</span><span class="op" id="6966332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966336">{</span><span class="string" id="6966337">`&#39;`</span><span class="op" id="6966340">,</span>&nbsp;<span class="string" id="6966342">`\x27`</span><span class="op" id="6966348">}</span><span class="op" id="6966349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6966353">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966408">{</span><span class="string" id="6966409">`&amp;amp;`</span><span class="op" id="6966416">,</span>&nbsp;<span class="string" id="6966418">`\x26amp;`</span><span class="op" id="6966428">}</span><span class="op" id="6966429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6966433">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966496">{</span><span class="string" id="6966497">&#34;&lt;/script&gt;&#34;</span><span class="op" id="6966508">,</span>&nbsp;<span class="string" id="6966510">`\x3c\/script\x3e`</span><span class="op" id="6966528">}</span><span class="op" id="6966529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966533">{</span><span class="string" id="6966534">&#34;&lt;![CDATA[&#34;</span><span class="op" id="6966545">,</span>&nbsp;<span class="string" id="6966547">`\x3c![CDATA[`</span><span class="op" id="6966561">}</span><span class="op" id="6966562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966566">{</span><span class="string" id="6966567">&#34;]]&gt;&#34;</span><span class="op" id="6966572">,</span>&nbsp;<span class="string" id="6966574">`]]\x3e`</span><span class="op" id="6966582">}</span><span class="op" id="6966583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6966587">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6966659">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6966723">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6966784">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6966831">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6966895">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6966962">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6967028">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6967088">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6967152">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967203">{</span><span class="string" id="6967204">&#34;&lt;!--&#34;</span><span class="op" id="6967210">,</span>&nbsp;<span class="string" id="6967212">`\x3c!--`</span><span class="op" id="6967221">}</span><span class="op" id="6967222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967226">{</span><span class="string" id="6967227">&#34;--&gt;&#34;</span><span class="op" id="6967232">,</span>&nbsp;<span class="string" id="6967234">`--\x3e`</span><span class="op" id="6967242">}</span><span class="op" id="6967243">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6967247">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967307">{</span><span class="string" id="6967308">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="6967351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967356">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="6967412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967416">}</span><span class="op" id="6967417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6967421">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967449">{</span><span class="string" id="6967450">&#34;foo\xA0bar&#34;</span><span class="op" id="6967462">,</span>&nbsp;<span class="string" id="6967464">&#34;foo\xA0bar&#34;</span><span class="op" id="6967476">}</span><span class="op" id="6967477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6967481">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967516">{</span><span class="string" id="6967517">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="6967537">,</span>&nbsp;<span class="string" id="6967539">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="6967559">}</span><span class="op" id="6967560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6967567">for</span>&nbsp;<span class="ident" id="6967571">_</span><span class="op" id="6967572">,</span>&nbsp;<span class="ident" id="6967574">test</span>&nbsp;<span class="op" id="6967579">:=</span>&nbsp;<span class="keyword" id="6967582">range</span>&nbsp;<span class="ident" id="6967588"><a href="/gostd/html/template/js_test.go.html#6966014">tests</a></span>&nbsp;<span class="op" id="6967594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967598">esc</span>&nbsp;<span class="op" id="6967602">:=</span>&nbsp;<span class="ident" id="6967605"><a href="/gostd/html/template/js.go.html#4942805">jsStrEscaper</a></span><span class="op" id="6967617">(</span><span class="ident" id="6967618"><a href="/gostd/html/template/js_test.go.html#6967574">test</a></span><span class="op" id="6967622">.</span><span class="ident" id="6967623"><a href="/gostd/html/template/js_test.go.html#6966036">x</a></span><span class="op" id="6967624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6967628">if</span>&nbsp;<span class="ident" id="6967631"><a href="/gostd/html/template/js_test.go.html#6967598">esc</a></span>&nbsp;<span class="op" id="6967635">!=</span>&nbsp;<span class="ident" id="6967638"><a href="/gostd/html/template/js_test.go.html#6967574">test</a></span><span class="op" id="6967642">.</span><span class="ident" id="6967643"><a href="/gostd/html/template/js_test.go.html#6966054">esc</a></span>&nbsp;<span class="op" id="6967647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967652"><a href="/gostd/html/template/js_test.go.html#6965997">t</a></span><span class="op" id="6967653">.</span><span class="ident" id="6967654"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6967660">(</span><span class="string" id="6967661">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6967681">,</span>&nbsp;<span class="ident" id="6967683"><a href="/gostd/html/template/js_test.go.html#6967574">test</a></span><span class="op" id="6967687">.</span><span class="ident" id="6967688"><a href="/gostd/html/template/js_test.go.html#6966036">x</a></span><span class="op" id="6967689">,</span>&nbsp;<span class="ident" id="6967691"><a href="/gostd/html/template/js_test.go.html#6967574">test</a></span><span class="op" id="6967695">.</span><span class="ident" id="6967696"><a href="/gostd/html/template/js_test.go.html#6966054">esc</a></span><span class="op" id="6967699">,</span>&nbsp;<span class="ident" id="6967701"><a href="/gostd/html/template/js_test.go.html#6967598">esc</a></span><span class="op" id="6967704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967708">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967711">}</span><br>
<span class="lineno"></span><span class="op" id="6967713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6967716">func</span>&nbsp;<span class="ident" id="6967721">TestJSRegexpEscaper</span><span class="op" id="6967740">(</span><span class="ident" id="6967741">t</span>&nbsp;<span class="op" id="6967743">*</span><span class="ident" id="6967744"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6967751">.</span><span class="ident" id="6967752"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6967753">)</span>&nbsp;<span class="op" id="6967755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967758">tests</span>&nbsp;<span class="op" id="6967764">:=</span>&nbsp;<span class="op" id="6967767">[</span><span class="op" id="6967768">]</span><span class="keyword" id="6967769">struct</span>&nbsp;<span class="op" id="6967776">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967780">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="6967784">interface</span><span class="op" id="6967793">{</span><span class="op" id="6967794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967798">esc</span>&nbsp;<span class="builtintype" id="6967802">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967810">}</span><span class="op" id="6967811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967815">{</span><span class="string" id="6967816">&#34;&#34;</span><span class="op" id="6967818">,</span>&nbsp;<span class="string" id="6967820">`(?:)`</span><span class="op" id="6967826">}</span><span class="op" id="6967827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967831">{</span><span class="string" id="6967832">&#34;foo&#34;</span><span class="op" id="6967837">,</span>&nbsp;<span class="string" id="6967839">`foo`</span><span class="op" id="6967844">}</span><span class="op" id="6967845">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967849">{</span><span class="string" id="6967850">&#34;\u0000&#34;</span><span class="op" id="6967858">,</span>&nbsp;<span class="string" id="6967860">`\0`</span><span class="op" id="6967864">}</span><span class="op" id="6967865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967869">{</span><span class="string" id="6967870">&#34;\t&#34;</span><span class="op" id="6967874">,</span>&nbsp;<span class="string" id="6967876">`\t`</span><span class="op" id="6967880">}</span><span class="op" id="6967881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967885">{</span><span class="string" id="6967886">&#34;\n&#34;</span><span class="op" id="6967890">,</span>&nbsp;<span class="string" id="6967892">`\n`</span><span class="op" id="6967896">}</span><span class="op" id="6967897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967901">{</span><span class="string" id="6967902">&#34;\r&#34;</span><span class="op" id="6967906">,</span>&nbsp;<span class="string" id="6967908">`\r`</span><span class="op" id="6967912">}</span><span class="op" id="6967913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967917">{</span><span class="string" id="6967918">&#34;\u2028&#34;</span><span class="op" id="6967926">,</span>&nbsp;<span class="string" id="6967928">`\u2028`</span><span class="op" id="6967936">}</span><span class="op" id="6967937">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967941">{</span><span class="string" id="6967942">&#34;\u2029&#34;</span><span class="op" id="6967950">,</span>&nbsp;<span class="string" id="6967952">`\u2029`</span><span class="op" id="6967960">}</span><span class="op" id="6967961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967965">{</span><span class="string" id="6967966">&#34;\\&#34;</span><span class="op" id="6967970">,</span>&nbsp;<span class="string" id="6967972">`\\`</span><span class="op" id="6967976">}</span><span class="op" id="6967977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967981">{</span><span class="string" id="6967982">&#34;\\n&#34;</span><span class="op" id="6967987">,</span>&nbsp;<span class="string" id="6967989">`\\n`</span><span class="op" id="6967994">}</span><span class="op" id="6967995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967999">{</span><span class="string" id="6968000">&#34;foo\r\nbar&#34;</span><span class="op" id="6968012">,</span>&nbsp;<span class="string" id="6968014">`foo\r\nbar`</span><span class="op" id="6968026">}</span><span class="op" id="6968027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6968031">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968067">{</span><span class="string" id="6968068">`&#34;`</span><span class="op" id="6968071">,</span>&nbsp;<span class="string" id="6968073">`\x22`</span><span class="op" id="6968079">}</span><span class="op" id="6968080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968084">{</span><span class="string" id="6968085">`&#39;`</span><span class="op" id="6968088">,</span>&nbsp;<span class="string" id="6968090">`\x27`</span><span class="op" id="6968096">}</span><span class="op" id="6968097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6968101">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968156">{</span><span class="string" id="6968157">`&amp;amp;`</span><span class="op" id="6968164">,</span>&nbsp;<span class="string" id="6968166">`\x26amp;`</span><span class="op" id="6968176">}</span><span class="op" id="6968177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6968181">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968244">{</span><span class="string" id="6968245">&#34;&lt;/script&gt;&#34;</span><span class="op" id="6968256">,</span>&nbsp;<span class="string" id="6968258">`\x3c\/script\x3e`</span><span class="op" id="6968276">}</span><span class="op" id="6968277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968281">{</span><span class="string" id="6968282">&#34;&lt;![CDATA[&#34;</span><span class="op" id="6968293">,</span>&nbsp;<span class="string" id="6968295">`\x3c!\[CDATA\[`</span><span class="op" id="6968311">}</span><span class="op" id="6968312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968316">{</span><span class="string" id="6968317">&#34;]]&gt;&#34;</span><span class="op" id="6968322">,</span>&nbsp;<span class="string" id="6968324">`\]\]\x3e`</span><span class="op" id="6968334">}</span><span class="op" id="6968335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6968339">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968365">{</span><span class="string" id="6968366">&#34;&lt;!--&#34;</span><span class="op" id="6968372">,</span>&nbsp;<span class="string" id="6968374">`\x3c!\-\-`</span><span class="op" id="6968385">}</span><span class="op" id="6968386">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968390">{</span><span class="string" id="6968391">&#34;--&gt;&#34;</span><span class="op" id="6968396">,</span>&nbsp;<span class="string" id="6968398">`\-\-\x3e`</span><span class="op" id="6968408">}</span><span class="op" id="6968409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968413">{</span><span class="string" id="6968414">&#34;*&#34;</span><span class="op" id="6968417">,</span>&nbsp;<span class="string" id="6968419">`\*`</span><span class="op" id="6968423">}</span><span class="op" id="6968424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968428">{</span><span class="string" id="6968429">&#34;+&#34;</span><span class="op" id="6968432">,</span>&nbsp;<span class="string" id="6968434">`\x2b`</span><span class="op" id="6968440">}</span><span class="op" id="6968441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968445">{</span><span class="string" id="6968446">&#34;?&#34;</span><span class="op" id="6968449">,</span>&nbsp;<span class="string" id="6968451">`\?`</span><span class="op" id="6968455">}</span><span class="op" id="6968456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968460">{</span><span class="string" id="6968461">&#34;[](){}&#34;</span><span class="op" id="6968469">,</span>&nbsp;<span class="string" id="6968471">`\[\]\(\)\{\}`</span><span class="op" id="6968485">}</span><span class="op" id="6968486">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968490">{</span><span class="string" id="6968491">&#34;$foo|x.y&#34;</span><span class="op" id="6968501">,</span>&nbsp;<span class="string" id="6968503">`\$foo\|x\.y`</span><span class="op" id="6968516">}</span><span class="op" id="6968517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968521">{</span><span class="string" id="6968522">&#34;x^y&#34;</span><span class="op" id="6968527">,</span>&nbsp;<span class="string" id="6968529">`x\^y`</span><span class="op" id="6968535">}</span><span class="op" id="6968536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6968543">for</span>&nbsp;<span class="ident" id="6968547">_</span><span class="op" id="6968548">,</span>&nbsp;<span class="ident" id="6968550">test</span>&nbsp;<span class="op" id="6968555">:=</span>&nbsp;<span class="keyword" id="6968558">range</span>&nbsp;<span class="ident" id="6968564"><a href="/gostd/html/template/js_test.go.html#6967758">tests</a></span>&nbsp;<span class="op" id="6968570">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968574">esc</span>&nbsp;<span class="op" id="6968578">:=</span>&nbsp;<span class="ident" id="6968581"><a href="/gostd/html/template/js.go.html#4943289">jsRegexpEscaper</a></span><span class="op" id="6968596">(</span><span class="ident" id="6968597"><a href="/gostd/html/template/js_test.go.html#6968550">test</a></span><span class="op" id="6968601">.</span><span class="ident" id="6968602"><a href="/gostd/html/template/js_test.go.html#6967780">x</a></span><span class="op" id="6968603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6968607">if</span>&nbsp;<span class="ident" id="6968610"><a href="/gostd/html/template/js_test.go.html#6968574">esc</a></span>&nbsp;<span class="op" id="6968614">!=</span>&nbsp;<span class="ident" id="6968617"><a href="/gostd/html/template/js_test.go.html#6968550">test</a></span><span class="op" id="6968621">.</span><span class="ident" id="6968622"><a href="/gostd/html/template/js_test.go.html#6967798">esc</a></span>&nbsp;<span class="op" id="6968626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968631"><a href="/gostd/html/template/js_test.go.html#6967741">t</a></span><span class="op" id="6968632">.</span><span class="ident" id="6968633"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6968639">(</span><span class="string" id="6968640">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6968660">,</span>&nbsp;<span class="ident" id="6968662"><a href="/gostd/html/template/js_test.go.html#6968550">test</a></span><span class="op" id="6968666">.</span><span class="ident" id="6968667"><a href="/gostd/html/template/js_test.go.html#6967780">x</a></span><span class="op" id="6968668">,</span>&nbsp;<span class="ident" id="6968670"><a href="/gostd/html/template/js_test.go.html#6968550">test</a></span><span class="op" id="6968674">.</span><span class="ident" id="6968675"><a href="/gostd/html/template/js_test.go.html#6967798">esc</a></span><span class="op" id="6968678">,</span>&nbsp;<span class="ident" id="6968680"><a href="/gostd/html/template/js_test.go.html#6968574">esc</a></span><span class="op" id="6968683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968690">}</span><br>
<span class="lineno">265</span><span class="op" id="6968692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6968695">func</span>&nbsp;<span class="ident" id="6968700">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="6968743">(</span><span class="ident" id="6968744">t</span>&nbsp;<span class="op" id="6968746">*</span><span class="ident" id="6968747"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6968754">.</span><span class="ident" id="6968755"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6968756">)</span>&nbsp;<span class="op" id="6968758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968761">input</span>&nbsp;<span class="op" id="6968767">:=</span>&nbsp;<span class="op" id="6968770">(</span><span class="string" id="6968771">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="6968832">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968836">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="6968903">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968907">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="6968926">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968930">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="6968949">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968953">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="6968972">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968976">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="6968995">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968999">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="6969018">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969022">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="6969044">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969048">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="6969090">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969094">tests</span>&nbsp;<span class="op" id="6969100">:=</span>&nbsp;<span class="op" id="6969103">[</span><span class="op" id="6969104">]</span><span class="keyword" id="6969105">struct</span>&nbsp;<span class="op" id="6969112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969116">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6969124">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969133">escaper</span>&nbsp;<span class="keyword" id="6969141">func</span><span class="op" id="6969145">(</span><span class="op" id="6969146">...</span><span class="keyword" id="6969149">interface</span><span class="op" id="6969158">{</span><span class="op" id="6969159">}</span><span class="op" id="6969160">)</span>&nbsp;<span class="builtintype" id="6969162">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969171">escaped</span>&nbsp;<span class="builtintype" id="6969179">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969187">}</span><span class="op" id="6969188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969197">&#34;jsStrEscaper&#34;</span><span class="op" id="6969211">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969216"><a href="/gostd/html/template/js.go.html#4942805">jsStrEscaper</a></span><span class="op" id="6969228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969233">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="6969267">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969273">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="6969305">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969311">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="6969346">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969352">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="6969387">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969393">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="6969425">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969431">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="6969456">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969462">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="6969481">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969487">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="6969507">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969513">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="6969532">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969538">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="6969560">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969566">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="6969610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969614">}</span><span class="op" id="6969615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969624">&#34;jsRegexpEscaper&#34;</span><span class="op" id="6969641">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969646"><a href="/gostd/html/template/js.go.html#4943289">jsRegexpEscaper</a></span><span class="op" id="6969661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969666">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="6969700">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969706">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="6969738">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969744">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="6969779">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969785">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="6969820">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969826">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="6969864">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969870">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="6969896">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969902">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="6969921">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969927">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="6969950">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969956">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="6969975">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969981">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="6970002">+</span>&nbsp;<span class="string" id="6970004">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="6970013">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6970019">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="6970063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970067">}</span><span class="op" id="6970068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6970075">for</span>&nbsp;<span class="ident" id="6970079">_</span><span class="op" id="6970080">,</span>&nbsp;<span class="ident" id="6970082">test</span>&nbsp;<span class="op" id="6970087">:=</span>&nbsp;<span class="keyword" id="6970090">range</span>&nbsp;<span class="ident" id="6970096"><a href="/gostd/html/template/js_test.go.html#6969094">tests</a></span>&nbsp;<span class="op" id="6970102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6970106">if</span>&nbsp;<span class="ident" id="6970109">s</span>&nbsp;<span class="op" id="6970111">:=</span>&nbsp;<span class="ident" id="6970114"><a href="/gostd/html/template/js_test.go.html#6970082">test</a></span><span class="op" id="6970118">.</span><span class="ident" id="6970119"><a href="/gostd/html/template/js_test.go.html#6969133">escaper</a></span><span class="op" id="6970126">(</span><span class="ident" id="6970127"><a href="/gostd/html/template/js_test.go.html#6968761">input</a></span><span class="op" id="6970132">)</span><span class="op" id="6970133">;</span>&nbsp;<span class="ident" id="6970135"><a href="/gostd/html/template/js_test.go.html#6970109">s</a></span>&nbsp;<span class="op" id="6970137">!=</span>&nbsp;<span class="ident" id="6970140"><a href="/gostd/html/template/js_test.go.html#6970082">test</a></span><span class="op" id="6970144">.</span><span class="ident" id="6970145"><a href="/gostd/html/template/js_test.go.html#6969171">escaped</a></span>&nbsp;<span class="op" id="6970153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970158"><a href="/gostd/html/template/js_test.go.html#6968744">t</a></span><span class="op" id="6970159">.</span><span class="ident" id="6970160"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6970166">(</span><span class="string" id="6970167">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="6970199">,</span>&nbsp;<span class="ident" id="6970201"><a href="/gostd/html/template/js_test.go.html#6970082">test</a></span><span class="op" id="6970205">.</span><span class="ident" id="6970206"><a href="/gostd/html/template/js_test.go.html#6969116">name</a></span><span class="op" id="6970210">,</span>&nbsp;<span class="ident" id="6970212"><a href="/gostd/html/template/js_test.go.html#6970082">test</a></span><span class="op" id="6970216">.</span><span class="ident" id="6970217"><a href="/gostd/html/template/js_test.go.html#6969171">escaped</a></span><span class="op" id="6970224">,</span>&nbsp;<span class="ident" id="6970226"><a href="/gostd/html/template/js_test.go.html#6970109">s</a></span><span class="op" id="6970227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6970232">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970243">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6970248">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6970298">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6970347">var</span>&nbsp;<span class="ident" id="6970351">buf</span>&nbsp;<span class="ident" id="6970355"><a href="/gostd/html/template/js_test.go.html#6961100">bytes</a></span><span class="op" id="6970360">.</span><span class="ident" id="6970361"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6970370">for</span>&nbsp;<span class="ident" id="6970374">_</span><span class="op" id="6970375">,</span>&nbsp;<span class="ident" id="6970377">c</span>&nbsp;<span class="op" id="6970379">:=</span>&nbsp;<span class="keyword" id="6970382">range</span>&nbsp;<span class="ident" id="6970388"><a href="/gostd/html/template/js_test.go.html#6968761">input</a></span>&nbsp;<span class="op" id="6970394">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970399"><a href="/gostd/html/template/js_test.go.html#6970351">buf</a></span><span class="op" id="6970402">.</span><span class="ident" id="6970403"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="6970414">(</span><span class="ident" id="6970415"><a href="/gostd/html/template/js_test.go.html#6970082">test</a></span><span class="op" id="6970419">.</span><span class="ident" id="6970420"><a href="/gostd/html/template/js_test.go.html#6969133">escaper</a></span><span class="op" id="6970427">(</span><span class="builtintype" id="6970428">string</span><span class="op" id="6970434">(</span><span class="ident" id="6970435"><a href="/gostd/html/template/js_test.go.html#6970377">c</a></span><span class="op" id="6970436">)</span><span class="op" id="6970437">)</span><span class="op" id="6970438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6970447">if</span>&nbsp;<span class="ident" id="6970450">s</span>&nbsp;<span class="op" id="6970452">:=</span>&nbsp;<span class="ident" id="6970455"><a href="/gostd/html/template/js_test.go.html#6970351">buf</a></span><span class="op" id="6970458">.</span><span class="ident" id="6970459"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="6970465">(</span><span class="op" id="6970466">)</span><span class="op" id="6970467">;</span>&nbsp;<span class="ident" id="6970469"><a href="/gostd/html/template/js_test.go.html#6970450">s</a></span>&nbsp;<span class="op" id="6970471">!=</span>&nbsp;<span class="ident" id="6970474"><a href="/gostd/html/template/js_test.go.html#6970082">test</a></span><span class="op" id="6970478">.</span><span class="ident" id="6970479"><a href="/gostd/html/template/js_test.go.html#6969171">escaped</a></span>&nbsp;<span class="op" id="6970487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970492"><a href="/gostd/html/template/js_test.go.html#6968744">t</a></span><span class="op" id="6970493">.</span><span class="ident" id="6970494"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6970500">(</span><span class="string" id="6970501">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="6970538">,</span>&nbsp;<span class="ident" id="6970540"><a href="/gostd/html/template/js_test.go.html#6970082">test</a></span><span class="op" id="6970544">.</span><span class="ident" id="6970545"><a href="/gostd/html/template/js_test.go.html#6969116">name</a></span><span class="op" id="6970549">,</span>&nbsp;<span class="ident" id="6970551"><a href="/gostd/html/template/js_test.go.html#6970082">test</a></span><span class="op" id="6970555">.</span><span class="ident" id="6970556"><a href="/gostd/html/template/js_test.go.html#6969171">escaped</a></span><span class="op" id="6970563">,</span>&nbsp;<span class="ident" id="6970565"><a href="/gostd/html/template/js_test.go.html#6970450">s</a></span><span class="op" id="6970566">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6970571">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970585">}</span><br>
<span class="lineno"></span><span class="op" id="6970587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="6970590">func</span>&nbsp;<span class="ident" id="6970595">BenchmarkJSValEscaperWithNum</span><span class="op" id="6970623">(</span><span class="ident" id="6970624">b</span>&nbsp;<span class="op" id="6970626">*</span><span class="ident" id="6970627"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6970634">.</span><span class="ident" id="6970635"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="6970636">)</span>&nbsp;<span class="op" id="6970638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6970641">for</span>&nbsp;<span class="ident" id="6970645">i</span>&nbsp;<span class="op" id="6970647">:=</span>&nbsp;<span class="num" id="6970650">0</span><span class="op" id="6970651">;</span>&nbsp;<span class="ident" id="6970653"><a href="/gostd/html/template/js_test.go.html#6970645">i</a></span>&nbsp;<span class="op" id="6970655">&lt;</span>&nbsp;<span class="ident" id="6970657"><a href="/gostd/html/template/js_test.go.html#6970624">b</a></span><span class="op" id="6970658">.</span><span class="ident" id="6970659"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="6970660">;</span>&nbsp;<span class="ident" id="6970662"><a href="/gostd/html/template/js_test.go.html#6970645">i</a></span><span class="op" id="6970663">++</span>&nbsp;<span class="op" id="6970666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970670"><a href="/gostd/html/template/js.go.html#4940394">jsValEscaper</a></span><span class="op" id="6970682">(</span><span class="num" id="6970683">3.141592654</span><span class="op" id="6970694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970697">}</span><br>
<span class="lineno"></span><span class="op" id="6970699">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="6970702">func</span>&nbsp;<span class="ident" id="6970707">BenchmarkJSValEscaperWithStr</span><span class="op" id="6970735">(</span><span class="ident" id="6970736">b</span>&nbsp;<span class="op" id="6970738">*</span><span class="ident" id="6970739"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6970746">.</span><span class="ident" id="6970747"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="6970748">)</span>&nbsp;<span class="op" id="6970750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6970753">for</span>&nbsp;<span class="ident" id="6970757">i</span>&nbsp;<span class="op" id="6970759">:=</span>&nbsp;<span class="num" id="6970762">0</span><span class="op" id="6970763">;</span>&nbsp;<span class="ident" id="6970765"><a href="/gostd/html/template/js_test.go.html#6970757">i</a></span>&nbsp;<span class="op" id="6970767">&lt;</span>&nbsp;<span class="ident" id="6970769"><a href="/gostd/html/template/js_test.go.html#6970736">b</a></span><span class="op" id="6970770">.</span><span class="ident" id="6970771"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="6970772">;</span>&nbsp;<span class="ident" id="6970774"><a href="/gostd/html/template/js_test.go.html#6970757">i</a></span><span class="op" id="6970775">++</span>&nbsp;<span class="op" id="6970778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970782"><a href="/gostd/html/template/js.go.html#4940394">jsValEscaper</a></span><span class="op" id="6970794">(</span><span class="string" id="6970795">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="6970916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970919">}</span><br>
<span class="lineno">345</span><span class="op" id="6970921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6970924">func</span>&nbsp;<span class="ident" id="6970929">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="6970967">(</span><span class="ident" id="6970968">b</span>&nbsp;<span class="op" id="6970970">*</span><span class="ident" id="6970971"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6970978">.</span><span class="ident" id="6970979"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="6970980">)</span>&nbsp;<span class="op" id="6970982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6970985">for</span>&nbsp;<span class="ident" id="6970989">i</span>&nbsp;<span class="op" id="6970991">:=</span>&nbsp;<span class="num" id="6970994">0</span><span class="op" id="6970995">;</span>&nbsp;<span class="ident" id="6970997"><a href="/gostd/html/template/js_test.go.html#6970989">i</a></span>&nbsp;<span class="op" id="6970999">&lt;</span>&nbsp;<span class="ident" id="6971001"><a href="/gostd/html/template/js_test.go.html#6970968">b</a></span><span class="op" id="6971002">.</span><span class="ident" id="6971003"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="6971004">;</span>&nbsp;<span class="ident" id="6971006"><a href="/gostd/html/template/js_test.go.html#6970989">i</a></span><span class="op" id="6971007">++</span>&nbsp;<span class="op" id="6971010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971014"><a href="/gostd/html/template/js.go.html#4940394">jsValEscaper</a></span><span class="op" id="6971026">(</span><span class="string" id="6971027">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="6971073">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971076">}</span><br>
<span class="lineno"></span><span class="op" id="6971078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6971081">func</span>&nbsp;<span class="ident" id="6971086">BenchmarkJSValEscaperWithObj</span><span class="op" id="6971114">(</span><span class="ident" id="6971115">b</span>&nbsp;<span class="op" id="6971117">*</span><span class="ident" id="6971118"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6971125">.</span><span class="ident" id="6971126"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="6971127">)</span>&nbsp;<span class="op" id="6971129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971132">o</span>&nbsp;<span class="op" id="6971134">:=</span>&nbsp;<span class="keyword" id="6971137">struct</span>&nbsp;<span class="op" id="6971144">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971148">S</span>&nbsp;<span class="builtintype" id="6971150">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971159">N</span>&nbsp;<span class="builtintype" id="6971161">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971166">}</span><span class="op" id="6971167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6971171">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="6971298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6971302">42</span><span class="op" id="6971304">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6971310">for</span>&nbsp;<span class="ident" id="6971314">i</span>&nbsp;<span class="op" id="6971316">:=</span>&nbsp;<span class="num" id="6971319">0</span><span class="op" id="6971320">;</span>&nbsp;<span class="ident" id="6971322"><a href="/gostd/html/template/js_test.go.html#6971314">i</a></span>&nbsp;<span class="op" id="6971324">&lt;</span>&nbsp;<span class="ident" id="6971326"><a href="/gostd/html/template/js_test.go.html#6971115">b</a></span><span class="op" id="6971327">.</span><span class="ident" id="6971328"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="6971329">;</span>&nbsp;<span class="ident" id="6971331"><a href="/gostd/html/template/js_test.go.html#6971314">i</a></span><span class="op" id="6971332">++</span>&nbsp;<span class="op" id="6971335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971339"><a href="/gostd/html/template/js.go.html#4940394">jsValEscaper</a></span><span class="op" id="6971351">(</span><span class="ident" id="6971352"><a href="/gostd/html/template/js_test.go.html#6971132">o</a></span><span class="op" id="6971353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971356">}</span><br>
<span class="lineno"></span><span class="op" id="6971358">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="6971361">func</span>&nbsp;<span class="ident" id="6971366">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="6971404">(</span><span class="ident" id="6971405">b</span>&nbsp;<span class="op" id="6971407">*</span><span class="ident" id="6971408"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6971415">.</span><span class="ident" id="6971416"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="6971417">)</span>&nbsp;<span class="op" id="6971419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971422">o</span>&nbsp;<span class="op" id="6971424">:=</span>&nbsp;<span class="keyword" id="6971427">struct</span>&nbsp;<span class="op" id="6971434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971438">S</span>&nbsp;<span class="builtintype" id="6971440">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971449">N</span>&nbsp;<span class="builtintype" id="6971451">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971456">}</span><span class="op" id="6971457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6971461">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="6971507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6971511">42</span><span class="op" id="6971513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6971519">for</span>&nbsp;<span class="ident" id="6971523">i</span>&nbsp;<span class="op" id="6971525">:=</span>&nbsp;<span class="num" id="6971528">0</span><span class="op" id="6971529">;</span>&nbsp;<span class="ident" id="6971531"><a href="/gostd/html/template/js_test.go.html#6971523">i</a></span>&nbsp;<span class="op" id="6971533">&lt;</span>&nbsp;<span class="ident" id="6971535"><a href="/gostd/html/template/js_test.go.html#6971405">b</a></span><span class="op" id="6971536">.</span><span class="ident" id="6971537"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="6971538">;</span>&nbsp;<span class="ident" id="6971540"><a href="/gostd/html/template/js_test.go.html#6971523">i</a></span><span class="op" id="6971541">++</span>&nbsp;<span class="op" id="6971544">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971548"><a href="/gostd/html/template/js.go.html#4940394">jsValEscaper</a></span><span class="op" id="6971560">(</span><span class="ident" id="6971561"><a href="/gostd/html/template/js_test.go.html#6971422">o</a></span><span class="op" id="6971562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971565">}</span><br>
<span class="lineno"></span><span class="op" id="6971567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6971570">func</span>&nbsp;<span class="ident" id="6971575">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="6971606">(</span><span class="ident" id="6971607">b</span>&nbsp;<span class="op" id="6971609">*</span><span class="ident" id="6971610"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6971617">.</span><span class="ident" id="6971618"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="6971619">)</span>&nbsp;<span class="op" id="6971621">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6971624">for</span>&nbsp;<span class="ident" id="6971628">i</span>&nbsp;<span class="op" id="6971630">:=</span>&nbsp;<span class="num" id="6971633">0</span><span class="op" id="6971634">;</span>&nbsp;<span class="ident" id="6971636"><a href="/gostd/html/template/js_test.go.html#6971628">i</a></span>&nbsp;<span class="op" id="6971638">&lt;</span>&nbsp;<span class="ident" id="6971640"><a href="/gostd/html/template/js_test.go.html#6971607">b</a></span><span class="op" id="6971641">.</span><span class="ident" id="6971642"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="6971643">;</span>&nbsp;<span class="ident" id="6971645"><a href="/gostd/html/template/js_test.go.html#6971628">i</a></span><span class="op" id="6971646">++</span>&nbsp;<span class="op" id="6971649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971653"><a href="/gostd/html/template/js.go.html#4942805">jsStrEscaper</a></span><span class="op" id="6971665">(</span><span class="string" id="6971666">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="6971713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971716">}</span><br>
<span class="lineno"></span><span class="op" id="6971718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="6971721">func</span>&nbsp;<span class="ident" id="6971726">BenchmarkJSStrEscaper</span><span class="op" id="6971747">(</span><span class="ident" id="6971748">b</span>&nbsp;<span class="op" id="6971750">*</span><span class="ident" id="6971751"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6971758">.</span><span class="ident" id="6971759"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="6971760">)</span>&nbsp;<span class="op" id="6971762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6971765">for</span>&nbsp;<span class="ident" id="6971769">i</span>&nbsp;<span class="op" id="6971771">:=</span>&nbsp;<span class="num" id="6971774">0</span><span class="op" id="6971775">;</span>&nbsp;<span class="ident" id="6971777"><a href="/gostd/html/template/js_test.go.html#6971769">i</a></span>&nbsp;<span class="op" id="6971779">&lt;</span>&nbsp;<span class="ident" id="6971781"><a href="/gostd/html/template/js_test.go.html#6971748">b</a></span><span class="op" id="6971782">.</span><span class="ident" id="6971783"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="6971784">;</span>&nbsp;<span class="ident" id="6971786"><a href="/gostd/html/template/js_test.go.html#6971769">i</a></span><span class="op" id="6971787">++</span>&nbsp;<span class="op" id="6971790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971794"><a href="/gostd/html/template/js.go.html#4942805">jsStrEscaper</a></span><span class="op" id="6971806">(</span><span class="string" id="6971807">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="6971928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971931">}</span><br>
<span class="lineno"></span><span class="op" id="6971933">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="6971936">func</span>&nbsp;<span class="ident" id="6971941">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="6971975">(</span><span class="ident" id="6971976">b</span>&nbsp;<span class="op" id="6971978">*</span><span class="ident" id="6971979"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6971986">.</span><span class="ident" id="6971987"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="6971988">)</span>&nbsp;<span class="op" id="6971990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6971993">for</span>&nbsp;<span class="ident" id="6971997">i</span>&nbsp;<span class="op" id="6971999">:=</span>&nbsp;<span class="num" id="6972002">0</span><span class="op" id="6972003">;</span>&nbsp;<span class="ident" id="6972005"><a href="/gostd/html/template/js_test.go.html#6971997">i</a></span>&nbsp;<span class="op" id="6972007">&lt;</span>&nbsp;<span class="ident" id="6972009"><a href="/gostd/html/template/js_test.go.html#6971976">b</a></span><span class="op" id="6972010">.</span><span class="ident" id="6972011"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="6972012">;</span>&nbsp;<span class="ident" id="6972014"><a href="/gostd/html/template/js_test.go.html#6971997">i</a></span><span class="op" id="6972015">++</span>&nbsp;<span class="op" id="6972018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972022"><a href="/gostd/html/template/js.go.html#4943289">jsRegexpEscaper</a></span><span class="op" id="6972037">(</span><span class="string" id="6972038">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="6972084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6972087">}</span><br>
<span class="lineno">395</span><span class="op" id="6972089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6972092">func</span>&nbsp;<span class="ident" id="6972097">BenchmarkJSRegexpEscaper</span><span class="op" id="6972121">(</span><span class="ident" id="6972122">b</span>&nbsp;<span class="op" id="6972124">*</span><span class="ident" id="6972125"><a href="/gostd/html/template/js_test.go.html#6961128">testing</a></span><span class="op" id="6972132">.</span><span class="ident" id="6972133"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="6972134">)</span>&nbsp;<span class="op" id="6972136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6972139">for</span>&nbsp;<span class="ident" id="6972143">i</span>&nbsp;<span class="op" id="6972145">:=</span>&nbsp;<span class="num" id="6972148">0</span><span class="op" id="6972149">;</span>&nbsp;<span class="ident" id="6972151"><a href="/gostd/html/template/js_test.go.html#6972143">i</a></span>&nbsp;<span class="op" id="6972153">&lt;</span>&nbsp;<span class="ident" id="6972155"><a href="/gostd/html/template/js_test.go.html#6972122">b</a></span><span class="op" id="6972156">.</span><span class="ident" id="6972157"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="6972158">;</span>&nbsp;<span class="ident" id="6972160"><a href="/gostd/html/template/js_test.go.html#6972143">i</a></span><span class="op" id="6972161">++</span>&nbsp;<span class="op" id="6972164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972168"><a href="/gostd/html/template/js.go.html#4943289">jsRegexpEscaper</a></span><span class="op" id="6972183">(</span><span class="string" id="6972184">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="6972305">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6972308">}</span><br>
<span class="lineno"></span><span class="op" id="6972310">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
