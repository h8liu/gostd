<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/rand</h2>
<ul>
<li><a href="/gostd/math/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/rand/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/rand/normal.go.html">normal.go</a></li>
<li><a href="/gostd/math/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/math/rand/rand_test.go.html" class="current">rand_test.go</a></li>
<li><a href="/gostd/math/rand/regress_test.go.html">regress_test.go</a></li>
<li><a href="/gostd/math/rand/rng.go.html">rng.go</a></li>
<li><a href="/gostd/math/rand/zipf.go.html">zipf.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7296742">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7296797">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7296851">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7296902">package</span>&nbsp;<span class="ident" id="7296910">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7296916">import</span>&nbsp;<span class="op" id="7296923">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7296926">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7296936">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7296943">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7296951">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7296961">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7296964">const</span>&nbsp;<span class="op" id="7296970">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7296973">numTestSamples</span>&nbsp;<span class="op" id="7296988">=</span>&nbsp;<span class="num" id="7296990">10000</span><br>
<span class="lineno"></span><span class="op" id="7296996">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7296999">type</span>&nbsp;<span class="ident" id="7297004">statsResults</span>&nbsp;<span class="keyword" id="7297017">struct</span>&nbsp;<span class="op" id="7297024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297027">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7297039">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297048">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7297060">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297069">closeEnough</span>&nbsp;<span class="builtintype" id="7297081">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297090">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7297102">float64</span><br>
<span class="lineno"></span><span class="op" id="7297110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7297113">func</span>&nbsp;<span class="ident" id="7297118">max</span><span class="op" id="7297121">(</span><span class="ident" id="7297122">a</span><span class="op" id="7297123">,</span>&nbsp;<span class="ident" id="7297125">b</span>&nbsp;<span class="builtintype" id="7297127">float64</span><span class="op" id="7297134">)</span>&nbsp;<span class="builtintype" id="7297136">float64</span>&nbsp;<span class="op" id="7297144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297147">if</span>&nbsp;<span class="ident" id="7297150">a</span>&nbsp;<span class="op" id="7297152">&gt;</span>&nbsp;<span class="ident" id="7297154">b</span>&nbsp;<span class="op" id="7297156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297160">return</span>&nbsp;<span class="ident" id="7297167">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7297170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297173">return</span>&nbsp;<span class="ident" id="7297180">b</span><br>
<span class="lineno">30</span><span class="op" id="7297182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7297185">func</span>&nbsp;<span class="ident" id="7297190">nearEqual</span><span class="op" id="7297199">(</span><span class="ident" id="7297200">a</span><span class="op" id="7297201">,</span>&nbsp;<span class="ident" id="7297203">b</span><span class="op" id="7297204">,</span>&nbsp;<span class="ident" id="7297206">closeEnough</span><span class="op" id="7297217">,</span>&nbsp;<span class="ident" id="7297219">maxError</span>&nbsp;<span class="builtintype" id="7297228">float64</span><span class="op" id="7297235">)</span>&nbsp;<span class="builtintype" id="7297237">bool</span>&nbsp;<span class="op" id="7297242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297245">absDiff</span>&nbsp;<span class="op" id="7297253">:=</span>&nbsp;<span class="ident" id="7297256">math</span><span class="op" id="7297260">.</span><span class="ident" id="7297261">Abs</span><span class="op" id="7297264">(</span><span class="ident" id="7297265">a</span>&nbsp;<span class="op" id="7297267">-</span>&nbsp;<span class="ident" id="7297269">b</span><span class="op" id="7297270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297273">if</span>&nbsp;<span class="ident" id="7297276">absDiff</span>&nbsp;<span class="op" id="7297284">&lt;</span>&nbsp;<span class="ident" id="7297286">closeEnough</span>&nbsp;<span class="op" id="7297298">{</span>&nbsp;<span class="comment" id="7297300">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297370">return</span>&nbsp;<span class="builtintype" id="7297377">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7297383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297386">return</span>&nbsp;<span class="ident" id="7297393">absDiff</span><span class="op" id="7297400">/</span><span class="ident" id="7297401">max</span><span class="op" id="7297404">(</span><span class="ident" id="7297405">math</span><span class="op" id="7297409">.</span><span class="ident" id="7297410">Abs</span><span class="op" id="7297413">(</span><span class="ident" id="7297414">a</span><span class="op" id="7297415">)</span><span class="op" id="7297416">,</span>&nbsp;<span class="ident" id="7297418">math</span><span class="op" id="7297422">.</span><span class="ident" id="7297423">Abs</span><span class="op" id="7297426">(</span><span class="ident" id="7297427">b</span><span class="op" id="7297428">)</span><span class="op" id="7297429">)</span>&nbsp;<span class="op" id="7297431">&lt;</span>&nbsp;<span class="ident" id="7297433">maxError</span><br>
<span class="lineno"></span><span class="op" id="7297442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7297445">var</span>&nbsp;<span class="ident" id="7297449">testSeeds</span>&nbsp;<span class="op" id="7297459">=</span>&nbsp;<span class="op" id="7297461">[</span><span class="op" id="7297462">]</span><span class="ident" id="7297463">int64</span><span class="op" id="7297468">{</span><span class="num" id="7297469">1</span><span class="op" id="7297470">,</span>&nbsp;<span class="num" id="7297472">1754801282</span><span class="op" id="7297482">,</span>&nbsp;<span class="num" id="7297484">1698661970</span><span class="op" id="7297494">,</span>&nbsp;<span class="num" id="7297496">1550503961</span><span class="op" id="7297506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7297509">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7297583">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="7297616">func</span>&nbsp;<span class="op" id="7297621">(</span><span class="ident" id="7297622">this</span>&nbsp;<span class="op" id="7297627">*</span><span class="ident" id="7297628">statsResults</span><span class="op" id="7297640">)</span>&nbsp;<span class="ident" id="7297642">checkSimilarDistribution</span><span class="op" id="7297666">(</span><span class="ident" id="7297667">expected</span>&nbsp;<span class="op" id="7297676">*</span><span class="ident" id="7297677">statsResults</span><span class="op" id="7297689">)</span>&nbsp;<span class="builtintype" id="7297691">error</span>&nbsp;<span class="op" id="7297697">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297700">if</span>&nbsp;<span class="op" id="7297703">!</span><span class="ident" id="7297704">nearEqual</span><span class="op" id="7297713">(</span><span class="ident" id="7297714">this</span><span class="op" id="7297718">.</span><span class="ident" id="7297719">mean</span><span class="op" id="7297723">,</span>&nbsp;<span class="ident" id="7297725">expected</span><span class="op" id="7297733">.</span><span class="ident" id="7297734">mean</span><span class="op" id="7297738">,</span>&nbsp;<span class="ident" id="7297740">expected</span><span class="op" id="7297748">.</span><span class="ident" id="7297749">closeEnough</span><span class="op" id="7297760">,</span>&nbsp;<span class="ident" id="7297762">expected</span><span class="op" id="7297770">.</span><span class="ident" id="7297771">maxError</span><span class="op" id="7297779">)</span>&nbsp;<span class="op" id="7297781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297785">s</span>&nbsp;<span class="op" id="7297787">:=</span>&nbsp;<span class="ident" id="7297790">fmt</span><span class="op" id="7297793">.</span><span class="ident" id="7297794">Sprintf</span><span class="op" id="7297801">(</span><span class="string" id="7297802">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7297840">,</span>&nbsp;<span class="ident" id="7297842">this</span><span class="op" id="7297846">.</span><span class="ident" id="7297847">mean</span><span class="op" id="7297851">,</span>&nbsp;<span class="ident" id="7297853">expected</span><span class="op" id="7297861">.</span><span class="ident" id="7297862">mean</span><span class="op" id="7297866">,</span>&nbsp;<span class="ident" id="7297868">expected</span><span class="op" id="7297876">.</span><span class="ident" id="7297877">closeEnough</span><span class="op" id="7297888">,</span>&nbsp;<span class="ident" id="7297890">expected</span><span class="op" id="7297898">.</span><span class="ident" id="7297899">maxError</span><span class="op" id="7297907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7297911">fmt</span><span class="op" id="7297914">.</span><span class="ident" id="7297915">Println</span><span class="op" id="7297922">(</span><span class="ident" id="7297923">s</span><span class="op" id="7297924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297928">return</span>&nbsp;<span class="ident" id="7297935">errors</span><span class="op" id="7297941">.</span><span class="ident" id="7297942">New</span><span class="op" id="7297945">(</span><span class="ident" id="7297946">s</span><span class="op" id="7297947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7297950">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7297953">if</span>&nbsp;<span class="op" id="7297956">!</span><span class="ident" id="7297957">nearEqual</span><span class="op" id="7297966">(</span><span class="ident" id="7297967">this</span><span class="op" id="7297971">.</span><span class="ident" id="7297972">stddev</span><span class="op" id="7297978">,</span>&nbsp;<span class="ident" id="7297980">expected</span><span class="op" id="7297988">.</span><span class="ident" id="7297989">stddev</span><span class="op" id="7297995">,</span>&nbsp;<span class="num" id="7297997">0</span><span class="op" id="7297998">,</span>&nbsp;<span class="ident" id="7298000">expected</span><span class="op" id="7298008">.</span><span class="ident" id="7298009">maxError</span><span class="op" id="7298017">)</span>&nbsp;<span class="op" id="7298019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298023">s</span>&nbsp;<span class="op" id="7298025">:=</span>&nbsp;<span class="ident" id="7298028">fmt</span><span class="op" id="7298031">.</span><span class="ident" id="7298032">Sprintf</span><span class="op" id="7298039">(</span><span class="string" id="7298040">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7298080">,</span>&nbsp;<span class="ident" id="7298082">this</span><span class="op" id="7298086">.</span><span class="ident" id="7298087">stddev</span><span class="op" id="7298093">,</span>&nbsp;<span class="ident" id="7298095">expected</span><span class="op" id="7298103">.</span><span class="ident" id="7298104">stddev</span><span class="op" id="7298110">,</span>&nbsp;<span class="ident" id="7298112">expected</span><span class="op" id="7298120">.</span><span class="ident" id="7298121">closeEnough</span><span class="op" id="7298132">,</span>&nbsp;<span class="ident" id="7298134">expected</span><span class="op" id="7298142">.</span><span class="ident" id="7298143">maxError</span><span class="op" id="7298151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298155">fmt</span><span class="op" id="7298158">.</span><span class="ident" id="7298159">Println</span><span class="op" id="7298166">(</span><span class="ident" id="7298167">s</span><span class="op" id="7298168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298172">return</span>&nbsp;<span class="ident" id="7298179">errors</span><span class="op" id="7298185">.</span><span class="ident" id="7298186">New</span><span class="op" id="7298189">(</span><span class="ident" id="7298190">s</span><span class="op" id="7298191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298194">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298197">return</span>&nbsp;<span class="builtintype" id="7298204">nil</span><br>
<span class="lineno"></span><span class="op" id="7298208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7298211">func</span>&nbsp;<span class="ident" id="7298216">getStatsResults</span><span class="op" id="7298231">(</span><span class="ident" id="7298232">samples</span>&nbsp;<span class="op" id="7298240">[</span><span class="op" id="7298241">]</span><span class="builtintype" id="7298242">float64</span><span class="op" id="7298249">)</span>&nbsp;<span class="op" id="7298251">*</span><span class="ident" id="7298252">statsResults</span>&nbsp;<span class="op" id="7298265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298268">res</span>&nbsp;<span class="op" id="7298272">:=</span>&nbsp;<span class="builtinfunc" id="7298275">new</span><span class="op" id="7298278">(</span><span class="ident" id="7298279">statsResults</span><span class="op" id="7298291">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298294">var</span>&nbsp;<span class="ident" id="7298298">sum</span><span class="op" id="7298301">,</span>&nbsp;<span class="ident" id="7298303">squaresum</span>&nbsp;<span class="builtintype" id="7298313">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298322">for</span>&nbsp;<span class="ident" id="7298326">_</span><span class="op" id="7298327">,</span>&nbsp;<span class="ident" id="7298329">s</span>&nbsp;<span class="op" id="7298331">:=</span>&nbsp;<span class="keyword" id="7298334">range</span>&nbsp;<span class="ident" id="7298340">samples</span>&nbsp;<span class="op" id="7298348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298352">sum</span>&nbsp;<span class="op" id="7298356">+=</span>&nbsp;<span class="ident" id="7298359">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298363">squaresum</span>&nbsp;<span class="op" id="7298373">+=</span>&nbsp;<span class="ident" id="7298376">s</span>&nbsp;<span class="op" id="7298378">*</span>&nbsp;<span class="ident" id="7298380">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298383">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298386">res</span><span class="op" id="7298389">.</span><span class="ident" id="7298390">mean</span>&nbsp;<span class="op" id="7298395">=</span>&nbsp;<span class="ident" id="7298397">sum</span>&nbsp;<span class="op" id="7298401">/</span>&nbsp;<span class="builtintype" id="7298403">float64</span><span class="op" id="7298410">(</span><span class="builtinfunc" id="7298411">len</span><span class="op" id="7298414">(</span><span class="ident" id="7298415">samples</span><span class="op" id="7298422">)</span><span class="op" id="7298423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298426">res</span><span class="op" id="7298429">.</span><span class="ident" id="7298430">stddev</span>&nbsp;<span class="op" id="7298437">=</span>&nbsp;<span class="ident" id="7298439">math</span><span class="op" id="7298443">.</span><span class="ident" id="7298444">Sqrt</span><span class="op" id="7298448">(</span><span class="ident" id="7298449">squaresum</span><span class="op" id="7298458">/</span><span class="builtintype" id="7298459">float64</span><span class="op" id="7298466">(</span><span class="builtinfunc" id="7298467">len</span><span class="op" id="7298470">(</span><span class="ident" id="7298471">samples</span><span class="op" id="7298478">)</span><span class="op" id="7298479">)</span>&nbsp;<span class="op" id="7298481">-</span>&nbsp;<span class="ident" id="7298483">res</span><span class="op" id="7298486">.</span><span class="ident" id="7298487">mean</span><span class="op" id="7298491">*</span><span class="ident" id="7298492">res</span><span class="op" id="7298495">.</span><span class="ident" id="7298496">mean</span><span class="op" id="7298500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298503">return</span>&nbsp;<span class="ident" id="7298510">res</span><br>
<span class="lineno"></span><span class="op" id="7298514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="7298517">func</span>&nbsp;<span class="ident" id="7298522">checkSampleDistribution</span><span class="op" id="7298545">(</span><span class="ident" id="7298546">t</span>&nbsp;<span class="op" id="7298548">*</span><span class="ident" id="7298549">testing</span><span class="op" id="7298556">.</span><span class="ident" id="7298557">T</span><span class="op" id="7298558">,</span>&nbsp;<span class="ident" id="7298560">samples</span>&nbsp;<span class="op" id="7298568">[</span><span class="op" id="7298569">]</span><span class="builtintype" id="7298570">float64</span><span class="op" id="7298577">,</span>&nbsp;<span class="ident" id="7298579">expected</span>&nbsp;<span class="op" id="7298588">*</span><span class="ident" id="7298589">statsResults</span><span class="op" id="7298601">)</span>&nbsp;<span class="op" id="7298603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298606">actual</span>&nbsp;<span class="op" id="7298613">:=</span>&nbsp;<span class="ident" id="7298616">getStatsResults</span><span class="op" id="7298631">(</span><span class="ident" id="7298632">samples</span><span class="op" id="7298639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298642">err</span>&nbsp;<span class="op" id="7298646">:=</span>&nbsp;<span class="ident" id="7298649">actual</span><span class="op" id="7298655">.</span><span class="ident" id="7298656">checkSimilarDistribution</span><span class="op" id="7298680">(</span><span class="ident" id="7298681">expected</span><span class="op" id="7298689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298692">if</span>&nbsp;<span class="ident" id="7298695">err</span>&nbsp;<span class="op" id="7298699">!=</span>&nbsp;<span class="builtintype" id="7298702">nil</span>&nbsp;<span class="op" id="7298706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298710">t</span><span class="op" id="7298711">.</span><span class="ident" id="7298712">Errorf</span><span class="op" id="7298718">(</span><span class="ident" id="7298719">err</span><span class="op" id="7298722">.</span><span class="ident" id="7298723">Error</span><span class="op" id="7298728">(</span><span class="op" id="7298729">)</span><span class="op" id="7298730">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298733">}</span><br>
<span class="lineno"></span><span class="op" id="7298735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7298738">func</span>&nbsp;<span class="ident" id="7298743">checkSampleSliceDistributions</span><span class="op" id="7298772">(</span><span class="ident" id="7298773">t</span>&nbsp;<span class="op" id="7298775">*</span><span class="ident" id="7298776">testing</span><span class="op" id="7298783">.</span><span class="ident" id="7298784">T</span><span class="op" id="7298785">,</span>&nbsp;<span class="ident" id="7298787">samples</span>&nbsp;<span class="op" id="7298795">[</span><span class="op" id="7298796">]</span><span class="builtintype" id="7298797">float64</span><span class="op" id="7298804">,</span>&nbsp;<span class="ident" id="7298806">nslices</span>&nbsp;<span class="builtintype" id="7298814">int</span><span class="op" id="7298817">,</span>&nbsp;<span class="ident" id="7298819">expected</span>&nbsp;<span class="op" id="7298828">*</span><span class="ident" id="7298829">statsResults</span><span class="op" id="7298841">)</span>&nbsp;<span class="op" id="7298843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298846">chunk</span>&nbsp;<span class="op" id="7298852">:=</span>&nbsp;<span class="builtinfunc" id="7298855">len</span><span class="op" id="7298858">(</span><span class="ident" id="7298859">samples</span><span class="op" id="7298866">)</span>&nbsp;<span class="op" id="7298868">/</span>&nbsp;<span class="ident" id="7298870">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298879">for</span>&nbsp;<span class="ident" id="7298883">i</span>&nbsp;<span class="op" id="7298885">:=</span>&nbsp;<span class="num" id="7298888">0</span><span class="op" id="7298889">;</span>&nbsp;<span class="ident" id="7298891">i</span>&nbsp;<span class="op" id="7298893">&lt;</span>&nbsp;<span class="ident" id="7298895">nslices</span><span class="op" id="7298902">;</span>&nbsp;<span class="ident" id="7298904">i</span><span class="op" id="7298905">++</span>&nbsp;<span class="op" id="7298908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298912">low</span>&nbsp;<span class="op" id="7298916">:=</span>&nbsp;<span class="ident" id="7298919">i</span>&nbsp;<span class="op" id="7298921">*</span>&nbsp;<span class="ident" id="7298923">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298931">var</span>&nbsp;<span class="ident" id="7298935">high</span>&nbsp;<span class="builtintype" id="7298940">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7298946">if</span>&nbsp;<span class="ident" id="7298949">i</span>&nbsp;<span class="op" id="7298951">==</span>&nbsp;<span class="ident" id="7298954">nslices</span><span class="op" id="7298961">-</span><span class="num" id="7298962">1</span>&nbsp;<span class="op" id="7298964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7298969">high</span>&nbsp;<span class="op" id="7298974">=</span>&nbsp;<span class="builtinfunc" id="7298976">len</span><span class="op" id="7298979">(</span><span class="ident" id="7298980">samples</span><span class="op" id="7298987">)</span>&nbsp;<span class="op" id="7298989">-</span>&nbsp;<span class="num" id="7298991">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7298995">}</span>&nbsp;<span class="keyword" id="7298997">else</span>&nbsp;<span class="op" id="7299002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299007">high</span>&nbsp;<span class="op" id="7299012">=</span>&nbsp;<span class="op" id="7299014">(</span><span class="ident" id="7299015">i</span>&nbsp;<span class="op" id="7299017">+</span>&nbsp;<span class="num" id="7299019">1</span><span class="op" id="7299020">)</span>&nbsp;<span class="op" id="7299022">*</span>&nbsp;<span class="ident" id="7299024">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7299032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299036">checkSampleDistribution</span><span class="op" id="7299059">(</span><span class="ident" id="7299060">t</span><span class="op" id="7299061">,</span>&nbsp;<span class="ident" id="7299063">samples</span><span class="op" id="7299070">[</span><span class="ident" id="7299071">low</span><span class="op" id="7299074">:</span><span class="ident" id="7299075">high</span><span class="op" id="7299079">]</span><span class="op" id="7299080">,</span>&nbsp;<span class="ident" id="7299082">expected</span><span class="op" id="7299090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7299093">}</span><br>
<span class="lineno">90</span><span class="op" id="7299095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7299098">//</span><br>
<span class="lineno"></span><span class="comment" id="7299101">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7299130">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7299134">func</span>&nbsp;<span class="ident" id="7299139">generateNormalSamples</span><span class="op" id="7299160">(</span><span class="ident" id="7299161">nsamples</span>&nbsp;<span class="builtintype" id="7299170">int</span><span class="op" id="7299173">,</span>&nbsp;<span class="ident" id="7299175">mean</span><span class="op" id="7299179">,</span>&nbsp;<span class="ident" id="7299181">stddev</span>&nbsp;<span class="builtintype" id="7299188">float64</span><span class="op" id="7299195">,</span>&nbsp;<span class="ident" id="7299197">seed</span>&nbsp;<span class="ident" id="7299202">int64</span><span class="op" id="7299207">)</span>&nbsp;<span class="op" id="7299209">[</span><span class="op" id="7299210">]</span><span class="builtintype" id="7299211">float64</span>&nbsp;<span class="op" id="7299219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299222">r</span>&nbsp;<span class="op" id="7299224">:=</span>&nbsp;<span class="ident" id="7299227">New</span><span class="op" id="7299230">(</span><span class="ident" id="7299231">NewSource</span><span class="op" id="7299240">(</span><span class="ident" id="7299241">seed</span><span class="op" id="7299245">)</span><span class="op" id="7299246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299249">samples</span>&nbsp;<span class="op" id="7299257">:=</span>&nbsp;<span class="builtinfunc" id="7299260">make</span><span class="op" id="7299264">(</span><span class="op" id="7299265">[</span><span class="op" id="7299266">]</span><span class="builtintype" id="7299267">float64</span><span class="op" id="7299274">,</span>&nbsp;<span class="ident" id="7299276">nsamples</span><span class="op" id="7299284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7299287">for</span>&nbsp;<span class="ident" id="7299291">i</span>&nbsp;<span class="op" id="7299293">:=</span>&nbsp;<span class="keyword" id="7299296">range</span>&nbsp;<span class="ident" id="7299302">samples</span>&nbsp;<span class="op" id="7299310">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299314">samples</span><span class="op" id="7299321">[</span><span class="ident" id="7299322">i</span><span class="op" id="7299323">]</span>&nbsp;<span class="op" id="7299325">=</span>&nbsp;<span class="ident" id="7299327">r</span><span class="op" id="7299328">.</span><span class="ident" id="7299329">NormFloat64</span><span class="op" id="7299340">(</span><span class="op" id="7299341">)</span><span class="op" id="7299342">*</span><span class="ident" id="7299343">stddev</span>&nbsp;<span class="op" id="7299350">+</span>&nbsp;<span class="ident" id="7299352">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7299358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7299361">return</span>&nbsp;<span class="ident" id="7299368">samples</span><br>
<span class="lineno"></span><span class="op" id="7299376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7299379">func</span>&nbsp;<span class="ident" id="7299384">testNormalDistribution</span><span class="op" id="7299406">(</span><span class="ident" id="7299407">t</span>&nbsp;<span class="op" id="7299409">*</span><span class="ident" id="7299410">testing</span><span class="op" id="7299417">.</span><span class="ident" id="7299418">T</span><span class="op" id="7299419">,</span>&nbsp;<span class="ident" id="7299421">nsamples</span>&nbsp;<span class="builtintype" id="7299430">int</span><span class="op" id="7299433">,</span>&nbsp;<span class="ident" id="7299435">mean</span><span class="op" id="7299439">,</span>&nbsp;<span class="ident" id="7299441">stddev</span>&nbsp;<span class="builtintype" id="7299448">float64</span><span class="op" id="7299455">,</span>&nbsp;<span class="ident" id="7299457">seed</span>&nbsp;<span class="ident" id="7299462">int64</span><span class="op" id="7299467">)</span>&nbsp;<span class="op" id="7299469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7299472">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299569">samples</span>&nbsp;<span class="op" id="7299577">:=</span>&nbsp;<span class="ident" id="7299580">generateNormalSamples</span><span class="op" id="7299601">(</span><span class="ident" id="7299602">nsamples</span><span class="op" id="7299610">,</span>&nbsp;<span class="ident" id="7299612">mean</span><span class="op" id="7299616">,</span>&nbsp;<span class="ident" id="7299618">stddev</span><span class="op" id="7299624">,</span>&nbsp;<span class="ident" id="7299626">seed</span><span class="op" id="7299630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299633">errorScale</span>&nbsp;<span class="op" id="7299644">:=</span>&nbsp;<span class="ident" id="7299647">max</span><span class="op" id="7299650">(</span><span class="num" id="7299651">1.0</span><span class="op" id="7299654">,</span>&nbsp;<span class="ident" id="7299656">stddev</span><span class="op" id="7299662">)</span>&nbsp;<span class="comment" id="7299664">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299693">expected</span>&nbsp;<span class="op" id="7299702">:=</span>&nbsp;<span class="op" id="7299705">&amp;</span><span class="ident" id="7299706">statsResults</span><span class="op" id="7299718">{</span><span class="ident" id="7299719">mean</span><span class="op" id="7299723">,</span>&nbsp;<span class="ident" id="7299725">stddev</span><span class="op" id="7299731">,</span>&nbsp;<span class="num" id="7299733">0.10</span>&nbsp;<span class="op" id="7299738">*</span>&nbsp;<span class="ident" id="7299740">errorScale</span><span class="op" id="7299750">,</span>&nbsp;<span class="num" id="7299752">0.08</span>&nbsp;<span class="op" id="7299757">*</span>&nbsp;<span class="ident" id="7299759">errorScale</span><span class="op" id="7299769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7299773">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299842">checkSampleDistribution</span><span class="op" id="7299865">(</span><span class="ident" id="7299866">t</span><span class="op" id="7299867">,</span>&nbsp;<span class="ident" id="7299869">samples</span><span class="op" id="7299876">,</span>&nbsp;<span class="ident" id="7299878">expected</span><span class="op" id="7299886">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7299890">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7299965">checkSampleSliceDistributions</span><span class="op" id="7299994">(</span><span class="ident" id="7299995">t</span><span class="op" id="7299996">,</span>&nbsp;<span class="ident" id="7299998">samples</span><span class="op" id="7300005">,</span>&nbsp;<span class="num" id="7300007">2</span><span class="op" id="7300008">,</span>&nbsp;<span class="ident" id="7300010">expected</span><span class="op" id="7300018">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7300022">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300096">checkSampleSliceDistributions</span><span class="op" id="7300125">(</span><span class="ident" id="7300126">t</span><span class="op" id="7300127">,</span>&nbsp;<span class="ident" id="7300129">samples</span><span class="op" id="7300136">,</span>&nbsp;<span class="num" id="7300138">7</span><span class="op" id="7300139">,</span>&nbsp;<span class="ident" id="7300141">expected</span><span class="op" id="7300149">)</span><br>
<span class="lineno">120</span><span class="op" id="7300151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7300154">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7300171">func</span>&nbsp;<span class="ident" id="7300176">TestStandardNormalValues</span><span class="op" id="7300200">(</span><span class="ident" id="7300201">t</span>&nbsp;<span class="op" id="7300203">*</span><span class="ident" id="7300204">testing</span><span class="op" id="7300211">.</span><span class="ident" id="7300212">T</span><span class="op" id="7300213">)</span>&nbsp;<span class="op" id="7300215">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300218">for</span>&nbsp;<span class="ident" id="7300222">_</span><span class="op" id="7300223">,</span>&nbsp;<span class="ident" id="7300225">seed</span>&nbsp;<span class="op" id="7300230">:=</span>&nbsp;<span class="keyword" id="7300233">range</span>&nbsp;<span class="ident" id="7300239">testSeeds</span>&nbsp;<span class="op" id="7300249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300253">testNormalDistribution</span><span class="op" id="7300275">(</span><span class="ident" id="7300276">t</span><span class="op" id="7300277">,</span>&nbsp;<span class="ident" id="7300279">numTestSamples</span><span class="op" id="7300293">,</span>&nbsp;<span class="num" id="7300295">0</span><span class="op" id="7300296">,</span>&nbsp;<span class="num" id="7300298">1</span><span class="op" id="7300299">,</span>&nbsp;<span class="ident" id="7300301">seed</span><span class="op" id="7300305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300308">}</span><br>
<span class="lineno"></span><span class="op" id="7300310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="7300313">func</span>&nbsp;<span class="ident" id="7300318">TestNonStandardNormalValues</span><span class="op" id="7300345">(</span><span class="ident" id="7300346">t</span>&nbsp;<span class="op" id="7300348">*</span><span class="ident" id="7300349">testing</span><span class="op" id="7300356">.</span><span class="ident" id="7300357">T</span><span class="op" id="7300358">)</span>&nbsp;<span class="op" id="7300360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300363">sdmax</span>&nbsp;<span class="op" id="7300369">:=</span>&nbsp;<span class="num" id="7300372">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300380">mmax</span>&nbsp;<span class="op" id="7300385">:=</span>&nbsp;<span class="num" id="7300388">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300396">if</span>&nbsp;<span class="ident" id="7300399">testing</span><span class="op" id="7300406">.</span><span class="ident" id="7300407">Short</span><span class="op" id="7300412">(</span><span class="op" id="7300413">)</span>&nbsp;<span class="op" id="7300415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300419">sdmax</span>&nbsp;<span class="op" id="7300425">=</span>&nbsp;<span class="num" id="7300427">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300431">mmax</span>&nbsp;<span class="op" id="7300436">=</span>&nbsp;<span class="num" id="7300438">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300444">for</span>&nbsp;<span class="ident" id="7300448">sd</span>&nbsp;<span class="op" id="7300451">:=</span>&nbsp;<span class="num" id="7300454">0.5</span><span class="op" id="7300457">;</span>&nbsp;<span class="ident" id="7300459">sd</span>&nbsp;<span class="op" id="7300462">&lt;</span>&nbsp;<span class="ident" id="7300464">sdmax</span><span class="op" id="7300469">;</span>&nbsp;<span class="ident" id="7300471">sd</span>&nbsp;<span class="op" id="7300474">*=</span>&nbsp;<span class="num" id="7300477">2</span>&nbsp;<span class="op" id="7300479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300483">for</span>&nbsp;<span class="ident" id="7300487">m</span>&nbsp;<span class="op" id="7300489">:=</span>&nbsp;<span class="num" id="7300492">0.5</span><span class="op" id="7300495">;</span>&nbsp;<span class="ident" id="7300497">m</span>&nbsp;<span class="op" id="7300499">&lt;</span>&nbsp;<span class="ident" id="7300501">mmax</span><span class="op" id="7300505">;</span>&nbsp;<span class="ident" id="7300507">m</span>&nbsp;<span class="op" id="7300509">*=</span>&nbsp;<span class="num" id="7300512">2</span>&nbsp;<span class="op" id="7300514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300519">for</span>&nbsp;<span class="ident" id="7300523">_</span><span class="op" id="7300524">,</span>&nbsp;<span class="ident" id="7300526">seed</span>&nbsp;<span class="op" id="7300531">:=</span>&nbsp;<span class="keyword" id="7300534">range</span>&nbsp;<span class="ident" id="7300540">testSeeds</span>&nbsp;<span class="op" id="7300550">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300556">testNormalDistribution</span><span class="op" id="7300578">(</span><span class="ident" id="7300579">t</span><span class="op" id="7300580">,</span>&nbsp;<span class="ident" id="7300582">numTestSamples</span><span class="op" id="7300596">,</span>&nbsp;<span class="ident" id="7300598">m</span><span class="op" id="7300599">,</span>&nbsp;<span class="ident" id="7300601">sd</span><span class="op" id="7300603">,</span>&nbsp;<span class="ident" id="7300605">seed</span><span class="op" id="7300609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300615">if</span>&nbsp;<span class="ident" id="7300618">testing</span><span class="op" id="7300625">.</span><span class="ident" id="7300626">Short</span><span class="op" id="7300631">(</span><span class="op" id="7300632">)</span>&nbsp;<span class="op" id="7300634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300641">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300656">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300663">}</span><br>
<span class="lineno"></span><span class="op" id="7300665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7300668">//</span><br>
<span class="lineno">150</span><span class="comment" id="7300671">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7300705">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7300709">func</span>&nbsp;<span class="ident" id="7300714">generateExponentialSamples</span><span class="op" id="7300740">(</span><span class="ident" id="7300741">nsamples</span>&nbsp;<span class="builtintype" id="7300750">int</span><span class="op" id="7300753">,</span>&nbsp;<span class="ident" id="7300755">rate</span>&nbsp;<span class="builtintype" id="7300760">float64</span><span class="op" id="7300767">,</span>&nbsp;<span class="ident" id="7300769">seed</span>&nbsp;<span class="ident" id="7300774">int64</span><span class="op" id="7300779">)</span>&nbsp;<span class="op" id="7300781">[</span><span class="op" id="7300782">]</span><span class="builtintype" id="7300783">float64</span>&nbsp;<span class="op" id="7300791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300794">r</span>&nbsp;<span class="op" id="7300796">:=</span>&nbsp;<span class="ident" id="7300799">New</span><span class="op" id="7300802">(</span><span class="ident" id="7300803">NewSource</span><span class="op" id="7300812">(</span><span class="ident" id="7300813">seed</span><span class="op" id="7300817">)</span><span class="op" id="7300818">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300821">samples</span>&nbsp;<span class="op" id="7300829">:=</span>&nbsp;<span class="builtinfunc" id="7300832">make</span><span class="op" id="7300836">(</span><span class="op" id="7300837">[</span><span class="op" id="7300838">]</span><span class="builtintype" id="7300839">float64</span><span class="op" id="7300846">,</span>&nbsp;<span class="ident" id="7300848">nsamples</span><span class="op" id="7300856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300859">for</span>&nbsp;<span class="ident" id="7300863">i</span>&nbsp;<span class="op" id="7300865">:=</span>&nbsp;<span class="keyword" id="7300868">range</span>&nbsp;<span class="ident" id="7300874">samples</span>&nbsp;<span class="op" id="7300882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7300886">samples</span><span class="op" id="7300893">[</span><span class="ident" id="7300894">i</span><span class="op" id="7300895">]</span>&nbsp;<span class="op" id="7300897">=</span>&nbsp;<span class="ident" id="7300899">r</span><span class="op" id="7300900">.</span><span class="ident" id="7300901">ExpFloat64</span><span class="op" id="7300911">(</span><span class="op" id="7300912">)</span>&nbsp;<span class="op" id="7300914">/</span>&nbsp;<span class="ident" id="7300916">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7300922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7300925">return</span>&nbsp;<span class="ident" id="7300932">samples</span><br>
<span class="lineno">160</span><span class="op" id="7300940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7300943">func</span>&nbsp;<span class="ident" id="7300948">testExponentialDistribution</span><span class="op" id="7300975">(</span><span class="ident" id="7300976">t</span>&nbsp;<span class="op" id="7300978">*</span><span class="ident" id="7300979">testing</span><span class="op" id="7300986">.</span><span class="ident" id="7300987">T</span><span class="op" id="7300988">,</span>&nbsp;<span class="ident" id="7300990">nsamples</span>&nbsp;<span class="builtintype" id="7300999">int</span><span class="op" id="7301002">,</span>&nbsp;<span class="ident" id="7301004">rate</span>&nbsp;<span class="builtintype" id="7301009">float64</span><span class="op" id="7301016">,</span>&nbsp;<span class="ident" id="7301018">seed</span>&nbsp;<span class="ident" id="7301023">int64</span><span class="op" id="7301028">)</span>&nbsp;<span class="op" id="7301030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7301033">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301112">mean</span>&nbsp;<span class="op" id="7301117">:=</span>&nbsp;<span class="num" id="7301120">1</span>&nbsp;<span class="op" id="7301122">/</span>&nbsp;<span class="ident" id="7301124">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301130">stddev</span>&nbsp;<span class="op" id="7301137">:=</span>&nbsp;<span class="ident" id="7301140">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301147">samples</span>&nbsp;<span class="op" id="7301155">:=</span>&nbsp;<span class="ident" id="7301158">generateExponentialSamples</span><span class="op" id="7301184">(</span><span class="ident" id="7301185">nsamples</span><span class="op" id="7301193">,</span>&nbsp;<span class="ident" id="7301195">rate</span><span class="op" id="7301199">,</span>&nbsp;<span class="ident" id="7301201">seed</span><span class="op" id="7301205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301208">errorScale</span>&nbsp;<span class="op" id="7301219">:=</span>&nbsp;<span class="ident" id="7301222">max</span><span class="op" id="7301225">(</span><span class="num" id="7301226">1.0</span><span class="op" id="7301229">,</span>&nbsp;<span class="num" id="7301231">1</span><span class="op" id="7301232">/</span><span class="ident" id="7301233">rate</span><span class="op" id="7301237">)</span>&nbsp;<span class="comment" id="7301239">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301285">expected</span>&nbsp;<span class="op" id="7301294">:=</span>&nbsp;<span class="op" id="7301297">&amp;</span><span class="ident" id="7301298">statsResults</span><span class="op" id="7301310">{</span><span class="ident" id="7301311">mean</span><span class="op" id="7301315">,</span>&nbsp;<span class="ident" id="7301317">stddev</span><span class="op" id="7301323">,</span>&nbsp;<span class="num" id="7301325">0.10</span>&nbsp;<span class="op" id="7301330">*</span>&nbsp;<span class="ident" id="7301332">errorScale</span><span class="op" id="7301342">,</span>&nbsp;<span class="num" id="7301344">0.20</span>&nbsp;<span class="op" id="7301349">*</span>&nbsp;<span class="ident" id="7301351">errorScale</span><span class="op" id="7301361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7301365">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301434">checkSampleDistribution</span><span class="op" id="7301457">(</span><span class="ident" id="7301458">t</span><span class="op" id="7301459">,</span>&nbsp;<span class="ident" id="7301461">samples</span><span class="op" id="7301468">,</span>&nbsp;<span class="ident" id="7301470">expected</span><span class="op" id="7301478">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7301482">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301557">checkSampleSliceDistributions</span><span class="op" id="7301586">(</span><span class="ident" id="7301587">t</span><span class="op" id="7301588">,</span>&nbsp;<span class="ident" id="7301590">samples</span><span class="op" id="7301597">,</span>&nbsp;<span class="num" id="7301599">2</span><span class="op" id="7301600">,</span>&nbsp;<span class="ident" id="7301602">expected</span><span class="op" id="7301610">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7301614">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301688">checkSampleSliceDistributions</span><span class="op" id="7301717">(</span><span class="ident" id="7301718">t</span><span class="op" id="7301719">,</span>&nbsp;<span class="ident" id="7301721">samples</span><span class="op" id="7301728">,</span>&nbsp;<span class="num" id="7301730">7</span><span class="op" id="7301731">,</span>&nbsp;<span class="ident" id="7301733">expected</span><span class="op" id="7301741">)</span><br>
<span class="lineno">180</span><span class="op" id="7301743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7301746">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7301763">func</span>&nbsp;<span class="ident" id="7301768">TestStandardExponentialValues</span><span class="op" id="7301797">(</span><span class="ident" id="7301798">t</span>&nbsp;<span class="op" id="7301800">*</span><span class="ident" id="7301801">testing</span><span class="op" id="7301808">.</span><span class="ident" id="7301809">T</span><span class="op" id="7301810">)</span>&nbsp;<span class="op" id="7301812">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7301815">for</span>&nbsp;<span class="ident" id="7301819">_</span><span class="op" id="7301820">,</span>&nbsp;<span class="ident" id="7301822">seed</span>&nbsp;<span class="op" id="7301827">:=</span>&nbsp;<span class="keyword" id="7301830">range</span>&nbsp;<span class="ident" id="7301836">testSeeds</span>&nbsp;<span class="op" id="7301846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7301850">testExponentialDistribution</span><span class="op" id="7301877">(</span><span class="ident" id="7301878">t</span><span class="op" id="7301879">,</span>&nbsp;<span class="ident" id="7301881">numTestSamples</span><span class="op" id="7301895">,</span>&nbsp;<span class="num" id="7301897">1</span><span class="op" id="7301898">,</span>&nbsp;<span class="ident" id="7301900">seed</span><span class="op" id="7301904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7301907">}</span><br>
<span class="lineno"></span><span class="op" id="7301909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="7301912">func</span>&nbsp;<span class="ident" id="7301917">TestNonStandardExponentialValues</span><span class="op" id="7301949">(</span><span class="ident" id="7301950">t</span>&nbsp;<span class="op" id="7301952">*</span><span class="ident" id="7301953">testing</span><span class="op" id="7301960">.</span><span class="ident" id="7301961">T</span><span class="op" id="7301962">)</span>&nbsp;<span class="op" id="7301964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7301967">for</span>&nbsp;<span class="ident" id="7301971">rate</span>&nbsp;<span class="op" id="7301976">:=</span>&nbsp;<span class="num" id="7301979">0.05</span><span class="op" id="7301983">;</span>&nbsp;<span class="ident" id="7301985">rate</span>&nbsp;<span class="op" id="7301990">&lt;</span>&nbsp;<span class="num" id="7301992">10</span><span class="op" id="7301994">;</span>&nbsp;<span class="ident" id="7301996">rate</span>&nbsp;<span class="op" id="7302001">*=</span>&nbsp;<span class="num" id="7302004">2</span>&nbsp;<span class="op" id="7302006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302010">for</span>&nbsp;<span class="ident" id="7302014">_</span><span class="op" id="7302015">,</span>&nbsp;<span class="ident" id="7302017">seed</span>&nbsp;<span class="op" id="7302022">:=</span>&nbsp;<span class="keyword" id="7302025">range</span>&nbsp;<span class="ident" id="7302031">testSeeds</span>&nbsp;<span class="op" id="7302041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302046">testExponentialDistribution</span><span class="op" id="7302073">(</span><span class="ident" id="7302074">t</span><span class="op" id="7302075">,</span>&nbsp;<span class="ident" id="7302077">numTestSamples</span><span class="op" id="7302091">,</span>&nbsp;<span class="ident" id="7302093">rate</span><span class="op" id="7302097">,</span>&nbsp;<span class="ident" id="7302099">seed</span><span class="op" id="7302103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302108">if</span>&nbsp;<span class="ident" id="7302111">testing</span><span class="op" id="7302118">.</span><span class="ident" id="7302119">Short</span><span class="op" id="7302124">(</span><span class="op" id="7302125">)</span>&nbsp;<span class="op" id="7302127">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302133">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7302142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7302146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7302149">}</span><br>
<span class="lineno"></span><span class="op" id="7302151">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="7302154">//</span><br>
<span class="lineno"></span><span class="comment" id="7302157">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7302183">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="7302187">func</span>&nbsp;<span class="ident" id="7302192">initNorm</span><span class="op" id="7302200">(</span><span class="op" id="7302201">)</span>&nbsp;<span class="op" id="7302203">(</span><span class="ident" id="7302204">testKn</span>&nbsp;<span class="op" id="7302211">[</span><span class="op" id="7302212">]</span><span class="builtintype" id="7302213">uint32</span><span class="op" id="7302219">,</span>&nbsp;<span class="ident" id="7302221">testWn</span><span class="op" id="7302227">,</span>&nbsp;<span class="ident" id="7302229">testFn</span>&nbsp;<span class="op" id="7302236">[</span><span class="op" id="7302237">]</span><span class="builtintype" id="7302238">float32</span><span class="op" id="7302245">)</span>&nbsp;<span class="op" id="7302247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302250">const</span>&nbsp;<span class="ident" id="7302256">m1</span>&nbsp;<span class="op" id="7302259">=</span>&nbsp;<span class="num" id="7302261">1</span>&nbsp;<span class="op" id="7302263">&lt;&lt;</span>&nbsp;<span class="num" id="7302266">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302270">var</span>&nbsp;<span class="op" id="7302274">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302278">dn</span>&nbsp;<span class="builtintype" id="7302281">float64</span>&nbsp;<span class="op" id="7302289">=</span>&nbsp;<span class="ident" id="7302291">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302296">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7302307">=</span>&nbsp;<span class="ident" id="7302309">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302314">vn</span>&nbsp;<span class="builtintype" id="7302317">float64</span>&nbsp;<span class="op" id="7302325">=</span>&nbsp;<span class="num" id="7302327">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7302348">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302352">testKn</span>&nbsp;<span class="op" id="7302359">=</span>&nbsp;<span class="builtinfunc" id="7302361">make</span><span class="op" id="7302365">(</span><span class="op" id="7302366">[</span><span class="op" id="7302367">]</span><span class="builtintype" id="7302368">uint32</span><span class="op" id="7302374">,</span>&nbsp;<span class="num" id="7302376">128</span><span class="op" id="7302379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302382">testWn</span>&nbsp;<span class="op" id="7302389">=</span>&nbsp;<span class="builtinfunc" id="7302391">make</span><span class="op" id="7302395">(</span><span class="op" id="7302396">[</span><span class="op" id="7302397">]</span><span class="builtintype" id="7302398">float32</span><span class="op" id="7302405">,</span>&nbsp;<span class="num" id="7302407">128</span><span class="op" id="7302410">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302413">testFn</span>&nbsp;<span class="op" id="7302420">=</span>&nbsp;<span class="builtinfunc" id="7302422">make</span><span class="op" id="7302426">(</span><span class="op" id="7302427">[</span><span class="op" id="7302428">]</span><span class="builtintype" id="7302429">float32</span><span class="op" id="7302436">,</span>&nbsp;<span class="num" id="7302438">128</span><span class="op" id="7302441">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302445">q</span>&nbsp;<span class="op" id="7302447">:=</span>&nbsp;<span class="ident" id="7302450">vn</span>&nbsp;<span class="op" id="7302453">/</span>&nbsp;<span class="ident" id="7302455">math</span><span class="op" id="7302459">.</span><span class="ident" id="7302460">Exp</span><span class="op" id="7302463">(</span><span class="op" id="7302464">-</span><span class="num" id="7302465">0.5</span><span class="op" id="7302468">*</span><span class="ident" id="7302469">dn</span><span class="op" id="7302471">*</span><span class="ident" id="7302472">dn</span><span class="op" id="7302474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302477">testKn</span><span class="op" id="7302483">[</span><span class="num" id="7302484">0</span><span class="op" id="7302485">]</span>&nbsp;<span class="op" id="7302487">=</span>&nbsp;<span class="builtintype" id="7302489">uint32</span><span class="op" id="7302495">(</span><span class="op" id="7302496">(</span><span class="ident" id="7302497">dn</span>&nbsp;<span class="op" id="7302500">/</span>&nbsp;<span class="ident" id="7302502">q</span><span class="op" id="7302503">)</span>&nbsp;<span class="op" id="7302505">*</span>&nbsp;<span class="ident" id="7302507">m1</span><span class="op" id="7302509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302512">testKn</span><span class="op" id="7302518">[</span><span class="num" id="7302519">1</span><span class="op" id="7302520">]</span>&nbsp;<span class="op" id="7302522">=</span>&nbsp;<span class="num" id="7302524">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302527">testWn</span><span class="op" id="7302533">[</span><span class="num" id="7302534">0</span><span class="op" id="7302535">]</span>&nbsp;<span class="op" id="7302537">=</span>&nbsp;<span class="builtintype" id="7302539">float32</span><span class="op" id="7302546">(</span><span class="ident" id="7302547">q</span>&nbsp;<span class="op" id="7302549">/</span>&nbsp;<span class="ident" id="7302551">m1</span><span class="op" id="7302553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302556">testWn</span><span class="op" id="7302562">[</span><span class="num" id="7302563">127</span><span class="op" id="7302566">]</span>&nbsp;<span class="op" id="7302568">=</span>&nbsp;<span class="builtintype" id="7302570">float32</span><span class="op" id="7302577">(</span><span class="ident" id="7302578">dn</span>&nbsp;<span class="op" id="7302581">/</span>&nbsp;<span class="ident" id="7302583">m1</span><span class="op" id="7302585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302588">testFn</span><span class="op" id="7302594">[</span><span class="num" id="7302595">0</span><span class="op" id="7302596">]</span>&nbsp;<span class="op" id="7302598">=</span>&nbsp;<span class="num" id="7302600">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302605">testFn</span><span class="op" id="7302611">[</span><span class="num" id="7302612">127</span><span class="op" id="7302615">]</span>&nbsp;<span class="op" id="7302617">=</span>&nbsp;<span class="builtintype" id="7302619">float32</span><span class="op" id="7302626">(</span><span class="ident" id="7302627">math</span><span class="op" id="7302631">.</span><span class="ident" id="7302632">Exp</span><span class="op" id="7302635">(</span><span class="op" id="7302636">-</span><span class="num" id="7302637">0.5</span>&nbsp;<span class="op" id="7302641">*</span>&nbsp;<span class="ident" id="7302643">dn</span>&nbsp;<span class="op" id="7302646">*</span>&nbsp;<span class="ident" id="7302648">dn</span><span class="op" id="7302650">)</span><span class="op" id="7302651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302654">for</span>&nbsp;<span class="ident" id="7302658">i</span>&nbsp;<span class="op" id="7302660">:=</span>&nbsp;<span class="num" id="7302663">126</span><span class="op" id="7302666">;</span>&nbsp;<span class="ident" id="7302668">i</span>&nbsp;<span class="op" id="7302670">&gt;=</span>&nbsp;<span class="num" id="7302673">1</span><span class="op" id="7302674">;</span>&nbsp;<span class="ident" id="7302676">i</span><span class="op" id="7302677">--</span>&nbsp;<span class="op" id="7302680">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302684">dn</span>&nbsp;<span class="op" id="7302687">=</span>&nbsp;<span class="ident" id="7302689">math</span><span class="op" id="7302693">.</span><span class="ident" id="7302694">Sqrt</span><span class="op" id="7302698">(</span><span class="op" id="7302699">-</span><span class="num" id="7302700">2.0</span>&nbsp;<span class="op" id="7302704">*</span>&nbsp;<span class="ident" id="7302706">math</span><span class="op" id="7302710">.</span><span class="ident" id="7302711">Log</span><span class="op" id="7302714">(</span><span class="ident" id="7302715">vn</span><span class="op" id="7302717">/</span><span class="ident" id="7302718">dn</span><span class="op" id="7302720">+</span><span class="ident" id="7302721">math</span><span class="op" id="7302725">.</span><span class="ident" id="7302726">Exp</span><span class="op" id="7302729">(</span><span class="op" id="7302730">-</span><span class="num" id="7302731">0.5</span><span class="op" id="7302734">*</span><span class="ident" id="7302735">dn</span><span class="op" id="7302737">*</span><span class="ident" id="7302738">dn</span><span class="op" id="7302740">)</span><span class="op" id="7302741">)</span><span class="op" id="7302742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302746">testKn</span><span class="op" id="7302752">[</span><span class="ident" id="7302753">i</span><span class="op" id="7302754">+</span><span class="num" id="7302755">1</span><span class="op" id="7302756">]</span>&nbsp;<span class="op" id="7302758">=</span>&nbsp;<span class="builtintype" id="7302760">uint32</span><span class="op" id="7302766">(</span><span class="op" id="7302767">(</span><span class="ident" id="7302768">dn</span>&nbsp;<span class="op" id="7302771">/</span>&nbsp;<span class="ident" id="7302773">tn</span><span class="op" id="7302775">)</span>&nbsp;<span class="op" id="7302777">*</span>&nbsp;<span class="ident" id="7302779">m1</span><span class="op" id="7302781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302785">tn</span>&nbsp;<span class="op" id="7302788">=</span>&nbsp;<span class="ident" id="7302790">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302795">testFn</span><span class="op" id="7302801">[</span><span class="ident" id="7302802">i</span><span class="op" id="7302803">]</span>&nbsp;<span class="op" id="7302805">=</span>&nbsp;<span class="builtintype" id="7302807">float32</span><span class="op" id="7302814">(</span><span class="ident" id="7302815">math</span><span class="op" id="7302819">.</span><span class="ident" id="7302820">Exp</span><span class="op" id="7302823">(</span><span class="op" id="7302824">-</span><span class="num" id="7302825">0.5</span>&nbsp;<span class="op" id="7302829">*</span>&nbsp;<span class="ident" id="7302831">dn</span>&nbsp;<span class="op" id="7302834">*</span>&nbsp;<span class="ident" id="7302836">dn</span><span class="op" id="7302838">)</span><span class="op" id="7302839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302843">testWn</span><span class="op" id="7302849">[</span><span class="ident" id="7302850">i</span><span class="op" id="7302851">]</span>&nbsp;<span class="op" id="7302853">=</span>&nbsp;<span class="builtintype" id="7302855">float32</span><span class="op" id="7302862">(</span><span class="ident" id="7302863">dn</span>&nbsp;<span class="op" id="7302866">/</span>&nbsp;<span class="ident" id="7302868">m1</span><span class="op" id="7302870">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7302873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302876">return</span><br>
<span class="lineno"></span><span class="op" id="7302883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7302886">func</span>&nbsp;<span class="ident" id="7302891">initExp</span><span class="op" id="7302898">(</span><span class="op" id="7302899">)</span>&nbsp;<span class="op" id="7302901">(</span><span class="ident" id="7302902">testKe</span>&nbsp;<span class="op" id="7302909">[</span><span class="op" id="7302910">]</span><span class="builtintype" id="7302911">uint32</span><span class="op" id="7302917">,</span>&nbsp;<span class="ident" id="7302919">testWe</span><span class="op" id="7302925">,</span>&nbsp;<span class="ident" id="7302927">testFe</span>&nbsp;<span class="op" id="7302934">[</span><span class="op" id="7302935">]</span><span class="builtintype" id="7302936">float32</span><span class="op" id="7302943">)</span>&nbsp;<span class="op" id="7302945">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302948">const</span>&nbsp;<span class="ident" id="7302954">m2</span>&nbsp;<span class="op" id="7302957">=</span>&nbsp;<span class="num" id="7302959">1</span>&nbsp;<span class="op" id="7302961">&lt;&lt;</span>&nbsp;<span class="num" id="7302964">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7302968">var</span>&nbsp;<span class="op" id="7302972">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302976">de</span>&nbsp;<span class="builtintype" id="7302979">float64</span>&nbsp;<span class="op" id="7302987">=</span>&nbsp;<span class="ident" id="7302989">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302994">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7303005">=</span>&nbsp;<span class="ident" id="7303007">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303012">ve</span>&nbsp;<span class="builtintype" id="7303015">float64</span>&nbsp;<span class="op" id="7303023">=</span>&nbsp;<span class="num" id="7303025">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7303051">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303055">testKe</span>&nbsp;<span class="op" id="7303062">=</span>&nbsp;<span class="builtinfunc" id="7303064">make</span><span class="op" id="7303068">(</span><span class="op" id="7303069">[</span><span class="op" id="7303070">]</span><span class="builtintype" id="7303071">uint32</span><span class="op" id="7303077">,</span>&nbsp;<span class="num" id="7303079">256</span><span class="op" id="7303082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303085">testWe</span>&nbsp;<span class="op" id="7303092">=</span>&nbsp;<span class="builtinfunc" id="7303094">make</span><span class="op" id="7303098">(</span><span class="op" id="7303099">[</span><span class="op" id="7303100">]</span><span class="builtintype" id="7303101">float32</span><span class="op" id="7303108">,</span>&nbsp;<span class="num" id="7303110">256</span><span class="op" id="7303113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303116">testFe</span>&nbsp;<span class="op" id="7303123">=</span>&nbsp;<span class="builtinfunc" id="7303125">make</span><span class="op" id="7303129">(</span><span class="op" id="7303130">[</span><span class="op" id="7303131">]</span><span class="builtintype" id="7303132">float32</span><span class="op" id="7303139">,</span>&nbsp;<span class="num" id="7303141">256</span><span class="op" id="7303144">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303148">q</span>&nbsp;<span class="op" id="7303150">:=</span>&nbsp;<span class="ident" id="7303153">ve</span>&nbsp;<span class="op" id="7303156">/</span>&nbsp;<span class="ident" id="7303158">math</span><span class="op" id="7303162">.</span><span class="ident" id="7303163">Exp</span><span class="op" id="7303166">(</span><span class="op" id="7303167">-</span><span class="ident" id="7303168">de</span><span class="op" id="7303170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303173">testKe</span><span class="op" id="7303179">[</span><span class="num" id="7303180">0</span><span class="op" id="7303181">]</span>&nbsp;<span class="op" id="7303183">=</span>&nbsp;<span class="builtintype" id="7303185">uint32</span><span class="op" id="7303191">(</span><span class="op" id="7303192">(</span><span class="ident" id="7303193">de</span>&nbsp;<span class="op" id="7303196">/</span>&nbsp;<span class="ident" id="7303198">q</span><span class="op" id="7303199">)</span>&nbsp;<span class="op" id="7303201">*</span>&nbsp;<span class="ident" id="7303203">m2</span><span class="op" id="7303205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303208">testKe</span><span class="op" id="7303214">[</span><span class="num" id="7303215">1</span><span class="op" id="7303216">]</span>&nbsp;<span class="op" id="7303218">=</span>&nbsp;<span class="num" id="7303220">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303223">testWe</span><span class="op" id="7303229">[</span><span class="num" id="7303230">0</span><span class="op" id="7303231">]</span>&nbsp;<span class="op" id="7303233">=</span>&nbsp;<span class="builtintype" id="7303235">float32</span><span class="op" id="7303242">(</span><span class="ident" id="7303243">q</span>&nbsp;<span class="op" id="7303245">/</span>&nbsp;<span class="ident" id="7303247">m2</span><span class="op" id="7303249">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303252">testWe</span><span class="op" id="7303258">[</span><span class="num" id="7303259">255</span><span class="op" id="7303262">]</span>&nbsp;<span class="op" id="7303264">=</span>&nbsp;<span class="builtintype" id="7303266">float32</span><span class="op" id="7303273">(</span><span class="ident" id="7303274">de</span>&nbsp;<span class="op" id="7303277">/</span>&nbsp;<span class="ident" id="7303279">m2</span><span class="op" id="7303281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303284">testFe</span><span class="op" id="7303290">[</span><span class="num" id="7303291">0</span><span class="op" id="7303292">]</span>&nbsp;<span class="op" id="7303294">=</span>&nbsp;<span class="num" id="7303296">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303301">testFe</span><span class="op" id="7303307">[</span><span class="num" id="7303308">255</span><span class="op" id="7303311">]</span>&nbsp;<span class="op" id="7303313">=</span>&nbsp;<span class="builtintype" id="7303315">float32</span><span class="op" id="7303322">(</span><span class="ident" id="7303323">math</span><span class="op" id="7303327">.</span><span class="ident" id="7303328">Exp</span><span class="op" id="7303331">(</span><span class="op" id="7303332">-</span><span class="ident" id="7303333">de</span><span class="op" id="7303335">)</span><span class="op" id="7303336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303339">for</span>&nbsp;<span class="ident" id="7303343">i</span>&nbsp;<span class="op" id="7303345">:=</span>&nbsp;<span class="num" id="7303348">254</span><span class="op" id="7303351">;</span>&nbsp;<span class="ident" id="7303353">i</span>&nbsp;<span class="op" id="7303355">&gt;=</span>&nbsp;<span class="num" id="7303358">1</span><span class="op" id="7303359">;</span>&nbsp;<span class="ident" id="7303361">i</span><span class="op" id="7303362">--</span>&nbsp;<span class="op" id="7303365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303369">de</span>&nbsp;<span class="op" id="7303372">=</span>&nbsp;<span class="op" id="7303374">-</span><span class="ident" id="7303375">math</span><span class="op" id="7303379">.</span><span class="ident" id="7303380">Log</span><span class="op" id="7303383">(</span><span class="ident" id="7303384">ve</span><span class="op" id="7303386">/</span><span class="ident" id="7303387">de</span>&nbsp;<span class="op" id="7303390">+</span>&nbsp;<span class="ident" id="7303392">math</span><span class="op" id="7303396">.</span><span class="ident" id="7303397">Exp</span><span class="op" id="7303400">(</span><span class="op" id="7303401">-</span><span class="ident" id="7303402">de</span><span class="op" id="7303404">)</span><span class="op" id="7303405">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303409">testKe</span><span class="op" id="7303415">[</span><span class="ident" id="7303416">i</span><span class="op" id="7303417">+</span><span class="num" id="7303418">1</span><span class="op" id="7303419">]</span>&nbsp;<span class="op" id="7303421">=</span>&nbsp;<span class="builtintype" id="7303423">uint32</span><span class="op" id="7303429">(</span><span class="op" id="7303430">(</span><span class="ident" id="7303431">de</span>&nbsp;<span class="op" id="7303434">/</span>&nbsp;<span class="ident" id="7303436">te</span><span class="op" id="7303438">)</span>&nbsp;<span class="op" id="7303440">*</span>&nbsp;<span class="ident" id="7303442">m2</span><span class="op" id="7303444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303448">te</span>&nbsp;<span class="op" id="7303451">=</span>&nbsp;<span class="ident" id="7303453">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303458">testFe</span><span class="op" id="7303464">[</span><span class="ident" id="7303465">i</span><span class="op" id="7303466">]</span>&nbsp;<span class="op" id="7303468">=</span>&nbsp;<span class="builtintype" id="7303470">float32</span><span class="op" id="7303477">(</span><span class="ident" id="7303478">math</span><span class="op" id="7303482">.</span><span class="ident" id="7303483">Exp</span><span class="op" id="7303486">(</span><span class="op" id="7303487">-</span><span class="ident" id="7303488">de</span><span class="op" id="7303490">)</span><span class="op" id="7303491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7303495">testWe</span><span class="op" id="7303501">[</span><span class="ident" id="7303502">i</span><span class="op" id="7303503">]</span>&nbsp;<span class="op" id="7303505">=</span>&nbsp;<span class="builtintype" id="7303507">float32</span><span class="op" id="7303514">(</span><span class="ident" id="7303515">de</span>&nbsp;<span class="op" id="7303518">/</span>&nbsp;<span class="ident" id="7303520">m2</span><span class="op" id="7303522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7303525">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303528">return</span><br>
<span class="lineno"></span><span class="op" id="7303535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7303538">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7303606">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="7303670">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7303688">func</span>&nbsp;<span class="ident" id="7303693">compareUint32Slices</span><span class="op" id="7303712">(</span><span class="ident" id="7303713">s1</span><span class="op" id="7303715">,</span>&nbsp;<span class="ident" id="7303717">s2</span>&nbsp;<span class="op" id="7303720">[</span><span class="op" id="7303721">]</span><span class="builtintype" id="7303722">uint32</span><span class="op" id="7303728">)</span>&nbsp;<span class="builtintype" id="7303730">int</span>&nbsp;<span class="op" id="7303734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303737">if</span>&nbsp;<span class="builtinfunc" id="7303740">len</span><span class="op" id="7303743">(</span><span class="ident" id="7303744">s1</span><span class="op" id="7303746">)</span>&nbsp;<span class="op" id="7303748">!=</span>&nbsp;<span class="builtinfunc" id="7303751">len</span><span class="op" id="7303754">(</span><span class="ident" id="7303755">s2</span><span class="op" id="7303757">)</span>&nbsp;<span class="op" id="7303759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303763">if</span>&nbsp;<span class="builtinfunc" id="7303766">len</span><span class="op" id="7303769">(</span><span class="ident" id="7303770">s1</span><span class="op" id="7303772">)</span>&nbsp;<span class="op" id="7303774">&gt;</span>&nbsp;<span class="builtinfunc" id="7303776">len</span><span class="op" id="7303779">(</span><span class="ident" id="7303780">s2</span><span class="op" id="7303782">)</span>&nbsp;<span class="op" id="7303784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303789">return</span>&nbsp;<span class="builtinfunc" id="7303796">len</span><span class="op" id="7303799">(</span><span class="ident" id="7303800">s2</span><span class="op" id="7303802">)</span>&nbsp;<span class="op" id="7303804">+</span>&nbsp;<span class="num" id="7303806">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7303810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303814">return</span>&nbsp;<span class="builtinfunc" id="7303821">len</span><span class="op" id="7303824">(</span><span class="ident" id="7303825">s1</span><span class="op" id="7303827">)</span>&nbsp;<span class="op" id="7303829">+</span>&nbsp;<span class="num" id="7303831">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7303834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303837">for</span>&nbsp;<span class="ident" id="7303841">i</span>&nbsp;<span class="op" id="7303843">:=</span>&nbsp;<span class="keyword" id="7303846">range</span>&nbsp;<span class="ident" id="7303852">s1</span>&nbsp;<span class="op" id="7303855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303859">if</span>&nbsp;<span class="ident" id="7303862">s1</span><span class="op" id="7303864">[</span><span class="ident" id="7303865">i</span><span class="op" id="7303866">]</span>&nbsp;<span class="op" id="7303868">!=</span>&nbsp;<span class="ident" id="7303871">s2</span><span class="op" id="7303873">[</span><span class="ident" id="7303874">i</span><span class="op" id="7303875">]</span>&nbsp;<span class="op" id="7303877">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303882">return</span>&nbsp;<span class="ident" id="7303889">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7303893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7303896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7303899">return</span>&nbsp;<span class="op" id="7303906">-</span><span class="num" id="7303907">1</span><br>
<span class="lineno"></span><span class="op" id="7303909">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="7303912">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7303981">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="7304045">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7304063">func</span>&nbsp;<span class="ident" id="7304068">compareFloat32Slices</span><span class="op" id="7304088">(</span><span class="ident" id="7304089">s1</span><span class="op" id="7304091">,</span>&nbsp;<span class="ident" id="7304093">s2</span>&nbsp;<span class="op" id="7304096">[</span><span class="op" id="7304097">]</span><span class="builtintype" id="7304098">float32</span><span class="op" id="7304105">)</span>&nbsp;<span class="builtintype" id="7304107">int</span>&nbsp;<span class="op" id="7304111">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304114">if</span>&nbsp;<span class="builtinfunc" id="7304117">len</span><span class="op" id="7304120">(</span><span class="ident" id="7304121">s1</span><span class="op" id="7304123">)</span>&nbsp;<span class="op" id="7304125">!=</span>&nbsp;<span class="builtinfunc" id="7304128">len</span><span class="op" id="7304131">(</span><span class="ident" id="7304132">s2</span><span class="op" id="7304134">)</span>&nbsp;<span class="op" id="7304136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304140">if</span>&nbsp;<span class="builtinfunc" id="7304143">len</span><span class="op" id="7304146">(</span><span class="ident" id="7304147">s1</span><span class="op" id="7304149">)</span>&nbsp;<span class="op" id="7304151">&gt;</span>&nbsp;<span class="builtinfunc" id="7304153">len</span><span class="op" id="7304156">(</span><span class="ident" id="7304157">s2</span><span class="op" id="7304159">)</span>&nbsp;<span class="op" id="7304161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304166">return</span>&nbsp;<span class="builtinfunc" id="7304173">len</span><span class="op" id="7304176">(</span><span class="ident" id="7304177">s2</span><span class="op" id="7304179">)</span>&nbsp;<span class="op" id="7304181">+</span>&nbsp;<span class="num" id="7304183">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304191">return</span>&nbsp;<span class="builtinfunc" id="7304198">len</span><span class="op" id="7304201">(</span><span class="ident" id="7304202">s1</span><span class="op" id="7304204">)</span>&nbsp;<span class="op" id="7304206">+</span>&nbsp;<span class="num" id="7304208">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304214">for</span>&nbsp;<span class="ident" id="7304218">i</span>&nbsp;<span class="op" id="7304220">:=</span>&nbsp;<span class="keyword" id="7304223">range</span>&nbsp;<span class="ident" id="7304229">s1</span>&nbsp;<span class="op" id="7304232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304236">if</span>&nbsp;<span class="op" id="7304239">!</span><span class="ident" id="7304240">nearEqual</span><span class="op" id="7304249">(</span><span class="builtintype" id="7304250">float64</span><span class="op" id="7304257">(</span><span class="ident" id="7304258">s1</span><span class="op" id="7304260">[</span><span class="ident" id="7304261">i</span><span class="op" id="7304262">]</span><span class="op" id="7304263">)</span><span class="op" id="7304264">,</span>&nbsp;<span class="builtintype" id="7304266">float64</span><span class="op" id="7304273">(</span><span class="ident" id="7304274">s2</span><span class="op" id="7304276">[</span><span class="ident" id="7304277">i</span><span class="op" id="7304278">]</span><span class="op" id="7304279">)</span><span class="op" id="7304280">,</span>&nbsp;<span class="num" id="7304282">0</span><span class="op" id="7304283">,</span>&nbsp;<span class="num" id="7304285">1e-7</span><span class="op" id="7304289">)</span>&nbsp;<span class="op" id="7304291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304296">return</span>&nbsp;<span class="ident" id="7304303">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304307">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304313">return</span>&nbsp;<span class="op" id="7304320">-</span><span class="num" id="7304321">1</span><br>
<span class="lineno"></span><span class="op" id="7304323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7304326">func</span>&nbsp;<span class="ident" id="7304331">TestNormTables</span><span class="op" id="7304345">(</span><span class="ident" id="7304346">t</span>&nbsp;<span class="op" id="7304348">*</span><span class="ident" id="7304349">testing</span><span class="op" id="7304356">.</span><span class="ident" id="7304357">T</span><span class="op" id="7304358">)</span>&nbsp;<span class="op" id="7304360">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304363">testKn</span><span class="op" id="7304369">,</span>&nbsp;<span class="ident" id="7304371">testWn</span><span class="op" id="7304377">,</span>&nbsp;<span class="ident" id="7304379">testFn</span>&nbsp;<span class="op" id="7304386">:=</span>&nbsp;<span class="ident" id="7304389">initNorm</span><span class="op" id="7304397">(</span><span class="op" id="7304398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304401">if</span>&nbsp;<span class="ident" id="7304404">i</span>&nbsp;<span class="op" id="7304406">:=</span>&nbsp;<span class="ident" id="7304409">compareUint32Slices</span><span class="op" id="7304428">(</span><span class="ident" id="7304429">kn</span><span class="op" id="7304431">[</span><span class="num" id="7304432">0</span><span class="op" id="7304433">:</span><span class="op" id="7304434">]</span><span class="op" id="7304435">,</span>&nbsp;<span class="ident" id="7304437">testKn</span><span class="op" id="7304443">)</span><span class="op" id="7304444">;</span>&nbsp;<span class="ident" id="7304446">i</span>&nbsp;<span class="op" id="7304448">&gt;=</span>&nbsp;<span class="num" id="7304451">0</span>&nbsp;<span class="op" id="7304453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304457">t</span><span class="op" id="7304458">.</span><span class="ident" id="7304459">Errorf</span><span class="op" id="7304465">(</span><span class="string" id="7304466">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7304502">,</span>&nbsp;<span class="ident" id="7304504">i</span><span class="op" id="7304505">,</span>&nbsp;<span class="ident" id="7304507">kn</span><span class="op" id="7304509">[</span><span class="ident" id="7304510">i</span><span class="op" id="7304511">]</span><span class="op" id="7304512">,</span>&nbsp;<span class="ident" id="7304514">testKn</span><span class="op" id="7304520">[</span><span class="ident" id="7304521">i</span><span class="op" id="7304522">]</span><span class="op" id="7304523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304529">if</span>&nbsp;<span class="ident" id="7304532">i</span>&nbsp;<span class="op" id="7304534">:=</span>&nbsp;<span class="ident" id="7304537">compareFloat32Slices</span><span class="op" id="7304557">(</span><span class="ident" id="7304558">wn</span><span class="op" id="7304560">[</span><span class="num" id="7304561">0</span><span class="op" id="7304562">:</span><span class="op" id="7304563">]</span><span class="op" id="7304564">,</span>&nbsp;<span class="ident" id="7304566">testWn</span><span class="op" id="7304572">)</span><span class="op" id="7304573">;</span>&nbsp;<span class="ident" id="7304575">i</span>&nbsp;<span class="op" id="7304577">&gt;=</span>&nbsp;<span class="num" id="7304580">0</span>&nbsp;<span class="op" id="7304582">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304586">t</span><span class="op" id="7304587">.</span><span class="ident" id="7304588">Errorf</span><span class="op" id="7304594">(</span><span class="string" id="7304595">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7304631">,</span>&nbsp;<span class="ident" id="7304633">i</span><span class="op" id="7304634">,</span>&nbsp;<span class="ident" id="7304636">wn</span><span class="op" id="7304638">[</span><span class="ident" id="7304639">i</span><span class="op" id="7304640">]</span><span class="op" id="7304641">,</span>&nbsp;<span class="ident" id="7304643">testWn</span><span class="op" id="7304649">[</span><span class="ident" id="7304650">i</span><span class="op" id="7304651">]</span><span class="op" id="7304652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304658">if</span>&nbsp;<span class="ident" id="7304661">i</span>&nbsp;<span class="op" id="7304663">:=</span>&nbsp;<span class="ident" id="7304666">compareFloat32Slices</span><span class="op" id="7304686">(</span><span class="ident" id="7304687">fn</span><span class="op" id="7304689">[</span><span class="num" id="7304690">0</span><span class="op" id="7304691">:</span><span class="op" id="7304692">]</span><span class="op" id="7304693">,</span>&nbsp;<span class="ident" id="7304695">testFn</span><span class="op" id="7304701">)</span><span class="op" id="7304702">;</span>&nbsp;<span class="ident" id="7304704">i</span>&nbsp;<span class="op" id="7304706">&gt;=</span>&nbsp;<span class="num" id="7304709">0</span>&nbsp;<span class="op" id="7304711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304715">t</span><span class="op" id="7304716">.</span><span class="ident" id="7304717">Errorf</span><span class="op" id="7304723">(</span><span class="string" id="7304724">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7304760">,</span>&nbsp;<span class="ident" id="7304762">i</span><span class="op" id="7304763">,</span>&nbsp;<span class="ident" id="7304765">fn</span><span class="op" id="7304767">[</span><span class="ident" id="7304768">i</span><span class="op" id="7304769">]</span><span class="op" id="7304770">,</span>&nbsp;<span class="ident" id="7304772">testFn</span><span class="op" id="7304778">[</span><span class="ident" id="7304779">i</span><span class="op" id="7304780">]</span><span class="op" id="7304781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304784">}</span><br>
<span class="lineno">310</span><span class="op" id="7304786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7304789">func</span>&nbsp;<span class="ident" id="7304794">TestExpTables</span><span class="op" id="7304807">(</span><span class="ident" id="7304808">t</span>&nbsp;<span class="op" id="7304810">*</span><span class="ident" id="7304811">testing</span><span class="op" id="7304818">.</span><span class="ident" id="7304819">T</span><span class="op" id="7304820">)</span>&nbsp;<span class="op" id="7304822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304825">testKe</span><span class="op" id="7304831">,</span>&nbsp;<span class="ident" id="7304833">testWe</span><span class="op" id="7304839">,</span>&nbsp;<span class="ident" id="7304841">testFe</span>&nbsp;<span class="op" id="7304848">:=</span>&nbsp;<span class="ident" id="7304851">initExp</span><span class="op" id="7304858">(</span><span class="op" id="7304859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304862">if</span>&nbsp;<span class="ident" id="7304865">i</span>&nbsp;<span class="op" id="7304867">:=</span>&nbsp;<span class="ident" id="7304870">compareUint32Slices</span><span class="op" id="7304889">(</span><span class="ident" id="7304890">ke</span><span class="op" id="7304892">[</span><span class="num" id="7304893">0</span><span class="op" id="7304894">:</span><span class="op" id="7304895">]</span><span class="op" id="7304896">,</span>&nbsp;<span class="ident" id="7304898">testKe</span><span class="op" id="7304904">)</span><span class="op" id="7304905">;</span>&nbsp;<span class="ident" id="7304907">i</span>&nbsp;<span class="op" id="7304909">&gt;=</span>&nbsp;<span class="num" id="7304912">0</span>&nbsp;<span class="op" id="7304914">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304918">t</span><span class="op" id="7304919">.</span><span class="ident" id="7304920">Errorf</span><span class="op" id="7304926">(</span><span class="string" id="7304927">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7304963">,</span>&nbsp;<span class="ident" id="7304965">i</span><span class="op" id="7304966">,</span>&nbsp;<span class="ident" id="7304968">ke</span><span class="op" id="7304970">[</span><span class="ident" id="7304971">i</span><span class="op" id="7304972">]</span><span class="op" id="7304973">,</span>&nbsp;<span class="ident" id="7304975">testKe</span><span class="op" id="7304981">[</span><span class="ident" id="7304982">i</span><span class="op" id="7304983">]</span><span class="op" id="7304984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7304987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7304990">if</span>&nbsp;<span class="ident" id="7304993">i</span>&nbsp;<span class="op" id="7304995">:=</span>&nbsp;<span class="ident" id="7304998">compareFloat32Slices</span><span class="op" id="7305018">(</span><span class="ident" id="7305019">we</span><span class="op" id="7305021">[</span><span class="num" id="7305022">0</span><span class="op" id="7305023">:</span><span class="op" id="7305024">]</span><span class="op" id="7305025">,</span>&nbsp;<span class="ident" id="7305027">testWe</span><span class="op" id="7305033">)</span><span class="op" id="7305034">;</span>&nbsp;<span class="ident" id="7305036">i</span>&nbsp;<span class="op" id="7305038">&gt;=</span>&nbsp;<span class="num" id="7305041">0</span>&nbsp;<span class="op" id="7305043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305047">t</span><span class="op" id="7305048">.</span><span class="ident" id="7305049">Errorf</span><span class="op" id="7305055">(</span><span class="string" id="7305056">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7305092">,</span>&nbsp;<span class="ident" id="7305094">i</span><span class="op" id="7305095">,</span>&nbsp;<span class="ident" id="7305097">we</span><span class="op" id="7305099">[</span><span class="ident" id="7305100">i</span><span class="op" id="7305101">]</span><span class="op" id="7305102">,</span>&nbsp;<span class="ident" id="7305104">testWe</span><span class="op" id="7305110">[</span><span class="ident" id="7305111">i</span><span class="op" id="7305112">]</span><span class="op" id="7305113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305116">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305119">if</span>&nbsp;<span class="ident" id="7305122">i</span>&nbsp;<span class="op" id="7305124">:=</span>&nbsp;<span class="ident" id="7305127">compareFloat32Slices</span><span class="op" id="7305147">(</span><span class="ident" id="7305148">fe</span><span class="op" id="7305150">[</span><span class="num" id="7305151">0</span><span class="op" id="7305152">:</span><span class="op" id="7305153">]</span><span class="op" id="7305154">,</span>&nbsp;<span class="ident" id="7305156">testFe</span><span class="op" id="7305162">)</span><span class="op" id="7305163">;</span>&nbsp;<span class="ident" id="7305165">i</span>&nbsp;<span class="op" id="7305167">&gt;=</span>&nbsp;<span class="num" id="7305170">0</span>&nbsp;<span class="op" id="7305172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305176">t</span><span class="op" id="7305177">.</span><span class="ident" id="7305178">Errorf</span><span class="op" id="7305184">(</span><span class="string" id="7305185">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7305221">,</span>&nbsp;<span class="ident" id="7305223">i</span><span class="op" id="7305224">,</span>&nbsp;<span class="ident" id="7305226">fe</span><span class="op" id="7305228">[</span><span class="ident" id="7305229">i</span><span class="op" id="7305230">]</span><span class="op" id="7305231">,</span>&nbsp;<span class="ident" id="7305233">testFe</span><span class="op" id="7305239">[</span><span class="ident" id="7305240">i</span><span class="op" id="7305241">]</span><span class="op" id="7305242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305245">}</span><br>
<span class="lineno"></span><span class="op" id="7305247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="7305250">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="7305322">func</span>&nbsp;<span class="ident" id="7305327">TestFloat32</span><span class="op" id="7305338">(</span><span class="ident" id="7305339">t</span>&nbsp;<span class="op" id="7305341">*</span><span class="ident" id="7305342">testing</span><span class="op" id="7305349">.</span><span class="ident" id="7305350">T</span><span class="op" id="7305351">)</span>&nbsp;<span class="op" id="7305353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305356">r</span>&nbsp;<span class="op" id="7305358">:=</span>&nbsp;<span class="ident" id="7305361">New</span><span class="op" id="7305364">(</span><span class="ident" id="7305365">NewSource</span><span class="op" id="7305374">(</span><span class="num" id="7305375">1</span><span class="op" id="7305376">)</span><span class="op" id="7305377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305380">for</span>&nbsp;<span class="ident" id="7305384">ct</span>&nbsp;<span class="op" id="7305387">:=</span>&nbsp;<span class="num" id="7305390">0</span><span class="op" id="7305391">;</span>&nbsp;<span class="ident" id="7305393">ct</span>&nbsp;<span class="op" id="7305396">&lt;</span>&nbsp;<span class="num" id="7305398">10e6</span><span class="op" id="7305402">;</span>&nbsp;<span class="ident" id="7305404">ct</span><span class="op" id="7305406">++</span>&nbsp;<span class="op" id="7305409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305413">f</span>&nbsp;<span class="op" id="7305415">:=</span>&nbsp;<span class="ident" id="7305418">r</span><span class="op" id="7305419">.</span><span class="ident" id="7305420">Float32</span><span class="op" id="7305427">(</span><span class="op" id="7305428">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305432">if</span>&nbsp;<span class="ident" id="7305435">f</span>&nbsp;<span class="op" id="7305437">&gt;=</span>&nbsp;<span class="num" id="7305440">1</span>&nbsp;<span class="op" id="7305442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305447">t</span><span class="op" id="7305448">.</span><span class="ident" id="7305449">Fatal</span><span class="op" id="7305454">(</span><span class="string" id="7305455">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="7305496">,</span>&nbsp;<span class="ident" id="7305498">ct</span><span class="op" id="7305500">,</span>&nbsp;<span class="string" id="7305502">&#34;f:&#34;</span><span class="op" id="7305506">,</span>&nbsp;<span class="ident" id="7305508">f</span><span class="op" id="7305509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305516">}</span><br>
<span class="lineno"></span><span class="op" id="7305518">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="7305521">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7305536">func</span>&nbsp;<span class="ident" id="7305541">BenchmarkInt63Threadsafe</span><span class="op" id="7305565">(</span><span class="ident" id="7305566">b</span>&nbsp;<span class="op" id="7305568">*</span><span class="ident" id="7305569">testing</span><span class="op" id="7305576">.</span><span class="ident" id="7305577">B</span><span class="op" id="7305578">)</span>&nbsp;<span class="op" id="7305580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305583">for</span>&nbsp;<span class="ident" id="7305587">n</span>&nbsp;<span class="op" id="7305589">:=</span>&nbsp;<span class="ident" id="7305592">b</span><span class="op" id="7305593">.</span><span class="ident" id="7305594">N</span><span class="op" id="7305595">;</span>&nbsp;<span class="ident" id="7305597">n</span>&nbsp;<span class="op" id="7305599">&gt;</span>&nbsp;<span class="num" id="7305601">0</span><span class="op" id="7305602">;</span>&nbsp;<span class="ident" id="7305604">n</span><span class="op" id="7305605">--</span>&nbsp;<span class="op" id="7305608">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305612">Int63</span><span class="op" id="7305617">(</span><span class="op" id="7305618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305621">}</span><br>
<span class="lineno"></span><span class="op" id="7305623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7305626">func</span>&nbsp;<span class="ident" id="7305631">BenchmarkInt63Unthreadsafe</span><span class="op" id="7305657">(</span><span class="ident" id="7305658">b</span>&nbsp;<span class="op" id="7305660">*</span><span class="ident" id="7305661">testing</span><span class="op" id="7305668">.</span><span class="ident" id="7305669">B</span><span class="op" id="7305670">)</span>&nbsp;<span class="op" id="7305672">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305675">r</span>&nbsp;<span class="op" id="7305677">:=</span>&nbsp;<span class="ident" id="7305680">New</span><span class="op" id="7305683">(</span><span class="ident" id="7305684">NewSource</span><span class="op" id="7305693">(</span><span class="num" id="7305694">1</span><span class="op" id="7305695">)</span><span class="op" id="7305696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305699">for</span>&nbsp;<span class="ident" id="7305703">n</span>&nbsp;<span class="op" id="7305705">:=</span>&nbsp;<span class="ident" id="7305708">b</span><span class="op" id="7305709">.</span><span class="ident" id="7305710">N</span><span class="op" id="7305711">;</span>&nbsp;<span class="ident" id="7305713">n</span>&nbsp;<span class="op" id="7305715">&gt;</span>&nbsp;<span class="num" id="7305717">0</span><span class="op" id="7305718">;</span>&nbsp;<span class="ident" id="7305720">n</span><span class="op" id="7305721">--</span>&nbsp;<span class="op" id="7305724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305728">r</span><span class="op" id="7305729">.</span><span class="ident" id="7305730">Int63</span><span class="op" id="7305735">(</span><span class="op" id="7305736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305739">}</span><br>
<span class="lineno"></span><span class="op" id="7305741">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7305744">func</span>&nbsp;<span class="ident" id="7305749">BenchmarkIntn1000</span><span class="op" id="7305766">(</span><span class="ident" id="7305767">b</span>&nbsp;<span class="op" id="7305769">*</span><span class="ident" id="7305770">testing</span><span class="op" id="7305777">.</span><span class="ident" id="7305778">B</span><span class="op" id="7305779">)</span>&nbsp;<span class="op" id="7305781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305784">r</span>&nbsp;<span class="op" id="7305786">:=</span>&nbsp;<span class="ident" id="7305789">New</span><span class="op" id="7305792">(</span><span class="ident" id="7305793">NewSource</span><span class="op" id="7305802">(</span><span class="num" id="7305803">1</span><span class="op" id="7305804">)</span><span class="op" id="7305805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305808">for</span>&nbsp;<span class="ident" id="7305812">n</span>&nbsp;<span class="op" id="7305814">:=</span>&nbsp;<span class="ident" id="7305817">b</span><span class="op" id="7305818">.</span><span class="ident" id="7305819">N</span><span class="op" id="7305820">;</span>&nbsp;<span class="ident" id="7305822">n</span>&nbsp;<span class="op" id="7305824">&gt;</span>&nbsp;<span class="num" id="7305826">0</span><span class="op" id="7305827">;</span>&nbsp;<span class="ident" id="7305829">n</span><span class="op" id="7305830">--</span>&nbsp;<span class="op" id="7305833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305837">r</span><span class="op" id="7305838">.</span><span class="ident" id="7305839">Intn</span><span class="op" id="7305843">(</span><span class="num" id="7305844">1000</span><span class="op" id="7305848">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305851">}</span><br>
<span class="lineno"></span><span class="op" id="7305853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7305856">func</span>&nbsp;<span class="ident" id="7305861">BenchmarkInt63n1000</span><span class="op" id="7305880">(</span><span class="ident" id="7305881">b</span>&nbsp;<span class="op" id="7305883">*</span><span class="ident" id="7305884">testing</span><span class="op" id="7305891">.</span><span class="ident" id="7305892">B</span><span class="op" id="7305893">)</span>&nbsp;<span class="op" id="7305895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305898">r</span>&nbsp;<span class="op" id="7305900">:=</span>&nbsp;<span class="ident" id="7305903">New</span><span class="op" id="7305906">(</span><span class="ident" id="7305907">NewSource</span><span class="op" id="7305916">(</span><span class="num" id="7305917">1</span><span class="op" id="7305918">)</span><span class="op" id="7305919">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7305922">for</span>&nbsp;<span class="ident" id="7305926">n</span>&nbsp;<span class="op" id="7305928">:=</span>&nbsp;<span class="ident" id="7305931">b</span><span class="op" id="7305932">.</span><span class="ident" id="7305933">N</span><span class="op" id="7305934">;</span>&nbsp;<span class="ident" id="7305936">n</span>&nbsp;<span class="op" id="7305938">&gt;</span>&nbsp;<span class="num" id="7305940">0</span><span class="op" id="7305941">;</span>&nbsp;<span class="ident" id="7305943">n</span><span class="op" id="7305944">--</span>&nbsp;<span class="op" id="7305947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305951">r</span><span class="op" id="7305952">.</span><span class="ident" id="7305953">Int63n</span><span class="op" id="7305959">(</span><span class="num" id="7305960">1000</span><span class="op" id="7305964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7305967">}</span><br>
<span class="lineno"></span><span class="op" id="7305969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="7305972">func</span>&nbsp;<span class="ident" id="7305977">BenchmarkInt31n1000</span><span class="op" id="7305996">(</span><span class="ident" id="7305997">b</span>&nbsp;<span class="op" id="7305999">*</span><span class="ident" id="7306000">testing</span><span class="op" id="7306007">.</span><span class="ident" id="7306008">B</span><span class="op" id="7306009">)</span>&nbsp;<span class="op" id="7306011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306014">r</span>&nbsp;<span class="op" id="7306016">:=</span>&nbsp;<span class="ident" id="7306019">New</span><span class="op" id="7306022">(</span><span class="ident" id="7306023">NewSource</span><span class="op" id="7306032">(</span><span class="num" id="7306033">1</span><span class="op" id="7306034">)</span><span class="op" id="7306035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306038">for</span>&nbsp;<span class="ident" id="7306042">n</span>&nbsp;<span class="op" id="7306044">:=</span>&nbsp;<span class="ident" id="7306047">b</span><span class="op" id="7306048">.</span><span class="ident" id="7306049">N</span><span class="op" id="7306050">;</span>&nbsp;<span class="ident" id="7306052">n</span>&nbsp;<span class="op" id="7306054">&gt;</span>&nbsp;<span class="num" id="7306056">0</span><span class="op" id="7306057">;</span>&nbsp;<span class="ident" id="7306059">n</span><span class="op" id="7306060">--</span>&nbsp;<span class="op" id="7306063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306067">r</span><span class="op" id="7306068">.</span><span class="ident" id="7306069">Int31n</span><span class="op" id="7306075">(</span><span class="num" id="7306076">1000</span><span class="op" id="7306080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306083">}</span><br>
<span class="lineno">370</span><span class="op" id="7306085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7306088">func</span>&nbsp;<span class="ident" id="7306093">BenchmarkFloat32</span><span class="op" id="7306109">(</span><span class="ident" id="7306110">b</span>&nbsp;<span class="op" id="7306112">*</span><span class="ident" id="7306113">testing</span><span class="op" id="7306120">.</span><span class="ident" id="7306121">B</span><span class="op" id="7306122">)</span>&nbsp;<span class="op" id="7306124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306127">r</span>&nbsp;<span class="op" id="7306129">:=</span>&nbsp;<span class="ident" id="7306132">New</span><span class="op" id="7306135">(</span><span class="ident" id="7306136">NewSource</span><span class="op" id="7306145">(</span><span class="num" id="7306146">1</span><span class="op" id="7306147">)</span><span class="op" id="7306148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306151">for</span>&nbsp;<span class="ident" id="7306155">n</span>&nbsp;<span class="op" id="7306157">:=</span>&nbsp;<span class="ident" id="7306160">b</span><span class="op" id="7306161">.</span><span class="ident" id="7306162">N</span><span class="op" id="7306163">;</span>&nbsp;<span class="ident" id="7306165">n</span>&nbsp;<span class="op" id="7306167">&gt;</span>&nbsp;<span class="num" id="7306169">0</span><span class="op" id="7306170">;</span>&nbsp;<span class="ident" id="7306172">n</span><span class="op" id="7306173">--</span>&nbsp;<span class="op" id="7306176">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306180">r</span><span class="op" id="7306181">.</span><span class="ident" id="7306182">Float32</span><span class="op" id="7306189">(</span><span class="op" id="7306190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306193">}</span><br>
<span class="lineno"></span><span class="op" id="7306195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7306198">func</span>&nbsp;<span class="ident" id="7306203">BenchmarkFloat64</span><span class="op" id="7306219">(</span><span class="ident" id="7306220">b</span>&nbsp;<span class="op" id="7306222">*</span><span class="ident" id="7306223">testing</span><span class="op" id="7306230">.</span><span class="ident" id="7306231">B</span><span class="op" id="7306232">)</span>&nbsp;<span class="op" id="7306234">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306237">r</span>&nbsp;<span class="op" id="7306239">:=</span>&nbsp;<span class="ident" id="7306242">New</span><span class="op" id="7306245">(</span><span class="ident" id="7306246">NewSource</span><span class="op" id="7306255">(</span><span class="num" id="7306256">1</span><span class="op" id="7306257">)</span><span class="op" id="7306258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306261">for</span>&nbsp;<span class="ident" id="7306265">n</span>&nbsp;<span class="op" id="7306267">:=</span>&nbsp;<span class="ident" id="7306270">b</span><span class="op" id="7306271">.</span><span class="ident" id="7306272">N</span><span class="op" id="7306273">;</span>&nbsp;<span class="ident" id="7306275">n</span>&nbsp;<span class="op" id="7306277">&gt;</span>&nbsp;<span class="num" id="7306279">0</span><span class="op" id="7306280">;</span>&nbsp;<span class="ident" id="7306282">n</span><span class="op" id="7306283">--</span>&nbsp;<span class="op" id="7306286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306290">r</span><span class="op" id="7306291">.</span><span class="ident" id="7306292">Float64</span><span class="op" id="7306299">(</span><span class="op" id="7306300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306303">}</span><br>
<span class="lineno"></span><span class="op" id="7306305">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="7306308">func</span>&nbsp;<span class="ident" id="7306313">BenchmarkPerm3</span><span class="op" id="7306327">(</span><span class="ident" id="7306328">b</span>&nbsp;<span class="op" id="7306330">*</span><span class="ident" id="7306331">testing</span><span class="op" id="7306338">.</span><span class="ident" id="7306339">B</span><span class="op" id="7306340">)</span>&nbsp;<span class="op" id="7306342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306345">r</span>&nbsp;<span class="op" id="7306347">:=</span>&nbsp;<span class="ident" id="7306350">New</span><span class="op" id="7306353">(</span><span class="ident" id="7306354">NewSource</span><span class="op" id="7306363">(</span><span class="num" id="7306364">1</span><span class="op" id="7306365">)</span><span class="op" id="7306366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306369">for</span>&nbsp;<span class="ident" id="7306373">n</span>&nbsp;<span class="op" id="7306375">:=</span>&nbsp;<span class="ident" id="7306378">b</span><span class="op" id="7306379">.</span><span class="ident" id="7306380">N</span><span class="op" id="7306381">;</span>&nbsp;<span class="ident" id="7306383">n</span>&nbsp;<span class="op" id="7306385">&gt;</span>&nbsp;<span class="num" id="7306387">0</span><span class="op" id="7306388">;</span>&nbsp;<span class="ident" id="7306390">n</span><span class="op" id="7306391">--</span>&nbsp;<span class="op" id="7306394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306398">r</span><span class="op" id="7306399">.</span><span class="ident" id="7306400">Perm</span><span class="op" id="7306404">(</span><span class="num" id="7306405">3</span><span class="op" id="7306406">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306409">}</span><br>
<span class="lineno"></span><span class="op" id="7306411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7306414">func</span>&nbsp;<span class="ident" id="7306419">BenchmarkPerm30</span><span class="op" id="7306434">(</span><span class="ident" id="7306435">b</span>&nbsp;<span class="op" id="7306437">*</span><span class="ident" id="7306438">testing</span><span class="op" id="7306445">.</span><span class="ident" id="7306446">B</span><span class="op" id="7306447">)</span>&nbsp;<span class="op" id="7306449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306452">r</span>&nbsp;<span class="op" id="7306454">:=</span>&nbsp;<span class="ident" id="7306457">New</span><span class="op" id="7306460">(</span><span class="ident" id="7306461">NewSource</span><span class="op" id="7306470">(</span><span class="num" id="7306471">1</span><span class="op" id="7306472">)</span><span class="op" id="7306473">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7306476">for</span>&nbsp;<span class="ident" id="7306480">n</span>&nbsp;<span class="op" id="7306482">:=</span>&nbsp;<span class="ident" id="7306485">b</span><span class="op" id="7306486">.</span><span class="ident" id="7306487">N</span><span class="op" id="7306488">;</span>&nbsp;<span class="ident" id="7306490">n</span>&nbsp;<span class="op" id="7306492">&gt;</span>&nbsp;<span class="num" id="7306494">0</span><span class="op" id="7306495">;</span>&nbsp;<span class="ident" id="7306497">n</span><span class="op" id="7306498">--</span>&nbsp;<span class="op" id="7306501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7306505">r</span><span class="op" id="7306506">.</span><span class="ident" id="7306507">Perm</span><span class="op" id="7306511">(</span><span class="num" id="7306512">30</span><span class="op" id="7306514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7306517">}</span><br>
<span class="lineno"></span><span class="op" id="7306519">}</span>
</div>
</body>
</html>
