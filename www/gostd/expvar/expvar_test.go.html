<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>expvar</h2>
<ul>
<li><a href="/gostd/expvar/expvar.go.html">expvar.go</a></li>
<li><a href="/gostd/expvar/expvar_test.go.html" class="current">expvar_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7179248">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7179303">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7179357">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7179408">package</span>&nbsp;<span class="ident" id="7179416">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7179424">import</span>&nbsp;<span class="op" id="7179431">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7179434">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7179443">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7179460">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7179481">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7179492">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7179502">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="7179505">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="7179550">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="7179577">func</span>&nbsp;<span class="ident" id="7179582">RemoveAll</span><span class="op" id="7179591">(</span><span class="op" id="7179592">)</span>&nbsp;<span class="op" id="7179594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7179597">mutex</span><span class="op" id="7179602">.</span><span class="ident" id="7179603">Lock</span><span class="op" id="7179607">(</span><span class="op" id="7179608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7179611">defer</span>&nbsp;<span class="ident" id="7179617">mutex</span><span class="op" id="7179622">.</span><span class="ident" id="7179623">Unlock</span><span class="op" id="7179629">(</span><span class="op" id="7179630">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7179633">vars</span>&nbsp;<span class="op" id="7179638">=</span>&nbsp;<span class="builtinfunc" id="7179640">make</span><span class="op" id="7179644">(</span><span class="keyword" id="7179645">map</span><span class="op" id="7179648">[</span><span class="builtintype" id="7179649">string</span><span class="op" id="7179655">]</span><span class="ident" id="7179656">Var</span><span class="op" id="7179659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7179662">varKeys</span>&nbsp;<span class="op" id="7179670">=</span>&nbsp;<span class="builtintype" id="7179672">nil</span><br>
<span class="lineno"></span><span class="op" id="7179676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7179679">func</span>&nbsp;<span class="ident" id="7179684">TestInt</span><span class="op" id="7179691">(</span><span class="ident" id="7179692">t</span>&nbsp;<span class="op" id="7179694">*</span><span class="ident" id="7179695">testing</span><span class="op" id="7179702">.</span><span class="ident" id="7179703">T</span><span class="op" id="7179704">)</span>&nbsp;<span class="op" id="7179706">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7179709">RemoveAll</span><span class="op" id="7179718">(</span><span class="op" id="7179719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7179722">reqs</span>&nbsp;<span class="op" id="7179727">:=</span>&nbsp;<span class="ident" id="7179730">NewInt</span><span class="op" id="7179736">(</span><span class="string" id="7179737">&#34;requests&#34;</span><span class="op" id="7179747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7179750">if</span>&nbsp;<span class="ident" id="7179753">reqs</span><span class="op" id="7179757">.</span><span class="ident" id="7179758">i</span>&nbsp;<span class="op" id="7179760">!=</span>&nbsp;<span class="num" id="7179763">0</span>&nbsp;<span class="op" id="7179765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7179769">t</span><span class="op" id="7179770">.</span><span class="ident" id="7179771">Errorf</span><span class="op" id="7179777">(</span><span class="string" id="7179778">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7179799">,</span>&nbsp;<span class="ident" id="7179801">reqs</span><span class="op" id="7179805">.</span><span class="ident" id="7179806">i</span><span class="op" id="7179807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7179810">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7179813">if</span>&nbsp;<span class="ident" id="7179816">reqs</span>&nbsp;<span class="op" id="7179821">!=</span>&nbsp;<span class="ident" id="7179824">Get</span><span class="op" id="7179827">(</span><span class="string" id="7179828">&#34;requests&#34;</span><span class="op" id="7179838">)</span><span class="op" id="7179839">.</span><span class="op" id="7179840">(</span><span class="op" id="7179841">*</span><span class="ident" id="7179842">Int</span><span class="op" id="7179845">)</span>&nbsp;<span class="op" id="7179847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7179851">t</span><span class="op" id="7179852">.</span><span class="ident" id="7179853">Errorf</span><span class="op" id="7179859">(</span><span class="string" id="7179860">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7179875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7179878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7179882">reqs</span><span class="op" id="7179886">.</span><span class="ident" id="7179887">Add</span><span class="op" id="7179890">(</span><span class="num" id="7179891">1</span><span class="op" id="7179892">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7179895">reqs</span><span class="op" id="7179899">.</span><span class="ident" id="7179900">Add</span><span class="op" id="7179903">(</span><span class="num" id="7179904">3</span><span class="op" id="7179905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7179908">if</span>&nbsp;<span class="ident" id="7179911">reqs</span><span class="op" id="7179915">.</span><span class="ident" id="7179916">i</span>&nbsp;<span class="op" id="7179918">!=</span>&nbsp;<span class="num" id="7179921">4</span>&nbsp;<span class="op" id="7179923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7179927">t</span><span class="op" id="7179928">.</span><span class="ident" id="7179929">Errorf</span><span class="op" id="7179935">(</span><span class="string" id="7179936">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7179957">,</span>&nbsp;<span class="ident" id="7179959">reqs</span><span class="op" id="7179963">.</span><span class="ident" id="7179964">i</span><span class="op" id="7179965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7179968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7179972">if</span>&nbsp;<span class="ident" id="7179975">s</span>&nbsp;<span class="op" id="7179977">:=</span>&nbsp;<span class="ident" id="7179980">reqs</span><span class="op" id="7179984">.</span><span class="ident" id="7179985">String</span><span class="op" id="7179991">(</span><span class="op" id="7179992">)</span><span class="op" id="7179993">;</span>&nbsp;<span class="ident" id="7179995">s</span>&nbsp;<span class="op" id="7179997">!=</span>&nbsp;<span class="string" id="7180000">&#34;4&#34;</span>&nbsp;<span class="op" id="7180004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180008">t</span><span class="op" id="7180009">.</span><span class="ident" id="7180010">Errorf</span><span class="op" id="7180016">(</span><span class="string" id="7180017">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="7180049">,</span>&nbsp;<span class="ident" id="7180051">s</span><span class="op" id="7180052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180059">reqs</span><span class="op" id="7180063">.</span><span class="ident" id="7180064">Set</span><span class="op" id="7180067">(</span><span class="op" id="7180068">-</span><span class="num" id="7180069">2</span><span class="op" id="7180070">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7180073">if</span>&nbsp;<span class="ident" id="7180076">reqs</span><span class="op" id="7180080">.</span><span class="ident" id="7180081">i</span>&nbsp;<span class="op" id="7180083">!=</span>&nbsp;<span class="op" id="7180086">-</span><span class="num" id="7180087">2</span>&nbsp;<span class="op" id="7180089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180093">t</span><span class="op" id="7180094">.</span><span class="ident" id="7180095">Errorf</span><span class="op" id="7180101">(</span><span class="string" id="7180102">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="7180124">,</span>&nbsp;<span class="ident" id="7180126">reqs</span><span class="op" id="7180130">.</span><span class="ident" id="7180131">i</span><span class="op" id="7180132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180135">}</span><br>
<span class="lineno"></span><span class="op" id="7180137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="7180140">func</span>&nbsp;<span class="ident" id="7180145">TestFloat</span><span class="op" id="7180154">(</span><span class="ident" id="7180155">t</span>&nbsp;<span class="op" id="7180157">*</span><span class="ident" id="7180158">testing</span><span class="op" id="7180165">.</span><span class="ident" id="7180166">T</span><span class="op" id="7180167">)</span>&nbsp;<span class="op" id="7180169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180172">RemoveAll</span><span class="op" id="7180181">(</span><span class="op" id="7180182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180185">reqs</span>&nbsp;<span class="op" id="7180190">:=</span>&nbsp;<span class="ident" id="7180193">NewFloat</span><span class="op" id="7180201">(</span><span class="string" id="7180202">&#34;requests-float&#34;</span><span class="op" id="7180218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7180221">if</span>&nbsp;<span class="ident" id="7180224">reqs</span><span class="op" id="7180228">.</span><span class="ident" id="7180229">f</span>&nbsp;<span class="op" id="7180231">!=</span>&nbsp;<span class="num" id="7180234">0.0</span>&nbsp;<span class="op" id="7180238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180242">t</span><span class="op" id="7180243">.</span><span class="ident" id="7180244">Errorf</span><span class="op" id="7180250">(</span><span class="string" id="7180251">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7180272">,</span>&nbsp;<span class="ident" id="7180274">reqs</span><span class="op" id="7180278">.</span><span class="ident" id="7180279">f</span><span class="op" id="7180280">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7180286">if</span>&nbsp;<span class="ident" id="7180289">reqs</span>&nbsp;<span class="op" id="7180294">!=</span>&nbsp;<span class="ident" id="7180297">Get</span><span class="op" id="7180300">(</span><span class="string" id="7180301">&#34;requests-float&#34;</span><span class="op" id="7180317">)</span><span class="op" id="7180318">.</span><span class="op" id="7180319">(</span><span class="op" id="7180320">*</span><span class="ident" id="7180321">Float</span><span class="op" id="7180326">)</span>&nbsp;<span class="op" id="7180328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180332">t</span><span class="op" id="7180333">.</span><span class="ident" id="7180334">Errorf</span><span class="op" id="7180340">(</span><span class="string" id="7180341">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7180356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180363">reqs</span><span class="op" id="7180367">.</span><span class="ident" id="7180368">Add</span><span class="op" id="7180371">(</span><span class="num" id="7180372">1.5</span><span class="op" id="7180375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180378">reqs</span><span class="op" id="7180382">.</span><span class="ident" id="7180383">Add</span><span class="op" id="7180386">(</span><span class="num" id="7180387">1.25</span><span class="op" id="7180391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7180394">if</span>&nbsp;<span class="ident" id="7180397">reqs</span><span class="op" id="7180401">.</span><span class="ident" id="7180402">f</span>&nbsp;<span class="op" id="7180404">!=</span>&nbsp;<span class="num" id="7180407">2.75</span>&nbsp;<span class="op" id="7180412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180416">t</span><span class="op" id="7180417">.</span><span class="ident" id="7180418">Errorf</span><span class="op" id="7180424">(</span><span class="string" id="7180425">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="7180449">,</span>&nbsp;<span class="ident" id="7180451">reqs</span><span class="op" id="7180455">.</span><span class="ident" id="7180456">f</span><span class="op" id="7180457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180460">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7180464">if</span>&nbsp;<span class="ident" id="7180467">s</span>&nbsp;<span class="op" id="7180469">:=</span>&nbsp;<span class="ident" id="7180472">reqs</span><span class="op" id="7180476">.</span><span class="ident" id="7180477">String</span><span class="op" id="7180483">(</span><span class="op" id="7180484">)</span><span class="op" id="7180485">;</span>&nbsp;<span class="ident" id="7180487">s</span>&nbsp;<span class="op" id="7180489">!=</span>&nbsp;<span class="string" id="7180492">&#34;2.75&#34;</span>&nbsp;<span class="op" id="7180499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180503">t</span><span class="op" id="7180504">.</span><span class="ident" id="7180505">Errorf</span><span class="op" id="7180511">(</span><span class="string" id="7180512">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="7180547">,</span>&nbsp;<span class="ident" id="7180549">s</span><span class="op" id="7180550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180557">reqs</span><span class="op" id="7180561">.</span><span class="ident" id="7180562">Add</span><span class="op" id="7180565">(</span><span class="op" id="7180566">-</span><span class="num" id="7180567">2</span><span class="op" id="7180568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7180571">if</span>&nbsp;<span class="ident" id="7180574">reqs</span><span class="op" id="7180578">.</span><span class="ident" id="7180579">f</span>&nbsp;<span class="op" id="7180581">!=</span>&nbsp;<span class="num" id="7180584">0.75</span>&nbsp;<span class="op" id="7180589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180593">t</span><span class="op" id="7180594">.</span><span class="ident" id="7180595">Errorf</span><span class="op" id="7180601">(</span><span class="string" id="7180602">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="7180626">,</span>&nbsp;<span class="ident" id="7180628">reqs</span><span class="op" id="7180632">.</span><span class="ident" id="7180633">f</span><span class="op" id="7180634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180637">}</span><br>
<span class="lineno"></span><span class="op" id="7180639">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="7180642">func</span>&nbsp;<span class="ident" id="7180647">TestString</span><span class="op" id="7180657">(</span><span class="ident" id="7180658">t</span>&nbsp;<span class="op" id="7180660">*</span><span class="ident" id="7180661">testing</span><span class="op" id="7180668">.</span><span class="ident" id="7180669">T</span><span class="op" id="7180670">)</span>&nbsp;<span class="op" id="7180672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180675">RemoveAll</span><span class="op" id="7180684">(</span><span class="op" id="7180685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180688">name</span>&nbsp;<span class="op" id="7180693">:=</span>&nbsp;<span class="ident" id="7180696">NewString</span><span class="op" id="7180705">(</span><span class="string" id="7180706">&#34;my-name&#34;</span><span class="op" id="7180715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7180718">if</span>&nbsp;<span class="ident" id="7180721">name</span><span class="op" id="7180725">.</span><span class="ident" id="7180726">s</span>&nbsp;<span class="op" id="7180728">!=</span>&nbsp;<span class="string" id="7180731">&#34;&#34;</span>&nbsp;<span class="op" id="7180734">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180738">t</span><span class="op" id="7180739">.</span><span class="ident" id="7180740">Errorf</span><span class="op" id="7180746">(</span><span class="string" id="7180747">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="7180771">,</span>&nbsp;<span class="ident" id="7180773">name</span><span class="op" id="7180777">.</span><span class="ident" id="7180778">s</span><span class="op" id="7180779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180786">name</span><span class="op" id="7180790">.</span><span class="ident" id="7180791">Set</span><span class="op" id="7180794">(</span><span class="string" id="7180795">&#34;Mike&#34;</span><span class="op" id="7180801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7180804">if</span>&nbsp;<span class="ident" id="7180807">name</span><span class="op" id="7180811">.</span><span class="ident" id="7180812">s</span>&nbsp;<span class="op" id="7180814">!=</span>&nbsp;<span class="string" id="7180817">&#34;Mike&#34;</span>&nbsp;<span class="op" id="7180824">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180828">t</span><span class="op" id="7180829">.</span><span class="ident" id="7180830">Errorf</span><span class="op" id="7180836">(</span><span class="string" id="7180837">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="7180865">,</span>&nbsp;<span class="ident" id="7180867">name</span><span class="op" id="7180871">.</span><span class="ident" id="7180872">s</span><span class="op" id="7180873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7180880">if</span>&nbsp;<span class="ident" id="7180883">s</span>&nbsp;<span class="op" id="7180885">:=</span>&nbsp;<span class="ident" id="7180888">name</span><span class="op" id="7180892">.</span><span class="ident" id="7180893">String</span><span class="op" id="7180899">(</span><span class="op" id="7180900">)</span><span class="op" id="7180901">;</span>&nbsp;<span class="ident" id="7180903">s</span>&nbsp;<span class="op" id="7180905">!=</span>&nbsp;<span class="string" id="7180908">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="7180919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7180923">t</span><span class="op" id="7180924">.</span><span class="ident" id="7180925">Errorf</span><span class="op" id="7180931">(</span><span class="string" id="7180932">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="7180971">,</span>&nbsp;<span class="ident" id="7180973">s</span><span class="op" id="7180974">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7180977">}</span><br>
<span class="lineno"></span><span class="op" id="7180979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7180982">func</span>&nbsp;<span class="ident" id="7180987">TestMapCounter</span><span class="op" id="7181001">(</span><span class="ident" id="7181002">t</span>&nbsp;<span class="op" id="7181004">*</span><span class="ident" id="7181005">testing</span><span class="op" id="7181012">.</span><span class="ident" id="7181013">T</span><span class="op" id="7181014">)</span>&nbsp;<span class="op" id="7181016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181019">RemoveAll</span><span class="op" id="7181028">(</span><span class="op" id="7181029">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181032">colors</span>&nbsp;<span class="op" id="7181039">:=</span>&nbsp;<span class="ident" id="7181042">NewMap</span><span class="op" id="7181048">(</span><span class="string" id="7181049">&#34;bike-shed-colors&#34;</span><span class="op" id="7181067">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181071">colors</span><span class="op" id="7181077">.</span><span class="ident" id="7181078">Add</span><span class="op" id="7181081">(</span><span class="string" id="7181082">&#34;red&#34;</span><span class="op" id="7181087">,</span>&nbsp;<span class="num" id="7181089">1</span><span class="op" id="7181090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181093">colors</span><span class="op" id="7181099">.</span><span class="ident" id="7181100">Add</span><span class="op" id="7181103">(</span><span class="string" id="7181104">&#34;red&#34;</span><span class="op" id="7181109">,</span>&nbsp;<span class="num" id="7181111">2</span><span class="op" id="7181112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181115">colors</span><span class="op" id="7181121">.</span><span class="ident" id="7181122">Add</span><span class="op" id="7181125">(</span><span class="string" id="7181126">&#34;blue&#34;</span><span class="op" id="7181132">,</span>&nbsp;<span class="num" id="7181134">4</span><span class="op" id="7181135">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181138">colors</span><span class="op" id="7181144">.</span><span class="ident" id="7181145">AddFloat</span><span class="op" id="7181153">(</span><span class="string" id="7181154">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7181170">,</span>&nbsp;<span class="num" id="7181172">4.125</span><span class="op" id="7181177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7181180">if</span>&nbsp;<span class="ident" id="7181183">x</span>&nbsp;<span class="op" id="7181185">:=</span>&nbsp;<span class="ident" id="7181188">colors</span><span class="op" id="7181194">.</span><span class="ident" id="7181195">m</span><span class="op" id="7181196">[</span><span class="string" id="7181197">&#34;red&#34;</span><span class="op" id="7181202">]</span><span class="op" id="7181203">.</span><span class="op" id="7181204">(</span><span class="op" id="7181205">*</span><span class="ident" id="7181206">Int</span><span class="op" id="7181209">)</span><span class="op" id="7181210">.</span><span class="ident" id="7181211">i</span><span class="op" id="7181212">;</span>&nbsp;<span class="ident" id="7181214">x</span>&nbsp;<span class="op" id="7181216">!=</span>&nbsp;<span class="num" id="7181219">3</span>&nbsp;<span class="op" id="7181221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181225">t</span><span class="op" id="7181226">.</span><span class="ident" id="7181227">Errorf</span><span class="op" id="7181233">(</span><span class="string" id="7181234">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7181266">,</span>&nbsp;<span class="ident" id="7181268">x</span><span class="op" id="7181269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7181275">if</span>&nbsp;<span class="ident" id="7181278">x</span>&nbsp;<span class="op" id="7181280">:=</span>&nbsp;<span class="ident" id="7181283">colors</span><span class="op" id="7181289">.</span><span class="ident" id="7181290">m</span><span class="op" id="7181291">[</span><span class="string" id="7181292">&#34;blue&#34;</span><span class="op" id="7181298">]</span><span class="op" id="7181299">.</span><span class="op" id="7181300">(</span><span class="op" id="7181301">*</span><span class="ident" id="7181302">Int</span><span class="op" id="7181305">)</span><span class="op" id="7181306">.</span><span class="ident" id="7181307">i</span><span class="op" id="7181308">;</span>&nbsp;<span class="ident" id="7181310">x</span>&nbsp;<span class="op" id="7181312">!=</span>&nbsp;<span class="num" id="7181315">4</span>&nbsp;<span class="op" id="7181317">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181321">t</span><span class="op" id="7181322">.</span><span class="ident" id="7181323">Errorf</span><span class="op" id="7181329">(</span><span class="string" id="7181330">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7181363">,</span>&nbsp;<span class="ident" id="7181365">x</span><span class="op" id="7181366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7181372">if</span>&nbsp;<span class="ident" id="7181375">x</span>&nbsp;<span class="op" id="7181377">:=</span>&nbsp;<span class="ident" id="7181380">colors</span><span class="op" id="7181386">.</span><span class="ident" id="7181387">m</span><span class="op" id="7181388">[</span><span class="string" id="7181389">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7181405">]</span><span class="op" id="7181406">.</span><span class="op" id="7181407">(</span><span class="op" id="7181408">*</span><span class="ident" id="7181409">Float</span><span class="op" id="7181414">)</span><span class="op" id="7181415">.</span><span class="ident" id="7181416">f</span><span class="op" id="7181417">;</span>&nbsp;<span class="ident" id="7181419">x</span>&nbsp;<span class="op" id="7181421">!=</span>&nbsp;<span class="num" id="7181424">4.125</span>&nbsp;<span class="op" id="7181430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181434">t</span><span class="op" id="7181435">.</span><span class="ident" id="7181436">Errorf</span><span class="op" id="7181442">(</span><span class="string" id="7181443">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="7181488">,</span>&nbsp;<span class="ident" id="7181490">x</span><span class="op" id="7181491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181494">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7181498">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7181551">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181600">s</span>&nbsp;<span class="op" id="7181602">:=</span>&nbsp;<span class="ident" id="7181605">colors</span><span class="op" id="7181611">.</span><span class="ident" id="7181612">String</span><span class="op" id="7181618">(</span><span class="op" id="7181619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7181622">var</span>&nbsp;<span class="ident" id="7181626">j</span>&nbsp;<span class="keyword" id="7181628">interface</span><span class="op" id="7181637">{</span><span class="op" id="7181638">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181641">err</span>&nbsp;<span class="op" id="7181645">:=</span>&nbsp;<span class="ident" id="7181648">json</span><span class="op" id="7181652">.</span><span class="ident" id="7181653">Unmarshal</span><span class="op" id="7181662">(</span><span class="op" id="7181663">[</span><span class="op" id="7181664">]</span><span class="builtintype" id="7181665">byte</span><span class="op" id="7181669">(</span><span class="ident" id="7181670">s</span><span class="op" id="7181671">)</span><span class="op" id="7181672">,</span>&nbsp;<span class="op" id="7181674">&amp;</span><span class="ident" id="7181675">j</span><span class="op" id="7181676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7181679">if</span>&nbsp;<span class="ident" id="7181682">err</span>&nbsp;<span class="op" id="7181686">!=</span>&nbsp;<span class="builtintype" id="7181689">nil</span>&nbsp;<span class="op" id="7181693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181697">t</span><span class="op" id="7181698">.</span><span class="ident" id="7181699">Errorf</span><span class="op" id="7181705">(</span><span class="string" id="7181706">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="7181744">,</span>&nbsp;<span class="ident" id="7181746">err</span><span class="op" id="7181749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181755">m</span><span class="op" id="7181756">,</span>&nbsp;<span class="ident" id="7181758">ok</span>&nbsp;<span class="op" id="7181761">:=</span>&nbsp;<span class="ident" id="7181764">j</span><span class="op" id="7181765">.</span><span class="op" id="7181766">(</span><span class="keyword" id="7181767">map</span><span class="op" id="7181770">[</span><span class="builtintype" id="7181771">string</span><span class="op" id="7181777">]</span><span class="keyword" id="7181778">interface</span><span class="op" id="7181787">{</span><span class="op" id="7181788">}</span><span class="op" id="7181789">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7181792">if</span>&nbsp;<span class="op" id="7181795">!</span><span class="ident" id="7181796">ok</span>&nbsp;<span class="op" id="7181799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181803">t</span><span class="op" id="7181804">.</span><span class="ident" id="7181805">Error</span><span class="op" id="7181810">(</span><span class="string" id="7181811">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="7181850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181856">red</span>&nbsp;<span class="op" id="7181860">:=</span>&nbsp;<span class="ident" id="7181863">m</span><span class="op" id="7181864">[</span><span class="string" id="7181865">&#34;red&#34;</span><span class="op" id="7181870">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181873">x</span><span class="op" id="7181874">,</span>&nbsp;<span class="ident" id="7181876">ok</span>&nbsp;<span class="op" id="7181879">:=</span>&nbsp;<span class="ident" id="7181882">red</span><span class="op" id="7181885">.</span><span class="op" id="7181886">(</span><span class="builtintype" id="7181887">float64</span><span class="op" id="7181894">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7181897">if</span>&nbsp;<span class="op" id="7181900">!</span><span class="ident" id="7181901">ok</span>&nbsp;<span class="op" id="7181904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181908">t</span><span class="op" id="7181909">.</span><span class="ident" id="7181910">Error</span><span class="op" id="7181915">(</span><span class="string" id="7181916">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="7181945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7181951">if</span>&nbsp;<span class="ident" id="7181954">x</span>&nbsp;<span class="op" id="7181956">!=</span>&nbsp;<span class="num" id="7181959">3</span>&nbsp;<span class="op" id="7181961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7181965">t</span><span class="op" id="7181966">.</span><span class="ident" id="7181967">Errorf</span><span class="op" id="7181973">(</span><span class="string" id="7181974">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7181992">,</span>&nbsp;<span class="ident" id="7181994">x</span><span class="op" id="7181995">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7181998">}</span><br>
<span class="lineno"></span><span class="op" id="7182000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7182003">func</span>&nbsp;<span class="ident" id="7182008">TestFunc</span><span class="op" id="7182016">(</span><span class="ident" id="7182017">t</span>&nbsp;<span class="op" id="7182019">*</span><span class="ident" id="7182020">testing</span><span class="op" id="7182027">.</span><span class="ident" id="7182028">T</span><span class="op" id="7182029">)</span>&nbsp;<span class="op" id="7182031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182034">RemoveAll</span><span class="op" id="7182043">(</span><span class="op" id="7182044">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7182047">var</span>&nbsp;<span class="ident" id="7182051">x</span>&nbsp;<span class="keyword" id="7182053">interface</span><span class="op" id="7182062">{</span><span class="op" id="7182063">}</span>&nbsp;<span class="op" id="7182065">=</span>&nbsp;<span class="op" id="7182067">[</span><span class="op" id="7182068">]</span><span class="builtintype" id="7182069">string</span><span class="op" id="7182075">{</span><span class="string" id="7182076">&#34;a&#34;</span><span class="op" id="7182079">,</span>&nbsp;<span class="string" id="7182081">&#34;b&#34;</span><span class="op" id="7182084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182087">f</span>&nbsp;<span class="op" id="7182089">:=</span>&nbsp;<span class="ident" id="7182092">Func</span><span class="op" id="7182096">(</span><span class="keyword" id="7182097">func</span><span class="op" id="7182101">(</span><span class="op" id="7182102">)</span>&nbsp;<span class="keyword" id="7182104">interface</span><span class="op" id="7182113">{</span><span class="op" id="7182114">}</span>&nbsp;<span class="op" id="7182116">{</span>&nbsp;<span class="keyword" id="7182118">return</span>&nbsp;<span class="ident" id="7182125">x</span>&nbsp;<span class="op" id="7182127">}</span><span class="op" id="7182128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7182131">if</span>&nbsp;<span class="ident" id="7182134">s</span><span class="op" id="7182135">,</span>&nbsp;<span class="ident" id="7182137">exp</span>&nbsp;<span class="op" id="7182141">:=</span>&nbsp;<span class="ident" id="7182144">f</span><span class="op" id="7182145">.</span><span class="ident" id="7182146">String</span><span class="op" id="7182152">(</span><span class="op" id="7182153">)</span><span class="op" id="7182154">,</span>&nbsp;<span class="string" id="7182156">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="7182167">;</span>&nbsp;<span class="ident" id="7182169">s</span>&nbsp;<span class="op" id="7182171">!=</span>&nbsp;<span class="ident" id="7182174">exp</span>&nbsp;<span class="op" id="7182178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182182">t</span><span class="op" id="7182183">.</span><span class="ident" id="7182184">Errorf</span><span class="op" id="7182190">(</span><span class="string" id="7182191">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7182217">,</span>&nbsp;<span class="ident" id="7182219">s</span><span class="op" id="7182220">,</span>&nbsp;<span class="ident" id="7182222">exp</span><span class="op" id="7182225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182228">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182232">x</span>&nbsp;<span class="op" id="7182234">=</span>&nbsp;<span class="num" id="7182236">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7182240">if</span>&nbsp;<span class="ident" id="7182243">s</span><span class="op" id="7182244">,</span>&nbsp;<span class="ident" id="7182246">exp</span>&nbsp;<span class="op" id="7182250">:=</span>&nbsp;<span class="ident" id="7182253">f</span><span class="op" id="7182254">.</span><span class="ident" id="7182255">String</span><span class="op" id="7182261">(</span><span class="op" id="7182262">)</span><span class="op" id="7182263">,</span>&nbsp;<span class="string" id="7182265">`17`</span><span class="op" id="7182269">;</span>&nbsp;<span class="ident" id="7182271">s</span>&nbsp;<span class="op" id="7182273">!=</span>&nbsp;<span class="ident" id="7182276">exp</span>&nbsp;<span class="op" id="7182280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182284">t</span><span class="op" id="7182285">.</span><span class="ident" id="7182286">Errorf</span><span class="op" id="7182292">(</span><span class="string" id="7182293">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7182319">,</span>&nbsp;<span class="ident" id="7182321">s</span><span class="op" id="7182322">,</span>&nbsp;<span class="ident" id="7182324">exp</span><span class="op" id="7182327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182330">}</span><br>
<span class="lineno">145</span><span class="op" id="7182332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7182335">func</span>&nbsp;<span class="ident" id="7182340">TestHandler</span><span class="op" id="7182351">(</span><span class="ident" id="7182352">t</span>&nbsp;<span class="op" id="7182354">*</span><span class="ident" id="7182355">testing</span><span class="op" id="7182362">.</span><span class="ident" id="7182363">T</span><span class="op" id="7182364">)</span>&nbsp;<span class="op" id="7182366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182369">RemoveAll</span><span class="op" id="7182378">(</span><span class="op" id="7182379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182382">m</span>&nbsp;<span class="op" id="7182384">:=</span>&nbsp;<span class="ident" id="7182387">NewMap</span><span class="op" id="7182393">(</span><span class="string" id="7182394">&#34;map1&#34;</span><span class="op" id="7182400">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182403">m</span><span class="op" id="7182404">.</span><span class="ident" id="7182405">Add</span><span class="op" id="7182408">(</span><span class="string" id="7182409">&#34;a&#34;</span><span class="op" id="7182412">,</span>&nbsp;<span class="num" id="7182414">1</span><span class="op" id="7182415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182418">m</span><span class="op" id="7182419">.</span><span class="ident" id="7182420">Add</span><span class="op" id="7182423">(</span><span class="string" id="7182424">&#34;z&#34;</span><span class="op" id="7182427">,</span>&nbsp;<span class="num" id="7182429">2</span><span class="op" id="7182430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182433">m2</span>&nbsp;<span class="op" id="7182436">:=</span>&nbsp;<span class="ident" id="7182439">NewMap</span><span class="op" id="7182445">(</span><span class="string" id="7182446">&#34;map2&#34;</span><span class="op" id="7182452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7182455">for</span>&nbsp;<span class="ident" id="7182459">i</span>&nbsp;<span class="op" id="7182461">:=</span>&nbsp;<span class="num" id="7182464">0</span><span class="op" id="7182465">;</span>&nbsp;<span class="ident" id="7182467">i</span>&nbsp;<span class="op" id="7182469">&lt;</span>&nbsp;<span class="num" id="7182471">9</span><span class="op" id="7182472">;</span>&nbsp;<span class="ident" id="7182474">i</span><span class="op" id="7182475">++</span>&nbsp;<span class="op" id="7182478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182482">m2</span><span class="op" id="7182484">.</span><span class="ident" id="7182485">Add</span><span class="op" id="7182488">(</span><span class="ident" id="7182489">strconv</span><span class="op" id="7182496">.</span><span class="ident" id="7182497">Itoa</span><span class="op" id="7182501">(</span><span class="ident" id="7182502">i</span><span class="op" id="7182503">)</span><span class="op" id="7182504">,</span>&nbsp;<span class="builtintype" id="7182506">int64</span><span class="op" id="7182511">(</span><span class="ident" id="7182512">i</span><span class="op" id="7182513">)</span><span class="op" id="7182514">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182520">rr</span>&nbsp;<span class="op" id="7182523">:=</span>&nbsp;<span class="ident" id="7182526">httptest</span><span class="op" id="7182534">.</span><span class="ident" id="7182535">NewRecorder</span><span class="op" id="7182546">(</span><span class="op" id="7182547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182550">rr</span><span class="op" id="7182552">.</span><span class="ident" id="7182553">Body</span>&nbsp;<span class="op" id="7182558">=</span>&nbsp;<span class="builtinfunc" id="7182560">new</span><span class="op" id="7182563">(</span><span class="ident" id="7182564">bytes</span><span class="op" id="7182569">.</span><span class="ident" id="7182570">Buffer</span><span class="op" id="7182576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182579">expvarHandler</span><span class="op" id="7182592">(</span><span class="ident" id="7182593">rr</span><span class="op" id="7182595">,</span>&nbsp;<span class="builtintype" id="7182597">nil</span><span class="op" id="7182600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182603">want</span>&nbsp;<span class="op" id="7182608">:=</span>&nbsp;<span class="string" id="7182611">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7182726">if</span>&nbsp;<span class="ident" id="7182729">got</span>&nbsp;<span class="op" id="7182733">:=</span>&nbsp;<span class="ident" id="7182736">rr</span><span class="op" id="7182738">.</span><span class="ident" id="7182739">Body</span><span class="op" id="7182743">.</span><span class="ident" id="7182744">String</span><span class="op" id="7182750">(</span><span class="op" id="7182751">)</span><span class="op" id="7182752">;</span>&nbsp;<span class="ident" id="7182754">got</span>&nbsp;<span class="op" id="7182758">!=</span>&nbsp;<span class="ident" id="7182761">want</span>&nbsp;<span class="op" id="7182766">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7182770">t</span><span class="op" id="7182771">.</span><span class="ident" id="7182772">Errorf</span><span class="op" id="7182778">(</span><span class="string" id="7182779">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="7182815">,</span>&nbsp;<span class="ident" id="7182817">got</span><span class="op" id="7182820">,</span>&nbsp;<span class="ident" id="7182822">want</span><span class="op" id="7182826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7182829">}</span><br>
<span class="lineno"></span><span class="op" id="7182831">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
