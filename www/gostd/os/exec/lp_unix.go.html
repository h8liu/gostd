<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/exec</h2>
<ul>
<li><a href="/gostd/os/exec/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/exec/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/os/exec/lp_test.go.html">lp_test.go</a></li>
<li><a href="/gostd/os/exec/lp_unix.go.html">lp_unix.go</a></li>
<li><a href="/gostd/os/exec/lp_unix_test.go.html">lp_unix_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5536880">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5536936">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5536990">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5537041">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5537111">package</span>&nbsp;<span class="ident" id="5537119">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5537125">import</span>&nbsp;<span class="op" id="5537132">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5537135">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5537145">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5537151">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5537161">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5537164">//&nbsp;ErrNotFound&nbsp;is&nbsp;the&nbsp;error&nbsp;resulting&nbsp;if&nbsp;a&nbsp;path&nbsp;search&nbsp;failed&nbsp;to&nbsp;find&nbsp;an&nbsp;executable&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5537254">var</span>&nbsp;<span class="ident" id="5537258">ErrNotFound</span>&nbsp;<span class="op" id="5537270">=</span>&nbsp;<span class="ident" id="5537272">errors</span><span class="op" id="5537278">.</span><span class="ident" id="5537279">New</span><span class="op" id="5537282">(</span><span class="string" id="5537283">&#34;executable&nbsp;file&nbsp;not&nbsp;found&nbsp;in&nbsp;$PATH&#34;</span><span class="op" id="5537319">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5537322">func</span>&nbsp;<span class="ident" id="5537327">findExecutable</span><span class="op" id="5537341">(</span><span class="ident" id="5537342">file</span>&nbsp;<span class="builtintype" id="5537347">string</span><span class="op" id="5537353">)</span>&nbsp;<span class="builtintype" id="5537355">error</span>&nbsp;<span class="op" id="5537361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5537364">d</span><span class="op" id="5537365">,</span>&nbsp;<span class="ident" id="5537367">err</span>&nbsp;<span class="op" id="5537371">:=</span>&nbsp;<span class="ident" id="5537374">os</span><span class="op" id="5537376">.</span><span class="ident" id="5537377">Stat</span><span class="op" id="5537381">(</span><span class="ident" id="5537382">file</span><span class="op" id="5537386">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5537389">if</span>&nbsp;<span class="ident" id="5537392">err</span>&nbsp;<span class="op" id="5537396">!=</span>&nbsp;<span class="ident" id="5537399">nil</span>&nbsp;<span class="op" id="5537403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5537407">return</span>&nbsp;<span class="ident" id="5537414">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5537419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5537422">if</span>&nbsp;<span class="ident" id="5537425">m</span>&nbsp;<span class="op" id="5537427">:=</span>&nbsp;<span class="ident" id="5537430">d</span><span class="op" id="5537431">.</span><span class="ident" id="5537432">Mode</span><span class="op" id="5537436">(</span><span class="op" id="5537437">)</span><span class="op" id="5537438">;</span>&nbsp;<span class="op" id="5537440">!</span><span class="ident" id="5537441">m</span><span class="op" id="5537442">.</span><span class="ident" id="5537443">IsDir</span><span class="op" id="5537448">(</span><span class="op" id="5537449">)</span>&nbsp;<span class="op" id="5537451">&amp;&amp;</span>&nbsp;<span class="ident" id="5537454">m</span><span class="op" id="5537455">&amp;</span><span class="num" id="5537456">0111</span>&nbsp;<span class="op" id="5537461">!=</span>&nbsp;<span class="num" id="5537464">0</span>&nbsp;<span class="op" id="5537466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5537470">return</span>&nbsp;<span class="ident" id="5537477">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5537482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5537485">return</span>&nbsp;<span class="ident" id="5537492">os</span><span class="op" id="5537494">.</span><span class="ident" id="5537495">ErrPermission</span><br>
<span class="lineno"></span><span class="op" id="5537509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5537512">//&nbsp;LookPath&nbsp;searches&nbsp;for&nbsp;an&nbsp;executable&nbsp;binary&nbsp;named&nbsp;file</span><br>
<span class="lineno">30</span><span class="comment" id="5537569">//&nbsp;in&nbsp;the&nbsp;directories&nbsp;named&nbsp;by&nbsp;the&nbsp;PATH&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno"></span><span class="comment" id="5537631">//&nbsp;If&nbsp;file&nbsp;contains&nbsp;a&nbsp;slash,&nbsp;it&nbsp;is&nbsp;tried&nbsp;directly&nbsp;and&nbsp;the&nbsp;PATH&nbsp;is&nbsp;not&nbsp;consulted.</span><br>
<span class="lineno"></span><span class="comment" id="5537712">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;an&nbsp;absolute&nbsp;path&nbsp;or&nbsp;a&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="5537795">func</span>&nbsp;<span class="ident" id="5537800">LookPath</span><span class="op" id="5537808">(</span><span class="ident" id="5537809">file</span>&nbsp;<span class="builtintype" id="5537814">string</span><span class="op" id="5537820">)</span>&nbsp;<span class="op" id="5537822">(</span><span class="builtintype" id="5537823">string</span><span class="op" id="5537829">,</span>&nbsp;<span class="builtintype" id="5537831">error</span><span class="op" id="5537836">)</span>&nbsp;<span class="op" id="5537838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5537841">//&nbsp;NOTE(rsc):&nbsp;I&nbsp;wish&nbsp;we&nbsp;could&nbsp;use&nbsp;the&nbsp;Plan&nbsp;9&nbsp;behavior&nbsp;here</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5537901">//&nbsp;(only&nbsp;bypass&nbsp;the&nbsp;path&nbsp;if&nbsp;file&nbsp;begins&nbsp;with&nbsp;/&nbsp;or&nbsp;./&nbsp;or&nbsp;../)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5537963">//&nbsp;but&nbsp;that&nbsp;would&nbsp;not&nbsp;match&nbsp;all&nbsp;the&nbsp;Unix&nbsp;shells.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538014">if</span>&nbsp;<span class="ident" id="5538017">strings</span><span class="op" id="5538024">.</span><span class="ident" id="5538025">Contains</span><span class="op" id="5538033">(</span><span class="ident" id="5538034">file</span><span class="op" id="5538038">,</span>&nbsp;<span class="string" id="5538040">&#34;/&#34;</span><span class="op" id="5538043">)</span>&nbsp;<span class="op" id="5538045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5538049">err</span>&nbsp;<span class="op" id="5538053">:=</span>&nbsp;<span class="ident" id="5538056">findExecutable</span><span class="op" id="5538070">(</span><span class="ident" id="5538071">file</span><span class="op" id="5538075">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538079">if</span>&nbsp;<span class="ident" id="5538082">err</span>&nbsp;<span class="op" id="5538086">==</span>&nbsp;<span class="ident" id="5538089">nil</span>&nbsp;<span class="op" id="5538093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538098">return</span>&nbsp;<span class="ident" id="5538105">file</span><span class="op" id="5538109">,</span>&nbsp;<span class="ident" id="5538111">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5538117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538121">return</span>&nbsp;<span class="string" id="5538128">&#34;&#34;</span><span class="op" id="5538130">,</span>&nbsp;<span class="op" id="5538132">&amp;</span><span class="ident" id="5538133">Error</span><span class="op" id="5538138">{</span><span class="ident" id="5538139">file</span><span class="op" id="5538143">,</span>&nbsp;<span class="ident" id="5538145">err</span><span class="op" id="5538148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5538151">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5538154">pathenv</span>&nbsp;<span class="op" id="5538162">:=</span>&nbsp;<span class="ident" id="5538165">os</span><span class="op" id="5538167">.</span><span class="ident" id="5538168">Getenv</span><span class="op" id="5538174">(</span><span class="string" id="5538175">&#34;PATH&#34;</span><span class="op" id="5538181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538184">if</span>&nbsp;<span class="ident" id="5538187">pathenv</span>&nbsp;<span class="op" id="5538195">==</span>&nbsp;<span class="string" id="5538198">&#34;&#34;</span>&nbsp;<span class="op" id="5538201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538205">return</span>&nbsp;<span class="string" id="5538212">&#34;&#34;</span><span class="op" id="5538214">,</span>&nbsp;<span class="op" id="5538216">&amp;</span><span class="ident" id="5538217">Error</span><span class="op" id="5538222">{</span><span class="ident" id="5538223">file</span><span class="op" id="5538227">,</span>&nbsp;<span class="ident" id="5538229">ErrNotFound</span><span class="op" id="5538240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5538243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538246">for</span>&nbsp;<span class="ident" id="5538250">_</span><span class="op" id="5538251">,</span>&nbsp;<span class="ident" id="5538253">dir</span>&nbsp;<span class="op" id="5538257">:=</span>&nbsp;<span class="keyword" id="5538260">range</span>&nbsp;<span class="ident" id="5538266">strings</span><span class="op" id="5538273">.</span><span class="ident" id="5538274">Split</span><span class="op" id="5538279">(</span><span class="ident" id="5538280">pathenv</span><span class="op" id="5538287">,</span>&nbsp;<span class="string" id="5538289">&#34;:&#34;</span><span class="op" id="5538292">)</span>&nbsp;<span class="op" id="5538294">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538298">if</span>&nbsp;<span class="ident" id="5538301">dir</span>&nbsp;<span class="op" id="5538305">==</span>&nbsp;<span class="string" id="5538308">&#34;&#34;</span>&nbsp;<span class="op" id="5538311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5538316">//&nbsp;Unix&nbsp;shell&nbsp;semantics:&nbsp;path&nbsp;element&nbsp;&#34;&#34;&nbsp;means&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5538370">dir</span>&nbsp;<span class="op" id="5538374">=</span>&nbsp;<span class="string" id="5538376">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5538382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5538386">path</span>&nbsp;<span class="op" id="5538391">:=</span>&nbsp;<span class="ident" id="5538394">dir</span>&nbsp;<span class="op" id="5538398">+</span>&nbsp;<span class="string" id="5538400">&#34;/&#34;</span>&nbsp;<span class="op" id="5538404">+</span>&nbsp;<span class="ident" id="5538406">file</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538413">if</span>&nbsp;<span class="ident" id="5538416">err</span>&nbsp;<span class="op" id="5538420">:=</span>&nbsp;<span class="ident" id="5538423">findExecutable</span><span class="op" id="5538437">(</span><span class="ident" id="5538438">path</span><span class="op" id="5538442">)</span><span class="op" id="5538443">;</span>&nbsp;<span class="ident" id="5538445">err</span>&nbsp;<span class="op" id="5538449">==</span>&nbsp;<span class="ident" id="5538452">nil</span>&nbsp;<span class="op" id="5538456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538461">return</span>&nbsp;<span class="ident" id="5538468">path</span><span class="op" id="5538472">,</span>&nbsp;<span class="ident" id="5538474">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5538480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5538483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538486">return</span>&nbsp;<span class="string" id="5538493">&#34;&#34;</span><span class="op" id="5538495">,</span>&nbsp;<span class="op" id="5538497">&amp;</span><span class="ident" id="5538498">Error</span><span class="op" id="5538503">{</span><span class="ident" id="5538504">file</span><span class="op" id="5538508">,</span>&nbsp;<span class="ident" id="5538510">ErrNotFound</span><span class="op" id="5538521">}</span><br>
<span class="lineno">60</span><span class="op" id="5538523">}</span>
</div>
</body>
</html>
