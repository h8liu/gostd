<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7489594">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7489649">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7489703">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7489754">package</span>&nbsp;<span class="ident" id="7489762">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7489767">import</span>&nbsp;<span class="string" id="7489774">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7489782">type</span>&nbsp;<span class="ident" id="7489787">streamListener</span>&nbsp;<span class="keyword" id="7489802">struct</span>&nbsp;<span class="op" id="7489809">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7489812">net</span><span class="op" id="7489815">,</span>&nbsp;<span class="ident" id="7489817">addr</span>&nbsp;<span class="builtintype" id="7489822">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7489830">ln</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7489840">Listener</span><br>
<span class="lineno"></span><span class="op" id="7489849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7489852">type</span>&nbsp;<span class="ident" id="7489857">dualStackServer</span>&nbsp;<span class="keyword" id="7489873">struct</span>&nbsp;<span class="op" id="7489880">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7489883">lnmu</span>&nbsp;<span class="ident" id="7489888">sync</span><span class="op" id="7489892">.</span><span class="ident" id="7489893">RWMutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7489902">lns</span>&nbsp;&nbsp;<span class="op" id="7489907">[</span><span class="op" id="7489908">]</span><span class="ident" id="7489909">streamListener</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7489925">port</span>&nbsp;<span class="builtintype" id="7489930">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7489939">cmu</span>&nbsp;<span class="ident" id="7489943">sync</span><span class="op" id="7489947">.</span><span class="ident" id="7489948">RWMutex</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7489957">cs</span>&nbsp;&nbsp;<span class="op" id="7489961">[</span><span class="op" id="7489962">]</span><span class="ident" id="7489963">Conn</span>&nbsp;<span class="comment" id="7489968">//&nbsp;established&nbsp;connections&nbsp;at&nbsp;the&nbsp;passive&nbsp;open&nbsp;side</span><br>
<span class="lineno"></span><span class="op" id="7490020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7490023">func</span>&nbsp;<span class="op" id="7490028">(</span><span class="ident" id="7490029">dss</span>&nbsp;<span class="op" id="7490033">*</span><span class="ident" id="7490034">dualStackServer</span><span class="op" id="7490049">)</span>&nbsp;<span class="ident" id="7490051">buildup</span><span class="op" id="7490058">(</span><span class="ident" id="7490059">server</span>&nbsp;<span class="keyword" id="7490066">func</span><span class="op" id="7490070">(</span><span class="op" id="7490071">*</span><span class="ident" id="7490072">dualStackServer</span><span class="op" id="7490087">,</span>&nbsp;<span class="ident" id="7490089">Listener</span><span class="op" id="7490097">)</span><span class="op" id="7490098">)</span>&nbsp;<span class="builtintype" id="7490100">error</span>&nbsp;<span class="op" id="7490106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7490109">for</span>&nbsp;<span class="ident" id="7490113">i</span>&nbsp;<span class="op" id="7490115">:=</span>&nbsp;<span class="keyword" id="7490118">range</span>&nbsp;<span class="ident" id="7490124">dss</span><span class="op" id="7490127">.</span><span class="ident" id="7490128">lns</span>&nbsp;<span class="op" id="7490132">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7490136">go</span>&nbsp;<span class="ident" id="7490139">server</span><span class="op" id="7490145">(</span><span class="ident" id="7490146">dss</span><span class="op" id="7490149">,</span>&nbsp;<span class="ident" id="7490151">dss</span><span class="op" id="7490154">.</span><span class="ident" id="7490155">lns</span><span class="op" id="7490158">[</span><span class="ident" id="7490159">i</span><span class="op" id="7490160">]</span><span class="op" id="7490161">.</span><span class="ident" id="7490162">ln</span><span class="op" id="7490164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7490167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7490170">return</span>&nbsp;<span class="ident" id="7490177">nil</span><br>
<span class="lineno"></span><span class="op" id="7490181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7490184">func</span>&nbsp;<span class="op" id="7490189">(</span><span class="ident" id="7490190">dss</span>&nbsp;<span class="op" id="7490194">*</span><span class="ident" id="7490195">dualStackServer</span><span class="op" id="7490210">)</span>&nbsp;<span class="ident" id="7490212">putConn</span><span class="op" id="7490219">(</span><span class="ident" id="7490220">c</span>&nbsp;<span class="ident" id="7490222">Conn</span><span class="op" id="7490226">)</span>&nbsp;<span class="builtintype" id="7490228">error</span>&nbsp;<span class="op" id="7490234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490237">dss</span><span class="op" id="7490240">.</span><span class="ident" id="7490241">cmu</span><span class="op" id="7490244">.</span><span class="ident" id="7490245">Lock</span><span class="op" id="7490249">(</span><span class="op" id="7490250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490253">dss</span><span class="op" id="7490256">.</span><span class="ident" id="7490257">cs</span>&nbsp;<span class="op" id="7490260">=</span>&nbsp;<span class="builtinfunc" id="7490262">append</span><span class="op" id="7490268">(</span><span class="ident" id="7490269">dss</span><span class="op" id="7490272">.</span><span class="ident" id="7490273">cs</span><span class="op" id="7490275">,</span>&nbsp;<span class="ident" id="7490277">c</span><span class="op" id="7490278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490281">dss</span><span class="op" id="7490284">.</span><span class="ident" id="7490285">cmu</span><span class="op" id="7490288">.</span><span class="ident" id="7490289">Unlock</span><span class="op" id="7490295">(</span><span class="op" id="7490296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7490299">return</span>&nbsp;<span class="ident" id="7490306">nil</span><br>
<span class="lineno">35</span><span class="op" id="7490310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7490313">func</span>&nbsp;<span class="op" id="7490318">(</span><span class="ident" id="7490319">dss</span>&nbsp;<span class="op" id="7490323">*</span><span class="ident" id="7490324">dualStackServer</span><span class="op" id="7490339">)</span>&nbsp;<span class="ident" id="7490341">teardownNetwork</span><span class="op" id="7490356">(</span><span class="ident" id="7490357">net</span>&nbsp;<span class="builtintype" id="7490361">string</span><span class="op" id="7490367">)</span>&nbsp;<span class="builtintype" id="7490369">error</span>&nbsp;<span class="op" id="7490375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490378">dss</span><span class="op" id="7490381">.</span><span class="ident" id="7490382">lnmu</span><span class="op" id="7490386">.</span><span class="ident" id="7490387">Lock</span><span class="op" id="7490391">(</span><span class="op" id="7490392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7490395">for</span>&nbsp;<span class="ident" id="7490399">i</span>&nbsp;<span class="op" id="7490401">:=</span>&nbsp;<span class="keyword" id="7490404">range</span>&nbsp;<span class="ident" id="7490410">dss</span><span class="op" id="7490413">.</span><span class="ident" id="7490414">lns</span>&nbsp;<span class="op" id="7490418">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7490422">if</span>&nbsp;<span class="ident" id="7490425">net</span>&nbsp;<span class="op" id="7490429">==</span>&nbsp;<span class="ident" id="7490432">dss</span><span class="op" id="7490435">.</span><span class="ident" id="7490436">lns</span><span class="op" id="7490439">[</span><span class="ident" id="7490440">i</span><span class="op" id="7490441">]</span><span class="op" id="7490442">.</span><span class="ident" id="7490443">net</span>&nbsp;<span class="op" id="7490447">&amp;&amp;</span>&nbsp;<span class="ident" id="7490450">dss</span><span class="op" id="7490453">.</span><span class="ident" id="7490454">lns</span><span class="op" id="7490457">[</span><span class="ident" id="7490458">i</span><span class="op" id="7490459">]</span><span class="op" id="7490460">.</span><span class="ident" id="7490461">ln</span>&nbsp;<span class="op" id="7490464">!=</span>&nbsp;<span class="ident" id="7490467">nil</span>&nbsp;<span class="op" id="7490471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490476">dss</span><span class="op" id="7490479">.</span><span class="ident" id="7490480">lns</span><span class="op" id="7490483">[</span><span class="ident" id="7490484">i</span><span class="op" id="7490485">]</span><span class="op" id="7490486">.</span><span class="ident" id="7490487">ln</span><span class="op" id="7490489">.</span><span class="ident" id="7490490">Close</span><span class="op" id="7490495">(</span><span class="op" id="7490496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490501">dss</span><span class="op" id="7490504">.</span><span class="ident" id="7490505">lns</span><span class="op" id="7490508">[</span><span class="ident" id="7490509">i</span><span class="op" id="7490510">]</span><span class="op" id="7490511">.</span><span class="ident" id="7490512">ln</span>&nbsp;<span class="op" id="7490515">=</span>&nbsp;<span class="ident" id="7490517">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7490523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7490526">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490529">dss</span><span class="op" id="7490532">.</span><span class="ident" id="7490533">lnmu</span><span class="op" id="7490537">.</span><span class="ident" id="7490538">Unlock</span><span class="op" id="7490544">(</span><span class="op" id="7490545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7490548">return</span>&nbsp;<span class="ident" id="7490555">nil</span><br>
<span class="lineno"></span><span class="op" id="7490559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7490562">func</span>&nbsp;<span class="op" id="7490567">(</span><span class="ident" id="7490568">dss</span>&nbsp;<span class="op" id="7490572">*</span><span class="ident" id="7490573">dualStackServer</span><span class="op" id="7490588">)</span>&nbsp;<span class="ident" id="7490590">teardown</span><span class="op" id="7490598">(</span><span class="op" id="7490599">)</span>&nbsp;<span class="builtintype" id="7490601">error</span>&nbsp;<span class="op" id="7490607">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490610">dss</span><span class="op" id="7490613">.</span><span class="ident" id="7490614">lnmu</span><span class="op" id="7490618">.</span><span class="ident" id="7490619">Lock</span><span class="op" id="7490623">(</span><span class="op" id="7490624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7490627">for</span>&nbsp;<span class="ident" id="7490631">i</span>&nbsp;<span class="op" id="7490633">:=</span>&nbsp;<span class="keyword" id="7490636">range</span>&nbsp;<span class="ident" id="7490642">dss</span><span class="op" id="7490645">.</span><span class="ident" id="7490646">lns</span>&nbsp;<span class="op" id="7490650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7490654">if</span>&nbsp;<span class="ident" id="7490657">dss</span><span class="op" id="7490660">.</span><span class="ident" id="7490661">lns</span><span class="op" id="7490664">[</span><span class="ident" id="7490665">i</span><span class="op" id="7490666">]</span><span class="op" id="7490667">.</span><span class="ident" id="7490668">ln</span>&nbsp;<span class="op" id="7490671">!=</span>&nbsp;<span class="ident" id="7490674">nil</span>&nbsp;<span class="op" id="7490678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490683">dss</span><span class="op" id="7490686">.</span><span class="ident" id="7490687">lns</span><span class="op" id="7490690">[</span><span class="ident" id="7490691">i</span><span class="op" id="7490692">]</span><span class="op" id="7490693">.</span><span class="ident" id="7490694">ln</span><span class="op" id="7490696">.</span><span class="ident" id="7490697">Close</span><span class="op" id="7490702">(</span><span class="op" id="7490703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7490707">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7490710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490713">dss</span><span class="op" id="7490716">.</span><span class="ident" id="7490717">lnmu</span><span class="op" id="7490721">.</span><span class="ident" id="7490722">Unlock</span><span class="op" id="7490728">(</span><span class="op" id="7490729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490732">dss</span><span class="op" id="7490735">.</span><span class="ident" id="7490736">cmu</span><span class="op" id="7490739">.</span><span class="ident" id="7490740">Lock</span><span class="op" id="7490744">(</span><span class="op" id="7490745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7490748">for</span>&nbsp;<span class="ident" id="7490752">_</span><span class="op" id="7490753">,</span>&nbsp;<span class="ident" id="7490755">c</span>&nbsp;<span class="op" id="7490757">:=</span>&nbsp;<span class="keyword" id="7490760">range</span>&nbsp;<span class="ident" id="7490766">dss</span><span class="op" id="7490769">.</span><span class="ident" id="7490770">cs</span>&nbsp;<span class="op" id="7490773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490777">c</span><span class="op" id="7490778">.</span><span class="ident" id="7490779">Close</span><span class="op" id="7490784">(</span><span class="op" id="7490785">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7490788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490791">dss</span><span class="op" id="7490794">.</span><span class="ident" id="7490795">cmu</span><span class="op" id="7490798">.</span><span class="ident" id="7490799">Unlock</span><span class="op" id="7490805">(</span><span class="op" id="7490806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7490809">return</span>&nbsp;<span class="ident" id="7490816">nil</span><br>
<span class="lineno"></span><span class="op" id="7490820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="7490823">func</span>&nbsp;<span class="ident" id="7490828">newDualStackServer</span><span class="op" id="7490846">(</span><span class="ident" id="7490847">lns</span>&nbsp;<span class="op" id="7490851">[</span><span class="op" id="7490852">]</span><span class="ident" id="7490853">streamListener</span><span class="op" id="7490867">)</span>&nbsp;<span class="op" id="7490869">(</span><span class="op" id="7490870">*</span><span class="ident" id="7490871">dualStackServer</span><span class="op" id="7490886">,</span>&nbsp;<span class="builtintype" id="7490888">error</span><span class="op" id="7490893">)</span>&nbsp;<span class="op" id="7490895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490898">dss</span>&nbsp;<span class="op" id="7490902">:=</span>&nbsp;<span class="op" id="7490905">&amp;</span><span class="ident" id="7490906">dualStackServer</span><span class="op" id="7490921">{</span><span class="ident" id="7490922">lns</span><span class="op" id="7490925">:</span>&nbsp;<span class="ident" id="7490927">lns</span><span class="op" id="7490930">,</span>&nbsp;<span class="ident" id="7490932">port</span><span class="op" id="7490936">:</span>&nbsp;<span class="string" id="7490938">&#34;0&#34;</span><span class="op" id="7490941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7490944">for</span>&nbsp;<span class="ident" id="7490948">i</span>&nbsp;<span class="op" id="7490950">:=</span>&nbsp;<span class="keyword" id="7490953">range</span>&nbsp;<span class="ident" id="7490959">dss</span><span class="op" id="7490962">.</span><span class="ident" id="7490963">lns</span>&nbsp;<span class="op" id="7490967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7490971">ln</span><span class="op" id="7490973">,</span>&nbsp;<span class="ident" id="7490975">err</span>&nbsp;<span class="op" id="7490979">:=</span>&nbsp;<span class="ident" id="7490982">Listen</span><span class="op" id="7490988">(</span><span class="ident" id="7490989">dss</span><span class="op" id="7490992">.</span><span class="ident" id="7490993">lns</span><span class="op" id="7490996">[</span><span class="ident" id="7490997">i</span><span class="op" id="7490998">]</span><span class="op" id="7490999">.</span><span class="ident" id="7491000">net</span><span class="op" id="7491003">,</span>&nbsp;<span class="ident" id="7491005">dss</span><span class="op" id="7491008">.</span><span class="ident" id="7491009">lns</span><span class="op" id="7491012">[</span><span class="ident" id="7491013">i</span><span class="op" id="7491014">]</span><span class="op" id="7491015">.</span><span class="ident" id="7491016">addr</span><span class="op" id="7491020">+</span><span class="string" id="7491021">&#34;:&#34;</span><span class="op" id="7491024">+</span><span class="ident" id="7491025">dss</span><span class="op" id="7491028">.</span><span class="ident" id="7491029">port</span><span class="op" id="7491033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7491037">if</span>&nbsp;<span class="ident" id="7491040">err</span>&nbsp;<span class="op" id="7491044">!=</span>&nbsp;<span class="ident" id="7491047">nil</span>&nbsp;<span class="op" id="7491051">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7491056">dss</span><span class="op" id="7491059">.</span><span class="ident" id="7491060">teardown</span><span class="op" id="7491068">(</span><span class="op" id="7491069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7491074">return</span>&nbsp;<span class="ident" id="7491081">nil</span><span class="op" id="7491084">,</span>&nbsp;<span class="ident" id="7491086">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7491092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7491096">dss</span><span class="op" id="7491099">.</span><span class="ident" id="7491100">lns</span><span class="op" id="7491103">[</span><span class="ident" id="7491104">i</span><span class="op" id="7491105">]</span><span class="op" id="7491106">.</span><span class="ident" id="7491107">ln</span>&nbsp;<span class="op" id="7491110">=</span>&nbsp;<span class="ident" id="7491112">ln</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7491117">if</span>&nbsp;<span class="ident" id="7491120">dss</span><span class="op" id="7491123">.</span><span class="ident" id="7491124">port</span>&nbsp;<span class="op" id="7491129">==</span>&nbsp;<span class="string" id="7491132">&#34;0&#34;</span>&nbsp;<span class="op" id="7491136">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7491141">if</span>&nbsp;<span class="ident" id="7491144">_</span><span class="op" id="7491145">,</span>&nbsp;<span class="ident" id="7491147">dss</span><span class="op" id="7491150">.</span><span class="ident" id="7491151">port</span><span class="op" id="7491155">,</span>&nbsp;<span class="ident" id="7491157">err</span>&nbsp;<span class="op" id="7491161">=</span>&nbsp;<span class="ident" id="7491163">SplitHostPort</span><span class="op" id="7491176">(</span><span class="ident" id="7491177">ln</span><span class="op" id="7491179">.</span><span class="ident" id="7491180">Addr</span><span class="op" id="7491184">(</span><span class="op" id="7491185">)</span><span class="op" id="7491186">.</span><span class="ident" id="7491187">String</span><span class="op" id="7491193">(</span><span class="op" id="7491194">)</span><span class="op" id="7491195">)</span><span class="op" id="7491196">;</span>&nbsp;<span class="ident" id="7491198">err</span>&nbsp;<span class="op" id="7491202">!=</span>&nbsp;<span class="ident" id="7491205">nil</span>&nbsp;<span class="op" id="7491209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7491215">dss</span><span class="op" id="7491218">.</span><span class="ident" id="7491219">teardown</span><span class="op" id="7491227">(</span><span class="op" id="7491228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7491234">return</span>&nbsp;<span class="ident" id="7491241">nil</span><span class="op" id="7491244">,</span>&nbsp;<span class="ident" id="7491246">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7491253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7491257">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7491260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7491263">return</span>&nbsp;<span class="ident" id="7491270">dss</span><span class="op" id="7491273">,</span>&nbsp;<span class="ident" id="7491275">nil</span><br>
<span class="lineno"></span><span class="op" id="7491279">}</span>
</div>
</body>
</html>
