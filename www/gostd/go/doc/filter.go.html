<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5169408">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5169463">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5169517">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5169568">package</span>&nbsp;<span class="ident" id="5169576">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5169581">import</span>&nbsp;<span class="string" id="5169588">&#34;go/ast&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5169598">type</span>&nbsp;<span class="ident" id="5169603">Filter</span>&nbsp;<span class="keyword" id="5169610">func</span><span class="op" id="5169614">(</span><span class="builtintype" id="5169615">string</span><span class="op" id="5169621">)</span>&nbsp;<span class="builtintype" id="5169623">bool</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5169629">func</span>&nbsp;<span class="ident" id="5169634">matchFields</span><span class="op" id="5169645">(</span><span class="ident" id="5169646">fields</span>&nbsp;<span class="op" id="5169653">*</span><span class="ident" id="5169654">ast</span><span class="op" id="5169657">.</span><span class="ident" id="5169658">FieldList</span><span class="op" id="5169667">,</span>&nbsp;<span class="ident" id="5169669">f</span>&nbsp;<span class="ident" id="5169671">Filter</span><span class="op" id="5169677">)</span>&nbsp;<span class="builtintype" id="5169679">bool</span>&nbsp;<span class="op" id="5169684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5169687">if</span>&nbsp;<span class="ident" id="5169690">fields</span>&nbsp;<span class="op" id="5169697">!=</span>&nbsp;<span class="ident" id="5169700">nil</span>&nbsp;<span class="op" id="5169704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5169708">for</span>&nbsp;<span class="ident" id="5169712">_</span><span class="op" id="5169713">,</span>&nbsp;<span class="ident" id="5169715">field</span>&nbsp;<span class="op" id="5169721">:=</span>&nbsp;<span class="keyword" id="5169724">range</span>&nbsp;<span class="ident" id="5169730">fields</span><span class="op" id="5169736">.</span><span class="ident" id="5169737">List</span>&nbsp;<span class="op" id="5169742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5169747">for</span>&nbsp;<span class="ident" id="5169751">_</span><span class="op" id="5169752">,</span>&nbsp;<span class="ident" id="5169754">name</span>&nbsp;<span class="op" id="5169759">:=</span>&nbsp;<span class="keyword" id="5169762">range</span>&nbsp;<span class="ident" id="5169768">field</span><span class="op" id="5169773">.</span><span class="ident" id="5169774">Names</span>&nbsp;<span class="op" id="5169780">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5169786">if</span>&nbsp;<span class="ident" id="5169789">f</span><span class="op" id="5169790">(</span><span class="ident" id="5169791">name</span><span class="op" id="5169795">.</span><span class="ident" id="5169796">Name</span><span class="op" id="5169800">)</span>&nbsp;<span class="op" id="5169802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5169809">return</span>&nbsp;<span class="builtintype" id="5169816">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5169825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5169830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5169834">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5169837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5169840">return</span>&nbsp;<span class="builtintype" id="5169847">false</span><br>
<span class="lineno"></span><span class="op" id="5169853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5169856">func</span>&nbsp;<span class="ident" id="5169861">matchDecl</span><span class="op" id="5169870">(</span><span class="ident" id="5169871">d</span>&nbsp;<span class="op" id="5169873">*</span><span class="ident" id="5169874">ast</span><span class="op" id="5169877">.</span><span class="ident" id="5169878">GenDecl</span><span class="op" id="5169885">,</span>&nbsp;<span class="ident" id="5169887">f</span>&nbsp;<span class="ident" id="5169889">Filter</span><span class="op" id="5169895">)</span>&nbsp;<span class="builtintype" id="5169897">bool</span>&nbsp;<span class="op" id="5169902">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5169905">for</span>&nbsp;<span class="ident" id="5169909">_</span><span class="op" id="5169910">,</span>&nbsp;<span class="ident" id="5169912">d</span>&nbsp;<span class="op" id="5169914">:=</span>&nbsp;<span class="keyword" id="5169917">range</span>&nbsp;<span class="ident" id="5169923">d</span><span class="op" id="5169924">.</span><span class="ident" id="5169925">Specs</span>&nbsp;<span class="op" id="5169931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5169935">switch</span>&nbsp;<span class="ident" id="5169942">v</span>&nbsp;<span class="op" id="5169944">:=</span>&nbsp;<span class="ident" id="5169947">d</span><span class="op" id="5169948">.</span><span class="op" id="5169949">(</span><span class="keyword" id="5169950">type</span><span class="op" id="5169954">)</span>&nbsp;<span class="op" id="5169956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5169960">case</span>&nbsp;<span class="op" id="5169965">*</span><span class="ident" id="5169966">ast</span><span class="op" id="5169969">.</span><span class="ident" id="5169970">ValueSpec</span><span class="op" id="5169979">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5169984">for</span>&nbsp;<span class="ident" id="5169988">_</span><span class="op" id="5169989">,</span>&nbsp;<span class="ident" id="5169991">name</span>&nbsp;<span class="op" id="5169996">:=</span>&nbsp;<span class="keyword" id="5169999">range</span>&nbsp;<span class="ident" id="5170005">v</span><span class="op" id="5170006">.</span><span class="ident" id="5170007">Names</span>&nbsp;<span class="op" id="5170013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170019">if</span>&nbsp;<span class="ident" id="5170022">f</span><span class="op" id="5170023">(</span><span class="ident" id="5170024">name</span><span class="op" id="5170028">.</span><span class="ident" id="5170029">Name</span><span class="op" id="5170033">)</span>&nbsp;<span class="op" id="5170035">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170042">return</span>&nbsp;<span class="builtintype" id="5170049">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170067">case</span>&nbsp;<span class="op" id="5170072">*</span><span class="ident" id="5170073">ast</span><span class="op" id="5170076">.</span><span class="ident" id="5170077">TypeSpec</span><span class="op" id="5170085">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170090">if</span>&nbsp;<span class="ident" id="5170093">f</span><span class="op" id="5170094">(</span><span class="ident" id="5170095">v</span><span class="op" id="5170096">.</span><span class="ident" id="5170097">Name</span><span class="op" id="5170101">.</span><span class="ident" id="5170102">Name</span><span class="op" id="5170106">)</span>&nbsp;<span class="op" id="5170108">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170114">return</span>&nbsp;<span class="builtintype" id="5170121">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170134">switch</span>&nbsp;<span class="ident" id="5170141">t</span>&nbsp;<span class="op" id="5170143">:=</span>&nbsp;<span class="ident" id="5170146">v</span><span class="op" id="5170147">.</span><span class="ident" id="5170148">Type</span><span class="op" id="5170152">.</span><span class="op" id="5170153">(</span><span class="keyword" id="5170154">type</span><span class="op" id="5170158">)</span>&nbsp;<span class="op" id="5170160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170165">case</span>&nbsp;<span class="op" id="5170170">*</span><span class="ident" id="5170171">ast</span><span class="op" id="5170174">.</span><span class="ident" id="5170175">StructType</span><span class="op" id="5170185">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170191">if</span>&nbsp;<span class="ident" id="5170194">matchFields</span><span class="op" id="5170205">(</span><span class="ident" id="5170206">t</span><span class="op" id="5170207">.</span><span class="ident" id="5170208">Fields</span><span class="op" id="5170214">,</span>&nbsp;<span class="ident" id="5170216">f</span><span class="op" id="5170217">)</span>&nbsp;<span class="op" id="5170219">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170226">return</span>&nbsp;<span class="builtintype" id="5170233">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170247">case</span>&nbsp;<span class="op" id="5170252">*</span><span class="ident" id="5170253">ast</span><span class="op" id="5170256">.</span><span class="ident" id="5170257">InterfaceType</span><span class="op" id="5170270">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170276">if</span>&nbsp;<span class="ident" id="5170279">matchFields</span><span class="op" id="5170290">(</span><span class="ident" id="5170291">t</span><span class="op" id="5170292">.</span><span class="ident" id="5170293">Methods</span><span class="op" id="5170300">,</span>&nbsp;<span class="ident" id="5170302">f</span><span class="op" id="5170303">)</span>&nbsp;<span class="op" id="5170305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170312">return</span>&nbsp;<span class="builtintype" id="5170319">true</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170343">return</span>&nbsp;<span class="builtintype" id="5170350">false</span><br>
<span class="lineno">50</span><span class="op" id="5170356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5170359">func</span>&nbsp;<span class="ident" id="5170364">filterValues</span><span class="op" id="5170376">(</span><span class="ident" id="5170377">a</span>&nbsp;<span class="op" id="5170379">[</span><span class="op" id="5170380">]</span><span class="op" id="5170381">*</span><span class="ident" id="5170382">Value</span><span class="op" id="5170387">,</span>&nbsp;<span class="ident" id="5170389">f</span>&nbsp;<span class="ident" id="5170391">Filter</span><span class="op" id="5170397">)</span>&nbsp;<span class="op" id="5170399">[</span><span class="op" id="5170400">]</span><span class="op" id="5170401">*</span><span class="ident" id="5170402">Value</span>&nbsp;<span class="op" id="5170408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5170411">w</span>&nbsp;<span class="op" id="5170413">:=</span>&nbsp;<span class="num" id="5170416">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170419">for</span>&nbsp;<span class="ident" id="5170423">_</span><span class="op" id="5170424">,</span>&nbsp;<span class="ident" id="5170426">vd</span>&nbsp;<span class="op" id="5170429">:=</span>&nbsp;<span class="keyword" id="5170432">range</span>&nbsp;<span class="ident" id="5170438">a</span>&nbsp;<span class="op" id="5170440">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170444">if</span>&nbsp;<span class="ident" id="5170447">matchDecl</span><span class="op" id="5170456">(</span><span class="ident" id="5170457">vd</span><span class="op" id="5170459">.</span><span class="ident" id="5170460">Decl</span><span class="op" id="5170464">,</span>&nbsp;<span class="ident" id="5170466">f</span><span class="op" id="5170467">)</span>&nbsp;<span class="op" id="5170469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5170474">a</span><span class="op" id="5170475">[</span><span class="ident" id="5170476">w</span><span class="op" id="5170477">]</span>&nbsp;<span class="op" id="5170479">=</span>&nbsp;<span class="ident" id="5170481">vd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5170487">w</span><span class="op" id="5170488">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170496">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170499">return</span>&nbsp;<span class="ident" id="5170506">a</span><span class="op" id="5170507">[</span><span class="num" id="5170508">0</span><span class="op" id="5170509">:</span><span class="ident" id="5170510">w</span><span class="op" id="5170511">]</span><br>
<span class="lineno"></span><span class="op" id="5170513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5170516">func</span>&nbsp;<span class="ident" id="5170521">filterFuncs</span><span class="op" id="5170532">(</span><span class="ident" id="5170533">a</span>&nbsp;<span class="op" id="5170535">[</span><span class="op" id="5170536">]</span><span class="op" id="5170537">*</span><span class="ident" id="5170538">Func</span><span class="op" id="5170542">,</span>&nbsp;<span class="ident" id="5170544">f</span>&nbsp;<span class="ident" id="5170546">Filter</span><span class="op" id="5170552">)</span>&nbsp;<span class="op" id="5170554">[</span><span class="op" id="5170555">]</span><span class="op" id="5170556">*</span><span class="ident" id="5170557">Func</span>&nbsp;<span class="op" id="5170562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5170565">w</span>&nbsp;<span class="op" id="5170567">:=</span>&nbsp;<span class="num" id="5170570">0</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170573">for</span>&nbsp;<span class="ident" id="5170577">_</span><span class="op" id="5170578">,</span>&nbsp;<span class="ident" id="5170580">fd</span>&nbsp;<span class="op" id="5170583">:=</span>&nbsp;<span class="keyword" id="5170586">range</span>&nbsp;<span class="ident" id="5170592">a</span>&nbsp;<span class="op" id="5170594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170598">if</span>&nbsp;<span class="ident" id="5170601">f</span><span class="op" id="5170602">(</span><span class="ident" id="5170603">fd</span><span class="op" id="5170605">.</span><span class="ident" id="5170606">Name</span><span class="op" id="5170610">)</span>&nbsp;<span class="op" id="5170612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5170617">a</span><span class="op" id="5170618">[</span><span class="ident" id="5170619">w</span><span class="op" id="5170620">]</span>&nbsp;<span class="op" id="5170622">=</span>&nbsp;<span class="ident" id="5170624">fd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5170630">w</span><span class="op" id="5170631">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170636">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170642">return</span>&nbsp;<span class="ident" id="5170649">a</span><span class="op" id="5170650">[</span><span class="num" id="5170651">0</span><span class="op" id="5170652">:</span><span class="ident" id="5170653">w</span><span class="op" id="5170654">]</span><br>
<span class="lineno"></span><span class="op" id="5170656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5170659">func</span>&nbsp;<span class="ident" id="5170664">filterTypes</span><span class="op" id="5170675">(</span><span class="ident" id="5170676">a</span>&nbsp;<span class="op" id="5170678">[</span><span class="op" id="5170679">]</span><span class="op" id="5170680">*</span><span class="ident" id="5170681">Type</span><span class="op" id="5170685">,</span>&nbsp;<span class="ident" id="5170687">f</span>&nbsp;<span class="ident" id="5170689">Filter</span><span class="op" id="5170695">)</span>&nbsp;<span class="op" id="5170697">[</span><span class="op" id="5170698">]</span><span class="op" id="5170699">*</span><span class="ident" id="5170700">Type</span>&nbsp;<span class="op" id="5170705">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5170708">w</span>&nbsp;<span class="op" id="5170710">:=</span>&nbsp;<span class="num" id="5170713">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170716">for</span>&nbsp;<span class="ident" id="5170720">_</span><span class="op" id="5170721">,</span>&nbsp;<span class="ident" id="5170723">td</span>&nbsp;<span class="op" id="5170726">:=</span>&nbsp;<span class="keyword" id="5170729">range</span>&nbsp;<span class="ident" id="5170735">a</span>&nbsp;<span class="op" id="5170737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5170741">n</span>&nbsp;<span class="op" id="5170743">:=</span>&nbsp;<span class="num" id="5170746">0</span>&nbsp;<span class="comment" id="5170748">//&nbsp;number&nbsp;of&nbsp;matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5170771">if</span>&nbsp;<span class="ident" id="5170774">matchDecl</span><span class="op" id="5170783">(</span><span class="ident" id="5170784">td</span><span class="op" id="5170786">.</span><span class="ident" id="5170787">Decl</span><span class="op" id="5170791">,</span>&nbsp;<span class="ident" id="5170793">f</span><span class="op" id="5170794">)</span>&nbsp;<span class="op" id="5170796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5170801">n</span>&nbsp;<span class="op" id="5170803">=</span>&nbsp;<span class="num" id="5170805">1</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5170809">}</span>&nbsp;<span class="keyword" id="5170811">else</span>&nbsp;<span class="op" id="5170816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5170821">//&nbsp;type&nbsp;name&nbsp;doesn&#39;t&nbsp;match,&nbsp;but&nbsp;we&nbsp;may&nbsp;have&nbsp;matching&nbsp;consts,&nbsp;vars,&nbsp;factories&nbsp;or&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5170912">td</span><span class="op" id="5170914">.</span><span class="ident" id="5170915">Consts</span>&nbsp;<span class="op" id="5170922">=</span>&nbsp;<span class="ident" id="5170924">filterValues</span><span class="op" id="5170936">(</span><span class="ident" id="5170937">td</span><span class="op" id="5170939">.</span><span class="ident" id="5170940">Consts</span><span class="op" id="5170946">,</span>&nbsp;<span class="ident" id="5170948">f</span><span class="op" id="5170949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5170954">td</span><span class="op" id="5170956">.</span><span class="ident" id="5170957">Vars</span>&nbsp;<span class="op" id="5170962">=</span>&nbsp;<span class="ident" id="5170964">filterValues</span><span class="op" id="5170976">(</span><span class="ident" id="5170977">td</span><span class="op" id="5170979">.</span><span class="ident" id="5170980">Vars</span><span class="op" id="5170984">,</span>&nbsp;<span class="ident" id="5170986">f</span><span class="op" id="5170987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5170992">td</span><span class="op" id="5170994">.</span><span class="ident" id="5170995">Funcs</span>&nbsp;<span class="op" id="5171001">=</span>&nbsp;<span class="ident" id="5171003">filterFuncs</span><span class="op" id="5171014">(</span><span class="ident" id="5171015">td</span><span class="op" id="5171017">.</span><span class="ident" id="5171018">Funcs</span><span class="op" id="5171023">,</span>&nbsp;<span class="ident" id="5171025">f</span><span class="op" id="5171026">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5171031">td</span><span class="op" id="5171033">.</span><span class="ident" id="5171034">Methods</span>&nbsp;<span class="op" id="5171042">=</span>&nbsp;<span class="ident" id="5171044">filterFuncs</span><span class="op" id="5171055">(</span><span class="ident" id="5171056">td</span><span class="op" id="5171058">.</span><span class="ident" id="5171059">Methods</span><span class="op" id="5171066">,</span>&nbsp;<span class="ident" id="5171068">f</span><span class="op" id="5171069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5171074">n</span>&nbsp;<span class="op" id="5171076">+=</span>&nbsp;<span class="builtinfunc" id="5171079">len</span><span class="op" id="5171082">(</span><span class="ident" id="5171083">td</span><span class="op" id="5171085">.</span><span class="ident" id="5171086">Consts</span><span class="op" id="5171092">)</span>&nbsp;<span class="op" id="5171094">+</span>&nbsp;<span class="builtinfunc" id="5171096">len</span><span class="op" id="5171099">(</span><span class="ident" id="5171100">td</span><span class="op" id="5171102">.</span><span class="ident" id="5171103">Vars</span><span class="op" id="5171107">)</span>&nbsp;<span class="op" id="5171109">+</span>&nbsp;<span class="builtinfunc" id="5171111">len</span><span class="op" id="5171114">(</span><span class="ident" id="5171115">td</span><span class="op" id="5171117">.</span><span class="ident" id="5171118">Funcs</span><span class="op" id="5171123">)</span>&nbsp;<span class="op" id="5171125">+</span>&nbsp;<span class="builtinfunc" id="5171127">len</span><span class="op" id="5171130">(</span><span class="ident" id="5171131">td</span><span class="op" id="5171133">.</span><span class="ident" id="5171134">Methods</span><span class="op" id="5171141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5171145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5171149">if</span>&nbsp;<span class="ident" id="5171152">n</span>&nbsp;<span class="op" id="5171154">&gt;</span>&nbsp;<span class="num" id="5171156">0</span>&nbsp;<span class="op" id="5171158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5171163">a</span><span class="op" id="5171164">[</span><span class="ident" id="5171165">w</span><span class="op" id="5171166">]</span>&nbsp;<span class="op" id="5171168">=</span>&nbsp;<span class="ident" id="5171170">td</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5171176">w</span><span class="op" id="5171177">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5171182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5171185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5171188">return</span>&nbsp;<span class="ident" id="5171195">a</span><span class="op" id="5171196">[</span><span class="num" id="5171197">0</span><span class="op" id="5171198">:</span><span class="ident" id="5171199">w</span><span class="op" id="5171200">]</span><br>
<span class="lineno"></span><span class="op" id="5171202">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="comment" id="5171205">//&nbsp;Filter&nbsp;eliminates&nbsp;documentation&nbsp;for&nbsp;names&nbsp;that&nbsp;don&#39;t&nbsp;pass&nbsp;through&nbsp;the&nbsp;filter&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="5171288">//&nbsp;TODO(gri):&nbsp;Recognize&nbsp;&#34;Type.Method&#34;&nbsp;as&nbsp;a&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="5171337">//</span><br>
<span class="lineno"></span><span class="keyword" id="5171340">func</span>&nbsp;<span class="op" id="5171345">(</span><span class="ident" id="5171346">p</span>&nbsp;<span class="op" id="5171348">*</span><span class="ident" id="5171349">Package</span><span class="op" id="5171356">)</span>&nbsp;<span class="ident" id="5171358">Filter</span><span class="op" id="5171364">(</span><span class="ident" id="5171365">f</span>&nbsp;<span class="ident" id="5171367">Filter</span><span class="op" id="5171373">)</span>&nbsp;<span class="op" id="5171375">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5171378">p</span><span class="op" id="5171379">.</span><span class="ident" id="5171380">Consts</span>&nbsp;<span class="op" id="5171387">=</span>&nbsp;<span class="ident" id="5171389">filterValues</span><span class="op" id="5171401">(</span><span class="ident" id="5171402">p</span><span class="op" id="5171403">.</span><span class="ident" id="5171404">Consts</span><span class="op" id="5171410">,</span>&nbsp;<span class="ident" id="5171412">f</span><span class="op" id="5171413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5171416">p</span><span class="op" id="5171417">.</span><span class="ident" id="5171418">Vars</span>&nbsp;<span class="op" id="5171423">=</span>&nbsp;<span class="ident" id="5171425">filterValues</span><span class="op" id="5171437">(</span><span class="ident" id="5171438">p</span><span class="op" id="5171439">.</span><span class="ident" id="5171440">Vars</span><span class="op" id="5171444">,</span>&nbsp;<span class="ident" id="5171446">f</span><span class="op" id="5171447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5171450">p</span><span class="op" id="5171451">.</span><span class="ident" id="5171452">Types</span>&nbsp;<span class="op" id="5171458">=</span>&nbsp;<span class="ident" id="5171460">filterTypes</span><span class="op" id="5171471">(</span><span class="ident" id="5171472">p</span><span class="op" id="5171473">.</span><span class="ident" id="5171474">Types</span><span class="op" id="5171479">,</span>&nbsp;<span class="ident" id="5171481">f</span><span class="op" id="5171482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5171485">p</span><span class="op" id="5171486">.</span><span class="ident" id="5171487">Funcs</span>&nbsp;<span class="op" id="5171493">=</span>&nbsp;<span class="ident" id="5171495">filterFuncs</span><span class="op" id="5171506">(</span><span class="ident" id="5171507">p</span><span class="op" id="5171508">.</span><span class="ident" id="5171509">Funcs</span><span class="op" id="5171514">,</span>&nbsp;<span class="ident" id="5171516">f</span><span class="op" id="5171517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5171520">p</span><span class="op" id="5171521">.</span><span class="ident" id="5171522">Doc</span>&nbsp;<span class="op" id="5171526">=</span>&nbsp;<span class="string" id="5171528">&#34;&#34;</span>&nbsp;<span class="comment" id="5171531">//&nbsp;don&#39;t&nbsp;show&nbsp;top-level&nbsp;package&nbsp;doc</span><br>
<span class="lineno">105</span><span class="op" id="5171567">}</span>
</div>
</body>
</html>
