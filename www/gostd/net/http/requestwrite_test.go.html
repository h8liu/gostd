<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html" class="current">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7524968">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7525024">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7525078">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7525129">package</span>&nbsp;<span class="ident" id="7525137">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7525143">import</span>&nbsp;<span class="op" id="7525150">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525153">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525162">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525172">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525179">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525185">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525198">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525209">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525220">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7525230">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7525233">type</span>&nbsp;<span class="ident" id="7525238">reqWriteTest</span>&nbsp;<span class="keyword" id="7525251">struct</span>&nbsp;<span class="op" id="7525258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525261">Req</span>&nbsp;&nbsp;<span class="ident" id="7525266"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525275">Body</span>&nbsp;<span class="keyword" id="7525280">interface</span><span class="op" id="7525289">{</span><span class="op" id="7525290">}</span>&nbsp;<span class="comment" id="7525292">//&nbsp;optional&nbsp;[]byte&nbsp;or&nbsp;func()&nbsp;io.ReadCloser&nbsp;to&nbsp;populate&nbsp;Req.Body</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7525358">//&nbsp;Any&nbsp;of&nbsp;these&nbsp;three&nbsp;may&nbsp;be&nbsp;empty&nbsp;to&nbsp;skip&nbsp;that&nbsp;test.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525413">WantWrite</span>&nbsp;<span class="builtintype" id="7525423">string</span>&nbsp;<span class="comment" id="7525430">//&nbsp;Request.Write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525448">WantProxy</span>&nbsp;<span class="builtintype" id="7525458">string</span>&nbsp;<span class="comment" id="7525465">//&nbsp;Request.WriteProxy</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525489">WantError</span>&nbsp;<span class="builtintype" id="7525499">error</span>&nbsp;<span class="comment" id="7525505">//&nbsp;wanted&nbsp;error&nbsp;from&nbsp;Request.Write</span><br>
<span class="lineno"></span><span class="op" id="7525540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7525543">var</span>&nbsp;<span class="ident" id="7525547">reqWriteTests</span>&nbsp;<span class="op" id="7525561">=</span>&nbsp;<span class="op" id="7525563">[</span><span class="op" id="7525564">]</span><span class="ident" id="7525565"><a href="/gostd/net/http/requestwrite_test.go.html#7525238">reqWriteTest</a></span><span class="op" id="7525577">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7525580">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;no&nbsp;body;&nbsp;no&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7525632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525636"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7525639">:</span>&nbsp;<span class="ident" id="7525641"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7525648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525653"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7525659">:</span>&nbsp;<span class="string" id="7525661">&#34;GET&#34;</span><span class="op" id="7525666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525671"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7525674">:</span>&nbsp;<span class="op" id="7525676">&amp;</span><span class="ident" id="7525677"><a href="/gostd/net/http/requestwrite_test.go.html#7525198">url</a></span><span class="op" id="7525680">.</span><span class="ident" id="7525681"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="7525684">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525690"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="7525696">:</span>&nbsp;<span class="string" id="7525698">&#34;http&#34;</span><span class="op" id="7525704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525710"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="7525714">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7525718">&#34;www.techcrunch.com&#34;</span><span class="op" id="7525738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525744"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="7525748">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7525752">&#34;/&#34;</span><span class="op" id="7525755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7525760">}</span><span class="op" id="7525761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525766"><a href="/gostd/net/http/request.go.html#4136744">Proto</a></span><span class="op" id="7525771">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525778">&#34;HTTP/1.1&#34;</span><span class="op" id="7525788">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525793"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7525803">:</span>&nbsp;<span class="num" id="7525805">1</span><span class="op" id="7525806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525811"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7525821">:</span>&nbsp;<span class="num" id="7525823">1</span><span class="op" id="7525824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7525829"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="7525835">:</span>&nbsp;<span class="ident" id="7525837"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="7525843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525849">&#34;Accept&#34;</span><span class="op" id="7525857">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7525869">{</span><span class="string" id="7525870">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="7525935">}</span><span class="op" id="7525936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7525942">&#34;Accept-Charset&#34;</span><span class="op" id="7525958">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7525962">{</span><span class="string" id="7525963">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="7525995">}</span><span class="op" id="7525996">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526002">&#34;Accept-Encoding&#34;</span><span class="op" id="7526019">:</span>&nbsp;&nbsp;<span class="op" id="7526022">{</span><span class="string" id="7526023">&#34;gzip,deflate&#34;</span><span class="op" id="7526037">}</span><span class="op" id="7526038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526044">&#34;Accept-Language&#34;</span><span class="op" id="7526061">:</span>&nbsp;&nbsp;<span class="op" id="7526064">{</span><span class="string" id="7526065">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="7526081">}</span><span class="op" id="7526082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526088">&#34;Keep-Alive&#34;</span><span class="op" id="7526100">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7526108">{</span><span class="string" id="7526109">&#34;300&#34;</span><span class="op" id="7526114">}</span><span class="op" id="7526115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526121">&#34;Proxy-Connection&#34;</span><span class="op" id="7526139">:</span>&nbsp;<span class="op" id="7526141">{</span><span class="string" id="7526142">&#34;keep-alive&#34;</span><span class="op" id="7526154">}</span><span class="op" id="7526155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526161">&#34;User-Agent&#34;</span><span class="op" id="7526173">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7526181">{</span><span class="string" id="7526182">&#34;Fake&#34;</span><span class="op" id="7526188">}</span><span class="op" id="7526189">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7526194">}</span><span class="op" id="7526195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7526200"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span><span class="op" id="7526204">:</span>&nbsp;&nbsp;<span class="builtintype" id="7526207">nil</span><span class="op" id="7526210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7526215"><a href="/gostd/net/http/request.go.html#4138776">Close</a></span><span class="op" id="7526220">:</span>&nbsp;<span class="builtintype" id="7526222">false</span><span class="op" id="7526227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7526232"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="7526236">:</span>&nbsp;&nbsp;<span class="string" id="7526239">&#34;www.techcrunch.com&#34;</span><span class="op" id="7526259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7526264"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span><span class="op" id="7526268">:</span>&nbsp;&nbsp;<span class="keyword" id="7526271">map</span><span class="op" id="7526274">[</span><span class="builtintype" id="7526275">string</span><span class="op" id="7526281">]</span><span class="op" id="7526282">[</span><span class="op" id="7526283">]</span><span class="builtintype" id="7526284">string</span><span class="op" id="7526290">{</span><span class="op" id="7526291">}</span><span class="op" id="7526292">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7526296">}</span><span class="op" id="7526297">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7526302"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7526311">:</span>&nbsp;<span class="string" id="7526313">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7526334">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526339">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="7526370">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526375">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="7526398">+</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526403">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="7526481">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526486">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="7526539">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526544">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="7526580">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526585">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="7526623">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526628">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="7526650">+</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526655">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span><span class="op" id="7526693">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7526698"><a href="/gostd/net/http/requestwrite_test.go.html#7525448">WantProxy</a></span><span class="op" id="7526707">:</span>&nbsp;<span class="string" id="7526709">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7526755">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526760">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="7526791">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526796">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="7526819">+</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526824">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="7526902">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526907">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="7526960">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7526965">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="7527001">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527006">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="7527044">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527049">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="7527071">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527076">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span><span class="op" id="7527114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7527117">}</span><span class="op" id="7527118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7527121">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7527173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527177"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7527180">:</span>&nbsp;<span class="ident" id="7527182"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7527189">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527194"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7527200">:</span>&nbsp;<span class="string" id="7527202">&#34;GET&#34;</span><span class="op" id="7527207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527212"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7527215">:</span>&nbsp;<span class="op" id="7527217">&amp;</span><span class="ident" id="7527218"><a href="/gostd/net/http/requestwrite_test.go.html#7525198">url</a></span><span class="op" id="7527221">.</span><span class="ident" id="7527222"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="7527225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527231"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="7527237">:</span>&nbsp;<span class="string" id="7527239">&#34;http&#34;</span><span class="op" id="7527245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527251"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="7527255">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7527259">&#34;www.google.com&#34;</span><span class="op" id="7527275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527281"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="7527285">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7527289">&#34;/search&#34;</span><span class="op" id="7527298">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7527303">}</span><span class="op" id="7527304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527309"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7527319">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7527327">1</span><span class="op" id="7527328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527333"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7527343">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7527351">1</span><span class="op" id="7527352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527357"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="7527363">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527375"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="7527381">{</span><span class="op" id="7527382">}</span><span class="op" id="7527383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527388"><a href="/gostd/net/http/request.go.html#4138599">TransferEncoding</a></span><span class="op" id="7527404">:</span>&nbsp;<span class="op" id="7527406">[</span><span class="op" id="7527407">]</span><span class="builtintype" id="7527408">string</span><span class="op" id="7527414">{</span><span class="string" id="7527415">&#34;chunked&#34;</span><span class="op" id="7527424">}</span><span class="op" id="7527425">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7527429">}</span><span class="op" id="7527430">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527435"><a href="/gostd/net/http/requestwrite_test.go.html#7525275">Body</a></span><span class="op" id="7527439">:</span>&nbsp;<span class="op" id="7527441">[</span><span class="op" id="7527442">]</span><span class="builtintype" id="7527443">byte</span><span class="op" id="7527447">(</span><span class="string" id="7527448">&#34;abcdef&#34;</span><span class="op" id="7527456">)</span><span class="op" id="7527457">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527462"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7527471">:</span>&nbsp;<span class="string" id="7527473">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7527500">+</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527505">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7527532">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527537">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7527575">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527580">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7527617">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527622"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7527627">(</span><span class="string" id="7527628">&#34;abcdef&#34;</span><span class="op" id="7527636">)</span>&nbsp;<span class="op" id="7527638">+</span>&nbsp;<span class="ident" id="7527640"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7527645">(</span><span class="string" id="7527646">&#34;&#34;</span><span class="op" id="7527648">)</span><span class="op" id="7527649">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527654"><a href="/gostd/net/http/requestwrite_test.go.html#7525448">WantProxy</a></span><span class="op" id="7527663">:</span>&nbsp;<span class="string" id="7527665">&#34;GET&nbsp;http://www.google.com/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7527713">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527718">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7527745">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527750">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7527788">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7527793">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7527830">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527835"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7527840">(</span><span class="string" id="7527841">&#34;abcdef&#34;</span><span class="op" id="7527849">)</span>&nbsp;<span class="op" id="7527851">+</span>&nbsp;<span class="ident" id="7527853"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7527858">(</span><span class="string" id="7527859">&#34;&#34;</span><span class="op" id="7527861">)</span><span class="op" id="7527862">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7527865">}</span><span class="op" id="7527866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7527869">//&nbsp;HTTP/1.1&nbsp;POST&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7527926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527930"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7527933">:</span>&nbsp;<span class="ident" id="7527935"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7527942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527947"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7527953">:</span>&nbsp;<span class="string" id="7527955">&#34;POST&#34;</span><span class="op" id="7527961">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527966"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7527969">:</span>&nbsp;<span class="op" id="7527971">&amp;</span><span class="ident" id="7527972"><a href="/gostd/net/http/requestwrite_test.go.html#7525198">url</a></span><span class="op" id="7527975">.</span><span class="ident" id="7527976"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="7527979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7527985"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="7527991">:</span>&nbsp;<span class="string" id="7527993">&#34;http&#34;</span><span class="op" id="7527999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528005"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="7528009">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7528013">&#34;www.google.com&#34;</span><span class="op" id="7528029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528035"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="7528039">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7528043">&#34;/search&#34;</span><span class="op" id="7528052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7528057">}</span><span class="op" id="7528058">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528063"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7528073">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528081">1</span><span class="op" id="7528082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528087"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7528097">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528105">1</span><span class="op" id="7528106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528111"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="7528117">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528129"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="7528135">{</span><span class="op" id="7528136">}</span><span class="op" id="7528137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528142"><a href="/gostd/net/http/request.go.html#4138776">Close</a></span><span class="op" id="7528147">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7528160">true</span><span class="op" id="7528164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528169"><a href="/gostd/net/http/request.go.html#4138599">TransferEncoding</a></span><span class="op" id="7528185">:</span>&nbsp;<span class="op" id="7528187">[</span><span class="op" id="7528188">]</span><span class="builtintype" id="7528189">string</span><span class="op" id="7528195">{</span><span class="string" id="7528196">&#34;chunked&#34;</span><span class="op" id="7528205">}</span><span class="op" id="7528206">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7528210">}</span><span class="op" id="7528211">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528216"><a href="/gostd/net/http/requestwrite_test.go.html#7525275">Body</a></span><span class="op" id="7528220">:</span>&nbsp;<span class="op" id="7528222">[</span><span class="op" id="7528223">]</span><span class="builtintype" id="7528224">byte</span><span class="op" id="7528228">(</span><span class="string" id="7528229">&#34;abcdef&#34;</span><span class="op" id="7528237">)</span><span class="op" id="7528238">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528243"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7528252">:</span>&nbsp;<span class="string" id="7528254">&#34;POST&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7528282">+</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528287">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7528314">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528319">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7528357">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528362">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7528386">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528391">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7528428">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528433"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7528438">(</span><span class="string" id="7528439">&#34;abcdef&#34;</span><span class="op" id="7528447">)</span>&nbsp;<span class="op" id="7528449">+</span>&nbsp;<span class="ident" id="7528451"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7528456">(</span><span class="string" id="7528457">&#34;&#34;</span><span class="op" id="7528459">)</span><span class="op" id="7528460">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528465"><a href="/gostd/net/http/requestwrite_test.go.html#7525448">WantProxy</a></span><span class="op" id="7528474">:</span>&nbsp;<span class="string" id="7528476">&#34;POST&nbsp;http://www.google.com/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7528525">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528530">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7528557">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528562">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7528600">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528605">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7528629">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7528634">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7528671">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528676"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7528681">(</span><span class="string" id="7528682">&#34;abcdef&#34;</span><span class="op" id="7528690">)</span>&nbsp;<span class="op" id="7528692">+</span>&nbsp;<span class="ident" id="7528694"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7528699">(</span><span class="string" id="7528700">&#34;&#34;</span><span class="op" id="7528702">)</span><span class="op" id="7528703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7528706">}</span><span class="op" id="7528707">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7528711">//&nbsp;HTTP/1.1&nbsp;POST&nbsp;with&nbsp;Content-Length,&nbsp;no&nbsp;chunking</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7528762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528766"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7528769">:</span>&nbsp;<span class="ident" id="7528771"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7528778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528783"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7528789">:</span>&nbsp;<span class="string" id="7528791">&#34;POST&#34;</span><span class="op" id="7528797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528802"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7528805">:</span>&nbsp;<span class="op" id="7528807">&amp;</span><span class="ident" id="7528808"><a href="/gostd/net/http/requestwrite_test.go.html#7525198">url</a></span><span class="op" id="7528811">.</span><span class="ident" id="7528812"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="7528815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528821"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="7528827">:</span>&nbsp;<span class="string" id="7528829">&#34;http&#34;</span><span class="op" id="7528835">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528841"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="7528845">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7528849">&#34;www.google.com&#34;</span><span class="op" id="7528865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528871"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="7528875">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7528879">&#34;/search&#34;</span><span class="op" id="7528888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7528893">}</span><span class="op" id="7528894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528899"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7528909">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528914">1</span><span class="op" id="7528915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528920"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7528930">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7528935">1</span><span class="op" id="7528936">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528941"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="7528947">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528956"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="7528962">{</span><span class="op" id="7528963">}</span><span class="op" id="7528964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528969"><a href="/gostd/net/http/request.go.html#4138776">Close</a></span><span class="op" id="7528974">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7528984">true</span><span class="op" id="7528988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7528993"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="7529006">:</span>&nbsp;<span class="num" id="7529008">6</span><span class="op" id="7529009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7529013">}</span><span class="op" id="7529014">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529019"><a href="/gostd/net/http/requestwrite_test.go.html#7525275">Body</a></span><span class="op" id="7529023">:</span>&nbsp;<span class="op" id="7529025">[</span><span class="op" id="7529026">]</span><span class="builtintype" id="7529027">byte</span><span class="op" id="7529031">(</span><span class="string" id="7529032">&#34;abcdef&#34;</span><span class="op" id="7529040">)</span><span class="op" id="7529041">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529046"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7529055">:</span>&nbsp;<span class="string" id="7529057">&#34;POST&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7529085">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529090">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7529117">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529122">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7529160">+</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529165">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7529189">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529194">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7529218">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529223">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7529230">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529235">&#34;abcdef&#34;</span><span class="op" id="7529243">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529248"><a href="/gostd/net/http/requestwrite_test.go.html#7525448">WantProxy</a></span><span class="op" id="7529257">:</span>&nbsp;<span class="string" id="7529259">&#34;POST&nbsp;http://www.google.com/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7529308">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529313">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7529340">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529345">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7529383">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529388">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7529412">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529417">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7529441">+</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529446">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7529453">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529458">&#34;abcdef&#34;</span><span class="op" id="7529466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7529469">}</span><span class="op" id="7529470">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7529474">//&nbsp;HTTP/1.1&nbsp;POST&nbsp;with&nbsp;Content-Length&nbsp;in&nbsp;headers</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7529523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529527"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7529530">:</span>&nbsp;<span class="ident" id="7529532"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7529539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529544"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7529550">:</span>&nbsp;<span class="string" id="7529552">&#34;POST&#34;</span><span class="op" id="7529558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529563"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7529566">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529571"><a href="/gostd/net/http/requestwrite_test.go.html#7538784">mustParseURL</a></span><span class="op" id="7529583">(</span><span class="string" id="7529584">&#34;http://example.com/&#34;</span><span class="op" id="7529605">)</span><span class="op" id="7529606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529611"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="7529615">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7529619">&#34;example.com&#34;</span><span class="op" id="7529632">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529637"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="7529643">:</span>&nbsp;<span class="ident" id="7529645"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="7529651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529657">&#34;Content-Length&#34;</span><span class="op" id="7529673">:</span>&nbsp;<span class="op" id="7529675">[</span><span class="op" id="7529676">]</span><span class="builtintype" id="7529677">string</span><span class="op" id="7529683">{</span><span class="string" id="7529684">&#34;10&#34;</span><span class="op" id="7529688">}</span><span class="op" id="7529689">,</span>&nbsp;<span class="comment" id="7529691">//&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7529705">}</span><span class="op" id="7529706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529711"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="7529724">:</span>&nbsp;<span class="num" id="7529726">6</span><span class="op" id="7529727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7529731">}</span><span class="op" id="7529732">,</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529737"><a href="/gostd/net/http/requestwrite_test.go.html#7525275">Body</a></span><span class="op" id="7529741">:</span>&nbsp;<span class="op" id="7529743">[</span><span class="op" id="7529744">]</span><span class="builtintype" id="7529745">byte</span><span class="op" id="7529749">(</span><span class="string" id="7529750">&#34;abcdef&#34;</span><span class="op" id="7529758">)</span><span class="op" id="7529759">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529764"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7529773">:</span>&nbsp;<span class="string" id="7529775">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7529797">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529802">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7529826">+</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529831">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7529869">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529874">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7529898">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529903">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7529910">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529915">&#34;abcdef&#34;</span><span class="op" id="7529923">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7529928"><a href="/gostd/net/http/requestwrite_test.go.html#7525448">WantProxy</a></span><span class="op" id="7529937">:</span>&nbsp;<span class="string" id="7529939">&#34;POST&nbsp;http://example.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7529979">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7529984">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7530008">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7530013">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7530051">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7530056">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7530080">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7530085">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7530092">+</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7530097">&#34;abcdef&#34;</span><span class="op" id="7530105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7530108">}</span><span class="op" id="7530109">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7530113">//&nbsp;default&nbsp;to&nbsp;HTTP/1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7530137">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530141"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7530144">:</span>&nbsp;<span class="ident" id="7530146"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7530153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530158"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7530164">:</span>&nbsp;<span class="string" id="7530166">&#34;GET&#34;</span><span class="op" id="7530171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530176"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7530179">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530184"><a href="/gostd/net/http/requestwrite_test.go.html#7538784">mustParseURL</a></span><span class="op" id="7530196">(</span><span class="string" id="7530197">&#34;/search&#34;</span><span class="op" id="7530206">)</span><span class="op" id="7530207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530212"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="7530216">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7530220">&#34;www.google.com&#34;</span><span class="op" id="7530236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7530240">}</span><span class="op" id="7530241">,</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530246"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7530255">:</span>&nbsp;<span class="string" id="7530257">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7530284">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7530289">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7530316">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7530321">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7530359">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7530364">&#34;\r\n&#34;</span><span class="op" id="7530370">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7530373">}</span><span class="op" id="7530374">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7530378">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;0&nbsp;ContentLength&nbsp;and&nbsp;a&nbsp;0&nbsp;byte&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7530432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530436"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7530439">:</span>&nbsp;<span class="ident" id="7530441"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7530448">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530453"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7530459">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7530468">&#34;POST&#34;</span><span class="op" id="7530474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530479"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7530482">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530494"><a href="/gostd/net/http/requestwrite_test.go.html#7538784">mustParseURL</a></span><span class="op" id="7530506">(</span><span class="string" id="7530507">&#34;/&#34;</span><span class="op" id="7530510">)</span><span class="op" id="7530511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530516"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="7530520">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7530531">&#34;example.com&#34;</span><span class="op" id="7530544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530549"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7530559">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7530564">1</span><span class="op" id="7530565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530570"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7530580">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7530585">1</span><span class="op" id="7530586">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530591"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="7530604">:</span>&nbsp;<span class="num" id="7530606">0</span><span class="op" id="7530607">,</span>&nbsp;<span class="comment" id="7530609">//&nbsp;as&nbsp;if&nbsp;unset&nbsp;by&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7530634">}</span><span class="op" id="7530635">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530640"><a href="/gostd/net/http/requestwrite_test.go.html#7525275">Body</a></span><span class="op" id="7530644">:</span>&nbsp;<span class="keyword" id="7530646">func</span><span class="op" id="7530650">(</span><span class="op" id="7530651">)</span>&nbsp;<span class="ident" id="7530653"><a href="/gostd/net/http/requestwrite_test.go.html#7525179">io</a></span><span class="op" id="7530655">.</span><span class="ident" id="7530656"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span>&nbsp;<span class="op" id="7530667">{</span>&nbsp;<span class="keyword" id="7530669">return</span>&nbsp;<span class="ident" id="7530676"><a href="/gostd/net/http/requestwrite_test.go.html#7525185">ioutil</a></span><span class="op" id="7530682">.</span><span class="ident" id="7530683"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="7530692">(</span><span class="ident" id="7530693"><a href="/gostd/net/http/requestwrite_test.go.html#7525179">io</a></span><span class="op" id="7530695">.</span><span class="ident" id="7530696"><a href="/gostd/io/io.go.html#1431815">LimitReader</a></span><span class="op" id="7530707">(</span><span class="ident" id="7530708"><a href="/gostd/net/http/requestwrite_test.go.html#7525209">strings</a></span><span class="op" id="7530715">.</span><span class="ident" id="7530716"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7530725">(</span><span class="string" id="7530726">&#34;xx&#34;</span><span class="op" id="7530730">)</span><span class="op" id="7530731">,</span>&nbsp;<span class="num" id="7530733">0</span><span class="op" id="7530734">)</span><span class="op" id="7530735">)</span>&nbsp;<span class="op" id="7530737">}</span><span class="op" id="7530738">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7530743">//&nbsp;RFC&nbsp;2616&nbsp;Section&nbsp;14.13&nbsp;says&nbsp;Content-Length&nbsp;should&nbsp;be&nbsp;specified</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7530811">//&nbsp;unless&nbsp;body&nbsp;is&nbsp;prohibited&nbsp;by&nbsp;the&nbsp;request&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7530865">//&nbsp;Also,&nbsp;nginx&nbsp;expects&nbsp;it&nbsp;for&nbsp;POST&nbsp;and&nbsp;PUT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7530911"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7530920">:</span>&nbsp;<span class="string" id="7530922">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7530944">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7530949">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7530973">+</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7530978">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7531016">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531021">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="7531045">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531050">&#34;\r\n&#34;</span><span class="op" id="7531056">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531061"><a href="/gostd/net/http/requestwrite_test.go.html#7525448">WantProxy</a></span><span class="op" id="7531070">:</span>&nbsp;<span class="string" id="7531072">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7531094">+</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531099">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7531123">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531128">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7531166">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531171">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="7531195">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531200">&#34;\r\n&#34;</span><span class="op" id="7531206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7531209">}</span><span class="op" id="7531210">,</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7531214">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;0&nbsp;ContentLength&nbsp;and&nbsp;a&nbsp;1&nbsp;byte&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7531268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531272"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7531275">:</span>&nbsp;<span class="ident" id="7531277"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7531284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531289"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7531295">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531304">&#34;POST&#34;</span><span class="op" id="7531310">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531315"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7531318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531330"><a href="/gostd/net/http/requestwrite_test.go.html#7538784">mustParseURL</a></span><span class="op" id="7531342">(</span><span class="string" id="7531343">&#34;/&#34;</span><span class="op" id="7531346">)</span><span class="op" id="7531347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531352"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="7531356">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531367">&#34;example.com&#34;</span><span class="op" id="7531380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531385"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7531395">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7531400">1</span><span class="op" id="7531401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531406"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7531416">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7531421">1</span><span class="op" id="7531422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531427"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="7531440">:</span>&nbsp;<span class="num" id="7531442">0</span><span class="op" id="7531443">,</span>&nbsp;<span class="comment" id="7531445">//&nbsp;as&nbsp;if&nbsp;unset&nbsp;by&nbsp;user</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7531470">}</span><span class="op" id="7531471">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531476"><a href="/gostd/net/http/requestwrite_test.go.html#7525275">Body</a></span><span class="op" id="7531480">:</span>&nbsp;<span class="keyword" id="7531482">func</span><span class="op" id="7531486">(</span><span class="op" id="7531487">)</span>&nbsp;<span class="ident" id="7531489"><a href="/gostd/net/http/requestwrite_test.go.html#7525179">io</a></span><span class="op" id="7531491">.</span><span class="ident" id="7531492"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span>&nbsp;<span class="op" id="7531503">{</span>&nbsp;<span class="keyword" id="7531505">return</span>&nbsp;<span class="ident" id="7531512"><a href="/gostd/net/http/requestwrite_test.go.html#7525185">ioutil</a></span><span class="op" id="7531518">.</span><span class="ident" id="7531519"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="7531528">(</span><span class="ident" id="7531529"><a href="/gostd/net/http/requestwrite_test.go.html#7525179">io</a></span><span class="op" id="7531531">.</span><span class="ident" id="7531532"><a href="/gostd/io/io.go.html#1431815">LimitReader</a></span><span class="op" id="7531543">(</span><span class="ident" id="7531544"><a href="/gostd/net/http/requestwrite_test.go.html#7525209">strings</a></span><span class="op" id="7531551">.</span><span class="ident" id="7531552"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7531561">(</span><span class="string" id="7531562">&#34;xx&#34;</span><span class="op" id="7531566">)</span><span class="op" id="7531567">,</span>&nbsp;<span class="num" id="7531569">1</span><span class="op" id="7531570">)</span><span class="op" id="7531571">)</span>&nbsp;<span class="op" id="7531573">}</span><span class="op" id="7531574">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531579"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7531588">:</span>&nbsp;<span class="string" id="7531590">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7531612">+</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531617">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7531641">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531646">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7531684">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531689">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7531726">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531731"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7531736">(</span><span class="string" id="7531737">&#34;x&#34;</span><span class="op" id="7531740">)</span>&nbsp;<span class="op" id="7531742">+</span>&nbsp;<span class="ident" id="7531744"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7531749">(</span><span class="string" id="7531750">&#34;&#34;</span><span class="op" id="7531752">)</span><span class="op" id="7531753">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531758"><a href="/gostd/net/http/requestwrite_test.go.html#7525448">WantProxy</a></span><span class="op" id="7531767">:</span>&nbsp;<span class="string" id="7531769">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7531791">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531796">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7531820">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531825">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7531863">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7531868">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7531905">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7531910"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7531915">(</span><span class="string" id="7531916">&#34;x&#34;</span><span class="op" id="7531919">)</span>&nbsp;<span class="op" id="7531921">+</span>&nbsp;<span class="ident" id="7531923"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7531928">(</span><span class="string" id="7531929">&#34;&#34;</span><span class="op" id="7531931">)</span><span class="op" id="7531932">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7531935">}</span><span class="op" id="7531936">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7531940">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;ContentLength&nbsp;of&nbsp;10&nbsp;but&nbsp;a&nbsp;5&nbsp;byte&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7531998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532002"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7532005">:</span>&nbsp;<span class="ident" id="7532007"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7532014">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532019"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7532025">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7532034">&#34;POST&#34;</span><span class="op" id="7532040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532045"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7532048">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532060"><a href="/gostd/net/http/requestwrite_test.go.html#7538784">mustParseURL</a></span><span class="op" id="7532072">(</span><span class="string" id="7532073">&#34;/&#34;</span><span class="op" id="7532076">)</span><span class="op" id="7532077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532082"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="7532086">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7532097">&#34;example.com&#34;</span><span class="op" id="7532110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532115"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7532125">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7532130">1</span><span class="op" id="7532131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532136"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7532146">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7532151">1</span><span class="op" id="7532152">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532157"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="7532170">:</span>&nbsp;<span class="num" id="7532172">10</span><span class="op" id="7532174">,</span>&nbsp;<span class="comment" id="7532176">//&nbsp;but&nbsp;we&#39;re&nbsp;going&nbsp;to&nbsp;send&nbsp;only&nbsp;5&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7532218">}</span><span class="op" id="7532219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532223"><a href="/gostd/net/http/requestwrite_test.go.html#7525275">Body</a></span><span class="op" id="7532227">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7532234">[</span><span class="op" id="7532235">]</span><span class="builtintype" id="7532236">byte</span><span class="op" id="7532240">(</span><span class="string" id="7532241">&#34;12345&#34;</span><span class="op" id="7532248">)</span><span class="op" id="7532249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532253"><a href="/gostd/net/http/requestwrite_test.go.html#7525489">WantError</a></span><span class="op" id="7532262">:</span>&nbsp;<span class="ident" id="7532264"><a href="/gostd/net/http/requestwrite_test.go.html#7525162">errors</a></span><span class="op" id="7532270">.</span><span class="ident" id="7532271"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="7532274">(</span><span class="string" id="7532275">&#34;http:&nbsp;ContentLength=10&nbsp;with&nbsp;Body&nbsp;length&nbsp;5&#34;</span><span class="op" id="7532318">)</span><span class="op" id="7532319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7532322">}</span><span class="op" id="7532323">,</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7532327">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;ContentLength&nbsp;of&nbsp;4&nbsp;but&nbsp;an&nbsp;8&nbsp;byte&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7532385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532389"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7532392">:</span>&nbsp;<span class="ident" id="7532394"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7532401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532406"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7532412">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7532421">&#34;POST&#34;</span><span class="op" id="7532427">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532432"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7532435">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532447"><a href="/gostd/net/http/requestwrite_test.go.html#7538784">mustParseURL</a></span><span class="op" id="7532459">(</span><span class="string" id="7532460">&#34;/&#34;</span><span class="op" id="7532463">)</span><span class="op" id="7532464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532469"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="7532473">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7532484">&#34;example.com&#34;</span><span class="op" id="7532497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532502"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7532512">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7532517">1</span><span class="op" id="7532518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532523"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7532533">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7532538">1</span><span class="op" id="7532539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532544"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="7532557">:</span>&nbsp;<span class="num" id="7532559">4</span><span class="op" id="7532560">,</span>&nbsp;<span class="comment" id="7532562">//&nbsp;but&nbsp;we&#39;re&nbsp;going&nbsp;to&nbsp;try&nbsp;to&nbsp;send&nbsp;8&nbsp;bytes</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7532606">}</span><span class="op" id="7532607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532611"><a href="/gostd/net/http/requestwrite_test.go.html#7525275">Body</a></span><span class="op" id="7532615">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7532622">[</span><span class="op" id="7532623">]</span><span class="builtintype" id="7532624">byte</span><span class="op" id="7532628">(</span><span class="string" id="7532629">&#34;12345678&#34;</span><span class="op" id="7532639">)</span><span class="op" id="7532640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532644"><a href="/gostd/net/http/requestwrite_test.go.html#7525489">WantError</a></span><span class="op" id="7532653">:</span>&nbsp;<span class="ident" id="7532655"><a href="/gostd/net/http/requestwrite_test.go.html#7525162">errors</a></span><span class="op" id="7532661">.</span><span class="ident" id="7532662"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="7532665">(</span><span class="string" id="7532666">&#34;http:&nbsp;ContentLength=4&nbsp;with&nbsp;Body&nbsp;length&nbsp;8&#34;</span><span class="op" id="7532708">)</span><span class="op" id="7532709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7532712">}</span><span class="op" id="7532713">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7532717">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;5&nbsp;ContentLength&nbsp;and&nbsp;nil&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7532766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532770"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7532773">:</span>&nbsp;<span class="ident" id="7532775"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7532782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532787"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7532793">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7532802">&#34;POST&#34;</span><span class="op" id="7532808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532813"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7532816">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532828"><a href="/gostd/net/http/requestwrite_test.go.html#7538784">mustParseURL</a></span><span class="op" id="7532840">(</span><span class="string" id="7532841">&#34;/&#34;</span><span class="op" id="7532844">)</span><span class="op" id="7532845">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532850"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="7532854">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7532865">&#34;example.com&#34;</span><span class="op" id="7532878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532883"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7532893">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7532898">1</span><span class="op" id="7532899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532904"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7532914">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7532919">1</span><span class="op" id="7532920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532925"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="7532938">:</span>&nbsp;<span class="num" id="7532940">5</span><span class="op" id="7532941">,</span>&nbsp;<span class="comment" id="7532943">//&nbsp;but&nbsp;we&#39;ll&nbsp;omit&nbsp;the&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7532972">}</span><span class="op" id="7532973">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7532977"><a href="/gostd/net/http/requestwrite_test.go.html#7525489">WantError</a></span><span class="op" id="7532986">:</span>&nbsp;<span class="ident" id="7532988"><a href="/gostd/net/http/requestwrite_test.go.html#7525162">errors</a></span><span class="op" id="7532994">.</span><span class="ident" id="7532995"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="7532998">(</span><span class="string" id="7532999">&#34;http:&nbsp;Request.ContentLength=5&nbsp;with&nbsp;nil&nbsp;Body&#34;</span><span class="op" id="7533044">)</span><span class="op" id="7533045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7533048">}</span><span class="op" id="7533049">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7533053">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;0&nbsp;ContentLength&nbsp;and&nbsp;a&nbsp;body&nbsp;with&nbsp;1&nbsp;byte&nbsp;content&nbsp;and&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7533133">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533137"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7533140">:</span>&nbsp;<span class="ident" id="7533142"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7533149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533154"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7533160">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7533169">&#34;POST&#34;</span><span class="op" id="7533175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533180"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7533183">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533195"><a href="/gostd/net/http/requestwrite_test.go.html#7538784">mustParseURL</a></span><span class="op" id="7533207">(</span><span class="string" id="7533208">&#34;/&#34;</span><span class="op" id="7533211">)</span><span class="op" id="7533212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533217"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="7533221">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7533232">&#34;example.com&#34;</span><span class="op" id="7533245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533250"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7533260">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7533265">1</span><span class="op" id="7533266">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533271"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7533281">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7533286">1</span><span class="op" id="7533287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533292"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="7533305">:</span>&nbsp;<span class="num" id="7533307">0</span><span class="op" id="7533308">,</span>&nbsp;<span class="comment" id="7533310">//&nbsp;as&nbsp;if&nbsp;unset&nbsp;by&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7533335">}</span><span class="op" id="7533336">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533341"><a href="/gostd/net/http/requestwrite_test.go.html#7525275">Body</a></span><span class="op" id="7533345">:</span>&nbsp;<span class="keyword" id="7533347">func</span><span class="op" id="7533351">(</span><span class="op" id="7533352">)</span>&nbsp;<span class="ident" id="7533354"><a href="/gostd/net/http/requestwrite_test.go.html#7525179">io</a></span><span class="op" id="7533356">.</span><span class="ident" id="7533357"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span>&nbsp;<span class="op" id="7533368">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533373">err</span>&nbsp;<span class="op" id="7533377">:=</span>&nbsp;<span class="ident" id="7533380"><a href="/gostd/net/http/requestwrite_test.go.html#7525162">errors</a></span><span class="op" id="7533386">.</span><span class="ident" id="7533387"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="7533390">(</span><span class="string" id="7533391">&#34;Custom&nbsp;reader&nbsp;error&#34;</span><span class="op" id="7533412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533417">errReader</span>&nbsp;<span class="op" id="7533427">:=</span>&nbsp;<span class="op" id="7533430">&amp;</span><span class="ident" id="7533431"><a href="/gostd/net/http/transfer.go.html#4241057">errorReader</a></span><span class="op" id="7533442">{</span><span class="ident" id="7533443"><a href="/gostd/net/http/requestwrite_test.go.html#7533373">err</a></span><span class="op" id="7533446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7533451">return</span>&nbsp;<span class="ident" id="7533458"><a href="/gostd/net/http/requestwrite_test.go.html#7525185">ioutil</a></span><span class="op" id="7533464">.</span><span class="ident" id="7533465"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="7533474">(</span><span class="ident" id="7533475"><a href="/gostd/net/http/requestwrite_test.go.html#7525179">io</a></span><span class="op" id="7533477">.</span><span class="ident" id="7533478"><a href="/gostd/io/multi.go.html#1435263">MultiReader</a></span><span class="op" id="7533489">(</span><span class="ident" id="7533490"><a href="/gostd/net/http/requestwrite_test.go.html#7525209">strings</a></span><span class="op" id="7533497">.</span><span class="ident" id="7533498"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7533507">(</span><span class="string" id="7533508">&#34;x&#34;</span><span class="op" id="7533511">)</span><span class="op" id="7533512">,</span>&nbsp;<span class="ident" id="7533514"><a href="/gostd/net/http/requestwrite_test.go.html#7533417">errReader</a></span><span class="op" id="7533523">)</span><span class="op" id="7533524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7533528">}</span><span class="op" id="7533529">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533534"><a href="/gostd/net/http/requestwrite_test.go.html#7525489">WantError</a></span><span class="op" id="7533543">:</span>&nbsp;<span class="ident" id="7533545"><a href="/gostd/net/http/requestwrite_test.go.html#7525162">errors</a></span><span class="op" id="7533551">.</span><span class="ident" id="7533552"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="7533555">(</span><span class="string" id="7533556">&#34;Custom&nbsp;reader&nbsp;error&#34;</span><span class="op" id="7533577">)</span><span class="op" id="7533578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7533581">}</span><span class="op" id="7533582">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7533586">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;0&nbsp;ContentLength&nbsp;and&nbsp;a&nbsp;body&nbsp;without&nbsp;content&nbsp;and&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7533662">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533666"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7533669">:</span>&nbsp;<span class="ident" id="7533671"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7533678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533683"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7533689">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7533698">&#34;POST&#34;</span><span class="op" id="7533704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533709"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7533712">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533724"><a href="/gostd/net/http/requestwrite_test.go.html#7538784">mustParseURL</a></span><span class="op" id="7533736">(</span><span class="string" id="7533737">&#34;/&#34;</span><span class="op" id="7533740">)</span><span class="op" id="7533741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533746"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="7533750">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7533761">&#34;example.com&#34;</span><span class="op" id="7533774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533779"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7533789">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7533794">1</span><span class="op" id="7533795">,</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533800"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7533810">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7533815">1</span><span class="op" id="7533816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533821"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="7533834">:</span>&nbsp;<span class="num" id="7533836">0</span><span class="op" id="7533837">,</span>&nbsp;<span class="comment" id="7533839">//&nbsp;as&nbsp;if&nbsp;unset&nbsp;by&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7533864">}</span><span class="op" id="7533865">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533870"><a href="/gostd/net/http/requestwrite_test.go.html#7525275">Body</a></span><span class="op" id="7533874">:</span>&nbsp;<span class="keyword" id="7533876">func</span><span class="op" id="7533880">(</span><span class="op" id="7533881">)</span>&nbsp;<span class="ident" id="7533883"><a href="/gostd/net/http/requestwrite_test.go.html#7525179">io</a></span><span class="op" id="7533885">.</span><span class="ident" id="7533886"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span>&nbsp;<span class="op" id="7533897">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533902">err</span>&nbsp;<span class="op" id="7533906">:=</span>&nbsp;<span class="ident" id="7533909"><a href="/gostd/net/http/requestwrite_test.go.html#7525162">errors</a></span><span class="op" id="7533915">.</span><span class="ident" id="7533916"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="7533919">(</span><span class="string" id="7533920">&#34;Custom&nbsp;reader&nbsp;error&#34;</span><span class="op" id="7533941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7533946">errReader</span>&nbsp;<span class="op" id="7533956">:=</span>&nbsp;<span class="op" id="7533959">&amp;</span><span class="ident" id="7533960"><a href="/gostd/net/http/transfer.go.html#4241057">errorReader</a></span><span class="op" id="7533971">{</span><span class="ident" id="7533972"><a href="/gostd/net/http/requestwrite_test.go.html#7533902">err</a></span><span class="op" id="7533975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7533980">return</span>&nbsp;<span class="ident" id="7533987"><a href="/gostd/net/http/requestwrite_test.go.html#7525185">ioutil</a></span><span class="op" id="7533993">.</span><span class="ident" id="7533994"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="7534003">(</span><span class="ident" id="7534004"><a href="/gostd/net/http/requestwrite_test.go.html#7533946">errReader</a></span><span class="op" id="7534013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7534017">}</span><span class="op" id="7534018">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534023"><a href="/gostd/net/http/requestwrite_test.go.html#7525489">WantError</a></span><span class="op" id="7534032">:</span>&nbsp;<span class="ident" id="7534034"><a href="/gostd/net/http/requestwrite_test.go.html#7525162">errors</a></span><span class="op" id="7534040">.</span><span class="ident" id="7534041"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="7534044">(</span><span class="string" id="7534045">&#34;Custom&nbsp;reader&nbsp;error&#34;</span><span class="op" id="7534066">)</span><span class="op" id="7534067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7534070">}</span><span class="op" id="7534071">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7534075">//&nbsp;Verify&nbsp;that&nbsp;DumpRequest&nbsp;preserves&nbsp;the&nbsp;HTTP&nbsp;version&nbsp;number,&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;Host,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7534158">//&nbsp;and&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;User-Agent.</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7534192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534196"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7534199">:</span>&nbsp;<span class="ident" id="7534201"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7534208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534213"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7534219">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7534225">&#34;GET&#34;</span><span class="op" id="7534230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534235"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7534238">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534247"><a href="/gostd/net/http/requestwrite_test.go.html#7538784">mustParseURL</a></span><span class="op" id="7534259">(</span><span class="string" id="7534260">&#34;/foo&#34;</span><span class="op" id="7534266">)</span><span class="op" id="7534267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534272"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7534282">:</span>&nbsp;<span class="num" id="7534284">1</span><span class="op" id="7534285">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534290"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7534300">:</span>&nbsp;<span class="num" id="7534302">0</span><span class="op" id="7534303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534308"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="7534314">:</span>&nbsp;<span class="ident" id="7534316"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="7534322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7534328">&#34;X-Foo&#34;</span><span class="op" id="7534335">:</span>&nbsp;<span class="op" id="7534337">[</span><span class="op" id="7534338">]</span><span class="builtintype" id="7534339">string</span><span class="op" id="7534345">{</span><span class="string" id="7534346">&#34;X-Bar&#34;</span><span class="op" id="7534353">}</span><span class="op" id="7534354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7534359">}</span><span class="op" id="7534360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7534364">}</span><span class="op" id="7534365">,</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534370"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7534379">:</span>&nbsp;<span class="string" id="7534381">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7534405">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7534410">&#34;Host:&nbsp;\r\n&#34;</span>&nbsp;<span class="op" id="7534423">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7534428">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7534466">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7534471">&#34;X-Foo:&nbsp;X-Bar\r\n\r\n&#34;</span><span class="op" id="7534493">,</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7534496">}</span><span class="op" id="7534497">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7534501">//&nbsp;If&nbsp;no&nbsp;Request.Host&nbsp;and&nbsp;no&nbsp;Request.URL.Host,&nbsp;we&nbsp;send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7534557">//&nbsp;an&nbsp;empty&nbsp;Host&nbsp;header,&nbsp;and&nbsp;don&#39;t&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7534597">//&nbsp;Request.Header[&#34;Host&#34;].&nbsp;This&nbsp;is&nbsp;just&nbsp;testing&nbsp;that</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7534651">//&nbsp;we&nbsp;don&#39;t&nbsp;change&nbsp;Go&nbsp;1.0&nbsp;behavior.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7534688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534692"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7534695">:</span>&nbsp;<span class="ident" id="7534697"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7534704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534709"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7534715">:</span>&nbsp;<span class="string" id="7534717">&#34;GET&#34;</span><span class="op" id="7534722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534727"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="7534731">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7534735">&#34;&#34;</span><span class="op" id="7534737">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534742"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7534745">:</span>&nbsp;<span class="op" id="7534747">&amp;</span><span class="ident" id="7534748"><a href="/gostd/net/http/requestwrite_test.go.html#7525198">url</a></span><span class="op" id="7534751">.</span><span class="ident" id="7534752"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="7534755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534761"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="7534767">:</span>&nbsp;<span class="string" id="7534769">&#34;http&#34;</span><span class="op" id="7534775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534781"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="7534785">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7534789">&#34;&#34;</span><span class="op" id="7534791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534797"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="7534801">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7534805">&#34;/search&#34;</span><span class="op" id="7534814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7534819">}</span><span class="op" id="7534820">,</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534825"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7534835">:</span>&nbsp;<span class="num" id="7534837">1</span><span class="op" id="7534838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534843"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7534853">:</span>&nbsp;<span class="num" id="7534855">1</span><span class="op" id="7534856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534861"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="7534867">:</span>&nbsp;<span class="ident" id="7534869"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="7534875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7534881">&#34;Host&#34;</span><span class="op" id="7534887">:</span>&nbsp;<span class="op" id="7534889">[</span><span class="op" id="7534890">]</span><span class="builtintype" id="7534891">string</span><span class="op" id="7534897">{</span><span class="string" id="7534898">&#34;bad.example.com&#34;</span><span class="op" id="7534915">}</span><span class="op" id="7534916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7534921">}</span><span class="op" id="7534922">,</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7534926">}</span><span class="op" id="7534927">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7534932"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7534941">:</span>&nbsp;<span class="string" id="7534943">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7534970">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7534975">&#34;Host:&nbsp;\r\n&#34;</span>&nbsp;<span class="op" id="7534988">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7534993">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n\r\n&#34;</span><span class="op" id="7535034">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7535037">}</span><span class="op" id="7535038">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7535042">//&nbsp;Opaque&nbsp;test&nbsp;#1&nbsp;from&nbsp;golang.org/issue/4860</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7535088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535092"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7535095">:</span>&nbsp;<span class="ident" id="7535097"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7535104">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535109"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7535115">:</span>&nbsp;<span class="string" id="7535117">&#34;GET&#34;</span><span class="op" id="7535122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535127"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7535130">:</span>&nbsp;<span class="op" id="7535132">&amp;</span><span class="ident" id="7535133"><a href="/gostd/net/http/requestwrite_test.go.html#7525198">url</a></span><span class="op" id="7535136">.</span><span class="ident" id="7535137"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="7535140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535146"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="7535152">:</span>&nbsp;<span class="string" id="7535154">&#34;http&#34;</span><span class="op" id="7535160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535166"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="7535170">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7535174">&#34;www.google.com&#34;</span><span class="op" id="7535190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535196"><a href="/gostd/net/url/url.go.html#3751225">Opaque</a></span><span class="op" id="7535202">:</span>&nbsp;<span class="string" id="7535204">&#34;/%2F/%2F/&#34;</span><span class="op" id="7535215">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7535220">}</span><span class="op" id="7535221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535226"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7535236">:</span>&nbsp;<span class="num" id="7535238">1</span><span class="op" id="7535239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535244"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7535254">:</span>&nbsp;<span class="num" id="7535256">1</span><span class="op" id="7535257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535262"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="7535268">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535274"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="7535280">{</span><span class="op" id="7535281">}</span><span class="op" id="7535282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7535286">}</span><span class="op" id="7535287">,</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535292"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7535301">:</span>&nbsp;<span class="string" id="7535303">&#34;GET&nbsp;/%2F/%2F/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7535332">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7535337">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7535364">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7535369">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n\r\n&#34;</span><span class="op" id="7535410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7535413">}</span><span class="op" id="7535414">,</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7535418">//&nbsp;Opaque&nbsp;test&nbsp;#2&nbsp;from&nbsp;golang.org/issue/4860</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7535464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535468"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7535471">:</span>&nbsp;<span class="ident" id="7535473"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7535480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535485"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7535491">:</span>&nbsp;<span class="string" id="7535493">&#34;GET&#34;</span><span class="op" id="7535498">,</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535503"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7535506">:</span>&nbsp;<span class="op" id="7535508">&amp;</span><span class="ident" id="7535509"><a href="/gostd/net/http/requestwrite_test.go.html#7525198">url</a></span><span class="op" id="7535512">.</span><span class="ident" id="7535513"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="7535516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535522"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="7535528">:</span>&nbsp;<span class="string" id="7535530">&#34;http&#34;</span><span class="op" id="7535536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535542"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="7535546">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7535550">&#34;x.google.com&#34;</span><span class="op" id="7535564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535570"><a href="/gostd/net/url/url.go.html#3751225">Opaque</a></span><span class="op" id="7535576">:</span>&nbsp;<span class="string" id="7535578">&#34;//y.google.com/%2F/%2F/&#34;</span><span class="op" id="7535603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7535608">}</span><span class="op" id="7535609">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535614"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7535624">:</span>&nbsp;<span class="num" id="7535626">1</span><span class="op" id="7535627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535632"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7535642">:</span>&nbsp;<span class="num" id="7535644">1</span><span class="op" id="7535645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535650"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="7535656">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535662"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="7535668">{</span><span class="op" id="7535669">}</span><span class="op" id="7535670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7535674">}</span><span class="op" id="7535675">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535680"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7535689">:</span>&nbsp;<span class="string" id="7535691">&#34;GET&nbsp;http://y.google.com/%2F/%2F/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7535739">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7535744">&#34;Host:&nbsp;x.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7535769">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7535774">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n\r\n&#34;</span><span class="op" id="7535815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7535818">}</span><span class="op" id="7535819">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7535823">//&nbsp;Testing&nbsp;custom&nbsp;case&nbsp;in&nbsp;header&nbsp;keys.&nbsp;Issue&nbsp;5022.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7535875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535879"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7535882">:</span>&nbsp;<span class="ident" id="7535884"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="7535891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535896"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="7535902">:</span>&nbsp;<span class="string" id="7535904">&#34;GET&#34;</span><span class="op" id="7535909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535914"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="7535917">:</span>&nbsp;<span class="op" id="7535919">&amp;</span><span class="ident" id="7535920"><a href="/gostd/net/http/requestwrite_test.go.html#7525198">url</a></span><span class="op" id="7535923">.</span><span class="ident" id="7535924"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="7535927">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535933"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="7535939">:</span>&nbsp;<span class="string" id="7535941">&#34;http&#34;</span><span class="op" id="7535947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535953"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="7535957">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7535961">&#34;www.google.com&#34;</span><span class="op" id="7535977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7535983"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="7535987">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7535991">&#34;/&#34;</span><span class="op" id="7535994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7535999">}</span><span class="op" id="7536000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536005"><a href="/gostd/net/http/request.go.html#4136744">Proto</a></span><span class="op" id="7536010">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7536017">&#34;HTTP/1.1&#34;</span><span class="op" id="7536027">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536032"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="7536042">:</span>&nbsp;<span class="num" id="7536044">1</span><span class="op" id="7536045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536050"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="7536060">:</span>&nbsp;<span class="num" id="7536062">1</span><span class="op" id="7536063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536068"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="7536074">:</span>&nbsp;<span class="ident" id="7536076"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="7536082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7536088">&#34;ALL-CAPS&#34;</span><span class="op" id="7536098">:</span>&nbsp;<span class="op" id="7536100">{</span><span class="string" id="7536101">&#34;x&#34;</span><span class="op" id="7536104">}</span><span class="op" id="7536105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7536110">}</span><span class="op" id="7536111">,</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7536115">}</span><span class="op" id="7536116">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536121"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7536130">:</span>&nbsp;<span class="string" id="7536132">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7536153">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7536158">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7536185">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7536190">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7536228">+</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7536233">&#34;ALL-CAPS:&nbsp;x\r\n&#34;</span>&nbsp;<span class="op" id="7536251">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7536256">&#34;\r\n&#34;</span><span class="op" id="7536262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7536265">}</span><span class="op" id="7536266">,</span><br>
<span class="lineno"></span><span class="op" id="7536268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span><span class="keyword" id="7536271">func</span>&nbsp;<span class="ident" id="7536276">TestRequestWrite</span><span class="op" id="7536292">(</span><span class="ident" id="7536293">t</span>&nbsp;<span class="op" id="7536295">*</span><span class="ident" id="7536296"><a href="/gostd/net/http/requestwrite_test.go.html#7525220">testing</a></span><span class="op" id="7536303">.</span><span class="ident" id="7536304"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7536305">)</span>&nbsp;<span class="op" id="7536307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536310">for</span>&nbsp;<span class="ident" id="7536314">i</span>&nbsp;<span class="op" id="7536316">:=</span>&nbsp;<span class="keyword" id="7536319">range</span>&nbsp;<span class="ident" id="7536325"><a href="/gostd/net/http/requestwrite_test.go.html#7525547">reqWriteTests</a></span>&nbsp;<span class="op" id="7536339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536343">tt</span>&nbsp;<span class="op" id="7536346">:=</span>&nbsp;<span class="op" id="7536349">&amp;</span><span class="ident" id="7536350"><a href="/gostd/net/http/requestwrite_test.go.html#7525547">reqWriteTests</a></span><span class="op" id="7536363">[</span><span class="ident" id="7536364"><a href="/gostd/net/http/requestwrite_test.go.html#7536314">i</a></span><span class="op" id="7536365">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536370">setBody</span>&nbsp;<span class="op" id="7536378">:=</span>&nbsp;<span class="keyword" id="7536381">func</span><span class="op" id="7536385">(</span><span class="op" id="7536386">)</span>&nbsp;<span class="op" id="7536388">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536393">if</span>&nbsp;<span class="ident" id="7536396"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7536398">.</span><span class="ident" id="7536399"><a href="/gostd/net/http/requestwrite_test.go.html#7525275">Body</a></span>&nbsp;<span class="op" id="7536404">==</span>&nbsp;<span class="builtintype" id="7536407">nil</span>&nbsp;<span class="op" id="7536411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536417">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7536427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536432">switch</span>&nbsp;<span class="ident" id="7536439">b</span>&nbsp;<span class="op" id="7536441">:=</span>&nbsp;<span class="ident" id="7536444"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7536446">.</span><span class="ident" id="7536447"><a href="/gostd/net/http/requestwrite_test.go.html#7525275">Body</a></span><span class="op" id="7536451">.</span><span class="op" id="7536452">(</span><span class="keyword" id="7536453">type</span><span class="op" id="7536457">)</span>&nbsp;<span class="op" id="7536459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536464">case</span>&nbsp;<span class="op" id="7536469">[</span><span class="op" id="7536470">]</span><span class="builtintype" id="7536471">byte</span><span class="op" id="7536475">:</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536481"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7536483">.</span><span class="ident" id="7536484"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7536487">.</span><span class="ident" id="7536488"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span>&nbsp;<span class="op" id="7536493">=</span>&nbsp;<span class="ident" id="7536495"><a href="/gostd/net/http/requestwrite_test.go.html#7525185">ioutil</a></span><span class="op" id="7536501">.</span><span class="ident" id="7536502"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="7536511">(</span><span class="ident" id="7536512"><a href="/gostd/net/http/requestwrite_test.go.html#7525153">bytes</a></span><span class="op" id="7536517">.</span><span class="ident" id="7536518"><a href="/gostd/bytes/reader.go.html#1418136">NewReader</a></span><span class="op" id="7536527">(</span><span class="ident" id="7536528"><a href="/gostd/net/http/requestwrite_test.go.html#7536439">b</a></span><span class="op" id="7536529">)</span><span class="op" id="7536530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536535">case</span>&nbsp;<span class="keyword" id="7536540">func</span><span class="op" id="7536544">(</span><span class="op" id="7536545">)</span>&nbsp;<span class="ident" id="7536547"><a href="/gostd/net/http/requestwrite_test.go.html#7525179">io</a></span><span class="op" id="7536549">.</span><span class="ident" id="7536550"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span><span class="op" id="7536560">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536566"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7536568">.</span><span class="ident" id="7536569"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7536572">.</span><span class="ident" id="7536573"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span>&nbsp;<span class="op" id="7536578">=</span>&nbsp;<span class="ident" id="7536580"><a href="/gostd/net/http/requestwrite_test.go.html#7536439">b</a></span><span class="op" id="7536581">(</span><span class="op" id="7536582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7536587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7536591">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536595"><a href="/gostd/net/http/requestwrite_test.go.html#7536370">setBody</a></span><span class="op" id="7536602">(</span><span class="op" id="7536603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536607">if</span>&nbsp;<span class="ident" id="7536610"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7536612">.</span><span class="ident" id="7536613"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7536616">.</span><span class="ident" id="7536617"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span>&nbsp;<span class="op" id="7536624">==</span>&nbsp;<span class="builtintype" id="7536627">nil</span>&nbsp;<span class="op" id="7536631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536636"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7536638">.</span><span class="ident" id="7536639"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7536642">.</span><span class="ident" id="7536643"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span>&nbsp;<span class="op" id="7536650">=</span>&nbsp;<span class="builtinfunc" id="7536652">make</span><span class="op" id="7536656">(</span><span class="ident" id="7536657"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="7536663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7536667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536672">var</span>&nbsp;<span class="ident" id="7536676">braw</span>&nbsp;<span class="ident" id="7536681"><a href="/gostd/net/http/requestwrite_test.go.html#7525153">bytes</a></span><span class="op" id="7536686">.</span><span class="ident" id="7536687"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536696">err</span>&nbsp;<span class="op" id="7536700">:=</span>&nbsp;<span class="ident" id="7536703"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7536705">.</span><span class="ident" id="7536706"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7536709">.</span><span class="ident" id="7536710"><a href="/gostd/net/http/request.go.html#4146008">Write</a></span><span class="op" id="7536715">(</span><span class="op" id="7536716">&amp;</span><span class="ident" id="7536717"><a href="/gostd/net/http/requestwrite_test.go.html#7536676">braw</a></span><span class="op" id="7536721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536725">if</span>&nbsp;<span class="ident" id="7536728">g</span><span class="op" id="7536729">,</span>&nbsp;<span class="ident" id="7536731">e</span>&nbsp;<span class="op" id="7536733">:=</span>&nbsp;<span class="ident" id="7536736"><a href="/gostd/net/http/requestwrite_test.go.html#7525172">fmt</a></span><span class="op" id="7536739">.</span><span class="ident" id="7536740"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7536747">(</span><span class="string" id="7536748">&#34;%v&#34;</span><span class="op" id="7536752">,</span>&nbsp;<span class="ident" id="7536754"><a href="/gostd/net/http/requestwrite_test.go.html#7536696">err</a></span><span class="op" id="7536757">)</span><span class="op" id="7536758">,</span>&nbsp;<span class="ident" id="7536760"><a href="/gostd/net/http/requestwrite_test.go.html#7525172">fmt</a></span><span class="op" id="7536763">.</span><span class="ident" id="7536764"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7536771">(</span><span class="string" id="7536772">&#34;%v&#34;</span><span class="op" id="7536776">,</span>&nbsp;<span class="ident" id="7536778"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7536780">.</span><span class="ident" id="7536781"><a href="/gostd/net/http/requestwrite_test.go.html#7525489">WantError</a></span><span class="op" id="7536790">)</span><span class="op" id="7536791">;</span>&nbsp;<span class="ident" id="7536793"><a href="/gostd/net/http/requestwrite_test.go.html#7536728">g</a></span>&nbsp;<span class="op" id="7536795">!=</span>&nbsp;<span class="ident" id="7536798"><a href="/gostd/net/http/requestwrite_test.go.html#7536731">e</a></span>&nbsp;<span class="op" id="7536800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536805"><a href="/gostd/net/http/requestwrite_test.go.html#7536293">t</a></span><span class="op" id="7536806">.</span><span class="ident" id="7536807"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7536813">(</span><span class="string" id="7536814">&#34;writing&nbsp;#%d,&nbsp;err&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7536846">,</span>&nbsp;<span class="ident" id="7536848"><a href="/gostd/net/http/requestwrite_test.go.html#7536314">i</a></span><span class="op" id="7536849">,</span>&nbsp;<span class="ident" id="7536851"><a href="/gostd/net/http/requestwrite_test.go.html#7536728">g</a></span><span class="op" id="7536852">,</span>&nbsp;<span class="ident" id="7536854"><a href="/gostd/net/http/requestwrite_test.go.html#7536731">e</a></span><span class="op" id="7536855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536860">continue</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7536871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536875">if</span>&nbsp;<span class="ident" id="7536878"><a href="/gostd/net/http/requestwrite_test.go.html#7536696">err</a></span>&nbsp;<span class="op" id="7536882">!=</span>&nbsp;<span class="builtintype" id="7536885">nil</span>&nbsp;<span class="op" id="7536889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536894">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7536905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536910">if</span>&nbsp;<span class="ident" id="7536913"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7536915">.</span><span class="ident" id="7536916"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span>&nbsp;<span class="op" id="7536926">!=</span>&nbsp;<span class="string" id="7536929">&#34;&#34;</span>&nbsp;<span class="op" id="7536932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536937">sraw</span>&nbsp;<span class="op" id="7536942">:=</span>&nbsp;<span class="ident" id="7536945"><a href="/gostd/net/http/requestwrite_test.go.html#7536676">braw</a></span><span class="op" id="7536949">.</span><span class="ident" id="7536950"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7536956">(</span><span class="op" id="7536957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7536962">if</span>&nbsp;<span class="ident" id="7536965"><a href="/gostd/net/http/requestwrite_test.go.html#7536937">sraw</a></span>&nbsp;<span class="op" id="7536970">!=</span>&nbsp;<span class="ident" id="7536973"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7536975">.</span><span class="ident" id="7536976"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span>&nbsp;<span class="op" id="7536986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7536992"><a href="/gostd/net/http/requestwrite_test.go.html#7536293">t</a></span><span class="op" id="7536993">.</span><span class="ident" id="7536994"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7537000">(</span><span class="string" id="7537001">&#34;Test&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7537038">,</span>&nbsp;<span class="ident" id="7537040"><a href="/gostd/net/http/requestwrite_test.go.html#7536314">i</a></span><span class="op" id="7537041">,</span>&nbsp;<span class="ident" id="7537043"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7537045">.</span><span class="ident" id="7537046"><a href="/gostd/net/http/requestwrite_test.go.html#7525413">WantWrite</a></span><span class="op" id="7537055">,</span>&nbsp;<span class="ident" id="7537057"><a href="/gostd/net/http/requestwrite_test.go.html#7536937">sraw</a></span><span class="op" id="7537061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7537067">continue</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7537079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7537083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7537088">if</span>&nbsp;<span class="ident" id="7537091"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7537093">.</span><span class="ident" id="7537094"><a href="/gostd/net/http/requestwrite_test.go.html#7525448">WantProxy</a></span>&nbsp;<span class="op" id="7537104">!=</span>&nbsp;<span class="string" id="7537107">&#34;&#34;</span>&nbsp;<span class="op" id="7537110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7537115"><a href="/gostd/net/http/requestwrite_test.go.html#7536370">setBody</a></span><span class="op" id="7537122">(</span><span class="op" id="7537123">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7537128">var</span>&nbsp;<span class="ident" id="7537132">praw</span>&nbsp;<span class="ident" id="7537137"><a href="/gostd/net/http/requestwrite_test.go.html#7525153">bytes</a></span><span class="op" id="7537142">.</span><span class="ident" id="7537143"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7537153"><a href="/gostd/net/http/requestwrite_test.go.html#7536696">err</a></span>&nbsp;<span class="op" id="7537157">=</span>&nbsp;<span class="ident" id="7537159"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7537161">.</span><span class="ident" id="7537162"><a href="/gostd/net/http/requestwrite_test.go.html#7525261">Req</a></span><span class="op" id="7537165">.</span><span class="ident" id="7537166"><a href="/gostd/net/http/request.go.html#4146443">WriteProxy</a></span><span class="op" id="7537176">(</span><span class="op" id="7537177">&amp;</span><span class="ident" id="7537178"><a href="/gostd/net/http/requestwrite_test.go.html#7537132">praw</a></span><span class="op" id="7537182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7537187">if</span>&nbsp;<span class="ident" id="7537190"><a href="/gostd/net/http/requestwrite_test.go.html#7536696">err</a></span>&nbsp;<span class="op" id="7537194">!=</span>&nbsp;<span class="builtintype" id="7537197">nil</span>&nbsp;<span class="op" id="7537201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7537207"><a href="/gostd/net/http/requestwrite_test.go.html#7536293">t</a></span><span class="op" id="7537208">.</span><span class="ident" id="7537209"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7537215">(</span><span class="string" id="7537216">&#34;WriteProxy&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7537236">,</span>&nbsp;<span class="ident" id="7537238"><a href="/gostd/net/http/requestwrite_test.go.html#7536314">i</a></span><span class="op" id="7537239">,</span>&nbsp;<span class="ident" id="7537241"><a href="/gostd/net/http/requestwrite_test.go.html#7536696">err</a></span><span class="op" id="7537244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7537250">continue</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7537262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7537267">sraw</span>&nbsp;<span class="op" id="7537272">:=</span>&nbsp;<span class="ident" id="7537275"><a href="/gostd/net/http/requestwrite_test.go.html#7537132">praw</a></span><span class="op" id="7537279">.</span><span class="ident" id="7537280"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7537286">(</span><span class="op" id="7537287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7537292">if</span>&nbsp;<span class="ident" id="7537295"><a href="/gostd/net/http/requestwrite_test.go.html#7537267">sraw</a></span>&nbsp;<span class="op" id="7537300">!=</span>&nbsp;<span class="ident" id="7537303"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7537305">.</span><span class="ident" id="7537306"><a href="/gostd/net/http/requestwrite_test.go.html#7525448">WantProxy</a></span>&nbsp;<span class="op" id="7537316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7537322"><a href="/gostd/net/http/requestwrite_test.go.html#7536293">t</a></span><span class="op" id="7537323">.</span><span class="ident" id="7537324"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7537330">(</span><span class="string" id="7537331">&#34;Test&nbsp;Proxy&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7537374">,</span>&nbsp;<span class="ident" id="7537376"><a href="/gostd/net/http/requestwrite_test.go.html#7536314">i</a></span><span class="op" id="7537377">,</span>&nbsp;<span class="ident" id="7537379"><a href="/gostd/net/http/requestwrite_test.go.html#7536343">tt</a></span><span class="op" id="7537381">.</span><span class="ident" id="7537382"><a href="/gostd/net/http/requestwrite_test.go.html#7525448">WantProxy</a></span><span class="op" id="7537391">,</span>&nbsp;<span class="ident" id="7537393"><a href="/gostd/net/http/requestwrite_test.go.html#7537267">sraw</a></span><span class="op" id="7537397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7537403">continue</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7537415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7537419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7537422">}</span><br>
<span class="lineno"></span><span class="op" id="7537424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="keyword" id="7537427">type</span>&nbsp;<span class="ident" id="7537432">closeChecker</span>&nbsp;<span class="keyword" id="7537445">struct</span>&nbsp;<span class="op" id="7537452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7537455"><a href="/gostd/net/http/requestwrite_test.go.html#7525179">io</a></span><span class="op" id="7537457">.</span><span class="ident" id="7537458"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7537466">closed</span>&nbsp;<span class="builtintype" id="7537473">bool</span><br>
<span class="lineno"></span><span class="op" id="7537478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span><span class="keyword" id="7537481">func</span>&nbsp;<span class="op" id="7537486">(</span><span class="ident" id="7537487">rc</span>&nbsp;<span class="op" id="7537490">*</span><span class="ident" id="7537491"><a href="/gostd/net/http/requestwrite_test.go.html#7537432">closeChecker</a></span><span class="op" id="7537503">)</span>&nbsp;<span class="ident" id="7537505">Close</span><span class="op" id="7537510">(</span><span class="op" id="7537511">)</span>&nbsp;<span class="builtintype" id="7537513">error</span>&nbsp;<span class="op" id="7537519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7537522"><a href="/gostd/net/http/requestwrite_test.go.html#7537487">rc</a></span><span class="op" id="7537524">.</span><span class="ident" id="7537525"><a href="/gostd/net/http/requestwrite_test.go.html#7537466">closed</a></span>&nbsp;<span class="op" id="7537532">=</span>&nbsp;<span class="builtintype" id="7537534">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7537540">return</span>&nbsp;<span class="builtintype" id="7537547">nil</span><br>
<span class="lineno"></span><span class="op" id="7537551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="comment" id="7537554">//&nbsp;TestRequestWriteClosesBody&nbsp;tests&nbsp;that&nbsp;Request.Write&nbsp;does&nbsp;close&nbsp;its&nbsp;request.Body.</span><br>
<span class="lineno"></span><span class="comment" id="7537638">//&nbsp;It&nbsp;also&nbsp;indirectly&nbsp;tests&nbsp;NewRequest&nbsp;and&nbsp;that&nbsp;it&nbsp;doesn&#39;t&nbsp;wrap&nbsp;an&nbsp;existing&nbsp;Closer</span><br>
<span class="lineno"></span><span class="comment" id="7537721">//&nbsp;inside&nbsp;a&nbsp;NopCloser,&nbsp;and&nbsp;that&nbsp;it&nbsp;serializes&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno"></span><span class="keyword" id="7537781">func</span>&nbsp;<span class="ident" id="7537786">TestRequestWriteClosesBody</span><span class="op" id="7537812">(</span><span class="ident" id="7537813">t</span>&nbsp;<span class="op" id="7537815">*</span><span class="ident" id="7537816"><a href="/gostd/net/http/requestwrite_test.go.html#7525220">testing</a></span><span class="op" id="7537823">.</span><span class="ident" id="7537824"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7537825">)</span>&nbsp;<span class="op" id="7537827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7537830">rc</span>&nbsp;<span class="op" id="7537833">:=</span>&nbsp;<span class="op" id="7537836">&amp;</span><span class="ident" id="7537837"><a href="/gostd/net/http/requestwrite_test.go.html#7537432">closeChecker</a></span><span class="op" id="7537849">{</span><span class="ident" id="7537850"><a href="/gostd/net/http/requestwrite_test.go.html#7537455">Reader</a></span><span class="op" id="7537856">:</span>&nbsp;<span class="ident" id="7537858"><a href="/gostd/net/http/requestwrite_test.go.html#7525209">strings</a></span><span class="op" id="7537865">.</span><span class="ident" id="7537866"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7537875">(</span><span class="string" id="7537876">&#34;my&nbsp;body&#34;</span><span class="op" id="7537885">)</span><span class="op" id="7537886">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7537889">req</span><span class="op" id="7537892">,</span>&nbsp;<span class="ident" id="7537894">_</span>&nbsp;<span class="op" id="7537896">:=</span>&nbsp;<span class="ident" id="7537899"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="7537909">(</span><span class="string" id="7537910">&#34;POST&#34;</span><span class="op" id="7537916">,</span>&nbsp;<span class="string" id="7537918">&#34;http://foo.com/&#34;</span><span class="op" id="7537935">,</span>&nbsp;<span class="ident" id="7537937"><a href="/gostd/net/http/requestwrite_test.go.html#7537830">rc</a></span><span class="op" id="7537939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7537942">if</span>&nbsp;<span class="ident" id="7537945"><a href="/gostd/net/http/requestwrite_test.go.html#7537889">req</a></span><span class="op" id="7537948">.</span><span class="ident" id="7537949"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span>&nbsp;<span class="op" id="7537963">!=</span>&nbsp;<span class="num" id="7537966">0</span>&nbsp;<span class="op" id="7537968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7537972"><a href="/gostd/net/http/requestwrite_test.go.html#7537813">t</a></span><span class="op" id="7537973">.</span><span class="ident" id="7537974"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7537980">(</span><span class="string" id="7537981">&#34;got&nbsp;req.ContentLength&nbsp;%d,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7538015">,</span>&nbsp;<span class="ident" id="7538017"><a href="/gostd/net/http/requestwrite_test.go.html#7537889">req</a></span><span class="op" id="7538020">.</span><span class="ident" id="7538021"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="7538034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7538037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7538040">buf</span>&nbsp;<span class="op" id="7538044">:=</span>&nbsp;<span class="builtinfunc" id="7538047">new</span><span class="op" id="7538050">(</span><span class="ident" id="7538051"><a href="/gostd/net/http/requestwrite_test.go.html#7525153">bytes</a></span><span class="op" id="7538056">.</span><span class="ident" id="7538057"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="7538063">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7538066"><a href="/gostd/net/http/requestwrite_test.go.html#7537889">req</a></span><span class="op" id="7538069">.</span><span class="ident" id="7538070"><a href="/gostd/net/http/request.go.html#4146008">Write</a></span><span class="op" id="7538075">(</span><span class="ident" id="7538076"><a href="/gostd/net/http/requestwrite_test.go.html#7538040">buf</a></span><span class="op" id="7538079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7538082">if</span>&nbsp;<span class="op" id="7538085">!</span><span class="ident" id="7538086"><a href="/gostd/net/http/requestwrite_test.go.html#7537830">rc</a></span><span class="op" id="7538088">.</span><span class="ident" id="7538089"><a href="/gostd/net/http/requestwrite_test.go.html#7537466">closed</a></span>&nbsp;<span class="op" id="7538096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7538100"><a href="/gostd/net/http/requestwrite_test.go.html#7537813">t</a></span><span class="op" id="7538101">.</span><span class="ident" id="7538102"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7538107">(</span><span class="string" id="7538108">&#34;body&nbsp;not&nbsp;closed&nbsp;after&nbsp;write&#34;</span><span class="op" id="7538137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7538140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7538143">expected</span>&nbsp;<span class="op" id="7538152">:=</span>&nbsp;<span class="string" id="7538155">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7538177">+</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7538181">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="7538201">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7538205">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7538243">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7538247">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7538284">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7538288">//&nbsp;TODO:&nbsp;currently&nbsp;we&nbsp;don&#39;t&nbsp;buffer&nbsp;before&nbsp;chunking,&nbsp;so&nbsp;we&nbsp;get&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7538354">//&nbsp;single&nbsp;&#34;m&#34;&nbsp;chunk&nbsp;before&nbsp;the&nbsp;other&nbsp;chunks,&nbsp;as&nbsp;this&nbsp;was&nbsp;the&nbsp;1-byte</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7538424">//&nbsp;read&nbsp;from&nbsp;our&nbsp;MultiReader&nbsp;where&nbsp;we&nbsp;stiched&nbsp;the&nbsp;Body&nbsp;back&nbsp;together</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7538495">//&nbsp;after&nbsp;sniffing&nbsp;whether&nbsp;the&nbsp;Body&nbsp;was&nbsp;0&nbsp;bytes&nbsp;or&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7538552"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7538557">(</span><span class="string" id="7538558">&#34;m&#34;</span><span class="op" id="7538561">)</span>&nbsp;<span class="op" id="7538563">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7538567"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7538572">(</span><span class="string" id="7538573">&#34;y&nbsp;body&#34;</span><span class="op" id="7538581">)</span>&nbsp;<span class="op" id="7538583">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7538587"><a href="/gostd/net/http/requestwrite_test.go.html#7538704">chunk</a></span><span class="op" id="7538592">(</span><span class="string" id="7538593">&#34;&#34;</span><span class="op" id="7538595">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7538598">if</span>&nbsp;<span class="ident" id="7538601"><a href="/gostd/net/http/requestwrite_test.go.html#7538040">buf</a></span><span class="op" id="7538604">.</span><span class="ident" id="7538605"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7538611">(</span><span class="op" id="7538612">)</span>&nbsp;<span class="op" id="7538614">!=</span>&nbsp;<span class="ident" id="7538617"><a href="/gostd/net/http/requestwrite_test.go.html#7538143">expected</a></span>&nbsp;<span class="op" id="7538626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7538630"><a href="/gostd/net/http/requestwrite_test.go.html#7537813">t</a></span><span class="op" id="7538631">.</span><span class="ident" id="7538632"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7538638">(</span><span class="string" id="7538639">&#34;write:\n&nbsp;got:&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="7538667">,</span>&nbsp;<span class="ident" id="7538669"><a href="/gostd/net/http/requestwrite_test.go.html#7538040">buf</a></span><span class="op" id="7538672">.</span><span class="ident" id="7538673"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7538679">(</span><span class="op" id="7538680">)</span><span class="op" id="7538681">,</span>&nbsp;<span class="ident" id="7538683"><a href="/gostd/net/http/requestwrite_test.go.html#7538143">expected</a></span><span class="op" id="7538691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7538694">}</span><br>
<span class="lineno"></span><span class="op" id="7538696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="7538699">func</span>&nbsp;<span class="ident" id="7538704">chunk</span><span class="op" id="7538709">(</span><span class="ident" id="7538710">s</span>&nbsp;<span class="builtintype" id="7538712">string</span><span class="op" id="7538718">)</span>&nbsp;<span class="builtintype" id="7538720">string</span>&nbsp;<span class="op" id="7538727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7538730">return</span>&nbsp;<span class="ident" id="7538737"><a href="/gostd/net/http/requestwrite_test.go.html#7525172">fmt</a></span><span class="op" id="7538740">.</span><span class="ident" id="7538741"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7538748">(</span><span class="string" id="7538749">&#34;%x\r\n%s\r\n&#34;</span><span class="op" id="7538763">,</span>&nbsp;<span class="builtinfunc" id="7538765">len</span><span class="op" id="7538768">(</span><span class="ident" id="7538769"><a href="/gostd/net/http/requestwrite_test.go.html#7538710">s</a></span><span class="op" id="7538770">)</span><span class="op" id="7538771">,</span>&nbsp;<span class="ident" id="7538773"><a href="/gostd/net/http/requestwrite_test.go.html#7538710">s</a></span><span class="op" id="7538774">)</span><br>
<span class="lineno"></span><span class="op" id="7538776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7538779">func</span>&nbsp;<span class="ident" id="7538784">mustParseURL</span><span class="op" id="7538796">(</span><span class="ident" id="7538797">s</span>&nbsp;<span class="builtintype" id="7538799">string</span><span class="op" id="7538805">)</span>&nbsp;<span class="op" id="7538807">*</span><span class="ident" id="7538808"><a href="/gostd/net/http/requestwrite_test.go.html#7525198">url</a></span><span class="op" id="7538811">.</span><span class="ident" id="7538812"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span>&nbsp;<span class="op" id="7538816">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7538819">u</span><span class="op" id="7538820">,</span>&nbsp;<span class="ident" id="7538822">err</span>&nbsp;<span class="op" id="7538826">:=</span>&nbsp;<span class="ident" id="7538829"><a href="/gostd/net/http/requestwrite_test.go.html#7525198">url</a></span><span class="op" id="7538832">.</span><span class="ident" id="7538833"><a href="/gostd/net/url/url.go.html#3754169">Parse</a></span><span class="op" id="7538838">(</span><span class="ident" id="7538839"><a href="/gostd/net/http/requestwrite_test.go.html#7538797">s</a></span><span class="op" id="7538840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7538843">if</span>&nbsp;<span class="ident" id="7538846"><a href="/gostd/net/http/requestwrite_test.go.html#7538822">err</a></span>&nbsp;<span class="op" id="7538850">!=</span>&nbsp;<span class="builtintype" id="7538853">nil</span>&nbsp;<span class="op" id="7538857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7538861">panic</span><span class="op" id="7538866">(</span><span class="ident" id="7538867"><a href="/gostd/net/http/requestwrite_test.go.html#7525172">fmt</a></span><span class="op" id="7538870">.</span><span class="ident" id="7538871"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7538878">(</span><span class="string" id="7538879">&#34;Error&nbsp;parsing&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7538905">,</span>&nbsp;<span class="ident" id="7538907"><a href="/gostd/net/http/requestwrite_test.go.html#7538797">s</a></span><span class="op" id="7538908">,</span>&nbsp;<span class="ident" id="7538910"><a href="/gostd/net/http/requestwrite_test.go.html#7538822">err</a></span><span class="op" id="7538913">)</span><span class="op" id="7538914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7538917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7538920">return</span>&nbsp;<span class="ident" id="7538927"><a href="/gostd/net/http/requestwrite_test.go.html#7538819">u</a></span><br>
<span class="lineno">565</span><span class="op" id="7538929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7538932">type</span>&nbsp;<span class="ident" id="7538937">writerFunc</span>&nbsp;<span class="keyword" id="7538948">func</span><span class="op" id="7538952">(</span><span class="op" id="7538953">[</span><span class="op" id="7538954">]</span><span class="builtintype" id="7538955">byte</span><span class="op" id="7538959">)</span>&nbsp;<span class="op" id="7538961">(</span><span class="builtintype" id="7538962">int</span><span class="op" id="7538965">,</span>&nbsp;<span class="builtintype" id="7538967">error</span><span class="op" id="7538972">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7538975">func</span>&nbsp;<span class="op" id="7538980">(</span><span class="ident" id="7538981">f</span>&nbsp;<span class="ident" id="7538983"><a href="/gostd/net/http/requestwrite_test.go.html#7538937">writerFunc</a></span><span class="op" id="7538993">)</span>&nbsp;<span class="ident" id="7538995">Write</span><span class="op" id="7539000">(</span><span class="ident" id="7539001">p</span>&nbsp;<span class="op" id="7539003">[</span><span class="op" id="7539004">]</span><span class="builtintype" id="7539005">byte</span><span class="op" id="7539009">)</span>&nbsp;<span class="op" id="7539011">(</span><span class="builtintype" id="7539012">int</span><span class="op" id="7539015">,</span>&nbsp;<span class="builtintype" id="7539017">error</span><span class="op" id="7539022">)</span>&nbsp;<span class="op" id="7539024">{</span>&nbsp;<span class="keyword" id="7539026">return</span>&nbsp;<span class="ident" id="7539033"><a href="/gostd/net/http/requestwrite_test.go.html#7538981">f</a></span><span class="op" id="7539034">(</span><span class="ident" id="7539035"><a href="/gostd/net/http/requestwrite_test.go.html#7539001">p</a></span><span class="op" id="7539036">)</span>&nbsp;<span class="op" id="7539038">}</span><br>
<span class="lineno">570</span><br>
<span class="lineno"></span><span class="comment" id="7539041">//&nbsp;TestRequestWriteError&nbsp;tests&nbsp;the&nbsp;Write&nbsp;err&nbsp;!=&nbsp;nil&nbsp;checks&nbsp;in&nbsp;(*Request).write.</span><br>
<span class="lineno"></span><span class="keyword" id="7539121">func</span>&nbsp;<span class="ident" id="7539126">TestRequestWriteError</span><span class="op" id="7539147">(</span><span class="ident" id="7539148">t</span>&nbsp;<span class="op" id="7539150">*</span><span class="ident" id="7539151"><a href="/gostd/net/http/requestwrite_test.go.html#7525220">testing</a></span><span class="op" id="7539158">.</span><span class="ident" id="7539159"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7539160">)</span>&nbsp;<span class="op" id="7539162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539165">failAfter</span><span class="op" id="7539174">,</span>&nbsp;<span class="ident" id="7539176">writeCount</span>&nbsp;<span class="op" id="7539187">:=</span>&nbsp;<span class="num" id="7539190">0</span><span class="op" id="7539191">,</span>&nbsp;<span class="num" id="7539193">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539196">errFail</span>&nbsp;<span class="op" id="7539204">:=</span>&nbsp;<span class="ident" id="7539207"><a href="/gostd/net/http/requestwrite_test.go.html#7525162">errors</a></span><span class="op" id="7539213">.</span><span class="ident" id="7539214"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="7539217">(</span><span class="string" id="7539218">&#34;fake&nbsp;write&nbsp;failure&#34;</span><span class="op" id="7539238">)</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7539242">//&nbsp;w&nbsp;is&nbsp;the&nbsp;buffered&nbsp;io.Writer&nbsp;to&nbsp;write&nbsp;the&nbsp;request&nbsp;to.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7539303">//&nbsp;fails&nbsp;exactly&nbsp;once&nbsp;on&nbsp;its&nbsp;Nth&nbsp;Write&nbsp;call,&nbsp;as&nbsp;controlled&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7539366">//&nbsp;failAfter.&nbsp;It&nbsp;also&nbsp;tracks&nbsp;the&nbsp;number&nbsp;of&nbsp;calls&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7539419">//&nbsp;writeCount.</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539435">w</span>&nbsp;<span class="op" id="7539437">:=</span>&nbsp;<span class="keyword" id="7539440">struct</span>&nbsp;<span class="op" id="7539447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539451"><a href="/gostd/net/http/requestwrite_test.go.html#7525179">io</a></span><span class="op" id="7539453">.</span><span class="ident" id="7539454"><a href="/gostd/io/io.go.html#1427455">ByteWriter</a></span>&nbsp;<span class="comment" id="7539465">//&nbsp;to&nbsp;avoid&nbsp;being&nbsp;wrapped&nbsp;by&nbsp;a&nbsp;bufio.Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539511"><a href="/gostd/net/http/requestwrite_test.go.html#7525179">io</a></span><span class="op" id="7539513">.</span><span class="ident" id="7539514"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7539522">}</span><span class="op" id="7539523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7539527">nil</span><span class="op" id="7539530">,</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539534"><a href="/gostd/net/http/requestwrite_test.go.html#7538937">writerFunc</a></span><span class="op" id="7539544">(</span><span class="keyword" id="7539545">func</span><span class="op" id="7539549">(</span><span class="ident" id="7539550">p</span>&nbsp;<span class="op" id="7539552">[</span><span class="op" id="7539553">]</span><span class="builtintype" id="7539554">byte</span><span class="op" id="7539558">)</span>&nbsp;<span class="op" id="7539560">(</span><span class="ident" id="7539561">n</span>&nbsp;<span class="builtintype" id="7539563">int</span><span class="op" id="7539566">,</span>&nbsp;<span class="ident" id="7539568">err</span>&nbsp;<span class="builtintype" id="7539572">error</span><span class="op" id="7539577">)</span>&nbsp;<span class="op" id="7539579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539584"><a href="/gostd/net/http/requestwrite_test.go.html#7539176">writeCount</a></span><span class="op" id="7539594">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7539600">if</span>&nbsp;<span class="ident" id="7539603"><a href="/gostd/net/http/requestwrite_test.go.html#7539165">failAfter</a></span>&nbsp;<span class="op" id="7539613">==</span>&nbsp;<span class="num" id="7539616">0</span>&nbsp;<span class="op" id="7539618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539624"><a href="/gostd/net/http/requestwrite_test.go.html#7539568">err</a></span>&nbsp;<span class="op" id="7539628">=</span>&nbsp;<span class="ident" id="7539630"><a href="/gostd/net/http/requestwrite_test.go.html#7539196">errFail</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7539641">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539646"><a href="/gostd/net/http/requestwrite_test.go.html#7539165">failAfter</a></span><span class="op" id="7539655">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7539661">return</span>&nbsp;<span class="builtinfunc" id="7539668">len</span><span class="op" id="7539671">(</span><span class="ident" id="7539672"><a href="/gostd/net/http/requestwrite_test.go.html#7539550">p</a></span><span class="op" id="7539673">)</span><span class="op" id="7539674">,</span>&nbsp;<span class="ident" id="7539676"><a href="/gostd/net/http/requestwrite_test.go.html#7539568">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7539682">}</span><span class="op" id="7539683">)</span><span class="op" id="7539684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7539687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539691">req</span><span class="op" id="7539694">,</span>&nbsp;<span class="ident" id="7539696">_</span>&nbsp;<span class="op" id="7539698">:=</span>&nbsp;<span class="ident" id="7539701"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="7539711">(</span><span class="string" id="7539712">&#34;GET&#34;</span><span class="op" id="7539717">,</span>&nbsp;<span class="string" id="7539719">&#34;http://example.com/&#34;</span><span class="op" id="7539740">,</span>&nbsp;<span class="builtintype" id="7539742">nil</span><span class="op" id="7539745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7539748">const</span>&nbsp;<span class="ident" id="7539754">writeCalls</span>&nbsp;<span class="op" id="7539765">=</span>&nbsp;<span class="num" id="7539767">4</span>&nbsp;<span class="comment" id="7539769">//&nbsp;number&nbsp;of&nbsp;Write&nbsp;calls&nbsp;in&nbsp;current&nbsp;implementation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539821">sawGood</span>&nbsp;<span class="op" id="7539829">:=</span>&nbsp;<span class="builtintype" id="7539832">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7539839">for</span>&nbsp;<span class="ident" id="7539843">n</span>&nbsp;<span class="op" id="7539845">:=</span>&nbsp;<span class="num" id="7539848">0</span><span class="op" id="7539849">;</span>&nbsp;<span class="ident" id="7539851"><a href="/gostd/net/http/requestwrite_test.go.html#7539843">n</a></span>&nbsp;<span class="op" id="7539853">&lt;=</span>&nbsp;<span class="ident" id="7539856"><a href="/gostd/net/http/requestwrite_test.go.html#7539754">writeCalls</a></span><span class="op" id="7539866">+</span><span class="num" id="7539867">2</span><span class="op" id="7539868">;</span>&nbsp;<span class="ident" id="7539870"><a href="/gostd/net/http/requestwrite_test.go.html#7539843">n</a></span><span class="op" id="7539871">++</span>&nbsp;<span class="op" id="7539874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539878"><a href="/gostd/net/http/requestwrite_test.go.html#7539165">failAfter</a></span>&nbsp;<span class="op" id="7539888">=</span>&nbsp;<span class="ident" id="7539890"><a href="/gostd/net/http/requestwrite_test.go.html#7539843">n</a></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539894"><a href="/gostd/net/http/requestwrite_test.go.html#7539176">writeCount</a></span>&nbsp;<span class="op" id="7539905">=</span>&nbsp;<span class="num" id="7539907">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539911">err</span>&nbsp;<span class="op" id="7539915">:=</span>&nbsp;<span class="ident" id="7539918"><a href="/gostd/net/http/requestwrite_test.go.html#7539691">req</a></span><span class="op" id="7539921">.</span><span class="ident" id="7539922"><a href="/gostd/net/http/request.go.html#4146008">Write</a></span><span class="op" id="7539927">(</span><span class="ident" id="7539928"><a href="/gostd/net/http/requestwrite_test.go.html#7539435">w</a></span><span class="op" id="7539929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7539933">var</span>&nbsp;<span class="ident" id="7539937">wantErr</span>&nbsp;<span class="builtintype" id="7539945">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7539953">if</span>&nbsp;<span class="ident" id="7539956"><a href="/gostd/net/http/requestwrite_test.go.html#7539843">n</a></span>&nbsp;<span class="op" id="7539958">&lt;</span>&nbsp;<span class="ident" id="7539960"><a href="/gostd/net/http/requestwrite_test.go.html#7539754">writeCalls</a></span>&nbsp;<span class="op" id="7539971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7539976"><a href="/gostd/net/http/requestwrite_test.go.html#7539937">wantErr</a></span>&nbsp;<span class="op" id="7539984">=</span>&nbsp;<span class="ident" id="7539986"><a href="/gostd/net/http/requestwrite_test.go.html#7539196">errFail</a></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7539996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7540000">if</span>&nbsp;<span class="ident" id="7540003"><a href="/gostd/net/http/requestwrite_test.go.html#7539911">err</a></span>&nbsp;<span class="op" id="7540007">!=</span>&nbsp;<span class="ident" id="7540010"><a href="/gostd/net/http/requestwrite_test.go.html#7539937">wantErr</a></span>&nbsp;<span class="op" id="7540018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7540023"><a href="/gostd/net/http/requestwrite_test.go.html#7539148">t</a></span><span class="op" id="7540024">.</span><span class="ident" id="7540025"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7540031">(</span><span class="string" id="7540032">&#34;for&nbsp;fail-after&nbsp;%d&nbsp;Writes,&nbsp;err&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7540077">,</span>&nbsp;<span class="ident" id="7540079"><a href="/gostd/net/http/requestwrite_test.go.html#7539843">n</a></span><span class="op" id="7540080">,</span>&nbsp;<span class="ident" id="7540082"><a href="/gostd/net/http/requestwrite_test.go.html#7539911">err</a></span><span class="op" id="7540085">,</span>&nbsp;<span class="ident" id="7540087"><a href="/gostd/net/http/requestwrite_test.go.html#7539937">wantErr</a></span><span class="op" id="7540094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7540099">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7540110">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7540114">if</span>&nbsp;<span class="ident" id="7540117"><a href="/gostd/net/http/requestwrite_test.go.html#7539911">err</a></span>&nbsp;<span class="op" id="7540121">==</span>&nbsp;<span class="builtintype" id="7540124">nil</span>&nbsp;<span class="op" id="7540128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7540133"><a href="/gostd/net/http/requestwrite_test.go.html#7539821">sawGood</a></span>&nbsp;<span class="op" id="7540141">=</span>&nbsp;<span class="builtintype" id="7540143">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7540151">if</span>&nbsp;<span class="ident" id="7540154"><a href="/gostd/net/http/requestwrite_test.go.html#7539176">writeCount</a></span>&nbsp;<span class="op" id="7540165">!=</span>&nbsp;<span class="ident" id="7540168"><a href="/gostd/net/http/requestwrite_test.go.html#7539754">writeCalls</a></span>&nbsp;<span class="op" id="7540179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7540185"><a href="/gostd/net/http/requestwrite_test.go.html#7539148">t</a></span><span class="op" id="7540186">.</span><span class="ident" id="7540187"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7540193">(</span><span class="string" id="7540194">&#34;writeCalls&nbsp;constant&nbsp;is&nbsp;outdated&nbsp;in&nbsp;test&#34;</span><span class="op" id="7540235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7540240">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7540244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7540248">if</span>&nbsp;<span class="ident" id="7540251"><a href="/gostd/net/http/requestwrite_test.go.html#7539176">writeCount</a></span>&nbsp;<span class="op" id="7540262">&gt;</span>&nbsp;<span class="ident" id="7540264"><a href="/gostd/net/http/requestwrite_test.go.html#7539754">writeCalls</a></span>&nbsp;<span class="op" id="7540275">||</span>&nbsp;<span class="ident" id="7540278"><a href="/gostd/net/http/requestwrite_test.go.html#7539176">writeCount</a></span>&nbsp;<span class="op" id="7540289">&gt;</span>&nbsp;<span class="ident" id="7540291"><a href="/gostd/net/http/requestwrite_test.go.html#7539843">n</a></span><span class="op" id="7540292">+</span><span class="num" id="7540293">1</span>&nbsp;<span class="op" id="7540295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7540300"><a href="/gostd/net/http/requestwrite_test.go.html#7539148">t</a></span><span class="op" id="7540301">.</span><span class="ident" id="7540302"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7540308">(</span><span class="string" id="7540309">&#34;for&nbsp;fail-after&nbsp;%d,&nbsp;saw&nbsp;unexpectedly&nbsp;high&nbsp;(%d)&nbsp;write&nbsp;calls&#34;</span><span class="op" id="7540368">,</span>&nbsp;<span class="ident" id="7540370"><a href="/gostd/net/http/requestwrite_test.go.html#7539843">n</a></span><span class="op" id="7540371">,</span>&nbsp;<span class="ident" id="7540373"><a href="/gostd/net/http/requestwrite_test.go.html#7539176">writeCount</a></span><span class="op" id="7540383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7540387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7540390">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7540393">if</span>&nbsp;<span class="op" id="7540396">!</span><span class="ident" id="7540397"><a href="/gostd/net/http/requestwrite_test.go.html#7539821">sawGood</a></span>&nbsp;<span class="op" id="7540405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7540409"><a href="/gostd/net/http/requestwrite_test.go.html#7539148">t</a></span><span class="op" id="7540410">.</span><span class="ident" id="7540411"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7540417">(</span><span class="string" id="7540418">&#34;writeCalls&nbsp;constant&nbsp;is&nbsp;outdated&nbsp;in&nbsp;test&#34;</span><span class="op" id="7540459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7540462">}</span><br>
<span class="lineno"></span><span class="op" id="7540464">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
