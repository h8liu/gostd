<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7786150">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7786206">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7786260">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7786311">package</span>&nbsp;<span class="ident" id="7786319">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7786325">import</span>&nbsp;<span class="op" id="7786332">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786335">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786344">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786355">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786366">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7786373">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7786376">var</span>&nbsp;<span class="ident" id="7786380">headerWriteTests</span>&nbsp;<span class="op" id="7786397">=</span>&nbsp;<span class="op" id="7786399">[</span><span class="op" id="7786400">]</span><span class="keyword" id="7786401">struct</span>&nbsp;<span class="op" id="7786408">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7786411">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7786420">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7786428">exclude</span>&nbsp;&nbsp;<span class="keyword" id="7786437">map</span><span class="op" id="7786440">[</span><span class="builtintype" id="7786441">string</span><span class="op" id="7786447">]</span><span class="builtintype" id="7786448">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7786454">expected</span>&nbsp;<span class="builtintype" id="7786463">string</span><br>
<span class="lineno"></span><span class="op" id="7786470">}</span><span class="op" id="7786471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786474">{</span><span class="ident" id="7786475">Header</span><span class="op" id="7786481">{</span><span class="op" id="7786482">}</span><span class="op" id="7786483">,</span>&nbsp;<span class="ident" id="7786485">nil</span><span class="op" id="7786488">,</span>&nbsp;<span class="string" id="7786490">&#34;&#34;</span><span class="op" id="7786492">}</span><span class="op" id="7786493">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7786500">Header</span><span class="op" id="7786506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786511">&#34;Content-Type&#34;</span><span class="op" id="7786525">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7786529">{</span><span class="string" id="7786530">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="7786556">}</span><span class="op" id="7786557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786562">&#34;Content-Length&#34;</span><span class="op" id="7786578">:</span>&nbsp;<span class="op" id="7786580">{</span><span class="string" id="7786581">&#34;0&#34;</span><span class="op" id="7786584">}</span><span class="op" id="7786585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786589">}</span><span class="op" id="7786590">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7786594">nil</span><span class="op" id="7786597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786601">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="7786666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786669">}</span><span class="op" id="7786670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7786677">Header</span><span class="op" id="7786683">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786688">&#34;Content-Length&#34;</span><span class="op" id="7786704">:</span>&nbsp;<span class="op" id="7786706">{</span><span class="string" id="7786707">&#34;0&#34;</span><span class="op" id="7786710">,</span>&nbsp;<span class="string" id="7786712">&#34;1&#34;</span><span class="op" id="7786715">,</span>&nbsp;<span class="string" id="7786717">&#34;2&#34;</span><span class="op" id="7786720">}</span><span class="op" id="7786721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786725">}</span><span class="op" id="7786726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7786730">nil</span><span class="op" id="7786733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786737">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="7786802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786805">}</span><span class="op" id="7786806">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7786813">Header</span><span class="op" id="7786819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786824">&#34;Expires&#34;</span><span class="op" id="7786833">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7786844">{</span><span class="string" id="7786845">&#34;-1&#34;</span><span class="op" id="7786849">}</span><span class="op" id="7786850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786855">&#34;Content-Length&#34;</span><span class="op" id="7786871">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7786875">{</span><span class="string" id="7786876">&#34;0&#34;</span><span class="op" id="7786879">}</span><span class="op" id="7786880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786885">&#34;Content-Encoding&#34;</span><span class="op" id="7786903">:</span>&nbsp;<span class="op" id="7786905">{</span><span class="string" id="7786906">&#34;gzip&#34;</span><span class="op" id="7786912">}</span><span class="op" id="7786913">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786917">}</span><span class="op" id="7786918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7786922">map</span><span class="op" id="7786925">[</span><span class="builtintype" id="7786926">string</span><span class="op" id="7786932">]</span><span class="builtintype" id="7786933">bool</span><span class="op" id="7786937">{</span><span class="string" id="7786938">&#34;Content-Length&#34;</span><span class="op" id="7786954">:</span>&nbsp;<span class="builtintype" id="7786956">true</span><span class="op" id="7786960">}</span><span class="op" id="7786961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786965">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7787008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787011">}</span><span class="op" id="7787012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787015">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7787019">Header</span><span class="op" id="7787025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787030">&#34;Expires&#34;</span><span class="op" id="7787039">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7787050">{</span><span class="string" id="7787051">&#34;-1&#34;</span><span class="op" id="7787055">}</span><span class="op" id="7787056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787061">&#34;Content-Length&#34;</span><span class="op" id="7787077">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7787081">{</span><span class="string" id="7787082">&#34;0&#34;</span><span class="op" id="7787085">,</span>&nbsp;<span class="string" id="7787087">&#34;1&#34;</span><span class="op" id="7787090">,</span>&nbsp;<span class="string" id="7787092">&#34;2&#34;</span><span class="op" id="7787095">}</span><span class="op" id="7787096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787101">&#34;Content-Encoding&#34;</span><span class="op" id="7787119">:</span>&nbsp;<span class="op" id="7787121">{</span><span class="string" id="7787122">&#34;gzip&#34;</span><span class="op" id="7787128">}</span><span class="op" id="7787129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787133">}</span><span class="op" id="7787134">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7787138">map</span><span class="op" id="7787141">[</span><span class="builtintype" id="7787142">string</span><span class="op" id="7787148">]</span><span class="builtintype" id="7787149">bool</span><span class="op" id="7787153">{</span><span class="string" id="7787154">&#34;Content-Length&#34;</span><span class="op" id="7787170">:</span>&nbsp;<span class="builtintype" id="7787172">true</span><span class="op" id="7787176">}</span><span class="op" id="7787177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787181">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7787224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787227">}</span><span class="op" id="7787228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7787235">Header</span><span class="op" id="7787241">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787246">&#34;Expires&#34;</span><span class="op" id="7787255">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7787266">{</span><span class="string" id="7787267">&#34;-1&#34;</span><span class="op" id="7787271">}</span><span class="op" id="7787272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787277">&#34;Content-Length&#34;</span><span class="op" id="7787293">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7787297">{</span><span class="string" id="7787298">&#34;0&#34;</span><span class="op" id="7787301">}</span><span class="op" id="7787302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787307">&#34;Content-Encoding&#34;</span><span class="op" id="7787325">:</span>&nbsp;<span class="op" id="7787327">{</span><span class="string" id="7787328">&#34;gzip&#34;</span><span class="op" id="7787334">}</span><span class="op" id="7787335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787339">}</span><span class="op" id="7787340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7787344">map</span><span class="op" id="7787347">[</span><span class="builtintype" id="7787348">string</span><span class="op" id="7787354">]</span><span class="builtintype" id="7787355">bool</span><span class="op" id="7787359">{</span><span class="string" id="7787360">&#34;Content-Length&#34;</span><span class="op" id="7787376">:</span>&nbsp;<span class="builtintype" id="7787378">true</span><span class="op" id="7787382">,</span>&nbsp;<span class="string" id="7787384">&#34;Expires&#34;</span><span class="op" id="7787393">:</span>&nbsp;<span class="builtintype" id="7787395">true</span><span class="op" id="7787399">,</span>&nbsp;<span class="string" id="7787401">&#34;Content-Encoding&#34;</span><span class="op" id="7787419">:</span>&nbsp;<span class="builtintype" id="7787421">true</span><span class="op" id="7787425">}</span><span class="op" id="7787426">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787430">&#34;&#34;</span><span class="op" id="7787432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787435">}</span><span class="op" id="7787436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7787443">Header</span><span class="op" id="7787449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787454">&#34;Nil&#34;</span><span class="op" id="7787459">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7787470">nil</span><span class="op" id="7787473">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787478">&#34;Empty&#34;</span><span class="op" id="7787485">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7787494">{</span><span class="op" id="7787495">}</span><span class="op" id="7787496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787501">&#34;Blank&#34;</span><span class="op" id="7787508">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7787517">{</span><span class="string" id="7787518">&#34;&#34;</span><span class="op" id="7787520">}</span><span class="op" id="7787521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787526">&#34;Double-Blank&#34;</span><span class="op" id="7787540">:</span>&nbsp;<span class="op" id="7787542">{</span><span class="string" id="7787543">&#34;&#34;</span><span class="op" id="7787545">,</span>&nbsp;<span class="string" id="7787547">&#34;&#34;</span><span class="op" id="7787549">}</span><span class="op" id="7787550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787554">}</span><span class="op" id="7787555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7787559">nil</span><span class="op" id="7787562">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787566">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="7787615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787618">}</span><span class="op" id="7787619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7787622">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7787696">Header</span><span class="op" id="7787702">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787707">&#34;k1&#34;</span><span class="op" id="7787711">:</span>&nbsp;<span class="op" id="7787713">{</span><span class="string" id="7787714">&#34;1a&#34;</span><span class="op" id="7787718">,</span>&nbsp;<span class="string" id="7787720">&#34;1b&#34;</span><span class="op" id="7787724">}</span><span class="op" id="7787725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787730">&#34;k2&#34;</span><span class="op" id="7787734">:</span>&nbsp;<span class="op" id="7787736">{</span><span class="string" id="7787737">&#34;2a&#34;</span><span class="op" id="7787741">,</span>&nbsp;<span class="string" id="7787743">&#34;2b&#34;</span><span class="op" id="7787747">}</span><span class="op" id="7787748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787753">&#34;k3&#34;</span><span class="op" id="7787757">:</span>&nbsp;<span class="op" id="7787759">{</span><span class="string" id="7787760">&#34;3a&#34;</span><span class="op" id="7787764">,</span>&nbsp;<span class="string" id="7787766">&#34;3b&#34;</span><span class="op" id="7787770">}</span><span class="op" id="7787771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787776">&#34;k4&#34;</span><span class="op" id="7787780">:</span>&nbsp;<span class="op" id="7787782">{</span><span class="string" id="7787783">&#34;4a&#34;</span><span class="op" id="7787787">,</span>&nbsp;<span class="string" id="7787789">&#34;4b&#34;</span><span class="op" id="7787793">}</span><span class="op" id="7787794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787799">&#34;k5&#34;</span><span class="op" id="7787803">:</span>&nbsp;<span class="op" id="7787805">{</span><span class="string" id="7787806">&#34;5a&#34;</span><span class="op" id="7787810">,</span>&nbsp;<span class="string" id="7787812">&#34;5b&#34;</span><span class="op" id="7787816">}</span><span class="op" id="7787817">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787822">&#34;k6&#34;</span><span class="op" id="7787826">:</span>&nbsp;<span class="op" id="7787828">{</span><span class="string" id="7787829">&#34;6a&#34;</span><span class="op" id="7787833">,</span>&nbsp;<span class="string" id="7787835">&#34;6b&#34;</span><span class="op" id="7787839">}</span><span class="op" id="7787840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787845">&#34;k7&#34;</span><span class="op" id="7787849">:</span>&nbsp;<span class="op" id="7787851">{</span><span class="string" id="7787852">&#34;7a&#34;</span><span class="op" id="7787856">,</span>&nbsp;<span class="string" id="7787858">&#34;7b&#34;</span><span class="op" id="7787862">}</span><span class="op" id="7787863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787868">&#34;k8&#34;</span><span class="op" id="7787872">:</span>&nbsp;<span class="op" id="7787874">{</span><span class="string" id="7787875">&#34;8a&#34;</span><span class="op" id="7787879">,</span>&nbsp;<span class="string" id="7787881">&#34;8b&#34;</span><span class="op" id="7787885">}</span><span class="op" id="7787886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787891">&#34;k9&#34;</span><span class="op" id="7787895">:</span>&nbsp;<span class="op" id="7787897">{</span><span class="string" id="7787898">&#34;9a&#34;</span><span class="op" id="7787902">,</span>&nbsp;<span class="string" id="7787904">&#34;9b&#34;</span><span class="op" id="7787908">}</span><span class="op" id="7787909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787913">}</span><span class="op" id="7787914">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7787918">map</span><span class="op" id="7787921">[</span><span class="builtintype" id="7787922">string</span><span class="op" id="7787928">]</span><span class="builtintype" id="7787929">bool</span><span class="op" id="7787933">{</span><span class="string" id="7787934">&#34;k5&#34;</span><span class="op" id="7787938">:</span>&nbsp;<span class="builtintype" id="7787940">true</span><span class="op" id="7787944">}</span><span class="op" id="7787945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7787949">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="7788012">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7788017">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="7788060">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7788065">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="7788127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788130">}</span><span class="op" id="7788131">,</span><br>
<span class="lineno">90</span><span class="op" id="7788133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7788136">func</span>&nbsp;<span class="ident" id="7788141">TestHeaderWrite</span><span class="op" id="7788156">(</span><span class="ident" id="7788157">t</span>&nbsp;<span class="op" id="7788159">*</span><span class="ident" id="7788160">testing</span><span class="op" id="7788167">.</span><span class="ident" id="7788168">T</span><span class="op" id="7788169">)</span>&nbsp;<span class="op" id="7788171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788174">var</span>&nbsp;<span class="ident" id="7788178">buf</span>&nbsp;<span class="ident" id="7788182">bytes</span><span class="op" id="7788187">.</span><span class="ident" id="7788188">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788196">for</span>&nbsp;<span class="ident" id="7788200">i</span><span class="op" id="7788201">,</span>&nbsp;<span class="ident" id="7788203">test</span>&nbsp;<span class="op" id="7788208">:=</span>&nbsp;<span class="keyword" id="7788211">range</span>&nbsp;<span class="ident" id="7788217">headerWriteTests</span>&nbsp;<span class="op" id="7788234">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788238">test</span><span class="op" id="7788242">.</span><span class="ident" id="7788243">h</span><span class="op" id="7788244">.</span><span class="ident" id="7788245">WriteSubset</span><span class="op" id="7788256">(</span><span class="op" id="7788257">&amp;</span><span class="ident" id="7788258">buf</span><span class="op" id="7788261">,</span>&nbsp;<span class="ident" id="7788263">test</span><span class="op" id="7788267">.</span><span class="ident" id="7788268">exclude</span><span class="op" id="7788275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788279">if</span>&nbsp;<span class="ident" id="7788282">buf</span><span class="op" id="7788285">.</span><span class="ident" id="7788286">String</span><span class="op" id="7788292">(</span><span class="op" id="7788293">)</span>&nbsp;<span class="op" id="7788295">!=</span>&nbsp;<span class="ident" id="7788298">test</span><span class="op" id="7788302">.</span><span class="ident" id="7788303">expected</span>&nbsp;<span class="op" id="7788312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788317">t</span><span class="op" id="7788318">.</span><span class="ident" id="7788319">Errorf</span><span class="op" id="7788325">(</span><span class="string" id="7788326">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="7788352">,</span>&nbsp;<span class="ident" id="7788354">i</span><span class="op" id="7788355">,</span>&nbsp;<span class="ident" id="7788357">buf</span><span class="op" id="7788360">.</span><span class="ident" id="7788361">String</span><span class="op" id="7788367">(</span><span class="op" id="7788368">)</span><span class="op" id="7788369">,</span>&nbsp;<span class="ident" id="7788371">test</span><span class="op" id="7788375">.</span><span class="ident" id="7788376">expected</span><span class="op" id="7788384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788392">buf</span><span class="op" id="7788395">.</span><span class="ident" id="7788396">Reset</span><span class="op" id="7788401">(</span><span class="op" id="7788402">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788405">}</span><br>
<span class="lineno"></span><span class="op" id="7788407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7788410">var</span>&nbsp;<span class="ident" id="7788414">parseTimeTests</span>&nbsp;<span class="op" id="7788429">=</span>&nbsp;<span class="op" id="7788431">[</span><span class="op" id="7788432">]</span><span class="keyword" id="7788433">struct</span>&nbsp;<span class="op" id="7788440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788443">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7788447">Header</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788455">err</span>&nbsp;<span class="builtintype" id="7788459">bool</span><br>
<span class="lineno"></span><span class="op" id="7788464">}</span><span class="op" id="7788465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788468">{</span><span class="ident" id="7788469">Header</span><span class="op" id="7788475">{</span><span class="string" id="7788476">&#34;Date&#34;</span><span class="op" id="7788482">:</span>&nbsp;<span class="op" id="7788484">{</span><span class="string" id="7788485">&#34;&#34;</span><span class="op" id="7788487">}</span><span class="op" id="7788488">}</span><span class="op" id="7788489">,</span>&nbsp;<span class="builtintype" id="7788491">true</span><span class="op" id="7788495">}</span><span class="op" id="7788496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788499">{</span><span class="ident" id="7788500">Header</span><span class="op" id="7788506">{</span><span class="string" id="7788507">&#34;Date&#34;</span><span class="op" id="7788513">:</span>&nbsp;<span class="op" id="7788515">{</span><span class="string" id="7788516">&#34;invalid&#34;</span><span class="op" id="7788525">}</span><span class="op" id="7788526">}</span><span class="op" id="7788527">,</span>&nbsp;<span class="builtintype" id="7788529">true</span><span class="op" id="7788533">}</span><span class="op" id="7788534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788537">{</span><span class="ident" id="7788538">Header</span><span class="op" id="7788544">{</span><span class="string" id="7788545">&#34;Date&#34;</span><span class="op" id="7788551">:</span>&nbsp;<span class="op" id="7788553">{</span><span class="string" id="7788554">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="7788581">}</span><span class="op" id="7788582">}</span><span class="op" id="7788583">,</span>&nbsp;<span class="builtintype" id="7788585">true</span><span class="op" id="7788589">}</span><span class="op" id="7788590">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788593">{</span><span class="ident" id="7788594">Header</span><span class="op" id="7788600">{</span><span class="string" id="7788601">&#34;Date&#34;</span><span class="op" id="7788607">:</span>&nbsp;<span class="op" id="7788609">{</span><span class="string" id="7788610">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7788641">}</span><span class="op" id="7788642">}</span><span class="op" id="7788643">,</span>&nbsp;<span class="builtintype" id="7788645">false</span><span class="op" id="7788650">}</span><span class="op" id="7788651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788654">{</span><span class="ident" id="7788655">Header</span><span class="op" id="7788661">{</span><span class="string" id="7788662">&#34;Date&#34;</span><span class="op" id="7788668">:</span>&nbsp;<span class="op" id="7788670">{</span><span class="string" id="7788671">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7788703">}</span><span class="op" id="7788704">}</span><span class="op" id="7788705">,</span>&nbsp;<span class="builtintype" id="7788707">false</span><span class="op" id="7788712">}</span><span class="op" id="7788713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788716">{</span><span class="ident" id="7788717">Header</span><span class="op" id="7788723">{</span><span class="string" id="7788724">&#34;Date&#34;</span><span class="op" id="7788730">:</span>&nbsp;<span class="op" id="7788732">{</span><span class="string" id="7788733">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="7788759">}</span><span class="op" id="7788760">}</span><span class="op" id="7788761">,</span>&nbsp;<span class="builtintype" id="7788763">false</span><span class="op" id="7788768">}</span><span class="op" id="7788769">,</span><br>
<span class="lineno"></span><span class="op" id="7788771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="7788774">func</span>&nbsp;<span class="ident" id="7788779">TestParseTime</span><span class="op" id="7788792">(</span><span class="ident" id="7788793">t</span>&nbsp;<span class="op" id="7788795">*</span><span class="ident" id="7788796">testing</span><span class="op" id="7788803">.</span><span class="ident" id="7788804">T</span><span class="op" id="7788805">)</span>&nbsp;<span class="op" id="7788807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788810">expect</span>&nbsp;<span class="op" id="7788817">:=</span>&nbsp;<span class="ident" id="7788820">time</span><span class="op" id="7788824">.</span><span class="ident" id="7788825">Date</span><span class="op" id="7788829">(</span><span class="num" id="7788830">1994</span><span class="op" id="7788834">,</span>&nbsp;<span class="num" id="7788836">11</span><span class="op" id="7788838">,</span>&nbsp;<span class="num" id="7788840">6</span><span class="op" id="7788841">,</span>&nbsp;<span class="num" id="7788843">8</span><span class="op" id="7788844">,</span>&nbsp;<span class="num" id="7788846">49</span><span class="op" id="7788848">,</span>&nbsp;<span class="num" id="7788850">37</span><span class="op" id="7788852">,</span>&nbsp;<span class="num" id="7788854">0</span><span class="op" id="7788855">,</span>&nbsp;<span class="ident" id="7788857">time</span><span class="op" id="7788861">.</span><span class="ident" id="7788862">UTC</span><span class="op" id="7788865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788868">for</span>&nbsp;<span class="ident" id="7788872">i</span><span class="op" id="7788873">,</span>&nbsp;<span class="ident" id="7788875">test</span>&nbsp;<span class="op" id="7788880">:=</span>&nbsp;<span class="keyword" id="7788883">range</span>&nbsp;<span class="ident" id="7788889">parseTimeTests</span>&nbsp;<span class="op" id="7788904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788908">d</span><span class="op" id="7788909">,</span>&nbsp;<span class="ident" id="7788911">err</span>&nbsp;<span class="op" id="7788915">:=</span>&nbsp;<span class="ident" id="7788918">ParseTime</span><span class="op" id="7788927">(</span><span class="ident" id="7788928">test</span><span class="op" id="7788932">.</span><span class="ident" id="7788933">h</span><span class="op" id="7788934">.</span><span class="ident" id="7788935">Get</span><span class="op" id="7788938">(</span><span class="string" id="7788939">&#34;Date&#34;</span><span class="op" id="7788945">)</span><span class="op" id="7788946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788950">if</span>&nbsp;<span class="ident" id="7788953">err</span>&nbsp;<span class="op" id="7788957">!=</span>&nbsp;<span class="ident" id="7788960">nil</span>&nbsp;<span class="op" id="7788964">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788969">if</span>&nbsp;<span class="op" id="7788972">!</span><span class="ident" id="7788973">test</span><span class="op" id="7788977">.</span><span class="ident" id="7788978">err</span>&nbsp;<span class="op" id="7788982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788988">t</span><span class="op" id="7788989">.</span><span class="ident" id="7788990">Errorf</span><span class="op" id="7788996">(</span><span class="string" id="7788997">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="7789017">,</span>&nbsp;<span class="ident" id="7789019">i</span><span class="op" id="7789020">,</span>&nbsp;<span class="ident" id="7789022">err</span><span class="op" id="7789025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7789035">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789046">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7789050">if</span>&nbsp;<span class="ident" id="7789053">test</span><span class="op" id="7789057">.</span><span class="ident" id="7789058">err</span>&nbsp;<span class="op" id="7789062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789067">t</span><span class="op" id="7789068">.</span><span class="ident" id="7789069">Errorf</span><span class="op" id="7789075">(</span><span class="string" id="7789076">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="7789096">,</span>&nbsp;<span class="ident" id="7789098">i</span><span class="op" id="7789099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7789104">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7789119">if</span>&nbsp;<span class="op" id="7789122">!</span><span class="ident" id="7789123">expect</span><span class="op" id="7789129">.</span><span class="ident" id="7789130">Equal</span><span class="op" id="7789135">(</span><span class="ident" id="7789136">d</span><span class="op" id="7789137">)</span>&nbsp;<span class="op" id="7789139">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789144">t</span><span class="op" id="7789145">.</span><span class="ident" id="7789146">Errorf</span><span class="op" id="7789152">(</span><span class="string" id="7789153">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7789179">,</span>&nbsp;<span class="ident" id="7789181">i</span><span class="op" id="7789182">,</span>&nbsp;<span class="ident" id="7789184">d</span><span class="op" id="7789185">,</span>&nbsp;<span class="ident" id="7789187">expect</span><span class="op" id="7789193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789200">}</span><br>
<span class="lineno"></span><span class="op" id="7789202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7789205">type</span>&nbsp;<span class="ident" id="7789210">hasTokenTest</span>&nbsp;<span class="keyword" id="7789223">struct</span>&nbsp;<span class="op" id="7789230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789233">header</span>&nbsp;<span class="builtintype" id="7789240">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789248">token</span>&nbsp;&nbsp;<span class="builtintype" id="7789255">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789263">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7789270">bool</span><br>
<span class="lineno"></span><span class="op" id="7789275">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7789278">var</span>&nbsp;<span class="ident" id="7789282">hasTokenTests</span>&nbsp;<span class="op" id="7789296">=</span>&nbsp;<span class="op" id="7789298">[</span><span class="op" id="7789299">]</span><span class="ident" id="7789300">hasTokenTest</span><span class="op" id="7789312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789315">{</span><span class="string" id="7789316">&#34;&#34;</span><span class="op" id="7789318">,</span>&nbsp;<span class="string" id="7789320">&#34;&#34;</span><span class="op" id="7789322">,</span>&nbsp;<span class="builtintype" id="7789324">false</span><span class="op" id="7789329">}</span><span class="op" id="7789330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789333">{</span><span class="string" id="7789334">&#34;&#34;</span><span class="op" id="7789336">,</span>&nbsp;<span class="string" id="7789338">&#34;foo&#34;</span><span class="op" id="7789343">,</span>&nbsp;<span class="builtintype" id="7789345">false</span><span class="op" id="7789350">}</span><span class="op" id="7789351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789354">{</span><span class="string" id="7789355">&#34;foo&#34;</span><span class="op" id="7789360">,</span>&nbsp;<span class="string" id="7789362">&#34;foo&#34;</span><span class="op" id="7789367">,</span>&nbsp;<span class="builtintype" id="7789369">true</span><span class="op" id="7789373">}</span><span class="op" id="7789374">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789377">{</span><span class="string" id="7789378">&#34;foo&nbsp;&#34;</span><span class="op" id="7789384">,</span>&nbsp;<span class="string" id="7789386">&#34;foo&#34;</span><span class="op" id="7789391">,</span>&nbsp;<span class="builtintype" id="7789393">true</span><span class="op" id="7789397">}</span><span class="op" id="7789398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789401">{</span><span class="string" id="7789402">&#34;&nbsp;foo&#34;</span><span class="op" id="7789408">,</span>&nbsp;<span class="string" id="7789410">&#34;foo&#34;</span><span class="op" id="7789415">,</span>&nbsp;<span class="builtintype" id="7789417">true</span><span class="op" id="7789421">}</span><span class="op" id="7789422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789425">{</span><span class="string" id="7789426">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="7789433">,</span>&nbsp;<span class="string" id="7789435">&#34;foo&#34;</span><span class="op" id="7789440">,</span>&nbsp;<span class="builtintype" id="7789442">true</span><span class="op" id="7789446">}</span><span class="op" id="7789447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789450">{</span><span class="string" id="7789451">&#34;foo,bar&#34;</span><span class="op" id="7789460">,</span>&nbsp;<span class="string" id="7789462">&#34;foo&#34;</span><span class="op" id="7789467">,</span>&nbsp;<span class="builtintype" id="7789469">true</span><span class="op" id="7789473">}</span><span class="op" id="7789474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789477">{</span><span class="string" id="7789478">&#34;bar,foo&#34;</span><span class="op" id="7789487">,</span>&nbsp;<span class="string" id="7789489">&#34;foo&#34;</span><span class="op" id="7789494">,</span>&nbsp;<span class="builtintype" id="7789496">true</span><span class="op" id="7789500">}</span><span class="op" id="7789501">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789504">{</span><span class="string" id="7789505">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="7789515">,</span>&nbsp;<span class="string" id="7789517">&#34;foo&#34;</span><span class="op" id="7789522">,</span>&nbsp;<span class="builtintype" id="7789524">true</span><span class="op" id="7789528">}</span><span class="op" id="7789529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789532">{</span><span class="string" id="7789533">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7789547">,</span>&nbsp;<span class="string" id="7789549">&#34;foo&#34;</span><span class="op" id="7789554">,</span>&nbsp;<span class="builtintype" id="7789556">true</span><span class="op" id="7789560">}</span><span class="op" id="7789561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789564">{</span><span class="string" id="7789565">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="7789579">,</span>&nbsp;<span class="string" id="7789581">&#34;foo&#34;</span><span class="op" id="7789586">,</span>&nbsp;<span class="builtintype" id="7789588">true</span><span class="op" id="7789592">}</span><span class="op" id="7789593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789596">{</span><span class="string" id="7789597">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7789611">,</span>&nbsp;<span class="string" id="7789613">&#34;foo&#34;</span><span class="op" id="7789618">,</span>&nbsp;<span class="builtintype" id="7789620">true</span><span class="op" id="7789624">}</span><span class="op" id="7789625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789628">{</span><span class="string" id="7789629">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="7789644">,</span>&nbsp;<span class="string" id="7789646">&#34;foo&#34;</span><span class="op" id="7789651">,</span>&nbsp;<span class="builtintype" id="7789653">true</span><span class="op" id="7789657">}</span><span class="op" id="7789658">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789661">{</span><span class="string" id="7789662">&#34;FOO&#34;</span><span class="op" id="7789667">,</span>&nbsp;<span class="string" id="7789669">&#34;foo&#34;</span><span class="op" id="7789674">,</span>&nbsp;<span class="builtintype" id="7789676">true</span><span class="op" id="7789680">}</span><span class="op" id="7789681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789684">{</span><span class="string" id="7789685">&#34;FOO&nbsp;&#34;</span><span class="op" id="7789691">,</span>&nbsp;<span class="string" id="7789693">&#34;foo&#34;</span><span class="op" id="7789698">,</span>&nbsp;<span class="builtintype" id="7789700">true</span><span class="op" id="7789704">}</span><span class="op" id="7789705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789708">{</span><span class="string" id="7789709">&#34;&nbsp;FOO&#34;</span><span class="op" id="7789715">,</span>&nbsp;<span class="string" id="7789717">&#34;foo&#34;</span><span class="op" id="7789722">,</span>&nbsp;<span class="builtintype" id="7789724">true</span><span class="op" id="7789728">}</span><span class="op" id="7789729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789732">{</span><span class="string" id="7789733">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="7789740">,</span>&nbsp;<span class="string" id="7789742">&#34;foo&#34;</span><span class="op" id="7789747">,</span>&nbsp;<span class="builtintype" id="7789749">true</span><span class="op" id="7789753">}</span><span class="op" id="7789754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789757">{</span><span class="string" id="7789758">&#34;FOO,BAR&#34;</span><span class="op" id="7789767">,</span>&nbsp;<span class="string" id="7789769">&#34;foo&#34;</span><span class="op" id="7789774">,</span>&nbsp;<span class="builtintype" id="7789776">true</span><span class="op" id="7789780">}</span><span class="op" id="7789781">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789784">{</span><span class="string" id="7789785">&#34;BAR,FOO&#34;</span><span class="op" id="7789794">,</span>&nbsp;<span class="string" id="7789796">&#34;foo&#34;</span><span class="op" id="7789801">,</span>&nbsp;<span class="builtintype" id="7789803">true</span><span class="op" id="7789807">}</span><span class="op" id="7789808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789811">{</span><span class="string" id="7789812">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="7789822">,</span>&nbsp;<span class="string" id="7789824">&#34;foo&#34;</span><span class="op" id="7789829">,</span>&nbsp;<span class="builtintype" id="7789831">true</span><span class="op" id="7789835">}</span><span class="op" id="7789836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789839">{</span><span class="string" id="7789840">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="7789854">,</span>&nbsp;<span class="string" id="7789856">&#34;foo&#34;</span><span class="op" id="7789861">,</span>&nbsp;<span class="builtintype" id="7789863">true</span><span class="op" id="7789867">}</span><span class="op" id="7789868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789871">{</span><span class="string" id="7789872">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="7789886">,</span>&nbsp;<span class="string" id="7789888">&#34;foo&#34;</span><span class="op" id="7789893">,</span>&nbsp;<span class="builtintype" id="7789895">true</span><span class="op" id="7789899">}</span><span class="op" id="7789900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789903">{</span><span class="string" id="7789904">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="7789918">,</span>&nbsp;<span class="string" id="7789920">&#34;foo&#34;</span><span class="op" id="7789925">,</span>&nbsp;<span class="builtintype" id="7789927">true</span><span class="op" id="7789931">}</span><span class="op" id="7789932">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789935">{</span><span class="string" id="7789936">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="7789951">,</span>&nbsp;<span class="string" id="7789953">&#34;foo&#34;</span><span class="op" id="7789958">,</span>&nbsp;<span class="builtintype" id="7789960">true</span><span class="op" id="7789964">}</span><span class="op" id="7789965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789968">{</span><span class="string" id="7789969">&#34;foobar&#34;</span><span class="op" id="7789977">,</span>&nbsp;<span class="string" id="7789979">&#34;foo&#34;</span><span class="op" id="7789984">,</span>&nbsp;<span class="builtintype" id="7789986">false</span><span class="op" id="7789991">}</span><span class="op" id="7789992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789995">{</span><span class="string" id="7789996">&#34;barfoo&nbsp;&#34;</span><span class="op" id="7790005">,</span>&nbsp;<span class="string" id="7790007">&#34;foo&#34;</span><span class="op" id="7790012">,</span>&nbsp;<span class="builtintype" id="7790014">false</span><span class="op" id="7790019">}</span><span class="op" id="7790020">,</span><br>
<span class="lineno"></span><span class="op" id="7790022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7790025">func</span>&nbsp;<span class="ident" id="7790030">TestHasToken</span><span class="op" id="7790042">(</span><span class="ident" id="7790043">t</span>&nbsp;<span class="op" id="7790045">*</span><span class="ident" id="7790046">testing</span><span class="op" id="7790053">.</span><span class="ident" id="7790054">T</span><span class="op" id="7790055">)</span>&nbsp;<span class="op" id="7790057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790060">for</span>&nbsp;<span class="ident" id="7790064">_</span><span class="op" id="7790065">,</span>&nbsp;<span class="ident" id="7790067">tt</span>&nbsp;<span class="op" id="7790070">:=</span>&nbsp;<span class="keyword" id="7790073">range</span>&nbsp;<span class="ident" id="7790079">hasTokenTests</span>&nbsp;<span class="op" id="7790093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790097">if</span>&nbsp;<span class="ident" id="7790100">hasToken</span><span class="op" id="7790108">(</span><span class="ident" id="7790109">tt</span><span class="op" id="7790111">.</span><span class="ident" id="7790112">header</span><span class="op" id="7790118">,</span>&nbsp;<span class="ident" id="7790120">tt</span><span class="op" id="7790122">.</span><span class="ident" id="7790123">token</span><span class="op" id="7790128">)</span>&nbsp;<span class="op" id="7790130">!=</span>&nbsp;<span class="ident" id="7790133">tt</span><span class="op" id="7790135">.</span><span class="ident" id="7790136">want</span>&nbsp;<span class="op" id="7790141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790146">t</span><span class="op" id="7790147">.</span><span class="ident" id="7790148">Errorf</span><span class="op" id="7790154">(</span><span class="string" id="7790155">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7790187">,</span>&nbsp;<span class="ident" id="7790189">tt</span><span class="op" id="7790191">.</span><span class="ident" id="7790192">header</span><span class="op" id="7790198">,</span>&nbsp;<span class="ident" id="7790200">tt</span><span class="op" id="7790202">.</span><span class="ident" id="7790203">token</span><span class="op" id="7790208">,</span>&nbsp;<span class="op" id="7790210">!</span><span class="ident" id="7790211">tt</span><span class="op" id="7790213">.</span><span class="ident" id="7790214">want</span><span class="op" id="7790218">,</span>&nbsp;<span class="ident" id="7790220">tt</span><span class="op" id="7790222">.</span><span class="ident" id="7790223">want</span><span class="op" id="7790227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790231">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790234">}</span><br>
<span class="lineno"></span><span class="op" id="7790236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7790239">var</span>&nbsp;<span class="ident" id="7790243">testHeader</span>&nbsp;<span class="op" id="7790254">=</span>&nbsp;<span class="ident" id="7790256">Header</span><span class="op" id="7790262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7790265">&#34;Content-Length&#34;</span><span class="op" id="7790281">:</span>&nbsp;<span class="op" id="7790283">{</span><span class="string" id="7790284">&#34;123&#34;</span><span class="op" id="7790289">}</span><span class="op" id="7790290">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7790293">&#34;Content-Type&#34;</span><span class="op" id="7790307">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7790311">{</span><span class="string" id="7790312">&#34;text/plain&#34;</span><span class="op" id="7790324">}</span><span class="op" id="7790325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7790328">&#34;Date&#34;</span><span class="op" id="7790334">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7790346">{</span><span class="string" id="7790347">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="7790373">}</span><span class="op" id="7790374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7790377">&#34;Server&#34;</span><span class="op" id="7790385">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7790395">{</span><span class="ident" id="7790396">DefaultUserAgent</span><span class="op" id="7790412">}</span><span class="op" id="7790413">,</span><br>
<span class="lineno"></span><span class="op" id="7790415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="7790418">var</span>&nbsp;<span class="ident" id="7790422">buf</span>&nbsp;<span class="ident" id="7790426">bytes</span><span class="op" id="7790431">.</span><span class="ident" id="7790432">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7790440">func</span>&nbsp;<span class="ident" id="7790445">BenchmarkHeaderWriteSubset</span><span class="op" id="7790471">(</span><span class="ident" id="7790472">b</span>&nbsp;<span class="op" id="7790474">*</span><span class="ident" id="7790475">testing</span><span class="op" id="7790482">.</span><span class="ident" id="7790483">B</span><span class="op" id="7790484">)</span>&nbsp;<span class="op" id="7790486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790489">b</span><span class="op" id="7790490">.</span><span class="ident" id="7790491">ReportAllocs</span><span class="op" id="7790503">(</span><span class="op" id="7790504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790507">for</span>&nbsp;<span class="ident" id="7790511">i</span>&nbsp;<span class="op" id="7790513">:=</span>&nbsp;<span class="num" id="7790516">0</span><span class="op" id="7790517">;</span>&nbsp;<span class="ident" id="7790519">i</span>&nbsp;<span class="op" id="7790521">&lt;</span>&nbsp;<span class="ident" id="7790523">b</span><span class="op" id="7790524">.</span><span class="ident" id="7790525">N</span><span class="op" id="7790526">;</span>&nbsp;<span class="ident" id="7790528">i</span><span class="op" id="7790529">++</span>&nbsp;<span class="op" id="7790532">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790536">buf</span><span class="op" id="7790539">.</span><span class="ident" id="7790540">Reset</span><span class="op" id="7790545">(</span><span class="op" id="7790546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790550">testHeader</span><span class="op" id="7790560">.</span><span class="ident" id="7790561">WriteSubset</span><span class="op" id="7790572">(</span><span class="op" id="7790573">&amp;</span><span class="ident" id="7790574">buf</span><span class="op" id="7790577">,</span>&nbsp;<span class="ident" id="7790579">nil</span><span class="op" id="7790582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790585">}</span><br>
<span class="lineno"></span><span class="op" id="7790587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7790590">func</span>&nbsp;<span class="ident" id="7790595">TestHeaderWriteSubsetAllocs</span><span class="op" id="7790622">(</span><span class="ident" id="7790623">t</span>&nbsp;<span class="op" id="7790625">*</span><span class="ident" id="7790626">testing</span><span class="op" id="7790633">.</span><span class="ident" id="7790634">T</span><span class="op" id="7790635">)</span>&nbsp;<span class="op" id="7790637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790640">if</span>&nbsp;<span class="ident" id="7790643">testing</span><span class="op" id="7790650">.</span><span class="ident" id="7790651">Short</span><span class="op" id="7790656">(</span><span class="op" id="7790657">)</span>&nbsp;<span class="op" id="7790659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790663">t</span><span class="op" id="7790664">.</span><span class="ident" id="7790665">Skip</span><span class="op" id="7790669">(</span><span class="string" id="7790670">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7790705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790711">if</span>&nbsp;<span class="ident" id="7790714">raceEnabled</span>&nbsp;<span class="op" id="7790726">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790730">t</span><span class="op" id="7790731">.</span><span class="ident" id="7790732">Skip</span><span class="op" id="7790736">(</span><span class="string" id="7790737">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="7790772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790778">if</span>&nbsp;<span class="ident" id="7790781">runtime</span><span class="op" id="7790788">.</span><span class="ident" id="7790789">GOMAXPROCS</span><span class="op" id="7790799">(</span><span class="num" id="7790800">0</span><span class="op" id="7790801">)</span>&nbsp;<span class="op" id="7790803">&gt;</span>&nbsp;<span class="num" id="7790805">1</span>&nbsp;<span class="op" id="7790807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790811">t</span><span class="op" id="7790812">.</span><span class="ident" id="7790813">Skip</span><span class="op" id="7790817">(</span><span class="string" id="7790818">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7790842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790845">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790848">n</span>&nbsp;<span class="op" id="7790850">:=</span>&nbsp;<span class="ident" id="7790853">testing</span><span class="op" id="7790860">.</span><span class="ident" id="7790861">AllocsPerRun</span><span class="op" id="7790873">(</span><span class="num" id="7790874">100</span><span class="op" id="7790877">,</span>&nbsp;<span class="keyword" id="7790879">func</span><span class="op" id="7790883">(</span><span class="op" id="7790884">)</span>&nbsp;<span class="op" id="7790886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790890">buf</span><span class="op" id="7790893">.</span><span class="ident" id="7790894">Reset</span><span class="op" id="7790899">(</span><span class="op" id="7790900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790904">testHeader</span><span class="op" id="7790914">.</span><span class="ident" id="7790915">WriteSubset</span><span class="op" id="7790926">(</span><span class="op" id="7790927">&amp;</span><span class="ident" id="7790928">buf</span><span class="op" id="7790931">,</span>&nbsp;<span class="ident" id="7790933">nil</span><span class="op" id="7790936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790939">}</span><span class="op" id="7790940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790943">if</span>&nbsp;<span class="ident" id="7790946">n</span>&nbsp;<span class="op" id="7790948">&gt;</span>&nbsp;<span class="num" id="7790950">0</span>&nbsp;<span class="op" id="7790952">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790956">t</span><span class="op" id="7790957">.</span><span class="ident" id="7790958">Errorf</span><span class="op" id="7790964">(</span><span class="string" id="7790965">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="7790986">,</span>&nbsp;<span class="ident" id="7790988">n</span><span class="op" id="7790989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790992">}</span><br>
<span class="lineno"></span><span class="op" id="7790994">}</span>
</div>
</body>
</html>
