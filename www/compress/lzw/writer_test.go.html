<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7722983">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7723038">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7723092">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7723143">package</span>&nbsp;<span class="ident" id="7723151">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7723156">import</span>&nbsp;<span class="op" id="7723163">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7723166">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7723172">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7723185">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7723191">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7723202">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7723212">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7723215">var</span>&nbsp;<span class="ident" id="7723219">filenames</span>&nbsp;<span class="op" id="7723229">=</span>&nbsp;<span class="op" id="7723231">[</span><span class="op" id="7723232">]</span><span class="builtintype" id="7723233">string</span><span class="op" id="7723239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7723242">&#34;../testdata/e.txt&#34;</span><span class="op" id="7723261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7723264">&#34;../testdata/pi.txt&#34;</span><span class="op" id="7723284">,</span><br>
<span class="lineno"></span><span class="op" id="7723286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7723289">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="7723367">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="7723434">func</span>&nbsp;<span class="ident" id="7723439">testFile</span><span class="op" id="7723447">(</span><span class="ident" id="7723448">t</span>&nbsp;<span class="op" id="7723450">*</span><span class="ident" id="7723451"><a href="/compress/lzw/writer_test.go.html#7723202">testing</a></span><span class="op" id="7723458">.</span><span class="ident" id="7723459">T</span><span class="op" id="7723460">,</span>&nbsp;<span class="ident" id="7723462">fn</span>&nbsp;<span class="builtintype" id="7723465">string</span><span class="op" id="7723471">,</span>&nbsp;<span class="ident" id="7723473">order</span>&nbsp;<span class="ident" id="7723479"><a href="/compress/lzw/reader.go.html#6273491">Order</a></span><span class="op" id="7723484">,</span>&nbsp;<span class="ident" id="7723486">litWidth</span>&nbsp;<span class="builtintype" id="7723495">int</span><span class="op" id="7723498">)</span>&nbsp;<span class="op" id="7723500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723503">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723540">golden</span><span class="op" id="7723546">,</span>&nbsp;<span class="ident" id="7723548">err</span>&nbsp;<span class="op" id="7723552">:=</span>&nbsp;<span class="ident" id="7723555"><a href="/compress/lzw/writer_test.go.html#7723185">os</a></span><span class="op" id="7723557">.</span><span class="ident" id="7723558">Open</span><span class="op" id="7723562">(</span><span class="ident" id="7723563"><a href="/compress/lzw/writer_test.go.html#7723462">fn</a></span><span class="op" id="7723565">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723568">if</span>&nbsp;<span class="ident" id="7723571"><a href="/compress/lzw/writer_test.go.html#7723548">err</a></span>&nbsp;<span class="op" id="7723575">!=</span>&nbsp;<span class="ident" id="7723578">nil</span>&nbsp;<span class="op" id="7723582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723586"><a href="/compress/lzw/writer_test.go.html#7723448">t</a></span><span class="op" id="7723587">.</span><span class="ident" id="7723588">Errorf</span><span class="op" id="7723594">(</span><span class="string" id="7723595">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7723626">,</span>&nbsp;<span class="ident" id="7723628"><a href="/compress/lzw/writer_test.go.html#7723462">fn</a></span><span class="op" id="7723630">,</span>&nbsp;<span class="ident" id="7723632"><a href="/compress/lzw/writer_test.go.html#7723473">order</a></span><span class="op" id="7723637">,</span>&nbsp;<span class="ident" id="7723639"><a href="/compress/lzw/writer_test.go.html#7723486">litWidth</a></span><span class="op" id="7723647">,</span>&nbsp;<span class="ident" id="7723649"><a href="/compress/lzw/writer_test.go.html#7723548">err</a></span><span class="op" id="7723652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723656">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723667">defer</span>&nbsp;<span class="ident" id="7723673"><a href="/compress/lzw/writer_test.go.html#7723540">golden</a></span><span class="op" id="7723679">.</span><span class="ident" id="7723680">Close</span><span class="op" id="7723685">(</span><span class="op" id="7723686">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723690">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723810">raw</span><span class="op" id="7723813">,</span>&nbsp;<span class="ident" id="7723815"><a href="/compress/lzw/writer_test.go.html#7723548">err</a></span>&nbsp;<span class="op" id="7723819">:=</span>&nbsp;<span class="ident" id="7723822"><a href="/compress/lzw/writer_test.go.html#7723185">os</a></span><span class="op" id="7723824">.</span><span class="ident" id="7723825">Open</span><span class="op" id="7723829">(</span><span class="ident" id="7723830"><a href="/compress/lzw/writer_test.go.html#7723462">fn</a></span><span class="op" id="7723832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723835">if</span>&nbsp;<span class="ident" id="7723838"><a href="/compress/lzw/writer_test.go.html#7723548">err</a></span>&nbsp;<span class="op" id="7723842">!=</span>&nbsp;<span class="ident" id="7723845">nil</span>&nbsp;<span class="op" id="7723849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723853"><a href="/compress/lzw/writer_test.go.html#7723448">t</a></span><span class="op" id="7723854">.</span><span class="ident" id="7723855">Errorf</span><span class="op" id="7723861">(</span><span class="string" id="7723862">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7723893">,</span>&nbsp;<span class="ident" id="7723895"><a href="/compress/lzw/writer_test.go.html#7723462">fn</a></span><span class="op" id="7723897">,</span>&nbsp;<span class="ident" id="7723899"><a href="/compress/lzw/writer_test.go.html#7723473">order</a></span><span class="op" id="7723904">,</span>&nbsp;<span class="ident" id="7723906"><a href="/compress/lzw/writer_test.go.html#7723486">litWidth</a></span><span class="op" id="7723914">,</span>&nbsp;<span class="ident" id="7723916"><a href="/compress/lzw/writer_test.go.html#7723548">err</a></span><span class="op" id="7723919">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723923">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723935">piper</span><span class="op" id="7723940">,</span>&nbsp;<span class="ident" id="7723942">pipew</span>&nbsp;<span class="op" id="7723948">:=</span>&nbsp;<span class="ident" id="7723951"><a href="/compress/lzw/writer_test.go.html#7723166">io</a></span><span class="op" id="7723953">.</span><span class="ident" id="7723954">Pipe</span><span class="op" id="7723958">(</span><span class="op" id="7723959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723962">defer</span>&nbsp;<span class="ident" id="7723968"><a href="/compress/lzw/writer_test.go.html#7723935">piper</a></span><span class="op" id="7723973">.</span><span class="ident" id="7723974">Close</span><span class="op" id="7723979">(</span><span class="op" id="7723980">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723983">go</span>&nbsp;<span class="keyword" id="7723986">func</span><span class="op" id="7723990">(</span><span class="op" id="7723991">)</span>&nbsp;<span class="op" id="7723993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723997">defer</span>&nbsp;<span class="ident" id="7724003"><a href="/compress/lzw/writer_test.go.html#7723810">raw</a></span><span class="op" id="7724006">.</span><span class="ident" id="7724007">Close</span><span class="op" id="7724012">(</span><span class="op" id="7724013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724017">defer</span>&nbsp;<span class="ident" id="7724023"><a href="/compress/lzw/writer_test.go.html#7723942">pipew</a></span><span class="op" id="7724028">.</span><span class="ident" id="7724029">Close</span><span class="op" id="7724034">(</span><span class="op" id="7724035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724039">lzww</span>&nbsp;<span class="op" id="7724044">:=</span>&nbsp;<span class="ident" id="7724047"><a href="/compress/lzw/writer.go.html#6285860">NewWriter</a></span><span class="op" id="7724056">(</span><span class="ident" id="7724057"><a href="/compress/lzw/writer_test.go.html#7723942">pipew</a></span><span class="op" id="7724062">,</span>&nbsp;<span class="ident" id="7724064"><a href="/compress/lzw/writer_test.go.html#7723473">order</a></span><span class="op" id="7724069">,</span>&nbsp;<span class="ident" id="7724071"><a href="/compress/lzw/writer_test.go.html#7723486">litWidth</a></span><span class="op" id="7724079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724083">defer</span>&nbsp;<span class="ident" id="7724089"><a href="/compress/lzw/writer_test.go.html#7724039">lzww</a></span><span class="op" id="7724093">.</span><span class="ident" id="7724094">Close</span><span class="op" id="7724099">(</span><span class="op" id="7724100">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724104">var</span>&nbsp;<span class="ident" id="7724108">b</span>&nbsp;<span class="op" id="7724110">[</span><span class="num" id="7724111">4096</span><span class="op" id="7724115">]</span><span class="builtintype" id="7724116">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724123">for</span>&nbsp;<span class="op" id="7724127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724132">n</span><span class="op" id="7724133">,</span>&nbsp;<span class="ident" id="7724135">err0</span>&nbsp;<span class="op" id="7724140">:=</span>&nbsp;<span class="ident" id="7724143"><a href="/compress/lzw/writer_test.go.html#7723810">raw</a></span><span class="op" id="7724146">.</span><span class="ident" id="7724147">Read</span><span class="op" id="7724151">(</span><span class="ident" id="7724152"><a href="/compress/lzw/writer_test.go.html#7724108">b</a></span><span class="op" id="7724153">[</span><span class="op" id="7724154">:</span><span class="op" id="7724155">]</span><span class="op" id="7724156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724161">if</span>&nbsp;<span class="ident" id="7724164"><a href="/compress/lzw/writer_test.go.html#7724135">err0</a></span>&nbsp;<span class="op" id="7724169">!=</span>&nbsp;<span class="ident" id="7724172">nil</span>&nbsp;<span class="op" id="7724176">&amp;&amp;</span>&nbsp;<span class="ident" id="7724179"><a href="/compress/lzw/writer_test.go.html#7724135">err0</a></span>&nbsp;<span class="op" id="7724184">!=</span>&nbsp;<span class="ident" id="7724187"><a href="/compress/lzw/writer_test.go.html#7723166">io</a></span><span class="op" id="7724189">.</span><span class="ident" id="7724190">EOF</span>&nbsp;<span class="op" id="7724194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724200"><a href="/compress/lzw/writer_test.go.html#7723448">t</a></span><span class="op" id="7724201">.</span><span class="ident" id="7724202">Errorf</span><span class="op" id="7724208">(</span><span class="string" id="7724209">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7724240">,</span>&nbsp;<span class="ident" id="7724242"><a href="/compress/lzw/writer_test.go.html#7723462">fn</a></span><span class="op" id="7724244">,</span>&nbsp;<span class="ident" id="7724246"><a href="/compress/lzw/writer_test.go.html#7723473">order</a></span><span class="op" id="7724251">,</span>&nbsp;<span class="ident" id="7724253"><a href="/compress/lzw/writer_test.go.html#7723486">litWidth</a></span><span class="op" id="7724261">,</span>&nbsp;<span class="ident" id="7724263"><a href="/compress/lzw/writer_test.go.html#7724135">err0</a></span><span class="op" id="7724267">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724273">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724288">_</span><span class="op" id="7724289">,</span>&nbsp;<span class="ident" id="7724291">err1</span>&nbsp;<span class="op" id="7724296">:=</span>&nbsp;<span class="ident" id="7724299"><a href="/compress/lzw/writer_test.go.html#7724039">lzww</a></span><span class="op" id="7724303">.</span><span class="ident" id="7724304">Write</span><span class="op" id="7724309">(</span><span class="ident" id="7724310"><a href="/compress/lzw/writer_test.go.html#7724108">b</a></span><span class="op" id="7724311">[</span><span class="op" id="7724312">:</span><span class="ident" id="7724313"><a href="/compress/lzw/writer_test.go.html#7724132">n</a></span><span class="op" id="7724314">]</span><span class="op" id="7724315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724320">if</span>&nbsp;<span class="ident" id="7724323"><a href="/compress/lzw/writer_test.go.html#7724291">err1</a></span>&nbsp;<span class="op" id="7724328">!=</span>&nbsp;<span class="ident" id="7724331">nil</span>&nbsp;<span class="op" id="7724335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724341"><a href="/compress/lzw/writer_test.go.html#7723448">t</a></span><span class="op" id="7724342">.</span><span class="ident" id="7724343">Errorf</span><span class="op" id="7724349">(</span><span class="string" id="7724350">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7724381">,</span>&nbsp;<span class="ident" id="7724383"><a href="/compress/lzw/writer_test.go.html#7723462">fn</a></span><span class="op" id="7724385">,</span>&nbsp;<span class="ident" id="7724387"><a href="/compress/lzw/writer_test.go.html#7723473">order</a></span><span class="op" id="7724392">,</span>&nbsp;<span class="ident" id="7724394"><a href="/compress/lzw/writer_test.go.html#7723486">litWidth</a></span><span class="op" id="7724402">,</span>&nbsp;<span class="ident" id="7724404"><a href="/compress/lzw/writer_test.go.html#7724291">err1</a></span><span class="op" id="7724408">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724414">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724429">if</span>&nbsp;<span class="ident" id="7724432"><a href="/compress/lzw/writer_test.go.html#7724135">err0</a></span>&nbsp;<span class="op" id="7724437">==</span>&nbsp;<span class="ident" id="7724440"><a href="/compress/lzw/writer_test.go.html#7723166">io</a></span><span class="op" id="7724442">.</span><span class="ident" id="7724443">EOF</span>&nbsp;<span class="op" id="7724447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724453">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724462">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724469">}</span><span class="op" id="7724470">(</span><span class="op" id="7724471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724474">lzwr</span>&nbsp;<span class="op" id="7724479">:=</span>&nbsp;<span class="ident" id="7724482"><a href="/compress/lzw/reader.go.html#6278944">NewReader</a></span><span class="op" id="7724491">(</span><span class="ident" id="7724492"><a href="/compress/lzw/writer_test.go.html#7723935">piper</a></span><span class="op" id="7724497">,</span>&nbsp;<span class="ident" id="7724499"><a href="/compress/lzw/writer_test.go.html#7723473">order</a></span><span class="op" id="7724504">,</span>&nbsp;<span class="ident" id="7724506"><a href="/compress/lzw/writer_test.go.html#7723486">litWidth</a></span><span class="op" id="7724514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724517">defer</span>&nbsp;<span class="ident" id="7724523"><a href="/compress/lzw/writer_test.go.html#7724474">lzwr</a></span><span class="op" id="7724527">.</span><span class="ident" id="7724528">Close</span><span class="op" id="7724533">(</span><span class="op" id="7724534">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7724538">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724559">b0</span><span class="op" id="7724561">,</span>&nbsp;<span class="ident" id="7724563">err0</span>&nbsp;<span class="op" id="7724568">:=</span>&nbsp;<span class="ident" id="7724571"><a href="/compress/lzw/writer_test.go.html#7723172">ioutil</a></span><span class="op" id="7724577">.</span><span class="ident" id="7724578">ReadAll</span><span class="op" id="7724585">(</span><span class="ident" id="7724586"><a href="/compress/lzw/writer_test.go.html#7723540">golden</a></span><span class="op" id="7724592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724595">b1</span><span class="op" id="7724597">,</span>&nbsp;<span class="ident" id="7724599">err1</span>&nbsp;<span class="op" id="7724604">:=</span>&nbsp;<span class="ident" id="7724607"><a href="/compress/lzw/writer_test.go.html#7723172">ioutil</a></span><span class="op" id="7724613">.</span><span class="ident" id="7724614">ReadAll</span><span class="op" id="7724621">(</span><span class="ident" id="7724622"><a href="/compress/lzw/writer_test.go.html#7724474">lzwr</a></span><span class="op" id="7724626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724629">if</span>&nbsp;<span class="ident" id="7724632"><a href="/compress/lzw/writer_test.go.html#7724563">err0</a></span>&nbsp;<span class="op" id="7724637">!=</span>&nbsp;<span class="ident" id="7724640">nil</span>&nbsp;<span class="op" id="7724644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724648"><a href="/compress/lzw/writer_test.go.html#7723448">t</a></span><span class="op" id="7724649">.</span><span class="ident" id="7724650">Errorf</span><span class="op" id="7724656">(</span><span class="string" id="7724657">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7724688">,</span>&nbsp;<span class="ident" id="7724690"><a href="/compress/lzw/writer_test.go.html#7723462">fn</a></span><span class="op" id="7724692">,</span>&nbsp;<span class="ident" id="7724694"><a href="/compress/lzw/writer_test.go.html#7723473">order</a></span><span class="op" id="7724699">,</span>&nbsp;<span class="ident" id="7724701"><a href="/compress/lzw/writer_test.go.html#7723486">litWidth</a></span><span class="op" id="7724709">,</span>&nbsp;<span class="ident" id="7724711"><a href="/compress/lzw/writer_test.go.html#7724563">err0</a></span><span class="op" id="7724715">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724719">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724730">if</span>&nbsp;<span class="ident" id="7724733"><a href="/compress/lzw/writer_test.go.html#7724599">err1</a></span>&nbsp;<span class="op" id="7724738">!=</span>&nbsp;<span class="ident" id="7724741">nil</span>&nbsp;<span class="op" id="7724745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724749"><a href="/compress/lzw/writer_test.go.html#7723448">t</a></span><span class="op" id="7724750">.</span><span class="ident" id="7724751">Errorf</span><span class="op" id="7724757">(</span><span class="string" id="7724758">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7724789">,</span>&nbsp;<span class="ident" id="7724791"><a href="/compress/lzw/writer_test.go.html#7723462">fn</a></span><span class="op" id="7724793">,</span>&nbsp;<span class="ident" id="7724795"><a href="/compress/lzw/writer_test.go.html#7723473">order</a></span><span class="op" id="7724800">,</span>&nbsp;<span class="ident" id="7724802"><a href="/compress/lzw/writer_test.go.html#7723486">litWidth</a></span><span class="op" id="7724810">,</span>&nbsp;<span class="ident" id="7724812"><a href="/compress/lzw/writer_test.go.html#7724599">err1</a></span><span class="op" id="7724816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724820">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724831">if</span>&nbsp;<span class="builtinfunc" id="7724834">len</span><span class="op" id="7724837">(</span><span class="ident" id="7724838"><a href="/compress/lzw/writer_test.go.html#7724595">b1</a></span><span class="op" id="7724840">)</span>&nbsp;<span class="op" id="7724842">!=</span>&nbsp;<span class="builtinfunc" id="7724845">len</span><span class="op" id="7724848">(</span><span class="ident" id="7724849"><a href="/compress/lzw/writer_test.go.html#7724559">b0</a></span><span class="op" id="7724851">)</span>&nbsp;<span class="op" id="7724853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724857"><a href="/compress/lzw/writer_test.go.html#7723448">t</a></span><span class="op" id="7724858">.</span><span class="ident" id="7724859">Errorf</span><span class="op" id="7724865">(</span><span class="string" id="7724866">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="7724919">,</span>&nbsp;<span class="ident" id="7724921"><a href="/compress/lzw/writer_test.go.html#7723462">fn</a></span><span class="op" id="7724923">,</span>&nbsp;<span class="ident" id="7724925"><a href="/compress/lzw/writer_test.go.html#7723473">order</a></span><span class="op" id="7724930">,</span>&nbsp;<span class="ident" id="7724932"><a href="/compress/lzw/writer_test.go.html#7723486">litWidth</a></span><span class="op" id="7724940">,</span>&nbsp;<span class="builtinfunc" id="7724942">len</span><span class="op" id="7724945">(</span><span class="ident" id="7724946"><a href="/compress/lzw/writer_test.go.html#7724595">b1</a></span><span class="op" id="7724948">)</span><span class="op" id="7724949">,</span>&nbsp;<span class="builtinfunc" id="7724951">len</span><span class="op" id="7724954">(</span><span class="ident" id="7724955"><a href="/compress/lzw/writer_test.go.html#7724559">b0</a></span><span class="op" id="7724957">)</span><span class="op" id="7724958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724962">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724970">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724973">for</span>&nbsp;<span class="ident" id="7724977">i</span>&nbsp;<span class="op" id="7724979">:=</span>&nbsp;<span class="num" id="7724982">0</span><span class="op" id="7724983">;</span>&nbsp;<span class="ident" id="7724985"><a href="/compress/lzw/writer_test.go.html#7724977">i</a></span>&nbsp;<span class="op" id="7724987">&lt;</span>&nbsp;<span class="builtinfunc" id="7724989">len</span><span class="op" id="7724992">(</span><span class="ident" id="7724993"><a href="/compress/lzw/writer_test.go.html#7724559">b0</a></span><span class="op" id="7724995">)</span><span class="op" id="7724996">;</span>&nbsp;<span class="ident" id="7724998"><a href="/compress/lzw/writer_test.go.html#7724977">i</a></span><span class="op" id="7724999">++</span>&nbsp;<span class="op" id="7725002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725006">if</span>&nbsp;<span class="ident" id="7725009"><a href="/compress/lzw/writer_test.go.html#7724595">b1</a></span><span class="op" id="7725011">[</span><span class="ident" id="7725012"><a href="/compress/lzw/writer_test.go.html#7724977">i</a></span><span class="op" id="7725013">]</span>&nbsp;<span class="op" id="7725015">!=</span>&nbsp;<span class="ident" id="7725018"><a href="/compress/lzw/writer_test.go.html#7724559">b0</a></span><span class="op" id="7725020">[</span><span class="ident" id="7725021"><a href="/compress/lzw/writer_test.go.html#7724977">i</a></span><span class="op" id="7725022">]</span>&nbsp;<span class="op" id="7725024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725029"><a href="/compress/lzw/writer_test.go.html#7723448">t</a></span><span class="op" id="7725030">.</span><span class="ident" id="7725031">Errorf</span><span class="op" id="7725037">(</span><span class="string" id="7725038">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="7725101">,</span>&nbsp;<span class="ident" id="7725103"><a href="/compress/lzw/writer_test.go.html#7723462">fn</a></span><span class="op" id="7725105">,</span>&nbsp;<span class="ident" id="7725107"><a href="/compress/lzw/writer_test.go.html#7723473">order</a></span><span class="op" id="7725112">,</span>&nbsp;<span class="ident" id="7725114"><a href="/compress/lzw/writer_test.go.html#7723486">litWidth</a></span><span class="op" id="7725122">,</span>&nbsp;<span class="ident" id="7725124"><a href="/compress/lzw/writer_test.go.html#7724977">i</a></span><span class="op" id="7725125">,</span>&nbsp;<span class="ident" id="7725127"><a href="/compress/lzw/writer_test.go.html#7724595">b1</a></span><span class="op" id="7725129">[</span><span class="ident" id="7725130"><a href="/compress/lzw/writer_test.go.html#7724977">i</a></span><span class="op" id="7725131">]</span><span class="op" id="7725132">,</span>&nbsp;<span class="ident" id="7725134"><a href="/compress/lzw/writer_test.go.html#7724559">b0</a></span><span class="op" id="7725136">[</span><span class="ident" id="7725137"><a href="/compress/lzw/writer_test.go.html#7724977">i</a></span><span class="op" id="7725138">]</span><span class="op" id="7725139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725144">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725153">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725156">}</span><br>
<span class="lineno"></span><span class="op" id="7725158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7725161">func</span>&nbsp;<span class="ident" id="7725166">TestWriter</span><span class="op" id="7725176">(</span><span class="ident" id="7725177">t</span>&nbsp;<span class="op" id="7725179">*</span><span class="ident" id="7725180"><a href="/compress/lzw/writer_test.go.html#7723202">testing</a></span><span class="op" id="7725187">.</span><span class="ident" id="7725188">T</span><span class="op" id="7725189">)</span>&nbsp;<span class="op" id="7725191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725194">for</span>&nbsp;<span class="ident" id="7725198">_</span><span class="op" id="7725199">,</span>&nbsp;<span class="ident" id="7725201">filename</span>&nbsp;<span class="op" id="7725210">:=</span>&nbsp;<span class="keyword" id="7725213">range</span>&nbsp;<span class="ident" id="7725219"><a href="/compress/lzw/writer_test.go.html#7723219">filenames</a></span>&nbsp;<span class="op" id="7725229">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725233">for</span>&nbsp;<span class="ident" id="7725237">_</span><span class="op" id="7725238">,</span>&nbsp;<span class="ident" id="7725240">order</span>&nbsp;<span class="op" id="7725246">:=</span>&nbsp;<span class="keyword" id="7725249">range</span>&nbsp;<span class="op" id="7725255">[</span><span class="op" id="7725256">...</span><span class="op" id="7725259">]</span><span class="ident" id="7725260"><a href="/compress/lzw/reader.go.html#6273491">Order</a></span><span class="op" id="7725265">{</span><span class="ident" id="7725266"><a href="/compress/lzw/reader.go.html#6273587">LSB</a></span><span class="op" id="7725269">,</span>&nbsp;<span class="ident" id="7725271"><a href="/compress/lzw/reader.go.html#6273694">MSB</a></span><span class="op" id="7725274">}</span>&nbsp;<span class="op" id="7725276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725281">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725361">for</span>&nbsp;<span class="ident" id="7725365">_</span><span class="op" id="7725366">,</span>&nbsp;<span class="ident" id="7725368">litWidth</span>&nbsp;<span class="op" id="7725377">:=</span>&nbsp;<span class="keyword" id="7725380">range</span>&nbsp;<span class="op" id="7725386">[</span><span class="op" id="7725387">...</span><span class="op" id="7725390">]</span><span class="builtintype" id="7725391">int</span><span class="op" id="7725394">{</span><span class="num" id="7725395">6</span><span class="op" id="7725396">,</span>&nbsp;<span class="num" id="7725398">7</span><span class="op" id="7725399">,</span>&nbsp;<span class="num" id="7725401">8</span><span class="op" id="7725402">}</span>&nbsp;<span class="op" id="7725404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725410"><a href="/compress/lzw/writer_test.go.html#7723439">testFile</a></span><span class="op" id="7725418">(</span><span class="ident" id="7725419"><a href="/compress/lzw/writer_test.go.html#7725177">t</a></span><span class="op" id="7725420">,</span>&nbsp;<span class="ident" id="7725422"><a href="/compress/lzw/writer_test.go.html#7725201">filename</a></span><span class="op" id="7725430">,</span>&nbsp;<span class="ident" id="7725432"><a href="/compress/lzw/writer_test.go.html#7725240">order</a></span><span class="op" id="7725437">,</span>&nbsp;<span class="ident" id="7725439"><a href="/compress/lzw/writer_test.go.html#7725368">litWidth</a></span><span class="op" id="7725447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725452">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725459">}</span><br>
<span class="lineno"></span><span class="op" id="7725461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7725464">func</span>&nbsp;<span class="ident" id="7725469">TestWriterReturnValues</span><span class="op" id="7725491">(</span><span class="ident" id="7725492">t</span>&nbsp;<span class="op" id="7725494">*</span><span class="ident" id="7725495"><a href="/compress/lzw/writer_test.go.html#7723202">testing</a></span><span class="op" id="7725502">.</span><span class="ident" id="7725503">T</span><span class="op" id="7725504">)</span>&nbsp;<span class="op" id="7725506">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725509">w</span>&nbsp;<span class="op" id="7725511">:=</span>&nbsp;<span class="ident" id="7725514"><a href="/compress/lzw/writer.go.html#6285860">NewWriter</a></span><span class="op" id="7725523">(</span><span class="ident" id="7725524"><a href="/compress/lzw/writer_test.go.html#7723172">ioutil</a></span><span class="op" id="7725530">.</span><span class="ident" id="7725531">Discard</span><span class="op" id="7725538">,</span>&nbsp;<span class="ident" id="7725540"><a href="/compress/lzw/reader.go.html#6273587">LSB</a></span><span class="op" id="7725543">,</span>&nbsp;<span class="num" id="7725545">8</span><span class="op" id="7725546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725549">n</span><span class="op" id="7725550">,</span>&nbsp;<span class="ident" id="7725552">err</span>&nbsp;<span class="op" id="7725556">:=</span>&nbsp;<span class="ident" id="7725559"><a href="/compress/lzw/writer_test.go.html#7725509">w</a></span><span class="op" id="7725560">.</span><span class="ident" id="7725561">Write</span><span class="op" id="7725566">(</span><span class="op" id="7725567">[</span><span class="op" id="7725568">]</span><span class="builtintype" id="7725569">byte</span><span class="op" id="7725573">(</span><span class="string" id="7725574">&#34;asdf&#34;</span><span class="op" id="7725580">)</span><span class="op" id="7725581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725584">if</span>&nbsp;<span class="ident" id="7725587"><a href="/compress/lzw/writer_test.go.html#7725549">n</a></span>&nbsp;<span class="op" id="7725589">!=</span>&nbsp;<span class="num" id="7725592">4</span>&nbsp;<span class="op" id="7725594">||</span>&nbsp;<span class="ident" id="7725597"><a href="/compress/lzw/writer_test.go.html#7725552">err</a></span>&nbsp;<span class="op" id="7725601">!=</span>&nbsp;<span class="ident" id="7725604">nil</span>&nbsp;<span class="op" id="7725608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725612"><a href="/compress/lzw/writer_test.go.html#7725492">t</a></span><span class="op" id="7725613">.</span><span class="ident" id="7725614">Errorf</span><span class="op" id="7725620">(</span><span class="string" id="7725621">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="7725646">,</span>&nbsp;<span class="ident" id="7725648"><a href="/compress/lzw/writer_test.go.html#7725549">n</a></span><span class="op" id="7725649">,</span>&nbsp;<span class="ident" id="7725651"><a href="/compress/lzw/writer_test.go.html#7725552">err</a></span><span class="op" id="7725654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725657">}</span><br>
<span class="lineno">105</span><span class="op" id="7725659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7725662">func</span>&nbsp;<span class="ident" id="7725667">benchmarkEncoder</span><span class="op" id="7725683">(</span><span class="ident" id="7725684">b</span>&nbsp;<span class="op" id="7725686">*</span><span class="ident" id="7725687"><a href="/compress/lzw/writer_test.go.html#7723202">testing</a></span><span class="op" id="7725694">.</span><span class="ident" id="7725695">B</span><span class="op" id="7725696">,</span>&nbsp;<span class="ident" id="7725698">n</span>&nbsp;<span class="builtintype" id="7725700">int</span><span class="op" id="7725703">)</span>&nbsp;<span class="op" id="7725705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725708"><a href="/compress/lzw/writer_test.go.html#7725684">b</a></span><span class="op" id="7725709">.</span><span class="ident" id="7725710">StopTimer</span><span class="op" id="7725719">(</span><span class="op" id="7725720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725723"><a href="/compress/lzw/writer_test.go.html#7725684">b</a></span><span class="op" id="7725724">.</span><span class="ident" id="7725725">SetBytes</span><span class="op" id="7725733">(</span><span class="ident" id="7725734">int64</span><span class="op" id="7725739">(</span><span class="ident" id="7725740"><a href="/compress/lzw/writer_test.go.html#7725698">n</a></span><span class="op" id="7725741">)</span><span class="op" id="7725742">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725745">buf0</span><span class="op" id="7725749">,</span>&nbsp;<span class="ident" id="7725751">err</span>&nbsp;<span class="op" id="7725755">:=</span>&nbsp;<span class="ident" id="7725758"><a href="/compress/lzw/writer_test.go.html#7723172">ioutil</a></span><span class="op" id="7725764">.</span><span class="ident" id="7725765">ReadFile</span><span class="op" id="7725773">(</span><span class="string" id="7725774">&#34;../testdata/e.txt&#34;</span><span class="op" id="7725793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725796">if</span>&nbsp;<span class="ident" id="7725799"><a href="/compress/lzw/writer_test.go.html#7725751">err</a></span>&nbsp;<span class="op" id="7725803">!=</span>&nbsp;<span class="ident" id="7725806">nil</span>&nbsp;<span class="op" id="7725810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725814"><a href="/compress/lzw/writer_test.go.html#7725684">b</a></span><span class="op" id="7725815">.</span><span class="ident" id="7725816">Fatal</span><span class="op" id="7725821">(</span><span class="ident" id="7725822"><a href="/compress/lzw/writer_test.go.html#7725751">err</a></span><span class="op" id="7725825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725831">if</span>&nbsp;<span class="builtinfunc" id="7725834">len</span><span class="op" id="7725837">(</span><span class="ident" id="7725838"><a href="/compress/lzw/writer_test.go.html#7725745">buf0</a></span><span class="op" id="7725842">)</span>&nbsp;<span class="op" id="7725844">==</span>&nbsp;<span class="num" id="7725847">0</span>&nbsp;<span class="op" id="7725849">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725853"><a href="/compress/lzw/writer_test.go.html#7725684">b</a></span><span class="op" id="7725854">.</span><span class="ident" id="7725855">Fatalf</span><span class="op" id="7725861">(</span><span class="string" id="7725862">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="7725885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725891">buf1</span>&nbsp;<span class="op" id="7725896">:=</span>&nbsp;<span class="builtinfunc" id="7725899">make</span><span class="op" id="7725903">(</span><span class="op" id="7725904">[</span><span class="op" id="7725905">]</span><span class="builtintype" id="7725906">byte</span><span class="op" id="7725910">,</span>&nbsp;<span class="ident" id="7725912"><a href="/compress/lzw/writer_test.go.html#7725698">n</a></span><span class="op" id="7725913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725916">for</span>&nbsp;<span class="ident" id="7725920">i</span>&nbsp;<span class="op" id="7725922">:=</span>&nbsp;<span class="num" id="7725925">0</span><span class="op" id="7725926">;</span>&nbsp;<span class="ident" id="7725928"><a href="/compress/lzw/writer_test.go.html#7725920">i</a></span>&nbsp;<span class="op" id="7725930">&lt;</span>&nbsp;<span class="ident" id="7725932"><a href="/compress/lzw/writer_test.go.html#7725698">n</a></span><span class="op" id="7725933">;</span>&nbsp;<span class="ident" id="7725935"><a href="/compress/lzw/writer_test.go.html#7725920">i</a></span>&nbsp;<span class="op" id="7725937">+=</span>&nbsp;<span class="builtinfunc" id="7725940">len</span><span class="op" id="7725943">(</span><span class="ident" id="7725944"><a href="/compress/lzw/writer_test.go.html#7725745">buf0</a></span><span class="op" id="7725948">)</span>&nbsp;<span class="op" id="7725950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725954">if</span>&nbsp;<span class="builtinfunc" id="7725957">len</span><span class="op" id="7725960">(</span><span class="ident" id="7725961"><a href="/compress/lzw/writer_test.go.html#7725745">buf0</a></span><span class="op" id="7725965">)</span>&nbsp;<span class="op" id="7725967">&gt;</span>&nbsp;<span class="ident" id="7725969"><a href="/compress/lzw/writer_test.go.html#7725698">n</a></span><span class="op" id="7725970">-</span><span class="ident" id="7725971"><a href="/compress/lzw/writer_test.go.html#7725920">i</a></span>&nbsp;<span class="op" id="7725973">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725978"><a href="/compress/lzw/writer_test.go.html#7725745">buf0</a></span>&nbsp;<span class="op" id="7725983">=</span>&nbsp;<span class="ident" id="7725985"><a href="/compress/lzw/writer_test.go.html#7725745">buf0</a></span><span class="op" id="7725989">[</span><span class="op" id="7725990">:</span><span class="ident" id="7725991"><a href="/compress/lzw/writer_test.go.html#7725698">n</a></span><span class="op" id="7725992">-</span><span class="ident" id="7725993"><a href="/compress/lzw/writer_test.go.html#7725920">i</a></span><span class="op" id="7725994">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7726002">copy</span><span class="op" id="7726006">(</span><span class="ident" id="7726007"><a href="/compress/lzw/writer_test.go.html#7725891">buf1</a></span><span class="op" id="7726011">[</span><span class="ident" id="7726012"><a href="/compress/lzw/writer_test.go.html#7725920">i</a></span><span class="op" id="7726013">:</span><span class="op" id="7726014">]</span><span class="op" id="7726015">,</span>&nbsp;<span class="ident" id="7726017"><a href="/compress/lzw/writer_test.go.html#7725745">buf0</a></span><span class="op" id="7726021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726027"><a href="/compress/lzw/writer_test.go.html#7725745">buf0</a></span>&nbsp;<span class="op" id="7726032">=</span>&nbsp;<span class="ident" id="7726034">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726039"><a href="/compress/lzw/writer_test.go.html#7723191">runtime</a></span><span class="op" id="7726046">.</span><span class="ident" id="7726047">GC</span><span class="op" id="7726049">(</span><span class="op" id="7726050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726053"><a href="/compress/lzw/writer_test.go.html#7725684">b</a></span><span class="op" id="7726054">.</span><span class="ident" id="7726055">StartTimer</span><span class="op" id="7726065">(</span><span class="op" id="7726066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726069">for</span>&nbsp;<span class="ident" id="7726073">i</span>&nbsp;<span class="op" id="7726075">:=</span>&nbsp;<span class="num" id="7726078">0</span><span class="op" id="7726079">;</span>&nbsp;<span class="ident" id="7726081"><a href="/compress/lzw/writer_test.go.html#7726073">i</a></span>&nbsp;<span class="op" id="7726083">&lt;</span>&nbsp;<span class="ident" id="7726085"><a href="/compress/lzw/writer_test.go.html#7725684">b</a></span><span class="op" id="7726086">.</span><span class="ident" id="7726087">N</span><span class="op" id="7726088">;</span>&nbsp;<span class="ident" id="7726090"><a href="/compress/lzw/writer_test.go.html#7726073">i</a></span><span class="op" id="7726091">++</span>&nbsp;<span class="op" id="7726094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726098">w</span>&nbsp;<span class="op" id="7726100">:=</span>&nbsp;<span class="ident" id="7726103"><a href="/compress/lzw/writer.go.html#6285860">NewWriter</a></span><span class="op" id="7726112">(</span><span class="ident" id="7726113"><a href="/compress/lzw/writer_test.go.html#7723172">ioutil</a></span><span class="op" id="7726119">.</span><span class="ident" id="7726120">Discard</span><span class="op" id="7726127">,</span>&nbsp;<span class="ident" id="7726129"><a href="/compress/lzw/reader.go.html#6273587">LSB</a></span><span class="op" id="7726132">,</span>&nbsp;<span class="num" id="7726134">8</span><span class="op" id="7726135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726139"><a href="/compress/lzw/writer_test.go.html#7726098">w</a></span><span class="op" id="7726140">.</span><span class="ident" id="7726141">Write</span><span class="op" id="7726146">(</span><span class="ident" id="7726147"><a href="/compress/lzw/writer_test.go.html#7725891">buf1</a></span><span class="op" id="7726151">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726155"><a href="/compress/lzw/writer_test.go.html#7726098">w</a></span><span class="op" id="7726156">.</span><span class="ident" id="7726157">Close</span><span class="op" id="7726162">(</span><span class="op" id="7726163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726166">}</span><br>
<span class="lineno"></span><span class="op" id="7726168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7726171">func</span>&nbsp;<span class="ident" id="7726176">BenchmarkEncoder1e4</span><span class="op" id="7726195">(</span><span class="ident" id="7726196">b</span>&nbsp;<span class="op" id="7726198">*</span><span class="ident" id="7726199"><a href="/compress/lzw/writer_test.go.html#7723202">testing</a></span><span class="op" id="7726206">.</span><span class="ident" id="7726207">B</span><span class="op" id="7726208">)</span>&nbsp;<span class="op" id="7726210">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726213"><a href="/compress/lzw/writer_test.go.html#7725667">benchmarkEncoder</a></span><span class="op" id="7726229">(</span><span class="ident" id="7726230"><a href="/compress/lzw/writer_test.go.html#7726196">b</a></span><span class="op" id="7726231">,</span>&nbsp;<span class="num" id="7726233">1e4</span><span class="op" id="7726236">)</span><br>
<span class="lineno"></span><span class="op" id="7726238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7726241">func</span>&nbsp;<span class="ident" id="7726246">BenchmarkEncoder1e5</span><span class="op" id="7726265">(</span><span class="ident" id="7726266">b</span>&nbsp;<span class="op" id="7726268">*</span><span class="ident" id="7726269"><a href="/compress/lzw/writer_test.go.html#7723202">testing</a></span><span class="op" id="7726276">.</span><span class="ident" id="7726277">B</span><span class="op" id="7726278">)</span>&nbsp;<span class="op" id="7726280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726283"><a href="/compress/lzw/writer_test.go.html#7725667">benchmarkEncoder</a></span><span class="op" id="7726299">(</span><span class="ident" id="7726300"><a href="/compress/lzw/writer_test.go.html#7726266">b</a></span><span class="op" id="7726301">,</span>&nbsp;<span class="num" id="7726303">1e5</span><span class="op" id="7726306">)</span><br>
<span class="lineno">140</span><span class="op" id="7726308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7726311">func</span>&nbsp;<span class="ident" id="7726316">BenchmarkEncoder1e6</span><span class="op" id="7726335">(</span><span class="ident" id="7726336">b</span>&nbsp;<span class="op" id="7726338">*</span><span class="ident" id="7726339"><a href="/compress/lzw/writer_test.go.html#7723202">testing</a></span><span class="op" id="7726346">.</span><span class="ident" id="7726347">B</span><span class="op" id="7726348">)</span>&nbsp;<span class="op" id="7726350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726353"><a href="/compress/lzw/writer_test.go.html#7725667">benchmarkEncoder</a></span><span class="op" id="7726369">(</span><span class="ident" id="7726370"><a href="/compress/lzw/writer_test.go.html#7726336">b</a></span><span class="op" id="7726371">,</span>&nbsp;<span class="num" id="7726373">1e6</span><span class="op" id="7726376">)</span><br>
<span class="lineno"></span><span class="op" id="7726378">}</span>
</div>
</body>
</html>
