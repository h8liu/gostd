<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/md5</h2>
<ul>
<li><a href="/gostd/crypto/md5/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/md5/md5.go.html">md5.go</a></li>
<li><a href="/gostd/crypto/md5/md5_test.go.html" class="current">md5_test.go</a></li>
<li><a href="/gostd/crypto/md5/md5block.go.html">md5block.go</a></li>
<li><a href="/gostd/crypto/md5/md5block_decl.go.html">md5block_decl.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7629024">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7629079">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7629133">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7629184">package</span>&nbsp;<span class="ident" id="7629192">md5</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7629197">import</span>&nbsp;<span class="op" id="7629204">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7629207">&#34;crypto/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7629222">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7629229">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7629235">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7629246">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="7629255">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7629258">type</span>&nbsp;<span class="ident" id="7629263">md5Test</span>&nbsp;<span class="keyword" id="7629271">struct</span>&nbsp;<span class="op" id="7629278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7629281">out</span>&nbsp;<span class="builtintype" id="7629285">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7629293">in</span>&nbsp;&nbsp;<span class="builtintype" id="7629297">string</span><br>
<span class="lineno"></span><span class="op" id="7629304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7629307">var</span>&nbsp;<span class="ident" id="7629311">golden</span>&nbsp;<span class="op" id="7629318">=</span>&nbsp;<span class="op" id="7629320">[</span><span class="op" id="7629321">]</span><span class="ident" id="7629322">md5Test</span><span class="op" id="7629329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629332">{</span><span class="string" id="7629333">&#34;d41d8cd98f00b204e9800998ecf8427e&#34;</span><span class="op" id="7629367">,</span>&nbsp;<span class="string" id="7629369">&#34;&#34;</span><span class="op" id="7629371">}</span><span class="op" id="7629372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629375">{</span><span class="string" id="7629376">&#34;0cc175b9c0f1b6a831c399e269772661&#34;</span><span class="op" id="7629410">,</span>&nbsp;<span class="string" id="7629412">&#34;a&#34;</span><span class="op" id="7629415">}</span><span class="op" id="7629416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629419">{</span><span class="string" id="7629420">&#34;187ef4436122d1cc2f40dc2b92f0eba0&#34;</span><span class="op" id="7629454">,</span>&nbsp;<span class="string" id="7629456">&#34;ab&#34;</span><span class="op" id="7629460">}</span><span class="op" id="7629461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629464">{</span><span class="string" id="7629465">&#34;900150983cd24fb0d6963f7d28e17f72&#34;</span><span class="op" id="7629499">,</span>&nbsp;<span class="string" id="7629501">&#34;abc&#34;</span><span class="op" id="7629506">}</span><span class="op" id="7629507">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629510">{</span><span class="string" id="7629511">&#34;e2fc714c4727ee9395f324cd2e7f331f&#34;</span><span class="op" id="7629545">,</span>&nbsp;<span class="string" id="7629547">&#34;abcd&#34;</span><span class="op" id="7629553">}</span><span class="op" id="7629554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629557">{</span><span class="string" id="7629558">&#34;ab56b4d92b40713acc5af89985d4b786&#34;</span><span class="op" id="7629592">,</span>&nbsp;<span class="string" id="7629594">&#34;abcde&#34;</span><span class="op" id="7629601">}</span><span class="op" id="7629602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629605">{</span><span class="string" id="7629606">&#34;e80b5017098950fc58aad83c8c14978e&#34;</span><span class="op" id="7629640">,</span>&nbsp;<span class="string" id="7629642">&#34;abcdef&#34;</span><span class="op" id="7629650">}</span><span class="op" id="7629651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629654">{</span><span class="string" id="7629655">&#34;7ac66c0f148de9519b8bd264312c4d64&#34;</span><span class="op" id="7629689">,</span>&nbsp;<span class="string" id="7629691">&#34;abcdefg&#34;</span><span class="op" id="7629700">}</span><span class="op" id="7629701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629704">{</span><span class="string" id="7629705">&#34;e8dc4081b13434b45189a720b77b6818&#34;</span><span class="op" id="7629739">,</span>&nbsp;<span class="string" id="7629741">&#34;abcdefgh&#34;</span><span class="op" id="7629751">}</span><span class="op" id="7629752">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629755">{</span><span class="string" id="7629756">&#34;8aa99b1f439ff71293e95357bac6fd94&#34;</span><span class="op" id="7629790">,</span>&nbsp;<span class="string" id="7629792">&#34;abcdefghi&#34;</span><span class="op" id="7629803">}</span><span class="op" id="7629804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629807">{</span><span class="string" id="7629808">&#34;a925576942e94b2ef57a066101b48876&#34;</span><span class="op" id="7629842">,</span>&nbsp;<span class="string" id="7629844">&#34;abcdefghij&#34;</span><span class="op" id="7629856">}</span><span class="op" id="7629857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629860">{</span><span class="string" id="7629861">&#34;d747fc1719c7eacb84058196cfe56d57&#34;</span><span class="op" id="7629895">,</span>&nbsp;<span class="string" id="7629897">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="7629940">}</span><span class="op" id="7629941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629944">{</span><span class="string" id="7629945">&#34;bff2dcb37ef3a44ba43ab144768ca837&#34;</span><span class="op" id="7629979">,</span>&nbsp;<span class="string" id="7629981">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="7630040">}</span><span class="op" id="7630041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630044">{</span><span class="string" id="7630045">&#34;0441015ecb54a7342d017ed1bcfdbea5&#34;</span><span class="op" id="7630079">,</span>&nbsp;<span class="string" id="7630081">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="7630125">}</span><span class="op" id="7630126">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630129">{</span><span class="string" id="7630130">&#34;9e3cac8e9e9757a60c3ea391130d3689&#34;</span><span class="op" id="7630164">,</span>&nbsp;<span class="string" id="7630166">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="7630225">}</span><span class="op" id="7630226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630229">{</span><span class="string" id="7630230">&#34;a0f04459b031f916a59a35cc482dc039&#34;</span><span class="op" id="7630264">,</span>&nbsp;<span class="string" id="7630266">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="7630326">}</span><span class="op" id="7630327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630330">{</span><span class="string" id="7630331">&#34;e7a48e0fe884faf31475d2a04b1362cc&#34;</span><span class="op" id="7630365">,</span>&nbsp;<span class="string" id="7630367">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="7630396">}</span><span class="op" id="7630397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630400">{</span><span class="string" id="7630401">&#34;637d2fe925c07c113800509964fb0e06&#34;</span><span class="op" id="7630435">,</span>&nbsp;<span class="string" id="7630437">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="7630506">}</span><span class="op" id="7630507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630510">{</span><span class="string" id="7630511">&#34;834a8d18d5c6562119cf4c7f5086cb71&#34;</span><span class="op" id="7630545">,</span>&nbsp;<span class="string" id="7630547">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="7630606">}</span><span class="op" id="7630607">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630610">{</span><span class="string" id="7630611">&#34;de3a4d2fd6c73ec2db2abad23b444281&#34;</span><span class="op" id="7630645">,</span>&nbsp;<span class="string" id="7630647">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="7630737">}</span><span class="op" id="7630738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630741">{</span><span class="string" id="7630742">&#34;acf203f997e2cf74ea3aff86985aefaf&#34;</span><span class="op" id="7630776">,</span>&nbsp;<span class="string" id="7630778">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="7630855">}</span><span class="op" id="7630856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630859">{</span><span class="string" id="7630860">&#34;e1c1384cb4d2221dfdd7c795a4222c9a&#34;</span><span class="op" id="7630894">,</span>&nbsp;<span class="string" id="7630896">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="7630922">}</span><span class="op" id="7630923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630926">{</span><span class="string" id="7630927">&#34;c90f3ddecc54f34228c063d7525bf644&#34;</span><span class="op" id="7630961">,</span>&nbsp;<span class="string" id="7630963">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="7631014">}</span><span class="op" id="7631015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631018">{</span><span class="string" id="7631019">&#34;cdf7ab6c1fd49bd9933c43f3ea5af185&#34;</span><span class="op" id="7631053">,</span>&nbsp;<span class="string" id="7631055">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="7631129">}</span><span class="op" id="7631130">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631133">{</span><span class="string" id="7631134">&#34;83bc85234942fc883c063cbd7f0ad5d0&#34;</span><span class="op" id="7631168">,</span>&nbsp;<span class="string" id="7631170">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="7631218">}</span><span class="op" id="7631219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631222">{</span><span class="string" id="7631223">&#34;277cbe255686b48dd7e8f389394d9299&#34;</span><span class="op" id="7631257">,</span>&nbsp;<span class="string" id="7631259">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="7631331">}</span><span class="op" id="7631332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631335">{</span><span class="string" id="7631336">&#34;fd3fb0a7ffb8af16603f3d3af98f8e1f&#34;</span><span class="op" id="7631370">,</span>&nbsp;<span class="string" id="7631372">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="7631442">}</span><span class="op" id="7631443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631446">{</span><span class="string" id="7631447">&#34;469b13a78ebf297ecda64d4723655154&#34;</span><span class="op" id="7631481">,</span>&nbsp;<span class="string" id="7631483">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="7631517">}</span><span class="op" id="7631518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631521">{</span><span class="string" id="7631522">&#34;63eb3a2f466410104731c4b037600110&#34;</span><span class="op" id="7631556">,</span>&nbsp;<span class="string" id="7631558">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="7631648">}</span><span class="op" id="7631649">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631652">{</span><span class="string" id="7631653">&#34;72c2ed7592debca1c90fc0100f931a2f&#34;</span><span class="op" id="7631687">,</span>&nbsp;<span class="string" id="7631689">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="7631823">}</span><span class="op" id="7631824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631827">{</span><span class="string" id="7631828">&#34;132f7619d33b523b1d9e5bd8e0928355&#34;</span><span class="op" id="7631862">,</span>&nbsp;<span class="string" id="7631864">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="7631922">}</span><span class="op" id="7631923">,</span><br>
<span class="lineno"></span><span class="op" id="7631925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7631928">func</span>&nbsp;<span class="ident" id="7631933">TestGolden</span><span class="op" id="7631943">(</span><span class="ident" id="7631944">t</span>&nbsp;<span class="op" id="7631946">*</span><span class="ident" id="7631947">testing</span><span class="op" id="7631954">.</span><span class="ident" id="7631955">T</span><span class="op" id="7631956">)</span>&nbsp;<span class="op" id="7631958">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7631961">for</span>&nbsp;<span class="ident" id="7631965">i</span>&nbsp;<span class="op" id="7631967">:=</span>&nbsp;<span class="num" id="7631970">0</span><span class="op" id="7631971">;</span>&nbsp;<span class="ident" id="7631973">i</span>&nbsp;<span class="op" id="7631975">&lt;</span>&nbsp;<span class="builtinfunc" id="7631977">len</span><span class="op" id="7631980">(</span><span class="ident" id="7631981">golden</span><span class="op" id="7631987">)</span><span class="op" id="7631988">;</span>&nbsp;<span class="ident" id="7631990">i</span><span class="op" id="7631991">++</span>&nbsp;<span class="op" id="7631994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631998">g</span>&nbsp;<span class="op" id="7632000">:=</span>&nbsp;<span class="ident" id="7632003">golden</span><span class="op" id="7632009">[</span><span class="ident" id="7632010">i</span><span class="op" id="7632011">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632015">s</span>&nbsp;<span class="op" id="7632017">:=</span>&nbsp;<span class="ident" id="7632020">fmt</span><span class="op" id="7632023">.</span><span class="ident" id="7632024">Sprintf</span><span class="op" id="7632031">(</span><span class="string" id="7632032">&#34;%x&#34;</span><span class="op" id="7632036">,</span>&nbsp;<span class="ident" id="7632038">Sum</span><span class="op" id="7632041">(</span><span class="op" id="7632042">[</span><span class="op" id="7632043">]</span><span class="builtintype" id="7632044">byte</span><span class="op" id="7632048">(</span><span class="ident" id="7632049">g</span><span class="op" id="7632050">.</span><span class="ident" id="7632051">in</span><span class="op" id="7632053">)</span><span class="op" id="7632054">)</span><span class="op" id="7632055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7632059">if</span>&nbsp;<span class="ident" id="7632062">s</span>&nbsp;<span class="op" id="7632064">!=</span>&nbsp;<span class="ident" id="7632067">g</span><span class="op" id="7632068">.</span><span class="ident" id="7632069">out</span>&nbsp;<span class="op" id="7632073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632078">t</span><span class="op" id="7632079">.</span><span class="ident" id="7632080">Fatalf</span><span class="op" id="7632086">(</span><span class="string" id="7632087">&#34;Sum&nbsp;function:&nbsp;md5(%s)&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7632123">,</span>&nbsp;<span class="ident" id="7632125">g</span><span class="op" id="7632126">.</span><span class="ident" id="7632127">in</span><span class="op" id="7632129">,</span>&nbsp;<span class="ident" id="7632131">s</span><span class="op" id="7632132">,</span>&nbsp;<span class="ident" id="7632134">g</span><span class="op" id="7632135">.</span><span class="ident" id="7632136">out</span><span class="op" id="7632139">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632147">c</span>&nbsp;<span class="op" id="7632149">:=</span>&nbsp;<span class="ident" id="7632152">New</span><span class="op" id="7632155">(</span><span class="op" id="7632156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632160">buf</span>&nbsp;<span class="op" id="7632164">:=</span>&nbsp;<span class="builtinfunc" id="7632167">make</span><span class="op" id="7632171">(</span><span class="op" id="7632172">[</span><span class="op" id="7632173">]</span><span class="builtintype" id="7632174">byte</span><span class="op" id="7632178">,</span>&nbsp;<span class="builtinfunc" id="7632180">len</span><span class="op" id="7632183">(</span><span class="ident" id="7632184">g</span><span class="op" id="7632185">.</span><span class="ident" id="7632186">in</span><span class="op" id="7632188">)</span><span class="op" id="7632189">+</span><span class="num" id="7632190">4</span><span class="op" id="7632191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7632195">for</span>&nbsp;<span class="ident" id="7632199">j</span>&nbsp;<span class="op" id="7632201">:=</span>&nbsp;<span class="num" id="7632204">0</span><span class="op" id="7632205">;</span>&nbsp;<span class="ident" id="7632207">j</span>&nbsp;<span class="op" id="7632209">&lt;</span>&nbsp;<span class="num" id="7632211">3</span><span class="op" id="7632212">+</span><span class="num" id="7632213">4</span><span class="op" id="7632214">;</span>&nbsp;<span class="ident" id="7632216">j</span><span class="op" id="7632217">++</span>&nbsp;<span class="op" id="7632220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7632225">if</span>&nbsp;<span class="ident" id="7632228">j</span>&nbsp;<span class="op" id="7632230">&lt;</span>&nbsp;<span class="num" id="7632232">2</span>&nbsp;<span class="op" id="7632234">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632240">io</span><span class="op" id="7632242">.</span><span class="ident" id="7632243">WriteString</span><span class="op" id="7632254">(</span><span class="ident" id="7632255">c</span><span class="op" id="7632256">,</span>&nbsp;<span class="ident" id="7632258">g</span><span class="op" id="7632259">.</span><span class="ident" id="7632260">in</span><span class="op" id="7632262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632267">}</span>&nbsp;<span class="keyword" id="7632269">else</span>&nbsp;<span class="keyword" id="7632274">if</span>&nbsp;<span class="ident" id="7632277">j</span>&nbsp;<span class="op" id="7632279">==</span>&nbsp;<span class="num" id="7632282">2</span>&nbsp;<span class="op" id="7632284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632290">io</span><span class="op" id="7632292">.</span><span class="ident" id="7632293">WriteString</span><span class="op" id="7632304">(</span><span class="ident" id="7632305">c</span><span class="op" id="7632306">,</span>&nbsp;<span class="ident" id="7632308">g</span><span class="op" id="7632309">.</span><span class="ident" id="7632310">in</span><span class="op" id="7632312">[</span><span class="num" id="7632313">0</span><span class="op" id="7632314">:</span><span class="builtinfunc" id="7632315">len</span><span class="op" id="7632318">(</span><span class="ident" id="7632319">g</span><span class="op" id="7632320">.</span><span class="ident" id="7632321">in</span><span class="op" id="7632323">)</span><span class="op" id="7632324">/</span><span class="num" id="7632325">2</span><span class="op" id="7632326">]</span><span class="op" id="7632327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632333">c</span><span class="op" id="7632334">.</span><span class="ident" id="7632335">Sum</span><span class="op" id="7632338">(</span><span class="builtintype" id="7632339">nil</span><span class="op" id="7632342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632348">io</span><span class="op" id="7632350">.</span><span class="ident" id="7632351">WriteString</span><span class="op" id="7632362">(</span><span class="ident" id="7632363">c</span><span class="op" id="7632364">,</span>&nbsp;<span class="ident" id="7632366">g</span><span class="op" id="7632367">.</span><span class="ident" id="7632368">in</span><span class="op" id="7632370">[</span><span class="builtinfunc" id="7632371">len</span><span class="op" id="7632374">(</span><span class="ident" id="7632375">g</span><span class="op" id="7632376">.</span><span class="ident" id="7632377">in</span><span class="op" id="7632379">)</span><span class="op" id="7632380">/</span><span class="num" id="7632381">2</span><span class="op" id="7632382">:</span><span class="op" id="7632383">]</span><span class="op" id="7632384">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632389">}</span>&nbsp;<span class="keyword" id="7632391">else</span>&nbsp;<span class="keyword" id="7632396">if</span>&nbsp;<span class="ident" id="7632399">j</span>&nbsp;<span class="op" id="7632401">&gt;</span>&nbsp;<span class="num" id="7632403">2</span>&nbsp;<span class="op" id="7632405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7632411">//&nbsp;test&nbsp;unaligned&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632439">buf</span>&nbsp;<span class="op" id="7632443">=</span>&nbsp;<span class="ident" id="7632445">buf</span><span class="op" id="7632448">[</span><span class="num" id="7632449">1</span><span class="op" id="7632450">:</span><span class="op" id="7632451">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7632457">copy</span><span class="op" id="7632461">(</span><span class="ident" id="7632462">buf</span><span class="op" id="7632465">,</span>&nbsp;<span class="ident" id="7632467">g</span><span class="op" id="7632468">.</span><span class="ident" id="7632469">in</span><span class="op" id="7632471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632477">c</span><span class="op" id="7632478">.</span><span class="ident" id="7632479">Write</span><span class="op" id="7632484">(</span><span class="ident" id="7632485">buf</span><span class="op" id="7632488">[</span><span class="op" id="7632489">:</span><span class="builtinfunc" id="7632490">len</span><span class="op" id="7632493">(</span><span class="ident" id="7632494">g</span><span class="op" id="7632495">.</span><span class="ident" id="7632496">in</span><span class="op" id="7632498">)</span><span class="op" id="7632499">]</span><span class="op" id="7632500">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632510">s</span>&nbsp;<span class="op" id="7632512">:=</span>&nbsp;<span class="ident" id="7632515">fmt</span><span class="op" id="7632518">.</span><span class="ident" id="7632519">Sprintf</span><span class="op" id="7632526">(</span><span class="string" id="7632527">&#34;%x&#34;</span><span class="op" id="7632531">,</span>&nbsp;<span class="ident" id="7632533">c</span><span class="op" id="7632534">.</span><span class="ident" id="7632535">Sum</span><span class="op" id="7632538">(</span><span class="builtintype" id="7632539">nil</span><span class="op" id="7632542">)</span><span class="op" id="7632543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7632548">if</span>&nbsp;<span class="ident" id="7632551">s</span>&nbsp;<span class="op" id="7632553">!=</span>&nbsp;<span class="ident" id="7632556">g</span><span class="op" id="7632557">.</span><span class="ident" id="7632558">out</span>&nbsp;<span class="op" id="7632562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632568">t</span><span class="op" id="7632569">.</span><span class="ident" id="7632570">Fatalf</span><span class="op" id="7632576">(</span><span class="string" id="7632577">&#34;md5[%d](%s)&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7632603">,</span>&nbsp;<span class="ident" id="7632605">j</span><span class="op" id="7632606">,</span>&nbsp;<span class="ident" id="7632608">g</span><span class="op" id="7632609">.</span><span class="ident" id="7632610">in</span><span class="op" id="7632612">,</span>&nbsp;<span class="ident" id="7632614">s</span><span class="op" id="7632615">,</span>&nbsp;<span class="ident" id="7632617">g</span><span class="op" id="7632618">.</span><span class="ident" id="7632619">out</span><span class="op" id="7632622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632627">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632632">c</span><span class="op" id="7632633">.</span><span class="ident" id="7632634">Reset</span><span class="op" id="7632639">(</span><span class="op" id="7632640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632647">}</span><br>
<span class="lineno"></span><span class="op" id="7632649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="7632652">func</span>&nbsp;<span class="ident" id="7632657">TestLarge</span><span class="op" id="7632666">(</span><span class="ident" id="7632667">t</span>&nbsp;<span class="op" id="7632669">*</span><span class="ident" id="7632670">testing</span><span class="op" id="7632677">.</span><span class="ident" id="7632678">T</span><span class="op" id="7632679">)</span>&nbsp;<span class="op" id="7632681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7632684">const</span>&nbsp;<span class="ident" id="7632690">N</span>&nbsp;<span class="op" id="7632692">=</span>&nbsp;<span class="num" id="7632694">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632701">ok</span>&nbsp;<span class="op" id="7632704">:=</span>&nbsp;<span class="string" id="7632707">&#34;2bb571599a4180e1d542f76904adc3df&#34;</span>&nbsp;<span class="comment" id="7632742">//&nbsp;md5sum&nbsp;of&nbsp;&#34;0123456789&#34;&nbsp;*&nbsp;1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632776">block</span>&nbsp;<span class="op" id="7632782">:=</span>&nbsp;<span class="builtinfunc" id="7632785">make</span><span class="op" id="7632789">(</span><span class="op" id="7632790">[</span><span class="op" id="7632791">]</span><span class="builtintype" id="7632792">byte</span><span class="op" id="7632796">,</span>&nbsp;<span class="num" id="7632798">10004</span><span class="op" id="7632803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632806">c</span>&nbsp;<span class="op" id="7632808">:=</span>&nbsp;<span class="ident" id="7632811">New</span><span class="op" id="7632814">(</span><span class="op" id="7632815">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7632818">for</span>&nbsp;<span class="ident" id="7632822">offset</span>&nbsp;<span class="op" id="7632829">:=</span>&nbsp;<span class="num" id="7632832">0</span><span class="op" id="7632833">;</span>&nbsp;<span class="ident" id="7632835">offset</span>&nbsp;<span class="op" id="7632842">&lt;</span>&nbsp;<span class="num" id="7632844">4</span><span class="op" id="7632845">;</span>&nbsp;<span class="ident" id="7632847">offset</span><span class="op" id="7632853">++</span>&nbsp;<span class="op" id="7632856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7632860">for</span>&nbsp;<span class="ident" id="7632864">i</span>&nbsp;<span class="op" id="7632866">:=</span>&nbsp;<span class="num" id="7632869">0</span><span class="op" id="7632870">;</span>&nbsp;<span class="ident" id="7632872">i</span>&nbsp;<span class="op" id="7632874">&lt;</span>&nbsp;<span class="ident" id="7632876">N</span><span class="op" id="7632877">;</span>&nbsp;<span class="ident" id="7632879">i</span><span class="op" id="7632880">++</span>&nbsp;<span class="op" id="7632883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632888">block</span><span class="op" id="7632893">[</span><span class="ident" id="7632894">offset</span><span class="op" id="7632900">+</span><span class="ident" id="7632901">i</span><span class="op" id="7632902">]</span>&nbsp;<span class="op" id="7632904">=</span>&nbsp;<span class="string" id="7632906">&#39;0&#39;</span>&nbsp;<span class="op" id="7632910">+</span>&nbsp;<span class="builtintype" id="7632912">byte</span><span class="op" id="7632916">(</span><span class="ident" id="7632917">i</span><span class="op" id="7632918">%</span><span class="num" id="7632919">10</span><span class="op" id="7632921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7632929">for</span>&nbsp;<span class="ident" id="7632933">blockSize</span>&nbsp;<span class="op" id="7632943">:=</span>&nbsp;<span class="num" id="7632946">10</span><span class="op" id="7632948">;</span>&nbsp;<span class="ident" id="7632950">blockSize</span>&nbsp;<span class="op" id="7632960">&lt;=</span>&nbsp;<span class="ident" id="7632963">N</span><span class="op" id="7632964">;</span>&nbsp;<span class="ident" id="7632966">blockSize</span>&nbsp;<span class="op" id="7632976">*=</span>&nbsp;<span class="num" id="7632979">10</span>&nbsp;<span class="op" id="7632982">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632987">blocks</span>&nbsp;<span class="op" id="7632994">:=</span>&nbsp;<span class="ident" id="7632997">N</span>&nbsp;<span class="op" id="7632999">/</span>&nbsp;<span class="ident" id="7633001">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633014">b</span>&nbsp;<span class="op" id="7633016">:=</span>&nbsp;<span class="ident" id="7633019">block</span><span class="op" id="7633024">[</span><span class="ident" id="7633025">offset</span>&nbsp;<span class="op" id="7633032">:</span>&nbsp;<span class="ident" id="7633034">offset</span><span class="op" id="7633040">+</span><span class="ident" id="7633041">blockSize</span><span class="op" id="7633050">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633055">c</span><span class="op" id="7633056">.</span><span class="ident" id="7633057">Reset</span><span class="op" id="7633062">(</span><span class="op" id="7633063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7633068">for</span>&nbsp;<span class="ident" id="7633072">i</span>&nbsp;<span class="op" id="7633074">:=</span>&nbsp;<span class="num" id="7633077">0</span><span class="op" id="7633078">;</span>&nbsp;<span class="ident" id="7633080">i</span>&nbsp;<span class="op" id="7633082">&lt;</span>&nbsp;<span class="ident" id="7633084">blocks</span><span class="op" id="7633090">;</span>&nbsp;<span class="ident" id="7633092">i</span><span class="op" id="7633093">++</span>&nbsp;<span class="op" id="7633096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633102">c</span><span class="op" id="7633103">.</span><span class="ident" id="7633104">Write</span><span class="op" id="7633109">(</span><span class="ident" id="7633110">b</span><span class="op" id="7633111">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7633116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633121">s</span>&nbsp;<span class="op" id="7633123">:=</span>&nbsp;<span class="ident" id="7633126">fmt</span><span class="op" id="7633129">.</span><span class="ident" id="7633130">Sprintf</span><span class="op" id="7633137">(</span><span class="string" id="7633138">&#34;%x&#34;</span><span class="op" id="7633142">,</span>&nbsp;<span class="ident" id="7633144">c</span><span class="op" id="7633145">.</span><span class="ident" id="7633146">Sum</span><span class="op" id="7633149">(</span><span class="builtintype" id="7633150">nil</span><span class="op" id="7633153">)</span><span class="op" id="7633154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7633159">if</span>&nbsp;<span class="ident" id="7633162">s</span>&nbsp;<span class="op" id="7633164">!=</span>&nbsp;<span class="ident" id="7633167">ok</span>&nbsp;<span class="op" id="7633170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633176">t</span><span class="op" id="7633177">.</span><span class="ident" id="7633178">Fatalf</span><span class="op" id="7633184">(</span><span class="string" id="7633185">&#34;md5&nbsp;TestLarge&nbsp;offset=%d,&nbsp;blockSize=%d&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7633237">,</span>&nbsp;<span class="ident" id="7633239">offset</span><span class="op" id="7633245">,</span>&nbsp;<span class="ident" id="7633247">blockSize</span><span class="op" id="7633256">,</span>&nbsp;<span class="ident" id="7633258">s</span><span class="op" id="7633259">,</span>&nbsp;<span class="ident" id="7633261">ok</span><span class="op" id="7633263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7633268">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7633272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7633275">}</span><br>
<span class="lineno"></span><span class="op" id="7633277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7633280">//&nbsp;Tests&nbsp;that&nbsp;blockGeneric&nbsp;(pure&nbsp;Go)&nbsp;and&nbsp;block&nbsp;(in&nbsp;assembly&nbsp;for&nbsp;amd64,&nbsp;386,&nbsp;arm)&nbsp;match.</span><br>
<span class="lineno">110</span><span class="keyword" id="7633368">func</span>&nbsp;<span class="ident" id="7633373">TestBlockGeneric</span><span class="op" id="7633389">(</span><span class="ident" id="7633390">t</span>&nbsp;<span class="op" id="7633392">*</span><span class="ident" id="7633393">testing</span><span class="op" id="7633400">.</span><span class="ident" id="7633401">T</span><span class="op" id="7633402">)</span>&nbsp;<span class="op" id="7633404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633407">gen</span><span class="op" id="7633410">,</span>&nbsp;<span class="ident" id="7633412">asm</span>&nbsp;<span class="op" id="7633416">:=</span>&nbsp;<span class="ident" id="7633419">New</span><span class="op" id="7633422">(</span><span class="op" id="7633423">)</span><span class="op" id="7633424">.</span><span class="op" id="7633425">(</span><span class="op" id="7633426">*</span><span class="ident" id="7633427">digest</span><span class="op" id="7633433">)</span><span class="op" id="7633434">,</span>&nbsp;<span class="ident" id="7633436">New</span><span class="op" id="7633439">(</span><span class="op" id="7633440">)</span><span class="op" id="7633441">.</span><span class="op" id="7633442">(</span><span class="op" id="7633443">*</span><span class="ident" id="7633444">digest</span><span class="op" id="7633450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633453">buf</span>&nbsp;<span class="op" id="7633457">:=</span>&nbsp;<span class="builtinfunc" id="7633460">make</span><span class="op" id="7633464">(</span><span class="op" id="7633465">[</span><span class="op" id="7633466">]</span><span class="builtintype" id="7633467">byte</span><span class="op" id="7633471">,</span>&nbsp;<span class="ident" id="7633473">BlockSize</span><span class="op" id="7633482">*</span><span class="num" id="7633483">20</span><span class="op" id="7633485">)</span>&nbsp;<span class="comment" id="7633487">//&nbsp;arbitrary&nbsp;factor</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633508">rand</span><span class="op" id="7633512">.</span><span class="ident" id="7633513">Read</span><span class="op" id="7633517">(</span><span class="ident" id="7633518">buf</span><span class="op" id="7633521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633524">blockGeneric</span><span class="op" id="7633536">(</span><span class="ident" id="7633537">gen</span><span class="op" id="7633540">,</span>&nbsp;<span class="ident" id="7633542">buf</span><span class="op" id="7633545">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633548">block</span><span class="op" id="7633553">(</span><span class="ident" id="7633554">asm</span><span class="op" id="7633557">,</span>&nbsp;<span class="ident" id="7633559">buf</span><span class="op" id="7633562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7633565">if</span>&nbsp;<span class="op" id="7633568">*</span><span class="ident" id="7633569">gen</span>&nbsp;<span class="op" id="7633573">!=</span>&nbsp;<span class="op" id="7633576">*</span><span class="ident" id="7633577">asm</span>&nbsp;<span class="op" id="7633581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633585">t</span><span class="op" id="7633586">.</span><span class="ident" id="7633587">Error</span><span class="op" id="7633592">(</span><span class="string" id="7633593">&#34;block&nbsp;and&nbsp;blockGeneric&nbsp;resulted&nbsp;in&nbsp;different&nbsp;states&#34;</span><span class="op" id="7633646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7633649">}</span><br>
<span class="lineno"></span><span class="op" id="7633651">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="7633654">var</span>&nbsp;<span class="ident" id="7633658">bench</span>&nbsp;<span class="op" id="7633664">=</span>&nbsp;<span class="ident" id="7633666">New</span><span class="op" id="7633669">(</span><span class="op" id="7633670">)</span><br>
<span class="lineno"></span><span class="keyword" id="7633672">var</span>&nbsp;<span class="ident" id="7633676">buf</span>&nbsp;<span class="op" id="7633680">=</span>&nbsp;<span class="builtinfunc" id="7633682">make</span><span class="op" id="7633686">(</span><span class="op" id="7633687">[</span><span class="op" id="7633688">]</span><span class="builtintype" id="7633689">byte</span><span class="op" id="7633693">,</span>&nbsp;<span class="num" id="7633695">8192</span><span class="op" id="7633699">+</span><span class="num" id="7633700">1</span><span class="op" id="7633701">)</span><br>
<span class="lineno"></span><span class="keyword" id="7633703">var</span>&nbsp;<span class="ident" id="7633707">sum</span>&nbsp;<span class="op" id="7633711">=</span>&nbsp;<span class="builtinfunc" id="7633713">make</span><span class="op" id="7633717">(</span><span class="op" id="7633718">[</span><span class="op" id="7633719">]</span><span class="builtintype" id="7633720">byte</span><span class="op" id="7633724">,</span>&nbsp;<span class="ident" id="7633726">bench</span><span class="op" id="7633731">.</span><span class="ident" id="7633732">Size</span><span class="op" id="7633736">(</span><span class="op" id="7633737">)</span><span class="op" id="7633738">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="7633741">func</span>&nbsp;<span class="ident" id="7633746">benchmarkSize</span><span class="op" id="7633759">(</span><span class="ident" id="7633760">b</span>&nbsp;<span class="op" id="7633762">*</span><span class="ident" id="7633763">testing</span><span class="op" id="7633770">.</span><span class="ident" id="7633771">B</span><span class="op" id="7633772">,</span>&nbsp;<span class="ident" id="7633774">size</span>&nbsp;<span class="builtintype" id="7633779">int</span><span class="op" id="7633782">,</span>&nbsp;<span class="ident" id="7633784">unaligned</span>&nbsp;<span class="builtintype" id="7633794">bool</span><span class="op" id="7633798">)</span>&nbsp;<span class="op" id="7633800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633803">b</span><span class="op" id="7633804">.</span><span class="ident" id="7633805">SetBytes</span><span class="op" id="7633813">(</span><span class="builtintype" id="7633814">int64</span><span class="op" id="7633819">(</span><span class="ident" id="7633820">size</span><span class="op" id="7633824">)</span><span class="op" id="7633825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633828">buf</span>&nbsp;<span class="op" id="7633832">:=</span>&nbsp;<span class="ident" id="7633835">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7633840">if</span>&nbsp;<span class="ident" id="7633843">unaligned</span>&nbsp;<span class="op" id="7633853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7633857">if</span>&nbsp;<span class="builtintype" id="7633860">uintptr</span><span class="op" id="7633867">(</span><span class="ident" id="7633868">unsafe</span><span class="op" id="7633874">.</span><span class="ident" id="7633875">Pointer</span><span class="op" id="7633882">(</span><span class="op" id="7633883">&amp;</span><span class="ident" id="7633884">buf</span><span class="op" id="7633887">[</span><span class="num" id="7633888">0</span><span class="op" id="7633889">]</span><span class="op" id="7633890">)</span><span class="op" id="7633891">)</span><span class="op" id="7633892">&amp;</span><span class="op" id="7633893">(</span><span class="ident" id="7633894">unsafe</span><span class="op" id="7633900">.</span><span class="ident" id="7633901">Alignof</span><span class="op" id="7633908">(</span><span class="builtintype" id="7633909">uint32</span><span class="op" id="7633915">(</span><span class="num" id="7633916">0</span><span class="op" id="7633917">)</span><span class="op" id="7633918">)</span><span class="op" id="7633919">-</span><span class="num" id="7633920">1</span><span class="op" id="7633921">)</span>&nbsp;<span class="op" id="7633923">==</span>&nbsp;<span class="num" id="7633926">0</span>&nbsp;<span class="op" id="7633928">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633933">buf</span>&nbsp;<span class="op" id="7633937">=</span>&nbsp;<span class="ident" id="7633939">buf</span><span class="op" id="7633942">[</span><span class="num" id="7633943">1</span><span class="op" id="7633944">:</span><span class="op" id="7633945">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7633949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7633952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633955">b</span><span class="op" id="7633956">.</span><span class="ident" id="7633957">ResetTimer</span><span class="op" id="7633967">(</span><span class="op" id="7633968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7633971">for</span>&nbsp;<span class="ident" id="7633975">i</span>&nbsp;<span class="op" id="7633977">:=</span>&nbsp;<span class="num" id="7633980">0</span><span class="op" id="7633981">;</span>&nbsp;<span class="ident" id="7633983">i</span>&nbsp;<span class="op" id="7633985">&lt;</span>&nbsp;<span class="ident" id="7633987">b</span><span class="op" id="7633988">.</span><span class="ident" id="7633989">N</span><span class="op" id="7633990">;</span>&nbsp;<span class="ident" id="7633992">i</span><span class="op" id="7633993">++</span>&nbsp;<span class="op" id="7633996">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634000">bench</span><span class="op" id="7634005">.</span><span class="ident" id="7634006">Reset</span><span class="op" id="7634011">(</span><span class="op" id="7634012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634016">bench</span><span class="op" id="7634021">.</span><span class="ident" id="7634022">Write</span><span class="op" id="7634027">(</span><span class="ident" id="7634028">buf</span><span class="op" id="7634031">[</span><span class="op" id="7634032">:</span><span class="ident" id="7634033">size</span><span class="op" id="7634037">]</span><span class="op" id="7634038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634042">bench</span><span class="op" id="7634047">.</span><span class="ident" id="7634048">Sum</span><span class="op" id="7634051">(</span><span class="ident" id="7634052">sum</span><span class="op" id="7634055">[</span><span class="op" id="7634056">:</span><span class="num" id="7634057">0</span><span class="op" id="7634058">]</span><span class="op" id="7634059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7634062">}</span><br>
<span class="lineno"></span><span class="op" id="7634064">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7634067">func</span>&nbsp;<span class="ident" id="7634072">BenchmarkHash8Bytes</span><span class="op" id="7634091">(</span><span class="ident" id="7634092">b</span>&nbsp;<span class="op" id="7634094">*</span><span class="ident" id="7634095">testing</span><span class="op" id="7634102">.</span><span class="ident" id="7634103">B</span><span class="op" id="7634104">)</span>&nbsp;<span class="op" id="7634106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634109">benchmarkSize</span><span class="op" id="7634122">(</span><span class="ident" id="7634123">b</span><span class="op" id="7634124">,</span>&nbsp;<span class="num" id="7634126">8</span><span class="op" id="7634127">,</span>&nbsp;<span class="builtintype" id="7634129">false</span><span class="op" id="7634134">)</span><br>
<span class="lineno"></span><span class="op" id="7634136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="keyword" id="7634139">func</span>&nbsp;<span class="ident" id="7634144">BenchmarkHash1K</span><span class="op" id="7634159">(</span><span class="ident" id="7634160">b</span>&nbsp;<span class="op" id="7634162">*</span><span class="ident" id="7634163">testing</span><span class="op" id="7634170">.</span><span class="ident" id="7634171">B</span><span class="op" id="7634172">)</span>&nbsp;<span class="op" id="7634174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634177">benchmarkSize</span><span class="op" id="7634190">(</span><span class="ident" id="7634191">b</span><span class="op" id="7634192">,</span>&nbsp;<span class="num" id="7634194">1024</span><span class="op" id="7634198">,</span>&nbsp;<span class="builtintype" id="7634200">false</span><span class="op" id="7634205">)</span><br>
<span class="lineno"></span><span class="op" id="7634207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7634210">func</span>&nbsp;<span class="ident" id="7634215">BenchmarkHash8K</span><span class="op" id="7634230">(</span><span class="ident" id="7634231">b</span>&nbsp;<span class="op" id="7634233">*</span><span class="ident" id="7634234">testing</span><span class="op" id="7634241">.</span><span class="ident" id="7634242">B</span><span class="op" id="7634243">)</span>&nbsp;<span class="op" id="7634245">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634248">benchmarkSize</span><span class="op" id="7634261">(</span><span class="ident" id="7634262">b</span><span class="op" id="7634263">,</span>&nbsp;<span class="num" id="7634265">8192</span><span class="op" id="7634269">,</span>&nbsp;<span class="builtintype" id="7634271">false</span><span class="op" id="7634276">)</span><br>
<span class="lineno"></span><span class="op" id="7634278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7634281">func</span>&nbsp;<span class="ident" id="7634286">BenchmarkHash8BytesUnaligned</span><span class="op" id="7634314">(</span><span class="ident" id="7634315">b</span>&nbsp;<span class="op" id="7634317">*</span><span class="ident" id="7634318">testing</span><span class="op" id="7634325">.</span><span class="ident" id="7634326">B</span><span class="op" id="7634327">)</span>&nbsp;<span class="op" id="7634329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634332">benchmarkSize</span><span class="op" id="7634345">(</span><span class="ident" id="7634346">b</span><span class="op" id="7634347">,</span>&nbsp;<span class="num" id="7634349">8</span><span class="op" id="7634350">,</span>&nbsp;<span class="builtintype" id="7634352">true</span><span class="op" id="7634356">)</span><br>
<span class="lineno">155</span><span class="op" id="7634358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7634361">func</span>&nbsp;<span class="ident" id="7634366">BenchmarkHash1KUnaligned</span><span class="op" id="7634390">(</span><span class="ident" id="7634391">b</span>&nbsp;<span class="op" id="7634393">*</span><span class="ident" id="7634394">testing</span><span class="op" id="7634401">.</span><span class="ident" id="7634402">B</span><span class="op" id="7634403">)</span>&nbsp;<span class="op" id="7634405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634408">benchmarkSize</span><span class="op" id="7634421">(</span><span class="ident" id="7634422">b</span><span class="op" id="7634423">,</span>&nbsp;<span class="num" id="7634425">1024</span><span class="op" id="7634429">,</span>&nbsp;<span class="builtintype" id="7634431">true</span><span class="op" id="7634435">)</span><br>
<span class="lineno"></span><span class="op" id="7634437">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="keyword" id="7634440">func</span>&nbsp;<span class="ident" id="7634445">BenchmarkHash8KUnaligned</span><span class="op" id="7634469">(</span><span class="ident" id="7634470">b</span>&nbsp;<span class="op" id="7634472">*</span><span class="ident" id="7634473">testing</span><span class="op" id="7634480">.</span><span class="ident" id="7634481">B</span><span class="op" id="7634482">)</span>&nbsp;<span class="op" id="7634484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634487">benchmarkSize</span><span class="op" id="7634500">(</span><span class="ident" id="7634501">b</span><span class="op" id="7634502">,</span>&nbsp;<span class="num" id="7634504">8192</span><span class="op" id="7634508">,</span>&nbsp;<span class="builtintype" id="7634510">true</span><span class="op" id="7634514">)</span><br>
<span class="lineno"></span><span class="op" id="7634516">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
