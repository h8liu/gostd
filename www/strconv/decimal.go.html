<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2962285">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2962340">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2962394">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2962445">//&nbsp;Multiprecision&nbsp;decimal&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2962480">//&nbsp;For&nbsp;floating-point&nbsp;formatting&nbsp;only;&nbsp;not&nbsp;general&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="comment" id="2962540">//&nbsp;Only&nbsp;operations&nbsp;are&nbsp;assign&nbsp;and&nbsp;(binary)&nbsp;left/right&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="2962601">//&nbsp;Can&nbsp;do&nbsp;binary&nbsp;floating&nbsp;point&nbsp;in&nbsp;multiprecision&nbsp;decimal&nbsp;precisely</span><br>
<span class="lineno"></span><span class="comment" id="2962669">//&nbsp;because&nbsp;2&nbsp;divides&nbsp;10;&nbsp;cannot&nbsp;do&nbsp;decimal&nbsp;floating&nbsp;point</span><br>
<span class="lineno">10</span><span class="comment" id="2962727">//&nbsp;in&nbsp;multiprecision&nbsp;binary&nbsp;precisely.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2962767">package</span>&nbsp;<span class="ident" id="2962775">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2962784">type</span>&nbsp;<span class="ident" id="2962789">decimal</span>&nbsp;<span class="keyword" id="2962797">struct</span>&nbsp;<span class="op" id="2962804">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962807">d</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2962813">[</span><span class="num" id="2962814">800</span><span class="op" id="2962817">]</span><span class="builtintype" id="2962818">byte</span>&nbsp;<span class="comment" id="2962823">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962834">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2962840">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2962850">//&nbsp;number&nbsp;of&nbsp;digits&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962876">dp</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2962882">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2962892">//&nbsp;decimal&nbsp;point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962910">neg</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2962916">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962922">trunc</span>&nbsp;<span class="builtintype" id="2962928">bool</span>&nbsp;<span class="comment" id="2962933">//&nbsp;discarded&nbsp;nonzero&nbsp;digits&nbsp;beyond&nbsp;d[:nd]</span><br>
<span class="lineno">20</span><span class="op" id="2962975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2962978">func</span>&nbsp;<span class="op" id="2962983">(</span><span class="ident" id="2962984">a</span>&nbsp;<span class="op" id="2962986">*</span><span class="ident" id="2962987"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2962994">)</span>&nbsp;<span class="ident" id="2962996">String</span><span class="op" id="2963002">(</span><span class="op" id="2963003">)</span>&nbsp;<span class="builtintype" id="2963005">string</span>&nbsp;<span class="op" id="2963012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963015">n</span>&nbsp;<span class="op" id="2963017">:=</span>&nbsp;<span class="num" id="2963020">10</span>&nbsp;<span class="op" id="2963023">+</span>&nbsp;<span class="ident" id="2963025"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963026">.</span><span class="ident" id="2963027">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963031">if</span>&nbsp;<span class="ident" id="2963034"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963035">.</span><span class="ident" id="2963036">dp</span>&nbsp;<span class="op" id="2963039">&gt;</span>&nbsp;<span class="num" id="2963041">0</span>&nbsp;<span class="op" id="2963043">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963047"><a href="/strconv/decimal.go.html#2963015">n</a></span>&nbsp;<span class="op" id="2963049">+=</span>&nbsp;<span class="ident" id="2963052"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963053">.</span><span class="ident" id="2963054">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963061">if</span>&nbsp;<span class="ident" id="2963064"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963065">.</span><span class="ident" id="2963066">dp</span>&nbsp;<span class="op" id="2963069">&lt;</span>&nbsp;<span class="num" id="2963071">0</span>&nbsp;<span class="op" id="2963073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963077"><a href="/strconv/decimal.go.html#2963015">n</a></span>&nbsp;<span class="op" id="2963079">+=</span>&nbsp;<span class="op" id="2963082">-</span><span class="ident" id="2963083"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963084">.</span><span class="ident" id="2963085">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963089">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963093">buf</span>&nbsp;<span class="op" id="2963097">:=</span>&nbsp;<span class="builtinfunc" id="2963100">make</span><span class="op" id="2963104">(</span><span class="op" id="2963105">[</span><span class="op" id="2963106">]</span><span class="builtintype" id="2963107">byte</span><span class="op" id="2963111">,</span>&nbsp;<span class="ident" id="2963113"><a href="/strconv/decimal.go.html#2963015">n</a></span><span class="op" id="2963114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963117">w</span>&nbsp;<span class="op" id="2963119">:=</span>&nbsp;<span class="num" id="2963122">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963125">switch</span>&nbsp;<span class="op" id="2963132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963135">case</span>&nbsp;<span class="ident" id="2963140"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963141">.</span><span class="ident" id="2963142">nd</span>&nbsp;<span class="op" id="2963145">==</span>&nbsp;<span class="num" id="2963148">0</span><span class="op" id="2963149">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963153">return</span>&nbsp;<span class="string" id="2963160">&#34;0&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963166">case</span>&nbsp;<span class="ident" id="2963171"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963172">.</span><span class="ident" id="2963173">dp</span>&nbsp;<span class="op" id="2963176">&lt;=</span>&nbsp;<span class="num" id="2963179">0</span><span class="op" id="2963180">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2963184">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;decimal&nbsp;point&nbsp;and&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963239"><a href="/strconv/decimal.go.html#2963093">buf</a></span><span class="op" id="2963242">[</span><span class="ident" id="2963243"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963244">]</span>&nbsp;<span class="op" id="2963246">=</span>&nbsp;<span class="string" id="2963248">&#39;0&#39;</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963254"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963255">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963260"><a href="/strconv/decimal.go.html#2963093">buf</a></span><span class="op" id="2963263">[</span><span class="ident" id="2963264"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963265">]</span>&nbsp;<span class="op" id="2963267">=</span>&nbsp;<span class="string" id="2963269">&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963275"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963276">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963281"><a href="/strconv/decimal.go.html#2963117">w</a></span>&nbsp;<span class="op" id="2963283">+=</span>&nbsp;<span class="ident" id="2963286"><a href="/strconv/decimal.go.html#2963674">digitZero</a></span><span class="op" id="2963295">(</span><span class="ident" id="2963296"><a href="/strconv/decimal.go.html#2963093">buf</a></span><span class="op" id="2963299">[</span><span class="ident" id="2963300"><a href="/strconv/decimal.go.html#2963117">w</a></span>&nbsp;<span class="op" id="2963302">:</span>&nbsp;<span class="ident" id="2963304"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963305">+</span><span class="op" id="2963306">-</span><span class="ident" id="2963307"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963308">.</span><span class="ident" id="2963309">dp</span><span class="op" id="2963311">]</span><span class="op" id="2963312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963316"><a href="/strconv/decimal.go.html#2963117">w</a></span>&nbsp;<span class="op" id="2963318">+=</span>&nbsp;<span class="builtinfunc" id="2963321">copy</span><span class="op" id="2963325">(</span><span class="ident" id="2963326"><a href="/strconv/decimal.go.html#2963093">buf</a></span><span class="op" id="2963329">[</span><span class="ident" id="2963330"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963331">:</span><span class="op" id="2963332">]</span><span class="op" id="2963333">,</span>&nbsp;<span class="ident" id="2963335"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963336">.</span><span class="ident" id="2963337">d</span><span class="op" id="2963338">[</span><span class="num" id="2963339">0</span><span class="op" id="2963340">:</span><span class="ident" id="2963341"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963342">.</span><span class="ident" id="2963343">nd</span><span class="op" id="2963345">]</span><span class="op" id="2963346">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963350">case</span>&nbsp;<span class="ident" id="2963355"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963356">.</span><span class="ident" id="2963357">dp</span>&nbsp;<span class="op" id="2963360">&lt;</span>&nbsp;<span class="ident" id="2963362"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963363">.</span><span class="ident" id="2963364">nd</span><span class="op" id="2963366">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2963370">//&nbsp;decimal&nbsp;point&nbsp;in&nbsp;middle&nbsp;of&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963409"><a href="/strconv/decimal.go.html#2963117">w</a></span>&nbsp;<span class="op" id="2963411">+=</span>&nbsp;<span class="builtinfunc" id="2963414">copy</span><span class="op" id="2963418">(</span><span class="ident" id="2963419"><a href="/strconv/decimal.go.html#2963093">buf</a></span><span class="op" id="2963422">[</span><span class="ident" id="2963423"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963424">:</span><span class="op" id="2963425">]</span><span class="op" id="2963426">,</span>&nbsp;<span class="ident" id="2963428"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963429">.</span><span class="ident" id="2963430">d</span><span class="op" id="2963431">[</span><span class="num" id="2963432">0</span><span class="op" id="2963433">:</span><span class="ident" id="2963434"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963435">.</span><span class="ident" id="2963436">dp</span><span class="op" id="2963438">]</span><span class="op" id="2963439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963443"><a href="/strconv/decimal.go.html#2963093">buf</a></span><span class="op" id="2963446">[</span><span class="ident" id="2963447"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963448">]</span>&nbsp;<span class="op" id="2963450">=</span>&nbsp;<span class="string" id="2963452">&#39;.&#39;</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963458"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963459">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963464"><a href="/strconv/decimal.go.html#2963117">w</a></span>&nbsp;<span class="op" id="2963466">+=</span>&nbsp;<span class="builtinfunc" id="2963469">copy</span><span class="op" id="2963473">(</span><span class="ident" id="2963474"><a href="/strconv/decimal.go.html#2963093">buf</a></span><span class="op" id="2963477">[</span><span class="ident" id="2963478"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963479">:</span><span class="op" id="2963480">]</span><span class="op" id="2963481">,</span>&nbsp;<span class="ident" id="2963483"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963484">.</span><span class="ident" id="2963485">d</span><span class="op" id="2963486">[</span><span class="ident" id="2963487"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963488">.</span><span class="ident" id="2963489">dp</span><span class="op" id="2963491">:</span><span class="ident" id="2963492"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963493">.</span><span class="ident" id="2963494">nd</span><span class="op" id="2963496">]</span><span class="op" id="2963497">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963501">default</span><span class="op" id="2963508">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2963512">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;digits&nbsp;and&nbsp;decimal&nbsp;point</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963567"><a href="/strconv/decimal.go.html#2963117">w</a></span>&nbsp;<span class="op" id="2963569">+=</span>&nbsp;<span class="builtinfunc" id="2963572">copy</span><span class="op" id="2963576">(</span><span class="ident" id="2963577"><a href="/strconv/decimal.go.html#2963093">buf</a></span><span class="op" id="2963580">[</span><span class="ident" id="2963581"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963582">:</span><span class="op" id="2963583">]</span><span class="op" id="2963584">,</span>&nbsp;<span class="ident" id="2963586"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963587">.</span><span class="ident" id="2963588">d</span><span class="op" id="2963589">[</span><span class="num" id="2963590">0</span><span class="op" id="2963591">:</span><span class="ident" id="2963592"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963593">.</span><span class="ident" id="2963594">nd</span><span class="op" id="2963596">]</span><span class="op" id="2963597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963601"><a href="/strconv/decimal.go.html#2963117">w</a></span>&nbsp;<span class="op" id="2963603">+=</span>&nbsp;<span class="ident" id="2963606"><a href="/strconv/decimal.go.html#2963674">digitZero</a></span><span class="op" id="2963615">(</span><span class="ident" id="2963616"><a href="/strconv/decimal.go.html#2963093">buf</a></span><span class="op" id="2963619">[</span><span class="ident" id="2963620"><a href="/strconv/decimal.go.html#2963117">w</a></span>&nbsp;<span class="op" id="2963622">:</span>&nbsp;<span class="ident" id="2963624"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963625">+</span><span class="ident" id="2963626"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963627">.</span><span class="ident" id="2963628">dp</span><span class="op" id="2963630">-</span><span class="ident" id="2963631"><a href="/strconv/decimal.go.html#2962984">a</a></span><span class="op" id="2963632">.</span><span class="ident" id="2963633">nd</span><span class="op" id="2963635">]</span><span class="op" id="2963636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963642">return</span>&nbsp;<span class="builtintype" id="2963649">string</span><span class="op" id="2963655">(</span><span class="ident" id="2963656"><a href="/strconv/decimal.go.html#2963093">buf</a></span><span class="op" id="2963659">[</span><span class="num" id="2963660">0</span><span class="op" id="2963661">:</span><span class="ident" id="2963662"><a href="/strconv/decimal.go.html#2963117">w</a></span><span class="op" id="2963663">]</span><span class="op" id="2963664">)</span><br>
<span class="lineno"></span><span class="op" id="2963666">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2963669">func</span>&nbsp;<span class="ident" id="2963674">digitZero</span><span class="op" id="2963683">(</span><span class="ident" id="2963684">dst</span>&nbsp;<span class="op" id="2963688">[</span><span class="op" id="2963689">]</span><span class="builtintype" id="2963690">byte</span><span class="op" id="2963694">)</span>&nbsp;<span class="builtintype" id="2963696">int</span>&nbsp;<span class="op" id="2963700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963703">for</span>&nbsp;<span class="ident" id="2963707">i</span>&nbsp;<span class="op" id="2963709">:=</span>&nbsp;<span class="keyword" id="2963712">range</span>&nbsp;<span class="ident" id="2963718"><a href="/strconv/decimal.go.html#2963684">dst</a></span>&nbsp;<span class="op" id="2963722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963726"><a href="/strconv/decimal.go.html#2963684">dst</a></span><span class="op" id="2963729">[</span><span class="ident" id="2963730"><a href="/strconv/decimal.go.html#2963707">i</a></span><span class="op" id="2963731">]</span>&nbsp;<span class="op" id="2963733">=</span>&nbsp;<span class="string" id="2963735">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963740">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963743">return</span>&nbsp;<span class="builtinfunc" id="2963750">len</span><span class="op" id="2963753">(</span><span class="ident" id="2963754"><a href="/strconv/decimal.go.html#2963684">dst</a></span><span class="op" id="2963757">)</span><br>
<span class="lineno"></span><span class="op" id="2963759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2963762">//&nbsp;trim&nbsp;trailing&nbsp;zeros&nbsp;from&nbsp;number.</span><br>
<span class="lineno"></span><span class="comment" id="2963798">//&nbsp;(They&nbsp;are&nbsp;meaningless;&nbsp;the&nbsp;decimal&nbsp;point&nbsp;is&nbsp;tracked</span><br>
<span class="lineno">70</span><span class="comment" id="2963853">//&nbsp;independent&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;digits.)</span><br>
<span class="lineno"></span><span class="keyword" id="2963894">func</span>&nbsp;<span class="ident" id="2963899">trim</span><span class="op" id="2963903">(</span><span class="ident" id="2963904">a</span>&nbsp;<span class="op" id="2963906">*</span><span class="ident" id="2963907"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2963914">)</span>&nbsp;<span class="op" id="2963916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963919">for</span>&nbsp;<span class="ident" id="2963923"><a href="/strconv/decimal.go.html#2963904">a</a></span><span class="op" id="2963924">.</span><span class="ident" id="2963925">nd</span>&nbsp;<span class="op" id="2963928">&gt;</span>&nbsp;<span class="num" id="2963930">0</span>&nbsp;<span class="op" id="2963932">&amp;&amp;</span>&nbsp;<span class="ident" id="2963935"><a href="/strconv/decimal.go.html#2963904">a</a></span><span class="op" id="2963936">.</span><span class="ident" id="2963937">d</span><span class="op" id="2963938">[</span><span class="ident" id="2963939"><a href="/strconv/decimal.go.html#2963904">a</a></span><span class="op" id="2963940">.</span><span class="ident" id="2963941">nd</span><span class="op" id="2963943">-</span><span class="num" id="2963944">1</span><span class="op" id="2963945">]</span>&nbsp;<span class="op" id="2963947">==</span>&nbsp;<span class="string" id="2963950">&#39;0&#39;</span>&nbsp;<span class="op" id="2963954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963958"><a href="/strconv/decimal.go.html#2963904">a</a></span><span class="op" id="2963959">.</span><span class="ident" id="2963960">nd</span><span class="op" id="2963962">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963966">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963969">if</span>&nbsp;<span class="ident" id="2963972"><a href="/strconv/decimal.go.html#2963904">a</a></span><span class="op" id="2963973">.</span><span class="ident" id="2963974">nd</span>&nbsp;<span class="op" id="2963977">==</span>&nbsp;<span class="num" id="2963980">0</span>&nbsp;<span class="op" id="2963982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963986"><a href="/strconv/decimal.go.html#2963904">a</a></span><span class="op" id="2963987">.</span><span class="ident" id="2963988">dp</span>&nbsp;<span class="op" id="2963991">=</span>&nbsp;<span class="num" id="2963993">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963996">}</span><br>
<span class="lineno"></span><span class="op" id="2963998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="2964001">//&nbsp;Assign&nbsp;v&nbsp;to&nbsp;a.</span><br>
<span class="lineno"></span><span class="keyword" id="2964019">func</span>&nbsp;<span class="op" id="2964024">(</span><span class="ident" id="2964025">a</span>&nbsp;<span class="op" id="2964027">*</span><span class="ident" id="2964028"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2964035">)</span>&nbsp;<span class="ident" id="2964037">Assign</span><span class="op" id="2964043">(</span><span class="ident" id="2964044">v</span>&nbsp;<span class="ident" id="2964046">uint64</span><span class="op" id="2964052">)</span>&nbsp;<span class="op" id="2964054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964057">var</span>&nbsp;<span class="ident" id="2964061">buf</span>&nbsp;<span class="op" id="2964065">[</span><span class="num" id="2964066">24</span><span class="op" id="2964068">]</span><span class="builtintype" id="2964069">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2964076">//&nbsp;Write&nbsp;reversed&nbsp;decimal&nbsp;in&nbsp;buf.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964111">n</span>&nbsp;<span class="op" id="2964113">:=</span>&nbsp;<span class="num" id="2964116">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964119">for</span>&nbsp;<span class="ident" id="2964123"><a href="/strconv/decimal.go.html#2964044">v</a></span>&nbsp;<span class="op" id="2964125">&gt;</span>&nbsp;<span class="num" id="2964127">0</span>&nbsp;<span class="op" id="2964129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964133">v1</span>&nbsp;<span class="op" id="2964136">:=</span>&nbsp;<span class="ident" id="2964139"><a href="/strconv/decimal.go.html#2964044">v</a></span>&nbsp;<span class="op" id="2964141">/</span>&nbsp;<span class="num" id="2964143">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964148"><a href="/strconv/decimal.go.html#2964044">v</a></span>&nbsp;<span class="op" id="2964150">-=</span>&nbsp;<span class="num" id="2964153">10</span>&nbsp;<span class="op" id="2964156">*</span>&nbsp;<span class="ident" id="2964158"><a href="/strconv/decimal.go.html#2964133">v1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964163"><a href="/strconv/decimal.go.html#2964061">buf</a></span><span class="op" id="2964166">[</span><span class="ident" id="2964167"><a href="/strconv/decimal.go.html#2964111">n</a></span><span class="op" id="2964168">]</span>&nbsp;<span class="op" id="2964170">=</span>&nbsp;<span class="builtintype" id="2964172">byte</span><span class="op" id="2964176">(</span><span class="ident" id="2964177"><a href="/strconv/decimal.go.html#2964044">v</a></span>&nbsp;<span class="op" id="2964179">+</span>&nbsp;<span class="string" id="2964181">&#39;0&#39;</span><span class="op" id="2964184">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964188"><a href="/strconv/decimal.go.html#2964111">n</a></span><span class="op" id="2964189">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964194"><a href="/strconv/decimal.go.html#2964044">v</a></span>&nbsp;<span class="op" id="2964196">=</span>&nbsp;<span class="ident" id="2964198"><a href="/strconv/decimal.go.html#2964133">v1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2964206">//&nbsp;Reverse&nbsp;again&nbsp;to&nbsp;produce&nbsp;forward&nbsp;decimal&nbsp;in&nbsp;a.d.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964259"><a href="/strconv/decimal.go.html#2964025">a</a></span><span class="op" id="2964260">.</span><span class="ident" id="2964261">nd</span>&nbsp;<span class="op" id="2964264">=</span>&nbsp;<span class="num" id="2964266">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964269">for</span>&nbsp;<span class="ident" id="2964273"><a href="/strconv/decimal.go.html#2964111">n</a></span><span class="op" id="2964274">--</span><span class="op" id="2964276">;</span>&nbsp;<span class="ident" id="2964278"><a href="/strconv/decimal.go.html#2964111">n</a></span>&nbsp;<span class="op" id="2964280">&gt;=</span>&nbsp;<span class="num" id="2964283">0</span><span class="op" id="2964284">;</span>&nbsp;<span class="ident" id="2964286"><a href="/strconv/decimal.go.html#2964111">n</a></span><span class="op" id="2964287">--</span>&nbsp;<span class="op" id="2964290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964294"><a href="/strconv/decimal.go.html#2964025">a</a></span><span class="op" id="2964295">.</span><span class="ident" id="2964296">d</span><span class="op" id="2964297">[</span><span class="ident" id="2964298"><a href="/strconv/decimal.go.html#2964025">a</a></span><span class="op" id="2964299">.</span><span class="ident" id="2964300">nd</span><span class="op" id="2964302">]</span>&nbsp;<span class="op" id="2964304">=</span>&nbsp;<span class="ident" id="2964306"><a href="/strconv/decimal.go.html#2964061">buf</a></span><span class="op" id="2964309">[</span><span class="ident" id="2964310"><a href="/strconv/decimal.go.html#2964111">n</a></span><span class="op" id="2964311">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964315"><a href="/strconv/decimal.go.html#2964025">a</a></span><span class="op" id="2964316">.</span><span class="ident" id="2964317">nd</span><span class="op" id="2964319">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964323">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964326"><a href="/strconv/decimal.go.html#2964025">a</a></span><span class="op" id="2964327">.</span><span class="ident" id="2964328">dp</span>&nbsp;<span class="op" id="2964331">=</span>&nbsp;<span class="ident" id="2964333"><a href="/strconv/decimal.go.html#2964025">a</a></span><span class="op" id="2964334">.</span><span class="ident" id="2964335">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964339"><a href="/strconv/decimal.go.html#2963899">trim</a></span><span class="op" id="2964343">(</span><span class="ident" id="2964344"><a href="/strconv/decimal.go.html#2964025">a</a></span><span class="op" id="2964345">)</span><br>
<span class="lineno"></span><span class="op" id="2964347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2964350">//&nbsp;Maximum&nbsp;shift&nbsp;that&nbsp;we&nbsp;can&nbsp;do&nbsp;in&nbsp;one&nbsp;pass&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno">105</span><span class="comment" id="2964412">//&nbsp;Signed&nbsp;int&nbsp;has&nbsp;31&nbsp;bits,&nbsp;and&nbsp;we&nbsp;have&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;accommodate&nbsp;9&lt;&lt;k.</span><br>
<span class="lineno"></span><span class="keyword" id="2964483">const</span>&nbsp;<span class="ident" id="2964489">maxShift</span>&nbsp;<span class="op" id="2964498">=</span>&nbsp;<span class="num" id="2964500">27</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2964504">//&nbsp;Binary&nbsp;shift&nbsp;right&nbsp;(*&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2964577">func</span>&nbsp;<span class="ident" id="2964582">rightShift</span><span class="op" id="2964592">(</span><span class="ident" id="2964593">a</span>&nbsp;<span class="op" id="2964595">*</span><span class="ident" id="2964596"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2964603">,</span>&nbsp;<span class="ident" id="2964605">k</span>&nbsp;<span class="builtintype" id="2964607">uint</span><span class="op" id="2964611">)</span>&nbsp;<span class="op" id="2964613">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964616">r</span>&nbsp;<span class="op" id="2964618">:=</span>&nbsp;<span class="num" id="2964621">0</span>&nbsp;<span class="comment" id="2964623">//&nbsp;read&nbsp;pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964640">w</span>&nbsp;<span class="op" id="2964642">:=</span>&nbsp;<span class="num" id="2964645">0</span>&nbsp;<span class="comment" id="2964647">//&nbsp;write&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2964666">//&nbsp;Pick&nbsp;up&nbsp;enough&nbsp;leading&nbsp;digits&nbsp;to&nbsp;cover&nbsp;first&nbsp;shift.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964722">n</span>&nbsp;<span class="op" id="2964724">:=</span>&nbsp;<span class="num" id="2964727">0</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964730">for</span>&nbsp;<span class="op" id="2964734">;</span>&nbsp;<span class="ident" id="2964736"><a href="/strconv/decimal.go.html#2964722">n</a></span><span class="op" id="2964737">&gt;&gt;</span><span class="ident" id="2964739"><a href="/strconv/decimal.go.html#2964605">k</a></span>&nbsp;<span class="op" id="2964741">==</span>&nbsp;<span class="num" id="2964744">0</span><span class="op" id="2964745">;</span>&nbsp;<span class="ident" id="2964747"><a href="/strconv/decimal.go.html#2964616">r</a></span><span class="op" id="2964748">++</span>&nbsp;<span class="op" id="2964751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964755">if</span>&nbsp;<span class="ident" id="2964758"><a href="/strconv/decimal.go.html#2964616">r</a></span>&nbsp;<span class="op" id="2964760">&gt;=</span>&nbsp;<span class="ident" id="2964763"><a href="/strconv/decimal.go.html#2964593">a</a></span><span class="op" id="2964764">.</span><span class="ident" id="2964765">nd</span>&nbsp;<span class="op" id="2964768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964773">if</span>&nbsp;<span class="ident" id="2964776"><a href="/strconv/decimal.go.html#2964722">n</a></span>&nbsp;<span class="op" id="2964778">==</span>&nbsp;<span class="num" id="2964781">0</span>&nbsp;<span class="op" id="2964783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2964789">//&nbsp;a&nbsp;==&nbsp;0;&nbsp;shouldn&#39;t&nbsp;get&nbsp;here,&nbsp;but&nbsp;handle&nbsp;anyway.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964843"><a href="/strconv/decimal.go.html#2964593">a</a></span><span class="op" id="2964844">.</span><span class="ident" id="2964845">nd</span>&nbsp;<span class="op" id="2964848">=</span>&nbsp;<span class="num" id="2964850">0</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964856">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964871">for</span>&nbsp;<span class="ident" id="2964875"><a href="/strconv/decimal.go.html#2964722">n</a></span><span class="op" id="2964876">&gt;&gt;</span><span class="ident" id="2964878"><a href="/strconv/decimal.go.html#2964605">k</a></span>&nbsp;<span class="op" id="2964880">==</span>&nbsp;<span class="num" id="2964883">0</span>&nbsp;<span class="op" id="2964885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964891"><a href="/strconv/decimal.go.html#2964722">n</a></span>&nbsp;<span class="op" id="2964893">=</span>&nbsp;<span class="ident" id="2964895"><a href="/strconv/decimal.go.html#2964722">n</a></span>&nbsp;<span class="op" id="2964897">*</span>&nbsp;<span class="num" id="2964899">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964906"><a href="/strconv/decimal.go.html#2964616">r</a></span><span class="op" id="2964907">++</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964918">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964930">c</span>&nbsp;<span class="op" id="2964932">:=</span>&nbsp;<span class="builtintype" id="2964935">int</span><span class="op" id="2964938">(</span><span class="ident" id="2964939"><a href="/strconv/decimal.go.html#2964593">a</a></span><span class="op" id="2964940">.</span><span class="ident" id="2964941">d</span><span class="op" id="2964942">[</span><span class="ident" id="2964943"><a href="/strconv/decimal.go.html#2964616">r</a></span><span class="op" id="2964944">]</span><span class="op" id="2964945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964949"><a href="/strconv/decimal.go.html#2964722">n</a></span>&nbsp;<span class="op" id="2964951">=</span>&nbsp;<span class="ident" id="2964953"><a href="/strconv/decimal.go.html#2964722">n</a></span><span class="op" id="2964954">*</span><span class="num" id="2964955">10</span>&nbsp;<span class="op" id="2964958">+</span>&nbsp;<span class="ident" id="2964960"><a href="/strconv/decimal.go.html#2964930">c</a></span>&nbsp;<span class="op" id="2964962">-</span>&nbsp;<span class="string" id="2964964">&#39;0&#39;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964972"><a href="/strconv/decimal.go.html#2964593">a</a></span><span class="op" id="2964973">.</span><span class="ident" id="2964974">dp</span>&nbsp;<span class="op" id="2964977">-=</span>&nbsp;<span class="ident" id="2964980"><a href="/strconv/decimal.go.html#2964616">r</a></span>&nbsp;<span class="op" id="2964982">-</span>&nbsp;<span class="num" id="2964984">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2964988">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965027">for</span>&nbsp;<span class="op" id="2965031">;</span>&nbsp;<span class="ident" id="2965033"><a href="/strconv/decimal.go.html#2964616">r</a></span>&nbsp;<span class="op" id="2965035">&lt;</span>&nbsp;<span class="ident" id="2965037"><a href="/strconv/decimal.go.html#2964593">a</a></span><span class="op" id="2965038">.</span><span class="ident" id="2965039">nd</span><span class="op" id="2965041">;</span>&nbsp;<span class="ident" id="2965043"><a href="/strconv/decimal.go.html#2964616">r</a></span><span class="op" id="2965044">++</span>&nbsp;<span class="op" id="2965047">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965051">c</span>&nbsp;<span class="op" id="2965053">:=</span>&nbsp;<span class="builtintype" id="2965056">int</span><span class="op" id="2965059">(</span><span class="ident" id="2965060"><a href="/strconv/decimal.go.html#2964593">a</a></span><span class="op" id="2965061">.</span><span class="ident" id="2965062">d</span><span class="op" id="2965063">[</span><span class="ident" id="2965064"><a href="/strconv/decimal.go.html#2964616">r</a></span><span class="op" id="2965065">]</span><span class="op" id="2965066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965070">dig</span>&nbsp;<span class="op" id="2965074">:=</span>&nbsp;<span class="ident" id="2965077"><a href="/strconv/decimal.go.html#2964722">n</a></span>&nbsp;<span class="op" id="2965079">&gt;&gt;</span>&nbsp;<span class="ident" id="2965082"><a href="/strconv/decimal.go.html#2964605">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965086"><a href="/strconv/decimal.go.html#2964722">n</a></span>&nbsp;<span class="op" id="2965088">-=</span>&nbsp;<span class="ident" id="2965091"><a href="/strconv/decimal.go.html#2965070">dig</a></span>&nbsp;<span class="op" id="2965095">&lt;&lt;</span>&nbsp;<span class="ident" id="2965098"><a href="/strconv/decimal.go.html#2964605">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965102"><a href="/strconv/decimal.go.html#2964593">a</a></span><span class="op" id="2965103">.</span><span class="ident" id="2965104">d</span><span class="op" id="2965105">[</span><span class="ident" id="2965106"><a href="/strconv/decimal.go.html#2964640">w</a></span><span class="op" id="2965107">]</span>&nbsp;<span class="op" id="2965109">=</span>&nbsp;<span class="builtintype" id="2965111">byte</span><span class="op" id="2965115">(</span><span class="ident" id="2965116"><a href="/strconv/decimal.go.html#2965070">dig</a></span>&nbsp;<span class="op" id="2965120">+</span>&nbsp;<span class="string" id="2965122">&#39;0&#39;</span><span class="op" id="2965125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965129"><a href="/strconv/decimal.go.html#2964640">w</a></span><span class="op" id="2965130">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965135"><a href="/strconv/decimal.go.html#2964722">n</a></span>&nbsp;<span class="op" id="2965137">=</span>&nbsp;<span class="ident" id="2965139"><a href="/strconv/decimal.go.html#2964722">n</a></span><span class="op" id="2965140">*</span><span class="num" id="2965141">10</span>&nbsp;<span class="op" id="2965144">+</span>&nbsp;<span class="ident" id="2965146"><a href="/strconv/decimal.go.html#2965051">c</a></span>&nbsp;<span class="op" id="2965148">-</span>&nbsp;<span class="string" id="2965150">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2965159">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965186">for</span>&nbsp;<span class="ident" id="2965190"><a href="/strconv/decimal.go.html#2964722">n</a></span>&nbsp;<span class="op" id="2965192">&gt;</span>&nbsp;<span class="num" id="2965194">0</span>&nbsp;<span class="op" id="2965196">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965200">dig</span>&nbsp;<span class="op" id="2965204">:=</span>&nbsp;<span class="ident" id="2965207"><a href="/strconv/decimal.go.html#2964722">n</a></span>&nbsp;<span class="op" id="2965209">&gt;&gt;</span>&nbsp;<span class="ident" id="2965212"><a href="/strconv/decimal.go.html#2964605">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965216"><a href="/strconv/decimal.go.html#2964722">n</a></span>&nbsp;<span class="op" id="2965218">-=</span>&nbsp;<span class="ident" id="2965221"><a href="/strconv/decimal.go.html#2965200">dig</a></span>&nbsp;<span class="op" id="2965225">&lt;&lt;</span>&nbsp;<span class="ident" id="2965228"><a href="/strconv/decimal.go.html#2964605">k</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965232">if</span>&nbsp;<span class="ident" id="2965235"><a href="/strconv/decimal.go.html#2964640">w</a></span>&nbsp;<span class="op" id="2965237">&lt;</span>&nbsp;<span class="builtinfunc" id="2965239">len</span><span class="op" id="2965242">(</span><span class="ident" id="2965243"><a href="/strconv/decimal.go.html#2964593">a</a></span><span class="op" id="2965244">.</span><span class="ident" id="2965245">d</span><span class="op" id="2965246">)</span>&nbsp;<span class="op" id="2965248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965253"><a href="/strconv/decimal.go.html#2964593">a</a></span><span class="op" id="2965254">.</span><span class="ident" id="2965255">d</span><span class="op" id="2965256">[</span><span class="ident" id="2965257"><a href="/strconv/decimal.go.html#2964640">w</a></span><span class="op" id="2965258">]</span>&nbsp;<span class="op" id="2965260">=</span>&nbsp;<span class="builtintype" id="2965262">byte</span><span class="op" id="2965266">(</span><span class="ident" id="2965267"><a href="/strconv/decimal.go.html#2965200">dig</a></span>&nbsp;<span class="op" id="2965271">+</span>&nbsp;<span class="string" id="2965273">&#39;0&#39;</span><span class="op" id="2965276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965281"><a href="/strconv/decimal.go.html#2964640">w</a></span><span class="op" id="2965282">++</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965287">}</span>&nbsp;<span class="keyword" id="2965289">else</span>&nbsp;<span class="keyword" id="2965294">if</span>&nbsp;<span class="ident" id="2965297"><a href="/strconv/decimal.go.html#2965200">dig</a></span>&nbsp;<span class="op" id="2965301">&gt;</span>&nbsp;<span class="num" id="2965303">0</span>&nbsp;<span class="op" id="2965305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965310"><a href="/strconv/decimal.go.html#2964593">a</a></span><span class="op" id="2965311">.</span><span class="ident" id="2965312">trunc</span>&nbsp;<span class="op" id="2965318">=</span>&nbsp;<span class="builtintype" id="2965320">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965331"><a href="/strconv/decimal.go.html#2964722">n</a></span>&nbsp;<span class="op" id="2965333">=</span>&nbsp;<span class="ident" id="2965335"><a href="/strconv/decimal.go.html#2964722">n</a></span>&nbsp;<span class="op" id="2965337">*</span>&nbsp;<span class="num" id="2965339">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965343">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965347"><a href="/strconv/decimal.go.html#2964593">a</a></span><span class="op" id="2965348">.</span><span class="ident" id="2965349">nd</span>&nbsp;<span class="op" id="2965352">=</span>&nbsp;<span class="ident" id="2965354"><a href="/strconv/decimal.go.html#2964640">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965357"><a href="/strconv/decimal.go.html#2963899">trim</a></span><span class="op" id="2965361">(</span><span class="ident" id="2965362"><a href="/strconv/decimal.go.html#2964593">a</a></span><span class="op" id="2965363">)</span><br>
<span class="lineno"></span><span class="op" id="2965365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="2965368">//&nbsp;Cheat&nbsp;sheet&nbsp;for&nbsp;left&nbsp;shift:&nbsp;table&nbsp;indexed&nbsp;by&nbsp;shift&nbsp;count&nbsp;giving</span><br>
<span class="lineno"></span><span class="comment" id="2965435">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits&nbsp;that&nbsp;will&nbsp;be&nbsp;introduced&nbsp;by&nbsp;that&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="2965498">//</span><br>
<span class="lineno"></span><span class="comment" id="2965501">//&nbsp;For&nbsp;example,&nbsp;leftcheats[4]&nbsp;=&nbsp;{2,&nbsp;&#34;625&#34;}.&nbsp;&nbsp;That&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2965562">//&nbsp;if&nbsp;we&nbsp;are&nbsp;shifting&nbsp;by&nbsp;4&nbsp;(multiplying&nbsp;by&nbsp;16),&nbsp;it&nbsp;will&nbsp;add&nbsp;2&nbsp;digits</span><br>
<span class="lineno">165</span><span class="comment" id="2965631">//&nbsp;when&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;625&#34;&nbsp;through&nbsp;&#34;999&#34;,&nbsp;and&nbsp;one&nbsp;fewer&nbsp;digit</span><br>
<span class="lineno"></span><span class="comment" id="2965701">//&nbsp;if&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;000&#34;&nbsp;through&nbsp;&#34;624&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2965749">//</span><br>
<span class="lineno"></span><span class="comment" id="2965752">//&nbsp;Credit&nbsp;for&nbsp;this&nbsp;trick&nbsp;goes&nbsp;to&nbsp;Ken.</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="2965791">type</span>&nbsp;<span class="ident" id="2965796">leftCheat</span>&nbsp;<span class="keyword" id="2965806">struct</span>&nbsp;<span class="op" id="2965813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965816">delta</span>&nbsp;&nbsp;<span class="builtintype" id="2965823">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2965830">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965855">cutoff</span>&nbsp;<span class="builtintype" id="2965862">string</span>&nbsp;<span class="comment" id="2965869">//&nbsp;&nbsp;&nbsp;minus&nbsp;one&nbsp;digit&nbsp;if&nbsp;original&nbsp;&lt;&nbsp;a.</span><br>
<span class="lineno"></span><span class="op" id="2965907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="2965910">var</span>&nbsp;<span class="ident" id="2965914">leftcheats</span>&nbsp;<span class="op" id="2965925">=</span>&nbsp;<span class="op" id="2965927">[</span><span class="op" id="2965928">]</span><span class="ident" id="2965929"><a href="/strconv/decimal.go.html#2965796">leftCheat</a></span><span class="op" id="2965938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2965941">//&nbsp;Leading&nbsp;digits&nbsp;of&nbsp;1/2^i&nbsp;=&nbsp;5^i.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2965976">//&nbsp;5^23&nbsp;is&nbsp;not&nbsp;an&nbsp;exact&nbsp;64-bit&nbsp;floating&nbsp;point&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2966031">//&nbsp;so&nbsp;have&nbsp;to&nbsp;use&nbsp;bc&nbsp;for&nbsp;the&nbsp;math.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2966067">/*<br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspseq&nbsp;27&nbsp;|&nbsp;sed&nbsp;&#39;s/^/5^/&#39;&nbsp;|&nbsp;bc&nbsp;|<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspawk&nbsp;&#39;BEGIN{&nbsp;print&nbsp;&#34;\tleftCheat{&nbsp;0,&nbsp;\&#34;\&#34;&nbsp;},&#34;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog2&nbsp;=&nbsp;log(2)/log(10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspprintf(&#34;\tleftCheat{&nbsp;%d,&nbsp;\&#34;%s\&#34;&nbsp;},\t//&nbsp;*&nbsp;%d\n&#34;,<br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspint(log2*NR+1),&nbsp;$0,&nbsp;2**NR)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}&#39;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966271">{</span><span class="num" id="2966272">0</span><span class="op" id="2966273">,</span>&nbsp;<span class="string" id="2966275">&#34;&#34;</span><span class="op" id="2966277">}</span><span class="op" id="2966278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966281">{</span><span class="num" id="2966282">1</span><span class="op" id="2966283">,</span>&nbsp;<span class="string" id="2966285">&#34;5&#34;</span><span class="op" id="2966288">}</span><span class="op" id="2966289">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966309">//&nbsp;*&nbsp;2</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966317">{</span><span class="num" id="2966318">1</span><span class="op" id="2966319">,</span>&nbsp;<span class="string" id="2966321">&#34;25&#34;</span><span class="op" id="2966325">}</span><span class="op" id="2966326">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966345">//&nbsp;*&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966353">{</span><span class="num" id="2966354">1</span><span class="op" id="2966355">,</span>&nbsp;<span class="string" id="2966357">&#34;125&#34;</span><span class="op" id="2966362">}</span><span class="op" id="2966363">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966381">//&nbsp;*&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966389">{</span><span class="num" id="2966390">2</span><span class="op" id="2966391">,</span>&nbsp;<span class="string" id="2966393">&#34;625&#34;</span><span class="op" id="2966398">}</span><span class="op" id="2966399">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966417">//&nbsp;*&nbsp;16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966426">{</span><span class="num" id="2966427">2</span><span class="op" id="2966428">,</span>&nbsp;<span class="string" id="2966430">&#34;3125&#34;</span><span class="op" id="2966436">}</span><span class="op" id="2966437">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966454">//&nbsp;*&nbsp;32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966463">{</span><span class="num" id="2966464">2</span><span class="op" id="2966465">,</span>&nbsp;<span class="string" id="2966467">&#34;15625&#34;</span><span class="op" id="2966474">}</span><span class="op" id="2966475">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966491">//&nbsp;*&nbsp;64</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966500">{</span><span class="num" id="2966501">3</span><span class="op" id="2966502">,</span>&nbsp;<span class="string" id="2966504">&#34;78125&#34;</span><span class="op" id="2966511">}</span><span class="op" id="2966512">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966528">//&nbsp;*&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966538">{</span><span class="num" id="2966539">3</span><span class="op" id="2966540">,</span>&nbsp;<span class="string" id="2966542">&#34;390625&#34;</span><span class="op" id="2966550">}</span><span class="op" id="2966551">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966566">//&nbsp;*&nbsp;256</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966576">{</span><span class="num" id="2966577">3</span><span class="op" id="2966578">,</span>&nbsp;<span class="string" id="2966580">&#34;1953125&#34;</span><span class="op" id="2966589">}</span><span class="op" id="2966590">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966604">//&nbsp;*&nbsp;512</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966614">{</span><span class="num" id="2966615">4</span><span class="op" id="2966616">,</span>&nbsp;<span class="string" id="2966618">&#34;9765625&#34;</span><span class="op" id="2966627">}</span><span class="op" id="2966628">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966642">//&nbsp;*&nbsp;1024</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966653">{</span><span class="num" id="2966654">4</span><span class="op" id="2966655">,</span>&nbsp;<span class="string" id="2966657">&#34;48828125&#34;</span><span class="op" id="2966667">}</span><span class="op" id="2966668">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966681">//&nbsp;*&nbsp;2048</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966692">{</span><span class="num" id="2966693">4</span><span class="op" id="2966694">,</span>&nbsp;<span class="string" id="2966696">&#34;244140625&#34;</span><span class="op" id="2966707">}</span><span class="op" id="2966708">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966720">//&nbsp;*&nbsp;4096</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966731">{</span><span class="num" id="2966732">4</span><span class="op" id="2966733">,</span>&nbsp;<span class="string" id="2966735">&#34;1220703125&#34;</span><span class="op" id="2966747">}</span><span class="op" id="2966748">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966759">//&nbsp;*&nbsp;8192</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966770">{</span><span class="num" id="2966771">5</span><span class="op" id="2966772">,</span>&nbsp;<span class="string" id="2966774">&#34;6103515625&#34;</span><span class="op" id="2966786">}</span><span class="op" id="2966787">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966798">//&nbsp;*&nbsp;16384</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966810">{</span><span class="num" id="2966811">5</span><span class="op" id="2966812">,</span>&nbsp;<span class="string" id="2966814">&#34;30517578125&#34;</span><span class="op" id="2966827">}</span><span class="op" id="2966828">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966838">//&nbsp;*&nbsp;32768</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966850">{</span><span class="num" id="2966851">5</span><span class="op" id="2966852">,</span>&nbsp;<span class="string" id="2966854">&#34;152587890625&#34;</span><span class="op" id="2966868">}</span><span class="op" id="2966869">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966878">//&nbsp;*&nbsp;65536</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966890">{</span><span class="num" id="2966891">6</span><span class="op" id="2966892">,</span>&nbsp;<span class="string" id="2966894">&#34;762939453125&#34;</span><span class="op" id="2966908">}</span><span class="op" id="2966909">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966918">//&nbsp;*&nbsp;131072</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966931">{</span><span class="num" id="2966932">6</span><span class="op" id="2966933">,</span>&nbsp;<span class="string" id="2966935">&#34;3814697265625&#34;</span><span class="op" id="2966950">}</span><span class="op" id="2966951">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2966959">//&nbsp;*&nbsp;262144</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966972">{</span><span class="num" id="2966973">6</span><span class="op" id="2966974">,</span>&nbsp;<span class="string" id="2966976">&#34;19073486328125&#34;</span><span class="op" id="2966992">}</span><span class="op" id="2966993">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2967000">//&nbsp;*&nbsp;524288</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967013">{</span><span class="num" id="2967014">7</span><span class="op" id="2967015">,</span>&nbsp;<span class="string" id="2967017">&#34;95367431640625&#34;</span><span class="op" id="2967033">}</span><span class="op" id="2967034">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2967041">//&nbsp;*&nbsp;1048576</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967055">{</span><span class="num" id="2967056">7</span><span class="op" id="2967057">,</span>&nbsp;<span class="string" id="2967059">&#34;476837158203125&#34;</span><span class="op" id="2967076">}</span><span class="op" id="2967077">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2967083">//&nbsp;*&nbsp;2097152</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967097">{</span><span class="num" id="2967098">7</span><span class="op" id="2967099">,</span>&nbsp;<span class="string" id="2967101">&#34;2384185791015625&#34;</span><span class="op" id="2967119">}</span><span class="op" id="2967120">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2967125">//&nbsp;*&nbsp;4194304</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967139">{</span><span class="num" id="2967140">7</span><span class="op" id="2967141">,</span>&nbsp;<span class="string" id="2967143">&#34;11920928955078125&#34;</span><span class="op" id="2967162">}</span><span class="op" id="2967163">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2967167">//&nbsp;*&nbsp;8388608</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967181">{</span><span class="num" id="2967182">8</span><span class="op" id="2967183">,</span>&nbsp;<span class="string" id="2967185">&#34;59604644775390625&#34;</span><span class="op" id="2967204">}</span><span class="op" id="2967205">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2967209">//&nbsp;*&nbsp;16777216</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967224">{</span><span class="num" id="2967225">8</span><span class="op" id="2967226">,</span>&nbsp;<span class="string" id="2967228">&#34;298023223876953125&#34;</span><span class="op" id="2967248">}</span><span class="op" id="2967249">,</span>&nbsp;&nbsp;<span class="comment" id="2967252">//&nbsp;*&nbsp;33554432</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967267">{</span><span class="num" id="2967268">8</span><span class="op" id="2967269">,</span>&nbsp;<span class="string" id="2967271">&#34;1490116119384765625&#34;</span><span class="op" id="2967292">}</span><span class="op" id="2967293">,</span>&nbsp;<span class="comment" id="2967295">//&nbsp;*&nbsp;67108864</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967310">{</span><span class="num" id="2967311">9</span><span class="op" id="2967312">,</span>&nbsp;<span class="string" id="2967314">&#34;7450580596923828125&#34;</span><span class="op" id="2967335">}</span><span class="op" id="2967336">,</span>&nbsp;<span class="comment" id="2967338">//&nbsp;*&nbsp;134217728</span><br>
<span class="lineno"></span><span class="op" id="2967353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2967356">//&nbsp;Is&nbsp;the&nbsp;leading&nbsp;prefix&nbsp;of&nbsp;b&nbsp;lexicographically&nbsp;less&nbsp;than&nbsp;s?</span><br>
<span class="lineno"></span><span class="keyword" id="2967417">func</span>&nbsp;<span class="ident" id="2967422">prefixIsLessThan</span><span class="op" id="2967438">(</span><span class="ident" id="2967439">b</span>&nbsp;<span class="op" id="2967441">[</span><span class="op" id="2967442">]</span><span class="builtintype" id="2967443">byte</span><span class="op" id="2967447">,</span>&nbsp;<span class="ident" id="2967449">s</span>&nbsp;<span class="builtintype" id="2967451">string</span><span class="op" id="2967457">)</span>&nbsp;<span class="builtintype" id="2967459">bool</span>&nbsp;<span class="op" id="2967464">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967467">for</span>&nbsp;<span class="ident" id="2967471">i</span>&nbsp;<span class="op" id="2967473">:=</span>&nbsp;<span class="num" id="2967476">0</span><span class="op" id="2967477">;</span>&nbsp;<span class="ident" id="2967479"><a href="/strconv/decimal.go.html#2967471">i</a></span>&nbsp;<span class="op" id="2967481">&lt;</span>&nbsp;<span class="builtinfunc" id="2967483">len</span><span class="op" id="2967486">(</span><span class="ident" id="2967487"><a href="/strconv/decimal.go.html#2967449">s</a></span><span class="op" id="2967488">)</span><span class="op" id="2967489">;</span>&nbsp;<span class="ident" id="2967491"><a href="/strconv/decimal.go.html#2967471">i</a></span><span class="op" id="2967492">++</span>&nbsp;<span class="op" id="2967495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967499">if</span>&nbsp;<span class="ident" id="2967502"><a href="/strconv/decimal.go.html#2967471">i</a></span>&nbsp;<span class="op" id="2967504">&gt;=</span>&nbsp;<span class="builtinfunc" id="2967507">len</span><span class="op" id="2967510">(</span><span class="ident" id="2967511"><a href="/strconv/decimal.go.html#2967439">b</a></span><span class="op" id="2967512">)</span>&nbsp;<span class="op" id="2967514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967519">return</span>&nbsp;<span class="builtintype" id="2967526">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967537">if</span>&nbsp;<span class="ident" id="2967540"><a href="/strconv/decimal.go.html#2967439">b</a></span><span class="op" id="2967541">[</span><span class="ident" id="2967542"><a href="/strconv/decimal.go.html#2967471">i</a></span><span class="op" id="2967543">]</span>&nbsp;<span class="op" id="2967545">!=</span>&nbsp;<span class="ident" id="2967548"><a href="/strconv/decimal.go.html#2967449">s</a></span><span class="op" id="2967549">[</span><span class="ident" id="2967550"><a href="/strconv/decimal.go.html#2967471">i</a></span><span class="op" id="2967551">]</span>&nbsp;<span class="op" id="2967553">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967558">return</span>&nbsp;<span class="ident" id="2967565"><a href="/strconv/decimal.go.html#2967439">b</a></span><span class="op" id="2967566">[</span><span class="ident" id="2967567"><a href="/strconv/decimal.go.html#2967471">i</a></span><span class="op" id="2967568">]</span>&nbsp;<span class="op" id="2967570">&lt;</span>&nbsp;<span class="ident" id="2967572"><a href="/strconv/decimal.go.html#2967449">s</a></span><span class="op" id="2967573">[</span><span class="ident" id="2967574"><a href="/strconv/decimal.go.html#2967471">i</a></span><span class="op" id="2967575">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967585">return</span>&nbsp;<span class="builtintype" id="2967592">false</span><br>
<span class="lineno"></span><span class="op" id="2967598">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="2967601">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(/&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2967673">func</span>&nbsp;<span class="ident" id="2967678">leftShift</span><span class="op" id="2967687">(</span><span class="ident" id="2967688">a</span>&nbsp;<span class="op" id="2967690">*</span><span class="ident" id="2967691"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2967698">,</span>&nbsp;<span class="ident" id="2967700">k</span>&nbsp;<span class="builtintype" id="2967702">uint</span><span class="op" id="2967706">)</span>&nbsp;<span class="op" id="2967708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967711">delta</span>&nbsp;<span class="op" id="2967717">:=</span>&nbsp;<span class="ident" id="2967720"><a href="/strconv/decimal.go.html#2965914">leftcheats</a></span><span class="op" id="2967730">[</span><span class="ident" id="2967731"><a href="/strconv/decimal.go.html#2967700">k</a></span><span class="op" id="2967732">]</span><span class="op" id="2967733">.</span><span class="ident" id="2967734">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967741">if</span>&nbsp;<span class="ident" id="2967744"><a href="/strconv/decimal.go.html#2967422">prefixIsLessThan</a></span><span class="op" id="2967760">(</span><span class="ident" id="2967761"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2967762">.</span><span class="ident" id="2967763">d</span><span class="op" id="2967764">[</span><span class="num" id="2967765">0</span><span class="op" id="2967766">:</span><span class="ident" id="2967767"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2967768">.</span><span class="ident" id="2967769">nd</span><span class="op" id="2967771">]</span><span class="op" id="2967772">,</span>&nbsp;<span class="ident" id="2967774"><a href="/strconv/decimal.go.html#2965914">leftcheats</a></span><span class="op" id="2967784">[</span><span class="ident" id="2967785"><a href="/strconv/decimal.go.html#2967700">k</a></span><span class="op" id="2967786">]</span><span class="op" id="2967787">.</span><span class="ident" id="2967788">cutoff</span><span class="op" id="2967794">)</span>&nbsp;<span class="op" id="2967796">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967800"><a href="/strconv/decimal.go.html#2967711">delta</a></span><span class="op" id="2967805">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967813">r</span>&nbsp;<span class="op" id="2967815">:=</span>&nbsp;<span class="ident" id="2967818"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2967819">.</span><span class="ident" id="2967820">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2967831">//&nbsp;read&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967846">w</span>&nbsp;<span class="op" id="2967848">:=</span>&nbsp;<span class="ident" id="2967851"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2967852">.</span><span class="ident" id="2967853">nd</span>&nbsp;<span class="op" id="2967856">+</span>&nbsp;<span class="ident" id="2967858"><a href="/strconv/decimal.go.html#2967711">delta</a></span>&nbsp;<span class="comment" id="2967864">//&nbsp;write&nbsp;index</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967880">n</span>&nbsp;<span class="op" id="2967882">:=</span>&nbsp;<span class="num" id="2967885">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2967889">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967928">for</span>&nbsp;<span class="ident" id="2967932"><a href="/strconv/decimal.go.html#2967813">r</a></span><span class="op" id="2967933">--</span><span class="op" id="2967935">;</span>&nbsp;<span class="ident" id="2967937"><a href="/strconv/decimal.go.html#2967813">r</a></span>&nbsp;<span class="op" id="2967939">&gt;=</span>&nbsp;<span class="num" id="2967942">0</span><span class="op" id="2967943">;</span>&nbsp;<span class="ident" id="2967945"><a href="/strconv/decimal.go.html#2967813">r</a></span><span class="op" id="2967946">--</span>&nbsp;<span class="op" id="2967949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967953"><a href="/strconv/decimal.go.html#2967880">n</a></span>&nbsp;<span class="op" id="2967955">+=</span>&nbsp;<span class="op" id="2967958">(</span><span class="builtintype" id="2967959">int</span><span class="op" id="2967962">(</span><span class="ident" id="2967963"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2967964">.</span><span class="ident" id="2967965">d</span><span class="op" id="2967966">[</span><span class="ident" id="2967967"><a href="/strconv/decimal.go.html#2967813">r</a></span><span class="op" id="2967968">]</span><span class="op" id="2967969">)</span>&nbsp;<span class="op" id="2967971">-</span>&nbsp;<span class="string" id="2967973">&#39;0&#39;</span><span class="op" id="2967976">)</span>&nbsp;<span class="op" id="2967978">&lt;&lt;</span>&nbsp;<span class="ident" id="2967981"><a href="/strconv/decimal.go.html#2967700">k</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967985">quo</span>&nbsp;<span class="op" id="2967989">:=</span>&nbsp;<span class="ident" id="2967992"><a href="/strconv/decimal.go.html#2967880">n</a></span>&nbsp;<span class="op" id="2967994">/</span>&nbsp;<span class="num" id="2967996">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968001">rem</span>&nbsp;<span class="op" id="2968005">:=</span>&nbsp;<span class="ident" id="2968008"><a href="/strconv/decimal.go.html#2967880">n</a></span>&nbsp;<span class="op" id="2968010">-</span>&nbsp;<span class="num" id="2968012">10</span><span class="op" id="2968014">*</span><span class="ident" id="2968015"><a href="/strconv/decimal.go.html#2967985">quo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968021"><a href="/strconv/decimal.go.html#2967846">w</a></span><span class="op" id="2968022">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968027">if</span>&nbsp;<span class="ident" id="2968030"><a href="/strconv/decimal.go.html#2967846">w</a></span>&nbsp;<span class="op" id="2968032">&lt;</span>&nbsp;<span class="builtinfunc" id="2968034">len</span><span class="op" id="2968037">(</span><span class="ident" id="2968038"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968039">.</span><span class="ident" id="2968040">d</span><span class="op" id="2968041">)</span>&nbsp;<span class="op" id="2968043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968048"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968049">.</span><span class="ident" id="2968050">d</span><span class="op" id="2968051">[</span><span class="ident" id="2968052"><a href="/strconv/decimal.go.html#2967846">w</a></span><span class="op" id="2968053">]</span>&nbsp;<span class="op" id="2968055">=</span>&nbsp;<span class="builtintype" id="2968057">byte</span><span class="op" id="2968061">(</span><span class="ident" id="2968062"><a href="/strconv/decimal.go.html#2968001">rem</a></span>&nbsp;<span class="op" id="2968066">+</span>&nbsp;<span class="string" id="2968068">&#39;0&#39;</span><span class="op" id="2968071">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968075">}</span>&nbsp;<span class="keyword" id="2968077">else</span>&nbsp;<span class="keyword" id="2968082">if</span>&nbsp;<span class="ident" id="2968085"><a href="/strconv/decimal.go.html#2968001">rem</a></span>&nbsp;<span class="op" id="2968089">!=</span>&nbsp;<span class="num" id="2968092">0</span>&nbsp;<span class="op" id="2968094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968099"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968100">.</span><span class="ident" id="2968101">trunc</span>&nbsp;<span class="op" id="2968107">=</span>&nbsp;<span class="builtintype" id="2968109">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968120"><a href="/strconv/decimal.go.html#2967880">n</a></span>&nbsp;<span class="op" id="2968122">=</span>&nbsp;<span class="ident" id="2968124"><a href="/strconv/decimal.go.html#2967985">quo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968129">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2968133">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968160">for</span>&nbsp;<span class="ident" id="2968164"><a href="/strconv/decimal.go.html#2967880">n</a></span>&nbsp;<span class="op" id="2968166">&gt;</span>&nbsp;<span class="num" id="2968168">0</span>&nbsp;<span class="op" id="2968170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968174">quo</span>&nbsp;<span class="op" id="2968178">:=</span>&nbsp;<span class="ident" id="2968181"><a href="/strconv/decimal.go.html#2967880">n</a></span>&nbsp;<span class="op" id="2968183">/</span>&nbsp;<span class="num" id="2968185">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968190">rem</span>&nbsp;<span class="op" id="2968194">:=</span>&nbsp;<span class="ident" id="2968197"><a href="/strconv/decimal.go.html#2967880">n</a></span>&nbsp;<span class="op" id="2968199">-</span>&nbsp;<span class="num" id="2968201">10</span><span class="op" id="2968203">*</span><span class="ident" id="2968204"><a href="/strconv/decimal.go.html#2968174">quo</a></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968210"><a href="/strconv/decimal.go.html#2967846">w</a></span><span class="op" id="2968211">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968216">if</span>&nbsp;<span class="ident" id="2968219"><a href="/strconv/decimal.go.html#2967846">w</a></span>&nbsp;<span class="op" id="2968221">&lt;</span>&nbsp;<span class="builtinfunc" id="2968223">len</span><span class="op" id="2968226">(</span><span class="ident" id="2968227"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968228">.</span><span class="ident" id="2968229">d</span><span class="op" id="2968230">)</span>&nbsp;<span class="op" id="2968232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968237"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968238">.</span><span class="ident" id="2968239">d</span><span class="op" id="2968240">[</span><span class="ident" id="2968241"><a href="/strconv/decimal.go.html#2967846">w</a></span><span class="op" id="2968242">]</span>&nbsp;<span class="op" id="2968244">=</span>&nbsp;<span class="builtintype" id="2968246">byte</span><span class="op" id="2968250">(</span><span class="ident" id="2968251"><a href="/strconv/decimal.go.html#2968190">rem</a></span>&nbsp;<span class="op" id="2968255">+</span>&nbsp;<span class="string" id="2968257">&#39;0&#39;</span><span class="op" id="2968260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968264">}</span>&nbsp;<span class="keyword" id="2968266">else</span>&nbsp;<span class="keyword" id="2968271">if</span>&nbsp;<span class="ident" id="2968274"><a href="/strconv/decimal.go.html#2968190">rem</a></span>&nbsp;<span class="op" id="2968278">!=</span>&nbsp;<span class="num" id="2968281">0</span>&nbsp;<span class="op" id="2968283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968288"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968289">.</span><span class="ident" id="2968290">trunc</span>&nbsp;<span class="op" id="2968296">=</span>&nbsp;<span class="builtintype" id="2968298">true</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968309"><a href="/strconv/decimal.go.html#2967880">n</a></span>&nbsp;<span class="op" id="2968311">=</span>&nbsp;<span class="ident" id="2968313"><a href="/strconv/decimal.go.html#2968174">quo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968322"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968323">.</span><span class="ident" id="2968324">nd</span>&nbsp;<span class="op" id="2968327">+=</span>&nbsp;<span class="ident" id="2968330"><a href="/strconv/decimal.go.html#2967711">delta</a></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968337">if</span>&nbsp;<span class="ident" id="2968340"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968341">.</span><span class="ident" id="2968342">nd</span>&nbsp;<span class="op" id="2968345">&gt;=</span>&nbsp;<span class="builtinfunc" id="2968348">len</span><span class="op" id="2968351">(</span><span class="ident" id="2968352"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968353">.</span><span class="ident" id="2968354">d</span><span class="op" id="2968355">)</span>&nbsp;<span class="op" id="2968357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968361"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968362">.</span><span class="ident" id="2968363">nd</span>&nbsp;<span class="op" id="2968366">=</span>&nbsp;<span class="builtinfunc" id="2968368">len</span><span class="op" id="2968371">(</span><span class="ident" id="2968372"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968373">.</span><span class="ident" id="2968374">d</span><span class="op" id="2968375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968381"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968382">.</span><span class="ident" id="2968383">dp</span>&nbsp;<span class="op" id="2968386">+=</span>&nbsp;<span class="ident" id="2968389"><a href="/strconv/decimal.go.html#2967711">delta</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968396"><a href="/strconv/decimal.go.html#2963899">trim</a></span><span class="op" id="2968400">(</span><span class="ident" id="2968401"><a href="/strconv/decimal.go.html#2967688">a</a></span><span class="op" id="2968402">)</span><br>
<span class="lineno">275</span><span class="op" id="2968404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2968407">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(k&nbsp;&gt;&nbsp;0)&nbsp;or&nbsp;right&nbsp;(k&nbsp;&lt;&nbsp;0).</span><br>
<span class="lineno"></span><span class="keyword" id="2968454">func</span>&nbsp;<span class="op" id="2968459">(</span><span class="ident" id="2968460">a</span>&nbsp;<span class="op" id="2968462">*</span><span class="ident" id="2968463"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2968470">)</span>&nbsp;<span class="ident" id="2968472">Shift</span><span class="op" id="2968477">(</span><span class="ident" id="2968478">k</span>&nbsp;<span class="builtintype" id="2968480">int</span><span class="op" id="2968483">)</span>&nbsp;<span class="op" id="2968485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968488">switch</span>&nbsp;<span class="op" id="2968495">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968498">case</span>&nbsp;<span class="ident" id="2968503"><a href="/strconv/decimal.go.html#2968460">a</a></span><span class="op" id="2968504">.</span><span class="ident" id="2968505">nd</span>&nbsp;<span class="op" id="2968508">==</span>&nbsp;<span class="num" id="2968511">0</span><span class="op" id="2968512">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2968516">//&nbsp;nothing&nbsp;to&nbsp;do:&nbsp;a&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968542">case</span>&nbsp;<span class="ident" id="2968547"><a href="/strconv/decimal.go.html#2968478">k</a></span>&nbsp;<span class="op" id="2968549">&gt;</span>&nbsp;<span class="num" id="2968551">0</span><span class="op" id="2968552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968556">for</span>&nbsp;<span class="ident" id="2968560"><a href="/strconv/decimal.go.html#2968478">k</a></span>&nbsp;<span class="op" id="2968562">&gt;</span>&nbsp;<span class="ident" id="2968564"><a href="/strconv/decimal.go.html#2964489">maxShift</a></span>&nbsp;<span class="op" id="2968573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968578"><a href="/strconv/decimal.go.html#2967678">leftShift</a></span><span class="op" id="2968587">(</span><span class="ident" id="2968588"><a href="/strconv/decimal.go.html#2968460">a</a></span><span class="op" id="2968589">,</span>&nbsp;<span class="ident" id="2968591"><a href="/strconv/decimal.go.html#2964489">maxShift</a></span><span class="op" id="2968599">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968604"><a href="/strconv/decimal.go.html#2968478">k</a></span>&nbsp;<span class="op" id="2968606">-=</span>&nbsp;<span class="ident" id="2968609"><a href="/strconv/decimal.go.html#2964489">maxShift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968624"><a href="/strconv/decimal.go.html#2967678">leftShift</a></span><span class="op" id="2968633">(</span><span class="ident" id="2968634"><a href="/strconv/decimal.go.html#2968460">a</a></span><span class="op" id="2968635">,</span>&nbsp;<span class="builtintype" id="2968637">uint</span><span class="op" id="2968641">(</span><span class="ident" id="2968642"><a href="/strconv/decimal.go.html#2968478">k</a></span><span class="op" id="2968643">)</span><span class="op" id="2968644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968647">case</span>&nbsp;<span class="ident" id="2968652"><a href="/strconv/decimal.go.html#2968478">k</a></span>&nbsp;<span class="op" id="2968654">&lt;</span>&nbsp;<span class="num" id="2968656">0</span><span class="op" id="2968657">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968661">for</span>&nbsp;<span class="ident" id="2968665"><a href="/strconv/decimal.go.html#2968478">k</a></span>&nbsp;<span class="op" id="2968667">&lt;</span>&nbsp;<span class="op" id="2968669">-</span><span class="ident" id="2968670"><a href="/strconv/decimal.go.html#2964489">maxShift</a></span>&nbsp;<span class="op" id="2968679">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968684"><a href="/strconv/decimal.go.html#2964582">rightShift</a></span><span class="op" id="2968694">(</span><span class="ident" id="2968695"><a href="/strconv/decimal.go.html#2968460">a</a></span><span class="op" id="2968696">,</span>&nbsp;<span class="ident" id="2968698"><a href="/strconv/decimal.go.html#2964489">maxShift</a></span><span class="op" id="2968706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968711"><a href="/strconv/decimal.go.html#2968478">k</a></span>&nbsp;<span class="op" id="2968713">+=</span>&nbsp;<span class="ident" id="2968716"><a href="/strconv/decimal.go.html#2964489">maxShift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968731"><a href="/strconv/decimal.go.html#2964582">rightShift</a></span><span class="op" id="2968741">(</span><span class="ident" id="2968742"><a href="/strconv/decimal.go.html#2968460">a</a></span><span class="op" id="2968743">,</span>&nbsp;<span class="builtintype" id="2968745">uint</span><span class="op" id="2968749">(</span><span class="op" id="2968750">-</span><span class="ident" id="2968751"><a href="/strconv/decimal.go.html#2968478">k</a></span><span class="op" id="2968752">)</span><span class="op" id="2968753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968756">}</span><br>
<span class="lineno">295</span><span class="op" id="2968758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2968761">//&nbsp;If&nbsp;we&nbsp;chop&nbsp;a&nbsp;at&nbsp;nd&nbsp;digits,&nbsp;should&nbsp;we&nbsp;round&nbsp;up?</span><br>
<span class="lineno"></span><span class="keyword" id="2968811">func</span>&nbsp;<span class="ident" id="2968816">shouldRoundUp</span><span class="op" id="2968829">(</span><span class="ident" id="2968830">a</span>&nbsp;<span class="op" id="2968832">*</span><span class="ident" id="2968833"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2968840">,</span>&nbsp;<span class="ident" id="2968842">nd</span>&nbsp;<span class="builtintype" id="2968845">int</span><span class="op" id="2968848">)</span>&nbsp;<span class="builtintype" id="2968850">bool</span>&nbsp;<span class="op" id="2968855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968858">if</span>&nbsp;<span class="ident" id="2968861"><a href="/strconv/decimal.go.html#2968842">nd</a></span>&nbsp;<span class="op" id="2968864">&lt;</span>&nbsp;<span class="num" id="2968866">0</span>&nbsp;<span class="op" id="2968868">||</span>&nbsp;<span class="ident" id="2968871"><a href="/strconv/decimal.go.html#2968842">nd</a></span>&nbsp;<span class="op" id="2968874">&gt;=</span>&nbsp;<span class="ident" id="2968877"><a href="/strconv/decimal.go.html#2968830">a</a></span><span class="op" id="2968878">.</span><span class="ident" id="2968879">nd</span>&nbsp;<span class="op" id="2968882">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968886">return</span>&nbsp;<span class="builtintype" id="2968893">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968903">if</span>&nbsp;<span class="ident" id="2968906"><a href="/strconv/decimal.go.html#2968830">a</a></span><span class="op" id="2968907">.</span><span class="ident" id="2968908">d</span><span class="op" id="2968909">[</span><span class="ident" id="2968910"><a href="/strconv/decimal.go.html#2968842">nd</a></span><span class="op" id="2968912">]</span>&nbsp;<span class="op" id="2968914">==</span>&nbsp;<span class="string" id="2968917">&#39;5&#39;</span>&nbsp;<span class="op" id="2968921">&amp;&amp;</span>&nbsp;<span class="ident" id="2968924"><a href="/strconv/decimal.go.html#2968842">nd</a></span><span class="op" id="2968926">+</span><span class="num" id="2968927">1</span>&nbsp;<span class="op" id="2968929">==</span>&nbsp;<span class="ident" id="2968932"><a href="/strconv/decimal.go.html#2968830">a</a></span><span class="op" id="2968933">.</span><span class="ident" id="2968934">nd</span>&nbsp;<span class="op" id="2968937">{</span>&nbsp;<span class="comment" id="2968939">//&nbsp;exactly&nbsp;halfway&nbsp;-&nbsp;round&nbsp;to&nbsp;even</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2968976">//&nbsp;if&nbsp;we&nbsp;truncated,&nbsp;a&nbsp;little&nbsp;higher&nbsp;than&nbsp;what&#39;s&nbsp;recorded&nbsp;-&nbsp;always&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969053">if</span>&nbsp;<span class="ident" id="2969056"><a href="/strconv/decimal.go.html#2968830">a</a></span><span class="op" id="2969057">.</span><span class="ident" id="2969058">trunc</span>&nbsp;<span class="op" id="2969064">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969069">return</span>&nbsp;<span class="builtintype" id="2969076">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969087">return</span>&nbsp;<span class="ident" id="2969094"><a href="/strconv/decimal.go.html#2968842">nd</a></span>&nbsp;<span class="op" id="2969097">&gt;</span>&nbsp;<span class="num" id="2969099">0</span>&nbsp;<span class="op" id="2969101">&amp;&amp;</span>&nbsp;<span class="op" id="2969104">(</span><span class="ident" id="2969105"><a href="/strconv/decimal.go.html#2968830">a</a></span><span class="op" id="2969106">.</span><span class="ident" id="2969107">d</span><span class="op" id="2969108">[</span><span class="ident" id="2969109"><a href="/strconv/decimal.go.html#2968842">nd</a></span><span class="op" id="2969111">-</span><span class="num" id="2969112">1</span><span class="op" id="2969113">]</span><span class="op" id="2969114">-</span><span class="string" id="2969115">&#39;0&#39;</span><span class="op" id="2969118">)</span><span class="op" id="2969119">%</span><span class="num" id="2969120">2</span>&nbsp;<span class="op" id="2969122">!=</span>&nbsp;<span class="num" id="2969125">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2969131">//&nbsp;not&nbsp;halfway&nbsp;-&nbsp;digit&nbsp;tells&nbsp;all</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969165">return</span>&nbsp;<span class="ident" id="2969172"><a href="/strconv/decimal.go.html#2968830">a</a></span><span class="op" id="2969173">.</span><span class="ident" id="2969174">d</span><span class="op" id="2969175">[</span><span class="ident" id="2969176"><a href="/strconv/decimal.go.html#2968842">nd</a></span><span class="op" id="2969178">]</span>&nbsp;<span class="op" id="2969180">&gt;=</span>&nbsp;<span class="string" id="2969183">&#39;5&#39;</span><br>
<span class="lineno"></span><span class="op" id="2969187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2969190">//&nbsp;Round&nbsp;a&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="comment" id="2969226">//&nbsp;If&nbsp;nd&nbsp;is&nbsp;zero,&nbsp;it&nbsp;means&nbsp;we&#39;re&nbsp;rounding</span><br>
<span class="lineno">315</span><span class="comment" id="2969268">//&nbsp;just&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;digits,&nbsp;as&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2969309">//&nbsp;0.09&nbsp;-&gt;&nbsp;0.1.</span><br>
<span class="lineno"></span><span class="keyword" id="2969325">func</span>&nbsp;<span class="op" id="2969330">(</span><span class="ident" id="2969331">a</span>&nbsp;<span class="op" id="2969333">*</span><span class="ident" id="2969334"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2969341">)</span>&nbsp;<span class="ident" id="2969343">Round</span><span class="op" id="2969348">(</span><span class="ident" id="2969349">nd</span>&nbsp;<span class="builtintype" id="2969352">int</span><span class="op" id="2969355">)</span>&nbsp;<span class="op" id="2969357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969360">if</span>&nbsp;<span class="ident" id="2969363"><a href="/strconv/decimal.go.html#2969349">nd</a></span>&nbsp;<span class="op" id="2969366">&lt;</span>&nbsp;<span class="num" id="2969368">0</span>&nbsp;<span class="op" id="2969370">||</span>&nbsp;<span class="ident" id="2969373"><a href="/strconv/decimal.go.html#2969349">nd</a></span>&nbsp;<span class="op" id="2969376">&gt;=</span>&nbsp;<span class="ident" id="2969379"><a href="/strconv/decimal.go.html#2969331">a</a></span><span class="op" id="2969380">.</span><span class="ident" id="2969381">nd</span>&nbsp;<span class="op" id="2969384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969388">return</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969399">if</span>&nbsp;<span class="ident" id="2969402"><a href="/strconv/decimal.go.html#2968816">shouldRoundUp</a></span><span class="op" id="2969415">(</span><span class="ident" id="2969416"><a href="/strconv/decimal.go.html#2969331">a</a></span><span class="op" id="2969417">,</span>&nbsp;<span class="ident" id="2969419"><a href="/strconv/decimal.go.html#2969349">nd</a></span><span class="op" id="2969421">)</span>&nbsp;<span class="op" id="2969423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969427"><a href="/strconv/decimal.go.html#2969331">a</a></span><span class="op" id="2969428">.</span><span class="ident" id="2969429">RoundUp</span><span class="op" id="2969436">(</span><span class="ident" id="2969437"><a href="/strconv/decimal.go.html#2969349">nd</a></span><span class="op" id="2969439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969442">}</span>&nbsp;<span class="keyword" id="2969444">else</span>&nbsp;<span class="op" id="2969449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969453"><a href="/strconv/decimal.go.html#2969331">a</a></span><span class="op" id="2969454">.</span><span class="ident" id="2969455">RoundDown</span><span class="op" id="2969464">(</span><span class="ident" id="2969465"><a href="/strconv/decimal.go.html#2969349">nd</a></span><span class="op" id="2969467">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969470">}</span><br>
<span class="lineno"></span><span class="op" id="2969472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2969475">//&nbsp;Round&nbsp;a&nbsp;down&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="2969516">func</span>&nbsp;<span class="op" id="2969521">(</span><span class="ident" id="2969522">a</span>&nbsp;<span class="op" id="2969524">*</span><span class="ident" id="2969525"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2969532">)</span>&nbsp;<span class="ident" id="2969534">RoundDown</span><span class="op" id="2969543">(</span><span class="ident" id="2969544">nd</span>&nbsp;<span class="builtintype" id="2969547">int</span><span class="op" id="2969550">)</span>&nbsp;<span class="op" id="2969552">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969555">if</span>&nbsp;<span class="ident" id="2969558"><a href="/strconv/decimal.go.html#2969544">nd</a></span>&nbsp;<span class="op" id="2969561">&lt;</span>&nbsp;<span class="num" id="2969563">0</span>&nbsp;<span class="op" id="2969565">||</span>&nbsp;<span class="ident" id="2969568"><a href="/strconv/decimal.go.html#2969544">nd</a></span>&nbsp;<span class="op" id="2969571">&gt;=</span>&nbsp;<span class="ident" id="2969574"><a href="/strconv/decimal.go.html#2969522">a</a></span><span class="op" id="2969575">.</span><span class="ident" id="2969576">nd</span>&nbsp;<span class="op" id="2969579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969583">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969594"><a href="/strconv/decimal.go.html#2969522">a</a></span><span class="op" id="2969595">.</span><span class="ident" id="2969596">nd</span>&nbsp;<span class="op" id="2969599">=</span>&nbsp;<span class="ident" id="2969601"><a href="/strconv/decimal.go.html#2969544">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969605"><a href="/strconv/decimal.go.html#2963899">trim</a></span><span class="op" id="2969609">(</span><span class="ident" id="2969610"><a href="/strconv/decimal.go.html#2969522">a</a></span><span class="op" id="2969611">)</span><br>
<span class="lineno">335</span><span class="op" id="2969613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2969616">//&nbsp;Round&nbsp;a&nbsp;up&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="2969655">func</span>&nbsp;<span class="op" id="2969660">(</span><span class="ident" id="2969661">a</span>&nbsp;<span class="op" id="2969663">*</span><span class="ident" id="2969664"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2969671">)</span>&nbsp;<span class="ident" id="2969673">RoundUp</span><span class="op" id="2969680">(</span><span class="ident" id="2969681">nd</span>&nbsp;<span class="builtintype" id="2969684">int</span><span class="op" id="2969687">)</span>&nbsp;<span class="op" id="2969689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969692">if</span>&nbsp;<span class="ident" id="2969695"><a href="/strconv/decimal.go.html#2969681">nd</a></span>&nbsp;<span class="op" id="2969698">&lt;</span>&nbsp;<span class="num" id="2969700">0</span>&nbsp;<span class="op" id="2969702">||</span>&nbsp;<span class="ident" id="2969705"><a href="/strconv/decimal.go.html#2969681">nd</a></span>&nbsp;<span class="op" id="2969708">&gt;=</span>&nbsp;<span class="ident" id="2969711"><a href="/strconv/decimal.go.html#2969661">a</a></span><span class="op" id="2969712">.</span><span class="ident" id="2969713">nd</span>&nbsp;<span class="op" id="2969716">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969720">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2969732">//&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969745">for</span>&nbsp;<span class="ident" id="2969749">i</span>&nbsp;<span class="op" id="2969751">:=</span>&nbsp;<span class="ident" id="2969754"><a href="/strconv/decimal.go.html#2969681">nd</a></span>&nbsp;<span class="op" id="2969757">-</span>&nbsp;<span class="num" id="2969759">1</span><span class="op" id="2969760">;</span>&nbsp;<span class="ident" id="2969762"><a href="/strconv/decimal.go.html#2969749">i</a></span>&nbsp;<span class="op" id="2969764">&gt;=</span>&nbsp;<span class="num" id="2969767">0</span><span class="op" id="2969768">;</span>&nbsp;<span class="ident" id="2969770"><a href="/strconv/decimal.go.html#2969749">i</a></span><span class="op" id="2969771">--</span>&nbsp;<span class="op" id="2969774">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969778">c</span>&nbsp;<span class="op" id="2969780">:=</span>&nbsp;<span class="ident" id="2969783"><a href="/strconv/decimal.go.html#2969661">a</a></span><span class="op" id="2969784">.</span><span class="ident" id="2969785">d</span><span class="op" id="2969786">[</span><span class="ident" id="2969787"><a href="/strconv/decimal.go.html#2969749">i</a></span><span class="op" id="2969788">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969792">if</span>&nbsp;<span class="ident" id="2969795"><a href="/strconv/decimal.go.html#2969778">c</a></span>&nbsp;<span class="op" id="2969797">&lt;</span>&nbsp;<span class="string" id="2969799">&#39;9&#39;</span>&nbsp;<span class="op" id="2969803">{</span>&nbsp;<span class="comment" id="2969805">//&nbsp;can&nbsp;stop&nbsp;after&nbsp;this&nbsp;digit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969837"><a href="/strconv/decimal.go.html#2969661">a</a></span><span class="op" id="2969838">.</span><span class="ident" id="2969839">d</span><span class="op" id="2969840">[</span><span class="ident" id="2969841"><a href="/strconv/decimal.go.html#2969749">i</a></span><span class="op" id="2969842">]</span><span class="op" id="2969843">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969849"><a href="/strconv/decimal.go.html#2969661">a</a></span><span class="op" id="2969850">.</span><span class="ident" id="2969851">nd</span>&nbsp;<span class="op" id="2969854">=</span>&nbsp;<span class="ident" id="2969856"><a href="/strconv/decimal.go.html#2969749">i</a></span>&nbsp;<span class="op" id="2969858">+</span>&nbsp;<span class="num" id="2969860">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969865">return</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2969881">//&nbsp;Number&nbsp;is&nbsp;all&nbsp;9s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2969903">//&nbsp;Change&nbsp;to&nbsp;single&nbsp;1&nbsp;with&nbsp;adjusted&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969955"><a href="/strconv/decimal.go.html#2969661">a</a></span><span class="op" id="2969956">.</span><span class="ident" id="2969957">d</span><span class="op" id="2969958">[</span><span class="num" id="2969959">0</span><span class="op" id="2969960">]</span>&nbsp;<span class="op" id="2969962">=</span>&nbsp;<span class="string" id="2969964">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969969"><a href="/strconv/decimal.go.html#2969661">a</a></span><span class="op" id="2969970">.</span><span class="ident" id="2969971">nd</span>&nbsp;<span class="op" id="2969974">=</span>&nbsp;<span class="num" id="2969976">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969979"><a href="/strconv/decimal.go.html#2969661">a</a></span><span class="op" id="2969980">.</span><span class="ident" id="2969981">dp</span><span class="op" id="2969983">++</span><br>
<span class="lineno"></span><span class="op" id="2969986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="2969989">//&nbsp;Extract&nbsp;integer&nbsp;part,&nbsp;rounded&nbsp;appropriately.</span><br>
<span class="lineno"></span><span class="comment" id="2970037">//&nbsp;No&nbsp;guarantees&nbsp;about&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2970070">func</span>&nbsp;<span class="op" id="2970075">(</span><span class="ident" id="2970076">a</span>&nbsp;<span class="op" id="2970078">*</span><span class="ident" id="2970079"><a href="/strconv/decimal.go.html#2962789">decimal</a></span><span class="op" id="2970086">)</span>&nbsp;<span class="ident" id="2970088">RoundedInteger</span><span class="op" id="2970102">(</span><span class="op" id="2970103">)</span>&nbsp;<span class="ident" id="2970105">uint64</span>&nbsp;<span class="op" id="2970112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970115">if</span>&nbsp;<span class="ident" id="2970118"><a href="/strconv/decimal.go.html#2970076">a</a></span><span class="op" id="2970119">.</span><span class="ident" id="2970120">dp</span>&nbsp;<span class="op" id="2970123">&gt;</span>&nbsp;<span class="num" id="2970125">20</span>&nbsp;<span class="op" id="2970128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970132">return</span>&nbsp;<span class="num" id="2970139">0xFFFFFFFFFFFFFFFF</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2970159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970162">var</span>&nbsp;<span class="ident" id="2970166">i</span>&nbsp;<span class="builtintype" id="2970168">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970173">n</span>&nbsp;<span class="op" id="2970175">:=</span>&nbsp;<span class="ident" id="2970178">uint64</span><span class="op" id="2970184">(</span><span class="num" id="2970185">0</span><span class="op" id="2970186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970189">for</span>&nbsp;<span class="ident" id="2970193"><a href="/strconv/decimal.go.html#2970166">i</a></span>&nbsp;<span class="op" id="2970195">=</span>&nbsp;<span class="num" id="2970197">0</span><span class="op" id="2970198">;</span>&nbsp;<span class="ident" id="2970200"><a href="/strconv/decimal.go.html#2970166">i</a></span>&nbsp;<span class="op" id="2970202">&lt;</span>&nbsp;<span class="ident" id="2970204"><a href="/strconv/decimal.go.html#2970076">a</a></span><span class="op" id="2970205">.</span><span class="ident" id="2970206">dp</span>&nbsp;<span class="op" id="2970209">&amp;&amp;</span>&nbsp;<span class="ident" id="2970212"><a href="/strconv/decimal.go.html#2970166">i</a></span>&nbsp;<span class="op" id="2970214">&lt;</span>&nbsp;<span class="ident" id="2970216"><a href="/strconv/decimal.go.html#2970076">a</a></span><span class="op" id="2970217">.</span><span class="ident" id="2970218">nd</span><span class="op" id="2970220">;</span>&nbsp;<span class="ident" id="2970222"><a href="/strconv/decimal.go.html#2970166">i</a></span><span class="op" id="2970223">++</span>&nbsp;<span class="op" id="2970226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970230"><a href="/strconv/decimal.go.html#2970173">n</a></span>&nbsp;<span class="op" id="2970232">=</span>&nbsp;<span class="ident" id="2970234"><a href="/strconv/decimal.go.html#2970173">n</a></span><span class="op" id="2970235">*</span><span class="num" id="2970236">10</span>&nbsp;<span class="op" id="2970239">+</span>&nbsp;<span class="ident" id="2970241">uint64</span><span class="op" id="2970247">(</span><span class="ident" id="2970248"><a href="/strconv/decimal.go.html#2970076">a</a></span><span class="op" id="2970249">.</span><span class="ident" id="2970250">d</span><span class="op" id="2970251">[</span><span class="ident" id="2970252"><a href="/strconv/decimal.go.html#2970166">i</a></span><span class="op" id="2970253">]</span><span class="op" id="2970254">-</span><span class="string" id="2970255">&#39;0&#39;</span><span class="op" id="2970258">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2970261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970264">for</span>&nbsp;<span class="op" id="2970268">;</span>&nbsp;<span class="ident" id="2970270"><a href="/strconv/decimal.go.html#2970166">i</a></span>&nbsp;<span class="op" id="2970272">&lt;</span>&nbsp;<span class="ident" id="2970274"><a href="/strconv/decimal.go.html#2970076">a</a></span><span class="op" id="2970275">.</span><span class="ident" id="2970276">dp</span><span class="op" id="2970278">;</span>&nbsp;<span class="ident" id="2970280"><a href="/strconv/decimal.go.html#2970166">i</a></span><span class="op" id="2970281">++</span>&nbsp;<span class="op" id="2970284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970288"><a href="/strconv/decimal.go.html#2970173">n</a></span>&nbsp;<span class="op" id="2970290">*=</span>&nbsp;<span class="num" id="2970293">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2970297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970300">if</span>&nbsp;<span class="ident" id="2970303"><a href="/strconv/decimal.go.html#2968816">shouldRoundUp</a></span><span class="op" id="2970316">(</span><span class="ident" id="2970317"><a href="/strconv/decimal.go.html#2970076">a</a></span><span class="op" id="2970318">,</span>&nbsp;<span class="ident" id="2970320"><a href="/strconv/decimal.go.html#2970076">a</a></span><span class="op" id="2970321">.</span><span class="ident" id="2970322">dp</span><span class="op" id="2970324">)</span>&nbsp;<span class="op" id="2970326">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970330"><a href="/strconv/decimal.go.html#2970173">n</a></span><span class="op" id="2970331">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2970335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970338">return</span>&nbsp;<span class="ident" id="2970345"><a href="/strconv/decimal.go.html#2970173">n</a></span><br>
<span class="lineno"></span><span class="op" id="2970347">}</span>
</div>
</body>
</html>
