<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2471331">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2471386">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2471440">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2471491">//&nbsp;Package&nbsp;os&nbsp;provides&nbsp;a&nbsp;platform-independent&nbsp;interface&nbsp;to&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2471567">//&nbsp;functionality.&nbsp;The&nbsp;design&nbsp;is&nbsp;Unix-like,&nbsp;although&nbsp;the&nbsp;error&nbsp;handling&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2471641">//&nbsp;Go-like;&nbsp;failing&nbsp;calls&nbsp;return&nbsp;values&nbsp;of&nbsp;type&nbsp;error&nbsp;rather&nbsp;than&nbsp;error&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2471722">//&nbsp;Often,&nbsp;more&nbsp;information&nbsp;is&nbsp;available&nbsp;within&nbsp;the&nbsp;error.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="2471793">//&nbsp;if&nbsp;a&nbsp;call&nbsp;that&nbsp;takes&nbsp;a&nbsp;file&nbsp;name&nbsp;fails,&nbsp;such&nbsp;as&nbsp;Open&nbsp;or&nbsp;Stat,&nbsp;the&nbsp;error</span><br>
<span class="lineno">10</span><span class="comment" id="2471868">//&nbsp;will&nbsp;include&nbsp;the&nbsp;failing&nbsp;file&nbsp;name&nbsp;when&nbsp;printed&nbsp;and&nbsp;will&nbsp;be&nbsp;of&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="2471939">//&nbsp;*PathError,&nbsp;which&nbsp;may&nbsp;be&nbsp;unpacked&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="2471998">//</span><br>
<span class="lineno"></span><span class="comment" id="2472001">//&nbsp;The&nbsp;os&nbsp;interface&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;uniform&nbsp;across&nbsp;all&nbsp;operating&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2472077">//&nbsp;Features&nbsp;not&nbsp;generally&nbsp;available&nbsp;appear&nbsp;in&nbsp;the&nbsp;system-specific&nbsp;package&nbsp;syscall.</span><br>
<span class="lineno">15</span><span class="comment" id="2472160">//</span><br>
<span class="lineno"></span><span class="comment" id="2472163">//&nbsp;Here&nbsp;is&nbsp;a&nbsp;simple&nbsp;example,&nbsp;opening&nbsp;a&nbsp;file&nbsp;and&nbsp;reading&nbsp;some&nbsp;of&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2472231">//</span><br>
<span class="lineno"></span><span class="comment" id="2472234">//&nbsp;&nbsp;&nbsp;&nbspfile,&nbsp;err&nbsp;:=&nbsp;os.Open(&#34;file.go&#34;)&nbsp;//&nbsp;For&nbsp;read&nbsp;access.</span><br>
<span class="lineno"></span><span class="comment" id="2472289">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">20</span><span class="comment" id="2472308">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2472327">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2472332">//</span><br>
<span class="lineno"></span><span class="comment" id="2472335">//&nbsp;If&nbsp;the&nbsp;open&nbsp;fails,&nbsp;the&nbsp;error&nbsp;string&nbsp;will&nbsp;be&nbsp;self-explanatory,&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="2472405">//</span><br>
<span class="lineno">25</span><span class="comment" id="2472408">//&nbsp;&nbsp;&nbsp;&nbspopen&nbsp;file.go:&nbsp;no&nbsp;such&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2472451">//</span><br>
<span class="lineno"></span><span class="comment" id="2472454">//&nbsp;The&nbsp;file&#39;s&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;read&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.&nbsp;Read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2472522">//&nbsp;Write&nbsp;take&nbsp;their&nbsp;byte&nbsp;counts&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;argument&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2472593">//</span><br>
<span class="lineno">30</span><span class="comment" id="2472596">//&nbsp;&nbsp;&nbsp;&nbspdata&nbsp;:=&nbsp;make([]byte,&nbsp;100)</span><br>
<span class="lineno"></span><span class="comment" id="2472625">//&nbsp;&nbsp;&nbsp;&nbspcount,&nbsp;err&nbsp;:=&nbsp;file.Read(data)</span><br>
<span class="lineno"></span><span class="comment" id="2472658">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2472677">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2472696">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno">35</span><span class="comment" id="2472701">//&nbsp;&nbsp;&nbsp;&nbspfmt.Printf(&#34;read&nbsp;%d&nbsp;bytes:&nbsp;%q\n&#34;,&nbsp;count,&nbsp;data[:count])</span><br>
<span class="lineno"></span><span class="comment" id="2472759">//</span><br>
<span class="lineno"></span><span class="keyword" id="2472762">package</span>&nbsp;<span class="ident" id="2472770">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2472774">import</span>&nbsp;<span class="op" id="2472781">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2472784">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2472790">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2472800">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2472803">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;presented&nbsp;to&nbsp;Open.</span><br>
<span class="lineno">45</span><span class="keyword" id="2472862">func</span>&nbsp;<span class="op" id="2472867">(</span><span class="ident" id="2472868">f</span>&nbsp;<span class="op" id="2472870">*</span><span class="ident" id="2472871">File</span><span class="op" id="2472875">)</span>&nbsp;<span class="ident" id="2472877">Name</span><span class="op" id="2472881">(</span><span class="op" id="2472882">)</span>&nbsp;<span class="builtintype" id="2472884">string</span>&nbsp;<span class="op" id="2472891">{</span>&nbsp;<span class="keyword" id="2472893">return</span>&nbsp;<span class="ident" id="2472900">f</span><span class="op" id="2472901">.</span><span class="ident" id="2472902">name</span>&nbsp;<span class="op" id="2472907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2472910">//&nbsp;Stdin,&nbsp;Stdout,&nbsp;and&nbsp;Stderr&nbsp;are&nbsp;open&nbsp;Files&nbsp;pointing&nbsp;to&nbsp;the&nbsp;standard&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="2472986">//&nbsp;standard&nbsp;output,&nbsp;and&nbsp;standard&nbsp;error&nbsp;file&nbsp;descriptors.</span><br>
<span class="lineno"></span><span class="keyword" id="2473043">var</span>&nbsp;<span class="op" id="2473047">(</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473050">Stdin</span>&nbsp;&nbsp;<span class="op" id="2473057">=</span>&nbsp;<span class="ident" id="2473059">NewFile</span><span class="op" id="2473066">(</span><span class="builtintype" id="2473067">uintptr</span><span class="op" id="2473074">(</span><span class="ident" id="2473075">syscall</span><span class="op" id="2473082">.</span><span class="ident" id="2473083">Stdin</span><span class="op" id="2473088">)</span><span class="op" id="2473089">,</span>&nbsp;<span class="string" id="2473091">&#34;/dev/stdin&#34;</span><span class="op" id="2473103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473106">Stdout</span>&nbsp;<span class="op" id="2473113">=</span>&nbsp;<span class="ident" id="2473115">NewFile</span><span class="op" id="2473122">(</span><span class="builtintype" id="2473123">uintptr</span><span class="op" id="2473130">(</span><span class="ident" id="2473131">syscall</span><span class="op" id="2473138">.</span><span class="ident" id="2473139">Stdout</span><span class="op" id="2473145">)</span><span class="op" id="2473146">,</span>&nbsp;<span class="string" id="2473148">&#34;/dev/stdout&#34;</span><span class="op" id="2473161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473164">Stderr</span>&nbsp;<span class="op" id="2473171">=</span>&nbsp;<span class="ident" id="2473173">NewFile</span><span class="op" id="2473180">(</span><span class="builtintype" id="2473181">uintptr</span><span class="op" id="2473188">(</span><span class="ident" id="2473189">syscall</span><span class="op" id="2473196">.</span><span class="ident" id="2473197">Stderr</span><span class="op" id="2473203">)</span><span class="op" id="2473204">,</span>&nbsp;<span class="string" id="2473206">&#34;/dev/stderr&#34;</span><span class="op" id="2473219">)</span><br>
<span class="lineno"></span><span class="op" id="2473221">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2473224">//&nbsp;Flags&nbsp;to&nbsp;Open&nbsp;wrapping&nbsp;those&nbsp;of&nbsp;the&nbsp;underlying&nbsp;system.&nbsp;Not&nbsp;all&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2473296">//&nbsp;may&nbsp;be&nbsp;implemented&nbsp;on&nbsp;a&nbsp;given&nbsp;system.</span><br>
<span class="lineno"></span><span class="keyword" id="2473337">const</span>&nbsp;<span class="op" id="2473343">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473346">O_RDONLY</span>&nbsp;<span class="builtintype" id="2473355">int</span>&nbsp;<span class="op" id="2473359">=</span>&nbsp;<span class="ident" id="2473361">syscall</span><span class="op" id="2473368">.</span><span class="ident" id="2473369">O_RDONLY</span>&nbsp;<span class="comment" id="2473378">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473407">O_WRONLY</span>&nbsp;<span class="builtintype" id="2473416">int</span>&nbsp;<span class="op" id="2473420">=</span>&nbsp;<span class="ident" id="2473422">syscall</span><span class="op" id="2473429">.</span><span class="ident" id="2473430">O_WRONLY</span>&nbsp;<span class="comment" id="2473439">//&nbsp;open&nbsp;the&nbsp;file&nbsp;write-only.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473469">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2473478">int</span>&nbsp;<span class="op" id="2473482">=</span>&nbsp;<span class="ident" id="2473484">syscall</span><span class="op" id="2473491">.</span><span class="ident" id="2473492">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2473501">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473531">O_APPEND</span>&nbsp;<span class="builtintype" id="2473540">int</span>&nbsp;<span class="op" id="2473544">=</span>&nbsp;<span class="ident" id="2473546">syscall</span><span class="op" id="2473553">.</span><span class="ident" id="2473554">O_APPEND</span>&nbsp;<span class="comment" id="2473563">//&nbsp;append&nbsp;data&nbsp;to&nbsp;the&nbsp;file&nbsp;when&nbsp;writing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473605">O_CREATE</span>&nbsp;<span class="builtintype" id="2473614">int</span>&nbsp;<span class="op" id="2473618">=</span>&nbsp;<span class="ident" id="2473620">syscall</span><span class="op" id="2473627">.</span><span class="ident" id="2473628">O_CREAT</span>&nbsp;&nbsp;<span class="comment" id="2473637">//&nbsp;create&nbsp;a&nbsp;new&nbsp;file&nbsp;if&nbsp;none&nbsp;exists.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473675">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2473684">int</span>&nbsp;<span class="op" id="2473688">=</span>&nbsp;<span class="ident" id="2473690">syscall</span><span class="op" id="2473697">.</span><span class="ident" id="2473698">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2473707">//&nbsp;used&nbsp;with&nbsp;O_CREATE,&nbsp;file&nbsp;must&nbsp;not&nbsp;exist</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473751">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2473760">int</span>&nbsp;<span class="op" id="2473764">=</span>&nbsp;<span class="ident" id="2473766">syscall</span><span class="op" id="2473773">.</span><span class="ident" id="2473774">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2473783">//&nbsp;open&nbsp;for&nbsp;synchronous&nbsp;I/O.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473813">O_TRUNC</span>&nbsp;&nbsp;<span class="builtintype" id="2473822">int</span>&nbsp;<span class="op" id="2473826">=</span>&nbsp;<span class="ident" id="2473828">syscall</span><span class="op" id="2473835">.</span><span class="ident" id="2473836">O_TRUNC</span>&nbsp;&nbsp;<span class="comment" id="2473845">//&nbsp;if&nbsp;possible,&nbsp;truncate&nbsp;file&nbsp;when&nbsp;opened.</span><br>
<span class="lineno"></span><span class="op" id="2473888">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2473891">//&nbsp;Seek&nbsp;whence&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2473914">const</span>&nbsp;<span class="op" id="2473920">(</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473923">SEEK_SET</span>&nbsp;<span class="builtintype" id="2473932">int</span>&nbsp;<span class="op" id="2473936">=</span>&nbsp;<span class="num" id="2473938">0</span>&nbsp;<span class="comment" id="2473940">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2473984">SEEK_CUR</span>&nbsp;<span class="builtintype" id="2473993">int</span>&nbsp;<span class="op" id="2473997">=</span>&nbsp;<span class="num" id="2473999">1</span>&nbsp;<span class="comment" id="2474001">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2474041">SEEK_END</span>&nbsp;<span class="builtintype" id="2474050">int</span>&nbsp;<span class="op" id="2474054">=</span>&nbsp;<span class="num" id="2474056">2</span>&nbsp;<span class="comment" id="2474058">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;end</span><br>
<span class="lineno"></span><span class="op" id="2474086">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2474089">//&nbsp;LinkError&nbsp;records&nbsp;an&nbsp;error&nbsp;during&nbsp;a&nbsp;link&nbsp;or&nbsp;symlink&nbsp;or&nbsp;rename</span><br>
<span class="lineno"></span><span class="comment" id="2474154">//&nbsp;system&nbsp;call&nbsp;and&nbsp;the&nbsp;paths&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2474199">type</span>&nbsp;<span class="ident" id="2474204">LinkError</span>&nbsp;<span class="keyword" id="2474214">struct</span>&nbsp;<span class="op" id="2474221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2474224">Op</span>&nbsp;&nbsp;<span class="builtintype" id="2474228">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2474236">Old</span>&nbsp;<span class="builtintype" id="2474240">string</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2474248">New</span>&nbsp;<span class="builtintype" id="2474252">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2474260">Err</span>&nbsp;<span class="builtintype" id="2474264">error</span><br>
<span class="lineno"></span><span class="op" id="2474270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2474273">func</span>&nbsp;<span class="op" id="2474278">(</span><span class="ident" id="2474279">e</span>&nbsp;<span class="op" id="2474281">*</span><span class="ident" id="2474282">LinkError</span><span class="op" id="2474291">)</span>&nbsp;<span class="ident" id="2474293">Error</span><span class="op" id="2474298">(</span><span class="op" id="2474299">)</span>&nbsp;<span class="builtintype" id="2474301">string</span>&nbsp;<span class="op" id="2474308">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2474311">return</span>&nbsp;<span class="ident" id="2474318">e</span><span class="op" id="2474319">.</span><span class="ident" id="2474320">Op</span>&nbsp;<span class="op" id="2474323">+</span>&nbsp;<span class="string" id="2474325">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2474329">+</span>&nbsp;<span class="ident" id="2474331">e</span><span class="op" id="2474332">.</span><span class="ident" id="2474333">Old</span>&nbsp;<span class="op" id="2474337">+</span>&nbsp;<span class="string" id="2474339">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2474343">+</span>&nbsp;<span class="ident" id="2474345">e</span><span class="op" id="2474346">.</span><span class="ident" id="2474347">New</span>&nbsp;<span class="op" id="2474351">+</span>&nbsp;<span class="string" id="2474353">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2474358">+</span>&nbsp;<span class="ident" id="2474360">e</span><span class="op" id="2474361">.</span><span class="ident" id="2474362">Err</span><span class="op" id="2474365">.</span><span class="ident" id="2474366">Error</span><span class="op" id="2474371">(</span><span class="op" id="2474372">)</span><br>
<span class="lineno"></span><span class="op" id="2474374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2474377">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2474425">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span><span class="comment" id="2474486">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2474545">func</span>&nbsp;<span class="op" id="2474550">(</span><span class="ident" id="2474551">f</span>&nbsp;<span class="op" id="2474553">*</span><span class="ident" id="2474554">File</span><span class="op" id="2474558">)</span>&nbsp;<span class="ident" id="2474560">Read</span><span class="op" id="2474564">(</span><span class="ident" id="2474565">b</span>&nbsp;<span class="op" id="2474567">[</span><span class="op" id="2474568">]</span><span class="builtintype" id="2474569">byte</span><span class="op" id="2474573">)</span>&nbsp;<span class="op" id="2474575">(</span><span class="ident" id="2474576">n</span>&nbsp;<span class="builtintype" id="2474578">int</span><span class="op" id="2474581">,</span>&nbsp;<span class="ident" id="2474583">err</span>&nbsp;<span class="builtintype" id="2474587">error</span><span class="op" id="2474592">)</span>&nbsp;<span class="op" id="2474594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2474597">if</span>&nbsp;<span class="ident" id="2474600">f</span>&nbsp;<span class="op" id="2474602">==</span>&nbsp;<span class="ident" id="2474605">nil</span>&nbsp;<span class="op" id="2474609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2474613">return</span>&nbsp;<span class="num" id="2474620">0</span><span class="op" id="2474621">,</span>&nbsp;<span class="ident" id="2474623">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2474635">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2474638">n</span><span class="op" id="2474639">,</span>&nbsp;<span class="ident" id="2474641">e</span>&nbsp;<span class="op" id="2474643">:=</span>&nbsp;<span class="ident" id="2474646">f</span><span class="op" id="2474647">.</span><span class="ident" id="2474648">read</span><span class="op" id="2474652">(</span><span class="ident" id="2474653">b</span><span class="op" id="2474654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2474657">if</span>&nbsp;<span class="ident" id="2474660">n</span>&nbsp;<span class="op" id="2474662">&lt;</span>&nbsp;<span class="num" id="2474664">0</span>&nbsp;<span class="op" id="2474666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2474670">n</span>&nbsp;<span class="op" id="2474672">=</span>&nbsp;<span class="num" id="2474674">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2474677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2474680">if</span>&nbsp;<span class="ident" id="2474683">n</span>&nbsp;<span class="op" id="2474685">==</span>&nbsp;<span class="num" id="2474688">0</span>&nbsp;<span class="op" id="2474690">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2474693">len</span><span class="op" id="2474696">(</span><span class="ident" id="2474697">b</span><span class="op" id="2474698">)</span>&nbsp;<span class="op" id="2474700">&gt;</span>&nbsp;<span class="num" id="2474702">0</span>&nbsp;<span class="op" id="2474704">&amp;&amp;</span>&nbsp;<span class="ident" id="2474707">e</span>&nbsp;<span class="op" id="2474709">==</span>&nbsp;<span class="ident" id="2474712">nil</span>&nbsp;<span class="op" id="2474716">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2474720">return</span>&nbsp;<span class="num" id="2474727">0</span><span class="op" id="2474728">,</span>&nbsp;<span class="ident" id="2474730">io</span><span class="op" id="2474732">.</span><span class="ident" id="2474733">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2474738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2474741">if</span>&nbsp;<span class="ident" id="2474744">e</span>&nbsp;<span class="op" id="2474746">!=</span>&nbsp;<span class="ident" id="2474749">nil</span>&nbsp;<span class="op" id="2474753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2474757">err</span>&nbsp;<span class="op" id="2474761">=</span>&nbsp;<span class="op" id="2474763">&amp;</span><span class="ident" id="2474764">PathError</span><span class="op" id="2474773">{</span><span class="string" id="2474774">&#34;read&#34;</span><span class="op" id="2474780">,</span>&nbsp;<span class="ident" id="2474782">f</span><span class="op" id="2474783">.</span><span class="ident" id="2474784">name</span><span class="op" id="2474788">,</span>&nbsp;<span class="ident" id="2474790">e</span><span class="op" id="2474791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2474794">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2474797">return</span>&nbsp;<span class="ident" id="2474804">n</span><span class="op" id="2474805">,</span>&nbsp;<span class="ident" id="2474807">err</span><br>
<span class="lineno"></span><span class="op" id="2474811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2474814">//&nbsp;ReadAt&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2474886">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">110</span><span class="comment" id="2474948">//&nbsp;ReadAt&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;&lt;&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="comment" id="2475006">//&nbsp;At&nbsp;end&nbsp;of&nbsp;file,&nbsp;that&nbsp;error&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2475047">func</span>&nbsp;<span class="op" id="2475052">(</span><span class="ident" id="2475053">f</span>&nbsp;<span class="op" id="2475055">*</span><span class="ident" id="2475056">File</span><span class="op" id="2475060">)</span>&nbsp;<span class="ident" id="2475062">ReadAt</span><span class="op" id="2475068">(</span><span class="ident" id="2475069">b</span>&nbsp;<span class="op" id="2475071">[</span><span class="op" id="2475072">]</span><span class="builtintype" id="2475073">byte</span><span class="op" id="2475077">,</span>&nbsp;<span class="ident" id="2475079">off</span>&nbsp;<span class="ident" id="2475083">int64</span><span class="op" id="2475088">)</span>&nbsp;<span class="op" id="2475090">(</span><span class="ident" id="2475091">n</span>&nbsp;<span class="builtintype" id="2475093">int</span><span class="op" id="2475096">,</span>&nbsp;<span class="ident" id="2475098">err</span>&nbsp;<span class="builtintype" id="2475102">error</span><span class="op" id="2475107">)</span>&nbsp;<span class="op" id="2475109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475112">if</span>&nbsp;<span class="ident" id="2475115">f</span>&nbsp;<span class="op" id="2475117">==</span>&nbsp;<span class="ident" id="2475120">nil</span>&nbsp;<span class="op" id="2475124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475128">return</span>&nbsp;<span class="num" id="2475135">0</span><span class="op" id="2475136">,</span>&nbsp;<span class="ident" id="2475138">ErrInvalid</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2475150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475153">for</span>&nbsp;<span class="builtinfunc" id="2475157">len</span><span class="op" id="2475160">(</span><span class="ident" id="2475161">b</span><span class="op" id="2475162">)</span>&nbsp;<span class="op" id="2475164">&gt;</span>&nbsp;<span class="num" id="2475166">0</span>&nbsp;<span class="op" id="2475168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2475172">m</span><span class="op" id="2475173">,</span>&nbsp;<span class="ident" id="2475175">e</span>&nbsp;<span class="op" id="2475177">:=</span>&nbsp;<span class="ident" id="2475180">f</span><span class="op" id="2475181">.</span><span class="ident" id="2475182">pread</span><span class="op" id="2475187">(</span><span class="ident" id="2475188">b</span><span class="op" id="2475189">,</span>&nbsp;<span class="ident" id="2475191">off</span><span class="op" id="2475194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475198">if</span>&nbsp;<span class="ident" id="2475201">m</span>&nbsp;<span class="op" id="2475203">==</span>&nbsp;<span class="num" id="2475206">0</span>&nbsp;<span class="op" id="2475208">&amp;&amp;</span>&nbsp;<span class="ident" id="2475211">e</span>&nbsp;<span class="op" id="2475213">==</span>&nbsp;<span class="ident" id="2475216">nil</span>&nbsp;<span class="op" id="2475220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475225">return</span>&nbsp;<span class="ident" id="2475232">n</span><span class="op" id="2475233">,</span>&nbsp;<span class="ident" id="2475235">io</span><span class="op" id="2475237">.</span><span class="ident" id="2475238">EOF</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2475244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475248">if</span>&nbsp;<span class="ident" id="2475251">e</span>&nbsp;<span class="op" id="2475253">!=</span>&nbsp;<span class="ident" id="2475256">nil</span>&nbsp;<span class="op" id="2475260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2475265">err</span>&nbsp;<span class="op" id="2475269">=</span>&nbsp;<span class="op" id="2475271">&amp;</span><span class="ident" id="2475272">PathError</span><span class="op" id="2475281">{</span><span class="string" id="2475282">&#34;read&#34;</span><span class="op" id="2475288">,</span>&nbsp;<span class="ident" id="2475290">f</span><span class="op" id="2475291">.</span><span class="ident" id="2475292">name</span><span class="op" id="2475296">,</span>&nbsp;<span class="ident" id="2475298">e</span><span class="op" id="2475299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475304">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2475312">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2475316">n</span>&nbsp;<span class="op" id="2475318">+=</span>&nbsp;<span class="ident" id="2475321">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2475325">b</span>&nbsp;<span class="op" id="2475327">=</span>&nbsp;<span class="ident" id="2475329">b</span><span class="op" id="2475330">[</span><span class="ident" id="2475331">m</span><span class="op" id="2475332">:</span><span class="op" id="2475333">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2475337">off</span>&nbsp;<span class="op" id="2475341">+=</span>&nbsp;<span class="ident" id="2475344">int64</span><span class="op" id="2475349">(</span><span class="ident" id="2475350">m</span><span class="op" id="2475351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2475354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475357">return</span><br>
<span class="lineno">130</span><span class="op" id="2475364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2475367">//&nbsp;Write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2475409">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2475473">//&nbsp;Write&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno">135</span><span class="keyword" id="2475524">func</span>&nbsp;<span class="op" id="2475529">(</span><span class="ident" id="2475530">f</span>&nbsp;<span class="op" id="2475532">*</span><span class="ident" id="2475533">File</span><span class="op" id="2475537">)</span>&nbsp;<span class="ident" id="2475539">Write</span><span class="op" id="2475544">(</span><span class="ident" id="2475545">b</span>&nbsp;<span class="op" id="2475547">[</span><span class="op" id="2475548">]</span><span class="builtintype" id="2475549">byte</span><span class="op" id="2475553">)</span>&nbsp;<span class="op" id="2475555">(</span><span class="ident" id="2475556">n</span>&nbsp;<span class="builtintype" id="2475558">int</span><span class="op" id="2475561">,</span>&nbsp;<span class="ident" id="2475563">err</span>&nbsp;<span class="builtintype" id="2475567">error</span><span class="op" id="2475572">)</span>&nbsp;<span class="op" id="2475574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475577">if</span>&nbsp;<span class="ident" id="2475580">f</span>&nbsp;<span class="op" id="2475582">==</span>&nbsp;<span class="ident" id="2475585">nil</span>&nbsp;<span class="op" id="2475589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475593">return</span>&nbsp;<span class="num" id="2475600">0</span><span class="op" id="2475601">,</span>&nbsp;<span class="ident" id="2475603">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2475615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2475618">n</span><span class="op" id="2475619">,</span>&nbsp;<span class="ident" id="2475621">e</span>&nbsp;<span class="op" id="2475623">:=</span>&nbsp;<span class="ident" id="2475626">f</span><span class="op" id="2475627">.</span><span class="ident" id="2475628">write</span><span class="op" id="2475633">(</span><span class="ident" id="2475634">b</span><span class="op" id="2475635">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475638">if</span>&nbsp;<span class="ident" id="2475641">n</span>&nbsp;<span class="op" id="2475643">&lt;</span>&nbsp;<span class="num" id="2475645">0</span>&nbsp;<span class="op" id="2475647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2475651">n</span>&nbsp;<span class="op" id="2475653">=</span>&nbsp;<span class="num" id="2475655">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2475658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475661">if</span>&nbsp;<span class="ident" id="2475664">n</span>&nbsp;<span class="op" id="2475666">!=</span>&nbsp;<span class="builtinfunc" id="2475669">len</span><span class="op" id="2475672">(</span><span class="ident" id="2475673">b</span><span class="op" id="2475674">)</span>&nbsp;<span class="op" id="2475676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2475680">err</span>&nbsp;<span class="op" id="2475684">=</span>&nbsp;<span class="ident" id="2475686">io</span><span class="op" id="2475688">.</span><span class="ident" id="2475689">ErrShortWrite</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2475704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2475708">epipecheck</span><span class="op" id="2475718">(</span><span class="ident" id="2475719">f</span><span class="op" id="2475720">,</span>&nbsp;<span class="ident" id="2475722">e</span><span class="op" id="2475723">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475727">if</span>&nbsp;<span class="ident" id="2475730">e</span>&nbsp;<span class="op" id="2475732">!=</span>&nbsp;<span class="ident" id="2475735">nil</span>&nbsp;<span class="op" id="2475739">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2475743">err</span>&nbsp;<span class="op" id="2475747">=</span>&nbsp;<span class="op" id="2475749">&amp;</span><span class="ident" id="2475750">PathError</span><span class="op" id="2475759">{</span><span class="string" id="2475760">&#34;write&#34;</span><span class="op" id="2475767">,</span>&nbsp;<span class="ident" id="2475769">f</span><span class="op" id="2475770">.</span><span class="ident" id="2475771">name</span><span class="op" id="2475775">,</span>&nbsp;<span class="ident" id="2475777">e</span><span class="op" id="2475778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2475781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2475784">return</span>&nbsp;<span class="ident" id="2475791">n</span><span class="op" id="2475792">,</span>&nbsp;<span class="ident" id="2475794">err</span><br>
<span class="lineno"></span><span class="op" id="2475798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2475801">//&nbsp;WriteAt&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2475873">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2475937">//&nbsp;WriteAt&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="keyword" id="2475990">func</span>&nbsp;<span class="op" id="2475995">(</span><span class="ident" id="2475996">f</span>&nbsp;<span class="op" id="2475998">*</span><span class="ident" id="2475999">File</span><span class="op" id="2476003">)</span>&nbsp;<span class="ident" id="2476005">WriteAt</span><span class="op" id="2476012">(</span><span class="ident" id="2476013">b</span>&nbsp;<span class="op" id="2476015">[</span><span class="op" id="2476016">]</span><span class="builtintype" id="2476017">byte</span><span class="op" id="2476021">,</span>&nbsp;<span class="ident" id="2476023">off</span>&nbsp;<span class="ident" id="2476027">int64</span><span class="op" id="2476032">)</span>&nbsp;<span class="op" id="2476034">(</span><span class="ident" id="2476035">n</span>&nbsp;<span class="builtintype" id="2476037">int</span><span class="op" id="2476040">,</span>&nbsp;<span class="ident" id="2476042">err</span>&nbsp;<span class="builtintype" id="2476046">error</span><span class="op" id="2476051">)</span>&nbsp;<span class="op" id="2476053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476056">if</span>&nbsp;<span class="ident" id="2476059">f</span>&nbsp;<span class="op" id="2476061">==</span>&nbsp;<span class="ident" id="2476064">nil</span>&nbsp;<span class="op" id="2476068">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476072">return</span>&nbsp;<span class="num" id="2476079">0</span><span class="op" id="2476080">,</span>&nbsp;<span class="ident" id="2476082">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2476094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476097">for</span>&nbsp;<span class="builtinfunc" id="2476101">len</span><span class="op" id="2476104">(</span><span class="ident" id="2476105">b</span><span class="op" id="2476106">)</span>&nbsp;<span class="op" id="2476108">&gt;</span>&nbsp;<span class="num" id="2476110">0</span>&nbsp;<span class="op" id="2476112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2476116">m</span><span class="op" id="2476117">,</span>&nbsp;<span class="ident" id="2476119">e</span>&nbsp;<span class="op" id="2476121">:=</span>&nbsp;<span class="ident" id="2476124">f</span><span class="op" id="2476125">.</span><span class="ident" id="2476126">pwrite</span><span class="op" id="2476132">(</span><span class="ident" id="2476133">b</span><span class="op" id="2476134">,</span>&nbsp;<span class="ident" id="2476136">off</span><span class="op" id="2476139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476143">if</span>&nbsp;<span class="ident" id="2476146">e</span>&nbsp;<span class="op" id="2476148">!=</span>&nbsp;<span class="ident" id="2476151">nil</span>&nbsp;<span class="op" id="2476155">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2476160">err</span>&nbsp;<span class="op" id="2476164">=</span>&nbsp;<span class="op" id="2476166">&amp;</span><span class="ident" id="2476167">PathError</span><span class="op" id="2476176">{</span><span class="string" id="2476177">&#34;write&#34;</span><span class="op" id="2476184">,</span>&nbsp;<span class="ident" id="2476186">f</span><span class="op" id="2476187">.</span><span class="ident" id="2476188">name</span><span class="op" id="2476192">,</span>&nbsp;<span class="ident" id="2476194">e</span><span class="op" id="2476195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476200">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2476208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2476212">n</span>&nbsp;<span class="op" id="2476214">+=</span>&nbsp;<span class="ident" id="2476217">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2476221">b</span>&nbsp;<span class="op" id="2476223">=</span>&nbsp;<span class="ident" id="2476225">b</span><span class="op" id="2476226">[</span><span class="ident" id="2476227">m</span><span class="op" id="2476228">:</span><span class="op" id="2476229">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2476233">off</span>&nbsp;<span class="op" id="2476237">+=</span>&nbsp;<span class="ident" id="2476240">int64</span><span class="op" id="2476245">(</span><span class="ident" id="2476246">m</span><span class="op" id="2476247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2476250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476253">return</span><br>
<span class="lineno"></span><span class="op" id="2476260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="2476263">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2476345">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2476421">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2476489">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2476540">func</span>&nbsp;<span class="op" id="2476545">(</span><span class="ident" id="2476546">f</span>&nbsp;<span class="op" id="2476548">*</span><span class="ident" id="2476549">File</span><span class="op" id="2476553">)</span>&nbsp;<span class="ident" id="2476555">Seek</span><span class="op" id="2476559">(</span><span class="ident" id="2476560">offset</span>&nbsp;<span class="ident" id="2476567">int64</span><span class="op" id="2476572">,</span>&nbsp;<span class="ident" id="2476574">whence</span>&nbsp;<span class="builtintype" id="2476581">int</span><span class="op" id="2476584">)</span>&nbsp;<span class="op" id="2476586">(</span><span class="ident" id="2476587">ret</span>&nbsp;<span class="ident" id="2476591">int64</span><span class="op" id="2476596">,</span>&nbsp;<span class="ident" id="2476598">err</span>&nbsp;<span class="builtintype" id="2476602">error</span><span class="op" id="2476607">)</span>&nbsp;<span class="op" id="2476609">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476612">if</span>&nbsp;<span class="ident" id="2476615">f</span>&nbsp;<span class="op" id="2476617">==</span>&nbsp;<span class="ident" id="2476620">nil</span>&nbsp;<span class="op" id="2476624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476628">return</span>&nbsp;<span class="num" id="2476635">0</span><span class="op" id="2476636">,</span>&nbsp;<span class="ident" id="2476638">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2476650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2476653">r</span><span class="op" id="2476654">,</span>&nbsp;<span class="ident" id="2476656">e</span>&nbsp;<span class="op" id="2476658">:=</span>&nbsp;<span class="ident" id="2476661">f</span><span class="op" id="2476662">.</span><span class="ident" id="2476663">seek</span><span class="op" id="2476667">(</span><span class="ident" id="2476668">offset</span><span class="op" id="2476674">,</span>&nbsp;<span class="ident" id="2476676">whence</span><span class="op" id="2476682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476685">if</span>&nbsp;<span class="ident" id="2476688">e</span>&nbsp;<span class="op" id="2476690">==</span>&nbsp;<span class="ident" id="2476693">nil</span>&nbsp;<span class="op" id="2476697">&amp;&amp;</span>&nbsp;<span class="ident" id="2476700">f</span><span class="op" id="2476701">.</span><span class="ident" id="2476702">dirinfo</span>&nbsp;<span class="op" id="2476710">!=</span>&nbsp;<span class="ident" id="2476713">nil</span>&nbsp;<span class="op" id="2476717">&amp;&amp;</span>&nbsp;<span class="ident" id="2476720">r</span>&nbsp;<span class="op" id="2476722">!=</span>&nbsp;<span class="num" id="2476725">0</span>&nbsp;<span class="op" id="2476727">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2476731">e</span>&nbsp;<span class="op" id="2476733">=</span>&nbsp;<span class="ident" id="2476735">syscall</span><span class="op" id="2476742">.</span><span class="ident" id="2476743">EISDIR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2476751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476754">if</span>&nbsp;<span class="ident" id="2476757">e</span>&nbsp;<span class="op" id="2476759">!=</span>&nbsp;<span class="ident" id="2476762">nil</span>&nbsp;<span class="op" id="2476766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476770">return</span>&nbsp;<span class="num" id="2476777">0</span><span class="op" id="2476778">,</span>&nbsp;<span class="op" id="2476780">&amp;</span><span class="ident" id="2476781">PathError</span><span class="op" id="2476790">{</span><span class="string" id="2476791">&#34;seek&#34;</span><span class="op" id="2476797">,</span>&nbsp;<span class="ident" id="2476799">f</span><span class="op" id="2476800">.</span><span class="ident" id="2476801">name</span><span class="op" id="2476805">,</span>&nbsp;<span class="ident" id="2476807">e</span><span class="op" id="2476808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2476811">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476814">return</span>&nbsp;<span class="ident" id="2476821">r</span><span class="op" id="2476822">,</span>&nbsp;<span class="ident" id="2476824">nil</span><br>
<span class="lineno"></span><span class="op" id="2476828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2476831">//&nbsp;WriteString&nbsp;is&nbsp;like&nbsp;Write,&nbsp;but&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;string&nbsp;s&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2476909">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno">195</span><span class="keyword" id="2476930">func</span>&nbsp;<span class="op" id="2476935">(</span><span class="ident" id="2476936">f</span>&nbsp;<span class="op" id="2476938">*</span><span class="ident" id="2476939">File</span><span class="op" id="2476943">)</span>&nbsp;<span class="ident" id="2476945">WriteString</span><span class="op" id="2476956">(</span><span class="ident" id="2476957">s</span>&nbsp;<span class="builtintype" id="2476959">string</span><span class="op" id="2476965">)</span>&nbsp;<span class="op" id="2476967">(</span><span class="ident" id="2476968">ret</span>&nbsp;<span class="builtintype" id="2476972">int</span><span class="op" id="2476975">,</span>&nbsp;<span class="ident" id="2476977">err</span>&nbsp;<span class="builtintype" id="2476981">error</span><span class="op" id="2476986">)</span>&nbsp;<span class="op" id="2476988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2476991">if</span>&nbsp;<span class="ident" id="2476994">f</span>&nbsp;<span class="op" id="2476996">==</span>&nbsp;<span class="ident" id="2476999">nil</span>&nbsp;<span class="op" id="2477003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477007">return</span>&nbsp;<span class="num" id="2477014">0</span><span class="op" id="2477015">,</span>&nbsp;<span class="ident" id="2477017">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2477029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477032">return</span>&nbsp;<span class="ident" id="2477039">f</span><span class="op" id="2477040">.</span><span class="ident" id="2477041">Write</span><span class="op" id="2477046">(</span><span class="op" id="2477047">[</span><span class="op" id="2477048">]</span><span class="builtintype" id="2477049">byte</span><span class="op" id="2477053">(</span><span class="ident" id="2477054">s</span><span class="op" id="2477055">)</span><span class="op" id="2477056">)</span><br>
<span class="lineno">200</span><span class="op" id="2477058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2477061">//&nbsp;Mkdir&nbsp;creates&nbsp;a&nbsp;new&nbsp;directory&nbsp;with&nbsp;the&nbsp;specified&nbsp;name&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2477139">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2477195">func</span>&nbsp;<span class="ident" id="2477200">Mkdir</span><span class="op" id="2477205">(</span><span class="ident" id="2477206">name</span>&nbsp;<span class="builtintype" id="2477211">string</span><span class="op" id="2477217">,</span>&nbsp;<span class="ident" id="2477219">perm</span>&nbsp;<span class="ident" id="2477224">FileMode</span><span class="op" id="2477232">)</span>&nbsp;<span class="builtintype" id="2477234">error</span>&nbsp;<span class="op" id="2477240">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2477243">e</span>&nbsp;<span class="op" id="2477245">:=</span>&nbsp;<span class="ident" id="2477248">syscall</span><span class="op" id="2477255">.</span><span class="ident" id="2477256">Mkdir</span><span class="op" id="2477261">(</span><span class="ident" id="2477262">name</span><span class="op" id="2477266">,</span>&nbsp;<span class="ident" id="2477268">syscallMode</span><span class="op" id="2477279">(</span><span class="ident" id="2477280">perm</span><span class="op" id="2477284">)</span><span class="op" id="2477285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477288">if</span>&nbsp;<span class="ident" id="2477291">e</span>&nbsp;<span class="op" id="2477293">!=</span>&nbsp;<span class="ident" id="2477296">nil</span>&nbsp;<span class="op" id="2477300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477304">return</span>&nbsp;<span class="op" id="2477311">&amp;</span><span class="ident" id="2477312">PathError</span><span class="op" id="2477321">{</span><span class="string" id="2477322">&#34;mkdir&#34;</span><span class="op" id="2477329">,</span>&nbsp;<span class="ident" id="2477331">name</span><span class="op" id="2477335">,</span>&nbsp;<span class="ident" id="2477337">e</span><span class="op" id="2477338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2477341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477344">return</span>&nbsp;<span class="ident" id="2477351">nil</span><br>
<span class="lineno">210</span><span class="op" id="2477355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2477358">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2477429">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2477485">func</span>&nbsp;<span class="ident" id="2477490">Chdir</span><span class="op" id="2477495">(</span><span class="ident" id="2477496">dir</span>&nbsp;<span class="builtintype" id="2477500">string</span><span class="op" id="2477506">)</span>&nbsp;<span class="builtintype" id="2477508">error</span>&nbsp;<span class="op" id="2477514">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477517">if</span>&nbsp;<span class="ident" id="2477520">e</span>&nbsp;<span class="op" id="2477522">:=</span>&nbsp;<span class="ident" id="2477525">syscall</span><span class="op" id="2477532">.</span><span class="ident" id="2477533">Chdir</span><span class="op" id="2477538">(</span><span class="ident" id="2477539">dir</span><span class="op" id="2477542">)</span><span class="op" id="2477543">;</span>&nbsp;<span class="ident" id="2477545">e</span>&nbsp;<span class="op" id="2477547">!=</span>&nbsp;<span class="ident" id="2477550">nil</span>&nbsp;<span class="op" id="2477554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477558">return</span>&nbsp;<span class="op" id="2477565">&amp;</span><span class="ident" id="2477566">PathError</span><span class="op" id="2477575">{</span><span class="string" id="2477576">&#34;chdir&#34;</span><span class="op" id="2477583">,</span>&nbsp;<span class="ident" id="2477585">dir</span><span class="op" id="2477588">,</span>&nbsp;<span class="ident" id="2477590">e</span><span class="op" id="2477591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2477594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477597">return</span>&nbsp;<span class="ident" id="2477604">nil</span><br>
<span class="lineno"></span><span class="op" id="2477608">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2477611">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2477671">//&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2477701">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2477757">func</span>&nbsp;<span class="op" id="2477762">(</span><span class="ident" id="2477763">f</span>&nbsp;<span class="op" id="2477765">*</span><span class="ident" id="2477766">File</span><span class="op" id="2477770">)</span>&nbsp;<span class="ident" id="2477772">Chdir</span><span class="op" id="2477777">(</span><span class="op" id="2477778">)</span>&nbsp;<span class="builtintype" id="2477780">error</span>&nbsp;<span class="op" id="2477786">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477789">if</span>&nbsp;<span class="ident" id="2477792">f</span>&nbsp;<span class="op" id="2477794">==</span>&nbsp;<span class="ident" id="2477797">nil</span>&nbsp;<span class="op" id="2477801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477805">return</span>&nbsp;<span class="ident" id="2477812">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2477824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477827">if</span>&nbsp;<span class="ident" id="2477830">e</span>&nbsp;<span class="op" id="2477832">:=</span>&nbsp;<span class="ident" id="2477835">syscall</span><span class="op" id="2477842">.</span><span class="ident" id="2477843">Fchdir</span><span class="op" id="2477849">(</span><span class="ident" id="2477850">f</span><span class="op" id="2477851">.</span><span class="ident" id="2477852">fd</span><span class="op" id="2477854">)</span><span class="op" id="2477855">;</span>&nbsp;<span class="ident" id="2477857">e</span>&nbsp;<span class="op" id="2477859">!=</span>&nbsp;<span class="ident" id="2477862">nil</span>&nbsp;<span class="op" id="2477866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477870">return</span>&nbsp;<span class="op" id="2477877">&amp;</span><span class="ident" id="2477878">PathError</span><span class="op" id="2477887">{</span><span class="string" id="2477888">&#34;chdir&#34;</span><span class="op" id="2477895">,</span>&nbsp;<span class="ident" id="2477897">f</span><span class="op" id="2477898">.</span><span class="ident" id="2477899">name</span><span class="op" id="2477903">,</span>&nbsp;<span class="ident" id="2477905">e</span><span class="op" id="2477906">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2477909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2477912">return</span>&nbsp;<span class="ident" id="2477919">nil</span><br>
<span class="lineno"></span><span class="op" id="2477923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2477926">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;for&nbsp;reading.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on</span><br>
<span class="lineno">235</span><span class="comment" id="2477995">//&nbsp;the&nbsp;returned&nbsp;file&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;reading;&nbsp;the&nbsp;associated&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2478061">//&nbsp;descriptor&nbsp;has&nbsp;mode&nbsp;O_RDONLY.</span><br>
<span class="lineno"></span><span class="comment" id="2478094">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2478150">func</span>&nbsp;<span class="ident" id="2478155">Open</span><span class="op" id="2478159">(</span><span class="ident" id="2478160">name</span>&nbsp;<span class="builtintype" id="2478165">string</span><span class="op" id="2478171">)</span>&nbsp;<span class="op" id="2478173">(</span><span class="ident" id="2478174">file</span>&nbsp;<span class="op" id="2478179">*</span><span class="ident" id="2478180">File</span><span class="op" id="2478184">,</span>&nbsp;<span class="ident" id="2478186">err</span>&nbsp;<span class="builtintype" id="2478190">error</span><span class="op" id="2478195">)</span>&nbsp;<span class="op" id="2478197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2478200">return</span>&nbsp;<span class="ident" id="2478207">OpenFile</span><span class="op" id="2478215">(</span><span class="ident" id="2478216">name</span><span class="op" id="2478220">,</span>&nbsp;<span class="ident" id="2478222">O_RDONLY</span><span class="op" id="2478230">,</span>&nbsp;<span class="num" id="2478232">0</span><span class="op" id="2478233">)</span><br>
<span class="lineno">240</span><span class="op" id="2478235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2478238">//&nbsp;Create&nbsp;creates&nbsp;the&nbsp;named&nbsp;file&nbsp;mode&nbsp;0666&nbsp;(before&nbsp;umask),&nbsp;truncating</span><br>
<span class="lineno"></span><span class="comment" id="2478308">//&nbsp;it&nbsp;if&nbsp;it&nbsp;already&nbsp;exists.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2478376">//&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O;&nbsp;the&nbsp;associated&nbsp;file&nbsp;descriptor&nbsp;has&nbsp;mode</span><br>
<span class="lineno">245</span><span class="comment" id="2478445">//&nbsp;O_RDWR.</span><br>
<span class="lineno"></span><span class="comment" id="2478456">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2478512">func</span>&nbsp;<span class="ident" id="2478517">Create</span><span class="op" id="2478523">(</span><span class="ident" id="2478524">name</span>&nbsp;<span class="builtintype" id="2478529">string</span><span class="op" id="2478535">)</span>&nbsp;<span class="op" id="2478537">(</span><span class="ident" id="2478538">file</span>&nbsp;<span class="op" id="2478543">*</span><span class="ident" id="2478544">File</span><span class="op" id="2478548">,</span>&nbsp;<span class="ident" id="2478550">err</span>&nbsp;<span class="builtintype" id="2478554">error</span><span class="op" id="2478559">)</span>&nbsp;<span class="op" id="2478561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2478564">return</span>&nbsp;<span class="ident" id="2478571">OpenFile</span><span class="op" id="2478579">(</span><span class="ident" id="2478580">name</span><span class="op" id="2478584">,</span>&nbsp;<span class="ident" id="2478586">O_RDWR</span><span class="op" id="2478592">|</span><span class="ident" id="2478593">O_CREATE</span><span class="op" id="2478601">|</span><span class="ident" id="2478602">O_TRUNC</span><span class="op" id="2478609">,</span>&nbsp;<span class="num" id="2478611">0666</span><span class="op" id="2478615">)</span><br>
<span class="lineno"></span><span class="op" id="2478617">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="2478620">//&nbsp;lstat&nbsp;is&nbsp;overridden&nbsp;in&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="2478653">var</span>&nbsp;<span class="ident" id="2478657">lstat</span>&nbsp;<span class="op" id="2478663">=</span>&nbsp;<span class="ident" id="2478665">Lstat</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2478672">//&nbsp;Rename&nbsp;renames&nbsp;(moves)&nbsp;a&nbsp;file.&nbsp;OS-specific&nbsp;restrictions&nbsp;might&nbsp;apply.</span><br>
<span class="lineno">255</span><span class="keyword" id="2478744">func</span>&nbsp;<span class="ident" id="2478749">Rename</span><span class="op" id="2478755">(</span><span class="ident" id="2478756">oldpath</span><span class="op" id="2478763">,</span>&nbsp;<span class="ident" id="2478765">newpath</span>&nbsp;<span class="builtintype" id="2478773">string</span><span class="op" id="2478779">)</span>&nbsp;<span class="builtintype" id="2478781">error</span>&nbsp;<span class="op" id="2478787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2478790">return</span>&nbsp;<span class="ident" id="2478797">rename</span><span class="op" id="2478803">(</span><span class="ident" id="2478804">oldpath</span><span class="op" id="2478811">,</span>&nbsp;<span class="ident" id="2478813">newpath</span><span class="op" id="2478820">)</span><br>
<span class="lineno"></span><span class="op" id="2478822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2478825">//&nbsp;Many&nbsp;functions&nbsp;in&nbsp;package&nbsp;syscall&nbsp;return&nbsp;a&nbsp;count&nbsp;of&nbsp;-1&nbsp;instead&nbsp;of&nbsp;0.</span><br>
<span class="lineno">260</span><span class="comment" id="2478897">//&nbsp;Using&nbsp;fixCount(call())&nbsp;instead&nbsp;of&nbsp;call()&nbsp;corrects&nbsp;the&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2478961">func</span>&nbsp;<span class="ident" id="2478966">fixCount</span><span class="op" id="2478974">(</span><span class="ident" id="2478975">n</span>&nbsp;<span class="builtintype" id="2478977">int</span><span class="op" id="2478980">,</span>&nbsp;<span class="ident" id="2478982">err</span>&nbsp;<span class="builtintype" id="2478986">error</span><span class="op" id="2478991">)</span>&nbsp;<span class="op" id="2478993">(</span><span class="builtintype" id="2478994">int</span><span class="op" id="2478997">,</span>&nbsp;<span class="builtintype" id="2478999">error</span><span class="op" id="2479004">)</span>&nbsp;<span class="op" id="2479006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479009">if</span>&nbsp;<span class="ident" id="2479012">n</span>&nbsp;<span class="op" id="2479014">&lt;</span>&nbsp;<span class="num" id="2479016">0</span>&nbsp;<span class="op" id="2479018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2479022">n</span>&nbsp;<span class="op" id="2479024">=</span>&nbsp;<span class="num" id="2479026">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2479029">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479032">return</span>&nbsp;<span class="ident" id="2479039">n</span><span class="op" id="2479040">,</span>&nbsp;<span class="ident" id="2479042">err</span><br>
<span class="lineno"></span><span class="op" id="2479046">}</span>
</div>
</body>
</html>
