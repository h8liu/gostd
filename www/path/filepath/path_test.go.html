<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="703098">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="703153">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="703207">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="703258">package</span>&nbsp;<span class="ident" id="703266">filepath_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="703281">import</span>&nbsp;<span class="op" id="703288">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="703291">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="703301">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="703314">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="703320">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="703337">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="703348">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="703359">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="703370">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="703380">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="703383">var</span>&nbsp;<span class="ident" id="703387">supportsSymlinks</span>&nbsp;<span class="op" id="703404">=</span>&nbsp;<span class="ident" id="703406">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="703412">type</span>&nbsp;<span class="ident" id="703417">PathTest</span>&nbsp;<span class="keyword" id="703426">struct</span>&nbsp;<span class="op" id="703433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="703436">path</span><span class="op" id="703440">,</span>&nbsp;<span class="ident" id="703442">result</span>&nbsp;<span class="builtintype" id="703449">string</span><br>
<span class="lineno"></span><span class="op" id="703456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="703459">var</span>&nbsp;<span class="ident" id="703463">cleantests</span>&nbsp;<span class="op" id="703474">=</span>&nbsp;<span class="op" id="703476">[</span><span class="op" id="703477">]</span><span class="ident" id="703478"><a href="/path/filepath/path_test.go.html#703417">PathTest</a></span><span class="op" id="703486">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="703489">//&nbsp;Already&nbsp;clean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703507">{</span><span class="string" id="703508">&#34;abc&#34;</span><span class="op" id="703513">,</span>&nbsp;<span class="string" id="703515">&#34;abc&#34;</span><span class="op" id="703520">}</span><span class="op" id="703521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703524">{</span><span class="string" id="703525">&#34;abc/def&#34;</span><span class="op" id="703534">,</span>&nbsp;<span class="string" id="703536">&#34;abc/def&#34;</span><span class="op" id="703545">}</span><span class="op" id="703546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703549">{</span><span class="string" id="703550">&#34;a/b/c&#34;</span><span class="op" id="703557">,</span>&nbsp;<span class="string" id="703559">&#34;a/b/c&#34;</span><span class="op" id="703566">}</span><span class="op" id="703567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703570">{</span><span class="string" id="703571">&#34;.&#34;</span><span class="op" id="703574">,</span>&nbsp;<span class="string" id="703576">&#34;.&#34;</span><span class="op" id="703579">}</span><span class="op" id="703580">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703583">{</span><span class="string" id="703584">&#34;..&#34;</span><span class="op" id="703588">,</span>&nbsp;<span class="string" id="703590">&#34;..&#34;</span><span class="op" id="703594">}</span><span class="op" id="703595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703598">{</span><span class="string" id="703599">&#34;../..&#34;</span><span class="op" id="703606">,</span>&nbsp;<span class="string" id="703608">&#34;../..&#34;</span><span class="op" id="703615">}</span><span class="op" id="703616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703619">{</span><span class="string" id="703620">&#34;../../abc&#34;</span><span class="op" id="703631">,</span>&nbsp;<span class="string" id="703633">&#34;../../abc&#34;</span><span class="op" id="703644">}</span><span class="op" id="703645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703648">{</span><span class="string" id="703649">&#34;/abc&#34;</span><span class="op" id="703655">,</span>&nbsp;<span class="string" id="703657">&#34;/abc&#34;</span><span class="op" id="703663">}</span><span class="op" id="703664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703667">{</span><span class="string" id="703668">&#34;/&#34;</span><span class="op" id="703671">,</span>&nbsp;<span class="string" id="703673">&#34;/&#34;</span><span class="op" id="703676">}</span><span class="op" id="703677">,</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="703681">//&nbsp;Empty&nbsp;is&nbsp;current&nbsp;dir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703706">{</span><span class="string" id="703707">&#34;&#34;</span><span class="op" id="703709">,</span>&nbsp;<span class="string" id="703711">&#34;.&#34;</span><span class="op" id="703714">}</span><span class="op" id="703715">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="703719">//&nbsp;Remove&nbsp;trailing&nbsp;slash</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703745">{</span><span class="string" id="703746">&#34;abc/&#34;</span><span class="op" id="703752">,</span>&nbsp;<span class="string" id="703754">&#34;abc&#34;</span><span class="op" id="703759">}</span><span class="op" id="703760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703763">{</span><span class="string" id="703764">&#34;abc/def/&#34;</span><span class="op" id="703774">,</span>&nbsp;<span class="string" id="703776">&#34;abc/def&#34;</span><span class="op" id="703785">}</span><span class="op" id="703786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703789">{</span><span class="string" id="703790">&#34;a/b/c/&#34;</span><span class="op" id="703798">,</span>&nbsp;<span class="string" id="703800">&#34;a/b/c&#34;</span><span class="op" id="703807">}</span><span class="op" id="703808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703811">{</span><span class="string" id="703812">&#34;./&#34;</span><span class="op" id="703816">,</span>&nbsp;<span class="string" id="703818">&#34;.&#34;</span><span class="op" id="703821">}</span><span class="op" id="703822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703825">{</span><span class="string" id="703826">&#34;../&#34;</span><span class="op" id="703831">,</span>&nbsp;<span class="string" id="703833">&#34;..&#34;</span><span class="op" id="703837">}</span><span class="op" id="703838">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703841">{</span><span class="string" id="703842">&#34;../../&#34;</span><span class="op" id="703850">,</span>&nbsp;<span class="string" id="703852">&#34;../..&#34;</span><span class="op" id="703859">}</span><span class="op" id="703860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703863">{</span><span class="string" id="703864">&#34;/abc/&#34;</span><span class="op" id="703871">,</span>&nbsp;<span class="string" id="703873">&#34;/abc&#34;</span><span class="op" id="703879">}</span><span class="op" id="703880">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="703884">//&nbsp;Remove&nbsp;doubled&nbsp;slash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703909">{</span><span class="string" id="703910">&#34;abc//def//ghi&#34;</span><span class="op" id="703925">,</span>&nbsp;<span class="string" id="703927">&#34;abc/def/ghi&#34;</span><span class="op" id="703940">}</span><span class="op" id="703941">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703944">{</span><span class="string" id="703945">&#34;//abc&#34;</span><span class="op" id="703952">,</span>&nbsp;<span class="string" id="703954">&#34;/abc&#34;</span><span class="op" id="703960">}</span><span class="op" id="703961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703964">{</span><span class="string" id="703965">&#34;///abc&#34;</span><span class="op" id="703973">,</span>&nbsp;<span class="string" id="703975">&#34;/abc&#34;</span><span class="op" id="703981">}</span><span class="op" id="703982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="703985">{</span><span class="string" id="703986">&#34;//abc//&#34;</span><span class="op" id="703995">,</span>&nbsp;<span class="string" id="703997">&#34;/abc&#34;</span><span class="op" id="704003">}</span><span class="op" id="704004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704007">{</span><span class="string" id="704008">&#34;abc//&#34;</span><span class="op" id="704015">,</span>&nbsp;<span class="string" id="704017">&#34;abc&#34;</span><span class="op" id="704022">}</span><span class="op" id="704023">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="704027">//&nbsp;Remove&nbsp;.&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704049">{</span><span class="string" id="704050">&#34;abc/./def&#34;</span><span class="op" id="704061">,</span>&nbsp;<span class="string" id="704063">&#34;abc/def&#34;</span><span class="op" id="704072">}</span><span class="op" id="704073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704076">{</span><span class="string" id="704077">&#34;/./abc/def&#34;</span><span class="op" id="704089">,</span>&nbsp;<span class="string" id="704091">&#34;/abc/def&#34;</span><span class="op" id="704101">}</span><span class="op" id="704102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704105">{</span><span class="string" id="704106">&#34;abc/.&#34;</span><span class="op" id="704113">,</span>&nbsp;<span class="string" id="704115">&#34;abc&#34;</span><span class="op" id="704120">}</span><span class="op" id="704121">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="704125">//&nbsp;Remove&nbsp;..&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704148">{</span><span class="string" id="704149">&#34;abc/def/ghi/../jkl&#34;</span><span class="op" id="704169">,</span>&nbsp;<span class="string" id="704171">&#34;abc/def/jkl&#34;</span><span class="op" id="704184">}</span><span class="op" id="704185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704188">{</span><span class="string" id="704189">&#34;abc/def/../ghi/../jkl&#34;</span><span class="op" id="704212">,</span>&nbsp;<span class="string" id="704214">&#34;abc/jkl&#34;</span><span class="op" id="704223">}</span><span class="op" id="704224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704227">{</span><span class="string" id="704228">&#34;abc/def/..&#34;</span><span class="op" id="704240">,</span>&nbsp;<span class="string" id="704242">&#34;abc&#34;</span><span class="op" id="704247">}</span><span class="op" id="704248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704251">{</span><span class="string" id="704252">&#34;abc/def/../..&#34;</span><span class="op" id="704267">,</span>&nbsp;<span class="string" id="704269">&#34;.&#34;</span><span class="op" id="704272">}</span><span class="op" id="704273">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704276">{</span><span class="string" id="704277">&#34;/abc/def/../..&#34;</span><span class="op" id="704293">,</span>&nbsp;<span class="string" id="704295">&#34;/&#34;</span><span class="op" id="704298">}</span><span class="op" id="704299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704302">{</span><span class="string" id="704303">&#34;abc/def/../../..&#34;</span><span class="op" id="704321">,</span>&nbsp;<span class="string" id="704323">&#34;..&#34;</span><span class="op" id="704327">}</span><span class="op" id="704328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704331">{</span><span class="string" id="704332">&#34;/abc/def/../../..&#34;</span><span class="op" id="704351">,</span>&nbsp;<span class="string" id="704353">&#34;/&#34;</span><span class="op" id="704356">}</span><span class="op" id="704357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704360">{</span><span class="string" id="704361">&#34;abc/def/../../../ghi/jkl/../../../mno&#34;</span><span class="op" id="704400">,</span>&nbsp;<span class="string" id="704402">&#34;../../mno&#34;</span><span class="op" id="704413">}</span><span class="op" id="704414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704417">{</span><span class="string" id="704418">&#34;/../abc&#34;</span><span class="op" id="704427">,</span>&nbsp;<span class="string" id="704429">&#34;/abc&#34;</span><span class="op" id="704435">}</span><span class="op" id="704436">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="704440">//&nbsp;Combinations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704457">{</span><span class="string" id="704458">&#34;abc/./../def&#34;</span><span class="op" id="704472">,</span>&nbsp;<span class="string" id="704474">&#34;def&#34;</span><span class="op" id="704479">}</span><span class="op" id="704480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704483">{</span><span class="string" id="704484">&#34;abc//./../def&#34;</span><span class="op" id="704499">,</span>&nbsp;<span class="string" id="704501">&#34;def&#34;</span><span class="op" id="704506">}</span><span class="op" id="704507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704510">{</span><span class="string" id="704511">&#34;abc/../../././../def&#34;</span><span class="op" id="704533">,</span>&nbsp;<span class="string" id="704535">&#34;../../def&#34;</span><span class="op" id="704546">}</span><span class="op" id="704547">,</span><br>
<span class="lineno">75</span><span class="op" id="704549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="704552">var</span>&nbsp;<span class="ident" id="704556">wincleantests</span>&nbsp;<span class="op" id="704570">=</span>&nbsp;<span class="op" id="704572">[</span><span class="op" id="704573">]</span><span class="ident" id="704574"><a href="/path/filepath/path_test.go.html#703417">PathTest</a></span><span class="op" id="704582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704585">{</span><span class="string" id="704586">`c:`</span><span class="op" id="704590">,</span>&nbsp;<span class="string" id="704592">`c:.`</span><span class="op" id="704597">}</span><span class="op" id="704598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704601">{</span><span class="string" id="704602">`c:\`</span><span class="op" id="704607">,</span>&nbsp;<span class="string" id="704609">`c:\`</span><span class="op" id="704614">}</span><span class="op" id="704615">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704618">{</span><span class="string" id="704619">`c:\abc`</span><span class="op" id="704627">,</span>&nbsp;<span class="string" id="704629">`c:\abc`</span><span class="op" id="704637">}</span><span class="op" id="704638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704641">{</span><span class="string" id="704642">`c:abc\..\..\.\.\..\def`</span><span class="op" id="704666">,</span>&nbsp;<span class="string" id="704668">`c:..\..\def`</span><span class="op" id="704681">}</span><span class="op" id="704682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704685">{</span><span class="string" id="704686">`c:\abc\def\..\..`</span><span class="op" id="704704">,</span>&nbsp;<span class="string" id="704706">`c:\`</span><span class="op" id="704711">}</span><span class="op" id="704712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704715">{</span><span class="string" id="704716">`c:\..\abc`</span><span class="op" id="704727">,</span>&nbsp;<span class="string" id="704729">`c:\abc`</span><span class="op" id="704737">}</span><span class="op" id="704738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704741">{</span><span class="string" id="704742">`c:..\abc`</span><span class="op" id="704752">,</span>&nbsp;<span class="string" id="704754">`c:..\abc`</span><span class="op" id="704764">}</span><span class="op" id="704765">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704768">{</span><span class="string" id="704769">`\`</span><span class="op" id="704772">,</span>&nbsp;<span class="string" id="704774">`\`</span><span class="op" id="704777">}</span><span class="op" id="704778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704781">{</span><span class="string" id="704782">`/`</span><span class="op" id="704785">,</span>&nbsp;<span class="string" id="704787">`\`</span><span class="op" id="704790">}</span><span class="op" id="704791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704794">{</span><span class="string" id="704795">`\\i\..\c$`</span><span class="op" id="704806">,</span>&nbsp;<span class="string" id="704808">`\c$`</span><span class="op" id="704813">}</span><span class="op" id="704814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704817">{</span><span class="string" id="704818">`\\i\..\i\c$`</span><span class="op" id="704831">,</span>&nbsp;<span class="string" id="704833">`\i\c$`</span><span class="op" id="704840">}</span><span class="op" id="704841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704844">{</span><span class="string" id="704845">`\\i\..\I\c$`</span><span class="op" id="704858">,</span>&nbsp;<span class="string" id="704860">`\I\c$`</span><span class="op" id="704867">}</span><span class="op" id="704868">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704871">{</span><span class="string" id="704872">`\\host\share\foo\..\bar`</span><span class="op" id="704897">,</span>&nbsp;<span class="string" id="704899">`\\host\share\bar`</span><span class="op" id="704917">}</span><span class="op" id="704918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704921">{</span><span class="string" id="704922">`//host/share/foo/../baz`</span><span class="op" id="704947">,</span>&nbsp;<span class="string" id="704949">`\\host\share\baz`</span><span class="op" id="704967">}</span><span class="op" id="704968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704971">{</span><span class="string" id="704972">`\\a\b\..\c`</span><span class="op" id="704984">,</span>&nbsp;<span class="string" id="704986">`\\a\b\c`</span><span class="op" id="704995">}</span><span class="op" id="704996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="704999">{</span><span class="string" id="705000">`\\a\b`</span><span class="op" id="705007">,</span>&nbsp;<span class="string" id="705009">`\\a\b`</span><span class="op" id="705016">}</span><span class="op" id="705017">,</span><br>
<span class="lineno"></span><span class="op" id="705019">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="705022">func</span>&nbsp;<span class="ident" id="705027">TestClean</span><span class="op" id="705036">(</span><span class="ident" id="705037">t</span>&nbsp;<span class="op" id="705039">*</span><span class="ident" id="705040"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="705047">.</span><span class="ident" id="705048">T</span><span class="op" id="705049">)</span>&nbsp;<span class="op" id="705051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="705054">tests</span>&nbsp;<span class="op" id="705060">:=</span>&nbsp;<span class="ident" id="705063"><a href="/path/filepath/path_test.go.html#703463">cleantests</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="705075">if</span>&nbsp;<span class="ident" id="705078"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="705085">.</span><span class="ident" id="705086">GOOS</span>&nbsp;<span class="op" id="705091">==</span>&nbsp;<span class="string" id="705094">&#34;windows&#34;</span>&nbsp;<span class="op" id="705104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="705108">for</span>&nbsp;<span class="ident" id="705112">i</span>&nbsp;<span class="op" id="705114">:=</span>&nbsp;<span class="keyword" id="705117">range</span>&nbsp;<span class="ident" id="705123"><a href="/path/filepath/path_test.go.html#705054">tests</a></span>&nbsp;<span class="op" id="705129">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="705134"><a href="/path/filepath/path_test.go.html#705054">tests</a></span><span class="op" id="705139">[</span><span class="ident" id="705140"><a href="/path/filepath/path_test.go.html#705112">i</a></span><span class="op" id="705141">]</span><span class="op" id="705142">.</span><span class="ident" id="705143">result</span>&nbsp;<span class="op" id="705150">=</span>&nbsp;<span class="ident" id="705152"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="705160">.</span><span class="ident" id="705161">FromSlash</span><span class="op" id="705170">(</span><span class="ident" id="705171"><a href="/path/filepath/path_test.go.html#705054">tests</a></span><span class="op" id="705176">[</span><span class="ident" id="705177"><a href="/path/filepath/path_test.go.html#705112">i</a></span><span class="op" id="705178">]</span><span class="op" id="705179">.</span><span class="ident" id="705180">result</span><span class="op" id="705186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="705190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="705194"><a href="/path/filepath/path_test.go.html#705054">tests</a></span>&nbsp;<span class="op" id="705200">=</span>&nbsp;<span class="builtinfunc" id="705202">append</span><span class="op" id="705208">(</span><span class="ident" id="705209"><a href="/path/filepath/path_test.go.html#705054">tests</a></span><span class="op" id="705214">,</span>&nbsp;<span class="ident" id="705216"><a href="/path/filepath/path_test.go.html#704556">wincleantests</a></span><span class="op" id="705229">...</span><span class="op" id="705232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="705235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="705238">for</span>&nbsp;<span class="ident" id="705242">_</span><span class="op" id="705243">,</span>&nbsp;<span class="ident" id="705245">test</span>&nbsp;<span class="op" id="705250">:=</span>&nbsp;<span class="keyword" id="705253">range</span>&nbsp;<span class="ident" id="705259"><a href="/path/filepath/path_test.go.html#705054">tests</a></span>&nbsp;<span class="op" id="705265">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="705269">if</span>&nbsp;<span class="ident" id="705272">s</span>&nbsp;<span class="op" id="705274">:=</span>&nbsp;<span class="ident" id="705277"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="705285">.</span><span class="ident" id="705286">Clean</span><span class="op" id="705291">(</span><span class="ident" id="705292"><a href="/path/filepath/path_test.go.html#705245">test</a></span><span class="op" id="705296">.</span><span class="ident" id="705297">path</span><span class="op" id="705301">)</span><span class="op" id="705302">;</span>&nbsp;<span class="ident" id="705304"><a href="/path/filepath/path_test.go.html#705272">s</a></span>&nbsp;<span class="op" id="705306">!=</span>&nbsp;<span class="ident" id="705309"><a href="/path/filepath/path_test.go.html#705245">test</a></span><span class="op" id="705313">.</span><span class="ident" id="705314">result</span>&nbsp;<span class="op" id="705321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="705326"><a href="/path/filepath/path_test.go.html#705037">t</a></span><span class="op" id="705327">.</span><span class="ident" id="705328">Errorf</span><span class="op" id="705334">(</span><span class="string" id="705335">&#34;Clean(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="705360">,</span>&nbsp;<span class="ident" id="705362"><a href="/path/filepath/path_test.go.html#705245">test</a></span><span class="op" id="705366">.</span><span class="ident" id="705367">path</span><span class="op" id="705371">,</span>&nbsp;<span class="ident" id="705373"><a href="/path/filepath/path_test.go.html#705272">s</a></span><span class="op" id="705374">,</span>&nbsp;<span class="ident" id="705376"><a href="/path/filepath/path_test.go.html#705245">test</a></span><span class="op" id="705380">.</span><span class="ident" id="705381">result</span><span class="op" id="705387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="705391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="705395">if</span>&nbsp;<span class="ident" id="705398">s</span>&nbsp;<span class="op" id="705400">:=</span>&nbsp;<span class="ident" id="705403"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="705411">.</span><span class="ident" id="705412">Clean</span><span class="op" id="705417">(</span><span class="ident" id="705418"><a href="/path/filepath/path_test.go.html#705245">test</a></span><span class="op" id="705422">.</span><span class="ident" id="705423">result</span><span class="op" id="705429">)</span><span class="op" id="705430">;</span>&nbsp;<span class="ident" id="705432"><a href="/path/filepath/path_test.go.html#705398">s</a></span>&nbsp;<span class="op" id="705434">!=</span>&nbsp;<span class="ident" id="705437"><a href="/path/filepath/path_test.go.html#705245">test</a></span><span class="op" id="705441">.</span><span class="ident" id="705442">result</span>&nbsp;<span class="op" id="705449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="705454"><a href="/path/filepath/path_test.go.html#705037">t</a></span><span class="op" id="705455">.</span><span class="ident" id="705456">Errorf</span><span class="op" id="705462">(</span><span class="string" id="705463">&#34;Clean(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="705488">,</span>&nbsp;<span class="ident" id="705490"><a href="/path/filepath/path_test.go.html#705245">test</a></span><span class="op" id="705494">.</span><span class="ident" id="705495">result</span><span class="op" id="705501">,</span>&nbsp;<span class="ident" id="705503"><a href="/path/filepath/path_test.go.html#705398">s</a></span><span class="op" id="705504">,</span>&nbsp;<span class="ident" id="705506"><a href="/path/filepath/path_test.go.html#705245">test</a></span><span class="op" id="705510">.</span><span class="ident" id="705511">result</span><span class="op" id="705517">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="705521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="705524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="705528">if</span>&nbsp;<span class="ident" id="705531"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="705538">.</span><span class="ident" id="705539">Short</span><span class="op" id="705544">(</span><span class="op" id="705545">)</span>&nbsp;<span class="op" id="705547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="705551"><a href="/path/filepath/path_test.go.html#705037">t</a></span><span class="op" id="705552">.</span><span class="ident" id="705553">Skip</span><span class="op" id="705557">(</span><span class="string" id="705558">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="705595">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="705598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="705601">if</span>&nbsp;<span class="ident" id="705604"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="705611">.</span><span class="ident" id="705612">GOMAXPROCS</span><span class="op" id="705622">(</span><span class="num" id="705623">0</span><span class="op" id="705624">)</span>&nbsp;<span class="op" id="705626">&gt;</span>&nbsp;<span class="num" id="705628">1</span>&nbsp;<span class="op" id="705630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="705634"><a href="/path/filepath/path_test.go.html#705037">t</a></span><span class="op" id="705635">.</span><span class="ident" id="705636">Log</span><span class="op" id="705639">(</span><span class="string" id="705640">&#34;skipping&nbsp;AllocsPerRun&nbsp;checks;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="705684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="705688">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="705696">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="705700">for</span>&nbsp;<span class="ident" id="705704">_</span><span class="op" id="705705">,</span>&nbsp;<span class="ident" id="705707">test</span>&nbsp;<span class="op" id="705712">:=</span>&nbsp;<span class="keyword" id="705715">range</span>&nbsp;<span class="ident" id="705721"><a href="/path/filepath/path_test.go.html#705054">tests</a></span>&nbsp;<span class="op" id="705727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="705731">allocs</span>&nbsp;<span class="op" id="705738">:=</span>&nbsp;<span class="ident" id="705741"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="705748">.</span><span class="ident" id="705749">AllocsPerRun</span><span class="op" id="705761">(</span><span class="num" id="705762">100</span><span class="op" id="705765">,</span>&nbsp;<span class="keyword" id="705767">func</span><span class="op" id="705771">(</span><span class="op" id="705772">)</span>&nbsp;<span class="op" id="705774">{</span>&nbsp;<span class="ident" id="705776"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="705784">.</span><span class="ident" id="705785">Clean</span><span class="op" id="705790">(</span><span class="ident" id="705791"><a href="/path/filepath/path_test.go.html#705707">test</a></span><span class="op" id="705795">.</span><span class="ident" id="705796">result</span><span class="op" id="705802">)</span>&nbsp;<span class="op" id="705804">}</span><span class="op" id="705805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="705809">if</span>&nbsp;<span class="ident" id="705812"><a href="/path/filepath/path_test.go.html#705731">allocs</a></span>&nbsp;<span class="op" id="705819">&gt;</span>&nbsp;<span class="num" id="705821">0</span>&nbsp;<span class="op" id="705823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="705828"><a href="/path/filepath/path_test.go.html#705037">t</a></span><span class="op" id="705829">.</span><span class="ident" id="705830">Errorf</span><span class="op" id="705836">(</span><span class="string" id="705837">&#34;Clean(%q):&nbsp;%v&nbsp;allocs,&nbsp;want&nbsp;zero&#34;</span><span class="op" id="705870">,</span>&nbsp;<span class="ident" id="705872"><a href="/path/filepath/path_test.go.html#705707">test</a></span><span class="op" id="705876">.</span><span class="ident" id="705877">result</span><span class="op" id="705883">,</span>&nbsp;<span class="ident" id="705885"><a href="/path/filepath/path_test.go.html#705731">allocs</a></span><span class="op" id="705891">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="705895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="705898">}</span><br>
<span class="lineno"></span><span class="op" id="705900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="705903">const</span>&nbsp;<span class="ident" id="705909">sep</span>&nbsp;<span class="op" id="705913">=</span>&nbsp;<span class="ident" id="705915"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="705923">.</span><span class="ident" id="705924">Separator</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="705935">var</span>&nbsp;<span class="ident" id="705939">slashtests</span>&nbsp;<span class="op" id="705950">=</span>&nbsp;<span class="op" id="705952">[</span><span class="op" id="705953">]</span><span class="ident" id="705954"><a href="/path/filepath/path_test.go.html#703417">PathTest</a></span><span class="op" id="705962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="705965">{</span><span class="string" id="705966">&#34;&#34;</span><span class="op" id="705968">,</span>&nbsp;<span class="string" id="705970">&#34;&#34;</span><span class="op" id="705972">}</span><span class="op" id="705973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="705976">{</span><span class="string" id="705977">&#34;/&#34;</span><span class="op" id="705980">,</span>&nbsp;<span class="builtintype" id="705982">string</span><span class="op" id="705988">(</span><span class="ident" id="705989"><a href="/path/filepath/path_test.go.html#705909">sep</a></span><span class="op" id="705992">)</span><span class="op" id="705993">}</span><span class="op" id="705994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="705997">{</span><span class="string" id="705998">&#34;/a/b&#34;</span><span class="op" id="706004">,</span>&nbsp;<span class="builtintype" id="706006">string</span><span class="op" id="706012">(</span><span class="op" id="706013">[</span><span class="op" id="706014">]</span><span class="builtintype" id="706015">byte</span><span class="op" id="706019">{</span><span class="ident" id="706020"><a href="/path/filepath/path_test.go.html#705909">sep</a></span><span class="op" id="706023">,</span>&nbsp;<span class="string" id="706025">&#39;a&#39;</span><span class="op" id="706028">,</span>&nbsp;<span class="ident" id="706030"><a href="/path/filepath/path_test.go.html#705909">sep</a></span><span class="op" id="706033">,</span>&nbsp;<span class="string" id="706035">&#39;b&#39;</span><span class="op" id="706038">}</span><span class="op" id="706039">)</span><span class="op" id="706040">}</span><span class="op" id="706041">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706044">{</span><span class="string" id="706045">&#34;a//b&#34;</span><span class="op" id="706051">,</span>&nbsp;<span class="builtintype" id="706053">string</span><span class="op" id="706059">(</span><span class="op" id="706060">[</span><span class="op" id="706061">]</span><span class="builtintype" id="706062">byte</span><span class="op" id="706066">{</span><span class="string" id="706067">&#39;a&#39;</span><span class="op" id="706070">,</span>&nbsp;<span class="ident" id="706072"><a href="/path/filepath/path_test.go.html#705909">sep</a></span><span class="op" id="706075">,</span>&nbsp;<span class="ident" id="706077"><a href="/path/filepath/path_test.go.html#705909">sep</a></span><span class="op" id="706080">,</span>&nbsp;<span class="string" id="706082">&#39;b&#39;</span><span class="op" id="706085">}</span><span class="op" id="706086">)</span><span class="op" id="706087">}</span><span class="op" id="706088">,</span><br>
<span class="lineno"></span><span class="op" id="706090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="706093">func</span>&nbsp;<span class="ident" id="706098">TestFromAndToSlash</span><span class="op" id="706116">(</span><span class="ident" id="706117">t</span>&nbsp;<span class="op" id="706119">*</span><span class="ident" id="706120"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="706127">.</span><span class="ident" id="706128">T</span><span class="op" id="706129">)</span>&nbsp;<span class="op" id="706131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="706134">for</span>&nbsp;<span class="ident" id="706138">_</span><span class="op" id="706139">,</span>&nbsp;<span class="ident" id="706141">test</span>&nbsp;<span class="op" id="706146">:=</span>&nbsp;<span class="keyword" id="706149">range</span>&nbsp;<span class="ident" id="706155"><a href="/path/filepath/path_test.go.html#705939">slashtests</a></span>&nbsp;<span class="op" id="706166">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="706170">if</span>&nbsp;<span class="ident" id="706173">s</span>&nbsp;<span class="op" id="706175">:=</span>&nbsp;<span class="ident" id="706178"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="706186">.</span><span class="ident" id="706187">FromSlash</span><span class="op" id="706196">(</span><span class="ident" id="706197"><a href="/path/filepath/path_test.go.html#706141">test</a></span><span class="op" id="706201">.</span><span class="ident" id="706202">path</span><span class="op" id="706206">)</span><span class="op" id="706207">;</span>&nbsp;<span class="ident" id="706209"><a href="/path/filepath/path_test.go.html#706173">s</a></span>&nbsp;<span class="op" id="706211">!=</span>&nbsp;<span class="ident" id="706214"><a href="/path/filepath/path_test.go.html#706141">test</a></span><span class="op" id="706218">.</span><span class="ident" id="706219">result</span>&nbsp;<span class="op" id="706226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="706231"><a href="/path/filepath/path_test.go.html#706117">t</a></span><span class="op" id="706232">.</span><span class="ident" id="706233">Errorf</span><span class="op" id="706239">(</span><span class="string" id="706240">&#34;FromSlash(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="706269">,</span>&nbsp;<span class="ident" id="706271"><a href="/path/filepath/path_test.go.html#706141">test</a></span><span class="op" id="706275">.</span><span class="ident" id="706276">path</span><span class="op" id="706280">,</span>&nbsp;<span class="ident" id="706282"><a href="/path/filepath/path_test.go.html#706173">s</a></span><span class="op" id="706283">,</span>&nbsp;<span class="ident" id="706285"><a href="/path/filepath/path_test.go.html#706141">test</a></span><span class="op" id="706289">.</span><span class="ident" id="706290">result</span><span class="op" id="706296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="706304">if</span>&nbsp;<span class="ident" id="706307">s</span>&nbsp;<span class="op" id="706309">:=</span>&nbsp;<span class="ident" id="706312"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="706320">.</span><span class="ident" id="706321">ToSlash</span><span class="op" id="706328">(</span><span class="ident" id="706329"><a href="/path/filepath/path_test.go.html#706141">test</a></span><span class="op" id="706333">.</span><span class="ident" id="706334">result</span><span class="op" id="706340">)</span><span class="op" id="706341">;</span>&nbsp;<span class="ident" id="706343"><a href="/path/filepath/path_test.go.html#706307">s</a></span>&nbsp;<span class="op" id="706345">!=</span>&nbsp;<span class="ident" id="706348"><a href="/path/filepath/path_test.go.html#706141">test</a></span><span class="op" id="706352">.</span><span class="ident" id="706353">path</span>&nbsp;<span class="op" id="706358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="706363"><a href="/path/filepath/path_test.go.html#706117">t</a></span><span class="op" id="706364">.</span><span class="ident" id="706365">Errorf</span><span class="op" id="706371">(</span><span class="string" id="706372">&#34;ToSlash(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="706399">,</span>&nbsp;<span class="ident" id="706401"><a href="/path/filepath/path_test.go.html#706141">test</a></span><span class="op" id="706405">.</span><span class="ident" id="706406">result</span><span class="op" id="706412">,</span>&nbsp;<span class="ident" id="706414"><a href="/path/filepath/path_test.go.html#706307">s</a></span><span class="op" id="706415">,</span>&nbsp;<span class="ident" id="706417"><a href="/path/filepath/path_test.go.html#706141">test</a></span><span class="op" id="706421">.</span><span class="ident" id="706422">path</span><span class="op" id="706426">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706433">}</span><br>
<span class="lineno"></span><span class="op" id="706435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="706438">type</span>&nbsp;<span class="ident" id="706443">SplitListTest</span>&nbsp;<span class="keyword" id="706457">struct</span>&nbsp;<span class="op" id="706464">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="706467">list</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="706474">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="706482">result</span>&nbsp;<span class="op" id="706489">[</span><span class="op" id="706490">]</span><span class="builtintype" id="706491">string</span><br>
<span class="lineno"></span><span class="op" id="706498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="706501">const</span>&nbsp;<span class="ident" id="706507">lsep</span>&nbsp;<span class="op" id="706512">=</span>&nbsp;<span class="ident" id="706514"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="706522">.</span><span class="ident" id="706523">ListSeparator</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="706538">var</span>&nbsp;<span class="ident" id="706542">splitlisttests</span>&nbsp;<span class="op" id="706557">=</span>&nbsp;<span class="op" id="706559">[</span><span class="op" id="706560">]</span><span class="ident" id="706561"><a href="/path/filepath/path_test.go.html#706443">SplitListTest</a></span><span class="op" id="706574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706577">{</span><span class="string" id="706578">&#34;&#34;</span><span class="op" id="706580">,</span>&nbsp;<span class="op" id="706582">[</span><span class="op" id="706583">]</span><span class="builtintype" id="706584">string</span><span class="op" id="706590">{</span><span class="op" id="706591">}</span><span class="op" id="706592">}</span><span class="op" id="706593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706596">{</span><span class="builtintype" id="706597">string</span><span class="op" id="706603">(</span><span class="op" id="706604">[</span><span class="op" id="706605">]</span><span class="builtintype" id="706606">byte</span><span class="op" id="706610">{</span><span class="string" id="706611">&#39;a&#39;</span><span class="op" id="706614">,</span>&nbsp;<span class="ident" id="706616"><a href="/path/filepath/path_test.go.html#706507">lsep</a></span><span class="op" id="706620">,</span>&nbsp;<span class="string" id="706622">&#39;b&#39;</span><span class="op" id="706625">}</span><span class="op" id="706626">)</span><span class="op" id="706627">,</span>&nbsp;<span class="op" id="706629">[</span><span class="op" id="706630">]</span><span class="builtintype" id="706631">string</span><span class="op" id="706637">{</span><span class="string" id="706638">&#34;a&#34;</span><span class="op" id="706641">,</span>&nbsp;<span class="string" id="706643">&#34;b&#34;</span><span class="op" id="706646">}</span><span class="op" id="706647">}</span><span class="op" id="706648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706651">{</span><span class="builtintype" id="706652">string</span><span class="op" id="706658">(</span><span class="op" id="706659">[</span><span class="op" id="706660">]</span><span class="builtintype" id="706661">byte</span><span class="op" id="706665">{</span><span class="ident" id="706666"><a href="/path/filepath/path_test.go.html#706507">lsep</a></span><span class="op" id="706670">,</span>&nbsp;<span class="string" id="706672">&#39;a&#39;</span><span class="op" id="706675">,</span>&nbsp;<span class="ident" id="706677"><a href="/path/filepath/path_test.go.html#706507">lsep</a></span><span class="op" id="706681">,</span>&nbsp;<span class="string" id="706683">&#39;b&#39;</span><span class="op" id="706686">}</span><span class="op" id="706687">)</span><span class="op" id="706688">,</span>&nbsp;<span class="op" id="706690">[</span><span class="op" id="706691">]</span><span class="builtintype" id="706692">string</span><span class="op" id="706698">{</span><span class="string" id="706699">&#34;&#34;</span><span class="op" id="706701">,</span>&nbsp;<span class="string" id="706703">&#34;a&#34;</span><span class="op" id="706706">,</span>&nbsp;<span class="string" id="706708">&#34;b&#34;</span><span class="op" id="706711">}</span><span class="op" id="706712">}</span><span class="op" id="706713">,</span><br>
<span class="lineno">160</span><span class="op" id="706715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="706718">var</span>&nbsp;<span class="ident" id="706722">winsplitlisttests</span>&nbsp;<span class="op" id="706740">=</span>&nbsp;<span class="op" id="706742">[</span><span class="op" id="706743">]</span><span class="ident" id="706744"><a href="/path/filepath/path_test.go.html#706443">SplitListTest</a></span><span class="op" id="706757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="706760">//&nbsp;quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706771">{</span><span class="string" id="706772">`&#34;a&#34;`</span><span class="op" id="706777">,</span>&nbsp;<span class="op" id="706779">[</span><span class="op" id="706780">]</span><span class="builtintype" id="706781">string</span><span class="op" id="706787">{</span><span class="string" id="706788">`a`</span><span class="op" id="706791">}</span><span class="op" id="706792">}</span><span class="op" id="706793">,</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="706797">//&nbsp;semicolon</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706811">{</span><span class="string" id="706812">`&#34;;&#34;`</span><span class="op" id="706817">,</span>&nbsp;<span class="op" id="706819">[</span><span class="op" id="706820">]</span><span class="builtintype" id="706821">string</span><span class="op" id="706827">{</span><span class="string" id="706828">`;`</span><span class="op" id="706831">}</span><span class="op" id="706832">}</span><span class="op" id="706833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706836">{</span><span class="string" id="706837">`&#34;a;b&#34;`</span><span class="op" id="706844">,</span>&nbsp;<span class="op" id="706846">[</span><span class="op" id="706847">]</span><span class="builtintype" id="706848">string</span><span class="op" id="706854">{</span><span class="string" id="706855">`a;b`</span><span class="op" id="706860">}</span><span class="op" id="706861">}</span><span class="op" id="706862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706865">{</span><span class="string" id="706866">`&#34;;&#34;;`</span><span class="op" id="706872">,</span>&nbsp;<span class="op" id="706874">[</span><span class="op" id="706875">]</span><span class="builtintype" id="706876">string</span><span class="op" id="706882">{</span><span class="string" id="706883">`;`</span><span class="op" id="706886">,</span>&nbsp;<span class="string" id="706888">``</span><span class="op" id="706890">}</span><span class="op" id="706891">}</span><span class="op" id="706892">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706895">{</span><span class="string" id="706896">`;&#34;;&#34;`</span><span class="op" id="706902">,</span>&nbsp;<span class="op" id="706904">[</span><span class="op" id="706905">]</span><span class="builtintype" id="706906">string</span><span class="op" id="706912">{</span><span class="string" id="706913">``</span><span class="op" id="706915">,</span>&nbsp;<span class="string" id="706917">`;`</span><span class="op" id="706920">}</span><span class="op" id="706921">}</span><span class="op" id="706922">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="706926">//&nbsp;partially&nbsp;quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706947">{</span><span class="string" id="706948">`a&#34;;&#34;b`</span><span class="op" id="706955">,</span>&nbsp;<span class="op" id="706957">[</span><span class="op" id="706958">]</span><span class="builtintype" id="706959">string</span><span class="op" id="706965">{</span><span class="string" id="706966">`a;b`</span><span class="op" id="706971">}</span><span class="op" id="706972">}</span><span class="op" id="706973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="706976">{</span><span class="string" id="706977">`a;&nbsp;&#34;&#34;b`</span><span class="op" id="706985">,</span>&nbsp;<span class="op" id="706987">[</span><span class="op" id="706988">]</span><span class="builtintype" id="706989">string</span><span class="op" id="706995">{</span><span class="string" id="706996">`a`</span><span class="op" id="706999">,</span>&nbsp;<span class="string" id="707001">`&nbsp;b`</span><span class="op" id="707005">}</span><span class="op" id="707006">}</span><span class="op" id="707007">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707010">{</span><span class="string" id="707011">`&#34;a;b`</span><span class="op" id="707017">,</span>&nbsp;<span class="op" id="707019">[</span><span class="op" id="707020">]</span><span class="builtintype" id="707021">string</span><span class="op" id="707027">{</span><span class="string" id="707028">`a;b`</span><span class="op" id="707033">}</span><span class="op" id="707034">}</span><span class="op" id="707035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707038">{</span><span class="string" id="707039">`&#34;&#34;a;b`</span><span class="op" id="707046">,</span>&nbsp;<span class="op" id="707048">[</span><span class="op" id="707049">]</span><span class="builtintype" id="707050">string</span><span class="op" id="707056">{</span><span class="string" id="707057">`a`</span><span class="op" id="707060">,</span>&nbsp;<span class="string" id="707062">`b`</span><span class="op" id="707065">}</span><span class="op" id="707066">}</span><span class="op" id="707067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707070">{</span><span class="string" id="707071">`&#34;&#34;&#34;a;b`</span><span class="op" id="707079">,</span>&nbsp;<span class="op" id="707081">[</span><span class="op" id="707082">]</span><span class="builtintype" id="707083">string</span><span class="op" id="707089">{</span><span class="string" id="707090">`a;b`</span><span class="op" id="707095">}</span><span class="op" id="707096">}</span><span class="op" id="707097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707100">{</span><span class="string" id="707101">`&#34;&#34;&#34;&#34;a;b`</span><span class="op" id="707110">,</span>&nbsp;<span class="op" id="707112">[</span><span class="op" id="707113">]</span><span class="builtintype" id="707114">string</span><span class="op" id="707120">{</span><span class="string" id="707121">`a`</span><span class="op" id="707124">,</span>&nbsp;<span class="string" id="707126">`b`</span><span class="op" id="707129">}</span><span class="op" id="707130">}</span><span class="op" id="707131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707134">{</span><span class="string" id="707135">`a&#34;;b`</span><span class="op" id="707141">,</span>&nbsp;<span class="op" id="707143">[</span><span class="op" id="707144">]</span><span class="builtintype" id="707145">string</span><span class="op" id="707151">{</span><span class="string" id="707152">`a;b`</span><span class="op" id="707157">}</span><span class="op" id="707158">}</span><span class="op" id="707159">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707162">{</span><span class="string" id="707163">`a;b&#34;;c`</span><span class="op" id="707171">,</span>&nbsp;<span class="op" id="707173">[</span><span class="op" id="707174">]</span><span class="builtintype" id="707175">string</span><span class="op" id="707181">{</span><span class="string" id="707182">`a`</span><span class="op" id="707185">,</span>&nbsp;<span class="string" id="707187">`b;c`</span><span class="op" id="707192">}</span><span class="op" id="707193">}</span><span class="op" id="707194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707197">{</span><span class="string" id="707198">`&#34;a&#34;;b&#34;;c`</span><span class="op" id="707208">,</span>&nbsp;<span class="op" id="707210">[</span><span class="op" id="707211">]</span><span class="builtintype" id="707212">string</span><span class="op" id="707218">{</span><span class="string" id="707219">`a`</span><span class="op" id="707222">,</span>&nbsp;<span class="string" id="707224">`b;c`</span><span class="op" id="707229">}</span><span class="op" id="707230">}</span><span class="op" id="707231">,</span><br>
<span class="lineno"></span><span class="op" id="707233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="707236">func</span>&nbsp;<span class="ident" id="707241">TestSplitList</span><span class="op" id="707254">(</span><span class="ident" id="707255">t</span>&nbsp;<span class="op" id="707257">*</span><span class="ident" id="707258"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="707265">.</span><span class="ident" id="707266">T</span><span class="op" id="707267">)</span>&nbsp;<span class="op" id="707269">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="707272">tests</span>&nbsp;<span class="op" id="707278">:=</span>&nbsp;<span class="ident" id="707281"><a href="/path/filepath/path_test.go.html#706542">splitlisttests</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="707297">if</span>&nbsp;<span class="ident" id="707300"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="707307">.</span><span class="ident" id="707308">GOOS</span>&nbsp;<span class="op" id="707313">==</span>&nbsp;<span class="string" id="707316">&#34;windows&#34;</span>&nbsp;<span class="op" id="707326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="707330"><a href="/path/filepath/path_test.go.html#707272">tests</a></span>&nbsp;<span class="op" id="707336">=</span>&nbsp;<span class="builtinfunc" id="707338">append</span><span class="op" id="707344">(</span><span class="ident" id="707345"><a href="/path/filepath/path_test.go.html#707272">tests</a></span><span class="op" id="707350">,</span>&nbsp;<span class="ident" id="707352"><a href="/path/filepath/path_test.go.html#706722">winsplitlisttests</a></span><span class="op" id="707369">...</span><span class="op" id="707372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="707378">for</span>&nbsp;<span class="ident" id="707382">_</span><span class="op" id="707383">,</span>&nbsp;<span class="ident" id="707385">test</span>&nbsp;<span class="op" id="707390">:=</span>&nbsp;<span class="keyword" id="707393">range</span>&nbsp;<span class="ident" id="707399"><a href="/path/filepath/path_test.go.html#707272">tests</a></span>&nbsp;<span class="op" id="707405">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="707409">if</span>&nbsp;<span class="ident" id="707412">l</span>&nbsp;<span class="op" id="707414">:=</span>&nbsp;<span class="ident" id="707417"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="707425">.</span><span class="ident" id="707426">SplitList</span><span class="op" id="707435">(</span><span class="ident" id="707436"><a href="/path/filepath/path_test.go.html#707385">test</a></span><span class="op" id="707440">.</span><span class="ident" id="707441">list</span><span class="op" id="707445">)</span><span class="op" id="707446">;</span>&nbsp;<span class="op" id="707448">!</span><span class="ident" id="707449"><a href="/path/filepath/path_test.go.html#703337">reflect</a></span><span class="op" id="707456">.</span><span class="ident" id="707457">DeepEqual</span><span class="op" id="707466">(</span><span class="ident" id="707467"><a href="/path/filepath/path_test.go.html#707412">l</a></span><span class="op" id="707468">,</span>&nbsp;<span class="ident" id="707470"><a href="/path/filepath/path_test.go.html#707385">test</a></span><span class="op" id="707474">.</span><span class="ident" id="707475">result</span><span class="op" id="707481">)</span>&nbsp;<span class="op" id="707483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="707488"><a href="/path/filepath/path_test.go.html#707255">t</a></span><span class="op" id="707489">.</span><span class="ident" id="707490">Errorf</span><span class="op" id="707496">(</span><span class="string" id="707497">&#34;SplitList(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="707529">,</span>&nbsp;<span class="ident" id="707531"><a href="/path/filepath/path_test.go.html#707385">test</a></span><span class="op" id="707535">.</span><span class="ident" id="707536">list</span><span class="op" id="707540">,</span>&nbsp;<span class="ident" id="707542"><a href="/path/filepath/path_test.go.html#707412">l</a></span><span class="op" id="707543">,</span>&nbsp;<span class="ident" id="707545"><a href="/path/filepath/path_test.go.html#707385">test</a></span><span class="op" id="707549">.</span><span class="ident" id="707550">result</span><span class="op" id="707556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707563">}</span><br>
<span class="lineno"></span><span class="op" id="707565">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="707568">type</span>&nbsp;<span class="ident" id="707573">SplitTest</span>&nbsp;<span class="keyword" id="707583">struct</span>&nbsp;<span class="op" id="707590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="707593">path</span><span class="op" id="707597">,</span>&nbsp;<span class="ident" id="707599">dir</span><span class="op" id="707602">,</span>&nbsp;<span class="ident" id="707604">file</span>&nbsp;<span class="builtintype" id="707609">string</span><br>
<span class="lineno"></span><span class="op" id="707616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="707619">var</span>&nbsp;<span class="ident" id="707623">unixsplittests</span>&nbsp;<span class="op" id="707638">=</span>&nbsp;<span class="op" id="707640">[</span><span class="op" id="707641">]</span><span class="ident" id="707642"><a href="/path/filepath/path_test.go.html#707573">SplitTest</a></span><span class="op" id="707651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707654">{</span><span class="string" id="707655">&#34;a/b&#34;</span><span class="op" id="707660">,</span>&nbsp;<span class="string" id="707662">&#34;a/&#34;</span><span class="op" id="707666">,</span>&nbsp;<span class="string" id="707668">&#34;b&#34;</span><span class="op" id="707671">}</span><span class="op" id="707672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707675">{</span><span class="string" id="707676">&#34;a/b/&#34;</span><span class="op" id="707682">,</span>&nbsp;<span class="string" id="707684">&#34;a/b/&#34;</span><span class="op" id="707690">,</span>&nbsp;<span class="string" id="707692">&#34;&#34;</span><span class="op" id="707694">}</span><span class="op" id="707695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707698">{</span><span class="string" id="707699">&#34;a/&#34;</span><span class="op" id="707703">,</span>&nbsp;<span class="string" id="707705">&#34;a/&#34;</span><span class="op" id="707709">,</span>&nbsp;<span class="string" id="707711">&#34;&#34;</span><span class="op" id="707713">}</span><span class="op" id="707714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707717">{</span><span class="string" id="707718">&#34;a&#34;</span><span class="op" id="707721">,</span>&nbsp;<span class="string" id="707723">&#34;&#34;</span><span class="op" id="707725">,</span>&nbsp;<span class="string" id="707727">&#34;a&#34;</span><span class="op" id="707730">}</span><span class="op" id="707731">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707734">{</span><span class="string" id="707735">&#34;/&#34;</span><span class="op" id="707738">,</span>&nbsp;<span class="string" id="707740">&#34;/&#34;</span><span class="op" id="707743">,</span>&nbsp;<span class="string" id="707745">&#34;&#34;</span><span class="op" id="707747">}</span><span class="op" id="707748">,</span><br>
<span class="lineno"></span><span class="op" id="707750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="707753">var</span>&nbsp;<span class="ident" id="707757">winsplittests</span>&nbsp;<span class="op" id="707771">=</span>&nbsp;<span class="op" id="707773">[</span><span class="op" id="707774">]</span><span class="ident" id="707775"><a href="/path/filepath/path_test.go.html#707573">SplitTest</a></span><span class="op" id="707784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707787">{</span><span class="string" id="707788">`c:`</span><span class="op" id="707792">,</span>&nbsp;<span class="string" id="707794">`c:`</span><span class="op" id="707798">,</span>&nbsp;<span class="string" id="707800">``</span><span class="op" id="707802">}</span><span class="op" id="707803">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707806">{</span><span class="string" id="707807">`c:/`</span><span class="op" id="707812">,</span>&nbsp;<span class="string" id="707814">`c:/`</span><span class="op" id="707819">,</span>&nbsp;<span class="string" id="707821">``</span><span class="op" id="707823">}</span><span class="op" id="707824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707827">{</span><span class="string" id="707828">`c:/foo`</span><span class="op" id="707836">,</span>&nbsp;<span class="string" id="707838">`c:/`</span><span class="op" id="707843">,</span>&nbsp;<span class="string" id="707845">`foo`</span><span class="op" id="707850">}</span><span class="op" id="707851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707854">{</span><span class="string" id="707855">`c:/foo/bar`</span><span class="op" id="707867">,</span>&nbsp;<span class="string" id="707869">`c:/foo/`</span><span class="op" id="707878">,</span>&nbsp;<span class="string" id="707880">`bar`</span><span class="op" id="707885">}</span><span class="op" id="707886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707889">{</span><span class="string" id="707890">`//host/share`</span><span class="op" id="707904">,</span>&nbsp;<span class="string" id="707906">`//host/share`</span><span class="op" id="707920">,</span>&nbsp;<span class="string" id="707922">``</span><span class="op" id="707924">}</span><span class="op" id="707925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707928">{</span><span class="string" id="707929">`//host/share/`</span><span class="op" id="707944">,</span>&nbsp;<span class="string" id="707946">`//host/share/`</span><span class="op" id="707961">,</span>&nbsp;<span class="string" id="707963">``</span><span class="op" id="707965">}</span><span class="op" id="707966">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="707969">{</span><span class="string" id="707970">`//host/share/foo`</span><span class="op" id="707988">,</span>&nbsp;<span class="string" id="707990">`//host/share/`</span><span class="op" id="708005">,</span>&nbsp;<span class="string" id="708007">`foo`</span><span class="op" id="708012">}</span><span class="op" id="708013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708016">{</span><span class="string" id="708017">`\\host\share`</span><span class="op" id="708031">,</span>&nbsp;<span class="string" id="708033">`\\host\share`</span><span class="op" id="708047">,</span>&nbsp;<span class="string" id="708049">``</span><span class="op" id="708051">}</span><span class="op" id="708052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708055">{</span><span class="string" id="708056">`\\host\share\`</span><span class="op" id="708071">,</span>&nbsp;<span class="string" id="708073">`\\host\share\`</span><span class="op" id="708088">,</span>&nbsp;<span class="string" id="708090">``</span><span class="op" id="708092">}</span><span class="op" id="708093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708096">{</span><span class="string" id="708097">`\\host\share\foo`</span><span class="op" id="708115">,</span>&nbsp;<span class="string" id="708117">`\\host\share\`</span><span class="op" id="708132">,</span>&nbsp;<span class="string" id="708134">`foo`</span><span class="op" id="708139">}</span><span class="op" id="708140">,</span><br>
<span class="lineno"></span><span class="op" id="708142">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="708145">func</span>&nbsp;<span class="ident" id="708150">TestSplit</span><span class="op" id="708159">(</span><span class="ident" id="708160">t</span>&nbsp;<span class="op" id="708162">*</span><span class="ident" id="708163"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="708170">.</span><span class="ident" id="708171">T</span><span class="op" id="708172">)</span>&nbsp;<span class="op" id="708174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="708177">var</span>&nbsp;<span class="ident" id="708181">splittests</span>&nbsp;<span class="op" id="708192">[</span><span class="op" id="708193">]</span><span class="ident" id="708194"><a href="/path/filepath/path_test.go.html#707573">SplitTest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="708205"><a href="/path/filepath/path_test.go.html#708181">splittests</a></span>&nbsp;<span class="op" id="708216">=</span>&nbsp;<span class="ident" id="708218"><a href="/path/filepath/path_test.go.html#707623">unixsplittests</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="708234">if</span>&nbsp;<span class="ident" id="708237"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="708244">.</span><span class="ident" id="708245">GOOS</span>&nbsp;<span class="op" id="708250">==</span>&nbsp;<span class="string" id="708253">&#34;windows&#34;</span>&nbsp;<span class="op" id="708263">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="708267"><a href="/path/filepath/path_test.go.html#708181">splittests</a></span>&nbsp;<span class="op" id="708278">=</span>&nbsp;<span class="builtinfunc" id="708280">append</span><span class="op" id="708286">(</span><span class="ident" id="708287"><a href="/path/filepath/path_test.go.html#708181">splittests</a></span><span class="op" id="708297">,</span>&nbsp;<span class="ident" id="708299"><a href="/path/filepath/path_test.go.html#707757">winsplittests</a></span><span class="op" id="708312">...</span><span class="op" id="708315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="708321">for</span>&nbsp;<span class="ident" id="708325">_</span><span class="op" id="708326">,</span>&nbsp;<span class="ident" id="708328">test</span>&nbsp;<span class="op" id="708333">:=</span>&nbsp;<span class="keyword" id="708336">range</span>&nbsp;<span class="ident" id="708342"><a href="/path/filepath/path_test.go.html#708181">splittests</a></span>&nbsp;<span class="op" id="708353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="708357">if</span>&nbsp;<span class="ident" id="708360">d</span><span class="op" id="708361">,</span>&nbsp;<span class="ident" id="708363">f</span>&nbsp;<span class="op" id="708365">:=</span>&nbsp;<span class="ident" id="708368"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="708376">.</span><span class="ident" id="708377">Split</span><span class="op" id="708382">(</span><span class="ident" id="708383"><a href="/path/filepath/path_test.go.html#708328">test</a></span><span class="op" id="708387">.</span><span class="ident" id="708388">path</span><span class="op" id="708392">)</span><span class="op" id="708393">;</span>&nbsp;<span class="ident" id="708395"><a href="/path/filepath/path_test.go.html#708360">d</a></span>&nbsp;<span class="op" id="708397">!=</span>&nbsp;<span class="ident" id="708400"><a href="/path/filepath/path_test.go.html#708328">test</a></span><span class="op" id="708404">.</span><span class="ident" id="708405">dir</span>&nbsp;<span class="op" id="708409">||</span>&nbsp;<span class="ident" id="708412"><a href="/path/filepath/path_test.go.html#708363">f</a></span>&nbsp;<span class="op" id="708414">!=</span>&nbsp;<span class="ident" id="708417"><a href="/path/filepath/path_test.go.html#708328">test</a></span><span class="op" id="708421">.</span><span class="ident" id="708422">file</span>&nbsp;<span class="op" id="708427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="708432"><a href="/path/filepath/path_test.go.html#708160">t</a></span><span class="op" id="708433">.</span><span class="ident" id="708434">Errorf</span><span class="op" id="708440">(</span><span class="string" id="708441">&#34;Split(%q)&nbsp;=&nbsp;%q,&nbsp;%q,&nbsp;want&nbsp;%q,&nbsp;%q&#34;</span><span class="op" id="708474">,</span>&nbsp;<span class="ident" id="708476"><a href="/path/filepath/path_test.go.html#708328">test</a></span><span class="op" id="708480">.</span><span class="ident" id="708481">path</span><span class="op" id="708485">,</span>&nbsp;<span class="ident" id="708487"><a href="/path/filepath/path_test.go.html#708360">d</a></span><span class="op" id="708488">,</span>&nbsp;<span class="ident" id="708490"><a href="/path/filepath/path_test.go.html#708363">f</a></span><span class="op" id="708491">,</span>&nbsp;<span class="ident" id="708493"><a href="/path/filepath/path_test.go.html#708328">test</a></span><span class="op" id="708497">.</span><span class="ident" id="708498">dir</span><span class="op" id="708501">,</span>&nbsp;<span class="ident" id="708503"><a href="/path/filepath/path_test.go.html#708328">test</a></span><span class="op" id="708507">.</span><span class="ident" id="708508">file</span><span class="op" id="708512">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708519">}</span><br>
<span class="lineno"></span><span class="op" id="708521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="708524">type</span>&nbsp;<span class="ident" id="708529">JoinTest</span>&nbsp;<span class="keyword" id="708538">struct</span>&nbsp;<span class="op" id="708545">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="708548">elem</span>&nbsp;<span class="op" id="708553">[</span><span class="op" id="708554">]</span><span class="builtintype" id="708555">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="708563">path</span>&nbsp;<span class="builtintype" id="708568">string</span><br>
<span class="lineno"></span><span class="op" id="708575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="708578">var</span>&nbsp;<span class="ident" id="708582">jointests</span>&nbsp;<span class="op" id="708592">=</span>&nbsp;<span class="op" id="708594">[</span><span class="op" id="708595">]</span><span class="ident" id="708596"><a href="/path/filepath/path_test.go.html#708529">JoinTest</a></span><span class="op" id="708604">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="708607">//&nbsp;zero&nbsp;parameters</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708627">{</span><span class="op" id="708628">[</span><span class="op" id="708629">]</span><span class="builtintype" id="708630">string</span><span class="op" id="708636">{</span><span class="op" id="708637">}</span><span class="op" id="708638">,</span>&nbsp;<span class="string" id="708640">&#34;&#34;</span><span class="op" id="708642">}</span><span class="op" id="708643">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="708647">//&nbsp;one&nbsp;parameter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708665">{</span><span class="op" id="708666">[</span><span class="op" id="708667">]</span><span class="builtintype" id="708668">string</span><span class="op" id="708674">{</span><span class="string" id="708675">&#34;&#34;</span><span class="op" id="708677">}</span><span class="op" id="708678">,</span>&nbsp;<span class="string" id="708680">&#34;&#34;</span><span class="op" id="708682">}</span><span class="op" id="708683">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708686">{</span><span class="op" id="708687">[</span><span class="op" id="708688">]</span><span class="builtintype" id="708689">string</span><span class="op" id="708695">{</span><span class="string" id="708696">&#34;a&#34;</span><span class="op" id="708699">}</span><span class="op" id="708700">,</span>&nbsp;<span class="string" id="708702">&#34;a&#34;</span><span class="op" id="708705">}</span><span class="op" id="708706">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="708710">//&nbsp;two&nbsp;parameters</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708729">{</span><span class="op" id="708730">[</span><span class="op" id="708731">]</span><span class="builtintype" id="708732">string</span><span class="op" id="708738">{</span><span class="string" id="708739">&#34;a&#34;</span><span class="op" id="708742">,</span>&nbsp;<span class="string" id="708744">&#34;b&#34;</span><span class="op" id="708747">}</span><span class="op" id="708748">,</span>&nbsp;<span class="string" id="708750">&#34;a/b&#34;</span><span class="op" id="708755">}</span><span class="op" id="708756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708759">{</span><span class="op" id="708760">[</span><span class="op" id="708761">]</span><span class="builtintype" id="708762">string</span><span class="op" id="708768">{</span><span class="string" id="708769">&#34;a&#34;</span><span class="op" id="708772">,</span>&nbsp;<span class="string" id="708774">&#34;&#34;</span><span class="op" id="708776">}</span><span class="op" id="708777">,</span>&nbsp;<span class="string" id="708779">&#34;a&#34;</span><span class="op" id="708782">}</span><span class="op" id="708783">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708786">{</span><span class="op" id="708787">[</span><span class="op" id="708788">]</span><span class="builtintype" id="708789">string</span><span class="op" id="708795">{</span><span class="string" id="708796">&#34;&#34;</span><span class="op" id="708798">,</span>&nbsp;<span class="string" id="708800">&#34;b&#34;</span><span class="op" id="708803">}</span><span class="op" id="708804">,</span>&nbsp;<span class="string" id="708806">&#34;b&#34;</span><span class="op" id="708809">}</span><span class="op" id="708810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708813">{</span><span class="op" id="708814">[</span><span class="op" id="708815">]</span><span class="builtintype" id="708816">string</span><span class="op" id="708822">{</span><span class="string" id="708823">&#34;/&#34;</span><span class="op" id="708826">,</span>&nbsp;<span class="string" id="708828">&#34;a&#34;</span><span class="op" id="708831">}</span><span class="op" id="708832">,</span>&nbsp;<span class="string" id="708834">&#34;/a&#34;</span><span class="op" id="708838">}</span><span class="op" id="708839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708842">{</span><span class="op" id="708843">[</span><span class="op" id="708844">]</span><span class="builtintype" id="708845">string</span><span class="op" id="708851">{</span><span class="string" id="708852">&#34;/&#34;</span><span class="op" id="708855">,</span>&nbsp;<span class="string" id="708857">&#34;&#34;</span><span class="op" id="708859">}</span><span class="op" id="708860">,</span>&nbsp;<span class="string" id="708862">&#34;/&#34;</span><span class="op" id="708865">}</span><span class="op" id="708866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708869">{</span><span class="op" id="708870">[</span><span class="op" id="708871">]</span><span class="builtintype" id="708872">string</span><span class="op" id="708878">{</span><span class="string" id="708879">&#34;a/&#34;</span><span class="op" id="708883">,</span>&nbsp;<span class="string" id="708885">&#34;b&#34;</span><span class="op" id="708888">}</span><span class="op" id="708889">,</span>&nbsp;<span class="string" id="708891">&#34;a/b&#34;</span><span class="op" id="708896">}</span><span class="op" id="708897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708900">{</span><span class="op" id="708901">[</span><span class="op" id="708902">]</span><span class="builtintype" id="708903">string</span><span class="op" id="708909">{</span><span class="string" id="708910">&#34;a/&#34;</span><span class="op" id="708914">,</span>&nbsp;<span class="string" id="708916">&#34;&#34;</span><span class="op" id="708918">}</span><span class="op" id="708919">,</span>&nbsp;<span class="string" id="708921">&#34;a&#34;</span><span class="op" id="708924">}</span><span class="op" id="708925">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708928">{</span><span class="op" id="708929">[</span><span class="op" id="708930">]</span><span class="builtintype" id="708931">string</span><span class="op" id="708937">{</span><span class="string" id="708938">&#34;&#34;</span><span class="op" id="708940">,</span>&nbsp;<span class="string" id="708942">&#34;&#34;</span><span class="op" id="708944">}</span><span class="op" id="708945">,</span>&nbsp;<span class="string" id="708947">&#34;&#34;</span><span class="op" id="708949">}</span><span class="op" id="708950">,</span><br>
<span class="lineno"></span><span class="op" id="708952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="708955">var</span>&nbsp;<span class="ident" id="708959">winjointests</span>&nbsp;<span class="op" id="708972">=</span>&nbsp;<span class="op" id="708974">[</span><span class="op" id="708975">]</span><span class="ident" id="708976"><a href="/path/filepath/path_test.go.html#708529">JoinTest</a></span><span class="op" id="708984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="708987">{</span><span class="op" id="708988">[</span><span class="op" id="708989">]</span><span class="builtintype" id="708990">string</span><span class="op" id="708996">{</span><span class="string" id="708997">`directory`</span><span class="op" id="709008">,</span>&nbsp;<span class="string" id="709010">`file`</span><span class="op" id="709016">}</span><span class="op" id="709017">,</span>&nbsp;<span class="string" id="709019">`directory\file`</span><span class="op" id="709035">}</span><span class="op" id="709036">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709039">{</span><span class="op" id="709040">[</span><span class="op" id="709041">]</span><span class="builtintype" id="709042">string</span><span class="op" id="709048">{</span><span class="string" id="709049">`C:\Windows\`</span><span class="op" id="709062">,</span>&nbsp;<span class="string" id="709064">`System32`</span><span class="op" id="709074">}</span><span class="op" id="709075">,</span>&nbsp;<span class="string" id="709077">`C:\Windows\System32`</span><span class="op" id="709098">}</span><span class="op" id="709099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709102">{</span><span class="op" id="709103">[</span><span class="op" id="709104">]</span><span class="builtintype" id="709105">string</span><span class="op" id="709111">{</span><span class="string" id="709112">`C:\Windows\`</span><span class="op" id="709125">,</span>&nbsp;<span class="string" id="709127">``</span><span class="op" id="709129">}</span><span class="op" id="709130">,</span>&nbsp;<span class="string" id="709132">`C:\Windows`</span><span class="op" id="709144">}</span><span class="op" id="709145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709148">{</span><span class="op" id="709149">[</span><span class="op" id="709150">]</span><span class="builtintype" id="709151">string</span><span class="op" id="709157">{</span><span class="string" id="709158">`C:\`</span><span class="op" id="709163">,</span>&nbsp;<span class="string" id="709165">`Windows`</span><span class="op" id="709174">}</span><span class="op" id="709175">,</span>&nbsp;<span class="string" id="709177">`C:\Windows`</span><span class="op" id="709189">}</span><span class="op" id="709190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709193">{</span><span class="op" id="709194">[</span><span class="op" id="709195">]</span><span class="builtintype" id="709196">string</span><span class="op" id="709202">{</span><span class="string" id="709203">`C:`</span><span class="op" id="709207">,</span>&nbsp;<span class="string" id="709209">`Windows`</span><span class="op" id="709218">}</span><span class="op" id="709219">,</span>&nbsp;<span class="string" id="709221">`C:\Windows`</span><span class="op" id="709233">}</span><span class="op" id="709234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709237">{</span><span class="op" id="709238">[</span><span class="op" id="709239">]</span><span class="builtintype" id="709240">string</span><span class="op" id="709246">{</span><span class="string" id="709247">`\\host\share`</span><span class="op" id="709261">,</span>&nbsp;<span class="string" id="709263">`foo`</span><span class="op" id="709268">}</span><span class="op" id="709269">,</span>&nbsp;<span class="string" id="709271">`\\host\share\foo`</span><span class="op" id="709289">}</span><span class="op" id="709290">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709293">{</span><span class="op" id="709294">[</span><span class="op" id="709295">]</span><span class="builtintype" id="709296">string</span><span class="op" id="709302">{</span><span class="string" id="709303">`//host/share`</span><span class="op" id="709317">,</span>&nbsp;<span class="string" id="709319">`foo/bar`</span><span class="op" id="709328">}</span><span class="op" id="709329">,</span>&nbsp;<span class="string" id="709331">`\\host\share\foo\bar`</span><span class="op" id="709353">}</span><span class="op" id="709354">,</span><br>
<span class="lineno"></span><span class="op" id="709356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="709359">//&nbsp;join&nbsp;takes&nbsp;a&nbsp;[]string&nbsp;and&nbsp;passes&nbsp;it&nbsp;to&nbsp;Join.</span><br>
<span class="lineno"></span><span class="keyword" id="709407">func</span>&nbsp;<span class="ident" id="709412">join</span><span class="op" id="709416">(</span><span class="ident" id="709417">elem</span>&nbsp;<span class="op" id="709422">[</span><span class="op" id="709423">]</span><span class="builtintype" id="709424">string</span><span class="op" id="709430">,</span>&nbsp;<span class="ident" id="709432">args</span>&nbsp;<span class="op" id="709437">...</span><span class="builtintype" id="709440">string</span><span class="op" id="709446">)</span>&nbsp;<span class="builtintype" id="709448">string</span>&nbsp;<span class="op" id="709455">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="709458"><a href="/path/filepath/path_test.go.html#709432">args</a></span>&nbsp;<span class="op" id="709463">=</span>&nbsp;<span class="ident" id="709465"><a href="/path/filepath/path_test.go.html#709417">elem</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="709471">return</span>&nbsp;<span class="ident" id="709478"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="709486">.</span><span class="ident" id="709487">Join</span><span class="op" id="709491">(</span><span class="ident" id="709492"><a href="/path/filepath/path_test.go.html#709432">args</a></span><span class="op" id="709496">...</span><span class="op" id="709499">)</span><br>
<span class="lineno"></span><span class="op" id="709501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="709504">func</span>&nbsp;<span class="ident" id="709509">TestJoin</span><span class="op" id="709517">(</span><span class="ident" id="709518">t</span>&nbsp;<span class="op" id="709520">*</span><span class="ident" id="709521"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="709528">.</span><span class="ident" id="709529">T</span><span class="op" id="709530">)</span>&nbsp;<span class="op" id="709532">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="709535">if</span>&nbsp;<span class="ident" id="709538"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="709545">.</span><span class="ident" id="709546">GOOS</span>&nbsp;<span class="op" id="709551">==</span>&nbsp;<span class="string" id="709554">&#34;windows&#34;</span>&nbsp;<span class="op" id="709564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="709568"><a href="/path/filepath/path_test.go.html#708582">jointests</a></span>&nbsp;<span class="op" id="709578">=</span>&nbsp;<span class="builtinfunc" id="709580">append</span><span class="op" id="709586">(</span><span class="ident" id="709587"><a href="/path/filepath/path_test.go.html#708582">jointests</a></span><span class="op" id="709596">,</span>&nbsp;<span class="ident" id="709598"><a href="/path/filepath/path_test.go.html#708959">winjointests</a></span><span class="op" id="709610">...</span><span class="op" id="709613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="709619">for</span>&nbsp;<span class="ident" id="709623">_</span><span class="op" id="709624">,</span>&nbsp;<span class="ident" id="709626">test</span>&nbsp;<span class="op" id="709631">:=</span>&nbsp;<span class="keyword" id="709634">range</span>&nbsp;<span class="ident" id="709640"><a href="/path/filepath/path_test.go.html#708582">jointests</a></span>&nbsp;<span class="op" id="709650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="709654">if</span>&nbsp;<span class="ident" id="709657">p</span>&nbsp;<span class="op" id="709659">:=</span>&nbsp;<span class="ident" id="709662"><a href="/path/filepath/path_test.go.html#709412">join</a></span><span class="op" id="709666">(</span><span class="ident" id="709667"><a href="/path/filepath/path_test.go.html#709626">test</a></span><span class="op" id="709671">.</span><span class="ident" id="709672">elem</span><span class="op" id="709676">)</span><span class="op" id="709677">;</span>&nbsp;<span class="ident" id="709679"><a href="/path/filepath/path_test.go.html#709657">p</a></span>&nbsp;<span class="op" id="709681">!=</span>&nbsp;<span class="ident" id="709684"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="709692">.</span><span class="ident" id="709693">FromSlash</span><span class="op" id="709702">(</span><span class="ident" id="709703"><a href="/path/filepath/path_test.go.html#709626">test</a></span><span class="op" id="709707">.</span><span class="ident" id="709708">path</span><span class="op" id="709712">)</span>&nbsp;<span class="op" id="709714">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="709719"><a href="/path/filepath/path_test.go.html#709518">t</a></span><span class="op" id="709720">.</span><span class="ident" id="709721">Errorf</span><span class="op" id="709727">(</span><span class="string" id="709728">&#34;join(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="709752">,</span>&nbsp;<span class="ident" id="709754"><a href="/path/filepath/path_test.go.html#709626">test</a></span><span class="op" id="709758">.</span><span class="ident" id="709759">elem</span><span class="op" id="709763">,</span>&nbsp;<span class="ident" id="709765"><a href="/path/filepath/path_test.go.html#709657">p</a></span><span class="op" id="709766">,</span>&nbsp;<span class="ident" id="709768"><a href="/path/filepath/path_test.go.html#709626">test</a></span><span class="op" id="709772">.</span><span class="ident" id="709773">path</span><span class="op" id="709777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709784">}</span><br>
<span class="lineno"></span><span class="op" id="709786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="709789">type</span>&nbsp;<span class="ident" id="709794">ExtTest</span>&nbsp;<span class="keyword" id="709802">struct</span>&nbsp;<span class="op" id="709809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="709812">path</span><span class="op" id="709816">,</span>&nbsp;<span class="ident" id="709818">ext</span>&nbsp;<span class="builtintype" id="709822">string</span><br>
<span class="lineno"></span><span class="op" id="709829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="709832">var</span>&nbsp;<span class="ident" id="709836">exttests</span>&nbsp;<span class="op" id="709845">=</span>&nbsp;<span class="op" id="709847">[</span><span class="op" id="709848">]</span><span class="ident" id="709849"><a href="/path/filepath/path_test.go.html#709794">ExtTest</a></span><span class="op" id="709856">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709859">{</span><span class="string" id="709860">&#34;path.go&#34;</span><span class="op" id="709869">,</span>&nbsp;<span class="string" id="709871">&#34;.go&#34;</span><span class="op" id="709876">}</span><span class="op" id="709877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709880">{</span><span class="string" id="709881">&#34;path.pb.go&#34;</span><span class="op" id="709893">,</span>&nbsp;<span class="string" id="709895">&#34;.go&#34;</span><span class="op" id="709900">}</span><span class="op" id="709901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709904">{</span><span class="string" id="709905">&#34;a.dir/b&#34;</span><span class="op" id="709914">,</span>&nbsp;<span class="string" id="709916">&#34;&#34;</span><span class="op" id="709918">}</span><span class="op" id="709919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709922">{</span><span class="string" id="709923">&#34;a.dir/b.go&#34;</span><span class="op" id="709935">,</span>&nbsp;<span class="string" id="709937">&#34;.go&#34;</span><span class="op" id="709942">}</span><span class="op" id="709943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="709946">{</span><span class="string" id="709947">&#34;a.dir/&#34;</span><span class="op" id="709955">,</span>&nbsp;<span class="string" id="709957">&#34;&#34;</span><span class="op" id="709959">}</span><span class="op" id="709960">,</span><br>
<span class="lineno">295</span><span class="op" id="709962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="709965">func</span>&nbsp;<span class="ident" id="709970">TestExt</span><span class="op" id="709977">(</span><span class="ident" id="709978">t</span>&nbsp;<span class="op" id="709980">*</span><span class="ident" id="709981"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="709988">.</span><span class="ident" id="709989">T</span><span class="op" id="709990">)</span>&nbsp;<span class="op" id="709992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="709995">for</span>&nbsp;<span class="ident" id="709999">_</span><span class="op" id="710000">,</span>&nbsp;<span class="ident" id="710002">test</span>&nbsp;<span class="op" id="710007">:=</span>&nbsp;<span class="keyword" id="710010">range</span>&nbsp;<span class="ident" id="710016"><a href="/path/filepath/path_test.go.html#709836">exttests</a></span>&nbsp;<span class="op" id="710025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="710029">if</span>&nbsp;<span class="ident" id="710032">x</span>&nbsp;<span class="op" id="710034">:=</span>&nbsp;<span class="ident" id="710037"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="710045">.</span><span class="ident" id="710046">Ext</span><span class="op" id="710049">(</span><span class="ident" id="710050"><a href="/path/filepath/path_test.go.html#710002">test</a></span><span class="op" id="710054">.</span><span class="ident" id="710055">path</span><span class="op" id="710059">)</span><span class="op" id="710060">;</span>&nbsp;<span class="ident" id="710062"><a href="/path/filepath/path_test.go.html#710032">x</a></span>&nbsp;<span class="op" id="710064">!=</span>&nbsp;<span class="ident" id="710067"><a href="/path/filepath/path_test.go.html#710002">test</a></span><span class="op" id="710071">.</span><span class="ident" id="710072">ext</span>&nbsp;<span class="op" id="710076">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="710081"><a href="/path/filepath/path_test.go.html#709978">t</a></span><span class="op" id="710082">.</span><span class="ident" id="710083">Errorf</span><span class="op" id="710089">(</span><span class="string" id="710090">&#34;Ext(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="710113">,</span>&nbsp;<span class="ident" id="710115"><a href="/path/filepath/path_test.go.html#710002">test</a></span><span class="op" id="710119">.</span><span class="ident" id="710120">path</span><span class="op" id="710124">,</span>&nbsp;<span class="ident" id="710126"><a href="/path/filepath/path_test.go.html#710032">x</a></span><span class="op" id="710127">,</span>&nbsp;<span class="ident" id="710129"><a href="/path/filepath/path_test.go.html#710002">test</a></span><span class="op" id="710133">.</span><span class="ident" id="710134">ext</span><span class="op" id="710137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710144">}</span><br>
<span class="lineno"></span><span class="op" id="710146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span><span class="keyword" id="710149">type</span>&nbsp;<span class="ident" id="710154">Node</span>&nbsp;<span class="keyword" id="710159">struct</span>&nbsp;<span class="op" id="710166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="710169">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="710177">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="710185">entries</span>&nbsp;<span class="op" id="710193">[</span><span class="op" id="710194">]</span><span class="op" id="710195">*</span><span class="ident" id="710196"><a href="/path/filepath/path_test.go.html#710154">Node</a></span>&nbsp;<span class="comment" id="710201">//&nbsp;nil&nbsp;if&nbsp;the&nbsp;entry&nbsp;is&nbsp;a&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="710232">mark</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="710240">int</span><br>
<span class="lineno"></span><span class="op" id="710244">}</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span><span class="keyword" id="710247">var</span>&nbsp;<span class="ident" id="710251">tree</span>&nbsp;<span class="op" id="710256">=</span>&nbsp;<span class="op" id="710258">&amp;</span><span class="ident" id="710259"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="710263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="710266">&#34;testdata&#34;</span><span class="op" id="710276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710279">[</span><span class="op" id="710280">]</span><span class="op" id="710281">*</span><span class="ident" id="710282"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="710286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710290">{</span><span class="string" id="710291">&#34;a&#34;</span><span class="op" id="710294">,</span>&nbsp;<span class="ident" id="710296">nil</span><span class="op" id="710299">,</span>&nbsp;<span class="num" id="710301">0</span><span class="op" id="710302">}</span><span class="op" id="710303">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710307">{</span><span class="string" id="710308">&#34;b&#34;</span><span class="op" id="710311">,</span>&nbsp;<span class="op" id="710313">[</span><span class="op" id="710314">]</span><span class="op" id="710315">*</span><span class="ident" id="710316"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="710320">{</span><span class="op" id="710321">}</span><span class="op" id="710322">,</span>&nbsp;<span class="num" id="710324">0</span><span class="op" id="710325">}</span><span class="op" id="710326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710330">{</span><span class="string" id="710331">&#34;c&#34;</span><span class="op" id="710334">,</span>&nbsp;<span class="ident" id="710336">nil</span><span class="op" id="710339">,</span>&nbsp;<span class="num" id="710341">0</span><span class="op" id="710342">}</span><span class="op" id="710343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="710352">&#34;d&#34;</span><span class="op" id="710355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710360">[</span><span class="op" id="710361">]</span><span class="op" id="710362">*</span><span class="ident" id="710363"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="710367">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710373">{</span><span class="string" id="710374">&#34;x&#34;</span><span class="op" id="710377">,</span>&nbsp;<span class="ident" id="710379">nil</span><span class="op" id="710382">,</span>&nbsp;<span class="num" id="710384">0</span><span class="op" id="710385">}</span><span class="op" id="710386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710392">{</span><span class="string" id="710393">&#34;y&#34;</span><span class="op" id="710396">,</span>&nbsp;<span class="op" id="710398">[</span><span class="op" id="710399">]</span><span class="op" id="710400">*</span><span class="ident" id="710401"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="710405">{</span><span class="op" id="710406">}</span><span class="op" id="710407">,</span>&nbsp;<span class="num" id="710409">0</span><span class="op" id="710410">}</span><span class="op" id="710411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="710424">&#34;z&#34;</span><span class="op" id="710427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710434">[</span><span class="op" id="710435">]</span><span class="op" id="710436">*</span><span class="ident" id="710437"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="710441">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710449">{</span><span class="string" id="710450">&#34;u&#34;</span><span class="op" id="710453">,</span>&nbsp;<span class="ident" id="710455">nil</span><span class="op" id="710458">,</span>&nbsp;<span class="num" id="710460">0</span><span class="op" id="710461">}</span><span class="op" id="710462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710470">{</span><span class="string" id="710471">&#34;v&#34;</span><span class="op" id="710474">,</span>&nbsp;<span class="ident" id="710476">nil</span><span class="op" id="710479">,</span>&nbsp;<span class="num" id="710481">0</span><span class="op" id="710482">}</span><span class="op" id="710483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710490">}</span><span class="op" id="710491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="710498">0</span><span class="op" id="710499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710505">}</span><span class="op" id="710506">,</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710511">}</span><span class="op" id="710512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="710517">0</span><span class="op" id="710518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710522">}</span><span class="op" id="710523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710526">}</span><span class="op" id="710527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="710530">0</span><span class="op" id="710531">,</span><br>
<span class="lineno">335</span><span class="op" id="710533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="710536">func</span>&nbsp;<span class="ident" id="710541">walkTree</span><span class="op" id="710549">(</span><span class="ident" id="710550">n</span>&nbsp;<span class="op" id="710552">*</span><span class="ident" id="710553"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="710557">,</span>&nbsp;<span class="ident" id="710559">path</span>&nbsp;<span class="builtintype" id="710564">string</span><span class="op" id="710570">,</span>&nbsp;<span class="ident" id="710572">f</span>&nbsp;<span class="keyword" id="710574">func</span><span class="op" id="710578">(</span><span class="ident" id="710579">path</span>&nbsp;<span class="builtintype" id="710584">string</span><span class="op" id="710590">,</span>&nbsp;<span class="ident" id="710592">n</span>&nbsp;<span class="op" id="710594">*</span><span class="ident" id="710595"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="710599">)</span><span class="op" id="710600">)</span>&nbsp;<span class="op" id="710602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="710605"><a href="/path/filepath/path_test.go.html#710572">f</a></span><span class="op" id="710606">(</span><span class="ident" id="710607"><a href="/path/filepath/path_test.go.html#710559">path</a></span><span class="op" id="710611">,</span>&nbsp;<span class="ident" id="710613"><a href="/path/filepath/path_test.go.html#710550">n</a></span><span class="op" id="710614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="710617">for</span>&nbsp;<span class="ident" id="710621">_</span><span class="op" id="710622">,</span>&nbsp;<span class="ident" id="710624">e</span>&nbsp;<span class="op" id="710626">:=</span>&nbsp;<span class="keyword" id="710629">range</span>&nbsp;<span class="ident" id="710635"><a href="/path/filepath/path_test.go.html#710550">n</a></span><span class="op" id="710636">.</span><span class="ident" id="710637">entries</span>&nbsp;<span class="op" id="710645">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="710649"><a href="/path/filepath/path_test.go.html#710541">walkTree</a></span><span class="op" id="710657">(</span><span class="ident" id="710658"><a href="/path/filepath/path_test.go.html#710624">e</a></span><span class="op" id="710659">,</span>&nbsp;<span class="ident" id="710661"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="710669">.</span><span class="ident" id="710670">Join</span><span class="op" id="710674">(</span><span class="ident" id="710675"><a href="/path/filepath/path_test.go.html#710559">path</a></span><span class="op" id="710679">,</span>&nbsp;<span class="ident" id="710681"><a href="/path/filepath/path_test.go.html#710624">e</a></span><span class="op" id="710682">.</span><span class="ident" id="710683">name</span><span class="op" id="710687">)</span><span class="op" id="710688">,</span>&nbsp;<span class="ident" id="710690"><a href="/path/filepath/path_test.go.html#710572">f</a></span><span class="op" id="710691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710694">}</span><br>
<span class="lineno"></span><span class="op" id="710696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="710699">func</span>&nbsp;<span class="ident" id="710704">makeTree</span><span class="op" id="710712">(</span><span class="ident" id="710713">t</span>&nbsp;<span class="op" id="710715">*</span><span class="ident" id="710716"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="710723">.</span><span class="ident" id="710724">T</span><span class="op" id="710725">)</span>&nbsp;<span class="op" id="710727">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="710730"><a href="/path/filepath/path_test.go.html#710541">walkTree</a></span><span class="op" id="710738">(</span><span class="ident" id="710739"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="710743">,</span>&nbsp;<span class="ident" id="710745"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="710749">.</span><span class="ident" id="710750">name</span><span class="op" id="710754">,</span>&nbsp;<span class="keyword" id="710756">func</span><span class="op" id="710760">(</span><span class="ident" id="710761">path</span>&nbsp;<span class="builtintype" id="710766">string</span><span class="op" id="710772">,</span>&nbsp;<span class="ident" id="710774">n</span>&nbsp;<span class="op" id="710776">*</span><span class="ident" id="710777"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="710781">)</span>&nbsp;<span class="op" id="710783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="710787">if</span>&nbsp;<span class="ident" id="710790"><a href="/path/filepath/path_test.go.html#710774">n</a></span><span class="op" id="710791">.</span><span class="ident" id="710792">entries</span>&nbsp;<span class="op" id="710800">==</span>&nbsp;<span class="ident" id="710803">nil</span>&nbsp;<span class="op" id="710807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="710812">fd</span><span class="op" id="710814">,</span>&nbsp;<span class="ident" id="710816">err</span>&nbsp;<span class="op" id="710820">:=</span>&nbsp;<span class="ident" id="710823"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="710825">.</span><span class="ident" id="710826">Create</span><span class="op" id="710832">(</span><span class="ident" id="710833"><a href="/path/filepath/path_test.go.html#710761">path</a></span><span class="op" id="710837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="710842">if</span>&nbsp;<span class="ident" id="710845"><a href="/path/filepath/path_test.go.html#710816">err</a></span>&nbsp;<span class="op" id="710849">!=</span>&nbsp;<span class="ident" id="710852">nil</span>&nbsp;<span class="op" id="710856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="710862"><a href="/path/filepath/path_test.go.html#710713">t</a></span><span class="op" id="710863">.</span><span class="ident" id="710864">Errorf</span><span class="op" id="710870">(</span><span class="string" id="710871">&#34;makeTree:&nbsp;%v&#34;</span><span class="op" id="710885">,</span>&nbsp;<span class="ident" id="710887"><a href="/path/filepath/path_test.go.html#710816">err</a></span><span class="op" id="710890">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="710896">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="710911"><a href="/path/filepath/path_test.go.html#710812">fd</a></span><span class="op" id="710913">.</span><span class="ident" id="710914">Close</span><span class="op" id="710919">(</span><span class="op" id="710920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710924">}</span>&nbsp;<span class="keyword" id="710926">else</span>&nbsp;<span class="op" id="710931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="710936"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="710938">.</span><span class="ident" id="710939">Mkdir</span><span class="op" id="710944">(</span><span class="ident" id="710945"><a href="/path/filepath/path_test.go.html#710761">path</a></span><span class="op" id="710949">,</span>&nbsp;<span class="num" id="710951">0770</span><span class="op" id="710955">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="710962">}</span><span class="op" id="710963">)</span><br>
<span class="lineno"></span><span class="op" id="710965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="710968">func</span>&nbsp;<span class="ident" id="710973">markTree</span><span class="op" id="710981">(</span><span class="ident" id="710982">n</span>&nbsp;<span class="op" id="710984">*</span><span class="ident" id="710985"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="710989">)</span>&nbsp;<span class="op" id="710991">{</span>&nbsp;<span class="ident" id="710993"><a href="/path/filepath/path_test.go.html#710541">walkTree</a></span><span class="op" id="711001">(</span><span class="ident" id="711002"><a href="/path/filepath/path_test.go.html#710982">n</a></span><span class="op" id="711003">,</span>&nbsp;<span class="string" id="711005">&#34;&#34;</span><span class="op" id="711007">,</span>&nbsp;<span class="keyword" id="711009">func</span><span class="op" id="711013">(</span><span class="ident" id="711014">path</span>&nbsp;<span class="builtintype" id="711019">string</span><span class="op" id="711025">,</span>&nbsp;<span class="ident" id="711027">n</span>&nbsp;<span class="op" id="711029">*</span><span class="ident" id="711030"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="711034">)</span>&nbsp;<span class="op" id="711036">{</span>&nbsp;<span class="ident" id="711038"><a href="/path/filepath/path_test.go.html#711027">n</a></span><span class="op" id="711039">.</span><span class="ident" id="711040">mark</span><span class="op" id="711044">++</span>&nbsp;<span class="op" id="711047">}</span><span class="op" id="711048">)</span>&nbsp;<span class="op" id="711050">}</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span><span class="keyword" id="711053">func</span>&nbsp;<span class="ident" id="711058">checkMarks</span><span class="op" id="711068">(</span><span class="ident" id="711069">t</span>&nbsp;<span class="op" id="711071">*</span><span class="ident" id="711072"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="711079">.</span><span class="ident" id="711080">T</span><span class="op" id="711081">,</span>&nbsp;<span class="ident" id="711083">report</span>&nbsp;<span class="builtintype" id="711090">bool</span><span class="op" id="711094">)</span>&nbsp;<span class="op" id="711096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="711099"><a href="/path/filepath/path_test.go.html#710541">walkTree</a></span><span class="op" id="711107">(</span><span class="ident" id="711108"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="711112">,</span>&nbsp;<span class="ident" id="711114"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="711118">.</span><span class="ident" id="711119">name</span><span class="op" id="711123">,</span>&nbsp;<span class="keyword" id="711125">func</span><span class="op" id="711129">(</span><span class="ident" id="711130">path</span>&nbsp;<span class="builtintype" id="711135">string</span><span class="op" id="711141">,</span>&nbsp;<span class="ident" id="711143">n</span>&nbsp;<span class="op" id="711145">*</span><span class="ident" id="711146"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="711150">)</span>&nbsp;<span class="op" id="711152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="711156">if</span>&nbsp;<span class="ident" id="711159"><a href="/path/filepath/path_test.go.html#711143">n</a></span><span class="op" id="711160">.</span><span class="ident" id="711161">mark</span>&nbsp;<span class="op" id="711166">!=</span>&nbsp;<span class="num" id="711169">1</span>&nbsp;<span class="op" id="711171">&amp;&amp;</span>&nbsp;<span class="ident" id="711174"><a href="/path/filepath/path_test.go.html#711083">report</a></span>&nbsp;<span class="op" id="711181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="711186"><a href="/path/filepath/path_test.go.html#711069">t</a></span><span class="op" id="711187">.</span><span class="ident" id="711188">Errorf</span><span class="op" id="711194">(</span><span class="string" id="711195">&#34;node&nbsp;%s&nbsp;mark&nbsp;=&nbsp;%d;&nbsp;expected&nbsp;1&#34;</span><span class="op" id="711226">,</span>&nbsp;<span class="ident" id="711228"><a href="/path/filepath/path_test.go.html#711130">path</a></span><span class="op" id="711232">,</span>&nbsp;<span class="ident" id="711234"><a href="/path/filepath/path_test.go.html#711143">n</a></span><span class="op" id="711235">.</span><span class="ident" id="711236">mark</span><span class="op" id="711240">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="711244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="711248"><a href="/path/filepath/path_test.go.html#711143">n</a></span><span class="op" id="711249">.</span><span class="ident" id="711250">mark</span>&nbsp;<span class="op" id="711255">=</span>&nbsp;<span class="num" id="711257">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="711260">}</span><span class="op" id="711261">)</span><br>
<span class="lineno"></span><span class="op" id="711263">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="comment" id="711266">//&nbsp;Assumes&nbsp;that&nbsp;each&nbsp;node&nbsp;name&nbsp;is&nbsp;unique.&nbsp;Good&nbsp;enough&nbsp;for&nbsp;a&nbsp;test.</span><br>
<span class="lineno"></span><span class="comment" id="711332">//&nbsp;If&nbsp;clear&nbsp;is&nbsp;true,&nbsp;any&nbsp;incoming&nbsp;error&nbsp;is&nbsp;cleared&nbsp;before&nbsp;return.&nbsp;The&nbsp;errors</span><br>
<span class="lineno"></span><span class="comment" id="711409">//&nbsp;are&nbsp;always&nbsp;accumulated,&nbsp;though.</span><br>
<span class="lineno"></span><span class="keyword" id="711444">func</span>&nbsp;<span class="ident" id="711449">mark</span><span class="op" id="711453">(</span><span class="ident" id="711454">path</span>&nbsp;<span class="builtintype" id="711459">string</span><span class="op" id="711465">,</span>&nbsp;<span class="ident" id="711467">info</span>&nbsp;<span class="ident" id="711472"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="711474">.</span><span class="ident" id="711475">FileInfo</span><span class="op" id="711483">,</span>&nbsp;<span class="ident" id="711485">err</span>&nbsp;<span class="builtintype" id="711489">error</span><span class="op" id="711494">,</span>&nbsp;<span class="ident" id="711496">errors</span>&nbsp;<span class="op" id="711503">*</span><span class="op" id="711504">[</span><span class="op" id="711505">]</span><span class="builtintype" id="711506">error</span><span class="op" id="711511">,</span>&nbsp;<span class="ident" id="711513">clear</span>&nbsp;<span class="builtintype" id="711519">bool</span><span class="op" id="711523">)</span>&nbsp;<span class="builtintype" id="711525">error</span>&nbsp;<span class="op" id="711531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="711534">if</span>&nbsp;<span class="ident" id="711537"><a href="/path/filepath/path_test.go.html#711485">err</a></span>&nbsp;<span class="op" id="711541">!=</span>&nbsp;<span class="ident" id="711544">nil</span>&nbsp;<span class="op" id="711548">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="711552">*</span><span class="ident" id="711553"><a href="/path/filepath/path_test.go.html#711496">errors</a></span>&nbsp;<span class="op" id="711560">=</span>&nbsp;<span class="builtinfunc" id="711562">append</span><span class="op" id="711568">(</span><span class="op" id="711569">*</span><span class="ident" id="711570"><a href="/path/filepath/path_test.go.html#711496">errors</a></span><span class="op" id="711576">,</span>&nbsp;<span class="ident" id="711578"><a href="/path/filepath/path_test.go.html#711485">err</a></span><span class="op" id="711581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="711585">if</span>&nbsp;<span class="ident" id="711588"><a href="/path/filepath/path_test.go.html#711513">clear</a></span>&nbsp;<span class="op" id="711594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="711599">return</span>&nbsp;<span class="ident" id="711606">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="711612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="711616">return</span>&nbsp;<span class="ident" id="711623"><a href="/path/filepath/path_test.go.html#711485">err</a></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="711628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="711631">name</span>&nbsp;<span class="op" id="711636">:=</span>&nbsp;<span class="ident" id="711639"><a href="/path/filepath/path_test.go.html#711467">info</a></span><span class="op" id="711643">.</span><span class="ident" id="711644">Name</span><span class="op" id="711648">(</span><span class="op" id="711649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="711652"><a href="/path/filepath/path_test.go.html#710541">walkTree</a></span><span class="op" id="711660">(</span><span class="ident" id="711661"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="711665">,</span>&nbsp;<span class="ident" id="711667"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="711671">.</span><span class="ident" id="711672">name</span><span class="op" id="711676">,</span>&nbsp;<span class="keyword" id="711678">func</span><span class="op" id="711682">(</span><span class="ident" id="711683">path</span>&nbsp;<span class="builtintype" id="711688">string</span><span class="op" id="711694">,</span>&nbsp;<span class="ident" id="711696">n</span>&nbsp;<span class="op" id="711698">*</span><span class="ident" id="711699"><a href="/path/filepath/path_test.go.html#710154">Node</a></span><span class="op" id="711703">)</span>&nbsp;<span class="op" id="711705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="711709">if</span>&nbsp;<span class="ident" id="711712"><a href="/path/filepath/path_test.go.html#711696">n</a></span><span class="op" id="711713">.</span><span class="ident" id="711714">name</span>&nbsp;<span class="op" id="711719">==</span>&nbsp;<span class="ident" id="711722"><a href="/path/filepath/path_test.go.html#711631">name</a></span>&nbsp;<span class="op" id="711727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="711732"><a href="/path/filepath/path_test.go.html#711696">n</a></span><span class="op" id="711733">.</span><span class="ident" id="711734">mark</span><span class="op" id="711738">++</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="711743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="711746">}</span><span class="op" id="711747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="711750">return</span>&nbsp;<span class="ident" id="711757">nil</span><br>
<span class="lineno"></span><span class="op" id="711761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span><span class="keyword" id="711764">func</span>&nbsp;<span class="ident" id="711769">TestWalk</span><span class="op" id="711777">(</span><span class="ident" id="711778">t</span>&nbsp;<span class="op" id="711780">*</span><span class="ident" id="711781"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="711788">.</span><span class="ident" id="711789">T</span><span class="op" id="711790">)</span>&nbsp;<span class="op" id="711792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="711795"><a href="/path/filepath/path_test.go.html#710704">makeTree</a></span><span class="op" id="711803">(</span><span class="ident" id="711804"><a href="/path/filepath/path_test.go.html#711778">t</a></span><span class="op" id="711805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="711808">errors</span>&nbsp;<span class="op" id="711815">:=</span>&nbsp;<span class="builtinfunc" id="711818">make</span><span class="op" id="711822">(</span><span class="op" id="711823">[</span><span class="op" id="711824">]</span><span class="builtintype" id="711825">error</span><span class="op" id="711830">,</span>&nbsp;<span class="num" id="711832">0</span><span class="op" id="711833">,</span>&nbsp;<span class="num" id="711835">10</span><span class="op" id="711837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="711840">clear</span>&nbsp;<span class="op" id="711846">:=</span>&nbsp;<span class="ident" id="711849">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="711855">markFn</span>&nbsp;<span class="op" id="711862">:=</span>&nbsp;<span class="keyword" id="711865">func</span><span class="op" id="711869">(</span><span class="ident" id="711870">path</span>&nbsp;<span class="builtintype" id="711875">string</span><span class="op" id="711881">,</span>&nbsp;<span class="ident" id="711883">info</span>&nbsp;<span class="ident" id="711888"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="711890">.</span><span class="ident" id="711891">FileInfo</span><span class="op" id="711899">,</span>&nbsp;<span class="ident" id="711901">err</span>&nbsp;<span class="builtintype" id="711905">error</span><span class="op" id="711910">)</span>&nbsp;<span class="builtintype" id="711912">error</span>&nbsp;<span class="op" id="711918">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="711922">return</span>&nbsp;<span class="ident" id="711929"><a href="/path/filepath/path_test.go.html#711449">mark</a></span><span class="op" id="711933">(</span><span class="ident" id="711934"><a href="/path/filepath/path_test.go.html#711870">path</a></span><span class="op" id="711938">,</span>&nbsp;<span class="ident" id="711940"><a href="/path/filepath/path_test.go.html#711883">info</a></span><span class="op" id="711944">,</span>&nbsp;<span class="ident" id="711946"><a href="/path/filepath/path_test.go.html#711901">err</a></span><span class="op" id="711949">,</span>&nbsp;<span class="op" id="711951">&amp;</span><span class="ident" id="711952"><a href="/path/filepath/path_test.go.html#711808">errors</a></span><span class="op" id="711958">,</span>&nbsp;<span class="ident" id="711960"><a href="/path/filepath/path_test.go.html#711840">clear</a></span><span class="op" id="711965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="711968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="711971">//&nbsp;Expect&nbsp;no&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="711993">err</span>&nbsp;<span class="op" id="711997">:=</span>&nbsp;<span class="ident" id="712000"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="712008">.</span><span class="ident" id="712009">Walk</span><span class="op" id="712013">(</span><span class="ident" id="712014"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="712018">.</span><span class="ident" id="712019">name</span><span class="op" id="712023">,</span>&nbsp;<span class="ident" id="712025"><a href="/path/filepath/path_test.go.html#711855">markFn</a></span><span class="op" id="712031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="712034">if</span>&nbsp;<span class="ident" id="712037"><a href="/path/filepath/path_test.go.html#711993">err</a></span>&nbsp;<span class="op" id="712041">!=</span>&nbsp;<span class="ident" id="712044">nil</span>&nbsp;<span class="op" id="712048">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="712052"><a href="/path/filepath/path_test.go.html#711778">t</a></span><span class="op" id="712053">.</span><span class="ident" id="712054">Fatalf</span><span class="op" id="712060">(</span><span class="string" id="712061">&#34;no&nbsp;error&nbsp;expected,&nbsp;found:&nbsp;%s&#34;</span><span class="op" id="712091">,</span>&nbsp;<span class="ident" id="712093"><a href="/path/filepath/path_test.go.html#711993">err</a></span><span class="op" id="712096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="712099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="712102">if</span>&nbsp;<span class="builtinfunc" id="712105">len</span><span class="op" id="712108">(</span><span class="ident" id="712109"><a href="/path/filepath/path_test.go.html#711808">errors</a></span><span class="op" id="712115">)</span>&nbsp;<span class="op" id="712117">!=</span>&nbsp;<span class="num" id="712120">0</span>&nbsp;<span class="op" id="712122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="712126"><a href="/path/filepath/path_test.go.html#711778">t</a></span><span class="op" id="712127">.</span><span class="ident" id="712128">Fatalf</span><span class="op" id="712134">(</span><span class="string" id="712135">&#34;unexpected&nbsp;errors:&nbsp;%s&#34;</span><span class="op" id="712158">,</span>&nbsp;<span class="ident" id="712160"><a href="/path/filepath/path_test.go.html#711808">errors</a></span><span class="op" id="712166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="712169">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="712172"><a href="/path/filepath/path_test.go.html#711058">checkMarks</a></span><span class="op" id="712182">(</span><span class="ident" id="712183"><a href="/path/filepath/path_test.go.html#711778">t</a></span><span class="op" id="712184">,</span>&nbsp;<span class="ident" id="712186">true</span><span class="op" id="712190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="712193"><a href="/path/filepath/path_test.go.html#711808">errors</a></span>&nbsp;<span class="op" id="712200">=</span>&nbsp;<span class="ident" id="712202"><a href="/path/filepath/path_test.go.html#711808">errors</a></span><span class="op" id="712208">[</span><span class="num" id="712209">0</span><span class="op" id="712210">:</span><span class="num" id="712211">0</span><span class="op" id="712212">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="712216">//&nbsp;Test&nbsp;permission&nbsp;errors.&nbsp;&nbsp;Only&nbsp;possible&nbsp;if&nbsp;we&#39;re&nbsp;not&nbsp;root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="712277">//&nbsp;and&nbsp;only&nbsp;on&nbsp;some&nbsp;file&nbsp;systems&nbsp;(AFS,&nbsp;FAT).&nbsp;&nbsp;To&nbsp;avoid&nbsp;errors&nbsp;during</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="712347">//&nbsp;all.bash&nbsp;on&nbsp;those&nbsp;file&nbsp;systems,&nbsp;skip&nbsp;during&nbsp;go&nbsp;test&nbsp;-short.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="712411">if</span>&nbsp;<span class="ident" id="712414"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="712416">.</span><span class="ident" id="712417">Getuid</span><span class="op" id="712423">(</span><span class="op" id="712424">)</span>&nbsp;<span class="op" id="712426">&gt;</span>&nbsp;<span class="num" id="712428">0</span>&nbsp;<span class="op" id="712430">&amp;&amp;</span>&nbsp;<span class="op" id="712433">!</span><span class="ident" id="712434"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="712441">.</span><span class="ident" id="712442">Short</span><span class="op" id="712447">(</span><span class="op" id="712448">)</span>&nbsp;<span class="op" id="712450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="712454">//&nbsp;introduce&nbsp;2&nbsp;errors:&nbsp;chmod&nbsp;top-level&nbsp;directories&nbsp;to&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="712512"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="712514">.</span><span class="ident" id="712515">Chmod</span><span class="op" id="712520">(</span><span class="ident" id="712521"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="712529">.</span><span class="ident" id="712530">Join</span><span class="op" id="712534">(</span><span class="ident" id="712535"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="712539">.</span><span class="ident" id="712540">name</span><span class="op" id="712544">,</span>&nbsp;<span class="ident" id="712546"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="712550">.</span><span class="ident" id="712551">entries</span><span class="op" id="712558">[</span><span class="num" id="712559">1</span><span class="op" id="712560">]</span><span class="op" id="712561">.</span><span class="ident" id="712562">name</span><span class="op" id="712566">)</span><span class="op" id="712567">,</span>&nbsp;<span class="num" id="712569">0</span><span class="op" id="712570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="712574"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="712576">.</span><span class="ident" id="712577">Chmod</span><span class="op" id="712582">(</span><span class="ident" id="712583"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="712591">.</span><span class="ident" id="712592">Join</span><span class="op" id="712596">(</span><span class="ident" id="712597"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="712601">.</span><span class="ident" id="712602">name</span><span class="op" id="712606">,</span>&nbsp;<span class="ident" id="712608"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="712612">.</span><span class="ident" id="712613">entries</span><span class="op" id="712620">[</span><span class="num" id="712621">3</span><span class="op" id="712622">]</span><span class="op" id="712623">.</span><span class="ident" id="712624">name</span><span class="op" id="712628">)</span><span class="op" id="712629">,</span>&nbsp;<span class="num" id="712631">0</span><span class="op" id="712632">)</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="712637">//&nbsp;3)&nbsp;capture&nbsp;errors,&nbsp;expect&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="712673">//&nbsp;mark&nbsp;respective&nbsp;subtrees&nbsp;manually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="712712"><a href="/path/filepath/path_test.go.html#710973">markTree</a></span><span class="op" id="712720">(</span><span class="ident" id="712721"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="712725">.</span><span class="ident" id="712726">entries</span><span class="op" id="712733">[</span><span class="num" id="712734">1</span><span class="op" id="712735">]</span><span class="op" id="712736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="712740"><a href="/path/filepath/path_test.go.html#710973">markTree</a></span><span class="op" id="712748">(</span><span class="ident" id="712749"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="712753">.</span><span class="ident" id="712754">entries</span><span class="op" id="712761">[</span><span class="num" id="712762">3</span><span class="op" id="712763">]</span><span class="op" id="712764">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="712768">//&nbsp;correct&nbsp;double-marking&nbsp;of&nbsp;directory&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="712816"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="712820">.</span><span class="ident" id="712821">entries</span><span class="op" id="712828">[</span><span class="num" id="712829">1</span><span class="op" id="712830">]</span><span class="op" id="712831">.</span><span class="ident" id="712832">mark</span><span class="op" id="712836">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="712841"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="712845">.</span><span class="ident" id="712846">entries</span><span class="op" id="712853">[</span><span class="num" id="712854">3</span><span class="op" id="712855">]</span><span class="op" id="712856">.</span><span class="ident" id="712857">mark</span><span class="op" id="712861">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="712866">err</span>&nbsp;<span class="op" id="712870">:=</span>&nbsp;<span class="ident" id="712873"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="712881">.</span><span class="ident" id="712882">Walk</span><span class="op" id="712886">(</span><span class="ident" id="712887"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="712891">.</span><span class="ident" id="712892">name</span><span class="op" id="712896">,</span>&nbsp;<span class="ident" id="712898"><a href="/path/filepath/path_test.go.html#711855">markFn</a></span><span class="op" id="712904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="712908">if</span>&nbsp;<span class="ident" id="712911"><a href="/path/filepath/path_test.go.html#712866">err</a></span>&nbsp;<span class="op" id="712915">!=</span>&nbsp;<span class="ident" id="712918">nil</span>&nbsp;<span class="op" id="712922">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="712927"><a href="/path/filepath/path_test.go.html#711778">t</a></span><span class="op" id="712928">.</span><span class="ident" id="712929">Fatalf</span><span class="op" id="712935">(</span><span class="string" id="712936">&#34;expected&nbsp;no&nbsp;error&nbsp;return&nbsp;from&nbsp;Walk,&nbsp;got&nbsp;%s&#34;</span><span class="op" id="712980">,</span>&nbsp;<span class="ident" id="712982"><a href="/path/filepath/path_test.go.html#712866">err</a></span><span class="op" id="712985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="712989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="712993">if</span>&nbsp;<span class="builtinfunc" id="712996">len</span><span class="op" id="712999">(</span><span class="ident" id="713000"><a href="/path/filepath/path_test.go.html#711808">errors</a></span><span class="op" id="713006">)</span>&nbsp;<span class="op" id="713008">!=</span>&nbsp;<span class="num" id="713011">2</span>&nbsp;<span class="op" id="713013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713018"><a href="/path/filepath/path_test.go.html#711778">t</a></span><span class="op" id="713019">.</span><span class="ident" id="713020">Errorf</span><span class="op" id="713026">(</span><span class="string" id="713027">&#34;expected&nbsp;2&nbsp;errors,&nbsp;got&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="713058">,</span>&nbsp;<span class="builtinfunc" id="713060">len</span><span class="op" id="713063">(</span><span class="ident" id="713064"><a href="/path/filepath/path_test.go.html#711808">errors</a></span><span class="op" id="713070">)</span><span class="op" id="713071">,</span>&nbsp;<span class="ident" id="713073"><a href="/path/filepath/path_test.go.html#711808">errors</a></span><span class="op" id="713079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="713083">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="713087">//&nbsp;the&nbsp;inaccessible&nbsp;subtrees&nbsp;were&nbsp;marked&nbsp;manually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713139"><a href="/path/filepath/path_test.go.html#711058">checkMarks</a></span><span class="op" id="713149">(</span><span class="ident" id="713150"><a href="/path/filepath/path_test.go.html#711778">t</a></span><span class="op" id="713151">,</span>&nbsp;<span class="ident" id="713153">true</span><span class="op" id="713157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713161"><a href="/path/filepath/path_test.go.html#711808">errors</a></span>&nbsp;<span class="op" id="713168">=</span>&nbsp;<span class="ident" id="713170"><a href="/path/filepath/path_test.go.html#711808">errors</a></span><span class="op" id="713176">[</span><span class="num" id="713177">0</span><span class="op" id="713178">:</span><span class="num" id="713179">0</span><span class="op" id="713180">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="713185">//&nbsp;4)&nbsp;capture&nbsp;errors,&nbsp;stop&nbsp;after&nbsp;first&nbsp;error.</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="713233">//&nbsp;mark&nbsp;respective&nbsp;subtrees&nbsp;manually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713272"><a href="/path/filepath/path_test.go.html#710973">markTree</a></span><span class="op" id="713280">(</span><span class="ident" id="713281"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="713285">.</span><span class="ident" id="713286">entries</span><span class="op" id="713293">[</span><span class="num" id="713294">1</span><span class="op" id="713295">]</span><span class="op" id="713296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713300"><a href="/path/filepath/path_test.go.html#710973">markTree</a></span><span class="op" id="713308">(</span><span class="ident" id="713309"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="713313">.</span><span class="ident" id="713314">entries</span><span class="op" id="713321">[</span><span class="num" id="713322">3</span><span class="op" id="713323">]</span><span class="op" id="713324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="713328">//&nbsp;correct&nbsp;double-marking&nbsp;of&nbsp;directory&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713376"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="713380">.</span><span class="ident" id="713381">entries</span><span class="op" id="713388">[</span><span class="num" id="713389">1</span><span class="op" id="713390">]</span><span class="op" id="713391">.</span><span class="ident" id="713392">mark</span><span class="op" id="713396">--</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713401"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="713405">.</span><span class="ident" id="713406">entries</span><span class="op" id="713413">[</span><span class="num" id="713414">3</span><span class="op" id="713415">]</span><span class="op" id="713416">.</span><span class="ident" id="713417">mark</span><span class="op" id="713421">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713426"><a href="/path/filepath/path_test.go.html#711840">clear</a></span>&nbsp;<span class="op" id="713432">=</span>&nbsp;<span class="ident" id="713434">false</span>&nbsp;<span class="comment" id="713440">//&nbsp;error&nbsp;will&nbsp;stop&nbsp;processing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713472"><a href="/path/filepath/path_test.go.html#712866">err</a></span>&nbsp;<span class="op" id="713476">=</span>&nbsp;<span class="ident" id="713478"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="713486">.</span><span class="ident" id="713487">Walk</span><span class="op" id="713491">(</span><span class="ident" id="713492"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="713496">.</span><span class="ident" id="713497">name</span><span class="op" id="713501">,</span>&nbsp;<span class="ident" id="713503"><a href="/path/filepath/path_test.go.html#711855">markFn</a></span><span class="op" id="713509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="713513">if</span>&nbsp;<span class="ident" id="713516"><a href="/path/filepath/path_test.go.html#712866">err</a></span>&nbsp;<span class="op" id="713520">==</span>&nbsp;<span class="ident" id="713523">nil</span>&nbsp;<span class="op" id="713527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713532"><a href="/path/filepath/path_test.go.html#711778">t</a></span><span class="op" id="713533">.</span><span class="ident" id="713534">Fatalf</span><span class="op" id="713540">(</span><span class="string" id="713541">&#34;expected&nbsp;error&nbsp;return&nbsp;from&nbsp;Walk&#34;</span><span class="op" id="713574">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="713578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="713582">if</span>&nbsp;<span class="builtinfunc" id="713585">len</span><span class="op" id="713588">(</span><span class="ident" id="713589"><a href="/path/filepath/path_test.go.html#711808">errors</a></span><span class="op" id="713595">)</span>&nbsp;<span class="op" id="713597">!=</span>&nbsp;<span class="num" id="713600">1</span>&nbsp;<span class="op" id="713602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713607"><a href="/path/filepath/path_test.go.html#711778">t</a></span><span class="op" id="713608">.</span><span class="ident" id="713609">Errorf</span><span class="op" id="713615">(</span><span class="string" id="713616">&#34;expected&nbsp;1&nbsp;error,&nbsp;got&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="713646">,</span>&nbsp;<span class="builtinfunc" id="713648">len</span><span class="op" id="713651">(</span><span class="ident" id="713652"><a href="/path/filepath/path_test.go.html#711808">errors</a></span><span class="op" id="713658">)</span><span class="op" id="713659">,</span>&nbsp;<span class="ident" id="713661"><a href="/path/filepath/path_test.go.html#711808">errors</a></span><span class="op" id="713667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="713671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="713675">//&nbsp;the&nbsp;inaccessible&nbsp;subtrees&nbsp;were&nbsp;marked&nbsp;manually</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713727"><a href="/path/filepath/path_test.go.html#711058">checkMarks</a></span><span class="op" id="713737">(</span><span class="ident" id="713738"><a href="/path/filepath/path_test.go.html#711778">t</a></span><span class="op" id="713739">,</span>&nbsp;<span class="ident" id="713741">false</span><span class="op" id="713746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713750"><a href="/path/filepath/path_test.go.html#711808">errors</a></span>&nbsp;<span class="op" id="713757">=</span>&nbsp;<span class="ident" id="713759"><a href="/path/filepath/path_test.go.html#711808">errors</a></span><span class="op" id="713765">[</span><span class="num" id="713766">0</span><span class="op" id="713767">:</span><span class="num" id="713768">0</span><span class="op" id="713769">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="713774">//&nbsp;restore&nbsp;permissions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713799"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="713801">.</span><span class="ident" id="713802">Chmod</span><span class="op" id="713807">(</span><span class="ident" id="713808"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="713816">.</span><span class="ident" id="713817">Join</span><span class="op" id="713821">(</span><span class="ident" id="713822"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="713826">.</span><span class="ident" id="713827">name</span><span class="op" id="713831">,</span>&nbsp;<span class="ident" id="713833"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="713837">.</span><span class="ident" id="713838">entries</span><span class="op" id="713845">[</span><span class="num" id="713846">1</span><span class="op" id="713847">]</span><span class="op" id="713848">.</span><span class="ident" id="713849">name</span><span class="op" id="713853">)</span><span class="op" id="713854">,</span>&nbsp;<span class="num" id="713856">0770</span><span class="op" id="713860">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713864"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="713866">.</span><span class="ident" id="713867">Chmod</span><span class="op" id="713872">(</span><span class="ident" id="713873"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="713881">.</span><span class="ident" id="713882">Join</span><span class="op" id="713886">(</span><span class="ident" id="713887"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="713891">.</span><span class="ident" id="713892">name</span><span class="op" id="713896">,</span>&nbsp;<span class="ident" id="713898"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="713902">.</span><span class="ident" id="713903">entries</span><span class="op" id="713910">[</span><span class="num" id="713911">3</span><span class="op" id="713912">]</span><span class="op" id="713913">.</span><span class="ident" id="713914">name</span><span class="op" id="713918">)</span><span class="op" id="713919">,</span>&nbsp;<span class="num" id="713921">0770</span><span class="op" id="713925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="713928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="713932">//&nbsp;cleanup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="713944">if</span>&nbsp;<span class="ident" id="713947">err</span>&nbsp;<span class="op" id="713951">:=</span>&nbsp;<span class="ident" id="713954"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="713956">.</span><span class="ident" id="713957">RemoveAll</span><span class="op" id="713966">(</span><span class="ident" id="713967"><a href="/path/filepath/path_test.go.html#710251">tree</a></span><span class="op" id="713971">.</span><span class="ident" id="713972">name</span><span class="op" id="713976">)</span><span class="op" id="713977">;</span>&nbsp;<span class="ident" id="713979"><a href="/path/filepath/path_test.go.html#713947">err</a></span>&nbsp;<span class="op" id="713983">!=</span>&nbsp;<span class="ident" id="713986">nil</span>&nbsp;<span class="op" id="713990">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="713994"><a href="/path/filepath/path_test.go.html#711778">t</a></span><span class="op" id="713995">.</span><span class="ident" id="713996">Errorf</span><span class="op" id="714002">(</span><span class="string" id="714003">&#34;removeTree:&nbsp;%v&#34;</span><span class="op" id="714019">,</span>&nbsp;<span class="ident" id="714021"><a href="/path/filepath/path_test.go.html#713947">err</a></span><span class="op" id="714024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="714027">}</span><br>
<span class="lineno"></span><span class="op" id="714029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="714032">func</span>&nbsp;<span class="ident" id="714037">touch</span><span class="op" id="714042">(</span><span class="ident" id="714043">t</span>&nbsp;<span class="op" id="714045">*</span><span class="ident" id="714046"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="714053">.</span><span class="ident" id="714054">T</span><span class="op" id="714055">,</span>&nbsp;<span class="ident" id="714057">name</span>&nbsp;<span class="builtintype" id="714062">string</span><span class="op" id="714068">)</span>&nbsp;<span class="op" id="714070">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714073">f</span><span class="op" id="714074">,</span>&nbsp;<span class="ident" id="714076">err</span>&nbsp;<span class="op" id="714080">:=</span>&nbsp;<span class="ident" id="714083"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="714085">.</span><span class="ident" id="714086">Create</span><span class="op" id="714092">(</span><span class="ident" id="714093"><a href="/path/filepath/path_test.go.html#714057">name</a></span><span class="op" id="714097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="714100">if</span>&nbsp;<span class="ident" id="714103"><a href="/path/filepath/path_test.go.html#714076">err</a></span>&nbsp;<span class="op" id="714107">!=</span>&nbsp;<span class="ident" id="714110">nil</span>&nbsp;<span class="op" id="714114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714118"><a href="/path/filepath/path_test.go.html#714043">t</a></span><span class="op" id="714119">.</span><span class="ident" id="714120">Fatal</span><span class="op" id="714125">(</span><span class="ident" id="714126"><a href="/path/filepath/path_test.go.html#714076">err</a></span><span class="op" id="714129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="714132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="714135">if</span>&nbsp;<span class="ident" id="714138">err</span>&nbsp;<span class="op" id="714142">:=</span>&nbsp;<span class="ident" id="714145"><a href="/path/filepath/path_test.go.html#714073">f</a></span><span class="op" id="714146">.</span><span class="ident" id="714147">Close</span><span class="op" id="714152">(</span><span class="op" id="714153">)</span><span class="op" id="714154">;</span>&nbsp;<span class="ident" id="714156"><a href="/path/filepath/path_test.go.html#714138">err</a></span>&nbsp;<span class="op" id="714160">!=</span>&nbsp;<span class="ident" id="714163">nil</span>&nbsp;<span class="op" id="714167">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714171"><a href="/path/filepath/path_test.go.html#714043">t</a></span><span class="op" id="714172">.</span><span class="ident" id="714173">Fatal</span><span class="op" id="714178">(</span><span class="ident" id="714179"><a href="/path/filepath/path_test.go.html#714138">err</a></span><span class="op" id="714182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="714185">}</span><br>
<span class="lineno"></span><span class="op" id="714187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="714190">func</span>&nbsp;<span class="ident" id="714195">TestWalkFileError</span><span class="op" id="714212">(</span><span class="ident" id="714213">t</span>&nbsp;<span class="op" id="714215">*</span><span class="ident" id="714216"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="714223">.</span><span class="ident" id="714224">T</span><span class="op" id="714225">)</span>&nbsp;<span class="op" id="714227">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714230">td</span><span class="op" id="714232">,</span>&nbsp;<span class="ident" id="714234">err</span>&nbsp;<span class="op" id="714238">:=</span>&nbsp;<span class="ident" id="714241"><a href="/path/filepath/path_test.go.html#703301">ioutil</a></span><span class="op" id="714247">.</span><span class="ident" id="714248">TempDir</span><span class="op" id="714255">(</span><span class="string" id="714256">&#34;&#34;</span><span class="op" id="714258">,</span>&nbsp;<span class="string" id="714260">&#34;walktest&#34;</span><span class="op" id="714270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="714273">if</span>&nbsp;<span class="ident" id="714276"><a href="/path/filepath/path_test.go.html#714234">err</a></span>&nbsp;<span class="op" id="714280">!=</span>&nbsp;<span class="ident" id="714283">nil</span>&nbsp;<span class="op" id="714287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714291"><a href="/path/filepath/path_test.go.html#714213">t</a></span><span class="op" id="714292">.</span><span class="ident" id="714293">Fatal</span><span class="op" id="714298">(</span><span class="ident" id="714299"><a href="/path/filepath/path_test.go.html#714234">err</a></span><span class="op" id="714302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="714305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="714308">defer</span>&nbsp;<span class="ident" id="714314"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="714316">.</span><span class="ident" id="714317">RemoveAll</span><span class="op" id="714326">(</span><span class="ident" id="714327"><a href="/path/filepath/path_test.go.html#714230">td</a></span><span class="op" id="714329">)</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714333"><a href="/path/filepath/path_test.go.html#714037">touch</a></span><span class="op" id="714338">(</span><span class="ident" id="714339"><a href="/path/filepath/path_test.go.html#714213">t</a></span><span class="op" id="714340">,</span>&nbsp;<span class="ident" id="714342"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="714350">.</span><span class="ident" id="714351">Join</span><span class="op" id="714355">(</span><span class="ident" id="714356"><a href="/path/filepath/path_test.go.html#714230">td</a></span><span class="op" id="714358">,</span>&nbsp;<span class="string" id="714360">&#34;foo&#34;</span><span class="op" id="714365">)</span><span class="op" id="714366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714369"><a href="/path/filepath/path_test.go.html#714037">touch</a></span><span class="op" id="714374">(</span><span class="ident" id="714375"><a href="/path/filepath/path_test.go.html#714213">t</a></span><span class="op" id="714376">,</span>&nbsp;<span class="ident" id="714378"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="714386">.</span><span class="ident" id="714387">Join</span><span class="op" id="714391">(</span><span class="ident" id="714392"><a href="/path/filepath/path_test.go.html#714230">td</a></span><span class="op" id="714394">,</span>&nbsp;<span class="string" id="714396">&#34;bar&#34;</span><span class="op" id="714401">)</span><span class="op" id="714402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714405">dir</span>&nbsp;<span class="op" id="714409">:=</span>&nbsp;<span class="ident" id="714412"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="714420">.</span><span class="ident" id="714421">Join</span><span class="op" id="714425">(</span><span class="ident" id="714426"><a href="/path/filepath/path_test.go.html#714230">td</a></span><span class="op" id="714428">,</span>&nbsp;<span class="string" id="714430">&#34;dir&#34;</span><span class="op" id="714435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="714438">if</span>&nbsp;<span class="ident" id="714441">err</span>&nbsp;<span class="op" id="714445">:=</span>&nbsp;<span class="ident" id="714448"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="714450">.</span><span class="ident" id="714451">MkdirAll</span><span class="op" id="714459">(</span><span class="ident" id="714460"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="714468">.</span><span class="ident" id="714469">Join</span><span class="op" id="714473">(</span><span class="ident" id="714474"><a href="/path/filepath/path_test.go.html#714230">td</a></span><span class="op" id="714476">,</span>&nbsp;<span class="string" id="714478">&#34;dir&#34;</span><span class="op" id="714483">)</span><span class="op" id="714484">,</span>&nbsp;<span class="num" id="714486">0755</span><span class="op" id="714490">)</span><span class="op" id="714491">;</span>&nbsp;<span class="ident" id="714493"><a href="/path/filepath/path_test.go.html#714441">err</a></span>&nbsp;<span class="op" id="714497">!=</span>&nbsp;<span class="ident" id="714500">nil</span>&nbsp;<span class="op" id="714504">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714508"><a href="/path/filepath/path_test.go.html#714213">t</a></span><span class="op" id="714509">.</span><span class="ident" id="714510">Fatal</span><span class="op" id="714515">(</span><span class="ident" id="714516"><a href="/path/filepath/path_test.go.html#714441">err</a></span><span class="op" id="714519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="714522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714525"><a href="/path/filepath/path_test.go.html#714037">touch</a></span><span class="op" id="714530">(</span><span class="ident" id="714531"><a href="/path/filepath/path_test.go.html#714213">t</a></span><span class="op" id="714532">,</span>&nbsp;<span class="ident" id="714534"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="714542">.</span><span class="ident" id="714543">Join</span><span class="op" id="714547">(</span><span class="ident" id="714548"><a href="/path/filepath/path_test.go.html#714405">dir</a></span><span class="op" id="714551">,</span>&nbsp;<span class="string" id="714553">&#34;baz&#34;</span><span class="op" id="714558">)</span><span class="op" id="714559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714562"><a href="/path/filepath/path_test.go.html#714037">touch</a></span><span class="op" id="714567">(</span><span class="ident" id="714568"><a href="/path/filepath/path_test.go.html#714213">t</a></span><span class="op" id="714569">,</span>&nbsp;<span class="ident" id="714571"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="714579">.</span><span class="ident" id="714580">Join</span><span class="op" id="714584">(</span><span class="ident" id="714585"><a href="/path/filepath/path_test.go.html#714405">dir</a></span><span class="op" id="714588">,</span>&nbsp;<span class="string" id="714590">&#34;stat-error&#34;</span><span class="op" id="714602">)</span><span class="op" id="714603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="714606">defer</span>&nbsp;<span class="keyword" id="714612">func</span><span class="op" id="714616">(</span><span class="op" id="714617">)</span>&nbsp;<span class="op" id="714619">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="714623">*</span><span class="ident" id="714624"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="714632">.</span><span class="ident" id="714633">LstatP</span>&nbsp;<span class="op" id="714640">=</span>&nbsp;<span class="ident" id="714642"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="714644">.</span><span class="ident" id="714645">Lstat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="714652">}</span><span class="op" id="714653">(</span><span class="op" id="714654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714657">statErr</span>&nbsp;<span class="op" id="714665">:=</span>&nbsp;<span class="ident" id="714668"><a href="/path/filepath/path_test.go.html#703291">errors</a></span><span class="op" id="714674">.</span><span class="ident" id="714675">New</span><span class="op" id="714678">(</span><span class="string" id="714679">&#34;some&nbsp;stat&nbsp;error&#34;</span><span class="op" id="714696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="714699">*</span><span class="ident" id="714700"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="714708">.</span><span class="ident" id="714709">LstatP</span>&nbsp;<span class="op" id="714716">=</span>&nbsp;<span class="keyword" id="714718">func</span><span class="op" id="714722">(</span><span class="ident" id="714723">path</span>&nbsp;<span class="builtintype" id="714728">string</span><span class="op" id="714734">)</span>&nbsp;<span class="op" id="714736">(</span><span class="ident" id="714737"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="714739">.</span><span class="ident" id="714740">FileInfo</span><span class="op" id="714748">,</span>&nbsp;<span class="builtintype" id="714750">error</span><span class="op" id="714755">)</span>&nbsp;<span class="op" id="714757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="714761">if</span>&nbsp;<span class="ident" id="714764"><a href="/path/filepath/path_test.go.html#703359">strings</a></span><span class="op" id="714771">.</span><span class="ident" id="714772">HasSuffix</span><span class="op" id="714781">(</span><span class="ident" id="714782"><a href="/path/filepath/path_test.go.html#714723">path</a></span><span class="op" id="714786">,</span>&nbsp;<span class="string" id="714788">&#34;stat-error&#34;</span><span class="op" id="714800">)</span>&nbsp;<span class="op" id="714802">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="714807">return</span>&nbsp;<span class="ident" id="714814">nil</span><span class="op" id="714817">,</span>&nbsp;<span class="ident" id="714819"><a href="/path/filepath/path_test.go.html#714657">statErr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="714829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="714833">return</span>&nbsp;<span class="ident" id="714840"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="714842">.</span><span class="ident" id="714843">Lstat</span><span class="op" id="714848">(</span><span class="ident" id="714849"><a href="/path/filepath/path_test.go.html#714723">path</a></span><span class="op" id="714853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="714856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714859">got</span>&nbsp;<span class="op" id="714863">:=</span>&nbsp;<span class="keyword" id="714866">map</span><span class="op" id="714869">[</span><span class="builtintype" id="714870">string</span><span class="op" id="714876">]</span><span class="builtintype" id="714877">error</span><span class="op" id="714882">{</span><span class="op" id="714883">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714886"><a href="/path/filepath/path_test.go.html#714234">err</a></span>&nbsp;<span class="op" id="714890">=</span>&nbsp;<span class="ident" id="714892"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="714900">.</span><span class="ident" id="714901">Walk</span><span class="op" id="714905">(</span><span class="ident" id="714906"><a href="/path/filepath/path_test.go.html#714230">td</a></span><span class="op" id="714908">,</span>&nbsp;<span class="keyword" id="714910">func</span><span class="op" id="714914">(</span><span class="ident" id="714915">path</span>&nbsp;<span class="builtintype" id="714920">string</span><span class="op" id="714926">,</span>&nbsp;<span class="ident" id="714928">fi</span>&nbsp;<span class="ident" id="714931"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="714933">.</span><span class="ident" id="714934">FileInfo</span><span class="op" id="714942">,</span>&nbsp;<span class="ident" id="714944">err</span>&nbsp;<span class="builtintype" id="714948">error</span><span class="op" id="714953">)</span>&nbsp;<span class="builtintype" id="714955">error</span>&nbsp;<span class="op" id="714961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="714965">rel</span><span class="op" id="714968">,</span>&nbsp;<span class="ident" id="714970">_</span>&nbsp;<span class="op" id="714972">:=</span>&nbsp;<span class="ident" id="714975"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="714983">.</span><span class="ident" id="714984">Rel</span><span class="op" id="714987">(</span><span class="ident" id="714988"><a href="/path/filepath/path_test.go.html#714230">td</a></span><span class="op" id="714990">,</span>&nbsp;<span class="ident" id="714992"><a href="/path/filepath/path_test.go.html#714915">path</a></span><span class="op" id="714996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="715000"><a href="/path/filepath/path_test.go.html#714859">got</a></span><span class="op" id="715003">[</span><span class="ident" id="715004"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="715012">.</span><span class="ident" id="715013">ToSlash</span><span class="op" id="715020">(</span><span class="ident" id="715021"><a href="/path/filepath/path_test.go.html#714965">rel</a></span><span class="op" id="715024">)</span><span class="op" id="715025">]</span>&nbsp;<span class="op" id="715027">=</span>&nbsp;<span class="ident" id="715029"><a href="/path/filepath/path_test.go.html#714944">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="715035">return</span>&nbsp;<span class="ident" id="715042">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715047">}</span><span class="op" id="715048">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="715051">if</span>&nbsp;<span class="ident" id="715054"><a href="/path/filepath/path_test.go.html#714234">err</a></span>&nbsp;<span class="op" id="715058">!=</span>&nbsp;<span class="ident" id="715061">nil</span>&nbsp;<span class="op" id="715065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="715069"><a href="/path/filepath/path_test.go.html#714213">t</a></span><span class="op" id="715070">.</span><span class="ident" id="715071">Errorf</span><span class="op" id="715077">(</span><span class="string" id="715078">&#34;Walk&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="715094">,</span>&nbsp;<span class="ident" id="715096"><a href="/path/filepath/path_test.go.html#714234">err</a></span><span class="op" id="715099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="715105">want</span>&nbsp;<span class="op" id="715110">:=</span>&nbsp;<span class="keyword" id="715113">map</span><span class="op" id="715116">[</span><span class="builtintype" id="715117">string</span><span class="op" id="715123">]</span><span class="builtintype" id="715124">error</span><span class="op" id="715129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="715133">&#34;.&#34;</span><span class="op" id="715136">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="715151">nil</span><span class="op" id="715154">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="715158">&#34;foo&#34;</span><span class="op" id="715163">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="715176">nil</span><span class="op" id="715179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="715183">&#34;bar&#34;</span><span class="op" id="715188">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="715201">nil</span><span class="op" id="715204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="715208">&#34;dir&#34;</span><span class="op" id="715213">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="715226">nil</span><span class="op" id="715229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="715233">&#34;dir/baz&#34;</span><span class="op" id="715242">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="715251">nil</span><span class="op" id="715254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="715258">&#34;dir/stat-error&#34;</span><span class="op" id="715274">:</span>&nbsp;<span class="ident" id="715276"><a href="/path/filepath/path_test.go.html#714657">statErr</a></span><span class="op" id="715283">,</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="715289">if</span>&nbsp;<span class="op" id="715292">!</span><span class="ident" id="715293"><a href="/path/filepath/path_test.go.html#703337">reflect</a></span><span class="op" id="715300">.</span><span class="ident" id="715301">DeepEqual</span><span class="op" id="715310">(</span><span class="ident" id="715311"><a href="/path/filepath/path_test.go.html#714859">got</a></span><span class="op" id="715314">,</span>&nbsp;<span class="ident" id="715316"><a href="/path/filepath/path_test.go.html#715105">want</a></span><span class="op" id="715320">)</span>&nbsp;<span class="op" id="715322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="715326"><a href="/path/filepath/path_test.go.html#714213">t</a></span><span class="op" id="715327">.</span><span class="ident" id="715328">Errorf</span><span class="op" id="715334">(</span><span class="string" id="715335">&#34;Walked&nbsp;%#v;&nbsp;want&nbsp;%#v&#34;</span><span class="op" id="715357">,</span>&nbsp;<span class="ident" id="715359"><a href="/path/filepath/path_test.go.html#714859">got</a></span><span class="op" id="715362">,</span>&nbsp;<span class="ident" id="715364"><a href="/path/filepath/path_test.go.html#715105">want</a></span><span class="op" id="715368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715371">}</span><br>
<span class="lineno"></span><span class="op" id="715373">}</span><br>
<span class="lineno">520</span><br>
<span class="lineno"></span><span class="keyword" id="715376">var</span>&nbsp;<span class="ident" id="715380">basetests</span>&nbsp;<span class="op" id="715390">=</span>&nbsp;<span class="op" id="715392">[</span><span class="op" id="715393">]</span><span class="ident" id="715394"><a href="/path/filepath/path_test.go.html#703417">PathTest</a></span><span class="op" id="715402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715405">{</span><span class="string" id="715406">&#34;&#34;</span><span class="op" id="715408">,</span>&nbsp;<span class="string" id="715410">&#34;.&#34;</span><span class="op" id="715413">}</span><span class="op" id="715414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715417">{</span><span class="string" id="715418">&#34;.&#34;</span><span class="op" id="715421">,</span>&nbsp;<span class="string" id="715423">&#34;.&#34;</span><span class="op" id="715426">}</span><span class="op" id="715427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715430">{</span><span class="string" id="715431">&#34;/.&#34;</span><span class="op" id="715435">,</span>&nbsp;<span class="string" id="715437">&#34;.&#34;</span><span class="op" id="715440">}</span><span class="op" id="715441">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715444">{</span><span class="string" id="715445">&#34;/&#34;</span><span class="op" id="715448">,</span>&nbsp;<span class="string" id="715450">&#34;/&#34;</span><span class="op" id="715453">}</span><span class="op" id="715454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715457">{</span><span class="string" id="715458">&#34;////&#34;</span><span class="op" id="715464">,</span>&nbsp;<span class="string" id="715466">&#34;/&#34;</span><span class="op" id="715469">}</span><span class="op" id="715470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715473">{</span><span class="string" id="715474">&#34;x/&#34;</span><span class="op" id="715478">,</span>&nbsp;<span class="string" id="715480">&#34;x&#34;</span><span class="op" id="715483">}</span><span class="op" id="715484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715487">{</span><span class="string" id="715488">&#34;abc&#34;</span><span class="op" id="715493">,</span>&nbsp;<span class="string" id="715495">&#34;abc&#34;</span><span class="op" id="715500">}</span><span class="op" id="715501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715504">{</span><span class="string" id="715505">&#34;abc/def&#34;</span><span class="op" id="715514">,</span>&nbsp;<span class="string" id="715516">&#34;def&#34;</span><span class="op" id="715521">}</span><span class="op" id="715522">,</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715525">{</span><span class="string" id="715526">&#34;a/b/.x&#34;</span><span class="op" id="715534">,</span>&nbsp;<span class="string" id="715536">&#34;.x&#34;</span><span class="op" id="715540">}</span><span class="op" id="715541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715544">{</span><span class="string" id="715545">&#34;a/b/c.&#34;</span><span class="op" id="715553">,</span>&nbsp;<span class="string" id="715555">&#34;c.&#34;</span><span class="op" id="715559">}</span><span class="op" id="715560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715563">{</span><span class="string" id="715564">&#34;a/b/c.x&#34;</span><span class="op" id="715573">,</span>&nbsp;<span class="string" id="715575">&#34;c.x&#34;</span><span class="op" id="715580">}</span><span class="op" id="715581">,</span><br>
<span class="lineno"></span><span class="op" id="715583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="keyword" id="715586">var</span>&nbsp;<span class="ident" id="715590">winbasetests</span>&nbsp;<span class="op" id="715603">=</span>&nbsp;<span class="op" id="715605">[</span><span class="op" id="715606">]</span><span class="ident" id="715607"><a href="/path/filepath/path_test.go.html#703417">PathTest</a></span><span class="op" id="715615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715618">{</span><span class="string" id="715619">`c:\`</span><span class="op" id="715624">,</span>&nbsp;<span class="string" id="715626">`\`</span><span class="op" id="715629">}</span><span class="op" id="715630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715633">{</span><span class="string" id="715634">`c:.`</span><span class="op" id="715639">,</span>&nbsp;<span class="string" id="715641">`.`</span><span class="op" id="715644">}</span><span class="op" id="715645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715648">{</span><span class="string" id="715649">`c:\a\b`</span><span class="op" id="715657">,</span>&nbsp;<span class="string" id="715659">`b`</span><span class="op" id="715662">}</span><span class="op" id="715663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715666">{</span><span class="string" id="715667">`c:a\b`</span><span class="op" id="715674">,</span>&nbsp;<span class="string" id="715676">`b`</span><span class="op" id="715679">}</span><span class="op" id="715680">,</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715683">{</span><span class="string" id="715684">`c:a\b\c`</span><span class="op" id="715693">,</span>&nbsp;<span class="string" id="715695">`c`</span><span class="op" id="715698">}</span><span class="op" id="715699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715702">{</span><span class="string" id="715703">`\\host\share\`</span><span class="op" id="715718">,</span>&nbsp;<span class="string" id="715720">`\`</span><span class="op" id="715723">}</span><span class="op" id="715724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715727">{</span><span class="string" id="715728">`\\host\share\a`</span><span class="op" id="715744">,</span>&nbsp;<span class="string" id="715746">`a`</span><span class="op" id="715749">}</span><span class="op" id="715750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715753">{</span><span class="string" id="715754">`\\host\share\a\b`</span><span class="op" id="715772">,</span>&nbsp;<span class="string" id="715774">`b`</span><span class="op" id="715777">}</span><span class="op" id="715778">,</span><br>
<span class="lineno"></span><span class="op" id="715780">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span><span class="keyword" id="715783">func</span>&nbsp;<span class="ident" id="715788">TestBase</span><span class="op" id="715796">(</span><span class="ident" id="715797">t</span>&nbsp;<span class="op" id="715799">*</span><span class="ident" id="715800"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="715807">.</span><span class="ident" id="715808">T</span><span class="op" id="715809">)</span>&nbsp;<span class="op" id="715811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="715814">tests</span>&nbsp;<span class="op" id="715820">:=</span>&nbsp;<span class="ident" id="715823"><a href="/path/filepath/path_test.go.html#715380">basetests</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="715834">if</span>&nbsp;<span class="ident" id="715837"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="715844">.</span><span class="ident" id="715845">GOOS</span>&nbsp;<span class="op" id="715850">==</span>&nbsp;<span class="string" id="715853">&#34;windows&#34;</span>&nbsp;<span class="op" id="715863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="715867">//&nbsp;make&nbsp;unix&nbsp;tests&nbsp;work&nbsp;on&nbsp;windows</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="715904">for</span>&nbsp;<span class="ident" id="715908">i</span>&nbsp;<span class="op" id="715910">:=</span>&nbsp;<span class="keyword" id="715913">range</span>&nbsp;<span class="ident" id="715919"><a href="/path/filepath/path_test.go.html#715814">tests</a></span>&nbsp;<span class="op" id="715925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="715930"><a href="/path/filepath/path_test.go.html#715814">tests</a></span><span class="op" id="715935">[</span><span class="ident" id="715936"><a href="/path/filepath/path_test.go.html#715908">i</a></span><span class="op" id="715937">]</span><span class="op" id="715938">.</span><span class="ident" id="715939">result</span>&nbsp;<span class="op" id="715946">=</span>&nbsp;<span class="ident" id="715948"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="715956">.</span><span class="ident" id="715957">Clean</span><span class="op" id="715962">(</span><span class="ident" id="715963"><a href="/path/filepath/path_test.go.html#715814">tests</a></span><span class="op" id="715968">[</span><span class="ident" id="715969"><a href="/path/filepath/path_test.go.html#715908">i</a></span><span class="op" id="715970">]</span><span class="op" id="715971">.</span><span class="ident" id="715972">result</span><span class="op" id="715978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="715982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="715986">//&nbsp;add&nbsp;windows&nbsp;specific&nbsp;tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="716018"><a href="/path/filepath/path_test.go.html#715814">tests</a></span>&nbsp;<span class="op" id="716024">=</span>&nbsp;<span class="builtinfunc" id="716026">append</span><span class="op" id="716032">(</span><span class="ident" id="716033"><a href="/path/filepath/path_test.go.html#715814">tests</a></span><span class="op" id="716038">,</span>&nbsp;<span class="ident" id="716040"><a href="/path/filepath/path_test.go.html#715590">winbasetests</a></span><span class="op" id="716052">...</span><span class="op" id="716055">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="716061">for</span>&nbsp;<span class="ident" id="716065">_</span><span class="op" id="716066">,</span>&nbsp;<span class="ident" id="716068">test</span>&nbsp;<span class="op" id="716073">:=</span>&nbsp;<span class="keyword" id="716076">range</span>&nbsp;<span class="ident" id="716082"><a href="/path/filepath/path_test.go.html#715814">tests</a></span>&nbsp;<span class="op" id="716088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="716092">if</span>&nbsp;<span class="ident" id="716095">s</span>&nbsp;<span class="op" id="716097">:=</span>&nbsp;<span class="ident" id="716100"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="716108">.</span><span class="ident" id="716109">Base</span><span class="op" id="716113">(</span><span class="ident" id="716114"><a href="/path/filepath/path_test.go.html#716068">test</a></span><span class="op" id="716118">.</span><span class="ident" id="716119">path</span><span class="op" id="716123">)</span><span class="op" id="716124">;</span>&nbsp;<span class="ident" id="716126"><a href="/path/filepath/path_test.go.html#716095">s</a></span>&nbsp;<span class="op" id="716128">!=</span>&nbsp;<span class="ident" id="716131"><a href="/path/filepath/path_test.go.html#716068">test</a></span><span class="op" id="716135">.</span><span class="ident" id="716136">result</span>&nbsp;<span class="op" id="716143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="716148"><a href="/path/filepath/path_test.go.html#715797">t</a></span><span class="op" id="716149">.</span><span class="ident" id="716150">Errorf</span><span class="op" id="716156">(</span><span class="string" id="716157">&#34;Base(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="716181">,</span>&nbsp;<span class="ident" id="716183"><a href="/path/filepath/path_test.go.html#716068">test</a></span><span class="op" id="716187">.</span><span class="ident" id="716188">path</span><span class="op" id="716192">,</span>&nbsp;<span class="ident" id="716194"><a href="/path/filepath/path_test.go.html#716095">s</a></span><span class="op" id="716195">,</span>&nbsp;<span class="ident" id="716197"><a href="/path/filepath/path_test.go.html#716068">test</a></span><span class="op" id="716201">.</span><span class="ident" id="716202">result</span><span class="op" id="716208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716212">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716215">}</span><br>
<span class="lineno"></span><span class="op" id="716217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="716220">var</span>&nbsp;<span class="ident" id="716224">dirtests</span>&nbsp;<span class="op" id="716233">=</span>&nbsp;<span class="op" id="716235">[</span><span class="op" id="716236">]</span><span class="ident" id="716237"><a href="/path/filepath/path_test.go.html#703417">PathTest</a></span><span class="op" id="716245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716248">{</span><span class="string" id="716249">&#34;&#34;</span><span class="op" id="716251">,</span>&nbsp;<span class="string" id="716253">&#34;.&#34;</span><span class="op" id="716256">}</span><span class="op" id="716257">,</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716260">{</span><span class="string" id="716261">&#34;.&#34;</span><span class="op" id="716264">,</span>&nbsp;<span class="string" id="716266">&#34;.&#34;</span><span class="op" id="716269">}</span><span class="op" id="716270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716273">{</span><span class="string" id="716274">&#34;/.&#34;</span><span class="op" id="716278">,</span>&nbsp;<span class="string" id="716280">&#34;/&#34;</span><span class="op" id="716283">}</span><span class="op" id="716284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716287">{</span><span class="string" id="716288">&#34;/&#34;</span><span class="op" id="716291">,</span>&nbsp;<span class="string" id="716293">&#34;/&#34;</span><span class="op" id="716296">}</span><span class="op" id="716297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716300">{</span><span class="string" id="716301">&#34;////&#34;</span><span class="op" id="716307">,</span>&nbsp;<span class="string" id="716309">&#34;/&#34;</span><span class="op" id="716312">}</span><span class="op" id="716313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716316">{</span><span class="string" id="716317">&#34;/foo&#34;</span><span class="op" id="716323">,</span>&nbsp;<span class="string" id="716325">&#34;/&#34;</span><span class="op" id="716328">}</span><span class="op" id="716329">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716332">{</span><span class="string" id="716333">&#34;x/&#34;</span><span class="op" id="716337">,</span>&nbsp;<span class="string" id="716339">&#34;x&#34;</span><span class="op" id="716342">}</span><span class="op" id="716343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716346">{</span><span class="string" id="716347">&#34;abc&#34;</span><span class="op" id="716352">,</span>&nbsp;<span class="string" id="716354">&#34;.&#34;</span><span class="op" id="716357">}</span><span class="op" id="716358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716361">{</span><span class="string" id="716362">&#34;abc/def&#34;</span><span class="op" id="716371">,</span>&nbsp;<span class="string" id="716373">&#34;abc&#34;</span><span class="op" id="716378">}</span><span class="op" id="716379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716382">{</span><span class="string" id="716383">&#34;a/b/.x&#34;</span><span class="op" id="716391">,</span>&nbsp;<span class="string" id="716393">&#34;a/b&#34;</span><span class="op" id="716398">}</span><span class="op" id="716399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716402">{</span><span class="string" id="716403">&#34;a/b/c.&#34;</span><span class="op" id="716411">,</span>&nbsp;<span class="string" id="716413">&#34;a/b&#34;</span><span class="op" id="716418">}</span><span class="op" id="716419">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716422">{</span><span class="string" id="716423">&#34;a/b/c.x&#34;</span><span class="op" id="716432">,</span>&nbsp;<span class="string" id="716434">&#34;a/b&#34;</span><span class="op" id="716439">}</span><span class="op" id="716440">,</span><br>
<span class="lineno"></span><span class="op" id="716442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="716445">var</span>&nbsp;<span class="ident" id="716449">windirtests</span>&nbsp;<span class="op" id="716461">=</span>&nbsp;<span class="op" id="716463">[</span><span class="op" id="716464">]</span><span class="ident" id="716465"><a href="/path/filepath/path_test.go.html#703417">PathTest</a></span><span class="op" id="716473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716476">{</span><span class="string" id="716477">`c:\`</span><span class="op" id="716482">,</span>&nbsp;<span class="string" id="716484">`c:\`</span><span class="op" id="716489">}</span><span class="op" id="716490">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716493">{</span><span class="string" id="716494">`c:.`</span><span class="op" id="716499">,</span>&nbsp;<span class="string" id="716501">`c:.`</span><span class="op" id="716506">}</span><span class="op" id="716507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716510">{</span><span class="string" id="716511">`c:\a\b`</span><span class="op" id="716519">,</span>&nbsp;<span class="string" id="716521">`c:\a`</span><span class="op" id="716527">}</span><span class="op" id="716528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716531">{</span><span class="string" id="716532">`c:a\b`</span><span class="op" id="716539">,</span>&nbsp;<span class="string" id="716541">`c:a`</span><span class="op" id="716546">}</span><span class="op" id="716547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716550">{</span><span class="string" id="716551">`c:a\b\c`</span><span class="op" id="716560">,</span>&nbsp;<span class="string" id="716562">`c:a\b`</span><span class="op" id="716569">}</span><span class="op" id="716570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716573">{</span><span class="string" id="716574">`\\host\share\`</span><span class="op" id="716589">,</span>&nbsp;<span class="string" id="716591">`\\host\share\`</span><span class="op" id="716606">}</span><span class="op" id="716607">,</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716610">{</span><span class="string" id="716611">`\\host\share\a`</span><span class="op" id="716627">,</span>&nbsp;<span class="string" id="716629">`\\host\share\`</span><span class="op" id="716644">}</span><span class="op" id="716645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716648">{</span><span class="string" id="716649">`\\host\share\a\b`</span><span class="op" id="716667">,</span>&nbsp;<span class="string" id="716669">`\\host\share\a`</span><span class="op" id="716685">}</span><span class="op" id="716686">,</span><br>
<span class="lineno"></span><span class="op" id="716688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="716691">func</span>&nbsp;<span class="ident" id="716696">TestDir</span><span class="op" id="716703">(</span><span class="ident" id="716704">t</span>&nbsp;<span class="op" id="716706">*</span><span class="ident" id="716707"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="716714">.</span><span class="ident" id="716715">T</span><span class="op" id="716716">)</span>&nbsp;<span class="op" id="716718">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="716721">tests</span>&nbsp;<span class="op" id="716727">:=</span>&nbsp;<span class="ident" id="716730"><a href="/path/filepath/path_test.go.html#716224">dirtests</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="716740">if</span>&nbsp;<span class="ident" id="716743"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="716750">.</span><span class="ident" id="716751">GOOS</span>&nbsp;<span class="op" id="716756">==</span>&nbsp;<span class="string" id="716759">&#34;windows&#34;</span>&nbsp;<span class="op" id="716769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="716773">//&nbsp;make&nbsp;unix&nbsp;tests&nbsp;work&nbsp;on&nbsp;windows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="716810">for</span>&nbsp;<span class="ident" id="716814">i</span>&nbsp;<span class="op" id="716816">:=</span>&nbsp;<span class="keyword" id="716819">range</span>&nbsp;<span class="ident" id="716825"><a href="/path/filepath/path_test.go.html#716721">tests</a></span>&nbsp;<span class="op" id="716831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="716836"><a href="/path/filepath/path_test.go.html#716721">tests</a></span><span class="op" id="716841">[</span><span class="ident" id="716842"><a href="/path/filepath/path_test.go.html#716814">i</a></span><span class="op" id="716843">]</span><span class="op" id="716844">.</span><span class="ident" id="716845">result</span>&nbsp;<span class="op" id="716852">=</span>&nbsp;<span class="ident" id="716854"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="716862">.</span><span class="ident" id="716863">Clean</span><span class="op" id="716868">(</span><span class="ident" id="716869"><a href="/path/filepath/path_test.go.html#716721">tests</a></span><span class="op" id="716874">[</span><span class="ident" id="716875"><a href="/path/filepath/path_test.go.html#716814">i</a></span><span class="op" id="716876">]</span><span class="op" id="716877">.</span><span class="ident" id="716878">result</span><span class="op" id="716884">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="716892">//&nbsp;add&nbsp;windows&nbsp;specific&nbsp;tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="716924"><a href="/path/filepath/path_test.go.html#716721">tests</a></span>&nbsp;<span class="op" id="716930">=</span>&nbsp;<span class="builtinfunc" id="716932">append</span><span class="op" id="716938">(</span><span class="ident" id="716939"><a href="/path/filepath/path_test.go.html#716721">tests</a></span><span class="op" id="716944">,</span>&nbsp;<span class="ident" id="716946"><a href="/path/filepath/path_test.go.html#716449">windirtests</a></span><span class="op" id="716957">...</span><span class="op" id="716960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="716963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="716966">for</span>&nbsp;<span class="ident" id="716970">_</span><span class="op" id="716971">,</span>&nbsp;<span class="ident" id="716973">test</span>&nbsp;<span class="op" id="716978">:=</span>&nbsp;<span class="keyword" id="716981">range</span>&nbsp;<span class="ident" id="716987"><a href="/path/filepath/path_test.go.html#716721">tests</a></span>&nbsp;<span class="op" id="716993">{</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="716997">if</span>&nbsp;<span class="ident" id="717000">s</span>&nbsp;<span class="op" id="717002">:=</span>&nbsp;<span class="ident" id="717005"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="717013">.</span><span class="ident" id="717014">Dir</span><span class="op" id="717017">(</span><span class="ident" id="717018"><a href="/path/filepath/path_test.go.html#716973">test</a></span><span class="op" id="717022">.</span><span class="ident" id="717023">path</span><span class="op" id="717027">)</span><span class="op" id="717028">;</span>&nbsp;<span class="ident" id="717030"><a href="/path/filepath/path_test.go.html#717000">s</a></span>&nbsp;<span class="op" id="717032">!=</span>&nbsp;<span class="ident" id="717035"><a href="/path/filepath/path_test.go.html#716973">test</a></span><span class="op" id="717039">.</span><span class="ident" id="717040">result</span>&nbsp;<span class="op" id="717047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="717052"><a href="/path/filepath/path_test.go.html#716704">t</a></span><span class="op" id="717053">.</span><span class="ident" id="717054">Errorf</span><span class="op" id="717060">(</span><span class="string" id="717061">&#34;Dir(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="717084">,</span>&nbsp;<span class="ident" id="717086"><a href="/path/filepath/path_test.go.html#716973">test</a></span><span class="op" id="717090">.</span><span class="ident" id="717091">path</span><span class="op" id="717095">,</span>&nbsp;<span class="ident" id="717097"><a href="/path/filepath/path_test.go.html#717000">s</a></span><span class="op" id="717098">,</span>&nbsp;<span class="ident" id="717100"><a href="/path/filepath/path_test.go.html#716973">test</a></span><span class="op" id="717104">.</span><span class="ident" id="717105">result</span><span class="op" id="717111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717118">}</span><br>
<span class="lineno"></span><span class="op" id="717120">}</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span><span class="keyword" id="717123">type</span>&nbsp;<span class="ident" id="717128">IsAbsTest</span>&nbsp;<span class="keyword" id="717138">struct</span>&nbsp;<span class="op" id="717145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="717148">path</span>&nbsp;&nbsp;<span class="builtintype" id="717154">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="717162">isAbs</span>&nbsp;<span class="builtintype" id="717168">bool</span><br>
<span class="lineno"></span><span class="op" id="717173">}</span><br>
<span class="lineno">610</span><br>
<span class="lineno"></span><span class="keyword" id="717176">var</span>&nbsp;<span class="ident" id="717180">isabstests</span>&nbsp;<span class="op" id="717191">=</span>&nbsp;<span class="op" id="717193">[</span><span class="op" id="717194">]</span><span class="ident" id="717195"><a href="/path/filepath/path_test.go.html#717128">IsAbsTest</a></span><span class="op" id="717204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717207">{</span><span class="string" id="717208">&#34;&#34;</span><span class="op" id="717210">,</span>&nbsp;<span class="ident" id="717212">false</span><span class="op" id="717217">}</span><span class="op" id="717218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717221">{</span><span class="string" id="717222">&#34;/&#34;</span><span class="op" id="717225">,</span>&nbsp;<span class="ident" id="717227">true</span><span class="op" id="717231">}</span><span class="op" id="717232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717235">{</span><span class="string" id="717236">&#34;/usr/bin/gcc&#34;</span><span class="op" id="717250">,</span>&nbsp;<span class="ident" id="717252">true</span><span class="op" id="717256">}</span><span class="op" id="717257">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717260">{</span><span class="string" id="717261">&#34;..&#34;</span><span class="op" id="717265">,</span>&nbsp;<span class="ident" id="717267">false</span><span class="op" id="717272">}</span><span class="op" id="717273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717276">{</span><span class="string" id="717277">&#34;/a/../bb&#34;</span><span class="op" id="717287">,</span>&nbsp;<span class="ident" id="717289">true</span><span class="op" id="717293">}</span><span class="op" id="717294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717297">{</span><span class="string" id="717298">&#34;.&#34;</span><span class="op" id="717301">,</span>&nbsp;<span class="ident" id="717303">false</span><span class="op" id="717308">}</span><span class="op" id="717309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717312">{</span><span class="string" id="717313">&#34;./&#34;</span><span class="op" id="717317">,</span>&nbsp;<span class="ident" id="717319">false</span><span class="op" id="717324">}</span><span class="op" id="717325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717328">{</span><span class="string" id="717329">&#34;lala&#34;</span><span class="op" id="717335">,</span>&nbsp;<span class="ident" id="717337">false</span><span class="op" id="717342">}</span><span class="op" id="717343">,</span><br>
<span class="lineno">620</span><span class="op" id="717345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="717348">var</span>&nbsp;<span class="ident" id="717352">winisabstests</span>&nbsp;<span class="op" id="717366">=</span>&nbsp;<span class="op" id="717368">[</span><span class="op" id="717369">]</span><span class="ident" id="717370"><a href="/path/filepath/path_test.go.html#717128">IsAbsTest</a></span><span class="op" id="717379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717382">{</span><span class="string" id="717383">`C:\`</span><span class="op" id="717388">,</span>&nbsp;<span class="ident" id="717390">true</span><span class="op" id="717394">}</span><span class="op" id="717395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717398">{</span><span class="string" id="717399">`c\`</span><span class="op" id="717403">,</span>&nbsp;<span class="ident" id="717405">false</span><span class="op" id="717410">}</span><span class="op" id="717411">,</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717414">{</span><span class="string" id="717415">`c::`</span><span class="op" id="717420">,</span>&nbsp;<span class="ident" id="717422">false</span><span class="op" id="717427">}</span><span class="op" id="717428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717431">{</span><span class="string" id="717432">`c:`</span><span class="op" id="717436">,</span>&nbsp;<span class="ident" id="717438">false</span><span class="op" id="717443">}</span><span class="op" id="717444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717447">{</span><span class="string" id="717448">`/`</span><span class="op" id="717451">,</span>&nbsp;<span class="ident" id="717453">false</span><span class="op" id="717458">}</span><span class="op" id="717459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717462">{</span><span class="string" id="717463">`\`</span><span class="op" id="717466">,</span>&nbsp;<span class="ident" id="717468">false</span><span class="op" id="717473">}</span><span class="op" id="717474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717477">{</span><span class="string" id="717478">`\Windows`</span><span class="op" id="717488">,</span>&nbsp;<span class="ident" id="717490">false</span><span class="op" id="717495">}</span><span class="op" id="717496">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717499">{</span><span class="string" id="717500">`c:a\b`</span><span class="op" id="717507">,</span>&nbsp;<span class="ident" id="717509">false</span><span class="op" id="717514">}</span><span class="op" id="717515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717518">{</span><span class="string" id="717519">`c:\a\b`</span><span class="op" id="717527">,</span>&nbsp;<span class="ident" id="717529">true</span><span class="op" id="717533">}</span><span class="op" id="717534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717537">{</span><span class="string" id="717538">`c:/a/b`</span><span class="op" id="717546">,</span>&nbsp;<span class="ident" id="717548">true</span><span class="op" id="717552">}</span><span class="op" id="717553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717556">{</span><span class="string" id="717557">`\\host\share\foo`</span><span class="op" id="717575">,</span>&nbsp;<span class="ident" id="717577">true</span><span class="op" id="717581">}</span><span class="op" id="717582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717585">{</span><span class="string" id="717586">`//host/share/foo/bar`</span><span class="op" id="717608">,</span>&nbsp;<span class="ident" id="717610">true</span><span class="op" id="717614">}</span><span class="op" id="717615">,</span><br>
<span class="lineno">635</span><span class="op" id="717617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="717620">func</span>&nbsp;<span class="ident" id="717625">TestIsAbs</span><span class="op" id="717634">(</span><span class="ident" id="717635">t</span>&nbsp;<span class="op" id="717637">*</span><span class="ident" id="717638"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="717645">.</span><span class="ident" id="717646">T</span><span class="op" id="717647">)</span>&nbsp;<span class="op" id="717649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="717652">var</span>&nbsp;<span class="ident" id="717656">tests</span>&nbsp;<span class="op" id="717662">[</span><span class="op" id="717663">]</span><span class="ident" id="717664"><a href="/path/filepath/path_test.go.html#717128">IsAbsTest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="717675">if</span>&nbsp;<span class="ident" id="717678"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="717685">.</span><span class="ident" id="717686">GOOS</span>&nbsp;<span class="op" id="717691">==</span>&nbsp;<span class="string" id="717694">&#34;windows&#34;</span>&nbsp;<span class="op" id="717704">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="717708"><a href="/path/filepath/path_test.go.html#717656">tests</a></span>&nbsp;<span class="op" id="717714">=</span>&nbsp;<span class="builtinfunc" id="717716">append</span><span class="op" id="717722">(</span><span class="ident" id="717723"><a href="/path/filepath/path_test.go.html#717656">tests</a></span><span class="op" id="717728">,</span>&nbsp;<span class="ident" id="717730"><a href="/path/filepath/path_test.go.html#717352">winisabstests</a></span><span class="op" id="717743">...</span><span class="op" id="717746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="717750">//&nbsp;All&nbsp;non-windows&nbsp;tests&nbsp;should&nbsp;fail,&nbsp;because&nbsp;they&nbsp;have&nbsp;no&nbsp;volume&nbsp;letter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="717826">for</span>&nbsp;<span class="ident" id="717830">_</span><span class="op" id="717831">,</span>&nbsp;<span class="ident" id="717833">test</span>&nbsp;<span class="op" id="717838">:=</span>&nbsp;<span class="keyword" id="717841">range</span>&nbsp;<span class="ident" id="717847"><a href="/path/filepath/path_test.go.html#717180">isabstests</a></span>&nbsp;<span class="op" id="717858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="717863"><a href="/path/filepath/path_test.go.html#717656">tests</a></span>&nbsp;<span class="op" id="717869">=</span>&nbsp;<span class="builtinfunc" id="717871">append</span><span class="op" id="717877">(</span><span class="ident" id="717878"><a href="/path/filepath/path_test.go.html#717656">tests</a></span><span class="op" id="717883">,</span>&nbsp;<span class="ident" id="717885"><a href="/path/filepath/path_test.go.html#717128">IsAbsTest</a></span><span class="op" id="717894">{</span><span class="ident" id="717895"><a href="/path/filepath/path_test.go.html#717833">test</a></span><span class="op" id="717899">.</span><span class="ident" id="717900">path</span><span class="op" id="717904">,</span>&nbsp;<span class="ident" id="717906">false</span><span class="op" id="717911">}</span><span class="op" id="717912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="717916">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="717920">//&nbsp;All&nbsp;non-windows&nbsp;test&nbsp;should&nbsp;work&nbsp;as&nbsp;intended&nbsp;if&nbsp;prefixed&nbsp;with&nbsp;volume&nbsp;letter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="718002">for</span>&nbsp;<span class="ident" id="718006">_</span><span class="op" id="718007">,</span>&nbsp;<span class="ident" id="718009">test</span>&nbsp;<span class="op" id="718014">:=</span>&nbsp;<span class="keyword" id="718017">range</span>&nbsp;<span class="ident" id="718023"><a href="/path/filepath/path_test.go.html#717180">isabstests</a></span>&nbsp;<span class="op" id="718034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="718039"><a href="/path/filepath/path_test.go.html#717656">tests</a></span>&nbsp;<span class="op" id="718045">=</span>&nbsp;<span class="builtinfunc" id="718047">append</span><span class="op" id="718053">(</span><span class="ident" id="718054"><a href="/path/filepath/path_test.go.html#717656">tests</a></span><span class="op" id="718059">,</span>&nbsp;<span class="ident" id="718061"><a href="/path/filepath/path_test.go.html#717128">IsAbsTest</a></span><span class="op" id="718070">{</span><span class="string" id="718071">&#34;c:&#34;</span>&nbsp;<span class="op" id="718076">+</span>&nbsp;<span class="ident" id="718078"><a href="/path/filepath/path_test.go.html#718009">test</a></span><span class="op" id="718082">.</span><span class="ident" id="718083">path</span><span class="op" id="718087">,</span>&nbsp;<span class="ident" id="718089"><a href="/path/filepath/path_test.go.html#718009">test</a></span><span class="op" id="718093">.</span><span class="ident" id="718094">isAbs</span><span class="op" id="718099">}</span><span class="op" id="718100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718107">}</span>&nbsp;<span class="keyword" id="718109">else</span>&nbsp;<span class="op" id="718114">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="718118"><a href="/path/filepath/path_test.go.html#717656">tests</a></span>&nbsp;<span class="op" id="718124">=</span>&nbsp;<span class="ident" id="718126"><a href="/path/filepath/path_test.go.html#717180">isabstests</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="718142">for</span>&nbsp;<span class="ident" id="718146">_</span><span class="op" id="718147">,</span>&nbsp;<span class="ident" id="718149">test</span>&nbsp;<span class="op" id="718154">:=</span>&nbsp;<span class="keyword" id="718157">range</span>&nbsp;<span class="ident" id="718163"><a href="/path/filepath/path_test.go.html#717656">tests</a></span>&nbsp;<span class="op" id="718169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="718173">if</span>&nbsp;<span class="ident" id="718176">r</span>&nbsp;<span class="op" id="718178">:=</span>&nbsp;<span class="ident" id="718181"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="718189">.</span><span class="ident" id="718190">IsAbs</span><span class="op" id="718195">(</span><span class="ident" id="718196"><a href="/path/filepath/path_test.go.html#718149">test</a></span><span class="op" id="718200">.</span><span class="ident" id="718201">path</span><span class="op" id="718205">)</span><span class="op" id="718206">;</span>&nbsp;<span class="ident" id="718208"><a href="/path/filepath/path_test.go.html#718176">r</a></span>&nbsp;<span class="op" id="718210">!=</span>&nbsp;<span class="ident" id="718213"><a href="/path/filepath/path_test.go.html#718149">test</a></span><span class="op" id="718217">.</span><span class="ident" id="718218">isAbs</span>&nbsp;<span class="op" id="718224">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="718229"><a href="/path/filepath/path_test.go.html#717635">t</a></span><span class="op" id="718230">.</span><span class="ident" id="718231">Errorf</span><span class="op" id="718237">(</span><span class="string" id="718238">&#34;IsAbs(%q)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="718263">,</span>&nbsp;<span class="ident" id="718265"><a href="/path/filepath/path_test.go.html#718149">test</a></span><span class="op" id="718269">.</span><span class="ident" id="718270">path</span><span class="op" id="718274">,</span>&nbsp;<span class="ident" id="718276"><a href="/path/filepath/path_test.go.html#718176">r</a></span><span class="op" id="718277">,</span>&nbsp;<span class="ident" id="718279"><a href="/path/filepath/path_test.go.html#718149">test</a></span><span class="op" id="718283">.</span><span class="ident" id="718284">isAbs</span><span class="op" id="718289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718296">}</span><br>
<span class="lineno"></span><span class="op" id="718298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">660</span><span class="keyword" id="718301">type</span>&nbsp;<span class="ident" id="718306">EvalSymlinksTest</span>&nbsp;<span class="keyword" id="718323">struct</span>&nbsp;<span class="op" id="718330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="718333">//&nbsp;If&nbsp;dest&nbsp;is&nbsp;empty,&nbsp;the&nbsp;path&nbsp;is&nbsp;created;&nbsp;otherwise&nbsp;the&nbsp;dest&nbsp;is&nbsp;symlinked&nbsp;to&nbsp;the&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="718421">path</span><span class="op" id="718425">,</span>&nbsp;<span class="ident" id="718427">dest</span>&nbsp;<span class="builtintype" id="718432">string</span><br>
<span class="lineno"></span><span class="op" id="718439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">665</span><span class="keyword" id="718442">var</span>&nbsp;<span class="ident" id="718446">EvalSymlinksTestDirs</span>&nbsp;<span class="op" id="718467">=</span>&nbsp;<span class="op" id="718469">[</span><span class="op" id="718470">]</span><span class="ident" id="718471"><a href="/path/filepath/path_test.go.html#718306">EvalSymlinksTest</a></span><span class="op" id="718487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718490">{</span><span class="string" id="718491">&#34;test&#34;</span><span class="op" id="718497">,</span>&nbsp;<span class="string" id="718499">&#34;&#34;</span><span class="op" id="718501">}</span><span class="op" id="718502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718505">{</span><span class="string" id="718506">&#34;test/dir&#34;</span><span class="op" id="718516">,</span>&nbsp;<span class="string" id="718518">&#34;&#34;</span><span class="op" id="718520">}</span><span class="op" id="718521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718524">{</span><span class="string" id="718525">&#34;test/dir/link3&#34;</span><span class="op" id="718541">,</span>&nbsp;<span class="string" id="718543">&#34;../../&#34;</span><span class="op" id="718551">}</span><span class="op" id="718552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718555">{</span><span class="string" id="718556">&#34;test/link1&#34;</span><span class="op" id="718568">,</span>&nbsp;<span class="string" id="718570">&#34;../test&#34;</span><span class="op" id="718579">}</span><span class="op" id="718580">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718583">{</span><span class="string" id="718584">&#34;test/link2&#34;</span><span class="op" id="718596">,</span>&nbsp;<span class="string" id="718598">&#34;dir&#34;</span><span class="op" id="718603">}</span><span class="op" id="718604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718607">{</span><span class="string" id="718608">&#34;test/linkabs&#34;</span><span class="op" id="718622">,</span>&nbsp;<span class="string" id="718624">&#34;/&#34;</span><span class="op" id="718627">}</span><span class="op" id="718628">,</span><br>
<span class="lineno"></span><span class="op" id="718630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="718633">var</span>&nbsp;<span class="ident" id="718637">EvalSymlinksTests</span>&nbsp;<span class="op" id="718655">=</span>&nbsp;<span class="op" id="718657">[</span><span class="op" id="718658">]</span><span class="ident" id="718659"><a href="/path/filepath/path_test.go.html#718306">EvalSymlinksTest</a></span><span class="op" id="718675">{</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718678">{</span><span class="string" id="718679">&#34;test&#34;</span><span class="op" id="718685">,</span>&nbsp;<span class="string" id="718687">&#34;test&#34;</span><span class="op" id="718693">}</span><span class="op" id="718694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718697">{</span><span class="string" id="718698">&#34;test/dir&#34;</span><span class="op" id="718708">,</span>&nbsp;<span class="string" id="718710">&#34;test/dir&#34;</span><span class="op" id="718720">}</span><span class="op" id="718721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718724">{</span><span class="string" id="718725">&#34;test/dir/../..&#34;</span><span class="op" id="718741">,</span>&nbsp;<span class="string" id="718743">&#34;.&#34;</span><span class="op" id="718746">}</span><span class="op" id="718747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718750">{</span><span class="string" id="718751">&#34;test/link1&#34;</span><span class="op" id="718763">,</span>&nbsp;<span class="string" id="718765">&#34;test&#34;</span><span class="op" id="718771">}</span><span class="op" id="718772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718775">{</span><span class="string" id="718776">&#34;test/link2&#34;</span><span class="op" id="718788">,</span>&nbsp;<span class="string" id="718790">&#34;test/dir&#34;</span><span class="op" id="718800">}</span><span class="op" id="718801">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718804">{</span><span class="string" id="718805">&#34;test/link1/dir&#34;</span><span class="op" id="718821">,</span>&nbsp;<span class="string" id="718823">&#34;test/dir&#34;</span><span class="op" id="718833">}</span><span class="op" id="718834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718837">{</span><span class="string" id="718838">&#34;test/link2/..&#34;</span><span class="op" id="718853">,</span>&nbsp;<span class="string" id="718855">&#34;test&#34;</span><span class="op" id="718861">}</span><span class="op" id="718862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718865">{</span><span class="string" id="718866">&#34;test/dir/link3&#34;</span><span class="op" id="718882">,</span>&nbsp;<span class="string" id="718884">&#34;.&#34;</span><span class="op" id="718887">}</span><span class="op" id="718888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718891">{</span><span class="string" id="718892">&#34;test/link2/link3/test&#34;</span><span class="op" id="718915">,</span>&nbsp;<span class="string" id="718917">&#34;test&#34;</span><span class="op" id="718923">}</span><span class="op" id="718924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="718927">{</span><span class="string" id="718928">&#34;test/linkabs&#34;</span><span class="op" id="718942">,</span>&nbsp;<span class="string" id="718944">&#34;/&#34;</span><span class="op" id="718947">}</span><span class="op" id="718948">,</span><br>
<span class="lineno">685</span><span class="op" id="718950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="718953">var</span>&nbsp;<span class="ident" id="718957">EvalSymlinksAbsWindowsTests</span>&nbsp;<span class="op" id="718985">=</span>&nbsp;<span class="op" id="718987">[</span><span class="op" id="718988">]</span><span class="ident" id="718989"><a href="/path/filepath/path_test.go.html#718306">EvalSymlinksTest</a></span><span class="op" id="719005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="719008">{</span><span class="string" id="719009">`c:\`</span><span class="op" id="719014">,</span>&nbsp;<span class="string" id="719016">`c:\`</span><span class="op" id="719021">}</span><span class="op" id="719022">,</span><br>
<span class="lineno"></span><span class="op" id="719024">}</span><br>
<span class="lineno">690</span><br>
<span class="lineno"></span><span class="comment" id="719027">//&nbsp;simpleJoin&nbsp;builds&nbsp;a&nbsp;file&nbsp;name&nbsp;from&nbsp;the&nbsp;directory&nbsp;and&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="719089">//&nbsp;It&nbsp;does&nbsp;not&nbsp;use&nbsp;Join&nbsp;because&nbsp;we&nbsp;don&#39;t&nbsp;want&nbsp;&#34;..&#34;&nbsp;to&nbsp;be&nbsp;evaluated.</span><br>
<span class="lineno"></span><span class="keyword" id="719157">func</span>&nbsp;<span class="ident" id="719162">simpleJoin</span><span class="op" id="719172">(</span><span class="ident" id="719173">dir</span><span class="op" id="719176">,</span>&nbsp;<span class="ident" id="719178">path</span>&nbsp;<span class="builtintype" id="719183">string</span><span class="op" id="719189">)</span>&nbsp;<span class="builtintype" id="719191">string</span>&nbsp;<span class="op" id="719198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="719201">return</span>&nbsp;<span class="ident" id="719208"><a href="/path/filepath/path_test.go.html#719173">dir</a></span>&nbsp;<span class="op" id="719212">+</span>&nbsp;<span class="builtintype" id="719214">string</span><span class="op" id="719220">(</span><span class="ident" id="719221"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="719229">.</span><span class="ident" id="719230">Separator</span><span class="op" id="719239">)</span>&nbsp;<span class="op" id="719241">+</span>&nbsp;<span class="ident" id="719243"><a href="/path/filepath/path_test.go.html#719178">path</a></span><br>
<span class="lineno">695</span><span class="op" id="719248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="719251">func</span>&nbsp;<span class="ident" id="719256">TestEvalSymlinks</span><span class="op" id="719272">(</span><span class="ident" id="719273">t</span>&nbsp;<span class="op" id="719275">*</span><span class="ident" id="719276"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="719283">.</span><span class="ident" id="719284">T</span><span class="op" id="719285">)</span>&nbsp;<span class="op" id="719287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="719290">switch</span>&nbsp;<span class="ident" id="719297"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="719304">.</span><span class="ident" id="719305">GOOS</span>&nbsp;<span class="op" id="719310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="719313">case</span>&nbsp;<span class="string" id="719318">&#34;nacl&#34;</span><span class="op" id="719324">,</span>&nbsp;<span class="string" id="719326">&#34;plan9&#34;</span><span class="op" id="719333">:</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="719337"><a href="/path/filepath/path_test.go.html#719273">t</a></span><span class="op" id="719338">.</span><span class="ident" id="719339">Skipf</span><span class="op" id="719344">(</span><span class="string" id="719345">&#34;skipping&nbsp;on&nbsp;%s&#34;</span><span class="op" id="719361">,</span>&nbsp;<span class="ident" id="719363"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="719370">.</span><span class="ident" id="719371">GOOS</span><span class="op" id="719375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="719378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="719382">tmpDir</span><span class="op" id="719388">,</span>&nbsp;<span class="ident" id="719390">err</span>&nbsp;<span class="op" id="719394">:=</span>&nbsp;<span class="ident" id="719397"><a href="/path/filepath/path_test.go.html#703301">ioutil</a></span><span class="op" id="719403">.</span><span class="ident" id="719404">TempDir</span><span class="op" id="719411">(</span><span class="string" id="719412">&#34;&#34;</span><span class="op" id="719414">,</span>&nbsp;<span class="string" id="719416">&#34;evalsymlink&#34;</span><span class="op" id="719429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="719432">if</span>&nbsp;<span class="ident" id="719435"><a href="/path/filepath/path_test.go.html#719390">err</a></span>&nbsp;<span class="op" id="719439">!=</span>&nbsp;<span class="ident" id="719442">nil</span>&nbsp;<span class="op" id="719446">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="719450"><a href="/path/filepath/path_test.go.html#719273">t</a></span><span class="op" id="719451">.</span><span class="ident" id="719452">Fatal</span><span class="op" id="719457">(</span><span class="string" id="719458">&#34;creating&nbsp;temp&nbsp;dir:&#34;</span><span class="op" id="719478">,</span>&nbsp;<span class="ident" id="719480"><a href="/path/filepath/path_test.go.html#719390">err</a></span><span class="op" id="719483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="719486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="719489">defer</span>&nbsp;<span class="ident" id="719495"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="719497">.</span><span class="ident" id="719498">RemoveAll</span><span class="op" id="719507">(</span><span class="ident" id="719508"><a href="/path/filepath/path_test.go.html#719382">tmpDir</a></span><span class="op" id="719514">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="719518">//&nbsp;/tmp&nbsp;may&nbsp;itself&nbsp;be&nbsp;a&nbsp;symlink!&nbsp;Avoid&nbsp;the&nbsp;confusion,&nbsp;although</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="719582">//&nbsp;it&nbsp;means&nbsp;trusting&nbsp;the&nbsp;thing&nbsp;we&#39;re&nbsp;testing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="719629"><a href="/path/filepath/path_test.go.html#719382">tmpDir</a></span><span class="op" id="719635">,</span>&nbsp;<span class="ident" id="719637"><a href="/path/filepath/path_test.go.html#719390">err</a></span>&nbsp;<span class="op" id="719641">=</span>&nbsp;<span class="ident" id="719643"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="719651">.</span><span class="ident" id="719652">EvalSymlinks</span><span class="op" id="719664">(</span><span class="ident" id="719665"><a href="/path/filepath/path_test.go.html#719382">tmpDir</a></span><span class="op" id="719671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="719674">if</span>&nbsp;<span class="ident" id="719677"><a href="/path/filepath/path_test.go.html#719390">err</a></span>&nbsp;<span class="op" id="719681">!=</span>&nbsp;<span class="ident" id="719684">nil</span>&nbsp;<span class="op" id="719688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="719692"><a href="/path/filepath/path_test.go.html#719273">t</a></span><span class="op" id="719693">.</span><span class="ident" id="719694">Fatal</span><span class="op" id="719699">(</span><span class="string" id="719700">&#34;eval&nbsp;symlink&nbsp;for&nbsp;tmp&nbsp;dir:&#34;</span><span class="op" id="719727">,</span>&nbsp;<span class="ident" id="719729"><a href="/path/filepath/path_test.go.html#719390">err</a></span><span class="op" id="719732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="719735">}</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="719739">//&nbsp;Create&nbsp;the&nbsp;symlink&nbsp;farm&nbsp;using&nbsp;relative&nbsp;paths.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="719789">for</span>&nbsp;<span class="ident" id="719793">_</span><span class="op" id="719794">,</span>&nbsp;<span class="ident" id="719796">d</span>&nbsp;<span class="op" id="719798">:=</span>&nbsp;<span class="keyword" id="719801">range</span>&nbsp;<span class="ident" id="719807"><a href="/path/filepath/path_test.go.html#718446">EvalSymlinksTestDirs</a></span>&nbsp;<span class="op" id="719828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="719832">var</span>&nbsp;<span class="ident" id="719836">err</span>&nbsp;<span class="builtintype" id="719840">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="719848">path</span>&nbsp;<span class="op" id="719853">:=</span>&nbsp;<span class="ident" id="719856"><a href="/path/filepath/path_test.go.html#719162">simpleJoin</a></span><span class="op" id="719866">(</span><span class="ident" id="719867"><a href="/path/filepath/path_test.go.html#719382">tmpDir</a></span><span class="op" id="719873">,</span>&nbsp;<span class="ident" id="719875"><a href="/path/filepath/path_test.go.html#719796">d</a></span><span class="op" id="719876">.</span><span class="ident" id="719877">path</span><span class="op" id="719881">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="719885">if</span>&nbsp;<span class="ident" id="719888"><a href="/path/filepath/path_test.go.html#719796">d</a></span><span class="op" id="719889">.</span><span class="ident" id="719890">dest</span>&nbsp;<span class="op" id="719895">==</span>&nbsp;<span class="string" id="719898">&#34;&#34;</span>&nbsp;<span class="op" id="719901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="719906"><a href="/path/filepath/path_test.go.html#719836">err</a></span>&nbsp;<span class="op" id="719910">=</span>&nbsp;<span class="ident" id="719912"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="719914">.</span><span class="ident" id="719915">Mkdir</span><span class="op" id="719920">(</span><span class="ident" id="719921"><a href="/path/filepath/path_test.go.html#719848">path</a></span><span class="op" id="719925">,</span>&nbsp;<span class="num" id="719927">0755</span><span class="op" id="719931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="719935">}</span>&nbsp;<span class="keyword" id="719937">else</span>&nbsp;<span class="op" id="719942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="719947">if</span>&nbsp;<span class="ident" id="719950"><a href="/path/filepath/path_test.go.html#703387">supportsSymlinks</a></span>&nbsp;<span class="op" id="719967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="719973"><a href="/path/filepath/path_test.go.html#719836">err</a></span>&nbsp;<span class="op" id="719977">=</span>&nbsp;<span class="ident" id="719979"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="719981">.</span><span class="ident" id="719982">Symlink</span><span class="op" id="719989">(</span><span class="ident" id="719990"><a href="/path/filepath/path_test.go.html#719796">d</a></span><span class="op" id="719991">.</span><span class="ident" id="719992">dest</span><span class="op" id="719996">,</span>&nbsp;<span class="ident" id="719998"><a href="/path/filepath/path_test.go.html#719848">path</a></span><span class="op" id="720002">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="720015">if</span>&nbsp;<span class="ident" id="720018"><a href="/path/filepath/path_test.go.html#719836">err</a></span>&nbsp;<span class="op" id="720022">!=</span>&nbsp;<span class="ident" id="720025">nil</span>&nbsp;<span class="op" id="720029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="720034"><a href="/path/filepath/path_test.go.html#719273">t</a></span><span class="op" id="720035">.</span><span class="ident" id="720036">Fatal</span><span class="op" id="720041">(</span><span class="ident" id="720042"><a href="/path/filepath/path_test.go.html#719836">err</a></span><span class="op" id="720045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720049">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="720056">var</span>&nbsp;<span class="ident" id="720060">tests</span>&nbsp;<span class="op" id="720066">[</span><span class="op" id="720067">]</span><span class="ident" id="720068"><a href="/path/filepath/path_test.go.html#718306">EvalSymlinksTest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="720086">if</span>&nbsp;<span class="ident" id="720089"><a href="/path/filepath/path_test.go.html#703387">supportsSymlinks</a></span>&nbsp;<span class="op" id="720106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="720110"><a href="/path/filepath/path_test.go.html#720060">tests</a></span>&nbsp;<span class="op" id="720116">=</span>&nbsp;<span class="ident" id="720118"><a href="/path/filepath/path_test.go.html#718637">EvalSymlinksTests</a></span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720137">}</span>&nbsp;<span class="keyword" id="720139">else</span>&nbsp;<span class="op" id="720144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="720148">for</span>&nbsp;<span class="ident" id="720152">_</span><span class="op" id="720153">,</span>&nbsp;<span class="ident" id="720155">d</span>&nbsp;<span class="op" id="720157">:=</span>&nbsp;<span class="keyword" id="720160">range</span>&nbsp;<span class="ident" id="720166"><a href="/path/filepath/path_test.go.html#718637">EvalSymlinksTests</a></span>&nbsp;<span class="op" id="720184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="720189">if</span>&nbsp;<span class="ident" id="720192"><a href="/path/filepath/path_test.go.html#720155">d</a></span><span class="op" id="720193">.</span><span class="ident" id="720194">path</span>&nbsp;<span class="op" id="720199">==</span>&nbsp;<span class="ident" id="720202"><a href="/path/filepath/path_test.go.html#720155">d</a></span><span class="op" id="720203">.</span><span class="ident" id="720204">dest</span>&nbsp;<span class="op" id="720209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="720215">//&nbsp;will&nbsp;test&nbsp;only&nbsp;real&nbsp;files&nbsp;and&nbsp;directories</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="720264"><a href="/path/filepath/path_test.go.html#720060">tests</a></span>&nbsp;<span class="op" id="720270">=</span>&nbsp;<span class="builtinfunc" id="720272">append</span><span class="op" id="720278">(</span><span class="ident" id="720279"><a href="/path/filepath/path_test.go.html#720060">tests</a></span><span class="op" id="720284">,</span>&nbsp;<span class="ident" id="720286"><a href="/path/filepath/path_test.go.html#720155">d</a></span><span class="op" id="720287">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="720293">//&nbsp;test&nbsp;&#34;canonical&#34;&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="720323">d2</span>&nbsp;<span class="op" id="720326">:=</span>&nbsp;<span class="ident" id="720329"><a href="/path/filepath/path_test.go.html#718306">EvalSymlinksTest</a></span><span class="op" id="720345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="720352">path</span><span class="op" id="720356">:</span>&nbsp;<span class="ident" id="720358"><a href="/path/filepath/path_test.go.html#703359">strings</a></span><span class="op" id="720365">.</span><span class="ident" id="720366">ToUpper</span><span class="op" id="720373">(</span><span class="ident" id="720374"><a href="/path/filepath/path_test.go.html#720155">d</a></span><span class="op" id="720375">.</span><span class="ident" id="720376">path</span><span class="op" id="720380">)</span><span class="op" id="720381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="720388">dest</span><span class="op" id="720392">:</span>&nbsp;<span class="ident" id="720394"><a href="/path/filepath/path_test.go.html#720155">d</a></span><span class="op" id="720395">.</span><span class="ident" id="720396">dest</span><span class="op" id="720400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720406">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="720412"><a href="/path/filepath/path_test.go.html#720060">tests</a></span>&nbsp;<span class="op" id="720418">=</span>&nbsp;<span class="builtinfunc" id="720420">append</span><span class="op" id="720426">(</span><span class="ident" id="720427"><a href="/path/filepath/path_test.go.html#720060">tests</a></span><span class="op" id="720432">,</span>&nbsp;<span class="ident" id="720434"><a href="/path/filepath/path_test.go.html#720323">d2</a></span><span class="op" id="720436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="720452">//&nbsp;Evaluate&nbsp;the&nbsp;symlink&nbsp;farm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="720483">for</span>&nbsp;<span class="ident" id="720487">_</span><span class="op" id="720488">,</span>&nbsp;<span class="ident" id="720490">d</span>&nbsp;<span class="op" id="720492">:=</span>&nbsp;<span class="keyword" id="720495">range</span>&nbsp;<span class="ident" id="720501"><a href="/path/filepath/path_test.go.html#720060">tests</a></span>&nbsp;<span class="op" id="720507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="720511">path</span>&nbsp;<span class="op" id="720516">:=</span>&nbsp;<span class="ident" id="720519"><a href="/path/filepath/path_test.go.html#719162">simpleJoin</a></span><span class="op" id="720529">(</span><span class="ident" id="720530"><a href="/path/filepath/path_test.go.html#719382">tmpDir</a></span><span class="op" id="720536">,</span>&nbsp;<span class="ident" id="720538"><a href="/path/filepath/path_test.go.html#720490">d</a></span><span class="op" id="720539">.</span><span class="ident" id="720540">path</span><span class="op" id="720544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="720548">dest</span>&nbsp;<span class="op" id="720553">:=</span>&nbsp;<span class="ident" id="720556"><a href="/path/filepath/path_test.go.html#719162">simpleJoin</a></span><span class="op" id="720566">(</span><span class="ident" id="720567"><a href="/path/filepath/path_test.go.html#719382">tmpDir</a></span><span class="op" id="720573">,</span>&nbsp;<span class="ident" id="720575"><a href="/path/filepath/path_test.go.html#720490">d</a></span><span class="op" id="720576">.</span><span class="ident" id="720577">dest</span><span class="op" id="720581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="720585">if</span>&nbsp;<span class="ident" id="720588"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="720596">.</span><span class="ident" id="720597">IsAbs</span><span class="op" id="720602">(</span><span class="ident" id="720603"><a href="/path/filepath/path_test.go.html#720490">d</a></span><span class="op" id="720604">.</span><span class="ident" id="720605">dest</span><span class="op" id="720609">)</span>&nbsp;<span class="op" id="720611">||</span>&nbsp;<span class="ident" id="720614"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="720616">.</span><span class="ident" id="720617">IsPathSeparator</span><span class="op" id="720632">(</span><span class="ident" id="720633"><a href="/path/filepath/path_test.go.html#720490">d</a></span><span class="op" id="720634">.</span><span class="ident" id="720635">dest</span><span class="op" id="720639">[</span><span class="num" id="720640">0</span><span class="op" id="720641">]</span><span class="op" id="720642">)</span>&nbsp;<span class="op" id="720644">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="720649"><a href="/path/filepath/path_test.go.html#720548">dest</a></span>&nbsp;<span class="op" id="720654">=</span>&nbsp;<span class="ident" id="720656"><a href="/path/filepath/path_test.go.html#720490">d</a></span><span class="op" id="720657">.</span><span class="ident" id="720658">dest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="720669">if</span>&nbsp;<span class="ident" id="720672">p</span><span class="op" id="720673">,</span>&nbsp;<span class="ident" id="720675">err</span>&nbsp;<span class="op" id="720679">:=</span>&nbsp;<span class="ident" id="720682"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="720690">.</span><span class="ident" id="720691">EvalSymlinks</span><span class="op" id="720703">(</span><span class="ident" id="720704"><a href="/path/filepath/path_test.go.html#720511">path</a></span><span class="op" id="720708">)</span><span class="op" id="720709">;</span>&nbsp;<span class="ident" id="720711"><a href="/path/filepath/path_test.go.html#720675">err</a></span>&nbsp;<span class="op" id="720715">!=</span>&nbsp;<span class="ident" id="720718">nil</span>&nbsp;<span class="op" id="720722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="720727"><a href="/path/filepath/path_test.go.html#719273">t</a></span><span class="op" id="720728">.</span><span class="ident" id="720729">Errorf</span><span class="op" id="720735">(</span><span class="string" id="720736">&#34;EvalSymlinks(%q)&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="720764">,</span>&nbsp;<span class="ident" id="720766"><a href="/path/filepath/path_test.go.html#720490">d</a></span><span class="op" id="720767">.</span><span class="ident" id="720768">path</span><span class="op" id="720772">,</span>&nbsp;<span class="ident" id="720774"><a href="/path/filepath/path_test.go.html#720675">err</a></span><span class="op" id="720777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720781">}</span>&nbsp;<span class="keyword" id="720783">else</span>&nbsp;<span class="keyword" id="720788">if</span>&nbsp;<span class="ident" id="720791"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="720799">.</span><span class="ident" id="720800">Clean</span><span class="op" id="720805">(</span><span class="ident" id="720806"><a href="/path/filepath/path_test.go.html#720672">p</a></span><span class="op" id="720807">)</span>&nbsp;<span class="op" id="720809">!=</span>&nbsp;<span class="ident" id="720812"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="720820">.</span><span class="ident" id="720821">Clean</span><span class="op" id="720826">(</span><span class="ident" id="720827"><a href="/path/filepath/path_test.go.html#720548">dest</a></span><span class="op" id="720831">)</span>&nbsp;<span class="op" id="720833">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="720838"><a href="/path/filepath/path_test.go.html#719273">t</a></span><span class="op" id="720839">.</span><span class="ident" id="720840">Errorf</span><span class="op" id="720846">(</span><span class="string" id="720847">&#34;Clean(%q)=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="720870">,</span>&nbsp;<span class="ident" id="720872"><a href="/path/filepath/path_test.go.html#720511">path</a></span><span class="op" id="720876">,</span>&nbsp;<span class="ident" id="720878"><a href="/path/filepath/path_test.go.html#720672">p</a></span><span class="op" id="720879">,</span>&nbsp;<span class="ident" id="720881"><a href="/path/filepath/path_test.go.html#720548">dest</a></span><span class="op" id="720885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="720892">}</span><br>
<span class="lineno"></span><span class="op" id="720894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">765</span><span class="comment" id="720897">//&nbsp;Test&nbsp;directories&nbsp;relative&nbsp;to&nbsp;temporary&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="720950">//&nbsp;The&nbsp;tests&nbsp;are&nbsp;run&nbsp;in&nbsp;absTestDirs[0].</span><br>
<span class="lineno"></span><span class="keyword" id="720990">var</span>&nbsp;<span class="ident" id="720994">absTestDirs</span>&nbsp;<span class="op" id="721006">=</span>&nbsp;<span class="op" id="721008">[</span><span class="op" id="721009">]</span><span class="builtintype" id="721010">string</span><span class="op" id="721016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="721019">&#34;a&#34;</span><span class="op" id="721022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="721025">&#34;a/b&#34;</span><span class="op" id="721030">,</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="721033">&#34;a/b/c&#34;</span><span class="op" id="721040">,</span><br>
<span class="lineno"></span><span class="op" id="721042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="721045">//&nbsp;Test&nbsp;paths&nbsp;relative&nbsp;to&nbsp;temporary&nbsp;directory.&nbsp;$&nbsp;expands&nbsp;to&nbsp;the&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="721120">//&nbsp;The&nbsp;tests&nbsp;are&nbsp;run&nbsp;in&nbsp;absTestDirs[0].</span><br>
<span class="lineno">775</span><span class="comment" id="721160">//&nbsp;We&nbsp;create&nbsp;absTestDirs&nbsp;first.</span><br>
<span class="lineno"></span><span class="keyword" id="721192">var</span>&nbsp;<span class="ident" id="721196">absTests</span>&nbsp;<span class="op" id="721205">=</span>&nbsp;<span class="op" id="721207">[</span><span class="op" id="721208">]</span><span class="builtintype" id="721209">string</span><span class="op" id="721215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="721218">&#34;.&#34;</span><span class="op" id="721221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="721224">&#34;b&#34;</span><span class="op" id="721227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="721230">&#34;../a&#34;</span><span class="op" id="721236">,</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="721239">&#34;../a/b&#34;</span><span class="op" id="721247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="721250">&#34;../a/b/./c/../../.././a&#34;</span><span class="op" id="721275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="721278">&#34;$&#34;</span><span class="op" id="721281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="721284">&#34;$/.&#34;</span><span class="op" id="721289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="721292">&#34;$/a/../a/b&#34;</span><span class="op" id="721304">,</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="721307">&#34;$/a/b/c/../../.././a&#34;</span><span class="op" id="721329">,</span><br>
<span class="lineno"></span><span class="op" id="721331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="721334">func</span>&nbsp;<span class="ident" id="721339">TestAbs</span><span class="op" id="721346">(</span><span class="ident" id="721347">t</span>&nbsp;<span class="op" id="721349">*</span><span class="ident" id="721350"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="721357">.</span><span class="ident" id="721358">T</span><span class="op" id="721359">)</span>&nbsp;<span class="op" id="721361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="721364">root</span><span class="op" id="721368">,</span>&nbsp;<span class="ident" id="721370">err</span>&nbsp;<span class="op" id="721374">:=</span>&nbsp;<span class="ident" id="721377"><a href="/path/filepath/path_test.go.html#703301">ioutil</a></span><span class="op" id="721383">.</span><span class="ident" id="721384">TempDir</span><span class="op" id="721391">(</span><span class="string" id="721392">&#34;&#34;</span><span class="op" id="721394">,</span>&nbsp;<span class="string" id="721396">&#34;TestAbs&#34;</span><span class="op" id="721405">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="721408">if</span>&nbsp;<span class="ident" id="721411"><a href="/path/filepath/path_test.go.html#721370">err</a></span>&nbsp;<span class="op" id="721415">!=</span>&nbsp;<span class="ident" id="721418">nil</span>&nbsp;<span class="op" id="721422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="721426"><a href="/path/filepath/path_test.go.html#721347">t</a></span><span class="op" id="721427">.</span><span class="ident" id="721428">Fatal</span><span class="op" id="721433">(</span><span class="string" id="721434">&#34;TempDir&nbsp;failed:&nbsp;&#34;</span><span class="op" id="721452">,</span>&nbsp;<span class="ident" id="721454"><a href="/path/filepath/path_test.go.html#721370">err</a></span><span class="op" id="721457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="721460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="721463">defer</span>&nbsp;<span class="ident" id="721469"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="721471">.</span><span class="ident" id="721472">RemoveAll</span><span class="op" id="721481">(</span><span class="ident" id="721482"><a href="/path/filepath/path_test.go.html#721364">root</a></span><span class="op" id="721486">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="721490">wd</span><span class="op" id="721492">,</span>&nbsp;<span class="ident" id="721494"><a href="/path/filepath/path_test.go.html#721370">err</a></span>&nbsp;<span class="op" id="721498">:=</span>&nbsp;<span class="ident" id="721501"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="721503">.</span><span class="ident" id="721504">Getwd</span><span class="op" id="721509">(</span><span class="op" id="721510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="721513">if</span>&nbsp;<span class="ident" id="721516"><a href="/path/filepath/path_test.go.html#721370">err</a></span>&nbsp;<span class="op" id="721520">!=</span>&nbsp;<span class="ident" id="721523">nil</span>&nbsp;<span class="op" id="721527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="721531"><a href="/path/filepath/path_test.go.html#721347">t</a></span><span class="op" id="721532">.</span><span class="ident" id="721533">Fatal</span><span class="op" id="721538">(</span><span class="string" id="721539">&#34;getwd&nbsp;failed:&nbsp;&#34;</span><span class="op" id="721555">,</span>&nbsp;<span class="ident" id="721557"><a href="/path/filepath/path_test.go.html#721370">err</a></span><span class="op" id="721560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="721563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="721566"><a href="/path/filepath/path_test.go.html#721370">err</a></span>&nbsp;<span class="op" id="721570">=</span>&nbsp;<span class="ident" id="721572"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="721574">.</span><span class="ident" id="721575">Chdir</span><span class="op" id="721580">(</span><span class="ident" id="721581"><a href="/path/filepath/path_test.go.html#721364">root</a></span><span class="op" id="721585">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="721588">if</span>&nbsp;<span class="ident" id="721591"><a href="/path/filepath/path_test.go.html#721370">err</a></span>&nbsp;<span class="op" id="721595">!=</span>&nbsp;<span class="ident" id="721598">nil</span>&nbsp;<span class="op" id="721602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="721606"><a href="/path/filepath/path_test.go.html#721347">t</a></span><span class="op" id="721607">.</span><span class="ident" id="721608">Fatal</span><span class="op" id="721613">(</span><span class="string" id="721614">&#34;chdir&nbsp;failed:&nbsp;&#34;</span><span class="op" id="721630">,</span>&nbsp;<span class="ident" id="721632"><a href="/path/filepath/path_test.go.html#721370">err</a></span><span class="op" id="721635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="721638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="721641">defer</span>&nbsp;<span class="ident" id="721647"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="721649">.</span><span class="ident" id="721650">Chdir</span><span class="op" id="721655">(</span><span class="ident" id="721656"><a href="/path/filepath/path_test.go.html#721490">wd</a></span><span class="op" id="721658">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="721662">for</span>&nbsp;<span class="ident" id="721666">_</span><span class="op" id="721667">,</span>&nbsp;<span class="ident" id="721669">dir</span>&nbsp;<span class="op" id="721673">:=</span>&nbsp;<span class="keyword" id="721676">range</span>&nbsp;<span class="ident" id="721682"><a href="/path/filepath/path_test.go.html#720994">absTestDirs</a></span>&nbsp;<span class="op" id="721694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="721698"><a href="/path/filepath/path_test.go.html#721370">err</a></span>&nbsp;<span class="op" id="721702">=</span>&nbsp;<span class="ident" id="721704"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="721706">.</span><span class="ident" id="721707">Mkdir</span><span class="op" id="721712">(</span><span class="ident" id="721713"><a href="/path/filepath/path_test.go.html#721669">dir</a></span><span class="op" id="721716">,</span>&nbsp;<span class="num" id="721718">0777</span><span class="op" id="721722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="721726">if</span>&nbsp;<span class="ident" id="721729"><a href="/path/filepath/path_test.go.html#721370">err</a></span>&nbsp;<span class="op" id="721733">!=</span>&nbsp;<span class="ident" id="721736">nil</span>&nbsp;<span class="op" id="721740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="721745"><a href="/path/filepath/path_test.go.html#721347">t</a></span><span class="op" id="721746">.</span><span class="ident" id="721747">Fatal</span><span class="op" id="721752">(</span><span class="string" id="721753">&#34;Mkdir&nbsp;failed:&nbsp;&#34;</span><span class="op" id="721769">,</span>&nbsp;<span class="ident" id="721771"><a href="/path/filepath/path_test.go.html#721370">err</a></span><span class="op" id="721774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="721778">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="721781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="721785">if</span>&nbsp;<span class="ident" id="721788"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="721795">.</span><span class="ident" id="721796">GOOS</span>&nbsp;<span class="op" id="721801">==</span>&nbsp;<span class="string" id="721804">&#34;windows&#34;</span>&nbsp;<span class="op" id="721814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="721818">vol</span>&nbsp;<span class="op" id="721822">:=</span>&nbsp;<span class="ident" id="721825"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="721833">.</span><span class="ident" id="721834">VolumeName</span><span class="op" id="721844">(</span><span class="ident" id="721845"><a href="/path/filepath/path_test.go.html#721364">root</a></span><span class="op" id="721849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="721853">var</span>&nbsp;<span class="ident" id="721857">extra</span>&nbsp;<span class="op" id="721863">[</span><span class="op" id="721864">]</span><span class="builtintype" id="721865">string</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="721874">for</span>&nbsp;<span class="ident" id="721878">_</span><span class="op" id="721879">,</span>&nbsp;<span class="ident" id="721881">path</span>&nbsp;<span class="op" id="721886">:=</span>&nbsp;<span class="keyword" id="721889">range</span>&nbsp;<span class="ident" id="721895"><a href="/path/filepath/path_test.go.html#721196">absTests</a></span>&nbsp;<span class="op" id="721904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="721909">if</span>&nbsp;<span class="ident" id="721912"><a href="/path/filepath/path_test.go.html#703359">strings</a></span><span class="op" id="721919">.</span><span class="ident" id="721920">Index</span><span class="op" id="721925">(</span><span class="ident" id="721926"><a href="/path/filepath/path_test.go.html#721881">path</a></span><span class="op" id="721930">,</span>&nbsp;<span class="string" id="721932">&#34;$&#34;</span><span class="op" id="721935">)</span>&nbsp;<span class="op" id="721937">!=</span>&nbsp;<span class="op" id="721940">-</span><span class="num" id="721941">1</span>&nbsp;<span class="op" id="721943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="721949">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="721961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="721966"><a href="/path/filepath/path_test.go.html#721881">path</a></span>&nbsp;<span class="op" id="721971">=</span>&nbsp;<span class="ident" id="721973"><a href="/path/filepath/path_test.go.html#721818">vol</a></span>&nbsp;<span class="op" id="721977">+</span>&nbsp;<span class="ident" id="721979"><a href="/path/filepath/path_test.go.html#721881">path</a></span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="721987"><a href="/path/filepath/path_test.go.html#721857">extra</a></span>&nbsp;<span class="op" id="721993">=</span>&nbsp;<span class="builtinfunc" id="721995">append</span><span class="op" id="722001">(</span><span class="ident" id="722002"><a href="/path/filepath/path_test.go.html#721857">extra</a></span><span class="op" id="722007">,</span>&nbsp;<span class="ident" id="722009"><a href="/path/filepath/path_test.go.html#721881">path</a></span><span class="op" id="722013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722021"><a href="/path/filepath/path_test.go.html#721196">absTests</a></span>&nbsp;<span class="op" id="722030">=</span>&nbsp;<span class="builtinfunc" id="722032">append</span><span class="op" id="722038">(</span><span class="ident" id="722039"><a href="/path/filepath/path_test.go.html#721196">absTests</a></span><span class="op" id="722047">,</span>&nbsp;<span class="ident" id="722049"><a href="/path/filepath/path_test.go.html#721857">extra</a></span><span class="op" id="722054">...</span><span class="op" id="722057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722064"><a href="/path/filepath/path_test.go.html#721370">err</a></span>&nbsp;<span class="op" id="722068">=</span>&nbsp;<span class="ident" id="722070"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="722072">.</span><span class="ident" id="722073">Chdir</span><span class="op" id="722078">(</span><span class="ident" id="722079"><a href="/path/filepath/path_test.go.html#720994">absTestDirs</a></span><span class="op" id="722090">[</span><span class="num" id="722091">0</span><span class="op" id="722092">]</span><span class="op" id="722093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="722096">if</span>&nbsp;<span class="ident" id="722099"><a href="/path/filepath/path_test.go.html#721370">err</a></span>&nbsp;<span class="op" id="722103">!=</span>&nbsp;<span class="ident" id="722106">nil</span>&nbsp;<span class="op" id="722110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722114"><a href="/path/filepath/path_test.go.html#721347">t</a></span><span class="op" id="722115">.</span><span class="ident" id="722116">Fatal</span><span class="op" id="722121">(</span><span class="string" id="722122">&#34;chdir&nbsp;failed:&nbsp;&#34;</span><span class="op" id="722138">,</span>&nbsp;<span class="ident" id="722140"><a href="/path/filepath/path_test.go.html#721370">err</a></span><span class="op" id="722143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="722150">for</span>&nbsp;<span class="ident" id="722154">_</span><span class="op" id="722155">,</span>&nbsp;<span class="ident" id="722157">path</span>&nbsp;<span class="op" id="722162">:=</span>&nbsp;<span class="keyword" id="722165">range</span>&nbsp;<span class="ident" id="722171"><a href="/path/filepath/path_test.go.html#721196">absTests</a></span>&nbsp;<span class="op" id="722180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722184"><a href="/path/filepath/path_test.go.html#722157">path</a></span>&nbsp;<span class="op" id="722189">=</span>&nbsp;<span class="ident" id="722191"><a href="/path/filepath/path_test.go.html#703359">strings</a></span><span class="op" id="722198">.</span><span class="ident" id="722199">Replace</span><span class="op" id="722206">(</span><span class="ident" id="722207"><a href="/path/filepath/path_test.go.html#722157">path</a></span><span class="op" id="722211">,</span>&nbsp;<span class="string" id="722213">&#34;$&#34;</span><span class="op" id="722216">,</span>&nbsp;<span class="ident" id="722218"><a href="/path/filepath/path_test.go.html#721364">root</a></span><span class="op" id="722222">,</span>&nbsp;<span class="op" id="722224">-</span><span class="num" id="722225">1</span><span class="op" id="722226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722230">info</span><span class="op" id="722234">,</span>&nbsp;<span class="ident" id="722236">err</span>&nbsp;<span class="op" id="722240">:=</span>&nbsp;<span class="ident" id="722243"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="722245">.</span><span class="ident" id="722246">Stat</span><span class="op" id="722250">(</span><span class="ident" id="722251"><a href="/path/filepath/path_test.go.html#722157">path</a></span><span class="op" id="722255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="722259">if</span>&nbsp;<span class="ident" id="722262"><a href="/path/filepath/path_test.go.html#722236">err</a></span>&nbsp;<span class="op" id="722266">!=</span>&nbsp;<span class="ident" id="722269">nil</span>&nbsp;<span class="op" id="722273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722278"><a href="/path/filepath/path_test.go.html#721347">t</a></span><span class="op" id="722279">.</span><span class="ident" id="722280">Errorf</span><span class="op" id="722286">(</span><span class="string" id="722287">&#34;%s:&nbsp;%s&#34;</span><span class="op" id="722295">,</span>&nbsp;<span class="ident" id="722297"><a href="/path/filepath/path_test.go.html#722157">path</a></span><span class="op" id="722301">,</span>&nbsp;<span class="ident" id="722303"><a href="/path/filepath/path_test.go.html#722236">err</a></span><span class="op" id="722306">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="722311">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722327">abspath</span><span class="op" id="722334">,</span>&nbsp;<span class="ident" id="722336"><a href="/path/filepath/path_test.go.html#722236">err</a></span>&nbsp;<span class="op" id="722340">:=</span>&nbsp;<span class="ident" id="722343"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="722351">.</span><span class="ident" id="722352">Abs</span><span class="op" id="722355">(</span><span class="ident" id="722356"><a href="/path/filepath/path_test.go.html#722157">path</a></span><span class="op" id="722360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="722364">if</span>&nbsp;<span class="ident" id="722367"><a href="/path/filepath/path_test.go.html#722236">err</a></span>&nbsp;<span class="op" id="722371">!=</span>&nbsp;<span class="ident" id="722374">nil</span>&nbsp;<span class="op" id="722378">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722383"><a href="/path/filepath/path_test.go.html#721347">t</a></span><span class="op" id="722384">.</span><span class="ident" id="722385">Errorf</span><span class="op" id="722391">(</span><span class="string" id="722392">&#34;Abs(%q)&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="722411">,</span>&nbsp;<span class="ident" id="722413"><a href="/path/filepath/path_test.go.html#722157">path</a></span><span class="op" id="722417">,</span>&nbsp;<span class="ident" id="722419"><a href="/path/filepath/path_test.go.html#722236">err</a></span><span class="op" id="722422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="722427">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722442">absinfo</span><span class="op" id="722449">,</span>&nbsp;<span class="ident" id="722451"><a href="/path/filepath/path_test.go.html#722236">err</a></span>&nbsp;<span class="op" id="722455">:=</span>&nbsp;<span class="ident" id="722458"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="722460">.</span><span class="ident" id="722461">Stat</span><span class="op" id="722465">(</span><span class="ident" id="722466"><a href="/path/filepath/path_test.go.html#722327">abspath</a></span><span class="op" id="722473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="722477">if</span>&nbsp;<span class="ident" id="722480"><a href="/path/filepath/path_test.go.html#722236">err</a></span>&nbsp;<span class="op" id="722484">!=</span>&nbsp;<span class="ident" id="722487">nil</span>&nbsp;<span class="op" id="722491">||</span>&nbsp;<span class="op" id="722494">!</span><span class="ident" id="722495"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="722497">.</span><span class="ident" id="722498">SameFile</span><span class="op" id="722506">(</span><span class="ident" id="722507"><a href="/path/filepath/path_test.go.html#722442">absinfo</a></span><span class="op" id="722514">,</span>&nbsp;<span class="ident" id="722516"><a href="/path/filepath/path_test.go.html#722230">info</a></span><span class="op" id="722520">)</span>&nbsp;<span class="op" id="722522">{</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722527"><a href="/path/filepath/path_test.go.html#721347">t</a></span><span class="op" id="722528">.</span><span class="ident" id="722529">Errorf</span><span class="op" id="722535">(</span><span class="string" id="722536">&#34;Abs(%q)=%q,&nbsp;not&nbsp;the&nbsp;same&nbsp;file&#34;</span><span class="op" id="722567">,</span>&nbsp;<span class="ident" id="722569"><a href="/path/filepath/path_test.go.html#722157">path</a></span><span class="op" id="722573">,</span>&nbsp;<span class="ident" id="722575"><a href="/path/filepath/path_test.go.html#722327">abspath</a></span><span class="op" id="722582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="722590">if</span>&nbsp;<span class="op" id="722593">!</span><span class="ident" id="722594"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="722602">.</span><span class="ident" id="722603">IsAbs</span><span class="op" id="722608">(</span><span class="ident" id="722609"><a href="/path/filepath/path_test.go.html#722327">abspath</a></span><span class="op" id="722616">)</span>&nbsp;<span class="op" id="722618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722623"><a href="/path/filepath/path_test.go.html#721347">t</a></span><span class="op" id="722624">.</span><span class="ident" id="722625">Errorf</span><span class="op" id="722631">(</span><span class="string" id="722632">&#34;Abs(%q)=%q,&nbsp;not&nbsp;an&nbsp;absolute&nbsp;path&#34;</span><span class="op" id="722666">,</span>&nbsp;<span class="ident" id="722668"><a href="/path/filepath/path_test.go.html#722157">path</a></span><span class="op" id="722672">,</span>&nbsp;<span class="ident" id="722674"><a href="/path/filepath/path_test.go.html#722327">abspath</a></span><span class="op" id="722681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722685">}</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="722689">if</span>&nbsp;<span class="ident" id="722692"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="722700">.</span><span class="ident" id="722701">IsAbs</span><span class="op" id="722706">(</span><span class="ident" id="722707"><a href="/path/filepath/path_test.go.html#722157">path</a></span><span class="op" id="722711">)</span>&nbsp;<span class="op" id="722713">&amp;&amp;</span>&nbsp;<span class="ident" id="722716"><a href="/path/filepath/path_test.go.html#722327">abspath</a></span>&nbsp;<span class="op" id="722724">!=</span>&nbsp;<span class="ident" id="722727"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="722735">.</span><span class="ident" id="722736">Clean</span><span class="op" id="722741">(</span><span class="ident" id="722742"><a href="/path/filepath/path_test.go.html#722157">path</a></span><span class="op" id="722746">)</span>&nbsp;<span class="op" id="722748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722753"><a href="/path/filepath/path_test.go.html#721347">t</a></span><span class="op" id="722754">.</span><span class="ident" id="722755">Errorf</span><span class="op" id="722761">(</span><span class="string" id="722762">&#34;Abs(%q)=%q,&nbsp;isn&#39;t&nbsp;clean&#34;</span><span class="op" id="722787">,</span>&nbsp;<span class="ident" id="722789"><a href="/path/filepath/path_test.go.html#722157">path</a></span><span class="op" id="722793">,</span>&nbsp;<span class="ident" id="722795"><a href="/path/filepath/path_test.go.html#722327">abspath</a></span><span class="op" id="722802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722809">}</span><br>
<span class="lineno"></span><span class="op" id="722811">}</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span><span class="keyword" id="722814">type</span>&nbsp;<span class="ident" id="722819">RelTests</span>&nbsp;<span class="keyword" id="722828">struct</span>&nbsp;<span class="op" id="722835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="722838">root</span><span class="op" id="722842">,</span>&nbsp;<span class="ident" id="722844">path</span><span class="op" id="722848">,</span>&nbsp;<span class="ident" id="722850">want</span>&nbsp;<span class="builtintype" id="722855">string</span><br>
<span class="lineno"></span><span class="op" id="722862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">860</span><span class="keyword" id="722865">var</span>&nbsp;<span class="ident" id="722869">reltests</span>&nbsp;<span class="op" id="722878">=</span>&nbsp;<span class="op" id="722880">[</span><span class="op" id="722881">]</span><span class="ident" id="722882"><a href="/path/filepath/path_test.go.html#722819">RelTests</a></span><span class="op" id="722890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722893">{</span><span class="string" id="722894">&#34;a/b&#34;</span><span class="op" id="722899">,</span>&nbsp;<span class="string" id="722901">&#34;a/b&#34;</span><span class="op" id="722906">,</span>&nbsp;<span class="string" id="722908">&#34;.&#34;</span><span class="op" id="722911">}</span><span class="op" id="722912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722915">{</span><span class="string" id="722916">&#34;a/b/.&#34;</span><span class="op" id="722923">,</span>&nbsp;<span class="string" id="722925">&#34;a/b&#34;</span><span class="op" id="722930">,</span>&nbsp;<span class="string" id="722932">&#34;.&#34;</span><span class="op" id="722935">}</span><span class="op" id="722936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722939">{</span><span class="string" id="722940">&#34;a/b&#34;</span><span class="op" id="722945">,</span>&nbsp;<span class="string" id="722947">&#34;a/b/.&#34;</span><span class="op" id="722954">,</span>&nbsp;<span class="string" id="722956">&#34;.&#34;</span><span class="op" id="722959">}</span><span class="op" id="722960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722963">{</span><span class="string" id="722964">&#34;./a/b&#34;</span><span class="op" id="722971">,</span>&nbsp;<span class="string" id="722973">&#34;a/b&#34;</span><span class="op" id="722978">,</span>&nbsp;<span class="string" id="722980">&#34;.&#34;</span><span class="op" id="722983">}</span><span class="op" id="722984">,</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="722987">{</span><span class="string" id="722988">&#34;a/b&#34;</span><span class="op" id="722993">,</span>&nbsp;<span class="string" id="722995">&#34;./a/b&#34;</span><span class="op" id="723002">,</span>&nbsp;<span class="string" id="723004">&#34;.&#34;</span><span class="op" id="723007">}</span><span class="op" id="723008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723011">{</span><span class="string" id="723012">&#34;ab/cd&#34;</span><span class="op" id="723019">,</span>&nbsp;<span class="string" id="723021">&#34;ab/cde&#34;</span><span class="op" id="723029">,</span>&nbsp;<span class="string" id="723031">&#34;../cde&#34;</span><span class="op" id="723039">}</span><span class="op" id="723040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723043">{</span><span class="string" id="723044">&#34;ab/cd&#34;</span><span class="op" id="723051">,</span>&nbsp;<span class="string" id="723053">&#34;ab/c&#34;</span><span class="op" id="723059">,</span>&nbsp;<span class="string" id="723061">&#34;../c&#34;</span><span class="op" id="723067">}</span><span class="op" id="723068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723071">{</span><span class="string" id="723072">&#34;a/b&#34;</span><span class="op" id="723077">,</span>&nbsp;<span class="string" id="723079">&#34;a/b/c/d&#34;</span><span class="op" id="723088">,</span>&nbsp;<span class="string" id="723090">&#34;c/d&#34;</span><span class="op" id="723095">}</span><span class="op" id="723096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723099">{</span><span class="string" id="723100">&#34;a/b&#34;</span><span class="op" id="723105">,</span>&nbsp;<span class="string" id="723107">&#34;a/b/../c&#34;</span><span class="op" id="723117">,</span>&nbsp;<span class="string" id="723119">&#34;../c&#34;</span><span class="op" id="723125">}</span><span class="op" id="723126">,</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723129">{</span><span class="string" id="723130">&#34;a/b/../c&#34;</span><span class="op" id="723140">,</span>&nbsp;<span class="string" id="723142">&#34;a/b&#34;</span><span class="op" id="723147">,</span>&nbsp;<span class="string" id="723149">&#34;../b&#34;</span><span class="op" id="723155">}</span><span class="op" id="723156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723159">{</span><span class="string" id="723160">&#34;a/b/c&#34;</span><span class="op" id="723167">,</span>&nbsp;<span class="string" id="723169">&#34;a/c/d&#34;</span><span class="op" id="723176">,</span>&nbsp;<span class="string" id="723178">&#34;../../c/d&#34;</span><span class="op" id="723189">}</span><span class="op" id="723190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723193">{</span><span class="string" id="723194">&#34;a/b&#34;</span><span class="op" id="723199">,</span>&nbsp;<span class="string" id="723201">&#34;c/d&#34;</span><span class="op" id="723206">,</span>&nbsp;<span class="string" id="723208">&#34;../../c/d&#34;</span><span class="op" id="723219">}</span><span class="op" id="723220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723223">{</span><span class="string" id="723224">&#34;a/b/c/d&#34;</span><span class="op" id="723233">,</span>&nbsp;<span class="string" id="723235">&#34;a/b&#34;</span><span class="op" id="723240">,</span>&nbsp;<span class="string" id="723242">&#34;../..&#34;</span><span class="op" id="723249">}</span><span class="op" id="723250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723253">{</span><span class="string" id="723254">&#34;a/b/c/d&#34;</span><span class="op" id="723263">,</span>&nbsp;<span class="string" id="723265">&#34;a/b/&#34;</span><span class="op" id="723271">,</span>&nbsp;<span class="string" id="723273">&#34;../..&#34;</span><span class="op" id="723280">}</span><span class="op" id="723281">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723284">{</span><span class="string" id="723285">&#34;a/b/c/d/&#34;</span><span class="op" id="723295">,</span>&nbsp;<span class="string" id="723297">&#34;a/b&#34;</span><span class="op" id="723302">,</span>&nbsp;<span class="string" id="723304">&#34;../..&#34;</span><span class="op" id="723311">}</span><span class="op" id="723312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723315">{</span><span class="string" id="723316">&#34;a/b/c/d/&#34;</span><span class="op" id="723326">,</span>&nbsp;<span class="string" id="723328">&#34;a/b/&#34;</span><span class="op" id="723334">,</span>&nbsp;<span class="string" id="723336">&#34;../..&#34;</span><span class="op" id="723343">}</span><span class="op" id="723344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723347">{</span><span class="string" id="723348">&#34;../../a/b&#34;</span><span class="op" id="723359">,</span>&nbsp;<span class="string" id="723361">&#34;../../a/b/c/d&#34;</span><span class="op" id="723376">,</span>&nbsp;<span class="string" id="723378">&#34;c/d&#34;</span><span class="op" id="723383">}</span><span class="op" id="723384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723387">{</span><span class="string" id="723388">&#34;/a/b&#34;</span><span class="op" id="723394">,</span>&nbsp;<span class="string" id="723396">&#34;/a/b&#34;</span><span class="op" id="723402">,</span>&nbsp;<span class="string" id="723404">&#34;.&#34;</span><span class="op" id="723407">}</span><span class="op" id="723408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723411">{</span><span class="string" id="723412">&#34;/a/b/.&#34;</span><span class="op" id="723420">,</span>&nbsp;<span class="string" id="723422">&#34;/a/b&#34;</span><span class="op" id="723428">,</span>&nbsp;<span class="string" id="723430">&#34;.&#34;</span><span class="op" id="723433">}</span><span class="op" id="723434">,</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723437">{</span><span class="string" id="723438">&#34;/a/b&#34;</span><span class="op" id="723444">,</span>&nbsp;<span class="string" id="723446">&#34;/a/b/.&#34;</span><span class="op" id="723454">,</span>&nbsp;<span class="string" id="723456">&#34;.&#34;</span><span class="op" id="723459">}</span><span class="op" id="723460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723463">{</span><span class="string" id="723464">&#34;/ab/cd&#34;</span><span class="op" id="723472">,</span>&nbsp;<span class="string" id="723474">&#34;/ab/cde&#34;</span><span class="op" id="723483">,</span>&nbsp;<span class="string" id="723485">&#34;../cde&#34;</span><span class="op" id="723493">}</span><span class="op" id="723494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723497">{</span><span class="string" id="723498">&#34;/ab/cd&#34;</span><span class="op" id="723506">,</span>&nbsp;<span class="string" id="723508">&#34;/ab/c&#34;</span><span class="op" id="723515">,</span>&nbsp;<span class="string" id="723517">&#34;../c&#34;</span><span class="op" id="723523">}</span><span class="op" id="723524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723527">{</span><span class="string" id="723528">&#34;/a/b&#34;</span><span class="op" id="723534">,</span>&nbsp;<span class="string" id="723536">&#34;/a/b/c/d&#34;</span><span class="op" id="723546">,</span>&nbsp;<span class="string" id="723548">&#34;c/d&#34;</span><span class="op" id="723553">}</span><span class="op" id="723554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723557">{</span><span class="string" id="723558">&#34;/a/b&#34;</span><span class="op" id="723564">,</span>&nbsp;<span class="string" id="723566">&#34;/a/b/../c&#34;</span><span class="op" id="723577">,</span>&nbsp;<span class="string" id="723579">&#34;../c&#34;</span><span class="op" id="723585">}</span><span class="op" id="723586">,</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723589">{</span><span class="string" id="723590">&#34;/a/b/../c&#34;</span><span class="op" id="723601">,</span>&nbsp;<span class="string" id="723603">&#34;/a/b&#34;</span><span class="op" id="723609">,</span>&nbsp;<span class="string" id="723611">&#34;../b&#34;</span><span class="op" id="723617">}</span><span class="op" id="723618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723621">{</span><span class="string" id="723622">&#34;/a/b/c&#34;</span><span class="op" id="723630">,</span>&nbsp;<span class="string" id="723632">&#34;/a/c/d&#34;</span><span class="op" id="723640">,</span>&nbsp;<span class="string" id="723642">&#34;../../c/d&#34;</span><span class="op" id="723653">}</span><span class="op" id="723654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723657">{</span><span class="string" id="723658">&#34;/a/b&#34;</span><span class="op" id="723664">,</span>&nbsp;<span class="string" id="723666">&#34;/c/d&#34;</span><span class="op" id="723672">,</span>&nbsp;<span class="string" id="723674">&#34;../../c/d&#34;</span><span class="op" id="723685">}</span><span class="op" id="723686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723689">{</span><span class="string" id="723690">&#34;/a/b/c/d&#34;</span><span class="op" id="723700">,</span>&nbsp;<span class="string" id="723702">&#34;/a/b&#34;</span><span class="op" id="723708">,</span>&nbsp;<span class="string" id="723710">&#34;../..&#34;</span><span class="op" id="723717">}</span><span class="op" id="723718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723721">{</span><span class="string" id="723722">&#34;/a/b/c/d&#34;</span><span class="op" id="723732">,</span>&nbsp;<span class="string" id="723734">&#34;/a/b/&#34;</span><span class="op" id="723741">,</span>&nbsp;<span class="string" id="723743">&#34;../..&#34;</span><span class="op" id="723750">}</span><span class="op" id="723751">,</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723754">{</span><span class="string" id="723755">&#34;/a/b/c/d/&#34;</span><span class="op" id="723766">,</span>&nbsp;<span class="string" id="723768">&#34;/a/b&#34;</span><span class="op" id="723774">,</span>&nbsp;<span class="string" id="723776">&#34;../..&#34;</span><span class="op" id="723783">}</span><span class="op" id="723784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723787">{</span><span class="string" id="723788">&#34;/a/b/c/d/&#34;</span><span class="op" id="723799">,</span>&nbsp;<span class="string" id="723801">&#34;/a/b/&#34;</span><span class="op" id="723808">,</span>&nbsp;<span class="string" id="723810">&#34;../..&#34;</span><span class="op" id="723817">}</span><span class="op" id="723818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723821">{</span><span class="string" id="723822">&#34;/../../a/b&#34;</span><span class="op" id="723834">,</span>&nbsp;<span class="string" id="723836">&#34;/../../a/b/c/d&#34;</span><span class="op" id="723852">,</span>&nbsp;<span class="string" id="723854">&#34;c/d&#34;</span><span class="op" id="723859">}</span><span class="op" id="723860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723863">{</span><span class="string" id="723864">&#34;.&#34;</span><span class="op" id="723867">,</span>&nbsp;<span class="string" id="723869">&#34;a/b&#34;</span><span class="op" id="723874">,</span>&nbsp;<span class="string" id="723876">&#34;a/b&#34;</span><span class="op" id="723881">}</span><span class="op" id="723882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723885">{</span><span class="string" id="723886">&#34;.&#34;</span><span class="op" id="723889">,</span>&nbsp;<span class="string" id="723891">&#34;..&#34;</span><span class="op" id="723895">,</span>&nbsp;<span class="string" id="723897">&#34;..&#34;</span><span class="op" id="723901">}</span><span class="op" id="723902">,</span><br>
<span class="lineno">895</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="723906">//&nbsp;can&#39;t&nbsp;do&nbsp;purely&nbsp;lexically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723936">{</span><span class="string" id="723937">&#34;..&#34;</span><span class="op" id="723941">,</span>&nbsp;<span class="string" id="723943">&#34;.&#34;</span><span class="op" id="723946">,</span>&nbsp;<span class="string" id="723948">&#34;err&#34;</span><span class="op" id="723953">}</span><span class="op" id="723954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723957">{</span><span class="string" id="723958">&#34;..&#34;</span><span class="op" id="723962">,</span>&nbsp;<span class="string" id="723964">&#34;a&#34;</span><span class="op" id="723967">,</span>&nbsp;<span class="string" id="723969">&#34;err&#34;</span><span class="op" id="723974">}</span><span class="op" id="723975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="723978">{</span><span class="string" id="723979">&#34;../..&#34;</span><span class="op" id="723986">,</span>&nbsp;<span class="string" id="723988">&#34;..&#34;</span><span class="op" id="723992">,</span>&nbsp;<span class="string" id="723994">&#34;err&#34;</span><span class="op" id="723999">}</span><span class="op" id="724000">,</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724003">{</span><span class="string" id="724004">&#34;a&#34;</span><span class="op" id="724007">,</span>&nbsp;<span class="string" id="724009">&#34;/a&#34;</span><span class="op" id="724013">,</span>&nbsp;<span class="string" id="724015">&#34;err&#34;</span><span class="op" id="724020">}</span><span class="op" id="724021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724024">{</span><span class="string" id="724025">&#34;/a&#34;</span><span class="op" id="724029">,</span>&nbsp;<span class="string" id="724031">&#34;a&#34;</span><span class="op" id="724034">,</span>&nbsp;<span class="string" id="724036">&#34;err&#34;</span><span class="op" id="724041">}</span><span class="op" id="724042">,</span><br>
<span class="lineno"></span><span class="op" id="724044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="724047">var</span>&nbsp;<span class="ident" id="724051">winreltests</span>&nbsp;<span class="op" id="724063">=</span>&nbsp;<span class="op" id="724065">[</span><span class="op" id="724066">]</span><span class="ident" id="724067"><a href="/path/filepath/path_test.go.html#722819">RelTests</a></span><span class="op" id="724075">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724078">{</span><span class="string" id="724079">`C:a\b\c`</span><span class="op" id="724088">,</span>&nbsp;<span class="string" id="724090">`C:a/b/d`</span><span class="op" id="724099">,</span>&nbsp;<span class="string" id="724101">`..\d`</span><span class="op" id="724107">}</span><span class="op" id="724108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724111">{</span><span class="string" id="724112">`C:\`</span><span class="op" id="724117">,</span>&nbsp;<span class="string" id="724119">`D:\`</span><span class="op" id="724124">,</span>&nbsp;<span class="string" id="724126">`err`</span><span class="op" id="724131">}</span><span class="op" id="724132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724135">{</span><span class="string" id="724136">`C:`</span><span class="op" id="724140">,</span>&nbsp;<span class="string" id="724142">`D:`</span><span class="op" id="724146">,</span>&nbsp;<span class="string" id="724148">`err`</span><span class="op" id="724153">}</span><span class="op" id="724154">,</span><br>
<span class="lineno"></span><span class="op" id="724156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="724159">func</span>&nbsp;<span class="ident" id="724164">TestRel</span><span class="op" id="724171">(</span><span class="ident" id="724172">t</span>&nbsp;<span class="op" id="724174">*</span><span class="ident" id="724175"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="724182">.</span><span class="ident" id="724183">T</span><span class="op" id="724184">)</span>&nbsp;<span class="op" id="724186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="724189">tests</span>&nbsp;<span class="op" id="724195">:=</span>&nbsp;<span class="builtinfunc" id="724198">append</span><span class="op" id="724204">(</span><span class="op" id="724205">[</span><span class="op" id="724206">]</span><span class="ident" id="724207"><a href="/path/filepath/path_test.go.html#722819">RelTests</a></span><span class="op" id="724215">{</span><span class="op" id="724216">}</span><span class="op" id="724217">,</span>&nbsp;<span class="ident" id="724219"><a href="/path/filepath/path_test.go.html#722869">reltests</a></span><span class="op" id="724227">...</span><span class="op" id="724230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="724233">if</span>&nbsp;<span class="ident" id="724236"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="724243">.</span><span class="ident" id="724244">GOOS</span>&nbsp;<span class="op" id="724249">==</span>&nbsp;<span class="string" id="724252">&#34;windows&#34;</span>&nbsp;<span class="op" id="724262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="724266">for</span>&nbsp;<span class="ident" id="724270">i</span>&nbsp;<span class="op" id="724272">:=</span>&nbsp;<span class="keyword" id="724275">range</span>&nbsp;<span class="ident" id="724281"><a href="/path/filepath/path_test.go.html#724189">tests</a></span>&nbsp;<span class="op" id="724287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="724292"><a href="/path/filepath/path_test.go.html#724189">tests</a></span><span class="op" id="724297">[</span><span class="ident" id="724298"><a href="/path/filepath/path_test.go.html#724270">i</a></span><span class="op" id="724299">]</span><span class="op" id="724300">.</span><span class="ident" id="724301">want</span>&nbsp;<span class="op" id="724306">=</span>&nbsp;<span class="ident" id="724308"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="724316">.</span><span class="ident" id="724317">FromSlash</span><span class="op" id="724326">(</span><span class="ident" id="724327"><a href="/path/filepath/path_test.go.html#724189">tests</a></span><span class="op" id="724332">[</span><span class="ident" id="724333"><a href="/path/filepath/path_test.go.html#724270">i</a></span><span class="op" id="724334">]</span><span class="op" id="724335">.</span><span class="ident" id="724336">want</span><span class="op" id="724340">)</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="724348"><a href="/path/filepath/path_test.go.html#724189">tests</a></span>&nbsp;<span class="op" id="724354">=</span>&nbsp;<span class="builtinfunc" id="724356">append</span><span class="op" id="724362">(</span><span class="ident" id="724363"><a href="/path/filepath/path_test.go.html#724189">tests</a></span><span class="op" id="724368">,</span>&nbsp;<span class="ident" id="724370"><a href="/path/filepath/path_test.go.html#724051">winreltests</a></span><span class="op" id="724381">...</span><span class="op" id="724384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="724390">for</span>&nbsp;<span class="ident" id="724394">_</span><span class="op" id="724395">,</span>&nbsp;<span class="ident" id="724397">test</span>&nbsp;<span class="op" id="724402">:=</span>&nbsp;<span class="keyword" id="724405">range</span>&nbsp;<span class="ident" id="724411"><a href="/path/filepath/path_test.go.html#724189">tests</a></span>&nbsp;<span class="op" id="724417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="724421">got</span><span class="op" id="724424">,</span>&nbsp;<span class="ident" id="724426">err</span>&nbsp;<span class="op" id="724430">:=</span>&nbsp;<span class="ident" id="724433"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="724441">.</span><span class="ident" id="724442">Rel</span><span class="op" id="724445">(</span><span class="ident" id="724446"><a href="/path/filepath/path_test.go.html#724397">test</a></span><span class="op" id="724450">.</span><span class="ident" id="724451">root</span><span class="op" id="724455">,</span>&nbsp;<span class="ident" id="724457"><a href="/path/filepath/path_test.go.html#724397">test</a></span><span class="op" id="724461">.</span><span class="ident" id="724462">path</span><span class="op" id="724466">)</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="724470">if</span>&nbsp;<span class="ident" id="724473"><a href="/path/filepath/path_test.go.html#724397">test</a></span><span class="op" id="724477">.</span><span class="ident" id="724478">want</span>&nbsp;<span class="op" id="724483">==</span>&nbsp;<span class="string" id="724486">&#34;err&#34;</span>&nbsp;<span class="op" id="724492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="724497">if</span>&nbsp;<span class="ident" id="724500"><a href="/path/filepath/path_test.go.html#724426">err</a></span>&nbsp;<span class="op" id="724504">==</span>&nbsp;<span class="ident" id="724507">nil</span>&nbsp;<span class="op" id="724511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="724517"><a href="/path/filepath/path_test.go.html#724172">t</a></span><span class="op" id="724518">.</span><span class="ident" id="724519">Errorf</span><span class="op" id="724525">(</span><span class="string" id="724526">&#34;Rel(%q,&nbsp;%q)=%q,&nbsp;want&nbsp;error&#34;</span><span class="op" id="724554">,</span>&nbsp;<span class="ident" id="724556"><a href="/path/filepath/path_test.go.html#724397">test</a></span><span class="op" id="724560">.</span><span class="ident" id="724561">root</span><span class="op" id="724565">,</span>&nbsp;<span class="ident" id="724567"><a href="/path/filepath/path_test.go.html#724397">test</a></span><span class="op" id="724571">.</span><span class="ident" id="724572">path</span><span class="op" id="724576">,</span>&nbsp;<span class="ident" id="724578"><a href="/path/filepath/path_test.go.html#724421">got</a></span><span class="op" id="724581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="724591">continue</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="724606">if</span>&nbsp;<span class="ident" id="724609"><a href="/path/filepath/path_test.go.html#724426">err</a></span>&nbsp;<span class="op" id="724613">!=</span>&nbsp;<span class="ident" id="724616">nil</span>&nbsp;<span class="op" id="724620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="724625"><a href="/path/filepath/path_test.go.html#724172">t</a></span><span class="op" id="724626">.</span><span class="ident" id="724627">Errorf</span><span class="op" id="724633">(</span><span class="string" id="724634">&#34;Rel(%q,&nbsp;%q):&nbsp;want&nbsp;%q,&nbsp;got&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="724671">,</span>&nbsp;<span class="ident" id="724673"><a href="/path/filepath/path_test.go.html#724397">test</a></span><span class="op" id="724677">.</span><span class="ident" id="724678">root</span><span class="op" id="724682">,</span>&nbsp;<span class="ident" id="724684"><a href="/path/filepath/path_test.go.html#724397">test</a></span><span class="op" id="724688">.</span><span class="ident" id="724689">path</span><span class="op" id="724693">,</span>&nbsp;<span class="ident" id="724695"><a href="/path/filepath/path_test.go.html#724397">test</a></span><span class="op" id="724699">.</span><span class="ident" id="724700">want</span><span class="op" id="724704">,</span>&nbsp;<span class="ident" id="724706"><a href="/path/filepath/path_test.go.html#724426">err</a></span><span class="op" id="724709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="724717">if</span>&nbsp;<span class="ident" id="724720"><a href="/path/filepath/path_test.go.html#724421">got</a></span>&nbsp;<span class="op" id="724724">!=</span>&nbsp;<span class="ident" id="724727"><a href="/path/filepath/path_test.go.html#724397">test</a></span><span class="op" id="724731">.</span><span class="ident" id="724732">want</span>&nbsp;<span class="op" id="724737">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="724742"><a href="/path/filepath/path_test.go.html#724172">t</a></span><span class="op" id="724743">.</span><span class="ident" id="724744">Errorf</span><span class="op" id="724750">(</span><span class="string" id="724751">&#34;Rel(%q,&nbsp;%q)=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="724776">,</span>&nbsp;<span class="ident" id="724778"><a href="/path/filepath/path_test.go.html#724397">test</a></span><span class="op" id="724782">.</span><span class="ident" id="724783">root</span><span class="op" id="724787">,</span>&nbsp;<span class="ident" id="724789"><a href="/path/filepath/path_test.go.html#724397">test</a></span><span class="op" id="724793">.</span><span class="ident" id="724794">path</span><span class="op" id="724798">,</span>&nbsp;<span class="ident" id="724800"><a href="/path/filepath/path_test.go.html#724421">got</a></span><span class="op" id="724803">,</span>&nbsp;<span class="ident" id="724805"><a href="/path/filepath/path_test.go.html#724397">test</a></span><span class="op" id="724809">.</span><span class="ident" id="724810">want</span><span class="op" id="724814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724821">}</span><br>
<span class="lineno"></span><span class="op" id="724823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">935</span><span class="keyword" id="724826">type</span>&nbsp;<span class="ident" id="724831">VolumeNameTest</span>&nbsp;<span class="keyword" id="724846">struct</span>&nbsp;<span class="op" id="724853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="724856">path</span>&nbsp;<span class="builtintype" id="724861">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="724869">vol</span>&nbsp;&nbsp;<span class="builtintype" id="724874">string</span><br>
<span class="lineno"></span><span class="op" id="724881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">940</span><span class="keyword" id="724884">var</span>&nbsp;<span class="ident" id="724888">volumenametests</span>&nbsp;<span class="op" id="724904">=</span>&nbsp;<span class="op" id="724906">[</span><span class="op" id="724907">]</span><span class="ident" id="724908"><a href="/path/filepath/path_test.go.html#724831">VolumeNameTest</a></span><span class="op" id="724922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724925">{</span><span class="string" id="724926">`c:/foo/bar`</span><span class="op" id="724938">,</span>&nbsp;<span class="string" id="724940">`c:`</span><span class="op" id="724944">}</span><span class="op" id="724945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724948">{</span><span class="string" id="724949">`c:`</span><span class="op" id="724953">,</span>&nbsp;<span class="string" id="724955">`c:`</span><span class="op" id="724959">}</span><span class="op" id="724960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724963">{</span><span class="string" id="724964">`2:`</span><span class="op" id="724968">,</span>&nbsp;<span class="string" id="724970">``</span><span class="op" id="724972">}</span><span class="op" id="724973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724976">{</span><span class="string" id="724977">``</span><span class="op" id="724979">,</span>&nbsp;<span class="string" id="724981">``</span><span class="op" id="724983">}</span><span class="op" id="724984">,</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="724987">{</span><span class="string" id="724988">`\\\host`</span><span class="op" id="724997">,</span>&nbsp;<span class="string" id="724999">``</span><span class="op" id="725001">}</span><span class="op" id="725002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725005">{</span><span class="string" id="725006">`\\\host\`</span><span class="op" id="725016">,</span>&nbsp;<span class="string" id="725018">``</span><span class="op" id="725020">}</span><span class="op" id="725021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725024">{</span><span class="string" id="725025">`\\\host\share`</span><span class="op" id="725040">,</span>&nbsp;<span class="string" id="725042">``</span><span class="op" id="725044">}</span><span class="op" id="725045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725048">{</span><span class="string" id="725049">`\\\host\\share`</span><span class="op" id="725065">,</span>&nbsp;<span class="string" id="725067">``</span><span class="op" id="725069">}</span><span class="op" id="725070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725073">{</span><span class="string" id="725074">`\\host`</span><span class="op" id="725082">,</span>&nbsp;<span class="string" id="725084">``</span><span class="op" id="725086">}</span><span class="op" id="725087">,</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725090">{</span><span class="string" id="725091">`//host`</span><span class="op" id="725099">,</span>&nbsp;<span class="string" id="725101">``</span><span class="op" id="725103">}</span><span class="op" id="725104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725107">{</span><span class="string" id="725108">`\\host\`</span><span class="op" id="725117">,</span>&nbsp;<span class="string" id="725119">``</span><span class="op" id="725121">}</span><span class="op" id="725122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725125">{</span><span class="string" id="725126">`//host/`</span><span class="op" id="725135">,</span>&nbsp;<span class="string" id="725137">``</span><span class="op" id="725139">}</span><span class="op" id="725140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725143">{</span><span class="string" id="725144">`\\host\share`</span><span class="op" id="725158">,</span>&nbsp;<span class="string" id="725160">`\\host\share`</span><span class="op" id="725174">}</span><span class="op" id="725175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725178">{</span><span class="string" id="725179">`//host/share`</span><span class="op" id="725193">,</span>&nbsp;<span class="string" id="725195">`//host/share`</span><span class="op" id="725209">}</span><span class="op" id="725210">,</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725213">{</span><span class="string" id="725214">`\\host\share\`</span><span class="op" id="725229">,</span>&nbsp;<span class="string" id="725231">`\\host\share`</span><span class="op" id="725245">}</span><span class="op" id="725246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725249">{</span><span class="string" id="725250">`//host/share/`</span><span class="op" id="725265">,</span>&nbsp;<span class="string" id="725267">`//host/share`</span><span class="op" id="725281">}</span><span class="op" id="725282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725285">{</span><span class="string" id="725286">`\\host\share\foo`</span><span class="op" id="725304">,</span>&nbsp;<span class="string" id="725306">`\\host\share`</span><span class="op" id="725320">}</span><span class="op" id="725321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725324">{</span><span class="string" id="725325">`//host/share/foo`</span><span class="op" id="725343">,</span>&nbsp;<span class="string" id="725345">`//host/share`</span><span class="op" id="725359">}</span><span class="op" id="725360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725363">{</span><span class="string" id="725364">`\\host\share\\foo\\\bar\\\\baz`</span><span class="op" id="725396">,</span>&nbsp;<span class="string" id="725398">`\\host\share`</span><span class="op" id="725412">}</span><span class="op" id="725413">,</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725416">{</span><span class="string" id="725417">`//host/share//foo///bar////baz`</span><span class="op" id="725449">,</span>&nbsp;<span class="string" id="725451">`//host/share`</span><span class="op" id="725465">}</span><span class="op" id="725466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725469">{</span><span class="string" id="725470">`\\host\share\foo\..\bar`</span><span class="op" id="725495">,</span>&nbsp;<span class="string" id="725497">`\\host\share`</span><span class="op" id="725511">}</span><span class="op" id="725512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725515">{</span><span class="string" id="725516">`//host/share/foo/../bar`</span><span class="op" id="725541">,</span>&nbsp;<span class="string" id="725543">`//host/share`</span><span class="op" id="725557">}</span><span class="op" id="725558">,</span><br>
<span class="lineno"></span><span class="op" id="725560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">965</span><span class="keyword" id="725563">func</span>&nbsp;<span class="ident" id="725568">TestVolumeName</span><span class="op" id="725582">(</span><span class="ident" id="725583">t</span>&nbsp;<span class="op" id="725585">*</span><span class="ident" id="725586"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="725593">.</span><span class="ident" id="725594">T</span><span class="op" id="725595">)</span>&nbsp;<span class="op" id="725597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="725600">if</span>&nbsp;<span class="ident" id="725603"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="725610">.</span><span class="ident" id="725611">GOOS</span>&nbsp;<span class="op" id="725616">!=</span>&nbsp;<span class="string" id="725619">&#34;windows&#34;</span>&nbsp;<span class="op" id="725629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="725633">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="725644">for</span>&nbsp;<span class="ident" id="725648">_</span><span class="op" id="725649">,</span>&nbsp;<span class="ident" id="725651">v</span>&nbsp;<span class="op" id="725653">:=</span>&nbsp;<span class="keyword" id="725656">range</span>&nbsp;<span class="ident" id="725662"><a href="/path/filepath/path_test.go.html#724888">volumenametests</a></span>&nbsp;<span class="op" id="725678">{</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="725682">if</span>&nbsp;<span class="ident" id="725685">vol</span>&nbsp;<span class="op" id="725689">:=</span>&nbsp;<span class="ident" id="725692"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="725700">.</span><span class="ident" id="725701">VolumeName</span><span class="op" id="725711">(</span><span class="ident" id="725712"><a href="/path/filepath/path_test.go.html#725651">v</a></span><span class="op" id="725713">.</span><span class="ident" id="725714">path</span><span class="op" id="725718">)</span><span class="op" id="725719">;</span>&nbsp;<span class="ident" id="725721"><a href="/path/filepath/path_test.go.html#725685">vol</a></span>&nbsp;<span class="op" id="725725">!=</span>&nbsp;<span class="ident" id="725728"><a href="/path/filepath/path_test.go.html#725651">v</a></span><span class="op" id="725729">.</span><span class="ident" id="725730">vol</span>&nbsp;<span class="op" id="725734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="725739"><a href="/path/filepath/path_test.go.html#725583">t</a></span><span class="op" id="725740">.</span><span class="ident" id="725741">Errorf</span><span class="op" id="725747">(</span><span class="string" id="725748">&#34;VolumeName(%q)=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="725776">,</span>&nbsp;<span class="ident" id="725778"><a href="/path/filepath/path_test.go.html#725651">v</a></span><span class="op" id="725779">.</span><span class="ident" id="725780">path</span><span class="op" id="725784">,</span>&nbsp;<span class="ident" id="725786"><a href="/path/filepath/path_test.go.html#725685">vol</a></span><span class="op" id="725789">,</span>&nbsp;<span class="ident" id="725791"><a href="/path/filepath/path_test.go.html#725651">v</a></span><span class="op" id="725792">.</span><span class="ident" id="725793">vol</span><span class="op" id="725796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725803">}</span><br>
<span class="lineno"></span><span class="op" id="725805">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span><span class="keyword" id="725808">func</span>&nbsp;<span class="ident" id="725813">TestDriveLetterInEvalSymlinks</span><span class="op" id="725842">(</span><span class="ident" id="725843">t</span>&nbsp;<span class="op" id="725845">*</span><span class="ident" id="725846"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="725853">.</span><span class="ident" id="725854">T</span><span class="op" id="725855">)</span>&nbsp;<span class="op" id="725857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="725860">if</span>&nbsp;<span class="ident" id="725863"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="725870">.</span><span class="ident" id="725871">GOOS</span>&nbsp;<span class="op" id="725876">!=</span>&nbsp;<span class="string" id="725879">&#34;windows&#34;</span>&nbsp;<span class="op" id="725889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="725893">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="725901">}</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="725904">wd</span><span class="op" id="725906">,</span>&nbsp;<span class="ident" id="725908">_</span>&nbsp;<span class="op" id="725910">:=</span>&nbsp;<span class="ident" id="725913"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="725915">.</span><span class="ident" id="725916">Getwd</span><span class="op" id="725921">(</span><span class="op" id="725922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="725925">if</span>&nbsp;<span class="builtinfunc" id="725928">len</span><span class="op" id="725931">(</span><span class="ident" id="725932"><a href="/path/filepath/path_test.go.html#725904">wd</a></span><span class="op" id="725934">)</span>&nbsp;<span class="op" id="725936">&lt;</span>&nbsp;<span class="num" id="725938">3</span>&nbsp;<span class="op" id="725940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="725944"><a href="/path/filepath/path_test.go.html#725843">t</a></span><span class="op" id="725945">.</span><span class="ident" id="725946">Errorf</span><span class="op" id="725952">(</span><span class="string" id="725953">&#34;Current&nbsp;directory&nbsp;path&nbsp;%q&nbsp;is&nbsp;too&nbsp;short&#34;</span><span class="op" id="725993">,</span>&nbsp;<span class="ident" id="725995"><a href="/path/filepath/path_test.go.html#725904">wd</a></span><span class="op" id="725997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="726000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726003">lp</span>&nbsp;<span class="op" id="726006">:=</span>&nbsp;<span class="ident" id="726009"><a href="/path/filepath/path_test.go.html#703359">strings</a></span><span class="op" id="726016">.</span><span class="ident" id="726017">ToLower</span><span class="op" id="726024">(</span><span class="ident" id="726025"><a href="/path/filepath/path_test.go.html#725904">wd</a></span><span class="op" id="726027">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726030">up</span>&nbsp;<span class="op" id="726033">:=</span>&nbsp;<span class="ident" id="726036"><a href="/path/filepath/path_test.go.html#703359">strings</a></span><span class="op" id="726043">.</span><span class="ident" id="726044">ToUpper</span><span class="op" id="726051">(</span><span class="ident" id="726052"><a href="/path/filepath/path_test.go.html#725904">wd</a></span><span class="op" id="726054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726057">flp</span><span class="op" id="726060">,</span>&nbsp;<span class="ident" id="726062">err</span>&nbsp;<span class="op" id="726066">:=</span>&nbsp;<span class="ident" id="726069"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="726077">.</span><span class="ident" id="726078">EvalSymlinks</span><span class="op" id="726090">(</span><span class="ident" id="726091"><a href="/path/filepath/path_test.go.html#726003">lp</a></span><span class="op" id="726093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="726096">if</span>&nbsp;<span class="ident" id="726099"><a href="/path/filepath/path_test.go.html#726062">err</a></span>&nbsp;<span class="op" id="726103">!=</span>&nbsp;<span class="ident" id="726106">nil</span>&nbsp;<span class="op" id="726110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726114"><a href="/path/filepath/path_test.go.html#725843">t</a></span><span class="op" id="726115">.</span><span class="ident" id="726116">Fatalf</span><span class="op" id="726122">(</span><span class="string" id="726123">&#34;EvalSymlinks(%q)&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="726152">,</span>&nbsp;<span class="ident" id="726154"><a href="/path/filepath/path_test.go.html#726003">lp</a></span><span class="op" id="726156">,</span>&nbsp;<span class="ident" id="726158"><a href="/path/filepath/path_test.go.html#726062">err</a></span><span class="op" id="726161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="726164">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726167">fup</span><span class="op" id="726170">,</span>&nbsp;<span class="ident" id="726172"><a href="/path/filepath/path_test.go.html#726062">err</a></span>&nbsp;<span class="op" id="726176">:=</span>&nbsp;<span class="ident" id="726179"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="726187">.</span><span class="ident" id="726188">EvalSymlinks</span><span class="op" id="726200">(</span><span class="ident" id="726201"><a href="/path/filepath/path_test.go.html#726030">up</a></span><span class="op" id="726203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="726206">if</span>&nbsp;<span class="ident" id="726209"><a href="/path/filepath/path_test.go.html#726062">err</a></span>&nbsp;<span class="op" id="726213">!=</span>&nbsp;<span class="ident" id="726216">nil</span>&nbsp;<span class="op" id="726220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726224"><a href="/path/filepath/path_test.go.html#725843">t</a></span><span class="op" id="726225">.</span><span class="ident" id="726226">Fatalf</span><span class="op" id="726232">(</span><span class="string" id="726233">&#34;EvalSymlinks(%q)&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="726262">,</span>&nbsp;<span class="ident" id="726264"><a href="/path/filepath/path_test.go.html#726030">up</a></span><span class="op" id="726266">,</span>&nbsp;<span class="ident" id="726268"><a href="/path/filepath/path_test.go.html#726062">err</a></span><span class="op" id="726271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="726274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="726277">if</span>&nbsp;<span class="ident" id="726280"><a href="/path/filepath/path_test.go.html#726057">flp</a></span>&nbsp;<span class="op" id="726284">!=</span>&nbsp;<span class="ident" id="726287"><a href="/path/filepath/path_test.go.html#726167">fup</a></span>&nbsp;<span class="op" id="726291">{</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726295"><a href="/path/filepath/path_test.go.html#725843">t</a></span><span class="op" id="726296">.</span><span class="ident" id="726297">Errorf</span><span class="op" id="726303">(</span><span class="string" id="726304">&#34;Results&nbsp;of&nbsp;EvalSymlinks&nbsp;do&nbsp;not&nbsp;match:&nbsp;%q&nbsp;and&nbsp;%q&#34;</span><span class="op" id="726353">,</span>&nbsp;<span class="ident" id="726355"><a href="/path/filepath/path_test.go.html#726057">flp</a></span><span class="op" id="726358">,</span>&nbsp;<span class="ident" id="726360"><a href="/path/filepath/path_test.go.html#726167">fup</a></span><span class="op" id="726363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="726366">}</span><br>
<span class="lineno"></span><span class="op" id="726368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="726371">func</span>&nbsp;<span class="ident" id="726376">TestBug3486</span><span class="op" id="726387">(</span><span class="ident" id="726388">t</span>&nbsp;<span class="op" id="726390">*</span><span class="ident" id="726391"><a href="/path/filepath/path_test.go.html#703370">testing</a></span><span class="op" id="726398">.</span><span class="ident" id="726399">T</span><span class="op" id="726400">)</span>&nbsp;<span class="op" id="726402">{</span>&nbsp;<span class="comment" id="726404">//&nbsp;http://code.google.com/p/go/issues/detail?id=3486</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726458">root</span><span class="op" id="726462">,</span>&nbsp;<span class="ident" id="726464">err</span>&nbsp;<span class="op" id="726468">:=</span>&nbsp;<span class="ident" id="726471"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="726479">.</span><span class="ident" id="726480">EvalSymlinks</span><span class="op" id="726492">(</span><span class="ident" id="726493"><a href="/path/filepath/path_test.go.html#703348">runtime</a></span><span class="op" id="726500">.</span><span class="ident" id="726501">GOROOT</span><span class="op" id="726507">(</span><span class="op" id="726508">)</span>&nbsp;<span class="op" id="726510">+</span>&nbsp;<span class="string" id="726512">&#34;/test&#34;</span><span class="op" id="726519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="726522">if</span>&nbsp;<span class="ident" id="726525"><a href="/path/filepath/path_test.go.html#726464">err</a></span>&nbsp;<span class="op" id="726529">!=</span>&nbsp;<span class="ident" id="726532">nil</span>&nbsp;<span class="op" id="726536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726540"><a href="/path/filepath/path_test.go.html#726388">t</a></span><span class="op" id="726541">.</span><span class="ident" id="726542">Fatal</span><span class="op" id="726547">(</span><span class="ident" id="726548"><a href="/path/filepath/path_test.go.html#726464">err</a></span><span class="op" id="726551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="726554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726557">bugs</span>&nbsp;<span class="op" id="726562">:=</span>&nbsp;<span class="ident" id="726565"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="726573">.</span><span class="ident" id="726574">Join</span><span class="op" id="726578">(</span><span class="ident" id="726579"><a href="/path/filepath/path_test.go.html#726458">root</a></span><span class="op" id="726583">,</span>&nbsp;<span class="string" id="726585">&#34;bugs&#34;</span><span class="op" id="726591">)</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726594">ken</span>&nbsp;<span class="op" id="726598">:=</span>&nbsp;<span class="ident" id="726601"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="726609">.</span><span class="ident" id="726610">Join</span><span class="op" id="726614">(</span><span class="ident" id="726615"><a href="/path/filepath/path_test.go.html#726458">root</a></span><span class="op" id="726619">,</span>&nbsp;<span class="string" id="726621">&#34;ken&#34;</span><span class="op" id="726626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726629">seenBugs</span>&nbsp;<span class="op" id="726638">:=</span>&nbsp;<span class="ident" id="726641">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726648">seenKen</span>&nbsp;<span class="op" id="726656">:=</span>&nbsp;<span class="ident" id="726659">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726666"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="726674">.</span><span class="ident" id="726675">Walk</span><span class="op" id="726679">(</span><span class="ident" id="726680"><a href="/path/filepath/path_test.go.html#726458">root</a></span><span class="op" id="726684">,</span>&nbsp;<span class="keyword" id="726686">func</span><span class="op" id="726690">(</span><span class="ident" id="726691">pth</span>&nbsp;<span class="builtintype" id="726695">string</span><span class="op" id="726701">,</span>&nbsp;<span class="ident" id="726703">info</span>&nbsp;<span class="ident" id="726708"><a href="/path/filepath/path_test.go.html#703314">os</a></span><span class="op" id="726710">.</span><span class="ident" id="726711">FileInfo</span><span class="op" id="726719">,</span>&nbsp;<span class="ident" id="726721">err</span>&nbsp;<span class="builtintype" id="726725">error</span><span class="op" id="726730">)</span>&nbsp;<span class="builtintype" id="726732">error</span>&nbsp;<span class="op" id="726738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="726742">if</span>&nbsp;<span class="ident" id="726745"><a href="/path/filepath/path_test.go.html#726721">err</a></span>&nbsp;<span class="op" id="726749">!=</span>&nbsp;<span class="ident" id="726752">nil</span>&nbsp;<span class="op" id="726756">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726761"><a href="/path/filepath/path_test.go.html#726388">t</a></span><span class="op" id="726762">.</span><span class="ident" id="726763">Fatal</span><span class="op" id="726768">(</span><span class="ident" id="726769"><a href="/path/filepath/path_test.go.html#726721">err</a></span><span class="op" id="726772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="726776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="726781">switch</span>&nbsp;<span class="ident" id="726788"><a href="/path/filepath/path_test.go.html#726691">pth</a></span>&nbsp;<span class="op" id="726792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="726796">case</span>&nbsp;<span class="ident" id="726801"><a href="/path/filepath/path_test.go.html#726557">bugs</a></span><span class="op" id="726805">:</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726810"><a href="/path/filepath/path_test.go.html#726629">seenBugs</a></span>&nbsp;<span class="op" id="726819">=</span>&nbsp;<span class="ident" id="726821">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="726829">return</span>&nbsp;<span class="ident" id="726836"><a href="/path/filepath/path_test.go.html#703320">filepath</a></span><span class="op" id="726844">.</span><span class="ident" id="726845">SkipDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="726855">case</span>&nbsp;<span class="ident" id="726860"><a href="/path/filepath/path_test.go.html#726594">ken</a></span><span class="op" id="726863">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="726868">if</span>&nbsp;<span class="op" id="726871">!</span><span class="ident" id="726872"><a href="/path/filepath/path_test.go.html#726629">seenBugs</a></span>&nbsp;<span class="op" id="726881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726887"><a href="/path/filepath/path_test.go.html#726388">t</a></span><span class="op" id="726888">.</span><span class="ident" id="726889">Fatal</span><span class="op" id="726894">(</span><span class="string" id="726895">&#34;filepath.Walk&nbsp;out&nbsp;of&nbsp;order&nbsp;-&nbsp;ken&nbsp;before&nbsp;bugs&#34;</span><span class="op" id="726941">)</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="726946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="726951"><a href="/path/filepath/path_test.go.html#726648">seenKen</a></span>&nbsp;<span class="op" id="726959">=</span>&nbsp;<span class="ident" id="726961">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="726968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="726972">return</span>&nbsp;<span class="ident" id="726979">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="726984">}</span><span class="op" id="726985">)</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="726988">if</span>&nbsp;<span class="op" id="726991">!</span><span class="ident" id="726992"><a href="/path/filepath/path_test.go.html#726648">seenKen</a></span>&nbsp;<span class="op" id="727000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="727004"><a href="/path/filepath/path_test.go.html#726388">t</a></span><span class="op" id="727005">.</span><span class="ident" id="727006">Fatalf</span><span class="op" id="727012">(</span><span class="string" id="727013">&#34;%q&nbsp;not&nbsp;seen&#34;</span><span class="op" id="727026">,</span>&nbsp;<span class="ident" id="727028"><a href="/path/filepath/path_test.go.html#726594">ken</a></span><span class="op" id="727031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="727034">}</span><br>
<span class="lineno"></span><span class="op" id="727036">}</span>
</div>
</body>
</html>
