<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/signal</h2>
<ul>
<li><a href="/gostd/os/signal/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/signal/signal.go.html">signal.go</a></li>
<li><a href="/gostd/os/signal/signal_test.go.html">signal_test.go</a></li>
<li><a href="/gostd/os/signal/signal_unix.go.html" class="current">signal_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4878038">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4878093">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4878147">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4878198">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4878276">package</span>&nbsp;<span class="ident" id="4878284">signal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4878292">import</span>&nbsp;<span class="op" id="4878299">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4878302">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4878308">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="4878318">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4878321">//&nbsp;In&nbsp;assembly.</span><br>
<span class="lineno">15</span><span class="keyword" id="4878337">func</span>&nbsp;<span class="ident" id="4878342">signal_disable</span><span class="op" id="4878356">(</span><span class="builtintype" id="4878357">uint32</span><span class="op" id="4878363">)</span><br>
<span class="lineno"></span><span class="keyword" id="4878365">func</span>&nbsp;<span class="ident" id="4878370">signal_enable</span><span class="op" id="4878383">(</span><span class="builtintype" id="4878384">uint32</span><span class="op" id="4878390">)</span><br>
<span class="lineno"></span><span class="keyword" id="4878392">func</span>&nbsp;<span class="ident" id="4878397">signal_recv</span><span class="op" id="4878408">(</span><span class="op" id="4878409">)</span>&nbsp;<span class="builtintype" id="4878411">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4878419">func</span>&nbsp;<span class="ident" id="4878424">loop</span><span class="op" id="4878428">(</span><span class="op" id="4878429">)</span>&nbsp;<span class="op" id="4878431">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4878434">for</span>&nbsp;<span class="op" id="4878438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4878442">process</span><span class="op" id="4878449">(</span><span class="ident" id="4878450">syscall</span><span class="op" id="4878457">.</span><span class="ident" id="4878458">Signal</span><span class="op" id="4878464">(</span><span class="ident" id="4878465">signal_recv</span><span class="op" id="4878476">(</span><span class="op" id="4878477">)</span><span class="op" id="4878478">)</span><span class="op" id="4878479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4878482">}</span><br>
<span class="lineno"></span><span class="op" id="4878484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="4878487">func</span>&nbsp;<span class="ident" id="4878492">init</span><span class="op" id="4878496">(</span><span class="op" id="4878497">)</span>&nbsp;<span class="op" id="4878499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4878502">signal_enable</span><span class="op" id="4878515">(</span><span class="num" id="4878516">0</span><span class="op" id="4878517">)</span>&nbsp;<span class="comment" id="4878519">//&nbsp;first&nbsp;call&nbsp;-&nbsp;initialize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4878547">go</span>&nbsp;<span class="ident" id="4878550">loop</span><span class="op" id="4878554">(</span><span class="op" id="4878555">)</span><br>
<span class="lineno"></span><span class="op" id="4878557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="4878560">const</span>&nbsp;<span class="op" id="4878566">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4878569">numSig</span>&nbsp;<span class="op" id="4878576">=</span>&nbsp;<span class="num" id="4878578">65</span>&nbsp;<span class="comment" id="4878581">//&nbsp;max&nbsp;across&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="op" id="4878607">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4878610">func</span>&nbsp;<span class="ident" id="4878615">signum</span><span class="op" id="4878621">(</span><span class="ident" id="4878622">sig</span>&nbsp;<span class="ident" id="4878626">os</span><span class="op" id="4878628">.</span><span class="ident" id="4878629">Signal</span><span class="op" id="4878635">)</span>&nbsp;<span class="builtintype" id="4878637">int</span>&nbsp;<span class="op" id="4878641">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4878644">switch</span>&nbsp;<span class="ident" id="4878651">sig</span>&nbsp;<span class="op" id="4878655">:=</span>&nbsp;<span class="ident" id="4878658">sig</span><span class="op" id="4878661">.</span><span class="op" id="4878662">(</span><span class="keyword" id="4878663">type</span><span class="op" id="4878667">)</span>&nbsp;<span class="op" id="4878669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4878672">case</span>&nbsp;<span class="ident" id="4878677">syscall</span><span class="op" id="4878684">.</span><span class="ident" id="4878685">Signal</span><span class="op" id="4878691">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4878695">i</span>&nbsp;<span class="op" id="4878697">:=</span>&nbsp;<span class="builtintype" id="4878700">int</span><span class="op" id="4878703">(</span><span class="ident" id="4878704">sig</span><span class="op" id="4878707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4878711">if</span>&nbsp;<span class="ident" id="4878714">i</span>&nbsp;<span class="op" id="4878716">&lt;</span>&nbsp;<span class="num" id="4878718">0</span>&nbsp;<span class="op" id="4878720">||</span>&nbsp;<span class="ident" id="4878723">i</span>&nbsp;<span class="op" id="4878725">&gt;=</span>&nbsp;<span class="ident" id="4878728">numSig</span>&nbsp;<span class="op" id="4878735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4878740">return</span>&nbsp;<span class="op" id="4878747">-</span><span class="num" id="4878748">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4878752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4878756">return</span>&nbsp;<span class="ident" id="4878763">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4878766">default</span><span class="op" id="4878773">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4878777">return</span>&nbsp;<span class="op" id="4878784">-</span><span class="num" id="4878785">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4878788">}</span><br>
<span class="lineno">45</span><span class="op" id="4878790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4878793">func</span>&nbsp;<span class="ident" id="4878798">enableSignal</span><span class="op" id="4878810">(</span><span class="ident" id="4878811">sig</span>&nbsp;<span class="builtintype" id="4878815">int</span><span class="op" id="4878818">)</span>&nbsp;<span class="op" id="4878820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4878823">signal_enable</span><span class="op" id="4878836">(</span><span class="builtintype" id="4878837">uint32</span><span class="op" id="4878843">(</span><span class="ident" id="4878844">sig</span><span class="op" id="4878847">)</span><span class="op" id="4878848">)</span><br>
<span class="lineno"></span><span class="op" id="4878850">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4878853">func</span>&nbsp;<span class="ident" id="4878858">disableSignal</span><span class="op" id="4878871">(</span><span class="ident" id="4878872">sig</span>&nbsp;<span class="builtintype" id="4878876">int</span><span class="op" id="4878879">)</span>&nbsp;<span class="op" id="4878881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4878884">signal_disable</span><span class="op" id="4878898">(</span><span class="builtintype" id="4878899">uint32</span><span class="op" id="4878905">(</span><span class="ident" id="4878906">sig</span><span class="op" id="4878909">)</span><span class="op" id="4878910">)</span><br>
<span class="lineno"></span><span class="op" id="4878912">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
