<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6683149">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6683204">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6683258">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6683309">package</span>&nbsp;<span class="ident" id="6683317">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6683325">import</span>&nbsp;<span class="op" id="6683332">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683335">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683344">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683351">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683361">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683373">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683379">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683390">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6683400">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6683403">var</span>&nbsp;<span class="ident" id="6683407">fset</span>&nbsp;<span class="op" id="6683412">=</span>&nbsp;<span class="ident" id="6683414">token</span><span class="op" id="6683419">.</span><span class="ident" id="6683420">NewFileSet</span><span class="op" id="6683430">(</span><span class="op" id="6683431">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6683434">var</span>&nbsp;<span class="ident" id="6683438">validFiles</span>&nbsp;<span class="op" id="6683449">=</span>&nbsp;<span class="op" id="6683451">[</span><span class="op" id="6683452">]</span><span class="builtintype" id="6683453">string</span><span class="op" id="6683459">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683462">&#34;parser.go&#34;</span><span class="op" id="6683473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683476">&#34;parser_test.go&#34;</span><span class="op" id="6683492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683495">&#34;error_test.go&#34;</span><span class="op" id="6683510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6683513">&#34;short_test.go&#34;</span><span class="op" id="6683528">,</span><br>
<span class="lineno"></span><span class="op" id="6683530">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6683533">func</span>&nbsp;<span class="ident" id="6683538">TestParse</span><span class="op" id="6683547">(</span><span class="ident" id="6683548">t</span>&nbsp;<span class="op" id="6683550">*</span><span class="ident" id="6683551">testing</span><span class="op" id="6683558">.</span><span class="ident" id="6683559">T</span><span class="op" id="6683560">)</span>&nbsp;<span class="op" id="6683562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683565">for</span>&nbsp;<span class="ident" id="6683569">_</span><span class="op" id="6683570">,</span>&nbsp;<span class="ident" id="6683572">filename</span>&nbsp;<span class="op" id="6683581">:=</span>&nbsp;<span class="keyword" id="6683584">range</span>&nbsp;<span class="ident" id="6683590">validFiles</span>&nbsp;<span class="op" id="6683601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6683605">_</span><span class="op" id="6683606">,</span>&nbsp;<span class="ident" id="6683608">err</span>&nbsp;<span class="op" id="6683612">:=</span>&nbsp;<span class="ident" id="6683615">ParseFile</span><span class="op" id="6683624">(</span><span class="ident" id="6683625">fset</span><span class="op" id="6683629">,</span>&nbsp;<span class="ident" id="6683631">filename</span><span class="op" id="6683639">,</span>&nbsp;<span class="ident" id="6683641">nil</span><span class="op" id="6683644">,</span>&nbsp;<span class="ident" id="6683646">DeclarationErrors</span><span class="op" id="6683663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683667">if</span>&nbsp;<span class="ident" id="6683670">err</span>&nbsp;<span class="op" id="6683674">!=</span>&nbsp;<span class="ident" id="6683677">nil</span>&nbsp;<span class="op" id="6683681">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6683686">t</span><span class="op" id="6683687">.</span><span class="ident" id="6683688">Fatalf</span><span class="op" id="6683694">(</span><span class="string" id="6683695">&#34;ParseFile(%s):&nbsp;%v&#34;</span><span class="op" id="6683714">,</span>&nbsp;<span class="ident" id="6683716">filename</span><span class="op" id="6683724">,</span>&nbsp;<span class="ident" id="6683726">err</span><span class="op" id="6683729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6683733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6683736">}</span><br>
<span class="lineno"></span><span class="op" id="6683738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6683741">func</span>&nbsp;<span class="ident" id="6683746">nameFilter</span><span class="op" id="6683756">(</span><span class="ident" id="6683757">filename</span>&nbsp;<span class="builtintype" id="6683766">string</span><span class="op" id="6683772">)</span>&nbsp;<span class="builtintype" id="6683774">bool</span>&nbsp;<span class="op" id="6683779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683782">switch</span>&nbsp;<span class="ident" id="6683789">filename</span>&nbsp;<span class="op" id="6683798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683801">case</span>&nbsp;<span class="string" id="6683806">&#34;parser.go&#34;</span><span class="op" id="6683817">,</span>&nbsp;<span class="string" id="6683819">&#34;interface.go&#34;</span><span class="op" id="6683833">,</span>&nbsp;<span class="string" id="6683835">&#34;parser_test.go&#34;</span><span class="op" id="6683851">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683855">return</span>&nbsp;<span class="builtintype" id="6683862">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683868">case</span>&nbsp;<span class="string" id="6683873">&#34;parser.go.orig&#34;</span><span class="op" id="6683889">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683893">return</span>&nbsp;<span class="builtintype" id="6683900">true</span>&nbsp;<span class="comment" id="6683905">//&nbsp;permit&nbsp;but&nbsp;should&nbsp;be&nbsp;ignored&nbsp;by&nbsp;ParseDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6683950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6683953">return</span>&nbsp;<span class="builtintype" id="6683960">false</span><br>
<span class="lineno"></span><span class="op" id="6683966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="6683969">func</span>&nbsp;<span class="ident" id="6683974">dirFilter</span><span class="op" id="6683983">(</span><span class="ident" id="6683984">f</span>&nbsp;<span class="ident" id="6683986">os</span><span class="op" id="6683988">.</span><span class="ident" id="6683989">FileInfo</span><span class="op" id="6683997">)</span>&nbsp;<span class="builtintype" id="6683999">bool</span>&nbsp;<span class="op" id="6684004">{</span>&nbsp;<span class="keyword" id="6684006">return</span>&nbsp;<span class="ident" id="6684013">nameFilter</span><span class="op" id="6684023">(</span><span class="ident" id="6684024">f</span><span class="op" id="6684025">.</span><span class="ident" id="6684026">Name</span><span class="op" id="6684030">(</span><span class="op" id="6684031">)</span><span class="op" id="6684032">)</span>&nbsp;<span class="op" id="6684034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6684037">func</span>&nbsp;<span class="ident" id="6684042">TestParseDir</span><span class="op" id="6684054">(</span><span class="ident" id="6684055">t</span>&nbsp;<span class="op" id="6684057">*</span><span class="ident" id="6684058">testing</span><span class="op" id="6684065">.</span><span class="ident" id="6684066">T</span><span class="op" id="6684067">)</span>&nbsp;<span class="op" id="6684069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684072">path</span>&nbsp;<span class="op" id="6684077">:=</span>&nbsp;<span class="string" id="6684080">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684085">pkgs</span><span class="op" id="6684089">,</span>&nbsp;<span class="ident" id="6684091">err</span>&nbsp;<span class="op" id="6684095">:=</span>&nbsp;<span class="ident" id="6684098">ParseDir</span><span class="op" id="6684106">(</span><span class="ident" id="6684107">fset</span><span class="op" id="6684111">,</span>&nbsp;<span class="ident" id="6684113">path</span><span class="op" id="6684117">,</span>&nbsp;<span class="ident" id="6684119">dirFilter</span><span class="op" id="6684128">,</span>&nbsp;<span class="num" id="6684130">0</span><span class="op" id="6684131">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684134">if</span>&nbsp;<span class="ident" id="6684137">err</span>&nbsp;<span class="op" id="6684141">!=</span>&nbsp;<span class="ident" id="6684144">nil</span>&nbsp;<span class="op" id="6684148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684152">t</span><span class="op" id="6684153">.</span><span class="ident" id="6684154">Fatalf</span><span class="op" id="6684160">(</span><span class="string" id="6684161">&#34;ParseDir(%s):&nbsp;%v&#34;</span><span class="op" id="6684179">,</span>&nbsp;<span class="ident" id="6684181">path</span><span class="op" id="6684185">,</span>&nbsp;<span class="ident" id="6684187">err</span><span class="op" id="6684190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684196">if</span>&nbsp;<span class="ident" id="6684199">n</span>&nbsp;<span class="op" id="6684201">:=</span>&nbsp;<span class="builtinfunc" id="6684204">len</span><span class="op" id="6684207">(</span><span class="ident" id="6684208">pkgs</span><span class="op" id="6684212">)</span><span class="op" id="6684213">;</span>&nbsp;<span class="ident" id="6684215">n</span>&nbsp;<span class="op" id="6684217">!=</span>&nbsp;<span class="num" id="6684220">1</span>&nbsp;<span class="op" id="6684222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684226">t</span><span class="op" id="6684227">.</span><span class="ident" id="6684228">Errorf</span><span class="op" id="6684234">(</span><span class="string" id="6684235">&#34;got&nbsp;%d&nbsp;packages;&nbsp;want&nbsp;1&#34;</span><span class="op" id="6684260">,</span>&nbsp;<span class="ident" id="6684262">n</span><span class="op" id="6684263">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684269">pkg</span>&nbsp;<span class="op" id="6684273">:=</span>&nbsp;<span class="ident" id="6684276">pkgs</span><span class="op" id="6684280">[</span><span class="string" id="6684281">&#34;parser&#34;</span><span class="op" id="6684289">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684292">if</span>&nbsp;<span class="ident" id="6684295">pkg</span>&nbsp;<span class="op" id="6684299">==</span>&nbsp;<span class="ident" id="6684302">nil</span>&nbsp;<span class="op" id="6684306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684310">t</span><span class="op" id="6684311">.</span><span class="ident" id="6684312">Errorf</span><span class="op" id="6684318">(</span><span class="string" id="6684319">`package&nbsp;&#34;parser&#34;&nbsp;not&nbsp;found`</span><span class="op" id="6684347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684351">return</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684362">if</span>&nbsp;<span class="ident" id="6684365">n</span>&nbsp;<span class="op" id="6684367">:=</span>&nbsp;<span class="builtinfunc" id="6684370">len</span><span class="op" id="6684373">(</span><span class="ident" id="6684374">pkg</span><span class="op" id="6684377">.</span><span class="ident" id="6684378">Files</span><span class="op" id="6684383">)</span><span class="op" id="6684384">;</span>&nbsp;<span class="ident" id="6684386">n</span>&nbsp;<span class="op" id="6684388">!=</span>&nbsp;<span class="num" id="6684391">3</span>&nbsp;<span class="op" id="6684393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684397">t</span><span class="op" id="6684398">.</span><span class="ident" id="6684399">Errorf</span><span class="op" id="6684405">(</span><span class="string" id="6684406">&#34;got&nbsp;%d&nbsp;package&nbsp;files;&nbsp;want&nbsp;3&#34;</span><span class="op" id="6684436">,</span>&nbsp;<span class="ident" id="6684438">n</span><span class="op" id="6684439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684445">for</span>&nbsp;<span class="ident" id="6684449">filename</span>&nbsp;<span class="op" id="6684458">:=</span>&nbsp;<span class="keyword" id="6684461">range</span>&nbsp;<span class="ident" id="6684467">pkg</span><span class="op" id="6684470">.</span><span class="ident" id="6684471">Files</span>&nbsp;<span class="op" id="6684477">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684481">if</span>&nbsp;<span class="op" id="6684484">!</span><span class="ident" id="6684485">nameFilter</span><span class="op" id="6684495">(</span><span class="ident" id="6684496">filename</span><span class="op" id="6684504">)</span>&nbsp;<span class="op" id="6684506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684511">t</span><span class="op" id="6684512">.</span><span class="ident" id="6684513">Errorf</span><span class="op" id="6684519">(</span><span class="string" id="6684520">&#34;unexpected&nbsp;package&nbsp;file:&nbsp;%s&#34;</span><span class="op" id="6684549">,</span>&nbsp;<span class="ident" id="6684551">filename</span><span class="op" id="6684559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684566">}</span><br>
<span class="lineno"></span><span class="op" id="6684568">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="6684571">func</span>&nbsp;<span class="ident" id="6684576">TestParseExpr</span><span class="op" id="6684589">(</span><span class="ident" id="6684590">t</span>&nbsp;<span class="op" id="6684592">*</span><span class="ident" id="6684593">testing</span><span class="op" id="6684600">.</span><span class="ident" id="6684601">T</span><span class="op" id="6684602">)</span>&nbsp;<span class="op" id="6684604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6684607">//&nbsp;just&nbsp;kicking&nbsp;the&nbsp;tires:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6684635">//&nbsp;a&nbsp;valid&nbsp;arithmetic&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684669">src</span>&nbsp;<span class="op" id="6684673">:=</span>&nbsp;<span class="string" id="6684676">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684685">x</span><span class="op" id="6684686">,</span>&nbsp;<span class="ident" id="6684688">err</span>&nbsp;<span class="op" id="6684692">:=</span>&nbsp;<span class="ident" id="6684695">ParseExpr</span><span class="op" id="6684704">(</span><span class="ident" id="6684705">src</span><span class="op" id="6684708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684711">if</span>&nbsp;<span class="ident" id="6684714">err</span>&nbsp;<span class="op" id="6684718">!=</span>&nbsp;<span class="ident" id="6684721">nil</span>&nbsp;<span class="op" id="6684725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684729">t</span><span class="op" id="6684730">.</span><span class="ident" id="6684731">Errorf</span><span class="op" id="6684737">(</span><span class="string" id="6684738">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="6684757">,</span>&nbsp;<span class="ident" id="6684759">src</span><span class="op" id="6684762">,</span>&nbsp;<span class="ident" id="6684764">err</span><span class="op" id="6684767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6684773">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684790">if</span>&nbsp;<span class="ident" id="6684793">_</span><span class="op" id="6684794">,</span>&nbsp;<span class="ident" id="6684796">ok</span>&nbsp;<span class="op" id="6684799">:=</span>&nbsp;<span class="ident" id="6684802">x</span><span class="op" id="6684803">.</span><span class="op" id="6684804">(</span><span class="op" id="6684805">*</span><span class="ident" id="6684806">ast</span><span class="op" id="6684809">.</span><span class="ident" id="6684810">BinaryExpr</span><span class="op" id="6684820">)</span><span class="op" id="6684821">;</span>&nbsp;<span class="op" id="6684823">!</span><span class="ident" id="6684824">ok</span>&nbsp;<span class="op" id="6684827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684831">t</span><span class="op" id="6684832">.</span><span class="ident" id="6684833">Errorf</span><span class="op" id="6684839">(</span><span class="string" id="6684840">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.BinaryExpr&#34;</span><span class="op" id="6684885">,</span>&nbsp;<span class="ident" id="6684887">src</span><span class="op" id="6684890">,</span>&nbsp;<span class="ident" id="6684892">x</span><span class="op" id="6684893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6684896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6684900">//&nbsp;a&nbsp;valid&nbsp;type&nbsp;expression</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684928">src</span>&nbsp;<span class="op" id="6684932">=</span>&nbsp;<span class="string" id="6684934">&#34;struct{x&nbsp;*int}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684952">x</span><span class="op" id="6684953">,</span>&nbsp;<span class="ident" id="6684955">err</span>&nbsp;<span class="op" id="6684959">=</span>&nbsp;<span class="ident" id="6684961">ParseExpr</span><span class="op" id="6684970">(</span><span class="ident" id="6684971">src</span><span class="op" id="6684974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6684977">if</span>&nbsp;<span class="ident" id="6684980">err</span>&nbsp;<span class="op" id="6684984">!=</span>&nbsp;<span class="ident" id="6684987">nil</span>&nbsp;<span class="op" id="6684991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6684995">t</span><span class="op" id="6684996">.</span><span class="ident" id="6684997">Errorf</span><span class="op" id="6685003">(</span><span class="string" id="6685004">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="6685023">,</span>&nbsp;<span class="ident" id="6685025">src</span><span class="op" id="6685028">,</span>&nbsp;<span class="ident" id="6685030">err</span><span class="op" id="6685033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685036">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6685039">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6685056">if</span>&nbsp;<span class="ident" id="6685059">_</span><span class="op" id="6685060">,</span>&nbsp;<span class="ident" id="6685062">ok</span>&nbsp;<span class="op" id="6685065">:=</span>&nbsp;<span class="ident" id="6685068">x</span><span class="op" id="6685069">.</span><span class="op" id="6685070">(</span><span class="op" id="6685071">*</span><span class="ident" id="6685072">ast</span><span class="op" id="6685075">.</span><span class="ident" id="6685076">StructType</span><span class="op" id="6685086">)</span><span class="op" id="6685087">;</span>&nbsp;<span class="op" id="6685089">!</span><span class="ident" id="6685090">ok</span>&nbsp;<span class="op" id="6685093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6685097">t</span><span class="op" id="6685098">.</span><span class="ident" id="6685099">Errorf</span><span class="op" id="6685105">(</span><span class="string" id="6685106">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.StructType&#34;</span><span class="op" id="6685151">,</span>&nbsp;<span class="ident" id="6685153">src</span><span class="op" id="6685156">,</span>&nbsp;<span class="ident" id="6685158">x</span><span class="op" id="6685159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6685166">//&nbsp;an&nbsp;invalid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6685192">src</span>&nbsp;<span class="op" id="6685196">=</span>&nbsp;<span class="string" id="6685198">&#34;a&nbsp;+&nbsp;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6685207">if</span>&nbsp;<span class="ident" id="6685210">_</span><span class="op" id="6685211">,</span>&nbsp;<span class="ident" id="6685213">err</span>&nbsp;<span class="op" id="6685217">:=</span>&nbsp;<span class="ident" id="6685220">ParseExpr</span><span class="op" id="6685229">(</span><span class="ident" id="6685230">src</span><span class="op" id="6685233">)</span><span class="op" id="6685234">;</span>&nbsp;<span class="ident" id="6685236">err</span>&nbsp;<span class="op" id="6685240">==</span>&nbsp;<span class="ident" id="6685243">nil</span>&nbsp;<span class="op" id="6685247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6685251">t</span><span class="op" id="6685252">.</span><span class="ident" id="6685253">Errorf</span><span class="op" id="6685259">(</span><span class="string" id="6685260">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="6685289">,</span>&nbsp;<span class="ident" id="6685291">src</span><span class="op" id="6685294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685297">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6685301">//&nbsp;a&nbsp;valid&nbsp;expression&nbsp;followed&nbsp;by&nbsp;extra&nbsp;tokens&nbsp;is&nbsp;invalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6685360">src</span>&nbsp;<span class="op" id="6685364">=</span>&nbsp;<span class="string" id="6685366">&#34;a[i]&nbsp;:=&nbsp;x&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6685379">if</span>&nbsp;<span class="ident" id="6685382">_</span><span class="op" id="6685383">,</span>&nbsp;<span class="ident" id="6685385">err</span>&nbsp;<span class="op" id="6685389">:=</span>&nbsp;<span class="ident" id="6685392">ParseExpr</span><span class="op" id="6685401">(</span><span class="ident" id="6685402">src</span><span class="op" id="6685405">)</span><span class="op" id="6685406">;</span>&nbsp;<span class="ident" id="6685408">err</span>&nbsp;<span class="op" id="6685412">==</span>&nbsp;<span class="ident" id="6685415">nil</span>&nbsp;<span class="op" id="6685419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6685423">t</span><span class="op" id="6685424">.</span><span class="ident" id="6685425">Errorf</span><span class="op" id="6685431">(</span><span class="string" id="6685432">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="6685461">,</span>&nbsp;<span class="ident" id="6685463">src</span><span class="op" id="6685466">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6685473">//&nbsp;a&nbsp;semicolon&nbsp;is&nbsp;not&nbsp;permitted&nbsp;unless&nbsp;automatically&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6685536">src</span>&nbsp;<span class="op" id="6685540">=</span>&nbsp;<span class="string" id="6685542">&#34;a&nbsp;+&nbsp;b\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6685553">if</span>&nbsp;<span class="ident" id="6685556">_</span><span class="op" id="6685557">,</span>&nbsp;<span class="ident" id="6685559">err</span>&nbsp;<span class="op" id="6685563">:=</span>&nbsp;<span class="ident" id="6685566">ParseExpr</span><span class="op" id="6685575">(</span><span class="ident" id="6685576">src</span><span class="op" id="6685579">)</span><span class="op" id="6685580">;</span>&nbsp;<span class="ident" id="6685582">err</span>&nbsp;<span class="op" id="6685586">!=</span>&nbsp;<span class="ident" id="6685589">nil</span>&nbsp;<span class="op" id="6685593">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6685597">t</span><span class="op" id="6685598">.</span><span class="ident" id="6685599">Errorf</span><span class="op" id="6685605">(</span><span class="string" id="6685606">&#34;ParseExpr(%q):&nbsp;got&nbsp;error&nbsp;%s&#34;</span><span class="op" id="6685635">,</span>&nbsp;<span class="ident" id="6685637">src</span><span class="op" id="6685640">,</span>&nbsp;<span class="ident" id="6685642">err</span><span class="op" id="6685645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6685651">src</span>&nbsp;<span class="op" id="6685655">=</span>&nbsp;<span class="string" id="6685657">&#34;a&nbsp;+&nbsp;b;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6685667">if</span>&nbsp;<span class="ident" id="6685670">_</span><span class="op" id="6685671">,</span>&nbsp;<span class="ident" id="6685673">err</span>&nbsp;<span class="op" id="6685677">:=</span>&nbsp;<span class="ident" id="6685680">ParseExpr</span><span class="op" id="6685689">(</span><span class="ident" id="6685690">src</span><span class="op" id="6685693">)</span><span class="op" id="6685694">;</span>&nbsp;<span class="ident" id="6685696">err</span>&nbsp;<span class="op" id="6685700">==</span>&nbsp;<span class="ident" id="6685703">nil</span>&nbsp;<span class="op" id="6685707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6685711">t</span><span class="op" id="6685712">.</span><span class="ident" id="6685713">Errorf</span><span class="op" id="6685719">(</span><span class="string" id="6685720">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="6685749">,</span>&nbsp;<span class="ident" id="6685751">src</span><span class="op" id="6685754">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6685757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6685761">//&nbsp;various&nbsp;other&nbsp;stuff&nbsp;following&nbsp;a&nbsp;valid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6685814">const</span>&nbsp;<span class="ident" id="6685820">validExpr</span>&nbsp;<span class="op" id="6685830">=</span>&nbsp;<span class="string" id="6685832">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6685841">const</span>&nbsp;<span class="ident" id="6685847">anything</span>&nbsp;<span class="op" id="6685856">=</span>&nbsp;<span class="string" id="6685858">&#34;dh3*#D)#_&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6685871">for</span>&nbsp;<span class="ident" id="6685875">_</span><span class="op" id="6685876">,</span>&nbsp;<span class="ident" id="6685878">c</span>&nbsp;<span class="op" id="6685880">:=</span>&nbsp;<span class="keyword" id="6685883">range</span>&nbsp;<span class="string" id="6685889">&#34;!)]};,&#34;</span>&nbsp;<span class="op" id="6685898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6685902">src</span>&nbsp;<span class="op" id="6685906">:=</span>&nbsp;<span class="ident" id="6685909">validExpr</span>&nbsp;<span class="op" id="6685919">+</span>&nbsp;<span class="builtintype" id="6685921">string</span><span class="op" id="6685927">(</span><span class="ident" id="6685928">c</span><span class="op" id="6685929">)</span>&nbsp;<span class="op" id="6685931">+</span>&nbsp;<span class="ident" id="6685933">anything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6685944">if</span>&nbsp;<span class="ident" id="6685947">_</span><span class="op" id="6685948">,</span>&nbsp;<span class="ident" id="6685950">err</span>&nbsp;<span class="op" id="6685954">:=</span>&nbsp;<span class="ident" id="6685957">ParseExpr</span><span class="op" id="6685966">(</span><span class="ident" id="6685967">src</span><span class="op" id="6685970">)</span><span class="op" id="6685971">;</span>&nbsp;<span class="ident" id="6685973">err</span>&nbsp;<span class="op" id="6685977">==</span>&nbsp;<span class="ident" id="6685980">nil</span>&nbsp;<span class="op" id="6685984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6685989">t</span><span class="op" id="6685990">.</span><span class="ident" id="6685991">Errorf</span><span class="op" id="6685997">(</span><span class="string" id="6685998">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="6686027">,</span>&nbsp;<span class="ident" id="6686029">src</span><span class="op" id="6686032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686036">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6686043">//&nbsp;ParseExpr&nbsp;must&nbsp;not&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686072">for</span>&nbsp;<span class="ident" id="6686076">_</span><span class="op" id="6686077">,</span>&nbsp;<span class="ident" id="6686079">src</span>&nbsp;<span class="op" id="6686083">:=</span>&nbsp;<span class="keyword" id="6686086">range</span>&nbsp;<span class="ident" id="6686092">valids</span>&nbsp;<span class="op" id="6686099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686103">ParseExpr</span><span class="op" id="6686112">(</span><span class="ident" id="6686113">src</span><span class="op" id="6686116">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686119">}</span><br>
<span class="lineno"></span><span class="op" id="6686121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6686124">func</span>&nbsp;<span class="ident" id="6686129">TestColonEqualsScope</span><span class="op" id="6686149">(</span><span class="ident" id="6686150">t</span>&nbsp;<span class="op" id="6686152">*</span><span class="ident" id="6686153">testing</span><span class="op" id="6686160">.</span><span class="ident" id="6686161">T</span><span class="op" id="6686162">)</span>&nbsp;<span class="op" id="6686164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686167">f</span><span class="op" id="6686168">,</span>&nbsp;<span class="ident" id="6686170">err</span>&nbsp;<span class="op" id="6686174">:=</span>&nbsp;<span class="ident" id="6686177">ParseFile</span><span class="op" id="6686186">(</span><span class="ident" id="6686187">fset</span><span class="op" id="6686191">,</span>&nbsp;<span class="string" id="6686193">&#34;&#34;</span><span class="op" id="6686195">,</span>&nbsp;<span class="string" id="6686197">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;x,&nbsp;y,&nbsp;z&nbsp;:=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="6686241">,</span>&nbsp;<span class="num" id="6686243">0</span><span class="op" id="6686244">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686247">if</span>&nbsp;<span class="ident" id="6686250">err</span>&nbsp;<span class="op" id="6686254">!=</span>&nbsp;<span class="ident" id="6686257">nil</span>&nbsp;<span class="op" id="6686261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686265">t</span><span class="op" id="6686266">.</span><span class="ident" id="6686267">Fatal</span><span class="op" id="6686272">(</span><span class="ident" id="6686273">err</span><span class="op" id="6686276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6686283">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686334">as</span>&nbsp;<span class="op" id="6686337">:=</span>&nbsp;<span class="ident" id="6686340">f</span><span class="op" id="6686341">.</span><span class="ident" id="6686342">Decls</span><span class="op" id="6686347">[</span><span class="num" id="6686348">0</span><span class="op" id="6686349">]</span><span class="op" id="6686350">.</span><span class="op" id="6686351">(</span><span class="op" id="6686352">*</span><span class="ident" id="6686353">ast</span><span class="op" id="6686356">.</span><span class="ident" id="6686357">FuncDecl</span><span class="op" id="6686365">)</span><span class="op" id="6686366">.</span><span class="ident" id="6686367">Body</span><span class="op" id="6686371">.</span><span class="ident" id="6686372">List</span><span class="op" id="6686376">[</span><span class="num" id="6686377">0</span><span class="op" id="6686378">]</span><span class="op" id="6686379">.</span><span class="op" id="6686380">(</span><span class="op" id="6686381">*</span><span class="ident" id="6686382">ast</span><span class="op" id="6686385">.</span><span class="ident" id="6686386">AssignStmt</span><span class="op" id="6686396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686399">for</span>&nbsp;<span class="ident" id="6686403">_</span><span class="op" id="6686404">,</span>&nbsp;<span class="ident" id="6686406">v</span>&nbsp;<span class="op" id="6686408">:=</span>&nbsp;<span class="keyword" id="6686411">range</span>&nbsp;<span class="ident" id="6686417">as</span><span class="op" id="6686419">.</span><span class="ident" id="6686420">Rhs</span>&nbsp;<span class="op" id="6686424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686428">id</span>&nbsp;<span class="op" id="6686431">:=</span>&nbsp;<span class="ident" id="6686434">v</span><span class="op" id="6686435">.</span><span class="op" id="6686436">(</span><span class="op" id="6686437">*</span><span class="ident" id="6686438">ast</span><span class="op" id="6686441">.</span><span class="ident" id="6686442">Ident</span><span class="op" id="6686447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686451">if</span>&nbsp;<span class="ident" id="6686454">id</span><span class="op" id="6686456">.</span><span class="ident" id="6686457">Obj</span>&nbsp;<span class="op" id="6686461">!=</span>&nbsp;<span class="ident" id="6686464">nil</span>&nbsp;<span class="op" id="6686468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686473">t</span><span class="op" id="6686474">.</span><span class="ident" id="6686475">Errorf</span><span class="op" id="6686481">(</span><span class="string" id="6686482">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="6686510">,</span>&nbsp;<span class="ident" id="6686512">id</span><span class="op" id="6686514">.</span><span class="ident" id="6686515">Name</span><span class="op" id="6686519">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686529">for</span>&nbsp;<span class="ident" id="6686533">_</span><span class="op" id="6686534">,</span>&nbsp;<span class="ident" id="6686536">v</span>&nbsp;<span class="op" id="6686538">:=</span>&nbsp;<span class="keyword" id="6686541">range</span>&nbsp;<span class="ident" id="6686547">as</span><span class="op" id="6686549">.</span><span class="ident" id="6686550">Lhs</span>&nbsp;<span class="op" id="6686554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686558">id</span>&nbsp;<span class="op" id="6686561">:=</span>&nbsp;<span class="ident" id="6686564">v</span><span class="op" id="6686565">.</span><span class="op" id="6686566">(</span><span class="op" id="6686567">*</span><span class="ident" id="6686568">ast</span><span class="op" id="6686571">.</span><span class="ident" id="6686572">Ident</span><span class="op" id="6686577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686581">if</span>&nbsp;<span class="ident" id="6686584">id</span><span class="op" id="6686586">.</span><span class="ident" id="6686587">Obj</span>&nbsp;<span class="op" id="6686591">==</span>&nbsp;<span class="ident" id="6686594">nil</span>&nbsp;<span class="op" id="6686598">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686603">t</span><span class="op" id="6686604">.</span><span class="ident" id="6686605">Errorf</span><span class="op" id="6686611">(</span><span class="string" id="6686612">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="6686646">,</span>&nbsp;<span class="ident" id="6686648">id</span><span class="op" id="6686650">.</span><span class="ident" id="6686651">Name</span><span class="op" id="6686655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686662">}</span><br>
<span class="lineno"></span><span class="op" id="6686664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="6686667">func</span>&nbsp;<span class="ident" id="6686672">TestVarScope</span><span class="op" id="6686684">(</span><span class="ident" id="6686685">t</span>&nbsp;<span class="op" id="6686687">*</span><span class="ident" id="6686688">testing</span><span class="op" id="6686695">.</span><span class="ident" id="6686696">T</span><span class="op" id="6686697">)</span>&nbsp;<span class="op" id="6686699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686702">f</span><span class="op" id="6686703">,</span>&nbsp;<span class="ident" id="6686705">err</span>&nbsp;<span class="op" id="6686709">:=</span>&nbsp;<span class="ident" id="6686712">ParseFile</span><span class="op" id="6686721">(</span><span class="ident" id="6686722">fset</span><span class="op" id="6686726">,</span>&nbsp;<span class="string" id="6686728">&#34;&#34;</span><span class="op" id="6686730">,</span>&nbsp;<span class="string" id="6686732">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;var&nbsp;x,&nbsp;y,&nbsp;z&nbsp;=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="6686779">,</span>&nbsp;<span class="num" id="6686781">0</span><span class="op" id="6686782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686785">if</span>&nbsp;<span class="ident" id="6686788">err</span>&nbsp;<span class="op" id="6686792">!=</span>&nbsp;<span class="ident" id="6686795">nil</span>&nbsp;<span class="op" id="6686799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686803">t</span><span class="op" id="6686804">.</span><span class="ident" id="6686805">Fatal</span><span class="op" id="6686810">(</span><span class="ident" id="6686811">err</span><span class="op" id="6686814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6686817">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6686821">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6686872">as</span>&nbsp;<span class="op" id="6686875">:=</span>&nbsp;<span class="ident" id="6686878">f</span><span class="op" id="6686879">.</span><span class="ident" id="6686880">Decls</span><span class="op" id="6686885">[</span><span class="num" id="6686886">0</span><span class="op" id="6686887">]</span><span class="op" id="6686888">.</span><span class="op" id="6686889">(</span><span class="op" id="6686890">*</span><span class="ident" id="6686891">ast</span><span class="op" id="6686894">.</span><span class="ident" id="6686895">FuncDecl</span><span class="op" id="6686903">)</span><span class="op" id="6686904">.</span><span class="ident" id="6686905">Body</span><span class="op" id="6686909">.</span><span class="ident" id="6686910">List</span><span class="op" id="6686914">[</span><span class="num" id="6686915">0</span><span class="op" id="6686916">]</span><span class="op" id="6686917">.</span><span class="op" id="6686918">(</span><span class="op" id="6686919">*</span><span class="ident" id="6686920">ast</span><span class="op" id="6686923">.</span><span class="ident" id="6686924">DeclStmt</span><span class="op" id="6686932">)</span><span class="op" id="6686933">.</span><span class="ident" id="6686934">Decl</span><span class="op" id="6686938">.</span><span class="op" id="6686939">(</span><span class="op" id="6686940">*</span><span class="ident" id="6686941">ast</span><span class="op" id="6686944">.</span><span class="ident" id="6686945">GenDecl</span><span class="op" id="6686952">)</span><span class="op" id="6686953">.</span><span class="ident" id="6686954">Specs</span><span class="op" id="6686959">[</span><span class="num" id="6686960">0</span><span class="op" id="6686961">]</span><span class="op" id="6686962">.</span><span class="op" id="6686963">(</span><span class="op" id="6686964">*</span><span class="ident" id="6686965">ast</span><span class="op" id="6686968">.</span><span class="ident" id="6686969">ValueSpec</span><span class="op" id="6686978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6686981">for</span>&nbsp;<span class="ident" id="6686985">_</span><span class="op" id="6686986">,</span>&nbsp;<span class="ident" id="6686988">v</span>&nbsp;<span class="op" id="6686990">:=</span>&nbsp;<span class="keyword" id="6686993">range</span>&nbsp;<span class="ident" id="6686999">as</span><span class="op" id="6687001">.</span><span class="ident" id="6687002">Values</span>&nbsp;<span class="op" id="6687009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687013">id</span>&nbsp;<span class="op" id="6687016">:=</span>&nbsp;<span class="ident" id="6687019">v</span><span class="op" id="6687020">.</span><span class="op" id="6687021">(</span><span class="op" id="6687022">*</span><span class="ident" id="6687023">ast</span><span class="op" id="6687026">.</span><span class="ident" id="6687027">Ident</span><span class="op" id="6687032">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687036">if</span>&nbsp;<span class="ident" id="6687039">id</span><span class="op" id="6687041">.</span><span class="ident" id="6687042">Obj</span>&nbsp;<span class="op" id="6687046">!=</span>&nbsp;<span class="ident" id="6687049">nil</span>&nbsp;<span class="op" id="6687053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687058">t</span><span class="op" id="6687059">.</span><span class="ident" id="6687060">Errorf</span><span class="op" id="6687066">(</span><span class="string" id="6687067">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="6687095">,</span>&nbsp;<span class="ident" id="6687097">id</span><span class="op" id="6687099">.</span><span class="ident" id="6687100">Name</span><span class="op" id="6687104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687114">for</span>&nbsp;<span class="ident" id="6687118">_</span><span class="op" id="6687119">,</span>&nbsp;<span class="ident" id="6687121">id</span>&nbsp;<span class="op" id="6687124">:=</span>&nbsp;<span class="keyword" id="6687127">range</span>&nbsp;<span class="ident" id="6687133">as</span><span class="op" id="6687135">.</span><span class="ident" id="6687136">Names</span>&nbsp;<span class="op" id="6687142">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687146">if</span>&nbsp;<span class="ident" id="6687149">id</span><span class="op" id="6687151">.</span><span class="ident" id="6687152">Obj</span>&nbsp;<span class="op" id="6687156">==</span>&nbsp;<span class="ident" id="6687159">nil</span>&nbsp;<span class="op" id="6687163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687168">t</span><span class="op" id="6687169">.</span><span class="ident" id="6687170">Errorf</span><span class="op" id="6687176">(</span><span class="string" id="6687177">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="6687211">,</span>&nbsp;<span class="ident" id="6687213">id</span><span class="op" id="6687215">.</span><span class="ident" id="6687216">Name</span><span class="op" id="6687220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687227">}</span><br>
<span class="lineno"></span><span class="op" id="6687229">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="6687232">func</span>&nbsp;<span class="ident" id="6687237">TestObjects</span><span class="op" id="6687248">(</span><span class="ident" id="6687249">t</span>&nbsp;<span class="op" id="6687251">*</span><span class="ident" id="6687252">testing</span><span class="op" id="6687259">.</span><span class="ident" id="6687260">T</span><span class="op" id="6687261">)</span>&nbsp;<span class="op" id="6687263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687266">const</span>&nbsp;<span class="ident" id="6687272">src</span>&nbsp;<span class="op" id="6687276">=</span>&nbsp;<span class="string" id="6687278">`<br>
<span class="lineno"></span>package&nbsp;p<br>
<span class="lineno"></span>import&nbsp;fmt&nbsp;&#34;fmt&#34;<br>
<span class="lineno">180</span>const&nbsp;pi&nbsp;=&nbsp;3.14<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct{}<br>
<span class="lineno"></span>var&nbsp;x&nbsp;int<br>
<span class="lineno"></span>func&nbsp;f()&nbsp;{&nbsp;L:&nbsp;}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687369">f</span><span class="op" id="6687370">,</span>&nbsp;<span class="ident" id="6687372">err</span>&nbsp;<span class="op" id="6687376">:=</span>&nbsp;<span class="ident" id="6687379">ParseFile</span><span class="op" id="6687388">(</span><span class="ident" id="6687389">fset</span><span class="op" id="6687393">,</span>&nbsp;<span class="string" id="6687395">&#34;&#34;</span><span class="op" id="6687397">,</span>&nbsp;<span class="ident" id="6687399">src</span><span class="op" id="6687402">,</span>&nbsp;<span class="num" id="6687404">0</span><span class="op" id="6687405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687408">if</span>&nbsp;<span class="ident" id="6687411">err</span>&nbsp;<span class="op" id="6687415">!=</span>&nbsp;<span class="ident" id="6687418">nil</span>&nbsp;<span class="op" id="6687422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687426">t</span><span class="op" id="6687427">.</span><span class="ident" id="6687428">Fatal</span><span class="op" id="6687433">(</span><span class="ident" id="6687434">err</span><span class="op" id="6687437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687440">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687444">objects</span>&nbsp;<span class="op" id="6687452">:=</span>&nbsp;<span class="keyword" id="6687455">map</span><span class="op" id="6687458">[</span><span class="builtintype" id="6687459">string</span><span class="op" id="6687465">]</span><span class="ident" id="6687466">ast</span><span class="op" id="6687469">.</span><span class="ident" id="6687470">ObjKind</span><span class="op" id="6687477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687481">&#34;p&#34;</span><span class="op" id="6687484">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6687488">ast</span><span class="op" id="6687491">.</span><span class="ident" id="6687492">Bad</span><span class="op" id="6687495">,</span>&nbsp;<span class="comment" id="6687497">//&nbsp;not&nbsp;in&nbsp;a&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687517">&#34;fmt&#34;</span><span class="op" id="6687522">:</span>&nbsp;<span class="ident" id="6687524">ast</span><span class="op" id="6687527">.</span><span class="ident" id="6687528">Bad</span><span class="op" id="6687531">,</span>&nbsp;<span class="comment" id="6687533">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687555">&#34;pi&#34;</span><span class="op" id="6687559">:</span>&nbsp;&nbsp;<span class="ident" id="6687562">ast</span><span class="op" id="6687565">.</span><span class="ident" id="6687566">Con</span><span class="op" id="6687569">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687573">&#34;T&#34;</span><span class="op" id="6687576">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6687580">ast</span><span class="op" id="6687583">.</span><span class="ident" id="6687584">Typ</span><span class="op" id="6687587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687591">&#34;x&#34;</span><span class="op" id="6687594">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6687598">ast</span><span class="op" id="6687601">.</span><span class="ident" id="6687602">Var</span><span class="op" id="6687605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687609">&#34;int&#34;</span><span class="op" id="6687614">:</span>&nbsp;<span class="ident" id="6687616">ast</span><span class="op" id="6687619">.</span><span class="ident" id="6687620">Bad</span><span class="op" id="6687623">,</span>&nbsp;<span class="comment" id="6687625">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687647">&#34;f&#34;</span><span class="op" id="6687650">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6687654">ast</span><span class="op" id="6687657">.</span><span class="ident" id="6687658">Fun</span><span class="op" id="6687661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687665">&#34;L&#34;</span><span class="op" id="6687668">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6687672">ast</span><span class="op" id="6687675">.</span><span class="ident" id="6687676">Lbl</span><span class="op" id="6687679">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687686">ast</span><span class="op" id="6687689">.</span><span class="ident" id="6687690">Inspect</span><span class="op" id="6687697">(</span><span class="ident" id="6687698">f</span><span class="op" id="6687699">,</span>&nbsp;<span class="keyword" id="6687701">func</span><span class="op" id="6687705">(</span><span class="ident" id="6687706">n</span>&nbsp;<span class="ident" id="6687708">ast</span><span class="op" id="6687711">.</span><span class="ident" id="6687712">Node</span><span class="op" id="6687716">)</span>&nbsp;<span class="builtintype" id="6687718">bool</span>&nbsp;<span class="op" id="6687723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687727">if</span>&nbsp;<span class="ident" id="6687730">ident</span><span class="op" id="6687735">,</span>&nbsp;<span class="ident" id="6687737">ok</span>&nbsp;<span class="op" id="6687740">:=</span>&nbsp;<span class="ident" id="6687743">n</span><span class="op" id="6687744">.</span><span class="op" id="6687745">(</span><span class="op" id="6687746">*</span><span class="ident" id="6687747">ast</span><span class="op" id="6687750">.</span><span class="ident" id="6687751">Ident</span><span class="op" id="6687756">)</span><span class="op" id="6687757">;</span>&nbsp;<span class="ident" id="6687759">ok</span>&nbsp;<span class="op" id="6687762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687767">obj</span>&nbsp;<span class="op" id="6687771">:=</span>&nbsp;<span class="ident" id="6687774">ident</span><span class="op" id="6687779">.</span><span class="ident" id="6687780">Obj</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687787">if</span>&nbsp;<span class="ident" id="6687790">obj</span>&nbsp;<span class="op" id="6687794">==</span>&nbsp;<span class="ident" id="6687797">nil</span>&nbsp;<span class="op" id="6687801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687807">if</span>&nbsp;<span class="ident" id="6687810">objects</span><span class="op" id="6687817">[</span><span class="ident" id="6687818">ident</span><span class="op" id="6687823">.</span><span class="ident" id="6687824">Name</span><span class="op" id="6687828">]</span>&nbsp;<span class="op" id="6687830">!=</span>&nbsp;<span class="ident" id="6687833">ast</span><span class="op" id="6687836">.</span><span class="ident" id="6687837">Bad</span>&nbsp;<span class="op" id="6687841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687848">t</span><span class="op" id="6687849">.</span><span class="ident" id="6687850">Errorf</span><span class="op" id="6687856">(</span><span class="string" id="6687857">&#34;no&nbsp;object&nbsp;for&nbsp;%s&#34;</span><span class="op" id="6687875">,</span>&nbsp;<span class="ident" id="6687877">ident</span><span class="op" id="6687882">.</span><span class="ident" id="6687883">Name</span><span class="op" id="6687887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687899">return</span>&nbsp;<span class="builtintype" id="6687906">true</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6687914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6687919">if</span>&nbsp;<span class="ident" id="6687922">obj</span><span class="op" id="6687925">.</span><span class="ident" id="6687926">Name</span>&nbsp;<span class="op" id="6687931">!=</span>&nbsp;<span class="ident" id="6687934">ident</span><span class="op" id="6687939">.</span><span class="ident" id="6687940">Name</span>&nbsp;<span class="op" id="6687945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6687951">t</span><span class="op" id="6687952">.</span><span class="ident" id="6687953">Errorf</span><span class="op" id="6687959">(</span><span class="string" id="6687960">&#34;names&nbsp;don&#39;t&nbsp;match:&nbsp;obj.Name&nbsp;=&nbsp;%s,&nbsp;ident.Name&nbsp;=&nbsp;%s&#34;</span><span class="op" id="6688011">,</span>&nbsp;<span class="ident" id="6688013">obj</span><span class="op" id="6688016">.</span><span class="ident" id="6688017">Name</span><span class="op" id="6688021">,</span>&nbsp;<span class="ident" id="6688023">ident</span><span class="op" id="6688028">.</span><span class="ident" id="6688029">Name</span><span class="op" id="6688033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688043">kind</span>&nbsp;<span class="op" id="6688048">:=</span>&nbsp;<span class="ident" id="6688051">objects</span><span class="op" id="6688058">[</span><span class="ident" id="6688059">ident</span><span class="op" id="6688064">.</span><span class="ident" id="6688065">Name</span><span class="op" id="6688069">]</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688074">if</span>&nbsp;<span class="ident" id="6688077">obj</span><span class="op" id="6688080">.</span><span class="ident" id="6688081">Kind</span>&nbsp;<span class="op" id="6688086">!=</span>&nbsp;<span class="ident" id="6688089">kind</span>&nbsp;<span class="op" id="6688094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688100">t</span><span class="op" id="6688101">.</span><span class="ident" id="6688102">Errorf</span><span class="op" id="6688108">(</span><span class="string" id="6688109">&#34;%s:&nbsp;obj.Kind&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6688137">,</span>&nbsp;<span class="ident" id="6688139">ident</span><span class="op" id="6688144">.</span><span class="ident" id="6688145">Name</span><span class="op" id="6688149">,</span>&nbsp;<span class="ident" id="6688151">obj</span><span class="op" id="6688154">.</span><span class="ident" id="6688155">Kind</span><span class="op" id="6688159">,</span>&nbsp;<span class="ident" id="6688161">kind</span><span class="op" id="6688165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688178">return</span>&nbsp;<span class="builtintype" id="6688185">true</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688191">}</span><span class="op" id="6688192">)</span><br>
<span class="lineno"></span><span class="op" id="6688194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6688197">func</span>&nbsp;<span class="ident" id="6688202">TestUnresolved</span><span class="op" id="6688216">(</span><span class="ident" id="6688217">t</span>&nbsp;<span class="op" id="6688219">*</span><span class="ident" id="6688220">testing</span><span class="op" id="6688227">.</span><span class="ident" id="6688228">T</span><span class="op" id="6688229">)</span>&nbsp;<span class="op" id="6688231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688234">f</span><span class="op" id="6688235">,</span>&nbsp;<span class="ident" id="6688237">err</span>&nbsp;<span class="op" id="6688241">:=</span>&nbsp;<span class="ident" id="6688244">ParseFile</span><span class="op" id="6688253">(</span><span class="ident" id="6688254">fset</span><span class="op" id="6688258">,</span>&nbsp;<span class="string" id="6688260">&#34;&#34;</span><span class="op" id="6688262">,</span>&nbsp;<span class="string" id="6688264">`<br>
<span class="lineno">225</span>package&nbsp;p<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1a(int)<br>
<span class="lineno"></span>func&nbsp;f2a(byte,&nbsp;int,&nbsp;float)<br>
<span class="lineno"></span>func&nbsp;f3a(a,&nbsp;b&nbsp;int,&nbsp;c&nbsp;float)<br>
<span class="lineno">230</span>func&nbsp;f4a(...complex)<br>
<span class="lineno"></span>func&nbsp;f5a(a&nbsp;s1a,&nbsp;b&nbsp;...complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1b(*int)<br>
<span class="lineno"></span>func&nbsp;f2b([]byte,&nbsp;(int),&nbsp;*float)<br>
<span class="lineno">235</span>func&nbsp;f3b(a,&nbsp;b&nbsp;*int,&nbsp;c&nbsp;[]float)<br>
<span class="lineno"></span>func&nbsp;f4b(...*complex)<br>
<span class="lineno"></span>func&nbsp;f5b(a&nbsp;s1a,&nbsp;b&nbsp;...[]complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1a&nbsp;struct&nbsp;{&nbsp;int&nbsp;}<br>
<span class="lineno">240</span>type&nbsp;s2a&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;s1a&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s3a&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;int;&nbsp;c&nbsp;float&nbsp;}<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1b&nbsp;struct&nbsp;{&nbsp;*int&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s2b&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;*float&nbsp;}<br>
<span class="lineno">245</span>type&nbsp;s3b&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;*s3b;&nbsp;c&nbsp;[]float&nbsp;}<br>
<span class="lineno"></span>`</span><span class="op" id="6688742">,</span>&nbsp;<span class="num" id="6688744">0</span><span class="op" id="6688745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688748">if</span>&nbsp;<span class="ident" id="6688751">err</span>&nbsp;<span class="op" id="6688755">!=</span>&nbsp;<span class="ident" id="6688758">nil</span>&nbsp;<span class="op" id="6688762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688766">t</span><span class="op" id="6688767">.</span><span class="ident" id="6688768">Fatal</span><span class="op" id="6688773">(</span><span class="ident" id="6688774">err</span><span class="op" id="6688777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688780">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688784">want</span>&nbsp;<span class="op" id="6688789">:=</span>&nbsp;<span class="string" id="6688792">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="6688799">+</span>&nbsp;<span class="comment" id="6688801">//&nbsp;f1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6688810">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="6688828">+</span>&nbsp;<span class="comment" id="6688830">//&nbsp;f2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6688839">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="6688852">+</span>&nbsp;<span class="comment" id="6688854">//&nbsp;f3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6688863">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="6688874">+</span>&nbsp;<span class="comment" id="6688876">//&nbsp;f4a</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6688885">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="6688896">+</span>&nbsp;<span class="comment" id="6688898">//&nbsp;f5a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6688907">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6688912">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="6688919">+</span>&nbsp;<span class="comment" id="6688921">//&nbsp;f1b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6688930">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="6688948">+</span>&nbsp;<span class="comment" id="6688950">//&nbsp;f2b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6688959">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="6688972">+</span>&nbsp;<span class="comment" id="6688974">//&nbsp;f3b</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6688983">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="6688994">+</span>&nbsp;<span class="comment" id="6688996">//&nbsp;f4b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689005">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="6689016">+</span>&nbsp;<span class="comment" id="6689018">//&nbsp;f5b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6689027">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689032">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="6689039">+</span>&nbsp;<span class="comment" id="6689041">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689050">&#34;byte&nbsp;int&nbsp;&#34;</span>&nbsp;<span class="op" id="6689062">+</span>&nbsp;<span class="comment" id="6689064">//&nbsp;s2a</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689073">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="6689086">+</span>&nbsp;<span class="comment" id="6689088">//&nbsp;s3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6689097">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689102">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="6689109">+</span>&nbsp;<span class="comment" id="6689111">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689120">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="6689138">+</span>&nbsp;<span class="comment" id="6689140">//&nbsp;s2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689149">&#34;float&nbsp;&#34;</span>&nbsp;<span class="comment" id="6689158">//&nbsp;s3a</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6689167">//&nbsp;collect&nbsp;unresolved&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689202">var</span>&nbsp;<span class="ident" id="6689206">buf</span>&nbsp;<span class="ident" id="6689210">bytes</span><span class="op" id="6689215">.</span><span class="ident" id="6689216">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689224">for</span>&nbsp;<span class="ident" id="6689228">_</span><span class="op" id="6689229">,</span>&nbsp;<span class="ident" id="6689231">u</span>&nbsp;<span class="op" id="6689233">:=</span>&nbsp;<span class="keyword" id="6689236">range</span>&nbsp;<span class="ident" id="6689242">f</span><span class="op" id="6689243">.</span><span class="ident" id="6689244">Unresolved</span>&nbsp;<span class="op" id="6689255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689259">buf</span><span class="op" id="6689262">.</span><span class="ident" id="6689263">WriteString</span><span class="op" id="6689274">(</span><span class="ident" id="6689275">u</span><span class="op" id="6689276">.</span><span class="ident" id="6689277">Name</span><span class="op" id="6689281">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689285">buf</span><span class="op" id="6689288">.</span><span class="ident" id="6689289">WriteByte</span><span class="op" id="6689298">(</span><span class="string" id="6689299">&#39;&nbsp;&#39;</span><span class="op" id="6689302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689308">got</span>&nbsp;<span class="op" id="6689312">:=</span>&nbsp;<span class="ident" id="6689315">buf</span><span class="op" id="6689318">.</span><span class="ident" id="6689319">String</span><span class="op" id="6689325">(</span><span class="op" id="6689326">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689330">if</span>&nbsp;<span class="ident" id="6689333">got</span>&nbsp;<span class="op" id="6689337">!=</span>&nbsp;<span class="ident" id="6689340">want</span>&nbsp;<span class="op" id="6689345">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689349">t</span><span class="op" id="6689350">.</span><span class="ident" id="6689351">Errorf</span><span class="op" id="6689357">(</span><span class="string" id="6689358">&#34;\ngot:&nbsp;&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="6689380">,</span>&nbsp;<span class="ident" id="6689382">got</span><span class="op" id="6689385">,</span>&nbsp;<span class="ident" id="6689387">want</span><span class="op" id="6689391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689394">}</span><br>
<span class="lineno"></span><span class="op" id="6689396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6689399">var</span>&nbsp;<span class="ident" id="6689403">imports</span>&nbsp;<span class="op" id="6689411">=</span>&nbsp;<span class="keyword" id="6689413">map</span><span class="op" id="6689416">[</span><span class="builtintype" id="6689417">string</span><span class="op" id="6689423">]</span><span class="builtintype" id="6689424">bool</span><span class="op" id="6689428">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689431">`&#34;a&#34;`</span><span class="op" id="6689436">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689445">true</span><span class="op" id="6689449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689452">&#34;`a`&#34;</span><span class="op" id="6689457">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689466">true</span><span class="op" id="6689470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689473">`&#34;a/b&#34;`</span><span class="op" id="6689480">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689487">true</span><span class="op" id="6689491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689494">`&#34;a.b&#34;`</span><span class="op" id="6689501">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689508">true</span><span class="op" id="6689512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689515">`&#34;m\x61th&#34;`</span><span class="op" id="6689526">:</span>&nbsp;&nbsp;<span class="builtintype" id="6689529">true</span><span class="op" id="6689533">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689536">`&#34;greek/&#34;`</span><span class="op" id="6689550">:</span>&nbsp;<span class="builtintype" id="6689552">true</span><span class="op" id="6689556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689559">`&#34;&#34;`</span><span class="op" id="6689563">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689573">false</span><span class="op" id="6689578">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6689582">//&nbsp;Each&nbsp;of&nbsp;these&nbsp;pairs&nbsp;tests&nbsp;both&nbsp;``&nbsp;vs&nbsp;&#34;&#34;&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6689634">//&nbsp;and&nbsp;also&nbsp;use&nbsp;of&nbsp;invalid&nbsp;characters&nbsp;spelled&nbsp;out&nbsp;as</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6689688">//&nbsp;escape&nbsp;sequences&nbsp;and&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6689731">//&nbsp;For&nbsp;example&nbsp;`&#34;\x00&#34;`&nbsp;tests&nbsp;import&nbsp;&#34;\x00&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6689776">//&nbsp;while&nbsp;&#34;`\x00`&#34;&nbsp;tests&nbsp;import&nbsp;`&lt;actual-NUL-byte&gt;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689829">`&#34;\x00&#34;`</span><span class="op" id="6689837">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689843">false</span><span class="op" id="6689848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689851">&#34;`\x00`&#34;</span><span class="op" id="6689859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689865">false</span><span class="op" id="6689870">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689873">`&#34;\x7f&#34;`</span><span class="op" id="6689881">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689887">false</span><span class="op" id="6689892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689895">&#34;`\x7f`&#34;</span><span class="op" id="6689903">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689909">false</span><span class="op" id="6689914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689917">`&#34;a!&#34;`</span><span class="op" id="6689923">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689931">false</span><span class="op" id="6689936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689939">&#34;`a!`&#34;</span><span class="op" id="6689945">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689953">false</span><span class="op" id="6689958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689961">`&#34;a&nbsp;b&#34;`</span><span class="op" id="6689968">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689975">false</span><span class="op" id="6689980">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6689983">&#34;`a&nbsp;b`&#34;</span><span class="op" id="6689990">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6689997">false</span><span class="op" id="6690002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6690005">`&#34;a\\b&#34;`</span><span class="op" id="6690013">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690019">false</span><span class="op" id="6690024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6690027">&#34;`a\\b`&#34;</span><span class="op" id="6690035">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690041">false</span><span class="op" id="6690046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6690049">&#34;\&#34;`a`\&#34;&#34;</span><span class="op" id="6690058">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690063">false</span><span class="op" id="6690068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6690071">&#34;`\&#34;a\&#34;`&#34;</span><span class="op" id="6690080">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690085">false</span><span class="op" id="6690090">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6690093">`&#34;\x80\x80&#34;`</span><span class="op" id="6690105">:</span>&nbsp;<span class="builtintype" id="6690107">false</span><span class="op" id="6690112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6690115">&#34;`\x80\x80`&#34;</span><span class="op" id="6690127">:</span>&nbsp;<span class="builtintype" id="6690129">false</span><span class="op" id="6690134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6690137">`&#34;\xFFFD&#34;`</span><span class="op" id="6690147">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690151">false</span><span class="op" id="6690156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6690159">&#34;`\xFFFD`&#34;</span><span class="op" id="6690169">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6690173">false</span><span class="op" id="6690178">,</span><br>
<span class="lineno"></span><span class="op" id="6690180">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="6690183">func</span>&nbsp;<span class="ident" id="6690188">TestImports</span><span class="op" id="6690199">(</span><span class="ident" id="6690200">t</span>&nbsp;<span class="op" id="6690202">*</span><span class="ident" id="6690203">testing</span><span class="op" id="6690210">.</span><span class="ident" id="6690211">T</span><span class="op" id="6690212">)</span>&nbsp;<span class="op" id="6690214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690217">for</span>&nbsp;<span class="ident" id="6690221">path</span><span class="op" id="6690225">,</span>&nbsp;<span class="ident" id="6690227">isValid</span>&nbsp;<span class="op" id="6690235">:=</span>&nbsp;<span class="keyword" id="6690238">range</span>&nbsp;<span class="ident" id="6690244">imports</span>&nbsp;<span class="op" id="6690252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690256">src</span>&nbsp;<span class="op" id="6690260">:=</span>&nbsp;<span class="ident" id="6690263">fmt</span><span class="op" id="6690266">.</span><span class="ident" id="6690267">Sprintf</span><span class="op" id="6690274">(</span><span class="string" id="6690275">&#34;package&nbsp;p;&nbsp;import&nbsp;%s&#34;</span><span class="op" id="6690297">,</span>&nbsp;<span class="ident" id="6690299">path</span><span class="op" id="6690303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690307">_</span><span class="op" id="6690308">,</span>&nbsp;<span class="ident" id="6690310">err</span>&nbsp;<span class="op" id="6690314">:=</span>&nbsp;<span class="ident" id="6690317">ParseFile</span><span class="op" id="6690326">(</span><span class="ident" id="6690327">fset</span><span class="op" id="6690331">,</span>&nbsp;<span class="string" id="6690333">&#34;&#34;</span><span class="op" id="6690335">,</span>&nbsp;<span class="ident" id="6690337">src</span><span class="op" id="6690340">,</span>&nbsp;<span class="num" id="6690342">0</span><span class="op" id="6690343">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690347">switch</span>&nbsp;<span class="op" id="6690354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690358">case</span>&nbsp;<span class="ident" id="6690363">err</span>&nbsp;<span class="op" id="6690367">!=</span>&nbsp;<span class="ident" id="6690370">nil</span>&nbsp;<span class="op" id="6690374">&amp;&amp;</span>&nbsp;<span class="ident" id="6690377">isValid</span><span class="op" id="6690384">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690389">t</span><span class="op" id="6690390">.</span><span class="ident" id="6690391">Errorf</span><span class="op" id="6690397">(</span><span class="string" id="6690398">&#34;ParseFile(%s):&nbsp;got&nbsp;%v;&nbsp;expected&nbsp;no&nbsp;error&#34;</span><span class="op" id="6690440">,</span>&nbsp;<span class="ident" id="6690442">src</span><span class="op" id="6690445">,</span>&nbsp;<span class="ident" id="6690447">err</span><span class="op" id="6690450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690454">case</span>&nbsp;<span class="ident" id="6690459">err</span>&nbsp;<span class="op" id="6690463">==</span>&nbsp;<span class="ident" id="6690466">nil</span>&nbsp;<span class="op" id="6690470">&amp;&amp;</span>&nbsp;<span class="op" id="6690473">!</span><span class="ident" id="6690474">isValid</span><span class="op" id="6690481">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690486">t</span><span class="op" id="6690487">.</span><span class="ident" id="6690488">Errorf</span><span class="op" id="6690494">(</span><span class="string" id="6690495">&#34;ParseFile(%s):&nbsp;got&nbsp;no&nbsp;error;&nbsp;expected&nbsp;one&#34;</span><span class="op" id="6690538">,</span>&nbsp;<span class="ident" id="6690540">src</span><span class="op" id="6690543">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690550">}</span><br>
<span class="lineno"></span><span class="op" id="6690552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6690555">func</span>&nbsp;<span class="ident" id="6690560">TestCommentGroups</span><span class="op" id="6690577">(</span><span class="ident" id="6690578">t</span>&nbsp;<span class="op" id="6690580">*</span><span class="ident" id="6690581">testing</span><span class="op" id="6690588">.</span><span class="ident" id="6690589">T</span><span class="op" id="6690590">)</span>&nbsp;<span class="op" id="6690592">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690595">f</span><span class="op" id="6690596">,</span>&nbsp;<span class="ident" id="6690598">err</span>&nbsp;<span class="op" id="6690602">:=</span>&nbsp;<span class="ident" id="6690605">ParseFile</span><span class="op" id="6690614">(</span><span class="ident" id="6690615">fset</span><span class="op" id="6690619">,</span>&nbsp;<span class="string" id="6690621">&#34;&#34;</span><span class="op" id="6690623">,</span>&nbsp;<span class="string" id="6690625">`<br>
<span class="lineno"></span>package&nbsp;p&nbsp;/*&nbsp;1a&nbsp;*/&nbsp;/*&nbsp;1b&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;1c&nbsp;*/&nbsp;//&nbsp;1d<br>
<span class="lineno"></span>/*&nbsp;2a<br>
<span class="lineno"></span>*/<br>
<span class="lineno"></span>//&nbsp;2b<br>
<span class="lineno">335</span>const&nbsp;pi&nbsp;=&nbsp;3.1415<br>
<span class="lineno"></span>/*&nbsp;3a&nbsp;*/&nbsp;//&nbsp;3b<br>
<span class="lineno"></span>/*&nbsp;3c&nbsp;*/&nbsp;const&nbsp;e&nbsp;=&nbsp;2.7182<br>
<span class="lineno"></span><br>
<span class="lineno"></span>//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139<br>
<span class="lineno">340</span>func&nbsp;ExampleCount()&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;cheese&#34;,&nbsp;&#34;e&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;five&#34;,&nbsp;&#34;&#34;))&nbsp;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;Output:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;3<br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;5<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><span class="op" id="6690937">,</span>&nbsp;<span class="ident" id="6690939">ParseComments</span><span class="op" id="6690952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690955">if</span>&nbsp;<span class="ident" id="6690958">err</span>&nbsp;<span class="op" id="6690962">!=</span>&nbsp;<span class="ident" id="6690965">nil</span>&nbsp;<span class="op" id="6690969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690973">t</span><span class="op" id="6690974">.</span><span class="ident" id="6690975">Fatal</span><span class="op" id="6690980">(</span><span class="ident" id="6690981">err</span><span class="op" id="6690984">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690990">expected</span>&nbsp;<span class="op" id="6690999">:=</span>&nbsp;<span class="op" id="6691002">[</span><span class="op" id="6691003">]</span><span class="op" id="6691004">[</span><span class="op" id="6691005">]</span><span class="builtintype" id="6691006">string</span><span class="op" id="6691012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691016">{</span><span class="string" id="6691017">&#34;/*&nbsp;1a&nbsp;*/&#34;</span><span class="op" id="6691027">,</span>&nbsp;<span class="string" id="6691029">&#34;/*&nbsp;1b&nbsp;*/&#34;</span><span class="op" id="6691039">,</span>&nbsp;<span class="string" id="6691041">&#34;/*&nbsp;1c&nbsp;*/&#34;</span><span class="op" id="6691051">,</span>&nbsp;<span class="string" id="6691053">&#34;//&nbsp;1d&#34;</span><span class="op" id="6691060">}</span><span class="op" id="6691061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691065">{</span><span class="string" id="6691066">&#34;/*&nbsp;2a\n*/&#34;</span><span class="op" id="6691077">,</span>&nbsp;<span class="string" id="6691079">&#34;//&nbsp;2b&#34;</span><span class="op" id="6691086">}</span><span class="op" id="6691087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691091">{</span><span class="string" id="6691092">&#34;/*&nbsp;3a&nbsp;*/&#34;</span><span class="op" id="6691102">,</span>&nbsp;<span class="string" id="6691104">&#34;//&nbsp;3b&#34;</span><span class="op" id="6691111">,</span>&nbsp;<span class="string" id="6691113">&#34;/*&nbsp;3c&nbsp;*/&#34;</span><span class="op" id="6691123">}</span><span class="op" id="6691124">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691128">{</span><span class="string" id="6691129">&#34;//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139&#34;</span><span class="op" id="6691157">}</span><span class="op" id="6691158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691162">{</span><span class="string" id="6691163">&#34;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune&#34;</span><span class="op" id="6691192">}</span><span class="op" id="6691193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691197">{</span><span class="string" id="6691198">&#34;//&nbsp;Output:&#34;</span><span class="op" id="6691210">,</span>&nbsp;<span class="string" id="6691212">&#34;//&nbsp;3&#34;</span><span class="op" id="6691218">,</span>&nbsp;<span class="string" id="6691220">&#34;//&nbsp;5&#34;</span><span class="op" id="6691226">}</span><span class="op" id="6691227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6691233">if</span>&nbsp;<span class="builtinfunc" id="6691236">len</span><span class="op" id="6691239">(</span><span class="ident" id="6691240">f</span><span class="op" id="6691241">.</span><span class="ident" id="6691242">Comments</span><span class="op" id="6691250">)</span>&nbsp;<span class="op" id="6691252">!=</span>&nbsp;<span class="builtinfunc" id="6691255">len</span><span class="op" id="6691258">(</span><span class="ident" id="6691259">expected</span><span class="op" id="6691267">)</span>&nbsp;<span class="op" id="6691269">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6691273">t</span><span class="op" id="6691274">.</span><span class="ident" id="6691275">Fatalf</span><span class="op" id="6691281">(</span><span class="string" id="6691282">&#34;got&nbsp;%d&nbsp;comment&nbsp;groups;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="6691318">,</span>&nbsp;<span class="builtinfunc" id="6691320">len</span><span class="op" id="6691323">(</span><span class="ident" id="6691324">f</span><span class="op" id="6691325">.</span><span class="ident" id="6691326">Comments</span><span class="op" id="6691334">)</span><span class="op" id="6691335">,</span>&nbsp;<span class="builtinfunc" id="6691337">len</span><span class="op" id="6691340">(</span><span class="ident" id="6691341">expected</span><span class="op" id="6691349">)</span><span class="op" id="6691350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6691356">for</span>&nbsp;<span class="ident" id="6691360">i</span><span class="op" id="6691361">,</span>&nbsp;<span class="ident" id="6691363">exp</span>&nbsp;<span class="op" id="6691367">:=</span>&nbsp;<span class="keyword" id="6691370">range</span>&nbsp;<span class="ident" id="6691376">expected</span>&nbsp;<span class="op" id="6691385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6691389">got</span>&nbsp;<span class="op" id="6691393">:=</span>&nbsp;<span class="ident" id="6691396">f</span><span class="op" id="6691397">.</span><span class="ident" id="6691398">Comments</span><span class="op" id="6691406">[</span><span class="ident" id="6691407">i</span><span class="op" id="6691408">]</span><span class="op" id="6691409">.</span><span class="ident" id="6691410">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6691417">if</span>&nbsp;<span class="builtinfunc" id="6691420">len</span><span class="op" id="6691423">(</span><span class="ident" id="6691424">got</span><span class="op" id="6691427">)</span>&nbsp;<span class="op" id="6691429">!=</span>&nbsp;<span class="builtinfunc" id="6691432">len</span><span class="op" id="6691435">(</span><span class="ident" id="6691436">exp</span><span class="op" id="6691439">)</span>&nbsp;<span class="op" id="6691441">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6691446">t</span><span class="op" id="6691447">.</span><span class="ident" id="6691448">Errorf</span><span class="op" id="6691454">(</span><span class="string" id="6691455">&#34;got&nbsp;%d&nbsp;comments&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="6691497">,</span>&nbsp;<span class="builtinfunc" id="6691499">len</span><span class="op" id="6691502">(</span><span class="ident" id="6691503">got</span><span class="op" id="6691506">)</span><span class="op" id="6691507">,</span>&nbsp;<span class="ident" id="6691509">i</span><span class="op" id="6691510">,</span>&nbsp;<span class="builtinfunc" id="6691512">len</span><span class="op" id="6691515">(</span><span class="ident" id="6691516">exp</span><span class="op" id="6691519">)</span><span class="op" id="6691520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6691525">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6691540">for</span>&nbsp;<span class="ident" id="6691544">j</span><span class="op" id="6691545">,</span>&nbsp;<span class="ident" id="6691547">exp</span>&nbsp;<span class="op" id="6691551">:=</span>&nbsp;<span class="keyword" id="6691554">range</span>&nbsp;<span class="ident" id="6691560">exp</span>&nbsp;<span class="op" id="6691564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6691569">got</span>&nbsp;<span class="op" id="6691573">:=</span>&nbsp;<span class="ident" id="6691576">got</span><span class="op" id="6691579">[</span><span class="ident" id="6691580">j</span><span class="op" id="6691581">]</span><span class="op" id="6691582">.</span><span class="ident" id="6691583">Text</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6691591">if</span>&nbsp;<span class="ident" id="6691594">got</span>&nbsp;<span class="op" id="6691598">!=</span>&nbsp;<span class="ident" id="6691601">exp</span>&nbsp;<span class="op" id="6691605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6691611">t</span><span class="op" id="6691612">.</span><span class="ident" id="6691613">Errorf</span><span class="op" id="6691619">(</span><span class="string" id="6691620">&#34;got&nbsp;%q&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6691653">,</span>&nbsp;<span class="ident" id="6691655">got</span><span class="op" id="6691658">,</span>&nbsp;<span class="ident" id="6691660">i</span><span class="op" id="6691661">,</span>&nbsp;<span class="ident" id="6691663">exp</span><span class="op" id="6691666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6691678">}</span><br>
<span class="lineno">375</span><span class="op" id="6691680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6691683">func</span>&nbsp;<span class="ident" id="6691688">getField</span><span class="op" id="6691696">(</span><span class="ident" id="6691697">file</span>&nbsp;<span class="op" id="6691702">*</span><span class="ident" id="6691703">ast</span><span class="op" id="6691706">.</span><span class="ident" id="6691707">File</span><span class="op" id="6691711">,</span>&nbsp;<span class="ident" id="6691713">fieldname</span>&nbsp;<span class="builtintype" id="6691723">string</span><span class="op" id="6691729">)</span>&nbsp;<span class="op" id="6691731">*</span><span class="ident" id="6691732">ast</span><span class="op" id="6691735">.</span><span class="ident" id="6691736">Field</span>&nbsp;<span class="op" id="6691742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6691745">parts</span>&nbsp;<span class="op" id="6691751">:=</span>&nbsp;<span class="ident" id="6691754">strings</span><span class="op" id="6691761">.</span><span class="ident" id="6691762">Split</span><span class="op" id="6691767">(</span><span class="ident" id="6691768">fieldname</span><span class="op" id="6691777">,</span>&nbsp;<span class="string" id="6691779">&#34;.&#34;</span><span class="op" id="6691782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6691785">for</span>&nbsp;<span class="ident" id="6691789">_</span><span class="op" id="6691790">,</span>&nbsp;<span class="ident" id="6691792">d</span>&nbsp;<span class="op" id="6691794">:=</span>&nbsp;<span class="keyword" id="6691797">range</span>&nbsp;<span class="ident" id="6691803">file</span><span class="op" id="6691807">.</span><span class="ident" id="6691808">Decls</span>&nbsp;<span class="op" id="6691814">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6691818">if</span>&nbsp;<span class="ident" id="6691821">d</span><span class="op" id="6691822">,</span>&nbsp;<span class="ident" id="6691824">ok</span>&nbsp;<span class="op" id="6691827">:=</span>&nbsp;<span class="ident" id="6691830">d</span><span class="op" id="6691831">.</span><span class="op" id="6691832">(</span><span class="op" id="6691833">*</span><span class="ident" id="6691834">ast</span><span class="op" id="6691837">.</span><span class="ident" id="6691838">GenDecl</span><span class="op" id="6691845">)</span><span class="op" id="6691846">;</span>&nbsp;<span class="ident" id="6691848">ok</span>&nbsp;<span class="op" id="6691851">&amp;&amp;</span>&nbsp;<span class="ident" id="6691854">d</span><span class="op" id="6691855">.</span><span class="ident" id="6691856">Tok</span>&nbsp;<span class="op" id="6691860">==</span>&nbsp;<span class="ident" id="6691863">token</span><span class="op" id="6691868">.</span><span class="ident" id="6691869">TYPE</span>&nbsp;<span class="op" id="6691874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6691879">for</span>&nbsp;<span class="ident" id="6691883">_</span><span class="op" id="6691884">,</span>&nbsp;<span class="ident" id="6691886">s</span>&nbsp;<span class="op" id="6691888">:=</span>&nbsp;<span class="keyword" id="6691891">range</span>&nbsp;<span class="ident" id="6691897">d</span><span class="op" id="6691898">.</span><span class="ident" id="6691899">Specs</span>&nbsp;<span class="op" id="6691905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6691911">if</span>&nbsp;<span class="ident" id="6691914">s</span><span class="op" id="6691915">,</span>&nbsp;<span class="ident" id="6691917">ok</span>&nbsp;<span class="op" id="6691920">:=</span>&nbsp;<span class="ident" id="6691923">s</span><span class="op" id="6691924">.</span><span class="op" id="6691925">(</span><span class="op" id="6691926">*</span><span class="ident" id="6691927">ast</span><span class="op" id="6691930">.</span><span class="ident" id="6691931">TypeSpec</span><span class="op" id="6691939">)</span><span class="op" id="6691940">;</span>&nbsp;<span class="ident" id="6691942">ok</span>&nbsp;<span class="op" id="6691945">&amp;&amp;</span>&nbsp;<span class="ident" id="6691948">s</span><span class="op" id="6691949">.</span><span class="ident" id="6691950">Name</span><span class="op" id="6691954">.</span><span class="ident" id="6691955">Name</span>&nbsp;<span class="op" id="6691960">==</span>&nbsp;<span class="ident" id="6691963">parts</span><span class="op" id="6691968">[</span><span class="num" id="6691969">0</span><span class="op" id="6691970">]</span>&nbsp;<span class="op" id="6691972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6691979">if</span>&nbsp;<span class="ident" id="6691982">s</span><span class="op" id="6691983">,</span>&nbsp;<span class="ident" id="6691985">ok</span>&nbsp;<span class="op" id="6691988">:=</span>&nbsp;<span class="ident" id="6691991">s</span><span class="op" id="6691992">.</span><span class="ident" id="6691993">Type</span><span class="op" id="6691997">.</span><span class="op" id="6691998">(</span><span class="op" id="6691999">*</span><span class="ident" id="6692000">ast</span><span class="op" id="6692003">.</span><span class="ident" id="6692004">StructType</span><span class="op" id="6692014">)</span><span class="op" id="6692015">;</span>&nbsp;<span class="ident" id="6692017">ok</span>&nbsp;<span class="op" id="6692020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6692028">for</span>&nbsp;<span class="ident" id="6692032">_</span><span class="op" id="6692033">,</span>&nbsp;<span class="ident" id="6692035">f</span>&nbsp;<span class="op" id="6692037">:=</span>&nbsp;<span class="keyword" id="6692040">range</span>&nbsp;<span class="ident" id="6692046">s</span><span class="op" id="6692047">.</span><span class="ident" id="6692048">Fields</span><span class="op" id="6692054">.</span><span class="ident" id="6692055">List</span>&nbsp;<span class="op" id="6692060">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6692069">for</span>&nbsp;<span class="ident" id="6692073">_</span><span class="op" id="6692074">,</span>&nbsp;<span class="ident" id="6692076">name</span>&nbsp;<span class="op" id="6692081">:=</span>&nbsp;<span class="keyword" id="6692084">range</span>&nbsp;<span class="ident" id="6692090">f</span><span class="op" id="6692091">.</span><span class="ident" id="6692092">Names</span>&nbsp;<span class="op" id="6692098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6692108">if</span>&nbsp;<span class="ident" id="6692111">name</span><span class="op" id="6692115">.</span><span class="ident" id="6692116">Name</span>&nbsp;<span class="op" id="6692121">==</span>&nbsp;<span class="ident" id="6692124">parts</span><span class="op" id="6692129">[</span><span class="num" id="6692130">1</span><span class="op" id="6692131">]</span>&nbsp;<span class="op" id="6692133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6692144">return</span>&nbsp;<span class="ident" id="6692151">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692170">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692200">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6692206">return</span>&nbsp;<span class="ident" id="6692213">nil</span><br>
<span class="lineno"></span><span class="op" id="6692217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6692220">//&nbsp;Don&#39;t&nbsp;use&nbsp;ast.CommentGroup.Text()&nbsp;-&nbsp;we&nbsp;want&nbsp;to&nbsp;see&nbsp;exact&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">400</span><span class="keyword" id="6692294">func</span>&nbsp;<span class="ident" id="6692299">commentText</span><span class="op" id="6692310">(</span><span class="ident" id="6692311">c</span>&nbsp;<span class="op" id="6692313">*</span><span class="ident" id="6692314">ast</span><span class="op" id="6692317">.</span><span class="ident" id="6692318">CommentGroup</span><span class="op" id="6692330">)</span>&nbsp;<span class="builtintype" id="6692332">string</span>&nbsp;<span class="op" id="6692339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6692342">var</span>&nbsp;<span class="ident" id="6692346">buf</span>&nbsp;<span class="ident" id="6692350">bytes</span><span class="op" id="6692355">.</span><span class="ident" id="6692356">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6692364">if</span>&nbsp;<span class="ident" id="6692367">c</span>&nbsp;<span class="op" id="6692369">!=</span>&nbsp;<span class="ident" id="6692372">nil</span>&nbsp;<span class="op" id="6692376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6692380">for</span>&nbsp;<span class="ident" id="6692384">_</span><span class="op" id="6692385">,</span>&nbsp;<span class="ident" id="6692387">c</span>&nbsp;<span class="op" id="6692389">:=</span>&nbsp;<span class="keyword" id="6692392">range</span>&nbsp;<span class="ident" id="6692398">c</span><span class="op" id="6692399">.</span><span class="ident" id="6692400">List</span>&nbsp;<span class="op" id="6692405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6692410">buf</span><span class="op" id="6692413">.</span><span class="ident" id="6692414">WriteString</span><span class="op" id="6692425">(</span><span class="ident" id="6692426">c</span><span class="op" id="6692427">.</span><span class="ident" id="6692428">Text</span><span class="op" id="6692432">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6692442">return</span>&nbsp;<span class="ident" id="6692449">buf</span><span class="op" id="6692452">.</span><span class="ident" id="6692453">String</span><span class="op" id="6692459">(</span><span class="op" id="6692460">)</span><br>
<span class="lineno"></span><span class="op" id="6692462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="6692465">func</span>&nbsp;<span class="ident" id="6692470">checkFieldComments</span><span class="op" id="6692488">(</span><span class="ident" id="6692489">t</span>&nbsp;<span class="op" id="6692491">*</span><span class="ident" id="6692492">testing</span><span class="op" id="6692499">.</span><span class="ident" id="6692500">T</span><span class="op" id="6692501">,</span>&nbsp;<span class="ident" id="6692503">file</span>&nbsp;<span class="op" id="6692508">*</span><span class="ident" id="6692509">ast</span><span class="op" id="6692512">.</span><span class="ident" id="6692513">File</span><span class="op" id="6692517">,</span>&nbsp;<span class="ident" id="6692519">fieldname</span><span class="op" id="6692528">,</span>&nbsp;<span class="ident" id="6692530">lead</span><span class="op" id="6692534">,</span>&nbsp;<span class="ident" id="6692536">line</span>&nbsp;<span class="builtintype" id="6692541">string</span><span class="op" id="6692547">)</span>&nbsp;<span class="op" id="6692549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6692552">f</span>&nbsp;<span class="op" id="6692554">:=</span>&nbsp;<span class="ident" id="6692557">getField</span><span class="op" id="6692565">(</span><span class="ident" id="6692566">file</span><span class="op" id="6692570">,</span>&nbsp;<span class="ident" id="6692572">fieldname</span><span class="op" id="6692581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6692584">if</span>&nbsp;<span class="ident" id="6692587">f</span>&nbsp;<span class="op" id="6692589">==</span>&nbsp;<span class="ident" id="6692592">nil</span>&nbsp;<span class="op" id="6692596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6692600">t</span><span class="op" id="6692601">.</span><span class="ident" id="6692602">Fatalf</span><span class="op" id="6692608">(</span><span class="string" id="6692609">&#34;field&nbsp;not&nbsp;found:&nbsp;%s&#34;</span><span class="op" id="6692630">,</span>&nbsp;<span class="ident" id="6692632">fieldname</span><span class="op" id="6692641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692644">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6692647">if</span>&nbsp;<span class="ident" id="6692650">got</span>&nbsp;<span class="op" id="6692654">:=</span>&nbsp;<span class="ident" id="6692657">commentText</span><span class="op" id="6692668">(</span><span class="ident" id="6692669">f</span><span class="op" id="6692670">.</span><span class="ident" id="6692671">Doc</span><span class="op" id="6692674">)</span><span class="op" id="6692675">;</span>&nbsp;<span class="ident" id="6692677">got</span>&nbsp;<span class="op" id="6692681">!=</span>&nbsp;<span class="ident" id="6692684">lead</span>&nbsp;<span class="op" id="6692689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6692693">t</span><span class="op" id="6692694">.</span><span class="ident" id="6692695">Errorf</span><span class="op" id="6692701">(</span><span class="string" id="6692702">&#34;got&nbsp;lead&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6692736">,</span>&nbsp;<span class="ident" id="6692738">got</span><span class="op" id="6692741">,</span>&nbsp;<span class="ident" id="6692743">lead</span><span class="op" id="6692747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6692753">if</span>&nbsp;<span class="ident" id="6692756">got</span>&nbsp;<span class="op" id="6692760">:=</span>&nbsp;<span class="ident" id="6692763">commentText</span><span class="op" id="6692774">(</span><span class="ident" id="6692775">f</span><span class="op" id="6692776">.</span><span class="ident" id="6692777">Comment</span><span class="op" id="6692784">)</span><span class="op" id="6692785">;</span>&nbsp;<span class="ident" id="6692787">got</span>&nbsp;<span class="op" id="6692791">!=</span>&nbsp;<span class="ident" id="6692794">line</span>&nbsp;<span class="op" id="6692799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6692803">t</span><span class="op" id="6692804">.</span><span class="ident" id="6692805">Errorf</span><span class="op" id="6692811">(</span><span class="string" id="6692812">&#34;got&nbsp;line&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6692846">,</span>&nbsp;<span class="ident" id="6692848">got</span><span class="op" id="6692851">,</span>&nbsp;<span class="ident" id="6692853">line</span><span class="op" id="6692857">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6692860">}</span><br>
<span class="lineno"></span><span class="op" id="6692862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6692865">func</span>&nbsp;<span class="ident" id="6692870">TestLeadAndLineComments</span><span class="op" id="6692893">(</span><span class="ident" id="6692894">t</span>&nbsp;<span class="op" id="6692896">*</span><span class="ident" id="6692897">testing</span><span class="op" id="6692904">.</span><span class="ident" id="6692905">T</span><span class="op" id="6692906">)</span>&nbsp;<span class="op" id="6692908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6692911">f</span><span class="op" id="6692912">,</span>&nbsp;<span class="ident" id="6692914">err</span>&nbsp;<span class="op" id="6692918">:=</span>&nbsp;<span class="ident" id="6692921">ParseFile</span><span class="op" id="6692930">(</span><span class="ident" id="6692931">fset</span><span class="op" id="6692935">,</span>&nbsp;<span class="string" id="6692937">&#34;&#34;</span><span class="op" id="6692939">,</span>&nbsp;<span class="string" id="6692941">`<br>
<span class="lineno">425</span>package&nbsp;p<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF1&nbsp;int&nbsp;&nbsp;/*&nbsp;F1&nbsp;*/&nbsp;//&nbsp;line&nbsp;comment<br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;F2&nbsp;lead<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF2&nbsp;int&nbsp;&nbsp;//&nbsp;F2&nbsp;line&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;f3&nbsp;lead&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspf3&nbsp;int&nbsp;&nbsp;//&nbsp;f3&nbsp;line&nbsp;comment<br>
<span class="lineno">435</span>}<br>
<span class="lineno"></span>`</span><span class="op" id="6693133">,</span>&nbsp;<span class="ident" id="6693135">ParseComments</span><span class="op" id="6693148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6693151">if</span>&nbsp;<span class="ident" id="6693154">err</span>&nbsp;<span class="op" id="6693158">!=</span>&nbsp;<span class="ident" id="6693161">nil</span>&nbsp;<span class="op" id="6693165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6693169">t</span><span class="op" id="6693170">.</span><span class="ident" id="6693171">Fatal</span><span class="op" id="6693176">(</span><span class="ident" id="6693177">err</span><span class="op" id="6693180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6693183">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6693186">checkFieldComments</span><span class="op" id="6693204">(</span><span class="ident" id="6693205">t</span><span class="op" id="6693206">,</span>&nbsp;<span class="ident" id="6693208">f</span><span class="op" id="6693209">,</span>&nbsp;<span class="string" id="6693211">&#34;T.F1&#34;</span><span class="op" id="6693217">,</span>&nbsp;<span class="string" id="6693219">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="6693244">,</span>&nbsp;<span class="string" id="6693246">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="6693271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6693274">checkFieldComments</span><span class="op" id="6693292">(</span><span class="ident" id="6693293">t</span><span class="op" id="6693294">,</span>&nbsp;<span class="ident" id="6693296">f</span><span class="op" id="6693297">,</span>&nbsp;<span class="string" id="6693299">&#34;T.F2&#34;</span><span class="op" id="6693305">,</span>&nbsp;<span class="string" id="6693307">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="6693329">,</span>&nbsp;<span class="string" id="6693331">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="6693351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6693354">checkFieldComments</span><span class="op" id="6693372">(</span><span class="ident" id="6693373">t</span><span class="op" id="6693374">,</span>&nbsp;<span class="ident" id="6693376">f</span><span class="op" id="6693377">,</span>&nbsp;<span class="string" id="6693379">&#34;T.f3&#34;</span><span class="op" id="6693385">,</span>&nbsp;<span class="string" id="6693387">&#34;//&nbsp;f3&nbsp;lead&nbsp;comment&#34;</span><span class="op" id="6693407">,</span>&nbsp;<span class="string" id="6693409">&#34;//&nbsp;f3&nbsp;line&nbsp;comment&#34;</span><span class="op" id="6693429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6693432">ast</span><span class="op" id="6693435">.</span><span class="ident" id="6693436">FileExports</span><span class="op" id="6693447">(</span><span class="ident" id="6693448">f</span><span class="op" id="6693449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6693452">checkFieldComments</span><span class="op" id="6693470">(</span><span class="ident" id="6693471">t</span><span class="op" id="6693472">,</span>&nbsp;<span class="ident" id="6693474">f</span><span class="op" id="6693475">,</span>&nbsp;<span class="string" id="6693477">&#34;T.F1&#34;</span><span class="op" id="6693483">,</span>&nbsp;<span class="string" id="6693485">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="6693510">,</span>&nbsp;<span class="string" id="6693512">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="6693537">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6693540">checkFieldComments</span><span class="op" id="6693558">(</span><span class="ident" id="6693559">t</span><span class="op" id="6693560">,</span>&nbsp;<span class="ident" id="6693562">f</span><span class="op" id="6693563">,</span>&nbsp;<span class="string" id="6693565">&#34;T.F2&#34;</span><span class="op" id="6693571">,</span>&nbsp;<span class="string" id="6693573">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="6693595">,</span>&nbsp;<span class="string" id="6693597">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="6693617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6693620">if</span>&nbsp;<span class="ident" id="6693623">getField</span><span class="op" id="6693631">(</span><span class="ident" id="6693632">f</span><span class="op" id="6693633">,</span>&nbsp;<span class="string" id="6693635">&#34;T.f3&#34;</span><span class="op" id="6693641">)</span>&nbsp;<span class="op" id="6693643">!=</span>&nbsp;<span class="ident" id="6693646">nil</span>&nbsp;<span class="op" id="6693650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6693654">t</span><span class="op" id="6693655">.</span><span class="ident" id="6693656">Error</span><span class="op" id="6693661">(</span><span class="string" id="6693662">&#34;not&nbsp;expected&nbsp;to&nbsp;find&nbsp;T.f3&#34;</span><span class="op" id="6693689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6693692">}</span><br>
<span class="lineno"></span><span class="op" id="6693694">}</span>
</div>
</body>
</html>
