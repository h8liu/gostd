<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7506267">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7506322">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7506376">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7506427">package</span>&nbsp;<span class="ident" id="7506435">mime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7506441">import</span>&nbsp;<span class="op" id="7506448">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506451">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7506461">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="7506464">var</span>&nbsp;<span class="ident" id="7506468">typeTests</span>&nbsp;<span class="op" id="7506478">=</span>&nbsp;<span class="ident" id="7506480"><a href="/mime/type_unix.go.html#3962578">initMimeForTests</a></span><span class="op" id="7506496">(</span><span class="op" id="7506497">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7506500">func</span>&nbsp;<span class="ident" id="7506505">TestTypeByExtension</span><span class="op" id="7506524">(</span><span class="ident" id="7506525">t</span>&nbsp;<span class="op" id="7506527">*</span><span class="ident" id="7506528"><a href="/mime/type_test.go.html#7506451">testing</a></span><span class="op" id="7506535">.</span><span class="ident" id="7506536">T</span><span class="op" id="7506537">)</span>&nbsp;<span class="op" id="7506539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7506542">for</span>&nbsp;<span class="ident" id="7506546">ext</span><span class="op" id="7506549">,</span>&nbsp;<span class="ident" id="7506551">want</span>&nbsp;<span class="op" id="7506556">:=</span>&nbsp;<span class="keyword" id="7506559">range</span>&nbsp;<span class="ident" id="7506565"><a href="/mime/type_test.go.html#7506468">typeTests</a></span>&nbsp;<span class="op" id="7506575">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506579">val</span>&nbsp;<span class="op" id="7506583">:=</span>&nbsp;<span class="ident" id="7506586"><a href="/mime/type.go.html#3960058">TypeByExtension</a></span><span class="op" id="7506601">(</span><span class="ident" id="7506602"><a href="/mime/type_test.go.html#7506546">ext</a></span><span class="op" id="7506605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7506609">if</span>&nbsp;<span class="ident" id="7506612"><a href="/mime/type_test.go.html#7506579">val</a></span>&nbsp;<span class="op" id="7506616">!=</span>&nbsp;<span class="ident" id="7506619"><a href="/mime/type_test.go.html#7506551">want</a></span>&nbsp;<span class="op" id="7506624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506629"><a href="/mime/type_test.go.html#7506525">t</a></span><span class="op" id="7506630">.</span><span class="ident" id="7506631">Errorf</span><span class="op" id="7506637">(</span><span class="string" id="7506638">&#34;TypeByExtension(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7506673">,</span>&nbsp;<span class="ident" id="7506675"><a href="/mime/type_test.go.html#7506546">ext</a></span><span class="op" id="7506678">,</span>&nbsp;<span class="ident" id="7506680"><a href="/mime/type_test.go.html#7506579">val</a></span><span class="op" id="7506683">,</span>&nbsp;<span class="ident" id="7506685"><a href="/mime/type_test.go.html#7506551">want</a></span><span class="op" id="7506689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506696">}</span><br>
<span class="lineno">20</span><span class="op" id="7506698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7506701">func</span>&nbsp;<span class="ident" id="7506706">TestTypeByExtensionCase</span><span class="op" id="7506729">(</span><span class="ident" id="7506730">t</span>&nbsp;<span class="op" id="7506732">*</span><span class="ident" id="7506733"><a href="/mime/type_test.go.html#7506451">testing</a></span><span class="op" id="7506740">.</span><span class="ident" id="7506741">T</span><span class="op" id="7506742">)</span>&nbsp;<span class="op" id="7506744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7506747">const</span>&nbsp;<span class="ident" id="7506753">custom</span>&nbsp;<span class="op" id="7506760">=</span>&nbsp;<span class="string" id="7506762">&#34;test/test;&nbsp;charset=iso-8859-1&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7506795">const</span>&nbsp;<span class="ident" id="7506801">caps</span>&nbsp;<span class="op" id="7506806">=</span>&nbsp;<span class="string" id="7506808">&#34;test/test;&nbsp;WAS=ALLCAPS&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7506834">if</span>&nbsp;<span class="ident" id="7506837">err</span>&nbsp;<span class="op" id="7506841">:=</span>&nbsp;<span class="ident" id="7506844"><a href="/mime/type.go.html#3960989">AddExtensionType</a></span><span class="op" id="7506860">(</span><span class="string" id="7506861">&#34;.TEST&#34;</span><span class="op" id="7506868">,</span>&nbsp;<span class="ident" id="7506870"><a href="/mime/type_test.go.html#7506801">caps</a></span><span class="op" id="7506874">)</span><span class="op" id="7506875">;</span>&nbsp;<span class="ident" id="7506877"><a href="/mime/type_test.go.html#7506837">err</a></span>&nbsp;<span class="op" id="7506881">!=</span>&nbsp;<span class="ident" id="7506884">nil</span>&nbsp;<span class="op" id="7506888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506892"><a href="/mime/type_test.go.html#7506730">t</a></span><span class="op" id="7506893">.</span><span class="ident" id="7506894">Fatalf</span><span class="op" id="7506900">(</span><span class="string" id="7506901">&#34;error&nbsp;%s&nbsp;for&nbsp;AddExtension(%s)&#34;</span><span class="op" id="7506932">,</span>&nbsp;<span class="ident" id="7506934"><a href="/mime/type_test.go.html#7506837">err</a></span><span class="op" id="7506937">,</span>&nbsp;<span class="ident" id="7506939"><a href="/mime/type_test.go.html#7506753">custom</a></span><span class="op" id="7506945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7506951">if</span>&nbsp;<span class="ident" id="7506954">err</span>&nbsp;<span class="op" id="7506958">:=</span>&nbsp;<span class="ident" id="7506961"><a href="/mime/type.go.html#3960989">AddExtensionType</a></span><span class="op" id="7506977">(</span><span class="string" id="7506978">&#34;.tesT&#34;</span><span class="op" id="7506985">,</span>&nbsp;<span class="ident" id="7506987"><a href="/mime/type_test.go.html#7506753">custom</a></span><span class="op" id="7506993">)</span><span class="op" id="7506994">;</span>&nbsp;<span class="ident" id="7506996"><a href="/mime/type_test.go.html#7506954">err</a></span>&nbsp;<span class="op" id="7507000">!=</span>&nbsp;<span class="ident" id="7507003">nil</span>&nbsp;<span class="op" id="7507007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507011"><a href="/mime/type_test.go.html#7506730">t</a></span><span class="op" id="7507012">.</span><span class="ident" id="7507013">Fatalf</span><span class="op" id="7507019">(</span><span class="string" id="7507020">&#34;error&nbsp;%s&nbsp;for&nbsp;AddExtension(%s)&#34;</span><span class="op" id="7507051">,</span>&nbsp;<span class="ident" id="7507053"><a href="/mime/type_test.go.html#7506954">err</a></span><span class="op" id="7507056">,</span>&nbsp;<span class="ident" id="7507058"><a href="/mime/type_test.go.html#7506753">custom</a></span><span class="op" id="7507064">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7507071">//&nbsp;case-sensitive&nbsp;lookup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7507097">if</span>&nbsp;<span class="ident" id="7507100">got</span>&nbsp;<span class="op" id="7507104">:=</span>&nbsp;<span class="ident" id="7507107"><a href="/mime/type.go.html#3960058">TypeByExtension</a></span><span class="op" id="7507122">(</span><span class="string" id="7507123">&#34;.tesT&#34;</span><span class="op" id="7507130">)</span><span class="op" id="7507131">;</span>&nbsp;<span class="ident" id="7507133"><a href="/mime/type_test.go.html#7507100">got</a></span>&nbsp;<span class="op" id="7507137">!=</span>&nbsp;<span class="ident" id="7507140"><a href="/mime/type_test.go.html#7506753">custom</a></span>&nbsp;<span class="op" id="7507147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507151"><a href="/mime/type_test.go.html#7506730">t</a></span><span class="op" id="7507152">.</span><span class="ident" id="7507153">Fatalf</span><span class="op" id="7507159">(</span><span class="string" id="7507160">&#34;for&nbsp;.tesT,&nbsp;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7507188">,</span>&nbsp;<span class="ident" id="7507190"><a href="/mime/type_test.go.html#7507100">got</a></span><span class="op" id="7507193">,</span>&nbsp;<span class="ident" id="7507195"><a href="/mime/type_test.go.html#7506753">custom</a></span><span class="op" id="7507201">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7507207">if</span>&nbsp;<span class="ident" id="7507210">got</span>&nbsp;<span class="op" id="7507214">:=</span>&nbsp;<span class="ident" id="7507217"><a href="/mime/type.go.html#3960058">TypeByExtension</a></span><span class="op" id="7507232">(</span><span class="string" id="7507233">&#34;.TEST&#34;</span><span class="op" id="7507240">)</span><span class="op" id="7507241">;</span>&nbsp;<span class="ident" id="7507243"><a href="/mime/type_test.go.html#7507210">got</a></span>&nbsp;<span class="op" id="7507247">!=</span>&nbsp;<span class="ident" id="7507250"><a href="/mime/type_test.go.html#7506801">caps</a></span>&nbsp;<span class="op" id="7507255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507259"><a href="/mime/type_test.go.html#7506730">t</a></span><span class="op" id="7507260">.</span><span class="ident" id="7507261">Fatalf</span><span class="op" id="7507267">(</span><span class="string" id="7507268">&#34;for&nbsp;.TEST,&nbsp;got&nbsp;%q;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7507296">,</span>&nbsp;<span class="ident" id="7507298"><a href="/mime/type_test.go.html#7507210">got</a></span><span class="op" id="7507301">,</span>&nbsp;<span class="ident" id="7507303"><a href="/mime/type_test.go.html#7506801">caps</a></span><span class="op" id="7507307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7507314">//&nbsp;case-insensitive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7507335">if</span>&nbsp;<span class="ident" id="7507338">got</span>&nbsp;<span class="op" id="7507342">:=</span>&nbsp;<span class="ident" id="7507345"><a href="/mime/type.go.html#3960058">TypeByExtension</a></span><span class="op" id="7507360">(</span><span class="string" id="7507361">&#34;.TesT&#34;</span><span class="op" id="7507368">)</span><span class="op" id="7507369">;</span>&nbsp;<span class="ident" id="7507371"><a href="/mime/type_test.go.html#7507338">got</a></span>&nbsp;<span class="op" id="7507375">!=</span>&nbsp;<span class="ident" id="7507378"><a href="/mime/type_test.go.html#7506753">custom</a></span>&nbsp;<span class="op" id="7507385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507389"><a href="/mime/type_test.go.html#7506730">t</a></span><span class="op" id="7507390">.</span><span class="ident" id="7507391">Fatalf</span><span class="op" id="7507397">(</span><span class="string" id="7507398">&#34;for&nbsp;.TesT,&nbsp;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7507426">,</span>&nbsp;<span class="ident" id="7507428"><a href="/mime/type_test.go.html#7507338">got</a></span><span class="op" id="7507431">,</span>&nbsp;<span class="ident" id="7507433"><a href="/mime/type_test.go.html#7506753">custom</a></span><span class="op" id="7507439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507442">}</span><br>
<span class="lineno"></span><span class="op" id="7507444">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="7507447">func</span>&nbsp;<span class="ident" id="7507452">TestLookupMallocs</span><span class="op" id="7507469">(</span><span class="ident" id="7507470">t</span>&nbsp;<span class="op" id="7507472">*</span><span class="ident" id="7507473"><a href="/mime/type_test.go.html#7506451">testing</a></span><span class="op" id="7507480">.</span><span class="ident" id="7507481">T</span><span class="op" id="7507482">)</span>&nbsp;<span class="op" id="7507484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507487">n</span>&nbsp;<span class="op" id="7507489">:=</span>&nbsp;<span class="ident" id="7507492"><a href="/mime/type_test.go.html#7506451">testing</a></span><span class="op" id="7507499">.</span><span class="ident" id="7507500">AllocsPerRun</span><span class="op" id="7507512">(</span><span class="num" id="7507513">10000</span><span class="op" id="7507518">,</span>&nbsp;<span class="keyword" id="7507520">func</span><span class="op" id="7507524">(</span><span class="op" id="7507525">)</span>&nbsp;<span class="op" id="7507527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507531"><a href="/mime/type.go.html#3960058">TypeByExtension</a></span><span class="op" id="7507546">(</span><span class="string" id="7507547">&#34;.html&#34;</span><span class="op" id="7507554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507558"><a href="/mime/type.go.html#3960058">TypeByExtension</a></span><span class="op" id="7507573">(</span><span class="string" id="7507574">&#34;.HtML&#34;</span><span class="op" id="7507581">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507584">}</span><span class="op" id="7507585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7507588">if</span>&nbsp;<span class="ident" id="7507591"><a href="/mime/type_test.go.html#7507487">n</a></span>&nbsp;<span class="op" id="7507593">&gt;</span>&nbsp;<span class="num" id="7507595">0</span>&nbsp;<span class="op" id="7507597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507601"><a href="/mime/type_test.go.html#7507470">t</a></span><span class="op" id="7507602">.</span><span class="ident" id="7507603">Errorf</span><span class="op" id="7507609">(</span><span class="string" id="7507610">&#34;allocs&nbsp;=&nbsp;%v;&nbsp;want&nbsp;0&#34;</span><span class="op" id="7507631">,</span>&nbsp;<span class="ident" id="7507633"><a href="/mime/type_test.go.html#7507487">n</a></span><span class="op" id="7507634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507637">}</span><br>
<span class="lineno"></span><span class="op" id="7507639">}</span>
</div>
</body>
</html>
