<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2823644">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2823699">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2823753">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2823804">//&nbsp;Package&nbsp;time&nbsp;provides&nbsp;functionality&nbsp;for&nbsp;measuring&nbsp;and&nbsp;displaying&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="2823878">//</span><br>
<span class="lineno"></span><span class="comment" id="2823881">//&nbsp;The&nbsp;calendrical&nbsp;calculations&nbsp;always&nbsp;assume&nbsp;a&nbsp;Gregorian&nbsp;calendar.</span><br>
<span class="lineno"></span><span class="keyword" id="2823949">package</span>&nbsp;<span class="ident" id="2823957">time</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="2823963">import</span>&nbsp;<span class="string" id="2823970">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2823980">//&nbsp;A&nbsp;Time&nbsp;represents&nbsp;an&nbsp;instant&nbsp;in&nbsp;time&nbsp;with&nbsp;nanosecond&nbsp;precision.</span><br>
<span class="lineno"></span><span class="comment" id="2824047">//</span><br>
<span class="lineno"></span><span class="comment" id="2824050">//&nbsp;Programs&nbsp;using&nbsp;times&nbsp;should&nbsp;typically&nbsp;store&nbsp;and&nbsp;pass&nbsp;them&nbsp;as&nbsp;values,</span><br>
<span class="lineno">15</span><span class="comment" id="2824122">//&nbsp;not&nbsp;pointers.&nbsp;&nbsp;That&nbsp;is,&nbsp;time&nbsp;variables&nbsp;and&nbsp;struct&nbsp;fields&nbsp;should&nbsp;be&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2824195">//&nbsp;type&nbsp;time.Time,&nbsp;not&nbsp;*time.Time.&nbsp;&nbsp;A&nbsp;Time&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="2824259">//&nbsp;multiple&nbsp;goroutines&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="comment" id="2824298">//</span><br>
<span class="lineno"></span><span class="comment" id="2824301">//&nbsp;Time&nbsp;instants&nbsp;can&nbsp;be&nbsp;compared&nbsp;using&nbsp;the&nbsp;Before,&nbsp;After,&nbsp;and&nbsp;Equal&nbsp;methods.</span><br>
<span class="lineno">20</span><span class="comment" id="2824378">//&nbsp;The&nbsp;Sub&nbsp;method&nbsp;subtracts&nbsp;two&nbsp;instants,&nbsp;producing&nbsp;a&nbsp;Duration.</span><br>
<span class="lineno"></span><span class="comment" id="2824442">//&nbsp;The&nbsp;Add&nbsp;method&nbsp;adds&nbsp;a&nbsp;Time&nbsp;and&nbsp;a&nbsp;Duration,&nbsp;producing&nbsp;a&nbsp;Time.</span><br>
<span class="lineno"></span><span class="comment" id="2824506">//</span><br>
<span class="lineno"></span><span class="comment" id="2824509">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;of&nbsp;type&nbsp;Time&nbsp;is&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00.000000000&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="2824586">//&nbsp;As&nbsp;this&nbsp;time&nbsp;is&nbsp;unlikely&nbsp;to&nbsp;come&nbsp;up&nbsp;in&nbsp;practice,&nbsp;the&nbsp;IsZero&nbsp;method&nbsp;gives</span><br>
<span class="lineno">25</span><span class="comment" id="2824662">//&nbsp;a&nbsp;simple&nbsp;way&nbsp;of&nbsp;detecting&nbsp;a&nbsp;time&nbsp;that&nbsp;has&nbsp;not&nbsp;been&nbsp;initialized&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2824740">//</span><br>
<span class="lineno"></span><span class="comment" id="2824743">//&nbsp;Each&nbsp;Time&nbsp;has&nbsp;associated&nbsp;with&nbsp;it&nbsp;a&nbsp;Location,&nbsp;consulted&nbsp;when&nbsp;computing&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2824820">//&nbsp;presentation&nbsp;form&nbsp;of&nbsp;the&nbsp;time,&nbsp;such&nbsp;as&nbsp;in&nbsp;the&nbsp;Format,&nbsp;Hour,&nbsp;and&nbsp;Year&nbsp;methods.</span><br>
<span class="lineno"></span><span class="comment" id="2824901">//&nbsp;The&nbsp;methods&nbsp;Local,&nbsp;UTC,&nbsp;and&nbsp;In&nbsp;return&nbsp;a&nbsp;Time&nbsp;with&nbsp;a&nbsp;specific&nbsp;location.</span><br>
<span class="lineno">30</span><span class="comment" id="2824975">//&nbsp;Changing&nbsp;the&nbsp;location&nbsp;in&nbsp;this&nbsp;way&nbsp;changes&nbsp;only&nbsp;the&nbsp;presentation;&nbsp;it&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2825055">//&nbsp;change&nbsp;the&nbsp;instant&nbsp;in&nbsp;time&nbsp;being&nbsp;denoted&nbsp;and&nbsp;therefore&nbsp;does&nbsp;not&nbsp;affect&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2825133">//&nbsp;computations&nbsp;described&nbsp;in&nbsp;earlier&nbsp;paragraphs.</span><br>
<span class="lineno"></span><span class="comment" id="2825182">//</span><br>
<span class="lineno"></span><span class="comment" id="2825185">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;Go&nbsp;==&nbsp;operator&nbsp;compares&nbsp;not&nbsp;just&nbsp;the&nbsp;time&nbsp;instant&nbsp;but&nbsp;also&nbsp;the</span><br>
<span class="lineno">35</span><span class="comment" id="2825265">//&nbsp;Location.&nbsp;Therefore,&nbsp;Time&nbsp;values&nbsp;should&nbsp;not&nbsp;be&nbsp;used&nbsp;as&nbsp;map&nbsp;or&nbsp;database&nbsp;keys</span><br>
<span class="lineno"></span><span class="comment" id="2825344">//&nbsp;without&nbsp;first&nbsp;guaranteeing&nbsp;that&nbsp;the&nbsp;identical&nbsp;Location&nbsp;has&nbsp;been&nbsp;set&nbsp;for&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2825423">//&nbsp;values,&nbsp;which&nbsp;can&nbsp;be&nbsp;achieved&nbsp;through&nbsp;use&nbsp;of&nbsp;the&nbsp;UTC&nbsp;or&nbsp;Local&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="2825496">//</span><br>
<span class="lineno"></span><span class="keyword" id="2825499">type</span>&nbsp;<span class="ident" id="2825504">Time</span>&nbsp;<span class="keyword" id="2825509">struct</span>&nbsp;<span class="op" id="2825516">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2825519">//&nbsp;sec&nbsp;gives&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds&nbsp;elapsed&nbsp;since</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2825569">//&nbsp;January&nbsp;1,&nbsp;year&nbsp;1&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2825605">sec</span>&nbsp;<span class="ident" id="2825609">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2825617">//&nbsp;nsec&nbsp;specifies&nbsp;a&nbsp;non-negative&nbsp;nanosecond</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2825662">//&nbsp;offset&nbsp;within&nbsp;the&nbsp;second&nbsp;named&nbsp;by&nbsp;Seconds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2825709">//&nbsp;It&nbsp;must&nbsp;be&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2825753">nsec</span>&nbsp;<span class="builtintype" id="2825758">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2825766">//&nbsp;loc&nbsp;specifies&nbsp;the&nbsp;Location&nbsp;that&nbsp;should&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2825820">//&nbsp;determine&nbsp;the&nbsp;minute,&nbsp;hour,&nbsp;month,&nbsp;day,&nbsp;and&nbsp;year</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2825873">//&nbsp;that&nbsp;correspond&nbsp;to&nbsp;this&nbsp;Time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2825907">//&nbsp;Only&nbsp;the&nbsp;zero&nbsp;Time&nbsp;has&nbsp;a&nbsp;nil&nbsp;Location.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2825950">//&nbsp;In&nbsp;that&nbsp;case&nbsp;it&nbsp;is&nbsp;interpreted&nbsp;to&nbsp;mean&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2825998">loc</span>&nbsp;<span class="op" id="2826002">*</span><span class="ident" id="2826003">Location</span><br>
<span class="lineno">55</span><span class="op" id="2826012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2826015">//&nbsp;After&nbsp;reports&nbsp;whether&nbsp;the&nbsp;time&nbsp;instant&nbsp;t&nbsp;is&nbsp;after&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="2826071">func</span>&nbsp;<span class="op" id="2826076">(</span><span class="ident" id="2826077">t</span>&nbsp;<span class="ident" id="2826079">Time</span><span class="op" id="2826083">)</span>&nbsp;<span class="ident" id="2826085">After</span><span class="op" id="2826090">(</span><span class="ident" id="2826091">u</span>&nbsp;<span class="ident" id="2826093">Time</span><span class="op" id="2826097">)</span>&nbsp;<span class="builtintype" id="2826099">bool</span>&nbsp;<span class="op" id="2826104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2826107">return</span>&nbsp;<span class="ident" id="2826114">t</span><span class="op" id="2826115">.</span><span class="ident" id="2826116">sec</span>&nbsp;<span class="op" id="2826120">&gt;</span>&nbsp;<span class="ident" id="2826122">u</span><span class="op" id="2826123">.</span><span class="ident" id="2826124">sec</span>&nbsp;<span class="op" id="2826128">||</span>&nbsp;<span class="ident" id="2826131">t</span><span class="op" id="2826132">.</span><span class="ident" id="2826133">sec</span>&nbsp;<span class="op" id="2826137">==</span>&nbsp;<span class="ident" id="2826140">u</span><span class="op" id="2826141">.</span><span class="ident" id="2826142">sec</span>&nbsp;<span class="op" id="2826146">&amp;&amp;</span>&nbsp;<span class="ident" id="2826149">t</span><span class="op" id="2826150">.</span><span class="ident" id="2826151">nsec</span>&nbsp;<span class="op" id="2826156">&gt;</span>&nbsp;<span class="ident" id="2826158">u</span><span class="op" id="2826159">.</span><span class="ident" id="2826160">nsec</span><br>
<span class="lineno">60</span><span class="op" id="2826165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2826168">//&nbsp;Before&nbsp;reports&nbsp;whether&nbsp;the&nbsp;time&nbsp;instant&nbsp;t&nbsp;is&nbsp;before&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="2826226">func</span>&nbsp;<span class="op" id="2826231">(</span><span class="ident" id="2826232">t</span>&nbsp;<span class="ident" id="2826234">Time</span><span class="op" id="2826238">)</span>&nbsp;<span class="ident" id="2826240">Before</span><span class="op" id="2826246">(</span><span class="ident" id="2826247">u</span>&nbsp;<span class="ident" id="2826249">Time</span><span class="op" id="2826253">)</span>&nbsp;<span class="builtintype" id="2826255">bool</span>&nbsp;<span class="op" id="2826260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2826263">return</span>&nbsp;<span class="ident" id="2826270">t</span><span class="op" id="2826271">.</span><span class="ident" id="2826272">sec</span>&nbsp;<span class="op" id="2826276">&lt;</span>&nbsp;<span class="ident" id="2826278">u</span><span class="op" id="2826279">.</span><span class="ident" id="2826280">sec</span>&nbsp;<span class="op" id="2826284">||</span>&nbsp;<span class="ident" id="2826287">t</span><span class="op" id="2826288">.</span><span class="ident" id="2826289">sec</span>&nbsp;<span class="op" id="2826293">==</span>&nbsp;<span class="ident" id="2826296">u</span><span class="op" id="2826297">.</span><span class="ident" id="2826298">sec</span>&nbsp;<span class="op" id="2826302">&amp;&amp;</span>&nbsp;<span class="ident" id="2826305">t</span><span class="op" id="2826306">.</span><span class="ident" id="2826307">nsec</span>&nbsp;<span class="op" id="2826312">&lt;</span>&nbsp;<span class="ident" id="2826314">u</span><span class="op" id="2826315">.</span><span class="ident" id="2826316">nsec</span><br>
<span class="lineno">65</span><span class="op" id="2826321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2826324">//&nbsp;Equal&nbsp;reports&nbsp;whether&nbsp;t&nbsp;and&nbsp;u&nbsp;represent&nbsp;the&nbsp;same&nbsp;time&nbsp;instant.</span><br>
<span class="lineno"></span><span class="comment" id="2826390">//&nbsp;Two&nbsp;times&nbsp;can&nbsp;be&nbsp;equal&nbsp;even&nbsp;if&nbsp;they&nbsp;are&nbsp;in&nbsp;different&nbsp;locations.</span><br>
<span class="lineno"></span><span class="comment" id="2826457">//&nbsp;For&nbsp;example,&nbsp;6:00&nbsp;+0200&nbsp;CEST&nbsp;and&nbsp;4:00&nbsp;UTC&nbsp;are&nbsp;Equal.</span><br>
<span class="lineno">70</span><span class="comment" id="2826513">//&nbsp;This&nbsp;comparison&nbsp;is&nbsp;different&nbsp;from&nbsp;using&nbsp;t&nbsp;==&nbsp;u,&nbsp;which&nbsp;also&nbsp;compares</span><br>
<span class="lineno"></span><span class="comment" id="2826584">//&nbsp;the&nbsp;locations.</span><br>
<span class="lineno"></span><span class="keyword" id="2826602">func</span>&nbsp;<span class="op" id="2826607">(</span><span class="ident" id="2826608">t</span>&nbsp;<span class="ident" id="2826610">Time</span><span class="op" id="2826614">)</span>&nbsp;<span class="ident" id="2826616">Equal</span><span class="op" id="2826621">(</span><span class="ident" id="2826622">u</span>&nbsp;<span class="ident" id="2826624">Time</span><span class="op" id="2826628">)</span>&nbsp;<span class="builtintype" id="2826630">bool</span>&nbsp;<span class="op" id="2826635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2826638">return</span>&nbsp;<span class="ident" id="2826645">t</span><span class="op" id="2826646">.</span><span class="ident" id="2826647">sec</span>&nbsp;<span class="op" id="2826651">==</span>&nbsp;<span class="ident" id="2826654">u</span><span class="op" id="2826655">.</span><span class="ident" id="2826656">sec</span>&nbsp;<span class="op" id="2826660">&amp;&amp;</span>&nbsp;<span class="ident" id="2826663">t</span><span class="op" id="2826664">.</span><span class="ident" id="2826665">nsec</span>&nbsp;<span class="op" id="2826670">==</span>&nbsp;<span class="ident" id="2826673">u</span><span class="op" id="2826674">.</span><span class="ident" id="2826675">nsec</span><br>
<span class="lineno"></span><span class="op" id="2826680">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="2826683">//&nbsp;A&nbsp;Month&nbsp;specifies&nbsp;a&nbsp;month&nbsp;of&nbsp;the&nbsp;year&nbsp;(January&nbsp;=&nbsp;1,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2826744">type</span>&nbsp;<span class="ident" id="2826749">Month</span>&nbsp;<span class="builtintype" id="2826755">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2826760">const</span>&nbsp;<span class="op" id="2826766">(</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2826769">January</span>&nbsp;<span class="ident" id="2826777">Month</span>&nbsp;<span class="op" id="2826783">=</span>&nbsp;<span class="num" id="2826785">1</span>&nbsp;<span class="op" id="2826787">+</span>&nbsp;<span class="ident" id="2826789">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2826795">February</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2826805">March</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2826812">April</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2826819">May</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2826824">June</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2826830">July</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2826836">August</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2826844">September</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2826855">October</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2826864">November</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2826874">December</span><br>
<span class="lineno"></span><span class="op" id="2826883">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2826886">var</span>&nbsp;<span class="ident" id="2826890">months</span>&nbsp;<span class="op" id="2826897">=</span>&nbsp;<span class="op" id="2826899">[</span><span class="op" id="2826900">...</span><span class="op" id="2826903">]</span><span class="builtintype" id="2826904">string</span><span class="op" id="2826910">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2826913">&#34;January&#34;</span><span class="op" id="2826922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2826925">&#34;February&#34;</span><span class="op" id="2826935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2826938">&#34;March&#34;</span><span class="op" id="2826945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2826948">&#34;April&#34;</span><span class="op" id="2826955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2826958">&#34;May&#34;</span><span class="op" id="2826963">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2826966">&#34;June&#34;</span><span class="op" id="2826972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2826975">&#34;July&#34;</span><span class="op" id="2826981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2826984">&#34;August&#34;</span><span class="op" id="2826992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2826995">&#34;September&#34;</span><span class="op" id="2827006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2827009">&#34;October&#34;</span><span class="op" id="2827018">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2827021">&#34;November&#34;</span><span class="op" id="2827031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2827034">&#34;December&#34;</span><span class="op" id="2827044">,</span><br>
<span class="lineno"></span><span class="op" id="2827046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2827049">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;English&nbsp;name&nbsp;of&nbsp;the&nbsp;month&nbsp;(&#34;January&#34;,&nbsp;&#34;February&#34;,&nbsp;...).</span><br>
<span class="lineno">110</span><span class="keyword" id="2827127">func</span>&nbsp;<span class="op" id="2827132">(</span><span class="ident" id="2827133">m</span>&nbsp;<span class="ident" id="2827135">Month</span><span class="op" id="2827140">)</span>&nbsp;<span class="ident" id="2827142">String</span><span class="op" id="2827148">(</span><span class="op" id="2827149">)</span>&nbsp;<span class="builtintype" id="2827151">string</span>&nbsp;<span class="op" id="2827158">{</span>&nbsp;<span class="keyword" id="2827160">return</span>&nbsp;<span class="ident" id="2827167">months</span><span class="op" id="2827173">[</span><span class="ident" id="2827174">m</span><span class="op" id="2827175">-</span><span class="num" id="2827176">1</span><span class="op" id="2827177">]</span>&nbsp;<span class="op" id="2827179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2827182">//&nbsp;A&nbsp;Weekday&nbsp;specifies&nbsp;a&nbsp;day&nbsp;of&nbsp;the&nbsp;week&nbsp;(Sunday&nbsp;=&nbsp;0,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2827242">type</span>&nbsp;<span class="ident" id="2827247">Weekday</span>&nbsp;<span class="builtintype" id="2827255">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="2827260">const</span>&nbsp;<span class="op" id="2827266">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2827269">Sunday</span>&nbsp;<span class="ident" id="2827276">Weekday</span>&nbsp;<span class="op" id="2827284">=</span>&nbsp;<span class="ident" id="2827286">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2827292">Monday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2827300">Tuesday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2827309">Wednesday</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2827320">Thursday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2827330">Friday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2827338">Saturday</span><br>
<span class="lineno"></span><span class="op" id="2827347">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="2827350">var</span>&nbsp;<span class="ident" id="2827354">days</span>&nbsp;<span class="op" id="2827359">=</span>&nbsp;<span class="op" id="2827361">[</span><span class="op" id="2827362">...</span><span class="op" id="2827365">]</span><span class="builtintype" id="2827366">string</span><span class="op" id="2827372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2827375">&#34;Sunday&#34;</span><span class="op" id="2827383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2827386">&#34;Monday&#34;</span><span class="op" id="2827394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2827397">&#34;Tuesday&#34;</span><span class="op" id="2827406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2827409">&#34;Wednesday&#34;</span><span class="op" id="2827420">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2827423">&#34;Thursday&#34;</span><span class="op" id="2827433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2827436">&#34;Friday&#34;</span><span class="op" id="2827444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2827447">&#34;Saturday&#34;</span><span class="op" id="2827457">,</span><br>
<span class="lineno"></span><span class="op" id="2827459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="2827462">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;English&nbsp;name&nbsp;of&nbsp;the&nbsp;day&nbsp;(&#34;Sunday&#34;,&nbsp;&#34;Monday&#34;,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2827535">func</span>&nbsp;<span class="op" id="2827540">(</span><span class="ident" id="2827541">d</span>&nbsp;<span class="ident" id="2827543">Weekday</span><span class="op" id="2827550">)</span>&nbsp;<span class="ident" id="2827552">String</span><span class="op" id="2827558">(</span><span class="op" id="2827559">)</span>&nbsp;<span class="builtintype" id="2827561">string</span>&nbsp;<span class="op" id="2827568">{</span>&nbsp;<span class="keyword" id="2827570">return</span>&nbsp;<span class="ident" id="2827577">days</span><span class="op" id="2827581">[</span><span class="ident" id="2827582">d</span><span class="op" id="2827583">]</span>&nbsp;<span class="op" id="2827585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2827588">//&nbsp;Computations&nbsp;on&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="2827613">//</span><br>
<span class="lineno">140</span><span class="comment" id="2827616">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;a&nbsp;Time&nbsp;is&nbsp;defined&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2827662">//&nbsp;&nbsp;&nbsp;&nbspJanuary&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00.000000000&nbsp;UTC</span><br>
<span class="lineno"></span><span class="comment" id="2827707">//&nbsp;which&nbsp;(1)&nbsp;looks&nbsp;like&nbsp;a&nbsp;zero,&nbsp;or&nbsp;as&nbsp;close&nbsp;as&nbsp;you&nbsp;can&nbsp;get&nbsp;in&nbsp;a&nbsp;date</span><br>
<span class="lineno"></span><span class="comment" id="2827776">//&nbsp;(1-1-1&nbsp;00:00:00&nbsp;UTC),&nbsp;(2)&nbsp;is&nbsp;unlikely&nbsp;enough&nbsp;to&nbsp;arise&nbsp;in&nbsp;practice&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2827848">//&nbsp;be&nbsp;a&nbsp;suitable&nbsp;&#34;not&nbsp;set&#34;&nbsp;sentinel,&nbsp;unlike&nbsp;Jan&nbsp;1&nbsp;1970,&nbsp;and&nbsp;(3)&nbsp;has&nbsp;a</span><br>
<span class="lineno">145</span><span class="comment" id="2827918">//&nbsp;non-negative&nbsp;year&nbsp;even&nbsp;in&nbsp;time&nbsp;zones&nbsp;west&nbsp;of&nbsp;UTC,&nbsp;unlike&nbsp;1-1-0</span><br>
<span class="lineno"></span><span class="comment" id="2827984">//&nbsp;00:00:00&nbsp;UTC,&nbsp;which&nbsp;would&nbsp;be&nbsp;12-31-(-1)&nbsp;19:00:00&nbsp;in&nbsp;New&nbsp;York.</span><br>
<span class="lineno"></span><span class="comment" id="2828049">//</span><br>
<span class="lineno"></span><span class="comment" id="2828052">//&nbsp;The&nbsp;zero&nbsp;Time&nbsp;value&nbsp;does&nbsp;not&nbsp;force&nbsp;a&nbsp;specific&nbsp;epoch&nbsp;for&nbsp;the&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2828120">//&nbsp;representation.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;use&nbsp;the&nbsp;Unix&nbsp;epoch&nbsp;internally,&nbsp;we</span><br>
<span class="lineno">150</span><span class="comment" id="2828190">//&nbsp;could&nbsp;define&nbsp;that&nbsp;to&nbsp;distinguish&nbsp;a&nbsp;zero&nbsp;value&nbsp;from&nbsp;Jan&nbsp;1&nbsp;1970,&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2828261">//&nbsp;time&nbsp;would&nbsp;be&nbsp;represented&nbsp;by&nbsp;sec=-1,&nbsp;nsec=1e9.&nbsp;&nbsp;However,&nbsp;it&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="2828329">//&nbsp;suggest&nbsp;a&nbsp;representation,&nbsp;namely&nbsp;using&nbsp;1-1-1&nbsp;00:00:00&nbsp;UTC&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2828397">//&nbsp;epoch,&nbsp;and&nbsp;that&#39;s&nbsp;what&nbsp;we&nbsp;do.</span><br>
<span class="lineno"></span><span class="comment" id="2828430">//</span><br>
<span class="lineno">155</span><span class="comment" id="2828433">//&nbsp;The&nbsp;Add&nbsp;and&nbsp;Sub&nbsp;computations&nbsp;are&nbsp;oblivious&nbsp;to&nbsp;the&nbsp;choice&nbsp;of&nbsp;epoch.</span><br>
<span class="lineno"></span><span class="comment" id="2828503">//</span><br>
<span class="lineno"></span><span class="comment" id="2828506">//&nbsp;The&nbsp;presentation&nbsp;computations&nbsp;-&nbsp;year,&nbsp;month,&nbsp;minute,&nbsp;and&nbsp;so&nbsp;on&nbsp;-&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2828578">//&nbsp;rely&nbsp;heavily&nbsp;on&nbsp;division&nbsp;and&nbsp;modulus&nbsp;by&nbsp;positive&nbsp;constants.&nbsp;&nbsp;For</span><br>
<span class="lineno"></span><span class="comment" id="2828646">//&nbsp;calendrical&nbsp;calculations&nbsp;we&nbsp;want&nbsp;these&nbsp;divisions&nbsp;to&nbsp;round&nbsp;down,&nbsp;even</span><br>
<span class="lineno">160</span><span class="comment" id="2828718">//&nbsp;for&nbsp;negative&nbsp;values,&nbsp;so&nbsp;that&nbsp;the&nbsp;remainder&nbsp;is&nbsp;always&nbsp;positive,&nbsp;but</span><br>
<span class="lineno"></span><span class="comment" id="2828788">//&nbsp;Go&#39;s&nbsp;division&nbsp;(like&nbsp;most&nbsp;hardware&nbsp;division&nbsp;instructions)&nbsp;rounds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2828858">//&nbsp;zero.&nbsp;&nbsp;We&nbsp;can&nbsp;still&nbsp;do&nbsp;those&nbsp;computations&nbsp;and&nbsp;then&nbsp;adjust&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span><span class="comment" id="2828930">//&nbsp;for&nbsp;a&nbsp;negative&nbsp;numerator,&nbsp;but&nbsp;it&#39;s&nbsp;annoying&nbsp;to&nbsp;write&nbsp;the&nbsp;adjustment</span><br>
<span class="lineno"></span><span class="comment" id="2829001">//&nbsp;over&nbsp;and&nbsp;over.&nbsp;&nbsp;Instead,&nbsp;we&nbsp;can&nbsp;change&nbsp;to&nbsp;a&nbsp;different&nbsp;epoch&nbsp;so&nbsp;long</span><br>
<span class="lineno">165</span><span class="comment" id="2829072">//&nbsp;ago&nbsp;that&nbsp;all&nbsp;the&nbsp;times&nbsp;we&nbsp;care&nbsp;about&nbsp;will&nbsp;be&nbsp;positive,&nbsp;and&nbsp;then&nbsp;round</span><br>
<span class="lineno"></span><span class="comment" id="2829145">//&nbsp;to&nbsp;zero&nbsp;and&nbsp;round&nbsp;down&nbsp;coincide.&nbsp;&nbsp;These&nbsp;presentation&nbsp;routines&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="2829218">//&nbsp;have&nbsp;to&nbsp;add&nbsp;the&nbsp;zone&nbsp;offset,&nbsp;so&nbsp;adding&nbsp;the&nbsp;translation&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2829283">//&nbsp;alternate&nbsp;epoch&nbsp;is&nbsp;cheap.&nbsp;&nbsp;For&nbsp;example,&nbsp;having&nbsp;a&nbsp;non-negative&nbsp;time&nbsp;t</span><br>
<span class="lineno"></span><span class="comment" id="2829355">//&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">170</span><span class="comment" id="2829382">//</span><br>
<span class="lineno"></span><span class="comment" id="2829385">//&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;=&nbsp;t&nbsp;%&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2829401">//</span><br>
<span class="lineno"></span><span class="comment" id="2829404">//&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2829418">//</span><br>
<span class="lineno">175</span><span class="comment" id="2829421">//&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;=&nbsp;t&nbsp;%&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2829437">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;sec&nbsp;&lt;&nbsp;0&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2829453">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;+=&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2829467">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2829472">//</span><br>
<span class="lineno">180</span><span class="comment" id="2829475">//&nbsp;everywhere.</span><br>
<span class="lineno"></span><span class="comment" id="2829490">//</span><br>
<span class="lineno"></span><span class="comment" id="2829493">//&nbsp;The&nbsp;calendar&nbsp;runs&nbsp;on&nbsp;an&nbsp;exact&nbsp;400&nbsp;year&nbsp;cycle:&nbsp;a&nbsp;400-year&nbsp;calendar</span><br>
<span class="lineno"></span><span class="comment" id="2829562">//&nbsp;printed&nbsp;for&nbsp;1970-2469&nbsp;will&nbsp;apply&nbsp;as&nbsp;well&nbsp;to&nbsp;2470-2869.&nbsp;&nbsp;Even&nbsp;the&nbsp;days</span><br>
<span class="lineno"></span><span class="comment" id="2829635">//&nbsp;of&nbsp;the&nbsp;week&nbsp;match&nbsp;up.&nbsp;&nbsp;It&nbsp;simplifies&nbsp;the&nbsp;computations&nbsp;to&nbsp;choose&nbsp;the</span><br>
<span class="lineno">185</span><span class="comment" id="2829706">//&nbsp;cycle&nbsp;boundaries&nbsp;so&nbsp;that&nbsp;the&nbsp;exceptional&nbsp;years&nbsp;are&nbsp;always&nbsp;delayed&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2829778">//&nbsp;long&nbsp;as&nbsp;possible.&nbsp;&nbsp;That&nbsp;means&nbsp;choosing&nbsp;a&nbsp;year&nbsp;equal&nbsp;to&nbsp;1&nbsp;mod&nbsp;400,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="2829850">//&nbsp;that&nbsp;the&nbsp;first&nbsp;leap&nbsp;year&nbsp;is&nbsp;the&nbsp;4th&nbsp;year,&nbsp;the&nbsp;first&nbsp;missed&nbsp;leap&nbsp;year</span><br>
<span class="lineno"></span><span class="comment" id="2829922">//&nbsp;is&nbsp;the&nbsp;100th&nbsp;year,&nbsp;and&nbsp;the&nbsp;missed&nbsp;missed&nbsp;leap&nbsp;year&nbsp;is&nbsp;the&nbsp;400th&nbsp;year.</span><br>
<span class="lineno"></span><span class="comment" id="2829995">//&nbsp;So&nbsp;we&#39;d&nbsp;prefer&nbsp;instead&nbsp;to&nbsp;print&nbsp;a&nbsp;calendar&nbsp;for&nbsp;2001-2400&nbsp;and&nbsp;reuse&nbsp;it</span><br>
<span class="lineno">190</span><span class="comment" id="2830068">//&nbsp;for&nbsp;2401-2800.</span><br>
<span class="lineno"></span><span class="comment" id="2830086">//</span><br>
<span class="lineno"></span><span class="comment" id="2830089">//&nbsp;Finally,&nbsp;it&#39;s&nbsp;convenient&nbsp;if&nbsp;the&nbsp;delta&nbsp;between&nbsp;the&nbsp;Unix&nbsp;epoch&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2830157">//&nbsp;long-ago&nbsp;epoch&nbsp;is&nbsp;representable&nbsp;by&nbsp;an&nbsp;int64&nbsp;constant.</span><br>
<span class="lineno"></span><span class="comment" id="2830214">//</span><br>
<span class="lineno">195</span><span class="comment" id="2830217">//&nbsp;These&nbsp;three&nbsp;considerations—choose&nbsp;an&nbsp;epoch&nbsp;as&nbsp;early&nbsp;as&nbsp;possible,&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2830292">//&nbsp;uses&nbsp;a&nbsp;year&nbsp;equal&nbsp;to&nbsp;1&nbsp;mod&nbsp;400,&nbsp;and&nbsp;that&nbsp;is&nbsp;no&nbsp;more&nbsp;than&nbsp;2⁶³&nbsp;seconds</span><br>
<span class="lineno"></span><span class="comment" id="2830367">//&nbsp;earlier&nbsp;than&nbsp;1970—bring&nbsp;us&nbsp;to&nbsp;the&nbsp;year&nbsp;-292277022399.&nbsp;&nbsp;We&nbsp;refer&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2830439">//&nbsp;this&nbsp;year&nbsp;as&nbsp;the&nbsp;absolute&nbsp;zero&nbsp;year,&nbsp;and&nbsp;to&nbsp;times&nbsp;measured&nbsp;as&nbsp;a&nbsp;uint64</span><br>
<span class="lineno"></span><span class="comment" id="2830513">//&nbsp;seconds&nbsp;since&nbsp;this&nbsp;year&nbsp;as&nbsp;absolute&nbsp;times.</span><br>
<span class="lineno">200</span><span class="comment" id="2830559">//</span><br>
<span class="lineno"></span><span class="comment" id="2830562">//&nbsp;Times&nbsp;measured&nbsp;as&nbsp;an&nbsp;int64&nbsp;seconds&nbsp;since&nbsp;the&nbsp;year&nbsp;1—the&nbsp;representation</span><br>
<span class="lineno"></span><span class="comment" id="2830638">//&nbsp;used&nbsp;for&nbsp;Time&#39;s&nbsp;sec&nbsp;field—are&nbsp;called&nbsp;internal&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2830696">//</span><br>
<span class="lineno"></span><span class="comment" id="2830699">//&nbsp;Times&nbsp;measured&nbsp;as&nbsp;an&nbsp;int64&nbsp;seconds&nbsp;since&nbsp;the&nbsp;year&nbsp;1970&nbsp;are&nbsp;called&nbsp;Unix</span><br>
<span class="lineno">205</span><span class="comment" id="2830773">//&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2830783">//</span><br>
<span class="lineno"></span><span class="comment" id="2830786">//&nbsp;It&nbsp;is&nbsp;tempting&nbsp;to&nbsp;just&nbsp;use&nbsp;the&nbsp;year&nbsp;1&nbsp;as&nbsp;the&nbsp;absolute&nbsp;epoch,&nbsp;defining</span><br>
<span class="lineno"></span><span class="comment" id="2830859">//&nbsp;that&nbsp;the&nbsp;routines&nbsp;are&nbsp;only&nbsp;valid&nbsp;for&nbsp;years&nbsp;&gt;=&nbsp;1.&nbsp;&nbsp;However,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2830925">//&nbsp;routines&nbsp;would&nbsp;then&nbsp;be&nbsp;invalid&nbsp;when&nbsp;displaying&nbsp;the&nbsp;epoch&nbsp;in&nbsp;time&nbsp;zones</span><br>
<span class="lineno">210</span><span class="comment" id="2830999">//&nbsp;west&nbsp;of&nbsp;UTC,&nbsp;since&nbsp;it&nbsp;is&nbsp;year&nbsp;0.&nbsp;&nbsp;It&nbsp;doesn&#39;t&nbsp;seem&nbsp;tenable&nbsp;to&nbsp;say&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2831072">//&nbsp;printing&nbsp;the&nbsp;zero&nbsp;time&nbsp;correctly&nbsp;isn&#39;t&nbsp;supported&nbsp;in&nbsp;half&nbsp;the&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2831141">//&nbsp;zones.&nbsp;&nbsp;By&nbsp;comparison,&nbsp;it&#39;s&nbsp;reasonable&nbsp;to&nbsp;mishandle&nbsp;some&nbsp;times&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2831210">//&nbsp;the&nbsp;year&nbsp;-292277022399.</span><br>
<span class="lineno"></span><span class="comment" id="2831237">//</span><br>
<span class="lineno">215</span><span class="comment" id="2831240">//&nbsp;All&nbsp;this&nbsp;is&nbsp;opaque&nbsp;to&nbsp;clients&nbsp;of&nbsp;the&nbsp;API&nbsp;and&nbsp;can&nbsp;be&nbsp;changed&nbsp;if&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2831308">//&nbsp;better&nbsp;implementation&nbsp;presents&nbsp;itself.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2831351">const</span>&nbsp;<span class="op" id="2831357">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2831360">//&nbsp;The&nbsp;unsigned&nbsp;zero&nbsp;year&nbsp;for&nbsp;internal&nbsp;calculations.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2831414">//&nbsp;Must&nbsp;be&nbsp;1&nbsp;mod&nbsp;400,&nbsp;and&nbsp;times&nbsp;before&nbsp;it&nbsp;will&nbsp;not&nbsp;compute&nbsp;correctly,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2831485">//&nbsp;but&nbsp;otherwise&nbsp;can&nbsp;be&nbsp;changed&nbsp;at&nbsp;will.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2831527">absoluteZeroYear</span>&nbsp;<span class="op" id="2831544">=</span>&nbsp;<span class="op" id="2831546">-</span><span class="num" id="2831547">292277022399</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2831562">//&nbsp;The&nbsp;year&nbsp;of&nbsp;the&nbsp;zero&nbsp;Time.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2831593">//&nbsp;Assumed&nbsp;by&nbsp;the&nbsp;unixToInternal&nbsp;computation&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2831646">internalYear</span>&nbsp;<span class="op" id="2831659">=</span>&nbsp;<span class="num" id="2831661">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2831665">//&nbsp;The&nbsp;year&nbsp;of&nbsp;the&nbsp;zero&nbsp;Unix&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2831701">unixYear</span>&nbsp;<span class="op" id="2831710">=</span>&nbsp;<span class="num" id="2831712">1970</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2831719">//&nbsp;Offsets&nbsp;to&nbsp;convert&nbsp;between&nbsp;internal&nbsp;and&nbsp;absolute&nbsp;or&nbsp;Unix&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2831787">absoluteToInternal</span>&nbsp;<span class="ident" id="2831806">int64</span>&nbsp;<span class="op" id="2831812">=</span>&nbsp;<span class="op" id="2831814">(</span><span class="ident" id="2831815">absoluteZeroYear</span>&nbsp;<span class="op" id="2831832">-</span>&nbsp;<span class="ident" id="2831834">internalYear</span><span class="op" id="2831846">)</span>&nbsp;<span class="op" id="2831848">*</span>&nbsp;<span class="num" id="2831850">365.2425</span>&nbsp;<span class="op" id="2831859">*</span>&nbsp;<span class="ident" id="2831861">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2831876">internalToAbsolute</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2831901">=</span>&nbsp;<span class="op" id="2831903">-</span><span class="ident" id="2831904">absoluteToInternal</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2831925">unixToInternal</span>&nbsp;<span class="ident" id="2831940">int64</span>&nbsp;<span class="op" id="2831946">=</span>&nbsp;<span class="op" id="2831948">(</span><span class="num" id="2831949">1969</span><span class="op" id="2831953">*</span><span class="num" id="2831954">365</span>&nbsp;<span class="op" id="2831958">+</span>&nbsp;<span class="num" id="2831960">1969</span><span class="op" id="2831964">/</span><span class="num" id="2831965">4</span>&nbsp;<span class="op" id="2831967">-</span>&nbsp;<span class="num" id="2831969">1969</span><span class="op" id="2831973">/</span><span class="num" id="2831974">100</span>&nbsp;<span class="op" id="2831978">+</span>&nbsp;<span class="num" id="2831980">1969</span><span class="op" id="2831984">/</span><span class="num" id="2831985">400</span><span class="op" id="2831988">)</span>&nbsp;<span class="op" id="2831990">*</span>&nbsp;<span class="ident" id="2831992">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2832007">internalToUnix</span>&nbsp;<span class="ident" id="2832022">int64</span>&nbsp;<span class="op" id="2832028">=</span>&nbsp;<span class="op" id="2832030">-</span><span class="ident" id="2832031">unixToInternal</span><br>
<span class="lineno"></span><span class="op" id="2832046">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2832049">//&nbsp;IsZero&nbsp;reports&nbsp;whether&nbsp;t&nbsp;represents&nbsp;the&nbsp;zero&nbsp;time&nbsp;instant,</span><br>
<span class="lineno">240</span><span class="comment" id="2832111">//&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2832147">func</span>&nbsp;<span class="op" id="2832152">(</span><span class="ident" id="2832153">t</span>&nbsp;<span class="ident" id="2832155">Time</span><span class="op" id="2832159">)</span>&nbsp;<span class="ident" id="2832161">IsZero</span><span class="op" id="2832167">(</span><span class="op" id="2832168">)</span>&nbsp;<span class="builtintype" id="2832170">bool</span>&nbsp;<span class="op" id="2832175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2832178">return</span>&nbsp;<span class="ident" id="2832185">t</span><span class="op" id="2832186">.</span><span class="ident" id="2832187">sec</span>&nbsp;<span class="op" id="2832191">==</span>&nbsp;<span class="num" id="2832194">0</span>&nbsp;<span class="op" id="2832196">&amp;&amp;</span>&nbsp;<span class="ident" id="2832199">t</span><span class="op" id="2832200">.</span><span class="ident" id="2832201">nsec</span>&nbsp;<span class="op" id="2832206">==</span>&nbsp;<span class="num" id="2832209">0</span><br>
<span class="lineno"></span><span class="op" id="2832211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2832214">//&nbsp;abs&nbsp;returns&nbsp;the&nbsp;time&nbsp;t&nbsp;as&nbsp;an&nbsp;absolute&nbsp;time,&nbsp;adjusted&nbsp;by&nbsp;the&nbsp;zone&nbsp;offset.</span><br>
<span class="lineno"></span><span class="comment" id="2832290">//&nbsp;It&nbsp;is&nbsp;called&nbsp;when&nbsp;computing&nbsp;a&nbsp;presentation&nbsp;property&nbsp;like&nbsp;Month&nbsp;or&nbsp;Hour.</span><br>
<span class="lineno"></span><span class="keyword" id="2832365">func</span>&nbsp;<span class="op" id="2832370">(</span><span class="ident" id="2832371">t</span>&nbsp;<span class="ident" id="2832373">Time</span><span class="op" id="2832377">)</span>&nbsp;<span class="ident" id="2832379">abs</span><span class="op" id="2832382">(</span><span class="op" id="2832383">)</span>&nbsp;<span class="ident" id="2832385">uint64</span>&nbsp;<span class="op" id="2832392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2832395">l</span>&nbsp;<span class="op" id="2832397">:=</span>&nbsp;<span class="ident" id="2832400">t</span><span class="op" id="2832401">.</span><span class="ident" id="2832402">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2832407">//&nbsp;Avoid&nbsp;function&nbsp;calls&nbsp;when&nbsp;possible.</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2832447">if</span>&nbsp;<span class="ident" id="2832450">l</span>&nbsp;<span class="op" id="2832452">==</span>&nbsp;<span class="ident" id="2832455">nil</span>&nbsp;<span class="op" id="2832459">||</span>&nbsp;<span class="ident" id="2832462">l</span>&nbsp;<span class="op" id="2832464">==</span>&nbsp;<span class="op" id="2832467">&amp;</span><span class="ident" id="2832468">localLoc</span>&nbsp;<span class="op" id="2832477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2832481">l</span>&nbsp;<span class="op" id="2832483">=</span>&nbsp;<span class="ident" id="2832485">l</span><span class="op" id="2832486">.</span><span class="ident" id="2832487">get</span><span class="op" id="2832490">(</span><span class="op" id="2832491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2832494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2832497">sec</span>&nbsp;<span class="op" id="2832501">:=</span>&nbsp;<span class="ident" id="2832504">t</span><span class="op" id="2832505">.</span><span class="ident" id="2832506">sec</span>&nbsp;<span class="op" id="2832510">+</span>&nbsp;<span class="ident" id="2832512">internalToUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2832528">if</span>&nbsp;<span class="ident" id="2832531">l</span>&nbsp;<span class="op" id="2832533">!=</span>&nbsp;<span class="op" id="2832536">&amp;</span><span class="ident" id="2832537">utcLoc</span>&nbsp;<span class="op" id="2832544">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2832548">if</span>&nbsp;<span class="ident" id="2832551">l</span><span class="op" id="2832552">.</span><span class="ident" id="2832553">cacheZone</span>&nbsp;<span class="op" id="2832563">!=</span>&nbsp;<span class="ident" id="2832566">nil</span>&nbsp;<span class="op" id="2832570">&amp;&amp;</span>&nbsp;<span class="ident" id="2832573">l</span><span class="op" id="2832574">.</span><span class="ident" id="2832575">cacheStart</span>&nbsp;<span class="op" id="2832586">&lt;=</span>&nbsp;<span class="ident" id="2832589">sec</span>&nbsp;<span class="op" id="2832593">&amp;&amp;</span>&nbsp;<span class="ident" id="2832596">sec</span>&nbsp;<span class="op" id="2832600">&lt;</span>&nbsp;<span class="ident" id="2832602">l</span><span class="op" id="2832603">.</span><span class="ident" id="2832604">cacheEnd</span>&nbsp;<span class="op" id="2832613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2832618">sec</span>&nbsp;<span class="op" id="2832622">+=</span>&nbsp;<span class="ident" id="2832625">int64</span><span class="op" id="2832630">(</span><span class="ident" id="2832631">l</span><span class="op" id="2832632">.</span><span class="ident" id="2832633">cacheZone</span><span class="op" id="2832642">.</span><span class="ident" id="2832643">offset</span><span class="op" id="2832649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2832653">}</span>&nbsp;<span class="keyword" id="2832655">else</span>&nbsp;<span class="op" id="2832660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2832665">_</span><span class="op" id="2832666">,</span>&nbsp;<span class="ident" id="2832668">offset</span><span class="op" id="2832674">,</span>&nbsp;<span class="ident" id="2832676">_</span><span class="op" id="2832677">,</span>&nbsp;<span class="ident" id="2832679">_</span><span class="op" id="2832680">,</span>&nbsp;<span class="ident" id="2832682">_</span>&nbsp;<span class="op" id="2832684">:=</span>&nbsp;<span class="ident" id="2832687">l</span><span class="op" id="2832688">.</span><span class="ident" id="2832689">lookup</span><span class="op" id="2832695">(</span><span class="ident" id="2832696">sec</span><span class="op" id="2832699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2832704">sec</span>&nbsp;<span class="op" id="2832708">+=</span>&nbsp;<span class="ident" id="2832711">int64</span><span class="op" id="2832716">(</span><span class="ident" id="2832717">offset</span><span class="op" id="2832723">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2832727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2832730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2832733">return</span>&nbsp;<span class="ident" id="2832740">uint64</span><span class="op" id="2832746">(</span><span class="ident" id="2832747">sec</span>&nbsp;<span class="op" id="2832751">+</span>&nbsp;<span class="op" id="2832753">(</span><span class="ident" id="2832754">unixToInternal</span>&nbsp;<span class="op" id="2832769">+</span>&nbsp;<span class="ident" id="2832771">internalToAbsolute</span><span class="op" id="2832789">)</span><span class="op" id="2832790">)</span><br>
<span class="lineno"></span><span class="op" id="2832792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="comment" id="2832795">//&nbsp;locabs&nbsp;is&nbsp;a&nbsp;combination&nbsp;of&nbsp;the&nbsp;Zone&nbsp;and&nbsp;abs&nbsp;methods,</span><br>
<span class="lineno"></span><span class="comment" id="2832851">//&nbsp;extracting&nbsp;both&nbsp;return&nbsp;values&nbsp;from&nbsp;a&nbsp;single&nbsp;zone&nbsp;lookup.</span><br>
<span class="lineno"></span><span class="keyword" id="2832911">func</span>&nbsp;<span class="op" id="2832916">(</span><span class="ident" id="2832917">t</span>&nbsp;<span class="ident" id="2832919">Time</span><span class="op" id="2832923">)</span>&nbsp;<span class="ident" id="2832925">locabs</span><span class="op" id="2832931">(</span><span class="op" id="2832932">)</span>&nbsp;<span class="op" id="2832934">(</span><span class="ident" id="2832935">name</span>&nbsp;<span class="builtintype" id="2832940">string</span><span class="op" id="2832946">,</span>&nbsp;<span class="ident" id="2832948">offset</span>&nbsp;<span class="builtintype" id="2832955">int</span><span class="op" id="2832958">,</span>&nbsp;<span class="ident" id="2832960">abs</span>&nbsp;<span class="ident" id="2832964">uint64</span><span class="op" id="2832970">)</span>&nbsp;<span class="op" id="2832972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2832975">l</span>&nbsp;<span class="op" id="2832977">:=</span>&nbsp;<span class="ident" id="2832980">t</span><span class="op" id="2832981">.</span><span class="ident" id="2832982">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2832987">if</span>&nbsp;<span class="ident" id="2832990">l</span>&nbsp;<span class="op" id="2832992">==</span>&nbsp;<span class="ident" id="2832995">nil</span>&nbsp;<span class="op" id="2832999">||</span>&nbsp;<span class="ident" id="2833002">l</span>&nbsp;<span class="op" id="2833004">==</span>&nbsp;<span class="op" id="2833007">&amp;</span><span class="ident" id="2833008">localLoc</span>&nbsp;<span class="op" id="2833017">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2833021">l</span>&nbsp;<span class="op" id="2833023">=</span>&nbsp;<span class="ident" id="2833025">l</span><span class="op" id="2833026">.</span><span class="ident" id="2833027">get</span><span class="op" id="2833030">(</span><span class="op" id="2833031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2833034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2833037">//&nbsp;Avoid&nbsp;function&nbsp;call&nbsp;if&nbsp;we&nbsp;hit&nbsp;the&nbsp;local&nbsp;time&nbsp;cache.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2833093">sec</span>&nbsp;<span class="op" id="2833097">:=</span>&nbsp;<span class="ident" id="2833100">t</span><span class="op" id="2833101">.</span><span class="ident" id="2833102">sec</span>&nbsp;<span class="op" id="2833106">+</span>&nbsp;<span class="ident" id="2833108">internalToUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2833124">if</span>&nbsp;<span class="ident" id="2833127">l</span>&nbsp;<span class="op" id="2833129">!=</span>&nbsp;<span class="op" id="2833132">&amp;</span><span class="ident" id="2833133">utcLoc</span>&nbsp;<span class="op" id="2833140">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2833144">if</span>&nbsp;<span class="ident" id="2833147">l</span><span class="op" id="2833148">.</span><span class="ident" id="2833149">cacheZone</span>&nbsp;<span class="op" id="2833159">!=</span>&nbsp;<span class="ident" id="2833162">nil</span>&nbsp;<span class="op" id="2833166">&amp;&amp;</span>&nbsp;<span class="ident" id="2833169">l</span><span class="op" id="2833170">.</span><span class="ident" id="2833171">cacheStart</span>&nbsp;<span class="op" id="2833182">&lt;=</span>&nbsp;<span class="ident" id="2833185">sec</span>&nbsp;<span class="op" id="2833189">&amp;&amp;</span>&nbsp;<span class="ident" id="2833192">sec</span>&nbsp;<span class="op" id="2833196">&lt;</span>&nbsp;<span class="ident" id="2833198">l</span><span class="op" id="2833199">.</span><span class="ident" id="2833200">cacheEnd</span>&nbsp;<span class="op" id="2833209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2833214">name</span>&nbsp;<span class="op" id="2833219">=</span>&nbsp;<span class="ident" id="2833221">l</span><span class="op" id="2833222">.</span><span class="ident" id="2833223">cacheZone</span><span class="op" id="2833232">.</span><span class="ident" id="2833233">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2833241">offset</span>&nbsp;<span class="op" id="2833248">=</span>&nbsp;<span class="ident" id="2833250">l</span><span class="op" id="2833251">.</span><span class="ident" id="2833252">cacheZone</span><span class="op" id="2833261">.</span><span class="ident" id="2833262">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2833271">}</span>&nbsp;<span class="keyword" id="2833273">else</span>&nbsp;<span class="op" id="2833278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2833283">name</span><span class="op" id="2833287">,</span>&nbsp;<span class="ident" id="2833289">offset</span><span class="op" id="2833295">,</span>&nbsp;<span class="ident" id="2833297">_</span><span class="op" id="2833298">,</span>&nbsp;<span class="ident" id="2833300">_</span><span class="op" id="2833301">,</span>&nbsp;<span class="ident" id="2833303">_</span>&nbsp;<span class="op" id="2833305">=</span>&nbsp;<span class="ident" id="2833307">l</span><span class="op" id="2833308">.</span><span class="ident" id="2833309">lookup</span><span class="op" id="2833315">(</span><span class="ident" id="2833316">sec</span><span class="op" id="2833319">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2833323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2833327">sec</span>&nbsp;<span class="op" id="2833331">+=</span>&nbsp;<span class="ident" id="2833334">int64</span><span class="op" id="2833339">(</span><span class="ident" id="2833340">offset</span><span class="op" id="2833346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2833349">}</span>&nbsp;<span class="keyword" id="2833351">else</span>&nbsp;<span class="op" id="2833356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2833360">name</span>&nbsp;<span class="op" id="2833365">=</span>&nbsp;<span class="string" id="2833367">&#34;UTC&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2833374">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2833377">abs</span>&nbsp;<span class="op" id="2833381">=</span>&nbsp;<span class="ident" id="2833383">uint64</span><span class="op" id="2833389">(</span><span class="ident" id="2833390">sec</span>&nbsp;<span class="op" id="2833394">+</span>&nbsp;<span class="op" id="2833396">(</span><span class="ident" id="2833397">unixToInternal</span>&nbsp;<span class="op" id="2833412">+</span>&nbsp;<span class="ident" id="2833414">internalToAbsolute</span><span class="op" id="2833432">)</span><span class="op" id="2833433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2833436">return</span><br>
<span class="lineno"></span><span class="op" id="2833443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2833446">//&nbsp;Date&nbsp;returns&nbsp;the&nbsp;year,&nbsp;month,&nbsp;and&nbsp;day&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno">290</span><span class="keyword" id="2833506">func</span>&nbsp;<span class="op" id="2833511">(</span><span class="ident" id="2833512">t</span>&nbsp;<span class="ident" id="2833514">Time</span><span class="op" id="2833518">)</span>&nbsp;<span class="ident" id="2833520">Date</span><span class="op" id="2833524">(</span><span class="op" id="2833525">)</span>&nbsp;<span class="op" id="2833527">(</span><span class="ident" id="2833528">year</span>&nbsp;<span class="builtintype" id="2833533">int</span><span class="op" id="2833536">,</span>&nbsp;<span class="ident" id="2833538">month</span>&nbsp;<span class="ident" id="2833544">Month</span><span class="op" id="2833549">,</span>&nbsp;<span class="ident" id="2833551">day</span>&nbsp;<span class="builtintype" id="2833555">int</span><span class="op" id="2833558">)</span>&nbsp;<span class="op" id="2833560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2833563">year</span><span class="op" id="2833567">,</span>&nbsp;<span class="ident" id="2833569">month</span><span class="op" id="2833574">,</span>&nbsp;<span class="ident" id="2833576">day</span><span class="op" id="2833579">,</span>&nbsp;<span class="ident" id="2833581">_</span>&nbsp;<span class="op" id="2833583">=</span>&nbsp;<span class="ident" id="2833585">t</span><span class="op" id="2833586">.</span><span class="ident" id="2833587">date</span><span class="op" id="2833591">(</span><span class="builtintype" id="2833592">true</span><span class="op" id="2833596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2833599">return</span><br>
<span class="lineno"></span><span class="op" id="2833606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="comment" id="2833609">//&nbsp;Year&nbsp;returns&nbsp;the&nbsp;year&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2833653">func</span>&nbsp;<span class="op" id="2833658">(</span><span class="ident" id="2833659">t</span>&nbsp;<span class="ident" id="2833661">Time</span><span class="op" id="2833665">)</span>&nbsp;<span class="ident" id="2833667">Year</span><span class="op" id="2833671">(</span><span class="op" id="2833672">)</span>&nbsp;<span class="builtintype" id="2833674">int</span>&nbsp;<span class="op" id="2833678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2833681">year</span><span class="op" id="2833685">,</span>&nbsp;<span class="ident" id="2833687">_</span><span class="op" id="2833688">,</span>&nbsp;<span class="ident" id="2833690">_</span><span class="op" id="2833691">,</span>&nbsp;<span class="ident" id="2833693">_</span>&nbsp;<span class="op" id="2833695">:=</span>&nbsp;<span class="ident" id="2833698">t</span><span class="op" id="2833699">.</span><span class="ident" id="2833700">date</span><span class="op" id="2833704">(</span><span class="builtintype" id="2833705">false</span><span class="op" id="2833710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2833713">return</span>&nbsp;<span class="ident" id="2833720">year</span><br>
<span class="lineno"></span><span class="op" id="2833725">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="2833728">//&nbsp;Month&nbsp;returns&nbsp;the&nbsp;month&nbsp;of&nbsp;the&nbsp;year&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2833783">func</span>&nbsp;<span class="op" id="2833788">(</span><span class="ident" id="2833789">t</span>&nbsp;<span class="ident" id="2833791">Time</span><span class="op" id="2833795">)</span>&nbsp;<span class="ident" id="2833797">Month</span><span class="op" id="2833802">(</span><span class="op" id="2833803">)</span>&nbsp;<span class="ident" id="2833805">Month</span>&nbsp;<span class="op" id="2833811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2833814">_</span><span class="op" id="2833815">,</span>&nbsp;<span class="ident" id="2833817">month</span><span class="op" id="2833822">,</span>&nbsp;<span class="ident" id="2833824">_</span><span class="op" id="2833825">,</span>&nbsp;<span class="ident" id="2833827">_</span>&nbsp;<span class="op" id="2833829">:=</span>&nbsp;<span class="ident" id="2833832">t</span><span class="op" id="2833833">.</span><span class="ident" id="2833834">date</span><span class="op" id="2833838">(</span><span class="builtintype" id="2833839">true</span><span class="op" id="2833843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2833846">return</span>&nbsp;<span class="ident" id="2833853">month</span><br>
<span class="lineno">305</span><span class="op" id="2833859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2833862">//&nbsp;Day&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;month&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2833914">func</span>&nbsp;<span class="op" id="2833919">(</span><span class="ident" id="2833920">t</span>&nbsp;<span class="ident" id="2833922">Time</span><span class="op" id="2833926">)</span>&nbsp;<span class="ident" id="2833928">Day</span><span class="op" id="2833931">(</span><span class="op" id="2833932">)</span>&nbsp;<span class="builtintype" id="2833934">int</span>&nbsp;<span class="op" id="2833938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2833941">_</span><span class="op" id="2833942">,</span>&nbsp;<span class="ident" id="2833944">_</span><span class="op" id="2833945">,</span>&nbsp;<span class="ident" id="2833947">day</span><span class="op" id="2833950">,</span>&nbsp;<span class="ident" id="2833952">_</span>&nbsp;<span class="op" id="2833954">:=</span>&nbsp;<span class="ident" id="2833957">t</span><span class="op" id="2833958">.</span><span class="ident" id="2833959">date</span><span class="op" id="2833963">(</span><span class="builtintype" id="2833964">true</span><span class="op" id="2833968">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2833971">return</span>&nbsp;<span class="ident" id="2833978">day</span><br>
<span class="lineno"></span><span class="op" id="2833982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2833985">//&nbsp;Weekday&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;week&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2834040">func</span>&nbsp;<span class="op" id="2834045">(</span><span class="ident" id="2834046">t</span>&nbsp;<span class="ident" id="2834048">Time</span><span class="op" id="2834052">)</span>&nbsp;<span class="ident" id="2834054">Weekday</span><span class="op" id="2834061">(</span><span class="op" id="2834062">)</span>&nbsp;<span class="ident" id="2834064">Weekday</span>&nbsp;<span class="op" id="2834072">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2834075">return</span>&nbsp;<span class="ident" id="2834082">absWeekday</span><span class="op" id="2834092">(</span><span class="ident" id="2834093">t</span><span class="op" id="2834094">.</span><span class="ident" id="2834095">abs</span><span class="op" id="2834098">(</span><span class="op" id="2834099">)</span><span class="op" id="2834100">)</span><br>
<span class="lineno"></span><span class="op" id="2834102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2834105">//&nbsp;absWeekday&nbsp;is&nbsp;like&nbsp;Weekday&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2834169">func</span>&nbsp;<span class="ident" id="2834174">absWeekday</span><span class="op" id="2834184">(</span><span class="ident" id="2834185">abs</span>&nbsp;<span class="ident" id="2834189">uint64</span><span class="op" id="2834195">)</span>&nbsp;<span class="ident" id="2834197">Weekday</span>&nbsp;<span class="op" id="2834205">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2834208">//&nbsp;January&nbsp;1&nbsp;of&nbsp;the&nbsp;absolute&nbsp;year,&nbsp;like&nbsp;January&nbsp;1&nbsp;of&nbsp;2001,&nbsp;was&nbsp;a&nbsp;Monday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2834282">sec</span>&nbsp;<span class="op" id="2834286">:=</span>&nbsp;<span class="op" id="2834289">(</span><span class="ident" id="2834290">abs</span>&nbsp;<span class="op" id="2834294">+</span>&nbsp;<span class="ident" id="2834296">uint64</span><span class="op" id="2834302">(</span><span class="ident" id="2834303">Monday</span><span class="op" id="2834309">)</span><span class="op" id="2834310">*</span><span class="ident" id="2834311">secondsPerDay</span><span class="op" id="2834324">)</span>&nbsp;<span class="op" id="2834326">%</span>&nbsp;<span class="ident" id="2834328">secondsPerWeek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2834344">return</span>&nbsp;<span class="ident" id="2834351">Weekday</span><span class="op" id="2834358">(</span><span class="builtintype" id="2834359">int</span><span class="op" id="2834362">(</span><span class="ident" id="2834363">sec</span><span class="op" id="2834366">)</span>&nbsp;<span class="op" id="2834368">/</span>&nbsp;<span class="ident" id="2834370">secondsPerDay</span><span class="op" id="2834383">)</span><br>
<span class="lineno"></span><span class="op" id="2834385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="2834388">//&nbsp;ISOWeek&nbsp;returns&nbsp;the&nbsp;ISO&nbsp;8601&nbsp;year&nbsp;and&nbsp;week&nbsp;number&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="comment" id="2834460">//&nbsp;Week&nbsp;ranges&nbsp;from&nbsp;1&nbsp;to&nbsp;53.&nbsp;Jan&nbsp;01&nbsp;to&nbsp;Jan&nbsp;03&nbsp;of&nbsp;year&nbsp;n&nbsp;might&nbsp;belong&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2834532">//&nbsp;week&nbsp;52&nbsp;or&nbsp;53&nbsp;of&nbsp;year&nbsp;n-1,&nbsp;and&nbsp;Dec&nbsp;29&nbsp;to&nbsp;Dec&nbsp;31&nbsp;might&nbsp;belong&nbsp;to&nbsp;week&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2834606">//&nbsp;of&nbsp;year&nbsp;n+1.</span><br>
<span class="lineno"></span><span class="keyword" id="2834622">func</span>&nbsp;<span class="op" id="2834627">(</span><span class="ident" id="2834628">t</span>&nbsp;<span class="ident" id="2834630">Time</span><span class="op" id="2834634">)</span>&nbsp;<span class="ident" id="2834636">ISOWeek</span><span class="op" id="2834643">(</span><span class="op" id="2834644">)</span>&nbsp;<span class="op" id="2834646">(</span><span class="ident" id="2834647">year</span><span class="op" id="2834651">,</span>&nbsp;<span class="ident" id="2834653">week</span>&nbsp;<span class="builtintype" id="2834658">int</span><span class="op" id="2834661">)</span>&nbsp;<span class="op" id="2834663">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2834666">year</span><span class="op" id="2834670">,</span>&nbsp;<span class="ident" id="2834672">month</span><span class="op" id="2834677">,</span>&nbsp;<span class="ident" id="2834679">day</span><span class="op" id="2834682">,</span>&nbsp;<span class="ident" id="2834684">yday</span>&nbsp;<span class="op" id="2834689">:=</span>&nbsp;<span class="ident" id="2834692">t</span><span class="op" id="2834693">.</span><span class="ident" id="2834694">date</span><span class="op" id="2834698">(</span><span class="builtintype" id="2834699">true</span><span class="op" id="2834703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2834706">wday</span>&nbsp;<span class="op" id="2834711">:=</span>&nbsp;<span class="builtintype" id="2834714">int</span><span class="op" id="2834717">(</span><span class="ident" id="2834718">t</span><span class="op" id="2834719">.</span><span class="ident" id="2834720">Weekday</span><span class="op" id="2834727">(</span><span class="op" id="2834728">)</span><span class="op" id="2834729">+</span><span class="num" id="2834730">6</span><span class="op" id="2834731">)</span>&nbsp;<span class="op" id="2834733">%</span>&nbsp;<span class="num" id="2834735">7</span>&nbsp;<span class="comment" id="2834737">//&nbsp;weekday&nbsp;but&nbsp;Monday&nbsp;=&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2834765">const</span>&nbsp;<span class="op" id="2834771">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2834775">Mon</span>&nbsp;<span class="builtintype" id="2834779">int</span>&nbsp;<span class="op" id="2834783">=</span>&nbsp;<span class="ident" id="2834785">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2834792">Tue</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2834798">Wed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2834804">Thu</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2834810">Fri</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2834816">Sat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2834822">Sun</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2834827">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2834831">//&nbsp;Calculate&nbsp;week&nbsp;as&nbsp;number&nbsp;of&nbsp;Mondays&nbsp;in&nbsp;year&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2834885">//&nbsp;and&nbsp;including&nbsp;today,&nbsp;plus&nbsp;1&nbsp;because&nbsp;the&nbsp;first&nbsp;week&nbsp;is&nbsp;week&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2834951">//&nbsp;Putting&nbsp;the&nbsp;+&nbsp;1&nbsp;inside&nbsp;the&nbsp;numerator&nbsp;as&nbsp;a&nbsp;+&nbsp;7&nbsp;keeps&nbsp;the</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835011">//&nbsp;numerator&nbsp;from&nbsp;being&nbsp;negative,&nbsp;which&nbsp;would&nbsp;cause&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835070">//&nbsp;round&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2835093">week</span>&nbsp;<span class="op" id="2835098">=</span>&nbsp;<span class="op" id="2835100">(</span><span class="ident" id="2835101">yday</span>&nbsp;<span class="op" id="2835106">-</span>&nbsp;<span class="ident" id="2835108">wday</span>&nbsp;<span class="op" id="2835113">+</span>&nbsp;<span class="num" id="2835115">7</span><span class="op" id="2835116">)</span>&nbsp;<span class="op" id="2835118">/</span>&nbsp;<span class="num" id="2835120">7</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835124">//&nbsp;The&nbsp;week&nbsp;number&nbsp;is&nbsp;now&nbsp;correct&nbsp;under&nbsp;the&nbsp;assumption</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835180">//&nbsp;that&nbsp;the&nbsp;first&nbsp;Monday&nbsp;of&nbsp;the&nbsp;year&nbsp;is&nbsp;in&nbsp;week&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835232">//&nbsp;If&nbsp;Jan&nbsp;1&nbsp;is&nbsp;a&nbsp;Tuesday,&nbsp;Wednesday,&nbsp;or&nbsp;Thursday,&nbsp;the&nbsp;first&nbsp;Monday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835300">//&nbsp;is&nbsp;actually&nbsp;in&nbsp;week&nbsp;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2835327">jan1wday</span>&nbsp;<span class="op" id="2835336">:=</span>&nbsp;<span class="op" id="2835339">(</span><span class="ident" id="2835340">wday</span>&nbsp;<span class="op" id="2835345">-</span>&nbsp;<span class="ident" id="2835347">yday</span>&nbsp;<span class="op" id="2835352">+</span>&nbsp;<span class="num" id="2835354">7</span><span class="op" id="2835355">*</span><span class="num" id="2835356">53</span><span class="op" id="2835358">)</span>&nbsp;<span class="op" id="2835360">%</span>&nbsp;<span class="num" id="2835362">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2835365">if</span>&nbsp;<span class="ident" id="2835368">Tue</span>&nbsp;<span class="op" id="2835372">&lt;=</span>&nbsp;<span class="ident" id="2835375">jan1wday</span>&nbsp;<span class="op" id="2835384">&amp;&amp;</span>&nbsp;<span class="ident" id="2835387">jan1wday</span>&nbsp;<span class="op" id="2835396">&lt;=</span>&nbsp;<span class="ident" id="2835399">Thu</span>&nbsp;<span class="op" id="2835403">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2835407">week</span><span class="op" id="2835411">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2835415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835419">//&nbsp;If&nbsp;the&nbsp;week&nbsp;number&nbsp;is&nbsp;still&nbsp;0,&nbsp;we&#39;re&nbsp;in&nbsp;early&nbsp;January&nbsp;but&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835484">//&nbsp;the&nbsp;last&nbsp;week&nbsp;of&nbsp;last&nbsp;year.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2835516">if</span>&nbsp;<span class="ident" id="2835519">week</span>&nbsp;<span class="op" id="2835524">==</span>&nbsp;<span class="num" id="2835527">0</span>&nbsp;<span class="op" id="2835529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2835533">year</span><span class="op" id="2835537">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2835542">week</span>&nbsp;<span class="op" id="2835547">=</span>&nbsp;<span class="num" id="2835549">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835554">//&nbsp;A&nbsp;year&nbsp;has&nbsp;53&nbsp;weeks&nbsp;when&nbsp;Jan&nbsp;1&nbsp;or&nbsp;Dec&nbsp;31&nbsp;is&nbsp;a&nbsp;Thursday,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835615">//&nbsp;meaning&nbsp;Jan&nbsp;1&nbsp;of&nbsp;the&nbsp;next&nbsp;year&nbsp;is&nbsp;a&nbsp;Friday</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835663">//&nbsp;or&nbsp;it&nbsp;was&nbsp;a&nbsp;leap&nbsp;year&nbsp;and&nbsp;Jan&nbsp;1&nbsp;of&nbsp;the&nbsp;next&nbsp;year&nbsp;is&nbsp;a&nbsp;Saturday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2835732">if</span>&nbsp;<span class="ident" id="2835735">jan1wday</span>&nbsp;<span class="op" id="2835744">==</span>&nbsp;<span class="ident" id="2835747">Fri</span>&nbsp;<span class="op" id="2835751">||</span>&nbsp;<span class="op" id="2835754">(</span><span class="ident" id="2835755">jan1wday</span>&nbsp;<span class="op" id="2835764">==</span>&nbsp;<span class="ident" id="2835767">Sat</span>&nbsp;<span class="op" id="2835771">&amp;&amp;</span>&nbsp;<span class="ident" id="2835774">isLeap</span><span class="op" id="2835780">(</span><span class="ident" id="2835781">year</span><span class="op" id="2835785">)</span><span class="op" id="2835786">)</span>&nbsp;<span class="op" id="2835788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2835793">week</span><span class="op" id="2835797">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2835802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2835805">}</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835809">//&nbsp;December&nbsp;29&nbsp;to&nbsp;31&nbsp;are&nbsp;in&nbsp;week&nbsp;1&nbsp;of&nbsp;next&nbsp;year&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835861">//&nbsp;they&nbsp;are&nbsp;after&nbsp;the&nbsp;last&nbsp;Thursday&nbsp;of&nbsp;the&nbsp;year&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2835914">//&nbsp;December&nbsp;31&nbsp;is&nbsp;a&nbsp;Monday,&nbsp;Tuesday,&nbsp;or&nbsp;Wednesday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2835966">if</span>&nbsp;<span class="ident" id="2835969">month</span>&nbsp;<span class="op" id="2835975">==</span>&nbsp;<span class="ident" id="2835978">December</span>&nbsp;<span class="op" id="2835987">&amp;&amp;</span>&nbsp;<span class="ident" id="2835990">day</span>&nbsp;<span class="op" id="2835994">&gt;=</span>&nbsp;<span class="num" id="2835997">29</span>&nbsp;<span class="op" id="2836000">&amp;&amp;</span>&nbsp;<span class="ident" id="2836003">wday</span>&nbsp;<span class="op" id="2836008">&lt;</span>&nbsp;<span class="ident" id="2836010">Thu</span>&nbsp;<span class="op" id="2836014">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2836018">if</span>&nbsp;<span class="ident" id="2836021">dec31wday</span>&nbsp;<span class="op" id="2836031">:=</span>&nbsp;<span class="op" id="2836034">(</span><span class="ident" id="2836035">wday</span>&nbsp;<span class="op" id="2836040">+</span>&nbsp;<span class="num" id="2836042">31</span>&nbsp;<span class="op" id="2836045">-</span>&nbsp;<span class="ident" id="2836047">day</span><span class="op" id="2836050">)</span>&nbsp;<span class="op" id="2836052">%</span>&nbsp;<span class="num" id="2836054">7</span><span class="op" id="2836055">;</span>&nbsp;<span class="ident" id="2836057">Mon</span>&nbsp;<span class="op" id="2836061">&lt;=</span>&nbsp;<span class="ident" id="2836064">dec31wday</span>&nbsp;<span class="op" id="2836074">&amp;&amp;</span>&nbsp;<span class="ident" id="2836077">dec31wday</span>&nbsp;<span class="op" id="2836087">&lt;=</span>&nbsp;<span class="ident" id="2836090">Wed</span>&nbsp;<span class="op" id="2836094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2836099">year</span><span class="op" id="2836103">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2836109">week</span>&nbsp;<span class="op" id="2836114">=</span>&nbsp;<span class="num" id="2836116">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2836120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2836123">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2836127">return</span><br>
<span class="lineno"></span><span class="op" id="2836134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2836137">//&nbsp;Clock&nbsp;returns&nbsp;the&nbsp;hour,&nbsp;minute,&nbsp;and&nbsp;second&nbsp;within&nbsp;the&nbsp;day&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno">385</span><span class="keyword" id="2836214">func</span>&nbsp;<span class="op" id="2836219">(</span><span class="ident" id="2836220">t</span>&nbsp;<span class="ident" id="2836222">Time</span><span class="op" id="2836226">)</span>&nbsp;<span class="ident" id="2836228">Clock</span><span class="op" id="2836233">(</span><span class="op" id="2836234">)</span>&nbsp;<span class="op" id="2836236">(</span><span class="ident" id="2836237">hour</span><span class="op" id="2836241">,</span>&nbsp;<span class="ident" id="2836243">min</span><span class="op" id="2836246">,</span>&nbsp;<span class="ident" id="2836248">sec</span>&nbsp;<span class="builtintype" id="2836252">int</span><span class="op" id="2836255">)</span>&nbsp;<span class="op" id="2836257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2836260">return</span>&nbsp;<span class="ident" id="2836267">absClock</span><span class="op" id="2836275">(</span><span class="ident" id="2836276">t</span><span class="op" id="2836277">.</span><span class="ident" id="2836278">abs</span><span class="op" id="2836281">(</span><span class="op" id="2836282">)</span><span class="op" id="2836283">)</span><br>
<span class="lineno"></span><span class="op" id="2836285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2836288">//&nbsp;absClock&nbsp;is&nbsp;like&nbsp;clock&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno">390</span><span class="keyword" id="2836348">func</span>&nbsp;<span class="ident" id="2836353">absClock</span><span class="op" id="2836361">(</span><span class="ident" id="2836362">abs</span>&nbsp;<span class="ident" id="2836366">uint64</span><span class="op" id="2836372">)</span>&nbsp;<span class="op" id="2836374">(</span><span class="ident" id="2836375">hour</span><span class="op" id="2836379">,</span>&nbsp;<span class="ident" id="2836381">min</span><span class="op" id="2836384">,</span>&nbsp;<span class="ident" id="2836386">sec</span>&nbsp;<span class="builtintype" id="2836390">int</span><span class="op" id="2836393">)</span>&nbsp;<span class="op" id="2836395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2836398">sec</span>&nbsp;<span class="op" id="2836402">=</span>&nbsp;<span class="builtintype" id="2836404">int</span><span class="op" id="2836407">(</span><span class="ident" id="2836408">abs</span>&nbsp;<span class="op" id="2836412">%</span>&nbsp;<span class="ident" id="2836414">secondsPerDay</span><span class="op" id="2836427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2836430">hour</span>&nbsp;<span class="op" id="2836435">=</span>&nbsp;<span class="ident" id="2836437">sec</span>&nbsp;<span class="op" id="2836441">/</span>&nbsp;<span class="ident" id="2836443">secondsPerHour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2836459">sec</span>&nbsp;<span class="op" id="2836463">-=</span>&nbsp;<span class="ident" id="2836466">hour</span>&nbsp;<span class="op" id="2836471">*</span>&nbsp;<span class="ident" id="2836473">secondsPerHour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2836489">min</span>&nbsp;<span class="op" id="2836493">=</span>&nbsp;<span class="ident" id="2836495">sec</span>&nbsp;<span class="op" id="2836499">/</span>&nbsp;<span class="ident" id="2836501">secondsPerMinute</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2836519">sec</span>&nbsp;<span class="op" id="2836523">-=</span>&nbsp;<span class="ident" id="2836526">min</span>&nbsp;<span class="op" id="2836530">*</span>&nbsp;<span class="ident" id="2836532">secondsPerMinute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2836550">return</span><br>
<span class="lineno"></span><span class="op" id="2836557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2836560">//&nbsp;Hour&nbsp;returns&nbsp;the&nbsp;hour&nbsp;within&nbsp;the&nbsp;day&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;23].</span><br>
<span class="lineno">400</span><span class="keyword" id="2836638">func</span>&nbsp;<span class="op" id="2836643">(</span><span class="ident" id="2836644">t</span>&nbsp;<span class="ident" id="2836646">Time</span><span class="op" id="2836650">)</span>&nbsp;<span class="ident" id="2836652">Hour</span><span class="op" id="2836656">(</span><span class="op" id="2836657">)</span>&nbsp;<span class="builtintype" id="2836659">int</span>&nbsp;<span class="op" id="2836663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2836666">return</span>&nbsp;<span class="builtintype" id="2836673">int</span><span class="op" id="2836676">(</span><span class="ident" id="2836677">t</span><span class="op" id="2836678">.</span><span class="ident" id="2836679">abs</span><span class="op" id="2836682">(</span><span class="op" id="2836683">)</span><span class="op" id="2836684">%</span><span class="ident" id="2836685">secondsPerDay</span><span class="op" id="2836698">)</span>&nbsp;<span class="op" id="2836700">/</span>&nbsp;<span class="ident" id="2836702">secondsPerHour</span><br>
<span class="lineno"></span><span class="op" id="2836717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2836720">//&nbsp;Minute&nbsp;returns&nbsp;the&nbsp;minute&nbsp;offset&nbsp;within&nbsp;the&nbsp;hour&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;59].</span><br>
<span class="lineno">405</span><span class="keyword" id="2836810">func</span>&nbsp;<span class="op" id="2836815">(</span><span class="ident" id="2836816">t</span>&nbsp;<span class="ident" id="2836818">Time</span><span class="op" id="2836822">)</span>&nbsp;<span class="ident" id="2836824">Minute</span><span class="op" id="2836830">(</span><span class="op" id="2836831">)</span>&nbsp;<span class="builtintype" id="2836833">int</span>&nbsp;<span class="op" id="2836837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2836840">return</span>&nbsp;<span class="builtintype" id="2836847">int</span><span class="op" id="2836850">(</span><span class="ident" id="2836851">t</span><span class="op" id="2836852">.</span><span class="ident" id="2836853">abs</span><span class="op" id="2836856">(</span><span class="op" id="2836857">)</span><span class="op" id="2836858">%</span><span class="ident" id="2836859">secondsPerHour</span><span class="op" id="2836873">)</span>&nbsp;<span class="op" id="2836875">/</span>&nbsp;<span class="ident" id="2836877">secondsPerMinute</span><br>
<span class="lineno"></span><span class="op" id="2836894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2836897">//&nbsp;Second&nbsp;returns&nbsp;the&nbsp;second&nbsp;offset&nbsp;within&nbsp;the&nbsp;minute&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;59].</span><br>
<span class="lineno">410</span><span class="keyword" id="2836989">func</span>&nbsp;<span class="op" id="2836994">(</span><span class="ident" id="2836995">t</span>&nbsp;<span class="ident" id="2836997">Time</span><span class="op" id="2837001">)</span>&nbsp;<span class="ident" id="2837003">Second</span><span class="op" id="2837009">(</span><span class="op" id="2837010">)</span>&nbsp;<span class="builtintype" id="2837012">int</span>&nbsp;<span class="op" id="2837016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2837019">return</span>&nbsp;<span class="builtintype" id="2837026">int</span><span class="op" id="2837029">(</span><span class="ident" id="2837030">t</span><span class="op" id="2837031">.</span><span class="ident" id="2837032">abs</span><span class="op" id="2837035">(</span><span class="op" id="2837036">)</span>&nbsp;<span class="op" id="2837038">%</span>&nbsp;<span class="ident" id="2837040">secondsPerMinute</span><span class="op" id="2837056">)</span><br>
<span class="lineno"></span><span class="op" id="2837058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2837061">//&nbsp;Nanosecond&nbsp;returns&nbsp;the&nbsp;nanosecond&nbsp;offset&nbsp;within&nbsp;the&nbsp;second&nbsp;specified&nbsp;by&nbsp;t,</span><br>
<span class="lineno">415</span><span class="comment" id="2837139">//&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span><span class="keyword" id="2837171">func</span>&nbsp;<span class="op" id="2837176">(</span><span class="ident" id="2837177">t</span>&nbsp;<span class="ident" id="2837179">Time</span><span class="op" id="2837183">)</span>&nbsp;<span class="ident" id="2837185">Nanosecond</span><span class="op" id="2837195">(</span><span class="op" id="2837196">)</span>&nbsp;<span class="builtintype" id="2837198">int</span>&nbsp;<span class="op" id="2837202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2837205">return</span>&nbsp;<span class="builtintype" id="2837212">int</span><span class="op" id="2837215">(</span><span class="ident" id="2837216">t</span><span class="op" id="2837217">.</span><span class="ident" id="2837218">nsec</span><span class="op" id="2837222">)</span><br>
<span class="lineno"></span><span class="op" id="2837224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="2837227">//&nbsp;YearDay&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;year&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[1,365]&nbsp;for&nbsp;non-leap&nbsp;years,</span><br>
<span class="lineno"></span><span class="comment" id="2837323">//&nbsp;and&nbsp;[1,366]&nbsp;in&nbsp;leap&nbsp;years.</span><br>
<span class="lineno"></span><span class="keyword" id="2837353">func</span>&nbsp;<span class="op" id="2837358">(</span><span class="ident" id="2837359">t</span>&nbsp;<span class="ident" id="2837361">Time</span><span class="op" id="2837365">)</span>&nbsp;<span class="ident" id="2837367">YearDay</span><span class="op" id="2837374">(</span><span class="op" id="2837375">)</span>&nbsp;<span class="builtintype" id="2837377">int</span>&nbsp;<span class="op" id="2837381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2837384">_</span><span class="op" id="2837385">,</span>&nbsp;<span class="ident" id="2837387">_</span><span class="op" id="2837388">,</span>&nbsp;<span class="ident" id="2837390">_</span><span class="op" id="2837391">,</span>&nbsp;<span class="ident" id="2837393">yday</span>&nbsp;<span class="op" id="2837398">:=</span>&nbsp;<span class="ident" id="2837401">t</span><span class="op" id="2837402">.</span><span class="ident" id="2837403">date</span><span class="op" id="2837407">(</span><span class="builtintype" id="2837408">false</span><span class="op" id="2837413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2837416">return</span>&nbsp;<span class="ident" id="2837423">yday</span>&nbsp;<span class="op" id="2837428">+</span>&nbsp;<span class="num" id="2837430">1</span><br>
<span class="lineno">425</span><span class="op" id="2837432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2837435">//&nbsp;A&nbsp;Duration&nbsp;represents&nbsp;the&nbsp;elapsed&nbsp;time&nbsp;between&nbsp;two&nbsp;instants</span><br>
<span class="lineno"></span><span class="comment" id="2837498">//&nbsp;as&nbsp;an&nbsp;int64&nbsp;nanosecond&nbsp;count.&nbsp;&nbsp;The&nbsp;representation&nbsp;limits&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2837562">//&nbsp;largest&nbsp;representable&nbsp;duration&nbsp;to&nbsp;approximately&nbsp;290&nbsp;years.</span><br>
<span class="lineno">430</span><span class="keyword" id="2837624">type</span>&nbsp;<span class="ident" id="2837629">Duration</span>&nbsp;<span class="ident" id="2837638">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2837645">const</span>&nbsp;<span class="op" id="2837651">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2837654">minDuration</span>&nbsp;<span class="ident" id="2837666">Duration</span>&nbsp;<span class="op" id="2837675">=</span>&nbsp;<span class="op" id="2837677">-</span><span class="num" id="2837678">1</span>&nbsp;<span class="op" id="2837680">&lt;&lt;</span>&nbsp;<span class="num" id="2837683">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2837687">maxDuration</span>&nbsp;<span class="ident" id="2837699">Duration</span>&nbsp;<span class="op" id="2837708">=</span>&nbsp;<span class="num" id="2837710">1</span><span class="op" id="2837711">&lt;&lt;</span><span class="num" id="2837713">63</span>&nbsp;<span class="op" id="2837716">-</span>&nbsp;<span class="num" id="2837718">1</span><br>
<span class="lineno">435</span><span class="op" id="2837720">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2837723">//&nbsp;Common&nbsp;durations.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;definition&nbsp;for&nbsp;units&nbsp;of&nbsp;Day&nbsp;or&nbsp;larger</span><br>
<span class="lineno"></span><span class="comment" id="2837795">//&nbsp;to&nbsp;avoid&nbsp;confusion&nbsp;across&nbsp;daylight&nbsp;savings&nbsp;time&nbsp;zone&nbsp;transitions.</span><br>
<span class="lineno"></span><span class="comment" id="2837864">//</span><br>
<span class="lineno">440</span><span class="comment" id="2837867">//&nbsp;To&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;units&nbsp;in&nbsp;a&nbsp;Duration,&nbsp;divide:</span><br>
<span class="lineno"></span><span class="comment" id="2837922">//&nbsp;&nbsp;&nbsp;&nbspsecond&nbsp;:=&nbsp;time.Second</span><br>
<span class="lineno"></span><span class="comment" id="2837947">//&nbsp;&nbsp;&nbsp;&nbspfmt.Print(int64(second/time.Millisecond))&nbsp;//&nbsp;prints&nbsp;1000</span><br>
<span class="lineno"></span><span class="comment" id="2838007">//</span><br>
<span class="lineno"></span><span class="comment" id="2838010">//&nbsp;To&nbsp;convert&nbsp;an&nbsp;integer&nbsp;number&nbsp;of&nbsp;units&nbsp;to&nbsp;a&nbsp;Duration,&nbsp;multiply:</span><br>
<span class="lineno">445</span><span class="comment" id="2838076">//&nbsp;&nbsp;&nbsp;&nbspseconds&nbsp;:=&nbsp;10</span><br>
<span class="lineno"></span><span class="comment" id="2838093">//&nbsp;&nbsp;&nbsp;&nbspfmt.Print(time.Duration(seconds)*time.Second)&nbsp;//&nbsp;prints&nbsp;10s</span><br>
<span class="lineno"></span><span class="comment" id="2838156">//</span><br>
<span class="lineno"></span><span class="keyword" id="2838159">const</span>&nbsp;<span class="op" id="2838165">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2838168">Nanosecond</span>&nbsp;&nbsp;<span class="ident" id="2838180">Duration</span>&nbsp;<span class="op" id="2838189">=</span>&nbsp;<span class="num" id="2838191">1</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2838194">Microsecond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838215">=</span>&nbsp;<span class="num" id="2838217">1000</span>&nbsp;<span class="op" id="2838222">*</span>&nbsp;<span class="ident" id="2838224">Nanosecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2838236">Millisecond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838257">=</span>&nbsp;<span class="num" id="2838259">1000</span>&nbsp;<span class="op" id="2838264">*</span>&nbsp;<span class="ident" id="2838266">Microsecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2838279">Second</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838300">=</span>&nbsp;<span class="num" id="2838302">1000</span>&nbsp;<span class="op" id="2838307">*</span>&nbsp;<span class="ident" id="2838309">Millisecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2838322">Minute</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838343">=</span>&nbsp;<span class="num" id="2838345">60</span>&nbsp;<span class="op" id="2838348">*</span>&nbsp;<span class="ident" id="2838350">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2838358">Hour</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838379">=</span>&nbsp;<span class="num" id="2838381">60</span>&nbsp;<span class="op" id="2838384">*</span>&nbsp;<span class="ident" id="2838386">Minute</span><br>
<span class="lineno">455</span><span class="op" id="2838393">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2838396">//&nbsp;String&nbsp;returns&nbsp;a&nbsp;string&nbsp;representing&nbsp;the&nbsp;duration&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;72h3m0.5s&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2838474">//&nbsp;Leading&nbsp;zero&nbsp;units&nbsp;are&nbsp;omitted.&nbsp;&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;durations&nbsp;less&nbsp;than&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="2838553">//&nbsp;second&nbsp;format&nbsp;use&nbsp;a&nbsp;smaller&nbsp;unit&nbsp;(milli-,&nbsp;micro-,&nbsp;or&nbsp;nanoseconds)&nbsp;to&nbsp;ensure</span><br>
<span class="lineno">460</span><span class="comment" id="2838632">//&nbsp;that&nbsp;the&nbsp;leading&nbsp;digit&nbsp;is&nbsp;non-zero.&nbsp;&nbsp;The&nbsp;zero&nbsp;duration&nbsp;formats&nbsp;as&nbsp;0,</span><br>
<span class="lineno"></span><span class="comment" id="2838704">//&nbsp;with&nbsp;no&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="2838721">func</span>&nbsp;<span class="op" id="2838726">(</span><span class="ident" id="2838727">d</span>&nbsp;<span class="ident" id="2838729">Duration</span><span class="op" id="2838737">)</span>&nbsp;<span class="ident" id="2838739">String</span><span class="op" id="2838745">(</span><span class="op" id="2838746">)</span>&nbsp;<span class="builtintype" id="2838748">string</span>&nbsp;<span class="op" id="2838755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2838758">//&nbsp;Largest&nbsp;time&nbsp;is&nbsp;2540400h10m10.000000000s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2838803">var</span>&nbsp;<span class="ident" id="2838807">buf</span>&nbsp;<span class="op" id="2838811">[</span><span class="num" id="2838812">32</span><span class="op" id="2838814">]</span><span class="builtintype" id="2838815">byte</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2838821">w</span>&nbsp;<span class="op" id="2838823">:=</span>&nbsp;<span class="builtinfunc" id="2838826">len</span><span class="op" id="2838829">(</span><span class="ident" id="2838830">buf</span><span class="op" id="2838833">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2838837">u</span>&nbsp;<span class="op" id="2838839">:=</span>&nbsp;<span class="ident" id="2838842">uint64</span><span class="op" id="2838848">(</span><span class="ident" id="2838849">d</span><span class="op" id="2838850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2838853">neg</span>&nbsp;<span class="op" id="2838857">:=</span>&nbsp;<span class="ident" id="2838860">d</span>&nbsp;<span class="op" id="2838862">&lt;</span>&nbsp;<span class="num" id="2838864">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2838867">if</span>&nbsp;<span class="ident" id="2838870">neg</span>&nbsp;<span class="op" id="2838874">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2838878">u</span>&nbsp;<span class="op" id="2838880">=</span>&nbsp;<span class="op" id="2838882">-</span><span class="ident" id="2838883">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2838886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2838890">if</span>&nbsp;<span class="ident" id="2838893">u</span>&nbsp;<span class="op" id="2838895">&lt;</span>&nbsp;<span class="ident" id="2838897">uint64</span><span class="op" id="2838903">(</span><span class="ident" id="2838904">Second</span><span class="op" id="2838910">)</span>&nbsp;<span class="op" id="2838912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2838916">//&nbsp;Special&nbsp;case:&nbsp;if&nbsp;duration&nbsp;is&nbsp;smaller&nbsp;than&nbsp;a&nbsp;second,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2838973">//&nbsp;use&nbsp;smaller&nbsp;units,&nbsp;like&nbsp;1.2ms</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2839008">var</span>&nbsp;<span class="ident" id="2839012">prec</span>&nbsp;<span class="builtintype" id="2839017">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839023">w</span><span class="op" id="2839024">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839029">buf</span><span class="op" id="2839032">[</span><span class="ident" id="2839033">w</span><span class="op" id="2839034">]</span>&nbsp;<span class="op" id="2839036">=</span>&nbsp;<span class="string" id="2839038">&#39;s&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839044">w</span><span class="op" id="2839045">--</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2839050">switch</span>&nbsp;<span class="op" id="2839057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2839061">case</span>&nbsp;<span class="ident" id="2839066">u</span>&nbsp;<span class="op" id="2839068">==</span>&nbsp;<span class="num" id="2839071">0</span><span class="op" id="2839072">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2839077">return</span>&nbsp;<span class="string" id="2839084">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2839090">case</span>&nbsp;<span class="ident" id="2839095">u</span>&nbsp;<span class="op" id="2839097">&lt;</span>&nbsp;<span class="ident" id="2839099">uint64</span><span class="op" id="2839105">(</span><span class="ident" id="2839106">Microsecond</span><span class="op" id="2839117">)</span><span class="op" id="2839118">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2839123">//&nbsp;print&nbsp;nanoseconds</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839147">prec</span>&nbsp;<span class="op" id="2839152">=</span>&nbsp;<span class="num" id="2839154">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839159">buf</span><span class="op" id="2839162">[</span><span class="ident" id="2839163">w</span><span class="op" id="2839164">]</span>&nbsp;<span class="op" id="2839166">=</span>&nbsp;<span class="string" id="2839168">&#39;n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2839174">case</span>&nbsp;<span class="ident" id="2839179">u</span>&nbsp;<span class="op" id="2839181">&lt;</span>&nbsp;<span class="ident" id="2839183">uint64</span><span class="op" id="2839189">(</span><span class="ident" id="2839190">Millisecond</span><span class="op" id="2839201">)</span><span class="op" id="2839202">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2839207">//&nbsp;print&nbsp;microseconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839232">prec</span>&nbsp;<span class="op" id="2839237">=</span>&nbsp;<span class="num" id="2839239">3</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2839244">//&nbsp;U+00B5&nbsp;&#39;µ&#39;&nbsp;micro&nbsp;sign&nbsp;==&nbsp;0xC2&nbsp;0xB5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839286">w</span><span class="op" id="2839287">--</span>&nbsp;<span class="comment" id="2839290">//&nbsp;Need&nbsp;room&nbsp;for&nbsp;two&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2839321">copy</span><span class="op" id="2839325">(</span><span class="ident" id="2839326">buf</span><span class="op" id="2839329">[</span><span class="ident" id="2839330">w</span><span class="op" id="2839331">:</span><span class="op" id="2839332">]</span><span class="op" id="2839333">,</span>&nbsp;<span class="string" id="2839335">&#34;µ&#34;</span><span class="op" id="2839339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2839343">default</span><span class="op" id="2839350">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2839355">//&nbsp;print&nbsp;milliseconds</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839380">prec</span>&nbsp;<span class="op" id="2839385">=</span>&nbsp;<span class="num" id="2839387">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839392">buf</span><span class="op" id="2839395">[</span><span class="ident" id="2839396">w</span><span class="op" id="2839397">]</span>&nbsp;<span class="op" id="2839399">=</span>&nbsp;<span class="string" id="2839401">&#39;m&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2839407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839411">w</span><span class="op" id="2839412">,</span>&nbsp;<span class="ident" id="2839414">u</span>&nbsp;<span class="op" id="2839416">=</span>&nbsp;<span class="ident" id="2839418">fmtFrac</span><span class="op" id="2839425">(</span><span class="ident" id="2839426">buf</span><span class="op" id="2839429">[</span><span class="op" id="2839430">:</span><span class="ident" id="2839431">w</span><span class="op" id="2839432">]</span><span class="op" id="2839433">,</span>&nbsp;<span class="ident" id="2839435">u</span><span class="op" id="2839436">,</span>&nbsp;<span class="ident" id="2839438">prec</span><span class="op" id="2839442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839446">w</span>&nbsp;<span class="op" id="2839448">=</span>&nbsp;<span class="ident" id="2839450">fmtInt</span><span class="op" id="2839456">(</span><span class="ident" id="2839457">buf</span><span class="op" id="2839460">[</span><span class="op" id="2839461">:</span><span class="ident" id="2839462">w</span><span class="op" id="2839463">]</span><span class="op" id="2839464">,</span>&nbsp;<span class="ident" id="2839466">u</span><span class="op" id="2839467">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2839470">}</span>&nbsp;<span class="keyword" id="2839472">else</span>&nbsp;<span class="op" id="2839477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839481">w</span><span class="op" id="2839482">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839487">buf</span><span class="op" id="2839490">[</span><span class="ident" id="2839491">w</span><span class="op" id="2839492">]</span>&nbsp;<span class="op" id="2839494">=</span>&nbsp;<span class="string" id="2839496">&#39;s&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839503">w</span><span class="op" id="2839504">,</span>&nbsp;<span class="ident" id="2839506">u</span>&nbsp;<span class="op" id="2839508">=</span>&nbsp;<span class="ident" id="2839510">fmtFrac</span><span class="op" id="2839517">(</span><span class="ident" id="2839518">buf</span><span class="op" id="2839521">[</span><span class="op" id="2839522">:</span><span class="ident" id="2839523">w</span><span class="op" id="2839524">]</span><span class="op" id="2839525">,</span>&nbsp;<span class="ident" id="2839527">u</span><span class="op" id="2839528">,</span>&nbsp;<span class="num" id="2839530">9</span><span class="op" id="2839531">)</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2839536">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839566">w</span>&nbsp;<span class="op" id="2839568">=</span>&nbsp;<span class="ident" id="2839570">fmtInt</span><span class="op" id="2839576">(</span><span class="ident" id="2839577">buf</span><span class="op" id="2839580">[</span><span class="op" id="2839581">:</span><span class="ident" id="2839582">w</span><span class="op" id="2839583">]</span><span class="op" id="2839584">,</span>&nbsp;<span class="ident" id="2839586">u</span><span class="op" id="2839587">%</span><span class="num" id="2839588">60</span><span class="op" id="2839590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839594">u</span>&nbsp;<span class="op" id="2839596">/=</span>&nbsp;<span class="num" id="2839599">60</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2839605">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2839635">if</span>&nbsp;<span class="ident" id="2839638">u</span>&nbsp;<span class="op" id="2839640">&gt;</span>&nbsp;<span class="num" id="2839642">0</span>&nbsp;<span class="op" id="2839644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839649">w</span><span class="op" id="2839650">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839656">buf</span><span class="op" id="2839659">[</span><span class="ident" id="2839660">w</span><span class="op" id="2839661">]</span>&nbsp;<span class="op" id="2839663">=</span>&nbsp;<span class="string" id="2839665">&#39;m&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839672">w</span>&nbsp;<span class="op" id="2839674">=</span>&nbsp;<span class="ident" id="2839676">fmtInt</span><span class="op" id="2839682">(</span><span class="ident" id="2839683">buf</span><span class="op" id="2839686">[</span><span class="op" id="2839687">:</span><span class="ident" id="2839688">w</span><span class="op" id="2839689">]</span><span class="op" id="2839690">,</span>&nbsp;<span class="ident" id="2839692">u</span><span class="op" id="2839693">%</span><span class="num" id="2839694">60</span><span class="op" id="2839696">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839701">u</span>&nbsp;<span class="op" id="2839703">/=</span>&nbsp;<span class="num" id="2839706">60</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2839713">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;hours</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2839742">//&nbsp;Stop&nbsp;at&nbsp;hours&nbsp;because&nbsp;days&nbsp;can&nbsp;be&nbsp;different&nbsp;lengths.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2839801">if</span>&nbsp;<span class="ident" id="2839804">u</span>&nbsp;<span class="op" id="2839806">&gt;</span>&nbsp;<span class="num" id="2839808">0</span>&nbsp;<span class="op" id="2839810">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839816">w</span><span class="op" id="2839817">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839824">buf</span><span class="op" id="2839827">[</span><span class="ident" id="2839828">w</span><span class="op" id="2839829">]</span>&nbsp;<span class="op" id="2839831">=</span>&nbsp;<span class="string" id="2839833">&#39;h&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839841">w</span>&nbsp;<span class="op" id="2839843">=</span>&nbsp;<span class="ident" id="2839845">fmtInt</span><span class="op" id="2839851">(</span><span class="ident" id="2839852">buf</span><span class="op" id="2839855">[</span><span class="op" id="2839856">:</span><span class="ident" id="2839857">w</span><span class="op" id="2839858">]</span><span class="op" id="2839859">,</span>&nbsp;<span class="ident" id="2839861">u</span><span class="op" id="2839862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2839867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2839871">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2839874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2839878">if</span>&nbsp;<span class="ident" id="2839881">neg</span>&nbsp;<span class="op" id="2839885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839889">w</span><span class="op" id="2839890">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2839895">buf</span><span class="op" id="2839898">[</span><span class="ident" id="2839899">w</span><span class="op" id="2839900">]</span>&nbsp;<span class="op" id="2839902">=</span>&nbsp;<span class="string" id="2839904">&#39;-&#39;</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2839909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2839913">return</span>&nbsp;<span class="builtintype" id="2839920">string</span><span class="op" id="2839926">(</span><span class="ident" id="2839927">buf</span><span class="op" id="2839930">[</span><span class="ident" id="2839931">w</span><span class="op" id="2839932">:</span><span class="op" id="2839933">]</span><span class="op" id="2839934">)</span><br>
<span class="lineno"></span><span class="op" id="2839936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="2839939">//&nbsp;fmtFrac&nbsp;formats&nbsp;the&nbsp;fraction&nbsp;of&nbsp;v/10**prec&nbsp;(e.g.,&nbsp;&#34;.12345&#34;)&nbsp;into&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2840011">//&nbsp;tail&nbsp;of&nbsp;buf,&nbsp;omitting&nbsp;trailing&nbsp;zeros.&nbsp;&nbsp;it&nbsp;omits&nbsp;the&nbsp;decimal</span><br>
<span class="lineno"></span><span class="comment" id="2840074">//&nbsp;point&nbsp;too&nbsp;when&nbsp;the&nbsp;fraction&nbsp;is&nbsp;0.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2840143">//&nbsp;output&nbsp;bytes&nbsp;begin&nbsp;and&nbsp;the&nbsp;value&nbsp;v/10**prec.</span><br>
<span class="lineno"></span><span class="keyword" id="2840191">func</span>&nbsp;<span class="ident" id="2840196">fmtFrac</span><span class="op" id="2840203">(</span><span class="ident" id="2840204">buf</span>&nbsp;<span class="op" id="2840208">[</span><span class="op" id="2840209">]</span><span class="builtintype" id="2840210">byte</span><span class="op" id="2840214">,</span>&nbsp;<span class="ident" id="2840216">v</span>&nbsp;<span class="ident" id="2840218">uint64</span><span class="op" id="2840224">,</span>&nbsp;<span class="ident" id="2840226">prec</span>&nbsp;<span class="builtintype" id="2840231">int</span><span class="op" id="2840234">)</span>&nbsp;<span class="op" id="2840236">(</span><span class="ident" id="2840237">nw</span>&nbsp;<span class="builtintype" id="2840240">int</span><span class="op" id="2840243">,</span>&nbsp;<span class="ident" id="2840245">nv</span>&nbsp;<span class="ident" id="2840248">uint64</span><span class="op" id="2840254">)</span>&nbsp;<span class="op" id="2840256">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2840259">//&nbsp;Omit&nbsp;trailing&nbsp;zeros&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840318">w</span>&nbsp;<span class="op" id="2840320">:=</span>&nbsp;<span class="builtinfunc" id="2840323">len</span><span class="op" id="2840326">(</span><span class="ident" id="2840327">buf</span><span class="op" id="2840330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2840333">print</span>&nbsp;<span class="op" id="2840339">:=</span>&nbsp;<span class="builtintype" id="2840342">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2840349">for</span>&nbsp;<span class="ident" id="2840353">i</span>&nbsp;<span class="op" id="2840355">:=</span>&nbsp;<span class="num" id="2840358">0</span><span class="op" id="2840359">;</span>&nbsp;<span class="ident" id="2840361">i</span>&nbsp;<span class="op" id="2840363">&lt;</span>&nbsp;<span class="ident" id="2840365">prec</span><span class="op" id="2840369">;</span>&nbsp;<span class="ident" id="2840371">i</span><span class="op" id="2840372">++</span>&nbsp;<span class="op" id="2840375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840379">digit</span>&nbsp;<span class="op" id="2840385">:=</span>&nbsp;<span class="ident" id="2840388">v</span>&nbsp;<span class="op" id="2840390">%</span>&nbsp;<span class="num" id="2840392">10</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2840397">print</span>&nbsp;<span class="op" id="2840403">=</span>&nbsp;<span class="builtinfunc" id="2840405">print</span>&nbsp;<span class="op" id="2840411">||</span>&nbsp;<span class="ident" id="2840414">digit</span>&nbsp;<span class="op" id="2840420">!=</span>&nbsp;<span class="num" id="2840423">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2840427">if</span>&nbsp;<span class="builtinfunc" id="2840430">print</span>&nbsp;<span class="op" id="2840436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840441">w</span><span class="op" id="2840442">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840448">buf</span><span class="op" id="2840451">[</span><span class="ident" id="2840452">w</span><span class="op" id="2840453">]</span>&nbsp;<span class="op" id="2840455">=</span>&nbsp;<span class="builtintype" id="2840457">byte</span><span class="op" id="2840461">(</span><span class="ident" id="2840462">digit</span><span class="op" id="2840467">)</span>&nbsp;<span class="op" id="2840469">+</span>&nbsp;<span class="string" id="2840471">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2840477">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840481">v</span>&nbsp;<span class="op" id="2840483">/=</span>&nbsp;<span class="num" id="2840486">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2840490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2840493">if</span>&nbsp;<span class="builtinfunc" id="2840496">print</span>&nbsp;<span class="op" id="2840502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840506">w</span><span class="op" id="2840507">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840512">buf</span><span class="op" id="2840515">[</span><span class="ident" id="2840516">w</span><span class="op" id="2840517">]</span>&nbsp;<span class="op" id="2840519">=</span>&nbsp;<span class="string" id="2840521">&#39;.&#39;</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2840526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2840529">return</span>&nbsp;<span class="ident" id="2840536">w</span><span class="op" id="2840537">,</span>&nbsp;<span class="ident" id="2840539">v</span><br>
<span class="lineno"></span><span class="op" id="2840541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2840544">//&nbsp;fmtInt&nbsp;formats&nbsp;v&nbsp;into&nbsp;the&nbsp;tail&nbsp;of&nbsp;buf.</span><br>
<span class="lineno">560</span><span class="comment" id="2840586">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;the&nbsp;output&nbsp;begins.</span><br>
<span class="lineno"></span><span class="keyword" id="2840635">func</span>&nbsp;<span class="ident" id="2840640">fmtInt</span><span class="op" id="2840646">(</span><span class="ident" id="2840647">buf</span>&nbsp;<span class="op" id="2840651">[</span><span class="op" id="2840652">]</span><span class="builtintype" id="2840653">byte</span><span class="op" id="2840657">,</span>&nbsp;<span class="ident" id="2840659">v</span>&nbsp;<span class="ident" id="2840661">uint64</span><span class="op" id="2840667">)</span>&nbsp;<span class="builtintype" id="2840669">int</span>&nbsp;<span class="op" id="2840673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840676">w</span>&nbsp;<span class="op" id="2840678">:=</span>&nbsp;<span class="builtinfunc" id="2840681">len</span><span class="op" id="2840684">(</span><span class="ident" id="2840685">buf</span><span class="op" id="2840688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2840691">if</span>&nbsp;<span class="ident" id="2840694">v</span>&nbsp;<span class="op" id="2840696">==</span>&nbsp;<span class="num" id="2840699">0</span>&nbsp;<span class="op" id="2840701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840705">w</span><span class="op" id="2840706">--</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840711">buf</span><span class="op" id="2840714">[</span><span class="ident" id="2840715">w</span><span class="op" id="2840716">]</span>&nbsp;<span class="op" id="2840718">=</span>&nbsp;<span class="string" id="2840720">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2840725">}</span>&nbsp;<span class="keyword" id="2840727">else</span>&nbsp;<span class="op" id="2840732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2840736">for</span>&nbsp;<span class="ident" id="2840740">v</span>&nbsp;<span class="op" id="2840742">&gt;</span>&nbsp;<span class="num" id="2840744">0</span>&nbsp;<span class="op" id="2840746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840751">w</span><span class="op" id="2840752">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840758">buf</span><span class="op" id="2840761">[</span><span class="ident" id="2840762">w</span><span class="op" id="2840763">]</span>&nbsp;<span class="op" id="2840765">=</span>&nbsp;<span class="builtintype" id="2840767">byte</span><span class="op" id="2840771">(</span><span class="ident" id="2840772">v</span><span class="op" id="2840773">%</span><span class="num" id="2840774">10</span><span class="op" id="2840776">)</span>&nbsp;<span class="op" id="2840778">+</span>&nbsp;<span class="string" id="2840780">&#39;0&#39;</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2840787">v</span>&nbsp;<span class="op" id="2840789">/=</span>&nbsp;<span class="num" id="2840792">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2840797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2840800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2840803">return</span>&nbsp;<span class="ident" id="2840810">w</span><br>
<span class="lineno"></span><span class="op" id="2840812">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="2840815">//&nbsp;Nanoseconds&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;an&nbsp;integer&nbsp;nanosecond&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2840883">func</span>&nbsp;<span class="op" id="2840888">(</span><span class="ident" id="2840889">d</span>&nbsp;<span class="ident" id="2840891">Duration</span><span class="op" id="2840899">)</span>&nbsp;<span class="ident" id="2840901">Nanoseconds</span><span class="op" id="2840912">(</span><span class="op" id="2840913">)</span>&nbsp;<span class="ident" id="2840915">int64</span>&nbsp;<span class="op" id="2840921">{</span>&nbsp;<span class="keyword" id="2840923">return</span>&nbsp;<span class="ident" id="2840930">int64</span><span class="op" id="2840935">(</span><span class="ident" id="2840936">d</span><span class="op" id="2840937">)</span>&nbsp;<span class="op" id="2840939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2840942">//&nbsp;These&nbsp;methods&nbsp;return&nbsp;float64&nbsp;because&nbsp;the&nbsp;dominant</span><br>
<span class="lineno">580</span><span class="comment" id="2840995">//&nbsp;use&nbsp;case&nbsp;is&nbsp;for&nbsp;printing&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;like&nbsp;1.5s,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2841062">//&nbsp;a&nbsp;truncation&nbsp;to&nbsp;integer&nbsp;would&nbsp;make&nbsp;them&nbsp;not&nbsp;useful&nbsp;in&nbsp;those&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2841132">//&nbsp;Splitting&nbsp;the&nbsp;integer&nbsp;and&nbsp;fraction&nbsp;ourselves&nbsp;guarantees&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2841196">//&nbsp;converting&nbsp;the&nbsp;returned&nbsp;float64&nbsp;to&nbsp;an&nbsp;integer&nbsp;rounds&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="2841261">//&nbsp;way&nbsp;that&nbsp;a&nbsp;pure&nbsp;integer&nbsp;conversion&nbsp;would&nbsp;have,&nbsp;even&nbsp;in&nbsp;cases</span><br>
<span class="lineno">585</span><span class="comment" id="2841325">//&nbsp;where,&nbsp;say,&nbsp;float64(d.Nanoseconds())/1e9&nbsp;would&nbsp;have&nbsp;rounded</span><br>
<span class="lineno"></span><span class="comment" id="2841388">//&nbsp;differently.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2841405">//&nbsp;Seconds&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;seconds.</span><br>
<span class="lineno"></span><span class="keyword" id="2841476">func</span>&nbsp;<span class="op" id="2841481">(</span><span class="ident" id="2841482">d</span>&nbsp;<span class="ident" id="2841484">Duration</span><span class="op" id="2841492">)</span>&nbsp;<span class="ident" id="2841494">Seconds</span><span class="op" id="2841501">(</span><span class="op" id="2841502">)</span>&nbsp;<span class="builtintype" id="2841504">float64</span>&nbsp;<span class="op" id="2841512">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2841515">sec</span>&nbsp;<span class="op" id="2841519">:=</span>&nbsp;<span class="ident" id="2841522">d</span>&nbsp;<span class="op" id="2841524">/</span>&nbsp;<span class="ident" id="2841526">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2841534">nsec</span>&nbsp;<span class="op" id="2841539">:=</span>&nbsp;<span class="ident" id="2841542">d</span>&nbsp;<span class="op" id="2841544">%</span>&nbsp;<span class="ident" id="2841546">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2841554">return</span>&nbsp;<span class="builtintype" id="2841561">float64</span><span class="op" id="2841568">(</span><span class="ident" id="2841569">sec</span><span class="op" id="2841572">)</span>&nbsp;<span class="op" id="2841574">+</span>&nbsp;<span class="builtintype" id="2841576">float64</span><span class="op" id="2841583">(</span><span class="ident" id="2841584">nsec</span><span class="op" id="2841588">)</span><span class="op" id="2841589">*</span><span class="num" id="2841590">1e-9</span><br>
<span class="lineno"></span><span class="op" id="2841595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="2841598">//&nbsp;Minutes&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;minutes.</span><br>
<span class="lineno"></span><span class="keyword" id="2841669">func</span>&nbsp;<span class="op" id="2841674">(</span><span class="ident" id="2841675">d</span>&nbsp;<span class="ident" id="2841677">Duration</span><span class="op" id="2841685">)</span>&nbsp;<span class="ident" id="2841687">Minutes</span><span class="op" id="2841694">(</span><span class="op" id="2841695">)</span>&nbsp;<span class="builtintype" id="2841697">float64</span>&nbsp;<span class="op" id="2841705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2841708">min</span>&nbsp;<span class="op" id="2841712">:=</span>&nbsp;<span class="ident" id="2841715">d</span>&nbsp;<span class="op" id="2841717">/</span>&nbsp;<span class="ident" id="2841719">Minute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2841727">nsec</span>&nbsp;<span class="op" id="2841732">:=</span>&nbsp;<span class="ident" id="2841735">d</span>&nbsp;<span class="op" id="2841737">%</span>&nbsp;<span class="ident" id="2841739">Minute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2841747">return</span>&nbsp;<span class="builtintype" id="2841754">float64</span><span class="op" id="2841761">(</span><span class="ident" id="2841762">min</span><span class="op" id="2841765">)</span>&nbsp;<span class="op" id="2841767">+</span>&nbsp;<span class="builtintype" id="2841769">float64</span><span class="op" id="2841776">(</span><span class="ident" id="2841777">nsec</span><span class="op" id="2841781">)</span><span class="op" id="2841782">*</span><span class="op" id="2841783">(</span><span class="num" id="2841784">1e-9</span><span class="op" id="2841788">/</span><span class="num" id="2841789">60</span><span class="op" id="2841791">)</span><br>
<span class="lineno">600</span><span class="op" id="2841793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2841796">//&nbsp;Hours&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;hours.</span><br>
<span class="lineno"></span><span class="keyword" id="2841863">func</span>&nbsp;<span class="op" id="2841868">(</span><span class="ident" id="2841869">d</span>&nbsp;<span class="ident" id="2841871">Duration</span><span class="op" id="2841879">)</span>&nbsp;<span class="ident" id="2841881">Hours</span><span class="op" id="2841886">(</span><span class="op" id="2841887">)</span>&nbsp;<span class="builtintype" id="2841889">float64</span>&nbsp;<span class="op" id="2841897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2841900">hour</span>&nbsp;<span class="op" id="2841905">:=</span>&nbsp;<span class="ident" id="2841908">d</span>&nbsp;<span class="op" id="2841910">/</span>&nbsp;<span class="ident" id="2841912">Hour</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2841918">nsec</span>&nbsp;<span class="op" id="2841923">:=</span>&nbsp;<span class="ident" id="2841926">d</span>&nbsp;<span class="op" id="2841928">%</span>&nbsp;<span class="ident" id="2841930">Hour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2841936">return</span>&nbsp;<span class="builtintype" id="2841943">float64</span><span class="op" id="2841950">(</span><span class="ident" id="2841951">hour</span><span class="op" id="2841955">)</span>&nbsp;<span class="op" id="2841957">+</span>&nbsp;<span class="builtintype" id="2841959">float64</span><span class="op" id="2841966">(</span><span class="ident" id="2841967">nsec</span><span class="op" id="2841971">)</span><span class="op" id="2841972">*</span><span class="op" id="2841973">(</span><span class="num" id="2841974">1e-9</span><span class="op" id="2841978">/</span><span class="num" id="2841979">60</span><span class="op" id="2841981">/</span><span class="num" id="2841982">60</span><span class="op" id="2841984">)</span><br>
<span class="lineno"></span><span class="op" id="2841986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2841989">//&nbsp;Add&nbsp;returns&nbsp;the&nbsp;time&nbsp;t+d.</span><br>
<span class="lineno">610</span><span class="keyword" id="2842018">func</span>&nbsp;<span class="op" id="2842023">(</span><span class="ident" id="2842024">t</span>&nbsp;<span class="ident" id="2842026">Time</span><span class="op" id="2842030">)</span>&nbsp;<span class="ident" id="2842032">Add</span><span class="op" id="2842035">(</span><span class="ident" id="2842036">d</span>&nbsp;<span class="ident" id="2842038">Duration</span><span class="op" id="2842046">)</span>&nbsp;<span class="ident" id="2842048">Time</span>&nbsp;<span class="op" id="2842053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2842056">t</span><span class="op" id="2842057">.</span><span class="ident" id="2842058">sec</span>&nbsp;<span class="op" id="2842062">+=</span>&nbsp;<span class="ident" id="2842065">int64</span><span class="op" id="2842070">(</span><span class="ident" id="2842071">d</span>&nbsp;<span class="op" id="2842073">/</span>&nbsp;<span class="num" id="2842075">1e9</span><span class="op" id="2842078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2842081">nsec</span>&nbsp;<span class="op" id="2842086">:=</span>&nbsp;<span class="builtintype" id="2842089">int32</span><span class="op" id="2842094">(</span><span class="ident" id="2842095">t</span><span class="op" id="2842096">.</span><span class="ident" id="2842097">nsec</span><span class="op" id="2842101">)</span>&nbsp;<span class="op" id="2842103">+</span>&nbsp;<span class="builtintype" id="2842105">int32</span><span class="op" id="2842110">(</span><span class="ident" id="2842111">d</span><span class="op" id="2842112">%</span><span class="num" id="2842113">1e9</span><span class="op" id="2842116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2842119">if</span>&nbsp;<span class="ident" id="2842122">nsec</span>&nbsp;<span class="op" id="2842127">&gt;=</span>&nbsp;<span class="num" id="2842130">1e9</span>&nbsp;<span class="op" id="2842134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2842138">t</span><span class="op" id="2842139">.</span><span class="ident" id="2842140">sec</span><span class="op" id="2842143">++</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2842148">nsec</span>&nbsp;<span class="op" id="2842153">-=</span>&nbsp;<span class="num" id="2842156">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2842161">}</span>&nbsp;<span class="keyword" id="2842163">else</span>&nbsp;<span class="keyword" id="2842168">if</span>&nbsp;<span class="ident" id="2842171">nsec</span>&nbsp;<span class="op" id="2842176">&lt;</span>&nbsp;<span class="num" id="2842178">0</span>&nbsp;<span class="op" id="2842180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2842184">t</span><span class="op" id="2842185">.</span><span class="ident" id="2842186">sec</span><span class="op" id="2842189">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2842194">nsec</span>&nbsp;<span class="op" id="2842199">+=</span>&nbsp;<span class="num" id="2842202">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2842207">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2842210">t</span><span class="op" id="2842211">.</span><span class="ident" id="2842212">nsec</span>&nbsp;<span class="op" id="2842217">=</span>&nbsp;<span class="ident" id="2842219">nsec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2842225">return</span>&nbsp;<span class="ident" id="2842232">t</span><br>
<span class="lineno"></span><span class="op" id="2842234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2842237">//&nbsp;Sub&nbsp;returns&nbsp;the&nbsp;duration&nbsp;t-u.&nbsp;If&nbsp;the&nbsp;result&nbsp;exceeds&nbsp;the&nbsp;maximum&nbsp;(or&nbsp;minimum)</span><br>
<span class="lineno">625</span><span class="comment" id="2842317">//&nbsp;value&nbsp;that&nbsp;can&nbsp;be&nbsp;stored&nbsp;in&nbsp;a&nbsp;Duration,&nbsp;the&nbsp;maximum&nbsp;(or&nbsp;minimum)&nbsp;duration</span><br>
<span class="lineno"></span><span class="comment" id="2842394">//&nbsp;will&nbsp;be&nbsp;returned.</span><br>
<span class="lineno"></span><span class="comment" id="2842415">//&nbsp;To&nbsp;compute&nbsp;t-d&nbsp;for&nbsp;a&nbsp;duration&nbsp;d,&nbsp;use&nbsp;t.Add(-d).</span><br>
<span class="lineno"></span><span class="keyword" id="2842466">func</span>&nbsp;<span class="op" id="2842471">(</span><span class="ident" id="2842472">t</span>&nbsp;<span class="ident" id="2842474">Time</span><span class="op" id="2842478">)</span>&nbsp;<span class="ident" id="2842480">Sub</span><span class="op" id="2842483">(</span><span class="ident" id="2842484">u</span>&nbsp;<span class="ident" id="2842486">Time</span><span class="op" id="2842490">)</span>&nbsp;<span class="ident" id="2842492">Duration</span>&nbsp;<span class="op" id="2842501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2842504">d</span>&nbsp;<span class="op" id="2842506">:=</span>&nbsp;<span class="ident" id="2842509">Duration</span><span class="op" id="2842517">(</span><span class="ident" id="2842518">t</span><span class="op" id="2842519">.</span><span class="ident" id="2842520">sec</span><span class="op" id="2842523">-</span><span class="ident" id="2842524">u</span><span class="op" id="2842525">.</span><span class="ident" id="2842526">sec</span><span class="op" id="2842529">)</span><span class="op" id="2842530">*</span><span class="ident" id="2842531">Second</span>&nbsp;<span class="op" id="2842538">+</span>&nbsp;<span class="ident" id="2842540">Duration</span><span class="op" id="2842548">(</span><span class="builtintype" id="2842549">int32</span><span class="op" id="2842554">(</span><span class="ident" id="2842555">t</span><span class="op" id="2842556">.</span><span class="ident" id="2842557">nsec</span><span class="op" id="2842561">)</span><span class="op" id="2842562">-</span><span class="builtintype" id="2842563">int32</span><span class="op" id="2842568">(</span><span class="ident" id="2842569">u</span><span class="op" id="2842570">.</span><span class="ident" id="2842571">nsec</span><span class="op" id="2842575">)</span><span class="op" id="2842576">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2842579">//&nbsp;Check&nbsp;for&nbsp;overflow&nbsp;or&nbsp;underflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2842616">switch</span>&nbsp;<span class="op" id="2842623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2842626">case</span>&nbsp;<span class="ident" id="2842631">u</span><span class="op" id="2842632">.</span><span class="ident" id="2842633">Add</span><span class="op" id="2842636">(</span><span class="ident" id="2842637">d</span><span class="op" id="2842638">)</span><span class="op" id="2842639">.</span><span class="ident" id="2842640">Equal</span><span class="op" id="2842645">(</span><span class="ident" id="2842646">t</span><span class="op" id="2842647">)</span><span class="op" id="2842648">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2842652">return</span>&nbsp;<span class="ident" id="2842659">d</span>&nbsp;<span class="comment" id="2842661">//&nbsp;d&nbsp;is&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2842678">case</span>&nbsp;<span class="ident" id="2842683">t</span><span class="op" id="2842684">.</span><span class="ident" id="2842685">Before</span><span class="op" id="2842691">(</span><span class="ident" id="2842692">u</span><span class="op" id="2842693">)</span><span class="op" id="2842694">:</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2842698">return</span>&nbsp;<span class="ident" id="2842705">minDuration</span>&nbsp;<span class="comment" id="2842717">//&nbsp;t&nbsp;-&nbsp;u&nbsp;is&nbsp;negative&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2842752">default</span><span class="op" id="2842759">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2842763">return</span>&nbsp;<span class="ident" id="2842770">maxDuration</span>&nbsp;<span class="comment" id="2842782">//&nbsp;t&nbsp;-&nbsp;u&nbsp;is&nbsp;positive&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2842817">}</span><br>
<span class="lineno"></span><span class="op" id="2842819">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="2842822">//&nbsp;Since&nbsp;returns&nbsp;the&nbsp;time&nbsp;elapsed&nbsp;since&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2842865">//&nbsp;It&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;time.Now().Sub(t).</span><br>
<span class="lineno"></span><span class="keyword" id="2842907">func</span>&nbsp;<span class="ident" id="2842912">Since</span><span class="op" id="2842917">(</span><span class="ident" id="2842918">t</span>&nbsp;<span class="ident" id="2842920">Time</span><span class="op" id="2842924">)</span>&nbsp;<span class="ident" id="2842926">Duration</span>&nbsp;<span class="op" id="2842935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2842938">return</span>&nbsp;<span class="ident" id="2842945">Now</span><span class="op" id="2842948">(</span><span class="op" id="2842949">)</span><span class="op" id="2842950">.</span><span class="ident" id="2842951">Sub</span><span class="op" id="2842954">(</span><span class="ident" id="2842955">t</span><span class="op" id="2842956">)</span><br>
<span class="lineno">645</span><span class="op" id="2842958">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2842961">//&nbsp;AddDate&nbsp;returns&nbsp;the&nbsp;time&nbsp;corresponding&nbsp;to&nbsp;adding&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2843017">//&nbsp;given&nbsp;number&nbsp;of&nbsp;years,&nbsp;months,&nbsp;and&nbsp;days&nbsp;to&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2843066">//&nbsp;For&nbsp;example,&nbsp;AddDate(-1,&nbsp;2,&nbsp;3)&nbsp;applied&nbsp;to&nbsp;January&nbsp;1,&nbsp;2011</span><br>
<span class="lineno">650</span><span class="comment" id="2843127">//&nbsp;returns&nbsp;March&nbsp;4,&nbsp;2010.</span><br>
<span class="lineno"></span><span class="comment" id="2843153">//</span><br>
<span class="lineno"></span><span class="comment" id="2843156">//&nbsp;AddDate&nbsp;normalizes&nbsp;its&nbsp;result&nbsp;in&nbsp;the&nbsp;same&nbsp;way&nbsp;that&nbsp;Date&nbsp;does,</span><br>
<span class="lineno"></span><span class="comment" id="2843221">//&nbsp;so,&nbsp;for&nbsp;example,&nbsp;adding&nbsp;one&nbsp;month&nbsp;to&nbsp;October&nbsp;31&nbsp;yields</span><br>
<span class="lineno"></span><span class="comment" id="2843279">//&nbsp;December&nbsp;1,&nbsp;the&nbsp;normalized&nbsp;form&nbsp;for&nbsp;November&nbsp;31.</span><br>
<span class="lineno">655</span><span class="keyword" id="2843331">func</span>&nbsp;<span class="op" id="2843336">(</span><span class="ident" id="2843337">t</span>&nbsp;<span class="ident" id="2843339">Time</span><span class="op" id="2843343">)</span>&nbsp;<span class="ident" id="2843345">AddDate</span><span class="op" id="2843352">(</span><span class="ident" id="2843353">years</span>&nbsp;<span class="builtintype" id="2843359">int</span><span class="op" id="2843362">,</span>&nbsp;<span class="ident" id="2843364">months</span>&nbsp;<span class="builtintype" id="2843371">int</span><span class="op" id="2843374">,</span>&nbsp;<span class="ident" id="2843376">days</span>&nbsp;<span class="builtintype" id="2843381">int</span><span class="op" id="2843384">)</span>&nbsp;<span class="ident" id="2843386">Time</span>&nbsp;<span class="op" id="2843391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2843394">year</span><span class="op" id="2843398">,</span>&nbsp;<span class="ident" id="2843400">month</span><span class="op" id="2843405">,</span>&nbsp;<span class="ident" id="2843407">day</span>&nbsp;<span class="op" id="2843411">:=</span>&nbsp;<span class="ident" id="2843414">t</span><span class="op" id="2843415">.</span><span class="ident" id="2843416">Date</span><span class="op" id="2843420">(</span><span class="op" id="2843421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2843424">hour</span><span class="op" id="2843428">,</span>&nbsp;<span class="ident" id="2843430">min</span><span class="op" id="2843433">,</span>&nbsp;<span class="ident" id="2843435">sec</span>&nbsp;<span class="op" id="2843439">:=</span>&nbsp;<span class="ident" id="2843442">t</span><span class="op" id="2843443">.</span><span class="ident" id="2843444">Clock</span><span class="op" id="2843449">(</span><span class="op" id="2843450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2843453">return</span>&nbsp;<span class="ident" id="2843460">Date</span><span class="op" id="2843464">(</span><span class="ident" id="2843465">year</span><span class="op" id="2843469">+</span><span class="ident" id="2843470">years</span><span class="op" id="2843475">,</span>&nbsp;<span class="ident" id="2843477">month</span><span class="op" id="2843482">+</span><span class="ident" id="2843483">Month</span><span class="op" id="2843488">(</span><span class="ident" id="2843489">months</span><span class="op" id="2843495">)</span><span class="op" id="2843496">,</span>&nbsp;<span class="ident" id="2843498">day</span><span class="op" id="2843501">+</span><span class="ident" id="2843502">days</span><span class="op" id="2843506">,</span>&nbsp;<span class="ident" id="2843508">hour</span><span class="op" id="2843512">,</span>&nbsp;<span class="ident" id="2843514">min</span><span class="op" id="2843517">,</span>&nbsp;<span class="ident" id="2843519">sec</span><span class="op" id="2843522">,</span>&nbsp;<span class="builtintype" id="2843524">int</span><span class="op" id="2843527">(</span><span class="ident" id="2843528">t</span><span class="op" id="2843529">.</span><span class="ident" id="2843530">nsec</span><span class="op" id="2843534">)</span><span class="op" id="2843535">,</span>&nbsp;<span class="ident" id="2843537">t</span><span class="op" id="2843538">.</span><span class="ident" id="2843539">loc</span><span class="op" id="2843542">)</span><br>
<span class="lineno"></span><span class="op" id="2843544">}</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span><span class="keyword" id="2843547">const</span>&nbsp;<span class="op" id="2843553">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2843556">secondsPerMinute</span>&nbsp;<span class="op" id="2843573">=</span>&nbsp;<span class="num" id="2843575">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2843579">secondsPerHour</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2843596">=</span>&nbsp;<span class="num" id="2843598">60</span>&nbsp;<span class="op" id="2843601">*</span>&nbsp;<span class="num" id="2843603">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2843607">secondsPerDay</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2843624">=</span>&nbsp;<span class="num" id="2843626">24</span>&nbsp;<span class="op" id="2843629">*</span>&nbsp;<span class="ident" id="2843631">secondsPerHour</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2843647">secondsPerWeek</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2843664">=</span>&nbsp;<span class="num" id="2843666">7</span>&nbsp;<span class="op" id="2843668">*</span>&nbsp;<span class="ident" id="2843670">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2843685">daysPer400Years</span>&nbsp;&nbsp;<span class="op" id="2843702">=</span>&nbsp;<span class="num" id="2843704">365</span><span class="op" id="2843707">*</span><span class="num" id="2843708">400</span>&nbsp;<span class="op" id="2843712">+</span>&nbsp;<span class="num" id="2843714">97</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2843718">daysPer100Years</span>&nbsp;&nbsp;<span class="op" id="2843735">=</span>&nbsp;<span class="num" id="2843737">365</span><span class="op" id="2843740">*</span><span class="num" id="2843741">100</span>&nbsp;<span class="op" id="2843745">+</span>&nbsp;<span class="num" id="2843747">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2843751">daysPer4Years</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2843768">=</span>&nbsp;<span class="num" id="2843770">365</span><span class="op" id="2843773">*</span><span class="num" id="2843774">4</span>&nbsp;<span class="op" id="2843776">+</span>&nbsp;<span class="num" id="2843778">1</span><br>
<span class="lineno"></span><span class="op" id="2843780">)</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="2843783">//&nbsp;date&nbsp;computes&nbsp;the&nbsp;year,&nbsp;day&nbsp;of&nbsp;year,&nbsp;and&nbsp;when&nbsp;full=true,</span><br>
<span class="lineno"></span><span class="comment" id="2843843">//&nbsp;the&nbsp;month&nbsp;and&nbsp;day&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2843883">func</span>&nbsp;<span class="op" id="2843888">(</span><span class="ident" id="2843889">t</span>&nbsp;<span class="ident" id="2843891">Time</span><span class="op" id="2843895">)</span>&nbsp;<span class="ident" id="2843897">date</span><span class="op" id="2843901">(</span><span class="ident" id="2843902">full</span>&nbsp;<span class="builtintype" id="2843907">bool</span><span class="op" id="2843911">)</span>&nbsp;<span class="op" id="2843913">(</span><span class="ident" id="2843914">year</span>&nbsp;<span class="builtintype" id="2843919">int</span><span class="op" id="2843922">,</span>&nbsp;<span class="ident" id="2843924">month</span>&nbsp;<span class="ident" id="2843930">Month</span><span class="op" id="2843935">,</span>&nbsp;<span class="ident" id="2843937">day</span>&nbsp;<span class="builtintype" id="2843941">int</span><span class="op" id="2843944">,</span>&nbsp;<span class="ident" id="2843946">yday</span>&nbsp;<span class="builtintype" id="2843951">int</span><span class="op" id="2843954">)</span>&nbsp;<span class="op" id="2843956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2843959">return</span>&nbsp;<span class="ident" id="2843966">absDate</span><span class="op" id="2843973">(</span><span class="ident" id="2843974">t</span><span class="op" id="2843975">.</span><span class="ident" id="2843976">abs</span><span class="op" id="2843979">(</span><span class="op" id="2843980">)</span><span class="op" id="2843981">,</span>&nbsp;<span class="ident" id="2843983">full</span><span class="op" id="2843987">)</span><br>
<span class="lineno">675</span><span class="op" id="2843989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2843992">//&nbsp;absDate&nbsp;is&nbsp;like&nbsp;date&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2844050">func</span>&nbsp;<span class="ident" id="2844055">absDate</span><span class="op" id="2844062">(</span><span class="ident" id="2844063">abs</span>&nbsp;<span class="ident" id="2844067">uint64</span><span class="op" id="2844073">,</span>&nbsp;<span class="ident" id="2844075">full</span>&nbsp;<span class="builtintype" id="2844080">bool</span><span class="op" id="2844084">)</span>&nbsp;<span class="op" id="2844086">(</span><span class="ident" id="2844087">year</span>&nbsp;<span class="builtintype" id="2844092">int</span><span class="op" id="2844095">,</span>&nbsp;<span class="ident" id="2844097">month</span>&nbsp;<span class="ident" id="2844103">Month</span><span class="op" id="2844108">,</span>&nbsp;<span class="ident" id="2844110">day</span>&nbsp;<span class="builtintype" id="2844114">int</span><span class="op" id="2844117">,</span>&nbsp;<span class="ident" id="2844119">yday</span>&nbsp;<span class="builtintype" id="2844124">int</span><span class="op" id="2844127">)</span>&nbsp;<span class="op" id="2844129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844132">//&nbsp;Split&nbsp;into&nbsp;time&nbsp;and&nbsp;day.</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844161">d</span>&nbsp;<span class="op" id="2844163">:=</span>&nbsp;<span class="ident" id="2844166">abs</span>&nbsp;<span class="op" id="2844170">/</span>&nbsp;<span class="ident" id="2844172">secondsPerDay</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844188">//&nbsp;Account&nbsp;for&nbsp;400&nbsp;year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844221">n</span>&nbsp;<span class="op" id="2844223">:=</span>&nbsp;<span class="ident" id="2844226">d</span>&nbsp;<span class="op" id="2844228">/</span>&nbsp;<span class="ident" id="2844230">daysPer400Years</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844247">y</span>&nbsp;<span class="op" id="2844249">:=</span>&nbsp;<span class="num" id="2844252">400</span>&nbsp;<span class="op" id="2844256">*</span>&nbsp;<span class="ident" id="2844258">n</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844261">d</span>&nbsp;<span class="op" id="2844263">-=</span>&nbsp;<span class="ident" id="2844266">daysPer400Years</span>&nbsp;<span class="op" id="2844282">*</span>&nbsp;<span class="ident" id="2844284">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844288">//&nbsp;Cut&nbsp;off&nbsp;100-year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844317">//&nbsp;The&nbsp;last&nbsp;cycle&nbsp;has&nbsp;one&nbsp;extra&nbsp;leap&nbsp;year,&nbsp;so&nbsp;on&nbsp;the&nbsp;last&nbsp;day</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844380">//&nbsp;of&nbsp;that&nbsp;year,&nbsp;day&nbsp;/&nbsp;daysPer100Years&nbsp;will&nbsp;be&nbsp;4&nbsp;instead&nbsp;of&nbsp;3.</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844444">//&nbsp;Cut&nbsp;it&nbsp;back&nbsp;down&nbsp;to&nbsp;3&nbsp;by&nbsp;subtracting&nbsp;n&gt;&gt;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844491">n</span>&nbsp;<span class="op" id="2844493">=</span>&nbsp;<span class="ident" id="2844495">d</span>&nbsp;<span class="op" id="2844497">/</span>&nbsp;<span class="ident" id="2844499">daysPer100Years</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844516">n</span>&nbsp;<span class="op" id="2844518">-=</span>&nbsp;<span class="ident" id="2844521">n</span>&nbsp;<span class="op" id="2844523">&gt;&gt;</span>&nbsp;<span class="num" id="2844526">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844529">y</span>&nbsp;<span class="op" id="2844531">+=</span>&nbsp;<span class="num" id="2844534">100</span>&nbsp;<span class="op" id="2844538">*</span>&nbsp;<span class="ident" id="2844540">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844543">d</span>&nbsp;<span class="op" id="2844545">-=</span>&nbsp;<span class="ident" id="2844548">daysPer100Years</span>&nbsp;<span class="op" id="2844564">*</span>&nbsp;<span class="ident" id="2844566">n</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844570">//&nbsp;Cut&nbsp;off&nbsp;4-year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844597">//&nbsp;The&nbsp;last&nbsp;cycle&nbsp;has&nbsp;a&nbsp;missing&nbsp;leap&nbsp;year,&nbsp;which&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844656">//&nbsp;affect&nbsp;the&nbsp;computation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844684">n</span>&nbsp;<span class="op" id="2844686">=</span>&nbsp;<span class="ident" id="2844688">d</span>&nbsp;<span class="op" id="2844690">/</span>&nbsp;<span class="ident" id="2844692">daysPer4Years</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844707">y</span>&nbsp;<span class="op" id="2844709">+=</span>&nbsp;<span class="num" id="2844712">4</span>&nbsp;<span class="op" id="2844714">*</span>&nbsp;<span class="ident" id="2844716">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844719">d</span>&nbsp;<span class="op" id="2844721">-=</span>&nbsp;<span class="ident" id="2844724">daysPer4Years</span>&nbsp;<span class="op" id="2844738">*</span>&nbsp;<span class="ident" id="2844740">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844744">//&nbsp;Cut&nbsp;off&nbsp;years&nbsp;within&nbsp;a&nbsp;4-year&nbsp;cycle.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844785">//&nbsp;The&nbsp;last&nbsp;year&nbsp;is&nbsp;a&nbsp;leap&nbsp;year,&nbsp;so&nbsp;on&nbsp;the&nbsp;last&nbsp;day&nbsp;of&nbsp;that&nbsp;year,</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844852">//&nbsp;day&nbsp;/&nbsp;365&nbsp;will&nbsp;be&nbsp;4&nbsp;instead&nbsp;of&nbsp;3.&nbsp;&nbsp;Cut&nbsp;it&nbsp;back&nbsp;down&nbsp;to&nbsp;3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2844913">//&nbsp;by&nbsp;subtracting&nbsp;n&gt;&gt;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844938">n</span>&nbsp;<span class="op" id="2844940">=</span>&nbsp;<span class="ident" id="2844942">d</span>&nbsp;<span class="op" id="2844944">/</span>&nbsp;<span class="num" id="2844946">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844951">n</span>&nbsp;<span class="op" id="2844953">-=</span>&nbsp;<span class="ident" id="2844956">n</span>&nbsp;<span class="op" id="2844958">&gt;&gt;</span>&nbsp;<span class="num" id="2844961">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844964">y</span>&nbsp;<span class="op" id="2844966">+=</span>&nbsp;<span class="ident" id="2844969">n</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844972">d</span>&nbsp;<span class="op" id="2844974">-=</span>&nbsp;<span class="num" id="2844977">365</span>&nbsp;<span class="op" id="2844981">*</span>&nbsp;<span class="ident" id="2844983">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2844987">year</span>&nbsp;<span class="op" id="2844992">=</span>&nbsp;<span class="builtintype" id="2844994">int</span><span class="op" id="2844997">(</span><span class="ident" id="2844998">int64</span><span class="op" id="2845003">(</span><span class="ident" id="2845004">y</span><span class="op" id="2845005">)</span>&nbsp;<span class="op" id="2845007">+</span>&nbsp;<span class="ident" id="2845009">absoluteZeroYear</span><span class="op" id="2845025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2845028">yday</span>&nbsp;<span class="op" id="2845033">=</span>&nbsp;<span class="builtintype" id="2845035">int</span><span class="op" id="2845038">(</span><span class="ident" id="2845039">d</span><span class="op" id="2845040">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2845044">if</span>&nbsp;<span class="op" id="2845047">!</span><span class="ident" id="2845048">full</span>&nbsp;<span class="op" id="2845053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2845057">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2845065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2845069">day</span>&nbsp;<span class="op" id="2845073">=</span>&nbsp;<span class="ident" id="2845075">yday</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2845081">if</span>&nbsp;<span class="ident" id="2845084">isLeap</span><span class="op" id="2845090">(</span><span class="ident" id="2845091">year</span><span class="op" id="2845095">)</span>&nbsp;<span class="op" id="2845097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2845101">//&nbsp;Leap&nbsp;year</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2845116">switch</span>&nbsp;<span class="op" id="2845123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2845127">case</span>&nbsp;<span class="ident" id="2845132">day</span>&nbsp;<span class="op" id="2845136">&gt;</span>&nbsp;<span class="num" id="2845138">31</span><span class="op" id="2845140">+</span><span class="num" id="2845141">29</span><span class="op" id="2845143">-</span><span class="num" id="2845144">1</span><span class="op" id="2845145">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2845150">//&nbsp;After&nbsp;leap&nbsp;day;&nbsp;pretend&nbsp;it&nbsp;wasn&#39;t&nbsp;there.</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2845197">day</span><span class="op" id="2845200">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2845205">case</span>&nbsp;<span class="ident" id="2845210">day</span>&nbsp;<span class="op" id="2845214">==</span>&nbsp;<span class="num" id="2845217">31</span><span class="op" id="2845219">+</span><span class="num" id="2845220">29</span><span class="op" id="2845222">-</span><span class="num" id="2845223">1</span><span class="op" id="2845224">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2845229">//&nbsp;Leap&nbsp;day.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2845245">month</span>&nbsp;<span class="op" id="2845251">=</span>&nbsp;<span class="ident" id="2845253">February</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2845265">day</span>&nbsp;<span class="op" id="2845269">=</span>&nbsp;<span class="num" id="2845271">29</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2845277">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2845286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2845289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2845293">//&nbsp;Estimate&nbsp;month&nbsp;on&nbsp;assumption&nbsp;that&nbsp;every&nbsp;month&nbsp;has&nbsp;31&nbsp;days.</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2845356">//&nbsp;The&nbsp;estimate&nbsp;may&nbsp;be&nbsp;too&nbsp;low&nbsp;by&nbsp;at&nbsp;most&nbsp;one&nbsp;month,&nbsp;so&nbsp;adjust.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2845421">month</span>&nbsp;<span class="op" id="2845427">=</span>&nbsp;<span class="ident" id="2845429">Month</span><span class="op" id="2845434">(</span><span class="ident" id="2845435">day</span>&nbsp;<span class="op" id="2845439">/</span>&nbsp;<span class="num" id="2845441">31</span><span class="op" id="2845443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2845446">end</span>&nbsp;<span class="op" id="2845450">:=</span>&nbsp;<span class="builtintype" id="2845453">int</span><span class="op" id="2845456">(</span><span class="ident" id="2845457">daysBefore</span><span class="op" id="2845467">[</span><span class="ident" id="2845468">month</span><span class="op" id="2845473">+</span><span class="num" id="2845474">1</span><span class="op" id="2845475">]</span><span class="op" id="2845476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2845479">var</span>&nbsp;<span class="ident" id="2845483">begin</span>&nbsp;<span class="builtintype" id="2845489">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2845494">if</span>&nbsp;<span class="ident" id="2845497">day</span>&nbsp;<span class="op" id="2845501">&gt;=</span>&nbsp;<span class="ident" id="2845504">end</span>&nbsp;<span class="op" id="2845508">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2845512">month</span><span class="op" id="2845517">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2845522">begin</span>&nbsp;<span class="op" id="2845528">=</span>&nbsp;<span class="ident" id="2845530">end</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2845535">}</span>&nbsp;<span class="keyword" id="2845537">else</span>&nbsp;<span class="op" id="2845542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2845546">begin</span>&nbsp;<span class="op" id="2845552">=</span>&nbsp;<span class="builtintype" id="2845554">int</span><span class="op" id="2845557">(</span><span class="ident" id="2845558">daysBefore</span><span class="op" id="2845568">[</span><span class="ident" id="2845569">month</span><span class="op" id="2845574">]</span><span class="op" id="2845575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2845578">}</span><br>
<span class="lineno">745</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2845582">month</span><span class="op" id="2845587">++</span>&nbsp;<span class="comment" id="2845590">//&nbsp;because&nbsp;January&nbsp;is&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2845615">day</span>&nbsp;<span class="op" id="2845619">=</span>&nbsp;<span class="ident" id="2845621">day</span>&nbsp;<span class="op" id="2845625">-</span>&nbsp;<span class="ident" id="2845627">begin</span>&nbsp;<span class="op" id="2845633">+</span>&nbsp;<span class="num" id="2845635">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2845638">return</span><br>
<span class="lineno"></span><span class="op" id="2845645">}</span><br>
<span class="lineno">750</span><br>
<span class="lineno"></span><span class="comment" id="2845648">//&nbsp;daysBefore[m]&nbsp;counts&nbsp;the&nbsp;number&nbsp;of&nbsp;days&nbsp;in&nbsp;a&nbsp;non-leap&nbsp;year</span><br>
<span class="lineno"></span><span class="comment" id="2845710">//&nbsp;before&nbsp;month&nbsp;m&nbsp;begins.&nbsp;&nbsp;There&nbsp;is&nbsp;an&nbsp;entry&nbsp;for&nbsp;m=12,&nbsp;counting</span><br>
<span class="lineno"></span><span class="comment" id="2845774">//&nbsp;the&nbsp;number&nbsp;of&nbsp;days&nbsp;before&nbsp;January&nbsp;of&nbsp;next&nbsp;year&nbsp;(365).</span><br>
<span class="lineno"></span><span class="keyword" id="2845831">var</span>&nbsp;<span class="ident" id="2845835">daysBefore</span>&nbsp;<span class="op" id="2845846">=</span>&nbsp;<span class="op" id="2845848">[</span><span class="op" id="2845849">...</span><span class="op" id="2845852">]</span><span class="builtintype" id="2845853">int32</span><span class="op" id="2845858">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2845861">0</span><span class="op" id="2845862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2845865">31</span><span class="op" id="2845867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2845870">31</span>&nbsp;<span class="op" id="2845873">+</span>&nbsp;<span class="num" id="2845875">28</span><span class="op" id="2845877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2845880">31</span>&nbsp;<span class="op" id="2845883">+</span>&nbsp;<span class="num" id="2845885">28</span>&nbsp;<span class="op" id="2845888">+</span>&nbsp;<span class="num" id="2845890">31</span><span class="op" id="2845892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2845895">31</span>&nbsp;<span class="op" id="2845898">+</span>&nbsp;<span class="num" id="2845900">28</span>&nbsp;<span class="op" id="2845903">+</span>&nbsp;<span class="num" id="2845905">31</span>&nbsp;<span class="op" id="2845908">+</span>&nbsp;<span class="num" id="2845910">30</span><span class="op" id="2845912">,</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2845915">31</span>&nbsp;<span class="op" id="2845918">+</span>&nbsp;<span class="num" id="2845920">28</span>&nbsp;<span class="op" id="2845923">+</span>&nbsp;<span class="num" id="2845925">31</span>&nbsp;<span class="op" id="2845928">+</span>&nbsp;<span class="num" id="2845930">30</span>&nbsp;<span class="op" id="2845933">+</span>&nbsp;<span class="num" id="2845935">31</span><span class="op" id="2845937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2845940">31</span>&nbsp;<span class="op" id="2845943">+</span>&nbsp;<span class="num" id="2845945">28</span>&nbsp;<span class="op" id="2845948">+</span>&nbsp;<span class="num" id="2845950">31</span>&nbsp;<span class="op" id="2845953">+</span>&nbsp;<span class="num" id="2845955">30</span>&nbsp;<span class="op" id="2845958">+</span>&nbsp;<span class="num" id="2845960">31</span>&nbsp;<span class="op" id="2845963">+</span>&nbsp;<span class="num" id="2845965">30</span><span class="op" id="2845967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2845970">31</span>&nbsp;<span class="op" id="2845973">+</span>&nbsp;<span class="num" id="2845975">28</span>&nbsp;<span class="op" id="2845978">+</span>&nbsp;<span class="num" id="2845980">31</span>&nbsp;<span class="op" id="2845983">+</span>&nbsp;<span class="num" id="2845985">30</span>&nbsp;<span class="op" id="2845988">+</span>&nbsp;<span class="num" id="2845990">31</span>&nbsp;<span class="op" id="2845993">+</span>&nbsp;<span class="num" id="2845995">30</span>&nbsp;<span class="op" id="2845998">+</span>&nbsp;<span class="num" id="2846000">31</span><span class="op" id="2846002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2846005">31</span>&nbsp;<span class="op" id="2846008">+</span>&nbsp;<span class="num" id="2846010">28</span>&nbsp;<span class="op" id="2846013">+</span>&nbsp;<span class="num" id="2846015">31</span>&nbsp;<span class="op" id="2846018">+</span>&nbsp;<span class="num" id="2846020">30</span>&nbsp;<span class="op" id="2846023">+</span>&nbsp;<span class="num" id="2846025">31</span>&nbsp;<span class="op" id="2846028">+</span>&nbsp;<span class="num" id="2846030">30</span>&nbsp;<span class="op" id="2846033">+</span>&nbsp;<span class="num" id="2846035">31</span>&nbsp;<span class="op" id="2846038">+</span>&nbsp;<span class="num" id="2846040">31</span><span class="op" id="2846042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2846045">31</span>&nbsp;<span class="op" id="2846048">+</span>&nbsp;<span class="num" id="2846050">28</span>&nbsp;<span class="op" id="2846053">+</span>&nbsp;<span class="num" id="2846055">31</span>&nbsp;<span class="op" id="2846058">+</span>&nbsp;<span class="num" id="2846060">30</span>&nbsp;<span class="op" id="2846063">+</span>&nbsp;<span class="num" id="2846065">31</span>&nbsp;<span class="op" id="2846068">+</span>&nbsp;<span class="num" id="2846070">30</span>&nbsp;<span class="op" id="2846073">+</span>&nbsp;<span class="num" id="2846075">31</span>&nbsp;<span class="op" id="2846078">+</span>&nbsp;<span class="num" id="2846080">31</span>&nbsp;<span class="op" id="2846083">+</span>&nbsp;<span class="num" id="2846085">30</span><span class="op" id="2846087">,</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2846090">31</span>&nbsp;<span class="op" id="2846093">+</span>&nbsp;<span class="num" id="2846095">28</span>&nbsp;<span class="op" id="2846098">+</span>&nbsp;<span class="num" id="2846100">31</span>&nbsp;<span class="op" id="2846103">+</span>&nbsp;<span class="num" id="2846105">30</span>&nbsp;<span class="op" id="2846108">+</span>&nbsp;<span class="num" id="2846110">31</span>&nbsp;<span class="op" id="2846113">+</span>&nbsp;<span class="num" id="2846115">30</span>&nbsp;<span class="op" id="2846118">+</span>&nbsp;<span class="num" id="2846120">31</span>&nbsp;<span class="op" id="2846123">+</span>&nbsp;<span class="num" id="2846125">31</span>&nbsp;<span class="op" id="2846128">+</span>&nbsp;<span class="num" id="2846130">30</span>&nbsp;<span class="op" id="2846133">+</span>&nbsp;<span class="num" id="2846135">31</span><span class="op" id="2846137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2846140">31</span>&nbsp;<span class="op" id="2846143">+</span>&nbsp;<span class="num" id="2846145">28</span>&nbsp;<span class="op" id="2846148">+</span>&nbsp;<span class="num" id="2846150">31</span>&nbsp;<span class="op" id="2846153">+</span>&nbsp;<span class="num" id="2846155">30</span>&nbsp;<span class="op" id="2846158">+</span>&nbsp;<span class="num" id="2846160">31</span>&nbsp;<span class="op" id="2846163">+</span>&nbsp;<span class="num" id="2846165">30</span>&nbsp;<span class="op" id="2846168">+</span>&nbsp;<span class="num" id="2846170">31</span>&nbsp;<span class="op" id="2846173">+</span>&nbsp;<span class="num" id="2846175">31</span>&nbsp;<span class="op" id="2846178">+</span>&nbsp;<span class="num" id="2846180">30</span>&nbsp;<span class="op" id="2846183">+</span>&nbsp;<span class="num" id="2846185">31</span>&nbsp;<span class="op" id="2846188">+</span>&nbsp;<span class="num" id="2846190">30</span><span class="op" id="2846192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2846195">31</span>&nbsp;<span class="op" id="2846198">+</span>&nbsp;<span class="num" id="2846200">28</span>&nbsp;<span class="op" id="2846203">+</span>&nbsp;<span class="num" id="2846205">31</span>&nbsp;<span class="op" id="2846208">+</span>&nbsp;<span class="num" id="2846210">30</span>&nbsp;<span class="op" id="2846213">+</span>&nbsp;<span class="num" id="2846215">31</span>&nbsp;<span class="op" id="2846218">+</span>&nbsp;<span class="num" id="2846220">30</span>&nbsp;<span class="op" id="2846223">+</span>&nbsp;<span class="num" id="2846225">31</span>&nbsp;<span class="op" id="2846228">+</span>&nbsp;<span class="num" id="2846230">31</span>&nbsp;<span class="op" id="2846233">+</span>&nbsp;<span class="num" id="2846235">30</span>&nbsp;<span class="op" id="2846238">+</span>&nbsp;<span class="num" id="2846240">31</span>&nbsp;<span class="op" id="2846243">+</span>&nbsp;<span class="num" id="2846245">30</span>&nbsp;<span class="op" id="2846248">+</span>&nbsp;<span class="num" id="2846250">31</span><span class="op" id="2846252">,</span><br>
<span class="lineno"></span><span class="op" id="2846254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">770</span><span class="keyword" id="2846257">func</span>&nbsp;<span class="ident" id="2846262">daysIn</span><span class="op" id="2846268">(</span><span class="ident" id="2846269">m</span>&nbsp;<span class="ident" id="2846271">Month</span><span class="op" id="2846276">,</span>&nbsp;<span class="ident" id="2846278">year</span>&nbsp;<span class="builtintype" id="2846283">int</span><span class="op" id="2846286">)</span>&nbsp;<span class="builtintype" id="2846288">int</span>&nbsp;<span class="op" id="2846292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2846295">if</span>&nbsp;<span class="ident" id="2846298">m</span>&nbsp;<span class="op" id="2846300">==</span>&nbsp;<span class="ident" id="2846303">February</span>&nbsp;<span class="op" id="2846312">&amp;&amp;</span>&nbsp;<span class="ident" id="2846315">isLeap</span><span class="op" id="2846321">(</span><span class="ident" id="2846322">year</span><span class="op" id="2846326">)</span>&nbsp;<span class="op" id="2846328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2846332">return</span>&nbsp;<span class="num" id="2846339">29</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2846343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2846346">return</span>&nbsp;<span class="builtintype" id="2846353">int</span><span class="op" id="2846356">(</span><span class="ident" id="2846357">daysBefore</span><span class="op" id="2846367">[</span><span class="ident" id="2846368">m</span><span class="op" id="2846369">]</span>&nbsp;<span class="op" id="2846371">-</span>&nbsp;<span class="ident" id="2846373">daysBefore</span><span class="op" id="2846383">[</span><span class="ident" id="2846384">m</span><span class="op" id="2846385">-</span><span class="num" id="2846386">1</span><span class="op" id="2846387">]</span><span class="op" id="2846388">)</span><br>
<span class="lineno">775</span><span class="op" id="2846390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2846393">//&nbsp;Provided&nbsp;by&nbsp;package&nbsp;runtime.</span><br>
<span class="lineno"></span><span class="keyword" id="2846425">func</span>&nbsp;<span class="ident" id="2846430">now</span><span class="op" id="2846433">(</span><span class="op" id="2846434">)</span>&nbsp;<span class="op" id="2846436">(</span><span class="ident" id="2846437">sec</span>&nbsp;<span class="ident" id="2846441">int64</span><span class="op" id="2846446">,</span>&nbsp;<span class="ident" id="2846448">nsec</span>&nbsp;<span class="builtintype" id="2846453">int32</span><span class="op" id="2846458">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="comment" id="2846461">//&nbsp;Now&nbsp;returns&nbsp;the&nbsp;current&nbsp;local&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2846500">func</span>&nbsp;<span class="ident" id="2846505">Now</span><span class="op" id="2846508">(</span><span class="op" id="2846509">)</span>&nbsp;<span class="ident" id="2846511">Time</span>&nbsp;<span class="op" id="2846516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2846519">sec</span><span class="op" id="2846522">,</span>&nbsp;<span class="ident" id="2846524">nsec</span>&nbsp;<span class="op" id="2846529">:=</span>&nbsp;<span class="ident" id="2846532">now</span><span class="op" id="2846535">(</span><span class="op" id="2846536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2846539">return</span>&nbsp;<span class="ident" id="2846546">Time</span><span class="op" id="2846550">{</span><span class="ident" id="2846551">sec</span>&nbsp;<span class="op" id="2846555">+</span>&nbsp;<span class="ident" id="2846557">unixToInternal</span><span class="op" id="2846571">,</span>&nbsp;<span class="ident" id="2846573">nsec</span><span class="op" id="2846577">,</span>&nbsp;<span class="ident" id="2846579">Local</span><span class="op" id="2846584">}</span><br>
<span class="lineno"></span><span class="op" id="2846586">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="comment" id="2846589">//&nbsp;UTC&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;set&nbsp;to&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2846636">func</span>&nbsp;<span class="op" id="2846641">(</span><span class="ident" id="2846642">t</span>&nbsp;<span class="ident" id="2846644">Time</span><span class="op" id="2846648">)</span>&nbsp;<span class="ident" id="2846650">UTC</span><span class="op" id="2846653">(</span><span class="op" id="2846654">)</span>&nbsp;<span class="ident" id="2846656">Time</span>&nbsp;<span class="op" id="2846661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2846664">t</span><span class="op" id="2846665">.</span><span class="ident" id="2846666">loc</span>&nbsp;<span class="op" id="2846670">=</span>&nbsp;<span class="ident" id="2846672">UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2846677">return</span>&nbsp;<span class="ident" id="2846684">t</span><br>
<span class="lineno">790</span><span class="op" id="2846686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2846689">//&nbsp;Local&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;set&nbsp;to&nbsp;local&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2846745">func</span>&nbsp;<span class="op" id="2846750">(</span><span class="ident" id="2846751">t</span>&nbsp;<span class="ident" id="2846753">Time</span><span class="op" id="2846757">)</span>&nbsp;<span class="ident" id="2846759">Local</span><span class="op" id="2846764">(</span><span class="op" id="2846765">)</span>&nbsp;<span class="ident" id="2846767">Time</span>&nbsp;<span class="op" id="2846772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2846775">t</span><span class="op" id="2846776">.</span><span class="ident" id="2846777">loc</span>&nbsp;<span class="op" id="2846781">=</span>&nbsp;<span class="ident" id="2846783">Local</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2846790">return</span>&nbsp;<span class="ident" id="2846797">t</span><br>
<span class="lineno"></span><span class="op" id="2846799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2846802">//&nbsp;In&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;information&nbsp;set&nbsp;to&nbsp;loc.</span><br>
<span class="lineno"></span><span class="comment" id="2846860">//</span><br>
<span class="lineno">800</span><span class="comment" id="2846863">//&nbsp;In&nbsp;panics&nbsp;if&nbsp;loc&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2846891">func</span>&nbsp;<span class="op" id="2846896">(</span><span class="ident" id="2846897">t</span>&nbsp;<span class="ident" id="2846899">Time</span><span class="op" id="2846903">)</span>&nbsp;<span class="ident" id="2846905">In</span><span class="op" id="2846907">(</span><span class="ident" id="2846908">loc</span>&nbsp;<span class="op" id="2846912">*</span><span class="ident" id="2846913">Location</span><span class="op" id="2846921">)</span>&nbsp;<span class="ident" id="2846923">Time</span>&nbsp;<span class="op" id="2846928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2846931">if</span>&nbsp;<span class="ident" id="2846934">loc</span>&nbsp;<span class="op" id="2846938">==</span>&nbsp;<span class="ident" id="2846941">nil</span>&nbsp;<span class="op" id="2846945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2846949">panic</span><span class="op" id="2846954">(</span><span class="string" id="2846955">&#34;time:&nbsp;missing&nbsp;Location&nbsp;in&nbsp;call&nbsp;to&nbsp;Time.In&#34;</span><span class="op" id="2846998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2847001">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847004">t</span><span class="op" id="2847005">.</span><span class="ident" id="2847006">loc</span>&nbsp;<span class="op" id="2847010">=</span>&nbsp;<span class="ident" id="2847012">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847017">return</span>&nbsp;<span class="ident" id="2847024">t</span><br>
<span class="lineno"></span><span class="op" id="2847026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2847029">//&nbsp;Location&nbsp;returns&nbsp;the&nbsp;time&nbsp;zone&nbsp;information&nbsp;associated&nbsp;with&nbsp;t.</span><br>
<span class="lineno">810</span><span class="keyword" id="2847094">func</span>&nbsp;<span class="op" id="2847099">(</span><span class="ident" id="2847100">t</span>&nbsp;<span class="ident" id="2847102">Time</span><span class="op" id="2847106">)</span>&nbsp;<span class="ident" id="2847108">Location</span><span class="op" id="2847116">(</span><span class="op" id="2847117">)</span>&nbsp;<span class="op" id="2847119">*</span><span class="ident" id="2847120">Location</span>&nbsp;<span class="op" id="2847129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847132">l</span>&nbsp;<span class="op" id="2847134">:=</span>&nbsp;<span class="ident" id="2847137">t</span><span class="op" id="2847138">.</span><span class="ident" id="2847139">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847144">if</span>&nbsp;<span class="ident" id="2847147">l</span>&nbsp;<span class="op" id="2847149">==</span>&nbsp;<span class="ident" id="2847152">nil</span>&nbsp;<span class="op" id="2847156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847160">l</span>&nbsp;<span class="op" id="2847162">=</span>&nbsp;<span class="ident" id="2847164">UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2847169">}</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847172">return</span>&nbsp;<span class="ident" id="2847179">l</span><br>
<span class="lineno"></span><span class="op" id="2847181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2847184">//&nbsp;Zone&nbsp;computes&nbsp;the&nbsp;time&nbsp;zone&nbsp;in&nbsp;effect&nbsp;at&nbsp;time&nbsp;t,&nbsp;returning&nbsp;the&nbsp;abbreviated</span><br>
<span class="lineno"></span><span class="comment" id="2847262">//&nbsp;name&nbsp;of&nbsp;the&nbsp;zone&nbsp;(such&nbsp;as&nbsp;&#34;CET&#34;)&nbsp;and&nbsp;its&nbsp;offset&nbsp;in&nbsp;seconds&nbsp;east&nbsp;of&nbsp;UTC.</span><br>
<span class="lineno">820</span><span class="keyword" id="2847337">func</span>&nbsp;<span class="op" id="2847342">(</span><span class="ident" id="2847343">t</span>&nbsp;<span class="ident" id="2847345">Time</span><span class="op" id="2847349">)</span>&nbsp;<span class="ident" id="2847351">Zone</span><span class="op" id="2847355">(</span><span class="op" id="2847356">)</span>&nbsp;<span class="op" id="2847358">(</span><span class="ident" id="2847359">name</span>&nbsp;<span class="builtintype" id="2847364">string</span><span class="op" id="2847370">,</span>&nbsp;<span class="ident" id="2847372">offset</span>&nbsp;<span class="builtintype" id="2847379">int</span><span class="op" id="2847382">)</span>&nbsp;<span class="op" id="2847384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847387">name</span><span class="op" id="2847391">,</span>&nbsp;<span class="ident" id="2847393">offset</span><span class="op" id="2847399">,</span>&nbsp;<span class="ident" id="2847401">_</span><span class="op" id="2847402">,</span>&nbsp;<span class="ident" id="2847404">_</span><span class="op" id="2847405">,</span>&nbsp;<span class="ident" id="2847407">_</span>&nbsp;<span class="op" id="2847409">=</span>&nbsp;<span class="ident" id="2847411">t</span><span class="op" id="2847412">.</span><span class="ident" id="2847413">loc</span><span class="op" id="2847416">.</span><span class="ident" id="2847417">lookup</span><span class="op" id="2847423">(</span><span class="ident" id="2847424">t</span><span class="op" id="2847425">.</span><span class="ident" id="2847426">sec</span>&nbsp;<span class="op" id="2847430">+</span>&nbsp;<span class="ident" id="2847432">internalToUnix</span><span class="op" id="2847446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847449">return</span><br>
<span class="lineno"></span><span class="op" id="2847456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="2847459">//&nbsp;Unix&nbsp;returns&nbsp;t&nbsp;as&nbsp;a&nbsp;Unix&nbsp;time,&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds&nbsp;elapsed</span><br>
<span class="lineno"></span><span class="comment" id="2847523">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2847553">func</span>&nbsp;<span class="op" id="2847558">(</span><span class="ident" id="2847559">t</span>&nbsp;<span class="ident" id="2847561">Time</span><span class="op" id="2847565">)</span>&nbsp;<span class="ident" id="2847567">Unix</span><span class="op" id="2847571">(</span><span class="op" id="2847572">)</span>&nbsp;<span class="ident" id="2847574">int64</span>&nbsp;<span class="op" id="2847580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847583">return</span>&nbsp;<span class="ident" id="2847590">t</span><span class="op" id="2847591">.</span><span class="ident" id="2847592">sec</span>&nbsp;<span class="op" id="2847596">+</span>&nbsp;<span class="ident" id="2847598">internalToUnix</span><br>
<span class="lineno"></span><span class="op" id="2847613">}</span><br>
<span class="lineno">830</span><br>
<span class="lineno"></span><span class="comment" id="2847616">//&nbsp;UnixNano&nbsp;returns&nbsp;t&nbsp;as&nbsp;a&nbsp;Unix&nbsp;time,&nbsp;the&nbsp;number&nbsp;of&nbsp;nanoseconds&nbsp;elapsed</span><br>
<span class="lineno"></span><span class="comment" id="2847688">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.&nbsp;The&nbsp;result&nbsp;is&nbsp;undefined&nbsp;if&nbsp;the&nbsp;Unix&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2847759">//&nbsp;in&nbsp;nanoseconds&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;an&nbsp;int64.&nbsp;Note&nbsp;that&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="2847827">//&nbsp;means&nbsp;the&nbsp;result&nbsp;of&nbsp;calling&nbsp;UnixNano&nbsp;on&nbsp;the&nbsp;zero&nbsp;Time&nbsp;is&nbsp;undefined.</span><br>
<span class="lineno">835</span><span class="keyword" id="2847898">func</span>&nbsp;<span class="op" id="2847903">(</span><span class="ident" id="2847904">t</span>&nbsp;<span class="ident" id="2847906">Time</span><span class="op" id="2847910">)</span>&nbsp;<span class="ident" id="2847912">UnixNano</span><span class="op" id="2847920">(</span><span class="op" id="2847921">)</span>&nbsp;<span class="ident" id="2847923">int64</span>&nbsp;<span class="op" id="2847929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847932">return</span>&nbsp;<span class="op" id="2847939">(</span><span class="ident" id="2847940">t</span><span class="op" id="2847941">.</span><span class="ident" id="2847942">sec</span><span class="op" id="2847945">+</span><span class="ident" id="2847946">internalToUnix</span><span class="op" id="2847960">)</span><span class="op" id="2847961">*</span><span class="num" id="2847962">1e9</span>&nbsp;<span class="op" id="2847966">+</span>&nbsp;<span class="ident" id="2847968">int64</span><span class="op" id="2847973">(</span><span class="ident" id="2847974">t</span><span class="op" id="2847975">.</span><span class="ident" id="2847976">nsec</span><span class="op" id="2847980">)</span><br>
<span class="lineno"></span><span class="op" id="2847982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2847985">const</span>&nbsp;<span class="ident" id="2847991">timeBinaryVersion</span>&nbsp;<span class="builtintype" id="2848009">byte</span>&nbsp;<span class="op" id="2848014">=</span>&nbsp;<span class="num" id="2848016">1</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="comment" id="2848019">//&nbsp;MarshalBinary&nbsp;implements&nbsp;the&nbsp;encoding.BinaryMarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2848087">func</span>&nbsp;<span class="op" id="2848092">(</span><span class="ident" id="2848093">t</span>&nbsp;<span class="ident" id="2848095">Time</span><span class="op" id="2848099">)</span>&nbsp;<span class="ident" id="2848101">MarshalBinary</span><span class="op" id="2848114">(</span><span class="op" id="2848115">)</span>&nbsp;<span class="op" id="2848117">(</span><span class="op" id="2848118">[</span><span class="op" id="2848119">]</span><span class="builtintype" id="2848120">byte</span><span class="op" id="2848124">,</span>&nbsp;<span class="builtintype" id="2848126">error</span><span class="op" id="2848131">)</span>&nbsp;<span class="op" id="2848133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848136">var</span>&nbsp;<span class="ident" id="2848140">offsetMin</span>&nbsp;<span class="builtintype" id="2848150">int16</span>&nbsp;<span class="comment" id="2848156">//&nbsp;minutes&nbsp;east&nbsp;of&nbsp;UTC.&nbsp;-1&nbsp;is&nbsp;UTC.</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848193">if</span>&nbsp;<span class="ident" id="2848196">t</span><span class="op" id="2848197">.</span><span class="ident" id="2848198">Location</span><span class="op" id="2848206">(</span><span class="op" id="2848207">)</span>&nbsp;<span class="op" id="2848209">==</span>&nbsp;<span class="op" id="2848212">&amp;</span><span class="ident" id="2848213">utcLoc</span>&nbsp;<span class="op" id="2848220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848224">offsetMin</span>&nbsp;<span class="op" id="2848234">=</span>&nbsp;<span class="op" id="2848236">-</span><span class="num" id="2848237">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2848240">}</span>&nbsp;<span class="keyword" id="2848242">else</span>&nbsp;<span class="op" id="2848247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848251">_</span><span class="op" id="2848252">,</span>&nbsp;<span class="ident" id="2848254">offset</span>&nbsp;<span class="op" id="2848261">:=</span>&nbsp;<span class="ident" id="2848264">t</span><span class="op" id="2848265">.</span><span class="ident" id="2848266">Zone</span><span class="op" id="2848270">(</span><span class="op" id="2848271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848275">if</span>&nbsp;<span class="ident" id="2848278">offset</span><span class="op" id="2848284">%</span><span class="num" id="2848285">60</span>&nbsp;<span class="op" id="2848288">!=</span>&nbsp;<span class="num" id="2848291">0</span>&nbsp;<span class="op" id="2848293">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848298">return</span>&nbsp;<span class="ident" id="2848305">nil</span><span class="op" id="2848308">,</span>&nbsp;<span class="ident" id="2848310">errors</span><span class="op" id="2848316">.</span><span class="ident" id="2848317">New</span><span class="op" id="2848320">(</span><span class="string" id="2848321">&#34;Time.MarshalBinary:&nbsp;zone&nbsp;offset&nbsp;has&nbsp;fractional&nbsp;minute&#34;</span><span class="op" id="2848376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2848380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848384">offset</span>&nbsp;<span class="op" id="2848391">/=</span>&nbsp;<span class="num" id="2848394">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848399">if</span>&nbsp;<span class="ident" id="2848402">offset</span>&nbsp;<span class="op" id="2848409">&lt;</span>&nbsp;<span class="op" id="2848411">-</span><span class="num" id="2848412">32768</span>&nbsp;<span class="op" id="2848418">||</span>&nbsp;<span class="ident" id="2848421">offset</span>&nbsp;<span class="op" id="2848428">==</span>&nbsp;<span class="op" id="2848431">-</span><span class="num" id="2848432">1</span>&nbsp;<span class="op" id="2848434">||</span>&nbsp;<span class="ident" id="2848437">offset</span>&nbsp;<span class="op" id="2848444">&gt;</span>&nbsp;<span class="num" id="2848446">32767</span>&nbsp;<span class="op" id="2848452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848457">return</span>&nbsp;<span class="ident" id="2848464">nil</span><span class="op" id="2848467">,</span>&nbsp;<span class="ident" id="2848469">errors</span><span class="op" id="2848475">.</span><span class="ident" id="2848476">New</span><span class="op" id="2848479">(</span><span class="string" id="2848480">&#34;Time.MarshalBinary:&nbsp;unexpected&nbsp;zone&nbsp;offset&#34;</span><span class="op" id="2848524">)</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2848528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848532">offsetMin</span>&nbsp;<span class="op" id="2848542">=</span>&nbsp;<span class="builtintype" id="2848544">int16</span><span class="op" id="2848549">(</span><span class="ident" id="2848550">offset</span><span class="op" id="2848556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2848559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848563">enc</span>&nbsp;<span class="op" id="2848567">:=</span>&nbsp;<span class="op" id="2848570">[</span><span class="op" id="2848571">]</span><span class="builtintype" id="2848572">byte</span><span class="op" id="2848576">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848580">timeBinaryVersion</span><span class="op" id="2848597">,</span>&nbsp;<span class="comment" id="2848599">//&nbsp;byte&nbsp;0&nbsp;:&nbsp;version</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848621">byte</span><span class="op" id="2848625">(</span><span class="ident" id="2848626">t</span><span class="op" id="2848627">.</span><span class="ident" id="2848628">sec</span>&nbsp;<span class="op" id="2848632">&gt;&gt;</span>&nbsp;<span class="num" id="2848635">56</span><span class="op" id="2848637">)</span><span class="op" id="2848638">,</span>&nbsp;<span class="comment" id="2848640">//&nbsp;bytes&nbsp;1-8:&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848664">byte</span><span class="op" id="2848668">(</span><span class="ident" id="2848669">t</span><span class="op" id="2848670">.</span><span class="ident" id="2848671">sec</span>&nbsp;<span class="op" id="2848675">&gt;&gt;</span>&nbsp;<span class="num" id="2848678">48</span><span class="op" id="2848680">)</span><span class="op" id="2848681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848685">byte</span><span class="op" id="2848689">(</span><span class="ident" id="2848690">t</span><span class="op" id="2848691">.</span><span class="ident" id="2848692">sec</span>&nbsp;<span class="op" id="2848696">&gt;&gt;</span>&nbsp;<span class="num" id="2848699">40</span><span class="op" id="2848701">)</span><span class="op" id="2848702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848706">byte</span><span class="op" id="2848710">(</span><span class="ident" id="2848711">t</span><span class="op" id="2848712">.</span><span class="ident" id="2848713">sec</span>&nbsp;<span class="op" id="2848717">&gt;&gt;</span>&nbsp;<span class="num" id="2848720">32</span><span class="op" id="2848722">)</span><span class="op" id="2848723">,</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848727">byte</span><span class="op" id="2848731">(</span><span class="ident" id="2848732">t</span><span class="op" id="2848733">.</span><span class="ident" id="2848734">sec</span>&nbsp;<span class="op" id="2848738">&gt;&gt;</span>&nbsp;<span class="num" id="2848741">24</span><span class="op" id="2848743">)</span><span class="op" id="2848744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848748">byte</span><span class="op" id="2848752">(</span><span class="ident" id="2848753">t</span><span class="op" id="2848754">.</span><span class="ident" id="2848755">sec</span>&nbsp;<span class="op" id="2848759">&gt;&gt;</span>&nbsp;<span class="num" id="2848762">16</span><span class="op" id="2848764">)</span><span class="op" id="2848765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848769">byte</span><span class="op" id="2848773">(</span><span class="ident" id="2848774">t</span><span class="op" id="2848775">.</span><span class="ident" id="2848776">sec</span>&nbsp;<span class="op" id="2848780">&gt;&gt;</span>&nbsp;<span class="num" id="2848783">8</span><span class="op" id="2848784">)</span><span class="op" id="2848785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848789">byte</span><span class="op" id="2848793">(</span><span class="ident" id="2848794">t</span><span class="op" id="2848795">.</span><span class="ident" id="2848796">sec</span><span class="op" id="2848799">)</span><span class="op" id="2848800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848804">byte</span><span class="op" id="2848808">(</span><span class="ident" id="2848809">t</span><span class="op" id="2848810">.</span><span class="ident" id="2848811">nsec</span>&nbsp;<span class="op" id="2848816">&gt;&gt;</span>&nbsp;<span class="num" id="2848819">24</span><span class="op" id="2848821">)</span><span class="op" id="2848822">,</span>&nbsp;<span class="comment" id="2848824">//&nbsp;bytes&nbsp;9-12:&nbsp;nanoseconds</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848853">byte</span><span class="op" id="2848857">(</span><span class="ident" id="2848858">t</span><span class="op" id="2848859">.</span><span class="ident" id="2848860">nsec</span>&nbsp;<span class="op" id="2848865">&gt;&gt;</span>&nbsp;<span class="num" id="2848868">16</span><span class="op" id="2848870">)</span><span class="op" id="2848871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848875">byte</span><span class="op" id="2848879">(</span><span class="ident" id="2848880">t</span><span class="op" id="2848881">.</span><span class="ident" id="2848882">nsec</span>&nbsp;<span class="op" id="2848887">&gt;&gt;</span>&nbsp;<span class="num" id="2848890">8</span><span class="op" id="2848891">)</span><span class="op" id="2848892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848896">byte</span><span class="op" id="2848900">(</span><span class="ident" id="2848901">t</span><span class="op" id="2848902">.</span><span class="ident" id="2848903">nsec</span><span class="op" id="2848907">)</span><span class="op" id="2848908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848912">byte</span><span class="op" id="2848916">(</span><span class="ident" id="2848917">offsetMin</span>&nbsp;<span class="op" id="2848927">&gt;&gt;</span>&nbsp;<span class="num" id="2848930">8</span><span class="op" id="2848931">)</span><span class="op" id="2848932">,</span>&nbsp;<span class="comment" id="2848934">//&nbsp;bytes&nbsp;13-14:&nbsp;zone&nbsp;offset&nbsp;in&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2848975">byte</span><span class="op" id="2848979">(</span><span class="ident" id="2848980">offsetMin</span><span class="op" id="2848989">)</span><span class="op" id="2848990">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2848993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848997">return</span>&nbsp;<span class="ident" id="2849004">enc</span><span class="op" id="2849007">,</span>&nbsp;<span class="ident" id="2849009">nil</span><br>
<span class="lineno"></span><span class="op" id="2849013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">880</span><span class="comment" id="2849016">//&nbsp;UnmarshalBinary&nbsp;implements&nbsp;the&nbsp;encoding.BinaryUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2849088">func</span>&nbsp;<span class="op" id="2849093">(</span><span class="ident" id="2849094">t</span>&nbsp;<span class="op" id="2849096">*</span><span class="ident" id="2849097">Time</span><span class="op" id="2849101">)</span>&nbsp;<span class="ident" id="2849103">UnmarshalBinary</span><span class="op" id="2849118">(</span><span class="ident" id="2849119">data</span>&nbsp;<span class="op" id="2849124">[</span><span class="op" id="2849125">]</span><span class="builtintype" id="2849126">byte</span><span class="op" id="2849130">)</span>&nbsp;<span class="builtintype" id="2849132">error</span>&nbsp;<span class="op" id="2849138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849141">buf</span>&nbsp;<span class="op" id="2849145">:=</span>&nbsp;<span class="ident" id="2849148">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849154">if</span>&nbsp;<span class="builtinfunc" id="2849157">len</span><span class="op" id="2849160">(</span><span class="ident" id="2849161">buf</span><span class="op" id="2849164">)</span>&nbsp;<span class="op" id="2849166">==</span>&nbsp;<span class="num" id="2849169">0</span>&nbsp;<span class="op" id="2849171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849175">return</span>&nbsp;<span class="ident" id="2849182">errors</span><span class="op" id="2849188">.</span><span class="ident" id="2849189">New</span><span class="op" id="2849192">(</span><span class="string" id="2849193">&#34;Time.UnmarshalBinary:&nbsp;no&nbsp;data&#34;</span><span class="op" id="2849224">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849231">if</span>&nbsp;<span class="ident" id="2849234">buf</span><span class="op" id="2849237">[</span><span class="num" id="2849238">0</span><span class="op" id="2849239">]</span>&nbsp;<span class="op" id="2849241">!=</span>&nbsp;<span class="ident" id="2849244">timeBinaryVersion</span>&nbsp;<span class="op" id="2849262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849266">return</span>&nbsp;<span class="ident" id="2849273">errors</span><span class="op" id="2849279">.</span><span class="ident" id="2849280">New</span><span class="op" id="2849283">(</span><span class="string" id="2849284">&#34;Time.UnmarshalBinary:&nbsp;unsupported&nbsp;version&#34;</span><span class="op" id="2849327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849330">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849334">if</span>&nbsp;<span class="builtinfunc" id="2849337">len</span><span class="op" id="2849340">(</span><span class="ident" id="2849341">buf</span><span class="op" id="2849344">)</span>&nbsp;<span class="op" id="2849346">!=</span>&nbsp;<span class="comment" id="2849349">/*version*/</span>&nbsp;<span class="num" id="2849361">1</span><span class="op" id="2849362">+</span>&nbsp;<span class="comment" id="2849364">/*sec*/</span>&nbsp;<span class="num" id="2849372">8</span><span class="op" id="2849373">+</span>&nbsp;<span class="comment" id="2849375">/*nsec*/</span>&nbsp;<span class="num" id="2849384">4</span><span class="op" id="2849385">+</span>&nbsp;<span class="comment" id="2849387">/*zone&nbsp;offset*/</span>&nbsp;<span class="num" id="2849403">2</span>&nbsp;<span class="op" id="2849405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849409">return</span>&nbsp;<span class="ident" id="2849416">errors</span><span class="op" id="2849422">.</span><span class="ident" id="2849423">New</span><span class="op" id="2849426">(</span><span class="string" id="2849427">&#34;Time.UnmarshalBinary:&nbsp;invalid&nbsp;length&#34;</span><span class="op" id="2849465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849472">buf</span>&nbsp;<span class="op" id="2849476">=</span>&nbsp;<span class="ident" id="2849478">buf</span><span class="op" id="2849481">[</span><span class="num" id="2849482">1</span><span class="op" id="2849483">:</span><span class="op" id="2849484">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849487">t</span><span class="op" id="2849488">.</span><span class="ident" id="2849489">sec</span>&nbsp;<span class="op" id="2849493">=</span>&nbsp;<span class="ident" id="2849495">int64</span><span class="op" id="2849500">(</span><span class="ident" id="2849501">buf</span><span class="op" id="2849504">[</span><span class="num" id="2849505">7</span><span class="op" id="2849506">]</span><span class="op" id="2849507">)</span>&nbsp;<span class="op" id="2849509">|</span>&nbsp;<span class="ident" id="2849511">int64</span><span class="op" id="2849516">(</span><span class="ident" id="2849517">buf</span><span class="op" id="2849520">[</span><span class="num" id="2849521">6</span><span class="op" id="2849522">]</span><span class="op" id="2849523">)</span><span class="op" id="2849524">&lt;&lt;</span><span class="num" id="2849526">8</span>&nbsp;<span class="op" id="2849528">|</span>&nbsp;<span class="ident" id="2849530">int64</span><span class="op" id="2849535">(</span><span class="ident" id="2849536">buf</span><span class="op" id="2849539">[</span><span class="num" id="2849540">5</span><span class="op" id="2849541">]</span><span class="op" id="2849542">)</span><span class="op" id="2849543">&lt;&lt;</span><span class="num" id="2849545">16</span>&nbsp;<span class="op" id="2849548">|</span>&nbsp;<span class="ident" id="2849550">int64</span><span class="op" id="2849555">(</span><span class="ident" id="2849556">buf</span><span class="op" id="2849559">[</span><span class="num" id="2849560">4</span><span class="op" id="2849561">]</span><span class="op" id="2849562">)</span><span class="op" id="2849563">&lt;&lt;</span><span class="num" id="2849565">24</span>&nbsp;<span class="op" id="2849568">|</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849572">int64</span><span class="op" id="2849577">(</span><span class="ident" id="2849578">buf</span><span class="op" id="2849581">[</span><span class="num" id="2849582">3</span><span class="op" id="2849583">]</span><span class="op" id="2849584">)</span><span class="op" id="2849585">&lt;&lt;</span><span class="num" id="2849587">32</span>&nbsp;<span class="op" id="2849590">|</span>&nbsp;<span class="ident" id="2849592">int64</span><span class="op" id="2849597">(</span><span class="ident" id="2849598">buf</span><span class="op" id="2849601">[</span><span class="num" id="2849602">2</span><span class="op" id="2849603">]</span><span class="op" id="2849604">)</span><span class="op" id="2849605">&lt;&lt;</span><span class="num" id="2849607">40</span>&nbsp;<span class="op" id="2849610">|</span>&nbsp;<span class="ident" id="2849612">int64</span><span class="op" id="2849617">(</span><span class="ident" id="2849618">buf</span><span class="op" id="2849621">[</span><span class="num" id="2849622">1</span><span class="op" id="2849623">]</span><span class="op" id="2849624">)</span><span class="op" id="2849625">&lt;&lt;</span><span class="num" id="2849627">48</span>&nbsp;<span class="op" id="2849630">|</span>&nbsp;<span class="ident" id="2849632">int64</span><span class="op" id="2849637">(</span><span class="ident" id="2849638">buf</span><span class="op" id="2849641">[</span><span class="num" id="2849642">0</span><span class="op" id="2849643">]</span><span class="op" id="2849644">)</span><span class="op" id="2849645">&lt;&lt;</span><span class="num" id="2849647">56</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849652">buf</span>&nbsp;<span class="op" id="2849656">=</span>&nbsp;<span class="ident" id="2849658">buf</span><span class="op" id="2849661">[</span><span class="num" id="2849662">8</span><span class="op" id="2849663">:</span><span class="op" id="2849664">]</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849667">t</span><span class="op" id="2849668">.</span><span class="ident" id="2849669">nsec</span>&nbsp;<span class="op" id="2849674">=</span>&nbsp;<span class="builtintype" id="2849676">int32</span><span class="op" id="2849681">(</span><span class="ident" id="2849682">buf</span><span class="op" id="2849685">[</span><span class="num" id="2849686">3</span><span class="op" id="2849687">]</span><span class="op" id="2849688">)</span>&nbsp;<span class="op" id="2849690">|</span>&nbsp;<span class="builtintype" id="2849692">int32</span><span class="op" id="2849697">(</span><span class="ident" id="2849698">buf</span><span class="op" id="2849701">[</span><span class="num" id="2849702">2</span><span class="op" id="2849703">]</span><span class="op" id="2849704">)</span><span class="op" id="2849705">&lt;&lt;</span><span class="num" id="2849707">8</span>&nbsp;<span class="op" id="2849709">|</span>&nbsp;<span class="builtintype" id="2849711">int32</span><span class="op" id="2849716">(</span><span class="ident" id="2849717">buf</span><span class="op" id="2849720">[</span><span class="num" id="2849721">1</span><span class="op" id="2849722">]</span><span class="op" id="2849723">)</span><span class="op" id="2849724">&lt;&lt;</span><span class="num" id="2849726">16</span>&nbsp;<span class="op" id="2849729">|</span>&nbsp;<span class="builtintype" id="2849731">int32</span><span class="op" id="2849736">(</span><span class="ident" id="2849737">buf</span><span class="op" id="2849740">[</span><span class="num" id="2849741">0</span><span class="op" id="2849742">]</span><span class="op" id="2849743">)</span><span class="op" id="2849744">&lt;&lt;</span><span class="num" id="2849746">24</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849751">buf</span>&nbsp;<span class="op" id="2849755">=</span>&nbsp;<span class="ident" id="2849757">buf</span><span class="op" id="2849760">[</span><span class="num" id="2849761">4</span><span class="op" id="2849762">:</span><span class="op" id="2849763">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849766">offset</span>&nbsp;<span class="op" id="2849773">:=</span>&nbsp;<span class="builtintype" id="2849776">int</span><span class="op" id="2849779">(</span><span class="builtintype" id="2849780">int16</span><span class="op" id="2849785">(</span><span class="ident" id="2849786">buf</span><span class="op" id="2849789">[</span><span class="num" id="2849790">1</span><span class="op" id="2849791">]</span><span class="op" id="2849792">)</span><span class="op" id="2849793">|</span><span class="builtintype" id="2849794">int16</span><span class="op" id="2849799">(</span><span class="ident" id="2849800">buf</span><span class="op" id="2849803">[</span><span class="num" id="2849804">0</span><span class="op" id="2849805">]</span><span class="op" id="2849806">)</span><span class="op" id="2849807">&lt;&lt;</span><span class="num" id="2849809">8</span><span class="op" id="2849810">)</span>&nbsp;<span class="op" id="2849812">*</span>&nbsp;<span class="num" id="2849814">60</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849819">if</span>&nbsp;<span class="ident" id="2849822">offset</span>&nbsp;<span class="op" id="2849829">==</span>&nbsp;<span class="op" id="2849832">-</span><span class="num" id="2849833">1</span><span class="op" id="2849834">*</span><span class="num" id="2849835">60</span>&nbsp;<span class="op" id="2849838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849842">t</span><span class="op" id="2849843">.</span><span class="ident" id="2849844">loc</span>&nbsp;<span class="op" id="2849848">=</span>&nbsp;<span class="op" id="2849850">&amp;</span><span class="ident" id="2849851">utcLoc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849859">}</span>&nbsp;<span class="keyword" id="2849861">else</span>&nbsp;<span class="keyword" id="2849866">if</span>&nbsp;<span class="ident" id="2849869">_</span><span class="op" id="2849870">,</span>&nbsp;<span class="ident" id="2849872">localoff</span><span class="op" id="2849880">,</span>&nbsp;<span class="ident" id="2849882">_</span><span class="op" id="2849883">,</span>&nbsp;<span class="ident" id="2849885">_</span><span class="op" id="2849886">,</span>&nbsp;<span class="ident" id="2849888">_</span>&nbsp;<span class="op" id="2849890">:=</span>&nbsp;<span class="ident" id="2849893">Local</span><span class="op" id="2849898">.</span><span class="ident" id="2849899">lookup</span><span class="op" id="2849905">(</span><span class="ident" id="2849906">t</span><span class="op" id="2849907">.</span><span class="ident" id="2849908">sec</span>&nbsp;<span class="op" id="2849912">+</span>&nbsp;<span class="ident" id="2849914">internalToUnix</span><span class="op" id="2849928">)</span><span class="op" id="2849929">;</span>&nbsp;<span class="ident" id="2849931">offset</span>&nbsp;<span class="op" id="2849938">==</span>&nbsp;<span class="ident" id="2849941">localoff</span>&nbsp;<span class="op" id="2849950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849954">t</span><span class="op" id="2849955">.</span><span class="ident" id="2849956">loc</span>&nbsp;<span class="op" id="2849960">=</span>&nbsp;<span class="ident" id="2849962">Local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849969">}</span>&nbsp;<span class="keyword" id="2849971">else</span>&nbsp;<span class="op" id="2849976">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849980">t</span><span class="op" id="2849981">.</span><span class="ident" id="2849982">loc</span>&nbsp;<span class="op" id="2849986">=</span>&nbsp;<span class="ident" id="2849988">FixedZone</span><span class="op" id="2849997">(</span><span class="string" id="2849998">&#34;&#34;</span><span class="op" id="2850000">,</span>&nbsp;<span class="ident" id="2850002">offset</span><span class="op" id="2850008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850015">return</span>&nbsp;<span class="ident" id="2850022">nil</span><br>
<span class="lineno"></span><span class="op" id="2850026">}</span><br>
<span class="lineno">915</span><br>
<span class="lineno"></span><span class="comment" id="2850029">//&nbsp;TODO(rsc):&nbsp;Remove&nbsp;GobEncoder,&nbsp;GobDecoder,&nbsp;MarshalJSON,&nbsp;UnmarshalJSON&nbsp;in&nbsp;Go&nbsp;2.</span><br>
<span class="lineno"></span><span class="comment" id="2850110">//&nbsp;The&nbsp;same&nbsp;semantics&nbsp;will&nbsp;be&nbsp;provided&nbsp;by&nbsp;the&nbsp;generic&nbsp;MarshalBinary,&nbsp;MarshalText,</span><br>
<span class="lineno"></span><span class="comment" id="2850192">//&nbsp;UnmarshalBinary,&nbsp;UnmarshalText.</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span><span class="comment" id="2850228">//&nbsp;GobEncode&nbsp;implements&nbsp;the&nbsp;gob.GobEncoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2850282">func</span>&nbsp;<span class="op" id="2850287">(</span><span class="ident" id="2850288">t</span>&nbsp;<span class="ident" id="2850290">Time</span><span class="op" id="2850294">)</span>&nbsp;<span class="ident" id="2850296">GobEncode</span><span class="op" id="2850305">(</span><span class="op" id="2850306">)</span>&nbsp;<span class="op" id="2850308">(</span><span class="op" id="2850309">[</span><span class="op" id="2850310">]</span><span class="builtintype" id="2850311">byte</span><span class="op" id="2850315">,</span>&nbsp;<span class="builtintype" id="2850317">error</span><span class="op" id="2850322">)</span>&nbsp;<span class="op" id="2850324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850327">return</span>&nbsp;<span class="ident" id="2850334">t</span><span class="op" id="2850335">.</span><span class="ident" id="2850336">MarshalBinary</span><span class="op" id="2850349">(</span><span class="op" id="2850350">)</span><br>
<span class="lineno"></span><span class="op" id="2850352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span><span class="comment" id="2850355">//&nbsp;GobDecode&nbsp;implements&nbsp;the&nbsp;gob.GobDecoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2850409">func</span>&nbsp;<span class="op" id="2850414">(</span><span class="ident" id="2850415">t</span>&nbsp;<span class="op" id="2850417">*</span><span class="ident" id="2850418">Time</span><span class="op" id="2850422">)</span>&nbsp;<span class="ident" id="2850424">GobDecode</span><span class="op" id="2850433">(</span><span class="ident" id="2850434">data</span>&nbsp;<span class="op" id="2850439">[</span><span class="op" id="2850440">]</span><span class="builtintype" id="2850441">byte</span><span class="op" id="2850445">)</span>&nbsp;<span class="builtintype" id="2850447">error</span>&nbsp;<span class="op" id="2850453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850456">return</span>&nbsp;<span class="ident" id="2850463">t</span><span class="op" id="2850464">.</span><span class="ident" id="2850465">UnmarshalBinary</span><span class="op" id="2850480">(</span><span class="ident" id="2850481">data</span><span class="op" id="2850485">)</span><br>
<span class="lineno"></span><span class="op" id="2850487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">930</span><span class="comment" id="2850490">//&nbsp;MarshalJSON&nbsp;implements&nbsp;the&nbsp;json.Marshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2850546">//&nbsp;The&nbsp;time&nbsp;is&nbsp;a&nbsp;quoted&nbsp;string&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format,&nbsp;with&nbsp;sub-second&nbsp;precision&nbsp;added&nbsp;if&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2850641">func</span>&nbsp;<span class="op" id="2850646">(</span><span class="ident" id="2850647">t</span>&nbsp;<span class="ident" id="2850649">Time</span><span class="op" id="2850653">)</span>&nbsp;<span class="ident" id="2850655">MarshalJSON</span><span class="op" id="2850666">(</span><span class="op" id="2850667">)</span>&nbsp;<span class="op" id="2850669">(</span><span class="op" id="2850670">[</span><span class="op" id="2850671">]</span><span class="builtintype" id="2850672">byte</span><span class="op" id="2850676">,</span>&nbsp;<span class="builtintype" id="2850678">error</span><span class="op" id="2850683">)</span>&nbsp;<span class="op" id="2850685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850688">if</span>&nbsp;<span class="ident" id="2850691">y</span>&nbsp;<span class="op" id="2850693">:=</span>&nbsp;<span class="ident" id="2850696">t</span><span class="op" id="2850697">.</span><span class="ident" id="2850698">Year</span><span class="op" id="2850702">(</span><span class="op" id="2850703">)</span><span class="op" id="2850704">;</span>&nbsp;<span class="ident" id="2850706">y</span>&nbsp;<span class="op" id="2850708">&lt;</span>&nbsp;<span class="num" id="2850710">0</span>&nbsp;<span class="op" id="2850712">||</span>&nbsp;<span class="ident" id="2850715">y</span>&nbsp;<span class="op" id="2850717">&gt;=</span>&nbsp;<span class="num" id="2850720">10000</span>&nbsp;<span class="op" id="2850726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2850730">//&nbsp;RFC&nbsp;3339&nbsp;is&nbsp;clear&nbsp;that&nbsp;years&nbsp;are&nbsp;4&nbsp;digits&nbsp;exactly.</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2850786">//&nbsp;See&nbsp;golang.org/issue/4556#c15&nbsp;for&nbsp;more&nbsp;discussion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850842">return</span>&nbsp;<span class="ident" id="2850849">nil</span><span class="op" id="2850852">,</span>&nbsp;<span class="ident" id="2850854">errors</span><span class="op" id="2850860">.</span><span class="ident" id="2850861">New</span><span class="op" id="2850864">(</span><span class="string" id="2850865">&#34;Time.MarshalJSON:&nbsp;year&nbsp;outside&nbsp;of&nbsp;range&nbsp;[0,9999]&#34;</span><span class="op" id="2850915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850921">return</span>&nbsp;<span class="op" id="2850928">[</span><span class="op" id="2850929">]</span><span class="builtintype" id="2850930">byte</span><span class="op" id="2850934">(</span><span class="ident" id="2850935">t</span><span class="op" id="2850936">.</span><span class="ident" id="2850937">Format</span><span class="op" id="2850943">(</span><span class="string" id="2850944">`&#34;`</span>&nbsp;<span class="op" id="2850948">+</span>&nbsp;<span class="ident" id="2850950">RFC3339Nano</span>&nbsp;<span class="op" id="2850962">+</span>&nbsp;<span class="string" id="2850964">`&#34;`</span><span class="op" id="2850967">)</span><span class="op" id="2850968">)</span><span class="op" id="2850969">,</span>&nbsp;<span class="ident" id="2850971">nil</span><br>
<span class="lineno"></span><span class="op" id="2850975">}</span><br>
<span class="lineno">940</span><br>
<span class="lineno"></span><span class="comment" id="2850978">//&nbsp;UnmarshalJSON&nbsp;implements&nbsp;the&nbsp;json.Unmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2851038">//&nbsp;The&nbsp;time&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;a&nbsp;quoted&nbsp;string&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="2851104">func</span>&nbsp;<span class="op" id="2851109">(</span><span class="ident" id="2851110">t</span>&nbsp;<span class="op" id="2851112">*</span><span class="ident" id="2851113">Time</span><span class="op" id="2851117">)</span>&nbsp;<span class="ident" id="2851119">UnmarshalJSON</span><span class="op" id="2851132">(</span><span class="ident" id="2851133">data</span>&nbsp;<span class="op" id="2851138">[</span><span class="op" id="2851139">]</span><span class="builtintype" id="2851140">byte</span><span class="op" id="2851144">)</span>&nbsp;<span class="op" id="2851146">(</span><span class="ident" id="2851147">err</span>&nbsp;<span class="builtintype" id="2851151">error</span><span class="op" id="2851156">)</span>&nbsp;<span class="op" id="2851158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2851161">//&nbsp;Fractional&nbsp;seconds&nbsp;are&nbsp;handled&nbsp;implicitly&nbsp;by&nbsp;Parse.</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851217">*</span><span class="ident" id="2851218">t</span><span class="op" id="2851219">,</span>&nbsp;<span class="ident" id="2851221">err</span>&nbsp;<span class="op" id="2851225">=</span>&nbsp;<span class="ident" id="2851227">Parse</span><span class="op" id="2851232">(</span><span class="string" id="2851233">`&#34;`</span><span class="op" id="2851236">+</span><span class="ident" id="2851237">RFC3339</span><span class="op" id="2851244">+</span><span class="string" id="2851245">`&#34;`</span><span class="op" id="2851248">,</span>&nbsp;<span class="builtintype" id="2851250">string</span><span class="op" id="2851256">(</span><span class="ident" id="2851257">data</span><span class="op" id="2851261">)</span><span class="op" id="2851262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851265">return</span><br>
<span class="lineno"></span><span class="op" id="2851272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2851275">//&nbsp;MarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextMarshaler&nbsp;interface.</span><br>
<span class="lineno">950</span><span class="comment" id="2851339">//&nbsp;The&nbsp;time&nbsp;is&nbsp;formatted&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format,&nbsp;with&nbsp;sub-second&nbsp;precision&nbsp;added&nbsp;if&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2851428">func</span>&nbsp;<span class="op" id="2851433">(</span><span class="ident" id="2851434">t</span>&nbsp;<span class="ident" id="2851436">Time</span><span class="op" id="2851440">)</span>&nbsp;<span class="ident" id="2851442">MarshalText</span><span class="op" id="2851453">(</span><span class="op" id="2851454">)</span>&nbsp;<span class="op" id="2851456">(</span><span class="op" id="2851457">[</span><span class="op" id="2851458">]</span><span class="builtintype" id="2851459">byte</span><span class="op" id="2851463">,</span>&nbsp;<span class="builtintype" id="2851465">error</span><span class="op" id="2851470">)</span>&nbsp;<span class="op" id="2851472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851475">if</span>&nbsp;<span class="ident" id="2851478">y</span>&nbsp;<span class="op" id="2851480">:=</span>&nbsp;<span class="ident" id="2851483">t</span><span class="op" id="2851484">.</span><span class="ident" id="2851485">Year</span><span class="op" id="2851489">(</span><span class="op" id="2851490">)</span><span class="op" id="2851491">;</span>&nbsp;<span class="ident" id="2851493">y</span>&nbsp;<span class="op" id="2851495">&lt;</span>&nbsp;<span class="num" id="2851497">0</span>&nbsp;<span class="op" id="2851499">||</span>&nbsp;<span class="ident" id="2851502">y</span>&nbsp;<span class="op" id="2851504">&gt;=</span>&nbsp;<span class="num" id="2851507">10000</span>&nbsp;<span class="op" id="2851513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851517">return</span>&nbsp;<span class="ident" id="2851524">nil</span><span class="op" id="2851527">,</span>&nbsp;<span class="ident" id="2851529">errors</span><span class="op" id="2851535">.</span><span class="ident" id="2851536">New</span><span class="op" id="2851539">(</span><span class="string" id="2851540">&#34;Time.MarshalText:&nbsp;year&nbsp;outside&nbsp;of&nbsp;range&nbsp;[0,9999]&#34;</span><span class="op" id="2851590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851593">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851596">return</span>&nbsp;<span class="op" id="2851603">[</span><span class="op" id="2851604">]</span><span class="builtintype" id="2851605">byte</span><span class="op" id="2851609">(</span><span class="ident" id="2851610">t</span><span class="op" id="2851611">.</span><span class="ident" id="2851612">Format</span><span class="op" id="2851618">(</span><span class="ident" id="2851619">RFC3339Nano</span><span class="op" id="2851630">)</span><span class="op" id="2851631">)</span><span class="op" id="2851632">,</span>&nbsp;<span class="ident" id="2851634">nil</span><br>
<span class="lineno"></span><span class="op" id="2851638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2851641">//&nbsp;UnmarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2851709">//&nbsp;The&nbsp;time&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format.</span><br>
<span class="lineno">960</span><span class="keyword" id="2851759">func</span>&nbsp;<span class="op" id="2851764">(</span><span class="ident" id="2851765">t</span>&nbsp;<span class="op" id="2851767">*</span><span class="ident" id="2851768">Time</span><span class="op" id="2851772">)</span>&nbsp;<span class="ident" id="2851774">UnmarshalText</span><span class="op" id="2851787">(</span><span class="ident" id="2851788">data</span>&nbsp;<span class="op" id="2851793">[</span><span class="op" id="2851794">]</span><span class="builtintype" id="2851795">byte</span><span class="op" id="2851799">)</span>&nbsp;<span class="op" id="2851801">(</span><span class="ident" id="2851802">err</span>&nbsp;<span class="builtintype" id="2851806">error</span><span class="op" id="2851811">)</span>&nbsp;<span class="op" id="2851813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2851816">//&nbsp;Fractional&nbsp;seconds&nbsp;are&nbsp;handled&nbsp;implicitly&nbsp;by&nbsp;Parse.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851872">*</span><span class="ident" id="2851873">t</span><span class="op" id="2851874">,</span>&nbsp;<span class="ident" id="2851876">err</span>&nbsp;<span class="op" id="2851880">=</span>&nbsp;<span class="ident" id="2851882">Parse</span><span class="op" id="2851887">(</span><span class="ident" id="2851888">RFC3339</span><span class="op" id="2851895">,</span>&nbsp;<span class="builtintype" id="2851897">string</span><span class="op" id="2851903">(</span><span class="ident" id="2851904">data</span><span class="op" id="2851908">)</span><span class="op" id="2851909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851912">return</span><br>
<span class="lineno"></span><span class="op" id="2851919">}</span><br>
<span class="lineno">965</span><br>
<span class="lineno"></span><span class="comment" id="2851922">//&nbsp;Unix&nbsp;returns&nbsp;the&nbsp;local&nbsp;Time&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;Unix&nbsp;time,</span><br>
<span class="lineno"></span><span class="comment" id="2851991">//&nbsp;sec&nbsp;seconds&nbsp;and&nbsp;nsec&nbsp;nanoseconds&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="2852054">//&nbsp;It&nbsp;is&nbsp;valid&nbsp;to&nbsp;pass&nbsp;nsec&nbsp;outside&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span><span class="keyword" id="2852116">func</span>&nbsp;<span class="ident" id="2852121">Unix</span><span class="op" id="2852125">(</span><span class="ident" id="2852126">sec</span>&nbsp;<span class="ident" id="2852130">int64</span><span class="op" id="2852135">,</span>&nbsp;<span class="ident" id="2852137">nsec</span>&nbsp;<span class="ident" id="2852142">int64</span><span class="op" id="2852147">)</span>&nbsp;<span class="ident" id="2852149">Time</span>&nbsp;<span class="op" id="2852154">{</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2852157">if</span>&nbsp;<span class="ident" id="2852160">nsec</span>&nbsp;<span class="op" id="2852165">&lt;</span>&nbsp;<span class="num" id="2852167">0</span>&nbsp;<span class="op" id="2852169">||</span>&nbsp;<span class="ident" id="2852172">nsec</span>&nbsp;<span class="op" id="2852177">&gt;=</span>&nbsp;<span class="num" id="2852180">1e9</span>&nbsp;<span class="op" id="2852184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852188">n</span>&nbsp;<span class="op" id="2852190">:=</span>&nbsp;<span class="ident" id="2852193">nsec</span>&nbsp;<span class="op" id="2852198">/</span>&nbsp;<span class="num" id="2852200">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852206">sec</span>&nbsp;<span class="op" id="2852210">+=</span>&nbsp;<span class="ident" id="2852213">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852217">nsec</span>&nbsp;<span class="op" id="2852222">-=</span>&nbsp;<span class="ident" id="2852225">n</span>&nbsp;<span class="op" id="2852227">*</span>&nbsp;<span class="num" id="2852229">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2852235">if</span>&nbsp;<span class="ident" id="2852238">nsec</span>&nbsp;<span class="op" id="2852243">&lt;</span>&nbsp;<span class="num" id="2852245">0</span>&nbsp;<span class="op" id="2852247">{</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852252">nsec</span>&nbsp;<span class="op" id="2852257">+=</span>&nbsp;<span class="num" id="2852260">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852267">sec</span><span class="op" id="2852270">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2852275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2852278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2852281">return</span>&nbsp;<span class="ident" id="2852288">Time</span><span class="op" id="2852292">{</span><span class="ident" id="2852293">sec</span>&nbsp;<span class="op" id="2852297">+</span>&nbsp;<span class="ident" id="2852299">unixToInternal</span><span class="op" id="2852313">,</span>&nbsp;<span class="builtintype" id="2852315">int32</span><span class="op" id="2852320">(</span><span class="ident" id="2852321">nsec</span><span class="op" id="2852325">)</span><span class="op" id="2852326">,</span>&nbsp;<span class="ident" id="2852328">Local</span><span class="op" id="2852333">}</span><br>
<span class="lineno">980</span><span class="op" id="2852335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2852338">func</span>&nbsp;<span class="ident" id="2852343">isLeap</span><span class="op" id="2852349">(</span><span class="ident" id="2852350">year</span>&nbsp;<span class="builtintype" id="2852355">int</span><span class="op" id="2852358">)</span>&nbsp;<span class="builtintype" id="2852360">bool</span>&nbsp;<span class="op" id="2852365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2852368">return</span>&nbsp;<span class="ident" id="2852375">year</span><span class="op" id="2852379">%</span><span class="num" id="2852380">4</span>&nbsp;<span class="op" id="2852382">==</span>&nbsp;<span class="num" id="2852385">0</span>&nbsp;<span class="op" id="2852387">&amp;&amp;</span>&nbsp;<span class="op" id="2852390">(</span><span class="ident" id="2852391">year</span><span class="op" id="2852395">%</span><span class="num" id="2852396">100</span>&nbsp;<span class="op" id="2852400">!=</span>&nbsp;<span class="num" id="2852403">0</span>&nbsp;<span class="op" id="2852405">||</span>&nbsp;<span class="ident" id="2852408">year</span><span class="op" id="2852412">%</span><span class="num" id="2852413">400</span>&nbsp;<span class="op" id="2852417">==</span>&nbsp;<span class="num" id="2852420">0</span><span class="op" id="2852421">)</span><br>
<span class="lineno"></span><span class="op" id="2852423">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span><span class="comment" id="2852426">//&nbsp;norm&nbsp;returns&nbsp;nhi,&nbsp;nlo&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2852461">//&nbsp;&nbsp;&nbsp;&nbsphi&nbsp;*&nbsp;base&nbsp;+&nbsp;lo&nbsp;==&nbsp;nhi&nbsp;*&nbsp;base&nbsp;+&nbsp;nlo</span><br>
<span class="lineno"></span><span class="comment" id="2852499">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&lt;=&nbsp;nlo&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span><span class="keyword" id="2852518">func</span>&nbsp;<span class="ident" id="2852523">norm</span><span class="op" id="2852527">(</span><span class="ident" id="2852528">hi</span><span class="op" id="2852530">,</span>&nbsp;<span class="ident" id="2852532">lo</span><span class="op" id="2852534">,</span>&nbsp;<span class="ident" id="2852536">base</span>&nbsp;<span class="builtintype" id="2852541">int</span><span class="op" id="2852544">)</span>&nbsp;<span class="op" id="2852546">(</span><span class="ident" id="2852547">nhi</span><span class="op" id="2852550">,</span>&nbsp;<span class="ident" id="2852552">nlo</span>&nbsp;<span class="builtintype" id="2852556">int</span><span class="op" id="2852559">)</span>&nbsp;<span class="op" id="2852561">{</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2852564">if</span>&nbsp;<span class="ident" id="2852567">lo</span>&nbsp;<span class="op" id="2852570">&lt;</span>&nbsp;<span class="num" id="2852572">0</span>&nbsp;<span class="op" id="2852574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852578">n</span>&nbsp;<span class="op" id="2852580">:=</span>&nbsp;<span class="op" id="2852583">(</span><span class="op" id="2852584">-</span><span class="ident" id="2852585">lo</span><span class="op" id="2852587">-</span><span class="num" id="2852588">1</span><span class="op" id="2852589">)</span><span class="op" id="2852590">/</span><span class="ident" id="2852591">base</span>&nbsp;<span class="op" id="2852596">+</span>&nbsp;<span class="num" id="2852598">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852602">hi</span>&nbsp;<span class="op" id="2852605">-=</span>&nbsp;<span class="ident" id="2852608">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852612">lo</span>&nbsp;<span class="op" id="2852615">+=</span>&nbsp;<span class="ident" id="2852618">n</span>&nbsp;<span class="op" id="2852620">*</span>&nbsp;<span class="ident" id="2852622">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2852628">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2852631">if</span>&nbsp;<span class="ident" id="2852634">lo</span>&nbsp;<span class="op" id="2852637">&gt;=</span>&nbsp;<span class="ident" id="2852640">base</span>&nbsp;<span class="op" id="2852645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852649">n</span>&nbsp;<span class="op" id="2852651">:=</span>&nbsp;<span class="ident" id="2852654">lo</span>&nbsp;<span class="op" id="2852657">/</span>&nbsp;<span class="ident" id="2852659">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852666">hi</span>&nbsp;<span class="op" id="2852669">+=</span>&nbsp;<span class="ident" id="2852672">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852676">lo</span>&nbsp;<span class="op" id="2852679">-=</span>&nbsp;<span class="ident" id="2852682">n</span>&nbsp;<span class="op" id="2852684">*</span>&nbsp;<span class="ident" id="2852686">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2852692">}</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2852695">return</span>&nbsp;<span class="ident" id="2852702">hi</span><span class="op" id="2852704">,</span>&nbsp;<span class="ident" id="2852706">lo</span><br>
<span class="lineno"></span><span class="op" id="2852709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2852712">//&nbsp;Date&nbsp;returns&nbsp;the&nbsp;Time&nbsp;corresponding&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2852754">//&nbsp;&nbsp;&nbsp;&nbspyyyy-mm-dd&nbsp;hh:mm:ss&nbsp;+&nbsp;nsec&nbsp;nanoseconds</span><br>
<span class="lineno">1005</span><span class="comment" id="2852796">//&nbsp;in&nbsp;the&nbsp;appropriate&nbsp;zone&nbsp;for&nbsp;that&nbsp;time&nbsp;in&nbsp;the&nbsp;given&nbsp;location.</span><br>
<span class="lineno"></span><span class="comment" id="2852860">//</span><br>
<span class="lineno"></span><span class="comment" id="2852863">//&nbsp;The&nbsp;month,&nbsp;day,&nbsp;hour,&nbsp;min,&nbsp;sec,&nbsp;and&nbsp;nsec&nbsp;values&nbsp;may&nbsp;be&nbsp;outside</span><br>
<span class="lineno"></span><span class="comment" id="2852929">//&nbsp;their&nbsp;usual&nbsp;ranges&nbsp;and&nbsp;will&nbsp;be&nbsp;normalized&nbsp;during&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="comment" id="2852997">//&nbsp;For&nbsp;example,&nbsp;October&nbsp;32&nbsp;converts&nbsp;to&nbsp;November&nbsp;1.</span><br>
<span class="lineno">1010</span><span class="comment" id="2853048">//</span><br>
<span class="lineno"></span><span class="comment" id="2853051">//&nbsp;A&nbsp;daylight&nbsp;savings&nbsp;time&nbsp;transition&nbsp;skips&nbsp;or&nbsp;repeats&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2853113">//&nbsp;For&nbsp;example,&nbsp;in&nbsp;the&nbsp;United&nbsp;States,&nbsp;March&nbsp;13,&nbsp;2011&nbsp;2:15am&nbsp;never&nbsp;occurred,</span><br>
<span class="lineno"></span><span class="comment" id="2853189">//&nbsp;while&nbsp;November&nbsp;6,&nbsp;2011&nbsp;1:15am&nbsp;occurred&nbsp;twice.&nbsp;&nbsp;In&nbsp;such&nbsp;cases,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2853258">//&nbsp;choice&nbsp;of&nbsp;time&nbsp;zone,&nbsp;and&nbsp;therefore&nbsp;the&nbsp;time,&nbsp;is&nbsp;not&nbsp;well-defined.</span><br>
<span class="lineno">1015</span><span class="comment" id="2853327">//&nbsp;Date&nbsp;returns&nbsp;a&nbsp;time&nbsp;that&nbsp;is&nbsp;correct&nbsp;in&nbsp;one&nbsp;of&nbsp;the&nbsp;two&nbsp;zones&nbsp;involved</span><br>
<span class="lineno"></span><span class="comment" id="2853399">//&nbsp;in&nbsp;the&nbsp;transition,&nbsp;but&nbsp;it&nbsp;does&nbsp;not&nbsp;guarantee&nbsp;which.</span><br>
<span class="lineno"></span><span class="comment" id="2853454">//</span><br>
<span class="lineno"></span><span class="comment" id="2853457">//&nbsp;Date&nbsp;panics&nbsp;if&nbsp;loc&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2853487">func</span>&nbsp;<span class="ident" id="2853492">Date</span><span class="op" id="2853496">(</span><span class="ident" id="2853497">year</span>&nbsp;<span class="builtintype" id="2853502">int</span><span class="op" id="2853505">,</span>&nbsp;<span class="ident" id="2853507">month</span>&nbsp;<span class="ident" id="2853513">Month</span><span class="op" id="2853518">,</span>&nbsp;<span class="ident" id="2853520">day</span><span class="op" id="2853523">,</span>&nbsp;<span class="ident" id="2853525">hour</span><span class="op" id="2853529">,</span>&nbsp;<span class="ident" id="2853531">min</span><span class="op" id="2853534">,</span>&nbsp;<span class="ident" id="2853536">sec</span><span class="op" id="2853539">,</span>&nbsp;<span class="ident" id="2853541">nsec</span>&nbsp;<span class="builtintype" id="2853546">int</span><span class="op" id="2853549">,</span>&nbsp;<span class="ident" id="2853551">loc</span>&nbsp;<span class="op" id="2853555">*</span><span class="ident" id="2853556">Location</span><span class="op" id="2853564">)</span>&nbsp;<span class="ident" id="2853566">Time</span>&nbsp;<span class="op" id="2853571">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2853574">if</span>&nbsp;<span class="ident" id="2853577">loc</span>&nbsp;<span class="op" id="2853581">==</span>&nbsp;<span class="ident" id="2853584">nil</span>&nbsp;<span class="op" id="2853588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2853592">panic</span><span class="op" id="2853597">(</span><span class="string" id="2853598">&#34;time:&nbsp;missing&nbsp;Location&nbsp;in&nbsp;call&nbsp;to&nbsp;Date&#34;</span><span class="op" id="2853638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2853641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2853645">//&nbsp;Normalize&nbsp;month,&nbsp;overflowing&nbsp;into&nbsp;year.</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2853689">m</span>&nbsp;<span class="op" id="2853691">:=</span>&nbsp;<span class="builtintype" id="2853694">int</span><span class="op" id="2853697">(</span><span class="ident" id="2853698">month</span><span class="op" id="2853703">)</span>&nbsp;<span class="op" id="2853705">-</span>&nbsp;<span class="num" id="2853707">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2853710">year</span><span class="op" id="2853714">,</span>&nbsp;<span class="ident" id="2853716">m</span>&nbsp;<span class="op" id="2853718">=</span>&nbsp;<span class="ident" id="2853720">norm</span><span class="op" id="2853724">(</span><span class="ident" id="2853725">year</span><span class="op" id="2853729">,</span>&nbsp;<span class="ident" id="2853731">m</span><span class="op" id="2853732">,</span>&nbsp;<span class="num" id="2853734">12</span><span class="op" id="2853736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2853739">month</span>&nbsp;<span class="op" id="2853745">=</span>&nbsp;<span class="ident" id="2853747">Month</span><span class="op" id="2853752">(</span><span class="ident" id="2853753">m</span><span class="op" id="2853754">)</span>&nbsp;<span class="op" id="2853756">+</span>&nbsp;<span class="num" id="2853758">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2853762">//&nbsp;Normalize&nbsp;nsec,&nbsp;sec,&nbsp;min,&nbsp;hour,&nbsp;overflowing&nbsp;into&nbsp;day.</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2853820">sec</span><span class="op" id="2853823">,</span>&nbsp;<span class="ident" id="2853825">nsec</span>&nbsp;<span class="op" id="2853830">=</span>&nbsp;<span class="ident" id="2853832">norm</span><span class="op" id="2853836">(</span><span class="ident" id="2853837">sec</span><span class="op" id="2853840">,</span>&nbsp;<span class="ident" id="2853842">nsec</span><span class="op" id="2853846">,</span>&nbsp;<span class="num" id="2853848">1e9</span><span class="op" id="2853851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2853854">min</span><span class="op" id="2853857">,</span>&nbsp;<span class="ident" id="2853859">sec</span>&nbsp;<span class="op" id="2853863">=</span>&nbsp;<span class="ident" id="2853865">norm</span><span class="op" id="2853869">(</span><span class="ident" id="2853870">min</span><span class="op" id="2853873">,</span>&nbsp;<span class="ident" id="2853875">sec</span><span class="op" id="2853878">,</span>&nbsp;<span class="num" id="2853880">60</span><span class="op" id="2853882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2853885">hour</span><span class="op" id="2853889">,</span>&nbsp;<span class="ident" id="2853891">min</span>&nbsp;<span class="op" id="2853895">=</span>&nbsp;<span class="ident" id="2853897">norm</span><span class="op" id="2853901">(</span><span class="ident" id="2853902">hour</span><span class="op" id="2853906">,</span>&nbsp;<span class="ident" id="2853908">min</span><span class="op" id="2853911">,</span>&nbsp;<span class="num" id="2853913">60</span><span class="op" id="2853915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2853918">day</span><span class="op" id="2853921">,</span>&nbsp;<span class="ident" id="2853923">hour</span>&nbsp;<span class="op" id="2853928">=</span>&nbsp;<span class="ident" id="2853930">norm</span><span class="op" id="2853934">(</span><span class="ident" id="2853935">day</span><span class="op" id="2853938">,</span>&nbsp;<span class="ident" id="2853940">hour</span><span class="op" id="2853944">,</span>&nbsp;<span class="num" id="2853946">24</span><span class="op" id="2853948">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2853952">y</span>&nbsp;<span class="op" id="2853954">:=</span>&nbsp;<span class="ident" id="2853957">uint64</span><span class="op" id="2853963">(</span><span class="ident" id="2853964">int64</span><span class="op" id="2853969">(</span><span class="ident" id="2853970">year</span><span class="op" id="2853974">)</span>&nbsp;<span class="op" id="2853976">-</span>&nbsp;<span class="ident" id="2853978">absoluteZeroYear</span><span class="op" id="2853994">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2853998">//&nbsp;Compute&nbsp;days&nbsp;since&nbsp;the&nbsp;absolute&nbsp;epoch.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2854042">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;from&nbsp;400-year&nbsp;cycles.</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854080">n</span>&nbsp;<span class="op" id="2854082">:=</span>&nbsp;<span class="ident" id="2854085">y</span>&nbsp;<span class="op" id="2854087">/</span>&nbsp;<span class="num" id="2854089">400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854094">y</span>&nbsp;<span class="op" id="2854096">-=</span>&nbsp;<span class="num" id="2854099">400</span>&nbsp;<span class="op" id="2854103">*</span>&nbsp;<span class="ident" id="2854105">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854108">d</span>&nbsp;<span class="op" id="2854110">:=</span>&nbsp;<span class="ident" id="2854113">daysPer400Years</span>&nbsp;<span class="op" id="2854129">*</span>&nbsp;<span class="ident" id="2854131">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2854135">//&nbsp;Add&nbsp;in&nbsp;100-year&nbsp;cycles.</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854163">n</span>&nbsp;<span class="op" id="2854165">=</span>&nbsp;<span class="ident" id="2854167">y</span>&nbsp;<span class="op" id="2854169">/</span>&nbsp;<span class="num" id="2854171">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854176">y</span>&nbsp;<span class="op" id="2854178">-=</span>&nbsp;<span class="num" id="2854181">100</span>&nbsp;<span class="op" id="2854185">*</span>&nbsp;<span class="ident" id="2854187">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854190">d</span>&nbsp;<span class="op" id="2854192">+=</span>&nbsp;<span class="ident" id="2854195">daysPer100Years</span>&nbsp;<span class="op" id="2854211">*</span>&nbsp;<span class="ident" id="2854213">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2854217">//&nbsp;Add&nbsp;in&nbsp;4-year&nbsp;cycles.</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854243">n</span>&nbsp;<span class="op" id="2854245">=</span>&nbsp;<span class="ident" id="2854247">y</span>&nbsp;<span class="op" id="2854249">/</span>&nbsp;<span class="num" id="2854251">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854254">y</span>&nbsp;<span class="op" id="2854256">-=</span>&nbsp;<span class="num" id="2854259">4</span>&nbsp;<span class="op" id="2854261">*</span>&nbsp;<span class="ident" id="2854263">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854266">d</span>&nbsp;<span class="op" id="2854268">+=</span>&nbsp;<span class="ident" id="2854271">daysPer4Years</span>&nbsp;<span class="op" id="2854285">*</span>&nbsp;<span class="ident" id="2854287">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2854291">//&nbsp;Add&nbsp;in&nbsp;non-leap&nbsp;years.</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854318">n</span>&nbsp;<span class="op" id="2854320">=</span>&nbsp;<span class="ident" id="2854322">y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854325">d</span>&nbsp;<span class="op" id="2854327">+=</span>&nbsp;<span class="num" id="2854330">365</span>&nbsp;<span class="op" id="2854334">*</span>&nbsp;<span class="ident" id="2854336">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2854340">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;before&nbsp;this&nbsp;month.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854375">d</span>&nbsp;<span class="op" id="2854377">+=</span>&nbsp;<span class="ident" id="2854380">uint64</span><span class="op" id="2854386">(</span><span class="ident" id="2854387">daysBefore</span><span class="op" id="2854397">[</span><span class="ident" id="2854398">month</span><span class="op" id="2854403">-</span><span class="num" id="2854404">1</span><span class="op" id="2854405">]</span><span class="op" id="2854406">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2854409">if</span>&nbsp;<span class="ident" id="2854412">isLeap</span><span class="op" id="2854418">(</span><span class="ident" id="2854419">year</span><span class="op" id="2854423">)</span>&nbsp;<span class="op" id="2854425">&amp;&amp;</span>&nbsp;<span class="ident" id="2854428">month</span>&nbsp;<span class="op" id="2854434">&gt;=</span>&nbsp;<span class="ident" id="2854437">March</span>&nbsp;<span class="op" id="2854443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854447">d</span><span class="op" id="2854448">++</span>&nbsp;<span class="comment" id="2854451">//&nbsp;February&nbsp;29</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2854467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2854471">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;before&nbsp;today.</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854501">d</span>&nbsp;<span class="op" id="2854503">+=</span>&nbsp;<span class="ident" id="2854506">uint64</span><span class="op" id="2854512">(</span><span class="ident" id="2854513">day</span>&nbsp;<span class="op" id="2854517">-</span>&nbsp;<span class="num" id="2854519">1</span><span class="op" id="2854520">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2854524">//&nbsp;Add&nbsp;in&nbsp;time&nbsp;elapsed&nbsp;today.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854555">abs</span>&nbsp;<span class="op" id="2854559">:=</span>&nbsp;<span class="ident" id="2854562">d</span>&nbsp;<span class="op" id="2854564">*</span>&nbsp;<span class="ident" id="2854566">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854581">abs</span>&nbsp;<span class="op" id="2854585">+=</span>&nbsp;<span class="ident" id="2854588">uint64</span><span class="op" id="2854594">(</span><span class="ident" id="2854595">hour</span><span class="op" id="2854599">*</span><span class="ident" id="2854600">secondsPerHour</span>&nbsp;<span class="op" id="2854615">+</span>&nbsp;<span class="ident" id="2854617">min</span><span class="op" id="2854620">*</span><span class="ident" id="2854621">secondsPerMinute</span>&nbsp;<span class="op" id="2854638">+</span>&nbsp;<span class="ident" id="2854640">sec</span><span class="op" id="2854643">)</span><br>
<span class="lineno">1070</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854647">unix</span>&nbsp;<span class="op" id="2854652">:=</span>&nbsp;<span class="ident" id="2854655">int64</span><span class="op" id="2854660">(</span><span class="ident" id="2854661">abs</span><span class="op" id="2854664">)</span>&nbsp;<span class="op" id="2854666">+</span>&nbsp;<span class="op" id="2854668">(</span><span class="ident" id="2854669">absoluteToInternal</span>&nbsp;<span class="op" id="2854688">+</span>&nbsp;<span class="ident" id="2854690">internalToUnix</span><span class="op" id="2854704">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2854708">//&nbsp;Look&nbsp;for&nbsp;zone&nbsp;offset&nbsp;for&nbsp;t,&nbsp;so&nbsp;we&nbsp;can&nbsp;adjust&nbsp;to&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2854765">//&nbsp;The&nbsp;lookup&nbsp;function&nbsp;expects&nbsp;UTC,&nbsp;so&nbsp;we&nbsp;pass&nbsp;t&nbsp;in&nbsp;the</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2854822">//&nbsp;hope&nbsp;that&nbsp;it&nbsp;will&nbsp;not&nbsp;be&nbsp;too&nbsp;close&nbsp;to&nbsp;a&nbsp;zone&nbsp;transition,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2854883">//&nbsp;and&nbsp;then&nbsp;adjust&nbsp;if&nbsp;it&nbsp;is.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2854913">_</span><span class="op" id="2854914">,</span>&nbsp;<span class="ident" id="2854916">offset</span><span class="op" id="2854922">,</span>&nbsp;<span class="ident" id="2854924">_</span><span class="op" id="2854925">,</span>&nbsp;<span class="ident" id="2854927">start</span><span class="op" id="2854932">,</span>&nbsp;<span class="ident" id="2854934">end</span>&nbsp;<span class="op" id="2854938">:=</span>&nbsp;<span class="ident" id="2854941">loc</span><span class="op" id="2854944">.</span><span class="ident" id="2854945">lookup</span><span class="op" id="2854951">(</span><span class="ident" id="2854952">unix</span><span class="op" id="2854956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2854959">if</span>&nbsp;<span class="ident" id="2854962">offset</span>&nbsp;<span class="op" id="2854969">!=</span>&nbsp;<span class="num" id="2854972">0</span>&nbsp;<span class="op" id="2854974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2854978">switch</span>&nbsp;<span class="ident" id="2854985">utc</span>&nbsp;<span class="op" id="2854989">:=</span>&nbsp;<span class="ident" id="2854992">unix</span>&nbsp;<span class="op" id="2854997">-</span>&nbsp;<span class="ident" id="2854999">int64</span><span class="op" id="2855004">(</span><span class="ident" id="2855005">offset</span><span class="op" id="2855011">)</span><span class="op" id="2855012">;</span>&nbsp;<span class="op" id="2855014">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2855018">case</span>&nbsp;<span class="ident" id="2855023">utc</span>&nbsp;<span class="op" id="2855027">&lt;</span>&nbsp;<span class="ident" id="2855029">start</span><span class="op" id="2855034">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2855039">_</span><span class="op" id="2855040">,</span>&nbsp;<span class="ident" id="2855042">offset</span><span class="op" id="2855048">,</span>&nbsp;<span class="ident" id="2855050">_</span><span class="op" id="2855051">,</span>&nbsp;<span class="ident" id="2855053">_</span><span class="op" id="2855054">,</span>&nbsp;<span class="ident" id="2855056">_</span>&nbsp;<span class="op" id="2855058">=</span>&nbsp;<span class="ident" id="2855060">loc</span><span class="op" id="2855063">.</span><span class="ident" id="2855064">lookup</span><span class="op" id="2855070">(</span><span class="ident" id="2855071">start</span>&nbsp;<span class="op" id="2855077">-</span>&nbsp;<span class="num" id="2855079">1</span><span class="op" id="2855080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2855084">case</span>&nbsp;<span class="ident" id="2855089">utc</span>&nbsp;<span class="op" id="2855093">&gt;=</span>&nbsp;<span class="ident" id="2855096">end</span><span class="op" id="2855099">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2855104">_</span><span class="op" id="2855105">,</span>&nbsp;<span class="ident" id="2855107">offset</span><span class="op" id="2855113">,</span>&nbsp;<span class="ident" id="2855115">_</span><span class="op" id="2855116">,</span>&nbsp;<span class="ident" id="2855118">_</span><span class="op" id="2855119">,</span>&nbsp;<span class="ident" id="2855121">_</span>&nbsp;<span class="op" id="2855123">=</span>&nbsp;<span class="ident" id="2855125">loc</span><span class="op" id="2855128">.</span><span class="ident" id="2855129">lookup</span><span class="op" id="2855135">(</span><span class="ident" id="2855136">end</span><span class="op" id="2855139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2855143">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2855147">unix</span>&nbsp;<span class="op" id="2855152">-=</span>&nbsp;<span class="ident" id="2855155">int64</span><span class="op" id="2855160">(</span><span class="ident" id="2855161">offset</span><span class="op" id="2855167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2855170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2855174">return</span>&nbsp;<span class="ident" id="2855181">Time</span><span class="op" id="2855185">{</span><span class="ident" id="2855186">unix</span>&nbsp;<span class="op" id="2855191">+</span>&nbsp;<span class="ident" id="2855193">unixToInternal</span><span class="op" id="2855207">,</span>&nbsp;<span class="builtintype" id="2855209">int32</span><span class="op" id="2855214">(</span><span class="ident" id="2855215">nsec</span><span class="op" id="2855219">)</span><span class="op" id="2855220">,</span>&nbsp;<span class="ident" id="2855222">loc</span><span class="op" id="2855225">}</span><br>
<span class="lineno"></span><span class="op" id="2855227">}</span><br>
<span class="lineno">1090</span><br>
<span class="lineno"></span><span class="comment" id="2855230">//&nbsp;Truncate&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;t&nbsp;down&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;d&nbsp;(since&nbsp;the&nbsp;zero&nbsp;time).</span><br>
<span class="lineno"></span><span class="comment" id="2855322">//&nbsp;If&nbsp;d&nbsp;&lt;=&nbsp;0,&nbsp;Truncate&nbsp;returns&nbsp;t&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2855366">func</span>&nbsp;<span class="op" id="2855371">(</span><span class="ident" id="2855372">t</span>&nbsp;<span class="ident" id="2855374">Time</span><span class="op" id="2855378">)</span>&nbsp;<span class="ident" id="2855380">Truncate</span><span class="op" id="2855388">(</span><span class="ident" id="2855389">d</span>&nbsp;<span class="ident" id="2855391">Duration</span><span class="op" id="2855399">)</span>&nbsp;<span class="ident" id="2855401">Time</span>&nbsp;<span class="op" id="2855406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2855409">if</span>&nbsp;<span class="ident" id="2855412">d</span>&nbsp;<span class="op" id="2855414">&lt;=</span>&nbsp;<span class="num" id="2855417">0</span>&nbsp;<span class="op" id="2855419">{</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2855423">return</span>&nbsp;<span class="ident" id="2855430">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2855433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2855436">_</span><span class="op" id="2855437">,</span>&nbsp;<span class="ident" id="2855439">r</span>&nbsp;<span class="op" id="2855441">:=</span>&nbsp;<span class="ident" id="2855444">div</span><span class="op" id="2855447">(</span><span class="ident" id="2855448">t</span><span class="op" id="2855449">,</span>&nbsp;<span class="ident" id="2855451">d</span><span class="op" id="2855452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2855455">return</span>&nbsp;<span class="ident" id="2855462">t</span><span class="op" id="2855463">.</span><span class="ident" id="2855464">Add</span><span class="op" id="2855467">(</span><span class="op" id="2855468">-</span><span class="ident" id="2855469">r</span><span class="op" id="2855470">)</span><br>
<span class="lineno"></span><span class="op" id="2855472">}</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span><span class="comment" id="2855475">//&nbsp;Round&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;t&nbsp;to&nbsp;the&nbsp;nearest&nbsp;multiple&nbsp;of&nbsp;d&nbsp;(since&nbsp;the&nbsp;zero&nbsp;time).</span><br>
<span class="lineno"></span><span class="comment" id="2855569">//&nbsp;The&nbsp;rounding&nbsp;behavior&nbsp;for&nbsp;halfway&nbsp;values&nbsp;is&nbsp;to&nbsp;round&nbsp;up.</span><br>
<span class="lineno"></span><span class="comment" id="2855629">//&nbsp;If&nbsp;d&nbsp;&lt;=&nbsp;0,&nbsp;Round&nbsp;returns&nbsp;t&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2855670">func</span>&nbsp;<span class="op" id="2855675">(</span><span class="ident" id="2855676">t</span>&nbsp;<span class="ident" id="2855678">Time</span><span class="op" id="2855682">)</span>&nbsp;<span class="ident" id="2855684">Round</span><span class="op" id="2855689">(</span><span class="ident" id="2855690">d</span>&nbsp;<span class="ident" id="2855692">Duration</span><span class="op" id="2855700">)</span>&nbsp;<span class="ident" id="2855702">Time</span>&nbsp;<span class="op" id="2855707">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2855710">if</span>&nbsp;<span class="ident" id="2855713">d</span>&nbsp;<span class="op" id="2855715">&lt;=</span>&nbsp;<span class="num" id="2855718">0</span>&nbsp;<span class="op" id="2855720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2855724">return</span>&nbsp;<span class="ident" id="2855731">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2855734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2855737">_</span><span class="op" id="2855738">,</span>&nbsp;<span class="ident" id="2855740">r</span>&nbsp;<span class="op" id="2855742">:=</span>&nbsp;<span class="ident" id="2855745">div</span><span class="op" id="2855748">(</span><span class="ident" id="2855749">t</span><span class="op" id="2855750">,</span>&nbsp;<span class="ident" id="2855752">d</span><span class="op" id="2855753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2855756">if</span>&nbsp;<span class="ident" id="2855759">r</span><span class="op" id="2855760">+</span><span class="ident" id="2855761">r</span>&nbsp;<span class="op" id="2855763">&lt;</span>&nbsp;<span class="ident" id="2855765">d</span>&nbsp;<span class="op" id="2855767">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2855771">return</span>&nbsp;<span class="ident" id="2855778">t</span><span class="op" id="2855779">.</span><span class="ident" id="2855780">Add</span><span class="op" id="2855783">(</span><span class="op" id="2855784">-</span><span class="ident" id="2855785">r</span><span class="op" id="2855786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2855789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2855792">return</span>&nbsp;<span class="ident" id="2855799">t</span><span class="op" id="2855800">.</span><span class="ident" id="2855801">Add</span><span class="op" id="2855804">(</span><span class="ident" id="2855805">d</span>&nbsp;<span class="op" id="2855807">-</span>&nbsp;<span class="ident" id="2855809">r</span><span class="op" id="2855810">)</span><br>
<span class="lineno"></span><span class="op" id="2855812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span><span class="comment" id="2855815">//&nbsp;div&nbsp;divides&nbsp;t&nbsp;by&nbsp;d&nbsp;and&nbsp;returns&nbsp;the&nbsp;quotient&nbsp;parity&nbsp;and&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="2855884">//&nbsp;We&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;quotient&nbsp;parity&nbsp;anymore&nbsp;(round&nbsp;half&nbsp;up&nbsp;instead&nbsp;of&nbsp;round&nbsp;to&nbsp;even)</span><br>
<span class="lineno"></span><span class="comment" id="2855969">//&nbsp;but&nbsp;it&#39;s&nbsp;still&nbsp;here&nbsp;in&nbsp;case&nbsp;we&nbsp;change&nbsp;our&nbsp;minds.</span><br>
<span class="lineno"></span><span class="keyword" id="2856021">func</span>&nbsp;<span class="ident" id="2856026">div</span><span class="op" id="2856029">(</span><span class="ident" id="2856030">t</span>&nbsp;<span class="ident" id="2856032">Time</span><span class="op" id="2856036">,</span>&nbsp;<span class="ident" id="2856038">d</span>&nbsp;<span class="ident" id="2856040">Duration</span><span class="op" id="2856048">)</span>&nbsp;<span class="op" id="2856050">(</span><span class="ident" id="2856051">qmod2</span>&nbsp;<span class="builtintype" id="2856057">int</span><span class="op" id="2856060">,</span>&nbsp;<span class="ident" id="2856062">r</span>&nbsp;<span class="ident" id="2856064">Duration</span><span class="op" id="2856072">)</span>&nbsp;<span class="op" id="2856074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856077">neg</span>&nbsp;<span class="op" id="2856081">:=</span>&nbsp;<span class="builtintype" id="2856084">false</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856091">nsec</span>&nbsp;<span class="op" id="2856096">:=</span>&nbsp;<span class="builtintype" id="2856099">int32</span><span class="op" id="2856104">(</span><span class="ident" id="2856105">t</span><span class="op" id="2856106">.</span><span class="ident" id="2856107">nsec</span><span class="op" id="2856111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2856114">if</span>&nbsp;<span class="ident" id="2856117">t</span><span class="op" id="2856118">.</span><span class="ident" id="2856119">sec</span>&nbsp;<span class="op" id="2856123">&lt;</span>&nbsp;<span class="num" id="2856125">0</span>&nbsp;<span class="op" id="2856127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856131">//&nbsp;Operate&nbsp;on&nbsp;absolute&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856163">neg</span>&nbsp;<span class="op" id="2856167">=</span>&nbsp;<span class="builtintype" id="2856169">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856176">t</span><span class="op" id="2856177">.</span><span class="ident" id="2856178">sec</span>&nbsp;<span class="op" id="2856182">=</span>&nbsp;<span class="op" id="2856184">-</span><span class="ident" id="2856185">t</span><span class="op" id="2856186">.</span><span class="ident" id="2856187">sec</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856193">nsec</span>&nbsp;<span class="op" id="2856198">=</span>&nbsp;<span class="op" id="2856200">-</span><span class="ident" id="2856201">nsec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2856208">if</span>&nbsp;<span class="ident" id="2856211">nsec</span>&nbsp;<span class="op" id="2856216">&lt;</span>&nbsp;<span class="num" id="2856218">0</span>&nbsp;<span class="op" id="2856220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856225">nsec</span>&nbsp;<span class="op" id="2856230">+=</span>&nbsp;<span class="num" id="2856233">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856240">t</span><span class="op" id="2856241">.</span><span class="ident" id="2856242">sec</span><span class="op" id="2856245">--</span>&nbsp;<span class="comment" id="2856248">//&nbsp;t.sec&nbsp;&gt;=&nbsp;1&nbsp;before&nbsp;the&nbsp;--&nbsp;so&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2856286">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2856289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2856293">switch</span>&nbsp;<span class="op" id="2856300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856303">//&nbsp;Special&nbsp;case:&nbsp;2d&nbsp;divides&nbsp;1&nbsp;second.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2856342">case</span>&nbsp;<span class="ident" id="2856347">d</span>&nbsp;<span class="op" id="2856349">&lt;</span>&nbsp;<span class="ident" id="2856351">Second</span>&nbsp;<span class="op" id="2856358">&amp;&amp;</span>&nbsp;<span class="ident" id="2856361">Second</span><span class="op" id="2856367">%</span><span class="op" id="2856368">(</span><span class="ident" id="2856369">d</span><span class="op" id="2856370">+</span><span class="ident" id="2856371">d</span><span class="op" id="2856372">)</span>&nbsp;<span class="op" id="2856374">==</span>&nbsp;<span class="num" id="2856377">0</span><span class="op" id="2856378">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856382">qmod2</span>&nbsp;<span class="op" id="2856388">=</span>&nbsp;<span class="builtintype" id="2856390">int</span><span class="op" id="2856393">(</span><span class="ident" id="2856394">nsec</span><span class="op" id="2856398">/</span><span class="builtintype" id="2856399">int32</span><span class="op" id="2856404">(</span><span class="ident" id="2856405">d</span><span class="op" id="2856406">)</span><span class="op" id="2856407">)</span>&nbsp;<span class="op" id="2856409">&amp;</span>&nbsp;<span class="num" id="2856411">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856415">r</span>&nbsp;<span class="op" id="2856417">=</span>&nbsp;<span class="ident" id="2856419">Duration</span><span class="op" id="2856427">(</span><span class="ident" id="2856428">nsec</span>&nbsp;<span class="op" id="2856433">%</span>&nbsp;<span class="builtintype" id="2856435">int32</span><span class="op" id="2856440">(</span><span class="ident" id="2856441">d</span><span class="op" id="2856442">)</span><span class="op" id="2856443">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856447">//&nbsp;Special&nbsp;case:&nbsp;d&nbsp;is&nbsp;a&nbsp;multiple&nbsp;of&nbsp;1&nbsp;second.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2856494">case</span>&nbsp;<span class="ident" id="2856499">d</span><span class="op" id="2856500">%</span><span class="ident" id="2856501">Second</span>&nbsp;<span class="op" id="2856508">==</span>&nbsp;<span class="num" id="2856511">0</span><span class="op" id="2856512">:</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856516">d1</span>&nbsp;<span class="op" id="2856519">:=</span>&nbsp;<span class="ident" id="2856522">int64</span><span class="op" id="2856527">(</span><span class="ident" id="2856528">d</span>&nbsp;<span class="op" id="2856530">/</span>&nbsp;<span class="ident" id="2856532">Second</span><span class="op" id="2856538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856542">qmod2</span>&nbsp;<span class="op" id="2856548">=</span>&nbsp;<span class="builtintype" id="2856550">int</span><span class="op" id="2856553">(</span><span class="ident" id="2856554">t</span><span class="op" id="2856555">.</span><span class="ident" id="2856556">sec</span><span class="op" id="2856559">/</span><span class="ident" id="2856560">d1</span><span class="op" id="2856562">)</span>&nbsp;<span class="op" id="2856564">&amp;</span>&nbsp;<span class="num" id="2856566">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856570">r</span>&nbsp;<span class="op" id="2856572">=</span>&nbsp;<span class="ident" id="2856574">Duration</span><span class="op" id="2856582">(</span><span class="ident" id="2856583">t</span><span class="op" id="2856584">.</span><span class="ident" id="2856585">sec</span><span class="op" id="2856588">%</span><span class="ident" id="2856589">d1</span><span class="op" id="2856591">)</span><span class="op" id="2856592">*</span><span class="ident" id="2856593">Second</span>&nbsp;<span class="op" id="2856600">+</span>&nbsp;<span class="ident" id="2856602">Duration</span><span class="op" id="2856610">(</span><span class="ident" id="2856611">nsec</span><span class="op" id="2856615">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856619">//&nbsp;General&nbsp;case.</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856637">//&nbsp;This&nbsp;could&nbsp;be&nbsp;faster&nbsp;if&nbsp;more&nbsp;cleverness&nbsp;were&nbsp;applied,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856695">//&nbsp;but&nbsp;it&#39;s&nbsp;really&nbsp;only&nbsp;here&nbsp;to&nbsp;avoid&nbsp;special&nbsp;case&nbsp;restrictions&nbsp;in&nbsp;the&nbsp;API.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856772">//&nbsp;No&nbsp;one&nbsp;will&nbsp;care&nbsp;about&nbsp;these&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2856812">default</span><span class="op" id="2856819">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856823">//&nbsp;Compute&nbsp;nanoseconds&nbsp;as&nbsp;128-bit&nbsp;number.</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856867">sec</span>&nbsp;<span class="op" id="2856871">:=</span>&nbsp;<span class="ident" id="2856874">uint64</span><span class="op" id="2856880">(</span><span class="ident" id="2856881">t</span><span class="op" id="2856882">.</span><span class="ident" id="2856883">sec</span><span class="op" id="2856886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856890">tmp</span>&nbsp;<span class="op" id="2856894">:=</span>&nbsp;<span class="op" id="2856897">(</span><span class="ident" id="2856898">sec</span>&nbsp;<span class="op" id="2856902">&gt;&gt;</span>&nbsp;<span class="num" id="2856905">32</span><span class="op" id="2856907">)</span>&nbsp;<span class="op" id="2856909">*</span>&nbsp;<span class="num" id="2856911">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856917">u1</span>&nbsp;<span class="op" id="2856920">:=</span>&nbsp;<span class="ident" id="2856923">tmp</span>&nbsp;<span class="op" id="2856927">&gt;&gt;</span>&nbsp;<span class="num" id="2856930">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856935">u0</span>&nbsp;<span class="op" id="2856938">:=</span>&nbsp;<span class="ident" id="2856941">tmp</span>&nbsp;<span class="op" id="2856945">&lt;&lt;</span>&nbsp;<span class="num" id="2856948">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856953">tmp</span>&nbsp;<span class="op" id="2856957">=</span>&nbsp;<span class="ident" id="2856959">uint64</span><span class="op" id="2856965">(</span><span class="ident" id="2856966">sec</span><span class="op" id="2856969">&amp;</span><span class="num" id="2856970">0xFFFFFFFF</span><span class="op" id="2856980">)</span>&nbsp;<span class="op" id="2856982">*</span>&nbsp;<span class="num" id="2856984">1e9</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856990">u0x</span><span class="op" id="2856993">,</span>&nbsp;<span class="ident" id="2856995">u0</span>&nbsp;<span class="op" id="2856998">:=</span>&nbsp;<span class="ident" id="2857001">u0</span><span class="op" id="2857003">,</span>&nbsp;<span class="ident" id="2857005">u0</span><span class="op" id="2857007">+</span><span class="ident" id="2857008">tmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857014">if</span>&nbsp;<span class="ident" id="2857017">u0</span>&nbsp;<span class="op" id="2857020">&lt;</span>&nbsp;<span class="ident" id="2857022">u0x</span>&nbsp;<span class="op" id="2857026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857031">u1</span><span class="op" id="2857033">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857042">u0x</span><span class="op" id="2857045">,</span>&nbsp;<span class="ident" id="2857047">u0</span>&nbsp;<span class="op" id="2857050">=</span>&nbsp;<span class="ident" id="2857052">u0</span><span class="op" id="2857054">,</span>&nbsp;<span class="ident" id="2857056">u0</span><span class="op" id="2857058">+</span><span class="ident" id="2857059">uint64</span><span class="op" id="2857065">(</span><span class="ident" id="2857066">nsec</span><span class="op" id="2857070">)</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857074">if</span>&nbsp;<span class="ident" id="2857077">u0</span>&nbsp;<span class="op" id="2857080">&lt;</span>&nbsp;<span class="ident" id="2857082">u0x</span>&nbsp;<span class="op" id="2857086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857091">u1</span><span class="op" id="2857093">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857103">//&nbsp;Compute&nbsp;remainder&nbsp;by&nbsp;subtracting&nbsp;r&lt;&lt;k&nbsp;for&nbsp;decreasing&nbsp;k.</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857164">//&nbsp;Quotient&nbsp;parity&nbsp;is&nbsp;whether&nbsp;we&nbsp;subtract&nbsp;on&nbsp;last&nbsp;round.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857223">d1</span>&nbsp;<span class="op" id="2857226">:=</span>&nbsp;<span class="ident" id="2857229">uint64</span><span class="op" id="2857235">(</span><span class="ident" id="2857236">d</span><span class="op" id="2857237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857241">for</span>&nbsp;<span class="ident" id="2857245">d1</span><span class="op" id="2857247">&gt;&gt;</span><span class="num" id="2857249">63</span>&nbsp;<span class="op" id="2857252">!=</span>&nbsp;<span class="num" id="2857255">1</span>&nbsp;<span class="op" id="2857257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857262">d1</span>&nbsp;<span class="op" id="2857265">&lt;&lt;=</span>&nbsp;<span class="num" id="2857269">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857273">}</span><br>
<span class="lineno">1170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857277">d0</span>&nbsp;<span class="op" id="2857280">:=</span>&nbsp;<span class="ident" id="2857283">uint64</span><span class="op" id="2857289">(</span><span class="num" id="2857290">0</span><span class="op" id="2857291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857295">for</span>&nbsp;<span class="op" id="2857299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857304">qmod2</span>&nbsp;<span class="op" id="2857310">=</span>&nbsp;<span class="num" id="2857312">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857317">if</span>&nbsp;<span class="ident" id="2857320">u1</span>&nbsp;<span class="op" id="2857323">&gt;</span>&nbsp;<span class="ident" id="2857325">d1</span>&nbsp;<span class="op" id="2857328">||</span>&nbsp;<span class="ident" id="2857331">u1</span>&nbsp;<span class="op" id="2857334">==</span>&nbsp;<span class="ident" id="2857337">d1</span>&nbsp;<span class="op" id="2857340">&amp;&amp;</span>&nbsp;<span class="ident" id="2857343">u0</span>&nbsp;<span class="op" id="2857346">&gt;=</span>&nbsp;<span class="ident" id="2857349">d0</span>&nbsp;<span class="op" id="2857352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857358">//&nbsp;subtract</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857374">qmod2</span>&nbsp;<span class="op" id="2857380">=</span>&nbsp;<span class="num" id="2857382">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857388">u0x</span><span class="op" id="2857391">,</span>&nbsp;<span class="ident" id="2857393">u0</span>&nbsp;<span class="op" id="2857396">=</span>&nbsp;<span class="ident" id="2857398">u0</span><span class="op" id="2857400">,</span>&nbsp;<span class="ident" id="2857402">u0</span><span class="op" id="2857404">-</span><span class="ident" id="2857405">d0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857412">if</span>&nbsp;<span class="ident" id="2857415">u0</span>&nbsp;<span class="op" id="2857418">&gt;</span>&nbsp;<span class="ident" id="2857420">u0x</span>&nbsp;<span class="op" id="2857424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857431">u1</span><span class="op" id="2857433">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857440">}</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857446">u1</span>&nbsp;<span class="op" id="2857449">-=</span>&nbsp;<span class="ident" id="2857452">d1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857463">if</span>&nbsp;<span class="ident" id="2857466">d1</span>&nbsp;<span class="op" id="2857469">==</span>&nbsp;<span class="num" id="2857472">0</span>&nbsp;<span class="op" id="2857474">&amp;&amp;</span>&nbsp;<span class="ident" id="2857477">d0</span>&nbsp;<span class="op" id="2857480">==</span>&nbsp;<span class="ident" id="2857483">uint64</span><span class="op" id="2857489">(</span><span class="ident" id="2857490">d</span><span class="op" id="2857491">)</span>&nbsp;<span class="op" id="2857493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857499">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857508">}</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857513">d0</span>&nbsp;<span class="op" id="2857516">&gt;&gt;=</span>&nbsp;<span class="num" id="2857520">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857525">d0</span>&nbsp;<span class="op" id="2857528">|=</span>&nbsp;<span class="op" id="2857531">(</span><span class="ident" id="2857532">d1</span>&nbsp;<span class="op" id="2857535">&amp;</span>&nbsp;<span class="num" id="2857537">1</span><span class="op" id="2857538">)</span>&nbsp;<span class="op" id="2857540">&lt;&lt;</span>&nbsp;<span class="num" id="2857543">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857549">d1</span>&nbsp;<span class="op" id="2857552">&gt;&gt;=</span>&nbsp;<span class="num" id="2857556">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857564">r</span>&nbsp;<span class="op" id="2857566">=</span>&nbsp;<span class="ident" id="2857568">Duration</span><span class="op" id="2857576">(</span><span class="ident" id="2857577">u0</span><span class="op" id="2857579">)</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857586">if</span>&nbsp;<span class="ident" id="2857589">neg</span>&nbsp;<span class="op" id="2857593">&amp;&amp;</span>&nbsp;<span class="ident" id="2857596">r</span>&nbsp;<span class="op" id="2857598">!=</span>&nbsp;<span class="num" id="2857601">0</span>&nbsp;<span class="op" id="2857603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857607">//&nbsp;If&nbsp;input&nbsp;was&nbsp;negative&nbsp;and&nbsp;not&nbsp;an&nbsp;exact&nbsp;multiple&nbsp;of&nbsp;d,&nbsp;we&nbsp;computed&nbsp;q,&nbsp;r&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857693">//&nbsp;&nbsp;&nbsp;&nbspq*d&nbsp;+&nbsp;r&nbsp;=&nbsp;-t</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857711">//&nbsp;But&nbsp;the&nbsp;right&nbsp;answers&nbsp;are&nbsp;given&nbsp;by&nbsp;-(q-1),&nbsp;d-r:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857764">//&nbsp;&nbsp;&nbsp;&nbspq*d&nbsp;+&nbsp;r&nbsp;=&nbsp;-t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857782">//&nbsp;&nbsp;&nbsp;&nbsp-q*d&nbsp;-&nbsp;r&nbsp;=&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857800">//&nbsp;&nbsp;&nbsp;&nbsp-(q-1)*d&nbsp;+&nbsp;(d&nbsp;-&nbsp;r)&nbsp;=&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857828">qmod2</span>&nbsp;<span class="op" id="2857834">^=</span>&nbsp;<span class="num" id="2857837">1</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857841">r</span>&nbsp;<span class="op" id="2857843">=</span>&nbsp;<span class="ident" id="2857845">d</span>&nbsp;<span class="op" id="2857847">-</span>&nbsp;<span class="ident" id="2857849">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857855">return</span><br>
<span class="lineno"></span><span class="op" id="2857862">}</span>
</div>
</body>
</html>
