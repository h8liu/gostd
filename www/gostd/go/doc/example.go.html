<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html" class="current">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5462008">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5462063">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5462117">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5462168">//&nbsp;Extract&nbsp;example&nbsp;functions&nbsp;from&nbsp;file&nbsp;ASTs.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5462214">package</span>&nbsp;<span class="ident" id="5462222">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5462227">import</span>&nbsp;<span class="op" id="5462234">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5462237">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5462247">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5462259">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5462267">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5462277">&#34;sort&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5462285">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5462296">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5462307">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5462318">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5462333">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5462336">//&nbsp;An&nbsp;Example&nbsp;represents&nbsp;an&nbsp;example&nbsp;function&nbsp;found&nbsp;in&nbsp;a&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="5462406">type</span>&nbsp;<span class="ident" id="5462411">Example</span>&nbsp;<span class="keyword" id="5462419">struct</span>&nbsp;<span class="op" id="5462426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462429">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5462441">string</span>&nbsp;<span class="comment" id="5462448">//&nbsp;name&nbsp;of&nbsp;the&nbsp;item&nbsp;being&nbsp;exemplified</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462487">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5462499">string</span>&nbsp;<span class="comment" id="5462506">//&nbsp;example&nbsp;function&nbsp;doc&nbsp;string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462538">Code</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462550">ast</span><span class="op" id="5462553">.</span><span class="ident" id="5462554">Node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462560">Play</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5462572">*</span><span class="ident" id="5462573">ast</span><span class="op" id="5462576">.</span><span class="ident" id="5462577">File</span>&nbsp;<span class="comment" id="5462582">//&nbsp;a&nbsp;whole&nbsp;program&nbsp;version&nbsp;of&nbsp;the&nbsp;example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462625">Comments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5462637">[</span><span class="op" id="5462638">]</span><span class="op" id="5462639">*</span><span class="ident" id="5462640">ast</span><span class="op" id="5462643">.</span><span class="ident" id="5462644">CommentGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462658">Output</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5462670">string</span>&nbsp;<span class="comment" id="5462677">//&nbsp;expected&nbsp;output</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462697">EmptyOutput</span>&nbsp;<span class="builtintype" id="5462709">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5462716">//&nbsp;expect&nbsp;empty&nbsp;output</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462740">Order</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5462752">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5462759">//&nbsp;original&nbsp;source&nbsp;code&nbsp;order</span><br>
<span class="lineno"></span><span class="op" id="5462789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5462792">//&nbsp;Examples&nbsp;returns&nbsp;the&nbsp;examples&nbsp;found&nbsp;in&nbsp;the&nbsp;files,&nbsp;sorted&nbsp;by&nbsp;Name&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5462867">//&nbsp;The&nbsp;Order&nbsp;fields&nbsp;record&nbsp;the&nbsp;order&nbsp;in&nbsp;which&nbsp;the&nbsp;examples&nbsp;were&nbsp;encountered.</span><br>
<span class="lineno">35</span><span class="comment" id="5462944">//</span><br>
<span class="lineno"></span><span class="comment" id="5462947">//&nbsp;Playable&nbsp;Examples&nbsp;must&nbsp;be&nbsp;in&nbsp;a&nbsp;package&nbsp;whose&nbsp;name&nbsp;ends&nbsp;in&nbsp;&#34;_test&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5463017">//&nbsp;An&nbsp;Example&nbsp;is&nbsp;&#34;playable&#34;&nbsp;(the&nbsp;Play&nbsp;field&nbsp;is&nbsp;non-nil)&nbsp;in&nbsp;either&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5463092">//&nbsp;circumstances:</span><br>
<span class="lineno"></span><span class="comment" id="5463110">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;example&nbsp;function&nbsp;is&nbsp;self-contained:&nbsp;the&nbsp;function&nbsp;references&nbsp;only</span><br>
<span class="lineno">40</span><span class="comment" id="5463186">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;identifiers&nbsp;from&nbsp;other&nbsp;packages&nbsp;(or&nbsp;predeclared&nbsp;identifiers,&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="5463262">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;int&#34;)&nbsp;and&nbsp;the&nbsp;test&nbsp;file&nbsp;does&nbsp;not&nbsp;include&nbsp;a&nbsp;dot&nbsp;import.</span><br>
<span class="lineno"></span><span class="comment" id="5463325">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;entire&nbsp;test&nbsp;file&nbsp;is&nbsp;the&nbsp;example:&nbsp;the&nbsp;file&nbsp;contains&nbsp;exactly&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="5463399">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;example&nbsp;function,&nbsp;zero&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;functions,&nbsp;and&nbsp;at&nbsp;least&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="5463475">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top-level&nbsp;function,&nbsp;type,&nbsp;variable,&nbsp;or&nbsp;constant&nbsp;declaration&nbsp;other</span><br>
<span class="lineno">45</span><span class="comment" id="5463548">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;than&nbsp;the&nbsp;example&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="5463582">func</span>&nbsp;<span class="ident" id="5463587">Examples</span><span class="op" id="5463595">(</span><span class="ident" id="5463596">files</span>&nbsp;<span class="op" id="5463602">...</span><span class="op" id="5463605">*</span><span class="ident" id="5463606">ast</span><span class="op" id="5463609">.</span><span class="ident" id="5463610">File</span><span class="op" id="5463614">)</span>&nbsp;<span class="op" id="5463616">[</span><span class="op" id="5463617">]</span><span class="op" id="5463618">*</span><span class="ident" id="5463619">Example</span>&nbsp;<span class="op" id="5463627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463630">var</span>&nbsp;<span class="ident" id="5463634">list</span>&nbsp;<span class="op" id="5463639">[</span><span class="op" id="5463640">]</span><span class="op" id="5463641">*</span><span class="ident" id="5463642">Example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463651">for</span>&nbsp;<span class="ident" id="5463655">_</span><span class="op" id="5463656">,</span>&nbsp;<span class="ident" id="5463658">file</span>&nbsp;<span class="op" id="5463663">:=</span>&nbsp;<span class="keyword" id="5463666">range</span>&nbsp;<span class="ident" id="5463672">files</span>&nbsp;<span class="op" id="5463678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5463682">hasTests</span>&nbsp;<span class="op" id="5463691">:=</span>&nbsp;<span class="builtintype" id="5463694">false</span>&nbsp;<span class="comment" id="5463700">//&nbsp;file&nbsp;contains&nbsp;tests&nbsp;or&nbsp;benchmarks</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5463739">numDecl</span>&nbsp;<span class="op" id="5463747">:=</span>&nbsp;<span class="num" id="5463750">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5463757">//&nbsp;number&nbsp;of&nbsp;non-import&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463808">var</span>&nbsp;<span class="ident" id="5463812">flist</span>&nbsp;<span class="op" id="5463818">[</span><span class="op" id="5463819">]</span><span class="op" id="5463820">*</span><span class="ident" id="5463821">Example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463831">for</span>&nbsp;<span class="ident" id="5463835">_</span><span class="op" id="5463836">,</span>&nbsp;<span class="ident" id="5463838">decl</span>&nbsp;<span class="op" id="5463843">:=</span>&nbsp;<span class="keyword" id="5463846">range</span>&nbsp;<span class="ident" id="5463852">file</span><span class="op" id="5463856">.</span><span class="ident" id="5463857">Decls</span>&nbsp;<span class="op" id="5463863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463868">if</span>&nbsp;<span class="ident" id="5463871">g</span><span class="op" id="5463872">,</span>&nbsp;<span class="ident" id="5463874">ok</span>&nbsp;<span class="op" id="5463877">:=</span>&nbsp;<span class="ident" id="5463880">decl</span><span class="op" id="5463884">.</span><span class="op" id="5463885">(</span><span class="op" id="5463886">*</span><span class="ident" id="5463887">ast</span><span class="op" id="5463890">.</span><span class="ident" id="5463891">GenDecl</span><span class="op" id="5463898">)</span><span class="op" id="5463899">;</span>&nbsp;<span class="ident" id="5463901">ok</span>&nbsp;<span class="op" id="5463904">&amp;&amp;</span>&nbsp;<span class="ident" id="5463907">g</span><span class="op" id="5463908">.</span><span class="ident" id="5463909">Tok</span>&nbsp;<span class="op" id="5463913">!=</span>&nbsp;<span class="ident" id="5463916">token</span><span class="op" id="5463921">.</span><span class="ident" id="5463922">IMPORT</span>&nbsp;<span class="op" id="5463929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5463935">numDecl</span><span class="op" id="5463942">++</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463949">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5463961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5463966">f</span><span class="op" id="5463967">,</span>&nbsp;<span class="ident" id="5463969">ok</span>&nbsp;<span class="op" id="5463972">:=</span>&nbsp;<span class="ident" id="5463975">decl</span><span class="op" id="5463979">.</span><span class="op" id="5463980">(</span><span class="op" id="5463981">*</span><span class="ident" id="5463982">ast</span><span class="op" id="5463985">.</span><span class="ident" id="5463986">FuncDecl</span><span class="op" id="5463994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463999">if</span>&nbsp;<span class="op" id="5464002">!</span><span class="ident" id="5464003">ok</span>&nbsp;<span class="op" id="5464006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464012">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5464024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464029">numDecl</span><span class="op" id="5464036">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464042">name</span>&nbsp;<span class="op" id="5464047">:=</span>&nbsp;<span class="ident" id="5464050">f</span><span class="op" id="5464051">.</span><span class="ident" id="5464052">Name</span><span class="op" id="5464056">.</span><span class="ident" id="5464057">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464065">if</span>&nbsp;<span class="ident" id="5464068">isTest</span><span class="op" id="5464074">(</span><span class="ident" id="5464075">name</span><span class="op" id="5464079">,</span>&nbsp;<span class="string" id="5464081">&#34;Test&#34;</span><span class="op" id="5464087">)</span>&nbsp;<span class="op" id="5464089">||</span>&nbsp;<span class="ident" id="5464092">isTest</span><span class="op" id="5464098">(</span><span class="ident" id="5464099">name</span><span class="op" id="5464103">,</span>&nbsp;<span class="string" id="5464105">&#34;Benchmark&#34;</span><span class="op" id="5464116">)</span>&nbsp;<span class="op" id="5464118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464124">hasTests</span>&nbsp;<span class="op" id="5464133">=</span>&nbsp;<span class="builtintype" id="5464135">true</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464144">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5464156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464161">if</span>&nbsp;<span class="op" id="5464164">!</span><span class="ident" id="5464165">isTest</span><span class="op" id="5464171">(</span><span class="ident" id="5464172">name</span><span class="op" id="5464176">,</span>&nbsp;<span class="string" id="5464178">&#34;Example&#34;</span><span class="op" id="5464187">)</span>&nbsp;<span class="op" id="5464189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464195">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5464207">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464212">var</span>&nbsp;<span class="ident" id="5464216">doc</span>&nbsp;<span class="builtintype" id="5464220">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464230">if</span>&nbsp;<span class="ident" id="5464233">f</span><span class="op" id="5464234">.</span><span class="ident" id="5464235">Doc</span>&nbsp;<span class="op" id="5464239">!=</span>&nbsp;<span class="builtintype" id="5464242">nil</span>&nbsp;<span class="op" id="5464246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464252">doc</span>&nbsp;<span class="op" id="5464256">=</span>&nbsp;<span class="ident" id="5464258">f</span><span class="op" id="5464259">.</span><span class="ident" id="5464260">Doc</span><span class="op" id="5464263">.</span><span class="ident" id="5464264">Text</span><span class="op" id="5464268">(</span><span class="op" id="5464269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5464274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464279">output</span><span class="op" id="5464285">,</span>&nbsp;<span class="ident" id="5464287">hasOutput</span>&nbsp;<span class="op" id="5464297">:=</span>&nbsp;<span class="ident" id="5464300">exampleOutput</span><span class="op" id="5464313">(</span><span class="ident" id="5464314">f</span><span class="op" id="5464315">.</span><span class="ident" id="5464316">Body</span><span class="op" id="5464320">,</span>&nbsp;<span class="ident" id="5464322">file</span><span class="op" id="5464326">.</span><span class="ident" id="5464327">Comments</span><span class="op" id="5464335">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464340">flist</span>&nbsp;<span class="op" id="5464346">=</span>&nbsp;<span class="builtinfunc" id="5464348">append</span><span class="op" id="5464354">(</span><span class="ident" id="5464355">flist</span><span class="op" id="5464360">,</span>&nbsp;<span class="op" id="5464362">&amp;</span><span class="ident" id="5464363">Example</span><span class="op" id="5464370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464376">Name</span><span class="op" id="5464380">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464389">name</span><span class="op" id="5464393">[</span><span class="builtinfunc" id="5464394">len</span><span class="op" id="5464397">(</span><span class="string" id="5464398">&#34;Example&#34;</span><span class="op" id="5464407">)</span><span class="op" id="5464408">:</span><span class="op" id="5464409">]</span><span class="op" id="5464410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464416">Doc</span><span class="op" id="5464419">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464429">doc</span><span class="op" id="5464432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464438">Code</span><span class="op" id="5464442">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464451">f</span><span class="op" id="5464452">.</span><span class="ident" id="5464453">Body</span><span class="op" id="5464457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464463">Play</span><span class="op" id="5464467">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464476">playExample</span><span class="op" id="5464487">(</span><span class="ident" id="5464488">file</span><span class="op" id="5464492">,</span>&nbsp;<span class="ident" id="5464494">f</span><span class="op" id="5464495">.</span><span class="ident" id="5464496">Body</span><span class="op" id="5464500">)</span><span class="op" id="5464501">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464507">Comments</span><span class="op" id="5464515">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464520">file</span><span class="op" id="5464524">.</span><span class="ident" id="5464525">Comments</span><span class="op" id="5464533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464539">Output</span><span class="op" id="5464545">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464552">output</span><span class="op" id="5464558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464564">EmptyOutput</span><span class="op" id="5464575">:</span>&nbsp;<span class="ident" id="5464577">output</span>&nbsp;<span class="op" id="5464584">==</span>&nbsp;<span class="string" id="5464587">&#34;&#34;</span>&nbsp;<span class="op" id="5464590">&amp;&amp;</span>&nbsp;<span class="ident" id="5464593">hasOutput</span><span class="op" id="5464602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464608">Order</span><span class="op" id="5464613">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5464621">len</span><span class="op" id="5464624">(</span><span class="ident" id="5464625">flist</span><span class="op" id="5464630">)</span><span class="op" id="5464631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5464636">}</span><span class="op" id="5464637">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5464641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464645">if</span>&nbsp;<span class="op" id="5464648">!</span><span class="ident" id="5464649">hasTests</span>&nbsp;<span class="op" id="5464658">&amp;&amp;</span>&nbsp;<span class="ident" id="5464661">numDecl</span>&nbsp;<span class="op" id="5464669">&gt;</span>&nbsp;<span class="num" id="5464671">1</span>&nbsp;<span class="op" id="5464673">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5464676">len</span><span class="op" id="5464679">(</span><span class="ident" id="5464680">flist</span><span class="op" id="5464685">)</span>&nbsp;<span class="op" id="5464687">==</span>&nbsp;<span class="num" id="5464690">1</span>&nbsp;<span class="op" id="5464692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5464697">//&nbsp;If&nbsp;this&nbsp;file&nbsp;only&nbsp;has&nbsp;one&nbsp;example&nbsp;function,&nbsp;some</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5464752">//&nbsp;other&nbsp;top-level&nbsp;declarations,&nbsp;and&nbsp;no&nbsp;tests&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5464804">//&nbsp;benchmarks,&nbsp;use&nbsp;the&nbsp;whole&nbsp;file&nbsp;as&nbsp;the&nbsp;example.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464857">flist</span><span class="op" id="5464862">[</span><span class="num" id="5464863">0</span><span class="op" id="5464864">]</span><span class="op" id="5464865">.</span><span class="ident" id="5464866">Code</span>&nbsp;<span class="op" id="5464871">=</span>&nbsp;<span class="ident" id="5464873">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464881">flist</span><span class="op" id="5464886">[</span><span class="num" id="5464887">0</span><span class="op" id="5464888">]</span><span class="op" id="5464889">.</span><span class="ident" id="5464890">Play</span>&nbsp;<span class="op" id="5464895">=</span>&nbsp;<span class="ident" id="5464897">playExampleFile</span><span class="op" id="5464912">(</span><span class="ident" id="5464913">file</span><span class="op" id="5464917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5464921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464925">list</span>&nbsp;<span class="op" id="5464930">=</span>&nbsp;<span class="builtinfunc" id="5464932">append</span><span class="op" id="5464938">(</span><span class="ident" id="5464939">list</span><span class="op" id="5464943">,</span>&nbsp;<span class="ident" id="5464945">flist</span><span class="op" id="5464950">...</span><span class="op" id="5464953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5464956">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464959">sort</span><span class="op" id="5464963">.</span><span class="ident" id="5464964">Sort</span><span class="op" id="5464968">(</span><span class="ident" id="5464969">exampleByName</span><span class="op" id="5464982">(</span><span class="ident" id="5464983">list</span><span class="op" id="5464987">)</span><span class="op" id="5464988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464991">return</span>&nbsp;<span class="ident" id="5464998">list</span><br>
<span class="lineno"></span><span class="op" id="5465003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5465006">var</span>&nbsp;<span class="ident" id="5465010">outputPrefix</span>&nbsp;<span class="op" id="5465023">=</span>&nbsp;<span class="ident" id="5465025">regexp</span><span class="op" id="5465031">.</span><span class="ident" id="5465032">MustCompile</span><span class="op" id="5465043">(</span><span class="string" id="5465044">`(?i)^[[:space:]]*output:`</span><span class="op" id="5465070">)</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="5465073">//&nbsp;Extracts&nbsp;the&nbsp;expected&nbsp;output&nbsp;and&nbsp;whether&nbsp;there&nbsp;was&nbsp;a&nbsp;valid&nbsp;output&nbsp;comment</span><br>
<span class="lineno"></span><span class="keyword" id="5465150">func</span>&nbsp;<span class="ident" id="5465155">exampleOutput</span><span class="op" id="5465168">(</span><span class="ident" id="5465169">b</span>&nbsp;<span class="op" id="5465171">*</span><span class="ident" id="5465172">ast</span><span class="op" id="5465175">.</span><span class="ident" id="5465176">BlockStmt</span><span class="op" id="5465185">,</span>&nbsp;<span class="ident" id="5465187">comments</span>&nbsp;<span class="op" id="5465196">[</span><span class="op" id="5465197">]</span><span class="op" id="5465198">*</span><span class="ident" id="5465199">ast</span><span class="op" id="5465202">.</span><span class="ident" id="5465203">CommentGroup</span><span class="op" id="5465215">)</span>&nbsp;<span class="op" id="5465217">(</span><span class="ident" id="5465218">output</span>&nbsp;<span class="builtintype" id="5465225">string</span><span class="op" id="5465231">,</span>&nbsp;<span class="ident" id="5465233">ok</span>&nbsp;<span class="builtintype" id="5465236">bool</span><span class="op" id="5465240">)</span>&nbsp;<span class="op" id="5465242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465245">if</span>&nbsp;<span class="ident" id="5465248">_</span><span class="op" id="5465249">,</span>&nbsp;<span class="ident" id="5465251">last</span>&nbsp;<span class="op" id="5465256">:=</span>&nbsp;<span class="ident" id="5465259">lastComment</span><span class="op" id="5465270">(</span><span class="ident" id="5465271">b</span><span class="op" id="5465272">,</span>&nbsp;<span class="ident" id="5465274">comments</span><span class="op" id="5465282">)</span><span class="op" id="5465283">;</span>&nbsp;<span class="ident" id="5465285">last</span>&nbsp;<span class="op" id="5465290">!=</span>&nbsp;<span class="builtintype" id="5465293">nil</span>&nbsp;<span class="op" id="5465297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5465301">//&nbsp;test&nbsp;that&nbsp;it&nbsp;begins&nbsp;with&nbsp;the&nbsp;correct&nbsp;prefix</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465350">text</span>&nbsp;<span class="op" id="5465355">:=</span>&nbsp;<span class="ident" id="5465358">last</span><span class="op" id="5465362">.</span><span class="ident" id="5465363">Text</span><span class="op" id="5465367">(</span><span class="op" id="5465368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465372">if</span>&nbsp;<span class="ident" id="5465375">loc</span>&nbsp;<span class="op" id="5465379">:=</span>&nbsp;<span class="ident" id="5465382">outputPrefix</span><span class="op" id="5465394">.</span><span class="ident" id="5465395">FindStringIndex</span><span class="op" id="5465410">(</span><span class="ident" id="5465411">text</span><span class="op" id="5465415">)</span><span class="op" id="5465416">;</span>&nbsp;<span class="ident" id="5465418">loc</span>&nbsp;<span class="op" id="5465422">!=</span>&nbsp;<span class="builtintype" id="5465425">nil</span>&nbsp;<span class="op" id="5465429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465434">text</span>&nbsp;<span class="op" id="5465439">=</span>&nbsp;<span class="ident" id="5465441">text</span><span class="op" id="5465445">[</span><span class="ident" id="5465446">loc</span><span class="op" id="5465449">[</span><span class="num" id="5465450">1</span><span class="op" id="5465451">]</span><span class="op" id="5465452">:</span><span class="op" id="5465453">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5465458">//&nbsp;Strip&nbsp;zero&nbsp;or&nbsp;more&nbsp;spaces&nbsp;followed&nbsp;by&nbsp;\n&nbsp;or&nbsp;a&nbsp;single&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465524">text</span>&nbsp;<span class="op" id="5465529">=</span>&nbsp;<span class="ident" id="5465531">strings</span><span class="op" id="5465538">.</span><span class="ident" id="5465539">TrimLeft</span><span class="op" id="5465547">(</span><span class="ident" id="5465548">text</span><span class="op" id="5465552">,</span>&nbsp;<span class="string" id="5465554">&#34;&nbsp;&#34;</span><span class="op" id="5465557">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465562">if</span>&nbsp;<span class="builtinfunc" id="5465565">len</span><span class="op" id="5465568">(</span><span class="ident" id="5465569">text</span><span class="op" id="5465573">)</span>&nbsp;<span class="op" id="5465575">&gt;</span>&nbsp;<span class="num" id="5465577">0</span>&nbsp;<span class="op" id="5465579">&amp;&amp;</span>&nbsp;<span class="ident" id="5465582">text</span><span class="op" id="5465586">[</span><span class="num" id="5465587">0</span><span class="op" id="5465588">]</span>&nbsp;<span class="op" id="5465590">==</span>&nbsp;<span class="string" id="5465593">&#39;\n&#39;</span>&nbsp;<span class="op" id="5465598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465604">text</span>&nbsp;<span class="op" id="5465609">=</span>&nbsp;<span class="ident" id="5465611">text</span><span class="op" id="5465615">[</span><span class="num" id="5465616">1</span><span class="op" id="5465617">:</span><span class="op" id="5465618">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5465623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465628">return</span>&nbsp;<span class="ident" id="5465635">text</span><span class="op" id="5465639">,</span>&nbsp;<span class="builtintype" id="5465641">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5465648">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5465651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465654">return</span>&nbsp;<span class="string" id="5465661">&#34;&#34;</span><span class="op" id="5465663">,</span>&nbsp;<span class="builtintype" id="5465665">false</span>&nbsp;<span class="comment" id="5465671">//&nbsp;no&nbsp;suitable&nbsp;comment&nbsp;found</span><br>
<span class="lineno"></span><span class="op" id="5465700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5465703">//&nbsp;isTest&nbsp;tells&nbsp;whether&nbsp;name&nbsp;looks&nbsp;like&nbsp;a&nbsp;test,&nbsp;example,&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno">120</span><span class="comment" id="5465774">//&nbsp;It&nbsp;is&nbsp;a&nbsp;Test&nbsp;(say)&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;character&nbsp;after&nbsp;Test&nbsp;that&nbsp;is&nbsp;not&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5465845">//&nbsp;lower-case&nbsp;letter.&nbsp;(We&nbsp;don&#39;t&nbsp;want&nbsp;Testiness.)</span><br>
<span class="lineno"></span><span class="keyword" id="5465894">func</span>&nbsp;<span class="ident" id="5465899">isTest</span><span class="op" id="5465905">(</span><span class="ident" id="5465906">name</span><span class="op" id="5465910">,</span>&nbsp;<span class="ident" id="5465912">prefix</span>&nbsp;<span class="builtintype" id="5465919">string</span><span class="op" id="5465925">)</span>&nbsp;<span class="builtintype" id="5465927">bool</span>&nbsp;<span class="op" id="5465932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465935">if</span>&nbsp;<span class="op" id="5465938">!</span><span class="ident" id="5465939">strings</span><span class="op" id="5465946">.</span><span class="ident" id="5465947">HasPrefix</span><span class="op" id="5465956">(</span><span class="ident" id="5465957">name</span><span class="op" id="5465961">,</span>&nbsp;<span class="ident" id="5465963">prefix</span><span class="op" id="5465969">)</span>&nbsp;<span class="op" id="5465971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465975">return</span>&nbsp;<span class="builtintype" id="5465982">false</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5465989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465992">if</span>&nbsp;<span class="builtinfunc" id="5465995">len</span><span class="op" id="5465998">(</span><span class="ident" id="5465999">name</span><span class="op" id="5466003">)</span>&nbsp;<span class="op" id="5466005">==</span>&nbsp;<span class="builtinfunc" id="5466008">len</span><span class="op" id="5466011">(</span><span class="ident" id="5466012">prefix</span><span class="op" id="5466018">)</span>&nbsp;<span class="op" id="5466020">{</span>&nbsp;<span class="comment" id="5466022">//&nbsp;&#34;Test&#34;&nbsp;is&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466040">return</span>&nbsp;<span class="builtintype" id="5466047">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5466053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5466056">rune</span><span class="op" id="5466060">,</span>&nbsp;<span class="ident" id="5466062">_</span>&nbsp;<span class="op" id="5466064">:=</span>&nbsp;<span class="ident" id="5466067">utf8</span><span class="op" id="5466071">.</span><span class="ident" id="5466072">DecodeRuneInString</span><span class="op" id="5466090">(</span><span class="ident" id="5466091">name</span><span class="op" id="5466095">[</span><span class="builtinfunc" id="5466096">len</span><span class="op" id="5466099">(</span><span class="ident" id="5466100">prefix</span><span class="op" id="5466106">)</span><span class="op" id="5466107">:</span><span class="op" id="5466108">]</span><span class="op" id="5466109">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466112">return</span>&nbsp;<span class="op" id="5466119">!</span><span class="ident" id="5466120">unicode</span><span class="op" id="5466127">.</span><span class="ident" id="5466128">IsLower</span><span class="op" id="5466135">(</span><span class="builtintype" id="5466136">rune</span><span class="op" id="5466140">)</span><br>
<span class="lineno"></span><span class="op" id="5466142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5466145">type</span>&nbsp;<span class="ident" id="5466150">exampleByName</span>&nbsp;<span class="op" id="5466164">[</span><span class="op" id="5466165">]</span><span class="op" id="5466166">*</span><span class="ident" id="5466167">Example</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="5466176">func</span>&nbsp;<span class="op" id="5466181">(</span><span class="ident" id="5466182">s</span>&nbsp;<span class="ident" id="5466184">exampleByName</span><span class="op" id="5466197">)</span>&nbsp;<span class="ident" id="5466199">Len</span><span class="op" id="5466202">(</span><span class="op" id="5466203">)</span>&nbsp;<span class="builtintype" id="5466205">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5466219">{</span>&nbsp;<span class="keyword" id="5466221">return</span>&nbsp;<span class="builtinfunc" id="5466228">len</span><span class="op" id="5466231">(</span><span class="ident" id="5466232">s</span><span class="op" id="5466233">)</span>&nbsp;<span class="op" id="5466235">}</span><br>
<span class="lineno"></span><span class="keyword" id="5466237">func</span>&nbsp;<span class="op" id="5466242">(</span><span class="ident" id="5466243">s</span>&nbsp;<span class="ident" id="5466245">exampleByName</span><span class="op" id="5466258">)</span>&nbsp;<span class="ident" id="5466260">Swap</span><span class="op" id="5466264">(</span><span class="ident" id="5466265">i</span><span class="op" id="5466266">,</span>&nbsp;<span class="ident" id="5466268">j</span>&nbsp;<span class="builtintype" id="5466270">int</span><span class="op" id="5466273">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5466280">{</span>&nbsp;<span class="ident" id="5466282">s</span><span class="op" id="5466283">[</span><span class="ident" id="5466284">i</span><span class="op" id="5466285">]</span><span class="op" id="5466286">,</span>&nbsp;<span class="ident" id="5466288">s</span><span class="op" id="5466289">[</span><span class="ident" id="5466290">j</span><span class="op" id="5466291">]</span>&nbsp;<span class="op" id="5466293">=</span>&nbsp;<span class="ident" id="5466295">s</span><span class="op" id="5466296">[</span><span class="ident" id="5466297">j</span><span class="op" id="5466298">]</span><span class="op" id="5466299">,</span>&nbsp;<span class="ident" id="5466301">s</span><span class="op" id="5466302">[</span><span class="ident" id="5466303">i</span><span class="op" id="5466304">]</span>&nbsp;<span class="op" id="5466306">}</span><br>
<span class="lineno"></span><span class="keyword" id="5466308">func</span>&nbsp;<span class="op" id="5466313">(</span><span class="ident" id="5466314">s</span>&nbsp;<span class="ident" id="5466316">exampleByName</span><span class="op" id="5466329">)</span>&nbsp;<span class="ident" id="5466331">Less</span><span class="op" id="5466335">(</span><span class="ident" id="5466336">i</span><span class="op" id="5466337">,</span>&nbsp;<span class="ident" id="5466339">j</span>&nbsp;<span class="builtintype" id="5466341">int</span><span class="op" id="5466344">)</span>&nbsp;<span class="builtintype" id="5466346">bool</span>&nbsp;<span class="op" id="5466351">{</span>&nbsp;<span class="keyword" id="5466353">return</span>&nbsp;<span class="ident" id="5466360">s</span><span class="op" id="5466361">[</span><span class="ident" id="5466362">i</span><span class="op" id="5466363">]</span><span class="op" id="5466364">.</span><span class="ident" id="5466365">Name</span>&nbsp;<span class="op" id="5466370">&lt;</span>&nbsp;<span class="ident" id="5466372">s</span><span class="op" id="5466373">[</span><span class="ident" id="5466374">j</span><span class="op" id="5466375">]</span><span class="op" id="5466376">.</span><span class="ident" id="5466377">Name</span>&nbsp;<span class="op" id="5466382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5466385">//&nbsp;playExample&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File&nbsp;based&nbsp;on&nbsp;the&nbsp;provided</span><br>
<span class="lineno">140</span><span class="comment" id="5466450">//&nbsp;file&nbsp;with&nbsp;the&nbsp;provided&nbsp;function&nbsp;body&nbsp;as&nbsp;the&nbsp;body&nbsp;of&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="5466511">func</span>&nbsp;<span class="ident" id="5466516">playExample</span><span class="op" id="5466527">(</span><span class="ident" id="5466528">file</span>&nbsp;<span class="op" id="5466533">*</span><span class="ident" id="5466534">ast</span><span class="op" id="5466537">.</span><span class="ident" id="5466538">File</span><span class="op" id="5466542">,</span>&nbsp;<span class="ident" id="5466544">body</span>&nbsp;<span class="op" id="5466549">*</span><span class="ident" id="5466550">ast</span><span class="op" id="5466553">.</span><span class="ident" id="5466554">BlockStmt</span><span class="op" id="5466563">)</span>&nbsp;<span class="op" id="5466565">*</span><span class="ident" id="5466566">ast</span><span class="op" id="5466569">.</span><span class="ident" id="5466570">File</span>&nbsp;<span class="op" id="5466575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466578">if</span>&nbsp;<span class="op" id="5466581">!</span><span class="ident" id="5466582">strings</span><span class="op" id="5466589">.</span><span class="ident" id="5466590">HasSuffix</span><span class="op" id="5466599">(</span><span class="ident" id="5466600">file</span><span class="op" id="5466604">.</span><span class="ident" id="5466605">Name</span><span class="op" id="5466609">.</span><span class="ident" id="5466610">Name</span><span class="op" id="5466614">,</span>&nbsp;<span class="string" id="5466616">&#34;_test&#34;</span><span class="op" id="5466623">)</span>&nbsp;<span class="op" id="5466625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5466629">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5466681">//&nbsp;greater&nbsp;package&nbsp;(yet).</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466709">return</span>&nbsp;<span class="builtintype" id="5466716">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5466721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5466725">//&nbsp;Find&nbsp;top-level&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466770">topDecls</span>&nbsp;<span class="op" id="5466779">:=</span>&nbsp;<span class="builtinfunc" id="5466782">make</span><span class="op" id="5466786">(</span><span class="keyword" id="5466787">map</span><span class="op" id="5466790">[</span><span class="op" id="5466791">*</span><span class="ident" id="5466792">ast</span><span class="op" id="5466795">.</span><span class="ident" id="5466796">Object</span><span class="op" id="5466802">]</span><span class="builtintype" id="5466803">bool</span><span class="op" id="5466807">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466810">for</span>&nbsp;<span class="ident" id="5466814">_</span><span class="op" id="5466815">,</span>&nbsp;<span class="ident" id="5466817">decl</span>&nbsp;<span class="op" id="5466822">:=</span>&nbsp;<span class="keyword" id="5466825">range</span>&nbsp;<span class="ident" id="5466831">file</span><span class="op" id="5466835">.</span><span class="ident" id="5466836">Decls</span>&nbsp;<span class="op" id="5466842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466846">switch</span>&nbsp;<span class="ident" id="5466853">d</span>&nbsp;<span class="op" id="5466855">:=</span>&nbsp;<span class="ident" id="5466858">decl</span><span class="op" id="5466862">.</span><span class="op" id="5466863">(</span><span class="keyword" id="5466864">type</span><span class="op" id="5466868">)</span>&nbsp;<span class="op" id="5466870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466874">case</span>&nbsp;<span class="op" id="5466879">*</span><span class="ident" id="5466880">ast</span><span class="op" id="5466883">.</span><span class="ident" id="5466884">FuncDecl</span><span class="op" id="5466892">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5466897">topDecls</span><span class="op" id="5466905">[</span><span class="ident" id="5466906">d</span><span class="op" id="5466907">.</span><span class="ident" id="5466908">Name</span><span class="op" id="5466912">.</span><span class="ident" id="5466913">Obj</span><span class="op" id="5466916">]</span>&nbsp;<span class="op" id="5466918">=</span>&nbsp;<span class="builtintype" id="5466920">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466927">case</span>&nbsp;<span class="op" id="5466932">*</span><span class="ident" id="5466933">ast</span><span class="op" id="5466936">.</span><span class="ident" id="5466937">GenDecl</span><span class="op" id="5466944">:</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466949">for</span>&nbsp;<span class="ident" id="5466953">_</span><span class="op" id="5466954">,</span>&nbsp;<span class="ident" id="5466956">spec</span>&nbsp;<span class="op" id="5466961">:=</span>&nbsp;<span class="keyword" id="5466964">range</span>&nbsp;<span class="ident" id="5466970">d</span><span class="op" id="5466971">.</span><span class="ident" id="5466972">Specs</span>&nbsp;<span class="op" id="5466978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5466984">switch</span>&nbsp;<span class="ident" id="5466991">s</span>&nbsp;<span class="op" id="5466993">:=</span>&nbsp;<span class="ident" id="5466996">spec</span><span class="op" id="5467000">.</span><span class="op" id="5467001">(</span><span class="keyword" id="5467002">type</span><span class="op" id="5467006">)</span>&nbsp;<span class="op" id="5467008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467014">case</span>&nbsp;<span class="op" id="5467019">*</span><span class="ident" id="5467020">ast</span><span class="op" id="5467023">.</span><span class="ident" id="5467024">TypeSpec</span><span class="op" id="5467032">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5467039">topDecls</span><span class="op" id="5467047">[</span><span class="ident" id="5467048">s</span><span class="op" id="5467049">.</span><span class="ident" id="5467050">Name</span><span class="op" id="5467054">.</span><span class="ident" id="5467055">Obj</span><span class="op" id="5467058">]</span>&nbsp;<span class="op" id="5467060">=</span>&nbsp;<span class="builtintype" id="5467062">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467071">case</span>&nbsp;<span class="op" id="5467076">*</span><span class="ident" id="5467077">ast</span><span class="op" id="5467080">.</span><span class="ident" id="5467081">ValueSpec</span><span class="op" id="5467090">:</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467097">for</span>&nbsp;<span class="ident" id="5467101">_</span><span class="op" id="5467102">,</span>&nbsp;<span class="ident" id="5467104">id</span>&nbsp;<span class="op" id="5467107">:=</span>&nbsp;<span class="keyword" id="5467110">range</span>&nbsp;<span class="ident" id="5467116">s</span><span class="op" id="5467117">.</span><span class="ident" id="5467118">Names</span>&nbsp;<span class="op" id="5467124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5467132">topDecls</span><span class="op" id="5467140">[</span><span class="ident" id="5467141">id</span><span class="op" id="5467143">.</span><span class="ident" id="5467144">Obj</span><span class="op" id="5467147">]</span>&nbsp;<span class="op" id="5467149">=</span>&nbsp;<span class="builtintype" id="5467151">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5467161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5467167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5467172">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5467176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5467179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5467183">//&nbsp;Find&nbsp;unresolved&nbsp;identifiers&nbsp;and&nbsp;uses&nbsp;of&nbsp;top-level&nbsp;declarations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5467251">unresolved</span>&nbsp;<span class="op" id="5467262">:=</span>&nbsp;<span class="builtinfunc" id="5467265">make</span><span class="op" id="5467269">(</span><span class="keyword" id="5467270">map</span><span class="op" id="5467273">[</span><span class="builtintype" id="5467274">string</span><span class="op" id="5467280">]</span><span class="builtintype" id="5467281">bool</span><span class="op" id="5467285">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5467288">usesTopDecl</span>&nbsp;<span class="op" id="5467300">:=</span>&nbsp;<span class="builtintype" id="5467303">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467310">var</span>&nbsp;<span class="ident" id="5467314">inspectFunc</span>&nbsp;<span class="keyword" id="5467326">func</span><span class="op" id="5467330">(</span><span class="ident" id="5467331">ast</span><span class="op" id="5467334">.</span><span class="ident" id="5467335">Node</span><span class="op" id="5467339">)</span>&nbsp;<span class="builtintype" id="5467341">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5467347">inspectFunc</span>&nbsp;<span class="op" id="5467359">=</span>&nbsp;<span class="keyword" id="5467361">func</span><span class="op" id="5467365">(</span><span class="ident" id="5467366">n</span>&nbsp;<span class="ident" id="5467368">ast</span><span class="op" id="5467371">.</span><span class="ident" id="5467372">Node</span><span class="op" id="5467376">)</span>&nbsp;<span class="builtintype" id="5467378">bool</span>&nbsp;<span class="op" id="5467383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5467387">//&nbsp;For&nbsp;selector&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;left&nbsp;hand&nbsp;side.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5467451">//&nbsp;(For&nbsp;an&nbsp;expression&nbsp;like&nbsp;fmt.Println,&nbsp;only&nbsp;add&nbsp;&#34;fmt&#34;&nbsp;to&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5467515">//&nbsp;set&nbsp;of&nbsp;unresolved&nbsp;names,&nbsp;not&nbsp;&#34;Println&#34;.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467561">if</span>&nbsp;<span class="ident" id="5467564">e</span><span class="op" id="5467565">,</span>&nbsp;<span class="ident" id="5467567">ok</span>&nbsp;<span class="op" id="5467570">:=</span>&nbsp;<span class="ident" id="5467573">n</span><span class="op" id="5467574">.</span><span class="op" id="5467575">(</span><span class="op" id="5467576">*</span><span class="ident" id="5467577">ast</span><span class="op" id="5467580">.</span><span class="ident" id="5467581">SelectorExpr</span><span class="op" id="5467593">)</span><span class="op" id="5467594">;</span>&nbsp;<span class="ident" id="5467596">ok</span>&nbsp;<span class="op" id="5467599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5467604">ast</span><span class="op" id="5467607">.</span><span class="ident" id="5467608">Inspect</span><span class="op" id="5467615">(</span><span class="ident" id="5467616">e</span><span class="op" id="5467617">.</span><span class="ident" id="5467618">X</span><span class="op" id="5467619">,</span>&nbsp;<span class="ident" id="5467621">inspectFunc</span><span class="op" id="5467632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467637">return</span>&nbsp;<span class="builtintype" id="5467644">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5467652">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5467656">//&nbsp;For&nbsp;key&nbsp;value&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5467711">//&nbsp;as&nbsp;the&nbsp;key&nbsp;should&nbsp;be&nbsp;resolved&nbsp;by&nbsp;the&nbsp;type&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5467765">//&nbsp;composite&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467789">if</span>&nbsp;<span class="ident" id="5467792">e</span><span class="op" id="5467793">,</span>&nbsp;<span class="ident" id="5467795">ok</span>&nbsp;<span class="op" id="5467798">:=</span>&nbsp;<span class="ident" id="5467801">n</span><span class="op" id="5467802">.</span><span class="op" id="5467803">(</span><span class="op" id="5467804">*</span><span class="ident" id="5467805">ast</span><span class="op" id="5467808">.</span><span class="ident" id="5467809">KeyValueExpr</span><span class="op" id="5467821">)</span><span class="op" id="5467822">;</span>&nbsp;<span class="ident" id="5467824">ok</span>&nbsp;<span class="op" id="5467827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5467832">ast</span><span class="op" id="5467835">.</span><span class="ident" id="5467836">Inspect</span><span class="op" id="5467843">(</span><span class="ident" id="5467844">e</span><span class="op" id="5467845">.</span><span class="ident" id="5467846">Value</span><span class="op" id="5467851">,</span>&nbsp;<span class="ident" id="5467853">inspectFunc</span><span class="op" id="5467864">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467869">return</span>&nbsp;<span class="builtintype" id="5467876">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5467884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467888">if</span>&nbsp;<span class="ident" id="5467891">id</span><span class="op" id="5467893">,</span>&nbsp;<span class="ident" id="5467895">ok</span>&nbsp;<span class="op" id="5467898">:=</span>&nbsp;<span class="ident" id="5467901">n</span><span class="op" id="5467902">.</span><span class="op" id="5467903">(</span><span class="op" id="5467904">*</span><span class="ident" id="5467905">ast</span><span class="op" id="5467908">.</span><span class="ident" id="5467909">Ident</span><span class="op" id="5467914">)</span><span class="op" id="5467915">;</span>&nbsp;<span class="ident" id="5467917">ok</span>&nbsp;<span class="op" id="5467920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5467925">if</span>&nbsp;<span class="ident" id="5467928">id</span><span class="op" id="5467930">.</span><span class="ident" id="5467931">Obj</span>&nbsp;<span class="op" id="5467935">==</span>&nbsp;<span class="builtintype" id="5467938">nil</span>&nbsp;<span class="op" id="5467942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5467948">unresolved</span><span class="op" id="5467958">[</span><span class="ident" id="5467959">id</span><span class="op" id="5467961">.</span><span class="ident" id="5467962">Name</span><span class="op" id="5467966">]</span>&nbsp;<span class="op" id="5467968">=</span>&nbsp;<span class="builtintype" id="5467970">true</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5467978">}</span>&nbsp;<span class="keyword" id="5467980">else</span>&nbsp;<span class="keyword" id="5467985">if</span>&nbsp;<span class="ident" id="5467988">topDecls</span><span class="op" id="5467996">[</span><span class="ident" id="5467997">id</span><span class="op" id="5467999">.</span><span class="ident" id="5468000">Obj</span><span class="op" id="5468003">]</span>&nbsp;<span class="op" id="5468005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5468011">usesTopDecl</span>&nbsp;<span class="op" id="5468023">=</span>&nbsp;<span class="builtintype" id="5468025">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5468033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5468037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468041">return</span>&nbsp;<span class="builtintype" id="5468048">true</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5468054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5468057">ast</span><span class="op" id="5468060">.</span><span class="ident" id="5468061">Inspect</span><span class="op" id="5468068">(</span><span class="ident" id="5468069">body</span><span class="op" id="5468073">,</span>&nbsp;<span class="ident" id="5468075">inspectFunc</span><span class="op" id="5468086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468089">if</span>&nbsp;<span class="ident" id="5468092">usesTopDecl</span>&nbsp;<span class="op" id="5468104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5468108">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;not&nbsp;self-contained&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468174">return</span>&nbsp;<span class="builtintype" id="5468181">nil</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5468186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5468190">//&nbsp;Remove&nbsp;predeclared&nbsp;identifiers&nbsp;from&nbsp;unresolved&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468247">for</span>&nbsp;<span class="ident" id="5468251">n</span>&nbsp;<span class="op" id="5468253">:=</span>&nbsp;<span class="keyword" id="5468256">range</span>&nbsp;<span class="ident" id="5468262">unresolved</span>&nbsp;<span class="op" id="5468273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468277">if</span>&nbsp;<span class="ident" id="5468280">predeclaredTypes</span><span class="op" id="5468296">[</span><span class="ident" id="5468297">n</span><span class="op" id="5468298">]</span>&nbsp;<span class="op" id="5468300">||</span>&nbsp;<span class="ident" id="5468303">predeclaredConstants</span><span class="op" id="5468323">[</span><span class="ident" id="5468324">n</span><span class="op" id="5468325">]</span>&nbsp;<span class="op" id="5468327">||</span>&nbsp;<span class="ident" id="5468330">predeclaredFuncs</span><span class="op" id="5468346">[</span><span class="ident" id="5468347">n</span><span class="op" id="5468348">]</span>&nbsp;<span class="op" id="5468350">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5468355">delete</span><span class="op" id="5468361">(</span><span class="ident" id="5468362">unresolved</span><span class="op" id="5468372">,</span>&nbsp;<span class="ident" id="5468374">n</span><span class="op" id="5468375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5468379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5468382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5468386">//&nbsp;Use&nbsp;unresolved&nbsp;identifiers&nbsp;to&nbsp;determine&nbsp;the&nbsp;imports&nbsp;used&nbsp;by&nbsp;this</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5468455">//&nbsp;example.&nbsp;The&nbsp;heuristic&nbsp;assumes&nbsp;package&nbsp;names&nbsp;match&nbsp;base&nbsp;import</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5468522">//&nbsp;paths&nbsp;for&nbsp;imports&nbsp;w/o&nbsp;renames&nbsp;(should&nbsp;be&nbsp;good&nbsp;enough&nbsp;most&nbsp;of&nbsp;the&nbsp;time).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5468598">namedImports</span>&nbsp;<span class="op" id="5468611">:=</span>&nbsp;<span class="builtinfunc" id="5468614">make</span><span class="op" id="5468618">(</span><span class="keyword" id="5468619">map</span><span class="op" id="5468622">[</span><span class="builtintype" id="5468623">string</span><span class="op" id="5468629">]</span><span class="builtintype" id="5468630">string</span><span class="op" id="5468636">)</span>&nbsp;<span class="comment" id="5468638">//&nbsp;[name]path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468653">var</span>&nbsp;<span class="ident" id="5468657">blankImports</span>&nbsp;<span class="op" id="5468670">[</span><span class="op" id="5468671">]</span><span class="ident" id="5468672">ast</span><span class="op" id="5468675">.</span><span class="ident" id="5468676">Spec</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5468693">//&nbsp;_&nbsp;imports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468707">for</span>&nbsp;<span class="ident" id="5468711">_</span><span class="op" id="5468712">,</span>&nbsp;<span class="ident" id="5468714">s</span>&nbsp;<span class="op" id="5468716">:=</span>&nbsp;<span class="keyword" id="5468719">range</span>&nbsp;<span class="ident" id="5468725">file</span><span class="op" id="5468729">.</span><span class="ident" id="5468730">Imports</span>&nbsp;<span class="op" id="5468738">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5468742">p</span><span class="op" id="5468743">,</span>&nbsp;<span class="ident" id="5468745">err</span>&nbsp;<span class="op" id="5468749">:=</span>&nbsp;<span class="ident" id="5468752">strconv</span><span class="op" id="5468759">.</span><span class="ident" id="5468760">Unquote</span><span class="op" id="5468767">(</span><span class="ident" id="5468768">s</span><span class="op" id="5468769">.</span><span class="ident" id="5468770">Path</span><span class="op" id="5468774">.</span><span class="ident" id="5468775">Value</span><span class="op" id="5468780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468784">if</span>&nbsp;<span class="ident" id="5468787">err</span>&nbsp;<span class="op" id="5468791">!=</span>&nbsp;<span class="builtintype" id="5468794">nil</span>&nbsp;<span class="op" id="5468798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468803">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5468814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5468818">n</span>&nbsp;<span class="op" id="5468820">:=</span>&nbsp;<span class="ident" id="5468823">path</span><span class="op" id="5468827">.</span><span class="ident" id="5468828">Base</span><span class="op" id="5468832">(</span><span class="ident" id="5468833">p</span><span class="op" id="5468834">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468838">if</span>&nbsp;<span class="ident" id="5468841">s</span><span class="op" id="5468842">.</span><span class="ident" id="5468843">Name</span>&nbsp;<span class="op" id="5468848">!=</span>&nbsp;<span class="builtintype" id="5468851">nil</span>&nbsp;<span class="op" id="5468855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5468860">n</span>&nbsp;<span class="op" id="5468862">=</span>&nbsp;<span class="ident" id="5468864">s</span><span class="op" id="5468865">.</span><span class="ident" id="5468866">Name</span><span class="op" id="5468870">.</span><span class="ident" id="5468871">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468879">switch</span>&nbsp;<span class="ident" id="5468886">n</span>&nbsp;<span class="op" id="5468888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468893">case</span>&nbsp;<span class="string" id="5468898">&#34;_&#34;</span><span class="op" id="5468901">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5468907">blankImports</span>&nbsp;<span class="op" id="5468920">=</span>&nbsp;<span class="builtinfunc" id="5468922">append</span><span class="op" id="5468928">(</span><span class="ident" id="5468929">blankImports</span><span class="op" id="5468941">,</span>&nbsp;<span class="ident" id="5468943">s</span><span class="op" id="5468944">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468950">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5468962">case</span>&nbsp;<span class="string" id="5468967">&#34;.&#34;</span><span class="op" id="5468970">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5468976">//&nbsp;We&nbsp;can&#39;t&nbsp;resolve&nbsp;dot&nbsp;imports&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5469019">return</span>&nbsp;<span class="builtintype" id="5469026">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5469033">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5469037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5469041">if</span>&nbsp;<span class="ident" id="5469044">unresolved</span><span class="op" id="5469054">[</span><span class="ident" id="5469055">n</span><span class="op" id="5469056">]</span>&nbsp;<span class="op" id="5469058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5469063">namedImports</span><span class="op" id="5469075">[</span><span class="ident" id="5469076">n</span><span class="op" id="5469077">]</span>&nbsp;<span class="op" id="5469079">=</span>&nbsp;<span class="ident" id="5469081">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5469086">delete</span><span class="op" id="5469092">(</span><span class="ident" id="5469093">unresolved</span><span class="op" id="5469103">,</span>&nbsp;<span class="ident" id="5469105">n</span><span class="op" id="5469106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5469110">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5469113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5469117">//&nbsp;If&nbsp;there&nbsp;are&nbsp;other&nbsp;unresolved&nbsp;identifiers,&nbsp;give&nbsp;up&nbsp;because&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5469185">//&nbsp;synthesized&nbsp;file&nbsp;is&nbsp;not&nbsp;going&nbsp;to&nbsp;build.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5469229">if</span>&nbsp;<span class="builtinfunc" id="5469232">len</span><span class="op" id="5469235">(</span><span class="ident" id="5469236">unresolved</span><span class="op" id="5469246">)</span>&nbsp;<span class="op" id="5469248">&gt;</span>&nbsp;<span class="num" id="5469250">0</span>&nbsp;<span class="op" id="5469252">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5469256">return</span>&nbsp;<span class="builtintype" id="5469263">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5469268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5469272">//&nbsp;Include&nbsp;documentation&nbsp;belonging&nbsp;to&nbsp;blank&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5469326">var</span>&nbsp;<span class="ident" id="5469330">comments</span>&nbsp;<span class="op" id="5469339">[</span><span class="op" id="5469340">]</span><span class="op" id="5469341">*</span><span class="ident" id="5469342">ast</span><span class="op" id="5469345">.</span><span class="ident" id="5469346">CommentGroup</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5469360">for</span>&nbsp;<span class="ident" id="5469364">_</span><span class="op" id="5469365">,</span>&nbsp;<span class="ident" id="5469367">s</span>&nbsp;<span class="op" id="5469369">:=</span>&nbsp;<span class="keyword" id="5469372">range</span>&nbsp;<span class="ident" id="5469378">blankImports</span>&nbsp;<span class="op" id="5469391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5469395">if</span>&nbsp;<span class="ident" id="5469398">c</span>&nbsp;<span class="op" id="5469400">:=</span>&nbsp;<span class="ident" id="5469403">s</span><span class="op" id="5469404">.</span><span class="op" id="5469405">(</span><span class="op" id="5469406">*</span><span class="ident" id="5469407">ast</span><span class="op" id="5469410">.</span><span class="ident" id="5469411">ImportSpec</span><span class="op" id="5469421">)</span><span class="op" id="5469422">.</span><span class="ident" id="5469423">Doc</span><span class="op" id="5469426">;</span>&nbsp;<span class="ident" id="5469428">c</span>&nbsp;<span class="op" id="5469430">!=</span>&nbsp;<span class="builtintype" id="5469433">nil</span>&nbsp;<span class="op" id="5469437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5469442">comments</span>&nbsp;<span class="op" id="5469451">=</span>&nbsp;<span class="builtinfunc" id="5469453">append</span><span class="op" id="5469459">(</span><span class="ident" id="5469460">comments</span><span class="op" id="5469468">,</span>&nbsp;<span class="ident" id="5469470">c</span><span class="op" id="5469471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5469475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5469478">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5469482">//&nbsp;Include&nbsp;comments&nbsp;that&nbsp;are&nbsp;inside&nbsp;the&nbsp;function&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5469538">for</span>&nbsp;<span class="ident" id="5469542">_</span><span class="op" id="5469543">,</span>&nbsp;<span class="ident" id="5469545">c</span>&nbsp;<span class="op" id="5469547">:=</span>&nbsp;<span class="keyword" id="5469550">range</span>&nbsp;<span class="ident" id="5469556">file</span><span class="op" id="5469560">.</span><span class="ident" id="5469561">Comments</span>&nbsp;<span class="op" id="5469570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5469574">if</span>&nbsp;<span class="ident" id="5469577">body</span><span class="op" id="5469581">.</span><span class="ident" id="5469582">Pos</span><span class="op" id="5469585">(</span><span class="op" id="5469586">)</span>&nbsp;<span class="op" id="5469588">&lt;=</span>&nbsp;<span class="ident" id="5469591">c</span><span class="op" id="5469592">.</span><span class="ident" id="5469593">Pos</span><span class="op" id="5469596">(</span><span class="op" id="5469597">)</span>&nbsp;<span class="op" id="5469599">&amp;&amp;</span>&nbsp;<span class="ident" id="5469602">c</span><span class="op" id="5469603">.</span><span class="ident" id="5469604">End</span><span class="op" id="5469607">(</span><span class="op" id="5469608">)</span>&nbsp;<span class="op" id="5469610">&lt;=</span>&nbsp;<span class="ident" id="5469613">body</span><span class="op" id="5469617">.</span><span class="ident" id="5469618">End</span><span class="op" id="5469621">(</span><span class="op" id="5469622">)</span>&nbsp;<span class="op" id="5469624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5469629">comments</span>&nbsp;<span class="op" id="5469638">=</span>&nbsp;<span class="builtinfunc" id="5469640">append</span><span class="op" id="5469646">(</span><span class="ident" id="5469647">comments</span><span class="op" id="5469655">,</span>&nbsp;<span class="ident" id="5469657">c</span><span class="op" id="5469658">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5469662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5469665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5469669">//&nbsp;Strip&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;and&nbsp;adjust&nbsp;body&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5469727">body</span><span class="op" id="5469731">,</span>&nbsp;<span class="ident" id="5469733">comments</span>&nbsp;<span class="op" id="5469742">=</span>&nbsp;<span class="ident" id="5469744">stripOutputComment</span><span class="op" id="5469762">(</span><span class="ident" id="5469763">body</span><span class="op" id="5469767">,</span>&nbsp;<span class="ident" id="5469769">comments</span><span class="op" id="5469777">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5469781">//&nbsp;Synthesize&nbsp;import&nbsp;declaration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5469816">importDecl</span>&nbsp;<span class="op" id="5469827">:=</span>&nbsp;<span class="op" id="5469830">&amp;</span><span class="ident" id="5469831">ast</span><span class="op" id="5469834">.</span><span class="ident" id="5469835">GenDecl</span><span class="op" id="5469842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5469846">Tok</span><span class="op" id="5469849">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5469854">token</span><span class="op" id="5469859">.</span><span class="ident" id="5469860">IMPORT</span><span class="op" id="5469866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5469870">Lparen</span><span class="op" id="5469876">:</span>&nbsp;<span class="num" id="5469878">1</span><span class="op" id="5469879">,</span>&nbsp;<span class="comment" id="5469881">//&nbsp;Need&nbsp;non-zero&nbsp;Lparen&nbsp;and&nbsp;Rparen&nbsp;so&nbsp;that&nbsp;printer</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5469934">Rparen</span><span class="op" id="5469940">:</span>&nbsp;<span class="num" id="5469942">1</span><span class="op" id="5469943">,</span>&nbsp;<span class="comment" id="5469945">//&nbsp;treats&nbsp;this&nbsp;as&nbsp;a&nbsp;factored&nbsp;import.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5469983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5469986">for</span>&nbsp;<span class="ident" id="5469990">n</span><span class="op" id="5469991">,</span>&nbsp;<span class="ident" id="5469993">p</span>&nbsp;<span class="op" id="5469995">:=</span>&nbsp;<span class="keyword" id="5469998">range</span>&nbsp;<span class="ident" id="5470004">namedImports</span>&nbsp;<span class="op" id="5470017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470021">s</span>&nbsp;<span class="op" id="5470023">:=</span>&nbsp;<span class="op" id="5470026">&amp;</span><span class="ident" id="5470027">ast</span><span class="op" id="5470030">.</span><span class="ident" id="5470031">ImportSpec</span><span class="op" id="5470041">{</span><span class="ident" id="5470042">Path</span><span class="op" id="5470046">:</span>&nbsp;<span class="op" id="5470048">&amp;</span><span class="ident" id="5470049">ast</span><span class="op" id="5470052">.</span><span class="ident" id="5470053">BasicLit</span><span class="op" id="5470061">{</span><span class="ident" id="5470062">Value</span><span class="op" id="5470067">:</span>&nbsp;<span class="ident" id="5470069">strconv</span><span class="op" id="5470076">.</span><span class="ident" id="5470077">Quote</span><span class="op" id="5470082">(</span><span class="ident" id="5470083">p</span><span class="op" id="5470084">)</span><span class="op" id="5470085">}</span><span class="op" id="5470086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5470090">if</span>&nbsp;<span class="ident" id="5470093">path</span><span class="op" id="5470097">.</span><span class="ident" id="5470098">Base</span><span class="op" id="5470102">(</span><span class="ident" id="5470103">p</span><span class="op" id="5470104">)</span>&nbsp;<span class="op" id="5470106">!=</span>&nbsp;<span class="ident" id="5470109">n</span>&nbsp;<span class="op" id="5470111">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470116">s</span><span class="op" id="5470117">.</span><span class="ident" id="5470118">Name</span>&nbsp;<span class="op" id="5470123">=</span>&nbsp;<span class="ident" id="5470125">ast</span><span class="op" id="5470128">.</span><span class="ident" id="5470129">NewIdent</span><span class="op" id="5470137">(</span><span class="ident" id="5470138">n</span><span class="op" id="5470139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5470143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470147">importDecl</span><span class="op" id="5470157">.</span><span class="ident" id="5470158">Specs</span>&nbsp;<span class="op" id="5470164">=</span>&nbsp;<span class="builtinfunc" id="5470166">append</span><span class="op" id="5470172">(</span><span class="ident" id="5470173">importDecl</span><span class="op" id="5470183">.</span><span class="ident" id="5470184">Specs</span><span class="op" id="5470189">,</span>&nbsp;<span class="ident" id="5470191">s</span><span class="op" id="5470192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5470195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470198">importDecl</span><span class="op" id="5470208">.</span><span class="ident" id="5470209">Specs</span>&nbsp;<span class="op" id="5470215">=</span>&nbsp;<span class="builtinfunc" id="5470217">append</span><span class="op" id="5470223">(</span><span class="ident" id="5470224">importDecl</span><span class="op" id="5470234">.</span><span class="ident" id="5470235">Specs</span><span class="op" id="5470240">,</span>&nbsp;<span class="ident" id="5470242">blankImports</span><span class="op" id="5470254">...</span><span class="op" id="5470257">)</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5470261">//&nbsp;Synthesize&nbsp;main&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470291">funcDecl</span>&nbsp;<span class="op" id="5470300">:=</span>&nbsp;<span class="op" id="5470303">&amp;</span><span class="ident" id="5470304">ast</span><span class="op" id="5470307">.</span><span class="ident" id="5470308">FuncDecl</span><span class="op" id="5470316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470320">Name</span><span class="op" id="5470324">:</span>&nbsp;<span class="ident" id="5470326">ast</span><span class="op" id="5470329">.</span><span class="ident" id="5470330">NewIdent</span><span class="op" id="5470338">(</span><span class="string" id="5470339">&#34;main&#34;</span><span class="op" id="5470345">)</span><span class="op" id="5470346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470350">Type</span><span class="op" id="5470354">:</span>&nbsp;<span class="op" id="5470356">&amp;</span><span class="ident" id="5470357">ast</span><span class="op" id="5470360">.</span><span class="ident" id="5470361">FuncType</span><span class="op" id="5470369">{</span><span class="ident" id="5470370">Params</span><span class="op" id="5470376">:</span>&nbsp;<span class="op" id="5470378">&amp;</span><span class="ident" id="5470379">ast</span><span class="op" id="5470382">.</span><span class="ident" id="5470383">FieldList</span><span class="op" id="5470392">{</span><span class="op" id="5470393">}</span><span class="op" id="5470394">}</span><span class="op" id="5470395">,</span>&nbsp;<span class="comment" id="5470397">//&nbsp;FuncType.Params&nbsp;must&nbsp;be&nbsp;non-nil</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470434">Body</span><span class="op" id="5470438">:</span>&nbsp;<span class="ident" id="5470440">body</span><span class="op" id="5470444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5470447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5470451">//&nbsp;Synthesize&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5470472">return</span>&nbsp;<span class="op" id="5470479">&amp;</span><span class="ident" id="5470480">ast</span><span class="op" id="5470483">.</span><span class="ident" id="5470484">File</span><span class="op" id="5470488">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470492">Name</span><span class="op" id="5470496">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470502">ast</span><span class="op" id="5470505">.</span><span class="ident" id="5470506">NewIdent</span><span class="op" id="5470514">(</span><span class="string" id="5470515">&#34;main&#34;</span><span class="op" id="5470521">)</span><span class="op" id="5470522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470526">Decls</span><span class="op" id="5470531">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5470536">[</span><span class="op" id="5470537">]</span><span class="ident" id="5470538">ast</span><span class="op" id="5470541">.</span><span class="ident" id="5470542">Decl</span><span class="op" id="5470546">{</span><span class="ident" id="5470547">importDecl</span><span class="op" id="5470557">,</span>&nbsp;<span class="ident" id="5470559">funcDecl</span><span class="op" id="5470567">}</span><span class="op" id="5470568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470572">Comments</span><span class="op" id="5470580">:</span>&nbsp;<span class="ident" id="5470582">comments</span><span class="op" id="5470590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5470593">}</span><br>
<span class="lineno"></span><span class="op" id="5470595">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="5470598">//&nbsp;playExampleFile&nbsp;takes&nbsp;a&nbsp;whole&nbsp;file&nbsp;example&nbsp;and&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File</span><br>
<span class="lineno"></span><span class="comment" id="5470676">//&nbsp;such&nbsp;that&nbsp;the&nbsp;example&nbsp;is&nbsp;function&nbsp;main&nbsp;in&nbsp;package&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="5470735">func</span>&nbsp;<span class="ident" id="5470740">playExampleFile</span><span class="op" id="5470755">(</span><span class="ident" id="5470756">file</span>&nbsp;<span class="op" id="5470761">*</span><span class="ident" id="5470762">ast</span><span class="op" id="5470765">.</span><span class="ident" id="5470766">File</span><span class="op" id="5470770">)</span>&nbsp;<span class="op" id="5470772">*</span><span class="ident" id="5470773">ast</span><span class="op" id="5470776">.</span><span class="ident" id="5470777">File</span>&nbsp;<span class="op" id="5470782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5470785">//&nbsp;Strip&nbsp;copyright&nbsp;comment&nbsp;if&nbsp;present.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470825">comments</span>&nbsp;<span class="op" id="5470834">:=</span>&nbsp;<span class="ident" id="5470837">file</span><span class="op" id="5470841">.</span><span class="ident" id="5470842">Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5470852">if</span>&nbsp;<span class="builtinfunc" id="5470855">len</span><span class="op" id="5470858">(</span><span class="ident" id="5470859">comments</span><span class="op" id="5470867">)</span>&nbsp;<span class="op" id="5470869">&gt;</span>&nbsp;<span class="num" id="5470871">0</span>&nbsp;<span class="op" id="5470873">&amp;&amp;</span>&nbsp;<span class="ident" id="5470876">strings</span><span class="op" id="5470883">.</span><span class="ident" id="5470884">HasPrefix</span><span class="op" id="5470893">(</span><span class="ident" id="5470894">comments</span><span class="op" id="5470902">[</span><span class="num" id="5470903">0</span><span class="op" id="5470904">]</span><span class="op" id="5470905">.</span><span class="ident" id="5470906">Text</span><span class="op" id="5470910">(</span><span class="op" id="5470911">)</span><span class="op" id="5470912">,</span>&nbsp;<span class="string" id="5470914">&#34;Copyright&#34;</span><span class="op" id="5470925">)</span>&nbsp;<span class="op" id="5470927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5470931">comments</span>&nbsp;<span class="op" id="5470940">=</span>&nbsp;<span class="ident" id="5470942">comments</span><span class="op" id="5470950">[</span><span class="num" id="5470951">1</span><span class="op" id="5470952">:</span><span class="op" id="5470953">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5470956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5470960">//&nbsp;Copy&nbsp;declaration&nbsp;slice,&nbsp;rewriting&nbsp;the&nbsp;ExampleX&nbsp;function&nbsp;to&nbsp;main.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5471029">var</span>&nbsp;<span class="ident" id="5471033">decls</span>&nbsp;<span class="op" id="5471039">[</span><span class="op" id="5471040">]</span><span class="ident" id="5471041">ast</span><span class="op" id="5471044">.</span><span class="ident" id="5471045">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5471051">for</span>&nbsp;<span class="ident" id="5471055">_</span><span class="op" id="5471056">,</span>&nbsp;<span class="ident" id="5471058">d</span>&nbsp;<span class="op" id="5471060">:=</span>&nbsp;<span class="keyword" id="5471063">range</span>&nbsp;<span class="ident" id="5471069">file</span><span class="op" id="5471073">.</span><span class="ident" id="5471074">Decls</span>&nbsp;<span class="op" id="5471080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5471084">if</span>&nbsp;<span class="ident" id="5471087">f</span><span class="op" id="5471088">,</span>&nbsp;<span class="ident" id="5471090">ok</span>&nbsp;<span class="op" id="5471093">:=</span>&nbsp;<span class="ident" id="5471096">d</span><span class="op" id="5471097">.</span><span class="op" id="5471098">(</span><span class="op" id="5471099">*</span><span class="ident" id="5471100">ast</span><span class="op" id="5471103">.</span><span class="ident" id="5471104">FuncDecl</span><span class="op" id="5471112">)</span><span class="op" id="5471113">;</span>&nbsp;<span class="ident" id="5471115">ok</span>&nbsp;<span class="op" id="5471118">&amp;&amp;</span>&nbsp;<span class="ident" id="5471121">isTest</span><span class="op" id="5471127">(</span><span class="ident" id="5471128">f</span><span class="op" id="5471129">.</span><span class="ident" id="5471130">Name</span><span class="op" id="5471134">.</span><span class="ident" id="5471135">Name</span><span class="op" id="5471139">,</span>&nbsp;<span class="string" id="5471141">&#34;Example&#34;</span><span class="op" id="5471150">)</span>&nbsp;<span class="op" id="5471152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5471157">//&nbsp;Copy&nbsp;the&nbsp;FuncDecl,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5471211">newF</span>&nbsp;<span class="op" id="5471216">:=</span>&nbsp;<span class="op" id="5471219">*</span><span class="ident" id="5471220">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5471225">newF</span><span class="op" id="5471229">.</span><span class="ident" id="5471230">Name</span>&nbsp;<span class="op" id="5471235">=</span>&nbsp;<span class="ident" id="5471237">ast</span><span class="op" id="5471240">.</span><span class="ident" id="5471241">NewIdent</span><span class="op" id="5471249">(</span><span class="string" id="5471250">&#34;main&#34;</span><span class="op" id="5471256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5471261">newF</span><span class="op" id="5471265">.</span><span class="ident" id="5471266">Body</span><span class="op" id="5471270">,</span>&nbsp;<span class="ident" id="5471272">comments</span>&nbsp;<span class="op" id="5471281">=</span>&nbsp;<span class="ident" id="5471283">stripOutputComment</span><span class="op" id="5471301">(</span><span class="ident" id="5471302">f</span><span class="op" id="5471303">.</span><span class="ident" id="5471304">Body</span><span class="op" id="5471308">,</span>&nbsp;<span class="ident" id="5471310">comments</span><span class="op" id="5471318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5471323">d</span>&nbsp;<span class="op" id="5471325">=</span>&nbsp;<span class="op" id="5471327">&amp;</span><span class="ident" id="5471328">newF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5471335">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5471339">decls</span>&nbsp;<span class="op" id="5471345">=</span>&nbsp;<span class="builtinfunc" id="5471347">append</span><span class="op" id="5471353">(</span><span class="ident" id="5471354">decls</span><span class="op" id="5471359">,</span>&nbsp;<span class="ident" id="5471361">d</span><span class="op" id="5471362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5471365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5471369">//&nbsp;Copy&nbsp;the&nbsp;File,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5471417">f</span>&nbsp;<span class="op" id="5471419">:=</span>&nbsp;<span class="op" id="5471422">*</span><span class="ident" id="5471423">file</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5471429">f</span><span class="op" id="5471430">.</span><span class="ident" id="5471431">Name</span>&nbsp;<span class="op" id="5471436">=</span>&nbsp;<span class="ident" id="5471438">ast</span><span class="op" id="5471441">.</span><span class="ident" id="5471442">NewIdent</span><span class="op" id="5471450">(</span><span class="string" id="5471451">&#34;main&#34;</span><span class="op" id="5471457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5471460">f</span><span class="op" id="5471461">.</span><span class="ident" id="5471462">Decls</span>&nbsp;<span class="op" id="5471468">=</span>&nbsp;<span class="ident" id="5471470">decls</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5471477">f</span><span class="op" id="5471478">.</span><span class="ident" id="5471479">Comments</span>&nbsp;<span class="op" id="5471488">=</span>&nbsp;<span class="ident" id="5471490">comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5471500">return</span>&nbsp;<span class="op" id="5471507">&amp;</span><span class="ident" id="5471508">f</span><br>
<span class="lineno"></span><span class="op" id="5471510">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="5471513">//&nbsp;stripOutputComment&nbsp;finds&nbsp;and&nbsp;removes&nbsp;an&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;from&nbsp;body</span><br>
<span class="lineno"></span><span class="comment" id="5471584">//&nbsp;and&nbsp;comments,&nbsp;and&nbsp;adjusts&nbsp;the&nbsp;body&nbsp;block&#39;s&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span><span class="keyword" id="5471644">func</span>&nbsp;<span class="ident" id="5471649">stripOutputComment</span><span class="op" id="5471667">(</span><span class="ident" id="5471668">body</span>&nbsp;<span class="op" id="5471673">*</span><span class="ident" id="5471674">ast</span><span class="op" id="5471677">.</span><span class="ident" id="5471678">BlockStmt</span><span class="op" id="5471687">,</span>&nbsp;<span class="ident" id="5471689">comments</span>&nbsp;<span class="op" id="5471698">[</span><span class="op" id="5471699">]</span><span class="op" id="5471700">*</span><span class="ident" id="5471701">ast</span><span class="op" id="5471704">.</span><span class="ident" id="5471705">CommentGroup</span><span class="op" id="5471717">)</span>&nbsp;<span class="op" id="5471719">(</span><span class="op" id="5471720">*</span><span class="ident" id="5471721">ast</span><span class="op" id="5471724">.</span><span class="ident" id="5471725">BlockStmt</span><span class="op" id="5471734">,</span>&nbsp;<span class="op" id="5471736">[</span><span class="op" id="5471737">]</span><span class="op" id="5471738">*</span><span class="ident" id="5471739">ast</span><span class="op" id="5471742">.</span><span class="ident" id="5471743">CommentGroup</span><span class="op" id="5471755">)</span>&nbsp;<span class="op" id="5471757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5471760">//&nbsp;Do&nbsp;nothing&nbsp;if&nbsp;no&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;found.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5471806">i</span><span class="op" id="5471807">,</span>&nbsp;<span class="ident" id="5471809">last</span>&nbsp;<span class="op" id="5471814">:=</span>&nbsp;<span class="ident" id="5471817">lastComment</span><span class="op" id="5471828">(</span><span class="ident" id="5471829">body</span><span class="op" id="5471833">,</span>&nbsp;<span class="ident" id="5471835">comments</span><span class="op" id="5471843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5471846">if</span>&nbsp;<span class="ident" id="5471849">last</span>&nbsp;<span class="op" id="5471854">==</span>&nbsp;<span class="builtintype" id="5471857">nil</span>&nbsp;<span class="op" id="5471861">||</span>&nbsp;<span class="op" id="5471864">!</span><span class="ident" id="5471865">outputPrefix</span><span class="op" id="5471877">.</span><span class="ident" id="5471878">MatchString</span><span class="op" id="5471889">(</span><span class="ident" id="5471890">last</span><span class="op" id="5471894">.</span><span class="ident" id="5471895">Text</span><span class="op" id="5471899">(</span><span class="op" id="5471900">)</span><span class="op" id="5471901">)</span>&nbsp;<span class="op" id="5471903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5471907">return</span>&nbsp;<span class="ident" id="5471914">body</span><span class="op" id="5471918">,</span>&nbsp;<span class="ident" id="5471920">comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5471930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5471934">//&nbsp;Copy&nbsp;body&nbsp;and&nbsp;comments,&nbsp;as&nbsp;the&nbsp;originals&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5472002">newBody</span>&nbsp;<span class="op" id="5472010">:=</span>&nbsp;<span class="op" id="5472013">&amp;</span><span class="ident" id="5472014">ast</span><span class="op" id="5472017">.</span><span class="ident" id="5472018">BlockStmt</span><span class="op" id="5472027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5472031">Lbrace</span><span class="op" id="5472037">:</span>&nbsp;<span class="ident" id="5472039">body</span><span class="op" id="5472043">.</span><span class="ident" id="5472044">Lbrace</span><span class="op" id="5472050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5472054">List</span><span class="op" id="5472058">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5472062">body</span><span class="op" id="5472066">.</span><span class="ident" id="5472067">List</span><span class="op" id="5472071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5472075">Rbrace</span><span class="op" id="5472081">:</span>&nbsp;<span class="ident" id="5472083">last</span><span class="op" id="5472087">.</span><span class="ident" id="5472088">Pos</span><span class="op" id="5472091">(</span><span class="op" id="5472092">)</span><span class="op" id="5472093">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5472096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5472099">newComments</span>&nbsp;<span class="op" id="5472111">:=</span>&nbsp;<span class="builtinfunc" id="5472114">make</span><span class="op" id="5472118">(</span><span class="op" id="5472119">[</span><span class="op" id="5472120">]</span><span class="op" id="5472121">*</span><span class="ident" id="5472122">ast</span><span class="op" id="5472125">.</span><span class="ident" id="5472126">CommentGroup</span><span class="op" id="5472138">,</span>&nbsp;<span class="builtinfunc" id="5472140">len</span><span class="op" id="5472143">(</span><span class="ident" id="5472144">comments</span><span class="op" id="5472152">)</span><span class="op" id="5472153">-</span><span class="num" id="5472154">1</span><span class="op" id="5472155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5472158">copy</span><span class="op" id="5472162">(</span><span class="ident" id="5472163">newComments</span><span class="op" id="5472174">,</span>&nbsp;<span class="ident" id="5472176">comments</span><span class="op" id="5472184">[</span><span class="op" id="5472185">:</span><span class="ident" id="5472186">i</span><span class="op" id="5472187">]</span><span class="op" id="5472188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5472191">copy</span><span class="op" id="5472195">(</span><span class="ident" id="5472196">newComments</span><span class="op" id="5472207">[</span><span class="ident" id="5472208">i</span><span class="op" id="5472209">:</span><span class="op" id="5472210">]</span><span class="op" id="5472211">,</span>&nbsp;<span class="ident" id="5472213">comments</span><span class="op" id="5472221">[</span><span class="ident" id="5472222">i</span><span class="op" id="5472223">+</span><span class="num" id="5472224">1</span><span class="op" id="5472225">:</span><span class="op" id="5472226">]</span><span class="op" id="5472227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5472230">return</span>&nbsp;<span class="ident" id="5472237">newBody</span><span class="op" id="5472244">,</span>&nbsp;<span class="ident" id="5472246">newComments</span><br>
<span class="lineno">340</span><span class="op" id="5472258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5472261">//&nbsp;lastComment&nbsp;returns&nbsp;the&nbsp;last&nbsp;comment&nbsp;inside&nbsp;the&nbsp;provided&nbsp;block.</span><br>
<span class="lineno"></span><span class="keyword" id="5472328">func</span>&nbsp;<span class="ident" id="5472333">lastComment</span><span class="op" id="5472344">(</span><span class="ident" id="5472345">b</span>&nbsp;<span class="op" id="5472347">*</span><span class="ident" id="5472348">ast</span><span class="op" id="5472351">.</span><span class="ident" id="5472352">BlockStmt</span><span class="op" id="5472361">,</span>&nbsp;<span class="ident" id="5472363">c</span>&nbsp;<span class="op" id="5472365">[</span><span class="op" id="5472366">]</span><span class="op" id="5472367">*</span><span class="ident" id="5472368">ast</span><span class="op" id="5472371">.</span><span class="ident" id="5472372">CommentGroup</span><span class="op" id="5472384">)</span>&nbsp;<span class="op" id="5472386">(</span><span class="ident" id="5472387">i</span>&nbsp;<span class="builtintype" id="5472389">int</span><span class="op" id="5472392">,</span>&nbsp;<span class="ident" id="5472394">last</span>&nbsp;<span class="op" id="5472399">*</span><span class="ident" id="5472400">ast</span><span class="op" id="5472403">.</span><span class="ident" id="5472404">CommentGroup</span><span class="op" id="5472416">)</span>&nbsp;<span class="op" id="5472418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5472421">pos</span><span class="op" id="5472424">,</span>&nbsp;<span class="ident" id="5472426">end</span>&nbsp;<span class="op" id="5472430">:=</span>&nbsp;<span class="ident" id="5472433">b</span><span class="op" id="5472434">.</span><span class="ident" id="5472435">Pos</span><span class="op" id="5472438">(</span><span class="op" id="5472439">)</span><span class="op" id="5472440">,</span>&nbsp;<span class="ident" id="5472442">b</span><span class="op" id="5472443">.</span><span class="ident" id="5472444">End</span><span class="op" id="5472447">(</span><span class="op" id="5472448">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5472451">for</span>&nbsp;<span class="ident" id="5472455">j</span><span class="op" id="5472456">,</span>&nbsp;<span class="ident" id="5472458">cg</span>&nbsp;<span class="op" id="5472461">:=</span>&nbsp;<span class="keyword" id="5472464">range</span>&nbsp;<span class="ident" id="5472470">c</span>&nbsp;<span class="op" id="5472472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5472476">if</span>&nbsp;<span class="ident" id="5472479">cg</span><span class="op" id="5472481">.</span><span class="ident" id="5472482">Pos</span><span class="op" id="5472485">(</span><span class="op" id="5472486">)</span>&nbsp;<span class="op" id="5472488">&lt;</span>&nbsp;<span class="ident" id="5472490">pos</span>&nbsp;<span class="op" id="5472494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5472499">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5472510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5472514">if</span>&nbsp;<span class="ident" id="5472517">cg</span><span class="op" id="5472519">.</span><span class="ident" id="5472520">End</span><span class="op" id="5472523">(</span><span class="op" id="5472524">)</span>&nbsp;<span class="op" id="5472526">&gt;</span>&nbsp;<span class="ident" id="5472528">end</span>&nbsp;<span class="op" id="5472532">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5472537">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5472545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5472549">i</span><span class="op" id="5472550">,</span>&nbsp;<span class="ident" id="5472552">last</span>&nbsp;<span class="op" id="5472557">=</span>&nbsp;<span class="ident" id="5472559">j</span><span class="op" id="5472560">,</span>&nbsp;<span class="ident" id="5472562">cg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5472566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5472569">return</span><br>
<span class="lineno">355</span><span class="op" id="5472576">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
