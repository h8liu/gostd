<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html" class="current">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2329075">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2329130">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2329184">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2329235">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2329313">package</span>&nbsp;<span class="ident" id="2329321">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2329325">import</span>&nbsp;<span class="op" id="2329332">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2329335">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2329345">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2329348">//&nbsp;The&nbsp;only&nbsp;signal&nbsp;values&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;present&nbsp;on&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="comment" id="2329414">//&nbsp;are&nbsp;Interrupt&nbsp;(send&nbsp;the&nbsp;process&nbsp;an&nbsp;interrupt)&nbsp;and&nbsp;Kill&nbsp;(force</span><br>
<span class="lineno">15</span><span class="comment" id="2329479">//&nbsp;the&nbsp;process&nbsp;to&nbsp;exit).</span><br>
<span class="lineno"></span><span class="keyword" id="2329504">var</span>&nbsp;<span class="op" id="2329508">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329511">Interrupt</span>&nbsp;<span class="ident" id="2329521">Signal</span>&nbsp;<span class="op" id="2329528">=</span>&nbsp;<span class="ident" id="2329530">syscall</span><span class="op" id="2329537">.</span><span class="ident" id="2329538">SIGINT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329546">Kill</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329556">Signal</span>&nbsp;<span class="op" id="2329563">=</span>&nbsp;<span class="ident" id="2329565">syscall</span><span class="op" id="2329572">.</span><span class="ident" id="2329573">SIGKILL</span><br>
<span class="lineno"></span><span class="op" id="2329581">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="2329584">func</span>&nbsp;<span class="ident" id="2329589">startProcess</span><span class="op" id="2329601">(</span><span class="ident" id="2329602">name</span>&nbsp;<span class="builtintype" id="2329607">string</span><span class="op" id="2329613">,</span>&nbsp;<span class="ident" id="2329615">argv</span>&nbsp;<span class="op" id="2329620">[</span><span class="op" id="2329621">]</span><span class="builtintype" id="2329622">string</span><span class="op" id="2329628">,</span>&nbsp;<span class="ident" id="2329630">attr</span>&nbsp;<span class="op" id="2329635">*</span><span class="ident" id="2329636">ProcAttr</span><span class="op" id="2329644">)</span>&nbsp;<span class="op" id="2329646">(</span><span class="ident" id="2329647">p</span>&nbsp;<span class="op" id="2329649">*</span><span class="ident" id="2329650">Process</span><span class="op" id="2329657">,</span>&nbsp;<span class="ident" id="2329659">err</span>&nbsp;<span class="builtintype" id="2329663">error</span><span class="op" id="2329668">)</span>&nbsp;<span class="op" id="2329670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2329673">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;SysProcAttr&nbsp;(ie.&nbsp;no&nbsp;Chroot&nbsp;or&nbsp;changed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2329730">//&nbsp;UID/GID),&nbsp;double-check&nbsp;existence&nbsp;of&nbsp;the&nbsp;directory&nbsp;we&nbsp;want</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2329792">//&nbsp;to&nbsp;chdir&nbsp;into.&nbsp;&nbsp;We&nbsp;can&nbsp;make&nbsp;the&nbsp;error&nbsp;clearer&nbsp;this&nbsp;way.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2329852">if</span>&nbsp;<span class="ident" id="2329855">attr</span>&nbsp;<span class="op" id="2329860">!=</span>&nbsp;<span class="builtintype" id="2329863">nil</span>&nbsp;<span class="op" id="2329867">&amp;&amp;</span>&nbsp;<span class="ident" id="2329870">attr</span><span class="op" id="2329874">.</span><span class="ident" id="2329875">Sys</span>&nbsp;<span class="op" id="2329879">==</span>&nbsp;<span class="builtintype" id="2329882">nil</span>&nbsp;<span class="op" id="2329886">&amp;&amp;</span>&nbsp;<span class="ident" id="2329889">attr</span><span class="op" id="2329893">.</span><span class="ident" id="2329894">Dir</span>&nbsp;<span class="op" id="2329898">!=</span>&nbsp;<span class="string" id="2329901">&#34;&#34;</span>&nbsp;<span class="op" id="2329904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2329908">if</span>&nbsp;<span class="ident" id="2329911">_</span><span class="op" id="2329912">,</span>&nbsp;<span class="ident" id="2329914">err</span>&nbsp;<span class="op" id="2329918">:=</span>&nbsp;<span class="ident" id="2329921">Stat</span><span class="op" id="2329925">(</span><span class="ident" id="2329926">attr</span><span class="op" id="2329930">.</span><span class="ident" id="2329931">Dir</span><span class="op" id="2329934">)</span><span class="op" id="2329935">;</span>&nbsp;<span class="ident" id="2329937">err</span>&nbsp;<span class="op" id="2329941">!=</span>&nbsp;<span class="builtintype" id="2329944">nil</span>&nbsp;<span class="op" id="2329948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329953">pe</span>&nbsp;<span class="op" id="2329956">:=</span>&nbsp;<span class="ident" id="2329959">err</span><span class="op" id="2329962">.</span><span class="op" id="2329963">(</span><span class="op" id="2329964">*</span><span class="ident" id="2329965">PathError</span><span class="op" id="2329974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329979">pe</span><span class="op" id="2329981">.</span><span class="ident" id="2329982">Op</span>&nbsp;<span class="op" id="2329985">=</span>&nbsp;<span class="string" id="2329987">&#34;chdir&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2329998">return</span>&nbsp;<span class="builtintype" id="2330005">nil</span><span class="op" id="2330008">,</span>&nbsp;<span class="ident" id="2330010">pe</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2330015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2330018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330022">sysattr</span>&nbsp;<span class="op" id="2330030">:=</span>&nbsp;<span class="op" id="2330033">&amp;</span><span class="ident" id="2330034">syscall</span><span class="op" id="2330041">.</span><span class="ident" id="2330042">ProcAttr</span><span class="op" id="2330050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330054">Dir</span><span class="op" id="2330057">:</span>&nbsp;<span class="ident" id="2330059">attr</span><span class="op" id="2330063">.</span><span class="ident" id="2330064">Dir</span><span class="op" id="2330067">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330071">Env</span><span class="op" id="2330074">:</span>&nbsp;<span class="ident" id="2330076">attr</span><span class="op" id="2330080">.</span><span class="ident" id="2330081">Env</span><span class="op" id="2330084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330088">Sys</span><span class="op" id="2330091">:</span>&nbsp;<span class="ident" id="2330093">attr</span><span class="op" id="2330097">.</span><span class="ident" id="2330098">Sys</span><span class="op" id="2330101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2330104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330107">if</span>&nbsp;<span class="ident" id="2330110">sysattr</span><span class="op" id="2330117">.</span><span class="ident" id="2330118">Env</span>&nbsp;<span class="op" id="2330122">==</span>&nbsp;<span class="builtintype" id="2330125">nil</span>&nbsp;<span class="op" id="2330129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330133">sysattr</span><span class="op" id="2330140">.</span><span class="ident" id="2330141">Env</span>&nbsp;<span class="op" id="2330145">=</span>&nbsp;<span class="ident" id="2330147">Environ</span><span class="op" id="2330154">(</span><span class="op" id="2330155">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2330158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330161">for</span>&nbsp;<span class="ident" id="2330165">_</span><span class="op" id="2330166">,</span>&nbsp;<span class="ident" id="2330168">f</span>&nbsp;<span class="op" id="2330170">:=</span>&nbsp;<span class="keyword" id="2330173">range</span>&nbsp;<span class="ident" id="2330179">attr</span><span class="op" id="2330183">.</span><span class="ident" id="2330184">Files</span>&nbsp;<span class="op" id="2330190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330194">sysattr</span><span class="op" id="2330201">.</span><span class="ident" id="2330202">Files</span>&nbsp;<span class="op" id="2330208">=</span>&nbsp;<span class="builtinfunc" id="2330210">append</span><span class="op" id="2330216">(</span><span class="ident" id="2330217">sysattr</span><span class="op" id="2330224">.</span><span class="ident" id="2330225">Files</span><span class="op" id="2330230">,</span>&nbsp;<span class="ident" id="2330232">f</span><span class="op" id="2330233">.</span><span class="ident" id="2330234">Fd</span><span class="op" id="2330236">(</span><span class="op" id="2330237">)</span><span class="op" id="2330238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2330241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330245">pid</span><span class="op" id="2330248">,</span>&nbsp;<span class="ident" id="2330250">h</span><span class="op" id="2330251">,</span>&nbsp;<span class="ident" id="2330253">e</span>&nbsp;<span class="op" id="2330255">:=</span>&nbsp;<span class="ident" id="2330258">syscall</span><span class="op" id="2330265">.</span><span class="ident" id="2330266">StartProcess</span><span class="op" id="2330278">(</span><span class="ident" id="2330279">name</span><span class="op" id="2330283">,</span>&nbsp;<span class="ident" id="2330285">argv</span><span class="op" id="2330289">,</span>&nbsp;<span class="ident" id="2330291">sysattr</span><span class="op" id="2330298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330301">if</span>&nbsp;<span class="ident" id="2330304">e</span>&nbsp;<span class="op" id="2330306">!=</span>&nbsp;<span class="builtintype" id="2330309">nil</span>&nbsp;<span class="op" id="2330313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330317">return</span>&nbsp;<span class="builtintype" id="2330324">nil</span><span class="op" id="2330327">,</span>&nbsp;<span class="op" id="2330329">&amp;</span><span class="ident" id="2330330">PathError</span><span class="op" id="2330339">{</span><span class="string" id="2330340">&#34;fork/exec&#34;</span><span class="op" id="2330351">,</span>&nbsp;<span class="ident" id="2330353">name</span><span class="op" id="2330357">,</span>&nbsp;<span class="ident" id="2330359">e</span><span class="op" id="2330360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2330363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330366">return</span>&nbsp;<span class="ident" id="2330373">newProcess</span><span class="op" id="2330383">(</span><span class="ident" id="2330384">pid</span><span class="op" id="2330387">,</span>&nbsp;<span class="ident" id="2330389">h</span><span class="op" id="2330390">)</span><span class="op" id="2330391">,</span>&nbsp;<span class="builtintype" id="2330393">nil</span><br>
<span class="lineno">50</span><span class="op" id="2330397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2330400">func</span>&nbsp;<span class="op" id="2330405">(</span><span class="ident" id="2330406">p</span>&nbsp;<span class="op" id="2330408">*</span><span class="ident" id="2330409">Process</span><span class="op" id="2330416">)</span>&nbsp;<span class="ident" id="2330418">kill</span><span class="op" id="2330422">(</span><span class="op" id="2330423">)</span>&nbsp;<span class="builtintype" id="2330425">error</span>&nbsp;<span class="op" id="2330431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330434">return</span>&nbsp;<span class="ident" id="2330441">p</span><span class="op" id="2330442">.</span><span class="ident" id="2330443">Signal</span><span class="op" id="2330449">(</span><span class="ident" id="2330450">Kill</span><span class="op" id="2330454">)</span><br>
<span class="lineno"></span><span class="op" id="2330456">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2330459">//&nbsp;ProcessState&nbsp;stores&nbsp;information&nbsp;about&nbsp;a&nbsp;process,&nbsp;as&nbsp;reported&nbsp;by&nbsp;Wait.</span><br>
<span class="lineno"></span><span class="keyword" id="2330532">type</span>&nbsp;<span class="ident" id="2330537">ProcessState</span>&nbsp;<span class="keyword" id="2330550">struct</span>&nbsp;<span class="op" id="2330557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330560">pid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2330567">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2330586">//&nbsp;The&nbsp;process&#39;s&nbsp;id.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330608">status</span>&nbsp;<span class="ident" id="2330615">syscall</span><span class="op" id="2330622">.</span><span class="ident" id="2330623">WaitStatus</span>&nbsp;<span class="comment" id="2330634">//&nbsp;System-dependent&nbsp;status&nbsp;info.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330668">rusage</span>&nbsp;<span class="op" id="2330675">*</span><span class="ident" id="2330676">syscall</span><span class="op" id="2330683">.</span><span class="ident" id="2330684">Rusage</span><br>
<span class="lineno"></span><span class="op" id="2330691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2330694">//&nbsp;Pid&nbsp;returns&nbsp;the&nbsp;process&nbsp;id&nbsp;of&nbsp;the&nbsp;exited&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="2330747">func</span>&nbsp;<span class="op" id="2330752">(</span><span class="ident" id="2330753">p</span>&nbsp;<span class="op" id="2330755">*</span><span class="ident" id="2330756">ProcessState</span><span class="op" id="2330768">)</span>&nbsp;<span class="ident" id="2330770">Pid</span><span class="op" id="2330773">(</span><span class="op" id="2330774">)</span>&nbsp;<span class="builtintype" id="2330776">int</span>&nbsp;<span class="op" id="2330780">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330783">return</span>&nbsp;<span class="ident" id="2330790">p</span><span class="op" id="2330791">.</span><span class="ident" id="2330792">pid</span><br>
<span class="lineno"></span><span class="op" id="2330796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2330799">func</span>&nbsp;<span class="op" id="2330804">(</span><span class="ident" id="2330805">p</span>&nbsp;<span class="op" id="2330807">*</span><span class="ident" id="2330808">ProcessState</span><span class="op" id="2330820">)</span>&nbsp;<span class="ident" id="2330822">exited</span><span class="op" id="2330828">(</span><span class="op" id="2330829">)</span>&nbsp;<span class="builtintype" id="2330831">bool</span>&nbsp;<span class="op" id="2330836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330839">return</span>&nbsp;<span class="ident" id="2330846">p</span><span class="op" id="2330847">.</span><span class="ident" id="2330848">status</span><span class="op" id="2330854">.</span><span class="ident" id="2330855">Exited</span><span class="op" id="2330861">(</span><span class="op" id="2330862">)</span><br>
<span class="lineno">70</span><span class="op" id="2330864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2330867">func</span>&nbsp;<span class="op" id="2330872">(</span><span class="ident" id="2330873">p</span>&nbsp;<span class="op" id="2330875">*</span><span class="ident" id="2330876">ProcessState</span><span class="op" id="2330888">)</span>&nbsp;<span class="ident" id="2330890">success</span><span class="op" id="2330897">(</span><span class="op" id="2330898">)</span>&nbsp;<span class="builtintype" id="2330900">bool</span>&nbsp;<span class="op" id="2330905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330908">return</span>&nbsp;<span class="ident" id="2330915">p</span><span class="op" id="2330916">.</span><span class="ident" id="2330917">status</span><span class="op" id="2330923">.</span><span class="ident" id="2330924">ExitStatus</span><span class="op" id="2330934">(</span><span class="op" id="2330935">)</span>&nbsp;<span class="op" id="2330937">==</span>&nbsp;<span class="num" id="2330940">0</span><br>
<span class="lineno"></span><span class="op" id="2330942">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="2330945">func</span>&nbsp;<span class="op" id="2330950">(</span><span class="ident" id="2330951">p</span>&nbsp;<span class="op" id="2330953">*</span><span class="ident" id="2330954">ProcessState</span><span class="op" id="2330966">)</span>&nbsp;<span class="ident" id="2330968">sys</span><span class="op" id="2330971">(</span><span class="op" id="2330972">)</span>&nbsp;<span class="keyword" id="2330974">interface</span><span class="op" id="2330983">{</span><span class="op" id="2330984">}</span>&nbsp;<span class="op" id="2330986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330989">return</span>&nbsp;<span class="ident" id="2330996">p</span><span class="op" id="2330997">.</span><span class="ident" id="2330998">status</span><br>
<span class="lineno"></span><span class="op" id="2331005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="2331008">func</span>&nbsp;<span class="op" id="2331013">(</span><span class="ident" id="2331014">p</span>&nbsp;<span class="op" id="2331016">*</span><span class="ident" id="2331017">ProcessState</span><span class="op" id="2331029">)</span>&nbsp;<span class="ident" id="2331031">sysUsage</span><span class="op" id="2331039">(</span><span class="op" id="2331040">)</span>&nbsp;<span class="keyword" id="2331042">interface</span><span class="op" id="2331051">{</span><span class="op" id="2331052">}</span>&nbsp;<span class="op" id="2331054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331057">return</span>&nbsp;<span class="ident" id="2331064">p</span><span class="op" id="2331065">.</span><span class="ident" id="2331066">rusage</span><br>
<span class="lineno"></span><span class="op" id="2331073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2331076">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno">85</span><span class="keyword" id="2331108">func</span>&nbsp;<span class="ident" id="2331113">itod</span><span class="op" id="2331117">(</span><span class="ident" id="2331118">i</span>&nbsp;<span class="builtintype" id="2331120">int</span><span class="op" id="2331123">)</span>&nbsp;<span class="builtintype" id="2331125">string</span>&nbsp;<span class="op" id="2331132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331135">if</span>&nbsp;<span class="ident" id="2331138">i</span>&nbsp;<span class="op" id="2331140">==</span>&nbsp;<span class="num" id="2331143">0</span>&nbsp;<span class="op" id="2331145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331149">return</span>&nbsp;<span class="string" id="2331156">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331165">u</span>&nbsp;<span class="op" id="2331167">:=</span>&nbsp;<span class="ident" id="2331170">uint64</span><span class="op" id="2331176">(</span><span class="ident" id="2331177">i</span><span class="op" id="2331178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331181">if</span>&nbsp;<span class="ident" id="2331184">i</span>&nbsp;<span class="op" id="2331186">&lt;</span>&nbsp;<span class="num" id="2331188">0</span>&nbsp;<span class="op" id="2331190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331194">u</span>&nbsp;<span class="op" id="2331196">=</span>&nbsp;<span class="op" id="2331198">-</span><span class="ident" id="2331199">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2331206">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331245">var</span>&nbsp;<span class="ident" id="2331249">b</span>&nbsp;<span class="op" id="2331251">[</span><span class="num" id="2331252">32</span><span class="op" id="2331254">]</span><span class="builtintype" id="2331255">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331261">bp</span>&nbsp;<span class="op" id="2331264">:=</span>&nbsp;<span class="builtinfunc" id="2331267">len</span><span class="op" id="2331270">(</span><span class="ident" id="2331271">b</span><span class="op" id="2331272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331275">for</span>&nbsp;<span class="op" id="2331279">;</span>&nbsp;<span class="ident" id="2331281">u</span>&nbsp;<span class="op" id="2331283">&gt;</span>&nbsp;<span class="num" id="2331285">0</span><span class="op" id="2331286">;</span>&nbsp;<span class="ident" id="2331288">u</span>&nbsp;<span class="op" id="2331290">/=</span>&nbsp;<span class="num" id="2331293">10</span>&nbsp;<span class="op" id="2331296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331300">bp</span><span class="op" id="2331302">--</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331307">b</span><span class="op" id="2331308">[</span><span class="ident" id="2331309">bp</span><span class="op" id="2331311">]</span>&nbsp;<span class="op" id="2331313">=</span>&nbsp;<span class="builtintype" id="2331315">byte</span><span class="op" id="2331319">(</span><span class="ident" id="2331320">u</span><span class="op" id="2331321">%</span><span class="num" id="2331322">10</span><span class="op" id="2331324">)</span>&nbsp;<span class="op" id="2331326">+</span>&nbsp;<span class="string" id="2331328">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331337">if</span>&nbsp;<span class="ident" id="2331340">i</span>&nbsp;<span class="op" id="2331342">&lt;</span>&nbsp;<span class="num" id="2331344">0</span>&nbsp;<span class="op" id="2331346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331350">bp</span><span class="op" id="2331352">--</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331357">b</span><span class="op" id="2331358">[</span><span class="ident" id="2331359">bp</span><span class="op" id="2331361">]</span>&nbsp;<span class="op" id="2331363">=</span>&nbsp;<span class="string" id="2331365">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331374">return</span>&nbsp;<span class="builtintype" id="2331381">string</span><span class="op" id="2331387">(</span><span class="ident" id="2331388">b</span><span class="op" id="2331389">[</span><span class="ident" id="2331390">bp</span><span class="op" id="2331392">:</span><span class="op" id="2331393">]</span><span class="op" id="2331394">)</span><br>
<span class="lineno"></span><span class="op" id="2331396">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="2331399">func</span>&nbsp;<span class="op" id="2331404">(</span><span class="ident" id="2331405">p</span>&nbsp;<span class="op" id="2331407">*</span><span class="ident" id="2331408">ProcessState</span><span class="op" id="2331420">)</span>&nbsp;<span class="ident" id="2331422">String</span><span class="op" id="2331428">(</span><span class="op" id="2331429">)</span>&nbsp;<span class="builtintype" id="2331431">string</span>&nbsp;<span class="op" id="2331438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331441">if</span>&nbsp;<span class="ident" id="2331444">p</span>&nbsp;<span class="op" id="2331446">==</span>&nbsp;<span class="builtintype" id="2331449">nil</span>&nbsp;<span class="op" id="2331453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331457">return</span>&nbsp;<span class="string" id="2331464">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331473">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331476">status</span>&nbsp;<span class="op" id="2331483">:=</span>&nbsp;<span class="ident" id="2331486">p</span><span class="op" id="2331487">.</span><span class="ident" id="2331488">Sys</span><span class="op" id="2331491">(</span><span class="op" id="2331492">)</span><span class="op" id="2331493">.</span><span class="op" id="2331494">(</span><span class="ident" id="2331495">syscall</span><span class="op" id="2331502">.</span><span class="ident" id="2331503">WaitStatus</span><span class="op" id="2331513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331516">res</span>&nbsp;<span class="op" id="2331520">:=</span>&nbsp;<span class="string" id="2331523">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331527">switch</span>&nbsp;<span class="op" id="2331534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331537">case</span>&nbsp;<span class="ident" id="2331542">status</span><span class="op" id="2331548">.</span><span class="ident" id="2331549">Exited</span><span class="op" id="2331555">(</span><span class="op" id="2331556">)</span><span class="op" id="2331557">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331561">res</span>&nbsp;<span class="op" id="2331565">=</span>&nbsp;<span class="string" id="2331567">&#34;exit&nbsp;status&nbsp;&#34;</span>&nbsp;<span class="op" id="2331582">+</span>&nbsp;<span class="ident" id="2331584">itod</span><span class="op" id="2331588">(</span><span class="ident" id="2331589">status</span><span class="op" id="2331595">.</span><span class="ident" id="2331596">ExitStatus</span><span class="op" id="2331606">(</span><span class="op" id="2331607">)</span><span class="op" id="2331608">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331611">case</span>&nbsp;<span class="ident" id="2331616">status</span><span class="op" id="2331622">.</span><span class="ident" id="2331623">Signaled</span><span class="op" id="2331631">(</span><span class="op" id="2331632">)</span><span class="op" id="2331633">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331637">res</span>&nbsp;<span class="op" id="2331641">=</span>&nbsp;<span class="string" id="2331643">&#34;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2331654">+</span>&nbsp;<span class="ident" id="2331656">status</span><span class="op" id="2331662">.</span><span class="ident" id="2331663">Signal</span><span class="op" id="2331669">(</span><span class="op" id="2331670">)</span><span class="op" id="2331671">.</span><span class="ident" id="2331672">String</span><span class="op" id="2331678">(</span><span class="op" id="2331679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331682">case</span>&nbsp;<span class="ident" id="2331687">status</span><span class="op" id="2331693">.</span><span class="ident" id="2331694">Stopped</span><span class="op" id="2331701">(</span><span class="op" id="2331702">)</span><span class="op" id="2331703">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331707">res</span>&nbsp;<span class="op" id="2331711">=</span>&nbsp;<span class="string" id="2331713">&#34;stop&nbsp;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2331729">+</span>&nbsp;<span class="ident" id="2331731">status</span><span class="op" id="2331737">.</span><span class="ident" id="2331738">StopSignal</span><span class="op" id="2331748">(</span><span class="op" id="2331749">)</span><span class="op" id="2331750">.</span><span class="ident" id="2331751">String</span><span class="op" id="2331757">(</span><span class="op" id="2331758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331762">if</span>&nbsp;<span class="ident" id="2331765">status</span><span class="op" id="2331771">.</span><span class="ident" id="2331772">StopSignal</span><span class="op" id="2331782">(</span><span class="op" id="2331783">)</span>&nbsp;<span class="op" id="2331785">==</span>&nbsp;<span class="ident" id="2331788">syscall</span><span class="op" id="2331795">.</span><span class="ident" id="2331796">SIGTRAP</span>&nbsp;<span class="op" id="2331804">&amp;&amp;</span>&nbsp;<span class="ident" id="2331807">status</span><span class="op" id="2331813">.</span><span class="ident" id="2331814">TrapCause</span><span class="op" id="2331823">(</span><span class="op" id="2331824">)</span>&nbsp;<span class="op" id="2331826">!=</span>&nbsp;<span class="num" id="2331829">0</span>&nbsp;<span class="op" id="2331831">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331836">res</span>&nbsp;<span class="op" id="2331840">+=</span>&nbsp;<span class="string" id="2331843">&#34;&nbsp;(trap&nbsp;&#34;</span>&nbsp;<span class="op" id="2331853">+</span>&nbsp;<span class="ident" id="2331855">itod</span><span class="op" id="2331859">(</span><span class="ident" id="2331860">status</span><span class="op" id="2331866">.</span><span class="ident" id="2331867">TrapCause</span><span class="op" id="2331876">(</span><span class="op" id="2331877">)</span><span class="op" id="2331878">)</span>&nbsp;<span class="op" id="2331880">+</span>&nbsp;<span class="string" id="2331882">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331891">case</span>&nbsp;<span class="ident" id="2331896">status</span><span class="op" id="2331902">.</span><span class="ident" id="2331903">Continued</span><span class="op" id="2331912">(</span><span class="op" id="2331913">)</span><span class="op" id="2331914">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331918">res</span>&nbsp;<span class="op" id="2331922">=</span>&nbsp;<span class="string" id="2331924">&#34;continued&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331937">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331940">if</span>&nbsp;<span class="ident" id="2331943">status</span><span class="op" id="2331949">.</span><span class="ident" id="2331950">CoreDump</span><span class="op" id="2331958">(</span><span class="op" id="2331959">)</span>&nbsp;<span class="op" id="2331961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331965">res</span>&nbsp;<span class="op" id="2331969">+=</span>&nbsp;<span class="string" id="2331972">&#34;&nbsp;(core&nbsp;dumped)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331993">return</span>&nbsp;<span class="ident" id="2332000">res</span><br>
<span class="lineno"></span><span class="op" id="2332004">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
