<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html" class="current">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7618344">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7618399">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7618453">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7618504">package</span>&nbsp;<span class="ident" id="7618512">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7618517">import</span>&nbsp;<span class="op" id="7618524">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7618527">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7618536">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7618547">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7618557">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7618560">type</span>&nbsp;<span class="ident" id="7618565">typeT</span>&nbsp;<span class="keyword" id="7618571">struct</span>&nbsp;<span class="op" id="7618578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618581">id</span>&nbsp;&nbsp;<span class="ident" id="7618585">typeId</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618593">str</span>&nbsp;<span class="builtintype" id="7618597">string</span><br>
<span class="lineno"></span><span class="op" id="7618604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7618607">var</span>&nbsp;<span class="ident" id="7618611">basicTypes</span>&nbsp;<span class="op" id="7618622">=</span>&nbsp;<span class="op" id="7618624">[</span><span class="op" id="7618625">]</span><span class="ident" id="7618626">typeT</span><span class="op" id="7618631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7618634">{</span><span class="ident" id="7618635">tBool</span><span class="op" id="7618640">,</span>&nbsp;<span class="string" id="7618642">&#34;bool&#34;</span><span class="op" id="7618648">}</span><span class="op" id="7618649">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7618652">{</span><span class="ident" id="7618653">tInt</span><span class="op" id="7618657">,</span>&nbsp;<span class="string" id="7618659">&#34;int&#34;</span><span class="op" id="7618664">}</span><span class="op" id="7618665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7618668">{</span><span class="ident" id="7618669">tUint</span><span class="op" id="7618674">,</span>&nbsp;<span class="string" id="7618676">&#34;uint&#34;</span><span class="op" id="7618682">}</span><span class="op" id="7618683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7618686">{</span><span class="ident" id="7618687">tFloat</span><span class="op" id="7618693">,</span>&nbsp;<span class="string" id="7618695">&#34;float&#34;</span><span class="op" id="7618702">}</span><span class="op" id="7618703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7618706">{</span><span class="ident" id="7618707">tBytes</span><span class="op" id="7618713">,</span>&nbsp;<span class="string" id="7618715">&#34;bytes&#34;</span><span class="op" id="7618722">}</span><span class="op" id="7618723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7618726">{</span><span class="ident" id="7618727">tString</span><span class="op" id="7618734">,</span>&nbsp;<span class="string" id="7618736">&#34;string&#34;</span><span class="op" id="7618744">}</span><span class="op" id="7618745">,</span><br>
<span class="lineno">25</span><span class="op" id="7618747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7618750">func</span>&nbsp;<span class="ident" id="7618755">getTypeUnlocked</span><span class="op" id="7618770">(</span><span class="ident" id="7618771">name</span>&nbsp;<span class="builtintype" id="7618776">string</span><span class="op" id="7618782">,</span>&nbsp;<span class="ident" id="7618784">rt</span>&nbsp;<span class="ident" id="7618787">reflect</span><span class="op" id="7618794">.</span><span class="ident" id="7618795">Type</span><span class="op" id="7618799">)</span>&nbsp;<span class="ident" id="7618801">gobType</span>&nbsp;<span class="op" id="7618809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618812">typeLock</span><span class="op" id="7618820">.</span><span class="ident" id="7618821">Lock</span><span class="op" id="7618825">(</span><span class="op" id="7618826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7618829">defer</span>&nbsp;<span class="ident" id="7618835">typeLock</span><span class="op" id="7618843">.</span><span class="ident" id="7618844">Unlock</span><span class="op" id="7618850">(</span><span class="op" id="7618851">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7618854">t</span><span class="op" id="7618855">,</span>&nbsp;<span class="ident" id="7618857">err</span>&nbsp;<span class="op" id="7618861">:=</span>&nbsp;<span class="ident" id="7618864">getBaseType</span><span class="op" id="7618875">(</span><span class="ident" id="7618876">name</span><span class="op" id="7618880">,</span>&nbsp;<span class="ident" id="7618882">rt</span><span class="op" id="7618884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7618887">if</span>&nbsp;<span class="ident" id="7618890">err</span>&nbsp;<span class="op" id="7618894">!=</span>&nbsp;<span class="ident" id="7618897">nil</span>&nbsp;<span class="op" id="7618901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7618905">panic</span><span class="op" id="7618910">(</span><span class="string" id="7618911">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="7618931">+</span>&nbsp;<span class="ident" id="7618933">err</span><span class="op" id="7618936">.</span><span class="ident" id="7618937">Error</span><span class="op" id="7618942">(</span><span class="op" id="7618943">)</span><span class="op" id="7618944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7618947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7618950">return</span>&nbsp;<span class="ident" id="7618957">t</span><br>
<span class="lineno">35</span><span class="op" id="7618959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7618962">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="7618979">func</span>&nbsp;<span class="ident" id="7618984">TestBasic</span><span class="op" id="7618993">(</span><span class="ident" id="7618994">t</span>&nbsp;<span class="op" id="7618996">*</span><span class="ident" id="7618997">testing</span><span class="op" id="7619004">.</span><span class="ident" id="7619005">T</span><span class="op" id="7619006">)</span>&nbsp;<span class="op" id="7619008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7619011">for</span>&nbsp;<span class="ident" id="7619015">_</span><span class="op" id="7619016">,</span>&nbsp;<span class="ident" id="7619018">tt</span>&nbsp;<span class="op" id="7619021">:=</span>&nbsp;<span class="keyword" id="7619024">range</span>&nbsp;<span class="ident" id="7619030">basicTypes</span>&nbsp;<span class="op" id="7619041">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7619045">if</span>&nbsp;<span class="ident" id="7619048">tt</span><span class="op" id="7619050">.</span><span class="ident" id="7619051">id</span><span class="op" id="7619053">.</span><span class="builtintype" id="7619054">string</span><span class="op" id="7619060">(</span><span class="op" id="7619061">)</span>&nbsp;<span class="op" id="7619063">!=</span>&nbsp;<span class="ident" id="7619066">tt</span><span class="op" id="7619068">.</span><span class="ident" id="7619069">str</span>&nbsp;<span class="op" id="7619073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7619078">t</span><span class="op" id="7619079">.</span><span class="ident" id="7619080">Errorf</span><span class="op" id="7619086">(</span><span class="string" id="7619087">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7619118">,</span>&nbsp;<span class="ident" id="7619120">tt</span><span class="op" id="7619122">.</span><span class="ident" id="7619123">str</span><span class="op" id="7619126">,</span>&nbsp;<span class="ident" id="7619128">tt</span><span class="op" id="7619130">.</span><span class="ident" id="7619131">id</span><span class="op" id="7619133">.</span><span class="builtintype" id="7619134">string</span><span class="op" id="7619140">(</span><span class="op" id="7619141">)</span><span class="op" id="7619142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7619146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7619150">if</span>&nbsp;<span class="ident" id="7619153">tt</span><span class="op" id="7619155">.</span><span class="ident" id="7619156">id</span>&nbsp;<span class="op" id="7619159">==</span>&nbsp;<span class="num" id="7619162">0</span>&nbsp;<span class="op" id="7619164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7619169">t</span><span class="op" id="7619170">.</span><span class="ident" id="7619171">Errorf</span><span class="op" id="7619177">(</span><span class="string" id="7619178">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="7619197">,</span>&nbsp;<span class="ident" id="7619199">tt</span><span class="op" id="7619201">.</span><span class="ident" id="7619202">str</span><span class="op" id="7619205">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7619209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7619212">}</span><br>
<span class="lineno"></span><span class="op" id="7619214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7619217">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="7619285">func</span>&nbsp;<span class="ident" id="7619290">TestReregistration</span><span class="op" id="7619308">(</span><span class="ident" id="7619309">t</span>&nbsp;<span class="op" id="7619311">*</span><span class="ident" id="7619312">testing</span><span class="op" id="7619319">.</span><span class="ident" id="7619320">T</span><span class="op" id="7619321">)</span>&nbsp;<span class="op" id="7619323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7619326">newtyp</span>&nbsp;<span class="op" id="7619333">:=</span>&nbsp;<span class="ident" id="7619336">getTypeUnlocked</span><span class="op" id="7619351">(</span><span class="string" id="7619352">&#34;int&#34;</span><span class="op" id="7619357">,</span>&nbsp;<span class="ident" id="7619359">reflect</span><span class="op" id="7619366">.</span><span class="ident" id="7619367">TypeOf</span><span class="op" id="7619373">(</span><span class="builtintype" id="7619374">int</span><span class="op" id="7619377">(</span><span class="num" id="7619378">0</span><span class="op" id="7619379">)</span><span class="op" id="7619380">)</span><span class="op" id="7619381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7619384">if</span>&nbsp;<span class="ident" id="7619387">newtyp</span>&nbsp;<span class="op" id="7619394">!=</span>&nbsp;<span class="ident" id="7619397">tInt</span><span class="op" id="7619401">.</span><span class="ident" id="7619402">gobType</span><span class="op" id="7619409">(</span><span class="op" id="7619410">)</span>&nbsp;<span class="op" id="7619412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7619416">t</span><span class="op" id="7619417">.</span><span class="ident" id="7619418">Errorf</span><span class="op" id="7619424">(</span><span class="string" id="7619425">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="7619460">,</span>&nbsp;<span class="ident" id="7619462">newtyp</span><span class="op" id="7619468">.</span><span class="builtintype" id="7619469">string</span><span class="op" id="7619475">(</span><span class="op" id="7619476">)</span><span class="op" id="7619477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7619480">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7619483">newtyp</span>&nbsp;<span class="op" id="7619490">=</span>&nbsp;<span class="ident" id="7619492">getTypeUnlocked</span><span class="op" id="7619507">(</span><span class="string" id="7619508">&#34;uint&#34;</span><span class="op" id="7619514">,</span>&nbsp;<span class="ident" id="7619516">reflect</span><span class="op" id="7619523">.</span><span class="ident" id="7619524">TypeOf</span><span class="op" id="7619530">(</span><span class="builtintype" id="7619531">uint</span><span class="op" id="7619535">(</span><span class="num" id="7619536">0</span><span class="op" id="7619537">)</span><span class="op" id="7619538">)</span><span class="op" id="7619539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7619542">if</span>&nbsp;<span class="ident" id="7619545">newtyp</span>&nbsp;<span class="op" id="7619552">!=</span>&nbsp;<span class="ident" id="7619555">tUint</span><span class="op" id="7619560">.</span><span class="ident" id="7619561">gobType</span><span class="op" id="7619568">(</span><span class="op" id="7619569">)</span>&nbsp;<span class="op" id="7619571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7619575">t</span><span class="op" id="7619576">.</span><span class="ident" id="7619577">Errorf</span><span class="op" id="7619583">(</span><span class="string" id="7619584">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="7619619">,</span>&nbsp;<span class="ident" id="7619621">newtyp</span><span class="op" id="7619627">.</span><span class="builtintype" id="7619628">string</span><span class="op" id="7619634">(</span><span class="op" id="7619635">)</span><span class="op" id="7619636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7619639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7619642">newtyp</span>&nbsp;<span class="op" id="7619649">=</span>&nbsp;<span class="ident" id="7619651">getTypeUnlocked</span><span class="op" id="7619666">(</span><span class="string" id="7619667">&#34;string&#34;</span><span class="op" id="7619675">,</span>&nbsp;<span class="ident" id="7619677">reflect</span><span class="op" id="7619684">.</span><span class="ident" id="7619685">TypeOf</span><span class="op" id="7619691">(</span><span class="string" id="7619692">&#34;hello&#34;</span><span class="op" id="7619699">)</span><span class="op" id="7619700">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7619703">if</span>&nbsp;<span class="ident" id="7619706">newtyp</span>&nbsp;<span class="op" id="7619713">!=</span>&nbsp;<span class="ident" id="7619716">tString</span><span class="op" id="7619723">.</span><span class="ident" id="7619724">gobType</span><span class="op" id="7619731">(</span><span class="op" id="7619732">)</span>&nbsp;<span class="op" id="7619734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7619738">t</span><span class="op" id="7619739">.</span><span class="ident" id="7619740">Errorf</span><span class="op" id="7619746">(</span><span class="string" id="7619747">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="7619782">,</span>&nbsp;<span class="ident" id="7619784">newtyp</span><span class="op" id="7619790">.</span><span class="builtintype" id="7619791">string</span><span class="op" id="7619797">(</span><span class="op" id="7619798">)</span><span class="op" id="7619799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7619802">}</span><br>
<span class="lineno"></span><span class="op" id="7619804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="7619807">func</span>&nbsp;<span class="ident" id="7619812">TestArrayType</span><span class="op" id="7619825">(</span><span class="ident" id="7619826">t</span>&nbsp;<span class="op" id="7619828">*</span><span class="ident" id="7619829">testing</span><span class="op" id="7619836">.</span><span class="ident" id="7619837">T</span><span class="op" id="7619838">)</span>&nbsp;<span class="op" id="7619840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7619843">var</span>&nbsp;<span class="ident" id="7619847">a3</span>&nbsp;<span class="op" id="7619850">[</span><span class="num" id="7619851">3</span><span class="op" id="7619852">]</span><span class="builtintype" id="7619853">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7619858">a3int</span>&nbsp;<span class="op" id="7619864">:=</span>&nbsp;<span class="ident" id="7619867">getTypeUnlocked</span><span class="op" id="7619882">(</span><span class="string" id="7619883">&#34;foo&#34;</span><span class="op" id="7619888">,</span>&nbsp;<span class="ident" id="7619890">reflect</span><span class="op" id="7619897">.</span><span class="ident" id="7619898">TypeOf</span><span class="op" id="7619904">(</span><span class="ident" id="7619905">a3</span><span class="op" id="7619907">)</span><span class="op" id="7619908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7619911">newa3int</span>&nbsp;<span class="op" id="7619920">:=</span>&nbsp;<span class="ident" id="7619923">getTypeUnlocked</span><span class="op" id="7619938">(</span><span class="string" id="7619939">&#34;bar&#34;</span><span class="op" id="7619944">,</span>&nbsp;<span class="ident" id="7619946">reflect</span><span class="op" id="7619953">.</span><span class="ident" id="7619954">TypeOf</span><span class="op" id="7619960">(</span><span class="ident" id="7619961">a3</span><span class="op" id="7619963">)</span><span class="op" id="7619964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7619967">if</span>&nbsp;<span class="ident" id="7619970">a3int</span>&nbsp;<span class="op" id="7619976">!=</span>&nbsp;<span class="ident" id="7619979">newa3int</span>&nbsp;<span class="op" id="7619988">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7619992">t</span><span class="op" id="7619993">.</span><span class="ident" id="7619994">Errorf</span><span class="op" id="7620000">(</span><span class="string" id="7620001">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="7620049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7620052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7620055">var</span>&nbsp;<span class="ident" id="7620059">a4</span>&nbsp;<span class="op" id="7620062">[</span><span class="num" id="7620063">4</span><span class="op" id="7620064">]</span><span class="builtintype" id="7620065">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620070">a4int</span>&nbsp;<span class="op" id="7620076">:=</span>&nbsp;<span class="ident" id="7620079">getTypeUnlocked</span><span class="op" id="7620094">(</span><span class="string" id="7620095">&#34;goo&#34;</span><span class="op" id="7620100">,</span>&nbsp;<span class="ident" id="7620102">reflect</span><span class="op" id="7620109">.</span><span class="ident" id="7620110">TypeOf</span><span class="op" id="7620116">(</span><span class="ident" id="7620117">a4</span><span class="op" id="7620119">)</span><span class="op" id="7620120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7620123">if</span>&nbsp;<span class="ident" id="7620126">a3int</span>&nbsp;<span class="op" id="7620132">==</span>&nbsp;<span class="ident" id="7620135">a4int</span>&nbsp;<span class="op" id="7620141">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620145">t</span><span class="op" id="7620146">.</span><span class="ident" id="7620147">Errorf</span><span class="op" id="7620153">(</span><span class="string" id="7620154">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="7620206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7620209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7620212">var</span>&nbsp;<span class="ident" id="7620216">b3</span>&nbsp;<span class="op" id="7620219">[</span><span class="num" id="7620220">3</span><span class="op" id="7620221">]</span><span class="builtintype" id="7620222">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620228">a3bool</span>&nbsp;<span class="op" id="7620235">:=</span>&nbsp;<span class="ident" id="7620238">getTypeUnlocked</span><span class="op" id="7620253">(</span><span class="string" id="7620254">&#34;&#34;</span><span class="op" id="7620256">,</span>&nbsp;<span class="ident" id="7620258">reflect</span><span class="op" id="7620265">.</span><span class="ident" id="7620266">TypeOf</span><span class="op" id="7620272">(</span><span class="ident" id="7620273">b3</span><span class="op" id="7620275">)</span><span class="op" id="7620276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7620279">if</span>&nbsp;<span class="ident" id="7620282">a3int</span>&nbsp;<span class="op" id="7620288">==</span>&nbsp;<span class="ident" id="7620291">a3bool</span>&nbsp;<span class="op" id="7620298">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620302">t</span><span class="op" id="7620303">.</span><span class="ident" id="7620304">Errorf</span><span class="op" id="7620310">(</span><span class="string" id="7620311">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="7620364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7620367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620370">str</span>&nbsp;<span class="op" id="7620374">:=</span>&nbsp;<span class="ident" id="7620377">a3bool</span><span class="op" id="7620383">.</span><span class="builtintype" id="7620384">string</span><span class="op" id="7620390">(</span><span class="op" id="7620391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620394">expected</span>&nbsp;<span class="op" id="7620403">:=</span>&nbsp;<span class="string" id="7620406">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7620417">if</span>&nbsp;<span class="ident" id="7620420">str</span>&nbsp;<span class="op" id="7620424">!=</span>&nbsp;<span class="ident" id="7620427">expected</span>&nbsp;<span class="op" id="7620436">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620440">t</span><span class="op" id="7620441">.</span><span class="ident" id="7620442">Errorf</span><span class="op" id="7620448">(</span><span class="string" id="7620449">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7620483">,</span>&nbsp;<span class="ident" id="7620485">str</span><span class="op" id="7620488">,</span>&nbsp;<span class="ident" id="7620490">expected</span><span class="op" id="7620498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7620501">}</span><br>
<span class="lineno"></span><span class="op" id="7620503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7620506">func</span>&nbsp;<span class="ident" id="7620511">TestSliceType</span><span class="op" id="7620524">(</span><span class="ident" id="7620525">t</span>&nbsp;<span class="op" id="7620527">*</span><span class="ident" id="7620528">testing</span><span class="op" id="7620535">.</span><span class="ident" id="7620536">T</span><span class="op" id="7620537">)</span>&nbsp;<span class="op" id="7620539">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7620542">var</span>&nbsp;<span class="ident" id="7620546">s</span>&nbsp;<span class="op" id="7620548">[</span><span class="op" id="7620549">]</span><span class="builtintype" id="7620550">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620555">sint</span>&nbsp;<span class="op" id="7620560">:=</span>&nbsp;<span class="ident" id="7620563">getTypeUnlocked</span><span class="op" id="7620578">(</span><span class="string" id="7620579">&#34;slice&#34;</span><span class="op" id="7620586">,</span>&nbsp;<span class="ident" id="7620588">reflect</span><span class="op" id="7620595">.</span><span class="ident" id="7620596">TypeOf</span><span class="op" id="7620602">(</span><span class="ident" id="7620603">s</span><span class="op" id="7620604">)</span><span class="op" id="7620605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7620608">var</span>&nbsp;<span class="ident" id="7620612">news</span>&nbsp;<span class="op" id="7620617">[</span><span class="op" id="7620618">]</span><span class="builtintype" id="7620619">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620624">newsint</span>&nbsp;<span class="op" id="7620632">:=</span>&nbsp;<span class="ident" id="7620635">getTypeUnlocked</span><span class="op" id="7620650">(</span><span class="string" id="7620651">&#34;slice1&#34;</span><span class="op" id="7620659">,</span>&nbsp;<span class="ident" id="7620661">reflect</span><span class="op" id="7620668">.</span><span class="ident" id="7620669">TypeOf</span><span class="op" id="7620675">(</span><span class="ident" id="7620676">news</span><span class="op" id="7620680">)</span><span class="op" id="7620681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7620684">if</span>&nbsp;<span class="ident" id="7620687">sint</span>&nbsp;<span class="op" id="7620692">!=</span>&nbsp;<span class="ident" id="7620695">newsint</span>&nbsp;<span class="op" id="7620703">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620707">t</span><span class="op" id="7620708">.</span><span class="ident" id="7620709">Errorf</span><span class="op" id="7620715">(</span><span class="string" id="7620716">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="7620763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7620766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7620769">var</span>&nbsp;<span class="ident" id="7620773">b</span>&nbsp;<span class="op" id="7620775">[</span><span class="op" id="7620776">]</span><span class="builtintype" id="7620777">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620783">sbool</span>&nbsp;<span class="op" id="7620789">:=</span>&nbsp;<span class="ident" id="7620792">getTypeUnlocked</span><span class="op" id="7620807">(</span><span class="string" id="7620808">&#34;&#34;</span><span class="op" id="7620810">,</span>&nbsp;<span class="ident" id="7620812">reflect</span><span class="op" id="7620819">.</span><span class="ident" id="7620820">TypeOf</span><span class="op" id="7620826">(</span><span class="ident" id="7620827">b</span><span class="op" id="7620828">)</span><span class="op" id="7620829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7620832">if</span>&nbsp;<span class="ident" id="7620835">sbool</span>&nbsp;<span class="op" id="7620841">==</span>&nbsp;<span class="ident" id="7620844">sint</span>&nbsp;<span class="op" id="7620849">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620853">t</span><span class="op" id="7620854">.</span><span class="ident" id="7620855">Errorf</span><span class="op" id="7620861">(</span><span class="string" id="7620862">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="7620913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7620916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620919">str</span>&nbsp;<span class="op" id="7620923">:=</span>&nbsp;<span class="ident" id="7620926">sbool</span><span class="op" id="7620931">.</span><span class="builtintype" id="7620932">string</span><span class="op" id="7620938">(</span><span class="op" id="7620939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620942">expected</span>&nbsp;<span class="op" id="7620951">:=</span>&nbsp;<span class="string" id="7620954">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7620964">if</span>&nbsp;<span class="ident" id="7620967">str</span>&nbsp;<span class="op" id="7620971">!=</span>&nbsp;<span class="ident" id="7620974">expected</span>&nbsp;<span class="op" id="7620983">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7620987">t</span><span class="op" id="7620988">.</span><span class="ident" id="7620989">Errorf</span><span class="op" id="7620995">(</span><span class="string" id="7620996">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7621030">,</span>&nbsp;<span class="ident" id="7621032">str</span><span class="op" id="7621035">,</span>&nbsp;<span class="ident" id="7621037">expected</span><span class="op" id="7621045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7621048">}</span><br>
<span class="lineno"></span><span class="op" id="7621050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7621053">func</span>&nbsp;<span class="ident" id="7621058">TestMapType</span><span class="op" id="7621069">(</span><span class="ident" id="7621070">t</span>&nbsp;<span class="op" id="7621072">*</span><span class="ident" id="7621073">testing</span><span class="op" id="7621080">.</span><span class="ident" id="7621081">T</span><span class="op" id="7621082">)</span>&nbsp;<span class="op" id="7621084">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7621087">var</span>&nbsp;<span class="ident" id="7621091">m</span>&nbsp;<span class="keyword" id="7621093">map</span><span class="op" id="7621096">[</span><span class="builtintype" id="7621097">string</span><span class="op" id="7621103">]</span><span class="builtintype" id="7621104">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621109">mapStringInt</span>&nbsp;<span class="op" id="7621122">:=</span>&nbsp;<span class="ident" id="7621125">getTypeUnlocked</span><span class="op" id="7621140">(</span><span class="string" id="7621141">&#34;map&#34;</span><span class="op" id="7621146">,</span>&nbsp;<span class="ident" id="7621148">reflect</span><span class="op" id="7621155">.</span><span class="ident" id="7621156">TypeOf</span><span class="op" id="7621162">(</span><span class="ident" id="7621163">m</span><span class="op" id="7621164">)</span><span class="op" id="7621165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7621168">var</span>&nbsp;<span class="ident" id="7621172">newm</span>&nbsp;<span class="keyword" id="7621177">map</span><span class="op" id="7621180">[</span><span class="builtintype" id="7621181">string</span><span class="op" id="7621187">]</span><span class="builtintype" id="7621188">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621193">newMapStringInt</span>&nbsp;<span class="op" id="7621209">:=</span>&nbsp;<span class="ident" id="7621212">getTypeUnlocked</span><span class="op" id="7621227">(</span><span class="string" id="7621228">&#34;map1&#34;</span><span class="op" id="7621234">,</span>&nbsp;<span class="ident" id="7621236">reflect</span><span class="op" id="7621243">.</span><span class="ident" id="7621244">TypeOf</span><span class="op" id="7621250">(</span><span class="ident" id="7621251">newm</span><span class="op" id="7621255">)</span><span class="op" id="7621256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7621259">if</span>&nbsp;<span class="ident" id="7621262">mapStringInt</span>&nbsp;<span class="op" id="7621275">!=</span>&nbsp;<span class="ident" id="7621278">newMapStringInt</span>&nbsp;<span class="op" id="7621294">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621298">t</span><span class="op" id="7621299">.</span><span class="ident" id="7621300">Errorf</span><span class="op" id="7621306">(</span><span class="string" id="7621307">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="7621363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7621366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7621369">var</span>&nbsp;<span class="ident" id="7621373">b</span>&nbsp;<span class="keyword" id="7621375">map</span><span class="op" id="7621378">[</span><span class="builtintype" id="7621379">string</span><span class="op" id="7621385">]</span><span class="builtintype" id="7621386">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621392">mapStringBool</span>&nbsp;<span class="op" id="7621406">:=</span>&nbsp;<span class="ident" id="7621409">getTypeUnlocked</span><span class="op" id="7621424">(</span><span class="string" id="7621425">&#34;&#34;</span><span class="op" id="7621427">,</span>&nbsp;<span class="ident" id="7621429">reflect</span><span class="op" id="7621436">.</span><span class="ident" id="7621437">TypeOf</span><span class="op" id="7621443">(</span><span class="ident" id="7621444">b</span><span class="op" id="7621445">)</span><span class="op" id="7621446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7621449">if</span>&nbsp;<span class="ident" id="7621452">mapStringBool</span>&nbsp;<span class="op" id="7621466">==</span>&nbsp;<span class="ident" id="7621469">mapStringInt</span>&nbsp;<span class="op" id="7621482">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621486">t</span><span class="op" id="7621487">.</span><span class="ident" id="7621488">Errorf</span><span class="op" id="7621494">(</span><span class="string" id="7621495">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="7621564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7621567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621570">str</span>&nbsp;<span class="op" id="7621574">:=</span>&nbsp;<span class="ident" id="7621577">mapStringBool</span><span class="op" id="7621590">.</span><span class="builtintype" id="7621591">string</span><span class="op" id="7621597">(</span><span class="op" id="7621598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621601">expected</span>&nbsp;<span class="op" id="7621610">:=</span>&nbsp;<span class="string" id="7621613">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7621632">if</span>&nbsp;<span class="ident" id="7621635">str</span>&nbsp;<span class="op" id="7621639">!=</span>&nbsp;<span class="ident" id="7621642">expected</span>&nbsp;<span class="op" id="7621651">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621655">t</span><span class="op" id="7621656">.</span><span class="ident" id="7621657">Errorf</span><span class="op" id="7621663">(</span><span class="string" id="7621664">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7621696">,</span>&nbsp;<span class="ident" id="7621698">str</span><span class="op" id="7621701">,</span>&nbsp;<span class="ident" id="7621703">expected</span><span class="op" id="7621711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7621714">}</span><br>
<span class="lineno"></span><span class="op" id="7621716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7621719">type</span>&nbsp;<span class="ident" id="7621724">Bar</span>&nbsp;<span class="keyword" id="7621728">struct</span>&nbsp;<span class="op" id="7621735">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621738">X</span>&nbsp;<span class="builtintype" id="7621740">string</span><br>
<span class="lineno"></span><span class="op" id="7621747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7621750">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="7621831">type</span>&nbsp;<span class="ident" id="7621836">Foo</span>&nbsp;<span class="keyword" id="7621840">struct</span>&nbsp;<span class="op" id="7621847">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621850">A</span>&nbsp;<span class="builtintype" id="7621852">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621857">B</span>&nbsp;<span class="builtintype" id="7621859">int32</span>&nbsp;<span class="comment" id="7621865">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621885">C</span>&nbsp;<span class="builtintype" id="7621887">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621895">D</span>&nbsp;<span class="op" id="7621897">[</span><span class="op" id="7621898">]</span><span class="builtintype" id="7621899">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621905">E</span>&nbsp;<span class="op" id="7621907">*</span><span class="builtintype" id="7621908">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7621919">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621943">F</span>&nbsp;<span class="op" id="7621945">*</span><span class="op" id="7621946">*</span><span class="op" id="7621947">*</span><span class="op" id="7621948">*</span><span class="builtintype" id="7621949">float64</span>&nbsp;<span class="comment" id="7621957">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621981">G</span>&nbsp;<span class="op" id="7621983">*</span><span class="ident" id="7621984">Bar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7621989">H</span>&nbsp;<span class="op" id="7621991">*</span><span class="ident" id="7621992">Bar</span>&nbsp;<span class="comment" id="7621996">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622051">I</span>&nbsp;<span class="op" id="7622053">*</span><span class="ident" id="7622054">Foo</span>&nbsp;<span class="comment" id="7622058">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="7622078">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="7622081">func</span>&nbsp;<span class="ident" id="7622086">TestStructType</span><span class="op" id="7622100">(</span><span class="ident" id="7622101">t</span>&nbsp;<span class="op" id="7622103">*</span><span class="ident" id="7622104">testing</span><span class="op" id="7622111">.</span><span class="ident" id="7622112">T</span><span class="op" id="7622113">)</span>&nbsp;<span class="op" id="7622115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622118">sstruct</span>&nbsp;<span class="op" id="7622126">:=</span>&nbsp;<span class="ident" id="7622129">getTypeUnlocked</span><span class="op" id="7622144">(</span><span class="string" id="7622145">&#34;Foo&#34;</span><span class="op" id="7622150">,</span>&nbsp;<span class="ident" id="7622152">reflect</span><span class="op" id="7622159">.</span><span class="ident" id="7622160">TypeOf</span><span class="op" id="7622166">(</span><span class="ident" id="7622167">Foo</span><span class="op" id="7622170">{</span><span class="op" id="7622171">}</span><span class="op" id="7622172">)</span><span class="op" id="7622173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622176">str</span>&nbsp;<span class="op" id="7622180">:=</span>&nbsp;<span class="ident" id="7622183">sstruct</span><span class="op" id="7622190">.</span><span class="builtintype" id="7622191">string</span><span class="op" id="7622197">(</span><span class="op" id="7622198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7622201">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622258">expected</span>&nbsp;<span class="op" id="7622267">:=</span>&nbsp;<span class="string" id="7622270">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7622385">if</span>&nbsp;<span class="ident" id="7622388">str</span>&nbsp;<span class="op" id="7622392">!=</span>&nbsp;<span class="ident" id="7622395">expected</span>&nbsp;<span class="op" id="7622404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622408">t</span><span class="op" id="7622409">.</span><span class="ident" id="7622410">Errorf</span><span class="op" id="7622416">(</span><span class="string" id="7622417">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7622452">,</span>&nbsp;<span class="ident" id="7622454">str</span><span class="op" id="7622457">,</span>&nbsp;<span class="ident" id="7622459">expected</span><span class="op" id="7622467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7622470">}</span><br>
<span class="lineno"></span><span class="op" id="7622472">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="7622475">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="7622552">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="7622589">func</span>&nbsp;<span class="ident" id="7622594">TestRegistration</span><span class="op" id="7622610">(</span><span class="ident" id="7622611">t</span>&nbsp;<span class="op" id="7622613">*</span><span class="ident" id="7622614">testing</span><span class="op" id="7622621">.</span><span class="ident" id="7622622">T</span><span class="op" id="7622623">)</span>&nbsp;<span class="op" id="7622625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7622628">type</span>&nbsp;<span class="ident" id="7622633">T</span>&nbsp;<span class="keyword" id="7622635">struct</span><span class="op" id="7622641">{</span>&nbsp;<span class="ident" id="7622643">a</span>&nbsp;<span class="builtintype" id="7622645">int</span>&nbsp;<span class="op" id="7622649">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622652">Register</span><span class="op" id="7622660">(</span><span class="builtinfunc" id="7622661">new</span><span class="op" id="7622664">(</span><span class="ident" id="7622665">T</span><span class="op" id="7622666">)</span><span class="op" id="7622667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622670">Register</span><span class="op" id="7622678">(</span><span class="builtinfunc" id="7622679">new</span><span class="op" id="7622682">(</span><span class="ident" id="7622683">T</span><span class="op" id="7622684">)</span><span class="op" id="7622685">)</span><br>
<span class="lineno"></span><span class="op" id="7622687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7622690">type</span>&nbsp;<span class="ident" id="7622695">N1</span>&nbsp;<span class="keyword" id="7622698">struct</span><span class="op" id="7622704">{</span><span class="op" id="7622705">}</span><br>
<span class="lineno">165</span><span class="keyword" id="7622707">type</span>&nbsp;<span class="ident" id="7622712">N2</span>&nbsp;<span class="keyword" id="7622715">struct</span><span class="op" id="7622721">{</span><span class="op" id="7622722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7622725">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="7622761">func</span>&nbsp;<span class="ident" id="7622766">TestRegistrationNaming</span><span class="op" id="7622788">(</span><span class="ident" id="7622789">t</span>&nbsp;<span class="op" id="7622791">*</span><span class="ident" id="7622792">testing</span><span class="op" id="7622799">.</span><span class="ident" id="7622800">T</span><span class="op" id="7622801">)</span>&nbsp;<span class="op" id="7622803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622806">testCases</span>&nbsp;<span class="op" id="7622816">:=</span>&nbsp;<span class="op" id="7622819">[</span><span class="op" id="7622820">]</span><span class="keyword" id="7622821">struct</span>&nbsp;<span class="op" id="7622828">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622832">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7622837">interface</span><span class="op" id="7622846">{</span><span class="op" id="7622847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622851">name</span>&nbsp;<span class="builtintype" id="7622856">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7622864">}</span><span class="op" id="7622865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7622869">{</span><span class="op" id="7622870">&amp;</span><span class="ident" id="7622871">N1</span><span class="op" id="7622873">{</span><span class="op" id="7622874">}</span><span class="op" id="7622875">,</span>&nbsp;<span class="string" id="7622877">&#34;*gob.N1&#34;</span><span class="op" id="7622886">}</span><span class="op" id="7622887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7622891">{</span><span class="ident" id="7622892">N2</span><span class="op" id="7622894">{</span><span class="op" id="7622895">}</span><span class="op" id="7622896">,</span>&nbsp;<span class="string" id="7622898">&#34;encoding/gob.N2&#34;</span><span class="op" id="7622915">}</span><span class="op" id="7622916">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7622919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7622923">for</span>&nbsp;<span class="ident" id="7622927">_</span><span class="op" id="7622928">,</span>&nbsp;<span class="ident" id="7622930">tc</span>&nbsp;<span class="op" id="7622933">:=</span>&nbsp;<span class="keyword" id="7622936">range</span>&nbsp;<span class="ident" id="7622942">testCases</span>&nbsp;<span class="op" id="7622952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622956">Register</span><span class="op" id="7622964">(</span><span class="ident" id="7622965">tc</span><span class="op" id="7622967">.</span><span class="ident" id="7622968">t</span><span class="op" id="7622969">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622974">tct</span>&nbsp;<span class="op" id="7622978">:=</span>&nbsp;<span class="ident" id="7622981">reflect</span><span class="op" id="7622988">.</span><span class="ident" id="7622989">TypeOf</span><span class="op" id="7622995">(</span><span class="ident" id="7622996">tc</span><span class="op" id="7622998">.</span><span class="ident" id="7622999">t</span><span class="op" id="7623000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623004">registerLock</span><span class="op" id="7623016">.</span><span class="ident" id="7623017">RLock</span><span class="op" id="7623022">(</span><span class="op" id="7623023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623027">ct</span>&nbsp;<span class="op" id="7623030">:=</span>&nbsp;<span class="ident" id="7623033">nameToConcreteType</span><span class="op" id="7623051">[</span><span class="ident" id="7623052">tc</span><span class="op" id="7623054">.</span><span class="ident" id="7623055">name</span><span class="op" id="7623059">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623063">registerLock</span><span class="op" id="7623075">.</span><span class="ident" id="7623076">RUnlock</span><span class="op" id="7623083">(</span><span class="op" id="7623084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7623088">if</span>&nbsp;<span class="ident" id="7623091">ct</span>&nbsp;<span class="op" id="7623094">!=</span>&nbsp;<span class="ident" id="7623097">tct</span>&nbsp;<span class="op" id="7623101">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623106">t</span><span class="op" id="7623107">.</span><span class="ident" id="7623108">Errorf</span><span class="op" id="7623114">(</span><span class="string" id="7623115">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7623153">,</span>&nbsp;<span class="ident" id="7623155">tc</span><span class="op" id="7623157">.</span><span class="ident" id="7623158">name</span><span class="op" id="7623162">,</span>&nbsp;<span class="ident" id="7623164">ct</span><span class="op" id="7623166">,</span>&nbsp;<span class="ident" id="7623168">tct</span><span class="op" id="7623171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7623175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7623179">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7623231">if</span>&nbsp;<span class="ident" id="7623234">tct</span><span class="op" id="7623237">.</span><span class="ident" id="7623238">Kind</span><span class="op" id="7623242">(</span><span class="op" id="7623243">)</span>&nbsp;<span class="op" id="7623245">==</span>&nbsp;<span class="ident" id="7623248">reflect</span><span class="op" id="7623255">.</span><span class="ident" id="7623256">Ptr</span>&nbsp;<span class="op" id="7623260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623265">tct</span>&nbsp;<span class="op" id="7623269">=</span>&nbsp;<span class="ident" id="7623271">tct</span><span class="op" id="7623274">.</span><span class="ident" id="7623275">Elem</span><span class="op" id="7623279">(</span><span class="op" id="7623280">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7623284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7623288">if</span>&nbsp;<span class="ident" id="7623291">n</span>&nbsp;<span class="op" id="7623293">:=</span>&nbsp;<span class="ident" id="7623296">concreteTypeToName</span><span class="op" id="7623314">[</span><span class="ident" id="7623315">tct</span><span class="op" id="7623318">]</span><span class="op" id="7623319">;</span>&nbsp;<span class="ident" id="7623321">n</span>&nbsp;<span class="op" id="7623323">!=</span>&nbsp;<span class="ident" id="7623326">tc</span><span class="op" id="7623328">.</span><span class="ident" id="7623329">name</span>&nbsp;<span class="op" id="7623334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623339">t</span><span class="op" id="7623340">.</span><span class="ident" id="7623341">Errorf</span><span class="op" id="7623347">(</span><span class="string" id="7623348">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7623388">,</span>&nbsp;<span class="ident" id="7623390">tct</span><span class="op" id="7623393">,</span>&nbsp;<span class="ident" id="7623395">n</span><span class="op" id="7623396">,</span>&nbsp;<span class="ident" id="7623398">tc</span><span class="op" id="7623400">.</span><span class="ident" id="7623401">name</span><span class="op" id="7623405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7623409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7623412">}</span><br>
<span class="lineno">195</span><span class="op" id="7623414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7623417">func</span>&nbsp;<span class="ident" id="7623422">TestStressParallel</span><span class="op" id="7623440">(</span><span class="ident" id="7623441">t</span>&nbsp;<span class="op" id="7623443">*</span><span class="ident" id="7623444">testing</span><span class="op" id="7623451">.</span><span class="ident" id="7623452">T</span><span class="op" id="7623453">)</span>&nbsp;<span class="op" id="7623455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7623458">type</span>&nbsp;<span class="ident" id="7623463">T2</span>&nbsp;<span class="keyword" id="7623466">struct</span><span class="op" id="7623472">{</span>&nbsp;<span class="ident" id="7623474">A</span>&nbsp;<span class="builtintype" id="7623476">int</span>&nbsp;<span class="op" id="7623480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623483">c</span>&nbsp;<span class="op" id="7623485">:=</span>&nbsp;<span class="builtinfunc" id="7623488">make</span><span class="op" id="7623492">(</span><span class="keyword" id="7623493">chan</span>&nbsp;<span class="builtintype" id="7623498">bool</span><span class="op" id="7623502">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7623505">const</span>&nbsp;<span class="ident" id="7623511">N</span>&nbsp;<span class="op" id="7623513">=</span>&nbsp;<span class="num" id="7623515">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7623519">for</span>&nbsp;<span class="ident" id="7623523">i</span>&nbsp;<span class="op" id="7623525">:=</span>&nbsp;<span class="num" id="7623528">0</span><span class="op" id="7623529">;</span>&nbsp;<span class="ident" id="7623531">i</span>&nbsp;<span class="op" id="7623533">&lt;</span>&nbsp;<span class="ident" id="7623535">N</span><span class="op" id="7623536">;</span>&nbsp;<span class="ident" id="7623538">i</span><span class="op" id="7623539">++</span>&nbsp;<span class="op" id="7623542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7623546">go</span>&nbsp;<span class="keyword" id="7623549">func</span><span class="op" id="7623553">(</span><span class="op" id="7623554">)</span>&nbsp;<span class="op" id="7623556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623561">p</span>&nbsp;<span class="op" id="7623563">:=</span>&nbsp;<span class="builtinfunc" id="7623566">new</span><span class="op" id="7623569">(</span><span class="ident" id="7623570">T2</span><span class="op" id="7623572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623577">Register</span><span class="op" id="7623585">(</span><span class="ident" id="7623586">p</span><span class="op" id="7623587">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623592">b</span>&nbsp;<span class="op" id="7623594">:=</span>&nbsp;<span class="builtinfunc" id="7623597">new</span><span class="op" id="7623600">(</span><span class="ident" id="7623601">bytes</span><span class="op" id="7623606">.</span><span class="ident" id="7623607">Buffer</span><span class="op" id="7623613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623618">enc</span>&nbsp;<span class="op" id="7623622">:=</span>&nbsp;<span class="ident" id="7623625">NewEncoder</span><span class="op" id="7623635">(</span><span class="ident" id="7623636">b</span><span class="op" id="7623637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623642">err</span>&nbsp;<span class="op" id="7623646">:=</span>&nbsp;<span class="ident" id="7623649">enc</span><span class="op" id="7623652">.</span><span class="ident" id="7623653">Encode</span><span class="op" id="7623659">(</span><span class="ident" id="7623660">p</span><span class="op" id="7623661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7623666">if</span>&nbsp;<span class="ident" id="7623669">err</span>&nbsp;<span class="op" id="7623673">!=</span>&nbsp;<span class="ident" id="7623676">nil</span>&nbsp;<span class="op" id="7623680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623686">t</span><span class="op" id="7623687">.</span><span class="ident" id="7623688">Error</span><span class="op" id="7623693">(</span><span class="string" id="7623694">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="7623709">,</span>&nbsp;<span class="ident" id="7623711">err</span><span class="op" id="7623714">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7623719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623724">dec</span>&nbsp;<span class="op" id="7623728">:=</span>&nbsp;<span class="ident" id="7623731">NewDecoder</span><span class="op" id="7623741">(</span><span class="ident" id="7623742">b</span><span class="op" id="7623743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623748">err</span>&nbsp;<span class="op" id="7623752">=</span>&nbsp;<span class="ident" id="7623754">dec</span><span class="op" id="7623757">.</span><span class="ident" id="7623758">Decode</span><span class="op" id="7623764">(</span><span class="ident" id="7623765">p</span><span class="op" id="7623766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7623771">if</span>&nbsp;<span class="ident" id="7623774">err</span>&nbsp;<span class="op" id="7623778">!=</span>&nbsp;<span class="ident" id="7623781">nil</span>&nbsp;<span class="op" id="7623785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623791">t</span><span class="op" id="7623792">.</span><span class="ident" id="7623793">Error</span><span class="op" id="7623798">(</span><span class="string" id="7623799">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="7623814">,</span>&nbsp;<span class="ident" id="7623816">err</span><span class="op" id="7623819">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7623824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7623829">c</span>&nbsp;<span class="op" id="7623831">&lt;-</span>&nbsp;<span class="builtintype" id="7623834">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7623841">}</span><span class="op" id="7623842">(</span><span class="op" id="7623843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7623846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7623849">for</span>&nbsp;<span class="ident" id="7623853">i</span>&nbsp;<span class="op" id="7623855">:=</span>&nbsp;<span class="num" id="7623858">0</span><span class="op" id="7623859">;</span>&nbsp;<span class="ident" id="7623861">i</span>&nbsp;<span class="op" id="7623863">&lt;</span>&nbsp;<span class="ident" id="7623865">N</span><span class="op" id="7623866">;</span>&nbsp;<span class="ident" id="7623868">i</span><span class="op" id="7623869">++</span>&nbsp;<span class="op" id="7623872">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7623876">&lt;-</span><span class="ident" id="7623878">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7623881">}</span><br>
<span class="lineno"></span><span class="op" id="7623883">}</span>
</div>
</body>
</html>
