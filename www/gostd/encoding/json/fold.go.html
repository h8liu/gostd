<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html" class="current">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3746309">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3746364">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3746418">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3746469">package</span>&nbsp;<span class="ident" id="3746477">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3746483">import</span>&nbsp;<span class="op" id="3746490">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3746493">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3746502">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3746517">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3746520">const</span>&nbsp;<span class="op" id="3746526">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3746529">caseMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3746542">=</span>&nbsp;<span class="op" id="3746544">^</span><span class="builtintype" id="3746545">byte</span><span class="op" id="3746549">(</span><span class="num" id="3746550">0x20</span><span class="op" id="3746554">)</span>&nbsp;<span class="comment" id="3746556">//&nbsp;Mask&nbsp;to&nbsp;ignore&nbsp;case&nbsp;in&nbsp;ASCII.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3746590">kelvin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3746603">=</span>&nbsp;<span class="string" id="3746605">&#39;\u212a&#39;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3746615">smallLongEss</span>&nbsp;<span class="op" id="3746628">=</span>&nbsp;<span class="string" id="3746630">&#39;\u017f&#39;</span><br>
<span class="lineno"></span><span class="op" id="3746639">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3746642">//&nbsp;foldFunc&nbsp;returns&nbsp;one&nbsp;of&nbsp;four&nbsp;different&nbsp;case&nbsp;folding&nbsp;equivalence</span><br>
<span class="lineno"></span><span class="comment" id="3746709">//&nbsp;functions,&nbsp;from&nbsp;most&nbsp;general&nbsp;(and&nbsp;slow)&nbsp;to&nbsp;fastest:</span><br>
<span class="lineno">20</span><span class="comment" id="3746764">//</span><br>
<span class="lineno"></span><span class="comment" id="3746767">//&nbsp;1)&nbsp;bytes.EqualFold,&nbsp;if&nbsp;the&nbsp;key&nbsp;s&nbsp;contains&nbsp;any&nbsp;non-ASCII&nbsp;UTF-8</span><br>
<span class="lineno"></span><span class="comment" id="3746832">//&nbsp;2)&nbsp;equalFoldRight,&nbsp;if&nbsp;s&nbsp;contains&nbsp;special&nbsp;folding&nbsp;ASCII&nbsp;(&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;&#39;S&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3746911">//&nbsp;3)&nbsp;asciiEqualFold,&nbsp;no&nbsp;special,&nbsp;but&nbsp;includes&nbsp;non-letters&nbsp;(including&nbsp;_)</span><br>
<span class="lineno"></span><span class="comment" id="3746984">//&nbsp;4)&nbsp;simpleLetterEqualFold,&nbsp;no&nbsp;specials,&nbsp;no&nbsp;non-letters.</span><br>
<span class="lineno">25</span><span class="comment" id="3747042">//</span><br>
<span class="lineno"></span><span class="comment" id="3747045">//&nbsp;The&nbsp;letters&nbsp;S&nbsp;and&nbsp;K&nbsp;are&nbsp;special&nbsp;because&nbsp;they&nbsp;map&nbsp;to&nbsp;3&nbsp;runes,&nbsp;not&nbsp;just&nbsp;2:</span><br>
<span class="lineno"></span><span class="comment" id="3747121">//&nbsp;&nbsp;*&nbsp;S&nbsp;maps&nbsp;to&nbsp;s&nbsp;and&nbsp;to&nbsp;U+017F&nbsp;&#39;ſ&#39;&nbsp;Latin&nbsp;small&nbsp;letter&nbsp;long&nbsp;s</span><br>
<span class="lineno"></span><span class="comment" id="3747184">//&nbsp;&nbsp;*&nbsp;k&nbsp;maps&nbsp;to&nbsp;K&nbsp;and&nbsp;to&nbsp;U+212A&nbsp;&#39;K&#39;&nbsp;Kelvin&nbsp;sign</span><br>
<span class="lineno"></span><span class="comment" id="3747234">//&nbsp;See&nbsp;http://play.golang.org/p/tTxjOc0OGo</span><br>
<span class="lineno">30</span><span class="comment" id="3747277">//</span><br>
<span class="lineno"></span><span class="comment" id="3747280">//&nbsp;The&nbsp;returned&nbsp;function&nbsp;is&nbsp;specialized&nbsp;for&nbsp;matching&nbsp;against&nbsp;s&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3747347">//&nbsp;should&nbsp;only&nbsp;be&nbsp;given&nbsp;s.&nbsp;It&#39;s&nbsp;not&nbsp;curried&nbsp;for&nbsp;performance&nbsp;reasons.</span><br>
<span class="lineno"></span><span class="keyword" id="3747416">func</span>&nbsp;<span class="ident" id="3747421">foldFunc</span><span class="op" id="3747429">(</span><span class="ident" id="3747430">s</span>&nbsp;<span class="op" id="3747432">[</span><span class="op" id="3747433">]</span><span class="builtintype" id="3747434">byte</span><span class="op" id="3747438">)</span>&nbsp;<span class="keyword" id="3747440">func</span><span class="op" id="3747444">(</span><span class="ident" id="3747445">s</span><span class="op" id="3747446">,</span>&nbsp;<span class="ident" id="3747448">t</span>&nbsp;<span class="op" id="3747450">[</span><span class="op" id="3747451">]</span><span class="builtintype" id="3747452">byte</span><span class="op" id="3747456">)</span>&nbsp;<span class="builtintype" id="3747458">bool</span>&nbsp;<span class="op" id="3747463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3747466">nonLetter</span>&nbsp;<span class="op" id="3747476">:=</span>&nbsp;<span class="builtintype" id="3747479">false</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3747486">special</span>&nbsp;<span class="op" id="3747494">:=</span>&nbsp;<span class="builtintype" id="3747497">false</span>&nbsp;<span class="comment" id="3747503">//&nbsp;special&nbsp;letter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3747522">for</span>&nbsp;<span class="ident" id="3747526">_</span><span class="op" id="3747527">,</span>&nbsp;<span class="ident" id="3747529">b</span>&nbsp;<span class="op" id="3747531">:=</span>&nbsp;<span class="keyword" id="3747534">range</span>&nbsp;<span class="ident" id="3747540">s</span>&nbsp;<span class="op" id="3747542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3747546">if</span>&nbsp;<span class="ident" id="3747549">b</span>&nbsp;<span class="op" id="3747551">&gt;=</span>&nbsp;<span class="ident" id="3747554">utf8</span><span class="op" id="3747558">.</span><span class="ident" id="3747559">RuneSelf</span>&nbsp;<span class="op" id="3747568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3747573">return</span>&nbsp;<span class="ident" id="3747580">bytes</span><span class="op" id="3747585">.</span><span class="ident" id="3747586">EqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3747598">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3747602">upper</span>&nbsp;<span class="op" id="3747608">:=</span>&nbsp;<span class="ident" id="3747611">b</span>&nbsp;<span class="op" id="3747613">&amp;</span>&nbsp;<span class="ident" id="3747615">caseMask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3747626">if</span>&nbsp;<span class="ident" id="3747629">upper</span>&nbsp;<span class="op" id="3747635">&lt;</span>&nbsp;<span class="string" id="3747637">&#39;A&#39;</span>&nbsp;<span class="op" id="3747641">||</span>&nbsp;<span class="ident" id="3747644">upper</span>&nbsp;<span class="op" id="3747650">&gt;</span>&nbsp;<span class="string" id="3747652">&#39;Z&#39;</span>&nbsp;<span class="op" id="3747656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3747661">nonLetter</span>&nbsp;<span class="op" id="3747671">=</span>&nbsp;<span class="builtintype" id="3747673">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3747680">}</span>&nbsp;<span class="keyword" id="3747682">else</span>&nbsp;<span class="keyword" id="3747687">if</span>&nbsp;<span class="ident" id="3747690">upper</span>&nbsp;<span class="op" id="3747696">==</span>&nbsp;<span class="string" id="3747699">&#39;K&#39;</span>&nbsp;<span class="op" id="3747703">||</span>&nbsp;<span class="ident" id="3747706">upper</span>&nbsp;<span class="op" id="3747712">==</span>&nbsp;<span class="string" id="3747715">&#39;S&#39;</span>&nbsp;<span class="op" id="3747719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3747724">//&nbsp;See&nbsp;above&nbsp;for&nbsp;why&nbsp;these&nbsp;letters&nbsp;are&nbsp;special.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3747775">special</span>&nbsp;<span class="op" id="3747783">=</span>&nbsp;<span class="builtintype" id="3747785">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3747792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3747795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3747798">if</span>&nbsp;<span class="ident" id="3747801">special</span>&nbsp;<span class="op" id="3747809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3747813">return</span>&nbsp;<span class="ident" id="3747820">equalFoldRight</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3747836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3747839">if</span>&nbsp;<span class="ident" id="3747842">nonLetter</span>&nbsp;<span class="op" id="3747852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3747856">return</span>&nbsp;<span class="ident" id="3747863">asciiEqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3747879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3747882">return</span>&nbsp;<span class="ident" id="3747889">simpleLetterEqualFold</span><br>
<span class="lineno">55</span><span class="op" id="3747911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3747914">//&nbsp;equalFoldRight&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;when&nbsp;s&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3747981">//&nbsp;known&nbsp;to&nbsp;be&nbsp;all&nbsp;ASCII&nbsp;(including&nbsp;punctuation),&nbsp;but&nbsp;contains&nbsp;an&nbsp;&#39;s&#39;,</span><br>
<span class="lineno"></span><span class="comment" id="3748052">//&nbsp;&#39;S&#39;,&nbsp;&#39;k&#39;,&nbsp;or&nbsp;&#39;K&#39;,&nbsp;requiring&nbsp;a&nbsp;Unicode&nbsp;fold&nbsp;on&nbsp;the&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno">60</span><span class="comment" id="3748117">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="3748146">func</span>&nbsp;<span class="ident" id="3748151">equalFoldRight</span><span class="op" id="3748165">(</span><span class="ident" id="3748166">s</span><span class="op" id="3748167">,</span>&nbsp;<span class="ident" id="3748169">t</span>&nbsp;<span class="op" id="3748171">[</span><span class="op" id="3748172">]</span><span class="builtintype" id="3748173">byte</span><span class="op" id="3748177">)</span>&nbsp;<span class="builtintype" id="3748179">bool</span>&nbsp;<span class="op" id="3748184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748187">for</span>&nbsp;<span class="ident" id="3748191">_</span><span class="op" id="3748192">,</span>&nbsp;<span class="ident" id="3748194">sb</span>&nbsp;<span class="op" id="3748197">:=</span>&nbsp;<span class="keyword" id="3748200">range</span>&nbsp;<span class="ident" id="3748206">s</span>&nbsp;<span class="op" id="3748208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748212">if</span>&nbsp;<span class="builtinfunc" id="3748215">len</span><span class="op" id="3748218">(</span><span class="ident" id="3748219">t</span><span class="op" id="3748220">)</span>&nbsp;<span class="op" id="3748222">==</span>&nbsp;<span class="num" id="3748225">0</span>&nbsp;<span class="op" id="3748227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748232">return</span>&nbsp;<span class="builtintype" id="3748239">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3748247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3748251">tb</span>&nbsp;<span class="op" id="3748254">:=</span>&nbsp;<span class="ident" id="3748257">t</span><span class="op" id="3748258">[</span><span class="num" id="3748259">0</span><span class="op" id="3748260">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748264">if</span>&nbsp;<span class="ident" id="3748267">tb</span>&nbsp;<span class="op" id="3748270">&lt;</span>&nbsp;<span class="ident" id="3748272">utf8</span><span class="op" id="3748276">.</span><span class="ident" id="3748277">RuneSelf</span>&nbsp;<span class="op" id="3748286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748291">if</span>&nbsp;<span class="ident" id="3748294">sb</span>&nbsp;<span class="op" id="3748297">!=</span>&nbsp;<span class="ident" id="3748300">tb</span>&nbsp;<span class="op" id="3748303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3748309">sbUpper</span>&nbsp;<span class="op" id="3748317">:=</span>&nbsp;<span class="ident" id="3748320">sb</span>&nbsp;<span class="op" id="3748323">&amp;</span>&nbsp;<span class="ident" id="3748325">caseMask</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748338">if</span>&nbsp;<span class="string" id="3748341">&#39;A&#39;</span>&nbsp;<span class="op" id="3748345">&lt;=</span>&nbsp;<span class="ident" id="3748348">sbUpper</span>&nbsp;<span class="op" id="3748356">&amp;&amp;</span>&nbsp;<span class="ident" id="3748359">sbUpper</span>&nbsp;<span class="op" id="3748367">&lt;=</span>&nbsp;<span class="string" id="3748370">&#39;Z&#39;</span>&nbsp;<span class="op" id="3748374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748381">if</span>&nbsp;<span class="ident" id="3748384">sbUpper</span>&nbsp;<span class="op" id="3748392">!=</span>&nbsp;<span class="ident" id="3748395">tb</span><span class="op" id="3748397">&amp;</span><span class="ident" id="3748398">caseMask</span>&nbsp;<span class="op" id="3748407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748415">return</span>&nbsp;<span class="builtintype" id="3748422">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3748433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3748439">}</span>&nbsp;<span class="keyword" id="3748441">else</span>&nbsp;<span class="op" id="3748446">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748453">return</span>&nbsp;<span class="builtintype" id="3748460">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3748470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3748475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3748480">t</span>&nbsp;<span class="op" id="3748482">=</span>&nbsp;<span class="ident" id="3748484">t</span><span class="op" id="3748485">[</span><span class="num" id="3748486">1</span><span class="op" id="3748487">:</span><span class="op" id="3748488">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748493">continue</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3748504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3748508">//&nbsp;sb&nbsp;is&nbsp;ASCII&nbsp;and&nbsp;t&nbsp;is&nbsp;not.&nbsp;t&nbsp;must&nbsp;be&nbsp;either&nbsp;kelvin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3748563">//&nbsp;sign&nbsp;or&nbsp;long&nbsp;s;&nbsp;sb&nbsp;must&nbsp;be&nbsp;s,&nbsp;S,&nbsp;k,&nbsp;or&nbsp;K.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3748610">tr</span><span class="op" id="3748612">,</span>&nbsp;<span class="ident" id="3748614">size</span>&nbsp;<span class="op" id="3748619">:=</span>&nbsp;<span class="ident" id="3748622">utf8</span><span class="op" id="3748626">.</span><span class="ident" id="3748627">DecodeRune</span><span class="op" id="3748637">(</span><span class="ident" id="3748638">t</span><span class="op" id="3748639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748643">switch</span>&nbsp;<span class="ident" id="3748650">sb</span>&nbsp;<span class="op" id="3748653">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748657">case</span>&nbsp;<span class="string" id="3748662">&#39;s&#39;</span><span class="op" id="3748665">,</span>&nbsp;<span class="string" id="3748667">&#39;S&#39;</span><span class="op" id="3748670">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748675">if</span>&nbsp;<span class="ident" id="3748678">tr</span>&nbsp;<span class="op" id="3748681">!=</span>&nbsp;<span class="ident" id="3748684">smallLongEss</span>&nbsp;<span class="op" id="3748697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748703">return</span>&nbsp;<span class="builtintype" id="3748710">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3748719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748723">case</span>&nbsp;<span class="string" id="3748728">&#39;k&#39;</span><span class="op" id="3748731">,</span>&nbsp;<span class="string" id="3748733">&#39;K&#39;</span><span class="op" id="3748736">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748741">if</span>&nbsp;<span class="ident" id="3748744">tr</span>&nbsp;<span class="op" id="3748747">!=</span>&nbsp;<span class="ident" id="3748750">kelvin</span>&nbsp;<span class="op" id="3748757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748763">return</span>&nbsp;<span class="builtintype" id="3748770">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3748779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748783">default</span><span class="op" id="3748790">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748795">return</span>&nbsp;<span class="builtintype" id="3748802">false</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3748810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3748814">t</span>&nbsp;<span class="op" id="3748816">=</span>&nbsp;<span class="ident" id="3748818">t</span><span class="op" id="3748819">[</span><span class="ident" id="3748820">size</span><span class="op" id="3748824">:</span><span class="op" id="3748825">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3748829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748832">if</span>&nbsp;<span class="builtinfunc" id="3748835">len</span><span class="op" id="3748838">(</span><span class="ident" id="3748839">t</span><span class="op" id="3748840">)</span>&nbsp;<span class="op" id="3748842">&gt;</span>&nbsp;<span class="num" id="3748844">0</span>&nbsp;<span class="op" id="3748846">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748850">return</span>&nbsp;<span class="builtintype" id="3748857">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3748864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3748867">return</span>&nbsp;<span class="builtintype" id="3748874">true</span><br>
<span class="lineno"></span><span class="op" id="3748879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3748882">//&nbsp;asciiEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for&nbsp;use&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="3748952">//&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;(but&nbsp;may&nbsp;contain&nbsp;non-letters)&nbsp;and&nbsp;contains&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="3749016">//&nbsp;special-folding&nbsp;letters.</span><br>
<span class="lineno"></span><span class="comment" id="3749044">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="3749073">func</span>&nbsp;<span class="ident" id="3749078">asciiEqualFold</span><span class="op" id="3749092">(</span><span class="ident" id="3749093">s</span><span class="op" id="3749094">,</span>&nbsp;<span class="ident" id="3749096">t</span>&nbsp;<span class="op" id="3749098">[</span><span class="op" id="3749099">]</span><span class="builtintype" id="3749100">byte</span><span class="op" id="3749104">)</span>&nbsp;<span class="builtintype" id="3749106">bool</span>&nbsp;<span class="op" id="3749111">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749114">if</span>&nbsp;<span class="builtinfunc" id="3749117">len</span><span class="op" id="3749120">(</span><span class="ident" id="3749121">s</span><span class="op" id="3749122">)</span>&nbsp;<span class="op" id="3749124">!=</span>&nbsp;<span class="builtinfunc" id="3749127">len</span><span class="op" id="3749130">(</span><span class="ident" id="3749131">t</span><span class="op" id="3749132">)</span>&nbsp;<span class="op" id="3749134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749138">return</span>&nbsp;<span class="builtintype" id="3749145">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3749152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749155">for</span>&nbsp;<span class="ident" id="3749159">i</span><span class="op" id="3749160">,</span>&nbsp;<span class="ident" id="3749162">sb</span>&nbsp;<span class="op" id="3749165">:=</span>&nbsp;<span class="keyword" id="3749168">range</span>&nbsp;<span class="ident" id="3749174">s</span>&nbsp;<span class="op" id="3749176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3749180">tb</span>&nbsp;<span class="op" id="3749183">:=</span>&nbsp;<span class="ident" id="3749186">t</span><span class="op" id="3749187">[</span><span class="ident" id="3749188">i</span><span class="op" id="3749189">]</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749193">if</span>&nbsp;<span class="ident" id="3749196">sb</span>&nbsp;<span class="op" id="3749199">==</span>&nbsp;<span class="ident" id="3749202">tb</span>&nbsp;<span class="op" id="3749205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749210">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3749221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749225">if</span>&nbsp;<span class="op" id="3749228">(</span><span class="string" id="3749229">&#39;a&#39;</span>&nbsp;<span class="op" id="3749233">&lt;=</span>&nbsp;<span class="ident" id="3749236">sb</span>&nbsp;<span class="op" id="3749239">&amp;&amp;</span>&nbsp;<span class="ident" id="3749242">sb</span>&nbsp;<span class="op" id="3749245">&lt;=</span>&nbsp;<span class="string" id="3749248">&#39;z&#39;</span><span class="op" id="3749251">)</span>&nbsp;<span class="op" id="3749253">||</span>&nbsp;<span class="op" id="3749256">(</span><span class="string" id="3749257">&#39;A&#39;</span>&nbsp;<span class="op" id="3749261">&lt;=</span>&nbsp;<span class="ident" id="3749264">sb</span>&nbsp;<span class="op" id="3749267">&amp;&amp;</span>&nbsp;<span class="ident" id="3749270">sb</span>&nbsp;<span class="op" id="3749273">&lt;=</span>&nbsp;<span class="string" id="3749276">&#39;Z&#39;</span><span class="op" id="3749279">)</span>&nbsp;<span class="op" id="3749281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749286">if</span>&nbsp;<span class="ident" id="3749289">sb</span><span class="op" id="3749291">&amp;</span><span class="ident" id="3749292">caseMask</span>&nbsp;<span class="op" id="3749301">!=</span>&nbsp;<span class="ident" id="3749304">tb</span><span class="op" id="3749306">&amp;</span><span class="ident" id="3749307">caseMask</span>&nbsp;<span class="op" id="3749316">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749322">return</span>&nbsp;<span class="builtintype" id="3749329">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3749338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3749342">}</span>&nbsp;<span class="keyword" id="3749344">else</span>&nbsp;<span class="op" id="3749349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749354">return</span>&nbsp;<span class="builtintype" id="3749361">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3749369">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3749372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749375">return</span>&nbsp;<span class="builtintype" id="3749382">true</span><br>
<span class="lineno"></span><span class="op" id="3749387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3749390">//&nbsp;simpleLetterEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for</span><br>
<span class="lineno">130</span><span class="comment" id="3749458">//&nbsp;use&nbsp;when&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;letters&nbsp;(no&nbsp;underscores,&nbsp;etc)&nbsp;and&nbsp;also</span><br>
<span class="lineno"></span><span class="comment" id="3749524">//&nbsp;doesn&#39;t&nbsp;contain&nbsp;&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;or&nbsp;&#39;S&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="3749566">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="3749595">func</span>&nbsp;<span class="ident" id="3749600">simpleLetterEqualFold</span><span class="op" id="3749621">(</span><span class="ident" id="3749622">s</span><span class="op" id="3749623">,</span>&nbsp;<span class="ident" id="3749625">t</span>&nbsp;<span class="op" id="3749627">[</span><span class="op" id="3749628">]</span><span class="builtintype" id="3749629">byte</span><span class="op" id="3749633">)</span>&nbsp;<span class="builtintype" id="3749635">bool</span>&nbsp;<span class="op" id="3749640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749643">if</span>&nbsp;<span class="builtinfunc" id="3749646">len</span><span class="op" id="3749649">(</span><span class="ident" id="3749650">s</span><span class="op" id="3749651">)</span>&nbsp;<span class="op" id="3749653">!=</span>&nbsp;<span class="builtinfunc" id="3749656">len</span><span class="op" id="3749659">(</span><span class="ident" id="3749660">t</span><span class="op" id="3749661">)</span>&nbsp;<span class="op" id="3749663">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749667">return</span>&nbsp;<span class="builtintype" id="3749674">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3749681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749684">for</span>&nbsp;<span class="ident" id="3749688">i</span><span class="op" id="3749689">,</span>&nbsp;<span class="ident" id="3749691">b</span>&nbsp;<span class="op" id="3749693">:=</span>&nbsp;<span class="keyword" id="3749696">range</span>&nbsp;<span class="ident" id="3749702">s</span>&nbsp;<span class="op" id="3749704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749708">if</span>&nbsp;<span class="ident" id="3749711">b</span><span class="op" id="3749712">&amp;</span><span class="ident" id="3749713">caseMask</span>&nbsp;<span class="op" id="3749722">!=</span>&nbsp;<span class="ident" id="3749725">t</span><span class="op" id="3749726">[</span><span class="ident" id="3749727">i</span><span class="op" id="3749728">]</span><span class="op" id="3749729">&amp;</span><span class="ident" id="3749730">caseMask</span>&nbsp;<span class="op" id="3749739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749744">return</span>&nbsp;<span class="builtintype" id="3749751">false</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3749759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3749762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3749765">return</span>&nbsp;<span class="builtintype" id="3749772">true</span><br>
<span class="lineno"></span><span class="op" id="3749777">}</span>
</div>
</body>
</html>
