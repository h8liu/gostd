<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>container/heap</h2>
<ul>
<li><a href="/gostd/container/heap/example_intheap_test.go.html">example_intheap_test.go</a></li>
<li><a href="/gostd/container/heap/example_pq_test.go.html">example_pq_test.go</a></li>
<li><a href="/gostd/container/heap/heap.go.html">heap.go</a></li>
<li><a href="/gostd/container/heap/heap_test.go.html">heap_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5974927">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5974982">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5975036">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5975087">//&nbsp;Package&nbsp;heap&nbsp;provides&nbsp;heap&nbsp;operations&nbsp;for&nbsp;any&nbsp;type&nbsp;that&nbsp;implements</span><br>
<span class="lineno"></span><span class="comment" id="5975157">//&nbsp;heap.Interface.&nbsp;A&nbsp;heap&nbsp;is&nbsp;a&nbsp;tree&nbsp;with&nbsp;the&nbsp;property&nbsp;that&nbsp;each&nbsp;node&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5975233">//&nbsp;minimum-valued&nbsp;node&nbsp;in&nbsp;its&nbsp;subtree.</span><br>
<span class="lineno"></span><span class="comment" id="5975272">//</span><br>
<span class="lineno"></span><span class="comment" id="5975275">//&nbsp;The&nbsp;minimum&nbsp;element&nbsp;in&nbsp;the&nbsp;tree&nbsp;is&nbsp;the&nbsp;root,&nbsp;at&nbsp;index&nbsp;0.</span><br>
<span class="lineno">10</span><span class="comment" id="5975335">//</span><br>
<span class="lineno"></span><span class="comment" id="5975338">//&nbsp;A&nbsp;heap&nbsp;is&nbsp;a&nbsp;common&nbsp;way&nbsp;to&nbsp;implement&nbsp;a&nbsp;priority&nbsp;queue.&nbsp;To&nbsp;build&nbsp;a&nbsp;priority</span><br>
<span class="lineno"></span><span class="comment" id="5975415">//&nbsp;queue,&nbsp;implement&nbsp;the&nbsp;Heap&nbsp;interface&nbsp;with&nbsp;the&nbsp;(negative)&nbsp;priority&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5975490">//&nbsp;ordering&nbsp;for&nbsp;the&nbsp;Less&nbsp;method,&nbsp;so&nbsp;Push&nbsp;adds&nbsp;items&nbsp;while&nbsp;Pop&nbsp;removes&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5975564">//&nbsp;highest-priority&nbsp;item&nbsp;from&nbsp;the&nbsp;queue.&nbsp;The&nbsp;Examples&nbsp;include&nbsp;such&nbsp;an</span><br>
<span class="lineno">15</span><span class="comment" id="5975634">//&nbsp;implementation;&nbsp;the&nbsp;file&nbsp;example_pq_test.go&nbsp;has&nbsp;the&nbsp;complete&nbsp;source.</span><br>
<span class="lineno"></span><span class="comment" id="5975706">//</span><br>
<span class="lineno"></span><span class="keyword" id="5975709">package</span>&nbsp;<span class="ident" id="5975717">heap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5975723">import</span>&nbsp;<span class="string" id="5975730">&#34;sort&#34;</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5975738">//&nbsp;Any&nbsp;type&nbsp;that&nbsp;implements&nbsp;heap.Interface&nbsp;may&nbsp;be&nbsp;used&nbsp;as&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5975798">//&nbsp;min-heap&nbsp;with&nbsp;the&nbsp;following&nbsp;invariants&nbsp;(established&nbsp;after</span><br>
<span class="lineno"></span><span class="comment" id="5975859">//&nbsp;Init&nbsp;has&nbsp;been&nbsp;called&nbsp;or&nbsp;if&nbsp;the&nbsp;data&nbsp;is&nbsp;empty&nbsp;or&nbsp;sorted):</span><br>
<span class="lineno"></span><span class="comment" id="5975919">//</span><br>
<span class="lineno">25</span><span class="comment" id="5975922">//&nbsp;&nbsp;&nbsp;&nbsp!h.Less(j,&nbsp;i)&nbsp;for&nbsp;0&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;h.Len()&nbsp;and&nbsp;2*i+1&nbsp;&lt;=&nbsp;j&nbsp;&lt;=&nbsp;2*i+2&nbsp;and&nbsp;j&nbsp;&lt;&nbsp;h.Len()</span><br>
<span class="lineno"></span><span class="comment" id="5976000">//</span><br>
<span class="lineno"></span><span class="comment" id="5976003">//&nbsp;Note&nbsp;that&nbsp;Push&nbsp;and&nbsp;Pop&nbsp;in&nbsp;this&nbsp;interface&nbsp;are&nbsp;for&nbsp;package&nbsp;heap&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="5976070">//&nbsp;implementation&nbsp;to&nbsp;call.&nbsp;&nbsp;To&nbsp;add&nbsp;and&nbsp;remove&nbsp;things&nbsp;from&nbsp;the&nbsp;heap,</span><br>
<span class="lineno"></span><span class="comment" id="5976138">//&nbsp;use&nbsp;heap.Push&nbsp;and&nbsp;heap.Pop.</span><br>
<span class="lineno">30</span><span class="keyword" id="5976169">type</span>&nbsp;<span class="ident" id="5976174">Interface</span>&nbsp;<span class="keyword" id="5976184">interface</span>&nbsp;<span class="op" id="5976194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5976197">sort</span><span class="op" id="5976201">.</span><span class="ident" id="5976202">Interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5976213">Push</span><span class="op" id="5976217">(</span><span class="ident" id="5976218">x</span>&nbsp;<span class="keyword" id="5976220">interface</span><span class="op" id="5976229">{</span><span class="op" id="5976230">}</span><span class="op" id="5976231">)</span>&nbsp;<span class="comment" id="5976233">//&nbsp;add&nbsp;x&nbsp;as&nbsp;element&nbsp;Len()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5976260">Pop</span><span class="op" id="5976263">(</span><span class="op" id="5976264">)</span>&nbsp;<span class="keyword" id="5976266">interface</span><span class="op" id="5976275">{</span><span class="op" id="5976276">}</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5976280">//&nbsp;remove&nbsp;and&nbsp;return&nbsp;element&nbsp;Len()&nbsp;-&nbsp;1.</span><br>
<span class="lineno"></span><span class="op" id="5976320">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5976323">//&nbsp;A&nbsp;heap&nbsp;must&nbsp;be&nbsp;initialized&nbsp;before&nbsp;any&nbsp;of&nbsp;the&nbsp;heap&nbsp;operations</span><br>
<span class="lineno"></span><span class="comment" id="5976387">//&nbsp;can&nbsp;be&nbsp;used.&nbsp;Init&nbsp;is&nbsp;idempotent&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;heap&nbsp;invariants</span><br>
<span class="lineno"></span><span class="comment" id="5976458">//&nbsp;and&nbsp;may&nbsp;be&nbsp;called&nbsp;whenever&nbsp;the&nbsp;heap&nbsp;invariants&nbsp;may&nbsp;have&nbsp;been&nbsp;invalidated.</span><br>
<span class="lineno"></span><span class="comment" id="5976535">//&nbsp;Its&nbsp;complexity&nbsp;is&nbsp;O(n)&nbsp;where&nbsp;n&nbsp;=&nbsp;h.Len().</span><br>
<span class="lineno">40</span><span class="comment" id="5976580">//</span><br>
<span class="lineno"></span><span class="keyword" id="5976583">func</span>&nbsp;<span class="ident" id="5976588">Init</span><span class="op" id="5976592">(</span><span class="ident" id="5976593">h</span>&nbsp;<span class="ident" id="5976595">Interface</span><span class="op" id="5976604">)</span>&nbsp;<span class="op" id="5976606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5976609">//&nbsp;heapify</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5976621">n</span>&nbsp;<span class="op" id="5976623">:=</span>&nbsp;<span class="ident" id="5976626">h</span><span class="op" id="5976627">.</span><span class="ident" id="5976628">Len</span><span class="op" id="5976631">(</span><span class="op" id="5976632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5976635">for</span>&nbsp;<span class="ident" id="5976639">i</span>&nbsp;<span class="op" id="5976641">:=</span>&nbsp;<span class="ident" id="5976644">n</span><span class="op" id="5976645">/</span><span class="num" id="5976646">2</span>&nbsp;<span class="op" id="5976648">-</span>&nbsp;<span class="num" id="5976650">1</span><span class="op" id="5976651">;</span>&nbsp;<span class="ident" id="5976653">i</span>&nbsp;<span class="op" id="5976655">&gt;=</span>&nbsp;<span class="num" id="5976658">0</span><span class="op" id="5976659">;</span>&nbsp;<span class="ident" id="5976661">i</span><span class="op" id="5976662">--</span>&nbsp;<span class="op" id="5976665">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5976669">down</span><span class="op" id="5976673">(</span><span class="ident" id="5976674">h</span><span class="op" id="5976675">,</span>&nbsp;<span class="ident" id="5976677">i</span><span class="op" id="5976678">,</span>&nbsp;<span class="ident" id="5976680">n</span><span class="op" id="5976681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5976684">}</span><br>
<span class="lineno"></span><span class="op" id="5976686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5976689">//&nbsp;Push&nbsp;pushes&nbsp;the&nbsp;element&nbsp;x&nbsp;onto&nbsp;the&nbsp;heap.&nbsp;The&nbsp;complexity&nbsp;is</span><br>
<span class="lineno">50</span><span class="comment" id="5976751">//&nbsp;O(log(n))&nbsp;where&nbsp;n&nbsp;=&nbsp;h.Len().</span><br>
<span class="lineno"></span><span class="comment" id="5976783">//</span><br>
<span class="lineno"></span><span class="keyword" id="5976786">func</span>&nbsp;<span class="ident" id="5976791">Push</span><span class="op" id="5976795">(</span><span class="ident" id="5976796">h</span>&nbsp;<span class="ident" id="5976798">Interface</span><span class="op" id="5976807">,</span>&nbsp;<span class="ident" id="5976809">x</span>&nbsp;<span class="keyword" id="5976811">interface</span><span class="op" id="5976820">{</span><span class="op" id="5976821">}</span><span class="op" id="5976822">)</span>&nbsp;<span class="op" id="5976824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5976827">h</span><span class="op" id="5976828">.</span><span class="ident" id="5976829">Push</span><span class="op" id="5976833">(</span><span class="ident" id="5976834">x</span><span class="op" id="5976835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5976838">up</span><span class="op" id="5976840">(</span><span class="ident" id="5976841">h</span><span class="op" id="5976842">,</span>&nbsp;<span class="ident" id="5976844">h</span><span class="op" id="5976845">.</span><span class="ident" id="5976846">Len</span><span class="op" id="5976849">(</span><span class="op" id="5976850">)</span><span class="op" id="5976851">-</span><span class="num" id="5976852">1</span><span class="op" id="5976853">)</span><br>
<span class="lineno">55</span><span class="op" id="5976855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5976858">//&nbsp;Pop&nbsp;removes&nbsp;the&nbsp;minimum&nbsp;element&nbsp;(according&nbsp;to&nbsp;Less)&nbsp;from&nbsp;the&nbsp;heap</span><br>
<span class="lineno"></span><span class="comment" id="5976927">//&nbsp;and&nbsp;returns&nbsp;it.&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(log(n))&nbsp;where&nbsp;n&nbsp;=&nbsp;h.Len().</span><br>
<span class="lineno"></span><span class="comment" id="5976993">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Remove(h,&nbsp;0).</span><br>
<span class="lineno">60</span><span class="comment" id="5977030">//</span><br>
<span class="lineno"></span><span class="keyword" id="5977033">func</span>&nbsp;<span class="ident" id="5977038">Pop</span><span class="op" id="5977041">(</span><span class="ident" id="5977042">h</span>&nbsp;<span class="ident" id="5977044">Interface</span><span class="op" id="5977053">)</span>&nbsp;<span class="keyword" id="5977055">interface</span><span class="op" id="5977064">{</span><span class="op" id="5977065">}</span>&nbsp;<span class="op" id="5977067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977070">n</span>&nbsp;<span class="op" id="5977072">:=</span>&nbsp;<span class="ident" id="5977075">h</span><span class="op" id="5977076">.</span><span class="ident" id="5977077">Len</span><span class="op" id="5977080">(</span><span class="op" id="5977081">)</span>&nbsp;<span class="op" id="5977083">-</span>&nbsp;<span class="num" id="5977085">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977088">h</span><span class="op" id="5977089">.</span><span class="ident" id="5977090">Swap</span><span class="op" id="5977094">(</span><span class="num" id="5977095">0</span><span class="op" id="5977096">,</span>&nbsp;<span class="ident" id="5977098">n</span><span class="op" id="5977099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977102">down</span><span class="op" id="5977106">(</span><span class="ident" id="5977107">h</span><span class="op" id="5977108">,</span>&nbsp;<span class="num" id="5977110">0</span><span class="op" id="5977111">,</span>&nbsp;<span class="ident" id="5977113">n</span><span class="op" id="5977114">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5977117">return</span>&nbsp;<span class="ident" id="5977124">h</span><span class="op" id="5977125">.</span><span class="ident" id="5977126">Pop</span><span class="op" id="5977129">(</span><span class="op" id="5977130">)</span><br>
<span class="lineno"></span><span class="op" id="5977132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5977135">//&nbsp;Remove&nbsp;removes&nbsp;the&nbsp;element&nbsp;at&nbsp;index&nbsp;i&nbsp;from&nbsp;the&nbsp;heap.</span><br>
<span class="lineno"></span><span class="comment" id="5977191">//&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(log(n))&nbsp;where&nbsp;n&nbsp;=&nbsp;h.Len().</span><br>
<span class="lineno">70</span><span class="comment" id="5977241">//</span><br>
<span class="lineno"></span><span class="keyword" id="5977244">func</span>&nbsp;<span class="ident" id="5977249">Remove</span><span class="op" id="5977255">(</span><span class="ident" id="5977256">h</span>&nbsp;<span class="ident" id="5977258">Interface</span><span class="op" id="5977267">,</span>&nbsp;<span class="ident" id="5977269">i</span>&nbsp;<span class="builtintype" id="5977271">int</span><span class="op" id="5977274">)</span>&nbsp;<span class="keyword" id="5977276">interface</span><span class="op" id="5977285">{</span><span class="op" id="5977286">}</span>&nbsp;<span class="op" id="5977288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977291">n</span>&nbsp;<span class="op" id="5977293">:=</span>&nbsp;<span class="ident" id="5977296">h</span><span class="op" id="5977297">.</span><span class="ident" id="5977298">Len</span><span class="op" id="5977301">(</span><span class="op" id="5977302">)</span>&nbsp;<span class="op" id="5977304">-</span>&nbsp;<span class="num" id="5977306">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5977309">if</span>&nbsp;<span class="ident" id="5977312">n</span>&nbsp;<span class="op" id="5977314">!=</span>&nbsp;<span class="ident" id="5977317">i</span>&nbsp;<span class="op" id="5977319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977323">h</span><span class="op" id="5977324">.</span><span class="ident" id="5977325">Swap</span><span class="op" id="5977329">(</span><span class="ident" id="5977330">i</span><span class="op" id="5977331">,</span>&nbsp;<span class="ident" id="5977333">n</span><span class="op" id="5977334">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977338">down</span><span class="op" id="5977342">(</span><span class="ident" id="5977343">h</span><span class="op" id="5977344">,</span>&nbsp;<span class="ident" id="5977346">i</span><span class="op" id="5977347">,</span>&nbsp;<span class="ident" id="5977349">n</span><span class="op" id="5977350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977354">up</span><span class="op" id="5977356">(</span><span class="ident" id="5977357">h</span><span class="op" id="5977358">,</span>&nbsp;<span class="ident" id="5977360">i</span><span class="op" id="5977361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5977364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5977367">return</span>&nbsp;<span class="ident" id="5977374">h</span><span class="op" id="5977375">.</span><span class="ident" id="5977376">Pop</span><span class="op" id="5977379">(</span><span class="op" id="5977380">)</span><br>
<span class="lineno"></span><span class="op" id="5977382">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="5977385">//&nbsp;Fix&nbsp;re-establishes&nbsp;the&nbsp;heap&nbsp;ordering&nbsp;after&nbsp;the&nbsp;element&nbsp;at&nbsp;index&nbsp;i&nbsp;has&nbsp;changed&nbsp;its&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5977477">//&nbsp;Changing&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;element&nbsp;at&nbsp;index&nbsp;i&nbsp;and&nbsp;then&nbsp;calling&nbsp;Fix&nbsp;is&nbsp;equivalent&nbsp;to,</span><br>
<span class="lineno"></span><span class="comment" id="5977564">//&nbsp;but&nbsp;less&nbsp;expensive&nbsp;than,&nbsp;calling&nbsp;Remove(h,&nbsp;i)&nbsp;followed&nbsp;by&nbsp;a&nbsp;Push&nbsp;of&nbsp;the&nbsp;new&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5977650">//&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(log(n))&nbsp;where&nbsp;n&nbsp;=&nbsp;h.Len().</span><br>
<span class="lineno">85</span><span class="keyword" id="5977700">func</span>&nbsp;<span class="ident" id="5977705">Fix</span><span class="op" id="5977708">(</span><span class="ident" id="5977709">h</span>&nbsp;<span class="ident" id="5977711">Interface</span><span class="op" id="5977720">,</span>&nbsp;<span class="ident" id="5977722">i</span>&nbsp;<span class="builtintype" id="5977724">int</span><span class="op" id="5977727">)</span>&nbsp;<span class="op" id="5977729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977732">down</span><span class="op" id="5977736">(</span><span class="ident" id="5977737">h</span><span class="op" id="5977738">,</span>&nbsp;<span class="ident" id="5977740">i</span><span class="op" id="5977741">,</span>&nbsp;<span class="ident" id="5977743">h</span><span class="op" id="5977744">.</span><span class="ident" id="5977745">Len</span><span class="op" id="5977748">(</span><span class="op" id="5977749">)</span><span class="op" id="5977750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977753">up</span><span class="op" id="5977755">(</span><span class="ident" id="5977756">h</span><span class="op" id="5977757">,</span>&nbsp;<span class="ident" id="5977759">i</span><span class="op" id="5977760">)</span><br>
<span class="lineno"></span><span class="op" id="5977762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="5977765">func</span>&nbsp;<span class="ident" id="5977770">up</span><span class="op" id="5977772">(</span><span class="ident" id="5977773">h</span>&nbsp;<span class="ident" id="5977775">Interface</span><span class="op" id="5977784">,</span>&nbsp;<span class="ident" id="5977786">j</span>&nbsp;<span class="builtintype" id="5977788">int</span><span class="op" id="5977791">)</span>&nbsp;<span class="op" id="5977793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5977796">for</span>&nbsp;<span class="op" id="5977800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977804">i</span>&nbsp;<span class="op" id="5977806">:=</span>&nbsp;<span class="op" id="5977809">(</span><span class="ident" id="5977810">j</span>&nbsp;<span class="op" id="5977812">-</span>&nbsp;<span class="num" id="5977814">1</span><span class="op" id="5977815">)</span>&nbsp;<span class="op" id="5977817">/</span>&nbsp;<span class="num" id="5977819">2</span>&nbsp;<span class="comment" id="5977821">//&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5977833">if</span>&nbsp;<span class="ident" id="5977836">i</span>&nbsp;<span class="op" id="5977838">==</span>&nbsp;<span class="ident" id="5977841">j</span>&nbsp;<span class="op" id="5977843">||</span>&nbsp;<span class="op" id="5977846">!</span><span class="ident" id="5977847">h</span><span class="op" id="5977848">.</span><span class="ident" id="5977849">Less</span><span class="op" id="5977853">(</span><span class="ident" id="5977854">j</span><span class="op" id="5977855">,</span>&nbsp;<span class="ident" id="5977857">i</span><span class="op" id="5977858">)</span>&nbsp;<span class="op" id="5977860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5977865">break</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5977873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977877">h</span><span class="op" id="5977878">.</span><span class="ident" id="5977879">Swap</span><span class="op" id="5977883">(</span><span class="ident" id="5977884">i</span><span class="op" id="5977885">,</span>&nbsp;<span class="ident" id="5977887">j</span><span class="op" id="5977888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977892">j</span>&nbsp;<span class="op" id="5977894">=</span>&nbsp;<span class="ident" id="5977896">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5977899">}</span><br>
<span class="lineno"></span><span class="op" id="5977901">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="5977904">func</span>&nbsp;<span class="ident" id="5977909">down</span><span class="op" id="5977913">(</span><span class="ident" id="5977914">h</span>&nbsp;<span class="ident" id="5977916">Interface</span><span class="op" id="5977925">,</span>&nbsp;<span class="ident" id="5977927">i</span><span class="op" id="5977928">,</span>&nbsp;<span class="ident" id="5977930">n</span>&nbsp;<span class="builtintype" id="5977932">int</span><span class="op" id="5977935">)</span>&nbsp;<span class="op" id="5977937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5977940">for</span>&nbsp;<span class="op" id="5977944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5977948">j1</span>&nbsp;<span class="op" id="5977951">:=</span>&nbsp;<span class="num" id="5977954">2</span><span class="op" id="5977955">*</span><span class="ident" id="5977956">i</span>&nbsp;<span class="op" id="5977958">+</span>&nbsp;<span class="num" id="5977960">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5977964">if</span>&nbsp;<span class="ident" id="5977967">j1</span>&nbsp;<span class="op" id="5977970">&gt;=</span>&nbsp;<span class="ident" id="5977973">n</span>&nbsp;<span class="op" id="5977975">||</span>&nbsp;<span class="ident" id="5977978">j1</span>&nbsp;<span class="op" id="5977981">&lt;</span>&nbsp;<span class="num" id="5977983">0</span>&nbsp;<span class="op" id="5977985">{</span>&nbsp;<span class="comment" id="5977987">//&nbsp;j1&nbsp;&lt;&nbsp;0&nbsp;after&nbsp;int&nbsp;overflow</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5978019">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5978027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5978031">j</span>&nbsp;<span class="op" id="5978033">:=</span>&nbsp;<span class="ident" id="5978036">j1</span>&nbsp;<span class="comment" id="5978039">//&nbsp;left&nbsp;child</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5978055">if</span>&nbsp;<span class="ident" id="5978058">j2</span>&nbsp;<span class="op" id="5978061">:=</span>&nbsp;<span class="ident" id="5978064">j1</span>&nbsp;<span class="op" id="5978067">+</span>&nbsp;<span class="num" id="5978069">1</span><span class="op" id="5978070">;</span>&nbsp;<span class="ident" id="5978072">j2</span>&nbsp;<span class="op" id="5978075">&lt;</span>&nbsp;<span class="ident" id="5978077">n</span>&nbsp;<span class="op" id="5978079">&amp;&amp;</span>&nbsp;<span class="op" id="5978082">!</span><span class="ident" id="5978083">h</span><span class="op" id="5978084">.</span><span class="ident" id="5978085">Less</span><span class="op" id="5978089">(</span><span class="ident" id="5978090">j1</span><span class="op" id="5978092">,</span>&nbsp;<span class="ident" id="5978094">j2</span><span class="op" id="5978096">)</span>&nbsp;<span class="op" id="5978098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5978103">j</span>&nbsp;<span class="op" id="5978105">=</span>&nbsp;<span class="ident" id="5978107">j2</span>&nbsp;<span class="comment" id="5978110">//&nbsp;=&nbsp;2*i&nbsp;+&nbsp;2&nbsp;&nbsp;//&nbsp;right&nbsp;child</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5978141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5978145">if</span>&nbsp;<span class="op" id="5978148">!</span><span class="ident" id="5978149">h</span><span class="op" id="5978150">.</span><span class="ident" id="5978151">Less</span><span class="op" id="5978155">(</span><span class="ident" id="5978156">j</span><span class="op" id="5978157">,</span>&nbsp;<span class="ident" id="5978159">i</span><span class="op" id="5978160">)</span>&nbsp;<span class="op" id="5978162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5978167">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5978175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5978179">h</span><span class="op" id="5978180">.</span><span class="ident" id="5978181">Swap</span><span class="op" id="5978185">(</span><span class="ident" id="5978186">i</span><span class="op" id="5978187">,</span>&nbsp;<span class="ident" id="5978189">j</span><span class="op" id="5978190">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5978194">i</span>&nbsp;<span class="op" id="5978196">=</span>&nbsp;<span class="ident" id="5978198">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5978201">}</span><br>
<span class="lineno"></span><span class="op" id="5978203">}</span>
</div>
</body>
</html>
