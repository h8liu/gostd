<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>expvar</h2>
<ul>
<li><a href="/gostd/expvar/expvar.go.html">expvar.go</a></li>
<li><a href="/gostd/expvar/expvar_test.go.html">expvar_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7698172">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7698227">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7698281">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7698332">package</span>&nbsp;<span class="ident" id="7698340">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7698348">import</span>&nbsp;<span class="op" id="7698355">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7698358">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7698367">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7698384">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7698405">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7698416">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7698426">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="7698429">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="7698474">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="7698501">func</span>&nbsp;<span class="ident" id="7698506">RemoveAll</span><span class="op" id="7698515">(</span><span class="op" id="7698516">)</span>&nbsp;<span class="op" id="7698518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698521">mutex</span><span class="op" id="7698526">.</span><span class="ident" id="7698527">Lock</span><span class="op" id="7698531">(</span><span class="op" id="7698532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7698535">defer</span>&nbsp;<span class="ident" id="7698541">mutex</span><span class="op" id="7698546">.</span><span class="ident" id="7698547">Unlock</span><span class="op" id="7698553">(</span><span class="op" id="7698554">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698557">vars</span>&nbsp;<span class="op" id="7698562">=</span>&nbsp;<span class="builtinfunc" id="7698564">make</span><span class="op" id="7698568">(</span><span class="keyword" id="7698569">map</span><span class="op" id="7698572">[</span><span class="builtintype" id="7698573">string</span><span class="op" id="7698579">]</span><span class="ident" id="7698580">Var</span><span class="op" id="7698583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698586">varKeys</span>&nbsp;<span class="op" id="7698594">=</span>&nbsp;<span class="ident" id="7698596">nil</span><br>
<span class="lineno"></span><span class="op" id="7698600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7698603">func</span>&nbsp;<span class="ident" id="7698608">TestInt</span><span class="op" id="7698615">(</span><span class="ident" id="7698616">t</span>&nbsp;<span class="op" id="7698618">*</span><span class="ident" id="7698619">testing</span><span class="op" id="7698626">.</span><span class="ident" id="7698627">T</span><span class="op" id="7698628">)</span>&nbsp;<span class="op" id="7698630">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698633">RemoveAll</span><span class="op" id="7698642">(</span><span class="op" id="7698643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698646">reqs</span>&nbsp;<span class="op" id="7698651">:=</span>&nbsp;<span class="ident" id="7698654">NewInt</span><span class="op" id="7698660">(</span><span class="string" id="7698661">&#34;requests&#34;</span><span class="op" id="7698671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7698674">if</span>&nbsp;<span class="ident" id="7698677">reqs</span><span class="op" id="7698681">.</span><span class="ident" id="7698682">i</span>&nbsp;<span class="op" id="7698684">!=</span>&nbsp;<span class="num" id="7698687">0</span>&nbsp;<span class="op" id="7698689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698693">t</span><span class="op" id="7698694">.</span><span class="ident" id="7698695">Errorf</span><span class="op" id="7698701">(</span><span class="string" id="7698702">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7698723">,</span>&nbsp;<span class="ident" id="7698725">reqs</span><span class="op" id="7698729">.</span><span class="ident" id="7698730">i</span><span class="op" id="7698731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7698734">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7698737">if</span>&nbsp;<span class="ident" id="7698740">reqs</span>&nbsp;<span class="op" id="7698745">!=</span>&nbsp;<span class="ident" id="7698748">Get</span><span class="op" id="7698751">(</span><span class="string" id="7698752">&#34;requests&#34;</span><span class="op" id="7698762">)</span><span class="op" id="7698763">.</span><span class="op" id="7698764">(</span><span class="op" id="7698765">*</span><span class="ident" id="7698766">Int</span><span class="op" id="7698769">)</span>&nbsp;<span class="op" id="7698771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698775">t</span><span class="op" id="7698776">.</span><span class="ident" id="7698777">Errorf</span><span class="op" id="7698783">(</span><span class="string" id="7698784">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7698799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7698802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698806">reqs</span><span class="op" id="7698810">.</span><span class="ident" id="7698811">Add</span><span class="op" id="7698814">(</span><span class="num" id="7698815">1</span><span class="op" id="7698816">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698819">reqs</span><span class="op" id="7698823">.</span><span class="ident" id="7698824">Add</span><span class="op" id="7698827">(</span><span class="num" id="7698828">3</span><span class="op" id="7698829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7698832">if</span>&nbsp;<span class="ident" id="7698835">reqs</span><span class="op" id="7698839">.</span><span class="ident" id="7698840">i</span>&nbsp;<span class="op" id="7698842">!=</span>&nbsp;<span class="num" id="7698845">4</span>&nbsp;<span class="op" id="7698847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698851">t</span><span class="op" id="7698852">.</span><span class="ident" id="7698853">Errorf</span><span class="op" id="7698859">(</span><span class="string" id="7698860">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7698881">,</span>&nbsp;<span class="ident" id="7698883">reqs</span><span class="op" id="7698887">.</span><span class="ident" id="7698888">i</span><span class="op" id="7698889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7698892">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7698896">if</span>&nbsp;<span class="ident" id="7698899">s</span>&nbsp;<span class="op" id="7698901">:=</span>&nbsp;<span class="ident" id="7698904">reqs</span><span class="op" id="7698908">.</span><span class="ident" id="7698909">String</span><span class="op" id="7698915">(</span><span class="op" id="7698916">)</span><span class="op" id="7698917">;</span>&nbsp;<span class="ident" id="7698919">s</span>&nbsp;<span class="op" id="7698921">!=</span>&nbsp;<span class="string" id="7698924">&#34;4&#34;</span>&nbsp;<span class="op" id="7698928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698932">t</span><span class="op" id="7698933">.</span><span class="ident" id="7698934">Errorf</span><span class="op" id="7698940">(</span><span class="string" id="7698941">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="7698973">,</span>&nbsp;<span class="ident" id="7698975">s</span><span class="op" id="7698976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7698979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698983">reqs</span><span class="op" id="7698987">.</span><span class="ident" id="7698988">Set</span><span class="op" id="7698991">(</span><span class="op" id="7698992">-</span><span class="num" id="7698993">2</span><span class="op" id="7698994">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7698997">if</span>&nbsp;<span class="ident" id="7699000">reqs</span><span class="op" id="7699004">.</span><span class="ident" id="7699005">i</span>&nbsp;<span class="op" id="7699007">!=</span>&nbsp;<span class="op" id="7699010">-</span><span class="num" id="7699011">2</span>&nbsp;<span class="op" id="7699013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699017">t</span><span class="op" id="7699018">.</span><span class="ident" id="7699019">Errorf</span><span class="op" id="7699025">(</span><span class="string" id="7699026">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="7699048">,</span>&nbsp;<span class="ident" id="7699050">reqs</span><span class="op" id="7699054">.</span><span class="ident" id="7699055">i</span><span class="op" id="7699056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699059">}</span><br>
<span class="lineno"></span><span class="op" id="7699061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="7699064">func</span>&nbsp;<span class="ident" id="7699069">TestFloat</span><span class="op" id="7699078">(</span><span class="ident" id="7699079">t</span>&nbsp;<span class="op" id="7699081">*</span><span class="ident" id="7699082">testing</span><span class="op" id="7699089">.</span><span class="ident" id="7699090">T</span><span class="op" id="7699091">)</span>&nbsp;<span class="op" id="7699093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699096">RemoveAll</span><span class="op" id="7699105">(</span><span class="op" id="7699106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699109">reqs</span>&nbsp;<span class="op" id="7699114">:=</span>&nbsp;<span class="ident" id="7699117">NewFloat</span><span class="op" id="7699125">(</span><span class="string" id="7699126">&#34;requests-float&#34;</span><span class="op" id="7699142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7699145">if</span>&nbsp;<span class="ident" id="7699148">reqs</span><span class="op" id="7699152">.</span><span class="ident" id="7699153">f</span>&nbsp;<span class="op" id="7699155">!=</span>&nbsp;<span class="num" id="7699158">0.0</span>&nbsp;<span class="op" id="7699162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699166">t</span><span class="op" id="7699167">.</span><span class="ident" id="7699168">Errorf</span><span class="op" id="7699174">(</span><span class="string" id="7699175">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7699196">,</span>&nbsp;<span class="ident" id="7699198">reqs</span><span class="op" id="7699202">.</span><span class="ident" id="7699203">f</span><span class="op" id="7699204">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7699210">if</span>&nbsp;<span class="ident" id="7699213">reqs</span>&nbsp;<span class="op" id="7699218">!=</span>&nbsp;<span class="ident" id="7699221">Get</span><span class="op" id="7699224">(</span><span class="string" id="7699225">&#34;requests-float&#34;</span><span class="op" id="7699241">)</span><span class="op" id="7699242">.</span><span class="op" id="7699243">(</span><span class="op" id="7699244">*</span><span class="ident" id="7699245">Float</span><span class="op" id="7699250">)</span>&nbsp;<span class="op" id="7699252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699256">t</span><span class="op" id="7699257">.</span><span class="ident" id="7699258">Errorf</span><span class="op" id="7699264">(</span><span class="string" id="7699265">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7699280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699287">reqs</span><span class="op" id="7699291">.</span><span class="ident" id="7699292">Add</span><span class="op" id="7699295">(</span><span class="num" id="7699296">1.5</span><span class="op" id="7699299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699302">reqs</span><span class="op" id="7699306">.</span><span class="ident" id="7699307">Add</span><span class="op" id="7699310">(</span><span class="num" id="7699311">1.25</span><span class="op" id="7699315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7699318">if</span>&nbsp;<span class="ident" id="7699321">reqs</span><span class="op" id="7699325">.</span><span class="ident" id="7699326">f</span>&nbsp;<span class="op" id="7699328">!=</span>&nbsp;<span class="num" id="7699331">2.75</span>&nbsp;<span class="op" id="7699336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699340">t</span><span class="op" id="7699341">.</span><span class="ident" id="7699342">Errorf</span><span class="op" id="7699348">(</span><span class="string" id="7699349">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="7699373">,</span>&nbsp;<span class="ident" id="7699375">reqs</span><span class="op" id="7699379">.</span><span class="ident" id="7699380">f</span><span class="op" id="7699381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699384">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7699388">if</span>&nbsp;<span class="ident" id="7699391">s</span>&nbsp;<span class="op" id="7699393">:=</span>&nbsp;<span class="ident" id="7699396">reqs</span><span class="op" id="7699400">.</span><span class="ident" id="7699401">String</span><span class="op" id="7699407">(</span><span class="op" id="7699408">)</span><span class="op" id="7699409">;</span>&nbsp;<span class="ident" id="7699411">s</span>&nbsp;<span class="op" id="7699413">!=</span>&nbsp;<span class="string" id="7699416">&#34;2.75&#34;</span>&nbsp;<span class="op" id="7699423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699427">t</span><span class="op" id="7699428">.</span><span class="ident" id="7699429">Errorf</span><span class="op" id="7699435">(</span><span class="string" id="7699436">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="7699471">,</span>&nbsp;<span class="ident" id="7699473">s</span><span class="op" id="7699474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699481">reqs</span><span class="op" id="7699485">.</span><span class="ident" id="7699486">Add</span><span class="op" id="7699489">(</span><span class="op" id="7699490">-</span><span class="num" id="7699491">2</span><span class="op" id="7699492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7699495">if</span>&nbsp;<span class="ident" id="7699498">reqs</span><span class="op" id="7699502">.</span><span class="ident" id="7699503">f</span>&nbsp;<span class="op" id="7699505">!=</span>&nbsp;<span class="num" id="7699508">0.75</span>&nbsp;<span class="op" id="7699513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699517">t</span><span class="op" id="7699518">.</span><span class="ident" id="7699519">Errorf</span><span class="op" id="7699525">(</span><span class="string" id="7699526">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="7699550">,</span>&nbsp;<span class="ident" id="7699552">reqs</span><span class="op" id="7699556">.</span><span class="ident" id="7699557">f</span><span class="op" id="7699558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699561">}</span><br>
<span class="lineno"></span><span class="op" id="7699563">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="7699566">func</span>&nbsp;<span class="ident" id="7699571">TestString</span><span class="op" id="7699581">(</span><span class="ident" id="7699582">t</span>&nbsp;<span class="op" id="7699584">*</span><span class="ident" id="7699585">testing</span><span class="op" id="7699592">.</span><span class="ident" id="7699593">T</span><span class="op" id="7699594">)</span>&nbsp;<span class="op" id="7699596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699599">RemoveAll</span><span class="op" id="7699608">(</span><span class="op" id="7699609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699612">name</span>&nbsp;<span class="op" id="7699617">:=</span>&nbsp;<span class="ident" id="7699620">NewString</span><span class="op" id="7699629">(</span><span class="string" id="7699630">&#34;my-name&#34;</span><span class="op" id="7699639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7699642">if</span>&nbsp;<span class="ident" id="7699645">name</span><span class="op" id="7699649">.</span><span class="ident" id="7699650">s</span>&nbsp;<span class="op" id="7699652">!=</span>&nbsp;<span class="string" id="7699655">&#34;&#34;</span>&nbsp;<span class="op" id="7699658">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699662">t</span><span class="op" id="7699663">.</span><span class="ident" id="7699664">Errorf</span><span class="op" id="7699670">(</span><span class="string" id="7699671">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="7699695">,</span>&nbsp;<span class="ident" id="7699697">name</span><span class="op" id="7699701">.</span><span class="ident" id="7699702">s</span><span class="op" id="7699703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699710">name</span><span class="op" id="7699714">.</span><span class="ident" id="7699715">Set</span><span class="op" id="7699718">(</span><span class="string" id="7699719">&#34;Mike&#34;</span><span class="op" id="7699725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7699728">if</span>&nbsp;<span class="ident" id="7699731">name</span><span class="op" id="7699735">.</span><span class="ident" id="7699736">s</span>&nbsp;<span class="op" id="7699738">!=</span>&nbsp;<span class="string" id="7699741">&#34;Mike&#34;</span>&nbsp;<span class="op" id="7699748">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699752">t</span><span class="op" id="7699753">.</span><span class="ident" id="7699754">Errorf</span><span class="op" id="7699760">(</span><span class="string" id="7699761">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="7699789">,</span>&nbsp;<span class="ident" id="7699791">name</span><span class="op" id="7699795">.</span><span class="ident" id="7699796">s</span><span class="op" id="7699797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7699804">if</span>&nbsp;<span class="ident" id="7699807">s</span>&nbsp;<span class="op" id="7699809">:=</span>&nbsp;<span class="ident" id="7699812">name</span><span class="op" id="7699816">.</span><span class="ident" id="7699817">String</span><span class="op" id="7699823">(</span><span class="op" id="7699824">)</span><span class="op" id="7699825">;</span>&nbsp;<span class="ident" id="7699827">s</span>&nbsp;<span class="op" id="7699829">!=</span>&nbsp;<span class="string" id="7699832">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="7699843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699847">t</span><span class="op" id="7699848">.</span><span class="ident" id="7699849">Errorf</span><span class="op" id="7699855">(</span><span class="string" id="7699856">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="7699895">,</span>&nbsp;<span class="ident" id="7699897">s</span><span class="op" id="7699898">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7699901">}</span><br>
<span class="lineno"></span><span class="op" id="7699903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7699906">func</span>&nbsp;<span class="ident" id="7699911">TestMapCounter</span><span class="op" id="7699925">(</span><span class="ident" id="7699926">t</span>&nbsp;<span class="op" id="7699928">*</span><span class="ident" id="7699929">testing</span><span class="op" id="7699936">.</span><span class="ident" id="7699937">T</span><span class="op" id="7699938">)</span>&nbsp;<span class="op" id="7699940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699943">RemoveAll</span><span class="op" id="7699952">(</span><span class="op" id="7699953">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699956">colors</span>&nbsp;<span class="op" id="7699963">:=</span>&nbsp;<span class="ident" id="7699966">NewMap</span><span class="op" id="7699972">(</span><span class="string" id="7699973">&#34;bike-shed-colors&#34;</span><span class="op" id="7699991">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699995">colors</span><span class="op" id="7700001">.</span><span class="ident" id="7700002">Add</span><span class="op" id="7700005">(</span><span class="string" id="7700006">&#34;red&#34;</span><span class="op" id="7700011">,</span>&nbsp;<span class="num" id="7700013">1</span><span class="op" id="7700014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700017">colors</span><span class="op" id="7700023">.</span><span class="ident" id="7700024">Add</span><span class="op" id="7700027">(</span><span class="string" id="7700028">&#34;red&#34;</span><span class="op" id="7700033">,</span>&nbsp;<span class="num" id="7700035">2</span><span class="op" id="7700036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700039">colors</span><span class="op" id="7700045">.</span><span class="ident" id="7700046">Add</span><span class="op" id="7700049">(</span><span class="string" id="7700050">&#34;blue&#34;</span><span class="op" id="7700056">,</span>&nbsp;<span class="num" id="7700058">4</span><span class="op" id="7700059">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700062">colors</span><span class="op" id="7700068">.</span><span class="ident" id="7700069">AddFloat</span><span class="op" id="7700077">(</span><span class="string" id="7700078">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7700094">,</span>&nbsp;<span class="num" id="7700096">4.125</span><span class="op" id="7700101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7700104">if</span>&nbsp;<span class="ident" id="7700107">x</span>&nbsp;<span class="op" id="7700109">:=</span>&nbsp;<span class="ident" id="7700112">colors</span><span class="op" id="7700118">.</span><span class="ident" id="7700119">m</span><span class="op" id="7700120">[</span><span class="string" id="7700121">&#34;red&#34;</span><span class="op" id="7700126">]</span><span class="op" id="7700127">.</span><span class="op" id="7700128">(</span><span class="op" id="7700129">*</span><span class="ident" id="7700130">Int</span><span class="op" id="7700133">)</span><span class="op" id="7700134">.</span><span class="ident" id="7700135">i</span><span class="op" id="7700136">;</span>&nbsp;<span class="ident" id="7700138">x</span>&nbsp;<span class="op" id="7700140">!=</span>&nbsp;<span class="num" id="7700143">3</span>&nbsp;<span class="op" id="7700145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700149">t</span><span class="op" id="7700150">.</span><span class="ident" id="7700151">Errorf</span><span class="op" id="7700157">(</span><span class="string" id="7700158">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7700190">,</span>&nbsp;<span class="ident" id="7700192">x</span><span class="op" id="7700193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7700199">if</span>&nbsp;<span class="ident" id="7700202">x</span>&nbsp;<span class="op" id="7700204">:=</span>&nbsp;<span class="ident" id="7700207">colors</span><span class="op" id="7700213">.</span><span class="ident" id="7700214">m</span><span class="op" id="7700215">[</span><span class="string" id="7700216">&#34;blue&#34;</span><span class="op" id="7700222">]</span><span class="op" id="7700223">.</span><span class="op" id="7700224">(</span><span class="op" id="7700225">*</span><span class="ident" id="7700226">Int</span><span class="op" id="7700229">)</span><span class="op" id="7700230">.</span><span class="ident" id="7700231">i</span><span class="op" id="7700232">;</span>&nbsp;<span class="ident" id="7700234">x</span>&nbsp;<span class="op" id="7700236">!=</span>&nbsp;<span class="num" id="7700239">4</span>&nbsp;<span class="op" id="7700241">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700245">t</span><span class="op" id="7700246">.</span><span class="ident" id="7700247">Errorf</span><span class="op" id="7700253">(</span><span class="string" id="7700254">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7700287">,</span>&nbsp;<span class="ident" id="7700289">x</span><span class="op" id="7700290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7700296">if</span>&nbsp;<span class="ident" id="7700299">x</span>&nbsp;<span class="op" id="7700301">:=</span>&nbsp;<span class="ident" id="7700304">colors</span><span class="op" id="7700310">.</span><span class="ident" id="7700311">m</span><span class="op" id="7700312">[</span><span class="string" id="7700313">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7700329">]</span><span class="op" id="7700330">.</span><span class="op" id="7700331">(</span><span class="op" id="7700332">*</span><span class="ident" id="7700333">Float</span><span class="op" id="7700338">)</span><span class="op" id="7700339">.</span><span class="ident" id="7700340">f</span><span class="op" id="7700341">;</span>&nbsp;<span class="ident" id="7700343">x</span>&nbsp;<span class="op" id="7700345">!=</span>&nbsp;<span class="num" id="7700348">4.125</span>&nbsp;<span class="op" id="7700354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700358">t</span><span class="op" id="7700359">.</span><span class="ident" id="7700360">Errorf</span><span class="op" id="7700366">(</span><span class="string" id="7700367">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="7700412">,</span>&nbsp;<span class="ident" id="7700414">x</span><span class="op" id="7700415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700418">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7700422">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7700475">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700524">s</span>&nbsp;<span class="op" id="7700526">:=</span>&nbsp;<span class="ident" id="7700529">colors</span><span class="op" id="7700535">.</span><span class="ident" id="7700536">String</span><span class="op" id="7700542">(</span><span class="op" id="7700543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7700546">var</span>&nbsp;<span class="ident" id="7700550">j</span>&nbsp;<span class="keyword" id="7700552">interface</span><span class="op" id="7700561">{</span><span class="op" id="7700562">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700565">err</span>&nbsp;<span class="op" id="7700569">:=</span>&nbsp;<span class="ident" id="7700572">json</span><span class="op" id="7700576">.</span><span class="ident" id="7700577">Unmarshal</span><span class="op" id="7700586">(</span><span class="op" id="7700587">[</span><span class="op" id="7700588">]</span><span class="builtintype" id="7700589">byte</span><span class="op" id="7700593">(</span><span class="ident" id="7700594">s</span><span class="op" id="7700595">)</span><span class="op" id="7700596">,</span>&nbsp;<span class="op" id="7700598">&amp;</span><span class="ident" id="7700599">j</span><span class="op" id="7700600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7700603">if</span>&nbsp;<span class="ident" id="7700606">err</span>&nbsp;<span class="op" id="7700610">!=</span>&nbsp;<span class="ident" id="7700613">nil</span>&nbsp;<span class="op" id="7700617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700621">t</span><span class="op" id="7700622">.</span><span class="ident" id="7700623">Errorf</span><span class="op" id="7700629">(</span><span class="string" id="7700630">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="7700668">,</span>&nbsp;<span class="ident" id="7700670">err</span><span class="op" id="7700673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700679">m</span><span class="op" id="7700680">,</span>&nbsp;<span class="ident" id="7700682">ok</span>&nbsp;<span class="op" id="7700685">:=</span>&nbsp;<span class="ident" id="7700688">j</span><span class="op" id="7700689">.</span><span class="op" id="7700690">(</span><span class="keyword" id="7700691">map</span><span class="op" id="7700694">[</span><span class="builtintype" id="7700695">string</span><span class="op" id="7700701">]</span><span class="keyword" id="7700702">interface</span><span class="op" id="7700711">{</span><span class="op" id="7700712">}</span><span class="op" id="7700713">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7700716">if</span>&nbsp;<span class="op" id="7700719">!</span><span class="ident" id="7700720">ok</span>&nbsp;<span class="op" id="7700723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700727">t</span><span class="op" id="7700728">.</span><span class="ident" id="7700729">Error</span><span class="op" id="7700734">(</span><span class="string" id="7700735">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="7700774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700780">red</span>&nbsp;<span class="op" id="7700784">:=</span>&nbsp;<span class="ident" id="7700787">m</span><span class="op" id="7700788">[</span><span class="string" id="7700789">&#34;red&#34;</span><span class="op" id="7700794">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700797">x</span><span class="op" id="7700798">,</span>&nbsp;<span class="ident" id="7700800">ok</span>&nbsp;<span class="op" id="7700803">:=</span>&nbsp;<span class="ident" id="7700806">red</span><span class="op" id="7700809">.</span><span class="op" id="7700810">(</span><span class="builtintype" id="7700811">float64</span><span class="op" id="7700818">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7700821">if</span>&nbsp;<span class="op" id="7700824">!</span><span class="ident" id="7700825">ok</span>&nbsp;<span class="op" id="7700828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700832">t</span><span class="op" id="7700833">.</span><span class="ident" id="7700834">Error</span><span class="op" id="7700839">(</span><span class="string" id="7700840">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="7700869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7700875">if</span>&nbsp;<span class="ident" id="7700878">x</span>&nbsp;<span class="op" id="7700880">!=</span>&nbsp;<span class="num" id="7700883">3</span>&nbsp;<span class="op" id="7700885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700889">t</span><span class="op" id="7700890">.</span><span class="ident" id="7700891">Errorf</span><span class="op" id="7700897">(</span><span class="string" id="7700898">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7700916">,</span>&nbsp;<span class="ident" id="7700918">x</span><span class="op" id="7700919">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700922">}</span><br>
<span class="lineno"></span><span class="op" id="7700924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7700927">func</span>&nbsp;<span class="ident" id="7700932">TestFunc</span><span class="op" id="7700940">(</span><span class="ident" id="7700941">t</span>&nbsp;<span class="op" id="7700943">*</span><span class="ident" id="7700944">testing</span><span class="op" id="7700951">.</span><span class="ident" id="7700952">T</span><span class="op" id="7700953">)</span>&nbsp;<span class="op" id="7700955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700958">RemoveAll</span><span class="op" id="7700967">(</span><span class="op" id="7700968">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7700971">var</span>&nbsp;<span class="ident" id="7700975">x</span>&nbsp;<span class="keyword" id="7700977">interface</span><span class="op" id="7700986">{</span><span class="op" id="7700987">}</span>&nbsp;<span class="op" id="7700989">=</span>&nbsp;<span class="op" id="7700991">[</span><span class="op" id="7700992">]</span><span class="builtintype" id="7700993">string</span><span class="op" id="7700999">{</span><span class="string" id="7701000">&#34;a&#34;</span><span class="op" id="7701003">,</span>&nbsp;<span class="string" id="7701005">&#34;b&#34;</span><span class="op" id="7701008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701011">f</span>&nbsp;<span class="op" id="7701013">:=</span>&nbsp;<span class="ident" id="7701016">Func</span><span class="op" id="7701020">(</span><span class="keyword" id="7701021">func</span><span class="op" id="7701025">(</span><span class="op" id="7701026">)</span>&nbsp;<span class="keyword" id="7701028">interface</span><span class="op" id="7701037">{</span><span class="op" id="7701038">}</span>&nbsp;<span class="op" id="7701040">{</span>&nbsp;<span class="keyword" id="7701042">return</span>&nbsp;<span class="ident" id="7701049">x</span>&nbsp;<span class="op" id="7701051">}</span><span class="op" id="7701052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7701055">if</span>&nbsp;<span class="ident" id="7701058">s</span><span class="op" id="7701059">,</span>&nbsp;<span class="ident" id="7701061">exp</span>&nbsp;<span class="op" id="7701065">:=</span>&nbsp;<span class="ident" id="7701068">f</span><span class="op" id="7701069">.</span><span class="ident" id="7701070">String</span><span class="op" id="7701076">(</span><span class="op" id="7701077">)</span><span class="op" id="7701078">,</span>&nbsp;<span class="string" id="7701080">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="7701091">;</span>&nbsp;<span class="ident" id="7701093">s</span>&nbsp;<span class="op" id="7701095">!=</span>&nbsp;<span class="ident" id="7701098">exp</span>&nbsp;<span class="op" id="7701102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701106">t</span><span class="op" id="7701107">.</span><span class="ident" id="7701108">Errorf</span><span class="op" id="7701114">(</span><span class="string" id="7701115">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7701141">,</span>&nbsp;<span class="ident" id="7701143">s</span><span class="op" id="7701144">,</span>&nbsp;<span class="ident" id="7701146">exp</span><span class="op" id="7701149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701152">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701156">x</span>&nbsp;<span class="op" id="7701158">=</span>&nbsp;<span class="num" id="7701160">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7701164">if</span>&nbsp;<span class="ident" id="7701167">s</span><span class="op" id="7701168">,</span>&nbsp;<span class="ident" id="7701170">exp</span>&nbsp;<span class="op" id="7701174">:=</span>&nbsp;<span class="ident" id="7701177">f</span><span class="op" id="7701178">.</span><span class="ident" id="7701179">String</span><span class="op" id="7701185">(</span><span class="op" id="7701186">)</span><span class="op" id="7701187">,</span>&nbsp;<span class="string" id="7701189">`17`</span><span class="op" id="7701193">;</span>&nbsp;<span class="ident" id="7701195">s</span>&nbsp;<span class="op" id="7701197">!=</span>&nbsp;<span class="ident" id="7701200">exp</span>&nbsp;<span class="op" id="7701204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701208">t</span><span class="op" id="7701209">.</span><span class="ident" id="7701210">Errorf</span><span class="op" id="7701216">(</span><span class="string" id="7701217">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7701243">,</span>&nbsp;<span class="ident" id="7701245">s</span><span class="op" id="7701246">,</span>&nbsp;<span class="ident" id="7701248">exp</span><span class="op" id="7701251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701254">}</span><br>
<span class="lineno">145</span><span class="op" id="7701256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7701259">func</span>&nbsp;<span class="ident" id="7701264">TestHandler</span><span class="op" id="7701275">(</span><span class="ident" id="7701276">t</span>&nbsp;<span class="op" id="7701278">*</span><span class="ident" id="7701279">testing</span><span class="op" id="7701286">.</span><span class="ident" id="7701287">T</span><span class="op" id="7701288">)</span>&nbsp;<span class="op" id="7701290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701293">RemoveAll</span><span class="op" id="7701302">(</span><span class="op" id="7701303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701306">m</span>&nbsp;<span class="op" id="7701308">:=</span>&nbsp;<span class="ident" id="7701311">NewMap</span><span class="op" id="7701317">(</span><span class="string" id="7701318">&#34;map1&#34;</span><span class="op" id="7701324">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701327">m</span><span class="op" id="7701328">.</span><span class="ident" id="7701329">Add</span><span class="op" id="7701332">(</span><span class="string" id="7701333">&#34;a&#34;</span><span class="op" id="7701336">,</span>&nbsp;<span class="num" id="7701338">1</span><span class="op" id="7701339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701342">m</span><span class="op" id="7701343">.</span><span class="ident" id="7701344">Add</span><span class="op" id="7701347">(</span><span class="string" id="7701348">&#34;z&#34;</span><span class="op" id="7701351">,</span>&nbsp;<span class="num" id="7701353">2</span><span class="op" id="7701354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701357">m2</span>&nbsp;<span class="op" id="7701360">:=</span>&nbsp;<span class="ident" id="7701363">NewMap</span><span class="op" id="7701369">(</span><span class="string" id="7701370">&#34;map2&#34;</span><span class="op" id="7701376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7701379">for</span>&nbsp;<span class="ident" id="7701383">i</span>&nbsp;<span class="op" id="7701385">:=</span>&nbsp;<span class="num" id="7701388">0</span><span class="op" id="7701389">;</span>&nbsp;<span class="ident" id="7701391">i</span>&nbsp;<span class="op" id="7701393">&lt;</span>&nbsp;<span class="num" id="7701395">9</span><span class="op" id="7701396">;</span>&nbsp;<span class="ident" id="7701398">i</span><span class="op" id="7701399">++</span>&nbsp;<span class="op" id="7701402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701406">m2</span><span class="op" id="7701408">.</span><span class="ident" id="7701409">Add</span><span class="op" id="7701412">(</span><span class="ident" id="7701413">strconv</span><span class="op" id="7701420">.</span><span class="ident" id="7701421">Itoa</span><span class="op" id="7701425">(</span><span class="ident" id="7701426">i</span><span class="op" id="7701427">)</span><span class="op" id="7701428">,</span>&nbsp;<span class="ident" id="7701430">int64</span><span class="op" id="7701435">(</span><span class="ident" id="7701436">i</span><span class="op" id="7701437">)</span><span class="op" id="7701438">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701444">rr</span>&nbsp;<span class="op" id="7701447">:=</span>&nbsp;<span class="ident" id="7701450">httptest</span><span class="op" id="7701458">.</span><span class="ident" id="7701459">NewRecorder</span><span class="op" id="7701470">(</span><span class="op" id="7701471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701474">rr</span><span class="op" id="7701476">.</span><span class="ident" id="7701477">Body</span>&nbsp;<span class="op" id="7701482">=</span>&nbsp;<span class="builtinfunc" id="7701484">new</span><span class="op" id="7701487">(</span><span class="ident" id="7701488">bytes</span><span class="op" id="7701493">.</span><span class="ident" id="7701494">Buffer</span><span class="op" id="7701500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701503">expvarHandler</span><span class="op" id="7701516">(</span><span class="ident" id="7701517">rr</span><span class="op" id="7701519">,</span>&nbsp;<span class="ident" id="7701521">nil</span><span class="op" id="7701524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701527">want</span>&nbsp;<span class="op" id="7701532">:=</span>&nbsp;<span class="string" id="7701535">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7701650">if</span>&nbsp;<span class="ident" id="7701653">got</span>&nbsp;<span class="op" id="7701657">:=</span>&nbsp;<span class="ident" id="7701660">rr</span><span class="op" id="7701662">.</span><span class="ident" id="7701663">Body</span><span class="op" id="7701667">.</span><span class="ident" id="7701668">String</span><span class="op" id="7701674">(</span><span class="op" id="7701675">)</span><span class="op" id="7701676">;</span>&nbsp;<span class="ident" id="7701678">got</span>&nbsp;<span class="op" id="7701682">!=</span>&nbsp;<span class="ident" id="7701685">want</span>&nbsp;<span class="op" id="7701690">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7701694">t</span><span class="op" id="7701695">.</span><span class="ident" id="7701696">Errorf</span><span class="op" id="7701702">(</span><span class="string" id="7701703">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="7701739">,</span>&nbsp;<span class="ident" id="7701741">got</span><span class="op" id="7701744">,</span>&nbsp;<span class="ident" id="7701746">want</span><span class="op" id="7701750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701753">}</span><br>
<span class="lineno"></span><span class="op" id="7701755">}</span>
</div>
</body>
</html>
