<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/big</h2>
<ul>
<li><a href="/gostd/math/big/arith.go.html">arith.go</a></li>
<li><a href="/gostd/math/big/arith_decl.go.html">arith_decl.go</a></li>
<li><a href="/gostd/math/big/arith_test.go.html">arith_test.go</a></li>
<li><a href="/gostd/math/big/calibrate_test.go.html">calibrate_test.go</a></li>
<li><a href="/gostd/math/big/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/big/gcd_test.go.html">gcd_test.go</a></li>
<li><a href="/gostd/math/big/hilbert_test.go.html">hilbert_test.go</a></li>
<li><a href="/gostd/math/big/int.go.html">int.go</a></li>
<li><a href="/gostd/math/big/int_test.go.html">int_test.go</a></li>
<li><a href="/gostd/math/big/nat.go.html">nat.go</a></li>
<li><a href="/gostd/math/big/nat_test.go.html">nat_test.go</a></li>
<li><a href="/gostd/math/big/rat.go.html" class="current">rat.go</a></li>
<li><a href="/gostd/math/big/rat_test.go.html">rat_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2095833">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2095888">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2095942">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2095993">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;multi-precision&nbsp;rational&nbsp;numbers.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2096052">package</span>&nbsp;<span class="ident" id="2096060">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2096065">import</span>&nbsp;<span class="op" id="2096072">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2096075">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2096094">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2096104">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2096111">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2096119">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="2096129">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2096132">//&nbsp;A&nbsp;Rat&nbsp;represents&nbsp;a&nbsp;quotient&nbsp;a/b&nbsp;of&nbsp;arbitrary&nbsp;precision.</span><br>
<span class="lineno"></span><span class="comment" id="2096191">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;a&nbsp;Rat&nbsp;represents&nbsp;the&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="2096243">type</span>&nbsp;<span class="ident" id="2096248">Rat</span>&nbsp;<span class="keyword" id="2096252">struct</span>&nbsp;<span class="op" id="2096259">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2096262">//&nbsp;To&nbsp;make&nbsp;zero&nbsp;values&nbsp;for&nbsp;Rat&nbsp;work&nbsp;w/o&nbsp;initialization,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2096319">//&nbsp;a&nbsp;zero&nbsp;value&nbsp;of&nbsp;b&nbsp;(len(b)&nbsp;==&nbsp;0)&nbsp;acts&nbsp;like&nbsp;b&nbsp;==&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2096373">//&nbsp;a.neg&nbsp;determines&nbsp;the&nbsp;sign&nbsp;of&nbsp;the&nbsp;Rat,&nbsp;b.neg&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2096433">a</span><span class="op" id="2096434">,</span>&nbsp;<span class="ident" id="2096436">b</span>&nbsp;<span class="ident" id="2096438"><a href="/gostd/math/big/int.go.html#2035985">Int</a></span><br>
<span class="lineno"></span><span class="op" id="2096442">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="2096445">//&nbsp;NewRat&nbsp;creates&nbsp;a&nbsp;new&nbsp;Rat&nbsp;with&nbsp;numerator&nbsp;a&nbsp;and&nbsp;denominator&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="2096509">func</span>&nbsp;<span class="ident" id="2096514">NewRat</span><span class="op" id="2096520">(</span><span class="ident" id="2096521">a</span><span class="op" id="2096522">,</span>&nbsp;<span class="ident" id="2096524">b</span>&nbsp;<span class="builtintype" id="2096526">int64</span><span class="op" id="2096531">)</span>&nbsp;<span class="op" id="2096533">*</span><span class="ident" id="2096534"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2096538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2096541">return</span>&nbsp;<span class="builtinfunc" id="2096548">new</span><span class="op" id="2096551">(</span><span class="ident" id="2096552"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2096555">)</span><span class="op" id="2096556">.</span><span class="ident" id="2096557"><a href="/gostd/math/big/rat.go.html#2104085">SetFrac64</a></span><span class="op" id="2096566">(</span><span class="ident" id="2096567"><a href="/gostd/math/big/rat.go.html#2096521">a</a></span><span class="op" id="2096568">,</span>&nbsp;<span class="ident" id="2096570"><a href="/gostd/math/big/rat.go.html#2096524">b</a></span><span class="op" id="2096571">)</span><br>
<span class="lineno"></span><span class="op" id="2096573">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="2096576">//&nbsp;SetFloat64&nbsp;sets&nbsp;z&nbsp;to&nbsp;exactly&nbsp;f&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="comment" id="2096625">//&nbsp;If&nbsp;f&nbsp;is&nbsp;not&nbsp;finite,&nbsp;SetFloat&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2096670">func</span>&nbsp;<span class="op" id="2096675">(</span><span class="ident" id="2096676">z</span>&nbsp;<span class="op" id="2096678">*</span><span class="ident" id="2096679"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2096682">)</span>&nbsp;<span class="ident" id="2096684">SetFloat64</span><span class="op" id="2096694">(</span><span class="ident" id="2096695">f</span>&nbsp;<span class="builtintype" id="2096697">float64</span><span class="op" id="2096704">)</span>&nbsp;<span class="op" id="2096706">*</span><span class="ident" id="2096707"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2096711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2096714">const</span>&nbsp;<span class="ident" id="2096720">expMask</span>&nbsp;<span class="op" id="2096728">=</span>&nbsp;<span class="num" id="2096730">1</span><span class="op" id="2096731">&lt;&lt;</span><span class="num" id="2096733">11</span>&nbsp;<span class="op" id="2096736">-</span>&nbsp;<span class="num" id="2096738">1</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2096741">bits</span>&nbsp;<span class="op" id="2096746">:=</span>&nbsp;<span class="ident" id="2096749"><a href="/gostd/math/big/rat.go.html#2096111">math</a></span><span class="op" id="2096753">.</span><span class="ident" id="2096754"><a href="/gostd/math/unsafe.go.html#2340061">Float64bits</a></span><span class="op" id="2096765">(</span><span class="ident" id="2096766"><a href="/gostd/math/big/rat.go.html#2096695">f</a></span><span class="op" id="2096767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2096770">mantissa</span>&nbsp;<span class="op" id="2096779">:=</span>&nbsp;<span class="ident" id="2096782"><a href="/gostd/math/big/rat.go.html#2096741">bits</a></span>&nbsp;<span class="op" id="2096787">&amp;</span>&nbsp;<span class="op" id="2096789">(</span><span class="num" id="2096790">1</span><span class="op" id="2096791">&lt;&lt;</span><span class="num" id="2096793">52</span>&nbsp;<span class="op" id="2096796">-</span>&nbsp;<span class="num" id="2096798">1</span><span class="op" id="2096799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2096802">exp</span>&nbsp;<span class="op" id="2096806">:=</span>&nbsp;<span class="builtintype" id="2096809">int</span><span class="op" id="2096812">(</span><span class="op" id="2096813">(</span><span class="ident" id="2096814"><a href="/gostd/math/big/rat.go.html#2096741">bits</a></span>&nbsp;<span class="op" id="2096819">&gt;&gt;</span>&nbsp;<span class="num" id="2096822">52</span><span class="op" id="2096824">)</span>&nbsp;<span class="op" id="2096826">&amp;</span>&nbsp;<span class="ident" id="2096828"><a href="/gostd/math/big/rat.go.html#2096720">expMask</a></span><span class="op" id="2096835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2096838">switch</span>&nbsp;<span class="ident" id="2096845"><a href="/gostd/math/big/rat.go.html#2096802">exp</a></span>&nbsp;<span class="op" id="2096849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2096852">case</span>&nbsp;<span class="ident" id="2096857"><a href="/gostd/math/big/rat.go.html#2096720">expMask</a></span><span class="op" id="2096864">:</span>&nbsp;<span class="comment" id="2096866">//&nbsp;non-finite</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2096882">return</span>&nbsp;<span class="builtintype" id="2096889">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2096894">case</span>&nbsp;<span class="num" id="2096899">0</span><span class="op" id="2096900">:</span>&nbsp;<span class="comment" id="2096902">//&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2096916"><a href="/gostd/math/big/rat.go.html#2096802">exp</a></span>&nbsp;<span class="op" id="2096920">-=</span>&nbsp;<span class="num" id="2096923">1022</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2096929">default</span><span class="op" id="2096936">:</span>&nbsp;<span class="comment" id="2096938">//&nbsp;normal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2096950"><a href="/gostd/math/big/rat.go.html#2096770">mantissa</a></span>&nbsp;<span class="op" id="2096959">|=</span>&nbsp;<span class="num" id="2096962">1</span>&nbsp;<span class="op" id="2096964">&lt;&lt;</span>&nbsp;<span class="num" id="2096967">52</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2096972"><a href="/gostd/math/big/rat.go.html#2096802">exp</a></span>&nbsp;<span class="op" id="2096976">-=</span>&nbsp;<span class="num" id="2096979">1023</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2096985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2096989">shift</span>&nbsp;<span class="op" id="2096995">:=</span>&nbsp;<span class="num" id="2096998">52</span>&nbsp;<span class="op" id="2097001">-</span>&nbsp;<span class="ident" id="2097003"><a href="/gostd/math/big/rat.go.html#2096802">exp</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2097009">//&nbsp;Optimization&nbsp;(?):&nbsp;partially&nbsp;pre-normalise.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2097056">for</span>&nbsp;<span class="ident" id="2097060"><a href="/gostd/math/big/rat.go.html#2096770">mantissa</a></span><span class="op" id="2097068">&amp;</span><span class="num" id="2097069">1</span>&nbsp;<span class="op" id="2097071">==</span>&nbsp;<span class="num" id="2097074">0</span>&nbsp;<span class="op" id="2097076">&amp;&amp;</span>&nbsp;<span class="ident" id="2097079"><a href="/gostd/math/big/rat.go.html#2096989">shift</a></span>&nbsp;<span class="op" id="2097085">&gt;</span>&nbsp;<span class="num" id="2097087">0</span>&nbsp;<span class="op" id="2097089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097093"><a href="/gostd/math/big/rat.go.html#2096770">mantissa</a></span>&nbsp;<span class="op" id="2097102">&gt;&gt;=</span>&nbsp;<span class="num" id="2097106">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097110"><a href="/gostd/math/big/rat.go.html#2096989">shift</a></span><span class="op" id="2097115">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2097119">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097123"><a href="/gostd/math/big/rat.go.html#2096676">z</a></span><span class="op" id="2097124">.</span><span class="ident" id="2097125"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2097126">.</span><span class="ident" id="2097127"><a href="/gostd/math/big/int.go.html#2036515">SetUint64</a></span><span class="op" id="2097136">(</span><span class="ident" id="2097137"><a href="/gostd/math/big/rat.go.html#2096770">mantissa</a></span><span class="op" id="2097145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097148"><a href="/gostd/math/big/rat.go.html#2096676">z</a></span><span class="op" id="2097149">.</span><span class="ident" id="2097150"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2097151">.</span><span class="ident" id="2097152"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2097156">=</span>&nbsp;<span class="ident" id="2097158"><a href="/gostd/math/big/rat.go.html#2096695">f</a></span>&nbsp;<span class="op" id="2097160">&lt;</span>&nbsp;<span class="num" id="2097162">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097165"><a href="/gostd/math/big/rat.go.html#2096676">z</a></span><span class="op" id="2097166">.</span><span class="ident" id="2097167"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2097168">.</span><span class="ident" id="2097169"><a href="/gostd/math/big/int.go.html#2036758">Set</a></span><span class="op" id="2097172">(</span><span class="ident" id="2097173"><a href="/gostd/math/big/int.go.html#2036066">intOne</a></span><span class="op" id="2097179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2097182">if</span>&nbsp;<span class="ident" id="2097185"><a href="/gostd/math/big/rat.go.html#2096989">shift</a></span>&nbsp;<span class="op" id="2097191">&gt;</span>&nbsp;<span class="num" id="2097193">0</span>&nbsp;<span class="op" id="2097195">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097199"><a href="/gostd/math/big/rat.go.html#2096676">z</a></span><span class="op" id="2097200">.</span><span class="ident" id="2097201"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2097202">.</span><span class="ident" id="2097203"><a href="/gostd/math/big/int.go.html#2054188">Lsh</a></span><span class="op" id="2097206">(</span><span class="op" id="2097207">&amp;</span><span class="ident" id="2097208"><a href="/gostd/math/big/rat.go.html#2096676">z</a></span><span class="op" id="2097209">.</span><span class="ident" id="2097210"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2097211">,</span>&nbsp;<span class="builtintype" id="2097213">uint</span><span class="op" id="2097217">(</span><span class="ident" id="2097218"><a href="/gostd/math/big/rat.go.html#2096989">shift</a></span><span class="op" id="2097223">)</span><span class="op" id="2097224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2097227">}</span>&nbsp;<span class="keyword" id="2097229">else</span>&nbsp;<span class="op" id="2097234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097238"><a href="/gostd/math/big/rat.go.html#2096676">z</a></span><span class="op" id="2097239">.</span><span class="ident" id="2097240"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2097241">.</span><span class="ident" id="2097242"><a href="/gostd/math/big/int.go.html#2054188">Lsh</a></span><span class="op" id="2097245">(</span><span class="op" id="2097246">&amp;</span><span class="ident" id="2097247"><a href="/gostd/math/big/rat.go.html#2096676">z</a></span><span class="op" id="2097248">.</span><span class="ident" id="2097249"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2097250">,</span>&nbsp;<span class="builtintype" id="2097252">uint</span><span class="op" id="2097256">(</span><span class="op" id="2097257">-</span><span class="ident" id="2097258"><a href="/gostd/math/big/rat.go.html#2096989">shift</a></span><span class="op" id="2097263">)</span><span class="op" id="2097264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2097267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2097270">return</span>&nbsp;<span class="ident" id="2097277"><a href="/gostd/math/big/rat.go.html#2096676">z</a></span><span class="op" id="2097278">.</span><span class="ident" id="2097279"><a href="/gostd/math/big/rat.go.html#2106244">norm</a></span><span class="op" id="2097283">(</span><span class="op" id="2097284">)</span><br>
<span class="lineno">65</span><span class="op" id="2097286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2097289">//&nbsp;quotToFloat32&nbsp;returns&nbsp;the&nbsp;non-negative&nbsp;float32&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2097345">//&nbsp;nearest&nbsp;to&nbsp;the&nbsp;quotient&nbsp;a/b,&nbsp;using&nbsp;round-to-even&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2097400">//&nbsp;halfway&nbsp;cases.&nbsp;&nbsp;It&nbsp;does&nbsp;not&nbsp;mutate&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno">70</span><span class="comment" id="2097453">//&nbsp;Preconditions:&nbsp;b&nbsp;is&nbsp;non-zero;&nbsp;a&nbsp;and&nbsp;b&nbsp;have&nbsp;no&nbsp;common&nbsp;factors.</span><br>
<span class="lineno"></span><span class="keyword" id="2097518">func</span>&nbsp;<span class="ident" id="2097523">quotToFloat32</span><span class="op" id="2097536">(</span><span class="ident" id="2097537">a</span><span class="op" id="2097538">,</span>&nbsp;<span class="ident" id="2097540">b</span>&nbsp;<span class="ident" id="2097542"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2097545">)</span>&nbsp;<span class="op" id="2097547">(</span><span class="ident" id="2097548">f</span>&nbsp;<span class="builtintype" id="2097550">float32</span><span class="op" id="2097557">,</span>&nbsp;<span class="ident" id="2097559">exact</span>&nbsp;<span class="builtintype" id="2097565">bool</span><span class="op" id="2097569">)</span>&nbsp;<span class="op" id="2097571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2097574">const</span>&nbsp;<span class="op" id="2097580">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2097584">//&nbsp;float&nbsp;size&nbsp;in&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097608">Fsize</span>&nbsp;<span class="op" id="2097614">=</span>&nbsp;<span class="num" id="2097616">32</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2097622">//&nbsp;mantissa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097636">Msize</span>&nbsp;&nbsp;<span class="op" id="2097643">=</span>&nbsp;<span class="num" id="2097645">23</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097650">Msize1</span>&nbsp;<span class="op" id="2097657">=</span>&nbsp;<span class="ident" id="2097659"><a href="/gostd/math/big/rat.go.html#2097636">Msize</a></span>&nbsp;<span class="op" id="2097665">+</span>&nbsp;<span class="num" id="2097667">1</span>&nbsp;<span class="comment" id="2097669">//&nbsp;incl.&nbsp;implicit&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097691">Msize2</span>&nbsp;<span class="op" id="2097698">=</span>&nbsp;<span class="ident" id="2097700"><a href="/gostd/math/big/rat.go.html#2097650">Msize1</a></span>&nbsp;<span class="op" id="2097707">+</span>&nbsp;<span class="num" id="2097709">1</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2097714">//&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097728">Esize</span>&nbsp;<span class="op" id="2097734">=</span>&nbsp;<span class="ident" id="2097736"><a href="/gostd/math/big/rat.go.html#2097608">Fsize</a></span>&nbsp;<span class="op" id="2097742">-</span>&nbsp;<span class="ident" id="2097744"><a href="/gostd/math/big/rat.go.html#2097650">Msize1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097753">Ebias</span>&nbsp;<span class="op" id="2097759">=</span>&nbsp;<span class="num" id="2097761">1</span><span class="op" id="2097762">&lt;&lt;</span><span class="op" id="2097764">(</span><span class="ident" id="2097765"><a href="/gostd/math/big/rat.go.html#2097728">Esize</a></span><span class="op" id="2097770">-</span><span class="num" id="2097771">1</span><span class="op" id="2097772">)</span>&nbsp;<span class="op" id="2097774">-</span>&nbsp;<span class="num" id="2097776">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097780">Emin</span>&nbsp;&nbsp;<span class="op" id="2097786">=</span>&nbsp;<span class="num" id="2097788">1</span>&nbsp;<span class="op" id="2097790">-</span>&nbsp;<span class="ident" id="2097792"><a href="/gostd/math/big/rat.go.html#2097753">Ebias</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097800">Emax</span>&nbsp;&nbsp;<span class="op" id="2097806">=</span>&nbsp;<span class="ident" id="2097808"><a href="/gostd/math/big/rat.go.html#2097753">Ebias</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2097815">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2097819">//&nbsp;TODO(adonovan):&nbsp;specialize&nbsp;common&nbsp;degenerate&nbsp;cases:&nbsp;1.0,&nbsp;integers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097890">alen</span>&nbsp;<span class="op" id="2097895">:=</span>&nbsp;<span class="ident" id="2097898"><a href="/gostd/math/big/rat.go.html#2097537">a</a></span><span class="op" id="2097899">.</span><span class="ident" id="2097900"><a href="/gostd/math/big/nat.go.html#2074033">bitLen</a></span><span class="op" id="2097906">(</span><span class="op" id="2097907">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2097910">if</span>&nbsp;<span class="ident" id="2097913"><a href="/gostd/math/big/rat.go.html#2097890">alen</a></span>&nbsp;<span class="op" id="2097918">==</span>&nbsp;<span class="num" id="2097921">0</span>&nbsp;<span class="op" id="2097923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2097927">return</span>&nbsp;<span class="num" id="2097934">0</span><span class="op" id="2097935">,</span>&nbsp;<span class="builtintype" id="2097937">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2097943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2097946">blen</span>&nbsp;<span class="op" id="2097951">:=</span>&nbsp;<span class="ident" id="2097954"><a href="/gostd/math/big/rat.go.html#2097540">b</a></span><span class="op" id="2097955">.</span><span class="ident" id="2097956"><a href="/gostd/math/big/nat.go.html#2074033">bitLen</a></span><span class="op" id="2097962">(</span><span class="op" id="2097963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2097966">if</span>&nbsp;<span class="ident" id="2097969"><a href="/gostd/math/big/rat.go.html#2097946">blen</a></span>&nbsp;<span class="op" id="2097974">==</span>&nbsp;<span class="num" id="2097977">0</span>&nbsp;<span class="op" id="2097979">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2097983">panic</span><span class="op" id="2097988">(</span><span class="string" id="2097989">&#34;division&nbsp;by&nbsp;zero&#34;</span><span class="op" id="2098007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2098010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2098014">//&nbsp;1.&nbsp;Left-shift&nbsp;A&nbsp;or&nbsp;B&nbsp;such&nbsp;that&nbsp;quotient&nbsp;A/B&nbsp;is&nbsp;in&nbsp;[1&lt;&lt;Msize1,&nbsp;1&lt;&lt;(Msize2+1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2098094">//&nbsp;(Msize2&nbsp;bits&nbsp;if&nbsp;A&nbsp;&lt;&nbsp;B&nbsp;when&nbsp;they&nbsp;are&nbsp;left-aligned,&nbsp;Msize2+1&nbsp;bits&nbsp;if&nbsp;A&nbsp;&gt;=&nbsp;B).</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2098174">//&nbsp;This&nbsp;is&nbsp;2&nbsp;or&nbsp;3&nbsp;more&nbsp;than&nbsp;the&nbsp;float32&nbsp;mantissa&nbsp;field&nbsp;width&nbsp;of&nbsp;Msize:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2098246">//&nbsp;-&nbsp;the&nbsp;optional&nbsp;extra&nbsp;bit&nbsp;is&nbsp;shifted&nbsp;away&nbsp;in&nbsp;step&nbsp;3&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2098308">//&nbsp;-&nbsp;the&nbsp;high-order&nbsp;1&nbsp;is&nbsp;omitted&nbsp;in&nbsp;&#34;normal&#34;&nbsp;representation;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2098370">//&nbsp;-&nbsp;the&nbsp;low-order&nbsp;1&nbsp;will&nbsp;be&nbsp;used&nbsp;during&nbsp;rounding&nbsp;then&nbsp;discarded.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2098437">exp</span>&nbsp;<span class="op" id="2098441">:=</span>&nbsp;<span class="ident" id="2098444"><a href="/gostd/math/big/rat.go.html#2097890">alen</a></span>&nbsp;<span class="op" id="2098449">-</span>&nbsp;<span class="ident" id="2098451"><a href="/gostd/math/big/rat.go.html#2097946">blen</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2098457">var</span>&nbsp;<span class="ident" id="2098461">a2</span><span class="op" id="2098463">,</span>&nbsp;<span class="ident" id="2098465">b2</span>&nbsp;<span class="ident" id="2098468"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2098473"><a href="/gostd/math/big/rat.go.html#2098461">a2</a></span>&nbsp;<span class="op" id="2098476">=</span>&nbsp;<span class="ident" id="2098478"><a href="/gostd/math/big/rat.go.html#2098461">a2</a></span><span class="op" id="2098480">.</span><span class="ident" id="2098481"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2098484">(</span><span class="ident" id="2098485"><a href="/gostd/math/big/rat.go.html#2097537">a</a></span><span class="op" id="2098486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2098489"><a href="/gostd/math/big/rat.go.html#2098465">b2</a></span>&nbsp;<span class="op" id="2098492">=</span>&nbsp;<span class="ident" id="2098494"><a href="/gostd/math/big/rat.go.html#2098465">b2</a></span><span class="op" id="2098496">.</span><span class="ident" id="2098497"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2098500">(</span><span class="ident" id="2098501"><a href="/gostd/math/big/rat.go.html#2097540">b</a></span><span class="op" id="2098502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2098505">if</span>&nbsp;<span class="ident" id="2098508">shift</span>&nbsp;<span class="op" id="2098514">:=</span>&nbsp;<span class="ident" id="2098517"><a href="/gostd/math/big/rat.go.html#2097691">Msize2</a></span>&nbsp;<span class="op" id="2098524">-</span>&nbsp;<span class="ident" id="2098526"><a href="/gostd/math/big/rat.go.html#2098437">exp</a></span><span class="op" id="2098529">;</span>&nbsp;<span class="ident" id="2098531"><a href="/gostd/math/big/rat.go.html#2098508">shift</a></span>&nbsp;<span class="op" id="2098537">&gt;</span>&nbsp;<span class="num" id="2098539">0</span>&nbsp;<span class="op" id="2098541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2098545"><a href="/gostd/math/big/rat.go.html#2098461">a2</a></span>&nbsp;<span class="op" id="2098548">=</span>&nbsp;<span class="ident" id="2098550"><a href="/gostd/math/big/rat.go.html#2098461">a2</a></span><span class="op" id="2098552">.</span><span class="ident" id="2098553"><a href="/gostd/math/big/nat.go.html#2087119">shl</a></span><span class="op" id="2098556">(</span><span class="ident" id="2098557"><a href="/gostd/math/big/rat.go.html#2098461">a2</a></span><span class="op" id="2098559">,</span>&nbsp;<span class="builtintype" id="2098561">uint</span><span class="op" id="2098565">(</span><span class="ident" id="2098566"><a href="/gostd/math/big/rat.go.html#2098508">shift</a></span><span class="op" id="2098571">)</span><span class="op" id="2098572">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2098575">}</span>&nbsp;<span class="keyword" id="2098577">else</span>&nbsp;<span class="keyword" id="2098582">if</span>&nbsp;<span class="ident" id="2098585"><a href="/gostd/math/big/rat.go.html#2098508">shift</a></span>&nbsp;<span class="op" id="2098591">&lt;</span>&nbsp;<span class="num" id="2098593">0</span>&nbsp;<span class="op" id="2098595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2098599"><a href="/gostd/math/big/rat.go.html#2098465">b2</a></span>&nbsp;<span class="op" id="2098602">=</span>&nbsp;<span class="ident" id="2098604"><a href="/gostd/math/big/rat.go.html#2098465">b2</a></span><span class="op" id="2098606">.</span><span class="ident" id="2098607"><a href="/gostd/math/big/nat.go.html#2087119">shl</a></span><span class="op" id="2098610">(</span><span class="ident" id="2098611"><a href="/gostd/math/big/rat.go.html#2098465">b2</a></span><span class="op" id="2098613">,</span>&nbsp;<span class="builtintype" id="2098615">uint</span><span class="op" id="2098619">(</span><span class="op" id="2098620">-</span><span class="ident" id="2098621"><a href="/gostd/math/big/rat.go.html#2098508">shift</a></span><span class="op" id="2098626">)</span><span class="op" id="2098627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2098630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2098634">//&nbsp;2.&nbsp;Compute&nbsp;quotient&nbsp;and&nbsp;remainder&nbsp;(q,&nbsp;r).&nbsp;&nbsp;NB:&nbsp;due&nbsp;to&nbsp;the</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2098696">//&nbsp;extra&nbsp;shift,&nbsp;the&nbsp;low-order&nbsp;bit&nbsp;of&nbsp;q&nbsp;is&nbsp;logically&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2098753">//&nbsp;high-order&nbsp;bit&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2098778">var</span>&nbsp;<span class="ident" id="2098782">q</span>&nbsp;<span class="ident" id="2098784"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2098789"><a href="/gostd/math/big/rat.go.html#2098782">q</a></span><span class="op" id="2098790">,</span>&nbsp;<span class="ident" id="2098792">r</span>&nbsp;<span class="op" id="2098794">:=</span>&nbsp;<span class="ident" id="2098797"><a href="/gostd/math/big/rat.go.html#2098782">q</a></span><span class="op" id="2098798">.</span><span class="ident" id="2098799"><a href="/gostd/math/big/nat.go.html#2071989">div</a></span><span class="op" id="2098802">(</span><span class="ident" id="2098803"><a href="/gostd/math/big/rat.go.html#2098461">a2</a></span><span class="op" id="2098805">,</span>&nbsp;<span class="ident" id="2098807"><a href="/gostd/math/big/rat.go.html#2098461">a2</a></span><span class="op" id="2098809">,</span>&nbsp;<span class="ident" id="2098811"><a href="/gostd/math/big/rat.go.html#2098465">b2</a></span><span class="op" id="2098813">)</span>&nbsp;<span class="comment" id="2098815">//&nbsp;(recycle&nbsp;a2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2098832">mantissa</span>&nbsp;<span class="op" id="2098841">:=</span>&nbsp;<span class="ident" id="2098844"><a href="/gostd/math/big/int.go.html#2048429">low32</a></span><span class="op" id="2098849">(</span><span class="ident" id="2098850"><a href="/gostd/math/big/rat.go.html#2098782">q</a></span><span class="op" id="2098851">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2098854">haveRem</span>&nbsp;<span class="op" id="2098862">:=</span>&nbsp;<span class="builtinfunc" id="2098865">len</span><span class="op" id="2098868">(</span><span class="ident" id="2098869"><a href="/gostd/math/big/rat.go.html#2098792">r</a></span><span class="op" id="2098870">)</span>&nbsp;<span class="op" id="2098872">&gt;</span>&nbsp;<span class="num" id="2098874">0</span>&nbsp;<span class="comment" id="2098876">//&nbsp;mantissa&amp;1&nbsp;&amp;&amp;&nbsp;!haveRem&nbsp;=&gt;&nbsp;remainder&nbsp;is&nbsp;exactly&nbsp;half</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2098933">//&nbsp;3.&nbsp;If&nbsp;quotient&nbsp;didn&#39;t&nbsp;fit&nbsp;in&nbsp;Msize2&nbsp;bits,&nbsp;redo&nbsp;division&nbsp;by&nbsp;b2&lt;&lt;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2099002">//&nbsp;(in&nbsp;effect---we&nbsp;accomplish&nbsp;this&nbsp;incrementally).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2099054">if</span>&nbsp;<span class="ident" id="2099057"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span><span class="op" id="2099065">&gt;&gt;</span><span class="ident" id="2099067"><a href="/gostd/math/big/rat.go.html#2097691">Msize2</a></span>&nbsp;<span class="op" id="2099074">==</span>&nbsp;<span class="num" id="2099077">1</span>&nbsp;<span class="op" id="2099079">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2099083">if</span>&nbsp;<span class="ident" id="2099086"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span><span class="op" id="2099094">&amp;</span><span class="num" id="2099095">1</span>&nbsp;<span class="op" id="2099097">==</span>&nbsp;<span class="num" id="2099100">1</span>&nbsp;<span class="op" id="2099102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099107"><a href="/gostd/math/big/rat.go.html#2098854">haveRem</a></span>&nbsp;<span class="op" id="2099115">=</span>&nbsp;<span class="builtintype" id="2099117">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2099124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099128"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span>&nbsp;<span class="op" id="2099137">&gt;&gt;=</span>&nbsp;<span class="num" id="2099141">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099145"><a href="/gostd/math/big/rat.go.html#2098437">exp</a></span><span class="op" id="2099148">++</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2099152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2099155">if</span>&nbsp;<span class="ident" id="2099158"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span><span class="op" id="2099166">&gt;&gt;</span><span class="ident" id="2099168"><a href="/gostd/math/big/rat.go.html#2097650">Msize1</a></span>&nbsp;<span class="op" id="2099175">!=</span>&nbsp;<span class="num" id="2099178">1</span>&nbsp;<span class="op" id="2099180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2099184">panic</span><span class="op" id="2099189">(</span><span class="ident" id="2099190"><a href="/gostd/math/big/rat.go.html#2096104">fmt</a></span><span class="op" id="2099193">.</span><span class="ident" id="2099194"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="2099201">(</span><span class="string" id="2099202">&#34;expected&nbsp;exactly&nbsp;%d&nbsp;bits&nbsp;of&nbsp;result&#34;</span><span class="op" id="2099238">,</span>&nbsp;<span class="ident" id="2099240"><a href="/gostd/math/big/rat.go.html#2097691">Msize2</a></span><span class="op" id="2099246">)</span><span class="op" id="2099247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2099250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2099254">//&nbsp;4.&nbsp;Rounding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2099271">if</span>&nbsp;<span class="ident" id="2099274"><a href="/gostd/math/big/rat.go.html#2097780">Emin</a></span><span class="op" id="2099278">-</span><span class="ident" id="2099279"><a href="/gostd/math/big/rat.go.html#2097636">Msize</a></span>&nbsp;<span class="op" id="2099285">&lt;=</span>&nbsp;<span class="ident" id="2099288"><a href="/gostd/math/big/rat.go.html#2098437">exp</a></span>&nbsp;<span class="op" id="2099292">&amp;&amp;</span>&nbsp;<span class="ident" id="2099295"><a href="/gostd/math/big/rat.go.html#2098437">exp</a></span>&nbsp;<span class="op" id="2099299">&lt;=</span>&nbsp;<span class="ident" id="2099302"><a href="/gostd/math/big/rat.go.html#2097780">Emin</a></span>&nbsp;<span class="op" id="2099307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2099311">//&nbsp;Denormal&nbsp;case;&nbsp;lose&nbsp;&#39;shift&#39;&nbsp;bits&nbsp;of&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099363">shift</span>&nbsp;<span class="op" id="2099369">:=</span>&nbsp;<span class="builtintype" id="2099372">uint</span><span class="op" id="2099376">(</span><span class="ident" id="2099377"><a href="/gostd/math/big/rat.go.html#2097780">Emin</a></span>&nbsp;<span class="op" id="2099382">-</span>&nbsp;<span class="op" id="2099384">(</span><span class="ident" id="2099385"><a href="/gostd/math/big/rat.go.html#2098437">exp</a></span>&nbsp;<span class="op" id="2099389">-</span>&nbsp;<span class="num" id="2099391">1</span><span class="op" id="2099392">)</span><span class="op" id="2099393">)</span>&nbsp;<span class="comment" id="2099395">//&nbsp;[1..Esize1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099412">lostbits</span>&nbsp;<span class="op" id="2099421">:=</span>&nbsp;<span class="ident" id="2099424"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span>&nbsp;<span class="op" id="2099433">&amp;</span>&nbsp;<span class="op" id="2099435">(</span><span class="num" id="2099436">1</span><span class="op" id="2099437">&lt;&lt;</span><span class="ident" id="2099439"><a href="/gostd/math/big/rat.go.html#2099363">shift</a></span>&nbsp;<span class="op" id="2099445">-</span>&nbsp;<span class="num" id="2099447">1</span><span class="op" id="2099448">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099452"><a href="/gostd/math/big/rat.go.html#2098854">haveRem</a></span>&nbsp;<span class="op" id="2099460">=</span>&nbsp;<span class="ident" id="2099462"><a href="/gostd/math/big/rat.go.html#2098854">haveRem</a></span>&nbsp;<span class="op" id="2099470">||</span>&nbsp;<span class="ident" id="2099473"><a href="/gostd/math/big/rat.go.html#2099412">lostbits</a></span>&nbsp;<span class="op" id="2099482">!=</span>&nbsp;<span class="num" id="2099485">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099489"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span>&nbsp;<span class="op" id="2099498">&gt;&gt;=</span>&nbsp;<span class="ident" id="2099502"><a href="/gostd/math/big/rat.go.html#2099363">shift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099510"><a href="/gostd/math/big/rat.go.html#2098437">exp</a></span>&nbsp;<span class="op" id="2099514">=</span>&nbsp;<span class="num" id="2099516">2</span>&nbsp;<span class="op" id="2099518">-</span>&nbsp;<span class="ident" id="2099520"><a href="/gostd/math/big/rat.go.html#2097753">Ebias</a></span>&nbsp;<span class="comment" id="2099526">//&nbsp;==&nbsp;exp&nbsp;+&nbsp;shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2099545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2099548">//&nbsp;Round&nbsp;q&nbsp;using&nbsp;round-half-to-even.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099586"><a href="/gostd/math/big/rat.go.html#2097559">exact</a></span>&nbsp;<span class="op" id="2099592">=</span>&nbsp;<span class="op" id="2099594">!</span><span class="ident" id="2099595"><a href="/gostd/math/big/rat.go.html#2098854">haveRem</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2099604">if</span>&nbsp;<span class="ident" id="2099607"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span><span class="op" id="2099615">&amp;</span><span class="num" id="2099616">1</span>&nbsp;<span class="op" id="2099618">!=</span>&nbsp;<span class="num" id="2099621">0</span>&nbsp;<span class="op" id="2099623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099627"><a href="/gostd/math/big/rat.go.html#2097559">exact</a></span>&nbsp;<span class="op" id="2099633">=</span>&nbsp;<span class="builtintype" id="2099635">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2099643">if</span>&nbsp;<span class="ident" id="2099646"><a href="/gostd/math/big/rat.go.html#2098854">haveRem</a></span>&nbsp;<span class="op" id="2099654">||</span>&nbsp;<span class="ident" id="2099657"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span><span class="op" id="2099665">&amp;</span><span class="num" id="2099666">2</span>&nbsp;<span class="op" id="2099668">!=</span>&nbsp;<span class="num" id="2099671">0</span>&nbsp;<span class="op" id="2099673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2099678">if</span>&nbsp;<span class="ident" id="2099681"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span><span class="op" id="2099689">++</span><span class="op" id="2099691">;</span>&nbsp;<span class="ident" id="2099693"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span>&nbsp;<span class="op" id="2099702">&gt;=</span>&nbsp;<span class="num" id="2099705">1</span><span class="op" id="2099706">&lt;&lt;</span><span class="ident" id="2099708"><a href="/gostd/math/big/rat.go.html#2097691">Msize2</a></span>&nbsp;<span class="op" id="2099715">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2099721">//&nbsp;Complete&nbsp;rollover&nbsp;11...1&nbsp;=&gt;&nbsp;100...0,&nbsp;so&nbsp;shift&nbsp;is&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099782"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span>&nbsp;<span class="op" id="2099791">&gt;&gt;=</span>&nbsp;<span class="num" id="2099795">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099801"><a href="/gostd/math/big/rat.go.html#2098437">exp</a></span><span class="op" id="2099804">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2099810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2099814">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2099817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099820"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span>&nbsp;<span class="op" id="2099829">&gt;&gt;=</span>&nbsp;<span class="num" id="2099833">1</span>&nbsp;<span class="comment" id="2099835">//&nbsp;discard&nbsp;rounding&nbsp;bit.&nbsp;&nbsp;Mantissa&nbsp;now&nbsp;scaled&nbsp;by&nbsp;1&lt;&lt;Msize1.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099897"><a href="/gostd/math/big/rat.go.html#2097548">f</a></span>&nbsp;<span class="op" id="2099899">=</span>&nbsp;<span class="builtintype" id="2099901">float32</span><span class="op" id="2099908">(</span><span class="ident" id="2099909"><a href="/gostd/math/big/rat.go.html#2096111">math</a></span><span class="op" id="2099913">.</span><span class="ident" id="2099914"><a href="/gostd/math/ldexp.go.html#2285999">Ldexp</a></span><span class="op" id="2099919">(</span><span class="builtintype" id="2099920">float64</span><span class="op" id="2099927">(</span><span class="ident" id="2099928"><a href="/gostd/math/big/rat.go.html#2098832">mantissa</a></span><span class="op" id="2099936">)</span><span class="op" id="2099937">,</span>&nbsp;<span class="ident" id="2099939"><a href="/gostd/math/big/rat.go.html#2098437">exp</a></span><span class="op" id="2099942">-</span><span class="ident" id="2099943"><a href="/gostd/math/big/rat.go.html#2097650">Msize1</a></span><span class="op" id="2099949">)</span><span class="op" id="2099950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2099953">if</span>&nbsp;<span class="ident" id="2099956"><a href="/gostd/math/big/rat.go.html#2096111">math</a></span><span class="op" id="2099960">.</span><span class="ident" id="2099961"><a href="/gostd/math/bits.go.html#2211921">IsInf</a></span><span class="op" id="2099966">(</span><span class="builtintype" id="2099967">float64</span><span class="op" id="2099974">(</span><span class="ident" id="2099975"><a href="/gostd/math/big/rat.go.html#2097548">f</a></span><span class="op" id="2099976">)</span><span class="op" id="2099977">,</span>&nbsp;<span class="num" id="2099979">0</span><span class="op" id="2099980">)</span>&nbsp;<span class="op" id="2099982">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2099986"><a href="/gostd/math/big/rat.go.html#2097559">exact</a></span>&nbsp;<span class="op" id="2099992">=</span>&nbsp;<span class="builtintype" id="2099994">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2100001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2100004">return</span><br>
<span class="lineno"></span><span class="op" id="2100011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="2100014">//&nbsp;quotToFloat64&nbsp;returns&nbsp;the&nbsp;non-negative&nbsp;float64&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2100070">//&nbsp;nearest&nbsp;to&nbsp;the&nbsp;quotient&nbsp;a/b,&nbsp;using&nbsp;round-to-even&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2100125">//&nbsp;halfway&nbsp;cases.&nbsp;&nbsp;It&nbsp;does&nbsp;not&nbsp;mutate&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="comment" id="2100178">//&nbsp;Preconditions:&nbsp;b&nbsp;is&nbsp;non-zero;&nbsp;a&nbsp;and&nbsp;b&nbsp;have&nbsp;no&nbsp;common&nbsp;factors.</span><br>
<span class="lineno"></span><span class="keyword" id="2100243">func</span>&nbsp;<span class="ident" id="2100248">quotToFloat64</span><span class="op" id="2100261">(</span><span class="ident" id="2100262">a</span><span class="op" id="2100263">,</span>&nbsp;<span class="ident" id="2100265">b</span>&nbsp;<span class="ident" id="2100267"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2100270">)</span>&nbsp;<span class="op" id="2100272">(</span><span class="ident" id="2100273">f</span>&nbsp;<span class="builtintype" id="2100275">float64</span><span class="op" id="2100282">,</span>&nbsp;<span class="ident" id="2100284">exact</span>&nbsp;<span class="builtintype" id="2100290">bool</span><span class="op" id="2100294">)</span>&nbsp;<span class="op" id="2100296">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2100299">const</span>&nbsp;<span class="op" id="2100305">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2100309">//&nbsp;float&nbsp;size&nbsp;in&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2100333">Fsize</span>&nbsp;<span class="op" id="2100339">=</span>&nbsp;<span class="num" id="2100341">64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2100347">//&nbsp;mantissa</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2100361">Msize</span>&nbsp;&nbsp;<span class="op" id="2100368">=</span>&nbsp;<span class="num" id="2100370">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2100375">Msize1</span>&nbsp;<span class="op" id="2100382">=</span>&nbsp;<span class="ident" id="2100384"><a href="/gostd/math/big/rat.go.html#2100361">Msize</a></span>&nbsp;<span class="op" id="2100390">+</span>&nbsp;<span class="num" id="2100392">1</span>&nbsp;<span class="comment" id="2100394">//&nbsp;incl.&nbsp;implicit&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2100416">Msize2</span>&nbsp;<span class="op" id="2100423">=</span>&nbsp;<span class="ident" id="2100425"><a href="/gostd/math/big/rat.go.html#2100375">Msize1</a></span>&nbsp;<span class="op" id="2100432">+</span>&nbsp;<span class="num" id="2100434">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2100439">//&nbsp;exponent</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2100453">Esize</span>&nbsp;<span class="op" id="2100459">=</span>&nbsp;<span class="ident" id="2100461"><a href="/gostd/math/big/rat.go.html#2100333">Fsize</a></span>&nbsp;<span class="op" id="2100467">-</span>&nbsp;<span class="ident" id="2100469"><a href="/gostd/math/big/rat.go.html#2100375">Msize1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2100478">Ebias</span>&nbsp;<span class="op" id="2100484">=</span>&nbsp;<span class="num" id="2100486">1</span><span class="op" id="2100487">&lt;&lt;</span><span class="op" id="2100489">(</span><span class="ident" id="2100490"><a href="/gostd/math/big/rat.go.html#2100453">Esize</a></span><span class="op" id="2100495">-</span><span class="num" id="2100496">1</span><span class="op" id="2100497">)</span>&nbsp;<span class="op" id="2100499">-</span>&nbsp;<span class="num" id="2100501">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2100505">Emin</span>&nbsp;&nbsp;<span class="op" id="2100511">=</span>&nbsp;<span class="num" id="2100513">1</span>&nbsp;<span class="op" id="2100515">-</span>&nbsp;<span class="ident" id="2100517"><a href="/gostd/math/big/rat.go.html#2100478">Ebias</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2100525">Emax</span>&nbsp;&nbsp;<span class="op" id="2100531">=</span>&nbsp;<span class="ident" id="2100533"><a href="/gostd/math/big/rat.go.html#2100478">Ebias</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2100540">)</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2100544">//&nbsp;TODO(adonovan):&nbsp;specialize&nbsp;common&nbsp;degenerate&nbsp;cases:&nbsp;1.0,&nbsp;integers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2100615">alen</span>&nbsp;<span class="op" id="2100620">:=</span>&nbsp;<span class="ident" id="2100623"><a href="/gostd/math/big/rat.go.html#2100262">a</a></span><span class="op" id="2100624">.</span><span class="ident" id="2100625"><a href="/gostd/math/big/nat.go.html#2074033">bitLen</a></span><span class="op" id="2100631">(</span><span class="op" id="2100632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2100635">if</span>&nbsp;<span class="ident" id="2100638"><a href="/gostd/math/big/rat.go.html#2100615">alen</a></span>&nbsp;<span class="op" id="2100643">==</span>&nbsp;<span class="num" id="2100646">0</span>&nbsp;<span class="op" id="2100648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2100652">return</span>&nbsp;<span class="num" id="2100659">0</span><span class="op" id="2100660">,</span>&nbsp;<span class="builtintype" id="2100662">true</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2100668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2100671">blen</span>&nbsp;<span class="op" id="2100676">:=</span>&nbsp;<span class="ident" id="2100679"><a href="/gostd/math/big/rat.go.html#2100265">b</a></span><span class="op" id="2100680">.</span><span class="ident" id="2100681"><a href="/gostd/math/big/nat.go.html#2074033">bitLen</a></span><span class="op" id="2100687">(</span><span class="op" id="2100688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2100691">if</span>&nbsp;<span class="ident" id="2100694"><a href="/gostd/math/big/rat.go.html#2100671">blen</a></span>&nbsp;<span class="op" id="2100699">==</span>&nbsp;<span class="num" id="2100702">0</span>&nbsp;<span class="op" id="2100704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2100708">panic</span><span class="op" id="2100713">(</span><span class="string" id="2100714">&#34;division&nbsp;by&nbsp;zero&#34;</span><span class="op" id="2100732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2100735">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2100739">//&nbsp;1.&nbsp;Left-shift&nbsp;A&nbsp;or&nbsp;B&nbsp;such&nbsp;that&nbsp;quotient&nbsp;A/B&nbsp;is&nbsp;in&nbsp;[1&lt;&lt;Msize1,&nbsp;1&lt;&lt;(Msize2+1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2100819">//&nbsp;(Msize2&nbsp;bits&nbsp;if&nbsp;A&nbsp;&lt;&nbsp;B&nbsp;when&nbsp;they&nbsp;are&nbsp;left-aligned,&nbsp;Msize2+1&nbsp;bits&nbsp;if&nbsp;A&nbsp;&gt;=&nbsp;B).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2100899">//&nbsp;This&nbsp;is&nbsp;2&nbsp;or&nbsp;3&nbsp;more&nbsp;than&nbsp;the&nbsp;float64&nbsp;mantissa&nbsp;field&nbsp;width&nbsp;of&nbsp;Msize:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2100971">//&nbsp;-&nbsp;the&nbsp;optional&nbsp;extra&nbsp;bit&nbsp;is&nbsp;shifted&nbsp;away&nbsp;in&nbsp;step&nbsp;3&nbsp;below.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2101033">//&nbsp;-&nbsp;the&nbsp;high-order&nbsp;1&nbsp;is&nbsp;omitted&nbsp;in&nbsp;&#34;normal&#34;&nbsp;representation;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2101095">//&nbsp;-&nbsp;the&nbsp;low-order&nbsp;1&nbsp;will&nbsp;be&nbsp;used&nbsp;during&nbsp;rounding&nbsp;then&nbsp;discarded.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2101162">exp</span>&nbsp;<span class="op" id="2101166">:=</span>&nbsp;<span class="ident" id="2101169"><a href="/gostd/math/big/rat.go.html#2100615">alen</a></span>&nbsp;<span class="op" id="2101174">-</span>&nbsp;<span class="ident" id="2101176"><a href="/gostd/math/big/rat.go.html#2100671">blen</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2101182">var</span>&nbsp;<span class="ident" id="2101186">a2</span><span class="op" id="2101188">,</span>&nbsp;<span class="ident" id="2101190">b2</span>&nbsp;<span class="ident" id="2101193"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2101198"><a href="/gostd/math/big/rat.go.html#2101186">a2</a></span>&nbsp;<span class="op" id="2101201">=</span>&nbsp;<span class="ident" id="2101203"><a href="/gostd/math/big/rat.go.html#2101186">a2</a></span><span class="op" id="2101205">.</span><span class="ident" id="2101206"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2101209">(</span><span class="ident" id="2101210"><a href="/gostd/math/big/rat.go.html#2100262">a</a></span><span class="op" id="2101211">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2101214"><a href="/gostd/math/big/rat.go.html#2101190">b2</a></span>&nbsp;<span class="op" id="2101217">=</span>&nbsp;<span class="ident" id="2101219"><a href="/gostd/math/big/rat.go.html#2101190">b2</a></span><span class="op" id="2101221">.</span><span class="ident" id="2101222"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2101225">(</span><span class="ident" id="2101226"><a href="/gostd/math/big/rat.go.html#2100265">b</a></span><span class="op" id="2101227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2101230">if</span>&nbsp;<span class="ident" id="2101233">shift</span>&nbsp;<span class="op" id="2101239">:=</span>&nbsp;<span class="ident" id="2101242"><a href="/gostd/math/big/rat.go.html#2100416">Msize2</a></span>&nbsp;<span class="op" id="2101249">-</span>&nbsp;<span class="ident" id="2101251"><a href="/gostd/math/big/rat.go.html#2101162">exp</a></span><span class="op" id="2101254">;</span>&nbsp;<span class="ident" id="2101256"><a href="/gostd/math/big/rat.go.html#2101233">shift</a></span>&nbsp;<span class="op" id="2101262">&gt;</span>&nbsp;<span class="num" id="2101264">0</span>&nbsp;<span class="op" id="2101266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2101270"><a href="/gostd/math/big/rat.go.html#2101186">a2</a></span>&nbsp;<span class="op" id="2101273">=</span>&nbsp;<span class="ident" id="2101275"><a href="/gostd/math/big/rat.go.html#2101186">a2</a></span><span class="op" id="2101277">.</span><span class="ident" id="2101278"><a href="/gostd/math/big/nat.go.html#2087119">shl</a></span><span class="op" id="2101281">(</span><span class="ident" id="2101282"><a href="/gostd/math/big/rat.go.html#2101186">a2</a></span><span class="op" id="2101284">,</span>&nbsp;<span class="builtintype" id="2101286">uint</span><span class="op" id="2101290">(</span><span class="ident" id="2101291"><a href="/gostd/math/big/rat.go.html#2101233">shift</a></span><span class="op" id="2101296">)</span><span class="op" id="2101297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2101300">}</span>&nbsp;<span class="keyword" id="2101302">else</span>&nbsp;<span class="keyword" id="2101307">if</span>&nbsp;<span class="ident" id="2101310"><a href="/gostd/math/big/rat.go.html#2101233">shift</a></span>&nbsp;<span class="op" id="2101316">&lt;</span>&nbsp;<span class="num" id="2101318">0</span>&nbsp;<span class="op" id="2101320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2101324"><a href="/gostd/math/big/rat.go.html#2101190">b2</a></span>&nbsp;<span class="op" id="2101327">=</span>&nbsp;<span class="ident" id="2101329"><a href="/gostd/math/big/rat.go.html#2101190">b2</a></span><span class="op" id="2101331">.</span><span class="ident" id="2101332"><a href="/gostd/math/big/nat.go.html#2087119">shl</a></span><span class="op" id="2101335">(</span><span class="ident" id="2101336"><a href="/gostd/math/big/rat.go.html#2101190">b2</a></span><span class="op" id="2101338">,</span>&nbsp;<span class="builtintype" id="2101340">uint</span><span class="op" id="2101344">(</span><span class="op" id="2101345">-</span><span class="ident" id="2101346"><a href="/gostd/math/big/rat.go.html#2101233">shift</a></span><span class="op" id="2101351">)</span><span class="op" id="2101352">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2101355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2101359">//&nbsp;2.&nbsp;Compute&nbsp;quotient&nbsp;and&nbsp;remainder&nbsp;(q,&nbsp;r).&nbsp;&nbsp;NB:&nbsp;due&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2101421">//&nbsp;extra&nbsp;shift,&nbsp;the&nbsp;low-order&nbsp;bit&nbsp;of&nbsp;q&nbsp;is&nbsp;logically&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2101478">//&nbsp;high-order&nbsp;bit&nbsp;of&nbsp;r.</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2101503">var</span>&nbsp;<span class="ident" id="2101507">q</span>&nbsp;<span class="ident" id="2101509"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2101514"><a href="/gostd/math/big/rat.go.html#2101507">q</a></span><span class="op" id="2101515">,</span>&nbsp;<span class="ident" id="2101517">r</span>&nbsp;<span class="op" id="2101519">:=</span>&nbsp;<span class="ident" id="2101522"><a href="/gostd/math/big/rat.go.html#2101507">q</a></span><span class="op" id="2101523">.</span><span class="ident" id="2101524"><a href="/gostd/math/big/nat.go.html#2071989">div</a></span><span class="op" id="2101527">(</span><span class="ident" id="2101528"><a href="/gostd/math/big/rat.go.html#2101186">a2</a></span><span class="op" id="2101530">,</span>&nbsp;<span class="ident" id="2101532"><a href="/gostd/math/big/rat.go.html#2101186">a2</a></span><span class="op" id="2101534">,</span>&nbsp;<span class="ident" id="2101536"><a href="/gostd/math/big/rat.go.html#2101190">b2</a></span><span class="op" id="2101538">)</span>&nbsp;<span class="comment" id="2101540">//&nbsp;(recycle&nbsp;a2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2101557">mantissa</span>&nbsp;<span class="op" id="2101566">:=</span>&nbsp;<span class="ident" id="2101569"><a href="/gostd/math/big/int.go.html#2048565">low64</a></span><span class="op" id="2101574">(</span><span class="ident" id="2101575"><a href="/gostd/math/big/rat.go.html#2101507">q</a></span><span class="op" id="2101576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2101579">haveRem</span>&nbsp;<span class="op" id="2101587">:=</span>&nbsp;<span class="builtinfunc" id="2101590">len</span><span class="op" id="2101593">(</span><span class="ident" id="2101594"><a href="/gostd/math/big/rat.go.html#2101517">r</a></span><span class="op" id="2101595">)</span>&nbsp;<span class="op" id="2101597">&gt;</span>&nbsp;<span class="num" id="2101599">0</span>&nbsp;<span class="comment" id="2101601">//&nbsp;mantissa&amp;1&nbsp;&amp;&amp;&nbsp;!haveRem&nbsp;=&gt;&nbsp;remainder&nbsp;is&nbsp;exactly&nbsp;half</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2101658">//&nbsp;3.&nbsp;If&nbsp;quotient&nbsp;didn&#39;t&nbsp;fit&nbsp;in&nbsp;Msize2&nbsp;bits,&nbsp;redo&nbsp;division&nbsp;by&nbsp;b2&lt;&lt;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2101727">//&nbsp;(in&nbsp;effect---we&nbsp;accomplish&nbsp;this&nbsp;incrementally).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2101779">if</span>&nbsp;<span class="ident" id="2101782"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span><span class="op" id="2101790">&gt;&gt;</span><span class="ident" id="2101792"><a href="/gostd/math/big/rat.go.html#2100416">Msize2</a></span>&nbsp;<span class="op" id="2101799">==</span>&nbsp;<span class="num" id="2101802">1</span>&nbsp;<span class="op" id="2101804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2101808">if</span>&nbsp;<span class="ident" id="2101811"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span><span class="op" id="2101819">&amp;</span><span class="num" id="2101820">1</span>&nbsp;<span class="op" id="2101822">==</span>&nbsp;<span class="num" id="2101825">1</span>&nbsp;<span class="op" id="2101827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2101832"><a href="/gostd/math/big/rat.go.html#2101579">haveRem</a></span>&nbsp;<span class="op" id="2101840">=</span>&nbsp;<span class="builtintype" id="2101842">true</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2101849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2101853"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span>&nbsp;<span class="op" id="2101862">&gt;&gt;=</span>&nbsp;<span class="num" id="2101866">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2101870"><a href="/gostd/math/big/rat.go.html#2101162">exp</a></span><span class="op" id="2101873">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2101877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2101880">if</span>&nbsp;<span class="ident" id="2101883"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span><span class="op" id="2101891">&gt;&gt;</span><span class="ident" id="2101893"><a href="/gostd/math/big/rat.go.html#2100375">Msize1</a></span>&nbsp;<span class="op" id="2101900">!=</span>&nbsp;<span class="num" id="2101903">1</span>&nbsp;<span class="op" id="2101905">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2101909">panic</span><span class="op" id="2101914">(</span><span class="ident" id="2101915"><a href="/gostd/math/big/rat.go.html#2096104">fmt</a></span><span class="op" id="2101918">.</span><span class="ident" id="2101919"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="2101926">(</span><span class="string" id="2101927">&#34;expected&nbsp;exactly&nbsp;%d&nbsp;bits&nbsp;of&nbsp;result&#34;</span><span class="op" id="2101963">,</span>&nbsp;<span class="ident" id="2101965"><a href="/gostd/math/big/rat.go.html#2100416">Msize2</a></span><span class="op" id="2101971">)</span><span class="op" id="2101972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2101975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2101979">//&nbsp;4.&nbsp;Rounding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2101996">if</span>&nbsp;<span class="ident" id="2101999"><a href="/gostd/math/big/rat.go.html#2100505">Emin</a></span><span class="op" id="2102003">-</span><span class="ident" id="2102004"><a href="/gostd/math/big/rat.go.html#2100361">Msize</a></span>&nbsp;<span class="op" id="2102010">&lt;=</span>&nbsp;<span class="ident" id="2102013"><a href="/gostd/math/big/rat.go.html#2101162">exp</a></span>&nbsp;<span class="op" id="2102017">&amp;&amp;</span>&nbsp;<span class="ident" id="2102020"><a href="/gostd/math/big/rat.go.html#2101162">exp</a></span>&nbsp;<span class="op" id="2102024">&lt;=</span>&nbsp;<span class="ident" id="2102027"><a href="/gostd/math/big/rat.go.html#2100505">Emin</a></span>&nbsp;<span class="op" id="2102032">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2102036">//&nbsp;Denormal&nbsp;case;&nbsp;lose&nbsp;&#39;shift&#39;&nbsp;bits&nbsp;of&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102088">shift</span>&nbsp;<span class="op" id="2102094">:=</span>&nbsp;<span class="builtintype" id="2102097">uint</span><span class="op" id="2102101">(</span><span class="ident" id="2102102"><a href="/gostd/math/big/rat.go.html#2100505">Emin</a></span>&nbsp;<span class="op" id="2102107">-</span>&nbsp;<span class="op" id="2102109">(</span><span class="ident" id="2102110"><a href="/gostd/math/big/rat.go.html#2101162">exp</a></span>&nbsp;<span class="op" id="2102114">-</span>&nbsp;<span class="num" id="2102116">1</span><span class="op" id="2102117">)</span><span class="op" id="2102118">)</span>&nbsp;<span class="comment" id="2102120">//&nbsp;[1..Esize1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102137">lostbits</span>&nbsp;<span class="op" id="2102146">:=</span>&nbsp;<span class="ident" id="2102149"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span>&nbsp;<span class="op" id="2102158">&amp;</span>&nbsp;<span class="op" id="2102160">(</span><span class="num" id="2102161">1</span><span class="op" id="2102162">&lt;&lt;</span><span class="ident" id="2102164"><a href="/gostd/math/big/rat.go.html#2102088">shift</a></span>&nbsp;<span class="op" id="2102170">-</span>&nbsp;<span class="num" id="2102172">1</span><span class="op" id="2102173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102177"><a href="/gostd/math/big/rat.go.html#2101579">haveRem</a></span>&nbsp;<span class="op" id="2102185">=</span>&nbsp;<span class="ident" id="2102187"><a href="/gostd/math/big/rat.go.html#2101579">haveRem</a></span>&nbsp;<span class="op" id="2102195">||</span>&nbsp;<span class="ident" id="2102198"><a href="/gostd/math/big/rat.go.html#2102137">lostbits</a></span>&nbsp;<span class="op" id="2102207">!=</span>&nbsp;<span class="num" id="2102210">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102214"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span>&nbsp;<span class="op" id="2102223">&gt;&gt;=</span>&nbsp;<span class="ident" id="2102227"><a href="/gostd/math/big/rat.go.html#2102088">shift</a></span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102235"><a href="/gostd/math/big/rat.go.html#2101162">exp</a></span>&nbsp;<span class="op" id="2102239">=</span>&nbsp;<span class="num" id="2102241">2</span>&nbsp;<span class="op" id="2102243">-</span>&nbsp;<span class="ident" id="2102245"><a href="/gostd/math/big/rat.go.html#2100478">Ebias</a></span>&nbsp;<span class="comment" id="2102251">//&nbsp;==&nbsp;exp&nbsp;+&nbsp;shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2102270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2102273">//&nbsp;Round&nbsp;q&nbsp;using&nbsp;round-half-to-even.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102311"><a href="/gostd/math/big/rat.go.html#2100284">exact</a></span>&nbsp;<span class="op" id="2102317">=</span>&nbsp;<span class="op" id="2102319">!</span><span class="ident" id="2102320"><a href="/gostd/math/big/rat.go.html#2101579">haveRem</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2102329">if</span>&nbsp;<span class="ident" id="2102332"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span><span class="op" id="2102340">&amp;</span><span class="num" id="2102341">1</span>&nbsp;<span class="op" id="2102343">!=</span>&nbsp;<span class="num" id="2102346">0</span>&nbsp;<span class="op" id="2102348">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102352"><a href="/gostd/math/big/rat.go.html#2100284">exact</a></span>&nbsp;<span class="op" id="2102358">=</span>&nbsp;<span class="builtintype" id="2102360">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2102368">if</span>&nbsp;<span class="ident" id="2102371"><a href="/gostd/math/big/rat.go.html#2101579">haveRem</a></span>&nbsp;<span class="op" id="2102379">||</span>&nbsp;<span class="ident" id="2102382"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span><span class="op" id="2102390">&amp;</span><span class="num" id="2102391">2</span>&nbsp;<span class="op" id="2102393">!=</span>&nbsp;<span class="num" id="2102396">0</span>&nbsp;<span class="op" id="2102398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2102403">if</span>&nbsp;<span class="ident" id="2102406"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span><span class="op" id="2102414">++</span><span class="op" id="2102416">;</span>&nbsp;<span class="ident" id="2102418"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span>&nbsp;<span class="op" id="2102427">&gt;=</span>&nbsp;<span class="num" id="2102430">1</span><span class="op" id="2102431">&lt;&lt;</span><span class="ident" id="2102433"><a href="/gostd/math/big/rat.go.html#2100416">Msize2</a></span>&nbsp;<span class="op" id="2102440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2102446">//&nbsp;Complete&nbsp;rollover&nbsp;11...1&nbsp;=&gt;&nbsp;100...0,&nbsp;so&nbsp;shift&nbsp;is&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102507"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span>&nbsp;<span class="op" id="2102516">&gt;&gt;=</span>&nbsp;<span class="num" id="2102520">1</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102526"><a href="/gostd/math/big/rat.go.html#2101162">exp</a></span><span class="op" id="2102529">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2102535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2102539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2102542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102545"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span>&nbsp;<span class="op" id="2102554">&gt;&gt;=</span>&nbsp;<span class="num" id="2102558">1</span>&nbsp;<span class="comment" id="2102560">//&nbsp;discard&nbsp;rounding&nbsp;bit.&nbsp;&nbsp;Mantissa&nbsp;now&nbsp;scaled&nbsp;by&nbsp;1&lt;&lt;Msize1.</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102622"><a href="/gostd/math/big/rat.go.html#2100273">f</a></span>&nbsp;<span class="op" id="2102624">=</span>&nbsp;<span class="ident" id="2102626"><a href="/gostd/math/big/rat.go.html#2096111">math</a></span><span class="op" id="2102630">.</span><span class="ident" id="2102631"><a href="/gostd/math/ldexp.go.html#2285999">Ldexp</a></span><span class="op" id="2102636">(</span><span class="builtintype" id="2102637">float64</span><span class="op" id="2102644">(</span><span class="ident" id="2102645"><a href="/gostd/math/big/rat.go.html#2101557">mantissa</a></span><span class="op" id="2102653">)</span><span class="op" id="2102654">,</span>&nbsp;<span class="ident" id="2102656"><a href="/gostd/math/big/rat.go.html#2101162">exp</a></span><span class="op" id="2102659">-</span><span class="ident" id="2102660"><a href="/gostd/math/big/rat.go.html#2100375">Msize1</a></span><span class="op" id="2102666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2102669">if</span>&nbsp;<span class="ident" id="2102672"><a href="/gostd/math/big/rat.go.html#2096111">math</a></span><span class="op" id="2102676">.</span><span class="ident" id="2102677"><a href="/gostd/math/bits.go.html#2211921">IsInf</a></span><span class="op" id="2102682">(</span><span class="ident" id="2102683"><a href="/gostd/math/big/rat.go.html#2100273">f</a></span><span class="op" id="2102684">,</span>&nbsp;<span class="num" id="2102686">0</span><span class="op" id="2102687">)</span>&nbsp;<span class="op" id="2102689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2102693"><a href="/gostd/math/big/rat.go.html#2100284">exact</a></span>&nbsp;<span class="op" id="2102699">=</span>&nbsp;<span class="builtintype" id="2102701">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2102708">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2102711">return</span><br>
<span class="lineno"></span><span class="op" id="2102718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2102721">//&nbsp;Float32&nbsp;returns&nbsp;the&nbsp;nearest&nbsp;float32&nbsp;value&nbsp;for&nbsp;x&nbsp;and&nbsp;a&nbsp;bool&nbsp;indicating</span><br>
<span class="lineno"></span><span class="comment" id="2102794">//&nbsp;whether&nbsp;f&nbsp;represents&nbsp;x&nbsp;exactly.&nbsp;If&nbsp;the&nbsp;magnitude&nbsp;of&nbsp;x&nbsp;is&nbsp;too&nbsp;large&nbsp;to</span><br>
<span class="lineno">265</span><span class="comment" id="2102867">//&nbsp;be&nbsp;represented&nbsp;by&nbsp;a&nbsp;float32,&nbsp;f&nbsp;is&nbsp;an&nbsp;infinity&nbsp;and&nbsp;exact&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2102936">//&nbsp;The&nbsp;sign&nbsp;of&nbsp;f&nbsp;always&nbsp;matches&nbsp;the&nbsp;sign&nbsp;of&nbsp;x,&nbsp;even&nbsp;if&nbsp;f&nbsp;==&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="2102999">func</span>&nbsp;<span class="op" id="2103004">(</span><span class="ident" id="2103005">x</span>&nbsp;<span class="op" id="2103007">*</span><span class="ident" id="2103008"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2103011">)</span>&nbsp;<span class="ident" id="2103013">Float32</span><span class="op" id="2103020">(</span><span class="op" id="2103021">)</span>&nbsp;<span class="op" id="2103023">(</span><span class="ident" id="2103024">f</span>&nbsp;<span class="builtintype" id="2103026">float32</span><span class="op" id="2103033">,</span>&nbsp;<span class="ident" id="2103035">exact</span>&nbsp;<span class="builtintype" id="2103041">bool</span><span class="op" id="2103045">)</span>&nbsp;<span class="op" id="2103047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103050">b</span>&nbsp;<span class="op" id="2103052">:=</span>&nbsp;<span class="ident" id="2103055"><a href="/gostd/math/big/rat.go.html#2103005">x</a></span><span class="op" id="2103056">.</span><span class="ident" id="2103057"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2103058">.</span><span class="ident" id="2103059"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103064">if</span>&nbsp;<span class="builtinfunc" id="2103067">len</span><span class="op" id="2103070">(</span><span class="ident" id="2103071"><a href="/gostd/math/big/rat.go.html#2103050">b</a></span><span class="op" id="2103072">)</span>&nbsp;<span class="op" id="2103074">==</span>&nbsp;<span class="num" id="2103077">0</span>&nbsp;<span class="op" id="2103079">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103083"><a href="/gostd/math/big/rat.go.html#2103050">b</a></span>&nbsp;<span class="op" id="2103085">=</span>&nbsp;<span class="ident" id="2103087"><a href="/gostd/math/big/rat.go.html#2103050">b</a></span><span class="op" id="2103088">.</span><span class="ident" id="2103089"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2103092">(</span><span class="ident" id="2103093"><a href="/gostd/math/big/nat.go.html#2062174">natOne</a></span><span class="op" id="2103099">)</span>&nbsp;<span class="comment" id="2103101">//&nbsp;materialize&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2103129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103132"><a href="/gostd/math/big/rat.go.html#2103024">f</a></span><span class="op" id="2103133">,</span>&nbsp;<span class="ident" id="2103135"><a href="/gostd/math/big/rat.go.html#2103035">exact</a></span>&nbsp;<span class="op" id="2103141">=</span>&nbsp;<span class="ident" id="2103143"><a href="/gostd/math/big/rat.go.html#2097523">quotToFloat32</a></span><span class="op" id="2103156">(</span><span class="ident" id="2103157"><a href="/gostd/math/big/rat.go.html#2103005">x</a></span><span class="op" id="2103158">.</span><span class="ident" id="2103159"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2103160">.</span><span class="ident" id="2103161"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2103164">,</span>&nbsp;<span class="ident" id="2103166"><a href="/gostd/math/big/rat.go.html#2103050">b</a></span><span class="op" id="2103167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103170">if</span>&nbsp;<span class="ident" id="2103173"><a href="/gostd/math/big/rat.go.html#2103005">x</a></span><span class="op" id="2103174">.</span><span class="ident" id="2103175"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2103176">.</span><span class="ident" id="2103177"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2103181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103185"><a href="/gostd/math/big/rat.go.html#2103024">f</a></span>&nbsp;<span class="op" id="2103187">=</span>&nbsp;<span class="op" id="2103189">-</span><span class="ident" id="2103190"><a href="/gostd/math/big/rat.go.html#2103024">f</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2103193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103196">return</span><br>
<span class="lineno"></span><span class="op" id="2103203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2103206">//&nbsp;Float64&nbsp;returns&nbsp;the&nbsp;nearest&nbsp;float64&nbsp;value&nbsp;for&nbsp;x&nbsp;and&nbsp;a&nbsp;bool&nbsp;indicating</span><br>
<span class="lineno">280</span><span class="comment" id="2103279">//&nbsp;whether&nbsp;f&nbsp;represents&nbsp;x&nbsp;exactly.&nbsp;If&nbsp;the&nbsp;magnitude&nbsp;of&nbsp;x&nbsp;is&nbsp;too&nbsp;large&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2103352">//&nbsp;be&nbsp;represented&nbsp;by&nbsp;a&nbsp;float64,&nbsp;f&nbsp;is&nbsp;an&nbsp;infinity&nbsp;and&nbsp;exact&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2103421">//&nbsp;The&nbsp;sign&nbsp;of&nbsp;f&nbsp;always&nbsp;matches&nbsp;the&nbsp;sign&nbsp;of&nbsp;x,&nbsp;even&nbsp;if&nbsp;f&nbsp;==&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="2103484">func</span>&nbsp;<span class="op" id="2103489">(</span><span class="ident" id="2103490">x</span>&nbsp;<span class="op" id="2103492">*</span><span class="ident" id="2103493"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2103496">)</span>&nbsp;<span class="ident" id="2103498">Float64</span><span class="op" id="2103505">(</span><span class="op" id="2103506">)</span>&nbsp;<span class="op" id="2103508">(</span><span class="ident" id="2103509">f</span>&nbsp;<span class="builtintype" id="2103511">float64</span><span class="op" id="2103518">,</span>&nbsp;<span class="ident" id="2103520">exact</span>&nbsp;<span class="builtintype" id="2103526">bool</span><span class="op" id="2103530">)</span>&nbsp;<span class="op" id="2103532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103535">b</span>&nbsp;<span class="op" id="2103537">:=</span>&nbsp;<span class="ident" id="2103540"><a href="/gostd/math/big/rat.go.html#2103490">x</a></span><span class="op" id="2103541">.</span><span class="ident" id="2103542"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2103543">.</span><span class="ident" id="2103544"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103549">if</span>&nbsp;<span class="builtinfunc" id="2103552">len</span><span class="op" id="2103555">(</span><span class="ident" id="2103556"><a href="/gostd/math/big/rat.go.html#2103535">b</a></span><span class="op" id="2103557">)</span>&nbsp;<span class="op" id="2103559">==</span>&nbsp;<span class="num" id="2103562">0</span>&nbsp;<span class="op" id="2103564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103568"><a href="/gostd/math/big/rat.go.html#2103535">b</a></span>&nbsp;<span class="op" id="2103570">=</span>&nbsp;<span class="ident" id="2103572"><a href="/gostd/math/big/rat.go.html#2103535">b</a></span><span class="op" id="2103573">.</span><span class="ident" id="2103574"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2103577">(</span><span class="ident" id="2103578"><a href="/gostd/math/big/nat.go.html#2062174">natOne</a></span><span class="op" id="2103584">)</span>&nbsp;<span class="comment" id="2103586">//&nbsp;materialize&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2103614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103617"><a href="/gostd/math/big/rat.go.html#2103509">f</a></span><span class="op" id="2103618">,</span>&nbsp;<span class="ident" id="2103620"><a href="/gostd/math/big/rat.go.html#2103520">exact</a></span>&nbsp;<span class="op" id="2103626">=</span>&nbsp;<span class="ident" id="2103628"><a href="/gostd/math/big/rat.go.html#2100248">quotToFloat64</a></span><span class="op" id="2103641">(</span><span class="ident" id="2103642"><a href="/gostd/math/big/rat.go.html#2103490">x</a></span><span class="op" id="2103643">.</span><span class="ident" id="2103644"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2103645">.</span><span class="ident" id="2103646"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2103649">,</span>&nbsp;<span class="ident" id="2103651"><a href="/gostd/math/big/rat.go.html#2103535">b</a></span><span class="op" id="2103652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103655">if</span>&nbsp;<span class="ident" id="2103658"><a href="/gostd/math/big/rat.go.html#2103490">x</a></span><span class="op" id="2103659">.</span><span class="ident" id="2103660"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2103661">.</span><span class="ident" id="2103662"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2103666">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103670"><a href="/gostd/math/big/rat.go.html#2103509">f</a></span>&nbsp;<span class="op" id="2103672">=</span>&nbsp;<span class="op" id="2103674">-</span><span class="ident" id="2103675"><a href="/gostd/math/big/rat.go.html#2103509">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2103678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103681">return</span><br>
<span class="lineno"></span><span class="op" id="2103688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="comment" id="2103691">//&nbsp;SetFrac&nbsp;sets&nbsp;z&nbsp;to&nbsp;a/b&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2103731">func</span>&nbsp;<span class="op" id="2103736">(</span><span class="ident" id="2103737">z</span>&nbsp;<span class="op" id="2103739">*</span><span class="ident" id="2103740"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2103743">)</span>&nbsp;<span class="ident" id="2103745">SetFrac</span><span class="op" id="2103752">(</span><span class="ident" id="2103753">a</span><span class="op" id="2103754">,</span>&nbsp;<span class="ident" id="2103756">b</span>&nbsp;<span class="op" id="2103758">*</span><span class="ident" id="2103759"><a href="/gostd/math/big/int.go.html#2035985">Int</a></span><span class="op" id="2103762">)</span>&nbsp;<span class="op" id="2103764">*</span><span class="ident" id="2103765"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2103769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103772"><a href="/gostd/math/big/rat.go.html#2103737">z</a></span><span class="op" id="2103773">.</span><span class="ident" id="2103774"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2103775">.</span><span class="ident" id="2103776"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2103780">=</span>&nbsp;<span class="ident" id="2103782"><a href="/gostd/math/big/rat.go.html#2103753">a</a></span><span class="op" id="2103783">.</span><span class="ident" id="2103784"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2103788">!=</span>&nbsp;<span class="ident" id="2103791"><a href="/gostd/math/big/rat.go.html#2103756">b</a></span><span class="op" id="2103792">.</span><span class="ident" id="2103793"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103798">babs</span>&nbsp;<span class="op" id="2103803">:=</span>&nbsp;<span class="ident" id="2103806"><a href="/gostd/math/big/rat.go.html#2103756">b</a></span><span class="op" id="2103807">.</span><span class="ident" id="2103808"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103813">if</span>&nbsp;<span class="builtinfunc" id="2103816">len</span><span class="op" id="2103819">(</span><span class="ident" id="2103820"><a href="/gostd/math/big/rat.go.html#2103798">babs</a></span><span class="op" id="2103824">)</span>&nbsp;<span class="op" id="2103826">==</span>&nbsp;<span class="num" id="2103829">0</span>&nbsp;<span class="op" id="2103831">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2103835">panic</span><span class="op" id="2103840">(</span><span class="string" id="2103841">&#34;division&nbsp;by&nbsp;zero&#34;</span><span class="op" id="2103859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2103862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2103865">if</span>&nbsp;<span class="op" id="2103868">&amp;</span><span class="ident" id="2103869"><a href="/gostd/math/big/rat.go.html#2103737">z</a></span><span class="op" id="2103870">.</span><span class="ident" id="2103871"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span>&nbsp;<span class="op" id="2103873">==</span>&nbsp;<span class="ident" id="2103876"><a href="/gostd/math/big/rat.go.html#2103756">b</a></span>&nbsp;<span class="op" id="2103878">||</span>&nbsp;<span class="ident" id="2103881"><a href="/gostd/math/big/nat.go.html#2068133">alias</a></span><span class="op" id="2103886">(</span><span class="ident" id="2103887"><a href="/gostd/math/big/rat.go.html#2103737">z</a></span><span class="op" id="2103888">.</span><span class="ident" id="2103889"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2103890">.</span><span class="ident" id="2103891"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2103894">,</span>&nbsp;<span class="ident" id="2103896"><a href="/gostd/math/big/rat.go.html#2103798">babs</a></span><span class="op" id="2103900">)</span>&nbsp;<span class="op" id="2103902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103906"><a href="/gostd/math/big/rat.go.html#2103798">babs</a></span>&nbsp;<span class="op" id="2103911">=</span>&nbsp;<span class="ident" id="2103913"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2103916">(</span><span class="builtintype" id="2103917">nil</span><span class="op" id="2103920">)</span><span class="op" id="2103921">.</span><span class="ident" id="2103922"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2103925">(</span><span class="ident" id="2103926"><a href="/gostd/math/big/rat.go.html#2103798">babs</a></span><span class="op" id="2103930">)</span>&nbsp;<span class="comment" id="2103932">//&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2103948">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103951"><a href="/gostd/math/big/rat.go.html#2103737">z</a></span><span class="op" id="2103952">.</span><span class="ident" id="2103953"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2103954">.</span><span class="ident" id="2103955"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2103959">=</span>&nbsp;<span class="ident" id="2103961"><a href="/gostd/math/big/rat.go.html#2103737">z</a></span><span class="op" id="2103962">.</span><span class="ident" id="2103963"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2103964">.</span><span class="ident" id="2103965"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2103968">.</span><span class="ident" id="2103969"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2103972">(</span><span class="ident" id="2103973"><a href="/gostd/math/big/rat.go.html#2103753">a</a></span><span class="op" id="2103974">.</span><span class="ident" id="2103975"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2103978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2103981"><a href="/gostd/math/big/rat.go.html#2103737">z</a></span><span class="op" id="2103982">.</span><span class="ident" id="2103983"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2103984">.</span><span class="ident" id="2103985"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2103989">=</span>&nbsp;<span class="ident" id="2103991"><a href="/gostd/math/big/rat.go.html#2103737">z</a></span><span class="op" id="2103992">.</span><span class="ident" id="2103993"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2103994">.</span><span class="ident" id="2103995"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2103998">.</span><span class="ident" id="2103999"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2104002">(</span><span class="ident" id="2104003"><a href="/gostd/math/big/rat.go.html#2103798">babs</a></span><span class="op" id="2104007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104010">return</span>&nbsp;<span class="ident" id="2104017"><a href="/gostd/math/big/rat.go.html#2103737">z</a></span><span class="op" id="2104018">.</span><span class="ident" id="2104019"><a href="/gostd/math/big/rat.go.html#2106244">norm</a></span><span class="op" id="2104023">(</span><span class="op" id="2104024">)</span><br>
<span class="lineno"></span><span class="op" id="2104026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="2104029">//&nbsp;SetFrac64&nbsp;sets&nbsp;z&nbsp;to&nbsp;a/b&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2104071">func</span>&nbsp;<span class="op" id="2104076">(</span><span class="ident" id="2104077">z</span>&nbsp;<span class="op" id="2104079">*</span><span class="ident" id="2104080"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2104083">)</span>&nbsp;<span class="ident" id="2104085">SetFrac64</span><span class="op" id="2104094">(</span><span class="ident" id="2104095">a</span><span class="op" id="2104096">,</span>&nbsp;<span class="ident" id="2104098">b</span>&nbsp;<span class="builtintype" id="2104100">int64</span><span class="op" id="2104105">)</span>&nbsp;<span class="op" id="2104107">*</span><span class="ident" id="2104108"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2104112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104115"><a href="/gostd/math/big/rat.go.html#2104077">z</a></span><span class="op" id="2104116">.</span><span class="ident" id="2104117"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2104118">.</span><span class="ident" id="2104119"><a href="/gostd/math/big/int.go.html#2036323">SetInt64</a></span><span class="op" id="2104127">(</span><span class="ident" id="2104128"><a href="/gostd/math/big/rat.go.html#2104095">a</a></span><span class="op" id="2104129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104132">if</span>&nbsp;<span class="ident" id="2104135"><a href="/gostd/math/big/rat.go.html#2104098">b</a></span>&nbsp;<span class="op" id="2104137">==</span>&nbsp;<span class="num" id="2104140">0</span>&nbsp;<span class="op" id="2104142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2104146">panic</span><span class="op" id="2104151">(</span><span class="string" id="2104152">&#34;division&nbsp;by&nbsp;zero&#34;</span><span class="op" id="2104170">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2104173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104176">if</span>&nbsp;<span class="ident" id="2104179"><a href="/gostd/math/big/rat.go.html#2104098">b</a></span>&nbsp;<span class="op" id="2104181">&lt;</span>&nbsp;<span class="num" id="2104183">0</span>&nbsp;<span class="op" id="2104185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104189"><a href="/gostd/math/big/rat.go.html#2104098">b</a></span>&nbsp;<span class="op" id="2104191">=</span>&nbsp;<span class="op" id="2104193">-</span><span class="ident" id="2104194"><a href="/gostd/math/big/rat.go.html#2104098">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104198"><a href="/gostd/math/big/rat.go.html#2104077">z</a></span><span class="op" id="2104199">.</span><span class="ident" id="2104200"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2104201">.</span><span class="ident" id="2104202"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2104206">=</span>&nbsp;<span class="op" id="2104208">!</span><span class="ident" id="2104209"><a href="/gostd/math/big/rat.go.html#2104077">z</a></span><span class="op" id="2104210">.</span><span class="ident" id="2104211"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2104212">.</span><span class="ident" id="2104213"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2104218">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104221"><a href="/gostd/math/big/rat.go.html#2104077">z</a></span><span class="op" id="2104222">.</span><span class="ident" id="2104223"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2104224">.</span><span class="ident" id="2104225"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2104229">=</span>&nbsp;<span class="ident" id="2104231"><a href="/gostd/math/big/rat.go.html#2104077">z</a></span><span class="op" id="2104232">.</span><span class="ident" id="2104233"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2104234">.</span><span class="ident" id="2104235"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2104238">.</span><span class="ident" id="2104239"><a href="/gostd/math/big/nat.go.html#2062773">setUint64</a></span><span class="op" id="2104248">(</span><span class="builtintype" id="2104249">uint64</span><span class="op" id="2104255">(</span><span class="ident" id="2104256"><a href="/gostd/math/big/rat.go.html#2104098">b</a></span><span class="op" id="2104257">)</span><span class="op" id="2104258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104261">return</span>&nbsp;<span class="ident" id="2104268"><a href="/gostd/math/big/rat.go.html#2104077">z</a></span><span class="op" id="2104269">.</span><span class="ident" id="2104270"><a href="/gostd/math/big/rat.go.html#2106244">norm</a></span><span class="op" id="2104274">(</span><span class="op" id="2104275">)</span><br>
<span class="lineno"></span><span class="op" id="2104277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2104280">//&nbsp;SetInt&nbsp;sets&nbsp;z&nbsp;to&nbsp;x&nbsp;(by&nbsp;making&nbsp;a&nbsp;copy&nbsp;of&nbsp;x)&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno">325</span><span class="keyword" id="2104341">func</span>&nbsp;<span class="op" id="2104346">(</span><span class="ident" id="2104347">z</span>&nbsp;<span class="op" id="2104349">*</span><span class="ident" id="2104350"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2104353">)</span>&nbsp;<span class="ident" id="2104355">SetInt</span><span class="op" id="2104361">(</span><span class="ident" id="2104362">x</span>&nbsp;<span class="op" id="2104364">*</span><span class="ident" id="2104365"><a href="/gostd/math/big/int.go.html#2035985">Int</a></span><span class="op" id="2104368">)</span>&nbsp;<span class="op" id="2104370">*</span><span class="ident" id="2104371"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2104375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104378"><a href="/gostd/math/big/rat.go.html#2104347">z</a></span><span class="op" id="2104379">.</span><span class="ident" id="2104380"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2104381">.</span><span class="ident" id="2104382"><a href="/gostd/math/big/int.go.html#2036758">Set</a></span><span class="op" id="2104385">(</span><span class="ident" id="2104386"><a href="/gostd/math/big/rat.go.html#2104362">x</a></span><span class="op" id="2104387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104390"><a href="/gostd/math/big/rat.go.html#2104347">z</a></span><span class="op" id="2104391">.</span><span class="ident" id="2104392"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2104393">.</span><span class="ident" id="2104394"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2104398">=</span>&nbsp;<span class="ident" id="2104400"><a href="/gostd/math/big/rat.go.html#2104347">z</a></span><span class="op" id="2104401">.</span><span class="ident" id="2104402"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2104403">.</span><span class="ident" id="2104404"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2104407">.</span><span class="builtinfunc" id="2104408"><a href="/gostd/math/big/nat.go.html#2062395">make</a></span><span class="op" id="2104412">(</span><span class="num" id="2104413">0</span><span class="op" id="2104414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104417">return</span>&nbsp;<span class="ident" id="2104424"><a href="/gostd/math/big/rat.go.html#2104347">z</a></span><br>
<span class="lineno"></span><span class="op" id="2104426">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="comment" id="2104429">//&nbsp;SetInt64&nbsp;sets&nbsp;z&nbsp;to&nbsp;x&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2104468">func</span>&nbsp;<span class="op" id="2104473">(</span><span class="ident" id="2104474">z</span>&nbsp;<span class="op" id="2104476">*</span><span class="ident" id="2104477"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2104480">)</span>&nbsp;<span class="ident" id="2104482">SetInt64</span><span class="op" id="2104490">(</span><span class="ident" id="2104491">x</span>&nbsp;<span class="builtintype" id="2104493">int64</span><span class="op" id="2104498">)</span>&nbsp;<span class="op" id="2104500">*</span><span class="ident" id="2104501"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2104505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104508"><a href="/gostd/math/big/rat.go.html#2104474">z</a></span><span class="op" id="2104509">.</span><span class="ident" id="2104510"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2104511">.</span><span class="ident" id="2104512"><a href="/gostd/math/big/int.go.html#2036323">SetInt64</a></span><span class="op" id="2104520">(</span><span class="ident" id="2104521"><a href="/gostd/math/big/rat.go.html#2104491">x</a></span><span class="op" id="2104522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104525"><a href="/gostd/math/big/rat.go.html#2104474">z</a></span><span class="op" id="2104526">.</span><span class="ident" id="2104527"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2104528">.</span><span class="ident" id="2104529"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2104533">=</span>&nbsp;<span class="ident" id="2104535"><a href="/gostd/math/big/rat.go.html#2104474">z</a></span><span class="op" id="2104536">.</span><span class="ident" id="2104537"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2104538">.</span><span class="ident" id="2104539"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2104542">.</span><span class="builtinfunc" id="2104543"><a href="/gostd/math/big/nat.go.html#2062395">make</a></span><span class="op" id="2104547">(</span><span class="num" id="2104548">0</span><span class="op" id="2104549">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104552">return</span>&nbsp;<span class="ident" id="2104559"><a href="/gostd/math/big/rat.go.html#2104474">z</a></span><br>
<span class="lineno"></span><span class="op" id="2104561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2104564">//&nbsp;Set&nbsp;sets&nbsp;z&nbsp;to&nbsp;x&nbsp;(by&nbsp;making&nbsp;a&nbsp;copy&nbsp;of&nbsp;x)&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2104622">func</span>&nbsp;<span class="op" id="2104627">(</span><span class="ident" id="2104628">z</span>&nbsp;<span class="op" id="2104630">*</span><span class="ident" id="2104631"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2104634">)</span>&nbsp;<span class="ident" id="2104636">Set</span><span class="op" id="2104639">(</span><span class="ident" id="2104640">x</span>&nbsp;<span class="op" id="2104642">*</span><span class="ident" id="2104643"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2104646">)</span>&nbsp;<span class="op" id="2104648">*</span><span class="ident" id="2104649"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2104653">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104656">if</span>&nbsp;<span class="ident" id="2104659"><a href="/gostd/math/big/rat.go.html#2104628">z</a></span>&nbsp;<span class="op" id="2104661">!=</span>&nbsp;<span class="ident" id="2104664"><a href="/gostd/math/big/rat.go.html#2104640">x</a></span>&nbsp;<span class="op" id="2104666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104670"><a href="/gostd/math/big/rat.go.html#2104628">z</a></span><span class="op" id="2104671">.</span><span class="ident" id="2104672"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2104673">.</span><span class="ident" id="2104674"><a href="/gostd/math/big/int.go.html#2036758">Set</a></span><span class="op" id="2104677">(</span><span class="op" id="2104678">&amp;</span><span class="ident" id="2104679"><a href="/gostd/math/big/rat.go.html#2104640">x</a></span><span class="op" id="2104680">.</span><span class="ident" id="2104681"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2104682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104686"><a href="/gostd/math/big/rat.go.html#2104628">z</a></span><span class="op" id="2104687">.</span><span class="ident" id="2104688"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2104689">.</span><span class="ident" id="2104690"><a href="/gostd/math/big/int.go.html#2036758">Set</a></span><span class="op" id="2104693">(</span><span class="op" id="2104694">&amp;</span><span class="ident" id="2104695"><a href="/gostd/math/big/rat.go.html#2104640">x</a></span><span class="op" id="2104696">.</span><span class="ident" id="2104697"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2104698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2104701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104704">return</span>&nbsp;<span class="ident" id="2104711"><a href="/gostd/math/big/rat.go.html#2104628">z</a></span><br>
<span class="lineno">345</span><span class="op" id="2104713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2104716">//&nbsp;Abs&nbsp;sets&nbsp;z&nbsp;to&nbsp;|x|&nbsp;(the&nbsp;absolute&nbsp;value&nbsp;of&nbsp;x)&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2104778">func</span>&nbsp;<span class="op" id="2104783">(</span><span class="ident" id="2104784">z</span>&nbsp;<span class="op" id="2104786">*</span><span class="ident" id="2104787"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2104790">)</span>&nbsp;<span class="ident" id="2104792">Abs</span><span class="op" id="2104795">(</span><span class="ident" id="2104796">x</span>&nbsp;<span class="op" id="2104798">*</span><span class="ident" id="2104799"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2104802">)</span>&nbsp;<span class="op" id="2104804">*</span><span class="ident" id="2104805"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2104809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104812"><a href="/gostd/math/big/rat.go.html#2104784">z</a></span><span class="op" id="2104813">.</span><span class="ident" id="2104814"><a href="/gostd/math/big/rat.go.html#2104636">Set</a></span><span class="op" id="2104817">(</span><span class="ident" id="2104818"><a href="/gostd/math/big/rat.go.html#2104796">x</a></span><span class="op" id="2104819">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104822"><a href="/gostd/math/big/rat.go.html#2104784">z</a></span><span class="op" id="2104823">.</span><span class="ident" id="2104824"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2104825">.</span><span class="ident" id="2104826"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2104830">=</span>&nbsp;<span class="builtintype" id="2104832">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104839">return</span>&nbsp;<span class="ident" id="2104846"><a href="/gostd/math/big/rat.go.html#2104784">z</a></span><br>
<span class="lineno"></span><span class="op" id="2104848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2104851">//&nbsp;Neg&nbsp;sets&nbsp;z&nbsp;to&nbsp;-x&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno">355</span><span class="keyword" id="2104886">func</span>&nbsp;<span class="op" id="2104891">(</span><span class="ident" id="2104892">z</span>&nbsp;<span class="op" id="2104894">*</span><span class="ident" id="2104895"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2104898">)</span>&nbsp;<span class="ident" id="2104900">Neg</span><span class="op" id="2104903">(</span><span class="ident" id="2104904">x</span>&nbsp;<span class="op" id="2104906">*</span><span class="ident" id="2104907"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2104910">)</span>&nbsp;<span class="op" id="2104912">*</span><span class="ident" id="2104913"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2104917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104920"><a href="/gostd/math/big/rat.go.html#2104892">z</a></span><span class="op" id="2104921">.</span><span class="ident" id="2104922"><a href="/gostd/math/big/rat.go.html#2104636">Set</a></span><span class="op" id="2104925">(</span><span class="ident" id="2104926"><a href="/gostd/math/big/rat.go.html#2104904">x</a></span><span class="op" id="2104927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2104930"><a href="/gostd/math/big/rat.go.html#2104892">z</a></span><span class="op" id="2104931">.</span><span class="ident" id="2104932"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2104933">.</span><span class="ident" id="2104934"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2104938">=</span>&nbsp;<span class="builtinfunc" id="2104940">len</span><span class="op" id="2104943">(</span><span class="ident" id="2104944"><a href="/gostd/math/big/rat.go.html#2104892">z</a></span><span class="op" id="2104945">.</span><span class="ident" id="2104946"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2104947">.</span><span class="ident" id="2104948"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2104951">)</span>&nbsp;<span class="op" id="2104953">&gt;</span>&nbsp;<span class="num" id="2104955">0</span>&nbsp;<span class="op" id="2104957">&amp;&amp;</span>&nbsp;<span class="op" id="2104960">!</span><span class="ident" id="2104961"><a href="/gostd/math/big/rat.go.html#2104892">z</a></span><span class="op" id="2104962">.</span><span class="ident" id="2104963"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2104964">.</span><span class="ident" id="2104965"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="comment" id="2104969">//&nbsp;0&nbsp;has&nbsp;no&nbsp;sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2104987">return</span>&nbsp;<span class="ident" id="2104994"><a href="/gostd/math/big/rat.go.html#2104892">z</a></span><br>
<span class="lineno"></span><span class="op" id="2104996">}</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span><span class="comment" id="2104999">//&nbsp;Inv&nbsp;sets&nbsp;z&nbsp;to&nbsp;1/x&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2105035">func</span>&nbsp;<span class="op" id="2105040">(</span><span class="ident" id="2105041">z</span>&nbsp;<span class="op" id="2105043">*</span><span class="ident" id="2105044"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2105047">)</span>&nbsp;<span class="ident" id="2105049">Inv</span><span class="op" id="2105052">(</span><span class="ident" id="2105053">x</span>&nbsp;<span class="op" id="2105055">*</span><span class="ident" id="2105056"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2105059">)</span>&nbsp;<span class="op" id="2105061">*</span><span class="ident" id="2105062"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2105066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2105069">if</span>&nbsp;<span class="builtinfunc" id="2105072">len</span><span class="op" id="2105075">(</span><span class="ident" id="2105076"><a href="/gostd/math/big/rat.go.html#2105053">x</a></span><span class="op" id="2105077">.</span><span class="ident" id="2105078"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2105079">.</span><span class="ident" id="2105080"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2105083">)</span>&nbsp;<span class="op" id="2105085">==</span>&nbsp;<span class="num" id="2105088">0</span>&nbsp;<span class="op" id="2105090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2105094">panic</span><span class="op" id="2105099">(</span><span class="string" id="2105100">&#34;division&nbsp;by&nbsp;zero&#34;</span><span class="op" id="2105118">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2105121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105124"><a href="/gostd/math/big/rat.go.html#2105041">z</a></span><span class="op" id="2105125">.</span><span class="ident" id="2105126"><a href="/gostd/math/big/rat.go.html#2104636">Set</a></span><span class="op" id="2105129">(</span><span class="ident" id="2105130"><a href="/gostd/math/big/rat.go.html#2105053">x</a></span><span class="op" id="2105131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105134">a</span>&nbsp;<span class="op" id="2105136">:=</span>&nbsp;<span class="ident" id="2105139"><a href="/gostd/math/big/rat.go.html#2105041">z</a></span><span class="op" id="2105140">.</span><span class="ident" id="2105141"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2105142">.</span><span class="ident" id="2105143"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2105148">if</span>&nbsp;<span class="builtinfunc" id="2105151">len</span><span class="op" id="2105154">(</span><span class="ident" id="2105155"><a href="/gostd/math/big/rat.go.html#2105134">a</a></span><span class="op" id="2105156">)</span>&nbsp;<span class="op" id="2105158">==</span>&nbsp;<span class="num" id="2105161">0</span>&nbsp;<span class="op" id="2105163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105167"><a href="/gostd/math/big/rat.go.html#2105134">a</a></span>&nbsp;<span class="op" id="2105169">=</span>&nbsp;<span class="ident" id="2105171"><a href="/gostd/math/big/rat.go.html#2105134">a</a></span><span class="op" id="2105172">.</span><span class="ident" id="2105173"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2105176">(</span><span class="ident" id="2105177"><a href="/gostd/math/big/nat.go.html#2062174">natOne</a></span><span class="op" id="2105183">)</span>&nbsp;<span class="comment" id="2105185">//&nbsp;materialize&nbsp;numerator</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2105211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105214">b</span>&nbsp;<span class="op" id="2105216">:=</span>&nbsp;<span class="ident" id="2105219"><a href="/gostd/math/big/rat.go.html#2105041">z</a></span><span class="op" id="2105220">.</span><span class="ident" id="2105221"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2105222">.</span><span class="ident" id="2105223"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2105228">if</span>&nbsp;<span class="ident" id="2105231"><a href="/gostd/math/big/rat.go.html#2105214">b</a></span><span class="op" id="2105232">.</span><span class="ident" id="2105233"><a href="/gostd/math/big/nat.go.html#2063929">cmp</a></span><span class="op" id="2105236">(</span><span class="ident" id="2105237"><a href="/gostd/math/big/nat.go.html#2062174">natOne</a></span><span class="op" id="2105243">)</span>&nbsp;<span class="op" id="2105245">==</span>&nbsp;<span class="num" id="2105248">0</span>&nbsp;<span class="op" id="2105250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105254"><a href="/gostd/math/big/rat.go.html#2105214">b</a></span>&nbsp;<span class="op" id="2105256">=</span>&nbsp;<span class="ident" id="2105258"><a href="/gostd/math/big/rat.go.html#2105214">b</a></span><span class="op" id="2105259">.</span><span class="builtinfunc" id="2105260"><a href="/gostd/math/big/nat.go.html#2062395">make</a></span><span class="op" id="2105264">(</span><span class="num" id="2105265">0</span><span class="op" id="2105266">)</span>&nbsp;<span class="comment" id="2105268">//&nbsp;normalize&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2105294">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2105297"><a href="/gostd/math/big/rat.go.html#2105041">z</a></span><span class="op" id="2105298">.</span><span class="ident" id="2105299"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2105300">.</span><span class="ident" id="2105301"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2105304">,</span>&nbsp;<span class="ident" id="2105306"><a href="/gostd/math/big/rat.go.html#2105041">z</a></span><span class="op" id="2105307">.</span><span class="ident" id="2105308"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2105309">.</span><span class="ident" id="2105310"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2105314">=</span>&nbsp;<span class="ident" id="2105316"><a href="/gostd/math/big/rat.go.html#2105134">a</a></span><span class="op" id="2105317">,</span>&nbsp;<span class="ident" id="2105319"><a href="/gostd/math/big/rat.go.html#2105214">b</a></span>&nbsp;<span class="comment" id="2105321">//&nbsp;sign&nbsp;doesn&#39;t&nbsp;change</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2105345">return</span>&nbsp;<span class="ident" id="2105352"><a href="/gostd/math/big/rat.go.html#2105041">z</a></span><br>
<span class="lineno"></span><span class="op" id="2105354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2105357">//&nbsp;Sign&nbsp;returns:</span><br>
<span class="lineno">380</span><span class="comment" id="2105374">//</span><br>
<span class="lineno"></span><span class="comment" id="2105377">//&nbsp;&nbsp;&nbsp;&nbsp;-1&nbsp;if&nbsp;x&nbsp;&lt;&nbsp;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2105393">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;if&nbsp;x&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2105409">//&nbsp;&nbsp;&nbsp;&nbsp;+1&nbsp;if&nbsp;x&nbsp;&gt;&nbsp;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2105425">//</span><br>
<span class="lineno">385</span><span class="keyword" id="2105428">func</span>&nbsp;<span class="op" id="2105433">(</span><span class="ident" id="2105434">x</span>&nbsp;<span class="op" id="2105436">*</span><span class="ident" id="2105437"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2105440">)</span>&nbsp;<span class="ident" id="2105442">Sign</span><span class="op" id="2105446">(</span><span class="op" id="2105447">)</span>&nbsp;<span class="builtintype" id="2105449">int</span>&nbsp;<span class="op" id="2105453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2105456">return</span>&nbsp;<span class="ident" id="2105463"><a href="/gostd/math/big/rat.go.html#2105434">x</a></span><span class="op" id="2105464">.</span><span class="ident" id="2105465"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2105466">.</span><span class="ident" id="2105467"><a href="/gostd/math/big/int.go.html#2036181">Sign</a></span><span class="op" id="2105471">(</span><span class="op" id="2105472">)</span><br>
<span class="lineno"></span><span class="op" id="2105474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2105477">//&nbsp;IsInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;denominator&nbsp;of&nbsp;x&nbsp;is&nbsp;1.</span><br>
<span class="lineno">390</span><span class="keyword" id="2105529">func</span>&nbsp;<span class="op" id="2105534">(</span><span class="ident" id="2105535">x</span>&nbsp;<span class="op" id="2105537">*</span><span class="ident" id="2105538"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2105541">)</span>&nbsp;<span class="ident" id="2105543">IsInt</span><span class="op" id="2105548">(</span><span class="op" id="2105549">)</span>&nbsp;<span class="builtintype" id="2105551">bool</span>&nbsp;<span class="op" id="2105556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2105559">return</span>&nbsp;<span class="builtinfunc" id="2105566">len</span><span class="op" id="2105569">(</span><span class="ident" id="2105570"><a href="/gostd/math/big/rat.go.html#2105535">x</a></span><span class="op" id="2105571">.</span><span class="ident" id="2105572"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2105573">.</span><span class="ident" id="2105574"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2105577">)</span>&nbsp;<span class="op" id="2105579">==</span>&nbsp;<span class="num" id="2105582">0</span>&nbsp;<span class="op" id="2105584">||</span>&nbsp;<span class="ident" id="2105587"><a href="/gostd/math/big/rat.go.html#2105535">x</a></span><span class="op" id="2105588">.</span><span class="ident" id="2105589"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2105590">.</span><span class="ident" id="2105591"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2105594">.</span><span class="ident" id="2105595"><a href="/gostd/math/big/nat.go.html#2063929">cmp</a></span><span class="op" id="2105598">(</span><span class="ident" id="2105599"><a href="/gostd/math/big/nat.go.html#2062174">natOne</a></span><span class="op" id="2105605">)</span>&nbsp;<span class="op" id="2105607">==</span>&nbsp;<span class="num" id="2105610">0</span><br>
<span class="lineno"></span><span class="op" id="2105612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2105615">//&nbsp;Num&nbsp;returns&nbsp;the&nbsp;numerator&nbsp;of&nbsp;x;&nbsp;it&nbsp;may&nbsp;be&nbsp;&lt;=&nbsp;0.</span><br>
<span class="lineno">395</span><span class="comment" id="2105666">//&nbsp;The&nbsp;result&nbsp;is&nbsp;a&nbsp;reference&nbsp;to&nbsp;x&#39;s&nbsp;numerator;&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="2105716">//&nbsp;may&nbsp;change&nbsp;if&nbsp;a&nbsp;new&nbsp;value&nbsp;is&nbsp;assigned&nbsp;to&nbsp;x,&nbsp;and&nbsp;vice&nbsp;versa.</span><br>
<span class="lineno"></span><span class="comment" id="2105779">//&nbsp;The&nbsp;sign&nbsp;of&nbsp;the&nbsp;numerator&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;sign&nbsp;of&nbsp;x.</span><br>
<span class="lineno"></span><span class="keyword" id="2105838">func</span>&nbsp;<span class="op" id="2105843">(</span><span class="ident" id="2105844">x</span>&nbsp;<span class="op" id="2105846">*</span><span class="ident" id="2105847"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2105850">)</span>&nbsp;<span class="ident" id="2105852">Num</span><span class="op" id="2105855">(</span><span class="op" id="2105856">)</span>&nbsp;<span class="op" id="2105858">*</span><span class="ident" id="2105859"><a href="/gostd/math/big/int.go.html#2035985">Int</a></span>&nbsp;<span class="op" id="2105863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2105866">return</span>&nbsp;<span class="op" id="2105873">&amp;</span><span class="ident" id="2105874"><a href="/gostd/math/big/rat.go.html#2105844">x</a></span><span class="op" id="2105875">.</span><span class="ident" id="2105876"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><br>
<span class="lineno">400</span><span class="op" id="2105878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2105881">//&nbsp;Denom&nbsp;returns&nbsp;the&nbsp;denominator&nbsp;of&nbsp;x;&nbsp;it&nbsp;is&nbsp;always&nbsp;&gt;&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2105938">//&nbsp;The&nbsp;result&nbsp;is&nbsp;a&nbsp;reference&nbsp;to&nbsp;x&#39;s&nbsp;denominator;&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="2105990">//&nbsp;may&nbsp;change&nbsp;if&nbsp;a&nbsp;new&nbsp;value&nbsp;is&nbsp;assigned&nbsp;to&nbsp;x,&nbsp;and&nbsp;vice&nbsp;versa.</span><br>
<span class="lineno">405</span><span class="keyword" id="2106053">func</span>&nbsp;<span class="op" id="2106058">(</span><span class="ident" id="2106059">x</span>&nbsp;<span class="op" id="2106061">*</span><span class="ident" id="2106062"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2106065">)</span>&nbsp;<span class="ident" id="2106067">Denom</span><span class="op" id="2106072">(</span><span class="op" id="2106073">)</span>&nbsp;<span class="op" id="2106075">*</span><span class="ident" id="2106076"><a href="/gostd/math/big/int.go.html#2035985">Int</a></span>&nbsp;<span class="op" id="2106080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2106083"><a href="/gostd/math/big/rat.go.html#2106059">x</a></span><span class="op" id="2106084">.</span><span class="ident" id="2106085"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106086">.</span><span class="ident" id="2106087"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2106091">=</span>&nbsp;<span class="builtintype" id="2106093">false</span>&nbsp;<span class="comment" id="2106099">//&nbsp;the&nbsp;result&nbsp;is&nbsp;always&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2106129">if</span>&nbsp;<span class="builtinfunc" id="2106132">len</span><span class="op" id="2106135">(</span><span class="ident" id="2106136"><a href="/gostd/math/big/rat.go.html#2106059">x</a></span><span class="op" id="2106137">.</span><span class="ident" id="2106138"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106139">.</span><span class="ident" id="2106140"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106143">)</span>&nbsp;<span class="op" id="2106145">==</span>&nbsp;<span class="num" id="2106148">0</span>&nbsp;<span class="op" id="2106150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2106154"><a href="/gostd/math/big/rat.go.html#2106059">x</a></span><span class="op" id="2106155">.</span><span class="ident" id="2106156"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106157">.</span><span class="ident" id="2106158"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2106162">=</span>&nbsp;<span class="ident" id="2106164"><a href="/gostd/math/big/rat.go.html#2106059">x</a></span><span class="op" id="2106165">.</span><span class="ident" id="2106166"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106167">.</span><span class="ident" id="2106168"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106171">.</span><span class="ident" id="2106172"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2106175">(</span><span class="ident" id="2106176"><a href="/gostd/math/big/nat.go.html#2062174">natOne</a></span><span class="op" id="2106182">)</span>&nbsp;<span class="comment" id="2106184">//&nbsp;materialize&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106212">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2106215">return</span>&nbsp;<span class="op" id="2106222">&amp;</span><span class="ident" id="2106223"><a href="/gostd/math/big/rat.go.html#2106059">x</a></span><span class="op" id="2106224">.</span><span class="ident" id="2106225"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><br>
<span class="lineno"></span><span class="op" id="2106227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2106230">func</span>&nbsp;<span class="op" id="2106235">(</span><span class="ident" id="2106236">z</span>&nbsp;<span class="op" id="2106238">*</span><span class="ident" id="2106239"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2106242">)</span>&nbsp;<span class="ident" id="2106244">norm</span><span class="op" id="2106248">(</span><span class="op" id="2106249">)</span>&nbsp;<span class="op" id="2106251">*</span><span class="ident" id="2106252"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2106256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2106259">switch</span>&nbsp;<span class="op" id="2106266">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2106269">case</span>&nbsp;<span class="builtinfunc" id="2106274">len</span><span class="op" id="2106277">(</span><span class="ident" id="2106278"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106279">.</span><span class="ident" id="2106280"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2106281">.</span><span class="ident" id="2106282"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106285">)</span>&nbsp;<span class="op" id="2106287">==</span>&nbsp;<span class="num" id="2106290">0</span><span class="op" id="2106291">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106295">//&nbsp;z&nbsp;==&nbsp;0&nbsp;-&nbsp;normalize&nbsp;sign&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2106340"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106341">.</span><span class="ident" id="2106342"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2106343">.</span><span class="ident" id="2106344"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2106348">=</span>&nbsp;<span class="builtintype" id="2106350">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2106358"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106359">.</span><span class="ident" id="2106360"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106361">.</span><span class="ident" id="2106362"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2106366">=</span>&nbsp;<span class="ident" id="2106368"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106369">.</span><span class="ident" id="2106370"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106371">.</span><span class="ident" id="2106372"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106375">.</span><span class="builtinfunc" id="2106376"><a href="/gostd/math/big/nat.go.html#2062395">make</a></span><span class="op" id="2106380">(</span><span class="num" id="2106381">0</span><span class="op" id="2106382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2106385">case</span>&nbsp;<span class="builtinfunc" id="2106390">len</span><span class="op" id="2106393">(</span><span class="ident" id="2106394"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106395">.</span><span class="ident" id="2106396"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106397">.</span><span class="ident" id="2106398"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106401">)</span>&nbsp;<span class="op" id="2106403">==</span>&nbsp;<span class="num" id="2106406">0</span><span class="op" id="2106407">:</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106411">//&nbsp;z&nbsp;is&nbsp;normalized&nbsp;int&nbsp;-&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2106451">case</span>&nbsp;<span class="ident" id="2106456"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106457">.</span><span class="ident" id="2106458"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106459">.</span><span class="ident" id="2106460"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106463">.</span><span class="ident" id="2106464"><a href="/gostd/math/big/nat.go.html#2063929">cmp</a></span><span class="op" id="2106467">(</span><span class="ident" id="2106468"><a href="/gostd/math/big/nat.go.html#2062174">natOne</a></span><span class="op" id="2106474">)</span>&nbsp;<span class="op" id="2106476">==</span>&nbsp;<span class="num" id="2106479">0</span><span class="op" id="2106480">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106484">//&nbsp;z&nbsp;is&nbsp;int&nbsp;-&nbsp;normalize&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2106522"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106523">.</span><span class="ident" id="2106524"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106525">.</span><span class="ident" id="2106526"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2106530">=</span>&nbsp;<span class="ident" id="2106532"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106533">.</span><span class="ident" id="2106534"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106535">.</span><span class="ident" id="2106536"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106539">.</span><span class="builtinfunc" id="2106540"><a href="/gostd/math/big/nat.go.html#2062395">make</a></span><span class="op" id="2106544">(</span><span class="num" id="2106545">0</span><span class="op" id="2106546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2106549">default</span><span class="op" id="2106556">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2106560">neg</span>&nbsp;<span class="op" id="2106564">:=</span>&nbsp;<span class="ident" id="2106567"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106568">.</span><span class="ident" id="2106569"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2106570">.</span><span class="ident" id="2106571"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2106577"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106578">.</span><span class="ident" id="2106579"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2106580">.</span><span class="ident" id="2106581"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2106585">=</span>&nbsp;<span class="builtintype" id="2106587">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2106595"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106596">.</span><span class="ident" id="2106597"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106598">.</span><span class="ident" id="2106599"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2106603">=</span>&nbsp;<span class="builtintype" id="2106605">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2106613">if</span>&nbsp;<span class="ident" id="2106616">f</span>&nbsp;<span class="op" id="2106618">:=</span>&nbsp;<span class="ident" id="2106621"><a href="/gostd/math/big/int.go.html#2036655">NewInt</a></span><span class="op" id="2106627">(</span><span class="num" id="2106628">0</span><span class="op" id="2106629">)</span><span class="op" id="2106630">.</span><span class="ident" id="2106631"><a href="/gostd/math/big/int.go.html#2052277">binaryGCD</a></span><span class="op" id="2106640">(</span><span class="op" id="2106641">&amp;</span><span class="ident" id="2106642"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106643">.</span><span class="ident" id="2106644"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2106645">,</span>&nbsp;<span class="op" id="2106647">&amp;</span><span class="ident" id="2106648"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106649">.</span><span class="ident" id="2106650"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106651">)</span><span class="op" id="2106652">;</span>&nbsp;<span class="ident" id="2106654"><a href="/gostd/math/big/rat.go.html#2106616">f</a></span><span class="op" id="2106655">.</span><span class="ident" id="2106656"><a href="/gostd/math/big/int.go.html#2042946">Cmp</a></span><span class="op" id="2106659">(</span><span class="ident" id="2106660"><a href="/gostd/math/big/int.go.html#2036066">intOne</a></span><span class="op" id="2106666">)</span>&nbsp;<span class="op" id="2106668">!=</span>&nbsp;<span class="num" id="2106671">0</span>&nbsp;<span class="op" id="2106673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2106678"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106679">.</span><span class="ident" id="2106680"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2106681">.</span><span class="ident" id="2106682"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106685">,</span>&nbsp;<span class="ident" id="2106687">_</span>&nbsp;<span class="op" id="2106689">=</span>&nbsp;<span class="ident" id="2106691"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106692">.</span><span class="ident" id="2106693"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2106694">.</span><span class="ident" id="2106695"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106698">.</span><span class="ident" id="2106699"><a href="/gostd/math/big/nat.go.html#2071989">div</a></span><span class="op" id="2106702">(</span><span class="builtintype" id="2106703">nil</span><span class="op" id="2106706">,</span>&nbsp;<span class="ident" id="2106708"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106709">.</span><span class="ident" id="2106710"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2106711">.</span><span class="ident" id="2106712"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106715">,</span>&nbsp;<span class="ident" id="2106717"><a href="/gostd/math/big/rat.go.html#2106616">f</a></span><span class="op" id="2106718">.</span><span class="ident" id="2106719"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106722">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2106727"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106728">.</span><span class="ident" id="2106729"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106730">.</span><span class="ident" id="2106731"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106734">,</span>&nbsp;<span class="ident" id="2106736">_</span>&nbsp;<span class="op" id="2106738">=</span>&nbsp;<span class="ident" id="2106740"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106741">.</span><span class="ident" id="2106742"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106743">.</span><span class="ident" id="2106744"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106747">.</span><span class="ident" id="2106748"><a href="/gostd/math/big/nat.go.html#2071989">div</a></span><span class="op" id="2106751">(</span><span class="builtintype" id="2106752">nil</span><span class="op" id="2106755">,</span>&nbsp;<span class="ident" id="2106757"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106758">.</span><span class="ident" id="2106759"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106760">.</span><span class="ident" id="2106761"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106764">,</span>&nbsp;<span class="ident" id="2106766"><a href="/gostd/math/big/rat.go.html#2106616">f</a></span><span class="op" id="2106767">.</span><span class="ident" id="2106768"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2106776">if</span>&nbsp;<span class="ident" id="2106779"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106780">.</span><span class="ident" id="2106781"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106782">.</span><span class="ident" id="2106783"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106786">.</span><span class="ident" id="2106787"><a href="/gostd/math/big/nat.go.html#2063929">cmp</a></span><span class="op" id="2106790">(</span><span class="ident" id="2106791"><a href="/gostd/math/big/nat.go.html#2062174">natOne</a></span><span class="op" id="2106797">)</span>&nbsp;<span class="op" id="2106799">==</span>&nbsp;<span class="num" id="2106802">0</span>&nbsp;<span class="op" id="2106804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2106810">//&nbsp;z&nbsp;is&nbsp;int&nbsp;-&nbsp;normalize&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2106850"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106851">.</span><span class="ident" id="2106852"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106853">.</span><span class="ident" id="2106854"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2106858">=</span>&nbsp;<span class="ident" id="2106860"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106861">.</span><span class="ident" id="2106862"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2106863">.</span><span class="ident" id="2106864"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2106867">.</span><span class="builtinfunc" id="2106868"><a href="/gostd/math/big/nat.go.html#2062395">make</a></span><span class="op" id="2106872">(</span><span class="num" id="2106873">0</span><span class="op" id="2106874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106879">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2106887"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><span class="op" id="2106888">.</span><span class="ident" id="2106889"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2106890">.</span><span class="ident" id="2106891"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2106895">=</span>&nbsp;<span class="ident" id="2106897"><a href="/gostd/math/big/rat.go.html#2106560">neg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2106902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2106905">return</span>&nbsp;<span class="ident" id="2106912"><a href="/gostd/math/big/rat.go.html#2106236">z</a></span><br>
<span class="lineno"></span><span class="op" id="2106914">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2106917">//&nbsp;mulDenom&nbsp;sets&nbsp;z&nbsp;to&nbsp;the&nbsp;denominator&nbsp;product&nbsp;x*y&nbsp;(by&nbsp;taking&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2106983">//&nbsp;account&nbsp;that&nbsp;0&nbsp;values&nbsp;for&nbsp;x&nbsp;or&nbsp;y&nbsp;must&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;1)&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2107049">//&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2107063">func</span>&nbsp;<span class="ident" id="2107068">mulDenom</span><span class="op" id="2107076">(</span><span class="ident" id="2107077">z</span><span class="op" id="2107078">,</span>&nbsp;<span class="ident" id="2107080">x</span><span class="op" id="2107081">,</span>&nbsp;<span class="ident" id="2107083">y</span>&nbsp;<span class="ident" id="2107085"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2107088">)</span>&nbsp;<span class="ident" id="2107090"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span>&nbsp;<span class="op" id="2107094">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107097">switch</span>&nbsp;<span class="op" id="2107104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107107">case</span>&nbsp;<span class="builtinfunc" id="2107112">len</span><span class="op" id="2107115">(</span><span class="ident" id="2107116"><a href="/gostd/math/big/rat.go.html#2107080">x</a></span><span class="op" id="2107117">)</span>&nbsp;<span class="op" id="2107119">==</span>&nbsp;<span class="num" id="2107122">0</span><span class="op" id="2107123">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107127">return</span>&nbsp;<span class="ident" id="2107134"><a href="/gostd/math/big/rat.go.html#2107077">z</a></span><span class="op" id="2107135">.</span><span class="ident" id="2107136"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2107139">(</span><span class="ident" id="2107140"><a href="/gostd/math/big/rat.go.html#2107083">y</a></span><span class="op" id="2107141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107144">case</span>&nbsp;<span class="builtinfunc" id="2107149">len</span><span class="op" id="2107152">(</span><span class="ident" id="2107153"><a href="/gostd/math/big/rat.go.html#2107083">y</a></span><span class="op" id="2107154">)</span>&nbsp;<span class="op" id="2107156">==</span>&nbsp;<span class="num" id="2107159">0</span><span class="op" id="2107160">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107164">return</span>&nbsp;<span class="ident" id="2107171"><a href="/gostd/math/big/rat.go.html#2107077">z</a></span><span class="op" id="2107172">.</span><span class="ident" id="2107173"><a href="/gostd/math/big/nat.go.html#2063110">set</a></span><span class="op" id="2107176">(</span><span class="ident" id="2107177"><a href="/gostd/math/big/rat.go.html#2107080">x</a></span><span class="op" id="2107178">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107184">return</span>&nbsp;<span class="ident" id="2107191"><a href="/gostd/math/big/rat.go.html#2107077">z</a></span><span class="op" id="2107192">.</span><span class="ident" id="2107193"><a href="/gostd/math/big/nat.go.html#2069066">mul</a></span><span class="op" id="2107196">(</span><span class="ident" id="2107197"><a href="/gostd/math/big/rat.go.html#2107080">x</a></span><span class="op" id="2107198">,</span>&nbsp;<span class="ident" id="2107200"><a href="/gostd/math/big/rat.go.html#2107083">y</a></span><span class="op" id="2107201">)</span><br>
<span class="lineno"></span><span class="op" id="2107203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2107206">//&nbsp;scaleDenom&nbsp;computes&nbsp;x*f.</span><br>
<span class="lineno">455</span><span class="comment" id="2107234">//&nbsp;If&nbsp;f&nbsp;==&nbsp;0&nbsp;(zero&nbsp;value&nbsp;of&nbsp;denominator),&nbsp;the&nbsp;result&nbsp;is&nbsp;(a&nbsp;copy&nbsp;of)&nbsp;x.</span><br>
<span class="lineno"></span><span class="keyword" id="2107305">func</span>&nbsp;<span class="ident" id="2107310">scaleDenom</span><span class="op" id="2107320">(</span><span class="ident" id="2107321">x</span>&nbsp;<span class="op" id="2107323">*</span><span class="ident" id="2107324"><a href="/gostd/math/big/int.go.html#2035985">Int</a></span><span class="op" id="2107327">,</span>&nbsp;<span class="ident" id="2107329">f</span>&nbsp;<span class="ident" id="2107331"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2107334">)</span>&nbsp;<span class="op" id="2107336">*</span><span class="ident" id="2107337"><a href="/gostd/math/big/int.go.html#2035985">Int</a></span>&nbsp;<span class="op" id="2107341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107344">var</span>&nbsp;<span class="ident" id="2107348">z</span>&nbsp;<span class="ident" id="2107350"><a href="/gostd/math/big/int.go.html#2035985">Int</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107355">if</span>&nbsp;<span class="builtinfunc" id="2107358">len</span><span class="op" id="2107361">(</span><span class="ident" id="2107362"><a href="/gostd/math/big/rat.go.html#2107329">f</a></span><span class="op" id="2107363">)</span>&nbsp;<span class="op" id="2107365">==</span>&nbsp;<span class="num" id="2107368">0</span>&nbsp;<span class="op" id="2107370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107374">return</span>&nbsp;<span class="ident" id="2107381"><a href="/gostd/math/big/rat.go.html#2107348">z</a></span><span class="op" id="2107382">.</span><span class="ident" id="2107383"><a href="/gostd/math/big/int.go.html#2036758">Set</a></span><span class="op" id="2107386">(</span><span class="ident" id="2107387"><a href="/gostd/math/big/rat.go.html#2107321">x</a></span><span class="op" id="2107388">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2107391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2107394"><a href="/gostd/math/big/rat.go.html#2107348">z</a></span><span class="op" id="2107395">.</span><span class="ident" id="2107396"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2107400">=</span>&nbsp;<span class="ident" id="2107402"><a href="/gostd/math/big/rat.go.html#2107348">z</a></span><span class="op" id="2107403">.</span><span class="ident" id="2107404"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2107407">.</span><span class="ident" id="2107408"><a href="/gostd/math/big/nat.go.html#2069066">mul</a></span><span class="op" id="2107411">(</span><span class="ident" id="2107412"><a href="/gostd/math/big/rat.go.html#2107321">x</a></span><span class="op" id="2107413">.</span><span class="ident" id="2107414"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2107417">,</span>&nbsp;<span class="ident" id="2107419"><a href="/gostd/math/big/rat.go.html#2107329">f</a></span><span class="op" id="2107420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2107423"><a href="/gostd/math/big/rat.go.html#2107348">z</a></span><span class="op" id="2107424">.</span><span class="ident" id="2107425"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2107429">=</span>&nbsp;<span class="ident" id="2107431"><a href="/gostd/math/big/rat.go.html#2107321">x</a></span><span class="op" id="2107432">.</span><span class="ident" id="2107433"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107438">return</span>&nbsp;<span class="op" id="2107445">&amp;</span><span class="ident" id="2107446"><a href="/gostd/math/big/rat.go.html#2107348">z</a></span><br>
<span class="lineno"></span><span class="op" id="2107448">}</span><br>
<span class="lineno">465</span><br>
<span class="lineno"></span><span class="comment" id="2107451">//&nbsp;Cmp&nbsp;compares&nbsp;x&nbsp;and&nbsp;y&nbsp;and&nbsp;returns:</span><br>
<span class="lineno"></span><span class="comment" id="2107488">//</span><br>
<span class="lineno"></span><span class="comment" id="2107491">//&nbsp;&nbsp;&nbsp;-1&nbsp;if&nbsp;x&nbsp;&lt;&nbsp;&nbsp;y</span><br>
<span class="lineno"></span><span class="comment" id="2107509">//&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;if&nbsp;x&nbsp;==&nbsp;y</span><br>
<span class="lineno">470</span><span class="comment" id="2107527">//&nbsp;&nbsp;&nbsp;+1&nbsp;if&nbsp;x&nbsp;&gt;&nbsp;&nbsp;y</span><br>
<span class="lineno"></span><span class="comment" id="2107545">//</span><br>
<span class="lineno"></span><span class="keyword" id="2107548">func</span>&nbsp;<span class="op" id="2107553">(</span><span class="ident" id="2107554">x</span>&nbsp;<span class="op" id="2107556">*</span><span class="ident" id="2107557"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2107560">)</span>&nbsp;<span class="ident" id="2107562">Cmp</span><span class="op" id="2107565">(</span><span class="ident" id="2107566">y</span>&nbsp;<span class="op" id="2107568">*</span><span class="ident" id="2107569"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2107572">)</span>&nbsp;<span class="builtintype" id="2107574">int</span>&nbsp;<span class="op" id="2107578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107581">return</span>&nbsp;<span class="ident" id="2107588"><a href="/gostd/math/big/rat.go.html#2107310">scaleDenom</a></span><span class="op" id="2107598">(</span><span class="op" id="2107599">&amp;</span><span class="ident" id="2107600"><a href="/gostd/math/big/rat.go.html#2107554">x</a></span><span class="op" id="2107601">.</span><span class="ident" id="2107602"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2107603">,</span>&nbsp;<span class="ident" id="2107605"><a href="/gostd/math/big/rat.go.html#2107566">y</a></span><span class="op" id="2107606">.</span><span class="ident" id="2107607"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2107608">.</span><span class="ident" id="2107609"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2107612">)</span><span class="op" id="2107613">.</span><span class="ident" id="2107614"><a href="/gostd/math/big/int.go.html#2042946">Cmp</a></span><span class="op" id="2107617">(</span><span class="ident" id="2107618"><a href="/gostd/math/big/rat.go.html#2107310">scaleDenom</a></span><span class="op" id="2107628">(</span><span class="op" id="2107629">&amp;</span><span class="ident" id="2107630"><a href="/gostd/math/big/rat.go.html#2107566">y</a></span><span class="op" id="2107631">.</span><span class="ident" id="2107632"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2107633">,</span>&nbsp;<span class="ident" id="2107635"><a href="/gostd/math/big/rat.go.html#2107554">x</a></span><span class="op" id="2107636">.</span><span class="ident" id="2107637"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2107638">.</span><span class="ident" id="2107639"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2107642">)</span><span class="op" id="2107643">)</span><br>
<span class="lineno"></span><span class="op" id="2107645">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span><span class="comment" id="2107648">//&nbsp;Add&nbsp;sets&nbsp;z&nbsp;to&nbsp;the&nbsp;sum&nbsp;x+y&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2107692">func</span>&nbsp;<span class="op" id="2107697">(</span><span class="ident" id="2107698">z</span>&nbsp;<span class="op" id="2107700">*</span><span class="ident" id="2107701"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2107704">)</span>&nbsp;<span class="ident" id="2107706">Add</span><span class="op" id="2107709">(</span><span class="ident" id="2107710">x</span><span class="op" id="2107711">,</span>&nbsp;<span class="ident" id="2107713">y</span>&nbsp;<span class="op" id="2107715">*</span><span class="ident" id="2107716"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2107719">)</span>&nbsp;<span class="op" id="2107721">*</span><span class="ident" id="2107722"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2107726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2107729">a1</span>&nbsp;<span class="op" id="2107732">:=</span>&nbsp;<span class="ident" id="2107735"><a href="/gostd/math/big/rat.go.html#2107310">scaleDenom</a></span><span class="op" id="2107745">(</span><span class="op" id="2107746">&amp;</span><span class="ident" id="2107747"><a href="/gostd/math/big/rat.go.html#2107710">x</a></span><span class="op" id="2107748">.</span><span class="ident" id="2107749"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2107750">,</span>&nbsp;<span class="ident" id="2107752"><a href="/gostd/math/big/rat.go.html#2107713">y</a></span><span class="op" id="2107753">.</span><span class="ident" id="2107754"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2107755">.</span><span class="ident" id="2107756"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2107759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2107762">a2</span>&nbsp;<span class="op" id="2107765">:=</span>&nbsp;<span class="ident" id="2107768"><a href="/gostd/math/big/rat.go.html#2107310">scaleDenom</a></span><span class="op" id="2107778">(</span><span class="op" id="2107779">&amp;</span><span class="ident" id="2107780"><a href="/gostd/math/big/rat.go.html#2107713">y</a></span><span class="op" id="2107781">.</span><span class="ident" id="2107782"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2107783">,</span>&nbsp;<span class="ident" id="2107785"><a href="/gostd/math/big/rat.go.html#2107710">x</a></span><span class="op" id="2107786">.</span><span class="ident" id="2107787"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2107788">.</span><span class="ident" id="2107789"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2107792">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2107795"><a href="/gostd/math/big/rat.go.html#2107698">z</a></span><span class="op" id="2107796">.</span><span class="ident" id="2107797"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2107798">.</span><span class="ident" id="2107799"><a href="/gostd/math/big/int.go.html#2037987">Add</a></span><span class="op" id="2107802">(</span><span class="ident" id="2107803"><a href="/gostd/math/big/rat.go.html#2107729">a1</a></span><span class="op" id="2107805">,</span>&nbsp;<span class="ident" id="2107807"><a href="/gostd/math/big/rat.go.html#2107762">a2</a></span><span class="op" id="2107809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2107812"><a href="/gostd/math/big/rat.go.html#2107698">z</a></span><span class="op" id="2107813">.</span><span class="ident" id="2107814"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2107815">.</span><span class="ident" id="2107816"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2107820">=</span>&nbsp;<span class="ident" id="2107822"><a href="/gostd/math/big/rat.go.html#2107068">mulDenom</a></span><span class="op" id="2107830">(</span><span class="ident" id="2107831"><a href="/gostd/math/big/rat.go.html#2107698">z</a></span><span class="op" id="2107832">.</span><span class="ident" id="2107833"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2107834">.</span><span class="ident" id="2107835"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2107838">,</span>&nbsp;<span class="ident" id="2107840"><a href="/gostd/math/big/rat.go.html#2107710">x</a></span><span class="op" id="2107841">.</span><span class="ident" id="2107842"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2107843">.</span><span class="ident" id="2107844"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2107847">,</span>&nbsp;<span class="ident" id="2107849"><a href="/gostd/math/big/rat.go.html#2107713">y</a></span><span class="op" id="2107850">.</span><span class="ident" id="2107851"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2107852">.</span><span class="ident" id="2107853"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2107856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2107859">return</span>&nbsp;<span class="ident" id="2107866"><a href="/gostd/math/big/rat.go.html#2107698">z</a></span><span class="op" id="2107867">.</span><span class="ident" id="2107868"><a href="/gostd/math/big/rat.go.html#2106244">norm</a></span><span class="op" id="2107872">(</span><span class="op" id="2107873">)</span><br>
<span class="lineno"></span><span class="op" id="2107875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="comment" id="2107878">//&nbsp;Sub&nbsp;sets&nbsp;z&nbsp;to&nbsp;the&nbsp;difference&nbsp;x-y&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="keyword" id="2107929">func</span>&nbsp;<span class="op" id="2107934">(</span><span class="ident" id="2107935">z</span>&nbsp;<span class="op" id="2107937">*</span><span class="ident" id="2107938"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2107941">)</span>&nbsp;<span class="ident" id="2107943">Sub</span><span class="op" id="2107946">(</span><span class="ident" id="2107947">x</span><span class="op" id="2107948">,</span>&nbsp;<span class="ident" id="2107950">y</span>&nbsp;<span class="op" id="2107952">*</span><span class="ident" id="2107953"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2107956">)</span>&nbsp;<span class="op" id="2107958">*</span><span class="ident" id="2107959"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2107963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2107966">a1</span>&nbsp;<span class="op" id="2107969">:=</span>&nbsp;<span class="ident" id="2107972"><a href="/gostd/math/big/rat.go.html#2107310">scaleDenom</a></span><span class="op" id="2107982">(</span><span class="op" id="2107983">&amp;</span><span class="ident" id="2107984"><a href="/gostd/math/big/rat.go.html#2107947">x</a></span><span class="op" id="2107985">.</span><span class="ident" id="2107986"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2107987">,</span>&nbsp;<span class="ident" id="2107989"><a href="/gostd/math/big/rat.go.html#2107950">y</a></span><span class="op" id="2107990">.</span><span class="ident" id="2107991"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2107992">.</span><span class="ident" id="2107993"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2107996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2107999">a2</span>&nbsp;<span class="op" id="2108002">:=</span>&nbsp;<span class="ident" id="2108005"><a href="/gostd/math/big/rat.go.html#2107310">scaleDenom</a></span><span class="op" id="2108015">(</span><span class="op" id="2108016">&amp;</span><span class="ident" id="2108017"><a href="/gostd/math/big/rat.go.html#2107950">y</a></span><span class="op" id="2108018">.</span><span class="ident" id="2108019"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2108020">,</span>&nbsp;<span class="ident" id="2108022"><a href="/gostd/math/big/rat.go.html#2107947">x</a></span><span class="op" id="2108023">.</span><span class="ident" id="2108024"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2108025">.</span><span class="ident" id="2108026"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2108029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108032"><a href="/gostd/math/big/rat.go.html#2107935">z</a></span><span class="op" id="2108033">.</span><span class="ident" id="2108034"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2108035">.</span><span class="ident" id="2108036"><a href="/gostd/math/big/int.go.html#2038464">Sub</a></span><span class="op" id="2108039">(</span><span class="ident" id="2108040"><a href="/gostd/math/big/rat.go.html#2107966">a1</a></span><span class="op" id="2108042">,</span>&nbsp;<span class="ident" id="2108044"><a href="/gostd/math/big/rat.go.html#2107999">a2</a></span><span class="op" id="2108046">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108049"><a href="/gostd/math/big/rat.go.html#2107935">z</a></span><span class="op" id="2108050">.</span><span class="ident" id="2108051"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2108052">.</span><span class="ident" id="2108053"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2108057">=</span>&nbsp;<span class="ident" id="2108059"><a href="/gostd/math/big/rat.go.html#2107068">mulDenom</a></span><span class="op" id="2108067">(</span><span class="ident" id="2108068"><a href="/gostd/math/big/rat.go.html#2107935">z</a></span><span class="op" id="2108069">.</span><span class="ident" id="2108070"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2108071">.</span><span class="ident" id="2108072"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2108075">,</span>&nbsp;<span class="ident" id="2108077"><a href="/gostd/math/big/rat.go.html#2107947">x</a></span><span class="op" id="2108078">.</span><span class="ident" id="2108079"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2108080">.</span><span class="ident" id="2108081"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2108084">,</span>&nbsp;<span class="ident" id="2108086"><a href="/gostd/math/big/rat.go.html#2107950">y</a></span><span class="op" id="2108087">.</span><span class="ident" id="2108088"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2108089">.</span><span class="ident" id="2108090"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2108093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108096">return</span>&nbsp;<span class="ident" id="2108103"><a href="/gostd/math/big/rat.go.html#2107935">z</a></span><span class="op" id="2108104">.</span><span class="ident" id="2108105"><a href="/gostd/math/big/rat.go.html#2106244">norm</a></span><span class="op" id="2108109">(</span><span class="op" id="2108110">)</span><br>
<span class="lineno"></span><span class="op" id="2108112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2108115">//&nbsp;Mul&nbsp;sets&nbsp;z&nbsp;to&nbsp;the&nbsp;product&nbsp;x*y&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno">495</span><span class="keyword" id="2108163">func</span>&nbsp;<span class="op" id="2108168">(</span><span class="ident" id="2108169">z</span>&nbsp;<span class="op" id="2108171">*</span><span class="ident" id="2108172"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2108175">)</span>&nbsp;<span class="ident" id="2108177">Mul</span><span class="op" id="2108180">(</span><span class="ident" id="2108181">x</span><span class="op" id="2108182">,</span>&nbsp;<span class="ident" id="2108184">y</span>&nbsp;<span class="op" id="2108186">*</span><span class="ident" id="2108187"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2108190">)</span>&nbsp;<span class="op" id="2108192">*</span><span class="ident" id="2108193"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2108197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108200"><a href="/gostd/math/big/rat.go.html#2108169">z</a></span><span class="op" id="2108201">.</span><span class="ident" id="2108202"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2108203">.</span><span class="ident" id="2108204"><a href="/gostd/math/big/int.go.html#2038938">Mul</a></span><span class="op" id="2108207">(</span><span class="op" id="2108208">&amp;</span><span class="ident" id="2108209"><a href="/gostd/math/big/rat.go.html#2108181">x</a></span><span class="op" id="2108210">.</span><span class="ident" id="2108211"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2108212">,</span>&nbsp;<span class="op" id="2108214">&amp;</span><span class="ident" id="2108215"><a href="/gostd/math/big/rat.go.html#2108184">y</a></span><span class="op" id="2108216">.</span><span class="ident" id="2108217"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2108218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108221"><a href="/gostd/math/big/rat.go.html#2108169">z</a></span><span class="op" id="2108222">.</span><span class="ident" id="2108223"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2108224">.</span><span class="ident" id="2108225"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2108229">=</span>&nbsp;<span class="ident" id="2108231"><a href="/gostd/math/big/rat.go.html#2107068">mulDenom</a></span><span class="op" id="2108239">(</span><span class="ident" id="2108240"><a href="/gostd/math/big/rat.go.html#2108169">z</a></span><span class="op" id="2108241">.</span><span class="ident" id="2108242"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2108243">.</span><span class="ident" id="2108244"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2108247">,</span>&nbsp;<span class="ident" id="2108249"><a href="/gostd/math/big/rat.go.html#2108181">x</a></span><span class="op" id="2108250">.</span><span class="ident" id="2108251"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2108252">.</span><span class="ident" id="2108253"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2108256">,</span>&nbsp;<span class="ident" id="2108258"><a href="/gostd/math/big/rat.go.html#2108184">y</a></span><span class="op" id="2108259">.</span><span class="ident" id="2108260"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2108261">.</span><span class="ident" id="2108262"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2108265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108268">return</span>&nbsp;<span class="ident" id="2108275"><a href="/gostd/math/big/rat.go.html#2108169">z</a></span><span class="op" id="2108276">.</span><span class="ident" id="2108277"><a href="/gostd/math/big/rat.go.html#2106244">norm</a></span><span class="op" id="2108281">(</span><span class="op" id="2108282">)</span><br>
<span class="lineno"></span><span class="op" id="2108284">}</span><br>
<span class="lineno">500</span><br>
<span class="lineno"></span><span class="comment" id="2108287">//&nbsp;Quo&nbsp;sets&nbsp;z&nbsp;to&nbsp;the&nbsp;quotient&nbsp;x/y&nbsp;and&nbsp;returns&nbsp;z.</span><br>
<span class="lineno"></span><span class="comment" id="2108336">//&nbsp;If&nbsp;y&nbsp;==&nbsp;0,&nbsp;a&nbsp;division-by-zero&nbsp;run-time&nbsp;panic&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2108392">func</span>&nbsp;<span class="op" id="2108397">(</span><span class="ident" id="2108398">z</span>&nbsp;<span class="op" id="2108400">*</span><span class="ident" id="2108401"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2108404">)</span>&nbsp;<span class="ident" id="2108406">Quo</span><span class="op" id="2108409">(</span><span class="ident" id="2108410">x</span><span class="op" id="2108411">,</span>&nbsp;<span class="ident" id="2108413">y</span>&nbsp;<span class="op" id="2108415">*</span><span class="ident" id="2108416"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2108419">)</span>&nbsp;<span class="op" id="2108421">*</span><span class="ident" id="2108422"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span>&nbsp;<span class="op" id="2108426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108429">if</span>&nbsp;<span class="builtinfunc" id="2108432">len</span><span class="op" id="2108435">(</span><span class="ident" id="2108436"><a href="/gostd/math/big/rat.go.html#2108413">y</a></span><span class="op" id="2108437">.</span><span class="ident" id="2108438"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2108439">.</span><span class="ident" id="2108440"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2108443">)</span>&nbsp;<span class="op" id="2108445">==</span>&nbsp;<span class="num" id="2108448">0</span>&nbsp;<span class="op" id="2108450">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2108454">panic</span><span class="op" id="2108459">(</span><span class="string" id="2108460">&#34;division&nbsp;by&nbsp;zero&#34;</span><span class="op" id="2108478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2108481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108484">a</span>&nbsp;<span class="op" id="2108486">:=</span>&nbsp;<span class="ident" id="2108489"><a href="/gostd/math/big/rat.go.html#2107310">scaleDenom</a></span><span class="op" id="2108499">(</span><span class="op" id="2108500">&amp;</span><span class="ident" id="2108501"><a href="/gostd/math/big/rat.go.html#2108410">x</a></span><span class="op" id="2108502">.</span><span class="ident" id="2108503"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2108504">,</span>&nbsp;<span class="ident" id="2108506"><a href="/gostd/math/big/rat.go.html#2108413">y</a></span><span class="op" id="2108507">.</span><span class="ident" id="2108508"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2108509">.</span><span class="ident" id="2108510"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2108513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108516">b</span>&nbsp;<span class="op" id="2108518">:=</span>&nbsp;<span class="ident" id="2108521"><a href="/gostd/math/big/rat.go.html#2107310">scaleDenom</a></span><span class="op" id="2108531">(</span><span class="op" id="2108532">&amp;</span><span class="ident" id="2108533"><a href="/gostd/math/big/rat.go.html#2108413">y</a></span><span class="op" id="2108534">.</span><span class="ident" id="2108535"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2108536">,</span>&nbsp;<span class="ident" id="2108538"><a href="/gostd/math/big/rat.go.html#2108410">x</a></span><span class="op" id="2108539">.</span><span class="ident" id="2108540"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2108541">.</span><span class="ident" id="2108542"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2108545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108548"><a href="/gostd/math/big/rat.go.html#2108398">z</a></span><span class="op" id="2108549">.</span><span class="ident" id="2108550"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2108551">.</span><span class="ident" id="2108552"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2108556">=</span>&nbsp;<span class="ident" id="2108558"><a href="/gostd/math/big/rat.go.html#2108484">a</a></span><span class="op" id="2108559">.</span><span class="ident" id="2108560"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108565"><a href="/gostd/math/big/rat.go.html#2108398">z</a></span><span class="op" id="2108566">.</span><span class="ident" id="2108567"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2108568">.</span><span class="ident" id="2108569"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2108573">=</span>&nbsp;<span class="ident" id="2108575"><a href="/gostd/math/big/rat.go.html#2108516">b</a></span><span class="op" id="2108576">.</span><span class="ident" id="2108577"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108582"><a href="/gostd/math/big/rat.go.html#2108398">z</a></span><span class="op" id="2108583">.</span><span class="ident" id="2108584"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2108585">.</span><span class="ident" id="2108586"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2108590">=</span>&nbsp;<span class="ident" id="2108592"><a href="/gostd/math/big/rat.go.html#2108484">a</a></span><span class="op" id="2108593">.</span><span class="ident" id="2108594"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2108598">!=</span>&nbsp;<span class="ident" id="2108601"><a href="/gostd/math/big/rat.go.html#2108516">b</a></span><span class="op" id="2108602">.</span><span class="ident" id="2108603"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108608">return</span>&nbsp;<span class="ident" id="2108615"><a href="/gostd/math/big/rat.go.html#2108398">z</a></span><span class="op" id="2108616">.</span><span class="ident" id="2108617"><a href="/gostd/math/big/rat.go.html#2106244">norm</a></span><span class="op" id="2108621">(</span><span class="op" id="2108622">)</span><br>
<span class="lineno"></span><span class="op" id="2108624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="keyword" id="2108627">func</span>&nbsp;<span class="ident" id="2108632">ratTok</span><span class="op" id="2108638">(</span><span class="ident" id="2108639">ch</span>&nbsp;<span class="builtintype" id="2108642">rune</span><span class="op" id="2108646">)</span>&nbsp;<span class="builtintype" id="2108648">bool</span>&nbsp;<span class="op" id="2108653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108656">return</span>&nbsp;<span class="ident" id="2108663"><a href="/gostd/math/big/rat.go.html#2096119">strings</a></span><span class="op" id="2108670">.</span><span class="ident" id="2108671"><a href="/gostd/strings/strings.go.html#2970424">IndexRune</a></span><span class="op" id="2108680">(</span><span class="string" id="2108681">&#34;+-/0123456789.eE&#34;</span><span class="op" id="2108699">,</span>&nbsp;<span class="ident" id="2108701"><a href="/gostd/math/big/rat.go.html#2108639">ch</a></span><span class="op" id="2108703">)</span>&nbsp;<span class="op" id="2108705">&gt;=</span>&nbsp;<span class="num" id="2108708">0</span><br>
<span class="lineno"></span><span class="op" id="2108710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2108713">//&nbsp;Scan&nbsp;is&nbsp;a&nbsp;support&nbsp;routine&nbsp;for&nbsp;fmt.Scanner.&nbsp;It&nbsp;accepts&nbsp;the&nbsp;formats</span><br>
<span class="lineno">520</span><span class="comment" id="2108782">//&nbsp;&#39;e&#39;,&nbsp;&#39;E&#39;,&nbsp;&#39;f&#39;,&nbsp;&#39;F&#39;,&nbsp;&#39;g&#39;,&nbsp;&#39;G&#39;,&nbsp;and&nbsp;&#39;v&#39;.&nbsp;All&nbsp;formats&nbsp;are&nbsp;equivalent.</span><br>
<span class="lineno"></span><span class="keyword" id="2108852">func</span>&nbsp;<span class="op" id="2108857">(</span><span class="ident" id="2108858">z</span>&nbsp;<span class="op" id="2108860">*</span><span class="ident" id="2108861"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2108864">)</span>&nbsp;<span class="ident" id="2108866">Scan</span><span class="op" id="2108870">(</span><span class="ident" id="2108871">s</span>&nbsp;<span class="ident" id="2108873"><a href="/gostd/math/big/rat.go.html#2096104">fmt</a></span><span class="op" id="2108876">.</span><span class="ident" id="2108877"><a href="/gostd/fmt/scan.go.html#2169296">ScanState</a></span><span class="op" id="2108886">,</span>&nbsp;<span class="ident" id="2108888">ch</span>&nbsp;<span class="builtintype" id="2108891">rune</span><span class="op" id="2108895">)</span>&nbsp;<span class="builtintype" id="2108897">error</span>&nbsp;<span class="op" id="2108903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2108906">tok</span><span class="op" id="2108909">,</span>&nbsp;<span class="ident" id="2108911">err</span>&nbsp;<span class="op" id="2108915">:=</span>&nbsp;<span class="ident" id="2108918"><a href="/gostd/math/big/rat.go.html#2108871">s</a></span><span class="op" id="2108919">.</span><span class="ident" id="2108920"><a href="/gostd/fmt/scan.go.html#2170439">Token</a></span><span class="op" id="2108925">(</span><span class="builtintype" id="2108926">true</span><span class="op" id="2108930">,</span>&nbsp;<span class="ident" id="2108932"><a href="/gostd/math/big/rat.go.html#2108632">ratTok</a></span><span class="op" id="2108938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108941">if</span>&nbsp;<span class="ident" id="2108944"><a href="/gostd/math/big/rat.go.html#2108911">err</a></span>&nbsp;<span class="op" id="2108948">!=</span>&nbsp;<span class="builtintype" id="2108951">nil</span>&nbsp;<span class="op" id="2108955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108959">return</span>&nbsp;<span class="ident" id="2108966"><a href="/gostd/math/big/rat.go.html#2108911">err</a></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2108971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2108974">if</span>&nbsp;<span class="ident" id="2108977"><a href="/gostd/math/big/rat.go.html#2096119">strings</a></span><span class="op" id="2108984">.</span><span class="ident" id="2108985"><a href="/gostd/strings/strings.go.html#2970424">IndexRune</a></span><span class="op" id="2108994">(</span><span class="string" id="2108995">&#34;efgEFGv&#34;</span><span class="op" id="2109004">,</span>&nbsp;<span class="ident" id="2109006"><a href="/gostd/math/big/rat.go.html#2108888">ch</a></span><span class="op" id="2109008">)</span>&nbsp;<span class="op" id="2109010">&lt;</span>&nbsp;<span class="num" id="2109012">0</span>&nbsp;<span class="op" id="2109014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109018">return</span>&nbsp;<span class="ident" id="2109025"><a href="/gostd/math/big/rat.go.html#2096094">errors</a></span><span class="op" id="2109031">.</span><span class="ident" id="2109032"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="2109035">(</span><span class="string" id="2109036">&#34;Rat.Scan:&nbsp;invalid&nbsp;verb&#34;</span><span class="op" id="2109060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109066">if</span>&nbsp;<span class="ident" id="2109069">_</span><span class="op" id="2109070">,</span>&nbsp;<span class="ident" id="2109072">ok</span>&nbsp;<span class="op" id="2109075">:=</span>&nbsp;<span class="ident" id="2109078"><a href="/gostd/math/big/rat.go.html#2108858">z</a></span><span class="op" id="2109079">.</span><span class="ident" id="2109080"><a href="/gostd/math/big/rat.go.html#2109470">SetString</a></span><span class="op" id="2109089">(</span><span class="builtintype" id="2109090">string</span><span class="op" id="2109096">(</span><span class="ident" id="2109097"><a href="/gostd/math/big/rat.go.html#2108906">tok</a></span><span class="op" id="2109100">)</span><span class="op" id="2109101">)</span><span class="op" id="2109102">;</span>&nbsp;<span class="op" id="2109104">!</span><span class="ident" id="2109105"><a href="/gostd/math/big/rat.go.html#2109072">ok</a></span>&nbsp;<span class="op" id="2109108">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109112">return</span>&nbsp;<span class="ident" id="2109119"><a href="/gostd/math/big/rat.go.html#2096094">errors</a></span><span class="op" id="2109125">.</span><span class="ident" id="2109126"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="2109129">(</span><span class="string" id="2109130">&#34;Rat.Scan:&nbsp;invalid&nbsp;syntax&#34;</span><span class="op" id="2109156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109162">return</span>&nbsp;<span class="builtintype" id="2109169">nil</span><br>
<span class="lineno"></span><span class="op" id="2109173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="2109176">//&nbsp;SetString&nbsp;sets&nbsp;z&nbsp;to&nbsp;the&nbsp;value&nbsp;of&nbsp;s&nbsp;and&nbsp;returns&nbsp;z&nbsp;and&nbsp;a&nbsp;boolean&nbsp;indicating</span><br>
<span class="lineno"></span><span class="comment" id="2109253">//&nbsp;success.&nbsp;s&nbsp;can&nbsp;be&nbsp;given&nbsp;as&nbsp;a&nbsp;fraction&nbsp;&#34;a/b&#34;&nbsp;or&nbsp;as&nbsp;a&nbsp;floating-point&nbsp;number</span><br>
<span class="lineno"></span><span class="comment" id="2109330">//&nbsp;optionally&nbsp;followed&nbsp;by&nbsp;an&nbsp;exponent.&nbsp;If&nbsp;the&nbsp;operation&nbsp;failed,&nbsp;the&nbsp;value&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2109407">//&nbsp;z&nbsp;is&nbsp;undefined&nbsp;but&nbsp;the&nbsp;returned&nbsp;value&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2109456">func</span>&nbsp;<span class="op" id="2109461">(</span><span class="ident" id="2109462">z</span>&nbsp;<span class="op" id="2109464">*</span><span class="ident" id="2109465"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2109468">)</span>&nbsp;<span class="ident" id="2109470">SetString</span><span class="op" id="2109479">(</span><span class="ident" id="2109480">s</span>&nbsp;<span class="builtintype" id="2109482">string</span><span class="op" id="2109488">)</span>&nbsp;<span class="op" id="2109490">(</span><span class="op" id="2109491">*</span><span class="ident" id="2109492"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2109495">,</span>&nbsp;<span class="builtintype" id="2109497">bool</span><span class="op" id="2109501">)</span>&nbsp;<span class="op" id="2109503">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109506">if</span>&nbsp;<span class="builtinfunc" id="2109509">len</span><span class="op" id="2109512">(</span><span class="ident" id="2109513"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2109514">)</span>&nbsp;<span class="op" id="2109516">==</span>&nbsp;<span class="num" id="2109519">0</span>&nbsp;<span class="op" id="2109521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109525">return</span>&nbsp;<span class="builtintype" id="2109532">nil</span><span class="op" id="2109535">,</span>&nbsp;<span class="builtintype" id="2109537">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2109548">//&nbsp;check&nbsp;for&nbsp;a&nbsp;quotient</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2109573">sep</span>&nbsp;<span class="op" id="2109577">:=</span>&nbsp;<span class="ident" id="2109580"><a href="/gostd/math/big/rat.go.html#2096119">strings</a></span><span class="op" id="2109587">.</span><span class="ident" id="2109588"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="2109593">(</span><span class="ident" id="2109594"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2109595">,</span>&nbsp;<span class="string" id="2109597">&#34;/&#34;</span><span class="op" id="2109600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109603">if</span>&nbsp;<span class="ident" id="2109606"><a href="/gostd/math/big/rat.go.html#2109573">sep</a></span>&nbsp;<span class="op" id="2109610">&gt;=</span>&nbsp;<span class="num" id="2109613">0</span>&nbsp;<span class="op" id="2109615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109619">if</span>&nbsp;<span class="ident" id="2109622">_</span><span class="op" id="2109623">,</span>&nbsp;<span class="ident" id="2109625">ok</span>&nbsp;<span class="op" id="2109628">:=</span>&nbsp;<span class="ident" id="2109631"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2109632">.</span><span class="ident" id="2109633"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2109634">.</span><span class="ident" id="2109635"><a href="/gostd/math/big/int.go.html#2049625">SetString</a></span><span class="op" id="2109644">(</span><span class="ident" id="2109645"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2109646">[</span><span class="num" id="2109647">0</span><span class="op" id="2109648">:</span><span class="ident" id="2109649"><a href="/gostd/math/big/rat.go.html#2109573">sep</a></span><span class="op" id="2109652">]</span><span class="op" id="2109653">,</span>&nbsp;<span class="num" id="2109655">10</span><span class="op" id="2109657">)</span><span class="op" id="2109658">;</span>&nbsp;<span class="op" id="2109660">!</span><span class="ident" id="2109661"><a href="/gostd/math/big/rat.go.html#2109625">ok</a></span>&nbsp;<span class="op" id="2109664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109669">return</span>&nbsp;<span class="builtintype" id="2109676">nil</span><span class="op" id="2109679">,</span>&nbsp;<span class="builtintype" id="2109681">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109689">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2109693"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span>&nbsp;<span class="op" id="2109695">=</span>&nbsp;<span class="ident" id="2109697"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2109698">[</span><span class="ident" id="2109699"><a href="/gostd/math/big/rat.go.html#2109573">sep</a></span><span class="op" id="2109702">+</span><span class="num" id="2109703">1</span><span class="op" id="2109704">:</span><span class="op" id="2109705">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109709">var</span>&nbsp;<span class="ident" id="2109713">err</span>&nbsp;<span class="builtintype" id="2109717">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109725">if</span>&nbsp;<span class="ident" id="2109728"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2109729">.</span><span class="ident" id="2109730"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2109731">.</span><span class="ident" id="2109732"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2109735">,</span>&nbsp;<span class="ident" id="2109737">_</span><span class="op" id="2109738">,</span>&nbsp;<span class="ident" id="2109740"><a href="/gostd/math/big/rat.go.html#2109713">err</a></span>&nbsp;<span class="op" id="2109744">=</span>&nbsp;<span class="ident" id="2109746"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2109747">.</span><span class="ident" id="2109748"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2109749">.</span><span class="ident" id="2109750"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2109753">.</span><span class="ident" id="2109754"><a href="/gostd/math/big/nat.go.html#2075193">scan</a></span><span class="op" id="2109758">(</span><span class="ident" id="2109759"><a href="/gostd/math/big/rat.go.html#2096119">strings</a></span><span class="op" id="2109766">.</span><span class="ident" id="2109767"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="2109776">(</span><span class="ident" id="2109777"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2109778">)</span><span class="op" id="2109779">,</span>&nbsp;<span class="num" id="2109781">10</span><span class="op" id="2109783">)</span><span class="op" id="2109784">;</span>&nbsp;<span class="ident" id="2109786"><a href="/gostd/math/big/rat.go.html#2109713">err</a></span>&nbsp;<span class="op" id="2109790">!=</span>&nbsp;<span class="builtintype" id="2109793">nil</span>&nbsp;<span class="op" id="2109797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109802">return</span>&nbsp;<span class="builtintype" id="2109809">nil</span><span class="op" id="2109812">,</span>&nbsp;<span class="builtintype" id="2109814">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109822">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109826">if</span>&nbsp;<span class="builtinfunc" id="2109829">len</span><span class="op" id="2109832">(</span><span class="ident" id="2109833"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2109834">.</span><span class="ident" id="2109835"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2109836">.</span><span class="ident" id="2109837"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2109840">)</span>&nbsp;<span class="op" id="2109842">==</span>&nbsp;<span class="num" id="2109845">0</span>&nbsp;<span class="op" id="2109847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109852">return</span>&nbsp;<span class="builtintype" id="2109859">nil</span><span class="op" id="2109862">,</span>&nbsp;<span class="builtintype" id="2109864">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2109876">return</span>&nbsp;<span class="ident" id="2109883"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2109884">.</span><span class="ident" id="2109885"><a href="/gostd/math/big/rat.go.html#2106244">norm</a></span><span class="op" id="2109889">(</span><span class="op" id="2109890">)</span><span class="op" id="2109891">,</span>&nbsp;<span class="builtintype" id="2109893">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2109899">}</span><br>
<span class="lineno">560</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2109903">//&nbsp;check&nbsp;for&nbsp;a&nbsp;decimal&nbsp;point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2109933"><a href="/gostd/math/big/rat.go.html#2109573">sep</a></span>&nbsp;<span class="op" id="2109937">=</span>&nbsp;<span class="ident" id="2109939"><a href="/gostd/math/big/rat.go.html#2096119">strings</a></span><span class="op" id="2109946">.</span><span class="ident" id="2109947"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="2109952">(</span><span class="ident" id="2109953"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2109954">,</span>&nbsp;<span class="string" id="2109956">&#34;.&#34;</span><span class="op" id="2109959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2109962">//&nbsp;check&nbsp;for&nbsp;an&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2109988">e</span>&nbsp;<span class="op" id="2109990">:=</span>&nbsp;<span class="ident" id="2109993"><a href="/gostd/math/big/rat.go.html#2096119">strings</a></span><span class="op" id="2110000">.</span><span class="ident" id="2110001"><a href="/gostd/strings/strings.go.html#2970774">IndexAny</a></span><span class="op" id="2110009">(</span><span class="ident" id="2110010"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2110011">,</span>&nbsp;<span class="string" id="2110013">&#34;eE&#34;</span><span class="op" id="2110017">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110020">var</span>&nbsp;<span class="ident" id="2110024">exp</span>&nbsp;<span class="ident" id="2110028"><a href="/gostd/math/big/int.go.html#2035985">Int</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110033">if</span>&nbsp;<span class="ident" id="2110036"><a href="/gostd/math/big/rat.go.html#2109988">e</a></span>&nbsp;<span class="op" id="2110038">&gt;=</span>&nbsp;<span class="num" id="2110041">0</span>&nbsp;<span class="op" id="2110043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110047">if</span>&nbsp;<span class="ident" id="2110050"><a href="/gostd/math/big/rat.go.html#2109988">e</a></span>&nbsp;<span class="op" id="2110052">&lt;</span>&nbsp;<span class="ident" id="2110054"><a href="/gostd/math/big/rat.go.html#2109573">sep</a></span>&nbsp;<span class="op" id="2110058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2110063">//&nbsp;The&nbsp;E&nbsp;must&nbsp;come&nbsp;after&nbsp;the&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110110">return</span>&nbsp;<span class="builtintype" id="2110117">nil</span><span class="op" id="2110120">,</span>&nbsp;<span class="builtintype" id="2110122">false</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110134">if</span>&nbsp;<span class="ident" id="2110137">_</span><span class="op" id="2110138">,</span>&nbsp;<span class="ident" id="2110140">ok</span>&nbsp;<span class="op" id="2110143">:=</span>&nbsp;<span class="ident" id="2110146"><a href="/gostd/math/big/rat.go.html#2110024">exp</a></span><span class="op" id="2110149">.</span><span class="ident" id="2110150"><a href="/gostd/math/big/int.go.html#2049625">SetString</a></span><span class="op" id="2110159">(</span><span class="ident" id="2110160"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2110161">[</span><span class="ident" id="2110162"><a href="/gostd/math/big/rat.go.html#2109988">e</a></span><span class="op" id="2110163">+</span><span class="num" id="2110164">1</span><span class="op" id="2110165">:</span><span class="op" id="2110166">]</span><span class="op" id="2110167">,</span>&nbsp;<span class="num" id="2110169">10</span><span class="op" id="2110171">)</span><span class="op" id="2110172">;</span>&nbsp;<span class="op" id="2110174">!</span><span class="ident" id="2110175"><a href="/gostd/math/big/rat.go.html#2110140">ok</a></span>&nbsp;<span class="op" id="2110178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110183">return</span>&nbsp;<span class="builtintype" id="2110190">nil</span><span class="op" id="2110193">,</span>&nbsp;<span class="builtintype" id="2110195">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110207"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span>&nbsp;<span class="op" id="2110209">=</span>&nbsp;<span class="ident" id="2110211"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2110212">[</span><span class="num" id="2110213">0</span><span class="op" id="2110214">:</span><span class="ident" id="2110215"><a href="/gostd/math/big/rat.go.html#2109988">e</a></span><span class="op" id="2110216">]</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110222">if</span>&nbsp;<span class="ident" id="2110225"><a href="/gostd/math/big/rat.go.html#2109573">sep</a></span>&nbsp;<span class="op" id="2110229">&gt;=</span>&nbsp;<span class="num" id="2110232">0</span>&nbsp;<span class="op" id="2110234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110238"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span>&nbsp;<span class="op" id="2110240">=</span>&nbsp;<span class="ident" id="2110242"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2110243">[</span><span class="num" id="2110244">0</span><span class="op" id="2110245">:</span><span class="ident" id="2110246"><a href="/gostd/math/big/rat.go.html#2109573">sep</a></span><span class="op" id="2110249">]</span>&nbsp;<span class="op" id="2110251">+</span>&nbsp;<span class="ident" id="2110253"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2110254">[</span><span class="ident" id="2110255"><a href="/gostd/math/big/rat.go.html#2109573">sep</a></span><span class="op" id="2110258">+</span><span class="num" id="2110259">1</span><span class="op" id="2110260">:</span><span class="op" id="2110261">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110265"><a href="/gostd/math/big/rat.go.html#2110024">exp</a></span><span class="op" id="2110268">.</span><span class="ident" id="2110269"><a href="/gostd/math/big/int.go.html#2038464">Sub</a></span><span class="op" id="2110272">(</span><span class="op" id="2110273">&amp;</span><span class="ident" id="2110274"><a href="/gostd/math/big/rat.go.html#2110024">exp</a></span><span class="op" id="2110277">,</span>&nbsp;<span class="ident" id="2110279"><a href="/gostd/math/big/int.go.html#2036655">NewInt</a></span><span class="op" id="2110285">(</span><span class="builtintype" id="2110286">int64</span><span class="op" id="2110291">(</span><span class="builtinfunc" id="2110292">len</span><span class="op" id="2110295">(</span><span class="ident" id="2110296"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2110297">)</span><span class="op" id="2110298">-</span><span class="ident" id="2110299"><a href="/gostd/math/big/rat.go.html#2109573">sep</a></span><span class="op" id="2110302">)</span><span class="op" id="2110303">)</span><span class="op" id="2110304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110307">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110311">if</span>&nbsp;<span class="ident" id="2110314">_</span><span class="op" id="2110315">,</span>&nbsp;<span class="ident" id="2110317">ok</span>&nbsp;<span class="op" id="2110320">:=</span>&nbsp;<span class="ident" id="2110323"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2110324">.</span><span class="ident" id="2110325"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2110326">.</span><span class="ident" id="2110327"><a href="/gostd/math/big/int.go.html#2049625">SetString</a></span><span class="op" id="2110336">(</span><span class="ident" id="2110337"><a href="/gostd/math/big/rat.go.html#2109480">s</a></span><span class="op" id="2110338">,</span>&nbsp;<span class="num" id="2110340">10</span><span class="op" id="2110342">)</span><span class="op" id="2110343">;</span>&nbsp;<span class="op" id="2110345">!</span><span class="ident" id="2110346"><a href="/gostd/math/big/rat.go.html#2110317">ok</a></span>&nbsp;<span class="op" id="2110349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110353">return</span>&nbsp;<span class="builtintype" id="2110360">nil</span><span class="op" id="2110363">,</span>&nbsp;<span class="builtintype" id="2110365">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110375">powTen</span>&nbsp;<span class="op" id="2110382">:=</span>&nbsp;<span class="ident" id="2110385"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2110388">(</span><span class="builtintype" id="2110389">nil</span><span class="op" id="2110392">)</span><span class="op" id="2110393">.</span><span class="ident" id="2110394"><a href="/gostd/math/big/nat.go.html#2090082">expNN</a></span><span class="op" id="2110399">(</span><span class="ident" id="2110400"><a href="/gostd/math/big/nat.go.html#2062208">natTen</a></span><span class="op" id="2110406">,</span>&nbsp;<span class="ident" id="2110408"><a href="/gostd/math/big/rat.go.html#2110024">exp</a></span><span class="op" id="2110411">.</span><span class="ident" id="2110412"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2110415">,</span>&nbsp;<span class="builtintype" id="2110417">nil</span><span class="op" id="2110420">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110423">if</span>&nbsp;<span class="ident" id="2110426"><a href="/gostd/math/big/rat.go.html#2110024">exp</a></span><span class="op" id="2110429">.</span><span class="ident" id="2110430"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2110434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110438"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2110439">.</span><span class="ident" id="2110440"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2110441">.</span><span class="ident" id="2110442"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2110446">=</span>&nbsp;<span class="ident" id="2110448"><a href="/gostd/math/big/rat.go.html#2110375">powTen</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110457"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2110458">.</span><span class="ident" id="2110459"><a href="/gostd/math/big/rat.go.html#2106244">norm</a></span><span class="op" id="2110463">(</span><span class="op" id="2110464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110467">}</span>&nbsp;<span class="keyword" id="2110469">else</span>&nbsp;<span class="op" id="2110474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110478"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2110479">.</span><span class="ident" id="2110480"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2110481">.</span><span class="ident" id="2110482"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2110486">=</span>&nbsp;<span class="ident" id="2110488"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2110489">.</span><span class="ident" id="2110490"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2110491">.</span><span class="ident" id="2110492"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2110495">.</span><span class="ident" id="2110496"><a href="/gostd/math/big/nat.go.html#2069066">mul</a></span><span class="op" id="2110499">(</span><span class="ident" id="2110500"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2110501">.</span><span class="ident" id="2110502"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2110503">.</span><span class="ident" id="2110504"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2110507">,</span>&nbsp;<span class="ident" id="2110509"><a href="/gostd/math/big/rat.go.html#2110375">powTen</a></span><span class="op" id="2110515">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110519"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2110520">.</span><span class="ident" id="2110521"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2110522">.</span><span class="ident" id="2110523"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2110527">=</span>&nbsp;<span class="ident" id="2110529"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2110530">.</span><span class="ident" id="2110531"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2110532">.</span><span class="ident" id="2110533"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2110536">.</span><span class="builtinfunc" id="2110537"><a href="/gostd/math/big/nat.go.html#2062395">make</a></span><span class="op" id="2110541">(</span><span class="num" id="2110542">0</span><span class="op" id="2110543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110550">return</span>&nbsp;<span class="ident" id="2110557"><a href="/gostd/math/big/rat.go.html#2109462">z</a></span><span class="op" id="2110558">,</span>&nbsp;<span class="builtintype" id="2110560">true</span><br>
<span class="lineno"></span><span class="op" id="2110565">}</span><br>
<span class="lineno">595</span><br>
<span class="lineno"></span><span class="comment" id="2110568">//&nbsp;String&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;x&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;a/b&#34;&nbsp;(even&nbsp;if&nbsp;b&nbsp;==&nbsp;1).</span><br>
<span class="lineno"></span><span class="keyword" id="2110651">func</span>&nbsp;<span class="op" id="2110656">(</span><span class="ident" id="2110657">x</span>&nbsp;<span class="op" id="2110659">*</span><span class="ident" id="2110660"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2110663">)</span>&nbsp;<span class="ident" id="2110665">String</span><span class="op" id="2110671">(</span><span class="op" id="2110672">)</span>&nbsp;<span class="builtintype" id="2110674">string</span>&nbsp;<span class="op" id="2110681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110684">s</span>&nbsp;<span class="op" id="2110686">:=</span>&nbsp;<span class="string" id="2110689">&#34;/1&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110695">if</span>&nbsp;<span class="builtinfunc" id="2110698">len</span><span class="op" id="2110701">(</span><span class="ident" id="2110702"><a href="/gostd/math/big/rat.go.html#2110657">x</a></span><span class="op" id="2110703">.</span><span class="ident" id="2110704"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2110705">.</span><span class="ident" id="2110706"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2110709">)</span>&nbsp;<span class="op" id="2110711">!=</span>&nbsp;<span class="num" id="2110714">0</span>&nbsp;<span class="op" id="2110716">{</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110720"><a href="/gostd/math/big/rat.go.html#2110684">s</a></span>&nbsp;<span class="op" id="2110722">=</span>&nbsp;<span class="string" id="2110724">&#34;/&#34;</span>&nbsp;<span class="op" id="2110728">+</span>&nbsp;<span class="ident" id="2110730"><a href="/gostd/math/big/rat.go.html#2110657">x</a></span><span class="op" id="2110731">.</span><span class="ident" id="2110732"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2110733">.</span><span class="ident" id="2110734"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2110737">.</span><span class="ident" id="2110738"><a href="/gostd/math/big/nat.go.html#2077265">decimalString</a></span><span class="op" id="2110751">(</span><span class="op" id="2110752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110758">return</span>&nbsp;<span class="ident" id="2110765"><a href="/gostd/math/big/rat.go.html#2110657">x</a></span><span class="op" id="2110766">.</span><span class="ident" id="2110767"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2110768">.</span><span class="ident" id="2110769"><a href="/gostd/math/big/int.go.html#2043213">String</a></span><span class="op" id="2110775">(</span><span class="op" id="2110776">)</span>&nbsp;<span class="op" id="2110778">+</span>&nbsp;<span class="ident" id="2110780"><a href="/gostd/math/big/rat.go.html#2110684">s</a></span><br>
<span class="lineno"></span><span class="op" id="2110782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">605</span><span class="comment" id="2110785">//&nbsp;RatString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;x&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;a/b&#34;&nbsp;if&nbsp;b&nbsp;!=&nbsp;1,</span><br>
<span class="lineno"></span><span class="comment" id="2110864">//&nbsp;and&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;a&#34;&nbsp;if&nbsp;b&nbsp;==&nbsp;1.</span><br>
<span class="lineno"></span><span class="keyword" id="2110898">func</span>&nbsp;<span class="op" id="2110903">(</span><span class="ident" id="2110904">x</span>&nbsp;<span class="op" id="2110906">*</span><span class="ident" id="2110907"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2110910">)</span>&nbsp;<span class="ident" id="2110912">RatString</span><span class="op" id="2110921">(</span><span class="op" id="2110922">)</span>&nbsp;<span class="builtintype" id="2110924">string</span>&nbsp;<span class="op" id="2110931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110934">if</span>&nbsp;<span class="ident" id="2110937"><a href="/gostd/math/big/rat.go.html#2110904">x</a></span><span class="op" id="2110938">.</span><span class="ident" id="2110939"><a href="/gostd/math/big/rat.go.html#2105543">IsInt</a></span><span class="op" id="2110944">(</span><span class="op" id="2110945">)</span>&nbsp;<span class="op" id="2110947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110951">return</span>&nbsp;<span class="ident" id="2110958"><a href="/gostd/math/big/rat.go.html#2110904">x</a></span><span class="op" id="2110959">.</span><span class="ident" id="2110960"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2110961">.</span><span class="ident" id="2110962"><a href="/gostd/math/big/int.go.html#2043213">String</a></span><span class="op" id="2110968">(</span><span class="op" id="2110969">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2110972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2110975">return</span>&nbsp;<span class="ident" id="2110982"><a href="/gostd/math/big/rat.go.html#2110904">x</a></span><span class="op" id="2110983">.</span><span class="ident" id="2110984"><a href="/gostd/math/big/rat.go.html#2110665">String</a></span><span class="op" id="2110990">(</span><span class="op" id="2110991">)</span><br>
<span class="lineno"></span><span class="op" id="2110993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2110996">//&nbsp;FloatString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;x&nbsp;in&nbsp;decimal&nbsp;form&nbsp;with&nbsp;prec</span><br>
<span class="lineno">615</span><span class="comment" id="2111074">//&nbsp;digits&nbsp;of&nbsp;precision&nbsp;after&nbsp;the&nbsp;decimal&nbsp;point&nbsp;and&nbsp;the&nbsp;last&nbsp;digit&nbsp;rounded.</span><br>
<span class="lineno"></span><span class="keyword" id="2111149">func</span>&nbsp;<span class="op" id="2111154">(</span><span class="ident" id="2111155">x</span>&nbsp;<span class="op" id="2111157">*</span><span class="ident" id="2111158"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2111161">)</span>&nbsp;<span class="ident" id="2111163">FloatString</span><span class="op" id="2111174">(</span><span class="ident" id="2111175">prec</span>&nbsp;<span class="builtintype" id="2111180">int</span><span class="op" id="2111183">)</span>&nbsp;<span class="builtintype" id="2111185">string</span>&nbsp;<span class="op" id="2111192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2111195">if</span>&nbsp;<span class="ident" id="2111198"><a href="/gostd/math/big/rat.go.html#2111155">x</a></span><span class="op" id="2111199">.</span><span class="ident" id="2111200"><a href="/gostd/math/big/rat.go.html#2105543">IsInt</a></span><span class="op" id="2111205">(</span><span class="op" id="2111206">)</span>&nbsp;<span class="op" id="2111208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111212">s</span>&nbsp;<span class="op" id="2111214">:=</span>&nbsp;<span class="ident" id="2111217"><a href="/gostd/math/big/rat.go.html#2111155">x</a></span><span class="op" id="2111218">.</span><span class="ident" id="2111219"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2111220">.</span><span class="ident" id="2111221"><a href="/gostd/math/big/int.go.html#2043213">String</a></span><span class="op" id="2111227">(</span><span class="op" id="2111228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2111232">if</span>&nbsp;<span class="ident" id="2111235"><a href="/gostd/math/big/rat.go.html#2111175">prec</a></span>&nbsp;<span class="op" id="2111240">&gt;</span>&nbsp;<span class="num" id="2111242">0</span>&nbsp;<span class="op" id="2111244">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111249"><a href="/gostd/math/big/rat.go.html#2111212">s</a></span>&nbsp;<span class="op" id="2111251">+=</span>&nbsp;<span class="string" id="2111254">&#34;.&#34;</span>&nbsp;<span class="op" id="2111258">+</span>&nbsp;<span class="ident" id="2111260"><a href="/gostd/math/big/rat.go.html#2096119">strings</a></span><span class="op" id="2111267">.</span><span class="ident" id="2111268"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="2111274">(</span><span class="string" id="2111275">&#34;0&#34;</span><span class="op" id="2111278">,</span>&nbsp;<span class="ident" id="2111280"><a href="/gostd/math/big/rat.go.html#2111175">prec</a></span><span class="op" id="2111284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2111292">return</span>&nbsp;<span class="ident" id="2111299"><a href="/gostd/math/big/rat.go.html#2111212">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2111305">//&nbsp;x.b.abs&nbsp;!=&nbsp;0</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111323">q</span><span class="op" id="2111324">,</span>&nbsp;<span class="ident" id="2111326">r</span>&nbsp;<span class="op" id="2111328">:=</span>&nbsp;<span class="ident" id="2111331"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2111334">(</span><span class="builtintype" id="2111335">nil</span><span class="op" id="2111338">)</span><span class="op" id="2111339">.</span><span class="ident" id="2111340"><a href="/gostd/math/big/nat.go.html#2071989">div</a></span><span class="op" id="2111343">(</span><span class="ident" id="2111344"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2111347">(</span><span class="builtintype" id="2111348">nil</span><span class="op" id="2111351">)</span><span class="op" id="2111352">,</span>&nbsp;<span class="ident" id="2111354"><a href="/gostd/math/big/rat.go.html#2111155">x</a></span><span class="op" id="2111355">.</span><span class="ident" id="2111356"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2111357">.</span><span class="ident" id="2111358"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2111361">,</span>&nbsp;<span class="ident" id="2111363"><a href="/gostd/math/big/rat.go.html#2111155">x</a></span><span class="op" id="2111364">.</span><span class="ident" id="2111365"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2111366">.</span><span class="ident" id="2111367"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2111370">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111374">p</span>&nbsp;<span class="op" id="2111376">:=</span>&nbsp;<span class="ident" id="2111379"><a href="/gostd/math/big/nat.go.html#2062174">natOne</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2111387">if</span>&nbsp;<span class="ident" id="2111390"><a href="/gostd/math/big/rat.go.html#2111175">prec</a></span>&nbsp;<span class="op" id="2111395">&gt;</span>&nbsp;<span class="num" id="2111397">0</span>&nbsp;<span class="op" id="2111399">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111403"><a href="/gostd/math/big/rat.go.html#2111374">p</a></span>&nbsp;<span class="op" id="2111405">=</span>&nbsp;<span class="ident" id="2111407"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2111410">(</span><span class="builtintype" id="2111411">nil</span><span class="op" id="2111414">)</span><span class="op" id="2111415">.</span><span class="ident" id="2111416"><a href="/gostd/math/big/nat.go.html#2090082">expNN</a></span><span class="op" id="2111421">(</span><span class="ident" id="2111422"><a href="/gostd/math/big/nat.go.html#2062208">natTen</a></span><span class="op" id="2111428">,</span>&nbsp;<span class="ident" id="2111430"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2111433">(</span><span class="builtintype" id="2111434">nil</span><span class="op" id="2111437">)</span><span class="op" id="2111438">.</span><span class="ident" id="2111439"><a href="/gostd/math/big/nat.go.html#2062773">setUint64</a></span><span class="op" id="2111448">(</span><span class="builtintype" id="2111449">uint64</span><span class="op" id="2111455">(</span><span class="ident" id="2111456"><a href="/gostd/math/big/rat.go.html#2111175">prec</a></span><span class="op" id="2111460">)</span><span class="op" id="2111461">)</span><span class="op" id="2111462">,</span>&nbsp;<span class="builtintype" id="2111464">nil</span><span class="op" id="2111467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111474"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span>&nbsp;<span class="op" id="2111476">=</span>&nbsp;<span class="ident" id="2111478"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span><span class="op" id="2111479">.</span><span class="ident" id="2111480"><a href="/gostd/math/big/nat.go.html#2069066">mul</a></span><span class="op" id="2111483">(</span><span class="ident" id="2111484"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span><span class="op" id="2111485">,</span>&nbsp;<span class="ident" id="2111487"><a href="/gostd/math/big/rat.go.html#2111374">p</a></span><span class="op" id="2111488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111491"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span><span class="op" id="2111492">,</span>&nbsp;<span class="ident" id="2111494">r2</span>&nbsp;<span class="op" id="2111497">:=</span>&nbsp;<span class="ident" id="2111500"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span><span class="op" id="2111501">.</span><span class="ident" id="2111502"><a href="/gostd/math/big/nat.go.html#2071989">div</a></span><span class="op" id="2111505">(</span><span class="ident" id="2111506"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2111509">(</span><span class="builtintype" id="2111510">nil</span><span class="op" id="2111513">)</span><span class="op" id="2111514">,</span>&nbsp;<span class="ident" id="2111516"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span><span class="op" id="2111517">,</span>&nbsp;<span class="ident" id="2111519"><a href="/gostd/math/big/rat.go.html#2111155">x</a></span><span class="op" id="2111520">.</span><span class="ident" id="2111521"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2111522">.</span><span class="ident" id="2111523"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2111526">)</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2111530">//&nbsp;see&nbsp;if&nbsp;we&nbsp;need&nbsp;to&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111561"><a href="/gostd/math/big/rat.go.html#2111494">r2</a></span>&nbsp;<span class="op" id="2111564">=</span>&nbsp;<span class="ident" id="2111566"><a href="/gostd/math/big/rat.go.html#2111494">r2</a></span><span class="op" id="2111568">.</span><span class="ident" id="2111569"><a href="/gostd/math/big/nat.go.html#2063185">add</a></span><span class="op" id="2111572">(</span><span class="ident" id="2111573"><a href="/gostd/math/big/rat.go.html#2111494">r2</a></span><span class="op" id="2111575">,</span>&nbsp;<span class="ident" id="2111577"><a href="/gostd/math/big/rat.go.html#2111494">r2</a></span><span class="op" id="2111579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2111582">if</span>&nbsp;<span class="ident" id="2111585"><a href="/gostd/math/big/rat.go.html#2111155">x</a></span><span class="op" id="2111586">.</span><span class="ident" id="2111587"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2111588">.</span><span class="ident" id="2111589"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2111592">.</span><span class="ident" id="2111593"><a href="/gostd/math/big/nat.go.html#2063929">cmp</a></span><span class="op" id="2111596">(</span><span class="ident" id="2111597"><a href="/gostd/math/big/rat.go.html#2111494">r2</a></span><span class="op" id="2111599">)</span>&nbsp;<span class="op" id="2111601">&lt;=</span>&nbsp;<span class="num" id="2111604">0</span>&nbsp;<span class="op" id="2111606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111610"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span>&nbsp;<span class="op" id="2111612">=</span>&nbsp;<span class="ident" id="2111614"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span><span class="op" id="2111615">.</span><span class="ident" id="2111616"><a href="/gostd/math/big/nat.go.html#2063185">add</a></span><span class="op" id="2111619">(</span><span class="ident" id="2111620"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span><span class="op" id="2111621">,</span>&nbsp;<span class="ident" id="2111623"><a href="/gostd/math/big/nat.go.html#2062174">natOne</a></span><span class="op" id="2111629">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2111633">if</span>&nbsp;<span class="ident" id="2111636"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span><span class="op" id="2111637">.</span><span class="ident" id="2111638"><a href="/gostd/math/big/nat.go.html#2063929">cmp</a></span><span class="op" id="2111641">(</span><span class="ident" id="2111642"><a href="/gostd/math/big/rat.go.html#2111374">p</a></span><span class="op" id="2111643">)</span>&nbsp;<span class="op" id="2111645">&gt;=</span>&nbsp;<span class="num" id="2111648">0</span>&nbsp;<span class="op" id="2111650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111655"><a href="/gostd/math/big/rat.go.html#2111323">q</a></span>&nbsp;<span class="op" id="2111657">=</span>&nbsp;<span class="ident" id="2111659"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2111662">(</span><span class="builtintype" id="2111663">nil</span><span class="op" id="2111666">)</span><span class="op" id="2111667">.</span><span class="ident" id="2111668"><a href="/gostd/math/big/nat.go.html#2063185">add</a></span><span class="op" id="2111671">(</span><span class="ident" id="2111672"><a href="/gostd/math/big/rat.go.html#2111323">q</a></span><span class="op" id="2111673">,</span>&nbsp;<span class="ident" id="2111675"><a href="/gostd/math/big/nat.go.html#2062174">natOne</a></span><span class="op" id="2111681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111686"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span>&nbsp;<span class="op" id="2111688">=</span>&nbsp;<span class="ident" id="2111690"><a href="/gostd/math/big/nat.go.html#2062155">nat</a></span><span class="op" id="2111693">(</span><span class="builtintype" id="2111694">nil</span><span class="op" id="2111697">)</span><span class="op" id="2111698">.</span><span class="ident" id="2111699"><a href="/gostd/math/big/nat.go.html#2063546">sub</a></span><span class="op" id="2111702">(</span><span class="ident" id="2111703"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span><span class="op" id="2111704">,</span>&nbsp;<span class="ident" id="2111706"><a href="/gostd/math/big/rat.go.html#2111374">p</a></span><span class="op" id="2111707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111714">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111718">s</span>&nbsp;<span class="op" id="2111720">:=</span>&nbsp;<span class="ident" id="2111723"><a href="/gostd/math/big/rat.go.html#2111323">q</a></span><span class="op" id="2111724">.</span><span class="ident" id="2111725"><a href="/gostd/math/big/nat.go.html#2077265">decimalString</a></span><span class="op" id="2111738">(</span><span class="op" id="2111739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2111742">if</span>&nbsp;<span class="ident" id="2111745"><a href="/gostd/math/big/rat.go.html#2111155">x</a></span><span class="op" id="2111746">.</span><span class="ident" id="2111747"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2111748">.</span><span class="ident" id="2111749"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2111753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111757"><a href="/gostd/math/big/rat.go.html#2111718">s</a></span>&nbsp;<span class="op" id="2111759">=</span>&nbsp;<span class="string" id="2111761">&#34;-&#34;</span>&nbsp;<span class="op" id="2111765">+</span>&nbsp;<span class="ident" id="2111767"><a href="/gostd/math/big/rat.go.html#2111718">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111770">}</span><br>
<span class="lineno">650</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2111774">if</span>&nbsp;<span class="ident" id="2111777"><a href="/gostd/math/big/rat.go.html#2111175">prec</a></span>&nbsp;<span class="op" id="2111782">&gt;</span>&nbsp;<span class="num" id="2111784">0</span>&nbsp;<span class="op" id="2111786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111790">rs</span>&nbsp;<span class="op" id="2111793">:=</span>&nbsp;<span class="ident" id="2111796"><a href="/gostd/math/big/rat.go.html#2111326">r</a></span><span class="op" id="2111797">.</span><span class="ident" id="2111798"><a href="/gostd/math/big/nat.go.html#2077265">decimalString</a></span><span class="op" id="2111811">(</span><span class="op" id="2111812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111816">leadingZeros</span>&nbsp;<span class="op" id="2111829">:=</span>&nbsp;<span class="ident" id="2111832"><a href="/gostd/math/big/rat.go.html#2111175">prec</a></span>&nbsp;<span class="op" id="2111837">-</span>&nbsp;<span class="builtinfunc" id="2111839">len</span><span class="op" id="2111842">(</span><span class="ident" id="2111843"><a href="/gostd/math/big/rat.go.html#2111790">rs</a></span><span class="op" id="2111845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111849"><a href="/gostd/math/big/rat.go.html#2111718">s</a></span>&nbsp;<span class="op" id="2111851">+=</span>&nbsp;<span class="string" id="2111854">&#34;.&#34;</span>&nbsp;<span class="op" id="2111858">+</span>&nbsp;<span class="ident" id="2111860"><a href="/gostd/math/big/rat.go.html#2096119">strings</a></span><span class="op" id="2111867">.</span><span class="ident" id="2111868"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="2111874">(</span><span class="string" id="2111875">&#34;0&#34;</span><span class="op" id="2111878">,</span>&nbsp;<span class="ident" id="2111880"><a href="/gostd/math/big/rat.go.html#2111816">leadingZeros</a></span><span class="op" id="2111892">)</span>&nbsp;<span class="op" id="2111894">+</span>&nbsp;<span class="ident" id="2111896"><a href="/gostd/math/big/rat.go.html#2111790">rs</a></span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2111904">return</span>&nbsp;<span class="ident" id="2111911"><a href="/gostd/math/big/rat.go.html#2111718">s</a></span><br>
<span class="lineno"></span><span class="op" id="2111913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">660</span><span class="comment" id="2111916">//&nbsp;Gob&nbsp;codec&nbsp;version.&nbsp;Permits&nbsp;backward-compatible&nbsp;changes&nbsp;to&nbsp;the&nbsp;encoding.</span><br>
<span class="lineno"></span><span class="keyword" id="2111991">const</span>&nbsp;<span class="ident" id="2111997">ratGobVersion</span>&nbsp;<span class="builtintype" id="2112011">byte</span>&nbsp;<span class="op" id="2112016">=</span>&nbsp;<span class="num" id="2112018">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2112021">//&nbsp;GobEncode&nbsp;implements&nbsp;the&nbsp;gob.GobEncoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2112075">func</span>&nbsp;<span class="op" id="2112080">(</span><span class="ident" id="2112081">x</span>&nbsp;<span class="op" id="2112083">*</span><span class="ident" id="2112084"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2112087">)</span>&nbsp;<span class="ident" id="2112089">GobEncode</span><span class="op" id="2112098">(</span><span class="op" id="2112099">)</span>&nbsp;<span class="op" id="2112101">(</span><span class="op" id="2112102">[</span><span class="op" id="2112103">]</span><span class="builtintype" id="2112104">byte</span><span class="op" id="2112108">,</span>&nbsp;<span class="builtintype" id="2112110">error</span><span class="op" id="2112115">)</span>&nbsp;<span class="op" id="2112117">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2112120">if</span>&nbsp;<span class="ident" id="2112123"><a href="/gostd/math/big/rat.go.html#2112081">x</a></span>&nbsp;<span class="op" id="2112125">==</span>&nbsp;<span class="builtintype" id="2112128">nil</span>&nbsp;<span class="op" id="2112132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2112136">return</span>&nbsp;<span class="builtintype" id="2112143">nil</span><span class="op" id="2112146">,</span>&nbsp;<span class="builtintype" id="2112148">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2112156">buf</span>&nbsp;<span class="op" id="2112160">:=</span>&nbsp;<span class="builtinfunc" id="2112163">make</span><span class="op" id="2112167">(</span><span class="op" id="2112168">[</span><span class="op" id="2112169">]</span><span class="builtintype" id="2112170">byte</span><span class="op" id="2112174">,</span>&nbsp;<span class="num" id="2112176">1</span><span class="op" id="2112177">+</span><span class="num" id="2112178">4</span><span class="op" id="2112179">+</span><span class="op" id="2112180">(</span><span class="builtinfunc" id="2112181">len</span><span class="op" id="2112184">(</span><span class="ident" id="2112185"><a href="/gostd/math/big/rat.go.html#2112081">x</a></span><span class="op" id="2112186">.</span><span class="ident" id="2112187"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2112188">.</span><span class="ident" id="2112189"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2112192">)</span><span class="op" id="2112193">+</span><span class="builtinfunc" id="2112194">len</span><span class="op" id="2112197">(</span><span class="ident" id="2112198"><a href="/gostd/math/big/rat.go.html#2112081">x</a></span><span class="op" id="2112199">.</span><span class="ident" id="2112200"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2112201">.</span><span class="ident" id="2112202"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2112205">)</span><span class="op" id="2112206">)</span><span class="op" id="2112207">*</span><span class="ident" id="2112208"><a href="/gostd/math/big/arith.go.html#2031135">_S</a></span><span class="op" id="2112210">)</span>&nbsp;<span class="comment" id="2112212">//&nbsp;extra&nbsp;bytes&nbsp;for&nbsp;version&nbsp;and&nbsp;sign&nbsp;bit&nbsp;(1),&nbsp;and&nbsp;numerator&nbsp;length&nbsp;(4)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2112283">i</span>&nbsp;<span class="op" id="2112285">:=</span>&nbsp;<span class="ident" id="2112288"><a href="/gostd/math/big/rat.go.html#2112081">x</a></span><span class="op" id="2112289">.</span><span class="ident" id="2112290"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2112291">.</span><span class="ident" id="2112292"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2112295">.</span><span class="ident" id="2112296"><a href="/gostd/math/big/nat.go.html#2095230">bytes</a></span><span class="op" id="2112301">(</span><span class="ident" id="2112302"><a href="/gostd/math/big/rat.go.html#2112156">buf</a></span><span class="op" id="2112305">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2112308">j</span>&nbsp;<span class="op" id="2112310">:=</span>&nbsp;<span class="ident" id="2112313"><a href="/gostd/math/big/rat.go.html#2112081">x</a></span><span class="op" id="2112314">.</span><span class="ident" id="2112315"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2112316">.</span><span class="ident" id="2112317"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2112320">.</span><span class="ident" id="2112321"><a href="/gostd/math/big/nat.go.html#2095230">bytes</a></span><span class="op" id="2112326">(</span><span class="ident" id="2112327"><a href="/gostd/math/big/rat.go.html#2112156">buf</a></span><span class="op" id="2112330">[</span><span class="num" id="2112331">0</span><span class="op" id="2112332">:</span><span class="ident" id="2112333"><a href="/gostd/math/big/rat.go.html#2112283">i</a></span><span class="op" id="2112334">]</span><span class="op" id="2112335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2112338">n</span>&nbsp;<span class="op" id="2112340">:=</span>&nbsp;<span class="ident" id="2112343"><a href="/gostd/math/big/rat.go.html#2112283">i</a></span>&nbsp;<span class="op" id="2112345">-</span>&nbsp;<span class="ident" id="2112347"><a href="/gostd/math/big/rat.go.html#2112308">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2112350">if</span>&nbsp;<span class="builtintype" id="2112353">int</span><span class="op" id="2112356">(</span><span class="builtintype" id="2112357">uint32</span><span class="op" id="2112363">(</span><span class="ident" id="2112364"><a href="/gostd/math/big/rat.go.html#2112338">n</a></span><span class="op" id="2112365">)</span><span class="op" id="2112366">)</span>&nbsp;<span class="op" id="2112368">!=</span>&nbsp;<span class="ident" id="2112371"><a href="/gostd/math/big/rat.go.html#2112338">n</a></span>&nbsp;<span class="op" id="2112373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2112377">//&nbsp;this&nbsp;should&nbsp;never&nbsp;happen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2112407">return</span>&nbsp;<span class="builtintype" id="2112414">nil</span><span class="op" id="2112417">,</span>&nbsp;<span class="ident" id="2112419"><a href="/gostd/math/big/rat.go.html#2096094">errors</a></span><span class="op" id="2112425">.</span><span class="ident" id="2112426"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="2112429">(</span><span class="string" id="2112430">&#34;Rat.GobEncode:&nbsp;numerator&nbsp;too&nbsp;large&#34;</span><span class="op" id="2112466">)</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2112472"><a href="/gostd/math/big/rat.go.html#2096075">binary</a></span><span class="op" id="2112478">.</span><span class="ident" id="2112479"><a href="/gostd/encoding/binary/binary.go.html#2987146">BigEndian</a></span><span class="op" id="2112488">.</span><span class="ident" id="2112489"><a href="/gostd/encoding/binary/binary.go.html#2988537">PutUint32</a></span><span class="op" id="2112498">(</span><span class="ident" id="2112499"><a href="/gostd/math/big/rat.go.html#2112156">buf</a></span><span class="op" id="2112502">[</span><span class="ident" id="2112503"><a href="/gostd/math/big/rat.go.html#2112308">j</a></span><span class="op" id="2112504">-</span><span class="num" id="2112505">4</span><span class="op" id="2112506">:</span><span class="ident" id="2112507"><a href="/gostd/math/big/rat.go.html#2112308">j</a></span><span class="op" id="2112508">]</span><span class="op" id="2112509">,</span>&nbsp;<span class="builtintype" id="2112511">uint32</span><span class="op" id="2112517">(</span><span class="ident" id="2112518"><a href="/gostd/math/big/rat.go.html#2112338">n</a></span><span class="op" id="2112519">)</span><span class="op" id="2112520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2112523"><a href="/gostd/math/big/rat.go.html#2112308">j</a></span>&nbsp;<span class="op" id="2112525">-=</span>&nbsp;<span class="num" id="2112528">1</span>&nbsp;<span class="op" id="2112530">+</span>&nbsp;<span class="num" id="2112532">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2112535">b</span>&nbsp;<span class="op" id="2112537">:=</span>&nbsp;<span class="ident" id="2112540"><a href="/gostd/math/big/rat.go.html#2111997">ratGobVersion</a></span>&nbsp;<span class="op" id="2112554">&lt;&lt;</span>&nbsp;<span class="num" id="2112557">1</span>&nbsp;<span class="comment" id="2112559">//&nbsp;make&nbsp;space&nbsp;for&nbsp;sign&nbsp;bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2112587">if</span>&nbsp;<span class="ident" id="2112590"><a href="/gostd/math/big/rat.go.html#2112081">x</a></span><span class="op" id="2112591">.</span><span class="ident" id="2112592"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2112593">.</span><span class="ident" id="2112594"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2112598">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2112602"><a href="/gostd/math/big/rat.go.html#2112535">b</a></span>&nbsp;<span class="op" id="2112604">|=</span>&nbsp;<span class="num" id="2112607">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2112613"><a href="/gostd/math/big/rat.go.html#2112156">buf</a></span><span class="op" id="2112616">[</span><span class="ident" id="2112617"><a href="/gostd/math/big/rat.go.html#2112308">j</a></span><span class="op" id="2112618">]</span>&nbsp;<span class="op" id="2112620">=</span>&nbsp;<span class="ident" id="2112622"><a href="/gostd/math/big/rat.go.html#2112535">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2112625">return</span>&nbsp;<span class="ident" id="2112632"><a href="/gostd/math/big/rat.go.html#2112156">buf</a></span><span class="op" id="2112635">[</span><span class="ident" id="2112636"><a href="/gostd/math/big/rat.go.html#2112308">j</a></span><span class="op" id="2112637">:</span><span class="op" id="2112638">]</span><span class="op" id="2112639">,</span>&nbsp;<span class="builtintype" id="2112641">nil</span><br>
<span class="lineno"></span><span class="op" id="2112645">}</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span><span class="comment" id="2112648">//&nbsp;GobDecode&nbsp;implements&nbsp;the&nbsp;gob.GobDecoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2112702">func</span>&nbsp;<span class="op" id="2112707">(</span><span class="ident" id="2112708">z</span>&nbsp;<span class="op" id="2112710">*</span><span class="ident" id="2112711"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2112714">)</span>&nbsp;<span class="ident" id="2112716">GobDecode</span><span class="op" id="2112725">(</span><span class="ident" id="2112726">buf</span>&nbsp;<span class="op" id="2112730">[</span><span class="op" id="2112731">]</span><span class="builtintype" id="2112732">byte</span><span class="op" id="2112736">)</span>&nbsp;<span class="builtintype" id="2112738">error</span>&nbsp;<span class="op" id="2112744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2112747">if</span>&nbsp;<span class="builtinfunc" id="2112750">len</span><span class="op" id="2112753">(</span><span class="ident" id="2112754"><a href="/gostd/math/big/rat.go.html#2112726">buf</a></span><span class="op" id="2112757">)</span>&nbsp;<span class="op" id="2112759">==</span>&nbsp;<span class="num" id="2112762">0</span>&nbsp;<span class="op" id="2112764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2112768">//&nbsp;Other&nbsp;side&nbsp;sent&nbsp;a&nbsp;nil&nbsp;or&nbsp;default&nbsp;value.</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112813">*</span><span class="ident" id="2112814"><a href="/gostd/math/big/rat.go.html#2112708">z</a></span>&nbsp;<span class="op" id="2112816">=</span>&nbsp;<span class="ident" id="2112818"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2112821">{</span><span class="op" id="2112822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2112826">return</span>&nbsp;<span class="builtintype" id="2112833">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2112841">b</span>&nbsp;<span class="op" id="2112843">:=</span>&nbsp;<span class="ident" id="2112846"><a href="/gostd/math/big/rat.go.html#2112726">buf</a></span><span class="op" id="2112849">[</span><span class="num" id="2112850">0</span><span class="op" id="2112851">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2112854">if</span>&nbsp;<span class="ident" id="2112857"><a href="/gostd/math/big/rat.go.html#2112841">b</a></span><span class="op" id="2112858">&gt;&gt;</span><span class="num" id="2112860">1</span>&nbsp;<span class="op" id="2112862">!=</span>&nbsp;<span class="ident" id="2112865"><a href="/gostd/math/big/rat.go.html#2111997">ratGobVersion</a></span>&nbsp;<span class="op" id="2112879">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2112883">return</span>&nbsp;<span class="ident" id="2112890"><a href="/gostd/math/big/rat.go.html#2096094">errors</a></span><span class="op" id="2112896">.</span><span class="ident" id="2112897"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="2112900">(</span><span class="ident" id="2112901"><a href="/gostd/math/big/rat.go.html#2096104">fmt</a></span><span class="op" id="2112904">.</span><span class="ident" id="2112905"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="2112912">(</span><span class="string" id="2112913">&#34;Rat.GobDecode:&nbsp;encoding&nbsp;version&nbsp;%d&nbsp;not&nbsp;supported&#34;</span><span class="op" id="2112963">,</span>&nbsp;<span class="ident" id="2112965"><a href="/gostd/math/big/rat.go.html#2112841">b</a></span><span class="op" id="2112966">&gt;&gt;</span><span class="num" id="2112968">1</span><span class="op" id="2112969">)</span><span class="op" id="2112970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2112976">const</span>&nbsp;<span class="ident" id="2112982">j</span>&nbsp;<span class="op" id="2112984">=</span>&nbsp;<span class="num" id="2112986">1</span>&nbsp;<span class="op" id="2112988">+</span>&nbsp;<span class="num" id="2112990">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2112993">i</span>&nbsp;<span class="op" id="2112995">:=</span>&nbsp;<span class="ident" id="2112998"><a href="/gostd/math/big/rat.go.html#2112982">j</a></span>&nbsp;<span class="op" id="2113000">+</span>&nbsp;<span class="ident" id="2113002"><a href="/gostd/math/big/rat.go.html#2096075">binary</a></span><span class="op" id="2113008">.</span><span class="ident" id="2113009"><a href="/gostd/encoding/binary/binary.go.html#2987146">BigEndian</a></span><span class="op" id="2113018">.</span><span class="ident" id="2113019"><a href="/gostd/encoding/binary/binary.go.html#2988414">Uint32</a></span><span class="op" id="2113025">(</span><span class="ident" id="2113026"><a href="/gostd/math/big/rat.go.html#2112726">buf</a></span><span class="op" id="2113029">[</span><span class="ident" id="2113030"><a href="/gostd/math/big/rat.go.html#2112982">j</a></span><span class="op" id="2113031">-</span><span class="num" id="2113032">4</span><span class="op" id="2113033">:</span><span class="ident" id="2113034"><a href="/gostd/math/big/rat.go.html#2112982">j</a></span><span class="op" id="2113035">]</span><span class="op" id="2113036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2113039"><a href="/gostd/math/big/rat.go.html#2112708">z</a></span><span class="op" id="2113040">.</span><span class="ident" id="2113041"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2113042">.</span><span class="ident" id="2113043"><a href="/gostd/math/big/int.go.html#2035999">neg</a></span>&nbsp;<span class="op" id="2113047">=</span>&nbsp;<span class="ident" id="2113049"><a href="/gostd/math/big/rat.go.html#2112841">b</a></span><span class="op" id="2113050">&amp;</span><span class="num" id="2113051">1</span>&nbsp;<span class="op" id="2113053">!=</span>&nbsp;<span class="num" id="2113056">0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2113059"><a href="/gostd/math/big/rat.go.html#2112708">z</a></span><span class="op" id="2113060">.</span><span class="ident" id="2113061"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2113062">.</span><span class="ident" id="2113063"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2113067">=</span>&nbsp;<span class="ident" id="2113069"><a href="/gostd/math/big/rat.go.html#2112708">z</a></span><span class="op" id="2113070">.</span><span class="ident" id="2113071"><a href="/gostd/math/big/rat.go.html#2096433">a</a></span><span class="op" id="2113072">.</span><span class="ident" id="2113073"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2113076">.</span><span class="ident" id="2113077"><a href="/gostd/math/big/nat.go.html#2095552">setBytes</a></span><span class="op" id="2113085">(</span><span class="ident" id="2113086"><a href="/gostd/math/big/rat.go.html#2112726">buf</a></span><span class="op" id="2113089">[</span><span class="ident" id="2113090"><a href="/gostd/math/big/rat.go.html#2112982">j</a></span><span class="op" id="2113091">:</span><span class="ident" id="2113092"><a href="/gostd/math/big/rat.go.html#2112993">i</a></span><span class="op" id="2113093">]</span><span class="op" id="2113094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2113097"><a href="/gostd/math/big/rat.go.html#2112708">z</a></span><span class="op" id="2113098">.</span><span class="ident" id="2113099"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2113100">.</span><span class="ident" id="2113101"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span>&nbsp;<span class="op" id="2113105">=</span>&nbsp;<span class="ident" id="2113107"><a href="/gostd/math/big/rat.go.html#2112708">z</a></span><span class="op" id="2113108">.</span><span class="ident" id="2113109"><a href="/gostd/math/big/rat.go.html#2096436">b</a></span><span class="op" id="2113110">.</span><span class="ident" id="2113111"><a href="/gostd/math/big/int.go.html#2036017">abs</a></span><span class="op" id="2113114">.</span><span class="ident" id="2113115"><a href="/gostd/math/big/nat.go.html#2095552">setBytes</a></span><span class="op" id="2113123">(</span><span class="ident" id="2113124"><a href="/gostd/math/big/rat.go.html#2112726">buf</a></span><span class="op" id="2113127">[</span><span class="ident" id="2113128"><a href="/gostd/math/big/rat.go.html#2112993">i</a></span><span class="op" id="2113129">:</span><span class="op" id="2113130">]</span><span class="op" id="2113131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2113134">return</span>&nbsp;<span class="builtintype" id="2113141">nil</span><br>
<span class="lineno"></span><span class="op" id="2113145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">705</span><span class="comment" id="2113148">//&nbsp;MarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextMarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2113212">func</span>&nbsp;<span class="op" id="2113217">(</span><span class="ident" id="2113218">r</span>&nbsp;<span class="op" id="2113220">*</span><span class="ident" id="2113221"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2113224">)</span>&nbsp;<span class="ident" id="2113226">MarshalText</span><span class="op" id="2113237">(</span><span class="op" id="2113238">)</span>&nbsp;<span class="op" id="2113240">(</span><span class="ident" id="2113241">text</span>&nbsp;<span class="op" id="2113246">[</span><span class="op" id="2113247">]</span><span class="builtintype" id="2113248">byte</span><span class="op" id="2113252">,</span>&nbsp;<span class="ident" id="2113254">err</span>&nbsp;<span class="builtintype" id="2113258">error</span><span class="op" id="2113263">)</span>&nbsp;<span class="op" id="2113265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2113268">return</span>&nbsp;<span class="op" id="2113275">[</span><span class="op" id="2113276">]</span><span class="builtintype" id="2113277">byte</span><span class="op" id="2113281">(</span><span class="ident" id="2113282"><a href="/gostd/math/big/rat.go.html#2113218">r</a></span><span class="op" id="2113283">.</span><span class="ident" id="2113284"><a href="/gostd/math/big/rat.go.html#2110912">RatString</a></span><span class="op" id="2113293">(</span><span class="op" id="2113294">)</span><span class="op" id="2113295">)</span><span class="op" id="2113296">,</span>&nbsp;<span class="builtintype" id="2113298">nil</span><br>
<span class="lineno"></span><span class="op" id="2113302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span><span class="comment" id="2113305">//&nbsp;UnmarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2113373">func</span>&nbsp;<span class="op" id="2113378">(</span><span class="ident" id="2113379">r</span>&nbsp;<span class="op" id="2113381">*</span><span class="ident" id="2113382"><a href="/gostd/math/big/rat.go.html#2096248">Rat</a></span><span class="op" id="2113385">)</span>&nbsp;<span class="ident" id="2113387">UnmarshalText</span><span class="op" id="2113400">(</span><span class="ident" id="2113401">text</span>&nbsp;<span class="op" id="2113406">[</span><span class="op" id="2113407">]</span><span class="builtintype" id="2113408">byte</span><span class="op" id="2113412">)</span>&nbsp;<span class="builtintype" id="2113414">error</span>&nbsp;<span class="op" id="2113420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2113423">if</span>&nbsp;<span class="ident" id="2113426">_</span><span class="op" id="2113427">,</span>&nbsp;<span class="ident" id="2113429">ok</span>&nbsp;<span class="op" id="2113432">:=</span>&nbsp;<span class="ident" id="2113435"><a href="/gostd/math/big/rat.go.html#2113379">r</a></span><span class="op" id="2113436">.</span><span class="ident" id="2113437"><a href="/gostd/math/big/rat.go.html#2109470">SetString</a></span><span class="op" id="2113446">(</span><span class="builtintype" id="2113447">string</span><span class="op" id="2113453">(</span><span class="ident" id="2113454"><a href="/gostd/math/big/rat.go.html#2113401">text</a></span><span class="op" id="2113458">)</span><span class="op" id="2113459">)</span><span class="op" id="2113460">;</span>&nbsp;<span class="op" id="2113462">!</span><span class="ident" id="2113463"><a href="/gostd/math/big/rat.go.html#2113429">ok</a></span>&nbsp;<span class="op" id="2113466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2113470">return</span>&nbsp;<span class="ident" id="2113477"><a href="/gostd/math/big/rat.go.html#2096104">fmt</a></span><span class="op" id="2113480">.</span><span class="ident" id="2113481"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="2113487">(</span><span class="string" id="2113488">&#34;math/big:&nbsp;cannot&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;a&nbsp;*big.Rat&#34;</span><span class="op" id="2113535">,</span>&nbsp;<span class="ident" id="2113537"><a href="/gostd/math/big/rat.go.html#2113401">text</a></span><span class="op" id="2113541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113544">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2113547">return</span>&nbsp;<span class="builtintype" id="2113554">nil</span><br>
<span class="lineno"></span><span class="op" id="2113558">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
