<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/textproto</h2>
<ul>
<li><a href="/gostd/net/textproto/header.go.html">header.go</a></li>
<li><a href="/gostd/net/textproto/pipeline.go.html">pipeline.go</a></li>
<li><a href="/gostd/net/textproto/reader.go.html">reader.go</a></li>
<li><a href="/gostd/net/textproto/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/net/textproto/textproto.go.html">textproto.go</a></li>
<li><a href="/gostd/net/textproto/writer.go.html">writer.go</a></li>
<li><a href="/gostd/net/textproto/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7080336">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7080392">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7080446">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7080497">package</span>&nbsp;<span class="ident" id="7080505">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7080516">import</span>&nbsp;<span class="op" id="7080523">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7080526">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7080535">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7080544">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7080554">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7080557">func</span>&nbsp;<span class="ident" id="7080562">TestPrintfLine</span><span class="op" id="7080576">(</span><span class="ident" id="7080577">t</span>&nbsp;<span class="op" id="7080579">*</span><span class="ident" id="7080580">testing</span><span class="op" id="7080587">.</span><span class="ident" id="7080588">T</span><span class="op" id="7080589">)</span>&nbsp;<span class="op" id="7080591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7080594">var</span>&nbsp;<span class="ident" id="7080598">buf</span>&nbsp;<span class="ident" id="7080602">bytes</span><span class="op" id="7080607">.</span><span class="ident" id="7080608">Buffer</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080616">w</span>&nbsp;<span class="op" id="7080618">:=</span>&nbsp;<span class="ident" id="7080621">NewWriter</span><span class="op" id="7080630">(</span><span class="ident" id="7080631">bufio</span><span class="op" id="7080636">.</span><span class="ident" id="7080637">NewWriter</span><span class="op" id="7080646">(</span><span class="op" id="7080647">&amp;</span><span class="ident" id="7080648">buf</span><span class="op" id="7080651">)</span><span class="op" id="7080652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080655">err</span>&nbsp;<span class="op" id="7080659">:=</span>&nbsp;<span class="ident" id="7080662">w</span><span class="op" id="7080663">.</span><span class="ident" id="7080664">PrintfLine</span><span class="op" id="7080674">(</span><span class="string" id="7080675">&#34;foo&nbsp;%d&#34;</span><span class="op" id="7080683">,</span>&nbsp;<span class="num" id="7080685">123</span><span class="op" id="7080688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7080691">if</span>&nbsp;<span class="ident" id="7080694">s</span>&nbsp;<span class="op" id="7080696">:=</span>&nbsp;<span class="ident" id="7080699">buf</span><span class="op" id="7080702">.</span><span class="ident" id="7080703">String</span><span class="op" id="7080709">(</span><span class="op" id="7080710">)</span><span class="op" id="7080711">;</span>&nbsp;<span class="ident" id="7080713">s</span>&nbsp;<span class="op" id="7080715">!=</span>&nbsp;<span class="string" id="7080718">&#34;foo&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="7080732">||</span>&nbsp;<span class="ident" id="7080735">err</span>&nbsp;<span class="op" id="7080739">!=</span>&nbsp;<span class="ident" id="7080742">nil</span>&nbsp;<span class="op" id="7080746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080750">t</span><span class="op" id="7080751">.</span><span class="ident" id="7080752">Fatalf</span><span class="op" id="7080758">(</span><span class="string" id="7080759">&#34;s=%q;&nbsp;err=%s&#34;</span><span class="op" id="7080773">,</span>&nbsp;<span class="ident" id="7080775">s</span><span class="op" id="7080776">,</span>&nbsp;<span class="ident" id="7080778">err</span><span class="op" id="7080781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7080784">}</span><br>
<span class="lineno">20</span><span class="op" id="7080786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7080789">func</span>&nbsp;<span class="ident" id="7080794">TestDotWriter</span><span class="op" id="7080807">(</span><span class="ident" id="7080808">t</span>&nbsp;<span class="op" id="7080810">*</span><span class="ident" id="7080811">testing</span><span class="op" id="7080818">.</span><span class="ident" id="7080819">T</span><span class="op" id="7080820">)</span>&nbsp;<span class="op" id="7080822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7080825">var</span>&nbsp;<span class="ident" id="7080829">buf</span>&nbsp;<span class="ident" id="7080833">bytes</span><span class="op" id="7080838">.</span><span class="ident" id="7080839">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080847">w</span>&nbsp;<span class="op" id="7080849">:=</span>&nbsp;<span class="ident" id="7080852">NewWriter</span><span class="op" id="7080861">(</span><span class="ident" id="7080862">bufio</span><span class="op" id="7080867">.</span><span class="ident" id="7080868">NewWriter</span><span class="op" id="7080877">(</span><span class="op" id="7080878">&amp;</span><span class="ident" id="7080879">buf</span><span class="op" id="7080882">)</span><span class="op" id="7080883">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080886">d</span>&nbsp;<span class="op" id="7080888">:=</span>&nbsp;<span class="ident" id="7080891">w</span><span class="op" id="7080892">.</span><span class="ident" id="7080893">DotWriter</span><span class="op" id="7080902">(</span><span class="op" id="7080903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080906">n</span><span class="op" id="7080907">,</span>&nbsp;<span class="ident" id="7080909">err</span>&nbsp;<span class="op" id="7080913">:=</span>&nbsp;<span class="ident" id="7080916">d</span><span class="op" id="7080917">.</span><span class="ident" id="7080918">Write</span><span class="op" id="7080923">(</span><span class="op" id="7080924">[</span><span class="op" id="7080925">]</span><span class="builtintype" id="7080926">byte</span><span class="op" id="7080930">(</span><span class="string" id="7080931">&#34;abc\n.def\n..ghi\n.jkl\n.&#34;</span><span class="op" id="7080958">)</span><span class="op" id="7080959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7080962">if</span>&nbsp;<span class="ident" id="7080965">n</span>&nbsp;<span class="op" id="7080967">!=</span>&nbsp;<span class="num" id="7080970">21</span>&nbsp;<span class="op" id="7080973">||</span>&nbsp;<span class="ident" id="7080976">err</span>&nbsp;<span class="op" id="7080980">!=</span>&nbsp;<span class="ident" id="7080983">nil</span>&nbsp;<span class="op" id="7080987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7080991">t</span><span class="op" id="7080992">.</span><span class="ident" id="7080993">Fatalf</span><span class="op" id="7080999">(</span><span class="string" id="7081000">&#34;Write:&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7081015">,</span>&nbsp;<span class="ident" id="7081017">n</span><span class="op" id="7081018">,</span>&nbsp;<span class="ident" id="7081020">err</span><span class="op" id="7081023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7081026">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081029">d</span><span class="op" id="7081030">.</span><span class="ident" id="7081031">Close</span><span class="op" id="7081036">(</span><span class="op" id="7081037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081040">want</span>&nbsp;<span class="op" id="7081045">:=</span>&nbsp;<span class="string" id="7081048">&#34;abc\r\n..def\r\n...ghi\r\n..jkl\r\n..\r\n.\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7081098">if</span>&nbsp;<span class="ident" id="7081101">s</span>&nbsp;<span class="op" id="7081103">:=</span>&nbsp;<span class="ident" id="7081106">buf</span><span class="op" id="7081109">.</span><span class="ident" id="7081110">String</span><span class="op" id="7081116">(</span><span class="op" id="7081117">)</span><span class="op" id="7081118">;</span>&nbsp;<span class="ident" id="7081120">s</span>&nbsp;<span class="op" id="7081122">!=</span>&nbsp;<span class="ident" id="7081125">want</span>&nbsp;<span class="op" id="7081130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7081134">t</span><span class="op" id="7081135">.</span><span class="ident" id="7081136">Fatalf</span><span class="op" id="7081142">(</span><span class="string" id="7081143">&#34;wrote&nbsp;%q&#34;</span><span class="op" id="7081153">,</span>&nbsp;<span class="ident" id="7081155">s</span><span class="op" id="7081156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7081159">}</span><br>
<span class="lineno">35</span><span class="op" id="7081161">}</span>
</div>
</body>
</html>
