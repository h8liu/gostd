<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/png</h2>
<ul>
<li><a href="/gostd/image/png/paeth.go.html">paeth.go</a></li>
<li><a href="/gostd/image/png/paeth_test.go.html">paeth_test.go</a></li>
<li><a href="/gostd/image/png/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/image/png/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/image/png/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/png/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6148369">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6148424">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6148478">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6148529">//&nbsp;Package&nbsp;png&nbsp;implements&nbsp;a&nbsp;PNG&nbsp;image&nbsp;decoder&nbsp;and&nbsp;encoder.</span><br>
<span class="lineno"></span><span class="comment" id="6148588">//</span><br>
<span class="lineno"></span><span class="comment" id="6148591">//&nbsp;The&nbsp;PNG&nbsp;specification&nbsp;is&nbsp;at&nbsp;http://www.w3.org/TR/PNG/.</span><br>
<span class="lineno"></span><span class="keyword" id="6148649">package</span>&nbsp;<span class="ident" id="6148657">png</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6148662">import</span>&nbsp;<span class="op" id="6148669">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6148672">&#34;compress/zlib&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6148689">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6148708">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6148715">&#34;hash&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6148723">&#34;hash/crc32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6148737">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6148746">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6148761">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="6148766">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="6148769">//&nbsp;Color&nbsp;type,&nbsp;as&nbsp;per&nbsp;the&nbsp;PNG&nbsp;spec.</span><br>
<span class="lineno"></span><span class="keyword" id="6148805">const</span>&nbsp;<span class="op" id="6148811">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6148814">ctGrayscale</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6148831">=</span>&nbsp;<span class="num" id="6148833">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6148836">ctTrueColor</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6148853">=</span>&nbsp;<span class="num" id="6148855">2</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6148858">ctPaletted</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6148875">=</span>&nbsp;<span class="num" id="6148877">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6148880">ctGrayscaleAlpha</span>&nbsp;<span class="op" id="6148897">=</span>&nbsp;<span class="num" id="6148899">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6148902">ctTrueColorAlpha</span>&nbsp;<span class="op" id="6148919">=</span>&nbsp;<span class="num" id="6148921">6</span><br>
<span class="lineno"></span><span class="op" id="6148923">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="6148926">//&nbsp;A&nbsp;cb&nbsp;is&nbsp;a&nbsp;combination&nbsp;of&nbsp;color&nbsp;type&nbsp;and&nbsp;bit&nbsp;depth.</span><br>
<span class="lineno"></span><span class="keyword" id="6148980">const</span>&nbsp;<span class="op" id="6148986">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6148989">cbInvalid</span>&nbsp;<span class="op" id="6148999">=</span>&nbsp;<span class="ident" id="6149001">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149007">cbG1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149013">cbG2</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149019">cbG4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149025">cbG8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149031">cbGA8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149038">cbTC8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149045">cbP1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149051">cbP2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149057">cbP4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149063">cbP8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149069">cbTCA8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149077">cbG16</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149084">cbGA16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149092">cbTC16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149100">cbTCA16</span><br>
<span class="lineno"></span><span class="op" id="6149108">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="6149111">//&nbsp;Filter&nbsp;type,&nbsp;as&nbsp;per&nbsp;the&nbsp;PNG&nbsp;spec.</span><br>
<span class="lineno"></span><span class="keyword" id="6149148">const</span>&nbsp;<span class="op" id="6149154">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149157">ftNone</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6149167">=</span>&nbsp;<span class="num" id="6149169">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149172">ftSub</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6149182">=</span>&nbsp;<span class="num" id="6149184">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149187">ftUp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6149197">=</span>&nbsp;<span class="num" id="6149199">2</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149202">ftAverage</span>&nbsp;<span class="op" id="6149212">=</span>&nbsp;<span class="num" id="6149214">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149217">ftPaeth</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6149227">=</span>&nbsp;<span class="num" id="6149229">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149232">nFilter</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6149242">=</span>&nbsp;<span class="num" id="6149244">5</span><br>
<span class="lineno"></span><span class="op" id="6149246">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="6149249">//&nbsp;Interlace&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="6149268">const</span>&nbsp;<span class="op" id="6149274">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149277">itNone</span>&nbsp;&nbsp;<span class="op" id="6149285">=</span>&nbsp;<span class="num" id="6149287">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149290">itAdam7</span>&nbsp;<span class="op" id="6149298">=</span>&nbsp;<span class="num" id="6149300">1</span><br>
<span class="lineno"></span><span class="op" id="6149302">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="6149305">//&nbsp;interlaceScan&nbsp;defines&nbsp;the&nbsp;placement&nbsp;and&nbsp;size&nbsp;of&nbsp;a&nbsp;pass&nbsp;for&nbsp;Adam7&nbsp;interlacing.</span><br>
<span class="lineno"></span><span class="keyword" id="6149386">type</span>&nbsp;<span class="ident" id="6149391">interlaceScan</span>&nbsp;<span class="keyword" id="6149405">struct</span>&nbsp;<span class="op" id="6149412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6149415">xFactor</span><span class="op" id="6149422">,</span>&nbsp;<span class="ident" id="6149424">yFactor</span><span class="op" id="6149431">,</span>&nbsp;<span class="ident" id="6149433">xOffset</span><span class="op" id="6149440">,</span>&nbsp;<span class="ident" id="6149442">yOffset</span>&nbsp;<span class="builtintype" id="6149450">int</span><br>
<span class="lineno"></span><span class="op" id="6149454">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="comment" id="6149457">//&nbsp;interlacing&nbsp;defines&nbsp;Adam7&nbsp;interlacing,&nbsp;with&nbsp;7&nbsp;passes&nbsp;of&nbsp;reduced&nbsp;images.</span><br>
<span class="lineno"></span><span class="comment" id="6149532">//&nbsp;See&nbsp;http://www.w3.org/TR/PNG/#8Interlace</span><br>
<span class="lineno"></span><span class="keyword" id="6149576">var</span>&nbsp;<span class="ident" id="6149580">interlacing</span>&nbsp;<span class="op" id="6149592">=</span>&nbsp;<span class="op" id="6149594">[</span><span class="op" id="6149595">]</span><span class="ident" id="6149596"><a href="/gostd/image/png/reader.go.html#6149391">interlaceScan</a></span><span class="op" id="6149609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6149612">{</span><span class="num" id="6149613">8</span><span class="op" id="6149614">,</span>&nbsp;<span class="num" id="6149616">8</span><span class="op" id="6149617">,</span>&nbsp;<span class="num" id="6149619">0</span><span class="op" id="6149620">,</span>&nbsp;<span class="num" id="6149622">0</span><span class="op" id="6149623">}</span><span class="op" id="6149624">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6149627">{</span><span class="num" id="6149628">8</span><span class="op" id="6149629">,</span>&nbsp;<span class="num" id="6149631">8</span><span class="op" id="6149632">,</span>&nbsp;<span class="num" id="6149634">4</span><span class="op" id="6149635">,</span>&nbsp;<span class="num" id="6149637">0</span><span class="op" id="6149638">}</span><span class="op" id="6149639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6149642">{</span><span class="num" id="6149643">4</span><span class="op" id="6149644">,</span>&nbsp;<span class="num" id="6149646">8</span><span class="op" id="6149647">,</span>&nbsp;<span class="num" id="6149649">0</span><span class="op" id="6149650">,</span>&nbsp;<span class="num" id="6149652">4</span><span class="op" id="6149653">}</span><span class="op" id="6149654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6149657">{</span><span class="num" id="6149658">4</span><span class="op" id="6149659">,</span>&nbsp;<span class="num" id="6149661">4</span><span class="op" id="6149662">,</span>&nbsp;<span class="num" id="6149664">2</span><span class="op" id="6149665">,</span>&nbsp;<span class="num" id="6149667">0</span><span class="op" id="6149668">}</span><span class="op" id="6149669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6149672">{</span><span class="num" id="6149673">2</span><span class="op" id="6149674">,</span>&nbsp;<span class="num" id="6149676">4</span><span class="op" id="6149677">,</span>&nbsp;<span class="num" id="6149679">0</span><span class="op" id="6149680">,</span>&nbsp;<span class="num" id="6149682">2</span><span class="op" id="6149683">}</span><span class="op" id="6149684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6149687">{</span><span class="num" id="6149688">2</span><span class="op" id="6149689">,</span>&nbsp;<span class="num" id="6149691">2</span><span class="op" id="6149692">,</span>&nbsp;<span class="num" id="6149694">1</span><span class="op" id="6149695">,</span>&nbsp;<span class="num" id="6149697">0</span><span class="op" id="6149698">}</span><span class="op" id="6149699">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6149702">{</span><span class="num" id="6149703">1</span><span class="op" id="6149704">,</span>&nbsp;<span class="num" id="6149706">2</span><span class="op" id="6149707">,</span>&nbsp;<span class="num" id="6149709">0</span><span class="op" id="6149710">,</span>&nbsp;<span class="num" id="6149712">1</span><span class="op" id="6149713">}</span><span class="op" id="6149714">,</span><br>
<span class="lineno"></span><span class="op" id="6149716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6149719">//&nbsp;Decoding&nbsp;stage.</span><br>
<span class="lineno"></span><span class="comment" id="6149738">//&nbsp;The&nbsp;PNG&nbsp;specification&nbsp;says&nbsp;that&nbsp;the&nbsp;IHDR,&nbsp;PLTE&nbsp;(if&nbsp;present),&nbsp;IDAT&nbsp;and&nbsp;IEND</span><br>
<span class="lineno">85</span><span class="comment" id="6149816">//&nbsp;chunks&nbsp;must&nbsp;appear&nbsp;in&nbsp;that&nbsp;order.&nbsp;There&nbsp;may&nbsp;be&nbsp;multiple&nbsp;IDAT&nbsp;chunks,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6149892">//&nbsp;IDAT&nbsp;chunks&nbsp;must&nbsp;be&nbsp;sequential&nbsp;(i.e.&nbsp;they&nbsp;may&nbsp;not&nbsp;have&nbsp;any&nbsp;other&nbsp;chunks</span><br>
<span class="lineno"></span><span class="comment" id="6149967">//&nbsp;between&nbsp;them).</span><br>
<span class="lineno"></span><span class="comment" id="6149985">//&nbsp;http://www.w3.org/TR/PNG/#5ChunkOrdering</span><br>
<span class="lineno"></span><span class="keyword" id="6150029">const</span>&nbsp;<span class="op" id="6150035">(</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150038">dsStart</span>&nbsp;<span class="op" id="6150046">=</span>&nbsp;<span class="ident" id="6150048">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150054">dsSeenIHDR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150066">dsSeenPLTE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150078">dsSeenIDAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150090">dsSeenIEND</span><br>
<span class="lineno">95</span><span class="op" id="6150101">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6150104">const</span>&nbsp;<span class="ident" id="6150110">pngHeader</span>&nbsp;<span class="op" id="6150120">=</span>&nbsp;<span class="string" id="6150122">&#34;\x89PNG\r\n\x1a\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6150143">type</span>&nbsp;<span class="ident" id="6150148">decoder</span>&nbsp;<span class="keyword" id="6150156">struct</span>&nbsp;<span class="op" id="6150163">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150166">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150180"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6150182">.</span><span class="ident" id="6150183"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150191">img</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150205"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6150210">.</span><span class="ident" id="6150211"><a href="/gostd/image/image.go.html#5154907">Image</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150218">crc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150232"><a href="/gostd/image/png/reader.go.html#6148715">hash</a></span><span class="op" id="6150236">.</span><span class="ident" id="6150237"><a href="/gostd/hash/hash.go.html#3014832">Hash32</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150245">width</span><span class="op" id="6150250">,</span>&nbsp;<span class="ident" id="6150252">height</span>&nbsp;<span class="builtintype" id="6150259">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150264">depth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6150278">int</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150283">palette</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150297"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6150302">.</span><span class="ident" id="6150303"><a href="/gostd/image/color/color.go.html#5190467">Palette</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150312">cb</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6150326">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150331">stage</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6150345">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150350">idatLength</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6150364">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150372">tmp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6150386">[</span><span class="num" id="6150387">3</span>&nbsp;<span class="op" id="6150389">*</span>&nbsp;<span class="num" id="6150391">256</span><span class="op" id="6150394">]</span><span class="builtintype" id="6150395">byte</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6150401">interlace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6150415">int</span><br>
<span class="lineno"></span><span class="op" id="6150419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6150422">//&nbsp;A&nbsp;FormatError&nbsp;reports&nbsp;that&nbsp;the&nbsp;input&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;PNG.</span><br>
<span class="lineno"></span><span class="keyword" id="6150482">type</span>&nbsp;<span class="ident" id="6150487">FormatError</span>&nbsp;<span class="builtintype" id="6150499">string</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="keyword" id="6150507">func</span>&nbsp;<span class="op" id="6150512">(</span><span class="ident" id="6150513">e</span>&nbsp;<span class="ident" id="6150515"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6150526">)</span>&nbsp;<span class="ident" id="6150528">Error</span><span class="op" id="6150533">(</span><span class="op" id="6150534">)</span>&nbsp;<span class="builtintype" id="6150536">string</span>&nbsp;<span class="op" id="6150543">{</span>&nbsp;<span class="keyword" id="6150545">return</span>&nbsp;<span class="string" id="6150552">&#34;png:&nbsp;invalid&nbsp;format:&nbsp;&#34;</span>&nbsp;<span class="op" id="6150576">+</span>&nbsp;<span class="builtintype" id="6150578">string</span><span class="op" id="6150584">(</span><span class="ident" id="6150585"><a href="/gostd/image/png/reader.go.html#6150513">e</a></span><span class="op" id="6150586">)</span>&nbsp;<span class="op" id="6150588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6150591">var</span>&nbsp;<span class="ident" id="6150595">chunkOrderError</span>&nbsp;<span class="op" id="6150611">=</span>&nbsp;<span class="ident" id="6150613"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6150624">(</span><span class="string" id="6150625">&#34;chunk&nbsp;out&nbsp;of&nbsp;order&#34;</span><span class="op" id="6150645">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="6150648">//&nbsp;An&nbsp;UnsupportedError&nbsp;reports&nbsp;that&nbsp;the&nbsp;input&nbsp;uses&nbsp;a&nbsp;valid&nbsp;but&nbsp;unimplemented&nbsp;PNG&nbsp;feature.</span><br>
<span class="lineno"></span><span class="keyword" id="6150738">type</span>&nbsp;<span class="ident" id="6150743">UnsupportedError</span>&nbsp;<span class="builtintype" id="6150760">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6150768">func</span>&nbsp;<span class="op" id="6150773">(</span><span class="ident" id="6150774">e</span>&nbsp;<span class="ident" id="6150776"><a href="/gostd/image/png/reader.go.html#6150743">UnsupportedError</a></span><span class="op" id="6150792">)</span>&nbsp;<span class="ident" id="6150794">Error</span><span class="op" id="6150799">(</span><span class="op" id="6150800">)</span>&nbsp;<span class="builtintype" id="6150802">string</span>&nbsp;<span class="op" id="6150809">{</span>&nbsp;<span class="keyword" id="6150811">return</span>&nbsp;<span class="string" id="6150818">&#34;png:&nbsp;unsupported&nbsp;feature:&nbsp;&#34;</span>&nbsp;<span class="op" id="6150847">+</span>&nbsp;<span class="builtintype" id="6150849">string</span><span class="op" id="6150855">(</span><span class="ident" id="6150856"><a href="/gostd/image/png/reader.go.html#6150774">e</a></span><span class="op" id="6150857">)</span>&nbsp;<span class="op" id="6150859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="6150862">func</span>&nbsp;<span class="ident" id="6150867">min</span><span class="op" id="6150870">(</span><span class="ident" id="6150871">a</span><span class="op" id="6150872">,</span>&nbsp;<span class="ident" id="6150874">b</span>&nbsp;<span class="builtintype" id="6150876">int</span><span class="op" id="6150879">)</span>&nbsp;<span class="builtintype" id="6150881">int</span>&nbsp;<span class="op" id="6150885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6150888">if</span>&nbsp;<span class="ident" id="6150891"><a href="/gostd/image/png/reader.go.html#6150871">a</a></span>&nbsp;<span class="op" id="6150893">&lt;</span>&nbsp;<span class="ident" id="6150895"><a href="/gostd/image/png/reader.go.html#6150874">b</a></span>&nbsp;<span class="op" id="6150897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6150901">return</span>&nbsp;<span class="ident" id="6150908"><a href="/gostd/image/png/reader.go.html#6150871">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6150911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6150914">return</span>&nbsp;<span class="ident" id="6150921"><a href="/gostd/image/png/reader.go.html#6150874">b</a></span><br>
<span class="lineno">130</span><span class="op" id="6150923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6150926">func</span>&nbsp;<span class="op" id="6150931">(</span><span class="ident" id="6150932">d</span>&nbsp;<span class="op" id="6150934">*</span><span class="ident" id="6150935"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6150942">)</span>&nbsp;<span class="ident" id="6150944">parseIHDR</span><span class="op" id="6150953">(</span><span class="ident" id="6150954">length</span>&nbsp;<span class="builtintype" id="6150961">uint32</span><span class="op" id="6150967">)</span>&nbsp;<span class="builtintype" id="6150969">error</span>&nbsp;<span class="op" id="6150975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6150978">if</span>&nbsp;<span class="ident" id="6150981"><a href="/gostd/image/png/reader.go.html#6150954">length</a></span>&nbsp;<span class="op" id="6150988">!=</span>&nbsp;<span class="num" id="6150991">13</span>&nbsp;<span class="op" id="6150994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6150998">return</span>&nbsp;<span class="ident" id="6151005"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6151016">(</span><span class="string" id="6151017">&#34;bad&nbsp;IHDR&nbsp;length&#34;</span><span class="op" id="6151034">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151040">if</span>&nbsp;<span class="ident" id="6151043">_</span><span class="op" id="6151044">,</span>&nbsp;<span class="ident" id="6151046">err</span>&nbsp;<span class="op" id="6151050">:=</span>&nbsp;<span class="ident" id="6151053"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6151055">.</span><span class="ident" id="6151056"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="6151064">(</span><span class="ident" id="6151065"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151066">.</span><span class="ident" id="6151067"><a href="/gostd/image/png/reader.go.html#6150166">r</a></span><span class="op" id="6151068">,</span>&nbsp;<span class="ident" id="6151070"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151071">.</span><span class="ident" id="6151072"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151075">[</span><span class="op" id="6151076">:</span><span class="num" id="6151077">13</span><span class="op" id="6151079">]</span><span class="op" id="6151080">)</span><span class="op" id="6151081">;</span>&nbsp;<span class="ident" id="6151083"><a href="/gostd/image/png/reader.go.html#6151046">err</a></span>&nbsp;<span class="op" id="6151087">!=</span>&nbsp;<span class="builtintype" id="6151090">nil</span>&nbsp;<span class="op" id="6151094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151098">return</span>&nbsp;<span class="ident" id="6151105"><a href="/gostd/image/png/reader.go.html#6151046">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151113"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151114">.</span><span class="ident" id="6151115"><a href="/gostd/image/png/reader.go.html#6150218">crc</a></span><span class="op" id="6151118">.</span><span class="ident" id="6151119"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="6151124">(</span><span class="ident" id="6151125"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151126">.</span><span class="ident" id="6151127"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151130">[</span><span class="op" id="6151131">:</span><span class="num" id="6151132">13</span><span class="op" id="6151134">]</span><span class="op" id="6151135">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151138">if</span>&nbsp;<span class="ident" id="6151141"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151142">.</span><span class="ident" id="6151143"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151146">[</span><span class="num" id="6151147">10</span><span class="op" id="6151149">]</span>&nbsp;<span class="op" id="6151151">!=</span>&nbsp;<span class="num" id="6151154">0</span>&nbsp;<span class="op" id="6151156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151160">return</span>&nbsp;<span class="ident" id="6151167"><a href="/gostd/image/png/reader.go.html#6150743">UnsupportedError</a></span><span class="op" id="6151183">(</span><span class="string" id="6151184">&#34;compression&nbsp;method&#34;</span><span class="op" id="6151204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151210">if</span>&nbsp;<span class="ident" id="6151213"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151214">.</span><span class="ident" id="6151215"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151218">[</span><span class="num" id="6151219">11</span><span class="op" id="6151221">]</span>&nbsp;<span class="op" id="6151223">!=</span>&nbsp;<span class="num" id="6151226">0</span>&nbsp;<span class="op" id="6151228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151232">return</span>&nbsp;<span class="ident" id="6151239"><a href="/gostd/image/png/reader.go.html#6150743">UnsupportedError</a></span><span class="op" id="6151255">(</span><span class="string" id="6151256">&#34;filter&nbsp;method&#34;</span><span class="op" id="6151271">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151277">if</span>&nbsp;<span class="ident" id="6151280"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151281">.</span><span class="ident" id="6151282"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151285">[</span><span class="num" id="6151286">12</span><span class="op" id="6151288">]</span>&nbsp;<span class="op" id="6151290">!=</span>&nbsp;<span class="ident" id="6151293"><a href="/gostd/image/png/reader.go.html#6149277">itNone</a></span>&nbsp;<span class="op" id="6151300">&amp;&amp;</span>&nbsp;<span class="ident" id="6151303"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151304">.</span><span class="ident" id="6151305"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151308">[</span><span class="num" id="6151309">12</span><span class="op" id="6151311">]</span>&nbsp;<span class="op" id="6151313">!=</span>&nbsp;<span class="ident" id="6151316"><a href="/gostd/image/png/reader.go.html#6149290">itAdam7</a></span>&nbsp;<span class="op" id="6151324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151328">return</span>&nbsp;<span class="ident" id="6151335"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6151346">(</span><span class="string" id="6151347">&#34;invalid&nbsp;interlace&nbsp;method&#34;</span><span class="op" id="6151373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151379"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151380">.</span><span class="ident" id="6151381"><a href="/gostd/image/png/reader.go.html#6150401">interlace</a></span>&nbsp;<span class="op" id="6151391">=</span>&nbsp;<span class="builtintype" id="6151393">int</span><span class="op" id="6151396">(</span><span class="ident" id="6151397"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151398">.</span><span class="ident" id="6151399"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151402">[</span><span class="num" id="6151403">12</span><span class="op" id="6151405">]</span><span class="op" id="6151406">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151409">w</span>&nbsp;<span class="op" id="6151411">:=</span>&nbsp;<span class="builtintype" id="6151414">int32</span><span class="op" id="6151419">(</span><span class="ident" id="6151420"><a href="/gostd/image/png/reader.go.html#6148689">binary</a></span><span class="op" id="6151426">.</span><span class="ident" id="6151427"><a href="/gostd/encoding/binary/binary.go.html#2987146">BigEndian</a></span><span class="op" id="6151436">.</span><span class="ident" id="6151437"><a href="/gostd/encoding/binary/binary.go.html#2988414">Uint32</a></span><span class="op" id="6151443">(</span><span class="ident" id="6151444"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151445">.</span><span class="ident" id="6151446"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151449">[</span><span class="num" id="6151450">0</span><span class="op" id="6151451">:</span><span class="num" id="6151452">4</span><span class="op" id="6151453">]</span><span class="op" id="6151454">)</span><span class="op" id="6151455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151458">h</span>&nbsp;<span class="op" id="6151460">:=</span>&nbsp;<span class="builtintype" id="6151463">int32</span><span class="op" id="6151468">(</span><span class="ident" id="6151469"><a href="/gostd/image/png/reader.go.html#6148689">binary</a></span><span class="op" id="6151475">.</span><span class="ident" id="6151476"><a href="/gostd/encoding/binary/binary.go.html#2987146">BigEndian</a></span><span class="op" id="6151485">.</span><span class="ident" id="6151486"><a href="/gostd/encoding/binary/binary.go.html#2988414">Uint32</a></span><span class="op" id="6151492">(</span><span class="ident" id="6151493"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151494">.</span><span class="ident" id="6151495"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151498">[</span><span class="num" id="6151499">4</span><span class="op" id="6151500">:</span><span class="num" id="6151501">8</span><span class="op" id="6151502">]</span><span class="op" id="6151503">)</span><span class="op" id="6151504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151507">if</span>&nbsp;<span class="ident" id="6151510"><a href="/gostd/image/png/reader.go.html#6151409">w</a></span>&nbsp;<span class="op" id="6151512">&lt;</span>&nbsp;<span class="num" id="6151514">0</span>&nbsp;<span class="op" id="6151516">||</span>&nbsp;<span class="ident" id="6151519"><a href="/gostd/image/png/reader.go.html#6151458">h</a></span>&nbsp;<span class="op" id="6151521">&lt;</span>&nbsp;<span class="num" id="6151523">0</span>&nbsp;<span class="op" id="6151525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151529">return</span>&nbsp;<span class="ident" id="6151536"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6151547">(</span><span class="string" id="6151548">&#34;negative&nbsp;dimension&#34;</span><span class="op" id="6151568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151571">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151574">nPixels</span>&nbsp;<span class="op" id="6151582">:=</span>&nbsp;<span class="builtintype" id="6151585">int64</span><span class="op" id="6151590">(</span><span class="ident" id="6151591"><a href="/gostd/image/png/reader.go.html#6151409">w</a></span><span class="op" id="6151592">)</span>&nbsp;<span class="op" id="6151594">*</span>&nbsp;<span class="builtintype" id="6151596">int64</span><span class="op" id="6151601">(</span><span class="ident" id="6151602"><a href="/gostd/image/png/reader.go.html#6151458">h</a></span><span class="op" id="6151603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151606">if</span>&nbsp;<span class="ident" id="6151609"><a href="/gostd/image/png/reader.go.html#6151574">nPixels</a></span>&nbsp;<span class="op" id="6151617">!=</span>&nbsp;<span class="builtintype" id="6151620">int64</span><span class="op" id="6151625">(</span><span class="builtintype" id="6151626">int</span><span class="op" id="6151629">(</span><span class="ident" id="6151630"><a href="/gostd/image/png/reader.go.html#6151574">nPixels</a></span><span class="op" id="6151637">)</span><span class="op" id="6151638">)</span>&nbsp;<span class="op" id="6151640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151644">return</span>&nbsp;<span class="ident" id="6151651"><a href="/gostd/image/png/reader.go.html#6150743">UnsupportedError</a></span><span class="op" id="6151667">(</span><span class="string" id="6151668">&#34;dimension&nbsp;overflow&#34;</span><span class="op" id="6151688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151694"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151695">.</span><span class="ident" id="6151696"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6151699">=</span>&nbsp;<span class="ident" id="6151701"><a href="/gostd/image/png/reader.go.html#6148989">cbInvalid</a></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151712"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151713">.</span><span class="ident" id="6151714"><a href="/gostd/image/png/reader.go.html#6150264">depth</a></span>&nbsp;<span class="op" id="6151720">=</span>&nbsp;<span class="builtintype" id="6151722">int</span><span class="op" id="6151725">(</span><span class="ident" id="6151726"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151727">.</span><span class="ident" id="6151728"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151731">[</span><span class="num" id="6151732">8</span><span class="op" id="6151733">]</span><span class="op" id="6151734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151737">switch</span>&nbsp;<span class="ident" id="6151744"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151745">.</span><span class="ident" id="6151746"><a href="/gostd/image/png/reader.go.html#6150264">depth</a></span>&nbsp;<span class="op" id="6151752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151755">case</span>&nbsp;<span class="num" id="6151760">1</span><span class="op" id="6151761">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151765">switch</span>&nbsp;<span class="ident" id="6151772"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151773">.</span><span class="ident" id="6151774"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151777">[</span><span class="num" id="6151778">9</span><span class="op" id="6151779">]</span>&nbsp;<span class="op" id="6151781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151785">case</span>&nbsp;<span class="ident" id="6151790"><a href="/gostd/image/png/reader.go.html#6148814">ctGrayscale</a></span><span class="op" id="6151801">:</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151806"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151807">.</span><span class="ident" id="6151808"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6151811">=</span>&nbsp;<span class="ident" id="6151813"><a href="/gostd/image/png/reader.go.html#6149007">cbG1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151820">case</span>&nbsp;<span class="ident" id="6151825"><a href="/gostd/image/png/reader.go.html#6148858">ctPaletted</a></span><span class="op" id="6151835">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151840"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151841">.</span><span class="ident" id="6151842"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6151845">=</span>&nbsp;<span class="ident" id="6151847"><a href="/gostd/image/png/reader.go.html#6149045">cbP1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151857">case</span>&nbsp;<span class="num" id="6151862">2</span><span class="op" id="6151863">:</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151867">switch</span>&nbsp;<span class="ident" id="6151874"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151875">.</span><span class="ident" id="6151876"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151879">[</span><span class="num" id="6151880">9</span><span class="op" id="6151881">]</span>&nbsp;<span class="op" id="6151883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151887">case</span>&nbsp;<span class="ident" id="6151892"><a href="/gostd/image/png/reader.go.html#6148814">ctGrayscale</a></span><span class="op" id="6151903">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151908"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151909">.</span><span class="ident" id="6151910"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6151913">=</span>&nbsp;<span class="ident" id="6151915"><a href="/gostd/image/png/reader.go.html#6149013">cbG2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151922">case</span>&nbsp;<span class="ident" id="6151927"><a href="/gostd/image/png/reader.go.html#6148858">ctPaletted</a></span><span class="op" id="6151937">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6151942"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151943">.</span><span class="ident" id="6151944"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6151947">=</span>&nbsp;<span class="ident" id="6151949"><a href="/gostd/image/png/reader.go.html#6149051">cbP2</a></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6151956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151959">case</span>&nbsp;<span class="num" id="6151964">4</span><span class="op" id="6151965">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151969">switch</span>&nbsp;<span class="ident" id="6151976"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6151977">.</span><span class="ident" id="6151978"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6151981">[</span><span class="num" id="6151982">9</span><span class="op" id="6151983">]</span>&nbsp;<span class="op" id="6151985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6151989">case</span>&nbsp;<span class="ident" id="6151994"><a href="/gostd/image/png/reader.go.html#6148814">ctGrayscale</a></span><span class="op" id="6152005">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152010"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152011">.</span><span class="ident" id="6152012"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152015">=</span>&nbsp;<span class="ident" id="6152017"><a href="/gostd/image/png/reader.go.html#6149019">cbG4</a></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152024">case</span>&nbsp;<span class="ident" id="6152029"><a href="/gostd/image/png/reader.go.html#6148858">ctPaletted</a></span><span class="op" id="6152039">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152044"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152045">.</span><span class="ident" id="6152046"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152049">=</span>&nbsp;<span class="ident" id="6152051"><a href="/gostd/image/png/reader.go.html#6149057">cbP4</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152061">case</span>&nbsp;<span class="num" id="6152066">8</span><span class="op" id="6152067">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152071">switch</span>&nbsp;<span class="ident" id="6152078"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152079">.</span><span class="ident" id="6152080"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6152083">[</span><span class="num" id="6152084">9</span><span class="op" id="6152085">]</span>&nbsp;<span class="op" id="6152087">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152091">case</span>&nbsp;<span class="ident" id="6152096"><a href="/gostd/image/png/reader.go.html#6148814">ctGrayscale</a></span><span class="op" id="6152107">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152112"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152113">.</span><span class="ident" id="6152114"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152117">=</span>&nbsp;<span class="ident" id="6152119"><a href="/gostd/image/png/reader.go.html#6149025">cbG8</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152126">case</span>&nbsp;<span class="ident" id="6152131"><a href="/gostd/image/png/reader.go.html#6148836">ctTrueColor</a></span><span class="op" id="6152142">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152147"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152148">.</span><span class="ident" id="6152149"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152152">=</span>&nbsp;<span class="ident" id="6152154"><a href="/gostd/image/png/reader.go.html#6149038">cbTC8</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152162">case</span>&nbsp;<span class="ident" id="6152167"><a href="/gostd/image/png/reader.go.html#6148858">ctPaletted</a></span><span class="op" id="6152177">:</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152182"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152183">.</span><span class="ident" id="6152184"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152187">=</span>&nbsp;<span class="ident" id="6152189"><a href="/gostd/image/png/reader.go.html#6149063">cbP8</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152196">case</span>&nbsp;<span class="ident" id="6152201"><a href="/gostd/image/png/reader.go.html#6148880">ctGrayscaleAlpha</a></span><span class="op" id="6152217">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152222"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152223">.</span><span class="ident" id="6152224"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152227">=</span>&nbsp;<span class="ident" id="6152229"><a href="/gostd/image/png/reader.go.html#6149031">cbGA8</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152237">case</span>&nbsp;<span class="ident" id="6152242"><a href="/gostd/image/png/reader.go.html#6148902">ctTrueColorAlpha</a></span><span class="op" id="6152258">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152263"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152264">.</span><span class="ident" id="6152265"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152268">=</span>&nbsp;<span class="ident" id="6152270"><a href="/gostd/image/png/reader.go.html#6149069">cbTCA8</a></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152282">case</span>&nbsp;<span class="num" id="6152287">16</span><span class="op" id="6152289">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152293">switch</span>&nbsp;<span class="ident" id="6152300"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152301">.</span><span class="ident" id="6152302"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6152305">[</span><span class="num" id="6152306">9</span><span class="op" id="6152307">]</span>&nbsp;<span class="op" id="6152309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152313">case</span>&nbsp;<span class="ident" id="6152318"><a href="/gostd/image/png/reader.go.html#6148814">ctGrayscale</a></span><span class="op" id="6152329">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152334"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152335">.</span><span class="ident" id="6152336"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152339">=</span>&nbsp;<span class="ident" id="6152341"><a href="/gostd/image/png/reader.go.html#6149077">cbG16</a></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152349">case</span>&nbsp;<span class="ident" id="6152354"><a href="/gostd/image/png/reader.go.html#6148836">ctTrueColor</a></span><span class="op" id="6152365">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152370"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152371">.</span><span class="ident" id="6152372"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152375">=</span>&nbsp;<span class="ident" id="6152377"><a href="/gostd/image/png/reader.go.html#6149092">cbTC16</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152386">case</span>&nbsp;<span class="ident" id="6152391"><a href="/gostd/image/png/reader.go.html#6148880">ctGrayscaleAlpha</a></span><span class="op" id="6152407">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152412"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152413">.</span><span class="ident" id="6152414"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152417">=</span>&nbsp;<span class="ident" id="6152419"><a href="/gostd/image/png/reader.go.html#6149084">cbGA16</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152428">case</span>&nbsp;<span class="ident" id="6152433"><a href="/gostd/image/png/reader.go.html#6148902">ctTrueColorAlpha</a></span><span class="op" id="6152449">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152454"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152455">.</span><span class="ident" id="6152456"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152459">=</span>&nbsp;<span class="ident" id="6152461"><a href="/gostd/image/png/reader.go.html#6149100">cbTCA16</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152477">if</span>&nbsp;<span class="ident" id="6152480"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152481">.</span><span class="ident" id="6152482"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152485">==</span>&nbsp;<span class="ident" id="6152488"><a href="/gostd/image/png/reader.go.html#6148989">cbInvalid</a></span>&nbsp;<span class="op" id="6152498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152502">return</span>&nbsp;<span class="ident" id="6152509"><a href="/gostd/image/png/reader.go.html#6150743">UnsupportedError</a></span><span class="op" id="6152525">(</span><span class="ident" id="6152526"><a href="/gostd/image/png/reader.go.html#6148708">fmt</a></span><span class="op" id="6152529">.</span><span class="ident" id="6152530"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6152537">(</span><span class="string" id="6152538">&#34;bit&nbsp;depth&nbsp;%d,&nbsp;color&nbsp;type&nbsp;%d&#34;</span><span class="op" id="6152567">,</span>&nbsp;<span class="ident" id="6152569"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152570">.</span><span class="ident" id="6152571"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6152574">[</span><span class="num" id="6152575">8</span><span class="op" id="6152576">]</span><span class="op" id="6152577">,</span>&nbsp;<span class="ident" id="6152579"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152580">.</span><span class="ident" id="6152581"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6152584">[</span><span class="num" id="6152585">9</span><span class="op" id="6152586">]</span><span class="op" id="6152587">)</span><span class="op" id="6152588">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152594"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152595">.</span><span class="ident" id="6152596"><a href="/gostd/image/png/reader.go.html#6150245">width</a></span><span class="op" id="6152601">,</span>&nbsp;<span class="ident" id="6152603"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152604">.</span><span class="ident" id="6152605"><a href="/gostd/image/png/reader.go.html#6150252">height</a></span>&nbsp;<span class="op" id="6152612">=</span>&nbsp;<span class="builtintype" id="6152614">int</span><span class="op" id="6152617">(</span><span class="ident" id="6152618"><a href="/gostd/image/png/reader.go.html#6151409">w</a></span><span class="op" id="6152619">)</span><span class="op" id="6152620">,</span>&nbsp;<span class="builtintype" id="6152622">int</span><span class="op" id="6152625">(</span><span class="ident" id="6152626"><a href="/gostd/image/png/reader.go.html#6151458">h</a></span><span class="op" id="6152627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152630">return</span>&nbsp;<span class="ident" id="6152637"><a href="/gostd/image/png/reader.go.html#6150932">d</a></span><span class="op" id="6152638">.</span><span class="ident" id="6152639"><a href="/gostd/image/png/reader.go.html#6166713">verifyChecksum</a></span><span class="op" id="6152653">(</span><span class="op" id="6152654">)</span><br>
<span class="lineno"></span><span class="op" id="6152656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="6152659">func</span>&nbsp;<span class="op" id="6152664">(</span><span class="ident" id="6152665">d</span>&nbsp;<span class="op" id="6152667">*</span><span class="ident" id="6152668"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6152675">)</span>&nbsp;<span class="ident" id="6152677">parsePLTE</span><span class="op" id="6152686">(</span><span class="ident" id="6152687">length</span>&nbsp;<span class="builtintype" id="6152694">uint32</span><span class="op" id="6152700">)</span>&nbsp;<span class="builtintype" id="6152702">error</span>&nbsp;<span class="op" id="6152708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152711">np</span>&nbsp;<span class="op" id="6152714">:=</span>&nbsp;<span class="builtintype" id="6152717">int</span><span class="op" id="6152720">(</span><span class="ident" id="6152721"><a href="/gostd/image/png/reader.go.html#6152687">length</a></span>&nbsp;<span class="op" id="6152728">/</span>&nbsp;<span class="num" id="6152730">3</span><span class="op" id="6152731">)</span>&nbsp;<span class="comment" id="6152733">//&nbsp;The&nbsp;number&nbsp;of&nbsp;palette&nbsp;entries.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152768">if</span>&nbsp;<span class="ident" id="6152771"><a href="/gostd/image/png/reader.go.html#6152687">length</a></span><span class="op" id="6152777">%</span><span class="num" id="6152778">3</span>&nbsp;<span class="op" id="6152780">!=</span>&nbsp;<span class="num" id="6152783">0</span>&nbsp;<span class="op" id="6152785">||</span>&nbsp;<span class="ident" id="6152788"><a href="/gostd/image/png/reader.go.html#6152711">np</a></span>&nbsp;<span class="op" id="6152791">&lt;=</span>&nbsp;<span class="num" id="6152794">0</span>&nbsp;<span class="op" id="6152796">||</span>&nbsp;<span class="ident" id="6152799"><a href="/gostd/image/png/reader.go.html#6152711">np</a></span>&nbsp;<span class="op" id="6152802">&gt;</span>&nbsp;<span class="num" id="6152804">256</span>&nbsp;<span class="op" id="6152808">||</span>&nbsp;<span class="ident" id="6152811"><a href="/gostd/image/png/reader.go.html#6152711">np</a></span>&nbsp;<span class="op" id="6152814">&gt;</span>&nbsp;<span class="num" id="6152816">1</span><span class="op" id="6152817">&lt;&lt;</span><span class="builtintype" id="6152819">uint</span><span class="op" id="6152823">(</span><span class="ident" id="6152824"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6152825">.</span><span class="ident" id="6152826"><a href="/gostd/image/png/reader.go.html#6150264">depth</a></span><span class="op" id="6152831">)</span>&nbsp;<span class="op" id="6152833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152837">return</span>&nbsp;<span class="ident" id="6152844"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6152855">(</span><span class="string" id="6152856">&#34;bad&nbsp;PLTE&nbsp;length&#34;</span><span class="op" id="6152873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152876">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152879">n</span><span class="op" id="6152880">,</span>&nbsp;<span class="ident" id="6152882">err</span>&nbsp;<span class="op" id="6152886">:=</span>&nbsp;<span class="ident" id="6152889"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6152891">.</span><span class="ident" id="6152892"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="6152900">(</span><span class="ident" id="6152901"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6152902">.</span><span class="ident" id="6152903"><a href="/gostd/image/png/reader.go.html#6150166">r</a></span><span class="op" id="6152904">,</span>&nbsp;<span class="ident" id="6152906"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6152907">.</span><span class="ident" id="6152908"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6152911">[</span><span class="op" id="6152912">:</span><span class="num" id="6152913">3</span><span class="op" id="6152914">*</span><span class="ident" id="6152915"><a href="/gostd/image/png/reader.go.html#6152711">np</a></span><span class="op" id="6152917">]</span><span class="op" id="6152918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152921">if</span>&nbsp;<span class="ident" id="6152924"><a href="/gostd/image/png/reader.go.html#6152882">err</a></span>&nbsp;<span class="op" id="6152928">!=</span>&nbsp;<span class="builtintype" id="6152931">nil</span>&nbsp;<span class="op" id="6152935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152939">return</span>&nbsp;<span class="ident" id="6152946"><a href="/gostd/image/png/reader.go.html#6152882">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6152951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6152954"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6152955">.</span><span class="ident" id="6152956"><a href="/gostd/image/png/reader.go.html#6150218">crc</a></span><span class="op" id="6152959">.</span><span class="ident" id="6152960"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="6152965">(</span><span class="ident" id="6152966"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6152967">.</span><span class="ident" id="6152968"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6152971">[</span><span class="op" id="6152972">:</span><span class="ident" id="6152973"><a href="/gostd/image/png/reader.go.html#6152879">n</a></span><span class="op" id="6152974">]</span><span class="op" id="6152975">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152978">switch</span>&nbsp;<span class="ident" id="6152985"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6152986">.</span><span class="ident" id="6152987"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6152990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6152993">case</span>&nbsp;<span class="ident" id="6152998"><a href="/gostd/image/png/reader.go.html#6149045">cbP1</a></span><span class="op" id="6153002">,</span>&nbsp;<span class="ident" id="6153004"><a href="/gostd/image/png/reader.go.html#6149051">cbP2</a></span><span class="op" id="6153008">,</span>&nbsp;<span class="ident" id="6153010"><a href="/gostd/image/png/reader.go.html#6149057">cbP4</a></span><span class="op" id="6153014">,</span>&nbsp;<span class="ident" id="6153016"><a href="/gostd/image/png/reader.go.html#6149063">cbP8</a></span><span class="op" id="6153020">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6153024"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6153025">.</span><span class="ident" id="6153026"><a href="/gostd/image/png/reader.go.html#6150283">palette</a></span>&nbsp;<span class="op" id="6153034">=</span>&nbsp;<span class="builtinfunc" id="6153036">make</span><span class="op" id="6153040">(</span><span class="ident" id="6153041"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6153046">.</span><span class="ident" id="6153047"><a href="/gostd/image/color/color.go.html#5190467">Palette</a></span><span class="op" id="6153054">,</span>&nbsp;<span class="num" id="6153056">256</span><span class="op" id="6153059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6153063">for</span>&nbsp;<span class="ident" id="6153067">i</span>&nbsp;<span class="op" id="6153069">:=</span>&nbsp;<span class="num" id="6153072">0</span><span class="op" id="6153073">;</span>&nbsp;<span class="ident" id="6153075"><a href="/gostd/image/png/reader.go.html#6153067">i</a></span>&nbsp;<span class="op" id="6153077">&lt;</span>&nbsp;<span class="ident" id="6153079"><a href="/gostd/image/png/reader.go.html#6152711">np</a></span><span class="op" id="6153081">;</span>&nbsp;<span class="ident" id="6153083"><a href="/gostd/image/png/reader.go.html#6153067">i</a></span><span class="op" id="6153084">++</span>&nbsp;<span class="op" id="6153087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6153092"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6153093">.</span><span class="ident" id="6153094"><a href="/gostd/image/png/reader.go.html#6150283">palette</a></span><span class="op" id="6153101">[</span><span class="ident" id="6153102"><a href="/gostd/image/png/reader.go.html#6153067">i</a></span><span class="op" id="6153103">]</span>&nbsp;<span class="op" id="6153105">=</span>&nbsp;<span class="ident" id="6153107"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6153112">.</span><span class="ident" id="6153113"><a href="/gostd/image/color/color.go.html#5185612">RGBA</a></span><span class="op" id="6153117">{</span><span class="ident" id="6153118"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6153119">.</span><span class="ident" id="6153120"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6153123">[</span><span class="num" id="6153124">3</span><span class="op" id="6153125">*</span><span class="ident" id="6153126"><a href="/gostd/image/png/reader.go.html#6153067">i</a></span><span class="op" id="6153127">+</span><span class="num" id="6153128">0</span><span class="op" id="6153129">]</span><span class="op" id="6153130">,</span>&nbsp;<span class="ident" id="6153132"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6153133">.</span><span class="ident" id="6153134"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6153137">[</span><span class="num" id="6153138">3</span><span class="op" id="6153139">*</span><span class="ident" id="6153140"><a href="/gostd/image/png/reader.go.html#6153067">i</a></span><span class="op" id="6153141">+</span><span class="num" id="6153142">1</span><span class="op" id="6153143">]</span><span class="op" id="6153144">,</span>&nbsp;<span class="ident" id="6153146"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6153147">.</span><span class="ident" id="6153148"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6153151">[</span><span class="num" id="6153152">3</span><span class="op" id="6153153">*</span><span class="ident" id="6153154"><a href="/gostd/image/png/reader.go.html#6153067">i</a></span><span class="op" id="6153155">+</span><span class="num" id="6153156">2</span><span class="op" id="6153157">]</span><span class="op" id="6153158">,</span>&nbsp;<span class="num" id="6153160">0xff</span><span class="op" id="6153164">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6153168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6153172">for</span>&nbsp;<span class="ident" id="6153176">i</span>&nbsp;<span class="op" id="6153178">:=</span>&nbsp;<span class="ident" id="6153181"><a href="/gostd/image/png/reader.go.html#6152711">np</a></span><span class="op" id="6153183">;</span>&nbsp;<span class="ident" id="6153185"><a href="/gostd/image/png/reader.go.html#6153176">i</a></span>&nbsp;<span class="op" id="6153187">&lt;</span>&nbsp;<span class="num" id="6153189">256</span><span class="op" id="6153192">;</span>&nbsp;<span class="ident" id="6153194"><a href="/gostd/image/png/reader.go.html#6153176">i</a></span><span class="op" id="6153195">++</span>&nbsp;<span class="op" id="6153198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6153203">//&nbsp;Initialize&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;palette&nbsp;to&nbsp;opaque&nbsp;black.&nbsp;The&nbsp;spec&nbsp;(section</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6153279">//&nbsp;11.2.3)&nbsp;says&nbsp;that&nbsp;&#34;any&nbsp;out-of-range&nbsp;pixel&nbsp;value&nbsp;found&nbsp;in&nbsp;the&nbsp;image&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6153357">//&nbsp;is&nbsp;an&nbsp;error&#34;,&nbsp;but&nbsp;some&nbsp;real-world&nbsp;PNG&nbsp;files&nbsp;have&nbsp;out-of-range&nbsp;pixel</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6153431">//&nbsp;values.&nbsp;We&nbsp;fall&nbsp;back&nbsp;to&nbsp;opaque&nbsp;black,&nbsp;the&nbsp;same&nbsp;as&nbsp;libpng&nbsp;1.5.13;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6153502">//&nbsp;ImageMagick&nbsp;6.5.7&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6153544"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6153545">.</span><span class="ident" id="6153546"><a href="/gostd/image/png/reader.go.html#6150283">palette</a></span><span class="op" id="6153553">[</span><span class="ident" id="6153554"><a href="/gostd/image/png/reader.go.html#6153176">i</a></span><span class="op" id="6153555">]</span>&nbsp;<span class="op" id="6153557">=</span>&nbsp;<span class="ident" id="6153559"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6153564">.</span><span class="ident" id="6153565"><a href="/gostd/image/color/color.go.html#5185612">RGBA</a></span><span class="op" id="6153569">{</span><span class="num" id="6153570">0x00</span><span class="op" id="6153574">,</span>&nbsp;<span class="num" id="6153576">0x00</span><span class="op" id="6153580">,</span>&nbsp;<span class="num" id="6153582">0x00</span><span class="op" id="6153586">,</span>&nbsp;<span class="num" id="6153588">0xff</span><span class="op" id="6153592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6153596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6153600"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6153601">.</span><span class="ident" id="6153602"><a href="/gostd/image/png/reader.go.html#6150283">palette</a></span>&nbsp;<span class="op" id="6153610">=</span>&nbsp;<span class="ident" id="6153612"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6153613">.</span><span class="ident" id="6153614"><a href="/gostd/image/png/reader.go.html#6150283">palette</a></span><span class="op" id="6153621">[</span><span class="op" id="6153622">:</span><span class="ident" id="6153623"><a href="/gostd/image/png/reader.go.html#6152711">np</a></span><span class="op" id="6153625">]</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6153628">case</span>&nbsp;<span class="ident" id="6153633"><a href="/gostd/image/png/reader.go.html#6149038">cbTC8</a></span><span class="op" id="6153638">,</span>&nbsp;<span class="ident" id="6153640"><a href="/gostd/image/png/reader.go.html#6149069">cbTCA8</a></span><span class="op" id="6153646">,</span>&nbsp;<span class="ident" id="6153648"><a href="/gostd/image/png/reader.go.html#6149092">cbTC16</a></span><span class="op" id="6153654">,</span>&nbsp;<span class="ident" id="6153656"><a href="/gostd/image/png/reader.go.html#6149100">cbTCA16</a></span><span class="op" id="6153663">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6153667">//&nbsp;As&nbsp;per&nbsp;the&nbsp;PNG&nbsp;spec,&nbsp;a&nbsp;PLTE&nbsp;chunk&nbsp;is&nbsp;optional&nbsp;(and&nbsp;for&nbsp;practical&nbsp;purposes,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6153747">//&nbsp;ignorable)&nbsp;for&nbsp;the&nbsp;ctTrueColor&nbsp;and&nbsp;ctTrueColorAlpha&nbsp;color&nbsp;types&nbsp;(section&nbsp;4.1.2).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6153832">default</span><span class="op" id="6153839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6153843">return</span>&nbsp;<span class="ident" id="6153850"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6153861">(</span><span class="string" id="6153862">&#34;PLTE,&nbsp;color&nbsp;type&nbsp;mismatch&#34;</span><span class="op" id="6153889">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6153892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6153895">return</span>&nbsp;<span class="ident" id="6153902"><a href="/gostd/image/png/reader.go.html#6152665">d</a></span><span class="op" id="6153903">.</span><span class="ident" id="6153904"><a href="/gostd/image/png/reader.go.html#6166713">verifyChecksum</a></span><span class="op" id="6153918">(</span><span class="op" id="6153919">)</span><br>
<span class="lineno"></span><span class="op" id="6153921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6153924">func</span>&nbsp;<span class="op" id="6153929">(</span><span class="ident" id="6153930">d</span>&nbsp;<span class="op" id="6153932">*</span><span class="ident" id="6153933"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6153940">)</span>&nbsp;<span class="ident" id="6153942">parsetRNS</span><span class="op" id="6153951">(</span><span class="ident" id="6153952">length</span>&nbsp;<span class="builtintype" id="6153959">uint32</span><span class="op" id="6153965">)</span>&nbsp;<span class="builtintype" id="6153967">error</span>&nbsp;<span class="op" id="6153973">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6153976">if</span>&nbsp;<span class="ident" id="6153979"><a href="/gostd/image/png/reader.go.html#6153952">length</a></span>&nbsp;<span class="op" id="6153986">&gt;</span>&nbsp;<span class="num" id="6153988">256</span>&nbsp;<span class="op" id="6153992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6153996">return</span>&nbsp;<span class="ident" id="6154003"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6154014">(</span><span class="string" id="6154015">&#34;bad&nbsp;tRNS&nbsp;length&#34;</span><span class="op" id="6154032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6154035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6154038">n</span><span class="op" id="6154039">,</span>&nbsp;<span class="ident" id="6154041">err</span>&nbsp;<span class="op" id="6154045">:=</span>&nbsp;<span class="ident" id="6154048"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6154050">.</span><span class="ident" id="6154051"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="6154059">(</span><span class="ident" id="6154060"><a href="/gostd/image/png/reader.go.html#6153930">d</a></span><span class="op" id="6154061">.</span><span class="ident" id="6154062"><a href="/gostd/image/png/reader.go.html#6150166">r</a></span><span class="op" id="6154063">,</span>&nbsp;<span class="ident" id="6154065"><a href="/gostd/image/png/reader.go.html#6153930">d</a></span><span class="op" id="6154066">.</span><span class="ident" id="6154067"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6154070">[</span><span class="op" id="6154071">:</span><span class="ident" id="6154072"><a href="/gostd/image/png/reader.go.html#6153952">length</a></span><span class="op" id="6154078">]</span><span class="op" id="6154079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154082">if</span>&nbsp;<span class="ident" id="6154085"><a href="/gostd/image/png/reader.go.html#6154041">err</a></span>&nbsp;<span class="op" id="6154089">!=</span>&nbsp;<span class="builtintype" id="6154092">nil</span>&nbsp;<span class="op" id="6154096">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154100">return</span>&nbsp;<span class="ident" id="6154107"><a href="/gostd/image/png/reader.go.html#6154041">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6154112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6154115"><a href="/gostd/image/png/reader.go.html#6153930">d</a></span><span class="op" id="6154116">.</span><span class="ident" id="6154117"><a href="/gostd/image/png/reader.go.html#6150218">crc</a></span><span class="op" id="6154120">.</span><span class="ident" id="6154121"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="6154126">(</span><span class="ident" id="6154127"><a href="/gostd/image/png/reader.go.html#6153930">d</a></span><span class="op" id="6154128">.</span><span class="ident" id="6154129"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6154132">[</span><span class="op" id="6154133">:</span><span class="ident" id="6154134"><a href="/gostd/image/png/reader.go.html#6154038">n</a></span><span class="op" id="6154135">]</span><span class="op" id="6154136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154139">switch</span>&nbsp;<span class="ident" id="6154146"><a href="/gostd/image/png/reader.go.html#6153930">d</a></span><span class="op" id="6154147">.</span><span class="ident" id="6154148"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6154151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154154">case</span>&nbsp;<span class="ident" id="6154159"><a href="/gostd/image/png/reader.go.html#6149025">cbG8</a></span><span class="op" id="6154163">,</span>&nbsp;<span class="ident" id="6154165"><a href="/gostd/image/png/reader.go.html#6149077">cbG16</a></span><span class="op" id="6154170">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154174">return</span>&nbsp;<span class="ident" id="6154181"><a href="/gostd/image/png/reader.go.html#6150743">UnsupportedError</a></span><span class="op" id="6154197">(</span><span class="string" id="6154198">&#34;grayscale&nbsp;transparency&#34;</span><span class="op" id="6154222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154225">case</span>&nbsp;<span class="ident" id="6154230"><a href="/gostd/image/png/reader.go.html#6149038">cbTC8</a></span><span class="op" id="6154235">,</span>&nbsp;<span class="ident" id="6154237"><a href="/gostd/image/png/reader.go.html#6149092">cbTC16</a></span><span class="op" id="6154243">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154247">return</span>&nbsp;<span class="ident" id="6154254"><a href="/gostd/image/png/reader.go.html#6150743">UnsupportedError</a></span><span class="op" id="6154270">(</span><span class="string" id="6154271">&#34;truecolor&nbsp;transparency&#34;</span><span class="op" id="6154295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154298">case</span>&nbsp;<span class="ident" id="6154303"><a href="/gostd/image/png/reader.go.html#6149045">cbP1</a></span><span class="op" id="6154307">,</span>&nbsp;<span class="ident" id="6154309"><a href="/gostd/image/png/reader.go.html#6149051">cbP2</a></span><span class="op" id="6154313">,</span>&nbsp;<span class="ident" id="6154315"><a href="/gostd/image/png/reader.go.html#6149057">cbP4</a></span><span class="op" id="6154319">,</span>&nbsp;<span class="ident" id="6154321"><a href="/gostd/image/png/reader.go.html#6149063">cbP8</a></span><span class="op" id="6154325">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154329">if</span>&nbsp;<span class="builtinfunc" id="6154332">len</span><span class="op" id="6154335">(</span><span class="ident" id="6154336"><a href="/gostd/image/png/reader.go.html#6153930">d</a></span><span class="op" id="6154337">.</span><span class="ident" id="6154338"><a href="/gostd/image/png/reader.go.html#6150283">palette</a></span><span class="op" id="6154345">)</span>&nbsp;<span class="op" id="6154347">&lt;</span>&nbsp;<span class="ident" id="6154349"><a href="/gostd/image/png/reader.go.html#6154038">n</a></span>&nbsp;<span class="op" id="6154351">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6154356"><a href="/gostd/image/png/reader.go.html#6153930">d</a></span><span class="op" id="6154357">.</span><span class="ident" id="6154358"><a href="/gostd/image/png/reader.go.html#6150283">palette</a></span>&nbsp;<span class="op" id="6154366">=</span>&nbsp;<span class="ident" id="6154368"><a href="/gostd/image/png/reader.go.html#6153930">d</a></span><span class="op" id="6154369">.</span><span class="ident" id="6154370"><a href="/gostd/image/png/reader.go.html#6150283">palette</a></span><span class="op" id="6154377">[</span><span class="op" id="6154378">:</span><span class="ident" id="6154379"><a href="/gostd/image/png/reader.go.html#6154038">n</a></span><span class="op" id="6154380">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6154384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154388">for</span>&nbsp;<span class="ident" id="6154392">i</span>&nbsp;<span class="op" id="6154394">:=</span>&nbsp;<span class="num" id="6154397">0</span><span class="op" id="6154398">;</span>&nbsp;<span class="ident" id="6154400"><a href="/gostd/image/png/reader.go.html#6154392">i</a></span>&nbsp;<span class="op" id="6154402">&lt;</span>&nbsp;<span class="ident" id="6154404"><a href="/gostd/image/png/reader.go.html#6154038">n</a></span><span class="op" id="6154405">;</span>&nbsp;<span class="ident" id="6154407"><a href="/gostd/image/png/reader.go.html#6154392">i</a></span><span class="op" id="6154408">++</span>&nbsp;<span class="op" id="6154411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6154416">rgba</span>&nbsp;<span class="op" id="6154421">:=</span>&nbsp;<span class="ident" id="6154424"><a href="/gostd/image/png/reader.go.html#6153930">d</a></span><span class="op" id="6154425">.</span><span class="ident" id="6154426"><a href="/gostd/image/png/reader.go.html#6150283">palette</a></span><span class="op" id="6154433">[</span><span class="ident" id="6154434"><a href="/gostd/image/png/reader.go.html#6154392">i</a></span><span class="op" id="6154435">]</span><span class="op" id="6154436">.</span><span class="op" id="6154437">(</span><span class="ident" id="6154438"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6154443">.</span><span class="ident" id="6154444"><a href="/gostd/image/color/color.go.html#5185612">RGBA</a></span><span class="op" id="6154448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6154453"><a href="/gostd/image/png/reader.go.html#6153930">d</a></span><span class="op" id="6154454">.</span><span class="ident" id="6154455"><a href="/gostd/image/png/reader.go.html#6150283">palette</a></span><span class="op" id="6154462">[</span><span class="ident" id="6154463"><a href="/gostd/image/png/reader.go.html#6154392">i</a></span><span class="op" id="6154464">]</span>&nbsp;<span class="op" id="6154466">=</span>&nbsp;<span class="ident" id="6154468"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6154473">.</span><span class="ident" id="6154474"><a href="/gostd/image/color/color.go.html#5186151">NRGBA</a></span><span class="op" id="6154479">{</span><span class="ident" id="6154480"><a href="/gostd/image/png/reader.go.html#6154416">rgba</a></span><span class="op" id="6154484">.</span><span class="ident" id="6154485"><a href="/gostd/image/color/color.go.html#5185627">R</a></span><span class="op" id="6154486">,</span>&nbsp;<span class="ident" id="6154488"><a href="/gostd/image/png/reader.go.html#6154416">rgba</a></span><span class="op" id="6154492">.</span><span class="ident" id="6154493"><a href="/gostd/image/color/color.go.html#5185630">G</a></span><span class="op" id="6154494">,</span>&nbsp;<span class="ident" id="6154496"><a href="/gostd/image/png/reader.go.html#6154416">rgba</a></span><span class="op" id="6154500">.</span><span class="ident" id="6154501"><a href="/gostd/image/color/color.go.html#5185633">B</a></span><span class="op" id="6154502">,</span>&nbsp;<span class="ident" id="6154504"><a href="/gostd/image/png/reader.go.html#6153930">d</a></span><span class="op" id="6154505">.</span><span class="ident" id="6154506"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6154509">[</span><span class="ident" id="6154510"><a href="/gostd/image/png/reader.go.html#6154392">i</a></span><span class="op" id="6154511">]</span><span class="op" id="6154512">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6154516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154519">case</span>&nbsp;<span class="ident" id="6154524"><a href="/gostd/image/png/reader.go.html#6149031">cbGA8</a></span><span class="op" id="6154529">,</span>&nbsp;<span class="ident" id="6154531"><a href="/gostd/image/png/reader.go.html#6149084">cbGA16</a></span><span class="op" id="6154537">,</span>&nbsp;<span class="ident" id="6154539"><a href="/gostd/image/png/reader.go.html#6149069">cbTCA8</a></span><span class="op" id="6154545">,</span>&nbsp;<span class="ident" id="6154547"><a href="/gostd/image/png/reader.go.html#6149100">cbTCA16</a></span><span class="op" id="6154554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154558">return</span>&nbsp;<span class="ident" id="6154565"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6154576">(</span><span class="string" id="6154577">&#34;tRNS,&nbsp;color&nbsp;type&nbsp;mismatch&#34;</span><span class="op" id="6154604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6154607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6154610">return</span>&nbsp;<span class="ident" id="6154617"><a href="/gostd/image/png/reader.go.html#6153930">d</a></span><span class="op" id="6154618">.</span><span class="ident" id="6154619"><a href="/gostd/image/png/reader.go.html#6166713">verifyChecksum</a></span><span class="op" id="6154633">(</span><span class="op" id="6154634">)</span><br>
<span class="lineno">275</span><span class="op" id="6154636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6154639">//&nbsp;Read&nbsp;presents&nbsp;one&nbsp;or&nbsp;more&nbsp;IDAT&nbsp;chunks&nbsp;as&nbsp;one&nbsp;continuous&nbsp;stream&nbsp;(minus&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6154716">//&nbsp;intermediate&nbsp;chunk&nbsp;headers&nbsp;and&nbsp;footers).&nbsp;If&nbsp;the&nbsp;PNG&nbsp;data&nbsp;looked&nbsp;like:</span><br>
<span class="lineno"></span><span class="comment" id="6154789">//&nbsp;&nbsp;&nbsp;...&nbsp;len0&nbsp;IDAT&nbsp;xxx&nbsp;crc0&nbsp;len1&nbsp;IDAT&nbsp;yy&nbsp;crc1&nbsp;len2&nbsp;IEND&nbsp;crc2</span><br>
<span class="lineno">280</span><span class="comment" id="6154850">//&nbsp;then&nbsp;this&nbsp;reader&nbsp;presents&nbsp;xxxyy.&nbsp;For&nbsp;well-formed&nbsp;PNG&nbsp;data,&nbsp;the&nbsp;decoder&nbsp;state</span><br>
<span class="lineno"></span><span class="comment" id="6154930">//&nbsp;immediately&nbsp;before&nbsp;the&nbsp;first&nbsp;Read&nbsp;call&nbsp;is&nbsp;that&nbsp;d.r&nbsp;is&nbsp;positioned&nbsp;between&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6155010">//&nbsp;first&nbsp;IDAT&nbsp;and&nbsp;xxx,&nbsp;and&nbsp;the&nbsp;decoder&nbsp;state&nbsp;immediately&nbsp;after&nbsp;the&nbsp;last&nbsp;Read</span><br>
<span class="lineno"></span><span class="comment" id="6155087">//&nbsp;call&nbsp;is&nbsp;that&nbsp;d.r&nbsp;is&nbsp;positioned&nbsp;between&nbsp;yy&nbsp;and&nbsp;crc1.</span><br>
<span class="lineno"></span><span class="keyword" id="6155142">func</span>&nbsp;<span class="op" id="6155147">(</span><span class="ident" id="6155148">d</span>&nbsp;<span class="op" id="6155150">*</span><span class="ident" id="6155151"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6155158">)</span>&nbsp;<span class="ident" id="6155160">Read</span><span class="op" id="6155164">(</span><span class="ident" id="6155165">p</span>&nbsp;<span class="op" id="6155167">[</span><span class="op" id="6155168">]</span><span class="builtintype" id="6155169">byte</span><span class="op" id="6155173">)</span>&nbsp;<span class="op" id="6155175">(</span><span class="builtintype" id="6155176">int</span><span class="op" id="6155179">,</span>&nbsp;<span class="builtintype" id="6155181">error</span><span class="op" id="6155186">)</span>&nbsp;<span class="op" id="6155188">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6155191">if</span>&nbsp;<span class="builtinfunc" id="6155194">len</span><span class="op" id="6155197">(</span><span class="ident" id="6155198"><a href="/gostd/image/png/reader.go.html#6155165">p</a></span><span class="op" id="6155199">)</span>&nbsp;<span class="op" id="6155201">==</span>&nbsp;<span class="num" id="6155204">0</span>&nbsp;<span class="op" id="6155206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6155210">return</span>&nbsp;<span class="num" id="6155217">0</span><span class="op" id="6155218">,</span>&nbsp;<span class="builtintype" id="6155220">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6155225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6155228">for</span>&nbsp;<span class="ident" id="6155232"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155233">.</span><span class="ident" id="6155234"><a href="/gostd/image/png/reader.go.html#6150350">idatLength</a></span>&nbsp;<span class="op" id="6155245">==</span>&nbsp;<span class="num" id="6155248">0</span>&nbsp;<span class="op" id="6155250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6155254">//&nbsp;We&nbsp;have&nbsp;exhausted&nbsp;an&nbsp;IDAT&nbsp;chunk.&nbsp;Verify&nbsp;the&nbsp;checksum&nbsp;of&nbsp;that&nbsp;chunk.</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6155327">if</span>&nbsp;<span class="ident" id="6155330">err</span>&nbsp;<span class="op" id="6155334">:=</span>&nbsp;<span class="ident" id="6155337"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155338">.</span><span class="ident" id="6155339"><a href="/gostd/image/png/reader.go.html#6166713">verifyChecksum</a></span><span class="op" id="6155353">(</span><span class="op" id="6155354">)</span><span class="op" id="6155355">;</span>&nbsp;<span class="ident" id="6155357"><a href="/gostd/image/png/reader.go.html#6155330">err</a></span>&nbsp;<span class="op" id="6155361">!=</span>&nbsp;<span class="builtintype" id="6155364">nil</span>&nbsp;<span class="op" id="6155368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6155373">return</span>&nbsp;<span class="num" id="6155380">0</span><span class="op" id="6155381">,</span>&nbsp;<span class="ident" id="6155383"><a href="/gostd/image/png/reader.go.html#6155330">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6155389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6155393">//&nbsp;Read&nbsp;the&nbsp;length&nbsp;and&nbsp;chunk&nbsp;type&nbsp;of&nbsp;the&nbsp;next&nbsp;chunk,&nbsp;and&nbsp;check&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6155463">//&nbsp;it&nbsp;is&nbsp;an&nbsp;IDAT&nbsp;chunk.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6155489">if</span>&nbsp;<span class="ident" id="6155492">_</span><span class="op" id="6155493">,</span>&nbsp;<span class="ident" id="6155495">err</span>&nbsp;<span class="op" id="6155499">:=</span>&nbsp;<span class="ident" id="6155502"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6155504">.</span><span class="ident" id="6155505"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="6155513">(</span><span class="ident" id="6155514"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155515">.</span><span class="ident" id="6155516"><a href="/gostd/image/png/reader.go.html#6150166">r</a></span><span class="op" id="6155517">,</span>&nbsp;<span class="ident" id="6155519"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155520">.</span><span class="ident" id="6155521"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6155524">[</span><span class="op" id="6155525">:</span><span class="num" id="6155526">8</span><span class="op" id="6155527">]</span><span class="op" id="6155528">)</span><span class="op" id="6155529">;</span>&nbsp;<span class="ident" id="6155531"><a href="/gostd/image/png/reader.go.html#6155495">err</a></span>&nbsp;<span class="op" id="6155535">!=</span>&nbsp;<span class="builtintype" id="6155538">nil</span>&nbsp;<span class="op" id="6155542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6155547">return</span>&nbsp;<span class="num" id="6155554">0</span><span class="op" id="6155555">,</span>&nbsp;<span class="ident" id="6155557"><a href="/gostd/image/png/reader.go.html#6155495">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6155563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6155567"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155568">.</span><span class="ident" id="6155569"><a href="/gostd/image/png/reader.go.html#6150350">idatLength</a></span>&nbsp;<span class="op" id="6155580">=</span>&nbsp;<span class="ident" id="6155582"><a href="/gostd/image/png/reader.go.html#6148689">binary</a></span><span class="op" id="6155588">.</span><span class="ident" id="6155589"><a href="/gostd/encoding/binary/binary.go.html#2987146">BigEndian</a></span><span class="op" id="6155598">.</span><span class="ident" id="6155599"><a href="/gostd/encoding/binary/binary.go.html#2988414">Uint32</a></span><span class="op" id="6155605">(</span><span class="ident" id="6155606"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155607">.</span><span class="ident" id="6155608"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6155611">[</span><span class="op" id="6155612">:</span><span class="num" id="6155613">4</span><span class="op" id="6155614">]</span><span class="op" id="6155615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6155619">if</span>&nbsp;<span class="builtintype" id="6155622">string</span><span class="op" id="6155628">(</span><span class="ident" id="6155629"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155630">.</span><span class="ident" id="6155631"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6155634">[</span><span class="num" id="6155635">4</span><span class="op" id="6155636">:</span><span class="num" id="6155637">8</span><span class="op" id="6155638">]</span><span class="op" id="6155639">)</span>&nbsp;<span class="op" id="6155641">!=</span>&nbsp;<span class="string" id="6155644">&#34;IDAT&#34;</span>&nbsp;<span class="op" id="6155651">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6155656">return</span>&nbsp;<span class="num" id="6155663">0</span><span class="op" id="6155664">,</span>&nbsp;<span class="ident" id="6155666"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6155677">(</span><span class="string" id="6155678">&#34;not&nbsp;enough&nbsp;pixel&nbsp;data&#34;</span><span class="op" id="6155701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6155705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6155709"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155710">.</span><span class="ident" id="6155711"><a href="/gostd/image/png/reader.go.html#6150218">crc</a></span><span class="op" id="6155714">.</span><span class="ident" id="6155715"><a href="/gostd/hash/hash.go.html#3014443">Reset</a></span><span class="op" id="6155720">(</span><span class="op" id="6155721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6155725"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155726">.</span><span class="ident" id="6155727"><a href="/gostd/image/png/reader.go.html#6150218">crc</a></span><span class="op" id="6155730">.</span><span class="ident" id="6155731"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="6155736">(</span><span class="ident" id="6155737"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155738">.</span><span class="ident" id="6155739"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6155742">[</span><span class="num" id="6155743">4</span><span class="op" id="6155744">:</span><span class="num" id="6155745">8</span><span class="op" id="6155746">]</span><span class="op" id="6155747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6155750">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6155753">if</span>&nbsp;<span class="builtintype" id="6155756">int</span><span class="op" id="6155759">(</span><span class="ident" id="6155760"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155761">.</span><span class="ident" id="6155762"><a href="/gostd/image/png/reader.go.html#6150350">idatLength</a></span><span class="op" id="6155772">)</span>&nbsp;<span class="op" id="6155774">&lt;</span>&nbsp;<span class="num" id="6155776">0</span>&nbsp;<span class="op" id="6155778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6155782">return</span>&nbsp;<span class="num" id="6155789">0</span><span class="op" id="6155790">,</span>&nbsp;<span class="ident" id="6155792"><a href="/gostd/image/png/reader.go.html#6150743">UnsupportedError</a></span><span class="op" id="6155808">(</span><span class="string" id="6155809">&#34;IDAT&nbsp;chunk&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="6155837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6155840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6155843">n</span><span class="op" id="6155844">,</span>&nbsp;<span class="ident" id="6155846">err</span>&nbsp;<span class="op" id="6155850">:=</span>&nbsp;<span class="ident" id="6155853"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155854">.</span><span class="ident" id="6155855"><a href="/gostd/image/png/reader.go.html#6150166">r</a></span><span class="op" id="6155856">.</span><span class="ident" id="6155857"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="6155861">(</span><span class="ident" id="6155862"><a href="/gostd/image/png/reader.go.html#6155165">p</a></span><span class="op" id="6155863">[</span><span class="op" id="6155864">:</span><span class="ident" id="6155865"><a href="/gostd/image/png/reader.go.html#6150867">min</a></span><span class="op" id="6155868">(</span><span class="builtinfunc" id="6155869">len</span><span class="op" id="6155872">(</span><span class="ident" id="6155873"><a href="/gostd/image/png/reader.go.html#6155165">p</a></span><span class="op" id="6155874">)</span><span class="op" id="6155875">,</span>&nbsp;<span class="builtintype" id="6155877">int</span><span class="op" id="6155880">(</span><span class="ident" id="6155881"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155882">.</span><span class="ident" id="6155883"><a href="/gostd/image/png/reader.go.html#6150350">idatLength</a></span><span class="op" id="6155893">)</span><span class="op" id="6155894">)</span><span class="op" id="6155895">]</span><span class="op" id="6155896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6155899"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155900">.</span><span class="ident" id="6155901"><a href="/gostd/image/png/reader.go.html#6150218">crc</a></span><span class="op" id="6155904">.</span><span class="ident" id="6155905"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="6155910">(</span><span class="ident" id="6155911"><a href="/gostd/image/png/reader.go.html#6155165">p</a></span><span class="op" id="6155912">[</span><span class="op" id="6155913">:</span><span class="ident" id="6155914"><a href="/gostd/image/png/reader.go.html#6155843">n</a></span><span class="op" id="6155915">]</span><span class="op" id="6155916">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6155919"><a href="/gostd/image/png/reader.go.html#6155148">d</a></span><span class="op" id="6155920">.</span><span class="ident" id="6155921"><a href="/gostd/image/png/reader.go.html#6150350">idatLength</a></span>&nbsp;<span class="op" id="6155932">-=</span>&nbsp;<span class="builtintype" id="6155935">uint32</span><span class="op" id="6155941">(</span><span class="ident" id="6155942"><a href="/gostd/image/png/reader.go.html#6155843">n</a></span><span class="op" id="6155943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6155946">return</span>&nbsp;<span class="ident" id="6155953"><a href="/gostd/image/png/reader.go.html#6155843">n</a></span><span class="op" id="6155954">,</span>&nbsp;<span class="ident" id="6155956"><a href="/gostd/image/png/reader.go.html#6155846">err</a></span><br>
<span class="lineno"></span><span class="op" id="6155960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6155963">//&nbsp;decode&nbsp;decodes&nbsp;the&nbsp;IDAT&nbsp;data&nbsp;into&nbsp;an&nbsp;image.</span><br>
<span class="lineno">315</span><span class="keyword" id="6156010">func</span>&nbsp;<span class="op" id="6156015">(</span><span class="ident" id="6156016">d</span>&nbsp;<span class="op" id="6156018">*</span><span class="ident" id="6156019"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6156026">)</span>&nbsp;<span class="ident" id="6156028">decode</span><span class="op" id="6156034">(</span><span class="op" id="6156035">)</span>&nbsp;<span class="op" id="6156037">(</span><span class="ident" id="6156038"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6156043">.</span><span class="ident" id="6156044"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="6156049">,</span>&nbsp;<span class="builtintype" id="6156051">error</span><span class="op" id="6156056">)</span>&nbsp;<span class="op" id="6156058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6156061">r</span><span class="op" id="6156062">,</span>&nbsp;<span class="ident" id="6156064">err</span>&nbsp;<span class="op" id="6156068">:=</span>&nbsp;<span class="ident" id="6156071"><a href="/gostd/image/png/reader.go.html#6148672">zlib</a></span><span class="op" id="6156075">.</span><span class="ident" id="6156076"><a href="/gostd/compress/zlib/reader.go.html#5706381">NewReader</a></span><span class="op" id="6156085">(</span><span class="ident" id="6156086"><a href="/gostd/image/png/reader.go.html#6156016">d</a></span><span class="op" id="6156087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156090">if</span>&nbsp;<span class="ident" id="6156093"><a href="/gostd/image/png/reader.go.html#6156064">err</a></span>&nbsp;<span class="op" id="6156097">!=</span>&nbsp;<span class="builtintype" id="6156100">nil</span>&nbsp;<span class="op" id="6156104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156108">return</span>&nbsp;<span class="builtintype" id="6156115">nil</span><span class="op" id="6156118">,</span>&nbsp;<span class="ident" id="6156120"><a href="/gostd/image/png/reader.go.html#6156064">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6156125">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156128">defer</span>&nbsp;<span class="ident" id="6156134"><a href="/gostd/image/png/reader.go.html#6156061">r</a></span><span class="op" id="6156135">.</span><span class="ident" id="6156136"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="6156141">(</span><span class="op" id="6156142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156145">var</span>&nbsp;<span class="ident" id="6156149">img</span>&nbsp;<span class="ident" id="6156153"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6156158">.</span><span class="ident" id="6156159"><a href="/gostd/image/image.go.html#5154907">Image</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156166">if</span>&nbsp;<span class="ident" id="6156169"><a href="/gostd/image/png/reader.go.html#6156016">d</a></span><span class="op" id="6156170">.</span><span class="ident" id="6156171"><a href="/gostd/image/png/reader.go.html#6150401">interlace</a></span>&nbsp;<span class="op" id="6156181">==</span>&nbsp;<span class="ident" id="6156184"><a href="/gostd/image/png/reader.go.html#6149277">itNone</a></span>&nbsp;<span class="op" id="6156191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6156195"><a href="/gostd/image/png/reader.go.html#6156149">img</a></span><span class="op" id="6156198">,</span>&nbsp;<span class="ident" id="6156200"><a href="/gostd/image/png/reader.go.html#6156064">err</a></span>&nbsp;<span class="op" id="6156204">=</span>&nbsp;<span class="ident" id="6156206"><a href="/gostd/image/png/reader.go.html#6156016">d</a></span><span class="op" id="6156207">.</span><span class="ident" id="6156208"><a href="/gostd/image/png/reader.go.html#6157004">readImagePass</a></span><span class="op" id="6156221">(</span><span class="ident" id="6156222"><a href="/gostd/image/png/reader.go.html#6156061">r</a></span><span class="op" id="6156223">,</span>&nbsp;<span class="num" id="6156225">0</span><span class="op" id="6156226">,</span>&nbsp;<span class="builtintype" id="6156228">false</span><span class="op" id="6156233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6156236">}</span>&nbsp;<span class="keyword" id="6156238">else</span>&nbsp;<span class="keyword" id="6156243">if</span>&nbsp;<span class="ident" id="6156246"><a href="/gostd/image/png/reader.go.html#6156016">d</a></span><span class="op" id="6156247">.</span><span class="ident" id="6156248"><a href="/gostd/image/png/reader.go.html#6150401">interlace</a></span>&nbsp;<span class="op" id="6156258">==</span>&nbsp;<span class="ident" id="6156261"><a href="/gostd/image/png/reader.go.html#6149290">itAdam7</a></span>&nbsp;<span class="op" id="6156269">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6156273">//&nbsp;Allocate&nbsp;a&nbsp;blank&nbsp;image&nbsp;of&nbsp;the&nbsp;full&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6156319"><a href="/gostd/image/png/reader.go.html#6156149">img</a></span><span class="op" id="6156322">,</span>&nbsp;<span class="ident" id="6156324"><a href="/gostd/image/png/reader.go.html#6156064">err</a></span>&nbsp;<span class="op" id="6156328">=</span>&nbsp;<span class="ident" id="6156330"><a href="/gostd/image/png/reader.go.html#6156016">d</a></span><span class="op" id="6156331">.</span><span class="ident" id="6156332"><a href="/gostd/image/png/reader.go.html#6157004">readImagePass</a></span><span class="op" id="6156345">(</span><span class="builtintype" id="6156346">nil</span><span class="op" id="6156349">,</span>&nbsp;<span class="num" id="6156351">0</span><span class="op" id="6156352">,</span>&nbsp;<span class="builtintype" id="6156354">true</span><span class="op" id="6156358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156362">for</span>&nbsp;<span class="ident" id="6156366">pass</span>&nbsp;<span class="op" id="6156371">:=</span>&nbsp;<span class="num" id="6156374">0</span><span class="op" id="6156375">;</span>&nbsp;<span class="ident" id="6156377"><a href="/gostd/image/png/reader.go.html#6156366">pass</a></span>&nbsp;<span class="op" id="6156382">&lt;</span>&nbsp;<span class="num" id="6156384">7</span><span class="op" id="6156385">;</span>&nbsp;<span class="ident" id="6156387"><a href="/gostd/image/png/reader.go.html#6156366">pass</a></span><span class="op" id="6156391">++</span>&nbsp;<span class="op" id="6156394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6156399">imagePass</span><span class="op" id="6156408">,</span>&nbsp;<span class="ident" id="6156410">err</span>&nbsp;<span class="op" id="6156414">:=</span>&nbsp;<span class="ident" id="6156417"><a href="/gostd/image/png/reader.go.html#6156016">d</a></span><span class="op" id="6156418">.</span><span class="ident" id="6156419"><a href="/gostd/image/png/reader.go.html#6157004">readImagePass</a></span><span class="op" id="6156432">(</span><span class="ident" id="6156433"><a href="/gostd/image/png/reader.go.html#6156061">r</a></span><span class="op" id="6156434">,</span>&nbsp;<span class="ident" id="6156436"><a href="/gostd/image/png/reader.go.html#6156366">pass</a></span><span class="op" id="6156440">,</span>&nbsp;<span class="builtintype" id="6156442">false</span><span class="op" id="6156447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156452">if</span>&nbsp;<span class="ident" id="6156455"><a href="/gostd/image/png/reader.go.html#6156410">err</a></span>&nbsp;<span class="op" id="6156459">!=</span>&nbsp;<span class="builtintype" id="6156462">nil</span>&nbsp;<span class="op" id="6156466">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156472">return</span>&nbsp;<span class="builtintype" id="6156479">nil</span><span class="op" id="6156482">,</span>&nbsp;<span class="ident" id="6156484"><a href="/gostd/image/png/reader.go.html#6156410">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6156491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6156496"><a href="/gostd/image/png/reader.go.html#6156016">d</a></span><span class="op" id="6156497">.</span><span class="ident" id="6156498"><a href="/gostd/image/png/reader.go.html#6163312">mergePassInto</a></span><span class="op" id="6156511">(</span><span class="ident" id="6156512"><a href="/gostd/image/png/reader.go.html#6156149">img</a></span><span class="op" id="6156515">,</span>&nbsp;<span class="ident" id="6156517"><a href="/gostd/image/png/reader.go.html#6156399">imagePass</a></span><span class="op" id="6156526">,</span>&nbsp;<span class="ident" id="6156528"><a href="/gostd/image/png/reader.go.html#6156366">pass</a></span><span class="op" id="6156532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6156536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6156539">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6156543">//&nbsp;Check&nbsp;for&nbsp;EOF,&nbsp;to&nbsp;verify&nbsp;the&nbsp;zlib&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6156591">n</span>&nbsp;<span class="op" id="6156593">:=</span>&nbsp;<span class="num" id="6156596">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156599">for</span>&nbsp;<span class="ident" id="6156603">i</span>&nbsp;<span class="op" id="6156605">:=</span>&nbsp;<span class="num" id="6156608">0</span><span class="op" id="6156609">;</span>&nbsp;<span class="ident" id="6156611"><a href="/gostd/image/png/reader.go.html#6156591">n</a></span>&nbsp;<span class="op" id="6156613">==</span>&nbsp;<span class="num" id="6156616">0</span>&nbsp;<span class="op" id="6156618">&amp;&amp;</span>&nbsp;<span class="ident" id="6156621"><a href="/gostd/image/png/reader.go.html#6156064">err</a></span>&nbsp;<span class="op" id="6156625">==</span>&nbsp;<span class="builtintype" id="6156628">nil</span><span class="op" id="6156631">;</span>&nbsp;<span class="ident" id="6156633"><a href="/gostd/image/png/reader.go.html#6156603">i</a></span><span class="op" id="6156634">++</span>&nbsp;<span class="op" id="6156637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156641">if</span>&nbsp;<span class="ident" id="6156644"><a href="/gostd/image/png/reader.go.html#6156603">i</a></span>&nbsp;<span class="op" id="6156646">==</span>&nbsp;<span class="num" id="6156649">100</span>&nbsp;<span class="op" id="6156653">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156658">return</span>&nbsp;<span class="builtintype" id="6156665">nil</span><span class="op" id="6156668">,</span>&nbsp;<span class="ident" id="6156670"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6156672">.</span><span class="ident" id="6156673"><a href="/gostd/io/io.go.html#1420336">ErrNoProgress</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6156689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6156693"><a href="/gostd/image/png/reader.go.html#6156591">n</a></span><span class="op" id="6156694">,</span>&nbsp;<span class="ident" id="6156696"><a href="/gostd/image/png/reader.go.html#6156064">err</a></span>&nbsp;<span class="op" id="6156700">=</span>&nbsp;<span class="ident" id="6156702"><a href="/gostd/image/png/reader.go.html#6156061">r</a></span><span class="op" id="6156703">.</span><span class="ident" id="6156704"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="6156708">(</span><span class="ident" id="6156709"><a href="/gostd/image/png/reader.go.html#6156016">d</a></span><span class="op" id="6156710">.</span><span class="ident" id="6156711"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6156714">[</span><span class="op" id="6156715">:</span><span class="num" id="6156716">1</span><span class="op" id="6156717">]</span><span class="op" id="6156718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6156721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156724">if</span>&nbsp;<span class="ident" id="6156727"><a href="/gostd/image/png/reader.go.html#6156064">err</a></span>&nbsp;<span class="op" id="6156731">!=</span>&nbsp;<span class="builtintype" id="6156734">nil</span>&nbsp;<span class="op" id="6156738">&amp;&amp;</span>&nbsp;<span class="ident" id="6156741"><a href="/gostd/image/png/reader.go.html#6156064">err</a></span>&nbsp;<span class="op" id="6156745">!=</span>&nbsp;<span class="ident" id="6156748"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6156750">.</span><span class="ident" id="6156751"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="6156755">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156759">return</span>&nbsp;<span class="builtintype" id="6156766">nil</span><span class="op" id="6156769">,</span>&nbsp;<span class="ident" id="6156771"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6156782">(</span><span class="ident" id="6156783"><a href="/gostd/image/png/reader.go.html#6156064">err</a></span><span class="op" id="6156786">.</span><span class="ident" id="6156787">Error</span><span class="op" id="6156792">(</span><span class="op" id="6156793">)</span><span class="op" id="6156794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6156797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156800">if</span>&nbsp;<span class="ident" id="6156803"><a href="/gostd/image/png/reader.go.html#6156591">n</a></span>&nbsp;<span class="op" id="6156805">!=</span>&nbsp;<span class="num" id="6156808">0</span>&nbsp;<span class="op" id="6156810">||</span>&nbsp;<span class="ident" id="6156813"><a href="/gostd/image/png/reader.go.html#6156016">d</a></span><span class="op" id="6156814">.</span><span class="ident" id="6156815"><a href="/gostd/image/png/reader.go.html#6150350">idatLength</a></span>&nbsp;<span class="op" id="6156826">!=</span>&nbsp;<span class="num" id="6156829">0</span>&nbsp;<span class="op" id="6156831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156835">return</span>&nbsp;<span class="builtintype" id="6156842">nil</span><span class="op" id="6156845">,</span>&nbsp;<span class="ident" id="6156847"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6156858">(</span><span class="string" id="6156859">&#34;too&nbsp;much&nbsp;pixel&nbsp;data&#34;</span><span class="op" id="6156880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6156883">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6156887">return</span>&nbsp;<span class="ident" id="6156894"><a href="/gostd/image/png/reader.go.html#6156149">img</a></span><span class="op" id="6156897">,</span>&nbsp;<span class="builtintype" id="6156899">nil</span><br>
<span class="lineno"></span><span class="op" id="6156903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6156906">//&nbsp;readImagePass&nbsp;reads&nbsp;a&nbsp;single&nbsp;image&nbsp;pass,&nbsp;sized&nbsp;according&nbsp;to&nbsp;the&nbsp;pass&nbsp;number.</span><br>
<span class="lineno">355</span><span class="keyword" id="6156986">func</span>&nbsp;<span class="op" id="6156991">(</span><span class="ident" id="6156992">d</span>&nbsp;<span class="op" id="6156994">*</span><span class="ident" id="6156995"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6157002">)</span>&nbsp;<span class="ident" id="6157004">readImagePass</span><span class="op" id="6157017">(</span><span class="ident" id="6157018">r</span>&nbsp;<span class="ident" id="6157020"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6157022">.</span><span class="ident" id="6157023"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="6157029">,</span>&nbsp;<span class="ident" id="6157031">pass</span>&nbsp;<span class="builtintype" id="6157036">int</span><span class="op" id="6157039">,</span>&nbsp;<span class="ident" id="6157041">allocateOnly</span>&nbsp;<span class="builtintype" id="6157054">bool</span><span class="op" id="6157058">)</span>&nbsp;<span class="op" id="6157060">(</span><span class="ident" id="6157061"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157066">.</span><span class="ident" id="6157067"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="6157072">,</span>&nbsp;<span class="builtintype" id="6157074">error</span><span class="op" id="6157079">)</span>&nbsp;<span class="op" id="6157081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6157084">var</span>&nbsp;<span class="ident" id="6157088">bitsPerPixel</span>&nbsp;<span class="builtintype" id="6157101">int</span>&nbsp;<span class="op" id="6157105">=</span>&nbsp;<span class="num" id="6157107">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157110">pixOffset</span>&nbsp;<span class="op" id="6157120">:=</span>&nbsp;<span class="num" id="6157123">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6157126">var</span>&nbsp;<span class="op" id="6157130">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157134">gray</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6157143">*</span><span class="ident" id="6157144"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157149">.</span><span class="ident" id="6157150"><a href="/gostd/image/image.go.html#5172029">Gray</a></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157157">rgba</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6157166">*</span><span class="ident" id="6157167"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157172">.</span><span class="ident" id="6157173"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157180">paletted</span>&nbsp;<span class="op" id="6157189">*</span><span class="ident" id="6157190"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157195">.</span><span class="ident" id="6157196"><a href="/gostd/image/image.go.html#5176435">Paletted</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157207">nrgba</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6157216">*</span><span class="ident" id="6157217"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157222">.</span><span class="ident" id="6157223"><a href="/gostd/image/image.go.html#5161468">NRGBA</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157231">gray16</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6157240">*</span><span class="ident" id="6157241"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157246">.</span><span class="ident" id="6157247"><a href="/gostd/image/image.go.html#5174135">Gray16</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157256">rgba64</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6157265">*</span><span class="ident" id="6157266"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157271">.</span><span class="ident" id="6157272"><a href="/gostd/image/image.go.html#5158422">RGBA64</a></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157281">nrgba64</span>&nbsp;&nbsp;<span class="op" id="6157290">*</span><span class="ident" id="6157291"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157296">.</span><span class="ident" id="6157297"><a href="/gostd/image/image.go.html#5164005">NRGBA64</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157307">img</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157316"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157321">.</span><span class="ident" id="6157322"><a href="/gostd/image/image.go.html#5154907">Image</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6157329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157332">width</span><span class="op" id="6157337">,</span>&nbsp;<span class="ident" id="6157339">height</span>&nbsp;<span class="op" id="6157346">:=</span>&nbsp;<span class="ident" id="6157349"><a href="/gostd/image/png/reader.go.html#6156992">d</a></span><span class="op" id="6157350">.</span><span class="ident" id="6157351"><a href="/gostd/image/png/reader.go.html#6150245">width</a></span><span class="op" id="6157356">,</span>&nbsp;<span class="ident" id="6157358"><a href="/gostd/image/png/reader.go.html#6156992">d</a></span><span class="op" id="6157359">.</span><span class="ident" id="6157360"><a href="/gostd/image/png/reader.go.html#6150252">height</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6157368">if</span>&nbsp;<span class="ident" id="6157371"><a href="/gostd/image/png/reader.go.html#6156992">d</a></span><span class="op" id="6157372">.</span><span class="ident" id="6157373"><a href="/gostd/image/png/reader.go.html#6150401">interlace</a></span>&nbsp;<span class="op" id="6157383">==</span>&nbsp;<span class="ident" id="6157386"><a href="/gostd/image/png/reader.go.html#6149290">itAdam7</a></span>&nbsp;<span class="op" id="6157394">&amp;&amp;</span>&nbsp;<span class="op" id="6157397">!</span><span class="ident" id="6157398"><a href="/gostd/image/png/reader.go.html#6157041">allocateOnly</a></span>&nbsp;<span class="op" id="6157411">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157415">p</span>&nbsp;<span class="op" id="6157417">:=</span>&nbsp;<span class="ident" id="6157420"><a href="/gostd/image/png/reader.go.html#6149580">interlacing</a></span><span class="op" id="6157431">[</span><span class="ident" id="6157432"><a href="/gostd/image/png/reader.go.html#6157031">pass</a></span><span class="op" id="6157436">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6157440">//&nbsp;Add&nbsp;the&nbsp;multiplication&nbsp;factor&nbsp;and&nbsp;subtract&nbsp;one,&nbsp;effectively&nbsp;rounding&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157518"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span>&nbsp;<span class="op" id="6157524">=</span>&nbsp;<span class="op" id="6157526">(</span><span class="ident" id="6157527"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span>&nbsp;<span class="op" id="6157533">-</span>&nbsp;<span class="ident" id="6157535"><a href="/gostd/image/png/reader.go.html#6157415">p</a></span><span class="op" id="6157536">.</span><span class="ident" id="6157537"><a href="/gostd/image/png/reader.go.html#6149433">xOffset</a></span>&nbsp;<span class="op" id="6157545">+</span>&nbsp;<span class="ident" id="6157547"><a href="/gostd/image/png/reader.go.html#6157415">p</a></span><span class="op" id="6157548">.</span><span class="ident" id="6157549"><a href="/gostd/image/png/reader.go.html#6149415">xFactor</a></span>&nbsp;<span class="op" id="6157557">-</span>&nbsp;<span class="num" id="6157559">1</span><span class="op" id="6157560">)</span>&nbsp;<span class="op" id="6157562">/</span>&nbsp;<span class="ident" id="6157564"><a href="/gostd/image/png/reader.go.html#6157415">p</a></span><span class="op" id="6157565">.</span><span class="ident" id="6157566"><a href="/gostd/image/png/reader.go.html#6149415">xFactor</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157576"><a href="/gostd/image/png/reader.go.html#6157339">height</a></span>&nbsp;<span class="op" id="6157583">=</span>&nbsp;<span class="op" id="6157585">(</span><span class="ident" id="6157586"><a href="/gostd/image/png/reader.go.html#6157339">height</a></span>&nbsp;<span class="op" id="6157593">-</span>&nbsp;<span class="ident" id="6157595"><a href="/gostd/image/png/reader.go.html#6157415">p</a></span><span class="op" id="6157596">.</span><span class="ident" id="6157597"><a href="/gostd/image/png/reader.go.html#6149442">yOffset</a></span>&nbsp;<span class="op" id="6157605">+</span>&nbsp;<span class="ident" id="6157607"><a href="/gostd/image/png/reader.go.html#6157415">p</a></span><span class="op" id="6157608">.</span><span class="ident" id="6157609"><a href="/gostd/image/png/reader.go.html#6149424">yFactor</a></span>&nbsp;<span class="op" id="6157617">-</span>&nbsp;<span class="num" id="6157619">1</span><span class="op" id="6157620">)</span>&nbsp;<span class="op" id="6157622">/</span>&nbsp;<span class="ident" id="6157624"><a href="/gostd/image/png/reader.go.html#6157415">p</a></span><span class="op" id="6157625">.</span><span class="ident" id="6157626"><a href="/gostd/image/png/reader.go.html#6149424">yFactor</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6157635">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6157638">switch</span>&nbsp;<span class="ident" id="6157645"><a href="/gostd/image/png/reader.go.html#6156992">d</a></span><span class="op" id="6157646">.</span><span class="ident" id="6157647"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6157650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6157653">case</span>&nbsp;<span class="ident" id="6157658"><a href="/gostd/image/png/reader.go.html#6149007">cbG1</a></span><span class="op" id="6157662">,</span>&nbsp;<span class="ident" id="6157664"><a href="/gostd/image/png/reader.go.html#6149013">cbG2</a></span><span class="op" id="6157668">,</span>&nbsp;<span class="ident" id="6157670"><a href="/gostd/image/png/reader.go.html#6149019">cbG4</a></span><span class="op" id="6157674">,</span>&nbsp;<span class="ident" id="6157676"><a href="/gostd/image/png/reader.go.html#6149025">cbG8</a></span><span class="op" id="6157680">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157684"><a href="/gostd/image/png/reader.go.html#6157088">bitsPerPixel</a></span>&nbsp;<span class="op" id="6157697">=</span>&nbsp;<span class="ident" id="6157699"><a href="/gostd/image/png/reader.go.html#6156992">d</a></span><span class="op" id="6157700">.</span><span class="ident" id="6157701"><a href="/gostd/image/png/reader.go.html#6150264">depth</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157709"><a href="/gostd/image/png/reader.go.html#6157134">gray</a></span>&nbsp;<span class="op" id="6157714">=</span>&nbsp;<span class="ident" id="6157716"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157721">.</span><span class="ident" id="6157722"><a href="/gostd/image/image.go.html#5173939">NewGray</a></span><span class="op" id="6157729">(</span><span class="ident" id="6157730"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157735">.</span><span class="ident" id="6157736"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="6157740">(</span><span class="num" id="6157741">0</span><span class="op" id="6157742">,</span>&nbsp;<span class="num" id="6157744">0</span><span class="op" id="6157745">,</span>&nbsp;<span class="ident" id="6157747"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6157752">,</span>&nbsp;<span class="ident" id="6157754"><a href="/gostd/image/png/reader.go.html#6157339">height</a></span><span class="op" id="6157760">)</span><span class="op" id="6157761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157765"><a href="/gostd/image/png/reader.go.html#6157307">img</a></span>&nbsp;<span class="op" id="6157769">=</span>&nbsp;<span class="ident" id="6157771"><a href="/gostd/image/png/reader.go.html#6157134">gray</a></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6157777">case</span>&nbsp;<span class="ident" id="6157782"><a href="/gostd/image/png/reader.go.html#6149031">cbGA8</a></span><span class="op" id="6157787">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157791"><a href="/gostd/image/png/reader.go.html#6157088">bitsPerPixel</a></span>&nbsp;<span class="op" id="6157804">=</span>&nbsp;<span class="num" id="6157806">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157811"><a href="/gostd/image/png/reader.go.html#6157207">nrgba</a></span>&nbsp;<span class="op" id="6157817">=</span>&nbsp;<span class="ident" id="6157819"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157824">.</span><span class="ident" id="6157825"><a href="/gostd/image/image.go.html#5163804">NewNRGBA</a></span><span class="op" id="6157833">(</span><span class="ident" id="6157834"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157839">.</span><span class="ident" id="6157840"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="6157844">(</span><span class="num" id="6157845">0</span><span class="op" id="6157846">,</span>&nbsp;<span class="num" id="6157848">0</span><span class="op" id="6157849">,</span>&nbsp;<span class="ident" id="6157851"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6157856">,</span>&nbsp;<span class="ident" id="6157858"><a href="/gostd/image/png/reader.go.html#6157339">height</a></span><span class="op" id="6157864">)</span><span class="op" id="6157865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157869"><a href="/gostd/image/png/reader.go.html#6157307">img</a></span>&nbsp;<span class="op" id="6157873">=</span>&nbsp;<span class="ident" id="6157875"><a href="/gostd/image/png/reader.go.html#6157207">nrgba</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6157882">case</span>&nbsp;<span class="ident" id="6157887"><a href="/gostd/image/png/reader.go.html#6149038">cbTC8</a></span><span class="op" id="6157892">:</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157896"><a href="/gostd/image/png/reader.go.html#6157088">bitsPerPixel</a></span>&nbsp;<span class="op" id="6157909">=</span>&nbsp;<span class="num" id="6157911">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157916"><a href="/gostd/image/png/reader.go.html#6157157">rgba</a></span>&nbsp;<span class="op" id="6157921">=</span>&nbsp;<span class="ident" id="6157923"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157928">.</span><span class="ident" id="6157929"><a href="/gostd/image/image.go.html#5158226">NewRGBA</a></span><span class="op" id="6157936">(</span><span class="ident" id="6157937"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6157942">.</span><span class="ident" id="6157943"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="6157947">(</span><span class="num" id="6157948">0</span><span class="op" id="6157949">,</span>&nbsp;<span class="num" id="6157951">0</span><span class="op" id="6157952">,</span>&nbsp;<span class="ident" id="6157954"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6157959">,</span>&nbsp;<span class="ident" id="6157961"><a href="/gostd/image/png/reader.go.html#6157339">height</a></span><span class="op" id="6157967">)</span><span class="op" id="6157968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6157972"><a href="/gostd/image/png/reader.go.html#6157307">img</a></span>&nbsp;<span class="op" id="6157976">=</span>&nbsp;<span class="ident" id="6157978"><a href="/gostd/image/png/reader.go.html#6157157">rgba</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6157984">case</span>&nbsp;<span class="ident" id="6157989"><a href="/gostd/image/png/reader.go.html#6149045">cbP1</a></span><span class="op" id="6157993">,</span>&nbsp;<span class="ident" id="6157995"><a href="/gostd/image/png/reader.go.html#6149051">cbP2</a></span><span class="op" id="6157999">,</span>&nbsp;<span class="ident" id="6158001"><a href="/gostd/image/png/reader.go.html#6149057">cbP4</a></span><span class="op" id="6158005">,</span>&nbsp;<span class="ident" id="6158007"><a href="/gostd/image/png/reader.go.html#6149063">cbP8</a></span><span class="op" id="6158011">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158015"><a href="/gostd/image/png/reader.go.html#6157088">bitsPerPixel</a></span>&nbsp;<span class="op" id="6158028">=</span>&nbsp;<span class="ident" id="6158030"><a href="/gostd/image/png/reader.go.html#6156992">d</a></span><span class="op" id="6158031">.</span><span class="ident" id="6158032"><a href="/gostd/image/png/reader.go.html#6150264">depth</a></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158040"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span>&nbsp;<span class="op" id="6158049">=</span>&nbsp;<span class="ident" id="6158051"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6158056">.</span><span class="ident" id="6158057"><a href="/gostd/image/image.go.html#5178970">NewPaletted</a></span><span class="op" id="6158068">(</span><span class="ident" id="6158069"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6158074">.</span><span class="ident" id="6158075"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="6158079">(</span><span class="num" id="6158080">0</span><span class="op" id="6158081">,</span>&nbsp;<span class="num" id="6158083">0</span><span class="op" id="6158084">,</span>&nbsp;<span class="ident" id="6158086"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6158091">,</span>&nbsp;<span class="ident" id="6158093"><a href="/gostd/image/png/reader.go.html#6157339">height</a></span><span class="op" id="6158099">)</span><span class="op" id="6158100">,</span>&nbsp;<span class="ident" id="6158102"><a href="/gostd/image/png/reader.go.html#6156992">d</a></span><span class="op" id="6158103">.</span><span class="ident" id="6158104"><a href="/gostd/image/png/reader.go.html#6150283">palette</a></span><span class="op" id="6158111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158115"><a href="/gostd/image/png/reader.go.html#6157307">img</a></span>&nbsp;<span class="op" id="6158119">=</span>&nbsp;<span class="ident" id="6158121"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6158131">case</span>&nbsp;<span class="ident" id="6158136"><a href="/gostd/image/png/reader.go.html#6149069">cbTCA8</a></span><span class="op" id="6158142">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158146"><a href="/gostd/image/png/reader.go.html#6157088">bitsPerPixel</a></span>&nbsp;<span class="op" id="6158159">=</span>&nbsp;<span class="num" id="6158161">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158166"><a href="/gostd/image/png/reader.go.html#6157207">nrgba</a></span>&nbsp;<span class="op" id="6158172">=</span>&nbsp;<span class="ident" id="6158174"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6158179">.</span><span class="ident" id="6158180"><a href="/gostd/image/image.go.html#5163804">NewNRGBA</a></span><span class="op" id="6158188">(</span><span class="ident" id="6158189"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6158194">.</span><span class="ident" id="6158195"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="6158199">(</span><span class="num" id="6158200">0</span><span class="op" id="6158201">,</span>&nbsp;<span class="num" id="6158203">0</span><span class="op" id="6158204">,</span>&nbsp;<span class="ident" id="6158206"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6158211">,</span>&nbsp;<span class="ident" id="6158213"><a href="/gostd/image/png/reader.go.html#6157339">height</a></span><span class="op" id="6158219">)</span><span class="op" id="6158220">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158224"><a href="/gostd/image/png/reader.go.html#6157307">img</a></span>&nbsp;<span class="op" id="6158228">=</span>&nbsp;<span class="ident" id="6158230"><a href="/gostd/image/png/reader.go.html#6157207">nrgba</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6158237">case</span>&nbsp;<span class="ident" id="6158242"><a href="/gostd/image/png/reader.go.html#6149077">cbG16</a></span><span class="op" id="6158247">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158251"><a href="/gostd/image/png/reader.go.html#6157088">bitsPerPixel</a></span>&nbsp;<span class="op" id="6158264">=</span>&nbsp;<span class="num" id="6158266">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158271"><a href="/gostd/image/png/reader.go.html#6157231">gray16</a></span>&nbsp;<span class="op" id="6158278">=</span>&nbsp;<span class="ident" id="6158280"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6158285">.</span><span class="ident" id="6158286"><a href="/gostd/image/image.go.html#5176237">NewGray16</a></span><span class="op" id="6158295">(</span><span class="ident" id="6158296"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6158301">.</span><span class="ident" id="6158302"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="6158306">(</span><span class="num" id="6158307">0</span><span class="op" id="6158308">,</span>&nbsp;<span class="num" id="6158310">0</span><span class="op" id="6158311">,</span>&nbsp;<span class="ident" id="6158313"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6158318">,</span>&nbsp;<span class="ident" id="6158320"><a href="/gostd/image/png/reader.go.html#6157339">height</a></span><span class="op" id="6158326">)</span><span class="op" id="6158327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158331"><a href="/gostd/image/png/reader.go.html#6157307">img</a></span>&nbsp;<span class="op" id="6158335">=</span>&nbsp;<span class="ident" id="6158337"><a href="/gostd/image/png/reader.go.html#6157231">gray16</a></span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6158345">case</span>&nbsp;<span class="ident" id="6158350"><a href="/gostd/image/png/reader.go.html#6149084">cbGA16</a></span><span class="op" id="6158356">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158360"><a href="/gostd/image/png/reader.go.html#6157088">bitsPerPixel</a></span>&nbsp;<span class="op" id="6158373">=</span>&nbsp;<span class="num" id="6158375">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158380"><a href="/gostd/image/png/reader.go.html#6157281">nrgba64</a></span>&nbsp;<span class="op" id="6158388">=</span>&nbsp;<span class="ident" id="6158390"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6158395">.</span><span class="ident" id="6158396"><a href="/gostd/image/image.go.html#5166875">NewNRGBA64</a></span><span class="op" id="6158406">(</span><span class="ident" id="6158407"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6158412">.</span><span class="ident" id="6158413"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="6158417">(</span><span class="num" id="6158418">0</span><span class="op" id="6158419">,</span>&nbsp;<span class="num" id="6158421">0</span><span class="op" id="6158422">,</span>&nbsp;<span class="ident" id="6158424"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6158429">,</span>&nbsp;<span class="ident" id="6158431"><a href="/gostd/image/png/reader.go.html#6157339">height</a></span><span class="op" id="6158437">)</span><span class="op" id="6158438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158442"><a href="/gostd/image/png/reader.go.html#6157307">img</a></span>&nbsp;<span class="op" id="6158446">=</span>&nbsp;<span class="ident" id="6158448"><a href="/gostd/image/png/reader.go.html#6157281">nrgba64</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6158457">case</span>&nbsp;<span class="ident" id="6158462"><a href="/gostd/image/png/reader.go.html#6149092">cbTC16</a></span><span class="op" id="6158468">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158472"><a href="/gostd/image/png/reader.go.html#6157088">bitsPerPixel</a></span>&nbsp;<span class="op" id="6158485">=</span>&nbsp;<span class="num" id="6158487">48</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158492"><a href="/gostd/image/png/reader.go.html#6157256">rgba64</a></span>&nbsp;<span class="op" id="6158499">=</span>&nbsp;<span class="ident" id="6158501"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6158506">.</span><span class="ident" id="6158507"><a href="/gostd/image/image.go.html#5161268">NewRGBA64</a></span><span class="op" id="6158516">(</span><span class="ident" id="6158517"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6158522">.</span><span class="ident" id="6158523"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="6158527">(</span><span class="num" id="6158528">0</span><span class="op" id="6158529">,</span>&nbsp;<span class="num" id="6158531">0</span><span class="op" id="6158532">,</span>&nbsp;<span class="ident" id="6158534"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6158539">,</span>&nbsp;<span class="ident" id="6158541"><a href="/gostd/image/png/reader.go.html#6157339">height</a></span><span class="op" id="6158547">)</span><span class="op" id="6158548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158552"><a href="/gostd/image/png/reader.go.html#6157307">img</a></span>&nbsp;<span class="op" id="6158556">=</span>&nbsp;<span class="ident" id="6158558"><a href="/gostd/image/png/reader.go.html#6157256">rgba64</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6158566">case</span>&nbsp;<span class="ident" id="6158571"><a href="/gostd/image/png/reader.go.html#6149100">cbTCA16</a></span><span class="op" id="6158578">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158582"><a href="/gostd/image/png/reader.go.html#6157088">bitsPerPixel</a></span>&nbsp;<span class="op" id="6158595">=</span>&nbsp;<span class="num" id="6158597">64</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158602"><a href="/gostd/image/png/reader.go.html#6157281">nrgba64</a></span>&nbsp;<span class="op" id="6158610">=</span>&nbsp;<span class="ident" id="6158612"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6158617">.</span><span class="ident" id="6158618"><a href="/gostd/image/image.go.html#5166875">NewNRGBA64</a></span><span class="op" id="6158628">(</span><span class="ident" id="6158629"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6158634">.</span><span class="ident" id="6158635"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="6158639">(</span><span class="num" id="6158640">0</span><span class="op" id="6158641">,</span>&nbsp;<span class="num" id="6158643">0</span><span class="op" id="6158644">,</span>&nbsp;<span class="ident" id="6158646"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6158651">,</span>&nbsp;<span class="ident" id="6158653"><a href="/gostd/image/png/reader.go.html#6157339">height</a></span><span class="op" id="6158659">)</span><span class="op" id="6158660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158664"><a href="/gostd/image/png/reader.go.html#6157307">img</a></span>&nbsp;<span class="op" id="6158668">=</span>&nbsp;<span class="ident" id="6158670"><a href="/gostd/image/png/reader.go.html#6157281">nrgba64</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6158679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6158682">if</span>&nbsp;<span class="ident" id="6158685"><a href="/gostd/image/png/reader.go.html#6157041">allocateOnly</a></span>&nbsp;<span class="op" id="6158698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6158702">return</span>&nbsp;<span class="ident" id="6158709"><a href="/gostd/image/png/reader.go.html#6157307">img</a></span><span class="op" id="6158712">,</span>&nbsp;<span class="builtintype" id="6158714">nil</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6158719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158722">bytesPerPixel</span>&nbsp;<span class="op" id="6158736">:=</span>&nbsp;<span class="op" id="6158739">(</span><span class="ident" id="6158740"><a href="/gostd/image/png/reader.go.html#6157088">bitsPerPixel</a></span>&nbsp;<span class="op" id="6158753">+</span>&nbsp;<span class="num" id="6158755">7</span><span class="op" id="6158756">)</span>&nbsp;<span class="op" id="6158758">/</span>&nbsp;<span class="num" id="6158760">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6158764">//&nbsp;The&nbsp;+1&nbsp;is&nbsp;for&nbsp;the&nbsp;per-row&nbsp;filter&nbsp;type,&nbsp;which&nbsp;is&nbsp;at&nbsp;cr[0].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158826">rowSize</span>&nbsp;<span class="op" id="6158834">:=</span>&nbsp;<span class="num" id="6158837">1</span>&nbsp;<span class="op" id="6158839">+</span>&nbsp;<span class="op" id="6158841">(</span><span class="ident" id="6158842"><a href="/gostd/image/png/reader.go.html#6157088">bitsPerPixel</a></span><span class="op" id="6158854">*</span><span class="ident" id="6158855"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6158860">+</span><span class="num" id="6158861">7</span><span class="op" id="6158862">)</span><span class="op" id="6158863">/</span><span class="num" id="6158864">8</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6158867">//&nbsp;cr&nbsp;and&nbsp;pr&nbsp;are&nbsp;the&nbsp;bytes&nbsp;for&nbsp;the&nbsp;current&nbsp;and&nbsp;previous&nbsp;row.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158929">cr</span>&nbsp;<span class="op" id="6158932">:=</span>&nbsp;<span class="builtinfunc" id="6158935">make</span><span class="op" id="6158939">(</span><span class="op" id="6158940">[</span><span class="op" id="6158941">]</span><span class="builtintype" id="6158942">uint8</span><span class="op" id="6158947">,</span>&nbsp;<span class="ident" id="6158949"><a href="/gostd/image/png/reader.go.html#6158826">rowSize</a></span><span class="op" id="6158956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6158959">pr</span>&nbsp;<span class="op" id="6158962">:=</span>&nbsp;<span class="builtinfunc" id="6158965">make</span><span class="op" id="6158969">(</span><span class="op" id="6158970">[</span><span class="op" id="6158971">]</span><span class="builtintype" id="6158972">uint8</span><span class="op" id="6158977">,</span>&nbsp;<span class="ident" id="6158979"><a href="/gostd/image/png/reader.go.html#6158826">rowSize</a></span><span class="op" id="6158986">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6158990">for</span>&nbsp;<span class="ident" id="6158994">y</span>&nbsp;<span class="op" id="6158996">:=</span>&nbsp;<span class="num" id="6158999">0</span><span class="op" id="6159000">;</span>&nbsp;<span class="ident" id="6159002"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span>&nbsp;<span class="op" id="6159004">&lt;</span>&nbsp;<span class="ident" id="6159006"><a href="/gostd/image/png/reader.go.html#6157339">height</a></span><span class="op" id="6159012">;</span>&nbsp;<span class="ident" id="6159014"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span><span class="op" id="6159015">++</span>&nbsp;<span class="op" id="6159018">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6159022">//&nbsp;Read&nbsp;the&nbsp;decompressed&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159056">_</span><span class="op" id="6159057">,</span>&nbsp;<span class="ident" id="6159059">err</span>&nbsp;<span class="op" id="6159063">:=</span>&nbsp;<span class="ident" id="6159066"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6159068">.</span><span class="ident" id="6159069"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="6159077">(</span><span class="ident" id="6159078"><a href="/gostd/image/png/reader.go.html#6157018">r</a></span><span class="op" id="6159079">,</span>&nbsp;<span class="ident" id="6159081"><a href="/gostd/image/png/reader.go.html#6158929">cr</a></span><span class="op" id="6159083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159087">if</span>&nbsp;<span class="ident" id="6159090"><a href="/gostd/image/png/reader.go.html#6159059">err</a></span>&nbsp;<span class="op" id="6159094">!=</span>&nbsp;<span class="builtintype" id="6159097">nil</span>&nbsp;<span class="op" id="6159101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159106">return</span>&nbsp;<span class="builtintype" id="6159113">nil</span><span class="op" id="6159116">,</span>&nbsp;<span class="ident" id="6159118"><a href="/gostd/image/png/reader.go.html#6159059">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6159124">}</span><br>
<span class="lineno">430</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6159129">//&nbsp;Apply&nbsp;the&nbsp;filter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159152">cdat</span>&nbsp;<span class="op" id="6159157">:=</span>&nbsp;<span class="ident" id="6159160"><a href="/gostd/image/png/reader.go.html#6158929">cr</a></span><span class="op" id="6159162">[</span><span class="num" id="6159163">1</span><span class="op" id="6159164">:</span><span class="op" id="6159165">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159169">pdat</span>&nbsp;<span class="op" id="6159174">:=</span>&nbsp;<span class="ident" id="6159177"><a href="/gostd/image/png/reader.go.html#6158959">pr</a></span><span class="op" id="6159179">[</span><span class="num" id="6159180">1</span><span class="op" id="6159181">:</span><span class="op" id="6159182">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159186">switch</span>&nbsp;<span class="ident" id="6159193"><a href="/gostd/image/png/reader.go.html#6158929">cr</a></span><span class="op" id="6159195">[</span><span class="num" id="6159196">0</span><span class="op" id="6159197">]</span>&nbsp;<span class="op" id="6159199">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159203">case</span>&nbsp;<span class="ident" id="6159208"><a href="/gostd/image/png/reader.go.html#6149157">ftNone</a></span><span class="op" id="6159214">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6159219">//&nbsp;No-op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159231">case</span>&nbsp;<span class="ident" id="6159236"><a href="/gostd/image/png/reader.go.html#6149172">ftSub</a></span><span class="op" id="6159241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159246">for</span>&nbsp;<span class="ident" id="6159250">i</span>&nbsp;<span class="op" id="6159252">:=</span>&nbsp;<span class="ident" id="6159255"><a href="/gostd/image/png/reader.go.html#6158722">bytesPerPixel</a></span><span class="op" id="6159268">;</span>&nbsp;<span class="ident" id="6159270"><a href="/gostd/image/png/reader.go.html#6159250">i</a></span>&nbsp;<span class="op" id="6159272">&lt;</span>&nbsp;<span class="builtinfunc" id="6159274">len</span><span class="op" id="6159277">(</span><span class="ident" id="6159278"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6159282">)</span><span class="op" id="6159283">;</span>&nbsp;<span class="ident" id="6159285"><a href="/gostd/image/png/reader.go.html#6159250">i</a></span><span class="op" id="6159286">++</span>&nbsp;<span class="op" id="6159289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159295"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6159299">[</span><span class="ident" id="6159300"><a href="/gostd/image/png/reader.go.html#6159250">i</a></span><span class="op" id="6159301">]</span>&nbsp;<span class="op" id="6159303">+=</span>&nbsp;<span class="ident" id="6159306"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6159310">[</span><span class="ident" id="6159311"><a href="/gostd/image/png/reader.go.html#6159250">i</a></span><span class="op" id="6159312">-</span><span class="ident" id="6159313"><a href="/gostd/image/png/reader.go.html#6158722">bytesPerPixel</a></span><span class="op" id="6159326">]</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6159331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159335">case</span>&nbsp;<span class="ident" id="6159340"><a href="/gostd/image/png/reader.go.html#6149187">ftUp</a></span><span class="op" id="6159344">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159349">for</span>&nbsp;<span class="ident" id="6159353">i</span><span class="op" id="6159354">,</span>&nbsp;<span class="ident" id="6159356">p</span>&nbsp;<span class="op" id="6159358">:=</span>&nbsp;<span class="keyword" id="6159361">range</span>&nbsp;<span class="ident" id="6159367"><a href="/gostd/image/png/reader.go.html#6159169">pdat</a></span>&nbsp;<span class="op" id="6159372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159378"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6159382">[</span><span class="ident" id="6159383"><a href="/gostd/image/png/reader.go.html#6159353">i</a></span><span class="op" id="6159384">]</span>&nbsp;<span class="op" id="6159386">+=</span>&nbsp;<span class="ident" id="6159389"><a href="/gostd/image/png/reader.go.html#6159356">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6159394">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159398">case</span>&nbsp;<span class="ident" id="6159403"><a href="/gostd/image/png/reader.go.html#6149202">ftAverage</a></span><span class="op" id="6159412">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159417">for</span>&nbsp;<span class="ident" id="6159421">i</span>&nbsp;<span class="op" id="6159423">:=</span>&nbsp;<span class="num" id="6159426">0</span><span class="op" id="6159427">;</span>&nbsp;<span class="ident" id="6159429"><a href="/gostd/image/png/reader.go.html#6159421">i</a></span>&nbsp;<span class="op" id="6159431">&lt;</span>&nbsp;<span class="ident" id="6159433"><a href="/gostd/image/png/reader.go.html#6158722">bytesPerPixel</a></span><span class="op" id="6159446">;</span>&nbsp;<span class="ident" id="6159448"><a href="/gostd/image/png/reader.go.html#6159421">i</a></span><span class="op" id="6159449">++</span>&nbsp;<span class="op" id="6159452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159458"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6159462">[</span><span class="ident" id="6159463"><a href="/gostd/image/png/reader.go.html#6159421">i</a></span><span class="op" id="6159464">]</span>&nbsp;<span class="op" id="6159466">+=</span>&nbsp;<span class="ident" id="6159469"><a href="/gostd/image/png/reader.go.html#6159169">pdat</a></span><span class="op" id="6159473">[</span><span class="ident" id="6159474"><a href="/gostd/image/png/reader.go.html#6159421">i</a></span><span class="op" id="6159475">]</span>&nbsp;<span class="op" id="6159477">/</span>&nbsp;<span class="num" id="6159479">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6159484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159489">for</span>&nbsp;<span class="ident" id="6159493">i</span>&nbsp;<span class="op" id="6159495">:=</span>&nbsp;<span class="ident" id="6159498"><a href="/gostd/image/png/reader.go.html#6158722">bytesPerPixel</a></span><span class="op" id="6159511">;</span>&nbsp;<span class="ident" id="6159513"><a href="/gostd/image/png/reader.go.html#6159493">i</a></span>&nbsp;<span class="op" id="6159515">&lt;</span>&nbsp;<span class="builtinfunc" id="6159517">len</span><span class="op" id="6159520">(</span><span class="ident" id="6159521"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6159525">)</span><span class="op" id="6159526">;</span>&nbsp;<span class="ident" id="6159528"><a href="/gostd/image/png/reader.go.html#6159493">i</a></span><span class="op" id="6159529">++</span>&nbsp;<span class="op" id="6159532">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159538"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6159542">[</span><span class="ident" id="6159543"><a href="/gostd/image/png/reader.go.html#6159493">i</a></span><span class="op" id="6159544">]</span>&nbsp;<span class="op" id="6159546">+=</span>&nbsp;<span class="builtintype" id="6159549">uint8</span><span class="op" id="6159554">(</span><span class="op" id="6159555">(</span><span class="builtintype" id="6159556">int</span><span class="op" id="6159559">(</span><span class="ident" id="6159560"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6159564">[</span><span class="ident" id="6159565"><a href="/gostd/image/png/reader.go.html#6159493">i</a></span><span class="op" id="6159566">-</span><span class="ident" id="6159567"><a href="/gostd/image/png/reader.go.html#6158722">bytesPerPixel</a></span><span class="op" id="6159580">]</span><span class="op" id="6159581">)</span>&nbsp;<span class="op" id="6159583">+</span>&nbsp;<span class="builtintype" id="6159585">int</span><span class="op" id="6159588">(</span><span class="ident" id="6159589"><a href="/gostd/image/png/reader.go.html#6159169">pdat</a></span><span class="op" id="6159593">[</span><span class="ident" id="6159594"><a href="/gostd/image/png/reader.go.html#6159493">i</a></span><span class="op" id="6159595">]</span><span class="op" id="6159596">)</span><span class="op" id="6159597">)</span>&nbsp;<span class="op" id="6159599">/</span>&nbsp;<span class="num" id="6159601">2</span><span class="op" id="6159602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6159607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159611">case</span>&nbsp;<span class="ident" id="6159616"><a href="/gostd/image/png/reader.go.html#6149217">ftPaeth</a></span><span class="op" id="6159623">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159628"><a href="/gostd/image/png/paeth.go.html#6147906">filterPaeth</a></span><span class="op" id="6159639">(</span><span class="ident" id="6159640"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6159644">,</span>&nbsp;<span class="ident" id="6159646"><a href="/gostd/image/png/reader.go.html#6159169">pdat</a></span><span class="op" id="6159650">,</span>&nbsp;<span class="ident" id="6159652"><a href="/gostd/image/png/reader.go.html#6158722">bytesPerPixel</a></span><span class="op" id="6159665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159669">default</span><span class="op" id="6159676">:</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159681">return</span>&nbsp;<span class="builtintype" id="6159688">nil</span><span class="op" id="6159691">,</span>&nbsp;<span class="ident" id="6159693"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6159704">(</span><span class="string" id="6159705">&#34;bad&nbsp;filter&nbsp;type&#34;</span><span class="op" id="6159722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6159726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6159731">//&nbsp;Convert&nbsp;from&nbsp;bytes&nbsp;to&nbsp;colors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159766">switch</span>&nbsp;<span class="ident" id="6159773"><a href="/gostd/image/png/reader.go.html#6156992">d</a></span><span class="op" id="6159774">.</span><span class="ident" id="6159775"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6159778">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159782">case</span>&nbsp;<span class="ident" id="6159787"><a href="/gostd/image/png/reader.go.html#6149007">cbG1</a></span><span class="op" id="6159791">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159796">for</span>&nbsp;<span class="ident" id="6159800">x</span>&nbsp;<span class="op" id="6159802">:=</span>&nbsp;<span class="num" id="6159805">0</span><span class="op" id="6159806">;</span>&nbsp;<span class="ident" id="6159808"><a href="/gostd/image/png/reader.go.html#6159800">x</a></span>&nbsp;<span class="op" id="6159810">&lt;</span>&nbsp;<span class="ident" id="6159812"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6159817">;</span>&nbsp;<span class="ident" id="6159819"><a href="/gostd/image/png/reader.go.html#6159800">x</a></span>&nbsp;<span class="op" id="6159821">+=</span>&nbsp;<span class="num" id="6159824">8</span>&nbsp;<span class="op" id="6159826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159832">b</span>&nbsp;<span class="op" id="6159834">:=</span>&nbsp;<span class="ident" id="6159837"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6159841">[</span><span class="ident" id="6159842"><a href="/gostd/image/png/reader.go.html#6159800">x</a></span><span class="op" id="6159843">/</span><span class="num" id="6159844">8</span><span class="op" id="6159845">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159851">for</span>&nbsp;<span class="ident" id="6159855">x2</span>&nbsp;<span class="op" id="6159858">:=</span>&nbsp;<span class="num" id="6159861">0</span><span class="op" id="6159862">;</span>&nbsp;<span class="ident" id="6159864"><a href="/gostd/image/png/reader.go.html#6159855">x2</a></span>&nbsp;<span class="op" id="6159867">&lt;</span>&nbsp;<span class="num" id="6159869">8</span>&nbsp;<span class="op" id="6159871">&amp;&amp;</span>&nbsp;<span class="ident" id="6159874"><a href="/gostd/image/png/reader.go.html#6159800">x</a></span><span class="op" id="6159875">+</span><span class="ident" id="6159876"><a href="/gostd/image/png/reader.go.html#6159855">x2</a></span>&nbsp;<span class="op" id="6159879">&lt;</span>&nbsp;<span class="ident" id="6159881"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6159886">;</span>&nbsp;<span class="ident" id="6159888"><a href="/gostd/image/png/reader.go.html#6159855">x2</a></span><span class="op" id="6159890">++</span>&nbsp;<span class="op" id="6159893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159900"><a href="/gostd/image/png/reader.go.html#6157134">gray</a></span><span class="op" id="6159904">.</span><span class="ident" id="6159905"><a href="/gostd/image/image.go.html#5173061">SetGray</a></span><span class="op" id="6159912">(</span><span class="ident" id="6159913"><a href="/gostd/image/png/reader.go.html#6159800">x</a></span><span class="op" id="6159914">+</span><span class="ident" id="6159915"><a href="/gostd/image/png/reader.go.html#6159855">x2</a></span><span class="op" id="6159917">,</span>&nbsp;<span class="ident" id="6159919"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span><span class="op" id="6159920">,</span>&nbsp;<span class="ident" id="6159922"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6159927">.</span><span class="ident" id="6159928"><a href="/gostd/image/color/color.go.html#5187215">Gray</a></span><span class="op" id="6159932">{</span><span class="op" id="6159933">(</span><span class="ident" id="6159934"><a href="/gostd/image/png/reader.go.html#6159832">b</a></span>&nbsp;<span class="op" id="6159936">&gt;&gt;</span>&nbsp;<span class="num" id="6159939">7</span><span class="op" id="6159940">)</span>&nbsp;<span class="op" id="6159942">*</span>&nbsp;<span class="num" id="6159944">0xff</span><span class="op" id="6159948">}</span><span class="op" id="6159949">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159956"><a href="/gostd/image/png/reader.go.html#6159832">b</a></span>&nbsp;<span class="op" id="6159958">&lt;&lt;=</span>&nbsp;<span class="num" id="6159962">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6159968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6159973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159977">case</span>&nbsp;<span class="ident" id="6159982"><a href="/gostd/image/png/reader.go.html#6149013">cbG2</a></span><span class="op" id="6159986">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6159991">for</span>&nbsp;<span class="ident" id="6159995">x</span>&nbsp;<span class="op" id="6159997">:=</span>&nbsp;<span class="num" id="6160000">0</span><span class="op" id="6160001">;</span>&nbsp;<span class="ident" id="6160003"><a href="/gostd/image/png/reader.go.html#6159995">x</a></span>&nbsp;<span class="op" id="6160005">&lt;</span>&nbsp;<span class="ident" id="6160007"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6160012">;</span>&nbsp;<span class="ident" id="6160014"><a href="/gostd/image/png/reader.go.html#6159995">x</a></span>&nbsp;<span class="op" id="6160016">+=</span>&nbsp;<span class="num" id="6160019">4</span>&nbsp;<span class="op" id="6160021">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160027">b</span>&nbsp;<span class="op" id="6160029">:=</span>&nbsp;<span class="ident" id="6160032"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6160036">[</span><span class="ident" id="6160037"><a href="/gostd/image/png/reader.go.html#6159995">x</a></span><span class="op" id="6160038">/</span><span class="num" id="6160039">4</span><span class="op" id="6160040">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160046">for</span>&nbsp;<span class="ident" id="6160050">x2</span>&nbsp;<span class="op" id="6160053">:=</span>&nbsp;<span class="num" id="6160056">0</span><span class="op" id="6160057">;</span>&nbsp;<span class="ident" id="6160059"><a href="/gostd/image/png/reader.go.html#6160050">x2</a></span>&nbsp;<span class="op" id="6160062">&lt;</span>&nbsp;<span class="num" id="6160064">4</span>&nbsp;<span class="op" id="6160066">&amp;&amp;</span>&nbsp;<span class="ident" id="6160069"><a href="/gostd/image/png/reader.go.html#6159995">x</a></span><span class="op" id="6160070">+</span><span class="ident" id="6160071"><a href="/gostd/image/png/reader.go.html#6160050">x2</a></span>&nbsp;<span class="op" id="6160074">&lt;</span>&nbsp;<span class="ident" id="6160076"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6160081">;</span>&nbsp;<span class="ident" id="6160083"><a href="/gostd/image/png/reader.go.html#6160050">x2</a></span><span class="op" id="6160085">++</span>&nbsp;<span class="op" id="6160088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160095"><a href="/gostd/image/png/reader.go.html#6157134">gray</a></span><span class="op" id="6160099">.</span><span class="ident" id="6160100"><a href="/gostd/image/image.go.html#5173061">SetGray</a></span><span class="op" id="6160107">(</span><span class="ident" id="6160108"><a href="/gostd/image/png/reader.go.html#6159995">x</a></span><span class="op" id="6160109">+</span><span class="ident" id="6160110"><a href="/gostd/image/png/reader.go.html#6160050">x2</a></span><span class="op" id="6160112">,</span>&nbsp;<span class="ident" id="6160114"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span><span class="op" id="6160115">,</span>&nbsp;<span class="ident" id="6160117"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6160122">.</span><span class="ident" id="6160123"><a href="/gostd/image/color/color.go.html#5187215">Gray</a></span><span class="op" id="6160127">{</span><span class="op" id="6160128">(</span><span class="ident" id="6160129"><a href="/gostd/image/png/reader.go.html#6160027">b</a></span>&nbsp;<span class="op" id="6160131">&gt;&gt;</span>&nbsp;<span class="num" id="6160134">6</span><span class="op" id="6160135">)</span>&nbsp;<span class="op" id="6160137">*</span>&nbsp;<span class="num" id="6160139">0x55</span><span class="op" id="6160143">}</span><span class="op" id="6160144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160151"><a href="/gostd/image/png/reader.go.html#6160027">b</a></span>&nbsp;<span class="op" id="6160153">&lt;&lt;=</span>&nbsp;<span class="num" id="6160157">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6160163">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6160168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160172">case</span>&nbsp;<span class="ident" id="6160177"><a href="/gostd/image/png/reader.go.html#6149019">cbG4</a></span><span class="op" id="6160181">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160186">for</span>&nbsp;<span class="ident" id="6160190">x</span>&nbsp;<span class="op" id="6160192">:=</span>&nbsp;<span class="num" id="6160195">0</span><span class="op" id="6160196">;</span>&nbsp;<span class="ident" id="6160198"><a href="/gostd/image/png/reader.go.html#6160190">x</a></span>&nbsp;<span class="op" id="6160200">&lt;</span>&nbsp;<span class="ident" id="6160202"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6160207">;</span>&nbsp;<span class="ident" id="6160209"><a href="/gostd/image/png/reader.go.html#6160190">x</a></span>&nbsp;<span class="op" id="6160211">+=</span>&nbsp;<span class="num" id="6160214">2</span>&nbsp;<span class="op" id="6160216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160222">b</span>&nbsp;<span class="op" id="6160224">:=</span>&nbsp;<span class="ident" id="6160227"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6160231">[</span><span class="ident" id="6160232"><a href="/gostd/image/png/reader.go.html#6160190">x</a></span><span class="op" id="6160233">/</span><span class="num" id="6160234">2</span><span class="op" id="6160235">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160241">for</span>&nbsp;<span class="ident" id="6160245">x2</span>&nbsp;<span class="op" id="6160248">:=</span>&nbsp;<span class="num" id="6160251">0</span><span class="op" id="6160252">;</span>&nbsp;<span class="ident" id="6160254"><a href="/gostd/image/png/reader.go.html#6160245">x2</a></span>&nbsp;<span class="op" id="6160257">&lt;</span>&nbsp;<span class="num" id="6160259">2</span>&nbsp;<span class="op" id="6160261">&amp;&amp;</span>&nbsp;<span class="ident" id="6160264"><a href="/gostd/image/png/reader.go.html#6160190">x</a></span><span class="op" id="6160265">+</span><span class="ident" id="6160266"><a href="/gostd/image/png/reader.go.html#6160245">x2</a></span>&nbsp;<span class="op" id="6160269">&lt;</span>&nbsp;<span class="ident" id="6160271"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6160276">;</span>&nbsp;<span class="ident" id="6160278"><a href="/gostd/image/png/reader.go.html#6160245">x2</a></span><span class="op" id="6160280">++</span>&nbsp;<span class="op" id="6160283">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160290"><a href="/gostd/image/png/reader.go.html#6157134">gray</a></span><span class="op" id="6160294">.</span><span class="ident" id="6160295"><a href="/gostd/image/image.go.html#5173061">SetGray</a></span><span class="op" id="6160302">(</span><span class="ident" id="6160303"><a href="/gostd/image/png/reader.go.html#6160190">x</a></span><span class="op" id="6160304">+</span><span class="ident" id="6160305"><a href="/gostd/image/png/reader.go.html#6160245">x2</a></span><span class="op" id="6160307">,</span>&nbsp;<span class="ident" id="6160309"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span><span class="op" id="6160310">,</span>&nbsp;<span class="ident" id="6160312"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6160317">.</span><span class="ident" id="6160318"><a href="/gostd/image/color/color.go.html#5187215">Gray</a></span><span class="op" id="6160322">{</span><span class="op" id="6160323">(</span><span class="ident" id="6160324"><a href="/gostd/image/png/reader.go.html#6160222">b</a></span>&nbsp;<span class="op" id="6160326">&gt;&gt;</span>&nbsp;<span class="num" id="6160329">4</span><span class="op" id="6160330">)</span>&nbsp;<span class="op" id="6160332">*</span>&nbsp;<span class="num" id="6160334">0x11</span><span class="op" id="6160338">}</span><span class="op" id="6160339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160346"><a href="/gostd/image/png/reader.go.html#6160222">b</a></span>&nbsp;<span class="op" id="6160348">&lt;&lt;=</span>&nbsp;<span class="num" id="6160352">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6160358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6160363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160367">case</span>&nbsp;<span class="ident" id="6160372"><a href="/gostd/image/png/reader.go.html#6149025">cbG8</a></span><span class="op" id="6160376">:</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6160381">copy</span><span class="op" id="6160385">(</span><span class="ident" id="6160386"><a href="/gostd/image/png/reader.go.html#6157134">gray</a></span><span class="op" id="6160390">.</span><span class="ident" id="6160391"><a href="/gostd/image/image.go.html#5172175">Pix</a></span><span class="op" id="6160394">[</span><span class="ident" id="6160395"><a href="/gostd/image/png/reader.go.html#6157110">pixOffset</a></span><span class="op" id="6160404">:</span><span class="op" id="6160405">]</span><span class="op" id="6160406">,</span>&nbsp;<span class="ident" id="6160408"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6160412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160417"><a href="/gostd/image/png/reader.go.html#6157110">pixOffset</a></span>&nbsp;<span class="op" id="6160427">+=</span>&nbsp;<span class="ident" id="6160430"><a href="/gostd/image/png/reader.go.html#6157134">gray</a></span><span class="op" id="6160434">.</span><span class="ident" id="6160435"><a href="/gostd/image/image.go.html#5172264">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160444">case</span>&nbsp;<span class="ident" id="6160449"><a href="/gostd/image/png/reader.go.html#6149031">cbGA8</a></span><span class="op" id="6160454">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160459">for</span>&nbsp;<span class="ident" id="6160463">x</span>&nbsp;<span class="op" id="6160465">:=</span>&nbsp;<span class="num" id="6160468">0</span><span class="op" id="6160469">;</span>&nbsp;<span class="ident" id="6160471"><a href="/gostd/image/png/reader.go.html#6160463">x</a></span>&nbsp;<span class="op" id="6160473">&lt;</span>&nbsp;<span class="ident" id="6160475"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6160480">;</span>&nbsp;<span class="ident" id="6160482"><a href="/gostd/image/png/reader.go.html#6160463">x</a></span><span class="op" id="6160483">++</span>&nbsp;<span class="op" id="6160486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160492">ycol</span>&nbsp;<span class="op" id="6160497">:=</span>&nbsp;<span class="ident" id="6160500"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6160504">[</span><span class="num" id="6160505">2</span><span class="op" id="6160506">*</span><span class="ident" id="6160507"><a href="/gostd/image/png/reader.go.html#6160463">x</a></span><span class="op" id="6160508">+</span><span class="num" id="6160509">0</span><span class="op" id="6160510">]</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160516"><a href="/gostd/image/png/reader.go.html#6157207">nrgba</a></span><span class="op" id="6160521">.</span><span class="ident" id="6160522"><a href="/gostd/image/image.go.html#5162628">SetNRGBA</a></span><span class="op" id="6160530">(</span><span class="ident" id="6160531"><a href="/gostd/image/png/reader.go.html#6160463">x</a></span><span class="op" id="6160532">,</span>&nbsp;<span class="ident" id="6160534"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span><span class="op" id="6160535">,</span>&nbsp;<span class="ident" id="6160537"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6160542">.</span><span class="ident" id="6160543"><a href="/gostd/image/color/color.go.html#5186151">NRGBA</a></span><span class="op" id="6160548">{</span><span class="ident" id="6160549"><a href="/gostd/image/png/reader.go.html#6160492">ycol</a></span><span class="op" id="6160553">,</span>&nbsp;<span class="ident" id="6160555"><a href="/gostd/image/png/reader.go.html#6160492">ycol</a></span><span class="op" id="6160559">,</span>&nbsp;<span class="ident" id="6160561"><a href="/gostd/image/png/reader.go.html#6160492">ycol</a></span><span class="op" id="6160565">,</span>&nbsp;<span class="ident" id="6160567"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6160571">[</span><span class="num" id="6160572">2</span><span class="op" id="6160573">*</span><span class="ident" id="6160574"><a href="/gostd/image/png/reader.go.html#6160463">x</a></span><span class="op" id="6160575">+</span><span class="num" id="6160576">1</span><span class="op" id="6160577">]</span><span class="op" id="6160578">}</span><span class="op" id="6160579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6160584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160588">case</span>&nbsp;<span class="ident" id="6160593"><a href="/gostd/image/png/reader.go.html#6149038">cbTC8</a></span><span class="op" id="6160598">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160603">pix</span><span class="op" id="6160606">,</span>&nbsp;<span class="ident" id="6160608">i</span><span class="op" id="6160609">,</span>&nbsp;<span class="ident" id="6160611">j</span>&nbsp;<span class="op" id="6160613">:=</span>&nbsp;<span class="ident" id="6160616"><a href="/gostd/image/png/reader.go.html#6157157">rgba</a></span><span class="op" id="6160620">.</span><span class="ident" id="6160621"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="6160624">,</span>&nbsp;<span class="ident" id="6160626"><a href="/gostd/image/png/reader.go.html#6157110">pixOffset</a></span><span class="op" id="6160635">,</span>&nbsp;<span class="num" id="6160637">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160642">for</span>&nbsp;<span class="ident" id="6160646">x</span>&nbsp;<span class="op" id="6160648">:=</span>&nbsp;<span class="num" id="6160651">0</span><span class="op" id="6160652">;</span>&nbsp;<span class="ident" id="6160654"><a href="/gostd/image/png/reader.go.html#6160646">x</a></span>&nbsp;<span class="op" id="6160656">&lt;</span>&nbsp;<span class="ident" id="6160658"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6160663">;</span>&nbsp;<span class="ident" id="6160665"><a href="/gostd/image/png/reader.go.html#6160646">x</a></span><span class="op" id="6160666">++</span>&nbsp;<span class="op" id="6160669">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160675"><a href="/gostd/image/png/reader.go.html#6160603">pix</a></span><span class="op" id="6160678">[</span><span class="ident" id="6160679"><a href="/gostd/image/png/reader.go.html#6160608">i</a></span><span class="op" id="6160680">+</span><span class="num" id="6160681">0</span><span class="op" id="6160682">]</span>&nbsp;<span class="op" id="6160684">=</span>&nbsp;<span class="ident" id="6160686"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6160690">[</span><span class="ident" id="6160691"><a href="/gostd/image/png/reader.go.html#6160611">j</a></span><span class="op" id="6160692">+</span><span class="num" id="6160693">0</span><span class="op" id="6160694">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160700"><a href="/gostd/image/png/reader.go.html#6160603">pix</a></span><span class="op" id="6160703">[</span><span class="ident" id="6160704"><a href="/gostd/image/png/reader.go.html#6160608">i</a></span><span class="op" id="6160705">+</span><span class="num" id="6160706">1</span><span class="op" id="6160707">]</span>&nbsp;<span class="op" id="6160709">=</span>&nbsp;<span class="ident" id="6160711"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6160715">[</span><span class="ident" id="6160716"><a href="/gostd/image/png/reader.go.html#6160611">j</a></span><span class="op" id="6160717">+</span><span class="num" id="6160718">1</span><span class="op" id="6160719">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160725"><a href="/gostd/image/png/reader.go.html#6160603">pix</a></span><span class="op" id="6160728">[</span><span class="ident" id="6160729"><a href="/gostd/image/png/reader.go.html#6160608">i</a></span><span class="op" id="6160730">+</span><span class="num" id="6160731">2</span><span class="op" id="6160732">]</span>&nbsp;<span class="op" id="6160734">=</span>&nbsp;<span class="ident" id="6160736"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6160740">[</span><span class="ident" id="6160741"><a href="/gostd/image/png/reader.go.html#6160611">j</a></span><span class="op" id="6160742">+</span><span class="num" id="6160743">2</span><span class="op" id="6160744">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160750"><a href="/gostd/image/png/reader.go.html#6160603">pix</a></span><span class="op" id="6160753">[</span><span class="ident" id="6160754"><a href="/gostd/image/png/reader.go.html#6160608">i</a></span><span class="op" id="6160755">+</span><span class="num" id="6160756">3</span><span class="op" id="6160757">]</span>&nbsp;<span class="op" id="6160759">=</span>&nbsp;<span class="num" id="6160761">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160770"><a href="/gostd/image/png/reader.go.html#6160608">i</a></span>&nbsp;<span class="op" id="6160772">+=</span>&nbsp;<span class="num" id="6160775">4</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160781"><a href="/gostd/image/png/reader.go.html#6160611">j</a></span>&nbsp;<span class="op" id="6160783">+=</span>&nbsp;<span class="num" id="6160786">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6160791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160796"><a href="/gostd/image/png/reader.go.html#6157110">pixOffset</a></span>&nbsp;<span class="op" id="6160806">+=</span>&nbsp;<span class="ident" id="6160809"><a href="/gostd/image/png/reader.go.html#6157157">rgba</a></span><span class="op" id="6160813">.</span><span class="ident" id="6160814"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160823">case</span>&nbsp;<span class="ident" id="6160828"><a href="/gostd/image/png/reader.go.html#6149045">cbP1</a></span><span class="op" id="6160832">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160837">for</span>&nbsp;<span class="ident" id="6160841">x</span>&nbsp;<span class="op" id="6160843">:=</span>&nbsp;<span class="num" id="6160846">0</span><span class="op" id="6160847">;</span>&nbsp;<span class="ident" id="6160849"><a href="/gostd/image/png/reader.go.html#6160841">x</a></span>&nbsp;<span class="op" id="6160851">&lt;</span>&nbsp;<span class="ident" id="6160853"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6160858">;</span>&nbsp;<span class="ident" id="6160860"><a href="/gostd/image/png/reader.go.html#6160841">x</a></span>&nbsp;<span class="op" id="6160862">+=</span>&nbsp;<span class="num" id="6160865">8</span>&nbsp;<span class="op" id="6160867">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160873">b</span>&nbsp;<span class="op" id="6160875">:=</span>&nbsp;<span class="ident" id="6160878"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6160882">[</span><span class="ident" id="6160883"><a href="/gostd/image/png/reader.go.html#6160841">x</a></span><span class="op" id="6160884">/</span><span class="num" id="6160885">8</span><span class="op" id="6160886">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160892">for</span>&nbsp;<span class="ident" id="6160896">x2</span>&nbsp;<span class="op" id="6160899">:=</span>&nbsp;<span class="num" id="6160902">0</span><span class="op" id="6160903">;</span>&nbsp;<span class="ident" id="6160905"><a href="/gostd/image/png/reader.go.html#6160896">x2</a></span>&nbsp;<span class="op" id="6160908">&lt;</span>&nbsp;<span class="num" id="6160910">8</span>&nbsp;<span class="op" id="6160912">&amp;&amp;</span>&nbsp;<span class="ident" id="6160915"><a href="/gostd/image/png/reader.go.html#6160841">x</a></span><span class="op" id="6160916">+</span><span class="ident" id="6160917"><a href="/gostd/image/png/reader.go.html#6160896">x2</a></span>&nbsp;<span class="op" id="6160920">&lt;</span>&nbsp;<span class="ident" id="6160922"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6160927">;</span>&nbsp;<span class="ident" id="6160929"><a href="/gostd/image/png/reader.go.html#6160896">x2</a></span><span class="op" id="6160931">++</span>&nbsp;<span class="op" id="6160934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160941">idx</span>&nbsp;<span class="op" id="6160945">:=</span>&nbsp;<span class="ident" id="6160948"><a href="/gostd/image/png/reader.go.html#6160873">b</a></span>&nbsp;<span class="op" id="6160950">&gt;&gt;</span>&nbsp;<span class="num" id="6160953">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160960">if</span>&nbsp;<span class="builtinfunc" id="6160963">len</span><span class="op" id="6160966">(</span><span class="ident" id="6160967"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6160975">.</span><span class="ident" id="6160976"><a href="/gostd/image/image.go.html#5176774">Palette</a></span><span class="op" id="6160983">)</span>&nbsp;<span class="op" id="6160985">&lt;=</span>&nbsp;<span class="builtintype" id="6160988">int</span><span class="op" id="6160991">(</span><span class="ident" id="6160992"><a href="/gostd/image/png/reader.go.html#6160941">idx</a></span><span class="op" id="6160995">)</span>&nbsp;<span class="op" id="6160997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161005"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161013">.</span><span class="ident" id="6161014"><a href="/gostd/image/image.go.html#5176774">Palette</a></span>&nbsp;<span class="op" id="6161022">=</span>&nbsp;<span class="ident" id="6161024"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161032">.</span><span class="ident" id="6161033"><a href="/gostd/image/image.go.html#5176774">Palette</a></span><span class="op" id="6161040">[</span><span class="op" id="6161041">:</span><span class="builtintype" id="6161042">int</span><span class="op" id="6161045">(</span><span class="ident" id="6161046"><a href="/gostd/image/png/reader.go.html#6160941">idx</a></span><span class="op" id="6161049">)</span><span class="op" id="6161050">+</span><span class="num" id="6161051">1</span><span class="op" id="6161052">]</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161066"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161074">.</span><span class="ident" id="6161075"><a href="/gostd/image/image.go.html#5177646">SetColorIndex</a></span><span class="op" id="6161088">(</span><span class="ident" id="6161089"><a href="/gostd/image/png/reader.go.html#6160841">x</a></span><span class="op" id="6161090">+</span><span class="ident" id="6161091"><a href="/gostd/image/png/reader.go.html#6160896">x2</a></span><span class="op" id="6161093">,</span>&nbsp;<span class="ident" id="6161095"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span><span class="op" id="6161096">,</span>&nbsp;<span class="ident" id="6161098"><a href="/gostd/image/png/reader.go.html#6160941">idx</a></span><span class="op" id="6161101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161108"><a href="/gostd/image/png/reader.go.html#6160873">b</a></span>&nbsp;<span class="op" id="6161110">&lt;&lt;=</span>&nbsp;<span class="num" id="6161114">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161125">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161129">case</span>&nbsp;<span class="ident" id="6161134"><a href="/gostd/image/png/reader.go.html#6149051">cbP2</a></span><span class="op" id="6161138">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161143">for</span>&nbsp;<span class="ident" id="6161147">x</span>&nbsp;<span class="op" id="6161149">:=</span>&nbsp;<span class="num" id="6161152">0</span><span class="op" id="6161153">;</span>&nbsp;<span class="ident" id="6161155"><a href="/gostd/image/png/reader.go.html#6161147">x</a></span>&nbsp;<span class="op" id="6161157">&lt;</span>&nbsp;<span class="ident" id="6161159"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6161164">;</span>&nbsp;<span class="ident" id="6161166"><a href="/gostd/image/png/reader.go.html#6161147">x</a></span>&nbsp;<span class="op" id="6161168">+=</span>&nbsp;<span class="num" id="6161171">4</span>&nbsp;<span class="op" id="6161173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161179">b</span>&nbsp;<span class="op" id="6161181">:=</span>&nbsp;<span class="ident" id="6161184"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6161188">[</span><span class="ident" id="6161189"><a href="/gostd/image/png/reader.go.html#6161147">x</a></span><span class="op" id="6161190">/</span><span class="num" id="6161191">4</span><span class="op" id="6161192">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161198">for</span>&nbsp;<span class="ident" id="6161202">x2</span>&nbsp;<span class="op" id="6161205">:=</span>&nbsp;<span class="num" id="6161208">0</span><span class="op" id="6161209">;</span>&nbsp;<span class="ident" id="6161211"><a href="/gostd/image/png/reader.go.html#6161202">x2</a></span>&nbsp;<span class="op" id="6161214">&lt;</span>&nbsp;<span class="num" id="6161216">4</span>&nbsp;<span class="op" id="6161218">&amp;&amp;</span>&nbsp;<span class="ident" id="6161221"><a href="/gostd/image/png/reader.go.html#6161147">x</a></span><span class="op" id="6161222">+</span><span class="ident" id="6161223"><a href="/gostd/image/png/reader.go.html#6161202">x2</a></span>&nbsp;<span class="op" id="6161226">&lt;</span>&nbsp;<span class="ident" id="6161228"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6161233">;</span>&nbsp;<span class="ident" id="6161235"><a href="/gostd/image/png/reader.go.html#6161202">x2</a></span><span class="op" id="6161237">++</span>&nbsp;<span class="op" id="6161240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161247">idx</span>&nbsp;<span class="op" id="6161251">:=</span>&nbsp;<span class="ident" id="6161254"><a href="/gostd/image/png/reader.go.html#6161179">b</a></span>&nbsp;<span class="op" id="6161256">&gt;&gt;</span>&nbsp;<span class="num" id="6161259">6</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161266">if</span>&nbsp;<span class="builtinfunc" id="6161269">len</span><span class="op" id="6161272">(</span><span class="ident" id="6161273"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161281">.</span><span class="ident" id="6161282"><a href="/gostd/image/image.go.html#5176774">Palette</a></span><span class="op" id="6161289">)</span>&nbsp;<span class="op" id="6161291">&lt;=</span>&nbsp;<span class="builtintype" id="6161294">int</span><span class="op" id="6161297">(</span><span class="ident" id="6161298"><a href="/gostd/image/png/reader.go.html#6161247">idx</a></span><span class="op" id="6161301">)</span>&nbsp;<span class="op" id="6161303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161311"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161319">.</span><span class="ident" id="6161320"><a href="/gostd/image/image.go.html#5176774">Palette</a></span>&nbsp;<span class="op" id="6161328">=</span>&nbsp;<span class="ident" id="6161330"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161338">.</span><span class="ident" id="6161339"><a href="/gostd/image/image.go.html#5176774">Palette</a></span><span class="op" id="6161346">[</span><span class="op" id="6161347">:</span><span class="builtintype" id="6161348">int</span><span class="op" id="6161351">(</span><span class="ident" id="6161352"><a href="/gostd/image/png/reader.go.html#6161247">idx</a></span><span class="op" id="6161355">)</span><span class="op" id="6161356">+</span><span class="num" id="6161357">1</span><span class="op" id="6161358">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161372"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161380">.</span><span class="ident" id="6161381"><a href="/gostd/image/image.go.html#5177646">SetColorIndex</a></span><span class="op" id="6161394">(</span><span class="ident" id="6161395"><a href="/gostd/image/png/reader.go.html#6161147">x</a></span><span class="op" id="6161396">+</span><span class="ident" id="6161397"><a href="/gostd/image/png/reader.go.html#6161202">x2</a></span><span class="op" id="6161399">,</span>&nbsp;<span class="ident" id="6161401"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span><span class="op" id="6161402">,</span>&nbsp;<span class="ident" id="6161404"><a href="/gostd/image/png/reader.go.html#6161247">idx</a></span><span class="op" id="6161407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161414"><a href="/gostd/image/png/reader.go.html#6161179">b</a></span>&nbsp;<span class="op" id="6161416">&lt;&lt;=</span>&nbsp;<span class="num" id="6161420">2</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161435">case</span>&nbsp;<span class="ident" id="6161440"><a href="/gostd/image/png/reader.go.html#6149057">cbP4</a></span><span class="op" id="6161444">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161449">for</span>&nbsp;<span class="ident" id="6161453">x</span>&nbsp;<span class="op" id="6161455">:=</span>&nbsp;<span class="num" id="6161458">0</span><span class="op" id="6161459">;</span>&nbsp;<span class="ident" id="6161461"><a href="/gostd/image/png/reader.go.html#6161453">x</a></span>&nbsp;<span class="op" id="6161463">&lt;</span>&nbsp;<span class="ident" id="6161465"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6161470">;</span>&nbsp;<span class="ident" id="6161472"><a href="/gostd/image/png/reader.go.html#6161453">x</a></span>&nbsp;<span class="op" id="6161474">+=</span>&nbsp;<span class="num" id="6161477">2</span>&nbsp;<span class="op" id="6161479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161485">b</span>&nbsp;<span class="op" id="6161487">:=</span>&nbsp;<span class="ident" id="6161490"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6161494">[</span><span class="ident" id="6161495"><a href="/gostd/image/png/reader.go.html#6161453">x</a></span><span class="op" id="6161496">/</span><span class="num" id="6161497">2</span><span class="op" id="6161498">]</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161504">for</span>&nbsp;<span class="ident" id="6161508">x2</span>&nbsp;<span class="op" id="6161511">:=</span>&nbsp;<span class="num" id="6161514">0</span><span class="op" id="6161515">;</span>&nbsp;<span class="ident" id="6161517"><a href="/gostd/image/png/reader.go.html#6161508">x2</a></span>&nbsp;<span class="op" id="6161520">&lt;</span>&nbsp;<span class="num" id="6161522">2</span>&nbsp;<span class="op" id="6161524">&amp;&amp;</span>&nbsp;<span class="ident" id="6161527"><a href="/gostd/image/png/reader.go.html#6161453">x</a></span><span class="op" id="6161528">+</span><span class="ident" id="6161529"><a href="/gostd/image/png/reader.go.html#6161508">x2</a></span>&nbsp;<span class="op" id="6161532">&lt;</span>&nbsp;<span class="ident" id="6161534"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6161539">;</span>&nbsp;<span class="ident" id="6161541"><a href="/gostd/image/png/reader.go.html#6161508">x2</a></span><span class="op" id="6161543">++</span>&nbsp;<span class="op" id="6161546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161553">idx</span>&nbsp;<span class="op" id="6161557">:=</span>&nbsp;<span class="ident" id="6161560"><a href="/gostd/image/png/reader.go.html#6161485">b</a></span>&nbsp;<span class="op" id="6161562">&gt;&gt;</span>&nbsp;<span class="num" id="6161565">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161572">if</span>&nbsp;<span class="builtinfunc" id="6161575">len</span><span class="op" id="6161578">(</span><span class="ident" id="6161579"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161587">.</span><span class="ident" id="6161588"><a href="/gostd/image/image.go.html#5176774">Palette</a></span><span class="op" id="6161595">)</span>&nbsp;<span class="op" id="6161597">&lt;=</span>&nbsp;<span class="builtintype" id="6161600">int</span><span class="op" id="6161603">(</span><span class="ident" id="6161604"><a href="/gostd/image/png/reader.go.html#6161553">idx</a></span><span class="op" id="6161607">)</span>&nbsp;<span class="op" id="6161609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161617"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161625">.</span><span class="ident" id="6161626"><a href="/gostd/image/image.go.html#5176774">Palette</a></span>&nbsp;<span class="op" id="6161634">=</span>&nbsp;<span class="ident" id="6161636"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161644">.</span><span class="ident" id="6161645"><a href="/gostd/image/image.go.html#5176774">Palette</a></span><span class="op" id="6161652">[</span><span class="op" id="6161653">:</span><span class="builtintype" id="6161654">int</span><span class="op" id="6161657">(</span><span class="ident" id="6161658"><a href="/gostd/image/png/reader.go.html#6161553">idx</a></span><span class="op" id="6161661">)</span><span class="op" id="6161662">+</span><span class="num" id="6161663">1</span><span class="op" id="6161664">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161671">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161678"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161686">.</span><span class="ident" id="6161687"><a href="/gostd/image/image.go.html#5177646">SetColorIndex</a></span><span class="op" id="6161700">(</span><span class="ident" id="6161701"><a href="/gostd/image/png/reader.go.html#6161453">x</a></span><span class="op" id="6161702">+</span><span class="ident" id="6161703"><a href="/gostd/image/png/reader.go.html#6161508">x2</a></span><span class="op" id="6161705">,</span>&nbsp;<span class="ident" id="6161707"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span><span class="op" id="6161708">,</span>&nbsp;<span class="ident" id="6161710"><a href="/gostd/image/png/reader.go.html#6161553">idx</a></span><span class="op" id="6161713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161720"><a href="/gostd/image/png/reader.go.html#6161485">b</a></span>&nbsp;<span class="op" id="6161722">&lt;&lt;=</span>&nbsp;<span class="num" id="6161726">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161741">case</span>&nbsp;<span class="ident" id="6161746"><a href="/gostd/image/png/reader.go.html#6149063">cbP8</a></span><span class="op" id="6161750">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161755">if</span>&nbsp;<span class="builtinfunc" id="6161758">len</span><span class="op" id="6161761">(</span><span class="ident" id="6161762"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161770">.</span><span class="ident" id="6161771"><a href="/gostd/image/image.go.html#5176774">Palette</a></span><span class="op" id="6161778">)</span>&nbsp;<span class="op" id="6161780">!=</span>&nbsp;<span class="num" id="6161783">255</span>&nbsp;<span class="op" id="6161787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161793">for</span>&nbsp;<span class="ident" id="6161797">x</span>&nbsp;<span class="op" id="6161799">:=</span>&nbsp;<span class="num" id="6161802">0</span><span class="op" id="6161803">;</span>&nbsp;<span class="ident" id="6161805"><a href="/gostd/image/png/reader.go.html#6161797">x</a></span>&nbsp;<span class="op" id="6161807">&lt;</span>&nbsp;<span class="ident" id="6161809"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6161814">;</span>&nbsp;<span class="ident" id="6161816"><a href="/gostd/image/png/reader.go.html#6161797">x</a></span><span class="op" id="6161817">++</span>&nbsp;<span class="op" id="6161820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161827">if</span>&nbsp;<span class="builtinfunc" id="6161830">len</span><span class="op" id="6161833">(</span><span class="ident" id="6161834"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161842">.</span><span class="ident" id="6161843"><a href="/gostd/image/image.go.html#5176774">Palette</a></span><span class="op" id="6161850">)</span>&nbsp;<span class="op" id="6161852">&lt;=</span>&nbsp;<span class="builtintype" id="6161855">int</span><span class="op" id="6161858">(</span><span class="ident" id="6161859"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6161863">[</span><span class="ident" id="6161864"><a href="/gostd/image/png/reader.go.html#6161797">x</a></span><span class="op" id="6161865">]</span><span class="op" id="6161866">)</span>&nbsp;<span class="op" id="6161868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161876"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161884">.</span><span class="ident" id="6161885"><a href="/gostd/image/image.go.html#5176774">Palette</a></span>&nbsp;<span class="op" id="6161893">=</span>&nbsp;<span class="ident" id="6161895"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161903">.</span><span class="ident" id="6161904"><a href="/gostd/image/image.go.html#5176774">Palette</a></span><span class="op" id="6161911">[</span><span class="op" id="6161912">:</span><span class="builtintype" id="6161913">int</span><span class="op" id="6161916">(</span><span class="ident" id="6161917"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6161921">[</span><span class="ident" id="6161922"><a href="/gostd/image/png/reader.go.html#6161797">x</a></span><span class="op" id="6161923">]</span><span class="op" id="6161924">)</span><span class="op" id="6161925">+</span><span class="num" id="6161926">1</span><span class="op" id="6161927">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161934">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6161950">copy</span><span class="op" id="6161954">(</span><span class="ident" id="6161955"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6161963">.</span><span class="ident" id="6161964"><a href="/gostd/image/image.go.html#5176589">Pix</a></span><span class="op" id="6161967">[</span><span class="ident" id="6161968"><a href="/gostd/image/png/reader.go.html#6157110">pixOffset</a></span><span class="op" id="6161977">:</span><span class="op" id="6161978">]</span><span class="op" id="6161979">,</span>&nbsp;<span class="ident" id="6161981"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6161985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161990"><a href="/gostd/image/png/reader.go.html#6157110">pixOffset</a></span>&nbsp;<span class="op" id="6162000">+=</span>&nbsp;<span class="ident" id="6162003"><a href="/gostd/image/png/reader.go.html#6157180">paletted</a></span><span class="op" id="6162011">.</span><span class="ident" id="6162012"><a href="/gostd/image/image.go.html#5176678">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162021">case</span>&nbsp;<span class="ident" id="6162026"><a href="/gostd/image/png/reader.go.html#6149069">cbTCA8</a></span><span class="op" id="6162032">:</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6162037">copy</span><span class="op" id="6162041">(</span><span class="ident" id="6162042"><a href="/gostd/image/png/reader.go.html#6157207">nrgba</a></span><span class="op" id="6162047">.</span><span class="ident" id="6162048"><a href="/gostd/image/image.go.html#5161620">Pix</a></span><span class="op" id="6162051">[</span><span class="ident" id="6162052"><a href="/gostd/image/png/reader.go.html#6157110">pixOffset</a></span><span class="op" id="6162061">:</span><span class="op" id="6162062">]</span><span class="op" id="6162063">,</span>&nbsp;<span class="ident" id="6162065"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162074"><a href="/gostd/image/png/reader.go.html#6157110">pixOffset</a></span>&nbsp;<span class="op" id="6162084">+=</span>&nbsp;<span class="ident" id="6162087"><a href="/gostd/image/png/reader.go.html#6157207">nrgba</a></span><span class="op" id="6162092">.</span><span class="ident" id="6162093"><a href="/gostd/image/image.go.html#5161709">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162102">case</span>&nbsp;<span class="ident" id="6162107"><a href="/gostd/image/png/reader.go.html#6149077">cbG16</a></span><span class="op" id="6162112">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162117">for</span>&nbsp;<span class="ident" id="6162121">x</span>&nbsp;<span class="op" id="6162123">:=</span>&nbsp;<span class="num" id="6162126">0</span><span class="op" id="6162127">;</span>&nbsp;<span class="ident" id="6162129"><a href="/gostd/image/png/reader.go.html#6162121">x</a></span>&nbsp;<span class="op" id="6162131">&lt;</span>&nbsp;<span class="ident" id="6162133"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6162138">;</span>&nbsp;<span class="ident" id="6162140"><a href="/gostd/image/png/reader.go.html#6162121">x</a></span><span class="op" id="6162141">++</span>&nbsp;<span class="op" id="6162144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162150">ycol</span>&nbsp;<span class="op" id="6162155">:=</span>&nbsp;<span class="builtintype" id="6162158">uint16</span><span class="op" id="6162164">(</span><span class="ident" id="6162165"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162169">[</span><span class="num" id="6162170">2</span><span class="op" id="6162171">*</span><span class="ident" id="6162172"><a href="/gostd/image/png/reader.go.html#6162121">x</a></span><span class="op" id="6162173">+</span><span class="num" id="6162174">0</span><span class="op" id="6162175">]</span><span class="op" id="6162176">)</span><span class="op" id="6162177">&lt;&lt;</span><span class="num" id="6162179">8</span>&nbsp;<span class="op" id="6162181">|</span>&nbsp;<span class="builtintype" id="6162183">uint16</span><span class="op" id="6162189">(</span><span class="ident" id="6162190"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162194">[</span><span class="num" id="6162195">2</span><span class="op" id="6162196">*</span><span class="ident" id="6162197"><a href="/gostd/image/png/reader.go.html#6162121">x</a></span><span class="op" id="6162198">+</span><span class="num" id="6162199">1</span><span class="op" id="6162200">]</span><span class="op" id="6162201">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162207"><a href="/gostd/image/png/reader.go.html#6157231">gray16</a></span><span class="op" id="6162213">.</span><span class="ident" id="6162214"><a href="/gostd/image/image.go.html#5175304">SetGray16</a></span><span class="op" id="6162223">(</span><span class="ident" id="6162224"><a href="/gostd/image/png/reader.go.html#6162121">x</a></span><span class="op" id="6162225">,</span>&nbsp;<span class="ident" id="6162227"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span><span class="op" id="6162228">,</span>&nbsp;<span class="ident" id="6162230"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6162235">.</span><span class="ident" id="6162236"><a href="/gostd/image/color/color.go.html#5187394">Gray16</a></span><span class="op" id="6162242">{</span><span class="ident" id="6162243"><a href="/gostd/image/png/reader.go.html#6162150">ycol</a></span><span class="op" id="6162247">}</span><span class="op" id="6162248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6162253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162257">case</span>&nbsp;<span class="ident" id="6162262"><a href="/gostd/image/png/reader.go.html#6149084">cbGA16</a></span><span class="op" id="6162268">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162273">for</span>&nbsp;<span class="ident" id="6162277">x</span>&nbsp;<span class="op" id="6162279">:=</span>&nbsp;<span class="num" id="6162282">0</span><span class="op" id="6162283">;</span>&nbsp;<span class="ident" id="6162285"><a href="/gostd/image/png/reader.go.html#6162277">x</a></span>&nbsp;<span class="op" id="6162287">&lt;</span>&nbsp;<span class="ident" id="6162289"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6162294">;</span>&nbsp;<span class="ident" id="6162296"><a href="/gostd/image/png/reader.go.html#6162277">x</a></span><span class="op" id="6162297">++</span>&nbsp;<span class="op" id="6162300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162306">ycol</span>&nbsp;<span class="op" id="6162311">:=</span>&nbsp;<span class="builtintype" id="6162314">uint16</span><span class="op" id="6162320">(</span><span class="ident" id="6162321"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162325">[</span><span class="num" id="6162326">4</span><span class="op" id="6162327">*</span><span class="ident" id="6162328"><a href="/gostd/image/png/reader.go.html#6162277">x</a></span><span class="op" id="6162329">+</span><span class="num" id="6162330">0</span><span class="op" id="6162331">]</span><span class="op" id="6162332">)</span><span class="op" id="6162333">&lt;&lt;</span><span class="num" id="6162335">8</span>&nbsp;<span class="op" id="6162337">|</span>&nbsp;<span class="builtintype" id="6162339">uint16</span><span class="op" id="6162345">(</span><span class="ident" id="6162346"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162350">[</span><span class="num" id="6162351">4</span><span class="op" id="6162352">*</span><span class="ident" id="6162353"><a href="/gostd/image/png/reader.go.html#6162277">x</a></span><span class="op" id="6162354">+</span><span class="num" id="6162355">1</span><span class="op" id="6162356">]</span><span class="op" id="6162357">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162363">acol</span>&nbsp;<span class="op" id="6162368">:=</span>&nbsp;<span class="builtintype" id="6162371">uint16</span><span class="op" id="6162377">(</span><span class="ident" id="6162378"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162382">[</span><span class="num" id="6162383">4</span><span class="op" id="6162384">*</span><span class="ident" id="6162385"><a href="/gostd/image/png/reader.go.html#6162277">x</a></span><span class="op" id="6162386">+</span><span class="num" id="6162387">2</span><span class="op" id="6162388">]</span><span class="op" id="6162389">)</span><span class="op" id="6162390">&lt;&lt;</span><span class="num" id="6162392">8</span>&nbsp;<span class="op" id="6162394">|</span>&nbsp;<span class="builtintype" id="6162396">uint16</span><span class="op" id="6162402">(</span><span class="ident" id="6162403"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162407">[</span><span class="num" id="6162408">4</span><span class="op" id="6162409">*</span><span class="ident" id="6162410"><a href="/gostd/image/png/reader.go.html#6162277">x</a></span><span class="op" id="6162411">+</span><span class="num" id="6162412">3</span><span class="op" id="6162413">]</span><span class="op" id="6162414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162420"><a href="/gostd/image/png/reader.go.html#6157281">nrgba64</a></span><span class="op" id="6162427">.</span><span class="ident" id="6162428"><a href="/gostd/image/image.go.html#5165511">SetNRGBA64</a></span><span class="op" id="6162438">(</span><span class="ident" id="6162439"><a href="/gostd/image/png/reader.go.html#6162277">x</a></span><span class="op" id="6162440">,</span>&nbsp;<span class="ident" id="6162442"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span><span class="op" id="6162443">,</span>&nbsp;<span class="ident" id="6162445"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6162450">.</span><span class="ident" id="6162451"><a href="/gostd/image/color/color.go.html#5186574">NRGBA64</a></span><span class="op" id="6162458">{</span><span class="ident" id="6162459"><a href="/gostd/image/png/reader.go.html#6162306">ycol</a></span><span class="op" id="6162463">,</span>&nbsp;<span class="ident" id="6162465"><a href="/gostd/image/png/reader.go.html#6162306">ycol</a></span><span class="op" id="6162469">,</span>&nbsp;<span class="ident" id="6162471"><a href="/gostd/image/png/reader.go.html#6162306">ycol</a></span><span class="op" id="6162475">,</span>&nbsp;<span class="ident" id="6162477"><a href="/gostd/image/png/reader.go.html#6162363">acol</a></span><span class="op" id="6162481">}</span><span class="op" id="6162482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6162487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162491">case</span>&nbsp;<span class="ident" id="6162496"><a href="/gostd/image/png/reader.go.html#6149092">cbTC16</a></span><span class="op" id="6162502">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162507">for</span>&nbsp;<span class="ident" id="6162511">x</span>&nbsp;<span class="op" id="6162513">:=</span>&nbsp;<span class="num" id="6162516">0</span><span class="op" id="6162517">;</span>&nbsp;<span class="ident" id="6162519"><a href="/gostd/image/png/reader.go.html#6162511">x</a></span>&nbsp;<span class="op" id="6162521">&lt;</span>&nbsp;<span class="ident" id="6162523"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6162528">;</span>&nbsp;<span class="ident" id="6162530"><a href="/gostd/image/png/reader.go.html#6162511">x</a></span><span class="op" id="6162531">++</span>&nbsp;<span class="op" id="6162534">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162540">rcol</span>&nbsp;<span class="op" id="6162545">:=</span>&nbsp;<span class="builtintype" id="6162548">uint16</span><span class="op" id="6162554">(</span><span class="ident" id="6162555"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162559">[</span><span class="num" id="6162560">6</span><span class="op" id="6162561">*</span><span class="ident" id="6162562"><a href="/gostd/image/png/reader.go.html#6162511">x</a></span><span class="op" id="6162563">+</span><span class="num" id="6162564">0</span><span class="op" id="6162565">]</span><span class="op" id="6162566">)</span><span class="op" id="6162567">&lt;&lt;</span><span class="num" id="6162569">8</span>&nbsp;<span class="op" id="6162571">|</span>&nbsp;<span class="builtintype" id="6162573">uint16</span><span class="op" id="6162579">(</span><span class="ident" id="6162580"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162584">[</span><span class="num" id="6162585">6</span><span class="op" id="6162586">*</span><span class="ident" id="6162587"><a href="/gostd/image/png/reader.go.html#6162511">x</a></span><span class="op" id="6162588">+</span><span class="num" id="6162589">1</span><span class="op" id="6162590">]</span><span class="op" id="6162591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162597">gcol</span>&nbsp;<span class="op" id="6162602">:=</span>&nbsp;<span class="builtintype" id="6162605">uint16</span><span class="op" id="6162611">(</span><span class="ident" id="6162612"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162616">[</span><span class="num" id="6162617">6</span><span class="op" id="6162618">*</span><span class="ident" id="6162619"><a href="/gostd/image/png/reader.go.html#6162511">x</a></span><span class="op" id="6162620">+</span><span class="num" id="6162621">2</span><span class="op" id="6162622">]</span><span class="op" id="6162623">)</span><span class="op" id="6162624">&lt;&lt;</span><span class="num" id="6162626">8</span>&nbsp;<span class="op" id="6162628">|</span>&nbsp;<span class="builtintype" id="6162630">uint16</span><span class="op" id="6162636">(</span><span class="ident" id="6162637"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162641">[</span><span class="num" id="6162642">6</span><span class="op" id="6162643">*</span><span class="ident" id="6162644"><a href="/gostd/image/png/reader.go.html#6162511">x</a></span><span class="op" id="6162645">+</span><span class="num" id="6162646">3</span><span class="op" id="6162647">]</span><span class="op" id="6162648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162654">bcol</span>&nbsp;<span class="op" id="6162659">:=</span>&nbsp;<span class="builtintype" id="6162662">uint16</span><span class="op" id="6162668">(</span><span class="ident" id="6162669"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162673">[</span><span class="num" id="6162674">6</span><span class="op" id="6162675">*</span><span class="ident" id="6162676"><a href="/gostd/image/png/reader.go.html#6162511">x</a></span><span class="op" id="6162677">+</span><span class="num" id="6162678">4</span><span class="op" id="6162679">]</span><span class="op" id="6162680">)</span><span class="op" id="6162681">&lt;&lt;</span><span class="num" id="6162683">8</span>&nbsp;<span class="op" id="6162685">|</span>&nbsp;<span class="builtintype" id="6162687">uint16</span><span class="op" id="6162693">(</span><span class="ident" id="6162694"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162698">[</span><span class="num" id="6162699">6</span><span class="op" id="6162700">*</span><span class="ident" id="6162701"><a href="/gostd/image/png/reader.go.html#6162511">x</a></span><span class="op" id="6162702">+</span><span class="num" id="6162703">5</span><span class="op" id="6162704">]</span><span class="op" id="6162705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162711"><a href="/gostd/image/png/reader.go.html#6157256">rgba64</a></span><span class="op" id="6162717">.</span><span class="ident" id="6162718"><a href="/gostd/image/image.go.html#5159912">SetRGBA64</a></span><span class="op" id="6162727">(</span><span class="ident" id="6162728"><a href="/gostd/image/png/reader.go.html#6162511">x</a></span><span class="op" id="6162729">,</span>&nbsp;<span class="ident" id="6162731"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span><span class="op" id="6162732">,</span>&nbsp;<span class="ident" id="6162734"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6162739">.</span><span class="ident" id="6162740"><a href="/gostd/image/color/color.go.html#5185941">RGBA64</a></span><span class="op" id="6162746">{</span><span class="ident" id="6162747"><a href="/gostd/image/png/reader.go.html#6162540">rcol</a></span><span class="op" id="6162751">,</span>&nbsp;<span class="ident" id="6162753"><a href="/gostd/image/png/reader.go.html#6162597">gcol</a></span><span class="op" id="6162757">,</span>&nbsp;<span class="ident" id="6162759"><a href="/gostd/image/png/reader.go.html#6162654">bcol</a></span><span class="op" id="6162763">,</span>&nbsp;<span class="num" id="6162765">0xffff</span><span class="op" id="6162771">}</span><span class="op" id="6162772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6162777">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162781">case</span>&nbsp;<span class="ident" id="6162786"><a href="/gostd/image/png/reader.go.html#6149100">cbTCA16</a></span><span class="op" id="6162793">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162798">for</span>&nbsp;<span class="ident" id="6162802">x</span>&nbsp;<span class="op" id="6162804">:=</span>&nbsp;<span class="num" id="6162807">0</span><span class="op" id="6162808">;</span>&nbsp;<span class="ident" id="6162810"><a href="/gostd/image/png/reader.go.html#6162802">x</a></span>&nbsp;<span class="op" id="6162812">&lt;</span>&nbsp;<span class="ident" id="6162814"><a href="/gostd/image/png/reader.go.html#6157332">width</a></span><span class="op" id="6162819">;</span>&nbsp;<span class="ident" id="6162821"><a href="/gostd/image/png/reader.go.html#6162802">x</a></span><span class="op" id="6162822">++</span>&nbsp;<span class="op" id="6162825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162831">rcol</span>&nbsp;<span class="op" id="6162836">:=</span>&nbsp;<span class="builtintype" id="6162839">uint16</span><span class="op" id="6162845">(</span><span class="ident" id="6162846"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162850">[</span><span class="num" id="6162851">8</span><span class="op" id="6162852">*</span><span class="ident" id="6162853"><a href="/gostd/image/png/reader.go.html#6162802">x</a></span><span class="op" id="6162854">+</span><span class="num" id="6162855">0</span><span class="op" id="6162856">]</span><span class="op" id="6162857">)</span><span class="op" id="6162858">&lt;&lt;</span><span class="num" id="6162860">8</span>&nbsp;<span class="op" id="6162862">|</span>&nbsp;<span class="builtintype" id="6162864">uint16</span><span class="op" id="6162870">(</span><span class="ident" id="6162871"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162875">[</span><span class="num" id="6162876">8</span><span class="op" id="6162877">*</span><span class="ident" id="6162878"><a href="/gostd/image/png/reader.go.html#6162802">x</a></span><span class="op" id="6162879">+</span><span class="num" id="6162880">1</span><span class="op" id="6162881">]</span><span class="op" id="6162882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162888">gcol</span>&nbsp;<span class="op" id="6162893">:=</span>&nbsp;<span class="builtintype" id="6162896">uint16</span><span class="op" id="6162902">(</span><span class="ident" id="6162903"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162907">[</span><span class="num" id="6162908">8</span><span class="op" id="6162909">*</span><span class="ident" id="6162910"><a href="/gostd/image/png/reader.go.html#6162802">x</a></span><span class="op" id="6162911">+</span><span class="num" id="6162912">2</span><span class="op" id="6162913">]</span><span class="op" id="6162914">)</span><span class="op" id="6162915">&lt;&lt;</span><span class="num" id="6162917">8</span>&nbsp;<span class="op" id="6162919">|</span>&nbsp;<span class="builtintype" id="6162921">uint16</span><span class="op" id="6162927">(</span><span class="ident" id="6162928"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162932">[</span><span class="num" id="6162933">8</span><span class="op" id="6162934">*</span><span class="ident" id="6162935"><a href="/gostd/image/png/reader.go.html#6162802">x</a></span><span class="op" id="6162936">+</span><span class="num" id="6162937">3</span><span class="op" id="6162938">]</span><span class="op" id="6162939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162945">bcol</span>&nbsp;<span class="op" id="6162950">:=</span>&nbsp;<span class="builtintype" id="6162953">uint16</span><span class="op" id="6162959">(</span><span class="ident" id="6162960"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162964">[</span><span class="num" id="6162965">8</span><span class="op" id="6162966">*</span><span class="ident" id="6162967"><a href="/gostd/image/png/reader.go.html#6162802">x</a></span><span class="op" id="6162968">+</span><span class="num" id="6162969">4</span><span class="op" id="6162970">]</span><span class="op" id="6162971">)</span><span class="op" id="6162972">&lt;&lt;</span><span class="num" id="6162974">8</span>&nbsp;<span class="op" id="6162976">|</span>&nbsp;<span class="builtintype" id="6162978">uint16</span><span class="op" id="6162984">(</span><span class="ident" id="6162985"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6162989">[</span><span class="num" id="6162990">8</span><span class="op" id="6162991">*</span><span class="ident" id="6162992"><a href="/gostd/image/png/reader.go.html#6162802">x</a></span><span class="op" id="6162993">+</span><span class="num" id="6162994">5</span><span class="op" id="6162995">]</span><span class="op" id="6162996">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163002">acol</span>&nbsp;<span class="op" id="6163007">:=</span>&nbsp;<span class="builtintype" id="6163010">uint16</span><span class="op" id="6163016">(</span><span class="ident" id="6163017"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6163021">[</span><span class="num" id="6163022">8</span><span class="op" id="6163023">*</span><span class="ident" id="6163024"><a href="/gostd/image/png/reader.go.html#6162802">x</a></span><span class="op" id="6163025">+</span><span class="num" id="6163026">6</span><span class="op" id="6163027">]</span><span class="op" id="6163028">)</span><span class="op" id="6163029">&lt;&lt;</span><span class="num" id="6163031">8</span>&nbsp;<span class="op" id="6163033">|</span>&nbsp;<span class="builtintype" id="6163035">uint16</span><span class="op" id="6163041">(</span><span class="ident" id="6163042"><a href="/gostd/image/png/reader.go.html#6159152">cdat</a></span><span class="op" id="6163046">[</span><span class="num" id="6163047">8</span><span class="op" id="6163048">*</span><span class="ident" id="6163049"><a href="/gostd/image/png/reader.go.html#6162802">x</a></span><span class="op" id="6163050">+</span><span class="num" id="6163051">7</span><span class="op" id="6163052">]</span><span class="op" id="6163053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163059"><a href="/gostd/image/png/reader.go.html#6157281">nrgba64</a></span><span class="op" id="6163066">.</span><span class="ident" id="6163067"><a href="/gostd/image/image.go.html#5165511">SetNRGBA64</a></span><span class="op" id="6163077">(</span><span class="ident" id="6163078"><a href="/gostd/image/png/reader.go.html#6162802">x</a></span><span class="op" id="6163079">,</span>&nbsp;<span class="ident" id="6163081"><a href="/gostd/image/png/reader.go.html#6158994">y</a></span><span class="op" id="6163082">,</span>&nbsp;<span class="ident" id="6163084"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6163089">.</span><span class="ident" id="6163090"><a href="/gostd/image/color/color.go.html#5186574">NRGBA64</a></span><span class="op" id="6163097">{</span><span class="ident" id="6163098"><a href="/gostd/image/png/reader.go.html#6162831">rcol</a></span><span class="op" id="6163102">,</span>&nbsp;<span class="ident" id="6163104"><a href="/gostd/image/png/reader.go.html#6162888">gcol</a></span><span class="op" id="6163108">,</span>&nbsp;<span class="ident" id="6163110"><a href="/gostd/image/png/reader.go.html#6162945">bcol</a></span><span class="op" id="6163114">,</span>&nbsp;<span class="ident" id="6163116"><a href="/gostd/image/png/reader.go.html#6163002">acol</a></span><span class="op" id="6163120">}</span><span class="op" id="6163121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6163126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6163130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6163135">//&nbsp;The&nbsp;current&nbsp;row&nbsp;for&nbsp;y&nbsp;is&nbsp;the&nbsp;previous&nbsp;row&nbsp;for&nbsp;y+1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163191"><a href="/gostd/image/png/reader.go.html#6158959">pr</a></span><span class="op" id="6163193">,</span>&nbsp;<span class="ident" id="6163195"><a href="/gostd/image/png/reader.go.html#6158929">cr</a></span>&nbsp;<span class="op" id="6163198">=</span>&nbsp;<span class="ident" id="6163200"><a href="/gostd/image/png/reader.go.html#6158929">cr</a></span><span class="op" id="6163202">,</span>&nbsp;<span class="ident" id="6163204"><a href="/gostd/image/png/reader.go.html#6158959">pr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6163208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163212">return</span>&nbsp;<span class="ident" id="6163219"><a href="/gostd/image/png/reader.go.html#6157307">img</a></span><span class="op" id="6163222">,</span>&nbsp;<span class="builtintype" id="6163224">nil</span><br>
<span class="lineno">585</span><span class="op" id="6163228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6163231">//&nbsp;mergePassInto&nbsp;merges&nbsp;a&nbsp;single&nbsp;pass&nbsp;into&nbsp;a&nbsp;full&nbsp;sized&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="6163294">func</span>&nbsp;<span class="op" id="6163299">(</span><span class="ident" id="6163300">d</span>&nbsp;<span class="op" id="6163302">*</span><span class="ident" id="6163303"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6163310">)</span>&nbsp;<span class="ident" id="6163312">mergePassInto</span><span class="op" id="6163325">(</span><span class="ident" id="6163326">dst</span>&nbsp;<span class="ident" id="6163330"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6163335">.</span><span class="ident" id="6163336"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="6163341">,</span>&nbsp;<span class="ident" id="6163343">src</span>&nbsp;<span class="ident" id="6163347"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6163352">.</span><span class="ident" id="6163353"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="6163358">,</span>&nbsp;<span class="ident" id="6163360">pass</span>&nbsp;<span class="builtintype" id="6163365">int</span><span class="op" id="6163368">)</span>&nbsp;<span class="op" id="6163370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163373">p</span>&nbsp;<span class="op" id="6163375">:=</span>&nbsp;<span class="ident" id="6163378"><a href="/gostd/image/png/reader.go.html#6149580">interlacing</a></span><span class="op" id="6163389">[</span><span class="ident" id="6163390"><a href="/gostd/image/png/reader.go.html#6163360">pass</a></span><span class="op" id="6163394">]</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163397">var</span>&nbsp;<span class="op" id="6163401">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163405">srcPix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6163419">[</span><span class="op" id="6163420">]</span><span class="builtintype" id="6163421">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163429">dstPix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6163443">[</span><span class="op" id="6163444">]</span><span class="builtintype" id="6163445">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163453">stride</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6163467">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163473">rect</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163487"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6163492">.</span><span class="ident" id="6163493"><a href="/gostd/image/geom.go.html#5149996">Rectangle</a></span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163505">bytesPerPixel</span>&nbsp;<span class="builtintype" id="6163519">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6163524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163527">switch</span>&nbsp;<span class="ident" id="6163534">target</span>&nbsp;<span class="op" id="6163541">:=</span>&nbsp;<span class="ident" id="6163544"><a href="/gostd/image/png/reader.go.html#6163326">dst</a></span><span class="op" id="6163547">.</span><span class="op" id="6163548">(</span><span class="keyword" id="6163549">type</span><span class="op" id="6163553">)</span>&nbsp;<span class="op" id="6163555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163558">case</span>&nbsp;<span class="op" id="6163563">*</span><span class="ident" id="6163564"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6163569">.</span><span class="ident" id="6163570"><a href="/gostd/image/image.go.html#5167078">Alpha</a></span><span class="op" id="6163575">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163579"><a href="/gostd/image/png/reader.go.html#6163405">srcPix</a></span>&nbsp;<span class="op" id="6163586">=</span>&nbsp;<span class="ident" id="6163588"><a href="/gostd/image/png/reader.go.html#6163343">src</a></span><span class="op" id="6163591">.</span><span class="op" id="6163592">(</span><span class="op" id="6163593">*</span><span class="ident" id="6163594"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6163599">.</span><span class="ident" id="6163600"><a href="/gostd/image/image.go.html#5167078">Alpha</a></span><span class="op" id="6163605">)</span><span class="op" id="6163606">.</span><span class="ident" id="6163607"><a href="/gostd/image/image.go.html#5167226">Pix</a></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163613"><a href="/gostd/image/png/reader.go.html#6163429">dstPix</a></span><span class="op" id="6163619">,</span>&nbsp;<span class="ident" id="6163621"><a href="/gostd/image/png/reader.go.html#6163453">stride</a></span><span class="op" id="6163627">,</span>&nbsp;<span class="ident" id="6163629"><a href="/gostd/image/png/reader.go.html#6163473">rect</a></span>&nbsp;<span class="op" id="6163634">=</span>&nbsp;<span class="ident" id="6163636"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6163642">.</span><span class="ident" id="6163643"><a href="/gostd/image/image.go.html#5167226">Pix</a></span><span class="op" id="6163646">,</span>&nbsp;<span class="ident" id="6163648"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6163654">.</span><span class="ident" id="6163655"><a href="/gostd/image/image.go.html#5167315">Stride</a></span><span class="op" id="6163661">,</span>&nbsp;<span class="ident" id="6163663"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6163669">.</span><span class="ident" id="6163670"><a href="/gostd/image/image.go.html#5167359">Rect</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163677"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span>&nbsp;<span class="op" id="6163691">=</span>&nbsp;<span class="num" id="6163693">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163696">case</span>&nbsp;<span class="op" id="6163701">*</span><span class="ident" id="6163702"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6163707">.</span><span class="ident" id="6163708"><a href="/gostd/image/image.go.html#5169443">Alpha16</a></span><span class="op" id="6163715">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163719"><a href="/gostd/image/png/reader.go.html#6163405">srcPix</a></span>&nbsp;<span class="op" id="6163726">=</span>&nbsp;<span class="ident" id="6163728"><a href="/gostd/image/png/reader.go.html#6163343">src</a></span><span class="op" id="6163731">.</span><span class="op" id="6163732">(</span><span class="op" id="6163733">*</span><span class="ident" id="6163734"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6163739">.</span><span class="ident" id="6163740"><a href="/gostd/image/image.go.html#5169443">Alpha16</a></span><span class="op" id="6163747">)</span><span class="op" id="6163748">.</span><span class="ident" id="6163749"><a href="/gostd/image/image.go.html#5169614">Pix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163755"><a href="/gostd/image/png/reader.go.html#6163429">dstPix</a></span><span class="op" id="6163761">,</span>&nbsp;<span class="ident" id="6163763"><a href="/gostd/image/png/reader.go.html#6163453">stride</a></span><span class="op" id="6163769">,</span>&nbsp;<span class="ident" id="6163771"><a href="/gostd/image/png/reader.go.html#6163473">rect</a></span>&nbsp;<span class="op" id="6163776">=</span>&nbsp;<span class="ident" id="6163778"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6163784">.</span><span class="ident" id="6163785"><a href="/gostd/image/image.go.html#5169614">Pix</a></span><span class="op" id="6163788">,</span>&nbsp;<span class="ident" id="6163790"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6163796">.</span><span class="ident" id="6163797"><a href="/gostd/image/image.go.html#5169703">Stride</a></span><span class="op" id="6163803">,</span>&nbsp;<span class="ident" id="6163805"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6163811">.</span><span class="ident" id="6163812"><a href="/gostd/image/image.go.html#5169747">Rect</a></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163819"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span>&nbsp;<span class="op" id="6163833">=</span>&nbsp;<span class="num" id="6163835">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163838">case</span>&nbsp;<span class="op" id="6163843">*</span><span class="ident" id="6163844"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6163849">.</span><span class="ident" id="6163850"><a href="/gostd/image/image.go.html#5172029">Gray</a></span><span class="op" id="6163854">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163858"><a href="/gostd/image/png/reader.go.html#6163405">srcPix</a></span>&nbsp;<span class="op" id="6163865">=</span>&nbsp;<span class="ident" id="6163867"><a href="/gostd/image/png/reader.go.html#6163343">src</a></span><span class="op" id="6163870">.</span><span class="op" id="6163871">(</span><span class="op" id="6163872">*</span><span class="ident" id="6163873"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6163878">.</span><span class="ident" id="6163879"><a href="/gostd/image/image.go.html#5172029">Gray</a></span><span class="op" id="6163883">)</span><span class="op" id="6163884">.</span><span class="ident" id="6163885"><a href="/gostd/image/image.go.html#5172175">Pix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163891"><a href="/gostd/image/png/reader.go.html#6163429">dstPix</a></span><span class="op" id="6163897">,</span>&nbsp;<span class="ident" id="6163899"><a href="/gostd/image/png/reader.go.html#6163453">stride</a></span><span class="op" id="6163905">,</span>&nbsp;<span class="ident" id="6163907"><a href="/gostd/image/png/reader.go.html#6163473">rect</a></span>&nbsp;<span class="op" id="6163912">=</span>&nbsp;<span class="ident" id="6163914"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6163920">.</span><span class="ident" id="6163921"><a href="/gostd/image/image.go.html#5172175">Pix</a></span><span class="op" id="6163924">,</span>&nbsp;<span class="ident" id="6163926"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6163932">.</span><span class="ident" id="6163933"><a href="/gostd/image/image.go.html#5172264">Stride</a></span><span class="op" id="6163939">,</span>&nbsp;<span class="ident" id="6163941"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6163947">.</span><span class="ident" id="6163948"><a href="/gostd/image/image.go.html#5172308">Rect</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163955"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span>&nbsp;<span class="op" id="6163969">=</span>&nbsp;<span class="num" id="6163971">1</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163974">case</span>&nbsp;<span class="op" id="6163979">*</span><span class="ident" id="6163980"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6163985">.</span><span class="ident" id="6163986"><a href="/gostd/image/image.go.html#5174135">Gray16</a></span><span class="op" id="6163992">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163996"><a href="/gostd/image/png/reader.go.html#6163405">srcPix</a></span>&nbsp;<span class="op" id="6164003">=</span>&nbsp;<span class="ident" id="6164005"><a href="/gostd/image/png/reader.go.html#6163343">src</a></span><span class="op" id="6164008">.</span><span class="op" id="6164009">(</span><span class="op" id="6164010">*</span><span class="ident" id="6164011"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6164016">.</span><span class="ident" id="6164017"><a href="/gostd/image/image.go.html#5174135">Gray16</a></span><span class="op" id="6164023">)</span><span class="op" id="6164024">.</span><span class="ident" id="6164025"><a href="/gostd/image/image.go.html#5174304">Pix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164031"><a href="/gostd/image/png/reader.go.html#6163429">dstPix</a></span><span class="op" id="6164037">,</span>&nbsp;<span class="ident" id="6164039"><a href="/gostd/image/png/reader.go.html#6163453">stride</a></span><span class="op" id="6164045">,</span>&nbsp;<span class="ident" id="6164047"><a href="/gostd/image/png/reader.go.html#6163473">rect</a></span>&nbsp;<span class="op" id="6164052">=</span>&nbsp;<span class="ident" id="6164054"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164060">.</span><span class="ident" id="6164061"><a href="/gostd/image/image.go.html#5174304">Pix</a></span><span class="op" id="6164064">,</span>&nbsp;<span class="ident" id="6164066"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164072">.</span><span class="ident" id="6164073"><a href="/gostd/image/image.go.html#5174393">Stride</a></span><span class="op" id="6164079">,</span>&nbsp;<span class="ident" id="6164081"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164087">.</span><span class="ident" id="6164088"><a href="/gostd/image/image.go.html#5174437">Rect</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164095"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span>&nbsp;<span class="op" id="6164109">=</span>&nbsp;<span class="num" id="6164111">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164114">case</span>&nbsp;<span class="op" id="6164119">*</span><span class="ident" id="6164120"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6164125">.</span><span class="ident" id="6164126"><a href="/gostd/image/image.go.html#5161468">NRGBA</a></span><span class="op" id="6164131">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164135"><a href="/gostd/image/png/reader.go.html#6163405">srcPix</a></span>&nbsp;<span class="op" id="6164142">=</span>&nbsp;<span class="ident" id="6164144"><a href="/gostd/image/png/reader.go.html#6163343">src</a></span><span class="op" id="6164147">.</span><span class="op" id="6164148">(</span><span class="op" id="6164149">*</span><span class="ident" id="6164150"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6164155">.</span><span class="ident" id="6164156"><a href="/gostd/image/image.go.html#5161468">NRGBA</a></span><span class="op" id="6164161">)</span><span class="op" id="6164162">.</span><span class="ident" id="6164163"><a href="/gostd/image/image.go.html#5161620">Pix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164169"><a href="/gostd/image/png/reader.go.html#6163429">dstPix</a></span><span class="op" id="6164175">,</span>&nbsp;<span class="ident" id="6164177"><a href="/gostd/image/png/reader.go.html#6163453">stride</a></span><span class="op" id="6164183">,</span>&nbsp;<span class="ident" id="6164185"><a href="/gostd/image/png/reader.go.html#6163473">rect</a></span>&nbsp;<span class="op" id="6164190">=</span>&nbsp;<span class="ident" id="6164192"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164198">.</span><span class="ident" id="6164199"><a href="/gostd/image/image.go.html#5161620">Pix</a></span><span class="op" id="6164202">,</span>&nbsp;<span class="ident" id="6164204"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164210">.</span><span class="ident" id="6164211"><a href="/gostd/image/image.go.html#5161709">Stride</a></span><span class="op" id="6164217">,</span>&nbsp;<span class="ident" id="6164219"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164225">.</span><span class="ident" id="6164226"><a href="/gostd/image/image.go.html#5161753">Rect</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164233"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span>&nbsp;<span class="op" id="6164247">=</span>&nbsp;<span class="num" id="6164249">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164252">case</span>&nbsp;<span class="op" id="6164257">*</span><span class="ident" id="6164258"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6164263">.</span><span class="ident" id="6164264"><a href="/gostd/image/image.go.html#5164005">NRGBA64</a></span><span class="op" id="6164271">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164275"><a href="/gostd/image/png/reader.go.html#6163405">srcPix</a></span>&nbsp;<span class="op" id="6164282">=</span>&nbsp;<span class="ident" id="6164284"><a href="/gostd/image/png/reader.go.html#6163343">src</a></span><span class="op" id="6164287">.</span><span class="op" id="6164288">(</span><span class="op" id="6164289">*</span><span class="ident" id="6164290"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6164295">.</span><span class="ident" id="6164296"><a href="/gostd/image/image.go.html#5164005">NRGBA64</a></span><span class="op" id="6164303">)</span><span class="op" id="6164304">.</span><span class="ident" id="6164305"><a href="/gostd/image/image.go.html#5164181">Pix</a></span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164311"><a href="/gostd/image/png/reader.go.html#6163429">dstPix</a></span><span class="op" id="6164317">,</span>&nbsp;<span class="ident" id="6164319"><a href="/gostd/image/png/reader.go.html#6163453">stride</a></span><span class="op" id="6164325">,</span>&nbsp;<span class="ident" id="6164327"><a href="/gostd/image/png/reader.go.html#6163473">rect</a></span>&nbsp;<span class="op" id="6164332">=</span>&nbsp;<span class="ident" id="6164334"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164340">.</span><span class="ident" id="6164341"><a href="/gostd/image/image.go.html#5164181">Pix</a></span><span class="op" id="6164344">,</span>&nbsp;<span class="ident" id="6164346"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164352">.</span><span class="ident" id="6164353"><a href="/gostd/image/image.go.html#5164270">Stride</a></span><span class="op" id="6164359">,</span>&nbsp;<span class="ident" id="6164361"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164367">.</span><span class="ident" id="6164368"><a href="/gostd/image/image.go.html#5164314">Rect</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164375"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span>&nbsp;<span class="op" id="6164389">=</span>&nbsp;<span class="num" id="6164391">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164394">case</span>&nbsp;<span class="op" id="6164399">*</span><span class="ident" id="6164400"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6164405">.</span><span class="ident" id="6164406"><a href="/gostd/image/image.go.html#5176435">Paletted</a></span><span class="op" id="6164414">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164418"><a href="/gostd/image/png/reader.go.html#6163405">srcPix</a></span>&nbsp;<span class="op" id="6164425">=</span>&nbsp;<span class="ident" id="6164427"><a href="/gostd/image/png/reader.go.html#6163343">src</a></span><span class="op" id="6164430">.</span><span class="op" id="6164431">(</span><span class="op" id="6164432">*</span><span class="ident" id="6164433"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6164438">.</span><span class="ident" id="6164439"><a href="/gostd/image/image.go.html#5176435">Paletted</a></span><span class="op" id="6164447">)</span><span class="op" id="6164448">.</span><span class="ident" id="6164449"><a href="/gostd/image/image.go.html#5176589">Pix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164455"><a href="/gostd/image/png/reader.go.html#6163429">dstPix</a></span><span class="op" id="6164461">,</span>&nbsp;<span class="ident" id="6164463"><a href="/gostd/image/png/reader.go.html#6163453">stride</a></span><span class="op" id="6164469">,</span>&nbsp;<span class="ident" id="6164471"><a href="/gostd/image/png/reader.go.html#6163473">rect</a></span>&nbsp;<span class="op" id="6164476">=</span>&nbsp;<span class="ident" id="6164478"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164484">.</span><span class="ident" id="6164485"><a href="/gostd/image/image.go.html#5176589">Pix</a></span><span class="op" id="6164488">,</span>&nbsp;<span class="ident" id="6164490"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164496">.</span><span class="ident" id="6164497"><a href="/gostd/image/image.go.html#5176678">Stride</a></span><span class="op" id="6164503">,</span>&nbsp;<span class="ident" id="6164505"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164511">.</span><span class="ident" id="6164512"><a href="/gostd/image/image.go.html#5176722">Rect</a></span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164519"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span>&nbsp;<span class="op" id="6164533">=</span>&nbsp;<span class="num" id="6164535">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164538">case</span>&nbsp;<span class="op" id="6164543">*</span><span class="ident" id="6164544"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6164549">.</span><span class="ident" id="6164550"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="6164554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164558"><a href="/gostd/image/png/reader.go.html#6163405">srcPix</a></span>&nbsp;<span class="op" id="6164565">=</span>&nbsp;<span class="ident" id="6164567"><a href="/gostd/image/png/reader.go.html#6163343">src</a></span><span class="op" id="6164570">.</span><span class="op" id="6164571">(</span><span class="op" id="6164572">*</span><span class="ident" id="6164573"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6164578">.</span><span class="ident" id="6164579"><a href="/gostd/image/image.go.html#5155914">RGBA</a></span><span class="op" id="6164583">)</span><span class="op" id="6164584">.</span><span class="ident" id="6164585"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164591"><a href="/gostd/image/png/reader.go.html#6163429">dstPix</a></span><span class="op" id="6164597">,</span>&nbsp;<span class="ident" id="6164599"><a href="/gostd/image/png/reader.go.html#6163453">stride</a></span><span class="op" id="6164605">,</span>&nbsp;<span class="ident" id="6164607"><a href="/gostd/image/png/reader.go.html#6163473">rect</a></span>&nbsp;<span class="op" id="6164612">=</span>&nbsp;<span class="ident" id="6164614"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164620">.</span><span class="ident" id="6164621"><a href="/gostd/image/image.go.html#5156065">Pix</a></span><span class="op" id="6164624">,</span>&nbsp;<span class="ident" id="6164626"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164632">.</span><span class="ident" id="6164633"><a href="/gostd/image/image.go.html#5156154">Stride</a></span><span class="op" id="6164639">,</span>&nbsp;<span class="ident" id="6164641"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164647">.</span><span class="ident" id="6164648"><a href="/gostd/image/image.go.html#5156198">Rect</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164655"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span>&nbsp;<span class="op" id="6164669">=</span>&nbsp;<span class="num" id="6164671">4</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164674">case</span>&nbsp;<span class="op" id="6164679">*</span><span class="ident" id="6164680"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6164685">.</span><span class="ident" id="6164686"><a href="/gostd/image/image.go.html#5158422">RGBA64</a></span><span class="op" id="6164692">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164696"><a href="/gostd/image/png/reader.go.html#6163405">srcPix</a></span>&nbsp;<span class="op" id="6164703">=</span>&nbsp;<span class="ident" id="6164705"><a href="/gostd/image/png/reader.go.html#6163343">src</a></span><span class="op" id="6164708">.</span><span class="op" id="6164709">(</span><span class="op" id="6164710">*</span><span class="ident" id="6164711"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6164716">.</span><span class="ident" id="6164717"><a href="/gostd/image/image.go.html#5158422">RGBA64</a></span><span class="op" id="6164723">)</span><span class="op" id="6164724">.</span><span class="ident" id="6164725"><a href="/gostd/image/image.go.html#5158597">Pix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164731"><a href="/gostd/image/png/reader.go.html#6163429">dstPix</a></span><span class="op" id="6164737">,</span>&nbsp;<span class="ident" id="6164739"><a href="/gostd/image/png/reader.go.html#6163453">stride</a></span><span class="op" id="6164745">,</span>&nbsp;<span class="ident" id="6164747"><a href="/gostd/image/png/reader.go.html#6163473">rect</a></span>&nbsp;<span class="op" id="6164752">=</span>&nbsp;<span class="ident" id="6164754"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164760">.</span><span class="ident" id="6164761"><a href="/gostd/image/image.go.html#5158597">Pix</a></span><span class="op" id="6164764">,</span>&nbsp;<span class="ident" id="6164766"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164772">.</span><span class="ident" id="6164773"><a href="/gostd/image/image.go.html#5158686">Stride</a></span><span class="op" id="6164779">,</span>&nbsp;<span class="ident" id="6164781"><a href="/gostd/image/png/reader.go.html#6163534">target</a></span><span class="op" id="6164787">.</span><span class="ident" id="6164788"><a href="/gostd/image/image.go.html#5158730">Rect</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164795"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span>&nbsp;<span class="op" id="6164809">=</span>&nbsp;<span class="num" id="6164811">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6164814">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164817">s</span><span class="op" id="6164818">,</span>&nbsp;<span class="ident" id="6164820">bounds</span>&nbsp;<span class="op" id="6164827">:=</span>&nbsp;<span class="num" id="6164830">0</span><span class="op" id="6164831">,</span>&nbsp;<span class="ident" id="6164833"><a href="/gostd/image/png/reader.go.html#6163343">src</a></span><span class="op" id="6164836">.</span><span class="ident" id="6164837"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="6164843">(</span><span class="op" id="6164844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164847">for</span>&nbsp;<span class="ident" id="6164851">y</span>&nbsp;<span class="op" id="6164853">:=</span>&nbsp;<span class="ident" id="6164856"><a href="/gostd/image/png/reader.go.html#6164820">bounds</a></span><span class="op" id="6164862">.</span><span class="ident" id="6164863"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="6164866">.</span><span class="ident" id="6164867"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="6164868">;</span>&nbsp;<span class="ident" id="6164870"><a href="/gostd/image/png/reader.go.html#6164851">y</a></span>&nbsp;<span class="op" id="6164872">&lt;</span>&nbsp;<span class="ident" id="6164874"><a href="/gostd/image/png/reader.go.html#6164820">bounds</a></span><span class="op" id="6164880">.</span><span class="ident" id="6164881"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="6164884">.</span><span class="ident" id="6164885"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="6164886">;</span>&nbsp;<span class="ident" id="6164888"><a href="/gostd/image/png/reader.go.html#6164851">y</a></span><span class="op" id="6164889">++</span>&nbsp;<span class="op" id="6164892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164896">dBase</span>&nbsp;<span class="op" id="6164902">:=</span>&nbsp;<span class="op" id="6164905">(</span><span class="ident" id="6164906"><a href="/gostd/image/png/reader.go.html#6164851">y</a></span><span class="op" id="6164907">*</span><span class="ident" id="6164908"><a href="/gostd/image/png/reader.go.html#6163373">p</a></span><span class="op" id="6164909">.</span><span class="ident" id="6164910"><a href="/gostd/image/png/reader.go.html#6149424">yFactor</a></span><span class="op" id="6164917">+</span><span class="ident" id="6164918"><a href="/gostd/image/png/reader.go.html#6163373">p</a></span><span class="op" id="6164919">.</span><span class="ident" id="6164920"><a href="/gostd/image/png/reader.go.html#6149442">yOffset</a></span><span class="op" id="6164927">-</span><span class="ident" id="6164928"><a href="/gostd/image/png/reader.go.html#6163473">rect</a></span><span class="op" id="6164932">.</span><span class="ident" id="6164933"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="6164936">.</span><span class="ident" id="6164937"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="6164938">)</span><span class="op" id="6164939">*</span><span class="ident" id="6164940"><a href="/gostd/image/png/reader.go.html#6163453">stride</a></span>&nbsp;<span class="op" id="6164947">+</span>&nbsp;<span class="op" id="6164949">(</span><span class="ident" id="6164950"><a href="/gostd/image/png/reader.go.html#6163373">p</a></span><span class="op" id="6164951">.</span><span class="ident" id="6164952"><a href="/gostd/image/png/reader.go.html#6149433">xOffset</a></span><span class="op" id="6164959">-</span><span class="ident" id="6164960"><a href="/gostd/image/png/reader.go.html#6163473">rect</a></span><span class="op" id="6164964">.</span><span class="ident" id="6164965"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="6164968">.</span><span class="ident" id="6164969"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="6164970">)</span><span class="op" id="6164971">*</span><span class="ident" id="6164972"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164988">for</span>&nbsp;<span class="ident" id="6164992">x</span>&nbsp;<span class="op" id="6164994">:=</span>&nbsp;<span class="ident" id="6164997"><a href="/gostd/image/png/reader.go.html#6164820">bounds</a></span><span class="op" id="6165003">.</span><span class="ident" id="6165004"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="6165007">.</span><span class="ident" id="6165008"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="6165009">;</span>&nbsp;<span class="ident" id="6165011"><a href="/gostd/image/png/reader.go.html#6164992">x</a></span>&nbsp;<span class="op" id="6165013">&lt;</span>&nbsp;<span class="ident" id="6165015"><a href="/gostd/image/png/reader.go.html#6164820">bounds</a></span><span class="op" id="6165021">.</span><span class="ident" id="6165022"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="6165025">.</span><span class="ident" id="6165026"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="6165027">;</span>&nbsp;<span class="ident" id="6165029"><a href="/gostd/image/png/reader.go.html#6164992">x</a></span><span class="op" id="6165030">++</span>&nbsp;<span class="op" id="6165033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165038">d</span>&nbsp;<span class="op" id="6165040">:=</span>&nbsp;<span class="ident" id="6165043"><a href="/gostd/image/png/reader.go.html#6164896">dBase</a></span>&nbsp;<span class="op" id="6165049">+</span>&nbsp;<span class="ident" id="6165051"><a href="/gostd/image/png/reader.go.html#6164992">x</a></span><span class="op" id="6165052">*</span><span class="ident" id="6165053"><a href="/gostd/image/png/reader.go.html#6163373">p</a></span><span class="op" id="6165054">.</span><span class="ident" id="6165055"><a href="/gostd/image/png/reader.go.html#6149415">xFactor</a></span><span class="op" id="6165062">*</span><span class="ident" id="6165063"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6165080">copy</span><span class="op" id="6165084">(</span><span class="ident" id="6165085"><a href="/gostd/image/png/reader.go.html#6163429">dstPix</a></span><span class="op" id="6165091">[</span><span class="ident" id="6165092"><a href="/gostd/image/png/reader.go.html#6165038">d</a></span><span class="op" id="6165093">:</span><span class="op" id="6165094">]</span><span class="op" id="6165095">,</span>&nbsp;<span class="ident" id="6165097"><a href="/gostd/image/png/reader.go.html#6163405">srcPix</a></span><span class="op" id="6165103">[</span><span class="ident" id="6165104"><a href="/gostd/image/png/reader.go.html#6164817">s</a></span><span class="op" id="6165105">:</span><span class="ident" id="6165106"><a href="/gostd/image/png/reader.go.html#6164817">s</a></span><span class="op" id="6165107">+</span><span class="ident" id="6165108"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span><span class="op" id="6165121">]</span><span class="op" id="6165122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165127"><a href="/gostd/image/png/reader.go.html#6164817">s</a></span>&nbsp;<span class="op" id="6165129">+=</span>&nbsp;<span class="ident" id="6165132"><a href="/gostd/image/png/reader.go.html#6163505">bytesPerPixel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165151">}</span><br>
<span class="lineno"></span><span class="op" id="6165153">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="keyword" id="6165156">func</span>&nbsp;<span class="op" id="6165161">(</span><span class="ident" id="6165162">d</span>&nbsp;<span class="op" id="6165164">*</span><span class="ident" id="6165165"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6165172">)</span>&nbsp;<span class="ident" id="6165174">parseIDAT</span><span class="op" id="6165183">(</span><span class="ident" id="6165184">length</span>&nbsp;<span class="builtintype" id="6165191">uint32</span><span class="op" id="6165197">)</span>&nbsp;<span class="op" id="6165199">(</span><span class="ident" id="6165200">err</span>&nbsp;<span class="builtintype" id="6165204">error</span><span class="op" id="6165209">)</span>&nbsp;<span class="op" id="6165211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165214"><a href="/gostd/image/png/reader.go.html#6165162">d</a></span><span class="op" id="6165215">.</span><span class="ident" id="6165216"><a href="/gostd/image/png/reader.go.html#6150350">idatLength</a></span>&nbsp;<span class="op" id="6165227">=</span>&nbsp;<span class="ident" id="6165229"><a href="/gostd/image/png/reader.go.html#6165184">length</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165237"><a href="/gostd/image/png/reader.go.html#6165162">d</a></span><span class="op" id="6165238">.</span><span class="ident" id="6165239"><a href="/gostd/image/png/reader.go.html#6150191">img</a></span><span class="op" id="6165242">,</span>&nbsp;<span class="ident" id="6165244"><a href="/gostd/image/png/reader.go.html#6165200">err</a></span>&nbsp;<span class="op" id="6165248">=</span>&nbsp;<span class="ident" id="6165250"><a href="/gostd/image/png/reader.go.html#6165162">d</a></span><span class="op" id="6165251">.</span><span class="ident" id="6165252"><a href="/gostd/image/png/reader.go.html#6156028">decode</a></span><span class="op" id="6165258">(</span><span class="op" id="6165259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165262">if</span>&nbsp;<span class="ident" id="6165265"><a href="/gostd/image/png/reader.go.html#6165200">err</a></span>&nbsp;<span class="op" id="6165269">!=</span>&nbsp;<span class="builtintype" id="6165272">nil</span>&nbsp;<span class="op" id="6165276">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165280">return</span>&nbsp;<span class="ident" id="6165287"><a href="/gostd/image/png/reader.go.html#6165200">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165295">return</span>&nbsp;<span class="ident" id="6165302"><a href="/gostd/image/png/reader.go.html#6165162">d</a></span><span class="op" id="6165303">.</span><span class="ident" id="6165304"><a href="/gostd/image/png/reader.go.html#6166713">verifyChecksum</a></span><span class="op" id="6165318">(</span><span class="op" id="6165319">)</span><br>
<span class="lineno"></span><span class="op" id="6165321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">655</span><span class="keyword" id="6165324">func</span>&nbsp;<span class="op" id="6165329">(</span><span class="ident" id="6165330">d</span>&nbsp;<span class="op" id="6165332">*</span><span class="ident" id="6165333"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6165340">)</span>&nbsp;<span class="ident" id="6165342">parseIEND</span><span class="op" id="6165351">(</span><span class="ident" id="6165352">length</span>&nbsp;<span class="builtintype" id="6165359">uint32</span><span class="op" id="6165365">)</span>&nbsp;<span class="builtintype" id="6165367">error</span>&nbsp;<span class="op" id="6165373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165376">if</span>&nbsp;<span class="ident" id="6165379"><a href="/gostd/image/png/reader.go.html#6165352">length</a></span>&nbsp;<span class="op" id="6165386">!=</span>&nbsp;<span class="num" id="6165389">0</span>&nbsp;<span class="op" id="6165391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165395">return</span>&nbsp;<span class="ident" id="6165402"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6165413">(</span><span class="string" id="6165414">&#34;bad&nbsp;IEND&nbsp;length&#34;</span><span class="op" id="6165431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165437">return</span>&nbsp;<span class="ident" id="6165444"><a href="/gostd/image/png/reader.go.html#6165330">d</a></span><span class="op" id="6165445">.</span><span class="ident" id="6165446"><a href="/gostd/image/png/reader.go.html#6166713">verifyChecksum</a></span><span class="op" id="6165460">(</span><span class="op" id="6165461">)</span><br>
<span class="lineno">660</span><span class="op" id="6165463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6165466">func</span>&nbsp;<span class="op" id="6165471">(</span><span class="ident" id="6165472">d</span>&nbsp;<span class="op" id="6165474">*</span><span class="ident" id="6165475"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6165482">)</span>&nbsp;<span class="ident" id="6165484">parseChunk</span><span class="op" id="6165494">(</span><span class="op" id="6165495">)</span>&nbsp;<span class="builtintype" id="6165497">error</span>&nbsp;<span class="op" id="6165503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6165506">//&nbsp;Read&nbsp;the&nbsp;length&nbsp;and&nbsp;chunk&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165542">n</span><span class="op" id="6165543">,</span>&nbsp;<span class="ident" id="6165545">err</span>&nbsp;<span class="op" id="6165549">:=</span>&nbsp;<span class="ident" id="6165552"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6165554">.</span><span class="ident" id="6165555"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="6165563">(</span><span class="ident" id="6165564"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165565">.</span><span class="ident" id="6165566"><a href="/gostd/image/png/reader.go.html#6150166">r</a></span><span class="op" id="6165567">,</span>&nbsp;<span class="ident" id="6165569"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165570">.</span><span class="ident" id="6165571"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6165574">[</span><span class="op" id="6165575">:</span><span class="num" id="6165576">8</span><span class="op" id="6165577">]</span><span class="op" id="6165578">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165581">if</span>&nbsp;<span class="ident" id="6165584"><a href="/gostd/image/png/reader.go.html#6165545">err</a></span>&nbsp;<span class="op" id="6165588">!=</span>&nbsp;<span class="builtintype" id="6165591">nil</span>&nbsp;<span class="op" id="6165595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165599">return</span>&nbsp;<span class="ident" id="6165606"><a href="/gostd/image/png/reader.go.html#6165545">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165614">length</span>&nbsp;<span class="op" id="6165621">:=</span>&nbsp;<span class="ident" id="6165624"><a href="/gostd/image/png/reader.go.html#6148689">binary</a></span><span class="op" id="6165630">.</span><span class="ident" id="6165631"><a href="/gostd/encoding/binary/binary.go.html#2987146">BigEndian</a></span><span class="op" id="6165640">.</span><span class="ident" id="6165641"><a href="/gostd/encoding/binary/binary.go.html#2988414">Uint32</a></span><span class="op" id="6165647">(</span><span class="ident" id="6165648"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165649">.</span><span class="ident" id="6165650"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6165653">[</span><span class="op" id="6165654">:</span><span class="num" id="6165655">4</span><span class="op" id="6165656">]</span><span class="op" id="6165657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165660"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165661">.</span><span class="ident" id="6165662"><a href="/gostd/image/png/reader.go.html#6150218">crc</a></span><span class="op" id="6165665">.</span><span class="ident" id="6165666"><a href="/gostd/hash/hash.go.html#3014443">Reset</a></span><span class="op" id="6165671">(</span><span class="op" id="6165672">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165675"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165676">.</span><span class="ident" id="6165677"><a href="/gostd/image/png/reader.go.html#6150218">crc</a></span><span class="op" id="6165680">.</span><span class="ident" id="6165681"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="6165686">(</span><span class="ident" id="6165687"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165688">.</span><span class="ident" id="6165689"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6165692">[</span><span class="num" id="6165693">4</span><span class="op" id="6165694">:</span><span class="num" id="6165695">8</span><span class="op" id="6165696">]</span><span class="op" id="6165697">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6165701">//&nbsp;Read&nbsp;the&nbsp;chunk&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165726">switch</span>&nbsp;<span class="builtintype" id="6165733">string</span><span class="op" id="6165739">(</span><span class="ident" id="6165740"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165741">.</span><span class="ident" id="6165742"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6165745">[</span><span class="num" id="6165746">4</span><span class="op" id="6165747">:</span><span class="num" id="6165748">8</span><span class="op" id="6165749">]</span><span class="op" id="6165750">)</span>&nbsp;<span class="op" id="6165752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165755">case</span>&nbsp;<span class="string" id="6165760">&#34;IHDR&#34;</span><span class="op" id="6165766">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165770">if</span>&nbsp;<span class="ident" id="6165773"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165774">.</span><span class="ident" id="6165775"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6165781">!=</span>&nbsp;<span class="ident" id="6165784"><a href="/gostd/image/png/reader.go.html#6150038">dsStart</a></span>&nbsp;<span class="op" id="6165792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165797">return</span>&nbsp;<span class="ident" id="6165804"><a href="/gostd/image/png/reader.go.html#6150595">chunkOrderError</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165826"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165827">.</span><span class="ident" id="6165828"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6165834">=</span>&nbsp;<span class="ident" id="6165836"><a href="/gostd/image/png/reader.go.html#6150054">dsSeenIHDR</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165849">return</span>&nbsp;<span class="ident" id="6165856"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165857">.</span><span class="ident" id="6165858"><a href="/gostd/image/png/reader.go.html#6150944">parseIHDR</a></span><span class="op" id="6165867">(</span><span class="ident" id="6165868"><a href="/gostd/image/png/reader.go.html#6165614">length</a></span><span class="op" id="6165874">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165877">case</span>&nbsp;<span class="string" id="6165882">&#34;PLTE&#34;</span><span class="op" id="6165888">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165892">if</span>&nbsp;<span class="ident" id="6165895"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165896">.</span><span class="ident" id="6165897"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6165903">!=</span>&nbsp;<span class="ident" id="6165906"><a href="/gostd/image/png/reader.go.html#6150054">dsSeenIHDR</a></span>&nbsp;<span class="op" id="6165917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165922">return</span>&nbsp;<span class="ident" id="6165929"><a href="/gostd/image/png/reader.go.html#6150595">chunkOrderError</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165951"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165952">.</span><span class="ident" id="6165953"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6165959">=</span>&nbsp;<span class="ident" id="6165961"><a href="/gostd/image/png/reader.go.html#6150066">dsSeenPLTE</a></span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165974">return</span>&nbsp;<span class="ident" id="6165981"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6165982">.</span><span class="ident" id="6165983"><a href="/gostd/image/png/reader.go.html#6152677">parsePLTE</a></span><span class="op" id="6165992">(</span><span class="ident" id="6165993"><a href="/gostd/image/png/reader.go.html#6165614">length</a></span><span class="op" id="6165999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166002">case</span>&nbsp;<span class="string" id="6166007">&#34;tRNS&#34;</span><span class="op" id="6166013">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166017">if</span>&nbsp;<span class="ident" id="6166020"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166021">.</span><span class="ident" id="6166022"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6166028">!=</span>&nbsp;<span class="ident" id="6166031"><a href="/gostd/image/png/reader.go.html#6150066">dsSeenPLTE</a></span>&nbsp;<span class="op" id="6166042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166047">return</span>&nbsp;<span class="ident" id="6166054"><a href="/gostd/image/png/reader.go.html#6150595">chunkOrderError</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6166072">}</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166076">return</span>&nbsp;<span class="ident" id="6166083"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166084">.</span><span class="ident" id="6166085"><a href="/gostd/image/png/reader.go.html#6153942">parsetRNS</a></span><span class="op" id="6166094">(</span><span class="ident" id="6166095"><a href="/gostd/image/png/reader.go.html#6165614">length</a></span><span class="op" id="6166101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166104">case</span>&nbsp;<span class="string" id="6166109">&#34;IDAT&#34;</span><span class="op" id="6166115">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166119">if</span>&nbsp;<span class="ident" id="6166122"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166123">.</span><span class="ident" id="6166124"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6166130">&lt;</span>&nbsp;<span class="ident" id="6166132"><a href="/gostd/image/png/reader.go.html#6150054">dsSeenIHDR</a></span>&nbsp;<span class="op" id="6166143">||</span>&nbsp;<span class="ident" id="6166146"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166147">.</span><span class="ident" id="6166148"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6166154">&gt;</span>&nbsp;<span class="ident" id="6166156"><a href="/gostd/image/png/reader.go.html#6150078">dsSeenIDAT</a></span>&nbsp;<span class="op" id="6166167">||</span>&nbsp;<span class="op" id="6166170">(</span><span class="ident" id="6166171"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166172">.</span><span class="ident" id="6166173"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6166176">==</span>&nbsp;<span class="ident" id="6166179"><a href="/gostd/image/png/reader.go.html#6149063">cbP8</a></span>&nbsp;<span class="op" id="6166184">&amp;&amp;</span>&nbsp;<span class="ident" id="6166187"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166188">.</span><span class="ident" id="6166189"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6166195">==</span>&nbsp;<span class="ident" id="6166198"><a href="/gostd/image/png/reader.go.html#6150054">dsSeenIHDR</a></span><span class="op" id="6166208">)</span>&nbsp;<span class="op" id="6166210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166215">return</span>&nbsp;<span class="ident" id="6166222"><a href="/gostd/image/png/reader.go.html#6150595">chunkOrderError</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6166240">}</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166244"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166245">.</span><span class="ident" id="6166246"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6166252">=</span>&nbsp;<span class="ident" id="6166254"><a href="/gostd/image/png/reader.go.html#6150078">dsSeenIDAT</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166267">return</span>&nbsp;<span class="ident" id="6166274"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166275">.</span><span class="ident" id="6166276"><a href="/gostd/image/png/reader.go.html#6165174">parseIDAT</a></span><span class="op" id="6166285">(</span><span class="ident" id="6166286"><a href="/gostd/image/png/reader.go.html#6165614">length</a></span><span class="op" id="6166292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166295">case</span>&nbsp;<span class="string" id="6166300">&#34;IEND&#34;</span><span class="op" id="6166306">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166310">if</span>&nbsp;<span class="ident" id="6166313"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166314">.</span><span class="ident" id="6166315"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6166321">!=</span>&nbsp;<span class="ident" id="6166324"><a href="/gostd/image/png/reader.go.html#6150078">dsSeenIDAT</a></span>&nbsp;<span class="op" id="6166335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166340">return</span>&nbsp;<span class="ident" id="6166347"><a href="/gostd/image/png/reader.go.html#6150595">chunkOrderError</a></span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6166365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166369"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166370">.</span><span class="ident" id="6166371"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6166377">=</span>&nbsp;<span class="ident" id="6166379"><a href="/gostd/image/png/reader.go.html#6150090">dsSeenIEND</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166392">return</span>&nbsp;<span class="ident" id="6166399"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166400">.</span><span class="ident" id="6166401"><a href="/gostd/image/png/reader.go.html#6165342">parseIEND</a></span><span class="op" id="6166410">(</span><span class="ident" id="6166411"><a href="/gostd/image/png/reader.go.html#6165614">length</a></span><span class="op" id="6166417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6166420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6166423">//&nbsp;Ignore&nbsp;this&nbsp;chunk&nbsp;(of&nbsp;a&nbsp;known&nbsp;length).</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166466">var</span>&nbsp;<span class="ident" id="6166470">ignored</span>&nbsp;<span class="op" id="6166478">[</span><span class="num" id="6166479">4096</span><span class="op" id="6166483">]</span><span class="builtintype" id="6166484">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166490">for</span>&nbsp;<span class="ident" id="6166494"><a href="/gostd/image/png/reader.go.html#6165614">length</a></span>&nbsp;<span class="op" id="6166501">&gt;</span>&nbsp;<span class="num" id="6166503">0</span>&nbsp;<span class="op" id="6166505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166509"><a href="/gostd/image/png/reader.go.html#6165542">n</a></span><span class="op" id="6166510">,</span>&nbsp;<span class="ident" id="6166512"><a href="/gostd/image/png/reader.go.html#6165545">err</a></span>&nbsp;<span class="op" id="6166516">=</span>&nbsp;<span class="ident" id="6166518"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6166520">.</span><span class="ident" id="6166521"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="6166529">(</span><span class="ident" id="6166530"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166531">.</span><span class="ident" id="6166532"><a href="/gostd/image/png/reader.go.html#6150166">r</a></span><span class="op" id="6166533">,</span>&nbsp;<span class="ident" id="6166535"><a href="/gostd/image/png/reader.go.html#6166470">ignored</a></span><span class="op" id="6166542">[</span><span class="op" id="6166543">:</span><span class="ident" id="6166544"><a href="/gostd/image/png/reader.go.html#6150867">min</a></span><span class="op" id="6166547">(</span><span class="builtinfunc" id="6166548">len</span><span class="op" id="6166551">(</span><span class="ident" id="6166552"><a href="/gostd/image/png/reader.go.html#6166470">ignored</a></span><span class="op" id="6166559">)</span><span class="op" id="6166560">,</span>&nbsp;<span class="builtintype" id="6166562">int</span><span class="op" id="6166565">(</span><span class="ident" id="6166566"><a href="/gostd/image/png/reader.go.html#6165614">length</a></span><span class="op" id="6166572">)</span><span class="op" id="6166573">)</span><span class="op" id="6166574">]</span><span class="op" id="6166575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166579">if</span>&nbsp;<span class="ident" id="6166582"><a href="/gostd/image/png/reader.go.html#6165545">err</a></span>&nbsp;<span class="op" id="6166586">!=</span>&nbsp;<span class="builtintype" id="6166589">nil</span>&nbsp;<span class="op" id="6166593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166598">return</span>&nbsp;<span class="ident" id="6166605"><a href="/gostd/image/png/reader.go.html#6165545">err</a></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6166611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166615"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166616">.</span><span class="ident" id="6166617"><a href="/gostd/image/png/reader.go.html#6150218">crc</a></span><span class="op" id="6166620">.</span><span class="ident" id="6166621"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="6166626">(</span><span class="ident" id="6166627"><a href="/gostd/image/png/reader.go.html#6166470">ignored</a></span><span class="op" id="6166634">[</span><span class="op" id="6166635">:</span><span class="ident" id="6166636"><a href="/gostd/image/png/reader.go.html#6165542">n</a></span><span class="op" id="6166637">]</span><span class="op" id="6166638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166642"><a href="/gostd/image/png/reader.go.html#6165614">length</a></span>&nbsp;<span class="op" id="6166649">-=</span>&nbsp;<span class="builtintype" id="6166652">uint32</span><span class="op" id="6166658">(</span><span class="ident" id="6166659"><a href="/gostd/image/png/reader.go.html#6165542">n</a></span><span class="op" id="6166660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6166663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166666">return</span>&nbsp;<span class="ident" id="6166673"><a href="/gostd/image/png/reader.go.html#6165472">d</a></span><span class="op" id="6166674">.</span><span class="ident" id="6166675"><a href="/gostd/image/png/reader.go.html#6166713">verifyChecksum</a></span><span class="op" id="6166689">(</span><span class="op" id="6166690">)</span><br>
<span class="lineno">715</span><span class="op" id="6166692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6166695">func</span>&nbsp;<span class="op" id="6166700">(</span><span class="ident" id="6166701">d</span>&nbsp;<span class="op" id="6166703">*</span><span class="ident" id="6166704"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6166711">)</span>&nbsp;<span class="ident" id="6166713">verifyChecksum</span><span class="op" id="6166727">(</span><span class="op" id="6166728">)</span>&nbsp;<span class="builtintype" id="6166730">error</span>&nbsp;<span class="op" id="6166736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166739">if</span>&nbsp;<span class="ident" id="6166742">_</span><span class="op" id="6166743">,</span>&nbsp;<span class="ident" id="6166745">err</span>&nbsp;<span class="op" id="6166749">:=</span>&nbsp;<span class="ident" id="6166752"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6166754">.</span><span class="ident" id="6166755"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="6166763">(</span><span class="ident" id="6166764"><a href="/gostd/image/png/reader.go.html#6166701">d</a></span><span class="op" id="6166765">.</span><span class="ident" id="6166766"><a href="/gostd/image/png/reader.go.html#6150166">r</a></span><span class="op" id="6166767">,</span>&nbsp;<span class="ident" id="6166769"><a href="/gostd/image/png/reader.go.html#6166701">d</a></span><span class="op" id="6166770">.</span><span class="ident" id="6166771"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6166774">[</span><span class="op" id="6166775">:</span><span class="num" id="6166776">4</span><span class="op" id="6166777">]</span><span class="op" id="6166778">)</span><span class="op" id="6166779">;</span>&nbsp;<span class="ident" id="6166781"><a href="/gostd/image/png/reader.go.html#6166745">err</a></span>&nbsp;<span class="op" id="6166785">!=</span>&nbsp;<span class="builtintype" id="6166788">nil</span>&nbsp;<span class="op" id="6166792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166796">return</span>&nbsp;<span class="ident" id="6166803"><a href="/gostd/image/png/reader.go.html#6166745">err</a></span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6166808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166811">if</span>&nbsp;<span class="ident" id="6166814"><a href="/gostd/image/png/reader.go.html#6148689">binary</a></span><span class="op" id="6166820">.</span><span class="ident" id="6166821"><a href="/gostd/encoding/binary/binary.go.html#2987146">BigEndian</a></span><span class="op" id="6166830">.</span><span class="ident" id="6166831"><a href="/gostd/encoding/binary/binary.go.html#2988414">Uint32</a></span><span class="op" id="6166837">(</span><span class="ident" id="6166838"><a href="/gostd/image/png/reader.go.html#6166701">d</a></span><span class="op" id="6166839">.</span><span class="ident" id="6166840"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6166843">[</span><span class="op" id="6166844">:</span><span class="num" id="6166845">4</span><span class="op" id="6166846">]</span><span class="op" id="6166847">)</span>&nbsp;<span class="op" id="6166849">!=</span>&nbsp;<span class="ident" id="6166852"><a href="/gostd/image/png/reader.go.html#6166701">d</a></span><span class="op" id="6166853">.</span><span class="ident" id="6166854"><a href="/gostd/image/png/reader.go.html#6150218">crc</a></span><span class="op" id="6166857">.</span><span class="ident" id="6166858"><a href="/gostd/hash/hash.go.html#3014858">Sum32</a></span><span class="op" id="6166863">(</span><span class="op" id="6166864">)</span>&nbsp;<span class="op" id="6166866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166870">return</span>&nbsp;<span class="ident" id="6166877"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6166888">(</span><span class="string" id="6166889">&#34;invalid&nbsp;checksum&#34;</span><span class="op" id="6166907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6166910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166913">return</span>&nbsp;<span class="builtintype" id="6166920">nil</span><br>
<span class="lineno">725</span><span class="op" id="6166924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6166927">func</span>&nbsp;<span class="op" id="6166932">(</span><span class="ident" id="6166933">d</span>&nbsp;<span class="op" id="6166935">*</span><span class="ident" id="6166936"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6166943">)</span>&nbsp;<span class="ident" id="6166945">checkHeader</span><span class="op" id="6166956">(</span><span class="op" id="6166957">)</span>&nbsp;<span class="builtintype" id="6166959">error</span>&nbsp;<span class="op" id="6166965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166968">_</span><span class="op" id="6166969">,</span>&nbsp;<span class="ident" id="6166971">err</span>&nbsp;<span class="op" id="6166975">:=</span>&nbsp;<span class="ident" id="6166978"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6166980">.</span><span class="ident" id="6166981"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="6166989">(</span><span class="ident" id="6166990"><a href="/gostd/image/png/reader.go.html#6166933">d</a></span><span class="op" id="6166991">.</span><span class="ident" id="6166992"><a href="/gostd/image/png/reader.go.html#6150166">r</a></span><span class="op" id="6166993">,</span>&nbsp;<span class="ident" id="6166995"><a href="/gostd/image/png/reader.go.html#6166933">d</a></span><span class="op" id="6166996">.</span><span class="ident" id="6166997"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6167000">[</span><span class="op" id="6167001">:</span><span class="builtinfunc" id="6167002">len</span><span class="op" id="6167005">(</span><span class="ident" id="6167006"><a href="/gostd/image/png/reader.go.html#6150110">pngHeader</a></span><span class="op" id="6167015">)</span><span class="op" id="6167016">]</span><span class="op" id="6167017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167020">if</span>&nbsp;<span class="ident" id="6167023"><a href="/gostd/image/png/reader.go.html#6166971">err</a></span>&nbsp;<span class="op" id="6167027">!=</span>&nbsp;<span class="builtintype" id="6167030">nil</span>&nbsp;<span class="op" id="6167034">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167038">return</span>&nbsp;<span class="ident" id="6167045"><a href="/gostd/image/png/reader.go.html#6166971">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167053">if</span>&nbsp;<span class="builtintype" id="6167056">string</span><span class="op" id="6167062">(</span><span class="ident" id="6167063"><a href="/gostd/image/png/reader.go.html#6166933">d</a></span><span class="op" id="6167064">.</span><span class="ident" id="6167065"><a href="/gostd/image/png/reader.go.html#6150372">tmp</a></span><span class="op" id="6167068">[</span><span class="op" id="6167069">:</span><span class="builtinfunc" id="6167070">len</span><span class="op" id="6167073">(</span><span class="ident" id="6167074"><a href="/gostd/image/png/reader.go.html#6150110">pngHeader</a></span><span class="op" id="6167083">)</span><span class="op" id="6167084">]</span><span class="op" id="6167085">)</span>&nbsp;<span class="op" id="6167087">!=</span>&nbsp;<span class="ident" id="6167090"><a href="/gostd/image/png/reader.go.html#6150110">pngHeader</a></span>&nbsp;<span class="op" id="6167100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167104">return</span>&nbsp;<span class="ident" id="6167111"><a href="/gostd/image/png/reader.go.html#6150487">FormatError</a></span><span class="op" id="6167122">(</span><span class="string" id="6167123">&#34;not&nbsp;a&nbsp;PNG&nbsp;file&#34;</span><span class="op" id="6167139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167142">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167145">return</span>&nbsp;<span class="builtintype" id="6167152">nil</span><br>
<span class="lineno"></span><span class="op" id="6167156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6167159">//&nbsp;Decode&nbsp;reads&nbsp;a&nbsp;PNG&nbsp;image&nbsp;from&nbsp;r&nbsp;and&nbsp;returns&nbsp;it&nbsp;as&nbsp;an&nbsp;image.Image.</span><br>
<span class="lineno"></span><span class="comment" id="6167228">//&nbsp;The&nbsp;type&nbsp;of&nbsp;Image&nbsp;returned&nbsp;depends&nbsp;on&nbsp;the&nbsp;PNG&nbsp;contents.</span><br>
<span class="lineno">740</span><span class="keyword" id="6167287">func</span>&nbsp;<span class="ident" id="6167292">Decode</span><span class="op" id="6167298">(</span><span class="ident" id="6167299">r</span>&nbsp;<span class="ident" id="6167301"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6167303">.</span><span class="ident" id="6167304"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="6167310">)</span>&nbsp;<span class="op" id="6167312">(</span><span class="ident" id="6167313"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6167318">.</span><span class="ident" id="6167319"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="6167324">,</span>&nbsp;<span class="builtintype" id="6167326">error</span><span class="op" id="6167331">)</span>&nbsp;<span class="op" id="6167333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167336">d</span>&nbsp;<span class="op" id="6167338">:=</span>&nbsp;<span class="op" id="6167341">&amp;</span><span class="ident" id="6167342"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6167349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167353"><a href="/gostd/image/png/reader.go.html#6150166">r</a></span><span class="op" id="6167354">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6167358"><a href="/gostd/image/png/reader.go.html#6167299">r</a></span><span class="op" id="6167359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167363"><a href="/gostd/image/png/reader.go.html#6150218">crc</a></span><span class="op" id="6167366">:</span>&nbsp;<span class="ident" id="6167368"><a href="/gostd/image/png/reader.go.html#6148723">crc32</a></span><span class="op" id="6167373">.</span><span class="ident" id="6167374"><a href="/gostd/hash/crc32/crc32.go.html#4859679">NewIEEE</a></span><span class="op" id="6167381">(</span><span class="op" id="6167382">)</span><span class="op" id="6167383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167386">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167389">if</span>&nbsp;<span class="ident" id="6167392">err</span>&nbsp;<span class="op" id="6167396">:=</span>&nbsp;<span class="ident" id="6167399"><a href="/gostd/image/png/reader.go.html#6167336">d</a></span><span class="op" id="6167400">.</span><span class="ident" id="6167401"><a href="/gostd/image/png/reader.go.html#6166945">checkHeader</a></span><span class="op" id="6167412">(</span><span class="op" id="6167413">)</span><span class="op" id="6167414">;</span>&nbsp;<span class="ident" id="6167416"><a href="/gostd/image/png/reader.go.html#6167392">err</a></span>&nbsp;<span class="op" id="6167420">!=</span>&nbsp;<span class="builtintype" id="6167423">nil</span>&nbsp;<span class="op" id="6167427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167431">if</span>&nbsp;<span class="ident" id="6167434"><a href="/gostd/image/png/reader.go.html#6167392">err</a></span>&nbsp;<span class="op" id="6167438">==</span>&nbsp;<span class="ident" id="6167441"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6167443">.</span><span class="ident" id="6167444"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="6167448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167453"><a href="/gostd/image/png/reader.go.html#6167392">err</a></span>&nbsp;<span class="op" id="6167457">=</span>&nbsp;<span class="ident" id="6167459"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6167461">.</span><span class="ident" id="6167462"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167485">return</span>&nbsp;<span class="builtintype" id="6167492">nil</span><span class="op" id="6167495">,</span>&nbsp;<span class="ident" id="6167497"><a href="/gostd/image/png/reader.go.html#6167392">err</a></span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167505">for</span>&nbsp;<span class="ident" id="6167509"><a href="/gostd/image/png/reader.go.html#6167336">d</a></span><span class="op" id="6167510">.</span><span class="ident" id="6167511"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6167517">!=</span>&nbsp;<span class="ident" id="6167520"><a href="/gostd/image/png/reader.go.html#6150090">dsSeenIEND</a></span>&nbsp;<span class="op" id="6167531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167535">if</span>&nbsp;<span class="ident" id="6167538">err</span>&nbsp;<span class="op" id="6167542">:=</span>&nbsp;<span class="ident" id="6167545"><a href="/gostd/image/png/reader.go.html#6167336">d</a></span><span class="op" id="6167546">.</span><span class="ident" id="6167547"><a href="/gostd/image/png/reader.go.html#6165484">parseChunk</a></span><span class="op" id="6167557">(</span><span class="op" id="6167558">)</span><span class="op" id="6167559">;</span>&nbsp;<span class="ident" id="6167561"><a href="/gostd/image/png/reader.go.html#6167538">err</a></span>&nbsp;<span class="op" id="6167565">!=</span>&nbsp;<span class="builtintype" id="6167568">nil</span>&nbsp;<span class="op" id="6167572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167577">if</span>&nbsp;<span class="ident" id="6167580"><a href="/gostd/image/png/reader.go.html#6167538">err</a></span>&nbsp;<span class="op" id="6167584">==</span>&nbsp;<span class="ident" id="6167587"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6167589">.</span><span class="ident" id="6167590"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="6167594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167600"><a href="/gostd/image/png/reader.go.html#6167538">err</a></span>&nbsp;<span class="op" id="6167604">=</span>&nbsp;<span class="ident" id="6167606"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6167608">.</span><span class="ident" id="6167609"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167634">return</span>&nbsp;<span class="builtintype" id="6167641">nil</span><span class="op" id="6167644">,</span>&nbsp;<span class="ident" id="6167646"><a href="/gostd/image/png/reader.go.html#6167538">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167658">return</span>&nbsp;<span class="ident" id="6167665"><a href="/gostd/image/png/reader.go.html#6167336">d</a></span><span class="op" id="6167666">.</span><span class="ident" id="6167667"><a href="/gostd/image/png/reader.go.html#6150191">img</a></span><span class="op" id="6167670">,</span>&nbsp;<span class="builtintype" id="6167672">nil</span><br>
<span class="lineno">760</span><span class="op" id="6167676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6167679">//&nbsp;DecodeConfig&nbsp;returns&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;a&nbsp;PNG&nbsp;image&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="6167757">//&nbsp;decoding&nbsp;the&nbsp;entire&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="6167787">func</span>&nbsp;<span class="ident" id="6167792">DecodeConfig</span><span class="op" id="6167804">(</span><span class="ident" id="6167805">r</span>&nbsp;<span class="ident" id="6167807"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6167809">.</span><span class="ident" id="6167810"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="6167816">)</span>&nbsp;<span class="op" id="6167818">(</span><span class="ident" id="6167819"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6167824">.</span><span class="ident" id="6167825"><a href="/gostd/image/image.go.html#5154748">Config</a></span><span class="op" id="6167831">,</span>&nbsp;<span class="builtintype" id="6167833">error</span><span class="op" id="6167838">)</span>&nbsp;<span class="op" id="6167840">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167843">d</span>&nbsp;<span class="op" id="6167845">:=</span>&nbsp;<span class="op" id="6167848">&amp;</span><span class="ident" id="6167849"><a href="/gostd/image/png/reader.go.html#6150148">decoder</a></span><span class="op" id="6167856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167860"><a href="/gostd/image/png/reader.go.html#6150166">r</a></span><span class="op" id="6167861">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6167865"><a href="/gostd/image/png/reader.go.html#6167805">r</a></span><span class="op" id="6167866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167870"><a href="/gostd/image/png/reader.go.html#6150218">crc</a></span><span class="op" id="6167873">:</span>&nbsp;<span class="ident" id="6167875"><a href="/gostd/image/png/reader.go.html#6148723">crc32</a></span><span class="op" id="6167880">.</span><span class="ident" id="6167881"><a href="/gostd/hash/crc32/crc32.go.html#4859679">NewIEEE</a></span><span class="op" id="6167888">(</span><span class="op" id="6167889">)</span><span class="op" id="6167890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167896">if</span>&nbsp;<span class="ident" id="6167899">err</span>&nbsp;<span class="op" id="6167903">:=</span>&nbsp;<span class="ident" id="6167906"><a href="/gostd/image/png/reader.go.html#6167843">d</a></span><span class="op" id="6167907">.</span><span class="ident" id="6167908"><a href="/gostd/image/png/reader.go.html#6166945">checkHeader</a></span><span class="op" id="6167919">(</span><span class="op" id="6167920">)</span><span class="op" id="6167921">;</span>&nbsp;<span class="ident" id="6167923"><a href="/gostd/image/png/reader.go.html#6167899">err</a></span>&nbsp;<span class="op" id="6167927">!=</span>&nbsp;<span class="builtintype" id="6167930">nil</span>&nbsp;<span class="op" id="6167934">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167938">if</span>&nbsp;<span class="ident" id="6167941"><a href="/gostd/image/png/reader.go.html#6167899">err</a></span>&nbsp;<span class="op" id="6167945">==</span>&nbsp;<span class="ident" id="6167948"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6167950">.</span><span class="ident" id="6167951"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="6167955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167960"><a href="/gostd/image/png/reader.go.html#6167899">err</a></span>&nbsp;<span class="op" id="6167964">=</span>&nbsp;<span class="ident" id="6167966"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6167968">.</span><span class="ident" id="6167969"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167992">return</span>&nbsp;<span class="ident" id="6167999"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6168004">.</span><span class="ident" id="6168005"><a href="/gostd/image/image.go.html#5154748">Config</a></span><span class="op" id="6168011">{</span><span class="op" id="6168012">}</span><span class="op" id="6168013">,</span>&nbsp;<span class="ident" id="6168015"><a href="/gostd/image/png/reader.go.html#6167899">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168020">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168023">for</span>&nbsp;<span class="op" id="6168027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168031">if</span>&nbsp;<span class="ident" id="6168034">err</span>&nbsp;<span class="op" id="6168038">:=</span>&nbsp;<span class="ident" id="6168041"><a href="/gostd/image/png/reader.go.html#6167843">d</a></span><span class="op" id="6168042">.</span><span class="ident" id="6168043"><a href="/gostd/image/png/reader.go.html#6165484">parseChunk</a></span><span class="op" id="6168053">(</span><span class="op" id="6168054">)</span><span class="op" id="6168055">;</span>&nbsp;<span class="ident" id="6168057"><a href="/gostd/image/png/reader.go.html#6168034">err</a></span>&nbsp;<span class="op" id="6168061">!=</span>&nbsp;<span class="builtintype" id="6168064">nil</span>&nbsp;<span class="op" id="6168068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168073">if</span>&nbsp;<span class="ident" id="6168076"><a href="/gostd/image/png/reader.go.html#6168034">err</a></span>&nbsp;<span class="op" id="6168080">==</span>&nbsp;<span class="ident" id="6168083"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6168085">.</span><span class="ident" id="6168086"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="6168090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168096"><a href="/gostd/image/png/reader.go.html#6168034">err</a></span>&nbsp;<span class="op" id="6168100">=</span>&nbsp;<span class="ident" id="6168102"><a href="/gostd/image/png/reader.go.html#6148761">io</a></span><span class="op" id="6168104">.</span><span class="ident" id="6168105"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168125">}</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168130">return</span>&nbsp;<span class="ident" id="6168137"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6168142">.</span><span class="ident" id="6168143"><a href="/gostd/image/image.go.html#5154748">Config</a></span><span class="op" id="6168149">{</span><span class="op" id="6168150">}</span><span class="op" id="6168151">,</span>&nbsp;<span class="ident" id="6168153"><a href="/gostd/image/png/reader.go.html#6168034">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168163">paletted</span>&nbsp;<span class="op" id="6168172">:=</span>&nbsp;<span class="ident" id="6168175"><a href="/gostd/image/png/reader.go.html#6167843">d</a></span><span class="op" id="6168176">.</span><span class="ident" id="6168177"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6168180">==</span>&nbsp;<span class="ident" id="6168183"><a href="/gostd/image/png/reader.go.html#6149063">cbP8</a></span>&nbsp;<span class="op" id="6168188">||</span>&nbsp;<span class="ident" id="6168191"><a href="/gostd/image/png/reader.go.html#6167843">d</a></span><span class="op" id="6168192">.</span><span class="ident" id="6168193"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6168196">==</span>&nbsp;<span class="ident" id="6168199"><a href="/gostd/image/png/reader.go.html#6149057">cbP4</a></span>&nbsp;<span class="op" id="6168204">||</span>&nbsp;<span class="ident" id="6168207"><a href="/gostd/image/png/reader.go.html#6167843">d</a></span><span class="op" id="6168208">.</span><span class="ident" id="6168209"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6168212">==</span>&nbsp;<span class="ident" id="6168215"><a href="/gostd/image/png/reader.go.html#6149051">cbP2</a></span>&nbsp;<span class="op" id="6168220">||</span>&nbsp;<span class="ident" id="6168223"><a href="/gostd/image/png/reader.go.html#6167843">d</a></span><span class="op" id="6168224">.</span><span class="ident" id="6168225"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6168228">==</span>&nbsp;<span class="ident" id="6168231"><a href="/gostd/image/png/reader.go.html#6149045">cbP1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168238">if</span>&nbsp;<span class="ident" id="6168241"><a href="/gostd/image/png/reader.go.html#6167843">d</a></span><span class="op" id="6168242">.</span><span class="ident" id="6168243"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6168249">==</span>&nbsp;<span class="ident" id="6168252"><a href="/gostd/image/png/reader.go.html#6150054">dsSeenIHDR</a></span>&nbsp;<span class="op" id="6168263">&amp;&amp;</span>&nbsp;<span class="op" id="6168266">!</span><span class="ident" id="6168267"><a href="/gostd/image/png/reader.go.html#6168163">paletted</a></span>&nbsp;<span class="op" id="6168276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168281">break</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168293">if</span>&nbsp;<span class="ident" id="6168296"><a href="/gostd/image/png/reader.go.html#6167843">d</a></span><span class="op" id="6168297">.</span><span class="ident" id="6168298"><a href="/gostd/image/png/reader.go.html#6150331">stage</a></span>&nbsp;<span class="op" id="6168304">==</span>&nbsp;<span class="ident" id="6168307"><a href="/gostd/image/png/reader.go.html#6150066">dsSeenPLTE</a></span>&nbsp;<span class="op" id="6168318">&amp;&amp;</span>&nbsp;<span class="ident" id="6168321"><a href="/gostd/image/png/reader.go.html#6168163">paletted</a></span>&nbsp;<span class="op" id="6168330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168335">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168346">}</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168349">var</span>&nbsp;<span class="ident" id="6168353">cm</span>&nbsp;<span class="ident" id="6168356"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6168361">.</span><span class="ident" id="6168362"><a href="/gostd/image/color/color.go.html#5187614">Model</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168369">switch</span>&nbsp;<span class="ident" id="6168376"><a href="/gostd/image/png/reader.go.html#6167843">d</a></span><span class="op" id="6168377">.</span><span class="ident" id="6168378"><a href="/gostd/image/png/reader.go.html#6150312">cb</a></span>&nbsp;<span class="op" id="6168381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168384">case</span>&nbsp;<span class="ident" id="6168389"><a href="/gostd/image/png/reader.go.html#6149007">cbG1</a></span><span class="op" id="6168393">,</span>&nbsp;<span class="ident" id="6168395"><a href="/gostd/image/png/reader.go.html#6149013">cbG2</a></span><span class="op" id="6168399">,</span>&nbsp;<span class="ident" id="6168401"><a href="/gostd/image/png/reader.go.html#6149019">cbG4</a></span><span class="op" id="6168405">,</span>&nbsp;<span class="ident" id="6168407"><a href="/gostd/image/png/reader.go.html#6149025">cbG8</a></span><span class="op" id="6168411">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168415"><a href="/gostd/image/png/reader.go.html#6168353">cm</a></span>&nbsp;<span class="op" id="6168418">=</span>&nbsp;<span class="ident" id="6168420"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6168425">.</span><span class="ident" id="6168426"><a href="/gostd/image/color/color.go.html#5188455">GrayModel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168437">case</span>&nbsp;<span class="ident" id="6168442"><a href="/gostd/image/png/reader.go.html#6149031">cbGA8</a></span><span class="op" id="6168447">:</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168451"><a href="/gostd/image/png/reader.go.html#6168353">cm</a></span>&nbsp;<span class="op" id="6168454">=</span>&nbsp;<span class="ident" id="6168456"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6168461">.</span><span class="ident" id="6168462"><a href="/gostd/image/color/color.go.html#5188275">NRGBAModel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168474">case</span>&nbsp;<span class="ident" id="6168479"><a href="/gostd/image/png/reader.go.html#6149038">cbTC8</a></span><span class="op" id="6168484">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168488"><a href="/gostd/image/png/reader.go.html#6168353">cm</a></span>&nbsp;<span class="op" id="6168491">=</span>&nbsp;<span class="ident" id="6168493"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6168498">.</span><span class="ident" id="6168499"><a href="/gostd/image/color/color.go.html#5188187">RGBAModel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168510">case</span>&nbsp;<span class="ident" id="6168515"><a href="/gostd/image/png/reader.go.html#6149045">cbP1</a></span><span class="op" id="6168519">,</span>&nbsp;<span class="ident" id="6168521"><a href="/gostd/image/png/reader.go.html#6149051">cbP2</a></span><span class="op" id="6168525">,</span>&nbsp;<span class="ident" id="6168527"><a href="/gostd/image/png/reader.go.html#6149057">cbP4</a></span><span class="op" id="6168531">,</span>&nbsp;<span class="ident" id="6168533"><a href="/gostd/image/png/reader.go.html#6149063">cbP8</a></span><span class="op" id="6168537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168541"><a href="/gostd/image/png/reader.go.html#6168353">cm</a></span>&nbsp;<span class="op" id="6168544">=</span>&nbsp;<span class="ident" id="6168546"><a href="/gostd/image/png/reader.go.html#6167843">d</a></span><span class="op" id="6168547">.</span><span class="ident" id="6168548"><a href="/gostd/image/png/reader.go.html#6150283">palette</a></span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168557">case</span>&nbsp;<span class="ident" id="6168562"><a href="/gostd/image/png/reader.go.html#6149069">cbTCA8</a></span><span class="op" id="6168568">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168572"><a href="/gostd/image/png/reader.go.html#6168353">cm</a></span>&nbsp;<span class="op" id="6168575">=</span>&nbsp;<span class="ident" id="6168577"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6168582">.</span><span class="ident" id="6168583"><a href="/gostd/image/color/color.go.html#5188275">NRGBAModel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168595">case</span>&nbsp;<span class="ident" id="6168600"><a href="/gostd/image/png/reader.go.html#6149077">cbG16</a></span><span class="op" id="6168605">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168609"><a href="/gostd/image/png/reader.go.html#6168353">cm</a></span>&nbsp;<span class="op" id="6168612">=</span>&nbsp;<span class="ident" id="6168614"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6168619">.</span><span class="ident" id="6168620"><a href="/gostd/image/color/color.go.html#5188498">Gray16Model</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168633">case</span>&nbsp;<span class="ident" id="6168638"><a href="/gostd/image/png/reader.go.html#6149084">cbGA16</a></span><span class="op" id="6168644">:</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168648"><a href="/gostd/image/png/reader.go.html#6168353">cm</a></span>&nbsp;<span class="op" id="6168651">=</span>&nbsp;<span class="ident" id="6168653"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6168658">.</span><span class="ident" id="6168659"><a href="/gostd/image/color/color.go.html#5188319">NRGBA64Model</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168673">case</span>&nbsp;<span class="ident" id="6168678"><a href="/gostd/image/png/reader.go.html#6149092">cbTC16</a></span><span class="op" id="6168684">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168688"><a href="/gostd/image/png/reader.go.html#6168353">cm</a></span>&nbsp;<span class="op" id="6168691">=</span>&nbsp;<span class="ident" id="6168693"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6168698">.</span><span class="ident" id="6168699"><a href="/gostd/image/color/color.go.html#5188230">RGBA64Model</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168712">case</span>&nbsp;<span class="ident" id="6168717"><a href="/gostd/image/png/reader.go.html#6149100">cbTCA16</a></span><span class="op" id="6168724">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168728"><a href="/gostd/image/png/reader.go.html#6168353">cm</a></span>&nbsp;<span class="op" id="6168731">=</span>&nbsp;<span class="ident" id="6168733"><a href="/gostd/image/png/reader.go.html#6148746">color</a></span><span class="op" id="6168738">.</span><span class="ident" id="6168739"><a href="/gostd/image/color/color.go.html#5188319">NRGBA64Model</a></span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168756">return</span>&nbsp;<span class="ident" id="6168763"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6168768">.</span><span class="ident" id="6168769"><a href="/gostd/image/image.go.html#5154748">Config</a></span><span class="op" id="6168775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168779"><a href="/gostd/image/image.go.html#5154765">ColorModel</a></span><span class="op" id="6168789">:</span>&nbsp;<span class="ident" id="6168791"><a href="/gostd/image/png/reader.go.html#6168353">cm</a></span><span class="op" id="6168793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168797"><a href="/gostd/image/image.go.html#5154792">Width</a></span><span class="op" id="6168802">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168809"><a href="/gostd/image/png/reader.go.html#6167843">d</a></span><span class="op" id="6168810">.</span><span class="ident" id="6168811"><a href="/gostd/image/png/reader.go.html#6150245">width</a></span><span class="op" id="6168816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168820"><a href="/gostd/image/image.go.html#5154799">Height</a></span><span class="op" id="6168826">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168832"><a href="/gostd/image/png/reader.go.html#6167843">d</a></span><span class="op" id="6168833">.</span><span class="ident" id="6168834"><a href="/gostd/image/png/reader.go.html#6150252">height</a></span><span class="op" id="6168840">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168843">}</span><span class="op" id="6168844">,</span>&nbsp;<span class="builtintype" id="6168846">nil</span><br>
<span class="lineno"></span><span class="op" id="6168850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6168853">func</span>&nbsp;<span class="ident" id="6168858">init</span><span class="op" id="6168862">(</span><span class="op" id="6168863">)</span>&nbsp;<span class="op" id="6168865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168868"><a href="/gostd/image/png/reader.go.html#6148737">image</a></span><span class="op" id="6168873">.</span><span class="ident" id="6168874"><a href="/gostd/image/format.go.html#5146281">RegisterFormat</a></span><span class="op" id="6168888">(</span><span class="string" id="6168889">&#34;png&#34;</span><span class="op" id="6168894">,</span>&nbsp;<span class="ident" id="6168896"><a href="/gostd/image/png/reader.go.html#6150110">pngHeader</a></span><span class="op" id="6168905">,</span>&nbsp;<span class="ident" id="6168907"><a href="/gostd/image/png/reader.go.html#6167292">Decode</a></span><span class="op" id="6168913">,</span>&nbsp;<span class="ident" id="6168915"><a href="/gostd/image/png/reader.go.html#6167792">DecodeConfig</a></span><span class="op" id="6168927">)</span><br>
<span class="lineno">820</span><span class="op" id="6168929">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
