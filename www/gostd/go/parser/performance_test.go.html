<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6693697">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6693752">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6693806">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6693857">package</span>&nbsp;<span class="ident" id="6693865">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6693873">import</span>&nbsp;<span class="op" id="6693880">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6693883">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6693895">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6693908">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6693918">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6693921">var</span>&nbsp;<span class="ident" id="6693925">src</span>&nbsp;<span class="op" id="6693929">=</span>&nbsp;<span class="ident" id="6693931">readFile</span><span class="op" id="6693939">(</span><span class="string" id="6693940">&#34;parser.go&#34;</span><span class="op" id="6693951">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6693954">func</span>&nbsp;<span class="ident" id="6693959">readFile</span><span class="op" id="6693967">(</span><span class="ident" id="6693968">filename</span>&nbsp;<span class="builtintype" id="6693977">string</span><span class="op" id="6693983">)</span>&nbsp;<span class="op" id="6693985">[</span><span class="op" id="6693986">]</span><span class="builtintype" id="6693987">byte</span>&nbsp;<span class="op" id="6693992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6693995">data</span><span class="op" id="6693999">,</span>&nbsp;<span class="ident" id="6694001">err</span>&nbsp;<span class="op" id="6694005">:=</span>&nbsp;<span class="ident" id="6694008">ioutil</span><span class="op" id="6694014">.</span><span class="ident" id="6694015">ReadFile</span><span class="op" id="6694023">(</span><span class="ident" id="6694024">filename</span><span class="op" id="6694032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694035">if</span>&nbsp;<span class="ident" id="6694038">err</span>&nbsp;<span class="op" id="6694042">!=</span>&nbsp;<span class="ident" id="6694045">nil</span>&nbsp;<span class="op" id="6694049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6694053">panic</span><span class="op" id="6694058">(</span><span class="ident" id="6694059">err</span><span class="op" id="6694062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694065">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694068">return</span>&nbsp;<span class="ident" id="6694075">data</span><br>
<span class="lineno"></span><span class="op" id="6694080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6694083">func</span>&nbsp;<span class="ident" id="6694088">BenchmarkParse</span><span class="op" id="6694102">(</span><span class="ident" id="6694103">b</span>&nbsp;<span class="op" id="6694105">*</span><span class="ident" id="6694106">testing</span><span class="op" id="6694113">.</span><span class="ident" id="6694114">B</span><span class="op" id="6694115">)</span>&nbsp;<span class="op" id="6694117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694120">b</span><span class="op" id="6694121">.</span><span class="ident" id="6694122">SetBytes</span><span class="op" id="6694130">(</span><span class="ident" id="6694131">int64</span><span class="op" id="6694136">(</span><span class="builtinfunc" id="6694137">len</span><span class="op" id="6694140">(</span><span class="ident" id="6694141">src</span><span class="op" id="6694144">)</span><span class="op" id="6694145">)</span><span class="op" id="6694146">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694149">for</span>&nbsp;<span class="ident" id="6694153">i</span>&nbsp;<span class="op" id="6694155">:=</span>&nbsp;<span class="num" id="6694158">0</span><span class="op" id="6694159">;</span>&nbsp;<span class="ident" id="6694161">i</span>&nbsp;<span class="op" id="6694163">&lt;</span>&nbsp;<span class="ident" id="6694165">b</span><span class="op" id="6694166">.</span><span class="ident" id="6694167">N</span><span class="op" id="6694168">;</span>&nbsp;<span class="ident" id="6694170">i</span><span class="op" id="6694171">++</span>&nbsp;<span class="op" id="6694174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6694178">if</span>&nbsp;<span class="ident" id="6694181">_</span><span class="op" id="6694182">,</span>&nbsp;<span class="ident" id="6694184">err</span>&nbsp;<span class="op" id="6694188">:=</span>&nbsp;<span class="ident" id="6694191">ParseFile</span><span class="op" id="6694200">(</span><span class="ident" id="6694201">token</span><span class="op" id="6694206">.</span><span class="ident" id="6694207">NewFileSet</span><span class="op" id="6694217">(</span><span class="op" id="6694218">)</span><span class="op" id="6694219">,</span>&nbsp;<span class="string" id="6694221">&#34;&#34;</span><span class="op" id="6694223">,</span>&nbsp;<span class="ident" id="6694225">src</span><span class="op" id="6694228">,</span>&nbsp;<span class="ident" id="6694230">ParseComments</span><span class="op" id="6694243">)</span><span class="op" id="6694244">;</span>&nbsp;<span class="ident" id="6694246">err</span>&nbsp;<span class="op" id="6694250">!=</span>&nbsp;<span class="ident" id="6694253">nil</span>&nbsp;<span class="op" id="6694257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6694262">b</span><span class="op" id="6694263">.</span><span class="ident" id="6694264">Fatalf</span><span class="op" id="6694270">(</span><span class="string" id="6694271">&#34;benchmark&nbsp;failed&nbsp;due&nbsp;to&nbsp;parse&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6694312">,</span>&nbsp;<span class="ident" id="6694314">err</span><span class="op" id="6694317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6694324">}</span><br>
<span class="lineno">30</span><span class="op" id="6694326">}</span>
</div>
</body>
</html>
