<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html" class="current">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8540975">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8541030">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8541084">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8541135">package</span>&nbsp;<span class="ident" id="8541143">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8541151">import</span>&nbsp;<span class="op" id="8541158">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8541161">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8541170">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8541177">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8541187">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8541199">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8541205">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8541216">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8541226">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8541229">var</span>&nbsp;<span class="ident" id="8541233">fset</span>&nbsp;<span class="op" id="8541238">=</span>&nbsp;<span class="ident" id="8541240">token</span><span class="op" id="8541245">.</span><span class="ident" id="8541246">NewFileSet</span><span class="op" id="8541256">(</span><span class="op" id="8541257">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8541260">var</span>&nbsp;<span class="ident" id="8541264">validFiles</span>&nbsp;<span class="op" id="8541275">=</span>&nbsp;<span class="op" id="8541277">[</span><span class="op" id="8541278">]</span><span class="builtintype" id="8541279">string</span><span class="op" id="8541285">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8541288">&#34;parser.go&#34;</span><span class="op" id="8541299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8541302">&#34;parser_test.go&#34;</span><span class="op" id="8541318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8541321">&#34;error_test.go&#34;</span><span class="op" id="8541336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8541339">&#34;short_test.go&#34;</span><span class="op" id="8541354">,</span><br>
<span class="lineno"></span><span class="op" id="8541356">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8541359">func</span>&nbsp;<span class="ident" id="8541364">TestParse</span><span class="op" id="8541373">(</span><span class="ident" id="8541374">t</span>&nbsp;<span class="op" id="8541376">*</span><span class="ident" id="8541377">testing</span><span class="op" id="8541384">.</span><span class="ident" id="8541385">T</span><span class="op" id="8541386">)</span>&nbsp;<span class="op" id="8541388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8541391">for</span>&nbsp;<span class="ident" id="8541395">_</span><span class="op" id="8541396">,</span>&nbsp;<span class="ident" id="8541398">filename</span>&nbsp;<span class="op" id="8541407">:=</span>&nbsp;<span class="keyword" id="8541410">range</span>&nbsp;<span class="ident" id="8541416">validFiles</span>&nbsp;<span class="op" id="8541427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8541431">_</span><span class="op" id="8541432">,</span>&nbsp;<span class="ident" id="8541434">err</span>&nbsp;<span class="op" id="8541438">:=</span>&nbsp;<span class="ident" id="8541441">ParseFile</span><span class="op" id="8541450">(</span><span class="ident" id="8541451">fset</span><span class="op" id="8541455">,</span>&nbsp;<span class="ident" id="8541457">filename</span><span class="op" id="8541465">,</span>&nbsp;<span class="builtintype" id="8541467">nil</span><span class="op" id="8541470">,</span>&nbsp;<span class="ident" id="8541472">DeclarationErrors</span><span class="op" id="8541489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8541493">if</span>&nbsp;<span class="ident" id="8541496">err</span>&nbsp;<span class="op" id="8541500">!=</span>&nbsp;<span class="builtintype" id="8541503">nil</span>&nbsp;<span class="op" id="8541507">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8541512">t</span><span class="op" id="8541513">.</span><span class="ident" id="8541514">Fatalf</span><span class="op" id="8541520">(</span><span class="string" id="8541521">&#34;ParseFile(%s):&nbsp;%v&#34;</span><span class="op" id="8541540">,</span>&nbsp;<span class="ident" id="8541542">filename</span><span class="op" id="8541550">,</span>&nbsp;<span class="ident" id="8541552">err</span><span class="op" id="8541555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8541559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8541562">}</span><br>
<span class="lineno"></span><span class="op" id="8541564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8541567">func</span>&nbsp;<span class="ident" id="8541572">nameFilter</span><span class="op" id="8541582">(</span><span class="ident" id="8541583">filename</span>&nbsp;<span class="builtintype" id="8541592">string</span><span class="op" id="8541598">)</span>&nbsp;<span class="builtintype" id="8541600">bool</span>&nbsp;<span class="op" id="8541605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8541608">switch</span>&nbsp;<span class="ident" id="8541615">filename</span>&nbsp;<span class="op" id="8541624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8541627">case</span>&nbsp;<span class="string" id="8541632">&#34;parser.go&#34;</span><span class="op" id="8541643">,</span>&nbsp;<span class="string" id="8541645">&#34;interface.go&#34;</span><span class="op" id="8541659">,</span>&nbsp;<span class="string" id="8541661">&#34;parser_test.go&#34;</span><span class="op" id="8541677">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8541681">return</span>&nbsp;<span class="builtintype" id="8541688">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8541694">case</span>&nbsp;<span class="string" id="8541699">&#34;parser.go.orig&#34;</span><span class="op" id="8541715">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8541719">return</span>&nbsp;<span class="builtintype" id="8541726">true</span>&nbsp;<span class="comment" id="8541731">//&nbsp;permit&nbsp;but&nbsp;should&nbsp;be&nbsp;ignored&nbsp;by&nbsp;ParseDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8541776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8541779">return</span>&nbsp;<span class="builtintype" id="8541786">false</span><br>
<span class="lineno"></span><span class="op" id="8541792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="8541795">func</span>&nbsp;<span class="ident" id="8541800">dirFilter</span><span class="op" id="8541809">(</span><span class="ident" id="8541810">f</span>&nbsp;<span class="ident" id="8541812">os</span><span class="op" id="8541814">.</span><span class="ident" id="8541815">FileInfo</span><span class="op" id="8541823">)</span>&nbsp;<span class="builtintype" id="8541825">bool</span>&nbsp;<span class="op" id="8541830">{</span>&nbsp;<span class="keyword" id="8541832">return</span>&nbsp;<span class="ident" id="8541839">nameFilter</span><span class="op" id="8541849">(</span><span class="ident" id="8541850">f</span><span class="op" id="8541851">.</span><span class="ident" id="8541852">Name</span><span class="op" id="8541856">(</span><span class="op" id="8541857">)</span><span class="op" id="8541858">)</span>&nbsp;<span class="op" id="8541860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8541863">func</span>&nbsp;<span class="ident" id="8541868">TestParseDir</span><span class="op" id="8541880">(</span><span class="ident" id="8541881">t</span>&nbsp;<span class="op" id="8541883">*</span><span class="ident" id="8541884">testing</span><span class="op" id="8541891">.</span><span class="ident" id="8541892">T</span><span class="op" id="8541893">)</span>&nbsp;<span class="op" id="8541895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8541898">path</span>&nbsp;<span class="op" id="8541903">:=</span>&nbsp;<span class="string" id="8541906">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8541911">pkgs</span><span class="op" id="8541915">,</span>&nbsp;<span class="ident" id="8541917">err</span>&nbsp;<span class="op" id="8541921">:=</span>&nbsp;<span class="ident" id="8541924">ParseDir</span><span class="op" id="8541932">(</span><span class="ident" id="8541933">fset</span><span class="op" id="8541937">,</span>&nbsp;<span class="ident" id="8541939">path</span><span class="op" id="8541943">,</span>&nbsp;<span class="ident" id="8541945">dirFilter</span><span class="op" id="8541954">,</span>&nbsp;<span class="num" id="8541956">0</span><span class="op" id="8541957">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8541960">if</span>&nbsp;<span class="ident" id="8541963">err</span>&nbsp;<span class="op" id="8541967">!=</span>&nbsp;<span class="builtintype" id="8541970">nil</span>&nbsp;<span class="op" id="8541974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8541978">t</span><span class="op" id="8541979">.</span><span class="ident" id="8541980">Fatalf</span><span class="op" id="8541986">(</span><span class="string" id="8541987">&#34;ParseDir(%s):&nbsp;%v&#34;</span><span class="op" id="8542005">,</span>&nbsp;<span class="ident" id="8542007">path</span><span class="op" id="8542011">,</span>&nbsp;<span class="ident" id="8542013">err</span><span class="op" id="8542016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8542019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8542022">if</span>&nbsp;<span class="ident" id="8542025">n</span>&nbsp;<span class="op" id="8542027">:=</span>&nbsp;<span class="builtinfunc" id="8542030">len</span><span class="op" id="8542033">(</span><span class="ident" id="8542034">pkgs</span><span class="op" id="8542038">)</span><span class="op" id="8542039">;</span>&nbsp;<span class="ident" id="8542041">n</span>&nbsp;<span class="op" id="8542043">!=</span>&nbsp;<span class="num" id="8542046">1</span>&nbsp;<span class="op" id="8542048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542052">t</span><span class="op" id="8542053">.</span><span class="ident" id="8542054">Errorf</span><span class="op" id="8542060">(</span><span class="string" id="8542061">&#34;got&nbsp;%d&nbsp;packages;&nbsp;want&nbsp;1&#34;</span><span class="op" id="8542086">,</span>&nbsp;<span class="ident" id="8542088">n</span><span class="op" id="8542089">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8542092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542095">pkg</span>&nbsp;<span class="op" id="8542099">:=</span>&nbsp;<span class="ident" id="8542102">pkgs</span><span class="op" id="8542106">[</span><span class="string" id="8542107">&#34;parser&#34;</span><span class="op" id="8542115">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8542118">if</span>&nbsp;<span class="ident" id="8542121">pkg</span>&nbsp;<span class="op" id="8542125">==</span>&nbsp;<span class="builtintype" id="8542128">nil</span>&nbsp;<span class="op" id="8542132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542136">t</span><span class="op" id="8542137">.</span><span class="ident" id="8542138">Errorf</span><span class="op" id="8542144">(</span><span class="string" id="8542145">`package&nbsp;&#34;parser&#34;&nbsp;not&nbsp;found`</span><span class="op" id="8542173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8542177">return</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8542185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8542188">if</span>&nbsp;<span class="ident" id="8542191">n</span>&nbsp;<span class="op" id="8542193">:=</span>&nbsp;<span class="builtinfunc" id="8542196">len</span><span class="op" id="8542199">(</span><span class="ident" id="8542200">pkg</span><span class="op" id="8542203">.</span><span class="ident" id="8542204">Files</span><span class="op" id="8542209">)</span><span class="op" id="8542210">;</span>&nbsp;<span class="ident" id="8542212">n</span>&nbsp;<span class="op" id="8542214">!=</span>&nbsp;<span class="num" id="8542217">3</span>&nbsp;<span class="op" id="8542219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542223">t</span><span class="op" id="8542224">.</span><span class="ident" id="8542225">Errorf</span><span class="op" id="8542231">(</span><span class="string" id="8542232">&#34;got&nbsp;%d&nbsp;package&nbsp;files;&nbsp;want&nbsp;3&#34;</span><span class="op" id="8542262">,</span>&nbsp;<span class="ident" id="8542264">n</span><span class="op" id="8542265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8542268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8542271">for</span>&nbsp;<span class="ident" id="8542275">filename</span>&nbsp;<span class="op" id="8542284">:=</span>&nbsp;<span class="keyword" id="8542287">range</span>&nbsp;<span class="ident" id="8542293">pkg</span><span class="op" id="8542296">.</span><span class="ident" id="8542297">Files</span>&nbsp;<span class="op" id="8542303">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8542307">if</span>&nbsp;<span class="op" id="8542310">!</span><span class="ident" id="8542311">nameFilter</span><span class="op" id="8542321">(</span><span class="ident" id="8542322">filename</span><span class="op" id="8542330">)</span>&nbsp;<span class="op" id="8542332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542337">t</span><span class="op" id="8542338">.</span><span class="ident" id="8542339">Errorf</span><span class="op" id="8542345">(</span><span class="string" id="8542346">&#34;unexpected&nbsp;package&nbsp;file:&nbsp;%s&#34;</span><span class="op" id="8542375">,</span>&nbsp;<span class="ident" id="8542377">filename</span><span class="op" id="8542385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8542389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8542392">}</span><br>
<span class="lineno"></span><span class="op" id="8542394">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="8542397">func</span>&nbsp;<span class="ident" id="8542402">TestParseExpr</span><span class="op" id="8542415">(</span><span class="ident" id="8542416">t</span>&nbsp;<span class="op" id="8542418">*</span><span class="ident" id="8542419">testing</span><span class="op" id="8542426">.</span><span class="ident" id="8542427">T</span><span class="op" id="8542428">)</span>&nbsp;<span class="op" id="8542430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8542433">//&nbsp;just&nbsp;kicking&nbsp;the&nbsp;tires:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8542461">//&nbsp;a&nbsp;valid&nbsp;arithmetic&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542495">src</span>&nbsp;<span class="op" id="8542499">:=</span>&nbsp;<span class="string" id="8542502">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542511">x</span><span class="op" id="8542512">,</span>&nbsp;<span class="ident" id="8542514">err</span>&nbsp;<span class="op" id="8542518">:=</span>&nbsp;<span class="ident" id="8542521">ParseExpr</span><span class="op" id="8542530">(</span><span class="ident" id="8542531">src</span><span class="op" id="8542534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8542537">if</span>&nbsp;<span class="ident" id="8542540">err</span>&nbsp;<span class="op" id="8542544">!=</span>&nbsp;<span class="builtintype" id="8542547">nil</span>&nbsp;<span class="op" id="8542551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542555">t</span><span class="op" id="8542556">.</span><span class="ident" id="8542557">Errorf</span><span class="op" id="8542563">(</span><span class="string" id="8542564">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="8542583">,</span>&nbsp;<span class="ident" id="8542585">src</span><span class="op" id="8542588">,</span>&nbsp;<span class="ident" id="8542590">err</span><span class="op" id="8542593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8542596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8542599">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8542616">if</span>&nbsp;<span class="ident" id="8542619">_</span><span class="op" id="8542620">,</span>&nbsp;<span class="ident" id="8542622">ok</span>&nbsp;<span class="op" id="8542625">:=</span>&nbsp;<span class="ident" id="8542628">x</span><span class="op" id="8542629">.</span><span class="op" id="8542630">(</span><span class="op" id="8542631">*</span><span class="ident" id="8542632">ast</span><span class="op" id="8542635">.</span><span class="ident" id="8542636">BinaryExpr</span><span class="op" id="8542646">)</span><span class="op" id="8542647">;</span>&nbsp;<span class="op" id="8542649">!</span><span class="ident" id="8542650">ok</span>&nbsp;<span class="op" id="8542653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542657">t</span><span class="op" id="8542658">.</span><span class="ident" id="8542659">Errorf</span><span class="op" id="8542665">(</span><span class="string" id="8542666">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.BinaryExpr&#34;</span><span class="op" id="8542711">,</span>&nbsp;<span class="ident" id="8542713">src</span><span class="op" id="8542716">,</span>&nbsp;<span class="ident" id="8542718">x</span><span class="op" id="8542719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8542722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8542726">//&nbsp;a&nbsp;valid&nbsp;type&nbsp;expression</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542754">src</span>&nbsp;<span class="op" id="8542758">=</span>&nbsp;<span class="string" id="8542760">&#34;struct{x&nbsp;*int}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542778">x</span><span class="op" id="8542779">,</span>&nbsp;<span class="ident" id="8542781">err</span>&nbsp;<span class="op" id="8542785">=</span>&nbsp;<span class="ident" id="8542787">ParseExpr</span><span class="op" id="8542796">(</span><span class="ident" id="8542797">src</span><span class="op" id="8542800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8542803">if</span>&nbsp;<span class="ident" id="8542806">err</span>&nbsp;<span class="op" id="8542810">!=</span>&nbsp;<span class="builtintype" id="8542813">nil</span>&nbsp;<span class="op" id="8542817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542821">t</span><span class="op" id="8542822">.</span><span class="ident" id="8542823">Errorf</span><span class="op" id="8542829">(</span><span class="string" id="8542830">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="8542849">,</span>&nbsp;<span class="ident" id="8542851">src</span><span class="op" id="8542854">,</span>&nbsp;<span class="ident" id="8542856">err</span><span class="op" id="8542859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8542862">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8542865">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8542882">if</span>&nbsp;<span class="ident" id="8542885">_</span><span class="op" id="8542886">,</span>&nbsp;<span class="ident" id="8542888">ok</span>&nbsp;<span class="op" id="8542891">:=</span>&nbsp;<span class="ident" id="8542894">x</span><span class="op" id="8542895">.</span><span class="op" id="8542896">(</span><span class="op" id="8542897">*</span><span class="ident" id="8542898">ast</span><span class="op" id="8542901">.</span><span class="ident" id="8542902">StructType</span><span class="op" id="8542912">)</span><span class="op" id="8542913">;</span>&nbsp;<span class="op" id="8542915">!</span><span class="ident" id="8542916">ok</span>&nbsp;<span class="op" id="8542919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8542923">t</span><span class="op" id="8542924">.</span><span class="ident" id="8542925">Errorf</span><span class="op" id="8542931">(</span><span class="string" id="8542932">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.StructType&#34;</span><span class="op" id="8542977">,</span>&nbsp;<span class="ident" id="8542979">src</span><span class="op" id="8542982">,</span>&nbsp;<span class="ident" id="8542984">x</span><span class="op" id="8542985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8542988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8542992">//&nbsp;an&nbsp;invalid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8543018">src</span>&nbsp;<span class="op" id="8543022">=</span>&nbsp;<span class="string" id="8543024">&#34;a&nbsp;+&nbsp;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8543033">if</span>&nbsp;<span class="ident" id="8543036">_</span><span class="op" id="8543037">,</span>&nbsp;<span class="ident" id="8543039">err</span>&nbsp;<span class="op" id="8543043">:=</span>&nbsp;<span class="ident" id="8543046">ParseExpr</span><span class="op" id="8543055">(</span><span class="ident" id="8543056">src</span><span class="op" id="8543059">)</span><span class="op" id="8543060">;</span>&nbsp;<span class="ident" id="8543062">err</span>&nbsp;<span class="op" id="8543066">==</span>&nbsp;<span class="builtintype" id="8543069">nil</span>&nbsp;<span class="op" id="8543073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8543077">t</span><span class="op" id="8543078">.</span><span class="ident" id="8543079">Errorf</span><span class="op" id="8543085">(</span><span class="string" id="8543086">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8543115">,</span>&nbsp;<span class="ident" id="8543117">src</span><span class="op" id="8543120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8543123">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8543127">//&nbsp;a&nbsp;valid&nbsp;expression&nbsp;followed&nbsp;by&nbsp;extra&nbsp;tokens&nbsp;is&nbsp;invalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8543186">src</span>&nbsp;<span class="op" id="8543190">=</span>&nbsp;<span class="string" id="8543192">&#34;a[i]&nbsp;:=&nbsp;x&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8543205">if</span>&nbsp;<span class="ident" id="8543208">_</span><span class="op" id="8543209">,</span>&nbsp;<span class="ident" id="8543211">err</span>&nbsp;<span class="op" id="8543215">:=</span>&nbsp;<span class="ident" id="8543218">ParseExpr</span><span class="op" id="8543227">(</span><span class="ident" id="8543228">src</span><span class="op" id="8543231">)</span><span class="op" id="8543232">;</span>&nbsp;<span class="ident" id="8543234">err</span>&nbsp;<span class="op" id="8543238">==</span>&nbsp;<span class="builtintype" id="8543241">nil</span>&nbsp;<span class="op" id="8543245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8543249">t</span><span class="op" id="8543250">.</span><span class="ident" id="8543251">Errorf</span><span class="op" id="8543257">(</span><span class="string" id="8543258">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8543287">,</span>&nbsp;<span class="ident" id="8543289">src</span><span class="op" id="8543292">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8543295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8543299">//&nbsp;a&nbsp;semicolon&nbsp;is&nbsp;not&nbsp;permitted&nbsp;unless&nbsp;automatically&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8543362">src</span>&nbsp;<span class="op" id="8543366">=</span>&nbsp;<span class="string" id="8543368">&#34;a&nbsp;+&nbsp;b\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8543379">if</span>&nbsp;<span class="ident" id="8543382">_</span><span class="op" id="8543383">,</span>&nbsp;<span class="ident" id="8543385">err</span>&nbsp;<span class="op" id="8543389">:=</span>&nbsp;<span class="ident" id="8543392">ParseExpr</span><span class="op" id="8543401">(</span><span class="ident" id="8543402">src</span><span class="op" id="8543405">)</span><span class="op" id="8543406">;</span>&nbsp;<span class="ident" id="8543408">err</span>&nbsp;<span class="op" id="8543412">!=</span>&nbsp;<span class="builtintype" id="8543415">nil</span>&nbsp;<span class="op" id="8543419">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8543423">t</span><span class="op" id="8543424">.</span><span class="ident" id="8543425">Errorf</span><span class="op" id="8543431">(</span><span class="string" id="8543432">&#34;ParseExpr(%q):&nbsp;got&nbsp;error&nbsp;%s&#34;</span><span class="op" id="8543461">,</span>&nbsp;<span class="ident" id="8543463">src</span><span class="op" id="8543466">,</span>&nbsp;<span class="ident" id="8543468">err</span><span class="op" id="8543471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8543474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8543477">src</span>&nbsp;<span class="op" id="8543481">=</span>&nbsp;<span class="string" id="8543483">&#34;a&nbsp;+&nbsp;b;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8543493">if</span>&nbsp;<span class="ident" id="8543496">_</span><span class="op" id="8543497">,</span>&nbsp;<span class="ident" id="8543499">err</span>&nbsp;<span class="op" id="8543503">:=</span>&nbsp;<span class="ident" id="8543506">ParseExpr</span><span class="op" id="8543515">(</span><span class="ident" id="8543516">src</span><span class="op" id="8543519">)</span><span class="op" id="8543520">;</span>&nbsp;<span class="ident" id="8543522">err</span>&nbsp;<span class="op" id="8543526">==</span>&nbsp;<span class="builtintype" id="8543529">nil</span>&nbsp;<span class="op" id="8543533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8543537">t</span><span class="op" id="8543538">.</span><span class="ident" id="8543539">Errorf</span><span class="op" id="8543545">(</span><span class="string" id="8543546">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8543575">,</span>&nbsp;<span class="ident" id="8543577">src</span><span class="op" id="8543580">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8543583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8543587">//&nbsp;various&nbsp;other&nbsp;stuff&nbsp;following&nbsp;a&nbsp;valid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8543640">const</span>&nbsp;<span class="ident" id="8543646">validExpr</span>&nbsp;<span class="op" id="8543656">=</span>&nbsp;<span class="string" id="8543658">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8543667">const</span>&nbsp;<span class="ident" id="8543673">anything</span>&nbsp;<span class="op" id="8543682">=</span>&nbsp;<span class="string" id="8543684">&#34;dh3*#D)#_&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8543697">for</span>&nbsp;<span class="ident" id="8543701">_</span><span class="op" id="8543702">,</span>&nbsp;<span class="ident" id="8543704">c</span>&nbsp;<span class="op" id="8543706">:=</span>&nbsp;<span class="keyword" id="8543709">range</span>&nbsp;<span class="string" id="8543715">&#34;!)]};,&#34;</span>&nbsp;<span class="op" id="8543724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8543728">src</span>&nbsp;<span class="op" id="8543732">:=</span>&nbsp;<span class="ident" id="8543735">validExpr</span>&nbsp;<span class="op" id="8543745">+</span>&nbsp;<span class="builtintype" id="8543747">string</span><span class="op" id="8543753">(</span><span class="ident" id="8543754">c</span><span class="op" id="8543755">)</span>&nbsp;<span class="op" id="8543757">+</span>&nbsp;<span class="ident" id="8543759">anything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8543770">if</span>&nbsp;<span class="ident" id="8543773">_</span><span class="op" id="8543774">,</span>&nbsp;<span class="ident" id="8543776">err</span>&nbsp;<span class="op" id="8543780">:=</span>&nbsp;<span class="ident" id="8543783">ParseExpr</span><span class="op" id="8543792">(</span><span class="ident" id="8543793">src</span><span class="op" id="8543796">)</span><span class="op" id="8543797">;</span>&nbsp;<span class="ident" id="8543799">err</span>&nbsp;<span class="op" id="8543803">==</span>&nbsp;<span class="builtintype" id="8543806">nil</span>&nbsp;<span class="op" id="8543810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8543815">t</span><span class="op" id="8543816">.</span><span class="ident" id="8543817">Errorf</span><span class="op" id="8543823">(</span><span class="string" id="8543824">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8543853">,</span>&nbsp;<span class="ident" id="8543855">src</span><span class="op" id="8543858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8543862">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8543865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8543869">//&nbsp;ParseExpr&nbsp;must&nbsp;not&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8543898">for</span>&nbsp;<span class="ident" id="8543902">_</span><span class="op" id="8543903">,</span>&nbsp;<span class="ident" id="8543905">src</span>&nbsp;<span class="op" id="8543909">:=</span>&nbsp;<span class="keyword" id="8543912">range</span>&nbsp;<span class="ident" id="8543918">valids</span>&nbsp;<span class="op" id="8543925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8543929">ParseExpr</span><span class="op" id="8543938">(</span><span class="ident" id="8543939">src</span><span class="op" id="8543942">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8543945">}</span><br>
<span class="lineno"></span><span class="op" id="8543947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8543950">func</span>&nbsp;<span class="ident" id="8543955">TestColonEqualsScope</span><span class="op" id="8543975">(</span><span class="ident" id="8543976">t</span>&nbsp;<span class="op" id="8543978">*</span><span class="ident" id="8543979">testing</span><span class="op" id="8543986">.</span><span class="ident" id="8543987">T</span><span class="op" id="8543988">)</span>&nbsp;<span class="op" id="8543990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8543993">f</span><span class="op" id="8543994">,</span>&nbsp;<span class="ident" id="8543996">err</span>&nbsp;<span class="op" id="8544000">:=</span>&nbsp;<span class="ident" id="8544003">ParseFile</span><span class="op" id="8544012">(</span><span class="ident" id="8544013">fset</span><span class="op" id="8544017">,</span>&nbsp;<span class="string" id="8544019">&#34;&#34;</span><span class="op" id="8544021">,</span>&nbsp;<span class="string" id="8544023">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;x,&nbsp;y,&nbsp;z&nbsp;:=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="8544067">,</span>&nbsp;<span class="num" id="8544069">0</span><span class="op" id="8544070">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8544073">if</span>&nbsp;<span class="ident" id="8544076">err</span>&nbsp;<span class="op" id="8544080">!=</span>&nbsp;<span class="builtintype" id="8544083">nil</span>&nbsp;<span class="op" id="8544087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8544091">t</span><span class="op" id="8544092">.</span><span class="ident" id="8544093">Fatal</span><span class="op" id="8544098">(</span><span class="ident" id="8544099">err</span><span class="op" id="8544102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8544105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8544109">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8544160">as</span>&nbsp;<span class="op" id="8544163">:=</span>&nbsp;<span class="ident" id="8544166">f</span><span class="op" id="8544167">.</span><span class="ident" id="8544168">Decls</span><span class="op" id="8544173">[</span><span class="num" id="8544174">0</span><span class="op" id="8544175">]</span><span class="op" id="8544176">.</span><span class="op" id="8544177">(</span><span class="op" id="8544178">*</span><span class="ident" id="8544179">ast</span><span class="op" id="8544182">.</span><span class="ident" id="8544183">FuncDecl</span><span class="op" id="8544191">)</span><span class="op" id="8544192">.</span><span class="ident" id="8544193">Body</span><span class="op" id="8544197">.</span><span class="ident" id="8544198">List</span><span class="op" id="8544202">[</span><span class="num" id="8544203">0</span><span class="op" id="8544204">]</span><span class="op" id="8544205">.</span><span class="op" id="8544206">(</span><span class="op" id="8544207">*</span><span class="ident" id="8544208">ast</span><span class="op" id="8544211">.</span><span class="ident" id="8544212">AssignStmt</span><span class="op" id="8544222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8544225">for</span>&nbsp;<span class="ident" id="8544229">_</span><span class="op" id="8544230">,</span>&nbsp;<span class="ident" id="8544232">v</span>&nbsp;<span class="op" id="8544234">:=</span>&nbsp;<span class="keyword" id="8544237">range</span>&nbsp;<span class="ident" id="8544243">as</span><span class="op" id="8544245">.</span><span class="ident" id="8544246">Rhs</span>&nbsp;<span class="op" id="8544250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8544254">id</span>&nbsp;<span class="op" id="8544257">:=</span>&nbsp;<span class="ident" id="8544260">v</span><span class="op" id="8544261">.</span><span class="op" id="8544262">(</span><span class="op" id="8544263">*</span><span class="ident" id="8544264">ast</span><span class="op" id="8544267">.</span><span class="ident" id="8544268">Ident</span><span class="op" id="8544273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8544277">if</span>&nbsp;<span class="ident" id="8544280">id</span><span class="op" id="8544282">.</span><span class="ident" id="8544283">Obj</span>&nbsp;<span class="op" id="8544287">!=</span>&nbsp;<span class="builtintype" id="8544290">nil</span>&nbsp;<span class="op" id="8544294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8544299">t</span><span class="op" id="8544300">.</span><span class="ident" id="8544301">Errorf</span><span class="op" id="8544307">(</span><span class="string" id="8544308">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="8544336">,</span>&nbsp;<span class="ident" id="8544338">id</span><span class="op" id="8544340">.</span><span class="ident" id="8544341">Name</span><span class="op" id="8544345">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8544349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8544352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8544355">for</span>&nbsp;<span class="ident" id="8544359">_</span><span class="op" id="8544360">,</span>&nbsp;<span class="ident" id="8544362">v</span>&nbsp;<span class="op" id="8544364">:=</span>&nbsp;<span class="keyword" id="8544367">range</span>&nbsp;<span class="ident" id="8544373">as</span><span class="op" id="8544375">.</span><span class="ident" id="8544376">Lhs</span>&nbsp;<span class="op" id="8544380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8544384">id</span>&nbsp;<span class="op" id="8544387">:=</span>&nbsp;<span class="ident" id="8544390">v</span><span class="op" id="8544391">.</span><span class="op" id="8544392">(</span><span class="op" id="8544393">*</span><span class="ident" id="8544394">ast</span><span class="op" id="8544397">.</span><span class="ident" id="8544398">Ident</span><span class="op" id="8544403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8544407">if</span>&nbsp;<span class="ident" id="8544410">id</span><span class="op" id="8544412">.</span><span class="ident" id="8544413">Obj</span>&nbsp;<span class="op" id="8544417">==</span>&nbsp;<span class="builtintype" id="8544420">nil</span>&nbsp;<span class="op" id="8544424">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8544429">t</span><span class="op" id="8544430">.</span><span class="ident" id="8544431">Errorf</span><span class="op" id="8544437">(</span><span class="string" id="8544438">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="8544472">,</span>&nbsp;<span class="ident" id="8544474">id</span><span class="op" id="8544476">.</span><span class="ident" id="8544477">Name</span><span class="op" id="8544481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8544485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8544488">}</span><br>
<span class="lineno"></span><span class="op" id="8544490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="8544493">func</span>&nbsp;<span class="ident" id="8544498">TestVarScope</span><span class="op" id="8544510">(</span><span class="ident" id="8544511">t</span>&nbsp;<span class="op" id="8544513">*</span><span class="ident" id="8544514">testing</span><span class="op" id="8544521">.</span><span class="ident" id="8544522">T</span><span class="op" id="8544523">)</span>&nbsp;<span class="op" id="8544525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8544528">f</span><span class="op" id="8544529">,</span>&nbsp;<span class="ident" id="8544531">err</span>&nbsp;<span class="op" id="8544535">:=</span>&nbsp;<span class="ident" id="8544538">ParseFile</span><span class="op" id="8544547">(</span><span class="ident" id="8544548">fset</span><span class="op" id="8544552">,</span>&nbsp;<span class="string" id="8544554">&#34;&#34;</span><span class="op" id="8544556">,</span>&nbsp;<span class="string" id="8544558">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;var&nbsp;x,&nbsp;y,&nbsp;z&nbsp;=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="8544605">,</span>&nbsp;<span class="num" id="8544607">0</span><span class="op" id="8544608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8544611">if</span>&nbsp;<span class="ident" id="8544614">err</span>&nbsp;<span class="op" id="8544618">!=</span>&nbsp;<span class="builtintype" id="8544621">nil</span>&nbsp;<span class="op" id="8544625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8544629">t</span><span class="op" id="8544630">.</span><span class="ident" id="8544631">Fatal</span><span class="op" id="8544636">(</span><span class="ident" id="8544637">err</span><span class="op" id="8544640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8544643">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8544647">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8544698">as</span>&nbsp;<span class="op" id="8544701">:=</span>&nbsp;<span class="ident" id="8544704">f</span><span class="op" id="8544705">.</span><span class="ident" id="8544706">Decls</span><span class="op" id="8544711">[</span><span class="num" id="8544712">0</span><span class="op" id="8544713">]</span><span class="op" id="8544714">.</span><span class="op" id="8544715">(</span><span class="op" id="8544716">*</span><span class="ident" id="8544717">ast</span><span class="op" id="8544720">.</span><span class="ident" id="8544721">FuncDecl</span><span class="op" id="8544729">)</span><span class="op" id="8544730">.</span><span class="ident" id="8544731">Body</span><span class="op" id="8544735">.</span><span class="ident" id="8544736">List</span><span class="op" id="8544740">[</span><span class="num" id="8544741">0</span><span class="op" id="8544742">]</span><span class="op" id="8544743">.</span><span class="op" id="8544744">(</span><span class="op" id="8544745">*</span><span class="ident" id="8544746">ast</span><span class="op" id="8544749">.</span><span class="ident" id="8544750">DeclStmt</span><span class="op" id="8544758">)</span><span class="op" id="8544759">.</span><span class="ident" id="8544760">Decl</span><span class="op" id="8544764">.</span><span class="op" id="8544765">(</span><span class="op" id="8544766">*</span><span class="ident" id="8544767">ast</span><span class="op" id="8544770">.</span><span class="ident" id="8544771">GenDecl</span><span class="op" id="8544778">)</span><span class="op" id="8544779">.</span><span class="ident" id="8544780">Specs</span><span class="op" id="8544785">[</span><span class="num" id="8544786">0</span><span class="op" id="8544787">]</span><span class="op" id="8544788">.</span><span class="op" id="8544789">(</span><span class="op" id="8544790">*</span><span class="ident" id="8544791">ast</span><span class="op" id="8544794">.</span><span class="ident" id="8544795">ValueSpec</span><span class="op" id="8544804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8544807">for</span>&nbsp;<span class="ident" id="8544811">_</span><span class="op" id="8544812">,</span>&nbsp;<span class="ident" id="8544814">v</span>&nbsp;<span class="op" id="8544816">:=</span>&nbsp;<span class="keyword" id="8544819">range</span>&nbsp;<span class="ident" id="8544825">as</span><span class="op" id="8544827">.</span><span class="ident" id="8544828">Values</span>&nbsp;<span class="op" id="8544835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8544839">id</span>&nbsp;<span class="op" id="8544842">:=</span>&nbsp;<span class="ident" id="8544845">v</span><span class="op" id="8544846">.</span><span class="op" id="8544847">(</span><span class="op" id="8544848">*</span><span class="ident" id="8544849">ast</span><span class="op" id="8544852">.</span><span class="ident" id="8544853">Ident</span><span class="op" id="8544858">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8544862">if</span>&nbsp;<span class="ident" id="8544865">id</span><span class="op" id="8544867">.</span><span class="ident" id="8544868">Obj</span>&nbsp;<span class="op" id="8544872">!=</span>&nbsp;<span class="builtintype" id="8544875">nil</span>&nbsp;<span class="op" id="8544879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8544884">t</span><span class="op" id="8544885">.</span><span class="ident" id="8544886">Errorf</span><span class="op" id="8544892">(</span><span class="string" id="8544893">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="8544921">,</span>&nbsp;<span class="ident" id="8544923">id</span><span class="op" id="8544925">.</span><span class="ident" id="8544926">Name</span><span class="op" id="8544930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8544934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8544937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8544940">for</span>&nbsp;<span class="ident" id="8544944">_</span><span class="op" id="8544945">,</span>&nbsp;<span class="ident" id="8544947">id</span>&nbsp;<span class="op" id="8544950">:=</span>&nbsp;<span class="keyword" id="8544953">range</span>&nbsp;<span class="ident" id="8544959">as</span><span class="op" id="8544961">.</span><span class="ident" id="8544962">Names</span>&nbsp;<span class="op" id="8544968">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8544972">if</span>&nbsp;<span class="ident" id="8544975">id</span><span class="op" id="8544977">.</span><span class="ident" id="8544978">Obj</span>&nbsp;<span class="op" id="8544982">==</span>&nbsp;<span class="builtintype" id="8544985">nil</span>&nbsp;<span class="op" id="8544989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8544994">t</span><span class="op" id="8544995">.</span><span class="ident" id="8544996">Errorf</span><span class="op" id="8545002">(</span><span class="string" id="8545003">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="8545037">,</span>&nbsp;<span class="ident" id="8545039">id</span><span class="op" id="8545041">.</span><span class="ident" id="8545042">Name</span><span class="op" id="8545046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8545050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8545053">}</span><br>
<span class="lineno"></span><span class="op" id="8545055">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="8545058">func</span>&nbsp;<span class="ident" id="8545063">TestObjects</span><span class="op" id="8545074">(</span><span class="ident" id="8545075">t</span>&nbsp;<span class="op" id="8545077">*</span><span class="ident" id="8545078">testing</span><span class="op" id="8545085">.</span><span class="ident" id="8545086">T</span><span class="op" id="8545087">)</span>&nbsp;<span class="op" id="8545089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8545092">const</span>&nbsp;<span class="ident" id="8545098">src</span>&nbsp;<span class="op" id="8545102">=</span>&nbsp;<span class="string" id="8545104">`<br>
<span class="lineno"></span>package&nbsp;p<br>
<span class="lineno"></span>import&nbsp;fmt&nbsp;&#34;fmt&#34;<br>
<span class="lineno">180</span>const&nbsp;pi&nbsp;=&nbsp;3.14<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct{}<br>
<span class="lineno"></span>var&nbsp;x&nbsp;int<br>
<span class="lineno"></span>func&nbsp;f()&nbsp;{&nbsp;L:&nbsp;}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8545195">f</span><span class="op" id="8545196">,</span>&nbsp;<span class="ident" id="8545198">err</span>&nbsp;<span class="op" id="8545202">:=</span>&nbsp;<span class="ident" id="8545205">ParseFile</span><span class="op" id="8545214">(</span><span class="ident" id="8545215">fset</span><span class="op" id="8545219">,</span>&nbsp;<span class="string" id="8545221">&#34;&#34;</span><span class="op" id="8545223">,</span>&nbsp;<span class="ident" id="8545225">src</span><span class="op" id="8545228">,</span>&nbsp;<span class="num" id="8545230">0</span><span class="op" id="8545231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8545234">if</span>&nbsp;<span class="ident" id="8545237">err</span>&nbsp;<span class="op" id="8545241">!=</span>&nbsp;<span class="builtintype" id="8545244">nil</span>&nbsp;<span class="op" id="8545248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8545252">t</span><span class="op" id="8545253">.</span><span class="ident" id="8545254">Fatal</span><span class="op" id="8545259">(</span><span class="ident" id="8545260">err</span><span class="op" id="8545263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8545266">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8545270">objects</span>&nbsp;<span class="op" id="8545278">:=</span>&nbsp;<span class="keyword" id="8545281">map</span><span class="op" id="8545284">[</span><span class="builtintype" id="8545285">string</span><span class="op" id="8545291">]</span><span class="ident" id="8545292">ast</span><span class="op" id="8545295">.</span><span class="ident" id="8545296">ObjKind</span><span class="op" id="8545303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8545307">&#34;p&#34;</span><span class="op" id="8545310">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8545314">ast</span><span class="op" id="8545317">.</span><span class="ident" id="8545318">Bad</span><span class="op" id="8545321">,</span>&nbsp;<span class="comment" id="8545323">//&nbsp;not&nbsp;in&nbsp;a&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8545343">&#34;fmt&#34;</span><span class="op" id="8545348">:</span>&nbsp;<span class="ident" id="8545350">ast</span><span class="op" id="8545353">.</span><span class="ident" id="8545354">Bad</span><span class="op" id="8545357">,</span>&nbsp;<span class="comment" id="8545359">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8545381">&#34;pi&#34;</span><span class="op" id="8545385">:</span>&nbsp;&nbsp;<span class="ident" id="8545388">ast</span><span class="op" id="8545391">.</span><span class="ident" id="8545392">Con</span><span class="op" id="8545395">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8545399">&#34;T&#34;</span><span class="op" id="8545402">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8545406">ast</span><span class="op" id="8545409">.</span><span class="ident" id="8545410">Typ</span><span class="op" id="8545413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8545417">&#34;x&#34;</span><span class="op" id="8545420">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8545424">ast</span><span class="op" id="8545427">.</span><span class="ident" id="8545428">Var</span><span class="op" id="8545431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8545435">&#34;int&#34;</span><span class="op" id="8545440">:</span>&nbsp;<span class="ident" id="8545442">ast</span><span class="op" id="8545445">.</span><span class="ident" id="8545446">Bad</span><span class="op" id="8545449">,</span>&nbsp;<span class="comment" id="8545451">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8545473">&#34;f&#34;</span><span class="op" id="8545476">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8545480">ast</span><span class="op" id="8545483">.</span><span class="ident" id="8545484">Fun</span><span class="op" id="8545487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8545491">&#34;L&#34;</span><span class="op" id="8545494">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8545498">ast</span><span class="op" id="8545501">.</span><span class="ident" id="8545502">Lbl</span><span class="op" id="8545505">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8545508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8545512">ast</span><span class="op" id="8545515">.</span><span class="ident" id="8545516">Inspect</span><span class="op" id="8545523">(</span><span class="ident" id="8545524">f</span><span class="op" id="8545525">,</span>&nbsp;<span class="keyword" id="8545527">func</span><span class="op" id="8545531">(</span><span class="ident" id="8545532">n</span>&nbsp;<span class="ident" id="8545534">ast</span><span class="op" id="8545537">.</span><span class="ident" id="8545538">Node</span><span class="op" id="8545542">)</span>&nbsp;<span class="builtintype" id="8545544">bool</span>&nbsp;<span class="op" id="8545549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8545553">if</span>&nbsp;<span class="ident" id="8545556">ident</span><span class="op" id="8545561">,</span>&nbsp;<span class="ident" id="8545563">ok</span>&nbsp;<span class="op" id="8545566">:=</span>&nbsp;<span class="ident" id="8545569">n</span><span class="op" id="8545570">.</span><span class="op" id="8545571">(</span><span class="op" id="8545572">*</span><span class="ident" id="8545573">ast</span><span class="op" id="8545576">.</span><span class="ident" id="8545577">Ident</span><span class="op" id="8545582">)</span><span class="op" id="8545583">;</span>&nbsp;<span class="ident" id="8545585">ok</span>&nbsp;<span class="op" id="8545588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8545593">obj</span>&nbsp;<span class="op" id="8545597">:=</span>&nbsp;<span class="ident" id="8545600">ident</span><span class="op" id="8545605">.</span><span class="ident" id="8545606">Obj</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8545613">if</span>&nbsp;<span class="ident" id="8545616">obj</span>&nbsp;<span class="op" id="8545620">==</span>&nbsp;<span class="builtintype" id="8545623">nil</span>&nbsp;<span class="op" id="8545627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8545633">if</span>&nbsp;<span class="ident" id="8545636">objects</span><span class="op" id="8545643">[</span><span class="ident" id="8545644">ident</span><span class="op" id="8545649">.</span><span class="ident" id="8545650">Name</span><span class="op" id="8545654">]</span>&nbsp;<span class="op" id="8545656">!=</span>&nbsp;<span class="ident" id="8545659">ast</span><span class="op" id="8545662">.</span><span class="ident" id="8545663">Bad</span>&nbsp;<span class="op" id="8545667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8545674">t</span><span class="op" id="8545675">.</span><span class="ident" id="8545676">Errorf</span><span class="op" id="8545682">(</span><span class="string" id="8545683">&#34;no&nbsp;object&nbsp;for&nbsp;%s&#34;</span><span class="op" id="8545701">,</span>&nbsp;<span class="ident" id="8545703">ident</span><span class="op" id="8545708">.</span><span class="ident" id="8545709">Name</span><span class="op" id="8545713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8545719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8545725">return</span>&nbsp;<span class="builtintype" id="8545732">true</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8545740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8545745">if</span>&nbsp;<span class="ident" id="8545748">obj</span><span class="op" id="8545751">.</span><span class="ident" id="8545752">Name</span>&nbsp;<span class="op" id="8545757">!=</span>&nbsp;<span class="ident" id="8545760">ident</span><span class="op" id="8545765">.</span><span class="ident" id="8545766">Name</span>&nbsp;<span class="op" id="8545771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8545777">t</span><span class="op" id="8545778">.</span><span class="ident" id="8545779">Errorf</span><span class="op" id="8545785">(</span><span class="string" id="8545786">&#34;names&nbsp;don&#39;t&nbsp;match:&nbsp;obj.Name&nbsp;=&nbsp;%s,&nbsp;ident.Name&nbsp;=&nbsp;%s&#34;</span><span class="op" id="8545837">,</span>&nbsp;<span class="ident" id="8545839">obj</span><span class="op" id="8545842">.</span><span class="ident" id="8545843">Name</span><span class="op" id="8545847">,</span>&nbsp;<span class="ident" id="8545849">ident</span><span class="op" id="8545854">.</span><span class="ident" id="8545855">Name</span><span class="op" id="8545859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8545864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8545869">kind</span>&nbsp;<span class="op" id="8545874">:=</span>&nbsp;<span class="ident" id="8545877">objects</span><span class="op" id="8545884">[</span><span class="ident" id="8545885">ident</span><span class="op" id="8545890">.</span><span class="ident" id="8545891">Name</span><span class="op" id="8545895">]</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8545900">if</span>&nbsp;<span class="ident" id="8545903">obj</span><span class="op" id="8545906">.</span><span class="ident" id="8545907">Kind</span>&nbsp;<span class="op" id="8545912">!=</span>&nbsp;<span class="ident" id="8545915">kind</span>&nbsp;<span class="op" id="8545920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8545926">t</span><span class="op" id="8545927">.</span><span class="ident" id="8545928">Errorf</span><span class="op" id="8545934">(</span><span class="string" id="8545935">&#34;%s:&nbsp;obj.Kind&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8545963">,</span>&nbsp;<span class="ident" id="8545965">ident</span><span class="op" id="8545970">.</span><span class="ident" id="8545971">Name</span><span class="op" id="8545975">,</span>&nbsp;<span class="ident" id="8545977">obj</span><span class="op" id="8545980">.</span><span class="ident" id="8545981">Kind</span><span class="op" id="8545985">,</span>&nbsp;<span class="ident" id="8545987">kind</span><span class="op" id="8545991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8545996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8546000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8546004">return</span>&nbsp;<span class="builtintype" id="8546011">true</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8546017">}</span><span class="op" id="8546018">)</span><br>
<span class="lineno"></span><span class="op" id="8546020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8546023">func</span>&nbsp;<span class="ident" id="8546028">TestUnresolved</span><span class="op" id="8546042">(</span><span class="ident" id="8546043">t</span>&nbsp;<span class="op" id="8546045">*</span><span class="ident" id="8546046">testing</span><span class="op" id="8546053">.</span><span class="ident" id="8546054">T</span><span class="op" id="8546055">)</span>&nbsp;<span class="op" id="8546057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8546060">f</span><span class="op" id="8546061">,</span>&nbsp;<span class="ident" id="8546063">err</span>&nbsp;<span class="op" id="8546067">:=</span>&nbsp;<span class="ident" id="8546070">ParseFile</span><span class="op" id="8546079">(</span><span class="ident" id="8546080">fset</span><span class="op" id="8546084">,</span>&nbsp;<span class="string" id="8546086">&#34;&#34;</span><span class="op" id="8546088">,</span>&nbsp;<span class="string" id="8546090">`<br>
<span class="lineno">225</span>package&nbsp;p<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1a(int)<br>
<span class="lineno"></span>func&nbsp;f2a(byte,&nbsp;int,&nbsp;float)<br>
<span class="lineno"></span>func&nbsp;f3a(a,&nbsp;b&nbsp;int,&nbsp;c&nbsp;float)<br>
<span class="lineno">230</span>func&nbsp;f4a(...complex)<br>
<span class="lineno"></span>func&nbsp;f5a(a&nbsp;s1a,&nbsp;b&nbsp;...complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1b(*int)<br>
<span class="lineno"></span>func&nbsp;f2b([]byte,&nbsp;(int),&nbsp;*float)<br>
<span class="lineno">235</span>func&nbsp;f3b(a,&nbsp;b&nbsp;*int,&nbsp;c&nbsp;[]float)<br>
<span class="lineno"></span>func&nbsp;f4b(...*complex)<br>
<span class="lineno"></span>func&nbsp;f5b(a&nbsp;s1a,&nbsp;b&nbsp;...[]complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1a&nbsp;struct&nbsp;{&nbsp;int&nbsp;}<br>
<span class="lineno">240</span>type&nbsp;s2a&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;s1a&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s3a&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;int;&nbsp;c&nbsp;float&nbsp;}<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1b&nbsp;struct&nbsp;{&nbsp;*int&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s2b&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;*float&nbsp;}<br>
<span class="lineno">245</span>type&nbsp;s3b&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;*s3b;&nbsp;c&nbsp;[]float&nbsp;}<br>
<span class="lineno"></span>`</span><span class="op" id="8546568">,</span>&nbsp;<span class="num" id="8546570">0</span><span class="op" id="8546571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8546574">if</span>&nbsp;<span class="ident" id="8546577">err</span>&nbsp;<span class="op" id="8546581">!=</span>&nbsp;<span class="builtintype" id="8546584">nil</span>&nbsp;<span class="op" id="8546588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8546592">t</span><span class="op" id="8546593">.</span><span class="ident" id="8546594">Fatal</span><span class="op" id="8546599">(</span><span class="ident" id="8546600">err</span><span class="op" id="8546603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8546606">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8546610">want</span>&nbsp;<span class="op" id="8546615">:=</span>&nbsp;<span class="string" id="8546618">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8546625">+</span>&nbsp;<span class="comment" id="8546627">//&nbsp;f1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546636">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8546654">+</span>&nbsp;<span class="comment" id="8546656">//&nbsp;f2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546665">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8546678">+</span>&nbsp;<span class="comment" id="8546680">//&nbsp;f3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546689">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8546700">+</span>&nbsp;<span class="comment" id="8546702">//&nbsp;f4a</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546711">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8546722">+</span>&nbsp;<span class="comment" id="8546724">//&nbsp;f5a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8546733">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546738">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8546745">+</span>&nbsp;<span class="comment" id="8546747">//&nbsp;f1b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546756">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8546774">+</span>&nbsp;<span class="comment" id="8546776">//&nbsp;f2b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546785">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8546798">+</span>&nbsp;<span class="comment" id="8546800">//&nbsp;f3b</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546809">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8546820">+</span>&nbsp;<span class="comment" id="8546822">//&nbsp;f4b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546831">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8546842">+</span>&nbsp;<span class="comment" id="8546844">//&nbsp;f5b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8546853">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546858">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8546865">+</span>&nbsp;<span class="comment" id="8546867">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546876">&#34;byte&nbsp;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8546888">+</span>&nbsp;<span class="comment" id="8546890">//&nbsp;s2a</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546899">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8546912">+</span>&nbsp;<span class="comment" id="8546914">//&nbsp;s3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8546923">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546928">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8546935">+</span>&nbsp;<span class="comment" id="8546937">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546946">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8546964">+</span>&nbsp;<span class="comment" id="8546966">//&nbsp;s2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8546975">&#34;float&nbsp;&#34;</span>&nbsp;<span class="comment" id="8546984">//&nbsp;s3a</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8546993">//&nbsp;collect&nbsp;unresolved&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8547028">var</span>&nbsp;<span class="ident" id="8547032">buf</span>&nbsp;<span class="ident" id="8547036">bytes</span><span class="op" id="8547041">.</span><span class="ident" id="8547042">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8547050">for</span>&nbsp;<span class="ident" id="8547054">_</span><span class="op" id="8547055">,</span>&nbsp;<span class="ident" id="8547057">u</span>&nbsp;<span class="op" id="8547059">:=</span>&nbsp;<span class="keyword" id="8547062">range</span>&nbsp;<span class="ident" id="8547068">f</span><span class="op" id="8547069">.</span><span class="ident" id="8547070">Unresolved</span>&nbsp;<span class="op" id="8547081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8547085">buf</span><span class="op" id="8547088">.</span><span class="ident" id="8547089">WriteString</span><span class="op" id="8547100">(</span><span class="ident" id="8547101">u</span><span class="op" id="8547102">.</span><span class="ident" id="8547103">Name</span><span class="op" id="8547107">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8547111">buf</span><span class="op" id="8547114">.</span><span class="ident" id="8547115">WriteByte</span><span class="op" id="8547124">(</span><span class="string" id="8547125">&#39;&nbsp;&#39;</span><span class="op" id="8547128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8547131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8547134">got</span>&nbsp;<span class="op" id="8547138">:=</span>&nbsp;<span class="ident" id="8547141">buf</span><span class="op" id="8547144">.</span><span class="ident" id="8547145">String</span><span class="op" id="8547151">(</span><span class="op" id="8547152">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8547156">if</span>&nbsp;<span class="ident" id="8547159">got</span>&nbsp;<span class="op" id="8547163">!=</span>&nbsp;<span class="ident" id="8547166">want</span>&nbsp;<span class="op" id="8547171">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8547175">t</span><span class="op" id="8547176">.</span><span class="ident" id="8547177">Errorf</span><span class="op" id="8547183">(</span><span class="string" id="8547184">&#34;\ngot:&nbsp;&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="8547206">,</span>&nbsp;<span class="ident" id="8547208">got</span><span class="op" id="8547211">,</span>&nbsp;<span class="ident" id="8547213">want</span><span class="op" id="8547217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8547220">}</span><br>
<span class="lineno"></span><span class="op" id="8547222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8547225">var</span>&nbsp;<span class="ident" id="8547229">imports</span>&nbsp;<span class="op" id="8547237">=</span>&nbsp;<span class="keyword" id="8547239">map</span><span class="op" id="8547242">[</span><span class="builtintype" id="8547243">string</span><span class="op" id="8547249">]</span><span class="builtintype" id="8547250">bool</span><span class="op" id="8547254">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547257">`&#34;a&#34;`</span><span class="op" id="8547262">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547271">true</span><span class="op" id="8547275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547278">&#34;`a`&#34;</span><span class="op" id="8547283">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547292">true</span><span class="op" id="8547296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547299">`&#34;a/b&#34;`</span><span class="op" id="8547306">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547313">true</span><span class="op" id="8547317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547320">`&#34;a.b&#34;`</span><span class="op" id="8547327">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547334">true</span><span class="op" id="8547338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547341">`&#34;m\x61th&#34;`</span><span class="op" id="8547352">:</span>&nbsp;&nbsp;<span class="builtintype" id="8547355">true</span><span class="op" id="8547359">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547362">`&#34;greek/αβ&#34;`</span><span class="op" id="8547376">:</span>&nbsp;<span class="builtintype" id="8547378">true</span><span class="op" id="8547382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547385">`&#34;&#34;`</span><span class="op" id="8547389">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547399">false</span><span class="op" id="8547404">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8547408">//&nbsp;Each&nbsp;of&nbsp;these&nbsp;pairs&nbsp;tests&nbsp;both&nbsp;``&nbsp;vs&nbsp;&#34;&#34;&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8547460">//&nbsp;and&nbsp;also&nbsp;use&nbsp;of&nbsp;invalid&nbsp;characters&nbsp;spelled&nbsp;out&nbsp;as</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8547514">//&nbsp;escape&nbsp;sequences&nbsp;and&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8547557">//&nbsp;For&nbsp;example&nbsp;`&#34;\x00&#34;`&nbsp;tests&nbsp;import&nbsp;&#34;\x00&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8547602">//&nbsp;while&nbsp;&#34;`\x00`&#34;&nbsp;tests&nbsp;import&nbsp;`&lt;actual-NUL-byte&gt;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547655">`&#34;\x00&#34;`</span><span class="op" id="8547663">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547669">false</span><span class="op" id="8547674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547677">&#34;`\x00`&#34;</span><span class="op" id="8547685">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547691">false</span><span class="op" id="8547696">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547699">`&#34;\x7f&#34;`</span><span class="op" id="8547707">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547713">false</span><span class="op" id="8547718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547721">&#34;`\x7f`&#34;</span><span class="op" id="8547729">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547735">false</span><span class="op" id="8547740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547743">`&#34;a!&#34;`</span><span class="op" id="8547749">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547757">false</span><span class="op" id="8547762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547765">&#34;`a!`&#34;</span><span class="op" id="8547771">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547779">false</span><span class="op" id="8547784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547787">`&#34;a&nbsp;b&#34;`</span><span class="op" id="8547794">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547801">false</span><span class="op" id="8547806">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547809">&#34;`a&nbsp;b`&#34;</span><span class="op" id="8547816">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547823">false</span><span class="op" id="8547828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547831">`&#34;a\\b&#34;`</span><span class="op" id="8547839">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547845">false</span><span class="op" id="8547850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547853">&#34;`a\\b`&#34;</span><span class="op" id="8547861">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547867">false</span><span class="op" id="8547872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547875">&#34;\&#34;`a`\&#34;&#34;</span><span class="op" id="8547884">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547889">false</span><span class="op" id="8547894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547897">&#34;`\&#34;a\&#34;`&#34;</span><span class="op" id="8547906">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547911">false</span><span class="op" id="8547916">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547919">`&#34;\x80\x80&#34;`</span><span class="op" id="8547931">:</span>&nbsp;<span class="builtintype" id="8547933">false</span><span class="op" id="8547938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547941">&#34;`\x80\x80`&#34;</span><span class="op" id="8547953">:</span>&nbsp;<span class="builtintype" id="8547955">false</span><span class="op" id="8547960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547963">`&#34;\xFFFD&#34;`</span><span class="op" id="8547973">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547977">false</span><span class="op" id="8547982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8547985">&#34;`\xFFFD`&#34;</span><span class="op" id="8547995">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8547999">false</span><span class="op" id="8548004">,</span><br>
<span class="lineno"></span><span class="op" id="8548006">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="8548009">func</span>&nbsp;<span class="ident" id="8548014">TestImports</span><span class="op" id="8548025">(</span><span class="ident" id="8548026">t</span>&nbsp;<span class="op" id="8548028">*</span><span class="ident" id="8548029">testing</span><span class="op" id="8548036">.</span><span class="ident" id="8548037">T</span><span class="op" id="8548038">)</span>&nbsp;<span class="op" id="8548040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8548043">for</span>&nbsp;<span class="ident" id="8548047">path</span><span class="op" id="8548051">,</span>&nbsp;<span class="ident" id="8548053">isValid</span>&nbsp;<span class="op" id="8548061">:=</span>&nbsp;<span class="keyword" id="8548064">range</span>&nbsp;<span class="ident" id="8548070">imports</span>&nbsp;<span class="op" id="8548078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8548082">src</span>&nbsp;<span class="op" id="8548086">:=</span>&nbsp;<span class="ident" id="8548089">fmt</span><span class="op" id="8548092">.</span><span class="ident" id="8548093">Sprintf</span><span class="op" id="8548100">(</span><span class="string" id="8548101">&#34;package&nbsp;p;&nbsp;import&nbsp;%s&#34;</span><span class="op" id="8548123">,</span>&nbsp;<span class="ident" id="8548125">path</span><span class="op" id="8548129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8548133">_</span><span class="op" id="8548134">,</span>&nbsp;<span class="ident" id="8548136">err</span>&nbsp;<span class="op" id="8548140">:=</span>&nbsp;<span class="ident" id="8548143">ParseFile</span><span class="op" id="8548152">(</span><span class="ident" id="8548153">fset</span><span class="op" id="8548157">,</span>&nbsp;<span class="string" id="8548159">&#34;&#34;</span><span class="op" id="8548161">,</span>&nbsp;<span class="ident" id="8548163">src</span><span class="op" id="8548166">,</span>&nbsp;<span class="num" id="8548168">0</span><span class="op" id="8548169">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8548173">switch</span>&nbsp;<span class="op" id="8548180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8548184">case</span>&nbsp;<span class="ident" id="8548189">err</span>&nbsp;<span class="op" id="8548193">!=</span>&nbsp;<span class="builtintype" id="8548196">nil</span>&nbsp;<span class="op" id="8548200">&amp;&amp;</span>&nbsp;<span class="ident" id="8548203">isValid</span><span class="op" id="8548210">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8548215">t</span><span class="op" id="8548216">.</span><span class="ident" id="8548217">Errorf</span><span class="op" id="8548223">(</span><span class="string" id="8548224">&#34;ParseFile(%s):&nbsp;got&nbsp;%v;&nbsp;expected&nbsp;no&nbsp;error&#34;</span><span class="op" id="8548266">,</span>&nbsp;<span class="ident" id="8548268">src</span><span class="op" id="8548271">,</span>&nbsp;<span class="ident" id="8548273">err</span><span class="op" id="8548276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8548280">case</span>&nbsp;<span class="ident" id="8548285">err</span>&nbsp;<span class="op" id="8548289">==</span>&nbsp;<span class="builtintype" id="8548292">nil</span>&nbsp;<span class="op" id="8548296">&amp;&amp;</span>&nbsp;<span class="op" id="8548299">!</span><span class="ident" id="8548300">isValid</span><span class="op" id="8548307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8548312">t</span><span class="op" id="8548313">.</span><span class="ident" id="8548314">Errorf</span><span class="op" id="8548320">(</span><span class="string" id="8548321">&#34;ParseFile(%s):&nbsp;got&nbsp;no&nbsp;error;&nbsp;expected&nbsp;one&#34;</span><span class="op" id="8548364">,</span>&nbsp;<span class="ident" id="8548366">src</span><span class="op" id="8548369">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8548373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8548376">}</span><br>
<span class="lineno"></span><span class="op" id="8548378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8548381">func</span>&nbsp;<span class="ident" id="8548386">TestCommentGroups</span><span class="op" id="8548403">(</span><span class="ident" id="8548404">t</span>&nbsp;<span class="op" id="8548406">*</span><span class="ident" id="8548407">testing</span><span class="op" id="8548414">.</span><span class="ident" id="8548415">T</span><span class="op" id="8548416">)</span>&nbsp;<span class="op" id="8548418">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8548421">f</span><span class="op" id="8548422">,</span>&nbsp;<span class="ident" id="8548424">err</span>&nbsp;<span class="op" id="8548428">:=</span>&nbsp;<span class="ident" id="8548431">ParseFile</span><span class="op" id="8548440">(</span><span class="ident" id="8548441">fset</span><span class="op" id="8548445">,</span>&nbsp;<span class="string" id="8548447">&#34;&#34;</span><span class="op" id="8548449">,</span>&nbsp;<span class="string" id="8548451">`<br>
<span class="lineno"></span>package&nbsp;p&nbsp;/*&nbsp;1a&nbsp;*/&nbsp;/*&nbsp;1b&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;1c&nbsp;*/&nbsp;//&nbsp;1d<br>
<span class="lineno"></span>/*&nbsp;2a<br>
<span class="lineno"></span>*/<br>
<span class="lineno"></span>//&nbsp;2b<br>
<span class="lineno">335</span>const&nbsp;pi&nbsp;=&nbsp;3.1415<br>
<span class="lineno"></span>/*&nbsp;3a&nbsp;*/&nbsp;//&nbsp;3b<br>
<span class="lineno"></span>/*&nbsp;3c&nbsp;*/&nbsp;const&nbsp;e&nbsp;=&nbsp;2.7182<br>
<span class="lineno"></span><br>
<span class="lineno"></span>//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139<br>
<span class="lineno">340</span>func&nbsp;ExampleCount()&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(strings.Count(&#34;cheese&#34;,&nbsp;&#34;e&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(strings.Count(&#34;five&#34;,&nbsp;&#34;&#34;))&nbsp;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Output:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;3<br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;5<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><span class="op" id="8548763">,</span>&nbsp;<span class="ident" id="8548765">ParseComments</span><span class="op" id="8548778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8548781">if</span>&nbsp;<span class="ident" id="8548784">err</span>&nbsp;<span class="op" id="8548788">!=</span>&nbsp;<span class="builtintype" id="8548791">nil</span>&nbsp;<span class="op" id="8548795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8548799">t</span><span class="op" id="8548800">.</span><span class="ident" id="8548801">Fatal</span><span class="op" id="8548806">(</span><span class="ident" id="8548807">err</span><span class="op" id="8548810">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8548813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8548816">expected</span>&nbsp;<span class="op" id="8548825">:=</span>&nbsp;<span class="op" id="8548828">[</span><span class="op" id="8548829">]</span><span class="op" id="8548830">[</span><span class="op" id="8548831">]</span><span class="builtintype" id="8548832">string</span><span class="op" id="8548838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8548842">{</span><span class="string" id="8548843">&#34;/*&nbsp;1a&nbsp;*/&#34;</span><span class="op" id="8548853">,</span>&nbsp;<span class="string" id="8548855">&#34;/*&nbsp;1b&nbsp;*/&#34;</span><span class="op" id="8548865">,</span>&nbsp;<span class="string" id="8548867">&#34;/*&nbsp;1c&nbsp;*/&#34;</span><span class="op" id="8548877">,</span>&nbsp;<span class="string" id="8548879">&#34;//&nbsp;1d&#34;</span><span class="op" id="8548886">}</span><span class="op" id="8548887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8548891">{</span><span class="string" id="8548892">&#34;/*&nbsp;2a\n*/&#34;</span><span class="op" id="8548903">,</span>&nbsp;<span class="string" id="8548905">&#34;//&nbsp;2b&#34;</span><span class="op" id="8548912">}</span><span class="op" id="8548913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8548917">{</span><span class="string" id="8548918">&#34;/*&nbsp;3a&nbsp;*/&#34;</span><span class="op" id="8548928">,</span>&nbsp;<span class="string" id="8548930">&#34;//&nbsp;3b&#34;</span><span class="op" id="8548937">,</span>&nbsp;<span class="string" id="8548939">&#34;/*&nbsp;3c&nbsp;*/&#34;</span><span class="op" id="8548949">}</span><span class="op" id="8548950">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8548954">{</span><span class="string" id="8548955">&#34;//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139&#34;</span><span class="op" id="8548983">}</span><span class="op" id="8548984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8548988">{</span><span class="string" id="8548989">&#34;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune&#34;</span><span class="op" id="8549018">}</span><span class="op" id="8549019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8549023">{</span><span class="string" id="8549024">&#34;//&nbsp;Output:&#34;</span><span class="op" id="8549036">,</span>&nbsp;<span class="string" id="8549038">&#34;//&nbsp;3&#34;</span><span class="op" id="8549044">,</span>&nbsp;<span class="string" id="8549046">&#34;//&nbsp;5&#34;</span><span class="op" id="8549052">}</span><span class="op" id="8549053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8549056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549059">if</span>&nbsp;<span class="builtinfunc" id="8549062">len</span><span class="op" id="8549065">(</span><span class="ident" id="8549066">f</span><span class="op" id="8549067">.</span><span class="ident" id="8549068">Comments</span><span class="op" id="8549076">)</span>&nbsp;<span class="op" id="8549078">!=</span>&nbsp;<span class="builtinfunc" id="8549081">len</span><span class="op" id="8549084">(</span><span class="ident" id="8549085">expected</span><span class="op" id="8549093">)</span>&nbsp;<span class="op" id="8549095">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8549099">t</span><span class="op" id="8549100">.</span><span class="ident" id="8549101">Fatalf</span><span class="op" id="8549107">(</span><span class="string" id="8549108">&#34;got&nbsp;%d&nbsp;comment&nbsp;groups;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8549144">,</span>&nbsp;<span class="builtinfunc" id="8549146">len</span><span class="op" id="8549149">(</span><span class="ident" id="8549150">f</span><span class="op" id="8549151">.</span><span class="ident" id="8549152">Comments</span><span class="op" id="8549160">)</span><span class="op" id="8549161">,</span>&nbsp;<span class="builtinfunc" id="8549163">len</span><span class="op" id="8549166">(</span><span class="ident" id="8549167">expected</span><span class="op" id="8549175">)</span><span class="op" id="8549176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8549179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549182">for</span>&nbsp;<span class="ident" id="8549186">i</span><span class="op" id="8549187">,</span>&nbsp;<span class="ident" id="8549189">exp</span>&nbsp;<span class="op" id="8549193">:=</span>&nbsp;<span class="keyword" id="8549196">range</span>&nbsp;<span class="ident" id="8549202">expected</span>&nbsp;<span class="op" id="8549211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8549215">got</span>&nbsp;<span class="op" id="8549219">:=</span>&nbsp;<span class="ident" id="8549222">f</span><span class="op" id="8549223">.</span><span class="ident" id="8549224">Comments</span><span class="op" id="8549232">[</span><span class="ident" id="8549233">i</span><span class="op" id="8549234">]</span><span class="op" id="8549235">.</span><span class="ident" id="8549236">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549243">if</span>&nbsp;<span class="builtinfunc" id="8549246">len</span><span class="op" id="8549249">(</span><span class="ident" id="8549250">got</span><span class="op" id="8549253">)</span>&nbsp;<span class="op" id="8549255">!=</span>&nbsp;<span class="builtinfunc" id="8549258">len</span><span class="op" id="8549261">(</span><span class="ident" id="8549262">exp</span><span class="op" id="8549265">)</span>&nbsp;<span class="op" id="8549267">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8549272">t</span><span class="op" id="8549273">.</span><span class="ident" id="8549274">Errorf</span><span class="op" id="8549280">(</span><span class="string" id="8549281">&#34;got&nbsp;%d&nbsp;comments&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8549323">,</span>&nbsp;<span class="builtinfunc" id="8549325">len</span><span class="op" id="8549328">(</span><span class="ident" id="8549329">got</span><span class="op" id="8549332">)</span><span class="op" id="8549333">,</span>&nbsp;<span class="ident" id="8549335">i</span><span class="op" id="8549336">,</span>&nbsp;<span class="builtinfunc" id="8549338">len</span><span class="op" id="8549341">(</span><span class="ident" id="8549342">exp</span><span class="op" id="8549345">)</span><span class="op" id="8549346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549351">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8549362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549366">for</span>&nbsp;<span class="ident" id="8549370">j</span><span class="op" id="8549371">,</span>&nbsp;<span class="ident" id="8549373">exp</span>&nbsp;<span class="op" id="8549377">:=</span>&nbsp;<span class="keyword" id="8549380">range</span>&nbsp;<span class="ident" id="8549386">exp</span>&nbsp;<span class="op" id="8549390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8549395">got</span>&nbsp;<span class="op" id="8549399">:=</span>&nbsp;<span class="ident" id="8549402">got</span><span class="op" id="8549405">[</span><span class="ident" id="8549406">j</span><span class="op" id="8549407">]</span><span class="op" id="8549408">.</span><span class="ident" id="8549409">Text</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549417">if</span>&nbsp;<span class="ident" id="8549420">got</span>&nbsp;<span class="op" id="8549424">!=</span>&nbsp;<span class="ident" id="8549427">exp</span>&nbsp;<span class="op" id="8549431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8549437">t</span><span class="op" id="8549438">.</span><span class="ident" id="8549439">Errorf</span><span class="op" id="8549445">(</span><span class="string" id="8549446">&#34;got&nbsp;%q&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8549479">,</span>&nbsp;<span class="ident" id="8549481">got</span><span class="op" id="8549484">,</span>&nbsp;<span class="ident" id="8549486">i</span><span class="op" id="8549487">,</span>&nbsp;<span class="ident" id="8549489">exp</span><span class="op" id="8549492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8549497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8549501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8549504">}</span><br>
<span class="lineno">375</span><span class="op" id="8549506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8549509">func</span>&nbsp;<span class="ident" id="8549514">getField</span><span class="op" id="8549522">(</span><span class="ident" id="8549523">file</span>&nbsp;<span class="op" id="8549528">*</span><span class="ident" id="8549529">ast</span><span class="op" id="8549532">.</span><span class="ident" id="8549533">File</span><span class="op" id="8549537">,</span>&nbsp;<span class="ident" id="8549539">fieldname</span>&nbsp;<span class="builtintype" id="8549549">string</span><span class="op" id="8549555">)</span>&nbsp;<span class="op" id="8549557">*</span><span class="ident" id="8549558">ast</span><span class="op" id="8549561">.</span><span class="ident" id="8549562">Field</span>&nbsp;<span class="op" id="8549568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8549571">parts</span>&nbsp;<span class="op" id="8549577">:=</span>&nbsp;<span class="ident" id="8549580">strings</span><span class="op" id="8549587">.</span><span class="ident" id="8549588">Split</span><span class="op" id="8549593">(</span><span class="ident" id="8549594">fieldname</span><span class="op" id="8549603">,</span>&nbsp;<span class="string" id="8549605">&#34;.&#34;</span><span class="op" id="8549608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549611">for</span>&nbsp;<span class="ident" id="8549615">_</span><span class="op" id="8549616">,</span>&nbsp;<span class="ident" id="8549618">d</span>&nbsp;<span class="op" id="8549620">:=</span>&nbsp;<span class="keyword" id="8549623">range</span>&nbsp;<span class="ident" id="8549629">file</span><span class="op" id="8549633">.</span><span class="ident" id="8549634">Decls</span>&nbsp;<span class="op" id="8549640">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549644">if</span>&nbsp;<span class="ident" id="8549647">d</span><span class="op" id="8549648">,</span>&nbsp;<span class="ident" id="8549650">ok</span>&nbsp;<span class="op" id="8549653">:=</span>&nbsp;<span class="ident" id="8549656">d</span><span class="op" id="8549657">.</span><span class="op" id="8549658">(</span><span class="op" id="8549659">*</span><span class="ident" id="8549660">ast</span><span class="op" id="8549663">.</span><span class="ident" id="8549664">GenDecl</span><span class="op" id="8549671">)</span><span class="op" id="8549672">;</span>&nbsp;<span class="ident" id="8549674">ok</span>&nbsp;<span class="op" id="8549677">&amp;&amp;</span>&nbsp;<span class="ident" id="8549680">d</span><span class="op" id="8549681">.</span><span class="ident" id="8549682">Tok</span>&nbsp;<span class="op" id="8549686">==</span>&nbsp;<span class="ident" id="8549689">token</span><span class="op" id="8549694">.</span><span class="ident" id="8549695">TYPE</span>&nbsp;<span class="op" id="8549700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549705">for</span>&nbsp;<span class="ident" id="8549709">_</span><span class="op" id="8549710">,</span>&nbsp;<span class="ident" id="8549712">s</span>&nbsp;<span class="op" id="8549714">:=</span>&nbsp;<span class="keyword" id="8549717">range</span>&nbsp;<span class="ident" id="8549723">d</span><span class="op" id="8549724">.</span><span class="ident" id="8549725">Specs</span>&nbsp;<span class="op" id="8549731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549737">if</span>&nbsp;<span class="ident" id="8549740">s</span><span class="op" id="8549741">,</span>&nbsp;<span class="ident" id="8549743">ok</span>&nbsp;<span class="op" id="8549746">:=</span>&nbsp;<span class="ident" id="8549749">s</span><span class="op" id="8549750">.</span><span class="op" id="8549751">(</span><span class="op" id="8549752">*</span><span class="ident" id="8549753">ast</span><span class="op" id="8549756">.</span><span class="ident" id="8549757">TypeSpec</span><span class="op" id="8549765">)</span><span class="op" id="8549766">;</span>&nbsp;<span class="ident" id="8549768">ok</span>&nbsp;<span class="op" id="8549771">&amp;&amp;</span>&nbsp;<span class="ident" id="8549774">s</span><span class="op" id="8549775">.</span><span class="ident" id="8549776">Name</span><span class="op" id="8549780">.</span><span class="ident" id="8549781">Name</span>&nbsp;<span class="op" id="8549786">==</span>&nbsp;<span class="ident" id="8549789">parts</span><span class="op" id="8549794">[</span><span class="num" id="8549795">0</span><span class="op" id="8549796">]</span>&nbsp;<span class="op" id="8549798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549805">if</span>&nbsp;<span class="ident" id="8549808">s</span><span class="op" id="8549809">,</span>&nbsp;<span class="ident" id="8549811">ok</span>&nbsp;<span class="op" id="8549814">:=</span>&nbsp;<span class="ident" id="8549817">s</span><span class="op" id="8549818">.</span><span class="ident" id="8549819">Type</span><span class="op" id="8549823">.</span><span class="op" id="8549824">(</span><span class="op" id="8549825">*</span><span class="ident" id="8549826">ast</span><span class="op" id="8549829">.</span><span class="ident" id="8549830">StructType</span><span class="op" id="8549840">)</span><span class="op" id="8549841">;</span>&nbsp;<span class="ident" id="8549843">ok</span>&nbsp;<span class="op" id="8549846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549854">for</span>&nbsp;<span class="ident" id="8549858">_</span><span class="op" id="8549859">,</span>&nbsp;<span class="ident" id="8549861">f</span>&nbsp;<span class="op" id="8549863">:=</span>&nbsp;<span class="keyword" id="8549866">range</span>&nbsp;<span class="ident" id="8549872">s</span><span class="op" id="8549873">.</span><span class="ident" id="8549874">Fields</span><span class="op" id="8549880">.</span><span class="ident" id="8549881">List</span>&nbsp;<span class="op" id="8549886">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549895">for</span>&nbsp;<span class="ident" id="8549899">_</span><span class="op" id="8549900">,</span>&nbsp;<span class="ident" id="8549902">name</span>&nbsp;<span class="op" id="8549907">:=</span>&nbsp;<span class="keyword" id="8549910">range</span>&nbsp;<span class="ident" id="8549916">f</span><span class="op" id="8549917">.</span><span class="ident" id="8549918">Names</span>&nbsp;<span class="op" id="8549924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549934">if</span>&nbsp;<span class="ident" id="8549937">name</span><span class="op" id="8549941">.</span><span class="ident" id="8549942">Name</span>&nbsp;<span class="op" id="8549947">==</span>&nbsp;<span class="ident" id="8549950">parts</span><span class="op" id="8549955">[</span><span class="num" id="8549956">1</span><span class="op" id="8549957">]</span>&nbsp;<span class="op" id="8549959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8549970">return</span>&nbsp;<span class="ident" id="8549977">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8549987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8549996">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8550004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8550011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8550017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8550022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8550026">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8550029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8550032">return</span>&nbsp;<span class="builtintype" id="8550039">nil</span><br>
<span class="lineno"></span><span class="op" id="8550043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8550046">//&nbsp;Don&#39;t&nbsp;use&nbsp;ast.CommentGroup.Text()&nbsp;-&nbsp;we&nbsp;want&nbsp;to&nbsp;see&nbsp;exact&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">400</span><span class="keyword" id="8550120">func</span>&nbsp;<span class="ident" id="8550125">commentText</span><span class="op" id="8550136">(</span><span class="ident" id="8550137">c</span>&nbsp;<span class="op" id="8550139">*</span><span class="ident" id="8550140">ast</span><span class="op" id="8550143">.</span><span class="ident" id="8550144">CommentGroup</span><span class="op" id="8550156">)</span>&nbsp;<span class="builtintype" id="8550158">string</span>&nbsp;<span class="op" id="8550165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8550168">var</span>&nbsp;<span class="ident" id="8550172">buf</span>&nbsp;<span class="ident" id="8550176">bytes</span><span class="op" id="8550181">.</span><span class="ident" id="8550182">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8550190">if</span>&nbsp;<span class="ident" id="8550193">c</span>&nbsp;<span class="op" id="8550195">!=</span>&nbsp;<span class="builtintype" id="8550198">nil</span>&nbsp;<span class="op" id="8550202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8550206">for</span>&nbsp;<span class="ident" id="8550210">_</span><span class="op" id="8550211">,</span>&nbsp;<span class="ident" id="8550213">c</span>&nbsp;<span class="op" id="8550215">:=</span>&nbsp;<span class="keyword" id="8550218">range</span>&nbsp;<span class="ident" id="8550224">c</span><span class="op" id="8550225">.</span><span class="ident" id="8550226">List</span>&nbsp;<span class="op" id="8550231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8550236">buf</span><span class="op" id="8550239">.</span><span class="ident" id="8550240">WriteString</span><span class="op" id="8550251">(</span><span class="ident" id="8550252">c</span><span class="op" id="8550253">.</span><span class="ident" id="8550254">Text</span><span class="op" id="8550258">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8550262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8550265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8550268">return</span>&nbsp;<span class="ident" id="8550275">buf</span><span class="op" id="8550278">.</span><span class="ident" id="8550279">String</span><span class="op" id="8550285">(</span><span class="op" id="8550286">)</span><br>
<span class="lineno"></span><span class="op" id="8550288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="8550291">func</span>&nbsp;<span class="ident" id="8550296">checkFieldComments</span><span class="op" id="8550314">(</span><span class="ident" id="8550315">t</span>&nbsp;<span class="op" id="8550317">*</span><span class="ident" id="8550318">testing</span><span class="op" id="8550325">.</span><span class="ident" id="8550326">T</span><span class="op" id="8550327">,</span>&nbsp;<span class="ident" id="8550329">file</span>&nbsp;<span class="op" id="8550334">*</span><span class="ident" id="8550335">ast</span><span class="op" id="8550338">.</span><span class="ident" id="8550339">File</span><span class="op" id="8550343">,</span>&nbsp;<span class="ident" id="8550345">fieldname</span><span class="op" id="8550354">,</span>&nbsp;<span class="ident" id="8550356">lead</span><span class="op" id="8550360">,</span>&nbsp;<span class="ident" id="8550362">line</span>&nbsp;<span class="builtintype" id="8550367">string</span><span class="op" id="8550373">)</span>&nbsp;<span class="op" id="8550375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8550378">f</span>&nbsp;<span class="op" id="8550380">:=</span>&nbsp;<span class="ident" id="8550383">getField</span><span class="op" id="8550391">(</span><span class="ident" id="8550392">file</span><span class="op" id="8550396">,</span>&nbsp;<span class="ident" id="8550398">fieldname</span><span class="op" id="8550407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8550410">if</span>&nbsp;<span class="ident" id="8550413">f</span>&nbsp;<span class="op" id="8550415">==</span>&nbsp;<span class="builtintype" id="8550418">nil</span>&nbsp;<span class="op" id="8550422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8550426">t</span><span class="op" id="8550427">.</span><span class="ident" id="8550428">Fatalf</span><span class="op" id="8550434">(</span><span class="string" id="8550435">&#34;field&nbsp;not&nbsp;found:&nbsp;%s&#34;</span><span class="op" id="8550456">,</span>&nbsp;<span class="ident" id="8550458">fieldname</span><span class="op" id="8550467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8550470">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8550473">if</span>&nbsp;<span class="ident" id="8550476">got</span>&nbsp;<span class="op" id="8550480">:=</span>&nbsp;<span class="ident" id="8550483">commentText</span><span class="op" id="8550494">(</span><span class="ident" id="8550495">f</span><span class="op" id="8550496">.</span><span class="ident" id="8550497">Doc</span><span class="op" id="8550500">)</span><span class="op" id="8550501">;</span>&nbsp;<span class="ident" id="8550503">got</span>&nbsp;<span class="op" id="8550507">!=</span>&nbsp;<span class="ident" id="8550510">lead</span>&nbsp;<span class="op" id="8550515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8550519">t</span><span class="op" id="8550520">.</span><span class="ident" id="8550521">Errorf</span><span class="op" id="8550527">(</span><span class="string" id="8550528">&#34;got&nbsp;lead&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8550562">,</span>&nbsp;<span class="ident" id="8550564">got</span><span class="op" id="8550567">,</span>&nbsp;<span class="ident" id="8550569">lead</span><span class="op" id="8550573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8550576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8550579">if</span>&nbsp;<span class="ident" id="8550582">got</span>&nbsp;<span class="op" id="8550586">:=</span>&nbsp;<span class="ident" id="8550589">commentText</span><span class="op" id="8550600">(</span><span class="ident" id="8550601">f</span><span class="op" id="8550602">.</span><span class="ident" id="8550603">Comment</span><span class="op" id="8550610">)</span><span class="op" id="8550611">;</span>&nbsp;<span class="ident" id="8550613">got</span>&nbsp;<span class="op" id="8550617">!=</span>&nbsp;<span class="ident" id="8550620">line</span>&nbsp;<span class="op" id="8550625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8550629">t</span><span class="op" id="8550630">.</span><span class="ident" id="8550631">Errorf</span><span class="op" id="8550637">(</span><span class="string" id="8550638">&#34;got&nbsp;line&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8550672">,</span>&nbsp;<span class="ident" id="8550674">got</span><span class="op" id="8550677">,</span>&nbsp;<span class="ident" id="8550679">line</span><span class="op" id="8550683">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8550686">}</span><br>
<span class="lineno"></span><span class="op" id="8550688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8550691">func</span>&nbsp;<span class="ident" id="8550696">TestLeadAndLineComments</span><span class="op" id="8550719">(</span><span class="ident" id="8550720">t</span>&nbsp;<span class="op" id="8550722">*</span><span class="ident" id="8550723">testing</span><span class="op" id="8550730">.</span><span class="ident" id="8550731">T</span><span class="op" id="8550732">)</span>&nbsp;<span class="op" id="8550734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8550737">f</span><span class="op" id="8550738">,</span>&nbsp;<span class="ident" id="8550740">err</span>&nbsp;<span class="op" id="8550744">:=</span>&nbsp;<span class="ident" id="8550747">ParseFile</span><span class="op" id="8550756">(</span><span class="ident" id="8550757">fset</span><span class="op" id="8550761">,</span>&nbsp;<span class="string" id="8550763">&#34;&#34;</span><span class="op" id="8550765">,</span>&nbsp;<span class="string" id="8550767">`<br>
<span class="lineno">425</span>package&nbsp;p<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;F1&nbsp;int&nbsp;&nbsp;/*&nbsp;F1&nbsp;*/&nbsp;//&nbsp;line&nbsp;comment<br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;F2&nbsp;lead<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;F2&nbsp;int&nbsp;&nbsp;//&nbsp;F2&nbsp;line&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;f3&nbsp;lead&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;f3&nbsp;int&nbsp;&nbsp;//&nbsp;f3&nbsp;line&nbsp;comment<br>
<span class="lineno">435</span>}<br>
<span class="lineno"></span>`</span><span class="op" id="8550959">,</span>&nbsp;<span class="ident" id="8550961">ParseComments</span><span class="op" id="8550974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8550977">if</span>&nbsp;<span class="ident" id="8550980">err</span>&nbsp;<span class="op" id="8550984">!=</span>&nbsp;<span class="builtintype" id="8550987">nil</span>&nbsp;<span class="op" id="8550991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8550995">t</span><span class="op" id="8550996">.</span><span class="ident" id="8550997">Fatal</span><span class="op" id="8551002">(</span><span class="ident" id="8551003">err</span><span class="op" id="8551006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8551009">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8551012">checkFieldComments</span><span class="op" id="8551030">(</span><span class="ident" id="8551031">t</span><span class="op" id="8551032">,</span>&nbsp;<span class="ident" id="8551034">f</span><span class="op" id="8551035">,</span>&nbsp;<span class="string" id="8551037">&#34;T.F1&#34;</span><span class="op" id="8551043">,</span>&nbsp;<span class="string" id="8551045">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="8551070">,</span>&nbsp;<span class="string" id="8551072">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8551097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8551100">checkFieldComments</span><span class="op" id="8551118">(</span><span class="ident" id="8551119">t</span><span class="op" id="8551120">,</span>&nbsp;<span class="ident" id="8551122">f</span><span class="op" id="8551123">,</span>&nbsp;<span class="string" id="8551125">&#34;T.F2&#34;</span><span class="op" id="8551131">,</span>&nbsp;<span class="string" id="8551133">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="8551155">,</span>&nbsp;<span class="string" id="8551157">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8551177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8551180">checkFieldComments</span><span class="op" id="8551198">(</span><span class="ident" id="8551199">t</span><span class="op" id="8551200">,</span>&nbsp;<span class="ident" id="8551202">f</span><span class="op" id="8551203">,</span>&nbsp;<span class="string" id="8551205">&#34;T.f3&#34;</span><span class="op" id="8551211">,</span>&nbsp;<span class="string" id="8551213">&#34;//&nbsp;f3&nbsp;lead&nbsp;comment&#34;</span><span class="op" id="8551233">,</span>&nbsp;<span class="string" id="8551235">&#34;//&nbsp;f3&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8551255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8551258">ast</span><span class="op" id="8551261">.</span><span class="ident" id="8551262">FileExports</span><span class="op" id="8551273">(</span><span class="ident" id="8551274">f</span><span class="op" id="8551275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8551278">checkFieldComments</span><span class="op" id="8551296">(</span><span class="ident" id="8551297">t</span><span class="op" id="8551298">,</span>&nbsp;<span class="ident" id="8551300">f</span><span class="op" id="8551301">,</span>&nbsp;<span class="string" id="8551303">&#34;T.F1&#34;</span><span class="op" id="8551309">,</span>&nbsp;<span class="string" id="8551311">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="8551336">,</span>&nbsp;<span class="string" id="8551338">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8551363">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8551366">checkFieldComments</span><span class="op" id="8551384">(</span><span class="ident" id="8551385">t</span><span class="op" id="8551386">,</span>&nbsp;<span class="ident" id="8551388">f</span><span class="op" id="8551389">,</span>&nbsp;<span class="string" id="8551391">&#34;T.F2&#34;</span><span class="op" id="8551397">,</span>&nbsp;<span class="string" id="8551399">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="8551421">,</span>&nbsp;<span class="string" id="8551423">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8551443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8551446">if</span>&nbsp;<span class="ident" id="8551449">getField</span><span class="op" id="8551457">(</span><span class="ident" id="8551458">f</span><span class="op" id="8551459">,</span>&nbsp;<span class="string" id="8551461">&#34;T.f3&#34;</span><span class="op" id="8551467">)</span>&nbsp;<span class="op" id="8551469">!=</span>&nbsp;<span class="builtintype" id="8551472">nil</span>&nbsp;<span class="op" id="8551476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8551480">t</span><span class="op" id="8551481">.</span><span class="ident" id="8551482">Error</span><span class="op" id="8551487">(</span><span class="string" id="8551488">&#34;not&nbsp;expected&nbsp;to&nbsp;find&nbsp;T.f3&#34;</span><span class="op" id="8551515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8551518">}</span><br>
<span class="lineno"></span><span class="op" id="8551520">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
