<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html" class="current">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1714016">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1714071">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1714125">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1714176">package</span>&nbsp;<span class="ident" id="1714184">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1714193">import</span>&nbsp;<span class="string" id="1714200">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1714210">//&nbsp;NOTE:&nbsp;Func&nbsp;does&nbsp;not&nbsp;expose&nbsp;the&nbsp;actual&nbsp;unexported&nbsp;fields,&nbsp;because&nbsp;we&nbsp;return&nbsp;*Func</span><br>
<span class="lineno">10</span><span class="comment" id="1714294">//&nbsp;values&nbsp;to&nbsp;users,&nbsp;and&nbsp;we&nbsp;want&nbsp;to&nbsp;keep&nbsp;them&nbsp;from&nbsp;being&nbsp;able&nbsp;to&nbsp;overwrite&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="1714377">//&nbsp;with&nbsp;(say)&nbsp;*f&nbsp;=&nbsp;Func{}.</span><br>
<span class="lineno"></span><span class="comment" id="1714404">//&nbsp;All&nbsp;code&nbsp;operating&nbsp;on&nbsp;a&nbsp;*Func&nbsp;must&nbsp;call&nbsp;raw&nbsp;to&nbsp;get&nbsp;the&nbsp;*_func&nbsp;instead.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1714479">//&nbsp;A&nbsp;Func&nbsp;represents&nbsp;a&nbsp;Go&nbsp;function&nbsp;in&nbsp;the&nbsp;running&nbsp;binary.</span><br>
<span class="lineno">15</span><span class="keyword" id="1714537">type</span>&nbsp;<span class="ident" id="1714542">Func</span>&nbsp;<span class="keyword" id="1714547">struct</span>&nbsp;<span class="op" id="1714554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714557">opaque</span>&nbsp;<span class="keyword" id="1714564">struct</span><span class="op" id="1714570">{</span><span class="op" id="1714571">}</span>&nbsp;<span class="comment" id="1714573">//&nbsp;unexported&nbsp;field&nbsp;to&nbsp;disallow&nbsp;conversions</span><br>
<span class="lineno"></span><span class="op" id="1714617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1714620">func</span>&nbsp;<span class="op" id="1714625">(</span><span class="ident" id="1714626">f</span>&nbsp;<span class="op" id="1714628">*</span><span class="ident" id="1714629">Func</span><span class="op" id="1714633">)</span>&nbsp;<span class="ident" id="1714635">raw</span><span class="op" id="1714638">(</span><span class="op" id="1714639">)</span>&nbsp;<span class="op" id="1714641">*</span><span class="ident" id="1714642">_func</span>&nbsp;<span class="op" id="1714648">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1714651">return</span>&nbsp;<span class="op" id="1714658">(</span><span class="op" id="1714659">*</span><span class="ident" id="1714660">_func</span><span class="op" id="1714665">)</span><span class="op" id="1714666">(</span><span class="ident" id="1714667">unsafe</span><span class="op" id="1714673">.</span><span class="ident" id="1714674">Pointer</span><span class="op" id="1714681">(</span><span class="ident" id="1714682">f</span><span class="op" id="1714683">)</span><span class="op" id="1714684">)</span><br>
<span class="lineno"></span><span class="op" id="1714686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1714689">//&nbsp;funcdata.h</span><br>
<span class="lineno"></span><span class="keyword" id="1714703">const</span>&nbsp;<span class="op" id="1714709">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714712">_PCDATA_ArgSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1714740">=</span>&nbsp;<span class="num" id="1714742">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714745">_PCDATA_StackMapIndex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1714773">=</span>&nbsp;<span class="num" id="1714775">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714778">_FUNCDATA_ArgsPointerMaps</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1714806">=</span>&nbsp;<span class="num" id="1714808">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714811">_FUNCDATA_LocalsPointerMaps</span>&nbsp;<span class="op" id="1714839">=</span>&nbsp;<span class="num" id="1714841">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714844">_FUNCDATA_DeadValueMaps</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1714872">=</span>&nbsp;<span class="num" id="1714874">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714877">_ArgsSizeUnknown</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1714905">=</span>&nbsp;<span class="op" id="1714907">-</span><span class="num" id="1714908">0x80000000</span><br>
<span class="lineno"></span><span class="op" id="1714919">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1714922">var</span>&nbsp;<span class="op" id="1714926">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714929">pclntable</span>&nbsp;<span class="op" id="1714939">[</span><span class="op" id="1714940">]</span><span class="builtintype" id="1714941">byte</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714947">ftab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1714957">[</span><span class="op" id="1714958">]</span><span class="ident" id="1714959">functab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714968">filetab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1714978">[</span><span class="op" id="1714979">]</span><span class="builtintype" id="1714980">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1714989">pclntab</span><span class="op" id="1714996">,</span>&nbsp;<span class="ident" id="1714998">epclntab</span>&nbsp;<span class="keyword" id="1715007">struct</span><span class="op" id="1715013">{</span><span class="op" id="1715014">}</span>&nbsp;<span class="comment" id="1715016">//&nbsp;linker&nbsp;symbols</span><br>
<span class="lineno"></span><span class="op" id="1715034">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1715037">type</span>&nbsp;<span class="ident" id="1715042">functab</span>&nbsp;<span class="keyword" id="1715050">struct</span>&nbsp;<span class="op" id="1715057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715060">entry</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1715068">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715077">funcoff</span>&nbsp;<span class="builtintype" id="1715085">uintptr</span><br>
<span class="lineno"></span><span class="op" id="1715093">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="1715096">func</span>&nbsp;<span class="ident" id="1715101">symtabinit</span><span class="op" id="1715111">(</span><span class="op" id="1715112">)</span>&nbsp;<span class="op" id="1715114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1715117">//&nbsp;See&nbsp;golang.org/s/go12symtab&nbsp;for&nbsp;header:&nbsp;0xfffffffb,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1715173">//&nbsp;two&nbsp;zero&nbsp;bytes,&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;PC&nbsp;quantum,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1715223">//&nbsp;and&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;pointer&nbsp;width&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715273">pcln</span>&nbsp;<span class="op" id="1715278">:=</span>&nbsp;<span class="op" id="1715281">(</span><span class="op" id="1715282">*</span><span class="op" id="1715283">[</span><span class="num" id="1715284">8</span><span class="op" id="1715285">]</span><span class="builtintype" id="1715286">byte</span><span class="op" id="1715290">)</span><span class="op" id="1715291">(</span><span class="ident" id="1715292">unsafe</span><span class="op" id="1715298">.</span><span class="ident" id="1715299">Pointer</span><span class="op" id="1715306">(</span><span class="op" id="1715307">&amp;</span><span class="ident" id="1715308">pclntab</span><span class="op" id="1715315">)</span><span class="op" id="1715316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715319">pcln32</span>&nbsp;<span class="op" id="1715326">:=</span>&nbsp;<span class="op" id="1715329">(</span><span class="op" id="1715330">*</span><span class="op" id="1715331">[</span><span class="num" id="1715332">2</span><span class="op" id="1715333">]</span><span class="builtintype" id="1715334">uint32</span><span class="op" id="1715340">)</span><span class="op" id="1715341">(</span><span class="ident" id="1715342">unsafe</span><span class="op" id="1715348">.</span><span class="ident" id="1715349">Pointer</span><span class="op" id="1715356">(</span><span class="op" id="1715357">&amp;</span><span class="ident" id="1715358">pclntab</span><span class="op" id="1715365">)</span><span class="op" id="1715366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1715369">if</span>&nbsp;<span class="ident" id="1715372">pcln32</span><span class="op" id="1715378">[</span><span class="num" id="1715379">0</span><span class="op" id="1715380">]</span>&nbsp;<span class="op" id="1715382">!=</span>&nbsp;<span class="num" id="1715385">0xfffffffb</span>&nbsp;<span class="op" id="1715396">||</span>&nbsp;<span class="ident" id="1715399">pcln</span><span class="op" id="1715403">[</span><span class="num" id="1715404">4</span><span class="op" id="1715405">]</span>&nbsp;<span class="op" id="1715407">!=</span>&nbsp;<span class="num" id="1715410">0</span>&nbsp;<span class="op" id="1715412">||</span>&nbsp;<span class="ident" id="1715415">pcln</span><span class="op" id="1715419">[</span><span class="num" id="1715420">5</span><span class="op" id="1715421">]</span>&nbsp;<span class="op" id="1715423">!=</span>&nbsp;<span class="num" id="1715426">0</span>&nbsp;<span class="op" id="1715428">||</span>&nbsp;<span class="ident" id="1715431">pcln</span><span class="op" id="1715435">[</span><span class="num" id="1715436">6</span><span class="op" id="1715437">]</span>&nbsp;<span class="op" id="1715439">!=</span>&nbsp;<span class="ident" id="1715442">_PCQuantum</span>&nbsp;<span class="op" id="1715453">||</span>&nbsp;<span class="ident" id="1715456">pcln</span><span class="op" id="1715460">[</span><span class="num" id="1715461">7</span><span class="op" id="1715462">]</span>&nbsp;<span class="op" id="1715464">!=</span>&nbsp;<span class="ident" id="1715467">ptrSize</span>&nbsp;<span class="op" id="1715475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1715479">println</span><span class="op" id="1715486">(</span><span class="string" id="1715487">&#34;runtime:&nbsp;function&nbsp;symbol&nbsp;table&nbsp;header:&#34;</span><span class="op" id="1715527">,</span>&nbsp;<span class="ident" id="1715529">hex</span><span class="op" id="1715532">(</span><span class="ident" id="1715533">pcln32</span><span class="op" id="1715539">[</span><span class="num" id="1715540">0</span><span class="op" id="1715541">]</span><span class="op" id="1715542">)</span><span class="op" id="1715543">,</span>&nbsp;<span class="ident" id="1715545">hex</span><span class="op" id="1715548">(</span><span class="ident" id="1715549">pcln</span><span class="op" id="1715553">[</span><span class="num" id="1715554">4</span><span class="op" id="1715555">]</span><span class="op" id="1715556">)</span><span class="op" id="1715557">,</span>&nbsp;<span class="ident" id="1715559">hex</span><span class="op" id="1715562">(</span><span class="ident" id="1715563">pcln</span><span class="op" id="1715567">[</span><span class="num" id="1715568">5</span><span class="op" id="1715569">]</span><span class="op" id="1715570">)</span><span class="op" id="1715571">,</span>&nbsp;<span class="ident" id="1715573">hex</span><span class="op" id="1715576">(</span><span class="ident" id="1715577">pcln</span><span class="op" id="1715581">[</span><span class="num" id="1715582">6</span><span class="op" id="1715583">]</span><span class="op" id="1715584">)</span><span class="op" id="1715585">,</span>&nbsp;<span class="ident" id="1715587">hex</span><span class="op" id="1715590">(</span><span class="ident" id="1715591">pcln</span><span class="op" id="1715595">[</span><span class="num" id="1715596">7</span><span class="op" id="1715597">]</span><span class="op" id="1715598">)</span><span class="op" id="1715599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715603">gothrow</span><span class="op" id="1715610">(</span><span class="string" id="1715611">&#34;invalid&nbsp;function&nbsp;symbol&nbsp;table\n&#34;</span><span class="op" id="1715644">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1715647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1715651">//&nbsp;pclntable&nbsp;is&nbsp;all&nbsp;bytes&nbsp;of&nbsp;pclntab&nbsp;symbol.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715697">sp</span>&nbsp;<span class="op" id="1715700">:=</span>&nbsp;<span class="op" id="1715703">(</span><span class="op" id="1715704">*</span><span class="ident" id="1715705">sliceStruct</span><span class="op" id="1715716">)</span><span class="op" id="1715717">(</span><span class="ident" id="1715718">unsafe</span><span class="op" id="1715724">.</span><span class="ident" id="1715725">Pointer</span><span class="op" id="1715732">(</span><span class="op" id="1715733">&amp;</span><span class="ident" id="1715734">pclntable</span><span class="op" id="1715743">)</span><span class="op" id="1715744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715747">sp</span><span class="op" id="1715749">.</span><span class="ident" id="1715750">array</span>&nbsp;<span class="op" id="1715756">=</span>&nbsp;<span class="ident" id="1715758">unsafe</span><span class="op" id="1715764">.</span><span class="ident" id="1715765">Pointer</span><span class="op" id="1715772">(</span><span class="op" id="1715773">&amp;</span><span class="ident" id="1715774">pclntab</span><span class="op" id="1715781">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715784">sp</span><span class="op" id="1715786">.</span><span class="builtinfunc" id="1715787">len</span>&nbsp;<span class="op" id="1715791">=</span>&nbsp;<span class="builtintype" id="1715793">int</span><span class="op" id="1715796">(</span><span class="builtintype" id="1715797">uintptr</span><span class="op" id="1715804">(</span><span class="ident" id="1715805">unsafe</span><span class="op" id="1715811">.</span><span class="ident" id="1715812">Pointer</span><span class="op" id="1715819">(</span><span class="op" id="1715820">&amp;</span><span class="ident" id="1715821">epclntab</span><span class="op" id="1715829">)</span><span class="op" id="1715830">)</span>&nbsp;<span class="op" id="1715832">-</span>&nbsp;<span class="builtintype" id="1715834">uintptr</span><span class="op" id="1715841">(</span><span class="ident" id="1715842">unsafe</span><span class="op" id="1715848">.</span><span class="ident" id="1715849">Pointer</span><span class="op" id="1715856">(</span><span class="op" id="1715857">&amp;</span><span class="ident" id="1715858">pclntab</span><span class="op" id="1715865">)</span><span class="op" id="1715866">)</span><span class="op" id="1715867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715870">sp</span><span class="op" id="1715872">.</span><span class="builtinfunc" id="1715873">cap</span>&nbsp;<span class="op" id="1715877">=</span>&nbsp;<span class="ident" id="1715879">sp</span><span class="op" id="1715881">.</span><span class="builtinfunc" id="1715882">len</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1715888">//&nbsp;ftab&nbsp;is&nbsp;lookup&nbsp;table&nbsp;for&nbsp;function&nbsp;by&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1715946">nftab</span>&nbsp;<span class="op" id="1715952">:=</span>&nbsp;<span class="builtintype" id="1715955">int</span><span class="op" id="1715958">(</span><span class="op" id="1715959">*</span><span class="op" id="1715960">(</span><span class="op" id="1715961">*</span><span class="builtintype" id="1715962">uintptr</span><span class="op" id="1715969">)</span><span class="op" id="1715970">(</span><span class="ident" id="1715971">add</span><span class="op" id="1715974">(</span><span class="ident" id="1715975">unsafe</span><span class="op" id="1715981">.</span><span class="ident" id="1715982">Pointer</span><span class="op" id="1715989">(</span><span class="ident" id="1715990">pcln</span><span class="op" id="1715994">)</span><span class="op" id="1715995">,</span>&nbsp;<span class="num" id="1715997">8</span><span class="op" id="1715998">)</span><span class="op" id="1715999">)</span><span class="op" id="1716000">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1716003">p</span>&nbsp;<span class="op" id="1716005">:=</span>&nbsp;<span class="ident" id="1716008">add</span><span class="op" id="1716011">(</span><span class="ident" id="1716012">unsafe</span><span class="op" id="1716018">.</span><span class="ident" id="1716019">Pointer</span><span class="op" id="1716026">(</span><span class="ident" id="1716027">pcln</span><span class="op" id="1716031">)</span><span class="op" id="1716032">,</span>&nbsp;<span class="num" id="1716034">8</span><span class="op" id="1716035">+</span><span class="ident" id="1716036">ptrSize</span><span class="op" id="1716043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1716046">sp</span>&nbsp;<span class="op" id="1716049">=</span>&nbsp;<span class="op" id="1716051">(</span><span class="op" id="1716052">*</span><span class="ident" id="1716053">sliceStruct</span><span class="op" id="1716064">)</span><span class="op" id="1716065">(</span><span class="ident" id="1716066">unsafe</span><span class="op" id="1716072">.</span><span class="ident" id="1716073">Pointer</span><span class="op" id="1716080">(</span><span class="op" id="1716081">&amp;</span><span class="ident" id="1716082">ftab</span><span class="op" id="1716086">)</span><span class="op" id="1716087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1716090">sp</span><span class="op" id="1716092">.</span><span class="ident" id="1716093">array</span>&nbsp;<span class="op" id="1716099">=</span>&nbsp;<span class="ident" id="1716101">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1716104">sp</span><span class="op" id="1716106">.</span><span class="builtinfunc" id="1716107">len</span>&nbsp;<span class="op" id="1716111">=</span>&nbsp;<span class="ident" id="1716113">nftab</span>&nbsp;<span class="op" id="1716119">+</span>&nbsp;<span class="num" id="1716121">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1716124">sp</span><span class="op" id="1716126">.</span><span class="builtinfunc" id="1716127">cap</span>&nbsp;<span class="op" id="1716131">=</span>&nbsp;<span class="ident" id="1716133">sp</span><span class="op" id="1716135">.</span><span class="builtinfunc" id="1716136">len</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1716141">for</span>&nbsp;<span class="ident" id="1716145">i</span>&nbsp;<span class="op" id="1716147">:=</span>&nbsp;<span class="num" id="1716150">0</span><span class="op" id="1716151">;</span>&nbsp;<span class="ident" id="1716153">i</span>&nbsp;<span class="op" id="1716155">&lt;</span>&nbsp;<span class="ident" id="1716157">nftab</span><span class="op" id="1716162">;</span>&nbsp;<span class="ident" id="1716164">i</span><span class="op" id="1716165">++</span>&nbsp;<span class="op" id="1716168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1716172">//&nbsp;NOTE:&nbsp;ftab[nftab].entry&nbsp;is&nbsp;legal;&nbsp;it&nbsp;is&nbsp;the&nbsp;address&nbsp;beyond&nbsp;the&nbsp;final&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1716256">if</span>&nbsp;<span class="ident" id="1716259">ftab</span><span class="op" id="1716263">[</span><span class="ident" id="1716264">i</span><span class="op" id="1716265">]</span><span class="op" id="1716266">.</span><span class="ident" id="1716267">entry</span>&nbsp;<span class="op" id="1716273">&gt;</span>&nbsp;<span class="ident" id="1716275">ftab</span><span class="op" id="1716279">[</span><span class="ident" id="1716280">i</span><span class="op" id="1716281">+</span><span class="num" id="1716282">1</span><span class="op" id="1716283">]</span><span class="op" id="1716284">.</span><span class="ident" id="1716285">entry</span>&nbsp;<span class="op" id="1716291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1716296">f1</span>&nbsp;<span class="op" id="1716299">:=</span>&nbsp;<span class="op" id="1716302">(</span><span class="op" id="1716303">*</span><span class="ident" id="1716304">_func</span><span class="op" id="1716309">)</span><span class="op" id="1716310">(</span><span class="ident" id="1716311">unsafe</span><span class="op" id="1716317">.</span><span class="ident" id="1716318">Pointer</span><span class="op" id="1716325">(</span><span class="op" id="1716326">&amp;</span><span class="ident" id="1716327">pclntable</span><span class="op" id="1716336">[</span><span class="ident" id="1716337">ftab</span><span class="op" id="1716341">[</span><span class="ident" id="1716342">i</span><span class="op" id="1716343">]</span><span class="op" id="1716344">.</span><span class="ident" id="1716345">funcoff</span><span class="op" id="1716352">]</span><span class="op" id="1716353">)</span><span class="op" id="1716354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1716359">f2</span>&nbsp;<span class="op" id="1716362">:=</span>&nbsp;<span class="op" id="1716365">(</span><span class="op" id="1716366">*</span><span class="ident" id="1716367">_func</span><span class="op" id="1716372">)</span><span class="op" id="1716373">(</span><span class="ident" id="1716374">unsafe</span><span class="op" id="1716380">.</span><span class="ident" id="1716381">Pointer</span><span class="op" id="1716388">(</span><span class="op" id="1716389">&amp;</span><span class="ident" id="1716390">pclntable</span><span class="op" id="1716399">[</span><span class="ident" id="1716400">ftab</span><span class="op" id="1716404">[</span><span class="ident" id="1716405">i</span><span class="op" id="1716406">+</span><span class="num" id="1716407">1</span><span class="op" id="1716408">]</span><span class="op" id="1716409">.</span><span class="ident" id="1716410">funcoff</span><span class="op" id="1716417">]</span><span class="op" id="1716418">)</span><span class="op" id="1716419">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1716424">f2name</span>&nbsp;<span class="op" id="1716431">:=</span>&nbsp;<span class="string" id="1716434">&#34;end&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1716443">if</span>&nbsp;<span class="ident" id="1716446">i</span><span class="op" id="1716447">+</span><span class="num" id="1716448">1</span>&nbsp;<span class="op" id="1716450">&lt;</span>&nbsp;<span class="ident" id="1716452">nftab</span>&nbsp;<span class="op" id="1716458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1716464">f2name</span>&nbsp;<span class="op" id="1716471">=</span>&nbsp;<span class="ident" id="1716473">gofuncname</span><span class="op" id="1716483">(</span><span class="ident" id="1716484">f2</span><span class="op" id="1716486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1716491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1716496">println</span><span class="op" id="1716503">(</span><span class="string" id="1716504">&#34;function&nbsp;symbol&nbsp;table&nbsp;not&nbsp;sorted&nbsp;by&nbsp;program&nbsp;counter:&#34;</span><span class="op" id="1716558">,</span>&nbsp;<span class="ident" id="1716560">hex</span><span class="op" id="1716563">(</span><span class="ident" id="1716564">ftab</span><span class="op" id="1716568">[</span><span class="ident" id="1716569">i</span><span class="op" id="1716570">]</span><span class="op" id="1716571">.</span><span class="ident" id="1716572">entry</span><span class="op" id="1716577">)</span><span class="op" id="1716578">,</span>&nbsp;<span class="ident" id="1716580">gofuncname</span><span class="op" id="1716590">(</span><span class="ident" id="1716591">f1</span><span class="op" id="1716593">)</span><span class="op" id="1716594">,</span>&nbsp;<span class="string" id="1716596">&#34;&gt;&#34;</span><span class="op" id="1716599">,</span>&nbsp;<span class="ident" id="1716601">hex</span><span class="op" id="1716604">(</span><span class="ident" id="1716605">ftab</span><span class="op" id="1716609">[</span><span class="ident" id="1716610">i</span><span class="op" id="1716611">+</span><span class="num" id="1716612">1</span><span class="op" id="1716613">]</span><span class="op" id="1716614">.</span><span class="ident" id="1716615">entry</span><span class="op" id="1716620">)</span><span class="op" id="1716621">,</span>&nbsp;<span class="ident" id="1716623">f2name</span><span class="op" id="1716629">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1716634">for</span>&nbsp;<span class="ident" id="1716638">j</span>&nbsp;<span class="op" id="1716640">:=</span>&nbsp;<span class="num" id="1716643">0</span><span class="op" id="1716644">;</span>&nbsp;<span class="ident" id="1716646">j</span>&nbsp;<span class="op" id="1716648">&lt;=</span>&nbsp;<span class="ident" id="1716651">i</span><span class="op" id="1716652">;</span>&nbsp;<span class="ident" id="1716654">j</span><span class="op" id="1716655">++</span>&nbsp;<span class="op" id="1716658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1716664">print</span><span class="op" id="1716669">(</span><span class="string" id="1716670">&#34;\t&#34;</span><span class="op" id="1716674">,</span>&nbsp;<span class="ident" id="1716676">hex</span><span class="op" id="1716679">(</span><span class="ident" id="1716680">ftab</span><span class="op" id="1716684">[</span><span class="ident" id="1716685">j</span><span class="op" id="1716686">]</span><span class="op" id="1716687">.</span><span class="ident" id="1716688">entry</span><span class="op" id="1716693">)</span><span class="op" id="1716694">,</span>&nbsp;<span class="string" id="1716696">&#34;&nbsp;&#34;</span><span class="op" id="1716699">,</span>&nbsp;<span class="ident" id="1716701">gofuncname</span><span class="op" id="1716711">(</span><span class="op" id="1716712">(</span><span class="op" id="1716713">*</span><span class="ident" id="1716714">_func</span><span class="op" id="1716719">)</span><span class="op" id="1716720">(</span><span class="ident" id="1716721">unsafe</span><span class="op" id="1716727">.</span><span class="ident" id="1716728">Pointer</span><span class="op" id="1716735">(</span><span class="op" id="1716736">&amp;</span><span class="ident" id="1716737">pclntable</span><span class="op" id="1716746">[</span><span class="ident" id="1716747">ftab</span><span class="op" id="1716751">[</span><span class="ident" id="1716752">j</span><span class="op" id="1716753">]</span><span class="op" id="1716754">.</span><span class="ident" id="1716755">funcoff</span><span class="op" id="1716762">]</span><span class="op" id="1716763">)</span><span class="op" id="1716764">)</span><span class="op" id="1716765">)</span><span class="op" id="1716766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1716771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1716776">gothrow</span><span class="op" id="1716783">(</span><span class="string" id="1716784">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1716814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1716818">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1716821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1716825">//&nbsp;The&nbsp;ftab&nbsp;ends&nbsp;with&nbsp;a&nbsp;half&nbsp;functab&nbsp;consisting&nbsp;only&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1716882">//&nbsp;&#39;entry&#39;,&nbsp;followed&nbsp;by&nbsp;a&nbsp;uint32&nbsp;giving&nbsp;the&nbsp;pcln-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1716941">//&nbsp;offset&nbsp;of&nbsp;the&nbsp;file&nbsp;table.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1716971">sp</span>&nbsp;<span class="op" id="1716974">=</span>&nbsp;<span class="op" id="1716976">(</span><span class="op" id="1716977">*</span><span class="ident" id="1716978">sliceStruct</span><span class="op" id="1716989">)</span><span class="op" id="1716990">(</span><span class="ident" id="1716991">unsafe</span><span class="op" id="1716997">.</span><span class="ident" id="1716998">Pointer</span><span class="op" id="1717005">(</span><span class="op" id="1717006">&amp;</span><span class="ident" id="1717007">filetab</span><span class="op" id="1717014">)</span><span class="op" id="1717015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1717018">end</span>&nbsp;<span class="op" id="1717022">:=</span>&nbsp;<span class="ident" id="1717025">unsafe</span><span class="op" id="1717031">.</span><span class="ident" id="1717032">Pointer</span><span class="op" id="1717039">(</span><span class="op" id="1717040">&amp;</span><span class="ident" id="1717041">ftab</span><span class="op" id="1717045">[</span><span class="ident" id="1717046">nftab</span><span class="op" id="1717051">]</span><span class="op" id="1717052">.</span><span class="ident" id="1717053">funcoff</span><span class="op" id="1717060">)</span>&nbsp;<span class="comment" id="1717062">//&nbsp;just&nbsp;beyond&nbsp;ftab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1717083">fileoffset</span>&nbsp;<span class="op" id="1717094">:=</span>&nbsp;<span class="op" id="1717097">*</span><span class="op" id="1717098">(</span><span class="op" id="1717099">*</span><span class="builtintype" id="1717100">uint32</span><span class="op" id="1717106">)</span><span class="op" id="1717107">(</span><span class="ident" id="1717108">end</span><span class="op" id="1717111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1717114">sp</span><span class="op" id="1717116">.</span><span class="ident" id="1717117">array</span>&nbsp;<span class="op" id="1717123">=</span>&nbsp;<span class="ident" id="1717125">unsafe</span><span class="op" id="1717131">.</span><span class="ident" id="1717132">Pointer</span><span class="op" id="1717139">(</span><span class="op" id="1717140">&amp;</span><span class="ident" id="1717141">pclntable</span><span class="op" id="1717150">[</span><span class="ident" id="1717151">fileoffset</span><span class="op" id="1717161">]</span><span class="op" id="1717162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1717165">//&nbsp;length&nbsp;is&nbsp;in&nbsp;first&nbsp;element&nbsp;of&nbsp;array.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1717206">//&nbsp;set&nbsp;len&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;can&nbsp;get&nbsp;first&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1717252">sp</span><span class="op" id="1717254">.</span><span class="builtinfunc" id="1717255">len</span>&nbsp;<span class="op" id="1717259">=</span>&nbsp;<span class="num" id="1717261">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1717264">sp</span><span class="op" id="1717266">.</span><span class="builtinfunc" id="1717267">cap</span>&nbsp;<span class="op" id="1717271">=</span>&nbsp;<span class="num" id="1717273">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1717276">sp</span><span class="op" id="1717278">.</span><span class="builtinfunc" id="1717279">len</span>&nbsp;<span class="op" id="1717283">=</span>&nbsp;<span class="builtintype" id="1717285">int</span><span class="op" id="1717288">(</span><span class="ident" id="1717289">filetab</span><span class="op" id="1717296">[</span><span class="num" id="1717297">0</span><span class="op" id="1717298">]</span><span class="op" id="1717299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1717302">sp</span><span class="op" id="1717304">.</span><span class="builtinfunc" id="1717305">cap</span>&nbsp;<span class="op" id="1717309">=</span>&nbsp;<span class="ident" id="1717311">sp</span><span class="op" id="1717313">.</span><span class="builtinfunc" id="1717314">len</span><br>
<span class="lineno">100</span><span class="op" id="1717318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1717321">//&nbsp;FuncForPC&nbsp;returns&nbsp;a&nbsp;*Func&nbsp;describing&nbsp;the&nbsp;function&nbsp;that&nbsp;contains&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1717392">//&nbsp;given&nbsp;program&nbsp;counter&nbsp;address,&nbsp;or&nbsp;else&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1717439">func</span>&nbsp;<span class="ident" id="1717444">FuncForPC</span><span class="op" id="1717453">(</span><span class="ident" id="1717454">pc</span>&nbsp;<span class="builtintype" id="1717457">uintptr</span><span class="op" id="1717464">)</span>&nbsp;<span class="op" id="1717466">*</span><span class="ident" id="1717467">Func</span>&nbsp;<span class="op" id="1717472">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1717475">return</span>&nbsp;<span class="op" id="1717482">(</span><span class="op" id="1717483">*</span><span class="ident" id="1717484">Func</span><span class="op" id="1717488">)</span><span class="op" id="1717489">(</span><span class="ident" id="1717490">unsafe</span><span class="op" id="1717496">.</span><span class="ident" id="1717497">Pointer</span><span class="op" id="1717504">(</span><span class="ident" id="1717505">findfunc</span><span class="op" id="1717513">(</span><span class="ident" id="1717514">pc</span><span class="op" id="1717516">)</span><span class="op" id="1717517">)</span><span class="op" id="1717518">)</span><br>
<span class="lineno"></span><span class="op" id="1717520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1717523">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1717565">func</span>&nbsp;<span class="op" id="1717570">(</span><span class="ident" id="1717571">f</span>&nbsp;<span class="op" id="1717573">*</span><span class="ident" id="1717574">Func</span><span class="op" id="1717578">)</span>&nbsp;<span class="ident" id="1717580">Name</span><span class="op" id="1717584">(</span><span class="op" id="1717585">)</span>&nbsp;<span class="builtintype" id="1717587">string</span>&nbsp;<span class="op" id="1717594">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1717597">return</span>&nbsp;<span class="ident" id="1717604">gofuncname</span><span class="op" id="1717614">(</span><span class="ident" id="1717615">f</span><span class="op" id="1717616">.</span><span class="ident" id="1717617">raw</span><span class="op" id="1717620">(</span><span class="op" id="1717621">)</span><span class="op" id="1717622">)</span><br>
<span class="lineno"></span><span class="op" id="1717624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1717627">//&nbsp;Entry&nbsp;returns&nbsp;the&nbsp;entry&nbsp;address&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1717679">func</span>&nbsp;<span class="op" id="1717684">(</span><span class="ident" id="1717685">f</span>&nbsp;<span class="op" id="1717687">*</span><span class="ident" id="1717688">Func</span><span class="op" id="1717692">)</span>&nbsp;<span class="ident" id="1717694">Entry</span><span class="op" id="1717699">(</span><span class="op" id="1717700">)</span>&nbsp;<span class="builtintype" id="1717702">uintptr</span>&nbsp;<span class="op" id="1717710">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1717713">return</span>&nbsp;<span class="ident" id="1717720">f</span><span class="op" id="1717721">.</span><span class="ident" id="1717722">raw</span><span class="op" id="1717725">(</span><span class="op" id="1717726">)</span><span class="op" id="1717727">.</span><span class="ident" id="1717728">entry</span><br>
<span class="lineno"></span><span class="op" id="1717734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1717737">//&nbsp;FileLine&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1717794">//&nbsp;source&nbsp;code&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;program&nbsp;counter&nbsp;pc.</span><br>
<span class="lineno">120</span><span class="comment" id="1717850">//&nbsp;The&nbsp;result&nbsp;will&nbsp;not&nbsp;be&nbsp;accurate&nbsp;if&nbsp;pc&nbsp;is&nbsp;not&nbsp;a&nbsp;program</span><br>
<span class="lineno"></span><span class="comment" id="1717908">//&nbsp;counter&nbsp;within&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="1717929">func</span>&nbsp;<span class="op" id="1717934">(</span><span class="ident" id="1717935">f</span>&nbsp;<span class="op" id="1717937">*</span><span class="ident" id="1717938">Func</span><span class="op" id="1717942">)</span>&nbsp;<span class="ident" id="1717944">FileLine</span><span class="op" id="1717952">(</span><span class="ident" id="1717953">pc</span>&nbsp;<span class="builtintype" id="1717956">uintptr</span><span class="op" id="1717963">)</span>&nbsp;<span class="op" id="1717965">(</span><span class="ident" id="1717966">file</span>&nbsp;<span class="builtintype" id="1717971">string</span><span class="op" id="1717977">,</span>&nbsp;<span class="ident" id="1717979">line</span>&nbsp;<span class="builtintype" id="1717984">int</span><span class="op" id="1717987">)</span>&nbsp;<span class="op" id="1717989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1717992">//&nbsp;Pass&nbsp;strict=false&nbsp;here,&nbsp;because&nbsp;anyone&nbsp;can&nbsp;call&nbsp;this&nbsp;function,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1718059">//&nbsp;and&nbsp;they&nbsp;might&nbsp;just&nbsp;be&nbsp;wrong&nbsp;about&nbsp;targetpc&nbsp;belonging&nbsp;to&nbsp;f.</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718123">line</span>&nbsp;<span class="op" id="1718128">=</span>&nbsp;<span class="builtintype" id="1718130">int</span><span class="op" id="1718133">(</span><span class="ident" id="1718134">funcline1</span><span class="op" id="1718143">(</span><span class="ident" id="1718144">f</span><span class="op" id="1718145">.</span><span class="ident" id="1718146">raw</span><span class="op" id="1718149">(</span><span class="op" id="1718150">)</span><span class="op" id="1718151">,</span>&nbsp;<span class="ident" id="1718153">pc</span><span class="op" id="1718155">,</span>&nbsp;<span class="op" id="1718157">&amp;</span><span class="ident" id="1718158">file</span><span class="op" id="1718162">,</span>&nbsp;<span class="builtintype" id="1718164">false</span><span class="op" id="1718169">)</span><span class="op" id="1718170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718173">return</span>&nbsp;<span class="ident" id="1718180">file</span><span class="op" id="1718184">,</span>&nbsp;<span class="ident" id="1718186">line</span><br>
<span class="lineno"></span><span class="op" id="1718191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1718194">func</span>&nbsp;<span class="ident" id="1718199">findfunc</span><span class="op" id="1718207">(</span><span class="ident" id="1718208">pc</span>&nbsp;<span class="builtintype" id="1718211">uintptr</span><span class="op" id="1718218">)</span>&nbsp;<span class="op" id="1718220">*</span><span class="ident" id="1718221">_func</span>&nbsp;<span class="op" id="1718227">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718230">if</span>&nbsp;<span class="builtinfunc" id="1718233">len</span><span class="op" id="1718236">(</span><span class="ident" id="1718237">ftab</span><span class="op" id="1718241">)</span>&nbsp;<span class="op" id="1718243">==</span>&nbsp;<span class="num" id="1718246">0</span>&nbsp;<span class="op" id="1718248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718252">return</span>&nbsp;<span class="builtintype" id="1718259">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1718264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718268">if</span>&nbsp;<span class="ident" id="1718271">pc</span>&nbsp;<span class="op" id="1718274">&lt;</span>&nbsp;<span class="ident" id="1718276">ftab</span><span class="op" id="1718280">[</span><span class="num" id="1718281">0</span><span class="op" id="1718282">]</span><span class="op" id="1718283">.</span><span class="ident" id="1718284">entry</span>&nbsp;<span class="op" id="1718290">||</span>&nbsp;<span class="ident" id="1718293">pc</span>&nbsp;<span class="op" id="1718296">&gt;=</span>&nbsp;<span class="ident" id="1718299">ftab</span><span class="op" id="1718303">[</span><span class="builtinfunc" id="1718304">len</span><span class="op" id="1718307">(</span><span class="ident" id="1718308">ftab</span><span class="op" id="1718312">)</span><span class="op" id="1718313">-</span><span class="num" id="1718314">1</span><span class="op" id="1718315">]</span><span class="op" id="1718316">.</span><span class="ident" id="1718317">entry</span>&nbsp;<span class="op" id="1718323">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718327">return</span>&nbsp;<span class="builtintype" id="1718334">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1718339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1718343">//&nbsp;binary&nbsp;search&nbsp;to&nbsp;find&nbsp;func&nbsp;with&nbsp;entry&nbsp;&lt;=&nbsp;pc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718392">lo</span>&nbsp;<span class="op" id="1718395">:=</span>&nbsp;<span class="num" id="1718398">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718401">nf</span>&nbsp;<span class="op" id="1718404">:=</span>&nbsp;<span class="builtinfunc" id="1718407">len</span><span class="op" id="1718410">(</span><span class="ident" id="1718411">ftab</span><span class="op" id="1718415">)</span>&nbsp;<span class="op" id="1718417">-</span>&nbsp;<span class="num" id="1718419">1</span>&nbsp;<span class="comment" id="1718421">//&nbsp;last&nbsp;entry&nbsp;is&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718448">for</span>&nbsp;<span class="ident" id="1718452">nf</span>&nbsp;<span class="op" id="1718455">&gt;</span>&nbsp;<span class="num" id="1718457">0</span>&nbsp;<span class="op" id="1718459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718463">n</span>&nbsp;<span class="op" id="1718465">:=</span>&nbsp;<span class="ident" id="1718468">nf</span>&nbsp;<span class="op" id="1718471">/</span>&nbsp;<span class="num" id="1718473">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718477">f</span>&nbsp;<span class="op" id="1718479">:=</span>&nbsp;<span class="op" id="1718482">&amp;</span><span class="ident" id="1718483">ftab</span><span class="op" id="1718487">[</span><span class="ident" id="1718488">lo</span><span class="op" id="1718490">+</span><span class="ident" id="1718491">n</span><span class="op" id="1718492">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718496">if</span>&nbsp;<span class="ident" id="1718499">f</span><span class="op" id="1718500">.</span><span class="ident" id="1718501">entry</span>&nbsp;<span class="op" id="1718507">&lt;=</span>&nbsp;<span class="ident" id="1718510">pc</span>&nbsp;<span class="op" id="1718513">&amp;&amp;</span>&nbsp;<span class="ident" id="1718516">pc</span>&nbsp;<span class="op" id="1718519">&lt;</span>&nbsp;<span class="ident" id="1718521">ftab</span><span class="op" id="1718525">[</span><span class="ident" id="1718526">lo</span><span class="op" id="1718528">+</span><span class="ident" id="1718529">n</span><span class="op" id="1718530">+</span><span class="num" id="1718531">1</span><span class="op" id="1718532">]</span><span class="op" id="1718533">.</span><span class="ident" id="1718534">entry</span>&nbsp;<span class="op" id="1718540">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718545">return</span>&nbsp;<span class="op" id="1718552">(</span><span class="op" id="1718553">*</span><span class="ident" id="1718554">_func</span><span class="op" id="1718559">)</span><span class="op" id="1718560">(</span><span class="ident" id="1718561">unsafe</span><span class="op" id="1718567">.</span><span class="ident" id="1718568">Pointer</span><span class="op" id="1718575">(</span><span class="op" id="1718576">&amp;</span><span class="ident" id="1718577">pclntable</span><span class="op" id="1718586">[</span><span class="ident" id="1718587">f</span><span class="op" id="1718588">.</span><span class="ident" id="1718589">funcoff</span><span class="op" id="1718596">]</span><span class="op" id="1718597">)</span><span class="op" id="1718598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1718602">}</span>&nbsp;<span class="keyword" id="1718604">else</span>&nbsp;<span class="keyword" id="1718609">if</span>&nbsp;<span class="ident" id="1718612">pc</span>&nbsp;<span class="op" id="1718615">&lt;</span>&nbsp;<span class="ident" id="1718617">f</span><span class="op" id="1718618">.</span><span class="ident" id="1718619">entry</span>&nbsp;<span class="op" id="1718625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718630">nf</span>&nbsp;<span class="op" id="1718633">=</span>&nbsp;<span class="ident" id="1718635">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1718639">}</span>&nbsp;<span class="keyword" id="1718641">else</span>&nbsp;<span class="op" id="1718646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718651">lo</span>&nbsp;<span class="op" id="1718654">+=</span>&nbsp;<span class="ident" id="1718657">n</span>&nbsp;<span class="op" id="1718659">+</span>&nbsp;<span class="num" id="1718661">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718666">nf</span>&nbsp;<span class="op" id="1718669">-=</span>&nbsp;<span class="ident" id="1718672">n</span>&nbsp;<span class="op" id="1718674">+</span>&nbsp;<span class="num" id="1718676">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1718680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1718683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718687">gothrow</span><span class="op" id="1718694">(</span><span class="string" id="1718695">&#34;findfunc:&nbsp;binary&nbsp;search&nbsp;failed&#34;</span><span class="op" id="1718727">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718730">return</span>&nbsp;<span class="builtintype" id="1718737">nil</span><br>
<span class="lineno"></span><span class="op" id="1718741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1718744">func</span>&nbsp;<span class="ident" id="1718749">pcvalue</span><span class="op" id="1718756">(</span><span class="ident" id="1718757">f</span>&nbsp;<span class="op" id="1718759">*</span><span class="ident" id="1718760">_func</span><span class="op" id="1718765">,</span>&nbsp;<span class="ident" id="1718767">off</span>&nbsp;<span class="builtintype" id="1718771">int32</span><span class="op" id="1718776">,</span>&nbsp;<span class="ident" id="1718778">targetpc</span>&nbsp;<span class="builtintype" id="1718787">uintptr</span><span class="op" id="1718794">,</span>&nbsp;<span class="ident" id="1718796">strict</span>&nbsp;<span class="builtintype" id="1718803">bool</span><span class="op" id="1718807">)</span>&nbsp;<span class="builtintype" id="1718809">int32</span>&nbsp;<span class="op" id="1718815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718818">if</span>&nbsp;<span class="ident" id="1718821">off</span>&nbsp;<span class="op" id="1718825">==</span>&nbsp;<span class="num" id="1718828">0</span>&nbsp;<span class="op" id="1718830">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718834">return</span>&nbsp;<span class="op" id="1718841">-</span><span class="num" id="1718842">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1718845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718848">p</span>&nbsp;<span class="op" id="1718850">:=</span>&nbsp;<span class="ident" id="1718853">pclntable</span><span class="op" id="1718862">[</span><span class="ident" id="1718863">off</span><span class="op" id="1718866">:</span><span class="op" id="1718867">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718870">pc</span>&nbsp;<span class="op" id="1718873">:=</span>&nbsp;<span class="ident" id="1718876">f</span><span class="op" id="1718877">.</span><span class="ident" id="1718878">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718885">val</span>&nbsp;<span class="op" id="1718889">:=</span>&nbsp;<span class="builtintype" id="1718892">int32</span><span class="op" id="1718897">(</span><span class="op" id="1718898">-</span><span class="num" id="1718899">1</span><span class="op" id="1718900">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718903">for</span>&nbsp;<span class="op" id="1718907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718911">var</span>&nbsp;<span class="ident" id="1718915">ok</span>&nbsp;<span class="builtintype" id="1718918">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1718925">p</span><span class="op" id="1718926">,</span>&nbsp;<span class="ident" id="1718928">ok</span>&nbsp;<span class="op" id="1718931">=</span>&nbsp;<span class="ident" id="1718933">step</span><span class="op" id="1718937">(</span><span class="ident" id="1718938">p</span><span class="op" id="1718939">,</span>&nbsp;<span class="op" id="1718941">&amp;</span><span class="ident" id="1718942">pc</span><span class="op" id="1718944">,</span>&nbsp;<span class="op" id="1718946">&amp;</span><span class="ident" id="1718947">val</span><span class="op" id="1718950">,</span>&nbsp;<span class="ident" id="1718952">pc</span>&nbsp;<span class="op" id="1718955">==</span>&nbsp;<span class="ident" id="1718958">f</span><span class="op" id="1718959">.</span><span class="ident" id="1718960">entry</span><span class="op" id="1718965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718969">if</span>&nbsp;<span class="op" id="1718972">!</span><span class="ident" id="1718973">ok</span>&nbsp;<span class="op" id="1718976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718981">break</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1718989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1718993">if</span>&nbsp;<span class="ident" id="1718996">targetpc</span>&nbsp;<span class="op" id="1719005">&lt;</span>&nbsp;<span class="ident" id="1719007">pc</span>&nbsp;<span class="op" id="1719010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719015">return</span>&nbsp;<span class="ident" id="1719022">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1719028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1719031">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1719035">//&nbsp;If&nbsp;there&nbsp;was&nbsp;a&nbsp;table,&nbsp;it&nbsp;should&nbsp;have&nbsp;covered&nbsp;all&nbsp;program&nbsp;counters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1719106">//&nbsp;If&nbsp;not,&nbsp;something&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719138">if</span>&nbsp;<span class="ident" id="1719141">panicking</span>&nbsp;<span class="op" id="1719151">!=</span>&nbsp;<span class="num" id="1719154">0</span>&nbsp;<span class="op" id="1719156">||</span>&nbsp;<span class="op" id="1719159">!</span><span class="ident" id="1719160">strict</span>&nbsp;<span class="op" id="1719167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719171">return</span>&nbsp;<span class="op" id="1719178">-</span><span class="num" id="1719179">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1719182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1719186">print</span><span class="op" id="1719191">(</span><span class="string" id="1719192">&#34;runtime:&nbsp;invalid&nbsp;pc-encoded&nbsp;table&nbsp;f=&#34;</span><span class="op" id="1719230">,</span>&nbsp;<span class="ident" id="1719232">gofuncname</span><span class="op" id="1719242">(</span><span class="ident" id="1719243">f</span><span class="op" id="1719244">)</span><span class="op" id="1719245">,</span>&nbsp;<span class="string" id="1719247">&#34;&nbsp;pc=&#34;</span><span class="op" id="1719253">,</span>&nbsp;<span class="ident" id="1719255">hex</span><span class="op" id="1719258">(</span><span class="ident" id="1719259">pc</span><span class="op" id="1719261">)</span><span class="op" id="1719262">,</span>&nbsp;<span class="string" id="1719264">&#34;&nbsp;targetpc=&#34;</span><span class="op" id="1719276">,</span>&nbsp;<span class="ident" id="1719278">hex</span><span class="op" id="1719281">(</span><span class="ident" id="1719282">targetpc</span><span class="op" id="1719290">)</span><span class="op" id="1719291">,</span>&nbsp;<span class="string" id="1719293">&#34;&nbsp;tab=&#34;</span><span class="op" id="1719300">,</span>&nbsp;<span class="ident" id="1719302">p</span><span class="op" id="1719303">,</span>&nbsp;<span class="string" id="1719305">&#34;\n&#34;</span><span class="op" id="1719309">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1719313">p</span>&nbsp;<span class="op" id="1719315">=</span>&nbsp;<span class="ident" id="1719317">pclntable</span><span class="op" id="1719326">[</span><span class="ident" id="1719327">off</span><span class="op" id="1719330">:</span><span class="op" id="1719331">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1719334">pc</span>&nbsp;<span class="op" id="1719337">=</span>&nbsp;<span class="ident" id="1719339">f</span><span class="op" id="1719340">.</span><span class="ident" id="1719341">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1719348">val</span>&nbsp;<span class="op" id="1719352">=</span>&nbsp;<span class="op" id="1719354">-</span><span class="num" id="1719355">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719358">for</span>&nbsp;<span class="op" id="1719362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719366">var</span>&nbsp;<span class="ident" id="1719370">ok</span>&nbsp;<span class="builtintype" id="1719373">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1719380">p</span><span class="op" id="1719381">,</span>&nbsp;<span class="ident" id="1719383">ok</span>&nbsp;<span class="op" id="1719386">=</span>&nbsp;<span class="ident" id="1719388">step</span><span class="op" id="1719392">(</span><span class="ident" id="1719393">p</span><span class="op" id="1719394">,</span>&nbsp;<span class="op" id="1719396">&amp;</span><span class="ident" id="1719397">pc</span><span class="op" id="1719399">,</span>&nbsp;<span class="op" id="1719401">&amp;</span><span class="ident" id="1719402">val</span><span class="op" id="1719405">,</span>&nbsp;<span class="ident" id="1719407">pc</span>&nbsp;<span class="op" id="1719410">==</span>&nbsp;<span class="ident" id="1719413">f</span><span class="op" id="1719414">.</span><span class="ident" id="1719415">entry</span><span class="op" id="1719420">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719424">if</span>&nbsp;<span class="op" id="1719427">!</span><span class="ident" id="1719428">ok</span>&nbsp;<span class="op" id="1719431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719436">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1719444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1719448">print</span><span class="op" id="1719453">(</span><span class="string" id="1719454">&#34;\tvalue=&#34;</span><span class="op" id="1719464">,</span>&nbsp;<span class="ident" id="1719466">val</span><span class="op" id="1719469">,</span>&nbsp;<span class="string" id="1719471">&#34;&nbsp;until&nbsp;pc=&#34;</span><span class="op" id="1719483">,</span>&nbsp;<span class="ident" id="1719485">hex</span><span class="op" id="1719488">(</span><span class="ident" id="1719489">pc</span><span class="op" id="1719491">)</span><span class="op" id="1719492">,</span>&nbsp;<span class="string" id="1719494">&#34;\n&#34;</span><span class="op" id="1719498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1719501">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1719505">gothrow</span><span class="op" id="1719512">(</span><span class="string" id="1719513">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1719543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719546">return</span>&nbsp;<span class="op" id="1719553">-</span><span class="num" id="1719554">1</span><br>
<span class="lineno"></span><span class="op" id="1719556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="1719559">func</span>&nbsp;<span class="ident" id="1719564">funcname</span><span class="op" id="1719572">(</span><span class="ident" id="1719573">f</span>&nbsp;<span class="op" id="1719575">*</span><span class="ident" id="1719576">_func</span><span class="op" id="1719581">)</span>&nbsp;<span class="op" id="1719583">*</span><span class="builtintype" id="1719584">byte</span>&nbsp;<span class="op" id="1719589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719592">if</span>&nbsp;<span class="ident" id="1719595">f</span>&nbsp;<span class="op" id="1719597">==</span>&nbsp;<span class="builtintype" id="1719600">nil</span>&nbsp;<span class="op" id="1719604">||</span>&nbsp;<span class="ident" id="1719607">f</span><span class="op" id="1719608">.</span><span class="ident" id="1719609">nameoff</span>&nbsp;<span class="op" id="1719617">==</span>&nbsp;<span class="num" id="1719620">0</span>&nbsp;<span class="op" id="1719622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719626">return</span>&nbsp;<span class="builtintype" id="1719633">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1719638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719641">return</span>&nbsp;<span class="op" id="1719648">(</span><span class="op" id="1719649">*</span><span class="builtintype" id="1719650">byte</span><span class="op" id="1719654">)</span><span class="op" id="1719655">(</span><span class="ident" id="1719656">unsafe</span><span class="op" id="1719662">.</span><span class="ident" id="1719663">Pointer</span><span class="op" id="1719670">(</span><span class="op" id="1719671">&amp;</span><span class="ident" id="1719672">pclntable</span><span class="op" id="1719681">[</span><span class="ident" id="1719682">f</span><span class="op" id="1719683">.</span><span class="ident" id="1719684">nameoff</span><span class="op" id="1719691">]</span><span class="op" id="1719692">)</span><span class="op" id="1719693">)</span><br>
<span class="lineno">205</span><span class="op" id="1719695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1719698">func</span>&nbsp;<span class="ident" id="1719703">gofuncname</span><span class="op" id="1719713">(</span><span class="ident" id="1719714">f</span>&nbsp;<span class="op" id="1719716">*</span><span class="ident" id="1719717">_func</span><span class="op" id="1719722">)</span>&nbsp;<span class="builtintype" id="1719724">string</span>&nbsp;<span class="op" id="1719731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719734">return</span>&nbsp;<span class="ident" id="1719741">gostringnocopy</span><span class="op" id="1719755">(</span><span class="ident" id="1719756">funcname</span><span class="op" id="1719764">(</span><span class="ident" id="1719765">f</span><span class="op" id="1719766">)</span><span class="op" id="1719767">)</span><br>
<span class="lineno"></span><span class="op" id="1719769">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="1719772">func</span>&nbsp;<span class="ident" id="1719777">funcline1</span><span class="op" id="1719786">(</span><span class="ident" id="1719787">f</span>&nbsp;<span class="op" id="1719789">*</span><span class="ident" id="1719790">_func</span><span class="op" id="1719795">,</span>&nbsp;<span class="ident" id="1719797">targetpc</span>&nbsp;<span class="builtintype" id="1719806">uintptr</span><span class="op" id="1719813">,</span>&nbsp;<span class="ident" id="1719815">file</span>&nbsp;<span class="op" id="1719820">*</span><span class="builtintype" id="1719821">string</span><span class="op" id="1719827">,</span>&nbsp;<span class="ident" id="1719829">strict</span>&nbsp;<span class="builtintype" id="1719836">bool</span><span class="op" id="1719840">)</span>&nbsp;<span class="builtintype" id="1719842">int32</span>&nbsp;<span class="op" id="1719848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1719851">*</span><span class="ident" id="1719852">file</span>&nbsp;<span class="op" id="1719857">=</span>&nbsp;<span class="string" id="1719859">&#34;?&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1719864">fileno</span>&nbsp;<span class="op" id="1719871">:=</span>&nbsp;<span class="builtintype" id="1719874">int</span><span class="op" id="1719877">(</span><span class="ident" id="1719878">pcvalue</span><span class="op" id="1719885">(</span><span class="ident" id="1719886">f</span><span class="op" id="1719887">,</span>&nbsp;<span class="ident" id="1719889">f</span><span class="op" id="1719890">.</span><span class="ident" id="1719891">pcfile</span><span class="op" id="1719897">,</span>&nbsp;<span class="ident" id="1719899">targetpc</span><span class="op" id="1719907">,</span>&nbsp;<span class="ident" id="1719909">strict</span><span class="op" id="1719915">)</span><span class="op" id="1719916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1719919">line</span>&nbsp;<span class="op" id="1719924">:=</span>&nbsp;<span class="ident" id="1719927">pcvalue</span><span class="op" id="1719934">(</span><span class="ident" id="1719935">f</span><span class="op" id="1719936">,</span>&nbsp;<span class="ident" id="1719938">f</span><span class="op" id="1719939">.</span><span class="ident" id="1719940">pcln</span><span class="op" id="1719944">,</span>&nbsp;<span class="ident" id="1719946">targetpc</span><span class="op" id="1719954">,</span>&nbsp;<span class="ident" id="1719956">strict</span><span class="op" id="1719962">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1719965">if</span>&nbsp;<span class="ident" id="1719968">fileno</span>&nbsp;<span class="op" id="1719975">==</span>&nbsp;<span class="op" id="1719978">-</span><span class="num" id="1719979">1</span>&nbsp;<span class="op" id="1719981">||</span>&nbsp;<span class="ident" id="1719984">line</span>&nbsp;<span class="op" id="1719989">==</span>&nbsp;<span class="op" id="1719992">-</span><span class="num" id="1719993">1</span>&nbsp;<span class="op" id="1719995">||</span>&nbsp;<span class="ident" id="1719998">fileno</span>&nbsp;<span class="op" id="1720005">&gt;=</span>&nbsp;<span class="builtinfunc" id="1720008">len</span><span class="op" id="1720011">(</span><span class="ident" id="1720012">filetab</span><span class="op" id="1720019">)</span>&nbsp;<span class="op" id="1720021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1720025">//&nbsp;print(&#34;looking&nbsp;for&nbsp;&#34;,&nbsp;hex(targetpc),&nbsp;&#34;&nbsp;in&nbsp;&#34;,&nbsp;gofuncname(f),&nbsp;&#34;&nbsp;got&nbsp;file=&#34;,&nbsp;fileno,&nbsp;&#34;&nbsp;line=&#34;,&nbsp;lineno,&nbsp;&#34;\n&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1720136">return</span>&nbsp;<span class="num" id="1720143">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1720146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1720149">*</span><span class="ident" id="1720150">file</span>&nbsp;<span class="op" id="1720155">=</span>&nbsp;<span class="ident" id="1720157">gostringnocopy</span><span class="op" id="1720171">(</span><span class="op" id="1720172">&amp;</span><span class="ident" id="1720173">pclntable</span><span class="op" id="1720182">[</span><span class="ident" id="1720183">filetab</span><span class="op" id="1720190">[</span><span class="ident" id="1720191">fileno</span><span class="op" id="1720197">]</span><span class="op" id="1720198">]</span><span class="op" id="1720199">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1720202">return</span>&nbsp;<span class="ident" id="1720209">line</span><br>
<span class="lineno"></span><span class="op" id="1720214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1720217">func</span>&nbsp;<span class="ident" id="1720222">funcline</span><span class="op" id="1720230">(</span><span class="ident" id="1720231">f</span>&nbsp;<span class="op" id="1720233">*</span><span class="ident" id="1720234">_func</span><span class="op" id="1720239">,</span>&nbsp;<span class="ident" id="1720241">targetpc</span>&nbsp;<span class="builtintype" id="1720250">uintptr</span><span class="op" id="1720257">,</span>&nbsp;<span class="ident" id="1720259">file</span>&nbsp;<span class="op" id="1720264">*</span><span class="builtintype" id="1720265">string</span><span class="op" id="1720271">)</span>&nbsp;<span class="builtintype" id="1720273">int32</span>&nbsp;<span class="op" id="1720279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1720282">return</span>&nbsp;<span class="ident" id="1720289">funcline1</span><span class="op" id="1720298">(</span><span class="ident" id="1720299">f</span><span class="op" id="1720300">,</span>&nbsp;<span class="ident" id="1720302">targetpc</span><span class="op" id="1720310">,</span>&nbsp;<span class="ident" id="1720312">file</span><span class="op" id="1720316">,</span>&nbsp;<span class="builtintype" id="1720318">true</span><span class="op" id="1720322">)</span><br>
<span class="lineno">225</span><span class="op" id="1720324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1720327">func</span>&nbsp;<span class="ident" id="1720332">funcspdelta</span><span class="op" id="1720343">(</span><span class="ident" id="1720344">f</span>&nbsp;<span class="op" id="1720346">*</span><span class="ident" id="1720347">_func</span><span class="op" id="1720352">,</span>&nbsp;<span class="ident" id="1720354">targetpc</span>&nbsp;<span class="builtintype" id="1720363">uintptr</span><span class="op" id="1720370">)</span>&nbsp;<span class="builtintype" id="1720372">int32</span>&nbsp;<span class="op" id="1720378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1720381">x</span>&nbsp;<span class="op" id="1720383">:=</span>&nbsp;<span class="ident" id="1720386">pcvalue</span><span class="op" id="1720393">(</span><span class="ident" id="1720394">f</span><span class="op" id="1720395">,</span>&nbsp;<span class="ident" id="1720397">f</span><span class="op" id="1720398">.</span><span class="ident" id="1720399">pcsp</span><span class="op" id="1720403">,</span>&nbsp;<span class="ident" id="1720405">targetpc</span><span class="op" id="1720413">,</span>&nbsp;<span class="builtintype" id="1720415">true</span><span class="op" id="1720419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1720422">if</span>&nbsp;<span class="ident" id="1720425">x</span><span class="op" id="1720426">&amp;</span><span class="op" id="1720427">(</span><span class="ident" id="1720428">ptrSize</span><span class="op" id="1720435">-</span><span class="num" id="1720436">1</span><span class="op" id="1720437">)</span>&nbsp;<span class="op" id="1720439">!=</span>&nbsp;<span class="num" id="1720442">0</span>&nbsp;<span class="op" id="1720444">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1720448">print</span><span class="op" id="1720453">(</span><span class="string" id="1720454">&#34;invalid&nbsp;spdelta&nbsp;&#34;</span><span class="op" id="1720472">,</span>&nbsp;<span class="ident" id="1720474">hex</span><span class="op" id="1720477">(</span><span class="ident" id="1720478">f</span><span class="op" id="1720479">.</span><span class="ident" id="1720480">entry</span><span class="op" id="1720485">)</span><span class="op" id="1720486">,</span>&nbsp;<span class="string" id="1720488">&#34;&nbsp;&#34;</span><span class="op" id="1720491">,</span>&nbsp;<span class="ident" id="1720493">hex</span><span class="op" id="1720496">(</span><span class="ident" id="1720497">targetpc</span><span class="op" id="1720505">)</span><span class="op" id="1720506">,</span>&nbsp;<span class="string" id="1720508">&#34;&nbsp;&#34;</span><span class="op" id="1720511">,</span>&nbsp;<span class="ident" id="1720513">hex</span><span class="op" id="1720516">(</span><span class="ident" id="1720517">f</span><span class="op" id="1720518">.</span><span class="ident" id="1720519">pcsp</span><span class="op" id="1720523">)</span><span class="op" id="1720524">,</span>&nbsp;<span class="string" id="1720526">&#34;&nbsp;&#34;</span><span class="op" id="1720529">,</span>&nbsp;<span class="ident" id="1720531">x</span><span class="op" id="1720532">,</span>&nbsp;<span class="string" id="1720534">&#34;\n&#34;</span><span class="op" id="1720538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1720541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1720544">return</span>&nbsp;<span class="ident" id="1720551">x</span><br>
<span class="lineno"></span><span class="op" id="1720553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="1720556">func</span>&nbsp;<span class="ident" id="1720561">pcdatavalue</span><span class="op" id="1720572">(</span><span class="ident" id="1720573">f</span>&nbsp;<span class="op" id="1720575">*</span><span class="ident" id="1720576">_func</span><span class="op" id="1720581">,</span>&nbsp;<span class="ident" id="1720583">table</span>&nbsp;<span class="builtintype" id="1720589">int32</span><span class="op" id="1720594">,</span>&nbsp;<span class="ident" id="1720596">targetpc</span>&nbsp;<span class="builtintype" id="1720605">uintptr</span><span class="op" id="1720612">)</span>&nbsp;<span class="builtintype" id="1720614">int32</span>&nbsp;<span class="op" id="1720620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1720623">if</span>&nbsp;<span class="ident" id="1720626">table</span>&nbsp;<span class="op" id="1720632">&lt;</span>&nbsp;<span class="num" id="1720634">0</span>&nbsp;<span class="op" id="1720636">||</span>&nbsp;<span class="ident" id="1720639">table</span>&nbsp;<span class="op" id="1720645">&gt;=</span>&nbsp;<span class="ident" id="1720648">f</span><span class="op" id="1720649">.</span><span class="ident" id="1720650">npcdata</span>&nbsp;<span class="op" id="1720658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1720662">return</span>&nbsp;<span class="op" id="1720669">-</span><span class="num" id="1720670">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1720673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1720676">off</span>&nbsp;<span class="op" id="1720680">:=</span>&nbsp;<span class="op" id="1720683">*</span><span class="op" id="1720684">(</span><span class="op" id="1720685">*</span><span class="builtintype" id="1720686">int32</span><span class="op" id="1720691">)</span><span class="op" id="1720692">(</span><span class="ident" id="1720693">add</span><span class="op" id="1720696">(</span><span class="ident" id="1720697">unsafe</span><span class="op" id="1720703">.</span><span class="ident" id="1720704">Pointer</span><span class="op" id="1720711">(</span><span class="op" id="1720712">&amp;</span><span class="ident" id="1720713">f</span><span class="op" id="1720714">.</span><span class="ident" id="1720715">nfuncdata</span><span class="op" id="1720724">)</span><span class="op" id="1720725">,</span>&nbsp;<span class="ident" id="1720727">unsafe</span><span class="op" id="1720733">.</span><span class="ident" id="1720734">Sizeof</span><span class="op" id="1720740">(</span><span class="ident" id="1720741">f</span><span class="op" id="1720742">.</span><span class="ident" id="1720743">nfuncdata</span><span class="op" id="1720752">)</span><span class="op" id="1720753">+</span><span class="builtintype" id="1720754">uintptr</span><span class="op" id="1720761">(</span><span class="ident" id="1720762">table</span><span class="op" id="1720767">)</span><span class="op" id="1720768">*</span><span class="num" id="1720769">4</span><span class="op" id="1720770">)</span><span class="op" id="1720771">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1720774">return</span>&nbsp;<span class="ident" id="1720781">pcvalue</span><span class="op" id="1720788">(</span><span class="ident" id="1720789">f</span><span class="op" id="1720790">,</span>&nbsp;<span class="ident" id="1720792">off</span><span class="op" id="1720795">,</span>&nbsp;<span class="ident" id="1720797">targetpc</span><span class="op" id="1720805">,</span>&nbsp;<span class="builtintype" id="1720807">true</span><span class="op" id="1720811">)</span><br>
<span class="lineno"></span><span class="op" id="1720813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1720816">func</span>&nbsp;<span class="ident" id="1720821">funcdata</span><span class="op" id="1720829">(</span><span class="ident" id="1720830">f</span>&nbsp;<span class="op" id="1720832">*</span><span class="ident" id="1720833">_func</span><span class="op" id="1720838">,</span>&nbsp;<span class="ident" id="1720840">i</span>&nbsp;<span class="builtintype" id="1720842">int32</span><span class="op" id="1720847">)</span>&nbsp;<span class="ident" id="1720849">unsafe</span><span class="op" id="1720855">.</span><span class="ident" id="1720856">Pointer</span>&nbsp;<span class="op" id="1720864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1720867">if</span>&nbsp;<span class="ident" id="1720870">i</span>&nbsp;<span class="op" id="1720872">&lt;</span>&nbsp;<span class="num" id="1720874">0</span>&nbsp;<span class="op" id="1720876">||</span>&nbsp;<span class="ident" id="1720879">i</span>&nbsp;<span class="op" id="1720881">&gt;=</span>&nbsp;<span class="ident" id="1720884">f</span><span class="op" id="1720885">.</span><span class="ident" id="1720886">nfuncdata</span>&nbsp;<span class="op" id="1720896">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1720900">return</span>&nbsp;<span class="builtintype" id="1720907">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1720912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1720915">p</span>&nbsp;<span class="op" id="1720917">:=</span>&nbsp;<span class="ident" id="1720920">add</span><span class="op" id="1720923">(</span><span class="ident" id="1720924">unsafe</span><span class="op" id="1720930">.</span><span class="ident" id="1720931">Pointer</span><span class="op" id="1720938">(</span><span class="op" id="1720939">&amp;</span><span class="ident" id="1720940">f</span><span class="op" id="1720941">.</span><span class="ident" id="1720942">nfuncdata</span><span class="op" id="1720951">)</span><span class="op" id="1720952">,</span>&nbsp;<span class="ident" id="1720954">unsafe</span><span class="op" id="1720960">.</span><span class="ident" id="1720961">Sizeof</span><span class="op" id="1720967">(</span><span class="ident" id="1720968">f</span><span class="op" id="1720969">.</span><span class="ident" id="1720970">nfuncdata</span><span class="op" id="1720979">)</span><span class="op" id="1720980">+</span><span class="builtintype" id="1720981">uintptr</span><span class="op" id="1720988">(</span><span class="ident" id="1720989">f</span><span class="op" id="1720990">.</span><span class="ident" id="1720991">npcdata</span><span class="op" id="1720998">)</span><span class="op" id="1720999">*</span><span class="num" id="1721000">4</span><span class="op" id="1721001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1721004">if</span>&nbsp;<span class="ident" id="1721007">ptrSize</span>&nbsp;<span class="op" id="1721015">==</span>&nbsp;<span class="num" id="1721018">8</span>&nbsp;<span class="op" id="1721020">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1721023">uintptr</span><span class="op" id="1721030">(</span><span class="ident" id="1721031">p</span><span class="op" id="1721032">)</span><span class="op" id="1721033">&amp;</span><span class="num" id="1721034">4</span>&nbsp;<span class="op" id="1721036">!=</span>&nbsp;<span class="num" id="1721039">0</span>&nbsp;<span class="op" id="1721041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1721045">if</span>&nbsp;<span class="builtintype" id="1721048">uintptr</span><span class="op" id="1721055">(</span><span class="ident" id="1721056">unsafe</span><span class="op" id="1721062">.</span><span class="ident" id="1721063">Pointer</span><span class="op" id="1721070">(</span><span class="ident" id="1721071">f</span><span class="op" id="1721072">)</span><span class="op" id="1721073">)</span><span class="op" id="1721074">&amp;</span><span class="num" id="1721075">4</span>&nbsp;<span class="op" id="1721077">!=</span>&nbsp;<span class="num" id="1721080">0</span>&nbsp;<span class="op" id="1721082">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1721087">println</span><span class="op" id="1721094">(</span><span class="string" id="1721095">&#34;runtime:&nbsp;misaligned&nbsp;func&#34;</span><span class="op" id="1721121">,</span>&nbsp;<span class="ident" id="1721123">f</span><span class="op" id="1721124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1721128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1721132">p</span>&nbsp;<span class="op" id="1721134">=</span>&nbsp;<span class="ident" id="1721136">add</span><span class="op" id="1721139">(</span><span class="ident" id="1721140">p</span><span class="op" id="1721141">,</span>&nbsp;<span class="num" id="1721143">4</span><span class="op" id="1721144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1721147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1721150">return</span>&nbsp;<span class="op" id="1721157">*</span><span class="op" id="1721158">(</span><span class="op" id="1721159">*</span><span class="ident" id="1721160">unsafe</span><span class="op" id="1721166">.</span><span class="ident" id="1721167">Pointer</span><span class="op" id="1721174">)</span><span class="op" id="1721175">(</span><span class="ident" id="1721176">add</span><span class="op" id="1721179">(</span><span class="ident" id="1721180">p</span><span class="op" id="1721181">,</span>&nbsp;<span class="builtintype" id="1721183">uintptr</span><span class="op" id="1721190">(</span><span class="ident" id="1721191">i</span><span class="op" id="1721192">)</span><span class="op" id="1721193">*</span><span class="ident" id="1721194">ptrSize</span><span class="op" id="1721201">)</span><span class="op" id="1721202">)</span><br>
<span class="lineno">255</span><span class="op" id="1721204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1721207">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="1721273">func</span>&nbsp;<span class="ident" id="1721278">step</span><span class="op" id="1721282">(</span><span class="ident" id="1721283">p</span>&nbsp;<span class="op" id="1721285">[</span><span class="op" id="1721286">]</span><span class="builtintype" id="1721287">byte</span><span class="op" id="1721291">,</span>&nbsp;<span class="ident" id="1721293">pc</span>&nbsp;<span class="op" id="1721296">*</span><span class="builtintype" id="1721297">uintptr</span><span class="op" id="1721304">,</span>&nbsp;<span class="ident" id="1721306">val</span>&nbsp;<span class="op" id="1721310">*</span><span class="builtintype" id="1721311">int32</span><span class="op" id="1721316">,</span>&nbsp;<span class="ident" id="1721318">first</span>&nbsp;<span class="builtintype" id="1721324">bool</span><span class="op" id="1721328">)</span>&nbsp;<span class="op" id="1721330">(</span><span class="ident" id="1721331">newp</span>&nbsp;<span class="op" id="1721336">[</span><span class="op" id="1721337">]</span><span class="builtintype" id="1721338">byte</span><span class="op" id="1721342">,</span>&nbsp;<span class="ident" id="1721344">ok</span>&nbsp;<span class="builtintype" id="1721347">bool</span><span class="op" id="1721351">)</span>&nbsp;<span class="op" id="1721353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1721356">p</span><span class="op" id="1721357">,</span>&nbsp;<span class="ident" id="1721359">uvdelta</span>&nbsp;<span class="op" id="1721367">:=</span>&nbsp;<span class="ident" id="1721370">readvarint</span><span class="op" id="1721380">(</span><span class="ident" id="1721381">p</span><span class="op" id="1721382">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1721385">if</span>&nbsp;<span class="ident" id="1721388">uvdelta</span>&nbsp;<span class="op" id="1721396">==</span>&nbsp;<span class="num" id="1721399">0</span>&nbsp;<span class="op" id="1721401">&amp;&amp;</span>&nbsp;<span class="op" id="1721404">!</span><span class="ident" id="1721405">first</span>&nbsp;<span class="op" id="1721411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1721415">return</span>&nbsp;<span class="builtintype" id="1721422">nil</span><span class="op" id="1721425">,</span>&nbsp;<span class="builtintype" id="1721427">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1721434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1721437">if</span>&nbsp;<span class="ident" id="1721440">uvdelta</span><span class="op" id="1721447">&amp;</span><span class="num" id="1721448">1</span>&nbsp;<span class="op" id="1721450">!=</span>&nbsp;<span class="num" id="1721453">0</span>&nbsp;<span class="op" id="1721455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1721459">uvdelta</span>&nbsp;<span class="op" id="1721467">=</span>&nbsp;<span class="op" id="1721469">^</span><span class="op" id="1721470">(</span><span class="ident" id="1721471">uvdelta</span>&nbsp;<span class="op" id="1721479">&gt;&gt;</span>&nbsp;<span class="num" id="1721482">1</span><span class="op" id="1721483">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1721486">}</span>&nbsp;<span class="keyword" id="1721488">else</span>&nbsp;<span class="op" id="1721493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1721497">uvdelta</span>&nbsp;<span class="op" id="1721505">&gt;&gt;=</span>&nbsp;<span class="num" id="1721509">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1721512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1721515">vdelta</span>&nbsp;<span class="op" id="1721522">:=</span>&nbsp;<span class="builtintype" id="1721525">int32</span><span class="op" id="1721530">(</span><span class="ident" id="1721531">uvdelta</span><span class="op" id="1721538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1721541">p</span><span class="op" id="1721542">,</span>&nbsp;<span class="ident" id="1721544">pcdelta</span>&nbsp;<span class="op" id="1721552">:=</span>&nbsp;<span class="ident" id="1721555">readvarint</span><span class="op" id="1721565">(</span><span class="ident" id="1721566">p</span><span class="op" id="1721567">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1721570">*</span><span class="ident" id="1721571">pc</span>&nbsp;<span class="op" id="1721574">+=</span>&nbsp;<span class="builtintype" id="1721577">uintptr</span><span class="op" id="1721584">(</span><span class="ident" id="1721585">pcdelta</span>&nbsp;<span class="op" id="1721593">*</span>&nbsp;<span class="ident" id="1721595">_PCQuantum</span><span class="op" id="1721605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1721608">*</span><span class="ident" id="1721609">val</span>&nbsp;<span class="op" id="1721613">+=</span>&nbsp;<span class="ident" id="1721616">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1721624">return</span>&nbsp;<span class="ident" id="1721631">p</span><span class="op" id="1721632">,</span>&nbsp;<span class="builtintype" id="1721634">true</span><br>
<span class="lineno"></span><span class="op" id="1721639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="1721642">//&nbsp;readvarint&nbsp;reads&nbsp;a&nbsp;varint&nbsp;from&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1721679">func</span>&nbsp;<span class="ident" id="1721684">readvarint</span><span class="op" id="1721694">(</span><span class="ident" id="1721695">p</span>&nbsp;<span class="op" id="1721697">[</span><span class="op" id="1721698">]</span><span class="builtintype" id="1721699">byte</span><span class="op" id="1721703">)</span>&nbsp;<span class="op" id="1721705">(</span><span class="ident" id="1721706">newp</span>&nbsp;<span class="op" id="1721711">[</span><span class="op" id="1721712">]</span><span class="builtintype" id="1721713">byte</span><span class="op" id="1721717">,</span>&nbsp;<span class="ident" id="1721719">val</span>&nbsp;<span class="builtintype" id="1721723">uint32</span><span class="op" id="1721729">)</span>&nbsp;<span class="op" id="1721731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1721734">var</span>&nbsp;<span class="ident" id="1721738">v</span><span class="op" id="1721739">,</span>&nbsp;<span class="ident" id="1721741">shift</span>&nbsp;<span class="builtintype" id="1721747">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1721755">for</span>&nbsp;<span class="op" id="1721759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1721763">b</span>&nbsp;<span class="op" id="1721765">:=</span>&nbsp;<span class="ident" id="1721768">p</span><span class="op" id="1721769">[</span><span class="num" id="1721770">0</span><span class="op" id="1721771">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1721775">p</span>&nbsp;<span class="op" id="1721777">=</span>&nbsp;<span class="ident" id="1721779">p</span><span class="op" id="1721780">[</span><span class="num" id="1721781">1</span><span class="op" id="1721782">:</span><span class="op" id="1721783">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1721787">v</span>&nbsp;<span class="op" id="1721789">|=</span>&nbsp;<span class="op" id="1721792">(</span><span class="builtintype" id="1721793">uint32</span><span class="op" id="1721799">(</span><span class="ident" id="1721800">b</span><span class="op" id="1721801">)</span>&nbsp;<span class="op" id="1721803">&amp;</span>&nbsp;<span class="num" id="1721805">0x7F</span><span class="op" id="1721809">)</span>&nbsp;<span class="op" id="1721811">&lt;&lt;</span>&nbsp;<span class="ident" id="1721814">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1721822">if</span>&nbsp;<span class="ident" id="1721825">b</span><span class="op" id="1721826">&amp;</span><span class="num" id="1721827">0x80</span>&nbsp;<span class="op" id="1721832">==</span>&nbsp;<span class="num" id="1721835">0</span>&nbsp;<span class="op" id="1721837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1721842">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1721850">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1721854">shift</span>&nbsp;<span class="op" id="1721860">+=</span>&nbsp;<span class="num" id="1721863">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1721866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1721869">return</span>&nbsp;<span class="ident" id="1721876">p</span><span class="op" id="1721877">,</span>&nbsp;<span class="ident" id="1721879">v</span><br>
<span class="lineno"></span><span class="op" id="1721881">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
