<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2353401">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2353456">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2353510">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2353561">package</span>&nbsp;<span class="ident" id="2353569">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2353575">func</span>&nbsp;<span class="ident" id="2353580">isOddInt</span><span class="op" id="2353588">(</span><span class="ident" id="2353589">x</span>&nbsp;<span class="builtintype" id="2353591">float64</span><span class="op" id="2353598">)</span>&nbsp;<span class="builtintype" id="2353600">bool</span>&nbsp;<span class="op" id="2353605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2353608">xi</span><span class="op" id="2353610">,</span>&nbsp;<span class="ident" id="2353612">xf</span>&nbsp;<span class="op" id="2353615">:=</span>&nbsp;<span class="ident" id="2353618"><a href="/math/modf.go.html#2351752">Modf</a></span><span class="op" id="2353622">(</span><span class="ident" id="2353623"><a href="/math/pow.go.html#2353589">x</a></span><span class="op" id="2353624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2353627">return</span>&nbsp;<span class="ident" id="2353634"><a href="/math/pow.go.html#2353612">xf</a></span>&nbsp;<span class="op" id="2353637">==</span>&nbsp;<span class="num" id="2353640">0</span>&nbsp;<span class="op" id="2353642">&amp;&amp;</span>&nbsp;<span class="ident" id="2353645">int64</span><span class="op" id="2353650">(</span><span class="ident" id="2353651"><a href="/math/pow.go.html#2353608">xi</a></span><span class="op" id="2353653">)</span><span class="op" id="2353654">&amp;</span><span class="num" id="2353655">1</span>&nbsp;<span class="op" id="2353657">==</span>&nbsp;<span class="num" id="2353660">1</span><br>
<span class="lineno">10</span><span class="op" id="2353662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2353665">//&nbsp;Special&nbsp;cases&nbsp;taken&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_pow.c</span><br>
<span class="lineno"></span><span class="comment" id="2353733">//&nbsp;updated&nbsp;by&nbsp;IEEE&nbsp;Std.&nbsp;754-2008&nbsp;&#34;Section&nbsp;9.2.1&nbsp;Special&nbsp;values&#34;.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2353799">//&nbsp;Pow&nbsp;returns&nbsp;x**y,&nbsp;the&nbsp;base-x&nbsp;exponential&nbsp;of&nbsp;y.</span><br>
<span class="lineno"></span><span class="comment" id="2353849">//</span><br>
<span class="lineno"></span><span class="comment" id="2353852">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="2353885">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;±0)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2353914">//&nbsp;&nbsp;&nbsp;&nbspPow(1,&nbsp;y)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;y</span><br>
<span class="lineno">20</span><span class="comment" id="2353941">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;1)&nbsp;=&nbsp;x&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2353968">//&nbsp;&nbsp;&nbsp;&nbspPow(NaN,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2353989">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2354010">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±Inf&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2354058">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;-Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">25</span><span class="comment" id="2354083">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;+Inf)&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span><span class="comment" id="2354106">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;finite&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2354168">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±0&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2354214">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;finite&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2354274">//&nbsp;&nbsp;&nbsp;&nbspPow(-1,&nbsp;±Inf)&nbsp;=&nbsp;1</span><br>
<span class="lineno">30</span><span class="comment" id="2354296">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2354331">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2354364">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2354397">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2354432">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;y&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">35</span><span class="comment" id="2354465">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;y&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2354496">//&nbsp;&nbsp;&nbsp;&nbspPow(-Inf,&nbsp;y)&nbsp;=&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno"></span><span class="comment" id="2354526">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;y)&nbsp;=&nbsp;NaN&nbsp;for&nbsp;finite&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;finite&nbsp;non-integer&nbsp;y</span><br>
<span class="lineno"></span><span class="keyword" id="2354587">func</span>&nbsp;<span class="ident" id="2354592">Pow</span><span class="op" id="2354595">(</span><span class="ident" id="2354596">x</span><span class="op" id="2354597">,</span>&nbsp;<span class="ident" id="2354599">y</span>&nbsp;<span class="builtintype" id="2354601">float64</span><span class="op" id="2354608">)</span>&nbsp;<span class="builtintype" id="2354610">float64</span>&nbsp;<span class="op" id="2354618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354621">switch</span>&nbsp;<span class="op" id="2354628">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354631">case</span>&nbsp;<span class="ident" id="2354636"><a href="/math/pow.go.html#2354599">y</a></span>&nbsp;<span class="op" id="2354638">==</span>&nbsp;<span class="num" id="2354641">0</span>&nbsp;<span class="op" id="2354643">||</span>&nbsp;<span class="ident" id="2354646"><a href="/math/pow.go.html#2354596">x</a></span>&nbsp;<span class="op" id="2354648">==</span>&nbsp;<span class="num" id="2354651">1</span><span class="op" id="2354652">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354656">return</span>&nbsp;<span class="num" id="2354663">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354666">case</span>&nbsp;<span class="ident" id="2354671"><a href="/math/pow.go.html#2354599">y</a></span>&nbsp;<span class="op" id="2354673">==</span>&nbsp;<span class="num" id="2354676">1</span><span class="op" id="2354677">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354681">return</span>&nbsp;<span class="ident" id="2354688"><a href="/math/pow.go.html#2354596">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354691">case</span>&nbsp;<span class="ident" id="2354696"><a href="/math/pow.go.html#2354599">y</a></span>&nbsp;<span class="op" id="2354698">==</span>&nbsp;<span class="num" id="2354701">0.5</span><span class="op" id="2354704">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354708">return</span>&nbsp;<span class="ident" id="2354715"><a href="/math/sqrt.go.html#2372684">Sqrt</a></span><span class="op" id="2354719">(</span><span class="ident" id="2354720"><a href="/math/pow.go.html#2354596">x</a></span><span class="op" id="2354721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354724">case</span>&nbsp;<span class="ident" id="2354729"><a href="/math/pow.go.html#2354599">y</a></span>&nbsp;<span class="op" id="2354731">==</span>&nbsp;<span class="op" id="2354734">-</span><span class="num" id="2354735">0.5</span><span class="op" id="2354738">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354742">return</span>&nbsp;<span class="num" id="2354749">1</span>&nbsp;<span class="op" id="2354751">/</span>&nbsp;<span class="ident" id="2354753"><a href="/math/sqrt.go.html#2372684">Sqrt</a></span><span class="op" id="2354757">(</span><span class="ident" id="2354758"><a href="/math/pow.go.html#2354596">x</a></span><span class="op" id="2354759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354762">case</span>&nbsp;<span class="ident" id="2354767"><a href="/math/bits.go.html#2252065">IsNaN</a></span><span class="op" id="2354772">(</span><span class="ident" id="2354773"><a href="/math/pow.go.html#2354596">x</a></span><span class="op" id="2354774">)</span>&nbsp;<span class="op" id="2354776">||</span>&nbsp;<span class="ident" id="2354779"><a href="/math/bits.go.html#2252065">IsNaN</a></span><span class="op" id="2354784">(</span><span class="ident" id="2354785"><a href="/math/pow.go.html#2354599">y</a></span><span class="op" id="2354786">)</span><span class="op" id="2354787">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354791">return</span>&nbsp;<span class="ident" id="2354798"><a href="/math/bits.go.html#2251945">NaN</a></span><span class="op" id="2354801">(</span><span class="op" id="2354802">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354805">case</span>&nbsp;<span class="ident" id="2354810"><a href="/math/pow.go.html#2354596">x</a></span>&nbsp;<span class="op" id="2354812">==</span>&nbsp;<span class="num" id="2354815">0</span><span class="op" id="2354816">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354820">switch</span>&nbsp;<span class="op" id="2354827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354831">case</span>&nbsp;<span class="ident" id="2354836"><a href="/math/pow.go.html#2354599">y</a></span>&nbsp;<span class="op" id="2354838">&lt;</span>&nbsp;<span class="num" id="2354840">0</span><span class="op" id="2354841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354846">if</span>&nbsp;<span class="ident" id="2354849"><a href="/math/pow.go.html#2353580">isOddInt</a></span><span class="op" id="2354857">(</span><span class="ident" id="2354858"><a href="/math/pow.go.html#2354599">y</a></span><span class="op" id="2354859">)</span>&nbsp;<span class="op" id="2354861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354867">return</span>&nbsp;<span class="ident" id="2354874"><a href="/math/copysign.go.html#2257108">Copysign</a></span><span class="op" id="2354882">(</span><span class="ident" id="2354883"><a href="/math/bits.go.html#2251765">Inf</a></span><span class="op" id="2354886">(</span><span class="num" id="2354887">1</span><span class="op" id="2354888">)</span><span class="op" id="2354889">,</span>&nbsp;<span class="ident" id="2354891"><a href="/math/pow.go.html#2354596">x</a></span><span class="op" id="2354892">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2354897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354902">return</span>&nbsp;<span class="ident" id="2354909"><a href="/math/bits.go.html#2251765">Inf</a></span><span class="op" id="2354912">(</span><span class="num" id="2354913">1</span><span class="op" id="2354914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354918">case</span>&nbsp;<span class="ident" id="2354923"><a href="/math/pow.go.html#2354599">y</a></span>&nbsp;<span class="op" id="2354925">&gt;</span>&nbsp;<span class="num" id="2354927">0</span><span class="op" id="2354928">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354933">if</span>&nbsp;<span class="ident" id="2354936"><a href="/math/pow.go.html#2353580">isOddInt</a></span><span class="op" id="2354944">(</span><span class="ident" id="2354945"><a href="/math/pow.go.html#2354599">y</a></span><span class="op" id="2354946">)</span>&nbsp;<span class="op" id="2354948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354954">return</span>&nbsp;<span class="ident" id="2354961"><a href="/math/pow.go.html#2354596">x</a></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2354966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354971">return</span>&nbsp;<span class="num" id="2354978">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2354982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2354985">case</span>&nbsp;<span class="ident" id="2354990"><a href="/math/bits.go.html#2252563">IsInf</a></span><span class="op" id="2354995">(</span><span class="ident" id="2354996"><a href="/math/pow.go.html#2354599">y</a></span><span class="op" id="2354997">,</span>&nbsp;<span class="num" id="2354999">0</span><span class="op" id="2355000">)</span><span class="op" id="2355001">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355005">switch</span>&nbsp;<span class="op" id="2355012">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355016">case</span>&nbsp;<span class="ident" id="2355021"><a href="/math/pow.go.html#2354596">x</a></span>&nbsp;<span class="op" id="2355023">==</span>&nbsp;<span class="op" id="2355026">-</span><span class="num" id="2355027">1</span><span class="op" id="2355028">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355033">return</span>&nbsp;<span class="num" id="2355040">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355044">case</span>&nbsp;<span class="op" id="2355049">(</span><span class="ident" id="2355050"><a href="/math/abs.go.html#2240123">Abs</a></span><span class="op" id="2355053">(</span><span class="ident" id="2355054"><a href="/math/pow.go.html#2354596">x</a></span><span class="op" id="2355055">)</span>&nbsp;<span class="op" id="2355057">&lt;</span>&nbsp;<span class="num" id="2355059">1</span><span class="op" id="2355060">)</span>&nbsp;<span class="op" id="2355062">==</span>&nbsp;<span class="ident" id="2355065"><a href="/math/bits.go.html#2252563">IsInf</a></span><span class="op" id="2355070">(</span><span class="ident" id="2355071"><a href="/math/pow.go.html#2354599">y</a></span><span class="op" id="2355072">,</span>&nbsp;<span class="num" id="2355074">1</span><span class="op" id="2355075">)</span><span class="op" id="2355076">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355081">return</span>&nbsp;<span class="num" id="2355088">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355092">default</span><span class="op" id="2355099">:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355104">return</span>&nbsp;<span class="ident" id="2355111"><a href="/math/bits.go.html#2251765">Inf</a></span><span class="op" id="2355114">(</span><span class="num" id="2355115">1</span><span class="op" id="2355116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2355120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355123">case</span>&nbsp;<span class="ident" id="2355128"><a href="/math/bits.go.html#2252563">IsInf</a></span><span class="op" id="2355133">(</span><span class="ident" id="2355134"><a href="/math/pow.go.html#2354596">x</a></span><span class="op" id="2355135">,</span>&nbsp;<span class="num" id="2355137">0</span><span class="op" id="2355138">)</span><span class="op" id="2355139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355143">if</span>&nbsp;<span class="ident" id="2355146"><a href="/math/bits.go.html#2252563">IsInf</a></span><span class="op" id="2355151">(</span><span class="ident" id="2355152"><a href="/math/pow.go.html#2354596">x</a></span><span class="op" id="2355153">,</span>&nbsp;<span class="op" id="2355155">-</span><span class="num" id="2355156">1</span><span class="op" id="2355157">)</span>&nbsp;<span class="op" id="2355159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355164">return</span>&nbsp;<span class="ident" id="2355171"><a href="/math/pow.go.html#2354592">Pow</a></span><span class="op" id="2355174">(</span><span class="num" id="2355175">1</span><span class="op" id="2355176">/</span><span class="ident" id="2355177"><a href="/math/pow.go.html#2354596">x</a></span><span class="op" id="2355178">,</span>&nbsp;<span class="op" id="2355180">-</span><span class="ident" id="2355181"><a href="/math/pow.go.html#2354599">y</a></span><span class="op" id="2355182">)</span>&nbsp;<span class="comment" id="2355184">//&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2355201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355205">switch</span>&nbsp;<span class="op" id="2355212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355216">case</span>&nbsp;<span class="ident" id="2355221"><a href="/math/pow.go.html#2354599">y</a></span>&nbsp;<span class="op" id="2355223">&lt;</span>&nbsp;<span class="num" id="2355225">0</span><span class="op" id="2355226">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355231">return</span>&nbsp;<span class="num" id="2355238">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355242">case</span>&nbsp;<span class="ident" id="2355247"><a href="/math/pow.go.html#2354599">y</a></span>&nbsp;<span class="op" id="2355249">&gt;</span>&nbsp;<span class="num" id="2355251">0</span><span class="op" id="2355252">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355257">return</span>&nbsp;<span class="ident" id="2355264"><a href="/math/bits.go.html#2251765">Inf</a></span><span class="op" id="2355267">(</span><span class="num" id="2355268">1</span><span class="op" id="2355269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2355273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2355276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355280">absy</span>&nbsp;<span class="op" id="2355285">:=</span>&nbsp;<span class="ident" id="2355288"><a href="/math/pow.go.html#2354599">y</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355291">flip</span>&nbsp;<span class="op" id="2355296">:=</span>&nbsp;<span class="builtintype" id="2355299">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355306">if</span>&nbsp;<span class="ident" id="2355309"><a href="/math/pow.go.html#2355280">absy</a></span>&nbsp;<span class="op" id="2355314">&lt;</span>&nbsp;<span class="num" id="2355316">0</span>&nbsp;<span class="op" id="2355318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355322"><a href="/math/pow.go.html#2355280">absy</a></span>&nbsp;<span class="op" id="2355327">=</span>&nbsp;<span class="op" id="2355329">-</span><span class="ident" id="2355330"><a href="/math/pow.go.html#2355280">absy</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355337"><a href="/math/pow.go.html#2355291">flip</a></span>&nbsp;<span class="op" id="2355342">=</span>&nbsp;<span class="builtintype" id="2355344">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2355350">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355353">yi</span><span class="op" id="2355355">,</span>&nbsp;<span class="ident" id="2355357">yf</span>&nbsp;<span class="op" id="2355360">:=</span>&nbsp;<span class="ident" id="2355363"><a href="/math/modf.go.html#2351752">Modf</a></span><span class="op" id="2355367">(</span><span class="ident" id="2355368"><a href="/math/pow.go.html#2355280">absy</a></span><span class="op" id="2355372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355375">if</span>&nbsp;<span class="ident" id="2355378"><a href="/math/pow.go.html#2355357">yf</a></span>&nbsp;<span class="op" id="2355381">!=</span>&nbsp;<span class="num" id="2355384">0</span>&nbsp;<span class="op" id="2355386">&amp;&amp;</span>&nbsp;<span class="ident" id="2355389"><a href="/math/pow.go.html#2354596">x</a></span>&nbsp;<span class="op" id="2355391">&lt;</span>&nbsp;<span class="num" id="2355393">0</span>&nbsp;<span class="op" id="2355395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355399">return</span>&nbsp;<span class="ident" id="2355406"><a href="/math/bits.go.html#2251945">NaN</a></span><span class="op" id="2355409">(</span><span class="op" id="2355410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2355413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355416">if</span>&nbsp;<span class="ident" id="2355419"><a href="/math/pow.go.html#2355353">yi</a></span>&nbsp;<span class="op" id="2355422">&gt;=</span>&nbsp;<span class="num" id="2355425">1</span><span class="op" id="2355426">&lt;&lt;</span><span class="num" id="2355428">63</span>&nbsp;<span class="op" id="2355431">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355435">return</span>&nbsp;<span class="ident" id="2355442"><a href="/math/exp.go.html#2270578">Exp</a></span><span class="op" id="2355445">(</span><span class="ident" id="2355446"><a href="/math/pow.go.html#2354599">y</a></span>&nbsp;<span class="op" id="2355448">*</span>&nbsp;<span class="ident" id="2355450"><a href="/math/log.go.html#2341364">Log</a></span><span class="op" id="2355453">(</span><span class="ident" id="2355454"><a href="/math/pow.go.html#2354596">x</a></span><span class="op" id="2355455">)</span><span class="op" id="2355456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2355459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2355463">//&nbsp;ans&nbsp;=&nbsp;a1&nbsp;*&nbsp;2**ae&nbsp;(=&nbsp;1&nbsp;for&nbsp;now).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355499">a1</span>&nbsp;<span class="op" id="2355502">:=</span>&nbsp;<span class="num" id="2355505">1.0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355510">ae</span>&nbsp;<span class="op" id="2355513">:=</span>&nbsp;<span class="num" id="2355516">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2355520">//&nbsp;ans&nbsp;*=&nbsp;x**yf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355537">if</span>&nbsp;<span class="ident" id="2355540"><a href="/math/pow.go.html#2355357">yf</a></span>&nbsp;<span class="op" id="2355543">!=</span>&nbsp;<span class="num" id="2355546">0</span>&nbsp;<span class="op" id="2355548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355552">if</span>&nbsp;<span class="ident" id="2355555"><a href="/math/pow.go.html#2355357">yf</a></span>&nbsp;<span class="op" id="2355558">&gt;</span>&nbsp;<span class="num" id="2355560">0.5</span>&nbsp;<span class="op" id="2355564">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355569"><a href="/math/pow.go.html#2355357">yf</a></span><span class="op" id="2355571">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355577"><a href="/math/pow.go.html#2355353">yi</a></span><span class="op" id="2355579">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2355584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355588"><a href="/math/pow.go.html#2355499">a1</a></span>&nbsp;<span class="op" id="2355591">=</span>&nbsp;<span class="ident" id="2355593"><a href="/math/exp.go.html#2270578">Exp</a></span><span class="op" id="2355596">(</span><span class="ident" id="2355597"><a href="/math/pow.go.html#2355357">yf</a></span>&nbsp;<span class="op" id="2355600">*</span>&nbsp;<span class="ident" id="2355602"><a href="/math/log.go.html#2341364">Log</a></span><span class="op" id="2355605">(</span><span class="ident" id="2355606"><a href="/math/pow.go.html#2354596">x</a></span><span class="op" id="2355607">)</span><span class="op" id="2355608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2355611">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2355615">//&nbsp;ans&nbsp;*=&nbsp;x**yi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2355632">//&nbsp;by&nbsp;multiplying&nbsp;in&nbsp;successive&nbsp;squarings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2355675">//&nbsp;of&nbsp;x&nbsp;according&nbsp;to&nbsp;bits&nbsp;of&nbsp;yi.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2355709">//&nbsp;accumulate&nbsp;powers&nbsp;of&nbsp;two&nbsp;into&nbsp;exp.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355748">x1</span><span class="op" id="2355750">,</span>&nbsp;<span class="ident" id="2355752">xe</span>&nbsp;<span class="op" id="2355755">:=</span>&nbsp;<span class="ident" id="2355758"><a href="/math/frexp.go.html#2285214">Frexp</a></span><span class="op" id="2355763">(</span><span class="ident" id="2355764"><a href="/math/pow.go.html#2354596">x</a></span><span class="op" id="2355765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355768">for</span>&nbsp;<span class="ident" id="2355772">i</span>&nbsp;<span class="op" id="2355774">:=</span>&nbsp;<span class="ident" id="2355777">int64</span><span class="op" id="2355782">(</span><span class="ident" id="2355783"><a href="/math/pow.go.html#2355353">yi</a></span><span class="op" id="2355785">)</span><span class="op" id="2355786">;</span>&nbsp;<span class="ident" id="2355788"><a href="/math/pow.go.html#2355772">i</a></span>&nbsp;<span class="op" id="2355790">!=</span>&nbsp;<span class="num" id="2355793">0</span><span class="op" id="2355794">;</span>&nbsp;<span class="ident" id="2355796"><a href="/math/pow.go.html#2355772">i</a></span>&nbsp;<span class="op" id="2355798">&gt;&gt;=</span>&nbsp;<span class="num" id="2355802">1</span>&nbsp;<span class="op" id="2355804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355808">if</span>&nbsp;<span class="ident" id="2355811"><a href="/math/pow.go.html#2355772">i</a></span><span class="op" id="2355812">&amp;</span><span class="num" id="2355813">1</span>&nbsp;<span class="op" id="2355815">==</span>&nbsp;<span class="num" id="2355818">1</span>&nbsp;<span class="op" id="2355820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355825"><a href="/math/pow.go.html#2355499">a1</a></span>&nbsp;<span class="op" id="2355828">*=</span>&nbsp;<span class="ident" id="2355831"><a href="/math/pow.go.html#2355748">x1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355837"><a href="/math/pow.go.html#2355510">ae</a></span>&nbsp;<span class="op" id="2355840">+=</span>&nbsp;<span class="ident" id="2355843"><a href="/math/pow.go.html#2355752">xe</a></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2355848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355852"><a href="/math/pow.go.html#2355748">x1</a></span>&nbsp;<span class="op" id="2355855">*=</span>&nbsp;<span class="ident" id="2355858"><a href="/math/pow.go.html#2355748">x1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355863"><a href="/math/pow.go.html#2355752">xe</a></span>&nbsp;<span class="op" id="2355866">&lt;&lt;=</span>&nbsp;<span class="num" id="2355870">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355874">if</span>&nbsp;<span class="ident" id="2355877"><a href="/math/pow.go.html#2355748">x1</a></span>&nbsp;<span class="op" id="2355880">&lt;</span>&nbsp;<span class="num" id="2355882">.5</span>&nbsp;<span class="op" id="2355885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355890"><a href="/math/pow.go.html#2355748">x1</a></span>&nbsp;<span class="op" id="2355893">+=</span>&nbsp;<span class="ident" id="2355896"><a href="/math/pow.go.html#2355748">x1</a></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2355902"><a href="/math/pow.go.html#2355752">xe</a></span><span class="op" id="2355904">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2355909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2355912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2355916">//&nbsp;ans&nbsp;=&nbsp;a1*2**ae</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2355935">//&nbsp;if&nbsp;flip&nbsp;{&nbsp;ans&nbsp;=&nbsp;1&nbsp;/&nbsp;ans&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2355965">//&nbsp;but&nbsp;in&nbsp;the&nbsp;opposite&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2355995">if</span>&nbsp;<span class="ident" id="2355998"><a href="/math/pow.go.html#2355291">flip</a></span>&nbsp;<span class="op" id="2356003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2356007"><a href="/math/pow.go.html#2355499">a1</a></span>&nbsp;<span class="op" id="2356010">=</span>&nbsp;<span class="num" id="2356012">1</span>&nbsp;<span class="op" id="2356014">/</span>&nbsp;<span class="ident" id="2356016"><a href="/math/pow.go.html#2355499">a1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2356021"><a href="/math/pow.go.html#2355510">ae</a></span>&nbsp;<span class="op" id="2356024">=</span>&nbsp;<span class="op" id="2356026">-</span><span class="ident" id="2356027"><a href="/math/pow.go.html#2355510">ae</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2356031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2356034">return</span>&nbsp;<span class="ident" id="2356041"><a href="/math/ldexp.go.html#2326641">Ldexp</a></span><span class="op" id="2356046">(</span><span class="ident" id="2356047"><a href="/math/pow.go.html#2355499">a1</a></span><span class="op" id="2356049">,</span>&nbsp;<span class="ident" id="2356051"><a href="/math/pow.go.html#2355510">ae</a></span><span class="op" id="2356053">)</span><br>
<span class="lineno"></span><span class="op" id="2356055">}</span>
</div>
</body>
</html>
