<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5354940">package</span>&nbsp;<span class="ident" id="5354948">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5354954">import</span>&nbsp;<span class="op" id="5354961">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5354964">&#34;io&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5354971">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5354994">&#34;lonnie.io/e8vm/link8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5355017">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="comment" id="5355020">//&nbsp;BuildSingleFile&nbsp;builds&nbsp;a&nbsp;package&nbsp;named&nbsp;&#34;main&#34;&nbsp;from&nbsp;a&nbsp;single&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5355089">func</span>&nbsp;<span class="ident" id="5355094">BuildSingleFile</span><span class="op" id="5355109">(</span><span class="ident" id="5355110">f</span>&nbsp;<span class="builtintype" id="5355112">string</span><span class="op" id="5355118">,</span>&nbsp;<span class="ident" id="5355120">rc</span>&nbsp;<span class="ident" id="5355123"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5354964">io</a></span><span class="op" id="5355125">.</span><span class="ident" id="5355126">ReadCloser</span><span class="op" id="5355136">)</span>&nbsp;<span class="op" id="5355138">(</span><span class="op" id="5355139">[</span><span class="op" id="5355140">]</span><span class="builtintype" id="5355141">byte</span><span class="op" id="5355145">,</span>&nbsp;<span class="op" id="5355147">[</span><span class="op" id="5355148">]</span><span class="op" id="5355149">*</span><span class="ident" id="5355150"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5354971">lex8</a></span><span class="op" id="5355154">.</span><span class="ident" id="5355155">Error</span><span class="op" id="5355160">)</span>&nbsp;<span class="op" id="5355162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355165">p</span>&nbsp;<span class="op" id="5355167">:=</span>&nbsp;<span class="ident" id="5355170"><a href="/lonnie.io/e8vm/asm8/parser.go.html#5352926">newParser</a></span><span class="op" id="5355179">(</span><span class="ident" id="5355180"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355110">f</a></span><span class="op" id="5355181">,</span>&nbsp;<span class="ident" id="5355183"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355120">rc</a></span><span class="op" id="5355185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355188">file</span>&nbsp;<span class="op" id="5355193">:=</span>&nbsp;<span class="ident" id="5355196"><a href="/lonnie.io/e8vm/asm8/parse_file.go.html#5345908">parseFile</a></span><span class="op" id="5355205">(</span><span class="ident" id="5355206"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355165">p</a></span><span class="op" id="5355207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355210">if</span>&nbsp;<span class="ident" id="5355213">es</span>&nbsp;<span class="op" id="5355216">:=</span>&nbsp;<span class="ident" id="5355219"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355165">p</a></span><span class="op" id="5355220">.</span><span class="ident" id="5355221">Errs</span><span class="op" id="5355225">(</span><span class="op" id="5355226">)</span><span class="op" id="5355227">;</span>&nbsp;<span class="ident" id="5355229"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355213">es</a></span>&nbsp;<span class="op" id="5355232">!=</span>&nbsp;<span class="ident" id="5355235">nil</span>&nbsp;<span class="op" id="5355239">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355243">return</span>&nbsp;<span class="ident" id="5355250">nil</span><span class="op" id="5355253">,</span>&nbsp;<span class="ident" id="5355255"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355213">es</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355263">pkgName</span>&nbsp;<span class="op" id="5355271">:=</span>&nbsp;<span class="string" id="5355274">&#34;main&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355282">pkg</span>&nbsp;<span class="op" id="5355286">:=</span>&nbsp;<span class="ident" id="5355289"><a href="/lonnie.io/e8vm/asm8/package.go.html#5345448">newPkg</a></span><span class="op" id="5355295">(</span><span class="ident" id="5355296"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355263">pkgName</a></span><span class="op" id="5355303">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355306"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355282">pkg</a></span><span class="op" id="5355309">.</span><span class="ident" id="5355310">AddFile</span><span class="op" id="5355317">(</span><span class="ident" id="5355318"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355188">file</a></span><span class="op" id="5355322">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355326">b</span>&nbsp;<span class="op" id="5355328">:=</span>&nbsp;<span class="ident" id="5355331"><a href="/lonnie.io/e8vm/asm8/builder.go.html#5326994">newBuilder</a></span><span class="op" id="5355341">(</span><span class="op" id="5355342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355345">main</span>&nbsp;<span class="op" id="5355350">:=</span>&nbsp;<span class="ident" id="5355353"><a href="/lonnie.io/e8vm/asm8/build_lib.go.html#5325712">buildLib</a></span><span class="op" id="5355361">(</span><span class="ident" id="5355362"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355326">b</a></span><span class="op" id="5355363">,</span>&nbsp;<span class="ident" id="5355365"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355282">pkg</a></span><span class="op" id="5355368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355371">if</span>&nbsp;<span class="ident" id="5355374">es</span>&nbsp;<span class="op" id="5355377">:=</span>&nbsp;<span class="ident" id="5355380"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355326">b</a></span><span class="op" id="5355381">.</span><span class="ident" id="5355382">Errs</span><span class="op" id="5355386">(</span><span class="op" id="5355387">)</span><span class="op" id="5355388">;</span>&nbsp;<span class="ident" id="5355390"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355374">es</a></span>&nbsp;<span class="op" id="5355393">!=</span>&nbsp;<span class="ident" id="5355396">nil</span>&nbsp;<span class="op" id="5355400">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355404">return</span>&nbsp;<span class="ident" id="5355411">nil</span><span class="op" id="5355414">,</span>&nbsp;<span class="ident" id="5355416"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355374">es</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355424">ret</span><span class="op" id="5355427">,</span>&nbsp;<span class="ident" id="5355429">e</span>&nbsp;<span class="op" id="5355431">:=</span>&nbsp;<span class="ident" id="5355434"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5354994">link8</a></span><span class="op" id="5355439">.</span><span class="ident" id="5355440">LinkMain</span><span class="op" id="5355448">(</span><span class="ident" id="5355449"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355345">main</a></span><span class="op" id="5355453">.</span><span class="ident" id="5355454">Package</span><span class="op" id="5355461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355464">if</span>&nbsp;<span class="ident" id="5355467"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355429">e</a></span>&nbsp;<span class="op" id="5355469">!=</span>&nbsp;<span class="ident" id="5355472">nil</span>&nbsp;<span class="op" id="5355476">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355480">return</span>&nbsp;<span class="ident" id="5355487">nil</span><span class="op" id="5355490">,</span>&nbsp;<span class="ident" id="5355492"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5354971">lex8</a></span><span class="op" id="5355496">.</span><span class="ident" id="5355497">SingleErr</span><span class="op" id="5355506">(</span><span class="ident" id="5355507"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355429">e</a></span><span class="op" id="5355508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355515">return</span>&nbsp;<span class="ident" id="5355522"><a href="/lonnie.io/e8vm/asm8/single_file.go.html#5355424">ret</a></span><span class="op" id="5355525">,</span>&nbsp;<span class="ident" id="5355527">nil</span><br>
<span class="lineno"></span><span class="op" id="5355531">}</span>
</div>
</body>
</html>
