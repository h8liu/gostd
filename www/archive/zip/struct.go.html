<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5696277">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5696332">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5696386">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5696437">/*<br>
<span class="lineno"></span>Package&nbsp;zip&nbsp;provides&nbsp;support&nbsp;for&nbsp;reading&nbsp;and&nbsp;writing&nbsp;ZIP&nbsp;archives.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>See:&nbsp;http://www.pkware.com/documents/casestudies/APPNOTE.TXT<br>
<span class="lineno"></span><br>
<span class="lineno">10</span>This&nbsp;package&nbsp;does&nbsp;not&nbsp;support&nbsp;disk&nbsp;spanning.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>A&nbsp;note&nbsp;about&nbsp;ZIP64:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>To&nbsp;be&nbsp;backwards&nbsp;compatible&nbsp;the&nbsp;FileHeader&nbsp;has&nbsp;both&nbsp;32&nbsp;and&nbsp;64&nbsp;bit&nbsp;Size<br>
<span class="lineno">15</span>fields.&nbsp;The&nbsp;64&nbsp;bit&nbsp;fields&nbsp;will&nbsp;always&nbsp;contain&nbsp;the&nbsp;correct&nbsp;value&nbsp;and<br>
<span class="lineno"></span>for&nbsp;normal&nbsp;archives&nbsp;both&nbsp;fields&nbsp;will&nbsp;be&nbsp;the&nbsp;same.&nbsp;For&nbsp;files&nbsp;requiring<br>
<span class="lineno"></span>the&nbsp;ZIP64&nbsp;format&nbsp;the&nbsp;32&nbsp;bit&nbsp;fields&nbsp;will&nbsp;be&nbsp;0xffffffff&nbsp;and&nbsp;the&nbsp;64&nbsp;bit<br>
<span class="lineno"></span>fields&nbsp;must&nbsp;be&nbsp;used&nbsp;instead.<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno">20</span><span class="keyword" id="5696946">package</span>&nbsp;<span class="ident" id="5696954">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5696959">import</span>&nbsp;<span class="op" id="5696966">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5696969">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5696975">&#34;path&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5696983">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5696990">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5696993">//&nbsp;Compression&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="5697017">const</span>&nbsp;<span class="op" id="5697023">(</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697026">Store</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5697034">uint16</span>&nbsp;<span class="op" id="5697041">=</span>&nbsp;<span class="num" id="5697043">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697046">Deflate</span>&nbsp;<span class="builtintype" id="5697054">uint16</span>&nbsp;<span class="op" id="5697061">=</span>&nbsp;<span class="num" id="5697063">8</span><br>
<span class="lineno"></span><span class="op" id="5697065">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5697068">const</span>&nbsp;<span class="op" id="5697074">(</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697077">fileHeaderSignature</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5697102">=</span>&nbsp;<span class="num" id="5697104">0x04034b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697116">directoryHeaderSignature</span>&nbsp;<span class="op" id="5697141">=</span>&nbsp;<span class="num" id="5697143">0x02014b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697155">directoryEndSignature</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5697180">=</span>&nbsp;<span class="num" id="5697182">0x06054b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697194">directory64LocSignature</span>&nbsp;&nbsp;<span class="op" id="5697219">=</span>&nbsp;<span class="num" id="5697221">0x07064b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697233">directory64EndSignature</span>&nbsp;&nbsp;<span class="op" id="5697258">=</span>&nbsp;<span class="num" id="5697260">0x06064b50</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697272">dataDescriptorSignature</span>&nbsp;&nbsp;<span class="op" id="5697297">=</span>&nbsp;<span class="num" id="5697299">0x08074b50</span>&nbsp;<span class="comment" id="5697310">//&nbsp;de-facto&nbsp;standard;&nbsp;required&nbsp;by&nbsp;OS&nbsp;X&nbsp;Finder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697357">fileHeaderLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5697382">=</span>&nbsp;<span class="num" id="5697384">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5697395">//&nbsp;+&nbsp;filename&nbsp;+&nbsp;extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697418">directoryHeaderLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5697443">=</span>&nbsp;<span class="num" id="5697445">46</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5697456">//&nbsp;+&nbsp;filename&nbsp;+&nbsp;extra&nbsp;+&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697489">directoryEndLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5697514">=</span>&nbsp;<span class="num" id="5697516">22</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5697527">//&nbsp;+&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697541">dataDescriptorLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5697566">=</span>&nbsp;<span class="num" id="5697568">16</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5697579">//&nbsp;four&nbsp;uint32:&nbsp;descriptor&nbsp;signature,&nbsp;crc32,&nbsp;compressed&nbsp;size,&nbsp;size</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697647">dataDescriptor64Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5697672">=</span>&nbsp;<span class="num" id="5697674">24</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5697685">//&nbsp;descriptor&nbsp;with&nbsp;8&nbsp;byte&nbsp;sizes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697718">directory64LocLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5697743">=</span>&nbsp;<span class="num" id="5697745">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5697756">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697760">directory64EndLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5697785">=</span>&nbsp;<span class="num" id="5697787">56</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5697798">//&nbsp;+&nbsp;extra</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5697811">//&nbsp;Constants&nbsp;for&nbsp;the&nbsp;first&nbsp;byte&nbsp;in&nbsp;CreatorVersion</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697862">creatorFAT</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5697876">=</span>&nbsp;<span class="num" id="5697878">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697881">creatorUnix</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5697895">=</span>&nbsp;<span class="num" id="5697897">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697900">creatorNTFS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5697914">=</span>&nbsp;<span class="num" id="5697916">11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697920">creatorVFAT</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5697934">=</span>&nbsp;<span class="num" id="5697936">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697940">creatorMacOSX</span>&nbsp;<span class="op" id="5697954">=</span>&nbsp;<span class="num" id="5697956">19</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5697961">//&nbsp;version&nbsp;numbers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697981">zipVersion20</span>&nbsp;<span class="op" id="5697994">=</span>&nbsp;<span class="num" id="5697996">20</span>&nbsp;<span class="comment" id="5697999">//&nbsp;2.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698007">zipVersion45</span>&nbsp;<span class="op" id="5698020">=</span>&nbsp;<span class="num" id="5698022">45</span>&nbsp;<span class="comment" id="5698025">//&nbsp;4.5&nbsp;(reads&nbsp;and&nbsp;writes&nbsp;zip64&nbsp;archives)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5698068">//&nbsp;limits&nbsp;for&nbsp;non&nbsp;zip64&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698099">uint16max</span>&nbsp;<span class="op" id="5698109">=</span>&nbsp;<span class="op" id="5698111">(</span><span class="num" id="5698112">1</span>&nbsp;<span class="op" id="5698114">&lt;&lt;</span>&nbsp;<span class="num" id="5698117">16</span><span class="op" id="5698119">)</span>&nbsp;<span class="op" id="5698121">-</span>&nbsp;<span class="num" id="5698123">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698126">uint32max</span>&nbsp;<span class="op" id="5698136">=</span>&nbsp;<span class="op" id="5698138">(</span><span class="num" id="5698139">1</span>&nbsp;<span class="op" id="5698141">&lt;&lt;</span>&nbsp;<span class="num" id="5698144">32</span><span class="op" id="5698146">)</span>&nbsp;<span class="op" id="5698148">-</span>&nbsp;<span class="num" id="5698150">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5698154">//&nbsp;extra&nbsp;header&nbsp;id&#39;s</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698176">zip64ExtraId</span>&nbsp;<span class="op" id="5698189">=</span>&nbsp;<span class="num" id="5698191">0x0001</span>&nbsp;<span class="comment" id="5698198">//&nbsp;zip64&nbsp;Extended&nbsp;Information&nbsp;Extra&nbsp;Field</span><br>
<span class="lineno"></span><span class="op" id="5698240">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5698243">//&nbsp;FileHeader&nbsp;describes&nbsp;a&nbsp;file&nbsp;within&nbsp;a&nbsp;zip&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5698293">//&nbsp;See&nbsp;the&nbsp;zip&nbsp;spec&nbsp;for&nbsp;details.</span><br>
<span class="lineno">70</span><span class="keyword" id="5698326">type</span>&nbsp;<span class="ident" id="5698331">FileHeader</span>&nbsp;<span class="keyword" id="5698342">struct</span>&nbsp;<span class="op" id="5698349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5698352">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5698386">//&nbsp;It&nbsp;must&nbsp;be&nbsp;a&nbsp;relative&nbsp;path:&nbsp;it&nbsp;must&nbsp;not&nbsp;start&nbsp;with&nbsp;a&nbsp;drive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5698449">//&nbsp;letter&nbsp;(e.g.&nbsp;C:)&nbsp;or&nbsp;leading&nbsp;slash,&nbsp;and&nbsp;only&nbsp;forward&nbsp;slashes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5698513">//&nbsp;are&nbsp;allowed.</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698530">Name</span>&nbsp;<span class="builtintype" id="5698535">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698544">CreatorVersion</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5698563">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698571">ReaderVersion</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5698590">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698598">Flags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5698617">uint16</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698625">Method</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5698644">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698652">ModifiedTime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5698671">uint16</span>&nbsp;<span class="comment" id="5698678">//&nbsp;MS-DOS&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698694">ModifiedDate</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5698713">uint16</span>&nbsp;<span class="comment" id="5698720">//&nbsp;MS-DOS&nbsp;date</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698736">CRC32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5698755">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698763">CompressedSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5698782">uint32</span>&nbsp;<span class="comment" id="5698789">//&nbsp;deprecated;&nbsp;use&nbsp;CompressedSize64</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698826">UncompressedSize</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5698845">uint32</span>&nbsp;<span class="comment" id="5698852">//&nbsp;deprecated;&nbsp;use&nbsp;UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698891">CompressedSize64</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5698910">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698918">UncompressedSize64</span>&nbsp;<span class="ident" id="5698937">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698945">Extra</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5698964">[</span><span class="op" id="5698965">]</span><span class="builtintype" id="5698966">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698972">ExternalAttrs</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5698991">uint32</span>&nbsp;<span class="comment" id="5698998">//&nbsp;Meaning&nbsp;depends&nbsp;on&nbsp;CreatorVersion</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699036">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5699055">string</span><br>
<span class="lineno"></span><span class="op" id="5699062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5699065">//&nbsp;FileInfo&nbsp;returns&nbsp;an&nbsp;os.FileInfo&nbsp;for&nbsp;the&nbsp;FileHeader.</span><br>
<span class="lineno"></span><span class="keyword" id="5699120">func</span>&nbsp;<span class="op" id="5699125">(</span><span class="ident" id="5699126">h</span>&nbsp;<span class="op" id="5699128">*</span><span class="ident" id="5699129"><a href="/archive/zip/struct.go.html#5698331">FileHeader</a></span><span class="op" id="5699139">)</span>&nbsp;<span class="ident" id="5699141">FileInfo</span><span class="op" id="5699149">(</span><span class="op" id="5699150">)</span>&nbsp;<span class="ident" id="5699152"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5699154">.</span><span class="ident" id="5699155">FileInfo</span>&nbsp;<span class="op" id="5699164">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699167">return</span>&nbsp;<span class="ident" id="5699174"><a href="/archive/zip/struct.go.html#5699242">headerFileInfo</a></span><span class="op" id="5699188">{</span><span class="ident" id="5699189"><a href="/archive/zip/struct.go.html#5699126">h</a></span><span class="op" id="5699190">}</span><br>
<span class="lineno"></span><span class="op" id="5699192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5699195">//&nbsp;headerFileInfo&nbsp;implements&nbsp;os.FileInfo.</span><br>
<span class="lineno"></span><span class="keyword" id="5699237">type</span>&nbsp;<span class="ident" id="5699242">headerFileInfo</span>&nbsp;<span class="keyword" id="5699257">struct</span>&nbsp;<span class="op" id="5699264">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699267">fh</span>&nbsp;<span class="op" id="5699270">*</span><span class="ident" id="5699271"><a href="/archive/zip/struct.go.html#5698331">FileHeader</a></span><br>
<span class="lineno"></span><span class="op" id="5699282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5699285">func</span>&nbsp;<span class="op" id="5699290">(</span><span class="ident" id="5699291">fi</span>&nbsp;<span class="ident" id="5699294"><a href="/archive/zip/struct.go.html#5699242">headerFileInfo</a></span><span class="op" id="5699308">)</span>&nbsp;<span class="ident" id="5699310">Name</span><span class="op" id="5699314">(</span><span class="op" id="5699315">)</span>&nbsp;<span class="builtintype" id="5699317">string</span>&nbsp;<span class="op" id="5699324">{</span>&nbsp;<span class="keyword" id="5699326">return</span>&nbsp;<span class="ident" id="5699333"><a href="/archive/zip/struct.go.html#5696975">path</a></span><span class="op" id="5699337">.</span><span class="ident" id="5699338">Base</span><span class="op" id="5699342">(</span><span class="ident" id="5699343"><a href="/archive/zip/struct.go.html#5699291">fi</a></span><span class="op" id="5699345">.</span><span class="ident" id="5699346">fh</span><span class="op" id="5699348">.</span><span class="ident" id="5699349">Name</span><span class="op" id="5699353">)</span>&nbsp;<span class="op" id="5699355">}</span><br>
<span class="lineno"></span><span class="keyword" id="5699357">func</span>&nbsp;<span class="op" id="5699362">(</span><span class="ident" id="5699363">fi</span>&nbsp;<span class="ident" id="5699366"><a href="/archive/zip/struct.go.html#5699242">headerFileInfo</a></span><span class="op" id="5699380">)</span>&nbsp;<span class="ident" id="5699382">Size</span><span class="op" id="5699386">(</span><span class="op" id="5699387">)</span>&nbsp;<span class="ident" id="5699389">int64</span>&nbsp;<span class="op" id="5699395">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699398">if</span>&nbsp;<span class="ident" id="5699401"><a href="/archive/zip/struct.go.html#5699363">fi</a></span><span class="op" id="5699403">.</span><span class="ident" id="5699404">fh</span><span class="op" id="5699406">.</span><span class="ident" id="5699407">UncompressedSize64</span>&nbsp;<span class="op" id="5699426">&gt;</span>&nbsp;<span class="num" id="5699428">0</span>&nbsp;<span class="op" id="5699430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699434">return</span>&nbsp;<span class="ident" id="5699441">int64</span><span class="op" id="5699446">(</span><span class="ident" id="5699447"><a href="/archive/zip/struct.go.html#5699363">fi</a></span><span class="op" id="5699449">.</span><span class="ident" id="5699450">fh</span><span class="op" id="5699452">.</span><span class="ident" id="5699453">UncompressedSize64</span><span class="op" id="5699471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699477">return</span>&nbsp;<span class="ident" id="5699484">int64</span><span class="op" id="5699489">(</span><span class="ident" id="5699490"><a href="/archive/zip/struct.go.html#5699363">fi</a></span><span class="op" id="5699492">.</span><span class="ident" id="5699493">fh</span><span class="op" id="5699495">.</span><span class="ident" id="5699496">UncompressedSize</span><span class="op" id="5699512">)</span><br>
<span class="lineno"></span><span class="op" id="5699514">}</span><br>
<span class="lineno">110</span><span class="keyword" id="5699516">func</span>&nbsp;<span class="op" id="5699521">(</span><span class="ident" id="5699522">fi</span>&nbsp;<span class="ident" id="5699525"><a href="/archive/zip/struct.go.html#5699242">headerFileInfo</a></span><span class="op" id="5699539">)</span>&nbsp;<span class="ident" id="5699541">IsDir</span><span class="op" id="5699546">(</span><span class="op" id="5699547">)</span>&nbsp;<span class="builtintype" id="5699549">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5699561">{</span>&nbsp;<span class="keyword" id="5699563">return</span>&nbsp;<span class="ident" id="5699570"><a href="/archive/zip/struct.go.html#5699522">fi</a></span><span class="op" id="5699572">.</span><span class="ident" id="5699573">Mode</span><span class="op" id="5699577">(</span><span class="op" id="5699578">)</span><span class="op" id="5699579">.</span><span class="ident" id="5699580">IsDir</span><span class="op" id="5699585">(</span><span class="op" id="5699586">)</span>&nbsp;<span class="op" id="5699588">}</span><br>
<span class="lineno"></span><span class="keyword" id="5699590">func</span>&nbsp;<span class="op" id="5699595">(</span><span class="ident" id="5699596">fi</span>&nbsp;<span class="ident" id="5699599"><a href="/archive/zip/struct.go.html#5699242">headerFileInfo</a></span><span class="op" id="5699613">)</span>&nbsp;<span class="ident" id="5699615">ModTime</span><span class="op" id="5699622">(</span><span class="op" id="5699623">)</span>&nbsp;<span class="ident" id="5699625"><a href="/archive/zip/struct.go.html#5696983">time</a></span><span class="op" id="5699629">.</span><span class="ident" id="5699630">Time</span>&nbsp;<span class="op" id="5699635">{</span>&nbsp;<span class="keyword" id="5699637">return</span>&nbsp;<span class="ident" id="5699644"><a href="/archive/zip/struct.go.html#5699596">fi</a></span><span class="op" id="5699646">.</span><span class="ident" id="5699647">fh</span><span class="op" id="5699649">.</span><span class="ident" id="5699650">ModTime</span><span class="op" id="5699657">(</span><span class="op" id="5699658">)</span>&nbsp;<span class="op" id="5699660">}</span><br>
<span class="lineno"></span><span class="keyword" id="5699662">func</span>&nbsp;<span class="op" id="5699667">(</span><span class="ident" id="5699668">fi</span>&nbsp;<span class="ident" id="5699671"><a href="/archive/zip/struct.go.html#5699242">headerFileInfo</a></span><span class="op" id="5699685">)</span>&nbsp;<span class="ident" id="5699687">Mode</span><span class="op" id="5699691">(</span><span class="op" id="5699692">)</span>&nbsp;<span class="ident" id="5699694"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5699696">.</span><span class="ident" id="5699697">FileMode</span>&nbsp;&nbsp;<span class="op" id="5699707">{</span>&nbsp;<span class="keyword" id="5699709">return</span>&nbsp;<span class="ident" id="5699716"><a href="/archive/zip/struct.go.html#5699668">fi</a></span><span class="op" id="5699718">.</span><span class="ident" id="5699719">fh</span><span class="op" id="5699721">.</span><span class="ident" id="5699722">Mode</span><span class="op" id="5699726">(</span><span class="op" id="5699727">)</span>&nbsp;<span class="op" id="5699729">}</span><br>
<span class="lineno"></span><span class="keyword" id="5699731">func</span>&nbsp;<span class="op" id="5699736">(</span><span class="ident" id="5699737">fi</span>&nbsp;<span class="ident" id="5699740"><a href="/archive/zip/struct.go.html#5699242">headerFileInfo</a></span><span class="op" id="5699754">)</span>&nbsp;<span class="ident" id="5699756">Sys</span><span class="op" id="5699759">(</span><span class="op" id="5699760">)</span>&nbsp;<span class="keyword" id="5699762">interface</span><span class="op" id="5699771">{</span><span class="op" id="5699772">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5699776">{</span>&nbsp;<span class="keyword" id="5699778">return</span>&nbsp;<span class="ident" id="5699785"><a href="/archive/zip/struct.go.html#5699737">fi</a></span><span class="op" id="5699787">.</span><span class="ident" id="5699788">fh</span>&nbsp;<span class="op" id="5699791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="5699794">//&nbsp;FileInfoHeader&nbsp;creates&nbsp;a&nbsp;partially-populated&nbsp;FileHeader&nbsp;from&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="5699861">//&nbsp;os.FileInfo.</span><br>
<span class="lineno"></span><span class="comment" id="5699877">//&nbsp;Because&nbsp;os.FileInfo&#39;s&nbsp;Name&nbsp;method&nbsp;returns&nbsp;only&nbsp;the&nbsp;base&nbsp;name&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5699944">//&nbsp;the&nbsp;file&nbsp;it&nbsp;describes,&nbsp;it&nbsp;may&nbsp;be&nbsp;necessary&nbsp;to&nbsp;modify&nbsp;the&nbsp;Name&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="5700015">//&nbsp;of&nbsp;the&nbsp;returned&nbsp;header&nbsp;to&nbsp;provide&nbsp;the&nbsp;full&nbsp;path&nbsp;name&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno">120</span><span class="keyword" id="5700084">func</span>&nbsp;<span class="ident" id="5700089">FileInfoHeader</span><span class="op" id="5700103">(</span><span class="ident" id="5700104">fi</span>&nbsp;<span class="ident" id="5700107"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5700109">.</span><span class="ident" id="5700110">FileInfo</span><span class="op" id="5700118">)</span>&nbsp;<span class="op" id="5700120">(</span><span class="op" id="5700121">*</span><span class="ident" id="5700122"><a href="/archive/zip/struct.go.html#5698331">FileHeader</a></span><span class="op" id="5700132">,</span>&nbsp;<span class="builtintype" id="5700134">error</span><span class="op" id="5700139">)</span>&nbsp;<span class="op" id="5700141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700144">size</span>&nbsp;<span class="op" id="5700149">:=</span>&nbsp;<span class="ident" id="5700152"><a href="/archive/zip/struct.go.html#5700104">fi</a></span><span class="op" id="5700154">.</span><span class="ident" id="5700155">Size</span><span class="op" id="5700159">(</span><span class="op" id="5700160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700163">fh</span>&nbsp;<span class="op" id="5700166">:=</span>&nbsp;<span class="op" id="5700169">&amp;</span><span class="ident" id="5700170"><a href="/archive/zip/struct.go.html#5698331">FileHeader</a></span><span class="op" id="5700180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700184">Name</span><span class="op" id="5700188">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5700204"><a href="/archive/zip/struct.go.html#5700104">fi</a></span><span class="op" id="5700206">.</span><span class="ident" id="5700207">Name</span><span class="op" id="5700211">(</span><span class="op" id="5700212">)</span><span class="op" id="5700213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700217">UncompressedSize64</span><span class="op" id="5700235">:</span>&nbsp;<span class="ident" id="5700237">uint64</span><span class="op" id="5700243">(</span><span class="ident" id="5700244"><a href="/archive/zip/struct.go.html#5700144">size</a></span><span class="op" id="5700248">)</span><span class="op" id="5700249">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5700252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700255"><a href="/archive/zip/struct.go.html#5700163">fh</a></span><span class="op" id="5700257">.</span><span class="ident" id="5700258">SetModTime</span><span class="op" id="5700268">(</span><span class="ident" id="5700269"><a href="/archive/zip/struct.go.html#5700104">fi</a></span><span class="op" id="5700271">.</span><span class="ident" id="5700272">ModTime</span><span class="op" id="5700279">(</span><span class="op" id="5700280">)</span><span class="op" id="5700281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700284"><a href="/archive/zip/struct.go.html#5700163">fh</a></span><span class="op" id="5700286">.</span><span class="ident" id="5700287">SetMode</span><span class="op" id="5700294">(</span><span class="ident" id="5700295"><a href="/archive/zip/struct.go.html#5700104">fi</a></span><span class="op" id="5700297">.</span><span class="ident" id="5700298">Mode</span><span class="op" id="5700302">(</span><span class="op" id="5700303">)</span><span class="op" id="5700304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5700307">if</span>&nbsp;<span class="ident" id="5700310"><a href="/archive/zip/struct.go.html#5700163">fh</a></span><span class="op" id="5700312">.</span><span class="ident" id="5700313">UncompressedSize64</span>&nbsp;<span class="op" id="5700332">&gt;</span>&nbsp;<span class="ident" id="5700334"><a href="/archive/zip/struct.go.html#5698126">uint32max</a></span>&nbsp;<span class="op" id="5700344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700348"><a href="/archive/zip/struct.go.html#5700163">fh</a></span><span class="op" id="5700350">.</span><span class="ident" id="5700351">UncompressedSize</span>&nbsp;<span class="op" id="5700368">=</span>&nbsp;<span class="ident" id="5700370"><a href="/archive/zip/struct.go.html#5698126">uint32max</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5700381">}</span>&nbsp;<span class="keyword" id="5700383">else</span>&nbsp;<span class="op" id="5700388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700392"><a href="/archive/zip/struct.go.html#5700163">fh</a></span><span class="op" id="5700394">.</span><span class="ident" id="5700395">UncompressedSize</span>&nbsp;<span class="op" id="5700412">=</span>&nbsp;<span class="builtintype" id="5700414">uint32</span><span class="op" id="5700420">(</span><span class="ident" id="5700421"><a href="/archive/zip/struct.go.html#5700163">fh</a></span><span class="op" id="5700423">.</span><span class="ident" id="5700424">UncompressedSize64</span><span class="op" id="5700442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5700445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5700448">return</span>&nbsp;<span class="ident" id="5700455"><a href="/archive/zip/struct.go.html#5700163">fh</a></span><span class="op" id="5700457">,</span>&nbsp;<span class="ident" id="5700459">nil</span><br>
<span class="lineno"></span><span class="op" id="5700463">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="5700466">type</span>&nbsp;<span class="ident" id="5700471">directoryEnd</span>&nbsp;<span class="keyword" id="5700484">struct</span>&nbsp;<span class="op" id="5700491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700494">diskNbr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5700513">uint32</span>&nbsp;<span class="comment" id="5700520">//&nbsp;unused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700531">dirDiskNbr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5700550">uint32</span>&nbsp;<span class="comment" id="5700557">//&nbsp;unused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700568">dirRecordsThisDisk</span>&nbsp;<span class="ident" id="5700587">uint64</span>&nbsp;<span class="comment" id="5700594">//&nbsp;unused</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700605">directoryRecords</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5700624">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700632">directorySize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5700651">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700659">directoryOffset</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5700678">uint64</span>&nbsp;<span class="comment" id="5700685">//&nbsp;relative&nbsp;to&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700706">commentLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5700725">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700733">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5700752">string</span><br>
<span class="lineno">145</span><span class="op" id="5700759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5700762">//&nbsp;msDosTimeToTime&nbsp;converts&nbsp;an&nbsp;MS-DOS&nbsp;date&nbsp;and&nbsp;time&nbsp;into&nbsp;a&nbsp;time.Time.</span><br>
<span class="lineno"></span><span class="comment" id="5700832">//&nbsp;The&nbsp;resolution&nbsp;is&nbsp;2s.</span><br>
<span class="lineno"></span><span class="comment" id="5700857">//&nbsp;See:&nbsp;http://msdn.microsoft.com/en-us/library/ms724247(v=VS.85).aspx</span><br>
<span class="lineno">150</span><span class="keyword" id="5700928">func</span>&nbsp;<span class="ident" id="5700933">msDosTimeToTime</span><span class="op" id="5700948">(</span><span class="ident" id="5700949">dosDate</span><span class="op" id="5700956">,</span>&nbsp;<span class="ident" id="5700958">dosTime</span>&nbsp;<span class="builtintype" id="5700966">uint16</span><span class="op" id="5700972">)</span>&nbsp;<span class="ident" id="5700974"><a href="/archive/zip/struct.go.html#5696983">time</a></span><span class="op" id="5700978">.</span><span class="ident" id="5700979">Time</span>&nbsp;<span class="op" id="5700984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5700987">return</span>&nbsp;<span class="ident" id="5700994"><a href="/archive/zip/struct.go.html#5696983">time</a></span><span class="op" id="5700998">.</span><span class="ident" id="5700999">Date</span><span class="op" id="5701003">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5701007">//&nbsp;date&nbsp;bits&nbsp;0-4:&nbsp;day&nbsp;of&nbsp;month;&nbsp;5-8:&nbsp;month;&nbsp;9-15:&nbsp;years&nbsp;since&nbsp;1980</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5701076">int</span><span class="op" id="5701079">(</span><span class="ident" id="5701080"><a href="/archive/zip/struct.go.html#5700949">dosDate</a></span><span class="op" id="5701087">&gt;&gt;</span><span class="num" id="5701089">9</span><span class="op" id="5701090">+</span><span class="num" id="5701091">1980</span><span class="op" id="5701095">)</span><span class="op" id="5701096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5701100"><a href="/archive/zip/struct.go.html#5696983">time</a></span><span class="op" id="5701104">.</span><span class="ident" id="5701105">Month</span><span class="op" id="5701110">(</span><span class="ident" id="5701111"><a href="/archive/zip/struct.go.html#5700949">dosDate</a></span><span class="op" id="5701118">&gt;&gt;</span><span class="num" id="5701120">5</span><span class="op" id="5701121">&amp;</span><span class="num" id="5701122">0xf</span><span class="op" id="5701125">)</span><span class="op" id="5701126">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5701130">int</span><span class="op" id="5701133">(</span><span class="ident" id="5701134"><a href="/archive/zip/struct.go.html#5700949">dosDate</a></span><span class="op" id="5701141">&amp;</span><span class="num" id="5701142">0x1f</span><span class="op" id="5701146">)</span><span class="op" id="5701147">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5701152">//&nbsp;time&nbsp;bits&nbsp;0-4:&nbsp;second/2;&nbsp;5-10:&nbsp;minute;&nbsp;11-15:&nbsp;hour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5701208">int</span><span class="op" id="5701211">(</span><span class="ident" id="5701212"><a href="/archive/zip/struct.go.html#5700958">dosTime</a></span><span class="op" id="5701219">&gt;&gt;</span><span class="num" id="5701221">11</span><span class="op" id="5701223">)</span><span class="op" id="5701224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5701228">int</span><span class="op" id="5701231">(</span><span class="ident" id="5701232"><a href="/archive/zip/struct.go.html#5700958">dosTime</a></span><span class="op" id="5701239">&gt;&gt;</span><span class="num" id="5701241">5</span><span class="op" id="5701242">&amp;</span><span class="num" id="5701243">0x3f</span><span class="op" id="5701247">)</span><span class="op" id="5701248">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5701252">int</span><span class="op" id="5701255">(</span><span class="ident" id="5701256"><a href="/archive/zip/struct.go.html#5700958">dosTime</a></span><span class="op" id="5701263">&amp;</span><span class="num" id="5701264">0x1f</span><span class="op" id="5701268">*</span><span class="num" id="5701269">2</span><span class="op" id="5701270">)</span><span class="op" id="5701271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="5701275">0</span><span class="op" id="5701276">,</span>&nbsp;<span class="comment" id="5701278">//&nbsp;nanoseconds</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5701296"><a href="/archive/zip/struct.go.html#5696983">time</a></span><span class="op" id="5701300">.</span><span class="ident" id="5701301">UTC</span><span class="op" id="5701304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5701307">)</span><br>
<span class="lineno">165</span><span class="op" id="5701309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5701312">//&nbsp;timeToMsDosTime&nbsp;converts&nbsp;a&nbsp;time.Time&nbsp;to&nbsp;an&nbsp;MS-DOS&nbsp;date&nbsp;and&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="5701380">//&nbsp;The&nbsp;resolution&nbsp;is&nbsp;2s.</span><br>
<span class="lineno"></span><span class="comment" id="5701405">//&nbsp;See:&nbsp;http://msdn.microsoft.com/en-us/library/ms724274(v=VS.85).aspx</span><br>
<span class="lineno">170</span><span class="keyword" id="5701476">func</span>&nbsp;<span class="ident" id="5701481">timeToMsDosTime</span><span class="op" id="5701496">(</span><span class="ident" id="5701497">t</span>&nbsp;<span class="ident" id="5701499"><a href="/archive/zip/struct.go.html#5696983">time</a></span><span class="op" id="5701503">.</span><span class="ident" id="5701504">Time</span><span class="op" id="5701508">)</span>&nbsp;<span class="op" id="5701510">(</span><span class="ident" id="5701511">fDate</span>&nbsp;<span class="builtintype" id="5701517">uint16</span><span class="op" id="5701523">,</span>&nbsp;<span class="ident" id="5701525">fTime</span>&nbsp;<span class="builtintype" id="5701531">uint16</span><span class="op" id="5701537">)</span>&nbsp;<span class="op" id="5701539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5701542"><a href="/archive/zip/struct.go.html#5701497">t</a></span>&nbsp;<span class="op" id="5701544">=</span>&nbsp;<span class="ident" id="5701546"><a href="/archive/zip/struct.go.html#5701497">t</a></span><span class="op" id="5701547">.</span><span class="ident" id="5701548">In</span><span class="op" id="5701550">(</span><span class="ident" id="5701551"><a href="/archive/zip/struct.go.html#5696983">time</a></span><span class="op" id="5701555">.</span><span class="ident" id="5701556">UTC</span><span class="op" id="5701559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5701562"><a href="/archive/zip/struct.go.html#5701511">fDate</a></span>&nbsp;<span class="op" id="5701568">=</span>&nbsp;<span class="builtintype" id="5701570">uint16</span><span class="op" id="5701576">(</span><span class="ident" id="5701577"><a href="/archive/zip/struct.go.html#5701497">t</a></span><span class="op" id="5701578">.</span><span class="ident" id="5701579">Day</span><span class="op" id="5701582">(</span><span class="op" id="5701583">)</span>&nbsp;<span class="op" id="5701585">+</span>&nbsp;<span class="builtintype" id="5701587">int</span><span class="op" id="5701590">(</span><span class="ident" id="5701591"><a href="/archive/zip/struct.go.html#5701497">t</a></span><span class="op" id="5701592">.</span><span class="ident" id="5701593">Month</span><span class="op" id="5701598">(</span><span class="op" id="5701599">)</span><span class="op" id="5701600">)</span><span class="op" id="5701601">&lt;&lt;</span><span class="num" id="5701603">5</span>&nbsp;<span class="op" id="5701605">+</span>&nbsp;<span class="op" id="5701607">(</span><span class="ident" id="5701608"><a href="/archive/zip/struct.go.html#5701497">t</a></span><span class="op" id="5701609">.</span><span class="ident" id="5701610">Year</span><span class="op" id="5701614">(</span><span class="op" id="5701615">)</span><span class="op" id="5701616">-</span><span class="num" id="5701617">1980</span><span class="op" id="5701621">)</span><span class="op" id="5701622">&lt;&lt;</span><span class="num" id="5701624">9</span><span class="op" id="5701625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5701628"><a href="/archive/zip/struct.go.html#5701525">fTime</a></span>&nbsp;<span class="op" id="5701634">=</span>&nbsp;<span class="builtintype" id="5701636">uint16</span><span class="op" id="5701642">(</span><span class="ident" id="5701643"><a href="/archive/zip/struct.go.html#5701497">t</a></span><span class="op" id="5701644">.</span><span class="ident" id="5701645">Second</span><span class="op" id="5701651">(</span><span class="op" id="5701652">)</span><span class="op" id="5701653">/</span><span class="num" id="5701654">2</span>&nbsp;<span class="op" id="5701656">+</span>&nbsp;<span class="ident" id="5701658"><a href="/archive/zip/struct.go.html#5701497">t</a></span><span class="op" id="5701659">.</span><span class="ident" id="5701660">Minute</span><span class="op" id="5701666">(</span><span class="op" id="5701667">)</span><span class="op" id="5701668">&lt;&lt;</span><span class="num" id="5701670">5</span>&nbsp;<span class="op" id="5701672">+</span>&nbsp;<span class="ident" id="5701674"><a href="/archive/zip/struct.go.html#5701497">t</a></span><span class="op" id="5701675">.</span><span class="ident" id="5701676">Hour</span><span class="op" id="5701680">(</span><span class="op" id="5701681">)</span><span class="op" id="5701682">&lt;&lt;</span><span class="num" id="5701684">11</span><span class="op" id="5701686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5701689">return</span><br>
<span class="lineno">175</span><span class="op" id="5701696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5701699">//&nbsp;ModTime&nbsp;returns&nbsp;the&nbsp;modification&nbsp;time&nbsp;in&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="5701748">//&nbsp;The&nbsp;resolution&nbsp;is&nbsp;2s.</span><br>
<span class="lineno"></span><span class="keyword" id="5701773">func</span>&nbsp;<span class="op" id="5701778">(</span><span class="ident" id="5701779">h</span>&nbsp;<span class="op" id="5701781">*</span><span class="ident" id="5701782"><a href="/archive/zip/struct.go.html#5698331">FileHeader</a></span><span class="op" id="5701792">)</span>&nbsp;<span class="ident" id="5701794">ModTime</span><span class="op" id="5701801">(</span><span class="op" id="5701802">)</span>&nbsp;<span class="ident" id="5701804"><a href="/archive/zip/struct.go.html#5696983">time</a></span><span class="op" id="5701808">.</span><span class="ident" id="5701809">Time</span>&nbsp;<span class="op" id="5701814">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5701817">return</span>&nbsp;<span class="ident" id="5701824"><a href="/archive/zip/struct.go.html#5700933">msDosTimeToTime</a></span><span class="op" id="5701839">(</span><span class="ident" id="5701840"><a href="/archive/zip/struct.go.html#5701779">h</a></span><span class="op" id="5701841">.</span><span class="ident" id="5701842">ModifiedDate</span><span class="op" id="5701854">,</span>&nbsp;<span class="ident" id="5701856"><a href="/archive/zip/struct.go.html#5701779">h</a></span><span class="op" id="5701857">.</span><span class="ident" id="5701858">ModifiedTime</span><span class="op" id="5701870">)</span><br>
<span class="lineno"></span><span class="op" id="5701872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5701875">//&nbsp;SetModTime&nbsp;sets&nbsp;the&nbsp;ModifiedTime&nbsp;and&nbsp;ModifiedDate&nbsp;fields&nbsp;to&nbsp;the&nbsp;given&nbsp;time&nbsp;in&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="5701961">//&nbsp;The&nbsp;resolution&nbsp;is&nbsp;2s.</span><br>
<span class="lineno">185</span><span class="keyword" id="5701986">func</span>&nbsp;<span class="op" id="5701991">(</span><span class="ident" id="5701992">h</span>&nbsp;<span class="op" id="5701994">*</span><span class="ident" id="5701995"><a href="/archive/zip/struct.go.html#5698331">FileHeader</a></span><span class="op" id="5702005">)</span>&nbsp;<span class="ident" id="5702007">SetModTime</span><span class="op" id="5702017">(</span><span class="ident" id="5702018">t</span>&nbsp;<span class="ident" id="5702020"><a href="/archive/zip/struct.go.html#5696983">time</a></span><span class="op" id="5702024">.</span><span class="ident" id="5702025">Time</span><span class="op" id="5702029">)</span>&nbsp;<span class="op" id="5702031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702034"><a href="/archive/zip/struct.go.html#5701992">h</a></span><span class="op" id="5702035">.</span><span class="ident" id="5702036">ModifiedDate</span><span class="op" id="5702048">,</span>&nbsp;<span class="ident" id="5702050"><a href="/archive/zip/struct.go.html#5701992">h</a></span><span class="op" id="5702051">.</span><span class="ident" id="5702052">ModifiedTime</span>&nbsp;<span class="op" id="5702065">=</span>&nbsp;<span class="ident" id="5702067"><a href="/archive/zip/struct.go.html#5701481">timeToMsDosTime</a></span><span class="op" id="5702082">(</span><span class="ident" id="5702083"><a href="/archive/zip/struct.go.html#5702018">t</a></span><span class="op" id="5702084">)</span><br>
<span class="lineno"></span><span class="op" id="5702086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5702089">const</span>&nbsp;<span class="op" id="5702095">(</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5702098">//&nbsp;Unix&nbsp;constants.&nbsp;The&nbsp;specification&nbsp;doesn&#39;t&nbsp;mention&nbsp;them,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5702158">//&nbsp;but&nbsp;these&nbsp;seem&nbsp;to&nbsp;be&nbsp;the&nbsp;values&nbsp;agreed&nbsp;on&nbsp;by&nbsp;tools.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702214">s_IFMT</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5702223">=</span>&nbsp;<span class="num" id="5702225">0xf000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702233">s_IFSOCK</span>&nbsp;<span class="op" id="5702242">=</span>&nbsp;<span class="num" id="5702244">0xc000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702252">s_IFLNK</span>&nbsp;&nbsp;<span class="op" id="5702261">=</span>&nbsp;<span class="num" id="5702263">0xa000</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702271">s_IFREG</span>&nbsp;&nbsp;<span class="op" id="5702280">=</span>&nbsp;<span class="num" id="5702282">0x8000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702290">s_IFBLK</span>&nbsp;&nbsp;<span class="op" id="5702299">=</span>&nbsp;<span class="num" id="5702301">0x6000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702309">s_IFDIR</span>&nbsp;&nbsp;<span class="op" id="5702318">=</span>&nbsp;<span class="num" id="5702320">0x4000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702328">s_IFCHR</span>&nbsp;&nbsp;<span class="op" id="5702337">=</span>&nbsp;<span class="num" id="5702339">0x2000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702347">s_IFIFO</span>&nbsp;&nbsp;<span class="op" id="5702356">=</span>&nbsp;<span class="num" id="5702358">0x1000</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702366">s_ISUID</span>&nbsp;&nbsp;<span class="op" id="5702375">=</span>&nbsp;<span class="num" id="5702377">0x800</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702384">s_ISGID</span>&nbsp;&nbsp;<span class="op" id="5702393">=</span>&nbsp;<span class="num" id="5702395">0x400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702402">s_ISVTX</span>&nbsp;&nbsp;<span class="op" id="5702411">=</span>&nbsp;<span class="num" id="5702413">0x200</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702421">msdosDir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5702435">=</span>&nbsp;<span class="num" id="5702437">0x10</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702443">msdosReadOnly</span>&nbsp;<span class="op" id="5702457">=</span>&nbsp;<span class="num" id="5702459">0x01</span><br>
<span class="lineno"></span><span class="op" id="5702464">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5702467">//&nbsp;Mode&nbsp;returns&nbsp;the&nbsp;permission&nbsp;and&nbsp;mode&nbsp;bits&nbsp;for&nbsp;the&nbsp;FileHeader.</span><br>
<span class="lineno"></span><span class="keyword" id="5702532">func</span>&nbsp;<span class="op" id="5702537">(</span><span class="ident" id="5702538">h</span>&nbsp;<span class="op" id="5702540">*</span><span class="ident" id="5702541"><a href="/archive/zip/struct.go.html#5698331">FileHeader</a></span><span class="op" id="5702551">)</span>&nbsp;<span class="ident" id="5702553">Mode</span><span class="op" id="5702557">(</span><span class="op" id="5702558">)</span>&nbsp;<span class="op" id="5702560">(</span><span class="ident" id="5702561">mode</span>&nbsp;<span class="ident" id="5702566"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5702568">.</span><span class="ident" id="5702569">FileMode</span><span class="op" id="5702577">)</span>&nbsp;<span class="op" id="5702579">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5702582">switch</span>&nbsp;<span class="ident" id="5702589"><a href="/archive/zip/struct.go.html#5702538">h</a></span><span class="op" id="5702590">.</span><span class="ident" id="5702591">CreatorVersion</span>&nbsp;<span class="op" id="5702606">&gt;&gt;</span>&nbsp;<span class="num" id="5702609">8</span>&nbsp;<span class="op" id="5702611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5702614">case</span>&nbsp;<span class="ident" id="5702619"><a href="/archive/zip/struct.go.html#5697881">creatorUnix</a></span><span class="op" id="5702630">,</span>&nbsp;<span class="ident" id="5702632"><a href="/archive/zip/struct.go.html#5697940">creatorMacOSX</a></span><span class="op" id="5702645">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702649"><a href="/archive/zip/struct.go.html#5702561">mode</a></span>&nbsp;<span class="op" id="5702654">=</span>&nbsp;<span class="ident" id="5702656"><a href="/archive/zip/struct.go.html#5704215">unixModeToFileMode</a></span><span class="op" id="5702674">(</span><span class="ident" id="5702675"><a href="/archive/zip/struct.go.html#5702538">h</a></span><span class="op" id="5702676">.</span><span class="ident" id="5702677">ExternalAttrs</span>&nbsp;<span class="op" id="5702691">&gt;&gt;</span>&nbsp;<span class="num" id="5702694">16</span><span class="op" id="5702696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5702699">case</span>&nbsp;<span class="ident" id="5702704"><a href="/archive/zip/struct.go.html#5697900">creatorNTFS</a></span><span class="op" id="5702715">,</span>&nbsp;<span class="ident" id="5702717"><a href="/archive/zip/struct.go.html#5697920">creatorVFAT</a></span><span class="op" id="5702728">,</span>&nbsp;<span class="ident" id="5702730"><a href="/archive/zip/struct.go.html#5697862">creatorFAT</a></span><span class="op" id="5702740">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702744"><a href="/archive/zip/struct.go.html#5702561">mode</a></span>&nbsp;<span class="op" id="5702749">=</span>&nbsp;<span class="ident" id="5702751"><a href="/archive/zip/struct.go.html#5703480">msdosModeToFileMode</a></span><span class="op" id="5702770">(</span><span class="ident" id="5702771"><a href="/archive/zip/struct.go.html#5702538">h</a></span><span class="op" id="5702772">.</span><span class="ident" id="5702773">ExternalAttrs</span><span class="op" id="5702786">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5702789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5702792">if</span>&nbsp;<span class="builtinfunc" id="5702795">len</span><span class="op" id="5702798">(</span><span class="ident" id="5702799"><a href="/archive/zip/struct.go.html#5702538">h</a></span><span class="op" id="5702800">.</span><span class="ident" id="5702801">Name</span><span class="op" id="5702805">)</span>&nbsp;<span class="op" id="5702807">&gt;</span>&nbsp;<span class="num" id="5702809">0</span>&nbsp;<span class="op" id="5702811">&amp;&amp;</span>&nbsp;<span class="ident" id="5702814"><a href="/archive/zip/struct.go.html#5702538">h</a></span><span class="op" id="5702815">.</span><span class="ident" id="5702816">Name</span><span class="op" id="5702820">[</span><span class="builtinfunc" id="5702821">len</span><span class="op" id="5702824">(</span><span class="ident" id="5702825"><a href="/archive/zip/struct.go.html#5702538">h</a></span><span class="op" id="5702826">.</span><span class="ident" id="5702827">Name</span><span class="op" id="5702831">)</span><span class="op" id="5702832">-</span><span class="num" id="5702833">1</span><span class="op" id="5702834">]</span>&nbsp;<span class="op" id="5702836">==</span>&nbsp;<span class="string" id="5702839">&#39;/&#39;</span>&nbsp;<span class="op" id="5702843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5702847"><a href="/archive/zip/struct.go.html#5702561">mode</a></span>&nbsp;<span class="op" id="5702852">|=</span>&nbsp;<span class="ident" id="5702855"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5702857">.</span><span class="ident" id="5702858">ModeDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5702867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5702870">return</span>&nbsp;<span class="ident" id="5702877"><a href="/archive/zip/struct.go.html#5702561">mode</a></span><br>
<span class="lineno">220</span><span class="op" id="5702882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5702885">//&nbsp;SetMode&nbsp;changes&nbsp;the&nbsp;permission&nbsp;and&nbsp;mode&nbsp;bits&nbsp;for&nbsp;the&nbsp;FileHeader.</span><br>
<span class="lineno"></span><span class="keyword" id="5702953">func</span>&nbsp;<span class="op" id="5702958">(</span><span class="ident" id="5702959">h</span>&nbsp;<span class="op" id="5702961">*</span><span class="ident" id="5702962"><a href="/archive/zip/struct.go.html#5698331">FileHeader</a></span><span class="op" id="5702972">)</span>&nbsp;<span class="ident" id="5702974">SetMode</span><span class="op" id="5702981">(</span><span class="ident" id="5702982">mode</span>&nbsp;<span class="ident" id="5702987"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5702989">.</span><span class="ident" id="5702990">FileMode</span><span class="op" id="5702998">)</span>&nbsp;<span class="op" id="5703000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703003"><a href="/archive/zip/struct.go.html#5702959">h</a></span><span class="op" id="5703004">.</span><span class="ident" id="5703005">CreatorVersion</span>&nbsp;<span class="op" id="5703020">=</span>&nbsp;<span class="ident" id="5703022"><a href="/archive/zip/struct.go.html#5702959">h</a></span><span class="op" id="5703023">.</span><span class="ident" id="5703024">CreatorVersion</span><span class="op" id="5703038">&amp;</span><span class="num" id="5703039">0xff</span>&nbsp;<span class="op" id="5703044">|</span>&nbsp;<span class="ident" id="5703046"><a href="/archive/zip/struct.go.html#5697881">creatorUnix</a></span><span class="op" id="5703057">&lt;&lt;</span><span class="num" id="5703059">8</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703062"><a href="/archive/zip/struct.go.html#5702959">h</a></span><span class="op" id="5703063">.</span><span class="ident" id="5703064">ExternalAttrs</span>&nbsp;<span class="op" id="5703078">=</span>&nbsp;<span class="ident" id="5703080"><a href="/archive/zip/struct.go.html#5703674">fileModeToUnixMode</a></span><span class="op" id="5703098">(</span><span class="ident" id="5703099"><a href="/archive/zip/struct.go.html#5702982">mode</a></span><span class="op" id="5703103">)</span>&nbsp;<span class="op" id="5703105">&lt;&lt;</span>&nbsp;<span class="num" id="5703108">16</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5703113">//&nbsp;set&nbsp;MSDOS&nbsp;attributes&nbsp;too,&nbsp;as&nbsp;the&nbsp;original&nbsp;zip&nbsp;does.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703169">if</span>&nbsp;<span class="ident" id="5703172"><a href="/archive/zip/struct.go.html#5702982">mode</a></span><span class="op" id="5703176">&amp;</span><span class="ident" id="5703177"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5703179">.</span><span class="ident" id="5703180">ModeDir</span>&nbsp;<span class="op" id="5703188">!=</span>&nbsp;<span class="num" id="5703191">0</span>&nbsp;<span class="op" id="5703193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703197"><a href="/archive/zip/struct.go.html#5702959">h</a></span><span class="op" id="5703198">.</span><span class="ident" id="5703199">ExternalAttrs</span>&nbsp;<span class="op" id="5703213">|=</span>&nbsp;<span class="ident" id="5703216"><a href="/archive/zip/struct.go.html#5702421">msdosDir</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5703226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703229">if</span>&nbsp;<span class="ident" id="5703232"><a href="/archive/zip/struct.go.html#5702982">mode</a></span><span class="op" id="5703236">&amp;</span><span class="num" id="5703237">0200</span>&nbsp;<span class="op" id="5703242">==</span>&nbsp;<span class="num" id="5703245">0</span>&nbsp;<span class="op" id="5703247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703251"><a href="/archive/zip/struct.go.html#5702959">h</a></span><span class="op" id="5703252">.</span><span class="ident" id="5703253">ExternalAttrs</span>&nbsp;<span class="op" id="5703267">|=</span>&nbsp;<span class="ident" id="5703270"><a href="/archive/zip/struct.go.html#5702443">msdosReadOnly</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5703285">}</span><br>
<span class="lineno"></span><span class="op" id="5703287">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="5703290">//&nbsp;isZip64&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;exceeds&nbsp;the&nbsp;32&nbsp;bit&nbsp;limit</span><br>
<span class="lineno"></span><span class="keyword" id="5703356">func</span>&nbsp;<span class="op" id="5703361">(</span><span class="ident" id="5703362">fh</span>&nbsp;<span class="op" id="5703365">*</span><span class="ident" id="5703366"><a href="/archive/zip/struct.go.html#5698331">FileHeader</a></span><span class="op" id="5703376">)</span>&nbsp;<span class="ident" id="5703378">isZip64</span><span class="op" id="5703385">(</span><span class="op" id="5703386">)</span>&nbsp;<span class="builtintype" id="5703388">bool</span>&nbsp;<span class="op" id="5703393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703396">return</span>&nbsp;<span class="ident" id="5703403"><a href="/archive/zip/struct.go.html#5703362">fh</a></span><span class="op" id="5703405">.</span><span class="ident" id="5703406">CompressedSize64</span>&nbsp;<span class="op" id="5703423">&gt;</span>&nbsp;<span class="ident" id="5703425"><a href="/archive/zip/struct.go.html#5698126">uint32max</a></span>&nbsp;<span class="op" id="5703435">||</span>&nbsp;<span class="ident" id="5703438"><a href="/archive/zip/struct.go.html#5703362">fh</a></span><span class="op" id="5703440">.</span><span class="ident" id="5703441">UncompressedSize64</span>&nbsp;<span class="op" id="5703460">&gt;</span>&nbsp;<span class="ident" id="5703462"><a href="/archive/zip/struct.go.html#5698126">uint32max</a></span><br>
<span class="lineno"></span><span class="op" id="5703472">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span><span class="keyword" id="5703475">func</span>&nbsp;<span class="ident" id="5703480">msdosModeToFileMode</span><span class="op" id="5703499">(</span><span class="ident" id="5703500">m</span>&nbsp;<span class="builtintype" id="5703502">uint32</span><span class="op" id="5703508">)</span>&nbsp;<span class="op" id="5703510">(</span><span class="ident" id="5703511">mode</span>&nbsp;<span class="ident" id="5703516"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5703518">.</span><span class="ident" id="5703519">FileMode</span><span class="op" id="5703527">)</span>&nbsp;<span class="op" id="5703529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703532">if</span>&nbsp;<span class="ident" id="5703535"><a href="/archive/zip/struct.go.html#5703500">m</a></span><span class="op" id="5703536">&amp;</span><span class="ident" id="5703537"><a href="/archive/zip/struct.go.html#5702421">msdosDir</a></span>&nbsp;<span class="op" id="5703546">!=</span>&nbsp;<span class="num" id="5703549">0</span>&nbsp;<span class="op" id="5703551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703555"><a href="/archive/zip/struct.go.html#5703511">mode</a></span>&nbsp;<span class="op" id="5703560">=</span>&nbsp;<span class="ident" id="5703562"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5703564">.</span><span class="ident" id="5703565">ModeDir</span>&nbsp;<span class="op" id="5703573">|</span>&nbsp;<span class="num" id="5703575">0777</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5703581">}</span>&nbsp;<span class="keyword" id="5703583">else</span>&nbsp;<span class="op" id="5703588">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703592"><a href="/archive/zip/struct.go.html#5703511">mode</a></span>&nbsp;<span class="op" id="5703597">=</span>&nbsp;<span class="num" id="5703599">0666</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5703605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703608">if</span>&nbsp;<span class="ident" id="5703611"><a href="/archive/zip/struct.go.html#5703500">m</a></span><span class="op" id="5703612">&amp;</span><span class="ident" id="5703613"><a href="/archive/zip/struct.go.html#5702443">msdosReadOnly</a></span>&nbsp;<span class="op" id="5703627">!=</span>&nbsp;<span class="num" id="5703630">0</span>&nbsp;<span class="op" id="5703632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703636"><a href="/archive/zip/struct.go.html#5703511">mode</a></span>&nbsp;<span class="op" id="5703641">&amp;^=</span>&nbsp;<span class="num" id="5703645">0222</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5703651">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703654">return</span>&nbsp;<span class="ident" id="5703661"><a href="/archive/zip/struct.go.html#5703511">mode</a></span><br>
<span class="lineno"></span><span class="op" id="5703666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5703669">func</span>&nbsp;<span class="ident" id="5703674">fileModeToUnixMode</span><span class="op" id="5703692">(</span><span class="ident" id="5703693">mode</span>&nbsp;<span class="ident" id="5703698"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5703700">.</span><span class="ident" id="5703701">FileMode</span><span class="op" id="5703709">)</span>&nbsp;<span class="builtintype" id="5703711">uint32</span>&nbsp;<span class="op" id="5703718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703721">var</span>&nbsp;<span class="ident" id="5703725">m</span>&nbsp;<span class="builtintype" id="5703727">uint32</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703735">switch</span>&nbsp;<span class="ident" id="5703742"><a href="/archive/zip/struct.go.html#5703693">mode</a></span>&nbsp;<span class="op" id="5703747">&amp;</span>&nbsp;<span class="ident" id="5703749"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5703751">.</span><span class="ident" id="5703752">ModeType</span>&nbsp;<span class="op" id="5703761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703764">default</span><span class="op" id="5703771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703775"><a href="/archive/zip/struct.go.html#5703725">m</a></span>&nbsp;<span class="op" id="5703777">=</span>&nbsp;<span class="ident" id="5703779"><a href="/archive/zip/struct.go.html#5702271">s_IFREG</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703788">case</span>&nbsp;<span class="ident" id="5703793"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5703795">.</span><span class="ident" id="5703796">ModeDir</span><span class="op" id="5703803">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703807"><a href="/archive/zip/struct.go.html#5703725">m</a></span>&nbsp;<span class="op" id="5703809">=</span>&nbsp;<span class="ident" id="5703811"><a href="/archive/zip/struct.go.html#5702309">s_IFDIR</a></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703820">case</span>&nbsp;<span class="ident" id="5703825"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5703827">.</span><span class="ident" id="5703828">ModeSymlink</span><span class="op" id="5703839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703843"><a href="/archive/zip/struct.go.html#5703725">m</a></span>&nbsp;<span class="op" id="5703845">=</span>&nbsp;<span class="ident" id="5703847"><a href="/archive/zip/struct.go.html#5702252">s_IFLNK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703856">case</span>&nbsp;<span class="ident" id="5703861"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5703863">.</span><span class="ident" id="5703864">ModeNamedPipe</span><span class="op" id="5703877">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703881"><a href="/archive/zip/struct.go.html#5703725">m</a></span>&nbsp;<span class="op" id="5703883">=</span>&nbsp;<span class="ident" id="5703885"><a href="/archive/zip/struct.go.html#5702347">s_IFIFO</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703894">case</span>&nbsp;<span class="ident" id="5703899"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5703901">.</span><span class="ident" id="5703902">ModeSocket</span><span class="op" id="5703912">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703916"><a href="/archive/zip/struct.go.html#5703725">m</a></span>&nbsp;<span class="op" id="5703918">=</span>&nbsp;<span class="ident" id="5703920"><a href="/archive/zip/struct.go.html#5702233">s_IFSOCK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703930">case</span>&nbsp;<span class="ident" id="5703935"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5703937">.</span><span class="ident" id="5703938">ModeDevice</span><span class="op" id="5703948">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5703952">if</span>&nbsp;<span class="ident" id="5703955"><a href="/archive/zip/struct.go.html#5703693">mode</a></span><span class="op" id="5703959">&amp;</span><span class="ident" id="5703960"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5703962">.</span><span class="ident" id="5703963">ModeCharDevice</span>&nbsp;<span class="op" id="5703978">!=</span>&nbsp;<span class="num" id="5703981">0</span>&nbsp;<span class="op" id="5703983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5703988"><a href="/archive/zip/struct.go.html#5703725">m</a></span>&nbsp;<span class="op" id="5703990">=</span>&nbsp;<span class="ident" id="5703992"><a href="/archive/zip/struct.go.html#5702328">s_IFCHR</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5704002">}</span>&nbsp;<span class="keyword" id="5704004">else</span>&nbsp;<span class="op" id="5704009">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704014"><a href="/archive/zip/struct.go.html#5703725">m</a></span>&nbsp;<span class="op" id="5704016">=</span>&nbsp;<span class="ident" id="5704018"><a href="/archive/zip/struct.go.html#5702290">s_IFBLK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5704028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5704031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704034">if</span>&nbsp;<span class="ident" id="5704037"><a href="/archive/zip/struct.go.html#5703693">mode</a></span><span class="op" id="5704041">&amp;</span><span class="ident" id="5704042"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704044">.</span><span class="ident" id="5704045">ModeSetuid</span>&nbsp;<span class="op" id="5704056">!=</span>&nbsp;<span class="num" id="5704059">0</span>&nbsp;<span class="op" id="5704061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704065"><a href="/archive/zip/struct.go.html#5703725">m</a></span>&nbsp;<span class="op" id="5704067">|=</span>&nbsp;<span class="ident" id="5704070"><a href="/archive/zip/struct.go.html#5702366">s_ISUID</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5704079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704082">if</span>&nbsp;<span class="ident" id="5704085"><a href="/archive/zip/struct.go.html#5703693">mode</a></span><span class="op" id="5704089">&amp;</span><span class="ident" id="5704090"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704092">.</span><span class="ident" id="5704093">ModeSetgid</span>&nbsp;<span class="op" id="5704104">!=</span>&nbsp;<span class="num" id="5704107">0</span>&nbsp;<span class="op" id="5704109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704113"><a href="/archive/zip/struct.go.html#5703725">m</a></span>&nbsp;<span class="op" id="5704115">|=</span>&nbsp;<span class="ident" id="5704118"><a href="/archive/zip/struct.go.html#5702384">s_ISGID</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5704127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704130">if</span>&nbsp;<span class="ident" id="5704133"><a href="/archive/zip/struct.go.html#5703693">mode</a></span><span class="op" id="5704137">&amp;</span><span class="ident" id="5704138"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704140">.</span><span class="ident" id="5704141">ModeSticky</span>&nbsp;<span class="op" id="5704152">!=</span>&nbsp;<span class="num" id="5704155">0</span>&nbsp;<span class="op" id="5704157">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704161"><a href="/archive/zip/struct.go.html#5703725">m</a></span>&nbsp;<span class="op" id="5704163">|=</span>&nbsp;<span class="ident" id="5704166"><a href="/archive/zip/struct.go.html#5702402">s_ISVTX</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5704175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704178">return</span>&nbsp;<span class="ident" id="5704185"><a href="/archive/zip/struct.go.html#5703725">m</a></span>&nbsp;<span class="op" id="5704187">|</span>&nbsp;<span class="builtintype" id="5704189">uint32</span><span class="op" id="5704195">(</span><span class="ident" id="5704196"><a href="/archive/zip/struct.go.html#5703693">mode</a></span><span class="op" id="5704200">&amp;</span><span class="num" id="5704201">0777</span><span class="op" id="5704205">)</span><br>
<span class="lineno"></span><span class="op" id="5704207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="5704210">func</span>&nbsp;<span class="ident" id="5704215">unixModeToFileMode</span><span class="op" id="5704233">(</span><span class="ident" id="5704234">m</span>&nbsp;<span class="builtintype" id="5704236">uint32</span><span class="op" id="5704242">)</span>&nbsp;<span class="ident" id="5704244"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704246">.</span><span class="ident" id="5704247">FileMode</span>&nbsp;<span class="op" id="5704256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704259">mode</span>&nbsp;<span class="op" id="5704264">:=</span>&nbsp;<span class="ident" id="5704267"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704269">.</span><span class="ident" id="5704270">FileMode</span><span class="op" id="5704278">(</span><span class="ident" id="5704279"><a href="/archive/zip/struct.go.html#5704234">m</a></span>&nbsp;<span class="op" id="5704281">&amp;</span>&nbsp;<span class="num" id="5704283">0777</span><span class="op" id="5704287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704290">switch</span>&nbsp;<span class="ident" id="5704297"><a href="/archive/zip/struct.go.html#5704234">m</a></span>&nbsp;<span class="op" id="5704299">&amp;</span>&nbsp;<span class="ident" id="5704301"><a href="/archive/zip/struct.go.html#5702214">s_IFMT</a></span>&nbsp;<span class="op" id="5704308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704311">case</span>&nbsp;<span class="ident" id="5704316"><a href="/archive/zip/struct.go.html#5702290">s_IFBLK</a></span><span class="op" id="5704323">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704327"><a href="/archive/zip/struct.go.html#5704259">mode</a></span>&nbsp;<span class="op" id="5704332">|=</span>&nbsp;<span class="ident" id="5704335"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704337">.</span><span class="ident" id="5704338">ModeDevice</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704350">case</span>&nbsp;<span class="ident" id="5704355"><a href="/archive/zip/struct.go.html#5702328">s_IFCHR</a></span><span class="op" id="5704362">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704366"><a href="/archive/zip/struct.go.html#5704259">mode</a></span>&nbsp;<span class="op" id="5704371">|=</span>&nbsp;<span class="ident" id="5704374"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704376">.</span><span class="ident" id="5704377">ModeDevice</span>&nbsp;<span class="op" id="5704388">|</span>&nbsp;<span class="ident" id="5704390"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704392">.</span><span class="ident" id="5704393">ModeCharDevice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704409">case</span>&nbsp;<span class="ident" id="5704414"><a href="/archive/zip/struct.go.html#5702309">s_IFDIR</a></span><span class="op" id="5704421">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704425"><a href="/archive/zip/struct.go.html#5704259">mode</a></span>&nbsp;<span class="op" id="5704430">|=</span>&nbsp;<span class="ident" id="5704433"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704435">.</span><span class="ident" id="5704436">ModeDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704445">case</span>&nbsp;<span class="ident" id="5704450"><a href="/archive/zip/struct.go.html#5702347">s_IFIFO</a></span><span class="op" id="5704457">:</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704461"><a href="/archive/zip/struct.go.html#5704259">mode</a></span>&nbsp;<span class="op" id="5704466">|=</span>&nbsp;<span class="ident" id="5704469"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704471">.</span><span class="ident" id="5704472">ModeNamedPipe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704487">case</span>&nbsp;<span class="ident" id="5704492"><a href="/archive/zip/struct.go.html#5702252">s_IFLNK</a></span><span class="op" id="5704499">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704503"><a href="/archive/zip/struct.go.html#5704259">mode</a></span>&nbsp;<span class="op" id="5704508">|=</span>&nbsp;<span class="ident" id="5704511"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704513">.</span><span class="ident" id="5704514">ModeSymlink</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704527">case</span>&nbsp;<span class="ident" id="5704532"><a href="/archive/zip/struct.go.html#5702271">s_IFREG</a></span><span class="op" id="5704539">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5704543">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704561">case</span>&nbsp;<span class="ident" id="5704566"><a href="/archive/zip/struct.go.html#5702233">s_IFSOCK</a></span><span class="op" id="5704574">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704578"><a href="/archive/zip/struct.go.html#5704259">mode</a></span>&nbsp;<span class="op" id="5704583">|=</span>&nbsp;<span class="ident" id="5704586"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704588">.</span><span class="ident" id="5704589">ModeSocket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5704601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704604">if</span>&nbsp;<span class="ident" id="5704607"><a href="/archive/zip/struct.go.html#5704234">m</a></span><span class="op" id="5704608">&amp;</span><span class="ident" id="5704609"><a href="/archive/zip/struct.go.html#5702384">s_ISGID</a></span>&nbsp;<span class="op" id="5704617">!=</span>&nbsp;<span class="num" id="5704620">0</span>&nbsp;<span class="op" id="5704622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704626"><a href="/archive/zip/struct.go.html#5704259">mode</a></span>&nbsp;<span class="op" id="5704631">|=</span>&nbsp;<span class="ident" id="5704634"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704636">.</span><span class="ident" id="5704637">ModeSetgid</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5704649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704652">if</span>&nbsp;<span class="ident" id="5704655"><a href="/archive/zip/struct.go.html#5704234">m</a></span><span class="op" id="5704656">&amp;</span><span class="ident" id="5704657"><a href="/archive/zip/struct.go.html#5702366">s_ISUID</a></span>&nbsp;<span class="op" id="5704665">!=</span>&nbsp;<span class="num" id="5704668">0</span>&nbsp;<span class="op" id="5704670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704674"><a href="/archive/zip/struct.go.html#5704259">mode</a></span>&nbsp;<span class="op" id="5704679">|=</span>&nbsp;<span class="ident" id="5704682"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704684">.</span><span class="ident" id="5704685">ModeSetuid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5704697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704700">if</span>&nbsp;<span class="ident" id="5704703"><a href="/archive/zip/struct.go.html#5704234">m</a></span><span class="op" id="5704704">&amp;</span><span class="ident" id="5704705"><a href="/archive/zip/struct.go.html#5702402">s_ISVTX</a></span>&nbsp;<span class="op" id="5704713">!=</span>&nbsp;<span class="num" id="5704716">0</span>&nbsp;<span class="op" id="5704718">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5704722"><a href="/archive/zip/struct.go.html#5704259">mode</a></span>&nbsp;<span class="op" id="5704727">|=</span>&nbsp;<span class="ident" id="5704730"><a href="/archive/zip/struct.go.html#5696969">os</a></span><span class="op" id="5704732">.</span><span class="ident" id="5704733">ModeSticky</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5704745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5704748">return</span>&nbsp;<span class="ident" id="5704755"><a href="/archive/zip/struct.go.html#5704259">mode</a></span><br>
<span class="lineno"></span><span class="op" id="5704760">}</span>
</div>
</body>
</html>
