<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/exec</h2>
<ul>
<li><a href="/gostd/os/exec/example_test.go.html" class="current">example_test.go</a></li>
<li><a href="/gostd/os/exec/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/os/exec/lp_test.go.html">lp_test.go</a></li>
<li><a href="/gostd/os/exec/lp_unix.go.html">lp_unix.go</a></li>
<li><a href="/gostd/os/exec/lp_unix_test.go.html">lp_unix_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="675061">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="675116">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="675170">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="675221">package</span>&nbsp;<span class="ident" id="675229">exec_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="675240">import</span>&nbsp;<span class="op" id="675247">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="675250">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="675259">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="675276">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="675283">&#34;log&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="675290">&#34;os/exec&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="675301">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="675311">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="675314">func</span>&nbsp;<span class="ident" id="675319">ExampleLookPath</span><span class="op" id="675334">(</span><span class="op" id="675335">)</span>&nbsp;<span class="op" id="675337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675340">path</span><span class="op" id="675344">,</span>&nbsp;<span class="ident" id="675346">err</span>&nbsp;<span class="op" id="675350">:=</span>&nbsp;<span class="ident" id="675353">exec</span><span class="op" id="675357">.</span><span class="ident" id="675358">LookPath</span><span class="op" id="675366">(</span><span class="string" id="675367">&#34;fortune&#34;</span><span class="op" id="675376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="675379">if</span>&nbsp;<span class="ident" id="675382">err</span>&nbsp;<span class="op" id="675386">!=</span>&nbsp;<span class="ident" id="675389">nil</span>&nbsp;<span class="op" id="675393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675397">log</span><span class="op" id="675400">.</span><span class="ident" id="675401">Fatal</span><span class="op" id="675406">(</span><span class="string" id="675407">&#34;installing&nbsp;fortune&nbsp;is&nbsp;in&nbsp;your&nbsp;future&#34;</span><span class="op" id="675445">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="675448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675451">fmt</span><span class="op" id="675454">.</span><span class="ident" id="675455">Printf</span><span class="op" id="675461">(</span><span class="string" id="675462">&#34;fortune&nbsp;is&nbsp;available&nbsp;at&nbsp;%s\n&#34;</span><span class="op" id="675492">,</span>&nbsp;<span class="ident" id="675494">path</span><span class="op" id="675498">)</span><br>
<span class="lineno"></span><span class="op" id="675500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="675503">func</span>&nbsp;<span class="ident" id="675508">ExampleCommand</span><span class="op" id="675522">(</span><span class="op" id="675523">)</span>&nbsp;<span class="op" id="675525">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675528">cmd</span>&nbsp;<span class="op" id="675532">:=</span>&nbsp;<span class="ident" id="675535">exec</span><span class="op" id="675539">.</span><span class="ident" id="675540">Command</span><span class="op" id="675547">(</span><span class="string" id="675548">&#34;tr&#34;</span><span class="op" id="675552">,</span>&nbsp;<span class="string" id="675554">&#34;a-z&#34;</span><span class="op" id="675559">,</span>&nbsp;<span class="string" id="675561">&#34;A-Z&#34;</span><span class="op" id="675566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675569">cmd</span><span class="op" id="675572">.</span><span class="ident" id="675573">Stdin</span>&nbsp;<span class="op" id="675579">=</span>&nbsp;<span class="ident" id="675581">strings</span><span class="op" id="675588">.</span><span class="ident" id="675589">NewReader</span><span class="op" id="675598">(</span><span class="string" id="675599">&#34;some&nbsp;input&#34;</span><span class="op" id="675611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="675614">var</span>&nbsp;<span class="ident" id="675618">out</span>&nbsp;<span class="ident" id="675622">bytes</span><span class="op" id="675627">.</span><span class="ident" id="675628">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675636">cmd</span><span class="op" id="675639">.</span><span class="ident" id="675640">Stdout</span>&nbsp;<span class="op" id="675647">=</span>&nbsp;<span class="op" id="675649">&amp;</span><span class="ident" id="675650">out</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675655">err</span>&nbsp;<span class="op" id="675659">:=</span>&nbsp;<span class="ident" id="675662">cmd</span><span class="op" id="675665">.</span><span class="ident" id="675666">Run</span><span class="op" id="675669">(</span><span class="op" id="675670">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="675673">if</span>&nbsp;<span class="ident" id="675676">err</span>&nbsp;<span class="op" id="675680">!=</span>&nbsp;<span class="ident" id="675683">nil</span>&nbsp;<span class="op" id="675687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675691">log</span><span class="op" id="675694">.</span><span class="ident" id="675695">Fatal</span><span class="op" id="675700">(</span><span class="ident" id="675701">err</span><span class="op" id="675704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="675707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675710">fmt</span><span class="op" id="675713">.</span><span class="ident" id="675714">Printf</span><span class="op" id="675720">(</span><span class="string" id="675721">&#34;in&nbsp;all&nbsp;caps:&nbsp;%q\n&#34;</span><span class="op" id="675740">,</span>&nbsp;<span class="ident" id="675742">out</span><span class="op" id="675745">.</span><span class="ident" id="675746">String</span><span class="op" id="675752">(</span><span class="op" id="675753">)</span><span class="op" id="675754">)</span><br>
<span class="lineno"></span><span class="op" id="675756">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="675759">func</span>&nbsp;<span class="ident" id="675764">ExampleCmd_Output</span><span class="op" id="675781">(</span><span class="op" id="675782">)</span>&nbsp;<span class="op" id="675784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675787">out</span><span class="op" id="675790">,</span>&nbsp;<span class="ident" id="675792">err</span>&nbsp;<span class="op" id="675796">:=</span>&nbsp;<span class="ident" id="675799">exec</span><span class="op" id="675803">.</span><span class="ident" id="675804">Command</span><span class="op" id="675811">(</span><span class="string" id="675812">&#34;date&#34;</span><span class="op" id="675818">)</span><span class="op" id="675819">.</span><span class="ident" id="675820">Output</span><span class="op" id="675826">(</span><span class="op" id="675827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="675830">if</span>&nbsp;<span class="ident" id="675833">err</span>&nbsp;<span class="op" id="675837">!=</span>&nbsp;<span class="ident" id="675840">nil</span>&nbsp;<span class="op" id="675844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675848">log</span><span class="op" id="675851">.</span><span class="ident" id="675852">Fatal</span><span class="op" id="675857">(</span><span class="ident" id="675858">err</span><span class="op" id="675861">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="675864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675867">fmt</span><span class="op" id="675870">.</span><span class="ident" id="675871">Printf</span><span class="op" id="675877">(</span><span class="string" id="675878">&#34;The&nbsp;date&nbsp;is&nbsp;%s\n&#34;</span><span class="op" id="675896">,</span>&nbsp;<span class="ident" id="675898">out</span><span class="op" id="675901">)</span><br>
<span class="lineno"></span><span class="op" id="675903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="675906">func</span>&nbsp;<span class="ident" id="675911">ExampleCmd_Start</span><span class="op" id="675927">(</span><span class="op" id="675928">)</span>&nbsp;<span class="op" id="675930">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675933">cmd</span>&nbsp;<span class="op" id="675937">:=</span>&nbsp;<span class="ident" id="675940">exec</span><span class="op" id="675944">.</span><span class="ident" id="675945">Command</span><span class="op" id="675952">(</span><span class="string" id="675953">&#34;sleep&#34;</span><span class="op" id="675960">,</span>&nbsp;<span class="string" id="675962">&#34;5&#34;</span><span class="op" id="675965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="675968">err</span>&nbsp;<span class="op" id="675972">:=</span>&nbsp;<span class="ident" id="675975">cmd</span><span class="op" id="675978">.</span><span class="ident" id="675979">Start</span><span class="op" id="675984">(</span><span class="op" id="675985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="675988">if</span>&nbsp;<span class="ident" id="675991">err</span>&nbsp;<span class="op" id="675995">!=</span>&nbsp;<span class="ident" id="675998">nil</span>&nbsp;<span class="op" id="676002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676006">log</span><span class="op" id="676009">.</span><span class="ident" id="676010">Fatal</span><span class="op" id="676015">(</span><span class="ident" id="676016">err</span><span class="op" id="676019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="676022">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676025">log</span><span class="op" id="676028">.</span><span class="ident" id="676029">Printf</span><span class="op" id="676035">(</span><span class="string" id="676036">&#34;Waiting&nbsp;for&nbsp;command&nbsp;to&nbsp;finish...&#34;</span><span class="op" id="676070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676073">err</span>&nbsp;<span class="op" id="676077">=</span>&nbsp;<span class="ident" id="676079">cmd</span><span class="op" id="676082">.</span><span class="ident" id="676083">Wait</span><span class="op" id="676087">(</span><span class="op" id="676088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676091">log</span><span class="op" id="676094">.</span><span class="ident" id="676095">Printf</span><span class="op" id="676101">(</span><span class="string" id="676102">&#34;Command&nbsp;finished&nbsp;with&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="676135">,</span>&nbsp;<span class="ident" id="676137">err</span><span class="op" id="676140">)</span><br>
<span class="lineno"></span><span class="op" id="676142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="676145">func</span>&nbsp;<span class="ident" id="676150">ExampleCmd_StdoutPipe</span><span class="op" id="676171">(</span><span class="op" id="676172">)</span>&nbsp;<span class="op" id="676174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676177">cmd</span>&nbsp;<span class="op" id="676181">:=</span>&nbsp;<span class="ident" id="676184">exec</span><span class="op" id="676188">.</span><span class="ident" id="676189">Command</span><span class="op" id="676196">(</span><span class="string" id="676197">&#34;echo&#34;</span><span class="op" id="676203">,</span>&nbsp;<span class="string" id="676205">&#34;-n&#34;</span><span class="op" id="676209">,</span>&nbsp;<span class="string" id="676211">`{&#34;Name&#34;:&nbsp;&#34;Bob&#34;,&nbsp;&#34;Age&#34;:&nbsp;32}`</span><span class="op" id="676239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676242">stdout</span><span class="op" id="676248">,</span>&nbsp;<span class="ident" id="676250">err</span>&nbsp;<span class="op" id="676254">:=</span>&nbsp;<span class="ident" id="676257">cmd</span><span class="op" id="676260">.</span><span class="ident" id="676261">StdoutPipe</span><span class="op" id="676271">(</span><span class="op" id="676272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="676275">if</span>&nbsp;<span class="ident" id="676278">err</span>&nbsp;<span class="op" id="676282">!=</span>&nbsp;<span class="ident" id="676285">nil</span>&nbsp;<span class="op" id="676289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676293">log</span><span class="op" id="676296">.</span><span class="ident" id="676297">Fatal</span><span class="op" id="676302">(</span><span class="ident" id="676303">err</span><span class="op" id="676306">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="676309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="676312">if</span>&nbsp;<span class="ident" id="676315">err</span>&nbsp;<span class="op" id="676319">:=</span>&nbsp;<span class="ident" id="676322">cmd</span><span class="op" id="676325">.</span><span class="ident" id="676326">Start</span><span class="op" id="676331">(</span><span class="op" id="676332">)</span><span class="op" id="676333">;</span>&nbsp;<span class="ident" id="676335">err</span>&nbsp;<span class="op" id="676339">!=</span>&nbsp;<span class="ident" id="676342">nil</span>&nbsp;<span class="op" id="676346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676350">log</span><span class="op" id="676353">.</span><span class="ident" id="676354">Fatal</span><span class="op" id="676359">(</span><span class="ident" id="676360">err</span><span class="op" id="676363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="676366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="676369">var</span>&nbsp;<span class="ident" id="676373">person</span>&nbsp;<span class="keyword" id="676380">struct</span>&nbsp;<span class="op" id="676387">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676391">Name</span>&nbsp;<span class="builtintype" id="676396">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676405">Age</span>&nbsp;&nbsp;<span class="builtintype" id="676410">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="676415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="676418">if</span>&nbsp;<span class="ident" id="676421">err</span>&nbsp;<span class="op" id="676425">:=</span>&nbsp;<span class="ident" id="676428">json</span><span class="op" id="676432">.</span><span class="ident" id="676433">NewDecoder</span><span class="op" id="676443">(</span><span class="ident" id="676444">stdout</span><span class="op" id="676450">)</span><span class="op" id="676451">.</span><span class="ident" id="676452">Decode</span><span class="op" id="676458">(</span><span class="op" id="676459">&amp;</span><span class="ident" id="676460">person</span><span class="op" id="676466">)</span><span class="op" id="676467">;</span>&nbsp;<span class="ident" id="676469">err</span>&nbsp;<span class="op" id="676473">!=</span>&nbsp;<span class="ident" id="676476">nil</span>&nbsp;<span class="op" id="676480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676484">log</span><span class="op" id="676487">.</span><span class="ident" id="676488">Fatal</span><span class="op" id="676493">(</span><span class="ident" id="676494">err</span><span class="op" id="676497">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="676500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="676503">if</span>&nbsp;<span class="ident" id="676506">err</span>&nbsp;<span class="op" id="676510">:=</span>&nbsp;<span class="ident" id="676513">cmd</span><span class="op" id="676516">.</span><span class="ident" id="676517">Wait</span><span class="op" id="676521">(</span><span class="op" id="676522">)</span><span class="op" id="676523">;</span>&nbsp;<span class="ident" id="676525">err</span>&nbsp;<span class="op" id="676529">!=</span>&nbsp;<span class="ident" id="676532">nil</span>&nbsp;<span class="op" id="676536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676540">log</span><span class="op" id="676543">.</span><span class="ident" id="676544">Fatal</span><span class="op" id="676549">(</span><span class="ident" id="676550">err</span><span class="op" id="676553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="676556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="676559">fmt</span><span class="op" id="676562">.</span><span class="ident" id="676563">Printf</span><span class="op" id="676569">(</span><span class="string" id="676570">&#34;%s&nbsp;is&nbsp;%d&nbsp;years&nbsp;old\n&#34;</span><span class="op" id="676592">,</span>&nbsp;<span class="ident" id="676594">person</span><span class="op" id="676600">.</span><span class="ident" id="676601">Name</span><span class="op" id="676605">,</span>&nbsp;<span class="ident" id="676607">person</span><span class="op" id="676613">.</span><span class="ident" id="676614">Age</span><span class="op" id="676617">)</span><br>
<span class="lineno">75</span><span class="op" id="676619">}</span>
</div>
</body>
</html>
