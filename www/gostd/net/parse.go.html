<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html" class="current">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4147700">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4147755">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4147809">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4147860">//&nbsp;Simple&nbsp;file&nbsp;i/o&nbsp;and&nbsp;string&nbsp;manipulation,&nbsp;to&nbsp;avoid</span><br>
<span class="lineno"></span><span class="comment" id="4147913">//&nbsp;depending&nbsp;on&nbsp;strconv&nbsp;and&nbsp;bufio&nbsp;and&nbsp;strings.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4147961">package</span>&nbsp;<span class="ident" id="4147969">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="4147974">import</span>&nbsp;<span class="op" id="4147981">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4147984">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4147990">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="4147995">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="4147998">type</span>&nbsp;<span class="ident" id="4148003">file</span>&nbsp;<span class="keyword" id="4148008">struct</span>&nbsp;<span class="op" id="4148015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148018">file</span>&nbsp;&nbsp;<span class="op" id="4148024">*</span><span class="ident" id="4148025">os</span><span class="op" id="4148027">.</span><span class="ident" id="4148028">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148034">data</span>&nbsp;&nbsp;<span class="op" id="4148040">[</span><span class="op" id="4148041">]</span><span class="builtintype" id="4148042">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148048">atEOF</span>&nbsp;<span class="builtintype" id="4148054">bool</span><br>
<span class="lineno"></span><span class="op" id="4148059">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="4148062">func</span>&nbsp;<span class="op" id="4148067">(</span><span class="ident" id="4148068">f</span>&nbsp;<span class="op" id="4148070">*</span><span class="ident" id="4148071">file</span><span class="op" id="4148075">)</span>&nbsp;<span class="builtinfunc" id="4148077">close</span><span class="op" id="4148082">(</span><span class="op" id="4148083">)</span>&nbsp;<span class="op" id="4148085">{</span>&nbsp;<span class="ident" id="4148087">f</span><span class="op" id="4148088">.</span><span class="ident" id="4148089">file</span><span class="op" id="4148093">.</span><span class="ident" id="4148094">Close</span><span class="op" id="4148099">(</span><span class="op" id="4148100">)</span>&nbsp;<span class="op" id="4148102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4148105">func</span>&nbsp;<span class="op" id="4148110">(</span><span class="ident" id="4148111">f</span>&nbsp;<span class="op" id="4148113">*</span><span class="ident" id="4148114">file</span><span class="op" id="4148118">)</span>&nbsp;<span class="ident" id="4148120">getLineFromData</span><span class="op" id="4148135">(</span><span class="op" id="4148136">)</span>&nbsp;<span class="op" id="4148138">(</span><span class="ident" id="4148139">s</span>&nbsp;<span class="builtintype" id="4148141">string</span><span class="op" id="4148147">,</span>&nbsp;<span class="ident" id="4148149">ok</span>&nbsp;<span class="builtintype" id="4148152">bool</span><span class="op" id="4148156">)</span>&nbsp;<span class="op" id="4148158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148161">data</span>&nbsp;<span class="op" id="4148166">:=</span>&nbsp;<span class="ident" id="4148169">f</span><span class="op" id="4148170">.</span><span class="ident" id="4148171">data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148177">i</span>&nbsp;<span class="op" id="4148179">:=</span>&nbsp;<span class="num" id="4148182">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148185">for</span>&nbsp;<span class="ident" id="4148189">i</span>&nbsp;<span class="op" id="4148191">=</span>&nbsp;<span class="num" id="4148193">0</span><span class="op" id="4148194">;</span>&nbsp;<span class="ident" id="4148196">i</span>&nbsp;<span class="op" id="4148198">&lt;</span>&nbsp;<span class="builtinfunc" id="4148200">len</span><span class="op" id="4148203">(</span><span class="ident" id="4148204">data</span><span class="op" id="4148208">)</span><span class="op" id="4148209">;</span>&nbsp;<span class="ident" id="4148211">i</span><span class="op" id="4148212">++</span>&nbsp;<span class="op" id="4148215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148219">if</span>&nbsp;<span class="ident" id="4148222">data</span><span class="op" id="4148226">[</span><span class="ident" id="4148227">i</span><span class="op" id="4148228">]</span>&nbsp;<span class="op" id="4148230">==</span>&nbsp;<span class="string" id="4148233">&#39;\n&#39;</span>&nbsp;<span class="op" id="4148238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148243">s</span>&nbsp;<span class="op" id="4148245">=</span>&nbsp;<span class="builtintype" id="4148247">string</span><span class="op" id="4148253">(</span><span class="ident" id="4148254">data</span><span class="op" id="4148258">[</span><span class="num" id="4148259">0</span><span class="op" id="4148260">:</span><span class="ident" id="4148261">i</span><span class="op" id="4148262">]</span><span class="op" id="4148263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148268">ok</span>&nbsp;<span class="op" id="4148271">=</span>&nbsp;<span class="builtintype" id="4148273">true</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4148281">//&nbsp;move&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148297">i</span><span class="op" id="4148298">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148304">n</span>&nbsp;<span class="op" id="4148306">:=</span>&nbsp;<span class="builtinfunc" id="4148309">len</span><span class="op" id="4148312">(</span><span class="ident" id="4148313">data</span><span class="op" id="4148317">)</span>&nbsp;<span class="op" id="4148319">-</span>&nbsp;<span class="ident" id="4148321">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4148326">copy</span><span class="op" id="4148330">(</span><span class="ident" id="4148331">data</span><span class="op" id="4148335">[</span><span class="num" id="4148336">0</span><span class="op" id="4148337">:</span><span class="op" id="4148338">]</span><span class="op" id="4148339">,</span>&nbsp;<span class="ident" id="4148341">data</span><span class="op" id="4148345">[</span><span class="ident" id="4148346">i</span><span class="op" id="4148347">:</span><span class="op" id="4148348">]</span><span class="op" id="4148349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148354">f</span><span class="op" id="4148355">.</span><span class="ident" id="4148356">data</span>&nbsp;<span class="op" id="4148361">=</span>&nbsp;<span class="ident" id="4148363">data</span><span class="op" id="4148367">[</span><span class="num" id="4148368">0</span><span class="op" id="4148369">:</span><span class="ident" id="4148370">n</span><span class="op" id="4148371">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148376">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4148385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4148388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148391">if</span>&nbsp;<span class="ident" id="4148394">f</span><span class="op" id="4148395">.</span><span class="ident" id="4148396">atEOF</span>&nbsp;<span class="op" id="4148402">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4148405">len</span><span class="op" id="4148408">(</span><span class="ident" id="4148409">f</span><span class="op" id="4148410">.</span><span class="ident" id="4148411">data</span><span class="op" id="4148415">)</span>&nbsp;<span class="op" id="4148417">&gt;</span>&nbsp;<span class="num" id="4148419">0</span>&nbsp;<span class="op" id="4148421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4148425">//&nbsp;EOF,&nbsp;return&nbsp;all&nbsp;we&nbsp;have</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148454">s</span>&nbsp;<span class="op" id="4148456">=</span>&nbsp;<span class="builtintype" id="4148458">string</span><span class="op" id="4148464">(</span><span class="ident" id="4148465">data</span><span class="op" id="4148469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148473">f</span><span class="op" id="4148474">.</span><span class="ident" id="4148475">data</span>&nbsp;<span class="op" id="4148480">=</span>&nbsp;<span class="ident" id="4148482">f</span><span class="op" id="4148483">.</span><span class="ident" id="4148484">data</span><span class="op" id="4148488">[</span><span class="num" id="4148489">0</span><span class="op" id="4148490">:</span><span class="num" id="4148491">0</span><span class="op" id="4148492">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148496">ok</span>&nbsp;<span class="op" id="4148499">=</span>&nbsp;<span class="builtintype" id="4148501">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4148507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148510">return</span><br>
<span class="lineno">45</span><span class="op" id="4148517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4148520">func</span>&nbsp;<span class="op" id="4148525">(</span><span class="ident" id="4148526">f</span>&nbsp;<span class="op" id="4148528">*</span><span class="ident" id="4148529">file</span><span class="op" id="4148533">)</span>&nbsp;<span class="ident" id="4148535">readLine</span><span class="op" id="4148543">(</span><span class="op" id="4148544">)</span>&nbsp;<span class="op" id="4148546">(</span><span class="ident" id="4148547">s</span>&nbsp;<span class="builtintype" id="4148549">string</span><span class="op" id="4148555">,</span>&nbsp;<span class="ident" id="4148557">ok</span>&nbsp;<span class="builtintype" id="4148560">bool</span><span class="op" id="4148564">)</span>&nbsp;<span class="op" id="4148566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148569">if</span>&nbsp;<span class="ident" id="4148572">s</span><span class="op" id="4148573">,</span>&nbsp;<span class="ident" id="4148575">ok</span>&nbsp;<span class="op" id="4148578">=</span>&nbsp;<span class="ident" id="4148580">f</span><span class="op" id="4148581">.</span><span class="ident" id="4148582">getLineFromData</span><span class="op" id="4148597">(</span><span class="op" id="4148598">)</span><span class="op" id="4148599">;</span>&nbsp;<span class="ident" id="4148601">ok</span>&nbsp;<span class="op" id="4148604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148608">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4148616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148619">if</span>&nbsp;<span class="builtinfunc" id="4148622">len</span><span class="op" id="4148625">(</span><span class="ident" id="4148626">f</span><span class="op" id="4148627">.</span><span class="ident" id="4148628">data</span><span class="op" id="4148632">)</span>&nbsp;<span class="op" id="4148634">&lt;</span>&nbsp;<span class="builtinfunc" id="4148636">cap</span><span class="op" id="4148639">(</span><span class="ident" id="4148640">f</span><span class="op" id="4148641">.</span><span class="ident" id="4148642">data</span><span class="op" id="4148646">)</span>&nbsp;<span class="op" id="4148648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148652">ln</span>&nbsp;<span class="op" id="4148655">:=</span>&nbsp;<span class="builtinfunc" id="4148658">len</span><span class="op" id="4148661">(</span><span class="ident" id="4148662">f</span><span class="op" id="4148663">.</span><span class="ident" id="4148664">data</span><span class="op" id="4148668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148672">n</span><span class="op" id="4148673">,</span>&nbsp;<span class="ident" id="4148675">err</span>&nbsp;<span class="op" id="4148679">:=</span>&nbsp;<span class="ident" id="4148682">io</span><span class="op" id="4148684">.</span><span class="ident" id="4148685">ReadFull</span><span class="op" id="4148693">(</span><span class="ident" id="4148694">f</span><span class="op" id="4148695">.</span><span class="ident" id="4148696">file</span><span class="op" id="4148700">,</span>&nbsp;<span class="ident" id="4148702">f</span><span class="op" id="4148703">.</span><span class="ident" id="4148704">data</span><span class="op" id="4148708">[</span><span class="ident" id="4148709">ln</span><span class="op" id="4148711">:</span><span class="builtinfunc" id="4148712">cap</span><span class="op" id="4148715">(</span><span class="ident" id="4148716">f</span><span class="op" id="4148717">.</span><span class="ident" id="4148718">data</span><span class="op" id="4148722">)</span><span class="op" id="4148723">]</span><span class="op" id="4148724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148728">if</span>&nbsp;<span class="ident" id="4148731">n</span>&nbsp;<span class="op" id="4148733">&gt;=</span>&nbsp;<span class="num" id="4148736">0</span>&nbsp;<span class="op" id="4148738">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148743">f</span><span class="op" id="4148744">.</span><span class="ident" id="4148745">data</span>&nbsp;<span class="op" id="4148750">=</span>&nbsp;<span class="ident" id="4148752">f</span><span class="op" id="4148753">.</span><span class="ident" id="4148754">data</span><span class="op" id="4148758">[</span><span class="num" id="4148759">0</span>&nbsp;<span class="op" id="4148761">:</span>&nbsp;<span class="ident" id="4148763">ln</span><span class="op" id="4148765">+</span><span class="ident" id="4148766">n</span><span class="op" id="4148767">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4148771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148775">if</span>&nbsp;<span class="ident" id="4148778">err</span>&nbsp;<span class="op" id="4148782">==</span>&nbsp;<span class="ident" id="4148785">io</span><span class="op" id="4148787">.</span><span class="ident" id="4148788">EOF</span>&nbsp;<span class="op" id="4148792">||</span>&nbsp;<span class="ident" id="4148795">err</span>&nbsp;<span class="op" id="4148799">==</span>&nbsp;<span class="ident" id="4148802">io</span><span class="op" id="4148804">.</span><span class="ident" id="4148805">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="4148822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148827">f</span><span class="op" id="4148828">.</span><span class="ident" id="4148829">atEOF</span>&nbsp;<span class="op" id="4148835">=</span>&nbsp;<span class="builtintype" id="4148837">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4148844">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4148847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148850">s</span><span class="op" id="4148851">,</span>&nbsp;<span class="ident" id="4148853">ok</span>&nbsp;<span class="op" id="4148856">=</span>&nbsp;<span class="ident" id="4148858">f</span><span class="op" id="4148859">.</span><span class="ident" id="4148860">getLineFromData</span><span class="op" id="4148875">(</span><span class="op" id="4148876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148879">return</span><br>
<span class="lineno"></span><span class="op" id="4148886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="4148889">func</span>&nbsp;<span class="ident" id="4148894">open</span><span class="op" id="4148898">(</span><span class="ident" id="4148899">name</span>&nbsp;<span class="builtintype" id="4148904">string</span><span class="op" id="4148910">)</span>&nbsp;<span class="op" id="4148912">(</span><span class="op" id="4148913">*</span><span class="ident" id="4148914">file</span><span class="op" id="4148918">,</span>&nbsp;<span class="builtintype" id="4148920">error</span><span class="op" id="4148925">)</span>&nbsp;<span class="op" id="4148927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4148930">fd</span><span class="op" id="4148932">,</span>&nbsp;<span class="ident" id="4148934">err</span>&nbsp;<span class="op" id="4148938">:=</span>&nbsp;<span class="ident" id="4148941">os</span><span class="op" id="4148943">.</span><span class="ident" id="4148944">Open</span><span class="op" id="4148948">(</span><span class="ident" id="4148949">name</span><span class="op" id="4148953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148956">if</span>&nbsp;<span class="ident" id="4148959">err</span>&nbsp;<span class="op" id="4148963">!=</span>&nbsp;<span class="ident" id="4148966">nil</span>&nbsp;<span class="op" id="4148970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148974">return</span>&nbsp;<span class="ident" id="4148981">nil</span><span class="op" id="4148984">,</span>&nbsp;<span class="ident" id="4148986">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4148991">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4148994">return</span>&nbsp;<span class="op" id="4149001">&amp;</span><span class="ident" id="4149002">file</span><span class="op" id="4149006">{</span><span class="ident" id="4149007">fd</span><span class="op" id="4149009">,</span>&nbsp;<span class="builtinfunc" id="4149011">make</span><span class="op" id="4149015">(</span><span class="op" id="4149016">[</span><span class="op" id="4149017">]</span><span class="builtintype" id="4149018">byte</span><span class="op" id="4149022">,</span>&nbsp;<span class="num" id="4149024">0</span><span class="op" id="4149025">,</span>&nbsp;<span class="ident" id="4149027">os</span><span class="op" id="4149029">.</span><span class="ident" id="4149030">Getpagesize</span><span class="op" id="4149041">(</span><span class="op" id="4149042">)</span><span class="op" id="4149043">)</span><span class="op" id="4149044">,</span>&nbsp;<span class="builtintype" id="4149046">false</span><span class="op" id="4149051">}</span><span class="op" id="4149052">,</span>&nbsp;<span class="ident" id="4149054">nil</span><br>
<span class="lineno"></span><span class="op" id="4149058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4149061">func</span>&nbsp;<span class="ident" id="4149066">byteIndex</span><span class="op" id="4149075">(</span><span class="ident" id="4149076">s</span>&nbsp;<span class="builtintype" id="4149078">string</span><span class="op" id="4149084">,</span>&nbsp;<span class="ident" id="4149086">c</span>&nbsp;<span class="builtintype" id="4149088">byte</span><span class="op" id="4149092">)</span>&nbsp;<span class="builtintype" id="4149094">int</span>&nbsp;<span class="op" id="4149098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4149101">for</span>&nbsp;<span class="ident" id="4149105">i</span>&nbsp;<span class="op" id="4149107">:=</span>&nbsp;<span class="num" id="4149110">0</span><span class="op" id="4149111">;</span>&nbsp;<span class="ident" id="4149113">i</span>&nbsp;<span class="op" id="4149115">&lt;</span>&nbsp;<span class="builtinfunc" id="4149117">len</span><span class="op" id="4149120">(</span><span class="ident" id="4149121">s</span><span class="op" id="4149122">)</span><span class="op" id="4149123">;</span>&nbsp;<span class="ident" id="4149125">i</span><span class="op" id="4149126">++</span>&nbsp;<span class="op" id="4149129">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4149133">if</span>&nbsp;<span class="ident" id="4149136">s</span><span class="op" id="4149137">[</span><span class="ident" id="4149138">i</span><span class="op" id="4149139">]</span>&nbsp;<span class="op" id="4149141">==</span>&nbsp;<span class="ident" id="4149144">c</span>&nbsp;<span class="op" id="4149146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4149151">return</span>&nbsp;<span class="ident" id="4149158">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4149162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4149165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4149168">return</span>&nbsp;<span class="op" id="4149175">-</span><span class="num" id="4149176">1</span><br>
<span class="lineno">80</span><span class="op" id="4149178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4149181">//&nbsp;Count&nbsp;occurrences&nbsp;in&nbsp;s&nbsp;of&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="4149226">func</span>&nbsp;<span class="ident" id="4149231">countAnyByte</span><span class="op" id="4149243">(</span><span class="ident" id="4149244">s</span>&nbsp;<span class="builtintype" id="4149246">string</span><span class="op" id="4149252">,</span>&nbsp;<span class="ident" id="4149254">t</span>&nbsp;<span class="builtintype" id="4149256">string</span><span class="op" id="4149262">)</span>&nbsp;<span class="builtintype" id="4149264">int</span>&nbsp;<span class="op" id="4149268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4149271">n</span>&nbsp;<span class="op" id="4149273">:=</span>&nbsp;<span class="num" id="4149276">0</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4149279">for</span>&nbsp;<span class="ident" id="4149283">i</span>&nbsp;<span class="op" id="4149285">:=</span>&nbsp;<span class="num" id="4149288">0</span><span class="op" id="4149289">;</span>&nbsp;<span class="ident" id="4149291">i</span>&nbsp;<span class="op" id="4149293">&lt;</span>&nbsp;<span class="builtinfunc" id="4149295">len</span><span class="op" id="4149298">(</span><span class="ident" id="4149299">s</span><span class="op" id="4149300">)</span><span class="op" id="4149301">;</span>&nbsp;<span class="ident" id="4149303">i</span><span class="op" id="4149304">++</span>&nbsp;<span class="op" id="4149307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4149311">if</span>&nbsp;<span class="ident" id="4149314">byteIndex</span><span class="op" id="4149323">(</span><span class="ident" id="4149324">t</span><span class="op" id="4149325">,</span>&nbsp;<span class="ident" id="4149327">s</span><span class="op" id="4149328">[</span><span class="ident" id="4149329">i</span><span class="op" id="4149330">]</span><span class="op" id="4149331">)</span>&nbsp;<span class="op" id="4149333">&gt;=</span>&nbsp;<span class="num" id="4149336">0</span>&nbsp;<span class="op" id="4149338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4149343">n</span><span class="op" id="4149344">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4149349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4149352">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4149355">return</span>&nbsp;<span class="ident" id="4149362">n</span><br>
<span class="lineno"></span><span class="op" id="4149364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4149367">//&nbsp;Split&nbsp;s&nbsp;at&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="4149397">func</span>&nbsp;<span class="ident" id="4149402">splitAtBytes</span><span class="op" id="4149414">(</span><span class="ident" id="4149415">s</span>&nbsp;<span class="builtintype" id="4149417">string</span><span class="op" id="4149423">,</span>&nbsp;<span class="ident" id="4149425">t</span>&nbsp;<span class="builtintype" id="4149427">string</span><span class="op" id="4149433">)</span>&nbsp;<span class="op" id="4149435">[</span><span class="op" id="4149436">]</span><span class="builtintype" id="4149437">string</span>&nbsp;<span class="op" id="4149444">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4149447">a</span>&nbsp;<span class="op" id="4149449">:=</span>&nbsp;<span class="builtinfunc" id="4149452">make</span><span class="op" id="4149456">(</span><span class="op" id="4149457">[</span><span class="op" id="4149458">]</span><span class="builtintype" id="4149459">string</span><span class="op" id="4149465">,</span>&nbsp;<span class="num" id="4149467">1</span><span class="op" id="4149468">+</span><span class="ident" id="4149469">countAnyByte</span><span class="op" id="4149481">(</span><span class="ident" id="4149482">s</span><span class="op" id="4149483">,</span>&nbsp;<span class="ident" id="4149485">t</span><span class="op" id="4149486">)</span><span class="op" id="4149487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4149490">n</span>&nbsp;<span class="op" id="4149492">:=</span>&nbsp;<span class="num" id="4149495">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4149498">last</span>&nbsp;<span class="op" id="4149503">:=</span>&nbsp;<span class="num" id="4149506">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4149509">for</span>&nbsp;<span class="ident" id="4149513">i</span>&nbsp;<span class="op" id="4149515">:=</span>&nbsp;<span class="num" id="4149518">0</span><span class="op" id="4149519">;</span>&nbsp;<span class="ident" id="4149521">i</span>&nbsp;<span class="op" id="4149523">&lt;</span>&nbsp;<span class="builtinfunc" id="4149525">len</span><span class="op" id="4149528">(</span><span class="ident" id="4149529">s</span><span class="op" id="4149530">)</span><span class="op" id="4149531">;</span>&nbsp;<span class="ident" id="4149533">i</span><span class="op" id="4149534">++</span>&nbsp;<span class="op" id="4149537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4149541">if</span>&nbsp;<span class="ident" id="4149544">byteIndex</span><span class="op" id="4149553">(</span><span class="ident" id="4149554">t</span><span class="op" id="4149555">,</span>&nbsp;<span class="ident" id="4149557">s</span><span class="op" id="4149558">[</span><span class="ident" id="4149559">i</span><span class="op" id="4149560">]</span><span class="op" id="4149561">)</span>&nbsp;<span class="op" id="4149563">&gt;=</span>&nbsp;<span class="num" id="4149566">0</span>&nbsp;<span class="op" id="4149568">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4149573">if</span>&nbsp;<span class="ident" id="4149576">last</span>&nbsp;<span class="op" id="4149581">&lt;</span>&nbsp;<span class="ident" id="4149583">i</span>&nbsp;<span class="op" id="4149585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4149591">a</span><span class="op" id="4149592">[</span><span class="ident" id="4149593">n</span><span class="op" id="4149594">]</span>&nbsp;<span class="op" id="4149596">=</span>&nbsp;<span class="builtintype" id="4149598">string</span><span class="op" id="4149604">(</span><span class="ident" id="4149605">s</span><span class="op" id="4149606">[</span><span class="ident" id="4149607">last</span><span class="op" id="4149611">:</span><span class="ident" id="4149612">i</span><span class="op" id="4149613">]</span><span class="op" id="4149614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4149620">n</span><span class="op" id="4149621">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4149627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4149632">last</span>&nbsp;<span class="op" id="4149637">=</span>&nbsp;<span class="ident" id="4149639">i</span>&nbsp;<span class="op" id="4149641">+</span>&nbsp;<span class="num" id="4149643">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4149647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4149650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4149653">if</span>&nbsp;<span class="ident" id="4149656">last</span>&nbsp;<span class="op" id="4149661">&lt;</span>&nbsp;<span class="builtinfunc" id="4149663">len</span><span class="op" id="4149666">(</span><span class="ident" id="4149667">s</span><span class="op" id="4149668">)</span>&nbsp;<span class="op" id="4149670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4149674">a</span><span class="op" id="4149675">[</span><span class="ident" id="4149676">n</span><span class="op" id="4149677">]</span>&nbsp;<span class="op" id="4149679">=</span>&nbsp;<span class="builtintype" id="4149681">string</span><span class="op" id="4149687">(</span><span class="ident" id="4149688">s</span><span class="op" id="4149689">[</span><span class="ident" id="4149690">last</span><span class="op" id="4149694">:</span><span class="op" id="4149695">]</span><span class="op" id="4149696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4149700">n</span><span class="op" id="4149701">++</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4149705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4149708">return</span>&nbsp;<span class="ident" id="4149715">a</span><span class="op" id="4149716">[</span><span class="num" id="4149717">0</span><span class="op" id="4149718">:</span><span class="ident" id="4149719">n</span><span class="op" id="4149720">]</span><br>
<span class="lineno"></span><span class="op" id="4149722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4149725">func</span>&nbsp;<span class="ident" id="4149730">getFields</span><span class="op" id="4149739">(</span><span class="ident" id="4149740">s</span>&nbsp;<span class="builtintype" id="4149742">string</span><span class="op" id="4149748">)</span>&nbsp;<span class="op" id="4149750">[</span><span class="op" id="4149751">]</span><span class="builtintype" id="4149752">string</span>&nbsp;<span class="op" id="4149759">{</span>&nbsp;<span class="keyword" id="4149761">return</span>&nbsp;<span class="ident" id="4149768">splitAtBytes</span><span class="op" id="4149780">(</span><span class="ident" id="4149781">s</span><span class="op" id="4149782">,</span>&nbsp;<span class="string" id="4149784">&#34;&nbsp;\r\t\n&#34;</span><span class="op" id="4149793">)</span>&nbsp;<span class="op" id="4149795">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="4149798">//&nbsp;Bigger&nbsp;than&nbsp;we&nbsp;need,&nbsp;not&nbsp;too&nbsp;big&nbsp;to&nbsp;worry&nbsp;about&nbsp;overflow</span><br>
<span class="lineno"></span><span class="keyword" id="4149858">const</span>&nbsp;<span class="ident" id="4149864">big</span>&nbsp;<span class="op" id="4149868">=</span>&nbsp;<span class="num" id="4149870">0xFFFFFF</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4149880">//&nbsp;Decimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno">120</span><span class="comment" id="4149922">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="4149962">func</span>&nbsp;<span class="ident" id="4149967">dtoi</span><span class="op" id="4149971">(</span><span class="ident" id="4149972">s</span>&nbsp;<span class="builtintype" id="4149974">string</span><span class="op" id="4149980">,</span>&nbsp;<span class="ident" id="4149982">i0</span>&nbsp;<span class="builtintype" id="4149985">int</span><span class="op" id="4149988">)</span>&nbsp;<span class="op" id="4149990">(</span><span class="ident" id="4149991">n</span>&nbsp;<span class="builtintype" id="4149993">int</span><span class="op" id="4149996">,</span>&nbsp;<span class="ident" id="4149998">i</span>&nbsp;<span class="builtintype" id="4150000">int</span><span class="op" id="4150003">,</span>&nbsp;<span class="ident" id="4150005">ok</span>&nbsp;<span class="builtintype" id="4150008">bool</span><span class="op" id="4150012">)</span>&nbsp;<span class="op" id="4150014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4150017">n</span>&nbsp;<span class="op" id="4150019">=</span>&nbsp;<span class="num" id="4150021">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150024">for</span>&nbsp;<span class="ident" id="4150028">i</span>&nbsp;<span class="op" id="4150030">=</span>&nbsp;<span class="ident" id="4150032">i0</span><span class="op" id="4150034">;</span>&nbsp;<span class="ident" id="4150036">i</span>&nbsp;<span class="op" id="4150038">&lt;</span>&nbsp;<span class="builtinfunc" id="4150040">len</span><span class="op" id="4150043">(</span><span class="ident" id="4150044">s</span><span class="op" id="4150045">)</span>&nbsp;<span class="op" id="4150047">&amp;&amp;</span>&nbsp;<span class="string" id="4150050">&#39;0&#39;</span>&nbsp;<span class="op" id="4150054">&lt;=</span>&nbsp;<span class="ident" id="4150057">s</span><span class="op" id="4150058">[</span><span class="ident" id="4150059">i</span><span class="op" id="4150060">]</span>&nbsp;<span class="op" id="4150062">&amp;&amp;</span>&nbsp;<span class="ident" id="4150065">s</span><span class="op" id="4150066">[</span><span class="ident" id="4150067">i</span><span class="op" id="4150068">]</span>&nbsp;<span class="op" id="4150070">&lt;=</span>&nbsp;<span class="string" id="4150073">&#39;9&#39;</span><span class="op" id="4150076">;</span>&nbsp;<span class="ident" id="4150078">i</span><span class="op" id="4150079">++</span>&nbsp;<span class="op" id="4150082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4150086">n</span>&nbsp;<span class="op" id="4150088">=</span>&nbsp;<span class="ident" id="4150090">n</span><span class="op" id="4150091">*</span><span class="num" id="4150092">10</span>&nbsp;<span class="op" id="4150095">+</span>&nbsp;<span class="builtintype" id="4150097">int</span><span class="op" id="4150100">(</span><span class="ident" id="4150101">s</span><span class="op" id="4150102">[</span><span class="ident" id="4150103">i</span><span class="op" id="4150104">]</span><span class="op" id="4150105">-</span><span class="string" id="4150106">&#39;0&#39;</span><span class="op" id="4150109">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150113">if</span>&nbsp;<span class="ident" id="4150116">n</span>&nbsp;<span class="op" id="4150118">&gt;=</span>&nbsp;<span class="ident" id="4150121">big</span>&nbsp;<span class="op" id="4150125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150130">return</span>&nbsp;<span class="num" id="4150137">0</span><span class="op" id="4150138">,</span>&nbsp;<span class="ident" id="4150140">i</span><span class="op" id="4150141">,</span>&nbsp;<span class="builtintype" id="4150143">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4150151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4150154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150157">if</span>&nbsp;<span class="ident" id="4150160">i</span>&nbsp;<span class="op" id="4150162">==</span>&nbsp;<span class="ident" id="4150165">i0</span>&nbsp;<span class="op" id="4150168">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150172">return</span>&nbsp;<span class="num" id="4150179">0</span><span class="op" id="4150180">,</span>&nbsp;<span class="ident" id="4150182">i</span><span class="op" id="4150183">,</span>&nbsp;<span class="builtintype" id="4150185">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4150192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150195">return</span>&nbsp;<span class="ident" id="4150202">n</span><span class="op" id="4150203">,</span>&nbsp;<span class="ident" id="4150205">i</span><span class="op" id="4150206">,</span>&nbsp;<span class="builtintype" id="4150208">true</span><br>
<span class="lineno"></span><span class="op" id="4150213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="4150216">//&nbsp;Hexadecimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno"></span><span class="comment" id="4150262">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="4150302">func</span>&nbsp;<span class="ident" id="4150307">xtoi</span><span class="op" id="4150311">(</span><span class="ident" id="4150312">s</span>&nbsp;<span class="builtintype" id="4150314">string</span><span class="op" id="4150320">,</span>&nbsp;<span class="ident" id="4150322">i0</span>&nbsp;<span class="builtintype" id="4150325">int</span><span class="op" id="4150328">)</span>&nbsp;<span class="op" id="4150330">(</span><span class="ident" id="4150331">n</span>&nbsp;<span class="builtintype" id="4150333">int</span><span class="op" id="4150336">,</span>&nbsp;<span class="ident" id="4150338">i</span>&nbsp;<span class="builtintype" id="4150340">int</span><span class="op" id="4150343">,</span>&nbsp;<span class="ident" id="4150345">ok</span>&nbsp;<span class="builtintype" id="4150348">bool</span><span class="op" id="4150352">)</span>&nbsp;<span class="op" id="4150354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4150357">n</span>&nbsp;<span class="op" id="4150359">=</span>&nbsp;<span class="num" id="4150361">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150364">for</span>&nbsp;<span class="ident" id="4150368">i</span>&nbsp;<span class="op" id="4150370">=</span>&nbsp;<span class="ident" id="4150372">i0</span><span class="op" id="4150374">;</span>&nbsp;<span class="ident" id="4150376">i</span>&nbsp;<span class="op" id="4150378">&lt;</span>&nbsp;<span class="builtinfunc" id="4150380">len</span><span class="op" id="4150383">(</span><span class="ident" id="4150384">s</span><span class="op" id="4150385">)</span><span class="op" id="4150386">;</span>&nbsp;<span class="ident" id="4150388">i</span><span class="op" id="4150389">++</span>&nbsp;<span class="op" id="4150392">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150396">if</span>&nbsp;<span class="string" id="4150399">&#39;0&#39;</span>&nbsp;<span class="op" id="4150403">&lt;=</span>&nbsp;<span class="ident" id="4150406">s</span><span class="op" id="4150407">[</span><span class="ident" id="4150408">i</span><span class="op" id="4150409">]</span>&nbsp;<span class="op" id="4150411">&amp;&amp;</span>&nbsp;<span class="ident" id="4150414">s</span><span class="op" id="4150415">[</span><span class="ident" id="4150416">i</span><span class="op" id="4150417">]</span>&nbsp;<span class="op" id="4150419">&lt;=</span>&nbsp;<span class="string" id="4150422">&#39;9&#39;</span>&nbsp;<span class="op" id="4150426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4150431">n</span>&nbsp;<span class="op" id="4150433">*=</span>&nbsp;<span class="num" id="4150436">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4150442">n</span>&nbsp;<span class="op" id="4150444">+=</span>&nbsp;<span class="builtintype" id="4150447">int</span><span class="op" id="4150450">(</span><span class="ident" id="4150451">s</span><span class="op" id="4150452">[</span><span class="ident" id="4150453">i</span><span class="op" id="4150454">]</span>&nbsp;<span class="op" id="4150456">-</span>&nbsp;<span class="string" id="4150458">&#39;0&#39;</span><span class="op" id="4150461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4150465">}</span>&nbsp;<span class="keyword" id="4150467">else</span>&nbsp;<span class="keyword" id="4150472">if</span>&nbsp;<span class="string" id="4150475">&#39;a&#39;</span>&nbsp;<span class="op" id="4150479">&lt;=</span>&nbsp;<span class="ident" id="4150482">s</span><span class="op" id="4150483">[</span><span class="ident" id="4150484">i</span><span class="op" id="4150485">]</span>&nbsp;<span class="op" id="4150487">&amp;&amp;</span>&nbsp;<span class="ident" id="4150490">s</span><span class="op" id="4150491">[</span><span class="ident" id="4150492">i</span><span class="op" id="4150493">]</span>&nbsp;<span class="op" id="4150495">&lt;=</span>&nbsp;<span class="string" id="4150498">&#39;f&#39;</span>&nbsp;<span class="op" id="4150502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4150507">n</span>&nbsp;<span class="op" id="4150509">*=</span>&nbsp;<span class="num" id="4150512">16</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4150518">n</span>&nbsp;<span class="op" id="4150520">+=</span>&nbsp;<span class="builtintype" id="4150523">int</span><span class="op" id="4150526">(</span><span class="ident" id="4150527">s</span><span class="op" id="4150528">[</span><span class="ident" id="4150529">i</span><span class="op" id="4150530">]</span><span class="op" id="4150531">-</span><span class="string" id="4150532">&#39;a&#39;</span><span class="op" id="4150535">)</span>&nbsp;<span class="op" id="4150537">+</span>&nbsp;<span class="num" id="4150539">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4150544">}</span>&nbsp;<span class="keyword" id="4150546">else</span>&nbsp;<span class="keyword" id="4150551">if</span>&nbsp;<span class="string" id="4150554">&#39;A&#39;</span>&nbsp;<span class="op" id="4150558">&lt;=</span>&nbsp;<span class="ident" id="4150561">s</span><span class="op" id="4150562">[</span><span class="ident" id="4150563">i</span><span class="op" id="4150564">]</span>&nbsp;<span class="op" id="4150566">&amp;&amp;</span>&nbsp;<span class="ident" id="4150569">s</span><span class="op" id="4150570">[</span><span class="ident" id="4150571">i</span><span class="op" id="4150572">]</span>&nbsp;<span class="op" id="4150574">&lt;=</span>&nbsp;<span class="string" id="4150577">&#39;F&#39;</span>&nbsp;<span class="op" id="4150581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4150586">n</span>&nbsp;<span class="op" id="4150588">*=</span>&nbsp;<span class="num" id="4150591">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4150597">n</span>&nbsp;<span class="op" id="4150599">+=</span>&nbsp;<span class="builtintype" id="4150602">int</span><span class="op" id="4150605">(</span><span class="ident" id="4150606">s</span><span class="op" id="4150607">[</span><span class="ident" id="4150608">i</span><span class="op" id="4150609">]</span><span class="op" id="4150610">-</span><span class="string" id="4150611">&#39;A&#39;</span><span class="op" id="4150614">)</span>&nbsp;<span class="op" id="4150616">+</span>&nbsp;<span class="num" id="4150618">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4150623">}</span>&nbsp;<span class="keyword" id="4150625">else</span>&nbsp;<span class="op" id="4150630">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150635">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4150643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150647">if</span>&nbsp;<span class="ident" id="4150650">n</span>&nbsp;<span class="op" id="4150652">&gt;=</span>&nbsp;<span class="ident" id="4150655">big</span>&nbsp;<span class="op" id="4150659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150664">return</span>&nbsp;<span class="num" id="4150671">0</span><span class="op" id="4150672">,</span>&nbsp;<span class="ident" id="4150674">i</span><span class="op" id="4150675">,</span>&nbsp;<span class="builtintype" id="4150677">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4150685">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4150688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150691">if</span>&nbsp;<span class="ident" id="4150694">i</span>&nbsp;<span class="op" id="4150696">==</span>&nbsp;<span class="ident" id="4150699">i0</span>&nbsp;<span class="op" id="4150702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150706">return</span>&nbsp;<span class="num" id="4150713">0</span><span class="op" id="4150714">,</span>&nbsp;<span class="ident" id="4150716">i</span><span class="op" id="4150717">,</span>&nbsp;<span class="builtintype" id="4150719">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4150726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4150729">return</span>&nbsp;<span class="ident" id="4150736">n</span><span class="op" id="4150737">,</span>&nbsp;<span class="ident" id="4150739">i</span><span class="op" id="4150740">,</span>&nbsp;<span class="builtintype" id="4150742">true</span><br>
<span class="lineno">160</span><span class="op" id="4150747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4150750">//&nbsp;xtoi2&nbsp;converts&nbsp;the&nbsp;next&nbsp;two&nbsp;hex&nbsp;digits&nbsp;of&nbsp;s&nbsp;into&nbsp;a&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="4150810">//&nbsp;If&nbsp;s&nbsp;is&nbsp;longer&nbsp;than&nbsp;2&nbsp;bytes&nbsp;then&nbsp;the&nbsp;third&nbsp;byte&nbsp;must&nbsp;be&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4150872">//&nbsp;If&nbsp;the&nbsp;first&nbsp;two&nbsp;bytes&nbsp;of&nbsp;s&nbsp;are&nbsp;not&nbsp;hex&nbsp;digits&nbsp;or&nbsp;the&nbsp;third&nbsp;byte</span><br>
<span class="lineno">165</span><span class="comment" id="4150940">//&nbsp;does&nbsp;not&nbsp;match&nbsp;e,&nbsp;false&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span><span class="keyword" id="4150980">func</span>&nbsp;<span class="ident" id="4150985">xtoi2</span><span class="op" id="4150990">(</span><span class="ident" id="4150991">s</span>&nbsp;<span class="builtintype" id="4150993">string</span><span class="op" id="4150999">,</span>&nbsp;<span class="ident" id="4151001">e</span>&nbsp;<span class="builtintype" id="4151003">byte</span><span class="op" id="4151007">)</span>&nbsp;<span class="op" id="4151009">(</span><span class="builtintype" id="4151010">byte</span><span class="op" id="4151014">,</span>&nbsp;<span class="builtintype" id="4151016">bool</span><span class="op" id="4151020">)</span>&nbsp;<span class="op" id="4151022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151025">if</span>&nbsp;<span class="builtinfunc" id="4151028">len</span><span class="op" id="4151031">(</span><span class="ident" id="4151032">s</span><span class="op" id="4151033">)</span>&nbsp;<span class="op" id="4151035">&gt;</span>&nbsp;<span class="num" id="4151037">2</span>&nbsp;<span class="op" id="4151039">&amp;&amp;</span>&nbsp;<span class="ident" id="4151042">s</span><span class="op" id="4151043">[</span><span class="num" id="4151044">2</span><span class="op" id="4151045">]</span>&nbsp;<span class="op" id="4151047">!=</span>&nbsp;<span class="ident" id="4151050">e</span>&nbsp;<span class="op" id="4151052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151056">return</span>&nbsp;<span class="num" id="4151063">0</span><span class="op" id="4151064">,</span>&nbsp;<span class="builtintype" id="4151066">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4151073">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151076">n</span><span class="op" id="4151077">,</span>&nbsp;<span class="ident" id="4151079">ei</span><span class="op" id="4151081">,</span>&nbsp;<span class="ident" id="4151083">ok</span>&nbsp;<span class="op" id="4151086">:=</span>&nbsp;<span class="ident" id="4151089">xtoi</span><span class="op" id="4151093">(</span><span class="ident" id="4151094">s</span><span class="op" id="4151095">[</span><span class="op" id="4151096">:</span><span class="num" id="4151097">2</span><span class="op" id="4151098">]</span><span class="op" id="4151099">,</span>&nbsp;<span class="num" id="4151101">0</span><span class="op" id="4151102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151105">return</span>&nbsp;<span class="builtintype" id="4151112">byte</span><span class="op" id="4151116">(</span><span class="ident" id="4151117">n</span><span class="op" id="4151118">)</span><span class="op" id="4151119">,</span>&nbsp;<span class="ident" id="4151121">ok</span>&nbsp;<span class="op" id="4151124">&amp;&amp;</span>&nbsp;<span class="ident" id="4151127">ei</span>&nbsp;<span class="op" id="4151130">==</span>&nbsp;<span class="num" id="4151133">2</span><br>
<span class="lineno"></span><span class="op" id="4151135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4151138">//&nbsp;Integer&nbsp;to&nbsp;decimal.</span><br>
<span class="lineno">175</span><span class="keyword" id="4151161">func</span>&nbsp;<span class="ident" id="4151166">itoa</span><span class="op" id="4151170">(</span><span class="ident" id="4151171">i</span>&nbsp;<span class="builtintype" id="4151173">int</span><span class="op" id="4151176">)</span>&nbsp;<span class="builtintype" id="4151178">string</span>&nbsp;<span class="op" id="4151185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151188">var</span>&nbsp;<span class="ident" id="4151192">buf</span>&nbsp;<span class="op" id="4151196">[</span><span class="num" id="4151197">30</span><span class="op" id="4151199">]</span><span class="builtintype" id="4151200">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151206">n</span>&nbsp;<span class="op" id="4151208">:=</span>&nbsp;<span class="builtinfunc" id="4151211">len</span><span class="op" id="4151214">(</span><span class="ident" id="4151215">buf</span><span class="op" id="4151218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151221">neg</span>&nbsp;<span class="op" id="4151225">:=</span>&nbsp;<span class="builtintype" id="4151228">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151235">if</span>&nbsp;<span class="ident" id="4151238">i</span>&nbsp;<span class="op" id="4151240">&lt;</span>&nbsp;<span class="num" id="4151242">0</span>&nbsp;<span class="op" id="4151244">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151248">i</span>&nbsp;<span class="op" id="4151250">=</span>&nbsp;<span class="op" id="4151252">-</span><span class="ident" id="4151253">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151257">neg</span>&nbsp;<span class="op" id="4151261">=</span>&nbsp;<span class="builtintype" id="4151263">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4151269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151272">ui</span>&nbsp;<span class="op" id="4151275">:=</span>&nbsp;<span class="builtintype" id="4151278">uint</span><span class="op" id="4151282">(</span><span class="ident" id="4151283">i</span><span class="op" id="4151284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151287">for</span>&nbsp;<span class="ident" id="4151291">ui</span>&nbsp;<span class="op" id="4151294">&gt;</span>&nbsp;<span class="num" id="4151296">0</span>&nbsp;<span class="op" id="4151298">||</span>&nbsp;<span class="ident" id="4151301">n</span>&nbsp;<span class="op" id="4151303">==</span>&nbsp;<span class="builtinfunc" id="4151306">len</span><span class="op" id="4151309">(</span><span class="ident" id="4151310">buf</span><span class="op" id="4151313">)</span>&nbsp;<span class="op" id="4151315">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151319">n</span><span class="op" id="4151320">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151325">buf</span><span class="op" id="4151328">[</span><span class="ident" id="4151329">n</span><span class="op" id="4151330">]</span>&nbsp;<span class="op" id="4151332">=</span>&nbsp;<span class="builtintype" id="4151334">byte</span><span class="op" id="4151338">(</span><span class="string" id="4151339">&#39;0&#39;</span>&nbsp;<span class="op" id="4151343">+</span>&nbsp;<span class="ident" id="4151345">ui</span><span class="op" id="4151347">%</span><span class="num" id="4151348">10</span><span class="op" id="4151350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151354">ui</span>&nbsp;<span class="op" id="4151357">/=</span>&nbsp;<span class="num" id="4151360">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4151364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151367">if</span>&nbsp;<span class="ident" id="4151370">neg</span>&nbsp;<span class="op" id="4151374">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151378">n</span><span class="op" id="4151379">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151384">buf</span><span class="op" id="4151387">[</span><span class="ident" id="4151388">n</span><span class="op" id="4151389">]</span>&nbsp;<span class="op" id="4151391">=</span>&nbsp;<span class="string" id="4151393">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4151398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151401">return</span>&nbsp;<span class="builtintype" id="4151408">string</span><span class="op" id="4151414">(</span><span class="ident" id="4151415">buf</span><span class="op" id="4151418">[</span><span class="ident" id="4151419">n</span><span class="op" id="4151420">:</span><span class="op" id="4151421">]</span><span class="op" id="4151422">)</span><br>
<span class="lineno"></span><span class="op" id="4151424">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="4151427">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4151459">func</span>&nbsp;<span class="ident" id="4151464">itod</span><span class="op" id="4151468">(</span><span class="ident" id="4151469">i</span>&nbsp;<span class="builtintype" id="4151471">uint</span><span class="op" id="4151475">)</span>&nbsp;<span class="builtintype" id="4151477">string</span>&nbsp;<span class="op" id="4151484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151487">if</span>&nbsp;<span class="ident" id="4151490">i</span>&nbsp;<span class="op" id="4151492">==</span>&nbsp;<span class="num" id="4151495">0</span>&nbsp;<span class="op" id="4151497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151501">return</span>&nbsp;<span class="string" id="4151508">&#34;0&#34;</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4151513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4151517">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151556">var</span>&nbsp;<span class="ident" id="4151560">b</span>&nbsp;<span class="op" id="4151562">[</span><span class="num" id="4151563">32</span><span class="op" id="4151565">]</span><span class="builtintype" id="4151566">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151572">bp</span>&nbsp;<span class="op" id="4151575">:=</span>&nbsp;<span class="builtinfunc" id="4151578">len</span><span class="op" id="4151581">(</span><span class="ident" id="4151582">b</span><span class="op" id="4151583">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151586">for</span>&nbsp;<span class="op" id="4151590">;</span>&nbsp;<span class="ident" id="4151592">i</span>&nbsp;<span class="op" id="4151594">&gt;</span>&nbsp;<span class="num" id="4151596">0</span><span class="op" id="4151597">;</span>&nbsp;<span class="ident" id="4151599">i</span>&nbsp;<span class="op" id="4151601">/=</span>&nbsp;<span class="num" id="4151604">10</span>&nbsp;<span class="op" id="4151607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151611">bp</span><span class="op" id="4151613">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151618">b</span><span class="op" id="4151619">[</span><span class="ident" id="4151620">bp</span><span class="op" id="4151622">]</span>&nbsp;<span class="op" id="4151624">=</span>&nbsp;<span class="builtintype" id="4151626">byte</span><span class="op" id="4151630">(</span><span class="ident" id="4151631">i</span><span class="op" id="4151632">%</span><span class="num" id="4151633">10</span><span class="op" id="4151635">)</span>&nbsp;<span class="op" id="4151637">+</span>&nbsp;<span class="string" id="4151639">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4151644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151648">return</span>&nbsp;<span class="builtintype" id="4151655">string</span><span class="op" id="4151661">(</span><span class="ident" id="4151662">b</span><span class="op" id="4151663">[</span><span class="ident" id="4151664">bp</span><span class="op" id="4151666">:</span><span class="op" id="4151667">]</span><span class="op" id="4151668">)</span><br>
<span class="lineno"></span><span class="op" id="4151670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4151673">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;a&nbsp;hexadecimal&nbsp;string.&nbsp;Leading&nbsp;zeros&nbsp;are&nbsp;not&nbsp;printed.</span><br>
<span class="lineno"></span><span class="keyword" id="4151742">func</span>&nbsp;<span class="ident" id="4151747">appendHex</span><span class="op" id="4151756">(</span><span class="ident" id="4151757">dst</span>&nbsp;<span class="op" id="4151761">[</span><span class="op" id="4151762">]</span><span class="builtintype" id="4151763">byte</span><span class="op" id="4151767">,</span>&nbsp;<span class="ident" id="4151769">i</span>&nbsp;<span class="builtintype" id="4151771">uint32</span><span class="op" id="4151777">)</span>&nbsp;<span class="op" id="4151779">[</span><span class="op" id="4151780">]</span><span class="builtintype" id="4151781">byte</span>&nbsp;<span class="op" id="4151786">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151789">if</span>&nbsp;<span class="ident" id="4151792">i</span>&nbsp;<span class="op" id="4151794">==</span>&nbsp;<span class="num" id="4151797">0</span>&nbsp;<span class="op" id="4151799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151803">return</span>&nbsp;<span class="builtinfunc" id="4151810">append</span><span class="op" id="4151816">(</span><span class="ident" id="4151817">dst</span><span class="op" id="4151820">,</span>&nbsp;<span class="string" id="4151822">&#39;0&#39;</span><span class="op" id="4151825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4151828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151831">for</span>&nbsp;<span class="ident" id="4151835">j</span>&nbsp;<span class="op" id="4151837">:=</span>&nbsp;<span class="num" id="4151840">7</span><span class="op" id="4151841">;</span>&nbsp;<span class="ident" id="4151843">j</span>&nbsp;<span class="op" id="4151845">&gt;=</span>&nbsp;<span class="num" id="4151848">0</span><span class="op" id="4151849">;</span>&nbsp;<span class="ident" id="4151851">j</span><span class="op" id="4151852">--</span>&nbsp;<span class="op" id="4151855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151859">v</span>&nbsp;<span class="op" id="4151861">:=</span>&nbsp;<span class="ident" id="4151864">i</span>&nbsp;<span class="op" id="4151866">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4151869">uint</span><span class="op" id="4151873">(</span><span class="ident" id="4151874">j</span><span class="op" id="4151875">*</span><span class="num" id="4151876">4</span><span class="op" id="4151877">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151881">if</span>&nbsp;<span class="ident" id="4151884">v</span>&nbsp;<span class="op" id="4151886">&gt;</span>&nbsp;<span class="num" id="4151888">0</span>&nbsp;<span class="op" id="4151890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4151895">dst</span>&nbsp;<span class="op" id="4151899">=</span>&nbsp;<span class="builtinfunc" id="4151901">append</span><span class="op" id="4151907">(</span><span class="ident" id="4151908">dst</span><span class="op" id="4151911">,</span>&nbsp;<span class="ident" id="4151913">hexDigit</span><span class="op" id="4151921">[</span><span class="ident" id="4151922">v</span><span class="op" id="4151923">&amp;</span><span class="num" id="4151924">0xf</span><span class="op" id="4151927">]</span><span class="op" id="4151928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4151932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4151935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4151938">return</span>&nbsp;<span class="ident" id="4151945">dst</span><br>
<span class="lineno">225</span><span class="op" id="4151949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4151952">//&nbsp;Number&nbsp;of&nbsp;occurrences&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4151988">func</span>&nbsp;<span class="ident" id="4151993">count</span><span class="op" id="4151998">(</span><span class="ident" id="4151999">s</span>&nbsp;<span class="builtintype" id="4152001">string</span><span class="op" id="4152007">,</span>&nbsp;<span class="ident" id="4152009">b</span>&nbsp;<span class="builtintype" id="4152011">byte</span><span class="op" id="4152015">)</span>&nbsp;<span class="builtintype" id="4152017">int</span>&nbsp;<span class="op" id="4152021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4152024">n</span>&nbsp;<span class="op" id="4152026">:=</span>&nbsp;<span class="num" id="4152029">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4152032">for</span>&nbsp;<span class="ident" id="4152036">i</span>&nbsp;<span class="op" id="4152038">:=</span>&nbsp;<span class="num" id="4152041">0</span><span class="op" id="4152042">;</span>&nbsp;<span class="ident" id="4152044">i</span>&nbsp;<span class="op" id="4152046">&lt;</span>&nbsp;<span class="builtinfunc" id="4152048">len</span><span class="op" id="4152051">(</span><span class="ident" id="4152052">s</span><span class="op" id="4152053">)</span><span class="op" id="4152054">;</span>&nbsp;<span class="ident" id="4152056">i</span><span class="op" id="4152057">++</span>&nbsp;<span class="op" id="4152060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4152064">if</span>&nbsp;<span class="ident" id="4152067">s</span><span class="op" id="4152068">[</span><span class="ident" id="4152069">i</span><span class="op" id="4152070">]</span>&nbsp;<span class="op" id="4152072">==</span>&nbsp;<span class="ident" id="4152075">b</span>&nbsp;<span class="op" id="4152077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4152082">n</span><span class="op" id="4152083">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4152088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4152091">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4152094">return</span>&nbsp;<span class="ident" id="4152101">n</span><br>
<span class="lineno"></span><span class="op" id="4152103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4152106">//&nbsp;Index&nbsp;of&nbsp;rightmost&nbsp;occurrence&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4152150">func</span>&nbsp;<span class="ident" id="4152155">last</span><span class="op" id="4152159">(</span><span class="ident" id="4152160">s</span>&nbsp;<span class="builtintype" id="4152162">string</span><span class="op" id="4152168">,</span>&nbsp;<span class="ident" id="4152170">b</span>&nbsp;<span class="builtintype" id="4152172">byte</span><span class="op" id="4152176">)</span>&nbsp;<span class="builtintype" id="4152178">int</span>&nbsp;<span class="op" id="4152182">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4152185">i</span>&nbsp;<span class="op" id="4152187">:=</span>&nbsp;<span class="builtinfunc" id="4152190">len</span><span class="op" id="4152193">(</span><span class="ident" id="4152194">s</span><span class="op" id="4152195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4152198">for</span>&nbsp;<span class="ident" id="4152202">i</span><span class="op" id="4152203">--</span><span class="op" id="4152205">;</span>&nbsp;<span class="ident" id="4152207">i</span>&nbsp;<span class="op" id="4152209">&gt;=</span>&nbsp;<span class="num" id="4152212">0</span><span class="op" id="4152213">;</span>&nbsp;<span class="ident" id="4152215">i</span><span class="op" id="4152216">--</span>&nbsp;<span class="op" id="4152219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4152223">if</span>&nbsp;<span class="ident" id="4152226">s</span><span class="op" id="4152227">[</span><span class="ident" id="4152228">i</span><span class="op" id="4152229">]</span>&nbsp;<span class="op" id="4152231">==</span>&nbsp;<span class="ident" id="4152234">b</span>&nbsp;<span class="op" id="4152236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4152241">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4152249">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4152252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4152255">return</span>&nbsp;<span class="ident" id="4152262">i</span><br>
<span class="lineno"></span><span class="op" id="4152264">}</span>
</div>
</body>
</html>
