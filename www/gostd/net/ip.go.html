<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html" class="current">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3285330">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3285385">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3285439">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3285490">//&nbsp;IP&nbsp;address&nbsp;manipulations</span><br>
<span class="lineno"></span><span class="comment" id="3285518">//</span><br>
<span class="lineno"></span><span class="comment" id="3285521">//&nbsp;IPv4&nbsp;addresses&nbsp;are&nbsp;4&nbsp;bytes;&nbsp;IPv6&nbsp;addresses&nbsp;are&nbsp;16&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="3285581">//&nbsp;An&nbsp;IPv4&nbsp;address&nbsp;can&nbsp;be&nbsp;converted&nbsp;to&nbsp;an&nbsp;IPv6&nbsp;address&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3285639">//&nbsp;adding&nbsp;a&nbsp;canonical&nbsp;prefix&nbsp;(10&nbsp;zeros,&nbsp;2&nbsp;0xFFs).</span><br>
<span class="lineno">10</span><span class="comment" id="3285689">//&nbsp;This&nbsp;library&nbsp;accepts&nbsp;either&nbsp;size&nbsp;of&nbsp;byte&nbsp;slice&nbsp;but&nbsp;always</span><br>
<span class="lineno"></span><span class="comment" id="3285750">//&nbsp;returns&nbsp;16-byte&nbsp;addresses.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3285781">package</span>&nbsp;<span class="ident" id="3285789">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3285794">import</span>&nbsp;<span class="string" id="3285801">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3285811">//&nbsp;IP&nbsp;address&nbsp;lengths&nbsp;(bytes).</span><br>
<span class="lineno"></span><span class="keyword" id="3285842">const</span>&nbsp;<span class="op" id="3285848">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3285851">IPv4len</span>&nbsp;<span class="op" id="3285859">=</span>&nbsp;<span class="num" id="3285861">4</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3285864">IPv6len</span>&nbsp;<span class="op" id="3285872">=</span>&nbsp;<span class="num" id="3285874">16</span><br>
<span class="lineno"></span><span class="op" id="3285877">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3285880">//&nbsp;An&nbsp;IP&nbsp;is&nbsp;a&nbsp;single&nbsp;IP&nbsp;address,&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="3285931">//&nbsp;Functions&nbsp;in&nbsp;this&nbsp;package&nbsp;accept&nbsp;either&nbsp;4-byte&nbsp;(IPv4)</span><br>
<span class="lineno">25</span><span class="comment" id="3285988">//&nbsp;or&nbsp;16-byte&nbsp;(IPv6)&nbsp;slices&nbsp;as&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="3286026">//</span><br>
<span class="lineno"></span><span class="comment" id="3286029">//&nbsp;Note&nbsp;that&nbsp;in&nbsp;this&nbsp;documentation,&nbsp;referring&nbsp;to&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="3286081">//&nbsp;IP&nbsp;address&nbsp;as&nbsp;an&nbsp;IPv4&nbsp;address&nbsp;or&nbsp;an&nbsp;IPv6&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="3286133">//&nbsp;is&nbsp;a&nbsp;semantic&nbsp;property&nbsp;of&nbsp;the&nbsp;address,&nbsp;not&nbsp;just&nbsp;the</span><br>
<span class="lineno">30</span><span class="comment" id="3286188">//&nbsp;length&nbsp;of&nbsp;the&nbsp;byte&nbsp;slice:&nbsp;a&nbsp;16-byte&nbsp;slice&nbsp;can&nbsp;still</span><br>
<span class="lineno"></span><span class="comment" id="3286243">//&nbsp;be&nbsp;an&nbsp;IPv4&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3286266">type</span>&nbsp;<span class="ident" id="3286271">IP</span>&nbsp;<span class="op" id="3286274">[</span><span class="op" id="3286275">]</span><span class="builtintype" id="3286276">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3286282">//&nbsp;An&nbsp;IP&nbsp;mask&nbsp;is&nbsp;an&nbsp;IP&nbsp;address.</span><br>
<span class="lineno">35</span><span class="keyword" id="3286314">type</span>&nbsp;<span class="ident" id="3286319">IPMask</span>&nbsp;<span class="op" id="3286326">[</span><span class="op" id="3286327">]</span><span class="builtintype" id="3286328">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3286334">//&nbsp;An&nbsp;IPNet&nbsp;represents&nbsp;an&nbsp;IP&nbsp;network.</span><br>
<span class="lineno"></span><span class="keyword" id="3286372">type</span>&nbsp;<span class="ident" id="3286377">IPNet</span>&nbsp;<span class="keyword" id="3286383">struct</span>&nbsp;<span class="op" id="3286390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286393">IP</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3286398"><a href="/gostd/net/ip.go.html#3286271">IP</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3286405">//&nbsp;network&nbsp;number</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286424">Mask</span>&nbsp;<span class="ident" id="3286429"><a href="/gostd/net/ip.go.html#3286319">IPMask</a></span>&nbsp;<span class="comment" id="3286436">//&nbsp;network&nbsp;mask</span><br>
<span class="lineno"></span><span class="op" id="3286452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3286455">//&nbsp;IPv4&nbsp;returns&nbsp;the&nbsp;IP&nbsp;address&nbsp;(in&nbsp;16-byte&nbsp;form)&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3286511">//&nbsp;IPv4&nbsp;address&nbsp;a.b.c.d.</span><br>
<span class="lineno">45</span><span class="keyword" id="3286536">func</span>&nbsp;<span class="ident" id="3286541">IPv4</span><span class="op" id="3286545">(</span><span class="ident" id="3286546">a</span><span class="op" id="3286547">,</span>&nbsp;<span class="ident" id="3286549">b</span><span class="op" id="3286550">,</span>&nbsp;<span class="ident" id="3286552">c</span><span class="op" id="3286553">,</span>&nbsp;<span class="ident" id="3286555">d</span>&nbsp;<span class="builtintype" id="3286557">byte</span><span class="op" id="3286561">)</span>&nbsp;<span class="ident" id="3286563"><a href="/gostd/net/ip.go.html#3286271">IP</a></span>&nbsp;<span class="op" id="3286566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286569">p</span>&nbsp;<span class="op" id="3286571">:=</span>&nbsp;<span class="builtinfunc" id="3286574">make</span><span class="op" id="3286578">(</span><span class="ident" id="3286579"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3286581">,</span>&nbsp;<span class="ident" id="3286583"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span><span class="op" id="3286590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3286593">copy</span><span class="op" id="3286597">(</span><span class="ident" id="3286598"><a href="/gostd/net/ip.go.html#3286569">p</a></span><span class="op" id="3286599">,</span>&nbsp;<span class="ident" id="3286601"><a href="/gostd/net/ip.go.html#3286676">v4InV6Prefix</a></span><span class="op" id="3286613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286616"><a href="/gostd/net/ip.go.html#3286569">p</a></span><span class="op" id="3286617">[</span><span class="num" id="3286618">12</span><span class="op" id="3286620">]</span>&nbsp;<span class="op" id="3286622">=</span>&nbsp;<span class="ident" id="3286624"><a href="/gostd/net/ip.go.html#3286546">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286627"><a href="/gostd/net/ip.go.html#3286569">p</a></span><span class="op" id="3286628">[</span><span class="num" id="3286629">13</span><span class="op" id="3286631">]</span>&nbsp;<span class="op" id="3286633">=</span>&nbsp;<span class="ident" id="3286635"><a href="/gostd/net/ip.go.html#3286549">b</a></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286638"><a href="/gostd/net/ip.go.html#3286569">p</a></span><span class="op" id="3286639">[</span><span class="num" id="3286640">14</span><span class="op" id="3286642">]</span>&nbsp;<span class="op" id="3286644">=</span>&nbsp;<span class="ident" id="3286646"><a href="/gostd/net/ip.go.html#3286552">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286649"><a href="/gostd/net/ip.go.html#3286569">p</a></span><span class="op" id="3286650">[</span><span class="num" id="3286651">15</span><span class="op" id="3286653">]</span>&nbsp;<span class="op" id="3286655">=</span>&nbsp;<span class="ident" id="3286657"><a href="/gostd/net/ip.go.html#3286555">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286660">return</span>&nbsp;<span class="ident" id="3286667"><a href="/gostd/net/ip.go.html#3286569">p</a></span><br>
<span class="lineno"></span><span class="op" id="3286669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="3286672">var</span>&nbsp;<span class="ident" id="3286676">v4InV6Prefix</span>&nbsp;<span class="op" id="3286689">=</span>&nbsp;<span class="op" id="3286691">[</span><span class="op" id="3286692">]</span><span class="builtintype" id="3286693">byte</span><span class="op" id="3286697">{</span><span class="num" id="3286698">0</span><span class="op" id="3286699">,</span>&nbsp;<span class="num" id="3286701">0</span><span class="op" id="3286702">,</span>&nbsp;<span class="num" id="3286704">0</span><span class="op" id="3286705">,</span>&nbsp;<span class="num" id="3286707">0</span><span class="op" id="3286708">,</span>&nbsp;<span class="num" id="3286710">0</span><span class="op" id="3286711">,</span>&nbsp;<span class="num" id="3286713">0</span><span class="op" id="3286714">,</span>&nbsp;<span class="num" id="3286716">0</span><span class="op" id="3286717">,</span>&nbsp;<span class="num" id="3286719">0</span><span class="op" id="3286720">,</span>&nbsp;<span class="num" id="3286722">0</span><span class="op" id="3286723">,</span>&nbsp;<span class="num" id="3286725">0</span><span class="op" id="3286726">,</span>&nbsp;<span class="num" id="3286728">0xff</span><span class="op" id="3286732">,</span>&nbsp;<span class="num" id="3286734">0xff</span><span class="op" id="3286738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3286741">//&nbsp;IPv4Mask&nbsp;returns&nbsp;the&nbsp;IP&nbsp;mask&nbsp;(in&nbsp;4-byte&nbsp;form)&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3286797">//&nbsp;IPv4&nbsp;mask&nbsp;a.b.c.d.</span><br>
<span class="lineno"></span><span class="keyword" id="3286819">func</span>&nbsp;<span class="ident" id="3286824">IPv4Mask</span><span class="op" id="3286832">(</span><span class="ident" id="3286833">a</span><span class="op" id="3286834">,</span>&nbsp;<span class="ident" id="3286836">b</span><span class="op" id="3286837">,</span>&nbsp;<span class="ident" id="3286839">c</span><span class="op" id="3286840">,</span>&nbsp;<span class="ident" id="3286842">d</span>&nbsp;<span class="builtintype" id="3286844">byte</span><span class="op" id="3286848">)</span>&nbsp;<span class="ident" id="3286850"><a href="/gostd/net/ip.go.html#3286319">IPMask</a></span>&nbsp;<span class="op" id="3286857">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286860">p</span>&nbsp;<span class="op" id="3286862">:=</span>&nbsp;<span class="builtinfunc" id="3286865">make</span><span class="op" id="3286869">(</span><span class="ident" id="3286870"><a href="/gostd/net/ip.go.html#3286319">IPMask</a></span><span class="op" id="3286876">,</span>&nbsp;<span class="ident" id="3286878"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span><span class="op" id="3286885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286888"><a href="/gostd/net/ip.go.html#3286860">p</a></span><span class="op" id="3286889">[</span><span class="num" id="3286890">0</span><span class="op" id="3286891">]</span>&nbsp;<span class="op" id="3286893">=</span>&nbsp;<span class="ident" id="3286895"><a href="/gostd/net/ip.go.html#3286833">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286898"><a href="/gostd/net/ip.go.html#3286860">p</a></span><span class="op" id="3286899">[</span><span class="num" id="3286900">1</span><span class="op" id="3286901">]</span>&nbsp;<span class="op" id="3286903">=</span>&nbsp;<span class="ident" id="3286905"><a href="/gostd/net/ip.go.html#3286836">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286908"><a href="/gostd/net/ip.go.html#3286860">p</a></span><span class="op" id="3286909">[</span><span class="num" id="3286910">2</span><span class="op" id="3286911">]</span>&nbsp;<span class="op" id="3286913">=</span>&nbsp;<span class="ident" id="3286915"><a href="/gostd/net/ip.go.html#3286839">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3286918"><a href="/gostd/net/ip.go.html#3286860">p</a></span><span class="op" id="3286919">[</span><span class="num" id="3286920">3</span><span class="op" id="3286921">]</span>&nbsp;<span class="op" id="3286923">=</span>&nbsp;<span class="ident" id="3286925"><a href="/gostd/net/ip.go.html#3286842">d</a></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3286928">return</span>&nbsp;<span class="ident" id="3286935"><a href="/gostd/net/ip.go.html#3286860">p</a></span><br>
<span class="lineno"></span><span class="op" id="3286937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3286940">//&nbsp;CIDRMask&nbsp;returns&nbsp;an&nbsp;IPMask&nbsp;consisting&nbsp;of&nbsp;`ones&#39;&nbsp;1&nbsp;bits</span><br>
<span class="lineno"></span><span class="comment" id="3286998">//&nbsp;followed&nbsp;by&nbsp;0s&nbsp;up&nbsp;to&nbsp;a&nbsp;total&nbsp;length&nbsp;of&nbsp;`bits&#39;&nbsp;bits.</span><br>
<span class="lineno">70</span><span class="comment" id="3287053">//&nbsp;For&nbsp;a&nbsp;mask&nbsp;of&nbsp;this&nbsp;form,&nbsp;CIDRMask&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;IPMask.Size.</span><br>
<span class="lineno"></span><span class="keyword" id="3287121">func</span>&nbsp;<span class="ident" id="3287126">CIDRMask</span><span class="op" id="3287134">(</span><span class="ident" id="3287135">ones</span><span class="op" id="3287139">,</span>&nbsp;<span class="ident" id="3287141">bits</span>&nbsp;<span class="builtintype" id="3287146">int</span><span class="op" id="3287149">)</span>&nbsp;<span class="ident" id="3287151"><a href="/gostd/net/ip.go.html#3286319">IPMask</a></span>&nbsp;<span class="op" id="3287158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287161">if</span>&nbsp;<span class="ident" id="3287164"><a href="/gostd/net/ip.go.html#3287141">bits</a></span>&nbsp;<span class="op" id="3287169">!=</span>&nbsp;<span class="num" id="3287172">8</span><span class="op" id="3287173">*</span><span class="ident" id="3287174"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3287182">&amp;&amp;</span>&nbsp;<span class="ident" id="3287185"><a href="/gostd/net/ip.go.html#3287141">bits</a></span>&nbsp;<span class="op" id="3287190">!=</span>&nbsp;<span class="num" id="3287193">8</span><span class="op" id="3287194">*</span><span class="ident" id="3287195"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3287203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287207">return</span>&nbsp;<span class="builtintype" id="3287214">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287219">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287222">if</span>&nbsp;<span class="ident" id="3287225"><a href="/gostd/net/ip.go.html#3287135">ones</a></span>&nbsp;<span class="op" id="3287230">&lt;</span>&nbsp;<span class="num" id="3287232">0</span>&nbsp;<span class="op" id="3287234">||</span>&nbsp;<span class="ident" id="3287237"><a href="/gostd/net/ip.go.html#3287135">ones</a></span>&nbsp;<span class="op" id="3287242">&gt;</span>&nbsp;<span class="ident" id="3287244"><a href="/gostd/net/ip.go.html#3287141">bits</a></span>&nbsp;<span class="op" id="3287249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287253">return</span>&nbsp;<span class="builtintype" id="3287260">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287268">l</span>&nbsp;<span class="op" id="3287270">:=</span>&nbsp;<span class="ident" id="3287273"><a href="/gostd/net/ip.go.html#3287141">bits</a></span>&nbsp;<span class="op" id="3287278">/</span>&nbsp;<span class="num" id="3287280">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287283">m</span>&nbsp;<span class="op" id="3287285">:=</span>&nbsp;<span class="builtinfunc" id="3287288">make</span><span class="op" id="3287292">(</span><span class="ident" id="3287293"><a href="/gostd/net/ip.go.html#3286319">IPMask</a></span><span class="op" id="3287299">,</span>&nbsp;<span class="ident" id="3287301"><a href="/gostd/net/ip.go.html#3287268">l</a></span><span class="op" id="3287302">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287305">n</span>&nbsp;<span class="op" id="3287307">:=</span>&nbsp;<span class="builtintype" id="3287310">uint</span><span class="op" id="3287314">(</span><span class="ident" id="3287315"><a href="/gostd/net/ip.go.html#3287135">ones</a></span><span class="op" id="3287319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287322">for</span>&nbsp;<span class="ident" id="3287326">i</span>&nbsp;<span class="op" id="3287328">:=</span>&nbsp;<span class="num" id="3287331">0</span><span class="op" id="3287332">;</span>&nbsp;<span class="ident" id="3287334"><a href="/gostd/net/ip.go.html#3287326">i</a></span>&nbsp;<span class="op" id="3287336">&lt;</span>&nbsp;<span class="ident" id="3287338"><a href="/gostd/net/ip.go.html#3287268">l</a></span><span class="op" id="3287339">;</span>&nbsp;<span class="ident" id="3287341"><a href="/gostd/net/ip.go.html#3287326">i</a></span><span class="op" id="3287342">++</span>&nbsp;<span class="op" id="3287345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287349">if</span>&nbsp;<span class="ident" id="3287352"><a href="/gostd/net/ip.go.html#3287305">n</a></span>&nbsp;<span class="op" id="3287354">&gt;=</span>&nbsp;<span class="num" id="3287357">8</span>&nbsp;<span class="op" id="3287359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287364"><a href="/gostd/net/ip.go.html#3287283">m</a></span><span class="op" id="3287365">[</span><span class="ident" id="3287366"><a href="/gostd/net/ip.go.html#3287326">i</a></span><span class="op" id="3287367">]</span>&nbsp;<span class="op" id="3287369">=</span>&nbsp;<span class="num" id="3287371">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287379"><a href="/gostd/net/ip.go.html#3287305">n</a></span>&nbsp;<span class="op" id="3287381">-=</span>&nbsp;<span class="num" id="3287384">8</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287389">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287404"><a href="/gostd/net/ip.go.html#3287283">m</a></span><span class="op" id="3287405">[</span><span class="ident" id="3287406"><a href="/gostd/net/ip.go.html#3287326">i</a></span><span class="op" id="3287407">]</span>&nbsp;<span class="op" id="3287409">=</span>&nbsp;<span class="op" id="3287411">^</span><span class="builtintype" id="3287412">byte</span><span class="op" id="3287416">(</span><span class="num" id="3287417">0xff</span>&nbsp;<span class="op" id="3287422">&gt;&gt;</span>&nbsp;<span class="ident" id="3287425"><a href="/gostd/net/ip.go.html#3287305">n</a></span><span class="op" id="3287426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287430"><a href="/gostd/net/ip.go.html#3287305">n</a></span>&nbsp;<span class="op" id="3287432">=</span>&nbsp;<span class="num" id="3287434">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287437">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3287440">return</span>&nbsp;<span class="ident" id="3287447"><a href="/gostd/net/ip.go.html#3287283">m</a></span><br>
<span class="lineno"></span><span class="op" id="3287449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3287452">//&nbsp;Well-known&nbsp;IPv4&nbsp;addresses</span><br>
<span class="lineno"></span><span class="keyword" id="3287481">var</span>&nbsp;<span class="op" id="3287485">(</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287488">IPv4bcast</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287502">=</span>&nbsp;<span class="ident" id="3287504"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="3287508">(</span><span class="num" id="3287509">255</span><span class="op" id="3287512">,</span>&nbsp;<span class="num" id="3287514">255</span><span class="op" id="3287517">,</span>&nbsp;<span class="num" id="3287519">255</span><span class="op" id="3287522">,</span>&nbsp;<span class="num" id="3287524">255</span><span class="op" id="3287527">)</span>&nbsp;<span class="comment" id="3287529">//&nbsp;broadcast</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287543">IPv4allsys</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287557">=</span>&nbsp;<span class="ident" id="3287559"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="3287563">(</span><span class="num" id="3287564">224</span><span class="op" id="3287567">,</span>&nbsp;<span class="num" id="3287569">0</span><span class="op" id="3287570">,</span>&nbsp;<span class="num" id="3287572">0</span><span class="op" id="3287573">,</span>&nbsp;<span class="num" id="3287575">1</span><span class="op" id="3287576">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3287584">//&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287600">IPv4allrouter</span>&nbsp;<span class="op" id="3287614">=</span>&nbsp;<span class="ident" id="3287616"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="3287620">(</span><span class="num" id="3287621">224</span><span class="op" id="3287624">,</span>&nbsp;<span class="num" id="3287626">0</span><span class="op" id="3287627">,</span>&nbsp;<span class="num" id="3287629">0</span><span class="op" id="3287630">,</span>&nbsp;<span class="num" id="3287632">2</span><span class="op" id="3287633">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3287641">//&nbsp;all&nbsp;routers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287657">IPv4zero</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287671">=</span>&nbsp;<span class="ident" id="3287673"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="3287677">(</span><span class="num" id="3287678">0</span><span class="op" id="3287679">,</span>&nbsp;<span class="num" id="3287681">0</span><span class="op" id="3287682">,</span>&nbsp;<span class="num" id="3287684">0</span><span class="op" id="3287685">,</span>&nbsp;<span class="num" id="3287687">0</span><span class="op" id="3287688">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3287698">//&nbsp;all&nbsp;zeros</span><br>
<span class="lineno"></span><span class="op" id="3287711">)</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="3287714">//&nbsp;Well-known&nbsp;IPv6&nbsp;addresses</span><br>
<span class="lineno"></span><span class="keyword" id="3287743">var</span>&nbsp;<span class="op" id="3287747">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287750">IPv6zero</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287777">=</span>&nbsp;<span class="ident" id="3287779"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3287781">{</span><span class="num" id="3287782">0</span><span class="op" id="3287783">,</span>&nbsp;<span class="num" id="3287785">0</span><span class="op" id="3287786">,</span>&nbsp;<span class="num" id="3287788">0</span><span class="op" id="3287789">,</span>&nbsp;<span class="num" id="3287791">0</span><span class="op" id="3287792">,</span>&nbsp;<span class="num" id="3287794">0</span><span class="op" id="3287795">,</span>&nbsp;<span class="num" id="3287797">0</span><span class="op" id="3287798">,</span>&nbsp;<span class="num" id="3287800">0</span><span class="op" id="3287801">,</span>&nbsp;<span class="num" id="3287803">0</span><span class="op" id="3287804">,</span>&nbsp;<span class="num" id="3287806">0</span><span class="op" id="3287807">,</span>&nbsp;<span class="num" id="3287809">0</span><span class="op" id="3287810">,</span>&nbsp;<span class="num" id="3287812">0</span><span class="op" id="3287813">,</span>&nbsp;<span class="num" id="3287815">0</span><span class="op" id="3287816">,</span>&nbsp;<span class="num" id="3287818">0</span><span class="op" id="3287819">,</span>&nbsp;<span class="num" id="3287821">0</span><span class="op" id="3287822">,</span>&nbsp;<span class="num" id="3287824">0</span><span class="op" id="3287825">,</span>&nbsp;<span class="num" id="3287827">0</span><span class="op" id="3287828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287831">IPv6unspecified</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287858">=</span>&nbsp;<span class="ident" id="3287860"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3287862">{</span><span class="num" id="3287863">0</span><span class="op" id="3287864">,</span>&nbsp;<span class="num" id="3287866">0</span><span class="op" id="3287867">,</span>&nbsp;<span class="num" id="3287869">0</span><span class="op" id="3287870">,</span>&nbsp;<span class="num" id="3287872">0</span><span class="op" id="3287873">,</span>&nbsp;<span class="num" id="3287875">0</span><span class="op" id="3287876">,</span>&nbsp;<span class="num" id="3287878">0</span><span class="op" id="3287879">,</span>&nbsp;<span class="num" id="3287881">0</span><span class="op" id="3287882">,</span>&nbsp;<span class="num" id="3287884">0</span><span class="op" id="3287885">,</span>&nbsp;<span class="num" id="3287887">0</span><span class="op" id="3287888">,</span>&nbsp;<span class="num" id="3287890">0</span><span class="op" id="3287891">,</span>&nbsp;<span class="num" id="3287893">0</span><span class="op" id="3287894">,</span>&nbsp;<span class="num" id="3287896">0</span><span class="op" id="3287897">,</span>&nbsp;<span class="num" id="3287899">0</span><span class="op" id="3287900">,</span>&nbsp;<span class="num" id="3287902">0</span><span class="op" id="3287903">,</span>&nbsp;<span class="num" id="3287905">0</span><span class="op" id="3287906">,</span>&nbsp;<span class="num" id="3287908">0</span><span class="op" id="3287909">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287912">IPv6loopback</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3287939">=</span>&nbsp;<span class="ident" id="3287941"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3287943">{</span><span class="num" id="3287944">0</span><span class="op" id="3287945">,</span>&nbsp;<span class="num" id="3287947">0</span><span class="op" id="3287948">,</span>&nbsp;<span class="num" id="3287950">0</span><span class="op" id="3287951">,</span>&nbsp;<span class="num" id="3287953">0</span><span class="op" id="3287954">,</span>&nbsp;<span class="num" id="3287956">0</span><span class="op" id="3287957">,</span>&nbsp;<span class="num" id="3287959">0</span><span class="op" id="3287960">,</span>&nbsp;<span class="num" id="3287962">0</span><span class="op" id="3287963">,</span>&nbsp;<span class="num" id="3287965">0</span><span class="op" id="3287966">,</span>&nbsp;<span class="num" id="3287968">0</span><span class="op" id="3287969">,</span>&nbsp;<span class="num" id="3287971">0</span><span class="op" id="3287972">,</span>&nbsp;<span class="num" id="3287974">0</span><span class="op" id="3287975">,</span>&nbsp;<span class="num" id="3287977">0</span><span class="op" id="3287978">,</span>&nbsp;<span class="num" id="3287980">0</span><span class="op" id="3287981">,</span>&nbsp;<span class="num" id="3287983">0</span><span class="op" id="3287984">,</span>&nbsp;<span class="num" id="3287986">0</span><span class="op" id="3287987">,</span>&nbsp;<span class="num" id="3287989">1</span><span class="op" id="3287990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3287993">IPv6interfacelocalallnodes</span>&nbsp;<span class="op" id="3288020">=</span>&nbsp;<span class="ident" id="3288022"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3288024">{</span><span class="num" id="3288025">0xff</span><span class="op" id="3288029">,</span>&nbsp;<span class="num" id="3288031">0x01</span><span class="op" id="3288035">,</span>&nbsp;<span class="num" id="3288037">0</span><span class="op" id="3288038">,</span>&nbsp;<span class="num" id="3288040">0</span><span class="op" id="3288041">,</span>&nbsp;<span class="num" id="3288043">0</span><span class="op" id="3288044">,</span>&nbsp;<span class="num" id="3288046">0</span><span class="op" id="3288047">,</span>&nbsp;<span class="num" id="3288049">0</span><span class="op" id="3288050">,</span>&nbsp;<span class="num" id="3288052">0</span><span class="op" id="3288053">,</span>&nbsp;<span class="num" id="3288055">0</span><span class="op" id="3288056">,</span>&nbsp;<span class="num" id="3288058">0</span><span class="op" id="3288059">,</span>&nbsp;<span class="num" id="3288061">0</span><span class="op" id="3288062">,</span>&nbsp;<span class="num" id="3288064">0</span><span class="op" id="3288065">,</span>&nbsp;<span class="num" id="3288067">0</span><span class="op" id="3288068">,</span>&nbsp;<span class="num" id="3288070">0</span><span class="op" id="3288071">,</span>&nbsp;<span class="num" id="3288073">0</span><span class="op" id="3288074">,</span>&nbsp;<span class="num" id="3288076">0x01</span><span class="op" id="3288080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3288083">IPv6linklocalallnodes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3288110">=</span>&nbsp;<span class="ident" id="3288112"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3288114">{</span><span class="num" id="3288115">0xff</span><span class="op" id="3288119">,</span>&nbsp;<span class="num" id="3288121">0x02</span><span class="op" id="3288125">,</span>&nbsp;<span class="num" id="3288127">0</span><span class="op" id="3288128">,</span>&nbsp;<span class="num" id="3288130">0</span><span class="op" id="3288131">,</span>&nbsp;<span class="num" id="3288133">0</span><span class="op" id="3288134">,</span>&nbsp;<span class="num" id="3288136">0</span><span class="op" id="3288137">,</span>&nbsp;<span class="num" id="3288139">0</span><span class="op" id="3288140">,</span>&nbsp;<span class="num" id="3288142">0</span><span class="op" id="3288143">,</span>&nbsp;<span class="num" id="3288145">0</span><span class="op" id="3288146">,</span>&nbsp;<span class="num" id="3288148">0</span><span class="op" id="3288149">,</span>&nbsp;<span class="num" id="3288151">0</span><span class="op" id="3288152">,</span>&nbsp;<span class="num" id="3288154">0</span><span class="op" id="3288155">,</span>&nbsp;<span class="num" id="3288157">0</span><span class="op" id="3288158">,</span>&nbsp;<span class="num" id="3288160">0</span><span class="op" id="3288161">,</span>&nbsp;<span class="num" id="3288163">0</span><span class="op" id="3288164">,</span>&nbsp;<span class="num" id="3288166">0x01</span><span class="op" id="3288170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3288173">IPv6linklocalallrouters</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3288200">=</span>&nbsp;<span class="ident" id="3288202"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3288204">{</span><span class="num" id="3288205">0xff</span><span class="op" id="3288209">,</span>&nbsp;<span class="num" id="3288211">0x02</span><span class="op" id="3288215">,</span>&nbsp;<span class="num" id="3288217">0</span><span class="op" id="3288218">,</span>&nbsp;<span class="num" id="3288220">0</span><span class="op" id="3288221">,</span>&nbsp;<span class="num" id="3288223">0</span><span class="op" id="3288224">,</span>&nbsp;<span class="num" id="3288226">0</span><span class="op" id="3288227">,</span>&nbsp;<span class="num" id="3288229">0</span><span class="op" id="3288230">,</span>&nbsp;<span class="num" id="3288232">0</span><span class="op" id="3288233">,</span>&nbsp;<span class="num" id="3288235">0</span><span class="op" id="3288236">,</span>&nbsp;<span class="num" id="3288238">0</span><span class="op" id="3288239">,</span>&nbsp;<span class="num" id="3288241">0</span><span class="op" id="3288242">,</span>&nbsp;<span class="num" id="3288244">0</span><span class="op" id="3288245">,</span>&nbsp;<span class="num" id="3288247">0</span><span class="op" id="3288248">,</span>&nbsp;<span class="num" id="3288250">0</span><span class="op" id="3288251">,</span>&nbsp;<span class="num" id="3288253">0</span><span class="op" id="3288254">,</span>&nbsp;<span class="num" id="3288256">0x02</span><span class="op" id="3288260">}</span><br>
<span class="lineno"></span><span class="op" id="3288262">)</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="comment" id="3288265">//&nbsp;IsUnspecified&nbsp;returns&nbsp;true&nbsp;if&nbsp;ip&nbsp;is&nbsp;an&nbsp;unspecified&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3288328">func</span>&nbsp;<span class="op" id="3288333">(</span><span class="ident" id="3288334">ip</span>&nbsp;<span class="ident" id="3288337"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3288339">)</span>&nbsp;<span class="ident" id="3288341">IsUnspecified</span><span class="op" id="3288354">(</span><span class="op" id="3288355">)</span>&nbsp;<span class="builtintype" id="3288357">bool</span>&nbsp;<span class="op" id="3288362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288365">if</span>&nbsp;<span class="ident" id="3288368"><a href="/gostd/net/ip.go.html#3288334">ip</a></span><span class="op" id="3288370">.</span><span class="ident" id="3288371"><a href="/gostd/net/ip.go.html#3293893">Equal</a></span><span class="op" id="3288376">(</span><span class="ident" id="3288377"><a href="/gostd/net/ip.go.html#3287657">IPv4zero</a></span><span class="op" id="3288385">)</span>&nbsp;<span class="op" id="3288387">||</span>&nbsp;<span class="ident" id="3288390"><a href="/gostd/net/ip.go.html#3288334">ip</a></span><span class="op" id="3288392">.</span><span class="ident" id="3288393"><a href="/gostd/net/ip.go.html#3293893">Equal</a></span><span class="op" id="3288398">(</span><span class="ident" id="3288399"><a href="/gostd/net/ip.go.html#3287831">IPv6unspecified</a></span><span class="op" id="3288414">)</span>&nbsp;<span class="op" id="3288416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288420">return</span>&nbsp;<span class="builtintype" id="3288427">true</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3288433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288436">return</span>&nbsp;<span class="builtintype" id="3288443">false</span><br>
<span class="lineno"></span><span class="op" id="3288449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3288452">//&nbsp;IsLoopback&nbsp;returns&nbsp;true&nbsp;if&nbsp;ip&nbsp;is&nbsp;a&nbsp;loopback&nbsp;address.</span><br>
<span class="lineno">120</span><span class="keyword" id="3288508">func</span>&nbsp;<span class="op" id="3288513">(</span><span class="ident" id="3288514">ip</span>&nbsp;<span class="ident" id="3288517"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3288519">)</span>&nbsp;<span class="ident" id="3288521">IsLoopback</span><span class="op" id="3288531">(</span><span class="op" id="3288532">)</span>&nbsp;<span class="builtintype" id="3288534">bool</span>&nbsp;<span class="op" id="3288539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288542">if</span>&nbsp;<span class="ident" id="3288545">ip4</span>&nbsp;<span class="op" id="3288549">:=</span>&nbsp;<span class="ident" id="3288552"><a href="/gostd/net/ip.go.html#3288514">ip</a></span><span class="op" id="3288554">.</span><span class="ident" id="3288555"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="3288558">(</span><span class="op" id="3288559">)</span><span class="op" id="3288560">;</span>&nbsp;<span class="ident" id="3288562"><a href="/gostd/net/ip.go.html#3288545">ip4</a></span>&nbsp;<span class="op" id="3288566">!=</span>&nbsp;<span class="builtintype" id="3288569">nil</span>&nbsp;<span class="op" id="3288573">&amp;&amp;</span>&nbsp;<span class="ident" id="3288576"><a href="/gostd/net/ip.go.html#3288545">ip4</a></span><span class="op" id="3288579">[</span><span class="num" id="3288580">0</span><span class="op" id="3288581">]</span>&nbsp;<span class="op" id="3288583">==</span>&nbsp;<span class="num" id="3288586">127</span>&nbsp;<span class="op" id="3288590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288594">return</span>&nbsp;<span class="builtintype" id="3288601">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3288607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288610">return</span>&nbsp;<span class="ident" id="3288617"><a href="/gostd/net/ip.go.html#3288514">ip</a></span><span class="op" id="3288619">.</span><span class="ident" id="3288620"><a href="/gostd/net/ip.go.html#3293893">Equal</a></span><span class="op" id="3288625">(</span><span class="ident" id="3288626"><a href="/gostd/net/ip.go.html#3287912">IPv6loopback</a></span><span class="op" id="3288638">)</span><br>
<span class="lineno">125</span><span class="op" id="3288640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3288643">//&nbsp;IsMulticast&nbsp;returns&nbsp;true&nbsp;if&nbsp;ip&nbsp;is&nbsp;a&nbsp;multicast&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3288701">func</span>&nbsp;<span class="op" id="3288706">(</span><span class="ident" id="3288707">ip</span>&nbsp;<span class="ident" id="3288710"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3288712">)</span>&nbsp;<span class="ident" id="3288714">IsMulticast</span><span class="op" id="3288725">(</span><span class="op" id="3288726">)</span>&nbsp;<span class="builtintype" id="3288728">bool</span>&nbsp;<span class="op" id="3288733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288736">if</span>&nbsp;<span class="ident" id="3288739">ip4</span>&nbsp;<span class="op" id="3288743">:=</span>&nbsp;<span class="ident" id="3288746"><a href="/gostd/net/ip.go.html#3288707">ip</a></span><span class="op" id="3288748">.</span><span class="ident" id="3288749"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="3288752">(</span><span class="op" id="3288753">)</span><span class="op" id="3288754">;</span>&nbsp;<span class="ident" id="3288756"><a href="/gostd/net/ip.go.html#3288739">ip4</a></span>&nbsp;<span class="op" id="3288760">!=</span>&nbsp;<span class="builtintype" id="3288763">nil</span>&nbsp;<span class="op" id="3288767">&amp;&amp;</span>&nbsp;<span class="ident" id="3288770"><a href="/gostd/net/ip.go.html#3288739">ip4</a></span><span class="op" id="3288773">[</span><span class="num" id="3288774">0</span><span class="op" id="3288775">]</span><span class="op" id="3288776">&amp;</span><span class="num" id="3288777">0xf0</span>&nbsp;<span class="op" id="3288782">==</span>&nbsp;<span class="num" id="3288785">0xe0</span>&nbsp;<span class="op" id="3288790">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288794">return</span>&nbsp;<span class="builtintype" id="3288801">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3288807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288810">return</span>&nbsp;<span class="ident" id="3288817"><a href="/gostd/net/ip.go.html#3288707">ip</a></span><span class="op" id="3288819">[</span><span class="num" id="3288820">0</span><span class="op" id="3288821">]</span>&nbsp;<span class="op" id="3288823">==</span>&nbsp;<span class="num" id="3288826">0xff</span><br>
<span class="lineno"></span><span class="op" id="3288831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="3288834">//&nbsp;IsInterfaceLinkLocalMulticast&nbsp;returns&nbsp;true&nbsp;if&nbsp;ip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3288889">//&nbsp;an&nbsp;interface-local&nbsp;multicast&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3288930">func</span>&nbsp;<span class="op" id="3288935">(</span><span class="ident" id="3288936">ip</span>&nbsp;<span class="ident" id="3288939"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3288941">)</span>&nbsp;<span class="ident" id="3288943">IsInterfaceLocalMulticast</span><span class="op" id="3288968">(</span><span class="op" id="3288969">)</span>&nbsp;<span class="builtintype" id="3288971">bool</span>&nbsp;<span class="op" id="3288976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3288979">return</span>&nbsp;<span class="builtinfunc" id="3288986">len</span><span class="op" id="3288989">(</span><span class="ident" id="3288990"><a href="/gostd/net/ip.go.html#3288936">ip</a></span><span class="op" id="3288992">)</span>&nbsp;<span class="op" id="3288994">==</span>&nbsp;<span class="ident" id="3288997"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3289005">&amp;&amp;</span>&nbsp;<span class="ident" id="3289008"><a href="/gostd/net/ip.go.html#3288936">ip</a></span><span class="op" id="3289010">[</span><span class="num" id="3289011">0</span><span class="op" id="3289012">]</span>&nbsp;<span class="op" id="3289014">==</span>&nbsp;<span class="num" id="3289017">0xff</span>&nbsp;<span class="op" id="3289022">&amp;&amp;</span>&nbsp;<span class="ident" id="3289025"><a href="/gostd/net/ip.go.html#3288936">ip</a></span><span class="op" id="3289027">[</span><span class="num" id="3289028">1</span><span class="op" id="3289029">]</span><span class="op" id="3289030">&amp;</span><span class="num" id="3289031">0x0f</span>&nbsp;<span class="op" id="3289036">==</span>&nbsp;<span class="num" id="3289039">0x01</span><br>
<span class="lineno"></span><span class="op" id="3289044">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="3289047">//&nbsp;IsLinkLocalMulticast&nbsp;returns&nbsp;true&nbsp;if&nbsp;ip&nbsp;is&nbsp;a&nbsp;link-local</span><br>
<span class="lineno"></span><span class="comment" id="3289106">//&nbsp;multicast&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3289128">func</span>&nbsp;<span class="op" id="3289133">(</span><span class="ident" id="3289134">ip</span>&nbsp;<span class="ident" id="3289137"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3289139">)</span>&nbsp;<span class="ident" id="3289141">IsLinkLocalMulticast</span><span class="op" id="3289161">(</span><span class="op" id="3289162">)</span>&nbsp;<span class="builtintype" id="3289164">bool</span>&nbsp;<span class="op" id="3289169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289172">if</span>&nbsp;<span class="ident" id="3289175">ip4</span>&nbsp;<span class="op" id="3289179">:=</span>&nbsp;<span class="ident" id="3289182"><a href="/gostd/net/ip.go.html#3289134">ip</a></span><span class="op" id="3289184">.</span><span class="ident" id="3289185"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="3289188">(</span><span class="op" id="3289189">)</span><span class="op" id="3289190">;</span>&nbsp;<span class="ident" id="3289192"><a href="/gostd/net/ip.go.html#3289175">ip4</a></span>&nbsp;<span class="op" id="3289196">!=</span>&nbsp;<span class="builtintype" id="3289199">nil</span>&nbsp;<span class="op" id="3289203">&amp;&amp;</span>&nbsp;<span class="ident" id="3289206"><a href="/gostd/net/ip.go.html#3289175">ip4</a></span><span class="op" id="3289209">[</span><span class="num" id="3289210">0</span><span class="op" id="3289211">]</span>&nbsp;<span class="op" id="3289213">==</span>&nbsp;<span class="num" id="3289216">224</span>&nbsp;<span class="op" id="3289220">&amp;&amp;</span>&nbsp;<span class="ident" id="3289223"><a href="/gostd/net/ip.go.html#3289175">ip4</a></span><span class="op" id="3289226">[</span><span class="num" id="3289227">1</span><span class="op" id="3289228">]</span>&nbsp;<span class="op" id="3289230">==</span>&nbsp;<span class="num" id="3289233">0</span>&nbsp;<span class="op" id="3289235">&amp;&amp;</span>&nbsp;<span class="ident" id="3289238"><a href="/gostd/net/ip.go.html#3289175">ip4</a></span><span class="op" id="3289241">[</span><span class="num" id="3289242">2</span><span class="op" id="3289243">]</span>&nbsp;<span class="op" id="3289245">==</span>&nbsp;<span class="num" id="3289248">0</span>&nbsp;<span class="op" id="3289250">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289254">return</span>&nbsp;<span class="builtintype" id="3289261">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289270">return</span>&nbsp;<span class="ident" id="3289277"><a href="/gostd/net/ip.go.html#3289134">ip</a></span><span class="op" id="3289279">[</span><span class="num" id="3289280">0</span><span class="op" id="3289281">]</span>&nbsp;<span class="op" id="3289283">==</span>&nbsp;<span class="num" id="3289286">0xff</span>&nbsp;<span class="op" id="3289291">&amp;&amp;</span>&nbsp;<span class="ident" id="3289294"><a href="/gostd/net/ip.go.html#3289134">ip</a></span><span class="op" id="3289296">[</span><span class="num" id="3289297">1</span><span class="op" id="3289298">]</span><span class="op" id="3289299">&amp;</span><span class="num" id="3289300">0x0f</span>&nbsp;<span class="op" id="3289305">==</span>&nbsp;<span class="num" id="3289308">0x02</span><br>
<span class="lineno"></span><span class="op" id="3289313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="3289316">//&nbsp;IsLinkLocalUnicast&nbsp;returns&nbsp;true&nbsp;if&nbsp;ip&nbsp;is&nbsp;a&nbsp;link-local</span><br>
<span class="lineno"></span><span class="comment" id="3289373">//&nbsp;unicast&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3289393">func</span>&nbsp;<span class="op" id="3289398">(</span><span class="ident" id="3289399">ip</span>&nbsp;<span class="ident" id="3289402"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3289404">)</span>&nbsp;<span class="ident" id="3289406">IsLinkLocalUnicast</span><span class="op" id="3289424">(</span><span class="op" id="3289425">)</span>&nbsp;<span class="builtintype" id="3289427">bool</span>&nbsp;<span class="op" id="3289432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289435">if</span>&nbsp;<span class="ident" id="3289438">ip4</span>&nbsp;<span class="op" id="3289442">:=</span>&nbsp;<span class="ident" id="3289445"><a href="/gostd/net/ip.go.html#3289399">ip</a></span><span class="op" id="3289447">.</span><span class="ident" id="3289448"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="3289451">(</span><span class="op" id="3289452">)</span><span class="op" id="3289453">;</span>&nbsp;<span class="ident" id="3289455"><a href="/gostd/net/ip.go.html#3289438">ip4</a></span>&nbsp;<span class="op" id="3289459">!=</span>&nbsp;<span class="builtintype" id="3289462">nil</span>&nbsp;<span class="op" id="3289466">&amp;&amp;</span>&nbsp;<span class="ident" id="3289469"><a href="/gostd/net/ip.go.html#3289438">ip4</a></span><span class="op" id="3289472">[</span><span class="num" id="3289473">0</span><span class="op" id="3289474">]</span>&nbsp;<span class="op" id="3289476">==</span>&nbsp;<span class="num" id="3289479">169</span>&nbsp;<span class="op" id="3289483">&amp;&amp;</span>&nbsp;<span class="ident" id="3289486"><a href="/gostd/net/ip.go.html#3289438">ip4</a></span><span class="op" id="3289489">[</span><span class="num" id="3289490">1</span><span class="op" id="3289491">]</span>&nbsp;<span class="op" id="3289493">==</span>&nbsp;<span class="num" id="3289496">254</span>&nbsp;<span class="op" id="3289500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289504">return</span>&nbsp;<span class="builtintype" id="3289511">true</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289520">return</span>&nbsp;<span class="ident" id="3289527"><a href="/gostd/net/ip.go.html#3289399">ip</a></span><span class="op" id="3289529">[</span><span class="num" id="3289530">0</span><span class="op" id="3289531">]</span>&nbsp;<span class="op" id="3289533">==</span>&nbsp;<span class="num" id="3289536">0xfe</span>&nbsp;<span class="op" id="3289541">&amp;&amp;</span>&nbsp;<span class="ident" id="3289544"><a href="/gostd/net/ip.go.html#3289399">ip</a></span><span class="op" id="3289546">[</span><span class="num" id="3289547">1</span><span class="op" id="3289548">]</span><span class="op" id="3289549">&amp;</span><span class="num" id="3289550">0xc0</span>&nbsp;<span class="op" id="3289555">==</span>&nbsp;<span class="num" id="3289558">0x80</span><br>
<span class="lineno"></span><span class="op" id="3289563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3289566">//&nbsp;IsGlobalUnicast&nbsp;returns&nbsp;true&nbsp;if&nbsp;ip&nbsp;is&nbsp;a&nbsp;global&nbsp;unicast</span><br>
<span class="lineno">160</span><span class="comment" id="3289624">//&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3289636">func</span>&nbsp;<span class="op" id="3289641">(</span><span class="ident" id="3289642">ip</span>&nbsp;<span class="ident" id="3289645"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3289647">)</span>&nbsp;<span class="ident" id="3289649">IsGlobalUnicast</span><span class="op" id="3289664">(</span><span class="op" id="3289665">)</span>&nbsp;<span class="builtintype" id="3289667">bool</span>&nbsp;<span class="op" id="3289672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289675">return</span>&nbsp;<span class="op" id="3289682">!</span><span class="ident" id="3289683"><a href="/gostd/net/ip.go.html#3289642">ip</a></span><span class="op" id="3289685">.</span><span class="ident" id="3289686"><a href="/gostd/net/ip.go.html#3288341">IsUnspecified</a></span><span class="op" id="3289699">(</span><span class="op" id="3289700">)</span>&nbsp;<span class="op" id="3289702">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289707">!</span><span class="ident" id="3289708"><a href="/gostd/net/ip.go.html#3289642">ip</a></span><span class="op" id="3289710">.</span><span class="ident" id="3289711"><a href="/gostd/net/ip.go.html#3288521">IsLoopback</a></span><span class="op" id="3289721">(</span><span class="op" id="3289722">)</span>&nbsp;<span class="op" id="3289724">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289729">!</span><span class="ident" id="3289730"><a href="/gostd/net/ip.go.html#3289642">ip</a></span><span class="op" id="3289732">.</span><span class="ident" id="3289733"><a href="/gostd/net/ip.go.html#3288714">IsMulticast</a></span><span class="op" id="3289744">(</span><span class="op" id="3289745">)</span>&nbsp;<span class="op" id="3289747">&amp;&amp;</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289752">!</span><span class="ident" id="3289753"><a href="/gostd/net/ip.go.html#3289642">ip</a></span><span class="op" id="3289755">.</span><span class="ident" id="3289756"><a href="/gostd/net/ip.go.html#3289406">IsLinkLocalUnicast</a></span><span class="op" id="3289774">(</span><span class="op" id="3289775">)</span><br>
<span class="lineno"></span><span class="op" id="3289777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3289780">//&nbsp;Is&nbsp;p&nbsp;all&nbsp;zeros?</span><br>
<span class="lineno"></span><span class="keyword" id="3289799">func</span>&nbsp;<span class="ident" id="3289804">isZeros</span><span class="op" id="3289811">(</span><span class="ident" id="3289812">p</span>&nbsp;<span class="ident" id="3289814"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3289816">)</span>&nbsp;<span class="builtintype" id="3289818">bool</span>&nbsp;<span class="op" id="3289823">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289826">for</span>&nbsp;<span class="ident" id="3289830">i</span>&nbsp;<span class="op" id="3289832">:=</span>&nbsp;<span class="num" id="3289835">0</span><span class="op" id="3289836">;</span>&nbsp;<span class="ident" id="3289838"><a href="/gostd/net/ip.go.html#3289830">i</a></span>&nbsp;<span class="op" id="3289840">&lt;</span>&nbsp;<span class="builtinfunc" id="3289842">len</span><span class="op" id="3289845">(</span><span class="ident" id="3289846"><a href="/gostd/net/ip.go.html#3289812">p</a></span><span class="op" id="3289847">)</span><span class="op" id="3289848">;</span>&nbsp;<span class="ident" id="3289850"><a href="/gostd/net/ip.go.html#3289830">i</a></span><span class="op" id="3289851">++</span>&nbsp;<span class="op" id="3289854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289858">if</span>&nbsp;<span class="ident" id="3289861"><a href="/gostd/net/ip.go.html#3289812">p</a></span><span class="op" id="3289862">[</span><span class="ident" id="3289863"><a href="/gostd/net/ip.go.html#3289830">i</a></span><span class="op" id="3289864">]</span>&nbsp;<span class="op" id="3289866">!=</span>&nbsp;<span class="num" id="3289869">0</span>&nbsp;<span class="op" id="3289871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289876">return</span>&nbsp;<span class="builtintype" id="3289883">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3289894">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3289897">return</span>&nbsp;<span class="builtintype" id="3289904">true</span><br>
<span class="lineno"></span><span class="op" id="3289909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3289912">//&nbsp;To4&nbsp;converts&nbsp;the&nbsp;IPv4&nbsp;address&nbsp;ip&nbsp;to&nbsp;a&nbsp;4-byte&nbsp;representation.</span><br>
<span class="lineno"></span><span class="comment" id="3289976">//&nbsp;If&nbsp;ip&nbsp;is&nbsp;not&nbsp;an&nbsp;IPv4&nbsp;address,&nbsp;To4&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno">180</span><span class="keyword" id="3290026">func</span>&nbsp;<span class="op" id="3290031">(</span><span class="ident" id="3290032">ip</span>&nbsp;<span class="ident" id="3290035"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3290037">)</span>&nbsp;<span class="ident" id="3290039">To4</span><span class="op" id="3290042">(</span><span class="op" id="3290043">)</span>&nbsp;<span class="ident" id="3290045"><a href="/gostd/net/ip.go.html#3286271">IP</a></span>&nbsp;<span class="op" id="3290048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290051">if</span>&nbsp;<span class="builtinfunc" id="3290054">len</span><span class="op" id="3290057">(</span><span class="ident" id="3290058"><a href="/gostd/net/ip.go.html#3290032">ip</a></span><span class="op" id="3290060">)</span>&nbsp;<span class="op" id="3290062">==</span>&nbsp;<span class="ident" id="3290065"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3290073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290077">return</span>&nbsp;<span class="ident" id="3290084"><a href="/gostd/net/ip.go.html#3290032">ip</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3290088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290091">if</span>&nbsp;<span class="builtinfunc" id="3290094">len</span><span class="op" id="3290097">(</span><span class="ident" id="3290098"><a href="/gostd/net/ip.go.html#3290032">ip</a></span><span class="op" id="3290100">)</span>&nbsp;<span class="op" id="3290102">==</span>&nbsp;<span class="ident" id="3290105"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3290113">&amp;&amp;</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290118"><a href="/gostd/net/ip.go.html#3289804">isZeros</a></span><span class="op" id="3290125">(</span><span class="ident" id="3290126"><a href="/gostd/net/ip.go.html#3290032">ip</a></span><span class="op" id="3290128">[</span><span class="num" id="3290129">0</span><span class="op" id="3290130">:</span><span class="num" id="3290131">10</span><span class="op" id="3290133">]</span><span class="op" id="3290134">)</span>&nbsp;<span class="op" id="3290136">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290141"><a href="/gostd/net/ip.go.html#3290032">ip</a></span><span class="op" id="3290143">[</span><span class="num" id="3290144">10</span><span class="op" id="3290146">]</span>&nbsp;<span class="op" id="3290148">==</span>&nbsp;<span class="num" id="3290151">0xff</span>&nbsp;<span class="op" id="3290156">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290161"><a href="/gostd/net/ip.go.html#3290032">ip</a></span><span class="op" id="3290163">[</span><span class="num" id="3290164">11</span><span class="op" id="3290166">]</span>&nbsp;<span class="op" id="3290168">==</span>&nbsp;<span class="num" id="3290171">0xff</span>&nbsp;<span class="op" id="3290176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290180">return</span>&nbsp;<span class="ident" id="3290187"><a href="/gostd/net/ip.go.html#3290032">ip</a></span><span class="op" id="3290189">[</span><span class="num" id="3290190">12</span><span class="op" id="3290192">:</span><span class="num" id="3290193">16</span><span class="op" id="3290195">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3290198">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290201">return</span>&nbsp;<span class="builtintype" id="3290208">nil</span><br>
<span class="lineno"></span><span class="op" id="3290212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3290215">//&nbsp;To16&nbsp;converts&nbsp;the&nbsp;IP&nbsp;address&nbsp;ip&nbsp;to&nbsp;a&nbsp;16-byte&nbsp;representation.</span><br>
<span class="lineno"></span><span class="comment" id="3290279">//&nbsp;If&nbsp;ip&nbsp;is&nbsp;not&nbsp;an&nbsp;IP&nbsp;address&nbsp;(it&nbsp;is&nbsp;the&nbsp;wrong&nbsp;length),&nbsp;To16&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno">195</span><span class="keyword" id="3290353">func</span>&nbsp;<span class="op" id="3290358">(</span><span class="ident" id="3290359">ip</span>&nbsp;<span class="ident" id="3290362"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3290364">)</span>&nbsp;<span class="ident" id="3290366">To16</span><span class="op" id="3290370">(</span><span class="op" id="3290371">)</span>&nbsp;<span class="ident" id="3290373"><a href="/gostd/net/ip.go.html#3286271">IP</a></span>&nbsp;<span class="op" id="3290376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290379">if</span>&nbsp;<span class="builtinfunc" id="3290382">len</span><span class="op" id="3290385">(</span><span class="ident" id="3290386"><a href="/gostd/net/ip.go.html#3290359">ip</a></span><span class="op" id="3290388">)</span>&nbsp;<span class="op" id="3290390">==</span>&nbsp;<span class="ident" id="3290393"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3290401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290405">return</span>&nbsp;<span class="ident" id="3290412"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="3290416">(</span><span class="ident" id="3290417"><a href="/gostd/net/ip.go.html#3290359">ip</a></span><span class="op" id="3290419">[</span><span class="num" id="3290420">0</span><span class="op" id="3290421">]</span><span class="op" id="3290422">,</span>&nbsp;<span class="ident" id="3290424"><a href="/gostd/net/ip.go.html#3290359">ip</a></span><span class="op" id="3290426">[</span><span class="num" id="3290427">1</span><span class="op" id="3290428">]</span><span class="op" id="3290429">,</span>&nbsp;<span class="ident" id="3290431"><a href="/gostd/net/ip.go.html#3290359">ip</a></span><span class="op" id="3290433">[</span><span class="num" id="3290434">2</span><span class="op" id="3290435">]</span><span class="op" id="3290436">,</span>&nbsp;<span class="ident" id="3290438"><a href="/gostd/net/ip.go.html#3290359">ip</a></span><span class="op" id="3290440">[</span><span class="num" id="3290441">3</span><span class="op" id="3290442">]</span><span class="op" id="3290443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3290446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290449">if</span>&nbsp;<span class="builtinfunc" id="3290452">len</span><span class="op" id="3290455">(</span><span class="ident" id="3290456"><a href="/gostd/net/ip.go.html#3290359">ip</a></span><span class="op" id="3290458">)</span>&nbsp;<span class="op" id="3290460">==</span>&nbsp;<span class="ident" id="3290463"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3290471">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290475">return</span>&nbsp;<span class="ident" id="3290482"><a href="/gostd/net/ip.go.html#3290359">ip</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3290486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290489">return</span>&nbsp;<span class="builtintype" id="3290496">nil</span><br>
<span class="lineno"></span><span class="op" id="3290500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="comment" id="3290503">//&nbsp;Default&nbsp;route&nbsp;masks&nbsp;for&nbsp;IPv4.</span><br>
<span class="lineno"></span><span class="keyword" id="3290536">var</span>&nbsp;<span class="op" id="3290540">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290543">classAMask</span>&nbsp;<span class="op" id="3290554">=</span>&nbsp;<span class="ident" id="3290556"><a href="/gostd/net/ip.go.html#3286824">IPv4Mask</a></span><span class="op" id="3290564">(</span><span class="num" id="3290565">0xff</span><span class="op" id="3290569">,</span>&nbsp;<span class="num" id="3290571">0</span><span class="op" id="3290572">,</span>&nbsp;<span class="num" id="3290574">0</span><span class="op" id="3290575">,</span>&nbsp;<span class="num" id="3290577">0</span><span class="op" id="3290578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290581">classBMask</span>&nbsp;<span class="op" id="3290592">=</span>&nbsp;<span class="ident" id="3290594"><a href="/gostd/net/ip.go.html#3286824">IPv4Mask</a></span><span class="op" id="3290602">(</span><span class="num" id="3290603">0xff</span><span class="op" id="3290607">,</span>&nbsp;<span class="num" id="3290609">0xff</span><span class="op" id="3290613">,</span>&nbsp;<span class="num" id="3290615">0</span><span class="op" id="3290616">,</span>&nbsp;<span class="num" id="3290618">0</span><span class="op" id="3290619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3290622">classCMask</span>&nbsp;<span class="op" id="3290633">=</span>&nbsp;<span class="ident" id="3290635"><a href="/gostd/net/ip.go.html#3286824">IPv4Mask</a></span><span class="op" id="3290643">(</span><span class="num" id="3290644">0xff</span><span class="op" id="3290648">,</span>&nbsp;<span class="num" id="3290650">0xff</span><span class="op" id="3290654">,</span>&nbsp;<span class="num" id="3290656">0xff</span><span class="op" id="3290660">,</span>&nbsp;<span class="num" id="3290662">0</span><span class="op" id="3290663">)</span><br>
<span class="lineno">210</span><span class="op" id="3290665">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3290668">//&nbsp;DefaultMask&nbsp;returns&nbsp;the&nbsp;default&nbsp;IP&nbsp;mask&nbsp;for&nbsp;the&nbsp;IP&nbsp;address&nbsp;ip.</span><br>
<span class="lineno"></span><span class="comment" id="3290734">//&nbsp;Only&nbsp;IPv4&nbsp;addresses&nbsp;have&nbsp;default&nbsp;masks;&nbsp;DefaultMask&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3290797">//&nbsp;nil&nbsp;if&nbsp;ip&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;IPv4&nbsp;address.</span><br>
<span class="lineno">215</span><span class="keyword" id="3290839">func</span>&nbsp;<span class="op" id="3290844">(</span><span class="ident" id="3290845">ip</span>&nbsp;<span class="ident" id="3290848"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3290850">)</span>&nbsp;<span class="ident" id="3290852">DefaultMask</span><span class="op" id="3290863">(</span><span class="op" id="3290864">)</span>&nbsp;<span class="ident" id="3290866"><a href="/gostd/net/ip.go.html#3286319">IPMask</a></span>&nbsp;<span class="op" id="3290873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290876">if</span>&nbsp;<span class="ident" id="3290879"><a href="/gostd/net/ip.go.html#3290845">ip</a></span>&nbsp;<span class="op" id="3290882">=</span>&nbsp;<span class="ident" id="3290884"><a href="/gostd/net/ip.go.html#3290845">ip</a></span><span class="op" id="3290886">.</span><span class="ident" id="3290887"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="3290890">(</span><span class="op" id="3290891">)</span><span class="op" id="3290892">;</span>&nbsp;<span class="ident" id="3290894"><a href="/gostd/net/ip.go.html#3290845">ip</a></span>&nbsp;<span class="op" id="3290897">==</span>&nbsp;<span class="builtintype" id="3290900">nil</span>&nbsp;<span class="op" id="3290904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290908">return</span>&nbsp;<span class="builtintype" id="3290915">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3290920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290923">switch</span>&nbsp;<span class="builtintype" id="3290930">true</span>&nbsp;<span class="op" id="3290935">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290938">case</span>&nbsp;<span class="ident" id="3290943"><a href="/gostd/net/ip.go.html#3290845">ip</a></span><span class="op" id="3290945">[</span><span class="num" id="3290946">0</span><span class="op" id="3290947">]</span>&nbsp;<span class="op" id="3290949">&lt;</span>&nbsp;<span class="num" id="3290951">0x80</span><span class="op" id="3290955">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290959">return</span>&nbsp;<span class="ident" id="3290966"><a href="/gostd/net/ip.go.html#3290543">classAMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290978">case</span>&nbsp;<span class="ident" id="3290983"><a href="/gostd/net/ip.go.html#3290845">ip</a></span><span class="op" id="3290985">[</span><span class="num" id="3290986">0</span><span class="op" id="3290987">]</span>&nbsp;<span class="op" id="3290989">&lt;</span>&nbsp;<span class="num" id="3290991">0xC0</span><span class="op" id="3290995">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3290999">return</span>&nbsp;<span class="ident" id="3291006"><a href="/gostd/net/ip.go.html#3290581">classBMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291018">default</span><span class="op" id="3291025">:</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291029">return</span>&nbsp;<span class="ident" id="3291036"><a href="/gostd/net/ip.go.html#3290622">classCMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291048">}</span><br>
<span class="lineno"></span><span class="op" id="3291050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3291053">func</span>&nbsp;<span class="ident" id="3291058">allFF</span><span class="op" id="3291063">(</span><span class="ident" id="3291064">b</span>&nbsp;<span class="op" id="3291066">[</span><span class="op" id="3291067">]</span><span class="builtintype" id="3291068">byte</span><span class="op" id="3291072">)</span>&nbsp;<span class="builtintype" id="3291074">bool</span>&nbsp;<span class="op" id="3291079">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291082">for</span>&nbsp;<span class="ident" id="3291086">_</span><span class="op" id="3291087">,</span>&nbsp;<span class="ident" id="3291089">c</span>&nbsp;<span class="op" id="3291091">:=</span>&nbsp;<span class="keyword" id="3291094">range</span>&nbsp;<span class="ident" id="3291100"><a href="/gostd/net/ip.go.html#3291064">b</a></span>&nbsp;<span class="op" id="3291102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291106">if</span>&nbsp;<span class="ident" id="3291109"><a href="/gostd/net/ip.go.html#3291089">c</a></span>&nbsp;<span class="op" id="3291111">!=</span>&nbsp;<span class="num" id="3291114">0xff</span>&nbsp;<span class="op" id="3291119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291124">return</span>&nbsp;<span class="builtintype" id="3291131">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291142">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291145">return</span>&nbsp;<span class="builtintype" id="3291152">true</span><br>
<span class="lineno"></span><span class="op" id="3291157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3291160">//&nbsp;Mask&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;masking&nbsp;the&nbsp;IP&nbsp;address&nbsp;ip&nbsp;with&nbsp;mask.</span><br>
<span class="lineno"></span><span class="keyword" id="3291227">func</span>&nbsp;<span class="op" id="3291232">(</span><span class="ident" id="3291233">ip</span>&nbsp;<span class="ident" id="3291236"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3291238">)</span>&nbsp;<span class="ident" id="3291240">Mask</span><span class="op" id="3291244">(</span><span class="ident" id="3291245">mask</span>&nbsp;<span class="ident" id="3291250"><a href="/gostd/net/ip.go.html#3286319">IPMask</a></span><span class="op" id="3291256">)</span>&nbsp;<span class="ident" id="3291258"><a href="/gostd/net/ip.go.html#3286271">IP</a></span>&nbsp;<span class="op" id="3291261">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291264">if</span>&nbsp;<span class="builtinfunc" id="3291267">len</span><span class="op" id="3291270">(</span><span class="ident" id="3291271"><a href="/gostd/net/ip.go.html#3291245">mask</a></span><span class="op" id="3291275">)</span>&nbsp;<span class="op" id="3291277">==</span>&nbsp;<span class="ident" id="3291280"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3291288">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3291291">len</span><span class="op" id="3291294">(</span><span class="ident" id="3291295"><a href="/gostd/net/ip.go.html#3291233">ip</a></span><span class="op" id="3291297">)</span>&nbsp;<span class="op" id="3291299">==</span>&nbsp;<span class="ident" id="3291302"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3291310">&amp;&amp;</span>&nbsp;<span class="ident" id="3291313"><a href="/gostd/net/ip.go.html#3291058">allFF</a></span><span class="op" id="3291318">(</span><span class="ident" id="3291319"><a href="/gostd/net/ip.go.html#3291245">mask</a></span><span class="op" id="3291323">[</span><span class="op" id="3291324">:</span><span class="num" id="3291325">12</span><span class="op" id="3291327">]</span><span class="op" id="3291328">)</span>&nbsp;<span class="op" id="3291330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3291334"><a href="/gostd/net/ip.go.html#3291245">mask</a></span>&nbsp;<span class="op" id="3291339">=</span>&nbsp;<span class="ident" id="3291341"><a href="/gostd/net/ip.go.html#3291245">mask</a></span><span class="op" id="3291345">[</span><span class="num" id="3291346">12</span><span class="op" id="3291348">:</span><span class="op" id="3291349">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291355">if</span>&nbsp;<span class="builtinfunc" id="3291358">len</span><span class="op" id="3291361">(</span><span class="ident" id="3291362"><a href="/gostd/net/ip.go.html#3291245">mask</a></span><span class="op" id="3291366">)</span>&nbsp;<span class="op" id="3291368">==</span>&nbsp;<span class="ident" id="3291371"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3291379">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3291382">len</span><span class="op" id="3291385">(</span><span class="ident" id="3291386"><a href="/gostd/net/ip.go.html#3291233">ip</a></span><span class="op" id="3291388">)</span>&nbsp;<span class="op" id="3291390">==</span>&nbsp;<span class="ident" id="3291393"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3291401">&amp;&amp;</span>&nbsp;<span class="ident" id="3291404"><a href="/gostd/net/ip.go.html#3294225">bytesEqual</a></span><span class="op" id="3291414">(</span><span class="ident" id="3291415"><a href="/gostd/net/ip.go.html#3291233">ip</a></span><span class="op" id="3291417">[</span><span class="op" id="3291418">:</span><span class="num" id="3291419">12</span><span class="op" id="3291421">]</span><span class="op" id="3291422">,</span>&nbsp;<span class="ident" id="3291424"><a href="/gostd/net/ip.go.html#3286676">v4InV6Prefix</a></span><span class="op" id="3291436">)</span>&nbsp;<span class="op" id="3291438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3291442"><a href="/gostd/net/ip.go.html#3291233">ip</a></span>&nbsp;<span class="op" id="3291445">=</span>&nbsp;<span class="ident" id="3291447"><a href="/gostd/net/ip.go.html#3291233">ip</a></span><span class="op" id="3291449">[</span><span class="num" id="3291450">12</span><span class="op" id="3291452">:</span><span class="op" id="3291453">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3291459">n</span>&nbsp;<span class="op" id="3291461">:=</span>&nbsp;<span class="builtinfunc" id="3291464">len</span><span class="op" id="3291467">(</span><span class="ident" id="3291468"><a href="/gostd/net/ip.go.html#3291233">ip</a></span><span class="op" id="3291470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291473">if</span>&nbsp;<span class="ident" id="3291476"><a href="/gostd/net/ip.go.html#3291459">n</a></span>&nbsp;<span class="op" id="3291478">!=</span>&nbsp;<span class="builtinfunc" id="3291481">len</span><span class="op" id="3291484">(</span><span class="ident" id="3291485"><a href="/gostd/net/ip.go.html#3291245">mask</a></span><span class="op" id="3291489">)</span>&nbsp;<span class="op" id="3291491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291495">return</span>&nbsp;<span class="builtintype" id="3291502">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291507">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3291510">out</span>&nbsp;<span class="op" id="3291514">:=</span>&nbsp;<span class="builtinfunc" id="3291517">make</span><span class="op" id="3291521">(</span><span class="ident" id="3291522"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3291524">,</span>&nbsp;<span class="ident" id="3291526"><a href="/gostd/net/ip.go.html#3291459">n</a></span><span class="op" id="3291527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291530">for</span>&nbsp;<span class="ident" id="3291534">i</span>&nbsp;<span class="op" id="3291536">:=</span>&nbsp;<span class="num" id="3291539">0</span><span class="op" id="3291540">;</span>&nbsp;<span class="ident" id="3291542"><a href="/gostd/net/ip.go.html#3291534">i</a></span>&nbsp;<span class="op" id="3291544">&lt;</span>&nbsp;<span class="ident" id="3291546"><a href="/gostd/net/ip.go.html#3291459">n</a></span><span class="op" id="3291547">;</span>&nbsp;<span class="ident" id="3291549"><a href="/gostd/net/ip.go.html#3291534">i</a></span><span class="op" id="3291550">++</span>&nbsp;<span class="op" id="3291553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3291557"><a href="/gostd/net/ip.go.html#3291510">out</a></span><span class="op" id="3291560">[</span><span class="ident" id="3291561"><a href="/gostd/net/ip.go.html#3291534">i</a></span><span class="op" id="3291562">]</span>&nbsp;<span class="op" id="3291564">=</span>&nbsp;<span class="ident" id="3291566"><a href="/gostd/net/ip.go.html#3291233">ip</a></span><span class="op" id="3291568">[</span><span class="ident" id="3291569"><a href="/gostd/net/ip.go.html#3291534">i</a></span><span class="op" id="3291570">]</span>&nbsp;<span class="op" id="3291572">&amp;</span>&nbsp;<span class="ident" id="3291574"><a href="/gostd/net/ip.go.html#3291245">mask</a></span><span class="op" id="3291578">[</span><span class="ident" id="3291579"><a href="/gostd/net/ip.go.html#3291534">i</a></span><span class="op" id="3291580">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291586">return</span>&nbsp;<span class="ident" id="3291593"><a href="/gostd/net/ip.go.html#3291510">out</a></span><br>
<span class="lineno">255</span><span class="op" id="3291597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3291600">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;IP&nbsp;address&nbsp;ip.</span><br>
<span class="lineno"></span><span class="comment" id="3291656">//&nbsp;If&nbsp;the&nbsp;address&nbsp;is&nbsp;an&nbsp;IPv4&nbsp;address,&nbsp;the&nbsp;string&nbsp;representation</span><br>
<span class="lineno"></span><span class="comment" id="3291720">//&nbsp;is&nbsp;dotted&nbsp;decimal&nbsp;(&#34;74.125.19.99&#34;).&nbsp;&nbsp;Otherwise&nbsp;the&nbsp;representation</span><br>
<span class="lineno">260</span><span class="comment" id="3291789">//&nbsp;is&nbsp;IPv6&nbsp;(&#34;2001:4860:0:2001::68&#34;).</span><br>
<span class="lineno"></span><span class="keyword" id="3291826">func</span>&nbsp;<span class="op" id="3291831">(</span><span class="ident" id="3291832">ip</span>&nbsp;<span class="ident" id="3291835"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3291837">)</span>&nbsp;<span class="ident" id="3291839">String</span><span class="op" id="3291845">(</span><span class="op" id="3291846">)</span>&nbsp;<span class="builtintype" id="3291848">string</span>&nbsp;<span class="op" id="3291855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3291858">p</span>&nbsp;<span class="op" id="3291860">:=</span>&nbsp;<span class="ident" id="3291863"><a href="/gostd/net/ip.go.html#3291832">ip</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291868">if</span>&nbsp;<span class="builtinfunc" id="3291871">len</span><span class="op" id="3291874">(</span><span class="ident" id="3291875"><a href="/gostd/net/ip.go.html#3291832">ip</a></span><span class="op" id="3291877">)</span>&nbsp;<span class="op" id="3291879">==</span>&nbsp;<span class="num" id="3291882">0</span>&nbsp;<span class="op" id="3291884">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291888">return</span>&nbsp;<span class="string" id="3291895">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3291904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3291908">//&nbsp;If&nbsp;IPv4,&nbsp;use&nbsp;dotted&nbsp;notation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291942">if</span>&nbsp;<span class="ident" id="3291945">p4</span>&nbsp;<span class="op" id="3291948">:=</span>&nbsp;<span class="ident" id="3291951"><a href="/gostd/net/ip.go.html#3291858">p</a></span><span class="op" id="3291952">.</span><span class="ident" id="3291953"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="3291956">(</span><span class="op" id="3291957">)</span><span class="op" id="3291958">;</span>&nbsp;<span class="builtinfunc" id="3291960">len</span><span class="op" id="3291963">(</span><span class="ident" id="3291964"><a href="/gostd/net/ip.go.html#3291945">p4</a></span><span class="op" id="3291966">)</span>&nbsp;<span class="op" id="3291968">==</span>&nbsp;<span class="ident" id="3291971"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3291979">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3291983">return</span>&nbsp;<span class="ident" id="3291990"><a href="/gostd/net/parse.go.html#3348449">itod</a></span><span class="op" id="3291994">(</span><span class="builtintype" id="3291995">uint</span><span class="op" id="3291999">(</span><span class="ident" id="3292000"><a href="/gostd/net/ip.go.html#3291945">p4</a></span><span class="op" id="3292002">[</span><span class="num" id="3292003">0</span><span class="op" id="3292004">]</span><span class="op" id="3292005">)</span><span class="op" id="3292006">)</span>&nbsp;<span class="op" id="3292008">+</span>&nbsp;<span class="string" id="3292010">&#34;.&#34;</span>&nbsp;<span class="op" id="3292014">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292019"><a href="/gostd/net/parse.go.html#3348449">itod</a></span><span class="op" id="3292023">(</span><span class="builtintype" id="3292024">uint</span><span class="op" id="3292028">(</span><span class="ident" id="3292029"><a href="/gostd/net/ip.go.html#3291945">p4</a></span><span class="op" id="3292031">[</span><span class="num" id="3292032">1</span><span class="op" id="3292033">]</span><span class="op" id="3292034">)</span><span class="op" id="3292035">)</span>&nbsp;<span class="op" id="3292037">+</span>&nbsp;<span class="string" id="3292039">&#34;.&#34;</span>&nbsp;<span class="op" id="3292043">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292048"><a href="/gostd/net/parse.go.html#3348449">itod</a></span><span class="op" id="3292052">(</span><span class="builtintype" id="3292053">uint</span><span class="op" id="3292057">(</span><span class="ident" id="3292058"><a href="/gostd/net/ip.go.html#3291945">p4</a></span><span class="op" id="3292060">[</span><span class="num" id="3292061">2</span><span class="op" id="3292062">]</span><span class="op" id="3292063">)</span><span class="op" id="3292064">)</span>&nbsp;<span class="op" id="3292066">+</span>&nbsp;<span class="string" id="3292068">&#34;.&#34;</span>&nbsp;<span class="op" id="3292072">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292077"><a href="/gostd/net/parse.go.html#3348449">itod</a></span><span class="op" id="3292081">(</span><span class="builtintype" id="3292082">uint</span><span class="op" id="3292086">(</span><span class="ident" id="3292087"><a href="/gostd/net/ip.go.html#3291945">p4</a></span><span class="op" id="3292089">[</span><span class="num" id="3292090">3</span><span class="op" id="3292091">]</span><span class="op" id="3292092">)</span><span class="op" id="3292093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292096">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292099">if</span>&nbsp;<span class="builtinfunc" id="3292102">len</span><span class="op" id="3292105">(</span><span class="ident" id="3292106"><a href="/gostd/net/ip.go.html#3291858">p</a></span><span class="op" id="3292107">)</span>&nbsp;<span class="op" id="3292109">!=</span>&nbsp;<span class="ident" id="3292112"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3292120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292124">return</span>&nbsp;<span class="string" id="3292131">&#34;?&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3292140">//&nbsp;Find&nbsp;longest&nbsp;run&nbsp;of&nbsp;zeros.</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292171">e0</span>&nbsp;<span class="op" id="3292174">:=</span>&nbsp;<span class="op" id="3292177">-</span><span class="num" id="3292178">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292181">e1</span>&nbsp;<span class="op" id="3292184">:=</span>&nbsp;<span class="op" id="3292187">-</span><span class="num" id="3292188">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292191">for</span>&nbsp;<span class="ident" id="3292195">i</span>&nbsp;<span class="op" id="3292197">:=</span>&nbsp;<span class="num" id="3292200">0</span><span class="op" id="3292201">;</span>&nbsp;<span class="ident" id="3292203"><a href="/gostd/net/ip.go.html#3292195">i</a></span>&nbsp;<span class="op" id="3292205">&lt;</span>&nbsp;<span class="ident" id="3292207"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span><span class="op" id="3292214">;</span>&nbsp;<span class="ident" id="3292216"><a href="/gostd/net/ip.go.html#3292195">i</a></span>&nbsp;<span class="op" id="3292218">+=</span>&nbsp;<span class="num" id="3292221">2</span>&nbsp;<span class="op" id="3292223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292227">j</span>&nbsp;<span class="op" id="3292229">:=</span>&nbsp;<span class="ident" id="3292232"><a href="/gostd/net/ip.go.html#3292195">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292236">for</span>&nbsp;<span class="ident" id="3292240"><a href="/gostd/net/ip.go.html#3292227">j</a></span>&nbsp;<span class="op" id="3292242">&lt;</span>&nbsp;<span class="ident" id="3292244"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3292252">&amp;&amp;</span>&nbsp;<span class="ident" id="3292255"><a href="/gostd/net/ip.go.html#3291858">p</a></span><span class="op" id="3292256">[</span><span class="ident" id="3292257"><a href="/gostd/net/ip.go.html#3292227">j</a></span><span class="op" id="3292258">]</span>&nbsp;<span class="op" id="3292260">==</span>&nbsp;<span class="num" id="3292263">0</span>&nbsp;<span class="op" id="3292265">&amp;&amp;</span>&nbsp;<span class="ident" id="3292268"><a href="/gostd/net/ip.go.html#3291858">p</a></span><span class="op" id="3292269">[</span><span class="ident" id="3292270"><a href="/gostd/net/ip.go.html#3292227">j</a></span><span class="op" id="3292271">+</span><span class="num" id="3292272">1</span><span class="op" id="3292273">]</span>&nbsp;<span class="op" id="3292275">==</span>&nbsp;<span class="num" id="3292278">0</span>&nbsp;<span class="op" id="3292280">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292285"><a href="/gostd/net/ip.go.html#3292227">j</a></span>&nbsp;<span class="op" id="3292287">+=</span>&nbsp;<span class="num" id="3292290">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292298">if</span>&nbsp;<span class="ident" id="3292301"><a href="/gostd/net/ip.go.html#3292227">j</a></span>&nbsp;<span class="op" id="3292303">&gt;</span>&nbsp;<span class="ident" id="3292305"><a href="/gostd/net/ip.go.html#3292195">i</a></span>&nbsp;<span class="op" id="3292307">&amp;&amp;</span>&nbsp;<span class="ident" id="3292310"><a href="/gostd/net/ip.go.html#3292227">j</a></span><span class="op" id="3292311">-</span><span class="ident" id="3292312"><a href="/gostd/net/ip.go.html#3292195">i</a></span>&nbsp;<span class="op" id="3292314">&gt;</span>&nbsp;<span class="ident" id="3292316"><a href="/gostd/net/ip.go.html#3292181">e1</a></span><span class="op" id="3292318">-</span><span class="ident" id="3292319"><a href="/gostd/net/ip.go.html#3292171">e0</a></span>&nbsp;<span class="op" id="3292322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292327"><a href="/gostd/net/ip.go.html#3292171">e0</a></span>&nbsp;<span class="op" id="3292330">=</span>&nbsp;<span class="ident" id="3292332"><a href="/gostd/net/ip.go.html#3292195">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292337"><a href="/gostd/net/ip.go.html#3292181">e1</a></span>&nbsp;<span class="op" id="3292340">=</span>&nbsp;<span class="ident" id="3292342"><a href="/gostd/net/ip.go.html#3292227">j</a></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292347"><a href="/gostd/net/ip.go.html#3292195">i</a></span>&nbsp;<span class="op" id="3292349">=</span>&nbsp;<span class="ident" id="3292351"><a href="/gostd/net/ip.go.html#3292227">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3292361">//&nbsp;The&nbsp;symbol&nbsp;&#34;::&#34;&nbsp;MUST&nbsp;NOT&nbsp;be&nbsp;used&nbsp;to&nbsp;shorten&nbsp;just&nbsp;one&nbsp;16&nbsp;bit&nbsp;0&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292434">if</span>&nbsp;<span class="ident" id="3292437"><a href="/gostd/net/ip.go.html#3292181">e1</a></span><span class="op" id="3292439">-</span><span class="ident" id="3292440"><a href="/gostd/net/ip.go.html#3292171">e0</a></span>&nbsp;<span class="op" id="3292443">&lt;=</span>&nbsp;<span class="num" id="3292446">2</span>&nbsp;<span class="op" id="3292448">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292452"><a href="/gostd/net/ip.go.html#3292171">e0</a></span>&nbsp;<span class="op" id="3292455">=</span>&nbsp;<span class="op" id="3292457">-</span><span class="num" id="3292458">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292462"><a href="/gostd/net/ip.go.html#3292181">e1</a></span>&nbsp;<span class="op" id="3292465">=</span>&nbsp;<span class="op" id="3292467">-</span><span class="num" id="3292468">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292475">const</span>&nbsp;<span class="ident" id="3292481">maxLen</span>&nbsp;<span class="op" id="3292488">=</span>&nbsp;<span class="builtinfunc" id="3292490">len</span><span class="op" id="3292493">(</span><span class="string" id="3292494">&#34;ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&#34;</span><span class="op" id="3292535">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292538">b</span>&nbsp;<span class="op" id="3292540">:=</span>&nbsp;<span class="builtinfunc" id="3292543">make</span><span class="op" id="3292547">(</span><span class="op" id="3292548">[</span><span class="op" id="3292549">]</span><span class="builtintype" id="3292550">byte</span><span class="op" id="3292554">,</span>&nbsp;<span class="num" id="3292556">0</span><span class="op" id="3292557">,</span>&nbsp;<span class="ident" id="3292559"><a href="/gostd/net/ip.go.html#3292481">maxLen</a></span><span class="op" id="3292565">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3292569">//&nbsp;Print&nbsp;with&nbsp;possible&nbsp;::&nbsp;in&nbsp;place&nbsp;of&nbsp;run&nbsp;of&nbsp;zeros</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292621">for</span>&nbsp;<span class="ident" id="3292625">i</span>&nbsp;<span class="op" id="3292627">:=</span>&nbsp;<span class="num" id="3292630">0</span><span class="op" id="3292631">;</span>&nbsp;<span class="ident" id="3292633"><a href="/gostd/net/ip.go.html#3292625">i</a></span>&nbsp;<span class="op" id="3292635">&lt;</span>&nbsp;<span class="ident" id="3292637"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span><span class="op" id="3292644">;</span>&nbsp;<span class="ident" id="3292646"><a href="/gostd/net/ip.go.html#3292625">i</a></span>&nbsp;<span class="op" id="3292648">+=</span>&nbsp;<span class="num" id="3292651">2</span>&nbsp;<span class="op" id="3292653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292657">if</span>&nbsp;<span class="ident" id="3292660"><a href="/gostd/net/ip.go.html#3292625">i</a></span>&nbsp;<span class="op" id="3292662">==</span>&nbsp;<span class="ident" id="3292665"><a href="/gostd/net/ip.go.html#3292171">e0</a></span>&nbsp;<span class="op" id="3292668">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292673"><a href="/gostd/net/ip.go.html#3292538">b</a></span>&nbsp;<span class="op" id="3292675">=</span>&nbsp;<span class="builtinfunc" id="3292677">append</span><span class="op" id="3292683">(</span><span class="ident" id="3292684"><a href="/gostd/net/ip.go.html#3292538">b</a></span><span class="op" id="3292685">,</span>&nbsp;<span class="string" id="3292687">&#39;:&#39;</span><span class="op" id="3292690">,</span>&nbsp;<span class="string" id="3292692">&#39;:&#39;</span><span class="op" id="3292695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292700"><a href="/gostd/net/ip.go.html#3292625">i</a></span>&nbsp;<span class="op" id="3292702">=</span>&nbsp;<span class="ident" id="3292704"><a href="/gostd/net/ip.go.html#3292181">e1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292710">if</span>&nbsp;<span class="ident" id="3292713"><a href="/gostd/net/ip.go.html#3292625">i</a></span>&nbsp;<span class="op" id="3292715">&gt;=</span>&nbsp;<span class="ident" id="3292718"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3292726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292732">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292741">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292745">}</span>&nbsp;<span class="keyword" id="3292747">else</span>&nbsp;<span class="keyword" id="3292752">if</span>&nbsp;<span class="ident" id="3292755"><a href="/gostd/net/ip.go.html#3292625">i</a></span>&nbsp;<span class="op" id="3292757">&gt;</span>&nbsp;<span class="num" id="3292759">0</span>&nbsp;<span class="op" id="3292761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292766"><a href="/gostd/net/ip.go.html#3292538">b</a></span>&nbsp;<span class="op" id="3292768">=</span>&nbsp;<span class="builtinfunc" id="3292770">append</span><span class="op" id="3292776">(</span><span class="ident" id="3292777"><a href="/gostd/net/ip.go.html#3292538">b</a></span><span class="op" id="3292778">,</span>&nbsp;<span class="string" id="3292780">&#39;:&#39;</span><span class="op" id="3292783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3292791"><a href="/gostd/net/ip.go.html#3292538">b</a></span>&nbsp;<span class="op" id="3292793">=</span>&nbsp;<span class="ident" id="3292795"><a href="/gostd/net/parse.go.html#3348732">appendHex</a></span><span class="op" id="3292804">(</span><span class="ident" id="3292805"><a href="/gostd/net/ip.go.html#3292538">b</a></span><span class="op" id="3292806">,</span>&nbsp;<span class="op" id="3292808">(</span><span class="builtintype" id="3292809">uint32</span><span class="op" id="3292815">(</span><span class="ident" id="3292816"><a href="/gostd/net/ip.go.html#3291858">p</a></span><span class="op" id="3292817">[</span><span class="ident" id="3292818"><a href="/gostd/net/ip.go.html#3292625">i</a></span><span class="op" id="3292819">]</span><span class="op" id="3292820">)</span><span class="op" id="3292821">&lt;&lt;</span><span class="num" id="3292823">8</span><span class="op" id="3292824">)</span><span class="op" id="3292825">|</span><span class="builtintype" id="3292826">uint32</span><span class="op" id="3292832">(</span><span class="ident" id="3292833"><a href="/gostd/net/ip.go.html#3291858">p</a></span><span class="op" id="3292834">[</span><span class="ident" id="3292835"><a href="/gostd/net/ip.go.html#3292625">i</a></span><span class="op" id="3292836">+</span><span class="num" id="3292837">1</span><span class="op" id="3292838">]</span><span class="op" id="3292839">)</span><span class="op" id="3292840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292843">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292846">return</span>&nbsp;<span class="builtintype" id="3292853">string</span><span class="op" id="3292859">(</span><span class="ident" id="3292860"><a href="/gostd/net/ip.go.html#3292538">b</a></span><span class="op" id="3292861">)</span><br>
<span class="lineno"></span><span class="op" id="3292863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3292866">//&nbsp;ipEmptyString&nbsp;is&nbsp;like&nbsp;ip.String&nbsp;except&nbsp;that&nbsp;it&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3292924">//&nbsp;an&nbsp;empty&nbsp;string&nbsp;when&nbsp;ip&nbsp;is&nbsp;unset.</span><br>
<span class="lineno">320</span><span class="keyword" id="3292961">func</span>&nbsp;<span class="ident" id="3292966">ipEmptyString</span><span class="op" id="3292979">(</span><span class="ident" id="3292980">ip</span>&nbsp;<span class="ident" id="3292983"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3292985">)</span>&nbsp;<span class="builtintype" id="3292987">string</span>&nbsp;<span class="op" id="3292994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3292997">if</span>&nbsp;<span class="builtinfunc" id="3293000">len</span><span class="op" id="3293003">(</span><span class="ident" id="3293004"><a href="/gostd/net/ip.go.html#3292980">ip</a></span><span class="op" id="3293006">)</span>&nbsp;<span class="op" id="3293008">==</span>&nbsp;<span class="num" id="3293011">0</span>&nbsp;<span class="op" id="3293013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293017">return</span>&nbsp;<span class="string" id="3293024">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3293028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293031">return</span>&nbsp;<span class="ident" id="3293038"><a href="/gostd/net/ip.go.html#3292980">ip</a></span><span class="op" id="3293040">.</span><span class="ident" id="3293041"><a href="/gostd/net/ip.go.html#3291839">String</a></span><span class="op" id="3293047">(</span><span class="op" id="3293048">)</span><br>
<span class="lineno">325</span><span class="op" id="3293050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3293053">//&nbsp;MarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextMarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="3293117">//&nbsp;The&nbsp;encoding&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;returned&nbsp;by&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="3293168">func</span>&nbsp;<span class="op" id="3293173">(</span><span class="ident" id="3293174">ip</span>&nbsp;<span class="ident" id="3293177"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3293179">)</span>&nbsp;<span class="ident" id="3293181">MarshalText</span><span class="op" id="3293192">(</span><span class="op" id="3293193">)</span>&nbsp;<span class="op" id="3293195">(</span><span class="op" id="3293196">[</span><span class="op" id="3293197">]</span><span class="builtintype" id="3293198">byte</span><span class="op" id="3293202">,</span>&nbsp;<span class="builtintype" id="3293204">error</span><span class="op" id="3293209">)</span>&nbsp;<span class="op" id="3293211">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293214">if</span>&nbsp;<span class="builtinfunc" id="3293217">len</span><span class="op" id="3293220">(</span><span class="ident" id="3293221"><a href="/gostd/net/ip.go.html#3293174">ip</a></span><span class="op" id="3293223">)</span>&nbsp;<span class="op" id="3293225">==</span>&nbsp;<span class="num" id="3293228">0</span>&nbsp;<span class="op" id="3293230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293234">return</span>&nbsp;<span class="op" id="3293241">[</span><span class="op" id="3293242">]</span><span class="builtintype" id="3293243">byte</span><span class="op" id="3293247">(</span><span class="string" id="3293248">&#34;&#34;</span><span class="op" id="3293250">)</span><span class="op" id="3293251">,</span>&nbsp;<span class="builtintype" id="3293253">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3293258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293261">if</span>&nbsp;<span class="builtinfunc" id="3293264">len</span><span class="op" id="3293267">(</span><span class="ident" id="3293268"><a href="/gostd/net/ip.go.html#3293174">ip</a></span><span class="op" id="3293270">)</span>&nbsp;<span class="op" id="3293272">!=</span>&nbsp;<span class="ident" id="3293275"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3293283">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3293286">len</span><span class="op" id="3293289">(</span><span class="ident" id="3293290"><a href="/gostd/net/ip.go.html#3293174">ip</a></span><span class="op" id="3293292">)</span>&nbsp;<span class="op" id="3293294">!=</span>&nbsp;<span class="ident" id="3293297"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3293305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293309">return</span>&nbsp;<span class="builtintype" id="3293316">nil</span><span class="op" id="3293319">,</span>&nbsp;<span class="ident" id="3293321"><a href="/gostd/net/ip.go.html#3285801">errors</a></span><span class="op" id="3293327">.</span><span class="ident" id="3293328"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="3293331">(</span><span class="string" id="3293332">&#34;invalid&nbsp;IP&nbsp;address&#34;</span><span class="op" id="3293352">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3293355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293358">return</span>&nbsp;<span class="op" id="3293365">[</span><span class="op" id="3293366">]</span><span class="builtintype" id="3293367">byte</span><span class="op" id="3293371">(</span><span class="ident" id="3293372"><a href="/gostd/net/ip.go.html#3293174">ip</a></span><span class="op" id="3293374">.</span><span class="ident" id="3293375"><a href="/gostd/net/ip.go.html#3291839">String</a></span><span class="op" id="3293381">(</span><span class="op" id="3293382">)</span><span class="op" id="3293383">)</span><span class="op" id="3293384">,</span>&nbsp;<span class="builtintype" id="3293386">nil</span><br>
<span class="lineno"></span><span class="op" id="3293390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3293393">//&nbsp;UnmarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextUnmarshaler&nbsp;interface.</span><br>
<span class="lineno">340</span><span class="comment" id="3293461">//&nbsp;The&nbsp;IP&nbsp;address&nbsp;is&nbsp;expected&nbsp;in&nbsp;a&nbsp;form&nbsp;accepted&nbsp;by&nbsp;ParseIP.</span><br>
<span class="lineno"></span><span class="keyword" id="3293522">func</span>&nbsp;<span class="op" id="3293527">(</span><span class="ident" id="3293528">ip</span>&nbsp;<span class="op" id="3293531">*</span><span class="ident" id="3293532"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3293534">)</span>&nbsp;<span class="ident" id="3293536">UnmarshalText</span><span class="op" id="3293549">(</span><span class="ident" id="3293550">text</span>&nbsp;<span class="op" id="3293555">[</span><span class="op" id="3293556">]</span><span class="builtintype" id="3293557">byte</span><span class="op" id="3293561">)</span>&nbsp;<span class="builtintype" id="3293563">error</span>&nbsp;<span class="op" id="3293569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293572">if</span>&nbsp;<span class="builtinfunc" id="3293575">len</span><span class="op" id="3293578">(</span><span class="ident" id="3293579"><a href="/gostd/net/ip.go.html#3293550">text</a></span><span class="op" id="3293583">)</span>&nbsp;<span class="op" id="3293585">==</span>&nbsp;<span class="num" id="3293588">0</span>&nbsp;<span class="op" id="3293590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3293594">*</span><span class="ident" id="3293595"><a href="/gostd/net/ip.go.html#3293528">ip</a></span>&nbsp;<span class="op" id="3293598">=</span>&nbsp;<span class="builtintype" id="3293600">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293606">return</span>&nbsp;<span class="builtintype" id="3293613">nil</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3293618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3293621">s</span>&nbsp;<span class="op" id="3293623">:=</span>&nbsp;<span class="builtintype" id="3293626">string</span><span class="op" id="3293632">(</span><span class="ident" id="3293633"><a href="/gostd/net/ip.go.html#3293550">text</a></span><span class="op" id="3293637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3293640">x</span>&nbsp;<span class="op" id="3293642">:=</span>&nbsp;<span class="ident" id="3293645"><a href="/gostd/net/ip.go.html#3299857">ParseIP</a></span><span class="op" id="3293652">(</span><span class="ident" id="3293653"><a href="/gostd/net/ip.go.html#3293621">s</a></span><span class="op" id="3293654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293657">if</span>&nbsp;<span class="ident" id="3293660"><a href="/gostd/net/ip.go.html#3293640">x</a></span>&nbsp;<span class="op" id="3293662">==</span>&nbsp;<span class="builtintype" id="3293665">nil</span>&nbsp;<span class="op" id="3293669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293673">return</span>&nbsp;<span class="op" id="3293680">&amp;</span><span class="ident" id="3293681"><a href="/gostd/net/ip.go.html#3299470">ParseError</a></span><span class="op" id="3293691">{</span><span class="string" id="3293692">&#34;IP&nbsp;address&#34;</span><span class="op" id="3293704">,</span>&nbsp;<span class="ident" id="3293706"><a href="/gostd/net/ip.go.html#3293621">s</a></span><span class="op" id="3293707">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3293710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3293713">*</span><span class="ident" id="3293714"><a href="/gostd/net/ip.go.html#3293528">ip</a></span>&nbsp;<span class="op" id="3293717">=</span>&nbsp;<span class="ident" id="3293719"><a href="/gostd/net/ip.go.html#3293640">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293722">return</span>&nbsp;<span class="builtintype" id="3293729">nil</span><br>
<span class="lineno"></span><span class="op" id="3293733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="3293736">//&nbsp;Equal&nbsp;returns&nbsp;true&nbsp;if&nbsp;ip&nbsp;and&nbsp;x&nbsp;are&nbsp;the&nbsp;same&nbsp;IP&nbsp;address.</span><br>
<span class="lineno"></span><span class="comment" id="3293795">//&nbsp;An&nbsp;IPv4&nbsp;address&nbsp;and&nbsp;that&nbsp;same&nbsp;address&nbsp;in&nbsp;IPv6&nbsp;form&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3293853">//&nbsp;considered&nbsp;to&nbsp;be&nbsp;equal.</span><br>
<span class="lineno"></span><span class="keyword" id="3293880">func</span>&nbsp;<span class="op" id="3293885">(</span><span class="ident" id="3293886">ip</span>&nbsp;<span class="ident" id="3293889"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3293891">)</span>&nbsp;<span class="ident" id="3293893">Equal</span><span class="op" id="3293898">(</span><span class="ident" id="3293899">x</span>&nbsp;<span class="ident" id="3293901"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3293903">)</span>&nbsp;<span class="builtintype" id="3293905">bool</span>&nbsp;<span class="op" id="3293910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293913">if</span>&nbsp;<span class="builtinfunc" id="3293916">len</span><span class="op" id="3293919">(</span><span class="ident" id="3293920"><a href="/gostd/net/ip.go.html#3293886">ip</a></span><span class="op" id="3293922">)</span>&nbsp;<span class="op" id="3293924">==</span>&nbsp;<span class="builtinfunc" id="3293927">len</span><span class="op" id="3293930">(</span><span class="ident" id="3293931"><a href="/gostd/net/ip.go.html#3293899">x</a></span><span class="op" id="3293932">)</span>&nbsp;<span class="op" id="3293934">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293938">return</span>&nbsp;<span class="ident" id="3293945"><a href="/gostd/net/ip.go.html#3294225">bytesEqual</a></span><span class="op" id="3293955">(</span><span class="ident" id="3293956"><a href="/gostd/net/ip.go.html#3293886">ip</a></span><span class="op" id="3293958">,</span>&nbsp;<span class="ident" id="3293960"><a href="/gostd/net/ip.go.html#3293899">x</a></span><span class="op" id="3293961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3293964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3293967">if</span>&nbsp;<span class="builtinfunc" id="3293970">len</span><span class="op" id="3293973">(</span><span class="ident" id="3293974"><a href="/gostd/net/ip.go.html#3293886">ip</a></span><span class="op" id="3293976">)</span>&nbsp;<span class="op" id="3293978">==</span>&nbsp;<span class="ident" id="3293981"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3293989">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3293992">len</span><span class="op" id="3293995">(</span><span class="ident" id="3293996"><a href="/gostd/net/ip.go.html#3293899">x</a></span><span class="op" id="3293997">)</span>&nbsp;<span class="op" id="3293999">==</span>&nbsp;<span class="ident" id="3294002"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3294010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294014">return</span>&nbsp;<span class="ident" id="3294021"><a href="/gostd/net/ip.go.html#3294225">bytesEqual</a></span><span class="op" id="3294031">(</span><span class="ident" id="3294032"><a href="/gostd/net/ip.go.html#3293899">x</a></span><span class="op" id="3294033">[</span><span class="num" id="3294034">0</span><span class="op" id="3294035">:</span><span class="num" id="3294036">12</span><span class="op" id="3294038">]</span><span class="op" id="3294039">,</span>&nbsp;<span class="ident" id="3294041"><a href="/gostd/net/ip.go.html#3286676">v4InV6Prefix</a></span><span class="op" id="3294053">)</span>&nbsp;<span class="op" id="3294055">&amp;&amp;</span>&nbsp;<span class="ident" id="3294058"><a href="/gostd/net/ip.go.html#3294225">bytesEqual</a></span><span class="op" id="3294068">(</span><span class="ident" id="3294069"><a href="/gostd/net/ip.go.html#3293886">ip</a></span><span class="op" id="3294071">,</span>&nbsp;<span class="ident" id="3294073"><a href="/gostd/net/ip.go.html#3293899">x</a></span><span class="op" id="3294074">[</span><span class="num" id="3294075">12</span><span class="op" id="3294077">:</span><span class="op" id="3294078">]</span><span class="op" id="3294079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3294082">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294085">if</span>&nbsp;<span class="builtinfunc" id="3294088">len</span><span class="op" id="3294091">(</span><span class="ident" id="3294092"><a href="/gostd/net/ip.go.html#3293886">ip</a></span><span class="op" id="3294094">)</span>&nbsp;<span class="op" id="3294096">==</span>&nbsp;<span class="ident" id="3294099"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3294107">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3294110">len</span><span class="op" id="3294113">(</span><span class="ident" id="3294114"><a href="/gostd/net/ip.go.html#3293899">x</a></span><span class="op" id="3294115">)</span>&nbsp;<span class="op" id="3294117">==</span>&nbsp;<span class="ident" id="3294120"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3294128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294132">return</span>&nbsp;<span class="ident" id="3294139"><a href="/gostd/net/ip.go.html#3294225">bytesEqual</a></span><span class="op" id="3294149">(</span><span class="ident" id="3294150"><a href="/gostd/net/ip.go.html#3293886">ip</a></span><span class="op" id="3294152">[</span><span class="num" id="3294153">0</span><span class="op" id="3294154">:</span><span class="num" id="3294155">12</span><span class="op" id="3294157">]</span><span class="op" id="3294158">,</span>&nbsp;<span class="ident" id="3294160"><a href="/gostd/net/ip.go.html#3286676">v4InV6Prefix</a></span><span class="op" id="3294172">)</span>&nbsp;<span class="op" id="3294174">&amp;&amp;</span>&nbsp;<span class="ident" id="3294177"><a href="/gostd/net/ip.go.html#3294225">bytesEqual</a></span><span class="op" id="3294187">(</span><span class="ident" id="3294188"><a href="/gostd/net/ip.go.html#3293886">ip</a></span><span class="op" id="3294190">[</span><span class="num" id="3294191">12</span><span class="op" id="3294193">:</span><span class="op" id="3294194">]</span><span class="op" id="3294195">,</span>&nbsp;<span class="ident" id="3294197"><a href="/gostd/net/ip.go.html#3293899">x</a></span><span class="op" id="3294198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3294201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294204">return</span>&nbsp;<span class="builtintype" id="3294211">false</span><br>
<span class="lineno"></span><span class="op" id="3294217">}</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span><span class="keyword" id="3294220">func</span>&nbsp;<span class="ident" id="3294225">bytesEqual</span><span class="op" id="3294235">(</span><span class="ident" id="3294236">x</span><span class="op" id="3294237">,</span>&nbsp;<span class="ident" id="3294239">y</span>&nbsp;<span class="op" id="3294241">[</span><span class="op" id="3294242">]</span><span class="builtintype" id="3294243">byte</span><span class="op" id="3294247">)</span>&nbsp;<span class="builtintype" id="3294249">bool</span>&nbsp;<span class="op" id="3294254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294257">if</span>&nbsp;<span class="builtinfunc" id="3294260">len</span><span class="op" id="3294263">(</span><span class="ident" id="3294264"><a href="/gostd/net/ip.go.html#3294236">x</a></span><span class="op" id="3294265">)</span>&nbsp;<span class="op" id="3294267">!=</span>&nbsp;<span class="builtinfunc" id="3294270">len</span><span class="op" id="3294273">(</span><span class="ident" id="3294274"><a href="/gostd/net/ip.go.html#3294239">y</a></span><span class="op" id="3294275">)</span>&nbsp;<span class="op" id="3294277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294281">return</span>&nbsp;<span class="builtintype" id="3294288">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3294295">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294298">for</span>&nbsp;<span class="ident" id="3294302">i</span><span class="op" id="3294303">,</span>&nbsp;<span class="ident" id="3294305">b</span>&nbsp;<span class="op" id="3294307">:=</span>&nbsp;<span class="keyword" id="3294310">range</span>&nbsp;<span class="ident" id="3294316"><a href="/gostd/net/ip.go.html#3294236">x</a></span>&nbsp;<span class="op" id="3294318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294322">if</span>&nbsp;<span class="ident" id="3294325"><a href="/gostd/net/ip.go.html#3294239">y</a></span><span class="op" id="3294326">[</span><span class="ident" id="3294327"><a href="/gostd/net/ip.go.html#3294302">i</a></span><span class="op" id="3294328">]</span>&nbsp;<span class="op" id="3294330">!=</span>&nbsp;<span class="ident" id="3294333"><a href="/gostd/net/ip.go.html#3294305">b</a></span>&nbsp;<span class="op" id="3294335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294340">return</span>&nbsp;<span class="builtintype" id="3294347">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3294355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3294358">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294361">return</span>&nbsp;<span class="builtintype" id="3294368">true</span><br>
<span class="lineno"></span><span class="op" id="3294373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3294376">//&nbsp;If&nbsp;mask&nbsp;is&nbsp;a&nbsp;sequence&nbsp;of&nbsp;1&nbsp;bits&nbsp;followed&nbsp;by&nbsp;0&nbsp;bits,</span><br>
<span class="lineno"></span><span class="comment" id="3294431">//&nbsp;return&nbsp;the&nbsp;number&nbsp;of&nbsp;1&nbsp;bits.</span><br>
<span class="lineno">385</span><span class="keyword" id="3294463">func</span>&nbsp;<span class="ident" id="3294468">simpleMaskLength</span><span class="op" id="3294484">(</span><span class="ident" id="3294485">mask</span>&nbsp;<span class="ident" id="3294490"><a href="/gostd/net/ip.go.html#3286319">IPMask</a></span><span class="op" id="3294496">)</span>&nbsp;<span class="builtintype" id="3294498">int</span>&nbsp;<span class="op" id="3294502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294505">var</span>&nbsp;<span class="ident" id="3294509">n</span>&nbsp;<span class="builtintype" id="3294511">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294516">for</span>&nbsp;<span class="ident" id="3294520">i</span><span class="op" id="3294521">,</span>&nbsp;<span class="ident" id="3294523">v</span>&nbsp;<span class="op" id="3294525">:=</span>&nbsp;<span class="keyword" id="3294528">range</span>&nbsp;<span class="ident" id="3294534"><a href="/gostd/net/ip.go.html#3294485">mask</a></span>&nbsp;<span class="op" id="3294539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294543">if</span>&nbsp;<span class="ident" id="3294546"><a href="/gostd/net/ip.go.html#3294523">v</a></span>&nbsp;<span class="op" id="3294548">==</span>&nbsp;<span class="num" id="3294551">0xff</span>&nbsp;<span class="op" id="3294556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3294561"><a href="/gostd/net/ip.go.html#3294509">n</a></span>&nbsp;<span class="op" id="3294563">+=</span>&nbsp;<span class="num" id="3294566">8</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294571">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3294582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3294586">//&nbsp;found&nbsp;non-ff&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3294609">//&nbsp;count&nbsp;1&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294627">for</span>&nbsp;<span class="ident" id="3294631"><a href="/gostd/net/ip.go.html#3294523">v</a></span><span class="op" id="3294632">&amp;</span><span class="num" id="3294633">0x80</span>&nbsp;<span class="op" id="3294638">!=</span>&nbsp;<span class="num" id="3294641">0</span>&nbsp;<span class="op" id="3294643">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3294648"><a href="/gostd/net/ip.go.html#3294509">n</a></span><span class="op" id="3294649">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3294655"><a href="/gostd/net/ip.go.html#3294523">v</a></span>&nbsp;<span class="op" id="3294657">&lt;&lt;=</span>&nbsp;<span class="num" id="3294661">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3294665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3294669">//&nbsp;rest&nbsp;must&nbsp;be&nbsp;0&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294694">if</span>&nbsp;<span class="ident" id="3294697"><a href="/gostd/net/ip.go.html#3294523">v</a></span>&nbsp;<span class="op" id="3294699">!=</span>&nbsp;<span class="num" id="3294702">0</span>&nbsp;<span class="op" id="3294704">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294709">return</span>&nbsp;<span class="op" id="3294716">-</span><span class="num" id="3294717">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3294721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294725">for</span>&nbsp;<span class="ident" id="3294729"><a href="/gostd/net/ip.go.html#3294520">i</a></span><span class="op" id="3294730">++</span><span class="op" id="3294732">;</span>&nbsp;<span class="ident" id="3294734"><a href="/gostd/net/ip.go.html#3294520">i</a></span>&nbsp;<span class="op" id="3294736">&lt;</span>&nbsp;<span class="builtinfunc" id="3294738">len</span><span class="op" id="3294741">(</span><span class="ident" id="3294742"><a href="/gostd/net/ip.go.html#3294485">mask</a></span><span class="op" id="3294746">)</span><span class="op" id="3294747">;</span>&nbsp;<span class="ident" id="3294749"><a href="/gostd/net/ip.go.html#3294520">i</a></span><span class="op" id="3294750">++</span>&nbsp;<span class="op" id="3294753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294758">if</span>&nbsp;<span class="ident" id="3294761"><a href="/gostd/net/ip.go.html#3294485">mask</a></span><span class="op" id="3294765">[</span><span class="ident" id="3294766"><a href="/gostd/net/ip.go.html#3294520">i</a></span><span class="op" id="3294767">]</span>&nbsp;<span class="op" id="3294769">!=</span>&nbsp;<span class="num" id="3294772">0</span>&nbsp;<span class="op" id="3294774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294780">return</span>&nbsp;<span class="op" id="3294787">-</span><span class="num" id="3294788">1</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3294793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3294797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294801">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3294808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3294811">return</span>&nbsp;<span class="ident" id="3294818"><a href="/gostd/net/ip.go.html#3294509">n</a></span><br>
<span class="lineno">410</span><span class="op" id="3294820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3294823">//&nbsp;Size&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;leading&nbsp;ones&nbsp;and&nbsp;total&nbsp;bits&nbsp;in&nbsp;the&nbsp;mask.</span><br>
<span class="lineno"></span><span class="comment" id="3294894">//&nbsp;If&nbsp;the&nbsp;mask&nbsp;is&nbsp;not&nbsp;in&nbsp;the&nbsp;canonical&nbsp;form--ones&nbsp;followed&nbsp;by&nbsp;zeros--then</span><br>
<span class="lineno"></span><span class="comment" id="3294968">//&nbsp;Size&nbsp;returns&nbsp;0,&nbsp;0.</span><br>
<span class="lineno">415</span><span class="keyword" id="3294990">func</span>&nbsp;<span class="op" id="3294995">(</span><span class="ident" id="3294996">m</span>&nbsp;<span class="ident" id="3294998"><a href="/gostd/net/ip.go.html#3286319">IPMask</a></span><span class="op" id="3295004">)</span>&nbsp;<span class="ident" id="3295006">Size</span><span class="op" id="3295010">(</span><span class="op" id="3295011">)</span>&nbsp;<span class="op" id="3295013">(</span><span class="ident" id="3295014">ones</span><span class="op" id="3295018">,</span>&nbsp;<span class="ident" id="3295020">bits</span>&nbsp;<span class="builtintype" id="3295025">int</span><span class="op" id="3295028">)</span>&nbsp;<span class="op" id="3295030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3295033"><a href="/gostd/net/ip.go.html#3295014">ones</a></span><span class="op" id="3295037">,</span>&nbsp;<span class="ident" id="3295039"><a href="/gostd/net/ip.go.html#3295020">bits</a></span>&nbsp;<span class="op" id="3295044">=</span>&nbsp;<span class="ident" id="3295046"><a href="/gostd/net/ip.go.html#3294468">simpleMaskLength</a></span><span class="op" id="3295062">(</span><span class="ident" id="3295063"><a href="/gostd/net/ip.go.html#3294996">m</a></span><span class="op" id="3295064">)</span><span class="op" id="3295065">,</span>&nbsp;<span class="builtinfunc" id="3295067">len</span><span class="op" id="3295070">(</span><span class="ident" id="3295071"><a href="/gostd/net/ip.go.html#3294996">m</a></span><span class="op" id="3295072">)</span><span class="op" id="3295073">*</span><span class="num" id="3295074">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295077">if</span>&nbsp;<span class="ident" id="3295080"><a href="/gostd/net/ip.go.html#3295014">ones</a></span>&nbsp;<span class="op" id="3295085">==</span>&nbsp;<span class="op" id="3295088">-</span><span class="num" id="3295089">1</span>&nbsp;<span class="op" id="3295091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295095">return</span>&nbsp;<span class="num" id="3295102">0</span><span class="op" id="3295103">,</span>&nbsp;<span class="num" id="3295105">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3295108">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295111">return</span><br>
<span class="lineno"></span><span class="op" id="3295118">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3295121">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;hexadecimal&nbsp;form&nbsp;of&nbsp;m,&nbsp;with&nbsp;no&nbsp;punctuation.</span><br>
<span class="lineno"></span><span class="keyword" id="3295187">func</span>&nbsp;<span class="op" id="3295192">(</span><span class="ident" id="3295193">m</span>&nbsp;<span class="ident" id="3295195"><a href="/gostd/net/ip.go.html#3286319">IPMask</a></span><span class="op" id="3295201">)</span>&nbsp;<span class="ident" id="3295203">String</span><span class="op" id="3295209">(</span><span class="op" id="3295210">)</span>&nbsp;<span class="builtintype" id="3295212">string</span>&nbsp;<span class="op" id="3295219">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295222">if</span>&nbsp;<span class="builtinfunc" id="3295225">len</span><span class="op" id="3295228">(</span><span class="ident" id="3295229"><a href="/gostd/net/ip.go.html#3295193">m</a></span><span class="op" id="3295230">)</span>&nbsp;<span class="op" id="3295232">==</span>&nbsp;<span class="num" id="3295235">0</span>&nbsp;<span class="op" id="3295237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295241">return</span>&nbsp;<span class="string" id="3295248">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3295257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3295260">buf</span>&nbsp;<span class="op" id="3295264">:=</span>&nbsp;<span class="builtinfunc" id="3295267">make</span><span class="op" id="3295271">(</span><span class="op" id="3295272">[</span><span class="op" id="3295273">]</span><span class="builtintype" id="3295274">byte</span><span class="op" id="3295278">,</span>&nbsp;<span class="builtinfunc" id="3295280">len</span><span class="op" id="3295283">(</span><span class="ident" id="3295284"><a href="/gostd/net/ip.go.html#3295193">m</a></span><span class="op" id="3295285">)</span><span class="op" id="3295286">*</span><span class="num" id="3295287">2</span><span class="op" id="3295288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295291">for</span>&nbsp;<span class="ident" id="3295295">i</span><span class="op" id="3295296">,</span>&nbsp;<span class="ident" id="3295298">b</span>&nbsp;<span class="op" id="3295300">:=</span>&nbsp;<span class="keyword" id="3295303">range</span>&nbsp;<span class="ident" id="3295309"><a href="/gostd/net/ip.go.html#3295193">m</a></span>&nbsp;<span class="op" id="3295311">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3295315"><a href="/gostd/net/ip.go.html#3295260">buf</a></span><span class="op" id="3295318">[</span><span class="ident" id="3295319"><a href="/gostd/net/ip.go.html#3295295">i</a></span><span class="op" id="3295320">*</span><span class="num" id="3295321">2</span><span class="op" id="3295322">]</span><span class="op" id="3295323">,</span>&nbsp;<span class="ident" id="3295325"><a href="/gostd/net/ip.go.html#3295260">buf</a></span><span class="op" id="3295328">[</span><span class="ident" id="3295329"><a href="/gostd/net/ip.go.html#3295295">i</a></span><span class="op" id="3295330">*</span><span class="num" id="3295331">2</span><span class="op" id="3295332">+</span><span class="num" id="3295333">1</span><span class="op" id="3295334">]</span>&nbsp;<span class="op" id="3295336">=</span>&nbsp;<span class="ident" id="3295338"><a href="/gostd/net/mac.go.html#3331450">hexDigit</a></span><span class="op" id="3295346">[</span><span class="ident" id="3295347"><a href="/gostd/net/ip.go.html#3295298">b</a></span><span class="op" id="3295348">&gt;&gt;</span><span class="num" id="3295350">4</span><span class="op" id="3295351">]</span><span class="op" id="3295352">,</span>&nbsp;<span class="ident" id="3295354"><a href="/gostd/net/mac.go.html#3331450">hexDigit</a></span><span class="op" id="3295362">[</span><span class="ident" id="3295363"><a href="/gostd/net/ip.go.html#3295298">b</a></span><span class="op" id="3295364">&amp;</span><span class="num" id="3295365">0xf</span><span class="op" id="3295368">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3295371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295374">return</span>&nbsp;<span class="builtintype" id="3295381">string</span><span class="op" id="3295387">(</span><span class="ident" id="3295388"><a href="/gostd/net/ip.go.html#3295260">buf</a></span><span class="op" id="3295391">)</span><br>
<span class="lineno"></span><span class="op" id="3295393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="3295396">func</span>&nbsp;<span class="ident" id="3295401">networkNumberAndMask</span><span class="op" id="3295421">(</span><span class="ident" id="3295422">n</span>&nbsp;<span class="op" id="3295424">*</span><span class="ident" id="3295425"><a href="/gostd/net/ip.go.html#3286377">IPNet</a></span><span class="op" id="3295430">)</span>&nbsp;<span class="op" id="3295432">(</span><span class="ident" id="3295433">ip</span>&nbsp;<span class="ident" id="3295436"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3295438">,</span>&nbsp;<span class="ident" id="3295440">m</span>&nbsp;<span class="ident" id="3295442"><a href="/gostd/net/ip.go.html#3286319">IPMask</a></span><span class="op" id="3295448">)</span>&nbsp;<span class="op" id="3295450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295453">if</span>&nbsp;<span class="ident" id="3295456"><a href="/gostd/net/ip.go.html#3295433">ip</a></span>&nbsp;<span class="op" id="3295459">=</span>&nbsp;<span class="ident" id="3295461"><a href="/gostd/net/ip.go.html#3295422">n</a></span><span class="op" id="3295462">.</span><span class="ident" id="3295463"><a href="/gostd/net/ip.go.html#3286393">IP</a></span><span class="op" id="3295465">.</span><span class="ident" id="3295466"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="3295469">(</span><span class="op" id="3295470">)</span><span class="op" id="3295471">;</span>&nbsp;<span class="ident" id="3295473"><a href="/gostd/net/ip.go.html#3295433">ip</a></span>&nbsp;<span class="op" id="3295476">==</span>&nbsp;<span class="builtintype" id="3295479">nil</span>&nbsp;<span class="op" id="3295483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3295487"><a href="/gostd/net/ip.go.html#3295433">ip</a></span>&nbsp;<span class="op" id="3295490">=</span>&nbsp;<span class="ident" id="3295492"><a href="/gostd/net/ip.go.html#3295422">n</a></span><span class="op" id="3295493">.</span><span class="ident" id="3295494"><a href="/gostd/net/ip.go.html#3286393">IP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295499">if</span>&nbsp;<span class="builtinfunc" id="3295502">len</span><span class="op" id="3295505">(</span><span class="ident" id="3295506"><a href="/gostd/net/ip.go.html#3295433">ip</a></span><span class="op" id="3295508">)</span>&nbsp;<span class="op" id="3295510">!=</span>&nbsp;<span class="ident" id="3295513"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3295521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295526">return</span>&nbsp;<span class="builtintype" id="3295533">nil</span><span class="op" id="3295536">,</span>&nbsp;<span class="builtintype" id="3295538">nil</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3295544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3295547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3295550"><a href="/gostd/net/ip.go.html#3295440">m</a></span>&nbsp;<span class="op" id="3295552">=</span>&nbsp;<span class="ident" id="3295554"><a href="/gostd/net/ip.go.html#3295422">n</a></span><span class="op" id="3295555">.</span><span class="ident" id="3295556"><a href="/gostd/net/ip.go.html#3286424">Mask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295562">switch</span>&nbsp;<span class="builtinfunc" id="3295569">len</span><span class="op" id="3295572">(</span><span class="ident" id="3295573"><a href="/gostd/net/ip.go.html#3295440">m</a></span><span class="op" id="3295574">)</span>&nbsp;<span class="op" id="3295576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295579">case</span>&nbsp;<span class="ident" id="3295584"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span><span class="op" id="3295591">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295595">if</span>&nbsp;<span class="builtinfunc" id="3295598">len</span><span class="op" id="3295601">(</span><span class="ident" id="3295602"><a href="/gostd/net/ip.go.html#3295433">ip</a></span><span class="op" id="3295604">)</span>&nbsp;<span class="op" id="3295606">!=</span>&nbsp;<span class="ident" id="3295609"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3295617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295622">return</span>&nbsp;<span class="builtintype" id="3295629">nil</span><span class="op" id="3295632">,</span>&nbsp;<span class="builtintype" id="3295634">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3295640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295643">case</span>&nbsp;<span class="ident" id="3295648"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span><span class="op" id="3295655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295659">if</span>&nbsp;<span class="builtinfunc" id="3295662">len</span><span class="op" id="3295665">(</span><span class="ident" id="3295666"><a href="/gostd/net/ip.go.html#3295433">ip</a></span><span class="op" id="3295668">)</span>&nbsp;<span class="op" id="3295670">==</span>&nbsp;<span class="ident" id="3295673"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3295681">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3295686"><a href="/gostd/net/ip.go.html#3295440">m</a></span>&nbsp;<span class="op" id="3295688">=</span>&nbsp;<span class="ident" id="3295690"><a href="/gostd/net/ip.go.html#3295440">m</a></span><span class="op" id="3295691">[</span><span class="num" id="3295692">12</span><span class="op" id="3295694">:</span><span class="op" id="3295695">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3295699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295702">default</span><span class="op" id="3295709">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295713">return</span>&nbsp;<span class="builtintype" id="3295720">nil</span><span class="op" id="3295723">,</span>&nbsp;<span class="builtintype" id="3295725">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3295730">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295733">return</span><br>
<span class="lineno"></span><span class="op" id="3295740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3295743">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;the&nbsp;network&nbsp;includes&nbsp;ip.</span><br>
<span class="lineno"></span><span class="keyword" id="3295796">func</span>&nbsp;<span class="op" id="3295801">(</span><span class="ident" id="3295802">n</span>&nbsp;<span class="op" id="3295804">*</span><span class="ident" id="3295805"><a href="/gostd/net/ip.go.html#3286377">IPNet</a></span><span class="op" id="3295810">)</span>&nbsp;<span class="ident" id="3295812">Contains</span><span class="op" id="3295820">(</span><span class="ident" id="3295821">ip</span>&nbsp;<span class="ident" id="3295824"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3295826">)</span>&nbsp;<span class="builtintype" id="3295828">bool</span>&nbsp;<span class="op" id="3295833">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3295836">nn</span><span class="op" id="3295838">,</span>&nbsp;<span class="ident" id="3295840">m</span>&nbsp;<span class="op" id="3295842">:=</span>&nbsp;<span class="ident" id="3295845"><a href="/gostd/net/ip.go.html#3295401">networkNumberAndMask</a></span><span class="op" id="3295865">(</span><span class="ident" id="3295866"><a href="/gostd/net/ip.go.html#3295802">n</a></span><span class="op" id="3295867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295870">if</span>&nbsp;<span class="ident" id="3295873">x</span>&nbsp;<span class="op" id="3295875">:=</span>&nbsp;<span class="ident" id="3295878"><a href="/gostd/net/ip.go.html#3295821">ip</a></span><span class="op" id="3295880">.</span><span class="ident" id="3295881"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="3295884">(</span><span class="op" id="3295885">)</span><span class="op" id="3295886">;</span>&nbsp;<span class="ident" id="3295888"><a href="/gostd/net/ip.go.html#3295873">x</a></span>&nbsp;<span class="op" id="3295890">!=</span>&nbsp;<span class="builtintype" id="3295893">nil</span>&nbsp;<span class="op" id="3295897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3295901"><a href="/gostd/net/ip.go.html#3295821">ip</a></span>&nbsp;<span class="op" id="3295904">=</span>&nbsp;<span class="ident" id="3295906"><a href="/gostd/net/ip.go.html#3295873">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3295909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3295912">l</span>&nbsp;<span class="op" id="3295914">:=</span>&nbsp;<span class="builtinfunc" id="3295917">len</span><span class="op" id="3295920">(</span><span class="ident" id="3295921"><a href="/gostd/net/ip.go.html#3295821">ip</a></span><span class="op" id="3295923">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295926">if</span>&nbsp;<span class="ident" id="3295929"><a href="/gostd/net/ip.go.html#3295912">l</a></span>&nbsp;<span class="op" id="3295931">!=</span>&nbsp;<span class="builtinfunc" id="3295934">len</span><span class="op" id="3295937">(</span><span class="ident" id="3295938"><a href="/gostd/net/ip.go.html#3295836">nn</a></span><span class="op" id="3295940">)</span>&nbsp;<span class="op" id="3295942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295946">return</span>&nbsp;<span class="builtintype" id="3295953">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3295960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295963">for</span>&nbsp;<span class="ident" id="3295967">i</span>&nbsp;<span class="op" id="3295969">:=</span>&nbsp;<span class="num" id="3295972">0</span><span class="op" id="3295973">;</span>&nbsp;<span class="ident" id="3295975"><a href="/gostd/net/ip.go.html#3295967">i</a></span>&nbsp;<span class="op" id="3295977">&lt;</span>&nbsp;<span class="ident" id="3295979"><a href="/gostd/net/ip.go.html#3295912">l</a></span><span class="op" id="3295980">;</span>&nbsp;<span class="ident" id="3295982"><a href="/gostd/net/ip.go.html#3295967">i</a></span><span class="op" id="3295983">++</span>&nbsp;<span class="op" id="3295986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3295990">if</span>&nbsp;<span class="ident" id="3295993"><a href="/gostd/net/ip.go.html#3295836">nn</a></span><span class="op" id="3295995">[</span><span class="ident" id="3295996"><a href="/gostd/net/ip.go.html#3295967">i</a></span><span class="op" id="3295997">]</span><span class="op" id="3295998">&amp;</span><span class="ident" id="3295999"><a href="/gostd/net/ip.go.html#3295840">m</a></span><span class="op" id="3296000">[</span><span class="ident" id="3296001"><a href="/gostd/net/ip.go.html#3295967">i</a></span><span class="op" id="3296002">]</span>&nbsp;<span class="op" id="3296004">!=</span>&nbsp;<span class="ident" id="3296007"><a href="/gostd/net/ip.go.html#3295821">ip</a></span><span class="op" id="3296009">[</span><span class="ident" id="3296010"><a href="/gostd/net/ip.go.html#3295967">i</a></span><span class="op" id="3296011">]</span><span class="op" id="3296012">&amp;</span><span class="ident" id="3296013"><a href="/gostd/net/ip.go.html#3295840">m</a></span><span class="op" id="3296014">[</span><span class="ident" id="3296015"><a href="/gostd/net/ip.go.html#3295967">i</a></span><span class="op" id="3296016">]</span>&nbsp;<span class="op" id="3296018">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296023">return</span>&nbsp;<span class="builtintype" id="3296030">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3296038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3296041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296044">return</span>&nbsp;<span class="builtintype" id="3296051">true</span><br>
<span class="lineno"></span><span class="op" id="3296056">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span><span class="comment" id="3296059">//&nbsp;Network&nbsp;returns&nbsp;the&nbsp;address&#39;s&nbsp;network&nbsp;name,&nbsp;&#34;ip+net&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3296116">func</span>&nbsp;<span class="op" id="3296121">(</span><span class="ident" id="3296122">n</span>&nbsp;<span class="op" id="3296124">*</span><span class="ident" id="3296125"><a href="/gostd/net/ip.go.html#3286377">IPNet</a></span><span class="op" id="3296130">)</span>&nbsp;<span class="ident" id="3296132">Network</span><span class="op" id="3296139">(</span><span class="op" id="3296140">)</span>&nbsp;<span class="builtintype" id="3296142">string</span>&nbsp;<span class="op" id="3296149">{</span>&nbsp;<span class="keyword" id="3296151">return</span>&nbsp;<span class="string" id="3296158">&#34;ip+net&#34;</span>&nbsp;<span class="op" id="3296167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3296170">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;CIDR&nbsp;notation&nbsp;of&nbsp;n&nbsp;like&nbsp;&#34;192.168.100.1/24&#34;</span><br>
<span class="lineno">480</span><span class="comment" id="3296235">//&nbsp;or&nbsp;&#34;2001:DB8::/48&#34;&nbsp;as&nbsp;defined&nbsp;in&nbsp;RFC&nbsp;4632&nbsp;and&nbsp;RFC&nbsp;4291.</span><br>
<span class="lineno"></span><span class="comment" id="3296294">//&nbsp;If&nbsp;the&nbsp;mask&nbsp;is&nbsp;not&nbsp;in&nbsp;the&nbsp;canonical&nbsp;form,&nbsp;it&nbsp;returns&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3296354">//&nbsp;string&nbsp;which&nbsp;consists&nbsp;of&nbsp;an&nbsp;IP&nbsp;address,&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash</span><br>
<span class="lineno"></span><span class="comment" id="3296417">//&nbsp;character&nbsp;and&nbsp;a&nbsp;mask&nbsp;expressed&nbsp;as&nbsp;hexadecimal&nbsp;form&nbsp;with&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="3296479">//&nbsp;punctuation&nbsp;like&nbsp;&#34;192.168.100.1/c000ff00&#34;.</span><br>
<span class="lineno">485</span><span class="keyword" id="3296525">func</span>&nbsp;<span class="op" id="3296530">(</span><span class="ident" id="3296531">n</span>&nbsp;<span class="op" id="3296533">*</span><span class="ident" id="3296534"><a href="/gostd/net/ip.go.html#3286377">IPNet</a></span><span class="op" id="3296539">)</span>&nbsp;<span class="ident" id="3296541">String</span><span class="op" id="3296547">(</span><span class="op" id="3296548">)</span>&nbsp;<span class="builtintype" id="3296550">string</span>&nbsp;<span class="op" id="3296557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3296560">nn</span><span class="op" id="3296562">,</span>&nbsp;<span class="ident" id="3296564">m</span>&nbsp;<span class="op" id="3296566">:=</span>&nbsp;<span class="ident" id="3296569"><a href="/gostd/net/ip.go.html#3295401">networkNumberAndMask</a></span><span class="op" id="3296589">(</span><span class="ident" id="3296590"><a href="/gostd/net/ip.go.html#3296531">n</a></span><span class="op" id="3296591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296594">if</span>&nbsp;<span class="ident" id="3296597"><a href="/gostd/net/ip.go.html#3296560">nn</a></span>&nbsp;<span class="op" id="3296600">==</span>&nbsp;<span class="builtintype" id="3296603">nil</span>&nbsp;<span class="op" id="3296607">||</span>&nbsp;<span class="ident" id="3296610"><a href="/gostd/net/ip.go.html#3296564">m</a></span>&nbsp;<span class="op" id="3296612">==</span>&nbsp;<span class="builtintype" id="3296615">nil</span>&nbsp;<span class="op" id="3296619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296623">return</span>&nbsp;<span class="string" id="3296630">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3296639">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3296642">l</span>&nbsp;<span class="op" id="3296644">:=</span>&nbsp;<span class="ident" id="3296647"><a href="/gostd/net/ip.go.html#3294468">simpleMaskLength</a></span><span class="op" id="3296663">(</span><span class="ident" id="3296664"><a href="/gostd/net/ip.go.html#3296564">m</a></span><span class="op" id="3296665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296668">if</span>&nbsp;<span class="ident" id="3296671"><a href="/gostd/net/ip.go.html#3296642">l</a></span>&nbsp;<span class="op" id="3296673">==</span>&nbsp;<span class="op" id="3296676">-</span><span class="num" id="3296677">1</span>&nbsp;<span class="op" id="3296679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296683">return</span>&nbsp;<span class="ident" id="3296690"><a href="/gostd/net/ip.go.html#3296560">nn</a></span><span class="op" id="3296692">.</span><span class="ident" id="3296693"><a href="/gostd/net/ip.go.html#3291839">String</a></span><span class="op" id="3296699">(</span><span class="op" id="3296700">)</span>&nbsp;<span class="op" id="3296702">+</span>&nbsp;<span class="string" id="3296704">&#34;/&#34;</span>&nbsp;<span class="op" id="3296708">+</span>&nbsp;<span class="ident" id="3296710"><a href="/gostd/net/ip.go.html#3296564">m</a></span><span class="op" id="3296711">.</span><span class="ident" id="3296712"><a href="/gostd/net/ip.go.html#3295203">String</a></span><span class="op" id="3296718">(</span><span class="op" id="3296719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3296722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296725">return</span>&nbsp;<span class="ident" id="3296732"><a href="/gostd/net/ip.go.html#3296560">nn</a></span><span class="op" id="3296734">.</span><span class="ident" id="3296735"><a href="/gostd/net/ip.go.html#3291839">String</a></span><span class="op" id="3296741">(</span><span class="op" id="3296742">)</span>&nbsp;<span class="op" id="3296744">+</span>&nbsp;<span class="string" id="3296746">&#34;/&#34;</span>&nbsp;<span class="op" id="3296750">+</span>&nbsp;<span class="ident" id="3296752"><a href="/gostd/net/parse.go.html#3348449">itod</a></span><span class="op" id="3296756">(</span><span class="builtintype" id="3296757">uint</span><span class="op" id="3296761">(</span><span class="ident" id="3296762"><a href="/gostd/net/ip.go.html#3296642">l</a></span><span class="op" id="3296763">)</span><span class="op" id="3296764">)</span><br>
<span class="lineno">495</span><span class="op" id="3296766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3296769">//&nbsp;Parse&nbsp;IPv4&nbsp;address&nbsp;(d.d.d.d).</span><br>
<span class="lineno"></span><span class="keyword" id="3296802">func</span>&nbsp;<span class="ident" id="3296807">parseIPv4</span><span class="op" id="3296816">(</span><span class="ident" id="3296817">s</span>&nbsp;<span class="builtintype" id="3296819">string</span><span class="op" id="3296825">)</span>&nbsp;<span class="ident" id="3296827"><a href="/gostd/net/ip.go.html#3286271">IP</a></span>&nbsp;<span class="op" id="3296830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296833">var</span>&nbsp;<span class="ident" id="3296837">p</span>&nbsp;<span class="op" id="3296839">[</span><span class="ident" id="3296840"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span><span class="op" id="3296847">]</span><span class="builtintype" id="3296848">byte</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3296854">i</span>&nbsp;<span class="op" id="3296856">:=</span>&nbsp;<span class="num" id="3296859">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296862">for</span>&nbsp;<span class="ident" id="3296866">j</span>&nbsp;<span class="op" id="3296868">:=</span>&nbsp;<span class="num" id="3296871">0</span><span class="op" id="3296872">;</span>&nbsp;<span class="ident" id="3296874"><a href="/gostd/net/ip.go.html#3296866">j</a></span>&nbsp;<span class="op" id="3296876">&lt;</span>&nbsp;<span class="ident" id="3296878"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span><span class="op" id="3296885">;</span>&nbsp;<span class="ident" id="3296887"><a href="/gostd/net/ip.go.html#3296866">j</a></span><span class="op" id="3296888">++</span>&nbsp;<span class="op" id="3296891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296895">if</span>&nbsp;<span class="ident" id="3296898"><a href="/gostd/net/ip.go.html#3296854">i</a></span>&nbsp;<span class="op" id="3296900">&gt;=</span>&nbsp;<span class="builtinfunc" id="3296903">len</span><span class="op" id="3296906">(</span><span class="ident" id="3296907"><a href="/gostd/net/ip.go.html#3296817">s</a></span><span class="op" id="3296908">)</span>&nbsp;<span class="op" id="3296910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3296915">//&nbsp;Missing&nbsp;octets.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296937">return</span>&nbsp;<span class="builtintype" id="3296944">nil</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3296950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296954">if</span>&nbsp;<span class="ident" id="3296957"><a href="/gostd/net/ip.go.html#3296866">j</a></span>&nbsp;<span class="op" id="3296959">&gt;</span>&nbsp;<span class="num" id="3296961">0</span>&nbsp;<span class="op" id="3296963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296968">if</span>&nbsp;<span class="ident" id="3296971"><a href="/gostd/net/ip.go.html#3296817">s</a></span><span class="op" id="3296972">[</span><span class="ident" id="3296973"><a href="/gostd/net/ip.go.html#3296854">i</a></span><span class="op" id="3296974">]</span>&nbsp;<span class="op" id="3296976">!=</span>&nbsp;<span class="string" id="3296979">&#39;.&#39;</span>&nbsp;<span class="op" id="3296983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3296989">return</span>&nbsp;<span class="builtintype" id="3296996">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3297003">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297008"><a href="/gostd/net/ip.go.html#3296854">i</a></span><span class="op" id="3297009">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3297014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297018">var</span>&nbsp;<span class="op" id="3297022">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297027">n</span>&nbsp;&nbsp;<span class="builtintype" id="3297030">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297037">ok</span>&nbsp;<span class="builtintype" id="3297040">bool</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3297047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297051"><a href="/gostd/net/ip.go.html#3297027">n</a></span><span class="op" id="3297052">,</span>&nbsp;<span class="ident" id="3297054"><a href="/gostd/net/ip.go.html#3296854">i</a></span><span class="op" id="3297055">,</span>&nbsp;<span class="ident" id="3297057"><a href="/gostd/net/ip.go.html#3297037">ok</a></span>&nbsp;<span class="op" id="3297060">=</span>&nbsp;<span class="ident" id="3297062"><a href="/gostd/net/parse.go.html#3346952">dtoi</a></span><span class="op" id="3297066">(</span><span class="ident" id="3297067"><a href="/gostd/net/ip.go.html#3296817">s</a></span><span class="op" id="3297068">,</span>&nbsp;<span class="ident" id="3297070"><a href="/gostd/net/ip.go.html#3296854">i</a></span><span class="op" id="3297071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297075">if</span>&nbsp;<span class="op" id="3297078">!</span><span class="ident" id="3297079"><a href="/gostd/net/ip.go.html#3297037">ok</a></span>&nbsp;<span class="op" id="3297082">||</span>&nbsp;<span class="ident" id="3297085"><a href="/gostd/net/ip.go.html#3297027">n</a></span>&nbsp;<span class="op" id="3297087">&gt;</span>&nbsp;<span class="num" id="3297089">0xFF</span>&nbsp;<span class="op" id="3297094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297099">return</span>&nbsp;<span class="builtintype" id="3297106">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3297112">}</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297116"><a href="/gostd/net/ip.go.html#3296837">p</a></span><span class="op" id="3297117">[</span><span class="ident" id="3297118"><a href="/gostd/net/ip.go.html#3296866">j</a></span><span class="op" id="3297119">]</span>&nbsp;<span class="op" id="3297121">=</span>&nbsp;<span class="builtintype" id="3297123">byte</span><span class="op" id="3297127">(</span><span class="ident" id="3297128"><a href="/gostd/net/ip.go.html#3297027">n</a></span><span class="op" id="3297129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3297132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297135">if</span>&nbsp;<span class="ident" id="3297138"><a href="/gostd/net/ip.go.html#3296854">i</a></span>&nbsp;<span class="op" id="3297140">!=</span>&nbsp;<span class="builtinfunc" id="3297143">len</span><span class="op" id="3297146">(</span><span class="ident" id="3297147"><a href="/gostd/net/ip.go.html#3296817">s</a></span><span class="op" id="3297148">)</span>&nbsp;<span class="op" id="3297150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297154">return</span>&nbsp;<span class="builtintype" id="3297161">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3297166">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297169">return</span>&nbsp;<span class="ident" id="3297176"><a href="/gostd/net/ip.go.html#3286541">IPv4</a></span><span class="op" id="3297180">(</span><span class="ident" id="3297181"><a href="/gostd/net/ip.go.html#3296837">p</a></span><span class="op" id="3297182">[</span><span class="num" id="3297183">0</span><span class="op" id="3297184">]</span><span class="op" id="3297185">,</span>&nbsp;<span class="ident" id="3297187"><a href="/gostd/net/ip.go.html#3296837">p</a></span><span class="op" id="3297188">[</span><span class="num" id="3297189">1</span><span class="op" id="3297190">]</span><span class="op" id="3297191">,</span>&nbsp;<span class="ident" id="3297193"><a href="/gostd/net/ip.go.html#3296837">p</a></span><span class="op" id="3297194">[</span><span class="num" id="3297195">2</span><span class="op" id="3297196">]</span><span class="op" id="3297197">,</span>&nbsp;<span class="ident" id="3297199"><a href="/gostd/net/ip.go.html#3296837">p</a></span><span class="op" id="3297200">[</span><span class="num" id="3297201">3</span><span class="op" id="3297202">]</span><span class="op" id="3297203">)</span><br>
<span class="lineno"></span><span class="op" id="3297205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3297208">//&nbsp;parseIPv6&nbsp;parses&nbsp;s&nbsp;as&nbsp;a&nbsp;literal&nbsp;IPv6&nbsp;address&nbsp;described&nbsp;in&nbsp;RFC&nbsp;4291</span><br>
<span class="lineno"></span><span class="comment" id="3297278">//&nbsp;and&nbsp;RFC&nbsp;5952.&nbsp;&nbsp;It&nbsp;can&nbsp;also&nbsp;parse&nbsp;a&nbsp;literal&nbsp;scoped&nbsp;IPv6&nbsp;address&nbsp;with</span><br>
<span class="lineno">530</span><span class="comment" id="3297349">//&nbsp;zone&nbsp;identifier&nbsp;which&nbsp;is&nbsp;described&nbsp;in&nbsp;RFC&nbsp;4007&nbsp;when&nbsp;zoneAllowed&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3297419">//&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="3297428">func</span>&nbsp;<span class="ident" id="3297433">parseIPv6</span><span class="op" id="3297442">(</span><span class="ident" id="3297443">s</span>&nbsp;<span class="builtintype" id="3297445">string</span><span class="op" id="3297451">,</span>&nbsp;<span class="ident" id="3297453">zoneAllowed</span>&nbsp;<span class="builtintype" id="3297465">bool</span><span class="op" id="3297469">)</span>&nbsp;<span class="op" id="3297471">(</span><span class="ident" id="3297472">ip</span>&nbsp;<span class="ident" id="3297475"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3297477">,</span>&nbsp;<span class="ident" id="3297479">zone</span>&nbsp;<span class="builtintype" id="3297484">string</span><span class="op" id="3297490">)</span>&nbsp;<span class="op" id="3297492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297495"><a href="/gostd/net/ip.go.html#3297472">ip</a></span>&nbsp;<span class="op" id="3297498">=</span>&nbsp;<span class="builtinfunc" id="3297500">make</span><span class="op" id="3297504">(</span><span class="ident" id="3297505"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3297507">,</span>&nbsp;<span class="ident" id="3297509"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span><span class="op" id="3297516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297519">ellipsis</span>&nbsp;<span class="op" id="3297528">:=</span>&nbsp;<span class="op" id="3297531">-</span><span class="num" id="3297532">1</span>&nbsp;<span class="comment" id="3297534">//&nbsp;position&nbsp;of&nbsp;ellipsis&nbsp;in&nbsp;p</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297564">i</span>&nbsp;<span class="op" id="3297566">:=</span>&nbsp;<span class="num" id="3297569">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3297579">//&nbsp;index&nbsp;in&nbsp;string&nbsp;s</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297602">if</span>&nbsp;<span class="ident" id="3297605"><a href="/gostd/net/ip.go.html#3297453">zoneAllowed</a></span>&nbsp;<span class="op" id="3297617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297621"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3297622">,</span>&nbsp;<span class="ident" id="3297624"><a href="/gostd/net/ip.go.html#3297479">zone</a></span>&nbsp;<span class="op" id="3297629">=</span>&nbsp;<span class="ident" id="3297631"><a href="/gostd/net/ipsock.go.html#3314689">splitHostZone</a></span><span class="op" id="3297644">(</span><span class="ident" id="3297645"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3297646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3297649">}</span><br>
<span class="lineno">540</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3297653">//&nbsp;Might&nbsp;have&nbsp;leading&nbsp;ellipsis</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297685">if</span>&nbsp;<span class="builtinfunc" id="3297688">len</span><span class="op" id="3297691">(</span><span class="ident" id="3297692"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3297693">)</span>&nbsp;<span class="op" id="3297695">&gt;=</span>&nbsp;<span class="num" id="3297698">2</span>&nbsp;<span class="op" id="3297700">&amp;&amp;</span>&nbsp;<span class="ident" id="3297703"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3297704">[</span><span class="num" id="3297705">0</span><span class="op" id="3297706">]</span>&nbsp;<span class="op" id="3297708">==</span>&nbsp;<span class="string" id="3297711">&#39;:&#39;</span>&nbsp;<span class="op" id="3297715">&amp;&amp;</span>&nbsp;<span class="ident" id="3297718"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3297719">[</span><span class="num" id="3297720">1</span><span class="op" id="3297721">]</span>&nbsp;<span class="op" id="3297723">==</span>&nbsp;<span class="string" id="3297726">&#39;:&#39;</span>&nbsp;<span class="op" id="3297730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297734"><a href="/gostd/net/ip.go.html#3297519">ellipsis</a></span>&nbsp;<span class="op" id="3297743">=</span>&nbsp;<span class="num" id="3297745">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297749"><a href="/gostd/net/ip.go.html#3297564">i</a></span>&nbsp;<span class="op" id="3297751">=</span>&nbsp;<span class="num" id="3297753">2</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3297757">//&nbsp;Might&nbsp;be&nbsp;only&nbsp;ellipsis</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297785">if</span>&nbsp;<span class="ident" id="3297788"><a href="/gostd/net/ip.go.html#3297564">i</a></span>&nbsp;<span class="op" id="3297790">==</span>&nbsp;<span class="builtinfunc" id="3297793">len</span><span class="op" id="3297796">(</span><span class="ident" id="3297797"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3297798">)</span>&nbsp;<span class="op" id="3297800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297805">return</span>&nbsp;<span class="ident" id="3297812"><a href="/gostd/net/ip.go.html#3297472">ip</a></span><span class="op" id="3297814">,</span>&nbsp;<span class="ident" id="3297816"><a href="/gostd/net/ip.go.html#3297479">zone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3297823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3297826">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3297830">//&nbsp;Loop,&nbsp;parsing&nbsp;hex&nbsp;numbers&nbsp;followed&nbsp;by&nbsp;colon.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297879">j</span>&nbsp;<span class="op" id="3297881">:=</span>&nbsp;<span class="num" id="3297884">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297887">for</span>&nbsp;<span class="ident" id="3297891"><a href="/gostd/net/ip.go.html#3297879">j</a></span>&nbsp;<span class="op" id="3297893">&lt;</span>&nbsp;<span class="ident" id="3297895"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3297903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3297907">//&nbsp;Hex&nbsp;number.</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3297924">n</span><span class="op" id="3297925">,</span>&nbsp;<span class="ident" id="3297927">i1</span><span class="op" id="3297929">,</span>&nbsp;<span class="ident" id="3297931">ok</span>&nbsp;<span class="op" id="3297934">:=</span>&nbsp;<span class="ident" id="3297937"><a href="/gostd/net/parse.go.html#3347292">xtoi</a></span><span class="op" id="3297941">(</span><span class="ident" id="3297942"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3297943">,</span>&nbsp;<span class="ident" id="3297945"><a href="/gostd/net/ip.go.html#3297564">i</a></span><span class="op" id="3297946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297950">if</span>&nbsp;<span class="op" id="3297953">!</span><span class="ident" id="3297954"><a href="/gostd/net/ip.go.html#3297931">ok</a></span>&nbsp;<span class="op" id="3297957">||</span>&nbsp;<span class="ident" id="3297960"><a href="/gostd/net/ip.go.html#3297924">n</a></span>&nbsp;<span class="op" id="3297962">&gt;</span>&nbsp;<span class="num" id="3297964">0xFFFF</span>&nbsp;<span class="op" id="3297971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3297976">return</span>&nbsp;<span class="builtintype" id="3297983">nil</span><span class="op" id="3297986">,</span>&nbsp;<span class="ident" id="3297988"><a href="/gostd/net/ip.go.html#3297479">zone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3297995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3298000">//&nbsp;If&nbsp;followed&nbsp;by&nbsp;dot,&nbsp;might&nbsp;be&nbsp;in&nbsp;trailing&nbsp;IPv4.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298052">if</span>&nbsp;<span class="ident" id="3298055"><a href="/gostd/net/ip.go.html#3297927">i1</a></span>&nbsp;<span class="op" id="3298058">&lt;</span>&nbsp;<span class="builtinfunc" id="3298060">len</span><span class="op" id="3298063">(</span><span class="ident" id="3298064"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3298065">)</span>&nbsp;<span class="op" id="3298067">&amp;&amp;</span>&nbsp;<span class="ident" id="3298070"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3298071">[</span><span class="ident" id="3298072"><a href="/gostd/net/ip.go.html#3297927">i1</a></span><span class="op" id="3298074">]</span>&nbsp;<span class="op" id="3298076">==</span>&nbsp;<span class="string" id="3298079">&#39;.&#39;</span>&nbsp;<span class="op" id="3298083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298088">if</span>&nbsp;<span class="ident" id="3298091"><a href="/gostd/net/ip.go.html#3297519">ellipsis</a></span>&nbsp;<span class="op" id="3298100">&lt;</span>&nbsp;<span class="num" id="3298102">0</span>&nbsp;<span class="op" id="3298104">&amp;&amp;</span>&nbsp;<span class="ident" id="3298107"><a href="/gostd/net/ip.go.html#3297879">j</a></span>&nbsp;<span class="op" id="3298109">!=</span>&nbsp;<span class="ident" id="3298112"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span><span class="op" id="3298119">-</span><span class="ident" id="3298120"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3298128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3298134">//&nbsp;Not&nbsp;the&nbsp;right&nbsp;place.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298162">return</span>&nbsp;<span class="builtintype" id="3298169">nil</span><span class="op" id="3298172">,</span>&nbsp;<span class="ident" id="3298174"><a href="/gostd/net/ip.go.html#3297479">zone</a></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3298182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298187">if</span>&nbsp;<span class="ident" id="3298190"><a href="/gostd/net/ip.go.html#3297879">j</a></span><span class="op" id="3298191">+</span><span class="ident" id="3298192"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span>&nbsp;<span class="op" id="3298200">&gt;</span>&nbsp;<span class="ident" id="3298202"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3298210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3298216">//&nbsp;Not&nbsp;enough&nbsp;room.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298240">return</span>&nbsp;<span class="builtintype" id="3298247">nil</span><span class="op" id="3298250">,</span>&nbsp;<span class="ident" id="3298252"><a href="/gostd/net/ip.go.html#3297479">zone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3298260">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298265">ip4</span>&nbsp;<span class="op" id="3298269">:=</span>&nbsp;<span class="ident" id="3298272"><a href="/gostd/net/ip.go.html#3296807">parseIPv4</a></span><span class="op" id="3298281">(</span><span class="ident" id="3298282"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3298283">[</span><span class="ident" id="3298284"><a href="/gostd/net/ip.go.html#3297564">i</a></span><span class="op" id="3298285">:</span><span class="op" id="3298286">]</span><span class="op" id="3298287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298292">if</span>&nbsp;<span class="ident" id="3298295"><a href="/gostd/net/ip.go.html#3298265">ip4</a></span>&nbsp;<span class="op" id="3298299">==</span>&nbsp;<span class="builtintype" id="3298302">nil</span>&nbsp;<span class="op" id="3298306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298312">return</span>&nbsp;<span class="builtintype" id="3298319">nil</span><span class="op" id="3298322">,</span>&nbsp;<span class="ident" id="3298324"><a href="/gostd/net/ip.go.html#3297479">zone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3298332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298337"><a href="/gostd/net/ip.go.html#3297472">ip</a></span><span class="op" id="3298339">[</span><span class="ident" id="3298340"><a href="/gostd/net/ip.go.html#3297879">j</a></span><span class="op" id="3298341">]</span>&nbsp;<span class="op" id="3298343">=</span>&nbsp;<span class="ident" id="3298345"><a href="/gostd/net/ip.go.html#3298265">ip4</a></span><span class="op" id="3298348">[</span><span class="num" id="3298349">12</span><span class="op" id="3298351">]</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298356"><a href="/gostd/net/ip.go.html#3297472">ip</a></span><span class="op" id="3298358">[</span><span class="ident" id="3298359"><a href="/gostd/net/ip.go.html#3297879">j</a></span><span class="op" id="3298360">+</span><span class="num" id="3298361">1</span><span class="op" id="3298362">]</span>&nbsp;<span class="op" id="3298364">=</span>&nbsp;<span class="ident" id="3298366"><a href="/gostd/net/ip.go.html#3298265">ip4</a></span><span class="op" id="3298369">[</span><span class="num" id="3298370">13</span><span class="op" id="3298372">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298377"><a href="/gostd/net/ip.go.html#3297472">ip</a></span><span class="op" id="3298379">[</span><span class="ident" id="3298380"><a href="/gostd/net/ip.go.html#3297879">j</a></span><span class="op" id="3298381">+</span><span class="num" id="3298382">2</span><span class="op" id="3298383">]</span>&nbsp;<span class="op" id="3298385">=</span>&nbsp;<span class="ident" id="3298387"><a href="/gostd/net/ip.go.html#3298265">ip4</a></span><span class="op" id="3298390">[</span><span class="num" id="3298391">14</span><span class="op" id="3298393">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298398"><a href="/gostd/net/ip.go.html#3297472">ip</a></span><span class="op" id="3298400">[</span><span class="ident" id="3298401"><a href="/gostd/net/ip.go.html#3297879">j</a></span><span class="op" id="3298402">+</span><span class="num" id="3298403">3</span><span class="op" id="3298404">]</span>&nbsp;<span class="op" id="3298406">=</span>&nbsp;<span class="ident" id="3298408"><a href="/gostd/net/ip.go.html#3298265">ip4</a></span><span class="op" id="3298411">[</span><span class="num" id="3298412">15</span><span class="op" id="3298414">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298419"><a href="/gostd/net/ip.go.html#3297564">i</a></span>&nbsp;<span class="op" id="3298421">=</span>&nbsp;<span class="builtinfunc" id="3298423">len</span><span class="op" id="3298426">(</span><span class="ident" id="3298427"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3298428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298433"><a href="/gostd/net/ip.go.html#3297879">j</a></span>&nbsp;<span class="op" id="3298435">+=</span>&nbsp;<span class="ident" id="3298438"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298449">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3298457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3298462">//&nbsp;Save&nbsp;this&nbsp;16-bit&nbsp;chunk.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298491"><a href="/gostd/net/ip.go.html#3297472">ip</a></span><span class="op" id="3298493">[</span><span class="ident" id="3298494"><a href="/gostd/net/ip.go.html#3297879">j</a></span><span class="op" id="3298495">]</span>&nbsp;<span class="op" id="3298497">=</span>&nbsp;<span class="builtintype" id="3298499">byte</span><span class="op" id="3298503">(</span><span class="ident" id="3298504"><a href="/gostd/net/ip.go.html#3297924">n</a></span>&nbsp;<span class="op" id="3298506">&gt;&gt;</span>&nbsp;<span class="num" id="3298509">8</span><span class="op" id="3298510">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298514"><a href="/gostd/net/ip.go.html#3297472">ip</a></span><span class="op" id="3298516">[</span><span class="ident" id="3298517"><a href="/gostd/net/ip.go.html#3297879">j</a></span><span class="op" id="3298518">+</span><span class="num" id="3298519">1</span><span class="op" id="3298520">]</span>&nbsp;<span class="op" id="3298522">=</span>&nbsp;<span class="builtintype" id="3298524">byte</span><span class="op" id="3298528">(</span><span class="ident" id="3298529"><a href="/gostd/net/ip.go.html#3297924">n</a></span><span class="op" id="3298530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298534"><a href="/gostd/net/ip.go.html#3297879">j</a></span>&nbsp;<span class="op" id="3298536">+=</span>&nbsp;<span class="num" id="3298539">2</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3298544">//&nbsp;Stop&nbsp;at&nbsp;end&nbsp;of&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298572"><a href="/gostd/net/ip.go.html#3297564">i</a></span>&nbsp;<span class="op" id="3298574">=</span>&nbsp;<span class="ident" id="3298576"><a href="/gostd/net/ip.go.html#3297927">i1</a></span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298581">if</span>&nbsp;<span class="ident" id="3298584"><a href="/gostd/net/ip.go.html#3297564">i</a></span>&nbsp;<span class="op" id="3298586">==</span>&nbsp;<span class="builtinfunc" id="3298589">len</span><span class="op" id="3298592">(</span><span class="ident" id="3298593"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3298594">)</span>&nbsp;<span class="op" id="3298596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298601">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3298609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3298614">//&nbsp;Otherwise&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;colon&nbsp;and&nbsp;more.</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298665">if</span>&nbsp;<span class="ident" id="3298668"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3298669">[</span><span class="ident" id="3298670"><a href="/gostd/net/ip.go.html#3297564">i</a></span><span class="op" id="3298671">]</span>&nbsp;<span class="op" id="3298673">!=</span>&nbsp;<span class="string" id="3298676">&#39;:&#39;</span>&nbsp;<span class="op" id="3298680">||</span>&nbsp;<span class="ident" id="3298683"><a href="/gostd/net/ip.go.html#3297564">i</a></span><span class="op" id="3298684">+</span><span class="num" id="3298685">1</span>&nbsp;<span class="op" id="3298687">==</span>&nbsp;<span class="builtinfunc" id="3298690">len</span><span class="op" id="3298693">(</span><span class="ident" id="3298694"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3298695">)</span>&nbsp;<span class="op" id="3298697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298702">return</span>&nbsp;<span class="builtintype" id="3298709">nil</span><span class="op" id="3298712">,</span>&nbsp;<span class="ident" id="3298714"><a href="/gostd/net/ip.go.html#3297479">zone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3298721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298725"><a href="/gostd/net/ip.go.html#3297564">i</a></span><span class="op" id="3298726">++</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3298732">//&nbsp;Look&nbsp;for&nbsp;ellipsis.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298756">if</span>&nbsp;<span class="ident" id="3298759"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3298760">[</span><span class="ident" id="3298761"><a href="/gostd/net/ip.go.html#3297564">i</a></span><span class="op" id="3298762">]</span>&nbsp;<span class="op" id="3298764">==</span>&nbsp;<span class="string" id="3298767">&#39;:&#39;</span>&nbsp;<span class="op" id="3298771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298776">if</span>&nbsp;<span class="ident" id="3298779"><a href="/gostd/net/ip.go.html#3297519">ellipsis</a></span>&nbsp;<span class="op" id="3298788">&gt;=</span>&nbsp;<span class="num" id="3298791">0</span>&nbsp;<span class="op" id="3298793">{</span>&nbsp;<span class="comment" id="3298795">//&nbsp;already&nbsp;have&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298819">return</span>&nbsp;<span class="builtintype" id="3298826">nil</span><span class="op" id="3298829">,</span>&nbsp;<span class="ident" id="3298831"><a href="/gostd/net/ip.go.html#3297479">zone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3298839">}</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3298844"><a href="/gostd/net/ip.go.html#3297519">ellipsis</a></span>&nbsp;<span class="op" id="3298853">=</span>&nbsp;<span class="ident" id="3298855"><a href="/gostd/net/ip.go.html#3297879">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298860">if</span>&nbsp;<span class="ident" id="3298863"><a href="/gostd/net/ip.go.html#3297564">i</a></span><span class="op" id="3298864">++</span><span class="op" id="3298866">;</span>&nbsp;<span class="ident" id="3298868"><a href="/gostd/net/ip.go.html#3297564">i</a></span>&nbsp;<span class="op" id="3298870">==</span>&nbsp;<span class="builtinfunc" id="3298873">len</span><span class="op" id="3298876">(</span><span class="ident" id="3298877"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3298878">)</span>&nbsp;<span class="op" id="3298880">{</span>&nbsp;<span class="comment" id="3298882">//&nbsp;can&nbsp;be&nbsp;at&nbsp;end</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298903">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3298912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3298916">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3298919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3298923">//&nbsp;Must&nbsp;have&nbsp;used&nbsp;entire&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298957">if</span>&nbsp;<span class="ident" id="3298960"><a href="/gostd/net/ip.go.html#3297564">i</a></span>&nbsp;<span class="op" id="3298962">!=</span>&nbsp;<span class="builtinfunc" id="3298965">len</span><span class="op" id="3298968">(</span><span class="ident" id="3298969"><a href="/gostd/net/ip.go.html#3297443">s</a></span><span class="op" id="3298970">)</span>&nbsp;<span class="op" id="3298972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3298976">return</span>&nbsp;<span class="builtintype" id="3298983">nil</span><span class="op" id="3298986">,</span>&nbsp;<span class="ident" id="3298988"><a href="/gostd/net/ip.go.html#3297479">zone</a></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3298994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3298998">//&nbsp;If&nbsp;didn&#39;t&nbsp;parse&nbsp;enough,&nbsp;expand&nbsp;ellipsis.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299043">if</span>&nbsp;<span class="ident" id="3299046"><a href="/gostd/net/ip.go.html#3297879">j</a></span>&nbsp;<span class="op" id="3299048">&lt;</span>&nbsp;<span class="ident" id="3299050"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3299058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299062">if</span>&nbsp;<span class="ident" id="3299065"><a href="/gostd/net/ip.go.html#3297519">ellipsis</a></span>&nbsp;<span class="op" id="3299074">&lt;</span>&nbsp;<span class="num" id="3299076">0</span>&nbsp;<span class="op" id="3299078">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299083">return</span>&nbsp;<span class="builtintype" id="3299090">nil</span><span class="op" id="3299093">,</span>&nbsp;<span class="ident" id="3299095"><a href="/gostd/net/ip.go.html#3297479">zone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3299102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3299106">n</span>&nbsp;<span class="op" id="3299108">:=</span>&nbsp;<span class="ident" id="3299111"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3299119">-</span>&nbsp;<span class="ident" id="3299121"><a href="/gostd/net/ip.go.html#3297879">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299125">for</span>&nbsp;<span class="ident" id="3299129">k</span>&nbsp;<span class="op" id="3299131">:=</span>&nbsp;<span class="ident" id="3299134"><a href="/gostd/net/ip.go.html#3297879">j</a></span>&nbsp;<span class="op" id="3299136">-</span>&nbsp;<span class="num" id="3299138">1</span><span class="op" id="3299139">;</span>&nbsp;<span class="ident" id="3299141"><a href="/gostd/net/ip.go.html#3299129">k</a></span>&nbsp;<span class="op" id="3299143">&gt;=</span>&nbsp;<span class="ident" id="3299146"><a href="/gostd/net/ip.go.html#3297519">ellipsis</a></span><span class="op" id="3299154">;</span>&nbsp;<span class="ident" id="3299156"><a href="/gostd/net/ip.go.html#3299129">k</a></span><span class="op" id="3299157">--</span>&nbsp;<span class="op" id="3299160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3299165"><a href="/gostd/net/ip.go.html#3297472">ip</a></span><span class="op" id="3299167">[</span><span class="ident" id="3299168"><a href="/gostd/net/ip.go.html#3299129">k</a></span><span class="op" id="3299169">+</span><span class="ident" id="3299170"><a href="/gostd/net/ip.go.html#3299106">n</a></span><span class="op" id="3299171">]</span>&nbsp;<span class="op" id="3299173">=</span>&nbsp;<span class="ident" id="3299175"><a href="/gostd/net/ip.go.html#3297472">ip</a></span><span class="op" id="3299177">[</span><span class="ident" id="3299178"><a href="/gostd/net/ip.go.html#3299129">k</a></span><span class="op" id="3299179">]</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3299183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299187">for</span>&nbsp;<span class="ident" id="3299191">k</span>&nbsp;<span class="op" id="3299193">:=</span>&nbsp;<span class="ident" id="3299196"><a href="/gostd/net/ip.go.html#3297519">ellipsis</a></span>&nbsp;<span class="op" id="3299205">+</span>&nbsp;<span class="ident" id="3299207"><a href="/gostd/net/ip.go.html#3299106">n</a></span>&nbsp;<span class="op" id="3299209">-</span>&nbsp;<span class="num" id="3299211">1</span><span class="op" id="3299212">;</span>&nbsp;<span class="ident" id="3299214"><a href="/gostd/net/ip.go.html#3299191">k</a></span>&nbsp;<span class="op" id="3299216">&gt;=</span>&nbsp;<span class="ident" id="3299219"><a href="/gostd/net/ip.go.html#3297519">ellipsis</a></span><span class="op" id="3299227">;</span>&nbsp;<span class="ident" id="3299229"><a href="/gostd/net/ip.go.html#3299191">k</a></span><span class="op" id="3299230">--</span>&nbsp;<span class="op" id="3299233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3299238"><a href="/gostd/net/ip.go.html#3297472">ip</a></span><span class="op" id="3299240">[</span><span class="ident" id="3299241"><a href="/gostd/net/ip.go.html#3299191">k</a></span><span class="op" id="3299242">]</span>&nbsp;<span class="op" id="3299244">=</span>&nbsp;<span class="num" id="3299246">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3299250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3299253">}</span>&nbsp;<span class="keyword" id="3299255">else</span>&nbsp;<span class="keyword" id="3299260">if</span>&nbsp;<span class="ident" id="3299263"><a href="/gostd/net/ip.go.html#3297519">ellipsis</a></span>&nbsp;<span class="op" id="3299272">&gt;=</span>&nbsp;<span class="num" id="3299275">0</span>&nbsp;<span class="op" id="3299277">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3299281">//&nbsp;Ellipsis&nbsp;must&nbsp;represent&nbsp;at&nbsp;least&nbsp;one&nbsp;0&nbsp;group.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299332">return</span>&nbsp;<span class="builtintype" id="3299339">nil</span><span class="op" id="3299342">,</span>&nbsp;<span class="ident" id="3299344"><a href="/gostd/net/ip.go.html#3297479">zone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3299350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299353">return</span>&nbsp;<span class="ident" id="3299360"><a href="/gostd/net/ip.go.html#3297472">ip</a></span><span class="op" id="3299362">,</span>&nbsp;<span class="ident" id="3299364"><a href="/gostd/net/ip.go.html#3297479">zone</a></span><br>
<span class="lineno"></span><span class="op" id="3299369">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="3299372">//&nbsp;A&nbsp;ParseError&nbsp;represents&nbsp;a&nbsp;malformed&nbsp;text&nbsp;string&nbsp;and&nbsp;the&nbsp;type&nbsp;of&nbsp;string&nbsp;that&nbsp;was&nbsp;expected.</span><br>
<span class="lineno"></span><span class="keyword" id="3299465">type</span>&nbsp;<span class="ident" id="3299470">ParseError</span>&nbsp;<span class="keyword" id="3299481">struct</span>&nbsp;<span class="op" id="3299488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3299491">Type</span>&nbsp;<span class="builtintype" id="3299496">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3299504">Text</span>&nbsp;<span class="builtintype" id="3299509">string</span><br>
<span class="lineno">640</span><span class="op" id="3299516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3299519">func</span>&nbsp;<span class="op" id="3299524">(</span><span class="ident" id="3299525">e</span>&nbsp;<span class="op" id="3299527">*</span><span class="ident" id="3299528"><a href="/gostd/net/ip.go.html#3299470">ParseError</a></span><span class="op" id="3299538">)</span>&nbsp;<span class="ident" id="3299540">Error</span><span class="op" id="3299545">(</span><span class="op" id="3299546">)</span>&nbsp;<span class="builtintype" id="3299548">string</span>&nbsp;<span class="op" id="3299555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299558">return</span>&nbsp;<span class="string" id="3299565">&#34;invalid&nbsp;&#34;</span>&nbsp;<span class="op" id="3299576">+</span>&nbsp;<span class="ident" id="3299578"><a href="/gostd/net/ip.go.html#3299525">e</a></span><span class="op" id="3299579">.</span><span class="ident" id="3299580"><a href="/gostd/net/ip.go.html#3299491">Type</a></span>&nbsp;<span class="op" id="3299585">+</span>&nbsp;<span class="string" id="3299587">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3299592">+</span>&nbsp;<span class="ident" id="3299594"><a href="/gostd/net/ip.go.html#3299525">e</a></span><span class="op" id="3299595">.</span><span class="ident" id="3299596"><a href="/gostd/net/ip.go.html#3299504">Text</a></span><br>
<span class="lineno"></span><span class="op" id="3299601">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="3299604">//&nbsp;ParseIP&nbsp;parses&nbsp;s&nbsp;as&nbsp;an&nbsp;IP&nbsp;address,&nbsp;returning&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="3299664">//&nbsp;The&nbsp;string&nbsp;s&nbsp;can&nbsp;be&nbsp;in&nbsp;dotted&nbsp;decimal&nbsp;(&#34;74.125.19.99&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="3299722">//&nbsp;or&nbsp;IPv6&nbsp;(&#34;2001:4860:0:2001::68&#34;)&nbsp;form.</span><br>
<span class="lineno"></span><span class="comment" id="3299764">//&nbsp;If&nbsp;s&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;textual&nbsp;representation&nbsp;of&nbsp;an&nbsp;IP&nbsp;address,</span><br>
<span class="lineno">650</span><span class="comment" id="3299828">//&nbsp;ParseIP&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3299852">func</span>&nbsp;<span class="ident" id="3299857">ParseIP</span><span class="op" id="3299864">(</span><span class="ident" id="3299865">s</span>&nbsp;<span class="builtintype" id="3299867">string</span><span class="op" id="3299873">)</span>&nbsp;<span class="ident" id="3299875"><a href="/gostd/net/ip.go.html#3286271">IP</a></span>&nbsp;<span class="op" id="3299878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299881">for</span>&nbsp;<span class="ident" id="3299885">i</span>&nbsp;<span class="op" id="3299887">:=</span>&nbsp;<span class="num" id="3299890">0</span><span class="op" id="3299891">;</span>&nbsp;<span class="ident" id="3299893"><a href="/gostd/net/ip.go.html#3299885">i</a></span>&nbsp;<span class="op" id="3299895">&lt;</span>&nbsp;<span class="builtinfunc" id="3299897">len</span><span class="op" id="3299900">(</span><span class="ident" id="3299901"><a href="/gostd/net/ip.go.html#3299865">s</a></span><span class="op" id="3299902">)</span><span class="op" id="3299903">;</span>&nbsp;<span class="ident" id="3299905"><a href="/gostd/net/ip.go.html#3299885">i</a></span><span class="op" id="3299906">++</span>&nbsp;<span class="op" id="3299909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299913">switch</span>&nbsp;<span class="ident" id="3299920"><a href="/gostd/net/ip.go.html#3299865">s</a></span><span class="op" id="3299921">[</span><span class="ident" id="3299922"><a href="/gostd/net/ip.go.html#3299885">i</a></span><span class="op" id="3299923">]</span>&nbsp;<span class="op" id="3299925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299929">case</span>&nbsp;<span class="string" id="3299934">&#39;.&#39;</span><span class="op" id="3299937">:</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299942">return</span>&nbsp;<span class="ident" id="3299949"><a href="/gostd/net/ip.go.html#3296807">parseIPv4</a></span><span class="op" id="3299958">(</span><span class="ident" id="3299959"><a href="/gostd/net/ip.go.html#3299865">s</a></span><span class="op" id="3299960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3299964">case</span>&nbsp;<span class="string" id="3299969">&#39;:&#39;</span><span class="op" id="3299972">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3299977">ip</span><span class="op" id="3299979">,</span>&nbsp;<span class="ident" id="3299981">_</span>&nbsp;<span class="op" id="3299983">:=</span>&nbsp;<span class="ident" id="3299986"><a href="/gostd/net/ip.go.html#3297433">parseIPv6</a></span><span class="op" id="3299995">(</span><span class="ident" id="3299996"><a href="/gostd/net/ip.go.html#3299865">s</a></span><span class="op" id="3299997">,</span>&nbsp;<span class="builtintype" id="3299999">false</span><span class="op" id="3300004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3300009">return</span>&nbsp;<span class="ident" id="3300016"><a href="/gostd/net/ip.go.html#3299977">ip</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3300021">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3300024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3300027">return</span>&nbsp;<span class="builtintype" id="3300034">nil</span><br>
<span class="lineno"></span><span class="op" id="3300038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3300041">//&nbsp;ParseCIDR&nbsp;parses&nbsp;s&nbsp;as&nbsp;a&nbsp;CIDR&nbsp;notation&nbsp;IP&nbsp;address&nbsp;and&nbsp;mask,</span><br>
<span class="lineno">665</span><span class="comment" id="3300103">//&nbsp;like&nbsp;&#34;192.168.100.1/24&#34;&nbsp;or&nbsp;&#34;2001:DB8::/48&#34;,&nbsp;as&nbsp;defined&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3300164">//&nbsp;RFC&nbsp;4632&nbsp;and&nbsp;RFC&nbsp;4291.</span><br>
<span class="lineno"></span><span class="comment" id="3300190">//</span><br>
<span class="lineno"></span><span class="comment" id="3300193">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;IP&nbsp;address&nbsp;and&nbsp;the&nbsp;network&nbsp;implied&nbsp;by&nbsp;the&nbsp;IP</span><br>
<span class="lineno"></span><span class="comment" id="3300256">//&nbsp;and&nbsp;mask.&nbsp;&nbsp;For&nbsp;example,&nbsp;ParseCIDR(&#34;192.168.100.1/16&#34;)&nbsp;returns</span><br>
<span class="lineno">670</span><span class="comment" id="3300321">//&nbsp;the&nbsp;IP&nbsp;address&nbsp;192.168.100.1&nbsp;and&nbsp;the&nbsp;network&nbsp;192.168.0.0/16.</span><br>
<span class="lineno"></span><span class="keyword" id="3300385">func</span>&nbsp;<span class="ident" id="3300390">ParseCIDR</span><span class="op" id="3300399">(</span><span class="ident" id="3300400">s</span>&nbsp;<span class="builtintype" id="3300402">string</span><span class="op" id="3300408">)</span>&nbsp;<span class="op" id="3300410">(</span><span class="ident" id="3300411"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3300413">,</span>&nbsp;<span class="op" id="3300415">*</span><span class="ident" id="3300416"><a href="/gostd/net/ip.go.html#3286377">IPNet</a></span><span class="op" id="3300421">,</span>&nbsp;<span class="builtintype" id="3300423">error</span><span class="op" id="3300428">)</span>&nbsp;<span class="op" id="3300430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3300433">i</span>&nbsp;<span class="op" id="3300435">:=</span>&nbsp;<span class="ident" id="3300438"><a href="/gostd/net/parse.go.html#3346051">byteIndex</a></span><span class="op" id="3300447">(</span><span class="ident" id="3300448"><a href="/gostd/net/ip.go.html#3300400">s</a></span><span class="op" id="3300449">,</span>&nbsp;<span class="string" id="3300451">&#39;/&#39;</span><span class="op" id="3300454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3300457">if</span>&nbsp;<span class="ident" id="3300460"><a href="/gostd/net/ip.go.html#3300433">i</a></span>&nbsp;<span class="op" id="3300462">&lt;</span>&nbsp;<span class="num" id="3300464">0</span>&nbsp;<span class="op" id="3300466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3300470">return</span>&nbsp;<span class="builtintype" id="3300477">nil</span><span class="op" id="3300480">,</span>&nbsp;<span class="builtintype" id="3300482">nil</span><span class="op" id="3300485">,</span>&nbsp;<span class="op" id="3300487">&amp;</span><span class="ident" id="3300488"><a href="/gostd/net/ip.go.html#3299470">ParseError</a></span><span class="op" id="3300498">{</span><span class="string" id="3300499">&#34;CIDR&nbsp;address&#34;</span><span class="op" id="3300513">,</span>&nbsp;<span class="ident" id="3300515"><a href="/gostd/net/ip.go.html#3300400">s</a></span><span class="op" id="3300516">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3300519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3300522">addr</span><span class="op" id="3300526">,</span>&nbsp;<span class="ident" id="3300528">mask</span>&nbsp;<span class="op" id="3300533">:=</span>&nbsp;<span class="ident" id="3300536"><a href="/gostd/net/ip.go.html#3300400">s</a></span><span class="op" id="3300537">[</span><span class="op" id="3300538">:</span><span class="ident" id="3300539"><a href="/gostd/net/ip.go.html#3300433">i</a></span><span class="op" id="3300540">]</span><span class="op" id="3300541">,</span>&nbsp;<span class="ident" id="3300543"><a href="/gostd/net/ip.go.html#3300400">s</a></span><span class="op" id="3300544">[</span><span class="ident" id="3300545"><a href="/gostd/net/ip.go.html#3300433">i</a></span><span class="op" id="3300546">+</span><span class="num" id="3300547">1</span><span class="op" id="3300548">:</span><span class="op" id="3300549">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3300552">iplen</span>&nbsp;<span class="op" id="3300558">:=</span>&nbsp;<span class="ident" id="3300561"><a href="/gostd/net/ip.go.html#3285851">IPv4len</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3300570">ip</span>&nbsp;<span class="op" id="3300573">:=</span>&nbsp;<span class="ident" id="3300576"><a href="/gostd/net/ip.go.html#3296807">parseIPv4</a></span><span class="op" id="3300585">(</span><span class="ident" id="3300586"><a href="/gostd/net/ip.go.html#3300522">addr</a></span><span class="op" id="3300590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3300593">if</span>&nbsp;<span class="ident" id="3300596"><a href="/gostd/net/ip.go.html#3300570">ip</a></span>&nbsp;<span class="op" id="3300599">==</span>&nbsp;<span class="builtintype" id="3300602">nil</span>&nbsp;<span class="op" id="3300606">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3300610"><a href="/gostd/net/ip.go.html#3300552">iplen</a></span>&nbsp;<span class="op" id="3300616">=</span>&nbsp;<span class="ident" id="3300618"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3300628"><a href="/gostd/net/ip.go.html#3300570">ip</a></span><span class="op" id="3300630">,</span>&nbsp;<span class="ident" id="3300632">_</span>&nbsp;<span class="op" id="3300634">=</span>&nbsp;<span class="ident" id="3300636"><a href="/gostd/net/ip.go.html#3297433">parseIPv6</a></span><span class="op" id="3300645">(</span><span class="ident" id="3300646"><a href="/gostd/net/ip.go.html#3300522">addr</a></span><span class="op" id="3300650">,</span>&nbsp;<span class="builtintype" id="3300652">false</span><span class="op" id="3300657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3300660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3300663">n</span><span class="op" id="3300664">,</span>&nbsp;<span class="ident" id="3300666"><a href="/gostd/net/ip.go.html#3300433">i</a></span><span class="op" id="3300667">,</span>&nbsp;<span class="ident" id="3300669">ok</span>&nbsp;<span class="op" id="3300672">:=</span>&nbsp;<span class="ident" id="3300675"><a href="/gostd/net/parse.go.html#3346952">dtoi</a></span><span class="op" id="3300679">(</span><span class="ident" id="3300680"><a href="/gostd/net/ip.go.html#3300528">mask</a></span><span class="op" id="3300684">,</span>&nbsp;<span class="num" id="3300686">0</span><span class="op" id="3300687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3300690">if</span>&nbsp;<span class="ident" id="3300693"><a href="/gostd/net/ip.go.html#3300570">ip</a></span>&nbsp;<span class="op" id="3300696">==</span>&nbsp;<span class="builtintype" id="3300699">nil</span>&nbsp;<span class="op" id="3300703">||</span>&nbsp;<span class="op" id="3300706">!</span><span class="ident" id="3300707"><a href="/gostd/net/ip.go.html#3300669">ok</a></span>&nbsp;<span class="op" id="3300710">||</span>&nbsp;<span class="ident" id="3300713"><a href="/gostd/net/ip.go.html#3300433">i</a></span>&nbsp;<span class="op" id="3300715">!=</span>&nbsp;<span class="builtinfunc" id="3300718">len</span><span class="op" id="3300721">(</span><span class="ident" id="3300722"><a href="/gostd/net/ip.go.html#3300528">mask</a></span><span class="op" id="3300726">)</span>&nbsp;<span class="op" id="3300728">||</span>&nbsp;<span class="ident" id="3300731"><a href="/gostd/net/ip.go.html#3300663">n</a></span>&nbsp;<span class="op" id="3300733">&lt;</span>&nbsp;<span class="num" id="3300735">0</span>&nbsp;<span class="op" id="3300737">||</span>&nbsp;<span class="ident" id="3300740"><a href="/gostd/net/ip.go.html#3300663">n</a></span>&nbsp;<span class="op" id="3300742">&gt;</span>&nbsp;<span class="num" id="3300744">8</span><span class="op" id="3300745">*</span><span class="ident" id="3300746"><a href="/gostd/net/ip.go.html#3300552">iplen</a></span>&nbsp;<span class="op" id="3300752">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3300756">return</span>&nbsp;<span class="builtintype" id="3300763">nil</span><span class="op" id="3300766">,</span>&nbsp;<span class="builtintype" id="3300768">nil</span><span class="op" id="3300771">,</span>&nbsp;<span class="op" id="3300773">&amp;</span><span class="ident" id="3300774"><a href="/gostd/net/ip.go.html#3299470">ParseError</a></span><span class="op" id="3300784">{</span><span class="string" id="3300785">&#34;CIDR&nbsp;address&#34;</span><span class="op" id="3300799">,</span>&nbsp;<span class="ident" id="3300801"><a href="/gostd/net/ip.go.html#3300400">s</a></span><span class="op" id="3300802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3300805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3300808">m</span>&nbsp;<span class="op" id="3300810">:=</span>&nbsp;<span class="ident" id="3300813"><a href="/gostd/net/ip.go.html#3287126">CIDRMask</a></span><span class="op" id="3300821">(</span><span class="ident" id="3300822"><a href="/gostd/net/ip.go.html#3300663">n</a></span><span class="op" id="3300823">,</span>&nbsp;<span class="num" id="3300825">8</span><span class="op" id="3300826">*</span><span class="ident" id="3300827"><a href="/gostd/net/ip.go.html#3300552">iplen</a></span><span class="op" id="3300832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3300835">return</span>&nbsp;<span class="ident" id="3300842"><a href="/gostd/net/ip.go.html#3300570">ip</a></span><span class="op" id="3300844">,</span>&nbsp;<span class="op" id="3300846">&amp;</span><span class="ident" id="3300847"><a href="/gostd/net/ip.go.html#3286377">IPNet</a></span><span class="op" id="3300852">{</span><span class="ident" id="3300853"><a href="/gostd/net/ip.go.html#3286393">IP</a></span><span class="op" id="3300855">:</span>&nbsp;<span class="ident" id="3300857"><a href="/gostd/net/ip.go.html#3300570">ip</a></span><span class="op" id="3300859">.</span><span class="ident" id="3300860"><a href="/gostd/net/ip.go.html#3291240">Mask</a></span><span class="op" id="3300864">(</span><span class="ident" id="3300865"><a href="/gostd/net/ip.go.html#3300808">m</a></span><span class="op" id="3300866">)</span><span class="op" id="3300867">,</span>&nbsp;<span class="ident" id="3300869"><a href="/gostd/net/ip.go.html#3286424">Mask</a></span><span class="op" id="3300873">:</span>&nbsp;<span class="ident" id="3300875"><a href="/gostd/net/ip.go.html#3300808">m</a></span><span class="op" id="3300876">}</span><span class="op" id="3300877">,</span>&nbsp;<span class="builtintype" id="3300879">nil</span><br>
<span class="lineno"></span><span class="op" id="3300883">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
