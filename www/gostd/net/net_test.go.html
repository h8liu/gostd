<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html" class="current">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6724873">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6724928">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6724982">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6725033">package</span>&nbsp;<span class="ident" id="6725041">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6725046">import</span>&nbsp;<span class="op" id="6725053">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6725056">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6725062">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6725075">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6725081">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6725092">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6725103">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6725110">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6725113">func</span>&nbsp;<span class="ident" id="6725118">TestShutdown</span><span class="op" id="6725130">(</span><span class="ident" id="6725131">t</span>&nbsp;<span class="op" id="6725133">*</span><span class="ident" id="6725134"><a href="/gostd/net/net_test.go.html#6725092">testing</a></span><span class="op" id="6725141">.</span><span class="ident" id="6725142"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6725143">)</span>&nbsp;<span class="op" id="6725145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725148">if</span>&nbsp;<span class="ident" id="6725151"><a href="/gostd/net/net_test.go.html#6725081">runtime</a></span><span class="op" id="6725158">.</span><span class="ident" id="6725159"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6725164">==</span>&nbsp;<span class="string" id="6725167">&#34;plan9&#34;</span>&nbsp;<span class="op" id="6725175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725179"><a href="/gostd/net/net_test.go.html#6725131">t</a></span><span class="op" id="6725180">.</span><span class="ident" id="6725181"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6725186">(</span><span class="string" id="6725187">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6725208">,</span>&nbsp;<span class="ident" id="6725210"><a href="/gostd/net/net_test.go.html#6725081">runtime</a></span><span class="op" id="6725217">.</span><span class="ident" id="6725218"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6725222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6725225">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725228">ln</span><span class="op" id="6725230">,</span>&nbsp;<span class="ident" id="6725232">err</span>&nbsp;<span class="op" id="6725236">:=</span>&nbsp;<span class="ident" id="6725239"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6725245">(</span><span class="string" id="6725246">&#34;tcp&#34;</span><span class="op" id="6725251">,</span>&nbsp;<span class="string" id="6725253">&#34;127.0.0.1:0&#34;</span><span class="op" id="6725266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725269">if</span>&nbsp;<span class="ident" id="6725272"><a href="/gostd/net/net_test.go.html#6725232">err</a></span>&nbsp;<span class="op" id="6725276">!=</span>&nbsp;<span class="builtintype" id="6725279">nil</span>&nbsp;<span class="op" id="6725283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725287">if</span>&nbsp;<span class="ident" id="6725290"><a href="/gostd/net/net_test.go.html#6725228">ln</a></span><span class="op" id="6725292">,</span>&nbsp;<span class="ident" id="6725294"><a href="/gostd/net/net_test.go.html#6725232">err</a></span>&nbsp;<span class="op" id="6725298">=</span>&nbsp;<span class="ident" id="6725300"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6725306">(</span><span class="string" id="6725307">&#34;tcp6&#34;</span><span class="op" id="6725313">,</span>&nbsp;<span class="string" id="6725315">&#34;[::1]:0&#34;</span><span class="op" id="6725324">)</span><span class="op" id="6725325">;</span>&nbsp;<span class="ident" id="6725327"><a href="/gostd/net/net_test.go.html#6725232">err</a></span>&nbsp;<span class="op" id="6725331">!=</span>&nbsp;<span class="builtintype" id="6725334">nil</span>&nbsp;<span class="op" id="6725338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725343"><a href="/gostd/net/net_test.go.html#6725131">t</a></span><span class="op" id="6725344">.</span><span class="ident" id="6725345"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6725351">(</span><span class="string" id="6725352">&#34;ListenTCP&nbsp;on&nbsp;:0:&nbsp;%v&#34;</span><span class="op" id="6725373">,</span>&nbsp;<span class="ident" id="6725375"><a href="/gostd/net/net_test.go.html#6725232">err</a></span><span class="op" id="6725378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6725382">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6725385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725389">go</span>&nbsp;<span class="keyword" id="6725392">func</span><span class="op" id="6725396">(</span><span class="op" id="6725397">)</span>&nbsp;<span class="op" id="6725399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725403">defer</span>&nbsp;<span class="ident" id="6725409"><a href="/gostd/net/net_test.go.html#6725228">ln</a></span><span class="op" id="6725411">.</span><span class="ident" id="6725412"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6725417">(</span><span class="op" id="6725418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725422">c</span><span class="op" id="6725423">,</span>&nbsp;<span class="ident" id="6725425">err</span>&nbsp;<span class="op" id="6725429">:=</span>&nbsp;<span class="ident" id="6725432"><a href="/gostd/net/net_test.go.html#6725228">ln</a></span><span class="op" id="6725434">.</span><span class="ident" id="6725435"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="6725441">(</span><span class="op" id="6725442">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725446">if</span>&nbsp;<span class="ident" id="6725449"><a href="/gostd/net/net_test.go.html#6725425">err</a></span>&nbsp;<span class="op" id="6725453">!=</span>&nbsp;<span class="builtintype" id="6725456">nil</span>&nbsp;<span class="op" id="6725460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725465"><a href="/gostd/net/net_test.go.html#6725131">t</a></span><span class="op" id="6725466">.</span><span class="ident" id="6725467"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6725473">(</span><span class="string" id="6725474">&#34;Accept:&nbsp;%v&#34;</span><span class="op" id="6725486">,</span>&nbsp;<span class="ident" id="6725488"><a href="/gostd/net/net_test.go.html#6725425">err</a></span><span class="op" id="6725491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725496">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6725505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725509">var</span>&nbsp;<span class="ident" id="6725513">buf</span>&nbsp;<span class="op" id="6725517">[</span><span class="num" id="6725518">10</span><span class="op" id="6725520">]</span><span class="builtintype" id="6725521">byte</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725528">n</span><span class="op" id="6725529">,</span>&nbsp;<span class="ident" id="6725531"><a href="/gostd/net/net_test.go.html#6725425">err</a></span>&nbsp;<span class="op" id="6725535">:=</span>&nbsp;<span class="ident" id="6725538"><a href="/gostd/net/net_test.go.html#6725422">c</a></span><span class="op" id="6725539">.</span><span class="ident" id="6725540"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6725544">(</span><span class="ident" id="6725545"><a href="/gostd/net/net_test.go.html#6725513">buf</a></span><span class="op" id="6725548">[</span><span class="op" id="6725549">:</span><span class="op" id="6725550">]</span><span class="op" id="6725551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725555">if</span>&nbsp;<span class="ident" id="6725558"><a href="/gostd/net/net_test.go.html#6725528">n</a></span>&nbsp;<span class="op" id="6725560">!=</span>&nbsp;<span class="num" id="6725563">0</span>&nbsp;<span class="op" id="6725565">||</span>&nbsp;<span class="ident" id="6725568"><a href="/gostd/net/net_test.go.html#6725425">err</a></span>&nbsp;<span class="op" id="6725572">!=</span>&nbsp;<span class="ident" id="6725575"><a href="/gostd/net/net_test.go.html#6725056">io</a></span><span class="op" id="6725577">.</span><span class="ident" id="6725578"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="6725582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725587"><a href="/gostd/net/net_test.go.html#6725131">t</a></span><span class="op" id="6725588">.</span><span class="ident" id="6725589"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6725595">(</span><span class="string" id="6725596">&#34;server&nbsp;Read&nbsp;=&nbsp;%d,&nbsp;%v;&nbsp;want&nbsp;0,&nbsp;io.EOF&#34;</span><span class="op" id="6725634">,</span>&nbsp;<span class="ident" id="6725636"><a href="/gostd/net/net_test.go.html#6725528">n</a></span><span class="op" id="6725637">,</span>&nbsp;<span class="ident" id="6725639"><a href="/gostd/net/net_test.go.html#6725425">err</a></span><span class="op" id="6725642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725647">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6725656">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725660"><a href="/gostd/net/net_test.go.html#6725422">c</a></span><span class="op" id="6725661">.</span><span class="ident" id="6725662"><a href="/gostd/net/net.go.html#3334839">Write</a></span><span class="op" id="6725667">(</span><span class="op" id="6725668">[</span><span class="op" id="6725669">]</span><span class="builtintype" id="6725670">byte</span><span class="op" id="6725674">(</span><span class="string" id="6725675">&#34;response&#34;</span><span class="op" id="6725685">)</span><span class="op" id="6725686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725690"><a href="/gostd/net/net_test.go.html#6725422">c</a></span><span class="op" id="6725691">.</span><span class="ident" id="6725692"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6725697">(</span><span class="op" id="6725698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6725701">}</span><span class="op" id="6725702">(</span><span class="op" id="6725703">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725707">c</span><span class="op" id="6725708">,</span>&nbsp;<span class="ident" id="6725710"><a href="/gostd/net/net_test.go.html#6725232">err</a></span>&nbsp;<span class="op" id="6725714">:=</span>&nbsp;<span class="ident" id="6725717"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6725721">(</span><span class="string" id="6725722">&#34;tcp&#34;</span><span class="op" id="6725727">,</span>&nbsp;<span class="ident" id="6725729"><a href="/gostd/net/net_test.go.html#6725228">ln</a></span><span class="op" id="6725731">.</span><span class="ident" id="6725732"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6725736">(</span><span class="op" id="6725737">)</span><span class="op" id="6725738">.</span><span class="ident" id="6725739"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6725745">(</span><span class="op" id="6725746">)</span><span class="op" id="6725747">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725750">if</span>&nbsp;<span class="ident" id="6725753"><a href="/gostd/net/net_test.go.html#6725232">err</a></span>&nbsp;<span class="op" id="6725757">!=</span>&nbsp;<span class="builtintype" id="6725760">nil</span>&nbsp;<span class="op" id="6725764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725768"><a href="/gostd/net/net_test.go.html#6725131">t</a></span><span class="op" id="6725769">.</span><span class="ident" id="6725770"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6725776">(</span><span class="string" id="6725777">&#34;Dial:&nbsp;%v&#34;</span><span class="op" id="6725787">,</span>&nbsp;<span class="ident" id="6725789"><a href="/gostd/net/net_test.go.html#6725232">err</a></span><span class="op" id="6725792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6725795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725798">defer</span>&nbsp;<span class="ident" id="6725804"><a href="/gostd/net/net_test.go.html#6725707">c</a></span><span class="op" id="6725805">.</span><span class="ident" id="6725806"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6725811">(</span><span class="op" id="6725812">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725816"><a href="/gostd/net/net_test.go.html#6725232">err</a></span>&nbsp;<span class="op" id="6725820">=</span>&nbsp;<span class="ident" id="6725822"><a href="/gostd/net/net_test.go.html#6725707">c</a></span><span class="op" id="6725823">.</span><span class="op" id="6725824">(</span><span class="op" id="6725825">*</span><span class="ident" id="6725826"><a href="/gostd/net/tcpsock_posix.go.html#3376101">TCPConn</a></span><span class="op" id="6725833">)</span><span class="op" id="6725834">.</span><span class="ident" id="6725835"><a href="/gostd/net/tcpsock_posix.go.html#3376774">CloseWrite</a></span><span class="op" id="6725845">(</span><span class="op" id="6725846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725849">if</span>&nbsp;<span class="ident" id="6725852"><a href="/gostd/net/net_test.go.html#6725232">err</a></span>&nbsp;<span class="op" id="6725856">!=</span>&nbsp;<span class="builtintype" id="6725859">nil</span>&nbsp;<span class="op" id="6725863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725867"><a href="/gostd/net/net_test.go.html#6725131">t</a></span><span class="op" id="6725868">.</span><span class="ident" id="6725869"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6725875">(</span><span class="string" id="6725876">&#34;CloseWrite:&nbsp;%v&#34;</span><span class="op" id="6725892">,</span>&nbsp;<span class="ident" id="6725894"><a href="/gostd/net/net_test.go.html#6725232">err</a></span><span class="op" id="6725897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6725900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725903">var</span>&nbsp;<span class="ident" id="6725907">buf</span>&nbsp;<span class="op" id="6725911">[</span><span class="num" id="6725912">10</span><span class="op" id="6725914">]</span><span class="builtintype" id="6725915">byte</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725921">n</span><span class="op" id="6725922">,</span>&nbsp;<span class="ident" id="6725924"><a href="/gostd/net/net_test.go.html#6725232">err</a></span>&nbsp;<span class="op" id="6725928">:=</span>&nbsp;<span class="ident" id="6725931"><a href="/gostd/net/net_test.go.html#6725707">c</a></span><span class="op" id="6725932">.</span><span class="ident" id="6725933"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6725937">(</span><span class="ident" id="6725938"><a href="/gostd/net/net_test.go.html#6725907">buf</a></span><span class="op" id="6725941">[</span><span class="op" id="6725942">:</span><span class="op" id="6725943">]</span><span class="op" id="6725944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6725947">if</span>&nbsp;<span class="ident" id="6725950"><a href="/gostd/net/net_test.go.html#6725232">err</a></span>&nbsp;<span class="op" id="6725954">!=</span>&nbsp;<span class="builtintype" id="6725957">nil</span>&nbsp;<span class="op" id="6725961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6725965"><a href="/gostd/net/net_test.go.html#6725131">t</a></span><span class="op" id="6725966">.</span><span class="ident" id="6725967"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6725973">(</span><span class="string" id="6725974">&#34;client&nbsp;Read:&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="6725995">,</span>&nbsp;<span class="ident" id="6725997"><a href="/gostd/net/net_test.go.html#6725921">n</a></span><span class="op" id="6725998">,</span>&nbsp;<span class="ident" id="6726000"><a href="/gostd/net/net_test.go.html#6725232">err</a></span><span class="op" id="6726003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6726006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726009">got</span>&nbsp;<span class="op" id="6726013">:=</span>&nbsp;<span class="builtintype" id="6726016">string</span><span class="op" id="6726022">(</span><span class="ident" id="6726023"><a href="/gostd/net/net_test.go.html#6725907">buf</a></span><span class="op" id="6726026">[</span><span class="op" id="6726027">:</span><span class="ident" id="6726028"><a href="/gostd/net/net_test.go.html#6725921">n</a></span><span class="op" id="6726029">]</span><span class="op" id="6726030">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726033">if</span>&nbsp;<span class="ident" id="6726036"><a href="/gostd/net/net_test.go.html#6726009">got</a></span>&nbsp;<span class="op" id="6726040">!=</span>&nbsp;<span class="string" id="6726043">&#34;response&#34;</span>&nbsp;<span class="op" id="6726054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726058"><a href="/gostd/net/net_test.go.html#6725131">t</a></span><span class="op" id="6726059">.</span><span class="ident" id="6726060"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6726066">(</span><span class="string" id="6726067">&#34;read&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;response\&#34;&#34;</span><span class="op" id="6726097">,</span>&nbsp;<span class="ident" id="6726099"><a href="/gostd/net/net_test.go.html#6726009">got</a></span><span class="op" id="6726102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6726105">}</span><br>
<span class="lineno"></span><span class="op" id="6726107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="6726110">func</span>&nbsp;<span class="ident" id="6726115">TestShutdownUnix</span><span class="op" id="6726131">(</span><span class="ident" id="6726132">t</span>&nbsp;<span class="op" id="6726134">*</span><span class="ident" id="6726135"><a href="/gostd/net/net_test.go.html#6725092">testing</a></span><span class="op" id="6726142">.</span><span class="ident" id="6726143"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6726144">)</span>&nbsp;<span class="op" id="6726146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726149">switch</span>&nbsp;<span class="ident" id="6726156"><a href="/gostd/net/net_test.go.html#6725081">runtime</a></span><span class="op" id="6726163">.</span><span class="ident" id="6726164"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6726169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726172">case</span>&nbsp;<span class="string" id="6726177">&#34;nacl&#34;</span><span class="op" id="6726183">,</span>&nbsp;<span class="string" id="6726185">&#34;plan9&#34;</span><span class="op" id="6726192">,</span>&nbsp;<span class="string" id="6726194">&#34;windows&#34;</span><span class="op" id="6726203">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726207"><a href="/gostd/net/net_test.go.html#6726132">t</a></span><span class="op" id="6726208">.</span><span class="ident" id="6726209"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6726214">(</span><span class="string" id="6726215">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6726236">,</span>&nbsp;<span class="ident" id="6726238"><a href="/gostd/net/net_test.go.html#6725081">runtime</a></span><span class="op" id="6726245">.</span><span class="ident" id="6726246"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6726250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6726253">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726256">f</span><span class="op" id="6726257">,</span>&nbsp;<span class="ident" id="6726259">err</span>&nbsp;<span class="op" id="6726263">:=</span>&nbsp;<span class="ident" id="6726266"><a href="/gostd/net/net_test.go.html#6725062">ioutil</a></span><span class="op" id="6726272">.</span><span class="ident" id="6726273"><a href="/gostd/io/ioutil/tempfile.go.html#3769783">TempFile</a></span><span class="op" id="6726281">(</span><span class="string" id="6726282">&#34;&#34;</span><span class="op" id="6726284">,</span>&nbsp;<span class="string" id="6726286">&#34;go_net_unixtest&#34;</span><span class="op" id="6726303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726306">if</span>&nbsp;<span class="ident" id="6726309"><a href="/gostd/net/net_test.go.html#6726259">err</a></span>&nbsp;<span class="op" id="6726313">!=</span>&nbsp;<span class="builtintype" id="6726316">nil</span>&nbsp;<span class="op" id="6726320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726324"><a href="/gostd/net/net_test.go.html#6726132">t</a></span><span class="op" id="6726325">.</span><span class="ident" id="6726326"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6726332">(</span><span class="string" id="6726333">&#34;TempFile:&nbsp;%s&#34;</span><span class="op" id="6726347">,</span>&nbsp;<span class="ident" id="6726349"><a href="/gostd/net/net_test.go.html#6726259">err</a></span><span class="op" id="6726352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6726355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726358"><a href="/gostd/net/net_test.go.html#6726256">f</a></span><span class="op" id="6726359">.</span><span class="ident" id="6726360"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="6726365">(</span><span class="op" id="6726366">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726369">tmpname</span>&nbsp;<span class="op" id="6726377">:=</span>&nbsp;<span class="ident" id="6726380"><a href="/gostd/net/net_test.go.html#6726256">f</a></span><span class="op" id="6726381">.</span><span class="ident" id="6726382"><a href="/gostd/os/file.go.html#2441585">Name</a></span><span class="op" id="6726386">(</span><span class="op" id="6726387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726390"><a href="/gostd/net/net_test.go.html#6725075">os</a></span><span class="op" id="6726392">.</span><span class="ident" id="6726393"><a href="/gostd/os/file_unix.go.html#2459394">Remove</a></span><span class="op" id="6726399">(</span><span class="ident" id="6726400"><a href="/gostd/net/net_test.go.html#6726369">tmpname</a></span><span class="op" id="6726407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726410">ln</span><span class="op" id="6726412">,</span>&nbsp;<span class="ident" id="6726414"><a href="/gostd/net/net_test.go.html#6726259">err</a></span>&nbsp;<span class="op" id="6726418">:=</span>&nbsp;<span class="ident" id="6726421"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6726427">(</span><span class="string" id="6726428">&#34;unix&#34;</span><span class="op" id="6726434">,</span>&nbsp;<span class="ident" id="6726436"><a href="/gostd/net/net_test.go.html#6726369">tmpname</a></span><span class="op" id="6726443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726446">if</span>&nbsp;<span class="ident" id="6726449"><a href="/gostd/net/net_test.go.html#6726259">err</a></span>&nbsp;<span class="op" id="6726453">!=</span>&nbsp;<span class="builtintype" id="6726456">nil</span>&nbsp;<span class="op" id="6726460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726464"><a href="/gostd/net/net_test.go.html#6726132">t</a></span><span class="op" id="6726465">.</span><span class="ident" id="6726466"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6726472">(</span><span class="string" id="6726473">&#34;ListenUnix&nbsp;on&nbsp;%s:&nbsp;%s&#34;</span><span class="op" id="6726495">,</span>&nbsp;<span class="ident" id="6726497"><a href="/gostd/net/net_test.go.html#6726369">tmpname</a></span><span class="op" id="6726504">,</span>&nbsp;<span class="ident" id="6726506"><a href="/gostd/net/net_test.go.html#6726259">err</a></span><span class="op" id="6726509">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6726512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726515">defer</span>&nbsp;<span class="keyword" id="6726521">func</span><span class="op" id="6726525">(</span><span class="op" id="6726526">)</span>&nbsp;<span class="op" id="6726528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726532"><a href="/gostd/net/net_test.go.html#6726410">ln</a></span><span class="op" id="6726534">.</span><span class="ident" id="6726535"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6726540">(</span><span class="op" id="6726541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726545"><a href="/gostd/net/net_test.go.html#6725075">os</a></span><span class="op" id="6726547">.</span><span class="ident" id="6726548"><a href="/gostd/os/file_unix.go.html#2459394">Remove</a></span><span class="op" id="6726554">(</span><span class="ident" id="6726555"><a href="/gostd/net/net_test.go.html#6726369">tmpname</a></span><span class="op" id="6726562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6726565">}</span><span class="op" id="6726566">(</span><span class="op" id="6726567">)</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726571">go</span>&nbsp;<span class="keyword" id="6726574">func</span><span class="op" id="6726578">(</span><span class="op" id="6726579">)</span>&nbsp;<span class="op" id="6726581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726585">c</span><span class="op" id="6726586">,</span>&nbsp;<span class="ident" id="6726588">err</span>&nbsp;<span class="op" id="6726592">:=</span>&nbsp;<span class="ident" id="6726595"><a href="/gostd/net/net_test.go.html#6726410">ln</a></span><span class="op" id="6726597">.</span><span class="ident" id="6726598"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="6726604">(</span><span class="op" id="6726605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726609">if</span>&nbsp;<span class="ident" id="6726612"><a href="/gostd/net/net_test.go.html#6726588">err</a></span>&nbsp;<span class="op" id="6726616">!=</span>&nbsp;<span class="builtintype" id="6726619">nil</span>&nbsp;<span class="op" id="6726623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726628"><a href="/gostd/net/net_test.go.html#6726132">t</a></span><span class="op" id="6726629">.</span><span class="ident" id="6726630"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6726636">(</span><span class="string" id="6726637">&#34;Accept:&nbsp;%v&#34;</span><span class="op" id="6726649">,</span>&nbsp;<span class="ident" id="6726651"><a href="/gostd/net/net_test.go.html#6726588">err</a></span><span class="op" id="6726654">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726659">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6726668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726672">var</span>&nbsp;<span class="ident" id="6726676">buf</span>&nbsp;<span class="op" id="6726680">[</span><span class="num" id="6726681">10</span><span class="op" id="6726683">]</span><span class="builtintype" id="6726684">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726691">n</span><span class="op" id="6726692">,</span>&nbsp;<span class="ident" id="6726694"><a href="/gostd/net/net_test.go.html#6726588">err</a></span>&nbsp;<span class="op" id="6726698">:=</span>&nbsp;<span class="ident" id="6726701"><a href="/gostd/net/net_test.go.html#6726585">c</a></span><span class="op" id="6726702">.</span><span class="ident" id="6726703"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6726707">(</span><span class="ident" id="6726708"><a href="/gostd/net/net_test.go.html#6726676">buf</a></span><span class="op" id="6726711">[</span><span class="op" id="6726712">:</span><span class="op" id="6726713">]</span><span class="op" id="6726714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726718">if</span>&nbsp;<span class="ident" id="6726721"><a href="/gostd/net/net_test.go.html#6726691">n</a></span>&nbsp;<span class="op" id="6726723">!=</span>&nbsp;<span class="num" id="6726726">0</span>&nbsp;<span class="op" id="6726728">||</span>&nbsp;<span class="ident" id="6726731"><a href="/gostd/net/net_test.go.html#6726588">err</a></span>&nbsp;<span class="op" id="6726735">!=</span>&nbsp;<span class="ident" id="6726738"><a href="/gostd/net/net_test.go.html#6725056">io</a></span><span class="op" id="6726740">.</span><span class="ident" id="6726741"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="6726745">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726750"><a href="/gostd/net/net_test.go.html#6726132">t</a></span><span class="op" id="6726751">.</span><span class="ident" id="6726752"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6726758">(</span><span class="string" id="6726759">&#34;server&nbsp;Read&nbsp;=&nbsp;%d,&nbsp;%v;&nbsp;want&nbsp;0,&nbsp;io.EOF&#34;</span><span class="op" id="6726797">,</span>&nbsp;<span class="ident" id="6726799"><a href="/gostd/net/net_test.go.html#6726691">n</a></span><span class="op" id="6726800">,</span>&nbsp;<span class="ident" id="6726802"><a href="/gostd/net/net_test.go.html#6726588">err</a></span><span class="op" id="6726805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726810">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6726819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726823"><a href="/gostd/net/net_test.go.html#6726585">c</a></span><span class="op" id="6726824">.</span><span class="ident" id="6726825"><a href="/gostd/net/net.go.html#3334839">Write</a></span><span class="op" id="6726830">(</span><span class="op" id="6726831">[</span><span class="op" id="6726832">]</span><span class="builtintype" id="6726833">byte</span><span class="op" id="6726837">(</span><span class="string" id="6726838">&#34;response&#34;</span><span class="op" id="6726848">)</span><span class="op" id="6726849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726853"><a href="/gostd/net/net_test.go.html#6726585">c</a></span><span class="op" id="6726854">.</span><span class="ident" id="6726855"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6726860">(</span><span class="op" id="6726861">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6726864">}</span><span class="op" id="6726865">(</span><span class="op" id="6726866">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726870">c</span><span class="op" id="6726871">,</span>&nbsp;<span class="ident" id="6726873"><a href="/gostd/net/net_test.go.html#6726259">err</a></span>&nbsp;<span class="op" id="6726877">:=</span>&nbsp;<span class="ident" id="6726880"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6726884">(</span><span class="string" id="6726885">&#34;unix&#34;</span><span class="op" id="6726891">,</span>&nbsp;<span class="ident" id="6726893"><a href="/gostd/net/net_test.go.html#6726369">tmpname</a></span><span class="op" id="6726900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726903">if</span>&nbsp;<span class="ident" id="6726906"><a href="/gostd/net/net_test.go.html#6726259">err</a></span>&nbsp;<span class="op" id="6726910">!=</span>&nbsp;<span class="builtintype" id="6726913">nil</span>&nbsp;<span class="op" id="6726917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726921"><a href="/gostd/net/net_test.go.html#6726132">t</a></span><span class="op" id="6726922">.</span><span class="ident" id="6726923"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6726929">(</span><span class="string" id="6726930">&#34;Dial:&nbsp;%v&#34;</span><span class="op" id="6726940">,</span>&nbsp;<span class="ident" id="6726942"><a href="/gostd/net/net_test.go.html#6726259">err</a></span><span class="op" id="6726945">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6726948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6726951">defer</span>&nbsp;<span class="ident" id="6726957"><a href="/gostd/net/net_test.go.html#6726870">c</a></span><span class="op" id="6726958">.</span><span class="ident" id="6726959"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6726964">(</span><span class="op" id="6726965">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6726969"><a href="/gostd/net/net_test.go.html#6726259">err</a></span>&nbsp;<span class="op" id="6726973">=</span>&nbsp;<span class="ident" id="6726975"><a href="/gostd/net/net_test.go.html#6726870">c</a></span><span class="op" id="6726976">.</span><span class="op" id="6726977">(</span><span class="op" id="6726978">*</span><span class="ident" id="6726979"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="6726987">)</span><span class="op" id="6726988">.</span><span class="ident" id="6726989"><a href="/gostd/net/unixsock_posix.go.html#3402214">CloseWrite</a></span><span class="op" id="6726999">(</span><span class="op" id="6727000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727003">if</span>&nbsp;<span class="ident" id="6727006"><a href="/gostd/net/net_test.go.html#6726259">err</a></span>&nbsp;<span class="op" id="6727010">!=</span>&nbsp;<span class="builtintype" id="6727013">nil</span>&nbsp;<span class="op" id="6727017">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727021"><a href="/gostd/net/net_test.go.html#6726132">t</a></span><span class="op" id="6727022">.</span><span class="ident" id="6727023"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6727029">(</span><span class="string" id="6727030">&#34;CloseWrite:&nbsp;%v&#34;</span><span class="op" id="6727046">,</span>&nbsp;<span class="ident" id="6727048"><a href="/gostd/net/net_test.go.html#6726259">err</a></span><span class="op" id="6727051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6727054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727057">var</span>&nbsp;<span class="ident" id="6727061">buf</span>&nbsp;<span class="op" id="6727065">[</span><span class="num" id="6727066">10</span><span class="op" id="6727068">]</span><span class="builtintype" id="6727069">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727075">n</span><span class="op" id="6727076">,</span>&nbsp;<span class="ident" id="6727078"><a href="/gostd/net/net_test.go.html#6726259">err</a></span>&nbsp;<span class="op" id="6727082">:=</span>&nbsp;<span class="ident" id="6727085"><a href="/gostd/net/net_test.go.html#6726870">c</a></span><span class="op" id="6727086">.</span><span class="ident" id="6727087"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6727091">(</span><span class="ident" id="6727092"><a href="/gostd/net/net_test.go.html#6727061">buf</a></span><span class="op" id="6727095">[</span><span class="op" id="6727096">:</span><span class="op" id="6727097">]</span><span class="op" id="6727098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727101">if</span>&nbsp;<span class="ident" id="6727104"><a href="/gostd/net/net_test.go.html#6726259">err</a></span>&nbsp;<span class="op" id="6727108">!=</span>&nbsp;<span class="builtintype" id="6727111">nil</span>&nbsp;<span class="op" id="6727115">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727119"><a href="/gostd/net/net_test.go.html#6726132">t</a></span><span class="op" id="6727120">.</span><span class="ident" id="6727121"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6727127">(</span><span class="string" id="6727128">&#34;client&nbsp;Read:&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="6727149">,</span>&nbsp;<span class="ident" id="6727151"><a href="/gostd/net/net_test.go.html#6727075">n</a></span><span class="op" id="6727152">,</span>&nbsp;<span class="ident" id="6727154"><a href="/gostd/net/net_test.go.html#6726259">err</a></span><span class="op" id="6727157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6727160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727163">got</span>&nbsp;<span class="op" id="6727167">:=</span>&nbsp;<span class="builtintype" id="6727170">string</span><span class="op" id="6727176">(</span><span class="ident" id="6727177"><a href="/gostd/net/net_test.go.html#6727061">buf</a></span><span class="op" id="6727180">[</span><span class="op" id="6727181">:</span><span class="ident" id="6727182"><a href="/gostd/net/net_test.go.html#6727075">n</a></span><span class="op" id="6727183">]</span><span class="op" id="6727184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727187">if</span>&nbsp;<span class="ident" id="6727190"><a href="/gostd/net/net_test.go.html#6727163">got</a></span>&nbsp;<span class="op" id="6727194">!=</span>&nbsp;<span class="string" id="6727197">&#34;response&#34;</span>&nbsp;<span class="op" id="6727208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727212"><a href="/gostd/net/net_test.go.html#6726132">t</a></span><span class="op" id="6727213">.</span><span class="ident" id="6727214"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6727220">(</span><span class="string" id="6727221">&#34;read&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;response\&#34;&#34;</span><span class="op" id="6727251">,</span>&nbsp;<span class="ident" id="6727253"><a href="/gostd/net/net_test.go.html#6727163">got</a></span><span class="op" id="6727256">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6727259">}</span><br>
<span class="lineno"></span><span class="op" id="6727261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6727264">func</span>&nbsp;<span class="ident" id="6727269">TestTCPListenClose</span><span class="op" id="6727287">(</span><span class="ident" id="6727288">t</span>&nbsp;<span class="op" id="6727290">*</span><span class="ident" id="6727291"><a href="/gostd/net/net_test.go.html#6725092">testing</a></span><span class="op" id="6727298">.</span><span class="ident" id="6727299"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6727300">)</span>&nbsp;<span class="op" id="6727302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727305">ln</span><span class="op" id="6727307">,</span>&nbsp;<span class="ident" id="6727309">err</span>&nbsp;<span class="op" id="6727313">:=</span>&nbsp;<span class="ident" id="6727316"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6727322">(</span><span class="string" id="6727323">&#34;tcp&#34;</span><span class="op" id="6727328">,</span>&nbsp;<span class="string" id="6727330">&#34;127.0.0.1:0&#34;</span><span class="op" id="6727343">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727346">if</span>&nbsp;<span class="ident" id="6727349"><a href="/gostd/net/net_test.go.html#6727309">err</a></span>&nbsp;<span class="op" id="6727353">!=</span>&nbsp;<span class="builtintype" id="6727356">nil</span>&nbsp;<span class="op" id="6727360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727364"><a href="/gostd/net/net_test.go.html#6727288">t</a></span><span class="op" id="6727365">.</span><span class="ident" id="6727366"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6727372">(</span><span class="string" id="6727373">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6727392">,</span>&nbsp;<span class="ident" id="6727394"><a href="/gostd/net/net_test.go.html#6727309">err</a></span><span class="op" id="6727397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6727400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727404">done</span>&nbsp;<span class="op" id="6727409">:=</span>&nbsp;<span class="builtinfunc" id="6727412">make</span><span class="op" id="6727416">(</span><span class="keyword" id="6727417">chan</span>&nbsp;<span class="builtintype" id="6727422">bool</span><span class="op" id="6727426">,</span>&nbsp;<span class="num" id="6727428">1</span><span class="op" id="6727429">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727432">go</span>&nbsp;<span class="keyword" id="6727435">func</span><span class="op" id="6727439">(</span><span class="op" id="6727440">)</span>&nbsp;<span class="op" id="6727442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727446"><a href="/gostd/net/net_test.go.html#6725103">time</a></span><span class="op" id="6727450">.</span><span class="ident" id="6727451"><a href="/gostd/time/sleep.go.html#2713940">Sleep</a></span><span class="op" id="6727456">(</span><span class="num" id="6727457">100</span>&nbsp;<span class="op" id="6727461">*</span>&nbsp;<span class="ident" id="6727463"><a href="/gostd/net/net_test.go.html#6725103">time</a></span><span class="op" id="6727467">.</span><span class="ident" id="6727468"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6727479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727483"><a href="/gostd/net/net_test.go.html#6727305">ln</a></span><span class="op" id="6727485">.</span><span class="ident" id="6727486"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6727491">(</span><span class="op" id="6727492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6727495">}</span><span class="op" id="6727496">(</span><span class="op" id="6727497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727500">go</span>&nbsp;<span class="keyword" id="6727503">func</span><span class="op" id="6727507">(</span><span class="op" id="6727508">)</span>&nbsp;<span class="op" id="6727510">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727514">c</span><span class="op" id="6727515">,</span>&nbsp;<span class="ident" id="6727517">err</span>&nbsp;<span class="op" id="6727521">:=</span>&nbsp;<span class="ident" id="6727524"><a href="/gostd/net/net_test.go.html#6727305">ln</a></span><span class="op" id="6727526">.</span><span class="ident" id="6727527"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="6727533">(</span><span class="op" id="6727534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727538">if</span>&nbsp;<span class="ident" id="6727541"><a href="/gostd/net/net_test.go.html#6727517">err</a></span>&nbsp;<span class="op" id="6727545">==</span>&nbsp;<span class="builtintype" id="6727548">nil</span>&nbsp;<span class="op" id="6727552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727557"><a href="/gostd/net/net_test.go.html#6727514">c</a></span><span class="op" id="6727558">.</span><span class="ident" id="6727559"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6727564">(</span><span class="op" id="6727565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727570"><a href="/gostd/net/net_test.go.html#6727288">t</a></span><span class="op" id="6727571">.</span><span class="ident" id="6727572"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="6727577">(</span><span class="string" id="6727578">&#34;Accept&nbsp;succeeded&#34;</span><span class="op" id="6727596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6727600">}</span>&nbsp;<span class="keyword" id="6727602">else</span>&nbsp;<span class="op" id="6727607">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727612"><a href="/gostd/net/net_test.go.html#6727288">t</a></span><span class="op" id="6727613">.</span><span class="ident" id="6727614"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6727618">(</span><span class="string" id="6727619">&#34;Accept&nbsp;timeout&nbsp;error:&nbsp;%s&nbsp;(any&nbsp;error&nbsp;is&nbsp;fine)&#34;</span><span class="op" id="6727665">,</span>&nbsp;<span class="ident" id="6727667"><a href="/gostd/net/net_test.go.html#6727517">err</a></span><span class="op" id="6727670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6727674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727678"><a href="/gostd/net/net_test.go.html#6727404">done</a></span>&nbsp;<span class="op" id="6727683">&lt;-</span>&nbsp;<span class="builtintype" id="6727686">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6727692">}</span><span class="op" id="6727693">(</span><span class="op" id="6727694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727697">select</span>&nbsp;<span class="op" id="6727704">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727707">case</span>&nbsp;<span class="op" id="6727712">&lt;-</span><span class="ident" id="6727714"><a href="/gostd/net/net_test.go.html#6727404">done</a></span><span class="op" id="6727718">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727721">case</span>&nbsp;<span class="op" id="6727726">&lt;-</span><span class="ident" id="6727728"><a href="/gostd/net/net_test.go.html#6725103">time</a></span><span class="op" id="6727732">.</span><span class="ident" id="6727733"><a href="/gostd/time/sleep.go.html#2716644">After</a></span><span class="op" id="6727738">(</span><span class="num" id="6727739">2</span>&nbsp;<span class="op" id="6727741">*</span>&nbsp;<span class="ident" id="6727743"><a href="/gostd/net/net_test.go.html#6725103">time</a></span><span class="op" id="6727747">.</span><span class="ident" id="6727748"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6727754">)</span><span class="op" id="6727755">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727759"><a href="/gostd/net/net_test.go.html#6727288">t</a></span><span class="op" id="6727760">.</span><span class="ident" id="6727761"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6727766">(</span><span class="string" id="6727767">&#34;timeout&nbsp;waiting&nbsp;for&nbsp;TCP&nbsp;close&#34;</span><span class="op" id="6727798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6727801">}</span><br>
<span class="lineno"></span><span class="op" id="6727803">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="6727806">func</span>&nbsp;<span class="ident" id="6727811">TestUDPListenClose</span><span class="op" id="6727829">(</span><span class="ident" id="6727830">t</span>&nbsp;<span class="op" id="6727832">*</span><span class="ident" id="6727833"><a href="/gostd/net/net_test.go.html#6725092">testing</a></span><span class="op" id="6727840">.</span><span class="ident" id="6727841"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6727842">)</span>&nbsp;<span class="op" id="6727844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727847">switch</span>&nbsp;<span class="ident" id="6727854"><a href="/gostd/net/net_test.go.html#6725081">runtime</a></span><span class="op" id="6727861">.</span><span class="ident" id="6727862"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6727867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727870">case</span>&nbsp;<span class="string" id="6727875">&#34;plan9&#34;</span><span class="op" id="6727882">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727886"><a href="/gostd/net/net_test.go.html#6727830">t</a></span><span class="op" id="6727887">.</span><span class="ident" id="6727888"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6727893">(</span><span class="string" id="6727894">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6727915">,</span>&nbsp;<span class="ident" id="6727917"><a href="/gostd/net/net_test.go.html#6725081">runtime</a></span><span class="op" id="6727924">.</span><span class="ident" id="6727925"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6727929">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6727932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6727935">ln</span><span class="op" id="6727937">,</span>&nbsp;<span class="ident" id="6727939">err</span>&nbsp;<span class="op" id="6727943">:=</span>&nbsp;<span class="ident" id="6727946"><a href="/gostd/net/dial.go.html#3207909">ListenPacket</a></span><span class="op" id="6727958">(</span><span class="string" id="6727959">&#34;udp&#34;</span><span class="op" id="6727964">,</span>&nbsp;<span class="string" id="6727966">&#34;127.0.0.1:0&#34;</span><span class="op" id="6727979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6727982">if</span>&nbsp;<span class="ident" id="6727985"><a href="/gostd/net/net_test.go.html#6727939">err</a></span>&nbsp;<span class="op" id="6727989">!=</span>&nbsp;<span class="builtintype" id="6727992">nil</span>&nbsp;<span class="op" id="6727996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728000"><a href="/gostd/net/net_test.go.html#6727830">t</a></span><span class="op" id="6728001">.</span><span class="ident" id="6728002"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6728008">(</span><span class="string" id="6728009">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6728028">,</span>&nbsp;<span class="ident" id="6728030"><a href="/gostd/net/net_test.go.html#6727939">err</a></span><span class="op" id="6728033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6728036">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728040">buf</span>&nbsp;<span class="op" id="6728044">:=</span>&nbsp;<span class="builtinfunc" id="6728047">make</span><span class="op" id="6728051">(</span><span class="op" id="6728052">[</span><span class="op" id="6728053">]</span><span class="builtintype" id="6728054">byte</span><span class="op" id="6728058">,</span>&nbsp;<span class="num" id="6728060">1000</span><span class="op" id="6728064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728067">done</span>&nbsp;<span class="op" id="6728072">:=</span>&nbsp;<span class="builtinfunc" id="6728075">make</span><span class="op" id="6728079">(</span><span class="keyword" id="6728080">chan</span>&nbsp;<span class="builtintype" id="6728085">bool</span><span class="op" id="6728089">,</span>&nbsp;<span class="num" id="6728091">1</span><span class="op" id="6728092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728095">go</span>&nbsp;<span class="keyword" id="6728098">func</span><span class="op" id="6728102">(</span><span class="op" id="6728103">)</span>&nbsp;<span class="op" id="6728105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728109"><a href="/gostd/net/net_test.go.html#6725103">time</a></span><span class="op" id="6728113">.</span><span class="ident" id="6728114"><a href="/gostd/time/sleep.go.html#2713940">Sleep</a></span><span class="op" id="6728119">(</span><span class="num" id="6728120">100</span>&nbsp;<span class="op" id="6728124">*</span>&nbsp;<span class="ident" id="6728126"><a href="/gostd/net/net_test.go.html#6725103">time</a></span><span class="op" id="6728130">.</span><span class="ident" id="6728131"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6728142">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728146"><a href="/gostd/net/net_test.go.html#6727935">ln</a></span><span class="op" id="6728148">.</span><span class="ident" id="6728149"><a href="/gostd/net/net.go.html#3339672">Close</a></span><span class="op" id="6728154">(</span><span class="op" id="6728155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6728158">}</span><span class="op" id="6728159">(</span><span class="op" id="6728160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728163">go</span>&nbsp;<span class="keyword" id="6728166">func</span><span class="op" id="6728170">(</span><span class="op" id="6728171">)</span>&nbsp;<span class="op" id="6728173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728177">_</span><span class="op" id="6728178">,</span>&nbsp;<span class="ident" id="6728180">_</span><span class="op" id="6728181">,</span>&nbsp;<span class="ident" id="6728183"><a href="/gostd/net/net_test.go.html#6727939">err</a></span>&nbsp;<span class="op" id="6728187">=</span>&nbsp;<span class="ident" id="6728189"><a href="/gostd/net/net_test.go.html#6727935">ln</a></span><span class="op" id="6728191">.</span><span class="ident" id="6728192"><a href="/gostd/net/net.go.html#3339190">ReadFrom</a></span><span class="op" id="6728200">(</span><span class="ident" id="6728201"><a href="/gostd/net/net_test.go.html#6728040">buf</a></span><span class="op" id="6728204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728208">if</span>&nbsp;<span class="ident" id="6728211"><a href="/gostd/net/net_test.go.html#6727939">err</a></span>&nbsp;<span class="op" id="6728215">==</span>&nbsp;<span class="builtintype" id="6728218">nil</span>&nbsp;<span class="op" id="6728222">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728227"><a href="/gostd/net/net_test.go.html#6727830">t</a></span><span class="op" id="6728228">.</span><span class="ident" id="6728229"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="6728234">(</span><span class="string" id="6728235">&#34;ReadFrom&nbsp;succeeded&#34;</span><span class="op" id="6728255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6728259">}</span>&nbsp;<span class="keyword" id="6728261">else</span>&nbsp;<span class="op" id="6728266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728271"><a href="/gostd/net/net_test.go.html#6727830">t</a></span><span class="op" id="6728272">.</span><span class="ident" id="6728273"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6728277">(</span><span class="string" id="6728278">&#34;ReadFrom&nbsp;timeout&nbsp;error:&nbsp;%s&nbsp;(any&nbsp;error&nbsp;is&nbsp;fine)&#34;</span><span class="op" id="6728326">,</span>&nbsp;<span class="ident" id="6728328"><a href="/gostd/net/net_test.go.html#6727939">err</a></span><span class="op" id="6728331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6728335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728339"><a href="/gostd/net/net_test.go.html#6728067">done</a></span>&nbsp;<span class="op" id="6728344">&lt;-</span>&nbsp;<span class="builtintype" id="6728347">true</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6728353">}</span><span class="op" id="6728354">(</span><span class="op" id="6728355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728358">select</span>&nbsp;<span class="op" id="6728365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728368">case</span>&nbsp;<span class="op" id="6728373">&lt;-</span><span class="ident" id="6728375"><a href="/gostd/net/net_test.go.html#6728067">done</a></span><span class="op" id="6728379">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728382">case</span>&nbsp;<span class="op" id="6728387">&lt;-</span><span class="ident" id="6728389"><a href="/gostd/net/net_test.go.html#6725103">time</a></span><span class="op" id="6728393">.</span><span class="ident" id="6728394"><a href="/gostd/time/sleep.go.html#2716644">After</a></span><span class="op" id="6728399">(</span><span class="num" id="6728400">2</span>&nbsp;<span class="op" id="6728402">*</span>&nbsp;<span class="ident" id="6728404"><a href="/gostd/net/net_test.go.html#6725103">time</a></span><span class="op" id="6728408">.</span><span class="ident" id="6728409"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6728415">)</span><span class="op" id="6728416">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728420"><a href="/gostd/net/net_test.go.html#6727830">t</a></span><span class="op" id="6728421">.</span><span class="ident" id="6728422"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6728427">(</span><span class="string" id="6728428">&#34;timeout&nbsp;waiting&nbsp;for&nbsp;UDP&nbsp;close&#34;</span><span class="op" id="6728459">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6728462">}</span><br>
<span class="lineno"></span><span class="op" id="6728464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6728467">func</span>&nbsp;<span class="ident" id="6728472">TestTCPClose</span><span class="op" id="6728484">(</span><span class="ident" id="6728485">t</span>&nbsp;<span class="op" id="6728487">*</span><span class="ident" id="6728488"><a href="/gostd/net/net_test.go.html#6725092">testing</a></span><span class="op" id="6728495">.</span><span class="ident" id="6728496"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6728497">)</span>&nbsp;<span class="op" id="6728499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728502">switch</span>&nbsp;<span class="ident" id="6728509"><a href="/gostd/net/net_test.go.html#6725081">runtime</a></span><span class="op" id="6728516">.</span><span class="ident" id="6728517"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6728522">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728525">case</span>&nbsp;<span class="string" id="6728530">&#34;plan9&#34;</span><span class="op" id="6728537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728541"><a href="/gostd/net/net_test.go.html#6728485">t</a></span><span class="op" id="6728542">.</span><span class="ident" id="6728543"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6728548">(</span><span class="string" id="6728549">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6728570">,</span>&nbsp;<span class="ident" id="6728572"><a href="/gostd/net/net_test.go.html#6725081">runtime</a></span><span class="op" id="6728579">.</span><span class="ident" id="6728580"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6728584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6728587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728590">l</span><span class="op" id="6728591">,</span>&nbsp;<span class="ident" id="6728593">err</span>&nbsp;<span class="op" id="6728597">:=</span>&nbsp;<span class="ident" id="6728600"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6728606">(</span><span class="string" id="6728607">&#34;tcp&#34;</span><span class="op" id="6728612">,</span>&nbsp;<span class="string" id="6728614">&#34;127.0.0.1:0&#34;</span><span class="op" id="6728627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728630">if</span>&nbsp;<span class="ident" id="6728633"><a href="/gostd/net/net_test.go.html#6728593">err</a></span>&nbsp;<span class="op" id="6728637">!=</span>&nbsp;<span class="builtintype" id="6728640">nil</span>&nbsp;<span class="op" id="6728644">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728648"><a href="/gostd/net/net_test.go.html#6728485">t</a></span><span class="op" id="6728649">.</span><span class="ident" id="6728650"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6728655">(</span><span class="ident" id="6728656"><a href="/gostd/net/net_test.go.html#6728593">err</a></span><span class="op" id="6728659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6728662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728665">defer</span>&nbsp;<span class="ident" id="6728671"><a href="/gostd/net/net_test.go.html#6728590">l</a></span><span class="op" id="6728672">.</span><span class="ident" id="6728673"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6728678">(</span><span class="op" id="6728679">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728683">read</span>&nbsp;<span class="op" id="6728688">:=</span>&nbsp;<span class="keyword" id="6728691">func</span><span class="op" id="6728695">(</span><span class="ident" id="6728696">r</span>&nbsp;<span class="ident" id="6728698"><a href="/gostd/net/net_test.go.html#6725056">io</a></span><span class="op" id="6728700">.</span><span class="ident" id="6728701"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="6728707">)</span>&nbsp;<span class="builtintype" id="6728709">error</span>&nbsp;<span class="op" id="6728715">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728719">var</span>&nbsp;<span class="ident" id="6728723">m</span>&nbsp;<span class="op" id="6728725">[</span><span class="num" id="6728726">1</span><span class="op" id="6728727">]</span><span class="builtintype" id="6728728">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728735">_</span><span class="op" id="6728736">,</span>&nbsp;<span class="ident" id="6728738">err</span>&nbsp;<span class="op" id="6728742">:=</span>&nbsp;<span class="ident" id="6728745"><a href="/gostd/net/net_test.go.html#6728696">r</a></span><span class="op" id="6728746">.</span><span class="ident" id="6728747"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="6728751">(</span><span class="ident" id="6728752"><a href="/gostd/net/net_test.go.html#6728723">m</a></span><span class="op" id="6728753">[</span><span class="op" id="6728754">:</span><span class="op" id="6728755">]</span><span class="op" id="6728756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728760">return</span>&nbsp;<span class="ident" id="6728767"><a href="/gostd/net/net_test.go.html#6728738">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6728772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728776">go</span>&nbsp;<span class="keyword" id="6728779">func</span><span class="op" id="6728783">(</span><span class="op" id="6728784">)</span>&nbsp;<span class="op" id="6728786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728790">c</span><span class="op" id="6728791">,</span>&nbsp;<span class="ident" id="6728793">err</span>&nbsp;<span class="op" id="6728797">:=</span>&nbsp;<span class="ident" id="6728800"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6728804">(</span><span class="string" id="6728805">&#34;tcp&#34;</span><span class="op" id="6728810">,</span>&nbsp;<span class="ident" id="6728812"><a href="/gostd/net/net_test.go.html#6728590">l</a></span><span class="op" id="6728813">.</span><span class="ident" id="6728814"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6728818">(</span><span class="op" id="6728819">)</span><span class="op" id="6728820">.</span><span class="ident" id="6728821"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6728827">(</span><span class="op" id="6728828">)</span><span class="op" id="6728829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728833">if</span>&nbsp;<span class="ident" id="6728836"><a href="/gostd/net/net_test.go.html#6728793">err</a></span>&nbsp;<span class="op" id="6728840">!=</span>&nbsp;<span class="builtintype" id="6728843">nil</span>&nbsp;<span class="op" id="6728847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728852"><a href="/gostd/net/net_test.go.html#6728485">t</a></span><span class="op" id="6728853">.</span><span class="ident" id="6728854"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6728860">(</span><span class="string" id="6728861">&#34;Dial:&nbsp;%v&#34;</span><span class="op" id="6728871">,</span>&nbsp;<span class="ident" id="6728873"><a href="/gostd/net/net_test.go.html#6728793">err</a></span><span class="op" id="6728876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728881">return</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6728890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728895">go</span>&nbsp;<span class="ident" id="6728898"><a href="/gostd/net/net_test.go.html#6728683">read</a></span><span class="op" id="6728902">(</span><span class="ident" id="6728903"><a href="/gostd/net/net_test.go.html#6728790">c</a></span><span class="op" id="6728904">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728909"><a href="/gostd/net/net_test.go.html#6725103">time</a></span><span class="op" id="6728913">.</span><span class="ident" id="6728914"><a href="/gostd/time/sleep.go.html#2713940">Sleep</a></span><span class="op" id="6728919">(</span><span class="num" id="6728920">10</span>&nbsp;<span class="op" id="6728923">*</span>&nbsp;<span class="ident" id="6728925"><a href="/gostd/net/net_test.go.html#6725103">time</a></span><span class="op" id="6728929">.</span><span class="ident" id="6728930"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="6728941">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728945"><a href="/gostd/net/net_test.go.html#6728790">c</a></span><span class="op" id="6728946">.</span><span class="ident" id="6728947"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6728952">(</span><span class="op" id="6728953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6728956">}</span><span class="op" id="6728957">(</span><span class="op" id="6728958">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6728962">c</span><span class="op" id="6728963">,</span>&nbsp;<span class="ident" id="6728965"><a href="/gostd/net/net_test.go.html#6728593">err</a></span>&nbsp;<span class="op" id="6728969">:=</span>&nbsp;<span class="ident" id="6728972"><a href="/gostd/net/net_test.go.html#6728590">l</a></span><span class="op" id="6728973">.</span><span class="ident" id="6728974"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="6728980">(</span><span class="op" id="6728981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6728984">if</span>&nbsp;<span class="ident" id="6728987"><a href="/gostd/net/net_test.go.html#6728593">err</a></span>&nbsp;<span class="op" id="6728991">!=</span>&nbsp;<span class="builtintype" id="6728994">nil</span>&nbsp;<span class="op" id="6728998">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729002"><a href="/gostd/net/net_test.go.html#6728485">t</a></span><span class="op" id="6729003">.</span><span class="ident" id="6729004"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6729009">(</span><span class="ident" id="6729010"><a href="/gostd/net/net_test.go.html#6728593">err</a></span><span class="op" id="6729013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6729016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6729019">defer</span>&nbsp;<span class="ident" id="6729025"><a href="/gostd/net/net_test.go.html#6728962">c</a></span><span class="op" id="6729026">.</span><span class="ident" id="6729027"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6729032">(</span><span class="op" id="6729033">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6729037">for</span>&nbsp;<span class="ident" id="6729041"><a href="/gostd/net/net_test.go.html#6728593">err</a></span>&nbsp;<span class="op" id="6729045">==</span>&nbsp;<span class="builtintype" id="6729048">nil</span>&nbsp;<span class="op" id="6729052">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729056"><a href="/gostd/net/net_test.go.html#6728593">err</a></span>&nbsp;<span class="op" id="6729060">=</span>&nbsp;<span class="ident" id="6729062"><a href="/gostd/net/net_test.go.html#6728683">read</a></span><span class="op" id="6729066">(</span><span class="ident" id="6729067"><a href="/gostd/net/net_test.go.html#6728962">c</a></span><span class="op" id="6729068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6729071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6729074">if</span>&nbsp;<span class="ident" id="6729077"><a href="/gostd/net/net_test.go.html#6728593">err</a></span>&nbsp;<span class="op" id="6729081">!=</span>&nbsp;<span class="builtintype" id="6729084">nil</span>&nbsp;<span class="op" id="6729088">&amp;&amp;</span>&nbsp;<span class="ident" id="6729091"><a href="/gostd/net/net_test.go.html#6728593">err</a></span>&nbsp;<span class="op" id="6729095">!=</span>&nbsp;<span class="ident" id="6729098"><a href="/gostd/net/net_test.go.html#6725056">io</a></span><span class="op" id="6729100">.</span><span class="ident" id="6729101"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="6729105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729109"><a href="/gostd/net/net_test.go.html#6728485">t</a></span><span class="op" id="6729110">.</span><span class="ident" id="6729111"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6729116">(</span><span class="ident" id="6729117"><a href="/gostd/net/net_test.go.html#6728593">err</a></span><span class="op" id="6729120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6729123">}</span><br>
<span class="lineno">225</span><span class="op" id="6729125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6729128">func</span>&nbsp;<span class="ident" id="6729133">TestErrorNil</span><span class="op" id="6729145">(</span><span class="ident" id="6729146">t</span>&nbsp;<span class="op" id="6729148">*</span><span class="ident" id="6729149"><a href="/gostd/net/net_test.go.html#6725092">testing</a></span><span class="op" id="6729156">.</span><span class="ident" id="6729157"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6729158">)</span>&nbsp;<span class="op" id="6729160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729163">c</span><span class="op" id="6729164">,</span>&nbsp;<span class="ident" id="6729166">err</span>&nbsp;<span class="op" id="6729170">:=</span>&nbsp;<span class="ident" id="6729173"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6729177">(</span><span class="string" id="6729178">&#34;tcp&#34;</span><span class="op" id="6729183">,</span>&nbsp;<span class="string" id="6729185">&#34;127.0.0.1:65535&#34;</span><span class="op" id="6729202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6729205">if</span>&nbsp;<span class="ident" id="6729208"><a href="/gostd/net/net_test.go.html#6729166">err</a></span>&nbsp;<span class="op" id="6729212">==</span>&nbsp;<span class="builtintype" id="6729215">nil</span>&nbsp;<span class="op" id="6729219">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729223"><a href="/gostd/net/net_test.go.html#6729146">t</a></span><span class="op" id="6729224">.</span><span class="ident" id="6729225"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6729230">(</span><span class="string" id="6729231">&#34;Dial&nbsp;127.0.0.1:65535&nbsp;succeeded&#34;</span><span class="op" id="6729263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6729266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6729269">if</span>&nbsp;<span class="ident" id="6729272"><a href="/gostd/net/net_test.go.html#6729163">c</a></span>&nbsp;<span class="op" id="6729274">!=</span>&nbsp;<span class="builtintype" id="6729277">nil</span>&nbsp;<span class="op" id="6729281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729285"><a href="/gostd/net/net_test.go.html#6729146">t</a></span><span class="op" id="6729286">.</span><span class="ident" id="6729287"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6729293">(</span><span class="string" id="6729294">&#34;Dial&nbsp;returned&nbsp;non-nil&nbsp;interface&nbsp;%T(%v)&nbsp;with&nbsp;err&nbsp;!=&nbsp;nil&#34;</span><span class="op" id="6729350">,</span>&nbsp;<span class="ident" id="6729352"><a href="/gostd/net/net_test.go.html#6729163">c</a></span><span class="op" id="6729353">,</span>&nbsp;<span class="ident" id="6729355"><a href="/gostd/net/net_test.go.html#6729163">c</a></span><span class="op" id="6729356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6729359">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6729363">//&nbsp;Make&nbsp;Listen&nbsp;fail&nbsp;by&nbsp;relistening&nbsp;on&nbsp;the&nbsp;same&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729420">l</span><span class="op" id="6729421">,</span>&nbsp;<span class="ident" id="6729423"><a href="/gostd/net/net_test.go.html#6729166">err</a></span>&nbsp;<span class="op" id="6729427">:=</span>&nbsp;<span class="ident" id="6729430"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6729436">(</span><span class="string" id="6729437">&#34;tcp&#34;</span><span class="op" id="6729442">,</span>&nbsp;<span class="string" id="6729444">&#34;127.0.0.1:0&#34;</span><span class="op" id="6729457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6729460">if</span>&nbsp;<span class="ident" id="6729463"><a href="/gostd/net/net_test.go.html#6729166">err</a></span>&nbsp;<span class="op" id="6729467">!=</span>&nbsp;<span class="builtintype" id="6729470">nil</span>&nbsp;<span class="op" id="6729474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729478"><a href="/gostd/net/net_test.go.html#6729146">t</a></span><span class="op" id="6729479">.</span><span class="ident" id="6729480"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6729486">(</span><span class="string" id="6729487">&#34;Listen&nbsp;127.0.0.1:0:&nbsp;%v&#34;</span><span class="op" id="6729511">,</span>&nbsp;<span class="ident" id="6729513"><a href="/gostd/net/net_test.go.html#6729166">err</a></span><span class="op" id="6729516">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6729519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6729522">defer</span>&nbsp;<span class="ident" id="6729528"><a href="/gostd/net/net_test.go.html#6729420">l</a></span><span class="op" id="6729529">.</span><span class="ident" id="6729530"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6729535">(</span><span class="op" id="6729536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729539">l1</span><span class="op" id="6729541">,</span>&nbsp;<span class="ident" id="6729543"><a href="/gostd/net/net_test.go.html#6729166">err</a></span>&nbsp;<span class="op" id="6729547">:=</span>&nbsp;<span class="ident" id="6729550"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6729556">(</span><span class="string" id="6729557">&#34;tcp&#34;</span><span class="op" id="6729562">,</span>&nbsp;<span class="ident" id="6729564"><a href="/gostd/net/net_test.go.html#6729420">l</a></span><span class="op" id="6729565">.</span><span class="ident" id="6729566"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6729570">(</span><span class="op" id="6729571">)</span><span class="op" id="6729572">.</span><span class="ident" id="6729573"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6729579">(</span><span class="op" id="6729580">)</span><span class="op" id="6729581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6729584">if</span>&nbsp;<span class="ident" id="6729587"><a href="/gostd/net/net_test.go.html#6729166">err</a></span>&nbsp;<span class="op" id="6729591">==</span>&nbsp;<span class="builtintype" id="6729594">nil</span>&nbsp;<span class="op" id="6729598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729602"><a href="/gostd/net/net_test.go.html#6729146">t</a></span><span class="op" id="6729603">.</span><span class="ident" id="6729604"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6729610">(</span><span class="string" id="6729611">&#34;second&nbsp;Listen&nbsp;%v:&nbsp;%v&#34;</span><span class="op" id="6729633">,</span>&nbsp;<span class="ident" id="6729635"><a href="/gostd/net/net_test.go.html#6729420">l</a></span><span class="op" id="6729636">.</span><span class="ident" id="6729637"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6729641">(</span><span class="op" id="6729642">)</span><span class="op" id="6729643">,</span>&nbsp;<span class="ident" id="6729645"><a href="/gostd/net/net_test.go.html#6729166">err</a></span><span class="op" id="6729648">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6729651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6729654">if</span>&nbsp;<span class="ident" id="6729657"><a href="/gostd/net/net_test.go.html#6729539">l1</a></span>&nbsp;<span class="op" id="6729660">!=</span>&nbsp;<span class="builtintype" id="6729663">nil</span>&nbsp;<span class="op" id="6729667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729671"><a href="/gostd/net/net_test.go.html#6729146">t</a></span><span class="op" id="6729672">.</span><span class="ident" id="6729673"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6729679">(</span><span class="string" id="6729680">&#34;Listen&nbsp;returned&nbsp;non-nil&nbsp;interface&nbsp;%T(%v)&nbsp;with&nbsp;err&nbsp;!=&nbsp;nil&#34;</span><span class="op" id="6729738">,</span>&nbsp;<span class="ident" id="6729740"><a href="/gostd/net/net_test.go.html#6729539">l1</a></span><span class="op" id="6729742">,</span>&nbsp;<span class="ident" id="6729744"><a href="/gostd/net/net_test.go.html#6729539">l1</a></span><span class="op" id="6729746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6729749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6729753">//&nbsp;Make&nbsp;ListenPacket&nbsp;fail&nbsp;by&nbsp;relistening&nbsp;on&nbsp;the&nbsp;same&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729816">lp</span><span class="op" id="6729818">,</span>&nbsp;<span class="ident" id="6729820"><a href="/gostd/net/net_test.go.html#6729166">err</a></span>&nbsp;<span class="op" id="6729824">:=</span>&nbsp;<span class="ident" id="6729827"><a href="/gostd/net/dial.go.html#3207909">ListenPacket</a></span><span class="op" id="6729839">(</span><span class="string" id="6729840">&#34;udp&#34;</span><span class="op" id="6729845">,</span>&nbsp;<span class="string" id="6729847">&#34;127.0.0.1:0&#34;</span><span class="op" id="6729860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6729863">if</span>&nbsp;<span class="ident" id="6729866"><a href="/gostd/net/net_test.go.html#6729166">err</a></span>&nbsp;<span class="op" id="6729870">!=</span>&nbsp;<span class="builtintype" id="6729873">nil</span>&nbsp;<span class="op" id="6729877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729881"><a href="/gostd/net/net_test.go.html#6729146">t</a></span><span class="op" id="6729882">.</span><span class="ident" id="6729883"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6729889">(</span><span class="string" id="6729890">&#34;Listen&nbsp;127.0.0.1:0:&nbsp;%v&#34;</span><span class="op" id="6729914">,</span>&nbsp;<span class="ident" id="6729916"><a href="/gostd/net/net_test.go.html#6729166">err</a></span><span class="op" id="6729919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6729922">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6729925">defer</span>&nbsp;<span class="ident" id="6729931"><a href="/gostd/net/net_test.go.html#6729816">lp</a></span><span class="op" id="6729933">.</span><span class="ident" id="6729934"><a href="/gostd/net/net.go.html#3339672">Close</a></span><span class="op" id="6729939">(</span><span class="op" id="6729940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6729943">lp1</span><span class="op" id="6729946">,</span>&nbsp;<span class="ident" id="6729948"><a href="/gostd/net/net_test.go.html#6729166">err</a></span>&nbsp;<span class="op" id="6729952">:=</span>&nbsp;<span class="ident" id="6729955"><a href="/gostd/net/dial.go.html#3207909">ListenPacket</a></span><span class="op" id="6729967">(</span><span class="string" id="6729968">&#34;udp&#34;</span><span class="op" id="6729973">,</span>&nbsp;<span class="ident" id="6729975"><a href="/gostd/net/net_test.go.html#6729816">lp</a></span><span class="op" id="6729977">.</span><span class="ident" id="6729978"><a href="/gostd/net/net.go.html#3339737">LocalAddr</a></span><span class="op" id="6729987">(</span><span class="op" id="6729988">)</span><span class="op" id="6729989">.</span><span class="ident" id="6729990"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6729996">(</span><span class="op" id="6729997">)</span><span class="op" id="6729998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6730001">if</span>&nbsp;<span class="ident" id="6730004"><a href="/gostd/net/net_test.go.html#6729166">err</a></span>&nbsp;<span class="op" id="6730008">==</span>&nbsp;<span class="builtintype" id="6730011">nil</span>&nbsp;<span class="op" id="6730015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6730019"><a href="/gostd/net/net_test.go.html#6729146">t</a></span><span class="op" id="6730020">.</span><span class="ident" id="6730021"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6730027">(</span><span class="string" id="6730028">&#34;second&nbsp;Listen&nbsp;%v:&nbsp;%v&#34;</span><span class="op" id="6730050">,</span>&nbsp;<span class="ident" id="6730052"><a href="/gostd/net/net_test.go.html#6729816">lp</a></span><span class="op" id="6730054">.</span><span class="ident" id="6730055"><a href="/gostd/net/net.go.html#3339737">LocalAddr</a></span><span class="op" id="6730064">(</span><span class="op" id="6730065">)</span><span class="op" id="6730066">,</span>&nbsp;<span class="ident" id="6730068"><a href="/gostd/net/net_test.go.html#6729166">err</a></span><span class="op" id="6730071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6730074">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6730077">if</span>&nbsp;<span class="ident" id="6730080"><a href="/gostd/net/net_test.go.html#6729943">lp1</a></span>&nbsp;<span class="op" id="6730084">!=</span>&nbsp;<span class="builtintype" id="6730087">nil</span>&nbsp;<span class="op" id="6730091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6730095"><a href="/gostd/net/net_test.go.html#6729146">t</a></span><span class="op" id="6730096">.</span><span class="ident" id="6730097"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6730103">(</span><span class="string" id="6730104">&#34;ListenPacket&nbsp;returned&nbsp;non-nil&nbsp;interface&nbsp;%T(%v)&nbsp;with&nbsp;err&nbsp;!=&nbsp;nil&#34;</span><span class="op" id="6730168">,</span>&nbsp;<span class="ident" id="6730170"><a href="/gostd/net/net_test.go.html#6729943">lp1</a></span><span class="op" id="6730173">,</span>&nbsp;<span class="ident" id="6730175"><a href="/gostd/net/net_test.go.html#6729943">lp1</a></span><span class="op" id="6730178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6730181">}</span><br>
<span class="lineno"></span><span class="op" id="6730183">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
