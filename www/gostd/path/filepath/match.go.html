<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path/filepath</h2>
<ul>
<li><a href="/gostd/path/filepath/example_unix_test.go.html">example_unix_test.go</a></li>
<li><a href="/gostd/path/filepath/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/path/filepath/match.go.html" class="current">match.go</a></li>
<li><a href="/gostd/path/filepath/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/filepath/path.go.html">path.go</a></li>
<li><a href="/gostd/path/filepath/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/path/filepath/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/path/filepath/symlink.go.html">symlink.go</a></li>
<li><a href="/gostd/path/filepath/symlink_unix.go.html">symlink_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3311020">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3311075">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3311129">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3311180">package</span>&nbsp;<span class="ident" id="3311188">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3311198">import</span>&nbsp;<span class="op" id="3311205">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3311208">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3311218">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3311224">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3311235">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3311243">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3311254">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3311269">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3311272">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3311333">var</span>&nbsp;<span class="ident" id="3311337">ErrBadPattern</span>&nbsp;<span class="op" id="3311351">=</span>&nbsp;<span class="ident" id="3311353">errors</span><span class="op" id="3311359">.</span><span class="ident" id="3311360">New</span><span class="op" id="3311363">(</span><span class="string" id="3311364">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3311389">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3311392">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="3311459">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3311485">//</span><br>
<span class="lineno"></span><span class="comment" id="3311488">//&nbsp;&nbsp;&nbsp;&nbsp;pattern:</span><br>
<span class="lineno"></span><span class="comment" id="3311500">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3311513">//&nbsp;&nbsp;&nbsp;&nbsp;term:</span><br>
<span class="lineno">25</span><span class="comment" id="3311522">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3311587">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3311646">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3311686">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3311738">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="3311801">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3311837">//</span><br>
<span class="lineno"></span><span class="comment" id="3311840">//&nbsp;&nbsp;&nbsp;&nbsp;character-range:</span><br>
<span class="lineno"></span><span class="comment" id="3311860">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3311918">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="3311954">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3312008">//</span><br>
<span class="lineno"></span><span class="comment" id="3312011">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="3312081">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3312148">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="3312165">//</span><br>
<span class="lineno"></span><span class="comment" id="3312168">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3312233">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="3312252">//</span><br>
<span class="lineno"></span><span class="keyword" id="3312255">func</span>&nbsp;<span class="ident" id="3312260">Match</span><span class="op" id="3312265">(</span><span class="ident" id="3312266">pattern</span><span class="op" id="3312273">,</span>&nbsp;<span class="ident" id="3312275">name</span>&nbsp;<span class="builtintype" id="3312280">string</span><span class="op" id="3312286">)</span>&nbsp;<span class="op" id="3312288">(</span><span class="ident" id="3312289">matched</span>&nbsp;<span class="builtintype" id="3312297">bool</span><span class="op" id="3312301">,</span>&nbsp;<span class="ident" id="3312303">err</span>&nbsp;<span class="builtintype" id="3312307">error</span><span class="op" id="3312312">)</span>&nbsp;<span class="op" id="3312314">{</span><br>
<span class="lineno">45</span><span class="ident" id="3312316">Pattern</span><span class="op" id="3312323">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312326">for</span>&nbsp;<span class="builtinfunc" id="3312330">len</span><span class="op" id="3312333">(</span><span class="ident" id="3312334">pattern</span><span class="op" id="3312341">)</span>&nbsp;<span class="op" id="3312343">&gt;</span>&nbsp;<span class="num" id="3312345">0</span>&nbsp;<span class="op" id="3312347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312351">var</span>&nbsp;<span class="ident" id="3312355">star</span>&nbsp;<span class="builtintype" id="3312360">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312367">var</span>&nbsp;<span class="ident" id="3312371">chunk</span>&nbsp;<span class="builtintype" id="3312377">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312386">star</span><span class="op" id="3312390">,</span>&nbsp;<span class="ident" id="3312392">chunk</span><span class="op" id="3312397">,</span>&nbsp;<span class="ident" id="3312399">pattern</span>&nbsp;<span class="op" id="3312407">=</span>&nbsp;<span class="ident" id="3312409">scanChunk</span><span class="op" id="3312418">(</span><span class="ident" id="3312419">pattern</span><span class="op" id="3312426">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312430">if</span>&nbsp;<span class="ident" id="3312433">star</span>&nbsp;<span class="op" id="3312438">&amp;&amp;</span>&nbsp;<span class="ident" id="3312441">chunk</span>&nbsp;<span class="op" id="3312447">==</span>&nbsp;<span class="string" id="3312450">&#34;&#34;</span>&nbsp;<span class="op" id="3312453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3312458">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312517">return</span>&nbsp;<span class="ident" id="3312524">strings</span><span class="op" id="3312531">.</span><span class="ident" id="3312532">Index</span><span class="op" id="3312537">(</span><span class="ident" id="3312538">name</span><span class="op" id="3312542">,</span>&nbsp;<span class="builtintype" id="3312544">string</span><span class="op" id="3312550">(</span><span class="ident" id="3312551">Separator</span><span class="op" id="3312560">)</span><span class="op" id="3312561">)</span>&nbsp;<span class="op" id="3312563">&lt;</span>&nbsp;<span class="num" id="3312565">0</span><span class="op" id="3312566">,</span>&nbsp;<span class="builtintype" id="3312568">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3312578">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312619">t</span><span class="op" id="3312620">,</span>&nbsp;<span class="ident" id="3312622">ok</span><span class="op" id="3312624">,</span>&nbsp;<span class="ident" id="3312626">err</span>&nbsp;<span class="op" id="3312630">:=</span>&nbsp;<span class="ident" id="3312633">matchChunk</span><span class="op" id="3312643">(</span><span class="ident" id="3312644">chunk</span><span class="op" id="3312649">,</span>&nbsp;<span class="ident" id="3312651">name</span><span class="op" id="3312655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3312659">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3312724">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3312794">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312814">if</span>&nbsp;<span class="ident" id="3312817">ok</span>&nbsp;<span class="op" id="3312820">&amp;&amp;</span>&nbsp;<span class="op" id="3312823">(</span><span class="builtinfunc" id="3312824">len</span><span class="op" id="3312827">(</span><span class="ident" id="3312828">t</span><span class="op" id="3312829">)</span>&nbsp;<span class="op" id="3312831">==</span>&nbsp;<span class="num" id="3312834">0</span>&nbsp;<span class="op" id="3312836">||</span>&nbsp;<span class="builtinfunc" id="3312839">len</span><span class="op" id="3312842">(</span><span class="ident" id="3312843">pattern</span><span class="op" id="3312850">)</span>&nbsp;<span class="op" id="3312852">&gt;</span>&nbsp;<span class="num" id="3312854">0</span><span class="op" id="3312855">)</span>&nbsp;<span class="op" id="3312857">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312862">name</span>&nbsp;<span class="op" id="3312867">=</span>&nbsp;<span class="ident" id="3312869">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312874">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312889">if</span>&nbsp;<span class="ident" id="3312892">err</span>&nbsp;<span class="op" id="3312896">!=</span>&nbsp;<span class="builtintype" id="3312899">nil</span>&nbsp;<span class="op" id="3312903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312908">return</span>&nbsp;<span class="builtintype" id="3312915">false</span><span class="op" id="3312920">,</span>&nbsp;<span class="ident" id="3312922">err</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312932">if</span>&nbsp;<span class="ident" id="3312935">star</span>&nbsp;<span class="op" id="3312940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3312945">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3312986">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313007">for</span>&nbsp;<span class="ident" id="3313011">i</span>&nbsp;<span class="op" id="3313013">:=</span>&nbsp;<span class="num" id="3313016">0</span><span class="op" id="3313017">;</span>&nbsp;<span class="ident" id="3313019">i</span>&nbsp;<span class="op" id="3313021">&lt;</span>&nbsp;<span class="builtinfunc" id="3313023">len</span><span class="op" id="3313026">(</span><span class="ident" id="3313027">name</span><span class="op" id="3313031">)</span>&nbsp;<span class="op" id="3313033">&amp;&amp;</span>&nbsp;<span class="ident" id="3313036">name</span><span class="op" id="3313040">[</span><span class="ident" id="3313041">i</span><span class="op" id="3313042">]</span>&nbsp;<span class="op" id="3313044">!=</span>&nbsp;<span class="ident" id="3313047">Separator</span><span class="op" id="3313056">;</span>&nbsp;<span class="ident" id="3313058">i</span><span class="op" id="3313059">++</span>&nbsp;<span class="op" id="3313062">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313068">t</span><span class="op" id="3313069">,</span>&nbsp;<span class="ident" id="3313071">ok</span><span class="op" id="3313073">,</span>&nbsp;<span class="ident" id="3313075">err</span>&nbsp;<span class="op" id="3313079">:=</span>&nbsp;<span class="ident" id="3313082">matchChunk</span><span class="op" id="3313092">(</span><span class="ident" id="3313093">chunk</span><span class="op" id="3313098">,</span>&nbsp;<span class="ident" id="3313100">name</span><span class="op" id="3313104">[</span><span class="ident" id="3313105">i</span><span class="op" id="3313106">+</span><span class="num" id="3313107">1</span><span class="op" id="3313108">:</span><span class="op" id="3313109">]</span><span class="op" id="3313110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313116">if</span>&nbsp;<span class="ident" id="3313119">ok</span>&nbsp;<span class="op" id="3313122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313129">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313194">if</span>&nbsp;<span class="builtinfunc" id="3313197">len</span><span class="op" id="3313200">(</span><span class="ident" id="3313201">pattern</span><span class="op" id="3313208">)</span>&nbsp;<span class="op" id="3313210">==</span>&nbsp;<span class="num" id="3313213">0</span>&nbsp;<span class="op" id="3313215">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3313218">len</span><span class="op" id="3313221">(</span><span class="ident" id="3313222">t</span><span class="op" id="3313223">)</span>&nbsp;<span class="op" id="3313225">&gt;</span>&nbsp;<span class="num" id="3313227">0</span>&nbsp;<span class="op" id="3313229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313237">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313258">name</span>&nbsp;<span class="op" id="3313263">=</span>&nbsp;<span class="ident" id="3313265">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313272">continue</span>&nbsp;<span class="ident" id="3313281">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313299">if</span>&nbsp;<span class="ident" id="3313302">err</span>&nbsp;<span class="op" id="3313306">!=</span>&nbsp;<span class="builtintype" id="3313309">nil</span>&nbsp;<span class="op" id="3313313">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313320">return</span>&nbsp;<span class="builtintype" id="3313327">false</span><span class="op" id="3313332">,</span>&nbsp;<span class="ident" id="3313334">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313355">return</span>&nbsp;<span class="builtintype" id="3313362">false</span><span class="op" id="3313367">,</span>&nbsp;<span class="builtintype" id="3313369">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313377">return</span>&nbsp;<span class="builtinfunc" id="3313384">len</span><span class="op" id="3313387">(</span><span class="ident" id="3313388">name</span><span class="op" id="3313392">)</span>&nbsp;<span class="op" id="3313394">==</span>&nbsp;<span class="num" id="3313397">0</span><span class="op" id="3313398">,</span>&nbsp;<span class="builtintype" id="3313400">nil</span><br>
<span class="lineno"></span><span class="op" id="3313404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3313407">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="3313481">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="3313513">func</span>&nbsp;<span class="ident" id="3313518">scanChunk</span><span class="op" id="3313527">(</span><span class="ident" id="3313528">pattern</span>&nbsp;<span class="builtintype" id="3313536">string</span><span class="op" id="3313542">)</span>&nbsp;<span class="op" id="3313544">(</span><span class="ident" id="3313545">star</span>&nbsp;<span class="builtintype" id="3313550">bool</span><span class="op" id="3313554">,</span>&nbsp;<span class="ident" id="3313556">chunk</span><span class="op" id="3313561">,</span>&nbsp;<span class="ident" id="3313563">rest</span>&nbsp;<span class="builtintype" id="3313568">string</span><span class="op" id="3313574">)</span>&nbsp;<span class="op" id="3313576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313579">for</span>&nbsp;<span class="builtinfunc" id="3313583">len</span><span class="op" id="3313586">(</span><span class="ident" id="3313587">pattern</span><span class="op" id="3313594">)</span>&nbsp;<span class="op" id="3313596">&gt;</span>&nbsp;<span class="num" id="3313598">0</span>&nbsp;<span class="op" id="3313600">&amp;&amp;</span>&nbsp;<span class="ident" id="3313603">pattern</span><span class="op" id="3313610">[</span><span class="num" id="3313611">0</span><span class="op" id="3313612">]</span>&nbsp;<span class="op" id="3313614">==</span>&nbsp;<span class="string" id="3313617">&#39;*&#39;</span>&nbsp;<span class="op" id="3313621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313625">pattern</span>&nbsp;<span class="op" id="3313633">=</span>&nbsp;<span class="ident" id="3313635">pattern</span><span class="op" id="3313642">[</span><span class="num" id="3313643">1</span><span class="op" id="3313644">:</span><span class="op" id="3313645">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313649">star</span>&nbsp;<span class="op" id="3313654">=</span>&nbsp;<span class="builtintype" id="3313656">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313665">inrange</span>&nbsp;<span class="op" id="3313673">:=</span>&nbsp;<span class="builtintype" id="3313676">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313683">var</span>&nbsp;<span class="ident" id="3313687">i</span>&nbsp;<span class="builtintype" id="3313689">int</span><br>
<span class="lineno"></span><span class="ident" id="3313693">Scan</span><span class="op" id="3313697">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313700">for</span>&nbsp;<span class="ident" id="3313704">i</span>&nbsp;<span class="op" id="3313706">=</span>&nbsp;<span class="num" id="3313708">0</span><span class="op" id="3313709">;</span>&nbsp;<span class="ident" id="3313711">i</span>&nbsp;<span class="op" id="3313713">&lt;</span>&nbsp;<span class="builtinfunc" id="3313715">len</span><span class="op" id="3313718">(</span><span class="ident" id="3313719">pattern</span><span class="op" id="3313726">)</span><span class="op" id="3313727">;</span>&nbsp;<span class="ident" id="3313729">i</span><span class="op" id="3313730">++</span>&nbsp;<span class="op" id="3313733">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313737">switch</span>&nbsp;<span class="ident" id="3313744">pattern</span><span class="op" id="3313751">[</span><span class="ident" id="3313752">i</span><span class="op" id="3313753">]</span>&nbsp;<span class="op" id="3313755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313759">case</span>&nbsp;<span class="string" id="3313764">&#39;\\&#39;</span><span class="op" id="3313768">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313773">if</span>&nbsp;<span class="ident" id="3313776">runtime</span><span class="op" id="3313783">.</span><span class="ident" id="3313784">GOOS</span>&nbsp;<span class="op" id="3313789">!=</span>&nbsp;<span class="string" id="3313792">&#34;windows&#34;</span>&nbsp;<span class="op" id="3313802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313808">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313863">if</span>&nbsp;<span class="ident" id="3313866">i</span><span class="op" id="3313867">+</span><span class="num" id="3313868">1</span>&nbsp;<span class="op" id="3313870">&lt;</span>&nbsp;<span class="builtinfunc" id="3313872">len</span><span class="op" id="3313875">(</span><span class="ident" id="3313876">pattern</span><span class="op" id="3313883">)</span>&nbsp;<span class="op" id="3313885">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313892">i</span><span class="op" id="3313893">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313909">case</span>&nbsp;<span class="string" id="3313914">&#39;[&#39;</span><span class="op" id="3313917">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313922">inrange</span>&nbsp;<span class="op" id="3313930">=</span>&nbsp;<span class="builtintype" id="3313932">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313939">case</span>&nbsp;<span class="string" id="3313944">&#39;]&#39;</span><span class="op" id="3313947">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313952">inrange</span>&nbsp;<span class="op" id="3313960">=</span>&nbsp;<span class="builtintype" id="3313962">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313970">case</span>&nbsp;<span class="string" id="3313975">&#39;*&#39;</span><span class="op" id="3313978">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313983">if</span>&nbsp;<span class="op" id="3313986">!</span><span class="ident" id="3313987">inrange</span>&nbsp;<span class="op" id="3313995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314001">break</span>&nbsp;<span class="ident" id="3314007">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314025">return</span>&nbsp;<span class="ident" id="3314032">star</span><span class="op" id="3314036">,</span>&nbsp;<span class="ident" id="3314038">pattern</span><span class="op" id="3314045">[</span><span class="num" id="3314046">0</span><span class="op" id="3314047">:</span><span class="ident" id="3314048">i</span><span class="op" id="3314049">]</span><span class="op" id="3314050">,</span>&nbsp;<span class="ident" id="3314052">pattern</span><span class="op" id="3314059">[</span><span class="ident" id="3314060">i</span><span class="op" id="3314061">:</span><span class="op" id="3314062">]</span><br>
<span class="lineno"></span><span class="op" id="3314064">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3314067">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3314130">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="3314189">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3314264">func</span>&nbsp;<span class="ident" id="3314269">matchChunk</span><span class="op" id="3314279">(</span><span class="ident" id="3314280">chunk</span><span class="op" id="3314285">,</span>&nbsp;<span class="ident" id="3314287">s</span>&nbsp;<span class="builtintype" id="3314289">string</span><span class="op" id="3314295">)</span>&nbsp;<span class="op" id="3314297">(</span><span class="ident" id="3314298">rest</span>&nbsp;<span class="builtintype" id="3314303">string</span><span class="op" id="3314309">,</span>&nbsp;<span class="ident" id="3314311">ok</span>&nbsp;<span class="builtintype" id="3314314">bool</span><span class="op" id="3314318">,</span>&nbsp;<span class="ident" id="3314320">err</span>&nbsp;<span class="builtintype" id="3314324">error</span><span class="op" id="3314329">)</span>&nbsp;<span class="op" id="3314331">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314334">for</span>&nbsp;<span class="builtinfunc" id="3314338">len</span><span class="op" id="3314341">(</span><span class="ident" id="3314342">chunk</span><span class="op" id="3314347">)</span>&nbsp;<span class="op" id="3314349">&gt;</span>&nbsp;<span class="num" id="3314351">0</span>&nbsp;<span class="op" id="3314353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314357">if</span>&nbsp;<span class="builtinfunc" id="3314360">len</span><span class="op" id="3314363">(</span><span class="ident" id="3314364">s</span><span class="op" id="3314365">)</span>&nbsp;<span class="op" id="3314367">==</span>&nbsp;<span class="num" id="3314370">0</span>&nbsp;<span class="op" id="3314372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314377">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314390">switch</span>&nbsp;<span class="ident" id="3314397">chunk</span><span class="op" id="3314402">[</span><span class="num" id="3314403">0</span><span class="op" id="3314404">]</span>&nbsp;<span class="op" id="3314406">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314410">case</span>&nbsp;<span class="string" id="3314415">&#39;[&#39;</span><span class="op" id="3314418">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3314423">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314445">r</span><span class="op" id="3314446">,</span>&nbsp;<span class="ident" id="3314448">n</span>&nbsp;<span class="op" id="3314450">:=</span>&nbsp;<span class="ident" id="3314453">utf8</span><span class="op" id="3314457">.</span><span class="ident" id="3314458">DecodeRuneInString</span><span class="op" id="3314476">(</span><span class="ident" id="3314477">s</span><span class="op" id="3314478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314483">s</span>&nbsp;<span class="op" id="3314485">=</span>&nbsp;<span class="ident" id="3314487">s</span><span class="op" id="3314488">[</span><span class="ident" id="3314489">n</span><span class="op" id="3314490">:</span><span class="op" id="3314491">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314496">chunk</span>&nbsp;<span class="op" id="3314502">=</span>&nbsp;<span class="ident" id="3314504">chunk</span><span class="op" id="3314509">[</span><span class="num" id="3314510">1</span><span class="op" id="3314511">:</span><span class="op" id="3314512">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3314517">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3314578">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314624">if</span>&nbsp;<span class="builtinfunc" id="3314627">len</span><span class="op" id="3314630">(</span><span class="ident" id="3314631">chunk</span><span class="op" id="3314636">)</span>&nbsp;<span class="op" id="3314638">==</span>&nbsp;<span class="num" id="3314641">0</span>&nbsp;<span class="op" id="3314643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314649">err</span>&nbsp;<span class="op" id="3314653">=</span>&nbsp;<span class="ident" id="3314655">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314673">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3314688">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314711">negated</span>&nbsp;<span class="op" id="3314719">:=</span>&nbsp;<span class="ident" id="3314722">chunk</span><span class="op" id="3314727">[</span><span class="num" id="3314728">0</span><span class="op" id="3314729">]</span>&nbsp;<span class="op" id="3314731">==</span>&nbsp;<span class="string" id="3314734">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314741">if</span>&nbsp;<span class="ident" id="3314744">negated</span>&nbsp;<span class="op" id="3314752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314758">chunk</span>&nbsp;<span class="op" id="3314764">=</span>&nbsp;<span class="ident" id="3314766">chunk</span><span class="op" id="3314771">[</span><span class="num" id="3314772">1</span><span class="op" id="3314773">:</span><span class="op" id="3314774">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3314784">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314807">match</span>&nbsp;<span class="op" id="3314813">:=</span>&nbsp;<span class="builtintype" id="3314816">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314825">nrange</span>&nbsp;<span class="op" id="3314832">:=</span>&nbsp;<span class="num" id="3314835">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314840">for</span>&nbsp;<span class="op" id="3314844">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314850">if</span>&nbsp;<span class="builtinfunc" id="3314853">len</span><span class="op" id="3314856">(</span><span class="ident" id="3314857">chunk</span><span class="op" id="3314862">)</span>&nbsp;<span class="op" id="3314864">&gt;</span>&nbsp;<span class="num" id="3314866">0</span>&nbsp;<span class="op" id="3314868">&amp;&amp;</span>&nbsp;<span class="ident" id="3314871">chunk</span><span class="op" id="3314876">[</span><span class="num" id="3314877">0</span><span class="op" id="3314878">]</span>&nbsp;<span class="op" id="3314880">==</span>&nbsp;<span class="string" id="3314883">&#39;]&#39;</span>&nbsp;<span class="op" id="3314887">&amp;&amp;</span>&nbsp;<span class="ident" id="3314890">nrange</span>&nbsp;<span class="op" id="3314897">&gt;</span>&nbsp;<span class="num" id="3314899">0</span>&nbsp;<span class="op" id="3314901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314908">chunk</span>&nbsp;<span class="op" id="3314914">=</span>&nbsp;<span class="ident" id="3314916">chunk</span><span class="op" id="3314921">[</span><span class="num" id="3314922">1</span><span class="op" id="3314923">:</span><span class="op" id="3314924">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314931">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314947">var</span>&nbsp;<span class="ident" id="3314951">lo</span><span class="op" id="3314953">,</span>&nbsp;<span class="ident" id="3314955">hi</span>&nbsp;<span class="builtintype" id="3314958">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314967">if</span>&nbsp;<span class="ident" id="3314970">lo</span><span class="op" id="3314972">,</span>&nbsp;<span class="ident" id="3314974">chunk</span><span class="op" id="3314979">,</span>&nbsp;<span class="ident" id="3314981">err</span>&nbsp;<span class="op" id="3314985">=</span>&nbsp;<span class="ident" id="3314987">getEsc</span><span class="op" id="3314993">(</span><span class="ident" id="3314994">chunk</span><span class="op" id="3314999">)</span><span class="op" id="3315000">;</span>&nbsp;<span class="ident" id="3315002">err</span>&nbsp;<span class="op" id="3315006">!=</span>&nbsp;<span class="builtintype" id="3315009">nil</span>&nbsp;<span class="op" id="3315013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315020">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315037">hi</span>&nbsp;<span class="op" id="3315040">=</span>&nbsp;<span class="ident" id="3315042">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315049">if</span>&nbsp;<span class="ident" id="3315052">chunk</span><span class="op" id="3315057">[</span><span class="num" id="3315058">0</span><span class="op" id="3315059">]</span>&nbsp;<span class="op" id="3315061">==</span>&nbsp;<span class="string" id="3315064">&#39;-&#39;</span>&nbsp;<span class="op" id="3315068">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315075">if</span>&nbsp;<span class="ident" id="3315078">hi</span><span class="op" id="3315080">,</span>&nbsp;<span class="ident" id="3315082">chunk</span><span class="op" id="3315087">,</span>&nbsp;<span class="ident" id="3315089">err</span>&nbsp;<span class="op" id="3315093">=</span>&nbsp;<span class="ident" id="3315095">getEsc</span><span class="op" id="3315101">(</span><span class="ident" id="3315102">chunk</span><span class="op" id="3315107">[</span><span class="num" id="3315108">1</span><span class="op" id="3315109">:</span><span class="op" id="3315110">]</span><span class="op" id="3315111">)</span><span class="op" id="3315112">;</span>&nbsp;<span class="ident" id="3315114">err</span>&nbsp;<span class="op" id="3315118">!=</span>&nbsp;<span class="builtintype" id="3315121">nil</span>&nbsp;<span class="op" id="3315125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315133">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315157">if</span>&nbsp;<span class="ident" id="3315160">lo</span>&nbsp;<span class="op" id="3315163">&lt;=</span>&nbsp;<span class="ident" id="3315166">r</span>&nbsp;<span class="op" id="3315168">&amp;&amp;</span>&nbsp;<span class="ident" id="3315171">r</span>&nbsp;<span class="op" id="3315173">&lt;=</span>&nbsp;<span class="ident" id="3315176">hi</span>&nbsp;<span class="op" id="3315179">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315186">match</span>&nbsp;<span class="op" id="3315192">=</span>&nbsp;<span class="builtintype" id="3315194">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315209">nrange</span><span class="op" id="3315215">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315226">if</span>&nbsp;<span class="ident" id="3315229">match</span>&nbsp;<span class="op" id="3315235">==</span>&nbsp;<span class="ident" id="3315238">negated</span>&nbsp;<span class="op" id="3315246">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315252">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315267">case</span>&nbsp;<span class="string" id="3315272">&#39;?&#39;</span><span class="op" id="3315275">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315280">if</span>&nbsp;<span class="ident" id="3315283">s</span><span class="op" id="3315284">[</span><span class="num" id="3315285">0</span><span class="op" id="3315286">]</span>&nbsp;<span class="op" id="3315288">==</span>&nbsp;<span class="ident" id="3315291">Separator</span>&nbsp;<span class="op" id="3315301">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315307">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315322">_</span><span class="op" id="3315323">,</span>&nbsp;<span class="ident" id="3315325">n</span>&nbsp;<span class="op" id="3315327">:=</span>&nbsp;<span class="ident" id="3315330">utf8</span><span class="op" id="3315334">.</span><span class="ident" id="3315335">DecodeRuneInString</span><span class="op" id="3315353">(</span><span class="ident" id="3315354">s</span><span class="op" id="3315355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315360">s</span>&nbsp;<span class="op" id="3315362">=</span>&nbsp;<span class="ident" id="3315364">s</span><span class="op" id="3315365">[</span><span class="ident" id="3315366">n</span><span class="op" id="3315367">:</span><span class="op" id="3315368">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315373">chunk</span>&nbsp;<span class="op" id="3315379">=</span>&nbsp;<span class="ident" id="3315381">chunk</span><span class="op" id="3315386">[</span><span class="num" id="3315387">1</span><span class="op" id="3315388">:</span><span class="op" id="3315389">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315394">case</span>&nbsp;<span class="string" id="3315399">&#39;\\&#39;</span><span class="op" id="3315403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315408">if</span>&nbsp;<span class="ident" id="3315411">runtime</span><span class="op" id="3315418">.</span><span class="ident" id="3315419">GOOS</span>&nbsp;<span class="op" id="3315424">!=</span>&nbsp;<span class="string" id="3315427">&#34;windows&#34;</span>&nbsp;<span class="op" id="3315437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315443">chunk</span>&nbsp;<span class="op" id="3315449">=</span>&nbsp;<span class="ident" id="3315451">chunk</span><span class="op" id="3315456">[</span><span class="num" id="3315457">1</span><span class="op" id="3315458">:</span><span class="op" id="3315459">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315465">if</span>&nbsp;<span class="builtinfunc" id="3315468">len</span><span class="op" id="3315471">(</span><span class="ident" id="3315472">chunk</span><span class="op" id="3315477">)</span>&nbsp;<span class="op" id="3315479">==</span>&nbsp;<span class="num" id="3315482">0</span>&nbsp;<span class="op" id="3315484">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315491">err</span>&nbsp;<span class="op" id="3315495">=</span>&nbsp;<span class="ident" id="3315497">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315516">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315537">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315552">default</span><span class="op" id="3315559">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315564">if</span>&nbsp;<span class="ident" id="3315567">chunk</span><span class="op" id="3315572">[</span><span class="num" id="3315573">0</span><span class="op" id="3315574">]</span>&nbsp;<span class="op" id="3315576">!=</span>&nbsp;<span class="ident" id="3315579">s</span><span class="op" id="3315580">[</span><span class="num" id="3315581">0</span><span class="op" id="3315582">]</span>&nbsp;<span class="op" id="3315584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315590">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315600">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315605">s</span>&nbsp;<span class="op" id="3315607">=</span>&nbsp;<span class="ident" id="3315609">s</span><span class="op" id="3315610">[</span><span class="num" id="3315611">1</span><span class="op" id="3315612">:</span><span class="op" id="3315613">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315618">chunk</span>&nbsp;<span class="op" id="3315624">=</span>&nbsp;<span class="ident" id="3315626">chunk</span><span class="op" id="3315631">[</span><span class="num" id="3315632">1</span><span class="op" id="3315633">:</span><span class="op" id="3315634">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315644">return</span>&nbsp;<span class="ident" id="3315651">s</span><span class="op" id="3315652">,</span>&nbsp;<span class="builtintype" id="3315654">true</span><span class="op" id="3315658">,</span>&nbsp;<span class="builtintype" id="3315660">nil</span><br>
<span class="lineno">200</span><span class="op" id="3315664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3315667">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3315746">func</span>&nbsp;<span class="ident" id="3315751">getEsc</span><span class="op" id="3315757">(</span><span class="ident" id="3315758">chunk</span>&nbsp;<span class="builtintype" id="3315764">string</span><span class="op" id="3315770">)</span>&nbsp;<span class="op" id="3315772">(</span><span class="ident" id="3315773">r</span>&nbsp;<span class="builtintype" id="3315775">rune</span><span class="op" id="3315779">,</span>&nbsp;<span class="ident" id="3315781">nchunk</span>&nbsp;<span class="builtintype" id="3315788">string</span><span class="op" id="3315794">,</span>&nbsp;<span class="ident" id="3315796">err</span>&nbsp;<span class="builtintype" id="3315800">error</span><span class="op" id="3315805">)</span>&nbsp;<span class="op" id="3315807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315810">if</span>&nbsp;<span class="builtinfunc" id="3315813">len</span><span class="op" id="3315816">(</span><span class="ident" id="3315817">chunk</span><span class="op" id="3315822">)</span>&nbsp;<span class="op" id="3315824">==</span>&nbsp;<span class="num" id="3315827">0</span>&nbsp;<span class="op" id="3315829">||</span>&nbsp;<span class="ident" id="3315832">chunk</span><span class="op" id="3315837">[</span><span class="num" id="3315838">0</span><span class="op" id="3315839">]</span>&nbsp;<span class="op" id="3315841">==</span>&nbsp;<span class="string" id="3315844">&#39;-&#39;</span>&nbsp;<span class="op" id="3315848">||</span>&nbsp;<span class="ident" id="3315851">chunk</span><span class="op" id="3315856">[</span><span class="num" id="3315857">0</span><span class="op" id="3315858">]</span>&nbsp;<span class="op" id="3315860">==</span>&nbsp;<span class="string" id="3315863">&#39;]&#39;</span>&nbsp;<span class="op" id="3315867">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315871">err</span>&nbsp;<span class="op" id="3315875">=</span>&nbsp;<span class="ident" id="3315877">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315893">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315904">if</span>&nbsp;<span class="ident" id="3315907">chunk</span><span class="op" id="3315912">[</span><span class="num" id="3315913">0</span><span class="op" id="3315914">]</span>&nbsp;<span class="op" id="3315916">==</span>&nbsp;<span class="string" id="3315919">&#39;\\&#39;</span>&nbsp;<span class="op" id="3315924">&amp;&amp;</span>&nbsp;<span class="ident" id="3315927">runtime</span><span class="op" id="3315934">.</span><span class="ident" id="3315935">GOOS</span>&nbsp;<span class="op" id="3315940">!=</span>&nbsp;<span class="string" id="3315943">&#34;windows&#34;</span>&nbsp;<span class="op" id="3315953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315957">chunk</span>&nbsp;<span class="op" id="3315963">=</span>&nbsp;<span class="ident" id="3315965">chunk</span><span class="op" id="3315970">[</span><span class="num" id="3315971">1</span><span class="op" id="3315972">:</span><span class="op" id="3315973">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315977">if</span>&nbsp;<span class="builtinfunc" id="3315980">len</span><span class="op" id="3315983">(</span><span class="ident" id="3315984">chunk</span><span class="op" id="3315989">)</span>&nbsp;<span class="op" id="3315991">==</span>&nbsp;<span class="num" id="3315994">0</span>&nbsp;<span class="op" id="3315996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316001">err</span>&nbsp;<span class="op" id="3316005">=</span>&nbsp;<span class="ident" id="3316007">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316024">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316036">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316039">r</span><span class="op" id="3316040">,</span>&nbsp;<span class="ident" id="3316042">n</span>&nbsp;<span class="op" id="3316044">:=</span>&nbsp;<span class="ident" id="3316047">utf8</span><span class="op" id="3316051">.</span><span class="ident" id="3316052">DecodeRuneInString</span><span class="op" id="3316070">(</span><span class="ident" id="3316071">chunk</span><span class="op" id="3316076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316079">if</span>&nbsp;<span class="ident" id="3316082">r</span>&nbsp;<span class="op" id="3316084">==</span>&nbsp;<span class="ident" id="3316087">utf8</span><span class="op" id="3316091">.</span><span class="ident" id="3316092">RuneError</span>&nbsp;<span class="op" id="3316102">&amp;&amp;</span>&nbsp;<span class="ident" id="3316105">n</span>&nbsp;<span class="op" id="3316107">==</span>&nbsp;<span class="num" id="3316110">1</span>&nbsp;<span class="op" id="3316112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316116">err</span>&nbsp;<span class="op" id="3316120">=</span>&nbsp;<span class="ident" id="3316122">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316140">nchunk</span>&nbsp;<span class="op" id="3316147">=</span>&nbsp;<span class="ident" id="3316149">chunk</span><span class="op" id="3316154">[</span><span class="ident" id="3316155">n</span><span class="op" id="3316156">:</span><span class="op" id="3316157">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316160">if</span>&nbsp;<span class="builtinfunc" id="3316163">len</span><span class="op" id="3316166">(</span><span class="ident" id="3316167">nchunk</span><span class="op" id="3316173">)</span>&nbsp;<span class="op" id="3316175">==</span>&nbsp;<span class="num" id="3316178">0</span>&nbsp;<span class="op" id="3316180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316184">err</span>&nbsp;<span class="op" id="3316188">=</span>&nbsp;<span class="ident" id="3316190">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316208">return</span><br>
<span class="lineno"></span><span class="op" id="3316215">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3316218">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3316281">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="3316349">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3316417">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="3316467">//</span><br>
<span class="lineno"></span><span class="comment" id="3316470">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="3316545">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3316612">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3316629">func</span>&nbsp;<span class="ident" id="3316634">Glob</span><span class="op" id="3316638">(</span><span class="ident" id="3316639">pattern</span>&nbsp;<span class="builtintype" id="3316647">string</span><span class="op" id="3316653">)</span>&nbsp;<span class="op" id="3316655">(</span><span class="ident" id="3316656">matches</span>&nbsp;<span class="op" id="3316664">[</span><span class="op" id="3316665">]</span><span class="builtintype" id="3316666">string</span><span class="op" id="3316672">,</span>&nbsp;<span class="ident" id="3316674">err</span>&nbsp;<span class="builtintype" id="3316678">error</span><span class="op" id="3316683">)</span>&nbsp;<span class="op" id="3316685">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316688">if</span>&nbsp;<span class="op" id="3316691">!</span><span class="ident" id="3316692">hasMeta</span><span class="op" id="3316699">(</span><span class="ident" id="3316700">pattern</span><span class="op" id="3316707">)</span>&nbsp;<span class="op" id="3316709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316713">if</span>&nbsp;<span class="ident" id="3316716">_</span><span class="op" id="3316717">,</span>&nbsp;<span class="ident" id="3316719">err</span>&nbsp;<span class="op" id="3316723">=</span>&nbsp;<span class="ident" id="3316725">os</span><span class="op" id="3316727">.</span><span class="ident" id="3316728">Lstat</span><span class="op" id="3316733">(</span><span class="ident" id="3316734">pattern</span><span class="op" id="3316741">)</span><span class="op" id="3316742">;</span>&nbsp;<span class="ident" id="3316744">err</span>&nbsp;<span class="op" id="3316748">!=</span>&nbsp;<span class="builtintype" id="3316751">nil</span>&nbsp;<span class="op" id="3316755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316760">return</span>&nbsp;<span class="builtintype" id="3316767">nil</span><span class="op" id="3316770">,</span>&nbsp;<span class="builtintype" id="3316772">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316782">return</span>&nbsp;<span class="op" id="3316789">[</span><span class="op" id="3316790">]</span><span class="builtintype" id="3316791">string</span><span class="op" id="3316797">{</span><span class="ident" id="3316798">pattern</span><span class="op" id="3316805">}</span><span class="op" id="3316806">,</span>&nbsp;<span class="builtintype" id="3316808">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316817">dir</span><span class="op" id="3316820">,</span>&nbsp;<span class="ident" id="3316822">file</span>&nbsp;<span class="op" id="3316827">:=</span>&nbsp;<span class="ident" id="3316830">Split</span><span class="op" id="3316835">(</span><span class="ident" id="3316836">pattern</span><span class="op" id="3316843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316846">switch</span>&nbsp;<span class="ident" id="3316853">dir</span>&nbsp;<span class="op" id="3316857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316860">case</span>&nbsp;<span class="string" id="3316865">&#34;&#34;</span><span class="op" id="3316867">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316871">dir</span>&nbsp;<span class="op" id="3316875">=</span>&nbsp;<span class="string" id="3316877">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316882">case</span>&nbsp;<span class="builtintype" id="3316887">string</span><span class="op" id="3316893">(</span><span class="ident" id="3316894">Separator</span><span class="op" id="3316903">)</span><span class="op" id="3316904">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3316908">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316920">default</span><span class="op" id="3316927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316931">dir</span>&nbsp;<span class="op" id="3316935">=</span>&nbsp;<span class="ident" id="3316937">dir</span><span class="op" id="3316940">[</span><span class="num" id="3316941">0</span>&nbsp;<span class="op" id="3316943">:</span>&nbsp;<span class="builtinfunc" id="3316945">len</span><span class="op" id="3316948">(</span><span class="ident" id="3316949">dir</span><span class="op" id="3316952">)</span><span class="op" id="3316953">-</span><span class="num" id="3316954">1</span><span class="op" id="3316955">]</span>&nbsp;<span class="comment" id="3316957">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316993">if</span>&nbsp;<span class="op" id="3316996">!</span><span class="ident" id="3316997">hasMeta</span><span class="op" id="3317004">(</span><span class="ident" id="3317005">dir</span><span class="op" id="3317008">)</span>&nbsp;<span class="op" id="3317010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317014">return</span>&nbsp;<span class="ident" id="3317021">glob</span><span class="op" id="3317025">(</span><span class="ident" id="3317026">dir</span><span class="op" id="3317029">,</span>&nbsp;<span class="ident" id="3317031">file</span><span class="op" id="3317035">,</span>&nbsp;<span class="builtintype" id="3317037">nil</span><span class="op" id="3317040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317043">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317047">var</span>&nbsp;<span class="ident" id="3317051">m</span>&nbsp;<span class="op" id="3317053">[</span><span class="op" id="3317054">]</span><span class="builtintype" id="3317055">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3317063">m</span><span class="op" id="3317064">,</span>&nbsp;<span class="ident" id="3317066">err</span>&nbsp;<span class="op" id="3317070">=</span>&nbsp;<span class="ident" id="3317072">Glob</span><span class="op" id="3317076">(</span><span class="ident" id="3317077">dir</span><span class="op" id="3317080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317083">if</span>&nbsp;<span class="ident" id="3317086">err</span>&nbsp;<span class="op" id="3317090">!=</span>&nbsp;<span class="builtintype" id="3317093">nil</span>&nbsp;<span class="op" id="3317097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317101">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317112">for</span>&nbsp;<span class="ident" id="3317116">_</span><span class="op" id="3317117">,</span>&nbsp;<span class="ident" id="3317119">d</span>&nbsp;<span class="op" id="3317121">:=</span>&nbsp;<span class="keyword" id="3317124">range</span>&nbsp;<span class="ident" id="3317130">m</span>&nbsp;<span class="op" id="3317132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3317136">matches</span><span class="op" id="3317143">,</span>&nbsp;<span class="ident" id="3317145">err</span>&nbsp;<span class="op" id="3317149">=</span>&nbsp;<span class="ident" id="3317151">glob</span><span class="op" id="3317155">(</span><span class="ident" id="3317156">d</span><span class="op" id="3317157">,</span>&nbsp;<span class="ident" id="3317159">file</span><span class="op" id="3317163">,</span>&nbsp;<span class="ident" id="3317165">matches</span><span class="op" id="3317172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317176">if</span>&nbsp;<span class="ident" id="3317179">err</span>&nbsp;<span class="op" id="3317183">!=</span>&nbsp;<span class="builtintype" id="3317186">nil</span>&nbsp;<span class="op" id="3317190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317195">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317210">return</span><br>
<span class="lineno"></span><span class="op" id="3317217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="3317220">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3317285">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3317344">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3317404">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3317439">func</span>&nbsp;<span class="ident" id="3317444">glob</span><span class="op" id="3317448">(</span><span class="ident" id="3317449">dir</span><span class="op" id="3317452">,</span>&nbsp;<span class="ident" id="3317454">pattern</span>&nbsp;<span class="builtintype" id="3317462">string</span><span class="op" id="3317468">,</span>&nbsp;<span class="ident" id="3317470">matches</span>&nbsp;<span class="op" id="3317478">[</span><span class="op" id="3317479">]</span><span class="builtintype" id="3317480">string</span><span class="op" id="3317486">)</span>&nbsp;<span class="op" id="3317488">(</span><span class="ident" id="3317489">m</span>&nbsp;<span class="op" id="3317491">[</span><span class="op" id="3317492">]</span><span class="builtintype" id="3317493">string</span><span class="op" id="3317499">,</span>&nbsp;<span class="ident" id="3317501">e</span>&nbsp;<span class="builtintype" id="3317503">error</span><span class="op" id="3317508">)</span>&nbsp;<span class="op" id="3317510">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3317513">m</span>&nbsp;<span class="op" id="3317515">=</span>&nbsp;<span class="ident" id="3317517">matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3317526">fi</span><span class="op" id="3317528">,</span>&nbsp;<span class="ident" id="3317530">err</span>&nbsp;<span class="op" id="3317534">:=</span>&nbsp;<span class="ident" id="3317537">os</span><span class="op" id="3317539">.</span><span class="ident" id="3317540">Stat</span><span class="op" id="3317544">(</span><span class="ident" id="3317545">dir</span><span class="op" id="3317548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317551">if</span>&nbsp;<span class="ident" id="3317554">err</span>&nbsp;<span class="op" id="3317558">!=</span>&nbsp;<span class="builtintype" id="3317561">nil</span>&nbsp;<span class="op" id="3317565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317569">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317577">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317580">if</span>&nbsp;<span class="op" id="3317583">!</span><span class="ident" id="3317584">fi</span><span class="op" id="3317586">.</span><span class="ident" id="3317587">IsDir</span><span class="op" id="3317592">(</span><span class="op" id="3317593">)</span>&nbsp;<span class="op" id="3317595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317599">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3317610">d</span><span class="op" id="3317611">,</span>&nbsp;<span class="ident" id="3317613">err</span>&nbsp;<span class="op" id="3317617">:=</span>&nbsp;<span class="ident" id="3317620">os</span><span class="op" id="3317622">.</span><span class="ident" id="3317623">Open</span><span class="op" id="3317627">(</span><span class="ident" id="3317628">dir</span><span class="op" id="3317631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317634">if</span>&nbsp;<span class="ident" id="3317637">err</span>&nbsp;<span class="op" id="3317641">!=</span>&nbsp;<span class="builtintype" id="3317644">nil</span>&nbsp;<span class="op" id="3317648">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317652">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317663">defer</span>&nbsp;<span class="ident" id="3317669">d</span><span class="op" id="3317670">.</span><span class="ident" id="3317671">Close</span><span class="op" id="3317676">(</span><span class="op" id="3317677">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3317681">names</span><span class="op" id="3317686">,</span>&nbsp;<span class="ident" id="3317688">_</span>&nbsp;<span class="op" id="3317690">:=</span>&nbsp;<span class="ident" id="3317693">d</span><span class="op" id="3317694">.</span><span class="ident" id="3317695">Readdirnames</span><span class="op" id="3317707">(</span><span class="op" id="3317708">-</span><span class="num" id="3317709">1</span><span class="op" id="3317710">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3317713">sort</span><span class="op" id="3317717">.</span><span class="ident" id="3317718">Strings</span><span class="op" id="3317725">(</span><span class="ident" id="3317726">names</span><span class="op" id="3317731">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317735">for</span>&nbsp;<span class="ident" id="3317739">_</span><span class="op" id="3317740">,</span>&nbsp;<span class="ident" id="3317742">n</span>&nbsp;<span class="op" id="3317744">:=</span>&nbsp;<span class="keyword" id="3317747">range</span>&nbsp;<span class="ident" id="3317753">names</span>&nbsp;<span class="op" id="3317759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3317763">matched</span><span class="op" id="3317770">,</span>&nbsp;<span class="ident" id="3317772">err</span>&nbsp;<span class="op" id="3317776">:=</span>&nbsp;<span class="ident" id="3317779">Match</span><span class="op" id="3317784">(</span><span class="ident" id="3317785">pattern</span><span class="op" id="3317792">,</span>&nbsp;<span class="ident" id="3317794">n</span><span class="op" id="3317795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317799">if</span>&nbsp;<span class="ident" id="3317802">err</span>&nbsp;<span class="op" id="3317806">!=</span>&nbsp;<span class="builtintype" id="3317809">nil</span>&nbsp;<span class="op" id="3317813">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317818">return</span>&nbsp;<span class="ident" id="3317825">m</span><span class="op" id="3317826">,</span>&nbsp;<span class="ident" id="3317828">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317838">if</span>&nbsp;<span class="ident" id="3317841">matched</span>&nbsp;<span class="op" id="3317849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3317854">m</span>&nbsp;<span class="op" id="3317856">=</span>&nbsp;<span class="builtinfunc" id="3317858">append</span><span class="op" id="3317864">(</span><span class="ident" id="3317865">m</span><span class="op" id="3317866">,</span>&nbsp;<span class="ident" id="3317868">Join</span><span class="op" id="3317872">(</span><span class="ident" id="3317873">dir</span><span class="op" id="3317876">,</span>&nbsp;<span class="ident" id="3317878">n</span><span class="op" id="3317879">)</span><span class="op" id="3317880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317884">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317890">return</span><br>
<span class="lineno"></span><span class="op" id="3317897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3317900">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="3317969">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="3317993">func</span>&nbsp;<span class="ident" id="3317998">hasMeta</span><span class="op" id="3318005">(</span><span class="ident" id="3318006">path</span>&nbsp;<span class="builtintype" id="3318011">string</span><span class="op" id="3318017">)</span>&nbsp;<span class="builtintype" id="3318019">bool</span>&nbsp;<span class="op" id="3318024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3318027">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3318092">return</span>&nbsp;<span class="ident" id="3318099">strings</span><span class="op" id="3318106">.</span><span class="ident" id="3318107">IndexAny</span><span class="op" id="3318115">(</span><span class="ident" id="3318116">path</span><span class="op" id="3318120">,</span>&nbsp;<span class="string" id="3318122">&#34;*?[&#34;</span><span class="op" id="3318127">)</span>&nbsp;<span class="op" id="3318129">&gt;=</span>&nbsp;<span class="num" id="3318132">0</span><br>
<span class="lineno"></span><span class="op" id="3318134">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
