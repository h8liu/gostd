<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/scanner</h2>
<ul>
<li><a href="/gostd/go/scanner/errors.go.html" class="current">errors.go</a></li>
<li><a href="/gostd/go/scanner/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/scanner/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/go/scanner/scanner_test.go.html">scanner_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4772093">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4772148">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4772202">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4772253">package</span>&nbsp;<span class="ident" id="4772261">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4772270">import</span>&nbsp;<span class="op" id="4772277">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4772280">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4772287">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4772299">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4772305">&#34;sort&#34;</span><br>
<span class="lineno"></span><span class="op" id="4772312">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4772315">//&nbsp;In&nbsp;an&nbsp;ErrorList,&nbsp;an&nbsp;error&nbsp;is&nbsp;represented&nbsp;by&nbsp;an&nbsp;*Error.</span><br>
<span class="lineno">15</span><span class="comment" id="4772373">//&nbsp;The&nbsp;position&nbsp;Pos,&nbsp;if&nbsp;valid,&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4772431">//&nbsp;the&nbsp;offending&nbsp;token,&nbsp;and&nbsp;the&nbsp;error&nbsp;condition&nbsp;is&nbsp;described</span><br>
<span class="lineno"></span><span class="comment" id="4772492">//&nbsp;by&nbsp;Msg.</span><br>
<span class="lineno"></span><span class="comment" id="4772503">//</span><br>
<span class="lineno"></span><span class="keyword" id="4772506">type</span>&nbsp;<span class="ident" id="4772511">Error</span>&nbsp;<span class="keyword" id="4772517">struct</span>&nbsp;<span class="op" id="4772524">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4772527">Pos</span>&nbsp;<span class="ident" id="4772531">token</span><span class="op" id="4772536">.</span><span class="ident" id="4772537">Position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4772547">Msg</span>&nbsp;<span class="builtintype" id="4772551">string</span><br>
<span class="lineno"></span><span class="op" id="4772558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4772561">//&nbsp;Error&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">25</span><span class="keyword" id="4772602">func</span>&nbsp;<span class="op" id="4772607">(</span><span class="ident" id="4772608">e</span>&nbsp;<span class="ident" id="4772610">Error</span><span class="op" id="4772615">)</span>&nbsp;<span class="ident" id="4772617">Error</span><span class="op" id="4772622">(</span><span class="op" id="4772623">)</span>&nbsp;<span class="builtintype" id="4772625">string</span>&nbsp;<span class="op" id="4772632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4772635">if</span>&nbsp;<span class="ident" id="4772638">e</span><span class="op" id="4772639">.</span><span class="ident" id="4772640">Pos</span><span class="op" id="4772643">.</span><span class="ident" id="4772644">Filename</span>&nbsp;<span class="op" id="4772653">!=</span>&nbsp;<span class="string" id="4772656">&#34;&#34;</span>&nbsp;<span class="op" id="4772659">||</span>&nbsp;<span class="ident" id="4772662">e</span><span class="op" id="4772663">.</span><span class="ident" id="4772664">Pos</span><span class="op" id="4772667">.</span><span class="ident" id="4772668">IsValid</span><span class="op" id="4772675">(</span><span class="op" id="4772676">)</span>&nbsp;<span class="op" id="4772678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4772682">//&nbsp;don&#39;t&nbsp;print&nbsp;&#34;&lt;unknown&nbsp;position&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4772720">//&nbsp;TODO(gri)&nbsp;reconsider&nbsp;the&nbsp;semantics&nbsp;of&nbsp;Position.IsValid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4772780">return</span>&nbsp;<span class="ident" id="4772787">e</span><span class="op" id="4772788">.</span><span class="ident" id="4772789">Pos</span><span class="op" id="4772792">.</span><span class="ident" id="4772793">String</span><span class="op" id="4772799">(</span><span class="op" id="4772800">)</span>&nbsp;<span class="op" id="4772802">+</span>&nbsp;<span class="string" id="4772804">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="4772809">+</span>&nbsp;<span class="ident" id="4772811">e</span><span class="op" id="4772812">.</span><span class="ident" id="4772813">Msg</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4772818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4772821">return</span>&nbsp;<span class="ident" id="4772828">e</span><span class="op" id="4772829">.</span><span class="ident" id="4772830">Msg</span><br>
<span class="lineno"></span><span class="op" id="4772834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4772837">//&nbsp;ErrorList&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;*Errors.</span><br>
<span class="lineno">35</span><span class="comment" id="4772872">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;an&nbsp;ErrorList&nbsp;is&nbsp;an&nbsp;empty&nbsp;ErrorList&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="4772943">//</span><br>
<span class="lineno"></span><span class="keyword" id="4772946">type</span>&nbsp;<span class="ident" id="4772951">ErrorList</span>&nbsp;<span class="op" id="4772961">[</span><span class="op" id="4772962">]</span><span class="op" id="4772963">*</span><span class="ident" id="4772964">Error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4772971">//&nbsp;Add&nbsp;adds&nbsp;an&nbsp;Error&nbsp;with&nbsp;given&nbsp;position&nbsp;and&nbsp;error&nbsp;message&nbsp;to&nbsp;an&nbsp;ErrorList.</span><br>
<span class="lineno">40</span><span class="keyword" id="4773047">func</span>&nbsp;<span class="op" id="4773052">(</span><span class="ident" id="4773053">p</span>&nbsp;<span class="op" id="4773055">*</span><span class="ident" id="4773056">ErrorList</span><span class="op" id="4773065">)</span>&nbsp;<span class="ident" id="4773067">Add</span><span class="op" id="4773070">(</span><span class="ident" id="4773071">pos</span>&nbsp;<span class="ident" id="4773075">token</span><span class="op" id="4773080">.</span><span class="ident" id="4773081">Position</span><span class="op" id="4773089">,</span>&nbsp;<span class="ident" id="4773091">msg</span>&nbsp;<span class="builtintype" id="4773095">string</span><span class="op" id="4773101">)</span>&nbsp;<span class="op" id="4773103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4773106">*</span><span class="ident" id="4773107">p</span>&nbsp;<span class="op" id="4773109">=</span>&nbsp;<span class="builtinfunc" id="4773111">append</span><span class="op" id="4773117">(</span><span class="op" id="4773118">*</span><span class="ident" id="4773119">p</span><span class="op" id="4773120">,</span>&nbsp;<span class="op" id="4773122">&amp;</span><span class="ident" id="4773123">Error</span><span class="op" id="4773128">{</span><span class="ident" id="4773129">pos</span><span class="op" id="4773132">,</span>&nbsp;<span class="ident" id="4773134">msg</span><span class="op" id="4773137">}</span><span class="op" id="4773138">)</span><br>
<span class="lineno"></span><span class="op" id="4773140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4773143">//&nbsp;Reset&nbsp;resets&nbsp;an&nbsp;ErrorList&nbsp;to&nbsp;no&nbsp;errors.</span><br>
<span class="lineno">45</span><span class="keyword" id="4773186">func</span>&nbsp;<span class="op" id="4773191">(</span><span class="ident" id="4773192">p</span>&nbsp;<span class="op" id="4773194">*</span><span class="ident" id="4773195">ErrorList</span><span class="op" id="4773204">)</span>&nbsp;<span class="ident" id="4773206">Reset</span><span class="op" id="4773211">(</span><span class="op" id="4773212">)</span>&nbsp;<span class="op" id="4773214">{</span>&nbsp;<span class="op" id="4773216">*</span><span class="ident" id="4773217">p</span>&nbsp;<span class="op" id="4773219">=</span>&nbsp;<span class="op" id="4773221">(</span><span class="op" id="4773222">*</span><span class="ident" id="4773223">p</span><span class="op" id="4773224">)</span><span class="op" id="4773225">[</span><span class="num" id="4773226">0</span><span class="op" id="4773227">:</span><span class="num" id="4773228">0</span><span class="op" id="4773229">]</span>&nbsp;<span class="op" id="4773231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4773234">//&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;sort&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="4773278">func</span>&nbsp;<span class="op" id="4773283">(</span><span class="ident" id="4773284">p</span>&nbsp;<span class="ident" id="4773286">ErrorList</span><span class="op" id="4773295">)</span>&nbsp;<span class="ident" id="4773297">Len</span><span class="op" id="4773300">(</span><span class="op" id="4773301">)</span>&nbsp;<span class="builtintype" id="4773303">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4773312">{</span>&nbsp;<span class="keyword" id="4773314">return</span>&nbsp;<span class="builtinfunc" id="4773321">len</span><span class="op" id="4773324">(</span><span class="ident" id="4773325">p</span><span class="op" id="4773326">)</span>&nbsp;<span class="op" id="4773328">}</span><br>
<span class="lineno"></span><span class="keyword" id="4773330">func</span>&nbsp;<span class="op" id="4773335">(</span><span class="ident" id="4773336">p</span>&nbsp;<span class="ident" id="4773338">ErrorList</span><span class="op" id="4773347">)</span>&nbsp;<span class="ident" id="4773349">Swap</span><span class="op" id="4773353">(</span><span class="ident" id="4773354">i</span><span class="op" id="4773355">,</span>&nbsp;<span class="ident" id="4773357">j</span>&nbsp;<span class="builtintype" id="4773359">int</span><span class="op" id="4773362">)</span>&nbsp;<span class="op" id="4773364">{</span>&nbsp;<span class="ident" id="4773366">p</span><span class="op" id="4773367">[</span><span class="ident" id="4773368">i</span><span class="op" id="4773369">]</span><span class="op" id="4773370">,</span>&nbsp;<span class="ident" id="4773372">p</span><span class="op" id="4773373">[</span><span class="ident" id="4773374">j</span><span class="op" id="4773375">]</span>&nbsp;<span class="op" id="4773377">=</span>&nbsp;<span class="ident" id="4773379">p</span><span class="op" id="4773380">[</span><span class="ident" id="4773381">j</span><span class="op" id="4773382">]</span><span class="op" id="4773383">,</span>&nbsp;<span class="ident" id="4773385">p</span><span class="op" id="4773386">[</span><span class="ident" id="4773387">i</span><span class="op" id="4773388">]</span>&nbsp;<span class="op" id="4773390">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4773393">func</span>&nbsp;<span class="op" id="4773398">(</span><span class="ident" id="4773399">p</span>&nbsp;<span class="ident" id="4773401">ErrorList</span><span class="op" id="4773410">)</span>&nbsp;<span class="ident" id="4773412">Less</span><span class="op" id="4773416">(</span><span class="ident" id="4773417">i</span><span class="op" id="4773418">,</span>&nbsp;<span class="ident" id="4773420">j</span>&nbsp;<span class="builtintype" id="4773422">int</span><span class="op" id="4773425">)</span>&nbsp;<span class="builtintype" id="4773427">bool</span>&nbsp;<span class="op" id="4773432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773435">e</span>&nbsp;<span class="op" id="4773437">:=</span>&nbsp;<span class="op" id="4773440">&amp;</span><span class="ident" id="4773441">p</span><span class="op" id="4773442">[</span><span class="ident" id="4773443">i</span><span class="op" id="4773444">]</span><span class="op" id="4773445">.</span><span class="ident" id="4773446">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4773451">f</span>&nbsp;<span class="op" id="4773453">:=</span>&nbsp;<span class="op" id="4773456">&amp;</span><span class="ident" id="4773457">p</span><span class="op" id="4773458">[</span><span class="ident" id="4773459">j</span><span class="op" id="4773460">]</span><span class="op" id="4773461">.</span><span class="ident" id="4773462">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4773467">//&nbsp;Note&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;simply&nbsp;compare&nbsp;file&nbsp;offsets&nbsp;because</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4773541">//&nbsp;the&nbsp;offsets&nbsp;do&nbsp;not&nbsp;reflect&nbsp;modified&nbsp;line&nbsp;information&nbsp;(through&nbsp;//line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4773614">//&nbsp;comments).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773629">if</span>&nbsp;<span class="ident" id="4773632">e</span><span class="op" id="4773633">.</span><span class="ident" id="4773634">Filename</span>&nbsp;<span class="op" id="4773643">&lt;</span>&nbsp;<span class="ident" id="4773645">f</span><span class="op" id="4773646">.</span><span class="ident" id="4773647">Filename</span>&nbsp;<span class="op" id="4773656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773660">return</span>&nbsp;<span class="builtintype" id="4773667">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4773673">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773676">if</span>&nbsp;<span class="ident" id="4773679">e</span><span class="op" id="4773680">.</span><span class="ident" id="4773681">Filename</span>&nbsp;<span class="op" id="4773690">==</span>&nbsp;<span class="ident" id="4773693">f</span><span class="op" id="4773694">.</span><span class="ident" id="4773695">Filename</span>&nbsp;<span class="op" id="4773704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773708">if</span>&nbsp;<span class="ident" id="4773711">e</span><span class="op" id="4773712">.</span><span class="ident" id="4773713">Line</span>&nbsp;<span class="op" id="4773718">&lt;</span>&nbsp;<span class="ident" id="4773720">f</span><span class="op" id="4773721">.</span><span class="ident" id="4773722">Line</span>&nbsp;<span class="op" id="4773727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773732">return</span>&nbsp;<span class="builtintype" id="4773739">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4773746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773750">if</span>&nbsp;<span class="ident" id="4773753">e</span><span class="op" id="4773754">.</span><span class="ident" id="4773755">Line</span>&nbsp;<span class="op" id="4773760">==</span>&nbsp;<span class="ident" id="4773763">f</span><span class="op" id="4773764">.</span><span class="ident" id="4773765">Line</span>&nbsp;<span class="op" id="4773770">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773775">return</span>&nbsp;<span class="ident" id="4773782">e</span><span class="op" id="4773783">.</span><span class="ident" id="4773784">Column</span>&nbsp;<span class="op" id="4773791">&lt;</span>&nbsp;<span class="ident" id="4773793">f</span><span class="op" id="4773794">.</span><span class="ident" id="4773795">Column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4773804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4773807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4773810">return</span>&nbsp;<span class="builtintype" id="4773817">false</span><br>
<span class="lineno"></span><span class="op" id="4773823">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="comment" id="4773826">//&nbsp;Sort&nbsp;sorts&nbsp;an&nbsp;ErrorList.&nbsp;*Error&nbsp;entries&nbsp;are&nbsp;sorted&nbsp;by&nbsp;position,</span><br>
<span class="lineno"></span><span class="comment" id="4773893">//&nbsp;other&nbsp;errors&nbsp;are&nbsp;sorted&nbsp;by&nbsp;error&nbsp;message,&nbsp;and&nbsp;before&nbsp;any&nbsp;*Error</span><br>
<span class="lineno"></span><span class="comment" id="4773960">//&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="4773970">//</span><br>
<span class="lineno">75</span><span class="keyword" id="4773973">func</span>&nbsp;<span class="op" id="4773978">(</span><span class="ident" id="4773979">p</span>&nbsp;<span class="ident" id="4773981">ErrorList</span><span class="op" id="4773990">)</span>&nbsp;<span class="ident" id="4773992">Sort</span><span class="op" id="4773996">(</span><span class="op" id="4773997">)</span>&nbsp;<span class="op" id="4773999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774002">sort</span><span class="op" id="4774006">.</span><span class="ident" id="4774007">Sort</span><span class="op" id="4774011">(</span><span class="ident" id="4774012">p</span><span class="op" id="4774013">)</span><br>
<span class="lineno"></span><span class="op" id="4774015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4774018">//&nbsp;RemoveMultiples&nbsp;sorts&nbsp;an&nbsp;ErrorList&nbsp;and&nbsp;removes&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;error&nbsp;per&nbsp;line.</span><br>
<span class="lineno">80</span><span class="keyword" id="4774102">func</span>&nbsp;<span class="op" id="4774107">(</span><span class="ident" id="4774108">p</span>&nbsp;<span class="op" id="4774110">*</span><span class="ident" id="4774111">ErrorList</span><span class="op" id="4774120">)</span>&nbsp;<span class="ident" id="4774122">RemoveMultiples</span><span class="op" id="4774137">(</span><span class="op" id="4774138">)</span>&nbsp;<span class="op" id="4774140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774143">sort</span><span class="op" id="4774147">.</span><span class="ident" id="4774148">Sort</span><span class="op" id="4774152">(</span><span class="ident" id="4774153">p</span><span class="op" id="4774154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774157">var</span>&nbsp;<span class="ident" id="4774161">last</span>&nbsp;<span class="ident" id="4774166">token</span><span class="op" id="4774171">.</span><span class="ident" id="4774172">Position</span>&nbsp;<span class="comment" id="4774181">//&nbsp;initial&nbsp;last.Line&nbsp;is&nbsp;!=&nbsp;any&nbsp;legal&nbsp;error&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774230">i</span>&nbsp;<span class="op" id="4774232">:=</span>&nbsp;<span class="num" id="4774235">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774238">for</span>&nbsp;<span class="ident" id="4774242">_</span><span class="op" id="4774243">,</span>&nbsp;<span class="ident" id="4774245">e</span>&nbsp;<span class="op" id="4774247">:=</span>&nbsp;<span class="keyword" id="4774250">range</span>&nbsp;<span class="op" id="4774256">*</span><span class="ident" id="4774257">p</span>&nbsp;<span class="op" id="4774259">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774263">if</span>&nbsp;<span class="ident" id="4774266">e</span><span class="op" id="4774267">.</span><span class="ident" id="4774268">Pos</span><span class="op" id="4774271">.</span><span class="ident" id="4774272">Filename</span>&nbsp;<span class="op" id="4774281">!=</span>&nbsp;<span class="ident" id="4774284">last</span><span class="op" id="4774288">.</span><span class="ident" id="4774289">Filename</span>&nbsp;<span class="op" id="4774298">||</span>&nbsp;<span class="ident" id="4774301">e</span><span class="op" id="4774302">.</span><span class="ident" id="4774303">Pos</span><span class="op" id="4774306">.</span><span class="ident" id="4774307">Line</span>&nbsp;<span class="op" id="4774312">!=</span>&nbsp;<span class="ident" id="4774315">last</span><span class="op" id="4774319">.</span><span class="ident" id="4774320">Line</span>&nbsp;<span class="op" id="4774325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774330">last</span>&nbsp;<span class="op" id="4774335">=</span>&nbsp;<span class="ident" id="4774337">e</span><span class="op" id="4774338">.</span><span class="ident" id="4774339">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774346">(</span><span class="op" id="4774347">*</span><span class="ident" id="4774348">p</span><span class="op" id="4774349">)</span><span class="op" id="4774350">[</span><span class="ident" id="4774351">i</span><span class="op" id="4774352">]</span>&nbsp;<span class="op" id="4774354">=</span>&nbsp;<span class="ident" id="4774356">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774361">i</span><span class="op" id="4774362">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774367">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774373">(</span><span class="op" id="4774374">*</span><span class="ident" id="4774375">p</span><span class="op" id="4774376">)</span>&nbsp;<span class="op" id="4774378">=</span>&nbsp;<span class="op" id="4774380">(</span><span class="op" id="4774381">*</span><span class="ident" id="4774382">p</span><span class="op" id="4774383">)</span><span class="op" id="4774384">[</span><span class="num" id="4774385">0</span><span class="op" id="4774386">:</span><span class="ident" id="4774387">i</span><span class="op" id="4774388">]</span><br>
<span class="lineno"></span><span class="op" id="4774390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4774393">//&nbsp;An&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">95</span><span class="keyword" id="4774441">func</span>&nbsp;<span class="op" id="4774446">(</span><span class="ident" id="4774447">p</span>&nbsp;<span class="ident" id="4774449">ErrorList</span><span class="op" id="4774458">)</span>&nbsp;<span class="ident" id="4774460">Error</span><span class="op" id="4774465">(</span><span class="op" id="4774466">)</span>&nbsp;<span class="builtintype" id="4774468">string</span>&nbsp;<span class="op" id="4774475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774478">switch</span>&nbsp;<span class="builtinfunc" id="4774485">len</span><span class="op" id="4774488">(</span><span class="ident" id="4774489">p</span><span class="op" id="4774490">)</span>&nbsp;<span class="op" id="4774492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774495">case</span>&nbsp;<span class="num" id="4774500">0</span><span class="op" id="4774501">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774505">return</span>&nbsp;<span class="string" id="4774512">&#34;no&nbsp;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774525">case</span>&nbsp;<span class="num" id="4774530">1</span><span class="op" id="4774531">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774535">return</span>&nbsp;<span class="ident" id="4774542">p</span><span class="op" id="4774543">[</span><span class="num" id="4774544">0</span><span class="op" id="4774545">]</span><span class="op" id="4774546">.</span><span class="ident" id="4774547">Error</span><span class="op" id="4774552">(</span><span class="op" id="4774553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774559">return</span>&nbsp;<span class="ident" id="4774566">fmt</span><span class="op" id="4774569">.</span><span class="ident" id="4774570">Sprintf</span><span class="op" id="4774577">(</span><span class="string" id="4774578">&#34;%s&nbsp;(and&nbsp;%d&nbsp;more&nbsp;errors)&#34;</span><span class="op" id="4774603">,</span>&nbsp;<span class="ident" id="4774605">p</span><span class="op" id="4774606">[</span><span class="num" id="4774607">0</span><span class="op" id="4774608">]</span><span class="op" id="4774609">,</span>&nbsp;<span class="builtinfunc" id="4774611">len</span><span class="op" id="4774614">(</span><span class="ident" id="4774615">p</span><span class="op" id="4774616">)</span><span class="op" id="4774617">-</span><span class="num" id="4774618">1</span><span class="op" id="4774619">)</span><br>
<span class="lineno"></span><span class="op" id="4774621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4774624">//&nbsp;Err&nbsp;returns&nbsp;an&nbsp;error&nbsp;equivalent&nbsp;to&nbsp;this&nbsp;error&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4774679">//&nbsp;If&nbsp;the&nbsp;list&nbsp;is&nbsp;empty,&nbsp;Err&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4774721">func</span>&nbsp;<span class="op" id="4774726">(</span><span class="ident" id="4774727">p</span>&nbsp;<span class="ident" id="4774729">ErrorList</span><span class="op" id="4774738">)</span>&nbsp;<span class="ident" id="4774740">Err</span><span class="op" id="4774743">(</span><span class="op" id="4774744">)</span>&nbsp;<span class="builtintype" id="4774746">error</span>&nbsp;<span class="op" id="4774752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774755">if</span>&nbsp;<span class="builtinfunc" id="4774758">len</span><span class="op" id="4774761">(</span><span class="ident" id="4774762">p</span><span class="op" id="4774763">)</span>&nbsp;<span class="op" id="4774765">==</span>&nbsp;<span class="num" id="4774768">0</span>&nbsp;<span class="op" id="4774770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774774">return</span>&nbsp;<span class="builtintype" id="4774781">nil</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774789">return</span>&nbsp;<span class="ident" id="4774796">p</span><br>
<span class="lineno"></span><span class="op" id="4774798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4774801">//&nbsp;PrintError&nbsp;is&nbsp;a&nbsp;utility&nbsp;function&nbsp;that&nbsp;prints&nbsp;a&nbsp;list&nbsp;of&nbsp;errors&nbsp;to&nbsp;w,</span><br>
<span class="lineno">115</span><span class="comment" id="4774872">//&nbsp;one&nbsp;error&nbsp;per&nbsp;line,&nbsp;if&nbsp;the&nbsp;err&nbsp;parameter&nbsp;is&nbsp;an&nbsp;ErrorList.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="4774943">//&nbsp;it&nbsp;prints&nbsp;the&nbsp;err&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="4774972">//</span><br>
<span class="lineno"></span><span class="keyword" id="4774975">func</span>&nbsp;<span class="ident" id="4774980">PrintError</span><span class="op" id="4774990">(</span><span class="ident" id="4774991">w</span>&nbsp;<span class="ident" id="4774993">io</span><span class="op" id="4774995">.</span><span class="ident" id="4774996">Writer</span><span class="op" id="4775002">,</span>&nbsp;<span class="ident" id="4775004">err</span>&nbsp;<span class="builtintype" id="4775008">error</span><span class="op" id="4775013">)</span>&nbsp;<span class="op" id="4775015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4775018">if</span>&nbsp;<span class="ident" id="4775021">list</span><span class="op" id="4775025">,</span>&nbsp;<span class="ident" id="4775027">ok</span>&nbsp;<span class="op" id="4775030">:=</span>&nbsp;<span class="ident" id="4775033">err</span><span class="op" id="4775036">.</span><span class="op" id="4775037">(</span><span class="ident" id="4775038">ErrorList</span><span class="op" id="4775047">)</span><span class="op" id="4775048">;</span>&nbsp;<span class="ident" id="4775050">ok</span>&nbsp;<span class="op" id="4775053">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4775057">for</span>&nbsp;<span class="ident" id="4775061">_</span><span class="op" id="4775062">,</span>&nbsp;<span class="ident" id="4775064">e</span>&nbsp;<span class="op" id="4775066">:=</span>&nbsp;<span class="keyword" id="4775069">range</span>&nbsp;<span class="ident" id="4775075">list</span>&nbsp;<span class="op" id="4775080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4775085">fmt</span><span class="op" id="4775088">.</span><span class="ident" id="4775089">Fprintf</span><span class="op" id="4775096">(</span><span class="ident" id="4775097">w</span><span class="op" id="4775098">,</span>&nbsp;<span class="string" id="4775100">&#34;%s\n&#34;</span><span class="op" id="4775106">,</span>&nbsp;<span class="ident" id="4775108">e</span><span class="op" id="4775109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4775113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4775116">}</span>&nbsp;<span class="keyword" id="4775118">else</span>&nbsp;<span class="keyword" id="4775123">if</span>&nbsp;<span class="ident" id="4775126">err</span>&nbsp;<span class="op" id="4775130">!=</span>&nbsp;<span class="builtintype" id="4775133">nil</span>&nbsp;<span class="op" id="4775137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4775141">fmt</span><span class="op" id="4775144">.</span><span class="ident" id="4775145">Fprintf</span><span class="op" id="4775152">(</span><span class="ident" id="4775153">w</span><span class="op" id="4775154">,</span>&nbsp;<span class="string" id="4775156">&#34;%s\n&#34;</span><span class="op" id="4775162">,</span>&nbsp;<span class="ident" id="4775164">err</span><span class="op" id="4775167">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4775170">}</span><br>
<span class="lineno"></span><span class="op" id="4775172">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
