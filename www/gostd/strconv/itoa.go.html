<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html" class="current">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2130217">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2130272">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2130326">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2130377">package</span>&nbsp;<span class="ident" id="2130385">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2130394">//&nbsp;FormatUint&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2130466">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2130540">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno">10</span><span class="keyword" id="2130567">func</span>&nbsp;<span class="ident" id="2130572">FormatUint</span><span class="op" id="2130582">(</span><span class="ident" id="2130583">i</span>&nbsp;<span class="ident" id="2130585">uint64</span><span class="op" id="2130591">,</span>&nbsp;<span class="ident" id="2130593">base</span>&nbsp;<span class="builtintype" id="2130598">int</span><span class="op" id="2130601">)</span>&nbsp;<span class="builtintype" id="2130603">string</span>&nbsp;<span class="op" id="2130610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2130613">_</span><span class="op" id="2130614">,</span>&nbsp;<span class="ident" id="2130616">s</span>&nbsp;<span class="op" id="2130618">:=</span>&nbsp;<span class="ident" id="2130621">formatBits</span><span class="op" id="2130631">(</span><span class="builtintype" id="2130632">nil</span><span class="op" id="2130635">,</span>&nbsp;<span class="ident" id="2130637">i</span><span class="op" id="2130638">,</span>&nbsp;<span class="ident" id="2130640">base</span><span class="op" id="2130644">,</span>&nbsp;<span class="builtintype" id="2130646">false</span><span class="op" id="2130651">,</span>&nbsp;<span class="builtintype" id="2130653">false</span><span class="op" id="2130658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2130661">return</span>&nbsp;<span class="ident" id="2130668">s</span><br>
<span class="lineno"></span><span class="op" id="2130670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2130673">//&nbsp;FormatInt&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2130744">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2130818">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="2130845">func</span>&nbsp;<span class="ident" id="2130850">FormatInt</span><span class="op" id="2130859">(</span><span class="ident" id="2130860">i</span>&nbsp;<span class="ident" id="2130862">int64</span><span class="op" id="2130867">,</span>&nbsp;<span class="ident" id="2130869">base</span>&nbsp;<span class="builtintype" id="2130874">int</span><span class="op" id="2130877">)</span>&nbsp;<span class="builtintype" id="2130879">string</span>&nbsp;<span class="op" id="2130886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2130889">_</span><span class="op" id="2130890">,</span>&nbsp;<span class="ident" id="2130892">s</span>&nbsp;<span class="op" id="2130894">:=</span>&nbsp;<span class="ident" id="2130897">formatBits</span><span class="op" id="2130907">(</span><span class="builtintype" id="2130908">nil</span><span class="op" id="2130911">,</span>&nbsp;<span class="ident" id="2130913">uint64</span><span class="op" id="2130919">(</span><span class="ident" id="2130920">i</span><span class="op" id="2130921">)</span><span class="op" id="2130922">,</span>&nbsp;<span class="ident" id="2130924">base</span><span class="op" id="2130928">,</span>&nbsp;<span class="ident" id="2130930">i</span>&nbsp;<span class="op" id="2130932">&lt;</span>&nbsp;<span class="num" id="2130934">0</span><span class="op" id="2130935">,</span>&nbsp;<span class="builtintype" id="2130937">false</span><span class="op" id="2130942">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2130945">return</span>&nbsp;<span class="ident" id="2130952">s</span><br>
<span class="lineno"></span><span class="op" id="2130954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2130957">//&nbsp;Itoa&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;FormatInt(i,&nbsp;10).</span><br>
<span class="lineno"></span><span class="keyword" id="2131000">func</span>&nbsp;<span class="ident" id="2131005">Itoa</span><span class="op" id="2131009">(</span><span class="ident" id="2131010">i</span>&nbsp;<span class="builtintype" id="2131012">int</span><span class="op" id="2131015">)</span>&nbsp;<span class="builtintype" id="2131017">string</span>&nbsp;<span class="op" id="2131024">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2131027">return</span>&nbsp;<span class="ident" id="2131034">FormatInt</span><span class="op" id="2131043">(</span><span class="ident" id="2131044">int64</span><span class="op" id="2131049">(</span><span class="ident" id="2131050">i</span><span class="op" id="2131051">)</span><span class="op" id="2131052">,</span>&nbsp;<span class="num" id="2131054">10</span><span class="op" id="2131056">)</span><br>
<span class="lineno"></span><span class="op" id="2131058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2131061">//&nbsp;AppendInt&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2131116">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatInt,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno">30</span><span class="keyword" id="2131186">func</span>&nbsp;<span class="ident" id="2131191">AppendInt</span><span class="op" id="2131200">(</span><span class="ident" id="2131201">dst</span>&nbsp;<span class="op" id="2131205">[</span><span class="op" id="2131206">]</span><span class="builtintype" id="2131207">byte</span><span class="op" id="2131211">,</span>&nbsp;<span class="ident" id="2131213">i</span>&nbsp;<span class="ident" id="2131215">int64</span><span class="op" id="2131220">,</span>&nbsp;<span class="ident" id="2131222">base</span>&nbsp;<span class="builtintype" id="2131227">int</span><span class="op" id="2131230">)</span>&nbsp;<span class="op" id="2131232">[</span><span class="op" id="2131233">]</span><span class="builtintype" id="2131234">byte</span>&nbsp;<span class="op" id="2131239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2131242">dst</span><span class="op" id="2131245">,</span>&nbsp;<span class="ident" id="2131247">_</span>&nbsp;<span class="op" id="2131249">=</span>&nbsp;<span class="ident" id="2131251">formatBits</span><span class="op" id="2131261">(</span><span class="ident" id="2131262">dst</span><span class="op" id="2131265">,</span>&nbsp;<span class="ident" id="2131267">uint64</span><span class="op" id="2131273">(</span><span class="ident" id="2131274">i</span><span class="op" id="2131275">)</span><span class="op" id="2131276">,</span>&nbsp;<span class="ident" id="2131278">base</span><span class="op" id="2131282">,</span>&nbsp;<span class="ident" id="2131284">i</span>&nbsp;<span class="op" id="2131286">&lt;</span>&nbsp;<span class="num" id="2131288">0</span><span class="op" id="2131289">,</span>&nbsp;<span class="builtintype" id="2131291">true</span><span class="op" id="2131295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2131298">return</span>&nbsp;<span class="ident" id="2131305">dst</span><br>
<span class="lineno"></span><span class="op" id="2131309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2131312">//&nbsp;AppendUint&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2131377">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatUint,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="2131448">func</span>&nbsp;<span class="ident" id="2131453">AppendUint</span><span class="op" id="2131463">(</span><span class="ident" id="2131464">dst</span>&nbsp;<span class="op" id="2131468">[</span><span class="op" id="2131469">]</span><span class="builtintype" id="2131470">byte</span><span class="op" id="2131474">,</span>&nbsp;<span class="ident" id="2131476">i</span>&nbsp;<span class="ident" id="2131478">uint64</span><span class="op" id="2131484">,</span>&nbsp;<span class="ident" id="2131486">base</span>&nbsp;<span class="builtintype" id="2131491">int</span><span class="op" id="2131494">)</span>&nbsp;<span class="op" id="2131496">[</span><span class="op" id="2131497">]</span><span class="builtintype" id="2131498">byte</span>&nbsp;<span class="op" id="2131503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2131506">dst</span><span class="op" id="2131509">,</span>&nbsp;<span class="ident" id="2131511">_</span>&nbsp;<span class="op" id="2131513">=</span>&nbsp;<span class="ident" id="2131515">formatBits</span><span class="op" id="2131525">(</span><span class="ident" id="2131526">dst</span><span class="op" id="2131529">,</span>&nbsp;<span class="ident" id="2131531">i</span><span class="op" id="2131532">,</span>&nbsp;<span class="ident" id="2131534">base</span><span class="op" id="2131538">,</span>&nbsp;<span class="builtintype" id="2131540">false</span><span class="op" id="2131545">,</span>&nbsp;<span class="builtintype" id="2131547">true</span><span class="op" id="2131551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2131554">return</span>&nbsp;<span class="ident" id="2131561">dst</span><br>
<span class="lineno">40</span><span class="op" id="2131565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2131568">const</span>&nbsp;<span class="op" id="2131574">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2131577">digits</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2131586">=</span>&nbsp;<span class="string" id="2131588">&#34;0123456789abcdefghijklmnopqrstuvwxyz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2131628">digits01</span>&nbsp;<span class="op" id="2131637">=</span>&nbsp;<span class="string" id="2131639">&#34;0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&#34;</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2131743">digits10</span>&nbsp;<span class="op" id="2131752">=</span>&nbsp;<span class="string" id="2131754">&#34;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999999999&#34;</span><br>
<span class="lineno"></span><span class="op" id="2131857">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2131860">var</span>&nbsp;<span class="ident" id="2131864">shifts</span>&nbsp;<span class="op" id="2131871">=</span>&nbsp;<span class="op" id="2131873">[</span><span class="builtinfunc" id="2131874">len</span><span class="op" id="2131877">(</span><span class="ident" id="2131878">digits</span><span class="op" id="2131884">)</span>&nbsp;<span class="op" id="2131886">+</span>&nbsp;<span class="num" id="2131888">1</span><span class="op" id="2131889">]</span><span class="builtintype" id="2131890">uint</span><span class="op" id="2131894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2131897">1</span>&nbsp;<span class="op" id="2131899">&lt;&lt;</span>&nbsp;<span class="num" id="2131902">1</span><span class="op" id="2131903">:</span>&nbsp;<span class="num" id="2131905">1</span><span class="op" id="2131906">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2131909">1</span>&nbsp;<span class="op" id="2131911">&lt;&lt;</span>&nbsp;<span class="num" id="2131914">2</span><span class="op" id="2131915">:</span>&nbsp;<span class="num" id="2131917">2</span><span class="op" id="2131918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2131921">1</span>&nbsp;<span class="op" id="2131923">&lt;&lt;</span>&nbsp;<span class="num" id="2131926">3</span><span class="op" id="2131927">:</span>&nbsp;<span class="num" id="2131929">3</span><span class="op" id="2131930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2131933">1</span>&nbsp;<span class="op" id="2131935">&lt;&lt;</span>&nbsp;<span class="num" id="2131938">4</span><span class="op" id="2131939">:</span>&nbsp;<span class="num" id="2131941">4</span><span class="op" id="2131942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2131945">1</span>&nbsp;<span class="op" id="2131947">&lt;&lt;</span>&nbsp;<span class="num" id="2131950">5</span><span class="op" id="2131951">:</span>&nbsp;<span class="num" id="2131953">5</span><span class="op" id="2131954">,</span><br>
<span class="lineno"></span><span class="op" id="2131956">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2131959">//&nbsp;formatBits&nbsp;computes&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;u&nbsp;in&nbsp;the&nbsp;given&nbsp;base.</span><br>
<span class="lineno"></span><span class="comment" id="2132032">//&nbsp;If&nbsp;neg&nbsp;is&nbsp;set,&nbsp;u&nbsp;is&nbsp;treated&nbsp;as&nbsp;negative&nbsp;int64&nbsp;value.&nbsp;If&nbsp;append_&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2132102">//&nbsp;set,&nbsp;the&nbsp;string&nbsp;is&nbsp;appended&nbsp;to&nbsp;dst&nbsp;and&nbsp;the&nbsp;resulting&nbsp;byte&nbsp;slice&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2132172">//&nbsp;returned&nbsp;as&nbsp;the&nbsp;first&nbsp;result&nbsp;value;&nbsp;otherwise&nbsp;the&nbsp;string&nbsp;is&nbsp;returned</span><br>
<span class="lineno">60</span><span class="comment" id="2132244">//&nbsp;as&nbsp;the&nbsp;second&nbsp;result&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2132275">//</span><br>
<span class="lineno"></span><span class="keyword" id="2132278">func</span>&nbsp;<span class="ident" id="2132283">formatBits</span><span class="op" id="2132293">(</span><span class="ident" id="2132294">dst</span>&nbsp;<span class="op" id="2132298">[</span><span class="op" id="2132299">]</span><span class="builtintype" id="2132300">byte</span><span class="op" id="2132304">,</span>&nbsp;<span class="ident" id="2132306">u</span>&nbsp;<span class="ident" id="2132308">uint64</span><span class="op" id="2132314">,</span>&nbsp;<span class="ident" id="2132316">base</span>&nbsp;<span class="builtintype" id="2132321">int</span><span class="op" id="2132324">,</span>&nbsp;<span class="ident" id="2132326">neg</span><span class="op" id="2132329">,</span>&nbsp;<span class="ident" id="2132331">append_</span>&nbsp;<span class="builtintype" id="2132339">bool</span><span class="op" id="2132343">)</span>&nbsp;<span class="op" id="2132345">(</span><span class="ident" id="2132346">d</span>&nbsp;<span class="op" id="2132348">[</span><span class="op" id="2132349">]</span><span class="builtintype" id="2132350">byte</span><span class="op" id="2132354">,</span>&nbsp;<span class="ident" id="2132356">s</span>&nbsp;<span class="builtintype" id="2132358">string</span><span class="op" id="2132364">)</span>&nbsp;<span class="op" id="2132366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2132369">if</span>&nbsp;<span class="ident" id="2132372">base</span>&nbsp;<span class="op" id="2132377">&lt;</span>&nbsp;<span class="num" id="2132379">2</span>&nbsp;<span class="op" id="2132381">||</span>&nbsp;<span class="ident" id="2132384">base</span>&nbsp;<span class="op" id="2132389">&gt;</span>&nbsp;<span class="builtinfunc" id="2132391">len</span><span class="op" id="2132394">(</span><span class="ident" id="2132395">digits</span><span class="op" id="2132401">)</span>&nbsp;<span class="op" id="2132403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2132407">panic</span><span class="op" id="2132412">(</span><span class="string" id="2132413">&#34;strconv:&nbsp;illegal&nbsp;AppendInt/FormatInt&nbsp;base&#34;</span><span class="op" id="2132456">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2132459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2132462">//&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&amp;&amp;&nbsp;base&nbsp;&lt;=&nbsp;len(digits)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2132500">var</span>&nbsp;<span class="ident" id="2132504">a</span>&nbsp;<span class="op" id="2132506">[</span><span class="num" id="2132507">64</span>&nbsp;<span class="op" id="2132510">+</span>&nbsp;<span class="num" id="2132512">1</span><span class="op" id="2132513">]</span><span class="builtintype" id="2132514">byte</span>&nbsp;<span class="comment" id="2132519">//&nbsp;+1&nbsp;for&nbsp;sign&nbsp;of&nbsp;64bit&nbsp;value&nbsp;in&nbsp;base&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2132560">i</span>&nbsp;<span class="op" id="2132562">:=</span>&nbsp;<span class="builtinfunc" id="2132565">len</span><span class="op" id="2132568">(</span><span class="ident" id="2132569">a</span><span class="op" id="2132570">)</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2132574">if</span>&nbsp;<span class="ident" id="2132577">neg</span>&nbsp;<span class="op" id="2132581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2132585">u</span>&nbsp;<span class="op" id="2132587">=</span>&nbsp;<span class="op" id="2132589">-</span><span class="ident" id="2132590">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2132593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2132597">//&nbsp;convert&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2132614">if</span>&nbsp;<span class="ident" id="2132617">base</span>&nbsp;<span class="op" id="2132622">==</span>&nbsp;<span class="num" id="2132625">10</span>&nbsp;<span class="op" id="2132628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2132632">//&nbsp;common&nbsp;case:&nbsp;use&nbsp;constants&nbsp;for&nbsp;/&nbsp;and&nbsp;%&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2132684">//&nbsp;the&nbsp;compiler&nbsp;can&nbsp;optimize&nbsp;it&nbsp;into&nbsp;a&nbsp;multiply+shift,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2132741">//&nbsp;and&nbsp;unroll&nbsp;loop</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2132762">for</span>&nbsp;<span class="ident" id="2132766">u</span>&nbsp;<span class="op" id="2132768">&gt;=</span>&nbsp;<span class="num" id="2132771">100</span>&nbsp;<span class="op" id="2132775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2132780">i</span>&nbsp;<span class="op" id="2132782">-=</span>&nbsp;<span class="num" id="2132785">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2132790">q</span>&nbsp;<span class="op" id="2132792">:=</span>&nbsp;<span class="ident" id="2132795">u</span>&nbsp;<span class="op" id="2132797">/</span>&nbsp;<span class="num" id="2132799">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2132806">j</span>&nbsp;<span class="op" id="2132808">:=</span>&nbsp;<span class="builtintype" id="2132811">uintptr</span><span class="op" id="2132818">(</span><span class="ident" id="2132819">u</span>&nbsp;<span class="op" id="2132821">-</span>&nbsp;<span class="ident" id="2132823">q</span><span class="op" id="2132824">*</span><span class="num" id="2132825">100</span><span class="op" id="2132828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2132833">a</span><span class="op" id="2132834">[</span><span class="ident" id="2132835">i</span><span class="op" id="2132836">+</span><span class="num" id="2132837">1</span><span class="op" id="2132838">]</span>&nbsp;<span class="op" id="2132840">=</span>&nbsp;<span class="ident" id="2132842">digits01</span><span class="op" id="2132850">[</span><span class="ident" id="2132851">j</span><span class="op" id="2132852">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2132857">a</span><span class="op" id="2132858">[</span><span class="ident" id="2132859">i</span><span class="op" id="2132860">+</span><span class="num" id="2132861">0</span><span class="op" id="2132862">]</span>&nbsp;<span class="op" id="2132864">=</span>&nbsp;<span class="ident" id="2132866">digits10</span><span class="op" id="2132874">[</span><span class="ident" id="2132875">j</span><span class="op" id="2132876">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2132881">u</span>&nbsp;<span class="op" id="2132883">=</span>&nbsp;<span class="ident" id="2132885">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2132889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2132893">if</span>&nbsp;<span class="ident" id="2132896">u</span>&nbsp;<span class="op" id="2132898">&gt;=</span>&nbsp;<span class="num" id="2132901">10</span>&nbsp;<span class="op" id="2132904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2132909">i</span><span class="op" id="2132910">--</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2132916">q</span>&nbsp;<span class="op" id="2132918">:=</span>&nbsp;<span class="ident" id="2132921">u</span>&nbsp;<span class="op" id="2132923">/</span>&nbsp;<span class="num" id="2132925">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2132931">a</span><span class="op" id="2132932">[</span><span class="ident" id="2132933">i</span><span class="op" id="2132934">]</span>&nbsp;<span class="op" id="2132936">=</span>&nbsp;<span class="ident" id="2132938">digits</span><span class="op" id="2132944">[</span><span class="builtintype" id="2132945">uintptr</span><span class="op" id="2132952">(</span><span class="ident" id="2132953">u</span><span class="op" id="2132954">-</span><span class="ident" id="2132955">q</span><span class="op" id="2132956">*</span><span class="num" id="2132957">10</span><span class="op" id="2132959">)</span><span class="op" id="2132960">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2132965">u</span>&nbsp;<span class="op" id="2132967">=</span>&nbsp;<span class="ident" id="2132969">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2132973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2132977">}</span>&nbsp;<span class="keyword" id="2132979">else</span>&nbsp;<span class="keyword" id="2132984">if</span>&nbsp;<span class="ident" id="2132987">s</span>&nbsp;<span class="op" id="2132989">:=</span>&nbsp;<span class="ident" id="2132992">shifts</span><span class="op" id="2132998">[</span><span class="ident" id="2132999">base</span><span class="op" id="2133003">]</span><span class="op" id="2133004">;</span>&nbsp;<span class="ident" id="2133006">s</span>&nbsp;<span class="op" id="2133008">&gt;</span>&nbsp;<span class="num" id="2133010">0</span>&nbsp;<span class="op" id="2133012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2133016">//&nbsp;base&nbsp;is&nbsp;power&nbsp;of&nbsp;2:&nbsp;use&nbsp;shifts&nbsp;and&nbsp;masks&nbsp;instead&nbsp;of&nbsp;/&nbsp;and&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133081">b</span>&nbsp;<span class="op" id="2133083">:=</span>&nbsp;<span class="ident" id="2133086">uint64</span><span class="op" id="2133092">(</span><span class="ident" id="2133093">base</span><span class="op" id="2133097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133101">m</span>&nbsp;<span class="op" id="2133103">:=</span>&nbsp;<span class="builtintype" id="2133106">uintptr</span><span class="op" id="2133113">(</span><span class="ident" id="2133114">b</span><span class="op" id="2133115">)</span>&nbsp;<span class="op" id="2133117">-</span>&nbsp;<span class="num" id="2133119">1</span>&nbsp;<span class="comment" id="2133121">//&nbsp;==&nbsp;1&lt;&lt;s&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2133138">for</span>&nbsp;<span class="ident" id="2133142">u</span>&nbsp;<span class="op" id="2133144">&gt;=</span>&nbsp;<span class="ident" id="2133147">b</span>&nbsp;<span class="op" id="2133149">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133154">i</span><span class="op" id="2133155">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133161">a</span><span class="op" id="2133162">[</span><span class="ident" id="2133163">i</span><span class="op" id="2133164">]</span>&nbsp;<span class="op" id="2133166">=</span>&nbsp;<span class="ident" id="2133168">digits</span><span class="op" id="2133174">[</span><span class="builtintype" id="2133175">uintptr</span><span class="op" id="2133182">(</span><span class="ident" id="2133183">u</span><span class="op" id="2133184">)</span><span class="op" id="2133185">&amp;</span><span class="ident" id="2133186">m</span><span class="op" id="2133187">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133192">u</span>&nbsp;<span class="op" id="2133194">&gt;&gt;=</span>&nbsp;<span class="ident" id="2133198">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2133202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2133206">}</span>&nbsp;<span class="keyword" id="2133208">else</span>&nbsp;<span class="op" id="2133213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2133217">//&nbsp;general&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133235">b</span>&nbsp;<span class="op" id="2133237">:=</span>&nbsp;<span class="ident" id="2133240">uint64</span><span class="op" id="2133246">(</span><span class="ident" id="2133247">base</span><span class="op" id="2133251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2133255">for</span>&nbsp;<span class="ident" id="2133259">u</span>&nbsp;<span class="op" id="2133261">&gt;=</span>&nbsp;<span class="ident" id="2133264">b</span>&nbsp;<span class="op" id="2133266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133271">i</span><span class="op" id="2133272">--</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133278">a</span><span class="op" id="2133279">[</span><span class="ident" id="2133280">i</span><span class="op" id="2133281">]</span>&nbsp;<span class="op" id="2133283">=</span>&nbsp;<span class="ident" id="2133285">digits</span><span class="op" id="2133291">[</span><span class="builtintype" id="2133292">uintptr</span><span class="op" id="2133299">(</span><span class="ident" id="2133300">u</span><span class="op" id="2133301">%</span><span class="ident" id="2133302">b</span><span class="op" id="2133303">)</span><span class="op" id="2133304">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133309">u</span>&nbsp;<span class="op" id="2133311">/=</span>&nbsp;<span class="ident" id="2133314">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2133318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2133321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2133325">//&nbsp;u&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133338">i</span><span class="op" id="2133339">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133343">a</span><span class="op" id="2133344">[</span><span class="ident" id="2133345">i</span><span class="op" id="2133346">]</span>&nbsp;<span class="op" id="2133348">=</span>&nbsp;<span class="ident" id="2133350">digits</span><span class="op" id="2133356">[</span><span class="builtintype" id="2133357">uintptr</span><span class="op" id="2133364">(</span><span class="ident" id="2133365">u</span><span class="op" id="2133366">)</span><span class="op" id="2133367">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2133371">//&nbsp;add&nbsp;sign,&nbsp;if&nbsp;any</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2133392">if</span>&nbsp;<span class="ident" id="2133395">neg</span>&nbsp;<span class="op" id="2133399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133403">i</span><span class="op" id="2133404">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133409">a</span><span class="op" id="2133410">[</span><span class="ident" id="2133411">i</span><span class="op" id="2133412">]</span>&nbsp;<span class="op" id="2133414">=</span>&nbsp;<span class="string" id="2133416">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2133421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2133425">if</span>&nbsp;<span class="ident" id="2133428">append_</span>&nbsp;<span class="op" id="2133436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133440">d</span>&nbsp;<span class="op" id="2133442">=</span>&nbsp;<span class="builtinfunc" id="2133444">append</span><span class="op" id="2133450">(</span><span class="ident" id="2133451">dst</span><span class="op" id="2133454">,</span>&nbsp;<span class="ident" id="2133456">a</span><span class="op" id="2133457">[</span><span class="ident" id="2133458">i</span><span class="op" id="2133459">:</span><span class="op" id="2133460">]</span><span class="op" id="2133461">...</span><span class="op" id="2133464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2133468">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2133476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2133479">s</span>&nbsp;<span class="op" id="2133481">=</span>&nbsp;<span class="builtintype" id="2133483">string</span><span class="op" id="2133489">(</span><span class="ident" id="2133490">a</span><span class="op" id="2133491">[</span><span class="ident" id="2133492">i</span><span class="op" id="2133493">:</span><span class="op" id="2133494">]</span><span class="op" id="2133495">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2133498">return</span><br>
<span class="lineno"></span><span class="op" id="2133505">}</span>
</div>
</body>
</html>
