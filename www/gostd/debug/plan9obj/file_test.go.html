<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/plan9obj</h2>
<ul>
<li><a href="/gostd/debug/plan9obj/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/plan9obj/file_test.go.html" class="current">file_test.go</a></li>
<li><a href="/gostd/debug/plan9obj/plan9obj.go.html">plan9obj.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7129007">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7129063">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7129117">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7129168">package</span>&nbsp;<span class="ident" id="7129176">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7129186">import</span>&nbsp;<span class="op" id="7129193">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7129196">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7129207">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7129217">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7129220">type</span>&nbsp;<span class="ident" id="7129225">fileTest</span>&nbsp;<span class="keyword" id="7129234">struct</span>&nbsp;<span class="op" id="7129241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7129244">file</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7129253">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7129261">hdr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7129270">FileHeader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7129282">sections</span>&nbsp;<span class="op" id="7129291">[</span><span class="op" id="7129292">]</span><span class="op" id="7129293">*</span><span class="ident" id="7129294">SectionHeader</span><br>
<span class="lineno"></span><span class="op" id="7129308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7129311">var</span>&nbsp;<span class="ident" id="7129315">fileTests</span>&nbsp;<span class="op" id="7129325">=</span>&nbsp;<span class="op" id="7129327">[</span><span class="op" id="7129328">]</span><span class="ident" id="7129329">fileTest</span><span class="op" id="7129337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129340">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7129344">&#34;testdata/386-plan9-exec&#34;</span><span class="op" id="7129369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7129373">FileHeader</span><span class="op" id="7129383">{</span><span class="ident" id="7129384">Magic386</span><span class="op" id="7129392">,</span>&nbsp;<span class="num" id="7129394">0x324</span><span class="op" id="7129399">,</span>&nbsp;<span class="num" id="7129401">0x14</span><span class="op" id="7129405">,</span>&nbsp;<span class="num" id="7129407">4</span><span class="op" id="7129408">,</span>&nbsp;<span class="num" id="7129410">0x1000</span><span class="op" id="7129416">,</span>&nbsp;<span class="num" id="7129418">32</span><span class="op" id="7129420">}</span><span class="op" id="7129421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129425">[</span><span class="op" id="7129426">]</span><span class="op" id="7129427">*</span><span class="ident" id="7129428">SectionHeader</span><span class="op" id="7129441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129446">{</span><span class="string" id="7129447">&#34;text&#34;</span><span class="op" id="7129453">,</span>&nbsp;<span class="num" id="7129455">0x4c5f</span><span class="op" id="7129461">,</span>&nbsp;<span class="num" id="7129463">0x20</span><span class="op" id="7129467">}</span><span class="op" id="7129468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129473">{</span><span class="string" id="7129474">&#34;data&#34;</span><span class="op" id="7129480">,</span>&nbsp;<span class="num" id="7129482">0x94c</span><span class="op" id="7129487">,</span>&nbsp;<span class="num" id="7129489">0x4c7f</span><span class="op" id="7129495">}</span><span class="op" id="7129496">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129501">{</span><span class="string" id="7129502">&#34;syms&#34;</span><span class="op" id="7129508">,</span>&nbsp;<span class="num" id="7129510">0x2c2b</span><span class="op" id="7129516">,</span>&nbsp;<span class="num" id="7129518">0x55cb</span><span class="op" id="7129524">}</span><span class="op" id="7129525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129530">{</span><span class="string" id="7129531">&#34;spsz&#34;</span><span class="op" id="7129537">,</span>&nbsp;<span class="num" id="7129539">0x0</span><span class="op" id="7129542">,</span>&nbsp;<span class="num" id="7129544">0x81f6</span><span class="op" id="7129550">}</span><span class="op" id="7129551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129556">{</span><span class="string" id="7129557">&#34;pcsz&#34;</span><span class="op" id="7129563">,</span>&nbsp;<span class="num" id="7129565">0xf7a</span><span class="op" id="7129570">,</span>&nbsp;<span class="num" id="7129572">0x81f6</span><span class="op" id="7129578">}</span><span class="op" id="7129579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129583">}</span><span class="op" id="7129584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129587">}</span><span class="op" id="7129588">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7129595">&#34;testdata/amd64-plan9-exec&#34;</span><span class="op" id="7129622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7129626">FileHeader</span><span class="op" id="7129636">{</span><span class="ident" id="7129637">MagicAMD64</span><span class="op" id="7129647">,</span>&nbsp;<span class="num" id="7129649">0x618</span><span class="op" id="7129654">,</span>&nbsp;<span class="num" id="7129656">0x13</span><span class="op" id="7129660">,</span>&nbsp;<span class="num" id="7129662">8</span><span class="op" id="7129663">,</span>&nbsp;<span class="num" id="7129665">0x200000</span><span class="op" id="7129673">,</span>&nbsp;<span class="num" id="7129675">40</span><span class="op" id="7129677">}</span><span class="op" id="7129678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129682">[</span><span class="op" id="7129683">]</span><span class="op" id="7129684">*</span><span class="ident" id="7129685">SectionHeader</span><span class="op" id="7129698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129703">{</span><span class="string" id="7129704">&#34;text&#34;</span><span class="op" id="7129710">,</span>&nbsp;<span class="num" id="7129712">0x4213</span><span class="op" id="7129718">,</span>&nbsp;<span class="num" id="7129720">0x28</span><span class="op" id="7129724">}</span><span class="op" id="7129725">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129730">{</span><span class="string" id="7129731">&#34;data&#34;</span><span class="op" id="7129737">,</span>&nbsp;<span class="num" id="7129739">0xa80</span><span class="op" id="7129744">,</span>&nbsp;<span class="num" id="7129746">0x423b</span><span class="op" id="7129752">}</span><span class="op" id="7129753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129758">{</span><span class="string" id="7129759">&#34;syms&#34;</span><span class="op" id="7129765">,</span>&nbsp;<span class="num" id="7129767">0x2c8c</span><span class="op" id="7129773">,</span>&nbsp;<span class="num" id="7129775">0x4cbb</span><span class="op" id="7129781">}</span><span class="op" id="7129782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129787">{</span><span class="string" id="7129788">&#34;spsz&#34;</span><span class="op" id="7129794">,</span>&nbsp;<span class="num" id="7129796">0x0</span><span class="op" id="7129799">,</span>&nbsp;<span class="num" id="7129801">0x7947</span><span class="op" id="7129807">}</span><span class="op" id="7129808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129813">{</span><span class="string" id="7129814">&#34;pcsz&#34;</span><span class="op" id="7129820">,</span>&nbsp;<span class="num" id="7129822">0xca0</span><span class="op" id="7129827">,</span>&nbsp;<span class="num" id="7129829">0x7947</span><span class="op" id="7129835">}</span><span class="op" id="7129836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129840">}</span><span class="op" id="7129841">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7129844">}</span><span class="op" id="7129845">,</span><br>
<span class="lineno"></span><span class="op" id="7129847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7129850">func</span>&nbsp;<span class="ident" id="7129855">TestOpen</span><span class="op" id="7129863">(</span><span class="ident" id="7129864">t</span>&nbsp;<span class="op" id="7129866">*</span><span class="ident" id="7129867">testing</span><span class="op" id="7129874">.</span><span class="ident" id="7129875">T</span><span class="op" id="7129876">)</span>&nbsp;<span class="op" id="7129878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7129881">for</span>&nbsp;<span class="ident" id="7129885">i</span>&nbsp;<span class="op" id="7129887">:=</span>&nbsp;<span class="keyword" id="7129890">range</span>&nbsp;<span class="ident" id="7129896">fileTests</span>&nbsp;<span class="op" id="7129906">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7129910">tt</span>&nbsp;<span class="op" id="7129913">:=</span>&nbsp;<span class="op" id="7129916">&amp;</span><span class="ident" id="7129917">fileTests</span><span class="op" id="7129926">[</span><span class="ident" id="7129927">i</span><span class="op" id="7129928">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7129933">f</span><span class="op" id="7129934">,</span>&nbsp;<span class="ident" id="7129936">err</span>&nbsp;<span class="op" id="7129940">:=</span>&nbsp;<span class="ident" id="7129943">Open</span><span class="op" id="7129947">(</span><span class="ident" id="7129948">tt</span><span class="op" id="7129950">.</span><span class="ident" id="7129951">file</span><span class="op" id="7129955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7129959">if</span>&nbsp;<span class="ident" id="7129962">err</span>&nbsp;<span class="op" id="7129966">!=</span>&nbsp;<span class="builtintype" id="7129969">nil</span>&nbsp;<span class="op" id="7129973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7129978">t</span><span class="op" id="7129979">.</span><span class="ident" id="7129980">Error</span><span class="op" id="7129985">(</span><span class="ident" id="7129986">err</span><span class="op" id="7129989">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7129994">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7130005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7130009">if</span>&nbsp;<span class="op" id="7130012">!</span><span class="ident" id="7130013">reflect</span><span class="op" id="7130020">.</span><span class="ident" id="7130021">DeepEqual</span><span class="op" id="7130030">(</span><span class="ident" id="7130031">f</span><span class="op" id="7130032">.</span><span class="ident" id="7130033">FileHeader</span><span class="op" id="7130043">,</span>&nbsp;<span class="ident" id="7130045">tt</span><span class="op" id="7130047">.</span><span class="ident" id="7130048">hdr</span><span class="op" id="7130051">)</span>&nbsp;<span class="op" id="7130053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7130058">t</span><span class="op" id="7130059">.</span><span class="ident" id="7130060">Errorf</span><span class="op" id="7130066">(</span><span class="string" id="7130067">&#34;open&nbsp;%s:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="7130103">,</span>&nbsp;<span class="ident" id="7130105">tt</span><span class="op" id="7130107">.</span><span class="ident" id="7130108">file</span><span class="op" id="7130112">,</span>&nbsp;<span class="ident" id="7130114">f</span><span class="op" id="7130115">.</span><span class="ident" id="7130116">FileHeader</span><span class="op" id="7130126">,</span>&nbsp;<span class="ident" id="7130128">tt</span><span class="op" id="7130130">.</span><span class="ident" id="7130131">hdr</span><span class="op" id="7130134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7130139">continue</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7130150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7130155">for</span>&nbsp;<span class="ident" id="7130159">i</span><span class="op" id="7130160">,</span>&nbsp;<span class="ident" id="7130162">sh</span>&nbsp;<span class="op" id="7130165">:=</span>&nbsp;<span class="keyword" id="7130168">range</span>&nbsp;<span class="ident" id="7130174">f</span><span class="op" id="7130175">.</span><span class="ident" id="7130176">Sections</span>&nbsp;<span class="op" id="7130185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7130190">if</span>&nbsp;<span class="ident" id="7130193">i</span>&nbsp;<span class="op" id="7130195">&gt;=</span>&nbsp;<span class="builtinfunc" id="7130198">len</span><span class="op" id="7130201">(</span><span class="ident" id="7130202">tt</span><span class="op" id="7130204">.</span><span class="ident" id="7130205">sections</span><span class="op" id="7130213">)</span>&nbsp;<span class="op" id="7130215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7130221">break</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7130230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7130235">have</span>&nbsp;<span class="op" id="7130240">:=</span>&nbsp;<span class="op" id="7130243">&amp;</span><span class="ident" id="7130244">sh</span><span class="op" id="7130246">.</span><span class="ident" id="7130247">SectionHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7130264">want</span>&nbsp;<span class="op" id="7130269">:=</span>&nbsp;<span class="ident" id="7130272">tt</span><span class="op" id="7130274">.</span><span class="ident" id="7130275">sections</span><span class="op" id="7130283">[</span><span class="ident" id="7130284">i</span><span class="op" id="7130285">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7130290">if</span>&nbsp;<span class="op" id="7130293">!</span><span class="ident" id="7130294">reflect</span><span class="op" id="7130301">.</span><span class="ident" id="7130302">DeepEqual</span><span class="op" id="7130311">(</span><span class="ident" id="7130312">have</span><span class="op" id="7130316">,</span>&nbsp;<span class="ident" id="7130318">want</span><span class="op" id="7130322">)</span>&nbsp;<span class="op" id="7130324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7130330">t</span><span class="op" id="7130331">.</span><span class="ident" id="7130332">Errorf</span><span class="op" id="7130338">(</span><span class="string" id="7130339">&#34;open&nbsp;%s,&nbsp;section&nbsp;%d:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="7130387">,</span>&nbsp;<span class="ident" id="7130389">tt</span><span class="op" id="7130391">.</span><span class="ident" id="7130392">file</span><span class="op" id="7130396">,</span>&nbsp;<span class="ident" id="7130398">i</span><span class="op" id="7130399">,</span>&nbsp;<span class="ident" id="7130401">have</span><span class="op" id="7130405">,</span>&nbsp;<span class="ident" id="7130407">want</span><span class="op" id="7130411">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7130416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7130420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7130424">tn</span>&nbsp;<span class="op" id="7130427">:=</span>&nbsp;<span class="builtinfunc" id="7130430">len</span><span class="op" id="7130433">(</span><span class="ident" id="7130434">tt</span><span class="op" id="7130436">.</span><span class="ident" id="7130437">sections</span><span class="op" id="7130445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7130449">fn</span>&nbsp;<span class="op" id="7130452">:=</span>&nbsp;<span class="builtinfunc" id="7130455">len</span><span class="op" id="7130458">(</span><span class="ident" id="7130459">f</span><span class="op" id="7130460">.</span><span class="ident" id="7130461">Sections</span><span class="op" id="7130469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7130473">if</span>&nbsp;<span class="ident" id="7130476">tn</span>&nbsp;<span class="op" id="7130479">!=</span>&nbsp;<span class="ident" id="7130482">fn</span>&nbsp;<span class="op" id="7130485">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7130490">t</span><span class="op" id="7130491">.</span><span class="ident" id="7130492">Errorf</span><span class="op" id="7130498">(</span><span class="string" id="7130499">&#34;open&nbsp;%s:&nbsp;len(Sections)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7130537">,</span>&nbsp;<span class="ident" id="7130539">tt</span><span class="op" id="7130541">.</span><span class="ident" id="7130542">file</span><span class="op" id="7130546">,</span>&nbsp;<span class="ident" id="7130548">fn</span><span class="op" id="7130550">,</span>&nbsp;<span class="ident" id="7130552">tn</span><span class="op" id="7130554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7130558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7130561">}</span><br>
<span class="lineno"></span><span class="op" id="7130563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7130566">func</span>&nbsp;<span class="ident" id="7130571">TestOpenFailure</span><span class="op" id="7130586">(</span><span class="ident" id="7130587">t</span>&nbsp;<span class="op" id="7130589">*</span><span class="ident" id="7130590">testing</span><span class="op" id="7130597">.</span><span class="ident" id="7130598">T</span><span class="op" id="7130599">)</span>&nbsp;<span class="op" id="7130601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7130604">filename</span>&nbsp;<span class="op" id="7130613">:=</span>&nbsp;<span class="string" id="7130616">&#34;file.go&#34;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7130629">//&nbsp;not&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7130657">_</span><span class="op" id="7130658">,</span>&nbsp;<span class="ident" id="7130660">err</span>&nbsp;<span class="op" id="7130664">:=</span>&nbsp;<span class="ident" id="7130667">Open</span><span class="op" id="7130671">(</span><span class="ident" id="7130672">filename</span><span class="op" id="7130680">)</span>&nbsp;<span class="comment" id="7130682">//&nbsp;don&#39;t&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7130698">if</span>&nbsp;<span class="ident" id="7130701">err</span>&nbsp;<span class="op" id="7130705">==</span>&nbsp;<span class="builtintype" id="7130708">nil</span>&nbsp;<span class="op" id="7130712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7130716">t</span><span class="op" id="7130717">.</span><span class="ident" id="7130718">Errorf</span><span class="op" id="7130724">(</span><span class="string" id="7130725">&#34;open&nbsp;%s:&nbsp;succeeded&nbsp;unexpectedly&#34;</span><span class="op" id="7130758">,</span>&nbsp;<span class="ident" id="7130760">filename</span><span class="op" id="7130768">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7130771">}</span><br>
<span class="lineno"></span><span class="op" id="7130773">}</span>
</div>
</body>
</html>
