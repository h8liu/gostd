<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3365981">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3366036">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3366090">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3366141">package</span>&nbsp;<span class="ident" id="3366149">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3366154">import</span>&nbsp;<span class="op" id="3366161">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3366164">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3366174">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3366186">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3366196">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3366204">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="3366214">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3366217">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="3366297">//&nbsp;function/method&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="3366321">//</span><br>
<span class="lineno"></span><span class="comment" id="3366324">//&nbsp;Internally,&nbsp;we&nbsp;treat&nbsp;functions&nbsp;like&nbsp;methods&nbsp;and&nbsp;collect&nbsp;them&nbsp;in&nbsp;method&nbsp;sets.</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="3366405">//&nbsp;A&nbsp;methodSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;methods.&nbsp;Entries&nbsp;where&nbsp;Decl&nbsp;==&nbsp;nil&nbsp;are&nbsp;conflict</span><br>
<span class="lineno"></span><span class="comment" id="3366487">//&nbsp;entries&nbsp;(more&nbsp;then&nbsp;one&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;embedding&nbsp;level).</span><br>
<span class="lineno"></span><span class="comment" id="3366569">//</span><br>
<span class="lineno"></span><span class="keyword" id="3366572">type</span>&nbsp;<span class="ident" id="3366577">methodSet</span>&nbsp;<span class="keyword" id="3366587">map</span><span class="op" id="3366590">[</span><span class="builtintype" id="3366591">string</span><span class="op" id="3366597">]</span><span class="op" id="3366598">*</span><span class="ident" id="3366599">Func</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="3366605">//&nbsp;recvString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;recv&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3366666">//&nbsp;form&nbsp;&#34;T&#34;,&nbsp;&#34;*T&#34;,&nbsp;or&nbsp;&#34;BADRECV&#34;&nbsp;(if&nbsp;not&nbsp;a&nbsp;proper&nbsp;receiver&nbsp;type).</span><br>
<span class="lineno"></span><span class="comment" id="3366731">//</span><br>
<span class="lineno"></span><span class="keyword" id="3366734">func</span>&nbsp;<span class="ident" id="3366739">recvString</span><span class="op" id="3366749">(</span><span class="ident" id="3366750">recv</span>&nbsp;<span class="ident" id="3366755">ast</span><span class="op" id="3366758">.</span><span class="ident" id="3366759">Expr</span><span class="op" id="3366763">)</span>&nbsp;<span class="builtintype" id="3366765">string</span>&nbsp;<span class="op" id="3366772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3366775">switch</span>&nbsp;<span class="ident" id="3366782">t</span>&nbsp;<span class="op" id="3366784">:=</span>&nbsp;<span class="ident" id="3366787">recv</span><span class="op" id="3366791">.</span><span class="op" id="3366792">(</span><span class="keyword" id="3366793">type</span><span class="op" id="3366797">)</span>&nbsp;<span class="op" id="3366799">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3366802">case</span>&nbsp;<span class="op" id="3366807">*</span><span class="ident" id="3366808">ast</span><span class="op" id="3366811">.</span><span class="ident" id="3366812">Ident</span><span class="op" id="3366817">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3366821">return</span>&nbsp;<span class="ident" id="3366828">t</span><span class="op" id="3366829">.</span><span class="ident" id="3366830">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3366836">case</span>&nbsp;<span class="op" id="3366841">*</span><span class="ident" id="3366842">ast</span><span class="op" id="3366845">.</span><span class="ident" id="3366846">StarExpr</span><span class="op" id="3366854">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3366858">return</span>&nbsp;<span class="string" id="3366865">&#34;*&#34;</span>&nbsp;<span class="op" id="3366869">+</span>&nbsp;<span class="ident" id="3366871">recvString</span><span class="op" id="3366881">(</span><span class="ident" id="3366882">t</span><span class="op" id="3366883">.</span><span class="ident" id="3366884">X</span><span class="op" id="3366885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3366888">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3366891">return</span>&nbsp;<span class="string" id="3366898">&#34;BADRECV&#34;</span><br>
<span class="lineno"></span><span class="op" id="3366908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3366911">//&nbsp;set&nbsp;creates&nbsp;the&nbsp;corresponding&nbsp;Func&nbsp;for&nbsp;f&nbsp;and&nbsp;adds&nbsp;it&nbsp;to&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="3366976">//&nbsp;If&nbsp;there&nbsp;are&nbsp;multiple&nbsp;f&#39;s&nbsp;with&nbsp;the&nbsp;same&nbsp;name,&nbsp;set&nbsp;keeps&nbsp;the&nbsp;first</span><br>
<span class="lineno">40</span><span class="comment" id="3367045">//&nbsp;one&nbsp;with&nbsp;documentation;&nbsp;conflicts&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="3367095">//</span><br>
<span class="lineno"></span><span class="keyword" id="3367098">func</span>&nbsp;<span class="op" id="3367103">(</span><span class="ident" id="3367104">mset</span>&nbsp;<span class="ident" id="3367109">methodSet</span><span class="op" id="3367118">)</span>&nbsp;<span class="ident" id="3367120">set</span><span class="op" id="3367123">(</span><span class="ident" id="3367124">f</span>&nbsp;<span class="op" id="3367126">*</span><span class="ident" id="3367127">ast</span><span class="op" id="3367130">.</span><span class="ident" id="3367131">FuncDecl</span><span class="op" id="3367139">)</span>&nbsp;<span class="op" id="3367141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3367144">name</span>&nbsp;<span class="op" id="3367149">:=</span>&nbsp;<span class="ident" id="3367152">f</span><span class="op" id="3367153">.</span><span class="ident" id="3367154">Name</span><span class="op" id="3367158">.</span><span class="ident" id="3367159">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3367165">if</span>&nbsp;<span class="ident" id="3367168">g</span>&nbsp;<span class="op" id="3367170">:=</span>&nbsp;<span class="ident" id="3367173">mset</span><span class="op" id="3367177">[</span><span class="ident" id="3367178">name</span><span class="op" id="3367182">]</span><span class="op" id="3367183">;</span>&nbsp;<span class="ident" id="3367185">g</span>&nbsp;<span class="op" id="3367187">!=</span>&nbsp;<span class="builtintype" id="3367190">nil</span>&nbsp;<span class="op" id="3367194">&amp;&amp;</span>&nbsp;<span class="ident" id="3367197">g</span><span class="op" id="3367198">.</span><span class="ident" id="3367199">Doc</span>&nbsp;<span class="op" id="3367203">!=</span>&nbsp;<span class="string" id="3367206">&#34;&#34;</span>&nbsp;<span class="op" id="3367209">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3367213">//&nbsp;A&nbsp;function&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;has&nbsp;already&nbsp;been&nbsp;registered;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3367277">//&nbsp;since&nbsp;it&nbsp;has&nbsp;documentation,&nbsp;assume&nbsp;f&nbsp;is&nbsp;simply&nbsp;another</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3367337">//&nbsp;implementation&nbsp;and&nbsp;ignore&nbsp;it.&nbsp;This&nbsp;does&nbsp;not&nbsp;happen&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3367400">//&nbsp;caller&nbsp;is&nbsp;using&nbsp;go/build.ScanDir&nbsp;to&nbsp;determine&nbsp;the&nbsp;list&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3367463">//&nbsp;files&nbsp;implementing&nbsp;a&nbsp;package.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3367498">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3367506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3367509">//&nbsp;function&nbsp;doesn&#39;t&nbsp;exist&nbsp;or&nbsp;has&nbsp;no&nbsp;documentation;&nbsp;use&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3367567">recv</span>&nbsp;<span class="op" id="3367572">:=</span>&nbsp;<span class="string" id="3367575">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3367579">if</span>&nbsp;<span class="ident" id="3367582">f</span><span class="op" id="3367583">.</span><span class="ident" id="3367584">Recv</span>&nbsp;<span class="op" id="3367589">!=</span>&nbsp;<span class="builtintype" id="3367592">nil</span>&nbsp;<span class="op" id="3367596">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3367600">var</span>&nbsp;<span class="ident" id="3367604">typ</span>&nbsp;<span class="ident" id="3367608">ast</span><span class="op" id="3367611">.</span><span class="ident" id="3367612">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3367619">//&nbsp;be&nbsp;careful&nbsp;in&nbsp;case&nbsp;of&nbsp;incorrect&nbsp;ASTs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3367661">if</span>&nbsp;<span class="ident" id="3367664">list</span>&nbsp;<span class="op" id="3367669">:=</span>&nbsp;<span class="ident" id="3367672">f</span><span class="op" id="3367673">.</span><span class="ident" id="3367674">Recv</span><span class="op" id="3367678">.</span><span class="ident" id="3367679">List</span><span class="op" id="3367683">;</span>&nbsp;<span class="builtinfunc" id="3367685">len</span><span class="op" id="3367688">(</span><span class="ident" id="3367689">list</span><span class="op" id="3367693">)</span>&nbsp;<span class="op" id="3367695">==</span>&nbsp;<span class="num" id="3367698">1</span>&nbsp;<span class="op" id="3367700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3367705">typ</span>&nbsp;<span class="op" id="3367709">=</span>&nbsp;<span class="ident" id="3367711">list</span><span class="op" id="3367715">[</span><span class="num" id="3367716">0</span><span class="op" id="3367717">]</span><span class="op" id="3367718">.</span><span class="ident" id="3367719">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3367726">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3367730">recv</span>&nbsp;<span class="op" id="3367735">=</span>&nbsp;<span class="ident" id="3367737">recvString</span><span class="op" id="3367747">(</span><span class="ident" id="3367748">typ</span><span class="op" id="3367751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3367754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3367757">mset</span><span class="op" id="3367761">[</span><span class="ident" id="3367762">name</span><span class="op" id="3367766">]</span>&nbsp;<span class="op" id="3367768">=</span>&nbsp;<span class="op" id="3367770">&amp;</span><span class="ident" id="3367771">Func</span><span class="op" id="3367775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3367779">Doc</span><span class="op" id="3367782">:</span>&nbsp;&nbsp;<span class="ident" id="3367785">f</span><span class="op" id="3367786">.</span><span class="ident" id="3367787">Doc</span><span class="op" id="3367790">.</span><span class="ident" id="3367791">Text</span><span class="op" id="3367795">(</span><span class="op" id="3367796">)</span><span class="op" id="3367797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3367801">Name</span><span class="op" id="3367805">:</span>&nbsp;<span class="ident" id="3367807">name</span><span class="op" id="3367811">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3367815">Decl</span><span class="op" id="3367819">:</span>&nbsp;<span class="ident" id="3367821">f</span><span class="op" id="3367822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3367826">Recv</span><span class="op" id="3367830">:</span>&nbsp;<span class="ident" id="3367832">recv</span><span class="op" id="3367836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3367840">Orig</span><span class="op" id="3367844">:</span>&nbsp;<span class="ident" id="3367846">recv</span><span class="op" id="3367850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3367853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3367856">f</span><span class="op" id="3367857">.</span><span class="ident" id="3367858">Doc</span>&nbsp;<span class="op" id="3367862">=</span>&nbsp;<span class="builtintype" id="3367864">nil</span>&nbsp;<span class="comment" id="3367868">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno">70</span><span class="op" id="3367902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3367905">//&nbsp;add&nbsp;adds&nbsp;method&nbsp;m&nbsp;to&nbsp;the&nbsp;method&nbsp;set;&nbsp;m&nbsp;is&nbsp;ignored&nbsp;if&nbsp;the&nbsp;method&nbsp;set</span><br>
<span class="lineno"></span><span class="comment" id="3367976">//&nbsp;already&nbsp;contains&nbsp;a&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;or&nbsp;a&nbsp;higher</span><br>
<span class="lineno"></span><span class="comment" id="3368048">//&nbsp;level&nbsp;then&nbsp;m.</span><br>
<span class="lineno">75</span><span class="comment" id="3368065">//</span><br>
<span class="lineno"></span><span class="keyword" id="3368068">func</span>&nbsp;<span class="op" id="3368073">(</span><span class="ident" id="3368074">mset</span>&nbsp;<span class="ident" id="3368079">methodSet</span><span class="op" id="3368088">)</span>&nbsp;<span class="ident" id="3368090">add</span><span class="op" id="3368093">(</span><span class="ident" id="3368094">m</span>&nbsp;<span class="op" id="3368096">*</span><span class="ident" id="3368097">Func</span><span class="op" id="3368101">)</span>&nbsp;<span class="op" id="3368103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3368106">old</span>&nbsp;<span class="op" id="3368110">:=</span>&nbsp;<span class="ident" id="3368113">mset</span><span class="op" id="3368117">[</span><span class="ident" id="3368118">m</span><span class="op" id="3368119">.</span><span class="ident" id="3368120">Name</span><span class="op" id="3368124">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3368127">if</span>&nbsp;<span class="ident" id="3368130">old</span>&nbsp;<span class="op" id="3368134">==</span>&nbsp;<span class="builtintype" id="3368137">nil</span>&nbsp;<span class="op" id="3368141">||</span>&nbsp;<span class="ident" id="3368144">m</span><span class="op" id="3368145">.</span><span class="ident" id="3368146">Level</span>&nbsp;<span class="op" id="3368152">&lt;</span>&nbsp;<span class="ident" id="3368154">old</span><span class="op" id="3368157">.</span><span class="ident" id="3368158">Level</span>&nbsp;<span class="op" id="3368164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3368168">mset</span><span class="op" id="3368172">[</span><span class="ident" id="3368173">m</span><span class="op" id="3368174">.</span><span class="ident" id="3368175">Name</span><span class="op" id="3368179">]</span>&nbsp;<span class="op" id="3368181">=</span>&nbsp;<span class="ident" id="3368183">m</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3368187">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3368195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3368198">if</span>&nbsp;<span class="ident" id="3368201">old</span>&nbsp;<span class="op" id="3368205">!=</span>&nbsp;<span class="builtintype" id="3368208">nil</span>&nbsp;<span class="op" id="3368212">&amp;&amp;</span>&nbsp;<span class="ident" id="3368215">m</span><span class="op" id="3368216">.</span><span class="ident" id="3368217">Level</span>&nbsp;<span class="op" id="3368223">==</span>&nbsp;<span class="ident" id="3368226">old</span><span class="op" id="3368229">.</span><span class="ident" id="3368230">Level</span>&nbsp;<span class="op" id="3368236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3368240">//&nbsp;conflict&nbsp;-&nbsp;mark&nbsp;it&nbsp;using&nbsp;a&nbsp;method&nbsp;with&nbsp;nil&nbsp;Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3368293">mset</span><span class="op" id="3368297">[</span><span class="ident" id="3368298">m</span><span class="op" id="3368299">.</span><span class="ident" id="3368300">Name</span><span class="op" id="3368304">]</span>&nbsp;<span class="op" id="3368306">=</span>&nbsp;<span class="op" id="3368308">&amp;</span><span class="ident" id="3368309">Func</span><span class="op" id="3368313">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3368318">Name</span><span class="op" id="3368322">:</span>&nbsp;&nbsp;<span class="ident" id="3368325">m</span><span class="op" id="3368326">.</span><span class="ident" id="3368327">Name</span><span class="op" id="3368331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3368336">Level</span><span class="op" id="3368341">:</span>&nbsp;<span class="ident" id="3368343">m</span><span class="op" id="3368344">.</span><span class="ident" id="3368345">Level</span><span class="op" id="3368350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3368354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3368357">}</span><br>
<span class="lineno"></span><span class="op" id="3368359">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="3368362">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="3368442">//&nbsp;Named&nbsp;types</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3368458">//&nbsp;baseTypeName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;base&nbsp;type&nbsp;of&nbsp;x&nbsp;(or&nbsp;&#34;&#34;)</span><br>
<span class="lineno">95</span><span class="comment" id="3368521">//&nbsp;and&nbsp;whether&nbsp;the&nbsp;type&nbsp;is&nbsp;imported&nbsp;or&nbsp;not.</span><br>
<span class="lineno"></span><span class="comment" id="3368565">//</span><br>
<span class="lineno"></span><span class="keyword" id="3368568">func</span>&nbsp;<span class="ident" id="3368573">baseTypeName</span><span class="op" id="3368585">(</span><span class="ident" id="3368586">x</span>&nbsp;<span class="ident" id="3368588">ast</span><span class="op" id="3368591">.</span><span class="ident" id="3368592">Expr</span><span class="op" id="3368596">)</span>&nbsp;<span class="op" id="3368598">(</span><span class="ident" id="3368599">name</span>&nbsp;<span class="builtintype" id="3368604">string</span><span class="op" id="3368610">,</span>&nbsp;<span class="ident" id="3368612">imported</span>&nbsp;<span class="builtintype" id="3368621">bool</span><span class="op" id="3368625">)</span>&nbsp;<span class="op" id="3368627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3368630">switch</span>&nbsp;<span class="ident" id="3368637">t</span>&nbsp;<span class="op" id="3368639">:=</span>&nbsp;<span class="ident" id="3368642">x</span><span class="op" id="3368643">.</span><span class="op" id="3368644">(</span><span class="keyword" id="3368645">type</span><span class="op" id="3368649">)</span>&nbsp;<span class="op" id="3368651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3368654">case</span>&nbsp;<span class="op" id="3368659">*</span><span class="ident" id="3368660">ast</span><span class="op" id="3368663">.</span><span class="ident" id="3368664">Ident</span><span class="op" id="3368669">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3368673">return</span>&nbsp;<span class="ident" id="3368680">t</span><span class="op" id="3368681">.</span><span class="ident" id="3368682">Name</span><span class="op" id="3368686">,</span>&nbsp;<span class="builtintype" id="3368688">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3368695">case</span>&nbsp;<span class="op" id="3368700">*</span><span class="ident" id="3368701">ast</span><span class="op" id="3368704">.</span><span class="ident" id="3368705">SelectorExpr</span><span class="op" id="3368717">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3368721">if</span>&nbsp;<span class="ident" id="3368724">_</span><span class="op" id="3368725">,</span>&nbsp;<span class="ident" id="3368727">ok</span>&nbsp;<span class="op" id="3368730">:=</span>&nbsp;<span class="ident" id="3368733">t</span><span class="op" id="3368734">.</span><span class="ident" id="3368735">X</span><span class="op" id="3368736">.</span><span class="op" id="3368737">(</span><span class="op" id="3368738">*</span><span class="ident" id="3368739">ast</span><span class="op" id="3368742">.</span><span class="ident" id="3368743">Ident</span><span class="op" id="3368748">)</span><span class="op" id="3368749">;</span>&nbsp;<span class="ident" id="3368751">ok</span>&nbsp;<span class="op" id="3368754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3368759">//&nbsp;only&nbsp;possible&nbsp;for&nbsp;qualified&nbsp;type&nbsp;names;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3368805">//&nbsp;assume&nbsp;type&nbsp;is&nbsp;imported</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3368835">return</span>&nbsp;<span class="ident" id="3368842">t</span><span class="op" id="3368843">.</span><span class="ident" id="3368844">Sel</span><span class="op" id="3368847">.</span><span class="ident" id="3368848">Name</span><span class="op" id="3368852">,</span>&nbsp;<span class="builtintype" id="3368854">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3368861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3368864">case</span>&nbsp;<span class="op" id="3368869">*</span><span class="ident" id="3368870">ast</span><span class="op" id="3368873">.</span><span class="ident" id="3368874">StarExpr</span><span class="op" id="3368882">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3368886">return</span>&nbsp;<span class="ident" id="3368893">baseTypeName</span><span class="op" id="3368905">(</span><span class="ident" id="3368906">t</span><span class="op" id="3368907">.</span><span class="ident" id="3368908">X</span><span class="op" id="3368909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3368912">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3368915">return</span><br>
<span class="lineno"></span><span class="op" id="3368922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3368925">//&nbsp;An&nbsp;embeddedSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;embedded&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="3368978">type</span>&nbsp;<span class="ident" id="3368983">embeddedSet</span>&nbsp;<span class="keyword" id="3368995">map</span><span class="op" id="3368998">[</span><span class="op" id="3368999">*</span><span class="ident" id="3369000">namedType</span><span class="op" id="3369009">]</span><span class="builtintype" id="3369010">bool</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3369016">//&nbsp;A&nbsp;namedType&nbsp;represents&nbsp;a&nbsp;named&nbsp;unqualified&nbsp;(package&nbsp;local,&nbsp;or&nbsp;possibly</span><br>
<span class="lineno"></span><span class="comment" id="3369090">//&nbsp;predeclared)&nbsp;type.&nbsp;The&nbsp;namedType&nbsp;for&nbsp;a&nbsp;type&nbsp;name&nbsp;is&nbsp;always&nbsp;found&nbsp;via</span><br>
<span class="lineno"></span><span class="comment" id="3369162">//&nbsp;reader.lookupType.</span><br>
<span class="lineno"></span><span class="comment" id="3369184">//</span><br>
<span class="lineno">120</span><span class="keyword" id="3369187">type</span>&nbsp;<span class="ident" id="3369192">namedType</span>&nbsp;<span class="keyword" id="3369202">struct</span>&nbsp;<span class="op" id="3369209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3369212">doc</span>&nbsp;&nbsp;<span class="builtintype" id="3369217">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3369230">//&nbsp;doc&nbsp;comment&nbsp;for&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3369255">name</span>&nbsp;<span class="builtintype" id="3369260">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3369273">//&nbsp;type&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3369287">decl</span>&nbsp;<span class="op" id="3369292">*</span><span class="ident" id="3369293">ast</span><span class="op" id="3369296">.</span><span class="ident" id="3369297">GenDecl</span>&nbsp;<span class="comment" id="3369305">//&nbsp;nil&nbsp;if&nbsp;declaration&nbsp;hasn&#39;t&nbsp;been&nbsp;seen&nbsp;yet</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3369350">isEmbedded</span>&nbsp;<span class="builtintype" id="3369361">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3369373">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3369407">isStruct</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3369418">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3369430">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;a&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3369464">embedded</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3369475">embeddedSet</span>&nbsp;<span class="comment" id="3369487">//&nbsp;true&nbsp;if&nbsp;the&nbsp;embedded&nbsp;type&nbsp;is&nbsp;a&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3369531">//&nbsp;associated&nbsp;declarations</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3369559">values</span>&nbsp;&nbsp;<span class="op" id="3369567">[</span><span class="op" id="3369568">]</span><span class="op" id="3369569">*</span><span class="ident" id="3369570">Value</span>&nbsp;<span class="comment" id="3369576">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3369596">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3369604">methodSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3369615">methods</span>&nbsp;<span class="ident" id="3369623">methodSet</span><br>
<span class="lineno"></span><span class="op" id="3369633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="3369636">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="3369716">//&nbsp;AST&nbsp;reader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3369731">//&nbsp;reader&nbsp;accumulates&nbsp;documentation&nbsp;for&nbsp;a&nbsp;single&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="3369789">//&nbsp;It&nbsp;modifies&nbsp;the&nbsp;AST:&nbsp;Comments&nbsp;(declaration&nbsp;documentation)</span><br>
<span class="lineno">140</span><span class="comment" id="3369850">//&nbsp;that&nbsp;have&nbsp;been&nbsp;collected&nbsp;by&nbsp;the&nbsp;reader&nbsp;are&nbsp;set&nbsp;to&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3369907">//&nbsp;in&nbsp;the&nbsp;respective&nbsp;AST&nbsp;nodes&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;printed</span><br>
<span class="lineno"></span><span class="comment" id="3369967">//&nbsp;twice&nbsp;(once&nbsp;when&nbsp;printing&nbsp;the&nbsp;documentation&nbsp;and&nbsp;once&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="3370028">//&nbsp;printing&nbsp;the&nbsp;corresponding&nbsp;AST&nbsp;node).</span><br>
<span class="lineno"></span><span class="comment" id="3370069">//</span><br>
<span class="lineno">145</span><span class="keyword" id="3370072">type</span>&nbsp;<span class="ident" id="3370077">reader</span>&nbsp;<span class="keyword" id="3370084">struct</span>&nbsp;<span class="op" id="3370091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3370094">mode</span>&nbsp;<span class="ident" id="3370099">Mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3370106">//&nbsp;package&nbsp;properties</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3370129">doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3370139">string</span>&nbsp;<span class="comment" id="3370146">//&nbsp;package&nbsp;documentation,&nbsp;if&nbsp;any</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3370180">filenames</span>&nbsp;<span class="op" id="3370190">[</span><span class="op" id="3370191">]</span><span class="builtintype" id="3370192">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3370200">notes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3370210">map</span><span class="op" id="3370213">[</span><span class="builtintype" id="3370214">string</span><span class="op" id="3370220">]</span><span class="op" id="3370221">[</span><span class="op" id="3370222">]</span><span class="op" id="3370223">*</span><span class="ident" id="3370224">Note</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3370231">//&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3370248">imports</span>&nbsp;<span class="keyword" id="3370256">map</span><span class="op" id="3370259">[</span><span class="builtintype" id="3370260">string</span><span class="op" id="3370266">]</span><span class="builtintype" id="3370267">int</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3370272">values</span>&nbsp;&nbsp;<span class="op" id="3370280">[</span><span class="op" id="3370281">]</span><span class="op" id="3370282">*</span><span class="ident" id="3370283">Value</span>&nbsp;<span class="comment" id="3370289">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3370309">types</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="3370317">map</span><span class="op" id="3370320">[</span><span class="builtintype" id="3370321">string</span><span class="op" id="3370327">]</span><span class="op" id="3370328">*</span><span class="ident" id="3370329">namedType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3370340">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3370348">methodSet</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3370360">//&nbsp;support&nbsp;for&nbsp;package-local&nbsp;error&nbsp;type&nbsp;declarations</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3370414">errorDecl</span>&nbsp;<span class="builtintype" id="3370424">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3370445">//&nbsp;if&nbsp;set,&nbsp;type&nbsp;&#34;error&#34;&nbsp;was&nbsp;declared&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3370491">fixlist</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3370501">[</span><span class="op" id="3370502">]</span><span class="op" id="3370503">*</span><span class="ident" id="3370504">ast</span><span class="op" id="3370507">.</span><span class="ident" id="3370508">InterfaceType</span>&nbsp;<span class="comment" id="3370522">//&nbsp;list&nbsp;of&nbsp;interfaces&nbsp;containing&nbsp;anonymous&nbsp;field&nbsp;&#34;error&#34;</span><br>
<span class="lineno"></span><span class="op" id="3370579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3370582">func</span>&nbsp;<span class="op" id="3370587">(</span><span class="ident" id="3370588">r</span>&nbsp;<span class="op" id="3370590">*</span><span class="ident" id="3370591">reader</span><span class="op" id="3370597">)</span>&nbsp;<span class="ident" id="3370599">isVisible</span><span class="op" id="3370608">(</span><span class="ident" id="3370609">name</span>&nbsp;<span class="builtintype" id="3370614">string</span><span class="op" id="3370620">)</span>&nbsp;<span class="builtintype" id="3370622">bool</span>&nbsp;<span class="op" id="3370627">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3370630">return</span>&nbsp;<span class="ident" id="3370637">r</span><span class="op" id="3370638">.</span><span class="ident" id="3370639">mode</span><span class="op" id="3370643">&amp;</span><span class="ident" id="3370644">AllDecls</span>&nbsp;<span class="op" id="3370653">!=</span>&nbsp;<span class="num" id="3370656">0</span>&nbsp;<span class="op" id="3370658">||</span>&nbsp;<span class="ident" id="3370661">ast</span><span class="op" id="3370664">.</span><span class="ident" id="3370665">IsExported</span><span class="op" id="3370675">(</span><span class="ident" id="3370676">name</span><span class="op" id="3370680">)</span><br>
<span class="lineno"></span><span class="op" id="3370682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3370685">//&nbsp;lookupType&nbsp;returns&nbsp;the&nbsp;base&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="3370742">//&nbsp;If&nbsp;the&nbsp;base&nbsp;type&nbsp;has&nbsp;not&nbsp;been&nbsp;encountered&nbsp;yet,&nbsp;a&nbsp;new</span><br>
<span class="lineno">170</span><span class="comment" id="3370798">//&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;but&nbsp;no&nbsp;associated&nbsp;declaration</span><br>
<span class="lineno"></span><span class="comment" id="3370856">//&nbsp;is&nbsp;added&nbsp;to&nbsp;the&nbsp;type&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="3370885">//</span><br>
<span class="lineno"></span><span class="keyword" id="3370888">func</span>&nbsp;<span class="op" id="3370893">(</span><span class="ident" id="3370894">r</span>&nbsp;<span class="op" id="3370896">*</span><span class="ident" id="3370897">reader</span><span class="op" id="3370903">)</span>&nbsp;<span class="ident" id="3370905">lookupType</span><span class="op" id="3370915">(</span><span class="ident" id="3370916">name</span>&nbsp;<span class="builtintype" id="3370921">string</span><span class="op" id="3370927">)</span>&nbsp;<span class="op" id="3370929">*</span><span class="ident" id="3370930">namedType</span>&nbsp;<span class="op" id="3370940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3370943">if</span>&nbsp;<span class="ident" id="3370946">name</span>&nbsp;<span class="op" id="3370951">==</span>&nbsp;<span class="string" id="3370954">&#34;&#34;</span>&nbsp;<span class="op" id="3370957">||</span>&nbsp;<span class="ident" id="3370960">name</span>&nbsp;<span class="op" id="3370965">==</span>&nbsp;<span class="string" id="3370968">&#34;_&#34;</span>&nbsp;<span class="op" id="3370972">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3370976">return</span>&nbsp;<span class="builtintype" id="3370983">nil</span>&nbsp;<span class="comment" id="3370987">//&nbsp;no&nbsp;type&nbsp;docs&nbsp;for&nbsp;anonymous&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3371024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3371027">if</span>&nbsp;<span class="ident" id="3371030">typ</span><span class="op" id="3371033">,</span>&nbsp;<span class="ident" id="3371035">found</span>&nbsp;<span class="op" id="3371041">:=</span>&nbsp;<span class="ident" id="3371044">r</span><span class="op" id="3371045">.</span><span class="ident" id="3371046">types</span><span class="op" id="3371051">[</span><span class="ident" id="3371052">name</span><span class="op" id="3371056">]</span><span class="op" id="3371057">;</span>&nbsp;<span class="ident" id="3371059">found</span>&nbsp;<span class="op" id="3371065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3371069">return</span>&nbsp;<span class="ident" id="3371076">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3371081">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3371084">//&nbsp;type&nbsp;not&nbsp;found&nbsp;-&nbsp;add&nbsp;one&nbsp;without&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3371133">typ</span>&nbsp;<span class="op" id="3371137">:=</span>&nbsp;<span class="op" id="3371140">&amp;</span><span class="ident" id="3371141">namedType</span><span class="op" id="3371150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3371154">name</span><span class="op" id="3371158">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3371164">name</span><span class="op" id="3371168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3371172">embedded</span><span class="op" id="3371180">:</span>&nbsp;<span class="builtinfunc" id="3371182">make</span><span class="op" id="3371186">(</span><span class="ident" id="3371187">embeddedSet</span><span class="op" id="3371198">)</span><span class="op" id="3371199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3371203">funcs</span><span class="op" id="3371208">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3371213">make</span><span class="op" id="3371217">(</span><span class="ident" id="3371218">methodSet</span><span class="op" id="3371227">)</span><span class="op" id="3371228">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3371232">methods</span><span class="op" id="3371239">:</span>&nbsp;&nbsp;<span class="builtinfunc" id="3371242">make</span><span class="op" id="3371246">(</span><span class="ident" id="3371247">methodSet</span><span class="op" id="3371256">)</span><span class="op" id="3371257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3371260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3371263">r</span><span class="op" id="3371264">.</span><span class="ident" id="3371265">types</span><span class="op" id="3371270">[</span><span class="ident" id="3371271">name</span><span class="op" id="3371275">]</span>&nbsp;<span class="op" id="3371277">=</span>&nbsp;<span class="ident" id="3371279">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3371284">return</span>&nbsp;<span class="ident" id="3371291">typ</span><br>
<span class="lineno"></span><span class="op" id="3371295">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="3371298">//&nbsp;recordAnonymousField&nbsp;registers&nbsp;fieldType&nbsp;as&nbsp;the&nbsp;type&nbsp;of&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="3371360">//&nbsp;anonymous&nbsp;field&nbsp;in&nbsp;the&nbsp;parent&nbsp;type.&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="3371424">//&nbsp;(qualified&nbsp;name)&nbsp;or&nbsp;the&nbsp;parent&nbsp;is&nbsp;nil,&nbsp;the&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="3371488">//&nbsp;The&nbsp;function&nbsp;returns&nbsp;the&nbsp;field&nbsp;name.</span><br>
<span class="lineno">195</span><span class="comment" id="3371528">//</span><br>
<span class="lineno"></span><span class="keyword" id="3371531">func</span>&nbsp;<span class="op" id="3371536">(</span><span class="ident" id="3371537">r</span>&nbsp;<span class="op" id="3371539">*</span><span class="ident" id="3371540">reader</span><span class="op" id="3371546">)</span>&nbsp;<span class="ident" id="3371548">recordAnonymousField</span><span class="op" id="3371568">(</span><span class="ident" id="3371569">parent</span>&nbsp;<span class="op" id="3371576">*</span><span class="ident" id="3371577">namedType</span><span class="op" id="3371586">,</span>&nbsp;<span class="ident" id="3371588">fieldType</span>&nbsp;<span class="ident" id="3371598">ast</span><span class="op" id="3371601">.</span><span class="ident" id="3371602">Expr</span><span class="op" id="3371606">)</span>&nbsp;<span class="op" id="3371608">(</span><span class="ident" id="3371609">fname</span>&nbsp;<span class="builtintype" id="3371615">string</span><span class="op" id="3371621">)</span>&nbsp;<span class="op" id="3371623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3371626">fname</span><span class="op" id="3371631">,</span>&nbsp;<span class="ident" id="3371633">imp</span>&nbsp;<span class="op" id="3371637">:=</span>&nbsp;<span class="ident" id="3371640">baseTypeName</span><span class="op" id="3371652">(</span><span class="ident" id="3371653">fieldType</span><span class="op" id="3371662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3371665">if</span>&nbsp;<span class="ident" id="3371668">parent</span>&nbsp;<span class="op" id="3371675">==</span>&nbsp;<span class="builtintype" id="3371678">nil</span>&nbsp;<span class="op" id="3371682">||</span>&nbsp;<span class="ident" id="3371685">imp</span>&nbsp;<span class="op" id="3371689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3371693">return</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3371701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3371704">if</span>&nbsp;<span class="ident" id="3371707">ftype</span>&nbsp;<span class="op" id="3371713">:=</span>&nbsp;<span class="ident" id="3371716">r</span><span class="op" id="3371717">.</span><span class="ident" id="3371718">lookupType</span><span class="op" id="3371728">(</span><span class="ident" id="3371729">fname</span><span class="op" id="3371734">)</span><span class="op" id="3371735">;</span>&nbsp;<span class="ident" id="3371737">ftype</span>&nbsp;<span class="op" id="3371743">!=</span>&nbsp;<span class="builtintype" id="3371746">nil</span>&nbsp;<span class="op" id="3371750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3371754">ftype</span><span class="op" id="3371759">.</span><span class="ident" id="3371760">isEmbedded</span>&nbsp;<span class="op" id="3371771">=</span>&nbsp;<span class="builtintype" id="3371773">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3371780">_</span><span class="op" id="3371781">,</span>&nbsp;<span class="ident" id="3371783">ptr</span>&nbsp;<span class="op" id="3371787">:=</span>&nbsp;<span class="ident" id="3371790">fieldType</span><span class="op" id="3371799">.</span><span class="op" id="3371800">(</span><span class="op" id="3371801">*</span><span class="ident" id="3371802">ast</span><span class="op" id="3371805">.</span><span class="ident" id="3371806">StarExpr</span><span class="op" id="3371814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3371818">parent</span><span class="op" id="3371824">.</span><span class="ident" id="3371825">embedded</span><span class="op" id="3371833">[</span><span class="ident" id="3371834">ftype</span><span class="op" id="3371839">]</span>&nbsp;<span class="op" id="3371841">=</span>&nbsp;<span class="ident" id="3371843">ptr</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3371848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3371851">return</span><br>
<span class="lineno"></span><span class="op" id="3371858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3371861">func</span>&nbsp;<span class="op" id="3371866">(</span><span class="ident" id="3371867">r</span>&nbsp;<span class="op" id="3371869">*</span><span class="ident" id="3371870">reader</span><span class="op" id="3371876">)</span>&nbsp;<span class="ident" id="3371878">readDoc</span><span class="op" id="3371885">(</span><span class="ident" id="3371886">comment</span>&nbsp;<span class="op" id="3371894">*</span><span class="ident" id="3371895">ast</span><span class="op" id="3371898">.</span><span class="ident" id="3371899">CommentGroup</span><span class="op" id="3371911">)</span>&nbsp;<span class="op" id="3371913">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3371916">//&nbsp;By&nbsp;convention&nbsp;there&nbsp;should&nbsp;be&nbsp;only&nbsp;one&nbsp;package&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3371975">//&nbsp;but&nbsp;collect&nbsp;all&nbsp;of&nbsp;them&nbsp;if&nbsp;there&nbsp;are&nbsp;more&nbsp;then&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3372031">text</span>&nbsp;<span class="op" id="3372036">:=</span>&nbsp;<span class="ident" id="3372039">comment</span><span class="op" id="3372046">.</span><span class="ident" id="3372047">Text</span><span class="op" id="3372051">(</span><span class="op" id="3372052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3372055">if</span>&nbsp;<span class="ident" id="3372058">r</span><span class="op" id="3372059">.</span><span class="ident" id="3372060">doc</span>&nbsp;<span class="op" id="3372064">==</span>&nbsp;<span class="string" id="3372067">&#34;&#34;</span>&nbsp;<span class="op" id="3372070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3372074">r</span><span class="op" id="3372075">.</span><span class="ident" id="3372076">doc</span>&nbsp;<span class="op" id="3372080">=</span>&nbsp;<span class="ident" id="3372082">text</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3372089">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3372097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3372100">r</span><span class="op" id="3372101">.</span><span class="ident" id="3372102">doc</span>&nbsp;<span class="op" id="3372106">+=</span>&nbsp;<span class="string" id="3372109">&#34;\n&#34;</span>&nbsp;<span class="op" id="3372114">+</span>&nbsp;<span class="ident" id="3372116">text</span><br>
<span class="lineno"></span><span class="op" id="3372121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="3372124">func</span>&nbsp;<span class="op" id="3372129">(</span><span class="ident" id="3372130">r</span>&nbsp;<span class="op" id="3372132">*</span><span class="ident" id="3372133">reader</span><span class="op" id="3372139">)</span>&nbsp;<span class="ident" id="3372141">remember</span><span class="op" id="3372149">(</span><span class="ident" id="3372150">typ</span>&nbsp;<span class="op" id="3372154">*</span><span class="ident" id="3372155">ast</span><span class="op" id="3372158">.</span><span class="ident" id="3372159">InterfaceType</span><span class="op" id="3372172">)</span>&nbsp;<span class="op" id="3372174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3372177">r</span><span class="op" id="3372178">.</span><span class="ident" id="3372179">fixlist</span>&nbsp;<span class="op" id="3372187">=</span>&nbsp;<span class="builtinfunc" id="3372189">append</span><span class="op" id="3372195">(</span><span class="ident" id="3372196">r</span><span class="op" id="3372197">.</span><span class="ident" id="3372198">fixlist</span><span class="op" id="3372205">,</span>&nbsp;<span class="ident" id="3372207">typ</span><span class="op" id="3372210">)</span><br>
<span class="lineno"></span><span class="op" id="3372212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3372215">func</span>&nbsp;<span class="ident" id="3372220">specNames</span><span class="op" id="3372229">(</span><span class="ident" id="3372230">specs</span>&nbsp;<span class="op" id="3372236">[</span><span class="op" id="3372237">]</span><span class="ident" id="3372238">ast</span><span class="op" id="3372241">.</span><span class="ident" id="3372242">Spec</span><span class="op" id="3372246">)</span>&nbsp;<span class="op" id="3372248">[</span><span class="op" id="3372249">]</span><span class="builtintype" id="3372250">string</span>&nbsp;<span class="op" id="3372257">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3372260">names</span>&nbsp;<span class="op" id="3372266">:=</span>&nbsp;<span class="builtinfunc" id="3372269">make</span><span class="op" id="3372273">(</span><span class="op" id="3372274">[</span><span class="op" id="3372275">]</span><span class="builtintype" id="3372276">string</span><span class="op" id="3372282">,</span>&nbsp;<span class="num" id="3372284">0</span><span class="op" id="3372285">,</span>&nbsp;<span class="builtinfunc" id="3372287">len</span><span class="op" id="3372290">(</span><span class="ident" id="3372291">specs</span><span class="op" id="3372296">)</span><span class="op" id="3372297">)</span>&nbsp;<span class="comment" id="3372299">//&nbsp;reasonable&nbsp;estimate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3372323">for</span>&nbsp;<span class="ident" id="3372327">_</span><span class="op" id="3372328">,</span>&nbsp;<span class="ident" id="3372330">s</span>&nbsp;<span class="op" id="3372332">:=</span>&nbsp;<span class="keyword" id="3372335">range</span>&nbsp;<span class="ident" id="3372341">specs</span>&nbsp;<span class="op" id="3372347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3372351">//&nbsp;s&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;an&nbsp;*ast.ValueSpec&nbsp;by&nbsp;readValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3372406">for</span>&nbsp;<span class="ident" id="3372410">_</span><span class="op" id="3372411">,</span>&nbsp;<span class="ident" id="3372413">ident</span>&nbsp;<span class="op" id="3372419">:=</span>&nbsp;<span class="keyword" id="3372422">range</span>&nbsp;<span class="ident" id="3372428">s</span><span class="op" id="3372429">.</span><span class="op" id="3372430">(</span><span class="op" id="3372431">*</span><span class="ident" id="3372432">ast</span><span class="op" id="3372435">.</span><span class="ident" id="3372436">ValueSpec</span><span class="op" id="3372445">)</span><span class="op" id="3372446">.</span><span class="ident" id="3372447">Names</span>&nbsp;<span class="op" id="3372453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3372458">names</span>&nbsp;<span class="op" id="3372464">=</span>&nbsp;<span class="builtinfunc" id="3372466">append</span><span class="op" id="3372472">(</span><span class="ident" id="3372473">names</span><span class="op" id="3372478">,</span>&nbsp;<span class="ident" id="3372480">ident</span><span class="op" id="3372485">.</span><span class="ident" id="3372486">Name</span><span class="op" id="3372490">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3372494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3372497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3372500">return</span>&nbsp;<span class="ident" id="3372507">names</span><br>
<span class="lineno"></span><span class="op" id="3372513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="comment" id="3372516">//&nbsp;readValue&nbsp;processes&nbsp;a&nbsp;const&nbsp;or&nbsp;var&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="3372567">//</span><br>
<span class="lineno"></span><span class="keyword" id="3372570">func</span>&nbsp;<span class="op" id="3372575">(</span><span class="ident" id="3372576">r</span>&nbsp;<span class="op" id="3372578">*</span><span class="ident" id="3372579">reader</span><span class="op" id="3372585">)</span>&nbsp;<span class="ident" id="3372587">readValue</span><span class="op" id="3372596">(</span><span class="ident" id="3372597">decl</span>&nbsp;<span class="op" id="3372602">*</span><span class="ident" id="3372603">ast</span><span class="op" id="3372606">.</span><span class="ident" id="3372607">GenDecl</span><span class="op" id="3372614">)</span>&nbsp;<span class="op" id="3372616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3372619">//&nbsp;determine&nbsp;if&nbsp;decl&nbsp;should&nbsp;be&nbsp;associated&nbsp;with&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3372674">//&nbsp;Heuristic:&nbsp;For&nbsp;each&nbsp;typed&nbsp;entry,&nbsp;determine&nbsp;the&nbsp;type&nbsp;name,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3372744">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;exactly&nbsp;one&nbsp;type&nbsp;name&nbsp;that&nbsp;is&nbsp;sufficiently</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3372814">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frequent,&nbsp;associate&nbsp;the&nbsp;decl&nbsp;with&nbsp;the&nbsp;respective&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3372884">domName</span>&nbsp;<span class="op" id="3372892">:=</span>&nbsp;<span class="string" id="3372895">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3372899">domFreq</span>&nbsp;<span class="op" id="3372907">:=</span>&nbsp;<span class="num" id="3372910">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3372913">prev</span>&nbsp;<span class="op" id="3372918">:=</span>&nbsp;<span class="string" id="3372921">&#34;&#34;</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3372925">n</span>&nbsp;<span class="op" id="3372927">:=</span>&nbsp;<span class="num" id="3372930">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3372933">for</span>&nbsp;<span class="ident" id="3372937">_</span><span class="op" id="3372938">,</span>&nbsp;<span class="ident" id="3372940">spec</span>&nbsp;<span class="op" id="3372945">:=</span>&nbsp;<span class="keyword" id="3372948">range</span>&nbsp;<span class="ident" id="3372954">decl</span><span class="op" id="3372958">.</span><span class="ident" id="3372959">Specs</span>&nbsp;<span class="op" id="3372965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3372969">s</span><span class="op" id="3372970">,</span>&nbsp;<span class="ident" id="3372972">ok</span>&nbsp;<span class="op" id="3372975">:=</span>&nbsp;<span class="ident" id="3372978">spec</span><span class="op" id="3372982">.</span><span class="op" id="3372983">(</span><span class="op" id="3372984">*</span><span class="ident" id="3372985">ast</span><span class="op" id="3372988">.</span><span class="ident" id="3372989">ValueSpec</span><span class="op" id="3372998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373002">if</span>&nbsp;<span class="op" id="3373005">!</span><span class="ident" id="3373006">ok</span>&nbsp;<span class="op" id="3373009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373014">continue</span>&nbsp;<span class="comment" id="3373023">//&nbsp;should&nbsp;not&nbsp;happen,&nbsp;but&nbsp;be&nbsp;conservative</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3373067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3373071">name</span>&nbsp;<span class="op" id="3373076">:=</span>&nbsp;<span class="string" id="3373079">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373084">switch</span>&nbsp;<span class="op" id="3373091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373095">case</span>&nbsp;<span class="ident" id="3373100">s</span><span class="op" id="3373101">.</span><span class="ident" id="3373102">Type</span>&nbsp;<span class="op" id="3373107">!=</span>&nbsp;<span class="builtintype" id="3373110">nil</span><span class="op" id="3373113">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3373118">//&nbsp;a&nbsp;type&nbsp;is&nbsp;present;&nbsp;determine&nbsp;its&nbsp;name</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373162">if</span>&nbsp;<span class="ident" id="3373165">n</span><span class="op" id="3373166">,</span>&nbsp;<span class="ident" id="3373168">imp</span>&nbsp;<span class="op" id="3373172">:=</span>&nbsp;<span class="ident" id="3373175">baseTypeName</span><span class="op" id="3373187">(</span><span class="ident" id="3373188">s</span><span class="op" id="3373189">.</span><span class="ident" id="3373190">Type</span><span class="op" id="3373194">)</span><span class="op" id="3373195">;</span>&nbsp;<span class="op" id="3373197">!</span><span class="ident" id="3373198">imp</span>&nbsp;<span class="op" id="3373202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3373208">name</span>&nbsp;<span class="op" id="3373213">=</span>&nbsp;<span class="ident" id="3373215">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3373220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373224">case</span>&nbsp;<span class="ident" id="3373229">decl</span><span class="op" id="3373233">.</span><span class="ident" id="3373234">Tok</span>&nbsp;<span class="op" id="3373238">==</span>&nbsp;<span class="ident" id="3373241">token</span><span class="op" id="3373246">.</span><span class="ident" id="3373247">CONST</span><span class="op" id="3373252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3373257">//&nbsp;no&nbsp;type&nbsp;is&nbsp;present&nbsp;but&nbsp;we&nbsp;have&nbsp;a&nbsp;constant&nbsp;declaration;</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3373318">//&nbsp;use&nbsp;the&nbsp;previous&nbsp;type&nbsp;name&nbsp;(w/o&nbsp;more&nbsp;type&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3373378">//&nbsp;we&nbsp;cannot&nbsp;handle&nbsp;the&nbsp;case&nbsp;of&nbsp;unnamed&nbsp;variables&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3373436">//&nbsp;initializer&nbsp;expressions&nbsp;except&nbsp;for&nbsp;some&nbsp;trivial&nbsp;cases)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3373497">name</span>&nbsp;<span class="op" id="3373502">=</span>&nbsp;<span class="ident" id="3373504">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3373511">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373515">if</span>&nbsp;<span class="ident" id="3373518">name</span>&nbsp;<span class="op" id="3373523">!=</span>&nbsp;<span class="string" id="3373526">&#34;&#34;</span>&nbsp;<span class="op" id="3373529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3373534">//&nbsp;entry&nbsp;has&nbsp;a&nbsp;named&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373563">if</span>&nbsp;<span class="ident" id="3373566">domName</span>&nbsp;<span class="op" id="3373574">!=</span>&nbsp;<span class="string" id="3373577">&#34;&#34;</span>&nbsp;<span class="op" id="3373580">&amp;&amp;</span>&nbsp;<span class="ident" id="3373583">domName</span>&nbsp;<span class="op" id="3373591">!=</span>&nbsp;<span class="ident" id="3373594">name</span>&nbsp;<span class="op" id="3373599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3373605">//&nbsp;more&nbsp;than&nbsp;one&nbsp;type&nbsp;name&nbsp;-&nbsp;do&nbsp;not&nbsp;associate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3373655">//&nbsp;with&nbsp;any&nbsp;type</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3373676">domName</span>&nbsp;<span class="op" id="3373684">=</span>&nbsp;<span class="string" id="3373686">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373693">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3373702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3373707">domName</span>&nbsp;<span class="op" id="3373715">=</span>&nbsp;<span class="ident" id="3373717">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3373725">domFreq</span><span class="op" id="3373732">++</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3373737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3373741">prev</span>&nbsp;<span class="op" id="3373746">=</span>&nbsp;<span class="ident" id="3373748">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3373755">n</span><span class="op" id="3373756">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3373760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3373764">//&nbsp;nothing&nbsp;to&nbsp;do&nbsp;w/o&nbsp;a&nbsp;legal&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373806">if</span>&nbsp;<span class="ident" id="3373809">n</span>&nbsp;<span class="op" id="3373811">==</span>&nbsp;<span class="num" id="3373814">0</span>&nbsp;<span class="op" id="3373816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373820">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3373828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3373832">//&nbsp;determine&nbsp;values&nbsp;list&nbsp;with&nbsp;which&nbsp;to&nbsp;associate&nbsp;the&nbsp;Value&nbsp;for&nbsp;this&nbsp;decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3373906">values</span>&nbsp;<span class="op" id="3373913">:=</span>&nbsp;<span class="op" id="3373916">&amp;</span><span class="ident" id="3373917">r</span><span class="op" id="3373918">.</span><span class="ident" id="3373919">values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373927">const</span>&nbsp;<span class="ident" id="3373933">threshold</span>&nbsp;<span class="op" id="3373943">=</span>&nbsp;<span class="num" id="3373945">0.75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3373951">if</span>&nbsp;<span class="ident" id="3373954">domName</span>&nbsp;<span class="op" id="3373962">!=</span>&nbsp;<span class="string" id="3373965">&#34;&#34;</span>&nbsp;<span class="op" id="3373968">&amp;&amp;</span>&nbsp;<span class="ident" id="3373971">r</span><span class="op" id="3373972">.</span><span class="ident" id="3373973">isVisible</span><span class="op" id="3373982">(</span><span class="ident" id="3373983">domName</span><span class="op" id="3373990">)</span>&nbsp;<span class="op" id="3373992">&amp;&amp;</span>&nbsp;<span class="ident" id="3373995">domFreq</span>&nbsp;<span class="op" id="3374003">&gt;=</span>&nbsp;<span class="builtintype" id="3374006">int</span><span class="op" id="3374009">(</span><span class="builtintype" id="3374010">float64</span><span class="op" id="3374017">(</span><span class="builtinfunc" id="3374018">len</span><span class="op" id="3374021">(</span><span class="ident" id="3374022">decl</span><span class="op" id="3374026">.</span><span class="ident" id="3374027">Specs</span><span class="op" id="3374032">)</span><span class="op" id="3374033">)</span><span class="op" id="3374034">*</span><span class="ident" id="3374035">threshold</span><span class="op" id="3374044">)</span>&nbsp;<span class="op" id="3374046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3374050">//&nbsp;typed&nbsp;entries&nbsp;are&nbsp;sufficiently&nbsp;frequent</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3374095">if</span>&nbsp;<span class="ident" id="3374098">typ</span>&nbsp;<span class="op" id="3374102">:=</span>&nbsp;<span class="ident" id="3374105">r</span><span class="op" id="3374106">.</span><span class="ident" id="3374107">lookupType</span><span class="op" id="3374117">(</span><span class="ident" id="3374118">domName</span><span class="op" id="3374125">)</span><span class="op" id="3374126">;</span>&nbsp;<span class="ident" id="3374128">typ</span>&nbsp;<span class="op" id="3374132">!=</span>&nbsp;<span class="builtintype" id="3374135">nil</span>&nbsp;<span class="op" id="3374139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3374144">values</span>&nbsp;<span class="op" id="3374151">=</span>&nbsp;<span class="op" id="3374153">&amp;</span><span class="ident" id="3374154">typ</span><span class="op" id="3374157">.</span><span class="ident" id="3374158">values</span>&nbsp;<span class="comment" id="3374165">//&nbsp;associate&nbsp;with&nbsp;that&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3374195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3374198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3374202">*</span><span class="ident" id="3374203">values</span>&nbsp;<span class="op" id="3374210">=</span>&nbsp;<span class="builtinfunc" id="3374212">append</span><span class="op" id="3374218">(</span><span class="op" id="3374219">*</span><span class="ident" id="3374220">values</span><span class="op" id="3374226">,</span>&nbsp;<span class="op" id="3374228">&amp;</span><span class="ident" id="3374229">Value</span><span class="op" id="3374234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3374238">Doc</span><span class="op" id="3374241">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3374245">decl</span><span class="op" id="3374249">.</span><span class="ident" id="3374250">Doc</span><span class="op" id="3374253">.</span><span class="ident" id="3374254">Text</span><span class="op" id="3374258">(</span><span class="op" id="3374259">)</span><span class="op" id="3374260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3374264">Names</span><span class="op" id="3374269">:</span>&nbsp;<span class="ident" id="3374271">specNames</span><span class="op" id="3374280">(</span><span class="ident" id="3374281">decl</span><span class="op" id="3374285">.</span><span class="ident" id="3374286">Specs</span><span class="op" id="3374291">)</span><span class="op" id="3374292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3374296">Decl</span><span class="op" id="3374300">:</span>&nbsp;&nbsp;<span class="ident" id="3374303">decl</span><span class="op" id="3374307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3374311">order</span><span class="op" id="3374316">:</span>&nbsp;<span class="builtinfunc" id="3374318">len</span><span class="op" id="3374321">(</span><span class="op" id="3374322">*</span><span class="ident" id="3374323">values</span><span class="op" id="3374329">)</span><span class="op" id="3374330">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3374333">}</span><span class="op" id="3374334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3374337">decl</span><span class="op" id="3374341">.</span><span class="ident" id="3374342">Doc</span>&nbsp;<span class="op" id="3374346">=</span>&nbsp;<span class="builtintype" id="3374348">nil</span>&nbsp;<span class="comment" id="3374352">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="3374386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3374389">//&nbsp;fields&nbsp;returns&nbsp;a&nbsp;struct&#39;s&nbsp;fields&nbsp;or&nbsp;an&nbsp;interface&#39;s&nbsp;methods.</span><br>
<span class="lineno">305</span><span class="comment" id="3374452">//</span><br>
<span class="lineno"></span><span class="keyword" id="3374455">func</span>&nbsp;<span class="ident" id="3374460">fields</span><span class="op" id="3374466">(</span><span class="ident" id="3374467">typ</span>&nbsp;<span class="ident" id="3374471">ast</span><span class="op" id="3374474">.</span><span class="ident" id="3374475">Expr</span><span class="op" id="3374479">)</span>&nbsp;<span class="op" id="3374481">(</span><span class="ident" id="3374482">list</span>&nbsp;<span class="op" id="3374487">[</span><span class="op" id="3374488">]</span><span class="op" id="3374489">*</span><span class="ident" id="3374490">ast</span><span class="op" id="3374493">.</span><span class="ident" id="3374494">Field</span><span class="op" id="3374499">,</span>&nbsp;<span class="ident" id="3374501">isStruct</span>&nbsp;<span class="builtintype" id="3374510">bool</span><span class="op" id="3374514">)</span>&nbsp;<span class="op" id="3374516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3374519">var</span>&nbsp;<span class="ident" id="3374523">fields</span>&nbsp;<span class="op" id="3374530">*</span><span class="ident" id="3374531">ast</span><span class="op" id="3374534">.</span><span class="ident" id="3374535">FieldList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3374546">switch</span>&nbsp;<span class="ident" id="3374553">t</span>&nbsp;<span class="op" id="3374555">:=</span>&nbsp;<span class="ident" id="3374558">typ</span><span class="op" id="3374561">.</span><span class="op" id="3374562">(</span><span class="keyword" id="3374563">type</span><span class="op" id="3374567">)</span>&nbsp;<span class="op" id="3374569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3374572">case</span>&nbsp;<span class="op" id="3374577">*</span><span class="ident" id="3374578">ast</span><span class="op" id="3374581">.</span><span class="ident" id="3374582">StructType</span><span class="op" id="3374592">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3374596">fields</span>&nbsp;<span class="op" id="3374603">=</span>&nbsp;<span class="ident" id="3374605">t</span><span class="op" id="3374606">.</span><span class="ident" id="3374607">Fields</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3374616">isStruct</span>&nbsp;<span class="op" id="3374625">=</span>&nbsp;<span class="builtintype" id="3374627">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3374633">case</span>&nbsp;<span class="op" id="3374638">*</span><span class="ident" id="3374639">ast</span><span class="op" id="3374642">.</span><span class="ident" id="3374643">InterfaceType</span><span class="op" id="3374656">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3374660">fields</span>&nbsp;<span class="op" id="3374667">=</span>&nbsp;<span class="ident" id="3374669">t</span><span class="op" id="3374670">.</span><span class="ident" id="3374671">Methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3374680">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3374683">if</span>&nbsp;<span class="ident" id="3374686">fields</span>&nbsp;<span class="op" id="3374693">!=</span>&nbsp;<span class="builtintype" id="3374696">nil</span>&nbsp;<span class="op" id="3374700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3374704">list</span>&nbsp;<span class="op" id="3374709">=</span>&nbsp;<span class="ident" id="3374711">fields</span><span class="op" id="3374717">.</span><span class="ident" id="3374718">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3374724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3374727">return</span><br>
<span class="lineno"></span><span class="op" id="3374734">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="3374737">//&nbsp;readType&nbsp;processes&nbsp;a&nbsp;type&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="3374779">//</span><br>
<span class="lineno"></span><span class="keyword" id="3374782">func</span>&nbsp;<span class="op" id="3374787">(</span><span class="ident" id="3374788">r</span>&nbsp;<span class="op" id="3374790">*</span><span class="ident" id="3374791">reader</span><span class="op" id="3374797">)</span>&nbsp;<span class="ident" id="3374799">readType</span><span class="op" id="3374807">(</span><span class="ident" id="3374808">decl</span>&nbsp;<span class="op" id="3374813">*</span><span class="ident" id="3374814">ast</span><span class="op" id="3374817">.</span><span class="ident" id="3374818">GenDecl</span><span class="op" id="3374825">,</span>&nbsp;<span class="ident" id="3374827">spec</span>&nbsp;<span class="op" id="3374832">*</span><span class="ident" id="3374833">ast</span><span class="op" id="3374836">.</span><span class="ident" id="3374837">TypeSpec</span><span class="op" id="3374845">)</span>&nbsp;<span class="op" id="3374847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3374850">typ</span>&nbsp;<span class="op" id="3374854">:=</span>&nbsp;<span class="ident" id="3374857">r</span><span class="op" id="3374858">.</span><span class="ident" id="3374859">lookupType</span><span class="op" id="3374869">(</span><span class="ident" id="3374870">spec</span><span class="op" id="3374874">.</span><span class="ident" id="3374875">Name</span><span class="op" id="3374879">.</span><span class="ident" id="3374880">Name</span><span class="op" id="3374884">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3374887">if</span>&nbsp;<span class="ident" id="3374890">typ</span>&nbsp;<span class="op" id="3374894">==</span>&nbsp;<span class="builtintype" id="3374897">nil</span>&nbsp;<span class="op" id="3374901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3374905">return</span>&nbsp;<span class="comment" id="3374912">//&nbsp;no&nbsp;name&nbsp;or&nbsp;blank&nbsp;name&nbsp;-&nbsp;ignore&nbsp;the&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3374956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3374960">//&nbsp;A&nbsp;type&nbsp;should&nbsp;be&nbsp;added&nbsp;at&nbsp;most&nbsp;once,&nbsp;so&nbsp;typ.decl</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3375013">//&nbsp;should&nbsp;be&nbsp;nil&nbsp;-&nbsp;if&nbsp;it&nbsp;is&nbsp;not,&nbsp;simply&nbsp;overwrite&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3375068">typ</span><span class="op" id="3375071">.</span><span class="ident" id="3375072">decl</span>&nbsp;<span class="op" id="3375077">=</span>&nbsp;<span class="ident" id="3375079">decl</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3375086">//&nbsp;compute&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3375112">doc</span>&nbsp;<span class="op" id="3375116">:=</span>&nbsp;<span class="ident" id="3375119">spec</span><span class="op" id="3375123">.</span><span class="ident" id="3375124">Doc</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3375129">spec</span><span class="op" id="3375133">.</span><span class="ident" id="3375134">Doc</span>&nbsp;<span class="op" id="3375138">=</span>&nbsp;<span class="builtintype" id="3375140">nil</span>&nbsp;<span class="comment" id="3375144">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3375179">if</span>&nbsp;<span class="ident" id="3375182">doc</span>&nbsp;<span class="op" id="3375186">==</span>&nbsp;<span class="builtintype" id="3375189">nil</span>&nbsp;<span class="op" id="3375193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3375197">//&nbsp;no&nbsp;doc&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec,&nbsp;use&nbsp;the&nbsp;declaration&nbsp;doc,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3375267">doc</span>&nbsp;<span class="op" id="3375271">=</span>&nbsp;<span class="ident" id="3375273">decl</span><span class="op" id="3375277">.</span><span class="ident" id="3375278">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3375283">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3375286">decl</span><span class="op" id="3375290">.</span><span class="ident" id="3375291">Doc</span>&nbsp;<span class="op" id="3375295">=</span>&nbsp;<span class="builtintype" id="3375297">nil</span>&nbsp;<span class="comment" id="3375301">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3375336">typ</span><span class="op" id="3375339">.</span><span class="ident" id="3375340">doc</span>&nbsp;<span class="op" id="3375344">=</span>&nbsp;<span class="ident" id="3375346">doc</span><span class="op" id="3375349">.</span><span class="ident" id="3375350">Text</span><span class="op" id="3375354">(</span><span class="op" id="3375355">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3375359">//&nbsp;record&nbsp;anonymous&nbsp;fields&nbsp;(they&nbsp;may&nbsp;contribute&nbsp;methods)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3375417">//&nbsp;(some&nbsp;fields&nbsp;may&nbsp;have&nbsp;been&nbsp;recorded&nbsp;already&nbsp;when&nbsp;filtering</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3375480">//&nbsp;exports,&nbsp;but&nbsp;that&#39;s&nbsp;ok)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3375508">var</span>&nbsp;<span class="ident" id="3375512">list</span>&nbsp;<span class="op" id="3375517">[</span><span class="op" id="3375518">]</span><span class="op" id="3375519">*</span><span class="ident" id="3375520">ast</span><span class="op" id="3375523">.</span><span class="ident" id="3375524">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3375531">list</span><span class="op" id="3375535">,</span>&nbsp;<span class="ident" id="3375537">typ</span><span class="op" id="3375540">.</span><span class="ident" id="3375541">isStruct</span>&nbsp;<span class="op" id="3375550">=</span>&nbsp;<span class="ident" id="3375552">fields</span><span class="op" id="3375558">(</span><span class="ident" id="3375559">spec</span><span class="op" id="3375563">.</span><span class="ident" id="3375564">Type</span><span class="op" id="3375568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3375571">for</span>&nbsp;<span class="ident" id="3375575">_</span><span class="op" id="3375576">,</span>&nbsp;<span class="ident" id="3375578">field</span>&nbsp;<span class="op" id="3375584">:=</span>&nbsp;<span class="keyword" id="3375587">range</span>&nbsp;<span class="ident" id="3375593">list</span>&nbsp;<span class="op" id="3375598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3375602">if</span>&nbsp;<span class="builtinfunc" id="3375605">len</span><span class="op" id="3375608">(</span><span class="ident" id="3375609">field</span><span class="op" id="3375614">.</span><span class="ident" id="3375615">Names</span><span class="op" id="3375620">)</span>&nbsp;<span class="op" id="3375622">==</span>&nbsp;<span class="num" id="3375625">0</span>&nbsp;<span class="op" id="3375627">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3375632">r</span><span class="op" id="3375633">.</span><span class="ident" id="3375634">recordAnonymousField</span><span class="op" id="3375654">(</span><span class="ident" id="3375655">typ</span><span class="op" id="3375658">,</span>&nbsp;<span class="ident" id="3375660">field</span><span class="op" id="3375665">.</span><span class="ident" id="3375666">Type</span><span class="op" id="3375670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3375674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3375677">}</span><br>
<span class="lineno"></span><span class="op" id="3375679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="3375682">//&nbsp;readFunc&nbsp;processes&nbsp;a&nbsp;func&nbsp;or&nbsp;method&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="3375734">//</span><br>
<span class="lineno"></span><span class="keyword" id="3375737">func</span>&nbsp;<span class="op" id="3375742">(</span><span class="ident" id="3375743">r</span>&nbsp;<span class="op" id="3375745">*</span><span class="ident" id="3375746">reader</span><span class="op" id="3375752">)</span>&nbsp;<span class="ident" id="3375754">readFunc</span><span class="op" id="3375762">(</span><span class="ident" id="3375763">fun</span>&nbsp;<span class="op" id="3375767">*</span><span class="ident" id="3375768">ast</span><span class="op" id="3375771">.</span><span class="ident" id="3375772">FuncDecl</span><span class="op" id="3375780">)</span>&nbsp;<span class="op" id="3375782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3375785">//&nbsp;strip&nbsp;function&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3375809">fun</span><span class="op" id="3375812">.</span><span class="ident" id="3375813">Body</span>&nbsp;<span class="op" id="3375818">=</span>&nbsp;<span class="builtintype" id="3375820">nil</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3375826">//&nbsp;associate&nbsp;methods&nbsp;with&nbsp;the&nbsp;receiver&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3375879">if</span>&nbsp;<span class="ident" id="3375882">fun</span><span class="op" id="3375885">.</span><span class="ident" id="3375886">Recv</span>&nbsp;<span class="op" id="3375891">!=</span>&nbsp;<span class="builtintype" id="3375894">nil</span>&nbsp;<span class="op" id="3375898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3375902">//&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3375914">recvTypeName</span><span class="op" id="3375926">,</span>&nbsp;<span class="ident" id="3375928">imp</span>&nbsp;<span class="op" id="3375932">:=</span>&nbsp;<span class="ident" id="3375935">baseTypeName</span><span class="op" id="3375947">(</span><span class="ident" id="3375948">fun</span><span class="op" id="3375951">.</span><span class="ident" id="3375952">Recv</span><span class="op" id="3375956">.</span><span class="ident" id="3375957">List</span><span class="op" id="3375961">[</span><span class="num" id="3375962">0</span><span class="op" id="3375963">]</span><span class="op" id="3375964">.</span><span class="ident" id="3375965">Type</span><span class="op" id="3375969">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3375973">if</span>&nbsp;<span class="ident" id="3375976">imp</span>&nbsp;<span class="op" id="3375980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3375985">//&nbsp;should&nbsp;not&nbsp;happen&nbsp;(incorrect&nbsp;AST);</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376026">//&nbsp;don&#39;t&nbsp;show&nbsp;this&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3376055">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3376064">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3376068">if</span>&nbsp;<span class="ident" id="3376071">typ</span>&nbsp;<span class="op" id="3376075">:=</span>&nbsp;<span class="ident" id="3376078">r</span><span class="op" id="3376079">.</span><span class="ident" id="3376080">lookupType</span><span class="op" id="3376090">(</span><span class="ident" id="3376091">recvTypeName</span><span class="op" id="3376103">)</span><span class="op" id="3376104">;</span>&nbsp;<span class="ident" id="3376106">typ</span>&nbsp;<span class="op" id="3376110">!=</span>&nbsp;<span class="builtintype" id="3376113">nil</span>&nbsp;<span class="op" id="3376117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3376122">typ</span><span class="op" id="3376125">.</span><span class="ident" id="3376126">methods</span><span class="op" id="3376133">.</span><span class="ident" id="3376134">set</span><span class="op" id="3376137">(</span><span class="ident" id="3376138">fun</span><span class="op" id="3376141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3376145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376149">//&nbsp;otherwise&nbsp;ignore&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376182">//&nbsp;TODO(gri):&nbsp;There&nbsp;may&nbsp;be&nbsp;exported&nbsp;methods&nbsp;of&nbsp;non-exported&nbsp;types</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376250">//&nbsp;that&nbsp;can&nbsp;be&nbsp;called&nbsp;because&nbsp;of&nbsp;exported&nbsp;values&nbsp;(consts,&nbsp;vars,&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376319">//&nbsp;function&nbsp;results)&nbsp;of&nbsp;that&nbsp;type.&nbsp;Could&nbsp;determine&nbsp;if&nbsp;that&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376387">//&nbsp;case&nbsp;and&nbsp;then&nbsp;show&nbsp;those&nbsp;methods&nbsp;in&nbsp;an&nbsp;appropriate&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3376452">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3376460">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376464">//&nbsp;associate&nbsp;factory&nbsp;functions&nbsp;with&nbsp;the&nbsp;first&nbsp;visible&nbsp;result&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3376539">if</span>&nbsp;<span class="ident" id="3376542">fun</span><span class="op" id="3376545">.</span><span class="ident" id="3376546">Type</span><span class="op" id="3376550">.</span><span class="ident" id="3376551">Results</span><span class="op" id="3376558">.</span><span class="ident" id="3376559">NumFields</span><span class="op" id="3376568">(</span><span class="op" id="3376569">)</span>&nbsp;<span class="op" id="3376571">&gt;=</span>&nbsp;<span class="num" id="3376574">1</span>&nbsp;<span class="op" id="3376576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3376580">res</span>&nbsp;<span class="op" id="3376584">:=</span>&nbsp;<span class="ident" id="3376587">fun</span><span class="op" id="3376590">.</span><span class="ident" id="3376591">Type</span><span class="op" id="3376595">.</span><span class="ident" id="3376596">Results</span><span class="op" id="3376603">.</span><span class="ident" id="3376604">List</span><span class="op" id="3376608">[</span><span class="num" id="3376609">0</span><span class="op" id="3376610">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3376614">if</span>&nbsp;<span class="builtinfunc" id="3376617">len</span><span class="op" id="3376620">(</span><span class="ident" id="3376621">res</span><span class="op" id="3376624">.</span><span class="ident" id="3376625">Names</span><span class="op" id="3376630">)</span>&nbsp;<span class="op" id="3376632">&lt;=</span>&nbsp;<span class="num" id="3376635">1</span>&nbsp;<span class="op" id="3376637">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376642">//&nbsp;exactly&nbsp;one&nbsp;(named&nbsp;or&nbsp;anonymous)&nbsp;result&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376699">//&nbsp;with&nbsp;the&nbsp;first&nbsp;type&nbsp;in&nbsp;result&nbsp;signature&nbsp;(there&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376756">//&nbsp;be&nbsp;more&nbsp;than&nbsp;one&nbsp;result)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3376787">if</span>&nbsp;<span class="ident" id="3376790">n</span><span class="op" id="3376791">,</span>&nbsp;<span class="ident" id="3376793">imp</span>&nbsp;<span class="op" id="3376797">:=</span>&nbsp;<span class="ident" id="3376800">baseTypeName</span><span class="op" id="3376812">(</span><span class="ident" id="3376813">res</span><span class="op" id="3376816">.</span><span class="ident" id="3376817">Type</span><span class="op" id="3376821">)</span><span class="op" id="3376822">;</span>&nbsp;<span class="op" id="3376824">!</span><span class="ident" id="3376825">imp</span>&nbsp;<span class="op" id="3376829">&amp;&amp;</span>&nbsp;<span class="ident" id="3376832">r</span><span class="op" id="3376833">.</span><span class="ident" id="3376834">isVisible</span><span class="op" id="3376843">(</span><span class="ident" id="3376844">n</span><span class="op" id="3376845">)</span>&nbsp;<span class="op" id="3376847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3376853">if</span>&nbsp;<span class="ident" id="3376856">typ</span>&nbsp;<span class="op" id="3376860">:=</span>&nbsp;<span class="ident" id="3376863">r</span><span class="op" id="3376864">.</span><span class="ident" id="3376865">lookupType</span><span class="op" id="3376875">(</span><span class="ident" id="3376876">n</span><span class="op" id="3376877">)</span><span class="op" id="3376878">;</span>&nbsp;<span class="ident" id="3376880">typ</span>&nbsp;<span class="op" id="3376884">!=</span>&nbsp;<span class="builtintype" id="3376887">nil</span>&nbsp;<span class="op" id="3376891">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376898">//&nbsp;associate&nbsp;function&nbsp;with&nbsp;typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3376934">typ</span><span class="op" id="3376937">.</span><span class="ident" id="3376938">funcs</span><span class="op" id="3376943">.</span><span class="ident" id="3376944">set</span><span class="op" id="3376947">(</span><span class="ident" id="3376948">fun</span><span class="op" id="3376951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3376958">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3376969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3376974">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3376978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3376981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376985">//&nbsp;just&nbsp;an&nbsp;ordinary&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3377015">r</span><span class="op" id="3377016">.</span><span class="ident" id="3377017">funcs</span><span class="op" id="3377022">.</span><span class="ident" id="3377023">set</span><span class="op" id="3377026">(</span><span class="ident" id="3377027">fun</span><span class="op" id="3377030">)</span><br>
<span class="lineno">400</span><span class="op" id="3377032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3377035">var</span>&nbsp;<span class="op" id="3377039">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3377042">noteMarker</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3377056">=</span>&nbsp;<span class="string" id="3377058">`([A-Z][A-Z]+)\(([^)]+)\):?`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3377106">//&nbsp;MARKER(uid),&nbsp;MARKER&nbsp;at&nbsp;least&nbsp;2&nbsp;chars,&nbsp;uid&nbsp;at&nbsp;least&nbsp;1&nbsp;char</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3377168">noteMarkerRx</span>&nbsp;&nbsp;<span class="op" id="3377182">=</span>&nbsp;<span class="ident" id="3377184">regexp</span><span class="op" id="3377190">.</span><span class="ident" id="3377191">MustCompile</span><span class="op" id="3377202">(</span><span class="string" id="3377203">`^[&nbsp;\t]*`</span>&nbsp;<span class="op" id="3377213">+</span>&nbsp;<span class="ident" id="3377215">noteMarker</span><span class="op" id="3377225">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3377232">//&nbsp;MARKER(uid)&nbsp;at&nbsp;text&nbsp;start</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3377262">noteCommentRx</span>&nbsp;<span class="op" id="3377276">=</span>&nbsp;<span class="ident" id="3377278">regexp</span><span class="op" id="3377284">.</span><span class="ident" id="3377285">MustCompile</span><span class="op" id="3377296">(</span><span class="string" id="3377297">`^/[/*][&nbsp;\t]*`</span>&nbsp;<span class="op" id="3377312">+</span>&nbsp;<span class="ident" id="3377314">noteMarker</span><span class="op" id="3377324">)</span>&nbsp;<span class="comment" id="3377326">//&nbsp;MARKER(uid)&nbsp;at&nbsp;comment&nbsp;start</span><br>
<span class="lineno"></span><span class="op" id="3377358">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3377361">//&nbsp;readNote&nbsp;collects&nbsp;a&nbsp;single&nbsp;note&nbsp;from&nbsp;a&nbsp;sequence&nbsp;of&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="3377425">//</span><br>
<span class="lineno">410</span><span class="keyword" id="3377428">func</span>&nbsp;<span class="op" id="3377433">(</span><span class="ident" id="3377434">r</span>&nbsp;<span class="op" id="3377436">*</span><span class="ident" id="3377437">reader</span><span class="op" id="3377443">)</span>&nbsp;<span class="ident" id="3377445">readNote</span><span class="op" id="3377453">(</span><span class="ident" id="3377454">list</span>&nbsp;<span class="op" id="3377459">[</span><span class="op" id="3377460">]</span><span class="op" id="3377461">*</span><span class="ident" id="3377462">ast</span><span class="op" id="3377465">.</span><span class="ident" id="3377466">Comment</span><span class="op" id="3377473">)</span>&nbsp;<span class="op" id="3377475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3377478">text</span>&nbsp;<span class="op" id="3377483">:=</span>&nbsp;<span class="op" id="3377486">(</span><span class="op" id="3377487">&amp;</span><span class="ident" id="3377488">ast</span><span class="op" id="3377491">.</span><span class="ident" id="3377492">CommentGroup</span><span class="op" id="3377504">{</span><span class="ident" id="3377505">List</span><span class="op" id="3377509">:</span>&nbsp;<span class="ident" id="3377511">list</span><span class="op" id="3377515">}</span><span class="op" id="3377516">)</span><span class="op" id="3377517">.</span><span class="ident" id="3377518">Text</span><span class="op" id="3377522">(</span><span class="op" id="3377523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3377526">if</span>&nbsp;<span class="ident" id="3377529">m</span>&nbsp;<span class="op" id="3377531">:=</span>&nbsp;<span class="ident" id="3377534">noteMarkerRx</span><span class="op" id="3377546">.</span><span class="ident" id="3377547">FindStringSubmatchIndex</span><span class="op" id="3377570">(</span><span class="ident" id="3377571">text</span><span class="op" id="3377575">)</span><span class="op" id="3377576">;</span>&nbsp;<span class="ident" id="3377578">m</span>&nbsp;<span class="op" id="3377580">!=</span>&nbsp;<span class="builtintype" id="3377583">nil</span>&nbsp;<span class="op" id="3377587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3377591">//&nbsp;The&nbsp;note&nbsp;body&nbsp;starts&nbsp;after&nbsp;the&nbsp;marker.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3377635">//&nbsp;We&nbsp;remove&nbsp;any&nbsp;formatting&nbsp;so&nbsp;that&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3377682">//&nbsp;get&nbsp;spurious&nbsp;line&nbsp;breaks/indentation&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3377729">//&nbsp;showing&nbsp;the&nbsp;TODO&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3377757">body</span>&nbsp;<span class="op" id="3377762">:=</span>&nbsp;<span class="ident" id="3377765">clean</span><span class="op" id="3377770">(</span><span class="ident" id="3377771">text</span><span class="op" id="3377775">[</span><span class="ident" id="3377776">m</span><span class="op" id="3377777">[</span><span class="num" id="3377778">1</span><span class="op" id="3377779">]</span><span class="op" id="3377780">:</span><span class="op" id="3377781">]</span><span class="op" id="3377782">,</span>&nbsp;<span class="ident" id="3377784">keepNL</span><span class="op" id="3377790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3377794">if</span>&nbsp;<span class="ident" id="3377797">body</span>&nbsp;<span class="op" id="3377802">!=</span>&nbsp;<span class="string" id="3377805">&#34;&#34;</span>&nbsp;<span class="op" id="3377808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3377813">marker</span>&nbsp;<span class="op" id="3377820">:=</span>&nbsp;<span class="ident" id="3377823">text</span><span class="op" id="3377827">[</span><span class="ident" id="3377828">m</span><span class="op" id="3377829">[</span><span class="num" id="3377830">2</span><span class="op" id="3377831">]</span><span class="op" id="3377832">:</span><span class="ident" id="3377833">m</span><span class="op" id="3377834">[</span><span class="num" id="3377835">3</span><span class="op" id="3377836">]</span><span class="op" id="3377837">]</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3377842">r</span><span class="op" id="3377843">.</span><span class="ident" id="3377844">notes</span><span class="op" id="3377849">[</span><span class="ident" id="3377850">marker</span><span class="op" id="3377856">]</span>&nbsp;<span class="op" id="3377858">=</span>&nbsp;<span class="builtinfunc" id="3377860">append</span><span class="op" id="3377866">(</span><span class="ident" id="3377867">r</span><span class="op" id="3377868">.</span><span class="ident" id="3377869">notes</span><span class="op" id="3377874">[</span><span class="ident" id="3377875">marker</span><span class="op" id="3377881">]</span><span class="op" id="3377882">,</span>&nbsp;<span class="op" id="3377884">&amp;</span><span class="ident" id="3377885">Note</span><span class="op" id="3377889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3377895">Pos</span><span class="op" id="3377898">:</span>&nbsp;&nbsp;<span class="ident" id="3377901">list</span><span class="op" id="3377905">[</span><span class="num" id="3377906">0</span><span class="op" id="3377907">]</span><span class="op" id="3377908">.</span><span class="ident" id="3377909">Pos</span><span class="op" id="3377912">(</span><span class="op" id="3377913">)</span><span class="op" id="3377914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3377920">End</span><span class="op" id="3377923">:</span>&nbsp;&nbsp;<span class="ident" id="3377926">list</span><span class="op" id="3377930">[</span><span class="builtinfunc" id="3377931">len</span><span class="op" id="3377934">(</span><span class="ident" id="3377935">list</span><span class="op" id="3377939">)</span><span class="op" id="3377940">-</span><span class="num" id="3377941">1</span><span class="op" id="3377942">]</span><span class="op" id="3377943">.</span><span class="ident" id="3377944">End</span><span class="op" id="3377947">(</span><span class="op" id="3377948">)</span><span class="op" id="3377949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3377955">UID</span><span class="op" id="3377958">:</span>&nbsp;&nbsp;<span class="ident" id="3377961">text</span><span class="op" id="3377965">[</span><span class="ident" id="3377966">m</span><span class="op" id="3377967">[</span><span class="num" id="3377968">4</span><span class="op" id="3377969">]</span><span class="op" id="3377970">:</span><span class="ident" id="3377971">m</span><span class="op" id="3377972">[</span><span class="num" id="3377973">5</span><span class="op" id="3377974">]</span><span class="op" id="3377975">]</span><span class="op" id="3377976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3377982">Body</span><span class="op" id="3377986">:</span>&nbsp;<span class="ident" id="3377988">body</span><span class="op" id="3377992">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3377997">}</span><span class="op" id="3377998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3378002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3378005">}</span><br>
<span class="lineno"></span><span class="op" id="3378007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="comment" id="3378010">//&nbsp;readNotes&nbsp;extracts&nbsp;notes&nbsp;from&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="3378053">//&nbsp;A&nbsp;note&nbsp;must&nbsp;start&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;comment&nbsp;with&nbsp;&#34;MARKER(uid):&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3378124">//&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;the&nbsp;note&nbsp;body&nbsp;(e.g.,&nbsp;&#34;//&nbsp;BUG(gri):&nbsp;fix&nbsp;this&#34;).</span><br>
<span class="lineno"></span><span class="comment" id="3378193">//&nbsp;The&nbsp;note&nbsp;ends&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;comment&nbsp;group&nbsp;or&nbsp;at&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3378261">//&nbsp;another&nbsp;note&nbsp;in&nbsp;the&nbsp;same&nbsp;comment&nbsp;group,&nbsp;whichever&nbsp;comes&nbsp;first.</span><br>
<span class="lineno">435</span><span class="comment" id="3378327">//</span><br>
<span class="lineno"></span><span class="keyword" id="3378330">func</span>&nbsp;<span class="op" id="3378335">(</span><span class="ident" id="3378336">r</span>&nbsp;<span class="op" id="3378338">*</span><span class="ident" id="3378339">reader</span><span class="op" id="3378345">)</span>&nbsp;<span class="ident" id="3378347">readNotes</span><span class="op" id="3378356">(</span><span class="ident" id="3378357">comments</span>&nbsp;<span class="op" id="3378366">[</span><span class="op" id="3378367">]</span><span class="op" id="3378368">*</span><span class="ident" id="3378369">ast</span><span class="op" id="3378372">.</span><span class="ident" id="3378373">CommentGroup</span><span class="op" id="3378385">)</span>&nbsp;<span class="op" id="3378387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3378390">for</span>&nbsp;<span class="ident" id="3378394">_</span><span class="op" id="3378395">,</span>&nbsp;<span class="ident" id="3378397">group</span>&nbsp;<span class="op" id="3378403">:=</span>&nbsp;<span class="keyword" id="3378406">range</span>&nbsp;<span class="ident" id="3378412">comments</span>&nbsp;<span class="op" id="3378421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3378425">i</span>&nbsp;<span class="op" id="3378427">:=</span>&nbsp;<span class="op" id="3378430">-</span><span class="num" id="3378431">1</span>&nbsp;<span class="comment" id="3378433">//&nbsp;comment&nbsp;index&nbsp;of&nbsp;most&nbsp;recent&nbsp;note&nbsp;start,&nbsp;valid&nbsp;if&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3378493">list</span>&nbsp;<span class="op" id="3378498">:=</span>&nbsp;<span class="ident" id="3378501">group</span><span class="op" id="3378506">.</span><span class="ident" id="3378507">List</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3378514">for</span>&nbsp;<span class="ident" id="3378518">j</span><span class="op" id="3378519">,</span>&nbsp;<span class="ident" id="3378521">c</span>&nbsp;<span class="op" id="3378523">:=</span>&nbsp;<span class="keyword" id="3378526">range</span>&nbsp;<span class="ident" id="3378532">list</span>&nbsp;<span class="op" id="3378537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3378542">if</span>&nbsp;<span class="ident" id="3378545">noteCommentRx</span><span class="op" id="3378558">.</span><span class="ident" id="3378559">MatchString</span><span class="op" id="3378570">(</span><span class="ident" id="3378571">c</span><span class="op" id="3378572">.</span><span class="ident" id="3378573">Text</span><span class="op" id="3378577">)</span>&nbsp;<span class="op" id="3378579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3378585">if</span>&nbsp;<span class="ident" id="3378588">i</span>&nbsp;<span class="op" id="3378590">&gt;=</span>&nbsp;<span class="num" id="3378593">0</span>&nbsp;<span class="op" id="3378595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3378602">r</span><span class="op" id="3378603">.</span><span class="ident" id="3378604">readNote</span><span class="op" id="3378612">(</span><span class="ident" id="3378613">list</span><span class="op" id="3378617">[</span><span class="ident" id="3378618">i</span><span class="op" id="3378619">:</span><span class="ident" id="3378620">j</span><span class="op" id="3378621">]</span><span class="op" id="3378622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3378628">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3378634">i</span>&nbsp;<span class="op" id="3378636">=</span>&nbsp;<span class="ident" id="3378638">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3378643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3378647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3378651">if</span>&nbsp;<span class="ident" id="3378654">i</span>&nbsp;<span class="op" id="3378656">&gt;=</span>&nbsp;<span class="num" id="3378659">0</span>&nbsp;<span class="op" id="3378661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3378666">r</span><span class="op" id="3378667">.</span><span class="ident" id="3378668">readNote</span><span class="op" id="3378676">(</span><span class="ident" id="3378677">list</span><span class="op" id="3378681">[</span><span class="ident" id="3378682">i</span><span class="op" id="3378683">:</span><span class="op" id="3378684">]</span><span class="op" id="3378685">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3378689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3378692">}</span><br>
<span class="lineno"></span><span class="op" id="3378694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3378697">//&nbsp;readFile&nbsp;adds&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;source&nbsp;file&nbsp;to&nbsp;the&nbsp;reader.</span><br>
<span class="lineno">455</span><span class="comment" id="3378755">//</span><br>
<span class="lineno"></span><span class="keyword" id="3378758">func</span>&nbsp;<span class="op" id="3378763">(</span><span class="ident" id="3378764">r</span>&nbsp;<span class="op" id="3378766">*</span><span class="ident" id="3378767">reader</span><span class="op" id="3378773">)</span>&nbsp;<span class="ident" id="3378775">readFile</span><span class="op" id="3378783">(</span><span class="ident" id="3378784">src</span>&nbsp;<span class="op" id="3378788">*</span><span class="ident" id="3378789">ast</span><span class="op" id="3378792">.</span><span class="ident" id="3378793">File</span><span class="op" id="3378797">)</span>&nbsp;<span class="op" id="3378799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3378802">//&nbsp;add&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3378832">if</span>&nbsp;<span class="ident" id="3378835">src</span><span class="op" id="3378838">.</span><span class="ident" id="3378839">Doc</span>&nbsp;<span class="op" id="3378843">!=</span>&nbsp;<span class="builtintype" id="3378846">nil</span>&nbsp;<span class="op" id="3378850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3378854">r</span><span class="op" id="3378855">.</span><span class="ident" id="3378856">readDoc</span><span class="op" id="3378863">(</span><span class="ident" id="3378864">src</span><span class="op" id="3378867">.</span><span class="ident" id="3378868">Doc</span><span class="op" id="3378871">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3378875">src</span><span class="op" id="3378878">.</span><span class="ident" id="3378879">Doc</span>&nbsp;<span class="op" id="3378883">=</span>&nbsp;<span class="builtintype" id="3378885">nil</span>&nbsp;<span class="comment" id="3378889">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3378924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3378928">//&nbsp;add&nbsp;all&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3378953">for</span>&nbsp;<span class="ident" id="3378957">_</span><span class="op" id="3378958">,</span>&nbsp;<span class="ident" id="3378960">decl</span>&nbsp;<span class="op" id="3378965">:=</span>&nbsp;<span class="keyword" id="3378968">range</span>&nbsp;<span class="ident" id="3378974">src</span><span class="op" id="3378977">.</span><span class="ident" id="3378978">Decls</span>&nbsp;<span class="op" id="3378984">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3378988">switch</span>&nbsp;<span class="ident" id="3378995">d</span>&nbsp;<span class="op" id="3378997">:=</span>&nbsp;<span class="ident" id="3379000">decl</span><span class="op" id="3379004">.</span><span class="op" id="3379005">(</span><span class="keyword" id="3379006">type</span><span class="op" id="3379010">)</span>&nbsp;<span class="op" id="3379012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379016">case</span>&nbsp;<span class="op" id="3379021">*</span><span class="ident" id="3379022">ast</span><span class="op" id="3379025">.</span><span class="ident" id="3379026">GenDecl</span><span class="op" id="3379033">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379038">switch</span>&nbsp;<span class="ident" id="3379045">d</span><span class="op" id="3379046">.</span><span class="ident" id="3379047">Tok</span>&nbsp;<span class="op" id="3379051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379056">case</span>&nbsp;<span class="ident" id="3379061">token</span><span class="op" id="3379066">.</span><span class="ident" id="3379067">IMPORT</span><span class="op" id="3379073">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3379079">//&nbsp;imports&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379119">for</span>&nbsp;<span class="ident" id="3379123">_</span><span class="op" id="3379124">,</span>&nbsp;<span class="ident" id="3379126">spec</span>&nbsp;<span class="op" id="3379131">:=</span>&nbsp;<span class="keyword" id="3379134">range</span>&nbsp;<span class="ident" id="3379140">d</span><span class="op" id="3379141">.</span><span class="ident" id="3379142">Specs</span>&nbsp;<span class="op" id="3379148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379155">if</span>&nbsp;<span class="ident" id="3379158">s</span><span class="op" id="3379159">,</span>&nbsp;<span class="ident" id="3379161">ok</span>&nbsp;<span class="op" id="3379164">:=</span>&nbsp;<span class="ident" id="3379167">spec</span><span class="op" id="3379171">.</span><span class="op" id="3379172">(</span><span class="op" id="3379173">*</span><span class="ident" id="3379174">ast</span><span class="op" id="3379177">.</span><span class="ident" id="3379178">ImportSpec</span><span class="op" id="3379188">)</span><span class="op" id="3379189">;</span>&nbsp;<span class="ident" id="3379191">ok</span>&nbsp;<span class="op" id="3379194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379202">if</span>&nbsp;<span class="ident" id="3379205">import_</span><span class="op" id="3379212">,</span>&nbsp;<span class="ident" id="3379214">err</span>&nbsp;<span class="op" id="3379218">:=</span>&nbsp;<span class="ident" id="3379221">strconv</span><span class="op" id="3379228">.</span><span class="ident" id="3379229">Unquote</span><span class="op" id="3379236">(</span><span class="ident" id="3379237">s</span><span class="op" id="3379238">.</span><span class="ident" id="3379239">Path</span><span class="op" id="3379243">.</span><span class="ident" id="3379244">Value</span><span class="op" id="3379249">)</span><span class="op" id="3379250">;</span>&nbsp;<span class="ident" id="3379252">err</span>&nbsp;<span class="op" id="3379256">==</span>&nbsp;<span class="builtintype" id="3379259">nil</span>&nbsp;<span class="op" id="3379263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3379272">r</span><span class="op" id="3379273">.</span><span class="ident" id="3379274">imports</span><span class="op" id="3379281">[</span><span class="ident" id="3379282">import_</span><span class="op" id="3379289">]</span>&nbsp;<span class="op" id="3379291">=</span>&nbsp;<span class="num" id="3379293">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3379301">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3379308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3379314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379319">case</span>&nbsp;<span class="ident" id="3379324">token</span><span class="op" id="3379329">.</span><span class="ident" id="3379330">CONST</span><span class="op" id="3379335">,</span>&nbsp;<span class="ident" id="3379337">token</span><span class="op" id="3379342">.</span><span class="ident" id="3379343">VAR</span><span class="op" id="3379346">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3379352">//&nbsp;constants&nbsp;and&nbsp;variables&nbsp;are&nbsp;always&nbsp;handled&nbsp;as&nbsp;a&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3379413">r</span><span class="op" id="3379414">.</span><span class="ident" id="3379415">readValue</span><span class="op" id="3379424">(</span><span class="ident" id="3379425">d</span><span class="op" id="3379426">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379431">case</span>&nbsp;<span class="ident" id="3379436">token</span><span class="op" id="3379441">.</span><span class="ident" id="3379442">TYPE</span><span class="op" id="3379446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3379452">//&nbsp;types&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379490">if</span>&nbsp;<span class="builtinfunc" id="3379493">len</span><span class="op" id="3379496">(</span><span class="ident" id="3379497">d</span><span class="op" id="3379498">.</span><span class="ident" id="3379499">Specs</span><span class="op" id="3379504">)</span>&nbsp;<span class="op" id="3379506">==</span>&nbsp;<span class="num" id="3379509">1</span>&nbsp;<span class="op" id="3379511">&amp;&amp;</span>&nbsp;<span class="op" id="3379514">!</span><span class="ident" id="3379515">d</span><span class="op" id="3379516">.</span><span class="ident" id="3379517">Lparen</span><span class="op" id="3379523">.</span><span class="ident" id="3379524">IsValid</span><span class="op" id="3379531">(</span><span class="op" id="3379532">)</span>&nbsp;<span class="op" id="3379534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3379541">//&nbsp;common&nbsp;case:&nbsp;single&nbsp;declaration&nbsp;w/o&nbsp;parentheses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3379597">//&nbsp;(if&nbsp;a&nbsp;single&nbsp;declaration&nbsp;is&nbsp;parenthesized,</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3379648">//&nbsp;create&nbsp;a&nbsp;new&nbsp;fake&nbsp;declaration&nbsp;below,&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3379701">//&nbsp;go/doc&nbsp;type&nbsp;declarations&nbsp;always&nbsp;appear&nbsp;w/o</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3379752">//&nbsp;parentheses)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379773">if</span>&nbsp;<span class="ident" id="3379776">s</span><span class="op" id="3379777">,</span>&nbsp;<span class="ident" id="3379779">ok</span>&nbsp;<span class="op" id="3379782">:=</span>&nbsp;<span class="ident" id="3379785">d</span><span class="op" id="3379786">.</span><span class="ident" id="3379787">Specs</span><span class="op" id="3379792">[</span><span class="num" id="3379793">0</span><span class="op" id="3379794">]</span><span class="op" id="3379795">.</span><span class="op" id="3379796">(</span><span class="op" id="3379797">*</span><span class="ident" id="3379798">ast</span><span class="op" id="3379801">.</span><span class="ident" id="3379802">TypeSpec</span><span class="op" id="3379810">)</span><span class="op" id="3379811">;</span>&nbsp;<span class="ident" id="3379813">ok</span>&nbsp;<span class="op" id="3379816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3379824">r</span><span class="op" id="3379825">.</span><span class="ident" id="3379826">readType</span><span class="op" id="3379834">(</span><span class="ident" id="3379835">d</span><span class="op" id="3379836">,</span>&nbsp;<span class="ident" id="3379838">s</span><span class="op" id="3379839">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3379846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379853">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3379863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379869">for</span>&nbsp;<span class="ident" id="3379873">_</span><span class="op" id="3379874">,</span>&nbsp;<span class="ident" id="3379876">spec</span>&nbsp;<span class="op" id="3379881">:=</span>&nbsp;<span class="keyword" id="3379884">range</span>&nbsp;<span class="ident" id="3379890">d</span><span class="op" id="3379891">.</span><span class="ident" id="3379892">Specs</span>&nbsp;<span class="op" id="3379898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3379905">if</span>&nbsp;<span class="ident" id="3379908">s</span><span class="op" id="3379909">,</span>&nbsp;<span class="ident" id="3379911">ok</span>&nbsp;<span class="op" id="3379914">:=</span>&nbsp;<span class="ident" id="3379917">spec</span><span class="op" id="3379921">.</span><span class="op" id="3379922">(</span><span class="op" id="3379923">*</span><span class="ident" id="3379924">ast</span><span class="op" id="3379927">.</span><span class="ident" id="3379928">TypeSpec</span><span class="op" id="3379936">)</span><span class="op" id="3379937">;</span>&nbsp;<span class="ident" id="3379939">ok</span>&nbsp;<span class="op" id="3379942">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3379950">//&nbsp;use&nbsp;an&nbsp;individual&nbsp;(possibly&nbsp;fake)&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3380005">//&nbsp;for&nbsp;each&nbsp;type;&nbsp;this&nbsp;also&nbsp;ensures&nbsp;that&nbsp;each&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3380062">//&nbsp;gets&nbsp;to&nbsp;(re-)use&nbsp;the&nbsp;declaration&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3380118">//&nbsp;if&nbsp;there&#39;s&nbsp;none&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380175">fake</span>&nbsp;<span class="op" id="3380180">:=</span>&nbsp;<span class="op" id="3380183">&amp;</span><span class="ident" id="3380184">ast</span><span class="op" id="3380187">.</span><span class="ident" id="3380188">GenDecl</span><span class="op" id="3380195">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380204">Doc</span><span class="op" id="3380207">:</span>&nbsp;<span class="ident" id="3380209">d</span><span class="op" id="3380210">.</span><span class="ident" id="3380211">Doc</span><span class="op" id="3380214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3380223">//&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;existing&nbsp;TokPos&nbsp;because&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3380274">//&nbsp;will&nbsp;lead&nbsp;to&nbsp;the&nbsp;wrong&nbsp;selection&nbsp;range&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3380327">//&nbsp;the&nbsp;fake&nbsp;declaration&nbsp;if&nbsp;there&nbsp;are&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3380376">//&nbsp;than&nbsp;one&nbsp;type&nbsp;in&nbsp;the&nbsp;group&nbsp;(this&nbsp;affects</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3380427">//&nbsp;src/cmd/godoc/godoc.go&#39;s&nbsp;posLink_urlFunc)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380479">TokPos</span><span class="op" id="3380485">:</span>&nbsp;<span class="ident" id="3380487">s</span><span class="op" id="3380488">.</span><span class="ident" id="3380489">Pos</span><span class="op" id="3380492">(</span><span class="op" id="3380493">)</span><span class="op" id="3380494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380503">Tok</span><span class="op" id="3380506">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380511">token</span><span class="op" id="3380516">.</span><span class="ident" id="3380517">TYPE</span><span class="op" id="3380521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380530">Specs</span><span class="op" id="3380535">:</span>&nbsp;&nbsp;<span class="op" id="3380538">[</span><span class="op" id="3380539">]</span><span class="ident" id="3380540">ast</span><span class="op" id="3380543">.</span><span class="ident" id="3380544">Spec</span><span class="op" id="3380548">{</span><span class="ident" id="3380549">s</span><span class="op" id="3380550">}</span><span class="op" id="3380551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3380559">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380567">r</span><span class="op" id="3380568">.</span><span class="ident" id="3380569">readType</span><span class="op" id="3380577">(</span><span class="ident" id="3380578">fake</span><span class="op" id="3380582">,</span>&nbsp;<span class="ident" id="3380584">s</span><span class="op" id="3380585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3380592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3380598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3380603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3380607">case</span>&nbsp;<span class="op" id="3380612">*</span><span class="ident" id="3380613">ast</span><span class="op" id="3380616">.</span><span class="ident" id="3380617">FuncDecl</span><span class="op" id="3380625">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380630">r</span><span class="op" id="3380631">.</span><span class="ident" id="3380632">readFunc</span><span class="op" id="3380640">(</span><span class="ident" id="3380641">d</span><span class="op" id="3380642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3380646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3380649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3380653">//&nbsp;collect&nbsp;MARKER(...):&nbsp;annotations</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380690">r</span><span class="op" id="3380691">.</span><span class="ident" id="3380692">readNotes</span><span class="op" id="3380701">(</span><span class="ident" id="3380702">src</span><span class="op" id="3380705">.</span><span class="ident" id="3380706">Comments</span><span class="op" id="3380714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380717">src</span><span class="op" id="3380720">.</span><span class="ident" id="3380721">Comments</span>&nbsp;<span class="op" id="3380730">=</span>&nbsp;<span class="builtintype" id="3380732">nil</span>&nbsp;<span class="comment" id="3380736">//&nbsp;consumed&nbsp;unassociated&nbsp;comments&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="3380788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3380791">func</span>&nbsp;<span class="op" id="3380796">(</span><span class="ident" id="3380797">r</span>&nbsp;<span class="op" id="3380799">*</span><span class="ident" id="3380800">reader</span><span class="op" id="3380806">)</span>&nbsp;<span class="ident" id="3380808">readPackage</span><span class="op" id="3380819">(</span><span class="ident" id="3380820">pkg</span>&nbsp;<span class="op" id="3380824">*</span><span class="ident" id="3380825">ast</span><span class="op" id="3380828">.</span><span class="ident" id="3380829">Package</span><span class="op" id="3380836">,</span>&nbsp;<span class="ident" id="3380838">mode</span>&nbsp;<span class="ident" id="3380843">Mode</span><span class="op" id="3380847">)</span>&nbsp;<span class="op" id="3380849">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3380852">//&nbsp;initialize&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380874">r</span><span class="op" id="3380875">.</span><span class="ident" id="3380876">filenames</span>&nbsp;<span class="op" id="3380886">=</span>&nbsp;<span class="builtinfunc" id="3380888">make</span><span class="op" id="3380892">(</span><span class="op" id="3380893">[</span><span class="op" id="3380894">]</span><span class="builtintype" id="3380895">string</span><span class="op" id="3380901">,</span>&nbsp;<span class="builtinfunc" id="3380903">len</span><span class="op" id="3380906">(</span><span class="ident" id="3380907">pkg</span><span class="op" id="3380910">.</span><span class="ident" id="3380911">Files</span><span class="op" id="3380916">)</span><span class="op" id="3380917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380920">r</span><span class="op" id="3380921">.</span><span class="ident" id="3380922">imports</span>&nbsp;<span class="op" id="3380930">=</span>&nbsp;<span class="builtinfunc" id="3380932">make</span><span class="op" id="3380936">(</span><span class="keyword" id="3380937">map</span><span class="op" id="3380940">[</span><span class="builtintype" id="3380941">string</span><span class="op" id="3380947">]</span><span class="builtintype" id="3380948">int</span><span class="op" id="3380951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380954">r</span><span class="op" id="3380955">.</span><span class="ident" id="3380956">mode</span>&nbsp;<span class="op" id="3380961">=</span>&nbsp;<span class="ident" id="3380963">mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3380969">r</span><span class="op" id="3380970">.</span><span class="ident" id="3380971">types</span>&nbsp;<span class="op" id="3380977">=</span>&nbsp;<span class="builtinfunc" id="3380979">make</span><span class="op" id="3380983">(</span><span class="keyword" id="3380984">map</span><span class="op" id="3380987">[</span><span class="builtintype" id="3380988">string</span><span class="op" id="3380994">]</span><span class="op" id="3380995">*</span><span class="ident" id="3380996">namedType</span><span class="op" id="3381005">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381008">r</span><span class="op" id="3381009">.</span><span class="ident" id="3381010">funcs</span>&nbsp;<span class="op" id="3381016">=</span>&nbsp;<span class="builtinfunc" id="3381018">make</span><span class="op" id="3381022">(</span><span class="ident" id="3381023">methodSet</span><span class="op" id="3381032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381035">r</span><span class="op" id="3381036">.</span><span class="ident" id="3381037">notes</span>&nbsp;<span class="op" id="3381043">=</span>&nbsp;<span class="builtinfunc" id="3381045">make</span><span class="op" id="3381049">(</span><span class="keyword" id="3381050">map</span><span class="op" id="3381053">[</span><span class="builtintype" id="3381054">string</span><span class="op" id="3381060">]</span><span class="op" id="3381061">[</span><span class="op" id="3381062">]</span><span class="op" id="3381063">*</span><span class="ident" id="3381064">Note</span><span class="op" id="3381068">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3381072">//&nbsp;sort&nbsp;package&nbsp;files&nbsp;before&nbsp;reading&nbsp;them&nbsp;so&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3381127">//&nbsp;result&nbsp;does&nbsp;not&nbsp;depend&nbsp;on&nbsp;map&nbsp;iteration&nbsp;order</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381177">i</span>&nbsp;<span class="op" id="3381179">:=</span>&nbsp;<span class="num" id="3381182">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3381185">for</span>&nbsp;<span class="ident" id="3381189">filename</span>&nbsp;<span class="op" id="3381198">:=</span>&nbsp;<span class="keyword" id="3381201">range</span>&nbsp;<span class="ident" id="3381207">pkg</span><span class="op" id="3381210">.</span><span class="ident" id="3381211">Files</span>&nbsp;<span class="op" id="3381217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381221">r</span><span class="op" id="3381222">.</span><span class="ident" id="3381223">filenames</span><span class="op" id="3381232">[</span><span class="ident" id="3381233">i</span><span class="op" id="3381234">]</span>&nbsp;<span class="op" id="3381236">=</span>&nbsp;<span class="ident" id="3381238">filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381249">i</span><span class="op" id="3381250">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3381254">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381257">sort</span><span class="op" id="3381261">.</span><span class="ident" id="3381262">Strings</span><span class="op" id="3381269">(</span><span class="ident" id="3381270">r</span><span class="op" id="3381271">.</span><span class="ident" id="3381272">filenames</span><span class="op" id="3381281">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3381285">//&nbsp;process&nbsp;files&nbsp;in&nbsp;sorted&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3381319">for</span>&nbsp;<span class="ident" id="3381323">_</span><span class="op" id="3381324">,</span>&nbsp;<span class="ident" id="3381326">filename</span>&nbsp;<span class="op" id="3381335">:=</span>&nbsp;<span class="keyword" id="3381338">range</span>&nbsp;<span class="ident" id="3381344">r</span><span class="op" id="3381345">.</span><span class="ident" id="3381346">filenames</span>&nbsp;<span class="op" id="3381356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381360">f</span>&nbsp;<span class="op" id="3381362">:=</span>&nbsp;<span class="ident" id="3381365">pkg</span><span class="op" id="3381368">.</span><span class="ident" id="3381369">Files</span><span class="op" id="3381374">[</span><span class="ident" id="3381375">filename</span><span class="op" id="3381383">]</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3381387">if</span>&nbsp;<span class="ident" id="3381390">mode</span><span class="op" id="3381394">&amp;</span><span class="ident" id="3381395">AllDecls</span>&nbsp;<span class="op" id="3381404">==</span>&nbsp;<span class="num" id="3381407">0</span>&nbsp;<span class="op" id="3381409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381414">r</span><span class="op" id="3381415">.</span><span class="ident" id="3381416">fileExports</span><span class="op" id="3381427">(</span><span class="ident" id="3381428">f</span><span class="op" id="3381429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3381433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381437">r</span><span class="op" id="3381438">.</span><span class="ident" id="3381439">readFile</span><span class="op" id="3381447">(</span><span class="ident" id="3381448">f</span><span class="op" id="3381449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3381452">}</span><br>
<span class="lineno">550</span><span class="op" id="3381454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3381457">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="3381537">//&nbsp;Types</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="3381547">func</span>&nbsp;<span class="ident" id="3381552">customizeRecv</span><span class="op" id="3381565">(</span><span class="ident" id="3381566">f</span>&nbsp;<span class="op" id="3381568">*</span><span class="ident" id="3381569">Func</span><span class="op" id="3381573">,</span>&nbsp;<span class="ident" id="3381575">recvTypeName</span>&nbsp;<span class="builtintype" id="3381588">string</span><span class="op" id="3381594">,</span>&nbsp;<span class="ident" id="3381596">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="3381610">bool</span><span class="op" id="3381614">,</span>&nbsp;<span class="ident" id="3381616">level</span>&nbsp;<span class="builtintype" id="3381622">int</span><span class="op" id="3381625">)</span>&nbsp;<span class="op" id="3381627">*</span><span class="ident" id="3381628">Func</span>&nbsp;<span class="op" id="3381633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3381636">if</span>&nbsp;<span class="ident" id="3381639">f</span>&nbsp;<span class="op" id="3381641">==</span>&nbsp;<span class="builtintype" id="3381644">nil</span>&nbsp;<span class="op" id="3381648">||</span>&nbsp;<span class="ident" id="3381651">f</span><span class="op" id="3381652">.</span><span class="ident" id="3381653">Decl</span>&nbsp;<span class="op" id="3381658">==</span>&nbsp;<span class="builtintype" id="3381661">nil</span>&nbsp;<span class="op" id="3381665">||</span>&nbsp;<span class="ident" id="3381668">f</span><span class="op" id="3381669">.</span><span class="ident" id="3381670">Decl</span><span class="op" id="3381674">.</span><span class="ident" id="3381675">Recv</span>&nbsp;<span class="op" id="3381680">==</span>&nbsp;<span class="builtintype" id="3381683">nil</span>&nbsp;<span class="op" id="3381687">||</span>&nbsp;<span class="builtinfunc" id="3381690">len</span><span class="op" id="3381693">(</span><span class="ident" id="3381694">f</span><span class="op" id="3381695">.</span><span class="ident" id="3381696">Decl</span><span class="op" id="3381700">.</span><span class="ident" id="3381701">Recv</span><span class="op" id="3381705">.</span><span class="ident" id="3381706">List</span><span class="op" id="3381710">)</span>&nbsp;<span class="op" id="3381712">!=</span>&nbsp;<span class="num" id="3381715">1</span>&nbsp;<span class="op" id="3381717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3381721">return</span>&nbsp;<span class="ident" id="3381728">f</span>&nbsp;<span class="comment" id="3381730">//&nbsp;shouldn&#39;t&nbsp;happen,&nbsp;but&nbsp;be&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3381764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3381768">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;and&nbsp;set&nbsp;new&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381818">newField</span>&nbsp;<span class="op" id="3381827">:=</span>&nbsp;<span class="op" id="3381830">*</span><span class="ident" id="3381831">f</span><span class="op" id="3381832">.</span><span class="ident" id="3381833">Decl</span><span class="op" id="3381837">.</span><span class="ident" id="3381838">Recv</span><span class="op" id="3381842">.</span><span class="ident" id="3381843">List</span><span class="op" id="3381847">[</span><span class="num" id="3381848">0</span><span class="op" id="3381849">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381852">origPos</span>&nbsp;<span class="op" id="3381860">:=</span>&nbsp;<span class="ident" id="3381863">newField</span><span class="op" id="3381871">.</span><span class="ident" id="3381872">Type</span><span class="op" id="3381876">.</span><span class="ident" id="3381877">Pos</span><span class="op" id="3381880">(</span><span class="op" id="3381881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381884">_</span><span class="op" id="3381885">,</span>&nbsp;<span class="ident" id="3381887">origRecvIsPtr</span>&nbsp;<span class="op" id="3381901">:=</span>&nbsp;<span class="ident" id="3381904">newField</span><span class="op" id="3381912">.</span><span class="ident" id="3381913">Type</span><span class="op" id="3381917">.</span><span class="op" id="3381918">(</span><span class="op" id="3381919">*</span><span class="ident" id="3381920">ast</span><span class="op" id="3381923">.</span><span class="ident" id="3381924">StarExpr</span><span class="op" id="3381932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3381935">newIdent</span>&nbsp;<span class="op" id="3381944">:=</span>&nbsp;<span class="op" id="3381947">&amp;</span><span class="ident" id="3381948">ast</span><span class="op" id="3381951">.</span><span class="ident" id="3381952">Ident</span><span class="op" id="3381957">{</span><span class="ident" id="3381958">NamePos</span><span class="op" id="3381965">:</span>&nbsp;<span class="ident" id="3381967">origPos</span><span class="op" id="3381974">,</span>&nbsp;<span class="ident" id="3381976">Name</span><span class="op" id="3381980">:</span>&nbsp;<span class="ident" id="3381982">recvTypeName</span><span class="op" id="3381994">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3381997">var</span>&nbsp;<span class="ident" id="3382001">typ</span>&nbsp;<span class="ident" id="3382005">ast</span><span class="op" id="3382008">.</span><span class="ident" id="3382009">Expr</span>&nbsp;<span class="op" id="3382014">=</span>&nbsp;<span class="ident" id="3382016">newIdent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3382026">if</span>&nbsp;<span class="op" id="3382029">!</span><span class="ident" id="3382030">embeddedIsPtr</span>&nbsp;<span class="op" id="3382044">&amp;&amp;</span>&nbsp;<span class="ident" id="3382047">origRecvIsPtr</span>&nbsp;<span class="op" id="3382061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3382065">newIdent</span><span class="op" id="3382073">.</span><span class="ident" id="3382074">NamePos</span><span class="op" id="3382081">++</span>&nbsp;<span class="comment" id="3382084">//&nbsp;&#39;*&#39;&nbsp;is&nbsp;one&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3382110">typ</span>&nbsp;<span class="op" id="3382114">=</span>&nbsp;<span class="op" id="3382116">&amp;</span><span class="ident" id="3382117">ast</span><span class="op" id="3382120">.</span><span class="ident" id="3382121">StarExpr</span><span class="op" id="3382129">{</span><span class="ident" id="3382130">Star</span><span class="op" id="3382134">:</span>&nbsp;<span class="ident" id="3382136">origPos</span><span class="op" id="3382143">,</span>&nbsp;<span class="ident" id="3382145">X</span><span class="op" id="3382146">:</span>&nbsp;<span class="ident" id="3382148">newIdent</span><span class="op" id="3382156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3382159">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3382162">newField</span><span class="op" id="3382170">.</span><span class="ident" id="3382171">Type</span>&nbsp;<span class="op" id="3382176">=</span>&nbsp;<span class="ident" id="3382178">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3382184">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;list&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3382249">newFieldList</span>&nbsp;<span class="op" id="3382262">:=</span>&nbsp;<span class="op" id="3382265">*</span><span class="ident" id="3382266">f</span><span class="op" id="3382267">.</span><span class="ident" id="3382268">Decl</span><span class="op" id="3382272">.</span><span class="ident" id="3382273">Recv</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3382279">newFieldList</span><span class="op" id="3382291">.</span><span class="ident" id="3382292">List</span>&nbsp;<span class="op" id="3382297">=</span>&nbsp;<span class="op" id="3382299">[</span><span class="op" id="3382300">]</span><span class="op" id="3382301">*</span><span class="ident" id="3382302">ast</span><span class="op" id="3382305">.</span><span class="ident" id="3382306">Field</span><span class="op" id="3382311">{</span><span class="op" id="3382312">&amp;</span><span class="ident" id="3382313">newField</span><span class="op" id="3382321">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3382325">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;declaration&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3382396">newFuncDecl</span>&nbsp;<span class="op" id="3382408">:=</span>&nbsp;<span class="op" id="3382411">*</span><span class="ident" id="3382412">f</span><span class="op" id="3382413">.</span><span class="ident" id="3382414">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3382420">newFuncDecl</span><span class="op" id="3382431">.</span><span class="ident" id="3382432">Recv</span>&nbsp;<span class="op" id="3382437">=</span>&nbsp;<span class="op" id="3382439">&amp;</span><span class="ident" id="3382440">newFieldList</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3382455">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;documentation&nbsp;and&nbsp;set&nbsp;new&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3382520">newF</span>&nbsp;<span class="op" id="3382525">:=</span>&nbsp;<span class="op" id="3382528">*</span><span class="ident" id="3382529">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3382532">newF</span><span class="op" id="3382536">.</span><span class="ident" id="3382537">Decl</span>&nbsp;<span class="op" id="3382542">=</span>&nbsp;<span class="op" id="3382544">&amp;</span><span class="ident" id="3382545">newFuncDecl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3382558">newF</span><span class="op" id="3382562">.</span><span class="ident" id="3382563">Recv</span>&nbsp;<span class="op" id="3382568">=</span>&nbsp;<span class="ident" id="3382570">recvString</span><span class="op" id="3382580">(</span><span class="ident" id="3382581">typ</span><span class="op" id="3382584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3382587">//&nbsp;the&nbsp;Orig&nbsp;field&nbsp;never&nbsp;changes</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3382620">newF</span><span class="op" id="3382624">.</span><span class="ident" id="3382625">Level</span>&nbsp;<span class="op" id="3382631">=</span>&nbsp;<span class="ident" id="3382633">level</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3382641">return</span>&nbsp;<span class="op" id="3382648">&amp;</span><span class="ident" id="3382649">newF</span><br>
<span class="lineno"></span><span class="op" id="3382654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="3382657">//&nbsp;collectEmbeddedMethods&nbsp;collects&nbsp;the&nbsp;embedded&nbsp;methods&nbsp;of&nbsp;typ&nbsp;in&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="3382729">//</span><br>
<span class="lineno"></span><span class="keyword" id="3382732">func</span>&nbsp;<span class="op" id="3382737">(</span><span class="ident" id="3382738">r</span>&nbsp;<span class="op" id="3382740">*</span><span class="ident" id="3382741">reader</span><span class="op" id="3382747">)</span>&nbsp;<span class="ident" id="3382749">collectEmbeddedMethods</span><span class="op" id="3382771">(</span><span class="ident" id="3382772">mset</span>&nbsp;<span class="ident" id="3382777">methodSet</span><span class="op" id="3382786">,</span>&nbsp;<span class="ident" id="3382788">typ</span>&nbsp;<span class="op" id="3382792">*</span><span class="ident" id="3382793">namedType</span><span class="op" id="3382802">,</span>&nbsp;<span class="ident" id="3382804">recvTypeName</span>&nbsp;<span class="builtintype" id="3382817">string</span><span class="op" id="3382823">,</span>&nbsp;<span class="ident" id="3382825">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="3382839">bool</span><span class="op" id="3382843">,</span>&nbsp;<span class="ident" id="3382845">level</span>&nbsp;<span class="builtintype" id="3382851">int</span><span class="op" id="3382854">,</span>&nbsp;<span class="ident" id="3382856">visited</span>&nbsp;<span class="ident" id="3382864">embeddedSet</span><span class="op" id="3382875">)</span>&nbsp;<span class="op" id="3382877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3382880">visited</span><span class="op" id="3382887">[</span><span class="ident" id="3382888">typ</span><span class="op" id="3382891">]</span>&nbsp;<span class="op" id="3382893">=</span>&nbsp;<span class="builtintype" id="3382895">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3382901">for</span>&nbsp;<span class="ident" id="3382905">embedded</span><span class="op" id="3382913">,</span>&nbsp;<span class="ident" id="3382915">isPtr</span>&nbsp;<span class="op" id="3382921">:=</span>&nbsp;<span class="keyword" id="3382924">range</span>&nbsp;<span class="ident" id="3382930">typ</span><span class="op" id="3382933">.</span><span class="ident" id="3382934">embedded</span>&nbsp;<span class="op" id="3382943">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3382947">//&nbsp;Once&nbsp;an&nbsp;embedded&nbsp;type&nbsp;is&nbsp;embedded&nbsp;as&nbsp;a&nbsp;pointer&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3383004">//&nbsp;all&nbsp;embedded&nbsp;types&nbsp;in&nbsp;those&nbsp;types&nbsp;are&nbsp;treated&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3383060">//&nbsp;pointer&nbsp;types&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;receiver&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3383116">//&nbsp;computation;&nbsp;i.e.,&nbsp;embeddedIsPtr&nbsp;is&nbsp;sticky&nbsp;for&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3383173">//&nbsp;embedding&nbsp;hierarchy.</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3383199">thisEmbeddedIsPtr</span>&nbsp;<span class="op" id="3383217">:=</span>&nbsp;<span class="ident" id="3383220">embeddedIsPtr</span>&nbsp;<span class="op" id="3383234">||</span>&nbsp;<span class="ident" id="3383237">isPtr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3383245">for</span>&nbsp;<span class="ident" id="3383249">_</span><span class="op" id="3383250">,</span>&nbsp;<span class="ident" id="3383252">m</span>&nbsp;<span class="op" id="3383254">:=</span>&nbsp;<span class="keyword" id="3383257">range</span>&nbsp;<span class="ident" id="3383263">embedded</span><span class="op" id="3383271">.</span><span class="ident" id="3383272">methods</span>&nbsp;<span class="op" id="3383280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3383285">//&nbsp;only&nbsp;top-level&nbsp;methods&nbsp;are&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3383327">if</span>&nbsp;<span class="ident" id="3383330">m</span><span class="op" id="3383331">.</span><span class="ident" id="3383332">Level</span>&nbsp;<span class="op" id="3383338">==</span>&nbsp;<span class="num" id="3383341">0</span>&nbsp;<span class="op" id="3383343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3383349">mset</span><span class="op" id="3383353">.</span><span class="ident" id="3383354">add</span><span class="op" id="3383357">(</span><span class="ident" id="3383358">customizeRecv</span><span class="op" id="3383371">(</span><span class="ident" id="3383372">m</span><span class="op" id="3383373">,</span>&nbsp;<span class="ident" id="3383375">recvTypeName</span><span class="op" id="3383387">,</span>&nbsp;<span class="ident" id="3383389">thisEmbeddedIsPtr</span><span class="op" id="3383406">,</span>&nbsp;<span class="ident" id="3383408">level</span><span class="op" id="3383413">)</span><span class="op" id="3383414">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3383419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3383423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3383427">if</span>&nbsp;<span class="op" id="3383430">!</span><span class="ident" id="3383431">visited</span><span class="op" id="3383438">[</span><span class="ident" id="3383439">embedded</span><span class="op" id="3383447">]</span>&nbsp;<span class="op" id="3383449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3383454">r</span><span class="op" id="3383455">.</span><span class="ident" id="3383456">collectEmbeddedMethods</span><span class="op" id="3383478">(</span><span class="ident" id="3383479">mset</span><span class="op" id="3383483">,</span>&nbsp;<span class="ident" id="3383485">embedded</span><span class="op" id="3383493">,</span>&nbsp;<span class="ident" id="3383495">recvTypeName</span><span class="op" id="3383507">,</span>&nbsp;<span class="ident" id="3383509">thisEmbeddedIsPtr</span><span class="op" id="3383526">,</span>&nbsp;<span class="ident" id="3383528">level</span><span class="op" id="3383533">+</span><span class="num" id="3383534">1</span><span class="op" id="3383535">,</span>&nbsp;<span class="ident" id="3383537">visited</span><span class="op" id="3383544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3383548">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3383551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3383554">delete</span><span class="op" id="3383560">(</span><span class="ident" id="3383561">visited</span><span class="op" id="3383568">,</span>&nbsp;<span class="ident" id="3383570">typ</span><span class="op" id="3383573">)</span><br>
<span class="lineno"></span><span class="op" id="3383575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3383578">//&nbsp;computeMethodSets&nbsp;determines&nbsp;the&nbsp;actual&nbsp;method&nbsp;sets&nbsp;for&nbsp;each&nbsp;type&nbsp;encountered.</span><br>
<span class="lineno">615</span><span class="comment" id="3383660">//</span><br>
<span class="lineno"></span><span class="keyword" id="3383663">func</span>&nbsp;<span class="op" id="3383668">(</span><span class="ident" id="3383669">r</span>&nbsp;<span class="op" id="3383671">*</span><span class="ident" id="3383672">reader</span><span class="op" id="3383678">)</span>&nbsp;<span class="ident" id="3383680">computeMethodSets</span><span class="op" id="3383697">(</span><span class="op" id="3383698">)</span>&nbsp;<span class="op" id="3383700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3383703">for</span>&nbsp;<span class="ident" id="3383707">_</span><span class="op" id="3383708">,</span>&nbsp;<span class="ident" id="3383710">t</span>&nbsp;<span class="op" id="3383712">:=</span>&nbsp;<span class="keyword" id="3383715">range</span>&nbsp;<span class="ident" id="3383721">r</span><span class="op" id="3383722">.</span><span class="ident" id="3383723">types</span>&nbsp;<span class="op" id="3383729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3383733">//&nbsp;collect&nbsp;embedded&nbsp;methods&nbsp;for&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3383769">if</span>&nbsp;<span class="ident" id="3383772">t</span><span class="op" id="3383773">.</span><span class="ident" id="3383774">isStruct</span>&nbsp;<span class="op" id="3383783">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3383788">//&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3383801">r</span><span class="op" id="3383802">.</span><span class="ident" id="3383803">collectEmbeddedMethods</span><span class="op" id="3383825">(</span><span class="ident" id="3383826">t</span><span class="op" id="3383827">.</span><span class="ident" id="3383828">methods</span><span class="op" id="3383835">,</span>&nbsp;<span class="ident" id="3383837">t</span><span class="op" id="3383838">,</span>&nbsp;<span class="ident" id="3383840">t</span><span class="op" id="3383841">.</span><span class="ident" id="3383842">name</span><span class="op" id="3383846">,</span>&nbsp;<span class="builtintype" id="3383848">false</span><span class="op" id="3383853">,</span>&nbsp;<span class="num" id="3383855">1</span><span class="op" id="3383856">,</span>&nbsp;<span class="builtinfunc" id="3383858">make</span><span class="op" id="3383862">(</span><span class="ident" id="3383863">embeddedSet</span><span class="op" id="3383874">)</span><span class="op" id="3383875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3383879">}</span>&nbsp;<span class="keyword" id="3383881">else</span>&nbsp;<span class="op" id="3383886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3383891">//&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3383907">//&nbsp;TODO(gri)&nbsp;fix&nbsp;this</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3383931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3383934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3383938">//&nbsp;if&nbsp;error&nbsp;was&nbsp;declared&nbsp;locally,&nbsp;don&#39;t&nbsp;treat&nbsp;it&nbsp;as&nbsp;exported&nbsp;field&nbsp;anymore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3384014">if</span>&nbsp;<span class="ident" id="3384017">r</span><span class="op" id="3384018">.</span><span class="ident" id="3384019">errorDecl</span>&nbsp;<span class="op" id="3384029">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3384033">for</span>&nbsp;<span class="ident" id="3384037">_</span><span class="op" id="3384038">,</span>&nbsp;<span class="ident" id="3384040">ityp</span>&nbsp;<span class="op" id="3384045">:=</span>&nbsp;<span class="keyword" id="3384048">range</span>&nbsp;<span class="ident" id="3384054">r</span><span class="op" id="3384055">.</span><span class="ident" id="3384056">fixlist</span>&nbsp;<span class="op" id="3384064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3384069">removeErrorField</span><span class="op" id="3384085">(</span><span class="ident" id="3384086">ityp</span><span class="op" id="3384090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3384094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3384097">}</span><br>
<span class="lineno"></span><span class="op" id="3384099">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="3384102">//&nbsp;cleanupTypes&nbsp;removes&nbsp;the&nbsp;association&nbsp;of&nbsp;functions&nbsp;and&nbsp;methods&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="3384172">//&nbsp;types&nbsp;that&nbsp;have&nbsp;no&nbsp;declaration.&nbsp;Instead,&nbsp;these&nbsp;functions&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span><span class="comment" id="3384244">//&nbsp;are&nbsp;shown&nbsp;at&nbsp;the&nbsp;package&nbsp;level.&nbsp;It&nbsp;also&nbsp;removes&nbsp;types&nbsp;with&nbsp;missing</span><br>
<span class="lineno"></span><span class="comment" id="3384314">//&nbsp;declarations&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible.</span><br>
<span class="lineno">640</span><span class="comment" id="3384356">//</span><br>
<span class="lineno"></span><span class="keyword" id="3384359">func</span>&nbsp;<span class="op" id="3384364">(</span><span class="ident" id="3384365">r</span>&nbsp;<span class="op" id="3384367">*</span><span class="ident" id="3384368">reader</span><span class="op" id="3384374">)</span>&nbsp;<span class="ident" id="3384376">cleanupTypes</span><span class="op" id="3384388">(</span><span class="op" id="3384389">)</span>&nbsp;<span class="op" id="3384391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3384394">for</span>&nbsp;<span class="ident" id="3384398">_</span><span class="op" id="3384399">,</span>&nbsp;<span class="ident" id="3384401">t</span>&nbsp;<span class="op" id="3384403">:=</span>&nbsp;<span class="keyword" id="3384406">range</span>&nbsp;<span class="ident" id="3384412">r</span><span class="op" id="3384413">.</span><span class="ident" id="3384414">types</span>&nbsp;<span class="op" id="3384420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3384424">visible</span>&nbsp;<span class="op" id="3384432">:=</span>&nbsp;<span class="ident" id="3384435">r</span><span class="op" id="3384436">.</span><span class="ident" id="3384437">isVisible</span><span class="op" id="3384446">(</span><span class="ident" id="3384447">t</span><span class="op" id="3384448">.</span><span class="ident" id="3384449">name</span><span class="op" id="3384453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3384457">if</span>&nbsp;<span class="ident" id="3384460">t</span><span class="op" id="3384461">.</span><span class="ident" id="3384462">decl</span>&nbsp;<span class="op" id="3384467">==</span>&nbsp;<span class="builtintype" id="3384470">nil</span>&nbsp;<span class="op" id="3384474">&amp;&amp;</span>&nbsp;<span class="op" id="3384477">(</span><span class="ident" id="3384478">predeclaredTypes</span><span class="op" id="3384494">[</span><span class="ident" id="3384495">t</span><span class="op" id="3384496">.</span><span class="ident" id="3384497">name</span><span class="op" id="3384501">]</span>&nbsp;<span class="op" id="3384503">||</span>&nbsp;<span class="ident" id="3384506">t</span><span class="op" id="3384507">.</span><span class="ident" id="3384508">isEmbedded</span>&nbsp;<span class="op" id="3384519">&amp;&amp;</span>&nbsp;<span class="ident" id="3384522">visible</span><span class="op" id="3384529">)</span>&nbsp;<span class="op" id="3384531">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3384536">//&nbsp;t.name&nbsp;is&nbsp;a&nbsp;predeclared&nbsp;type&nbsp;(and&nbsp;was&nbsp;not&nbsp;redeclared&nbsp;in&nbsp;this&nbsp;package),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3384613">//&nbsp;or&nbsp;it&nbsp;was&nbsp;embedded&nbsp;somewhere&nbsp;but&nbsp;its&nbsp;declaration&nbsp;is&nbsp;missing&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3384688">//&nbsp;the&nbsp;AST&nbsp;is&nbsp;incomplete):&nbsp;move&nbsp;any&nbsp;associated&nbsp;values,&nbsp;funcs,&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3384765">//&nbsp;back&nbsp;to&nbsp;the&nbsp;top-level&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;lost.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3384820">//&nbsp;1)&nbsp;move&nbsp;values</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3384841">r</span><span class="op" id="3384842">.</span><span class="ident" id="3384843">values</span>&nbsp;<span class="op" id="3384850">=</span>&nbsp;<span class="builtinfunc" id="3384852">append</span><span class="op" id="3384858">(</span><span class="ident" id="3384859">r</span><span class="op" id="3384860">.</span><span class="ident" id="3384861">values</span><span class="op" id="3384867">,</span>&nbsp;<span class="ident" id="3384869">t</span><span class="op" id="3384870">.</span><span class="ident" id="3384871">values</span><span class="op" id="3384877">...</span><span class="op" id="3384880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3384885">//&nbsp;2)&nbsp;move&nbsp;factory&nbsp;functions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3384917">for</span>&nbsp;<span class="ident" id="3384921">name</span><span class="op" id="3384925">,</span>&nbsp;<span class="ident" id="3384927">f</span>&nbsp;<span class="op" id="3384929">:=</span>&nbsp;<span class="keyword" id="3384932">range</span>&nbsp;<span class="ident" id="3384938">t</span><span class="op" id="3384939">.</span><span class="ident" id="3384940">funcs</span>&nbsp;<span class="op" id="3384946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3384952">//&nbsp;in&nbsp;a&nbsp;correct&nbsp;AST,&nbsp;package-level&nbsp;function&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3385006">//&nbsp;are&nbsp;all&nbsp;different&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;check&nbsp;for&nbsp;conflicts</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3385064">r</span><span class="op" id="3385065">.</span><span class="ident" id="3385066">funcs</span><span class="op" id="3385071">[</span><span class="ident" id="3385072">name</span><span class="op" id="3385076">]</span>&nbsp;<span class="op" id="3385078">=</span>&nbsp;<span class="ident" id="3385080">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3385085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3385090">//&nbsp;3)&nbsp;move&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3385112">for</span>&nbsp;<span class="ident" id="3385116">name</span><span class="op" id="3385120">,</span>&nbsp;<span class="ident" id="3385122">m</span>&nbsp;<span class="op" id="3385124">:=</span>&nbsp;<span class="keyword" id="3385127">range</span>&nbsp;<span class="ident" id="3385133">t</span><span class="op" id="3385134">.</span><span class="ident" id="3385135">methods</span>&nbsp;<span class="op" id="3385143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3385149">//&nbsp;don&#39;t&nbsp;overwrite&nbsp;functions&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;-&nbsp;drop&nbsp;them</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3385213">if</span>&nbsp;<span class="ident" id="3385216">_</span><span class="op" id="3385217">,</span>&nbsp;<span class="ident" id="3385219">found</span>&nbsp;<span class="op" id="3385225">:=</span>&nbsp;<span class="ident" id="3385228">r</span><span class="op" id="3385229">.</span><span class="ident" id="3385230">funcs</span><span class="op" id="3385235">[</span><span class="ident" id="3385236">name</span><span class="op" id="3385240">]</span><span class="op" id="3385241">;</span>&nbsp;<span class="op" id="3385243">!</span><span class="ident" id="3385244">found</span>&nbsp;<span class="op" id="3385250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3385257">r</span><span class="op" id="3385258">.</span><span class="ident" id="3385259">funcs</span><span class="op" id="3385264">[</span><span class="ident" id="3385265">name</span><span class="op" id="3385269">]</span>&nbsp;<span class="op" id="3385271">=</span>&nbsp;<span class="ident" id="3385273">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3385279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3385284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3385288">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3385292">//&nbsp;remove&nbsp;types&nbsp;w/o&nbsp;declaration&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3385351">if</span>&nbsp;<span class="ident" id="3385354">t</span><span class="op" id="3385355">.</span><span class="ident" id="3385356">decl</span>&nbsp;<span class="op" id="3385361">==</span>&nbsp;<span class="builtintype" id="3385364">nil</span>&nbsp;<span class="op" id="3385368">||</span>&nbsp;<span class="op" id="3385371">!</span><span class="ident" id="3385372">visible</span>&nbsp;<span class="op" id="3385380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3385385">delete</span><span class="op" id="3385391">(</span><span class="ident" id="3385392">r</span><span class="op" id="3385393">.</span><span class="ident" id="3385394">types</span><span class="op" id="3385399">,</span>&nbsp;<span class="ident" id="3385401">t</span><span class="op" id="3385402">.</span><span class="ident" id="3385403">name</span><span class="op" id="3385407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3385411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3385414">}</span><br>
<span class="lineno">670</span><span class="op" id="3385416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3385419">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="3385499">//&nbsp;Sorting</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="3385511">type</span>&nbsp;<span class="ident" id="3385516">data</span>&nbsp;<span class="keyword" id="3385521">struct</span>&nbsp;<span class="op" id="3385528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3385531">n</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3385536">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3385541">swap</span>&nbsp;<span class="keyword" id="3385546">func</span><span class="op" id="3385550">(</span><span class="ident" id="3385551">i</span><span class="op" id="3385552">,</span>&nbsp;<span class="ident" id="3385554">j</span>&nbsp;<span class="builtintype" id="3385556">int</span><span class="op" id="3385559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3385562">less</span>&nbsp;<span class="keyword" id="3385567">func</span><span class="op" id="3385571">(</span><span class="ident" id="3385572">i</span><span class="op" id="3385573">,</span>&nbsp;<span class="ident" id="3385575">j</span>&nbsp;<span class="builtintype" id="3385577">int</span><span class="op" id="3385580">)</span>&nbsp;<span class="builtintype" id="3385582">bool</span><br>
<span class="lineno"></span><span class="op" id="3385587">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="3385590">func</span>&nbsp;<span class="op" id="3385595">(</span><span class="ident" id="3385596">d</span>&nbsp;<span class="op" id="3385598">*</span><span class="ident" id="3385599">data</span><span class="op" id="3385603">)</span>&nbsp;<span class="ident" id="3385605">Len</span><span class="op" id="3385608">(</span><span class="op" id="3385609">)</span>&nbsp;<span class="builtintype" id="3385611">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3385625">{</span>&nbsp;<span class="keyword" id="3385627">return</span>&nbsp;<span class="ident" id="3385634">d</span><span class="op" id="3385635">.</span><span class="ident" id="3385636">n</span>&nbsp;<span class="op" id="3385638">}</span><br>
<span class="lineno"></span><span class="keyword" id="3385640">func</span>&nbsp;<span class="op" id="3385645">(</span><span class="ident" id="3385646">d</span>&nbsp;<span class="op" id="3385648">*</span><span class="ident" id="3385649">data</span><span class="op" id="3385653">)</span>&nbsp;<span class="ident" id="3385655">Swap</span><span class="op" id="3385659">(</span><span class="ident" id="3385660">i</span><span class="op" id="3385661">,</span>&nbsp;<span class="ident" id="3385663">j</span>&nbsp;<span class="builtintype" id="3385665">int</span><span class="op" id="3385668">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3385675">{</span>&nbsp;<span class="ident" id="3385677">d</span><span class="op" id="3385678">.</span><span class="ident" id="3385679">swap</span><span class="op" id="3385683">(</span><span class="ident" id="3385684">i</span><span class="op" id="3385685">,</span>&nbsp;<span class="ident" id="3385687">j</span><span class="op" id="3385688">)</span>&nbsp;<span class="op" id="3385690">}</span><br>
<span class="lineno"></span><span class="keyword" id="3385692">func</span>&nbsp;<span class="op" id="3385697">(</span><span class="ident" id="3385698">d</span>&nbsp;<span class="op" id="3385700">*</span><span class="ident" id="3385701">data</span><span class="op" id="3385705">)</span>&nbsp;<span class="ident" id="3385707">Less</span><span class="op" id="3385711">(</span><span class="ident" id="3385712">i</span><span class="op" id="3385713">,</span>&nbsp;<span class="ident" id="3385715">j</span>&nbsp;<span class="builtintype" id="3385717">int</span><span class="op" id="3385720">)</span>&nbsp;<span class="builtintype" id="3385722">bool</span>&nbsp;<span class="op" id="3385727">{</span>&nbsp;<span class="keyword" id="3385729">return</span>&nbsp;<span class="ident" id="3385736">d</span><span class="op" id="3385737">.</span><span class="ident" id="3385738">less</span><span class="op" id="3385742">(</span><span class="ident" id="3385743">i</span><span class="op" id="3385744">,</span>&nbsp;<span class="ident" id="3385746">j</span><span class="op" id="3385747">)</span>&nbsp;<span class="op" id="3385749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">685</span><span class="comment" id="3385752">//&nbsp;sortBy&nbsp;is&nbsp;a&nbsp;helper&nbsp;function&nbsp;for&nbsp;sorting</span><br>
<span class="lineno"></span><span class="keyword" id="3385795">func</span>&nbsp;<span class="ident" id="3385800">sortBy</span><span class="op" id="3385806">(</span><span class="ident" id="3385807">less</span>&nbsp;<span class="keyword" id="3385812">func</span><span class="op" id="3385816">(</span><span class="ident" id="3385817">i</span><span class="op" id="3385818">,</span>&nbsp;<span class="ident" id="3385820">j</span>&nbsp;<span class="builtintype" id="3385822">int</span><span class="op" id="3385825">)</span>&nbsp;<span class="builtintype" id="3385827">bool</span><span class="op" id="3385831">,</span>&nbsp;<span class="ident" id="3385833">swap</span>&nbsp;<span class="keyword" id="3385838">func</span><span class="op" id="3385842">(</span><span class="ident" id="3385843">i</span><span class="op" id="3385844">,</span>&nbsp;<span class="ident" id="3385846">j</span>&nbsp;<span class="builtintype" id="3385848">int</span><span class="op" id="3385851">)</span><span class="op" id="3385852">,</span>&nbsp;<span class="ident" id="3385854">n</span>&nbsp;<span class="builtintype" id="3385856">int</span><span class="op" id="3385859">)</span>&nbsp;<span class="op" id="3385861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3385864">sort</span><span class="op" id="3385868">.</span><span class="ident" id="3385869">Sort</span><span class="op" id="3385873">(</span><span class="op" id="3385874">&amp;</span><span class="ident" id="3385875">data</span><span class="op" id="3385879">{</span><span class="ident" id="3385880">n</span><span class="op" id="3385881">,</span>&nbsp;<span class="ident" id="3385883">swap</span><span class="op" id="3385887">,</span>&nbsp;<span class="ident" id="3385889">less</span><span class="op" id="3385893">}</span><span class="op" id="3385894">)</span><br>
<span class="lineno"></span><span class="op" id="3385896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">690</span><span class="keyword" id="3385899">func</span>&nbsp;<span class="ident" id="3385904">sortedKeys</span><span class="op" id="3385914">(</span><span class="ident" id="3385915">m</span>&nbsp;<span class="keyword" id="3385917">map</span><span class="op" id="3385920">[</span><span class="builtintype" id="3385921">string</span><span class="op" id="3385927">]</span><span class="builtintype" id="3385928">int</span><span class="op" id="3385931">)</span>&nbsp;<span class="op" id="3385933">[</span><span class="op" id="3385934">]</span><span class="builtintype" id="3385935">string</span>&nbsp;<span class="op" id="3385942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3385945">list</span>&nbsp;<span class="op" id="3385950">:=</span>&nbsp;<span class="builtinfunc" id="3385953">make</span><span class="op" id="3385957">(</span><span class="op" id="3385958">[</span><span class="op" id="3385959">]</span><span class="builtintype" id="3385960">string</span><span class="op" id="3385966">,</span>&nbsp;<span class="builtinfunc" id="3385968">len</span><span class="op" id="3385971">(</span><span class="ident" id="3385972">m</span><span class="op" id="3385973">)</span><span class="op" id="3385974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3385977">i</span>&nbsp;<span class="op" id="3385979">:=</span>&nbsp;<span class="num" id="3385982">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3385985">for</span>&nbsp;<span class="ident" id="3385989">key</span>&nbsp;<span class="op" id="3385993">:=</span>&nbsp;<span class="keyword" id="3385996">range</span>&nbsp;<span class="ident" id="3386002">m</span>&nbsp;<span class="op" id="3386004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386008">list</span><span class="op" id="3386012">[</span><span class="ident" id="3386013">i</span><span class="op" id="3386014">]</span>&nbsp;<span class="op" id="3386016">=</span>&nbsp;<span class="ident" id="3386018">key</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386024">i</span><span class="op" id="3386025">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3386029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386032">sort</span><span class="op" id="3386036">.</span><span class="ident" id="3386037">Strings</span><span class="op" id="3386044">(</span><span class="ident" id="3386045">list</span><span class="op" id="3386049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386052">return</span>&nbsp;<span class="ident" id="3386059">list</span><br>
<span class="lineno"></span><span class="op" id="3386064">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="comment" id="3386067">//&nbsp;sortingName&nbsp;returns&nbsp;the&nbsp;name&nbsp;to&nbsp;use&nbsp;when&nbsp;sorting&nbsp;d&nbsp;into&nbsp;place.</span><br>
<span class="lineno"></span><span class="comment" id="3386133">//</span><br>
<span class="lineno"></span><span class="keyword" id="3386136">func</span>&nbsp;<span class="ident" id="3386141">sortingName</span><span class="op" id="3386152">(</span><span class="ident" id="3386153">d</span>&nbsp;<span class="op" id="3386155">*</span><span class="ident" id="3386156">ast</span><span class="op" id="3386159">.</span><span class="ident" id="3386160">GenDecl</span><span class="op" id="3386167">)</span>&nbsp;<span class="builtintype" id="3386169">string</span>&nbsp;<span class="op" id="3386176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386179">if</span>&nbsp;<span class="builtinfunc" id="3386182">len</span><span class="op" id="3386185">(</span><span class="ident" id="3386186">d</span><span class="op" id="3386187">.</span><span class="ident" id="3386188">Specs</span><span class="op" id="3386193">)</span>&nbsp;<span class="op" id="3386195">==</span>&nbsp;<span class="num" id="3386198">1</span>&nbsp;<span class="op" id="3386200">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386204">if</span>&nbsp;<span class="ident" id="3386207">s</span><span class="op" id="3386208">,</span>&nbsp;<span class="ident" id="3386210">ok</span>&nbsp;<span class="op" id="3386213">:=</span>&nbsp;<span class="ident" id="3386216">d</span><span class="op" id="3386217">.</span><span class="ident" id="3386218">Specs</span><span class="op" id="3386223">[</span><span class="num" id="3386224">0</span><span class="op" id="3386225">]</span><span class="op" id="3386226">.</span><span class="op" id="3386227">(</span><span class="op" id="3386228">*</span><span class="ident" id="3386229">ast</span><span class="op" id="3386232">.</span><span class="ident" id="3386233">ValueSpec</span><span class="op" id="3386242">)</span><span class="op" id="3386243">;</span>&nbsp;<span class="ident" id="3386245">ok</span>&nbsp;<span class="op" id="3386248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386253">return</span>&nbsp;<span class="ident" id="3386260">s</span><span class="op" id="3386261">.</span><span class="ident" id="3386262">Names</span><span class="op" id="3386267">[</span><span class="num" id="3386268">0</span><span class="op" id="3386269">]</span><span class="op" id="3386270">.</span><span class="ident" id="3386271">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3386278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3386281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386284">return</span>&nbsp;<span class="string" id="3386291">&#34;&#34;</span><br>
<span class="lineno">710</span><span class="op" id="3386294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3386297">func</span>&nbsp;<span class="ident" id="3386302">sortedValues</span><span class="op" id="3386314">(</span><span class="ident" id="3386315">m</span>&nbsp;<span class="op" id="3386317">[</span><span class="op" id="3386318">]</span><span class="op" id="3386319">*</span><span class="ident" id="3386320">Value</span><span class="op" id="3386325">,</span>&nbsp;<span class="ident" id="3386327">tok</span>&nbsp;<span class="ident" id="3386331">token</span><span class="op" id="3386336">.</span><span class="ident" id="3386337">Token</span><span class="op" id="3386342">)</span>&nbsp;<span class="op" id="3386344">[</span><span class="op" id="3386345">]</span><span class="op" id="3386346">*</span><span class="ident" id="3386347">Value</span>&nbsp;<span class="op" id="3386353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386356">list</span>&nbsp;<span class="op" id="3386361">:=</span>&nbsp;<span class="builtinfunc" id="3386364">make</span><span class="op" id="3386368">(</span><span class="op" id="3386369">[</span><span class="op" id="3386370">]</span><span class="op" id="3386371">*</span><span class="ident" id="3386372">Value</span><span class="op" id="3386377">,</span>&nbsp;<span class="builtinfunc" id="3386379">len</span><span class="op" id="3386382">(</span><span class="ident" id="3386383">m</span><span class="op" id="3386384">)</span><span class="op" id="3386385">)</span>&nbsp;<span class="comment" id="3386387">//&nbsp;big&nbsp;enough&nbsp;in&nbsp;any&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386414">i</span>&nbsp;<span class="op" id="3386416">:=</span>&nbsp;<span class="num" id="3386419">0</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386422">for</span>&nbsp;<span class="ident" id="3386426">_</span><span class="op" id="3386427">,</span>&nbsp;<span class="ident" id="3386429">val</span>&nbsp;<span class="op" id="3386433">:=</span>&nbsp;<span class="keyword" id="3386436">range</span>&nbsp;<span class="ident" id="3386442">m</span>&nbsp;<span class="op" id="3386444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386448">if</span>&nbsp;<span class="ident" id="3386451">val</span><span class="op" id="3386454">.</span><span class="ident" id="3386455">Decl</span><span class="op" id="3386459">.</span><span class="ident" id="3386460">Tok</span>&nbsp;<span class="op" id="3386464">==</span>&nbsp;<span class="ident" id="3386467">tok</span>&nbsp;<span class="op" id="3386471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386476">list</span><span class="op" id="3386480">[</span><span class="ident" id="3386481">i</span><span class="op" id="3386482">]</span>&nbsp;<span class="op" id="3386484">=</span>&nbsp;<span class="ident" id="3386486">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386493">i</span><span class="op" id="3386494">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3386499">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3386502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386505">list</span>&nbsp;<span class="op" id="3386510">=</span>&nbsp;<span class="ident" id="3386512">list</span><span class="op" id="3386516">[</span><span class="num" id="3386517">0</span><span class="op" id="3386518">:</span><span class="ident" id="3386519">i</span><span class="op" id="3386520">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386524">sortBy</span><span class="op" id="3386530">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386534">func</span><span class="op" id="3386538">(</span><span class="ident" id="3386539">i</span><span class="op" id="3386540">,</span>&nbsp;<span class="ident" id="3386542">j</span>&nbsp;<span class="builtintype" id="3386544">int</span><span class="op" id="3386547">)</span>&nbsp;<span class="builtintype" id="3386549">bool</span>&nbsp;<span class="op" id="3386554">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386559">if</span>&nbsp;<span class="ident" id="3386562">ni</span><span class="op" id="3386564">,</span>&nbsp;<span class="ident" id="3386566">nj</span>&nbsp;<span class="op" id="3386569">:=</span>&nbsp;<span class="ident" id="3386572">sortingName</span><span class="op" id="3386583">(</span><span class="ident" id="3386584">list</span><span class="op" id="3386588">[</span><span class="ident" id="3386589">i</span><span class="op" id="3386590">]</span><span class="op" id="3386591">.</span><span class="ident" id="3386592">Decl</span><span class="op" id="3386596">)</span><span class="op" id="3386597">,</span>&nbsp;<span class="ident" id="3386599">sortingName</span><span class="op" id="3386610">(</span><span class="ident" id="3386611">list</span><span class="op" id="3386615">[</span><span class="ident" id="3386616">j</span><span class="op" id="3386617">]</span><span class="op" id="3386618">.</span><span class="ident" id="3386619">Decl</span><span class="op" id="3386623">)</span><span class="op" id="3386624">;</span>&nbsp;<span class="ident" id="3386626">ni</span>&nbsp;<span class="op" id="3386629">!=</span>&nbsp;<span class="ident" id="3386632">nj</span>&nbsp;<span class="op" id="3386635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386641">return</span>&nbsp;<span class="ident" id="3386648">ni</span>&nbsp;<span class="op" id="3386651">&lt;</span>&nbsp;<span class="ident" id="3386653">nj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3386659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386664">return</span>&nbsp;<span class="ident" id="3386671">list</span><span class="op" id="3386675">[</span><span class="ident" id="3386676">i</span><span class="op" id="3386677">]</span><span class="op" id="3386678">.</span><span class="ident" id="3386679">order</span>&nbsp;<span class="op" id="3386685">&lt;</span>&nbsp;<span class="ident" id="3386687">list</span><span class="op" id="3386691">[</span><span class="ident" id="3386692">j</span><span class="op" id="3386693">]</span><span class="op" id="3386694">.</span><span class="ident" id="3386695">order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3386703">}</span><span class="op" id="3386704">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386708">func</span><span class="op" id="3386712">(</span><span class="ident" id="3386713">i</span><span class="op" id="3386714">,</span>&nbsp;<span class="ident" id="3386716">j</span>&nbsp;<span class="builtintype" id="3386718">int</span><span class="op" id="3386721">)</span>&nbsp;<span class="op" id="3386723">{</span>&nbsp;<span class="ident" id="3386725">list</span><span class="op" id="3386729">[</span><span class="ident" id="3386730">i</span><span class="op" id="3386731">]</span><span class="op" id="3386732">,</span>&nbsp;<span class="ident" id="3386734">list</span><span class="op" id="3386738">[</span><span class="ident" id="3386739">j</span><span class="op" id="3386740">]</span>&nbsp;<span class="op" id="3386742">=</span>&nbsp;<span class="ident" id="3386744">list</span><span class="op" id="3386748">[</span><span class="ident" id="3386749">j</span><span class="op" id="3386750">]</span><span class="op" id="3386751">,</span>&nbsp;<span class="ident" id="3386753">list</span><span class="op" id="3386757">[</span><span class="ident" id="3386758">i</span><span class="op" id="3386759">]</span>&nbsp;<span class="op" id="3386761">}</span><span class="op" id="3386762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3386766">len</span><span class="op" id="3386769">(</span><span class="ident" id="3386770">list</span><span class="op" id="3386774">)</span><span class="op" id="3386775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3386778">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386782">return</span>&nbsp;<span class="ident" id="3386789">list</span><br>
<span class="lineno">735</span><span class="op" id="3386794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3386797">func</span>&nbsp;<span class="ident" id="3386802">sortedTypes</span><span class="op" id="3386813">(</span><span class="ident" id="3386814">m</span>&nbsp;<span class="keyword" id="3386816">map</span><span class="op" id="3386819">[</span><span class="builtintype" id="3386820">string</span><span class="op" id="3386826">]</span><span class="op" id="3386827">*</span><span class="ident" id="3386828">namedType</span><span class="op" id="3386837">,</span>&nbsp;<span class="ident" id="3386839">allMethods</span>&nbsp;<span class="builtintype" id="3386850">bool</span><span class="op" id="3386854">)</span>&nbsp;<span class="op" id="3386856">[</span><span class="op" id="3386857">]</span><span class="op" id="3386858">*</span><span class="ident" id="3386859">Type</span>&nbsp;<span class="op" id="3386864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386867">list</span>&nbsp;<span class="op" id="3386872">:=</span>&nbsp;<span class="builtinfunc" id="3386875">make</span><span class="op" id="3386879">(</span><span class="op" id="3386880">[</span><span class="op" id="3386881">]</span><span class="op" id="3386882">*</span><span class="ident" id="3386883">Type</span><span class="op" id="3386887">,</span>&nbsp;<span class="builtinfunc" id="3386889">len</span><span class="op" id="3386892">(</span><span class="ident" id="3386893">m</span><span class="op" id="3386894">)</span><span class="op" id="3386895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386898">i</span>&nbsp;<span class="op" id="3386900">:=</span>&nbsp;<span class="num" id="3386903">0</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3386906">for</span>&nbsp;<span class="ident" id="3386910">_</span><span class="op" id="3386911">,</span>&nbsp;<span class="ident" id="3386913">t</span>&nbsp;<span class="op" id="3386915">:=</span>&nbsp;<span class="keyword" id="3386918">range</span>&nbsp;<span class="ident" id="3386924">m</span>&nbsp;<span class="op" id="3386926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386930">list</span><span class="op" id="3386934">[</span><span class="ident" id="3386935">i</span><span class="op" id="3386936">]</span>&nbsp;<span class="op" id="3386938">=</span>&nbsp;<span class="op" id="3386940">&amp;</span><span class="ident" id="3386941">Type</span><span class="op" id="3386945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386950">Doc</span><span class="op" id="3386953">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386959">t</span><span class="op" id="3386960">.</span><span class="ident" id="3386961">doc</span><span class="op" id="3386964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386969">Name</span><span class="op" id="3386973">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386978">t</span><span class="op" id="3386979">.</span><span class="ident" id="3386980">name</span><span class="op" id="3386984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386989">Decl</span><span class="op" id="3386993">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3386998">t</span><span class="op" id="3386999">.</span><span class="ident" id="3387000">decl</span><span class="op" id="3387004">,</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387009">Consts</span><span class="op" id="3387015">:</span>&nbsp;&nbsp;<span class="ident" id="3387018">sortedValues</span><span class="op" id="3387030">(</span><span class="ident" id="3387031">t</span><span class="op" id="3387032">.</span><span class="ident" id="3387033">values</span><span class="op" id="3387039">,</span>&nbsp;<span class="ident" id="3387041">token</span><span class="op" id="3387046">.</span><span class="ident" id="3387047">CONST</span><span class="op" id="3387052">)</span><span class="op" id="3387053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387058">Vars</span><span class="op" id="3387062">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387067">sortedValues</span><span class="op" id="3387079">(</span><span class="ident" id="3387080">t</span><span class="op" id="3387081">.</span><span class="ident" id="3387082">values</span><span class="op" id="3387088">,</span>&nbsp;<span class="ident" id="3387090">token</span><span class="op" id="3387095">.</span><span class="ident" id="3387096">VAR</span><span class="op" id="3387099">)</span><span class="op" id="3387100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387105">Funcs</span><span class="op" id="3387110">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3387114">sortedFuncs</span><span class="op" id="3387125">(</span><span class="ident" id="3387126">t</span><span class="op" id="3387127">.</span><span class="ident" id="3387128">funcs</span><span class="op" id="3387133">,</span>&nbsp;<span class="builtintype" id="3387135">true</span><span class="op" id="3387139">)</span><span class="op" id="3387140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387145">Methods</span><span class="op" id="3387152">:</span>&nbsp;<span class="ident" id="3387154">sortedFuncs</span><span class="op" id="3387165">(</span><span class="ident" id="3387166">t</span><span class="op" id="3387167">.</span><span class="ident" id="3387168">methods</span><span class="op" id="3387175">,</span>&nbsp;<span class="ident" id="3387177">allMethods</span><span class="op" id="3387187">)</span><span class="op" id="3387188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3387192">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387196">i</span><span class="op" id="3387197">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3387201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387205">sortBy</span><span class="op" id="3387211">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3387215">func</span><span class="op" id="3387219">(</span><span class="ident" id="3387220">i</span><span class="op" id="3387221">,</span>&nbsp;<span class="ident" id="3387223">j</span>&nbsp;<span class="builtintype" id="3387225">int</span><span class="op" id="3387228">)</span>&nbsp;<span class="builtintype" id="3387230">bool</span>&nbsp;<span class="op" id="3387235">{</span>&nbsp;<span class="keyword" id="3387237">return</span>&nbsp;<span class="ident" id="3387244">list</span><span class="op" id="3387248">[</span><span class="ident" id="3387249">i</span><span class="op" id="3387250">]</span><span class="op" id="3387251">.</span><span class="ident" id="3387252">Name</span>&nbsp;<span class="op" id="3387257">&lt;</span>&nbsp;<span class="ident" id="3387259">list</span><span class="op" id="3387263">[</span><span class="ident" id="3387264">j</span><span class="op" id="3387265">]</span><span class="op" id="3387266">.</span><span class="ident" id="3387267">Name</span>&nbsp;<span class="op" id="3387272">}</span><span class="op" id="3387273">,</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3387277">func</span><span class="op" id="3387281">(</span><span class="ident" id="3387282">i</span><span class="op" id="3387283">,</span>&nbsp;<span class="ident" id="3387285">j</span>&nbsp;<span class="builtintype" id="3387287">int</span><span class="op" id="3387290">)</span>&nbsp;<span class="op" id="3387292">{</span>&nbsp;<span class="ident" id="3387294">list</span><span class="op" id="3387298">[</span><span class="ident" id="3387299">i</span><span class="op" id="3387300">]</span><span class="op" id="3387301">,</span>&nbsp;<span class="ident" id="3387303">list</span><span class="op" id="3387307">[</span><span class="ident" id="3387308">j</span><span class="op" id="3387309">]</span>&nbsp;<span class="op" id="3387311">=</span>&nbsp;<span class="ident" id="3387313">list</span><span class="op" id="3387317">[</span><span class="ident" id="3387318">j</span><span class="op" id="3387319">]</span><span class="op" id="3387320">,</span>&nbsp;<span class="ident" id="3387322">list</span><span class="op" id="3387326">[</span><span class="ident" id="3387327">i</span><span class="op" id="3387328">]</span>&nbsp;<span class="op" id="3387330">}</span><span class="op" id="3387331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3387335">len</span><span class="op" id="3387338">(</span><span class="ident" id="3387339">list</span><span class="op" id="3387343">)</span><span class="op" id="3387344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3387347">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3387351">return</span>&nbsp;<span class="ident" id="3387358">list</span><br>
<span class="lineno">760</span><span class="op" id="3387363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3387366">func</span>&nbsp;<span class="ident" id="3387371">removeStar</span><span class="op" id="3387381">(</span><span class="ident" id="3387382">s</span>&nbsp;<span class="builtintype" id="3387384">string</span><span class="op" id="3387390">)</span>&nbsp;<span class="builtintype" id="3387392">string</span>&nbsp;<span class="op" id="3387399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3387402">if</span>&nbsp;<span class="builtinfunc" id="3387405">len</span><span class="op" id="3387408">(</span><span class="ident" id="3387409">s</span><span class="op" id="3387410">)</span>&nbsp;<span class="op" id="3387412">&gt;</span>&nbsp;<span class="num" id="3387414">0</span>&nbsp;<span class="op" id="3387416">&amp;&amp;</span>&nbsp;<span class="ident" id="3387419">s</span><span class="op" id="3387420">[</span><span class="num" id="3387421">0</span><span class="op" id="3387422">]</span>&nbsp;<span class="op" id="3387424">==</span>&nbsp;<span class="string" id="3387427">&#39;*&#39;</span>&nbsp;<span class="op" id="3387431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3387435">return</span>&nbsp;<span class="ident" id="3387442">s</span><span class="op" id="3387443">[</span><span class="num" id="3387444">1</span><span class="op" id="3387445">:</span><span class="op" id="3387446">]</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3387449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3387452">return</span>&nbsp;<span class="ident" id="3387459">s</span><br>
<span class="lineno"></span><span class="op" id="3387461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3387464">func</span>&nbsp;<span class="ident" id="3387469">sortedFuncs</span><span class="op" id="3387480">(</span><span class="ident" id="3387481">m</span>&nbsp;<span class="ident" id="3387483">methodSet</span><span class="op" id="3387492">,</span>&nbsp;<span class="ident" id="3387494">allMethods</span>&nbsp;<span class="builtintype" id="3387505">bool</span><span class="op" id="3387509">)</span>&nbsp;<span class="op" id="3387511">[</span><span class="op" id="3387512">]</span><span class="op" id="3387513">*</span><span class="ident" id="3387514">Func</span>&nbsp;<span class="op" id="3387519">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387522">list</span>&nbsp;<span class="op" id="3387527">:=</span>&nbsp;<span class="builtinfunc" id="3387530">make</span><span class="op" id="3387534">(</span><span class="op" id="3387535">[</span><span class="op" id="3387536">]</span><span class="op" id="3387537">*</span><span class="ident" id="3387538">Func</span><span class="op" id="3387542">,</span>&nbsp;<span class="builtinfunc" id="3387544">len</span><span class="op" id="3387547">(</span><span class="ident" id="3387548">m</span><span class="op" id="3387549">)</span><span class="op" id="3387550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387553">i</span>&nbsp;<span class="op" id="3387555">:=</span>&nbsp;<span class="num" id="3387558">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3387561">for</span>&nbsp;<span class="ident" id="3387565">_</span><span class="op" id="3387566">,</span>&nbsp;<span class="ident" id="3387568">m</span>&nbsp;<span class="op" id="3387570">:=</span>&nbsp;<span class="keyword" id="3387573">range</span>&nbsp;<span class="ident" id="3387579">m</span>&nbsp;<span class="op" id="3387581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3387585">//&nbsp;determine&nbsp;which&nbsp;methods&nbsp;to&nbsp;include</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3387625">switch</span>&nbsp;<span class="op" id="3387632">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3387636">case</span>&nbsp;<span class="ident" id="3387641">m</span><span class="op" id="3387642">.</span><span class="ident" id="3387643">Decl</span>&nbsp;<span class="op" id="3387648">==</span>&nbsp;<span class="builtintype" id="3387651">nil</span><span class="op" id="3387654">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3387659">//&nbsp;exclude&nbsp;conflict&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3387687">case</span>&nbsp;<span class="ident" id="3387692">allMethods</span><span class="op" id="3387702">,</span>&nbsp;<span class="ident" id="3387704">m</span><span class="op" id="3387705">.</span><span class="ident" id="3387706">Level</span>&nbsp;<span class="op" id="3387712">==</span>&nbsp;<span class="num" id="3387715">0</span><span class="op" id="3387716">,</span>&nbsp;<span class="op" id="3387718">!</span><span class="ident" id="3387719">ast</span><span class="op" id="3387722">.</span><span class="ident" id="3387723">IsExported</span><span class="op" id="3387733">(</span><span class="ident" id="3387734">removeStar</span><span class="op" id="3387744">(</span><span class="ident" id="3387745">m</span><span class="op" id="3387746">.</span><span class="ident" id="3387747">Orig</span><span class="op" id="3387751">)</span><span class="op" id="3387752">)</span><span class="op" id="3387753">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3387758">//&nbsp;forced&nbsp;inclusion,&nbsp;method&nbsp;not&nbsp;embedded,&nbsp;or&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3387813">//&nbsp;embedded&nbsp;but&nbsp;original&nbsp;receiver&nbsp;type&nbsp;not&nbsp;exported</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387868">list</span><span class="op" id="3387872">[</span><span class="ident" id="3387873">i</span><span class="op" id="3387874">]</span>&nbsp;<span class="op" id="3387876">=</span>&nbsp;<span class="ident" id="3387878">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387883">i</span><span class="op" id="3387884">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3387889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3387892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387895">list</span>&nbsp;<span class="op" id="3387900">=</span>&nbsp;<span class="ident" id="3387902">list</span><span class="op" id="3387906">[</span><span class="num" id="3387907">0</span><span class="op" id="3387908">:</span><span class="ident" id="3387909">i</span><span class="op" id="3387910">]</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387913">sortBy</span><span class="op" id="3387919">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3387923">func</span><span class="op" id="3387927">(</span><span class="ident" id="3387928">i</span><span class="op" id="3387929">,</span>&nbsp;<span class="ident" id="3387931">j</span>&nbsp;<span class="builtintype" id="3387933">int</span><span class="op" id="3387936">)</span>&nbsp;<span class="builtintype" id="3387938">bool</span>&nbsp;<span class="op" id="3387943">{</span>&nbsp;<span class="keyword" id="3387945">return</span>&nbsp;<span class="ident" id="3387952">list</span><span class="op" id="3387956">[</span><span class="ident" id="3387957">i</span><span class="op" id="3387958">]</span><span class="op" id="3387959">.</span><span class="ident" id="3387960">Name</span>&nbsp;<span class="op" id="3387965">&lt;</span>&nbsp;<span class="ident" id="3387967">list</span><span class="op" id="3387971">[</span><span class="ident" id="3387972">j</span><span class="op" id="3387973">]</span><span class="op" id="3387974">.</span><span class="ident" id="3387975">Name</span>&nbsp;<span class="op" id="3387980">}</span><span class="op" id="3387981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3387985">func</span><span class="op" id="3387989">(</span><span class="ident" id="3387990">i</span><span class="op" id="3387991">,</span>&nbsp;<span class="ident" id="3387993">j</span>&nbsp;<span class="builtintype" id="3387995">int</span><span class="op" id="3387998">)</span>&nbsp;<span class="op" id="3388000">{</span>&nbsp;<span class="ident" id="3388002">list</span><span class="op" id="3388006">[</span><span class="ident" id="3388007">i</span><span class="op" id="3388008">]</span><span class="op" id="3388009">,</span>&nbsp;<span class="ident" id="3388011">list</span><span class="op" id="3388015">[</span><span class="ident" id="3388016">j</span><span class="op" id="3388017">]</span>&nbsp;<span class="op" id="3388019">=</span>&nbsp;<span class="ident" id="3388021">list</span><span class="op" id="3388025">[</span><span class="ident" id="3388026">j</span><span class="op" id="3388027">]</span><span class="op" id="3388028">,</span>&nbsp;<span class="ident" id="3388030">list</span><span class="op" id="3388034">[</span><span class="ident" id="3388035">i</span><span class="op" id="3388036">]</span>&nbsp;<span class="op" id="3388038">}</span><span class="op" id="3388039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3388043">len</span><span class="op" id="3388046">(</span><span class="ident" id="3388047">list</span><span class="op" id="3388051">)</span><span class="op" id="3388052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3388055">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3388058">return</span>&nbsp;<span class="ident" id="3388065">list</span><br>
<span class="lineno"></span><span class="op" id="3388070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3388073">//&nbsp;noteBodies&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;note&nbsp;body&nbsp;strings&nbsp;given&nbsp;a&nbsp;list&nbsp;of&nbsp;notes.</span><br>
<span class="lineno"></span><span class="comment" id="3388146">//&nbsp;This&nbsp;is&nbsp;only&nbsp;used&nbsp;to&nbsp;populate&nbsp;the&nbsp;deprecated&nbsp;Package.Bugs&nbsp;field.</span><br>
<span class="lineno">795</span><span class="comment" id="3388214">//</span><br>
<span class="lineno"></span><span class="keyword" id="3388217">func</span>&nbsp;<span class="ident" id="3388222">noteBodies</span><span class="op" id="3388232">(</span><span class="ident" id="3388233">notes</span>&nbsp;<span class="op" id="3388239">[</span><span class="op" id="3388240">]</span><span class="op" id="3388241">*</span><span class="ident" id="3388242">Note</span><span class="op" id="3388246">)</span>&nbsp;<span class="op" id="3388248">[</span><span class="op" id="3388249">]</span><span class="builtintype" id="3388250">string</span>&nbsp;<span class="op" id="3388257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3388260">var</span>&nbsp;<span class="ident" id="3388264">list</span>&nbsp;<span class="op" id="3388269">[</span><span class="op" id="3388270">]</span><span class="builtintype" id="3388271">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3388279">for</span>&nbsp;<span class="ident" id="3388283">_</span><span class="op" id="3388284">,</span>&nbsp;<span class="ident" id="3388286">n</span>&nbsp;<span class="op" id="3388288">:=</span>&nbsp;<span class="keyword" id="3388291">range</span>&nbsp;<span class="ident" id="3388297">notes</span>&nbsp;<span class="op" id="3388303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3388307">list</span>&nbsp;<span class="op" id="3388312">=</span>&nbsp;<span class="builtinfunc" id="3388314">append</span><span class="op" id="3388320">(</span><span class="ident" id="3388321">list</span><span class="op" id="3388325">,</span>&nbsp;<span class="ident" id="3388327">n</span><span class="op" id="3388328">.</span><span class="ident" id="3388329">Body</span><span class="op" id="3388333">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3388336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3388339">return</span>&nbsp;<span class="ident" id="3388346">list</span><br>
<span class="lineno"></span><span class="op" id="3388351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3388354">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">805</span><span class="comment" id="3388434">//&nbsp;Predeclared&nbsp;identifiers</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3388462">var</span>&nbsp;<span class="ident" id="3388466">predeclaredTypes</span>&nbsp;<span class="op" id="3388483">=</span>&nbsp;<span class="keyword" id="3388485">map</span><span class="op" id="3388488">[</span><span class="builtintype" id="3388489">string</span><span class="op" id="3388495">]</span><span class="builtintype" id="3388496">bool</span><span class="op" id="3388500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388503">&#34;bool&#34;</span><span class="op" id="3388509">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388517">true</span><span class="op" id="3388521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388524">&#34;byte&#34;</span><span class="op" id="3388530">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388538">true</span><span class="op" id="3388542">,</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388545">&#34;complex64&#34;</span><span class="op" id="3388556">:</span>&nbsp;&nbsp;<span class="builtintype" id="3388559">true</span><span class="op" id="3388563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388566">&#34;complex128&#34;</span><span class="op" id="3388578">:</span>&nbsp;<span class="builtintype" id="3388580">true</span><span class="op" id="3388584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388587">&#34;error&#34;</span><span class="op" id="3388594">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388601">true</span><span class="op" id="3388605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388608">&#34;float32&#34;</span><span class="op" id="3388617">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388622">true</span><span class="op" id="3388626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388629">&#34;float64&#34;</span><span class="op" id="3388638">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388643">true</span><span class="op" id="3388647">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388650">&#34;int&#34;</span><span class="op" id="3388655">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388664">true</span><span class="op" id="3388668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388671">&#34;int8&#34;</span><span class="op" id="3388677">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388685">true</span><span class="op" id="3388689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388692">&#34;int16&#34;</span><span class="op" id="3388699">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388706">true</span><span class="op" id="3388710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388713">&#34;int32&#34;</span><span class="op" id="3388720">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388727">true</span><span class="op" id="3388731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388734">&#34;int64&#34;</span><span class="op" id="3388741">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388748">true</span><span class="op" id="3388752">,</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388755">&#34;rune&#34;</span><span class="op" id="3388761">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388769">true</span><span class="op" id="3388773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388776">&#34;string&#34;</span><span class="op" id="3388784">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388790">true</span><span class="op" id="3388794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388797">&#34;uint&#34;</span><span class="op" id="3388803">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388811">true</span><span class="op" id="3388815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388818">&#34;uint8&#34;</span><span class="op" id="3388825">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388832">true</span><span class="op" id="3388836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388839">&#34;uint16&#34;</span><span class="op" id="3388847">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388853">true</span><span class="op" id="3388857">,</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388860">&#34;uint32&#34;</span><span class="op" id="3388868">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388874">true</span><span class="op" id="3388878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388881">&#34;uint64&#34;</span><span class="op" id="3388889">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388895">true</span><span class="op" id="3388899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388902">&#34;uintptr&#34;</span><span class="op" id="3388911">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388916">true</span><span class="op" id="3388920">,</span><br>
<span class="lineno"></span><span class="op" id="3388922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">830</span><span class="keyword" id="3388925">var</span>&nbsp;<span class="ident" id="3388929">predeclaredFuncs</span>&nbsp;<span class="op" id="3388946">=</span>&nbsp;<span class="keyword" id="3388948">map</span><span class="op" id="3388951">[</span><span class="builtintype" id="3388952">string</span><span class="op" id="3388958">]</span><span class="builtintype" id="3388959">bool</span><span class="op" id="3388963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388966">&#34;append&#34;</span><span class="op" id="3388974">:</span>&nbsp;&nbsp;<span class="builtintype" id="3388977">true</span><span class="op" id="3388981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3388984">&#34;cap&#34;</span><span class="op" id="3388989">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3388995">true</span><span class="op" id="3388999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389002">&#34;close&#34;</span><span class="op" id="3389009">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3389013">true</span><span class="op" id="3389017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389020">&#34;complex&#34;</span><span class="op" id="3389029">:</span>&nbsp;<span class="builtintype" id="3389031">true</span><span class="op" id="3389035">,</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389038">&#34;copy&#34;</span><span class="op" id="3389044">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3389049">true</span><span class="op" id="3389053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389056">&#34;delete&#34;</span><span class="op" id="3389064">:</span>&nbsp;&nbsp;<span class="builtintype" id="3389067">true</span><span class="op" id="3389071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389074">&#34;imag&#34;</span><span class="op" id="3389080">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3389085">true</span><span class="op" id="3389089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389092">&#34;len&#34;</span><span class="op" id="3389097">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3389103">true</span><span class="op" id="3389107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389110">&#34;make&#34;</span><span class="op" id="3389116">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3389121">true</span><span class="op" id="3389125">,</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389128">&#34;new&#34;</span><span class="op" id="3389133">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3389139">true</span><span class="op" id="3389143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389146">&#34;panic&#34;</span><span class="op" id="3389153">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3389157">true</span><span class="op" id="3389161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389164">&#34;print&#34;</span><span class="op" id="3389171">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3389175">true</span><span class="op" id="3389179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389182">&#34;println&#34;</span><span class="op" id="3389191">:</span>&nbsp;<span class="builtintype" id="3389193">true</span><span class="op" id="3389197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389200">&#34;real&#34;</span><span class="op" id="3389206">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3389211">true</span><span class="op" id="3389215">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389218">&#34;recover&#34;</span><span class="op" id="3389227">:</span>&nbsp;<span class="builtintype" id="3389229">true</span><span class="op" id="3389233">,</span><br>
<span class="lineno"></span><span class="op" id="3389235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3389238">var</span>&nbsp;<span class="ident" id="3389242">predeclaredConstants</span>&nbsp;<span class="op" id="3389263">=</span>&nbsp;<span class="keyword" id="3389265">map</span><span class="op" id="3389268">[</span><span class="builtintype" id="3389269">string</span><span class="op" id="3389275">]</span><span class="builtintype" id="3389276">bool</span><span class="op" id="3389280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389283">&#34;false&#34;</span><span class="op" id="3389290">:</span>&nbsp;<span class="builtintype" id="3389292">true</span><span class="op" id="3389296">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389299">&#34;iota&#34;</span><span class="op" id="3389305">:</span>&nbsp;&nbsp;<span class="builtintype" id="3389308">true</span><span class="op" id="3389312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389315">&#34;nil&#34;</span><span class="op" id="3389320">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3389324">true</span><span class="op" id="3389328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3389331">&#34;true&#34;</span><span class="op" id="3389337">:</span>&nbsp;&nbsp;<span class="builtintype" id="3389340">true</span><span class="op" id="3389344">,</span><br>
<span class="lineno"></span><span class="op" id="3389346">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
