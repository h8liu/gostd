<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/arch8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/arch8/console.go.html">console.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu.go.html">cpu.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu_test.go.html">cpu_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/device.go.html">device.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/exception.go.html">exception.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br_test.go.html">inst_br_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm_test.go.html">inst_imm_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg_test.go.html">inst_reg_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/int_bus.go.html">int_bus.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt.go.html">interrupt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt_test.go.html">interrupt_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/machine.go.html">machine.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/multi_core.go.html">multi_core.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page.go.html">page.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table.go.html">page_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table_test.go.html">page_table_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_test.go.html">page_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory.go.html">phy_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory_test.go.html">phy_memory_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs.go.html">regs.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs_test.go.html">regs_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/run_image.go.html">run_image.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/serial.go.html">serial.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/ticker.go.html">ticker.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory.go.html">virt_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory_test.go.html">virt_memory_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="6757076">package</span>&nbsp;<span class="ident" id="6757084">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6757091">import</span>&nbsp;<span class="op" id="6757098">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6757101">&#34;testing&#34;</span><br>
<span class="lineno">5</span><span class="op" id="6757111">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6757114">func</span>&nbsp;<span class="ident" id="6757119">TestInterrupt</span><span class="op" id="6757132">(</span><span class="ident" id="6757133">t</span>&nbsp;<span class="op" id="6757135">*</span><span class="ident" id="6757136">testing</span><span class="op" id="6757143">.</span><span class="ident" id="6757144">T</span><span class="op" id="6757145">)</span>&nbsp;<span class="op" id="6757147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757150">as</span>&nbsp;<span class="op" id="6757153">:=</span>&nbsp;<span class="keyword" id="6757156">func</span><span class="op" id="6757160">(</span><span class="ident" id="6757161">cond</span>&nbsp;<span class="builtintype" id="6757166">bool</span><span class="op" id="6757170">)</span>&nbsp;<span class="op" id="6757172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757176">if</span>&nbsp;<span class="op" id="6757179">!</span><span class="ident" id="6757180">cond</span>&nbsp;<span class="op" id="6757185">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757190">t</span><span class="op" id="6757191">.</span><span class="ident" id="6757192">Fail</span><span class="op" id="6757196">(</span><span class="op" id="6757197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757208">p</span>&nbsp;<span class="op" id="6757210">:=</span>&nbsp;<span class="ident" id="6757213">newPage</span><span class="op" id="6757220">(</span><span class="op" id="6757221">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757225">for</span>&nbsp;<span class="ident" id="6757229">i</span>&nbsp;<span class="op" id="6757231">:=</span>&nbsp;<span class="builtintype" id="6757234">byte</span><span class="op" id="6757238">(</span><span class="num" id="6757239">0</span><span class="op" id="6757240">)</span><span class="op" id="6757241">;</span>&nbsp;<span class="ident" id="6757243">i</span>&nbsp;<span class="op" id="6757245">&lt;</span>&nbsp;<span class="num" id="6757247">8</span><span class="op" id="6757248">;</span>&nbsp;<span class="ident" id="6757250">i</span><span class="op" id="6757251">++</span>&nbsp;<span class="op" id="6757254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757258">in</span>&nbsp;<span class="op" id="6757261">:=</span>&nbsp;<span class="ident" id="6757264">newInterrupt</span><span class="op" id="6757276">(</span><span class="ident" id="6757277">p</span><span class="op" id="6757278">,</span>&nbsp;<span class="ident" id="6757280">i</span><span class="op" id="6757281">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757286">has</span><span class="op" id="6757289">,</span>&nbsp;<span class="ident" id="6757291">b</span>&nbsp;<span class="op" id="6757293">:=</span>&nbsp;<span class="ident" id="6757296">in</span><span class="op" id="6757298">.</span><span class="ident" id="6757299">Poll</span><span class="op" id="6757303">(</span><span class="op" id="6757304">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757308">as</span><span class="op" id="6757310">(</span><span class="op" id="6757311">!</span><span class="ident" id="6757312">has</span>&nbsp;<span class="op" id="6757316">&amp;&amp;</span>&nbsp;<span class="ident" id="6757319">b</span>&nbsp;<span class="op" id="6757321">==</span>&nbsp;<span class="num" id="6757324">0</span><span class="op" id="6757325">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757330">in</span><span class="op" id="6757332">.</span><span class="ident" id="6757333">Enable</span><span class="op" id="6757339">(</span><span class="op" id="6757340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757344">has</span><span class="op" id="6757347">,</span>&nbsp;<span class="ident" id="6757349">b</span>&nbsp;<span class="op" id="6757351">=</span>&nbsp;<span class="ident" id="6757353">in</span><span class="op" id="6757355">.</span><span class="ident" id="6757356">Poll</span><span class="op" id="6757360">(</span><span class="op" id="6757361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757365">as</span><span class="op" id="6757367">(</span><span class="op" id="6757368">!</span><span class="ident" id="6757369">has</span>&nbsp;<span class="op" id="6757373">&amp;&amp;</span>&nbsp;<span class="ident" id="6757376">b</span>&nbsp;<span class="op" id="6757378">==</span>&nbsp;<span class="num" id="6757381">0</span><span class="op" id="6757382">)</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757387">in</span><span class="op" id="6757389">.</span><span class="ident" id="6757390">Issue</span><span class="op" id="6757395">(</span><span class="num" id="6757396">37</span><span class="op" id="6757398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757402">has</span><span class="op" id="6757405">,</span>&nbsp;<span class="ident" id="6757407">b</span>&nbsp;<span class="op" id="6757409">=</span>&nbsp;<span class="ident" id="6757411">in</span><span class="op" id="6757413">.</span><span class="ident" id="6757414">Poll</span><span class="op" id="6757418">(</span><span class="op" id="6757419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757423">as</span><span class="op" id="6757425">(</span><span class="op" id="6757426">!</span><span class="ident" id="6757427">has</span>&nbsp;<span class="op" id="6757431">&amp;&amp;</span>&nbsp;<span class="ident" id="6757434">b</span>&nbsp;<span class="op" id="6757436">==</span>&nbsp;<span class="num" id="6757439">0</span><span class="op" id="6757440">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757445">in</span><span class="op" id="6757447">.</span><span class="ident" id="6757448">EnableInt</span><span class="op" id="6757457">(</span><span class="num" id="6757458">37</span><span class="op" id="6757460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757464">has</span><span class="op" id="6757467">,</span>&nbsp;<span class="ident" id="6757469">b</span>&nbsp;<span class="op" id="6757471">=</span>&nbsp;<span class="ident" id="6757473">in</span><span class="op" id="6757475">.</span><span class="ident" id="6757476">Poll</span><span class="op" id="6757480">(</span><span class="op" id="6757481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757485">as</span><span class="op" id="6757487">(</span><span class="ident" id="6757488">has</span>&nbsp;<span class="op" id="6757492">&amp;&amp;</span>&nbsp;<span class="ident" id="6757495">b</span>&nbsp;<span class="op" id="6757497">==</span>&nbsp;<span class="num" id="6757500">37</span><span class="op" id="6757502">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757507">in</span><span class="op" id="6757509">.</span><span class="ident" id="6757510">DisableInt</span><span class="op" id="6757520">(</span><span class="num" id="6757521">37</span><span class="op" id="6757523">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757527">has</span><span class="op" id="6757530">,</span>&nbsp;<span class="ident" id="6757532">b</span>&nbsp;<span class="op" id="6757534">=</span>&nbsp;<span class="ident" id="6757536">in</span><span class="op" id="6757538">.</span><span class="ident" id="6757539">Poll</span><span class="op" id="6757543">(</span><span class="op" id="6757544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757548">as</span><span class="op" id="6757550">(</span><span class="op" id="6757551">!</span><span class="ident" id="6757552">has</span>&nbsp;<span class="op" id="6757556">&amp;&amp;</span>&nbsp;<span class="ident" id="6757559">b</span>&nbsp;<span class="op" id="6757561">==</span>&nbsp;<span class="num" id="6757564">0</span><span class="op" id="6757565">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757570">in</span><span class="op" id="6757572">.</span><span class="ident" id="6757573">EnableInt</span><span class="op" id="6757582">(</span><span class="num" id="6757583">37</span><span class="op" id="6757585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757589">in</span><span class="op" id="6757591">.</span><span class="ident" id="6757592">EnableInt</span><span class="op" id="6757601">(</span><span class="num" id="6757602">46</span><span class="op" id="6757604">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757608">in</span><span class="op" id="6757610">.</span><span class="ident" id="6757611">Issue</span><span class="op" id="6757616">(</span><span class="num" id="6757617">46</span><span class="op" id="6757619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757623">has</span><span class="op" id="6757626">,</span>&nbsp;<span class="ident" id="6757628">b</span>&nbsp;<span class="op" id="6757630">=</span>&nbsp;<span class="ident" id="6757632">in</span><span class="op" id="6757634">.</span><span class="ident" id="6757635">Poll</span><span class="op" id="6757639">(</span><span class="op" id="6757640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757644">as</span><span class="op" id="6757646">(</span><span class="ident" id="6757647">has</span>&nbsp;<span class="op" id="6757651">&amp;&amp;</span>&nbsp;<span class="ident" id="6757654">b</span>&nbsp;<span class="op" id="6757656">==</span>&nbsp;<span class="num" id="6757659">37</span><span class="op" id="6757661">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757666">in</span><span class="op" id="6757668">.</span><span class="ident" id="6757669">Clear</span><span class="op" id="6757674">(</span><span class="num" id="6757675">37</span><span class="op" id="6757677">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757681">has</span><span class="op" id="6757684">,</span>&nbsp;<span class="ident" id="6757686">b</span>&nbsp;<span class="op" id="6757688">=</span>&nbsp;<span class="ident" id="6757690">in</span><span class="op" id="6757692">.</span><span class="ident" id="6757693">Poll</span><span class="op" id="6757697">(</span><span class="op" id="6757698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757702">as</span><span class="op" id="6757704">(</span><span class="ident" id="6757705">has</span>&nbsp;<span class="op" id="6757709">&amp;&amp;</span>&nbsp;<span class="ident" id="6757712">b</span>&nbsp;<span class="op" id="6757714">==</span>&nbsp;<span class="num" id="6757717">46</span><span class="op" id="6757719">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757724">in</span><span class="op" id="6757726">.</span><span class="ident" id="6757727">Disable</span><span class="op" id="6757734">(</span><span class="op" id="6757735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757739">has</span><span class="op" id="6757742">,</span>&nbsp;<span class="ident" id="6757744">b</span>&nbsp;<span class="op" id="6757746">=</span>&nbsp;<span class="ident" id="6757748">in</span><span class="op" id="6757750">.</span><span class="ident" id="6757751">Poll</span><span class="op" id="6757755">(</span><span class="op" id="6757756">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757760">as</span><span class="op" id="6757762">(</span><span class="op" id="6757763">!</span><span class="ident" id="6757764">has</span>&nbsp;<span class="op" id="6757768">&amp;&amp;</span>&nbsp;<span class="ident" id="6757771">b</span>&nbsp;<span class="op" id="6757773">==</span>&nbsp;<span class="num" id="6757776">0</span><span class="op" id="6757777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757780">}</span><br>
<span class="lineno"></span><span class="op" id="6757782">}</span>
</div>
</body>
</html>
