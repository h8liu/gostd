<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5375026">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5375081">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5375135">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5375186">package</span>&nbsp;<span class="ident" id="5375194">regexp</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5375202">import</span>&nbsp;<span class="op" id="5375209">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5375212">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5375218">&#34;regexp/syntax&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5375234">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5375237">//&nbsp;A&nbsp;queue&nbsp;is&nbsp;a&nbsp;&#39;sparse&nbsp;array&#39;&nbsp;holding&nbsp;pending&nbsp;threads&nbsp;of&nbsp;execution.</span><br>
<span class="lineno"></span><span class="comment" id="5375306">//&nbsp;See&nbsp;http://research.swtch.com/2008/03/using-uninitialized-memory-for-fun-and.html</span><br>
<span class="lineno"></span><span class="keyword" id="5375391">type</span>&nbsp;<span class="ident" id="5375396">queue</span>&nbsp;<span class="keyword" id="5375402">struct</span>&nbsp;<span class="op" id="5375409">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5375412">sparse</span>&nbsp;<span class="op" id="5375419">[</span><span class="op" id="5375420">]</span><span class="builtintype" id="5375421">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5375429">dense</span>&nbsp;&nbsp;<span class="op" id="5375436">[</span><span class="op" id="5375437">]</span><span class="ident" id="5375438"><a href="/regexp/exec.go.html#5375676">entry</a></span><br>
<span class="lineno"></span><span class="op" id="5375444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5375447">//&nbsp;A&nbsp;entry&nbsp;is&nbsp;an&nbsp;entry&nbsp;on&nbsp;a&nbsp;queue.</span><br>
<span class="lineno">20</span><span class="comment" id="5375482">//&nbsp;It&nbsp;holds&nbsp;both&nbsp;the&nbsp;instruction&nbsp;pc&nbsp;and&nbsp;the&nbsp;actual&nbsp;thread.</span><br>
<span class="lineno"></span><span class="comment" id="5375541">//&nbsp;Some&nbsp;queue&nbsp;entries&nbsp;are&nbsp;just&nbsp;place&nbsp;holders&nbsp;so&nbsp;that&nbsp;the&nbsp;machine</span><br>
<span class="lineno"></span><span class="comment" id="5375606">//&nbsp;knows&nbsp;it&nbsp;has&nbsp;considered&nbsp;that&nbsp;pc.&nbsp;&nbsp;Such&nbsp;entries&nbsp;have&nbsp;t&nbsp;==&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="5375671">type</span>&nbsp;<span class="ident" id="5375676">entry</span>&nbsp;<span class="keyword" id="5375682">struct</span>&nbsp;<span class="op" id="5375689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5375692">pc</span>&nbsp;<span class="builtintype" id="5375695">uint32</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5375703">t</span>&nbsp;&nbsp;<span class="op" id="5375706">*</span><span class="ident" id="5375707"><a href="/regexp/exec.go.html#5375887">thread</a></span><br>
<span class="lineno"></span><span class="op" id="5375714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5375717">//&nbsp;A&nbsp;thread&nbsp;is&nbsp;the&nbsp;state&nbsp;of&nbsp;a&nbsp;single&nbsp;path&nbsp;through&nbsp;the&nbsp;machine:</span><br>
<span class="lineno"></span><span class="comment" id="5375780">//&nbsp;an&nbsp;instruction&nbsp;and&nbsp;a&nbsp;corresponding&nbsp;capture&nbsp;array.</span><br>
<span class="lineno">30</span><span class="comment" id="5375833">//&nbsp;See&nbsp;http://swtch.com/~rsc/regexp/regexp2.html</span><br>
<span class="lineno"></span><span class="keyword" id="5375882">type</span>&nbsp;<span class="ident" id="5375887">thread</span>&nbsp;<span class="keyword" id="5375894">struct</span>&nbsp;<span class="op" id="5375901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5375904">inst</span>&nbsp;<span class="op" id="5375909">*</span><span class="ident" id="5375910"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5375916">.</span><span class="ident" id="5375917">Inst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5375923">cap</span>&nbsp;&nbsp;<span class="op" id="5375928">[</span><span class="op" id="5375929">]</span><span class="builtintype" id="5375930">int</span><br>
<span class="lineno"></span><span class="op" id="5375934">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5375937">//&nbsp;A&nbsp;machine&nbsp;holds&nbsp;all&nbsp;the&nbsp;state&nbsp;during&nbsp;an&nbsp;NFA&nbsp;simulation&nbsp;for&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="5376002">type</span>&nbsp;<span class="ident" id="5376007">machine</span>&nbsp;<span class="keyword" id="5376015">struct</span>&nbsp;<span class="op" id="5376022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376025">re</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5376034">*</span><span class="ident" id="5376035"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5376047">//&nbsp;corresponding&nbsp;Regexp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376072">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5376081">*</span><span class="ident" id="5376082"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5376088">.</span><span class="ident" id="5376089">Prog</span>&nbsp;<span class="comment" id="5376094">//&nbsp;compiled&nbsp;program</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376115">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5376124">*</span><span class="ident" id="5376125"><a href="/regexp/onepass.go.html#5386585">onePassProg</a></span>&nbsp;<span class="comment" id="5376137">//&nbsp;compiled&nbsp;onepass&nbsp;program,&nbsp;or&nbsp;notOnePass</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376181">q0</span><span class="op" id="5376183">,</span>&nbsp;<span class="ident" id="5376185">q1</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5376190"><a href="/regexp/exec.go.html#5375396">queue</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5376203">//&nbsp;two&nbsp;queues&nbsp;for&nbsp;runq,&nbsp;nextq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376234">pool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5376243">[</span><span class="op" id="5376244">]</span><span class="op" id="5376245">*</span><span class="ident" id="5376246"><a href="/regexp/exec.go.html#5375887">thread</a></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5376256">//&nbsp;pool&nbsp;of&nbsp;available&nbsp;threads</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376286">matched</span>&nbsp;&nbsp;<span class="builtintype" id="5376295">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5376308">//&nbsp;whether&nbsp;a&nbsp;match&nbsp;was&nbsp;found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376338">matchcap</span>&nbsp;<span class="op" id="5376347">[</span><span class="op" id="5376348">]</span><span class="builtintype" id="5376349">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5376360">//&nbsp;capture&nbsp;information&nbsp;for&nbsp;the&nbsp;match</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5376399">//&nbsp;cached&nbsp;inputs,&nbsp;to&nbsp;avoid&nbsp;allocation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376438">inputBytes</span>&nbsp;&nbsp;<span class="ident" id="5376450"><a href="/regexp/regexp.go.html#5412762">inputBytes</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376462">inputString</span>&nbsp;<span class="ident" id="5376474"><a href="/regexp/regexp.go.html#5411918">inputString</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376487">inputReader</span>&nbsp;<span class="ident" id="5376499"><a href="/regexp/regexp.go.html#5413583">inputReader</a></span><br>
<span class="lineno">50</span><span class="op" id="5376511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5376514">func</span>&nbsp;<span class="op" id="5376519">(</span><span class="ident" id="5376520">m</span>&nbsp;<span class="op" id="5376522">*</span><span class="ident" id="5376523"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5376530">)</span>&nbsp;<span class="ident" id="5376532">newInputBytes</span><span class="op" id="5376545">(</span><span class="ident" id="5376546">b</span>&nbsp;<span class="op" id="5376548">[</span><span class="op" id="5376549">]</span><span class="builtintype" id="5376550">byte</span><span class="op" id="5376554">)</span>&nbsp;<span class="ident" id="5376556"><a href="/regexp/regexp.go.html#5411636">input</a></span>&nbsp;<span class="op" id="5376562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376565"><a href="/regexp/exec.go.html#5376520">m</a></span><span class="op" id="5376566">.</span><span class="ident" id="5376567">inputBytes</span><span class="op" id="5376577">.</span><span class="ident" id="5376578">str</span>&nbsp;<span class="op" id="5376582">=</span>&nbsp;<span class="ident" id="5376584"><a href="/regexp/exec.go.html#5376546">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5376587">return</span>&nbsp;<span class="op" id="5376594">&amp;</span><span class="ident" id="5376595"><a href="/regexp/exec.go.html#5376520">m</a></span><span class="op" id="5376596">.</span><span class="ident" id="5376597">inputBytes</span><br>
<span class="lineno">55</span><span class="op" id="5376608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5376611">func</span>&nbsp;<span class="op" id="5376616">(</span><span class="ident" id="5376617">m</span>&nbsp;<span class="op" id="5376619">*</span><span class="ident" id="5376620"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5376627">)</span>&nbsp;<span class="ident" id="5376629">newInputString</span><span class="op" id="5376643">(</span><span class="ident" id="5376644">s</span>&nbsp;<span class="builtintype" id="5376646">string</span><span class="op" id="5376652">)</span>&nbsp;<span class="ident" id="5376654"><a href="/regexp/regexp.go.html#5411636">input</a></span>&nbsp;<span class="op" id="5376660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376663"><a href="/regexp/exec.go.html#5376617">m</a></span><span class="op" id="5376664">.</span><span class="ident" id="5376665">inputString</span><span class="op" id="5376676">.</span><span class="ident" id="5376677">str</span>&nbsp;<span class="op" id="5376681">=</span>&nbsp;<span class="ident" id="5376683"><a href="/regexp/exec.go.html#5376644">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5376686">return</span>&nbsp;<span class="op" id="5376693">&amp;</span><span class="ident" id="5376694"><a href="/regexp/exec.go.html#5376617">m</a></span><span class="op" id="5376695">.</span><span class="ident" id="5376696">inputString</span><br>
<span class="lineno">60</span><span class="op" id="5376708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5376711">func</span>&nbsp;<span class="op" id="5376716">(</span><span class="ident" id="5376717">m</span>&nbsp;<span class="op" id="5376719">*</span><span class="ident" id="5376720"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5376727">)</span>&nbsp;<span class="ident" id="5376729">newInputReader</span><span class="op" id="5376743">(</span><span class="ident" id="5376744">r</span>&nbsp;<span class="ident" id="5376746"><a href="/regexp/exec.go.html#5375212">io</a></span><span class="op" id="5376748">.</span><span class="ident" id="5376749">RuneReader</span><span class="op" id="5376759">)</span>&nbsp;<span class="ident" id="5376761"><a href="/regexp/regexp.go.html#5411636">input</a></span>&nbsp;<span class="op" id="5376767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376770"><a href="/regexp/exec.go.html#5376717">m</a></span><span class="op" id="5376771">.</span><span class="ident" id="5376772">inputReader</span><span class="op" id="5376783">.</span><span class="ident" id="5376784">r</span>&nbsp;<span class="op" id="5376786">=</span>&nbsp;<span class="ident" id="5376788"><a href="/regexp/exec.go.html#5376744">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376791"><a href="/regexp/exec.go.html#5376717">m</a></span><span class="op" id="5376792">.</span><span class="ident" id="5376793">inputReader</span><span class="op" id="5376804">.</span><span class="ident" id="5376805">atEOT</span>&nbsp;<span class="op" id="5376811">=</span>&nbsp;<span class="builtintype" id="5376813">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376820"><a href="/regexp/exec.go.html#5376717">m</a></span><span class="op" id="5376821">.</span><span class="ident" id="5376822">inputReader</span><span class="op" id="5376833">.</span><span class="ident" id="5376834">pos</span>&nbsp;<span class="op" id="5376838">=</span>&nbsp;<span class="num" id="5376840">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5376843">return</span>&nbsp;<span class="op" id="5376850">&amp;</span><span class="ident" id="5376851"><a href="/regexp/exec.go.html#5376717">m</a></span><span class="op" id="5376852">.</span><span class="ident" id="5376853">inputReader</span><br>
<span class="lineno"></span><span class="op" id="5376865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5376868">//&nbsp;progMachine&nbsp;returns&nbsp;a&nbsp;new&nbsp;machine&nbsp;running&nbsp;the&nbsp;prog&nbsp;p.</span><br>
<span class="lineno">70</span><span class="keyword" id="5376925">func</span>&nbsp;<span class="ident" id="5376930">progMachine</span><span class="op" id="5376941">(</span><span class="ident" id="5376942">p</span>&nbsp;<span class="op" id="5376944">*</span><span class="ident" id="5376945"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5376951">.</span><span class="ident" id="5376952">Prog</span><span class="op" id="5376956">,</span>&nbsp;<span class="ident" id="5376958">op</span>&nbsp;<span class="op" id="5376961">*</span><span class="ident" id="5376962"><a href="/regexp/onepass.go.html#5386585">onePassProg</a></span><span class="op" id="5376973">)</span>&nbsp;<span class="op" id="5376975">*</span><span class="ident" id="5376976"><a href="/regexp/exec.go.html#5376007">machine</a></span>&nbsp;<span class="op" id="5376984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376987">m</span>&nbsp;<span class="op" id="5376989">:=</span>&nbsp;<span class="op" id="5376992">&amp;</span><span class="ident" id="5376993"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5377000">{</span><span class="ident" id="5377001">p</span><span class="op" id="5377002">:</span>&nbsp;<span class="ident" id="5377004"><a href="/regexp/exec.go.html#5376942">p</a></span><span class="op" id="5377005">,</span>&nbsp;<span class="ident" id="5377007">op</span><span class="op" id="5377009">:</span>&nbsp;<span class="ident" id="5377011"><a href="/regexp/exec.go.html#5376958">op</a></span><span class="op" id="5377013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377016">n</span>&nbsp;<span class="op" id="5377018">:=</span>&nbsp;<span class="builtinfunc" id="5377021">len</span><span class="op" id="5377024">(</span><span class="ident" id="5377025"><a href="/regexp/exec.go.html#5376987">m</a></span><span class="op" id="5377026">.</span><span class="ident" id="5377027">p</span><span class="op" id="5377028">.</span><span class="ident" id="5377029">Inst</span><span class="op" id="5377033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377036"><a href="/regexp/exec.go.html#5376987">m</a></span><span class="op" id="5377037">.</span><span class="ident" id="5377038">q0</span>&nbsp;<span class="op" id="5377041">=</span>&nbsp;<span class="ident" id="5377043"><a href="/regexp/exec.go.html#5375396">queue</a></span><span class="op" id="5377048">{</span><span class="builtinfunc" id="5377049">make</span><span class="op" id="5377053">(</span><span class="op" id="5377054">[</span><span class="op" id="5377055">]</span><span class="builtintype" id="5377056">uint32</span><span class="op" id="5377062">,</span>&nbsp;<span class="ident" id="5377064"><a href="/regexp/exec.go.html#5377016">n</a></span><span class="op" id="5377065">)</span><span class="op" id="5377066">,</span>&nbsp;<span class="builtinfunc" id="5377068">make</span><span class="op" id="5377072">(</span><span class="op" id="5377073">[</span><span class="op" id="5377074">]</span><span class="ident" id="5377075"><a href="/regexp/exec.go.html#5375676">entry</a></span><span class="op" id="5377080">,</span>&nbsp;<span class="num" id="5377082">0</span><span class="op" id="5377083">,</span>&nbsp;<span class="ident" id="5377085"><a href="/regexp/exec.go.html#5377016">n</a></span><span class="op" id="5377086">)</span><span class="op" id="5377087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377090"><a href="/regexp/exec.go.html#5376987">m</a></span><span class="op" id="5377091">.</span><span class="ident" id="5377092">q1</span>&nbsp;<span class="op" id="5377095">=</span>&nbsp;<span class="ident" id="5377097"><a href="/regexp/exec.go.html#5375396">queue</a></span><span class="op" id="5377102">{</span><span class="builtinfunc" id="5377103">make</span><span class="op" id="5377107">(</span><span class="op" id="5377108">[</span><span class="op" id="5377109">]</span><span class="builtintype" id="5377110">uint32</span><span class="op" id="5377116">,</span>&nbsp;<span class="ident" id="5377118"><a href="/regexp/exec.go.html#5377016">n</a></span><span class="op" id="5377119">)</span><span class="op" id="5377120">,</span>&nbsp;<span class="builtinfunc" id="5377122">make</span><span class="op" id="5377126">(</span><span class="op" id="5377127">[</span><span class="op" id="5377128">]</span><span class="ident" id="5377129"><a href="/regexp/exec.go.html#5375676">entry</a></span><span class="op" id="5377134">,</span>&nbsp;<span class="num" id="5377136">0</span><span class="op" id="5377137">,</span>&nbsp;<span class="ident" id="5377139"><a href="/regexp/exec.go.html#5377016">n</a></span><span class="op" id="5377140">)</span><span class="op" id="5377141">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377144">ncap</span>&nbsp;<span class="op" id="5377149">:=</span>&nbsp;<span class="ident" id="5377152"><a href="/regexp/exec.go.html#5376942">p</a></span><span class="op" id="5377153">.</span><span class="ident" id="5377154">NumCap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377162">if</span>&nbsp;<span class="ident" id="5377165"><a href="/regexp/exec.go.html#5377144">ncap</a></span>&nbsp;<span class="op" id="5377170">&lt;</span>&nbsp;<span class="num" id="5377172">2</span>&nbsp;<span class="op" id="5377174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377178"><a href="/regexp/exec.go.html#5377144">ncap</a></span>&nbsp;<span class="op" id="5377183">=</span>&nbsp;<span class="num" id="5377185">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5377188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377191"><a href="/regexp/exec.go.html#5376987">m</a></span><span class="op" id="5377192">.</span><span class="ident" id="5377193">matchcap</span>&nbsp;<span class="op" id="5377202">=</span>&nbsp;<span class="builtinfunc" id="5377204">make</span><span class="op" id="5377208">(</span><span class="op" id="5377209">[</span><span class="op" id="5377210">]</span><span class="builtintype" id="5377211">int</span><span class="op" id="5377214">,</span>&nbsp;<span class="ident" id="5377216"><a href="/regexp/exec.go.html#5377144">ncap</a></span><span class="op" id="5377220">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377223">return</span>&nbsp;<span class="ident" id="5377230"><a href="/regexp/exec.go.html#5376987">m</a></span><br>
<span class="lineno"></span><span class="op" id="5377232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5377235">func</span>&nbsp;<span class="op" id="5377240">(</span><span class="ident" id="5377241">m</span>&nbsp;<span class="op" id="5377243">*</span><span class="ident" id="5377244"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5377251">)</span>&nbsp;<span class="ident" id="5377253">init</span><span class="op" id="5377257">(</span><span class="ident" id="5377258">ncap</span>&nbsp;<span class="builtintype" id="5377263">int</span><span class="op" id="5377266">)</span>&nbsp;<span class="op" id="5377268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377271">for</span>&nbsp;<span class="ident" id="5377275">_</span><span class="op" id="5377276">,</span>&nbsp;<span class="ident" id="5377278">t</span>&nbsp;<span class="op" id="5377280">:=</span>&nbsp;<span class="keyword" id="5377283">range</span>&nbsp;<span class="ident" id="5377289"><a href="/regexp/exec.go.html#5377241">m</a></span><span class="op" id="5377290">.</span><span class="ident" id="5377291">pool</span>&nbsp;<span class="op" id="5377296">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377300"><a href="/regexp/exec.go.html#5377278">t</a></span><span class="op" id="5377301">.</span><span class="builtinfunc" id="5377302">cap</span>&nbsp;<span class="op" id="5377306">=</span>&nbsp;<span class="ident" id="5377308"><a href="/regexp/exec.go.html#5377278">t</a></span><span class="op" id="5377309">.</span><span class="builtinfunc" id="5377310">cap</span><span class="op" id="5377313">[</span><span class="op" id="5377314">:</span><span class="ident" id="5377315"><a href="/regexp/exec.go.html#5377258">ncap</a></span><span class="op" id="5377319">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5377322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377325"><a href="/regexp/exec.go.html#5377241">m</a></span><span class="op" id="5377326">.</span><span class="ident" id="5377327">matchcap</span>&nbsp;<span class="op" id="5377336">=</span>&nbsp;<span class="ident" id="5377338"><a href="/regexp/exec.go.html#5377241">m</a></span><span class="op" id="5377339">.</span><span class="ident" id="5377340">matchcap</span><span class="op" id="5377348">[</span><span class="op" id="5377349">:</span><span class="ident" id="5377350"><a href="/regexp/exec.go.html#5377258">ncap</a></span><span class="op" id="5377354">]</span><br>
<span class="lineno"></span><span class="op" id="5377356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="5377359">//&nbsp;alloc&nbsp;allocates&nbsp;a&nbsp;new&nbsp;thread&nbsp;with&nbsp;the&nbsp;given&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="5377419">//&nbsp;It&nbsp;uses&nbsp;the&nbsp;free&nbsp;pool&nbsp;if&nbsp;possible.</span><br>
<span class="lineno"></span><span class="keyword" id="5377457">func</span>&nbsp;<span class="op" id="5377462">(</span><span class="ident" id="5377463">m</span>&nbsp;<span class="op" id="5377465">*</span><span class="ident" id="5377466"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5377473">)</span>&nbsp;<span class="ident" id="5377475">alloc</span><span class="op" id="5377480">(</span><span class="ident" id="5377481">i</span>&nbsp;<span class="op" id="5377483">*</span><span class="ident" id="5377484"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5377490">.</span><span class="ident" id="5377491">Inst</span><span class="op" id="5377495">)</span>&nbsp;<span class="op" id="5377497">*</span><span class="ident" id="5377498"><a href="/regexp/exec.go.html#5375887">thread</a></span>&nbsp;<span class="op" id="5377505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377508">var</span>&nbsp;<span class="ident" id="5377512">t</span>&nbsp;<span class="op" id="5377514">*</span><span class="ident" id="5377515"><a href="/regexp/exec.go.html#5375887">thread</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377523">if</span>&nbsp;<span class="ident" id="5377526">n</span>&nbsp;<span class="op" id="5377528">:=</span>&nbsp;<span class="builtinfunc" id="5377531">len</span><span class="op" id="5377534">(</span><span class="ident" id="5377535"><a href="/regexp/exec.go.html#5377463">m</a></span><span class="op" id="5377536">.</span><span class="ident" id="5377537">pool</span><span class="op" id="5377541">)</span><span class="op" id="5377542">;</span>&nbsp;<span class="ident" id="5377544"><a href="/regexp/exec.go.html#5377526">n</a></span>&nbsp;<span class="op" id="5377546">&gt;</span>&nbsp;<span class="num" id="5377548">0</span>&nbsp;<span class="op" id="5377550">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377554"><a href="/regexp/exec.go.html#5377512">t</a></span>&nbsp;<span class="op" id="5377556">=</span>&nbsp;<span class="ident" id="5377558"><a href="/regexp/exec.go.html#5377463">m</a></span><span class="op" id="5377559">.</span><span class="ident" id="5377560">pool</span><span class="op" id="5377564">[</span><span class="ident" id="5377565"><a href="/regexp/exec.go.html#5377526">n</a></span><span class="op" id="5377566">-</span><span class="num" id="5377567">1</span><span class="op" id="5377568">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377572"><a href="/regexp/exec.go.html#5377463">m</a></span><span class="op" id="5377573">.</span><span class="ident" id="5377574">pool</span>&nbsp;<span class="op" id="5377579">=</span>&nbsp;<span class="ident" id="5377581"><a href="/regexp/exec.go.html#5377463">m</a></span><span class="op" id="5377582">.</span><span class="ident" id="5377583">pool</span><span class="op" id="5377587">[</span><span class="op" id="5377588">:</span><span class="ident" id="5377589"><a href="/regexp/exec.go.html#5377526">n</a></span><span class="op" id="5377590">-</span><span class="num" id="5377591">1</span><span class="op" id="5377592">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5377595">}</span>&nbsp;<span class="keyword" id="5377597">else</span>&nbsp;<span class="op" id="5377602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377606"><a href="/regexp/exec.go.html#5377512">t</a></span>&nbsp;<span class="op" id="5377608">=</span>&nbsp;<span class="builtinfunc" id="5377610">new</span><span class="op" id="5377613">(</span><span class="ident" id="5377614"><a href="/regexp/exec.go.html#5375887">thread</a></span><span class="op" id="5377620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377624"><a href="/regexp/exec.go.html#5377512">t</a></span><span class="op" id="5377625">.</span><span class="builtinfunc" id="5377626">cap</span>&nbsp;<span class="op" id="5377630">=</span>&nbsp;<span class="builtinfunc" id="5377632">make</span><span class="op" id="5377636">(</span><span class="op" id="5377637">[</span><span class="op" id="5377638">]</span><span class="builtintype" id="5377639">int</span><span class="op" id="5377642">,</span>&nbsp;<span class="builtinfunc" id="5377644">len</span><span class="op" id="5377647">(</span><span class="ident" id="5377648"><a href="/regexp/exec.go.html#5377463">m</a></span><span class="op" id="5377649">.</span><span class="ident" id="5377650">matchcap</span><span class="op" id="5377658">)</span><span class="op" id="5377659">,</span>&nbsp;<span class="builtinfunc" id="5377661">cap</span><span class="op" id="5377664">(</span><span class="ident" id="5377665"><a href="/regexp/exec.go.html#5377463">m</a></span><span class="op" id="5377666">.</span><span class="ident" id="5377667">matchcap</span><span class="op" id="5377675">)</span><span class="op" id="5377676">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5377679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377682"><a href="/regexp/exec.go.html#5377512">t</a></span><span class="op" id="5377683">.</span><span class="ident" id="5377684">inst</span>&nbsp;<span class="op" id="5377689">=</span>&nbsp;<span class="ident" id="5377691"><a href="/regexp/exec.go.html#5377481">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377694">return</span>&nbsp;<span class="ident" id="5377701"><a href="/regexp/exec.go.html#5377512">t</a></span><br>
<span class="lineno"></span><span class="op" id="5377703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5377706">//&nbsp;free&nbsp;returns&nbsp;t&nbsp;to&nbsp;the&nbsp;free&nbsp;pool.</span><br>
<span class="lineno"></span><span class="keyword" id="5377742">func</span>&nbsp;<span class="op" id="5377747">(</span><span class="ident" id="5377748">m</span>&nbsp;<span class="op" id="5377750">*</span><span class="ident" id="5377751"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5377758">)</span>&nbsp;<span class="ident" id="5377760">free</span><span class="op" id="5377764">(</span><span class="ident" id="5377765">t</span>&nbsp;<span class="op" id="5377767">*</span><span class="ident" id="5377768"><a href="/regexp/exec.go.html#5375887">thread</a></span><span class="op" id="5377774">)</span>&nbsp;<span class="op" id="5377776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377779"><a href="/regexp/exec.go.html#5377748">m</a></span><span class="op" id="5377780">.</span><span class="ident" id="5377781">inputBytes</span><span class="op" id="5377791">.</span><span class="ident" id="5377792">str</span>&nbsp;<span class="op" id="5377796">=</span>&nbsp;<span class="ident" id="5377798">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377803"><a href="/regexp/exec.go.html#5377748">m</a></span><span class="op" id="5377804">.</span><span class="ident" id="5377805">inputString</span><span class="op" id="5377816">.</span><span class="ident" id="5377817">str</span>&nbsp;<span class="op" id="5377821">=</span>&nbsp;<span class="string" id="5377823">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377827"><a href="/regexp/exec.go.html#5377748">m</a></span><span class="op" id="5377828">.</span><span class="ident" id="5377829">inputReader</span><span class="op" id="5377840">.</span><span class="ident" id="5377841">r</span>&nbsp;<span class="op" id="5377843">=</span>&nbsp;<span class="ident" id="5377845">nil</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377850"><a href="/regexp/exec.go.html#5377748">m</a></span><span class="op" id="5377851">.</span><span class="ident" id="5377852">pool</span>&nbsp;<span class="op" id="5377857">=</span>&nbsp;<span class="builtinfunc" id="5377859">append</span><span class="op" id="5377865">(</span><span class="ident" id="5377866"><a href="/regexp/exec.go.html#5377748">m</a></span><span class="op" id="5377867">.</span><span class="ident" id="5377868">pool</span><span class="op" id="5377872">,</span>&nbsp;<span class="ident" id="5377874"><a href="/regexp/exec.go.html#5377765">t</a></span><span class="op" id="5377875">)</span><br>
<span class="lineno"></span><span class="op" id="5377877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5377880">//&nbsp;match&nbsp;runs&nbsp;the&nbsp;machine&nbsp;over&nbsp;the&nbsp;input&nbsp;starting&nbsp;at&nbsp;pos.</span><br>
<span class="lineno"></span><span class="comment" id="5377938">//&nbsp;It&nbsp;reports&nbsp;whether&nbsp;a&nbsp;match&nbsp;was&nbsp;found.</span><br>
<span class="lineno">115</span><span class="comment" id="5377979">//&nbsp;If&nbsp;so,&nbsp;m.matchcap&nbsp;holds&nbsp;the&nbsp;submatch&nbsp;information.</span><br>
<span class="lineno"></span><span class="keyword" id="5378032">func</span>&nbsp;<span class="op" id="5378037">(</span><span class="ident" id="5378038">m</span>&nbsp;<span class="op" id="5378040">*</span><span class="ident" id="5378041"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5378048">)</span>&nbsp;<span class="ident" id="5378050">match</span><span class="op" id="5378055">(</span><span class="ident" id="5378056">i</span>&nbsp;<span class="ident" id="5378058"><a href="/regexp/regexp.go.html#5411636">input</a></span><span class="op" id="5378063">,</span>&nbsp;<span class="ident" id="5378065">pos</span>&nbsp;<span class="builtintype" id="5378069">int</span><span class="op" id="5378072">)</span>&nbsp;<span class="builtintype" id="5378074">bool</span>&nbsp;<span class="op" id="5378079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378082">startCond</span>&nbsp;<span class="op" id="5378092">:=</span>&nbsp;<span class="ident" id="5378095"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5378096">.</span><span class="ident" id="5378097">re</span><span class="op" id="5378099">.</span><span class="ident" id="5378100">cond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378106">if</span>&nbsp;<span class="ident" id="5378109"><a href="/regexp/exec.go.html#5378082">startCond</a></span>&nbsp;<span class="op" id="5378119">==</span>&nbsp;<span class="op" id="5378122">^</span><span class="ident" id="5378123"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5378129">.</span><span class="ident" id="5378130">EmptyOp</span><span class="op" id="5378137">(</span><span class="num" id="5378138">0</span><span class="op" id="5378139">)</span>&nbsp;<span class="op" id="5378141">{</span>&nbsp;<span class="comment" id="5378143">//&nbsp;impossible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378159">return</span>&nbsp;<span class="builtintype" id="5378166">false</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378176"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5378177">.</span><span class="ident" id="5378178">matched</span>&nbsp;<span class="op" id="5378186">=</span>&nbsp;<span class="builtintype" id="5378188">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378195">for</span>&nbsp;<span class="ident" id="5378199">i</span>&nbsp;<span class="op" id="5378201">:=</span>&nbsp;<span class="keyword" id="5378204">range</span>&nbsp;<span class="ident" id="5378210"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5378211">.</span><span class="ident" id="5378212">matchcap</span>&nbsp;<span class="op" id="5378221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378225"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5378226">.</span><span class="ident" id="5378227">matchcap</span><span class="op" id="5378235">[</span><span class="ident" id="5378236"><a href="/regexp/exec.go.html#5378199">i</a></span><span class="op" id="5378237">]</span>&nbsp;<span class="op" id="5378239">=</span>&nbsp;<span class="op" id="5378241">-</span><span class="num" id="5378242">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378245">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378248">runq</span><span class="op" id="5378252">,</span>&nbsp;<span class="ident" id="5378254">nextq</span>&nbsp;<span class="op" id="5378260">:=</span>&nbsp;<span class="op" id="5378263">&amp;</span><span class="ident" id="5378264"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5378265">.</span><span class="ident" id="5378266">q0</span><span class="op" id="5378268">,</span>&nbsp;<span class="op" id="5378270">&amp;</span><span class="ident" id="5378271"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5378272">.</span><span class="ident" id="5378273">q1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378277">r</span><span class="op" id="5378278">,</span>&nbsp;<span class="ident" id="5378280">r1</span>&nbsp;<span class="op" id="5378283">:=</span>&nbsp;<span class="ident" id="5378286"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span><span class="op" id="5378295">,</span>&nbsp;<span class="ident" id="5378297"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378308">width</span><span class="op" id="5378313">,</span>&nbsp;<span class="ident" id="5378315">width1</span>&nbsp;<span class="op" id="5378322">:=</span>&nbsp;<span class="num" id="5378325">0</span><span class="op" id="5378326">,</span>&nbsp;<span class="num" id="5378328">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378331"><a href="/regexp/exec.go.html#5378277">r</a></span><span class="op" id="5378332">,</span>&nbsp;<span class="ident" id="5378334"><a href="/regexp/exec.go.html#5378308">width</a></span>&nbsp;<span class="op" id="5378340">=</span>&nbsp;<span class="ident" id="5378342"><a href="/regexp/exec.go.html#5378056">i</a></span><span class="op" id="5378343">.</span><span class="ident" id="5378344">step</span><span class="op" id="5378348">(</span><span class="ident" id="5378349"><a href="/regexp/exec.go.html#5378065">pos</a></span><span class="op" id="5378352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378355">if</span>&nbsp;<span class="ident" id="5378358"><a href="/regexp/exec.go.html#5378277">r</a></span>&nbsp;<span class="op" id="5378360">!=</span>&nbsp;<span class="ident" id="5378363"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span>&nbsp;<span class="op" id="5378373">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378377"><a href="/regexp/exec.go.html#5378280">r1</a></span><span class="op" id="5378379">,</span>&nbsp;<span class="ident" id="5378381"><a href="/regexp/exec.go.html#5378315">width1</a></span>&nbsp;<span class="op" id="5378388">=</span>&nbsp;<span class="ident" id="5378390"><a href="/regexp/exec.go.html#5378056">i</a></span><span class="op" id="5378391">.</span><span class="ident" id="5378392">step</span><span class="op" id="5378396">(</span><span class="ident" id="5378397"><a href="/regexp/exec.go.html#5378065">pos</a></span>&nbsp;<span class="op" id="5378401">+</span>&nbsp;<span class="ident" id="5378403"><a href="/regexp/exec.go.html#5378308">width</a></span><span class="op" id="5378408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378414">var</span>&nbsp;<span class="ident" id="5378418">flag</span>&nbsp;<span class="ident" id="5378423"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5378429">.</span><span class="ident" id="5378430">EmptyOp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378439">if</span>&nbsp;<span class="ident" id="5378442"><a href="/regexp/exec.go.html#5378065">pos</a></span>&nbsp;<span class="op" id="5378446">==</span>&nbsp;<span class="num" id="5378449">0</span>&nbsp;<span class="op" id="5378451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378455"><a href="/regexp/exec.go.html#5378418">flag</a></span>&nbsp;<span class="op" id="5378460">=</span>&nbsp;<span class="ident" id="5378462"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5378468">.</span><span class="ident" id="5378469">EmptyOpContext</span><span class="op" id="5378483">(</span><span class="op" id="5378484">-</span><span class="num" id="5378485">1</span><span class="op" id="5378486">,</span>&nbsp;<span class="ident" id="5378488"><a href="/regexp/exec.go.html#5378277">r</a></span><span class="op" id="5378489">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378492">}</span>&nbsp;<span class="keyword" id="5378494">else</span>&nbsp;<span class="op" id="5378499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378503"><a href="/regexp/exec.go.html#5378418">flag</a></span>&nbsp;<span class="op" id="5378508">=</span>&nbsp;<span class="ident" id="5378510"><a href="/regexp/exec.go.html#5378056">i</a></span><span class="op" id="5378511">.</span><span class="ident" id="5378512">context</span><span class="op" id="5378519">(</span><span class="ident" id="5378520"><a href="/regexp/exec.go.html#5378065">pos</a></span><span class="op" id="5378523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378529">for</span>&nbsp;<span class="op" id="5378533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378537">if</span>&nbsp;<span class="builtinfunc" id="5378540">len</span><span class="op" id="5378543">(</span><span class="ident" id="5378544"><a href="/regexp/exec.go.html#5378248">runq</a></span><span class="op" id="5378548">.</span><span class="ident" id="5378549">dense</span><span class="op" id="5378554">)</span>&nbsp;<span class="op" id="5378556">==</span>&nbsp;<span class="num" id="5378559">0</span>&nbsp;<span class="op" id="5378561">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378566">if</span>&nbsp;<span class="ident" id="5378569"><a href="/regexp/exec.go.html#5378082">startCond</a></span><span class="op" id="5378578">&amp;</span><span class="ident" id="5378579"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5378585">.</span><span class="ident" id="5378586">EmptyBeginText</span>&nbsp;<span class="op" id="5378601">!=</span>&nbsp;<span class="num" id="5378604">0</span>&nbsp;<span class="op" id="5378606">&amp;&amp;</span>&nbsp;<span class="ident" id="5378609"><a href="/regexp/exec.go.html#5378065">pos</a></span>&nbsp;<span class="op" id="5378613">!=</span>&nbsp;<span class="num" id="5378616">0</span>&nbsp;<span class="op" id="5378618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5378624">//&nbsp;Anchored&nbsp;match,&nbsp;past&nbsp;beginning&nbsp;of&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378671">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378685">if</span>&nbsp;<span class="ident" id="5378688"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5378689">.</span><span class="ident" id="5378690">matched</span>&nbsp;<span class="op" id="5378698">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5378704">//&nbsp;Have&nbsp;match;&nbsp;finished&nbsp;exploring&nbsp;alternatives.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378756">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378770">if</span>&nbsp;<span class="builtinfunc" id="5378773">len</span><span class="op" id="5378776">(</span><span class="ident" id="5378777"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5378778">.</span><span class="ident" id="5378779">re</span><span class="op" id="5378781">.</span><span class="ident" id="5378782">prefix</span><span class="op" id="5378788">)</span>&nbsp;<span class="op" id="5378790">&gt;</span>&nbsp;<span class="num" id="5378792">0</span>&nbsp;<span class="op" id="5378794">&amp;&amp;</span>&nbsp;<span class="ident" id="5378797"><a href="/regexp/exec.go.html#5378280">r1</a></span>&nbsp;<span class="op" id="5378800">!=</span>&nbsp;<span class="ident" id="5378803"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5378804">.</span><span class="ident" id="5378805">re</span><span class="op" id="5378807">.</span><span class="ident" id="5378808">prefixRune</span>&nbsp;<span class="op" id="5378819">&amp;&amp;</span>&nbsp;<span class="ident" id="5378822"><a href="/regexp/exec.go.html#5378056">i</a></span><span class="op" id="5378823">.</span><span class="ident" id="5378824">canCheckPrefix</span><span class="op" id="5378838">(</span><span class="op" id="5378839">)</span>&nbsp;<span class="op" id="5378841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5378847">//&nbsp;Match&nbsp;requires&nbsp;literal&nbsp;prefix;&nbsp;fast&nbsp;search&nbsp;for&nbsp;it.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378905">advance</span>&nbsp;<span class="op" id="5378913">:=</span>&nbsp;<span class="ident" id="5378916"><a href="/regexp/exec.go.html#5378056">i</a></span><span class="op" id="5378917">.</span><span class="ident" id="5378918">index</span><span class="op" id="5378923">(</span><span class="ident" id="5378924"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5378925">.</span><span class="ident" id="5378926">re</span><span class="op" id="5378928">,</span>&nbsp;<span class="ident" id="5378930"><a href="/regexp/exec.go.html#5378065">pos</a></span><span class="op" id="5378933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378939">if</span>&nbsp;<span class="ident" id="5378942"><a href="/regexp/exec.go.html#5378905">advance</a></span>&nbsp;<span class="op" id="5378950">&lt;</span>&nbsp;<span class="num" id="5378952">0</span>&nbsp;<span class="op" id="5378954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378961">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378977"><a href="/regexp/exec.go.html#5378065">pos</a></span>&nbsp;<span class="op" id="5378981">+=</span>&nbsp;<span class="ident" id="5378984"><a href="/regexp/exec.go.html#5378905">advance</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378996"><a href="/regexp/exec.go.html#5378277">r</a></span><span class="op" id="5378997">,</span>&nbsp;<span class="ident" id="5378999"><a href="/regexp/exec.go.html#5378308">width</a></span>&nbsp;<span class="op" id="5379005">=</span>&nbsp;<span class="ident" id="5379007"><a href="/regexp/exec.go.html#5378056">i</a></span><span class="op" id="5379008">.</span><span class="ident" id="5379009">step</span><span class="op" id="5379013">(</span><span class="ident" id="5379014"><a href="/regexp/exec.go.html#5378065">pos</a></span><span class="op" id="5379017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379023"><a href="/regexp/exec.go.html#5378280">r1</a></span><span class="op" id="5379025">,</span>&nbsp;<span class="ident" id="5379027"><a href="/regexp/exec.go.html#5378315">width1</a></span>&nbsp;<span class="op" id="5379034">=</span>&nbsp;<span class="ident" id="5379036"><a href="/regexp/exec.go.html#5378056">i</a></span><span class="op" id="5379037">.</span><span class="ident" id="5379038">step</span><span class="op" id="5379042">(</span><span class="ident" id="5379043"><a href="/regexp/exec.go.html#5378065">pos</a></span>&nbsp;<span class="op" id="5379047">+</span>&nbsp;<span class="ident" id="5379049"><a href="/regexp/exec.go.html#5378308">width</a></span><span class="op" id="5379054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5379059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5379063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5379067">if</span>&nbsp;<span class="op" id="5379070">!</span><span class="ident" id="5379071"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5379072">.</span><span class="ident" id="5379073">matched</span>&nbsp;<span class="op" id="5379081">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5379086">if</span>&nbsp;<span class="builtinfunc" id="5379089">len</span><span class="op" id="5379092">(</span><span class="ident" id="5379093"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5379094">.</span><span class="ident" id="5379095">matchcap</span><span class="op" id="5379103">)</span>&nbsp;<span class="op" id="5379105">&gt;</span>&nbsp;<span class="num" id="5379107">0</span>&nbsp;<span class="op" id="5379109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379115"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5379116">.</span><span class="ident" id="5379117">matchcap</span><span class="op" id="5379125">[</span><span class="num" id="5379126">0</span><span class="op" id="5379127">]</span>&nbsp;<span class="op" id="5379129">=</span>&nbsp;<span class="ident" id="5379131"><a href="/regexp/exec.go.html#5378065">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5379138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379143"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5379144">.</span><span class="ident" id="5379145">add</span><span class="op" id="5379148">(</span><span class="ident" id="5379149"><a href="/regexp/exec.go.html#5378248">runq</a></span><span class="op" id="5379153">,</span>&nbsp;<span class="builtintype" id="5379155">uint32</span><span class="op" id="5379161">(</span><span class="ident" id="5379162"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5379163">.</span><span class="ident" id="5379164">p</span><span class="op" id="5379165">.</span><span class="ident" id="5379166">Start</span><span class="op" id="5379171">)</span><span class="op" id="5379172">,</span>&nbsp;<span class="ident" id="5379174"><a href="/regexp/exec.go.html#5378065">pos</a></span><span class="op" id="5379177">,</span>&nbsp;<span class="ident" id="5379179"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5379180">.</span><span class="ident" id="5379181">matchcap</span><span class="op" id="5379189">,</span>&nbsp;<span class="ident" id="5379191"><a href="/regexp/exec.go.html#5378418">flag</a></span><span class="op" id="5379195">,</span>&nbsp;<span class="ident" id="5379197">nil</span><span class="op" id="5379200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5379204">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379208"><a href="/regexp/exec.go.html#5378418">flag</a></span>&nbsp;<span class="op" id="5379213">=</span>&nbsp;<span class="ident" id="5379215"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5379221">.</span><span class="ident" id="5379222">EmptyOpContext</span><span class="op" id="5379236">(</span><span class="ident" id="5379237"><a href="/regexp/exec.go.html#5378277">r</a></span><span class="op" id="5379238">,</span>&nbsp;<span class="ident" id="5379240"><a href="/regexp/exec.go.html#5378280">r1</a></span><span class="op" id="5379242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379246"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5379247">.</span><span class="ident" id="5379248">step</span><span class="op" id="5379252">(</span><span class="ident" id="5379253"><a href="/regexp/exec.go.html#5378248">runq</a></span><span class="op" id="5379257">,</span>&nbsp;<span class="ident" id="5379259"><a href="/regexp/exec.go.html#5378254">nextq</a></span><span class="op" id="5379264">,</span>&nbsp;<span class="ident" id="5379266"><a href="/regexp/exec.go.html#5378065">pos</a></span><span class="op" id="5379269">,</span>&nbsp;<span class="ident" id="5379271"><a href="/regexp/exec.go.html#5378065">pos</a></span><span class="op" id="5379274">+</span><span class="ident" id="5379275"><a href="/regexp/exec.go.html#5378308">width</a></span><span class="op" id="5379280">,</span>&nbsp;<span class="ident" id="5379282"><a href="/regexp/exec.go.html#5378277">r</a></span><span class="op" id="5379283">,</span>&nbsp;<span class="ident" id="5379285"><a href="/regexp/exec.go.html#5378418">flag</a></span><span class="op" id="5379289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5379293">if</span>&nbsp;<span class="ident" id="5379296"><a href="/regexp/exec.go.html#5378308">width</a></span>&nbsp;<span class="op" id="5379302">==</span>&nbsp;<span class="num" id="5379305">0</span>&nbsp;<span class="op" id="5379307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5379312">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5379320">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5379324">if</span>&nbsp;<span class="builtinfunc" id="5379327">len</span><span class="op" id="5379330">(</span><span class="ident" id="5379331"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5379332">.</span><span class="ident" id="5379333">matchcap</span><span class="op" id="5379341">)</span>&nbsp;<span class="op" id="5379343">==</span>&nbsp;<span class="num" id="5379346">0</span>&nbsp;<span class="op" id="5379348">&amp;&amp;</span>&nbsp;<span class="ident" id="5379351"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5379352">.</span><span class="ident" id="5379353">matched</span>&nbsp;<span class="op" id="5379361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5379366">//&nbsp;Found&nbsp;a&nbsp;match&nbsp;and&nbsp;not&nbsp;paying&nbsp;attention</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5379411">//&nbsp;to&nbsp;where&nbsp;it&nbsp;is,&nbsp;so&nbsp;any&nbsp;match&nbsp;will&nbsp;do.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5379455">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5379463">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379467"><a href="/regexp/exec.go.html#5378065">pos</a></span>&nbsp;<span class="op" id="5379471">+=</span>&nbsp;<span class="ident" id="5379474"><a href="/regexp/exec.go.html#5378308">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379482"><a href="/regexp/exec.go.html#5378277">r</a></span><span class="op" id="5379483">,</span>&nbsp;<span class="ident" id="5379485"><a href="/regexp/exec.go.html#5378308">width</a></span>&nbsp;<span class="op" id="5379491">=</span>&nbsp;<span class="ident" id="5379493"><a href="/regexp/exec.go.html#5378280">r1</a></span><span class="op" id="5379495">,</span>&nbsp;<span class="ident" id="5379497"><a href="/regexp/exec.go.html#5378315">width1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5379506">if</span>&nbsp;<span class="ident" id="5379509"><a href="/regexp/exec.go.html#5378277">r</a></span>&nbsp;<span class="op" id="5379511">!=</span>&nbsp;<span class="ident" id="5379514"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span>&nbsp;<span class="op" id="5379524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379529"><a href="/regexp/exec.go.html#5378280">r1</a></span><span class="op" id="5379531">,</span>&nbsp;<span class="ident" id="5379533"><a href="/regexp/exec.go.html#5378315">width1</a></span>&nbsp;<span class="op" id="5379540">=</span>&nbsp;<span class="ident" id="5379542"><a href="/regexp/exec.go.html#5378056">i</a></span><span class="op" id="5379543">.</span><span class="ident" id="5379544">step</span><span class="op" id="5379548">(</span><span class="ident" id="5379549"><a href="/regexp/exec.go.html#5378065">pos</a></span>&nbsp;<span class="op" id="5379553">+</span>&nbsp;<span class="ident" id="5379555"><a href="/regexp/exec.go.html#5378308">width</a></span><span class="op" id="5379560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5379564">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379568"><a href="/regexp/exec.go.html#5378248">runq</a></span><span class="op" id="5379572">,</span>&nbsp;<span class="ident" id="5379574"><a href="/regexp/exec.go.html#5378254">nextq</a></span>&nbsp;<span class="op" id="5379580">=</span>&nbsp;<span class="ident" id="5379582"><a href="/regexp/exec.go.html#5378254">nextq</a></span><span class="op" id="5379587">,</span>&nbsp;<span class="ident" id="5379589"><a href="/regexp/exec.go.html#5378248">runq</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5379595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379598"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5379599">.</span><span class="ident" id="5379600">clear</span><span class="op" id="5379605">(</span><span class="ident" id="5379606"><a href="/regexp/exec.go.html#5378254">nextq</a></span><span class="op" id="5379611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5379614">return</span>&nbsp;<span class="ident" id="5379621"><a href="/regexp/exec.go.html#5378038">m</a></span><span class="op" id="5379622">.</span><span class="ident" id="5379623">matched</span><br>
<span class="lineno"></span><span class="op" id="5379631">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="comment" id="5379634">//&nbsp;clear&nbsp;frees&nbsp;all&nbsp;threads&nbsp;on&nbsp;the&nbsp;thread&nbsp;queue.</span><br>
<span class="lineno"></span><span class="keyword" id="5379682">func</span>&nbsp;<span class="op" id="5379687">(</span><span class="ident" id="5379688">m</span>&nbsp;<span class="op" id="5379690">*</span><span class="ident" id="5379691"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5379698">)</span>&nbsp;<span class="ident" id="5379700">clear</span><span class="op" id="5379705">(</span><span class="ident" id="5379706">q</span>&nbsp;<span class="op" id="5379708">*</span><span class="ident" id="5379709"><a href="/regexp/exec.go.html#5375396">queue</a></span><span class="op" id="5379714">)</span>&nbsp;<span class="op" id="5379716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5379719">for</span>&nbsp;<span class="ident" id="5379723">_</span><span class="op" id="5379724">,</span>&nbsp;<span class="ident" id="5379726">d</span>&nbsp;<span class="op" id="5379728">:=</span>&nbsp;<span class="keyword" id="5379731">range</span>&nbsp;<span class="ident" id="5379737"><a href="/regexp/exec.go.html#5379706">q</a></span><span class="op" id="5379738">.</span><span class="ident" id="5379739">dense</span>&nbsp;<span class="op" id="5379745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5379749">if</span>&nbsp;<span class="ident" id="5379752"><a href="/regexp/exec.go.html#5379726">d</a></span><span class="op" id="5379753">.</span><span class="ident" id="5379754">t</span>&nbsp;<span class="op" id="5379756">!=</span>&nbsp;<span class="ident" id="5379759">nil</span>&nbsp;<span class="op" id="5379763">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5379768">//&nbsp;m.free(d.t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379786"><a href="/regexp/exec.go.html#5379688">m</a></span><span class="op" id="5379787">.</span><span class="ident" id="5379788">pool</span>&nbsp;<span class="op" id="5379793">=</span>&nbsp;<span class="builtinfunc" id="5379795">append</span><span class="op" id="5379801">(</span><span class="ident" id="5379802"><a href="/regexp/exec.go.html#5379688">m</a></span><span class="op" id="5379803">.</span><span class="ident" id="5379804">pool</span><span class="op" id="5379808">,</span>&nbsp;<span class="ident" id="5379810"><a href="/regexp/exec.go.html#5379726">d</a></span><span class="op" id="5379811">.</span><span class="ident" id="5379812">t</span><span class="op" id="5379813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5379817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5379820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5379823"><a href="/regexp/exec.go.html#5379706">q</a></span><span class="op" id="5379824">.</span><span class="ident" id="5379825">dense</span>&nbsp;<span class="op" id="5379831">=</span>&nbsp;<span class="ident" id="5379833"><a href="/regexp/exec.go.html#5379706">q</a></span><span class="op" id="5379834">.</span><span class="ident" id="5379835">dense</span><span class="op" id="5379840">[</span><span class="op" id="5379841">:</span><span class="num" id="5379842">0</span><span class="op" id="5379843">]</span><br>
<span class="lineno">195</span><span class="op" id="5379845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5379848">//&nbsp;step&nbsp;executes&nbsp;one&nbsp;step&nbsp;of&nbsp;the&nbsp;machine,&nbsp;running&nbsp;each&nbsp;of&nbsp;the&nbsp;threads</span><br>
<span class="lineno"></span><span class="comment" id="5379918">//&nbsp;on&nbsp;runq&nbsp;and&nbsp;appending&nbsp;new&nbsp;threads&nbsp;to&nbsp;nextq.</span><br>
<span class="lineno"></span><span class="comment" id="5379965">//&nbsp;The&nbsp;step&nbsp;processes&nbsp;the&nbsp;rune&nbsp;c&nbsp;(which&nbsp;may&nbsp;be&nbsp;endOfText),</span><br>
<span class="lineno">200</span><span class="comment" id="5380024">//&nbsp;which&nbsp;starts&nbsp;at&nbsp;position&nbsp;pos&nbsp;and&nbsp;ends&nbsp;at&nbsp;nextPos.</span><br>
<span class="lineno"></span><span class="comment" id="5380077">//&nbsp;nextCond&nbsp;gives&nbsp;the&nbsp;setting&nbsp;for&nbsp;the&nbsp;empty-width&nbsp;flags&nbsp;after&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="5380142">func</span>&nbsp;<span class="op" id="5380147">(</span><span class="ident" id="5380148">m</span>&nbsp;<span class="op" id="5380150">*</span><span class="ident" id="5380151"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5380158">)</span>&nbsp;<span class="ident" id="5380160">step</span><span class="op" id="5380164">(</span><span class="ident" id="5380165">runq</span><span class="op" id="5380169">,</span>&nbsp;<span class="ident" id="5380171">nextq</span>&nbsp;<span class="op" id="5380177">*</span><span class="ident" id="5380178"><a href="/regexp/exec.go.html#5375396">queue</a></span><span class="op" id="5380183">,</span>&nbsp;<span class="ident" id="5380185">pos</span><span class="op" id="5380188">,</span>&nbsp;<span class="ident" id="5380190">nextPos</span>&nbsp;<span class="builtintype" id="5380198">int</span><span class="op" id="5380201">,</span>&nbsp;<span class="ident" id="5380203">c</span>&nbsp;<span class="builtintype" id="5380205">rune</span><span class="op" id="5380209">,</span>&nbsp;<span class="ident" id="5380211">nextCond</span>&nbsp;<span class="ident" id="5380220"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5380226">.</span><span class="ident" id="5380227">EmptyOp</span><span class="op" id="5380234">)</span>&nbsp;<span class="op" id="5380236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380239">longest</span>&nbsp;<span class="op" id="5380247">:=</span>&nbsp;<span class="ident" id="5380250"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5380251">.</span><span class="ident" id="5380252">re</span><span class="op" id="5380254">.</span><span class="ident" id="5380255">longest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380264">for</span>&nbsp;<span class="ident" id="5380268">j</span>&nbsp;<span class="op" id="5380270">:=</span>&nbsp;<span class="num" id="5380273">0</span><span class="op" id="5380274">;</span>&nbsp;<span class="ident" id="5380276"><a href="/regexp/exec.go.html#5380268">j</a></span>&nbsp;<span class="op" id="5380278">&lt;</span>&nbsp;<span class="builtinfunc" id="5380280">len</span><span class="op" id="5380283">(</span><span class="ident" id="5380284"><a href="/regexp/exec.go.html#5380165">runq</a></span><span class="op" id="5380288">.</span><span class="ident" id="5380289">dense</span><span class="op" id="5380294">)</span><span class="op" id="5380295">;</span>&nbsp;<span class="ident" id="5380297"><a href="/regexp/exec.go.html#5380268">j</a></span><span class="op" id="5380298">++</span>&nbsp;<span class="op" id="5380301">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380305">d</span>&nbsp;<span class="op" id="5380307">:=</span>&nbsp;<span class="op" id="5380310">&amp;</span><span class="ident" id="5380311"><a href="/regexp/exec.go.html#5380165">runq</a></span><span class="op" id="5380315">.</span><span class="ident" id="5380316">dense</span><span class="op" id="5380321">[</span><span class="ident" id="5380322"><a href="/regexp/exec.go.html#5380268">j</a></span><span class="op" id="5380323">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380327">t</span>&nbsp;<span class="op" id="5380329">:=</span>&nbsp;<span class="ident" id="5380332"><a href="/regexp/exec.go.html#5380305">d</a></span><span class="op" id="5380333">.</span><span class="ident" id="5380334">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380338">if</span>&nbsp;<span class="ident" id="5380341"><a href="/regexp/exec.go.html#5380327">t</a></span>&nbsp;<span class="op" id="5380343">==</span>&nbsp;<span class="ident" id="5380346">nil</span>&nbsp;<span class="op" id="5380350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380355">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5380366">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380370">if</span>&nbsp;<span class="ident" id="5380373"><a href="/regexp/exec.go.html#5380239">longest</a></span>&nbsp;<span class="op" id="5380381">&amp;&amp;</span>&nbsp;<span class="ident" id="5380384"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5380385">.</span><span class="ident" id="5380386">matched</span>&nbsp;<span class="op" id="5380394">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5380397">len</span><span class="op" id="5380400">(</span><span class="ident" id="5380401"><a href="/regexp/exec.go.html#5380327">t</a></span><span class="op" id="5380402">.</span><span class="builtinfunc" id="5380403">cap</span><span class="op" id="5380406">)</span>&nbsp;<span class="op" id="5380408">&gt;</span>&nbsp;<span class="num" id="5380410">0</span>&nbsp;<span class="op" id="5380412">&amp;&amp;</span>&nbsp;<span class="ident" id="5380415"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5380416">.</span><span class="ident" id="5380417">matchcap</span><span class="op" id="5380425">[</span><span class="num" id="5380426">0</span><span class="op" id="5380427">]</span>&nbsp;<span class="op" id="5380429">&lt;</span>&nbsp;<span class="ident" id="5380431"><a href="/regexp/exec.go.html#5380327">t</a></span><span class="op" id="5380432">.</span><span class="builtinfunc" id="5380433">cap</span><span class="op" id="5380436">[</span><span class="num" id="5380437">0</span><span class="op" id="5380438">]</span>&nbsp;<span class="op" id="5380440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5380445">//&nbsp;m.free(t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380461"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5380462">.</span><span class="ident" id="5380463">pool</span>&nbsp;<span class="op" id="5380468">=</span>&nbsp;<span class="builtinfunc" id="5380470">append</span><span class="op" id="5380476">(</span><span class="ident" id="5380477"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5380478">.</span><span class="ident" id="5380479">pool</span><span class="op" id="5380483">,</span>&nbsp;<span class="ident" id="5380485"><a href="/regexp/exec.go.html#5380327">t</a></span><span class="op" id="5380486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380491">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5380502">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380506">i</span>&nbsp;<span class="op" id="5380508">:=</span>&nbsp;<span class="ident" id="5380511"><a href="/regexp/exec.go.html#5380327">t</a></span><span class="op" id="5380512">.</span><span class="ident" id="5380513">inst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380520">add</span>&nbsp;<span class="op" id="5380524">:=</span>&nbsp;<span class="builtintype" id="5380527">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380535">switch</span>&nbsp;<span class="ident" id="5380542"><a href="/regexp/exec.go.html#5380506">i</a></span><span class="op" id="5380543">.</span><span class="ident" id="5380544">Op</span>&nbsp;<span class="op" id="5380547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380551">default</span><span class="op" id="5380558">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5380563">panic</span><span class="op" id="5380568">(</span><span class="string" id="5380569">&#34;bad&nbsp;inst&#34;</span><span class="op" id="5380579">)</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380584">case</span>&nbsp;<span class="ident" id="5380589"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5380595">.</span><span class="ident" id="5380596">InstMatch</span><span class="op" id="5380605">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380610">if</span>&nbsp;<span class="builtinfunc" id="5380613">len</span><span class="op" id="5380616">(</span><span class="ident" id="5380617"><a href="/regexp/exec.go.html#5380327">t</a></span><span class="op" id="5380618">.</span><span class="builtinfunc" id="5380619">cap</span><span class="op" id="5380622">)</span>&nbsp;<span class="op" id="5380624">&gt;</span>&nbsp;<span class="num" id="5380626">0</span>&nbsp;<span class="op" id="5380628">&amp;&amp;</span>&nbsp;<span class="op" id="5380631">(</span><span class="op" id="5380632">!</span><span class="ident" id="5380633"><a href="/regexp/exec.go.html#5380239">longest</a></span>&nbsp;<span class="op" id="5380641">||</span>&nbsp;<span class="op" id="5380644">!</span><span class="ident" id="5380645"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5380646">.</span><span class="ident" id="5380647">matched</span>&nbsp;<span class="op" id="5380655">||</span>&nbsp;<span class="ident" id="5380658"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5380659">.</span><span class="ident" id="5380660">matchcap</span><span class="op" id="5380668">[</span><span class="num" id="5380669">1</span><span class="op" id="5380670">]</span>&nbsp;<span class="op" id="5380672">&lt;</span>&nbsp;<span class="ident" id="5380674"><a href="/regexp/exec.go.html#5380185">pos</a></span><span class="op" id="5380677">)</span>&nbsp;<span class="op" id="5380679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380685"><a href="/regexp/exec.go.html#5380327">t</a></span><span class="op" id="5380686">.</span><span class="builtinfunc" id="5380687">cap</span><span class="op" id="5380690">[</span><span class="num" id="5380691">1</span><span class="op" id="5380692">]</span>&nbsp;<span class="op" id="5380694">=</span>&nbsp;<span class="ident" id="5380696"><a href="/regexp/exec.go.html#5380185">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5380704">copy</span><span class="op" id="5380708">(</span><span class="ident" id="5380709"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5380710">.</span><span class="ident" id="5380711">matchcap</span><span class="op" id="5380719">,</span>&nbsp;<span class="ident" id="5380721"><a href="/regexp/exec.go.html#5380327">t</a></span><span class="op" id="5380722">.</span><span class="builtinfunc" id="5380723">cap</span><span class="op" id="5380726">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5380731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380736">if</span>&nbsp;<span class="op" id="5380739">!</span><span class="ident" id="5380740"><a href="/regexp/exec.go.html#5380239">longest</a></span>&nbsp;<span class="op" id="5380748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5380754">//&nbsp;First-match&nbsp;mode:&nbsp;cut&nbsp;off&nbsp;all&nbsp;lower-priority&nbsp;threads.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380815">for</span>&nbsp;<span class="ident" id="5380819">_</span><span class="op" id="5380820">,</span>&nbsp;<span class="ident" id="5380822">d</span>&nbsp;<span class="op" id="5380824">:=</span>&nbsp;<span class="keyword" id="5380827">range</span>&nbsp;<span class="ident" id="5380833"><a href="/regexp/exec.go.html#5380165">runq</a></span><span class="op" id="5380837">.</span><span class="ident" id="5380838">dense</span><span class="op" id="5380843">[</span><span class="ident" id="5380844"><a href="/regexp/exec.go.html#5380268">j</a></span><span class="op" id="5380845">+</span><span class="num" id="5380846">1</span><span class="op" id="5380847">:</span><span class="op" id="5380848">]</span>&nbsp;<span class="op" id="5380850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5380857">if</span>&nbsp;<span class="ident" id="5380860"><a href="/regexp/exec.go.html#5380822">d</a></span><span class="op" id="5380861">.</span><span class="ident" id="5380862">t</span>&nbsp;<span class="op" id="5380864">!=</span>&nbsp;<span class="ident" id="5380867">nil</span>&nbsp;<span class="op" id="5380871">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5380879">//&nbsp;m.free(d.t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380900"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5380901">.</span><span class="ident" id="5380902">pool</span>&nbsp;<span class="op" id="5380907">=</span>&nbsp;<span class="builtinfunc" id="5380909">append</span><span class="op" id="5380915">(</span><span class="ident" id="5380916"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5380917">.</span><span class="ident" id="5380918">pool</span><span class="op" id="5380922">,</span>&nbsp;<span class="ident" id="5380924"><a href="/regexp/exec.go.html#5380822">d</a></span><span class="op" id="5380925">.</span><span class="ident" id="5380926">t</span><span class="op" id="5380927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5380934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5380940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380946"><a href="/regexp/exec.go.html#5380165">runq</a></span><span class="op" id="5380950">.</span><span class="ident" id="5380951">dense</span>&nbsp;<span class="op" id="5380957">=</span>&nbsp;<span class="ident" id="5380959"><a href="/regexp/exec.go.html#5380165">runq</a></span><span class="op" id="5380963">.</span><span class="ident" id="5380964">dense</span><span class="op" id="5380969">[</span><span class="op" id="5380970">:</span><span class="num" id="5380971">0</span><span class="op" id="5380972">]</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5380977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5380982"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5380983">.</span><span class="ident" id="5380984">matched</span>&nbsp;<span class="op" id="5380992">=</span>&nbsp;<span class="builtintype" id="5380994">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381002">case</span>&nbsp;<span class="ident" id="5381007"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5381013">.</span><span class="ident" id="5381014">InstRune</span><span class="op" id="5381022">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381027"><a href="/regexp/exec.go.html#5380520">add</a></span>&nbsp;<span class="op" id="5381031">=</span>&nbsp;<span class="ident" id="5381033"><a href="/regexp/exec.go.html#5380506">i</a></span><span class="op" id="5381034">.</span><span class="ident" id="5381035">MatchRune</span><span class="op" id="5381044">(</span><span class="ident" id="5381045"><a href="/regexp/exec.go.html#5380203">c</a></span><span class="op" id="5381046">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381050">case</span>&nbsp;<span class="ident" id="5381055"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5381061">.</span><span class="ident" id="5381062">InstRune1</span><span class="op" id="5381071">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381076"><a href="/regexp/exec.go.html#5380520">add</a></span>&nbsp;<span class="op" id="5381080">=</span>&nbsp;<span class="ident" id="5381082"><a href="/regexp/exec.go.html#5380203">c</a></span>&nbsp;<span class="op" id="5381084">==</span>&nbsp;<span class="ident" id="5381087"><a href="/regexp/exec.go.html#5380506">i</a></span><span class="op" id="5381088">.</span><span class="ident" id="5381089">Rune</span><span class="op" id="5381093">[</span><span class="num" id="5381094">0</span><span class="op" id="5381095">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381099">case</span>&nbsp;<span class="ident" id="5381104"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5381110">.</span><span class="ident" id="5381111">InstRuneAny</span><span class="op" id="5381122">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381127"><a href="/regexp/exec.go.html#5380520">add</a></span>&nbsp;<span class="op" id="5381131">=</span>&nbsp;<span class="builtintype" id="5381133">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381140">case</span>&nbsp;<span class="ident" id="5381145"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5381151">.</span><span class="ident" id="5381152">InstRuneAnyNotNL</span><span class="op" id="5381168">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381173"><a href="/regexp/exec.go.html#5380520">add</a></span>&nbsp;<span class="op" id="5381177">=</span>&nbsp;<span class="ident" id="5381179"><a href="/regexp/exec.go.html#5380203">c</a></span>&nbsp;<span class="op" id="5381181">!=</span>&nbsp;<span class="string" id="5381184">&#39;\n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381195">if</span>&nbsp;<span class="ident" id="5381198"><a href="/regexp/exec.go.html#5380520">add</a></span>&nbsp;<span class="op" id="5381202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381207"><a href="/regexp/exec.go.html#5380327">t</a></span>&nbsp;<span class="op" id="5381209">=</span>&nbsp;<span class="ident" id="5381211"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5381212">.</span><span class="ident" id="5381213">add</span><span class="op" id="5381216">(</span><span class="ident" id="5381217"><a href="/regexp/exec.go.html#5380171">nextq</a></span><span class="op" id="5381222">,</span>&nbsp;<span class="ident" id="5381224"><a href="/regexp/exec.go.html#5380506">i</a></span><span class="op" id="5381225">.</span><span class="ident" id="5381226">Out</span><span class="op" id="5381229">,</span>&nbsp;<span class="ident" id="5381231"><a href="/regexp/exec.go.html#5380190">nextPos</a></span><span class="op" id="5381238">,</span>&nbsp;<span class="ident" id="5381240"><a href="/regexp/exec.go.html#5380327">t</a></span><span class="op" id="5381241">.</span><span class="builtinfunc" id="5381242">cap</span><span class="op" id="5381245">,</span>&nbsp;<span class="ident" id="5381247"><a href="/regexp/exec.go.html#5380211">nextCond</a></span><span class="op" id="5381255">,</span>&nbsp;<span class="ident" id="5381257"><a href="/regexp/exec.go.html#5380327">t</a></span><span class="op" id="5381258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381262">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381266">if</span>&nbsp;<span class="ident" id="5381269"><a href="/regexp/exec.go.html#5380327">t</a></span>&nbsp;<span class="op" id="5381271">!=</span>&nbsp;<span class="ident" id="5381274">nil</span>&nbsp;<span class="op" id="5381278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5381283">//&nbsp;m.free(t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381299"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5381300">.</span><span class="ident" id="5381301">pool</span>&nbsp;<span class="op" id="5381306">=</span>&nbsp;<span class="builtinfunc" id="5381308">append</span><span class="op" id="5381314">(</span><span class="ident" id="5381315"><a href="/regexp/exec.go.html#5380148">m</a></span><span class="op" id="5381316">.</span><span class="ident" id="5381317">pool</span><span class="op" id="5381321">,</span>&nbsp;<span class="ident" id="5381323"><a href="/regexp/exec.go.html#5380327">t</a></span><span class="op" id="5381324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381331">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381334"><a href="/regexp/exec.go.html#5380165">runq</a></span><span class="op" id="5381338">.</span><span class="ident" id="5381339">dense</span>&nbsp;<span class="op" id="5381345">=</span>&nbsp;<span class="ident" id="5381347"><a href="/regexp/exec.go.html#5380165">runq</a></span><span class="op" id="5381351">.</span><span class="ident" id="5381352">dense</span><span class="op" id="5381357">[</span><span class="op" id="5381358">:</span><span class="num" id="5381359">0</span><span class="op" id="5381360">]</span><br>
<span class="lineno"></span><span class="op" id="5381362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5381365">//&nbsp;add&nbsp;adds&nbsp;an&nbsp;entry&nbsp;to&nbsp;q&nbsp;for&nbsp;pc,&nbsp;unless&nbsp;the&nbsp;q&nbsp;already&nbsp;has&nbsp;such&nbsp;an&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="5381439">//&nbsp;It&nbsp;also&nbsp;recursively&nbsp;adds&nbsp;an&nbsp;entry&nbsp;for&nbsp;all&nbsp;instructions&nbsp;reachable&nbsp;from&nbsp;pc&nbsp;by&nbsp;following</span><br>
<span class="lineno">260</span><span class="comment" id="5381528">//&nbsp;empty-width&nbsp;conditions&nbsp;satisfied&nbsp;by&nbsp;cond.&nbsp;&nbsp;pos&nbsp;gives&nbsp;the&nbsp;current&nbsp;position</span><br>
<span class="lineno"></span><span class="comment" id="5381605">//&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="5381622">func</span>&nbsp;<span class="op" id="5381627">(</span><span class="ident" id="5381628">m</span>&nbsp;<span class="op" id="5381630">*</span><span class="ident" id="5381631"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5381638">)</span>&nbsp;<span class="ident" id="5381640">add</span><span class="op" id="5381643">(</span><span class="ident" id="5381644">q</span>&nbsp;<span class="op" id="5381646">*</span><span class="ident" id="5381647"><a href="/regexp/exec.go.html#5375396">queue</a></span><span class="op" id="5381652">,</span>&nbsp;<span class="ident" id="5381654">pc</span>&nbsp;<span class="builtintype" id="5381657">uint32</span><span class="op" id="5381663">,</span>&nbsp;<span class="ident" id="5381665">pos</span>&nbsp;<span class="builtintype" id="5381669">int</span><span class="op" id="5381672">,</span>&nbsp;<span class="builtinfunc" id="5381674">cap</span>&nbsp;<span class="op" id="5381678">[</span><span class="op" id="5381679">]</span><span class="builtintype" id="5381680">int</span><span class="op" id="5381683">,</span>&nbsp;<span class="ident" id="5381685">cond</span>&nbsp;<span class="ident" id="5381690"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5381696">.</span><span class="ident" id="5381697">EmptyOp</span><span class="op" id="5381704">,</span>&nbsp;<span class="ident" id="5381706">t</span>&nbsp;<span class="op" id="5381708">*</span><span class="ident" id="5381709"><a href="/regexp/exec.go.html#5375887">thread</a></span><span class="op" id="5381715">)</span>&nbsp;<span class="op" id="5381717">*</span><span class="ident" id="5381718"><a href="/regexp/exec.go.html#5375887">thread</a></span>&nbsp;<span class="op" id="5381725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381728">if</span>&nbsp;<span class="ident" id="5381731"><a href="/regexp/exec.go.html#5381654">pc</a></span>&nbsp;<span class="op" id="5381734">==</span>&nbsp;<span class="num" id="5381737">0</span>&nbsp;<span class="op" id="5381739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381743">return</span>&nbsp;<span class="ident" id="5381750"><a href="/regexp/exec.go.html#5381706">t</a></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381756">if</span>&nbsp;<span class="ident" id="5381759">j</span>&nbsp;<span class="op" id="5381761">:=</span>&nbsp;<span class="ident" id="5381764"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5381765">.</span><span class="ident" id="5381766">sparse</span><span class="op" id="5381772">[</span><span class="ident" id="5381773"><a href="/regexp/exec.go.html#5381654">pc</a></span><span class="op" id="5381775">]</span><span class="op" id="5381776">;</span>&nbsp;<span class="ident" id="5381778"><a href="/regexp/exec.go.html#5381759">j</a></span>&nbsp;<span class="op" id="5381780">&lt;</span>&nbsp;<span class="builtintype" id="5381782">uint32</span><span class="op" id="5381788">(</span><span class="builtinfunc" id="5381789">len</span><span class="op" id="5381792">(</span><span class="ident" id="5381793"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5381794">.</span><span class="ident" id="5381795">dense</span><span class="op" id="5381800">)</span><span class="op" id="5381801">)</span>&nbsp;<span class="op" id="5381803">&amp;&amp;</span>&nbsp;<span class="ident" id="5381806"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5381807">.</span><span class="ident" id="5381808">dense</span><span class="op" id="5381813">[</span><span class="ident" id="5381814"><a href="/regexp/exec.go.html#5381759">j</a></span><span class="op" id="5381815">]</span><span class="op" id="5381816">.</span><span class="ident" id="5381817">pc</span>&nbsp;<span class="op" id="5381820">==</span>&nbsp;<span class="ident" id="5381823"><a href="/regexp/exec.go.html#5381654">pc</a></span>&nbsp;<span class="op" id="5381826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381830">return</span>&nbsp;<span class="ident" id="5381837"><a href="/regexp/exec.go.html#5381706">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5381840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381844">j</span>&nbsp;<span class="op" id="5381846">:=</span>&nbsp;<span class="builtinfunc" id="5381849">len</span><span class="op" id="5381852">(</span><span class="ident" id="5381853"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5381854">.</span><span class="ident" id="5381855">dense</span><span class="op" id="5381860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381863"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5381864">.</span><span class="ident" id="5381865">dense</span>&nbsp;<span class="op" id="5381871">=</span>&nbsp;<span class="ident" id="5381873"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5381874">.</span><span class="ident" id="5381875">dense</span><span class="op" id="5381880">[</span><span class="op" id="5381881">:</span><span class="ident" id="5381882"><a href="/regexp/exec.go.html#5381844">j</a></span><span class="op" id="5381883">+</span><span class="num" id="5381884">1</span><span class="op" id="5381885">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381888">d</span>&nbsp;<span class="op" id="5381890">:=</span>&nbsp;<span class="op" id="5381893">&amp;</span><span class="ident" id="5381894"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5381895">.</span><span class="ident" id="5381896">dense</span><span class="op" id="5381901">[</span><span class="ident" id="5381902"><a href="/regexp/exec.go.html#5381844">j</a></span><span class="op" id="5381903">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381906"><a href="/regexp/exec.go.html#5381888">d</a></span><span class="op" id="5381907">.</span><span class="ident" id="5381908">t</span>&nbsp;<span class="op" id="5381910">=</span>&nbsp;<span class="ident" id="5381912">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381917"><a href="/regexp/exec.go.html#5381888">d</a></span><span class="op" id="5381918">.</span><span class="ident" id="5381919">pc</span>&nbsp;<span class="op" id="5381922">=</span>&nbsp;<span class="ident" id="5381924"><a href="/regexp/exec.go.html#5381654">pc</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381928"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5381929">.</span><span class="ident" id="5381930">sparse</span><span class="op" id="5381936">[</span><span class="ident" id="5381937"><a href="/regexp/exec.go.html#5381654">pc</a></span><span class="op" id="5381939">]</span>&nbsp;<span class="op" id="5381941">=</span>&nbsp;<span class="builtintype" id="5381943">uint32</span><span class="op" id="5381949">(</span><span class="ident" id="5381950"><a href="/regexp/exec.go.html#5381844">j</a></span><span class="op" id="5381951">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5381955">i</span>&nbsp;<span class="op" id="5381957">:=</span>&nbsp;<span class="op" id="5381960">&amp;</span><span class="ident" id="5381961"><a href="/regexp/exec.go.html#5381628">m</a></span><span class="op" id="5381962">.</span><span class="ident" id="5381963">p</span><span class="op" id="5381964">.</span><span class="ident" id="5381965">Inst</span><span class="op" id="5381969">[</span><span class="ident" id="5381970"><a href="/regexp/exec.go.html#5381654">pc</a></span><span class="op" id="5381972">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381975">switch</span>&nbsp;<span class="ident" id="5381982"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5381983">.</span><span class="ident" id="5381984">Op</span>&nbsp;<span class="op" id="5381987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5381990">default</span><span class="op" id="5381997">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5382001">panic</span><span class="op" id="5382006">(</span><span class="string" id="5382007">&#34;unhandled&#34;</span><span class="op" id="5382018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382021">case</span>&nbsp;<span class="ident" id="5382026"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5382032">.</span><span class="ident" id="5382033">InstFail</span><span class="op" id="5382041">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5382045">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382057">case</span>&nbsp;<span class="ident" id="5382062"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5382068">.</span><span class="ident" id="5382069">InstAlt</span><span class="op" id="5382076">,</span>&nbsp;<span class="ident" id="5382078"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5382084">.</span><span class="ident" id="5382085">InstAltMatch</span><span class="op" id="5382097">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382101"><a href="/regexp/exec.go.html#5381706">t</a></span>&nbsp;<span class="op" id="5382103">=</span>&nbsp;<span class="ident" id="5382105"><a href="/regexp/exec.go.html#5381628">m</a></span><span class="op" id="5382106">.</span><span class="ident" id="5382107">add</span><span class="op" id="5382110">(</span><span class="ident" id="5382111"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5382112">,</span>&nbsp;<span class="ident" id="5382114"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5382115">.</span><span class="ident" id="5382116">Out</span><span class="op" id="5382119">,</span>&nbsp;<span class="ident" id="5382121"><a href="/regexp/exec.go.html#5381665">pos</a></span><span class="op" id="5382124">,</span>&nbsp;<span class="builtinfunc" id="5382126"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382129">,</span>&nbsp;<span class="ident" id="5382131"><a href="/regexp/exec.go.html#5381685">cond</a></span><span class="op" id="5382135">,</span>&nbsp;<span class="ident" id="5382137"><a href="/regexp/exec.go.html#5381706">t</a></span><span class="op" id="5382138">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382142"><a href="/regexp/exec.go.html#5381706">t</a></span>&nbsp;<span class="op" id="5382144">=</span>&nbsp;<span class="ident" id="5382146"><a href="/regexp/exec.go.html#5381628">m</a></span><span class="op" id="5382147">.</span><span class="ident" id="5382148">add</span><span class="op" id="5382151">(</span><span class="ident" id="5382152"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5382153">,</span>&nbsp;<span class="ident" id="5382155"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5382156">.</span><span class="ident" id="5382157">Arg</span><span class="op" id="5382160">,</span>&nbsp;<span class="ident" id="5382162"><a href="/regexp/exec.go.html#5381665">pos</a></span><span class="op" id="5382165">,</span>&nbsp;<span class="builtinfunc" id="5382167"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382170">,</span>&nbsp;<span class="ident" id="5382172"><a href="/regexp/exec.go.html#5381685">cond</a></span><span class="op" id="5382176">,</span>&nbsp;<span class="ident" id="5382178"><a href="/regexp/exec.go.html#5381706">t</a></span><span class="op" id="5382179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382182">case</span>&nbsp;<span class="ident" id="5382187"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5382193">.</span><span class="ident" id="5382194">InstEmptyWidth</span><span class="op" id="5382208">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382212">if</span>&nbsp;<span class="ident" id="5382215"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5382221">.</span><span class="ident" id="5382222">EmptyOp</span><span class="op" id="5382229">(</span><span class="ident" id="5382230"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5382231">.</span><span class="ident" id="5382232">Arg</span><span class="op" id="5382235">)</span><span class="op" id="5382236">&amp;^</span><span class="ident" id="5382238"><a href="/regexp/exec.go.html#5381685">cond</a></span>&nbsp;<span class="op" id="5382243">==</span>&nbsp;<span class="num" id="5382246">0</span>&nbsp;<span class="op" id="5382248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382253"><a href="/regexp/exec.go.html#5381706">t</a></span>&nbsp;<span class="op" id="5382255">=</span>&nbsp;<span class="ident" id="5382257"><a href="/regexp/exec.go.html#5381628">m</a></span><span class="op" id="5382258">.</span><span class="ident" id="5382259">add</span><span class="op" id="5382262">(</span><span class="ident" id="5382263"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5382264">,</span>&nbsp;<span class="ident" id="5382266"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5382267">.</span><span class="ident" id="5382268">Out</span><span class="op" id="5382271">,</span>&nbsp;<span class="ident" id="5382273"><a href="/regexp/exec.go.html#5381665">pos</a></span><span class="op" id="5382276">,</span>&nbsp;<span class="builtinfunc" id="5382278"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382281">,</span>&nbsp;<span class="ident" id="5382283"><a href="/regexp/exec.go.html#5381685">cond</a></span><span class="op" id="5382287">,</span>&nbsp;<span class="ident" id="5382289"><a href="/regexp/exec.go.html#5381706">t</a></span><span class="op" id="5382290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382294">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382297">case</span>&nbsp;<span class="ident" id="5382302"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5382308">.</span><span class="ident" id="5382309">InstNop</span><span class="op" id="5382316">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382320"><a href="/regexp/exec.go.html#5381706">t</a></span>&nbsp;<span class="op" id="5382322">=</span>&nbsp;<span class="ident" id="5382324"><a href="/regexp/exec.go.html#5381628">m</a></span><span class="op" id="5382325">.</span><span class="ident" id="5382326">add</span><span class="op" id="5382329">(</span><span class="ident" id="5382330"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5382331">,</span>&nbsp;<span class="ident" id="5382333"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5382334">.</span><span class="ident" id="5382335">Out</span><span class="op" id="5382338">,</span>&nbsp;<span class="ident" id="5382340"><a href="/regexp/exec.go.html#5381665">pos</a></span><span class="op" id="5382343">,</span>&nbsp;<span class="builtinfunc" id="5382345"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382348">,</span>&nbsp;<span class="ident" id="5382350"><a href="/regexp/exec.go.html#5381685">cond</a></span><span class="op" id="5382354">,</span>&nbsp;<span class="ident" id="5382356"><a href="/regexp/exec.go.html#5381706">t</a></span><span class="op" id="5382357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382360">case</span>&nbsp;<span class="ident" id="5382365"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5382371">.</span><span class="ident" id="5382372">InstCapture</span><span class="op" id="5382383">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382387">if</span>&nbsp;<span class="builtintype" id="5382390">int</span><span class="op" id="5382393">(</span><span class="ident" id="5382394"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5382395">.</span><span class="ident" id="5382396">Arg</span><span class="op" id="5382399">)</span>&nbsp;<span class="op" id="5382401">&lt;</span>&nbsp;<span class="builtinfunc" id="5382403">len</span><span class="op" id="5382406">(</span><span class="builtinfunc" id="5382407"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382410">)</span>&nbsp;<span class="op" id="5382412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382417">opos</span>&nbsp;<span class="op" id="5382422">:=</span>&nbsp;<span class="builtinfunc" id="5382425"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382428">[</span><span class="ident" id="5382429"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5382430">.</span><span class="ident" id="5382431">Arg</span><span class="op" id="5382434">]</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5382439"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382442">[</span><span class="ident" id="5382443"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5382444">.</span><span class="ident" id="5382445">Arg</span><span class="op" id="5382448">]</span>&nbsp;<span class="op" id="5382450">=</span>&nbsp;<span class="ident" id="5382452"><a href="/regexp/exec.go.html#5381665">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382459"><a href="/regexp/exec.go.html#5381628">m</a></span><span class="op" id="5382460">.</span><span class="ident" id="5382461">add</span><span class="op" id="5382464">(</span><span class="ident" id="5382465"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5382466">,</span>&nbsp;<span class="ident" id="5382468"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5382469">.</span><span class="ident" id="5382470">Out</span><span class="op" id="5382473">,</span>&nbsp;<span class="ident" id="5382475"><a href="/regexp/exec.go.html#5381665">pos</a></span><span class="op" id="5382478">,</span>&nbsp;<span class="builtinfunc" id="5382480"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382483">,</span>&nbsp;<span class="ident" id="5382485"><a href="/regexp/exec.go.html#5381685">cond</a></span><span class="op" id="5382489">,</span>&nbsp;<span class="ident" id="5382491">nil</span><span class="op" id="5382494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5382499"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382502">[</span><span class="ident" id="5382503"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5382504">.</span><span class="ident" id="5382505">Arg</span><span class="op" id="5382508">]</span>&nbsp;<span class="op" id="5382510">=</span>&nbsp;<span class="ident" id="5382512"><a href="/regexp/exec.go.html#5382417">opos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382519">}</span>&nbsp;<span class="keyword" id="5382521">else</span>&nbsp;<span class="op" id="5382526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382531"><a href="/regexp/exec.go.html#5381706">t</a></span>&nbsp;<span class="op" id="5382533">=</span>&nbsp;<span class="ident" id="5382535"><a href="/regexp/exec.go.html#5381628">m</a></span><span class="op" id="5382536">.</span><span class="ident" id="5382537">add</span><span class="op" id="5382540">(</span><span class="ident" id="5382541"><a href="/regexp/exec.go.html#5381644">q</a></span><span class="op" id="5382542">,</span>&nbsp;<span class="ident" id="5382544"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5382545">.</span><span class="ident" id="5382546">Out</span><span class="op" id="5382549">,</span>&nbsp;<span class="ident" id="5382551"><a href="/regexp/exec.go.html#5381665">pos</a></span><span class="op" id="5382554">,</span>&nbsp;<span class="builtinfunc" id="5382556"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382559">,</span>&nbsp;<span class="ident" id="5382561"><a href="/regexp/exec.go.html#5381685">cond</a></span><span class="op" id="5382565">,</span>&nbsp;<span class="ident" id="5382567"><a href="/regexp/exec.go.html#5381706">t</a></span><span class="op" id="5382568">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382575">case</span>&nbsp;<span class="ident" id="5382580"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5382586">.</span><span class="ident" id="5382587">InstMatch</span><span class="op" id="5382596">,</span>&nbsp;<span class="ident" id="5382598"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5382604">.</span><span class="ident" id="5382605">InstRune</span><span class="op" id="5382613">,</span>&nbsp;<span class="ident" id="5382615"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5382621">.</span><span class="ident" id="5382622">InstRune1</span><span class="op" id="5382631">,</span>&nbsp;<span class="ident" id="5382633"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5382639">.</span><span class="ident" id="5382640">InstRuneAny</span><span class="op" id="5382651">,</span>&nbsp;<span class="ident" id="5382653"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5382659">.</span><span class="ident" id="5382660">InstRuneAnyNotNL</span><span class="op" id="5382676">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382680">if</span>&nbsp;<span class="ident" id="5382683"><a href="/regexp/exec.go.html#5381706">t</a></span>&nbsp;<span class="op" id="5382685">==</span>&nbsp;<span class="ident" id="5382688">nil</span>&nbsp;<span class="op" id="5382692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382697"><a href="/regexp/exec.go.html#5381706">t</a></span>&nbsp;<span class="op" id="5382699">=</span>&nbsp;<span class="ident" id="5382701"><a href="/regexp/exec.go.html#5381628">m</a></span><span class="op" id="5382702">.</span><span class="ident" id="5382703">alloc</span><span class="op" id="5382708">(</span><span class="ident" id="5382709"><a href="/regexp/exec.go.html#5381955">i</a></span><span class="op" id="5382710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382714">}</span>&nbsp;<span class="keyword" id="5382716">else</span>&nbsp;<span class="op" id="5382721">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382726"><a href="/regexp/exec.go.html#5381706">t</a></span><span class="op" id="5382727">.</span><span class="ident" id="5382728">inst</span>&nbsp;<span class="op" id="5382733">=</span>&nbsp;<span class="ident" id="5382735"><a href="/regexp/exec.go.html#5381955">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382743">if</span>&nbsp;<span class="builtinfunc" id="5382746">len</span><span class="op" id="5382749">(</span><span class="builtinfunc" id="5382750"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382753">)</span>&nbsp;<span class="op" id="5382755">&gt;</span>&nbsp;<span class="num" id="5382757">0</span>&nbsp;<span class="op" id="5382759">&amp;&amp;</span>&nbsp;<span class="op" id="5382762">&amp;</span><span class="ident" id="5382763"><a href="/regexp/exec.go.html#5381706">t</a></span><span class="op" id="5382764">.</span><span class="builtinfunc" id="5382765">cap</span><span class="op" id="5382768">[</span><span class="num" id="5382769">0</span><span class="op" id="5382770">]</span>&nbsp;<span class="op" id="5382772">!=</span>&nbsp;<span class="op" id="5382775">&amp;</span><span class="builtinfunc" id="5382776"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382779">[</span><span class="num" id="5382780">0</span><span class="op" id="5382781">]</span>&nbsp;<span class="op" id="5382783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5382788">copy</span><span class="op" id="5382792">(</span><span class="ident" id="5382793"><a href="/regexp/exec.go.html#5381706">t</a></span><span class="op" id="5382794">.</span><span class="builtinfunc" id="5382795">cap</span><span class="op" id="5382798">,</span>&nbsp;<span class="builtinfunc" id="5382800"><a href="/regexp/exec.go.html#5381674">cap</a></span><span class="op" id="5382803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382807">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382811"><a href="/regexp/exec.go.html#5381888">d</a></span><span class="op" id="5382812">.</span><span class="ident" id="5382813">t</span>&nbsp;<span class="op" id="5382815">=</span>&nbsp;<span class="ident" id="5382817"><a href="/regexp/exec.go.html#5381706">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5382821"><a href="/regexp/exec.go.html#5381706">t</a></span>&nbsp;<span class="op" id="5382823">=</span>&nbsp;<span class="ident" id="5382825">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5382830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5382833">return</span>&nbsp;<span class="ident" id="5382840"><a href="/regexp/exec.go.html#5381706">t</a></span><br>
<span class="lineno"></span><span class="op" id="5382842">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="comment" id="5382845">//&nbsp;onepass&nbsp;runs&nbsp;the&nbsp;machine&nbsp;over&nbsp;the&nbsp;input&nbsp;starting&nbsp;at&nbsp;pos.</span><br>
<span class="lineno"></span><span class="comment" id="5382905">//&nbsp;It&nbsp;reports&nbsp;whether&nbsp;a&nbsp;match&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="5382946">//&nbsp;If&nbsp;so,&nbsp;m.matchcap&nbsp;holds&nbsp;the&nbsp;submatch&nbsp;information.</span><br>
<span class="lineno"></span><span class="keyword" id="5382999">func</span>&nbsp;<span class="op" id="5383004">(</span><span class="ident" id="5383005">m</span>&nbsp;<span class="op" id="5383007">*</span><span class="ident" id="5383008"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5383015">)</span>&nbsp;<span class="ident" id="5383017">onepass</span><span class="op" id="5383024">(</span><span class="ident" id="5383025">i</span>&nbsp;<span class="ident" id="5383027"><a href="/regexp/regexp.go.html#5411636">input</a></span><span class="op" id="5383032">,</span>&nbsp;<span class="ident" id="5383034">pos</span>&nbsp;<span class="builtintype" id="5383038">int</span><span class="op" id="5383041">)</span>&nbsp;<span class="builtintype" id="5383043">bool</span>&nbsp;<span class="op" id="5383048">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383051">startCond</span>&nbsp;<span class="op" id="5383061">:=</span>&nbsp;<span class="ident" id="5383064"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5383065">.</span><span class="ident" id="5383066">re</span><span class="op" id="5383068">.</span><span class="ident" id="5383069">cond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383075">if</span>&nbsp;<span class="ident" id="5383078"><a href="/regexp/exec.go.html#5383051">startCond</a></span>&nbsp;<span class="op" id="5383088">==</span>&nbsp;<span class="op" id="5383091">^</span><span class="ident" id="5383092"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5383098">.</span><span class="ident" id="5383099">EmptyOp</span><span class="op" id="5383106">(</span><span class="num" id="5383107">0</span><span class="op" id="5383108">)</span>&nbsp;<span class="op" id="5383110">{</span>&nbsp;<span class="comment" id="5383112">//&nbsp;impossible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383128">return</span>&nbsp;<span class="builtintype" id="5383135">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383145"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5383146">.</span><span class="ident" id="5383147">matched</span>&nbsp;<span class="op" id="5383155">=</span>&nbsp;<span class="builtintype" id="5383157">false</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383164">for</span>&nbsp;<span class="ident" id="5383168">i</span>&nbsp;<span class="op" id="5383170">:=</span>&nbsp;<span class="keyword" id="5383173">range</span>&nbsp;<span class="ident" id="5383179"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5383180">.</span><span class="ident" id="5383181">matchcap</span>&nbsp;<span class="op" id="5383190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383194"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5383195">.</span><span class="ident" id="5383196">matchcap</span><span class="op" id="5383204">[</span><span class="ident" id="5383205"><a href="/regexp/exec.go.html#5383168">i</a></span><span class="op" id="5383206">]</span>&nbsp;<span class="op" id="5383208">=</span>&nbsp;<span class="op" id="5383210">-</span><span class="num" id="5383211">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383217">r</span><span class="op" id="5383218">,</span>&nbsp;<span class="ident" id="5383220">r1</span>&nbsp;<span class="op" id="5383223">:=</span>&nbsp;<span class="ident" id="5383226"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span><span class="op" id="5383235">,</span>&nbsp;<span class="ident" id="5383237"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383248">width</span><span class="op" id="5383253">,</span>&nbsp;<span class="ident" id="5383255">width1</span>&nbsp;<span class="op" id="5383262">:=</span>&nbsp;<span class="num" id="5383265">0</span><span class="op" id="5383266">,</span>&nbsp;<span class="num" id="5383268">0</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383271"><a href="/regexp/exec.go.html#5383217">r</a></span><span class="op" id="5383272">,</span>&nbsp;<span class="ident" id="5383274"><a href="/regexp/exec.go.html#5383248">width</a></span>&nbsp;<span class="op" id="5383280">=</span>&nbsp;<span class="ident" id="5383282"><a href="/regexp/exec.go.html#5383025">i</a></span><span class="op" id="5383283">.</span><span class="ident" id="5383284">step</span><span class="op" id="5383288">(</span><span class="ident" id="5383289"><a href="/regexp/exec.go.html#5383034">pos</a></span><span class="op" id="5383292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383295">if</span>&nbsp;<span class="ident" id="5383298"><a href="/regexp/exec.go.html#5383217">r</a></span>&nbsp;<span class="op" id="5383300">!=</span>&nbsp;<span class="ident" id="5383303"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span>&nbsp;<span class="op" id="5383313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383317"><a href="/regexp/exec.go.html#5383220">r1</a></span><span class="op" id="5383319">,</span>&nbsp;<span class="ident" id="5383321"><a href="/regexp/exec.go.html#5383255">width1</a></span>&nbsp;<span class="op" id="5383328">=</span>&nbsp;<span class="ident" id="5383330"><a href="/regexp/exec.go.html#5383025">i</a></span><span class="op" id="5383331">.</span><span class="ident" id="5383332">step</span><span class="op" id="5383336">(</span><span class="ident" id="5383337"><a href="/regexp/exec.go.html#5383034">pos</a></span>&nbsp;<span class="op" id="5383341">+</span>&nbsp;<span class="ident" id="5383343"><a href="/regexp/exec.go.html#5383248">width</a></span><span class="op" id="5383348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383354">var</span>&nbsp;<span class="ident" id="5383358">flag</span>&nbsp;<span class="ident" id="5383363"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5383369">.</span><span class="ident" id="5383370">EmptyOp</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383379">if</span>&nbsp;<span class="ident" id="5383382"><a href="/regexp/exec.go.html#5383034">pos</a></span>&nbsp;<span class="op" id="5383386">==</span>&nbsp;<span class="num" id="5383389">0</span>&nbsp;<span class="op" id="5383391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383395"><a href="/regexp/exec.go.html#5383358">flag</a></span>&nbsp;<span class="op" id="5383400">=</span>&nbsp;<span class="ident" id="5383402"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5383408">.</span><span class="ident" id="5383409">EmptyOpContext</span><span class="op" id="5383423">(</span><span class="op" id="5383424">-</span><span class="num" id="5383425">1</span><span class="op" id="5383426">,</span>&nbsp;<span class="ident" id="5383428"><a href="/regexp/exec.go.html#5383217">r</a></span><span class="op" id="5383429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383432">}</span>&nbsp;<span class="keyword" id="5383434">else</span>&nbsp;<span class="op" id="5383439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383443"><a href="/regexp/exec.go.html#5383358">flag</a></span>&nbsp;<span class="op" id="5383448">=</span>&nbsp;<span class="ident" id="5383450"><a href="/regexp/exec.go.html#5383025">i</a></span><span class="op" id="5383451">.</span><span class="ident" id="5383452">context</span><span class="op" id="5383459">(</span><span class="ident" id="5383460"><a href="/regexp/exec.go.html#5383034">pos</a></span><span class="op" id="5383463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383466">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383469">pc</span>&nbsp;<span class="op" id="5383472">:=</span>&nbsp;<span class="ident" id="5383475"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5383476">.</span><span class="ident" id="5383477">op</span><span class="op" id="5383479">.</span><span class="ident" id="5383480">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383487">inst</span>&nbsp;<span class="op" id="5383492">:=</span>&nbsp;<span class="ident" id="5383495"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5383496">.</span><span class="ident" id="5383497">op</span><span class="op" id="5383499">.</span><span class="ident" id="5383500">Inst</span><span class="op" id="5383504">[</span><span class="ident" id="5383505"><a href="/regexp/exec.go.html#5383469">pc</a></span><span class="op" id="5383507">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5383510">//&nbsp;If&nbsp;there&nbsp;is&nbsp;a&nbsp;simple&nbsp;literal&nbsp;prefix,&nbsp;skip&nbsp;over&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383565">if</span>&nbsp;<span class="ident" id="5383568"><a href="/regexp/exec.go.html#5383034">pos</a></span>&nbsp;<span class="op" id="5383572">==</span>&nbsp;<span class="num" id="5383575">0</span>&nbsp;<span class="op" id="5383577">&amp;&amp;</span>&nbsp;<span class="ident" id="5383580"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5383586">.</span><span class="ident" id="5383587">EmptyOp</span><span class="op" id="5383594">(</span><span class="ident" id="5383595"><a href="/regexp/exec.go.html#5383487">inst</a></span><span class="op" id="5383599">.</span><span class="ident" id="5383600">Arg</span><span class="op" id="5383603">)</span><span class="op" id="5383604">&amp;^</span><span class="ident" id="5383606"><a href="/regexp/exec.go.html#5383358">flag</a></span>&nbsp;<span class="op" id="5383611">==</span>&nbsp;<span class="num" id="5383614">0</span>&nbsp;<span class="op" id="5383616">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5383621">len</span><span class="op" id="5383624">(</span><span class="ident" id="5383625"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5383626">.</span><span class="ident" id="5383627">re</span><span class="op" id="5383629">.</span><span class="ident" id="5383630">prefix</span><span class="op" id="5383636">)</span>&nbsp;<span class="op" id="5383638">&gt;</span>&nbsp;<span class="num" id="5383640">0</span>&nbsp;<span class="op" id="5383642">&amp;&amp;</span>&nbsp;<span class="ident" id="5383645"><a href="/regexp/exec.go.html#5383025">i</a></span><span class="op" id="5383646">.</span><span class="ident" id="5383647">canCheckPrefix</span><span class="op" id="5383661">(</span><span class="op" id="5383662">)</span>&nbsp;<span class="op" id="5383664">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5383668">//&nbsp;Match&nbsp;requires&nbsp;literal&nbsp;prefix;&nbsp;fast&nbsp;search&nbsp;for&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383724">if</span>&nbsp;<span class="ident" id="5383727"><a href="/regexp/exec.go.html#5383025">i</a></span><span class="op" id="5383728">.</span><span class="ident" id="5383729">hasPrefix</span><span class="op" id="5383738">(</span><span class="ident" id="5383739"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5383740">.</span><span class="ident" id="5383741">re</span><span class="op" id="5383743">)</span>&nbsp;<span class="op" id="5383745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383750"><a href="/regexp/exec.go.html#5383034">pos</a></span>&nbsp;<span class="op" id="5383754">+=</span>&nbsp;<span class="builtinfunc" id="5383757">len</span><span class="op" id="5383760">(</span><span class="ident" id="5383761"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5383762">.</span><span class="ident" id="5383763">re</span><span class="op" id="5383765">.</span><span class="ident" id="5383766">prefix</span><span class="op" id="5383772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383777"><a href="/regexp/exec.go.html#5383217">r</a></span><span class="op" id="5383778">,</span>&nbsp;<span class="ident" id="5383780"><a href="/regexp/exec.go.html#5383248">width</a></span>&nbsp;<span class="op" id="5383786">=</span>&nbsp;<span class="ident" id="5383788"><a href="/regexp/exec.go.html#5383025">i</a></span><span class="op" id="5383789">.</span><span class="ident" id="5383790">step</span><span class="op" id="5383794">(</span><span class="ident" id="5383795"><a href="/regexp/exec.go.html#5383034">pos</a></span><span class="op" id="5383798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383803"><a href="/regexp/exec.go.html#5383220">r1</a></span><span class="op" id="5383805">,</span>&nbsp;<span class="ident" id="5383807"><a href="/regexp/exec.go.html#5383255">width1</a></span>&nbsp;<span class="op" id="5383814">=</span>&nbsp;<span class="ident" id="5383816"><a href="/regexp/exec.go.html#5383025">i</a></span><span class="op" id="5383817">.</span><span class="ident" id="5383818">step</span><span class="op" id="5383822">(</span><span class="ident" id="5383823"><a href="/regexp/exec.go.html#5383034">pos</a></span>&nbsp;<span class="op" id="5383827">+</span>&nbsp;<span class="ident" id="5383829"><a href="/regexp/exec.go.html#5383248">width</a></span><span class="op" id="5383834">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383839"><a href="/regexp/exec.go.html#5383358">flag</a></span>&nbsp;<span class="op" id="5383844">=</span>&nbsp;<span class="ident" id="5383846"><a href="/regexp/exec.go.html#5383025">i</a></span><span class="op" id="5383847">.</span><span class="ident" id="5383848">context</span><span class="op" id="5383855">(</span><span class="ident" id="5383856"><a href="/regexp/exec.go.html#5383034">pos</a></span><span class="op" id="5383859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383864"><a href="/regexp/exec.go.html#5383469">pc</a></span>&nbsp;<span class="op" id="5383867">=</span>&nbsp;<span class="builtintype" id="5383869">int</span><span class="op" id="5383872">(</span><span class="ident" id="5383873"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5383874">.</span><span class="ident" id="5383875">re</span><span class="op" id="5383877">.</span><span class="ident" id="5383878">prefixEnd</span><span class="op" id="5383887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383891">}</span>&nbsp;<span class="keyword" id="5383893">else</span>&nbsp;<span class="op" id="5383898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383903">return</span>&nbsp;<span class="ident" id="5383910"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5383911">.</span><span class="ident" id="5383912">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383922">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5383925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383928">for</span>&nbsp;<span class="op" id="5383932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383936"><a href="/regexp/exec.go.html#5383487">inst</a></span>&nbsp;<span class="op" id="5383941">=</span>&nbsp;<span class="ident" id="5383943"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5383944">.</span><span class="ident" id="5383945">op</span><span class="op" id="5383947">.</span><span class="ident" id="5383948">Inst</span><span class="op" id="5383952">[</span><span class="ident" id="5383953"><a href="/regexp/exec.go.html#5383469">pc</a></span><span class="op" id="5383955">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5383959"><a href="/regexp/exec.go.html#5383469">pc</a></span>&nbsp;<span class="op" id="5383962">=</span>&nbsp;<span class="builtintype" id="5383964">int</span><span class="op" id="5383967">(</span><span class="ident" id="5383968"><a href="/regexp/exec.go.html#5383487">inst</a></span><span class="op" id="5383972">.</span><span class="ident" id="5383973">Out</span><span class="op" id="5383976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383980">switch</span>&nbsp;<span class="ident" id="5383987"><a href="/regexp/exec.go.html#5383487">inst</a></span><span class="op" id="5383991">.</span><span class="ident" id="5383992">Op</span>&nbsp;<span class="op" id="5383995">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383999">default</span><span class="op" id="5384006">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5384011">panic</span><span class="op" id="5384016">(</span><span class="string" id="5384017">&#34;bad&nbsp;inst&#34;</span><span class="op" id="5384027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384031">case</span>&nbsp;<span class="ident" id="5384036"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384042">.</span><span class="ident" id="5384043">InstMatch</span><span class="op" id="5384052">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384057"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5384058">.</span><span class="ident" id="5384059">matched</span>&nbsp;<span class="op" id="5384067">=</span>&nbsp;<span class="builtintype" id="5384069">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384077">if</span>&nbsp;<span class="builtinfunc" id="5384080">len</span><span class="op" id="5384083">(</span><span class="ident" id="5384084"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5384085">.</span><span class="ident" id="5384086">matchcap</span><span class="op" id="5384094">)</span>&nbsp;<span class="op" id="5384096">&gt;</span>&nbsp;<span class="num" id="5384098">0</span>&nbsp;<span class="op" id="5384100">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384106"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5384107">.</span><span class="ident" id="5384108">matchcap</span><span class="op" id="5384116">[</span><span class="num" id="5384117">0</span><span class="op" id="5384118">]</span>&nbsp;<span class="op" id="5384120">=</span>&nbsp;<span class="num" id="5384122">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384128"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5384129">.</span><span class="ident" id="5384130">matchcap</span><span class="op" id="5384138">[</span><span class="num" id="5384139">1</span><span class="op" id="5384140">]</span>&nbsp;<span class="op" id="5384142">=</span>&nbsp;<span class="ident" id="5384144"><a href="/regexp/exec.go.html#5383034">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384156">return</span>&nbsp;<span class="ident" id="5384163"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5384164">.</span><span class="ident" id="5384165">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384175">case</span>&nbsp;<span class="ident" id="5384180"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384186">.</span><span class="ident" id="5384187">InstRune</span><span class="op" id="5384195">:</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384200">if</span>&nbsp;<span class="op" id="5384203">!</span><span class="ident" id="5384204"><a href="/regexp/exec.go.html#5383487">inst</a></span><span class="op" id="5384208">.</span><span class="ident" id="5384209">MatchRune</span><span class="op" id="5384218">(</span><span class="ident" id="5384219"><a href="/regexp/exec.go.html#5383217">r</a></span><span class="op" id="5384220">)</span>&nbsp;<span class="op" id="5384222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384228">return</span>&nbsp;<span class="ident" id="5384235"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5384236">.</span><span class="ident" id="5384237">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384252">case</span>&nbsp;<span class="ident" id="5384257"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384263">.</span><span class="ident" id="5384264">InstRune1</span><span class="op" id="5384273">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384278">if</span>&nbsp;<span class="ident" id="5384281"><a href="/regexp/exec.go.html#5383217">r</a></span>&nbsp;<span class="op" id="5384283">!=</span>&nbsp;<span class="ident" id="5384286"><a href="/regexp/exec.go.html#5383487">inst</a></span><span class="op" id="5384290">.</span><span class="ident" id="5384291">Rune</span><span class="op" id="5384295">[</span><span class="num" id="5384296">0</span><span class="op" id="5384297">]</span>&nbsp;<span class="op" id="5384299">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384305">return</span>&nbsp;<span class="ident" id="5384312"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5384313">.</span><span class="ident" id="5384314">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384329">case</span>&nbsp;<span class="ident" id="5384334"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384340">.</span><span class="ident" id="5384341">InstRuneAny</span><span class="op" id="5384352">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5384357">//&nbsp;Nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384370">case</span>&nbsp;<span class="ident" id="5384375"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384381">.</span><span class="ident" id="5384382">InstRuneAnyNotNL</span><span class="op" id="5384398">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384403">if</span>&nbsp;<span class="ident" id="5384406"><a href="/regexp/exec.go.html#5383217">r</a></span>&nbsp;<span class="op" id="5384408">==</span>&nbsp;<span class="string" id="5384411">&#39;\n&#39;</span>&nbsp;<span class="op" id="5384416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384422">return</span>&nbsp;<span class="ident" id="5384429"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5384430">.</span><span class="ident" id="5384431">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5384446">//&nbsp;peek&nbsp;at&nbsp;the&nbsp;input&nbsp;rune&nbsp;to&nbsp;see&nbsp;which&nbsp;branch&nbsp;of&nbsp;the&nbsp;Alt&nbsp;to&nbsp;take</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384513">case</span>&nbsp;<span class="ident" id="5384518"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384524">.</span><span class="ident" id="5384525">InstAlt</span><span class="op" id="5384532">,</span>&nbsp;<span class="ident" id="5384534"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384540">.</span><span class="ident" id="5384541">InstAltMatch</span><span class="op" id="5384553">:</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384558"><a href="/regexp/exec.go.html#5383469">pc</a></span>&nbsp;<span class="op" id="5384561">=</span>&nbsp;<span class="builtintype" id="5384563">int</span><span class="op" id="5384566">(</span><span class="ident" id="5384567"><a href="/regexp/onepass.go.html#5388410">onePassNext</a></span><span class="op" id="5384578">(</span><span class="op" id="5384579">&amp;</span><span class="ident" id="5384580"><a href="/regexp/exec.go.html#5383487">inst</a></span><span class="op" id="5384584">,</span>&nbsp;<span class="ident" id="5384586"><a href="/regexp/exec.go.html#5383217">r</a></span><span class="op" id="5384587">)</span><span class="op" id="5384588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384593">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384604">case</span>&nbsp;<span class="ident" id="5384609"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384615">.</span><span class="ident" id="5384616">InstFail</span><span class="op" id="5384624">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384629">return</span>&nbsp;<span class="ident" id="5384636"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5384637">.</span><span class="ident" id="5384638">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384648">case</span>&nbsp;<span class="ident" id="5384653"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384659">.</span><span class="ident" id="5384660">InstNop</span><span class="op" id="5384667">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384672">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384683">case</span>&nbsp;<span class="ident" id="5384688"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384694">.</span><span class="ident" id="5384695">InstEmptyWidth</span><span class="op" id="5384709">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384714">if</span>&nbsp;<span class="ident" id="5384717"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384723">.</span><span class="ident" id="5384724">EmptyOp</span><span class="op" id="5384731">(</span><span class="ident" id="5384732"><a href="/regexp/exec.go.html#5383487">inst</a></span><span class="op" id="5384736">.</span><span class="ident" id="5384737">Arg</span><span class="op" id="5384740">)</span><span class="op" id="5384741">&amp;^</span><span class="ident" id="5384743"><a href="/regexp/exec.go.html#5383358">flag</a></span>&nbsp;<span class="op" id="5384748">!=</span>&nbsp;<span class="num" id="5384751">0</span>&nbsp;<span class="op" id="5384753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384759">return</span>&nbsp;<span class="ident" id="5384766"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5384767">.</span><span class="ident" id="5384768">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384779">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384784">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384795">case</span>&nbsp;<span class="ident" id="5384800"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384806">.</span><span class="ident" id="5384807">InstCapture</span><span class="op" id="5384818">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384823">if</span>&nbsp;<span class="builtintype" id="5384826">int</span><span class="op" id="5384829">(</span><span class="ident" id="5384830"><a href="/regexp/exec.go.html#5383487">inst</a></span><span class="op" id="5384834">.</span><span class="ident" id="5384835">Arg</span><span class="op" id="5384838">)</span>&nbsp;<span class="op" id="5384840">&lt;</span>&nbsp;<span class="builtinfunc" id="5384842">len</span><span class="op" id="5384845">(</span><span class="ident" id="5384846"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5384847">.</span><span class="ident" id="5384848">matchcap</span><span class="op" id="5384856">)</span>&nbsp;<span class="op" id="5384858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384864"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5384865">.</span><span class="ident" id="5384866">matchcap</span><span class="op" id="5384874">[</span><span class="ident" id="5384875"><a href="/regexp/exec.go.html#5383487">inst</a></span><span class="op" id="5384879">.</span><span class="ident" id="5384880">Arg</span><span class="op" id="5384883">]</span>&nbsp;<span class="op" id="5384885">=</span>&nbsp;<span class="ident" id="5384887"><a href="/regexp/exec.go.html#5383034">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384894">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384899">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384914">if</span>&nbsp;<span class="ident" id="5384917"><a href="/regexp/exec.go.html#5383248">width</a></span>&nbsp;<span class="op" id="5384923">==</span>&nbsp;<span class="num" id="5384926">0</span>&nbsp;<span class="op" id="5384928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5384933">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5384941">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384945"><a href="/regexp/exec.go.html#5383358">flag</a></span>&nbsp;<span class="op" id="5384950">=</span>&nbsp;<span class="ident" id="5384952"><a href="/regexp/exec.go.html#5375218">syntax</a></span><span class="op" id="5384958">.</span><span class="ident" id="5384959">EmptyOpContext</span><span class="op" id="5384973">(</span><span class="ident" id="5384974"><a href="/regexp/exec.go.html#5383217">r</a></span><span class="op" id="5384975">,</span>&nbsp;<span class="ident" id="5384977"><a href="/regexp/exec.go.html#5383220">r1</a></span><span class="op" id="5384979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384983"><a href="/regexp/exec.go.html#5383034">pos</a></span>&nbsp;<span class="op" id="5384987">+=</span>&nbsp;<span class="ident" id="5384990"><a href="/regexp/exec.go.html#5383248">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5384998"><a href="/regexp/exec.go.html#5383217">r</a></span><span class="op" id="5384999">,</span>&nbsp;<span class="ident" id="5385001"><a href="/regexp/exec.go.html#5383248">width</a></span>&nbsp;<span class="op" id="5385007">=</span>&nbsp;<span class="ident" id="5385009"><a href="/regexp/exec.go.html#5383220">r1</a></span><span class="op" id="5385011">,</span>&nbsp;<span class="ident" id="5385013"><a href="/regexp/exec.go.html#5383255">width1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385022">if</span>&nbsp;<span class="ident" id="5385025"><a href="/regexp/exec.go.html#5383217">r</a></span>&nbsp;<span class="op" id="5385027">!=</span>&nbsp;<span class="ident" id="5385030"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span>&nbsp;<span class="op" id="5385040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385045"><a href="/regexp/exec.go.html#5383220">r1</a></span><span class="op" id="5385047">,</span>&nbsp;<span class="ident" id="5385049"><a href="/regexp/exec.go.html#5383255">width1</a></span>&nbsp;<span class="op" id="5385056">=</span>&nbsp;<span class="ident" id="5385058"><a href="/regexp/exec.go.html#5383025">i</a></span><span class="op" id="5385059">.</span><span class="ident" id="5385060">step</span><span class="op" id="5385064">(</span><span class="ident" id="5385065"><a href="/regexp/exec.go.html#5383034">pos</a></span>&nbsp;<span class="op" id="5385069">+</span>&nbsp;<span class="ident" id="5385071"><a href="/regexp/exec.go.html#5383248">width</a></span><span class="op" id="5385076">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385086">return</span>&nbsp;<span class="ident" id="5385093"><a href="/regexp/exec.go.html#5383005">m</a></span><span class="op" id="5385094">.</span><span class="ident" id="5385095">matched</span><br>
<span class="lineno"></span><span class="op" id="5385103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">415</span><span class="comment" id="5385106">//&nbsp;empty&nbsp;is&nbsp;a&nbsp;non-nil&nbsp;0-element&nbsp;slice,</span><br>
<span class="lineno"></span><span class="comment" id="5385145">//&nbsp;so&nbsp;doExecute&nbsp;can&nbsp;avoid&nbsp;an&nbsp;allocation</span><br>
<span class="lineno"></span><span class="comment" id="5385185">//&nbsp;when&nbsp;0&nbsp;captures&nbsp;are&nbsp;requested&nbsp;from&nbsp;a&nbsp;successful&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5385243">var</span>&nbsp;<span class="ident" id="5385247">empty</span>&nbsp;<span class="op" id="5385253">=</span>&nbsp;<span class="builtinfunc" id="5385255">make</span><span class="op" id="5385259">(</span><span class="op" id="5385260">[</span><span class="op" id="5385261">]</span><span class="builtintype" id="5385262">int</span><span class="op" id="5385265">,</span>&nbsp;<span class="num" id="5385267">0</span><span class="op" id="5385268">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="5385271">//&nbsp;doExecute&nbsp;finds&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;the&nbsp;input&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="5385334">//&nbsp;the&nbsp;position&nbsp;of&nbsp;its&nbsp;subexpressions.</span><br>
<span class="lineno"></span><span class="keyword" id="5385373">func</span>&nbsp;<span class="op" id="5385378">(</span><span class="ident" id="5385379">re</span>&nbsp;<span class="op" id="5385382">*</span><span class="ident" id="5385383"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5385389">)</span>&nbsp;<span class="ident" id="5385391">doExecute</span><span class="op" id="5385400">(</span><span class="ident" id="5385401">r</span>&nbsp;<span class="ident" id="5385403"><a href="/regexp/exec.go.html#5375212">io</a></span><span class="op" id="5385405">.</span><span class="ident" id="5385406">RuneReader</span><span class="op" id="5385416">,</span>&nbsp;<span class="ident" id="5385418">b</span>&nbsp;<span class="op" id="5385420">[</span><span class="op" id="5385421">]</span><span class="builtintype" id="5385422">byte</span><span class="op" id="5385426">,</span>&nbsp;<span class="ident" id="5385428">s</span>&nbsp;<span class="builtintype" id="5385430">string</span><span class="op" id="5385436">,</span>&nbsp;<span class="ident" id="5385438">pos</span>&nbsp;<span class="builtintype" id="5385442">int</span><span class="op" id="5385445">,</span>&nbsp;<span class="ident" id="5385447">ncap</span>&nbsp;<span class="builtintype" id="5385452">int</span><span class="op" id="5385455">)</span>&nbsp;<span class="op" id="5385457">[</span><span class="op" id="5385458">]</span><span class="builtintype" id="5385459">int</span>&nbsp;<span class="op" id="5385463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385466">m</span>&nbsp;<span class="op" id="5385468">:=</span>&nbsp;<span class="ident" id="5385471"><a href="/regexp/exec.go.html#5385379">re</a></span><span class="op" id="5385473">.</span><span class="ident" id="5385474">get</span><span class="op" id="5385477">(</span><span class="op" id="5385478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385481">var</span>&nbsp;<span class="ident" id="5385485">i</span>&nbsp;<span class="ident" id="5385487"><a href="/regexp/regexp.go.html#5411636">input</a></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385494">if</span>&nbsp;<span class="ident" id="5385497"><a href="/regexp/exec.go.html#5385401">r</a></span>&nbsp;<span class="op" id="5385499">!=</span>&nbsp;<span class="ident" id="5385502">nil</span>&nbsp;<span class="op" id="5385506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385510"><a href="/regexp/exec.go.html#5385485">i</a></span>&nbsp;<span class="op" id="5385512">=</span>&nbsp;<span class="ident" id="5385514"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385515">.</span><span class="ident" id="5385516">newInputReader</span><span class="op" id="5385530">(</span><span class="ident" id="5385531"><a href="/regexp/exec.go.html#5385401">r</a></span><span class="op" id="5385532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385535">}</span>&nbsp;<span class="keyword" id="5385537">else</span>&nbsp;<span class="keyword" id="5385542">if</span>&nbsp;<span class="ident" id="5385545"><a href="/regexp/exec.go.html#5385418">b</a></span>&nbsp;<span class="op" id="5385547">!=</span>&nbsp;<span class="ident" id="5385550">nil</span>&nbsp;<span class="op" id="5385554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385558"><a href="/regexp/exec.go.html#5385485">i</a></span>&nbsp;<span class="op" id="5385560">=</span>&nbsp;<span class="ident" id="5385562"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385563">.</span><span class="ident" id="5385564">newInputBytes</span><span class="op" id="5385577">(</span><span class="ident" id="5385578"><a href="/regexp/exec.go.html#5385418">b</a></span><span class="op" id="5385579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385582">}</span>&nbsp;<span class="keyword" id="5385584">else</span>&nbsp;<span class="op" id="5385589">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385593"><a href="/regexp/exec.go.html#5385485">i</a></span>&nbsp;<span class="op" id="5385595">=</span>&nbsp;<span class="ident" id="5385597"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385598">.</span><span class="ident" id="5385599">newInputString</span><span class="op" id="5385613">(</span><span class="ident" id="5385614"><a href="/regexp/exec.go.html#5385428">s</a></span><span class="op" id="5385615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385621">if</span>&nbsp;<span class="ident" id="5385624"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385625">.</span><span class="ident" id="5385626">op</span>&nbsp;<span class="op" id="5385629">!=</span>&nbsp;<span class="ident" id="5385632"><a href="/regexp/onepass.go.html#5400571">notOnePass</a></span>&nbsp;<span class="op" id="5385643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385647">if</span>&nbsp;<span class="op" id="5385650">!</span><span class="ident" id="5385651"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385652">.</span><span class="ident" id="5385653">onepass</span><span class="op" id="5385660">(</span><span class="ident" id="5385661"><a href="/regexp/exec.go.html#5385485">i</a></span><span class="op" id="5385662">,</span>&nbsp;<span class="ident" id="5385664"><a href="/regexp/exec.go.html#5385438">pos</a></span><span class="op" id="5385667">)</span>&nbsp;<span class="op" id="5385669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385674"><a href="/regexp/exec.go.html#5385379">re</a></span><span class="op" id="5385676">.</span><span class="ident" id="5385677">put</span><span class="op" id="5385680">(</span><span class="ident" id="5385681"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385682">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385687">return</span>&nbsp;<span class="ident" id="5385694">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385703">}</span>&nbsp;<span class="keyword" id="5385705">else</span>&nbsp;<span class="op" id="5385710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385714"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385715">.</span><span class="ident" id="5385716">init</span><span class="op" id="5385720">(</span><span class="ident" id="5385721"><a href="/regexp/exec.go.html#5385447">ncap</a></span><span class="op" id="5385725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385729">if</span>&nbsp;<span class="op" id="5385732">!</span><span class="ident" id="5385733"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385734">.</span><span class="ident" id="5385735">match</span><span class="op" id="5385740">(</span><span class="ident" id="5385741"><a href="/regexp/exec.go.html#5385485">i</a></span><span class="op" id="5385742">,</span>&nbsp;<span class="ident" id="5385744"><a href="/regexp/exec.go.html#5385438">pos</a></span><span class="op" id="5385747">)</span>&nbsp;<span class="op" id="5385749">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385754"><a href="/regexp/exec.go.html#5385379">re</a></span><span class="op" id="5385756">.</span><span class="ident" id="5385757">put</span><span class="op" id="5385760">(</span><span class="ident" id="5385761"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385767">return</span>&nbsp;<span class="ident" id="5385774">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385786">if</span>&nbsp;<span class="ident" id="5385789"><a href="/regexp/exec.go.html#5385447">ncap</a></span>&nbsp;<span class="op" id="5385794">==</span>&nbsp;<span class="num" id="5385797">0</span>&nbsp;<span class="op" id="5385799">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385803"><a href="/regexp/exec.go.html#5385379">re</a></span><span class="op" id="5385805">.</span><span class="ident" id="5385806">put</span><span class="op" id="5385809">(</span><span class="ident" id="5385810"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385815">return</span>&nbsp;<span class="ident" id="5385822"><a href="/regexp/exec.go.html#5385247">empty</a></span>&nbsp;<span class="comment" id="5385828">//&nbsp;empty&nbsp;but&nbsp;not&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5385850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5385853">cap</span>&nbsp;<span class="op" id="5385857">:=</span>&nbsp;<span class="builtinfunc" id="5385860">make</span><span class="op" id="5385864">(</span><span class="op" id="5385865">[</span><span class="op" id="5385866">]</span><span class="builtintype" id="5385867">int</span><span class="op" id="5385870">,</span>&nbsp;<span class="builtinfunc" id="5385872">len</span><span class="op" id="5385875">(</span><span class="ident" id="5385876"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385877">.</span><span class="ident" id="5385878">matchcap</span><span class="op" id="5385886">)</span><span class="op" id="5385887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5385890">copy</span><span class="op" id="5385894">(</span><span class="builtinfunc" id="5385895"><a href="/regexp/exec.go.html#5385853">cap</a></span><span class="op" id="5385898">,</span>&nbsp;<span class="ident" id="5385900"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385901">.</span><span class="ident" id="5385902">matchcap</span><span class="op" id="5385910">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5385913"><a href="/regexp/exec.go.html#5385379">re</a></span><span class="op" id="5385915">.</span><span class="ident" id="5385916">put</span><span class="op" id="5385919">(</span><span class="ident" id="5385920"><a href="/regexp/exec.go.html#5385466">m</a></span><span class="op" id="5385921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5385924">return</span>&nbsp;<span class="builtinfunc" id="5385931"><a href="/regexp/exec.go.html#5385853">cap</a></span><br>
<span class="lineno"></span><span class="op" id="5385935">}</span>
</div>
</body>
</html>
