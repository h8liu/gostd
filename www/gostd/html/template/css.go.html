<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html" class="current">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3488977">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3489032">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3489086">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3489137">package</span>&nbsp;<span class="ident" id="3489145">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3489155">import</span>&nbsp;<span class="op" id="3489162">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3489165">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3489174">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3489181">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3489192">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3489207">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3489210">//&nbsp;endsWithCSSKeyword&nbsp;reports&nbsp;whether&nbsp;b&nbsp;ends&nbsp;with&nbsp;an&nbsp;ident&nbsp;that</span><br>
<span class="lineno">15</span><span class="comment" id="3489274">//&nbsp;case-insensitively&nbsp;matches&nbsp;the&nbsp;lower-case&nbsp;kw.</span><br>
<span class="lineno"></span><span class="keyword" id="3489323">func</span>&nbsp;<span class="ident" id="3489328">endsWithCSSKeyword</span><span class="op" id="3489346">(</span><span class="ident" id="3489347">b</span>&nbsp;<span class="op" id="3489349">[</span><span class="op" id="3489350">]</span><span class="builtintype" id="3489351">byte</span><span class="op" id="3489355">,</span>&nbsp;<span class="ident" id="3489357">kw</span>&nbsp;<span class="builtintype" id="3489360">string</span><span class="op" id="3489366">)</span>&nbsp;<span class="builtintype" id="3489368">bool</span>&nbsp;<span class="op" id="3489373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3489376">i</span>&nbsp;<span class="op" id="3489378">:=</span>&nbsp;<span class="builtinfunc" id="3489381">len</span><span class="op" id="3489384">(</span><span class="ident" id="3489385">b</span><span class="op" id="3489386">)</span>&nbsp;<span class="op" id="3489388">-</span>&nbsp;<span class="builtinfunc" id="3489390">len</span><span class="op" id="3489393">(</span><span class="ident" id="3489394">kw</span><span class="op" id="3489396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3489399">if</span>&nbsp;<span class="ident" id="3489402">i</span>&nbsp;<span class="op" id="3489404">&lt;</span>&nbsp;<span class="num" id="3489406">0</span>&nbsp;<span class="op" id="3489408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3489412">//&nbsp;Too&nbsp;short.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3489428">return</span>&nbsp;<span class="builtintype" id="3489435">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3489442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3489445">if</span>&nbsp;<span class="ident" id="3489448">i</span>&nbsp;<span class="op" id="3489450">!=</span>&nbsp;<span class="num" id="3489453">0</span>&nbsp;<span class="op" id="3489455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3489459">r</span><span class="op" id="3489460">,</span>&nbsp;<span class="ident" id="3489462">_</span>&nbsp;<span class="op" id="3489464">:=</span>&nbsp;<span class="ident" id="3489467">utf8</span><span class="op" id="3489471">.</span><span class="ident" id="3489472">DecodeLastRune</span><span class="op" id="3489486">(</span><span class="ident" id="3489487">b</span><span class="op" id="3489488">[</span><span class="op" id="3489489">:</span><span class="ident" id="3489490">i</span><span class="op" id="3489491">]</span><span class="op" id="3489492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3489496">if</span>&nbsp;<span class="ident" id="3489499">isCSSNmchar</span><span class="op" id="3489510">(</span><span class="ident" id="3489511">r</span><span class="op" id="3489512">)</span>&nbsp;<span class="op" id="3489514">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3489519">//&nbsp;Too&nbsp;long.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3489535">return</span>&nbsp;<span class="builtintype" id="3489542">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3489550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3489553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3489556">//&nbsp;Many&nbsp;CSS&nbsp;keywords,&nbsp;such&nbsp;as&nbsp;&#34;!important&#34;&nbsp;can&nbsp;have&nbsp;characters&nbsp;encoded,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3489629">//&nbsp;but&nbsp;the&nbsp;URI&nbsp;production&nbsp;does&nbsp;not&nbsp;allow&nbsp;that&nbsp;according&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3489689">//&nbsp;http://www.w3.org/TR/css3-syntax/#TOK-URI</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3489735">//&nbsp;This&nbsp;does&nbsp;not&nbsp;attempt&nbsp;to&nbsp;recognize&nbsp;encoded&nbsp;keywords.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3489805">//&nbsp;given&nbsp;&#34;\75\72\6c&#34;&nbsp;and&nbsp;&#34;url&#34;&nbsp;this&nbsp;return&nbsp;false.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3489856">return</span>&nbsp;<span class="builtintype" id="3489863">string</span><span class="op" id="3489869">(</span><span class="ident" id="3489870">bytes</span><span class="op" id="3489875">.</span><span class="ident" id="3489876">ToLower</span><span class="op" id="3489883">(</span><span class="ident" id="3489884">b</span><span class="op" id="3489885">[</span><span class="ident" id="3489886">i</span><span class="op" id="3489887">:</span><span class="op" id="3489888">]</span><span class="op" id="3489889">)</span><span class="op" id="3489890">)</span>&nbsp;<span class="op" id="3489892">==</span>&nbsp;<span class="ident" id="3489895">kw</span><br>
<span class="lineno">35</span><span class="op" id="3489898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3489901">//&nbsp;isCSSNmchar&nbsp;reports&nbsp;whether&nbsp;rune&nbsp;is&nbsp;allowed&nbsp;anywhere&nbsp;in&nbsp;a&nbsp;CSS&nbsp;identifier.</span><br>
<span class="lineno"></span><span class="keyword" id="3489978">func</span>&nbsp;<span class="ident" id="3489983">isCSSNmchar</span><span class="op" id="3489994">(</span><span class="ident" id="3489995">r</span>&nbsp;<span class="builtintype" id="3489997">rune</span><span class="op" id="3490001">)</span>&nbsp;<span class="builtintype" id="3490003">bool</span>&nbsp;<span class="op" id="3490008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3490011">//&nbsp;Based&nbsp;on&nbsp;the&nbsp;CSS3&nbsp;nmchar&nbsp;production&nbsp;but&nbsp;ignores&nbsp;multi-rune&nbsp;escape</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3490081">//&nbsp;sequences.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3490096">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-nmchar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3490148">return</span>&nbsp;<span class="string" id="3490155">&#39;a&#39;</span>&nbsp;<span class="op" id="3490159">&lt;=</span>&nbsp;<span class="ident" id="3490162">r</span>&nbsp;<span class="op" id="3490164">&amp;&amp;</span>&nbsp;<span class="ident" id="3490167">r</span>&nbsp;<span class="op" id="3490169">&lt;=</span>&nbsp;<span class="string" id="3490172">&#39;z&#39;</span>&nbsp;<span class="op" id="3490176">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3490181">&#39;A&#39;</span>&nbsp;<span class="op" id="3490185">&lt;=</span>&nbsp;<span class="ident" id="3490188">r</span>&nbsp;<span class="op" id="3490190">&amp;&amp;</span>&nbsp;<span class="ident" id="3490193">r</span>&nbsp;<span class="op" id="3490195">&lt;=</span>&nbsp;<span class="string" id="3490198">&#39;Z&#39;</span>&nbsp;<span class="op" id="3490202">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3490207">&#39;0&#39;</span>&nbsp;<span class="op" id="3490211">&lt;=</span>&nbsp;<span class="ident" id="3490214">r</span>&nbsp;<span class="op" id="3490216">&amp;&amp;</span>&nbsp;<span class="ident" id="3490219">r</span>&nbsp;<span class="op" id="3490221">&lt;=</span>&nbsp;<span class="string" id="3490224">&#39;9&#39;</span>&nbsp;<span class="op" id="3490228">||</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3490233">r</span>&nbsp;<span class="op" id="3490235">==</span>&nbsp;<span class="string" id="3490238">&#39;-&#39;</span>&nbsp;<span class="op" id="3490242">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3490247">r</span>&nbsp;<span class="op" id="3490249">==</span>&nbsp;<span class="string" id="3490252">&#39;_&#39;</span>&nbsp;<span class="op" id="3490256">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3490261">//&nbsp;Non-ASCII&nbsp;cases&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3490289">0x80</span>&nbsp;<span class="op" id="3490294">&lt;=</span>&nbsp;<span class="ident" id="3490297">r</span>&nbsp;<span class="op" id="3490299">&amp;&amp;</span>&nbsp;<span class="ident" id="3490302">r</span>&nbsp;<span class="op" id="3490304">&lt;=</span>&nbsp;<span class="num" id="3490307">0xd7ff</span>&nbsp;<span class="op" id="3490314">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3490319">0xe000</span>&nbsp;<span class="op" id="3490326">&lt;=</span>&nbsp;<span class="ident" id="3490329">r</span>&nbsp;<span class="op" id="3490331">&amp;&amp;</span>&nbsp;<span class="ident" id="3490334">r</span>&nbsp;<span class="op" id="3490336">&lt;=</span>&nbsp;<span class="num" id="3490339">0xfffd</span>&nbsp;<span class="op" id="3490346">||</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="3490351">0x10000</span>&nbsp;<span class="op" id="3490359">&lt;=</span>&nbsp;<span class="ident" id="3490362">r</span>&nbsp;<span class="op" id="3490364">&amp;&amp;</span>&nbsp;<span class="ident" id="3490367">r</span>&nbsp;<span class="op" id="3490369">&lt;=</span>&nbsp;<span class="num" id="3490372">0x10ffff</span><br>
<span class="lineno"></span><span class="op" id="3490381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3490384">//&nbsp;decodeCSS&nbsp;decodes&nbsp;CSS3&nbsp;escapes&nbsp;given&nbsp;a&nbsp;sequence&nbsp;of&nbsp;stringchars.</span><br>
<span class="lineno"></span><span class="comment" id="3490451">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;change,&nbsp;it&nbsp;returns&nbsp;the&nbsp;input,&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice</span><br>
<span class="lineno">55</span><span class="comment" id="3490528">//&nbsp;backed&nbsp;by&nbsp;a&nbsp;new&nbsp;array.</span><br>
<span class="lineno"></span><span class="comment" id="3490554">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-stringchar&nbsp;defines&nbsp;stringchar.</span><br>
<span class="lineno"></span><span class="keyword" id="3490629">func</span>&nbsp;<span class="ident" id="3490634">decodeCSS</span><span class="op" id="3490643">(</span><span class="ident" id="3490644">s</span>&nbsp;<span class="op" id="3490646">[</span><span class="op" id="3490647">]</span><span class="builtintype" id="3490648">byte</span><span class="op" id="3490652">)</span>&nbsp;<span class="op" id="3490654">[</span><span class="op" id="3490655">]</span><span class="builtintype" id="3490656">byte</span>&nbsp;<span class="op" id="3490661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3490664">i</span>&nbsp;<span class="op" id="3490666">:=</span>&nbsp;<span class="ident" id="3490669">bytes</span><span class="op" id="3490674">.</span><span class="ident" id="3490675">IndexByte</span><span class="op" id="3490684">(</span><span class="ident" id="3490685">s</span><span class="op" id="3490686">,</span>&nbsp;<span class="string" id="3490688">&#39;\\&#39;</span><span class="op" id="3490692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3490695">if</span>&nbsp;<span class="ident" id="3490698">i</span>&nbsp;<span class="op" id="3490700">==</span>&nbsp;<span class="op" id="3490703">-</span><span class="num" id="3490704">1</span>&nbsp;<span class="op" id="3490706">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3490710">return</span>&nbsp;<span class="ident" id="3490717">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3490720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3490723">//&nbsp;The&nbsp;UTF-8&nbsp;sequence&nbsp;for&nbsp;a&nbsp;codepoint&nbsp;is&nbsp;never&nbsp;longer&nbsp;than&nbsp;1&nbsp;+&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3490791">//&nbsp;number&nbsp;hex&nbsp;digits&nbsp;need&nbsp;to&nbsp;represent&nbsp;that&nbsp;codepoint,&nbsp;so&nbsp;len(s)&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3490863">//&nbsp;upper&nbsp;bound&nbsp;on&nbsp;the&nbsp;output&nbsp;length.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3490901">b</span>&nbsp;<span class="op" id="3490903">:=</span>&nbsp;<span class="builtinfunc" id="3490906">make</span><span class="op" id="3490910">(</span><span class="op" id="3490911">[</span><span class="op" id="3490912">]</span><span class="builtintype" id="3490913">byte</span><span class="op" id="3490917">,</span>&nbsp;<span class="num" id="3490919">0</span><span class="op" id="3490920">,</span>&nbsp;<span class="builtinfunc" id="3490922">len</span><span class="op" id="3490925">(</span><span class="ident" id="3490926">s</span><span class="op" id="3490927">)</span><span class="op" id="3490928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3490931">for</span>&nbsp;<span class="builtinfunc" id="3490935">len</span><span class="op" id="3490938">(</span><span class="ident" id="3490939">s</span><span class="op" id="3490940">)</span>&nbsp;<span class="op" id="3490942">!=</span>&nbsp;<span class="num" id="3490945">0</span>&nbsp;<span class="op" id="3490947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3490951">i</span>&nbsp;<span class="op" id="3490953">:=</span>&nbsp;<span class="ident" id="3490956">bytes</span><span class="op" id="3490961">.</span><span class="ident" id="3490962">IndexByte</span><span class="op" id="3490971">(</span><span class="ident" id="3490972">s</span><span class="op" id="3490973">,</span>&nbsp;<span class="string" id="3490975">&#39;\\&#39;</span><span class="op" id="3490979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3490983">if</span>&nbsp;<span class="ident" id="3490986">i</span>&nbsp;<span class="op" id="3490988">==</span>&nbsp;<span class="op" id="3490991">-</span><span class="num" id="3490992">1</span>&nbsp;<span class="op" id="3490994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3490999">i</span>&nbsp;<span class="op" id="3491001">=</span>&nbsp;<span class="builtinfunc" id="3491003">len</span><span class="op" id="3491006">(</span><span class="ident" id="3491007">s</span><span class="op" id="3491008">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3491012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3491016">b</span><span class="op" id="3491017">,</span>&nbsp;<span class="ident" id="3491019">s</span>&nbsp;<span class="op" id="3491021">=</span>&nbsp;<span class="builtinfunc" id="3491023">append</span><span class="op" id="3491029">(</span><span class="ident" id="3491030">b</span><span class="op" id="3491031">,</span>&nbsp;<span class="ident" id="3491033">s</span><span class="op" id="3491034">[</span><span class="op" id="3491035">:</span><span class="ident" id="3491036">i</span><span class="op" id="3491037">]</span><span class="op" id="3491038">...</span><span class="op" id="3491041">)</span><span class="op" id="3491042">,</span>&nbsp;<span class="ident" id="3491044">s</span><span class="op" id="3491045">[</span><span class="ident" id="3491046">i</span><span class="op" id="3491047">:</span><span class="op" id="3491048">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3491052">if</span>&nbsp;<span class="builtinfunc" id="3491055">len</span><span class="op" id="3491058">(</span><span class="ident" id="3491059">s</span><span class="op" id="3491060">)</span>&nbsp;<span class="op" id="3491062">&lt;</span>&nbsp;<span class="num" id="3491064">2</span>&nbsp;<span class="op" id="3491066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3491071">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3491079">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3491083">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3491136">//&nbsp;escape&nbsp;::=&nbsp;unicode&nbsp;|&nbsp;&#39;\&#39;&nbsp;[#x20-#x7E#x80-#xD7FF#xE000-#xFFFD#x10000-#x10FFFF]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3491218">if</span>&nbsp;<span class="ident" id="3491221">isHex</span><span class="op" id="3491226">(</span><span class="ident" id="3491227">s</span><span class="op" id="3491228">[</span><span class="num" id="3491229">1</span><span class="op" id="3491230">]</span><span class="op" id="3491231">)</span>&nbsp;<span class="op" id="3491233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3491238">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-unicode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3491293">//&nbsp;&nbsp;&nbsp;unicode&nbsp;::=&nbsp;&#39;\&#39;&nbsp;[0-9a-fA-F]{1,6}&nbsp;wc?</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3491338">j</span>&nbsp;<span class="op" id="3491340">:=</span>&nbsp;<span class="num" id="3491343">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3491348">for</span>&nbsp;<span class="ident" id="3491352">j</span>&nbsp;<span class="op" id="3491354">&lt;</span>&nbsp;<span class="builtinfunc" id="3491356">len</span><span class="op" id="3491359">(</span><span class="ident" id="3491360">s</span><span class="op" id="3491361">)</span>&nbsp;<span class="op" id="3491363">&amp;&amp;</span>&nbsp;<span class="ident" id="3491366">j</span>&nbsp;<span class="op" id="3491368">&lt;</span>&nbsp;<span class="num" id="3491370">7</span>&nbsp;<span class="op" id="3491372">&amp;&amp;</span>&nbsp;<span class="ident" id="3491375">isHex</span><span class="op" id="3491380">(</span><span class="ident" id="3491381">s</span><span class="op" id="3491382">[</span><span class="ident" id="3491383">j</span><span class="op" id="3491384">]</span><span class="op" id="3491385">)</span>&nbsp;<span class="op" id="3491387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3491393">j</span><span class="op" id="3491394">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3491400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3491405">r</span>&nbsp;<span class="op" id="3491407">:=</span>&nbsp;<span class="ident" id="3491410">hexDecode</span><span class="op" id="3491419">(</span><span class="ident" id="3491420">s</span><span class="op" id="3491421">[</span><span class="num" id="3491422">1</span><span class="op" id="3491423">:</span><span class="ident" id="3491424">j</span><span class="op" id="3491425">]</span><span class="op" id="3491426">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3491431">if</span>&nbsp;<span class="ident" id="3491434">r</span>&nbsp;<span class="op" id="3491436">&gt;</span>&nbsp;<span class="ident" id="3491438">unicode</span><span class="op" id="3491445">.</span><span class="ident" id="3491446">MaxRune</span>&nbsp;<span class="op" id="3491454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3491460">r</span><span class="op" id="3491461">,</span>&nbsp;<span class="ident" id="3491463">j</span>&nbsp;<span class="op" id="3491465">=</span>&nbsp;<span class="ident" id="3491467">r</span><span class="op" id="3491468">/</span><span class="num" id="3491469">16</span><span class="op" id="3491471">,</span>&nbsp;<span class="ident" id="3491473">j</span><span class="op" id="3491474">-</span><span class="num" id="3491475">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3491480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3491485">n</span>&nbsp;<span class="op" id="3491487">:=</span>&nbsp;<span class="ident" id="3491490">utf8</span><span class="op" id="3491494">.</span><span class="ident" id="3491495">EncodeRune</span><span class="op" id="3491505">(</span><span class="ident" id="3491506">b</span><span class="op" id="3491507">[</span><span class="builtinfunc" id="3491508">len</span><span class="op" id="3491511">(</span><span class="ident" id="3491512">b</span><span class="op" id="3491513">)</span><span class="op" id="3491514">:</span><span class="builtinfunc" id="3491515">cap</span><span class="op" id="3491518">(</span><span class="ident" id="3491519">b</span><span class="op" id="3491520">)</span><span class="op" id="3491521">]</span><span class="op" id="3491522">,</span>&nbsp;<span class="ident" id="3491524">r</span><span class="op" id="3491525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3491530">//&nbsp;The&nbsp;optional&nbsp;space&nbsp;at&nbsp;the&nbsp;end&nbsp;allows&nbsp;a&nbsp;hex</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3491579">//&nbsp;sequence&nbsp;to&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;literal&nbsp;hex.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3491627">//&nbsp;string(decodeCSS([]byte(`\A&nbsp;B`)))&nbsp;==&nbsp;&#34;\nB&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3491676">b</span><span class="op" id="3491677">,</span>&nbsp;<span class="ident" id="3491679">s</span>&nbsp;<span class="op" id="3491681">=</span>&nbsp;<span class="ident" id="3491683">b</span><span class="op" id="3491684">[</span><span class="op" id="3491685">:</span><span class="builtinfunc" id="3491686">len</span><span class="op" id="3491689">(</span><span class="ident" id="3491690">b</span><span class="op" id="3491691">)</span><span class="op" id="3491692">+</span><span class="ident" id="3491693">n</span><span class="op" id="3491694">]</span><span class="op" id="3491695">,</span>&nbsp;<span class="ident" id="3491697">skipCSSSpace</span><span class="op" id="3491709">(</span><span class="ident" id="3491710">s</span><span class="op" id="3491711">[</span><span class="ident" id="3491712">j</span><span class="op" id="3491713">:</span><span class="op" id="3491714">]</span><span class="op" id="3491715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3491719">}</span>&nbsp;<span class="keyword" id="3491721">else</span>&nbsp;<span class="op" id="3491726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3491731">//&nbsp;`\\`&nbsp;decodes&nbsp;to&nbsp;`\`&nbsp;and&nbsp;`\&#34;`&nbsp;to&nbsp;`&#34;`.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3491774">_</span><span class="op" id="3491775">,</span>&nbsp;<span class="ident" id="3491777">n</span>&nbsp;<span class="op" id="3491779">:=</span>&nbsp;<span class="ident" id="3491782">utf8</span><span class="op" id="3491786">.</span><span class="ident" id="3491787">DecodeRune</span><span class="op" id="3491797">(</span><span class="ident" id="3491798">s</span><span class="op" id="3491799">[</span><span class="num" id="3491800">1</span><span class="op" id="3491801">:</span><span class="op" id="3491802">]</span><span class="op" id="3491803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3491808">b</span><span class="op" id="3491809">,</span>&nbsp;<span class="ident" id="3491811">s</span>&nbsp;<span class="op" id="3491813">=</span>&nbsp;<span class="builtinfunc" id="3491815">append</span><span class="op" id="3491821">(</span><span class="ident" id="3491822">b</span><span class="op" id="3491823">,</span>&nbsp;<span class="ident" id="3491825">s</span><span class="op" id="3491826">[</span><span class="num" id="3491827">1</span><span class="op" id="3491828">:</span><span class="num" id="3491829">1</span><span class="op" id="3491830">+</span><span class="ident" id="3491831">n</span><span class="op" id="3491832">]</span><span class="op" id="3491833">...</span><span class="op" id="3491836">)</span><span class="op" id="3491837">,</span>&nbsp;<span class="ident" id="3491839">s</span><span class="op" id="3491840">[</span><span class="num" id="3491841">1</span><span class="op" id="3491842">+</span><span class="ident" id="3491843">n</span><span class="op" id="3491844">:</span><span class="op" id="3491845">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3491849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3491852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3491855">return</span>&nbsp;<span class="ident" id="3491862">b</span><br>
<span class="lineno">100</span><span class="op" id="3491864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3491867">//&nbsp;isHex&nbsp;reports&nbsp;whether&nbsp;the&nbsp;given&nbsp;character&nbsp;is&nbsp;a&nbsp;hex&nbsp;digit.</span><br>
<span class="lineno"></span><span class="keyword" id="3491928">func</span>&nbsp;<span class="ident" id="3491933">isHex</span><span class="op" id="3491938">(</span><span class="ident" id="3491939">c</span>&nbsp;<span class="builtintype" id="3491941">byte</span><span class="op" id="3491945">)</span>&nbsp;<span class="builtintype" id="3491947">bool</span>&nbsp;<span class="op" id="3491952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3491955">return</span>&nbsp;<span class="string" id="3491962">&#39;0&#39;</span>&nbsp;<span class="op" id="3491966">&lt;=</span>&nbsp;<span class="ident" id="3491969">c</span>&nbsp;<span class="op" id="3491971">&amp;&amp;</span>&nbsp;<span class="ident" id="3491974">c</span>&nbsp;<span class="op" id="3491976">&lt;=</span>&nbsp;<span class="string" id="3491979">&#39;9&#39;</span>&nbsp;<span class="op" id="3491983">||</span>&nbsp;<span class="string" id="3491986">&#39;a&#39;</span>&nbsp;<span class="op" id="3491990">&lt;=</span>&nbsp;<span class="ident" id="3491993">c</span>&nbsp;<span class="op" id="3491995">&amp;&amp;</span>&nbsp;<span class="ident" id="3491998">c</span>&nbsp;<span class="op" id="3492000">&lt;=</span>&nbsp;<span class="string" id="3492003">&#39;f&#39;</span>&nbsp;<span class="op" id="3492007">||</span>&nbsp;<span class="string" id="3492010">&#39;A&#39;</span>&nbsp;<span class="op" id="3492014">&lt;=</span>&nbsp;<span class="ident" id="3492017">c</span>&nbsp;<span class="op" id="3492019">&amp;&amp;</span>&nbsp;<span class="ident" id="3492022">c</span>&nbsp;<span class="op" id="3492024">&lt;=</span>&nbsp;<span class="string" id="3492027">&#39;F&#39;</span><br>
<span class="lineno">105</span><span class="op" id="3492031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3492034">//&nbsp;hexDecode&nbsp;decodes&nbsp;a&nbsp;short&nbsp;hex&nbsp;digit&nbsp;sequence:&nbsp;&#34;10&#34;&nbsp;-&gt;&nbsp;16.</span><br>
<span class="lineno"></span><span class="keyword" id="3492095">func</span>&nbsp;<span class="ident" id="3492100">hexDecode</span><span class="op" id="3492109">(</span><span class="ident" id="3492110">s</span>&nbsp;<span class="op" id="3492112">[</span><span class="op" id="3492113">]</span><span class="builtintype" id="3492114">byte</span><span class="op" id="3492118">)</span>&nbsp;<span class="builtintype" id="3492120">rune</span>&nbsp;<span class="op" id="3492125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3492128">n</span>&nbsp;<span class="op" id="3492130">:=</span>&nbsp;<span class="string" id="3492133">&#39;\x00&#39;</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492141">for</span>&nbsp;<span class="ident" id="3492145">_</span><span class="op" id="3492146">,</span>&nbsp;<span class="ident" id="3492148">c</span>&nbsp;<span class="op" id="3492150">:=</span>&nbsp;<span class="keyword" id="3492153">range</span>&nbsp;<span class="ident" id="3492159">s</span>&nbsp;<span class="op" id="3492161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3492165">n</span>&nbsp;<span class="op" id="3492167">&lt;&lt;=</span>&nbsp;<span class="num" id="3492171">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492175">switch</span>&nbsp;<span class="op" id="3492182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492186">case</span>&nbsp;<span class="string" id="3492191">&#39;0&#39;</span>&nbsp;<span class="op" id="3492195">&lt;=</span>&nbsp;<span class="ident" id="3492198">c</span>&nbsp;<span class="op" id="3492200">&amp;&amp;</span>&nbsp;<span class="ident" id="3492203">c</span>&nbsp;<span class="op" id="3492205">&lt;=</span>&nbsp;<span class="string" id="3492208">&#39;9&#39;</span><span class="op" id="3492211">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3492216">n</span>&nbsp;<span class="op" id="3492218">|=</span>&nbsp;<span class="builtintype" id="3492221">rune</span><span class="op" id="3492225">(</span><span class="ident" id="3492226">c</span>&nbsp;<span class="op" id="3492228">-</span>&nbsp;<span class="string" id="3492230">&#39;0&#39;</span><span class="op" id="3492233">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492237">case</span>&nbsp;<span class="string" id="3492242">&#39;a&#39;</span>&nbsp;<span class="op" id="3492246">&lt;=</span>&nbsp;<span class="ident" id="3492249">c</span>&nbsp;<span class="op" id="3492251">&amp;&amp;</span>&nbsp;<span class="ident" id="3492254">c</span>&nbsp;<span class="op" id="3492256">&lt;=</span>&nbsp;<span class="string" id="3492259">&#39;f&#39;</span><span class="op" id="3492262">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3492267">n</span>&nbsp;<span class="op" id="3492269">|=</span>&nbsp;<span class="builtintype" id="3492272">rune</span><span class="op" id="3492276">(</span><span class="ident" id="3492277">c</span><span class="op" id="3492278">-</span><span class="string" id="3492279">&#39;a&#39;</span><span class="op" id="3492282">)</span>&nbsp;<span class="op" id="3492284">+</span>&nbsp;<span class="num" id="3492286">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492291">case</span>&nbsp;<span class="string" id="3492296">&#39;A&#39;</span>&nbsp;<span class="op" id="3492300">&lt;=</span>&nbsp;<span class="ident" id="3492303">c</span>&nbsp;<span class="op" id="3492305">&amp;&amp;</span>&nbsp;<span class="ident" id="3492308">c</span>&nbsp;<span class="op" id="3492310">&lt;=</span>&nbsp;<span class="string" id="3492313">&#39;F&#39;</span><span class="op" id="3492316">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3492321">n</span>&nbsp;<span class="op" id="3492323">|=</span>&nbsp;<span class="builtintype" id="3492326">rune</span><span class="op" id="3492330">(</span><span class="ident" id="3492331">c</span><span class="op" id="3492332">-</span><span class="string" id="3492333">&#39;A&#39;</span><span class="op" id="3492336">)</span>&nbsp;<span class="op" id="3492338">+</span>&nbsp;<span class="num" id="3492340">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492345">default</span><span class="op" id="3492352">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3492357">panic</span><span class="op" id="3492362">(</span><span class="ident" id="3492363">fmt</span><span class="op" id="3492366">.</span><span class="ident" id="3492367">Sprintf</span><span class="op" id="3492374">(</span><span class="string" id="3492375">&#34;Bad&nbsp;hex&nbsp;digit&nbsp;in&nbsp;%q&#34;</span><span class="op" id="3492396">,</span>&nbsp;<span class="ident" id="3492398">s</span><span class="op" id="3492399">)</span><span class="op" id="3492400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3492404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3492407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492410">return</span>&nbsp;<span class="ident" id="3492417">n</span><br>
<span class="lineno"></span><span class="op" id="3492419">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="3492422">//&nbsp;skipCSSSpace&nbsp;returns&nbsp;a&nbsp;suffix&nbsp;of&nbsp;c,&nbsp;skipping&nbsp;over&nbsp;a&nbsp;single&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="3492491">func</span>&nbsp;<span class="ident" id="3492496">skipCSSSpace</span><span class="op" id="3492508">(</span><span class="ident" id="3492509">c</span>&nbsp;<span class="op" id="3492511">[</span><span class="op" id="3492512">]</span><span class="builtintype" id="3492513">byte</span><span class="op" id="3492517">)</span>&nbsp;<span class="op" id="3492519">[</span><span class="op" id="3492520">]</span><span class="builtintype" id="3492521">byte</span>&nbsp;<span class="op" id="3492526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492529">if</span>&nbsp;<span class="builtinfunc" id="3492532">len</span><span class="op" id="3492535">(</span><span class="ident" id="3492536">c</span><span class="op" id="3492537">)</span>&nbsp;<span class="op" id="3492539">==</span>&nbsp;<span class="num" id="3492542">0</span>&nbsp;<span class="op" id="3492544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492548">return</span>&nbsp;<span class="ident" id="3492555">c</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3492558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3492561">//&nbsp;wc&nbsp;::=&nbsp;#x9&nbsp;|&nbsp;#xA&nbsp;|&nbsp;#xC&nbsp;|&nbsp;#xD&nbsp;|&nbsp;#x20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492601">switch</span>&nbsp;<span class="ident" id="3492608">c</span><span class="op" id="3492609">[</span><span class="num" id="3492610">0</span><span class="op" id="3492611">]</span>&nbsp;<span class="op" id="3492613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492616">case</span>&nbsp;<span class="string" id="3492621">&#39;\t&#39;</span><span class="op" id="3492625">,</span>&nbsp;<span class="string" id="3492627">&#39;\n&#39;</span><span class="op" id="3492631">,</span>&nbsp;<span class="string" id="3492633">&#39;\f&#39;</span><span class="op" id="3492637">,</span>&nbsp;<span class="string" id="3492639">&#39;&nbsp;&#39;</span><span class="op" id="3492642">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492646">return</span>&nbsp;<span class="ident" id="3492653">c</span><span class="op" id="3492654">[</span><span class="num" id="3492655">1</span><span class="op" id="3492656">:</span><span class="op" id="3492657">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492660">case</span>&nbsp;<span class="string" id="3492665">&#39;\r&#39;</span><span class="op" id="3492669">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3492673">//&nbsp;This&nbsp;differs&nbsp;from&nbsp;CSS3&#39;s&nbsp;wc&nbsp;production&nbsp;because&nbsp;it&nbsp;contains&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3492739">//&nbsp;probable&nbsp;spec&nbsp;error&nbsp;whereby&nbsp;wc&nbsp;contains&nbsp;all&nbsp;the&nbsp;single&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3492804">//&nbsp;sequences&nbsp;in&nbsp;nl&nbsp;(newline)&nbsp;but&nbsp;not&nbsp;CRLF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492849">if</span>&nbsp;<span class="builtinfunc" id="3492852">len</span><span class="op" id="3492855">(</span><span class="ident" id="3492856">c</span><span class="op" id="3492857">)</span>&nbsp;<span class="op" id="3492859">&gt;=</span>&nbsp;<span class="num" id="3492862">2</span>&nbsp;<span class="op" id="3492864">&amp;&amp;</span>&nbsp;<span class="ident" id="3492867">c</span><span class="op" id="3492868">[</span><span class="num" id="3492869">1</span><span class="op" id="3492870">]</span>&nbsp;<span class="op" id="3492872">==</span>&nbsp;<span class="string" id="3492875">&#39;\n&#39;</span>&nbsp;<span class="op" id="3492880">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492885">return</span>&nbsp;<span class="ident" id="3492892">c</span><span class="op" id="3492893">[</span><span class="num" id="3492894">2</span><span class="op" id="3492895">:</span><span class="op" id="3492896">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3492900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492904">return</span>&nbsp;<span class="ident" id="3492911">c</span><span class="op" id="3492912">[</span><span class="num" id="3492913">1</span><span class="op" id="3492914">:</span><span class="op" id="3492915">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3492918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3492921">return</span>&nbsp;<span class="ident" id="3492928">c</span><br>
<span class="lineno">145</span><span class="op" id="3492930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3492933">//&nbsp;isCSSSpace&nbsp;reports&nbsp;whether&nbsp;b&nbsp;is&nbsp;a&nbsp;CSS&nbsp;space&nbsp;char&nbsp;as&nbsp;defined&nbsp;in&nbsp;wc.</span><br>
<span class="lineno"></span><span class="keyword" id="3493003">func</span>&nbsp;<span class="ident" id="3493008">isCSSSpace</span><span class="op" id="3493018">(</span><span class="ident" id="3493019">b</span>&nbsp;<span class="builtintype" id="3493021">byte</span><span class="op" id="3493025">)</span>&nbsp;<span class="builtintype" id="3493027">bool</span>&nbsp;<span class="op" id="3493032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493035">switch</span>&nbsp;<span class="ident" id="3493042">b</span>&nbsp;<span class="op" id="3493044">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493047">case</span>&nbsp;<span class="string" id="3493052">&#39;\t&#39;</span><span class="op" id="3493056">,</span>&nbsp;<span class="string" id="3493058">&#39;\n&#39;</span><span class="op" id="3493062">,</span>&nbsp;<span class="string" id="3493064">&#39;\f&#39;</span><span class="op" id="3493068">,</span>&nbsp;<span class="string" id="3493070">&#39;\r&#39;</span><span class="op" id="3493074">,</span>&nbsp;<span class="string" id="3493076">&#39;&nbsp;&#39;</span><span class="op" id="3493079">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493083">return</span>&nbsp;<span class="builtintype" id="3493090">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3493096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493099">return</span>&nbsp;<span class="builtintype" id="3493106">false</span><br>
<span class="lineno"></span><span class="op" id="3493112">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="3493115">//&nbsp;cssEscaper&nbsp;escapes&nbsp;HTML&nbsp;and&nbsp;CSS&nbsp;special&nbsp;characters&nbsp;using&nbsp;\&lt;hex&gt;+&nbsp;escapes.</span><br>
<span class="lineno"></span><span class="keyword" id="3493192">func</span>&nbsp;<span class="ident" id="3493197">cssEscaper</span><span class="op" id="3493207">(</span><span class="ident" id="3493208">args</span>&nbsp;<span class="op" id="3493213">...</span><span class="keyword" id="3493216">interface</span><span class="op" id="3493225">{</span><span class="op" id="3493226">}</span><span class="op" id="3493227">)</span>&nbsp;<span class="builtintype" id="3493229">string</span>&nbsp;<span class="op" id="3493236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493239">s</span><span class="op" id="3493240">,</span>&nbsp;<span class="ident" id="3493242">_</span>&nbsp;<span class="op" id="3493244">:=</span>&nbsp;<span class="ident" id="3493247">stringify</span><span class="op" id="3493256">(</span><span class="ident" id="3493257">args</span><span class="op" id="3493261">...</span><span class="op" id="3493264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493267">var</span>&nbsp;<span class="ident" id="3493271">b</span>&nbsp;<span class="ident" id="3493273">bytes</span><span class="op" id="3493278">.</span><span class="ident" id="3493279">Buffer</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493287">written</span>&nbsp;<span class="op" id="3493295">:=</span>&nbsp;<span class="num" id="3493298">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493301">for</span>&nbsp;<span class="ident" id="3493305">i</span><span class="op" id="3493306">,</span>&nbsp;<span class="ident" id="3493308">r</span>&nbsp;<span class="op" id="3493310">:=</span>&nbsp;<span class="keyword" id="3493313">range</span>&nbsp;<span class="ident" id="3493319">s</span>&nbsp;<span class="op" id="3493321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493325">var</span>&nbsp;<span class="ident" id="3493329">repl</span>&nbsp;<span class="builtintype" id="3493334">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493343">switch</span>&nbsp;<span class="ident" id="3493350">r</span>&nbsp;<span class="op" id="3493352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493356">case</span>&nbsp;<span class="num" id="3493361">0</span><span class="op" id="3493362">:</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493367">repl</span>&nbsp;<span class="op" id="3493372">=</span>&nbsp;<span class="string" id="3493374">`\0`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493381">case</span>&nbsp;<span class="string" id="3493386">&#39;\t&#39;</span><span class="op" id="3493390">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493395">repl</span>&nbsp;<span class="op" id="3493400">=</span>&nbsp;<span class="string" id="3493402">`\9`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493409">case</span>&nbsp;<span class="string" id="3493414">&#39;\n&#39;</span><span class="op" id="3493418">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493423">repl</span>&nbsp;<span class="op" id="3493428">=</span>&nbsp;<span class="string" id="3493430">`\a`</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493437">case</span>&nbsp;<span class="string" id="3493442">&#39;\f&#39;</span><span class="op" id="3493446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493451">repl</span>&nbsp;<span class="op" id="3493456">=</span>&nbsp;<span class="string" id="3493458">`\c`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493465">case</span>&nbsp;<span class="string" id="3493470">&#39;\r&#39;</span><span class="op" id="3493474">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493479">repl</span>&nbsp;<span class="op" id="3493484">=</span>&nbsp;<span class="string" id="3493486">`\d`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3493493">//&nbsp;Encode&nbsp;HTML&nbsp;specials&nbsp;as&nbsp;hex&nbsp;so&nbsp;the&nbsp;output&nbsp;can&nbsp;be&nbsp;embedded</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3493556">//&nbsp;in&nbsp;HTML&nbsp;attributes&nbsp;without&nbsp;further&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493606">case</span>&nbsp;<span class="string" id="3493611">&#39;&#34;&#39;</span><span class="op" id="3493614">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493619">repl</span>&nbsp;<span class="op" id="3493624">=</span>&nbsp;<span class="string" id="3493626">`\22`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493634">case</span>&nbsp;<span class="string" id="3493639">&#39;&amp;&#39;</span><span class="op" id="3493642">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493647">repl</span>&nbsp;<span class="op" id="3493652">=</span>&nbsp;<span class="string" id="3493654">`\26`</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493662">case</span>&nbsp;<span class="string" id="3493667">&#39;\&#39;&#39;</span><span class="op" id="3493671">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493676">repl</span>&nbsp;<span class="op" id="3493681">=</span>&nbsp;<span class="string" id="3493683">`\27`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493691">case</span>&nbsp;<span class="string" id="3493696">&#39;(&#39;</span><span class="op" id="3493699">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493704">repl</span>&nbsp;<span class="op" id="3493709">=</span>&nbsp;<span class="string" id="3493711">`\28`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493719">case</span>&nbsp;<span class="string" id="3493724">&#39;)&#39;</span><span class="op" id="3493727">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493732">repl</span>&nbsp;<span class="op" id="3493737">=</span>&nbsp;<span class="string" id="3493739">`\29`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493747">case</span>&nbsp;<span class="string" id="3493752">&#39;+&#39;</span><span class="op" id="3493755">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493760">repl</span>&nbsp;<span class="op" id="3493765">=</span>&nbsp;<span class="string" id="3493767">`\2b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493775">case</span>&nbsp;<span class="string" id="3493780">&#39;/&#39;</span><span class="op" id="3493783">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493788">repl</span>&nbsp;<span class="op" id="3493793">=</span>&nbsp;<span class="string" id="3493795">`\2f`</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493803">case</span>&nbsp;<span class="string" id="3493808">&#39;:&#39;</span><span class="op" id="3493811">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493816">repl</span>&nbsp;<span class="op" id="3493821">=</span>&nbsp;<span class="string" id="3493823">`\3a`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493831">case</span>&nbsp;<span class="string" id="3493836">&#39;;&#39;</span><span class="op" id="3493839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493844">repl</span>&nbsp;<span class="op" id="3493849">=</span>&nbsp;<span class="string" id="3493851">`\3b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493859">case</span>&nbsp;<span class="string" id="3493864">&#39;&lt;&#39;</span><span class="op" id="3493867">:</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493872">repl</span>&nbsp;<span class="op" id="3493877">=</span>&nbsp;<span class="string" id="3493879">`\3c`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493887">case</span>&nbsp;<span class="string" id="3493892">&#39;&gt;&#39;</span><span class="op" id="3493895">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493900">repl</span>&nbsp;<span class="op" id="3493905">=</span>&nbsp;<span class="string" id="3493907">`\3e`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493915">case</span>&nbsp;<span class="string" id="3493920">&#39;\\&#39;</span><span class="op" id="3493924">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493929">repl</span>&nbsp;<span class="op" id="3493934">=</span>&nbsp;<span class="string" id="3493936">`\\`</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493943">case</span>&nbsp;<span class="string" id="3493948">&#39;{&#39;</span><span class="op" id="3493951">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493956">repl</span>&nbsp;<span class="op" id="3493961">=</span>&nbsp;<span class="string" id="3493963">`\7b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493971">case</span>&nbsp;<span class="string" id="3493976">&#39;}&#39;</span><span class="op" id="3493979">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3493984">repl</span>&nbsp;<span class="op" id="3493989">=</span>&nbsp;<span class="string" id="3493991">`\7d`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3493999">default</span><span class="op" id="3494006">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3494011">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3494022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3494026">b</span><span class="op" id="3494027">.</span><span class="ident" id="3494028">WriteString</span><span class="op" id="3494039">(</span><span class="ident" id="3494040">s</span><span class="op" id="3494041">[</span><span class="ident" id="3494042">written</span><span class="op" id="3494049">:</span><span class="ident" id="3494050">i</span><span class="op" id="3494051">]</span><span class="op" id="3494052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3494056">b</span><span class="op" id="3494057">.</span><span class="ident" id="3494058">WriteString</span><span class="op" id="3494069">(</span><span class="ident" id="3494070">repl</span><span class="op" id="3494074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3494078">written</span>&nbsp;<span class="op" id="3494086">=</span>&nbsp;<span class="ident" id="3494088">i</span>&nbsp;<span class="op" id="3494090">+</span>&nbsp;<span class="ident" id="3494092">utf8</span><span class="op" id="3494096">.</span><span class="ident" id="3494097">RuneLen</span><span class="op" id="3494104">(</span><span class="ident" id="3494105">r</span><span class="op" id="3494106">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3494110">if</span>&nbsp;<span class="ident" id="3494113">repl</span>&nbsp;<span class="op" id="3494118">!=</span>&nbsp;<span class="string" id="3494121">`\\`</span>&nbsp;<span class="op" id="3494126">&amp;&amp;</span>&nbsp;<span class="op" id="3494129">(</span><span class="ident" id="3494130">written</span>&nbsp;<span class="op" id="3494138">==</span>&nbsp;<span class="builtinfunc" id="3494141">len</span><span class="op" id="3494144">(</span><span class="ident" id="3494145">s</span><span class="op" id="3494146">)</span>&nbsp;<span class="op" id="3494148">||</span>&nbsp;<span class="ident" id="3494151">isHex</span><span class="op" id="3494156">(</span><span class="ident" id="3494157">s</span><span class="op" id="3494158">[</span><span class="ident" id="3494159">written</span><span class="op" id="3494166">]</span><span class="op" id="3494167">)</span>&nbsp;<span class="op" id="3494169">||</span>&nbsp;<span class="ident" id="3494172">isCSSSpace</span><span class="op" id="3494182">(</span><span class="ident" id="3494183">s</span><span class="op" id="3494184">[</span><span class="ident" id="3494185">written</span><span class="op" id="3494192">]</span><span class="op" id="3494193">)</span><span class="op" id="3494194">)</span>&nbsp;<span class="op" id="3494196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3494201">b</span><span class="op" id="3494202">.</span><span class="ident" id="3494203">WriteByte</span><span class="op" id="3494212">(</span><span class="string" id="3494213">&#39;&nbsp;&#39;</span><span class="op" id="3494216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3494220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3494223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3494226">if</span>&nbsp;<span class="ident" id="3494229">written</span>&nbsp;<span class="op" id="3494237">==</span>&nbsp;<span class="num" id="3494240">0</span>&nbsp;<span class="op" id="3494242">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3494246">return</span>&nbsp;<span class="ident" id="3494253">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3494256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3494259">b</span><span class="op" id="3494260">.</span><span class="ident" id="3494261">WriteString</span><span class="op" id="3494272">(</span><span class="ident" id="3494273">s</span><span class="op" id="3494274">[</span><span class="ident" id="3494275">written</span><span class="op" id="3494282">:</span><span class="op" id="3494283">]</span><span class="op" id="3494284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3494287">return</span>&nbsp;<span class="ident" id="3494294">b</span><span class="op" id="3494295">.</span><span class="ident" id="3494296">String</span><span class="op" id="3494302">(</span><span class="op" id="3494303">)</span><br>
<span class="lineno"></span><span class="op" id="3494305">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="3494308">var</span>&nbsp;<span class="ident" id="3494312">expressionBytes</span>&nbsp;<span class="op" id="3494328">=</span>&nbsp;<span class="op" id="3494330">[</span><span class="op" id="3494331">]</span><span class="builtintype" id="3494332">byte</span><span class="op" id="3494336">(</span><span class="string" id="3494337">&#34;expression&#34;</span><span class="op" id="3494349">)</span><br>
<span class="lineno"></span><span class="keyword" id="3494351">var</span>&nbsp;<span class="ident" id="3494355">mozBindingBytes</span>&nbsp;<span class="op" id="3494371">=</span>&nbsp;<span class="op" id="3494373">[</span><span class="op" id="3494374">]</span><span class="builtintype" id="3494375">byte</span><span class="op" id="3494379">(</span><span class="string" id="3494380">&#34;mozbinding&#34;</span><span class="op" id="3494392">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3494395">//&nbsp;cssValueFilter&nbsp;allows&nbsp;innocuous&nbsp;CSS&nbsp;values&nbsp;in&nbsp;the&nbsp;output&nbsp;including&nbsp;CSS</span><br>
<span class="lineno">225</span><span class="comment" id="3494469">//&nbsp;quantities&nbsp;(10px&nbsp;or&nbsp;25%),&nbsp;ID&nbsp;or&nbsp;class&nbsp;literals&nbsp;(#foo,&nbsp;.bar),&nbsp;keyword&nbsp;values</span><br>
<span class="lineno"></span><span class="comment" id="3494548">//&nbsp;(inherit,&nbsp;blue),&nbsp;and&nbsp;colors&nbsp;(#888).</span><br>
<span class="lineno"></span><span class="comment" id="3494587">//&nbsp;It&nbsp;filters&nbsp;out&nbsp;unsafe&nbsp;values,&nbsp;such&nbsp;as&nbsp;those&nbsp;that&nbsp;affect&nbsp;token&nbsp;boundaries,</span><br>
<span class="lineno"></span><span class="comment" id="3494664">//&nbsp;and&nbsp;anything&nbsp;that&nbsp;might&nbsp;execute&nbsp;scripts.</span><br>
<span class="lineno"></span><span class="keyword" id="3494708">func</span>&nbsp;<span class="ident" id="3494713">cssValueFilter</span><span class="op" id="3494727">(</span><span class="ident" id="3494728">args</span>&nbsp;<span class="op" id="3494733">...</span><span class="keyword" id="3494736">interface</span><span class="op" id="3494745">{</span><span class="op" id="3494746">}</span><span class="op" id="3494747">)</span>&nbsp;<span class="builtintype" id="3494749">string</span>&nbsp;<span class="op" id="3494756">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3494759">s</span><span class="op" id="3494760">,</span>&nbsp;<span class="ident" id="3494762">t</span>&nbsp;<span class="op" id="3494764">:=</span>&nbsp;<span class="ident" id="3494767">stringify</span><span class="op" id="3494776">(</span><span class="ident" id="3494777">args</span><span class="op" id="3494781">...</span><span class="op" id="3494784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3494787">if</span>&nbsp;<span class="ident" id="3494790">t</span>&nbsp;<span class="op" id="3494792">==</span>&nbsp;<span class="ident" id="3494795">contentTypeCSS</span>&nbsp;<span class="op" id="3494810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3494814">return</span>&nbsp;<span class="ident" id="3494821">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3494824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3494827">b</span><span class="op" id="3494828">,</span>&nbsp;<span class="ident" id="3494830">id</span>&nbsp;<span class="op" id="3494833">:=</span>&nbsp;<span class="ident" id="3494836">decodeCSS</span><span class="op" id="3494845">(</span><span class="op" id="3494846">[</span><span class="op" id="3494847">]</span><span class="builtintype" id="3494848">byte</span><span class="op" id="3494852">(</span><span class="ident" id="3494853">s</span><span class="op" id="3494854">)</span><span class="op" id="3494855">)</span><span class="op" id="3494856">,</span>&nbsp;<span class="builtinfunc" id="3494858">make</span><span class="op" id="3494862">(</span><span class="op" id="3494863">[</span><span class="op" id="3494864">]</span><span class="builtintype" id="3494865">byte</span><span class="op" id="3494869">,</span>&nbsp;<span class="num" id="3494871">0</span><span class="op" id="3494872">,</span>&nbsp;<span class="num" id="3494874">64</span><span class="op" id="3494876">)</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3494880">//&nbsp;CSS3&nbsp;error&nbsp;handling&nbsp;is&nbsp;specified&nbsp;as&nbsp;honoring&nbsp;string&nbsp;boundaries&nbsp;per</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3494951">//&nbsp;http://www.w3.org/TR/css3-syntax/#error-handling&nbsp;:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3495006">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Malformed&nbsp;declarations.&nbsp;User&nbsp;agents&nbsp;must&nbsp;handle&nbsp;unexpected</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3495073">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tokens&nbsp;encountered&nbsp;while&nbsp;parsing&nbsp;a&nbsp;declaration&nbsp;by&nbsp;reading&nbsp;until</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3495145">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;declaration,&nbsp;while&nbsp;observing&nbsp;the&nbsp;rules&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3495211">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matching&nbsp;pairs&nbsp;of&nbsp;(),&nbsp;[],&nbsp;{},&nbsp;&#34;&#34;,&nbsp;and&nbsp;&#39;&#39;,&nbsp;and&nbsp;correctly&nbsp;handling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3495284">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escapes.&nbsp;For&nbsp;example,&nbsp;a&nbsp;malformed&nbsp;declaration&nbsp;may&nbsp;be&nbsp;missing&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3495355">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;property,&nbsp;colon&nbsp;(:)&nbsp;or&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3495393">//&nbsp;So&nbsp;we&nbsp;need&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;values&nbsp;do&nbsp;not&nbsp;have&nbsp;mismatched&nbsp;bracket</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3495464">//&nbsp;or&nbsp;quote&nbsp;characters&nbsp;to&nbsp;prevent&nbsp;the&nbsp;browser&nbsp;from&nbsp;restarting&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3495535">//&nbsp;inside&nbsp;a&nbsp;string&nbsp;that&nbsp;might&nbsp;embed&nbsp;JavaScript&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3495591">for</span>&nbsp;<span class="ident" id="3495595">i</span><span class="op" id="3495596">,</span>&nbsp;<span class="ident" id="3495598">c</span>&nbsp;<span class="op" id="3495600">:=</span>&nbsp;<span class="keyword" id="3495603">range</span>&nbsp;<span class="ident" id="3495609">b</span>&nbsp;<span class="op" id="3495611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3495615">switch</span>&nbsp;<span class="ident" id="3495622">c</span>&nbsp;<span class="op" id="3495624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3495628">case</span>&nbsp;<span class="num" id="3495633">0</span><span class="op" id="3495634">,</span>&nbsp;<span class="string" id="3495636">&#39;&#34;&#39;</span><span class="op" id="3495639">,</span>&nbsp;<span class="string" id="3495641">&#39;\&#39;&#39;</span><span class="op" id="3495645">,</span>&nbsp;<span class="string" id="3495647">&#39;(&#39;</span><span class="op" id="3495650">,</span>&nbsp;<span class="string" id="3495652">&#39;)&#39;</span><span class="op" id="3495655">,</span>&nbsp;<span class="string" id="3495657">&#39;/&#39;</span><span class="op" id="3495660">,</span>&nbsp;<span class="string" id="3495662">&#39;;&#39;</span><span class="op" id="3495665">,</span>&nbsp;<span class="string" id="3495667">&#39;@&#39;</span><span class="op" id="3495670">,</span>&nbsp;<span class="string" id="3495672">&#39;[&#39;</span><span class="op" id="3495675">,</span>&nbsp;<span class="string" id="3495677">&#39;\\&#39;</span><span class="op" id="3495681">,</span>&nbsp;<span class="string" id="3495683">&#39;]&#39;</span><span class="op" id="3495686">,</span>&nbsp;<span class="string" id="3495688">&#39;`&#39;</span><span class="op" id="3495691">,</span>&nbsp;<span class="string" id="3495693">&#39;{&#39;</span><span class="op" id="3495696">,</span>&nbsp;<span class="string" id="3495698">&#39;}&#39;</span><span class="op" id="3495701">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3495706">return</span>&nbsp;<span class="ident" id="3495713">filterFailsafe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3495730">case</span>&nbsp;<span class="string" id="3495735">&#39;-&#39;</span><span class="op" id="3495738">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3495743">//&nbsp;Disallow&nbsp;&lt;!--&nbsp;or&nbsp;--&gt;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3495771">//&nbsp;--&nbsp;should&nbsp;not&nbsp;appear&nbsp;in&nbsp;valid&nbsp;identifiers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3495820">if</span>&nbsp;<span class="ident" id="3495823">i</span>&nbsp;<span class="op" id="3495825">!=</span>&nbsp;<span class="num" id="3495828">0</span>&nbsp;<span class="op" id="3495830">&amp;&amp;</span>&nbsp;<span class="ident" id="3495833">b</span><span class="op" id="3495834">[</span><span class="ident" id="3495835">i</span><span class="op" id="3495836">-</span><span class="num" id="3495837">1</span><span class="op" id="3495838">]</span>&nbsp;<span class="op" id="3495840">==</span>&nbsp;<span class="string" id="3495843">&#39;-&#39;</span>&nbsp;<span class="op" id="3495847">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3495853">return</span>&nbsp;<span class="ident" id="3495860">filterFailsafe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3495878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3495882">default</span><span class="op" id="3495889">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3495894">if</span>&nbsp;<span class="ident" id="3495897">c</span>&nbsp;<span class="op" id="3495899">&lt;</span>&nbsp;<span class="num" id="3495901">0x80</span>&nbsp;<span class="op" id="3495906">&amp;&amp;</span>&nbsp;<span class="ident" id="3495909">isCSSNmchar</span><span class="op" id="3495920">(</span><span class="builtintype" id="3495921">rune</span><span class="op" id="3495925">(</span><span class="ident" id="3495926">c</span><span class="op" id="3495927">)</span><span class="op" id="3495928">)</span>&nbsp;<span class="op" id="3495930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3495936">id</span>&nbsp;<span class="op" id="3495939">=</span>&nbsp;<span class="builtinfunc" id="3495941">append</span><span class="op" id="3495947">(</span><span class="ident" id="3495948">id</span><span class="op" id="3495950">,</span>&nbsp;<span class="ident" id="3495952">c</span><span class="op" id="3495953">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3495958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3495962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3495965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3495968">id</span>&nbsp;<span class="op" id="3495971">=</span>&nbsp;<span class="ident" id="3495973">bytes</span><span class="op" id="3495978">.</span><span class="ident" id="3495979">ToLower</span><span class="op" id="3495986">(</span><span class="ident" id="3495987">id</span><span class="op" id="3495989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3495992">if</span>&nbsp;<span class="ident" id="3495995">bytes</span><span class="op" id="3496000">.</span><span class="ident" id="3496001">Index</span><span class="op" id="3496006">(</span><span class="ident" id="3496007">id</span><span class="op" id="3496009">,</span>&nbsp;<span class="ident" id="3496011">expressionBytes</span><span class="op" id="3496026">)</span>&nbsp;<span class="op" id="3496028">!=</span>&nbsp;<span class="op" id="3496031">-</span><span class="num" id="3496032">1</span>&nbsp;<span class="op" id="3496034">||</span>&nbsp;<span class="ident" id="3496037">bytes</span><span class="op" id="3496042">.</span><span class="ident" id="3496043">Index</span><span class="op" id="3496048">(</span><span class="ident" id="3496049">id</span><span class="op" id="3496051">,</span>&nbsp;<span class="ident" id="3496053">mozBindingBytes</span><span class="op" id="3496068">)</span>&nbsp;<span class="op" id="3496070">!=</span>&nbsp;<span class="op" id="3496073">-</span><span class="num" id="3496074">1</span>&nbsp;<span class="op" id="3496076">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3496080">return</span>&nbsp;<span class="ident" id="3496087">filterFailsafe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3496103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3496106">return</span>&nbsp;<span class="builtintype" id="3496113">string</span><span class="op" id="3496119">(</span><span class="ident" id="3496120">b</span><span class="op" id="3496121">)</span><br>
<span class="lineno"></span><span class="op" id="3496123">}</span>
</div>
</body>
</html>
