<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6966174">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6966230">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6966284">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6966335">//&nbsp;+build&nbsp;!nacl,!plan9,!windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6966368">package</span>&nbsp;<span class="ident" id="6966376">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6966381">import</span>&nbsp;<span class="op" id="6966388">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6966391">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6966400">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6966406">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6966417">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6966428">&#34;syscall&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6966439">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6966450">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6966457">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6966460">func</span>&nbsp;<span class="ident" id="6966465">TestReadUnixgramWithUnnamedSocket</span><span class="op" id="6966498">(</span><span class="ident" id="6966499">t</span>&nbsp;<span class="op" id="6966501">*</span><span class="ident" id="6966502"><a href="/net/unix_test.go.html#6966439">testing</a></span><span class="op" id="6966509">.</span><span class="ident" id="6966510">T</span><span class="op" id="6966511">)</span>&nbsp;<span class="op" id="6966513">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6966516">addr</span>&nbsp;<span class="op" id="6966521">:=</span>&nbsp;<span class="ident" id="6966524"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6966536">(</span><span class="op" id="6966537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6966540">la</span><span class="op" id="6966542">,</span>&nbsp;<span class="ident" id="6966544">err</span>&nbsp;<span class="op" id="6966548">:=</span>&nbsp;<span class="ident" id="6966551"><a href="/net/unixsock.go.html#2714067">ResolveUnixAddr</a></span><span class="op" id="6966566">(</span><span class="string" id="6966567">&#34;unixgram&#34;</span><span class="op" id="6966577">,</span>&nbsp;<span class="ident" id="6966579"><a href="/net/unix_test.go.html#6966516">addr</a></span><span class="op" id="6966583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6966586">if</span>&nbsp;<span class="ident" id="6966589"><a href="/net/unix_test.go.html#6966544">err</a></span>&nbsp;<span class="op" id="6966593">!=</span>&nbsp;<span class="ident" id="6966596">nil</span>&nbsp;<span class="op" id="6966600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6966604"><a href="/net/unix_test.go.html#6966499">t</a></span><span class="op" id="6966605">.</span><span class="ident" id="6966606">Fatalf</span><span class="op" id="6966612">(</span><span class="string" id="6966613">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6966641">,</span>&nbsp;<span class="ident" id="6966643"><a href="/net/unix_test.go.html#6966544">err</a></span><span class="op" id="6966646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6966649">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6966652">c</span><span class="op" id="6966653">,</span>&nbsp;<span class="ident" id="6966655"><a href="/net/unix_test.go.html#6966544">err</a></span>&nbsp;<span class="op" id="6966659">:=</span>&nbsp;<span class="ident" id="6966662"><a href="/net/unixsock_posix.go.html#2724349">ListenUnixgram</a></span><span class="op" id="6966676">(</span><span class="string" id="6966677">&#34;unixgram&#34;</span><span class="op" id="6966687">,</span>&nbsp;<span class="ident" id="6966689"><a href="/net/unix_test.go.html#6966540">la</a></span><span class="op" id="6966691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6966694">if</span>&nbsp;<span class="ident" id="6966697"><a href="/net/unix_test.go.html#6966544">err</a></span>&nbsp;<span class="op" id="6966701">!=</span>&nbsp;<span class="ident" id="6966704">nil</span>&nbsp;<span class="op" id="6966708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6966712"><a href="/net/unix_test.go.html#6966499">t</a></span><span class="op" id="6966713">.</span><span class="ident" id="6966714">Fatalf</span><span class="op" id="6966720">(</span><span class="string" id="6966721">&#34;ListenUnixgram&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6966748">,</span>&nbsp;<span class="ident" id="6966750"><a href="/net/unix_test.go.html#6966544">err</a></span><span class="op" id="6966753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6966756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6966759">defer</span>&nbsp;<span class="keyword" id="6966765">func</span><span class="op" id="6966769">(</span><span class="op" id="6966770">)</span>&nbsp;<span class="op" id="6966772">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6966776"><a href="/net/unix_test.go.html#6966652">c</a></span><span class="op" id="6966777">.</span><span class="ident" id="6966778">Close</span><span class="op" id="6966783">(</span><span class="op" id="6966784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6966788"><a href="/net/unix_test.go.html#6966400">os</a></span><span class="op" id="6966790">.</span><span class="ident" id="6966791">Remove</span><span class="op" id="6966797">(</span><span class="ident" id="6966798"><a href="/net/unix_test.go.html#6966516">addr</a></span><span class="op" id="6966802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6966805">}</span><span class="op" id="6966806">(</span><span class="op" id="6966807">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6966811">off</span>&nbsp;<span class="op" id="6966815">:=</span>&nbsp;<span class="builtinfunc" id="6966818">make</span><span class="op" id="6966822">(</span><span class="keyword" id="6966823">chan</span>&nbsp;<span class="builtintype" id="6966828">bool</span><span class="op" id="6966832">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6966835">data</span>&nbsp;<span class="op" id="6966840">:=</span>&nbsp;<span class="op" id="6966843">[</span><span class="num" id="6966844">5</span><span class="op" id="6966845">]</span><span class="builtintype" id="6966846">byte</span><span class="op" id="6966850">{</span><span class="num" id="6966851">1</span><span class="op" id="6966852">,</span>&nbsp;<span class="num" id="6966854">2</span><span class="op" id="6966855">,</span>&nbsp;<span class="num" id="6966857">3</span><span class="op" id="6966858">,</span>&nbsp;<span class="num" id="6966860">4</span><span class="op" id="6966861">,</span>&nbsp;<span class="num" id="6966863">5</span><span class="op" id="6966864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6966867">go</span>&nbsp;<span class="keyword" id="6966870">func</span><span class="op" id="6966874">(</span><span class="op" id="6966875">)</span>&nbsp;<span class="op" id="6966877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6966881">defer</span>&nbsp;<span class="keyword" id="6966887">func</span><span class="op" id="6966891">(</span><span class="op" id="6966892">)</span>&nbsp;<span class="op" id="6966894">{</span>&nbsp;<span class="ident" id="6966896"><a href="/net/unix_test.go.html#6966811">off</a></span>&nbsp;<span class="op" id="6966900">&lt;-</span>&nbsp;<span class="ident" id="6966903">true</span>&nbsp;<span class="op" id="6966908">}</span><span class="op" id="6966909">(</span><span class="op" id="6966910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6966914">s</span><span class="op" id="6966915">,</span>&nbsp;<span class="ident" id="6966917">err</span>&nbsp;<span class="op" id="6966921">:=</span>&nbsp;<span class="ident" id="6966924"><a href="/net/unix_test.go.html#6966428">syscall</a></span><span class="op" id="6966931">.</span><span class="ident" id="6966932">Socket</span><span class="op" id="6966938">(</span><span class="ident" id="6966939"><a href="/net/unix_test.go.html#6966428">syscall</a></span><span class="op" id="6966946">.</span><span class="ident" id="6966947">AF_UNIX</span><span class="op" id="6966954">,</span>&nbsp;<span class="ident" id="6966956"><a href="/net/unix_test.go.html#6966428">syscall</a></span><span class="op" id="6966963">.</span><span class="ident" id="6966964">SOCK_DGRAM</span><span class="op" id="6966974">,</span>&nbsp;<span class="num" id="6966976">0</span><span class="op" id="6966977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6966981">if</span>&nbsp;<span class="ident" id="6966984"><a href="/net/unix_test.go.html#6966917">err</a></span>&nbsp;<span class="op" id="6966988">!=</span>&nbsp;<span class="ident" id="6966991">nil</span>&nbsp;<span class="op" id="6966995">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967000"><a href="/net/unix_test.go.html#6966499">t</a></span><span class="op" id="6967001">.</span><span class="ident" id="6967002">Errorf</span><span class="op" id="6967008">(</span><span class="string" id="6967009">&#34;syscall.Socket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6967036">,</span>&nbsp;<span class="ident" id="6967038"><a href="/net/unix_test.go.html#6966917">err</a></span><span class="op" id="6967041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6967046">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6967055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6967059">defer</span>&nbsp;<span class="ident" id="6967065"><a href="/net/unix_test.go.html#6966428">syscall</a></span><span class="op" id="6967072">.</span><span class="ident" id="6967073">Close</span><span class="op" id="6967078">(</span><span class="ident" id="6967079"><a href="/net/unix_test.go.html#6966914">s</a></span><span class="op" id="6967080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967084">rsa</span>&nbsp;<span class="op" id="6967088">:=</span>&nbsp;<span class="op" id="6967091">&amp;</span><span class="ident" id="6967092"><a href="/net/unix_test.go.html#6966428">syscall</a></span><span class="op" id="6967099">.</span><span class="ident" id="6967100">SockaddrUnix</span><span class="op" id="6967112">{</span><span class="ident" id="6967113">Name</span><span class="op" id="6967117">:</span>&nbsp;<span class="ident" id="6967119"><a href="/net/unix_test.go.html#6966516">addr</a></span><span class="op" id="6967123">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6967127">if</span>&nbsp;<span class="ident" id="6967130">err</span>&nbsp;<span class="op" id="6967134">:=</span>&nbsp;<span class="ident" id="6967137"><a href="/net/unix_test.go.html#6966428">syscall</a></span><span class="op" id="6967144">.</span><span class="ident" id="6967145">Sendto</span><span class="op" id="6967151">(</span><span class="ident" id="6967152"><a href="/net/unix_test.go.html#6966914">s</a></span><span class="op" id="6967153">,</span>&nbsp;<span class="ident" id="6967155"><a href="/net/unix_test.go.html#6966835">data</a></span><span class="op" id="6967159">[</span><span class="op" id="6967160">:</span><span class="op" id="6967161">]</span><span class="op" id="6967162">,</span>&nbsp;<span class="num" id="6967164">0</span><span class="op" id="6967165">,</span>&nbsp;<span class="ident" id="6967167"><a href="/net/unix_test.go.html#6967084">rsa</a></span><span class="op" id="6967170">)</span><span class="op" id="6967171">;</span>&nbsp;<span class="ident" id="6967173"><a href="/net/unix_test.go.html#6967130">err</a></span>&nbsp;<span class="op" id="6967177">!=</span>&nbsp;<span class="ident" id="6967180">nil</span>&nbsp;<span class="op" id="6967184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967189"><a href="/net/unix_test.go.html#6966499">t</a></span><span class="op" id="6967190">.</span><span class="ident" id="6967191">Errorf</span><span class="op" id="6967197">(</span><span class="string" id="6967198">&#34;syscall.Sendto&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6967225">,</span>&nbsp;<span class="ident" id="6967227"><a href="/net/unix_test.go.html#6967130">err</a></span><span class="op" id="6967230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6967235">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6967244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6967247">}</span><span class="op" id="6967248">(</span><span class="op" id="6967249">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6967253">&lt;-</span><span class="ident" id="6967255"><a href="/net/unix_test.go.html#6966811">off</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967260">b</span>&nbsp;<span class="op" id="6967262">:=</span>&nbsp;<span class="builtinfunc" id="6967265">make</span><span class="op" id="6967269">(</span><span class="op" id="6967270">[</span><span class="op" id="6967271">]</span><span class="builtintype" id="6967272">byte</span><span class="op" id="6967276">,</span>&nbsp;<span class="num" id="6967278">64</span><span class="op" id="6967280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967283"><a href="/net/unix_test.go.html#6966652">c</a></span><span class="op" id="6967284">.</span><span class="ident" id="6967285">SetReadDeadline</span><span class="op" id="6967300">(</span><span class="ident" id="6967301"><a href="/net/unix_test.go.html#6966450">time</a></span><span class="op" id="6967305">.</span><span class="ident" id="6967306">Now</span><span class="op" id="6967309">(</span><span class="op" id="6967310">)</span><span class="op" id="6967311">.</span><span class="ident" id="6967312">Add</span><span class="op" id="6967315">(</span><span class="num" id="6967316">100</span>&nbsp;<span class="op" id="6967320">*</span>&nbsp;<span class="ident" id="6967322"><a href="/net/unix_test.go.html#6966450">time</a></span><span class="op" id="6967326">.</span><span class="ident" id="6967327">Millisecond</span><span class="op" id="6967338">)</span><span class="op" id="6967339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967342">n</span><span class="op" id="6967343">,</span>&nbsp;<span class="ident" id="6967345">from</span><span class="op" id="6967349">,</span>&nbsp;<span class="ident" id="6967351"><a href="/net/unix_test.go.html#6966544">err</a></span>&nbsp;<span class="op" id="6967355">:=</span>&nbsp;<span class="ident" id="6967358"><a href="/net/unix_test.go.html#6966652">c</a></span><span class="op" id="6967359">.</span><span class="ident" id="6967360">ReadFrom</span><span class="op" id="6967368">(</span><span class="ident" id="6967369"><a href="/net/unix_test.go.html#6967260">b</a></span><span class="op" id="6967370">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6967373">if</span>&nbsp;<span class="ident" id="6967376"><a href="/net/unix_test.go.html#6966544">err</a></span>&nbsp;<span class="op" id="6967380">!=</span>&nbsp;<span class="ident" id="6967383">nil</span>&nbsp;<span class="op" id="6967387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967391"><a href="/net/unix_test.go.html#6966499">t</a></span><span class="op" id="6967392">.</span><span class="ident" id="6967393">Fatalf</span><span class="op" id="6967399">(</span><span class="string" id="6967400">&#34;UnixConn.ReadFrom&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6967430">,</span>&nbsp;<span class="ident" id="6967432"><a href="/net/unix_test.go.html#6966544">err</a></span><span class="op" id="6967435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6967438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6967441">if</span>&nbsp;<span class="ident" id="6967444"><a href="/net/unix_test.go.html#6967345">from</a></span>&nbsp;<span class="op" id="6967449">!=</span>&nbsp;<span class="ident" id="6967452">nil</span>&nbsp;<span class="op" id="6967456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967460"><a href="/net/unix_test.go.html#6966499">t</a></span><span class="op" id="6967461">.</span><span class="ident" id="6967462">Fatalf</span><span class="op" id="6967468">(</span><span class="string" id="6967469">&#34;neighbor&nbsp;address&nbsp;is&nbsp;%v&#34;</span><span class="op" id="6967493">,</span>&nbsp;<span class="ident" id="6967495"><a href="/net/unix_test.go.html#6967345">from</a></span><span class="op" id="6967499">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6967502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6967505">if</span>&nbsp;<span class="op" id="6967508">!</span><span class="ident" id="6967509"><a href="/net/unix_test.go.html#6966391">bytes</a></span><span class="op" id="6967514">.</span><span class="ident" id="6967515">Equal</span><span class="op" id="6967520">(</span><span class="ident" id="6967521"><a href="/net/unix_test.go.html#6967260">b</a></span><span class="op" id="6967522">[</span><span class="op" id="6967523">:</span><span class="ident" id="6967524"><a href="/net/unix_test.go.html#6967342">n</a></span><span class="op" id="6967525">]</span><span class="op" id="6967526">,</span>&nbsp;<span class="ident" id="6967528"><a href="/net/unix_test.go.html#6966835">data</a></span><span class="op" id="6967532">[</span><span class="op" id="6967533">:</span><span class="op" id="6967534">]</span><span class="op" id="6967535">)</span>&nbsp;<span class="op" id="6967537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967541"><a href="/net/unix_test.go.html#6966499">t</a></span><span class="op" id="6967542">.</span><span class="ident" id="6967543">Fatalf</span><span class="op" id="6967549">(</span><span class="string" id="6967550">&#34;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6967567">,</span>&nbsp;<span class="ident" id="6967569"><a href="/net/unix_test.go.html#6967260">b</a></span><span class="op" id="6967570">[</span><span class="op" id="6967571">:</span><span class="ident" id="6967572"><a href="/net/unix_test.go.html#6967342">n</a></span><span class="op" id="6967573">]</span><span class="op" id="6967574">,</span>&nbsp;<span class="ident" id="6967576"><a href="/net/unix_test.go.html#6966835">data</a></span><span class="op" id="6967580">[</span><span class="op" id="6967581">:</span><span class="op" id="6967582">]</span><span class="op" id="6967583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6967586">}</span><br>
<span class="lineno"></span><span class="op" id="6967588">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="6967591">func</span>&nbsp;<span class="ident" id="6967596">TestReadUnixgramWithZeroBytesBuffer</span><span class="op" id="6967631">(</span><span class="ident" id="6967632">t</span>&nbsp;<span class="op" id="6967634">*</span><span class="ident" id="6967635"><a href="/net/unix_test.go.html#6966439">testing</a></span><span class="op" id="6967642">.</span><span class="ident" id="6967643">T</span><span class="op" id="6967644">)</span>&nbsp;<span class="op" id="6967646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6967649">//&nbsp;issue&nbsp;4352:&nbsp;Recvfrom&nbsp;failed&nbsp;with&nbsp;&#34;address&nbsp;family&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6967706">//&nbsp;supported&nbsp;by&nbsp;protocol&nbsp;family&#34;&nbsp;if&nbsp;zero-length&nbsp;buffer&nbsp;provided</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967772">addr</span>&nbsp;<span class="op" id="6967777">:=</span>&nbsp;<span class="ident" id="6967780"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6967792">(</span><span class="op" id="6967793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967796">la</span><span class="op" id="6967798">,</span>&nbsp;<span class="ident" id="6967800">err</span>&nbsp;<span class="op" id="6967804">:=</span>&nbsp;<span class="ident" id="6967807"><a href="/net/unixsock.go.html#2714067">ResolveUnixAddr</a></span><span class="op" id="6967822">(</span><span class="string" id="6967823">&#34;unixgram&#34;</span><span class="op" id="6967833">,</span>&nbsp;<span class="ident" id="6967835"><a href="/net/unix_test.go.html#6967772">addr</a></span><span class="op" id="6967839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6967842">if</span>&nbsp;<span class="ident" id="6967845"><a href="/net/unix_test.go.html#6967800">err</a></span>&nbsp;<span class="op" id="6967849">!=</span>&nbsp;<span class="ident" id="6967852">nil</span>&nbsp;<span class="op" id="6967856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967860"><a href="/net/unix_test.go.html#6967632">t</a></span><span class="op" id="6967861">.</span><span class="ident" id="6967862">Fatalf</span><span class="op" id="6967868">(</span><span class="string" id="6967869">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6967897">,</span>&nbsp;<span class="ident" id="6967899"><a href="/net/unix_test.go.html#6967800">err</a></span><span class="op" id="6967902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6967905">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967908">c</span><span class="op" id="6967909">,</span>&nbsp;<span class="ident" id="6967911"><a href="/net/unix_test.go.html#6967800">err</a></span>&nbsp;<span class="op" id="6967915">:=</span>&nbsp;<span class="ident" id="6967918"><a href="/net/unixsock_posix.go.html#2724349">ListenUnixgram</a></span><span class="op" id="6967932">(</span><span class="string" id="6967933">&#34;unixgram&#34;</span><span class="op" id="6967943">,</span>&nbsp;<span class="ident" id="6967945"><a href="/net/unix_test.go.html#6967796">la</a></span><span class="op" id="6967947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6967950">if</span>&nbsp;<span class="ident" id="6967953"><a href="/net/unix_test.go.html#6967800">err</a></span>&nbsp;<span class="op" id="6967957">!=</span>&nbsp;<span class="ident" id="6967960">nil</span>&nbsp;<span class="op" id="6967964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6967968"><a href="/net/unix_test.go.html#6967632">t</a></span><span class="op" id="6967969">.</span><span class="ident" id="6967970">Fatalf</span><span class="op" id="6967976">(</span><span class="string" id="6967977">&#34;ListenUnixgram&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6968004">,</span>&nbsp;<span class="ident" id="6968006"><a href="/net/unix_test.go.html#6967800">err</a></span><span class="op" id="6968009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6968012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968015">defer</span>&nbsp;<span class="keyword" id="6968021">func</span><span class="op" id="6968025">(</span><span class="op" id="6968026">)</span>&nbsp;<span class="op" id="6968028">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968032"><a href="/net/unix_test.go.html#6967908">c</a></span><span class="op" id="6968033">.</span><span class="ident" id="6968034">Close</span><span class="op" id="6968039">(</span><span class="op" id="6968040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968044"><a href="/net/unix_test.go.html#6966400">os</a></span><span class="op" id="6968046">.</span><span class="ident" id="6968047">Remove</span><span class="op" id="6968053">(</span><span class="ident" id="6968054"><a href="/net/unix_test.go.html#6967772">addr</a></span><span class="op" id="6968058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6968061">}</span><span class="op" id="6968062">(</span><span class="op" id="6968063">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968067">off</span>&nbsp;<span class="op" id="6968071">:=</span>&nbsp;<span class="builtinfunc" id="6968074">make</span><span class="op" id="6968078">(</span><span class="keyword" id="6968079">chan</span>&nbsp;<span class="builtintype" id="6968084">bool</span><span class="op" id="6968088">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968091">go</span>&nbsp;<span class="keyword" id="6968094">func</span><span class="op" id="6968098">(</span><span class="op" id="6968099">)</span>&nbsp;<span class="op" id="6968101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968105">defer</span>&nbsp;<span class="keyword" id="6968111">func</span><span class="op" id="6968115">(</span><span class="op" id="6968116">)</span>&nbsp;<span class="op" id="6968118">{</span>&nbsp;<span class="ident" id="6968120"><a href="/net/unix_test.go.html#6968067">off</a></span>&nbsp;<span class="op" id="6968124">&lt;-</span>&nbsp;<span class="ident" id="6968127">true</span>&nbsp;<span class="op" id="6968132">}</span><span class="op" id="6968133">(</span><span class="op" id="6968134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968138">c</span><span class="op" id="6968139">,</span>&nbsp;<span class="ident" id="6968141">err</span>&nbsp;<span class="op" id="6968145">:=</span>&nbsp;<span class="ident" id="6968148"><a href="/net/unixsock_posix.go.html#2720568">DialUnix</a></span><span class="op" id="6968156">(</span><span class="string" id="6968157">&#34;unixgram&#34;</span><span class="op" id="6968167">,</span>&nbsp;<span class="ident" id="6968169">nil</span><span class="op" id="6968172">,</span>&nbsp;<span class="ident" id="6968174"><a href="/net/unix_test.go.html#6967796">la</a></span><span class="op" id="6968176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968180">if</span>&nbsp;<span class="ident" id="6968183"><a href="/net/unix_test.go.html#6968141">err</a></span>&nbsp;<span class="op" id="6968187">!=</span>&nbsp;<span class="ident" id="6968190">nil</span>&nbsp;<span class="op" id="6968194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968199"><a href="/net/unix_test.go.html#6967632">t</a></span><span class="op" id="6968200">.</span><span class="ident" id="6968201">Errorf</span><span class="op" id="6968207">(</span><span class="string" id="6968208">&#34;DialUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6968229">,</span>&nbsp;<span class="ident" id="6968231"><a href="/net/unix_test.go.html#6968141">err</a></span><span class="op" id="6968234">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968239">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6968248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968252">defer</span>&nbsp;<span class="ident" id="6968258"><a href="/net/unix_test.go.html#6968138">c</a></span><span class="op" id="6968259">.</span><span class="ident" id="6968260">Close</span><span class="op" id="6968265">(</span><span class="op" id="6968266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968270">if</span>&nbsp;<span class="ident" id="6968273">_</span><span class="op" id="6968274">,</span>&nbsp;<span class="ident" id="6968276">err</span>&nbsp;<span class="op" id="6968280">:=</span>&nbsp;<span class="ident" id="6968283"><a href="/net/unix_test.go.html#6968138">c</a></span><span class="op" id="6968284">.</span><span class="ident" id="6968285">Write</span><span class="op" id="6968290">(</span><span class="op" id="6968291">[</span><span class="op" id="6968292">]</span><span class="builtintype" id="6968293">byte</span><span class="op" id="6968297">{</span><span class="num" id="6968298">1</span><span class="op" id="6968299">,</span>&nbsp;<span class="num" id="6968301">2</span><span class="op" id="6968302">,</span>&nbsp;<span class="num" id="6968304">3</span><span class="op" id="6968305">,</span>&nbsp;<span class="num" id="6968307">4</span><span class="op" id="6968308">,</span>&nbsp;<span class="num" id="6968310">5</span><span class="op" id="6968311">}</span><span class="op" id="6968312">)</span><span class="op" id="6968313">;</span>&nbsp;<span class="ident" id="6968315"><a href="/net/unix_test.go.html#6968276">err</a></span>&nbsp;<span class="op" id="6968319">!=</span>&nbsp;<span class="ident" id="6968322">nil</span>&nbsp;<span class="op" id="6968326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968331"><a href="/net/unix_test.go.html#6967632">t</a></span><span class="op" id="6968332">.</span><span class="ident" id="6968333">Errorf</span><span class="op" id="6968339">(</span><span class="string" id="6968340">&#34;UnixConn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6968367">,</span>&nbsp;<span class="ident" id="6968369"><a href="/net/unix_test.go.html#6968276">err</a></span><span class="op" id="6968372">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968377">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6968386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6968389">}</span><span class="op" id="6968390">(</span><span class="op" id="6968391">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6968395">&lt;-</span><span class="ident" id="6968397"><a href="/net/unix_test.go.html#6968067">off</a></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968402"><a href="/net/unix_test.go.html#6967908">c</a></span><span class="op" id="6968403">.</span><span class="ident" id="6968404">SetReadDeadline</span><span class="op" id="6968419">(</span><span class="ident" id="6968420"><a href="/net/unix_test.go.html#6966450">time</a></span><span class="op" id="6968424">.</span><span class="ident" id="6968425">Now</span><span class="op" id="6968428">(</span><span class="op" id="6968429">)</span><span class="op" id="6968430">.</span><span class="ident" id="6968431">Add</span><span class="op" id="6968434">(</span><span class="num" id="6968435">100</span>&nbsp;<span class="op" id="6968439">*</span>&nbsp;<span class="ident" id="6968441"><a href="/net/unix_test.go.html#6966450">time</a></span><span class="op" id="6968445">.</span><span class="ident" id="6968446">Millisecond</span><span class="op" id="6968457">)</span><span class="op" id="6968458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968461">_</span><span class="op" id="6968462">,</span>&nbsp;<span class="ident" id="6968464">from</span><span class="op" id="6968468">,</span>&nbsp;<span class="ident" id="6968470"><a href="/net/unix_test.go.html#6967800">err</a></span>&nbsp;<span class="op" id="6968474">:=</span>&nbsp;<span class="ident" id="6968477"><a href="/net/unix_test.go.html#6967908">c</a></span><span class="op" id="6968478">.</span><span class="ident" id="6968479">ReadFrom</span><span class="op" id="6968487">(</span><span class="ident" id="6968488">nil</span><span class="op" id="6968491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968494">if</span>&nbsp;<span class="ident" id="6968497"><a href="/net/unix_test.go.html#6967800">err</a></span>&nbsp;<span class="op" id="6968501">!=</span>&nbsp;<span class="ident" id="6968504">nil</span>&nbsp;<span class="op" id="6968508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968512"><a href="/net/unix_test.go.html#6967632">t</a></span><span class="op" id="6968513">.</span><span class="ident" id="6968514">Fatalf</span><span class="op" id="6968520">(</span><span class="string" id="6968521">&#34;UnixConn.ReadFrom&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6968551">,</span>&nbsp;<span class="ident" id="6968553"><a href="/net/unix_test.go.html#6967800">err</a></span><span class="op" id="6968556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6968559">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968562">if</span>&nbsp;<span class="ident" id="6968565"><a href="/net/unix_test.go.html#6968464">from</a></span>&nbsp;<span class="op" id="6968570">!=</span>&nbsp;<span class="ident" id="6968573">nil</span>&nbsp;<span class="op" id="6968577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968581"><a href="/net/unix_test.go.html#6967632">t</a></span><span class="op" id="6968582">.</span><span class="ident" id="6968583">Fatalf</span><span class="op" id="6968589">(</span><span class="string" id="6968590">&#34;neighbor&nbsp;address&nbsp;is&nbsp;%v&#34;</span><span class="op" id="6968614">,</span>&nbsp;<span class="ident" id="6968616"><a href="/net/unix_test.go.html#6968464">from</a></span><span class="op" id="6968620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6968623">}</span><br>
<span class="lineno"></span><span class="op" id="6968625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="6968628">func</span>&nbsp;<span class="ident" id="6968633">TestUnixgramAutobind</span><span class="op" id="6968653">(</span><span class="ident" id="6968654">t</span>&nbsp;<span class="op" id="6968656">*</span><span class="ident" id="6968657"><a href="/net/unix_test.go.html#6966439">testing</a></span><span class="op" id="6968664">.</span><span class="ident" id="6968665">T</span><span class="op" id="6968666">)</span>&nbsp;<span class="op" id="6968668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968671">if</span>&nbsp;<span class="ident" id="6968674"><a href="/net/unix_test.go.html#6966417">runtime</a></span><span class="op" id="6968681">.</span><span class="ident" id="6968682">GOOS</span>&nbsp;<span class="op" id="6968687">!=</span>&nbsp;<span class="string" id="6968690">&#34;linux&#34;</span>&nbsp;<span class="op" id="6968698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968702"><a href="/net/unix_test.go.html#6968654">t</a></span><span class="op" id="6968703">.</span><span class="ident" id="6968704">Skip</span><span class="op" id="6968708">(</span><span class="string" id="6968709">&#34;skipping:&nbsp;autobind&nbsp;is&nbsp;linux&nbsp;only&#34;</span><span class="op" id="6968743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6968746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968750">laddr</span>&nbsp;<span class="op" id="6968756">:=</span>&nbsp;<span class="op" id="6968759">&amp;</span><span class="ident" id="6968760"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="6968768">{</span><span class="ident" id="6968769">Name</span><span class="op" id="6968773">:</span>&nbsp;<span class="string" id="6968775">&#34;&#34;</span><span class="op" id="6968777">,</span>&nbsp;<span class="ident" id="6968779">Net</span><span class="op" id="6968782">:</span>&nbsp;<span class="string" id="6968784">&#34;unixgram&#34;</span><span class="op" id="6968794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968797">c1</span><span class="op" id="6968799">,</span>&nbsp;<span class="ident" id="6968801">err</span>&nbsp;<span class="op" id="6968805">:=</span>&nbsp;<span class="ident" id="6968808"><a href="/net/unixsock_posix.go.html#2724349">ListenUnixgram</a></span><span class="op" id="6968822">(</span><span class="string" id="6968823">&#34;unixgram&#34;</span><span class="op" id="6968833">,</span>&nbsp;<span class="ident" id="6968835"><a href="/net/unix_test.go.html#6968750">laddr</a></span><span class="op" id="6968840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968843">if</span>&nbsp;<span class="ident" id="6968846"><a href="/net/unix_test.go.html#6968801">err</a></span>&nbsp;<span class="op" id="6968850">!=</span>&nbsp;<span class="ident" id="6968853">nil</span>&nbsp;<span class="op" id="6968857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968861"><a href="/net/unix_test.go.html#6968654">t</a></span><span class="op" id="6968862">.</span><span class="ident" id="6968863">Fatalf</span><span class="op" id="6968869">(</span><span class="string" id="6968870">&#34;ListenUnixgram&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6968897">,</span>&nbsp;<span class="ident" id="6968899"><a href="/net/unix_test.go.html#6968801">err</a></span><span class="op" id="6968902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6968905">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6968908">defer</span>&nbsp;<span class="ident" id="6968914"><a href="/net/unix_test.go.html#6968797">c1</a></span><span class="op" id="6968916">.</span><span class="ident" id="6968917">Close</span><span class="op" id="6968922">(</span><span class="op" id="6968923">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6968927">//&nbsp;retrieve&nbsp;the&nbsp;autobind&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6968961">autoAddr</span>&nbsp;<span class="op" id="6968970">:=</span>&nbsp;<span class="ident" id="6968973"><a href="/net/unix_test.go.html#6968797">c1</a></span><span class="op" id="6968975">.</span><span class="ident" id="6968976">LocalAddr</span><span class="op" id="6968985">(</span><span class="op" id="6968986">)</span><span class="op" id="6968987">.</span><span class="op" id="6968988">(</span><span class="op" id="6968989">*</span><span class="ident" id="6968990"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="6968998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6969001">if</span>&nbsp;<span class="builtinfunc" id="6969004">len</span><span class="op" id="6969007">(</span><span class="ident" id="6969008"><a href="/net/unix_test.go.html#6968961">autoAddr</a></span><span class="op" id="6969016">.</span><span class="ident" id="6969017">Name</span><span class="op" id="6969021">)</span>&nbsp;<span class="op" id="6969023">&lt;=</span>&nbsp;<span class="num" id="6969026">1</span>&nbsp;<span class="op" id="6969028">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969032"><a href="/net/unix_test.go.html#6968654">t</a></span><span class="op" id="6969033">.</span><span class="ident" id="6969034">Fatalf</span><span class="op" id="6969040">(</span><span class="string" id="6969041">&#34;invalid&nbsp;autobind&nbsp;address:&nbsp;%v&#34;</span><span class="op" id="6969071">,</span>&nbsp;<span class="ident" id="6969073"><a href="/net/unix_test.go.html#6968961">autoAddr</a></span><span class="op" id="6969081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6969084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6969087">if</span>&nbsp;<span class="ident" id="6969090"><a href="/net/unix_test.go.html#6968961">autoAddr</a></span><span class="op" id="6969098">.</span><span class="ident" id="6969099">Name</span><span class="op" id="6969103">[</span><span class="num" id="6969104">0</span><span class="op" id="6969105">]</span>&nbsp;<span class="op" id="6969107">!=</span>&nbsp;<span class="string" id="6969110">&#39;@&#39;</span>&nbsp;<span class="op" id="6969114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969118"><a href="/net/unix_test.go.html#6968654">t</a></span><span class="op" id="6969119">.</span><span class="ident" id="6969120">Fatalf</span><span class="op" id="6969126">(</span><span class="string" id="6969127">&#34;invalid&nbsp;autobind&nbsp;address:&nbsp;%v&#34;</span><span class="op" id="6969157">,</span>&nbsp;<span class="ident" id="6969159"><a href="/net/unix_test.go.html#6968961">autoAddr</a></span><span class="op" id="6969167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6969170">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969174">c2</span><span class="op" id="6969176">,</span>&nbsp;<span class="ident" id="6969178"><a href="/net/unix_test.go.html#6968801">err</a></span>&nbsp;<span class="op" id="6969182">:=</span>&nbsp;<span class="ident" id="6969185"><a href="/net/unixsock_posix.go.html#2720568">DialUnix</a></span><span class="op" id="6969193">(</span><span class="string" id="6969194">&#34;unixgram&#34;</span><span class="op" id="6969204">,</span>&nbsp;<span class="ident" id="6969206">nil</span><span class="op" id="6969209">,</span>&nbsp;<span class="ident" id="6969211"><a href="/net/unix_test.go.html#6968961">autoAddr</a></span><span class="op" id="6969219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6969222">if</span>&nbsp;<span class="ident" id="6969225"><a href="/net/unix_test.go.html#6968801">err</a></span>&nbsp;<span class="op" id="6969229">!=</span>&nbsp;<span class="ident" id="6969232">nil</span>&nbsp;<span class="op" id="6969236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969240"><a href="/net/unix_test.go.html#6968654">t</a></span><span class="op" id="6969241">.</span><span class="ident" id="6969242">Fatalf</span><span class="op" id="6969248">(</span><span class="string" id="6969249">&#34;DialUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6969270">,</span>&nbsp;<span class="ident" id="6969272"><a href="/net/unix_test.go.html#6968801">err</a></span><span class="op" id="6969275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6969278">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6969281">defer</span>&nbsp;<span class="ident" id="6969287"><a href="/net/unix_test.go.html#6969174">c2</a></span><span class="op" id="6969289">.</span><span class="ident" id="6969290">Close</span><span class="op" id="6969295">(</span><span class="op" id="6969296">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6969300">if</span>&nbsp;<span class="op" id="6969303">!</span><span class="ident" id="6969304"><a href="/net/unix_test.go.html#6966406">reflect</a></span><span class="op" id="6969311">.</span><span class="ident" id="6969312">DeepEqual</span><span class="op" id="6969321">(</span><span class="ident" id="6969322"><a href="/net/unix_test.go.html#6968797">c1</a></span><span class="op" id="6969324">.</span><span class="ident" id="6969325">LocalAddr</span><span class="op" id="6969334">(</span><span class="op" id="6969335">)</span><span class="op" id="6969336">,</span>&nbsp;<span class="ident" id="6969338"><a href="/net/unix_test.go.html#6969174">c2</a></span><span class="op" id="6969340">.</span><span class="ident" id="6969341">RemoteAddr</span><span class="op" id="6969351">(</span><span class="op" id="6969352">)</span><span class="op" id="6969353">)</span>&nbsp;<span class="op" id="6969355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969359"><a href="/net/unix_test.go.html#6968654">t</a></span><span class="op" id="6969360">.</span><span class="ident" id="6969361">Fatalf</span><span class="op" id="6969367">(</span><span class="string" id="6969368">&#34;expected&nbsp;autobind&nbsp;address&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6969406">,</span>&nbsp;<span class="ident" id="6969408"><a href="/net/unix_test.go.html#6968797">c1</a></span><span class="op" id="6969410">.</span><span class="ident" id="6969411">LocalAddr</span><span class="op" id="6969420">(</span><span class="op" id="6969421">)</span><span class="op" id="6969422">,</span>&nbsp;<span class="ident" id="6969424"><a href="/net/unix_test.go.html#6969174">c2</a></span><span class="op" id="6969426">.</span><span class="ident" id="6969427">RemoteAddr</span><span class="op" id="6969437">(</span><span class="op" id="6969438">)</span><span class="op" id="6969439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6969442">}</span><br>
<span class="lineno">140</span><span class="op" id="6969444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6969447">func</span>&nbsp;<span class="ident" id="6969452">TestUnixAutobindClose</span><span class="op" id="6969473">(</span><span class="ident" id="6969474">t</span>&nbsp;<span class="op" id="6969476">*</span><span class="ident" id="6969477"><a href="/net/unix_test.go.html#6966439">testing</a></span><span class="op" id="6969484">.</span><span class="ident" id="6969485">T</span><span class="op" id="6969486">)</span>&nbsp;<span class="op" id="6969488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6969491">if</span>&nbsp;<span class="ident" id="6969494"><a href="/net/unix_test.go.html#6966417">runtime</a></span><span class="op" id="6969501">.</span><span class="ident" id="6969502">GOOS</span>&nbsp;<span class="op" id="6969507">!=</span>&nbsp;<span class="string" id="6969510">&#34;linux&#34;</span>&nbsp;<span class="op" id="6969518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969522"><a href="/net/unix_test.go.html#6969474">t</a></span><span class="op" id="6969523">.</span><span class="ident" id="6969524">Skip</span><span class="op" id="6969528">(</span><span class="string" id="6969529">&#34;skipping:&nbsp;autobind&nbsp;is&nbsp;linux&nbsp;only&#34;</span><span class="op" id="6969563">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6969566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969569">laddr</span>&nbsp;<span class="op" id="6969575">:=</span>&nbsp;<span class="op" id="6969578">&amp;</span><span class="ident" id="6969579"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="6969587">{</span><span class="ident" id="6969588">Name</span><span class="op" id="6969592">:</span>&nbsp;<span class="string" id="6969594">&#34;&#34;</span><span class="op" id="6969596">,</span>&nbsp;<span class="ident" id="6969598">Net</span><span class="op" id="6969601">:</span>&nbsp;<span class="string" id="6969603">&#34;unix&#34;</span><span class="op" id="6969609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969612">ln</span><span class="op" id="6969614">,</span>&nbsp;<span class="ident" id="6969616">err</span>&nbsp;<span class="op" id="6969620">:=</span>&nbsp;<span class="ident" id="6969623"><a href="/net/unixsock_posix.go.html#2721464">ListenUnix</a></span><span class="op" id="6969633">(</span><span class="string" id="6969634">&#34;unix&#34;</span><span class="op" id="6969640">,</span>&nbsp;<span class="ident" id="6969642"><a href="/net/unix_test.go.html#6969569">laddr</a></span><span class="op" id="6969647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6969650">if</span>&nbsp;<span class="ident" id="6969653"><a href="/net/unix_test.go.html#6969616">err</a></span>&nbsp;<span class="op" id="6969657">!=</span>&nbsp;<span class="ident" id="6969660">nil</span>&nbsp;<span class="op" id="6969664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969668"><a href="/net/unix_test.go.html#6969474">t</a></span><span class="op" id="6969669">.</span><span class="ident" id="6969670">Fatalf</span><span class="op" id="6969676">(</span><span class="string" id="6969677">&#34;ListenUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6969700">,</span>&nbsp;<span class="ident" id="6969702"><a href="/net/unix_test.go.html#6969616">err</a></span><span class="op" id="6969705">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6969708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969711"><a href="/net/unix_test.go.html#6969612">ln</a></span><span class="op" id="6969713">.</span><span class="ident" id="6969714">Close</span><span class="op" id="6969719">(</span><span class="op" id="6969720">)</span><br>
<span class="lineno"></span><span class="op" id="6969722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6969725">func</span>&nbsp;<span class="ident" id="6969730">TestUnixgramWrite</span><span class="op" id="6969747">(</span><span class="ident" id="6969748">t</span>&nbsp;<span class="op" id="6969750">*</span><span class="ident" id="6969751"><a href="/net/unix_test.go.html#6966439">testing</a></span><span class="op" id="6969758">.</span><span class="ident" id="6969759">T</span><span class="op" id="6969760">)</span>&nbsp;<span class="op" id="6969762">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969765">addr</span>&nbsp;<span class="op" id="6969770">:=</span>&nbsp;<span class="ident" id="6969773"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6969785">(</span><span class="op" id="6969786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969789">laddr</span><span class="op" id="6969794">,</span>&nbsp;<span class="ident" id="6969796">err</span>&nbsp;<span class="op" id="6969800">:=</span>&nbsp;<span class="ident" id="6969803"><a href="/net/unixsock.go.html#2714067">ResolveUnixAddr</a></span><span class="op" id="6969818">(</span><span class="string" id="6969819">&#34;unixgram&#34;</span><span class="op" id="6969829">,</span>&nbsp;<span class="ident" id="6969831"><a href="/net/unix_test.go.html#6969765">addr</a></span><span class="op" id="6969835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6969838">if</span>&nbsp;<span class="ident" id="6969841"><a href="/net/unix_test.go.html#6969796">err</a></span>&nbsp;<span class="op" id="6969845">!=</span>&nbsp;<span class="ident" id="6969848">nil</span>&nbsp;<span class="op" id="6969852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969856"><a href="/net/unix_test.go.html#6969748">t</a></span><span class="op" id="6969857">.</span><span class="ident" id="6969858">Fatalf</span><span class="op" id="6969864">(</span><span class="string" id="6969865">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6969893">,</span>&nbsp;<span class="ident" id="6969895"><a href="/net/unix_test.go.html#6969796">err</a></span><span class="op" id="6969898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6969901">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969904">c</span><span class="op" id="6969905">,</span>&nbsp;<span class="ident" id="6969907"><a href="/net/unix_test.go.html#6969796">err</a></span>&nbsp;<span class="op" id="6969911">:=</span>&nbsp;<span class="ident" id="6969914"><a href="/net/dial.go.html#2525968">ListenPacket</a></span><span class="op" id="6969926">(</span><span class="string" id="6969927">&#34;unixgram&#34;</span><span class="op" id="6969937">,</span>&nbsp;<span class="ident" id="6969939"><a href="/net/unix_test.go.html#6969765">addr</a></span><span class="op" id="6969943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6969946">if</span>&nbsp;<span class="ident" id="6969949"><a href="/net/unix_test.go.html#6969796">err</a></span>&nbsp;<span class="op" id="6969953">!=</span>&nbsp;<span class="ident" id="6969956">nil</span>&nbsp;<span class="op" id="6969960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6969964"><a href="/net/unix_test.go.html#6969748">t</a></span><span class="op" id="6969965">.</span><span class="ident" id="6969966">Fatalf</span><span class="op" id="6969972">(</span><span class="string" id="6969973">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6969998">,</span>&nbsp;<span class="ident" id="6970000"><a href="/net/unix_test.go.html#6969796">err</a></span><span class="op" id="6970003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6970006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6970009">defer</span>&nbsp;<span class="ident" id="6970015"><a href="/net/unix_test.go.html#6966400">os</a></span><span class="op" id="6970017">.</span><span class="ident" id="6970018">Remove</span><span class="op" id="6970024">(</span><span class="ident" id="6970025"><a href="/net/unix_test.go.html#6969765">addr</a></span><span class="op" id="6970029">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6970032">defer</span>&nbsp;<span class="ident" id="6970038"><a href="/net/unix_test.go.html#6969904">c</a></span><span class="op" id="6970039">.</span><span class="ident" id="6970040">Close</span><span class="op" id="6970045">(</span><span class="op" id="6970046">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6970050"><a href="/net/unix_test.go.html#6970129">testUnixgramWriteConn</a></span><span class="op" id="6970071">(</span><span class="ident" id="6970072"><a href="/net/unix_test.go.html#6969748">t</a></span><span class="op" id="6970073">,</span>&nbsp;<span class="ident" id="6970075"><a href="/net/unix_test.go.html#6969789">laddr</a></span><span class="op" id="6970080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6970083"><a href="/net/unix_test.go.html#6971226">testUnixgramWritePacketConn</a></span><span class="op" id="6970110">(</span><span class="ident" id="6970111"><a href="/net/unix_test.go.html#6969748">t</a></span><span class="op" id="6970112">,</span>&nbsp;<span class="ident" id="6970114"><a href="/net/unix_test.go.html#6969789">laddr</a></span><span class="op" id="6970119">)</span><br>
<span class="lineno"></span><span class="op" id="6970121">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="keyword" id="6970124">func</span>&nbsp;<span class="ident" id="6970129">testUnixgramWriteConn</span><span class="op" id="6970150">(</span><span class="ident" id="6970151">t</span>&nbsp;<span class="op" id="6970153">*</span><span class="ident" id="6970154"><a href="/net/unix_test.go.html#6966439">testing</a></span><span class="op" id="6970161">.</span><span class="ident" id="6970162">T</span><span class="op" id="6970163">,</span>&nbsp;<span class="ident" id="6970165">raddr</span>&nbsp;<span class="op" id="6970171">*</span><span class="ident" id="6970172"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="6970180">)</span>&nbsp;<span class="op" id="6970182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6970185">c</span><span class="op" id="6970186">,</span>&nbsp;<span class="ident" id="6970188">err</span>&nbsp;<span class="op" id="6970192">:=</span>&nbsp;<span class="ident" id="6970195"><a href="/net/dial.go.html#2521518">Dial</a></span><span class="op" id="6970199">(</span><span class="string" id="6970200">&#34;unixgram&#34;</span><span class="op" id="6970210">,</span>&nbsp;<span class="ident" id="6970212"><a href="/net/unix_test.go.html#6970165">raddr</a></span><span class="op" id="6970217">.</span><span class="ident" id="6970218">String</span><span class="op" id="6970224">(</span><span class="op" id="6970225">)</span><span class="op" id="6970226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6970229">if</span>&nbsp;<span class="ident" id="6970232"><a href="/net/unix_test.go.html#6970188">err</a></span>&nbsp;<span class="op" id="6970236">!=</span>&nbsp;<span class="ident" id="6970239">nil</span>&nbsp;<span class="op" id="6970243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6970247"><a href="/net/unix_test.go.html#6970151">t</a></span><span class="op" id="6970248">.</span><span class="ident" id="6970249">Fatalf</span><span class="op" id="6970255">(</span><span class="string" id="6970256">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6970273">,</span>&nbsp;<span class="ident" id="6970275"><a href="/net/unix_test.go.html#6970188">err</a></span><span class="op" id="6970278">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6970281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6970284">defer</span>&nbsp;<span class="ident" id="6970290"><a href="/net/unix_test.go.html#6970185">c</a></span><span class="op" id="6970291">.</span><span class="ident" id="6970292">Close</span><span class="op" id="6970297">(</span><span class="op" id="6970298">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6970302">if</span>&nbsp;<span class="ident" id="6970305">_</span><span class="op" id="6970306">,</span>&nbsp;<span class="ident" id="6970308">err</span>&nbsp;<span class="op" id="6970312">:=</span>&nbsp;<span class="ident" id="6970315"><a href="/net/unix_test.go.html#6970185">c</a></span><span class="op" id="6970316">.</span><span class="op" id="6970317">(</span><span class="op" id="6970318">*</span><span class="ident" id="6970319"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="6970327">)</span><span class="op" id="6970328">.</span><span class="ident" id="6970329">WriteToUnix</span><span class="op" id="6970340">(</span><span class="op" id="6970341">[</span><span class="op" id="6970342">]</span><span class="builtintype" id="6970343">byte</span><span class="op" id="6970347">(</span><span class="string" id="6970348">&#34;Connection-oriented&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6970381">)</span><span class="op" id="6970382">,</span>&nbsp;<span class="ident" id="6970384"><a href="/net/unix_test.go.html#6970165">raddr</a></span><span class="op" id="6970389">)</span><span class="op" id="6970390">;</span>&nbsp;<span class="ident" id="6970392"><a href="/net/unix_test.go.html#6970308">err</a></span>&nbsp;<span class="op" id="6970396">==</span>&nbsp;<span class="ident" id="6970399">nil</span>&nbsp;<span class="op" id="6970403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6970407"><a href="/net/unix_test.go.html#6970151">t</a></span><span class="op" id="6970408">.</span><span class="ident" id="6970409">Fatal</span><span class="op" id="6970414">(</span><span class="string" id="6970415">&#34;WriteToUnix&nbsp;should&nbsp;fail&#34;</span><span class="op" id="6970440">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6970443">}</span>&nbsp;<span class="keyword" id="6970445">else</span>&nbsp;<span class="keyword" id="6970450">if</span>&nbsp;<span class="ident" id="6970453"><a href="/net/unix_test.go.html#6970308">err</a></span><span class="op" id="6970456">.</span><span class="op" id="6970457">(</span><span class="op" id="6970458">*</span><span class="ident" id="6970459"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="6970466">)</span><span class="op" id="6970467">.</span><span class="ident" id="6970468">Err</span>&nbsp;<span class="op" id="6970472">!=</span>&nbsp;<span class="ident" id="6970475"><a href="/net/net.go.html#2659374">ErrWriteToConnected</a></span>&nbsp;<span class="op" id="6970495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6970499"><a href="/net/unix_test.go.html#6970151">t</a></span><span class="op" id="6970500">.</span><span class="ident" id="6970501">Fatalf</span><span class="op" id="6970507">(</span><span class="string" id="6970508">&#34;WriteToUnix&nbsp;should&nbsp;fail&nbsp;as&nbsp;ErrWriteToConnected:&nbsp;%v&#34;</span><span class="op" id="6970560">,</span>&nbsp;<span class="ident" id="6970562"><a href="/net/unix_test.go.html#6970308">err</a></span><span class="op" id="6970565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6970568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6970571">if</span>&nbsp;<span class="ident" id="6970574">_</span><span class="op" id="6970575">,</span>&nbsp;<span class="ident" id="6970577"><a href="/net/unix_test.go.html#6970188">err</a></span>&nbsp;<span class="op" id="6970581">=</span>&nbsp;<span class="ident" id="6970583"><a href="/net/unix_test.go.html#6970185">c</a></span><span class="op" id="6970584">.</span><span class="op" id="6970585">(</span><span class="op" id="6970586">*</span><span class="ident" id="6970587"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="6970595">)</span><span class="op" id="6970596">.</span><span class="ident" id="6970597">WriteTo</span><span class="op" id="6970604">(</span><span class="op" id="6970605">[</span><span class="op" id="6970606">]</span><span class="builtintype" id="6970607">byte</span><span class="op" id="6970611">(</span><span class="string" id="6970612">&#34;Connection-oriented&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6970645">)</span><span class="op" id="6970646">,</span>&nbsp;<span class="ident" id="6970648"><a href="/net/unix_test.go.html#6970165">raddr</a></span><span class="op" id="6970653">)</span><span class="op" id="6970654">;</span>&nbsp;<span class="ident" id="6970656"><a href="/net/unix_test.go.html#6970188">err</a></span>&nbsp;<span class="op" id="6970660">==</span>&nbsp;<span class="ident" id="6970663">nil</span>&nbsp;<span class="op" id="6970667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6970671"><a href="/net/unix_test.go.html#6970151">t</a></span><span class="op" id="6970672">.</span><span class="ident" id="6970673">Fatal</span><span class="op" id="6970678">(</span><span class="string" id="6970679">&#34;WriteTo&nbsp;should&nbsp;fail&#34;</span><span class="op" id="6970700">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6970703">}</span>&nbsp;<span class="keyword" id="6970705">else</span>&nbsp;<span class="keyword" id="6970710">if</span>&nbsp;<span class="ident" id="6970713"><a href="/net/unix_test.go.html#6970188">err</a></span><span class="op" id="6970716">.</span><span class="op" id="6970717">(</span><span class="op" id="6970718">*</span><span class="ident" id="6970719"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="6970726">)</span><span class="op" id="6970727">.</span><span class="ident" id="6970728">Err</span>&nbsp;<span class="op" id="6970732">!=</span>&nbsp;<span class="ident" id="6970735"><a href="/net/net.go.html#2659374">ErrWriteToConnected</a></span>&nbsp;<span class="op" id="6970755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6970759"><a href="/net/unix_test.go.html#6970151">t</a></span><span class="op" id="6970760">.</span><span class="ident" id="6970761">Fatalf</span><span class="op" id="6970767">(</span><span class="string" id="6970768">&#34;WriteTo&nbsp;should&nbsp;fail&nbsp;as&nbsp;ErrWriteToConnected:&nbsp;%v&#34;</span><span class="op" id="6970816">,</span>&nbsp;<span class="ident" id="6970818"><a href="/net/unix_test.go.html#6970188">err</a></span><span class="op" id="6970821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6970824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6970827">if</span>&nbsp;<span class="ident" id="6970830">_</span><span class="op" id="6970831">,</span>&nbsp;<span class="ident" id="6970833">_</span><span class="op" id="6970834">,</span>&nbsp;<span class="ident" id="6970836"><a href="/net/unix_test.go.html#6970188">err</a></span>&nbsp;<span class="op" id="6970840">=</span>&nbsp;<span class="ident" id="6970842"><a href="/net/unix_test.go.html#6970185">c</a></span><span class="op" id="6970843">.</span><span class="op" id="6970844">(</span><span class="op" id="6970845">*</span><span class="ident" id="6970846"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="6970854">)</span><span class="op" id="6970855">.</span><span class="ident" id="6970856">WriteMsgUnix</span><span class="op" id="6970868">(</span><span class="op" id="6970869">[</span><span class="op" id="6970870">]</span><span class="builtintype" id="6970871">byte</span><span class="op" id="6970875">(</span><span class="string" id="6970876">&#34;Connection-oriented&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6970909">)</span><span class="op" id="6970910">,</span>&nbsp;<span class="ident" id="6970912">nil</span><span class="op" id="6970915">,</span>&nbsp;<span class="ident" id="6970917"><a href="/net/unix_test.go.html#6970165">raddr</a></span><span class="op" id="6970922">)</span><span class="op" id="6970923">;</span>&nbsp;<span class="ident" id="6970925"><a href="/net/unix_test.go.html#6970188">err</a></span>&nbsp;<span class="op" id="6970929">==</span>&nbsp;<span class="ident" id="6970932">nil</span>&nbsp;<span class="op" id="6970936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6970940"><a href="/net/unix_test.go.html#6970151">t</a></span><span class="op" id="6970941">.</span><span class="ident" id="6970942">Fatal</span><span class="op" id="6970947">(</span><span class="string" id="6970948">&#34;WriteTo&nbsp;should&nbsp;fail&#34;</span><span class="op" id="6970969">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6970972">}</span>&nbsp;<span class="keyword" id="6970974">else</span>&nbsp;<span class="keyword" id="6970979">if</span>&nbsp;<span class="ident" id="6970982"><a href="/net/unix_test.go.html#6970188">err</a></span><span class="op" id="6970985">.</span><span class="op" id="6970986">(</span><span class="op" id="6970987">*</span><span class="ident" id="6970988"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="6970995">)</span><span class="op" id="6970996">.</span><span class="ident" id="6970997">Err</span>&nbsp;<span class="op" id="6971001">!=</span>&nbsp;<span class="ident" id="6971004"><a href="/net/net.go.html#2659374">ErrWriteToConnected</a></span>&nbsp;<span class="op" id="6971024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6971028"><a href="/net/unix_test.go.html#6970151">t</a></span><span class="op" id="6971029">.</span><span class="ident" id="6971030">Fatalf</span><span class="op" id="6971036">(</span><span class="string" id="6971037">&#34;WriteMsgUnix&nbsp;should&nbsp;fail&nbsp;as&nbsp;ErrWriteToConnected:&nbsp;%v&#34;</span><span class="op" id="6971090">,</span>&nbsp;<span class="ident" id="6971092"><a href="/net/unix_test.go.html#6970188">err</a></span><span class="op" id="6971095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6971098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6971101">if</span>&nbsp;<span class="ident" id="6971104">_</span><span class="op" id="6971105">,</span>&nbsp;<span class="ident" id="6971107">err</span>&nbsp;<span class="op" id="6971111">:=</span>&nbsp;<span class="ident" id="6971114"><a href="/net/unix_test.go.html#6970185">c</a></span><span class="op" id="6971115">.</span><span class="ident" id="6971116">Write</span><span class="op" id="6971121">(</span><span class="op" id="6971122">[</span><span class="op" id="6971123">]</span><span class="builtintype" id="6971124">byte</span><span class="op" id="6971128">(</span><span class="string" id="6971129">&#34;Connection-oriented&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6971162">)</span><span class="op" id="6971163">)</span><span class="op" id="6971164">;</span>&nbsp;<span class="ident" id="6971166"><a href="/net/unix_test.go.html#6971107">err</a></span>&nbsp;<span class="op" id="6971170">!=</span>&nbsp;<span class="ident" id="6971173">nil</span>&nbsp;<span class="op" id="6971177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6971181"><a href="/net/unix_test.go.html#6970151">t</a></span><span class="op" id="6971182">.</span><span class="ident" id="6971183">Fatalf</span><span class="op" id="6971189">(</span><span class="string" id="6971190">&#34;Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6971208">,</span>&nbsp;<span class="ident" id="6971210"><a href="/net/unix_test.go.html#6971107">err</a></span><span class="op" id="6971213">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6971216">}</span><br>
<span class="lineno"></span><span class="op" id="6971218">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6971221">func</span>&nbsp;<span class="ident" id="6971226">testUnixgramWritePacketConn</span><span class="op" id="6971253">(</span><span class="ident" id="6971254">t</span>&nbsp;<span class="op" id="6971256">*</span><span class="ident" id="6971257"><a href="/net/unix_test.go.html#6966439">testing</a></span><span class="op" id="6971264">.</span><span class="ident" id="6971265">T</span><span class="op" id="6971266">,</span>&nbsp;<span class="ident" id="6971268">raddr</span>&nbsp;<span class="op" id="6971274">*</span><span class="ident" id="6971275"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="6971283">)</span>&nbsp;<span class="op" id="6971285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6971288">addr</span>&nbsp;<span class="op" id="6971293">:=</span>&nbsp;<span class="ident" id="6971296"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6971308">(</span><span class="op" id="6971309">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6971312">c</span><span class="op" id="6971313">,</span>&nbsp;<span class="ident" id="6971315">err</span>&nbsp;<span class="op" id="6971319">:=</span>&nbsp;<span class="ident" id="6971322"><a href="/net/dial.go.html#2525968">ListenPacket</a></span><span class="op" id="6971334">(</span><span class="string" id="6971335">&#34;unixgram&#34;</span><span class="op" id="6971345">,</span>&nbsp;<span class="ident" id="6971347"><a href="/net/unix_test.go.html#6971288">addr</a></span><span class="op" id="6971351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6971354">if</span>&nbsp;<span class="ident" id="6971357"><a href="/net/unix_test.go.html#6971315">err</a></span>&nbsp;<span class="op" id="6971361">!=</span>&nbsp;<span class="ident" id="6971364">nil</span>&nbsp;<span class="op" id="6971368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6971372"><a href="/net/unix_test.go.html#6971254">t</a></span><span class="op" id="6971373">.</span><span class="ident" id="6971374">Fatalf</span><span class="op" id="6971380">(</span><span class="string" id="6971381">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6971406">,</span>&nbsp;<span class="ident" id="6971408"><a href="/net/unix_test.go.html#6971315">err</a></span><span class="op" id="6971411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6971414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6971417">defer</span>&nbsp;<span class="ident" id="6971423"><a href="/net/unix_test.go.html#6966400">os</a></span><span class="op" id="6971425">.</span><span class="ident" id="6971426">Remove</span><span class="op" id="6971432">(</span><span class="ident" id="6971433"><a href="/net/unix_test.go.html#6971288">addr</a></span><span class="op" id="6971437">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6971440">defer</span>&nbsp;<span class="ident" id="6971446"><a href="/net/unix_test.go.html#6971312">c</a></span><span class="op" id="6971447">.</span><span class="ident" id="6971448">Close</span><span class="op" id="6971453">(</span><span class="op" id="6971454">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6971458">if</span>&nbsp;<span class="ident" id="6971461">_</span><span class="op" id="6971462">,</span>&nbsp;<span class="ident" id="6971464">err</span>&nbsp;<span class="op" id="6971468">:=</span>&nbsp;<span class="ident" id="6971471"><a href="/net/unix_test.go.html#6971312">c</a></span><span class="op" id="6971472">.</span><span class="op" id="6971473">(</span><span class="op" id="6971474">*</span><span class="ident" id="6971475"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="6971483">)</span><span class="op" id="6971484">.</span><span class="ident" id="6971485">WriteToUnix</span><span class="op" id="6971496">(</span><span class="op" id="6971497">[</span><span class="op" id="6971498">]</span><span class="builtintype" id="6971499">byte</span><span class="op" id="6971503">(</span><span class="string" id="6971504">&#34;Connectionless&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6971532">)</span><span class="op" id="6971533">,</span>&nbsp;<span class="ident" id="6971535"><a href="/net/unix_test.go.html#6971268">raddr</a></span><span class="op" id="6971540">)</span><span class="op" id="6971541">;</span>&nbsp;<span class="ident" id="6971543"><a href="/net/unix_test.go.html#6971464">err</a></span>&nbsp;<span class="op" id="6971547">!=</span>&nbsp;<span class="ident" id="6971550">nil</span>&nbsp;<span class="op" id="6971554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6971558"><a href="/net/unix_test.go.html#6971254">t</a></span><span class="op" id="6971559">.</span><span class="ident" id="6971560">Fatalf</span><span class="op" id="6971566">(</span><span class="string" id="6971567">&#34;WriteToUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6971591">,</span>&nbsp;<span class="ident" id="6971593"><a href="/net/unix_test.go.html#6971464">err</a></span><span class="op" id="6971596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6971599">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6971602">if</span>&nbsp;<span class="ident" id="6971605">_</span><span class="op" id="6971606">,</span>&nbsp;<span class="ident" id="6971608">err</span>&nbsp;<span class="op" id="6971612">:=</span>&nbsp;<span class="ident" id="6971615"><a href="/net/unix_test.go.html#6971312">c</a></span><span class="op" id="6971616">.</span><span class="ident" id="6971617">WriteTo</span><span class="op" id="6971624">(</span><span class="op" id="6971625">[</span><span class="op" id="6971626">]</span><span class="builtintype" id="6971627">byte</span><span class="op" id="6971631">(</span><span class="string" id="6971632">&#34;Connectionless&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6971660">)</span><span class="op" id="6971661">,</span>&nbsp;<span class="ident" id="6971663"><a href="/net/unix_test.go.html#6971268">raddr</a></span><span class="op" id="6971668">)</span><span class="op" id="6971669">;</span>&nbsp;<span class="ident" id="6971671"><a href="/net/unix_test.go.html#6971608">err</a></span>&nbsp;<span class="op" id="6971675">!=</span>&nbsp;<span class="ident" id="6971678">nil</span>&nbsp;<span class="op" id="6971682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6971686"><a href="/net/unix_test.go.html#6971254">t</a></span><span class="op" id="6971687">.</span><span class="ident" id="6971688">Fatalf</span><span class="op" id="6971694">(</span><span class="string" id="6971695">&#34;WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6971715">,</span>&nbsp;<span class="ident" id="6971717"><a href="/net/unix_test.go.html#6971608">err</a></span><span class="op" id="6971720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6971723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6971726">if</span>&nbsp;<span class="ident" id="6971729">_</span><span class="op" id="6971730">,</span>&nbsp;<span class="ident" id="6971732">_</span><span class="op" id="6971733">,</span>&nbsp;<span class="ident" id="6971735">err</span>&nbsp;<span class="op" id="6971739">:=</span>&nbsp;<span class="ident" id="6971742"><a href="/net/unix_test.go.html#6971312">c</a></span><span class="op" id="6971743">.</span><span class="op" id="6971744">(</span><span class="op" id="6971745">*</span><span class="ident" id="6971746"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="6971754">)</span><span class="op" id="6971755">.</span><span class="ident" id="6971756">WriteMsgUnix</span><span class="op" id="6971768">(</span><span class="op" id="6971769">[</span><span class="op" id="6971770">]</span><span class="builtintype" id="6971771">byte</span><span class="op" id="6971775">(</span><span class="string" id="6971776">&#34;Connectionless&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6971804">)</span><span class="op" id="6971805">,</span>&nbsp;<span class="ident" id="6971807">nil</span><span class="op" id="6971810">,</span>&nbsp;<span class="ident" id="6971812"><a href="/net/unix_test.go.html#6971268">raddr</a></span><span class="op" id="6971817">)</span><span class="op" id="6971818">;</span>&nbsp;<span class="ident" id="6971820"><a href="/net/unix_test.go.html#6971735">err</a></span>&nbsp;<span class="op" id="6971824">!=</span>&nbsp;<span class="ident" id="6971827">nil</span>&nbsp;<span class="op" id="6971831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6971835"><a href="/net/unix_test.go.html#6971254">t</a></span><span class="op" id="6971836">.</span><span class="ident" id="6971837">Fatalf</span><span class="op" id="6971843">(</span><span class="string" id="6971844">&#34;WriteMsgUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6971869">,</span>&nbsp;<span class="ident" id="6971871"><a href="/net/unix_test.go.html#6971735">err</a></span><span class="op" id="6971874">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6971877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6971880">if</span>&nbsp;<span class="ident" id="6971883">_</span><span class="op" id="6971884">,</span>&nbsp;<span class="ident" id="6971886">err</span>&nbsp;<span class="op" id="6971890">:=</span>&nbsp;<span class="ident" id="6971893"><a href="/net/unix_test.go.html#6971312">c</a></span><span class="op" id="6971894">.</span><span class="op" id="6971895">(</span><span class="op" id="6971896">*</span><span class="ident" id="6971897"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="6971905">)</span><span class="op" id="6971906">.</span><span class="ident" id="6971907">Write</span><span class="op" id="6971912">(</span><span class="op" id="6971913">[</span><span class="op" id="6971914">]</span><span class="builtintype" id="6971915">byte</span><span class="op" id="6971919">(</span><span class="string" id="6971920">&#34;Connectionless&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="6971948">)</span><span class="op" id="6971949">)</span><span class="op" id="6971950">;</span>&nbsp;<span class="ident" id="6971952"><a href="/net/unix_test.go.html#6971886">err</a></span>&nbsp;<span class="op" id="6971956">==</span>&nbsp;<span class="ident" id="6971959">nil</span>&nbsp;<span class="op" id="6971963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6971967"><a href="/net/unix_test.go.html#6971254">t</a></span><span class="op" id="6971968">.</span><span class="ident" id="6971969">Fatal</span><span class="op" id="6971974">(</span><span class="string" id="6971975">&#34;Write&nbsp;should&nbsp;fail&#34;</span><span class="op" id="6971994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6971997">}</span><br>
<span class="lineno"></span><span class="op" id="6971999">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="6972002">func</span>&nbsp;<span class="ident" id="6972007">TestUnixConnLocalAndRemoteNames</span><span class="op" id="6972038">(</span><span class="ident" id="6972039">t</span>&nbsp;<span class="op" id="6972041">*</span><span class="ident" id="6972042"><a href="/net/unix_test.go.html#6966439">testing</a></span><span class="op" id="6972049">.</span><span class="ident" id="6972050">T</span><span class="op" id="6972051">)</span>&nbsp;<span class="op" id="6972053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972056">for</span>&nbsp;<span class="ident" id="6972060">_</span><span class="op" id="6972061">,</span>&nbsp;<span class="ident" id="6972063">laddr</span>&nbsp;<span class="op" id="6972069">:=</span>&nbsp;<span class="keyword" id="6972072">range</span>&nbsp;<span class="op" id="6972078">[</span><span class="op" id="6972079">]</span><span class="builtintype" id="6972080">string</span><span class="op" id="6972086">{</span><span class="string" id="6972087">&#34;&#34;</span><span class="op" id="6972089">,</span>&nbsp;<span class="ident" id="6972091"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6972103">(</span><span class="op" id="6972104">)</span><span class="op" id="6972105">}</span>&nbsp;<span class="op" id="6972107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972111">laddr</span>&nbsp;<span class="op" id="6972117">:=</span>&nbsp;<span class="ident" id="6972120"><a href="/net/unix_test.go.html#6972063">laddr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972128">taddr</span>&nbsp;<span class="op" id="6972134">:=</span>&nbsp;<span class="ident" id="6972137"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6972149">(</span><span class="op" id="6972150">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972154">ta</span><span class="op" id="6972156">,</span>&nbsp;<span class="ident" id="6972158">err</span>&nbsp;<span class="op" id="6972162">:=</span>&nbsp;<span class="ident" id="6972165"><a href="/net/unixsock.go.html#2714067">ResolveUnixAddr</a></span><span class="op" id="6972180">(</span><span class="string" id="6972181">&#34;unix&#34;</span><span class="op" id="6972187">,</span>&nbsp;<span class="ident" id="6972189"><a href="/net/unix_test.go.html#6972128">taddr</a></span><span class="op" id="6972194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972198">if</span>&nbsp;<span class="ident" id="6972201"><a href="/net/unix_test.go.html#6972158">err</a></span>&nbsp;<span class="op" id="6972205">!=</span>&nbsp;<span class="ident" id="6972208">nil</span>&nbsp;<span class="op" id="6972212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972217"><a href="/net/unix_test.go.html#6972039">t</a></span><span class="op" id="6972218">.</span><span class="ident" id="6972219">Fatalf</span><span class="op" id="6972225">(</span><span class="string" id="6972226">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6972254">,</span>&nbsp;<span class="ident" id="6972256"><a href="/net/unix_test.go.html#6972158">err</a></span><span class="op" id="6972259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6972263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972267">ln</span><span class="op" id="6972269">,</span>&nbsp;<span class="ident" id="6972271"><a href="/net/unix_test.go.html#6972158">err</a></span>&nbsp;<span class="op" id="6972275">:=</span>&nbsp;<span class="ident" id="6972278"><a href="/net/unixsock_posix.go.html#2721464">ListenUnix</a></span><span class="op" id="6972288">(</span><span class="string" id="6972289">&#34;unix&#34;</span><span class="op" id="6972295">,</span>&nbsp;<span class="ident" id="6972297"><a href="/net/unix_test.go.html#6972154">ta</a></span><span class="op" id="6972299">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972303">if</span>&nbsp;<span class="ident" id="6972306"><a href="/net/unix_test.go.html#6972158">err</a></span>&nbsp;<span class="op" id="6972310">!=</span>&nbsp;<span class="ident" id="6972313">nil</span>&nbsp;<span class="op" id="6972317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972322"><a href="/net/unix_test.go.html#6972039">t</a></span><span class="op" id="6972323">.</span><span class="ident" id="6972324">Fatalf</span><span class="op" id="6972330">(</span><span class="string" id="6972331">&#34;ListenUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6972354">,</span>&nbsp;<span class="ident" id="6972356"><a href="/net/unix_test.go.html#6972158">err</a></span><span class="op" id="6972359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6972363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972367">defer</span>&nbsp;<span class="keyword" id="6972373">func</span><span class="op" id="6972377">(</span><span class="op" id="6972378">)</span>&nbsp;<span class="op" id="6972380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972385"><a href="/net/unix_test.go.html#6972267">ln</a></span><span class="op" id="6972387">.</span><span class="ident" id="6972388">Close</span><span class="op" id="6972393">(</span><span class="op" id="6972394">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972399"><a href="/net/unix_test.go.html#6966400">os</a></span><span class="op" id="6972401">.</span><span class="ident" id="6972402">Remove</span><span class="op" id="6972408">(</span><span class="ident" id="6972409"><a href="/net/unix_test.go.html#6972128">taddr</a></span><span class="op" id="6972414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6972418">}</span><span class="op" id="6972419">(</span><span class="op" id="6972420">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972425">done</span>&nbsp;<span class="op" id="6972430">:=</span>&nbsp;<span class="builtinfunc" id="6972433">make</span><span class="op" id="6972437">(</span><span class="keyword" id="6972438">chan</span>&nbsp;<span class="builtintype" id="6972443">int</span><span class="op" id="6972446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972450">go</span>&nbsp;<span class="ident" id="6972453"><a href="/net/conn_test.go.html#6768889">transponder</a></span><span class="op" id="6972464">(</span><span class="ident" id="6972465"><a href="/net/unix_test.go.html#6972039">t</a></span><span class="op" id="6972466">,</span>&nbsp;<span class="ident" id="6972468"><a href="/net/unix_test.go.html#6972267">ln</a></span><span class="op" id="6972470">,</span>&nbsp;<span class="ident" id="6972472"><a href="/net/unix_test.go.html#6972425">done</a></span><span class="op" id="6972476">)</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972481">la</span><span class="op" id="6972483">,</span>&nbsp;<span class="ident" id="6972485"><a href="/net/unix_test.go.html#6972158">err</a></span>&nbsp;<span class="op" id="6972489">:=</span>&nbsp;<span class="ident" id="6972492"><a href="/net/unixsock.go.html#2714067">ResolveUnixAddr</a></span><span class="op" id="6972507">(</span><span class="string" id="6972508">&#34;unix&#34;</span><span class="op" id="6972514">,</span>&nbsp;<span class="ident" id="6972516"><a href="/net/unix_test.go.html#6972111">laddr</a></span><span class="op" id="6972521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972525">if</span>&nbsp;<span class="ident" id="6972528"><a href="/net/unix_test.go.html#6972158">err</a></span>&nbsp;<span class="op" id="6972532">!=</span>&nbsp;<span class="ident" id="6972535">nil</span>&nbsp;<span class="op" id="6972539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972544"><a href="/net/unix_test.go.html#6972039">t</a></span><span class="op" id="6972545">.</span><span class="ident" id="6972546">Fatalf</span><span class="op" id="6972552">(</span><span class="string" id="6972553">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6972581">,</span>&nbsp;<span class="ident" id="6972583"><a href="/net/unix_test.go.html#6972158">err</a></span><span class="op" id="6972586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6972590">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972594">c</span><span class="op" id="6972595">,</span>&nbsp;<span class="ident" id="6972597"><a href="/net/unix_test.go.html#6972158">err</a></span>&nbsp;<span class="op" id="6972601">:=</span>&nbsp;<span class="ident" id="6972604"><a href="/net/unixsock_posix.go.html#2720568">DialUnix</a></span><span class="op" id="6972612">(</span><span class="string" id="6972613">&#34;unix&#34;</span><span class="op" id="6972619">,</span>&nbsp;<span class="ident" id="6972621"><a href="/net/unix_test.go.html#6972481">la</a></span><span class="op" id="6972623">,</span>&nbsp;<span class="ident" id="6972625"><a href="/net/unix_test.go.html#6972154">ta</a></span><span class="op" id="6972627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972631">if</span>&nbsp;<span class="ident" id="6972634"><a href="/net/unix_test.go.html#6972158">err</a></span>&nbsp;<span class="op" id="6972638">!=</span>&nbsp;<span class="ident" id="6972641">nil</span>&nbsp;<span class="op" id="6972645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972650"><a href="/net/unix_test.go.html#6972039">t</a></span><span class="op" id="6972651">.</span><span class="ident" id="6972652">Fatalf</span><span class="op" id="6972658">(</span><span class="string" id="6972659">&#34;DialUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6972680">,</span>&nbsp;<span class="ident" id="6972682"><a href="/net/unix_test.go.html#6972158">err</a></span><span class="op" id="6972685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6972689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972693">defer</span>&nbsp;<span class="keyword" id="6972699">func</span><span class="op" id="6972703">(</span><span class="op" id="6972704">)</span>&nbsp;<span class="op" id="6972706">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972711"><a href="/net/unix_test.go.html#6972594">c</a></span><span class="op" id="6972712">.</span><span class="ident" id="6972713">Close</span><span class="op" id="6972718">(</span><span class="op" id="6972719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972724">if</span>&nbsp;<span class="ident" id="6972727"><a href="/net/unix_test.go.html#6972481">la</a></span>&nbsp;<span class="op" id="6972730">!=</span>&nbsp;<span class="ident" id="6972733">nil</span>&nbsp;<span class="op" id="6972737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972743">defer</span>&nbsp;<span class="ident" id="6972749"><a href="/net/unix_test.go.html#6966400">os</a></span><span class="op" id="6972751">.</span><span class="ident" id="6972752">Remove</span><span class="op" id="6972758">(</span><span class="ident" id="6972759"><a href="/net/unix_test.go.html#6972111">laddr</a></span><span class="op" id="6972764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6972769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6972773">}</span><span class="op" id="6972774">(</span><span class="op" id="6972775">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972779">if</span>&nbsp;<span class="ident" id="6972782">_</span><span class="op" id="6972783">,</span>&nbsp;<span class="ident" id="6972785">err</span>&nbsp;<span class="op" id="6972789">:=</span>&nbsp;<span class="ident" id="6972792"><a href="/net/unix_test.go.html#6972594">c</a></span><span class="op" id="6972793">.</span><span class="ident" id="6972794">Write</span><span class="op" id="6972799">(</span><span class="op" id="6972800">[</span><span class="op" id="6972801">]</span><span class="builtintype" id="6972802">byte</span><span class="op" id="6972806">(</span><span class="string" id="6972807">&#34;UNIXCONN&nbsp;LOCAL&nbsp;AND&nbsp;REMOTE&nbsp;NAME&nbsp;TEST&#34;</span><span class="op" id="6972844">)</span><span class="op" id="6972845">)</span><span class="op" id="6972846">;</span>&nbsp;<span class="ident" id="6972848"><a href="/net/unix_test.go.html#6972785">err</a></span>&nbsp;<span class="op" id="6972852">!=</span>&nbsp;<span class="ident" id="6972855">nil</span>&nbsp;<span class="op" id="6972859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972864"><a href="/net/unix_test.go.html#6972039">t</a></span><span class="op" id="6972865">.</span><span class="ident" id="6972866">Fatalf</span><span class="op" id="6972872">(</span><span class="string" id="6972873">&#34;UnixConn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6972900">,</span>&nbsp;<span class="ident" id="6972902"><a href="/net/unix_test.go.html#6972785">err</a></span><span class="op" id="6972905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6972909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972914">switch</span>&nbsp;<span class="ident" id="6972921"><a href="/net/unix_test.go.html#6966417">runtime</a></span><span class="op" id="6972928">.</span><span class="ident" id="6972929">GOOS</span>&nbsp;<span class="op" id="6972934">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972938">case</span>&nbsp;<span class="string" id="6972943">&#34;android&#34;</span><span class="op" id="6972952">,</span>&nbsp;<span class="string" id="6972954">&#34;linux&#34;</span><span class="op" id="6972961">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6972966">if</span>&nbsp;<span class="ident" id="6972969"><a href="/net/unix_test.go.html#6972111">laddr</a></span>&nbsp;<span class="op" id="6972975">==</span>&nbsp;<span class="string" id="6972978">&#34;&#34;</span>&nbsp;<span class="op" id="6972981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972987"><a href="/net/unix_test.go.html#6972111">laddr</a></span>&nbsp;<span class="op" id="6972993">=</span>&nbsp;<span class="string" id="6972995">&#34;@&#34;</span>&nbsp;<span class="comment" id="6972999">//&nbsp;autobind&nbsp;feature</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973026">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973030">var</span>&nbsp;<span class="ident" id="6973034">connAddrs</span>&nbsp;<span class="op" id="6973044">=</span>&nbsp;<span class="op" id="6973046">[</span><span class="num" id="6973047">3</span><span class="op" id="6973048">]</span><span class="keyword" id="6973049">struct</span><span class="op" id="6973055">{</span>&nbsp;<span class="ident" id="6973057">got</span><span class="op" id="6973060">,</span>&nbsp;<span class="ident" id="6973062">want</span>&nbsp;<span class="ident" id="6973067"><a href="/net/net.go.html#2652238">Addr</a></span>&nbsp;<span class="op" id="6973072">}</span><span class="op" id="6973073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973078">{</span><span class="ident" id="6973079"><a href="/net/unix_test.go.html#6972267">ln</a></span><span class="op" id="6973081">.</span><span class="ident" id="6973082">Addr</span><span class="op" id="6973086">(</span><span class="op" id="6973087">)</span><span class="op" id="6973088">,</span>&nbsp;<span class="ident" id="6973090"><a href="/net/unix_test.go.html#6972154">ta</a></span><span class="op" id="6973092">}</span><span class="op" id="6973093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973098">{</span><span class="ident" id="6973099"><a href="/net/unix_test.go.html#6972594">c</a></span><span class="op" id="6973100">.</span><span class="ident" id="6973101">LocalAddr</span><span class="op" id="6973110">(</span><span class="op" id="6973111">)</span><span class="op" id="6973112">,</span>&nbsp;<span class="op" id="6973114">&amp;</span><span class="ident" id="6973115"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="6973123">{</span><span class="ident" id="6973124">Name</span><span class="op" id="6973128">:</span>&nbsp;<span class="ident" id="6973130"><a href="/net/unix_test.go.html#6972111">laddr</a></span><span class="op" id="6973135">,</span>&nbsp;<span class="ident" id="6973137">Net</span><span class="op" id="6973140">:</span>&nbsp;<span class="string" id="6973142">&#34;unix&#34;</span><span class="op" id="6973148">}</span><span class="op" id="6973149">}</span><span class="op" id="6973150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973155">{</span><span class="ident" id="6973156"><a href="/net/unix_test.go.html#6972594">c</a></span><span class="op" id="6973157">.</span><span class="ident" id="6973158">RemoteAddr</span><span class="op" id="6973168">(</span><span class="op" id="6973169">)</span><span class="op" id="6973170">,</span>&nbsp;<span class="ident" id="6973172"><a href="/net/unix_test.go.html#6972154">ta</a></span><span class="op" id="6973174">}</span><span class="op" id="6973175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973179">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973183">for</span>&nbsp;<span class="ident" id="6973187">_</span><span class="op" id="6973188">,</span>&nbsp;<span class="ident" id="6973190">ca</span>&nbsp;<span class="op" id="6973193">:=</span>&nbsp;<span class="keyword" id="6973196">range</span>&nbsp;<span class="ident" id="6973202"><a href="/net/unix_test.go.html#6973034">connAddrs</a></span>&nbsp;<span class="op" id="6973212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973217">if</span>&nbsp;<span class="op" id="6973220">!</span><span class="ident" id="6973221"><a href="/net/unix_test.go.html#6966406">reflect</a></span><span class="op" id="6973228">.</span><span class="ident" id="6973229">DeepEqual</span><span class="op" id="6973238">(</span><span class="ident" id="6973239"><a href="/net/unix_test.go.html#6973190">ca</a></span><span class="op" id="6973241">.</span><span class="ident" id="6973242">got</span><span class="op" id="6973245">,</span>&nbsp;<span class="ident" id="6973247"><a href="/net/unix_test.go.html#6973190">ca</a></span><span class="op" id="6973249">.</span><span class="ident" id="6973250">want</span><span class="op" id="6973254">)</span>&nbsp;<span class="op" id="6973256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973262"><a href="/net/unix_test.go.html#6972039">t</a></span><span class="op" id="6973263">.</span><span class="ident" id="6973264">Fatalf</span><span class="op" id="6973270">(</span><span class="string" id="6973271">&#34;got&nbsp;%#v,&nbsp;expected&nbsp;%#v&#34;</span><span class="op" id="6973294">,</span>&nbsp;<span class="ident" id="6973296"><a href="/net/unix_test.go.html#6973190">ca</a></span><span class="op" id="6973298">.</span><span class="ident" id="6973299">got</span><span class="op" id="6973302">,</span>&nbsp;<span class="ident" id="6973304"><a href="/net/unix_test.go.html#6973190">ca</a></span><span class="op" id="6973306">.</span><span class="ident" id="6973307">want</span><span class="op" id="6973311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973320">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973325">&lt;-</span><span class="ident" id="6973327"><a href="/net/unix_test.go.html#6972425">done</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973333">}</span><br>
<span class="lineno"></span><span class="op" id="6973335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="keyword" id="6973338">func</span>&nbsp;<span class="ident" id="6973343">TestUnixgramConnLocalAndRemoteNames</span><span class="op" id="6973378">(</span><span class="ident" id="6973379">t</span>&nbsp;<span class="op" id="6973381">*</span><span class="ident" id="6973382"><a href="/net/unix_test.go.html#6966439">testing</a></span><span class="op" id="6973389">.</span><span class="ident" id="6973390">T</span><span class="op" id="6973391">)</span>&nbsp;<span class="op" id="6973393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973396">for</span>&nbsp;<span class="ident" id="6973400">_</span><span class="op" id="6973401">,</span>&nbsp;<span class="ident" id="6973403">laddr</span>&nbsp;<span class="op" id="6973409">:=</span>&nbsp;<span class="keyword" id="6973412">range</span>&nbsp;<span class="op" id="6973418">[</span><span class="op" id="6973419">]</span><span class="builtintype" id="6973420">string</span><span class="op" id="6973426">{</span><span class="string" id="6973427">&#34;&#34;</span><span class="op" id="6973429">,</span>&nbsp;<span class="ident" id="6973431"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6973443">(</span><span class="op" id="6973444">)</span><span class="op" id="6973445">}</span>&nbsp;<span class="op" id="6973447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973451">laddr</span>&nbsp;<span class="op" id="6973457">:=</span>&nbsp;<span class="ident" id="6973460"><a href="/net/unix_test.go.html#6973403">laddr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973468">taddr</span>&nbsp;<span class="op" id="6973474">:=</span>&nbsp;<span class="ident" id="6973477"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6973489">(</span><span class="op" id="6973490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973494">ta</span><span class="op" id="6973496">,</span>&nbsp;<span class="ident" id="6973498">err</span>&nbsp;<span class="op" id="6973502">:=</span>&nbsp;<span class="ident" id="6973505"><a href="/net/unixsock.go.html#2714067">ResolveUnixAddr</a></span><span class="op" id="6973520">(</span><span class="string" id="6973521">&#34;unixgram&#34;</span><span class="op" id="6973531">,</span>&nbsp;<span class="ident" id="6973533"><a href="/net/unix_test.go.html#6973468">taddr</a></span><span class="op" id="6973538">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973542">if</span>&nbsp;<span class="ident" id="6973545"><a href="/net/unix_test.go.html#6973498">err</a></span>&nbsp;<span class="op" id="6973549">!=</span>&nbsp;<span class="ident" id="6973552">nil</span>&nbsp;<span class="op" id="6973556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973561"><a href="/net/unix_test.go.html#6973379">t</a></span><span class="op" id="6973562">.</span><span class="ident" id="6973563">Fatalf</span><span class="op" id="6973569">(</span><span class="string" id="6973570">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6973598">,</span>&nbsp;<span class="ident" id="6973600"><a href="/net/unix_test.go.html#6973498">err</a></span><span class="op" id="6973603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973611">c1</span><span class="op" id="6973613">,</span>&nbsp;<span class="ident" id="6973615"><a href="/net/unix_test.go.html#6973498">err</a></span>&nbsp;<span class="op" id="6973619">:=</span>&nbsp;<span class="ident" id="6973622"><a href="/net/unixsock_posix.go.html#2724349">ListenUnixgram</a></span><span class="op" id="6973636">(</span><span class="string" id="6973637">&#34;unixgram&#34;</span><span class="op" id="6973647">,</span>&nbsp;<span class="ident" id="6973649"><a href="/net/unix_test.go.html#6973494">ta</a></span><span class="op" id="6973651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973655">if</span>&nbsp;<span class="ident" id="6973658"><a href="/net/unix_test.go.html#6973498">err</a></span>&nbsp;<span class="op" id="6973662">!=</span>&nbsp;<span class="ident" id="6973665">nil</span>&nbsp;<span class="op" id="6973669">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973674"><a href="/net/unix_test.go.html#6973379">t</a></span><span class="op" id="6973675">.</span><span class="ident" id="6973676">Fatalf</span><span class="op" id="6973682">(</span><span class="string" id="6973683">&#34;ListenUnixgram&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6973710">,</span>&nbsp;<span class="ident" id="6973712"><a href="/net/unix_test.go.html#6973498">err</a></span><span class="op" id="6973715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973723">defer</span>&nbsp;<span class="keyword" id="6973729">func</span><span class="op" id="6973733">(</span><span class="op" id="6973734">)</span>&nbsp;<span class="op" id="6973736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973741"><a href="/net/unix_test.go.html#6973611">c1</a></span><span class="op" id="6973743">.</span><span class="ident" id="6973744">Close</span><span class="op" id="6973749">(</span><span class="op" id="6973750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973755"><a href="/net/unix_test.go.html#6966400">os</a></span><span class="op" id="6973757">.</span><span class="ident" id="6973758">Remove</span><span class="op" id="6973764">(</span><span class="ident" id="6973765"><a href="/net/unix_test.go.html#6973468">taddr</a></span><span class="op" id="6973770">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973774">}</span><span class="op" id="6973775">(</span><span class="op" id="6973776">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973781">var</span>&nbsp;<span class="ident" id="6973785">la</span>&nbsp;<span class="op" id="6973788">*</span><span class="ident" id="6973789"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973800">if</span>&nbsp;<span class="ident" id="6973803"><a href="/net/unix_test.go.html#6973451">laddr</a></span>&nbsp;<span class="op" id="6973809">!=</span>&nbsp;<span class="string" id="6973812">&#34;&#34;</span>&nbsp;<span class="op" id="6973815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973820">if</span>&nbsp;<span class="ident" id="6973823"><a href="/net/unix_test.go.html#6973785">la</a></span><span class="op" id="6973825">,</span>&nbsp;<span class="ident" id="6973827"><a href="/net/unix_test.go.html#6973498">err</a></span>&nbsp;<span class="op" id="6973831">=</span>&nbsp;<span class="ident" id="6973833"><a href="/net/unixsock.go.html#2714067">ResolveUnixAddr</a></span><span class="op" id="6973848">(</span><span class="string" id="6973849">&#34;unixgram&#34;</span><span class="op" id="6973859">,</span>&nbsp;<span class="ident" id="6973861"><a href="/net/unix_test.go.html#6973451">laddr</a></span><span class="op" id="6973866">)</span><span class="op" id="6973867">;</span>&nbsp;<span class="ident" id="6973869"><a href="/net/unix_test.go.html#6973498">err</a></span>&nbsp;<span class="op" id="6973873">!=</span>&nbsp;<span class="ident" id="6973876">nil</span>&nbsp;<span class="op" id="6973880">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973886"><a href="/net/unix_test.go.html#6973379">t</a></span><span class="op" id="6973887">.</span><span class="ident" id="6973888">Fatalf</span><span class="op" id="6973894">(</span><span class="string" id="6973895">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6973923">,</span>&nbsp;<span class="ident" id="6973925"><a href="/net/unix_test.go.html#6973498">err</a></span><span class="op" id="6973928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973941">c2</span><span class="op" id="6973943">,</span>&nbsp;<span class="ident" id="6973945"><a href="/net/unix_test.go.html#6973498">err</a></span>&nbsp;<span class="op" id="6973949">:=</span>&nbsp;<span class="ident" id="6973952"><a href="/net/unixsock_posix.go.html#2720568">DialUnix</a></span><span class="op" id="6973960">(</span><span class="string" id="6973961">&#34;unixgram&#34;</span><span class="op" id="6973971">,</span>&nbsp;<span class="ident" id="6973973"><a href="/net/unix_test.go.html#6973785">la</a></span><span class="op" id="6973975">,</span>&nbsp;<span class="ident" id="6973977"><a href="/net/unix_test.go.html#6973494">ta</a></span><span class="op" id="6973979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973983">if</span>&nbsp;<span class="ident" id="6973986"><a href="/net/unix_test.go.html#6973498">err</a></span>&nbsp;<span class="op" id="6973990">!=</span>&nbsp;<span class="ident" id="6973993">nil</span>&nbsp;<span class="op" id="6973997">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6974002"><a href="/net/unix_test.go.html#6973379">t</a></span><span class="op" id="6974003">.</span><span class="ident" id="6974004">Fatalf</span><span class="op" id="6974010">(</span><span class="string" id="6974011">&#34;DialUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6974032">,</span>&nbsp;<span class="ident" id="6974034"><a href="/net/unix_test.go.html#6973498">err</a></span><span class="op" id="6974037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974045">defer</span>&nbsp;<span class="keyword" id="6974051">func</span><span class="op" id="6974055">(</span><span class="op" id="6974056">)</span>&nbsp;<span class="op" id="6974058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6974063"><a href="/net/unix_test.go.html#6973941">c2</a></span><span class="op" id="6974065">.</span><span class="ident" id="6974066">Close</span><span class="op" id="6974071">(</span><span class="op" id="6974072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974077">if</span>&nbsp;<span class="ident" id="6974080"><a href="/net/unix_test.go.html#6973785">la</a></span>&nbsp;<span class="op" id="6974083">!=</span>&nbsp;<span class="ident" id="6974086">nil</span>&nbsp;<span class="op" id="6974090">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974096">defer</span>&nbsp;<span class="ident" id="6974102"><a href="/net/unix_test.go.html#6966400">os</a></span><span class="op" id="6974104">.</span><span class="ident" id="6974105">Remove</span><span class="op" id="6974111">(</span><span class="ident" id="6974112"><a href="/net/unix_test.go.html#6973451">laddr</a></span><span class="op" id="6974117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974126">}</span><span class="op" id="6974127">(</span><span class="op" id="6974128">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974133">switch</span>&nbsp;<span class="ident" id="6974140"><a href="/net/unix_test.go.html#6966417">runtime</a></span><span class="op" id="6974147">.</span><span class="ident" id="6974148">GOOS</span>&nbsp;<span class="op" id="6974153">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974157">case</span>&nbsp;<span class="string" id="6974162">&#34;android&#34;</span><span class="op" id="6974171">,</span>&nbsp;<span class="string" id="6974173">&#34;linux&#34;</span><span class="op" id="6974180">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974185">if</span>&nbsp;<span class="ident" id="6974188"><a href="/net/unix_test.go.html#6973451">laddr</a></span>&nbsp;<span class="op" id="6974194">==</span>&nbsp;<span class="string" id="6974197">&#34;&#34;</span>&nbsp;<span class="op" id="6974200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6974206"><a href="/net/unix_test.go.html#6973451">laddr</a></span>&nbsp;<span class="op" id="6974212">=</span>&nbsp;<span class="string" id="6974214">&#34;@&#34;</span>&nbsp;<span class="comment" id="6974218">//&nbsp;autobind&nbsp;feature</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974245">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974250">var</span>&nbsp;<span class="ident" id="6974254">connAddrs</span>&nbsp;<span class="op" id="6974264">=</span>&nbsp;<span class="op" id="6974266">[</span><span class="num" id="6974267">4</span><span class="op" id="6974268">]</span><span class="keyword" id="6974269">struct</span><span class="op" id="6974275">{</span>&nbsp;<span class="ident" id="6974277">got</span><span class="op" id="6974280">,</span>&nbsp;<span class="ident" id="6974282">want</span>&nbsp;<span class="ident" id="6974287"><a href="/net/net.go.html#2652238">Addr</a></span>&nbsp;<span class="op" id="6974292">}</span><span class="op" id="6974293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974298">{</span><span class="ident" id="6974299"><a href="/net/unix_test.go.html#6973611">c1</a></span><span class="op" id="6974301">.</span><span class="ident" id="6974302">LocalAddr</span><span class="op" id="6974311">(</span><span class="op" id="6974312">)</span><span class="op" id="6974313">,</span>&nbsp;<span class="ident" id="6974315"><a href="/net/unix_test.go.html#6973494">ta</a></span><span class="op" id="6974317">}</span><span class="op" id="6974318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974323">{</span><span class="ident" id="6974324"><a href="/net/unix_test.go.html#6973611">c1</a></span><span class="op" id="6974326">.</span><span class="ident" id="6974327">RemoteAddr</span><span class="op" id="6974337">(</span><span class="op" id="6974338">)</span><span class="op" id="6974339">,</span>&nbsp;<span class="ident" id="6974341">nil</span><span class="op" id="6974344">}</span><span class="op" id="6974345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974350">{</span><span class="ident" id="6974351"><a href="/net/unix_test.go.html#6973941">c2</a></span><span class="op" id="6974353">.</span><span class="ident" id="6974354">LocalAddr</span><span class="op" id="6974363">(</span><span class="op" id="6974364">)</span><span class="op" id="6974365">,</span>&nbsp;<span class="op" id="6974367">&amp;</span><span class="ident" id="6974368"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="6974376">{</span><span class="ident" id="6974377">Name</span><span class="op" id="6974381">:</span>&nbsp;<span class="ident" id="6974383"><a href="/net/unix_test.go.html#6973451">laddr</a></span><span class="op" id="6974388">,</span>&nbsp;<span class="ident" id="6974390">Net</span><span class="op" id="6974393">:</span>&nbsp;<span class="string" id="6974395">&#34;unixgram&#34;</span><span class="op" id="6974405">}</span><span class="op" id="6974406">}</span><span class="op" id="6974407">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974412">{</span><span class="ident" id="6974413"><a href="/net/unix_test.go.html#6973941">c2</a></span><span class="op" id="6974415">.</span><span class="ident" id="6974416">RemoteAddr</span><span class="op" id="6974426">(</span><span class="op" id="6974427">)</span><span class="op" id="6974428">,</span>&nbsp;<span class="ident" id="6974430"><a href="/net/unix_test.go.html#6973494">ta</a></span><span class="op" id="6974432">}</span><span class="op" id="6974433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974441">for</span>&nbsp;<span class="ident" id="6974445">_</span><span class="op" id="6974446">,</span>&nbsp;<span class="ident" id="6974448">ca</span>&nbsp;<span class="op" id="6974451">:=</span>&nbsp;<span class="keyword" id="6974454">range</span>&nbsp;<span class="ident" id="6974460"><a href="/net/unix_test.go.html#6974254">connAddrs</a></span>&nbsp;<span class="op" id="6974470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974475">if</span>&nbsp;<span class="op" id="6974478">!</span><span class="ident" id="6974479"><a href="/net/unix_test.go.html#6966406">reflect</a></span><span class="op" id="6974486">.</span><span class="ident" id="6974487">DeepEqual</span><span class="op" id="6974496">(</span><span class="ident" id="6974497"><a href="/net/unix_test.go.html#6974448">ca</a></span><span class="op" id="6974499">.</span><span class="ident" id="6974500">got</span><span class="op" id="6974503">,</span>&nbsp;<span class="ident" id="6974505"><a href="/net/unix_test.go.html#6974448">ca</a></span><span class="op" id="6974507">.</span><span class="ident" id="6974508">want</span><span class="op" id="6974512">)</span>&nbsp;<span class="op" id="6974514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6974520"><a href="/net/unix_test.go.html#6973379">t</a></span><span class="op" id="6974521">.</span><span class="ident" id="6974522">Fatalf</span><span class="op" id="6974528">(</span><span class="string" id="6974529">&#34;got&nbsp;%#v,&nbsp;expected&nbsp;%#v&#34;</span><span class="op" id="6974552">,</span>&nbsp;<span class="ident" id="6974554"><a href="/net/unix_test.go.html#6974448">ca</a></span><span class="op" id="6974556">.</span><span class="ident" id="6974557">got</span><span class="op" id="6974560">,</span>&nbsp;<span class="ident" id="6974562"><a href="/net/unix_test.go.html#6974448">ca</a></span><span class="op" id="6974564">.</span><span class="ident" id="6974565">want</span><span class="op" id="6974569">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974581">}</span><br>
<span class="lineno"></span><span class="op" id="6974583">}</span>
</div>
</body>
</html>
