<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path/filepath</h2>
<ul>
<li><a href="/gostd/path/filepath/example_unix_test.go.html">example_unix_test.go</a></li>
<li><a href="/gostd/path/filepath/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/path/filepath/match.go.html" class="current">match.go</a></li>
<li><a href="/gostd/path/filepath/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/filepath/path.go.html">path.go</a></li>
<li><a href="/gostd/path/filepath/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/path/filepath/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/path/filepath/symlink.go.html">symlink.go</a></li>
<li><a href="/gostd/path/filepath/symlink_unix.go.html">symlink_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2945754">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2945809">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2945863">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2945914">package</span>&nbsp;<span class="ident" id="2945922">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2945932">import</span>&nbsp;<span class="op" id="2945939">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2945942">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2945952">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2945958">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2945969">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2945977">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2945988">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2946003">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2946006">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="2946067">var</span>&nbsp;<span class="ident" id="2946071">ErrBadPattern</span>&nbsp;<span class="op" id="2946085">=</span>&nbsp;<span class="ident" id="2946087">errors</span><span class="op" id="2946093">.</span><span class="ident" id="2946094">New</span><span class="op" id="2946097">(</span><span class="string" id="2946098">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="2946123">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2946126">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="2946193">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="2946219">//</span><br>
<span class="lineno"></span><span class="comment" id="2946222">//&nbsp;&nbsp;&nbsp;&nbsp;pattern:</span><br>
<span class="lineno"></span><span class="comment" id="2946234">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="2946247">//&nbsp;&nbsp;&nbsp;&nbsp;term:</span><br>
<span class="lineno">25</span><span class="comment" id="2946256">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="2946321">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="2946380">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2946420">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="2946472">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="2946535">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="2946571">//</span><br>
<span class="lineno"></span><span class="comment" id="2946574">//&nbsp;&nbsp;&nbsp;&nbsp;character-range:</span><br>
<span class="lineno"></span><span class="comment" id="2946594">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="2946652">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="2946688">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="2946742">//</span><br>
<span class="lineno"></span><span class="comment" id="2946745">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="2946815">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="2946882">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="2946899">//</span><br>
<span class="lineno"></span><span class="comment" id="2946902">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2946967">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="2946986">//</span><br>
<span class="lineno"></span><span class="keyword" id="2946989">func</span>&nbsp;<span class="ident" id="2946994">Match</span><span class="op" id="2946999">(</span><span class="ident" id="2947000">pattern</span><span class="op" id="2947007">,</span>&nbsp;<span class="ident" id="2947009">name</span>&nbsp;<span class="builtintype" id="2947014">string</span><span class="op" id="2947020">)</span>&nbsp;<span class="op" id="2947022">(</span><span class="ident" id="2947023">matched</span>&nbsp;<span class="builtintype" id="2947031">bool</span><span class="op" id="2947035">,</span>&nbsp;<span class="ident" id="2947037">err</span>&nbsp;<span class="builtintype" id="2947041">error</span><span class="op" id="2947046">)</span>&nbsp;<span class="op" id="2947048">{</span><br>
<span class="lineno">45</span><span class="ident" id="2947050">Pattern</span><span class="op" id="2947057">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947060">for</span>&nbsp;<span class="builtinfunc" id="2947064">len</span><span class="op" id="2947067">(</span><span class="ident" id="2947068">pattern</span><span class="op" id="2947075">)</span>&nbsp;<span class="op" id="2947077">&gt;</span>&nbsp;<span class="num" id="2947079">0</span>&nbsp;<span class="op" id="2947081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947085">var</span>&nbsp;<span class="ident" id="2947089">star</span>&nbsp;<span class="builtintype" id="2947094">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947101">var</span>&nbsp;<span class="ident" id="2947105">chunk</span>&nbsp;<span class="builtintype" id="2947111">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947120">star</span><span class="op" id="2947124">,</span>&nbsp;<span class="ident" id="2947126">chunk</span><span class="op" id="2947131">,</span>&nbsp;<span class="ident" id="2947133">pattern</span>&nbsp;<span class="op" id="2947141">=</span>&nbsp;<span class="ident" id="2947143">scanChunk</span><span class="op" id="2947152">(</span><span class="ident" id="2947153">pattern</span><span class="op" id="2947160">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947164">if</span>&nbsp;<span class="ident" id="2947167">star</span>&nbsp;<span class="op" id="2947172">&amp;&amp;</span>&nbsp;<span class="ident" id="2947175">chunk</span>&nbsp;<span class="op" id="2947181">==</span>&nbsp;<span class="string" id="2947184">&#34;&#34;</span>&nbsp;<span class="op" id="2947187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2947192">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947251">return</span>&nbsp;<span class="ident" id="2947258">strings</span><span class="op" id="2947265">.</span><span class="ident" id="2947266">Index</span><span class="op" id="2947271">(</span><span class="ident" id="2947272">name</span><span class="op" id="2947276">,</span>&nbsp;<span class="builtintype" id="2947278">string</span><span class="op" id="2947284">(</span><span class="ident" id="2947285">Separator</span><span class="op" id="2947294">)</span><span class="op" id="2947295">)</span>&nbsp;<span class="op" id="2947297">&lt;</span>&nbsp;<span class="num" id="2947299">0</span><span class="op" id="2947300">,</span>&nbsp;<span class="ident" id="2947302">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2947308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2947312">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947353">t</span><span class="op" id="2947354">,</span>&nbsp;<span class="ident" id="2947356">ok</span><span class="op" id="2947358">,</span>&nbsp;<span class="ident" id="2947360">err</span>&nbsp;<span class="op" id="2947364">:=</span>&nbsp;<span class="ident" id="2947367">matchChunk</span><span class="op" id="2947377">(</span><span class="ident" id="2947378">chunk</span><span class="op" id="2947383">,</span>&nbsp;<span class="ident" id="2947385">name</span><span class="op" id="2947389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2947393">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2947458">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2947528">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947548">if</span>&nbsp;<span class="ident" id="2947551">ok</span>&nbsp;<span class="op" id="2947554">&amp;&amp;</span>&nbsp;<span class="op" id="2947557">(</span><span class="builtinfunc" id="2947558">len</span><span class="op" id="2947561">(</span><span class="ident" id="2947562">t</span><span class="op" id="2947563">)</span>&nbsp;<span class="op" id="2947565">==</span>&nbsp;<span class="num" id="2947568">0</span>&nbsp;<span class="op" id="2947570">||</span>&nbsp;<span class="builtinfunc" id="2947573">len</span><span class="op" id="2947576">(</span><span class="ident" id="2947577">pattern</span><span class="op" id="2947584">)</span>&nbsp;<span class="op" id="2947586">&gt;</span>&nbsp;<span class="num" id="2947588">0</span><span class="op" id="2947589">)</span>&nbsp;<span class="op" id="2947591">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947596">name</span>&nbsp;<span class="op" id="2947601">=</span>&nbsp;<span class="ident" id="2947603">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947608">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2947619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947623">if</span>&nbsp;<span class="ident" id="2947626">err</span>&nbsp;<span class="op" id="2947630">!=</span>&nbsp;<span class="ident" id="2947633">nil</span>&nbsp;<span class="op" id="2947637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947642">return</span>&nbsp;<span class="builtintype" id="2947649">false</span><span class="op" id="2947654">,</span>&nbsp;<span class="ident" id="2947656">err</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2947662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947666">if</span>&nbsp;<span class="ident" id="2947669">star</span>&nbsp;<span class="op" id="2947674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2947679">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2947720">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947741">for</span>&nbsp;<span class="ident" id="2947745">i</span>&nbsp;<span class="op" id="2947747">:=</span>&nbsp;<span class="num" id="2947750">0</span><span class="op" id="2947751">;</span>&nbsp;<span class="ident" id="2947753">i</span>&nbsp;<span class="op" id="2947755">&lt;</span>&nbsp;<span class="builtinfunc" id="2947757">len</span><span class="op" id="2947760">(</span><span class="ident" id="2947761">name</span><span class="op" id="2947765">)</span>&nbsp;<span class="op" id="2947767">&amp;&amp;</span>&nbsp;<span class="ident" id="2947770">name</span><span class="op" id="2947774">[</span><span class="ident" id="2947775">i</span><span class="op" id="2947776">]</span>&nbsp;<span class="op" id="2947778">!=</span>&nbsp;<span class="ident" id="2947781">Separator</span><span class="op" id="2947790">;</span>&nbsp;<span class="ident" id="2947792">i</span><span class="op" id="2947793">++</span>&nbsp;<span class="op" id="2947796">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947802">t</span><span class="op" id="2947803">,</span>&nbsp;<span class="ident" id="2947805">ok</span><span class="op" id="2947807">,</span>&nbsp;<span class="ident" id="2947809">err</span>&nbsp;<span class="op" id="2947813">:=</span>&nbsp;<span class="ident" id="2947816">matchChunk</span><span class="op" id="2947826">(</span><span class="ident" id="2947827">chunk</span><span class="op" id="2947832">,</span>&nbsp;<span class="ident" id="2947834">name</span><span class="op" id="2947838">[</span><span class="ident" id="2947839">i</span><span class="op" id="2947840">+</span><span class="num" id="2947841">1</span><span class="op" id="2947842">:</span><span class="op" id="2947843">]</span><span class="op" id="2947844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947850">if</span>&nbsp;<span class="ident" id="2947853">ok</span>&nbsp;<span class="op" id="2947856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2947863">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947928">if</span>&nbsp;<span class="builtinfunc" id="2947931">len</span><span class="op" id="2947934">(</span><span class="ident" id="2947935">pattern</span><span class="op" id="2947942">)</span>&nbsp;<span class="op" id="2947944">==</span>&nbsp;<span class="num" id="2947947">0</span>&nbsp;<span class="op" id="2947949">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2947952">len</span><span class="op" id="2947955">(</span><span class="ident" id="2947956">t</span><span class="op" id="2947957">)</span>&nbsp;<span class="op" id="2947959">&gt;</span>&nbsp;<span class="num" id="2947961">0</span>&nbsp;<span class="op" id="2947963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947971">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2947985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947992">name</span>&nbsp;<span class="op" id="2947997">=</span>&nbsp;<span class="ident" id="2947999">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948006">continue</span>&nbsp;<span class="ident" id="2948015">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948033">if</span>&nbsp;<span class="ident" id="2948036">err</span>&nbsp;<span class="op" id="2948040">!=</span>&nbsp;<span class="ident" id="2948043">nil</span>&nbsp;<span class="op" id="2948047">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948054">return</span>&nbsp;<span class="builtintype" id="2948061">false</span><span class="op" id="2948066">,</span>&nbsp;<span class="ident" id="2948068">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948089">return</span>&nbsp;<span class="builtintype" id="2948096">false</span><span class="op" id="2948101">,</span>&nbsp;<span class="ident" id="2948103">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948111">return</span>&nbsp;<span class="builtinfunc" id="2948118">len</span><span class="op" id="2948121">(</span><span class="ident" id="2948122">name</span><span class="op" id="2948126">)</span>&nbsp;<span class="op" id="2948128">==</span>&nbsp;<span class="num" id="2948131">0</span><span class="op" id="2948132">,</span>&nbsp;<span class="ident" id="2948134">nil</span><br>
<span class="lineno"></span><span class="op" id="2948138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2948141">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="2948215">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="2948247">func</span>&nbsp;<span class="ident" id="2948252">scanChunk</span><span class="op" id="2948261">(</span><span class="ident" id="2948262">pattern</span>&nbsp;<span class="builtintype" id="2948270">string</span><span class="op" id="2948276">)</span>&nbsp;<span class="op" id="2948278">(</span><span class="ident" id="2948279">star</span>&nbsp;<span class="builtintype" id="2948284">bool</span><span class="op" id="2948288">,</span>&nbsp;<span class="ident" id="2948290">chunk</span><span class="op" id="2948295">,</span>&nbsp;<span class="ident" id="2948297">rest</span>&nbsp;<span class="builtintype" id="2948302">string</span><span class="op" id="2948308">)</span>&nbsp;<span class="op" id="2948310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948313">for</span>&nbsp;<span class="builtinfunc" id="2948317">len</span><span class="op" id="2948320">(</span><span class="ident" id="2948321">pattern</span><span class="op" id="2948328">)</span>&nbsp;<span class="op" id="2948330">&gt;</span>&nbsp;<span class="num" id="2948332">0</span>&nbsp;<span class="op" id="2948334">&amp;&amp;</span>&nbsp;<span class="ident" id="2948337">pattern</span><span class="op" id="2948344">[</span><span class="num" id="2948345">0</span><span class="op" id="2948346">]</span>&nbsp;<span class="op" id="2948348">==</span>&nbsp;<span class="string" id="2948351">&#39;*&#39;</span>&nbsp;<span class="op" id="2948355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2948359">pattern</span>&nbsp;<span class="op" id="2948367">=</span>&nbsp;<span class="ident" id="2948369">pattern</span><span class="op" id="2948376">[</span><span class="num" id="2948377">1</span><span class="op" id="2948378">:</span><span class="op" id="2948379">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2948383">star</span>&nbsp;<span class="op" id="2948388">=</span>&nbsp;<span class="builtintype" id="2948390">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2948399">inrange</span>&nbsp;<span class="op" id="2948407">:=</span>&nbsp;<span class="builtintype" id="2948410">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948417">var</span>&nbsp;<span class="ident" id="2948421">i</span>&nbsp;<span class="builtintype" id="2948423">int</span><br>
<span class="lineno"></span><span class="ident" id="2948427">Scan</span><span class="op" id="2948431">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948434">for</span>&nbsp;<span class="ident" id="2948438">i</span>&nbsp;<span class="op" id="2948440">=</span>&nbsp;<span class="num" id="2948442">0</span><span class="op" id="2948443">;</span>&nbsp;<span class="ident" id="2948445">i</span>&nbsp;<span class="op" id="2948447">&lt;</span>&nbsp;<span class="builtinfunc" id="2948449">len</span><span class="op" id="2948452">(</span><span class="ident" id="2948453">pattern</span><span class="op" id="2948460">)</span><span class="op" id="2948461">;</span>&nbsp;<span class="ident" id="2948463">i</span><span class="op" id="2948464">++</span>&nbsp;<span class="op" id="2948467">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948471">switch</span>&nbsp;<span class="ident" id="2948478">pattern</span><span class="op" id="2948485">[</span><span class="ident" id="2948486">i</span><span class="op" id="2948487">]</span>&nbsp;<span class="op" id="2948489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948493">case</span>&nbsp;<span class="string" id="2948498">&#39;\\&#39;</span><span class="op" id="2948502">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948507">if</span>&nbsp;<span class="ident" id="2948510">runtime</span><span class="op" id="2948517">.</span><span class="ident" id="2948518">GOOS</span>&nbsp;<span class="op" id="2948523">!=</span>&nbsp;<span class="string" id="2948526">&#34;windows&#34;</span>&nbsp;<span class="op" id="2948536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2948542">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948597">if</span>&nbsp;<span class="ident" id="2948600">i</span><span class="op" id="2948601">+</span><span class="num" id="2948602">1</span>&nbsp;<span class="op" id="2948604">&lt;</span>&nbsp;<span class="builtinfunc" id="2948606">len</span><span class="op" id="2948609">(</span><span class="ident" id="2948610">pattern</span><span class="op" id="2948617">)</span>&nbsp;<span class="op" id="2948619">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2948626">i</span><span class="op" id="2948627">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948643">case</span>&nbsp;<span class="string" id="2948648">&#39;[&#39;</span><span class="op" id="2948651">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2948656">inrange</span>&nbsp;<span class="op" id="2948664">=</span>&nbsp;<span class="builtintype" id="2948666">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948673">case</span>&nbsp;<span class="string" id="2948678">&#39;]&#39;</span><span class="op" id="2948681">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2948686">inrange</span>&nbsp;<span class="op" id="2948694">=</span>&nbsp;<span class="builtintype" id="2948696">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948704">case</span>&nbsp;<span class="string" id="2948709">&#39;*&#39;</span><span class="op" id="2948712">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948717">if</span>&nbsp;<span class="op" id="2948720">!</span><span class="ident" id="2948721">inrange</span>&nbsp;<span class="op" id="2948729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948735">break</span>&nbsp;<span class="ident" id="2948741">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948759">return</span>&nbsp;<span class="ident" id="2948766">star</span><span class="op" id="2948770">,</span>&nbsp;<span class="ident" id="2948772">pattern</span><span class="op" id="2948779">[</span><span class="num" id="2948780">0</span><span class="op" id="2948781">:</span><span class="ident" id="2948782">i</span><span class="op" id="2948783">]</span><span class="op" id="2948784">,</span>&nbsp;<span class="ident" id="2948786">pattern</span><span class="op" id="2948793">[</span><span class="ident" id="2948794">i</span><span class="op" id="2948795">:</span><span class="op" id="2948796">]</span><br>
<span class="lineno"></span><span class="op" id="2948798">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="2948801">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="2948864">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="2948923">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="2948998">func</span>&nbsp;<span class="ident" id="2949003">matchChunk</span><span class="op" id="2949013">(</span><span class="ident" id="2949014">chunk</span><span class="op" id="2949019">,</span>&nbsp;<span class="ident" id="2949021">s</span>&nbsp;<span class="builtintype" id="2949023">string</span><span class="op" id="2949029">)</span>&nbsp;<span class="op" id="2949031">(</span><span class="ident" id="2949032">rest</span>&nbsp;<span class="builtintype" id="2949037">string</span><span class="op" id="2949043">,</span>&nbsp;<span class="ident" id="2949045">ok</span>&nbsp;<span class="builtintype" id="2949048">bool</span><span class="op" id="2949052">,</span>&nbsp;<span class="ident" id="2949054">err</span>&nbsp;<span class="builtintype" id="2949058">error</span><span class="op" id="2949063">)</span>&nbsp;<span class="op" id="2949065">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949068">for</span>&nbsp;<span class="builtinfunc" id="2949072">len</span><span class="op" id="2949075">(</span><span class="ident" id="2949076">chunk</span><span class="op" id="2949081">)</span>&nbsp;<span class="op" id="2949083">&gt;</span>&nbsp;<span class="num" id="2949085">0</span>&nbsp;<span class="op" id="2949087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949091">if</span>&nbsp;<span class="builtinfunc" id="2949094">len</span><span class="op" id="2949097">(</span><span class="ident" id="2949098">s</span><span class="op" id="2949099">)</span>&nbsp;<span class="op" id="2949101">==</span>&nbsp;<span class="num" id="2949104">0</span>&nbsp;<span class="op" id="2949106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949111">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949124">switch</span>&nbsp;<span class="ident" id="2949131">chunk</span><span class="op" id="2949136">[</span><span class="num" id="2949137">0</span><span class="op" id="2949138">]</span>&nbsp;<span class="op" id="2949140">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949144">case</span>&nbsp;<span class="string" id="2949149">&#39;[&#39;</span><span class="op" id="2949152">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2949157">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2949179">r</span><span class="op" id="2949180">,</span>&nbsp;<span class="ident" id="2949182">n</span>&nbsp;<span class="op" id="2949184">:=</span>&nbsp;<span class="ident" id="2949187">utf8</span><span class="op" id="2949191">.</span><span class="ident" id="2949192">DecodeRuneInString</span><span class="op" id="2949210">(</span><span class="ident" id="2949211">s</span><span class="op" id="2949212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2949217">s</span>&nbsp;<span class="op" id="2949219">=</span>&nbsp;<span class="ident" id="2949221">s</span><span class="op" id="2949222">[</span><span class="ident" id="2949223">n</span><span class="op" id="2949224">:</span><span class="op" id="2949225">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2949230">chunk</span>&nbsp;<span class="op" id="2949236">=</span>&nbsp;<span class="ident" id="2949238">chunk</span><span class="op" id="2949243">[</span><span class="num" id="2949244">1</span><span class="op" id="2949245">:</span><span class="op" id="2949246">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2949251">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2949312">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949358">if</span>&nbsp;<span class="builtinfunc" id="2949361">len</span><span class="op" id="2949364">(</span><span class="ident" id="2949365">chunk</span><span class="op" id="2949370">)</span>&nbsp;<span class="op" id="2949372">==</span>&nbsp;<span class="num" id="2949375">0</span>&nbsp;<span class="op" id="2949377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2949383">err</span>&nbsp;<span class="op" id="2949387">=</span>&nbsp;<span class="ident" id="2949389">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949407">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2949422">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2949445">negated</span>&nbsp;<span class="op" id="2949453">:=</span>&nbsp;<span class="ident" id="2949456">chunk</span><span class="op" id="2949461">[</span><span class="num" id="2949462">0</span><span class="op" id="2949463">]</span>&nbsp;<span class="op" id="2949465">==</span>&nbsp;<span class="string" id="2949468">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949475">if</span>&nbsp;<span class="ident" id="2949478">negated</span>&nbsp;<span class="op" id="2949486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2949492">chunk</span>&nbsp;<span class="op" id="2949498">=</span>&nbsp;<span class="ident" id="2949500">chunk</span><span class="op" id="2949505">[</span><span class="num" id="2949506">1</span><span class="op" id="2949507">:</span><span class="op" id="2949508">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2949518">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2949541">match</span>&nbsp;<span class="op" id="2949547">:=</span>&nbsp;<span class="builtintype" id="2949550">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2949559">nrange</span>&nbsp;<span class="op" id="2949566">:=</span>&nbsp;<span class="num" id="2949569">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949574">for</span>&nbsp;<span class="op" id="2949578">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949584">if</span>&nbsp;<span class="builtinfunc" id="2949587">len</span><span class="op" id="2949590">(</span><span class="ident" id="2949591">chunk</span><span class="op" id="2949596">)</span>&nbsp;<span class="op" id="2949598">&gt;</span>&nbsp;<span class="num" id="2949600">0</span>&nbsp;<span class="op" id="2949602">&amp;&amp;</span>&nbsp;<span class="ident" id="2949605">chunk</span><span class="op" id="2949610">[</span><span class="num" id="2949611">0</span><span class="op" id="2949612">]</span>&nbsp;<span class="op" id="2949614">==</span>&nbsp;<span class="string" id="2949617">&#39;]&#39;</span>&nbsp;<span class="op" id="2949621">&amp;&amp;</span>&nbsp;<span class="ident" id="2949624">nrange</span>&nbsp;<span class="op" id="2949631">&gt;</span>&nbsp;<span class="num" id="2949633">0</span>&nbsp;<span class="op" id="2949635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2949642">chunk</span>&nbsp;<span class="op" id="2949648">=</span>&nbsp;<span class="ident" id="2949650">chunk</span><span class="op" id="2949655">[</span><span class="num" id="2949656">1</span><span class="op" id="2949657">:</span><span class="op" id="2949658">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949665">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949681">var</span>&nbsp;<span class="ident" id="2949685">lo</span><span class="op" id="2949687">,</span>&nbsp;<span class="ident" id="2949689">hi</span>&nbsp;<span class="builtintype" id="2949692">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949701">if</span>&nbsp;<span class="ident" id="2949704">lo</span><span class="op" id="2949706">,</span>&nbsp;<span class="ident" id="2949708">chunk</span><span class="op" id="2949713">,</span>&nbsp;<span class="ident" id="2949715">err</span>&nbsp;<span class="op" id="2949719">=</span>&nbsp;<span class="ident" id="2949721">getEsc</span><span class="op" id="2949727">(</span><span class="ident" id="2949728">chunk</span><span class="op" id="2949733">)</span><span class="op" id="2949734">;</span>&nbsp;<span class="ident" id="2949736">err</span>&nbsp;<span class="op" id="2949740">!=</span>&nbsp;<span class="ident" id="2949743">nil</span>&nbsp;<span class="op" id="2949747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949754">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2949771">hi</span>&nbsp;<span class="op" id="2949774">=</span>&nbsp;<span class="ident" id="2949776">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949783">if</span>&nbsp;<span class="ident" id="2949786">chunk</span><span class="op" id="2949791">[</span><span class="num" id="2949792">0</span><span class="op" id="2949793">]</span>&nbsp;<span class="op" id="2949795">==</span>&nbsp;<span class="string" id="2949798">&#39;-&#39;</span>&nbsp;<span class="op" id="2949802">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949809">if</span>&nbsp;<span class="ident" id="2949812">hi</span><span class="op" id="2949814">,</span>&nbsp;<span class="ident" id="2949816">chunk</span><span class="op" id="2949821">,</span>&nbsp;<span class="ident" id="2949823">err</span>&nbsp;<span class="op" id="2949827">=</span>&nbsp;<span class="ident" id="2949829">getEsc</span><span class="op" id="2949835">(</span><span class="ident" id="2949836">chunk</span><span class="op" id="2949841">[</span><span class="num" id="2949842">1</span><span class="op" id="2949843">:</span><span class="op" id="2949844">]</span><span class="op" id="2949845">)</span><span class="op" id="2949846">;</span>&nbsp;<span class="ident" id="2949848">err</span>&nbsp;<span class="op" id="2949852">!=</span>&nbsp;<span class="ident" id="2949855">nil</span>&nbsp;<span class="op" id="2949859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949867">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949891">if</span>&nbsp;<span class="ident" id="2949894">lo</span>&nbsp;<span class="op" id="2949897">&lt;=</span>&nbsp;<span class="ident" id="2949900">r</span>&nbsp;<span class="op" id="2949902">&amp;&amp;</span>&nbsp;<span class="ident" id="2949905">r</span>&nbsp;<span class="op" id="2949907">&lt;=</span>&nbsp;<span class="ident" id="2949910">hi</span>&nbsp;<span class="op" id="2949913">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2949920">match</span>&nbsp;<span class="op" id="2949926">=</span>&nbsp;<span class="builtintype" id="2949928">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2949943">nrange</span><span class="op" id="2949949">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949960">if</span>&nbsp;<span class="ident" id="2949963">match</span>&nbsp;<span class="op" id="2949969">==</span>&nbsp;<span class="ident" id="2949972">negated</span>&nbsp;<span class="op" id="2949980">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2949986">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950001">case</span>&nbsp;<span class="string" id="2950006">&#39;?&#39;</span><span class="op" id="2950009">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950014">if</span>&nbsp;<span class="ident" id="2950017">s</span><span class="op" id="2950018">[</span><span class="num" id="2950019">0</span><span class="op" id="2950020">]</span>&nbsp;<span class="op" id="2950022">==</span>&nbsp;<span class="ident" id="2950025">Separator</span>&nbsp;<span class="op" id="2950035">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950041">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2950051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950056">_</span><span class="op" id="2950057">,</span>&nbsp;<span class="ident" id="2950059">n</span>&nbsp;<span class="op" id="2950061">:=</span>&nbsp;<span class="ident" id="2950064">utf8</span><span class="op" id="2950068">.</span><span class="ident" id="2950069">DecodeRuneInString</span><span class="op" id="2950087">(</span><span class="ident" id="2950088">s</span><span class="op" id="2950089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950094">s</span>&nbsp;<span class="op" id="2950096">=</span>&nbsp;<span class="ident" id="2950098">s</span><span class="op" id="2950099">[</span><span class="ident" id="2950100">n</span><span class="op" id="2950101">:</span><span class="op" id="2950102">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950107">chunk</span>&nbsp;<span class="op" id="2950113">=</span>&nbsp;<span class="ident" id="2950115">chunk</span><span class="op" id="2950120">[</span><span class="num" id="2950121">1</span><span class="op" id="2950122">:</span><span class="op" id="2950123">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950128">case</span>&nbsp;<span class="string" id="2950133">&#39;\\&#39;</span><span class="op" id="2950137">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950142">if</span>&nbsp;<span class="ident" id="2950145">runtime</span><span class="op" id="2950152">.</span><span class="ident" id="2950153">GOOS</span>&nbsp;<span class="op" id="2950158">!=</span>&nbsp;<span class="string" id="2950161">&#34;windows&#34;</span>&nbsp;<span class="op" id="2950171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950177">chunk</span>&nbsp;<span class="op" id="2950183">=</span>&nbsp;<span class="ident" id="2950185">chunk</span><span class="op" id="2950190">[</span><span class="num" id="2950191">1</span><span class="op" id="2950192">:</span><span class="op" id="2950193">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950199">if</span>&nbsp;<span class="builtinfunc" id="2950202">len</span><span class="op" id="2950205">(</span><span class="ident" id="2950206">chunk</span><span class="op" id="2950211">)</span>&nbsp;<span class="op" id="2950213">==</span>&nbsp;<span class="num" id="2950216">0</span>&nbsp;<span class="op" id="2950218">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950225">err</span>&nbsp;<span class="op" id="2950229">=</span>&nbsp;<span class="ident" id="2950231">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950250">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2950261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2950266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950271">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950286">default</span><span class="op" id="2950293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950298">if</span>&nbsp;<span class="ident" id="2950301">chunk</span><span class="op" id="2950306">[</span><span class="num" id="2950307">0</span><span class="op" id="2950308">]</span>&nbsp;<span class="op" id="2950310">!=</span>&nbsp;<span class="ident" id="2950313">s</span><span class="op" id="2950314">[</span><span class="num" id="2950315">0</span><span class="op" id="2950316">]</span>&nbsp;<span class="op" id="2950318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950324">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2950334">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950339">s</span>&nbsp;<span class="op" id="2950341">=</span>&nbsp;<span class="ident" id="2950343">s</span><span class="op" id="2950344">[</span><span class="num" id="2950345">1</span><span class="op" id="2950346">:</span><span class="op" id="2950347">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950352">chunk</span>&nbsp;<span class="op" id="2950358">=</span>&nbsp;<span class="ident" id="2950360">chunk</span><span class="op" id="2950365">[</span><span class="num" id="2950366">1</span><span class="op" id="2950367">:</span><span class="op" id="2950368">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2950372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2950375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950378">return</span>&nbsp;<span class="ident" id="2950385">s</span><span class="op" id="2950386">,</span>&nbsp;<span class="builtintype" id="2950388">true</span><span class="op" id="2950392">,</span>&nbsp;<span class="ident" id="2950394">nil</span><br>
<span class="lineno">200</span><span class="op" id="2950398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2950401">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="2950480">func</span>&nbsp;<span class="ident" id="2950485">getEsc</span><span class="op" id="2950491">(</span><span class="ident" id="2950492">chunk</span>&nbsp;<span class="builtintype" id="2950498">string</span><span class="op" id="2950504">)</span>&nbsp;<span class="op" id="2950506">(</span><span class="ident" id="2950507">r</span>&nbsp;<span class="builtintype" id="2950509">rune</span><span class="op" id="2950513">,</span>&nbsp;<span class="ident" id="2950515">nchunk</span>&nbsp;<span class="builtintype" id="2950522">string</span><span class="op" id="2950528">,</span>&nbsp;<span class="ident" id="2950530">err</span>&nbsp;<span class="builtintype" id="2950534">error</span><span class="op" id="2950539">)</span>&nbsp;<span class="op" id="2950541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950544">if</span>&nbsp;<span class="builtinfunc" id="2950547">len</span><span class="op" id="2950550">(</span><span class="ident" id="2950551">chunk</span><span class="op" id="2950556">)</span>&nbsp;<span class="op" id="2950558">==</span>&nbsp;<span class="num" id="2950561">0</span>&nbsp;<span class="op" id="2950563">||</span>&nbsp;<span class="ident" id="2950566">chunk</span><span class="op" id="2950571">[</span><span class="num" id="2950572">0</span><span class="op" id="2950573">]</span>&nbsp;<span class="op" id="2950575">==</span>&nbsp;<span class="string" id="2950578">&#39;-&#39;</span>&nbsp;<span class="op" id="2950582">||</span>&nbsp;<span class="ident" id="2950585">chunk</span><span class="op" id="2950590">[</span><span class="num" id="2950591">0</span><span class="op" id="2950592">]</span>&nbsp;<span class="op" id="2950594">==</span>&nbsp;<span class="string" id="2950597">&#39;]&#39;</span>&nbsp;<span class="op" id="2950601">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950605">err</span>&nbsp;<span class="op" id="2950609">=</span>&nbsp;<span class="ident" id="2950611">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950627">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2950635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950638">if</span>&nbsp;<span class="ident" id="2950641">chunk</span><span class="op" id="2950646">[</span><span class="num" id="2950647">0</span><span class="op" id="2950648">]</span>&nbsp;<span class="op" id="2950650">==</span>&nbsp;<span class="string" id="2950653">&#39;\\&#39;</span>&nbsp;<span class="op" id="2950658">&amp;&amp;</span>&nbsp;<span class="ident" id="2950661">runtime</span><span class="op" id="2950668">.</span><span class="ident" id="2950669">GOOS</span>&nbsp;<span class="op" id="2950674">!=</span>&nbsp;<span class="string" id="2950677">&#34;windows&#34;</span>&nbsp;<span class="op" id="2950687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950691">chunk</span>&nbsp;<span class="op" id="2950697">=</span>&nbsp;<span class="ident" id="2950699">chunk</span><span class="op" id="2950704">[</span><span class="num" id="2950705">1</span><span class="op" id="2950706">:</span><span class="op" id="2950707">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950711">if</span>&nbsp;<span class="builtinfunc" id="2950714">len</span><span class="op" id="2950717">(</span><span class="ident" id="2950718">chunk</span><span class="op" id="2950723">)</span>&nbsp;<span class="op" id="2950725">==</span>&nbsp;<span class="num" id="2950728">0</span>&nbsp;<span class="op" id="2950730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950735">err</span>&nbsp;<span class="op" id="2950739">=</span>&nbsp;<span class="ident" id="2950741">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950758">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2950767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2950770">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950773">r</span><span class="op" id="2950774">,</span>&nbsp;<span class="ident" id="2950776">n</span>&nbsp;<span class="op" id="2950778">:=</span>&nbsp;<span class="ident" id="2950781">utf8</span><span class="op" id="2950785">.</span><span class="ident" id="2950786">DecodeRuneInString</span><span class="op" id="2950804">(</span><span class="ident" id="2950805">chunk</span><span class="op" id="2950810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950813">if</span>&nbsp;<span class="ident" id="2950816">r</span>&nbsp;<span class="op" id="2950818">==</span>&nbsp;<span class="ident" id="2950821">utf8</span><span class="op" id="2950825">.</span><span class="ident" id="2950826">RuneError</span>&nbsp;<span class="op" id="2950836">&amp;&amp;</span>&nbsp;<span class="ident" id="2950839">n</span>&nbsp;<span class="op" id="2950841">==</span>&nbsp;<span class="num" id="2950844">1</span>&nbsp;<span class="op" id="2950846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950850">err</span>&nbsp;<span class="op" id="2950854">=</span>&nbsp;<span class="ident" id="2950856">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2950871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950874">nchunk</span>&nbsp;<span class="op" id="2950881">=</span>&nbsp;<span class="ident" id="2950883">chunk</span><span class="op" id="2950888">[</span><span class="ident" id="2950889">n</span><span class="op" id="2950890">:</span><span class="op" id="2950891">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950894">if</span>&nbsp;<span class="builtinfunc" id="2950897">len</span><span class="op" id="2950900">(</span><span class="ident" id="2950901">nchunk</span><span class="op" id="2950907">)</span>&nbsp;<span class="op" id="2950909">==</span>&nbsp;<span class="num" id="2950912">0</span>&nbsp;<span class="op" id="2950914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950918">err</span>&nbsp;<span class="op" id="2950922">=</span>&nbsp;<span class="ident" id="2950924">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2950939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2950942">return</span><br>
<span class="lineno"></span><span class="op" id="2950949">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2950952">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="2951015">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="2951083">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2951151">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="2951201">//</span><br>
<span class="lineno"></span><span class="comment" id="2951204">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="2951279">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="2951346">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="2951363">func</span>&nbsp;<span class="ident" id="2951368">Glob</span><span class="op" id="2951372">(</span><span class="ident" id="2951373">pattern</span>&nbsp;<span class="builtintype" id="2951381">string</span><span class="op" id="2951387">)</span>&nbsp;<span class="op" id="2951389">(</span><span class="ident" id="2951390">matches</span>&nbsp;<span class="op" id="2951398">[</span><span class="op" id="2951399">]</span><span class="builtintype" id="2951400">string</span><span class="op" id="2951406">,</span>&nbsp;<span class="ident" id="2951408">err</span>&nbsp;<span class="builtintype" id="2951412">error</span><span class="op" id="2951417">)</span>&nbsp;<span class="op" id="2951419">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951422">if</span>&nbsp;<span class="op" id="2951425">!</span><span class="ident" id="2951426">hasMeta</span><span class="op" id="2951433">(</span><span class="ident" id="2951434">pattern</span><span class="op" id="2951441">)</span>&nbsp;<span class="op" id="2951443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951447">if</span>&nbsp;<span class="ident" id="2951450">_</span><span class="op" id="2951451">,</span>&nbsp;<span class="ident" id="2951453">err</span>&nbsp;<span class="op" id="2951457">=</span>&nbsp;<span class="ident" id="2951459">os</span><span class="op" id="2951461">.</span><span class="ident" id="2951462">Lstat</span><span class="op" id="2951467">(</span><span class="ident" id="2951468">pattern</span><span class="op" id="2951475">)</span><span class="op" id="2951476">;</span>&nbsp;<span class="ident" id="2951478">err</span>&nbsp;<span class="op" id="2951482">!=</span>&nbsp;<span class="ident" id="2951485">nil</span>&nbsp;<span class="op" id="2951489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951494">return</span>&nbsp;<span class="ident" id="2951501">nil</span><span class="op" id="2951504">,</span>&nbsp;<span class="ident" id="2951506">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2951512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951516">return</span>&nbsp;<span class="op" id="2951523">[</span><span class="op" id="2951524">]</span><span class="builtintype" id="2951525">string</span><span class="op" id="2951531">{</span><span class="ident" id="2951532">pattern</span><span class="op" id="2951539">}</span><span class="op" id="2951540">,</span>&nbsp;<span class="ident" id="2951542">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2951547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2951551">dir</span><span class="op" id="2951554">,</span>&nbsp;<span class="ident" id="2951556">file</span>&nbsp;<span class="op" id="2951561">:=</span>&nbsp;<span class="ident" id="2951564">Split</span><span class="op" id="2951569">(</span><span class="ident" id="2951570">pattern</span><span class="op" id="2951577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951580">switch</span>&nbsp;<span class="ident" id="2951587">dir</span>&nbsp;<span class="op" id="2951591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951594">case</span>&nbsp;<span class="string" id="2951599">&#34;&#34;</span><span class="op" id="2951601">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2951605">dir</span>&nbsp;<span class="op" id="2951609">=</span>&nbsp;<span class="string" id="2951611">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951616">case</span>&nbsp;<span class="builtintype" id="2951621">string</span><span class="op" id="2951627">(</span><span class="ident" id="2951628">Separator</span><span class="op" id="2951637">)</span><span class="op" id="2951638">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2951642">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951654">default</span><span class="op" id="2951661">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2951665">dir</span>&nbsp;<span class="op" id="2951669">=</span>&nbsp;<span class="ident" id="2951671">dir</span><span class="op" id="2951674">[</span><span class="num" id="2951675">0</span>&nbsp;<span class="op" id="2951677">:</span>&nbsp;<span class="builtinfunc" id="2951679">len</span><span class="op" id="2951682">(</span><span class="ident" id="2951683">dir</span><span class="op" id="2951686">)</span><span class="op" id="2951687">-</span><span class="num" id="2951688">1</span><span class="op" id="2951689">]</span>&nbsp;<span class="comment" id="2951691">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2951723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951727">if</span>&nbsp;<span class="op" id="2951730">!</span><span class="ident" id="2951731">hasMeta</span><span class="op" id="2951738">(</span><span class="ident" id="2951739">dir</span><span class="op" id="2951742">)</span>&nbsp;<span class="op" id="2951744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951748">return</span>&nbsp;<span class="ident" id="2951755">glob</span><span class="op" id="2951759">(</span><span class="ident" id="2951760">dir</span><span class="op" id="2951763">,</span>&nbsp;<span class="ident" id="2951765">file</span><span class="op" id="2951769">,</span>&nbsp;<span class="ident" id="2951771">nil</span><span class="op" id="2951774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2951777">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951781">var</span>&nbsp;<span class="ident" id="2951785">m</span>&nbsp;<span class="op" id="2951787">[</span><span class="op" id="2951788">]</span><span class="builtintype" id="2951789">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2951797">m</span><span class="op" id="2951798">,</span>&nbsp;<span class="ident" id="2951800">err</span>&nbsp;<span class="op" id="2951804">=</span>&nbsp;<span class="ident" id="2951806">Glob</span><span class="op" id="2951810">(</span><span class="ident" id="2951811">dir</span><span class="op" id="2951814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951817">if</span>&nbsp;<span class="ident" id="2951820">err</span>&nbsp;<span class="op" id="2951824">!=</span>&nbsp;<span class="ident" id="2951827">nil</span>&nbsp;<span class="op" id="2951831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951835">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2951843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951846">for</span>&nbsp;<span class="ident" id="2951850">_</span><span class="op" id="2951851">,</span>&nbsp;<span class="ident" id="2951853">d</span>&nbsp;<span class="op" id="2951855">:=</span>&nbsp;<span class="keyword" id="2951858">range</span>&nbsp;<span class="ident" id="2951864">m</span>&nbsp;<span class="op" id="2951866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2951870">matches</span><span class="op" id="2951877">,</span>&nbsp;<span class="ident" id="2951879">err</span>&nbsp;<span class="op" id="2951883">=</span>&nbsp;<span class="ident" id="2951885">glob</span><span class="op" id="2951889">(</span><span class="ident" id="2951890">d</span><span class="op" id="2951891">,</span>&nbsp;<span class="ident" id="2951893">file</span><span class="op" id="2951897">,</span>&nbsp;<span class="ident" id="2951899">matches</span><span class="op" id="2951906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951910">if</span>&nbsp;<span class="ident" id="2951913">err</span>&nbsp;<span class="op" id="2951917">!=</span>&nbsp;<span class="ident" id="2951920">nil</span>&nbsp;<span class="op" id="2951924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951929">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2951938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2951941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2951944">return</span><br>
<span class="lineno"></span><span class="op" id="2951951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="2951954">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="2952019">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2952078">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="2952138">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2952173">func</span>&nbsp;<span class="ident" id="2952178">glob</span><span class="op" id="2952182">(</span><span class="ident" id="2952183">dir</span><span class="op" id="2952186">,</span>&nbsp;<span class="ident" id="2952188">pattern</span>&nbsp;<span class="builtintype" id="2952196">string</span><span class="op" id="2952202">,</span>&nbsp;<span class="ident" id="2952204">matches</span>&nbsp;<span class="op" id="2952212">[</span><span class="op" id="2952213">]</span><span class="builtintype" id="2952214">string</span><span class="op" id="2952220">)</span>&nbsp;<span class="op" id="2952222">(</span><span class="ident" id="2952223">m</span>&nbsp;<span class="op" id="2952225">[</span><span class="op" id="2952226">]</span><span class="builtintype" id="2952227">string</span><span class="op" id="2952233">,</span>&nbsp;<span class="ident" id="2952235">e</span>&nbsp;<span class="builtintype" id="2952237">error</span><span class="op" id="2952242">)</span>&nbsp;<span class="op" id="2952244">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952247">m</span>&nbsp;<span class="op" id="2952249">=</span>&nbsp;<span class="ident" id="2952251">matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952260">fi</span><span class="op" id="2952262">,</span>&nbsp;<span class="ident" id="2952264">err</span>&nbsp;<span class="op" id="2952268">:=</span>&nbsp;<span class="ident" id="2952271">os</span><span class="op" id="2952273">.</span><span class="ident" id="2952274">Stat</span><span class="op" id="2952278">(</span><span class="ident" id="2952279">dir</span><span class="op" id="2952282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952285">if</span>&nbsp;<span class="ident" id="2952288">err</span>&nbsp;<span class="op" id="2952292">!=</span>&nbsp;<span class="ident" id="2952295">nil</span>&nbsp;<span class="op" id="2952299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952303">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2952311">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952314">if</span>&nbsp;<span class="op" id="2952317">!</span><span class="ident" id="2952318">fi</span><span class="op" id="2952320">.</span><span class="ident" id="2952321">IsDir</span><span class="op" id="2952326">(</span><span class="op" id="2952327">)</span>&nbsp;<span class="op" id="2952329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952333">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2952341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952344">d</span><span class="op" id="2952345">,</span>&nbsp;<span class="ident" id="2952347">err</span>&nbsp;<span class="op" id="2952351">:=</span>&nbsp;<span class="ident" id="2952354">os</span><span class="op" id="2952356">.</span><span class="ident" id="2952357">Open</span><span class="op" id="2952361">(</span><span class="ident" id="2952362">dir</span><span class="op" id="2952365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952368">if</span>&nbsp;<span class="ident" id="2952371">err</span>&nbsp;<span class="op" id="2952375">!=</span>&nbsp;<span class="ident" id="2952378">nil</span>&nbsp;<span class="op" id="2952382">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952386">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2952394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952397">defer</span>&nbsp;<span class="ident" id="2952403">d</span><span class="op" id="2952404">.</span><span class="ident" id="2952405">Close</span><span class="op" id="2952410">(</span><span class="op" id="2952411">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952415">names</span><span class="op" id="2952420">,</span>&nbsp;<span class="ident" id="2952422">_</span>&nbsp;<span class="op" id="2952424">:=</span>&nbsp;<span class="ident" id="2952427">d</span><span class="op" id="2952428">.</span><span class="ident" id="2952429">Readdirnames</span><span class="op" id="2952441">(</span><span class="op" id="2952442">-</span><span class="num" id="2952443">1</span><span class="op" id="2952444">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952447">sort</span><span class="op" id="2952451">.</span><span class="ident" id="2952452">Strings</span><span class="op" id="2952459">(</span><span class="ident" id="2952460">names</span><span class="op" id="2952465">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952469">for</span>&nbsp;<span class="ident" id="2952473">_</span><span class="op" id="2952474">,</span>&nbsp;<span class="ident" id="2952476">n</span>&nbsp;<span class="op" id="2952478">:=</span>&nbsp;<span class="keyword" id="2952481">range</span>&nbsp;<span class="ident" id="2952487">names</span>&nbsp;<span class="op" id="2952493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952497">matched</span><span class="op" id="2952504">,</span>&nbsp;<span class="ident" id="2952506">err</span>&nbsp;<span class="op" id="2952510">:=</span>&nbsp;<span class="ident" id="2952513">Match</span><span class="op" id="2952518">(</span><span class="ident" id="2952519">pattern</span><span class="op" id="2952526">,</span>&nbsp;<span class="ident" id="2952528">n</span><span class="op" id="2952529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952533">if</span>&nbsp;<span class="ident" id="2952536">err</span>&nbsp;<span class="op" id="2952540">!=</span>&nbsp;<span class="ident" id="2952543">nil</span>&nbsp;<span class="op" id="2952547">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952552">return</span>&nbsp;<span class="ident" id="2952559">m</span><span class="op" id="2952560">,</span>&nbsp;<span class="ident" id="2952562">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2952568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952572">if</span>&nbsp;<span class="ident" id="2952575">matched</span>&nbsp;<span class="op" id="2952583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952588">m</span>&nbsp;<span class="op" id="2952590">=</span>&nbsp;<span class="builtinfunc" id="2952592">append</span><span class="op" id="2952598">(</span><span class="ident" id="2952599">m</span><span class="op" id="2952600">,</span>&nbsp;<span class="ident" id="2952602">Join</span><span class="op" id="2952606">(</span><span class="ident" id="2952607">dir</span><span class="op" id="2952610">,</span>&nbsp;<span class="ident" id="2952612">n</span><span class="op" id="2952613">)</span><span class="op" id="2952614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2952618">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2952621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952624">return</span><br>
<span class="lineno"></span><span class="op" id="2952631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2952634">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="2952703">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="2952727">func</span>&nbsp;<span class="ident" id="2952732">hasMeta</span><span class="op" id="2952739">(</span><span class="ident" id="2952740">path</span>&nbsp;<span class="builtintype" id="2952745">string</span><span class="op" id="2952751">)</span>&nbsp;<span class="builtintype" id="2952753">bool</span>&nbsp;<span class="op" id="2952758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2952761">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952826">return</span>&nbsp;<span class="ident" id="2952833">strings</span><span class="op" id="2952840">.</span><span class="ident" id="2952841">IndexAny</span><span class="op" id="2952849">(</span><span class="ident" id="2952850">path</span><span class="op" id="2952854">,</span>&nbsp;<span class="string" id="2952856">&#34;*?[&#34;</span><span class="op" id="2952861">)</span>&nbsp;<span class="op" id="2952863">&gt;=</span>&nbsp;<span class="num" id="2952866">0</span><br>
<span class="lineno"></span><span class="op" id="2952868">}</span>
</div>
</body>
</html>
