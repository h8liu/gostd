<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime/debug</h2>
<ul>
<li><a href="/gostd/runtime/debug/garbage.go.html">garbage.go</a></li>
<li><a href="/gostd/runtime/debug/garbage_test.go.html">garbage_test.go</a></li>
<li><a href="/gostd/runtime/debug/heapdump_test.go.html">heapdump_test.go</a></li>
<li><a href="/gostd/runtime/debug/stack.go.html" class="current">stack.go</a></li>
<li><a href="/gostd/runtime/debug/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/debug/stubs.go.html">stubs.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5445224">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5445279">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5445333">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5445384">//&nbsp;Package&nbsp;debug&nbsp;contains&nbsp;facilities&nbsp;for&nbsp;programs&nbsp;to&nbsp;debug&nbsp;themselves&nbsp;while</span><br>
<span class="lineno"></span><span class="comment" id="5445460">//&nbsp;they&nbsp;are&nbsp;running.</span><br>
<span class="lineno"></span><span class="keyword" id="5445481">package</span>&nbsp;<span class="ident" id="5445489">debug</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5445496">import</span>&nbsp;<span class="op" id="5445503">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5445506">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5445515">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5445522">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5445535">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5445541">&#34;runtime&#34;</span><br>
<span class="lineno">15</span><span class="op" id="5445551">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5445554">var</span>&nbsp;<span class="op" id="5445558">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5445561">dunno</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5445571">=</span>&nbsp;<span class="op" id="5445573">[</span><span class="op" id="5445574">]</span><span class="builtintype" id="5445575">byte</span><span class="op" id="5445579">(</span><span class="string" id="5445580">&#34;???&#34;</span><span class="op" id="5445585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5445588">centerDot</span>&nbsp;<span class="op" id="5445598">=</span>&nbsp;<span class="op" id="5445600">[</span><span class="op" id="5445601">]</span><span class="builtintype" id="5445602">byte</span><span class="op" id="5445606">(</span><span class="string" id="5445607">&#34;Â·&#34;</span><span class="op" id="5445611">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5445614">dot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5445624">=</span>&nbsp;<span class="op" id="5445626">[</span><span class="op" id="5445627">]</span><span class="builtintype" id="5445628">byte</span><span class="op" id="5445632">(</span><span class="string" id="5445633">&#34;.&#34;</span><span class="op" id="5445636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5445639">slash</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5445649">=</span>&nbsp;<span class="op" id="5445651">[</span><span class="op" id="5445652">]</span><span class="builtintype" id="5445653">byte</span><span class="op" id="5445657">(</span><span class="string" id="5445658">&#34;/&#34;</span><span class="op" id="5445661">)</span><br>
<span class="lineno"></span><span class="op" id="5445663">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5445666">//&nbsp;PrintStack&nbsp;prints&nbsp;to&nbsp;standard&nbsp;error&nbsp;the&nbsp;stack&nbsp;trace&nbsp;returned&nbsp;by&nbsp;Stack.</span><br>
<span class="lineno">25</span><span class="keyword" id="5445740">func</span>&nbsp;<span class="ident" id="5445745">PrintStack</span><span class="op" id="5445755">(</span><span class="op" id="5445756">)</span>&nbsp;<span class="op" id="5445758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5445761"><a href="/gostd/runtime/debug/stack.go.html#5445535">os</a></span><span class="op" id="5445763">.</span><span class="ident" id="5445764"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5445770">.</span><span class="ident" id="5445771"><a href="/gostd/os/file.go.html#2444247">Write</a></span><span class="op" id="5445776">(</span><span class="ident" id="5445777"><a href="/gostd/runtime/debug/stack.go.html#5446234">stack</a></span><span class="op" id="5445782">(</span><span class="op" id="5445783">)</span><span class="op" id="5445784">)</span><br>
<span class="lineno"></span><span class="op" id="5445786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5445789">//&nbsp;Stack&nbsp;returns&nbsp;a&nbsp;formatted&nbsp;stack&nbsp;trace&nbsp;of&nbsp;the&nbsp;goroutine&nbsp;that&nbsp;calls&nbsp;it.</span><br>
<span class="lineno">30</span><span class="comment" id="5445862">//&nbsp;For&nbsp;each&nbsp;routine,&nbsp;it&nbsp;includes&nbsp;the&nbsp;source&nbsp;line&nbsp;information&nbsp;and&nbsp;PC&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="5445937">//&nbsp;then&nbsp;attempts&nbsp;to&nbsp;discover,&nbsp;for&nbsp;Go&nbsp;functions,&nbsp;the&nbsp;calling&nbsp;function&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5446009">//&nbsp;method&nbsp;and&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;line&nbsp;containing&nbsp;the&nbsp;invocation.</span><br>
<span class="lineno"></span><span class="comment" id="5446071">//</span><br>
<span class="lineno"></span><span class="comment" id="5446074">//&nbsp;This&nbsp;function&nbsp;is&nbsp;deprecated.&nbsp;Use&nbsp;package&nbsp;runtime&#39;s&nbsp;Stack&nbsp;instead.</span><br>
<span class="lineno">35</span><span class="keyword" id="5446143">func</span>&nbsp;<span class="ident" id="5446148">Stack</span><span class="op" id="5446153">(</span><span class="op" id="5446154">)</span>&nbsp;<span class="op" id="5446156">[</span><span class="op" id="5446157">]</span><span class="builtintype" id="5446158">byte</span>&nbsp;<span class="op" id="5446163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5446166">return</span>&nbsp;<span class="ident" id="5446173"><a href="/gostd/runtime/debug/stack.go.html#5446234">stack</a></span><span class="op" id="5446178">(</span><span class="op" id="5446179">)</span><br>
<span class="lineno"></span><span class="op" id="5446181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5446184">//&nbsp;stack&nbsp;implements&nbsp;Stack,&nbsp;skipping&nbsp;2&nbsp;frames</span><br>
<span class="lineno">40</span><span class="keyword" id="5446229">func</span>&nbsp;<span class="ident" id="5446234">stack</span><span class="op" id="5446239">(</span><span class="op" id="5446240">)</span>&nbsp;<span class="op" id="5446242">[</span><span class="op" id="5446243">]</span><span class="builtintype" id="5446244">byte</span>&nbsp;<span class="op" id="5446249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5446252">buf</span>&nbsp;<span class="op" id="5446256">:=</span>&nbsp;<span class="builtinfunc" id="5446259">new</span><span class="op" id="5446262">(</span><span class="ident" id="5446263"><a href="/gostd/runtime/debug/stack.go.html#5445506">bytes</a></span><span class="op" id="5446268">.</span><span class="ident" id="5446269"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="5446275">)</span>&nbsp;<span class="comment" id="5446277">//&nbsp;the&nbsp;returned&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5446299">//&nbsp;As&nbsp;we&nbsp;loop,&nbsp;we&nbsp;open&nbsp;files&nbsp;and&nbsp;read&nbsp;them.&nbsp;These&nbsp;variables&nbsp;record&nbsp;the&nbsp;currently</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5446381">//&nbsp;loaded&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5446398">var</span>&nbsp;<span class="ident" id="5446402">lines</span>&nbsp;<span class="op" id="5446408">[</span><span class="op" id="5446409">]</span><span class="op" id="5446410">[</span><span class="op" id="5446411">]</span><span class="builtintype" id="5446412">byte</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5446418">var</span>&nbsp;<span class="ident" id="5446422">lastFile</span>&nbsp;<span class="builtintype" id="5446431">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5446439">for</span>&nbsp;<span class="ident" id="5446443">i</span>&nbsp;<span class="op" id="5446445">:=</span>&nbsp;<span class="num" id="5446448">2</span><span class="op" id="5446449">;</span>&nbsp;<span class="op" id="5446451">;</span>&nbsp;<span class="ident" id="5446453"><a href="/gostd/runtime/debug/stack.go.html#5446443">i</a></span><span class="op" id="5446454">++</span>&nbsp;<span class="op" id="5446457">{</span>&nbsp;<span class="comment" id="5446459">//&nbsp;Caller&nbsp;we&nbsp;care&nbsp;about&nbsp;is&nbsp;the&nbsp;user,&nbsp;2&nbsp;frames&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5446510">pc</span><span class="op" id="5446512">,</span>&nbsp;<span class="ident" id="5446514">file</span><span class="op" id="5446518">,</span>&nbsp;<span class="ident" id="5446520">line</span><span class="op" id="5446524">,</span>&nbsp;<span class="ident" id="5446526">ok</span>&nbsp;<span class="op" id="5446529">:=</span>&nbsp;<span class="ident" id="5446532"><a href="/gostd/runtime/debug/stack.go.html#5445541">runtime</a></span><span class="op" id="5446539">.</span><span class="ident" id="5446540"><a href="/gostd/runtime/extern.go.html#1531150">Caller</a></span><span class="op" id="5446546">(</span><span class="ident" id="5446547"><a href="/gostd/runtime/debug/stack.go.html#5446443">i</a></span><span class="op" id="5446548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5446552">if</span>&nbsp;<span class="op" id="5446555">!</span><span class="ident" id="5446556"><a href="/gostd/runtime/debug/stack.go.html#5446526">ok</a></span>&nbsp;<span class="op" id="5446559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5446564">break</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5446572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5446576">//&nbsp;Print&nbsp;this&nbsp;much&nbsp;at&nbsp;least.&nbsp;&nbsp;If&nbsp;we&nbsp;can&#39;t&nbsp;find&nbsp;the&nbsp;source,&nbsp;it&nbsp;won&#39;t&nbsp;show.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5446652"><a href="/gostd/runtime/debug/stack.go.html#5445515">fmt</a></span><span class="op" id="5446655">.</span><span class="ident" id="5446656"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5446663">(</span><span class="ident" id="5446664"><a href="/gostd/runtime/debug/stack.go.html#5446252">buf</a></span><span class="op" id="5446667">,</span>&nbsp;<span class="string" id="5446669">&#34;%s:%d&nbsp;(0x%x)\n&#34;</span><span class="op" id="5446685">,</span>&nbsp;<span class="ident" id="5446687"><a href="/gostd/runtime/debug/stack.go.html#5446514">file</a></span><span class="op" id="5446691">,</span>&nbsp;<span class="ident" id="5446693"><a href="/gostd/runtime/debug/stack.go.html#5446520">line</a></span><span class="op" id="5446697">,</span>&nbsp;<span class="ident" id="5446699"><a href="/gostd/runtime/debug/stack.go.html#5446510">pc</a></span><span class="op" id="5446701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5446705">if</span>&nbsp;<span class="ident" id="5446708"><a href="/gostd/runtime/debug/stack.go.html#5446514">file</a></span>&nbsp;<span class="op" id="5446713">!=</span>&nbsp;<span class="ident" id="5446716"><a href="/gostd/runtime/debug/stack.go.html#5446422">lastFile</a></span>&nbsp;<span class="op" id="5446725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5446730">data</span><span class="op" id="5446734">,</span>&nbsp;<span class="ident" id="5446736">err</span>&nbsp;<span class="op" id="5446740">:=</span>&nbsp;<span class="ident" id="5446743"><a href="/gostd/runtime/debug/stack.go.html#5445522">ioutil</a></span><span class="op" id="5446749">.</span><span class="ident" id="5446750"><a href="/gostd/io/ioutil/ioutil.go.html#3765434">ReadFile</a></span><span class="op" id="5446758">(</span><span class="ident" id="5446759"><a href="/gostd/runtime/debug/stack.go.html#5446514">file</a></span><span class="op" id="5446763">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5446768">if</span>&nbsp;<span class="ident" id="5446771"><a href="/gostd/runtime/debug/stack.go.html#5446736">err</a></span>&nbsp;<span class="op" id="5446775">!=</span>&nbsp;<span class="builtintype" id="5446778">nil</span>&nbsp;<span class="op" id="5446782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5446788">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5446800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5446805"><a href="/gostd/runtime/debug/stack.go.html#5446402">lines</a></span>&nbsp;<span class="op" id="5446811">=</span>&nbsp;<span class="ident" id="5446813"><a href="/gostd/runtime/debug/stack.go.html#5445506">bytes</a></span><span class="op" id="5446818">.</span><span class="ident" id="5446819"><a href="/gostd/bytes/bytes.go.html#1401692">Split</a></span><span class="op" id="5446824">(</span><span class="ident" id="5446825"><a href="/gostd/runtime/debug/stack.go.html#5446730">data</a></span><span class="op" id="5446829">,</span>&nbsp;<span class="op" id="5446831">[</span><span class="op" id="5446832">]</span><span class="builtintype" id="5446833">byte</span><span class="op" id="5446837">{</span><span class="string" id="5446838">&#39;\n&#39;</span><span class="op" id="5446842">}</span><span class="op" id="5446843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5446848"><a href="/gostd/runtime/debug/stack.go.html#5446422">lastFile</a></span>&nbsp;<span class="op" id="5446857">=</span>&nbsp;<span class="ident" id="5446859"><a href="/gostd/runtime/debug/stack.go.html#5446514">file</a></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5446866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5446870"><a href="/gostd/runtime/debug/stack.go.html#5446520">line</a></span><span class="op" id="5446874">--</span>&nbsp;<span class="comment" id="5446877">//&nbsp;in&nbsp;stack&nbsp;trace,&nbsp;lines&nbsp;are&nbsp;1-indexed&nbsp;but&nbsp;our&nbsp;array&nbsp;is&nbsp;0-indexed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5446945"><a href="/gostd/runtime/debug/stack.go.html#5445515">fmt</a></span><span class="op" id="5446948">.</span><span class="ident" id="5446949"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5446956">(</span><span class="ident" id="5446957"><a href="/gostd/runtime/debug/stack.go.html#5446252">buf</a></span><span class="op" id="5446960">,</span>&nbsp;<span class="string" id="5446962">&#34;\t%s:&nbsp;%s\n&#34;</span><span class="op" id="5446974">,</span>&nbsp;<span class="ident" id="5446976"><a href="/gostd/runtime/debug/stack.go.html#5447310">function</a></span><span class="op" id="5446984">(</span><span class="ident" id="5446985"><a href="/gostd/runtime/debug/stack.go.html#5446510">pc</a></span><span class="op" id="5446987">)</span><span class="op" id="5446988">,</span>&nbsp;<span class="ident" id="5446990"><a href="/gostd/runtime/debug/stack.go.html#5447100">source</a></span><span class="op" id="5446996">(</span><span class="ident" id="5446997"><a href="/gostd/runtime/debug/stack.go.html#5446402">lines</a></span><span class="op" id="5447002">,</span>&nbsp;<span class="ident" id="5447004"><a href="/gostd/runtime/debug/stack.go.html#5446520">line</a></span><span class="op" id="5447008">)</span><span class="op" id="5447009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5447012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5447015">return</span>&nbsp;<span class="ident" id="5447022"><a href="/gostd/runtime/debug/stack.go.html#5446252">buf</a></span><span class="op" id="5447025">.</span><span class="ident" id="5447026"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="5447031">(</span><span class="op" id="5447032">)</span><br>
<span class="lineno">65</span><span class="op" id="5447034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5447037">//&nbsp;source&nbsp;returns&nbsp;a&nbsp;space-trimmed&nbsp;slice&nbsp;of&nbsp;the&nbsp;n&#39;th&nbsp;line.</span><br>
<span class="lineno"></span><span class="keyword" id="5447095">func</span>&nbsp;<span class="ident" id="5447100">source</span><span class="op" id="5447106">(</span><span class="ident" id="5447107">lines</span>&nbsp;<span class="op" id="5447113">[</span><span class="op" id="5447114">]</span><span class="op" id="5447115">[</span><span class="op" id="5447116">]</span><span class="builtintype" id="5447117">byte</span><span class="op" id="5447121">,</span>&nbsp;<span class="ident" id="5447123">n</span>&nbsp;<span class="builtintype" id="5447125">int</span><span class="op" id="5447128">)</span>&nbsp;<span class="op" id="5447130">[</span><span class="op" id="5447131">]</span><span class="builtintype" id="5447132">byte</span>&nbsp;<span class="op" id="5447137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5447140">if</span>&nbsp;<span class="ident" id="5447143"><a href="/gostd/runtime/debug/stack.go.html#5447123">n</a></span>&nbsp;<span class="op" id="5447145">&lt;</span>&nbsp;<span class="num" id="5447147">0</span>&nbsp;<span class="op" id="5447149">||</span>&nbsp;<span class="ident" id="5447152"><a href="/gostd/runtime/debug/stack.go.html#5447123">n</a></span>&nbsp;<span class="op" id="5447154">&gt;=</span>&nbsp;<span class="builtinfunc" id="5447157">len</span><span class="op" id="5447160">(</span><span class="ident" id="5447161"><a href="/gostd/runtime/debug/stack.go.html#5447107">lines</a></span><span class="op" id="5447166">)</span>&nbsp;<span class="op" id="5447168">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5447172">return</span>&nbsp;<span class="ident" id="5447179"><a href="/gostd/runtime/debug/stack.go.html#5445561">dunno</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5447186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5447189">return</span>&nbsp;<span class="ident" id="5447196"><a href="/gostd/runtime/debug/stack.go.html#5445506">bytes</a></span><span class="op" id="5447201">.</span><span class="ident" id="5447202"><a href="/gostd/bytes/bytes.go.html#1411147">Trim</a></span><span class="op" id="5447206">(</span><span class="ident" id="5447207"><a href="/gostd/runtime/debug/stack.go.html#5447107">lines</a></span><span class="op" id="5447212">[</span><span class="ident" id="5447213"><a href="/gostd/runtime/debug/stack.go.html#5447123">n</a></span><span class="op" id="5447214">]</span><span class="op" id="5447215">,</span>&nbsp;<span class="string" id="5447217">&#34;&nbsp;\t&#34;</span><span class="op" id="5447222">)</span><br>
<span class="lineno"></span><span class="op" id="5447224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="5447227">//&nbsp;function&nbsp;returns,&nbsp;if&nbsp;possible,&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function&nbsp;containing&nbsp;the&nbsp;PC.</span><br>
<span class="lineno"></span><span class="keyword" id="5447305">func</span>&nbsp;<span class="ident" id="5447310">function</span><span class="op" id="5447318">(</span><span class="ident" id="5447319">pc</span>&nbsp;<span class="builtintype" id="5447322">uintptr</span><span class="op" id="5447329">)</span>&nbsp;<span class="op" id="5447331">[</span><span class="op" id="5447332">]</span><span class="builtintype" id="5447333">byte</span>&nbsp;<span class="op" id="5447338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5447341">fn</span>&nbsp;<span class="op" id="5447344">:=</span>&nbsp;<span class="ident" id="5447347"><a href="/gostd/runtime/debug/stack.go.html#5445541">runtime</a></span><span class="op" id="5447354">.</span><span class="ident" id="5447355"><a href="/gostd/runtime/symtab.go.html#1752271">FuncForPC</a></span><span class="op" id="5447364">(</span><span class="ident" id="5447365"><a href="/gostd/runtime/debug/stack.go.html#5447319">pc</a></span><span class="op" id="5447367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5447370">if</span>&nbsp;<span class="ident" id="5447373"><a href="/gostd/runtime/debug/stack.go.html#5447341">fn</a></span>&nbsp;<span class="op" id="5447376">==</span>&nbsp;<span class="builtintype" id="5447379">nil</span>&nbsp;<span class="op" id="5447383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5447387">return</span>&nbsp;<span class="ident" id="5447394"><a href="/gostd/runtime/debug/stack.go.html#5445561">dunno</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5447401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5447404">name</span>&nbsp;<span class="op" id="5447409">:=</span>&nbsp;<span class="op" id="5447412">[</span><span class="op" id="5447413">]</span><span class="builtintype" id="5447414">byte</span><span class="op" id="5447418">(</span><span class="ident" id="5447419"><a href="/gostd/runtime/debug/stack.go.html#5447341">fn</a></span><span class="op" id="5447421">.</span><span class="ident" id="5447422"><a href="/gostd/runtime/symtab.go.html#1752407">Name</a></span><span class="op" id="5447426">(</span><span class="op" id="5447427">)</span><span class="op" id="5447428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5447431">//&nbsp;The&nbsp;name&nbsp;includes&nbsp;the&nbsp;path&nbsp;name&nbsp;to&nbsp;the&nbsp;package,&nbsp;which&nbsp;is&nbsp;unnecessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5447504">//&nbsp;since&nbsp;the&nbsp;file&nbsp;name&nbsp;is&nbsp;already&nbsp;included.&nbsp;&nbsp;Plus,&nbsp;it&nbsp;has&nbsp;center&nbsp;dots.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5447576">//&nbsp;That&nbsp;is,&nbsp;we&nbsp;see</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5447596">//&nbsp;&nbsp;&nbsp;&nbsp;runtime/debug.*TÂ·ptrmethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5447628">//&nbsp;and&nbsp;want</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5447641">//&nbsp;&nbsp;&nbsp;&nbsp;*T.ptrmethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5447658">//&nbsp;Since&nbsp;the&nbsp;package&nbsp;path&nbsp;might&nbsp;contains&nbsp;dots&nbsp;(e.g.&nbsp;code.google.com/...),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5447733">//&nbsp;we&nbsp;first&nbsp;remove&nbsp;the&nbsp;path&nbsp;prefix&nbsp;if&nbsp;there&nbsp;is&nbsp;one.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5447786">if</span>&nbsp;<span class="ident" id="5447789">lastslash</span>&nbsp;<span class="op" id="5447799">:=</span>&nbsp;<span class="ident" id="5447802"><a href="/gostd/runtime/debug/stack.go.html#5445506">bytes</a></span><span class="op" id="5447807">.</span><span class="ident" id="5447808"><a href="/gostd/bytes/bytes.go.html#1398237">LastIndex</a></span><span class="op" id="5447817">(</span><span class="ident" id="5447818"><a href="/gostd/runtime/debug/stack.go.html#5447404">name</a></span><span class="op" id="5447822">,</span>&nbsp;<span class="ident" id="5447824"><a href="/gostd/runtime/debug/stack.go.html#5445639">slash</a></span><span class="op" id="5447829">)</span><span class="op" id="5447830">;</span>&nbsp;<span class="ident" id="5447832"><a href="/gostd/runtime/debug/stack.go.html#5447789">lastslash</a></span>&nbsp;<span class="op" id="5447842">&gt;=</span>&nbsp;<span class="num" id="5447845">0</span>&nbsp;<span class="op" id="5447847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5447851"><a href="/gostd/runtime/debug/stack.go.html#5447404">name</a></span>&nbsp;<span class="op" id="5447856">=</span>&nbsp;<span class="ident" id="5447858"><a href="/gostd/runtime/debug/stack.go.html#5447404">name</a></span><span class="op" id="5447862">[</span><span class="ident" id="5447863"><a href="/gostd/runtime/debug/stack.go.html#5447789">lastslash</a></span><span class="op" id="5447872">+</span><span class="num" id="5447873">1</span><span class="op" id="5447874">:</span><span class="op" id="5447875">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5447878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5447881">if</span>&nbsp;<span class="ident" id="5447884">period</span>&nbsp;<span class="op" id="5447891">:=</span>&nbsp;<span class="ident" id="5447894"><a href="/gostd/runtime/debug/stack.go.html#5445506">bytes</a></span><span class="op" id="5447899">.</span><span class="ident" id="5447900"><a href="/gostd/bytes/bytes.go.html#1397659">Index</a></span><span class="op" id="5447905">(</span><span class="ident" id="5447906"><a href="/gostd/runtime/debug/stack.go.html#5447404">name</a></span><span class="op" id="5447910">,</span>&nbsp;<span class="ident" id="5447912"><a href="/gostd/runtime/debug/stack.go.html#5445614">dot</a></span><span class="op" id="5447915">)</span><span class="op" id="5447916">;</span>&nbsp;<span class="ident" id="5447918"><a href="/gostd/runtime/debug/stack.go.html#5447884">period</a></span>&nbsp;<span class="op" id="5447925">&gt;=</span>&nbsp;<span class="num" id="5447928">0</span>&nbsp;<span class="op" id="5447930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5447934"><a href="/gostd/runtime/debug/stack.go.html#5447404">name</a></span>&nbsp;<span class="op" id="5447939">=</span>&nbsp;<span class="ident" id="5447941"><a href="/gostd/runtime/debug/stack.go.html#5447404">name</a></span><span class="op" id="5447945">[</span><span class="ident" id="5447946"><a href="/gostd/runtime/debug/stack.go.html#5447884">period</a></span><span class="op" id="5447952">+</span><span class="num" id="5447953">1</span><span class="op" id="5447954">:</span><span class="op" id="5447955">]</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5447958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5447961"><a href="/gostd/runtime/debug/stack.go.html#5447404">name</a></span>&nbsp;<span class="op" id="5447966">=</span>&nbsp;<span class="ident" id="5447968"><a href="/gostd/runtime/debug/stack.go.html#5445506">bytes</a></span><span class="op" id="5447973">.</span><span class="ident" id="5447974"><a href="/gostd/bytes/bytes.go.html#1412445">Replace</a></span><span class="op" id="5447981">(</span><span class="ident" id="5447982"><a href="/gostd/runtime/debug/stack.go.html#5447404">name</a></span><span class="op" id="5447986">,</span>&nbsp;<span class="ident" id="5447988"><a href="/gostd/runtime/debug/stack.go.html#5445588">centerDot</a></span><span class="op" id="5447997">,</span>&nbsp;<span class="ident" id="5447999"><a href="/gostd/runtime/debug/stack.go.html#5445614">dot</a></span><span class="op" id="5448002">,</span>&nbsp;<span class="op" id="5448004">-</span><span class="num" id="5448005">1</span><span class="op" id="5448006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5448009">return</span>&nbsp;<span class="ident" id="5448016"><a href="/gostd/runtime/debug/stack.go.html#5447404">name</a></span><br>
<span class="lineno"></span><span class="op" id="5448021">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
