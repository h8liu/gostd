<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/gzip</h2>
<ul>
<li><a href="/gostd/compress/gzip/gunzip.go.html">gunzip.go</a></li>
<li><a href="/gostd/compress/gzip/gunzip_test.go.html">gunzip_test.go</a></li>
<li><a href="/gostd/compress/gzip/gzip.go.html" class="current">gzip.go</a></li>
<li><a href="/gostd/compress/gzip/gzip_test.go.html">gzip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4784555">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4784610">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4784664">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4784715">package</span>&nbsp;<span class="ident" id="4784723">gzip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4784729">import</span>&nbsp;<span class="op" id="4784736">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4784739">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4784757">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4784767">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4784774">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4784782">&#34;hash/crc32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4784796">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="4784801">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4784804">//&nbsp;These&nbsp;constants&nbsp;are&nbsp;copied&nbsp;from&nbsp;the&nbsp;flate&nbsp;package,&nbsp;so&nbsp;that&nbsp;code&nbsp;that&nbsp;imports</span><br>
<span class="lineno"></span><span class="comment" id="4784884">//&nbsp;&#34;compress/gzip&#34;&nbsp;does&nbsp;not&nbsp;also&nbsp;have&nbsp;to&nbsp;import&nbsp;&#34;compress/flate&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4784950">const</span>&nbsp;<span class="op" id="4784956">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784959">NoCompression</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4784978">=</span>&nbsp;<span class="ident" id="4784980"><a href="/gostd/compress/gzip/gzip.go.html#4784739">flate</a></span><span class="op" id="4784985">.</span><span class="ident" id="4784986"><a href="/gostd/compress/flate/deflate.go.html#4792285">NoCompression</a></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785001">BestSpeed</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785020">=</span>&nbsp;<span class="ident" id="4785022"><a href="/gostd/compress/gzip/gzip.go.html#4784739">flate</a></span><span class="op" id="4785027">.</span><span class="ident" id="4785028"><a href="/gostd/compress/flate/deflate.go.html#4792309">BestSpeed</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785039">BestCompression</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785058">=</span>&nbsp;<span class="ident" id="4785060"><a href="/gostd/compress/gzip/gzip.go.html#4784739">flate</a></span><span class="op" id="4785065">.</span><span class="ident" id="4785066"><a href="/gostd/compress/flate/deflate.go.html#4792357">BestCompression</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785083">DefaultCompression</span>&nbsp;<span class="op" id="4785102">=</span>&nbsp;<span class="ident" id="4785104"><a href="/gostd/compress/gzip/gzip.go.html#4784739">flate</a></span><span class="op" id="4785109">.</span><span class="ident" id="4785110"><a href="/gostd/compress/flate/deflate.go.html#4792381">DefaultCompression</a></span><br>
<span class="lineno"></span><span class="op" id="4785129">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="4785132">//&nbsp;A&nbsp;Writer&nbsp;is&nbsp;an&nbsp;io.WriteCloser.</span><br>
<span class="lineno"></span><span class="comment" id="4785166">//&nbsp;Writes&nbsp;to&nbsp;a&nbsp;Writer&nbsp;are&nbsp;compressed&nbsp;and&nbsp;written&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="4785221">type</span>&nbsp;<span class="ident" id="4785226">Writer</span>&nbsp;<span class="keyword" id="4785233">struct</span>&nbsp;<span class="op" id="4785240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785243"><a href="/gostd/compress/gzip/gunzip.go.html#4778422">Header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785251">w</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785263"><a href="/gostd/compress/gzip/gzip.go.html#4784796">io</a></span><span class="op" id="4785265">.</span><span class="ident" id="4785266"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785274">level</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4785286">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785291">wroteHeader</span>&nbsp;<span class="builtintype" id="4785303">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785309">compressor</span>&nbsp;&nbsp;<span class="op" id="4785321">*</span><span class="ident" id="4785322"><a href="/gostd/compress/gzip/gzip.go.html#4784739">flate</a></span><span class="op" id="4785327">.</span><span class="ident" id="4785328"><a href="/gostd/compress/flate/deflate.go.html#4806024">Writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785336">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785348"><a href="/gostd/compress/gzip/gzip.go.html#4784774">hash</a></span><span class="op" id="4785352">.</span><span class="ident" id="4785353"><a href="/gostd/hash/hash.go.html#3014832">Hash32</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785361">size</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4785373">uint32</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785381">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4785393">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785399">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785411">[</span><span class="num" id="4785412">10</span><span class="op" id="4785414">]</span><span class="builtintype" id="4785415">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785421">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4785433">error</span><br>
<span class="lineno"></span><span class="op" id="4785439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="comment" id="4785442">//&nbsp;NewWriter&nbsp;returns&nbsp;a&nbsp;new&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="comment" id="4785477">//&nbsp;Writes&nbsp;to&nbsp;the&nbsp;returned&nbsp;writer&nbsp;are&nbsp;compressed&nbsp;and&nbsp;written&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="comment" id="4785543">//</span><br>
<span class="lineno"></span><span class="comment" id="4785546">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;WriteCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="4785627">//&nbsp;Writes&nbsp;may&nbsp;be&nbsp;buffered&nbsp;and&nbsp;not&nbsp;flushed&nbsp;until&nbsp;Close.</span><br>
<span class="lineno">45</span><span class="comment" id="4785682">//</span><br>
<span class="lineno"></span><span class="comment" id="4785685">//&nbsp;Callers&nbsp;that&nbsp;wish&nbsp;to&nbsp;set&nbsp;the&nbsp;fields&nbsp;in&nbsp;Writer.Header&nbsp;must&nbsp;do&nbsp;so&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="4785759">//&nbsp;the&nbsp;first&nbsp;call&nbsp;to&nbsp;Write&nbsp;or&nbsp;Close.&nbsp;The&nbsp;Comment&nbsp;and&nbsp;Name&nbsp;header&nbsp;fields&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="4785835">//&nbsp;UTF-8&nbsp;strings&nbsp;in&nbsp;Go,&nbsp;but&nbsp;the&nbsp;underlying&nbsp;format&nbsp;requires&nbsp;NUL-terminated&nbsp;ISO</span><br>
<span class="lineno"></span><span class="comment" id="4785913">//&nbsp;8859-1&nbsp;(Latin-1).&nbsp;NUL&nbsp;or&nbsp;non-Latin-1&nbsp;runes&nbsp;in&nbsp;those&nbsp;strings&nbsp;will&nbsp;lead&nbsp;to&nbsp;an</span><br>
<span class="lineno">50</span><span class="comment" id="4785992">//&nbsp;error&nbsp;on&nbsp;Write.</span><br>
<span class="lineno"></span><span class="keyword" id="4786011">func</span>&nbsp;<span class="ident" id="4786016">NewWriter</span><span class="op" id="4786025">(</span><span class="ident" id="4786026">w</span>&nbsp;<span class="ident" id="4786028"><a href="/gostd/compress/gzip/gzip.go.html#4784796">io</a></span><span class="op" id="4786030">.</span><span class="ident" id="4786031"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="4786037">)</span>&nbsp;<span class="op" id="4786039">*</span><span class="ident" id="4786040"><a href="/gostd/compress/gzip/gzip.go.html#4785226">Writer</a></span>&nbsp;<span class="op" id="4786047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786050">z</span><span class="op" id="4786051">,</span>&nbsp;<span class="ident" id="4786053">_</span>&nbsp;<span class="op" id="4786055">:=</span>&nbsp;<span class="ident" id="4786058"><a href="/gostd/compress/gzip/gzip.go.html#4786429">NewWriterLevel</a></span><span class="op" id="4786072">(</span><span class="ident" id="4786073"><a href="/gostd/compress/gzip/gzip.go.html#4786026">w</a></span><span class="op" id="4786074">,</span>&nbsp;<span class="ident" id="4786076"><a href="/gostd/compress/gzip/gzip.go.html#4785083">DefaultCompression</a></span><span class="op" id="4786094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786097">return</span>&nbsp;<span class="ident" id="4786104"><a href="/gostd/compress/gzip/gzip.go.html#4786050">z</a></span><br>
<span class="lineno"></span><span class="op" id="4786106">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="4786109">//&nbsp;NewWriterLevel&nbsp;is&nbsp;like&nbsp;NewWriter&nbsp;but&nbsp;specifies&nbsp;the&nbsp;compression&nbsp;level&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="4786189">//&nbsp;of&nbsp;assuming&nbsp;DefaultCompression.</span><br>
<span class="lineno"></span><span class="comment" id="4786224">//</span><br>
<span class="lineno"></span><span class="comment" id="4786227">//&nbsp;The&nbsp;compression&nbsp;level&nbsp;can&nbsp;be&nbsp;DefaultCompression,&nbsp;NoCompression,&nbsp;or&nbsp;any</span><br>
<span class="lineno">60</span><span class="comment" id="4786301">//&nbsp;integer&nbsp;value&nbsp;between&nbsp;BestSpeed&nbsp;and&nbsp;BestCompression&nbsp;inclusive.&nbsp;The&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="4786377">//&nbsp;returned&nbsp;will&nbsp;be&nbsp;nil&nbsp;if&nbsp;the&nbsp;level&nbsp;is&nbsp;valid.</span><br>
<span class="lineno"></span><span class="keyword" id="4786424">func</span>&nbsp;<span class="ident" id="4786429">NewWriterLevel</span><span class="op" id="4786443">(</span><span class="ident" id="4786444">w</span>&nbsp;<span class="ident" id="4786446"><a href="/gostd/compress/gzip/gzip.go.html#4784796">io</a></span><span class="op" id="4786448">.</span><span class="ident" id="4786449"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="4786455">,</span>&nbsp;<span class="ident" id="4786457">level</span>&nbsp;<span class="builtintype" id="4786463">int</span><span class="op" id="4786466">)</span>&nbsp;<span class="op" id="4786468">(</span><span class="op" id="4786469">*</span><span class="ident" id="4786470"><a href="/gostd/compress/gzip/gzip.go.html#4785226">Writer</a></span><span class="op" id="4786476">,</span>&nbsp;<span class="builtintype" id="4786478">error</span><span class="op" id="4786483">)</span>&nbsp;<span class="op" id="4786485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786488">if</span>&nbsp;<span class="ident" id="4786491"><a href="/gostd/compress/gzip/gzip.go.html#4786457">level</a></span>&nbsp;<span class="op" id="4786497">&lt;</span>&nbsp;<span class="ident" id="4786499"><a href="/gostd/compress/gzip/gzip.go.html#4785083">DefaultCompression</a></span>&nbsp;<span class="op" id="4786518">||</span>&nbsp;<span class="ident" id="4786521"><a href="/gostd/compress/gzip/gzip.go.html#4786457">level</a></span>&nbsp;<span class="op" id="4786527">&gt;</span>&nbsp;<span class="ident" id="4786529"><a href="/gostd/compress/gzip/gzip.go.html#4785039">BestCompression</a></span>&nbsp;<span class="op" id="4786545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786549">return</span>&nbsp;<span class="builtintype" id="4786556">nil</span><span class="op" id="4786559">,</span>&nbsp;<span class="ident" id="4786561"><a href="/gostd/compress/gzip/gzip.go.html#4784767">fmt</a></span><span class="op" id="4786564">.</span><span class="ident" id="4786565"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="4786571">(</span><span class="string" id="4786572">&#34;gzip:&nbsp;invalid&nbsp;compression&nbsp;level:&nbsp;%d&#34;</span><span class="op" id="4786609">,</span>&nbsp;<span class="ident" id="4786611"><a href="/gostd/compress/gzip/gzip.go.html#4786457">level</a></span><span class="op" id="4786616">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786622">z</span>&nbsp;<span class="op" id="4786624">:=</span>&nbsp;<span class="builtinfunc" id="4786627">new</span><span class="op" id="4786630">(</span><span class="ident" id="4786631"><a href="/gostd/compress/gzip/gzip.go.html#4785226">Writer</a></span><span class="op" id="4786637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786640"><a href="/gostd/compress/gzip/gzip.go.html#4786622">z</a></span><span class="op" id="4786641">.</span><span class="ident" id="4786642"><a href="/gostd/compress/gzip/gzip.go.html#4786692">init</a></span><span class="op" id="4786646">(</span><span class="ident" id="4786647"><a href="/gostd/compress/gzip/gzip.go.html#4786444">w</a></span><span class="op" id="4786648">,</span>&nbsp;<span class="ident" id="4786650"><a href="/gostd/compress/gzip/gzip.go.html#4786457">level</a></span><span class="op" id="4786655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786658">return</span>&nbsp;<span class="ident" id="4786665"><a href="/gostd/compress/gzip/gzip.go.html#4786622">z</a></span><span class="op" id="4786666">,</span>&nbsp;<span class="builtintype" id="4786668">nil</span><br>
<span class="lineno"></span><span class="op" id="4786672">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="4786675">func</span>&nbsp;<span class="op" id="4786680">(</span><span class="ident" id="4786681">z</span>&nbsp;<span class="op" id="4786683">*</span><span class="ident" id="4786684"><a href="/gostd/compress/gzip/gzip.go.html#4785226">Writer</a></span><span class="op" id="4786690">)</span>&nbsp;<span class="ident" id="4786692">init</span><span class="op" id="4786696">(</span><span class="ident" id="4786697">w</span>&nbsp;<span class="ident" id="4786699"><a href="/gostd/compress/gzip/gzip.go.html#4784796">io</a></span><span class="op" id="4786701">.</span><span class="ident" id="4786702"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="4786708">,</span>&nbsp;<span class="ident" id="4786710">level</span>&nbsp;<span class="builtintype" id="4786716">int</span><span class="op" id="4786719">)</span>&nbsp;<span class="op" id="4786721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786724">digest</span>&nbsp;<span class="op" id="4786731">:=</span>&nbsp;<span class="ident" id="4786734"><a href="/gostd/compress/gzip/gzip.go.html#4786681">z</a></span><span class="op" id="4786735">.</span><span class="ident" id="4786736"><a href="/gostd/compress/gzip/gzip.go.html#4785336">digest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786744">if</span>&nbsp;<span class="ident" id="4786747"><a href="/gostd/compress/gzip/gzip.go.html#4786724">digest</a></span>&nbsp;<span class="op" id="4786754">!=</span>&nbsp;<span class="builtintype" id="4786757">nil</span>&nbsp;<span class="op" id="4786761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786765"><a href="/gostd/compress/gzip/gzip.go.html#4786724">digest</a></span><span class="op" id="4786771">.</span><span class="ident" id="4786772"><a href="/gostd/hash/hash.go.html#3014443">Reset</a></span><span class="op" id="4786777">(</span><span class="op" id="4786778">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786781">}</span>&nbsp;<span class="keyword" id="4786783">else</span>&nbsp;<span class="op" id="4786788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786792"><a href="/gostd/compress/gzip/gzip.go.html#4786724">digest</a></span>&nbsp;<span class="op" id="4786799">=</span>&nbsp;<span class="ident" id="4786801"><a href="/gostd/compress/gzip/gzip.go.html#4784782">crc32</a></span><span class="op" id="4786806">.</span><span class="ident" id="4786807"><a href="/gostd/hash/crc32/crc32.go.html#4859679">NewIEEE</a></span><span class="op" id="4786814">(</span><span class="op" id="4786815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786821">compressor</span>&nbsp;<span class="op" id="4786832">:=</span>&nbsp;<span class="ident" id="4786835"><a href="/gostd/compress/gzip/gzip.go.html#4786681">z</a></span><span class="op" id="4786836">.</span><span class="ident" id="4786837"><a href="/gostd/compress/gzip/gzip.go.html#4785309">compressor</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786849">if</span>&nbsp;<span class="ident" id="4786852"><a href="/gostd/compress/gzip/gzip.go.html#4786821">compressor</a></span>&nbsp;<span class="op" id="4786863">!=</span>&nbsp;<span class="builtintype" id="4786866">nil</span>&nbsp;<span class="op" id="4786870">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786874"><a href="/gostd/compress/gzip/gzip.go.html#4786821">compressor</a></span><span class="op" id="4786884">.</span><span class="ident" id="4786885"><a href="/gostd/compress/flate/deflate.go.html#4807095">Reset</a></span><span class="op" id="4786890">(</span><span class="ident" id="4786891"><a href="/gostd/compress/gzip/gzip.go.html#4786697">w</a></span><span class="op" id="4786892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786898">*</span><span class="ident" id="4786899"><a href="/gostd/compress/gzip/gzip.go.html#4786681">z</a></span>&nbsp;<span class="op" id="4786901">=</span>&nbsp;<span class="ident" id="4786903"><a href="/gostd/compress/gzip/gzip.go.html#4785226">Writer</a></span><span class="op" id="4786909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786913"><a href="/gostd/compress/gzip/gzip.go.html#4785243">Header</a></span><span class="op" id="4786919">:</span>&nbsp;<span class="ident" id="4786921"><a href="/gostd/compress/gzip/gunzip.go.html#4778422">Header</a></span><span class="op" id="4786927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786932"><a href="/gostd/compress/gzip/gunzip.go.html#4778576">OS</a></span><span class="op" id="4786934">:</span>&nbsp;<span class="num" id="4786936">255</span><span class="op" id="4786939">,</span>&nbsp;<span class="comment" id="4786941">//&nbsp;unknown</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786954">}</span><span class="op" id="4786955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786959"><a href="/gostd/compress/gzip/gzip.go.html#4785251">w</a></span><span class="op" id="4786960">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786971"><a href="/gostd/compress/gzip/gzip.go.html#4786697">w</a></span><span class="op" id="4786972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786976"><a href="/gostd/compress/gzip/gzip.go.html#4785274">level</a></span><span class="op" id="4786981">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786988"><a href="/gostd/compress/gzip/gzip.go.html#4786710">level</a></span><span class="op" id="4786993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786997"><a href="/gostd/compress/gzip/gzip.go.html#4785336">digest</a></span><span class="op" id="4787003">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787009"><a href="/gostd/compress/gzip/gzip.go.html#4786724">digest</a></span><span class="op" id="4787015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787019"><a href="/gostd/compress/gzip/gzip.go.html#4785309">compressor</a></span><span class="op" id="4787029">:</span>&nbsp;<span class="ident" id="4787031"><a href="/gostd/compress/gzip/gzip.go.html#4786821">compressor</a></span><span class="op" id="4787041">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4787044">}</span><br>
<span class="lineno"></span><span class="op" id="4787046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4787049">//&nbsp;Reset&nbsp;discards&nbsp;the&nbsp;Writer&nbsp;z&#39;s&nbsp;state&nbsp;and&nbsp;makes&nbsp;it&nbsp;equivalent&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4787119">//&nbsp;result&nbsp;of&nbsp;its&nbsp;original&nbsp;state&nbsp;from&nbsp;NewWriter&nbsp;or&nbsp;NewWriterLevel,&nbsp;but</span><br>
<span class="lineno">95</span><span class="comment" id="4787189">//&nbsp;writing&nbsp;to&nbsp;w&nbsp;instead.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;Writer&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="4787256">//&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="4787281">func</span>&nbsp;<span class="op" id="4787286">(</span><span class="ident" id="4787287">z</span>&nbsp;<span class="op" id="4787289">*</span><span class="ident" id="4787290"><a href="/gostd/compress/gzip/gzip.go.html#4785226">Writer</a></span><span class="op" id="4787296">)</span>&nbsp;<span class="ident" id="4787298">Reset</span><span class="op" id="4787303">(</span><span class="ident" id="4787304">w</span>&nbsp;<span class="ident" id="4787306"><a href="/gostd/compress/gzip/gzip.go.html#4784796">io</a></span><span class="op" id="4787308">.</span><span class="ident" id="4787309"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="4787315">)</span>&nbsp;<span class="op" id="4787317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787320"><a href="/gostd/compress/gzip/gzip.go.html#4787287">z</a></span><span class="op" id="4787321">.</span><span class="ident" id="4787322"><a href="/gostd/compress/gzip/gzip.go.html#4786692">init</a></span><span class="op" id="4787326">(</span><span class="ident" id="4787327"><a href="/gostd/compress/gzip/gzip.go.html#4787304">w</a></span><span class="op" id="4787328">,</span>&nbsp;<span class="ident" id="4787330"><a href="/gostd/compress/gzip/gzip.go.html#4787287">z</a></span><span class="op" id="4787331">.</span><span class="ident" id="4787332"><a href="/gostd/compress/gzip/gzip.go.html#4785274">level</a></span><span class="op" id="4787337">)</span><br>
<span class="lineno"></span><span class="op" id="4787339">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="4787342">//&nbsp;GZIP&nbsp;(RFC&nbsp;1952)&nbsp;is&nbsp;little-endian,&nbsp;unlike&nbsp;ZLIB&nbsp;(RFC&nbsp;1950).</span><br>
<span class="lineno"></span><span class="keyword" id="4787403">func</span>&nbsp;<span class="ident" id="4787408">put2</span><span class="op" id="4787412">(</span><span class="ident" id="4787413">p</span>&nbsp;<span class="op" id="4787415">[</span><span class="op" id="4787416">]</span><span class="builtintype" id="4787417">byte</span><span class="op" id="4787421">,</span>&nbsp;<span class="ident" id="4787423">v</span>&nbsp;<span class="builtintype" id="4787425">uint16</span><span class="op" id="4787431">)</span>&nbsp;<span class="op" id="4787433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787436"><a href="/gostd/compress/gzip/gzip.go.html#4787413">p</a></span><span class="op" id="4787437">[</span><span class="num" id="4787438">0</span><span class="op" id="4787439">]</span>&nbsp;<span class="op" id="4787441">=</span>&nbsp;<span class="builtintype" id="4787443">uint8</span><span class="op" id="4787448">(</span><span class="ident" id="4787449"><a href="/gostd/compress/gzip/gzip.go.html#4787423">v</a></span>&nbsp;<span class="op" id="4787451">&gt;&gt;</span>&nbsp;<span class="num" id="4787454">0</span><span class="op" id="4787455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787458"><a href="/gostd/compress/gzip/gzip.go.html#4787413">p</a></span><span class="op" id="4787459">[</span><span class="num" id="4787460">1</span><span class="op" id="4787461">]</span>&nbsp;<span class="op" id="4787463">=</span>&nbsp;<span class="builtintype" id="4787465">uint8</span><span class="op" id="4787470">(</span><span class="ident" id="4787471"><a href="/gostd/compress/gzip/gzip.go.html#4787423">v</a></span>&nbsp;<span class="op" id="4787473">&gt;&gt;</span>&nbsp;<span class="num" id="4787476">8</span><span class="op" id="4787477">)</span><br>
<span class="lineno">105</span><span class="op" id="4787479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4787482">func</span>&nbsp;<span class="ident" id="4787487">put4</span><span class="op" id="4787491">(</span><span class="ident" id="4787492">p</span>&nbsp;<span class="op" id="4787494">[</span><span class="op" id="4787495">]</span><span class="builtintype" id="4787496">byte</span><span class="op" id="4787500">,</span>&nbsp;<span class="ident" id="4787502">v</span>&nbsp;<span class="builtintype" id="4787504">uint32</span><span class="op" id="4787510">)</span>&nbsp;<span class="op" id="4787512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787515"><a href="/gostd/compress/gzip/gzip.go.html#4787492">p</a></span><span class="op" id="4787516">[</span><span class="num" id="4787517">0</span><span class="op" id="4787518">]</span>&nbsp;<span class="op" id="4787520">=</span>&nbsp;<span class="builtintype" id="4787522">uint8</span><span class="op" id="4787527">(</span><span class="ident" id="4787528"><a href="/gostd/compress/gzip/gzip.go.html#4787502">v</a></span>&nbsp;<span class="op" id="4787530">&gt;&gt;</span>&nbsp;<span class="num" id="4787533">0</span><span class="op" id="4787534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787537"><a href="/gostd/compress/gzip/gzip.go.html#4787492">p</a></span><span class="op" id="4787538">[</span><span class="num" id="4787539">1</span><span class="op" id="4787540">]</span>&nbsp;<span class="op" id="4787542">=</span>&nbsp;<span class="builtintype" id="4787544">uint8</span><span class="op" id="4787549">(</span><span class="ident" id="4787550"><a href="/gostd/compress/gzip/gzip.go.html#4787502">v</a></span>&nbsp;<span class="op" id="4787552">&gt;&gt;</span>&nbsp;<span class="num" id="4787555">8</span><span class="op" id="4787556">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787559"><a href="/gostd/compress/gzip/gzip.go.html#4787492">p</a></span><span class="op" id="4787560">[</span><span class="num" id="4787561">2</span><span class="op" id="4787562">]</span>&nbsp;<span class="op" id="4787564">=</span>&nbsp;<span class="builtintype" id="4787566">uint8</span><span class="op" id="4787571">(</span><span class="ident" id="4787572"><a href="/gostd/compress/gzip/gzip.go.html#4787502">v</a></span>&nbsp;<span class="op" id="4787574">&gt;&gt;</span>&nbsp;<span class="num" id="4787577">16</span><span class="op" id="4787579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787582"><a href="/gostd/compress/gzip/gzip.go.html#4787492">p</a></span><span class="op" id="4787583">[</span><span class="num" id="4787584">3</span><span class="op" id="4787585">]</span>&nbsp;<span class="op" id="4787587">=</span>&nbsp;<span class="builtintype" id="4787589">uint8</span><span class="op" id="4787594">(</span><span class="ident" id="4787595"><a href="/gostd/compress/gzip/gzip.go.html#4787502">v</a></span>&nbsp;<span class="op" id="4787597">&gt;&gt;</span>&nbsp;<span class="num" id="4787600">24</span><span class="op" id="4787602">)</span><br>
<span class="lineno"></span><span class="op" id="4787604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4787607">//&nbsp;writeBytes&nbsp;writes&nbsp;a&nbsp;length-prefixed&nbsp;byte&nbsp;slice&nbsp;to&nbsp;z.w.</span><br>
<span class="lineno">115</span><span class="keyword" id="4787665">func</span>&nbsp;<span class="op" id="4787670">(</span><span class="ident" id="4787671">z</span>&nbsp;<span class="op" id="4787673">*</span><span class="ident" id="4787674"><a href="/gostd/compress/gzip/gzip.go.html#4785226">Writer</a></span><span class="op" id="4787680">)</span>&nbsp;<span class="ident" id="4787682">writeBytes</span><span class="op" id="4787692">(</span><span class="ident" id="4787693">b</span>&nbsp;<span class="op" id="4787695">[</span><span class="op" id="4787696">]</span><span class="builtintype" id="4787697">byte</span><span class="op" id="4787701">)</span>&nbsp;<span class="builtintype" id="4787703">error</span>&nbsp;<span class="op" id="4787709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787712">if</span>&nbsp;<span class="builtinfunc" id="4787715">len</span><span class="op" id="4787718">(</span><span class="ident" id="4787719"><a href="/gostd/compress/gzip/gzip.go.html#4787693">b</a></span><span class="op" id="4787720">)</span>&nbsp;<span class="op" id="4787722">&gt;</span>&nbsp;<span class="num" id="4787724">0xffff</span>&nbsp;<span class="op" id="4787731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787735">return</span>&nbsp;<span class="ident" id="4787742"><a href="/gostd/compress/gzip/gzip.go.html#4784757">errors</a></span><span class="op" id="4787748">.</span><span class="ident" id="4787749"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4787752">(</span><span class="string" id="4787753">&#34;gzip.Write:&nbsp;Extra&nbsp;data&nbsp;is&nbsp;too&nbsp;large&#34;</span><span class="op" id="4787790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4787793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787796"><a href="/gostd/compress/gzip/gzip.go.html#4787408">put2</a></span><span class="op" id="4787800">(</span><span class="ident" id="4787801"><a href="/gostd/compress/gzip/gzip.go.html#4787671">z</a></span><span class="op" id="4787802">.</span><span class="ident" id="4787803"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4787806">[</span><span class="num" id="4787807">0</span><span class="op" id="4787808">:</span><span class="num" id="4787809">2</span><span class="op" id="4787810">]</span><span class="op" id="4787811">,</span>&nbsp;<span class="builtintype" id="4787813">uint16</span><span class="op" id="4787819">(</span><span class="builtinfunc" id="4787820">len</span><span class="op" id="4787823">(</span><span class="ident" id="4787824"><a href="/gostd/compress/gzip/gzip.go.html#4787693">b</a></span><span class="op" id="4787825">)</span><span class="op" id="4787826">)</span><span class="op" id="4787827">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787830">_</span><span class="op" id="4787831">,</span>&nbsp;<span class="ident" id="4787833">err</span>&nbsp;<span class="op" id="4787837">:=</span>&nbsp;<span class="ident" id="4787840"><a href="/gostd/compress/gzip/gzip.go.html#4787671">z</a></span><span class="op" id="4787841">.</span><span class="ident" id="4787842"><a href="/gostd/compress/gzip/gzip.go.html#4785251">w</a></span><span class="op" id="4787843">.</span><span class="ident" id="4787844"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="4787849">(</span><span class="ident" id="4787850"><a href="/gostd/compress/gzip/gzip.go.html#4787671">z</a></span><span class="op" id="4787851">.</span><span class="ident" id="4787852"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4787855">[</span><span class="num" id="4787856">0</span><span class="op" id="4787857">:</span><span class="num" id="4787858">2</span><span class="op" id="4787859">]</span><span class="op" id="4787860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787863">if</span>&nbsp;<span class="ident" id="4787866"><a href="/gostd/compress/gzip/gzip.go.html#4787833">err</a></span>&nbsp;<span class="op" id="4787870">!=</span>&nbsp;<span class="builtintype" id="4787873">nil</span>&nbsp;<span class="op" id="4787877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787881">return</span>&nbsp;<span class="ident" id="4787888"><a href="/gostd/compress/gzip/gzip.go.html#4787833">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4787893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787896">_</span><span class="op" id="4787897">,</span>&nbsp;<span class="ident" id="4787899"><a href="/gostd/compress/gzip/gzip.go.html#4787833">err</a></span>&nbsp;<span class="op" id="4787903">=</span>&nbsp;<span class="ident" id="4787905"><a href="/gostd/compress/gzip/gzip.go.html#4787671">z</a></span><span class="op" id="4787906">.</span><span class="ident" id="4787907"><a href="/gostd/compress/gzip/gzip.go.html#4785251">w</a></span><span class="op" id="4787908">.</span><span class="ident" id="4787909"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="4787914">(</span><span class="ident" id="4787915"><a href="/gostd/compress/gzip/gzip.go.html#4787693">b</a></span><span class="op" id="4787916">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787919">return</span>&nbsp;<span class="ident" id="4787926"><a href="/gostd/compress/gzip/gzip.go.html#4787833">err</a></span><br>
<span class="lineno"></span><span class="op" id="4787930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4787933">//&nbsp;writeString&nbsp;writes&nbsp;a&nbsp;UTF-8&nbsp;string&nbsp;s&nbsp;in&nbsp;GZIP&#39;s&nbsp;format&nbsp;to&nbsp;z.w.</span><br>
<span class="lineno"></span><span class="comment" id="4787997">//&nbsp;GZIP&nbsp;(RFC&nbsp;1952)&nbsp;specifies&nbsp;that&nbsp;strings&nbsp;are&nbsp;NUL-terminated&nbsp;ISO&nbsp;8859-1&nbsp;(Latin-1).</span><br>
<span class="lineno">130</span><span class="keyword" id="4788080">func</span>&nbsp;<span class="op" id="4788085">(</span><span class="ident" id="4788086">z</span>&nbsp;<span class="op" id="4788088">*</span><span class="ident" id="4788089"><a href="/gostd/compress/gzip/gzip.go.html#4785226">Writer</a></span><span class="op" id="4788095">)</span>&nbsp;<span class="ident" id="4788097">writeString</span><span class="op" id="4788108">(</span><span class="ident" id="4788109">s</span>&nbsp;<span class="builtintype" id="4788111">string</span><span class="op" id="4788117">)</span>&nbsp;<span class="op" id="4788119">(</span><span class="ident" id="4788120">err</span>&nbsp;<span class="builtintype" id="4788124">error</span><span class="op" id="4788129">)</span>&nbsp;<span class="op" id="4788131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4788134">//&nbsp;GZIP&nbsp;stores&nbsp;Latin-1&nbsp;strings;&nbsp;error&nbsp;if&nbsp;non-Latin-1;&nbsp;convert&nbsp;if&nbsp;non-ASCII.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4788211">needconv</span>&nbsp;<span class="op" id="4788220">:=</span>&nbsp;<span class="builtintype" id="4788223">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788230">for</span>&nbsp;<span class="ident" id="4788234">_</span><span class="op" id="4788235">,</span>&nbsp;<span class="ident" id="4788237">v</span>&nbsp;<span class="op" id="4788239">:=</span>&nbsp;<span class="keyword" id="4788242">range</span>&nbsp;<span class="ident" id="4788248"><a href="/gostd/compress/gzip/gzip.go.html#4788109">s</a></span>&nbsp;<span class="op" id="4788250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788254">if</span>&nbsp;<span class="ident" id="4788257"><a href="/gostd/compress/gzip/gzip.go.html#4788237">v</a></span>&nbsp;<span class="op" id="4788259">==</span>&nbsp;<span class="num" id="4788262">0</span>&nbsp;<span class="op" id="4788264">||</span>&nbsp;<span class="ident" id="4788267"><a href="/gostd/compress/gzip/gzip.go.html#4788237">v</a></span>&nbsp;<span class="op" id="4788269">&gt;</span>&nbsp;<span class="num" id="4788271">0xff</span>&nbsp;<span class="op" id="4788276">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788281">return</span>&nbsp;<span class="ident" id="4788288"><a href="/gostd/compress/gzip/gzip.go.html#4784757">errors</a></span><span class="op" id="4788294">.</span><span class="ident" id="4788295"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4788298">(</span><span class="string" id="4788299">&#34;gzip.Write:&nbsp;non-Latin-1&nbsp;header&nbsp;string&#34;</span><span class="op" id="4788338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4788342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788346">if</span>&nbsp;<span class="ident" id="4788349"><a href="/gostd/compress/gzip/gzip.go.html#4788237">v</a></span>&nbsp;<span class="op" id="4788351">&gt;</span>&nbsp;<span class="num" id="4788353">0x7f</span>&nbsp;<span class="op" id="4788358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4788363"><a href="/gostd/compress/gzip/gzip.go.html#4788211">needconv</a></span>&nbsp;<span class="op" id="4788372">=</span>&nbsp;<span class="builtintype" id="4788374">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4788381">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4788384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788387">if</span>&nbsp;<span class="ident" id="4788390"><a href="/gostd/compress/gzip/gzip.go.html#4788211">needconv</a></span>&nbsp;<span class="op" id="4788399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4788403">b</span>&nbsp;<span class="op" id="4788405">:=</span>&nbsp;<span class="builtinfunc" id="4788408">make</span><span class="op" id="4788412">(</span><span class="op" id="4788413">[</span><span class="op" id="4788414">]</span><span class="builtintype" id="4788415">byte</span><span class="op" id="4788419">,</span>&nbsp;<span class="num" id="4788421">0</span><span class="op" id="4788422">,</span>&nbsp;<span class="builtinfunc" id="4788424">len</span><span class="op" id="4788427">(</span><span class="ident" id="4788428"><a href="/gostd/compress/gzip/gzip.go.html#4788109">s</a></span><span class="op" id="4788429">)</span><span class="op" id="4788430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788434">for</span>&nbsp;<span class="ident" id="4788438">_</span><span class="op" id="4788439">,</span>&nbsp;<span class="ident" id="4788441">v</span>&nbsp;<span class="op" id="4788443">:=</span>&nbsp;<span class="keyword" id="4788446">range</span>&nbsp;<span class="ident" id="4788452"><a href="/gostd/compress/gzip/gzip.go.html#4788109">s</a></span>&nbsp;<span class="op" id="4788454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4788459"><a href="/gostd/compress/gzip/gzip.go.html#4788403">b</a></span>&nbsp;<span class="op" id="4788461">=</span>&nbsp;<span class="builtinfunc" id="4788463">append</span><span class="op" id="4788469">(</span><span class="ident" id="4788470"><a href="/gostd/compress/gzip/gzip.go.html#4788403">b</a></span><span class="op" id="4788471">,</span>&nbsp;<span class="builtintype" id="4788473">byte</span><span class="op" id="4788477">(</span><span class="ident" id="4788478"><a href="/gostd/compress/gzip/gzip.go.html#4788441">v</a></span><span class="op" id="4788479">)</span><span class="op" id="4788480">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4788484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4788488">_</span><span class="op" id="4788489">,</span>&nbsp;<span class="ident" id="4788491"><a href="/gostd/compress/gzip/gzip.go.html#4788120">err</a></span>&nbsp;<span class="op" id="4788495">=</span>&nbsp;<span class="ident" id="4788497"><a href="/gostd/compress/gzip/gzip.go.html#4788086">z</a></span><span class="op" id="4788498">.</span><span class="ident" id="4788499"><a href="/gostd/compress/gzip/gzip.go.html#4785251">w</a></span><span class="op" id="4788500">.</span><span class="ident" id="4788501"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="4788506">(</span><span class="ident" id="4788507"><a href="/gostd/compress/gzip/gzip.go.html#4788403">b</a></span><span class="op" id="4788508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4788511">}</span>&nbsp;<span class="keyword" id="4788513">else</span>&nbsp;<span class="op" id="4788518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4788522">_</span><span class="op" id="4788523">,</span>&nbsp;<span class="ident" id="4788525"><a href="/gostd/compress/gzip/gzip.go.html#4788120">err</a></span>&nbsp;<span class="op" id="4788529">=</span>&nbsp;<span class="ident" id="4788531"><a href="/gostd/compress/gzip/gzip.go.html#4784796">io</a></span><span class="op" id="4788533">.</span><span class="ident" id="4788534"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="4788545">(</span><span class="ident" id="4788546"><a href="/gostd/compress/gzip/gzip.go.html#4788086">z</a></span><span class="op" id="4788547">.</span><span class="ident" id="4788548"><a href="/gostd/compress/gzip/gzip.go.html#4785251">w</a></span><span class="op" id="4788549">,</span>&nbsp;<span class="ident" id="4788551"><a href="/gostd/compress/gzip/gzip.go.html#4788109">s</a></span><span class="op" id="4788552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4788555">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788558">if</span>&nbsp;<span class="ident" id="4788561"><a href="/gostd/compress/gzip/gzip.go.html#4788120">err</a></span>&nbsp;<span class="op" id="4788565">!=</span>&nbsp;<span class="builtintype" id="4788568">nil</span>&nbsp;<span class="op" id="4788572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788576">return</span>&nbsp;<span class="ident" id="4788583"><a href="/gostd/compress/gzip/gzip.go.html#4788120">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4788588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4788591">//&nbsp;GZIP&nbsp;strings&nbsp;are&nbsp;NUL-terminated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4788628"><a href="/gostd/compress/gzip/gzip.go.html#4788086">z</a></span><span class="op" id="4788629">.</span><span class="ident" id="4788630"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4788633">[</span><span class="num" id="4788634">0</span><span class="op" id="4788635">]</span>&nbsp;<span class="op" id="4788637">=</span>&nbsp;<span class="num" id="4788639">0</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4788642">_</span><span class="op" id="4788643">,</span>&nbsp;<span class="ident" id="4788645"><a href="/gostd/compress/gzip/gzip.go.html#4788120">err</a></span>&nbsp;<span class="op" id="4788649">=</span>&nbsp;<span class="ident" id="4788651"><a href="/gostd/compress/gzip/gzip.go.html#4788086">z</a></span><span class="op" id="4788652">.</span><span class="ident" id="4788653"><a href="/gostd/compress/gzip/gzip.go.html#4785251">w</a></span><span class="op" id="4788654">.</span><span class="ident" id="4788655"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="4788660">(</span><span class="ident" id="4788661"><a href="/gostd/compress/gzip/gzip.go.html#4788086">z</a></span><span class="op" id="4788662">.</span><span class="ident" id="4788663"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4788666">[</span><span class="num" id="4788667">0</span><span class="op" id="4788668">:</span><span class="num" id="4788669">1</span><span class="op" id="4788670">]</span><span class="op" id="4788671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788674">return</span>&nbsp;<span class="ident" id="4788681"><a href="/gostd/compress/gzip/gzip.go.html#4788120">err</a></span><br>
<span class="lineno"></span><span class="op" id="4788685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4788688">//&nbsp;Write&nbsp;writes&nbsp;a&nbsp;compressed&nbsp;form&nbsp;of&nbsp;p&nbsp;to&nbsp;the&nbsp;underlying&nbsp;io.Writer.&nbsp;The</span><br>
<span class="lineno">160</span><span class="comment" id="4788760">//&nbsp;compressed&nbsp;bytes&nbsp;are&nbsp;not&nbsp;necessarily&nbsp;flushed&nbsp;until&nbsp;the&nbsp;Writer&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="4788836">func</span>&nbsp;<span class="op" id="4788841">(</span><span class="ident" id="4788842">z</span>&nbsp;<span class="op" id="4788844">*</span><span class="ident" id="4788845"><a href="/gostd/compress/gzip/gzip.go.html#4785226">Writer</a></span><span class="op" id="4788851">)</span>&nbsp;<span class="ident" id="4788853">Write</span><span class="op" id="4788858">(</span><span class="ident" id="4788859">p</span>&nbsp;<span class="op" id="4788861">[</span><span class="op" id="4788862">]</span><span class="builtintype" id="4788863">byte</span><span class="op" id="4788867">)</span>&nbsp;<span class="op" id="4788869">(</span><span class="builtintype" id="4788870">int</span><span class="op" id="4788873">,</span>&nbsp;<span class="builtintype" id="4788875">error</span><span class="op" id="4788880">)</span>&nbsp;<span class="op" id="4788882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788885">if</span>&nbsp;<span class="ident" id="4788888"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4788889">.</span><span class="ident" id="4788890"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4788894">!=</span>&nbsp;<span class="builtintype" id="4788897">nil</span>&nbsp;<span class="op" id="4788901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788905">return</span>&nbsp;<span class="num" id="4788912">0</span><span class="op" id="4788913">,</span>&nbsp;<span class="ident" id="4788915"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4788916">.</span><span class="ident" id="4788917"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4788922">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788925">var</span>&nbsp;<span class="ident" id="4788929">n</span>&nbsp;<span class="builtintype" id="4788931">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4788936">//&nbsp;Write&nbsp;the&nbsp;GZIP&nbsp;header&nbsp;lazily.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4788970">if</span>&nbsp;<span class="op" id="4788973">!</span><span class="ident" id="4788974"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4788975">.</span><span class="ident" id="4788976"><a href="/gostd/compress/gzip/gzip.go.html#4785291">wroteHeader</a></span>&nbsp;<span class="op" id="4788988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4788992"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4788993">.</span><span class="ident" id="4788994"><a href="/gostd/compress/gzip/gzip.go.html#4785291">wroteHeader</a></span>&nbsp;<span class="op" id="4789006">=</span>&nbsp;<span class="builtintype" id="4789008">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789015"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789016">.</span><span class="ident" id="4789017"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789020">[</span><span class="num" id="4789021">0</span><span class="op" id="4789022">]</span>&nbsp;<span class="op" id="4789024">=</span>&nbsp;<span class="ident" id="4789026"><a href="/gostd/compress/gzip/gunzip.go.html#4777705">gzipID1</a></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789036"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789037">.</span><span class="ident" id="4789038"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789041">[</span><span class="num" id="4789042">1</span><span class="op" id="4789043">]</span>&nbsp;<span class="op" id="4789045">=</span>&nbsp;<span class="ident" id="4789047"><a href="/gostd/compress/gzip/gunzip.go.html#4777725">gzipID2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789057"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789058">.</span><span class="ident" id="4789059"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789062">[</span><span class="num" id="4789063">2</span><span class="op" id="4789064">]</span>&nbsp;<span class="op" id="4789066">=</span>&nbsp;<span class="ident" id="4789068"><a href="/gostd/compress/gzip/gunzip.go.html#4777745">gzipDeflate</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789082"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789083">.</span><span class="ident" id="4789084"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789087">[</span><span class="num" id="4789088">3</span><span class="op" id="4789089">]</span>&nbsp;<span class="op" id="4789091">=</span>&nbsp;<span class="num" id="4789093">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789097">if</span>&nbsp;<span class="ident" id="4789100"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789101">.</span><span class="ident" id="4789102"><a href="/gostd/compress/gzip/gunzip.go.html#4778469">Extra</a></span>&nbsp;<span class="op" id="4789108">!=</span>&nbsp;<span class="builtintype" id="4789111">nil</span>&nbsp;<span class="op" id="4789115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789120"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789121">.</span><span class="ident" id="4789122"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789125">[</span><span class="num" id="4789126">3</span><span class="op" id="4789127">]</span>&nbsp;<span class="op" id="4789129">|=</span>&nbsp;<span class="num" id="4789132">0x04</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789143">if</span>&nbsp;<span class="ident" id="4789146"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789147">.</span><span class="ident" id="4789148"><a href="/gostd/compress/gzip/gunzip.go.html#4778544">Name</a></span>&nbsp;<span class="op" id="4789153">!=</span>&nbsp;<span class="string" id="4789156">&#34;&#34;</span>&nbsp;<span class="op" id="4789159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789164"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789165">.</span><span class="ident" id="4789166"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789169">[</span><span class="num" id="4789170">3</span><span class="op" id="4789171">]</span>&nbsp;<span class="op" id="4789173">|=</span>&nbsp;<span class="num" id="4789176">0x08</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789187">if</span>&nbsp;<span class="ident" id="4789190"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789191">.</span><span class="ident" id="4789192"><a href="/gostd/compress/gzip/gunzip.go.html#4778439">Comment</a></span>&nbsp;<span class="op" id="4789200">!=</span>&nbsp;<span class="string" id="4789203">&#34;&#34;</span>&nbsp;<span class="op" id="4789206">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789211"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789212">.</span><span class="ident" id="4789213"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789216">[</span><span class="num" id="4789217">3</span><span class="op" id="4789218">]</span>&nbsp;<span class="op" id="4789220">|=</span>&nbsp;<span class="num" id="4789223">0x10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789234"><a href="/gostd/compress/gzip/gzip.go.html#4787487">put4</a></span><span class="op" id="4789238">(</span><span class="ident" id="4789239"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789240">.</span><span class="ident" id="4789241"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789244">[</span><span class="num" id="4789245">4</span><span class="op" id="4789246">:</span><span class="num" id="4789247">8</span><span class="op" id="4789248">]</span><span class="op" id="4789249">,</span>&nbsp;<span class="builtintype" id="4789251">uint32</span><span class="op" id="4789257">(</span><span class="ident" id="4789258"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789259">.</span><span class="ident" id="4789260"><a href="/gostd/compress/gzip/gunzip.go.html#4778504">ModTime</a></span><span class="op" id="4789267">.</span><span class="ident" id="4789268"><a href="/gostd/time/time.go.html#2744150">Unix</a></span><span class="op" id="4789272">(</span><span class="op" id="4789273">)</span><span class="op" id="4789274">)</span><span class="op" id="4789275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789279">if</span>&nbsp;<span class="ident" id="4789282"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789283">.</span><span class="ident" id="4789284"><a href="/gostd/compress/gzip/gzip.go.html#4785274">level</a></span>&nbsp;<span class="op" id="4789290">==</span>&nbsp;<span class="ident" id="4789293"><a href="/gostd/compress/gzip/gzip.go.html#4785039">BestCompression</a></span>&nbsp;<span class="op" id="4789309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789314"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789315">.</span><span class="ident" id="4789316"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789319">[</span><span class="num" id="4789320">8</span><span class="op" id="4789321">]</span>&nbsp;<span class="op" id="4789323">=</span>&nbsp;<span class="num" id="4789325">2</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789329">}</span>&nbsp;<span class="keyword" id="4789331">else</span>&nbsp;<span class="keyword" id="4789336">if</span>&nbsp;<span class="ident" id="4789339"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789340">.</span><span class="ident" id="4789341"><a href="/gostd/compress/gzip/gzip.go.html#4785274">level</a></span>&nbsp;<span class="op" id="4789347">==</span>&nbsp;<span class="ident" id="4789350"><a href="/gostd/compress/gzip/gzip.go.html#4785001">BestSpeed</a></span>&nbsp;<span class="op" id="4789360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789365"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789366">.</span><span class="ident" id="4789367"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789370">[</span><span class="num" id="4789371">8</span><span class="op" id="4789372">]</span>&nbsp;<span class="op" id="4789374">=</span>&nbsp;<span class="num" id="4789376">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789380">}</span>&nbsp;<span class="keyword" id="4789382">else</span>&nbsp;<span class="op" id="4789387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789392"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789393">.</span><span class="ident" id="4789394"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789397">[</span><span class="num" id="4789398">8</span><span class="op" id="4789399">]</span>&nbsp;<span class="op" id="4789401">=</span>&nbsp;<span class="num" id="4789403">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789407">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789411"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789412">.</span><span class="ident" id="4789413"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789416">[</span><span class="num" id="4789417">9</span><span class="op" id="4789418">]</span>&nbsp;<span class="op" id="4789420">=</span>&nbsp;<span class="ident" id="4789422"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789423">.</span><span class="ident" id="4789424"><a href="/gostd/compress/gzip/gunzip.go.html#4778576">OS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789429"><a href="/gostd/compress/gzip/gzip.go.html#4788929">n</a></span><span class="op" id="4789430">,</span>&nbsp;<span class="ident" id="4789432"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789433">.</span><span class="ident" id="4789434"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4789438">=</span>&nbsp;<span class="ident" id="4789440"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789441">.</span><span class="ident" id="4789442"><a href="/gostd/compress/gzip/gzip.go.html#4785251">w</a></span><span class="op" id="4789443">.</span><span class="ident" id="4789444"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="4789449">(</span><span class="ident" id="4789450"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789451">.</span><span class="ident" id="4789452"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4789455">[</span><span class="num" id="4789456">0</span><span class="op" id="4789457">:</span><span class="num" id="4789458">10</span><span class="op" id="4789460">]</span><span class="op" id="4789461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789465">if</span>&nbsp;<span class="ident" id="4789468"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789469">.</span><span class="ident" id="4789470"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4789474">!=</span>&nbsp;<span class="builtintype" id="4789477">nil</span>&nbsp;<span class="op" id="4789481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789486">return</span>&nbsp;<span class="ident" id="4789493"><a href="/gostd/compress/gzip/gzip.go.html#4788929">n</a></span><span class="op" id="4789494">,</span>&nbsp;<span class="ident" id="4789496"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789497">.</span><span class="ident" id="4789498"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789504">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789508">if</span>&nbsp;<span class="ident" id="4789511"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789512">.</span><span class="ident" id="4789513"><a href="/gostd/compress/gzip/gunzip.go.html#4778469">Extra</a></span>&nbsp;<span class="op" id="4789519">!=</span>&nbsp;<span class="builtintype" id="4789522">nil</span>&nbsp;<span class="op" id="4789526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789531"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789532">.</span><span class="ident" id="4789533"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4789537">=</span>&nbsp;<span class="ident" id="4789539"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789540">.</span><span class="ident" id="4789541"><a href="/gostd/compress/gzip/gzip.go.html#4787682">writeBytes</a></span><span class="op" id="4789551">(</span><span class="ident" id="4789552"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789553">.</span><span class="ident" id="4789554"><a href="/gostd/compress/gzip/gunzip.go.html#4778469">Extra</a></span><span class="op" id="4789559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789564">if</span>&nbsp;<span class="ident" id="4789567"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789568">.</span><span class="ident" id="4789569"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4789573">!=</span>&nbsp;<span class="builtintype" id="4789576">nil</span>&nbsp;<span class="op" id="4789580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789586">return</span>&nbsp;<span class="ident" id="4789593"><a href="/gostd/compress/gzip/gzip.go.html#4788929">n</a></span><span class="op" id="4789594">,</span>&nbsp;<span class="ident" id="4789596"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789597">.</span><span class="ident" id="4789598"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789605">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789613">if</span>&nbsp;<span class="ident" id="4789616"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789617">.</span><span class="ident" id="4789618"><a href="/gostd/compress/gzip/gunzip.go.html#4778544">Name</a></span>&nbsp;<span class="op" id="4789623">!=</span>&nbsp;<span class="string" id="4789626">&#34;&#34;</span>&nbsp;<span class="op" id="4789629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789634"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789635">.</span><span class="ident" id="4789636"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4789640">=</span>&nbsp;<span class="ident" id="4789642"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789643">.</span><span class="ident" id="4789644"><a href="/gostd/compress/gzip/gzip.go.html#4788097">writeString</a></span><span class="op" id="4789655">(</span><span class="ident" id="4789656"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789657">.</span><span class="ident" id="4789658"><a href="/gostd/compress/gzip/gunzip.go.html#4778544">Name</a></span><span class="op" id="4789662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789667">if</span>&nbsp;<span class="ident" id="4789670"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789671">.</span><span class="ident" id="4789672"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4789676">!=</span>&nbsp;<span class="builtintype" id="4789679">nil</span>&nbsp;<span class="op" id="4789683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789689">return</span>&nbsp;<span class="ident" id="4789696"><a href="/gostd/compress/gzip/gzip.go.html#4788929">n</a></span><span class="op" id="4789697">,</span>&nbsp;<span class="ident" id="4789699"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789700">.</span><span class="ident" id="4789701"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789716">if</span>&nbsp;<span class="ident" id="4789719"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789720">.</span><span class="ident" id="4789721"><a href="/gostd/compress/gzip/gunzip.go.html#4778439">Comment</a></span>&nbsp;<span class="op" id="4789729">!=</span>&nbsp;<span class="string" id="4789732">&#34;&#34;</span>&nbsp;<span class="op" id="4789735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789740"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789741">.</span><span class="ident" id="4789742"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4789746">=</span>&nbsp;<span class="ident" id="4789748"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789749">.</span><span class="ident" id="4789750"><a href="/gostd/compress/gzip/gzip.go.html#4788097">writeString</a></span><span class="op" id="4789761">(</span><span class="ident" id="4789762"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789763">.</span><span class="ident" id="4789764"><a href="/gostd/compress/gzip/gunzip.go.html#4778439">Comment</a></span><span class="op" id="4789771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789776">if</span>&nbsp;<span class="ident" id="4789779"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789780">.</span><span class="ident" id="4789781"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4789785">!=</span>&nbsp;<span class="builtintype" id="4789788">nil</span>&nbsp;<span class="op" id="4789792">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789798">return</span>&nbsp;<span class="ident" id="4789805"><a href="/gostd/compress/gzip/gzip.go.html#4788929">n</a></span><span class="op" id="4789806">,</span>&nbsp;<span class="ident" id="4789808"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789809">.</span><span class="ident" id="4789810"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789825">if</span>&nbsp;<span class="ident" id="4789828"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789829">.</span><span class="ident" id="4789830"><a href="/gostd/compress/gzip/gzip.go.html#4785309">compressor</a></span>&nbsp;<span class="op" id="4789841">==</span>&nbsp;<span class="builtintype" id="4789844">nil</span>&nbsp;<span class="op" id="4789848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789853"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789854">.</span><span class="ident" id="4789855"><a href="/gostd/compress/gzip/gzip.go.html#4785309">compressor</a></span><span class="op" id="4789865">,</span>&nbsp;<span class="ident" id="4789867">_</span>&nbsp;<span class="op" id="4789869">=</span>&nbsp;<span class="ident" id="4789871"><a href="/gostd/compress/gzip/gzip.go.html#4784739">flate</a></span><span class="op" id="4789876">.</span><span class="ident" id="4789877"><a href="/gostd/compress/flate/deflate.go.html#4804908">NewWriter</a></span><span class="op" id="4789886">(</span><span class="ident" id="4789887"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789888">.</span><span class="ident" id="4789889"><a href="/gostd/compress/gzip/gzip.go.html#4785251">w</a></span><span class="op" id="4789890">,</span>&nbsp;<span class="ident" id="4789892"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789893">.</span><span class="ident" id="4789894"><a href="/gostd/compress/gzip/gzip.go.html#4785274">level</a></span><span class="op" id="4789899">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789909"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789910">.</span><span class="ident" id="4789911"><a href="/gostd/compress/gzip/gzip.go.html#4785361">size</a></span>&nbsp;<span class="op" id="4789916">+=</span>&nbsp;<span class="builtintype" id="4789919">uint32</span><span class="op" id="4789925">(</span><span class="builtinfunc" id="4789926">len</span><span class="op" id="4789929">(</span><span class="ident" id="4789930"><a href="/gostd/compress/gzip/gzip.go.html#4788859">p</a></span><span class="op" id="4789931">)</span><span class="op" id="4789932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789935"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789936">.</span><span class="ident" id="4789937"><a href="/gostd/compress/gzip/gzip.go.html#4785336">digest</a></span><span class="op" id="4789943">.</span><span class="ident" id="4789944"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="4789949">(</span><span class="ident" id="4789950"><a href="/gostd/compress/gzip/gzip.go.html#4788859">p</a></span><span class="op" id="4789951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789954"><a href="/gostd/compress/gzip/gzip.go.html#4788929">n</a></span><span class="op" id="4789955">,</span>&nbsp;<span class="ident" id="4789957"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789958">.</span><span class="ident" id="4789959"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4789963">=</span>&nbsp;<span class="ident" id="4789965"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789966">.</span><span class="ident" id="4789967"><a href="/gostd/compress/gzip/gzip.go.html#4785309">compressor</a></span><span class="op" id="4789977">.</span><span class="ident" id="4789978"><a href="/gostd/compress/flate/deflate.go.html#4806202">Write</a></span><span class="op" id="4789983">(</span><span class="ident" id="4789984"><a href="/gostd/compress/gzip/gzip.go.html#4788859">p</a></span><span class="op" id="4789985">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789988">return</span>&nbsp;<span class="ident" id="4789995"><a href="/gostd/compress/gzip/gzip.go.html#4788929">n</a></span><span class="op" id="4789996">,</span>&nbsp;<span class="ident" id="4789998"><a href="/gostd/compress/gzip/gzip.go.html#4788842">z</a></span><span class="op" id="4789999">.</span><span class="ident" id="4790000"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno"></span><span class="op" id="4790004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4790007">//&nbsp;Flush&nbsp;flushes&nbsp;any&nbsp;pending&nbsp;compressed&nbsp;data&nbsp;to&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno"></span><span class="comment" id="4790078">//</span><br>
<span class="lineno">225</span><span class="comment" id="4790081">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;mainly&nbsp;in&nbsp;compressed&nbsp;network&nbsp;protocols,&nbsp;to&nbsp;ensure&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4790152">//&nbsp;a&nbsp;remote&nbsp;reader&nbsp;has&nbsp;enough&nbsp;data&nbsp;to&nbsp;reconstruct&nbsp;a&nbsp;packet.&nbsp;Flush&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="4790223">//&nbsp;not&nbsp;return&nbsp;until&nbsp;the&nbsp;data&nbsp;has&nbsp;been&nbsp;written.&nbsp;If&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="4790288">//&nbsp;writer&nbsp;returns&nbsp;an&nbsp;error,&nbsp;Flush&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="4790342">//</span><br>
<span class="lineno">230</span><span class="comment" id="4790345">//&nbsp;In&nbsp;the&nbsp;terminology&nbsp;of&nbsp;the&nbsp;zlib&nbsp;library,&nbsp;Flush&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Z_SYNC_FLUSH.</span><br>
<span class="lineno"></span><span class="keyword" id="4790425">func</span>&nbsp;<span class="op" id="4790430">(</span><span class="ident" id="4790431">z</span>&nbsp;<span class="op" id="4790433">*</span><span class="ident" id="4790434"><a href="/gostd/compress/gzip/gzip.go.html#4785226">Writer</a></span><span class="op" id="4790440">)</span>&nbsp;<span class="ident" id="4790442">Flush</span><span class="op" id="4790447">(</span><span class="op" id="4790448">)</span>&nbsp;<span class="builtintype" id="4790450">error</span>&nbsp;<span class="op" id="4790456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790459">if</span>&nbsp;<span class="ident" id="4790462"><a href="/gostd/compress/gzip/gzip.go.html#4790431">z</a></span><span class="op" id="4790463">.</span><span class="ident" id="4790464"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4790468">!=</span>&nbsp;<span class="builtintype" id="4790471">nil</span>&nbsp;<span class="op" id="4790475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790479">return</span>&nbsp;<span class="ident" id="4790486"><a href="/gostd/compress/gzip/gzip.go.html#4790431">z</a></span><span class="op" id="4790487">.</span><span class="ident" id="4790488"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790493">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790496">if</span>&nbsp;<span class="ident" id="4790499"><a href="/gostd/compress/gzip/gzip.go.html#4790431">z</a></span><span class="op" id="4790500">.</span><span class="ident" id="4790501"><a href="/gostd/compress/gzip/gzip.go.html#4785381">closed</a></span>&nbsp;<span class="op" id="4790508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790512">return</span>&nbsp;<span class="builtintype" id="4790519">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790527">if</span>&nbsp;<span class="op" id="4790530">!</span><span class="ident" id="4790531"><a href="/gostd/compress/gzip/gzip.go.html#4790431">z</a></span><span class="op" id="4790532">.</span><span class="ident" id="4790533"><a href="/gostd/compress/gzip/gzip.go.html#4785291">wroteHeader</a></span>&nbsp;<span class="op" id="4790545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790549"><a href="/gostd/compress/gzip/gzip.go.html#4790431">z</a></span><span class="op" id="4790550">.</span><span class="ident" id="4790551"><a href="/gostd/compress/gzip/gzip.go.html#4788853">Write</a></span><span class="op" id="4790556">(</span><span class="builtintype" id="4790557">nil</span><span class="op" id="4790560">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790564">if</span>&nbsp;<span class="ident" id="4790567"><a href="/gostd/compress/gzip/gzip.go.html#4790431">z</a></span><span class="op" id="4790568">.</span><span class="ident" id="4790569"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4790573">!=</span>&nbsp;<span class="builtintype" id="4790576">nil</span>&nbsp;<span class="op" id="4790580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790585">return</span>&nbsp;<span class="ident" id="4790592"><a href="/gostd/compress/gzip/gzip.go.html#4790431">z</a></span><span class="op" id="4790593">.</span><span class="ident" id="4790594"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790606"><a href="/gostd/compress/gzip/gzip.go.html#4790431">z</a></span><span class="op" id="4790607">.</span><span class="ident" id="4790608"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4790612">=</span>&nbsp;<span class="ident" id="4790614"><a href="/gostd/compress/gzip/gzip.go.html#4790431">z</a></span><span class="op" id="4790615">.</span><span class="ident" id="4790616"><a href="/gostd/compress/gzip/gzip.go.html#4785309">compressor</a></span><span class="op" id="4790626">.</span><span class="ident" id="4790627"><a href="/gostd/compress/flate/deflate.go.html#4806701">Flush</a></span><span class="op" id="4790632">(</span><span class="op" id="4790633">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790636">return</span>&nbsp;<span class="ident" id="4790643"><a href="/gostd/compress/gzip/gzip.go.html#4790431">z</a></span><span class="op" id="4790644">.</span><span class="ident" id="4790645"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno"></span><span class="op" id="4790649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4790652">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;Writer,&nbsp;flushing&nbsp;any&nbsp;unwritten&nbsp;data&nbsp;to&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="4790726">//&nbsp;io.Writer,&nbsp;but&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;underlying&nbsp;io.Writer.</span><br>
<span class="lineno">250</span><span class="keyword" id="4790785">func</span>&nbsp;<span class="op" id="4790790">(</span><span class="ident" id="4790791">z</span>&nbsp;<span class="op" id="4790793">*</span><span class="ident" id="4790794"><a href="/gostd/compress/gzip/gzip.go.html#4785226">Writer</a></span><span class="op" id="4790800">)</span>&nbsp;<span class="ident" id="4790802">Close</span><span class="op" id="4790807">(</span><span class="op" id="4790808">)</span>&nbsp;<span class="builtintype" id="4790810">error</span>&nbsp;<span class="op" id="4790816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790819">if</span>&nbsp;<span class="ident" id="4790822"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4790823">.</span><span class="ident" id="4790824"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4790828">!=</span>&nbsp;<span class="builtintype" id="4790831">nil</span>&nbsp;<span class="op" id="4790835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790839">return</span>&nbsp;<span class="ident" id="4790846"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4790847">.</span><span class="ident" id="4790848"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790856">if</span>&nbsp;<span class="ident" id="4790859"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4790860">.</span><span class="ident" id="4790861"><a href="/gostd/compress/gzip/gzip.go.html#4785381">closed</a></span>&nbsp;<span class="op" id="4790868">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790872">return</span>&nbsp;<span class="builtintype" id="4790879">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790887"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4790888">.</span><span class="ident" id="4790889"><a href="/gostd/compress/gzip/gzip.go.html#4785381">closed</a></span>&nbsp;<span class="op" id="4790896">=</span>&nbsp;<span class="builtintype" id="4790898">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790904">if</span>&nbsp;<span class="op" id="4790907">!</span><span class="ident" id="4790908"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4790909">.</span><span class="ident" id="4790910"><a href="/gostd/compress/gzip/gzip.go.html#4785291">wroteHeader</a></span>&nbsp;<span class="op" id="4790922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790926"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4790927">.</span><span class="ident" id="4790928"><a href="/gostd/compress/gzip/gzip.go.html#4788853">Write</a></span><span class="op" id="4790933">(</span><span class="builtintype" id="4790934">nil</span><span class="op" id="4790937">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790941">if</span>&nbsp;<span class="ident" id="4790944"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4790945">.</span><span class="ident" id="4790946"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4790950">!=</span>&nbsp;<span class="builtintype" id="4790953">nil</span>&nbsp;<span class="op" id="4790957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790962">return</span>&nbsp;<span class="ident" id="4790969"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4790970">.</span><span class="ident" id="4790971"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790983"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4790984">.</span><span class="ident" id="4790985"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4790989">=</span>&nbsp;<span class="ident" id="4790991"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4790992">.</span><span class="ident" id="4790993"><a href="/gostd/compress/gzip/gzip.go.html#4785309">compressor</a></span><span class="op" id="4791003">.</span><span class="ident" id="4791004"><a href="/gostd/compress/flate/deflate.go.html#4806882">Close</a></span><span class="op" id="4791009">(</span><span class="op" id="4791010">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791013">if</span>&nbsp;<span class="ident" id="4791016"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4791017">.</span><span class="ident" id="4791018"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4791022">!=</span>&nbsp;<span class="builtintype" id="4791025">nil</span>&nbsp;<span class="op" id="4791029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791033">return</span>&nbsp;<span class="ident" id="4791040"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4791041">.</span><span class="ident" id="4791042"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4791047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791050"><a href="/gostd/compress/gzip/gzip.go.html#4787487">put4</a></span><span class="op" id="4791054">(</span><span class="ident" id="4791055"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4791056">.</span><span class="ident" id="4791057"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4791060">[</span><span class="num" id="4791061">0</span><span class="op" id="4791062">:</span><span class="num" id="4791063">4</span><span class="op" id="4791064">]</span><span class="op" id="4791065">,</span>&nbsp;<span class="ident" id="4791067"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4791068">.</span><span class="ident" id="4791069"><a href="/gostd/compress/gzip/gzip.go.html#4785336">digest</a></span><span class="op" id="4791075">.</span><span class="ident" id="4791076"><a href="/gostd/hash/hash.go.html#3014858">Sum32</a></span><span class="op" id="4791081">(</span><span class="op" id="4791082">)</span><span class="op" id="4791083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791086"><a href="/gostd/compress/gzip/gzip.go.html#4787487">put4</a></span><span class="op" id="4791090">(</span><span class="ident" id="4791091"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4791092">.</span><span class="ident" id="4791093"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4791096">[</span><span class="num" id="4791097">4</span><span class="op" id="4791098">:</span><span class="num" id="4791099">8</span><span class="op" id="4791100">]</span><span class="op" id="4791101">,</span>&nbsp;<span class="ident" id="4791103"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4791104">.</span><span class="ident" id="4791105"><a href="/gostd/compress/gzip/gzip.go.html#4785361">size</a></span><span class="op" id="4791109">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791112">_</span><span class="op" id="4791113">,</span>&nbsp;<span class="ident" id="4791115"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4791116">.</span><span class="ident" id="4791117"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span>&nbsp;<span class="op" id="4791121">=</span>&nbsp;<span class="ident" id="4791123"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4791124">.</span><span class="ident" id="4791125"><a href="/gostd/compress/gzip/gzip.go.html#4785251">w</a></span><span class="op" id="4791126">.</span><span class="ident" id="4791127"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="4791132">(</span><span class="ident" id="4791133"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4791134">.</span><span class="ident" id="4791135"><a href="/gostd/compress/gzip/gzip.go.html#4785399">buf</a></span><span class="op" id="4791138">[</span><span class="num" id="4791139">0</span><span class="op" id="4791140">:</span><span class="num" id="4791141">8</span><span class="op" id="4791142">]</span><span class="op" id="4791143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791146">return</span>&nbsp;<span class="ident" id="4791153"><a href="/gostd/compress/gzip/gzip.go.html#4790791">z</a></span><span class="op" id="4791154">.</span><span class="ident" id="4791155"><a href="/gostd/compress/gzip/gzip.go.html#4785421">err</a></span><br>
<span class="lineno"></span><span class="op" id="4791159">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
