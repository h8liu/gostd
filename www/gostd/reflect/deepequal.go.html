<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html" class="current">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2180622">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2180677">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2180731">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2180782">//&nbsp;Deep&nbsp;equality&nbsp;test&nbsp;via&nbsp;reflection</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2180820">package</span>&nbsp;<span class="ident" id="2180828">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2180837">//&nbsp;During&nbsp;deepValueEqual,&nbsp;must&nbsp;keep&nbsp;track&nbsp;of&nbsp;checks&nbsp;that&nbsp;are</span><br>
<span class="lineno">10</span><span class="comment" id="2180898">//&nbsp;in&nbsp;progress.&nbsp;&nbsp;The&nbsp;comparison&nbsp;algorithm&nbsp;assumes&nbsp;that&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2180957">//&nbsp;checks&nbsp;in&nbsp;progress&nbsp;are&nbsp;true&nbsp;when&nbsp;it&nbsp;reencounters&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="2181015">//&nbsp;Visited&nbsp;comparisons&nbsp;are&nbsp;stored&nbsp;in&nbsp;a&nbsp;map&nbsp;indexed&nbsp;by&nbsp;visit.</span><br>
<span class="lineno"></span><span class="keyword" id="2181076">type</span>&nbsp;<span class="ident" id="2181081">visit</span>&nbsp;<span class="keyword" id="2181087">struct</span>&nbsp;<span class="op" id="2181094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2181097">a1</span>&nbsp;&nbsp;<span class="builtintype" id="2181101">uintptr</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2181110">a2</span>&nbsp;&nbsp;<span class="builtintype" id="2181114">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2181123">typ</span>&nbsp;<span class="ident" id="2181127">Type</span><br>
<span class="lineno"></span><span class="op" id="2181132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2181135">//&nbsp;Tests&nbsp;for&nbsp;deep&nbsp;equality&nbsp;using&nbsp;reflected&nbsp;types.&nbsp;The&nbsp;map&nbsp;argument&nbsp;tracks</span><br>
<span class="lineno">20</span><span class="comment" id="2181209">//&nbsp;comparisons&nbsp;that&nbsp;have&nbsp;already&nbsp;been&nbsp;seen,&nbsp;which&nbsp;allows&nbsp;short&nbsp;circuiting&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2181286">//&nbsp;recursive&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="2181306">func</span>&nbsp;<span class="ident" id="2181311">deepValueEqual</span><span class="op" id="2181325">(</span><span class="ident" id="2181326">v1</span><span class="op" id="2181328">,</span>&nbsp;<span class="ident" id="2181330">v2</span>&nbsp;<span class="ident" id="2181333">Value</span><span class="op" id="2181338">,</span>&nbsp;<span class="ident" id="2181340">visited</span>&nbsp;<span class="keyword" id="2181348">map</span><span class="op" id="2181351">[</span><span class="ident" id="2181352">visit</span><span class="op" id="2181357">]</span><span class="builtintype" id="2181358">bool</span><span class="op" id="2181362">,</span>&nbsp;<span class="ident" id="2181364">depth</span>&nbsp;<span class="builtintype" id="2181370">int</span><span class="op" id="2181373">)</span>&nbsp;<span class="builtintype" id="2181375">bool</span>&nbsp;<span class="op" id="2181380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2181383">if</span>&nbsp;<span class="op" id="2181386">!</span><span class="ident" id="2181387">v1</span><span class="op" id="2181389">.</span><span class="ident" id="2181390">IsValid</span><span class="op" id="2181397">(</span><span class="op" id="2181398">)</span>&nbsp;<span class="op" id="2181400">||</span>&nbsp;<span class="op" id="2181403">!</span><span class="ident" id="2181404">v2</span><span class="op" id="2181406">.</span><span class="ident" id="2181407">IsValid</span><span class="op" id="2181414">(</span><span class="op" id="2181415">)</span>&nbsp;<span class="op" id="2181417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2181421">return</span>&nbsp;<span class="ident" id="2181428">v1</span><span class="op" id="2181430">.</span><span class="ident" id="2181431">IsValid</span><span class="op" id="2181438">(</span><span class="op" id="2181439">)</span>&nbsp;<span class="op" id="2181441">==</span>&nbsp;<span class="ident" id="2181444">v2</span><span class="op" id="2181446">.</span><span class="ident" id="2181447">IsValid</span><span class="op" id="2181454">(</span><span class="op" id="2181455">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2181458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2181461">if</span>&nbsp;<span class="ident" id="2181464">v1</span><span class="op" id="2181466">.</span><span class="ident" id="2181467">Type</span><span class="op" id="2181471">(</span><span class="op" id="2181472">)</span>&nbsp;<span class="op" id="2181474">!=</span>&nbsp;<span class="ident" id="2181477">v2</span><span class="op" id="2181479">.</span><span class="ident" id="2181480">Type</span><span class="op" id="2181484">(</span><span class="op" id="2181485">)</span>&nbsp;<span class="op" id="2181487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2181491">return</span>&nbsp;<span class="builtintype" id="2181498">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2181505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2181509">//&nbsp;if&nbsp;depth&nbsp;&gt;&nbsp;10&nbsp;{&nbsp;panic(&#34;deepValueEqual&#34;)&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;for&nbsp;debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2181572">hard</span>&nbsp;<span class="op" id="2181577">:=</span>&nbsp;<span class="keyword" id="2181580">func</span><span class="op" id="2181584">(</span><span class="ident" id="2181585">k</span>&nbsp;<span class="ident" id="2181587">Kind</span><span class="op" id="2181591">)</span>&nbsp;<span class="builtintype" id="2181593">bool</span>&nbsp;<span class="op" id="2181598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2181602">switch</span>&nbsp;<span class="ident" id="2181609">k</span>&nbsp;<span class="op" id="2181611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2181615">case</span>&nbsp;<span class="ident" id="2181620">Array</span><span class="op" id="2181625">,</span>&nbsp;<span class="ident" id="2181627">Map</span><span class="op" id="2181630">,</span>&nbsp;<span class="ident" id="2181632">Slice</span><span class="op" id="2181637">,</span>&nbsp;<span class="ident" id="2181639">Struct</span><span class="op" id="2181645">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2181650">return</span>&nbsp;<span class="builtintype" id="2181657">true</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2181664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2181668">return</span>&nbsp;<span class="builtintype" id="2181675">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2181682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2181686">if</span>&nbsp;<span class="ident" id="2181689">v1</span><span class="op" id="2181691">.</span><span class="ident" id="2181692">CanAddr</span><span class="op" id="2181699">(</span><span class="op" id="2181700">)</span>&nbsp;<span class="op" id="2181702">&amp;&amp;</span>&nbsp;<span class="ident" id="2181705">v2</span><span class="op" id="2181707">.</span><span class="ident" id="2181708">CanAddr</span><span class="op" id="2181715">(</span><span class="op" id="2181716">)</span>&nbsp;<span class="op" id="2181718">&amp;&amp;</span>&nbsp;<span class="ident" id="2181721">hard</span><span class="op" id="2181725">(</span><span class="ident" id="2181726">v1</span><span class="op" id="2181728">.</span><span class="ident" id="2181729">Kind</span><span class="op" id="2181733">(</span><span class="op" id="2181734">)</span><span class="op" id="2181735">)</span>&nbsp;<span class="op" id="2181737">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2181741">addr1</span>&nbsp;<span class="op" id="2181747">:=</span>&nbsp;<span class="ident" id="2181750">v1</span><span class="op" id="2181752">.</span><span class="ident" id="2181753">UnsafeAddr</span><span class="op" id="2181763">(</span><span class="op" id="2181764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2181768">addr2</span>&nbsp;<span class="op" id="2181774">:=</span>&nbsp;<span class="ident" id="2181777">v2</span><span class="op" id="2181779">.</span><span class="ident" id="2181780">UnsafeAddr</span><span class="op" id="2181790">(</span><span class="op" id="2181791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2181795">if</span>&nbsp;<span class="ident" id="2181798">addr1</span>&nbsp;<span class="op" id="2181804">&gt;</span>&nbsp;<span class="ident" id="2181806">addr2</span>&nbsp;<span class="op" id="2181812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2181817">//&nbsp;Canonicalize&nbsp;order&nbsp;to&nbsp;reduce&nbsp;number&nbsp;of&nbsp;entries&nbsp;in&nbsp;visited.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2181882">addr1</span><span class="op" id="2181887">,</span>&nbsp;<span class="ident" id="2181889">addr2</span>&nbsp;<span class="op" id="2181895">=</span>&nbsp;<span class="ident" id="2181897">addr2</span><span class="op" id="2181902">,</span>&nbsp;<span class="ident" id="2181904">addr1</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2181912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2181917">//&nbsp;Short&nbsp;circuit&nbsp;if&nbsp;references&nbsp;are&nbsp;identical&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2181968">if</span>&nbsp;<span class="ident" id="2181971">addr1</span>&nbsp;<span class="op" id="2181977">==</span>&nbsp;<span class="ident" id="2181980">addr2</span>&nbsp;<span class="op" id="2181986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2181991">return</span>&nbsp;<span class="builtintype" id="2181998">true</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2182005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2182010">//&nbsp;...&nbsp;or&nbsp;already&nbsp;seen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2182035">typ</span>&nbsp;<span class="op" id="2182039">:=</span>&nbsp;<span class="ident" id="2182042">v1</span><span class="op" id="2182044">.</span><span class="ident" id="2182045">Type</span><span class="op" id="2182049">(</span><span class="op" id="2182050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2182054">v</span>&nbsp;<span class="op" id="2182056">:=</span>&nbsp;<span class="ident" id="2182059">visit</span><span class="op" id="2182064">{</span><span class="ident" id="2182065">addr1</span><span class="op" id="2182070">,</span>&nbsp;<span class="ident" id="2182072">addr2</span><span class="op" id="2182077">,</span>&nbsp;<span class="ident" id="2182079">typ</span><span class="op" id="2182082">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182086">if</span>&nbsp;<span class="ident" id="2182089">visited</span><span class="op" id="2182096">[</span><span class="ident" id="2182097">v</span><span class="op" id="2182098">]</span>&nbsp;<span class="op" id="2182100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182105">return</span>&nbsp;<span class="builtintype" id="2182112">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2182119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2182124">//&nbsp;Remember&nbsp;for&nbsp;later.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2182149">visited</span><span class="op" id="2182156">[</span><span class="ident" id="2182157">v</span><span class="op" id="2182158">]</span>&nbsp;<span class="op" id="2182160">=</span>&nbsp;<span class="builtintype" id="2182162">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2182168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182172">switch</span>&nbsp;<span class="ident" id="2182179">v1</span><span class="op" id="2182181">.</span><span class="ident" id="2182182">Kind</span><span class="op" id="2182186">(</span><span class="op" id="2182187">)</span>&nbsp;<span class="op" id="2182189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182192">case</span>&nbsp;<span class="ident" id="2182197">Array</span><span class="op" id="2182202">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182206">for</span>&nbsp;<span class="ident" id="2182210">i</span>&nbsp;<span class="op" id="2182212">:=</span>&nbsp;<span class="num" id="2182215">0</span><span class="op" id="2182216">;</span>&nbsp;<span class="ident" id="2182218">i</span>&nbsp;<span class="op" id="2182220">&lt;</span>&nbsp;<span class="ident" id="2182222">v1</span><span class="op" id="2182224">.</span><span class="ident" id="2182225">Len</span><span class="op" id="2182228">(</span><span class="op" id="2182229">)</span><span class="op" id="2182230">;</span>&nbsp;<span class="ident" id="2182232">i</span><span class="op" id="2182233">++</span>&nbsp;<span class="op" id="2182236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182241">if</span>&nbsp;<span class="op" id="2182244">!</span><span class="ident" id="2182245">deepValueEqual</span><span class="op" id="2182259">(</span><span class="ident" id="2182260">v1</span><span class="op" id="2182262">.</span><span class="ident" id="2182263">Index</span><span class="op" id="2182268">(</span><span class="ident" id="2182269">i</span><span class="op" id="2182270">)</span><span class="op" id="2182271">,</span>&nbsp;<span class="ident" id="2182273">v2</span><span class="op" id="2182275">.</span><span class="ident" id="2182276">Index</span><span class="op" id="2182281">(</span><span class="ident" id="2182282">i</span><span class="op" id="2182283">)</span><span class="op" id="2182284">,</span>&nbsp;<span class="ident" id="2182286">visited</span><span class="op" id="2182293">,</span>&nbsp;<span class="ident" id="2182295">depth</span><span class="op" id="2182300">+</span><span class="num" id="2182301">1</span><span class="op" id="2182302">)</span>&nbsp;<span class="op" id="2182304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182310">return</span>&nbsp;<span class="builtintype" id="2182317">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2182326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2182330">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182334">return</span>&nbsp;<span class="builtintype" id="2182341">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182347">case</span>&nbsp;<span class="ident" id="2182352">Slice</span><span class="op" id="2182357">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182361">if</span>&nbsp;<span class="ident" id="2182364">v1</span><span class="op" id="2182366">.</span><span class="ident" id="2182367">IsNil</span><span class="op" id="2182372">(</span><span class="op" id="2182373">)</span>&nbsp;<span class="op" id="2182375">!=</span>&nbsp;<span class="ident" id="2182378">v2</span><span class="op" id="2182380">.</span><span class="ident" id="2182381">IsNil</span><span class="op" id="2182386">(</span><span class="op" id="2182387">)</span>&nbsp;<span class="op" id="2182389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182394">return</span>&nbsp;<span class="builtintype" id="2182401">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2182409">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182413">if</span>&nbsp;<span class="ident" id="2182416">v1</span><span class="op" id="2182418">.</span><span class="ident" id="2182419">Len</span><span class="op" id="2182422">(</span><span class="op" id="2182423">)</span>&nbsp;<span class="op" id="2182425">!=</span>&nbsp;<span class="ident" id="2182428">v2</span><span class="op" id="2182430">.</span><span class="ident" id="2182431">Len</span><span class="op" id="2182434">(</span><span class="op" id="2182435">)</span>&nbsp;<span class="op" id="2182437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182442">return</span>&nbsp;<span class="builtintype" id="2182449">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2182457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182461">if</span>&nbsp;<span class="ident" id="2182464">v1</span><span class="op" id="2182466">.</span><span class="ident" id="2182467">Pointer</span><span class="op" id="2182474">(</span><span class="op" id="2182475">)</span>&nbsp;<span class="op" id="2182477">==</span>&nbsp;<span class="ident" id="2182480">v2</span><span class="op" id="2182482">.</span><span class="ident" id="2182483">Pointer</span><span class="op" id="2182490">(</span><span class="op" id="2182491">)</span>&nbsp;<span class="op" id="2182493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182498">return</span>&nbsp;<span class="builtintype" id="2182505">true</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2182512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182516">for</span>&nbsp;<span class="ident" id="2182520">i</span>&nbsp;<span class="op" id="2182522">:=</span>&nbsp;<span class="num" id="2182525">0</span><span class="op" id="2182526">;</span>&nbsp;<span class="ident" id="2182528">i</span>&nbsp;<span class="op" id="2182530">&lt;</span>&nbsp;<span class="ident" id="2182532">v1</span><span class="op" id="2182534">.</span><span class="ident" id="2182535">Len</span><span class="op" id="2182538">(</span><span class="op" id="2182539">)</span><span class="op" id="2182540">;</span>&nbsp;<span class="ident" id="2182542">i</span><span class="op" id="2182543">++</span>&nbsp;<span class="op" id="2182546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182551">if</span>&nbsp;<span class="op" id="2182554">!</span><span class="ident" id="2182555">deepValueEqual</span><span class="op" id="2182569">(</span><span class="ident" id="2182570">v1</span><span class="op" id="2182572">.</span><span class="ident" id="2182573">Index</span><span class="op" id="2182578">(</span><span class="ident" id="2182579">i</span><span class="op" id="2182580">)</span><span class="op" id="2182581">,</span>&nbsp;<span class="ident" id="2182583">v2</span><span class="op" id="2182585">.</span><span class="ident" id="2182586">Index</span><span class="op" id="2182591">(</span><span class="ident" id="2182592">i</span><span class="op" id="2182593">)</span><span class="op" id="2182594">,</span>&nbsp;<span class="ident" id="2182596">visited</span><span class="op" id="2182603">,</span>&nbsp;<span class="ident" id="2182605">depth</span><span class="op" id="2182610">+</span><span class="num" id="2182611">1</span><span class="op" id="2182612">)</span>&nbsp;<span class="op" id="2182614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182620">return</span>&nbsp;<span class="builtintype" id="2182627">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2182636">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2182640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182644">return</span>&nbsp;<span class="builtintype" id="2182651">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182657">case</span>&nbsp;<span class="ident" id="2182662">Interface</span><span class="op" id="2182671">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182675">if</span>&nbsp;<span class="ident" id="2182678">v1</span><span class="op" id="2182680">.</span><span class="ident" id="2182681">IsNil</span><span class="op" id="2182686">(</span><span class="op" id="2182687">)</span>&nbsp;<span class="op" id="2182689">||</span>&nbsp;<span class="ident" id="2182692">v2</span><span class="op" id="2182694">.</span><span class="ident" id="2182695">IsNil</span><span class="op" id="2182700">(</span><span class="op" id="2182701">)</span>&nbsp;<span class="op" id="2182703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182708">return</span>&nbsp;<span class="ident" id="2182715">v1</span><span class="op" id="2182717">.</span><span class="ident" id="2182718">IsNil</span><span class="op" id="2182723">(</span><span class="op" id="2182724">)</span>&nbsp;<span class="op" id="2182726">==</span>&nbsp;<span class="ident" id="2182729">v2</span><span class="op" id="2182731">.</span><span class="ident" id="2182732">IsNil</span><span class="op" id="2182737">(</span><span class="op" id="2182738">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2182742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182746">return</span>&nbsp;<span class="ident" id="2182753">deepValueEqual</span><span class="op" id="2182767">(</span><span class="ident" id="2182768">v1</span><span class="op" id="2182770">.</span><span class="ident" id="2182771">Elem</span><span class="op" id="2182775">(</span><span class="op" id="2182776">)</span><span class="op" id="2182777">,</span>&nbsp;<span class="ident" id="2182779">v2</span><span class="op" id="2182781">.</span><span class="ident" id="2182782">Elem</span><span class="op" id="2182786">(</span><span class="op" id="2182787">)</span><span class="op" id="2182788">,</span>&nbsp;<span class="ident" id="2182790">visited</span><span class="op" id="2182797">,</span>&nbsp;<span class="ident" id="2182799">depth</span><span class="op" id="2182804">+</span><span class="num" id="2182805">1</span><span class="op" id="2182806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182809">case</span>&nbsp;<span class="ident" id="2182814">Ptr</span><span class="op" id="2182817">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182821">return</span>&nbsp;<span class="ident" id="2182828">deepValueEqual</span><span class="op" id="2182842">(</span><span class="ident" id="2182843">v1</span><span class="op" id="2182845">.</span><span class="ident" id="2182846">Elem</span><span class="op" id="2182850">(</span><span class="op" id="2182851">)</span><span class="op" id="2182852">,</span>&nbsp;<span class="ident" id="2182854">v2</span><span class="op" id="2182856">.</span><span class="ident" id="2182857">Elem</span><span class="op" id="2182861">(</span><span class="op" id="2182862">)</span><span class="op" id="2182863">,</span>&nbsp;<span class="ident" id="2182865">visited</span><span class="op" id="2182872">,</span>&nbsp;<span class="ident" id="2182874">depth</span><span class="op" id="2182879">+</span><span class="num" id="2182880">1</span><span class="op" id="2182881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182884">case</span>&nbsp;<span class="ident" id="2182889">Struct</span><span class="op" id="2182895">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182899">for</span>&nbsp;<span class="ident" id="2182903">i</span><span class="op" id="2182904">,</span>&nbsp;<span class="ident" id="2182906">n</span>&nbsp;<span class="op" id="2182908">:=</span>&nbsp;<span class="num" id="2182911">0</span><span class="op" id="2182912">,</span>&nbsp;<span class="ident" id="2182914">v1</span><span class="op" id="2182916">.</span><span class="ident" id="2182917">NumField</span><span class="op" id="2182925">(</span><span class="op" id="2182926">)</span><span class="op" id="2182927">;</span>&nbsp;<span class="ident" id="2182929">i</span>&nbsp;<span class="op" id="2182931">&lt;</span>&nbsp;<span class="ident" id="2182933">n</span><span class="op" id="2182934">;</span>&nbsp;<span class="ident" id="2182936">i</span><span class="op" id="2182937">++</span>&nbsp;<span class="op" id="2182940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2182945">if</span>&nbsp;<span class="op" id="2182948">!</span><span class="ident" id="2182949">deepValueEqual</span><span class="op" id="2182963">(</span><span class="ident" id="2182964">v1</span><span class="op" id="2182966">.</span><span class="ident" id="2182967">Field</span><span class="op" id="2182972">(</span><span class="ident" id="2182973">i</span><span class="op" id="2182974">)</span><span class="op" id="2182975">,</span>&nbsp;<span class="ident" id="2182977">v2</span><span class="op" id="2182979">.</span><span class="ident" id="2182980">Field</span><span class="op" id="2182985">(</span><span class="ident" id="2182986">i</span><span class="op" id="2182987">)</span><span class="op" id="2182988">,</span>&nbsp;<span class="ident" id="2182990">visited</span><span class="op" id="2182997">,</span>&nbsp;<span class="ident" id="2182999">depth</span><span class="op" id="2183004">+</span><span class="num" id="2183005">1</span><span class="op" id="2183006">)</span>&nbsp;<span class="op" id="2183008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183014">return</span>&nbsp;<span class="builtintype" id="2183021">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2183030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2183034">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183038">return</span>&nbsp;<span class="builtintype" id="2183045">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183051">case</span>&nbsp;<span class="ident" id="2183056">Map</span><span class="op" id="2183059">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183063">if</span>&nbsp;<span class="ident" id="2183066">v1</span><span class="op" id="2183068">.</span><span class="ident" id="2183069">IsNil</span><span class="op" id="2183074">(</span><span class="op" id="2183075">)</span>&nbsp;<span class="op" id="2183077">!=</span>&nbsp;<span class="ident" id="2183080">v2</span><span class="op" id="2183082">.</span><span class="ident" id="2183083">IsNil</span><span class="op" id="2183088">(</span><span class="op" id="2183089">)</span>&nbsp;<span class="op" id="2183091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183096">return</span>&nbsp;<span class="builtintype" id="2183103">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2183111">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183115">if</span>&nbsp;<span class="ident" id="2183118">v1</span><span class="op" id="2183120">.</span><span class="ident" id="2183121">Len</span><span class="op" id="2183124">(</span><span class="op" id="2183125">)</span>&nbsp;<span class="op" id="2183127">!=</span>&nbsp;<span class="ident" id="2183130">v2</span><span class="op" id="2183132">.</span><span class="ident" id="2183133">Len</span><span class="op" id="2183136">(</span><span class="op" id="2183137">)</span>&nbsp;<span class="op" id="2183139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183144">return</span>&nbsp;<span class="builtintype" id="2183151">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2183159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183163">if</span>&nbsp;<span class="ident" id="2183166">v1</span><span class="op" id="2183168">.</span><span class="ident" id="2183169">Pointer</span><span class="op" id="2183176">(</span><span class="op" id="2183177">)</span>&nbsp;<span class="op" id="2183179">==</span>&nbsp;<span class="ident" id="2183182">v2</span><span class="op" id="2183184">.</span><span class="ident" id="2183185">Pointer</span><span class="op" id="2183192">(</span><span class="op" id="2183193">)</span>&nbsp;<span class="op" id="2183195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183200">return</span>&nbsp;<span class="builtintype" id="2183207">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2183214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183218">for</span>&nbsp;<span class="ident" id="2183222">_</span><span class="op" id="2183223">,</span>&nbsp;<span class="ident" id="2183225">k</span>&nbsp;<span class="op" id="2183227">:=</span>&nbsp;<span class="keyword" id="2183230">range</span>&nbsp;<span class="ident" id="2183236">v1</span><span class="op" id="2183238">.</span><span class="ident" id="2183239">MapKeys</span><span class="op" id="2183246">(</span><span class="op" id="2183247">)</span>&nbsp;<span class="op" id="2183249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183254">if</span>&nbsp;<span class="op" id="2183257">!</span><span class="ident" id="2183258">deepValueEqual</span><span class="op" id="2183272">(</span><span class="ident" id="2183273">v1</span><span class="op" id="2183275">.</span><span class="ident" id="2183276">MapIndex</span><span class="op" id="2183284">(</span><span class="ident" id="2183285">k</span><span class="op" id="2183286">)</span><span class="op" id="2183287">,</span>&nbsp;<span class="ident" id="2183289">v2</span><span class="op" id="2183291">.</span><span class="ident" id="2183292">MapIndex</span><span class="op" id="2183300">(</span><span class="ident" id="2183301">k</span><span class="op" id="2183302">)</span><span class="op" id="2183303">,</span>&nbsp;<span class="ident" id="2183305">visited</span><span class="op" id="2183312">,</span>&nbsp;<span class="ident" id="2183314">depth</span><span class="op" id="2183319">+</span><span class="num" id="2183320">1</span><span class="op" id="2183321">)</span>&nbsp;<span class="op" id="2183323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183329">return</span>&nbsp;<span class="builtintype" id="2183336">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2183345">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2183349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183353">return</span>&nbsp;<span class="builtintype" id="2183360">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183366">case</span>&nbsp;<span class="ident" id="2183371">Func</span><span class="op" id="2183375">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183379">if</span>&nbsp;<span class="ident" id="2183382">v1</span><span class="op" id="2183384">.</span><span class="ident" id="2183385">IsNil</span><span class="op" id="2183390">(</span><span class="op" id="2183391">)</span>&nbsp;<span class="op" id="2183393">&amp;&amp;</span>&nbsp;<span class="ident" id="2183396">v2</span><span class="op" id="2183398">.</span><span class="ident" id="2183399">IsNil</span><span class="op" id="2183404">(</span><span class="op" id="2183405">)</span>&nbsp;<span class="op" id="2183407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183412">return</span>&nbsp;<span class="builtintype" id="2183419">true</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2183426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2183430">//&nbsp;Can&#39;t&nbsp;do&nbsp;better&nbsp;than&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183462">return</span>&nbsp;<span class="builtintype" id="2183469">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183476">default</span><span class="op" id="2183483">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2183487">//&nbsp;Normal&nbsp;equality&nbsp;suffices</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183517">return</span>&nbsp;<span class="ident" id="2183524">valueInterface</span><span class="op" id="2183538">(</span><span class="ident" id="2183539">v1</span><span class="op" id="2183541">,</span>&nbsp;<span class="builtintype" id="2183543">false</span><span class="op" id="2183548">)</span>&nbsp;<span class="op" id="2183550">==</span>&nbsp;<span class="ident" id="2183553">valueInterface</span><span class="op" id="2183567">(</span><span class="ident" id="2183568">v2</span><span class="op" id="2183570">,</span>&nbsp;<span class="builtintype" id="2183572">false</span><span class="op" id="2183577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2183580">}</span><br>
<span class="lineno"></span><span class="op" id="2183582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2183585">//&nbsp;DeepEqual&nbsp;tests&nbsp;for&nbsp;deep&nbsp;equality.&nbsp;It&nbsp;uses&nbsp;normal&nbsp;==&nbsp;equality&nbsp;where</span><br>
<span class="lineno">130</span><span class="comment" id="2183656">//&nbsp;possible&nbsp;but&nbsp;will&nbsp;scan&nbsp;elements&nbsp;of&nbsp;arrays,&nbsp;slices,&nbsp;maps,&nbsp;and&nbsp;fields&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2183730">//&nbsp;structs.&nbsp;In&nbsp;maps,&nbsp;keys&nbsp;are&nbsp;compared&nbsp;with&nbsp;==&nbsp;but&nbsp;elements&nbsp;use&nbsp;deep</span><br>
<span class="lineno"></span><span class="comment" id="2183799">//&nbsp;equality.&nbsp;DeepEqual&nbsp;correctly&nbsp;handles&nbsp;recursive&nbsp;types.&nbsp;Functions&nbsp;are&nbsp;equal</span><br>
<span class="lineno"></span><span class="comment" id="2183877">//&nbsp;only&nbsp;if&nbsp;they&nbsp;are&nbsp;both&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="2183907">//&nbsp;An&nbsp;empty&nbsp;slice&nbsp;is&nbsp;not&nbsp;equal&nbsp;to&nbsp;a&nbsp;nil&nbsp;slice.</span><br>
<span class="lineno">135</span><span class="keyword" id="2183954">func</span>&nbsp;<span class="ident" id="2183959">DeepEqual</span><span class="op" id="2183968">(</span><span class="ident" id="2183969">a1</span><span class="op" id="2183971">,</span>&nbsp;<span class="ident" id="2183973">a2</span>&nbsp;<span class="keyword" id="2183976">interface</span><span class="op" id="2183985">{</span><span class="op" id="2183986">}</span><span class="op" id="2183987">)</span>&nbsp;<span class="builtintype" id="2183989">bool</span>&nbsp;<span class="op" id="2183994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2183997">if</span>&nbsp;<span class="ident" id="2184000">a1</span>&nbsp;<span class="op" id="2184003">==</span>&nbsp;<span class="ident" id="2184006">nil</span>&nbsp;<span class="op" id="2184010">||</span>&nbsp;<span class="ident" id="2184013">a2</span>&nbsp;<span class="op" id="2184016">==</span>&nbsp;<span class="ident" id="2184019">nil</span>&nbsp;<span class="op" id="2184023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2184027">return</span>&nbsp;<span class="ident" id="2184034">a1</span>&nbsp;<span class="op" id="2184037">==</span>&nbsp;<span class="ident" id="2184040">a2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2184044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2184047">v1</span>&nbsp;<span class="op" id="2184050">:=</span>&nbsp;<span class="ident" id="2184053">ValueOf</span><span class="op" id="2184060">(</span><span class="ident" id="2184061">a1</span><span class="op" id="2184063">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2184066">v2</span>&nbsp;<span class="op" id="2184069">:=</span>&nbsp;<span class="ident" id="2184072">ValueOf</span><span class="op" id="2184079">(</span><span class="ident" id="2184080">a2</span><span class="op" id="2184082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2184085">if</span>&nbsp;<span class="ident" id="2184088">v1</span><span class="op" id="2184090">.</span><span class="ident" id="2184091">Type</span><span class="op" id="2184095">(</span><span class="op" id="2184096">)</span>&nbsp;<span class="op" id="2184098">!=</span>&nbsp;<span class="ident" id="2184101">v2</span><span class="op" id="2184103">.</span><span class="ident" id="2184104">Type</span><span class="op" id="2184108">(</span><span class="op" id="2184109">)</span>&nbsp;<span class="op" id="2184111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2184115">return</span>&nbsp;<span class="builtintype" id="2184122">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2184129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2184132">return</span>&nbsp;<span class="ident" id="2184139">deepValueEqual</span><span class="op" id="2184153">(</span><span class="ident" id="2184154">v1</span><span class="op" id="2184156">,</span>&nbsp;<span class="ident" id="2184158">v2</span><span class="op" id="2184160">,</span>&nbsp;<span class="builtinfunc" id="2184162">make</span><span class="op" id="2184166">(</span><span class="keyword" id="2184167">map</span><span class="op" id="2184170">[</span><span class="ident" id="2184171">visit</span><span class="op" id="2184176">]</span><span class="builtintype" id="2184177">bool</span><span class="op" id="2184181">)</span><span class="op" id="2184182">,</span>&nbsp;<span class="num" id="2184184">0</span><span class="op" id="2184185">)</span><br>
<span class="lineno">145</span><span class="op" id="2184187">}</span>
</div>
</body>
</html>
