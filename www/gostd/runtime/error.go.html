<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html" class="current">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1483211">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1483266">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1483320">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1483371">package</span>&nbsp;<span class="ident" id="1483379">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1483388">import</span>&nbsp;<span class="string" id="1483395">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1483405">//&nbsp;The&nbsp;Error&nbsp;interface&nbsp;identifies&nbsp;a&nbsp;run&nbsp;time&nbsp;error.</span><br>
<span class="lineno">10</span><span class="keyword" id="1483457">type</span>&nbsp;<span class="ident" id="1483462">Error</span>&nbsp;<span class="keyword" id="1483468">interface</span>&nbsp;<span class="op" id="1483478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1483481">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1483489">//&nbsp;RuntimeError&nbsp;is&nbsp;a&nbsp;no-op&nbsp;function&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1483530">//&nbsp;serves&nbsp;to&nbsp;distinguish&nbsp;types&nbsp;that&nbsp;are&nbsp;runtime</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1483579">//&nbsp;errors&nbsp;from&nbsp;ordinary&nbsp;errors:&nbsp;a&nbsp;type&nbsp;is&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1483624">//&nbsp;runtime&nbsp;error&nbsp;if&nbsp;it&nbsp;has&nbsp;a&nbsp;RuntimeError&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1483675">RuntimeError</span><span class="op" id="1483687">(</span><span class="op" id="1483688">)</span><br>
<span class="lineno"></span><span class="op" id="1483690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1483693">//&nbsp;A&nbsp;TypeAssertionError&nbsp;explains&nbsp;a&nbsp;failed&nbsp;type&nbsp;assertion.</span><br>
<span class="lineno"></span><span class="keyword" id="1483751">type</span>&nbsp;<span class="ident" id="1483756">TypeAssertionError</span>&nbsp;<span class="keyword" id="1483775">struct</span>&nbsp;<span class="op" id="1483782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1483785">interfaceString</span>&nbsp;<span class="builtintype" id="1483801">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1483809">concreteString</span>&nbsp;&nbsp;<span class="builtintype" id="1483825">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1483833">assertedString</span>&nbsp;&nbsp;<span class="builtintype" id="1483849">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1483857">missingMethod</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1483873">string</span>&nbsp;<span class="comment" id="1483880">//&nbsp;one&nbsp;method&nbsp;needed&nbsp;by&nbsp;Interface,&nbsp;missing&nbsp;from&nbsp;Concrete</span><br>
<span class="lineno"></span><span class="op" id="1483937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1483940">func</span>&nbsp;<span class="op" id="1483945">(</span><span class="op" id="1483946">*</span><span class="ident" id="1483947">TypeAssertionError</span><span class="op" id="1483965">)</span>&nbsp;<span class="ident" id="1483967">RuntimeError</span><span class="op" id="1483979">(</span><span class="op" id="1483980">)</span>&nbsp;<span class="op" id="1483982">{</span><span class="op" id="1483983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="1483986">func</span>&nbsp;<span class="op" id="1483991">(</span><span class="ident" id="1483992">e</span>&nbsp;<span class="op" id="1483994">*</span><span class="ident" id="1483995">TypeAssertionError</span><span class="op" id="1484013">)</span>&nbsp;<span class="ident" id="1484015">Error</span><span class="op" id="1484020">(</span><span class="op" id="1484021">)</span>&nbsp;<span class="builtintype" id="1484023">string</span>&nbsp;<span class="op" id="1484030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1484033">inter</span>&nbsp;<span class="op" id="1484039">:=</span>&nbsp;<span class="ident" id="1484042">e</span><span class="op" id="1484043">.</span><span class="ident" id="1484044">interfaceString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1484061">if</span>&nbsp;<span class="ident" id="1484064">inter</span>&nbsp;<span class="op" id="1484070">==</span>&nbsp;<span class="string" id="1484073">&#34;&#34;</span>&nbsp;<span class="op" id="1484076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1484080">inter</span>&nbsp;<span class="op" id="1484086">=</span>&nbsp;<span class="string" id="1484088">&#34;interface&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1484101">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1484104">if</span>&nbsp;<span class="ident" id="1484107">e</span><span class="op" id="1484108">.</span><span class="ident" id="1484109">concreteString</span>&nbsp;<span class="op" id="1484124">==</span>&nbsp;<span class="string" id="1484127">&#34;&#34;</span>&nbsp;<span class="op" id="1484130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1484134">return</span>&nbsp;<span class="string" id="1484141">&#34;interface&nbsp;conversion:&nbsp;&#34;</span>&nbsp;<span class="op" id="1484166">+</span>&nbsp;<span class="ident" id="1484168">inter</span>&nbsp;<span class="op" id="1484174">+</span>&nbsp;<span class="string" id="1484176">&#34;&nbsp;is&nbsp;nil,&nbsp;not&nbsp;&#34;</span>&nbsp;<span class="op" id="1484192">+</span>&nbsp;<span class="ident" id="1484194">e</span><span class="op" id="1484195">.</span><span class="ident" id="1484196">assertedString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1484212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1484215">if</span>&nbsp;<span class="ident" id="1484218">e</span><span class="op" id="1484219">.</span><span class="ident" id="1484220">missingMethod</span>&nbsp;<span class="op" id="1484234">==</span>&nbsp;<span class="string" id="1484237">&#34;&#34;</span>&nbsp;<span class="op" id="1484240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1484244">return</span>&nbsp;<span class="string" id="1484251">&#34;interface&nbsp;conversion:&nbsp;&#34;</span>&nbsp;<span class="op" id="1484276">+</span>&nbsp;<span class="ident" id="1484278">inter</span>&nbsp;<span class="op" id="1484284">+</span>&nbsp;<span class="string" id="1484286">&#34;&nbsp;is&nbsp;&#34;</span>&nbsp;<span class="op" id="1484293">+</span>&nbsp;<span class="ident" id="1484295">e</span><span class="op" id="1484296">.</span><span class="ident" id="1484297">concreteString</span>&nbsp;<span class="op" id="1484312">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1484317">&#34;,&nbsp;not&nbsp;&#34;</span>&nbsp;<span class="op" id="1484326">+</span>&nbsp;<span class="ident" id="1484328">e</span><span class="op" id="1484329">.</span><span class="ident" id="1484330">assertedString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1484346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1484349">return</span>&nbsp;<span class="string" id="1484356">&#34;interface&nbsp;conversion:&nbsp;&#34;</span>&nbsp;<span class="op" id="1484381">+</span>&nbsp;<span class="ident" id="1484383">e</span><span class="op" id="1484384">.</span><span class="ident" id="1484385">concreteString</span>&nbsp;<span class="op" id="1484400">+</span>&nbsp;<span class="string" id="1484402">&#34;&nbsp;is&nbsp;not&nbsp;&#34;</span>&nbsp;<span class="op" id="1484413">+</span>&nbsp;<span class="ident" id="1484415">e</span><span class="op" id="1484416">.</span><span class="ident" id="1484417">assertedString</span>&nbsp;<span class="op" id="1484432">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1484436">&#34;:&nbsp;missing&nbsp;method&nbsp;&#34;</span>&nbsp;<span class="op" id="1484456">+</span>&nbsp;<span class="ident" id="1484458">e</span><span class="op" id="1484459">.</span><span class="ident" id="1484460">missingMethod</span><br>
<span class="lineno"></span><span class="op" id="1484474">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="1484477">//&nbsp;For&nbsp;calling&nbsp;from&nbsp;C.</span><br>
<span class="lineno"></span><span class="keyword" id="1484500">func</span>&nbsp;<span class="ident" id="1484505">newTypeAssertionError</span><span class="op" id="1484526">(</span><span class="ident" id="1484527">ps1</span><span class="op" id="1484530">,</span>&nbsp;<span class="ident" id="1484532">ps2</span><span class="op" id="1484535">,</span>&nbsp;<span class="ident" id="1484537">ps3</span>&nbsp;<span class="op" id="1484541">*</span><span class="builtintype" id="1484542">string</span><span class="op" id="1484548">,</span>&nbsp;<span class="ident" id="1484550">pmeth</span>&nbsp;<span class="op" id="1484556">*</span><span class="builtintype" id="1484557">string</span><span class="op" id="1484563">,</span>&nbsp;<span class="ident" id="1484565">ret</span>&nbsp;<span class="op" id="1484569">*</span><span class="keyword" id="1484570">interface</span><span class="op" id="1484579">{</span><span class="op" id="1484580">}</span><span class="op" id="1484581">)</span>&nbsp;<span class="op" id="1484583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1484586">var</span>&nbsp;<span class="ident" id="1484590">s1</span><span class="op" id="1484592">,</span>&nbsp;<span class="ident" id="1484594">s2</span><span class="op" id="1484596">,</span>&nbsp;<span class="ident" id="1484598">s3</span><span class="op" id="1484600">,</span>&nbsp;<span class="ident" id="1484602">meth</span>&nbsp;<span class="builtintype" id="1484607">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1484616">if</span>&nbsp;<span class="ident" id="1484619">ps1</span>&nbsp;<span class="op" id="1484623">!=</span>&nbsp;<span class="builtintype" id="1484626">nil</span>&nbsp;<span class="op" id="1484630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1484634">s1</span>&nbsp;<span class="op" id="1484637">=</span>&nbsp;<span class="op" id="1484639">*</span><span class="ident" id="1484640">ps1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1484645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1484648">if</span>&nbsp;<span class="ident" id="1484651">ps2</span>&nbsp;<span class="op" id="1484655">!=</span>&nbsp;<span class="builtintype" id="1484658">nil</span>&nbsp;<span class="op" id="1484662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1484666">s2</span>&nbsp;<span class="op" id="1484669">=</span>&nbsp;<span class="op" id="1484671">*</span><span class="ident" id="1484672">ps2</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1484677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1484680">if</span>&nbsp;<span class="ident" id="1484683">ps3</span>&nbsp;<span class="op" id="1484687">!=</span>&nbsp;<span class="builtintype" id="1484690">nil</span>&nbsp;<span class="op" id="1484694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1484698">s3</span>&nbsp;<span class="op" id="1484701">=</span>&nbsp;<span class="op" id="1484703">*</span><span class="ident" id="1484704">ps3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1484709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1484712">if</span>&nbsp;<span class="ident" id="1484715">pmeth</span>&nbsp;<span class="op" id="1484721">!=</span>&nbsp;<span class="builtintype" id="1484724">nil</span>&nbsp;<span class="op" id="1484728">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1484732">meth</span>&nbsp;<span class="op" id="1484737">=</span>&nbsp;<span class="op" id="1484739">*</span><span class="ident" id="1484740">pmeth</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1484747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1484750">*</span><span class="ident" id="1484751">ret</span>&nbsp;<span class="op" id="1484755">=</span>&nbsp;<span class="op" id="1484757">&amp;</span><span class="ident" id="1484758">TypeAssertionError</span><span class="op" id="1484776">{</span><span class="ident" id="1484777">s1</span><span class="op" id="1484779">,</span>&nbsp;<span class="ident" id="1484781">s2</span><span class="op" id="1484783">,</span>&nbsp;<span class="ident" id="1484785">s3</span><span class="op" id="1484787">,</span>&nbsp;<span class="ident" id="1484789">meth</span><span class="op" id="1484793">}</span><br>
<span class="lineno"></span><span class="op" id="1484795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="comment" id="1484798">//&nbsp;An&nbsp;errorString&nbsp;represents&nbsp;a&nbsp;runtime&nbsp;error&nbsp;described&nbsp;by&nbsp;a&nbsp;single&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="1484873">type</span>&nbsp;<span class="ident" id="1484878">errorString</span>&nbsp;<span class="builtintype" id="1484890">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1484898">func</span>&nbsp;<span class="op" id="1484903">(</span><span class="ident" id="1484904">e</span>&nbsp;<span class="ident" id="1484906">errorString</span><span class="op" id="1484917">)</span>&nbsp;<span class="ident" id="1484919">RuntimeError</span><span class="op" id="1484931">(</span><span class="op" id="1484932">)</span>&nbsp;<span class="op" id="1484934">{</span><span class="op" id="1484935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="1484938">func</span>&nbsp;<span class="op" id="1484943">(</span><span class="ident" id="1484944">e</span>&nbsp;<span class="ident" id="1484946">errorString</span><span class="op" id="1484957">)</span>&nbsp;<span class="ident" id="1484959">Error</span><span class="op" id="1484964">(</span><span class="op" id="1484965">)</span>&nbsp;<span class="builtintype" id="1484967">string</span>&nbsp;<span class="op" id="1484974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1484977">return</span>&nbsp;<span class="string" id="1484984">&#34;runtime&nbsp;error:&nbsp;&#34;</span>&nbsp;<span class="op" id="1485002">+</span>&nbsp;<span class="builtintype" id="1485004">string</span><span class="op" id="1485010">(</span><span class="ident" id="1485011">e</span><span class="op" id="1485012">)</span><br>
<span class="lineno"></span><span class="op" id="1485014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1485017">type</span>&nbsp;<span class="ident" id="1485022">stringer</span>&nbsp;<span class="keyword" id="1485031">interface</span>&nbsp;<span class="op" id="1485041">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1485044">String</span><span class="op" id="1485050">(</span><span class="op" id="1485051">)</span>&nbsp;<span class="builtintype" id="1485053">string</span><br>
<span class="lineno"></span><span class="op" id="1485060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1485063">func</span>&nbsp;<span class="ident" id="1485068">typestring</span><span class="op" id="1485078">(</span><span class="ident" id="1485079">x</span>&nbsp;<span class="keyword" id="1485081">interface</span><span class="op" id="1485090">{</span><span class="op" id="1485091">}</span><span class="op" id="1485092">)</span>&nbsp;<span class="builtintype" id="1485094">string</span>&nbsp;<span class="op" id="1485101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1485104">e</span>&nbsp;<span class="op" id="1485106">:=</span>&nbsp;<span class="op" id="1485109">(</span><span class="op" id="1485110">*</span><span class="ident" id="1485111">eface</span><span class="op" id="1485116">)</span><span class="op" id="1485117">(</span><span class="ident" id="1485118">unsafe</span><span class="op" id="1485124">.</span><span class="ident" id="1485125">Pointer</span><span class="op" id="1485132">(</span><span class="op" id="1485133">&amp;</span><span class="ident" id="1485134">x</span><span class="op" id="1485135">)</span><span class="op" id="1485136">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1485139">return</span>&nbsp;<span class="op" id="1485146">*</span><span class="ident" id="1485147">e</span><span class="op" id="1485148">.</span><span class="ident" id="1485149">_type</span><span class="op" id="1485154">.</span><span class="ident" id="1485155">_string</span><br>
<span class="lineno"></span><span class="op" id="1485163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1485166">//&nbsp;For&nbsp;calling&nbsp;from&nbsp;C.</span><br>
<span class="lineno"></span><span class="comment" id="1485189">//&nbsp;Prints&nbsp;an&nbsp;argument&nbsp;passed&nbsp;to&nbsp;panic.</span><br>
<span class="lineno">85</span><span class="comment" id="1485228">//&nbsp;There&#39;s&nbsp;room&nbsp;for&nbsp;arbitrary&nbsp;complexity&nbsp;here,&nbsp;but&nbsp;we&nbsp;keep&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="1485290">//&nbsp;simple&nbsp;and&nbsp;handle&nbsp;just&nbsp;a&nbsp;few&nbsp;important&nbsp;cases:&nbsp;int,&nbsp;string,&nbsp;and&nbsp;Stringer.</span><br>
<span class="lineno"></span><span class="keyword" id="1485366">func</span>&nbsp;<span class="ident" id="1485371">printany</span><span class="op" id="1485379">(</span><span class="ident" id="1485380">i</span>&nbsp;<span class="keyword" id="1485382">interface</span><span class="op" id="1485391">{</span><span class="op" id="1485392">}</span><span class="op" id="1485393">)</span>&nbsp;<span class="op" id="1485395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1485398">switch</span>&nbsp;<span class="ident" id="1485405">v</span>&nbsp;<span class="op" id="1485407">:=</span>&nbsp;<span class="ident" id="1485410">i</span><span class="op" id="1485411">.</span><span class="op" id="1485412">(</span><span class="keyword" id="1485413">type</span><span class="op" id="1485417">)</span>&nbsp;<span class="op" id="1485419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1485422">case</span>&nbsp;<span class="builtintype" id="1485427">nil</span><span class="op" id="1485430">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1485434">print</span><span class="op" id="1485439">(</span><span class="string" id="1485440">&#34;nil&#34;</span><span class="op" id="1485445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1485448">case</span>&nbsp;<span class="ident" id="1485453">stringer</span><span class="op" id="1485461">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1485465">print</span><span class="op" id="1485470">(</span><span class="ident" id="1485471">v</span><span class="op" id="1485472">.</span><span class="ident" id="1485473">String</span><span class="op" id="1485479">(</span><span class="op" id="1485480">)</span><span class="op" id="1485481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1485484">case</span>&nbsp;<span class="builtintype" id="1485489">error</span><span class="op" id="1485494">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1485498">print</span><span class="op" id="1485503">(</span><span class="ident" id="1485504">v</span><span class="op" id="1485505">.</span><span class="ident" id="1485506">Error</span><span class="op" id="1485511">(</span><span class="op" id="1485512">)</span><span class="op" id="1485513">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1485516">case</span>&nbsp;<span class="builtintype" id="1485521">int</span><span class="op" id="1485524">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1485528">print</span><span class="op" id="1485533">(</span><span class="ident" id="1485534">v</span><span class="op" id="1485535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1485538">case</span>&nbsp;<span class="builtintype" id="1485543">string</span><span class="op" id="1485549">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1485553">print</span><span class="op" id="1485558">(</span><span class="ident" id="1485559">v</span><span class="op" id="1485560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1485563">default</span><span class="op" id="1485570">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1485574">print</span><span class="op" id="1485579">(</span><span class="string" id="1485580">&#34;(&#34;</span><span class="op" id="1485583">,</span>&nbsp;<span class="ident" id="1485585">typestring</span><span class="op" id="1485595">(</span><span class="ident" id="1485596">i</span><span class="op" id="1485597">)</span><span class="op" id="1485598">,</span>&nbsp;<span class="string" id="1485600">&#34;)&nbsp;&#34;</span><span class="op" id="1485604">,</span>&nbsp;<span class="ident" id="1485606">i</span><span class="op" id="1485607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1485610">}</span><br>
<span class="lineno"></span><span class="op" id="1485612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1485615">//&nbsp;called&nbsp;from&nbsp;generated&nbsp;code</span><br>
<span class="lineno">105</span><span class="keyword" id="1485645">func</span>&nbsp;<span class="ident" id="1485650">panicwrap</span><span class="op" id="1485659">(</span><span class="ident" id="1485660">pkg</span><span class="op" id="1485663">,</span>&nbsp;<span class="ident" id="1485665">typ</span><span class="op" id="1485668">,</span>&nbsp;<span class="ident" id="1485670">meth</span>&nbsp;<span class="builtintype" id="1485675">string</span><span class="op" id="1485681">)</span>&nbsp;<span class="op" id="1485683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1485686">panic</span><span class="op" id="1485691">(</span><span class="string" id="1485692">&#34;value&nbsp;method&nbsp;&#34;</span>&nbsp;<span class="op" id="1485708">+</span>&nbsp;<span class="ident" id="1485710">pkg</span>&nbsp;<span class="op" id="1485714">+</span>&nbsp;<span class="string" id="1485716">&#34;.&#34;</span>&nbsp;<span class="op" id="1485720">+</span>&nbsp;<span class="ident" id="1485722">typ</span>&nbsp;<span class="op" id="1485726">+</span>&nbsp;<span class="string" id="1485728">&#34;.&#34;</span>&nbsp;<span class="op" id="1485732">+</span>&nbsp;<span class="ident" id="1485734">meth</span>&nbsp;<span class="op" id="1485739">+</span>&nbsp;<span class="string" id="1485741">&#34;&nbsp;called&nbsp;using&nbsp;nil&nbsp;*&#34;</span>&nbsp;<span class="op" id="1485763">+</span>&nbsp;<span class="ident" id="1485765">typ</span>&nbsp;<span class="op" id="1485769">+</span>&nbsp;<span class="string" id="1485771">&#34;&nbsp;pointer&#34;</span><span class="op" id="1485781">)</span><br>
<span class="lineno"></span><span class="op" id="1485783">}</span>
</div>
</body>
</html>
