<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4927192">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4927247">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4927301">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4927352">package</span>&nbsp;<span class="ident" id="4927360">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4927366">import</span>&nbsp;<span class="op" id="4927373">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4927376">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4927385">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4927400">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4927403">const</span>&nbsp;<span class="op" id="4927409">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927412">caseMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4927425">=</span>&nbsp;<span class="op" id="4927427">^</span><span class="builtintype" id="4927428">byte</span><span class="op" id="4927432">(</span><span class="num" id="4927433">0x20</span><span class="op" id="4927437">)</span>&nbsp;<span class="comment" id="4927439">//&nbsp;Mask&nbsp;to&nbsp;ignore&nbsp;case&nbsp;in&nbsp;ASCII.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927473">kelvin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4927486">=</span>&nbsp;<span class="string" id="4927488">&#39;\u212a&#39;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927498">smallLongEss</span>&nbsp;<span class="op" id="4927511">=</span>&nbsp;<span class="string" id="4927513">&#39;\u017f&#39;</span><br>
<span class="lineno"></span><span class="op" id="4927522">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4927525">//&nbsp;foldFunc&nbsp;returns&nbsp;one&nbsp;of&nbsp;four&nbsp;different&nbsp;case&nbsp;folding&nbsp;equivalence</span><br>
<span class="lineno"></span><span class="comment" id="4927592">//&nbsp;functions,&nbsp;from&nbsp;most&nbsp;general&nbsp;(and&nbsp;slow)&nbsp;to&nbsp;fastest:</span><br>
<span class="lineno">20</span><span class="comment" id="4927647">//</span><br>
<span class="lineno"></span><span class="comment" id="4927650">//&nbsp;1)&nbsp;bytes.EqualFold,&nbsp;if&nbsp;the&nbsp;key&nbsp;s&nbsp;contains&nbsp;any&nbsp;non-ASCII&nbsp;UTF-8</span><br>
<span class="lineno"></span><span class="comment" id="4927715">//&nbsp;2)&nbsp;equalFoldRight,&nbsp;if&nbsp;s&nbsp;contains&nbsp;special&nbsp;folding&nbsp;ASCII&nbsp;(&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;&#39;S&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="4927794">//&nbsp;3)&nbsp;asciiEqualFold,&nbsp;no&nbsp;special,&nbsp;but&nbsp;includes&nbsp;non-letters&nbsp;(including&nbsp;_)</span><br>
<span class="lineno"></span><span class="comment" id="4927867">//&nbsp;4)&nbsp;simpleLetterEqualFold,&nbsp;no&nbsp;specials,&nbsp;no&nbsp;non-letters.</span><br>
<span class="lineno">25</span><span class="comment" id="4927925">//</span><br>
<span class="lineno"></span><span class="comment" id="4927928">//&nbsp;The&nbsp;letters&nbsp;S&nbsp;and&nbsp;K&nbsp;are&nbsp;special&nbsp;because&nbsp;they&nbsp;map&nbsp;to&nbsp;3&nbsp;runes,&nbsp;not&nbsp;just&nbsp;2:</span><br>
<span class="lineno"></span><span class="comment" id="4928004">//&nbsp;&nbsp;*&nbsp;S&nbsp;maps&nbsp;to&nbsp;s&nbsp;and&nbsp;to&nbsp;U+017F&nbsp;&#39;ſ&#39;&nbsp;Latin&nbsp;small&nbsp;letter&nbsp;long&nbsp;s</span><br>
<span class="lineno"></span><span class="comment" id="4928067">//&nbsp;&nbsp;*&nbsp;k&nbsp;maps&nbsp;to&nbsp;K&nbsp;and&nbsp;to&nbsp;U+212A&nbsp;&#39;K&#39;&nbsp;Kelvin&nbsp;sign</span><br>
<span class="lineno"></span><span class="comment" id="4928117">//&nbsp;See&nbsp;http://play.golang.org/p/tTxjOc0OGo</span><br>
<span class="lineno">30</span><span class="comment" id="4928160">//</span><br>
<span class="lineno"></span><span class="comment" id="4928163">//&nbsp;The&nbsp;returned&nbsp;function&nbsp;is&nbsp;specialized&nbsp;for&nbsp;matching&nbsp;against&nbsp;s&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4928230">//&nbsp;should&nbsp;only&nbsp;be&nbsp;given&nbsp;s.&nbsp;It&#39;s&nbsp;not&nbsp;curried&nbsp;for&nbsp;performance&nbsp;reasons.</span><br>
<span class="lineno"></span><span class="keyword" id="4928299">func</span>&nbsp;<span class="ident" id="4928304">foldFunc</span><span class="op" id="4928312">(</span><span class="ident" id="4928313">s</span>&nbsp;<span class="op" id="4928315">[</span><span class="op" id="4928316">]</span><span class="builtintype" id="4928317">byte</span><span class="op" id="4928321">)</span>&nbsp;<span class="keyword" id="4928323">func</span><span class="op" id="4928327">(</span><span class="ident" id="4928328">s</span><span class="op" id="4928329">,</span>&nbsp;<span class="ident" id="4928331">t</span>&nbsp;<span class="op" id="4928333">[</span><span class="op" id="4928334">]</span><span class="builtintype" id="4928335">byte</span><span class="op" id="4928339">)</span>&nbsp;<span class="builtintype" id="4928341">bool</span>&nbsp;<span class="op" id="4928346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928349">nonLetter</span>&nbsp;<span class="op" id="4928359">:=</span>&nbsp;<span class="builtintype" id="4928362">false</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928369">special</span>&nbsp;<span class="op" id="4928377">:=</span>&nbsp;<span class="builtintype" id="4928380">false</span>&nbsp;<span class="comment" id="4928386">//&nbsp;special&nbsp;letter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928405">for</span>&nbsp;<span class="ident" id="4928409">_</span><span class="op" id="4928410">,</span>&nbsp;<span class="ident" id="4928412">b</span>&nbsp;<span class="op" id="4928414">:=</span>&nbsp;<span class="keyword" id="4928417">range</span>&nbsp;<span class="ident" id="4928423">s</span>&nbsp;<span class="op" id="4928425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928429">if</span>&nbsp;<span class="ident" id="4928432">b</span>&nbsp;<span class="op" id="4928434">&gt;=</span>&nbsp;<span class="ident" id="4928437">utf8</span><span class="op" id="4928441">.</span><span class="ident" id="4928442">RuneSelf</span>&nbsp;<span class="op" id="4928451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928456">return</span>&nbsp;<span class="ident" id="4928463">bytes</span><span class="op" id="4928468">.</span><span class="ident" id="4928469">EqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4928481">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928485">upper</span>&nbsp;<span class="op" id="4928491">:=</span>&nbsp;<span class="ident" id="4928494">b</span>&nbsp;<span class="op" id="4928496">&amp;</span>&nbsp;<span class="ident" id="4928498">caseMask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928509">if</span>&nbsp;<span class="ident" id="4928512">upper</span>&nbsp;<span class="op" id="4928518">&lt;</span>&nbsp;<span class="string" id="4928520">&#39;A&#39;</span>&nbsp;<span class="op" id="4928524">||</span>&nbsp;<span class="ident" id="4928527">upper</span>&nbsp;<span class="op" id="4928533">&gt;</span>&nbsp;<span class="string" id="4928535">&#39;Z&#39;</span>&nbsp;<span class="op" id="4928539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928544">nonLetter</span>&nbsp;<span class="op" id="4928554">=</span>&nbsp;<span class="builtintype" id="4928556">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4928563">}</span>&nbsp;<span class="keyword" id="4928565">else</span>&nbsp;<span class="keyword" id="4928570">if</span>&nbsp;<span class="ident" id="4928573">upper</span>&nbsp;<span class="op" id="4928579">==</span>&nbsp;<span class="string" id="4928582">&#39;K&#39;</span>&nbsp;<span class="op" id="4928586">||</span>&nbsp;<span class="ident" id="4928589">upper</span>&nbsp;<span class="op" id="4928595">==</span>&nbsp;<span class="string" id="4928598">&#39;S&#39;</span>&nbsp;<span class="op" id="4928602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4928607">//&nbsp;See&nbsp;above&nbsp;for&nbsp;why&nbsp;these&nbsp;letters&nbsp;are&nbsp;special.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928658">special</span>&nbsp;<span class="op" id="4928666">=</span>&nbsp;<span class="builtintype" id="4928668">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4928675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4928678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928681">if</span>&nbsp;<span class="ident" id="4928684">special</span>&nbsp;<span class="op" id="4928692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928696">return</span>&nbsp;<span class="ident" id="4928703">equalFoldRight</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4928719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928722">if</span>&nbsp;<span class="ident" id="4928725">nonLetter</span>&nbsp;<span class="op" id="4928735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928739">return</span>&nbsp;<span class="ident" id="4928746">asciiEqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4928762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928765">return</span>&nbsp;<span class="ident" id="4928772">simpleLetterEqualFold</span><br>
<span class="lineno">55</span><span class="op" id="4928794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4928797">//&nbsp;equalFoldRight&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;when&nbsp;s&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4928864">//&nbsp;known&nbsp;to&nbsp;be&nbsp;all&nbsp;ASCII&nbsp;(including&nbsp;punctuation),&nbsp;but&nbsp;contains&nbsp;an&nbsp;&#39;s&#39;,</span><br>
<span class="lineno"></span><span class="comment" id="4928935">//&nbsp;&#39;S&#39;,&nbsp;&#39;k&#39;,&nbsp;or&nbsp;&#39;K&#39;,&nbsp;requiring&nbsp;a&nbsp;Unicode&nbsp;fold&nbsp;on&nbsp;the&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno">60</span><span class="comment" id="4929000">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="4929029">func</span>&nbsp;<span class="ident" id="4929034">equalFoldRight</span><span class="op" id="4929048">(</span><span class="ident" id="4929049">s</span><span class="op" id="4929050">,</span>&nbsp;<span class="ident" id="4929052">t</span>&nbsp;<span class="op" id="4929054">[</span><span class="op" id="4929055">]</span><span class="builtintype" id="4929056">byte</span><span class="op" id="4929060">)</span>&nbsp;<span class="builtintype" id="4929062">bool</span>&nbsp;<span class="op" id="4929067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929070">for</span>&nbsp;<span class="ident" id="4929074">_</span><span class="op" id="4929075">,</span>&nbsp;<span class="ident" id="4929077">sb</span>&nbsp;<span class="op" id="4929080">:=</span>&nbsp;<span class="keyword" id="4929083">range</span>&nbsp;<span class="ident" id="4929089">s</span>&nbsp;<span class="op" id="4929091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929095">if</span>&nbsp;<span class="builtinfunc" id="4929098">len</span><span class="op" id="4929101">(</span><span class="ident" id="4929102">t</span><span class="op" id="4929103">)</span>&nbsp;<span class="op" id="4929105">==</span>&nbsp;<span class="num" id="4929108">0</span>&nbsp;<span class="op" id="4929110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929115">return</span>&nbsp;<span class="builtintype" id="4929122">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929134">tb</span>&nbsp;<span class="op" id="4929137">:=</span>&nbsp;<span class="ident" id="4929140">t</span><span class="op" id="4929141">[</span><span class="num" id="4929142">0</span><span class="op" id="4929143">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929147">if</span>&nbsp;<span class="ident" id="4929150">tb</span>&nbsp;<span class="op" id="4929153">&lt;</span>&nbsp;<span class="ident" id="4929155">utf8</span><span class="op" id="4929159">.</span><span class="ident" id="4929160">RuneSelf</span>&nbsp;<span class="op" id="4929169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929174">if</span>&nbsp;<span class="ident" id="4929177">sb</span>&nbsp;<span class="op" id="4929180">!=</span>&nbsp;<span class="ident" id="4929183">tb</span>&nbsp;<span class="op" id="4929186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929192">sbUpper</span>&nbsp;<span class="op" id="4929200">:=</span>&nbsp;<span class="ident" id="4929203">sb</span>&nbsp;<span class="op" id="4929206">&amp;</span>&nbsp;<span class="ident" id="4929208">caseMask</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929221">if</span>&nbsp;<span class="string" id="4929224">&#39;A&#39;</span>&nbsp;<span class="op" id="4929228">&lt;=</span>&nbsp;<span class="ident" id="4929231">sbUpper</span>&nbsp;<span class="op" id="4929239">&amp;&amp;</span>&nbsp;<span class="ident" id="4929242">sbUpper</span>&nbsp;<span class="op" id="4929250">&lt;=</span>&nbsp;<span class="string" id="4929253">&#39;Z&#39;</span>&nbsp;<span class="op" id="4929257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929264">if</span>&nbsp;<span class="ident" id="4929267">sbUpper</span>&nbsp;<span class="op" id="4929275">!=</span>&nbsp;<span class="ident" id="4929278">tb</span><span class="op" id="4929280">&amp;</span><span class="ident" id="4929281">caseMask</span>&nbsp;<span class="op" id="4929290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929298">return</span>&nbsp;<span class="builtintype" id="4929305">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929322">}</span>&nbsp;<span class="keyword" id="4929324">else</span>&nbsp;<span class="op" id="4929329">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929336">return</span>&nbsp;<span class="builtintype" id="4929343">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929363">t</span>&nbsp;<span class="op" id="4929365">=</span>&nbsp;<span class="ident" id="4929367">t</span><span class="op" id="4929368">[</span><span class="num" id="4929369">1</span><span class="op" id="4929370">:</span><span class="op" id="4929371">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929376">continue</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4929391">//&nbsp;sb&nbsp;is&nbsp;ASCII&nbsp;and&nbsp;t&nbsp;is&nbsp;not.&nbsp;t&nbsp;must&nbsp;be&nbsp;either&nbsp;kelvin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4929446">//&nbsp;sign&nbsp;or&nbsp;long&nbsp;s;&nbsp;sb&nbsp;must&nbsp;be&nbsp;s,&nbsp;S,&nbsp;k,&nbsp;or&nbsp;K.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929493">tr</span><span class="op" id="4929495">,</span>&nbsp;<span class="ident" id="4929497">size</span>&nbsp;<span class="op" id="4929502">:=</span>&nbsp;<span class="ident" id="4929505">utf8</span><span class="op" id="4929509">.</span><span class="ident" id="4929510">DecodeRune</span><span class="op" id="4929520">(</span><span class="ident" id="4929521">t</span><span class="op" id="4929522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929526">switch</span>&nbsp;<span class="ident" id="4929533">sb</span>&nbsp;<span class="op" id="4929536">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929540">case</span>&nbsp;<span class="string" id="4929545">&#39;s&#39;</span><span class="op" id="4929548">,</span>&nbsp;<span class="string" id="4929550">&#39;S&#39;</span><span class="op" id="4929553">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929558">if</span>&nbsp;<span class="ident" id="4929561">tr</span>&nbsp;<span class="op" id="4929564">!=</span>&nbsp;<span class="ident" id="4929567">smallLongEss</span>&nbsp;<span class="op" id="4929580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929586">return</span>&nbsp;<span class="builtintype" id="4929593">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929606">case</span>&nbsp;<span class="string" id="4929611">&#39;k&#39;</span><span class="op" id="4929614">,</span>&nbsp;<span class="string" id="4929616">&#39;K&#39;</span><span class="op" id="4929619">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929624">if</span>&nbsp;<span class="ident" id="4929627">tr</span>&nbsp;<span class="op" id="4929630">!=</span>&nbsp;<span class="ident" id="4929633">kelvin</span>&nbsp;<span class="op" id="4929640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929646">return</span>&nbsp;<span class="builtintype" id="4929653">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929666">default</span><span class="op" id="4929673">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929678">return</span>&nbsp;<span class="builtintype" id="4929685">false</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929697">t</span>&nbsp;<span class="op" id="4929699">=</span>&nbsp;<span class="ident" id="4929701">t</span><span class="op" id="4929702">[</span><span class="ident" id="4929703">size</span><span class="op" id="4929707">:</span><span class="op" id="4929708">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929715">if</span>&nbsp;<span class="builtinfunc" id="4929718">len</span><span class="op" id="4929721">(</span><span class="ident" id="4929722">t</span><span class="op" id="4929723">)</span>&nbsp;<span class="op" id="4929725">&gt;</span>&nbsp;<span class="num" id="4929727">0</span>&nbsp;<span class="op" id="4929729">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929733">return</span>&nbsp;<span class="builtintype" id="4929740">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929750">return</span>&nbsp;<span class="builtintype" id="4929757">true</span><br>
<span class="lineno"></span><span class="op" id="4929762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4929765">//&nbsp;asciiEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for&nbsp;use&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="4929835">//&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;(but&nbsp;may&nbsp;contain&nbsp;non-letters)&nbsp;and&nbsp;contains&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="4929899">//&nbsp;special-folding&nbsp;letters.</span><br>
<span class="lineno"></span><span class="comment" id="4929927">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="4929956">func</span>&nbsp;<span class="ident" id="4929961">asciiEqualFold</span><span class="op" id="4929975">(</span><span class="ident" id="4929976">s</span><span class="op" id="4929977">,</span>&nbsp;<span class="ident" id="4929979">t</span>&nbsp;<span class="op" id="4929981">[</span><span class="op" id="4929982">]</span><span class="builtintype" id="4929983">byte</span><span class="op" id="4929987">)</span>&nbsp;<span class="builtintype" id="4929989">bool</span>&nbsp;<span class="op" id="4929994">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929997">if</span>&nbsp;<span class="builtinfunc" id="4930000">len</span><span class="op" id="4930003">(</span><span class="ident" id="4930004">s</span><span class="op" id="4930005">)</span>&nbsp;<span class="op" id="4930007">!=</span>&nbsp;<span class="builtinfunc" id="4930010">len</span><span class="op" id="4930013">(</span><span class="ident" id="4930014">t</span><span class="op" id="4930015">)</span>&nbsp;<span class="op" id="4930017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930021">return</span>&nbsp;<span class="builtintype" id="4930028">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930038">for</span>&nbsp;<span class="ident" id="4930042">i</span><span class="op" id="4930043">,</span>&nbsp;<span class="ident" id="4930045">sb</span>&nbsp;<span class="op" id="4930048">:=</span>&nbsp;<span class="keyword" id="4930051">range</span>&nbsp;<span class="ident" id="4930057">s</span>&nbsp;<span class="op" id="4930059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4930063">tb</span>&nbsp;<span class="op" id="4930066">:=</span>&nbsp;<span class="ident" id="4930069">t</span><span class="op" id="4930070">[</span><span class="ident" id="4930071">i</span><span class="op" id="4930072">]</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930076">if</span>&nbsp;<span class="ident" id="4930079">sb</span>&nbsp;<span class="op" id="4930082">==</span>&nbsp;<span class="ident" id="4930085">tb</span>&nbsp;<span class="op" id="4930088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930093">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930108">if</span>&nbsp;<span class="op" id="4930111">(</span><span class="string" id="4930112">&#39;a&#39;</span>&nbsp;<span class="op" id="4930116">&lt;=</span>&nbsp;<span class="ident" id="4930119">sb</span>&nbsp;<span class="op" id="4930122">&amp;&amp;</span>&nbsp;<span class="ident" id="4930125">sb</span>&nbsp;<span class="op" id="4930128">&lt;=</span>&nbsp;<span class="string" id="4930131">&#39;z&#39;</span><span class="op" id="4930134">)</span>&nbsp;<span class="op" id="4930136">||</span>&nbsp;<span class="op" id="4930139">(</span><span class="string" id="4930140">&#39;A&#39;</span>&nbsp;<span class="op" id="4930144">&lt;=</span>&nbsp;<span class="ident" id="4930147">sb</span>&nbsp;<span class="op" id="4930150">&amp;&amp;</span>&nbsp;<span class="ident" id="4930153">sb</span>&nbsp;<span class="op" id="4930156">&lt;=</span>&nbsp;<span class="string" id="4930159">&#39;Z&#39;</span><span class="op" id="4930162">)</span>&nbsp;<span class="op" id="4930164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930169">if</span>&nbsp;<span class="ident" id="4930172">sb</span><span class="op" id="4930174">&amp;</span><span class="ident" id="4930175">caseMask</span>&nbsp;<span class="op" id="4930184">!=</span>&nbsp;<span class="ident" id="4930187">tb</span><span class="op" id="4930189">&amp;</span><span class="ident" id="4930190">caseMask</span>&nbsp;<span class="op" id="4930199">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930205">return</span>&nbsp;<span class="builtintype" id="4930212">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930225">}</span>&nbsp;<span class="keyword" id="4930227">else</span>&nbsp;<span class="op" id="4930232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930237">return</span>&nbsp;<span class="builtintype" id="4930244">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930252">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930258">return</span>&nbsp;<span class="builtintype" id="4930265">true</span><br>
<span class="lineno"></span><span class="op" id="4930270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4930273">//&nbsp;simpleLetterEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for</span><br>
<span class="lineno">130</span><span class="comment" id="4930341">//&nbsp;use&nbsp;when&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;letters&nbsp;(no&nbsp;underscores,&nbsp;etc)&nbsp;and&nbsp;also</span><br>
<span class="lineno"></span><span class="comment" id="4930407">//&nbsp;doesn&#39;t&nbsp;contain&nbsp;&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;or&nbsp;&#39;S&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="4930449">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="4930478">func</span>&nbsp;<span class="ident" id="4930483">simpleLetterEqualFold</span><span class="op" id="4930504">(</span><span class="ident" id="4930505">s</span><span class="op" id="4930506">,</span>&nbsp;<span class="ident" id="4930508">t</span>&nbsp;<span class="op" id="4930510">[</span><span class="op" id="4930511">]</span><span class="builtintype" id="4930512">byte</span><span class="op" id="4930516">)</span>&nbsp;<span class="builtintype" id="4930518">bool</span>&nbsp;<span class="op" id="4930523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930526">if</span>&nbsp;<span class="builtinfunc" id="4930529">len</span><span class="op" id="4930532">(</span><span class="ident" id="4930533">s</span><span class="op" id="4930534">)</span>&nbsp;<span class="op" id="4930536">!=</span>&nbsp;<span class="builtinfunc" id="4930539">len</span><span class="op" id="4930542">(</span><span class="ident" id="4930543">t</span><span class="op" id="4930544">)</span>&nbsp;<span class="op" id="4930546">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930550">return</span>&nbsp;<span class="builtintype" id="4930557">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930567">for</span>&nbsp;<span class="ident" id="4930571">i</span><span class="op" id="4930572">,</span>&nbsp;<span class="ident" id="4930574">b</span>&nbsp;<span class="op" id="4930576">:=</span>&nbsp;<span class="keyword" id="4930579">range</span>&nbsp;<span class="ident" id="4930585">s</span>&nbsp;<span class="op" id="4930587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930591">if</span>&nbsp;<span class="ident" id="4930594">b</span><span class="op" id="4930595">&amp;</span><span class="ident" id="4930596">caseMask</span>&nbsp;<span class="op" id="4930605">!=</span>&nbsp;<span class="ident" id="4930608">t</span><span class="op" id="4930609">[</span><span class="ident" id="4930610">i</span><span class="op" id="4930611">]</span><span class="op" id="4930612">&amp;</span><span class="ident" id="4930613">caseMask</span>&nbsp;<span class="op" id="4930622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930627">return</span>&nbsp;<span class="builtintype" id="4930634">false</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930648">return</span>&nbsp;<span class="builtintype" id="4930655">true</span><br>
<span class="lineno"></span><span class="op" id="4930660">}</span>
</div>
</body>
</html>
