<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html" class="current">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6452662">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6452717">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6452771">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6452822">package</span>&nbsp;<span class="ident" id="6452830">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6452835">import</span>&nbsp;<span class="op" id="6452842">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6452845">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6452853">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6452863">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6452866">type</span>&nbsp;<span class="ident" id="6452871">hostTest</span>&nbsp;<span class="keyword" id="6452880">struct</span>&nbsp;<span class="op" id="6452887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452890">host</span>&nbsp;<span class="builtintype" id="6452895">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452903">ips</span>&nbsp;&nbsp;<span class="op" id="6452908">[</span><span class="op" id="6452909">]</span><span class="ident" id="6452910">IP</span><br>
<span class="lineno">15</span><span class="op" id="6452913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6452916">var</span>&nbsp;<span class="ident" id="6452920">hosttests</span>&nbsp;<span class="op" id="6452930">=</span>&nbsp;<span class="op" id="6452932">[</span><span class="op" id="6452933">]</span><span class="ident" id="6452934">hostTest</span><span class="op" id="6452942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452945">{</span><span class="string" id="6452946">&#34;odin&#34;</span><span class="op" id="6452952">,</span>&nbsp;<span class="op" id="6452954">[</span><span class="op" id="6452955">]</span><span class="ident" id="6452956">IP</span><span class="op" id="6452958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452962">IPv4</span><span class="op" id="6452966">(</span><span class="num" id="6452967">127</span><span class="op" id="6452970">,</span>&nbsp;<span class="num" id="6452972">0</span><span class="op" id="6452973">,</span>&nbsp;<span class="num" id="6452975">0</span><span class="op" id="6452976">,</span>&nbsp;<span class="num" id="6452978">2</span><span class="op" id="6452979">)</span><span class="op" id="6452980">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452984">IPv4</span><span class="op" id="6452988">(</span><span class="num" id="6452989">127</span><span class="op" id="6452992">,</span>&nbsp;<span class="num" id="6452994">0</span><span class="op" id="6452995">,</span>&nbsp;<span class="num" id="6452997">0</span><span class="op" id="6452998">,</span>&nbsp;<span class="num" id="6453000">3</span><span class="op" id="6453001">)</span><span class="op" id="6453002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453006">ParseIP</span><span class="op" id="6453013">(</span><span class="string" id="6453014">&#34;::2&#34;</span><span class="op" id="6453019">)</span><span class="op" id="6453020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453023">}</span><span class="op" id="6453024">}</span><span class="op" id="6453025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453028">{</span><span class="string" id="6453029">&#34;thor&#34;</span><span class="op" id="6453035">,</span>&nbsp;<span class="op" id="6453037">[</span><span class="op" id="6453038">]</span><span class="ident" id="6453039">IP</span><span class="op" id="6453041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453045">IPv4</span><span class="op" id="6453049">(</span><span class="num" id="6453050">127</span><span class="op" id="6453053">,</span>&nbsp;<span class="num" id="6453055">1</span><span class="op" id="6453056">,</span>&nbsp;<span class="num" id="6453058">1</span><span class="op" id="6453059">,</span>&nbsp;<span class="num" id="6453061">1</span><span class="op" id="6453062">)</span><span class="op" id="6453063">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453066">}</span><span class="op" id="6453067">}</span><span class="op" id="6453068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453071">{</span><span class="string" id="6453072">&#34;loki&#34;</span><span class="op" id="6453078">,</span>&nbsp;<span class="op" id="6453080">[</span><span class="op" id="6453081">]</span><span class="ident" id="6453082">IP</span><span class="op" id="6453084">{</span><span class="op" id="6453085">}</span><span class="op" id="6453086">}</span><span class="op" id="6453087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453090">{</span><span class="string" id="6453091">&#34;ullr&#34;</span><span class="op" id="6453097">,</span>&nbsp;<span class="op" id="6453099">[</span><span class="op" id="6453100">]</span><span class="ident" id="6453101">IP</span><span class="op" id="6453103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453107">IPv4</span><span class="op" id="6453111">(</span><span class="num" id="6453112">127</span><span class="op" id="6453115">,</span>&nbsp;<span class="num" id="6453117">1</span><span class="op" id="6453118">,</span>&nbsp;<span class="num" id="6453120">1</span><span class="op" id="6453121">,</span>&nbsp;<span class="num" id="6453123">2</span><span class="op" id="6453124">)</span><span class="op" id="6453125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453128">}</span><span class="op" id="6453129">}</span><span class="op" id="6453130">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453133">{</span><span class="string" id="6453134">&#34;ullrhost&#34;</span><span class="op" id="6453144">,</span>&nbsp;<span class="op" id="6453146">[</span><span class="op" id="6453147">]</span><span class="ident" id="6453148">IP</span><span class="op" id="6453150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453154">IPv4</span><span class="op" id="6453158">(</span><span class="num" id="6453159">127</span><span class="op" id="6453162">,</span>&nbsp;<span class="num" id="6453164">1</span><span class="op" id="6453165">,</span>&nbsp;<span class="num" id="6453167">1</span><span class="op" id="6453168">,</span>&nbsp;<span class="num" id="6453170">2</span><span class="op" id="6453171">)</span><span class="op" id="6453172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453175">}</span><span class="op" id="6453176">}</span><span class="op" id="6453177">,</span><br>
<span class="lineno"></span><span class="op" id="6453179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6453182">func</span>&nbsp;<span class="ident" id="6453187">TestLookupStaticHost</span><span class="op" id="6453207">(</span><span class="ident" id="6453208">t</span>&nbsp;<span class="op" id="6453210">*</span><span class="ident" id="6453211">testing</span><span class="op" id="6453218">.</span><span class="ident" id="6453219">T</span><span class="op" id="6453220">)</span>&nbsp;<span class="op" id="6453222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453225">p</span>&nbsp;<span class="op" id="6453227">:=</span>&nbsp;<span class="ident" id="6453230">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453241">hostsPath</span>&nbsp;<span class="op" id="6453251">=</span>&nbsp;<span class="string" id="6453253">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6453271">for</span>&nbsp;<span class="ident" id="6453275">i</span>&nbsp;<span class="op" id="6453277">:=</span>&nbsp;<span class="num" id="6453280">0</span><span class="op" id="6453281">;</span>&nbsp;<span class="ident" id="6453283">i</span>&nbsp;<span class="op" id="6453285">&lt;</span>&nbsp;<span class="builtinfunc" id="6453287">len</span><span class="op" id="6453290">(</span><span class="ident" id="6453291">hosttests</span><span class="op" id="6453300">)</span><span class="op" id="6453301">;</span>&nbsp;<span class="ident" id="6453303">i</span><span class="op" id="6453304">++</span>&nbsp;<span class="op" id="6453307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453311">tt</span>&nbsp;<span class="op" id="6453314">:=</span>&nbsp;<span class="ident" id="6453317">hosttests</span><span class="op" id="6453326">[</span><span class="ident" id="6453327">i</span><span class="op" id="6453328">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453332">ips</span>&nbsp;<span class="op" id="6453336">:=</span>&nbsp;<span class="ident" id="6453339">lookupStaticHost</span><span class="op" id="6453355">(</span><span class="ident" id="6453356">tt</span><span class="op" id="6453358">.</span><span class="ident" id="6453359">host</span><span class="op" id="6453363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6453367">if</span>&nbsp;<span class="builtinfunc" id="6453370">len</span><span class="op" id="6453373">(</span><span class="ident" id="6453374">ips</span><span class="op" id="6453377">)</span>&nbsp;<span class="op" id="6453379">!=</span>&nbsp;<span class="builtinfunc" id="6453382">len</span><span class="op" id="6453385">(</span><span class="ident" id="6453386">tt</span><span class="op" id="6453388">.</span><span class="ident" id="6453389">ips</span><span class="op" id="6453392">)</span>&nbsp;<span class="op" id="6453394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453399">t</span><span class="op" id="6453400">.</span><span class="ident" id="6453401">Errorf</span><span class="op" id="6453407">(</span><span class="string" id="6453408">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6453434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6453440">len</span><span class="op" id="6453443">(</span><span class="ident" id="6453444">ips</span><span class="op" id="6453447">)</span><span class="op" id="6453448">,</span>&nbsp;<span class="builtinfunc" id="6453450">len</span><span class="op" id="6453453">(</span><span class="ident" id="6453454">tt</span><span class="op" id="6453456">.</span><span class="ident" id="6453457">ips</span><span class="op" id="6453460">)</span><span class="op" id="6453461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6453466">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6453481">for</span>&nbsp;<span class="ident" id="6453485">k</span><span class="op" id="6453486">,</span>&nbsp;<span class="ident" id="6453488">v</span>&nbsp;<span class="op" id="6453490">:=</span>&nbsp;<span class="keyword" id="6453493">range</span>&nbsp;<span class="ident" id="6453499">ips</span>&nbsp;<span class="op" id="6453503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6453508">if</span>&nbsp;<span class="ident" id="6453511">tt</span><span class="op" id="6453513">.</span><span class="ident" id="6453514">ips</span><span class="op" id="6453517">[</span><span class="ident" id="6453518">k</span><span class="op" id="6453519">]</span><span class="op" id="6453520">.</span><span class="ident" id="6453521">String</span><span class="op" id="6453527">(</span><span class="op" id="6453528">)</span>&nbsp;<span class="op" id="6453530">!=</span>&nbsp;<span class="ident" id="6453533">v</span>&nbsp;<span class="op" id="6453535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453541">t</span><span class="op" id="6453542">.</span><span class="ident" id="6453543">Errorf</span><span class="op" id="6453549">(</span><span class="string" id="6453550">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6453586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453593">tt</span><span class="op" id="6453595">.</span><span class="ident" id="6453596">host</span><span class="op" id="6453600">,</span>&nbsp;<span class="ident" id="6453602">v</span><span class="op" id="6453603">,</span>&nbsp;<span class="ident" id="6453605">tt</span><span class="op" id="6453607">.</span><span class="ident" id="6453608">ips</span><span class="op" id="6453611">[</span><span class="ident" id="6453612">k</span><span class="op" id="6453613">]</span><span class="op" id="6453614">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453629">hostsPath</span>&nbsp;<span class="op" id="6453639">=</span>&nbsp;<span class="ident" id="6453641">p</span><br>
<span class="lineno"></span><span class="op" id="6453643">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="6453646">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="6453700">func</span>&nbsp;<span class="ident" id="6453705">TestSingleLineHostsFile</span><span class="op" id="6453728">(</span><span class="ident" id="6453729">t</span>&nbsp;<span class="op" id="6453731">*</span><span class="ident" id="6453732">testing</span><span class="op" id="6453739">.</span><span class="ident" id="6453740">T</span><span class="op" id="6453741">)</span>&nbsp;<span class="op" id="6453743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453746">p</span>&nbsp;<span class="op" id="6453748">:=</span>&nbsp;<span class="ident" id="6453751">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453762">hostsPath</span>&nbsp;<span class="op" id="6453772">=</span>&nbsp;<span class="string" id="6453774">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453804">ips</span>&nbsp;<span class="op" id="6453808">:=</span>&nbsp;<span class="ident" id="6453811">lookupStaticHost</span><span class="op" id="6453827">(</span><span class="string" id="6453828">&#34;odin&#34;</span><span class="op" id="6453834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6453837">if</span>&nbsp;<span class="builtinfunc" id="6453840">len</span><span class="op" id="6453843">(</span><span class="ident" id="6453844">ips</span><span class="op" id="6453847">)</span>&nbsp;<span class="op" id="6453849">!=</span>&nbsp;<span class="num" id="6453852">1</span>&nbsp;<span class="op" id="6453854">||</span>&nbsp;<span class="ident" id="6453857">ips</span><span class="op" id="6453860">[</span><span class="num" id="6453861">0</span><span class="op" id="6453862">]</span>&nbsp;<span class="op" id="6453864">!=</span>&nbsp;<span class="string" id="6453867">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="6453879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453883">t</span><span class="op" id="6453884">.</span><span class="ident" id="6453885">Errorf</span><span class="op" id="6453891">(</span><span class="string" id="6453892">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6453924">,</span>&nbsp;<span class="ident" id="6453926">ips</span><span class="op" id="6453929">,</span>&nbsp;<span class="op" id="6453931">[</span><span class="op" id="6453932">]</span><span class="builtintype" id="6453933">string</span><span class="op" id="6453939">{</span><span class="string" id="6453940">&#34;127.0.0.2&#34;</span><span class="op" id="6453951">}</span><span class="op" id="6453952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453955">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453959">hostsPath</span>&nbsp;<span class="op" id="6453969">=</span>&nbsp;<span class="ident" id="6453971">p</span><br>
<span class="lineno"></span><span class="op" id="6453973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6453976">func</span>&nbsp;<span class="ident" id="6453981">TestLookupHost</span><span class="op" id="6453995">(</span><span class="ident" id="6453996">t</span>&nbsp;<span class="op" id="6453998">*</span><span class="ident" id="6453999">testing</span><span class="op" id="6454006">.</span><span class="ident" id="6454007">T</span><span class="op" id="6454008">)</span>&nbsp;<span class="op" id="6454010">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6454013">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6454072">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6454130">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6454183">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454207">addrs</span><span class="op" id="6454212">,</span>&nbsp;<span class="ident" id="6454214">_</span>&nbsp;<span class="op" id="6454216">:=</span>&nbsp;<span class="ident" id="6454219">LookupHost</span><span class="op" id="6454229">(</span><span class="string" id="6454230">&#34;localhost&#34;</span><span class="op" id="6454241">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454244">sort</span><span class="op" id="6454248">.</span><span class="ident" id="6454249">Strings</span><span class="op" id="6454256">(</span><span class="ident" id="6454257">addrs</span><span class="op" id="6454262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6454265">for</span>&nbsp;<span class="ident" id="6454269">i</span>&nbsp;<span class="op" id="6454271">:=</span>&nbsp;<span class="num" id="6454274">0</span><span class="op" id="6454275">;</span>&nbsp;<span class="ident" id="6454277">i</span><span class="op" id="6454278">+</span><span class="num" id="6454279">1</span>&nbsp;<span class="op" id="6454281">&lt;</span>&nbsp;<span class="builtinfunc" id="6454283">len</span><span class="op" id="6454286">(</span><span class="ident" id="6454287">addrs</span><span class="op" id="6454292">)</span><span class="op" id="6454293">;</span>&nbsp;<span class="ident" id="6454295">i</span><span class="op" id="6454296">++</span>&nbsp;<span class="op" id="6454299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6454303">if</span>&nbsp;<span class="ident" id="6454306">addrs</span><span class="op" id="6454311">[</span><span class="ident" id="6454312">i</span><span class="op" id="6454313">]</span>&nbsp;<span class="op" id="6454315">==</span>&nbsp;<span class="ident" id="6454318">addrs</span><span class="op" id="6454323">[</span><span class="ident" id="6454324">i</span><span class="op" id="6454325">+</span><span class="num" id="6454326">1</span><span class="op" id="6454327">]</span>&nbsp;<span class="op" id="6454329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454334">t</span><span class="op" id="6454335">.</span><span class="ident" id="6454336">Fatalf</span><span class="op" id="6454342">(</span><span class="string" id="6454343">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="6454400">,</span>&nbsp;<span class="ident" id="6454402">addrs</span><span class="op" id="6454407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6454411">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6454414">}</span><br>
<span class="lineno"></span><span class="op" id="6454416">}</span>
</div>
</body>
</html>
