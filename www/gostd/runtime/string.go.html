<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1653554">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1653609">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1653663">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1653714">package</span>&nbsp;<span class="ident" id="1653722">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1653731">import</span>&nbsp;<span class="op" id="1653738">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1653741">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1653750">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1653753">func</span>&nbsp;<span class="ident" id="1653758">concatstrings</span><span class="op" id="1653771">(</span><span class="ident" id="1653772">a</span>&nbsp;<span class="op" id="1653774">[</span><span class="op" id="1653775">]</span><span class="builtintype" id="1653776">string</span><span class="op" id="1653782">)</span>&nbsp;<span class="builtintype" id="1653784">string</span>&nbsp;<span class="op" id="1653791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1653794">idx</span>&nbsp;<span class="op" id="1653798">:=</span>&nbsp;<span class="num" id="1653801">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1653804">l</span>&nbsp;<span class="op" id="1653806">:=</span>&nbsp;<span class="num" id="1653809">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1653812">count</span>&nbsp;<span class="op" id="1653818">:=</span>&nbsp;<span class="num" id="1653821">0</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1653824">for</span>&nbsp;<span class="ident" id="1653828">i</span><span class="op" id="1653829">,</span>&nbsp;<span class="ident" id="1653831">x</span>&nbsp;<span class="op" id="1653833">:=</span>&nbsp;<span class="keyword" id="1653836">range</span>&nbsp;<span class="ident" id="1653842">a</span>&nbsp;<span class="op" id="1653844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1653848">n</span>&nbsp;<span class="op" id="1653850">:=</span>&nbsp;<span class="builtinfunc" id="1653853">len</span><span class="op" id="1653856">(</span><span class="ident" id="1653857">x</span><span class="op" id="1653858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1653862">if</span>&nbsp;<span class="ident" id="1653865">n</span>&nbsp;<span class="op" id="1653867">==</span>&nbsp;<span class="num" id="1653870">0</span>&nbsp;<span class="op" id="1653872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1653877">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1653888">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1653892">if</span>&nbsp;<span class="ident" id="1653895">l</span><span class="op" id="1653896">+</span><span class="ident" id="1653897">n</span>&nbsp;<span class="op" id="1653899">&lt;</span>&nbsp;<span class="ident" id="1653901">l</span>&nbsp;<span class="op" id="1653903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1653908">gothrow</span><span class="op" id="1653915">(</span><span class="string" id="1653916">&#34;string&nbsp;concatenation&nbsp;too&nbsp;long&#34;</span><span class="op" id="1653947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1653951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1653955">l</span>&nbsp;<span class="op" id="1653957">+=</span>&nbsp;<span class="ident" id="1653960">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1653964">count</span><span class="op" id="1653969">++</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1653974">idx</span>&nbsp;<span class="op" id="1653978">=</span>&nbsp;<span class="ident" id="1653980">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1653983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1653986">if</span>&nbsp;<span class="ident" id="1653989">count</span>&nbsp;<span class="op" id="1653995">==</span>&nbsp;<span class="num" id="1653998">0</span>&nbsp;<span class="op" id="1654000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1654004">return</span>&nbsp;<span class="string" id="1654011">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1654015">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1654018">if</span>&nbsp;<span class="ident" id="1654021">count</span>&nbsp;<span class="op" id="1654027">==</span>&nbsp;<span class="num" id="1654030">1</span>&nbsp;<span class="op" id="1654032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1654036">return</span>&nbsp;<span class="ident" id="1654043">a</span><span class="op" id="1654044">[</span><span class="ident" id="1654045">idx</span><span class="op" id="1654048">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1654051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1654054">s</span><span class="op" id="1654055">,</span>&nbsp;<span class="ident" id="1654057">b</span>&nbsp;<span class="op" id="1654059">:=</span>&nbsp;<span class="ident" id="1654062">rawstring</span><span class="op" id="1654071">(</span><span class="ident" id="1654072">l</span><span class="op" id="1654073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1654076">l</span>&nbsp;<span class="op" id="1654078">=</span>&nbsp;<span class="num" id="1654080">0</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1654083">for</span>&nbsp;<span class="ident" id="1654087">_</span><span class="op" id="1654088">,</span>&nbsp;<span class="ident" id="1654090">x</span>&nbsp;<span class="op" id="1654092">:=</span>&nbsp;<span class="keyword" id="1654095">range</span>&nbsp;<span class="ident" id="1654101">a</span>&nbsp;<span class="op" id="1654103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1654107">copy</span><span class="op" id="1654111">(</span><span class="ident" id="1654112">b</span><span class="op" id="1654113">[</span><span class="ident" id="1654114">l</span><span class="op" id="1654115">:</span><span class="op" id="1654116">]</span><span class="op" id="1654117">,</span>&nbsp;<span class="ident" id="1654119">x</span><span class="op" id="1654120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1654124">l</span>&nbsp;<span class="op" id="1654126">+=</span>&nbsp;<span class="builtinfunc" id="1654129">len</span><span class="op" id="1654132">(</span><span class="ident" id="1654133">x</span><span class="op" id="1654134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1654137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1654140">return</span>&nbsp;<span class="ident" id="1654147">s</span><br>
<span class="lineno">40</span><span class="op" id="1654149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1654152">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1654165">func</span>&nbsp;<span class="ident" id="1654170">concatstring2</span><span class="op" id="1654183">(</span><span class="ident" id="1654184">a</span>&nbsp;<span class="op" id="1654186">[</span><span class="num" id="1654187">2</span><span class="op" id="1654188">]</span><span class="builtintype" id="1654189">string</span><span class="op" id="1654195">)</span>&nbsp;<span class="builtintype" id="1654197">string</span>&nbsp;<span class="op" id="1654204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1654207">return</span>&nbsp;<span class="ident" id="1654214">concatstrings</span><span class="op" id="1654227">(</span><span class="ident" id="1654228">a</span><span class="op" id="1654229">[</span><span class="op" id="1654230">:</span><span class="op" id="1654231">]</span><span class="op" id="1654232">)</span><br>
<span class="lineno">45</span><span class="op" id="1654234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1654237">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1654250">func</span>&nbsp;<span class="ident" id="1654255">concatstring3</span><span class="op" id="1654268">(</span><span class="ident" id="1654269">a</span>&nbsp;<span class="op" id="1654271">[</span><span class="num" id="1654272">3</span><span class="op" id="1654273">]</span><span class="builtintype" id="1654274">string</span><span class="op" id="1654280">)</span>&nbsp;<span class="builtintype" id="1654282">string</span>&nbsp;<span class="op" id="1654289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1654292">return</span>&nbsp;<span class="ident" id="1654299">concatstrings</span><span class="op" id="1654312">(</span><span class="ident" id="1654313">a</span><span class="op" id="1654314">[</span><span class="op" id="1654315">:</span><span class="op" id="1654316">]</span><span class="op" id="1654317">)</span><br>
<span class="lineno">50</span><span class="op" id="1654319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1654322">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1654335">func</span>&nbsp;<span class="ident" id="1654340">concatstring4</span><span class="op" id="1654353">(</span><span class="ident" id="1654354">a</span>&nbsp;<span class="op" id="1654356">[</span><span class="num" id="1654357">4</span><span class="op" id="1654358">]</span><span class="builtintype" id="1654359">string</span><span class="op" id="1654365">)</span>&nbsp;<span class="builtintype" id="1654367">string</span>&nbsp;<span class="op" id="1654374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1654377">return</span>&nbsp;<span class="ident" id="1654384">concatstrings</span><span class="op" id="1654397">(</span><span class="ident" id="1654398">a</span><span class="op" id="1654399">[</span><span class="op" id="1654400">:</span><span class="op" id="1654401">]</span><span class="op" id="1654402">)</span><br>
<span class="lineno">55</span><span class="op" id="1654404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1654407">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1654420">func</span>&nbsp;<span class="ident" id="1654425">concatstring5</span><span class="op" id="1654438">(</span><span class="ident" id="1654439">a</span>&nbsp;<span class="op" id="1654441">[</span><span class="num" id="1654442">5</span><span class="op" id="1654443">]</span><span class="builtintype" id="1654444">string</span><span class="op" id="1654450">)</span>&nbsp;<span class="builtintype" id="1654452">string</span>&nbsp;<span class="op" id="1654459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1654462">return</span>&nbsp;<span class="ident" id="1654469">concatstrings</span><span class="op" id="1654482">(</span><span class="ident" id="1654483">a</span><span class="op" id="1654484">[</span><span class="op" id="1654485">:</span><span class="op" id="1654486">]</span><span class="op" id="1654487">)</span><br>
<span class="lineno">60</span><span class="op" id="1654489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1654492">func</span>&nbsp;<span class="ident" id="1654497">slicebytetostring</span><span class="op" id="1654514">(</span><span class="ident" id="1654515">b</span>&nbsp;<span class="op" id="1654517">[</span><span class="op" id="1654518">]</span><span class="builtintype" id="1654519">byte</span><span class="op" id="1654523">)</span>&nbsp;<span class="builtintype" id="1654525">string</span>&nbsp;<span class="op" id="1654532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1654535">if</span>&nbsp;<span class="ident" id="1654538">raceenabled</span>&nbsp;<span class="op" id="1654550">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1654553">len</span><span class="op" id="1654556">(</span><span class="ident" id="1654557">b</span><span class="op" id="1654558">)</span>&nbsp;<span class="op" id="1654560">&gt;</span>&nbsp;<span class="num" id="1654562">0</span>&nbsp;<span class="op" id="1654564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1654568">racereadrangepc</span><span class="op" id="1654583">(</span><span class="ident" id="1654584">unsafe</span><span class="op" id="1654590">.</span><span class="ident" id="1654591">Pointer</span><span class="op" id="1654598">(</span><span class="op" id="1654599">&amp;</span><span class="ident" id="1654600">b</span><span class="op" id="1654601">[</span><span class="num" id="1654602">0</span><span class="op" id="1654603">]</span><span class="op" id="1654604">)</span><span class="op" id="1654605">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1654610">uintptr</span><span class="op" id="1654617">(</span><span class="builtinfunc" id="1654618">len</span><span class="op" id="1654621">(</span><span class="ident" id="1654622">b</span><span class="op" id="1654623">)</span><span class="op" id="1654624">)</span><span class="op" id="1654625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1654630">getcallerpc</span><span class="op" id="1654641">(</span><span class="ident" id="1654642">unsafe</span><span class="op" id="1654648">.</span><span class="ident" id="1654649">Pointer</span><span class="op" id="1654656">(</span><span class="op" id="1654657">&amp;</span><span class="ident" id="1654658">b</span><span class="op" id="1654659">)</span><span class="op" id="1654660">)</span><span class="op" id="1654661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1654666">funcPC</span><span class="op" id="1654672">(</span><span class="ident" id="1654673">slicebytetostring</span><span class="op" id="1654690">)</span><span class="op" id="1654691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1654694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1654697">s</span><span class="op" id="1654698">,</span>&nbsp;<span class="ident" id="1654700">c</span>&nbsp;<span class="op" id="1654702">:=</span>&nbsp;<span class="ident" id="1654705">rawstring</span><span class="op" id="1654714">(</span><span class="builtinfunc" id="1654715">len</span><span class="op" id="1654718">(</span><span class="ident" id="1654719">b</span><span class="op" id="1654720">)</span><span class="op" id="1654721">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1654724">copy</span><span class="op" id="1654728">(</span><span class="ident" id="1654729">c</span><span class="op" id="1654730">,</span>&nbsp;<span class="ident" id="1654732">b</span><span class="op" id="1654733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1654736">return</span>&nbsp;<span class="ident" id="1654743">s</span><br>
<span class="lineno"></span><span class="op" id="1654745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1654748">func</span>&nbsp;<span class="ident" id="1654753">slicebytetostringtmp</span><span class="op" id="1654773">(</span><span class="ident" id="1654774">b</span>&nbsp;<span class="op" id="1654776">[</span><span class="op" id="1654777">]</span><span class="builtintype" id="1654778">byte</span><span class="op" id="1654782">)</span>&nbsp;<span class="builtintype" id="1654784">string</span>&nbsp;<span class="op" id="1654791">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1654794">//&nbsp;Return&nbsp;a&nbsp;&#34;string&#34;&nbsp;referring&nbsp;to&nbsp;the&nbsp;actual&nbsp;[]byte&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1654854">//&nbsp;This&nbsp;is&nbsp;only&nbsp;for&nbsp;use&nbsp;by&nbsp;internal&nbsp;compiler&nbsp;optimizations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1654914">//&nbsp;that&nbsp;know&nbsp;that&nbsp;the&nbsp;string&nbsp;form&nbsp;will&nbsp;be&nbsp;discarded&nbsp;before</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1654974">//&nbsp;the&nbsp;calling&nbsp;goroutine&nbsp;could&nbsp;possibly&nbsp;modify&nbsp;the&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1655035">//&nbsp;slice&nbsp;or&nbsp;synchronize&nbsp;with&nbsp;another&nbsp;goroutine.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1655084">//&nbsp;Today,&nbsp;the&nbsp;only&nbsp;such&nbsp;case&nbsp;is&nbsp;a&nbsp;m[string(k)]&nbsp;lookup&nbsp;where</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1655145">//&nbsp;m&nbsp;is&nbsp;a&nbsp;string-keyed&nbsp;map&nbsp;and&nbsp;k&nbsp;is&nbsp;a&nbsp;[]byte.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1655193">if</span>&nbsp;<span class="ident" id="1655196">raceenabled</span>&nbsp;<span class="op" id="1655208">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1655211">len</span><span class="op" id="1655214">(</span><span class="ident" id="1655215">b</span><span class="op" id="1655216">)</span>&nbsp;<span class="op" id="1655218">&gt;</span>&nbsp;<span class="num" id="1655220">0</span>&nbsp;<span class="op" id="1655222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655226">racereadrangepc</span><span class="op" id="1655241">(</span><span class="ident" id="1655242">unsafe</span><span class="op" id="1655248">.</span><span class="ident" id="1655249">Pointer</span><span class="op" id="1655256">(</span><span class="op" id="1655257">&amp;</span><span class="ident" id="1655258">b</span><span class="op" id="1655259">[</span><span class="num" id="1655260">0</span><span class="op" id="1655261">]</span><span class="op" id="1655262">)</span><span class="op" id="1655263">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1655268">uintptr</span><span class="op" id="1655275">(</span><span class="builtinfunc" id="1655276">len</span><span class="op" id="1655279">(</span><span class="ident" id="1655280">b</span><span class="op" id="1655281">)</span><span class="op" id="1655282">)</span><span class="op" id="1655283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655288">getcallerpc</span><span class="op" id="1655299">(</span><span class="ident" id="1655300">unsafe</span><span class="op" id="1655306">.</span><span class="ident" id="1655307">Pointer</span><span class="op" id="1655314">(</span><span class="op" id="1655315">&amp;</span><span class="ident" id="1655316">b</span><span class="op" id="1655317">)</span><span class="op" id="1655318">)</span><span class="op" id="1655319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655324">funcPC</span><span class="op" id="1655330">(</span><span class="ident" id="1655331">slicebytetostringtmp</span><span class="op" id="1655351">)</span><span class="op" id="1655352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1655355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1655358">return</span>&nbsp;<span class="op" id="1655365">*</span><span class="op" id="1655366">(</span><span class="op" id="1655367">*</span><span class="builtintype" id="1655368">string</span><span class="op" id="1655374">)</span><span class="op" id="1655375">(</span><span class="ident" id="1655376">unsafe</span><span class="op" id="1655382">.</span><span class="ident" id="1655383">Pointer</span><span class="op" id="1655390">(</span><span class="op" id="1655391">&amp;</span><span class="ident" id="1655392">b</span><span class="op" id="1655393">)</span><span class="op" id="1655394">)</span><br>
<span class="lineno">90</span><span class="op" id="1655396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1655399">func</span>&nbsp;<span class="ident" id="1655404">stringtoslicebyte</span><span class="op" id="1655421">(</span><span class="ident" id="1655422">s</span>&nbsp;<span class="builtintype" id="1655424">string</span><span class="op" id="1655430">)</span>&nbsp;<span class="op" id="1655432">[</span><span class="op" id="1655433">]</span><span class="builtintype" id="1655434">byte</span>&nbsp;<span class="op" id="1655439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655442">b</span>&nbsp;<span class="op" id="1655444">:=</span>&nbsp;<span class="ident" id="1655447">rawbyteslice</span><span class="op" id="1655459">(</span><span class="builtinfunc" id="1655460">len</span><span class="op" id="1655463">(</span><span class="ident" id="1655464">s</span><span class="op" id="1655465">)</span><span class="op" id="1655466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1655469">copy</span><span class="op" id="1655473">(</span><span class="ident" id="1655474">b</span><span class="op" id="1655475">,</span>&nbsp;<span class="ident" id="1655477">s</span><span class="op" id="1655478">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1655481">return</span>&nbsp;<span class="ident" id="1655488">b</span><br>
<span class="lineno"></span><span class="op" id="1655490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1655493">func</span>&nbsp;<span class="ident" id="1655498">stringtoslicerune</span><span class="op" id="1655515">(</span><span class="ident" id="1655516">s</span>&nbsp;<span class="builtintype" id="1655518">string</span><span class="op" id="1655524">)</span>&nbsp;<span class="op" id="1655526">[</span><span class="op" id="1655527">]</span><span class="builtintype" id="1655528">rune</span>&nbsp;<span class="op" id="1655533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1655536">//&nbsp;two&nbsp;passes.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1655552">//&nbsp;unlike&nbsp;slicerunetostring,&nbsp;no&nbsp;race&nbsp;because&nbsp;strings&nbsp;are&nbsp;immutable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655621">n</span>&nbsp;<span class="op" id="1655623">:=</span>&nbsp;<span class="num" id="1655626">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655629">t</span>&nbsp;<span class="op" id="1655631">:=</span>&nbsp;<span class="ident" id="1655634">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1655637">for</span>&nbsp;<span class="builtinfunc" id="1655641">len</span><span class="op" id="1655644">(</span><span class="ident" id="1655645">s</span><span class="op" id="1655646">)</span>&nbsp;<span class="op" id="1655648">&gt;</span>&nbsp;<span class="num" id="1655650">0</span>&nbsp;<span class="op" id="1655652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655656">_</span><span class="op" id="1655657">,</span>&nbsp;<span class="ident" id="1655659">k</span>&nbsp;<span class="op" id="1655661">:=</span>&nbsp;<span class="ident" id="1655664">charntorune</span><span class="op" id="1655675">(</span><span class="ident" id="1655676">s</span><span class="op" id="1655677">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655681">s</span>&nbsp;<span class="op" id="1655683">=</span>&nbsp;<span class="ident" id="1655685">s</span><span class="op" id="1655686">[</span><span class="ident" id="1655687">k</span><span class="op" id="1655688">:</span><span class="op" id="1655689">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655693">n</span><span class="op" id="1655694">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1655698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655701">a</span>&nbsp;<span class="op" id="1655703">:=</span>&nbsp;<span class="ident" id="1655706">rawruneslice</span><span class="op" id="1655718">(</span><span class="ident" id="1655719">n</span><span class="op" id="1655720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655723">n</span>&nbsp;<span class="op" id="1655725">=</span>&nbsp;<span class="num" id="1655727">0</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1655730">for</span>&nbsp;<span class="builtinfunc" id="1655734">len</span><span class="op" id="1655737">(</span><span class="ident" id="1655738">t</span><span class="op" id="1655739">)</span>&nbsp;<span class="op" id="1655741">&gt;</span>&nbsp;<span class="num" id="1655743">0</span>&nbsp;<span class="op" id="1655745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655749">r</span><span class="op" id="1655750">,</span>&nbsp;<span class="ident" id="1655752">k</span>&nbsp;<span class="op" id="1655754">:=</span>&nbsp;<span class="ident" id="1655757">charntorune</span><span class="op" id="1655768">(</span><span class="ident" id="1655769">t</span><span class="op" id="1655770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655774">t</span>&nbsp;<span class="op" id="1655776">=</span>&nbsp;<span class="ident" id="1655778">t</span><span class="op" id="1655779">[</span><span class="ident" id="1655780">k</span><span class="op" id="1655781">:</span><span class="op" id="1655782">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655786">a</span><span class="op" id="1655787">[</span><span class="ident" id="1655788">n</span><span class="op" id="1655789">]</span>&nbsp;<span class="op" id="1655791">=</span>&nbsp;<span class="ident" id="1655793">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655797">n</span><span class="op" id="1655798">++</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1655802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1655805">return</span>&nbsp;<span class="ident" id="1655812">a</span><br>
<span class="lineno"></span><span class="op" id="1655814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1655817">func</span>&nbsp;<span class="ident" id="1655822">slicerunetostring</span><span class="op" id="1655839">(</span><span class="ident" id="1655840">a</span>&nbsp;<span class="op" id="1655842">[</span><span class="op" id="1655843">]</span><span class="builtintype" id="1655844">rune</span><span class="op" id="1655848">)</span>&nbsp;<span class="builtintype" id="1655850">string</span>&nbsp;<span class="op" id="1655857">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1655860">if</span>&nbsp;<span class="ident" id="1655863">raceenabled</span>&nbsp;<span class="op" id="1655875">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1655878">len</span><span class="op" id="1655881">(</span><span class="ident" id="1655882">a</span><span class="op" id="1655883">)</span>&nbsp;<span class="op" id="1655885">&gt;</span>&nbsp;<span class="num" id="1655887">0</span>&nbsp;<span class="op" id="1655889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655893">racereadrangepc</span><span class="op" id="1655908">(</span><span class="ident" id="1655909">unsafe</span><span class="op" id="1655915">.</span><span class="ident" id="1655916">Pointer</span><span class="op" id="1655923">(</span><span class="op" id="1655924">&amp;</span><span class="ident" id="1655925">a</span><span class="op" id="1655926">[</span><span class="num" id="1655927">0</span><span class="op" id="1655928">]</span><span class="op" id="1655929">)</span><span class="op" id="1655930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1655935">uintptr</span><span class="op" id="1655942">(</span><span class="builtinfunc" id="1655943">len</span><span class="op" id="1655946">(</span><span class="ident" id="1655947">a</span><span class="op" id="1655948">)</span><span class="op" id="1655949">)</span><span class="op" id="1655950">*</span><span class="ident" id="1655951">unsafe</span><span class="op" id="1655957">.</span><span class="ident" id="1655958">Sizeof</span><span class="op" id="1655964">(</span><span class="ident" id="1655965">a</span><span class="op" id="1655966">[</span><span class="num" id="1655967">0</span><span class="op" id="1655968">]</span><span class="op" id="1655969">)</span><span class="op" id="1655970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1655975">getcallerpc</span><span class="op" id="1655986">(</span><span class="ident" id="1655987">unsafe</span><span class="op" id="1655993">.</span><span class="ident" id="1655994">Pointer</span><span class="op" id="1656001">(</span><span class="op" id="1656002">&amp;</span><span class="ident" id="1656003">a</span><span class="op" id="1656004">)</span><span class="op" id="1656005">)</span><span class="op" id="1656006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1656011">funcPC</span><span class="op" id="1656017">(</span><span class="ident" id="1656018">slicerunetostring</span><span class="op" id="1656035">)</span><span class="op" id="1656036">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1656039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656042">var</span>&nbsp;<span class="ident" id="1656046">dum</span>&nbsp;<span class="op" id="1656050">[</span><span class="num" id="1656051">4</span><span class="op" id="1656052">]</span><span class="builtintype" id="1656053">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1656059">size1</span>&nbsp;<span class="op" id="1656065">:=</span>&nbsp;<span class="num" id="1656068">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656071">for</span>&nbsp;<span class="ident" id="1656075">_</span><span class="op" id="1656076">,</span>&nbsp;<span class="ident" id="1656078">r</span>&nbsp;<span class="op" id="1656080">:=</span>&nbsp;<span class="keyword" id="1656083">range</span>&nbsp;<span class="ident" id="1656089">a</span>&nbsp;<span class="op" id="1656091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1656095">size1</span>&nbsp;<span class="op" id="1656101">+=</span>&nbsp;<span class="ident" id="1656104">runetochar</span><span class="op" id="1656114">(</span><span class="ident" id="1656115">dum</span><span class="op" id="1656118">[</span><span class="op" id="1656119">:</span><span class="op" id="1656120">]</span><span class="op" id="1656121">,</span>&nbsp;<span class="ident" id="1656123">r</span><span class="op" id="1656124">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1656127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1656130">s</span><span class="op" id="1656131">,</span>&nbsp;<span class="ident" id="1656133">b</span>&nbsp;<span class="op" id="1656135">:=</span>&nbsp;<span class="ident" id="1656138">rawstring</span><span class="op" id="1656147">(</span><span class="ident" id="1656148">size1</span>&nbsp;<span class="op" id="1656154">+</span>&nbsp;<span class="num" id="1656156">3</span><span class="op" id="1656157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1656160">size2</span>&nbsp;<span class="op" id="1656166">:=</span>&nbsp;<span class="num" id="1656169">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656172">for</span>&nbsp;<span class="ident" id="1656176">_</span><span class="op" id="1656177">,</span>&nbsp;<span class="ident" id="1656179">r</span>&nbsp;<span class="op" id="1656181">:=</span>&nbsp;<span class="keyword" id="1656184">range</span>&nbsp;<span class="ident" id="1656190">a</span>&nbsp;<span class="op" id="1656192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1656196">//&nbsp;check&nbsp;for&nbsp;race</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656216">if</span>&nbsp;<span class="ident" id="1656219">size2</span>&nbsp;<span class="op" id="1656225">&gt;=</span>&nbsp;<span class="ident" id="1656228">size1</span>&nbsp;<span class="op" id="1656234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656239">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1656247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1656251">size2</span>&nbsp;<span class="op" id="1656257">+=</span>&nbsp;<span class="ident" id="1656260">runetochar</span><span class="op" id="1656270">(</span><span class="ident" id="1656271">b</span><span class="op" id="1656272">[</span><span class="ident" id="1656273">size2</span><span class="op" id="1656278">:</span><span class="op" id="1656279">]</span><span class="op" id="1656280">,</span>&nbsp;<span class="ident" id="1656282">r</span><span class="op" id="1656283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1656286">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656289">return</span>&nbsp;<span class="ident" id="1656296">s</span><span class="op" id="1656297">[</span><span class="op" id="1656298">:</span><span class="ident" id="1656299">size2</span><span class="op" id="1656304">]</span><br>
<span class="lineno"></span><span class="op" id="1656306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1656309">type</span>&nbsp;<span class="ident" id="1656314">stringStruct</span>&nbsp;<span class="keyword" id="1656327">struct</span>&nbsp;<span class="op" id="1656334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1656337">str</span>&nbsp;<span class="ident" id="1656341">unsafe</span><span class="op" id="1656347">.</span><span class="ident" id="1656348">Pointer</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1656357">len</span>&nbsp;<span class="builtintype" id="1656361">int</span><br>
<span class="lineno"></span><span class="op" id="1656365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1656368">func</span>&nbsp;<span class="ident" id="1656373">intstring</span><span class="op" id="1656382">(</span><span class="ident" id="1656383">v</span>&nbsp;<span class="ident" id="1656385">int64</span><span class="op" id="1656390">)</span>&nbsp;<span class="builtintype" id="1656392">string</span>&nbsp;<span class="op" id="1656399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1656402">s</span><span class="op" id="1656403">,</span>&nbsp;<span class="ident" id="1656405">b</span>&nbsp;<span class="op" id="1656407">:=</span>&nbsp;<span class="ident" id="1656410">rawstring</span><span class="op" id="1656419">(</span><span class="num" id="1656420">4</span><span class="op" id="1656421">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1656424">n</span>&nbsp;<span class="op" id="1656426">:=</span>&nbsp;<span class="ident" id="1656429">runetochar</span><span class="op" id="1656439">(</span><span class="ident" id="1656440">b</span><span class="op" id="1656441">,</span>&nbsp;<span class="builtintype" id="1656443">rune</span><span class="op" id="1656447">(</span><span class="ident" id="1656448">v</span><span class="op" id="1656449">)</span><span class="op" id="1656450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656453">return</span>&nbsp;<span class="ident" id="1656460">s</span><span class="op" id="1656461">[</span><span class="op" id="1656462">:</span><span class="ident" id="1656463">n</span><span class="op" id="1656464">]</span><br>
<span class="lineno"></span><span class="op" id="1656466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1656469">//&nbsp;stringiter&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;next</span><br>
<span class="lineno">155</span><span class="comment" id="1656513">//&nbsp;rune&nbsp;after&nbsp;the&nbsp;rune&nbsp;that&nbsp;starts&nbsp;at&nbsp;s[k].</span><br>
<span class="lineno"></span><span class="keyword" id="1656557">func</span>&nbsp;<span class="ident" id="1656562">stringiter</span><span class="op" id="1656572">(</span><span class="ident" id="1656573">s</span>&nbsp;<span class="builtintype" id="1656575">string</span><span class="op" id="1656581">,</span>&nbsp;<span class="ident" id="1656583">k</span>&nbsp;<span class="builtintype" id="1656585">int</span><span class="op" id="1656588">)</span>&nbsp;<span class="builtintype" id="1656590">int</span>&nbsp;<span class="op" id="1656594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656597">if</span>&nbsp;<span class="ident" id="1656600">k</span>&nbsp;<span class="op" id="1656602">&gt;=</span>&nbsp;<span class="builtinfunc" id="1656605">len</span><span class="op" id="1656608">(</span><span class="ident" id="1656609">s</span><span class="op" id="1656610">)</span>&nbsp;<span class="op" id="1656612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1656616">//&nbsp;0&nbsp;is&nbsp;end&nbsp;of&nbsp;iteration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656643">return</span>&nbsp;<span class="num" id="1656650">0</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1656653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1656657">c</span>&nbsp;<span class="op" id="1656659">:=</span>&nbsp;<span class="ident" id="1656662">s</span><span class="op" id="1656663">[</span><span class="ident" id="1656664">k</span><span class="op" id="1656665">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656668">if</span>&nbsp;<span class="ident" id="1656671">c</span>&nbsp;<span class="op" id="1656673">&lt;</span>&nbsp;<span class="ident" id="1656675">runeself</span>&nbsp;<span class="op" id="1656684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656688">return</span>&nbsp;<span class="ident" id="1656695">k</span>&nbsp;<span class="op" id="1656697">+</span>&nbsp;<span class="num" id="1656699">1</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1656702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1656706">//&nbsp;multi-char&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1656726">_</span><span class="op" id="1656727">,</span>&nbsp;<span class="ident" id="1656729">n</span>&nbsp;<span class="op" id="1656731">:=</span>&nbsp;<span class="ident" id="1656734">charntorune</span><span class="op" id="1656745">(</span><span class="ident" id="1656746">s</span><span class="op" id="1656747">[</span><span class="ident" id="1656748">k</span><span class="op" id="1656749">:</span><span class="op" id="1656750">]</span><span class="op" id="1656751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656754">return</span>&nbsp;<span class="ident" id="1656761">k</span>&nbsp;<span class="op" id="1656763">+</span>&nbsp;<span class="ident" id="1656765">n</span><br>
<span class="lineno">170</span><span class="op" id="1656767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1656770">//&nbsp;stringiter2&nbsp;returns&nbsp;the&nbsp;rune&nbsp;that&nbsp;starts&nbsp;at&nbsp;s[k]</span><br>
<span class="lineno"></span><span class="comment" id="1656822">//&nbsp;and&nbsp;the&nbsp;index&nbsp;where&nbsp;the&nbsp;next&nbsp;rune&nbsp;starts.</span><br>
<span class="lineno"></span><span class="keyword" id="1656867">func</span>&nbsp;<span class="ident" id="1656872">stringiter2</span><span class="op" id="1656883">(</span><span class="ident" id="1656884">s</span>&nbsp;<span class="builtintype" id="1656886">string</span><span class="op" id="1656892">,</span>&nbsp;<span class="ident" id="1656894">k</span>&nbsp;<span class="builtintype" id="1656896">int</span><span class="op" id="1656899">)</span>&nbsp;<span class="op" id="1656901">(</span><span class="builtintype" id="1656902">int</span><span class="op" id="1656905">,</span>&nbsp;<span class="builtintype" id="1656907">rune</span><span class="op" id="1656911">)</span>&nbsp;<span class="op" id="1656913">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656916">if</span>&nbsp;<span class="ident" id="1656919">k</span>&nbsp;<span class="op" id="1656921">&gt;=</span>&nbsp;<span class="builtinfunc" id="1656924">len</span><span class="op" id="1656927">(</span><span class="ident" id="1656928">s</span><span class="op" id="1656929">)</span>&nbsp;<span class="op" id="1656931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1656935">//&nbsp;0&nbsp;is&nbsp;end&nbsp;of&nbsp;iteration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656962">return</span>&nbsp;<span class="num" id="1656969">0</span><span class="op" id="1656970">,</span>&nbsp;<span class="num" id="1656972">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1656975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1656979">c</span>&nbsp;<span class="op" id="1656981">:=</span>&nbsp;<span class="ident" id="1656984">s</span><span class="op" id="1656985">[</span><span class="ident" id="1656986">k</span><span class="op" id="1656987">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1656990">if</span>&nbsp;<span class="ident" id="1656993">c</span>&nbsp;<span class="op" id="1656995">&lt;</span>&nbsp;<span class="ident" id="1656997">runeself</span>&nbsp;<span class="op" id="1657006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1657010">return</span>&nbsp;<span class="ident" id="1657017">k</span>&nbsp;<span class="op" id="1657019">+</span>&nbsp;<span class="num" id="1657021">1</span><span class="op" id="1657022">,</span>&nbsp;<span class="builtintype" id="1657024">rune</span><span class="op" id="1657028">(</span><span class="ident" id="1657029">c</span><span class="op" id="1657030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1657033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1657037">//&nbsp;multi-char&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1657057">r</span><span class="op" id="1657058">,</span>&nbsp;<span class="ident" id="1657060">n</span>&nbsp;<span class="op" id="1657062">:=</span>&nbsp;<span class="ident" id="1657065">charntorune</span><span class="op" id="1657076">(</span><span class="ident" id="1657077">s</span><span class="op" id="1657078">[</span><span class="ident" id="1657079">k</span><span class="op" id="1657080">:</span><span class="op" id="1657081">]</span><span class="op" id="1657082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1657085">return</span>&nbsp;<span class="ident" id="1657092">k</span>&nbsp;<span class="op" id="1657094">+</span>&nbsp;<span class="ident" id="1657096">n</span><span class="op" id="1657097">,</span>&nbsp;<span class="ident" id="1657099">r</span><br>
<span class="lineno"></span><span class="op" id="1657101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="1657104">//&nbsp;rawstring&nbsp;allocates&nbsp;storage&nbsp;for&nbsp;a&nbsp;new&nbsp;string.&nbsp;The&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="1657166">//&nbsp;string&nbsp;and&nbsp;byte&nbsp;slice&nbsp;both&nbsp;refer&nbsp;to&nbsp;the&nbsp;same&nbsp;storage.</span><br>
<span class="lineno"></span><span class="comment" id="1657223">//&nbsp;The&nbsp;storage&nbsp;is&nbsp;not&nbsp;zeroed.&nbsp;Callers&nbsp;should&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="1657272">//&nbsp;b&nbsp;to&nbsp;set&nbsp;the&nbsp;string&nbsp;contents&nbsp;and&nbsp;then&nbsp;drop&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="1657321">func</span>&nbsp;<span class="ident" id="1657326">rawstring</span><span class="op" id="1657335">(</span><span class="ident" id="1657336">size</span>&nbsp;<span class="builtintype" id="1657341">int</span><span class="op" id="1657344">)</span>&nbsp;<span class="op" id="1657346">(</span><span class="ident" id="1657347">s</span>&nbsp;<span class="builtintype" id="1657349">string</span><span class="op" id="1657355">,</span>&nbsp;<span class="ident" id="1657357">b</span>&nbsp;<span class="op" id="1657359">[</span><span class="op" id="1657360">]</span><span class="builtintype" id="1657361">byte</span><span class="op" id="1657365">)</span>&nbsp;<span class="op" id="1657367">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1657370">p</span>&nbsp;<span class="op" id="1657372">:=</span>&nbsp;<span class="ident" id="1657375">mallocgc</span><span class="op" id="1657383">(</span><span class="builtintype" id="1657384">uintptr</span><span class="op" id="1657391">(</span><span class="ident" id="1657392">size</span><span class="op" id="1657396">)</span><span class="op" id="1657397">,</span>&nbsp;<span class="ident" id="1657399">nil</span><span class="op" id="1657402">,</span>&nbsp;<span class="ident" id="1657404">flagNoScan</span><span class="op" id="1657414">|</span><span class="ident" id="1657415">flagNoZero</span><span class="op" id="1657425">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1657429">(</span><span class="op" id="1657430">*</span><span class="ident" id="1657431">stringStruct</span><span class="op" id="1657443">)</span><span class="op" id="1657444">(</span><span class="ident" id="1657445">unsafe</span><span class="op" id="1657451">.</span><span class="ident" id="1657452">Pointer</span><span class="op" id="1657459">(</span><span class="op" id="1657460">&amp;</span><span class="ident" id="1657461">s</span><span class="op" id="1657462">)</span><span class="op" id="1657463">)</span><span class="op" id="1657464">.</span><span class="ident" id="1657465">str</span>&nbsp;<span class="op" id="1657469">=</span>&nbsp;<span class="ident" id="1657471">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1657474">(</span><span class="op" id="1657475">*</span><span class="ident" id="1657476">stringStruct</span><span class="op" id="1657488">)</span><span class="op" id="1657489">(</span><span class="ident" id="1657490">unsafe</span><span class="op" id="1657496">.</span><span class="ident" id="1657497">Pointer</span><span class="op" id="1657504">(</span><span class="op" id="1657505">&amp;</span><span class="ident" id="1657506">s</span><span class="op" id="1657507">)</span><span class="op" id="1657508">)</span><span class="op" id="1657509">.</span><span class="builtinfunc" id="1657510">len</span>&nbsp;<span class="op" id="1657514">=</span>&nbsp;<span class="ident" id="1657516">size</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1657523">(</span><span class="op" id="1657524">*</span><span class="ident" id="1657525">slice</span><span class="op" id="1657530">)</span><span class="op" id="1657531">(</span><span class="ident" id="1657532">unsafe</span><span class="op" id="1657538">.</span><span class="ident" id="1657539">Pointer</span><span class="op" id="1657546">(</span><span class="op" id="1657547">&amp;</span><span class="ident" id="1657548">b</span><span class="op" id="1657549">)</span><span class="op" id="1657550">)</span><span class="op" id="1657551">.</span><span class="ident" id="1657552">array</span>&nbsp;<span class="op" id="1657558">=</span>&nbsp;<span class="op" id="1657560">(</span><span class="op" id="1657561">*</span><span class="builtintype" id="1657562">uint8</span><span class="op" id="1657567">)</span><span class="op" id="1657568">(</span><span class="ident" id="1657569">p</span><span class="op" id="1657570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1657573">(</span><span class="op" id="1657574">*</span><span class="ident" id="1657575">slice</span><span class="op" id="1657580">)</span><span class="op" id="1657581">(</span><span class="ident" id="1657582">unsafe</span><span class="op" id="1657588">.</span><span class="ident" id="1657589">Pointer</span><span class="op" id="1657596">(</span><span class="op" id="1657597">&amp;</span><span class="ident" id="1657598">b</span><span class="op" id="1657599">)</span><span class="op" id="1657600">)</span><span class="op" id="1657601">.</span><span class="builtinfunc" id="1657602">len</span>&nbsp;<span class="op" id="1657606">=</span>&nbsp;<span class="builtintype" id="1657608">uint</span><span class="op" id="1657612">(</span><span class="ident" id="1657613">size</span><span class="op" id="1657617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1657620">(</span><span class="op" id="1657621">*</span><span class="ident" id="1657622">slice</span><span class="op" id="1657627">)</span><span class="op" id="1657628">(</span><span class="ident" id="1657629">unsafe</span><span class="op" id="1657635">.</span><span class="ident" id="1657636">Pointer</span><span class="op" id="1657643">(</span><span class="op" id="1657644">&amp;</span><span class="ident" id="1657645">b</span><span class="op" id="1657646">)</span><span class="op" id="1657647">)</span><span class="op" id="1657648">.</span><span class="builtinfunc" id="1657649">cap</span>&nbsp;<span class="op" id="1657653">=</span>&nbsp;<span class="builtintype" id="1657655">uint</span><span class="op" id="1657659">(</span><span class="ident" id="1657660">size</span><span class="op" id="1657664">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1657668">for</span>&nbsp;<span class="op" id="1657672">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1657676">ms</span>&nbsp;<span class="op" id="1657679">:=</span>&nbsp;<span class="ident" id="1657682">maxstring</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1657694">if</span>&nbsp;<span class="builtintype" id="1657697">uintptr</span><span class="op" id="1657704">(</span><span class="ident" id="1657705">size</span><span class="op" id="1657709">)</span>&nbsp;<span class="op" id="1657711">&lt;=</span>&nbsp;<span class="builtintype" id="1657714">uintptr</span><span class="op" id="1657721">(</span><span class="ident" id="1657722">ms</span><span class="op" id="1657724">)</span>&nbsp;<span class="op" id="1657726">||</span>&nbsp;<span class="ident" id="1657729">casuintptr</span><span class="op" id="1657739">(</span><span class="op" id="1657740">(</span><span class="op" id="1657741">*</span><span class="builtintype" id="1657742">uintptr</span><span class="op" id="1657749">)</span><span class="op" id="1657750">(</span><span class="ident" id="1657751">unsafe</span><span class="op" id="1657757">.</span><span class="ident" id="1657758">Pointer</span><span class="op" id="1657765">(</span><span class="op" id="1657766">&amp;</span><span class="ident" id="1657767">maxstring</span><span class="op" id="1657776">)</span><span class="op" id="1657777">)</span><span class="op" id="1657778">,</span>&nbsp;<span class="builtintype" id="1657780">uintptr</span><span class="op" id="1657787">(</span><span class="ident" id="1657788">ms</span><span class="op" id="1657790">)</span><span class="op" id="1657791">,</span>&nbsp;<span class="builtintype" id="1657793">uintptr</span><span class="op" id="1657800">(</span><span class="ident" id="1657801">size</span><span class="op" id="1657805">)</span><span class="op" id="1657806">)</span>&nbsp;<span class="op" id="1657808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1657813">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1657822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1657825">}</span><br>
<span class="lineno">210</span><span class="op" id="1657827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1657830">//&nbsp;rawbyteslice&nbsp;allocates&nbsp;a&nbsp;new&nbsp;byte&nbsp;slice.&nbsp;The&nbsp;byte&nbsp;slice&nbsp;is&nbsp;not&nbsp;zeroed.</span><br>
<span class="lineno"></span><span class="keyword" id="1657904">func</span>&nbsp;<span class="ident" id="1657909">rawbyteslice</span><span class="op" id="1657921">(</span><span class="ident" id="1657922">size</span>&nbsp;<span class="builtintype" id="1657927">int</span><span class="op" id="1657930">)</span>&nbsp;<span class="op" id="1657932">(</span><span class="ident" id="1657933">b</span>&nbsp;<span class="op" id="1657935">[</span><span class="op" id="1657936">]</span><span class="builtintype" id="1657937">byte</span><span class="op" id="1657941">)</span>&nbsp;<span class="op" id="1657943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1657946">cap</span>&nbsp;<span class="op" id="1657950">:=</span>&nbsp;<span class="ident" id="1657953">goroundupsize</span><span class="op" id="1657966">(</span><span class="builtintype" id="1657967">uintptr</span><span class="op" id="1657974">(</span><span class="ident" id="1657975">size</span><span class="op" id="1657979">)</span><span class="op" id="1657980">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1657983">p</span>&nbsp;<span class="op" id="1657985">:=</span>&nbsp;<span class="ident" id="1657988">mallocgc</span><span class="op" id="1657996">(</span><span class="builtinfunc" id="1657997">cap</span><span class="op" id="1658000">,</span>&nbsp;<span class="ident" id="1658002">nil</span><span class="op" id="1658005">,</span>&nbsp;<span class="ident" id="1658007">flagNoScan</span><span class="op" id="1658017">|</span><span class="ident" id="1658018">flagNoZero</span><span class="op" id="1658028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1658031">if</span>&nbsp;<span class="builtinfunc" id="1658034">cap</span>&nbsp;<span class="op" id="1658038">!=</span>&nbsp;<span class="builtintype" id="1658041">uintptr</span><span class="op" id="1658048">(</span><span class="ident" id="1658049">size</span><span class="op" id="1658053">)</span>&nbsp;<span class="op" id="1658055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1658059">memclr</span><span class="op" id="1658065">(</span><span class="ident" id="1658066">add</span><span class="op" id="1658069">(</span><span class="ident" id="1658070">p</span><span class="op" id="1658071">,</span>&nbsp;<span class="builtintype" id="1658073">uintptr</span><span class="op" id="1658080">(</span><span class="ident" id="1658081">size</span><span class="op" id="1658085">)</span><span class="op" id="1658086">)</span><span class="op" id="1658087">,</span>&nbsp;<span class="builtinfunc" id="1658089">cap</span><span class="op" id="1658092">-</span><span class="builtintype" id="1658093">uintptr</span><span class="op" id="1658100">(</span><span class="ident" id="1658101">size</span><span class="op" id="1658105">)</span><span class="op" id="1658106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1658109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1658113">(</span><span class="op" id="1658114">*</span><span class="ident" id="1658115">slice</span><span class="op" id="1658120">)</span><span class="op" id="1658121">(</span><span class="ident" id="1658122">unsafe</span><span class="op" id="1658128">.</span><span class="ident" id="1658129">Pointer</span><span class="op" id="1658136">(</span><span class="op" id="1658137">&amp;</span><span class="ident" id="1658138">b</span><span class="op" id="1658139">)</span><span class="op" id="1658140">)</span><span class="op" id="1658141">.</span><span class="ident" id="1658142">array</span>&nbsp;<span class="op" id="1658148">=</span>&nbsp;<span class="op" id="1658150">(</span><span class="op" id="1658151">*</span><span class="builtintype" id="1658152">uint8</span><span class="op" id="1658157">)</span><span class="op" id="1658158">(</span><span class="ident" id="1658159">p</span><span class="op" id="1658160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1658163">(</span><span class="op" id="1658164">*</span><span class="ident" id="1658165">slice</span><span class="op" id="1658170">)</span><span class="op" id="1658171">(</span><span class="ident" id="1658172">unsafe</span><span class="op" id="1658178">.</span><span class="ident" id="1658179">Pointer</span><span class="op" id="1658186">(</span><span class="op" id="1658187">&amp;</span><span class="ident" id="1658188">b</span><span class="op" id="1658189">)</span><span class="op" id="1658190">)</span><span class="op" id="1658191">.</span><span class="builtinfunc" id="1658192">len</span>&nbsp;<span class="op" id="1658196">=</span>&nbsp;<span class="builtintype" id="1658198">uint</span><span class="op" id="1658202">(</span><span class="ident" id="1658203">size</span><span class="op" id="1658207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1658210">(</span><span class="op" id="1658211">*</span><span class="ident" id="1658212">slice</span><span class="op" id="1658217">)</span><span class="op" id="1658218">(</span><span class="ident" id="1658219">unsafe</span><span class="op" id="1658225">.</span><span class="ident" id="1658226">Pointer</span><span class="op" id="1658233">(</span><span class="op" id="1658234">&amp;</span><span class="ident" id="1658235">b</span><span class="op" id="1658236">)</span><span class="op" id="1658237">)</span><span class="op" id="1658238">.</span><span class="builtinfunc" id="1658239">cap</span>&nbsp;<span class="op" id="1658243">=</span>&nbsp;<span class="builtintype" id="1658245">uint</span><span class="op" id="1658249">(</span><span class="builtinfunc" id="1658250">cap</span><span class="op" id="1658253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1658256">return</span><br>
<span class="lineno"></span><span class="op" id="1658263">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="1658266">//&nbsp;rawruneslice&nbsp;allocates&nbsp;a&nbsp;new&nbsp;rune&nbsp;slice.&nbsp;The&nbsp;rune&nbsp;slice&nbsp;is&nbsp;not&nbsp;zeroed.</span><br>
<span class="lineno"></span><span class="keyword" id="1658340">func</span>&nbsp;<span class="ident" id="1658345">rawruneslice</span><span class="op" id="1658357">(</span><span class="ident" id="1658358">size</span>&nbsp;<span class="builtintype" id="1658363">int</span><span class="op" id="1658366">)</span>&nbsp;<span class="op" id="1658368">(</span><span class="ident" id="1658369">b</span>&nbsp;<span class="op" id="1658371">[</span><span class="op" id="1658372">]</span><span class="builtintype" id="1658373">rune</span><span class="op" id="1658377">)</span>&nbsp;<span class="op" id="1658379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1658382">if</span>&nbsp;<span class="builtintype" id="1658385">uintptr</span><span class="op" id="1658392">(</span><span class="ident" id="1658393">size</span><span class="op" id="1658397">)</span>&nbsp;<span class="op" id="1658399">&gt;</span>&nbsp;<span class="ident" id="1658401">maxmem</span><span class="op" id="1658407">/</span><span class="num" id="1658408">4</span>&nbsp;<span class="op" id="1658410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1658414">gothrow</span><span class="op" id="1658421">(</span><span class="string" id="1658422">&#34;out&nbsp;of&nbsp;memory&#34;</span><span class="op" id="1658437">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1658440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1658443">mem</span>&nbsp;<span class="op" id="1658447">:=</span>&nbsp;<span class="ident" id="1658450">goroundupsize</span><span class="op" id="1658463">(</span><span class="builtintype" id="1658464">uintptr</span><span class="op" id="1658471">(</span><span class="ident" id="1658472">size</span><span class="op" id="1658476">)</span>&nbsp;<span class="op" id="1658478">*</span>&nbsp;<span class="num" id="1658480">4</span><span class="op" id="1658481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1658484">p</span>&nbsp;<span class="op" id="1658486">:=</span>&nbsp;<span class="ident" id="1658489">mallocgc</span><span class="op" id="1658497">(</span><span class="ident" id="1658498">mem</span><span class="op" id="1658501">,</span>&nbsp;<span class="ident" id="1658503">nil</span><span class="op" id="1658506">,</span>&nbsp;<span class="ident" id="1658508">flagNoScan</span><span class="op" id="1658518">|</span><span class="ident" id="1658519">flagNoZero</span><span class="op" id="1658529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1658532">if</span>&nbsp;<span class="ident" id="1658535">mem</span>&nbsp;<span class="op" id="1658539">!=</span>&nbsp;<span class="builtintype" id="1658542">uintptr</span><span class="op" id="1658549">(</span><span class="ident" id="1658550">size</span><span class="op" id="1658554">)</span><span class="op" id="1658555">*</span><span class="num" id="1658556">4</span>&nbsp;<span class="op" id="1658558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1658562">memclr</span><span class="op" id="1658568">(</span><span class="ident" id="1658569">add</span><span class="op" id="1658572">(</span><span class="ident" id="1658573">p</span><span class="op" id="1658574">,</span>&nbsp;<span class="builtintype" id="1658576">uintptr</span><span class="op" id="1658583">(</span><span class="ident" id="1658584">size</span><span class="op" id="1658588">)</span><span class="op" id="1658589">*</span><span class="num" id="1658590">4</span><span class="op" id="1658591">)</span><span class="op" id="1658592">,</span>&nbsp;<span class="ident" id="1658594">mem</span><span class="op" id="1658597">-</span><span class="builtintype" id="1658598">uintptr</span><span class="op" id="1658605">(</span><span class="ident" id="1658606">size</span><span class="op" id="1658610">)</span><span class="op" id="1658611">*</span><span class="num" id="1658612">4</span><span class="op" id="1658613">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1658616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1658620">(</span><span class="op" id="1658621">*</span><span class="ident" id="1658622">slice</span><span class="op" id="1658627">)</span><span class="op" id="1658628">(</span><span class="ident" id="1658629">unsafe</span><span class="op" id="1658635">.</span><span class="ident" id="1658636">Pointer</span><span class="op" id="1658643">(</span><span class="op" id="1658644">&amp;</span><span class="ident" id="1658645">b</span><span class="op" id="1658646">)</span><span class="op" id="1658647">)</span><span class="op" id="1658648">.</span><span class="ident" id="1658649">array</span>&nbsp;<span class="op" id="1658655">=</span>&nbsp;<span class="op" id="1658657">(</span><span class="op" id="1658658">*</span><span class="builtintype" id="1658659">uint8</span><span class="op" id="1658664">)</span><span class="op" id="1658665">(</span><span class="ident" id="1658666">p</span><span class="op" id="1658667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1658670">(</span><span class="op" id="1658671">*</span><span class="ident" id="1658672">slice</span><span class="op" id="1658677">)</span><span class="op" id="1658678">(</span><span class="ident" id="1658679">unsafe</span><span class="op" id="1658685">.</span><span class="ident" id="1658686">Pointer</span><span class="op" id="1658693">(</span><span class="op" id="1658694">&amp;</span><span class="ident" id="1658695">b</span><span class="op" id="1658696">)</span><span class="op" id="1658697">)</span><span class="op" id="1658698">.</span><span class="builtinfunc" id="1658699">len</span>&nbsp;<span class="op" id="1658703">=</span>&nbsp;<span class="builtintype" id="1658705">uint</span><span class="op" id="1658709">(</span><span class="ident" id="1658710">size</span><span class="op" id="1658714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1658717">(</span><span class="op" id="1658718">*</span><span class="ident" id="1658719">slice</span><span class="op" id="1658724">)</span><span class="op" id="1658725">(</span><span class="ident" id="1658726">unsafe</span><span class="op" id="1658732">.</span><span class="ident" id="1658733">Pointer</span><span class="op" id="1658740">(</span><span class="op" id="1658741">&amp;</span><span class="ident" id="1658742">b</span><span class="op" id="1658743">)</span><span class="op" id="1658744">)</span><span class="op" id="1658745">.</span><span class="builtinfunc" id="1658746">cap</span>&nbsp;<span class="op" id="1658750">=</span>&nbsp;<span class="builtintype" id="1658752">uint</span><span class="op" id="1658756">(</span><span class="ident" id="1658757">mem</span>&nbsp;<span class="op" id="1658761">/</span>&nbsp;<span class="num" id="1658763">4</span><span class="op" id="1658764">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1658767">return</span><br>
<span class="lineno"></span><span class="op" id="1658774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1658777">//&nbsp;used&nbsp;by&nbsp;cmd/cgo</span><br>
<span class="lineno"></span><span class="keyword" id="1658796">func</span>&nbsp;<span class="ident" id="1658801">gobytes</span><span class="op" id="1658808">(</span><span class="ident" id="1658809">p</span>&nbsp;<span class="op" id="1658811">*</span><span class="builtintype" id="1658812">byte</span><span class="op" id="1658816">,</span>&nbsp;<span class="ident" id="1658818">n</span>&nbsp;<span class="builtintype" id="1658820">int</span><span class="op" id="1658823">)</span>&nbsp;<span class="op" id="1658825">[</span><span class="op" id="1658826">]</span><span class="builtintype" id="1658827">byte</span>&nbsp;<span class="op" id="1658832">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1658835">if</span>&nbsp;<span class="ident" id="1658838">n</span>&nbsp;<span class="op" id="1658840">==</span>&nbsp;<span class="num" id="1658843">0</span>&nbsp;<span class="op" id="1658845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1658849">return</span>&nbsp;<span class="builtinfunc" id="1658856">make</span><span class="op" id="1658860">(</span><span class="op" id="1658861">[</span><span class="op" id="1658862">]</span><span class="builtintype" id="1658863">byte</span><span class="op" id="1658867">,</span>&nbsp;<span class="num" id="1658869">0</span><span class="op" id="1658870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1658873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1658876">x</span>&nbsp;<span class="op" id="1658878">:=</span>&nbsp;<span class="builtinfunc" id="1658881">make</span><span class="op" id="1658885">(</span><span class="op" id="1658886">[</span><span class="op" id="1658887">]</span><span class="builtintype" id="1658888">byte</span><span class="op" id="1658892">,</span>&nbsp;<span class="ident" id="1658894">n</span><span class="op" id="1658895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1658898">memmove</span><span class="op" id="1658905">(</span><span class="ident" id="1658906">unsafe</span><span class="op" id="1658912">.</span><span class="ident" id="1658913">Pointer</span><span class="op" id="1658920">(</span><span class="op" id="1658921">&amp;</span><span class="ident" id="1658922">x</span><span class="op" id="1658923">[</span><span class="num" id="1658924">0</span><span class="op" id="1658925">]</span><span class="op" id="1658926">)</span><span class="op" id="1658927">,</span>&nbsp;<span class="ident" id="1658929">unsafe</span><span class="op" id="1658935">.</span><span class="ident" id="1658936">Pointer</span><span class="op" id="1658943">(</span><span class="ident" id="1658944">p</span><span class="op" id="1658945">)</span><span class="op" id="1658946">,</span>&nbsp;<span class="builtintype" id="1658948">uintptr</span><span class="op" id="1658955">(</span><span class="ident" id="1658956">n</span><span class="op" id="1658957">)</span><span class="op" id="1658958">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1658961">return</span>&nbsp;<span class="ident" id="1658968">x</span><br>
<span class="lineno"></span><span class="op" id="1658970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1658973">func</span>&nbsp;<span class="ident" id="1658978">gostringsize</span><span class="op" id="1658990">(</span><span class="ident" id="1658991">n</span>&nbsp;<span class="builtintype" id="1658993">int</span><span class="op" id="1658996">)</span>&nbsp;<span class="builtintype" id="1658998">string</span>&nbsp;<span class="op" id="1659005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1659008">s</span><span class="op" id="1659009">,</span>&nbsp;<span class="ident" id="1659011">_</span>&nbsp;<span class="op" id="1659013">:=</span>&nbsp;<span class="ident" id="1659016">rawstring</span><span class="op" id="1659025">(</span><span class="ident" id="1659026">n</span><span class="op" id="1659027">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659030">return</span>&nbsp;<span class="ident" id="1659037">s</span><br>
<span class="lineno"></span><span class="op" id="1659039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1659042">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1659056">func</span>&nbsp;<span class="ident" id="1659061">findnull</span><span class="op" id="1659069">(</span><span class="op" id="1659070">*</span><span class="builtintype" id="1659071">byte</span><span class="op" id="1659075">)</span>&nbsp;<span class="builtintype" id="1659077">int</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="1659082">func</span>&nbsp;<span class="ident" id="1659087">gostring</span><span class="op" id="1659095">(</span><span class="ident" id="1659096">p</span>&nbsp;<span class="op" id="1659098">*</span><span class="builtintype" id="1659099">byte</span><span class="op" id="1659103">)</span>&nbsp;<span class="builtintype" id="1659105">string</span>&nbsp;<span class="op" id="1659112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1659115">l</span>&nbsp;<span class="op" id="1659117">:=</span>&nbsp;<span class="ident" id="1659120">findnull</span><span class="op" id="1659128">(</span><span class="ident" id="1659129">p</span><span class="op" id="1659130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659133">if</span>&nbsp;<span class="ident" id="1659136">l</span>&nbsp;<span class="op" id="1659138">==</span>&nbsp;<span class="num" id="1659141">0</span>&nbsp;<span class="op" id="1659143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659147">return</span>&nbsp;<span class="string" id="1659154">&#34;&#34;</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1659158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1659161">s</span><span class="op" id="1659162">,</span>&nbsp;<span class="ident" id="1659164">b</span>&nbsp;<span class="op" id="1659166">:=</span>&nbsp;<span class="ident" id="1659169">rawstring</span><span class="op" id="1659178">(</span><span class="ident" id="1659179">l</span><span class="op" id="1659180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1659183">memmove</span><span class="op" id="1659190">(</span><span class="ident" id="1659191">unsafe</span><span class="op" id="1659197">.</span><span class="ident" id="1659198">Pointer</span><span class="op" id="1659205">(</span><span class="op" id="1659206">&amp;</span><span class="ident" id="1659207">b</span><span class="op" id="1659208">[</span><span class="num" id="1659209">0</span><span class="op" id="1659210">]</span><span class="op" id="1659211">)</span><span class="op" id="1659212">,</span>&nbsp;<span class="ident" id="1659214">unsafe</span><span class="op" id="1659220">.</span><span class="ident" id="1659221">Pointer</span><span class="op" id="1659228">(</span><span class="ident" id="1659229">p</span><span class="op" id="1659230">)</span><span class="op" id="1659231">,</span>&nbsp;<span class="builtintype" id="1659233">uintptr</span><span class="op" id="1659240">(</span><span class="ident" id="1659241">l</span><span class="op" id="1659242">)</span><span class="op" id="1659243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659246">return</span>&nbsp;<span class="ident" id="1659253">s</span><br>
<span class="lineno"></span><span class="op" id="1659255">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="keyword" id="1659258">func</span>&nbsp;<span class="ident" id="1659263">gostringn</span><span class="op" id="1659272">(</span><span class="ident" id="1659273">p</span>&nbsp;<span class="op" id="1659275">*</span><span class="builtintype" id="1659276">byte</span><span class="op" id="1659280">,</span>&nbsp;<span class="ident" id="1659282">l</span>&nbsp;<span class="builtintype" id="1659284">int</span><span class="op" id="1659287">)</span>&nbsp;<span class="builtintype" id="1659289">string</span>&nbsp;<span class="op" id="1659296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659299">if</span>&nbsp;<span class="ident" id="1659302">l</span>&nbsp;<span class="op" id="1659304">==</span>&nbsp;<span class="num" id="1659307">0</span>&nbsp;<span class="op" id="1659309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659313">return</span>&nbsp;<span class="string" id="1659320">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1659324">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1659327">s</span><span class="op" id="1659328">,</span>&nbsp;<span class="ident" id="1659330">b</span>&nbsp;<span class="op" id="1659332">:=</span>&nbsp;<span class="ident" id="1659335">rawstring</span><span class="op" id="1659344">(</span><span class="ident" id="1659345">l</span><span class="op" id="1659346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1659349">memmove</span><span class="op" id="1659356">(</span><span class="ident" id="1659357">unsafe</span><span class="op" id="1659363">.</span><span class="ident" id="1659364">Pointer</span><span class="op" id="1659371">(</span><span class="op" id="1659372">&amp;</span><span class="ident" id="1659373">b</span><span class="op" id="1659374">[</span><span class="num" id="1659375">0</span><span class="op" id="1659376">]</span><span class="op" id="1659377">)</span><span class="op" id="1659378">,</span>&nbsp;<span class="ident" id="1659380">unsafe</span><span class="op" id="1659386">.</span><span class="ident" id="1659387">Pointer</span><span class="op" id="1659394">(</span><span class="ident" id="1659395">p</span><span class="op" id="1659396">)</span><span class="op" id="1659397">,</span>&nbsp;<span class="builtintype" id="1659399">uintptr</span><span class="op" id="1659406">(</span><span class="ident" id="1659407">l</span><span class="op" id="1659408">)</span><span class="op" id="1659409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659412">return</span>&nbsp;<span class="ident" id="1659419">s</span><br>
<span class="lineno"></span><span class="op" id="1659421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="keyword" id="1659424">func</span>&nbsp;<span class="ident" id="1659429">index</span><span class="op" id="1659434">(</span><span class="ident" id="1659435">s</span><span class="op" id="1659436">,</span>&nbsp;<span class="ident" id="1659438">t</span>&nbsp;<span class="builtintype" id="1659440">string</span><span class="op" id="1659446">)</span>&nbsp;<span class="builtintype" id="1659448">int</span>&nbsp;<span class="op" id="1659452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659455">if</span>&nbsp;<span class="builtinfunc" id="1659458">len</span><span class="op" id="1659461">(</span><span class="ident" id="1659462">t</span><span class="op" id="1659463">)</span>&nbsp;<span class="op" id="1659465">==</span>&nbsp;<span class="num" id="1659468">0</span>&nbsp;<span class="op" id="1659470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659474">return</span>&nbsp;<span class="num" id="1659481">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1659484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659487">for</span>&nbsp;<span class="ident" id="1659491">i</span>&nbsp;<span class="op" id="1659493">:=</span>&nbsp;<span class="num" id="1659496">0</span><span class="op" id="1659497">;</span>&nbsp;<span class="ident" id="1659499">i</span>&nbsp;<span class="op" id="1659501">&lt;</span>&nbsp;<span class="builtinfunc" id="1659503">len</span><span class="op" id="1659506">(</span><span class="ident" id="1659507">s</span><span class="op" id="1659508">)</span><span class="op" id="1659509">;</span>&nbsp;<span class="ident" id="1659511">i</span><span class="op" id="1659512">++</span>&nbsp;<span class="op" id="1659515">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659519">if</span>&nbsp;<span class="ident" id="1659522">s</span><span class="op" id="1659523">[</span><span class="ident" id="1659524">i</span><span class="op" id="1659525">]</span>&nbsp;<span class="op" id="1659527">==</span>&nbsp;<span class="ident" id="1659530">t</span><span class="op" id="1659531">[</span><span class="num" id="1659532">0</span><span class="op" id="1659533">]</span>&nbsp;<span class="op" id="1659535">&amp;&amp;</span>&nbsp;<span class="ident" id="1659538">hasprefix</span><span class="op" id="1659547">(</span><span class="ident" id="1659548">s</span><span class="op" id="1659549">[</span><span class="ident" id="1659550">i</span><span class="op" id="1659551">:</span><span class="op" id="1659552">]</span><span class="op" id="1659553">,</span>&nbsp;<span class="ident" id="1659555">t</span><span class="op" id="1659556">)</span>&nbsp;<span class="op" id="1659558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659563">return</span>&nbsp;<span class="ident" id="1659570">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1659574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1659577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659580">return</span>&nbsp;<span class="op" id="1659587">-</span><span class="num" id="1659588">1</span><br>
<span class="lineno">290</span><span class="op" id="1659590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1659593">func</span>&nbsp;<span class="ident" id="1659598">contains</span><span class="op" id="1659606">(</span><span class="ident" id="1659607">s</span><span class="op" id="1659608">,</span>&nbsp;<span class="ident" id="1659610">t</span>&nbsp;<span class="builtintype" id="1659612">string</span><span class="op" id="1659618">)</span>&nbsp;<span class="builtintype" id="1659620">bool</span>&nbsp;<span class="op" id="1659625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659628">return</span>&nbsp;<span class="ident" id="1659635">index</span><span class="op" id="1659640">(</span><span class="ident" id="1659641">s</span><span class="op" id="1659642">,</span>&nbsp;<span class="ident" id="1659644">t</span><span class="op" id="1659645">)</span>&nbsp;<span class="op" id="1659647">&gt;=</span>&nbsp;<span class="num" id="1659650">0</span><br>
<span class="lineno"></span><span class="op" id="1659652">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span><span class="keyword" id="1659655">func</span>&nbsp;<span class="ident" id="1659660">hasprefix</span><span class="op" id="1659669">(</span><span class="ident" id="1659670">s</span><span class="op" id="1659671">,</span>&nbsp;<span class="ident" id="1659673">t</span>&nbsp;<span class="builtintype" id="1659675">string</span><span class="op" id="1659681">)</span>&nbsp;<span class="builtintype" id="1659683">bool</span>&nbsp;<span class="op" id="1659688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1659691">return</span>&nbsp;<span class="builtinfunc" id="1659698">len</span><span class="op" id="1659701">(</span><span class="ident" id="1659702">s</span><span class="op" id="1659703">)</span>&nbsp;<span class="op" id="1659705">&gt;=</span>&nbsp;<span class="builtinfunc" id="1659708">len</span><span class="op" id="1659711">(</span><span class="ident" id="1659712">t</span><span class="op" id="1659713">)</span>&nbsp;<span class="op" id="1659715">&amp;&amp;</span>&nbsp;<span class="ident" id="1659718">s</span><span class="op" id="1659719">[</span><span class="op" id="1659720">:</span><span class="builtinfunc" id="1659721">len</span><span class="op" id="1659724">(</span><span class="ident" id="1659725">t</span><span class="op" id="1659726">)</span><span class="op" id="1659727">]</span>&nbsp;<span class="op" id="1659729">==</span>&nbsp;<span class="ident" id="1659732">t</span><br>
<span class="lineno"></span><span class="op" id="1659734">}</span>
</div>
</body>
</html>
