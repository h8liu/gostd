<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/exec</h2>
<ul>
<li><a href="/gostd/os/exec/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/exec/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/os/exec/lp_test.go.html">lp_test.go</a></li>
<li><a href="/gostd/os/exec/lp_unix.go.html" class="current">lp_unix.go</a></li>
<li><a href="/gostd/os/exec/lp_unix_test.go.html">lp_unix_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5629595">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5629651">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5629705">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5629756">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5629826">package</span>&nbsp;<span class="ident" id="5629834">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5629840">import</span>&nbsp;<span class="op" id="5629847">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5629850">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5629860">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5629866">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5629876">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5629879">//&nbsp;ErrNotFound&nbsp;is&nbsp;the&nbsp;error&nbsp;resulting&nbsp;if&nbsp;a&nbsp;path&nbsp;search&nbsp;failed&nbsp;to&nbsp;find&nbsp;an&nbsp;executable&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5629969">var</span>&nbsp;<span class="ident" id="5629973">ErrNotFound</span>&nbsp;<span class="op" id="5629985">=</span>&nbsp;<span class="ident" id="5629987">errors</span><span class="op" id="5629993">.</span><span class="ident" id="5629994">New</span><span class="op" id="5629997">(</span><span class="string" id="5629998">&#34;executable&nbsp;file&nbsp;not&nbsp;found&nbsp;in&nbsp;$PATH&#34;</span><span class="op" id="5630034">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5630037">func</span>&nbsp;<span class="ident" id="5630042">findExecutable</span><span class="op" id="5630056">(</span><span class="ident" id="5630057">file</span>&nbsp;<span class="builtintype" id="5630062">string</span><span class="op" id="5630068">)</span>&nbsp;<span class="builtintype" id="5630070">error</span>&nbsp;<span class="op" id="5630076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630079">d</span><span class="op" id="5630080">,</span>&nbsp;<span class="ident" id="5630082">err</span>&nbsp;<span class="op" id="5630086">:=</span>&nbsp;<span class="ident" id="5630089">os</span><span class="op" id="5630091">.</span><span class="ident" id="5630092">Stat</span><span class="op" id="5630096">(</span><span class="ident" id="5630097">file</span><span class="op" id="5630101">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630104">if</span>&nbsp;<span class="ident" id="5630107">err</span>&nbsp;<span class="op" id="5630111">!=</span>&nbsp;<span class="builtintype" id="5630114">nil</span>&nbsp;<span class="op" id="5630118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630122">return</span>&nbsp;<span class="ident" id="5630129">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5630134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630137">if</span>&nbsp;<span class="ident" id="5630140">m</span>&nbsp;<span class="op" id="5630142">:=</span>&nbsp;<span class="ident" id="5630145">d</span><span class="op" id="5630146">.</span><span class="ident" id="5630147">Mode</span><span class="op" id="5630151">(</span><span class="op" id="5630152">)</span><span class="op" id="5630153">;</span>&nbsp;<span class="op" id="5630155">!</span><span class="ident" id="5630156">m</span><span class="op" id="5630157">.</span><span class="ident" id="5630158">IsDir</span><span class="op" id="5630163">(</span><span class="op" id="5630164">)</span>&nbsp;<span class="op" id="5630166">&amp;&amp;</span>&nbsp;<span class="ident" id="5630169">m</span><span class="op" id="5630170">&amp;</span><span class="num" id="5630171">0111</span>&nbsp;<span class="op" id="5630176">!=</span>&nbsp;<span class="num" id="5630179">0</span>&nbsp;<span class="op" id="5630181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630185">return</span>&nbsp;<span class="builtintype" id="5630192">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5630197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630200">return</span>&nbsp;<span class="ident" id="5630207">os</span><span class="op" id="5630209">.</span><span class="ident" id="5630210">ErrPermission</span><br>
<span class="lineno"></span><span class="op" id="5630224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5630227">//&nbsp;LookPath&nbsp;searches&nbsp;for&nbsp;an&nbsp;executable&nbsp;binary&nbsp;named&nbsp;file</span><br>
<span class="lineno">30</span><span class="comment" id="5630284">//&nbsp;in&nbsp;the&nbsp;directories&nbsp;named&nbsp;by&nbsp;the&nbsp;PATH&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno"></span><span class="comment" id="5630346">//&nbsp;If&nbsp;file&nbsp;contains&nbsp;a&nbsp;slash,&nbsp;it&nbsp;is&nbsp;tried&nbsp;directly&nbsp;and&nbsp;the&nbsp;PATH&nbsp;is&nbsp;not&nbsp;consulted.</span><br>
<span class="lineno"></span><span class="comment" id="5630427">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;an&nbsp;absolute&nbsp;path&nbsp;or&nbsp;a&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="5630510">func</span>&nbsp;<span class="ident" id="5630515">LookPath</span><span class="op" id="5630523">(</span><span class="ident" id="5630524">file</span>&nbsp;<span class="builtintype" id="5630529">string</span><span class="op" id="5630535">)</span>&nbsp;<span class="op" id="5630537">(</span><span class="builtintype" id="5630538">string</span><span class="op" id="5630544">,</span>&nbsp;<span class="builtintype" id="5630546">error</span><span class="op" id="5630551">)</span>&nbsp;<span class="op" id="5630553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5630556">//&nbsp;NOTE(rsc):&nbsp;I&nbsp;wish&nbsp;we&nbsp;could&nbsp;use&nbsp;the&nbsp;Plan&nbsp;9&nbsp;behavior&nbsp;here</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5630616">//&nbsp;(only&nbsp;bypass&nbsp;the&nbsp;path&nbsp;if&nbsp;file&nbsp;begins&nbsp;with&nbsp;/&nbsp;or&nbsp;./&nbsp;or&nbsp;../)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5630678">//&nbsp;but&nbsp;that&nbsp;would&nbsp;not&nbsp;match&nbsp;all&nbsp;the&nbsp;Unix&nbsp;shells.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630729">if</span>&nbsp;<span class="ident" id="5630732">strings</span><span class="op" id="5630739">.</span><span class="ident" id="5630740">Contains</span><span class="op" id="5630748">(</span><span class="ident" id="5630749">file</span><span class="op" id="5630753">,</span>&nbsp;<span class="string" id="5630755">&#34;/&#34;</span><span class="op" id="5630758">)</span>&nbsp;<span class="op" id="5630760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630764">err</span>&nbsp;<span class="op" id="5630768">:=</span>&nbsp;<span class="ident" id="5630771">findExecutable</span><span class="op" id="5630785">(</span><span class="ident" id="5630786">file</span><span class="op" id="5630790">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630794">if</span>&nbsp;<span class="ident" id="5630797">err</span>&nbsp;<span class="op" id="5630801">==</span>&nbsp;<span class="builtintype" id="5630804">nil</span>&nbsp;<span class="op" id="5630808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630813">return</span>&nbsp;<span class="ident" id="5630820">file</span><span class="op" id="5630824">,</span>&nbsp;<span class="builtintype" id="5630826">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5630832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630836">return</span>&nbsp;<span class="string" id="5630843">&#34;&#34;</span><span class="op" id="5630845">,</span>&nbsp;<span class="op" id="5630847">&amp;</span><span class="ident" id="5630848">Error</span><span class="op" id="5630853">{</span><span class="ident" id="5630854">file</span><span class="op" id="5630858">,</span>&nbsp;<span class="ident" id="5630860">err</span><span class="op" id="5630863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5630866">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5630869">pathenv</span>&nbsp;<span class="op" id="5630877">:=</span>&nbsp;<span class="ident" id="5630880">os</span><span class="op" id="5630882">.</span><span class="ident" id="5630883">Getenv</span><span class="op" id="5630889">(</span><span class="string" id="5630890">&#34;PATH&#34;</span><span class="op" id="5630896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630899">if</span>&nbsp;<span class="ident" id="5630902">pathenv</span>&nbsp;<span class="op" id="5630910">==</span>&nbsp;<span class="string" id="5630913">&#34;&#34;</span>&nbsp;<span class="op" id="5630916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630920">return</span>&nbsp;<span class="string" id="5630927">&#34;&#34;</span><span class="op" id="5630929">,</span>&nbsp;<span class="op" id="5630931">&amp;</span><span class="ident" id="5630932">Error</span><span class="op" id="5630937">{</span><span class="ident" id="5630938">file</span><span class="op" id="5630942">,</span>&nbsp;<span class="ident" id="5630944">ErrNotFound</span><span class="op" id="5630955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5630958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5630961">for</span>&nbsp;<span class="ident" id="5630965">_</span><span class="op" id="5630966">,</span>&nbsp;<span class="ident" id="5630968">dir</span>&nbsp;<span class="op" id="5630972">:=</span>&nbsp;<span class="keyword" id="5630975">range</span>&nbsp;<span class="ident" id="5630981">strings</span><span class="op" id="5630988">.</span><span class="ident" id="5630989">Split</span><span class="op" id="5630994">(</span><span class="ident" id="5630995">pathenv</span><span class="op" id="5631002">,</span>&nbsp;<span class="string" id="5631004">&#34;:&#34;</span><span class="op" id="5631007">)</span>&nbsp;<span class="op" id="5631009">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631013">if</span>&nbsp;<span class="ident" id="5631016">dir</span>&nbsp;<span class="op" id="5631020">==</span>&nbsp;<span class="string" id="5631023">&#34;&#34;</span>&nbsp;<span class="op" id="5631026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5631031">//&nbsp;Unix&nbsp;shell&nbsp;semantics:&nbsp;path&nbsp;element&nbsp;&#34;&#34;&nbsp;means&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631085">dir</span>&nbsp;<span class="op" id="5631089">=</span>&nbsp;<span class="string" id="5631091">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5631101">path</span>&nbsp;<span class="op" id="5631106">:=</span>&nbsp;<span class="ident" id="5631109">dir</span>&nbsp;<span class="op" id="5631113">+</span>&nbsp;<span class="string" id="5631115">&#34;/&#34;</span>&nbsp;<span class="op" id="5631119">+</span>&nbsp;<span class="ident" id="5631121">file</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631128">if</span>&nbsp;<span class="ident" id="5631131">err</span>&nbsp;<span class="op" id="5631135">:=</span>&nbsp;<span class="ident" id="5631138">findExecutable</span><span class="op" id="5631152">(</span><span class="ident" id="5631153">path</span><span class="op" id="5631157">)</span><span class="op" id="5631158">;</span>&nbsp;<span class="ident" id="5631160">err</span>&nbsp;<span class="op" id="5631164">==</span>&nbsp;<span class="builtintype" id="5631167">nil</span>&nbsp;<span class="op" id="5631171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631176">return</span>&nbsp;<span class="ident" id="5631183">path</span><span class="op" id="5631187">,</span>&nbsp;<span class="builtintype" id="5631189">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631201">return</span>&nbsp;<span class="string" id="5631208">&#34;&#34;</span><span class="op" id="5631210">,</span>&nbsp;<span class="op" id="5631212">&amp;</span><span class="ident" id="5631213">Error</span><span class="op" id="5631218">{</span><span class="ident" id="5631219">file</span><span class="op" id="5631223">,</span>&nbsp;<span class="ident" id="5631225">ErrNotFound</span><span class="op" id="5631236">}</span><br>
<span class="lineno">60</span><span class="op" id="5631238">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
