<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4478244">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4478299">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4478353">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4478404">package</span>&nbsp;<span class="ident" id="4478412">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4478422">import</span>&nbsp;<span class="op" id="4478429">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4478432">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4478441">&#34;strings&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4478451">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4478454">//&nbsp;transitionFunc&nbsp;is&nbsp;the&nbsp;array&nbsp;of&nbsp;context&nbsp;transition&nbsp;functions&nbsp;for&nbsp;text&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="comment" id="4478533">//&nbsp;A&nbsp;transition&nbsp;function&nbsp;takes&nbsp;a&nbsp;context&nbsp;and&nbsp;template&nbsp;text&nbsp;input,&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="4478611">//&nbsp;the&nbsp;updated&nbsp;context&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;consumed&nbsp;from&nbsp;the&nbsp;front&nbsp;of&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="4478689">//&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="4478699">var</span>&nbsp;<span class="ident" id="4478703">transitionFunc</span>&nbsp;<span class="op" id="4478718">=</span>&nbsp;<span class="op" id="4478720">[</span><span class="op" id="4478721">...</span><span class="op" id="4478724">]</span><span class="keyword" id="4478725">func</span><span class="op" id="4478729">(</span><span class="ident" id="4478730"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4478737">,</span>&nbsp;<span class="op" id="4478739">[</span><span class="op" id="4478740">]</span><span class="builtintype" id="4478741">byte</span><span class="op" id="4478745">)</span>&nbsp;<span class="op" id="4478747">(</span><span class="ident" id="4478748"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4478755">,</span>&nbsp;<span class="builtintype" id="4478757">int</span><span class="op" id="4478760">)</span><span class="op" id="4478761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4478764"><a href="/html/template/context.go.html#4394308">stateText</a></span><span class="op" id="4478773">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4478782"><a href="/html/template/transition.go.html#4479594">tText</a></span><span class="op" id="4478787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4478790"><a href="/html/template/context.go.html#4394398">stateTag</a></span><span class="op" id="4478798">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4478808"><a href="/html/template/transition.go.html#4480403">tTag</a></span><span class="op" id="4478812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4478815"><a href="/html/template/context.go.html#4394511">stateAttrName</a></span><span class="op" id="4478828">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4478833"><a href="/html/template/transition.go.html#4481343">tAttrName</a></span><span class="op" id="4478842">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4478845"><a href="/html/template/context.go.html#4394661">stateAfterName</a></span><span class="op" id="4478859">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4478863"><a href="/html/template/transition.go.html#4481636">tAfterName</a></span><span class="op" id="4478873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4478876"><a href="/html/template/context.go.html#4394801">stateBeforeValue</a></span><span class="op" id="4478892">:</span>&nbsp;<span class="ident" id="4478894"><a href="/html/template/transition.go.html#4482184">tBeforeValue</a></span><span class="op" id="4478906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4478909"><a href="/html/template/context.go.html#4394876">stateHTMLCmt</a></span><span class="op" id="4478921">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4478927"><a href="/html/template/transition.go.html#4482630">tHTMLCmt</a></span><span class="op" id="4478935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4478938"><a href="/html/template/context.go.html#4395032">stateRCDATA</a></span><span class="op" id="4478949">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4478956"><a href="/html/template/transition.go.html#4483175">tSpecialTagEnd</a></span><span class="op" id="4478970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4478973"><a href="/html/template/context.go.html#4395114">stateAttr</a></span><span class="op" id="4478982">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4478991"><a href="/html/template/transition.go.html#4483480">tAttr</a></span><span class="op" id="4478996">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4478999"><a href="/html/template/context.go.html#4395194">stateURL</a></span><span class="op" id="4479007">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4479017"><a href="/html/template/transition.go.html#4483612">tURL</a></span><span class="op" id="4479021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479024"><a href="/html/template/context.go.html#4395266">stateJS</a></span><span class="op" id="4479031">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4479042"><a href="/html/template/transition.go.html#4484041">tJS</a></span><span class="op" id="4479045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479048"><a href="/html/template/context.go.html#4395341">stateJSDqStr</a></span><span class="op" id="4479060">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4479066"><a href="/html/template/transition.go.html#4485012">tJSDelimited</a></span><span class="op" id="4479078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479081"><a href="/html/template/context.go.html#4395421">stateJSSqStr</a></span><span class="op" id="4479093">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4479099"><a href="/html/template/transition.go.html#4485012">tJSDelimited</a></span><span class="op" id="4479111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479114"><a href="/html/template/context.go.html#4395496">stateJSRegexp</a></span><span class="op" id="4479127">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4479132"><a href="/html/template/transition.go.html#4485012">tJSDelimited</a></span><span class="op" id="4479144">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479147"><a href="/html/template/context.go.html#4395579">stateJSBlockCmt</a></span><span class="op" id="4479162">:</span>&nbsp;&nbsp;<span class="ident" id="4479165"><a href="/html/template/transition.go.html#4486088">tBlockCmt</a></span><span class="op" id="4479174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479177"><a href="/html/template/context.go.html#4395659">stateJSLineCmt</a></span><span class="op" id="4479191">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4479195"><a href="/html/template/transition.go.html#4486449">tLineCmt</a></span><span class="op" id="4479203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479206"><a href="/html/template/context.go.html#4395740">stateCSS</a></span><span class="op" id="4479214">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4479224"><a href="/html/template/transition.go.html#4487559">tCSS</a></span><span class="op" id="4479228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479231"><a href="/html/template/context.go.html#4395810">stateCSSDqStr</a></span><span class="op" id="4479244">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4479249"><a href="/html/template/transition.go.html#4489843">tCSSStr</a></span><span class="op" id="4479256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479259"><a href="/html/template/context.go.html#4395885">stateCSSSqStr</a></span><span class="op" id="4479272">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4479277"><a href="/html/template/transition.go.html#4489843">tCSSStr</a></span><span class="op" id="4479284">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479287"><a href="/html/template/context.go.html#4395964">stateCSSDqURL</a></span><span class="op" id="4479300">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4479305"><a href="/html/template/transition.go.html#4489843">tCSSStr</a></span><span class="op" id="4479312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479315"><a href="/html/template/context.go.html#4396043">stateCSSSqURL</a></span><span class="op" id="4479328">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4479333"><a href="/html/template/transition.go.html#4489843">tCSSStr</a></span><span class="op" id="4479340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479343"><a href="/html/template/context.go.html#4396113">stateCSSURL</a></span><span class="op" id="4479354">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4479361"><a href="/html/template/transition.go.html#4489843">tCSSStr</a></span><span class="op" id="4479368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479371"><a href="/html/template/context.go.html#4396188">stateCSSBlockCmt</a></span><span class="op" id="4479387">:</span>&nbsp;<span class="ident" id="4479389"><a href="/html/template/transition.go.html#4486088">tBlockCmt</a></span><span class="op" id="4479398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479401"><a href="/html/template/context.go.html#4396263">stateCSSLineCmt</a></span><span class="op" id="4479416">:</span>&nbsp;&nbsp;<span class="ident" id="4479419"><a href="/html/template/transition.go.html#4486449">tLineCmt</a></span><span class="op" id="4479427">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479430"><a href="/html/template/context.go.html#4396369">stateError</a></span><span class="op" id="4479440">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4479448"><a href="/html/template/transition.go.html#4490778">tError</a></span><span class="op" id="4479454">,</span><br>
<span class="lineno"></span><span class="op" id="4479456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4479459">var</span>&nbsp;<span class="ident" id="4479463">commentStart</span>&nbsp;<span class="op" id="4479476">=</span>&nbsp;<span class="op" id="4479478">[</span><span class="op" id="4479479">]</span><span class="builtintype" id="4479480">byte</span><span class="op" id="4479484">(</span><span class="string" id="4479485">&#34;&lt;!--&#34;</span><span class="op" id="4479491">)</span><br>
<span class="lineno"></span><span class="keyword" id="4479493">var</span>&nbsp;<span class="ident" id="4479497">commentEnd</span>&nbsp;<span class="op" id="4479508">=</span>&nbsp;<span class="op" id="4479510">[</span><span class="op" id="4479511">]</span><span class="builtintype" id="4479512">byte</span><span class="op" id="4479516">(</span><span class="string" id="4479517">&#34;--&gt;&#34;</span><span class="op" id="4479522">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4479525">//&nbsp;tText&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;text&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="4479589">func</span>&nbsp;<span class="ident" id="4479594">tText</span><span class="op" id="4479599">(</span><span class="ident" id="4479600">c</span>&nbsp;<span class="ident" id="4479602"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4479609">,</span>&nbsp;<span class="ident" id="4479611">s</span>&nbsp;<span class="op" id="4479613">[</span><span class="op" id="4479614">]</span><span class="builtintype" id="4479615">byte</span><span class="op" id="4479619">)</span>&nbsp;<span class="op" id="4479621">(</span><span class="ident" id="4479622"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4479629">,</span>&nbsp;<span class="builtintype" id="4479631">int</span><span class="op" id="4479634">)</span>&nbsp;<span class="op" id="4479636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479639">k</span>&nbsp;<span class="op" id="4479641">:=</span>&nbsp;<span class="num" id="4479644">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4479647">for</span>&nbsp;<span class="op" id="4479651">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479655">i</span>&nbsp;<span class="op" id="4479657">:=</span>&nbsp;<span class="ident" id="4479660"><a href="/html/template/transition.go.html#4479639">k</a></span>&nbsp;<span class="op" id="4479662">+</span>&nbsp;<span class="ident" id="4479664"><a href="/html/template/transition.go.html#4478432">bytes</a></span><span class="op" id="4479669">.</span><span class="ident" id="4479670">IndexByte</span><span class="op" id="4479679">(</span><span class="ident" id="4479680"><a href="/html/template/transition.go.html#4479611">s</a></span><span class="op" id="4479681">[</span><span class="ident" id="4479682"><a href="/html/template/transition.go.html#4479639">k</a></span><span class="op" id="4479683">:</span><span class="op" id="4479684">]</span><span class="op" id="4479685">,</span>&nbsp;<span class="string" id="4479687">&#39;&lt;&#39;</span><span class="op" id="4479690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4479694">if</span>&nbsp;<span class="ident" id="4479697"><a href="/html/template/transition.go.html#4479655">i</a></span>&nbsp;<span class="op" id="4479699">&lt;</span>&nbsp;<span class="ident" id="4479701"><a href="/html/template/transition.go.html#4479639">k</a></span>&nbsp;<span class="op" id="4479703">||</span>&nbsp;<span class="ident" id="4479706"><a href="/html/template/transition.go.html#4479655">i</a></span><span class="op" id="4479707">+</span><span class="num" id="4479708">1</span>&nbsp;<span class="op" id="4479710">==</span>&nbsp;<span class="builtinfunc" id="4479713">len</span><span class="op" id="4479716">(</span><span class="ident" id="4479717"><a href="/html/template/transition.go.html#4479611">s</a></span><span class="op" id="4479718">)</span>&nbsp;<span class="op" id="4479720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4479725">return</span>&nbsp;<span class="ident" id="4479732"><a href="/html/template/transition.go.html#4479600">c</a></span><span class="op" id="4479733">,</span>&nbsp;<span class="builtinfunc" id="4479735">len</span><span class="op" id="4479738">(</span><span class="ident" id="4479739"><a href="/html/template/transition.go.html#4479611">s</a></span><span class="op" id="4479740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4479744">}</span>&nbsp;<span class="keyword" id="4479746">else</span>&nbsp;<span class="keyword" id="4479751">if</span>&nbsp;<span class="ident" id="4479754"><a href="/html/template/transition.go.html#4479655">i</a></span><span class="op" id="4479755">+</span><span class="num" id="4479756">4</span>&nbsp;<span class="op" id="4479758">&lt;=</span>&nbsp;<span class="builtinfunc" id="4479761">len</span><span class="op" id="4479764">(</span><span class="ident" id="4479765"><a href="/html/template/transition.go.html#4479611">s</a></span><span class="op" id="4479766">)</span>&nbsp;<span class="op" id="4479768">&amp;&amp;</span>&nbsp;<span class="ident" id="4479771"><a href="/html/template/transition.go.html#4478432">bytes</a></span><span class="op" id="4479776">.</span><span class="ident" id="4479777">Equal</span><span class="op" id="4479782">(</span><span class="ident" id="4479783"><a href="/html/template/transition.go.html#4479463">commentStart</a></span><span class="op" id="4479795">,</span>&nbsp;<span class="ident" id="4479797"><a href="/html/template/transition.go.html#4479611">s</a></span><span class="op" id="4479798">[</span><span class="ident" id="4479799"><a href="/html/template/transition.go.html#4479655">i</a></span><span class="op" id="4479800">:</span><span class="ident" id="4479801"><a href="/html/template/transition.go.html#4479655">i</a></span><span class="op" id="4479802">+</span><span class="num" id="4479803">4</span><span class="op" id="4479804">]</span><span class="op" id="4479805">)</span>&nbsp;<span class="op" id="4479807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4479812">return</span>&nbsp;<span class="ident" id="4479819"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4479826">{</span><span class="ident" id="4479827">state</span><span class="op" id="4479832">:</span>&nbsp;<span class="ident" id="4479834"><a href="/html/template/context.go.html#4394876">stateHTMLCmt</a></span><span class="op" id="4479846">}</span><span class="op" id="4479847">,</span>&nbsp;<span class="ident" id="4479849"><a href="/html/template/transition.go.html#4479655">i</a></span>&nbsp;<span class="op" id="4479851">+</span>&nbsp;<span class="num" id="4479853">4</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4479857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479861"><a href="/html/template/transition.go.html#4479655">i</a></span><span class="op" id="4479862">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479867">end</span>&nbsp;<span class="op" id="4479871">:=</span>&nbsp;<span class="builtintype" id="4479874">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4479882">if</span>&nbsp;<span class="ident" id="4479885"><a href="/html/template/transition.go.html#4479611">s</a></span><span class="op" id="4479886">[</span><span class="ident" id="4479887"><a href="/html/template/transition.go.html#4479655">i</a></span><span class="op" id="4479888">]</span>&nbsp;<span class="op" id="4479890">==</span>&nbsp;<span class="string" id="4479893">&#39;/&#39;</span>&nbsp;<span class="op" id="4479897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4479902">if</span>&nbsp;<span class="ident" id="4479905"><a href="/html/template/transition.go.html#4479655">i</a></span><span class="op" id="4479906">+</span><span class="num" id="4479907">1</span>&nbsp;<span class="op" id="4479909">==</span>&nbsp;<span class="builtinfunc" id="4479912">len</span><span class="op" id="4479915">(</span><span class="ident" id="4479916"><a href="/html/template/transition.go.html#4479611">s</a></span><span class="op" id="4479917">)</span>&nbsp;<span class="op" id="4479919">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4479925">return</span>&nbsp;<span class="ident" id="4479932"><a href="/html/template/transition.go.html#4479600">c</a></span><span class="op" id="4479933">,</span>&nbsp;<span class="builtinfunc" id="4479935">len</span><span class="op" id="4479938">(</span><span class="ident" id="4479939"><a href="/html/template/transition.go.html#4479611">s</a></span><span class="op" id="4479940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4479945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479950"><a href="/html/template/transition.go.html#4479867">end</a></span><span class="op" id="4479953">,</span>&nbsp;<span class="ident" id="4479955"><a href="/html/template/transition.go.html#4479655">i</a></span>&nbsp;<span class="op" id="4479957">=</span>&nbsp;<span class="builtintype" id="4479959">true</span><span class="op" id="4479963">,</span>&nbsp;<span class="ident" id="4479965"><a href="/html/template/transition.go.html#4479655">i</a></span><span class="op" id="4479966">+</span><span class="num" id="4479967">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4479971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4479975">j</span><span class="op" id="4479976">,</span>&nbsp;<span class="ident" id="4479978">e</span>&nbsp;<span class="op" id="4479980">:=</span>&nbsp;<span class="ident" id="4479983"><a href="/html/template/transition.go.html#4492069">eatTagName</a></span><span class="op" id="4479993">(</span><span class="ident" id="4479994"><a href="/html/template/transition.go.html#4479611">s</a></span><span class="op" id="4479995">,</span>&nbsp;<span class="ident" id="4479997"><a href="/html/template/transition.go.html#4479655">i</a></span><span class="op" id="4479998">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4480002">if</span>&nbsp;<span class="ident" id="4480005"><a href="/html/template/transition.go.html#4479975">j</a></span>&nbsp;<span class="op" id="4480007">!=</span>&nbsp;<span class="ident" id="4480010"><a href="/html/template/transition.go.html#4479655">i</a></span>&nbsp;<span class="op" id="4480012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4480017">if</span>&nbsp;<span class="ident" id="4480020"><a href="/html/template/transition.go.html#4479867">end</a></span>&nbsp;<span class="op" id="4480024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480030"><a href="/html/template/transition.go.html#4479978">e</a></span>&nbsp;<span class="op" id="4480032">=</span>&nbsp;<span class="ident" id="4480034"><a href="/html/template/context.go.html#4400738">elementNone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4480049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4480054">//&nbsp;We&#39;ve&nbsp;found&nbsp;an&nbsp;HTML&nbsp;tag.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4480085">return</span>&nbsp;<span class="ident" id="4480092"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4480099">{</span><span class="ident" id="4480100">state</span><span class="op" id="4480105">:</span>&nbsp;<span class="ident" id="4480107"><a href="/html/template/context.go.html#4394398">stateTag</a></span><span class="op" id="4480115">,</span>&nbsp;<span class="ident" id="4480117">element</span><span class="op" id="4480124">:</span>&nbsp;<span class="ident" id="4480126"><a href="/html/template/transition.go.html#4479978">e</a></span><span class="op" id="4480127">}</span><span class="op" id="4480128">,</span>&nbsp;<span class="ident" id="4480130"><a href="/html/template/transition.go.html#4479975">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4480134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480138"><a href="/html/template/transition.go.html#4479639">k</a></span>&nbsp;<span class="op" id="4480140">=</span>&nbsp;<span class="ident" id="4480142"><a href="/html/template/transition.go.html#4479975">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4480145">}</span><br>
<span class="lineno"></span><span class="op" id="4480147">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="4480150">var</span>&nbsp;<span class="ident" id="4480154">elementContentType</span>&nbsp;<span class="op" id="4480173">=</span>&nbsp;<span class="op" id="4480175">[</span><span class="op" id="4480176">...</span><span class="op" id="4480179">]</span><span class="ident" id="4480180"><a href="/html/template/context.go.html#4394112">state</a></span><span class="op" id="4480185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480188"><a href="/html/template/context.go.html#4400738">elementNone</a></span><span class="op" id="4480199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4480205"><a href="/html/template/context.go.html#4394308">stateText</a></span><span class="op" id="4480214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480217"><a href="/html/template/context.go.html#4400830">elementScript</a></span><span class="op" id="4480230">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4480234"><a href="/html/template/context.go.html#4395266">stateJS</a></span><span class="op" id="4480241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480244"><a href="/html/template/context.go.html#4400907">elementStyle</a></span><span class="op" id="4480256">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4480261"><a href="/html/template/context.go.html#4395740">stateCSS</a></span><span class="op" id="4480269">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480272"><a href="/html/template/context.go.html#4400987">elementTextarea</a></span><span class="op" id="4480287">:</span>&nbsp;<span class="ident" id="4480289"><a href="/html/template/context.go.html#4395032">stateRCDATA</a></span><span class="op" id="4480300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480303"><a href="/html/template/context.go.html#4401064">elementTitle</a></span><span class="op" id="4480315">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4480320"><a href="/html/template/context.go.html#4395032">stateRCDATA</a></span><span class="op" id="4480331">,</span><br>
<span class="lineno"></span><span class="op" id="4480333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4480336">//&nbsp;tTag&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;tag&nbsp;state.</span><br>
<span class="lineno">85</span><span class="keyword" id="4480398">func</span>&nbsp;<span class="ident" id="4480403">tTag</span><span class="op" id="4480407">(</span><span class="ident" id="4480408">c</span>&nbsp;<span class="ident" id="4480410"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4480417">,</span>&nbsp;<span class="ident" id="4480419">s</span>&nbsp;<span class="op" id="4480421">[</span><span class="op" id="4480422">]</span><span class="builtintype" id="4480423">byte</span><span class="op" id="4480427">)</span>&nbsp;<span class="op" id="4480429">(</span><span class="ident" id="4480430"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4480437">,</span>&nbsp;<span class="builtintype" id="4480439">int</span><span class="op" id="4480442">)</span>&nbsp;<span class="op" id="4480444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4480447">//&nbsp;Find&nbsp;the&nbsp;attribute&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480476">i</span>&nbsp;<span class="op" id="4480478">:=</span>&nbsp;<span class="ident" id="4480481"><a href="/html/template/transition.go.html#4492573">eatWhiteSpace</a></span><span class="op" id="4480494">(</span><span class="ident" id="4480495"><a href="/html/template/transition.go.html#4480419">s</a></span><span class="op" id="4480496">,</span>&nbsp;<span class="num" id="4480498">0</span><span class="op" id="4480499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4480502">if</span>&nbsp;<span class="ident" id="4480505"><a href="/html/template/transition.go.html#4480476">i</a></span>&nbsp;<span class="op" id="4480507">==</span>&nbsp;<span class="builtinfunc" id="4480510">len</span><span class="op" id="4480513">(</span><span class="ident" id="4480514"><a href="/html/template/transition.go.html#4480419">s</a></span><span class="op" id="4480515">)</span>&nbsp;<span class="op" id="4480517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4480521">return</span>&nbsp;<span class="ident" id="4480528"><a href="/html/template/transition.go.html#4480408">c</a></span><span class="op" id="4480529">,</span>&nbsp;<span class="builtinfunc" id="4480531">len</span><span class="op" id="4480534">(</span><span class="ident" id="4480535"><a href="/html/template/transition.go.html#4480419">s</a></span><span class="op" id="4480536">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4480539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4480542">if</span>&nbsp;<span class="ident" id="4480545"><a href="/html/template/transition.go.html#4480419">s</a></span><span class="op" id="4480546">[</span><span class="ident" id="4480547"><a href="/html/template/transition.go.html#4480476">i</a></span><span class="op" id="4480548">]</span>&nbsp;<span class="op" id="4480550">==</span>&nbsp;<span class="string" id="4480553">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="4480557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4480561">return</span>&nbsp;<span class="ident" id="4480568"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4480575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480580">state</span><span class="op" id="4480585">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4480589"><a href="/html/template/transition.go.html#4480154">elementContentType</a></span><span class="op" id="4480607">[</span><span class="ident" id="4480608"><a href="/html/template/transition.go.html#4480408">c</a></span><span class="op" id="4480609">.</span><span class="ident" id="4480610">element</span><span class="op" id="4480617">]</span><span class="op" id="4480618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480623">element</span><span class="op" id="4480630">:</span>&nbsp;<span class="ident" id="4480632"><a href="/html/template/transition.go.html#4480408">c</a></span><span class="op" id="4480633">.</span><span class="ident" id="4480634">element</span><span class="op" id="4480641">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4480645">}</span><span class="op" id="4480646">,</span>&nbsp;<span class="ident" id="4480648"><a href="/html/template/transition.go.html#4480476">i</a></span>&nbsp;<span class="op" id="4480650">+</span>&nbsp;<span class="num" id="4480652">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4480655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480658">j</span><span class="op" id="4480659">,</span>&nbsp;<span class="ident" id="4480661">err</span>&nbsp;<span class="op" id="4480665">:=</span>&nbsp;<span class="ident" id="4480668"><a href="/html/template/transition.go.html#4491083">eatAttrName</a></span><span class="op" id="4480679">(</span><span class="ident" id="4480680"><a href="/html/template/transition.go.html#4480419">s</a></span><span class="op" id="4480681">,</span>&nbsp;<span class="ident" id="4480683"><a href="/html/template/transition.go.html#4480476">i</a></span><span class="op" id="4480684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4480687">if</span>&nbsp;<span class="ident" id="4480690"><a href="/html/template/transition.go.html#4480661">err</a></span>&nbsp;<span class="op" id="4480694">!=</span>&nbsp;<span class="ident" id="4480697">nil</span>&nbsp;<span class="op" id="4480701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4480705">return</span>&nbsp;<span class="ident" id="4480712"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4480719">{</span><span class="ident" id="4480720">state</span><span class="op" id="4480725">:</span>&nbsp;<span class="ident" id="4480727"><a href="/html/template/context.go.html#4396369">stateError</a></span><span class="op" id="4480737">,</span>&nbsp;<span class="ident" id="4480739">err</span><span class="op" id="4480742">:</span>&nbsp;<span class="ident" id="4480744"><a href="/html/template/transition.go.html#4480661">err</a></span><span class="op" id="4480747">}</span><span class="op" id="4480748">,</span>&nbsp;<span class="builtinfunc" id="4480750">len</span><span class="op" id="4480753">(</span><span class="ident" id="4480754"><a href="/html/template/transition.go.html#4480419">s</a></span><span class="op" id="4480755">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4480758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480761">state</span><span class="op" id="4480766">,</span>&nbsp;<span class="ident" id="4480768">attr</span>&nbsp;<span class="op" id="4480773">:=</span>&nbsp;<span class="ident" id="4480776"><a href="/html/template/context.go.html#4394398">stateTag</a></span><span class="op" id="4480784">,</span>&nbsp;<span class="ident" id="4480786"><a href="/html/template/context.go.html#4401602">attrNone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4480796">if</span>&nbsp;<span class="ident" id="4480799"><a href="/html/template/transition.go.html#4480476">i</a></span>&nbsp;<span class="op" id="4480801">==</span>&nbsp;<span class="ident" id="4480804"><a href="/html/template/transition.go.html#4480658">j</a></span>&nbsp;<span class="op" id="4480806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4480810">return</span>&nbsp;<span class="ident" id="4480817"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4480824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480829">state</span><span class="op" id="4480834">:</span>&nbsp;<span class="ident" id="4480836"><a href="/html/template/context.go.html#4396369">stateError</a></span><span class="op" id="4480846">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4480851">err</span><span class="op" id="4480854">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4480858"><a href="/html/template/error.go.html#4422980">errorf</a></span><span class="op" id="4480864">(</span><span class="ident" id="4480865"><a href="/html/template/error.go.html#4417919">ErrBadHTML</a></span><span class="op" id="4480875">,</span>&nbsp;<span class="ident" id="4480877">nil</span><span class="op" id="4480880">,</span>&nbsp;<span class="num" id="4480882">0</span><span class="op" id="4480883">,</span>&nbsp;<span class="string" id="4480885">&#34;expected&nbsp;space,&nbsp;attr&nbsp;name,&nbsp;or&nbsp;end&nbsp;of&nbsp;tag,&nbsp;but&nbsp;got&nbsp;%q&#34;</span><span class="op" id="4480939">,</span>&nbsp;<span class="ident" id="4480941"><a href="/html/template/transition.go.html#4480419">s</a></span><span class="op" id="4480942">[</span><span class="ident" id="4480943"><a href="/html/template/transition.go.html#4480476">i</a></span><span class="op" id="4480944">:</span><span class="op" id="4480945">]</span><span class="op" id="4480946">)</span><span class="op" id="4480947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4480951">}</span><span class="op" id="4480952">,</span>&nbsp;<span class="builtinfunc" id="4480954">len</span><span class="op" id="4480957">(</span><span class="ident" id="4480958"><a href="/html/template/transition.go.html#4480419">s</a></span><span class="op" id="4480959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4480962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4480965">switch</span>&nbsp;<span class="ident" id="4480972"><a href="/html/template/attr.go.html#4386124">attrType</a></span><span class="op" id="4480980">(</span><span class="builtintype" id="4480981">string</span><span class="op" id="4480987">(</span><span class="ident" id="4480988"><a href="/html/template/transition.go.html#4480419">s</a></span><span class="op" id="4480989">[</span><span class="ident" id="4480990"><a href="/html/template/transition.go.html#4480476">i</a></span><span class="op" id="4480991">:</span><span class="ident" id="4480992"><a href="/html/template/transition.go.html#4480658">j</a></span><span class="op" id="4480993">]</span><span class="op" id="4480994">)</span><span class="op" id="4480995">)</span>&nbsp;<span class="op" id="4480997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4481000">case</span>&nbsp;<span class="ident" id="4481005"><a href="/html/template/content.go.html#4389864">contentTypeURL</a></span><span class="op" id="4481019">:</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4481023"><a href="/html/template/transition.go.html#4480768">attr</a></span>&nbsp;<span class="op" id="4481028">=</span>&nbsp;<span class="ident" id="4481030"><a href="/html/template/context.go.html#4401836">attrURL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4481039">case</span>&nbsp;<span class="ident" id="4481044"><a href="/html/template/content.go.html#4389777">contentTypeCSS</a></span><span class="op" id="4481058">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4481062"><a href="/html/template/transition.go.html#4480768">attr</a></span>&nbsp;<span class="op" id="4481067">=</span>&nbsp;<span class="ident" id="4481069"><a href="/html/template/context.go.html#4401763">attrStyle</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4481080">case</span>&nbsp;<span class="ident" id="4481085"><a href="/html/template/content.go.html#4389831">contentTypeJS</a></span><span class="op" id="4481098">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4481102"><a href="/html/template/transition.go.html#4480768">attr</a></span>&nbsp;<span class="op" id="4481107">=</span>&nbsp;<span class="ident" id="4481109"><a href="/html/template/context.go.html#4401682">attrScript</a></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4481121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4481124">if</span>&nbsp;<span class="ident" id="4481127"><a href="/html/template/transition.go.html#4480658">j</a></span>&nbsp;<span class="op" id="4481129">==</span>&nbsp;<span class="builtinfunc" id="4481132">len</span><span class="op" id="4481135">(</span><span class="ident" id="4481136"><a href="/html/template/transition.go.html#4480419">s</a></span><span class="op" id="4481137">)</span>&nbsp;<span class="op" id="4481139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4481143"><a href="/html/template/transition.go.html#4480761">state</a></span>&nbsp;<span class="op" id="4481149">=</span>&nbsp;<span class="ident" id="4481151"><a href="/html/template/context.go.html#4394511">stateAttrName</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4481166">}</span>&nbsp;<span class="keyword" id="4481168">else</span>&nbsp;<span class="op" id="4481173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4481177"><a href="/html/template/transition.go.html#4480761">state</a></span>&nbsp;<span class="op" id="4481183">=</span>&nbsp;<span class="ident" id="4481185"><a href="/html/template/context.go.html#4394661">stateAfterName</a></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4481201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4481204">return</span>&nbsp;<span class="ident" id="4481211"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4481218">{</span><span class="ident" id="4481219">state</span><span class="op" id="4481224">:</span>&nbsp;<span class="ident" id="4481226"><a href="/html/template/transition.go.html#4480761">state</a></span><span class="op" id="4481231">,</span>&nbsp;<span class="ident" id="4481233">element</span><span class="op" id="4481240">:</span>&nbsp;<span class="ident" id="4481242"><a href="/html/template/transition.go.html#4480408">c</a></span><span class="op" id="4481243">.</span><span class="ident" id="4481244">element</span><span class="op" id="4481251">,</span>&nbsp;<span class="ident" id="4481253">attr</span><span class="op" id="4481257">:</span>&nbsp;<span class="ident" id="4481259"><a href="/html/template/transition.go.html#4480768">attr</a></span><span class="op" id="4481263">}</span><span class="op" id="4481264">,</span>&nbsp;<span class="ident" id="4481266"><a href="/html/template/transition.go.html#4480658">j</a></span><br>
<span class="lineno"></span><span class="op" id="4481268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4481271">//&nbsp;tAttrName&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;stateAttrName.</span><br>
<span class="lineno">125</span><span class="keyword" id="4481338">func</span>&nbsp;<span class="ident" id="4481343">tAttrName</span><span class="op" id="4481352">(</span><span class="ident" id="4481353">c</span>&nbsp;<span class="ident" id="4481355"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4481362">,</span>&nbsp;<span class="ident" id="4481364">s</span>&nbsp;<span class="op" id="4481366">[</span><span class="op" id="4481367">]</span><span class="builtintype" id="4481368">byte</span><span class="op" id="4481372">)</span>&nbsp;<span class="op" id="4481374">(</span><span class="ident" id="4481375"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4481382">,</span>&nbsp;<span class="builtintype" id="4481384">int</span><span class="op" id="4481387">)</span>&nbsp;<span class="op" id="4481389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4481392">i</span><span class="op" id="4481393">,</span>&nbsp;<span class="ident" id="4481395">err</span>&nbsp;<span class="op" id="4481399">:=</span>&nbsp;<span class="ident" id="4481402"><a href="/html/template/transition.go.html#4491083">eatAttrName</a></span><span class="op" id="4481413">(</span><span class="ident" id="4481414"><a href="/html/template/transition.go.html#4481364">s</a></span><span class="op" id="4481415">,</span>&nbsp;<span class="num" id="4481417">0</span><span class="op" id="4481418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4481421">if</span>&nbsp;<span class="ident" id="4481424"><a href="/html/template/transition.go.html#4481395">err</a></span>&nbsp;<span class="op" id="4481428">!=</span>&nbsp;<span class="ident" id="4481431">nil</span>&nbsp;<span class="op" id="4481435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4481439">return</span>&nbsp;<span class="ident" id="4481446"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4481453">{</span><span class="ident" id="4481454">state</span><span class="op" id="4481459">:</span>&nbsp;<span class="ident" id="4481461"><a href="/html/template/context.go.html#4396369">stateError</a></span><span class="op" id="4481471">,</span>&nbsp;<span class="ident" id="4481473">err</span><span class="op" id="4481476">:</span>&nbsp;<span class="ident" id="4481478"><a href="/html/template/transition.go.html#4481395">err</a></span><span class="op" id="4481481">}</span><span class="op" id="4481482">,</span>&nbsp;<span class="builtinfunc" id="4481484">len</span><span class="op" id="4481487">(</span><span class="ident" id="4481488"><a href="/html/template/transition.go.html#4481364">s</a></span><span class="op" id="4481489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4481492">}</span>&nbsp;<span class="keyword" id="4481494">else</span>&nbsp;<span class="keyword" id="4481499">if</span>&nbsp;<span class="ident" id="4481502"><a href="/html/template/transition.go.html#4481392">i</a></span>&nbsp;<span class="op" id="4481504">!=</span>&nbsp;<span class="builtinfunc" id="4481507">len</span><span class="op" id="4481510">(</span><span class="ident" id="4481511"><a href="/html/template/transition.go.html#4481364">s</a></span><span class="op" id="4481512">)</span>&nbsp;<span class="op" id="4481514">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4481518"><a href="/html/template/transition.go.html#4481353">c</a></span><span class="op" id="4481519">.</span><span class="ident" id="4481520">state</span>&nbsp;<span class="op" id="4481526">=</span>&nbsp;<span class="ident" id="4481528"><a href="/html/template/context.go.html#4394661">stateAfterName</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4481544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4481547">return</span>&nbsp;<span class="ident" id="4481554"><a href="/html/template/transition.go.html#4481353">c</a></span><span class="op" id="4481555">,</span>&nbsp;<span class="ident" id="4481557"><a href="/html/template/transition.go.html#4481392">i</a></span><br>
<span class="lineno"></span><span class="op" id="4481559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="4481562">//&nbsp;tAfterName&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;stateAfterName.</span><br>
<span class="lineno"></span><span class="keyword" id="4481631">func</span>&nbsp;<span class="ident" id="4481636">tAfterName</span><span class="op" id="4481646">(</span><span class="ident" id="4481647">c</span>&nbsp;<span class="ident" id="4481649"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4481656">,</span>&nbsp;<span class="ident" id="4481658">s</span>&nbsp;<span class="op" id="4481660">[</span><span class="op" id="4481661">]</span><span class="builtintype" id="4481662">byte</span><span class="op" id="4481666">)</span>&nbsp;<span class="op" id="4481668">(</span><span class="ident" id="4481669"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4481676">,</span>&nbsp;<span class="builtintype" id="4481678">int</span><span class="op" id="4481681">)</span>&nbsp;<span class="op" id="4481683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4481686">//&nbsp;Look&nbsp;for&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4481723">i</span>&nbsp;<span class="op" id="4481725">:=</span>&nbsp;<span class="ident" id="4481728"><a href="/html/template/transition.go.html#4492573">eatWhiteSpace</a></span><span class="op" id="4481741">(</span><span class="ident" id="4481742"><a href="/html/template/transition.go.html#4481658">s</a></span><span class="op" id="4481743">,</span>&nbsp;<span class="num" id="4481745">0</span><span class="op" id="4481746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4481749">if</span>&nbsp;<span class="ident" id="4481752"><a href="/html/template/transition.go.html#4481723">i</a></span>&nbsp;<span class="op" id="4481754">==</span>&nbsp;<span class="builtinfunc" id="4481757">len</span><span class="op" id="4481760">(</span><span class="ident" id="4481761"><a href="/html/template/transition.go.html#4481658">s</a></span><span class="op" id="4481762">)</span>&nbsp;<span class="op" id="4481764">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4481768">return</span>&nbsp;<span class="ident" id="4481775"><a href="/html/template/transition.go.html#4481647">c</a></span><span class="op" id="4481776">,</span>&nbsp;<span class="builtinfunc" id="4481778">len</span><span class="op" id="4481781">(</span><span class="ident" id="4481782"><a href="/html/template/transition.go.html#4481658">s</a></span><span class="op" id="4481783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4481786">}</span>&nbsp;<span class="keyword" id="4481788">else</span>&nbsp;<span class="keyword" id="4481793">if</span>&nbsp;<span class="ident" id="4481796"><a href="/html/template/transition.go.html#4481658">s</a></span><span class="op" id="4481797">[</span><span class="ident" id="4481798"><a href="/html/template/transition.go.html#4481723">i</a></span><span class="op" id="4481799">]</span>&nbsp;<span class="op" id="4481801">!=</span>&nbsp;<span class="string" id="4481804">&#39;=&#39;</span>&nbsp;<span class="op" id="4481808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4481812">//&nbsp;Occurs&nbsp;due&nbsp;to&nbsp;tag&nbsp;ending&nbsp;&#39;&gt;&#39;,&nbsp;and&nbsp;valueless&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4481872"><a href="/html/template/transition.go.html#4481647">c</a></span><span class="op" id="4481873">.</span><span class="ident" id="4481874">state</span>&nbsp;<span class="op" id="4481880">=</span>&nbsp;<span class="ident" id="4481882"><a href="/html/template/context.go.html#4394398">stateTag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4481893">return</span>&nbsp;<span class="ident" id="4481900"><a href="/html/template/transition.go.html#4481647">c</a></span><span class="op" id="4481901">,</span>&nbsp;<span class="ident" id="4481903"><a href="/html/template/transition.go.html#4481723">i</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4481906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4481909"><a href="/html/template/transition.go.html#4481647">c</a></span><span class="op" id="4481910">.</span><span class="ident" id="4481911">state</span>&nbsp;<span class="op" id="4481917">=</span>&nbsp;<span class="ident" id="4481919"><a href="/html/template/context.go.html#4394801">stateBeforeValue</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4481937">//&nbsp;Consume&nbsp;the&nbsp;&#34;=&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4481958">return</span>&nbsp;<span class="ident" id="4481965"><a href="/html/template/transition.go.html#4481647">c</a></span><span class="op" id="4481966">,</span>&nbsp;<span class="ident" id="4481968"><a href="/html/template/transition.go.html#4481723">i</a></span>&nbsp;<span class="op" id="4481970">+</span>&nbsp;<span class="num" id="4481972">1</span><br>
<span class="lineno"></span><span class="op" id="4481974">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="4481977">var</span>&nbsp;<span class="ident" id="4481981">attrStartStates</span>&nbsp;<span class="op" id="4481997">=</span>&nbsp;<span class="op" id="4481999">[</span><span class="op" id="4482000">...</span><span class="op" id="4482003">]</span><span class="ident" id="4482004"><a href="/html/template/context.go.html#4394112">state</a></span><span class="op" id="4482009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4482012"><a href="/html/template/context.go.html#4401602">attrNone</a></span><span class="op" id="4482020">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4482024"><a href="/html/template/context.go.html#4395114">stateAttr</a></span><span class="op" id="4482033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4482036"><a href="/html/template/context.go.html#4401682">attrScript</a></span><span class="op" id="4482046">:</span>&nbsp;<span class="ident" id="4482048"><a href="/html/template/context.go.html#4395266">stateJS</a></span><span class="op" id="4482055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4482058"><a href="/html/template/context.go.html#4401763">attrStyle</a></span><span class="op" id="4482067">:</span>&nbsp;&nbsp;<span class="ident" id="4482070"><a href="/html/template/context.go.html#4395740">stateCSS</a></span><span class="op" id="4482078">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4482081"><a href="/html/template/context.go.html#4401836">attrURL</a></span><span class="op" id="4482088">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4482093"><a href="/html/template/context.go.html#4395194">stateURL</a></span><span class="op" id="4482101">,</span><br>
<span class="lineno"></span><span class="op" id="4482103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4482106">//&nbsp;tBeforeValue&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;stateBeforeValue.</span><br>
<span class="lineno"></span><span class="keyword" id="4482179">func</span>&nbsp;<span class="ident" id="4482184">tBeforeValue</span><span class="op" id="4482196">(</span><span class="ident" id="4482197">c</span>&nbsp;<span class="ident" id="4482199"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4482206">,</span>&nbsp;<span class="ident" id="4482208">s</span>&nbsp;<span class="op" id="4482210">[</span><span class="op" id="4482211">]</span><span class="builtintype" id="4482212">byte</span><span class="op" id="4482216">)</span>&nbsp;<span class="op" id="4482218">(</span><span class="ident" id="4482219"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4482226">,</span>&nbsp;<span class="builtintype" id="4482228">int</span><span class="op" id="4482231">)</span>&nbsp;<span class="op" id="4482233">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4482236">i</span>&nbsp;<span class="op" id="4482238">:=</span>&nbsp;<span class="ident" id="4482241"><a href="/html/template/transition.go.html#4492573">eatWhiteSpace</a></span><span class="op" id="4482254">(</span><span class="ident" id="4482255"><a href="/html/template/transition.go.html#4482208">s</a></span><span class="op" id="4482256">,</span>&nbsp;<span class="num" id="4482258">0</span><span class="op" id="4482259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4482262">if</span>&nbsp;<span class="ident" id="4482265"><a href="/html/template/transition.go.html#4482236">i</a></span>&nbsp;<span class="op" id="4482267">==</span>&nbsp;<span class="builtinfunc" id="4482270">len</span><span class="op" id="4482273">(</span><span class="ident" id="4482274"><a href="/html/template/transition.go.html#4482208">s</a></span><span class="op" id="4482275">)</span>&nbsp;<span class="op" id="4482277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4482281">return</span>&nbsp;<span class="ident" id="4482288"><a href="/html/template/transition.go.html#4482197">c</a></span><span class="op" id="4482289">,</span>&nbsp;<span class="builtinfunc" id="4482291">len</span><span class="op" id="4482294">(</span><span class="ident" id="4482295"><a href="/html/template/transition.go.html#4482208">s</a></span><span class="op" id="4482296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4482299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4482302">//&nbsp;Find&nbsp;the&nbsp;attribute&nbsp;delimiter.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4482336">delim</span>&nbsp;<span class="op" id="4482342">:=</span>&nbsp;<span class="ident" id="4482345"><a href="/html/template/context.go.html#4398348">delimSpaceOrTagEnd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4482365">switch</span>&nbsp;<span class="ident" id="4482372"><a href="/html/template/transition.go.html#4482208">s</a></span><span class="op" id="4482373">[</span><span class="ident" id="4482374"><a href="/html/template/transition.go.html#4482236">i</a></span><span class="op" id="4482375">]</span>&nbsp;<span class="op" id="4482377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4482380">case</span>&nbsp;<span class="string" id="4482385">&#39;\&#39;&#39;</span><span class="op" id="4482389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4482393"><a href="/html/template/transition.go.html#4482336">delim</a></span><span class="op" id="4482398">,</span>&nbsp;<span class="ident" id="4482400"><a href="/html/template/transition.go.html#4482236">i</a></span>&nbsp;<span class="op" id="4482402">=</span>&nbsp;<span class="ident" id="4482404"><a href="/html/template/context.go.html#4398234">delimSingleQuote</a></span><span class="op" id="4482420">,</span>&nbsp;<span class="ident" id="4482422"><a href="/html/template/transition.go.html#4482236">i</a></span><span class="op" id="4482423">+</span><span class="num" id="4482424">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4482427">case</span>&nbsp;<span class="string" id="4482432">&#39;&#34;&#39;</span><span class="op" id="4482435">:</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4482439"><a href="/html/template/transition.go.html#4482336">delim</a></span><span class="op" id="4482444">,</span>&nbsp;<span class="ident" id="4482446"><a href="/html/template/transition.go.html#4482236">i</a></span>&nbsp;<span class="op" id="4482448">=</span>&nbsp;<span class="ident" id="4482450"><a href="/html/template/context.go.html#4398142">delimDoubleQuote</a></span><span class="op" id="4482466">,</span>&nbsp;<span class="ident" id="4482468"><a href="/html/template/transition.go.html#4482236">i</a></span><span class="op" id="4482469">+</span><span class="num" id="4482470">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4482473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4482476"><a href="/html/template/transition.go.html#4482197">c</a></span><span class="op" id="4482477">.</span><span class="ident" id="4482478">state</span><span class="op" id="4482483">,</span>&nbsp;<span class="ident" id="4482485"><a href="/html/template/transition.go.html#4482197">c</a></span><span class="op" id="4482486">.</span><span class="ident" id="4482487">delim</span><span class="op" id="4482492">,</span>&nbsp;<span class="ident" id="4482494"><a href="/html/template/transition.go.html#4482197">c</a></span><span class="op" id="4482495">.</span><span class="ident" id="4482496">attr</span>&nbsp;<span class="op" id="4482501">=</span>&nbsp;<span class="ident" id="4482503"><a href="/html/template/transition.go.html#4481981">attrStartStates</a></span><span class="op" id="4482518">[</span><span class="ident" id="4482519"><a href="/html/template/transition.go.html#4482197">c</a></span><span class="op" id="4482520">.</span><span class="ident" id="4482521">attr</span><span class="op" id="4482525">]</span><span class="op" id="4482526">,</span>&nbsp;<span class="ident" id="4482528"><a href="/html/template/transition.go.html#4482336">delim</a></span><span class="op" id="4482533">,</span>&nbsp;<span class="ident" id="4482535"><a href="/html/template/context.go.html#4401602">attrNone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4482545">return</span>&nbsp;<span class="ident" id="4482552"><a href="/html/template/transition.go.html#4482197">c</a></span><span class="op" id="4482553">,</span>&nbsp;<span class="ident" id="4482555"><a href="/html/template/transition.go.html#4482236">i</a></span><br>
<span class="lineno"></span><span class="op" id="4482557">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="4482560">//&nbsp;tHTMLCmt&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;stateHTMLCmt.</span><br>
<span class="lineno"></span><span class="keyword" id="4482625">func</span>&nbsp;<span class="ident" id="4482630">tHTMLCmt</span><span class="op" id="4482638">(</span><span class="ident" id="4482639">c</span>&nbsp;<span class="ident" id="4482641"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4482648">,</span>&nbsp;<span class="ident" id="4482650">s</span>&nbsp;<span class="op" id="4482652">[</span><span class="op" id="4482653">]</span><span class="builtintype" id="4482654">byte</span><span class="op" id="4482658">)</span>&nbsp;<span class="op" id="4482660">(</span><span class="ident" id="4482661"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4482668">,</span>&nbsp;<span class="builtintype" id="4482670">int</span><span class="op" id="4482673">)</span>&nbsp;<span class="op" id="4482675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4482678">if</span>&nbsp;<span class="ident" id="4482681">i</span>&nbsp;<span class="op" id="4482683">:=</span>&nbsp;<span class="ident" id="4482686"><a href="/html/template/transition.go.html#4478432">bytes</a></span><span class="op" id="4482691">.</span><span class="ident" id="4482692">Index</span><span class="op" id="4482697">(</span><span class="ident" id="4482698"><a href="/html/template/transition.go.html#4482650">s</a></span><span class="op" id="4482699">,</span>&nbsp;<span class="ident" id="4482701"><a href="/html/template/transition.go.html#4479497">commentEnd</a></span><span class="op" id="4482711">)</span><span class="op" id="4482712">;</span>&nbsp;<span class="ident" id="4482714"><a href="/html/template/transition.go.html#4482681">i</a></span>&nbsp;<span class="op" id="4482716">!=</span>&nbsp;<span class="op" id="4482719">-</span><span class="num" id="4482720">1</span>&nbsp;<span class="op" id="4482722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4482726">return</span>&nbsp;<span class="ident" id="4482733"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4482740">{</span><span class="op" id="4482741">}</span><span class="op" id="4482742">,</span>&nbsp;<span class="ident" id="4482744"><a href="/html/template/transition.go.html#4482681">i</a></span>&nbsp;<span class="op" id="4482746">+</span>&nbsp;<span class="num" id="4482748">3</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4482751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4482754">return</span>&nbsp;<span class="ident" id="4482761"><a href="/html/template/transition.go.html#4482639">c</a></span><span class="op" id="4482762">,</span>&nbsp;<span class="builtinfunc" id="4482764">len</span><span class="op" id="4482767">(</span><span class="ident" id="4482768"><a href="/html/template/transition.go.html#4482650">s</a></span><span class="op" id="4482769">)</span><br>
<span class="lineno"></span><span class="op" id="4482771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4482774">//&nbsp;specialTagEndMarkers&nbsp;maps&nbsp;element&nbsp;types&nbsp;to&nbsp;the&nbsp;character&nbsp;sequence&nbsp;that</span><br>
<span class="lineno">185</span><span class="comment" id="4482848">//&nbsp;case-insensitively&nbsp;signals&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;special&nbsp;tag&nbsp;body.</span><br>
<span class="lineno"></span><span class="keyword" id="4482911">var</span>&nbsp;<span class="ident" id="4482915">specialTagEndMarkers</span>&nbsp;<span class="op" id="4482936">=</span>&nbsp;<span class="op" id="4482938">[</span><span class="op" id="4482939">...</span><span class="op" id="4482942">]</span><span class="builtintype" id="4482943">string</span><span class="op" id="4482949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4482952"><a href="/html/template/context.go.html#4400830">elementScript</a></span><span class="op" id="4482965">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="4482969">&#34;&lt;/script&#34;</span><span class="op" id="4482979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4482982"><a href="/html/template/context.go.html#4400907">elementStyle</a></span><span class="op" id="4482994">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4482999">&#34;&lt;/style&#34;</span><span class="op" id="4483008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4483011"><a href="/html/template/context.go.html#4400987">elementTextarea</a></span><span class="op" id="4483026">:</span>&nbsp;<span class="string" id="4483028">&#34;&lt;/textarea&#34;</span><span class="op" id="4483040">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4483043"><a href="/html/template/context.go.html#4401064">elementTitle</a></span><span class="op" id="4483055">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4483060">&#34;&lt;/title&#34;</span><span class="op" id="4483069">,</span><br>
<span class="lineno"></span><span class="op" id="4483071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4483074">//&nbsp;tSpecialTagEnd&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;raw&nbsp;text&nbsp;and&nbsp;RCDATA</span><br>
<span class="lineno"></span><span class="comment" id="4483151">//&nbsp;element&nbsp;states.</span><br>
<span class="lineno">195</span><span class="keyword" id="4483170">func</span>&nbsp;<span class="ident" id="4483175">tSpecialTagEnd</span><span class="op" id="4483189">(</span><span class="ident" id="4483190">c</span>&nbsp;<span class="ident" id="4483192"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4483199">,</span>&nbsp;<span class="ident" id="4483201">s</span>&nbsp;<span class="op" id="4483203">[</span><span class="op" id="4483204">]</span><span class="builtintype" id="4483205">byte</span><span class="op" id="4483209">)</span>&nbsp;<span class="op" id="4483211">(</span><span class="ident" id="4483212"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4483219">,</span>&nbsp;<span class="builtintype" id="4483221">int</span><span class="op" id="4483224">)</span>&nbsp;<span class="op" id="4483226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483229">if</span>&nbsp;<span class="ident" id="4483232"><a href="/html/template/transition.go.html#4483190">c</a></span><span class="op" id="4483233">.</span><span class="ident" id="4483234">element</span>&nbsp;<span class="op" id="4483242">!=</span>&nbsp;<span class="ident" id="4483245"><a href="/html/template/context.go.html#4400738">elementNone</a></span>&nbsp;<span class="op" id="4483257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483261">if</span>&nbsp;<span class="ident" id="4483264">i</span>&nbsp;<span class="op" id="4483266">:=</span>&nbsp;<span class="ident" id="4483269"><a href="/html/template/transition.go.html#4478441">strings</a></span><span class="op" id="4483276">.</span><span class="ident" id="4483277">Index</span><span class="op" id="4483282">(</span><span class="ident" id="4483283"><a href="/html/template/transition.go.html#4478441">strings</a></span><span class="op" id="4483290">.</span><span class="ident" id="4483291">ToLower</span><span class="op" id="4483298">(</span><span class="builtintype" id="4483299">string</span><span class="op" id="4483305">(</span><span class="ident" id="4483306"><a href="/html/template/transition.go.html#4483201">s</a></span><span class="op" id="4483307">)</span><span class="op" id="4483308">)</span><span class="op" id="4483309">,</span>&nbsp;<span class="ident" id="4483311"><a href="/html/template/transition.go.html#4482915">specialTagEndMarkers</a></span><span class="op" id="4483331">[</span><span class="ident" id="4483332"><a href="/html/template/transition.go.html#4483190">c</a></span><span class="op" id="4483333">.</span><span class="ident" id="4483334">element</span><span class="op" id="4483341">]</span><span class="op" id="4483342">)</span><span class="op" id="4483343">;</span>&nbsp;<span class="ident" id="4483345"><a href="/html/template/transition.go.html#4483264">i</a></span>&nbsp;<span class="op" id="4483347">!=</span>&nbsp;<span class="op" id="4483350">-</span><span class="num" id="4483351">1</span>&nbsp;<span class="op" id="4483353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483358">return</span>&nbsp;<span class="ident" id="4483365"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4483372">{</span><span class="op" id="4483373">}</span><span class="op" id="4483374">,</span>&nbsp;<span class="ident" id="4483376"><a href="/html/template/transition.go.html#4483264">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4483380">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4483383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483386">return</span>&nbsp;<span class="ident" id="4483393"><a href="/html/template/transition.go.html#4483190">c</a></span><span class="op" id="4483394">,</span>&nbsp;<span class="builtinfunc" id="4483396">len</span><span class="op" id="4483399">(</span><span class="ident" id="4483400"><a href="/html/template/transition.go.html#4483201">s</a></span><span class="op" id="4483401">)</span><br>
<span class="lineno"></span><span class="op" id="4483403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4483406">//&nbsp;tAttr&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;attribute&nbsp;state.</span><br>
<span class="lineno">205</span><span class="keyword" id="4483475">func</span>&nbsp;<span class="ident" id="4483480">tAttr</span><span class="op" id="4483485">(</span><span class="ident" id="4483486">c</span>&nbsp;<span class="ident" id="4483488"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4483495">,</span>&nbsp;<span class="ident" id="4483497">s</span>&nbsp;<span class="op" id="4483499">[</span><span class="op" id="4483500">]</span><span class="builtintype" id="4483501">byte</span><span class="op" id="4483505">)</span>&nbsp;<span class="op" id="4483507">(</span><span class="ident" id="4483508"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4483515">,</span>&nbsp;<span class="builtintype" id="4483517">int</span><span class="op" id="4483520">)</span>&nbsp;<span class="op" id="4483522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483525">return</span>&nbsp;<span class="ident" id="4483532"><a href="/html/template/transition.go.html#4483486">c</a></span><span class="op" id="4483533">,</span>&nbsp;<span class="builtinfunc" id="4483535">len</span><span class="op" id="4483538">(</span><span class="ident" id="4483539"><a href="/html/template/transition.go.html#4483497">s</a></span><span class="op" id="4483540">)</span><br>
<span class="lineno"></span><span class="op" id="4483542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4483545">//&nbsp;tURL&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;URL&nbsp;state.</span><br>
<span class="lineno">210</span><span class="keyword" id="4483607">func</span>&nbsp;<span class="ident" id="4483612">tURL</span><span class="op" id="4483616">(</span><span class="ident" id="4483617">c</span>&nbsp;<span class="ident" id="4483619"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4483626">,</span>&nbsp;<span class="ident" id="4483628">s</span>&nbsp;<span class="op" id="4483630">[</span><span class="op" id="4483631">]</span><span class="builtintype" id="4483632">byte</span><span class="op" id="4483636">)</span>&nbsp;<span class="op" id="4483638">(</span><span class="ident" id="4483639"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4483646">,</span>&nbsp;<span class="builtintype" id="4483648">int</span><span class="op" id="4483651">)</span>&nbsp;<span class="op" id="4483653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483656">if</span>&nbsp;<span class="ident" id="4483659"><a href="/html/template/transition.go.html#4478432">bytes</a></span><span class="op" id="4483664">.</span><span class="ident" id="4483665">IndexAny</span><span class="op" id="4483673">(</span><span class="ident" id="4483674"><a href="/html/template/transition.go.html#4483628">s</a></span><span class="op" id="4483675">,</span>&nbsp;<span class="string" id="4483677">&#34;#?&#34;</span><span class="op" id="4483681">)</span>&nbsp;<span class="op" id="4483683">&gt;=</span>&nbsp;<span class="num" id="4483686">0</span>&nbsp;<span class="op" id="4483688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4483692"><a href="/html/template/transition.go.html#4483617">c</a></span><span class="op" id="4483693">.</span><span class="ident" id="4483694">urlPart</span>&nbsp;<span class="op" id="4483702">=</span>&nbsp;<span class="ident" id="4483704"><a href="/html/template/context.go.html#4399207">urlPartQueryOrFrag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4483724">}</span>&nbsp;<span class="keyword" id="4483726">else</span>&nbsp;<span class="keyword" id="4483731">if</span>&nbsp;<span class="builtinfunc" id="4483734">len</span><span class="op" id="4483737">(</span><span class="ident" id="4483738"><a href="/html/template/transition.go.html#4483628">s</a></span><span class="op" id="4483739">)</span>&nbsp;<span class="op" id="4483741">!=</span>&nbsp;<span class="ident" id="4483744"><a href="/html/template/transition.go.html#4492573">eatWhiteSpace</a></span><span class="op" id="4483757">(</span><span class="ident" id="4483758"><a href="/html/template/transition.go.html#4483628">s</a></span><span class="op" id="4483759">,</span>&nbsp;<span class="num" id="4483761">0</span><span class="op" id="4483762">)</span>&nbsp;<span class="op" id="4483764">&amp;&amp;</span>&nbsp;<span class="ident" id="4483767"><a href="/html/template/transition.go.html#4483617">c</a></span><span class="op" id="4483768">.</span><span class="ident" id="4483769">urlPart</span>&nbsp;<span class="op" id="4483777">==</span>&nbsp;<span class="ident" id="4483780"><a href="/html/template/context.go.html#4398943">urlPartNone</a></span>&nbsp;<span class="op" id="4483792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4483796">//&nbsp;HTML5&nbsp;uses&nbsp;&#34;Valid&nbsp;URL&nbsp;potentially&nbsp;surrounded&nbsp;by&nbsp;spaces&#34;&nbsp;for</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4483861">//&nbsp;attrs:&nbsp;http://www.w3.org/TR/html5/index.html#attributes-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4483924"><a href="/html/template/transition.go.html#4483617">c</a></span><span class="op" id="4483925">.</span><span class="ident" id="4483926">urlPart</span>&nbsp;<span class="op" id="4483934">=</span>&nbsp;<span class="ident" id="4483936"><a href="/html/template/context.go.html#4399086">urlPartPreQuery</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4483953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483956">return</span>&nbsp;<span class="ident" id="4483963"><a href="/html/template/transition.go.html#4483617">c</a></span><span class="op" id="4483964">,</span>&nbsp;<span class="builtinfunc" id="4483966">len</span><span class="op" id="4483969">(</span><span class="ident" id="4483970"><a href="/html/template/transition.go.html#4483628">s</a></span><span class="op" id="4483971">)</span><br>
<span class="lineno"></span><span class="op" id="4483973">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="4483976">//&nbsp;tJS&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;JS&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="4484036">func</span>&nbsp;<span class="ident" id="4484041">tJS</span><span class="op" id="4484044">(</span><span class="ident" id="4484045">c</span>&nbsp;<span class="ident" id="4484047"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4484054">,</span>&nbsp;<span class="ident" id="4484056">s</span>&nbsp;<span class="op" id="4484058">[</span><span class="op" id="4484059">]</span><span class="builtintype" id="4484060">byte</span><span class="op" id="4484064">)</span>&nbsp;<span class="op" id="4484066">(</span><span class="ident" id="4484067"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4484074">,</span>&nbsp;<span class="builtintype" id="4484076">int</span><span class="op" id="4484079">)</span>&nbsp;<span class="op" id="4484081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484084">i</span>&nbsp;<span class="op" id="4484086">:=</span>&nbsp;<span class="ident" id="4484089"><a href="/html/template/transition.go.html#4478432">bytes</a></span><span class="op" id="4484094">.</span><span class="ident" id="4484095">IndexAny</span><span class="op" id="4484103">(</span><span class="ident" id="4484104"><a href="/html/template/transition.go.html#4484056">s</a></span><span class="op" id="4484105">,</span>&nbsp;<span class="string" id="4484107">`&#34;&#39;/`</span><span class="op" id="4484112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484115">if</span>&nbsp;<span class="ident" id="4484118"><a href="/html/template/transition.go.html#4484084">i</a></span>&nbsp;<span class="op" id="4484120">==</span>&nbsp;<span class="op" id="4484123">-</span><span class="num" id="4484124">1</span>&nbsp;<span class="op" id="4484126">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4484130">//&nbsp;Entire&nbsp;input&nbsp;is&nbsp;non&nbsp;string,&nbsp;comment,&nbsp;regexp&nbsp;tokens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484187"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484188">.</span><span class="ident" id="4484189">jsCtx</span>&nbsp;<span class="op" id="4484195">=</span>&nbsp;<span class="ident" id="4484197"><a href="/html/template/js.go.html#4456397">nextJSCtx</a></span><span class="op" id="4484206">(</span><span class="ident" id="4484207"><a href="/html/template/transition.go.html#4484056">s</a></span><span class="op" id="4484208">,</span>&nbsp;<span class="ident" id="4484210"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484211">.</span><span class="ident" id="4484212">jsCtx</span><span class="op" id="4484217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484221">return</span>&nbsp;<span class="ident" id="4484228"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484229">,</span>&nbsp;<span class="builtinfunc" id="4484231">len</span><span class="op" id="4484234">(</span><span class="ident" id="4484235"><a href="/html/template/transition.go.html#4484056">s</a></span><span class="op" id="4484236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4484239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484242"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484243">.</span><span class="ident" id="4484244">jsCtx</span>&nbsp;<span class="op" id="4484250">=</span>&nbsp;<span class="ident" id="4484252"><a href="/html/template/js.go.html#4456397">nextJSCtx</a></span><span class="op" id="4484261">(</span><span class="ident" id="4484262"><a href="/html/template/transition.go.html#4484056">s</a></span><span class="op" id="4484263">[</span><span class="op" id="4484264">:</span><span class="ident" id="4484265"><a href="/html/template/transition.go.html#4484084">i</a></span><span class="op" id="4484266">]</span><span class="op" id="4484267">,</span>&nbsp;<span class="ident" id="4484269"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484270">.</span><span class="ident" id="4484271">jsCtx</span><span class="op" id="4484276">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484279">switch</span>&nbsp;<span class="ident" id="4484286"><a href="/html/template/transition.go.html#4484056">s</a></span><span class="op" id="4484287">[</span><span class="ident" id="4484288"><a href="/html/template/transition.go.html#4484084">i</a></span><span class="op" id="4484289">]</span>&nbsp;<span class="op" id="4484291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484294">case</span>&nbsp;<span class="string" id="4484299">&#39;&#34;&#39;</span><span class="op" id="4484302">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484306"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484307">.</span><span class="ident" id="4484308">state</span><span class="op" id="4484313">,</span>&nbsp;<span class="ident" id="4484315"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484316">.</span><span class="ident" id="4484317">jsCtx</span>&nbsp;<span class="op" id="4484323">=</span>&nbsp;<span class="ident" id="4484325"><a href="/html/template/context.go.html#4395341">stateJSDqStr</a></span><span class="op" id="4484337">,</span>&nbsp;<span class="ident" id="4484339"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484352">case</span>&nbsp;<span class="string" id="4484357">&#39;\&#39;&#39;</span><span class="op" id="4484361">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484365"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484366">.</span><span class="ident" id="4484367">state</span><span class="op" id="4484372">,</span>&nbsp;<span class="ident" id="4484374"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484375">.</span><span class="ident" id="4484376">jsCtx</span>&nbsp;<span class="op" id="4484382">=</span>&nbsp;<span class="ident" id="4484384"><a href="/html/template/context.go.html#4395421">stateJSSqStr</a></span><span class="op" id="4484396">,</span>&nbsp;<span class="ident" id="4484398"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484411">case</span>&nbsp;<span class="string" id="4484416">&#39;/&#39;</span><span class="op" id="4484419">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484423">switch</span>&nbsp;<span class="op" id="4484430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484434">case</span>&nbsp;<span class="ident" id="4484439"><a href="/html/template/transition.go.html#4484084">i</a></span><span class="op" id="4484440">+</span><span class="num" id="4484441">1</span>&nbsp;<span class="op" id="4484443">&lt;</span>&nbsp;<span class="builtinfunc" id="4484445">len</span><span class="op" id="4484448">(</span><span class="ident" id="4484449"><a href="/html/template/transition.go.html#4484056">s</a></span><span class="op" id="4484450">)</span>&nbsp;<span class="op" id="4484452">&amp;&amp;</span>&nbsp;<span class="ident" id="4484455"><a href="/html/template/transition.go.html#4484056">s</a></span><span class="op" id="4484456">[</span><span class="ident" id="4484457"><a href="/html/template/transition.go.html#4484084">i</a></span><span class="op" id="4484458">+</span><span class="num" id="4484459">1</span><span class="op" id="4484460">]</span>&nbsp;<span class="op" id="4484462">==</span>&nbsp;<span class="string" id="4484465">&#39;/&#39;</span><span class="op" id="4484468">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484473"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484474">.</span><span class="ident" id="4484475">state</span><span class="op" id="4484480">,</span>&nbsp;<span class="ident" id="4484482"><a href="/html/template/transition.go.html#4484084">i</a></span>&nbsp;<span class="op" id="4484484">=</span>&nbsp;<span class="ident" id="4484486"><a href="/html/template/context.go.html#4395659">stateJSLineCmt</a></span><span class="op" id="4484500">,</span>&nbsp;<span class="ident" id="4484502"><a href="/html/template/transition.go.html#4484084">i</a></span><span class="op" id="4484503">+</span><span class="num" id="4484504">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484508">case</span>&nbsp;<span class="ident" id="4484513"><a href="/html/template/transition.go.html#4484084">i</a></span><span class="op" id="4484514">+</span><span class="num" id="4484515">1</span>&nbsp;<span class="op" id="4484517">&lt;</span>&nbsp;<span class="builtinfunc" id="4484519">len</span><span class="op" id="4484522">(</span><span class="ident" id="4484523"><a href="/html/template/transition.go.html#4484056">s</a></span><span class="op" id="4484524">)</span>&nbsp;<span class="op" id="4484526">&amp;&amp;</span>&nbsp;<span class="ident" id="4484529"><a href="/html/template/transition.go.html#4484056">s</a></span><span class="op" id="4484530">[</span><span class="ident" id="4484531"><a href="/html/template/transition.go.html#4484084">i</a></span><span class="op" id="4484532">+</span><span class="num" id="4484533">1</span><span class="op" id="4484534">]</span>&nbsp;<span class="op" id="4484536">==</span>&nbsp;<span class="string" id="4484539">&#39;*&#39;</span><span class="op" id="4484542">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484547"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484548">.</span><span class="ident" id="4484549">state</span><span class="op" id="4484554">,</span>&nbsp;<span class="ident" id="4484556"><a href="/html/template/transition.go.html#4484084">i</a></span>&nbsp;<span class="op" id="4484558">=</span>&nbsp;<span class="ident" id="4484560"><a href="/html/template/context.go.html#4395579">stateJSBlockCmt</a></span><span class="op" id="4484575">,</span>&nbsp;<span class="ident" id="4484577"><a href="/html/template/transition.go.html#4484084">i</a></span><span class="op" id="4484578">+</span><span class="num" id="4484579">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484583">case</span>&nbsp;<span class="ident" id="4484588"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484589">.</span><span class="ident" id="4484590">jsCtx</span>&nbsp;<span class="op" id="4484596">==</span>&nbsp;<span class="ident" id="4484599"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="4484610">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484615"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484616">.</span><span class="ident" id="4484617">state</span>&nbsp;<span class="op" id="4484623">=</span>&nbsp;<span class="ident" id="4484625"><a href="/html/template/context.go.html#4395496">stateJSRegexp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484641">case</span>&nbsp;<span class="ident" id="4484646"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484647">.</span><span class="ident" id="4484648">jsCtx</span>&nbsp;<span class="op" id="4484654">==</span>&nbsp;<span class="ident" id="4484657"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="4484667">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484672"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484673">.</span><span class="ident" id="4484674">jsCtx</span>&nbsp;<span class="op" id="4484680">=</span>&nbsp;<span class="ident" id="4484682"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484696">default</span><span class="op" id="4484703">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484708">return</span>&nbsp;<span class="ident" id="4484715"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4484722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484728">state</span><span class="op" id="4484733">:</span>&nbsp;<span class="ident" id="4484735"><a href="/html/template/context.go.html#4396369">stateError</a></span><span class="op" id="4484745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484751">err</span><span class="op" id="4484754">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4484758"><a href="/html/template/error.go.html#4422980">errorf</a></span><span class="op" id="4484764">(</span><span class="ident" id="4484765"><a href="/html/template/error.go.html#4422433">ErrSlashAmbig</a></span><span class="op" id="4484778">,</span>&nbsp;<span class="ident" id="4484780">nil</span><span class="op" id="4484783">,</span>&nbsp;<span class="num" id="4484785">0</span><span class="op" id="4484786">,</span>&nbsp;<span class="string" id="4484788">&#34;&#39;/&#39;&nbsp;could&nbsp;start&nbsp;a&nbsp;division&nbsp;or&nbsp;regexp:&nbsp;%.32q&#34;</span><span class="op" id="4484833">,</span>&nbsp;<span class="ident" id="4484835"><a href="/html/template/transition.go.html#4484056">s</a></span><span class="op" id="4484836">[</span><span class="ident" id="4484837"><a href="/html/template/transition.go.html#4484084">i</a></span><span class="op" id="4484838">:</span><span class="op" id="4484839">]</span><span class="op" id="4484840">)</span><span class="op" id="4484841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4484846">}</span><span class="op" id="4484847">,</span>&nbsp;<span class="builtinfunc" id="4484849">len</span><span class="op" id="4484852">(</span><span class="ident" id="4484853"><a href="/html/template/transition.go.html#4484056">s</a></span><span class="op" id="4484854">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4484858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484861">default</span><span class="op" id="4484868">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4484872">panic</span><span class="op" id="4484877">(</span><span class="string" id="4484878">&#34;unreachable&#34;</span><span class="op" id="4484891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4484894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484897">return</span>&nbsp;<span class="ident" id="4484904"><a href="/html/template/transition.go.html#4484045">c</a></span><span class="op" id="4484905">,</span>&nbsp;<span class="ident" id="4484907"><a href="/html/template/transition.go.html#4484084">i</a></span>&nbsp;<span class="op" id="4484909">+</span>&nbsp;<span class="num" id="4484911">1</span><br>
<span class="lineno">255</span><span class="op" id="4484913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4484916">//&nbsp;tJSDelimited&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;JS&nbsp;string&nbsp;and&nbsp;regexp</span><br>
<span class="lineno"></span><span class="comment" id="4484996">//&nbsp;states.</span><br>
<span class="lineno"></span><span class="keyword" id="4485007">func</span>&nbsp;<span class="ident" id="4485012">tJSDelimited</span><span class="op" id="4485024">(</span><span class="ident" id="4485025">c</span>&nbsp;<span class="ident" id="4485027"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4485034">,</span>&nbsp;<span class="ident" id="4485036">s</span>&nbsp;<span class="op" id="4485038">[</span><span class="op" id="4485039">]</span><span class="builtintype" id="4485040">byte</span><span class="op" id="4485044">)</span>&nbsp;<span class="op" id="4485046">(</span><span class="ident" id="4485047"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4485054">,</span>&nbsp;<span class="builtintype" id="4485056">int</span><span class="op" id="4485059">)</span>&nbsp;<span class="op" id="4485061">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485064">specials</span>&nbsp;<span class="op" id="4485073">:=</span>&nbsp;<span class="string" id="4485076">`\&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485082">switch</span>&nbsp;<span class="ident" id="4485089"><a href="/html/template/transition.go.html#4485025">c</a></span><span class="op" id="4485090">.</span><span class="ident" id="4485091">state</span>&nbsp;<span class="op" id="4485097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485100">case</span>&nbsp;<span class="ident" id="4485105"><a href="/html/template/context.go.html#4395421">stateJSSqStr</a></span><span class="op" id="4485117">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485121"><a href="/html/template/transition.go.html#4485064">specials</a></span>&nbsp;<span class="op" id="4485130">=</span>&nbsp;<span class="string" id="4485132">`\&#39;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485138">case</span>&nbsp;<span class="ident" id="4485143"><a href="/html/template/context.go.html#4395496">stateJSRegexp</a></span><span class="op" id="4485156">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485160"><a href="/html/template/transition.go.html#4485064">specials</a></span>&nbsp;<span class="op" id="4485169">=</span>&nbsp;<span class="string" id="4485171">`\/[]`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4485179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485183">k</span><span class="op" id="4485184">,</span>&nbsp;<span class="ident" id="4485186">inCharset</span>&nbsp;<span class="op" id="4485196">:=</span>&nbsp;<span class="num" id="4485199">0</span><span class="op" id="4485200">,</span>&nbsp;<span class="builtintype" id="4485202">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485209">for</span>&nbsp;<span class="op" id="4485213">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485217">i</span>&nbsp;<span class="op" id="4485219">:=</span>&nbsp;<span class="ident" id="4485222"><a href="/html/template/transition.go.html#4485183">k</a></span>&nbsp;<span class="op" id="4485224">+</span>&nbsp;<span class="ident" id="4485226"><a href="/html/template/transition.go.html#4478432">bytes</a></span><span class="op" id="4485231">.</span><span class="ident" id="4485232">IndexAny</span><span class="op" id="4485240">(</span><span class="ident" id="4485241"><a href="/html/template/transition.go.html#4485036">s</a></span><span class="op" id="4485242">[</span><span class="ident" id="4485243"><a href="/html/template/transition.go.html#4485183">k</a></span><span class="op" id="4485244">:</span><span class="op" id="4485245">]</span><span class="op" id="4485246">,</span>&nbsp;<span class="ident" id="4485248"><a href="/html/template/transition.go.html#4485064">specials</a></span><span class="op" id="4485256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485260">if</span>&nbsp;<span class="ident" id="4485263"><a href="/html/template/transition.go.html#4485217">i</a></span>&nbsp;<span class="op" id="4485265">&lt;</span>&nbsp;<span class="ident" id="4485267"><a href="/html/template/transition.go.html#4485183">k</a></span>&nbsp;<span class="op" id="4485269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485274">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4485282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485286">switch</span>&nbsp;<span class="ident" id="4485293"><a href="/html/template/transition.go.html#4485036">s</a></span><span class="op" id="4485294">[</span><span class="ident" id="4485295"><a href="/html/template/transition.go.html#4485217">i</a></span><span class="op" id="4485296">]</span>&nbsp;<span class="op" id="4485298">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485302">case</span>&nbsp;<span class="string" id="4485307">&#39;\\&#39;</span><span class="op" id="4485311">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485316"><a href="/html/template/transition.go.html#4485217">i</a></span><span class="op" id="4485317">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485323">if</span>&nbsp;<span class="ident" id="4485326"><a href="/html/template/transition.go.html#4485217">i</a></span>&nbsp;<span class="op" id="4485328">==</span>&nbsp;<span class="builtinfunc" id="4485331">len</span><span class="op" id="4485334">(</span><span class="ident" id="4485335"><a href="/html/template/transition.go.html#4485036">s</a></span><span class="op" id="4485336">)</span>&nbsp;<span class="op" id="4485338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485344">return</span>&nbsp;<span class="ident" id="4485351"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4485358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485365">state</span><span class="op" id="4485370">:</span>&nbsp;<span class="ident" id="4485372"><a href="/html/template/context.go.html#4396369">stateError</a></span><span class="op" id="4485382">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485389">err</span><span class="op" id="4485392">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4485396"><a href="/html/template/error.go.html#4422980">errorf</a></span><span class="op" id="4485402">(</span><span class="ident" id="4485403"><a href="/html/template/error.go.html#4421283">ErrPartialEscape</a></span><span class="op" id="4485419">,</span>&nbsp;<span class="ident" id="4485421">nil</span><span class="op" id="4485424">,</span>&nbsp;<span class="num" id="4485426">0</span><span class="op" id="4485427">,</span>&nbsp;<span class="string" id="4485429">&#34;unfinished&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;JS&nbsp;string:&nbsp;%q&#34;</span><span class="op" id="4485474">,</span>&nbsp;<span class="ident" id="4485476"><a href="/html/template/transition.go.html#4485036">s</a></span><span class="op" id="4485477">)</span><span class="op" id="4485478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4485484">}</span><span class="op" id="4485485">,</span>&nbsp;<span class="builtinfunc" id="4485487">len</span><span class="op" id="4485490">(</span><span class="ident" id="4485491"><a href="/html/template/transition.go.html#4485036">s</a></span><span class="op" id="4485492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4485497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485501">case</span>&nbsp;<span class="string" id="4485506">&#39;[&#39;</span><span class="op" id="4485509">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485514"><a href="/html/template/transition.go.html#4485186">inCharset</a></span>&nbsp;<span class="op" id="4485524">=</span>&nbsp;<span class="builtintype" id="4485526">true</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485533">case</span>&nbsp;<span class="string" id="4485538">&#39;]&#39;</span><span class="op" id="4485541">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485546"><a href="/html/template/transition.go.html#4485186">inCharset</a></span>&nbsp;<span class="op" id="4485556">=</span>&nbsp;<span class="builtintype" id="4485558">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485566">default</span><span class="op" id="4485573">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4485578">//&nbsp;end&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485598">if</span>&nbsp;<span class="op" id="4485601">!</span><span class="ident" id="4485602"><a href="/html/template/transition.go.html#4485186">inCharset</a></span>&nbsp;<span class="op" id="4485612">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485618"><a href="/html/template/transition.go.html#4485025">c</a></span><span class="op" id="4485619">.</span><span class="ident" id="4485620">state</span><span class="op" id="4485625">,</span>&nbsp;<span class="ident" id="4485627"><a href="/html/template/transition.go.html#4485025">c</a></span><span class="op" id="4485628">.</span><span class="ident" id="4485629">jsCtx</span>&nbsp;<span class="op" id="4485635">=</span>&nbsp;<span class="ident" id="4485637"><a href="/html/template/context.go.html#4395266">stateJS</a></span><span class="op" id="4485644">,</span>&nbsp;<span class="ident" id="4485646"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485661">return</span>&nbsp;<span class="ident" id="4485668"><a href="/html/template/transition.go.html#4485025">c</a></span><span class="op" id="4485669">,</span>&nbsp;<span class="ident" id="4485671"><a href="/html/template/transition.go.html#4485217">i</a></span>&nbsp;<span class="op" id="4485673">+</span>&nbsp;<span class="num" id="4485675">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4485680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4485684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485688"><a href="/html/template/transition.go.html#4485183">k</a></span>&nbsp;<span class="op" id="4485690">=</span>&nbsp;<span class="ident" id="4485692"><a href="/html/template/transition.go.html#4485217">i</a></span>&nbsp;<span class="op" id="4485694">+</span>&nbsp;<span class="num" id="4485696">1</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4485699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485703">if</span>&nbsp;<span class="ident" id="4485706"><a href="/html/template/transition.go.html#4485186">inCharset</a></span>&nbsp;<span class="op" id="4485716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4485720">//&nbsp;This&nbsp;can&nbsp;be&nbsp;fixed&nbsp;by&nbsp;making&nbsp;context&nbsp;richer&nbsp;if&nbsp;interpolation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4485785">//&nbsp;into&nbsp;charsets&nbsp;is&nbsp;desired.</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485816">return</span>&nbsp;<span class="ident" id="4485823"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4485830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485835">state</span><span class="op" id="4485840">:</span>&nbsp;<span class="ident" id="4485842"><a href="/html/template/context.go.html#4396369">stateError</a></span><span class="op" id="4485852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485857">err</span><span class="op" id="4485860">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4485864"><a href="/html/template/error.go.html#4422980">errorf</a></span><span class="op" id="4485870">(</span><span class="ident" id="4485871"><a href="/html/template/error.go.html#4420794">ErrPartialCharset</a></span><span class="op" id="4485888">,</span>&nbsp;<span class="ident" id="4485890">nil</span><span class="op" id="4485893">,</span>&nbsp;<span class="num" id="4485895">0</span><span class="op" id="4485896">,</span>&nbsp;<span class="string" id="4485898">&#34;unfinished&nbsp;JS&nbsp;regexp&nbsp;charset:&nbsp;%q&#34;</span><span class="op" id="4485932">,</span>&nbsp;<span class="ident" id="4485934"><a href="/html/template/transition.go.html#4485036">s</a></span><span class="op" id="4485935">)</span><span class="op" id="4485936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4485940">}</span><span class="op" id="4485941">,</span>&nbsp;<span class="builtinfunc" id="4485943">len</span><span class="op" id="4485946">(</span><span class="ident" id="4485947"><a href="/html/template/transition.go.html#4485036">s</a></span><span class="op" id="4485948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4485951">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4485955">return</span>&nbsp;<span class="ident" id="4485962"><a href="/html/template/transition.go.html#4485025">c</a></span><span class="op" id="4485963">,</span>&nbsp;<span class="builtinfunc" id="4485965">len</span><span class="op" id="4485968">(</span><span class="ident" id="4485969"><a href="/html/template/transition.go.html#4485036">s</a></span><span class="op" id="4485970">)</span><br>
<span class="lineno"></span><span class="op" id="4485972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4485975">var</span>&nbsp;<span class="ident" id="4485979">blockCommentEnd</span>&nbsp;<span class="op" id="4485995">=</span>&nbsp;<span class="op" id="4485997">[</span><span class="op" id="4485998">]</span><span class="builtintype" id="4485999">byte</span><span class="op" id="4486003">(</span><span class="string" id="4486004">&#34;*/&#34;</span><span class="op" id="4486008">)</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span><span class="comment" id="4486011">//&nbsp;tBlockCmt&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;/*comment*/&nbsp;states.</span><br>
<span class="lineno"></span><span class="keyword" id="4486083">func</span>&nbsp;<span class="ident" id="4486088">tBlockCmt</span><span class="op" id="4486097">(</span><span class="ident" id="4486098">c</span>&nbsp;<span class="ident" id="4486100"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4486107">,</span>&nbsp;<span class="ident" id="4486109">s</span>&nbsp;<span class="op" id="4486111">[</span><span class="op" id="4486112">]</span><span class="builtintype" id="4486113">byte</span><span class="op" id="4486117">)</span>&nbsp;<span class="op" id="4486119">(</span><span class="ident" id="4486120"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4486127">,</span>&nbsp;<span class="builtintype" id="4486129">int</span><span class="op" id="4486132">)</span>&nbsp;<span class="op" id="4486134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486137">i</span>&nbsp;<span class="op" id="4486139">:=</span>&nbsp;<span class="ident" id="4486142"><a href="/html/template/transition.go.html#4478432">bytes</a></span><span class="op" id="4486147">.</span><span class="ident" id="4486148">Index</span><span class="op" id="4486153">(</span><span class="ident" id="4486154"><a href="/html/template/transition.go.html#4486109">s</a></span><span class="op" id="4486155">,</span>&nbsp;<span class="ident" id="4486157"><a href="/html/template/transition.go.html#4485979">blockCommentEnd</a></span><span class="op" id="4486172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486175">if</span>&nbsp;<span class="ident" id="4486178"><a href="/html/template/transition.go.html#4486137">i</a></span>&nbsp;<span class="op" id="4486180">==</span>&nbsp;<span class="op" id="4486183">-</span><span class="num" id="4486184">1</span>&nbsp;<span class="op" id="4486186">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486190">return</span>&nbsp;<span class="ident" id="4486197"><a href="/html/template/transition.go.html#4486098">c</a></span><span class="op" id="4486198">,</span>&nbsp;<span class="builtinfunc" id="4486200">len</span><span class="op" id="4486203">(</span><span class="ident" id="4486204"><a href="/html/template/transition.go.html#4486109">s</a></span><span class="op" id="4486205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4486208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486211">switch</span>&nbsp;<span class="ident" id="4486218"><a href="/html/template/transition.go.html#4486098">c</a></span><span class="op" id="4486219">.</span><span class="ident" id="4486220">state</span>&nbsp;<span class="op" id="4486226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486229">case</span>&nbsp;<span class="ident" id="4486234"><a href="/html/template/context.go.html#4395579">stateJSBlockCmt</a></span><span class="op" id="4486249">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486253"><a href="/html/template/transition.go.html#4486098">c</a></span><span class="op" id="4486254">.</span><span class="ident" id="4486255">state</span>&nbsp;<span class="op" id="4486261">=</span>&nbsp;<span class="ident" id="4486263"><a href="/html/template/context.go.html#4395266">stateJS</a></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486272">case</span>&nbsp;<span class="ident" id="4486277"><a href="/html/template/context.go.html#4396188">stateCSSBlockCmt</a></span><span class="op" id="4486293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486297"><a href="/html/template/transition.go.html#4486098">c</a></span><span class="op" id="4486298">.</span><span class="ident" id="4486299">state</span>&nbsp;<span class="op" id="4486305">=</span>&nbsp;<span class="ident" id="4486307"><a href="/html/template/context.go.html#4395740">stateCSS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486317">default</span><span class="op" id="4486324">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4486328">panic</span><span class="op" id="4486333">(</span><span class="ident" id="4486334"><a href="/html/template/transition.go.html#4486098">c</a></span><span class="op" id="4486335">.</span><span class="ident" id="4486336">state</span><span class="op" id="4486341">.</span><span class="ident" id="4486342">String</span><span class="op" id="4486348">(</span><span class="op" id="4486349">)</span><span class="op" id="4486350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4486353">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486356">return</span>&nbsp;<span class="ident" id="4486363"><a href="/html/template/transition.go.html#4486098">c</a></span><span class="op" id="4486364">,</span>&nbsp;<span class="ident" id="4486366"><a href="/html/template/transition.go.html#4486137">i</a></span>&nbsp;<span class="op" id="4486368">+</span>&nbsp;<span class="num" id="4486370">2</span><br>
<span class="lineno"></span><span class="op" id="4486372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4486375">//&nbsp;tLineCmt&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;//comment&nbsp;states.</span><br>
<span class="lineno"></span><span class="keyword" id="4486444">func</span>&nbsp;<span class="ident" id="4486449">tLineCmt</span><span class="op" id="4486457">(</span><span class="ident" id="4486458">c</span>&nbsp;<span class="ident" id="4486460"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4486467">,</span>&nbsp;<span class="ident" id="4486469">s</span>&nbsp;<span class="op" id="4486471">[</span><span class="op" id="4486472">]</span><span class="builtintype" id="4486473">byte</span><span class="op" id="4486477">)</span>&nbsp;<span class="op" id="4486479">(</span><span class="ident" id="4486480"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4486487">,</span>&nbsp;<span class="builtintype" id="4486489">int</span><span class="op" id="4486492">)</span>&nbsp;<span class="op" id="4486494">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486497">var</span>&nbsp;<span class="ident" id="4486501">lineTerminators</span>&nbsp;<span class="builtintype" id="4486517">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486525">var</span>&nbsp;<span class="ident" id="4486529">endState</span>&nbsp;<span class="ident" id="4486538"><a href="/html/template/context.go.html#4394112">state</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486545">switch</span>&nbsp;<span class="ident" id="4486552"><a href="/html/template/transition.go.html#4486458">c</a></span><span class="op" id="4486553">.</span><span class="ident" id="4486554">state</span>&nbsp;<span class="op" id="4486560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486563">case</span>&nbsp;<span class="ident" id="4486568"><a href="/html/template/context.go.html#4395659">stateJSLineCmt</a></span><span class="op" id="4486582">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486586"><a href="/html/template/transition.go.html#4486501">lineTerminators</a></span><span class="op" id="4486601">,</span>&nbsp;<span class="ident" id="4486603"><a href="/html/template/transition.go.html#4486529">endState</a></span>&nbsp;<span class="op" id="4486612">=</span>&nbsp;<span class="string" id="4486614">&#34;\n\r\u2028\u2029&#34;</span><span class="op" id="4486632">,</span>&nbsp;<span class="ident" id="4486634"><a href="/html/template/context.go.html#4395266">stateJS</a></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486643">case</span>&nbsp;<span class="ident" id="4486648"><a href="/html/template/context.go.html#4396263">stateCSSLineCmt</a></span><span class="op" id="4486663">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486667"><a href="/html/template/transition.go.html#4486501">lineTerminators</a></span><span class="op" id="4486682">,</span>&nbsp;<span class="ident" id="4486684"><a href="/html/template/transition.go.html#4486529">endState</a></span>&nbsp;<span class="op" id="4486693">=</span>&nbsp;<span class="string" id="4486695">&#34;\n\f\r&#34;</span><span class="op" id="4486703">,</span>&nbsp;<span class="ident" id="4486705"><a href="/html/template/context.go.html#4395740">stateCSS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4486716">//&nbsp;Line&nbsp;comments&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;any&nbsp;published&nbsp;CSS&nbsp;standard&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4486782">//&nbsp;are&nbsp;supported&nbsp;by&nbsp;the&nbsp;4&nbsp;major&nbsp;browsers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4486826">//&nbsp;This&nbsp;defines&nbsp;line&nbsp;comments&nbsp;as</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4486861">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LINECOMMENT&nbsp;::=&nbsp;&#34;//&#34;&nbsp;[^\n\f\d]*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4486902">//&nbsp;since&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-nl&nbsp;defines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4486965">//&nbsp;newlines:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4486980">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nl&nbsp;::=&nbsp;#xA&nbsp;|&nbsp;#xD&nbsp;#xA&nbsp;|&nbsp;#xD&nbsp;|&nbsp;#xC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4487021">default</span><span class="op" id="4487028">:</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4487032">panic</span><span class="op" id="4487037">(</span><span class="ident" id="4487038"><a href="/html/template/transition.go.html#4486458">c</a></span><span class="op" id="4487039">.</span><span class="ident" id="4487040">state</span><span class="op" id="4487045">.</span><span class="ident" id="4487046">String</span><span class="op" id="4487052">(</span><span class="op" id="4487053">)</span><span class="op" id="4487054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4487057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4487061">i</span>&nbsp;<span class="op" id="4487063">:=</span>&nbsp;<span class="ident" id="4487066"><a href="/html/template/transition.go.html#4478432">bytes</a></span><span class="op" id="4487071">.</span><span class="ident" id="4487072">IndexAny</span><span class="op" id="4487080">(</span><span class="ident" id="4487081"><a href="/html/template/transition.go.html#4486469">s</a></span><span class="op" id="4487082">,</span>&nbsp;<span class="ident" id="4487084"><a href="/html/template/transition.go.html#4486501">lineTerminators</a></span><span class="op" id="4487099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4487102">if</span>&nbsp;<span class="ident" id="4487105"><a href="/html/template/transition.go.html#4487061">i</a></span>&nbsp;<span class="op" id="4487107">==</span>&nbsp;<span class="op" id="4487110">-</span><span class="num" id="4487111">1</span>&nbsp;<span class="op" id="4487113">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4487117">return</span>&nbsp;<span class="ident" id="4487124"><a href="/html/template/transition.go.html#4486458">c</a></span><span class="op" id="4487125">,</span>&nbsp;<span class="builtinfunc" id="4487127">len</span><span class="op" id="4487130">(</span><span class="ident" id="4487131"><a href="/html/template/transition.go.html#4486469">s</a></span><span class="op" id="4487132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4487135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4487138"><a href="/html/template/transition.go.html#4486458">c</a></span><span class="op" id="4487139">.</span><span class="ident" id="4487140">state</span>&nbsp;<span class="op" id="4487146">=</span>&nbsp;<span class="ident" id="4487148"><a href="/html/template/transition.go.html#4486529">endState</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487158">//&nbsp;Per&nbsp;section&nbsp;7.4&nbsp;of&nbsp;EcmaScript&nbsp;5&nbsp;:&nbsp;http://es5.github.com/#x7.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487224">//&nbsp;&#34;However,&nbsp;the&nbsp;LineTerminator&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;line&nbsp;is&nbsp;not</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487287">//&nbsp;considered&nbsp;to&nbsp;be&nbsp;part&nbsp;of&nbsp;the&nbsp;single-line&nbsp;comment;&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487347">//&nbsp;recognized&nbsp;separately&nbsp;by&nbsp;the&nbsp;lexical&nbsp;grammar&nbsp;and&nbsp;becomes&nbsp;part</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487413">//&nbsp;of&nbsp;the&nbsp;stream&nbsp;of&nbsp;input&nbsp;elements&nbsp;for&nbsp;the&nbsp;syntactic&nbsp;grammar.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4487477">return</span>&nbsp;<span class="ident" id="4487484"><a href="/html/template/transition.go.html#4486458">c</a></span><span class="op" id="4487485">,</span>&nbsp;<span class="ident" id="4487487"><a href="/html/template/transition.go.html#4487061">i</a></span><br>
<span class="lineno"></span><span class="op" id="4487489">}</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span><span class="comment" id="4487492">//&nbsp;tCSS&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;CSS&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="4487554">func</span>&nbsp;<span class="ident" id="4487559">tCSS</span><span class="op" id="4487563">(</span><span class="ident" id="4487564">c</span>&nbsp;<span class="ident" id="4487566"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4487573">,</span>&nbsp;<span class="ident" id="4487575">s</span>&nbsp;<span class="op" id="4487577">[</span><span class="op" id="4487578">]</span><span class="builtintype" id="4487579">byte</span><span class="op" id="4487583">)</span>&nbsp;<span class="op" id="4487585">(</span><span class="ident" id="4487586"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4487593">,</span>&nbsp;<span class="builtintype" id="4487595">int</span><span class="op" id="4487598">)</span>&nbsp;<span class="op" id="4487600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487603">//&nbsp;CSS&nbsp;quoted&nbsp;strings&nbsp;are&nbsp;almost&nbsp;never&nbsp;used&nbsp;except&nbsp;for:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487660">//&nbsp;(1)&nbsp;URLs&nbsp;as&nbsp;in&nbsp;background:&nbsp;&#34;/foo.png&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487702">//&nbsp;(2)&nbsp;Multiword&nbsp;font-names&nbsp;as&nbsp;in&nbsp;font-family:&nbsp;&#34;Times&nbsp;New&nbsp;Roman&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487768">//&nbsp;(3)&nbsp;List&nbsp;separators&nbsp;in&nbsp;content&nbsp;values&nbsp;as&nbsp;in&nbsp;inline-lists:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487830">//&nbsp;&nbsp;&nbsp;&nbsp;&lt;style&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487845">//&nbsp;&nbsp;&nbsp;&nbsp;ul.inlineList&nbsp;{&nbsp;list-style:&nbsp;none;&nbsp;padding:0&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487898">//&nbsp;&nbsp;&nbsp;&nbsp;ul.inlineList&nbsp;&gt;&nbsp;li&nbsp;{&nbsp;display:&nbsp;inline&nbsp;}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487944">//&nbsp;&nbsp;&nbsp;&nbsp;ul.inlineList&nbsp;&gt;&nbsp;li:before&nbsp;{&nbsp;content:&nbsp;&#34;,&nbsp;&#34;&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4487995">//&nbsp;&nbsp;&nbsp;&nbsp;ul.inlineList&nbsp;&gt;&nbsp;li:first-child:before&nbsp;{&nbsp;content:&nbsp;&#34;&#34;&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488056">//&nbsp;&nbsp;&nbsp;&nbsp;&lt;/style&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488072">//&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&nbsp;class=inlineList&gt;&lt;li&gt;One&lt;li&gt;Two&lt;li&gt;Three&lt;/ul&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488129">//&nbsp;(4)&nbsp;Attribute&nbsp;value&nbsp;selectors&nbsp;as&nbsp;in&nbsp;a[href=&#34;http://example.com/&#34;]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488199">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488203">//&nbsp;We&nbsp;conservatively&nbsp;treat&nbsp;all&nbsp;strings&nbsp;as&nbsp;URLs,&nbsp;but&nbsp;make&nbsp;some</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488266">//&nbsp;allowances&nbsp;to&nbsp;avoid&nbsp;confusion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488301">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488305">//&nbsp;In&nbsp;(1),&nbsp;our&nbsp;conservative&nbsp;assumption&nbsp;is&nbsp;justified.</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488359">//&nbsp;In&nbsp;(2),&nbsp;valid&nbsp;font&nbsp;names&nbsp;do&nbsp;not&nbsp;contain&nbsp;&#39;:&#39;,&nbsp;&#39;?&#39;,&nbsp;or&nbsp;&#39;#&#39;,&nbsp;so&nbsp;our</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488428">//&nbsp;conservative&nbsp;assumption&nbsp;is&nbsp;fine&nbsp;since&nbsp;we&nbsp;will&nbsp;never&nbsp;transition&nbsp;past</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488500">//&nbsp;urlPartPreQuery.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488521">//&nbsp;In&nbsp;(3),&nbsp;our&nbsp;protocol&nbsp;heuristic&nbsp;should&nbsp;not&nbsp;be&nbsp;tripped,&nbsp;and&nbsp;there</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488589">//&nbsp;should&nbsp;not&nbsp;be&nbsp;non-space&nbsp;content&nbsp;after&nbsp;a&nbsp;&#39;?&#39;&nbsp;or&nbsp;&#39;#&#39;,&nbsp;so&nbsp;as&nbsp;long&nbsp;as</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488659">//&nbsp;we&nbsp;only&nbsp;%-encode&nbsp;RFC&nbsp;3986&nbsp;reserved&nbsp;characters&nbsp;we&nbsp;are&nbsp;ok.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488720">//&nbsp;In&nbsp;(4),&nbsp;we&nbsp;should&nbsp;URL&nbsp;escape&nbsp;for&nbsp;URL&nbsp;attributes,&nbsp;and&nbsp;for&nbsp;others&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488791">//&nbsp;have&nbsp;the&nbsp;attribute&nbsp;name&nbsp;available&nbsp;if&nbsp;our&nbsp;conservative&nbsp;assumption</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4488860">//&nbsp;proves&nbsp;problematic&nbsp;for&nbsp;real&nbsp;code.</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488899">k</span>&nbsp;<span class="op" id="4488901">:=</span>&nbsp;<span class="num" id="4488904">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4488907">for</span>&nbsp;<span class="op" id="4488911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488915">i</span>&nbsp;<span class="op" id="4488917">:=</span>&nbsp;<span class="ident" id="4488920"><a href="/html/template/transition.go.html#4488899">k</a></span>&nbsp;<span class="op" id="4488922">+</span>&nbsp;<span class="ident" id="4488924"><a href="/html/template/transition.go.html#4478432">bytes</a></span><span class="op" id="4488929">.</span><span class="ident" id="4488930">IndexAny</span><span class="op" id="4488938">(</span><span class="ident" id="4488939"><a href="/html/template/transition.go.html#4487575">s</a></span><span class="op" id="4488940">[</span><span class="ident" id="4488941"><a href="/html/template/transition.go.html#4488899">k</a></span><span class="op" id="4488942">:</span><span class="op" id="4488943">]</span><span class="op" id="4488944">,</span>&nbsp;<span class="string" id="4488946">`(&#34;&#39;/`</span><span class="op" id="4488952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4488956">if</span>&nbsp;<span class="ident" id="4488959"><a href="/html/template/transition.go.html#4488915">i</a></span>&nbsp;<span class="op" id="4488961">&lt;</span>&nbsp;<span class="ident" id="4488963"><a href="/html/template/transition.go.html#4488899">k</a></span>&nbsp;<span class="op" id="4488965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4488970">return</span>&nbsp;<span class="ident" id="4488977"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4488978">,</span>&nbsp;<span class="builtinfunc" id="4488980">len</span><span class="op" id="4488983">(</span><span class="ident" id="4488984"><a href="/html/template/transition.go.html#4487575">s</a></span><span class="op" id="4488985">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4488989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4488993">switch</span>&nbsp;<span class="ident" id="4489000"><a href="/html/template/transition.go.html#4487575">s</a></span><span class="op" id="4489001">[</span><span class="ident" id="4489002"><a href="/html/template/transition.go.html#4488915">i</a></span><span class="op" id="4489003">]</span>&nbsp;<span class="op" id="4489005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489009">case</span>&nbsp;<span class="string" id="4489014">&#39;(&#39;</span><span class="op" id="4489017">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4489022">//&nbsp;Look&nbsp;for&nbsp;url&nbsp;to&nbsp;the&nbsp;left.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489054">p</span>&nbsp;<span class="op" id="4489056">:=</span>&nbsp;<span class="ident" id="4489059"><a href="/html/template/transition.go.html#4478432">bytes</a></span><span class="op" id="4489064">.</span><span class="ident" id="4489065">TrimRight</span><span class="op" id="4489074">(</span><span class="ident" id="4489075"><a href="/html/template/transition.go.html#4487575">s</a></span><span class="op" id="4489076">[</span><span class="op" id="4489077">:</span><span class="ident" id="4489078"><a href="/html/template/transition.go.html#4488915">i</a></span><span class="op" id="4489079">]</span><span class="op" id="4489080">,</span>&nbsp;<span class="string" id="4489082">&#34;\t\n\f\r&nbsp;&#34;</span><span class="op" id="4489093">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489098">if</span>&nbsp;<span class="ident" id="4489101"><a href="/html/template/css.go.html#4402469">endsWithCSSKeyword</a></span><span class="op" id="4489119">(</span><span class="ident" id="4489120"><a href="/html/template/transition.go.html#4489054">p</a></span><span class="op" id="4489121">,</span>&nbsp;<span class="string" id="4489123">&#34;url&#34;</span><span class="op" id="4489128">)</span>&nbsp;<span class="op" id="4489130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489136">j</span>&nbsp;<span class="op" id="4489138">:=</span>&nbsp;<span class="builtinfunc" id="4489141">len</span><span class="op" id="4489144">(</span><span class="ident" id="4489145"><a href="/html/template/transition.go.html#4487575">s</a></span><span class="op" id="4489146">)</span>&nbsp;<span class="op" id="4489148">-</span>&nbsp;<span class="builtinfunc" id="4489150">len</span><span class="op" id="4489153">(</span><span class="ident" id="4489154"><a href="/html/template/transition.go.html#4478432">bytes</a></span><span class="op" id="4489159">.</span><span class="ident" id="4489160">TrimLeft</span><span class="op" id="4489168">(</span><span class="ident" id="4489169"><a href="/html/template/transition.go.html#4487575">s</a></span><span class="op" id="4489170">[</span><span class="ident" id="4489171"><a href="/html/template/transition.go.html#4488915">i</a></span><span class="op" id="4489172">+</span><span class="num" id="4489173">1</span><span class="op" id="4489174">:</span><span class="op" id="4489175">]</span><span class="op" id="4489176">,</span>&nbsp;<span class="string" id="4489178">&#34;\t\n\f\r&nbsp;&#34;</span><span class="op" id="4489189">)</span><span class="op" id="4489190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489196">switch</span>&nbsp;<span class="op" id="4489203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489209">case</span>&nbsp;<span class="ident" id="4489214"><a href="/html/template/transition.go.html#4489136">j</a></span>&nbsp;<span class="op" id="4489216">!=</span>&nbsp;<span class="builtinfunc" id="4489219">len</span><span class="op" id="4489222">(</span><span class="ident" id="4489223"><a href="/html/template/transition.go.html#4487575">s</a></span><span class="op" id="4489224">)</span>&nbsp;<span class="op" id="4489226">&amp;&amp;</span>&nbsp;<span class="ident" id="4489229"><a href="/html/template/transition.go.html#4487575">s</a></span><span class="op" id="4489230">[</span><span class="ident" id="4489231"><a href="/html/template/transition.go.html#4489136">j</a></span><span class="op" id="4489232">]</span>&nbsp;<span class="op" id="4489234">==</span>&nbsp;<span class="string" id="4489237">&#39;&#34;&#39;</span><span class="op" id="4489240">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489247"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4489248">.</span><span class="ident" id="4489249">state</span><span class="op" id="4489254">,</span>&nbsp;<span class="ident" id="4489256"><a href="/html/template/transition.go.html#4489136">j</a></span>&nbsp;<span class="op" id="4489258">=</span>&nbsp;<span class="ident" id="4489260"><a href="/html/template/context.go.html#4395964">stateCSSDqURL</a></span><span class="op" id="4489273">,</span>&nbsp;<span class="ident" id="4489275"><a href="/html/template/transition.go.html#4489136">j</a></span><span class="op" id="4489276">+</span><span class="num" id="4489277">1</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489283">case</span>&nbsp;<span class="ident" id="4489288"><a href="/html/template/transition.go.html#4489136">j</a></span>&nbsp;<span class="op" id="4489290">!=</span>&nbsp;<span class="builtinfunc" id="4489293">len</span><span class="op" id="4489296">(</span><span class="ident" id="4489297"><a href="/html/template/transition.go.html#4487575">s</a></span><span class="op" id="4489298">)</span>&nbsp;<span class="op" id="4489300">&amp;&amp;</span>&nbsp;<span class="ident" id="4489303"><a href="/html/template/transition.go.html#4487575">s</a></span><span class="op" id="4489304">[</span><span class="ident" id="4489305"><a href="/html/template/transition.go.html#4489136">j</a></span><span class="op" id="4489306">]</span>&nbsp;<span class="op" id="4489308">==</span>&nbsp;<span class="string" id="4489311">&#39;\&#39;&#39;</span><span class="op" id="4489315">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489322"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4489323">.</span><span class="ident" id="4489324">state</span><span class="op" id="4489329">,</span>&nbsp;<span class="ident" id="4489331"><a href="/html/template/transition.go.html#4489136">j</a></span>&nbsp;<span class="op" id="4489333">=</span>&nbsp;<span class="ident" id="4489335"><a href="/html/template/context.go.html#4396043">stateCSSSqURL</a></span><span class="op" id="4489348">,</span>&nbsp;<span class="ident" id="4489350"><a href="/html/template/transition.go.html#4489136">j</a></span><span class="op" id="4489351">+</span><span class="num" id="4489352">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489358">default</span><span class="op" id="4489365">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489372"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4489373">.</span><span class="ident" id="4489374">state</span>&nbsp;<span class="op" id="4489380">=</span>&nbsp;<span class="ident" id="4489382"><a href="/html/template/context.go.html#4396113">stateCSSURL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489398">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489404">return</span>&nbsp;<span class="ident" id="4489411"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4489412">,</span>&nbsp;<span class="ident" id="4489414"><a href="/html/template/transition.go.html#4489136">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489423">case</span>&nbsp;<span class="string" id="4489428">&#39;/&#39;</span><span class="op" id="4489431">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489436">if</span>&nbsp;<span class="ident" id="4489439"><a href="/html/template/transition.go.html#4488915">i</a></span><span class="op" id="4489440">+</span><span class="num" id="4489441">1</span>&nbsp;<span class="op" id="4489443">&lt;</span>&nbsp;<span class="builtinfunc" id="4489445">len</span><span class="op" id="4489448">(</span><span class="ident" id="4489449"><a href="/html/template/transition.go.html#4487575">s</a></span><span class="op" id="4489450">)</span>&nbsp;<span class="op" id="4489452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489458">switch</span>&nbsp;<span class="ident" id="4489465"><a href="/html/template/transition.go.html#4487575">s</a></span><span class="op" id="4489466">[</span><span class="ident" id="4489467"><a href="/html/template/transition.go.html#4488915">i</a></span><span class="op" id="4489468">+</span><span class="num" id="4489469">1</span><span class="op" id="4489470">]</span>&nbsp;<span class="op" id="4489472">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489478">case</span>&nbsp;<span class="string" id="4489483">&#39;/&#39;</span><span class="op" id="4489486">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489493"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4489494">.</span><span class="ident" id="4489495">state</span>&nbsp;<span class="op" id="4489501">=</span>&nbsp;<span class="ident" id="4489503"><a href="/html/template/context.go.html#4396263">stateCSSLineCmt</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489524">return</span>&nbsp;<span class="ident" id="4489531"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4489532">,</span>&nbsp;<span class="ident" id="4489534"><a href="/html/template/transition.go.html#4488915">i</a></span>&nbsp;<span class="op" id="4489536">+</span>&nbsp;<span class="num" id="4489538">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489544">case</span>&nbsp;<span class="string" id="4489549">&#39;*&#39;</span><span class="op" id="4489552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489559"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4489560">.</span><span class="ident" id="4489561">state</span>&nbsp;<span class="op" id="4489567">=</span>&nbsp;<span class="ident" id="4489569"><a href="/html/template/context.go.html#4396188">stateCSSBlockCmt</a></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489591">return</span>&nbsp;<span class="ident" id="4489598"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4489599">,</span>&nbsp;<span class="ident" id="4489601"><a href="/html/template/transition.go.html#4488915">i</a></span>&nbsp;<span class="op" id="4489603">+</span>&nbsp;<span class="num" id="4489605">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489620">case</span>&nbsp;<span class="string" id="4489625">&#39;&#34;&#39;</span><span class="op" id="4489628">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489633"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4489634">.</span><span class="ident" id="4489635">state</span>&nbsp;<span class="op" id="4489641">=</span>&nbsp;<span class="ident" id="4489643"><a href="/html/template/context.go.html#4395810">stateCSSDqStr</a></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489660">return</span>&nbsp;<span class="ident" id="4489667"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4489668">,</span>&nbsp;<span class="ident" id="4489670"><a href="/html/template/transition.go.html#4488915">i</a></span>&nbsp;<span class="op" id="4489672">+</span>&nbsp;<span class="num" id="4489674">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489678">case</span>&nbsp;<span class="string" id="4489683">&#39;\&#39;&#39;</span><span class="op" id="4489687">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489692"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4489693">.</span><span class="ident" id="4489694">state</span>&nbsp;<span class="op" id="4489700">=</span>&nbsp;<span class="ident" id="4489702"><a href="/html/template/context.go.html#4395885">stateCSSSqStr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489719">return</span>&nbsp;<span class="ident" id="4489726"><a href="/html/template/transition.go.html#4487564">c</a></span><span class="op" id="4489727">,</span>&nbsp;<span class="ident" id="4489729"><a href="/html/template/transition.go.html#4488915">i</a></span>&nbsp;<span class="op" id="4489731">+</span>&nbsp;<span class="num" id="4489733">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489737">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489741"><a href="/html/template/transition.go.html#4488899">k</a></span>&nbsp;<span class="op" id="4489743">=</span>&nbsp;<span class="ident" id="4489745"><a href="/html/template/transition.go.html#4488915">i</a></span>&nbsp;<span class="op" id="4489747">+</span>&nbsp;<span class="num" id="4489749">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489752">}</span><br>
<span class="lineno"></span><span class="op" id="4489754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4489757">//&nbsp;tCSSStr&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;CSS&nbsp;string&nbsp;and&nbsp;URL&nbsp;states.</span><br>
<span class="lineno">435</span><span class="keyword" id="4489838">func</span>&nbsp;<span class="ident" id="4489843">tCSSStr</span><span class="op" id="4489850">(</span><span class="ident" id="4489851">c</span>&nbsp;<span class="ident" id="4489853"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4489860">,</span>&nbsp;<span class="ident" id="4489862">s</span>&nbsp;<span class="op" id="4489864">[</span><span class="op" id="4489865">]</span><span class="builtintype" id="4489866">byte</span><span class="op" id="4489870">)</span>&nbsp;<span class="op" id="4489872">(</span><span class="ident" id="4489873"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4489880">,</span>&nbsp;<span class="builtintype" id="4489882">int</span><span class="op" id="4489885">)</span>&nbsp;<span class="op" id="4489887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489890">var</span>&nbsp;<span class="ident" id="4489894">endAndEsc</span>&nbsp;<span class="builtintype" id="4489904">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489912">switch</span>&nbsp;<span class="ident" id="4489919"><a href="/html/template/transition.go.html#4489851">c</a></span><span class="op" id="4489920">.</span><span class="ident" id="4489921">state</span>&nbsp;<span class="op" id="4489927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489930">case</span>&nbsp;<span class="ident" id="4489935"><a href="/html/template/context.go.html#4395810">stateCSSDqStr</a></span><span class="op" id="4489948">,</span>&nbsp;<span class="ident" id="4489950"><a href="/html/template/context.go.html#4395964">stateCSSDqURL</a></span><span class="op" id="4489963">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489967"><a href="/html/template/transition.go.html#4489894">endAndEsc</a></span>&nbsp;<span class="op" id="4489977">=</span>&nbsp;<span class="string" id="4489979">`\&#34;`</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489985">case</span>&nbsp;<span class="ident" id="4489990"><a href="/html/template/context.go.html#4395885">stateCSSSqStr</a></span><span class="op" id="4490003">,</span>&nbsp;<span class="ident" id="4490005"><a href="/html/template/context.go.html#4396043">stateCSSSqURL</a></span><span class="op" id="4490018">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490022"><a href="/html/template/transition.go.html#4489894">endAndEsc</a></span>&nbsp;<span class="op" id="4490032">=</span>&nbsp;<span class="string" id="4490034">`\&#39;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490040">case</span>&nbsp;<span class="ident" id="4490045"><a href="/html/template/context.go.html#4396113">stateCSSURL</a></span><span class="op" id="4490056">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4490060">//&nbsp;Unquoted&nbsp;URLs&nbsp;end&nbsp;with&nbsp;a&nbsp;newline&nbsp;or&nbsp;close&nbsp;parenthesis.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4490120">//&nbsp;The&nbsp;below&nbsp;includes&nbsp;the&nbsp;wc&nbsp;(whitespace&nbsp;character)&nbsp;and&nbsp;nl.</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490182"><a href="/html/template/transition.go.html#4489894">endAndEsc</a></span>&nbsp;<span class="op" id="4490192">=</span>&nbsp;<span class="string" id="4490194">&#34;\\\t\n\f\r&nbsp;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490210">default</span><span class="op" id="4490217">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4490221">panic</span><span class="op" id="4490226">(</span><span class="ident" id="4490227"><a href="/html/template/transition.go.html#4489851">c</a></span><span class="op" id="4490228">.</span><span class="ident" id="4490229">state</span><span class="op" id="4490234">.</span><span class="ident" id="4490235">String</span><span class="op" id="4490241">(</span><span class="op" id="4490242">)</span><span class="op" id="4490243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4490246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490250">k</span>&nbsp;<span class="op" id="4490252">:=</span>&nbsp;<span class="num" id="4490255">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490258">for</span>&nbsp;<span class="op" id="4490262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490266">i</span>&nbsp;<span class="op" id="4490268">:=</span>&nbsp;<span class="ident" id="4490271"><a href="/html/template/transition.go.html#4490250">k</a></span>&nbsp;<span class="op" id="4490273">+</span>&nbsp;<span class="ident" id="4490275"><a href="/html/template/transition.go.html#4478432">bytes</a></span><span class="op" id="4490280">.</span><span class="ident" id="4490281">IndexAny</span><span class="op" id="4490289">(</span><span class="ident" id="4490290"><a href="/html/template/transition.go.html#4489862">s</a></span><span class="op" id="4490291">[</span><span class="ident" id="4490292"><a href="/html/template/transition.go.html#4490250">k</a></span><span class="op" id="4490293">:</span><span class="op" id="4490294">]</span><span class="op" id="4490295">,</span>&nbsp;<span class="ident" id="4490297"><a href="/html/template/transition.go.html#4489894">endAndEsc</a></span><span class="op" id="4490306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490310">if</span>&nbsp;<span class="ident" id="4490313"><a href="/html/template/transition.go.html#4490266">i</a></span>&nbsp;<span class="op" id="4490315">&lt;</span>&nbsp;<span class="ident" id="4490317"><a href="/html/template/transition.go.html#4490250">k</a></span>&nbsp;<span class="op" id="4490319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490324">c</span><span class="op" id="4490325">,</span>&nbsp;<span class="ident" id="4490327">nread</span>&nbsp;<span class="op" id="4490333">:=</span>&nbsp;<span class="ident" id="4490336"><a href="/html/template/transition.go.html#4483612">tURL</a></span><span class="op" id="4490340">(</span><span class="ident" id="4490341"><a href="/html/template/transition.go.html#4489851">c</a></span><span class="op" id="4490342">,</span>&nbsp;<span class="ident" id="4490344"><a href="/html/template/css.go.html#4403775">decodeCSS</a></span><span class="op" id="4490353">(</span><span class="ident" id="4490354"><a href="/html/template/transition.go.html#4489862">s</a></span><span class="op" id="4490355">[</span><span class="ident" id="4490356"><a href="/html/template/transition.go.html#4490250">k</a></span><span class="op" id="4490357">:</span><span class="op" id="4490358">]</span><span class="op" id="4490359">)</span><span class="op" id="4490360">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490365">return</span>&nbsp;<span class="ident" id="4490372"><a href="/html/template/transition.go.html#4490324">c</a></span><span class="op" id="4490373">,</span>&nbsp;<span class="ident" id="4490375"><a href="/html/template/transition.go.html#4490250">k</a></span>&nbsp;<span class="op" id="4490377">+</span>&nbsp;<span class="ident" id="4490379"><a href="/html/template/transition.go.html#4490327">nread</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4490387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490391">if</span>&nbsp;<span class="ident" id="4490394"><a href="/html/template/transition.go.html#4489862">s</a></span><span class="op" id="4490395">[</span><span class="ident" id="4490396"><a href="/html/template/transition.go.html#4490266">i</a></span><span class="op" id="4490397">]</span>&nbsp;<span class="op" id="4490399">==</span>&nbsp;<span class="string" id="4490402">&#39;\\&#39;</span>&nbsp;<span class="op" id="4490407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490412"><a href="/html/template/transition.go.html#4490266">i</a></span><span class="op" id="4490413">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490419">if</span>&nbsp;<span class="ident" id="4490422"><a href="/html/template/transition.go.html#4490266">i</a></span>&nbsp;<span class="op" id="4490424">==</span>&nbsp;<span class="builtinfunc" id="4490427">len</span><span class="op" id="4490430">(</span><span class="ident" id="4490431"><a href="/html/template/transition.go.html#4489862">s</a></span><span class="op" id="4490432">)</span>&nbsp;<span class="op" id="4490434">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490440">return</span>&nbsp;<span class="ident" id="4490447"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4490454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490461">state</span><span class="op" id="4490466">:</span>&nbsp;<span class="ident" id="4490468"><a href="/html/template/context.go.html#4396369">stateError</a></span><span class="op" id="4490478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490485">err</span><span class="op" id="4490488">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4490492"><a href="/html/template/error.go.html#4422980">errorf</a></span><span class="op" id="4490498">(</span><span class="ident" id="4490499"><a href="/html/template/error.go.html#4421283">ErrPartialEscape</a></span><span class="op" id="4490515">,</span>&nbsp;<span class="ident" id="4490517">nil</span><span class="op" id="4490520">,</span>&nbsp;<span class="num" id="4490522">0</span><span class="op" id="4490523">,</span>&nbsp;<span class="string" id="4490525">&#34;unfinished&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;CSS&nbsp;string:&nbsp;%q&#34;</span><span class="op" id="4490571">,</span>&nbsp;<span class="ident" id="4490573"><a href="/html/template/transition.go.html#4489862">s</a></span><span class="op" id="4490574">)</span><span class="op" id="4490575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4490581">}</span><span class="op" id="4490582">,</span>&nbsp;<span class="builtinfunc" id="4490584">len</span><span class="op" id="4490587">(</span><span class="ident" id="4490588"><a href="/html/template/transition.go.html#4489862">s</a></span><span class="op" id="4490589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4490594">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4490598">}</span>&nbsp;<span class="keyword" id="4490600">else</span>&nbsp;<span class="op" id="4490605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490610"><a href="/html/template/transition.go.html#4489851">c</a></span><span class="op" id="4490611">.</span><span class="ident" id="4490612">state</span>&nbsp;<span class="op" id="4490618">=</span>&nbsp;<span class="ident" id="4490620"><a href="/html/template/context.go.html#4395740">stateCSS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490632">return</span>&nbsp;<span class="ident" id="4490639"><a href="/html/template/transition.go.html#4489851">c</a></span><span class="op" id="4490640">,</span>&nbsp;<span class="ident" id="4490642"><a href="/html/template/transition.go.html#4490266">i</a></span>&nbsp;<span class="op" id="4490644">+</span>&nbsp;<span class="num" id="4490646">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4490650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490654"><a href="/html/template/transition.go.html#4489851">c</a></span><span class="op" id="4490655">,</span>&nbsp;<span class="ident" id="4490657">_</span>&nbsp;<span class="op" id="4490659">=</span>&nbsp;<span class="ident" id="4490661"><a href="/html/template/transition.go.html#4483612">tURL</a></span><span class="op" id="4490665">(</span><span class="ident" id="4490666"><a href="/html/template/transition.go.html#4489851">c</a></span><span class="op" id="4490667">,</span>&nbsp;<span class="ident" id="4490669"><a href="/html/template/css.go.html#4403775">decodeCSS</a></span><span class="op" id="4490678">(</span><span class="ident" id="4490679"><a href="/html/template/transition.go.html#4489862">s</a></span><span class="op" id="4490680">[</span><span class="op" id="4490681">:</span><span class="ident" id="4490682"><a href="/html/template/transition.go.html#4490266">i</a></span><span class="op" id="4490683">+</span><span class="num" id="4490684">1</span><span class="op" id="4490685">]</span><span class="op" id="4490686">)</span><span class="op" id="4490687">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490691"><a href="/html/template/transition.go.html#4490250">k</a></span>&nbsp;<span class="op" id="4490693">=</span>&nbsp;<span class="ident" id="4490695"><a href="/html/template/transition.go.html#4490266">i</a></span>&nbsp;<span class="op" id="4490697">+</span>&nbsp;<span class="num" id="4490699">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4490702">}</span><br>
<span class="lineno"></span><span class="op" id="4490704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4490707">//&nbsp;tError&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;error&nbsp;state.</span><br>
<span class="lineno">475</span><span class="keyword" id="4490773">func</span>&nbsp;<span class="ident" id="4490778">tError</span><span class="op" id="4490784">(</span><span class="ident" id="4490785">c</span>&nbsp;<span class="ident" id="4490787"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4490794">,</span>&nbsp;<span class="ident" id="4490796">s</span>&nbsp;<span class="op" id="4490798">[</span><span class="op" id="4490799">]</span><span class="builtintype" id="4490800">byte</span><span class="op" id="4490804">)</span>&nbsp;<span class="op" id="4490806">(</span><span class="ident" id="4490807"><a href="/html/template/context.go.html#4392413">context</a></span><span class="op" id="4490814">,</span>&nbsp;<span class="builtintype" id="4490816">int</span><span class="op" id="4490819">)</span>&nbsp;<span class="op" id="4490821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490824">return</span>&nbsp;<span class="ident" id="4490831"><a href="/html/template/transition.go.html#4490785">c</a></span><span class="op" id="4490832">,</span>&nbsp;<span class="builtinfunc" id="4490834">len</span><span class="op" id="4490837">(</span><span class="ident" id="4490838"><a href="/html/template/transition.go.html#4490796">s</a></span><span class="op" id="4490839">)</span><br>
<span class="lineno"></span><span class="op" id="4490841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4490844">//&nbsp;eatAttrName&nbsp;returns&nbsp;the&nbsp;largest&nbsp;j&nbsp;such&nbsp;that&nbsp;s[i:j]&nbsp;is&nbsp;an&nbsp;attribute&nbsp;name.</span><br>
<span class="lineno">480</span><span class="comment" id="4490920">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;s[i:]&nbsp;does&nbsp;not&nbsp;look&nbsp;like&nbsp;it&nbsp;begins&nbsp;with&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="4490989">//&nbsp;attribute&nbsp;name,&nbsp;such&nbsp;as&nbsp;encountering&nbsp;a&nbsp;quote&nbsp;mark&nbsp;without&nbsp;a&nbsp;preceding</span><br>
<span class="lineno"></span><span class="comment" id="4491062">//&nbsp;equals&nbsp;sign.</span><br>
<span class="lineno"></span><span class="keyword" id="4491078">func</span>&nbsp;<span class="ident" id="4491083">eatAttrName</span><span class="op" id="4491094">(</span><span class="ident" id="4491095">s</span>&nbsp;<span class="op" id="4491097">[</span><span class="op" id="4491098">]</span><span class="builtintype" id="4491099">byte</span><span class="op" id="4491103">,</span>&nbsp;<span class="ident" id="4491105">i</span>&nbsp;<span class="builtintype" id="4491107">int</span><span class="op" id="4491110">)</span>&nbsp;<span class="op" id="4491112">(</span><span class="builtintype" id="4491113">int</span><span class="op" id="4491116">,</span>&nbsp;<span class="op" id="4491118">*</span><span class="ident" id="4491119"><a href="/html/template/error.go.html#4415791">Error</a></span><span class="op" id="4491124">)</span>&nbsp;<span class="op" id="4491126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491129">for</span>&nbsp;<span class="ident" id="4491133">j</span>&nbsp;<span class="op" id="4491135">:=</span>&nbsp;<span class="ident" id="4491138"><a href="/html/template/transition.go.html#4491105">i</a></span><span class="op" id="4491139">;</span>&nbsp;<span class="ident" id="4491141"><a href="/html/template/transition.go.html#4491133">j</a></span>&nbsp;<span class="op" id="4491143">&lt;</span>&nbsp;<span class="builtinfunc" id="4491145">len</span><span class="op" id="4491148">(</span><span class="ident" id="4491149"><a href="/html/template/transition.go.html#4491095">s</a></span><span class="op" id="4491150">)</span><span class="op" id="4491151">;</span>&nbsp;<span class="ident" id="4491153"><a href="/html/template/transition.go.html#4491133">j</a></span><span class="op" id="4491154">++</span>&nbsp;<span class="op" id="4491157">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491161">switch</span>&nbsp;<span class="ident" id="4491168"><a href="/html/template/transition.go.html#4491095">s</a></span><span class="op" id="4491169">[</span><span class="ident" id="4491170"><a href="/html/template/transition.go.html#4491133">j</a></span><span class="op" id="4491171">]</span>&nbsp;<span class="op" id="4491173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491177">case</span>&nbsp;<span class="string" id="4491182">&#39;&nbsp;&#39;</span><span class="op" id="4491185">,</span>&nbsp;<span class="string" id="4491187">&#39;\t&#39;</span><span class="op" id="4491191">,</span>&nbsp;<span class="string" id="4491193">&#39;\n&#39;</span><span class="op" id="4491197">,</span>&nbsp;<span class="string" id="4491199">&#39;\f&#39;</span><span class="op" id="4491203">,</span>&nbsp;<span class="string" id="4491205">&#39;\r&#39;</span><span class="op" id="4491209">,</span>&nbsp;<span class="string" id="4491211">&#39;=&#39;</span><span class="op" id="4491214">,</span>&nbsp;<span class="string" id="4491216">&#39;&gt;&#39;</span><span class="op" id="4491219">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491224">return</span>&nbsp;<span class="ident" id="4491231"><a href="/html/template/transition.go.html#4491133">j</a></span><span class="op" id="4491232">,</span>&nbsp;<span class="ident" id="4491234">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491240">case</span>&nbsp;<span class="string" id="4491245">&#39;\&#39;&#39;</span><span class="op" id="4491249">,</span>&nbsp;<span class="string" id="4491251">&#39;&#34;&#39;</span><span class="op" id="4491254">,</span>&nbsp;<span class="string" id="4491256">&#39;&lt;&#39;</span><span class="op" id="4491259">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4491264">//&nbsp;These&nbsp;result&nbsp;in&nbsp;a&nbsp;parse&nbsp;warning&nbsp;in&nbsp;HTML5&nbsp;and&nbsp;are</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4491319">//&nbsp;indicative&nbsp;of&nbsp;serious&nbsp;problems&nbsp;if&nbsp;seen&nbsp;in&nbsp;an&nbsp;attr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4491375">//&nbsp;name&nbsp;in&nbsp;a&nbsp;template.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491401">return</span>&nbsp;<span class="op" id="4491408">-</span><span class="num" id="4491409">1</span><span class="op" id="4491410">,</span>&nbsp;<span class="ident" id="4491412"><a href="/html/template/error.go.html#4422980">errorf</a></span><span class="op" id="4491418">(</span><span class="ident" id="4491419"><a href="/html/template/error.go.html#4417919">ErrBadHTML</a></span><span class="op" id="4491429">,</span>&nbsp;<span class="ident" id="4491431">nil</span><span class="op" id="4491434">,</span>&nbsp;<span class="num" id="4491436">0</span><span class="op" id="4491437">,</span>&nbsp;<span class="string" id="4491439">&#34;%q&nbsp;in&nbsp;attribute&nbsp;name:&nbsp;%.32q&#34;</span><span class="op" id="4491468">,</span>&nbsp;<span class="ident" id="4491470"><a href="/html/template/transition.go.html#4491095">s</a></span><span class="op" id="4491471">[</span><span class="ident" id="4491472"><a href="/html/template/transition.go.html#4491133">j</a></span><span class="op" id="4491473">:</span><span class="ident" id="4491474"><a href="/html/template/transition.go.html#4491133">j</a></span><span class="op" id="4491475">+</span><span class="num" id="4491476">1</span><span class="op" id="4491477">]</span><span class="op" id="4491478">,</span>&nbsp;<span class="ident" id="4491480"><a href="/html/template/transition.go.html#4491095">s</a></span><span class="op" id="4491481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491485">default</span><span class="op" id="4491492">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4491497">//&nbsp;No-op.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4491509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4491512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491515">return</span>&nbsp;<span class="builtinfunc" id="4491522">len</span><span class="op" id="4491525">(</span><span class="ident" id="4491526"><a href="/html/template/transition.go.html#4491095">s</a></span><span class="op" id="4491527">)</span><span class="op" id="4491528">,</span>&nbsp;<span class="ident" id="4491530">nil</span><br>
<span class="lineno"></span><span class="op" id="4491534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span><span class="keyword" id="4491537">var</span>&nbsp;<span class="ident" id="4491541">elementNameMap</span>&nbsp;<span class="op" id="4491556">=</span>&nbsp;<span class="keyword" id="4491558">map</span><span class="op" id="4491561">[</span><span class="builtintype" id="4491562">string</span><span class="op" id="4491568">]</span><span class="ident" id="4491569"><a href="/html/template/context.go.html#4400644">element</a></span><span class="op" id="4491576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4491579">&#34;script&#34;</span><span class="op" id="4491587">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4491591"><a href="/html/template/context.go.html#4400830">elementScript</a></span><span class="op" id="4491604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4491607">&#34;style&#34;</span><span class="op" id="4491614">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4491619"><a href="/html/template/context.go.html#4400907">elementStyle</a></span><span class="op" id="4491631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4491634">&#34;textarea&#34;</span><span class="op" id="4491644">:</span>&nbsp;<span class="ident" id="4491646"><a href="/html/template/context.go.html#4400987">elementTextarea</a></span><span class="op" id="4491661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4491664">&#34;title&#34;</span><span class="op" id="4491671">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4491676"><a href="/html/template/context.go.html#4401064">elementTitle</a></span><span class="op" id="4491688">,</span><br>
<span class="lineno">505</span><span class="op" id="4491690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4491693">//&nbsp;asciiAlpha&nbsp;reports&nbsp;whether&nbsp;c&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter.</span><br>
<span class="lineno"></span><span class="keyword" id="4491745">func</span>&nbsp;<span class="ident" id="4491750">asciiAlpha</span><span class="op" id="4491760">(</span><span class="ident" id="4491761">c</span>&nbsp;<span class="builtintype" id="4491763">byte</span><span class="op" id="4491767">)</span>&nbsp;<span class="builtintype" id="4491769">bool</span>&nbsp;<span class="op" id="4491774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491777">return</span>&nbsp;<span class="string" id="4491784">&#39;A&#39;</span>&nbsp;<span class="op" id="4491788">&lt;=</span>&nbsp;<span class="ident" id="4491791"><a href="/html/template/transition.go.html#4491761">c</a></span>&nbsp;<span class="op" id="4491793">&amp;&amp;</span>&nbsp;<span class="ident" id="4491796"><a href="/html/template/transition.go.html#4491761">c</a></span>&nbsp;<span class="op" id="4491798">&lt;=</span>&nbsp;<span class="string" id="4491801">&#39;Z&#39;</span>&nbsp;<span class="op" id="4491805">||</span>&nbsp;<span class="string" id="4491808">&#39;a&#39;</span>&nbsp;<span class="op" id="4491812">&lt;=</span>&nbsp;<span class="ident" id="4491815"><a href="/html/template/transition.go.html#4491761">c</a></span>&nbsp;<span class="op" id="4491817">&amp;&amp;</span>&nbsp;<span class="ident" id="4491820"><a href="/html/template/transition.go.html#4491761">c</a></span>&nbsp;<span class="op" id="4491822">&lt;=</span>&nbsp;<span class="string" id="4491825">&#39;z&#39;</span><br>
<span class="lineno">510</span><span class="op" id="4491829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4491832">//&nbsp;asciiAlphaNum&nbsp;reports&nbsp;whether&nbsp;c&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter&nbsp;or&nbsp;digit.</span><br>
<span class="lineno"></span><span class="keyword" id="4491896">func</span>&nbsp;<span class="ident" id="4491901">asciiAlphaNum</span><span class="op" id="4491914">(</span><span class="ident" id="4491915">c</span>&nbsp;<span class="builtintype" id="4491917">byte</span><span class="op" id="4491921">)</span>&nbsp;<span class="builtintype" id="4491923">bool</span>&nbsp;<span class="op" id="4491928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491931">return</span>&nbsp;<span class="ident" id="4491938"><a href="/html/template/transition.go.html#4491750">asciiAlpha</a></span><span class="op" id="4491948">(</span><span class="ident" id="4491949"><a href="/html/template/transition.go.html#4491915">c</a></span><span class="op" id="4491950">)</span>&nbsp;<span class="op" id="4491952">||</span>&nbsp;<span class="string" id="4491955">&#39;0&#39;</span>&nbsp;<span class="op" id="4491959">&lt;=</span>&nbsp;<span class="ident" id="4491962"><a href="/html/template/transition.go.html#4491915">c</a></span>&nbsp;<span class="op" id="4491964">&amp;&amp;</span>&nbsp;<span class="ident" id="4491967"><a href="/html/template/transition.go.html#4491915">c</a></span>&nbsp;<span class="op" id="4491969">&lt;=</span>&nbsp;<span class="string" id="4491972">&#39;9&#39;</span><br>
<span class="lineno">515</span><span class="op" id="4491976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4491979">//&nbsp;eatTagName&nbsp;returns&nbsp;the&nbsp;largest&nbsp;j&nbsp;such&nbsp;that&nbsp;s[i:j]&nbsp;is&nbsp;a&nbsp;tag&nbsp;name&nbsp;and&nbsp;the&nbsp;tag&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="4492064">func</span>&nbsp;<span class="ident" id="4492069">eatTagName</span><span class="op" id="4492079">(</span><span class="ident" id="4492080">s</span>&nbsp;<span class="op" id="4492082">[</span><span class="op" id="4492083">]</span><span class="builtintype" id="4492084">byte</span><span class="op" id="4492088">,</span>&nbsp;<span class="ident" id="4492090">i</span>&nbsp;<span class="builtintype" id="4492092">int</span><span class="op" id="4492095">)</span>&nbsp;<span class="op" id="4492097">(</span><span class="builtintype" id="4492098">int</span><span class="op" id="4492101">,</span>&nbsp;<span class="ident" id="4492103"><a href="/html/template/context.go.html#4400644">element</a></span><span class="op" id="4492110">)</span>&nbsp;<span class="op" id="4492112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492115">if</span>&nbsp;<span class="ident" id="4492118"><a href="/html/template/transition.go.html#4492090">i</a></span>&nbsp;<span class="op" id="4492120">==</span>&nbsp;<span class="builtinfunc" id="4492123">len</span><span class="op" id="4492126">(</span><span class="ident" id="4492127"><a href="/html/template/transition.go.html#4492080">s</a></span><span class="op" id="4492128">)</span>&nbsp;<span class="op" id="4492130">||</span>&nbsp;<span class="op" id="4492133">!</span><span class="ident" id="4492134"><a href="/html/template/transition.go.html#4491750">asciiAlpha</a></span><span class="op" id="4492144">(</span><span class="ident" id="4492145"><a href="/html/template/transition.go.html#4492080">s</a></span><span class="op" id="4492146">[</span><span class="ident" id="4492147"><a href="/html/template/transition.go.html#4492090">i</a></span><span class="op" id="4492148">]</span><span class="op" id="4492149">)</span>&nbsp;<span class="op" id="4492151">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492155">return</span>&nbsp;<span class="ident" id="4492162"><a href="/html/template/transition.go.html#4492090">i</a></span><span class="op" id="4492163">,</span>&nbsp;<span class="ident" id="4492165"><a href="/html/template/context.go.html#4400738">elementNone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4492178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492181">j</span>&nbsp;<span class="op" id="4492183">:=</span>&nbsp;<span class="ident" id="4492186"><a href="/html/template/transition.go.html#4492090">i</a></span>&nbsp;<span class="op" id="4492188">+</span>&nbsp;<span class="num" id="4492190">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492193">for</span>&nbsp;<span class="ident" id="4492197"><a href="/html/template/transition.go.html#4492181">j</a></span>&nbsp;<span class="op" id="4492199">&lt;</span>&nbsp;<span class="builtinfunc" id="4492201">len</span><span class="op" id="4492204">(</span><span class="ident" id="4492205"><a href="/html/template/transition.go.html#4492080">s</a></span><span class="op" id="4492206">)</span>&nbsp;<span class="op" id="4492208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492212">x</span>&nbsp;<span class="op" id="4492214">:=</span>&nbsp;<span class="ident" id="4492217"><a href="/html/template/transition.go.html#4492080">s</a></span><span class="op" id="4492218">[</span><span class="ident" id="4492219"><a href="/html/template/transition.go.html#4492181">j</a></span><span class="op" id="4492220">]</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492224">if</span>&nbsp;<span class="ident" id="4492227"><a href="/html/template/transition.go.html#4491901">asciiAlphaNum</a></span><span class="op" id="4492240">(</span><span class="ident" id="4492241"><a href="/html/template/transition.go.html#4492212">x</a></span><span class="op" id="4492242">)</span>&nbsp;<span class="op" id="4492244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492249"><a href="/html/template/transition.go.html#4492181">j</a></span><span class="op" id="4492250">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492256">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4492267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4492271">//&nbsp;Allow&nbsp;&#34;x-y&#34;&nbsp;or&nbsp;&#34;x:y&#34;&nbsp;but&nbsp;not&nbsp;&#34;x-&#34;,&nbsp;&#34;-y&#34;,&nbsp;or&nbsp;&#34;x--y&#34;.</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492328">if</span>&nbsp;<span class="op" id="4492331">(</span><span class="ident" id="4492332"><a href="/html/template/transition.go.html#4492212">x</a></span>&nbsp;<span class="op" id="4492334">==</span>&nbsp;<span class="string" id="4492337">&#39;:&#39;</span>&nbsp;<span class="op" id="4492341">||</span>&nbsp;<span class="ident" id="4492344"><a href="/html/template/transition.go.html#4492212">x</a></span>&nbsp;<span class="op" id="4492346">==</span>&nbsp;<span class="string" id="4492349">&#39;-&#39;</span><span class="op" id="4492352">)</span>&nbsp;<span class="op" id="4492354">&amp;&amp;</span>&nbsp;<span class="ident" id="4492357"><a href="/html/template/transition.go.html#4492181">j</a></span><span class="op" id="4492358">+</span><span class="num" id="4492359">1</span>&nbsp;<span class="op" id="4492361">&lt;</span>&nbsp;<span class="builtinfunc" id="4492363">len</span><span class="op" id="4492366">(</span><span class="ident" id="4492367"><a href="/html/template/transition.go.html#4492080">s</a></span><span class="op" id="4492368">)</span>&nbsp;<span class="op" id="4492370">&amp;&amp;</span>&nbsp;<span class="ident" id="4492373"><a href="/html/template/transition.go.html#4491901">asciiAlphaNum</a></span><span class="op" id="4492386">(</span><span class="ident" id="4492387"><a href="/html/template/transition.go.html#4492080">s</a></span><span class="op" id="4492388">[</span><span class="ident" id="4492389"><a href="/html/template/transition.go.html#4492181">j</a></span><span class="op" id="4492390">+</span><span class="num" id="4492391">1</span><span class="op" id="4492392">]</span><span class="op" id="4492393">)</span>&nbsp;<span class="op" id="4492395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492400"><a href="/html/template/transition.go.html#4492181">j</a></span>&nbsp;<span class="op" id="4492402">+=</span>&nbsp;<span class="num" id="4492405">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492410">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4492421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492425">break</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4492432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492435">return</span>&nbsp;<span class="ident" id="4492442"><a href="/html/template/transition.go.html#4492181">j</a></span><span class="op" id="4492443">,</span>&nbsp;<span class="ident" id="4492445"><a href="/html/template/transition.go.html#4491541">elementNameMap</a></span><span class="op" id="4492459">[</span><span class="ident" id="4492460"><a href="/html/template/transition.go.html#4478441">strings</a></span><span class="op" id="4492467">.</span><span class="ident" id="4492468">ToLower</span><span class="op" id="4492475">(</span><span class="builtintype" id="4492476">string</span><span class="op" id="4492482">(</span><span class="ident" id="4492483"><a href="/html/template/transition.go.html#4492080">s</a></span><span class="op" id="4492484">[</span><span class="ident" id="4492485"><a href="/html/template/transition.go.html#4492090">i</a></span><span class="op" id="4492486">:</span><span class="ident" id="4492487"><a href="/html/template/transition.go.html#4492181">j</a></span><span class="op" id="4492488">]</span><span class="op" id="4492489">)</span><span class="op" id="4492490">)</span><span class="op" id="4492491">]</span><br>
<span class="lineno"></span><span class="op" id="4492493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4492496">//&nbsp;eatWhiteSpace&nbsp;returns&nbsp;the&nbsp;largest&nbsp;j&nbsp;such&nbsp;that&nbsp;s[i:j]&nbsp;is&nbsp;white&nbsp;space.</span><br>
<span class="lineno">540</span><span class="keyword" id="4492568">func</span>&nbsp;<span class="ident" id="4492573">eatWhiteSpace</span><span class="op" id="4492586">(</span><span class="ident" id="4492587">s</span>&nbsp;<span class="op" id="4492589">[</span><span class="op" id="4492590">]</span><span class="builtintype" id="4492591">byte</span><span class="op" id="4492595">,</span>&nbsp;<span class="ident" id="4492597">i</span>&nbsp;<span class="builtintype" id="4492599">int</span><span class="op" id="4492602">)</span>&nbsp;<span class="builtintype" id="4492604">int</span>&nbsp;<span class="op" id="4492608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492611">for</span>&nbsp;<span class="ident" id="4492615">j</span>&nbsp;<span class="op" id="4492617">:=</span>&nbsp;<span class="ident" id="4492620"><a href="/html/template/transition.go.html#4492597">i</a></span><span class="op" id="4492621">;</span>&nbsp;<span class="ident" id="4492623"><a href="/html/template/transition.go.html#4492615">j</a></span>&nbsp;<span class="op" id="4492625">&lt;</span>&nbsp;<span class="builtinfunc" id="4492627">len</span><span class="op" id="4492630">(</span><span class="ident" id="4492631"><a href="/html/template/transition.go.html#4492587">s</a></span><span class="op" id="4492632">)</span><span class="op" id="4492633">;</span>&nbsp;<span class="ident" id="4492635"><a href="/html/template/transition.go.html#4492615">j</a></span><span class="op" id="4492636">++</span>&nbsp;<span class="op" id="4492639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492643">switch</span>&nbsp;<span class="ident" id="4492650"><a href="/html/template/transition.go.html#4492587">s</a></span><span class="op" id="4492651">[</span><span class="ident" id="4492652"><a href="/html/template/transition.go.html#4492615">j</a></span><span class="op" id="4492653">]</span>&nbsp;<span class="op" id="4492655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492659">case</span>&nbsp;<span class="string" id="4492664">&#39;&nbsp;&#39;</span><span class="op" id="4492667">,</span>&nbsp;<span class="string" id="4492669">&#39;\t&#39;</span><span class="op" id="4492673">,</span>&nbsp;<span class="string" id="4492675">&#39;\n&#39;</span><span class="op" id="4492679">,</span>&nbsp;<span class="string" id="4492681">&#39;\f&#39;</span><span class="op" id="4492685">,</span>&nbsp;<span class="string" id="4492687">&#39;\r&#39;</span><span class="op" id="4492691">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4492696">//&nbsp;No-op.</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492708">default</span><span class="op" id="4492715">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492720">return</span>&nbsp;<span class="ident" id="4492727"><a href="/html/template/transition.go.html#4492615">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4492731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4492734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492737">return</span>&nbsp;<span class="builtinfunc" id="4492744">len</span><span class="op" id="4492747">(</span><span class="ident" id="4492748"><a href="/html/template/transition.go.html#4492587">s</a></span><span class="op" id="4492749">)</span><br>
<span class="lineno">550</span><span class="op" id="4492751">}</span>
</div>
</body>
</html>
