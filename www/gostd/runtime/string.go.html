<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1687982">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1688037">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1688091">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1688142">package</span>&nbsp;<span class="ident" id="1688150">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1688159">import</span>&nbsp;<span class="op" id="1688166">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1688169">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1688178">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1688181">func</span>&nbsp;<span class="ident" id="1688186">concatstrings</span><span class="op" id="1688199">(</span><span class="ident" id="1688200">a</span>&nbsp;<span class="op" id="1688202">[</span><span class="op" id="1688203">]</span><span class="builtintype" id="1688204">string</span><span class="op" id="1688210">)</span>&nbsp;<span class="builtintype" id="1688212">string</span>&nbsp;<span class="op" id="1688219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1688222">idx</span>&nbsp;<span class="op" id="1688226">:=</span>&nbsp;<span class="num" id="1688229">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1688232">l</span>&nbsp;<span class="op" id="1688234">:=</span>&nbsp;<span class="num" id="1688237">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1688240">count</span>&nbsp;<span class="op" id="1688246">:=</span>&nbsp;<span class="num" id="1688249">0</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688252">for</span>&nbsp;<span class="ident" id="1688256">i</span><span class="op" id="1688257">,</span>&nbsp;<span class="ident" id="1688259">x</span>&nbsp;<span class="op" id="1688261">:=</span>&nbsp;<span class="keyword" id="1688264">range</span>&nbsp;<span class="ident" id="1688270">a</span>&nbsp;<span class="op" id="1688272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1688276">n</span>&nbsp;<span class="op" id="1688278">:=</span>&nbsp;<span class="builtinfunc" id="1688281">len</span><span class="op" id="1688284">(</span><span class="ident" id="1688285">x</span><span class="op" id="1688286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688290">if</span>&nbsp;<span class="ident" id="1688293">n</span>&nbsp;<span class="op" id="1688295">==</span>&nbsp;<span class="num" id="1688298">0</span>&nbsp;<span class="op" id="1688300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688305">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1688316">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688320">if</span>&nbsp;<span class="ident" id="1688323">l</span><span class="op" id="1688324">+</span><span class="ident" id="1688325">n</span>&nbsp;<span class="op" id="1688327">&lt;</span>&nbsp;<span class="ident" id="1688329">l</span>&nbsp;<span class="op" id="1688331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1688336">gothrow</span><span class="op" id="1688343">(</span><span class="string" id="1688344">&#34;string&nbsp;concatenation&nbsp;too&nbsp;long&#34;</span><span class="op" id="1688375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1688379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1688383">l</span>&nbsp;<span class="op" id="1688385">+=</span>&nbsp;<span class="ident" id="1688388">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1688392">count</span><span class="op" id="1688397">++</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1688402">idx</span>&nbsp;<span class="op" id="1688406">=</span>&nbsp;<span class="ident" id="1688408">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1688411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688414">if</span>&nbsp;<span class="ident" id="1688417">count</span>&nbsp;<span class="op" id="1688423">==</span>&nbsp;<span class="num" id="1688426">0</span>&nbsp;<span class="op" id="1688428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688432">return</span>&nbsp;<span class="string" id="1688439">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1688443">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688446">if</span>&nbsp;<span class="ident" id="1688449">count</span>&nbsp;<span class="op" id="1688455">==</span>&nbsp;<span class="num" id="1688458">1</span>&nbsp;<span class="op" id="1688460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688464">return</span>&nbsp;<span class="ident" id="1688471">a</span><span class="op" id="1688472">[</span><span class="ident" id="1688473">idx</span><span class="op" id="1688476">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1688479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1688482">s</span><span class="op" id="1688483">,</span>&nbsp;<span class="ident" id="1688485">b</span>&nbsp;<span class="op" id="1688487">:=</span>&nbsp;<span class="ident" id="1688490">rawstring</span><span class="op" id="1688499">(</span><span class="ident" id="1688500">l</span><span class="op" id="1688501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1688504">l</span>&nbsp;<span class="op" id="1688506">=</span>&nbsp;<span class="num" id="1688508">0</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688511">for</span>&nbsp;<span class="ident" id="1688515">_</span><span class="op" id="1688516">,</span>&nbsp;<span class="ident" id="1688518">x</span>&nbsp;<span class="op" id="1688520">:=</span>&nbsp;<span class="keyword" id="1688523">range</span>&nbsp;<span class="ident" id="1688529">a</span>&nbsp;<span class="op" id="1688531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1688535">copy</span><span class="op" id="1688539">(</span><span class="ident" id="1688540">b</span><span class="op" id="1688541">[</span><span class="ident" id="1688542">l</span><span class="op" id="1688543">:</span><span class="op" id="1688544">]</span><span class="op" id="1688545">,</span>&nbsp;<span class="ident" id="1688547">x</span><span class="op" id="1688548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1688552">l</span>&nbsp;<span class="op" id="1688554">+=</span>&nbsp;<span class="builtinfunc" id="1688557">len</span><span class="op" id="1688560">(</span><span class="ident" id="1688561">x</span><span class="op" id="1688562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1688565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688568">return</span>&nbsp;<span class="ident" id="1688575">s</span><br>
<span class="lineno">40</span><span class="op" id="1688577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1688580">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1688593">func</span>&nbsp;<span class="ident" id="1688598">concatstring2</span><span class="op" id="1688611">(</span><span class="ident" id="1688612">a</span>&nbsp;<span class="op" id="1688614">[</span><span class="num" id="1688615">2</span><span class="op" id="1688616">]</span><span class="builtintype" id="1688617">string</span><span class="op" id="1688623">)</span>&nbsp;<span class="builtintype" id="1688625">string</span>&nbsp;<span class="op" id="1688632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688635">return</span>&nbsp;<span class="ident" id="1688642">concatstrings</span><span class="op" id="1688655">(</span><span class="ident" id="1688656">a</span><span class="op" id="1688657">[</span><span class="op" id="1688658">:</span><span class="op" id="1688659">]</span><span class="op" id="1688660">)</span><br>
<span class="lineno">45</span><span class="op" id="1688662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1688665">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1688678">func</span>&nbsp;<span class="ident" id="1688683">concatstring3</span><span class="op" id="1688696">(</span><span class="ident" id="1688697">a</span>&nbsp;<span class="op" id="1688699">[</span><span class="num" id="1688700">3</span><span class="op" id="1688701">]</span><span class="builtintype" id="1688702">string</span><span class="op" id="1688708">)</span>&nbsp;<span class="builtintype" id="1688710">string</span>&nbsp;<span class="op" id="1688717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688720">return</span>&nbsp;<span class="ident" id="1688727">concatstrings</span><span class="op" id="1688740">(</span><span class="ident" id="1688741">a</span><span class="op" id="1688742">[</span><span class="op" id="1688743">:</span><span class="op" id="1688744">]</span><span class="op" id="1688745">)</span><br>
<span class="lineno">50</span><span class="op" id="1688747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1688750">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1688763">func</span>&nbsp;<span class="ident" id="1688768">concatstring4</span><span class="op" id="1688781">(</span><span class="ident" id="1688782">a</span>&nbsp;<span class="op" id="1688784">[</span><span class="num" id="1688785">4</span><span class="op" id="1688786">]</span><span class="builtintype" id="1688787">string</span><span class="op" id="1688793">)</span>&nbsp;<span class="builtintype" id="1688795">string</span>&nbsp;<span class="op" id="1688802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688805">return</span>&nbsp;<span class="ident" id="1688812">concatstrings</span><span class="op" id="1688825">(</span><span class="ident" id="1688826">a</span><span class="op" id="1688827">[</span><span class="op" id="1688828">:</span><span class="op" id="1688829">]</span><span class="op" id="1688830">)</span><br>
<span class="lineno">55</span><span class="op" id="1688832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1688835">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1688848">func</span>&nbsp;<span class="ident" id="1688853">concatstring5</span><span class="op" id="1688866">(</span><span class="ident" id="1688867">a</span>&nbsp;<span class="op" id="1688869">[</span><span class="num" id="1688870">5</span><span class="op" id="1688871">]</span><span class="builtintype" id="1688872">string</span><span class="op" id="1688878">)</span>&nbsp;<span class="builtintype" id="1688880">string</span>&nbsp;<span class="op" id="1688887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688890">return</span>&nbsp;<span class="ident" id="1688897">concatstrings</span><span class="op" id="1688910">(</span><span class="ident" id="1688911">a</span><span class="op" id="1688912">[</span><span class="op" id="1688913">:</span><span class="op" id="1688914">]</span><span class="op" id="1688915">)</span><br>
<span class="lineno">60</span><span class="op" id="1688917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1688920">func</span>&nbsp;<span class="ident" id="1688925">slicebytetostring</span><span class="op" id="1688942">(</span><span class="ident" id="1688943">b</span>&nbsp;<span class="op" id="1688945">[</span><span class="op" id="1688946">]</span><span class="builtintype" id="1688947">byte</span><span class="op" id="1688951">)</span>&nbsp;<span class="builtintype" id="1688953">string</span>&nbsp;<span class="op" id="1688960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1688963">if</span>&nbsp;<span class="ident" id="1688966">raceenabled</span>&nbsp;<span class="op" id="1688978">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1688981">len</span><span class="op" id="1688984">(</span><span class="ident" id="1688985">b</span><span class="op" id="1688986">)</span>&nbsp;<span class="op" id="1688988">&gt;</span>&nbsp;<span class="num" id="1688990">0</span>&nbsp;<span class="op" id="1688992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1688996">racereadrangepc</span><span class="op" id="1689011">(</span><span class="ident" id="1689012">unsafe</span><span class="op" id="1689018">.</span><span class="ident" id="1689019">Pointer</span><span class="op" id="1689026">(</span><span class="op" id="1689027">&amp;</span><span class="ident" id="1689028">b</span><span class="op" id="1689029">[</span><span class="num" id="1689030">0</span><span class="op" id="1689031">]</span><span class="op" id="1689032">)</span><span class="op" id="1689033">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1689038">uintptr</span><span class="op" id="1689045">(</span><span class="builtinfunc" id="1689046">len</span><span class="op" id="1689049">(</span><span class="ident" id="1689050">b</span><span class="op" id="1689051">)</span><span class="op" id="1689052">)</span><span class="op" id="1689053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1689058">getcallerpc</span><span class="op" id="1689069">(</span><span class="ident" id="1689070">unsafe</span><span class="op" id="1689076">.</span><span class="ident" id="1689077">Pointer</span><span class="op" id="1689084">(</span><span class="op" id="1689085">&amp;</span><span class="ident" id="1689086">b</span><span class="op" id="1689087">)</span><span class="op" id="1689088">)</span><span class="op" id="1689089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1689094">funcPC</span><span class="op" id="1689100">(</span><span class="ident" id="1689101">slicebytetostring</span><span class="op" id="1689118">)</span><span class="op" id="1689119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1689122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1689125">s</span><span class="op" id="1689126">,</span>&nbsp;<span class="ident" id="1689128">c</span>&nbsp;<span class="op" id="1689130">:=</span>&nbsp;<span class="ident" id="1689133">rawstring</span><span class="op" id="1689142">(</span><span class="builtinfunc" id="1689143">len</span><span class="op" id="1689146">(</span><span class="ident" id="1689147">b</span><span class="op" id="1689148">)</span><span class="op" id="1689149">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1689152">copy</span><span class="op" id="1689156">(</span><span class="ident" id="1689157">c</span><span class="op" id="1689158">,</span>&nbsp;<span class="ident" id="1689160">b</span><span class="op" id="1689161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1689164">return</span>&nbsp;<span class="ident" id="1689171">s</span><br>
<span class="lineno"></span><span class="op" id="1689173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1689176">func</span>&nbsp;<span class="ident" id="1689181">slicebytetostringtmp</span><span class="op" id="1689201">(</span><span class="ident" id="1689202">b</span>&nbsp;<span class="op" id="1689204">[</span><span class="op" id="1689205">]</span><span class="builtintype" id="1689206">byte</span><span class="op" id="1689210">)</span>&nbsp;<span class="builtintype" id="1689212">string</span>&nbsp;<span class="op" id="1689219">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1689222">//&nbsp;Return&nbsp;a&nbsp;&#34;string&#34;&nbsp;referring&nbsp;to&nbsp;the&nbsp;actual&nbsp;[]byte&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1689282">//&nbsp;This&nbsp;is&nbsp;only&nbsp;for&nbsp;use&nbsp;by&nbsp;internal&nbsp;compiler&nbsp;optimizations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1689342">//&nbsp;that&nbsp;know&nbsp;that&nbsp;the&nbsp;string&nbsp;form&nbsp;will&nbsp;be&nbsp;discarded&nbsp;before</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1689402">//&nbsp;the&nbsp;calling&nbsp;goroutine&nbsp;could&nbsp;possibly&nbsp;modify&nbsp;the&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1689463">//&nbsp;slice&nbsp;or&nbsp;synchronize&nbsp;with&nbsp;another&nbsp;goroutine.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1689512">//&nbsp;Today,&nbsp;the&nbsp;only&nbsp;such&nbsp;case&nbsp;is&nbsp;a&nbsp;m[string(k)]&nbsp;lookup&nbsp;where</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1689573">//&nbsp;m&nbsp;is&nbsp;a&nbsp;string-keyed&nbsp;map&nbsp;and&nbsp;k&nbsp;is&nbsp;a&nbsp;[]byte.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1689621">if</span>&nbsp;<span class="ident" id="1689624">raceenabled</span>&nbsp;<span class="op" id="1689636">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1689639">len</span><span class="op" id="1689642">(</span><span class="ident" id="1689643">b</span><span class="op" id="1689644">)</span>&nbsp;<span class="op" id="1689646">&gt;</span>&nbsp;<span class="num" id="1689648">0</span>&nbsp;<span class="op" id="1689650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1689654">racereadrangepc</span><span class="op" id="1689669">(</span><span class="ident" id="1689670">unsafe</span><span class="op" id="1689676">.</span><span class="ident" id="1689677">Pointer</span><span class="op" id="1689684">(</span><span class="op" id="1689685">&amp;</span><span class="ident" id="1689686">b</span><span class="op" id="1689687">[</span><span class="num" id="1689688">0</span><span class="op" id="1689689">]</span><span class="op" id="1689690">)</span><span class="op" id="1689691">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1689696">uintptr</span><span class="op" id="1689703">(</span><span class="builtinfunc" id="1689704">len</span><span class="op" id="1689707">(</span><span class="ident" id="1689708">b</span><span class="op" id="1689709">)</span><span class="op" id="1689710">)</span><span class="op" id="1689711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1689716">getcallerpc</span><span class="op" id="1689727">(</span><span class="ident" id="1689728">unsafe</span><span class="op" id="1689734">.</span><span class="ident" id="1689735">Pointer</span><span class="op" id="1689742">(</span><span class="op" id="1689743">&amp;</span><span class="ident" id="1689744">b</span><span class="op" id="1689745">)</span><span class="op" id="1689746">)</span><span class="op" id="1689747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1689752">funcPC</span><span class="op" id="1689758">(</span><span class="ident" id="1689759">slicebytetostringtmp</span><span class="op" id="1689779">)</span><span class="op" id="1689780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1689783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1689786">return</span>&nbsp;<span class="op" id="1689793">*</span><span class="op" id="1689794">(</span><span class="op" id="1689795">*</span><span class="builtintype" id="1689796">string</span><span class="op" id="1689802">)</span><span class="op" id="1689803">(</span><span class="ident" id="1689804">unsafe</span><span class="op" id="1689810">.</span><span class="ident" id="1689811">Pointer</span><span class="op" id="1689818">(</span><span class="op" id="1689819">&amp;</span><span class="ident" id="1689820">b</span><span class="op" id="1689821">)</span><span class="op" id="1689822">)</span><br>
<span class="lineno">90</span><span class="op" id="1689824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1689827">func</span>&nbsp;<span class="ident" id="1689832">stringtoslicebyte</span><span class="op" id="1689849">(</span><span class="ident" id="1689850">s</span>&nbsp;<span class="builtintype" id="1689852">string</span><span class="op" id="1689858">)</span>&nbsp;<span class="op" id="1689860">[</span><span class="op" id="1689861">]</span><span class="builtintype" id="1689862">byte</span>&nbsp;<span class="op" id="1689867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1689870">b</span>&nbsp;<span class="op" id="1689872">:=</span>&nbsp;<span class="ident" id="1689875">rawbyteslice</span><span class="op" id="1689887">(</span><span class="builtinfunc" id="1689888">len</span><span class="op" id="1689891">(</span><span class="ident" id="1689892">s</span><span class="op" id="1689893">)</span><span class="op" id="1689894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1689897">copy</span><span class="op" id="1689901">(</span><span class="ident" id="1689902">b</span><span class="op" id="1689903">,</span>&nbsp;<span class="ident" id="1689905">s</span><span class="op" id="1689906">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1689909">return</span>&nbsp;<span class="ident" id="1689916">b</span><br>
<span class="lineno"></span><span class="op" id="1689918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1689921">func</span>&nbsp;<span class="ident" id="1689926">stringtoslicerune</span><span class="op" id="1689943">(</span><span class="ident" id="1689944">s</span>&nbsp;<span class="builtintype" id="1689946">string</span><span class="op" id="1689952">)</span>&nbsp;<span class="op" id="1689954">[</span><span class="op" id="1689955">]</span><span class="builtintype" id="1689956">rune</span>&nbsp;<span class="op" id="1689961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1689964">//&nbsp;two&nbsp;passes.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1689980">//&nbsp;unlike&nbsp;slicerunetostring,&nbsp;no&nbsp;race&nbsp;because&nbsp;strings&nbsp;are&nbsp;immutable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690049">n</span>&nbsp;<span class="op" id="1690051">:=</span>&nbsp;<span class="num" id="1690054">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690057">t</span>&nbsp;<span class="op" id="1690059">:=</span>&nbsp;<span class="ident" id="1690062">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1690065">for</span>&nbsp;<span class="builtinfunc" id="1690069">len</span><span class="op" id="1690072">(</span><span class="ident" id="1690073">s</span><span class="op" id="1690074">)</span>&nbsp;<span class="op" id="1690076">&gt;</span>&nbsp;<span class="num" id="1690078">0</span>&nbsp;<span class="op" id="1690080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690084">_</span><span class="op" id="1690085">,</span>&nbsp;<span class="ident" id="1690087">k</span>&nbsp;<span class="op" id="1690089">:=</span>&nbsp;<span class="ident" id="1690092">charntorune</span><span class="op" id="1690103">(</span><span class="ident" id="1690104">s</span><span class="op" id="1690105">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690109">s</span>&nbsp;<span class="op" id="1690111">=</span>&nbsp;<span class="ident" id="1690113">s</span><span class="op" id="1690114">[</span><span class="ident" id="1690115">k</span><span class="op" id="1690116">:</span><span class="op" id="1690117">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690121">n</span><span class="op" id="1690122">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1690126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690129">a</span>&nbsp;<span class="op" id="1690131">:=</span>&nbsp;<span class="ident" id="1690134">rawruneslice</span><span class="op" id="1690146">(</span><span class="ident" id="1690147">n</span><span class="op" id="1690148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690151">n</span>&nbsp;<span class="op" id="1690153">=</span>&nbsp;<span class="num" id="1690155">0</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1690158">for</span>&nbsp;<span class="builtinfunc" id="1690162">len</span><span class="op" id="1690165">(</span><span class="ident" id="1690166">t</span><span class="op" id="1690167">)</span>&nbsp;<span class="op" id="1690169">&gt;</span>&nbsp;<span class="num" id="1690171">0</span>&nbsp;<span class="op" id="1690173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690177">r</span><span class="op" id="1690178">,</span>&nbsp;<span class="ident" id="1690180">k</span>&nbsp;<span class="op" id="1690182">:=</span>&nbsp;<span class="ident" id="1690185">charntorune</span><span class="op" id="1690196">(</span><span class="ident" id="1690197">t</span><span class="op" id="1690198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690202">t</span>&nbsp;<span class="op" id="1690204">=</span>&nbsp;<span class="ident" id="1690206">t</span><span class="op" id="1690207">[</span><span class="ident" id="1690208">k</span><span class="op" id="1690209">:</span><span class="op" id="1690210">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690214">a</span><span class="op" id="1690215">[</span><span class="ident" id="1690216">n</span><span class="op" id="1690217">]</span>&nbsp;<span class="op" id="1690219">=</span>&nbsp;<span class="ident" id="1690221">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690225">n</span><span class="op" id="1690226">++</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1690230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1690233">return</span>&nbsp;<span class="ident" id="1690240">a</span><br>
<span class="lineno"></span><span class="op" id="1690242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1690245">func</span>&nbsp;<span class="ident" id="1690250">slicerunetostring</span><span class="op" id="1690267">(</span><span class="ident" id="1690268">a</span>&nbsp;<span class="op" id="1690270">[</span><span class="op" id="1690271">]</span><span class="builtintype" id="1690272">rune</span><span class="op" id="1690276">)</span>&nbsp;<span class="builtintype" id="1690278">string</span>&nbsp;<span class="op" id="1690285">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1690288">if</span>&nbsp;<span class="ident" id="1690291">raceenabled</span>&nbsp;<span class="op" id="1690303">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1690306">len</span><span class="op" id="1690309">(</span><span class="ident" id="1690310">a</span><span class="op" id="1690311">)</span>&nbsp;<span class="op" id="1690313">&gt;</span>&nbsp;<span class="num" id="1690315">0</span>&nbsp;<span class="op" id="1690317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690321">racereadrangepc</span><span class="op" id="1690336">(</span><span class="ident" id="1690337">unsafe</span><span class="op" id="1690343">.</span><span class="ident" id="1690344">Pointer</span><span class="op" id="1690351">(</span><span class="op" id="1690352">&amp;</span><span class="ident" id="1690353">a</span><span class="op" id="1690354">[</span><span class="num" id="1690355">0</span><span class="op" id="1690356">]</span><span class="op" id="1690357">)</span><span class="op" id="1690358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1690363">uintptr</span><span class="op" id="1690370">(</span><span class="builtinfunc" id="1690371">len</span><span class="op" id="1690374">(</span><span class="ident" id="1690375">a</span><span class="op" id="1690376">)</span><span class="op" id="1690377">)</span><span class="op" id="1690378">*</span><span class="ident" id="1690379">unsafe</span><span class="op" id="1690385">.</span><span class="ident" id="1690386">Sizeof</span><span class="op" id="1690392">(</span><span class="ident" id="1690393">a</span><span class="op" id="1690394">[</span><span class="num" id="1690395">0</span><span class="op" id="1690396">]</span><span class="op" id="1690397">)</span><span class="op" id="1690398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690403">getcallerpc</span><span class="op" id="1690414">(</span><span class="ident" id="1690415">unsafe</span><span class="op" id="1690421">.</span><span class="ident" id="1690422">Pointer</span><span class="op" id="1690429">(</span><span class="op" id="1690430">&amp;</span><span class="ident" id="1690431">a</span><span class="op" id="1690432">)</span><span class="op" id="1690433">)</span><span class="op" id="1690434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690439">funcPC</span><span class="op" id="1690445">(</span><span class="ident" id="1690446">slicerunetostring</span><span class="op" id="1690463">)</span><span class="op" id="1690464">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1690467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1690470">var</span>&nbsp;<span class="ident" id="1690474">dum</span>&nbsp;<span class="op" id="1690478">[</span><span class="num" id="1690479">4</span><span class="op" id="1690480">]</span><span class="builtintype" id="1690481">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690487">size1</span>&nbsp;<span class="op" id="1690493">:=</span>&nbsp;<span class="num" id="1690496">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1690499">for</span>&nbsp;<span class="ident" id="1690503">_</span><span class="op" id="1690504">,</span>&nbsp;<span class="ident" id="1690506">r</span>&nbsp;<span class="op" id="1690508">:=</span>&nbsp;<span class="keyword" id="1690511">range</span>&nbsp;<span class="ident" id="1690517">a</span>&nbsp;<span class="op" id="1690519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690523">size1</span>&nbsp;<span class="op" id="1690529">+=</span>&nbsp;<span class="ident" id="1690532">runetochar</span><span class="op" id="1690542">(</span><span class="ident" id="1690543">dum</span><span class="op" id="1690546">[</span><span class="op" id="1690547">:</span><span class="op" id="1690548">]</span><span class="op" id="1690549">,</span>&nbsp;<span class="ident" id="1690551">r</span><span class="op" id="1690552">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1690555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690558">s</span><span class="op" id="1690559">,</span>&nbsp;<span class="ident" id="1690561">b</span>&nbsp;<span class="op" id="1690563">:=</span>&nbsp;<span class="ident" id="1690566">rawstring</span><span class="op" id="1690575">(</span><span class="ident" id="1690576">size1</span>&nbsp;<span class="op" id="1690582">+</span>&nbsp;<span class="num" id="1690584">3</span><span class="op" id="1690585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690588">size2</span>&nbsp;<span class="op" id="1690594">:=</span>&nbsp;<span class="num" id="1690597">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1690600">for</span>&nbsp;<span class="ident" id="1690604">_</span><span class="op" id="1690605">,</span>&nbsp;<span class="ident" id="1690607">r</span>&nbsp;<span class="op" id="1690609">:=</span>&nbsp;<span class="keyword" id="1690612">range</span>&nbsp;<span class="ident" id="1690618">a</span>&nbsp;<span class="op" id="1690620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1690624">//&nbsp;check&nbsp;for&nbsp;race</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1690644">if</span>&nbsp;<span class="ident" id="1690647">size2</span>&nbsp;<span class="op" id="1690653">&gt;=</span>&nbsp;<span class="ident" id="1690656">size1</span>&nbsp;<span class="op" id="1690662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1690667">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1690675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690679">size2</span>&nbsp;<span class="op" id="1690685">+=</span>&nbsp;<span class="ident" id="1690688">runetochar</span><span class="op" id="1690698">(</span><span class="ident" id="1690699">b</span><span class="op" id="1690700">[</span><span class="ident" id="1690701">size2</span><span class="op" id="1690706">:</span><span class="op" id="1690707">]</span><span class="op" id="1690708">,</span>&nbsp;<span class="ident" id="1690710">r</span><span class="op" id="1690711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1690714">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1690717">return</span>&nbsp;<span class="ident" id="1690724">s</span><span class="op" id="1690725">[</span><span class="op" id="1690726">:</span><span class="ident" id="1690727">size2</span><span class="op" id="1690732">]</span><br>
<span class="lineno"></span><span class="op" id="1690734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1690737">type</span>&nbsp;<span class="ident" id="1690742">stringStruct</span>&nbsp;<span class="keyword" id="1690755">struct</span>&nbsp;<span class="op" id="1690762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690765">str</span>&nbsp;<span class="ident" id="1690769">unsafe</span><span class="op" id="1690775">.</span><span class="ident" id="1690776">Pointer</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1690785">len</span>&nbsp;<span class="builtintype" id="1690789">int</span><br>
<span class="lineno"></span><span class="op" id="1690793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1690796">func</span>&nbsp;<span class="ident" id="1690801">intstring</span><span class="op" id="1690810">(</span><span class="ident" id="1690811">v</span>&nbsp;<span class="ident" id="1690813">int64</span><span class="op" id="1690818">)</span>&nbsp;<span class="builtintype" id="1690820">string</span>&nbsp;<span class="op" id="1690827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690830">s</span><span class="op" id="1690831">,</span>&nbsp;<span class="ident" id="1690833">b</span>&nbsp;<span class="op" id="1690835">:=</span>&nbsp;<span class="ident" id="1690838">rawstring</span><span class="op" id="1690847">(</span><span class="num" id="1690848">4</span><span class="op" id="1690849">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1690852">n</span>&nbsp;<span class="op" id="1690854">:=</span>&nbsp;<span class="ident" id="1690857">runetochar</span><span class="op" id="1690867">(</span><span class="ident" id="1690868">b</span><span class="op" id="1690869">,</span>&nbsp;<span class="builtintype" id="1690871">rune</span><span class="op" id="1690875">(</span><span class="ident" id="1690876">v</span><span class="op" id="1690877">)</span><span class="op" id="1690878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1690881">return</span>&nbsp;<span class="ident" id="1690888">s</span><span class="op" id="1690889">[</span><span class="op" id="1690890">:</span><span class="ident" id="1690891">n</span><span class="op" id="1690892">]</span><br>
<span class="lineno"></span><span class="op" id="1690894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1690897">//&nbsp;stringiter&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;next</span><br>
<span class="lineno">155</span><span class="comment" id="1690941">//&nbsp;rune&nbsp;after&nbsp;the&nbsp;rune&nbsp;that&nbsp;starts&nbsp;at&nbsp;s[k].</span><br>
<span class="lineno"></span><span class="keyword" id="1690985">func</span>&nbsp;<span class="ident" id="1690990">stringiter</span><span class="op" id="1691000">(</span><span class="ident" id="1691001">s</span>&nbsp;<span class="builtintype" id="1691003">string</span><span class="op" id="1691009">,</span>&nbsp;<span class="ident" id="1691011">k</span>&nbsp;<span class="builtintype" id="1691013">int</span><span class="op" id="1691016">)</span>&nbsp;<span class="builtintype" id="1691018">int</span>&nbsp;<span class="op" id="1691022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1691025">if</span>&nbsp;<span class="ident" id="1691028">k</span>&nbsp;<span class="op" id="1691030">&gt;=</span>&nbsp;<span class="builtinfunc" id="1691033">len</span><span class="op" id="1691036">(</span><span class="ident" id="1691037">s</span><span class="op" id="1691038">)</span>&nbsp;<span class="op" id="1691040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1691044">//&nbsp;0&nbsp;is&nbsp;end&nbsp;of&nbsp;iteration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1691071">return</span>&nbsp;<span class="num" id="1691078">0</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1691081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1691085">c</span>&nbsp;<span class="op" id="1691087">:=</span>&nbsp;<span class="ident" id="1691090">s</span><span class="op" id="1691091">[</span><span class="ident" id="1691092">k</span><span class="op" id="1691093">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1691096">if</span>&nbsp;<span class="ident" id="1691099">c</span>&nbsp;<span class="op" id="1691101">&lt;</span>&nbsp;<span class="ident" id="1691103">runeself</span>&nbsp;<span class="op" id="1691112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1691116">return</span>&nbsp;<span class="ident" id="1691123">k</span>&nbsp;<span class="op" id="1691125">+</span>&nbsp;<span class="num" id="1691127">1</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1691130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1691134">//&nbsp;multi-char&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1691154">_</span><span class="op" id="1691155">,</span>&nbsp;<span class="ident" id="1691157">n</span>&nbsp;<span class="op" id="1691159">:=</span>&nbsp;<span class="ident" id="1691162">charntorune</span><span class="op" id="1691173">(</span><span class="ident" id="1691174">s</span><span class="op" id="1691175">[</span><span class="ident" id="1691176">k</span><span class="op" id="1691177">:</span><span class="op" id="1691178">]</span><span class="op" id="1691179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1691182">return</span>&nbsp;<span class="ident" id="1691189">k</span>&nbsp;<span class="op" id="1691191">+</span>&nbsp;<span class="ident" id="1691193">n</span><br>
<span class="lineno">170</span><span class="op" id="1691195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1691198">//&nbsp;stringiter2&nbsp;returns&nbsp;the&nbsp;rune&nbsp;that&nbsp;starts&nbsp;at&nbsp;s[k]</span><br>
<span class="lineno"></span><span class="comment" id="1691250">//&nbsp;and&nbsp;the&nbsp;index&nbsp;where&nbsp;the&nbsp;next&nbsp;rune&nbsp;starts.</span><br>
<span class="lineno"></span><span class="keyword" id="1691295">func</span>&nbsp;<span class="ident" id="1691300">stringiter2</span><span class="op" id="1691311">(</span><span class="ident" id="1691312">s</span>&nbsp;<span class="builtintype" id="1691314">string</span><span class="op" id="1691320">,</span>&nbsp;<span class="ident" id="1691322">k</span>&nbsp;<span class="builtintype" id="1691324">int</span><span class="op" id="1691327">)</span>&nbsp;<span class="op" id="1691329">(</span><span class="builtintype" id="1691330">int</span><span class="op" id="1691333">,</span>&nbsp;<span class="builtintype" id="1691335">rune</span><span class="op" id="1691339">)</span>&nbsp;<span class="op" id="1691341">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1691344">if</span>&nbsp;<span class="ident" id="1691347">k</span>&nbsp;<span class="op" id="1691349">&gt;=</span>&nbsp;<span class="builtinfunc" id="1691352">len</span><span class="op" id="1691355">(</span><span class="ident" id="1691356">s</span><span class="op" id="1691357">)</span>&nbsp;<span class="op" id="1691359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1691363">//&nbsp;0&nbsp;is&nbsp;end&nbsp;of&nbsp;iteration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1691390">return</span>&nbsp;<span class="num" id="1691397">0</span><span class="op" id="1691398">,</span>&nbsp;<span class="num" id="1691400">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1691403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1691407">c</span>&nbsp;<span class="op" id="1691409">:=</span>&nbsp;<span class="ident" id="1691412">s</span><span class="op" id="1691413">[</span><span class="ident" id="1691414">k</span><span class="op" id="1691415">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1691418">if</span>&nbsp;<span class="ident" id="1691421">c</span>&nbsp;<span class="op" id="1691423">&lt;</span>&nbsp;<span class="ident" id="1691425">runeself</span>&nbsp;<span class="op" id="1691434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1691438">return</span>&nbsp;<span class="ident" id="1691445">k</span>&nbsp;<span class="op" id="1691447">+</span>&nbsp;<span class="num" id="1691449">1</span><span class="op" id="1691450">,</span>&nbsp;<span class="builtintype" id="1691452">rune</span><span class="op" id="1691456">(</span><span class="ident" id="1691457">c</span><span class="op" id="1691458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1691461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1691465">//&nbsp;multi-char&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1691485">r</span><span class="op" id="1691486">,</span>&nbsp;<span class="ident" id="1691488">n</span>&nbsp;<span class="op" id="1691490">:=</span>&nbsp;<span class="ident" id="1691493">charntorune</span><span class="op" id="1691504">(</span><span class="ident" id="1691505">s</span><span class="op" id="1691506">[</span><span class="ident" id="1691507">k</span><span class="op" id="1691508">:</span><span class="op" id="1691509">]</span><span class="op" id="1691510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1691513">return</span>&nbsp;<span class="ident" id="1691520">k</span>&nbsp;<span class="op" id="1691522">+</span>&nbsp;<span class="ident" id="1691524">n</span><span class="op" id="1691525">,</span>&nbsp;<span class="ident" id="1691527">r</span><br>
<span class="lineno"></span><span class="op" id="1691529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="1691532">//&nbsp;rawstring&nbsp;allocates&nbsp;storage&nbsp;for&nbsp;a&nbsp;new&nbsp;string.&nbsp;The&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="1691594">//&nbsp;string&nbsp;and&nbsp;byte&nbsp;slice&nbsp;both&nbsp;refer&nbsp;to&nbsp;the&nbsp;same&nbsp;storage.</span><br>
<span class="lineno"></span><span class="comment" id="1691651">//&nbsp;The&nbsp;storage&nbsp;is&nbsp;not&nbsp;zeroed.&nbsp;Callers&nbsp;should&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="1691700">//&nbsp;b&nbsp;to&nbsp;set&nbsp;the&nbsp;string&nbsp;contents&nbsp;and&nbsp;then&nbsp;drop&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="1691749">func</span>&nbsp;<span class="ident" id="1691754">rawstring</span><span class="op" id="1691763">(</span><span class="ident" id="1691764">size</span>&nbsp;<span class="builtintype" id="1691769">int</span><span class="op" id="1691772">)</span>&nbsp;<span class="op" id="1691774">(</span><span class="ident" id="1691775">s</span>&nbsp;<span class="builtintype" id="1691777">string</span><span class="op" id="1691783">,</span>&nbsp;<span class="ident" id="1691785">b</span>&nbsp;<span class="op" id="1691787">[</span><span class="op" id="1691788">]</span><span class="builtintype" id="1691789">byte</span><span class="op" id="1691793">)</span>&nbsp;<span class="op" id="1691795">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1691798">p</span>&nbsp;<span class="op" id="1691800">:=</span>&nbsp;<span class="ident" id="1691803">mallocgc</span><span class="op" id="1691811">(</span><span class="builtintype" id="1691812">uintptr</span><span class="op" id="1691819">(</span><span class="ident" id="1691820">size</span><span class="op" id="1691824">)</span><span class="op" id="1691825">,</span>&nbsp;<span class="ident" id="1691827">nil</span><span class="op" id="1691830">,</span>&nbsp;<span class="ident" id="1691832">flagNoScan</span><span class="op" id="1691842">|</span><span class="ident" id="1691843">flagNoZero</span><span class="op" id="1691853">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1691857">(</span><span class="op" id="1691858">*</span><span class="ident" id="1691859">stringStruct</span><span class="op" id="1691871">)</span><span class="op" id="1691872">(</span><span class="ident" id="1691873">unsafe</span><span class="op" id="1691879">.</span><span class="ident" id="1691880">Pointer</span><span class="op" id="1691887">(</span><span class="op" id="1691888">&amp;</span><span class="ident" id="1691889">s</span><span class="op" id="1691890">)</span><span class="op" id="1691891">)</span><span class="op" id="1691892">.</span><span class="ident" id="1691893">str</span>&nbsp;<span class="op" id="1691897">=</span>&nbsp;<span class="ident" id="1691899">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1691902">(</span><span class="op" id="1691903">*</span><span class="ident" id="1691904">stringStruct</span><span class="op" id="1691916">)</span><span class="op" id="1691917">(</span><span class="ident" id="1691918">unsafe</span><span class="op" id="1691924">.</span><span class="ident" id="1691925">Pointer</span><span class="op" id="1691932">(</span><span class="op" id="1691933">&amp;</span><span class="ident" id="1691934">s</span><span class="op" id="1691935">)</span><span class="op" id="1691936">)</span><span class="op" id="1691937">.</span><span class="builtinfunc" id="1691938">len</span>&nbsp;<span class="op" id="1691942">=</span>&nbsp;<span class="ident" id="1691944">size</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1691951">(</span><span class="op" id="1691952">*</span><span class="ident" id="1691953">slice</span><span class="op" id="1691958">)</span><span class="op" id="1691959">(</span><span class="ident" id="1691960">unsafe</span><span class="op" id="1691966">.</span><span class="ident" id="1691967">Pointer</span><span class="op" id="1691974">(</span><span class="op" id="1691975">&amp;</span><span class="ident" id="1691976">b</span><span class="op" id="1691977">)</span><span class="op" id="1691978">)</span><span class="op" id="1691979">.</span><span class="ident" id="1691980">array</span>&nbsp;<span class="op" id="1691986">=</span>&nbsp;<span class="op" id="1691988">(</span><span class="op" id="1691989">*</span><span class="builtintype" id="1691990">uint8</span><span class="op" id="1691995">)</span><span class="op" id="1691996">(</span><span class="ident" id="1691997">p</span><span class="op" id="1691998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1692001">(</span><span class="op" id="1692002">*</span><span class="ident" id="1692003">slice</span><span class="op" id="1692008">)</span><span class="op" id="1692009">(</span><span class="ident" id="1692010">unsafe</span><span class="op" id="1692016">.</span><span class="ident" id="1692017">Pointer</span><span class="op" id="1692024">(</span><span class="op" id="1692025">&amp;</span><span class="ident" id="1692026">b</span><span class="op" id="1692027">)</span><span class="op" id="1692028">)</span><span class="op" id="1692029">.</span><span class="builtinfunc" id="1692030">len</span>&nbsp;<span class="op" id="1692034">=</span>&nbsp;<span class="builtintype" id="1692036">uint</span><span class="op" id="1692040">(</span><span class="ident" id="1692041">size</span><span class="op" id="1692045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1692048">(</span><span class="op" id="1692049">*</span><span class="ident" id="1692050">slice</span><span class="op" id="1692055">)</span><span class="op" id="1692056">(</span><span class="ident" id="1692057">unsafe</span><span class="op" id="1692063">.</span><span class="ident" id="1692064">Pointer</span><span class="op" id="1692071">(</span><span class="op" id="1692072">&amp;</span><span class="ident" id="1692073">b</span><span class="op" id="1692074">)</span><span class="op" id="1692075">)</span><span class="op" id="1692076">.</span><span class="builtinfunc" id="1692077">cap</span>&nbsp;<span class="op" id="1692081">=</span>&nbsp;<span class="builtintype" id="1692083">uint</span><span class="op" id="1692087">(</span><span class="ident" id="1692088">size</span><span class="op" id="1692092">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1692096">for</span>&nbsp;<span class="op" id="1692100">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1692104">ms</span>&nbsp;<span class="op" id="1692107">:=</span>&nbsp;<span class="ident" id="1692110">maxstring</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1692122">if</span>&nbsp;<span class="builtintype" id="1692125">uintptr</span><span class="op" id="1692132">(</span><span class="ident" id="1692133">size</span><span class="op" id="1692137">)</span>&nbsp;<span class="op" id="1692139">&lt;=</span>&nbsp;<span class="builtintype" id="1692142">uintptr</span><span class="op" id="1692149">(</span><span class="ident" id="1692150">ms</span><span class="op" id="1692152">)</span>&nbsp;<span class="op" id="1692154">||</span>&nbsp;<span class="ident" id="1692157">casuintptr</span><span class="op" id="1692167">(</span><span class="op" id="1692168">(</span><span class="op" id="1692169">*</span><span class="builtintype" id="1692170">uintptr</span><span class="op" id="1692177">)</span><span class="op" id="1692178">(</span><span class="ident" id="1692179">unsafe</span><span class="op" id="1692185">.</span><span class="ident" id="1692186">Pointer</span><span class="op" id="1692193">(</span><span class="op" id="1692194">&amp;</span><span class="ident" id="1692195">maxstring</span><span class="op" id="1692204">)</span><span class="op" id="1692205">)</span><span class="op" id="1692206">,</span>&nbsp;<span class="builtintype" id="1692208">uintptr</span><span class="op" id="1692215">(</span><span class="ident" id="1692216">ms</span><span class="op" id="1692218">)</span><span class="op" id="1692219">,</span>&nbsp;<span class="builtintype" id="1692221">uintptr</span><span class="op" id="1692228">(</span><span class="ident" id="1692229">size</span><span class="op" id="1692233">)</span><span class="op" id="1692234">)</span>&nbsp;<span class="op" id="1692236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1692241">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1692250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1692253">}</span><br>
<span class="lineno">210</span><span class="op" id="1692255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1692258">//&nbsp;rawbyteslice&nbsp;allocates&nbsp;a&nbsp;new&nbsp;byte&nbsp;slice.&nbsp;The&nbsp;byte&nbsp;slice&nbsp;is&nbsp;not&nbsp;zeroed.</span><br>
<span class="lineno"></span><span class="keyword" id="1692332">func</span>&nbsp;<span class="ident" id="1692337">rawbyteslice</span><span class="op" id="1692349">(</span><span class="ident" id="1692350">size</span>&nbsp;<span class="builtintype" id="1692355">int</span><span class="op" id="1692358">)</span>&nbsp;<span class="op" id="1692360">(</span><span class="ident" id="1692361">b</span>&nbsp;<span class="op" id="1692363">[</span><span class="op" id="1692364">]</span><span class="builtintype" id="1692365">byte</span><span class="op" id="1692369">)</span>&nbsp;<span class="op" id="1692371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1692374">cap</span>&nbsp;<span class="op" id="1692378">:=</span>&nbsp;<span class="ident" id="1692381">goroundupsize</span><span class="op" id="1692394">(</span><span class="builtintype" id="1692395">uintptr</span><span class="op" id="1692402">(</span><span class="ident" id="1692403">size</span><span class="op" id="1692407">)</span><span class="op" id="1692408">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1692411">p</span>&nbsp;<span class="op" id="1692413">:=</span>&nbsp;<span class="ident" id="1692416">mallocgc</span><span class="op" id="1692424">(</span><span class="builtinfunc" id="1692425">cap</span><span class="op" id="1692428">,</span>&nbsp;<span class="ident" id="1692430">nil</span><span class="op" id="1692433">,</span>&nbsp;<span class="ident" id="1692435">flagNoScan</span><span class="op" id="1692445">|</span><span class="ident" id="1692446">flagNoZero</span><span class="op" id="1692456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1692459">if</span>&nbsp;<span class="builtinfunc" id="1692462">cap</span>&nbsp;<span class="op" id="1692466">!=</span>&nbsp;<span class="builtintype" id="1692469">uintptr</span><span class="op" id="1692476">(</span><span class="ident" id="1692477">size</span><span class="op" id="1692481">)</span>&nbsp;<span class="op" id="1692483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1692487">memclr</span><span class="op" id="1692493">(</span><span class="ident" id="1692494">add</span><span class="op" id="1692497">(</span><span class="ident" id="1692498">p</span><span class="op" id="1692499">,</span>&nbsp;<span class="builtintype" id="1692501">uintptr</span><span class="op" id="1692508">(</span><span class="ident" id="1692509">size</span><span class="op" id="1692513">)</span><span class="op" id="1692514">)</span><span class="op" id="1692515">,</span>&nbsp;<span class="builtinfunc" id="1692517">cap</span><span class="op" id="1692520">-</span><span class="builtintype" id="1692521">uintptr</span><span class="op" id="1692528">(</span><span class="ident" id="1692529">size</span><span class="op" id="1692533">)</span><span class="op" id="1692534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1692537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1692541">(</span><span class="op" id="1692542">*</span><span class="ident" id="1692543">slice</span><span class="op" id="1692548">)</span><span class="op" id="1692549">(</span><span class="ident" id="1692550">unsafe</span><span class="op" id="1692556">.</span><span class="ident" id="1692557">Pointer</span><span class="op" id="1692564">(</span><span class="op" id="1692565">&amp;</span><span class="ident" id="1692566">b</span><span class="op" id="1692567">)</span><span class="op" id="1692568">)</span><span class="op" id="1692569">.</span><span class="ident" id="1692570">array</span>&nbsp;<span class="op" id="1692576">=</span>&nbsp;<span class="op" id="1692578">(</span><span class="op" id="1692579">*</span><span class="builtintype" id="1692580">uint8</span><span class="op" id="1692585">)</span><span class="op" id="1692586">(</span><span class="ident" id="1692587">p</span><span class="op" id="1692588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1692591">(</span><span class="op" id="1692592">*</span><span class="ident" id="1692593">slice</span><span class="op" id="1692598">)</span><span class="op" id="1692599">(</span><span class="ident" id="1692600">unsafe</span><span class="op" id="1692606">.</span><span class="ident" id="1692607">Pointer</span><span class="op" id="1692614">(</span><span class="op" id="1692615">&amp;</span><span class="ident" id="1692616">b</span><span class="op" id="1692617">)</span><span class="op" id="1692618">)</span><span class="op" id="1692619">.</span><span class="builtinfunc" id="1692620">len</span>&nbsp;<span class="op" id="1692624">=</span>&nbsp;<span class="builtintype" id="1692626">uint</span><span class="op" id="1692630">(</span><span class="ident" id="1692631">size</span><span class="op" id="1692635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1692638">(</span><span class="op" id="1692639">*</span><span class="ident" id="1692640">slice</span><span class="op" id="1692645">)</span><span class="op" id="1692646">(</span><span class="ident" id="1692647">unsafe</span><span class="op" id="1692653">.</span><span class="ident" id="1692654">Pointer</span><span class="op" id="1692661">(</span><span class="op" id="1692662">&amp;</span><span class="ident" id="1692663">b</span><span class="op" id="1692664">)</span><span class="op" id="1692665">)</span><span class="op" id="1692666">.</span><span class="builtinfunc" id="1692667">cap</span>&nbsp;<span class="op" id="1692671">=</span>&nbsp;<span class="builtintype" id="1692673">uint</span><span class="op" id="1692677">(</span><span class="builtinfunc" id="1692678">cap</span><span class="op" id="1692681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1692684">return</span><br>
<span class="lineno"></span><span class="op" id="1692691">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="1692694">//&nbsp;rawruneslice&nbsp;allocates&nbsp;a&nbsp;new&nbsp;rune&nbsp;slice.&nbsp;The&nbsp;rune&nbsp;slice&nbsp;is&nbsp;not&nbsp;zeroed.</span><br>
<span class="lineno"></span><span class="keyword" id="1692768">func</span>&nbsp;<span class="ident" id="1692773">rawruneslice</span><span class="op" id="1692785">(</span><span class="ident" id="1692786">size</span>&nbsp;<span class="builtintype" id="1692791">int</span><span class="op" id="1692794">)</span>&nbsp;<span class="op" id="1692796">(</span><span class="ident" id="1692797">b</span>&nbsp;<span class="op" id="1692799">[</span><span class="op" id="1692800">]</span><span class="builtintype" id="1692801">rune</span><span class="op" id="1692805">)</span>&nbsp;<span class="op" id="1692807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1692810">if</span>&nbsp;<span class="builtintype" id="1692813">uintptr</span><span class="op" id="1692820">(</span><span class="ident" id="1692821">size</span><span class="op" id="1692825">)</span>&nbsp;<span class="op" id="1692827">&gt;</span>&nbsp;<span class="ident" id="1692829">maxmem</span><span class="op" id="1692835">/</span><span class="num" id="1692836">4</span>&nbsp;<span class="op" id="1692838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1692842">gothrow</span><span class="op" id="1692849">(</span><span class="string" id="1692850">&#34;out&nbsp;of&nbsp;memory&#34;</span><span class="op" id="1692865">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1692868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1692871">mem</span>&nbsp;<span class="op" id="1692875">:=</span>&nbsp;<span class="ident" id="1692878">goroundupsize</span><span class="op" id="1692891">(</span><span class="builtintype" id="1692892">uintptr</span><span class="op" id="1692899">(</span><span class="ident" id="1692900">size</span><span class="op" id="1692904">)</span>&nbsp;<span class="op" id="1692906">*</span>&nbsp;<span class="num" id="1692908">4</span><span class="op" id="1692909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1692912">p</span>&nbsp;<span class="op" id="1692914">:=</span>&nbsp;<span class="ident" id="1692917">mallocgc</span><span class="op" id="1692925">(</span><span class="ident" id="1692926">mem</span><span class="op" id="1692929">,</span>&nbsp;<span class="ident" id="1692931">nil</span><span class="op" id="1692934">,</span>&nbsp;<span class="ident" id="1692936">flagNoScan</span><span class="op" id="1692946">|</span><span class="ident" id="1692947">flagNoZero</span><span class="op" id="1692957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1692960">if</span>&nbsp;<span class="ident" id="1692963">mem</span>&nbsp;<span class="op" id="1692967">!=</span>&nbsp;<span class="builtintype" id="1692970">uintptr</span><span class="op" id="1692977">(</span><span class="ident" id="1692978">size</span><span class="op" id="1692982">)</span><span class="op" id="1692983">*</span><span class="num" id="1692984">4</span>&nbsp;<span class="op" id="1692986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1692990">memclr</span><span class="op" id="1692996">(</span><span class="ident" id="1692997">add</span><span class="op" id="1693000">(</span><span class="ident" id="1693001">p</span><span class="op" id="1693002">,</span>&nbsp;<span class="builtintype" id="1693004">uintptr</span><span class="op" id="1693011">(</span><span class="ident" id="1693012">size</span><span class="op" id="1693016">)</span><span class="op" id="1693017">*</span><span class="num" id="1693018">4</span><span class="op" id="1693019">)</span><span class="op" id="1693020">,</span>&nbsp;<span class="ident" id="1693022">mem</span><span class="op" id="1693025">-</span><span class="builtintype" id="1693026">uintptr</span><span class="op" id="1693033">(</span><span class="ident" id="1693034">size</span><span class="op" id="1693038">)</span><span class="op" id="1693039">*</span><span class="num" id="1693040">4</span><span class="op" id="1693041">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1693044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1693048">(</span><span class="op" id="1693049">*</span><span class="ident" id="1693050">slice</span><span class="op" id="1693055">)</span><span class="op" id="1693056">(</span><span class="ident" id="1693057">unsafe</span><span class="op" id="1693063">.</span><span class="ident" id="1693064">Pointer</span><span class="op" id="1693071">(</span><span class="op" id="1693072">&amp;</span><span class="ident" id="1693073">b</span><span class="op" id="1693074">)</span><span class="op" id="1693075">)</span><span class="op" id="1693076">.</span><span class="ident" id="1693077">array</span>&nbsp;<span class="op" id="1693083">=</span>&nbsp;<span class="op" id="1693085">(</span><span class="op" id="1693086">*</span><span class="builtintype" id="1693087">uint8</span><span class="op" id="1693092">)</span><span class="op" id="1693093">(</span><span class="ident" id="1693094">p</span><span class="op" id="1693095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1693098">(</span><span class="op" id="1693099">*</span><span class="ident" id="1693100">slice</span><span class="op" id="1693105">)</span><span class="op" id="1693106">(</span><span class="ident" id="1693107">unsafe</span><span class="op" id="1693113">.</span><span class="ident" id="1693114">Pointer</span><span class="op" id="1693121">(</span><span class="op" id="1693122">&amp;</span><span class="ident" id="1693123">b</span><span class="op" id="1693124">)</span><span class="op" id="1693125">)</span><span class="op" id="1693126">.</span><span class="builtinfunc" id="1693127">len</span>&nbsp;<span class="op" id="1693131">=</span>&nbsp;<span class="builtintype" id="1693133">uint</span><span class="op" id="1693137">(</span><span class="ident" id="1693138">size</span><span class="op" id="1693142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1693145">(</span><span class="op" id="1693146">*</span><span class="ident" id="1693147">slice</span><span class="op" id="1693152">)</span><span class="op" id="1693153">(</span><span class="ident" id="1693154">unsafe</span><span class="op" id="1693160">.</span><span class="ident" id="1693161">Pointer</span><span class="op" id="1693168">(</span><span class="op" id="1693169">&amp;</span><span class="ident" id="1693170">b</span><span class="op" id="1693171">)</span><span class="op" id="1693172">)</span><span class="op" id="1693173">.</span><span class="builtinfunc" id="1693174">cap</span>&nbsp;<span class="op" id="1693178">=</span>&nbsp;<span class="builtintype" id="1693180">uint</span><span class="op" id="1693184">(</span><span class="ident" id="1693185">mem</span>&nbsp;<span class="op" id="1693189">/</span>&nbsp;<span class="num" id="1693191">4</span><span class="op" id="1693192">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693195">return</span><br>
<span class="lineno"></span><span class="op" id="1693202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1693205">//&nbsp;used&nbsp;by&nbsp;cmd/cgo</span><br>
<span class="lineno"></span><span class="keyword" id="1693224">func</span>&nbsp;<span class="ident" id="1693229">gobytes</span><span class="op" id="1693236">(</span><span class="ident" id="1693237">p</span>&nbsp;<span class="op" id="1693239">*</span><span class="builtintype" id="1693240">byte</span><span class="op" id="1693244">,</span>&nbsp;<span class="ident" id="1693246">n</span>&nbsp;<span class="builtintype" id="1693248">int</span><span class="op" id="1693251">)</span>&nbsp;<span class="op" id="1693253">[</span><span class="op" id="1693254">]</span><span class="builtintype" id="1693255">byte</span>&nbsp;<span class="op" id="1693260">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693263">if</span>&nbsp;<span class="ident" id="1693266">n</span>&nbsp;<span class="op" id="1693268">==</span>&nbsp;<span class="num" id="1693271">0</span>&nbsp;<span class="op" id="1693273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693277">return</span>&nbsp;<span class="builtinfunc" id="1693284">make</span><span class="op" id="1693288">(</span><span class="op" id="1693289">[</span><span class="op" id="1693290">]</span><span class="builtintype" id="1693291">byte</span><span class="op" id="1693295">,</span>&nbsp;<span class="num" id="1693297">0</span><span class="op" id="1693298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1693301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1693304">x</span>&nbsp;<span class="op" id="1693306">:=</span>&nbsp;<span class="builtinfunc" id="1693309">make</span><span class="op" id="1693313">(</span><span class="op" id="1693314">[</span><span class="op" id="1693315">]</span><span class="builtintype" id="1693316">byte</span><span class="op" id="1693320">,</span>&nbsp;<span class="ident" id="1693322">n</span><span class="op" id="1693323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1693326">memmove</span><span class="op" id="1693333">(</span><span class="ident" id="1693334">unsafe</span><span class="op" id="1693340">.</span><span class="ident" id="1693341">Pointer</span><span class="op" id="1693348">(</span><span class="op" id="1693349">&amp;</span><span class="ident" id="1693350">x</span><span class="op" id="1693351">[</span><span class="num" id="1693352">0</span><span class="op" id="1693353">]</span><span class="op" id="1693354">)</span><span class="op" id="1693355">,</span>&nbsp;<span class="ident" id="1693357">unsafe</span><span class="op" id="1693363">.</span><span class="ident" id="1693364">Pointer</span><span class="op" id="1693371">(</span><span class="ident" id="1693372">p</span><span class="op" id="1693373">)</span><span class="op" id="1693374">,</span>&nbsp;<span class="builtintype" id="1693376">uintptr</span><span class="op" id="1693383">(</span><span class="ident" id="1693384">n</span><span class="op" id="1693385">)</span><span class="op" id="1693386">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693389">return</span>&nbsp;<span class="ident" id="1693396">x</span><br>
<span class="lineno"></span><span class="op" id="1693398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1693401">func</span>&nbsp;<span class="ident" id="1693406">gostringsize</span><span class="op" id="1693418">(</span><span class="ident" id="1693419">n</span>&nbsp;<span class="builtintype" id="1693421">int</span><span class="op" id="1693424">)</span>&nbsp;<span class="builtintype" id="1693426">string</span>&nbsp;<span class="op" id="1693433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1693436">s</span><span class="op" id="1693437">,</span>&nbsp;<span class="ident" id="1693439">_</span>&nbsp;<span class="op" id="1693441">:=</span>&nbsp;<span class="ident" id="1693444">rawstring</span><span class="op" id="1693453">(</span><span class="ident" id="1693454">n</span><span class="op" id="1693455">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693458">return</span>&nbsp;<span class="ident" id="1693465">s</span><br>
<span class="lineno"></span><span class="op" id="1693467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1693470">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1693484">func</span>&nbsp;<span class="ident" id="1693489">findnull</span><span class="op" id="1693497">(</span><span class="op" id="1693498">*</span><span class="builtintype" id="1693499">byte</span><span class="op" id="1693503">)</span>&nbsp;<span class="builtintype" id="1693505">int</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="1693510">func</span>&nbsp;<span class="ident" id="1693515">gostring</span><span class="op" id="1693523">(</span><span class="ident" id="1693524">p</span>&nbsp;<span class="op" id="1693526">*</span><span class="builtintype" id="1693527">byte</span><span class="op" id="1693531">)</span>&nbsp;<span class="builtintype" id="1693533">string</span>&nbsp;<span class="op" id="1693540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1693543">l</span>&nbsp;<span class="op" id="1693545">:=</span>&nbsp;<span class="ident" id="1693548">findnull</span><span class="op" id="1693556">(</span><span class="ident" id="1693557">p</span><span class="op" id="1693558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693561">if</span>&nbsp;<span class="ident" id="1693564">l</span>&nbsp;<span class="op" id="1693566">==</span>&nbsp;<span class="num" id="1693569">0</span>&nbsp;<span class="op" id="1693571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693575">return</span>&nbsp;<span class="string" id="1693582">&#34;&#34;</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1693586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1693589">s</span><span class="op" id="1693590">,</span>&nbsp;<span class="ident" id="1693592">b</span>&nbsp;<span class="op" id="1693594">:=</span>&nbsp;<span class="ident" id="1693597">rawstring</span><span class="op" id="1693606">(</span><span class="ident" id="1693607">l</span><span class="op" id="1693608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1693611">memmove</span><span class="op" id="1693618">(</span><span class="ident" id="1693619">unsafe</span><span class="op" id="1693625">.</span><span class="ident" id="1693626">Pointer</span><span class="op" id="1693633">(</span><span class="op" id="1693634">&amp;</span><span class="ident" id="1693635">b</span><span class="op" id="1693636">[</span><span class="num" id="1693637">0</span><span class="op" id="1693638">]</span><span class="op" id="1693639">)</span><span class="op" id="1693640">,</span>&nbsp;<span class="ident" id="1693642">unsafe</span><span class="op" id="1693648">.</span><span class="ident" id="1693649">Pointer</span><span class="op" id="1693656">(</span><span class="ident" id="1693657">p</span><span class="op" id="1693658">)</span><span class="op" id="1693659">,</span>&nbsp;<span class="builtintype" id="1693661">uintptr</span><span class="op" id="1693668">(</span><span class="ident" id="1693669">l</span><span class="op" id="1693670">)</span><span class="op" id="1693671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693674">return</span>&nbsp;<span class="ident" id="1693681">s</span><br>
<span class="lineno"></span><span class="op" id="1693683">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="keyword" id="1693686">func</span>&nbsp;<span class="ident" id="1693691">gostringn</span><span class="op" id="1693700">(</span><span class="ident" id="1693701">p</span>&nbsp;<span class="op" id="1693703">*</span><span class="builtintype" id="1693704">byte</span><span class="op" id="1693708">,</span>&nbsp;<span class="ident" id="1693710">l</span>&nbsp;<span class="builtintype" id="1693712">int</span><span class="op" id="1693715">)</span>&nbsp;<span class="builtintype" id="1693717">string</span>&nbsp;<span class="op" id="1693724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693727">if</span>&nbsp;<span class="ident" id="1693730">l</span>&nbsp;<span class="op" id="1693732">==</span>&nbsp;<span class="num" id="1693735">0</span>&nbsp;<span class="op" id="1693737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693741">return</span>&nbsp;<span class="string" id="1693748">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1693752">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1693755">s</span><span class="op" id="1693756">,</span>&nbsp;<span class="ident" id="1693758">b</span>&nbsp;<span class="op" id="1693760">:=</span>&nbsp;<span class="ident" id="1693763">rawstring</span><span class="op" id="1693772">(</span><span class="ident" id="1693773">l</span><span class="op" id="1693774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1693777">memmove</span><span class="op" id="1693784">(</span><span class="ident" id="1693785">unsafe</span><span class="op" id="1693791">.</span><span class="ident" id="1693792">Pointer</span><span class="op" id="1693799">(</span><span class="op" id="1693800">&amp;</span><span class="ident" id="1693801">b</span><span class="op" id="1693802">[</span><span class="num" id="1693803">0</span><span class="op" id="1693804">]</span><span class="op" id="1693805">)</span><span class="op" id="1693806">,</span>&nbsp;<span class="ident" id="1693808">unsafe</span><span class="op" id="1693814">.</span><span class="ident" id="1693815">Pointer</span><span class="op" id="1693822">(</span><span class="ident" id="1693823">p</span><span class="op" id="1693824">)</span><span class="op" id="1693825">,</span>&nbsp;<span class="builtintype" id="1693827">uintptr</span><span class="op" id="1693834">(</span><span class="ident" id="1693835">l</span><span class="op" id="1693836">)</span><span class="op" id="1693837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693840">return</span>&nbsp;<span class="ident" id="1693847">s</span><br>
<span class="lineno"></span><span class="op" id="1693849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="keyword" id="1693852">func</span>&nbsp;<span class="ident" id="1693857">index</span><span class="op" id="1693862">(</span><span class="ident" id="1693863">s</span><span class="op" id="1693864">,</span>&nbsp;<span class="ident" id="1693866">t</span>&nbsp;<span class="builtintype" id="1693868">string</span><span class="op" id="1693874">)</span>&nbsp;<span class="builtintype" id="1693876">int</span>&nbsp;<span class="op" id="1693880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693883">if</span>&nbsp;<span class="builtinfunc" id="1693886">len</span><span class="op" id="1693889">(</span><span class="ident" id="1693890">t</span><span class="op" id="1693891">)</span>&nbsp;<span class="op" id="1693893">==</span>&nbsp;<span class="num" id="1693896">0</span>&nbsp;<span class="op" id="1693898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693902">return</span>&nbsp;<span class="num" id="1693909">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1693912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693915">for</span>&nbsp;<span class="ident" id="1693919">i</span>&nbsp;<span class="op" id="1693921">:=</span>&nbsp;<span class="num" id="1693924">0</span><span class="op" id="1693925">;</span>&nbsp;<span class="ident" id="1693927">i</span>&nbsp;<span class="op" id="1693929">&lt;</span>&nbsp;<span class="builtinfunc" id="1693931">len</span><span class="op" id="1693934">(</span><span class="ident" id="1693935">s</span><span class="op" id="1693936">)</span><span class="op" id="1693937">;</span>&nbsp;<span class="ident" id="1693939">i</span><span class="op" id="1693940">++</span>&nbsp;<span class="op" id="1693943">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693947">if</span>&nbsp;<span class="ident" id="1693950">s</span><span class="op" id="1693951">[</span><span class="ident" id="1693952">i</span><span class="op" id="1693953">]</span>&nbsp;<span class="op" id="1693955">==</span>&nbsp;<span class="ident" id="1693958">t</span><span class="op" id="1693959">[</span><span class="num" id="1693960">0</span><span class="op" id="1693961">]</span>&nbsp;<span class="op" id="1693963">&amp;&amp;</span>&nbsp;<span class="ident" id="1693966">hasprefix</span><span class="op" id="1693975">(</span><span class="ident" id="1693976">s</span><span class="op" id="1693977">[</span><span class="ident" id="1693978">i</span><span class="op" id="1693979">:</span><span class="op" id="1693980">]</span><span class="op" id="1693981">,</span>&nbsp;<span class="ident" id="1693983">t</span><span class="op" id="1693984">)</span>&nbsp;<span class="op" id="1693986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1693991">return</span>&nbsp;<span class="ident" id="1693998">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1694002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1694005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1694008">return</span>&nbsp;<span class="op" id="1694015">-</span><span class="num" id="1694016">1</span><br>
<span class="lineno">290</span><span class="op" id="1694018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1694021">func</span>&nbsp;<span class="ident" id="1694026">contains</span><span class="op" id="1694034">(</span><span class="ident" id="1694035">s</span><span class="op" id="1694036">,</span>&nbsp;<span class="ident" id="1694038">t</span>&nbsp;<span class="builtintype" id="1694040">string</span><span class="op" id="1694046">)</span>&nbsp;<span class="builtintype" id="1694048">bool</span>&nbsp;<span class="op" id="1694053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1694056">return</span>&nbsp;<span class="ident" id="1694063">index</span><span class="op" id="1694068">(</span><span class="ident" id="1694069">s</span><span class="op" id="1694070">,</span>&nbsp;<span class="ident" id="1694072">t</span><span class="op" id="1694073">)</span>&nbsp;<span class="op" id="1694075">&gt;=</span>&nbsp;<span class="num" id="1694078">0</span><br>
<span class="lineno"></span><span class="op" id="1694080">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span><span class="keyword" id="1694083">func</span>&nbsp;<span class="ident" id="1694088">hasprefix</span><span class="op" id="1694097">(</span><span class="ident" id="1694098">s</span><span class="op" id="1694099">,</span>&nbsp;<span class="ident" id="1694101">t</span>&nbsp;<span class="builtintype" id="1694103">string</span><span class="op" id="1694109">)</span>&nbsp;<span class="builtintype" id="1694111">bool</span>&nbsp;<span class="op" id="1694116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1694119">return</span>&nbsp;<span class="builtinfunc" id="1694126">len</span><span class="op" id="1694129">(</span><span class="ident" id="1694130">s</span><span class="op" id="1694131">)</span>&nbsp;<span class="op" id="1694133">&gt;=</span>&nbsp;<span class="builtinfunc" id="1694136">len</span><span class="op" id="1694139">(</span><span class="ident" id="1694140">t</span><span class="op" id="1694141">)</span>&nbsp;<span class="op" id="1694143">&amp;&amp;</span>&nbsp;<span class="ident" id="1694146">s</span><span class="op" id="1694147">[</span><span class="op" id="1694148">:</span><span class="builtinfunc" id="1694149">len</span><span class="op" id="1694152">(</span><span class="ident" id="1694153">t</span><span class="op" id="1694154">)</span><span class="op" id="1694155">]</span>&nbsp;<span class="op" id="1694157">==</span>&nbsp;<span class="ident" id="1694160">t</span><br>
<span class="lineno"></span><span class="op" id="1694162">}</span>
</div>
</body>
</html>
