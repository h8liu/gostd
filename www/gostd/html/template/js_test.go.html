<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html" class="current">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7802298">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7802353">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7802407">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7802458">package</span>&nbsp;<span class="ident" id="7802466">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7802476">import</span>&nbsp;<span class="op" id="7802483">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7802486">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7802495">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7802503">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7802514">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7802524">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7802527">func</span>&nbsp;<span class="ident" id="7802532">TestNextJsCtx</span><span class="op" id="7802545">(</span><span class="ident" id="7802546">t</span>&nbsp;<span class="op" id="7802548">*</span><span class="ident" id="7802549">testing</span><span class="op" id="7802556">.</span><span class="ident" id="7802557">T</span><span class="op" id="7802558">)</span>&nbsp;<span class="op" id="7802560">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7802563">tests</span>&nbsp;<span class="op" id="7802569">:=</span>&nbsp;<span class="op" id="7802572">[</span><span class="op" id="7802573">]</span><span class="keyword" id="7802574">struct</span>&nbsp;<span class="op" id="7802581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7802585">jsCtx</span>&nbsp;<span class="ident" id="7802591">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7802599">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7802605">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7802613">}</span><span class="op" id="7802614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7802618">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7802662">{</span><span class="ident" id="7802663">jsCtxRegexp</span><span class="op" id="7802674">,</span>&nbsp;<span class="string" id="7802676">&#34;;&#34;</span><span class="op" id="7802679">}</span><span class="op" id="7802680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7802684">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7802711">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7802764">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7802827">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7802890">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7802913">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7802963">{</span><span class="ident" id="7802964">jsCtxRegexp</span><span class="op" id="7802975">,</span>&nbsp;<span class="string" id="7802977">&#34;}&#34;</span><span class="op" id="7802980">}</span><span class="op" id="7802981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7802985">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803051">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803073">{</span><span class="ident" id="7803074">jsCtxDivOp</span><span class="op" id="7803084">,</span>&nbsp;<span class="string" id="7803086">&#34;)&#34;</span><span class="op" id="7803089">}</span><span class="op" id="7803090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803094">{</span><span class="ident" id="7803095">jsCtxDivOp</span><span class="op" id="7803105">,</span>&nbsp;<span class="string" id="7803107">&#34;]&#34;</span><span class="op" id="7803110">}</span><span class="op" id="7803111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803115">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803179">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803212">{</span><span class="ident" id="7803213">jsCtxRegexp</span><span class="op" id="7803224">,</span>&nbsp;<span class="string" id="7803226">&#34;(&#34;</span><span class="op" id="7803229">}</span><span class="op" id="7803230">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803234">{</span><span class="ident" id="7803235">jsCtxRegexp</span><span class="op" id="7803246">,</span>&nbsp;<span class="string" id="7803248">&#34;[&#34;</span><span class="op" id="7803251">}</span><span class="op" id="7803252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803256">{</span><span class="ident" id="7803257">jsCtxRegexp</span><span class="op" id="7803268">,</span>&nbsp;<span class="string" id="7803270">&#34;{&#34;</span><span class="op" id="7803273">}</span><span class="op" id="7803274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803278">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803342">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803376">{</span><span class="ident" id="7803377">jsCtxRegexp</span><span class="op" id="7803388">,</span>&nbsp;<span class="string" id="7803390">&#34;=&#34;</span><span class="op" id="7803393">}</span><span class="op" id="7803394">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803398">{</span><span class="ident" id="7803399">jsCtxRegexp</span><span class="op" id="7803410">,</span>&nbsp;<span class="string" id="7803412">&#34;+=&#34;</span><span class="op" id="7803416">}</span><span class="op" id="7803417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803421">{</span><span class="ident" id="7803422">jsCtxRegexp</span><span class="op" id="7803433">,</span>&nbsp;<span class="string" id="7803435">&#34;*=&#34;</span><span class="op" id="7803439">}</span><span class="op" id="7803440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803444">{</span><span class="ident" id="7803445">jsCtxRegexp</span><span class="op" id="7803456">,</span>&nbsp;<span class="string" id="7803458">&#34;*&#34;</span><span class="op" id="7803461">}</span><span class="op" id="7803462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803466">{</span><span class="ident" id="7803467">jsCtxRegexp</span><span class="op" id="7803478">,</span>&nbsp;<span class="string" id="7803480">&#34;!&#34;</span><span class="op" id="7803483">}</span><span class="op" id="7803484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803488">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803552">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803565">{</span><span class="ident" id="7803566">jsCtxRegexp</span><span class="op" id="7803577">,</span>&nbsp;<span class="string" id="7803579">&#34;+&#34;</span><span class="op" id="7803582">}</span><span class="op" id="7803583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803587">{</span><span class="ident" id="7803588">jsCtxRegexp</span><span class="op" id="7803599">,</span>&nbsp;<span class="string" id="7803601">&#34;-&#34;</span><span class="op" id="7803604">}</span><span class="op" id="7803605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803609">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803655">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803717">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803781">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803830">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803894">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803907">{</span><span class="ident" id="7803908">jsCtxDivOp</span><span class="op" id="7803918">,</span>&nbsp;<span class="string" id="7803920">&#34;--&#34;</span><span class="op" id="7803924">}</span><span class="op" id="7803925">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803929">{</span><span class="ident" id="7803930">jsCtxDivOp</span><span class="op" id="7803940">,</span>&nbsp;<span class="string" id="7803942">&#34;++&#34;</span><span class="op" id="7803946">}</span><span class="op" id="7803947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7803951">{</span><span class="ident" id="7803952">jsCtxDivOp</span><span class="op" id="7803962">,</span>&nbsp;<span class="string" id="7803964">&#34;x--&#34;</span><span class="op" id="7803969">}</span><span class="op" id="7803970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7803974">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7804037">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804057">{</span><span class="ident" id="7804058">jsCtxRegexp</span><span class="op" id="7804069">,</span>&nbsp;<span class="string" id="7804071">&#34;x---&#34;</span><span class="op" id="7804077">}</span><span class="op" id="7804078">,</span>&nbsp;<span class="comment" id="7804080">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7804108">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7804174">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7804241">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804260">{</span><span class="ident" id="7804261">jsCtxRegexp</span><span class="op" id="7804272">,</span>&nbsp;<span class="string" id="7804274">&#34;return&#34;</span><span class="op" id="7804282">}</span><span class="op" id="7804283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804287">{</span><span class="ident" id="7804288">jsCtxRegexp</span><span class="op" id="7804299">,</span>&nbsp;<span class="string" id="7804301">&#34;return&nbsp;&#34;</span><span class="op" id="7804310">}</span><span class="op" id="7804311">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804315">{</span><span class="ident" id="7804316">jsCtxRegexp</span><span class="op" id="7804327">,</span>&nbsp;<span class="string" id="7804329">&#34;return\t&#34;</span><span class="op" id="7804339">}</span><span class="op" id="7804340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804344">{</span><span class="ident" id="7804345">jsCtxRegexp</span><span class="op" id="7804356">,</span>&nbsp;<span class="string" id="7804358">&#34;return\n&#34;</span><span class="op" id="7804368">}</span><span class="op" id="7804369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804373">{</span><span class="ident" id="7804374">jsCtxRegexp</span><span class="op" id="7804385">,</span>&nbsp;<span class="string" id="7804387">&#34;return\u2028&#34;</span><span class="op" id="7804401">}</span><span class="op" id="7804402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7804406">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7804472">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7804534">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7804600">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7804665">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7804731">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804742">{</span><span class="ident" id="7804743">jsCtxDivOp</span><span class="op" id="7804753">,</span>&nbsp;<span class="string" id="7804755">&#34;x&#34;</span><span class="op" id="7804758">}</span><span class="op" id="7804759">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804763">{</span><span class="ident" id="7804764">jsCtxDivOp</span><span class="op" id="7804774">,</span>&nbsp;<span class="string" id="7804776">&#34;x&nbsp;&#34;</span><span class="op" id="7804780">}</span><span class="op" id="7804781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804785">{</span><span class="ident" id="7804786">jsCtxDivOp</span><span class="op" id="7804796">,</span>&nbsp;<span class="string" id="7804798">&#34;x\t&#34;</span><span class="op" id="7804803">}</span><span class="op" id="7804804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804808">{</span><span class="ident" id="7804809">jsCtxDivOp</span><span class="op" id="7804819">,</span>&nbsp;<span class="string" id="7804821">&#34;x\n&#34;</span><span class="op" id="7804826">}</span><span class="op" id="7804827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804831">{</span><span class="ident" id="7804832">jsCtxDivOp</span><span class="op" id="7804842">,</span>&nbsp;<span class="string" id="7804844">&#34;x\u2028&#34;</span><span class="op" id="7804853">}</span><span class="op" id="7804854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804858">{</span><span class="ident" id="7804859">jsCtxDivOp</span><span class="op" id="7804869">,</span>&nbsp;<span class="string" id="7804871">&#34;preturn&#34;</span><span class="op" id="7804880">}</span><span class="op" id="7804881">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7804885">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804915">{</span><span class="ident" id="7804916">jsCtxDivOp</span><span class="op" id="7804926">,</span>&nbsp;<span class="string" id="7804928">&#34;0&#34;</span><span class="op" id="7804931">}</span><span class="op" id="7804932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7804936">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804991">{</span><span class="ident" id="7804992">jsCtxDivOp</span><span class="op" id="7805002">,</span>&nbsp;<span class="string" id="7805004">&#34;0.&#34;</span><span class="op" id="7805008">}</span><span class="op" id="7805009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805012">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7805016">for</span>&nbsp;<span class="ident" id="7805020">_</span><span class="op" id="7805021">,</span>&nbsp;<span class="ident" id="7805023">test</span>&nbsp;<span class="op" id="7805028">:=</span>&nbsp;<span class="keyword" id="7805031">range</span>&nbsp;<span class="ident" id="7805037">tests</span>&nbsp;<span class="op" id="7805043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7805047">if</span>&nbsp;<span class="ident" id="7805050">nextJSCtx</span><span class="op" id="7805059">(</span><span class="op" id="7805060">[</span><span class="op" id="7805061">]</span><span class="builtintype" id="7805062">byte</span><span class="op" id="7805066">(</span><span class="ident" id="7805067">test</span><span class="op" id="7805071">.</span><span class="ident" id="7805072">s</span><span class="op" id="7805073">)</span><span class="op" id="7805074">,</span>&nbsp;<span class="ident" id="7805076">jsCtxRegexp</span><span class="op" id="7805087">)</span>&nbsp;<span class="op" id="7805089">!=</span>&nbsp;<span class="ident" id="7805092">test</span><span class="op" id="7805096">.</span><span class="ident" id="7805097">jsCtx</span>&nbsp;<span class="op" id="7805103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7805108">t</span><span class="op" id="7805109">.</span><span class="ident" id="7805110">Errorf</span><span class="op" id="7805116">(</span><span class="string" id="7805117">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7805133">,</span>&nbsp;<span class="ident" id="7805135">test</span><span class="op" id="7805139">.</span><span class="ident" id="7805140">jsCtx</span><span class="op" id="7805145">,</span>&nbsp;<span class="ident" id="7805147">test</span><span class="op" id="7805151">.</span><span class="ident" id="7805152">s</span><span class="op" id="7805153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805157">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7805161">if</span>&nbsp;<span class="ident" id="7805164">nextJSCtx</span><span class="op" id="7805173">(</span><span class="op" id="7805174">[</span><span class="op" id="7805175">]</span><span class="builtintype" id="7805176">byte</span><span class="op" id="7805180">(</span><span class="ident" id="7805181">test</span><span class="op" id="7805185">.</span><span class="ident" id="7805186">s</span><span class="op" id="7805187">)</span><span class="op" id="7805188">,</span>&nbsp;<span class="ident" id="7805190">jsCtxDivOp</span><span class="op" id="7805200">)</span>&nbsp;<span class="op" id="7805202">!=</span>&nbsp;<span class="ident" id="7805205">test</span><span class="op" id="7805209">.</span><span class="ident" id="7805210">jsCtx</span>&nbsp;<span class="op" id="7805216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7805221">t</span><span class="op" id="7805222">.</span><span class="ident" id="7805223">Errorf</span><span class="op" id="7805229">(</span><span class="string" id="7805230">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7805246">,</span>&nbsp;<span class="ident" id="7805248">test</span><span class="op" id="7805252">.</span><span class="ident" id="7805253">jsCtx</span><span class="op" id="7805258">,</span>&nbsp;<span class="ident" id="7805260">test</span><span class="op" id="7805264">.</span><span class="ident" id="7805265">s</span><span class="op" id="7805266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7805277">if</span>&nbsp;<span class="ident" id="7805280">nextJSCtx</span><span class="op" id="7805289">(</span><span class="op" id="7805290">[</span><span class="op" id="7805291">]</span><span class="builtintype" id="7805292">byte</span><span class="op" id="7805296">(</span><span class="string" id="7805297">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7805302">)</span><span class="op" id="7805303">,</span>&nbsp;<span class="ident" id="7805305">jsCtxRegexp</span><span class="op" id="7805316">)</span>&nbsp;<span class="op" id="7805318">!=</span>&nbsp;<span class="ident" id="7805321">jsCtxRegexp</span>&nbsp;<span class="op" id="7805333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7805337">t</span><span class="op" id="7805338">.</span><span class="ident" id="7805339">Error</span><span class="op" id="7805344">(</span><span class="string" id="7805345">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7805359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7805366">if</span>&nbsp;<span class="ident" id="7805369">nextJSCtx</span><span class="op" id="7805378">(</span><span class="op" id="7805379">[</span><span class="op" id="7805380">]</span><span class="builtintype" id="7805381">byte</span><span class="op" id="7805385">(</span><span class="string" id="7805386">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7805391">)</span><span class="op" id="7805392">,</span>&nbsp;<span class="ident" id="7805394">jsCtxDivOp</span><span class="op" id="7805404">)</span>&nbsp;<span class="op" id="7805406">!=</span>&nbsp;<span class="ident" id="7805409">jsCtxDivOp</span>&nbsp;<span class="op" id="7805420">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7805424">t</span><span class="op" id="7805425">.</span><span class="ident" id="7805426">Error</span><span class="op" id="7805431">(</span><span class="string" id="7805432">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7805446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805449">}</span><br>
<span class="lineno"></span><span class="op" id="7805451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7805454">func</span>&nbsp;<span class="ident" id="7805459">TestJSValEscaper</span><span class="op" id="7805475">(</span><span class="ident" id="7805476">t</span>&nbsp;<span class="op" id="7805478">*</span><span class="ident" id="7805479">testing</span><span class="op" id="7805486">.</span><span class="ident" id="7805487">T</span><span class="op" id="7805488">)</span>&nbsp;<span class="op" id="7805490">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7805493">tests</span>&nbsp;<span class="op" id="7805499">:=</span>&nbsp;<span class="op" id="7805502">[</span><span class="op" id="7805503">]</span><span class="keyword" id="7805504">struct</span>&nbsp;<span class="op" id="7805511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7805515">x</span>&nbsp;&nbsp;<span class="keyword" id="7805518">interface</span><span class="op" id="7805527">{</span><span class="op" id="7805528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7805532">js</span>&nbsp;<span class="builtintype" id="7805535">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805543">}</span><span class="op" id="7805544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805548">{</span><span class="builtintype" id="7805549">int</span><span class="op" id="7805552">(</span><span class="num" id="7805553">42</span><span class="op" id="7805555">)</span><span class="op" id="7805556">,</span>&nbsp;<span class="string" id="7805558">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7805564">}</span><span class="op" id="7805565">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805569">{</span><span class="builtintype" id="7805570">uint</span><span class="op" id="7805574">(</span><span class="num" id="7805575">42</span><span class="op" id="7805577">)</span><span class="op" id="7805578">,</span>&nbsp;<span class="string" id="7805580">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7805586">}</span><span class="op" id="7805587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805591">{</span><span class="builtintype" id="7805592">int16</span><span class="op" id="7805597">(</span><span class="num" id="7805598">42</span><span class="op" id="7805600">)</span><span class="op" id="7805601">,</span>&nbsp;<span class="string" id="7805603">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7805609">}</span><span class="op" id="7805610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805614">{</span><span class="builtintype" id="7805615">uint16</span><span class="op" id="7805621">(</span><span class="num" id="7805622">42</span><span class="op" id="7805624">)</span><span class="op" id="7805625">,</span>&nbsp;<span class="string" id="7805627">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7805633">}</span><span class="op" id="7805634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805638">{</span><span class="builtintype" id="7805639">int32</span><span class="op" id="7805644">(</span><span class="op" id="7805645">-</span><span class="num" id="7805646">42</span><span class="op" id="7805648">)</span><span class="op" id="7805649">,</span>&nbsp;<span class="string" id="7805651">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7805658">}</span><span class="op" id="7805659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805663">{</span><span class="builtintype" id="7805664">uint32</span><span class="op" id="7805670">(</span><span class="num" id="7805671">42</span><span class="op" id="7805673">)</span><span class="op" id="7805674">,</span>&nbsp;<span class="string" id="7805676">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7805682">}</span><span class="op" id="7805683">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805687">{</span><span class="builtintype" id="7805688">int16</span><span class="op" id="7805693">(</span><span class="op" id="7805694">-</span><span class="num" id="7805695">42</span><span class="op" id="7805697">)</span><span class="op" id="7805698">,</span>&nbsp;<span class="string" id="7805700">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7805707">}</span><span class="op" id="7805708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805712">{</span><span class="builtintype" id="7805713">uint16</span><span class="op" id="7805719">(</span><span class="num" id="7805720">42</span><span class="op" id="7805722">)</span><span class="op" id="7805723">,</span>&nbsp;<span class="string" id="7805725">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7805731">}</span><span class="op" id="7805732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805736">{</span><span class="ident" id="7805737">int64</span><span class="op" id="7805742">(</span><span class="op" id="7805743">-</span><span class="num" id="7805744">42</span><span class="op" id="7805746">)</span><span class="op" id="7805747">,</span>&nbsp;<span class="string" id="7805749">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7805756">}</span><span class="op" id="7805757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805761">{</span><span class="ident" id="7805762">uint64</span><span class="op" id="7805768">(</span><span class="num" id="7805769">42</span><span class="op" id="7805771">)</span><span class="op" id="7805772">,</span>&nbsp;<span class="string" id="7805774">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7805780">}</span><span class="op" id="7805781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805785">{</span><span class="ident" id="7805786">uint64</span><span class="op" id="7805792">(</span><span class="num" id="7805793">1</span><span class="op" id="7805794">)</span>&nbsp;<span class="op" id="7805796">&lt;&lt;</span>&nbsp;<span class="num" id="7805799">53</span><span class="op" id="7805801">,</span>&nbsp;<span class="string" id="7805803">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="7805823">}</span><span class="op" id="7805824">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7805828">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7805880">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805934">{</span><span class="ident" id="7805935">uint64</span><span class="op" id="7805941">(</span><span class="num" id="7805942">1</span><span class="op" id="7805943">)</span><span class="op" id="7805944">&lt;&lt;</span><span class="num" id="7805946">53</span>&nbsp;<span class="op" id="7805949">+</span>&nbsp;<span class="num" id="7805951">1</span><span class="op" id="7805952">,</span>&nbsp;<span class="string" id="7805954">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="7805974">}</span><span class="op" id="7805975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7805979">{</span><span class="builtintype" id="7805980">float32</span><span class="op" id="7805987">(</span><span class="num" id="7805988">1.0</span><span class="op" id="7805991">)</span><span class="op" id="7805992">,</span>&nbsp;<span class="string" id="7805994">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7805999">}</span><span class="op" id="7806000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806004">{</span><span class="builtintype" id="7806005">float32</span><span class="op" id="7806012">(</span><span class="op" id="7806013">-</span><span class="num" id="7806014">1.0</span><span class="op" id="7806017">)</span><span class="op" id="7806018">,</span>&nbsp;<span class="string" id="7806020">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7806026">}</span><span class="op" id="7806027">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806031">{</span><span class="builtintype" id="7806032">float32</span><span class="op" id="7806039">(</span><span class="num" id="7806040">0.5</span><span class="op" id="7806043">)</span><span class="op" id="7806044">,</span>&nbsp;<span class="string" id="7806046">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7806053">}</span><span class="op" id="7806054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806058">{</span><span class="builtintype" id="7806059">float32</span><span class="op" id="7806066">(</span><span class="op" id="7806067">-</span><span class="num" id="7806068">0.5</span><span class="op" id="7806071">)</span><span class="op" id="7806072">,</span>&nbsp;<span class="string" id="7806074">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7806082">}</span><span class="op" id="7806083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806087">{</span><span class="builtintype" id="7806088">float32</span><span class="op" id="7806095">(</span><span class="num" id="7806096">1.0</span><span class="op" id="7806099">)</span>&nbsp;<span class="op" id="7806101">/</span>&nbsp;<span class="builtintype" id="7806103">float32</span><span class="op" id="7806110">(</span><span class="num" id="7806111">256</span><span class="op" id="7806114">)</span><span class="op" id="7806115">,</span>&nbsp;<span class="string" id="7806117">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="7806131">}</span><span class="op" id="7806132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806136">{</span><span class="builtintype" id="7806137">float32</span><span class="op" id="7806144">(</span><span class="num" id="7806145">0</span><span class="op" id="7806146">)</span><span class="op" id="7806147">,</span>&nbsp;<span class="string" id="7806149">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7806154">}</span><span class="op" id="7806155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806159">{</span><span class="ident" id="7806160">math</span><span class="op" id="7806164">.</span><span class="ident" id="7806165">Copysign</span><span class="op" id="7806173">(</span><span class="num" id="7806174">0</span><span class="op" id="7806175">,</span>&nbsp;<span class="op" id="7806177">-</span><span class="num" id="7806178">1</span><span class="op" id="7806179">)</span><span class="op" id="7806180">,</span>&nbsp;<span class="string" id="7806182">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7806188">}</span><span class="op" id="7806189">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806193">{</span><span class="builtintype" id="7806194">float64</span><span class="op" id="7806201">(</span><span class="num" id="7806202">1.0</span><span class="op" id="7806205">)</span><span class="op" id="7806206">,</span>&nbsp;<span class="string" id="7806208">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7806213">}</span><span class="op" id="7806214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806218">{</span><span class="builtintype" id="7806219">float64</span><span class="op" id="7806226">(</span><span class="op" id="7806227">-</span><span class="num" id="7806228">1.0</span><span class="op" id="7806231">)</span><span class="op" id="7806232">,</span>&nbsp;<span class="string" id="7806234">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7806240">}</span><span class="op" id="7806241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806245">{</span><span class="builtintype" id="7806246">float64</span><span class="op" id="7806253">(</span><span class="num" id="7806254">0.5</span><span class="op" id="7806257">)</span><span class="op" id="7806258">,</span>&nbsp;<span class="string" id="7806260">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7806267">}</span><span class="op" id="7806268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806272">{</span><span class="builtintype" id="7806273">float64</span><span class="op" id="7806280">(</span><span class="op" id="7806281">-</span><span class="num" id="7806282">0.5</span><span class="op" id="7806285">)</span><span class="op" id="7806286">,</span>&nbsp;<span class="string" id="7806288">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7806296">}</span><span class="op" id="7806297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806301">{</span><span class="builtintype" id="7806302">float64</span><span class="op" id="7806309">(</span><span class="num" id="7806310">0</span><span class="op" id="7806311">)</span><span class="op" id="7806312">,</span>&nbsp;<span class="string" id="7806314">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7806319">}</span><span class="op" id="7806320">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806324">{</span><span class="ident" id="7806325">math</span><span class="op" id="7806329">.</span><span class="ident" id="7806330">Copysign</span><span class="op" id="7806338">(</span><span class="num" id="7806339">0</span><span class="op" id="7806340">,</span>&nbsp;<span class="op" id="7806342">-</span><span class="num" id="7806343">1</span><span class="op" id="7806344">)</span><span class="op" id="7806345">,</span>&nbsp;<span class="string" id="7806347">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7806353">}</span><span class="op" id="7806354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806358">{</span><span class="string" id="7806359">&#34;&#34;</span><span class="op" id="7806361">,</span>&nbsp;<span class="string" id="7806363">`&#34;&#34;`</span><span class="op" id="7806367">}</span><span class="op" id="7806368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806372">{</span><span class="string" id="7806373">&#34;foo&#34;</span><span class="op" id="7806378">,</span>&nbsp;<span class="string" id="7806380">`&#34;foo&#34;`</span><span class="op" id="7806387">}</span><span class="op" id="7806388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7806392">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806407">{</span><span class="string" id="7806408">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="7806426">,</span>&nbsp;<span class="string" id="7806428">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="7806448">}</span><span class="op" id="7806449">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7806453">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806501">{</span><span class="string" id="7806502">&#34;\t\x0b&#34;</span><span class="op" id="7806510">,</span>&nbsp;<span class="string" id="7806512">`&#34;\t\u000b&#34;`</span><span class="op" id="7806524">}</span><span class="op" id="7806525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806529">{</span><span class="keyword" id="7806530">struct</span><span class="op" id="7806536">{</span>&nbsp;<span class="ident" id="7806538">X</span><span class="op" id="7806539">,</span>&nbsp;<span class="ident" id="7806541">Y</span>&nbsp;<span class="builtintype" id="7806543">int</span>&nbsp;<span class="op" id="7806547">}</span><span class="op" id="7806548">{</span><span class="num" id="7806549">1</span><span class="op" id="7806550">,</span>&nbsp;<span class="num" id="7806552">2</span><span class="op" id="7806553">}</span><span class="op" id="7806554">,</span>&nbsp;<span class="string" id="7806556">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="7806571">}</span><span class="op" id="7806572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806576">{</span><span class="op" id="7806577">[</span><span class="op" id="7806578">]</span><span class="keyword" id="7806579">interface</span><span class="op" id="7806588">{</span><span class="op" id="7806589">}</span><span class="op" id="7806590">{</span><span class="op" id="7806591">}</span><span class="op" id="7806592">,</span>&nbsp;<span class="string" id="7806594">&#34;[]&#34;</span><span class="op" id="7806598">}</span><span class="op" id="7806599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806603">{</span><span class="op" id="7806604">[</span><span class="op" id="7806605">]</span><span class="keyword" id="7806606">interface</span><span class="op" id="7806615">{</span><span class="op" id="7806616">}</span><span class="op" id="7806617">{</span><span class="num" id="7806618">42</span><span class="op" id="7806620">,</span>&nbsp;<span class="string" id="7806622">&#34;foo&#34;</span><span class="op" id="7806627">,</span>&nbsp;<span class="builtintype" id="7806629">nil</span><span class="op" id="7806632">}</span><span class="op" id="7806633">,</span>&nbsp;<span class="string" id="7806635">`[42,&#34;foo&#34;,null]`</span><span class="op" id="7806652">}</span><span class="op" id="7806653">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806657">{</span><span class="op" id="7806658">[</span><span class="op" id="7806659">]</span><span class="builtintype" id="7806660">string</span><span class="op" id="7806666">{</span><span class="string" id="7806667">&#34;&lt;!--&#34;</span><span class="op" id="7806673">,</span>&nbsp;<span class="string" id="7806675">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7806686">,</span>&nbsp;<span class="string" id="7806688">&#34;--&gt;&#34;</span><span class="op" id="7806693">}</span><span class="op" id="7806694">,</span>&nbsp;<span class="string" id="7806696">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="7806744">}</span><span class="op" id="7806745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806749">{</span><span class="string" id="7806750">&#34;&lt;!--&#34;</span><span class="op" id="7806756">,</span>&nbsp;<span class="string" id="7806758">`&#34;\u003c!--&#34;`</span><span class="op" id="7806771">}</span><span class="op" id="7806772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806776">{</span><span class="string" id="7806777">&#34;--&gt;&#34;</span><span class="op" id="7806782">,</span>&nbsp;<span class="string" id="7806784">`&#34;--\u003e&#34;`</span><span class="op" id="7806796">}</span><span class="op" id="7806797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806801">{</span><span class="string" id="7806802">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7806813">,</span>&nbsp;<span class="string" id="7806815">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="7806833">}</span><span class="op" id="7806834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806838">{</span><span class="string" id="7806839">&#34;]]&gt;&#34;</span><span class="op" id="7806844">,</span>&nbsp;<span class="string" id="7806846">`&#34;]]\u003e&#34;`</span><span class="op" id="7806858">}</span><span class="op" id="7806859">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806863">{</span><span class="string" id="7806864">&#34;&lt;/script&#34;</span><span class="op" id="7806874">,</span>&nbsp;<span class="string" id="7806876">`&#34;\u003c/script&#34;`</span><span class="op" id="7806893">}</span><span class="op" id="7806894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806898">{</span><span class="string" id="7806899">&#34;\U0001D11E&#34;</span><span class="op" id="7806911">,</span>&nbsp;<span class="string" id="7806913">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="7806929">}</span><span class="op" id="7806930">,</span>&nbsp;<span class="comment" id="7806932">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7806954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7806958">for</span>&nbsp;<span class="ident" id="7806962">_</span><span class="op" id="7806963">,</span>&nbsp;<span class="ident" id="7806965">test</span>&nbsp;<span class="op" id="7806970">:=</span>&nbsp;<span class="keyword" id="7806973">range</span>&nbsp;<span class="ident" id="7806979">tests</span>&nbsp;<span class="op" id="7806985">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7806989">if</span>&nbsp;<span class="ident" id="7806992">js</span>&nbsp;<span class="op" id="7806995">:=</span>&nbsp;<span class="ident" id="7806998">jsValEscaper</span><span class="op" id="7807010">(</span><span class="ident" id="7807011">test</span><span class="op" id="7807015">.</span><span class="ident" id="7807016">x</span><span class="op" id="7807017">)</span><span class="op" id="7807018">;</span>&nbsp;<span class="ident" id="7807020">js</span>&nbsp;<span class="op" id="7807023">!=</span>&nbsp;<span class="ident" id="7807026">test</span><span class="op" id="7807030">.</span><span class="ident" id="7807031">js</span>&nbsp;<span class="op" id="7807034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7807039">t</span><span class="op" id="7807040">.</span><span class="ident" id="7807041">Errorf</span><span class="op" id="7807047">(</span><span class="string" id="7807048">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7807076">,</span>&nbsp;<span class="ident" id="7807078">test</span><span class="op" id="7807082">.</span><span class="ident" id="7807083">x</span><span class="op" id="7807084">,</span>&nbsp;<span class="ident" id="7807086">test</span><span class="op" id="7807090">.</span><span class="ident" id="7807091">js</span><span class="op" id="7807093">,</span>&nbsp;<span class="ident" id="7807095">js</span><span class="op" id="7807097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7807105">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7807162">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7807179">a</span>&nbsp;<span class="op" id="7807181">:=</span>&nbsp;<span class="op" id="7807184">[</span><span class="op" id="7807185">]</span><span class="keyword" id="7807186">interface</span><span class="op" id="7807195">{</span><span class="op" id="7807196">}</span><span class="op" id="7807197">{</span><span class="ident" id="7807198">test</span><span class="op" id="7807202">.</span><span class="ident" id="7807203">x</span><span class="op" id="7807204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7807208">want</span>&nbsp;<span class="op" id="7807213">:=</span>&nbsp;<span class="string" id="7807216">&#34;[&#34;</span>&nbsp;<span class="op" id="7807220">+</span>&nbsp;<span class="ident" id="7807222">strings</span><span class="op" id="7807229">.</span><span class="ident" id="7807230">TrimSpace</span><span class="op" id="7807239">(</span><span class="ident" id="7807240">test</span><span class="op" id="7807244">.</span><span class="ident" id="7807245">js</span><span class="op" id="7807247">)</span>&nbsp;<span class="op" id="7807249">+</span>&nbsp;<span class="string" id="7807251">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7807257">if</span>&nbsp;<span class="ident" id="7807260">js</span>&nbsp;<span class="op" id="7807263">:=</span>&nbsp;<span class="ident" id="7807266">jsValEscaper</span><span class="op" id="7807278">(</span><span class="ident" id="7807279">a</span><span class="op" id="7807280">)</span><span class="op" id="7807281">;</span>&nbsp;<span class="ident" id="7807283">js</span>&nbsp;<span class="op" id="7807286">!=</span>&nbsp;<span class="ident" id="7807289">want</span>&nbsp;<span class="op" id="7807294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7807299">t</span><span class="op" id="7807300">.</span><span class="ident" id="7807301">Errorf</span><span class="op" id="7807307">(</span><span class="string" id="7807308">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7807336">,</span>&nbsp;<span class="ident" id="7807338">a</span><span class="op" id="7807339">,</span>&nbsp;<span class="ident" id="7807341">want</span><span class="op" id="7807345">,</span>&nbsp;<span class="ident" id="7807347">js</span><span class="op" id="7807349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807353">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807356">}</span><br>
<span class="lineno"></span><span class="op" id="7807358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7807361">func</span>&nbsp;<span class="ident" id="7807366">TestJSStrEscaper</span><span class="op" id="7807382">(</span><span class="ident" id="7807383">t</span>&nbsp;<span class="op" id="7807385">*</span><span class="ident" id="7807386">testing</span><span class="op" id="7807393">.</span><span class="ident" id="7807394">T</span><span class="op" id="7807395">)</span>&nbsp;<span class="op" id="7807397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7807400">tests</span>&nbsp;<span class="op" id="7807406">:=</span>&nbsp;<span class="op" id="7807409">[</span><span class="op" id="7807410">]</span><span class="keyword" id="7807411">struct</span>&nbsp;<span class="op" id="7807418">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7807422">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7807426">interface</span><span class="op" id="7807435">{</span><span class="op" id="7807436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7807440">esc</span>&nbsp;<span class="builtintype" id="7807444">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807452">}</span><span class="op" id="7807453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807457">{</span><span class="string" id="7807458">&#34;&#34;</span><span class="op" id="7807460">,</span>&nbsp;<span class="string" id="7807462">``</span><span class="op" id="7807464">}</span><span class="op" id="7807465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807469">{</span><span class="string" id="7807470">&#34;foo&#34;</span><span class="op" id="7807475">,</span>&nbsp;<span class="string" id="7807477">`foo`</span><span class="op" id="7807482">}</span><span class="op" id="7807483">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807487">{</span><span class="string" id="7807488">&#34;\u0000&#34;</span><span class="op" id="7807496">,</span>&nbsp;<span class="string" id="7807498">`\0`</span><span class="op" id="7807502">}</span><span class="op" id="7807503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807507">{</span><span class="string" id="7807508">&#34;\t&#34;</span><span class="op" id="7807512">,</span>&nbsp;<span class="string" id="7807514">`\t`</span><span class="op" id="7807518">}</span><span class="op" id="7807519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807523">{</span><span class="string" id="7807524">&#34;\n&#34;</span><span class="op" id="7807528">,</span>&nbsp;<span class="string" id="7807530">`\n`</span><span class="op" id="7807534">}</span><span class="op" id="7807535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807539">{</span><span class="string" id="7807540">&#34;\r&#34;</span><span class="op" id="7807544">,</span>&nbsp;<span class="string" id="7807546">`\r`</span><span class="op" id="7807550">}</span><span class="op" id="7807551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807555">{</span><span class="string" id="7807556">&#34;\u2028&#34;</span><span class="op" id="7807564">,</span>&nbsp;<span class="string" id="7807566">`\u2028`</span><span class="op" id="7807574">}</span><span class="op" id="7807575">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807579">{</span><span class="string" id="7807580">&#34;\u2029&#34;</span><span class="op" id="7807588">,</span>&nbsp;<span class="string" id="7807590">`\u2029`</span><span class="op" id="7807598">}</span><span class="op" id="7807599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807603">{</span><span class="string" id="7807604">&#34;\\&#34;</span><span class="op" id="7807608">,</span>&nbsp;<span class="string" id="7807610">`\\`</span><span class="op" id="7807614">}</span><span class="op" id="7807615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807619">{</span><span class="string" id="7807620">&#34;\\n&#34;</span><span class="op" id="7807625">,</span>&nbsp;<span class="string" id="7807627">`\\n`</span><span class="op" id="7807632">}</span><span class="op" id="7807633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807637">{</span><span class="string" id="7807638">&#34;foo\r\nbar&#34;</span><span class="op" id="7807650">,</span>&nbsp;<span class="string" id="7807652">`foo\r\nbar`</span><span class="op" id="7807664">}</span><span class="op" id="7807665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7807669">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807705">{</span><span class="string" id="7807706">`&#34;`</span><span class="op" id="7807709">,</span>&nbsp;<span class="string" id="7807711">`\x22`</span><span class="op" id="7807717">}</span><span class="op" id="7807718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807722">{</span><span class="string" id="7807723">`&#39;`</span><span class="op" id="7807726">,</span>&nbsp;<span class="string" id="7807728">`\x27`</span><span class="op" id="7807734">}</span><span class="op" id="7807735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7807739">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807794">{</span><span class="string" id="7807795">`&amp;amp;`</span><span class="op" id="7807802">,</span>&nbsp;<span class="string" id="7807804">`\x26amp;`</span><span class="op" id="7807814">}</span><span class="op" id="7807815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7807819">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807882">{</span><span class="string" id="7807883">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7807894">,</span>&nbsp;<span class="string" id="7807896">`\x3c\/script\x3e`</span><span class="op" id="7807914">}</span><span class="op" id="7807915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807919">{</span><span class="string" id="7807920">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7807931">,</span>&nbsp;<span class="string" id="7807933">`\x3c![CDATA[`</span><span class="op" id="7807947">}</span><span class="op" id="7807948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7807952">{</span><span class="string" id="7807953">&#34;]]&gt;&#34;</span><span class="op" id="7807958">,</span>&nbsp;<span class="string" id="7807960">`]]\x3e`</span><span class="op" id="7807968">}</span><span class="op" id="7807969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7807973">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7808045">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7808109">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7808170">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7808217">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7808281">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7808348">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7808414">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7808474">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7808538">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7808589">{</span><span class="string" id="7808590">&#34;&lt;!--&#34;</span><span class="op" id="7808596">,</span>&nbsp;<span class="string" id="7808598">`\x3c!--`</span><span class="op" id="7808607">}</span><span class="op" id="7808608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7808612">{</span><span class="string" id="7808613">&#34;--&gt;&#34;</span><span class="op" id="7808618">,</span>&nbsp;<span class="string" id="7808620">`--\x3e`</span><span class="op" id="7808628">}</span><span class="op" id="7808629">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7808633">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7808693">{</span><span class="string" id="7808694">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="7808737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7808742">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="7808798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7808802">}</span><span class="op" id="7808803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7808807">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7808835">{</span><span class="string" id="7808836">&#34;foo\xA0bar&#34;</span><span class="op" id="7808848">,</span>&nbsp;<span class="string" id="7808850">&#34;foo\xA0bar&#34;</span><span class="op" id="7808862">}</span><span class="op" id="7808863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7808867">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7808902">{</span><span class="string" id="7808903">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7808923">,</span>&nbsp;<span class="string" id="7808925">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7808945">}</span><span class="op" id="7808946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7808949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7808953">for</span>&nbsp;<span class="ident" id="7808957">_</span><span class="op" id="7808958">,</span>&nbsp;<span class="ident" id="7808960">test</span>&nbsp;<span class="op" id="7808965">:=</span>&nbsp;<span class="keyword" id="7808968">range</span>&nbsp;<span class="ident" id="7808974">tests</span>&nbsp;<span class="op" id="7808980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7808984">esc</span>&nbsp;<span class="op" id="7808988">:=</span>&nbsp;<span class="ident" id="7808991">jsStrEscaper</span><span class="op" id="7809003">(</span><span class="ident" id="7809004">test</span><span class="op" id="7809008">.</span><span class="ident" id="7809009">x</span><span class="op" id="7809010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7809014">if</span>&nbsp;<span class="ident" id="7809017">esc</span>&nbsp;<span class="op" id="7809021">!=</span>&nbsp;<span class="ident" id="7809024">test</span><span class="op" id="7809028">.</span><span class="ident" id="7809029">esc</span>&nbsp;<span class="op" id="7809033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7809038">t</span><span class="op" id="7809039">.</span><span class="ident" id="7809040">Errorf</span><span class="op" id="7809046">(</span><span class="string" id="7809047">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7809067">,</span>&nbsp;<span class="ident" id="7809069">test</span><span class="op" id="7809073">.</span><span class="ident" id="7809074">x</span><span class="op" id="7809075">,</span>&nbsp;<span class="ident" id="7809077">test</span><span class="op" id="7809081">.</span><span class="ident" id="7809082">esc</span><span class="op" id="7809085">,</span>&nbsp;<span class="ident" id="7809087">esc</span><span class="op" id="7809090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809094">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809097">}</span><br>
<span class="lineno"></span><span class="op" id="7809099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7809102">func</span>&nbsp;<span class="ident" id="7809107">TestJSRegexpEscaper</span><span class="op" id="7809126">(</span><span class="ident" id="7809127">t</span>&nbsp;<span class="op" id="7809129">*</span><span class="ident" id="7809130">testing</span><span class="op" id="7809137">.</span><span class="ident" id="7809138">T</span><span class="op" id="7809139">)</span>&nbsp;<span class="op" id="7809141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7809144">tests</span>&nbsp;<span class="op" id="7809150">:=</span>&nbsp;<span class="op" id="7809153">[</span><span class="op" id="7809154">]</span><span class="keyword" id="7809155">struct</span>&nbsp;<span class="op" id="7809162">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7809166">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7809170">interface</span><span class="op" id="7809179">{</span><span class="op" id="7809180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7809184">esc</span>&nbsp;<span class="builtintype" id="7809188">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809196">}</span><span class="op" id="7809197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809201">{</span><span class="string" id="7809202">&#34;&#34;</span><span class="op" id="7809204">,</span>&nbsp;<span class="string" id="7809206">`(?:)`</span><span class="op" id="7809212">}</span><span class="op" id="7809213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809217">{</span><span class="string" id="7809218">&#34;foo&#34;</span><span class="op" id="7809223">,</span>&nbsp;<span class="string" id="7809225">`foo`</span><span class="op" id="7809230">}</span><span class="op" id="7809231">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809235">{</span><span class="string" id="7809236">&#34;\u0000&#34;</span><span class="op" id="7809244">,</span>&nbsp;<span class="string" id="7809246">`\0`</span><span class="op" id="7809250">}</span><span class="op" id="7809251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809255">{</span><span class="string" id="7809256">&#34;\t&#34;</span><span class="op" id="7809260">,</span>&nbsp;<span class="string" id="7809262">`\t`</span><span class="op" id="7809266">}</span><span class="op" id="7809267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809271">{</span><span class="string" id="7809272">&#34;\n&#34;</span><span class="op" id="7809276">,</span>&nbsp;<span class="string" id="7809278">`\n`</span><span class="op" id="7809282">}</span><span class="op" id="7809283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809287">{</span><span class="string" id="7809288">&#34;\r&#34;</span><span class="op" id="7809292">,</span>&nbsp;<span class="string" id="7809294">`\r`</span><span class="op" id="7809298">}</span><span class="op" id="7809299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809303">{</span><span class="string" id="7809304">&#34;\u2028&#34;</span><span class="op" id="7809312">,</span>&nbsp;<span class="string" id="7809314">`\u2028`</span><span class="op" id="7809322">}</span><span class="op" id="7809323">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809327">{</span><span class="string" id="7809328">&#34;\u2029&#34;</span><span class="op" id="7809336">,</span>&nbsp;<span class="string" id="7809338">`\u2029`</span><span class="op" id="7809346">}</span><span class="op" id="7809347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809351">{</span><span class="string" id="7809352">&#34;\\&#34;</span><span class="op" id="7809356">,</span>&nbsp;<span class="string" id="7809358">`\\`</span><span class="op" id="7809362">}</span><span class="op" id="7809363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809367">{</span><span class="string" id="7809368">&#34;\\n&#34;</span><span class="op" id="7809373">,</span>&nbsp;<span class="string" id="7809375">`\\n`</span><span class="op" id="7809380">}</span><span class="op" id="7809381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809385">{</span><span class="string" id="7809386">&#34;foo\r\nbar&#34;</span><span class="op" id="7809398">,</span>&nbsp;<span class="string" id="7809400">`foo\r\nbar`</span><span class="op" id="7809412">}</span><span class="op" id="7809413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7809417">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809453">{</span><span class="string" id="7809454">`&#34;`</span><span class="op" id="7809457">,</span>&nbsp;<span class="string" id="7809459">`\x22`</span><span class="op" id="7809465">}</span><span class="op" id="7809466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809470">{</span><span class="string" id="7809471">`&#39;`</span><span class="op" id="7809474">,</span>&nbsp;<span class="string" id="7809476">`\x27`</span><span class="op" id="7809482">}</span><span class="op" id="7809483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7809487">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809542">{</span><span class="string" id="7809543">`&amp;amp;`</span><span class="op" id="7809550">,</span>&nbsp;<span class="string" id="7809552">`\x26amp;`</span><span class="op" id="7809562">}</span><span class="op" id="7809563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7809567">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809630">{</span><span class="string" id="7809631">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7809642">,</span>&nbsp;<span class="string" id="7809644">`\x3c\/script\x3e`</span><span class="op" id="7809662">}</span><span class="op" id="7809663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809667">{</span><span class="string" id="7809668">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7809679">,</span>&nbsp;<span class="string" id="7809681">`\x3c!\[CDATA\[`</span><span class="op" id="7809697">}</span><span class="op" id="7809698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809702">{</span><span class="string" id="7809703">&#34;]]&gt;&#34;</span><span class="op" id="7809708">,</span>&nbsp;<span class="string" id="7809710">`\]\]\x3e`</span><span class="op" id="7809720">}</span><span class="op" id="7809721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7809725">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809751">{</span><span class="string" id="7809752">&#34;&lt;!--&#34;</span><span class="op" id="7809758">,</span>&nbsp;<span class="string" id="7809760">`\x3c!\-\-`</span><span class="op" id="7809771">}</span><span class="op" id="7809772">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809776">{</span><span class="string" id="7809777">&#34;--&gt;&#34;</span><span class="op" id="7809782">,</span>&nbsp;<span class="string" id="7809784">`\-\-\x3e`</span><span class="op" id="7809794">}</span><span class="op" id="7809795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809799">{</span><span class="string" id="7809800">&#34;*&#34;</span><span class="op" id="7809803">,</span>&nbsp;<span class="string" id="7809805">`\*`</span><span class="op" id="7809809">}</span><span class="op" id="7809810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809814">{</span><span class="string" id="7809815">&#34;+&#34;</span><span class="op" id="7809818">,</span>&nbsp;<span class="string" id="7809820">`\x2b`</span><span class="op" id="7809826">}</span><span class="op" id="7809827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809831">{</span><span class="string" id="7809832">&#34;?&#34;</span><span class="op" id="7809835">,</span>&nbsp;<span class="string" id="7809837">`\?`</span><span class="op" id="7809841">}</span><span class="op" id="7809842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809846">{</span><span class="string" id="7809847">&#34;[](){}&#34;</span><span class="op" id="7809855">,</span>&nbsp;<span class="string" id="7809857">`\[\]\(\)\{\}`</span><span class="op" id="7809871">}</span><span class="op" id="7809872">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809876">{</span><span class="string" id="7809877">&#34;$foo|x.y&#34;</span><span class="op" id="7809887">,</span>&nbsp;<span class="string" id="7809889">`\$foo\|x\.y`</span><span class="op" id="7809902">}</span><span class="op" id="7809903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809907">{</span><span class="string" id="7809908">&#34;x^y&#34;</span><span class="op" id="7809913">,</span>&nbsp;<span class="string" id="7809915">`x\^y`</span><span class="op" id="7809921">}</span><span class="op" id="7809922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7809925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7809929">for</span>&nbsp;<span class="ident" id="7809933">_</span><span class="op" id="7809934">,</span>&nbsp;<span class="ident" id="7809936">test</span>&nbsp;<span class="op" id="7809941">:=</span>&nbsp;<span class="keyword" id="7809944">range</span>&nbsp;<span class="ident" id="7809950">tests</span>&nbsp;<span class="op" id="7809956">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7809960">esc</span>&nbsp;<span class="op" id="7809964">:=</span>&nbsp;<span class="ident" id="7809967">jsRegexpEscaper</span><span class="op" id="7809982">(</span><span class="ident" id="7809983">test</span><span class="op" id="7809987">.</span><span class="ident" id="7809988">x</span><span class="op" id="7809989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7809993">if</span>&nbsp;<span class="ident" id="7809996">esc</span>&nbsp;<span class="op" id="7810000">!=</span>&nbsp;<span class="ident" id="7810003">test</span><span class="op" id="7810007">.</span><span class="ident" id="7810008">esc</span>&nbsp;<span class="op" id="7810012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7810017">t</span><span class="op" id="7810018">.</span><span class="ident" id="7810019">Errorf</span><span class="op" id="7810025">(</span><span class="string" id="7810026">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7810046">,</span>&nbsp;<span class="ident" id="7810048">test</span><span class="op" id="7810052">.</span><span class="ident" id="7810053">x</span><span class="op" id="7810054">,</span>&nbsp;<span class="ident" id="7810056">test</span><span class="op" id="7810060">.</span><span class="ident" id="7810061">esc</span><span class="op" id="7810064">,</span>&nbsp;<span class="ident" id="7810066">esc</span><span class="op" id="7810069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7810073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7810076">}</span><br>
<span class="lineno">265</span><span class="op" id="7810078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7810081">func</span>&nbsp;<span class="ident" id="7810086">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="7810129">(</span><span class="ident" id="7810130">t</span>&nbsp;<span class="op" id="7810132">*</span><span class="ident" id="7810133">testing</span><span class="op" id="7810140">.</span><span class="ident" id="7810141">T</span><span class="op" id="7810142">)</span>&nbsp;<span class="op" id="7810144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7810147">input</span>&nbsp;<span class="op" id="7810153">:=</span>&nbsp;<span class="op" id="7810156">(</span><span class="string" id="7810157">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="7810218">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810222">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7810289">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810293">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="7810312">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810316">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="7810335">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810339">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7810358">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810362">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="7810381">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810385">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7810404">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810408">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7810430">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810434">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7810476">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7810480">tests</span>&nbsp;<span class="op" id="7810486">:=</span>&nbsp;<span class="op" id="7810489">[</span><span class="op" id="7810490">]</span><span class="keyword" id="7810491">struct</span>&nbsp;<span class="op" id="7810498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7810502">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7810510">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7810519">escaper</span>&nbsp;<span class="keyword" id="7810527">func</span><span class="op" id="7810531">(</span><span class="op" id="7810532">...</span><span class="keyword" id="7810535">interface</span><span class="op" id="7810544">{</span><span class="op" id="7810545">}</span><span class="op" id="7810546">)</span>&nbsp;<span class="builtintype" id="7810548">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7810557">escaped</span>&nbsp;<span class="builtintype" id="7810565">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7810573">}</span><span class="op" id="7810574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7810578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810583">&#34;jsStrEscaper&#34;</span><span class="op" id="7810597">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7810602">jsStrEscaper</span><span class="op" id="7810614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810619">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7810653">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810659">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7810691">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810697">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7810732">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810738">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7810773">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810779">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="7810811">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810817">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="7810842">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810848">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7810867">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810873">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="7810893">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810899">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7810918">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810924">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7810946">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810952">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7810996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7811000">}</span><span class="op" id="7811001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7811005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811010">&#34;jsRegexpEscaper&#34;</span><span class="op" id="7811027">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7811032">jsRegexpEscaper</span><span class="op" id="7811047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811052">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7811086">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811092">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7811124">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811130">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7811165">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811171">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7811206">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811212">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="7811250">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811256">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="7811282">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811288">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7811307">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811313">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="7811336">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811342">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7811361">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811367">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="7811388">+</span>&nbsp;<span class="string" id="7811390">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="7811399">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811405">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7811449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7811453">}</span><span class="op" id="7811454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7811457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7811461">for</span>&nbsp;<span class="ident" id="7811465">_</span><span class="op" id="7811466">,</span>&nbsp;<span class="ident" id="7811468">test</span>&nbsp;<span class="op" id="7811473">:=</span>&nbsp;<span class="keyword" id="7811476">range</span>&nbsp;<span class="ident" id="7811482">tests</span>&nbsp;<span class="op" id="7811488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7811492">if</span>&nbsp;<span class="ident" id="7811495">s</span>&nbsp;<span class="op" id="7811497">:=</span>&nbsp;<span class="ident" id="7811500">test</span><span class="op" id="7811504">.</span><span class="ident" id="7811505">escaper</span><span class="op" id="7811512">(</span><span class="ident" id="7811513">input</span><span class="op" id="7811518">)</span><span class="op" id="7811519">;</span>&nbsp;<span class="ident" id="7811521">s</span>&nbsp;<span class="op" id="7811523">!=</span>&nbsp;<span class="ident" id="7811526">test</span><span class="op" id="7811530">.</span><span class="ident" id="7811531">escaped</span>&nbsp;<span class="op" id="7811539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7811544">t</span><span class="op" id="7811545">.</span><span class="ident" id="7811546">Errorf</span><span class="op" id="7811552">(</span><span class="string" id="7811553">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7811585">,</span>&nbsp;<span class="ident" id="7811587">test</span><span class="op" id="7811591">.</span><span class="ident" id="7811592">name</span><span class="op" id="7811596">,</span>&nbsp;<span class="ident" id="7811598">test</span><span class="op" id="7811602">.</span><span class="ident" id="7811603">escaped</span><span class="op" id="7811610">,</span>&nbsp;<span class="ident" id="7811612">s</span><span class="op" id="7811613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7811618">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7811629">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7811634">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7811684">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7811733">var</span>&nbsp;<span class="ident" id="7811737">buf</span>&nbsp;<span class="ident" id="7811741">bytes</span><span class="op" id="7811746">.</span><span class="ident" id="7811747">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7811756">for</span>&nbsp;<span class="ident" id="7811760">_</span><span class="op" id="7811761">,</span>&nbsp;<span class="ident" id="7811763">c</span>&nbsp;<span class="op" id="7811765">:=</span>&nbsp;<span class="keyword" id="7811768">range</span>&nbsp;<span class="ident" id="7811774">input</span>&nbsp;<span class="op" id="7811780">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7811785">buf</span><span class="op" id="7811788">.</span><span class="ident" id="7811789">WriteString</span><span class="op" id="7811800">(</span><span class="ident" id="7811801">test</span><span class="op" id="7811805">.</span><span class="ident" id="7811806">escaper</span><span class="op" id="7811813">(</span><span class="builtintype" id="7811814">string</span><span class="op" id="7811820">(</span><span class="ident" id="7811821">c</span><span class="op" id="7811822">)</span><span class="op" id="7811823">)</span><span class="op" id="7811824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7811828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7811833">if</span>&nbsp;<span class="ident" id="7811836">s</span>&nbsp;<span class="op" id="7811838">:=</span>&nbsp;<span class="ident" id="7811841">buf</span><span class="op" id="7811844">.</span><span class="ident" id="7811845">String</span><span class="op" id="7811851">(</span><span class="op" id="7811852">)</span><span class="op" id="7811853">;</span>&nbsp;<span class="ident" id="7811855">s</span>&nbsp;<span class="op" id="7811857">!=</span>&nbsp;<span class="ident" id="7811860">test</span><span class="op" id="7811864">.</span><span class="ident" id="7811865">escaped</span>&nbsp;<span class="op" id="7811873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7811878">t</span><span class="op" id="7811879">.</span><span class="ident" id="7811880">Errorf</span><span class="op" id="7811886">(</span><span class="string" id="7811887">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7811924">,</span>&nbsp;<span class="ident" id="7811926">test</span><span class="op" id="7811930">.</span><span class="ident" id="7811931">name</span><span class="op" id="7811935">,</span>&nbsp;<span class="ident" id="7811937">test</span><span class="op" id="7811941">.</span><span class="ident" id="7811942">escaped</span><span class="op" id="7811949">,</span>&nbsp;<span class="ident" id="7811951">s</span><span class="op" id="7811952">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7811957">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7811968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7811971">}</span><br>
<span class="lineno"></span><span class="op" id="7811973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="7811976">func</span>&nbsp;<span class="ident" id="7811981">BenchmarkJSValEscaperWithNum</span><span class="op" id="7812009">(</span><span class="ident" id="7812010">b</span>&nbsp;<span class="op" id="7812012">*</span><span class="ident" id="7812013">testing</span><span class="op" id="7812020">.</span><span class="ident" id="7812021">B</span><span class="op" id="7812022">)</span>&nbsp;<span class="op" id="7812024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7812027">for</span>&nbsp;<span class="ident" id="7812031">i</span>&nbsp;<span class="op" id="7812033">:=</span>&nbsp;<span class="num" id="7812036">0</span><span class="op" id="7812037">;</span>&nbsp;<span class="ident" id="7812039">i</span>&nbsp;<span class="op" id="7812041">&lt;</span>&nbsp;<span class="ident" id="7812043">b</span><span class="op" id="7812044">.</span><span class="ident" id="7812045">N</span><span class="op" id="7812046">;</span>&nbsp;<span class="ident" id="7812048">i</span><span class="op" id="7812049">++</span>&nbsp;<span class="op" id="7812052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812056">jsValEscaper</span><span class="op" id="7812068">(</span><span class="num" id="7812069">3.141592654</span><span class="op" id="7812080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7812083">}</span><br>
<span class="lineno"></span><span class="op" id="7812085">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7812088">func</span>&nbsp;<span class="ident" id="7812093">BenchmarkJSValEscaperWithStr</span><span class="op" id="7812121">(</span><span class="ident" id="7812122">b</span>&nbsp;<span class="op" id="7812124">*</span><span class="ident" id="7812125">testing</span><span class="op" id="7812132">.</span><span class="ident" id="7812133">B</span><span class="op" id="7812134">)</span>&nbsp;<span class="op" id="7812136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7812139">for</span>&nbsp;<span class="ident" id="7812143">i</span>&nbsp;<span class="op" id="7812145">:=</span>&nbsp;<span class="num" id="7812148">0</span><span class="op" id="7812149">;</span>&nbsp;<span class="ident" id="7812151">i</span>&nbsp;<span class="op" id="7812153">&lt;</span>&nbsp;<span class="ident" id="7812155">b</span><span class="op" id="7812156">.</span><span class="ident" id="7812157">N</span><span class="op" id="7812158">;</span>&nbsp;<span class="ident" id="7812160">i</span><span class="op" id="7812161">++</span>&nbsp;<span class="op" id="7812164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812168">jsValEscaper</span><span class="op" id="7812180">(</span><span class="string" id="7812181">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7812302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7812305">}</span><br>
<span class="lineno">345</span><span class="op" id="7812307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7812310">func</span>&nbsp;<span class="ident" id="7812315">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="7812353">(</span><span class="ident" id="7812354">b</span>&nbsp;<span class="op" id="7812356">*</span><span class="ident" id="7812357">testing</span><span class="op" id="7812364">.</span><span class="ident" id="7812365">B</span><span class="op" id="7812366">)</span>&nbsp;<span class="op" id="7812368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7812371">for</span>&nbsp;<span class="ident" id="7812375">i</span>&nbsp;<span class="op" id="7812377">:=</span>&nbsp;<span class="num" id="7812380">0</span><span class="op" id="7812381">;</span>&nbsp;<span class="ident" id="7812383">i</span>&nbsp;<span class="op" id="7812385">&lt;</span>&nbsp;<span class="ident" id="7812387">b</span><span class="op" id="7812388">.</span><span class="ident" id="7812389">N</span><span class="op" id="7812390">;</span>&nbsp;<span class="ident" id="7812392">i</span><span class="op" id="7812393">++</span>&nbsp;<span class="op" id="7812396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812400">jsValEscaper</span><span class="op" id="7812412">(</span><span class="string" id="7812413">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7812459">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7812462">}</span><br>
<span class="lineno"></span><span class="op" id="7812464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7812467">func</span>&nbsp;<span class="ident" id="7812472">BenchmarkJSValEscaperWithObj</span><span class="op" id="7812500">(</span><span class="ident" id="7812501">b</span>&nbsp;<span class="op" id="7812503">*</span><span class="ident" id="7812504">testing</span><span class="op" id="7812511">.</span><span class="ident" id="7812512">B</span><span class="op" id="7812513">)</span>&nbsp;<span class="op" id="7812515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812518">o</span>&nbsp;<span class="op" id="7812520">:=</span>&nbsp;<span class="keyword" id="7812523">struct</span>&nbsp;<span class="op" id="7812530">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812534">S</span>&nbsp;<span class="builtintype" id="7812536">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812545">N</span>&nbsp;<span class="builtintype" id="7812547">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7812552">}</span><span class="op" id="7812553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7812557">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="7812684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7812688">42</span><span class="op" id="7812690">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7812693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7812696">for</span>&nbsp;<span class="ident" id="7812700">i</span>&nbsp;<span class="op" id="7812702">:=</span>&nbsp;<span class="num" id="7812705">0</span><span class="op" id="7812706">;</span>&nbsp;<span class="ident" id="7812708">i</span>&nbsp;<span class="op" id="7812710">&lt;</span>&nbsp;<span class="ident" id="7812712">b</span><span class="op" id="7812713">.</span><span class="ident" id="7812714">N</span><span class="op" id="7812715">;</span>&nbsp;<span class="ident" id="7812717">i</span><span class="op" id="7812718">++</span>&nbsp;<span class="op" id="7812721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812725">jsValEscaper</span><span class="op" id="7812737">(</span><span class="ident" id="7812738">o</span><span class="op" id="7812739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7812742">}</span><br>
<span class="lineno"></span><span class="op" id="7812744">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7812747">func</span>&nbsp;<span class="ident" id="7812752">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="7812790">(</span><span class="ident" id="7812791">b</span>&nbsp;<span class="op" id="7812793">*</span><span class="ident" id="7812794">testing</span><span class="op" id="7812801">.</span><span class="ident" id="7812802">B</span><span class="op" id="7812803">)</span>&nbsp;<span class="op" id="7812805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812808">o</span>&nbsp;<span class="op" id="7812810">:=</span>&nbsp;<span class="keyword" id="7812813">struct</span>&nbsp;<span class="op" id="7812820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812824">S</span>&nbsp;<span class="builtintype" id="7812826">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812835">N</span>&nbsp;<span class="builtintype" id="7812837">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7812842">}</span><span class="op" id="7812843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7812847">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7812893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7812897">42</span><span class="op" id="7812899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7812902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7812905">for</span>&nbsp;<span class="ident" id="7812909">i</span>&nbsp;<span class="op" id="7812911">:=</span>&nbsp;<span class="num" id="7812914">0</span><span class="op" id="7812915">;</span>&nbsp;<span class="ident" id="7812917">i</span>&nbsp;<span class="op" id="7812919">&lt;</span>&nbsp;<span class="ident" id="7812921">b</span><span class="op" id="7812922">.</span><span class="ident" id="7812923">N</span><span class="op" id="7812924">;</span>&nbsp;<span class="ident" id="7812926">i</span><span class="op" id="7812927">++</span>&nbsp;<span class="op" id="7812930">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812934">jsValEscaper</span><span class="op" id="7812946">(</span><span class="ident" id="7812947">o</span><span class="op" id="7812948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7812951">}</span><br>
<span class="lineno"></span><span class="op" id="7812953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7812956">func</span>&nbsp;<span class="ident" id="7812961">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="7812992">(</span><span class="ident" id="7812993">b</span>&nbsp;<span class="op" id="7812995">*</span><span class="ident" id="7812996">testing</span><span class="op" id="7813003">.</span><span class="ident" id="7813004">B</span><span class="op" id="7813005">)</span>&nbsp;<span class="op" id="7813007">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7813010">for</span>&nbsp;<span class="ident" id="7813014">i</span>&nbsp;<span class="op" id="7813016">:=</span>&nbsp;<span class="num" id="7813019">0</span><span class="op" id="7813020">;</span>&nbsp;<span class="ident" id="7813022">i</span>&nbsp;<span class="op" id="7813024">&lt;</span>&nbsp;<span class="ident" id="7813026">b</span><span class="op" id="7813027">.</span><span class="ident" id="7813028">N</span><span class="op" id="7813029">;</span>&nbsp;<span class="ident" id="7813031">i</span><span class="op" id="7813032">++</span>&nbsp;<span class="op" id="7813035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813039">jsStrEscaper</span><span class="op" id="7813051">(</span><span class="string" id="7813052">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="7813099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7813102">}</span><br>
<span class="lineno"></span><span class="op" id="7813104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="7813107">func</span>&nbsp;<span class="ident" id="7813112">BenchmarkJSStrEscaper</span><span class="op" id="7813133">(</span><span class="ident" id="7813134">b</span>&nbsp;<span class="op" id="7813136">*</span><span class="ident" id="7813137">testing</span><span class="op" id="7813144">.</span><span class="ident" id="7813145">B</span><span class="op" id="7813146">)</span>&nbsp;<span class="op" id="7813148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7813151">for</span>&nbsp;<span class="ident" id="7813155">i</span>&nbsp;<span class="op" id="7813157">:=</span>&nbsp;<span class="num" id="7813160">0</span><span class="op" id="7813161">;</span>&nbsp;<span class="ident" id="7813163">i</span>&nbsp;<span class="op" id="7813165">&lt;</span>&nbsp;<span class="ident" id="7813167">b</span><span class="op" id="7813168">.</span><span class="ident" id="7813169">N</span><span class="op" id="7813170">;</span>&nbsp;<span class="ident" id="7813172">i</span><span class="op" id="7813173">++</span>&nbsp;<span class="op" id="7813176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813180">jsStrEscaper</span><span class="op" id="7813192">(</span><span class="string" id="7813193">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7813314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7813317">}</span><br>
<span class="lineno"></span><span class="op" id="7813319">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="7813322">func</span>&nbsp;<span class="ident" id="7813327">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="7813361">(</span><span class="ident" id="7813362">b</span>&nbsp;<span class="op" id="7813364">*</span><span class="ident" id="7813365">testing</span><span class="op" id="7813372">.</span><span class="ident" id="7813373">B</span><span class="op" id="7813374">)</span>&nbsp;<span class="op" id="7813376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7813379">for</span>&nbsp;<span class="ident" id="7813383">i</span>&nbsp;<span class="op" id="7813385">:=</span>&nbsp;<span class="num" id="7813388">0</span><span class="op" id="7813389">;</span>&nbsp;<span class="ident" id="7813391">i</span>&nbsp;<span class="op" id="7813393">&lt;</span>&nbsp;<span class="ident" id="7813395">b</span><span class="op" id="7813396">.</span><span class="ident" id="7813397">N</span><span class="op" id="7813398">;</span>&nbsp;<span class="ident" id="7813400">i</span><span class="op" id="7813401">++</span>&nbsp;<span class="op" id="7813404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813408">jsRegexpEscaper</span><span class="op" id="7813423">(</span><span class="string" id="7813424">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7813470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7813473">}</span><br>
<span class="lineno">395</span><span class="op" id="7813475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7813478">func</span>&nbsp;<span class="ident" id="7813483">BenchmarkJSRegexpEscaper</span><span class="op" id="7813507">(</span><span class="ident" id="7813508">b</span>&nbsp;<span class="op" id="7813510">*</span><span class="ident" id="7813511">testing</span><span class="op" id="7813518">.</span><span class="ident" id="7813519">B</span><span class="op" id="7813520">)</span>&nbsp;<span class="op" id="7813522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7813525">for</span>&nbsp;<span class="ident" id="7813529">i</span>&nbsp;<span class="op" id="7813531">:=</span>&nbsp;<span class="num" id="7813534">0</span><span class="op" id="7813535">;</span>&nbsp;<span class="ident" id="7813537">i</span>&nbsp;<span class="op" id="7813539">&lt;</span>&nbsp;<span class="ident" id="7813541">b</span><span class="op" id="7813542">.</span><span class="ident" id="7813543">N</span><span class="op" id="7813544">;</span>&nbsp;<span class="ident" id="7813546">i</span><span class="op" id="7813547">++</span>&nbsp;<span class="op" id="7813550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813554">jsRegexpEscaper</span><span class="op" id="7813569">(</span><span class="string" id="7813570">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7813691">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7813694">}</span><br>
<span class="lineno"></span><span class="op" id="7813696">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
