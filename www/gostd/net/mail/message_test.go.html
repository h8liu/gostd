<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/mail</h2>
<ul>
<li><a href="/gostd/net/mail/message.go.html">message.go</a></li>
<li><a href="/gostd/net/mail/message_test.go.html" class="current">message_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7740901">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7740956">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7741010">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7741061">package</span>&nbsp;<span class="ident" id="7741069">mail</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7741075">import</span>&nbsp;<span class="op" id="7741082">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741085">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741094">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741107">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741118">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741129">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741140">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7741147">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7741150">var</span>&nbsp;<span class="ident" id="7741154">parseTests</span>&nbsp;<span class="op" id="7741165">=</span>&nbsp;<span class="op" id="7741167">[</span><span class="op" id="7741168">]</span><span class="keyword" id="7741169">struct</span>&nbsp;<span class="op" id="7741176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741179">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7741186">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741194">header</span>&nbsp;<span class="ident" id="7741201">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741209">body</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7741216">string</span><br>
<span class="lineno">20</span><span class="op" id="7741223">}</span><span class="op" id="7741224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7741231">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741261">in</span><span class="op" id="7741263">:</span>&nbsp;<span class="string" id="7741265">`From:&nbsp;John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;<br>
<span class="lineno"></span>To:&nbsp;Mary&nbsp;Smith&nbsp;&lt;mary@example.net&gt;<br>
<span class="lineno">25</span>Subject:&nbsp;Saying&nbsp;Hello<br>
<span class="lineno"></span>Date:&nbsp;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600<br>
<span class="lineno"></span>Message-ID:&nbsp;&lt;1234@local.machine.example&gt;<br>
<span class="lineno"></span><br>
<span class="lineno"></span>This&nbsp;is&nbsp;a&nbsp;message&nbsp;just&nbsp;to&nbsp;say&nbsp;hello.<br>
<span class="lineno">30</span>So,&nbsp;&#34;Hello&#34;.<br>
<span class="lineno"></span>`</span><span class="op" id="7741491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741495">header</span><span class="op" id="7741501">:</span>&nbsp;<span class="ident" id="7741503">Header</span><span class="op" id="7741509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741514">&#34;From&#34;</span><span class="op" id="7741520">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741528">[</span><span class="op" id="7741529">]</span><span class="builtintype" id="7741530">string</span><span class="op" id="7741536">{</span><span class="string" id="7741537">&#34;John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;&#34;</span><span class="op" id="7741570">}</span><span class="op" id="7741571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741576">&#34;To&#34;</span><span class="op" id="7741580">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741590">[</span><span class="op" id="7741591">]</span><span class="builtintype" id="7741592">string</span><span class="op" id="7741598">{</span><span class="string" id="7741599">&#34;Mary&nbsp;Smith&nbsp;&lt;mary@example.net&gt;&#34;</span><span class="op" id="7741630">}</span><span class="op" id="7741631">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741636">&#34;Subject&#34;</span><span class="op" id="7741645">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741650">[</span><span class="op" id="7741651">]</span><span class="builtintype" id="7741652">string</span><span class="op" id="7741658">{</span><span class="string" id="7741659">&#34;Saying&nbsp;Hello&#34;</span><span class="op" id="7741673">}</span><span class="op" id="7741674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741679">&#34;Date&#34;</span><span class="op" id="7741685">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741693">[</span><span class="op" id="7741694">]</span><span class="builtintype" id="7741695">string</span><span class="op" id="7741701">{</span><span class="string" id="7741702">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&#34;</span><span class="op" id="7741735">}</span><span class="op" id="7741736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741741">&#34;Message-Id&#34;</span><span class="op" id="7741753">:</span>&nbsp;<span class="op" id="7741755">[</span><span class="op" id="7741756">]</span><span class="builtintype" id="7741757">string</span><span class="op" id="7741763">{</span><span class="string" id="7741764">&#34;&lt;1234@local.machine.example&gt;&#34;</span><span class="op" id="7741794">}</span><span class="op" id="7741795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741799">}</span><span class="op" id="7741800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741804">body</span><span class="op" id="7741808">:</span>&nbsp;<span class="string" id="7741810">&#34;This&nbsp;is&nbsp;a&nbsp;message&nbsp;just&nbsp;to&nbsp;say&nbsp;hello.\nSo,&nbsp;\&#34;Hello\&#34;.\n&#34;</span><span class="op" id="7741866">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741869">}</span><span class="op" id="7741870">,</span><br>
<span class="lineno"></span><span class="op" id="7741872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7741875">func</span>&nbsp;<span class="ident" id="7741880">TestParsing</span><span class="op" id="7741891">(</span><span class="ident" id="7741892">t</span>&nbsp;<span class="op" id="7741894">*</span><span class="ident" id="7741895">testing</span><span class="op" id="7741902">.</span><span class="ident" id="7741903">T</span><span class="op" id="7741904">)</span>&nbsp;<span class="op" id="7741906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741909">for</span>&nbsp;<span class="ident" id="7741913">i</span><span class="op" id="7741914">,</span>&nbsp;<span class="ident" id="7741916">test</span>&nbsp;<span class="op" id="7741921">:=</span>&nbsp;<span class="keyword" id="7741924">range</span>&nbsp;<span class="ident" id="7741930">parseTests</span>&nbsp;<span class="op" id="7741941">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741945">msg</span><span class="op" id="7741948">,</span>&nbsp;<span class="ident" id="7741950">err</span>&nbsp;<span class="op" id="7741954">:=</span>&nbsp;<span class="ident" id="7741957">ReadMessage</span><span class="op" id="7741968">(</span><span class="ident" id="7741969">bytes</span><span class="op" id="7741974">.</span><span class="ident" id="7741975">NewBuffer</span><span class="op" id="7741984">(</span><span class="op" id="7741985">[</span><span class="op" id="7741986">]</span><span class="builtintype" id="7741987">byte</span><span class="op" id="7741991">(</span><span class="ident" id="7741992">test</span><span class="op" id="7741996">.</span><span class="ident" id="7741997">in</span><span class="op" id="7741999">)</span><span class="op" id="7742000">)</span><span class="op" id="7742001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742005">if</span>&nbsp;<span class="ident" id="7742008">err</span>&nbsp;<span class="op" id="7742012">!=</span>&nbsp;<span class="builtintype" id="7742015">nil</span>&nbsp;<span class="op" id="7742019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742024">t</span><span class="op" id="7742025">.</span><span class="ident" id="7742026">Errorf</span><span class="op" id="7742032">(</span><span class="string" id="7742033">&#34;test&nbsp;#%d:&nbsp;Failed&nbsp;parsing&nbsp;message:&nbsp;%v&#34;</span><span class="op" id="7742071">,</span>&nbsp;<span class="ident" id="7742073">i</span><span class="op" id="7742074">,</span>&nbsp;<span class="ident" id="7742076">err</span><span class="op" id="7742079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742084">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742095">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742099">if</span>&nbsp;<span class="op" id="7742102">!</span><span class="ident" id="7742103">headerEq</span><span class="op" id="7742111">(</span><span class="ident" id="7742112">msg</span><span class="op" id="7742115">.</span><span class="ident" id="7742116">Header</span><span class="op" id="7742122">,</span>&nbsp;<span class="ident" id="7742124">test</span><span class="op" id="7742128">.</span><span class="ident" id="7742129">header</span><span class="op" id="7742135">)</span>&nbsp;<span class="op" id="7742137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742142">t</span><span class="op" id="7742143">.</span><span class="ident" id="7742144">Errorf</span><span class="op" id="7742150">(</span><span class="string" id="7742151">&#34;test&nbsp;#%d:&nbsp;Incorrectly&nbsp;parsed&nbsp;message&nbsp;header.\nGot:\n%+v\nWant:\n%+v&#34;</span><span class="op" id="7742220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742226">i</span><span class="op" id="7742227">,</span>&nbsp;<span class="ident" id="7742229">msg</span><span class="op" id="7742232">.</span><span class="ident" id="7742233">Header</span><span class="op" id="7742239">,</span>&nbsp;<span class="ident" id="7742241">test</span><span class="op" id="7742245">.</span><span class="ident" id="7742246">header</span><span class="op" id="7742252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742260">body</span><span class="op" id="7742264">,</span>&nbsp;<span class="ident" id="7742266">err</span>&nbsp;<span class="op" id="7742270">:=</span>&nbsp;<span class="ident" id="7742273">ioutil</span><span class="op" id="7742279">.</span><span class="ident" id="7742280">ReadAll</span><span class="op" id="7742287">(</span><span class="ident" id="7742288">msg</span><span class="op" id="7742291">.</span><span class="ident" id="7742292">Body</span><span class="op" id="7742296">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742300">if</span>&nbsp;<span class="ident" id="7742303">err</span>&nbsp;<span class="op" id="7742307">!=</span>&nbsp;<span class="builtintype" id="7742310">nil</span>&nbsp;<span class="op" id="7742314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742319">t</span><span class="op" id="7742320">.</span><span class="ident" id="7742321">Errorf</span><span class="op" id="7742327">(</span><span class="string" id="7742328">&#34;test&nbsp;#%d:&nbsp;Failed&nbsp;reading&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="7742363">,</span>&nbsp;<span class="ident" id="7742365">i</span><span class="op" id="7742366">,</span>&nbsp;<span class="ident" id="7742368">err</span><span class="op" id="7742371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742376">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742391">bodyStr</span>&nbsp;<span class="op" id="7742399">:=</span>&nbsp;<span class="builtintype" id="7742402">string</span><span class="op" id="7742408">(</span><span class="ident" id="7742409">body</span><span class="op" id="7742413">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742417">if</span>&nbsp;<span class="ident" id="7742420">bodyStr</span>&nbsp;<span class="op" id="7742428">!=</span>&nbsp;<span class="ident" id="7742431">test</span><span class="op" id="7742435">.</span><span class="ident" id="7742436">body</span>&nbsp;<span class="op" id="7742441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742446">t</span><span class="op" id="7742447">.</span><span class="ident" id="7742448">Errorf</span><span class="op" id="7742454">(</span><span class="string" id="7742455">&#34;test&nbsp;#%d:&nbsp;Incorrectly&nbsp;parsed&nbsp;message&nbsp;body.\nGot:\n%+v\nWant:\n%+v&#34;</span><span class="op" id="7742522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742528">i</span><span class="op" id="7742529">,</span>&nbsp;<span class="ident" id="7742531">bodyStr</span><span class="op" id="7742538">,</span>&nbsp;<span class="ident" id="7742540">test</span><span class="op" id="7742544">.</span><span class="ident" id="7742545">body</span><span class="op" id="7742549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742556">}</span><br>
<span class="lineno">65</span><span class="op" id="7742558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7742561">func</span>&nbsp;<span class="ident" id="7742566">headerEq</span><span class="op" id="7742574">(</span><span class="ident" id="7742575">a</span><span class="op" id="7742576">,</span>&nbsp;<span class="ident" id="7742578">b</span>&nbsp;<span class="ident" id="7742580">Header</span><span class="op" id="7742586">)</span>&nbsp;<span class="builtintype" id="7742588">bool</span>&nbsp;<span class="op" id="7742593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742596">if</span>&nbsp;<span class="builtinfunc" id="7742599">len</span><span class="op" id="7742602">(</span><span class="ident" id="7742603">a</span><span class="op" id="7742604">)</span>&nbsp;<span class="op" id="7742606">!=</span>&nbsp;<span class="builtinfunc" id="7742609">len</span><span class="op" id="7742612">(</span><span class="ident" id="7742613">b</span><span class="op" id="7742614">)</span>&nbsp;<span class="op" id="7742616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742620">return</span>&nbsp;<span class="builtintype" id="7742627">false</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742637">for</span>&nbsp;<span class="ident" id="7742641">k</span><span class="op" id="7742642">,</span>&nbsp;<span class="ident" id="7742644">as</span>&nbsp;<span class="op" id="7742647">:=</span>&nbsp;<span class="keyword" id="7742650">range</span>&nbsp;<span class="ident" id="7742656">a</span>&nbsp;<span class="op" id="7742658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742662">bs</span><span class="op" id="7742664">,</span>&nbsp;<span class="ident" id="7742666">ok</span>&nbsp;<span class="op" id="7742669">:=</span>&nbsp;<span class="ident" id="7742672">b</span><span class="op" id="7742673">[</span><span class="ident" id="7742674">k</span><span class="op" id="7742675">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742679">if</span>&nbsp;<span class="op" id="7742682">!</span><span class="ident" id="7742683">ok</span>&nbsp;<span class="op" id="7742686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742691">return</span>&nbsp;<span class="builtintype" id="7742698">false</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742710">if</span>&nbsp;<span class="op" id="7742713">!</span><span class="ident" id="7742714">reflect</span><span class="op" id="7742721">.</span><span class="ident" id="7742722">DeepEqual</span><span class="op" id="7742731">(</span><span class="ident" id="7742732">as</span><span class="op" id="7742734">,</span>&nbsp;<span class="ident" id="7742736">bs</span><span class="op" id="7742738">)</span>&nbsp;<span class="op" id="7742740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742745">return</span>&nbsp;<span class="builtintype" id="7742752">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742763">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742766">return</span>&nbsp;<span class="builtintype" id="7742773">true</span><br>
<span class="lineno"></span><span class="op" id="7742778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7742781">func</span>&nbsp;<span class="ident" id="7742786">TestDateParsing</span><span class="op" id="7742801">(</span><span class="ident" id="7742802">t</span>&nbsp;<span class="op" id="7742804">*</span><span class="ident" id="7742805">testing</span><span class="op" id="7742812">.</span><span class="ident" id="7742813">T</span><span class="op" id="7742814">)</span>&nbsp;<span class="op" id="7742816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742819">tests</span>&nbsp;<span class="op" id="7742825">:=</span>&nbsp;<span class="op" id="7742828">[</span><span class="op" id="7742829">]</span><span class="keyword" id="7742830">struct</span>&nbsp;<span class="op" id="7742837">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742841">dateStr</span>&nbsp;<span class="builtintype" id="7742849">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742858">exp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742866">time</span><span class="op" id="7742870">.</span><span class="ident" id="7742871">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742877">}</span><span class="op" id="7742878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7742882">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742912">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7742917">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&#34;</span><span class="op" id="7742950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742955">time</span><span class="op" id="7742959">.</span><span class="ident" id="7742960">Date</span><span class="op" id="7742964">(</span><span class="num" id="7742965">1997</span><span class="op" id="7742969">,</span>&nbsp;<span class="num" id="7742971">11</span><span class="op" id="7742973">,</span>&nbsp;<span class="num" id="7742975">21</span><span class="op" id="7742977">,</span>&nbsp;<span class="num" id="7742979">9</span><span class="op" id="7742980">,</span>&nbsp;<span class="num" id="7742982">55</span><span class="op" id="7742984">,</span>&nbsp;<span class="num" id="7742986">6</span><span class="op" id="7742987">,</span>&nbsp;<span class="num" id="7742989">0</span><span class="op" id="7742990">,</span>&nbsp;<span class="ident" id="7742992">time</span><span class="op" id="7742996">.</span><span class="ident" id="7742997">FixedZone</span><span class="op" id="7743006">(</span><span class="string" id="7743007">&#34;&#34;</span><span class="op" id="7743009">,</span>&nbsp;<span class="op" id="7743011">-</span><span class="num" id="7743012">6</span><span class="op" id="7743013">*</span><span class="num" id="7743014">60</span><span class="op" id="7743016">*</span><span class="num" id="7743017">60</span><span class="op" id="7743019">)</span><span class="op" id="7743020">)</span><span class="op" id="7743021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743025">}</span><span class="op" id="7743026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7743030">//&nbsp;RFC5322,&nbsp;Appendix&nbsp;A.6.2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7743059">//&nbsp;Obsolete&nbsp;date.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7743084">&#34;21&nbsp;Nov&nbsp;97&nbsp;09:55:06&nbsp;GMT&#34;</span><span class="op" id="7743108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743113">time</span><span class="op" id="7743117">.</span><span class="ident" id="7743118">Date</span><span class="op" id="7743122">(</span><span class="num" id="7743123">1997</span><span class="op" id="7743127">,</span>&nbsp;<span class="num" id="7743129">11</span><span class="op" id="7743131">,</span>&nbsp;<span class="num" id="7743133">21</span><span class="op" id="7743135">,</span>&nbsp;<span class="num" id="7743137">9</span><span class="op" id="7743138">,</span>&nbsp;<span class="num" id="7743140">55</span><span class="op" id="7743142">,</span>&nbsp;<span class="num" id="7743144">6</span><span class="op" id="7743145">,</span>&nbsp;<span class="num" id="7743147">0</span><span class="op" id="7743148">,</span>&nbsp;<span class="ident" id="7743150">time</span><span class="op" id="7743154">.</span><span class="ident" id="7743155">FixedZone</span><span class="op" id="7743164">(</span><span class="string" id="7743165">&#34;GMT&#34;</span><span class="op" id="7743170">,</span>&nbsp;<span class="num" id="7743172">0</span><span class="op" id="7743173">)</span><span class="op" id="7743174">)</span><span class="op" id="7743175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743179">}</span><span class="op" id="7743180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7743184">//&nbsp;Commonly&nbsp;found&nbsp;format&nbsp;not&nbsp;specified&nbsp;by&nbsp;RFC&nbsp;5322.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7743243">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&nbsp;(MDT)&#34;</span><span class="op" id="7743282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743287">time</span><span class="op" id="7743291">.</span><span class="ident" id="7743292">Date</span><span class="op" id="7743296">(</span><span class="num" id="7743297">1997</span><span class="op" id="7743301">,</span>&nbsp;<span class="num" id="7743303">11</span><span class="op" id="7743305">,</span>&nbsp;<span class="num" id="7743307">21</span><span class="op" id="7743309">,</span>&nbsp;<span class="num" id="7743311">9</span><span class="op" id="7743312">,</span>&nbsp;<span class="num" id="7743314">55</span><span class="op" id="7743316">,</span>&nbsp;<span class="num" id="7743318">6</span><span class="op" id="7743319">,</span>&nbsp;<span class="num" id="7743321">0</span><span class="op" id="7743322">,</span>&nbsp;<span class="ident" id="7743324">time</span><span class="op" id="7743328">.</span><span class="ident" id="7743329">FixedZone</span><span class="op" id="7743338">(</span><span class="string" id="7743339">&#34;&#34;</span><span class="op" id="7743341">,</span>&nbsp;<span class="op" id="7743343">-</span><span class="num" id="7743344">6</span><span class="op" id="7743345">*</span><span class="num" id="7743346">60</span><span class="op" id="7743348">*</span><span class="num" id="7743349">60</span><span class="op" id="7743351">)</span><span class="op" id="7743352">)</span><span class="op" id="7743353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743357">}</span><span class="op" id="7743358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743361">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743364">for</span>&nbsp;<span class="ident" id="7743368">_</span><span class="op" id="7743369">,</span>&nbsp;<span class="ident" id="7743371">test</span>&nbsp;<span class="op" id="7743376">:=</span>&nbsp;<span class="keyword" id="7743379">range</span>&nbsp;<span class="ident" id="7743385">tests</span>&nbsp;<span class="op" id="7743391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743395">hdr</span>&nbsp;<span class="op" id="7743399">:=</span>&nbsp;<span class="ident" id="7743402">Header</span><span class="op" id="7743408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7743413">&#34;Date&#34;</span><span class="op" id="7743419">:</span>&nbsp;<span class="op" id="7743421">[</span><span class="op" id="7743422">]</span><span class="builtintype" id="7743423">string</span><span class="op" id="7743429">{</span><span class="ident" id="7743430">test</span><span class="op" id="7743434">.</span><span class="ident" id="7743435">dateStr</span><span class="op" id="7743442">}</span><span class="op" id="7743443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743451">date</span><span class="op" id="7743455">,</span>&nbsp;<span class="ident" id="7743457">err</span>&nbsp;<span class="op" id="7743461">:=</span>&nbsp;<span class="ident" id="7743464">hdr</span><span class="op" id="7743467">.</span><span class="ident" id="7743468">Date</span><span class="op" id="7743472">(</span><span class="op" id="7743473">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743477">if</span>&nbsp;<span class="ident" id="7743480">err</span>&nbsp;<span class="op" id="7743484">!=</span>&nbsp;<span class="builtintype" id="7743487">nil</span>&nbsp;<span class="op" id="7743491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743496">t</span><span class="op" id="7743497">.</span><span class="ident" id="7743498">Errorf</span><span class="op" id="7743504">(</span><span class="string" id="7743505">&#34;Failed&nbsp;parsing&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7743528">,</span>&nbsp;<span class="ident" id="7743530">test</span><span class="op" id="7743534">.</span><span class="ident" id="7743535">dateStr</span><span class="op" id="7743542">,</span>&nbsp;<span class="ident" id="7743544">err</span><span class="op" id="7743547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743552">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743567">if</span>&nbsp;<span class="op" id="7743570">!</span><span class="ident" id="7743571">date</span><span class="op" id="7743575">.</span><span class="ident" id="7743576">Equal</span><span class="op" id="7743581">(</span><span class="ident" id="7743582">test</span><span class="op" id="7743586">.</span><span class="ident" id="7743587">exp</span><span class="op" id="7743590">)</span>&nbsp;<span class="op" id="7743592">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743597">t</span><span class="op" id="7743598">.</span><span class="ident" id="7743599">Errorf</span><span class="op" id="7743605">(</span><span class="string" id="7743606">&#34;Parse&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7743638">,</span>&nbsp;<span class="ident" id="7743640">test</span><span class="op" id="7743644">.</span><span class="ident" id="7743645">dateStr</span><span class="op" id="7743652">,</span>&nbsp;<span class="ident" id="7743654">date</span><span class="op" id="7743658">,</span>&nbsp;<span class="ident" id="7743660">test</span><span class="op" id="7743664">.</span><span class="ident" id="7743665">exp</span><span class="op" id="7743668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743675">}</span><br>
<span class="lineno"></span><span class="op" id="7743677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="7743680">func</span>&nbsp;<span class="ident" id="7743685">TestAddressParsingError</span><span class="op" id="7743708">(</span><span class="ident" id="7743709">t</span>&nbsp;<span class="op" id="7743711">*</span><span class="ident" id="7743712">testing</span><span class="op" id="7743719">.</span><span class="ident" id="7743720">T</span><span class="op" id="7743721">)</span>&nbsp;<span class="op" id="7743723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743726">const</span>&nbsp;<span class="ident" id="7743732">txt</span>&nbsp;<span class="op" id="7743736">=</span>&nbsp;<span class="string" id="7743738">&#34;=?iso-8859-2?Q?Bogl=E1rka_Tak=E1cs?=&nbsp;&lt;unknown@gmail.com&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743798">_</span><span class="op" id="7743799">,</span>&nbsp;<span class="ident" id="7743801">err</span>&nbsp;<span class="op" id="7743805">:=</span>&nbsp;<span class="ident" id="7743808">ParseAddress</span><span class="op" id="7743820">(</span><span class="ident" id="7743821">txt</span><span class="op" id="7743824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743827">if</span>&nbsp;<span class="ident" id="7743830">err</span>&nbsp;<span class="op" id="7743834">==</span>&nbsp;<span class="builtintype" id="7743837">nil</span>&nbsp;<span class="op" id="7743841">||</span>&nbsp;<span class="op" id="7743844">!</span><span class="ident" id="7743845">strings</span><span class="op" id="7743852">.</span><span class="ident" id="7743853">Contains</span><span class="op" id="7743861">(</span><span class="ident" id="7743862">err</span><span class="op" id="7743865">.</span><span class="ident" id="7743866">Error</span><span class="op" id="7743871">(</span><span class="op" id="7743872">)</span><span class="op" id="7743873">,</span>&nbsp;<span class="string" id="7743875">&#34;charset&nbsp;not&nbsp;supported&#34;</span><span class="op" id="7743898">)</span>&nbsp;<span class="op" id="7743900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743904">t</span><span class="op" id="7743905">.</span><span class="ident" id="7743906">Errorf</span><span class="op" id="7743912">(</span><span class="string" id="7743913">`mail.ParseAddress(%q)&nbsp;err:&nbsp;%q,&nbsp;want&nbsp;&#34;.*charset&nbsp;not&nbsp;supported.*&#34;`</span><span class="op" id="7743978">,</span>&nbsp;<span class="ident" id="7743980">txt</span><span class="op" id="7743983">,</span>&nbsp;<span class="ident" id="7743985">err</span><span class="op" id="7743988">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743991">}</span><br>
<span class="lineno"></span><span class="op" id="7743993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7743996">func</span>&nbsp;<span class="ident" id="7744001">TestAddressParsing</span><span class="op" id="7744019">(</span><span class="ident" id="7744020">t</span>&nbsp;<span class="op" id="7744022">*</span><span class="ident" id="7744023">testing</span><span class="op" id="7744030">.</span><span class="ident" id="7744031">T</span><span class="op" id="7744032">)</span>&nbsp;<span class="op" id="7744034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744037">tests</span>&nbsp;<span class="op" id="7744043">:=</span>&nbsp;<span class="op" id="7744046">[</span><span class="op" id="7744047">]</span><span class="keyword" id="7744048">struct</span>&nbsp;<span class="op" id="7744055">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744059">addrsStr</span>&nbsp;<span class="builtintype" id="7744068">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744077">exp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744086">[</span><span class="op" id="7744087">]</span><span class="op" id="7744088">*</span><span class="ident" id="7744089">Address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744098">}</span><span class="op" id="7744099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7744103">//&nbsp;Bare&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744121">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7744126">`jdoe@machine.example`</span><span class="op" id="7744148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744153">[</span><span class="op" id="7744154">]</span><span class="op" id="7744155">*</span><span class="ident" id="7744156">Address</span><span class="op" id="7744163">{</span><span class="op" id="7744164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744170">Address</span><span class="op" id="7744177">:</span>&nbsp;<span class="string" id="7744179">&#34;jdoe@machine.example&#34;</span><span class="op" id="7744201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744206">}</span><span class="op" id="7744207">}</span><span class="op" id="7744208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744212">}</span><span class="op" id="7744213">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7744217">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7744252">`John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;`</span><span class="op" id="7744285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744290">[</span><span class="op" id="7744291">]</span><span class="op" id="7744292">*</span><span class="ident" id="7744293">Address</span><span class="op" id="7744300">{</span><span class="op" id="7744301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744307">Name</span><span class="op" id="7744311">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7744316">&#34;John&nbsp;Doe&#34;</span><span class="op" id="7744326">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744332">Address</span><span class="op" id="7744339">:</span>&nbsp;<span class="string" id="7744341">&#34;jdoe@machine.example&#34;</span><span class="op" id="7744363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744368">}</span><span class="op" id="7744369">}</span><span class="op" id="7744370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744374">}</span><span class="op" id="7744375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7744379">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744409">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7744414">`&#34;Joe&nbsp;Q.&nbsp;Public&#34;&nbsp;&lt;john.q.public@example.com&gt;`</span><span class="op" id="7744459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744464">[</span><span class="op" id="7744465">]</span><span class="op" id="7744466">*</span><span class="ident" id="7744467">Address</span><span class="op" id="7744474">{</span><span class="op" id="7744475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744481">Name</span><span class="op" id="7744485">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7744490">&#34;Joe&nbsp;Q.&nbsp;Public&#34;</span><span class="op" id="7744505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744511">Address</span><span class="op" id="7744518">:</span>&nbsp;<span class="string" id="7744520">&#34;john.q.public@example.com&#34;</span><span class="op" id="7744547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744552">}</span><span class="op" id="7744553">}</span><span class="op" id="7744554">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744558">}</span><span class="op" id="7744559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7744568">`Mary&nbsp;Smith&nbsp;&lt;mary@x.test&gt;,&nbsp;jdoe@example.org,&nbsp;Who?&nbsp;&lt;one@y.test&gt;`</span><span class="op" id="7744631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744636">[</span><span class="op" id="7744637">]</span><span class="op" id="7744638">*</span><span class="ident" id="7744639">Address</span><span class="op" id="7744646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744652">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744659">Name</span><span class="op" id="7744663">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7744668">&#34;Mary&nbsp;Smith&#34;</span><span class="op" id="7744680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744687">Address</span><span class="op" id="7744694">:</span>&nbsp;<span class="string" id="7744696">&#34;mary@x.test&#34;</span><span class="op" id="7744709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744715">}</span><span class="op" id="7744716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744729">Address</span><span class="op" id="7744736">:</span>&nbsp;<span class="string" id="7744738">&#34;jdoe@example.org&#34;</span><span class="op" id="7744756">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744762">}</span><span class="op" id="7744763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744776">Name</span><span class="op" id="7744780">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7744785">&#34;Who?&#34;</span><span class="op" id="7744791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744798">Address</span><span class="op" id="7744805">:</span>&nbsp;<span class="string" id="7744807">&#34;one@y.test&#34;</span><span class="op" id="7744819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744825">}</span><span class="op" id="7744826">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744831">}</span><span class="op" id="7744832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744836">}</span><span class="op" id="7744837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7744846">`&lt;boss@nil.test&gt;,&nbsp;&#34;Giant;&nbsp;\&#34;Big\&#34;&nbsp;Box&#34;&nbsp;&lt;sysservices@example.net&gt;`</span><span class="op" id="7744911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744916">[</span><span class="op" id="7744917">]</span><span class="op" id="7744918">*</span><span class="ident" id="7744919">Address</span><span class="op" id="7744926">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744939">Address</span><span class="op" id="7744946">:</span>&nbsp;<span class="string" id="7744948">&#34;boss@nil.test&#34;</span><span class="op" id="7744963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744969">}</span><span class="op" id="7744970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744983">Name</span><span class="op" id="7744987">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7744992">`Giant;&nbsp;&#34;Big&#34;&nbsp;Box`</span><span class="op" id="7745010">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745017">Address</span><span class="op" id="7745024">:</span>&nbsp;<span class="string" id="7745026">&#34;sysservices@example.net&#34;</span><span class="op" id="7745051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745057">}</span><span class="op" id="7745058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745063">}</span><span class="op" id="7745064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745068">}</span><span class="op" id="7745069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7745073">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.3</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7745103">//&nbsp;TODO(dsymonds):&nbsp;Group&nbsp;addresses.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7745142">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;ISO-8859-1&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7745193">`=?iso-8859-1?q?J=F6rg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7745242">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745247">[</span><span class="op" id="7745248">]</span><span class="op" id="7745249">*</span><span class="ident" id="7745250">Address</span><span class="op" id="7745257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745270">Name</span><span class="op" id="7745274">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7745279">`Jörg&nbsp;Doe`</span><span class="op" id="7745290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745297">Address</span><span class="op" id="7745304">:</span>&nbsp;<span class="string" id="7745306">&#34;joerg@example.com&#34;</span><span class="op" id="7745325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745331">}</span><span class="op" id="7745332">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745337">}</span><span class="op" id="7745338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745342">}</span><span class="op" id="7745343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7745347">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;US-ASCII&nbsp;address.&nbsp;Dumb&nbsp;but&nbsp;legal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7745412">`=?us-ascii?q?J=6Frg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7745459">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745464">[</span><span class="op" id="7745465">]</span><span class="op" id="7745466">*</span><span class="ident" id="7745467">Address</span><span class="op" id="7745474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745487">Name</span><span class="op" id="7745491">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7745496">`Jorg&nbsp;Doe`</span><span class="op" id="7745506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745513">Address</span><span class="op" id="7745520">:</span>&nbsp;<span class="string" id="7745522">&#34;joerg@example.com&#34;</span><span class="op" id="7745541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745547">}</span><span class="op" id="7745548">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745553">}</span><span class="op" id="7745554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745558">}</span><span class="op" id="7745559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7745563">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;UTF-8&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7745609">`=?utf-8?q?J=C3=B6rg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7745656">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745661">[</span><span class="op" id="7745662">]</span><span class="op" id="7745663">*</span><span class="ident" id="7745664">Address</span><span class="op" id="7745671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745684">Name</span><span class="op" id="7745688">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7745693">`Jörg&nbsp;Doe`</span><span class="op" id="7745704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745711">Address</span><span class="op" id="7745718">:</span>&nbsp;<span class="string" id="7745720">&#34;joerg@example.com&#34;</span><span class="op" id="7745739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745745">}</span><span class="op" id="7745746">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745751">}</span><span class="op" id="7745752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745756">}</span><span class="op" id="7745757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7745761">//&nbsp;RFC&nbsp;2047,&nbsp;Section&nbsp;8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7745792">`=?ISO-8859-1?Q?Andr=E9?=&nbsp;Pirard&nbsp;&lt;PIRARD@vm1.ulg.ac.be&gt;`</span><span class="op" id="7745848">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745853">[</span><span class="op" id="7745854">]</span><span class="op" id="7745855">*</span><span class="ident" id="7745856">Address</span><span class="op" id="7745863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745876">Name</span><span class="op" id="7745880">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7745885">`André&nbsp;Pirard`</span><span class="op" id="7745900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745907">Address</span><span class="op" id="7745914">:</span>&nbsp;<span class="string" id="7745916">&#34;PIRARD@vm1.ulg.ac.be&#34;</span><span class="op" id="7745938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745944">}</span><span class="op" id="7745945">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745950">}</span><span class="op" id="7745951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745955">}</span><span class="op" id="7745956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7745960">//&nbsp;Custom&nbsp;example&nbsp;of&nbsp;RFC&nbsp;2047&nbsp;&#34;B&#34;-encoded&nbsp;ISO-8859-1&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7746029">`=?ISO-8859-1?B?SvZyZw==?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7746076">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746081">[</span><span class="op" id="7746082">]</span><span class="op" id="7746083">*</span><span class="ident" id="7746084">Address</span><span class="op" id="7746091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746104">Name</span><span class="op" id="7746108">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7746113">`Jörg`</span><span class="op" id="7746120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746127">Address</span><span class="op" id="7746134">:</span>&nbsp;<span class="string" id="7746136">&#34;joerg@example.com&#34;</span><span class="op" id="7746155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746161">}</span><span class="op" id="7746162">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746167">}</span><span class="op" id="7746168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746172">}</span><span class="op" id="7746173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7746177">//&nbsp;Custom&nbsp;example&nbsp;of&nbsp;RFC&nbsp;2047&nbsp;&#34;B&#34;-encoded&nbsp;UTF-8&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7746241">`=?UTF-8?B?SsO2cmc=?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7746283">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746288">[</span><span class="op" id="7746289">]</span><span class="op" id="7746290">*</span><span class="ident" id="7746291">Address</span><span class="op" id="7746298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746311">Name</span><span class="op" id="7746315">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7746320">`Jörg`</span><span class="op" id="7746327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746334">Address</span><span class="op" id="7746341">:</span>&nbsp;<span class="string" id="7746343">&#34;joerg@example.com&#34;</span><span class="op" id="7746362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746368">}</span><span class="op" id="7746369">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746374">}</span><span class="op" id="7746375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746379">}</span><span class="op" id="7746380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7746384">//&nbsp;Custom&nbsp;example&nbsp;with&nbsp;&#34;.&#34;&nbsp;in&nbsp;name.&nbsp;For&nbsp;issue&nbsp;4938</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7746442">`Asem&nbsp;H.&nbsp;&lt;noreply@example.com&gt;`</span><span class="op" id="7746473">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746478">[</span><span class="op" id="7746479">]</span><span class="op" id="7746480">*</span><span class="ident" id="7746481">Address</span><span class="op" id="7746488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746501">Name</span><span class="op" id="7746505">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7746510">`Asem&nbsp;H.`</span><span class="op" id="7746519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746526">Address</span><span class="op" id="7746533">:</span>&nbsp;<span class="string" id="7746535">&#34;noreply@example.com&#34;</span><span class="op" id="7746556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746562">}</span><span class="op" id="7746563">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746568">}</span><span class="op" id="7746569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746573">}</span><span class="op" id="7746574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746580">for</span>&nbsp;<span class="ident" id="7746584">_</span><span class="op" id="7746585">,</span>&nbsp;<span class="ident" id="7746587">test</span>&nbsp;<span class="op" id="7746592">:=</span>&nbsp;<span class="keyword" id="7746595">range</span>&nbsp;<span class="ident" id="7746601">tests</span>&nbsp;<span class="op" id="7746607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746611">if</span>&nbsp;<span class="builtinfunc" id="7746614">len</span><span class="op" id="7746617">(</span><span class="ident" id="7746618">test</span><span class="op" id="7746622">.</span><span class="ident" id="7746623">exp</span><span class="op" id="7746626">)</span>&nbsp;<span class="op" id="7746628">==</span>&nbsp;<span class="num" id="7746631">1</span>&nbsp;<span class="op" id="7746633">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746638">addr</span><span class="op" id="7746642">,</span>&nbsp;<span class="ident" id="7746644">err</span>&nbsp;<span class="op" id="7746648">:=</span>&nbsp;<span class="ident" id="7746651">ParseAddress</span><span class="op" id="7746663">(</span><span class="ident" id="7746664">test</span><span class="op" id="7746668">.</span><span class="ident" id="7746669">addrsStr</span><span class="op" id="7746677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746682">if</span>&nbsp;<span class="ident" id="7746685">err</span>&nbsp;<span class="op" id="7746689">!=</span>&nbsp;<span class="builtintype" id="7746692">nil</span>&nbsp;<span class="op" id="7746696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746702">t</span><span class="op" id="7746703">.</span><span class="ident" id="7746704">Errorf</span><span class="op" id="7746710">(</span><span class="string" id="7746711">&#34;Failed&nbsp;parsing&nbsp;(single)&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7746743">,</span>&nbsp;<span class="ident" id="7746745">test</span><span class="op" id="7746749">.</span><span class="ident" id="7746750">addrsStr</span><span class="op" id="7746758">,</span>&nbsp;<span class="ident" id="7746760">err</span><span class="op" id="7746763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746769">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746781">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746786">if</span>&nbsp;<span class="op" id="7746789">!</span><span class="ident" id="7746790">reflect</span><span class="op" id="7746797">.</span><span class="ident" id="7746798">DeepEqual</span><span class="op" id="7746807">(</span><span class="op" id="7746808">[</span><span class="op" id="7746809">]</span><span class="op" id="7746810">*</span><span class="ident" id="7746811">Address</span><span class="op" id="7746818">{</span><span class="ident" id="7746819">addr</span><span class="op" id="7746823">}</span><span class="op" id="7746824">,</span>&nbsp;<span class="ident" id="7746826">test</span><span class="op" id="7746830">.</span><span class="ident" id="7746831">exp</span><span class="op" id="7746834">)</span>&nbsp;<span class="op" id="7746836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746842">t</span><span class="op" id="7746843">.</span><span class="ident" id="7746844">Errorf</span><span class="op" id="7746850">(</span><span class="string" id="7746851">&#34;Parse&nbsp;(single)&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7746892">,</span>&nbsp;<span class="ident" id="7746894">test</span><span class="op" id="7746898">.</span><span class="ident" id="7746899">addrsStr</span><span class="op" id="7746907">,</span>&nbsp;<span class="ident" id="7746909">addr</span><span class="op" id="7746913">,</span>&nbsp;<span class="ident" id="7746915">test</span><span class="op" id="7746919">.</span><span class="ident" id="7746920">exp</span><span class="op" id="7746923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746937">addrs</span><span class="op" id="7746942">,</span>&nbsp;<span class="ident" id="7746944">err</span>&nbsp;<span class="op" id="7746948">:=</span>&nbsp;<span class="ident" id="7746951">ParseAddressList</span><span class="op" id="7746967">(</span><span class="ident" id="7746968">test</span><span class="op" id="7746972">.</span><span class="ident" id="7746973">addrsStr</span><span class="op" id="7746981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746985">if</span>&nbsp;<span class="ident" id="7746988">err</span>&nbsp;<span class="op" id="7746992">!=</span>&nbsp;<span class="builtintype" id="7746995">nil</span>&nbsp;<span class="op" id="7746999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747004">t</span><span class="op" id="7747005">.</span><span class="ident" id="7747006">Errorf</span><span class="op" id="7747012">(</span><span class="string" id="7747013">&#34;Failed&nbsp;parsing&nbsp;(list)&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7747043">,</span>&nbsp;<span class="ident" id="7747045">test</span><span class="op" id="7747049">.</span><span class="ident" id="7747050">addrsStr</span><span class="op" id="7747058">,</span>&nbsp;<span class="ident" id="7747060">err</span><span class="op" id="7747063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747068">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747079">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747083">if</span>&nbsp;<span class="op" id="7747086">!</span><span class="ident" id="7747087">reflect</span><span class="op" id="7747094">.</span><span class="ident" id="7747095">DeepEqual</span><span class="op" id="7747104">(</span><span class="ident" id="7747105">addrs</span><span class="op" id="7747110">,</span>&nbsp;<span class="ident" id="7747112">test</span><span class="op" id="7747116">.</span><span class="ident" id="7747117">exp</span><span class="op" id="7747120">)</span>&nbsp;<span class="op" id="7747122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747127">t</span><span class="op" id="7747128">.</span><span class="ident" id="7747129">Errorf</span><span class="op" id="7747135">(</span><span class="string" id="7747136">&#34;Parse&nbsp;(list)&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7747175">,</span>&nbsp;<span class="ident" id="7747177">test</span><span class="op" id="7747181">.</span><span class="ident" id="7747182">addrsStr</span><span class="op" id="7747190">,</span>&nbsp;<span class="ident" id="7747192">addrs</span><span class="op" id="7747197">,</span>&nbsp;<span class="ident" id="7747199">test</span><span class="op" id="7747203">.</span><span class="ident" id="7747204">exp</span><span class="op" id="7747207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747214">}</span><br>
<span class="lineno"></span><span class="op" id="7747216">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="7747219">func</span>&nbsp;<span class="ident" id="7747224">TestAddressFormatting</span><span class="op" id="7747245">(</span><span class="ident" id="7747246">t</span>&nbsp;<span class="op" id="7747248">*</span><span class="ident" id="7747249">testing</span><span class="op" id="7747256">.</span><span class="ident" id="7747257">T</span><span class="op" id="7747258">)</span>&nbsp;<span class="op" id="7747260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747263">tests</span>&nbsp;<span class="op" id="7747269">:=</span>&nbsp;<span class="op" id="7747272">[</span><span class="op" id="7747273">]</span><span class="keyword" id="7747274">struct</span>&nbsp;<span class="op" id="7747281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747285">addr</span>&nbsp;<span class="op" id="7747290">*</span><span class="ident" id="7747291">Address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747301">exp</span>&nbsp;&nbsp;<span class="builtintype" id="7747306">string</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747314">}</span><span class="op" id="7747315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747324">&amp;</span><span class="ident" id="7747325">Address</span><span class="op" id="7747332">{</span><span class="ident" id="7747333">Address</span><span class="op" id="7747340">:</span>&nbsp;<span class="string" id="7747342">&#34;bob@example.com&#34;</span><span class="op" id="7747359">}</span><span class="op" id="7747360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747365">&#34;&lt;bob@example.com&gt;&#34;</span><span class="op" id="7747384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747388">}</span><span class="op" id="7747389">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747398">&amp;</span><span class="ident" id="7747399">Address</span><span class="op" id="7747406">{</span><span class="ident" id="7747407">Name</span><span class="op" id="7747411">:</span>&nbsp;<span class="string" id="7747413">&#34;Bob&#34;</span><span class="op" id="7747418">,</span>&nbsp;<span class="ident" id="7747420">Address</span><span class="op" id="7747427">:</span>&nbsp;<span class="string" id="7747429">&#34;bob@example.com&#34;</span><span class="op" id="7747446">}</span><span class="op" id="7747447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747452">`&#34;Bob&#34;&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7747477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747481">}</span><span class="op" id="7747482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747486">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7747491">//&nbsp;note&nbsp;the&nbsp;ö&nbsp;(o&nbsp;with&nbsp;an&nbsp;umlaut)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747528">&amp;</span><span class="ident" id="7747529">Address</span><span class="op" id="7747536">{</span><span class="ident" id="7747537">Name</span><span class="op" id="7747541">:</span>&nbsp;<span class="string" id="7747543">&#34;Böb&#34;</span><span class="op" id="7747549">,</span>&nbsp;<span class="ident" id="7747551">Address</span><span class="op" id="7747558">:</span>&nbsp;<span class="string" id="7747560">&#34;bob@example.com&#34;</span><span class="op" id="7747577">}</span><span class="op" id="7747578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747583">`=?utf-8?q?B=C3=B6b?=&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7747623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747627">}</span><span class="op" id="7747628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747632">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747637">&amp;</span><span class="ident" id="7747638">Address</span><span class="op" id="7747645">{</span><span class="ident" id="7747646">Name</span><span class="op" id="7747650">:</span>&nbsp;<span class="string" id="7747652">&#34;Bob&nbsp;Jane&#34;</span><span class="op" id="7747662">,</span>&nbsp;<span class="ident" id="7747664">Address</span><span class="op" id="7747671">:</span>&nbsp;<span class="string" id="7747673">&#34;bob@example.com&#34;</span><span class="op" id="7747690">}</span><span class="op" id="7747691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747696">`&#34;Bob&nbsp;Jane&#34;&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7747726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747730">}</span><span class="op" id="7747731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747740">&amp;</span><span class="ident" id="7747741">Address</span><span class="op" id="7747748">{</span><span class="ident" id="7747749">Name</span><span class="op" id="7747753">:</span>&nbsp;<span class="string" id="7747755">&#34;Böb&nbsp;Jacöb&#34;</span><span class="op" id="7747768">,</span>&nbsp;<span class="ident" id="7747770">Address</span><span class="op" id="7747777">:</span>&nbsp;<span class="string" id="7747779">&#34;bob@example.com&#34;</span><span class="op" id="7747796">}</span><span class="op" id="7747797">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747802">`=?utf-8?q?B=C3=B6b_Jac=C3=B6b?=&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7747853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747857">}</span><span class="op" id="7747858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747864">for</span>&nbsp;<span class="ident" id="7747868">_</span><span class="op" id="7747869">,</span>&nbsp;<span class="ident" id="7747871">test</span>&nbsp;<span class="op" id="7747876">:=</span>&nbsp;<span class="keyword" id="7747879">range</span>&nbsp;<span class="ident" id="7747885">tests</span>&nbsp;<span class="op" id="7747891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747895">s</span>&nbsp;<span class="op" id="7747897">:=</span>&nbsp;<span class="ident" id="7747900">test</span><span class="op" id="7747904">.</span><span class="ident" id="7747905">addr</span><span class="op" id="7747909">.</span><span class="ident" id="7747910">String</span><span class="op" id="7747916">(</span><span class="op" id="7747917">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747921">if</span>&nbsp;<span class="ident" id="7747924">s</span>&nbsp;<span class="op" id="7747926">!=</span>&nbsp;<span class="ident" id="7747929">test</span><span class="op" id="7747933">.</span><span class="ident" id="7747934">exp</span>&nbsp;<span class="op" id="7747938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747943">t</span><span class="op" id="7747944">.</span><span class="ident" id="7747945">Errorf</span><span class="op" id="7747951">(</span><span class="string" id="7747952">&#34;Address%+v.String()&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7747987">,</span>&nbsp;<span class="op" id="7747989">*</span><span class="ident" id="7747990">test</span><span class="op" id="7747994">.</span><span class="ident" id="7747995">addr</span><span class="op" id="7747999">,</span>&nbsp;<span class="ident" id="7748001">s</span><span class="op" id="7748002">,</span>&nbsp;<span class="ident" id="7748004">test</span><span class="op" id="7748008">.</span><span class="ident" id="7748009">exp</span><span class="op" id="7748012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748019">}</span><br>
<span class="lineno"></span><span class="op" id="7748021">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
