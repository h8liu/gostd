<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7056476">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7056531">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7056585">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7056636">package</span>&nbsp;<span class="ident" id="7056644">httptest</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7056654">import</span>&nbsp;<span class="op" id="7056661">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7056664">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7056677">&#34;net/http&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7056689">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7056699">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7056702">func</span>&nbsp;<span class="ident" id="7056707">TestServer</span><span class="op" id="7056717">(</span><span class="ident" id="7056718">t</span>&nbsp;<span class="op" id="7056720">*</span><span class="ident" id="7056721"><a href="/net/http/httptest/server_test.go.html#7056689">testing</a></span><span class="op" id="7056728">.</span><span class="ident" id="7056729">T</span><span class="op" id="7056730">)</span>&nbsp;<span class="op" id="7056732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056735">ts</span>&nbsp;<span class="op" id="7056738">:=</span>&nbsp;<span class="ident" id="7056741"><a href="/net/http/httptest/server.go.html#4815838">NewServer</a></span><span class="op" id="7056750">(</span><span class="ident" id="7056751"><a href="/net/http/httptest/server_test.go.html#7056677">http</a></span><span class="op" id="7056755">.</span><span class="ident" id="7056756">HandlerFunc</span><span class="op" id="7056767">(</span><span class="keyword" id="7056768">func</span><span class="op" id="7056772">(</span><span class="ident" id="7056773">w</span>&nbsp;<span class="ident" id="7056775"><a href="/net/http/httptest/server_test.go.html#7056677">http</a></span><span class="op" id="7056779">.</span><span class="ident" id="7056780">ResponseWriter</span><span class="op" id="7056794">,</span>&nbsp;<span class="ident" id="7056796">r</span>&nbsp;<span class="op" id="7056798">*</span><span class="ident" id="7056799"><a href="/net/http/httptest/server_test.go.html#7056677">http</a></span><span class="op" id="7056803">.</span><span class="ident" id="7056804">Request</span><span class="op" id="7056811">)</span>&nbsp;<span class="op" id="7056813">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056817"><a href="/net/http/httptest/server_test.go.html#7056773">w</a></span><span class="op" id="7056818">.</span><span class="ident" id="7056819">Write</span><span class="op" id="7056824">(</span><span class="op" id="7056825">[</span><span class="op" id="7056826">]</span><span class="builtintype" id="7056827">byte</span><span class="op" id="7056831">(</span><span class="string" id="7056832">&#34;hello&#34;</span><span class="op" id="7056839">)</span><span class="op" id="7056840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056843">}</span><span class="op" id="7056844">)</span><span class="op" id="7056845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056848">defer</span>&nbsp;<span class="ident" id="7056854"><a href="/net/http/httptest/server_test.go.html#7056735">ts</a></span><span class="op" id="7056856">.</span><span class="ident" id="7056857">Close</span><span class="op" id="7056862">(</span><span class="op" id="7056863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056866">res</span><span class="op" id="7056869">,</span>&nbsp;<span class="ident" id="7056871">err</span>&nbsp;<span class="op" id="7056875">:=</span>&nbsp;<span class="ident" id="7056878"><a href="/net/http/httptest/server_test.go.html#7056677">http</a></span><span class="op" id="7056882">.</span><span class="ident" id="7056883">Get</span><span class="op" id="7056886">(</span><span class="ident" id="7056887"><a href="/net/http/httptest/server_test.go.html#7056735">ts</a></span><span class="op" id="7056889">.</span><span class="ident" id="7056890">URL</span><span class="op" id="7056893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056896">if</span>&nbsp;<span class="ident" id="7056899"><a href="/net/http/httptest/server_test.go.html#7056871">err</a></span>&nbsp;<span class="op" id="7056903">!=</span>&nbsp;<span class="ident" id="7056906">nil</span>&nbsp;<span class="op" id="7056910">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056914"><a href="/net/http/httptest/server_test.go.html#7056718">t</a></span><span class="op" id="7056915">.</span><span class="ident" id="7056916">Fatal</span><span class="op" id="7056921">(</span><span class="ident" id="7056922"><a href="/net/http/httptest/server_test.go.html#7056871">err</a></span><span class="op" id="7056925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056931">got</span><span class="op" id="7056934">,</span>&nbsp;<span class="ident" id="7056936"><a href="/net/http/httptest/server_test.go.html#7056871">err</a></span>&nbsp;<span class="op" id="7056940">:=</span>&nbsp;<span class="ident" id="7056943"><a href="/net/http/httptest/server_test.go.html#7056664">ioutil</a></span><span class="op" id="7056949">.</span><span class="ident" id="7056950">ReadAll</span><span class="op" id="7056957">(</span><span class="ident" id="7056958"><a href="/net/http/httptest/server_test.go.html#7056866">res</a></span><span class="op" id="7056961">.</span><span class="ident" id="7056962">Body</span><span class="op" id="7056966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056969">if</span>&nbsp;<span class="ident" id="7056972"><a href="/net/http/httptest/server_test.go.html#7056871">err</a></span>&nbsp;<span class="op" id="7056976">!=</span>&nbsp;<span class="ident" id="7056979">nil</span>&nbsp;<span class="op" id="7056983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056987"><a href="/net/http/httptest/server_test.go.html#7056718">t</a></span><span class="op" id="7056988">.</span><span class="ident" id="7056989">Fatal</span><span class="op" id="7056994">(</span><span class="ident" id="7056995"><a href="/net/http/httptest/server_test.go.html#7056871">err</a></span><span class="op" id="7056998">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7057001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7057004">if</span>&nbsp;<span class="builtintype" id="7057007">string</span><span class="op" id="7057013">(</span><span class="ident" id="7057014"><a href="/net/http/httptest/server_test.go.html#7056931">got</a></span><span class="op" id="7057017">)</span>&nbsp;<span class="op" id="7057019">!=</span>&nbsp;<span class="string" id="7057022">&#34;hello&#34;</span>&nbsp;<span class="op" id="7057030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7057034"><a href="/net/http/httptest/server_test.go.html#7056718">t</a></span><span class="op" id="7057035">.</span><span class="ident" id="7057036">Errorf</span><span class="op" id="7057042">(</span><span class="string" id="7057043">&#34;got&nbsp;%q,&nbsp;want&nbsp;hello&#34;</span><span class="op" id="7057063">,</span>&nbsp;<span class="builtintype" id="7057065">string</span><span class="op" id="7057071">(</span><span class="ident" id="7057072"><a href="/net/http/httptest/server_test.go.html#7056931">got</a></span><span class="op" id="7057075">)</span><span class="op" id="7057076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7057079">}</span><br>
<span class="lineno"></span><span class="op" id="7057081">}</span>
</div>
</body>
</html>
