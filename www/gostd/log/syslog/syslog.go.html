<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html" class="current">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6025516">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6025571">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6025625">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6025676">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6025709">//&nbsp;Package&nbsp;syslog&nbsp;provides&nbsp;a&nbsp;simple&nbsp;interface&nbsp;to&nbsp;the&nbsp;system&nbsp;log</span><br>
<span class="lineno"></span><span class="comment" id="6025773">//&nbsp;service.&nbsp;It&nbsp;can&nbsp;send&nbsp;messages&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;using&nbsp;UNIX</span><br>
<span class="lineno"></span><span class="comment" id="6025838">//&nbsp;domain&nbsp;sockets,&nbsp;UDP&nbsp;or&nbsp;TCP.</span><br>
<span class="lineno">10</span><span class="comment" id="6025869">//</span><br>
<span class="lineno"></span><span class="comment" id="6025872">//&nbsp;Only&nbsp;one&nbsp;call&nbsp;to&nbsp;Dial&nbsp;is&nbsp;necessary.&nbsp;On&nbsp;write&nbsp;failures,</span><br>
<span class="lineno"></span><span class="comment" id="6025930">//&nbsp;the&nbsp;syslog&nbsp;client&nbsp;will&nbsp;attempt&nbsp;to&nbsp;reconnect&nbsp;to&nbsp;the&nbsp;server</span><br>
<span class="lineno"></span><span class="comment" id="6025991">//&nbsp;and&nbsp;write&nbsp;again.</span><br>
<span class="lineno"></span><span class="keyword" id="6026011">package</span>&nbsp;<span class="ident" id="6026019">syslog</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6026027">import</span>&nbsp;<span class="op" id="6026034">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6026037">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6026047">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6026054">&#34;log&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6026061">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6026068">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6026074">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6026085">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6026093">&#34;time&#34;</span><br>
<span class="lineno">25</span><span class="op" id="6026100">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6026103">//&nbsp;The&nbsp;Priority&nbsp;is&nbsp;a&nbsp;combination&nbsp;of&nbsp;the&nbsp;syslog&nbsp;facility&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6026163">//&nbsp;severity.&nbsp;For&nbsp;example,&nbsp;LOG_ALERT&nbsp;|&nbsp;LOG_FTP&nbsp;sends&nbsp;an&nbsp;alert&nbsp;severity</span><br>
<span class="lineno"></span><span class="comment" id="6026233">//&nbsp;message&nbsp;from&nbsp;the&nbsp;FTP&nbsp;facility.&nbsp;The&nbsp;default&nbsp;severity&nbsp;is&nbsp;LOG_EMERG;</span><br>
<span class="lineno">30</span><span class="comment" id="6026302">//&nbsp;the&nbsp;default&nbsp;facility&nbsp;is&nbsp;LOG_KERN.</span><br>
<span class="lineno"></span><span class="keyword" id="6026339">type</span>&nbsp;<span class="ident" id="6026344">Priority</span>&nbsp;<span class="builtintype" id="6026353">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6026358">const</span>&nbsp;<span class="ident" id="6026364">severityMask</span>&nbsp;<span class="op" id="6026377">=</span>&nbsp;<span class="num" id="6026379">0x07</span><br>
<span class="lineno"></span><span class="keyword" id="6026384">const</span>&nbsp;<span class="ident" id="6026390">facilityMask</span>&nbsp;<span class="op" id="6026403">=</span>&nbsp;<span class="num" id="6026405">0xf8</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="6026411">const</span>&nbsp;<span class="op" id="6026417">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6026420">//&nbsp;Severity.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6026435">//&nbsp;From&nbsp;/usr/include/sys/syslog.h.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6026471">//&nbsp;These&nbsp;are&nbsp;the&nbsp;same&nbsp;on&nbsp;Linux,&nbsp;BSD,&nbsp;and&nbsp;OS&nbsp;X.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026519">LOG_EMERG</span>&nbsp;<span class="ident" id="6026529"><a href="/gostd/log/syslog/syslog.go.html#6026344">Priority</a></span>&nbsp;<span class="op" id="6026538">=</span>&nbsp;<span class="ident" id="6026540">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026546">LOG_ALERT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026557">LOG_CRIT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026567">LOG_ERR</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026576">LOG_WARNING</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026589">LOG_NOTICE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026601">LOG_INFO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026611">LOG_DEBUG</span><br>
<span class="lineno"></span><span class="op" id="6026621">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="6026624">const</span>&nbsp;<span class="op" id="6026630">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6026633">//&nbsp;Facility.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6026648">//&nbsp;From&nbsp;/usr/include/sys/syslog.h.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6026684">//&nbsp;These&nbsp;are&nbsp;the&nbsp;same&nbsp;up&nbsp;to&nbsp;LOG_FTP&nbsp;on&nbsp;Linux,&nbsp;BSD,&nbsp;and&nbsp;OS&nbsp;X.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026746">LOG_KERN</span>&nbsp;<span class="ident" id="6026755"><a href="/gostd/log/syslog/syslog.go.html#6026344">Priority</a></span>&nbsp;<span class="op" id="6026764">=</span>&nbsp;<span class="ident" id="6026766">iota</span>&nbsp;<span class="op" id="6026771">&lt;&lt;</span>&nbsp;<span class="num" id="6026774">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026777">LOG_USER</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026787">LOG_MAIL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026797">LOG_DAEMON</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026809">LOG_AUTH</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026819">LOG_SYSLOG</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026831">LOG_LPR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026840">LOG_NEWS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026850">LOG_UUCP</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026860">LOG_CRON</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026870">LOG_AUTHPRIV</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026884">LOG_FTP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026893">_</span>&nbsp;<span class="comment" id="6026895">//&nbsp;unused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026906">_</span>&nbsp;<span class="comment" id="6026908">//&nbsp;unused</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026919">_</span>&nbsp;<span class="comment" id="6026921">//&nbsp;unused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026932">_</span>&nbsp;<span class="comment" id="6026934">//&nbsp;unused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026945">LOG_LOCAL0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026957">LOG_LOCAL1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026969">LOG_LOCAL2</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026981">LOG_LOCAL3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026993">LOG_LOCAL4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027005">LOG_LOCAL5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027017">LOG_LOCAL6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027029">LOG_LOCAL7</span><br>
<span class="lineno">80</span><span class="op" id="6027040">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6027043">//&nbsp;A&nbsp;Writer&nbsp;is&nbsp;a&nbsp;connection&nbsp;to&nbsp;a&nbsp;syslog&nbsp;server.</span><br>
<span class="lineno"></span><span class="keyword" id="6027091">type</span>&nbsp;<span class="ident" id="6027096">Writer</span>&nbsp;<span class="keyword" id="6027103">struct</span>&nbsp;<span class="op" id="6027110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027113">priority</span>&nbsp;<span class="ident" id="6027122"><a href="/gostd/log/syslog/syslog.go.html#6026344">Priority</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027132">tag</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6027141">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027149">hostname</span>&nbsp;<span class="builtintype" id="6027158">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027166">network</span>&nbsp;&nbsp;<span class="builtintype" id="6027175">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027183">raddr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6027192">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027201">mu</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6027206"><a href="/gostd/log/syslog/syslog.go.html#6026085">sync</a></span><span class="op" id="6027210">.</span><span class="ident" id="6027211"><a href="/gostd/sync/mutex.go.html#1443974">Mutex</a></span>&nbsp;<span class="comment" id="6027217">//&nbsp;guards&nbsp;conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027233">conn</span>&nbsp;<span class="ident" id="6027238"><a href="/gostd/log/syslog/syslog.go.html#6027624">serverConn</a></span><br>
<span class="lineno"></span><span class="op" id="6027249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6027252">//&nbsp;This&nbsp;interface&nbsp;and&nbsp;the&nbsp;separate&nbsp;syslog_unix.go&nbsp;file&nbsp;exist&nbsp;for</span><br>
<span class="lineno">95</span><span class="comment" id="6027317">//&nbsp;Solaris&nbsp;support&nbsp;as&nbsp;implemented&nbsp;by&nbsp;gccgo.&nbsp;&nbsp;On&nbsp;Solaris&nbsp;you&nbsp;can&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="6027385">//&nbsp;simply&nbsp;open&nbsp;a&nbsp;TCP&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon.&nbsp;&nbsp;The&nbsp;gccgo</span><br>
<span class="lineno"></span><span class="comment" id="6027450">//&nbsp;sources&nbsp;have&nbsp;a&nbsp;syslog_solaris.go&nbsp;file&nbsp;that&nbsp;implements&nbsp;unixSyslog&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6027521">//&nbsp;return&nbsp;a&nbsp;type&nbsp;that&nbsp;satisfies&nbsp;this&nbsp;interface&nbsp;and&nbsp;simply&nbsp;calls&nbsp;the&nbsp;C</span><br>
<span class="lineno"></span><span class="comment" id="6027591">//&nbsp;library&nbsp;syslog&nbsp;function.</span><br>
<span class="lineno">100</span><span class="keyword" id="6027619">type</span>&nbsp;<span class="ident" id="6027624">serverConn</span>&nbsp;<span class="keyword" id="6027635">interface</span>&nbsp;<span class="op" id="6027645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027648">writeString</span><span class="op" id="6027659">(</span><span class="ident" id="6027660">p</span>&nbsp;<span class="ident" id="6027662"><a href="/gostd/log/syslog/syslog.go.html#6026344">Priority</a></span><span class="op" id="6027670">,</span>&nbsp;<span class="ident" id="6027672">hostname</span><span class="op" id="6027680">,</span>&nbsp;<span class="ident" id="6027682">tag</span><span class="op" id="6027685">,</span>&nbsp;<span class="ident" id="6027687">s</span><span class="op" id="6027688">,</span>&nbsp;<span class="ident" id="6027690">nl</span>&nbsp;<span class="builtintype" id="6027693">string</span><span class="op" id="6027699">)</span>&nbsp;<span class="builtintype" id="6027701">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6027708">close</span><span class="op" id="6027713">(</span><span class="op" id="6027714">)</span>&nbsp;<span class="builtintype" id="6027716">error</span><br>
<span class="lineno"></span><span class="op" id="6027722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6027725">type</span>&nbsp;<span class="ident" id="6027730">netConn</span>&nbsp;<span class="keyword" id="6027738">struct</span>&nbsp;<span class="op" id="6027745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027748">local</span>&nbsp;<span class="builtintype" id="6027754">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027760">conn</span>&nbsp;&nbsp;<span class="ident" id="6027766"><a href="/gostd/log/syslog/syslog.go.html#6026061">net</a></span><span class="op" id="6027769">.</span><span class="ident" id="6027770"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><br>
<span class="lineno"></span><span class="op" id="6027775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6027778">//&nbsp;New&nbsp;establishes&nbsp;a&nbsp;new&nbsp;connection&nbsp;to&nbsp;the&nbsp;system&nbsp;log&nbsp;daemon.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="6027846">//&nbsp;write&nbsp;to&nbsp;the&nbsp;returned&nbsp;writer&nbsp;sends&nbsp;a&nbsp;log&nbsp;message&nbsp;with&nbsp;the&nbsp;given</span><br>
<span class="lineno"></span><span class="comment" id="6027913">//&nbsp;priority&nbsp;and&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="6027937">func</span>&nbsp;<span class="ident" id="6027942">New</span><span class="op" id="6027945">(</span><span class="ident" id="6027946">priority</span>&nbsp;<span class="ident" id="6027955"><a href="/gostd/log/syslog/syslog.go.html#6026344">Priority</a></span><span class="op" id="6027963">,</span>&nbsp;<span class="ident" id="6027965">tag</span>&nbsp;<span class="builtintype" id="6027969">string</span><span class="op" id="6027975">)</span>&nbsp;<span class="op" id="6027977">(</span><span class="ident" id="6027978">w</span>&nbsp;<span class="op" id="6027980">*</span><span class="ident" id="6027981"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6027987">,</span>&nbsp;<span class="ident" id="6027989">err</span>&nbsp;<span class="builtintype" id="6027993">error</span><span class="op" id="6027998">)</span>&nbsp;<span class="op" id="6028000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028003">return</span>&nbsp;<span class="ident" id="6028010"><a href="/gostd/log/syslog/syslog.go.html#6028329">Dial</a></span><span class="op" id="6028014">(</span><span class="string" id="6028015">&#34;&#34;</span><span class="op" id="6028017">,</span>&nbsp;<span class="string" id="6028019">&#34;&#34;</span><span class="op" id="6028021">,</span>&nbsp;<span class="ident" id="6028023"><a href="/gostd/log/syslog/syslog.go.html#6027946">priority</a></span><span class="op" id="6028031">,</span>&nbsp;<span class="ident" id="6028033"><a href="/gostd/log/syslog/syslog.go.html#6027965">tag</a></span><span class="op" id="6028036">)</span><br>
<span class="lineno">115</span><span class="op" id="6028038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6028041">//&nbsp;Dial&nbsp;establishes&nbsp;a&nbsp;connection&nbsp;to&nbsp;a&nbsp;log&nbsp;daemon&nbsp;by&nbsp;connecting&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6028107">//&nbsp;address&nbsp;raddr&nbsp;on&nbsp;the&nbsp;specified&nbsp;network.&nbsp;&nbsp;Each&nbsp;write&nbsp;to&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="6028178">//&nbsp;writer&nbsp;sends&nbsp;a&nbsp;log&nbsp;message&nbsp;with&nbsp;the&nbsp;given&nbsp;facility,&nbsp;severity&nbsp;and</span><br>
<span class="lineno">120</span><span class="comment" id="6028246">//&nbsp;tag.</span><br>
<span class="lineno"></span><span class="comment" id="6028254">//&nbsp;If&nbsp;network&nbsp;is&nbsp;empty,&nbsp;Dial&nbsp;will&nbsp;connect&nbsp;to&nbsp;the&nbsp;local&nbsp;syslog&nbsp;server.</span><br>
<span class="lineno"></span><span class="keyword" id="6028324">func</span>&nbsp;<span class="ident" id="6028329">Dial</span><span class="op" id="6028333">(</span><span class="ident" id="6028334">network</span><span class="op" id="6028341">,</span>&nbsp;<span class="ident" id="6028343">raddr</span>&nbsp;<span class="builtintype" id="6028349">string</span><span class="op" id="6028355">,</span>&nbsp;<span class="ident" id="6028357">priority</span>&nbsp;<span class="ident" id="6028366"><a href="/gostd/log/syslog/syslog.go.html#6026344">Priority</a></span><span class="op" id="6028374">,</span>&nbsp;<span class="ident" id="6028376">tag</span>&nbsp;<span class="builtintype" id="6028380">string</span><span class="op" id="6028386">)</span>&nbsp;<span class="op" id="6028388">(</span><span class="op" id="6028389">*</span><span class="ident" id="6028390"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6028396">,</span>&nbsp;<span class="builtintype" id="6028398">error</span><span class="op" id="6028403">)</span>&nbsp;<span class="op" id="6028405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028408">if</span>&nbsp;<span class="ident" id="6028411"><a href="/gostd/log/syslog/syslog.go.html#6028357">priority</a></span>&nbsp;<span class="op" id="6028420">&lt;</span>&nbsp;<span class="num" id="6028422">0</span>&nbsp;<span class="op" id="6028424">||</span>&nbsp;<span class="ident" id="6028427"><a href="/gostd/log/syslog/syslog.go.html#6028357">priority</a></span>&nbsp;<span class="op" id="6028436">&gt;</span>&nbsp;<span class="ident" id="6028438"><a href="/gostd/log/syslog/syslog.go.html#6027029">LOG_LOCAL7</a></span><span class="op" id="6028448">|</span><span class="ident" id="6028449"><a href="/gostd/log/syslog/syslog.go.html#6026611">LOG_DEBUG</a></span>&nbsp;<span class="op" id="6028459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028463">return</span>&nbsp;<span class="builtintype" id="6028470">nil</span><span class="op" id="6028473">,</span>&nbsp;<span class="ident" id="6028475"><a href="/gostd/log/syslog/syslog.go.html#6026037">errors</a></span><span class="op" id="6028481">.</span><span class="ident" id="6028482"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="6028485">(</span><span class="string" id="6028486">&#34;log/syslog:&nbsp;invalid&nbsp;priority&#34;</span><span class="op" id="6028516">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6028519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028523">if</span>&nbsp;<span class="ident" id="6028526"><a href="/gostd/log/syslog/syslog.go.html#6028376">tag</a></span>&nbsp;<span class="op" id="6028530">==</span>&nbsp;<span class="string" id="6028533">&#34;&#34;</span>&nbsp;<span class="op" id="6028536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028540"><a href="/gostd/log/syslog/syslog.go.html#6028376">tag</a></span>&nbsp;<span class="op" id="6028544">=</span>&nbsp;<span class="ident" id="6028546"><a href="/gostd/log/syslog/syslog.go.html#6026068">os</a></span><span class="op" id="6028548">.</span><span class="ident" id="6028549"><a href="/gostd/os/proc.go.html#2468733">Args</a></span><span class="op" id="6028553">[</span><span class="num" id="6028554">0</span><span class="op" id="6028555">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6028558">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028561">hostname</span><span class="op" id="6028569">,</span>&nbsp;<span class="ident" id="6028571">_</span>&nbsp;<span class="op" id="6028573">:=</span>&nbsp;<span class="ident" id="6028576"><a href="/gostd/log/syslog/syslog.go.html#6026068">os</a></span><span class="op" id="6028578">.</span><span class="ident" id="6028579"><a href="/gostd/os/doc.go.html#2425570">Hostname</a></span><span class="op" id="6028587">(</span><span class="op" id="6028588">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028592">w</span>&nbsp;<span class="op" id="6028594">:=</span>&nbsp;<span class="op" id="6028597">&amp;</span><span class="ident" id="6028598"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6028604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028608"><a href="/gostd/log/syslog/syslog.go.html#6027113">priority</a></span><span class="op" id="6028616">:</span>&nbsp;<span class="ident" id="6028618"><a href="/gostd/log/syslog/syslog.go.html#6028357">priority</a></span><span class="op" id="6028626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028630"><a href="/gostd/log/syslog/syslog.go.html#6027132">tag</a></span><span class="op" id="6028633">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028640"><a href="/gostd/log/syslog/syslog.go.html#6028376">tag</a></span><span class="op" id="6028643">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028647"><a href="/gostd/log/syslog/syslog.go.html#6027149">hostname</a></span><span class="op" id="6028655">:</span>&nbsp;<span class="ident" id="6028657"><a href="/gostd/log/syslog/syslog.go.html#6028561">hostname</a></span><span class="op" id="6028665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028669"><a href="/gostd/log/syslog/syslog.go.html#6027166">network</a></span><span class="op" id="6028676">:</span>&nbsp;&nbsp;<span class="ident" id="6028679"><a href="/gostd/log/syslog/syslog.go.html#6028334">network</a></span><span class="op" id="6028686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028690"><a href="/gostd/log/syslog/syslog.go.html#6027183">raddr</a></span><span class="op" id="6028695">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028700"><a href="/gostd/log/syslog/syslog.go.html#6028343">raddr</a></span><span class="op" id="6028705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6028708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028712"><a href="/gostd/log/syslog/syslog.go.html#6028592">w</a></span><span class="op" id="6028713">.</span><span class="ident" id="6028714"><a href="/gostd/log/syslog/syslog.go.html#6027201">mu</a></span><span class="op" id="6028716">.</span><span class="ident" id="6028717"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="6028721">(</span><span class="op" id="6028722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028725">defer</span>&nbsp;<span class="ident" id="6028731"><a href="/gostd/log/syslog/syslog.go.html#6028592">w</a></span><span class="op" id="6028732">.</span><span class="ident" id="6028733"><a href="/gostd/log/syslog/syslog.go.html#6027201">mu</a></span><span class="op" id="6028735">.</span><span class="ident" id="6028736"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="6028742">(</span><span class="op" id="6028743">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028747">err</span>&nbsp;<span class="op" id="6028751">:=</span>&nbsp;<span class="ident" id="6028754"><a href="/gostd/log/syslog/syslog.go.html#6028592">w</a></span><span class="op" id="6028755">.</span><span class="ident" id="6028756"><a href="/gostd/log/syslog/syslog.go.html#6028928">connect</a></span><span class="op" id="6028763">(</span><span class="op" id="6028764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028767">if</span>&nbsp;<span class="ident" id="6028770"><a href="/gostd/log/syslog/syslog.go.html#6028747">err</a></span>&nbsp;<span class="op" id="6028774">!=</span>&nbsp;<span class="builtintype" id="6028777">nil</span>&nbsp;<span class="op" id="6028781">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028785">return</span>&nbsp;<span class="builtintype" id="6028792">nil</span><span class="op" id="6028795">,</span>&nbsp;<span class="ident" id="6028797"><a href="/gostd/log/syslog/syslog.go.html#6028747">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6028802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028805">return</span>&nbsp;<span class="ident" id="6028812"><a href="/gostd/log/syslog/syslog.go.html#6028592">w</a></span><span class="op" id="6028813">,</span>&nbsp;<span class="ident" id="6028815"><a href="/gostd/log/syslog/syslog.go.html#6028747">err</a></span><br>
<span class="lineno"></span><span class="op" id="6028819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="6028822">//&nbsp;connect&nbsp;makes&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;server.</span><br>
<span class="lineno"></span><span class="comment" id="6028874">//&nbsp;It&nbsp;must&nbsp;be&nbsp;called&nbsp;with&nbsp;w.mu&nbsp;held.</span><br>
<span class="lineno"></span><span class="keyword" id="6028911">func</span>&nbsp;<span class="op" id="6028916">(</span><span class="ident" id="6028917">w</span>&nbsp;<span class="op" id="6028919">*</span><span class="ident" id="6028920"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6028926">)</span>&nbsp;<span class="ident" id="6028928">connect</span><span class="op" id="6028935">(</span><span class="op" id="6028936">)</span>&nbsp;<span class="op" id="6028938">(</span><span class="ident" id="6028939">err</span>&nbsp;<span class="builtintype" id="6028943">error</span><span class="op" id="6028948">)</span>&nbsp;<span class="op" id="6028950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028953">if</span>&nbsp;<span class="ident" id="6028956"><a href="/gostd/log/syslog/syslog.go.html#6028917">w</a></span><span class="op" id="6028957">.</span><span class="ident" id="6028958"><a href="/gostd/log/syslog/syslog.go.html#6027233">conn</a></span>&nbsp;<span class="op" id="6028963">!=</span>&nbsp;<span class="builtintype" id="6028966">nil</span>&nbsp;<span class="op" id="6028970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6028974">//&nbsp;ignore&nbsp;err&nbsp;from&nbsp;close,&nbsp;it&nbsp;makes&nbsp;sense&nbsp;to&nbsp;continue&nbsp;anyway</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029036"><a href="/gostd/log/syslog/syslog.go.html#6028917">w</a></span><span class="op" id="6029037">.</span><span class="ident" id="6029038"><a href="/gostd/log/syslog/syslog.go.html#6027233">conn</a></span><span class="op" id="6029042">.</span><span class="builtinfunc" id="6029043"><a href="/gostd/log/syslog/syslog.go.html#6027708">close</a></span><span class="op" id="6029048">(</span><span class="op" id="6029049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029053"><a href="/gostd/log/syslog/syslog.go.html#6028917">w</a></span><span class="op" id="6029054">.</span><span class="ident" id="6029055"><a href="/gostd/log/syslog/syslog.go.html#6027233">conn</a></span>&nbsp;<span class="op" id="6029060">=</span>&nbsp;<span class="builtintype" id="6029062">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6029067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029071">if</span>&nbsp;<span class="ident" id="6029074"><a href="/gostd/log/syslog/syslog.go.html#6028917">w</a></span><span class="op" id="6029075">.</span><span class="ident" id="6029076"><a href="/gostd/log/syslog/syslog.go.html#6027166">network</a></span>&nbsp;<span class="op" id="6029084">==</span>&nbsp;<span class="string" id="6029087">&#34;&#34;</span>&nbsp;<span class="op" id="6029090">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029094"><a href="/gostd/log/syslog/syslog.go.html#6028917">w</a></span><span class="op" id="6029095">.</span><span class="ident" id="6029096"><a href="/gostd/log/syslog/syslog.go.html#6027233">conn</a></span><span class="op" id="6029100">,</span>&nbsp;<span class="ident" id="6029102"><a href="/gostd/log/syslog/syslog.go.html#6028939">err</a></span>&nbsp;<span class="op" id="6029106">=</span>&nbsp;<span class="ident" id="6029108"><a href="/gostd/log/syslog/syslog_unix.go.html#6033499">unixSyslog</a></span><span class="op" id="6029118">(</span><span class="op" id="6029119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029123">if</span>&nbsp;<span class="ident" id="6029126"><a href="/gostd/log/syslog/syslog.go.html#6028917">w</a></span><span class="op" id="6029127">.</span><span class="ident" id="6029128"><a href="/gostd/log/syslog/syslog.go.html#6027149">hostname</a></span>&nbsp;<span class="op" id="6029137">==</span>&nbsp;<span class="string" id="6029140">&#34;&#34;</span>&nbsp;<span class="op" id="6029143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029148"><a href="/gostd/log/syslog/syslog.go.html#6028917">w</a></span><span class="op" id="6029149">.</span><span class="ident" id="6029150"><a href="/gostd/log/syslog/syslog.go.html#6027149">hostname</a></span>&nbsp;<span class="op" id="6029159">=</span>&nbsp;<span class="string" id="6029161">&#34;localhost&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6029175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6029178">}</span>&nbsp;<span class="keyword" id="6029180">else</span>&nbsp;<span class="op" id="6029185">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029189">var</span>&nbsp;<span class="ident" id="6029193">c</span>&nbsp;<span class="ident" id="6029195"><a href="/gostd/log/syslog/syslog.go.html#6026061">net</a></span><span class="op" id="6029198">.</span><span class="ident" id="6029199"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029206"><a href="/gostd/log/syslog/syslog.go.html#6029193">c</a></span><span class="op" id="6029207">,</span>&nbsp;<span class="ident" id="6029209"><a href="/gostd/log/syslog/syslog.go.html#6028939">err</a></span>&nbsp;<span class="op" id="6029213">=</span>&nbsp;<span class="ident" id="6029215"><a href="/gostd/log/syslog/syslog.go.html#6026061">net</a></span><span class="op" id="6029218">.</span><span class="ident" id="6029219"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6029223">(</span><span class="ident" id="6029224"><a href="/gostd/log/syslog/syslog.go.html#6028917">w</a></span><span class="op" id="6029225">.</span><span class="ident" id="6029226"><a href="/gostd/log/syslog/syslog.go.html#6027166">network</a></span><span class="op" id="6029233">,</span>&nbsp;<span class="ident" id="6029235"><a href="/gostd/log/syslog/syslog.go.html#6028917">w</a></span><span class="op" id="6029236">.</span><span class="ident" id="6029237"><a href="/gostd/log/syslog/syslog.go.html#6027183">raddr</a></span><span class="op" id="6029242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029246">if</span>&nbsp;<span class="ident" id="6029249"><a href="/gostd/log/syslog/syslog.go.html#6028939">err</a></span>&nbsp;<span class="op" id="6029253">==</span>&nbsp;<span class="builtintype" id="6029256">nil</span>&nbsp;<span class="op" id="6029260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029265"><a href="/gostd/log/syslog/syslog.go.html#6028917">w</a></span><span class="op" id="6029266">.</span><span class="ident" id="6029267"><a href="/gostd/log/syslog/syslog.go.html#6027233">conn</a></span>&nbsp;<span class="op" id="6029272">=</span>&nbsp;<span class="op" id="6029274">&amp;</span><span class="ident" id="6029275"><a href="/gostd/log/syslog/syslog.go.html#6027730">netConn</a></span><span class="op" id="6029282">{</span><span class="ident" id="6029283"><a href="/gostd/log/syslog/syslog.go.html#6027760">conn</a></span><span class="op" id="6029287">:</span>&nbsp;<span class="ident" id="6029289"><a href="/gostd/log/syslog/syslog.go.html#6029193">c</a></span><span class="op" id="6029290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029295">if</span>&nbsp;<span class="ident" id="6029298"><a href="/gostd/log/syslog/syslog.go.html#6028917">w</a></span><span class="op" id="6029299">.</span><span class="ident" id="6029300"><a href="/gostd/log/syslog/syslog.go.html#6027149">hostname</a></span>&nbsp;<span class="op" id="6029309">==</span>&nbsp;<span class="string" id="6029312">&#34;&#34;</span>&nbsp;<span class="op" id="6029315">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029321"><a href="/gostd/log/syslog/syslog.go.html#6028917">w</a></span><span class="op" id="6029322">.</span><span class="ident" id="6029323"><a href="/gostd/log/syslog/syslog.go.html#6027149">hostname</a></span>&nbsp;<span class="op" id="6029332">=</span>&nbsp;<span class="ident" id="6029334"><a href="/gostd/log/syslog/syslog.go.html#6029193">c</a></span><span class="op" id="6029335">.</span><span class="ident" id="6029336"><a href="/gostd/net/net.go.html#3335052">LocalAddr</a></span><span class="op" id="6029345">(</span><span class="op" id="6029346">)</span><span class="op" id="6029347">.</span><span class="ident" id="6029348"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6029354">(</span><span class="op" id="6029355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6029360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6029364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6029367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029370">return</span><br>
<span class="lineno">175</span><span class="op" id="6029377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6029380">//&nbsp;Write&nbsp;sends&nbsp;a&nbsp;log&nbsp;message&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon.</span><br>
<span class="lineno"></span><span class="keyword" id="6029431">func</span>&nbsp;<span class="op" id="6029436">(</span><span class="ident" id="6029437">w</span>&nbsp;<span class="op" id="6029439">*</span><span class="ident" id="6029440"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6029446">)</span>&nbsp;<span class="ident" id="6029448">Write</span><span class="op" id="6029453">(</span><span class="ident" id="6029454">b</span>&nbsp;<span class="op" id="6029456">[</span><span class="op" id="6029457">]</span><span class="builtintype" id="6029458">byte</span><span class="op" id="6029462">)</span>&nbsp;<span class="op" id="6029464">(</span><span class="builtintype" id="6029465">int</span><span class="op" id="6029468">,</span>&nbsp;<span class="builtintype" id="6029470">error</span><span class="op" id="6029475">)</span>&nbsp;<span class="op" id="6029477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029480">return</span>&nbsp;<span class="ident" id="6029487"><a href="/gostd/log/syslog/syslog.go.html#6029437">w</a></span><span class="op" id="6029488">.</span><span class="ident" id="6029489"><a href="/gostd/log/syslog/syslog.go.html#6031279">writeAndRetry</a></span><span class="op" id="6029502">(</span><span class="ident" id="6029503"><a href="/gostd/log/syslog/syslog.go.html#6029437">w</a></span><span class="op" id="6029504">.</span><span class="ident" id="6029505"><a href="/gostd/log/syslog/syslog.go.html#6027113">priority</a></span><span class="op" id="6029513">,</span>&nbsp;<span class="builtintype" id="6029515">string</span><span class="op" id="6029521">(</span><span class="ident" id="6029522"><a href="/gostd/log/syslog/syslog.go.html#6029454">b</a></span><span class="op" id="6029523">)</span><span class="op" id="6029524">)</span><br>
<span class="lineno">180</span><span class="op" id="6029526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6029529">//&nbsp;Close&nbsp;closes&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon.</span><br>
<span class="lineno"></span><span class="keyword" id="6029580">func</span>&nbsp;<span class="op" id="6029585">(</span><span class="ident" id="6029586">w</span>&nbsp;<span class="op" id="6029588">*</span><span class="ident" id="6029589"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6029595">)</span>&nbsp;<span class="ident" id="6029597">Close</span><span class="op" id="6029602">(</span><span class="op" id="6029603">)</span>&nbsp;<span class="builtintype" id="6029605">error</span>&nbsp;<span class="op" id="6029611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029614"><a href="/gostd/log/syslog/syslog.go.html#6029586">w</a></span><span class="op" id="6029615">.</span><span class="ident" id="6029616"><a href="/gostd/log/syslog/syslog.go.html#6027201">mu</a></span><span class="op" id="6029618">.</span><span class="ident" id="6029619"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="6029623">(</span><span class="op" id="6029624">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029627">defer</span>&nbsp;<span class="ident" id="6029633"><a href="/gostd/log/syslog/syslog.go.html#6029586">w</a></span><span class="op" id="6029634">.</span><span class="ident" id="6029635"><a href="/gostd/log/syslog/syslog.go.html#6027201">mu</a></span><span class="op" id="6029637">.</span><span class="ident" id="6029638"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="6029644">(</span><span class="op" id="6029645">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029649">if</span>&nbsp;<span class="ident" id="6029652"><a href="/gostd/log/syslog/syslog.go.html#6029586">w</a></span><span class="op" id="6029653">.</span><span class="ident" id="6029654"><a href="/gostd/log/syslog/syslog.go.html#6027233">conn</a></span>&nbsp;<span class="op" id="6029659">!=</span>&nbsp;<span class="builtintype" id="6029662">nil</span>&nbsp;<span class="op" id="6029666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029670">err</span>&nbsp;<span class="op" id="6029674">:=</span>&nbsp;<span class="ident" id="6029677"><a href="/gostd/log/syslog/syslog.go.html#6029586">w</a></span><span class="op" id="6029678">.</span><span class="ident" id="6029679"><a href="/gostd/log/syslog/syslog.go.html#6027233">conn</a></span><span class="op" id="6029683">.</span><span class="builtinfunc" id="6029684"><a href="/gostd/log/syslog/syslog.go.html#6027708">close</a></span><span class="op" id="6029689">(</span><span class="op" id="6029690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029694"><a href="/gostd/log/syslog/syslog.go.html#6029586">w</a></span><span class="op" id="6029695">.</span><span class="ident" id="6029696"><a href="/gostd/log/syslog/syslog.go.html#6027233">conn</a></span>&nbsp;<span class="op" id="6029701">=</span>&nbsp;<span class="builtintype" id="6029703">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029709">return</span>&nbsp;<span class="ident" id="6029716"><a href="/gostd/log/syslog/syslog.go.html#6029670">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6029721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029724">return</span>&nbsp;<span class="builtintype" id="6029731">nil</span><br>
<span class="lineno"></span><span class="op" id="6029735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="6029738">//&nbsp;Emerg&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_EMERG,&nbsp;ignoring&nbsp;the&nbsp;severity</span><br>
<span class="lineno"></span><span class="comment" id="6029809">//&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="6029827">func</span>&nbsp;<span class="op" id="6029832">(</span><span class="ident" id="6029833">w</span>&nbsp;<span class="op" id="6029835">*</span><span class="ident" id="6029836"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6029842">)</span>&nbsp;<span class="ident" id="6029844">Emerg</span><span class="op" id="6029849">(</span><span class="ident" id="6029850">m</span>&nbsp;<span class="builtintype" id="6029852">string</span><span class="op" id="6029858">)</span>&nbsp;<span class="op" id="6029860">(</span><span class="ident" id="6029861">err</span>&nbsp;<span class="builtintype" id="6029865">error</span><span class="op" id="6029870">)</span>&nbsp;<span class="op" id="6029872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029875">_</span><span class="op" id="6029876">,</span>&nbsp;<span class="ident" id="6029878"><a href="/gostd/log/syslog/syslog.go.html#6029861">err</a></span>&nbsp;<span class="op" id="6029882">=</span>&nbsp;<span class="ident" id="6029884"><a href="/gostd/log/syslog/syslog.go.html#6029833">w</a></span><span class="op" id="6029885">.</span><span class="ident" id="6029886"><a href="/gostd/log/syslog/syslog.go.html#6031279">writeAndRetry</a></span><span class="op" id="6029899">(</span><span class="ident" id="6029900"><a href="/gostd/log/syslog/syslog.go.html#6026519">LOG_EMERG</a></span><span class="op" id="6029909">,</span>&nbsp;<span class="ident" id="6029911"><a href="/gostd/log/syslog/syslog.go.html#6029850">m</a></span><span class="op" id="6029912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029915">return</span>&nbsp;<span class="ident" id="6029922"><a href="/gostd/log/syslog/syslog.go.html#6029861">err</a></span><br>
<span class="lineno">200</span><span class="op" id="6029926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6029929">//&nbsp;Alert&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_ALERT,&nbsp;ignoring&nbsp;the&nbsp;severity</span><br>
<span class="lineno"></span><span class="comment" id="6030000">//&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="6030018">func</span>&nbsp;<span class="op" id="6030023">(</span><span class="ident" id="6030024">w</span>&nbsp;<span class="op" id="6030026">*</span><span class="ident" id="6030027"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6030033">)</span>&nbsp;<span class="ident" id="6030035">Alert</span><span class="op" id="6030040">(</span><span class="ident" id="6030041">m</span>&nbsp;<span class="builtintype" id="6030043">string</span><span class="op" id="6030049">)</span>&nbsp;<span class="op" id="6030051">(</span><span class="ident" id="6030052">err</span>&nbsp;<span class="builtintype" id="6030056">error</span><span class="op" id="6030061">)</span>&nbsp;<span class="op" id="6030063">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6030066">_</span><span class="op" id="6030067">,</span>&nbsp;<span class="ident" id="6030069"><a href="/gostd/log/syslog/syslog.go.html#6030052">err</a></span>&nbsp;<span class="op" id="6030073">=</span>&nbsp;<span class="ident" id="6030075"><a href="/gostd/log/syslog/syslog.go.html#6030024">w</a></span><span class="op" id="6030076">.</span><span class="ident" id="6030077"><a href="/gostd/log/syslog/syslog.go.html#6031279">writeAndRetry</a></span><span class="op" id="6030090">(</span><span class="ident" id="6030091"><a href="/gostd/log/syslog/syslog.go.html#6026546">LOG_ALERT</a></span><span class="op" id="6030100">,</span>&nbsp;<span class="ident" id="6030102"><a href="/gostd/log/syslog/syslog.go.html#6030041">m</a></span><span class="op" id="6030103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6030106">return</span>&nbsp;<span class="ident" id="6030113"><a href="/gostd/log/syslog/syslog.go.html#6030052">err</a></span><br>
<span class="lineno"></span><span class="op" id="6030117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6030120">//&nbsp;Crit&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_CRIT,&nbsp;ignoring&nbsp;the&nbsp;severity</span><br>
<span class="lineno">210</span><span class="comment" id="6030189">//&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="6030207">func</span>&nbsp;<span class="op" id="6030212">(</span><span class="ident" id="6030213">w</span>&nbsp;<span class="op" id="6030215">*</span><span class="ident" id="6030216"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6030222">)</span>&nbsp;<span class="ident" id="6030224">Crit</span><span class="op" id="6030228">(</span><span class="ident" id="6030229">m</span>&nbsp;<span class="builtintype" id="6030231">string</span><span class="op" id="6030237">)</span>&nbsp;<span class="op" id="6030239">(</span><span class="ident" id="6030240">err</span>&nbsp;<span class="builtintype" id="6030244">error</span><span class="op" id="6030249">)</span>&nbsp;<span class="op" id="6030251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6030254">_</span><span class="op" id="6030255">,</span>&nbsp;<span class="ident" id="6030257"><a href="/gostd/log/syslog/syslog.go.html#6030240">err</a></span>&nbsp;<span class="op" id="6030261">=</span>&nbsp;<span class="ident" id="6030263"><a href="/gostd/log/syslog/syslog.go.html#6030213">w</a></span><span class="op" id="6030264">.</span><span class="ident" id="6030265"><a href="/gostd/log/syslog/syslog.go.html#6031279">writeAndRetry</a></span><span class="op" id="6030278">(</span><span class="ident" id="6030279"><a href="/gostd/log/syslog/syslog.go.html#6026557">LOG_CRIT</a></span><span class="op" id="6030287">,</span>&nbsp;<span class="ident" id="6030289"><a href="/gostd/log/syslog/syslog.go.html#6030229">m</a></span><span class="op" id="6030290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6030293">return</span>&nbsp;<span class="ident" id="6030300"><a href="/gostd/log/syslog/syslog.go.html#6030240">err</a></span><br>
<span class="lineno"></span><span class="op" id="6030304">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="comment" id="6030307">//&nbsp;Err&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_ERR,&nbsp;ignoring&nbsp;the&nbsp;severity</span><br>
<span class="lineno"></span><span class="comment" id="6030374">//&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="6030392">func</span>&nbsp;<span class="op" id="6030397">(</span><span class="ident" id="6030398">w</span>&nbsp;<span class="op" id="6030400">*</span><span class="ident" id="6030401"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6030407">)</span>&nbsp;<span class="ident" id="6030409">Err</span><span class="op" id="6030412">(</span><span class="ident" id="6030413">m</span>&nbsp;<span class="builtintype" id="6030415">string</span><span class="op" id="6030421">)</span>&nbsp;<span class="op" id="6030423">(</span><span class="ident" id="6030424">err</span>&nbsp;<span class="builtintype" id="6030428">error</span><span class="op" id="6030433">)</span>&nbsp;<span class="op" id="6030435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6030438">_</span><span class="op" id="6030439">,</span>&nbsp;<span class="ident" id="6030441"><a href="/gostd/log/syslog/syslog.go.html#6030424">err</a></span>&nbsp;<span class="op" id="6030445">=</span>&nbsp;<span class="ident" id="6030447"><a href="/gostd/log/syslog/syslog.go.html#6030398">w</a></span><span class="op" id="6030448">.</span><span class="ident" id="6030449"><a href="/gostd/log/syslog/syslog.go.html#6031279">writeAndRetry</a></span><span class="op" id="6030462">(</span><span class="ident" id="6030463"><a href="/gostd/log/syslog/syslog.go.html#6026567">LOG_ERR</a></span><span class="op" id="6030470">,</span>&nbsp;<span class="ident" id="6030472"><a href="/gostd/log/syslog/syslog.go.html#6030413">m</a></span><span class="op" id="6030473">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6030476">return</span>&nbsp;<span class="ident" id="6030483"><a href="/gostd/log/syslog/syslog.go.html#6030424">err</a></span><br>
<span class="lineno"></span><span class="op" id="6030487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6030490">//&nbsp;Warning&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_WARNING,&nbsp;ignoring&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6030556">//&nbsp;severity&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno">225</span><span class="keyword" id="6030583">func</span>&nbsp;<span class="op" id="6030588">(</span><span class="ident" id="6030589">w</span>&nbsp;<span class="op" id="6030591">*</span><span class="ident" id="6030592"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6030598">)</span>&nbsp;<span class="ident" id="6030600">Warning</span><span class="op" id="6030607">(</span><span class="ident" id="6030608">m</span>&nbsp;<span class="builtintype" id="6030610">string</span><span class="op" id="6030616">)</span>&nbsp;<span class="op" id="6030618">(</span><span class="ident" id="6030619">err</span>&nbsp;<span class="builtintype" id="6030623">error</span><span class="op" id="6030628">)</span>&nbsp;<span class="op" id="6030630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6030633">_</span><span class="op" id="6030634">,</span>&nbsp;<span class="ident" id="6030636"><a href="/gostd/log/syslog/syslog.go.html#6030619">err</a></span>&nbsp;<span class="op" id="6030640">=</span>&nbsp;<span class="ident" id="6030642"><a href="/gostd/log/syslog/syslog.go.html#6030589">w</a></span><span class="op" id="6030643">.</span><span class="ident" id="6030644"><a href="/gostd/log/syslog/syslog.go.html#6031279">writeAndRetry</a></span><span class="op" id="6030657">(</span><span class="ident" id="6030658"><a href="/gostd/log/syslog/syslog.go.html#6026576">LOG_WARNING</a></span><span class="op" id="6030669">,</span>&nbsp;<span class="ident" id="6030671"><a href="/gostd/log/syslog/syslog.go.html#6030608">m</a></span><span class="op" id="6030672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6030675">return</span>&nbsp;<span class="ident" id="6030682"><a href="/gostd/log/syslog/syslog.go.html#6030619">err</a></span><br>
<span class="lineno"></span><span class="op" id="6030686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="6030689">//&nbsp;Notice&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_NOTICE,&nbsp;ignoring&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6030753">//&nbsp;severity&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="6030780">func</span>&nbsp;<span class="op" id="6030785">(</span><span class="ident" id="6030786">w</span>&nbsp;<span class="op" id="6030788">*</span><span class="ident" id="6030789"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6030795">)</span>&nbsp;<span class="ident" id="6030797">Notice</span><span class="op" id="6030803">(</span><span class="ident" id="6030804">m</span>&nbsp;<span class="builtintype" id="6030806">string</span><span class="op" id="6030812">)</span>&nbsp;<span class="op" id="6030814">(</span><span class="ident" id="6030815">err</span>&nbsp;<span class="builtintype" id="6030819">error</span><span class="op" id="6030824">)</span>&nbsp;<span class="op" id="6030826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6030829">_</span><span class="op" id="6030830">,</span>&nbsp;<span class="ident" id="6030832"><a href="/gostd/log/syslog/syslog.go.html#6030815">err</a></span>&nbsp;<span class="op" id="6030836">=</span>&nbsp;<span class="ident" id="6030838"><a href="/gostd/log/syslog/syslog.go.html#6030786">w</a></span><span class="op" id="6030839">.</span><span class="ident" id="6030840"><a href="/gostd/log/syslog/syslog.go.html#6031279">writeAndRetry</a></span><span class="op" id="6030853">(</span><span class="ident" id="6030854"><a href="/gostd/log/syslog/syslog.go.html#6026589">LOG_NOTICE</a></span><span class="op" id="6030864">,</span>&nbsp;<span class="ident" id="6030866"><a href="/gostd/log/syslog/syslog.go.html#6030804">m</a></span><span class="op" id="6030867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6030870">return</span>&nbsp;<span class="ident" id="6030877"><a href="/gostd/log/syslog/syslog.go.html#6030815">err</a></span><br>
<span class="lineno">235</span><span class="op" id="6030881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6030884">//&nbsp;Info&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_INFO,&nbsp;ignoring&nbsp;the&nbsp;severity</span><br>
<span class="lineno"></span><span class="comment" id="6030953">//&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="6030971">func</span>&nbsp;<span class="op" id="6030976">(</span><span class="ident" id="6030977">w</span>&nbsp;<span class="op" id="6030979">*</span><span class="ident" id="6030980"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6030986">)</span>&nbsp;<span class="ident" id="6030988">Info</span><span class="op" id="6030992">(</span><span class="ident" id="6030993">m</span>&nbsp;<span class="builtintype" id="6030995">string</span><span class="op" id="6031001">)</span>&nbsp;<span class="op" id="6031003">(</span><span class="ident" id="6031004">err</span>&nbsp;<span class="builtintype" id="6031008">error</span><span class="op" id="6031013">)</span>&nbsp;<span class="op" id="6031015">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031018">_</span><span class="op" id="6031019">,</span>&nbsp;<span class="ident" id="6031021"><a href="/gostd/log/syslog/syslog.go.html#6031004">err</a></span>&nbsp;<span class="op" id="6031025">=</span>&nbsp;<span class="ident" id="6031027"><a href="/gostd/log/syslog/syslog.go.html#6030977">w</a></span><span class="op" id="6031028">.</span><span class="ident" id="6031029"><a href="/gostd/log/syslog/syslog.go.html#6031279">writeAndRetry</a></span><span class="op" id="6031042">(</span><span class="ident" id="6031043"><a href="/gostd/log/syslog/syslog.go.html#6026601">LOG_INFO</a></span><span class="op" id="6031051">,</span>&nbsp;<span class="ident" id="6031053"><a href="/gostd/log/syslog/syslog.go.html#6030993">m</a></span><span class="op" id="6031054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031057">return</span>&nbsp;<span class="ident" id="6031064"><a href="/gostd/log/syslog/syslog.go.html#6031004">err</a></span><br>
<span class="lineno"></span><span class="op" id="6031068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6031071">//&nbsp;Debug&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_DEBUG,&nbsp;ignoring&nbsp;the&nbsp;severity</span><br>
<span class="lineno">245</span><span class="comment" id="6031142">//&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="6031160">func</span>&nbsp;<span class="op" id="6031165">(</span><span class="ident" id="6031166">w</span>&nbsp;<span class="op" id="6031168">*</span><span class="ident" id="6031169"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6031175">)</span>&nbsp;<span class="ident" id="6031177">Debug</span><span class="op" id="6031182">(</span><span class="ident" id="6031183">m</span>&nbsp;<span class="builtintype" id="6031185">string</span><span class="op" id="6031191">)</span>&nbsp;<span class="op" id="6031193">(</span><span class="ident" id="6031194">err</span>&nbsp;<span class="builtintype" id="6031198">error</span><span class="op" id="6031203">)</span>&nbsp;<span class="op" id="6031205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031208">_</span><span class="op" id="6031209">,</span>&nbsp;<span class="ident" id="6031211"><a href="/gostd/log/syslog/syslog.go.html#6031194">err</a></span>&nbsp;<span class="op" id="6031215">=</span>&nbsp;<span class="ident" id="6031217"><a href="/gostd/log/syslog/syslog.go.html#6031166">w</a></span><span class="op" id="6031218">.</span><span class="ident" id="6031219"><a href="/gostd/log/syslog/syslog.go.html#6031279">writeAndRetry</a></span><span class="op" id="6031232">(</span><span class="ident" id="6031233"><a href="/gostd/log/syslog/syslog.go.html#6026611">LOG_DEBUG</a></span><span class="op" id="6031242">,</span>&nbsp;<span class="ident" id="6031244"><a href="/gostd/log/syslog/syslog.go.html#6031183">m</a></span><span class="op" id="6031245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031248">return</span>&nbsp;<span class="ident" id="6031255"><a href="/gostd/log/syslog/syslog.go.html#6031194">err</a></span><br>
<span class="lineno"></span><span class="op" id="6031259">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="keyword" id="6031262">func</span>&nbsp;<span class="op" id="6031267">(</span><span class="ident" id="6031268">w</span>&nbsp;<span class="op" id="6031270">*</span><span class="ident" id="6031271"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6031277">)</span>&nbsp;<span class="ident" id="6031279">writeAndRetry</span><span class="op" id="6031292">(</span><span class="ident" id="6031293">p</span>&nbsp;<span class="ident" id="6031295"><a href="/gostd/log/syslog/syslog.go.html#6026344">Priority</a></span><span class="op" id="6031303">,</span>&nbsp;<span class="ident" id="6031305">s</span>&nbsp;<span class="builtintype" id="6031307">string</span><span class="op" id="6031313">)</span>&nbsp;<span class="op" id="6031315">(</span><span class="builtintype" id="6031316">int</span><span class="op" id="6031319">,</span>&nbsp;<span class="builtintype" id="6031321">error</span><span class="op" id="6031326">)</span>&nbsp;<span class="op" id="6031328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031331">pr</span>&nbsp;<span class="op" id="6031334">:=</span>&nbsp;<span class="op" id="6031337">(</span><span class="ident" id="6031338"><a href="/gostd/log/syslog/syslog.go.html#6031268">w</a></span><span class="op" id="6031339">.</span><span class="ident" id="6031340"><a href="/gostd/log/syslog/syslog.go.html#6027113">priority</a></span>&nbsp;<span class="op" id="6031349">&amp;</span>&nbsp;<span class="ident" id="6031351"><a href="/gostd/log/syslog/syslog.go.html#6026390">facilityMask</a></span><span class="op" id="6031363">)</span>&nbsp;<span class="op" id="6031365">|</span>&nbsp;<span class="op" id="6031367">(</span><span class="ident" id="6031368"><a href="/gostd/log/syslog/syslog.go.html#6031293">p</a></span>&nbsp;<span class="op" id="6031370">&amp;</span>&nbsp;<span class="ident" id="6031372"><a href="/gostd/log/syslog/syslog.go.html#6026364">severityMask</a></span><span class="op" id="6031384">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031388"><a href="/gostd/log/syslog/syslog.go.html#6031268">w</a></span><span class="op" id="6031389">.</span><span class="ident" id="6031390"><a href="/gostd/log/syslog/syslog.go.html#6027201">mu</a></span><span class="op" id="6031392">.</span><span class="ident" id="6031393"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="6031397">(</span><span class="op" id="6031398">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031401">defer</span>&nbsp;<span class="ident" id="6031407"><a href="/gostd/log/syslog/syslog.go.html#6031268">w</a></span><span class="op" id="6031408">.</span><span class="ident" id="6031409"><a href="/gostd/log/syslog/syslog.go.html#6027201">mu</a></span><span class="op" id="6031411">.</span><span class="ident" id="6031412"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="6031418">(</span><span class="op" id="6031419">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031423">if</span>&nbsp;<span class="ident" id="6031426"><a href="/gostd/log/syslog/syslog.go.html#6031268">w</a></span><span class="op" id="6031427">.</span><span class="ident" id="6031428"><a href="/gostd/log/syslog/syslog.go.html#6027233">conn</a></span>&nbsp;<span class="op" id="6031433">!=</span>&nbsp;<span class="builtintype" id="6031436">nil</span>&nbsp;<span class="op" id="6031440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031444">if</span>&nbsp;<span class="ident" id="6031447">n</span><span class="op" id="6031448">,</span>&nbsp;<span class="ident" id="6031450">err</span>&nbsp;<span class="op" id="6031454">:=</span>&nbsp;<span class="ident" id="6031457"><a href="/gostd/log/syslog/syslog.go.html#6031268">w</a></span><span class="op" id="6031458">.</span><span class="ident" id="6031459"><a href="/gostd/log/syslog/syslog.go.html#6031733">write</a></span><span class="op" id="6031464">(</span><span class="ident" id="6031465"><a href="/gostd/log/syslog/syslog.go.html#6031331">pr</a></span><span class="op" id="6031467">,</span>&nbsp;<span class="ident" id="6031469"><a href="/gostd/log/syslog/syslog.go.html#6031305">s</a></span><span class="op" id="6031470">)</span><span class="op" id="6031471">;</span>&nbsp;<span class="ident" id="6031473"><a href="/gostd/log/syslog/syslog.go.html#6031450">err</a></span>&nbsp;<span class="op" id="6031477">==</span>&nbsp;<span class="builtintype" id="6031480">nil</span>&nbsp;<span class="op" id="6031484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031489">return</span>&nbsp;<span class="ident" id="6031496"><a href="/gostd/log/syslog/syslog.go.html#6031447">n</a></span><span class="op" id="6031497">,</span>&nbsp;<span class="ident" id="6031499"><a href="/gostd/log/syslog/syslog.go.html#6031450">err</a></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6031505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6031508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031511">if</span>&nbsp;<span class="ident" id="6031514">err</span>&nbsp;<span class="op" id="6031518">:=</span>&nbsp;<span class="ident" id="6031521"><a href="/gostd/log/syslog/syslog.go.html#6031268">w</a></span><span class="op" id="6031522">.</span><span class="ident" id="6031523"><a href="/gostd/log/syslog/syslog.go.html#6028928">connect</a></span><span class="op" id="6031530">(</span><span class="op" id="6031531">)</span><span class="op" id="6031532">;</span>&nbsp;<span class="ident" id="6031534"><a href="/gostd/log/syslog/syslog.go.html#6031514">err</a></span>&nbsp;<span class="op" id="6031538">!=</span>&nbsp;<span class="builtintype" id="6031541">nil</span>&nbsp;<span class="op" id="6031545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031549">return</span>&nbsp;<span class="num" id="6031556">0</span><span class="op" id="6031557">,</span>&nbsp;<span class="ident" id="6031559"><a href="/gostd/log/syslog/syslog.go.html#6031514">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6031564">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031567">return</span>&nbsp;<span class="ident" id="6031574"><a href="/gostd/log/syslog/syslog.go.html#6031268">w</a></span><span class="op" id="6031575">.</span><span class="ident" id="6031576"><a href="/gostd/log/syslog/syslog.go.html#6031733">write</a></span><span class="op" id="6031581">(</span><span class="ident" id="6031582"><a href="/gostd/log/syslog/syslog.go.html#6031331">pr</a></span><span class="op" id="6031584">,</span>&nbsp;<span class="ident" id="6031586"><a href="/gostd/log/syslog/syslog.go.html#6031305">s</a></span><span class="op" id="6031587">)</span><br>
<span class="lineno"></span><span class="op" id="6031589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6031592">//&nbsp;write&nbsp;generates&nbsp;and&nbsp;writes&nbsp;a&nbsp;syslog&nbsp;formatted&nbsp;string.&nbsp;The</span><br>
<span class="lineno"></span><span class="comment" id="6031653">//&nbsp;format&nbsp;is&nbsp;as&nbsp;follows:&nbsp;&lt;PRI&gt;TIMESTAMP&nbsp;HOSTNAME&nbsp;TAG[PID]:&nbsp;MSG</span><br>
<span class="lineno">270</span><span class="keyword" id="6031716">func</span>&nbsp;<span class="op" id="6031721">(</span><span class="ident" id="6031722">w</span>&nbsp;<span class="op" id="6031724">*</span><span class="ident" id="6031725"><a href="/gostd/log/syslog/syslog.go.html#6027096">Writer</a></span><span class="op" id="6031731">)</span>&nbsp;<span class="ident" id="6031733">write</span><span class="op" id="6031738">(</span><span class="ident" id="6031739">p</span>&nbsp;<span class="ident" id="6031741"><a href="/gostd/log/syslog/syslog.go.html#6026344">Priority</a></span><span class="op" id="6031749">,</span>&nbsp;<span class="ident" id="6031751">msg</span>&nbsp;<span class="builtintype" id="6031755">string</span><span class="op" id="6031761">)</span>&nbsp;<span class="op" id="6031763">(</span><span class="builtintype" id="6031764">int</span><span class="op" id="6031767">,</span>&nbsp;<span class="builtintype" id="6031769">error</span><span class="op" id="6031774">)</span>&nbsp;<span class="op" id="6031776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6031779">//&nbsp;ensure&nbsp;it&nbsp;ends&nbsp;in&nbsp;a&nbsp;\n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031806">nl</span>&nbsp;<span class="op" id="6031809">:=</span>&nbsp;<span class="string" id="6031812">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031816">if</span>&nbsp;<span class="op" id="6031819">!</span><span class="ident" id="6031820"><a href="/gostd/log/syslog/syslog.go.html#6026074">strings</a></span><span class="op" id="6031827">.</span><span class="ident" id="6031828"><a href="/gostd/strings/strings.go.html#2975527">HasSuffix</a></span><span class="op" id="6031837">(</span><span class="ident" id="6031838"><a href="/gostd/log/syslog/syslog.go.html#6031751">msg</a></span><span class="op" id="6031841">,</span>&nbsp;<span class="string" id="6031843">&#34;\n&#34;</span><span class="op" id="6031847">)</span>&nbsp;<span class="op" id="6031849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031853"><a href="/gostd/log/syslog/syslog.go.html#6031806">nl</a></span>&nbsp;<span class="op" id="6031856">=</span>&nbsp;<span class="string" id="6031858">&#34;\n&#34;</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6031864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031868">err</span>&nbsp;<span class="op" id="6031872">:=</span>&nbsp;<span class="ident" id="6031875"><a href="/gostd/log/syslog/syslog.go.html#6031722">w</a></span><span class="op" id="6031876">.</span><span class="ident" id="6031877"><a href="/gostd/log/syslog/syslog.go.html#6027233">conn</a></span><span class="op" id="6031881">.</span><span class="ident" id="6031882"><a href="/gostd/log/syslog/syslog.go.html#6027648">writeString</a></span><span class="op" id="6031893">(</span><span class="ident" id="6031894"><a href="/gostd/log/syslog/syslog.go.html#6031739">p</a></span><span class="op" id="6031895">,</span>&nbsp;<span class="ident" id="6031897"><a href="/gostd/log/syslog/syslog.go.html#6031722">w</a></span><span class="op" id="6031898">.</span><span class="ident" id="6031899"><a href="/gostd/log/syslog/syslog.go.html#6027149">hostname</a></span><span class="op" id="6031907">,</span>&nbsp;<span class="ident" id="6031909"><a href="/gostd/log/syslog/syslog.go.html#6031722">w</a></span><span class="op" id="6031910">.</span><span class="ident" id="6031911"><a href="/gostd/log/syslog/syslog.go.html#6027132">tag</a></span><span class="op" id="6031914">,</span>&nbsp;<span class="ident" id="6031916"><a href="/gostd/log/syslog/syslog.go.html#6031751">msg</a></span><span class="op" id="6031919">,</span>&nbsp;<span class="ident" id="6031921"><a href="/gostd/log/syslog/syslog.go.html#6031806">nl</a></span><span class="op" id="6031923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031926">if</span>&nbsp;<span class="ident" id="6031929"><a href="/gostd/log/syslog/syslog.go.html#6031868">err</a></span>&nbsp;<span class="op" id="6031933">!=</span>&nbsp;<span class="builtintype" id="6031936">nil</span>&nbsp;<span class="op" id="6031940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031944">return</span>&nbsp;<span class="num" id="6031951">0</span><span class="op" id="6031952">,</span>&nbsp;<span class="ident" id="6031954"><a href="/gostd/log/syslog/syslog.go.html#6031868">err</a></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6031959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6031962">//&nbsp;Note:&nbsp;return&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;input,&nbsp;not&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6032022">//&nbsp;bytes&nbsp;printed&nbsp;by&nbsp;Fprintf,&nbsp;because&nbsp;this&nbsp;must&nbsp;behave&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6032082">//&nbsp;an&nbsp;io.Writer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032100">return</span>&nbsp;<span class="builtinfunc" id="6032107">len</span><span class="op" id="6032110">(</span><span class="ident" id="6032111"><a href="/gostd/log/syslog/syslog.go.html#6031751">msg</a></span><span class="op" id="6032114">)</span><span class="op" id="6032115">,</span>&nbsp;<span class="builtintype" id="6032117">nil</span><br>
<span class="lineno">285</span><span class="op" id="6032121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6032124">func</span>&nbsp;<span class="op" id="6032129">(</span><span class="ident" id="6032130">n</span>&nbsp;<span class="op" id="6032132">*</span><span class="ident" id="6032133"><a href="/gostd/log/syslog/syslog.go.html#6027730">netConn</a></span><span class="op" id="6032140">)</span>&nbsp;<span class="ident" id="6032142">writeString</span><span class="op" id="6032153">(</span><span class="ident" id="6032154">p</span>&nbsp;<span class="ident" id="6032156"><a href="/gostd/log/syslog/syslog.go.html#6026344">Priority</a></span><span class="op" id="6032164">,</span>&nbsp;<span class="ident" id="6032166">hostname</span><span class="op" id="6032174">,</span>&nbsp;<span class="ident" id="6032176">tag</span><span class="op" id="6032179">,</span>&nbsp;<span class="ident" id="6032181">msg</span><span class="op" id="6032184">,</span>&nbsp;<span class="ident" id="6032186">nl</span>&nbsp;<span class="builtintype" id="6032189">string</span><span class="op" id="6032195">)</span>&nbsp;<span class="builtintype" id="6032197">error</span>&nbsp;<span class="op" id="6032203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032206">if</span>&nbsp;<span class="ident" id="6032209"><a href="/gostd/log/syslog/syslog.go.html#6032130">n</a></span><span class="op" id="6032210">.</span><span class="ident" id="6032211"><a href="/gostd/log/syslog/syslog.go.html#6027748">local</a></span>&nbsp;<span class="op" id="6032217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6032221">//&nbsp;Compared&nbsp;to&nbsp;the&nbsp;network&nbsp;form&nbsp;below,&nbsp;the&nbsp;changes&nbsp;are:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6032279">//&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;Use&nbsp;time.Stamp&nbsp;instead&nbsp;of&nbsp;time.RFC3339.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6032327">//&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;Drop&nbsp;the&nbsp;hostname&nbsp;field&nbsp;from&nbsp;the&nbsp;Fprintf.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032377">timestamp</span>&nbsp;<span class="op" id="6032387">:=</span>&nbsp;<span class="ident" id="6032390"><a href="/gostd/log/syslog/syslog.go.html#6026093">time</a></span><span class="op" id="6032394">.</span><span class="ident" id="6032395"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6032398">(</span><span class="op" id="6032399">)</span><span class="op" id="6032400">.</span><span class="ident" id="6032401"><a href="/gostd/time/format.go.html#2690960">Format</a></span><span class="op" id="6032407">(</span><span class="ident" id="6032408"><a href="/gostd/log/syslog/syslog.go.html#6026093">time</a></span><span class="op" id="6032412">.</span><span class="ident" id="6032413"><a href="/gostd/time/format.go.html#2680677">Stamp</a></span><span class="op" id="6032418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032422">_</span><span class="op" id="6032423">,</span>&nbsp;<span class="ident" id="6032425">err</span>&nbsp;<span class="op" id="6032429">:=</span>&nbsp;<span class="ident" id="6032432"><a href="/gostd/log/syslog/syslog.go.html#6026047">fmt</a></span><span class="op" id="6032435">.</span><span class="ident" id="6032436"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="6032443">(</span><span class="ident" id="6032444"><a href="/gostd/log/syslog/syslog.go.html#6032130">n</a></span><span class="op" id="6032445">.</span><span class="ident" id="6032446"><a href="/gostd/log/syslog/syslog.go.html#6027760">conn</a></span><span class="op" id="6032450">,</span>&nbsp;<span class="string" id="6032452">&#34;&lt;%d&gt;%s&nbsp;%s[%d]:&nbsp;%s%s&#34;</span><span class="op" id="6032473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032478"><a href="/gostd/log/syslog/syslog.go.html#6032154">p</a></span><span class="op" id="6032479">,</span>&nbsp;<span class="ident" id="6032481"><a href="/gostd/log/syslog/syslog.go.html#6032377">timestamp</a></span><span class="op" id="6032490">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032495"><a href="/gostd/log/syslog/syslog.go.html#6032176">tag</a></span><span class="op" id="6032498">,</span>&nbsp;<span class="ident" id="6032500"><a href="/gostd/log/syslog/syslog.go.html#6026068">os</a></span><span class="op" id="6032502">.</span><span class="ident" id="6032503"><a href="/gostd/os/exec.go.html#2435259">Getpid</a></span><span class="op" id="6032509">(</span><span class="op" id="6032510">)</span><span class="op" id="6032511">,</span>&nbsp;<span class="ident" id="6032513"><a href="/gostd/log/syslog/syslog.go.html#6032181">msg</a></span><span class="op" id="6032516">,</span>&nbsp;<span class="ident" id="6032518"><a href="/gostd/log/syslog/syslog.go.html#6032186">nl</a></span><span class="op" id="6032520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032524">return</span>&nbsp;<span class="ident" id="6032531"><a href="/gostd/log/syslog/syslog.go.html#6032425">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6032536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032539">timestamp</span>&nbsp;<span class="op" id="6032549">:=</span>&nbsp;<span class="ident" id="6032552"><a href="/gostd/log/syslog/syslog.go.html#6026093">time</a></span><span class="op" id="6032556">.</span><span class="ident" id="6032557"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6032560">(</span><span class="op" id="6032561">)</span><span class="op" id="6032562">.</span><span class="ident" id="6032563"><a href="/gostd/time/format.go.html#2690960">Format</a></span><span class="op" id="6032569">(</span><span class="ident" id="6032570"><a href="/gostd/log/syslog/syslog.go.html#6026093">time</a></span><span class="op" id="6032574">.</span><span class="ident" id="6032575"><a href="/gostd/time/format.go.html#2680534">RFC3339</a></span><span class="op" id="6032582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032585">_</span><span class="op" id="6032586">,</span>&nbsp;<span class="ident" id="6032588">err</span>&nbsp;<span class="op" id="6032592">:=</span>&nbsp;<span class="ident" id="6032595"><a href="/gostd/log/syslog/syslog.go.html#6026047">fmt</a></span><span class="op" id="6032598">.</span><span class="ident" id="6032599"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="6032606">(</span><span class="ident" id="6032607"><a href="/gostd/log/syslog/syslog.go.html#6032130">n</a></span><span class="op" id="6032608">.</span><span class="ident" id="6032609"><a href="/gostd/log/syslog/syslog.go.html#6027760">conn</a></span><span class="op" id="6032613">,</span>&nbsp;<span class="string" id="6032615">&#34;&lt;%d&gt;%s&nbsp;%s&nbsp;%s[%d]:&nbsp;%s%s&#34;</span><span class="op" id="6032639">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032643"><a href="/gostd/log/syslog/syslog.go.html#6032154">p</a></span><span class="op" id="6032644">,</span>&nbsp;<span class="ident" id="6032646"><a href="/gostd/log/syslog/syslog.go.html#6032539">timestamp</a></span><span class="op" id="6032655">,</span>&nbsp;<span class="ident" id="6032657"><a href="/gostd/log/syslog/syslog.go.html#6032166">hostname</a></span><span class="op" id="6032665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032669"><a href="/gostd/log/syslog/syslog.go.html#6032176">tag</a></span><span class="op" id="6032672">,</span>&nbsp;<span class="ident" id="6032674"><a href="/gostd/log/syslog/syslog.go.html#6026068">os</a></span><span class="op" id="6032676">.</span><span class="ident" id="6032677"><a href="/gostd/os/exec.go.html#2435259">Getpid</a></span><span class="op" id="6032683">(</span><span class="op" id="6032684">)</span><span class="op" id="6032685">,</span>&nbsp;<span class="ident" id="6032687"><a href="/gostd/log/syslog/syslog.go.html#6032181">msg</a></span><span class="op" id="6032690">,</span>&nbsp;<span class="ident" id="6032692"><a href="/gostd/log/syslog/syslog.go.html#6032186">nl</a></span><span class="op" id="6032694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032697">return</span>&nbsp;<span class="ident" id="6032704"><a href="/gostd/log/syslog/syslog.go.html#6032588">err</a></span><br>
<span class="lineno"></span><span class="op" id="6032708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span><span class="keyword" id="6032711">func</span>&nbsp;<span class="op" id="6032716">(</span><span class="ident" id="6032717">n</span>&nbsp;<span class="op" id="6032719">*</span><span class="ident" id="6032720"><a href="/gostd/log/syslog/syslog.go.html#6027730">netConn</a></span><span class="op" id="6032727">)</span>&nbsp;<span class="builtinfunc" id="6032729">close</span><span class="op" id="6032734">(</span><span class="op" id="6032735">)</span>&nbsp;<span class="builtintype" id="6032737">error</span>&nbsp;<span class="op" id="6032743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032746">return</span>&nbsp;<span class="ident" id="6032753"><a href="/gostd/log/syslog/syslog.go.html#6032717">n</a></span><span class="op" id="6032754">.</span><span class="ident" id="6032755"><a href="/gostd/log/syslog/syslog.go.html#6027760">conn</a></span><span class="op" id="6032759">.</span><span class="ident" id="6032760"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6032765">(</span><span class="op" id="6032766">)</span><br>
<span class="lineno"></span><span class="op" id="6032768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6032771">//&nbsp;NewLogger&nbsp;creates&nbsp;a&nbsp;log.Logger&nbsp;whose&nbsp;output&nbsp;is&nbsp;written&nbsp;to</span><br>
<span class="lineno">310</span><span class="comment" id="6032832">//&nbsp;the&nbsp;system&nbsp;log&nbsp;service&nbsp;with&nbsp;the&nbsp;specified&nbsp;priority.&nbsp;The&nbsp;logFlag</span><br>
<span class="lineno"></span><span class="comment" id="6032899">//&nbsp;argument&nbsp;is&nbsp;the&nbsp;flag&nbsp;set&nbsp;passed&nbsp;through&nbsp;to&nbsp;log.New&nbsp;to&nbsp;create</span><br>
<span class="lineno"></span><span class="comment" id="6032963">//&nbsp;the&nbsp;Logger.</span><br>
<span class="lineno"></span><span class="keyword" id="6032978">func</span>&nbsp;<span class="ident" id="6032983">NewLogger</span><span class="op" id="6032992">(</span><span class="ident" id="6032993">p</span>&nbsp;<span class="ident" id="6032995"><a href="/gostd/log/syslog/syslog.go.html#6026344">Priority</a></span><span class="op" id="6033003">,</span>&nbsp;<span class="ident" id="6033005">logFlag</span>&nbsp;<span class="builtintype" id="6033013">int</span><span class="op" id="6033016">)</span>&nbsp;<span class="op" id="6033018">(</span><span class="op" id="6033019">*</span><span class="ident" id="6033020"><a href="/gostd/log/syslog/syslog.go.html#6026054">log</a></span><span class="op" id="6033023">.</span><span class="ident" id="6033024"><a href="/gostd/log/log.go.html#4072441">Logger</a></span><span class="op" id="6033030">,</span>&nbsp;<span class="builtintype" id="6033032">error</span><span class="op" id="6033037">)</span>&nbsp;<span class="op" id="6033039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6033042">s</span><span class="op" id="6033043">,</span>&nbsp;<span class="ident" id="6033045">err</span>&nbsp;<span class="op" id="6033049">:=</span>&nbsp;<span class="ident" id="6033052"><a href="/gostd/log/syslog/syslog.go.html#6027942">New</a></span><span class="op" id="6033055">(</span><span class="ident" id="6033056"><a href="/gostd/log/syslog/syslog.go.html#6032993">p</a></span><span class="op" id="6033057">,</span>&nbsp;<span class="string" id="6033059">&#34;&#34;</span><span class="op" id="6033061">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6033064">if</span>&nbsp;<span class="ident" id="6033067"><a href="/gostd/log/syslog/syslog.go.html#6033045">err</a></span>&nbsp;<span class="op" id="6033071">!=</span>&nbsp;<span class="builtintype" id="6033074">nil</span>&nbsp;<span class="op" id="6033078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6033082">return</span>&nbsp;<span class="builtintype" id="6033089">nil</span><span class="op" id="6033092">,</span>&nbsp;<span class="ident" id="6033094"><a href="/gostd/log/syslog/syslog.go.html#6033045">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6033099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6033102">return</span>&nbsp;<span class="ident" id="6033109"><a href="/gostd/log/syslog/syslog.go.html#6026054">log</a></span><span class="op" id="6033112">.</span><span class="ident" id="6033113"><a href="/gostd/log/log.go.html#4072962">New</a></span><span class="op" id="6033116">(</span><span class="ident" id="6033117"><a href="/gostd/log/syslog/syslog.go.html#6033042">s</a></span><span class="op" id="6033118">,</span>&nbsp;<span class="string" id="6033120">&#34;&#34;</span><span class="op" id="6033122">,</span>&nbsp;<span class="ident" id="6033124"><a href="/gostd/log/syslog/syslog.go.html#6033005">logFlag</a></span><span class="op" id="6033131">)</span><span class="op" id="6033132">,</span>&nbsp;<span class="builtintype" id="6033134">nil</span><br>
<span class="lineno"></span><span class="op" id="6033138">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
