<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5335101">package</span>&nbsp;<span class="ident" id="5335109">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5335115">import</span>&nbsp;<span class="op" id="5335122">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5335125">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5335147">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5335150">var</span>&nbsp;<span class="ident" id="5335154">opJmpMap</span>&nbsp;<span class="op" id="5335163">=</span>&nbsp;<span class="keyword" id="5335165">map</span><span class="op" id="5335168">[</span><span class="builtintype" id="5335169">string</span><span class="op" id="5335175">]</span><span class="builtintype" id="5335176">uint32</span><span class="op" id="5335182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5335185">&#34;j&#34;</span><span class="op" id="5335188">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="5335192">2</span><span class="op" id="5335193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5335196">&#34;jal&#34;</span><span class="op" id="5335201">:</span>&nbsp;<span class="num" id="5335203">3</span><span class="op" id="5335204">,</span><br>
<span class="lineno">10</span><span class="op" id="5335206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5335209">func</span>&nbsp;<span class="ident" id="5335214">isValidSymbol</span><span class="op" id="5335227">(</span><span class="ident" id="5335228">sym</span>&nbsp;<span class="builtintype" id="5335232">string</span><span class="op" id="5335238">)</span>&nbsp;<span class="builtintype" id="5335240">bool</span>&nbsp;<span class="op" id="5335245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335248">return</span>&nbsp;<span class="ident" id="5335255">true</span><br>
<span class="lineno"></span><span class="op" id="5335260">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="5335263">func</span>&nbsp;<span class="ident" id="5335268">parseInstJmp</span><span class="op" id="5335280">(</span><span class="ident" id="5335281">p</span>&nbsp;<span class="op" id="5335283">*</span><span class="ident" id="5335284"><a href="/lonnie.io/e8vm/asm8/parser.go.html#5352831">parser</a></span><span class="op" id="5335290">,</span>&nbsp;<span class="ident" id="5335292">ops</span>&nbsp;<span class="op" id="5335296">[</span><span class="op" id="5335297">]</span><span class="op" id="5335298">*</span><span class="ident" id="5335299"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335125">lex8</a></span><span class="op" id="5335303">.</span><span class="ident" id="5335304">Token</span><span class="op" id="5335309">)</span>&nbsp;<span class="op" id="5335311">(</span><span class="op" id="5335312">*</span><span class="ident" id="5335313"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330311">inst</a></span><span class="op" id="5335317">,</span>&nbsp;<span class="builtintype" id="5335319">bool</span><span class="op" id="5335323">)</span>&nbsp;<span class="op" id="5335325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335328">op0</span>&nbsp;<span class="op" id="5335332">:=</span>&nbsp;<span class="ident" id="5335335"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335292">ops</a></span><span class="op" id="5335338">[</span><span class="num" id="5335339">0</span><span class="op" id="5335340">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335343">opName</span>&nbsp;<span class="op" id="5335350">:=</span>&nbsp;<span class="ident" id="5335353"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335328">op0</a></span><span class="op" id="5335356">.</span><span class="ident" id="5335357">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335362">var</span>&nbsp;<span class="ident" id="5335366">op</span>&nbsp;<span class="builtintype" id="5335369">uint32</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5335378">//&nbsp;op&nbsp;sym</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335389">switch</span>&nbsp;<span class="ident" id="5335396"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335343">opName</a></span>&nbsp;<span class="op" id="5335403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335406">case</span>&nbsp;<span class="string" id="5335411">&#34;j&#34;</span><span class="op" id="5335414">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335418"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335366">op</a></span>&nbsp;<span class="op" id="5335421">=</span>&nbsp;<span class="num" id="5335423">2</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335426">case</span>&nbsp;<span class="string" id="5335431">&#34;jal&#34;</span><span class="op" id="5335436">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335440"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335366">op</a></span>&nbsp;<span class="op" id="5335443">=</span>&nbsp;<span class="num" id="5335445">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335448">default</span><span class="op" id="5335455">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335459">return</span>&nbsp;<span class="ident" id="5335466">nil</span><span class="op" id="5335469">,</span>&nbsp;<span class="ident" id="5335471">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335478">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335482">var</span>&nbsp;<span class="ident" id="5335486">pack</span><span class="op" id="5335490">,</span>&nbsp;<span class="ident" id="5335492">sym</span>&nbsp;<span class="builtintype" id="5335496">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335504">var</span>&nbsp;<span class="ident" id="5335508">fill</span>&nbsp;<span class="builtintype" id="5335513">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335518">var</span>&nbsp;<span class="ident" id="5335522">symTok</span>&nbsp;<span class="op" id="5335529">*</span><span class="ident" id="5335530"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335125">lex8</a></span><span class="op" id="5335534">.</span><span class="ident" id="5335535">Token</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335543">if</span>&nbsp;<span class="ident" id="5335546"><a href="/lonnie.io/e8vm/asm8/parse_arg.go.html#5345685">argCount</a></span><span class="op" id="5335554">(</span><span class="ident" id="5335555"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335281">p</a></span><span class="op" id="5335556">,</span>&nbsp;<span class="ident" id="5335558"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335292">ops</a></span><span class="op" id="5335561">,</span>&nbsp;<span class="num" id="5335563">1</span><span class="op" id="5335564">)</span>&nbsp;<span class="op" id="5335566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335570"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335522">symTok</a></span>&nbsp;<span class="op" id="5335577">=</span>&nbsp;<span class="ident" id="5335579"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335292">ops</a></span><span class="op" id="5335582">[</span><span class="num" id="5335583">1</span><span class="op" id="5335584">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335588">if</span>&nbsp;<span class="ident" id="5335591"><a href="/lonnie.io/e8vm/asm8/parse_label.go.html#5348879">parseLabel</a></span><span class="op" id="5335601">(</span><span class="ident" id="5335602"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335281">p</a></span><span class="op" id="5335603">,</span>&nbsp;<span class="ident" id="5335605"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335292">ops</a></span><span class="op" id="5335608">[</span><span class="num" id="5335609">1</span><span class="op" id="5335610">]</span><span class="op" id="5335611">)</span>&nbsp;<span class="op" id="5335613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335618"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335492">sym</a></span>&nbsp;<span class="op" id="5335622">=</span>&nbsp;<span class="ident" id="5335624"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335292">ops</a></span><span class="op" id="5335627">[</span><span class="num" id="5335628">1</span><span class="op" id="5335629">]</span><span class="op" id="5335630">.</span><span class="ident" id="5335631">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335638"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335508">fill</a></span>&nbsp;<span class="op" id="5335643">=</span>&nbsp;<span class="ident" id="5335645"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330516">fillLabel</a></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335657">}</span>&nbsp;<span class="keyword" id="5335659">else</span>&nbsp;<span class="op" id="5335664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335669"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335486">pack</a></span><span class="op" id="5335673">,</span>&nbsp;<span class="ident" id="5335675"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335492">sym</a></span>&nbsp;<span class="op" id="5335679">=</span>&nbsp;<span class="ident" id="5335681"><a href="/lonnie.io/e8vm/asm8/parse_sym.go.html#5350356">parseSym</a></span><span class="op" id="5335689">(</span><span class="ident" id="5335690"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335281">p</a></span><span class="op" id="5335691">,</span>&nbsp;<span class="ident" id="5335693"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335292">ops</a></span><span class="op" id="5335696">[</span><span class="num" id="5335697">1</span><span class="op" id="5335698">]</span><span class="op" id="5335699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335704"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335508">fill</a></span>&nbsp;<span class="op" id="5335709">=</span>&nbsp;<span class="ident" id="5335711"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330432">fillLink</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335725">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335729">ret</span>&nbsp;<span class="op" id="5335733">:=</span>&nbsp;<span class="op" id="5335736">&amp;</span><span class="ident" id="5335737"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330311">inst</a></span><span class="op" id="5335741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335745">inst</span><span class="op" id="5335749">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5335753">(</span><span class="ident" id="5335754"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335366">op</a></span>&nbsp;<span class="op" id="5335757">&amp;</span>&nbsp;<span class="num" id="5335759">0x3</span><span class="op" id="5335762">)</span>&nbsp;<span class="op" id="5335764">&lt;&lt;</span>&nbsp;<span class="num" id="5335767">30</span><span class="op" id="5335769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335773">pack</span><span class="op" id="5335777">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5335781"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335486">pack</a></span><span class="op" id="5335785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335789">symbol</span><span class="op" id="5335795">:</span>&nbsp;<span class="ident" id="5335797"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335492">sym</a></span><span class="op" id="5335800">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335804">fill</span><span class="op" id="5335808">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5335812"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335508">fill</a></span><span class="op" id="5335816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335820">symTok</span><span class="op" id="5335826">:</span>&nbsp;<span class="ident" id="5335828"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335522">symTok</a></span><span class="op" id="5335834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5335837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335840">return</span>&nbsp;<span class="ident" id="5335847"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#5335729">ret</a></span><span class="op" id="5335850">,</span>&nbsp;<span class="ident" id="5335852">true</span><br>
<span class="lineno"></span><span class="op" id="5335857">}</span>
</div>
</body>
</html>
