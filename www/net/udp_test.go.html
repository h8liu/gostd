<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8000572">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8000628">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8000682">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8000733">package</span>&nbsp;<span class="ident" id="8000741">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8000746">import</span>&nbsp;<span class="op" id="8000753">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000756">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000767">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000778">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000789">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8000800">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8000807">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8000810">func</span>&nbsp;<span class="ident" id="8000815">TestResolveUDPAddr</span><span class="op" id="8000833">(</span><span class="ident" id="8000834">t</span>&nbsp;<span class="op" id="8000836">*</span><span class="ident" id="8000837"><a href="/net/udp_test.go.html#8000789">testing</a></span><span class="op" id="8000844">.</span><span class="ident" id="8000845">T</span><span class="op" id="8000846">)</span>&nbsp;<span class="op" id="8000848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000851">for</span>&nbsp;<span class="ident" id="8000855">_</span><span class="op" id="8000856">,</span>&nbsp;<span class="ident" id="8000858">tt</span>&nbsp;<span class="op" id="8000861">:=</span>&nbsp;<span class="keyword" id="8000864">range</span>&nbsp;<span class="ident" id="8000870"><a href="/net/tcp_test.go.html#7975147">resolveTCPAddrTests</a></span>&nbsp;<span class="op" id="8000890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000894">net</span>&nbsp;<span class="op" id="8000898">:=</span>&nbsp;<span class="ident" id="8000901"><a href="/net/udp_test.go.html#8000778">strings</a></span><span class="op" id="8000908">.</span><span class="ident" id="8000909">Replace</span><span class="op" id="8000916">(</span><span class="ident" id="8000917"><a href="/net/udp_test.go.html#8000858">tt</a></span><span class="op" id="8000919">.</span><span class="ident" id="8000920">net</span><span class="op" id="8000923">,</span>&nbsp;<span class="string" id="8000925">&#34;tcp&#34;</span><span class="op" id="8000930">,</span>&nbsp;<span class="string" id="8000932">&#34;udp&#34;</span><span class="op" id="8000937">,</span>&nbsp;<span class="op" id="8000939">-</span><span class="num" id="8000940">1</span><span class="op" id="8000941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8000945">addr</span><span class="op" id="8000949">,</span>&nbsp;<span class="ident" id="8000951">err</span>&nbsp;<span class="op" id="8000955">:=</span>&nbsp;<span class="ident" id="8000958"><a href="/net/udpsock.go.html#1517608">ResolveUDPAddr</a></span><span class="op" id="8000972">(</span><span class="ident" id="8000973"><a href="/net/udp_test.go.html#8000894">net</a></span><span class="op" id="8000976">,</span>&nbsp;<span class="ident" id="8000978"><a href="/net/udp_test.go.html#8000858">tt</a></span><span class="op" id="8000980">.</span><span class="ident" id="8000981">litAddrOrName</span><span class="op" id="8000994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8000998">if</span>&nbsp;<span class="ident" id="8001001"><a href="/net/udp_test.go.html#8000951">err</a></span>&nbsp;<span class="op" id="8001005">!=</span>&nbsp;<span class="ident" id="8001008"><a href="/net/udp_test.go.html#8000858">tt</a></span><span class="op" id="8001010">.</span><span class="ident" id="8001011">err</span>&nbsp;<span class="op" id="8001015">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001020"><a href="/net/udp_test.go.html#8000834">t</a></span><span class="op" id="8001021">.</span><span class="ident" id="8001022">Fatalf</span><span class="op" id="8001028">(</span><span class="string" id="8001029">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8001064">,</span>&nbsp;<span class="ident" id="8001066"><a href="/net/udp_test.go.html#8000894">net</a></span><span class="op" id="8001069">,</span>&nbsp;<span class="ident" id="8001071"><a href="/net/udp_test.go.html#8000858">tt</a></span><span class="op" id="8001073">.</span><span class="ident" id="8001074">litAddrOrName</span><span class="op" id="8001087">,</span>&nbsp;<span class="ident" id="8001089"><a href="/net/udp_test.go.html#8000951">err</a></span><span class="op" id="8001092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001100">if</span>&nbsp;<span class="op" id="8001103">!</span><span class="ident" id="8001104"><a href="/net/udp_test.go.html#8000756">reflect</a></span><span class="op" id="8001111">.</span><span class="ident" id="8001112">DeepEqual</span><span class="op" id="8001121">(</span><span class="ident" id="8001122"><a href="/net/udp_test.go.html#8000945">addr</a></span><span class="op" id="8001126">,</span>&nbsp;<span class="op" id="8001128">(</span><span class="op" id="8001129">*</span><span class="ident" id="8001130"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="8001137">)</span><span class="op" id="8001138">(</span><span class="ident" id="8001139"><a href="/net/udp_test.go.html#8000858">tt</a></span><span class="op" id="8001141">.</span><span class="ident" id="8001142">addr</span><span class="op" id="8001146">)</span><span class="op" id="8001147">)</span>&nbsp;<span class="op" id="8001149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001154"><a href="/net/udp_test.go.html#8000834">t</a></span><span class="op" id="8001155">.</span><span class="ident" id="8001156">Fatalf</span><span class="op" id="8001162">(</span><span class="string" id="8001163">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;=&nbsp;%#v,&nbsp;want&nbsp;%#v&#34;</span><span class="op" id="8001203">,</span>&nbsp;<span class="ident" id="8001205"><a href="/net/udp_test.go.html#8000894">net</a></span><span class="op" id="8001208">,</span>&nbsp;<span class="ident" id="8001210"><a href="/net/udp_test.go.html#8000858">tt</a></span><span class="op" id="8001212">.</span><span class="ident" id="8001213">litAddrOrName</span><span class="op" id="8001226">,</span>&nbsp;<span class="ident" id="8001228"><a href="/net/udp_test.go.html#8000945">addr</a></span><span class="op" id="8001232">,</span>&nbsp;<span class="ident" id="8001234"><a href="/net/udp_test.go.html#8000858">tt</a></span><span class="op" id="8001236">.</span><span class="ident" id="8001237">addr</span><span class="op" id="8001241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001245">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001249">if</span>&nbsp;<span class="ident" id="8001252"><a href="/net/udp_test.go.html#8000951">err</a></span>&nbsp;<span class="op" id="8001256">==</span>&nbsp;<span class="ident" id="8001259">nil</span>&nbsp;<span class="op" id="8001263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001268">str</span>&nbsp;<span class="op" id="8001272">:=</span>&nbsp;<span class="ident" id="8001275"><a href="/net/udp_test.go.html#8000945">addr</a></span><span class="op" id="8001279">.</span><span class="ident" id="8001280">String</span><span class="op" id="8001286">(</span><span class="op" id="8001287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001292">addr1</span><span class="op" id="8001297">,</span>&nbsp;<span class="ident" id="8001299">err</span>&nbsp;<span class="op" id="8001303">:=</span>&nbsp;<span class="ident" id="8001306"><a href="/net/udpsock.go.html#1517608">ResolveUDPAddr</a></span><span class="op" id="8001320">(</span><span class="ident" id="8001321"><a href="/net/udp_test.go.html#8000894">net</a></span><span class="op" id="8001324">,</span>&nbsp;<span class="ident" id="8001326"><a href="/net/udp_test.go.html#8001268">str</a></span><span class="op" id="8001329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001334">if</span>&nbsp;<span class="ident" id="8001337"><a href="/net/udp_test.go.html#8001299">err</a></span>&nbsp;<span class="op" id="8001341">!=</span>&nbsp;<span class="ident" id="8001344">nil</span>&nbsp;<span class="op" id="8001348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001354"><a href="/net/udp_test.go.html#8000834">t</a></span><span class="op" id="8001355">.</span><span class="ident" id="8001356">Fatalf</span><span class="op" id="8001362">(</span><span class="string" id="8001363">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;[from&nbsp;%q]:&nbsp;%v&#34;</span><span class="op" id="8001401">,</span>&nbsp;<span class="ident" id="8001403"><a href="/net/udp_test.go.html#8000894">net</a></span><span class="op" id="8001406">,</span>&nbsp;<span class="ident" id="8001408"><a href="/net/udp_test.go.html#8001268">str</a></span><span class="op" id="8001411">,</span>&nbsp;<span class="ident" id="8001413"><a href="/net/udp_test.go.html#8000858">tt</a></span><span class="op" id="8001415">.</span><span class="ident" id="8001416">litAddrOrName</span><span class="op" id="8001429">,</span>&nbsp;<span class="ident" id="8001431"><a href="/net/udp_test.go.html#8001299">err</a></span><span class="op" id="8001434">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001444">if</span>&nbsp;<span class="op" id="8001447">!</span><span class="ident" id="8001448"><a href="/net/udp_test.go.html#8000756">reflect</a></span><span class="op" id="8001455">.</span><span class="ident" id="8001456">DeepEqual</span><span class="op" id="8001465">(</span><span class="ident" id="8001466"><a href="/net/udp_test.go.html#8001292">addr1</a></span><span class="op" id="8001471">,</span>&nbsp;<span class="ident" id="8001473"><a href="/net/udp_test.go.html#8000945">addr</a></span><span class="op" id="8001477">)</span>&nbsp;<span class="op" id="8001479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001485"><a href="/net/udp_test.go.html#8000834">t</a></span><span class="op" id="8001486">.</span><span class="ident" id="8001487">Fatalf</span><span class="op" id="8001493">(</span><span class="string" id="8001494">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;[from&nbsp;%q]&nbsp;=&nbsp;%#v,&nbsp;want&nbsp;%#v&#34;</span><span class="op" id="8001544">,</span>&nbsp;<span class="ident" id="8001546"><a href="/net/udp_test.go.html#8000894">net</a></span><span class="op" id="8001549">,</span>&nbsp;<span class="ident" id="8001551"><a href="/net/udp_test.go.html#8001268">str</a></span><span class="op" id="8001554">,</span>&nbsp;<span class="ident" id="8001556"><a href="/net/udp_test.go.html#8000858">tt</a></span><span class="op" id="8001558">.</span><span class="ident" id="8001559">litAddrOrName</span><span class="op" id="8001572">,</span>&nbsp;<span class="ident" id="8001574"><a href="/net/udp_test.go.html#8001292">addr1</a></span><span class="op" id="8001579">,</span>&nbsp;<span class="ident" id="8001581"><a href="/net/udp_test.go.html#8000945">addr</a></span><span class="op" id="8001585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001594">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001597">}</span><br>
<span class="lineno"></span><span class="op" id="8001599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8001602">func</span>&nbsp;<span class="ident" id="8001607">TestReadFromUDP</span><span class="op" id="8001622">(</span><span class="ident" id="8001623">t</span>&nbsp;<span class="op" id="8001625">*</span><span class="ident" id="8001626"><a href="/net/udp_test.go.html#8000789">testing</a></span><span class="op" id="8001633">.</span><span class="ident" id="8001634">T</span><span class="op" id="8001635">)</span>&nbsp;<span class="op" id="8001637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001640">switch</span>&nbsp;<span class="ident" id="8001647"><a href="/net/udp_test.go.html#8000767">runtime</a></span><span class="op" id="8001654">.</span><span class="ident" id="8001655">GOOS</span>&nbsp;<span class="op" id="8001660">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001663">case</span>&nbsp;<span class="string" id="8001668">&#34;nacl&#34;</span><span class="op" id="8001674">,</span>&nbsp;<span class="string" id="8001676">&#34;plan9&#34;</span><span class="op" id="8001683">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001687"><a href="/net/udp_test.go.html#8001623">t</a></span><span class="op" id="8001688">.</span><span class="ident" id="8001689">Skipf</span><span class="op" id="8001694">(</span><span class="string" id="8001695">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q,&nbsp;see&nbsp;issue&nbsp;8916&#34;</span><span class="op" id="8001732">,</span>&nbsp;<span class="ident" id="8001734"><a href="/net/udp_test.go.html#8000767">runtime</a></span><span class="op" id="8001741">.</span><span class="ident" id="8001742">GOOS</span><span class="op" id="8001746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001753">ra</span><span class="op" id="8001755">,</span>&nbsp;<span class="ident" id="8001757">err</span>&nbsp;<span class="op" id="8001761">:=</span>&nbsp;<span class="ident" id="8001764"><a href="/net/udpsock.go.html#1517608">ResolveUDPAddr</a></span><span class="op" id="8001778">(</span><span class="string" id="8001779">&#34;udp&#34;</span><span class="op" id="8001784">,</span>&nbsp;<span class="string" id="8001786">&#34;127.0.0.1:7&#34;</span><span class="op" id="8001799">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001802">if</span>&nbsp;<span class="ident" id="8001805"><a href="/net/udp_test.go.html#8001757">err</a></span>&nbsp;<span class="op" id="8001809">!=</span>&nbsp;<span class="ident" id="8001812">nil</span>&nbsp;<span class="op" id="8001816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001820"><a href="/net/udp_test.go.html#8001623">t</a></span><span class="op" id="8001821">.</span><span class="ident" id="8001822">Fatal</span><span class="op" id="8001827">(</span><span class="ident" id="8001828"><a href="/net/udp_test.go.html#8001757">err</a></span><span class="op" id="8001831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001838">la</span><span class="op" id="8001840">,</span>&nbsp;<span class="ident" id="8001842"><a href="/net/udp_test.go.html#8001757">err</a></span>&nbsp;<span class="op" id="8001846">:=</span>&nbsp;<span class="ident" id="8001849"><a href="/net/udpsock.go.html#1517608">ResolveUDPAddr</a></span><span class="op" id="8001863">(</span><span class="string" id="8001864">&#34;udp&#34;</span><span class="op" id="8001869">,</span>&nbsp;<span class="string" id="8001871">&#34;127.0.0.1:0&#34;</span><span class="op" id="8001884">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001887">if</span>&nbsp;<span class="ident" id="8001890"><a href="/net/udp_test.go.html#8001757">err</a></span>&nbsp;<span class="op" id="8001894">!=</span>&nbsp;<span class="ident" id="8001897">nil</span>&nbsp;<span class="op" id="8001901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001905"><a href="/net/udp_test.go.html#8001623">t</a></span><span class="op" id="8001906">.</span><span class="ident" id="8001907">Fatal</span><span class="op" id="8001912">(</span><span class="ident" id="8001913"><a href="/net/udp_test.go.html#8001757">err</a></span><span class="op" id="8001916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001923">c</span><span class="op" id="8001924">,</span>&nbsp;<span class="ident" id="8001926"><a href="/net/udp_test.go.html#8001757">err</a></span>&nbsp;<span class="op" id="8001930">:=</span>&nbsp;<span class="ident" id="8001933"><a href="/net/udpsock_posix.go.html#1523853">ListenUDP</a></span><span class="op" id="8001942">(</span><span class="string" id="8001943">&#34;udp&#34;</span><span class="op" id="8001948">,</span>&nbsp;<span class="ident" id="8001950"><a href="/net/udp_test.go.html#8001838">la</a></span><span class="op" id="8001952">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001955">if</span>&nbsp;<span class="ident" id="8001958"><a href="/net/udp_test.go.html#8001757">err</a></span>&nbsp;<span class="op" id="8001962">!=</span>&nbsp;<span class="ident" id="8001965">nil</span>&nbsp;<span class="op" id="8001969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8001973"><a href="/net/udp_test.go.html#8001623">t</a></span><span class="op" id="8001974">.</span><span class="ident" id="8001975">Fatal</span><span class="op" id="8001980">(</span><span class="ident" id="8001981"><a href="/net/udp_test.go.html#8001757">err</a></span><span class="op" id="8001984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8001987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8001990">defer</span>&nbsp;<span class="ident" id="8001996"><a href="/net/udp_test.go.html#8001923">c</a></span><span class="op" id="8001997">.</span><span class="ident" id="8001998">Close</span><span class="op" id="8002003">(</span><span class="op" id="8002004">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002008">_</span><span class="op" id="8002009">,</span>&nbsp;<span class="ident" id="8002011"><a href="/net/udp_test.go.html#8001757">err</a></span>&nbsp;<span class="op" id="8002015">=</span>&nbsp;<span class="ident" id="8002017"><a href="/net/udp_test.go.html#8001923">c</a></span><span class="op" id="8002018">.</span><span class="ident" id="8002019">WriteToUDP</span><span class="op" id="8002029">(</span><span class="op" id="8002030">[</span><span class="op" id="8002031">]</span><span class="builtintype" id="8002032">byte</span><span class="op" id="8002036">(</span><span class="string" id="8002037">&#34;a&#34;</span><span class="op" id="8002040">)</span><span class="op" id="8002041">,</span>&nbsp;<span class="ident" id="8002043"><a href="/net/udp_test.go.html#8001753">ra</a></span><span class="op" id="8002045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002048">if</span>&nbsp;<span class="ident" id="8002051"><a href="/net/udp_test.go.html#8001757">err</a></span>&nbsp;<span class="op" id="8002055">!=</span>&nbsp;<span class="ident" id="8002058">nil</span>&nbsp;<span class="op" id="8002062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002066"><a href="/net/udp_test.go.html#8001623">t</a></span><span class="op" id="8002067">.</span><span class="ident" id="8002068">Fatal</span><span class="op" id="8002073">(</span><span class="ident" id="8002074"><a href="/net/udp_test.go.html#8001757">err</a></span><span class="op" id="8002077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002084"><a href="/net/udp_test.go.html#8001757">err</a></span>&nbsp;<span class="op" id="8002088">=</span>&nbsp;<span class="ident" id="8002090"><a href="/net/udp_test.go.html#8001923">c</a></span><span class="op" id="8002091">.</span><span class="ident" id="8002092">SetDeadline</span><span class="op" id="8002103">(</span><span class="ident" id="8002104"><a href="/net/udp_test.go.html#8000800">time</a></span><span class="op" id="8002108">.</span><span class="ident" id="8002109">Now</span><span class="op" id="8002112">(</span><span class="op" id="8002113">)</span><span class="op" id="8002114">.</span><span class="ident" id="8002115">Add</span><span class="op" id="8002118">(</span><span class="num" id="8002119">100</span>&nbsp;<span class="op" id="8002123">*</span>&nbsp;<span class="ident" id="8002125"><a href="/net/udp_test.go.html#8000800">time</a></span><span class="op" id="8002129">.</span><span class="ident" id="8002130">Millisecond</span><span class="op" id="8002141">)</span><span class="op" id="8002142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002145">if</span>&nbsp;<span class="ident" id="8002148"><a href="/net/udp_test.go.html#8001757">err</a></span>&nbsp;<span class="op" id="8002152">!=</span>&nbsp;<span class="ident" id="8002155">nil</span>&nbsp;<span class="op" id="8002159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002163"><a href="/net/udp_test.go.html#8001623">t</a></span><span class="op" id="8002164">.</span><span class="ident" id="8002165">Fatal</span><span class="op" id="8002170">(</span><span class="ident" id="8002171"><a href="/net/udp_test.go.html#8001757">err</a></span><span class="op" id="8002174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002180">b</span>&nbsp;<span class="op" id="8002182">:=</span>&nbsp;<span class="builtinfunc" id="8002185">make</span><span class="op" id="8002189">(</span><span class="op" id="8002190">[</span><span class="op" id="8002191">]</span><span class="builtintype" id="8002192">byte</span><span class="op" id="8002196">,</span>&nbsp;<span class="num" id="8002198">1</span><span class="op" id="8002199">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002202">_</span><span class="op" id="8002203">,</span>&nbsp;<span class="ident" id="8002205">_</span><span class="op" id="8002206">,</span>&nbsp;<span class="ident" id="8002208"><a href="/net/udp_test.go.html#8001757">err</a></span>&nbsp;<span class="op" id="8002212">=</span>&nbsp;<span class="ident" id="8002214"><a href="/net/udp_test.go.html#8001923">c</a></span><span class="op" id="8002215">.</span><span class="ident" id="8002216">ReadFromUDP</span><span class="op" id="8002227">(</span><span class="ident" id="8002228"><a href="/net/udp_test.go.html#8002180">b</a></span><span class="op" id="8002229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002232">if</span>&nbsp;<span class="ident" id="8002235"><a href="/net/udp_test.go.html#8001757">err</a></span>&nbsp;<span class="op" id="8002239">==</span>&nbsp;<span class="ident" id="8002242">nil</span>&nbsp;<span class="op" id="8002246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002250"><a href="/net/udp_test.go.html#8001623">t</a></span><span class="op" id="8002251">.</span><span class="ident" id="8002252">Fatal</span><span class="op" id="8002257">(</span><span class="string" id="8002258">&#34;ReadFromUDP&nbsp;should&nbsp;fail&#34;</span><span class="op" id="8002283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002286">}</span>&nbsp;<span class="keyword" id="8002288">else</span>&nbsp;<span class="keyword" id="8002293">if</span>&nbsp;<span class="op" id="8002296">!</span><span class="ident" id="8002297"><a href="/net/timeout_test.go.html#7983599">isTimeout</a></span><span class="op" id="8002306">(</span><span class="ident" id="8002307"><a href="/net/udp_test.go.html#8001757">err</a></span><span class="op" id="8002310">)</span>&nbsp;<span class="op" id="8002312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002316"><a href="/net/udp_test.go.html#8001623">t</a></span><span class="op" id="8002317">.</span><span class="ident" id="8002318">Fatal</span><span class="op" id="8002323">(</span><span class="ident" id="8002324"><a href="/net/udp_test.go.html#8001757">err</a></span><span class="op" id="8002327">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002330">}</span><br>
<span class="lineno"></span><span class="op" id="8002332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8002335">func</span>&nbsp;<span class="ident" id="8002340">TestWriteToUDP</span><span class="op" id="8002354">(</span><span class="ident" id="8002355">t</span>&nbsp;<span class="op" id="8002357">*</span><span class="ident" id="8002358"><a href="/net/udp_test.go.html#8000789">testing</a></span><span class="op" id="8002365">.</span><span class="ident" id="8002366">T</span><span class="op" id="8002367">)</span>&nbsp;<span class="op" id="8002369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002372">switch</span>&nbsp;<span class="ident" id="8002379"><a href="/net/udp_test.go.html#8000767">runtime</a></span><span class="op" id="8002386">.</span><span class="ident" id="8002387">GOOS</span>&nbsp;<span class="op" id="8002392">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002395">case</span>&nbsp;<span class="string" id="8002400">&#34;plan9&#34;</span><span class="op" id="8002407">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002411"><a href="/net/udp_test.go.html#8002355">t</a></span><span class="op" id="8002412">.</span><span class="ident" id="8002413">Skipf</span><span class="op" id="8002418">(</span><span class="string" id="8002419">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="8002440">,</span>&nbsp;<span class="ident" id="8002442"><a href="/net/udp_test.go.html#8000767">runtime</a></span><span class="op" id="8002449">.</span><span class="ident" id="8002450">GOOS</span><span class="op" id="8002454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002461">l</span><span class="op" id="8002462">,</span>&nbsp;<span class="ident" id="8002464">err</span>&nbsp;<span class="op" id="8002468">:=</span>&nbsp;<span class="ident" id="8002471"><a href="/net/dial.go.html#1338827">ListenPacket</a></span><span class="op" id="8002483">(</span><span class="string" id="8002484">&#34;udp&#34;</span><span class="op" id="8002489">,</span>&nbsp;<span class="string" id="8002491">&#34;127.0.0.1:0&#34;</span><span class="op" id="8002504">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002507">if</span>&nbsp;<span class="ident" id="8002510"><a href="/net/udp_test.go.html#8002464">err</a></span>&nbsp;<span class="op" id="8002514">!=</span>&nbsp;<span class="ident" id="8002517">nil</span>&nbsp;<span class="op" id="8002521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002525"><a href="/net/udp_test.go.html#8002355">t</a></span><span class="op" id="8002526">.</span><span class="ident" id="8002527">Fatalf</span><span class="op" id="8002533">(</span><span class="string" id="8002534">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8002553">,</span>&nbsp;<span class="ident" id="8002555"><a href="/net/udp_test.go.html#8002464">err</a></span><span class="op" id="8002558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002564">defer</span>&nbsp;<span class="ident" id="8002570"><a href="/net/udp_test.go.html#8002461">l</a></span><span class="op" id="8002571">.</span><span class="ident" id="8002572">Close</span><span class="op" id="8002577">(</span><span class="op" id="8002578">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002582"><a href="/net/udp_test.go.html#8002683">testWriteToConn</a></span><span class="op" id="8002597">(</span><span class="ident" id="8002598"><a href="/net/udp_test.go.html#8002355">t</a></span><span class="op" id="8002599">,</span>&nbsp;<span class="ident" id="8002601"><a href="/net/udp_test.go.html#8002461">l</a></span><span class="op" id="8002602">.</span><span class="ident" id="8002603">LocalAddr</span><span class="op" id="8002612">(</span><span class="op" id="8002613">)</span><span class="op" id="8002614">.</span><span class="ident" id="8002615">String</span><span class="op" id="8002621">(</span><span class="op" id="8002622">)</span><span class="op" id="8002623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002626"><a href="/net/udp_test.go.html#8003599">testWriteToPacketConn</a></span><span class="op" id="8002647">(</span><span class="ident" id="8002648"><a href="/net/udp_test.go.html#8002355">t</a></span><span class="op" id="8002649">,</span>&nbsp;<span class="ident" id="8002651"><a href="/net/udp_test.go.html#8002461">l</a></span><span class="op" id="8002652">.</span><span class="ident" id="8002653">LocalAddr</span><span class="op" id="8002662">(</span><span class="op" id="8002663">)</span><span class="op" id="8002664">.</span><span class="ident" id="8002665">String</span><span class="op" id="8002671">(</span><span class="op" id="8002672">)</span><span class="op" id="8002673">)</span><br>
<span class="lineno"></span><span class="op" id="8002675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8002678">func</span>&nbsp;<span class="ident" id="8002683">testWriteToConn</span><span class="op" id="8002698">(</span><span class="ident" id="8002699">t</span>&nbsp;<span class="op" id="8002701">*</span><span class="ident" id="8002702"><a href="/net/udp_test.go.html#8000789">testing</a></span><span class="op" id="8002709">.</span><span class="ident" id="8002710">T</span><span class="op" id="8002711">,</span>&nbsp;<span class="ident" id="8002713">raddr</span>&nbsp;<span class="builtintype" id="8002719">string</span><span class="op" id="8002725">)</span>&nbsp;<span class="op" id="8002727">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002730">c</span><span class="op" id="8002731">,</span>&nbsp;<span class="ident" id="8002733">err</span>&nbsp;<span class="op" id="8002737">:=</span>&nbsp;<span class="ident" id="8002740"><a href="/net/dial.go.html#1334377">Dial</a></span><span class="op" id="8002744">(</span><span class="string" id="8002745">&#34;udp&#34;</span><span class="op" id="8002750">,</span>&nbsp;<span class="ident" id="8002752"><a href="/net/udp_test.go.html#8002713">raddr</a></span><span class="op" id="8002757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002760">if</span>&nbsp;<span class="ident" id="8002763"><a href="/net/udp_test.go.html#8002733">err</a></span>&nbsp;<span class="op" id="8002767">!=</span>&nbsp;<span class="ident" id="8002770">nil</span>&nbsp;<span class="op" id="8002774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002778"><a href="/net/udp_test.go.html#8002699">t</a></span><span class="op" id="8002779">.</span><span class="ident" id="8002780">Fatalf</span><span class="op" id="8002786">(</span><span class="string" id="8002787">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8002804">,</span>&nbsp;<span class="ident" id="8002806"><a href="/net/udp_test.go.html#8002733">err</a></span><span class="op" id="8002809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002815">defer</span>&nbsp;<span class="ident" id="8002821"><a href="/net/udp_test.go.html#8002730">c</a></span><span class="op" id="8002822">.</span><span class="ident" id="8002823">Close</span><span class="op" id="8002828">(</span><span class="op" id="8002829">)</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002833">ra</span><span class="op" id="8002835">,</span>&nbsp;<span class="ident" id="8002837"><a href="/net/udp_test.go.html#8002733">err</a></span>&nbsp;<span class="op" id="8002841">:=</span>&nbsp;<span class="ident" id="8002844"><a href="/net/udpsock.go.html#1517608">ResolveUDPAddr</a></span><span class="op" id="8002858">(</span><span class="string" id="8002859">&#34;udp&#34;</span><span class="op" id="8002864">,</span>&nbsp;<span class="ident" id="8002866"><a href="/net/udp_test.go.html#8002713">raddr</a></span><span class="op" id="8002871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8002874">if</span>&nbsp;<span class="ident" id="8002877"><a href="/net/udp_test.go.html#8002733">err</a></span>&nbsp;<span class="op" id="8002881">!=</span>&nbsp;<span class="ident" id="8002884">nil</span>&nbsp;<span class="op" id="8002888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002892"><a href="/net/udp_test.go.html#8002699">t</a></span><span class="op" id="8002893">.</span><span class="ident" id="8002894">Fatalf</span><span class="op" id="8002900">(</span><span class="string" id="8002901">&#34;ResolveUDPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8002928">,</span>&nbsp;<span class="ident" id="8002930"><a href="/net/udp_test.go.html#8002733">err</a></span><span class="op" id="8002933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8002936">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8002940">_</span><span class="op" id="8002941">,</span>&nbsp;<span class="ident" id="8002943"><a href="/net/udp_test.go.html#8002733">err</a></span>&nbsp;<span class="op" id="8002947">=</span>&nbsp;<span class="ident" id="8002949"><a href="/net/udp_test.go.html#8002730">c</a></span><span class="op" id="8002950">.</span><span class="op" id="8002951">(</span><span class="op" id="8002952">*</span><span class="ident" id="8002953"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="8002960">)</span><span class="op" id="8002961">.</span><span class="ident" id="8002962">WriteToUDP</span><span class="op" id="8002972">(</span><span class="op" id="8002973">[</span><span class="op" id="8002974">]</span><span class="builtintype" id="8002975">byte</span><span class="op" id="8002979">(</span><span class="string" id="8002980">&#34;Connection-oriented&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="8003013">)</span><span class="op" id="8003014">,</span>&nbsp;<span class="ident" id="8003016"><a href="/net/udp_test.go.html#8002833">ra</a></span><span class="op" id="8003018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8003021">if</span>&nbsp;<span class="ident" id="8003024"><a href="/net/udp_test.go.html#8002733">err</a></span>&nbsp;<span class="op" id="8003028">==</span>&nbsp;<span class="ident" id="8003031">nil</span>&nbsp;<span class="op" id="8003035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003039"><a href="/net/udp_test.go.html#8002699">t</a></span><span class="op" id="8003040">.</span><span class="ident" id="8003041">Fatal</span><span class="op" id="8003046">(</span><span class="string" id="8003047">&#34;WriteToUDP&nbsp;should&nbsp;fail&#34;</span><span class="op" id="8003071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003074">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8003077">if</span>&nbsp;<span class="ident" id="8003080"><a href="/net/udp_test.go.html#8002733">err</a></span>&nbsp;<span class="op" id="8003084">!=</span>&nbsp;<span class="ident" id="8003087">nil</span>&nbsp;<span class="op" id="8003091">&amp;&amp;</span>&nbsp;<span class="ident" id="8003094"><a href="/net/udp_test.go.html#8002733">err</a></span><span class="op" id="8003097">.</span><span class="op" id="8003098">(</span><span class="op" id="8003099">*</span><span class="ident" id="8003100"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="8003107">)</span><span class="op" id="8003108">.</span><span class="ident" id="8003109">Err</span>&nbsp;<span class="op" id="8003113">!=</span>&nbsp;<span class="ident" id="8003116"><a href="/net/net.go.html#1472233">ErrWriteToConnected</a></span>&nbsp;<span class="op" id="8003136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003140"><a href="/net/udp_test.go.html#8002699">t</a></span><span class="op" id="8003141">.</span><span class="ident" id="8003142">Fatalf</span><span class="op" id="8003148">(</span><span class="string" id="8003149">&#34;WriteToUDP&nbsp;should&nbsp;fail&nbsp;as&nbsp;ErrWriteToConnected:&nbsp;%v&#34;</span><span class="op" id="8003200">,</span>&nbsp;<span class="ident" id="8003202"><a href="/net/udp_test.go.html#8002733">err</a></span><span class="op" id="8003205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003212">_</span><span class="op" id="8003213">,</span>&nbsp;<span class="ident" id="8003215"><a href="/net/udp_test.go.html#8002733">err</a></span>&nbsp;<span class="op" id="8003219">=</span>&nbsp;<span class="ident" id="8003221"><a href="/net/udp_test.go.html#8002730">c</a></span><span class="op" id="8003222">.</span><span class="op" id="8003223">(</span><span class="op" id="8003224">*</span><span class="ident" id="8003225"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="8003232">)</span><span class="op" id="8003233">.</span><span class="ident" id="8003234">WriteTo</span><span class="op" id="8003241">(</span><span class="op" id="8003242">[</span><span class="op" id="8003243">]</span><span class="builtintype" id="8003244">byte</span><span class="op" id="8003248">(</span><span class="string" id="8003249">&#34;Connection-oriented&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="8003282">)</span><span class="op" id="8003283">,</span>&nbsp;<span class="ident" id="8003285"><a href="/net/udp_test.go.html#8002833">ra</a></span><span class="op" id="8003287">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8003290">if</span>&nbsp;<span class="ident" id="8003293"><a href="/net/udp_test.go.html#8002733">err</a></span>&nbsp;<span class="op" id="8003297">==</span>&nbsp;<span class="ident" id="8003300">nil</span>&nbsp;<span class="op" id="8003304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003308"><a href="/net/udp_test.go.html#8002699">t</a></span><span class="op" id="8003309">.</span><span class="ident" id="8003310">Fatal</span><span class="op" id="8003315">(</span><span class="string" id="8003316">&#34;WriteTo&nbsp;should&nbsp;fail&#34;</span><span class="op" id="8003337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8003343">if</span>&nbsp;<span class="ident" id="8003346"><a href="/net/udp_test.go.html#8002733">err</a></span>&nbsp;<span class="op" id="8003350">!=</span>&nbsp;<span class="ident" id="8003353">nil</span>&nbsp;<span class="op" id="8003357">&amp;&amp;</span>&nbsp;<span class="ident" id="8003360"><a href="/net/udp_test.go.html#8002733">err</a></span><span class="op" id="8003363">.</span><span class="op" id="8003364">(</span><span class="op" id="8003365">*</span><span class="ident" id="8003366"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="8003373">)</span><span class="op" id="8003374">.</span><span class="ident" id="8003375">Err</span>&nbsp;<span class="op" id="8003379">!=</span>&nbsp;<span class="ident" id="8003382"><a href="/net/net.go.html#1472233">ErrWriteToConnected</a></span>&nbsp;<span class="op" id="8003402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003406"><a href="/net/udp_test.go.html#8002699">t</a></span><span class="op" id="8003407">.</span><span class="ident" id="8003408">Fatalf</span><span class="op" id="8003414">(</span><span class="string" id="8003415">&#34;WriteTo&nbsp;should&nbsp;fail&nbsp;as&nbsp;ErrWriteToConnected:&nbsp;%v&#34;</span><span class="op" id="8003463">,</span>&nbsp;<span class="ident" id="8003465"><a href="/net/udp_test.go.html#8002733">err</a></span><span class="op" id="8003468">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003475">_</span><span class="op" id="8003476">,</span>&nbsp;<span class="ident" id="8003478"><a href="/net/udp_test.go.html#8002733">err</a></span>&nbsp;<span class="op" id="8003482">=</span>&nbsp;<span class="ident" id="8003484"><a href="/net/udp_test.go.html#8002730">c</a></span><span class="op" id="8003485">.</span><span class="ident" id="8003486">Write</span><span class="op" id="8003491">(</span><span class="op" id="8003492">[</span><span class="op" id="8003493">]</span><span class="builtintype" id="8003494">byte</span><span class="op" id="8003498">(</span><span class="string" id="8003499">&#34;Connection-oriented&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="8003532">)</span><span class="op" id="8003533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8003536">if</span>&nbsp;<span class="ident" id="8003539"><a href="/net/udp_test.go.html#8002733">err</a></span>&nbsp;<span class="op" id="8003543">!=</span>&nbsp;<span class="ident" id="8003546">nil</span>&nbsp;<span class="op" id="8003550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003554"><a href="/net/udp_test.go.html#8002699">t</a></span><span class="op" id="8003555">.</span><span class="ident" id="8003556">Fatalf</span><span class="op" id="8003562">(</span><span class="string" id="8003563">&#34;Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8003581">,</span>&nbsp;<span class="ident" id="8003583"><a href="/net/udp_test.go.html#8002733">err</a></span><span class="op" id="8003586">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003589">}</span><br>
<span class="lineno"></span><span class="op" id="8003591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8003594">func</span>&nbsp;<span class="ident" id="8003599">testWriteToPacketConn</span><span class="op" id="8003620">(</span><span class="ident" id="8003621">t</span>&nbsp;<span class="op" id="8003623">*</span><span class="ident" id="8003624"><a href="/net/udp_test.go.html#8000789">testing</a></span><span class="op" id="8003631">.</span><span class="ident" id="8003632">T</span><span class="op" id="8003633">,</span>&nbsp;<span class="ident" id="8003635">raddr</span>&nbsp;<span class="builtintype" id="8003641">string</span><span class="op" id="8003647">)</span>&nbsp;<span class="op" id="8003649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003652">c</span><span class="op" id="8003653">,</span>&nbsp;<span class="ident" id="8003655">err</span>&nbsp;<span class="op" id="8003659">:=</span>&nbsp;<span class="ident" id="8003662"><a href="/net/dial.go.html#1338827">ListenPacket</a></span><span class="op" id="8003674">(</span><span class="string" id="8003675">&#34;udp&#34;</span><span class="op" id="8003680">,</span>&nbsp;<span class="string" id="8003682">&#34;127.0.0.1:0&#34;</span><span class="op" id="8003695">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8003698">if</span>&nbsp;<span class="ident" id="8003701"><a href="/net/udp_test.go.html#8003655">err</a></span>&nbsp;<span class="op" id="8003705">!=</span>&nbsp;<span class="ident" id="8003708">nil</span>&nbsp;<span class="op" id="8003712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003716"><a href="/net/udp_test.go.html#8003621">t</a></span><span class="op" id="8003717">.</span><span class="ident" id="8003718">Fatalf</span><span class="op" id="8003724">(</span><span class="string" id="8003725">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8003750">,</span>&nbsp;<span class="ident" id="8003752"><a href="/net/udp_test.go.html#8003655">err</a></span><span class="op" id="8003755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8003761">defer</span>&nbsp;<span class="ident" id="8003767"><a href="/net/udp_test.go.html#8003652">c</a></span><span class="op" id="8003768">.</span><span class="ident" id="8003769">Close</span><span class="op" id="8003774">(</span><span class="op" id="8003775">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003779">ra</span><span class="op" id="8003781">,</span>&nbsp;<span class="ident" id="8003783"><a href="/net/udp_test.go.html#8003655">err</a></span>&nbsp;<span class="op" id="8003787">:=</span>&nbsp;<span class="ident" id="8003790"><a href="/net/udpsock.go.html#1517608">ResolveUDPAddr</a></span><span class="op" id="8003804">(</span><span class="string" id="8003805">&#34;udp&#34;</span><span class="op" id="8003810">,</span>&nbsp;<span class="ident" id="8003812"><a href="/net/udp_test.go.html#8003635">raddr</a></span><span class="op" id="8003817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8003820">if</span>&nbsp;<span class="ident" id="8003823"><a href="/net/udp_test.go.html#8003655">err</a></span>&nbsp;<span class="op" id="8003827">!=</span>&nbsp;<span class="ident" id="8003830">nil</span>&nbsp;<span class="op" id="8003834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003838"><a href="/net/udp_test.go.html#8003621">t</a></span><span class="op" id="8003839">.</span><span class="ident" id="8003840">Fatalf</span><span class="op" id="8003846">(</span><span class="string" id="8003847">&#34;ResolveUDPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8003874">,</span>&nbsp;<span class="ident" id="8003876"><a href="/net/udp_test.go.html#8003655">err</a></span><span class="op" id="8003879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8003882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003886">_</span><span class="op" id="8003887">,</span>&nbsp;<span class="ident" id="8003889"><a href="/net/udp_test.go.html#8003655">err</a></span>&nbsp;<span class="op" id="8003893">=</span>&nbsp;<span class="ident" id="8003895"><a href="/net/udp_test.go.html#8003652">c</a></span><span class="op" id="8003896">.</span><span class="op" id="8003897">(</span><span class="op" id="8003898">*</span><span class="ident" id="8003899"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="8003906">)</span><span class="op" id="8003907">.</span><span class="ident" id="8003908">WriteToUDP</span><span class="op" id="8003918">(</span><span class="op" id="8003919">[</span><span class="op" id="8003920">]</span><span class="builtintype" id="8003921">byte</span><span class="op" id="8003925">(</span><span class="string" id="8003926">&#34;Connection-less&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="8003955">)</span><span class="op" id="8003956">,</span>&nbsp;<span class="ident" id="8003958"><a href="/net/udp_test.go.html#8003779">ra</a></span><span class="op" id="8003960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8003963">if</span>&nbsp;<span class="ident" id="8003966"><a href="/net/udp_test.go.html#8003655">err</a></span>&nbsp;<span class="op" id="8003970">!=</span>&nbsp;<span class="ident" id="8003973">nil</span>&nbsp;<span class="op" id="8003977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8003981"><a href="/net/udp_test.go.html#8003621">t</a></span><span class="op" id="8003982">.</span><span class="ident" id="8003983">Fatalf</span><span class="op" id="8003989">(</span><span class="string" id="8003990">&#34;WriteToUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8004013">,</span>&nbsp;<span class="ident" id="8004015"><a href="/net/udp_test.go.html#8003655">err</a></span><span class="op" id="8004018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004025">_</span><span class="op" id="8004026">,</span>&nbsp;<span class="ident" id="8004028"><a href="/net/udp_test.go.html#8003655">err</a></span>&nbsp;<span class="op" id="8004032">=</span>&nbsp;<span class="ident" id="8004034"><a href="/net/udp_test.go.html#8003652">c</a></span><span class="op" id="8004035">.</span><span class="ident" id="8004036">WriteTo</span><span class="op" id="8004043">(</span><span class="op" id="8004044">[</span><span class="op" id="8004045">]</span><span class="builtintype" id="8004046">byte</span><span class="op" id="8004050">(</span><span class="string" id="8004051">&#34;Connection-less&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="8004080">)</span><span class="op" id="8004081">,</span>&nbsp;<span class="ident" id="8004083"><a href="/net/udp_test.go.html#8003779">ra</a></span><span class="op" id="8004085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8004088">if</span>&nbsp;<span class="ident" id="8004091"><a href="/net/udp_test.go.html#8003655">err</a></span>&nbsp;<span class="op" id="8004095">!=</span>&nbsp;<span class="ident" id="8004098">nil</span>&nbsp;<span class="op" id="8004102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004106"><a href="/net/udp_test.go.html#8003621">t</a></span><span class="op" id="8004107">.</span><span class="ident" id="8004108">Fatalf</span><span class="op" id="8004114">(</span><span class="string" id="8004115">&#34;WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8004135">,</span>&nbsp;<span class="ident" id="8004137"><a href="/net/udp_test.go.html#8003655">err</a></span><span class="op" id="8004140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004147">_</span><span class="op" id="8004148">,</span>&nbsp;<span class="ident" id="8004150"><a href="/net/udp_test.go.html#8003655">err</a></span>&nbsp;<span class="op" id="8004154">=</span>&nbsp;<span class="ident" id="8004156"><a href="/net/udp_test.go.html#8003652">c</a></span><span class="op" id="8004157">.</span><span class="op" id="8004158">(</span><span class="op" id="8004159">*</span><span class="ident" id="8004160"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="8004167">)</span><span class="op" id="8004168">.</span><span class="ident" id="8004169">Write</span><span class="op" id="8004174">(</span><span class="op" id="8004175">[</span><span class="op" id="8004176">]</span><span class="builtintype" id="8004177">byte</span><span class="op" id="8004181">(</span><span class="string" id="8004182">&#34;Connection-less&nbsp;mode&nbsp;socket&#34;</span><span class="op" id="8004211">)</span><span class="op" id="8004212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8004215">if</span>&nbsp;<span class="ident" id="8004218"><a href="/net/udp_test.go.html#8003655">err</a></span>&nbsp;<span class="op" id="8004222">==</span>&nbsp;<span class="ident" id="8004225">nil</span>&nbsp;<span class="op" id="8004229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004233"><a href="/net/udp_test.go.html#8003621">t</a></span><span class="op" id="8004234">.</span><span class="ident" id="8004235">Fatal</span><span class="op" id="8004240">(</span><span class="string" id="8004241">&#34;Write&nbsp;should&nbsp;fail&#34;</span><span class="op" id="8004260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004263">}</span><br>
<span class="lineno"></span><span class="op" id="8004265">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="8004268">var</span>&nbsp;<span class="ident" id="8004272">udpConnLocalNameTests</span>&nbsp;<span class="op" id="8004294">=</span>&nbsp;<span class="op" id="8004296">[</span><span class="op" id="8004297">]</span><span class="keyword" id="8004298">struct</span>&nbsp;<span class="op" id="8004305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004308">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8004314">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004322">laddr</span>&nbsp;<span class="op" id="8004328">*</span><span class="ident" id="8004329"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><br>
<span class="lineno"></span><span class="op" id="8004337">}</span><span class="op" id="8004338">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004341">{</span><span class="string" id="8004342">&#34;udp4&#34;</span><span class="op" id="8004348">,</span>&nbsp;<span class="op" id="8004350">&amp;</span><span class="ident" id="8004351"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="8004358">{</span><span class="ident" id="8004359">IP</span><span class="op" id="8004361">:</span>&nbsp;<span class="ident" id="8004363"><a href="/net/ip.go.html#1417459">IPv4</a></span><span class="op" id="8004367">(</span><span class="num" id="8004368">127</span><span class="op" id="8004371">,</span>&nbsp;<span class="num" id="8004373">0</span><span class="op" id="8004374">,</span>&nbsp;<span class="num" id="8004376">0</span><span class="op" id="8004377">,</span>&nbsp;<span class="num" id="8004379">1</span><span class="op" id="8004380">)</span><span class="op" id="8004381">}</span><span class="op" id="8004382">}</span><span class="op" id="8004383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004386">{</span><span class="string" id="8004387">&#34;udp4&#34;</span><span class="op" id="8004393">,</span>&nbsp;<span class="op" id="8004395">&amp;</span><span class="ident" id="8004396"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="8004403">{</span><span class="op" id="8004404">}</span><span class="op" id="8004405">}</span><span class="op" id="8004406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004409">{</span><span class="string" id="8004410">&#34;udp4&#34;</span><span class="op" id="8004416">,</span>&nbsp;<span class="ident" id="8004418">nil</span><span class="op" id="8004421">}</span><span class="op" id="8004422">,</span><br>
<span class="lineno"></span><span class="op" id="8004424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="8004427">func</span>&nbsp;<span class="ident" id="8004432">TestUDPConnLocalName</span><span class="op" id="8004452">(</span><span class="ident" id="8004453">t</span>&nbsp;<span class="op" id="8004455">*</span><span class="ident" id="8004456"><a href="/net/udp_test.go.html#8000789">testing</a></span><span class="op" id="8004463">.</span><span class="ident" id="8004464">T</span><span class="op" id="8004465">)</span>&nbsp;<span class="op" id="8004467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8004470">if</span>&nbsp;<span class="ident" id="8004473"><a href="/net/udp_test.go.html#8000789">testing</a></span><span class="op" id="8004480">.</span><span class="ident" id="8004481">Short</span><span class="op" id="8004486">(</span><span class="op" id="8004487">)</span>&nbsp;<span class="op" id="8004489">||</span>&nbsp;<span class="op" id="8004492">!</span><span class="op" id="8004493">*</span><span class="ident" id="8004494"><a href="/net/lookup_test.go.html#7913432">testExternal</a></span>&nbsp;<span class="op" id="8004507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004511"><a href="/net/udp_test.go.html#8004453">t</a></span><span class="op" id="8004512">.</span><span class="ident" id="8004513">Skip</span><span class="op" id="8004517">(</span><span class="string" id="8004518">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8004559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8004566">for</span>&nbsp;<span class="ident" id="8004570">_</span><span class="op" id="8004571">,</span>&nbsp;<span class="ident" id="8004573">tt</span>&nbsp;<span class="op" id="8004576">:=</span>&nbsp;<span class="keyword" id="8004579">range</span>&nbsp;<span class="ident" id="8004585"><a href="/net/udp_test.go.html#8004272">udpConnLocalNameTests</a></span>&nbsp;<span class="op" id="8004607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004611">c</span><span class="op" id="8004612">,</span>&nbsp;<span class="ident" id="8004614">err</span>&nbsp;<span class="op" id="8004618">:=</span>&nbsp;<span class="ident" id="8004621"><a href="/net/udpsock_posix.go.html#1523853">ListenUDP</a></span><span class="op" id="8004630">(</span><span class="ident" id="8004631"><a href="/net/udp_test.go.html#8004573">tt</a></span><span class="op" id="8004633">.</span><span class="ident" id="8004634">net</span><span class="op" id="8004637">,</span>&nbsp;<span class="ident" id="8004639"><a href="/net/udp_test.go.html#8004573">tt</a></span><span class="op" id="8004641">.</span><span class="ident" id="8004642">laddr</span><span class="op" id="8004647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8004651">if</span>&nbsp;<span class="ident" id="8004654"><a href="/net/udp_test.go.html#8004614">err</a></span>&nbsp;<span class="op" id="8004658">!=</span>&nbsp;<span class="ident" id="8004661">nil</span>&nbsp;<span class="op" id="8004665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004670"><a href="/net/udp_test.go.html#8004453">t</a></span><span class="op" id="8004671">.</span><span class="ident" id="8004672">Fatalf</span><span class="op" id="8004678">(</span><span class="string" id="8004679">&#34;ListenUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8004701">,</span>&nbsp;<span class="ident" id="8004703"><a href="/net/udp_test.go.html#8004614">err</a></span><span class="op" id="8004706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004710">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8004714">defer</span>&nbsp;<span class="ident" id="8004720"><a href="/net/udp_test.go.html#8004611">c</a></span><span class="op" id="8004721">.</span><span class="ident" id="8004722">Close</span><span class="op" id="8004727">(</span><span class="op" id="8004728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004732">la</span>&nbsp;<span class="op" id="8004735">:=</span>&nbsp;<span class="ident" id="8004738"><a href="/net/udp_test.go.html#8004611">c</a></span><span class="op" id="8004739">.</span><span class="ident" id="8004740">LocalAddr</span><span class="op" id="8004749">(</span><span class="op" id="8004750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8004754">if</span>&nbsp;<span class="ident" id="8004757">a</span><span class="op" id="8004758">,</span>&nbsp;<span class="ident" id="8004760">ok</span>&nbsp;<span class="op" id="8004763">:=</span>&nbsp;<span class="ident" id="8004766"><a href="/net/udp_test.go.html#8004732">la</a></span><span class="op" id="8004768">.</span><span class="op" id="8004769">(</span><span class="op" id="8004770">*</span><span class="ident" id="8004771"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="8004778">)</span><span class="op" id="8004779">;</span>&nbsp;<span class="op" id="8004781">!</span><span class="ident" id="8004782"><a href="/net/udp_test.go.html#8004760">ok</a></span>&nbsp;<span class="op" id="8004785">||</span>&nbsp;<span class="ident" id="8004788"><a href="/net/udp_test.go.html#8004757">a</a></span><span class="op" id="8004789">.</span><span class="ident" id="8004790">Port</span>&nbsp;<span class="op" id="8004795">==</span>&nbsp;<span class="num" id="8004798">0</span>&nbsp;<span class="op" id="8004800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004805"><a href="/net/udp_test.go.html#8004453">t</a></span><span class="op" id="8004806">.</span><span class="ident" id="8004807">Fatalf</span><span class="op" id="8004813">(</span><span class="string" id="8004814">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;non-zero&nbsp;port&nbsp;number&#34;</span><span class="op" id="8004875">,</span>&nbsp;<span class="ident" id="8004877"><a href="/net/udp_test.go.html#8004732">la</a></span><span class="op" id="8004879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004883">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8004886">}</span><br>
<span class="lineno"></span><span class="op" id="8004888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8004891">func</span>&nbsp;<span class="ident" id="8004896">TestUDPConnLocalAndRemoteNames</span><span class="op" id="8004926">(</span><span class="ident" id="8004927">t</span>&nbsp;<span class="op" id="8004929">*</span><span class="ident" id="8004930"><a href="/net/udp_test.go.html#8000789">testing</a></span><span class="op" id="8004937">.</span><span class="ident" id="8004938">T</span><span class="op" id="8004939">)</span>&nbsp;<span class="op" id="8004941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8004944">for</span>&nbsp;<span class="ident" id="8004948">_</span><span class="op" id="8004949">,</span>&nbsp;<span class="ident" id="8004951">laddr</span>&nbsp;<span class="op" id="8004957">:=</span>&nbsp;<span class="keyword" id="8004960">range</span>&nbsp;<span class="op" id="8004966">[</span><span class="op" id="8004967">]</span><span class="builtintype" id="8004968">string</span><span class="op" id="8004974">{</span><span class="string" id="8004975">&#34;&#34;</span><span class="op" id="8004977">,</span>&nbsp;<span class="string" id="8004979">&#34;127.0.0.1:0&#34;</span><span class="op" id="8004992">}</span>&nbsp;<span class="op" id="8004994">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8004998">c1</span><span class="op" id="8005000">,</span>&nbsp;<span class="ident" id="8005002">err</span>&nbsp;<span class="op" id="8005006">:=</span>&nbsp;<span class="ident" id="8005009"><a href="/net/dial.go.html#1338827">ListenPacket</a></span><span class="op" id="8005021">(</span><span class="string" id="8005022">&#34;udp&#34;</span><span class="op" id="8005027">,</span>&nbsp;<span class="string" id="8005029">&#34;127.0.0.1:0&#34;</span><span class="op" id="8005042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005046">if</span>&nbsp;<span class="ident" id="8005049"><a href="/net/udp_test.go.html#8005002">err</a></span>&nbsp;<span class="op" id="8005053">!=</span>&nbsp;<span class="ident" id="8005056">nil</span>&nbsp;<span class="op" id="8005060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005065"><a href="/net/udp_test.go.html#8004927">t</a></span><span class="op" id="8005066">.</span><span class="ident" id="8005067">Fatalf</span><span class="op" id="8005073">(</span><span class="string" id="8005074">&#34;ListenUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8005096">,</span>&nbsp;<span class="ident" id="8005098"><a href="/net/udp_test.go.html#8005002">err</a></span><span class="op" id="8005101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005109">defer</span>&nbsp;<span class="ident" id="8005115"><a href="/net/udp_test.go.html#8004998">c1</a></span><span class="op" id="8005117">.</span><span class="ident" id="8005118">Close</span><span class="op" id="8005123">(</span><span class="op" id="8005124">)</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005129">var</span>&nbsp;<span class="ident" id="8005133">la</span>&nbsp;<span class="op" id="8005136">*</span><span class="ident" id="8005137"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005147">if</span>&nbsp;<span class="ident" id="8005150"><a href="/net/udp_test.go.html#8004951">laddr</a></span>&nbsp;<span class="op" id="8005156">!=</span>&nbsp;<span class="string" id="8005159">&#34;&#34;</span>&nbsp;<span class="op" id="8005162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005167">var</span>&nbsp;<span class="ident" id="8005171">err</span>&nbsp;<span class="builtintype" id="8005175">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005184">if</span>&nbsp;<span class="ident" id="8005187"><a href="/net/udp_test.go.html#8005133">la</a></span><span class="op" id="8005189">,</span>&nbsp;<span class="ident" id="8005191"><a href="/net/udp_test.go.html#8005171">err</a></span>&nbsp;<span class="op" id="8005195">=</span>&nbsp;<span class="ident" id="8005197"><a href="/net/udpsock.go.html#1517608">ResolveUDPAddr</a></span><span class="op" id="8005211">(</span><span class="string" id="8005212">&#34;udp&#34;</span><span class="op" id="8005217">,</span>&nbsp;<span class="ident" id="8005219"><a href="/net/udp_test.go.html#8004951">laddr</a></span><span class="op" id="8005224">)</span><span class="op" id="8005225">;</span>&nbsp;<span class="ident" id="8005227"><a href="/net/udp_test.go.html#8005171">err</a></span>&nbsp;<span class="op" id="8005231">!=</span>&nbsp;<span class="ident" id="8005234">nil</span>&nbsp;<span class="op" id="8005238">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005244"><a href="/net/udp_test.go.html#8004927">t</a></span><span class="op" id="8005245">.</span><span class="ident" id="8005246">Fatalf</span><span class="op" id="8005252">(</span><span class="string" id="8005253">&#34;ResolveUDPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8005280">,</span>&nbsp;<span class="ident" id="8005282"><a href="/net/udp_test.go.html#8005171">err</a></span><span class="op" id="8005285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005298">c2</span><span class="op" id="8005300">,</span>&nbsp;<span class="ident" id="8005302"><a href="/net/udp_test.go.html#8005002">err</a></span>&nbsp;<span class="op" id="8005306">:=</span>&nbsp;<span class="ident" id="8005309"><a href="/net/udpsock_posix.go.html#1522778">DialUDP</a></span><span class="op" id="8005316">(</span><span class="string" id="8005317">&#34;udp&#34;</span><span class="op" id="8005322">,</span>&nbsp;<span class="ident" id="8005324"><a href="/net/udp_test.go.html#8005133">la</a></span><span class="op" id="8005326">,</span>&nbsp;<span class="ident" id="8005328"><a href="/net/udp_test.go.html#8004998">c1</a></span><span class="op" id="8005330">.</span><span class="ident" id="8005331">LocalAddr</span><span class="op" id="8005340">(</span><span class="op" id="8005341">)</span><span class="op" id="8005342">.</span><span class="op" id="8005343">(</span><span class="op" id="8005344">*</span><span class="ident" id="8005345"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="8005352">)</span><span class="op" id="8005353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005357">if</span>&nbsp;<span class="ident" id="8005360"><a href="/net/udp_test.go.html#8005002">err</a></span>&nbsp;<span class="op" id="8005364">!=</span>&nbsp;<span class="ident" id="8005367">nil</span>&nbsp;<span class="op" id="8005371">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005376"><a href="/net/udp_test.go.html#8004927">t</a></span><span class="op" id="8005377">.</span><span class="ident" id="8005378">Fatalf</span><span class="op" id="8005384">(</span><span class="string" id="8005385">&#34;DialUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8005405">,</span>&nbsp;<span class="ident" id="8005407"><a href="/net/udp_test.go.html#8005002">err</a></span><span class="op" id="8005410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005418">defer</span>&nbsp;<span class="ident" id="8005424"><a href="/net/udp_test.go.html#8005298">c2</a></span><span class="op" id="8005426">.</span><span class="ident" id="8005427">Close</span><span class="op" id="8005432">(</span><span class="op" id="8005433">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005438">var</span>&nbsp;<span class="ident" id="8005442">connAddrs</span>&nbsp;<span class="op" id="8005452">=</span>&nbsp;<span class="op" id="8005454">[</span><span class="num" id="8005455">4</span><span class="op" id="8005456">]</span><span class="keyword" id="8005457">struct</span>&nbsp;<span class="op" id="8005464">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005469">got</span>&nbsp;<span class="ident" id="8005473"><a href="/net/net.go.html#1465097">Addr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005481">ok</span>&nbsp;&nbsp;<span class="builtintype" id="8005485">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005492">}</span><span class="op" id="8005493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005498">{</span><span class="ident" id="8005499"><a href="/net/udp_test.go.html#8004998">c1</a></span><span class="op" id="8005501">.</span><span class="ident" id="8005502">LocalAddr</span><span class="op" id="8005511">(</span><span class="op" id="8005512">)</span><span class="op" id="8005513">,</span>&nbsp;<span class="builtintype" id="8005515">true</span><span class="op" id="8005519">}</span><span class="op" id="8005520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005525">{</span><span class="ident" id="8005526"><a href="/net/udp_test.go.html#8004998">c1</a></span><span class="op" id="8005528">.</span><span class="op" id="8005529">(</span><span class="op" id="8005530">*</span><span class="ident" id="8005531"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="8005538">)</span><span class="op" id="8005539">.</span><span class="ident" id="8005540">RemoteAddr</span><span class="op" id="8005550">(</span><span class="op" id="8005551">)</span><span class="op" id="8005552">,</span>&nbsp;<span class="builtintype" id="8005554">false</span><span class="op" id="8005559">}</span><span class="op" id="8005560">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005565">{</span><span class="ident" id="8005566"><a href="/net/udp_test.go.html#8005298">c2</a></span><span class="op" id="8005568">.</span><span class="ident" id="8005569">LocalAddr</span><span class="op" id="8005578">(</span><span class="op" id="8005579">)</span><span class="op" id="8005580">,</span>&nbsp;<span class="builtintype" id="8005582">true</span><span class="op" id="8005586">}</span><span class="op" id="8005587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005592">{</span><span class="ident" id="8005593"><a href="/net/udp_test.go.html#8005298">c2</a></span><span class="op" id="8005595">.</span><span class="ident" id="8005596">RemoteAddr</span><span class="op" id="8005606">(</span><span class="op" id="8005607">)</span><span class="op" id="8005608">,</span>&nbsp;<span class="builtintype" id="8005610">true</span><span class="op" id="8005614">}</span><span class="op" id="8005615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005623">for</span>&nbsp;<span class="ident" id="8005627">_</span><span class="op" id="8005628">,</span>&nbsp;<span class="ident" id="8005630">ca</span>&nbsp;<span class="op" id="8005633">:=</span>&nbsp;<span class="keyword" id="8005636">range</span>&nbsp;<span class="ident" id="8005642"><a href="/net/udp_test.go.html#8005442">connAddrs</a></span>&nbsp;<span class="op" id="8005652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005657">if</span>&nbsp;<span class="ident" id="8005660">a</span><span class="op" id="8005661">,</span>&nbsp;<span class="ident" id="8005663">ok</span>&nbsp;<span class="op" id="8005666">:=</span>&nbsp;<span class="ident" id="8005669"><a href="/net/udp_test.go.html#8005630">ca</a></span><span class="op" id="8005671">.</span><span class="ident" id="8005672">got</span><span class="op" id="8005675">.</span><span class="op" id="8005676">(</span><span class="op" id="8005677">*</span><span class="ident" id="8005678"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="8005685">)</span><span class="op" id="8005686">;</span>&nbsp;<span class="ident" id="8005688"><a href="/net/udp_test.go.html#8005663">ok</a></span>&nbsp;<span class="op" id="8005691">!=</span>&nbsp;<span class="ident" id="8005694"><a href="/net/udp_test.go.html#8005630">ca</a></span><span class="op" id="8005696">.</span><span class="ident" id="8005697">ok</span>&nbsp;<span class="op" id="8005700">||</span>&nbsp;<span class="ident" id="8005703"><a href="/net/udp_test.go.html#8005663">ok</a></span>&nbsp;<span class="op" id="8005706">&amp;&amp;</span>&nbsp;<span class="ident" id="8005709"><a href="/net/udp_test.go.html#8005660">a</a></span><span class="op" id="8005710">.</span><span class="ident" id="8005711">Port</span>&nbsp;<span class="op" id="8005716">==</span>&nbsp;<span class="num" id="8005719">0</span>&nbsp;<span class="op" id="8005721">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005727"><a href="/net/udp_test.go.html#8004927">t</a></span><span class="op" id="8005728">.</span><span class="ident" id="8005729">Fatalf</span><span class="op" id="8005735">(</span><span class="string" id="8005736">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;non-zero&nbsp;port&nbsp;number&#34;</span><span class="op" id="8005797">,</span>&nbsp;<span class="ident" id="8005799"><a href="/net/udp_test.go.html#8005630">ca</a></span><span class="op" id="8005801">.</span><span class="ident" id="8005802">got</span><span class="op" id="8005805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005817">}</span><br>
<span class="lineno"></span><span class="op" id="8005819">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="8005822">func</span>&nbsp;<span class="ident" id="8005827">TestIPv6LinkLocalUnicastUDP</span><span class="op" id="8005854">(</span><span class="ident" id="8005855">t</span>&nbsp;<span class="op" id="8005857">*</span><span class="ident" id="8005858"><a href="/net/udp_test.go.html#8000789">testing</a></span><span class="op" id="8005865">.</span><span class="ident" id="8005866">T</span><span class="op" id="8005867">)</span>&nbsp;<span class="op" id="8005869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005872">if</span>&nbsp;<span class="ident" id="8005875"><a href="/net/udp_test.go.html#8000789">testing</a></span><span class="op" id="8005882">.</span><span class="ident" id="8005883">Short</span><span class="op" id="8005888">(</span><span class="op" id="8005889">)</span>&nbsp;<span class="op" id="8005891">||</span>&nbsp;<span class="op" id="8005894">!</span><span class="op" id="8005895">*</span><span class="ident" id="8005896"><a href="/net/lookup_test.go.html#7913432">testExternal</a></span>&nbsp;<span class="op" id="8005909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005913"><a href="/net/udp_test.go.html#8005855">t</a></span><span class="op" id="8005914">.</span><span class="ident" id="8005915">Skip</span><span class="op" id="8005919">(</span><span class="string" id="8005920">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8005961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8005964">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8005967">if</span>&nbsp;<span class="op" id="8005970">!</span><span class="ident" id="8005971"><a href="/net/ipsock.go.html#1440628">supportsIPv6</a></span>&nbsp;<span class="op" id="8005984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8005988"><a href="/net/udp_test.go.html#8005855">t</a></span><span class="op" id="8005989">.</span><span class="ident" id="8005990">Skip</span><span class="op" id="8005994">(</span><span class="string" id="8005995">&#34;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="8006018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8006024">ifi</span>&nbsp;<span class="op" id="8006028">:=</span>&nbsp;<span class="ident" id="8006031"><a href="/net/interface_test.go.html#7876504">loopbackInterface</a></span><span class="op" id="8006048">(</span><span class="op" id="8006049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8006052">if</span>&nbsp;<span class="ident" id="8006055"><a href="/net/udp_test.go.html#8006024">ifi</a></span>&nbsp;<span class="op" id="8006059">==</span>&nbsp;<span class="ident" id="8006062">nil</span>&nbsp;<span class="op" id="8006066">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8006070"><a href="/net/udp_test.go.html#8005855">t</a></span><span class="op" id="8006071">.</span><span class="ident" id="8006072">Skip</span><span class="op" id="8006076">(</span><span class="string" id="8006077">&#34;loopback&nbsp;interface&nbsp;not&nbsp;found&#34;</span><span class="op" id="8006107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8006113">laddr</span>&nbsp;<span class="op" id="8006119">:=</span>&nbsp;<span class="ident" id="8006122"><a href="/net/interface_test.go.html#7876891">ipv6LinkLocalUnicastAddr</a></span><span class="op" id="8006146">(</span><span class="ident" id="8006147"><a href="/net/udp_test.go.html#8006024">ifi</a></span><span class="op" id="8006150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8006153">if</span>&nbsp;<span class="ident" id="8006156"><a href="/net/udp_test.go.html#8006113">laddr</a></span>&nbsp;<span class="op" id="8006162">==</span>&nbsp;<span class="string" id="8006165">&#34;&#34;</span>&nbsp;<span class="op" id="8006168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8006172"><a href="/net/udp_test.go.html#8005855">t</a></span><span class="op" id="8006173">.</span><span class="ident" id="8006174">Skip</span><span class="op" id="8006178">(</span><span class="string" id="8006179">&#34;ipv6&nbsp;unicast&nbsp;address&nbsp;on&nbsp;loopback&nbsp;not&nbsp;found&#34;</span><span class="op" id="8006223">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8006230">type</span>&nbsp;<span class="ident" id="8006235">test</span>&nbsp;<span class="keyword" id="8006240">struct</span>&nbsp;<span class="op" id="8006247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8006251">net</span><span class="op" id="8006254">,</span>&nbsp;<span class="ident" id="8006256">addr</span>&nbsp;&nbsp;<span class="builtintype" id="8006262">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8006271">nameLookup</span>&nbsp;<span class="builtintype" id="8006282">bool</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8006291">var</span>&nbsp;<span class="ident" id="8006295">tests</span>&nbsp;<span class="op" id="8006301">=</span>&nbsp;<span class="op" id="8006303">[</span><span class="op" id="8006304">]</span><span class="ident" id="8006305"><a href="/net/udp_test.go.html#8006235">test</a></span><span class="op" id="8006309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006313">{</span><span class="string" id="8006314">&#34;udp&#34;</span><span class="op" id="8006319">,</span>&nbsp;<span class="string" id="8006321">&#34;[&#34;</span>&nbsp;<span class="op" id="8006325">+</span>&nbsp;<span class="ident" id="8006327"><a href="/net/udp_test.go.html#8006113">laddr</a></span>&nbsp;<span class="op" id="8006333">+</span>&nbsp;<span class="string" id="8006335">&#34;%&#34;</span>&nbsp;<span class="op" id="8006339">+</span>&nbsp;<span class="ident" id="8006341"><a href="/net/udp_test.go.html#8006024">ifi</a></span><span class="op" id="8006344">.</span><span class="ident" id="8006345">Name</span>&nbsp;<span class="op" id="8006350">+</span>&nbsp;<span class="string" id="8006352">&#34;]:0&#34;</span><span class="op" id="8006357">,</span>&nbsp;<span class="builtintype" id="8006359">false</span><span class="op" id="8006364">}</span><span class="op" id="8006365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006369">{</span><span class="string" id="8006370">&#34;udp6&#34;</span><span class="op" id="8006376">,</span>&nbsp;<span class="string" id="8006378">&#34;[&#34;</span>&nbsp;<span class="op" id="8006382">+</span>&nbsp;<span class="ident" id="8006384"><a href="/net/udp_test.go.html#8006113">laddr</a></span>&nbsp;<span class="op" id="8006390">+</span>&nbsp;<span class="string" id="8006392">&#34;%&#34;</span>&nbsp;<span class="op" id="8006396">+</span>&nbsp;<span class="ident" id="8006398"><a href="/net/udp_test.go.html#8006024">ifi</a></span><span class="op" id="8006401">.</span><span class="ident" id="8006402">Name</span>&nbsp;<span class="op" id="8006407">+</span>&nbsp;<span class="string" id="8006409">&#34;]:0&#34;</span><span class="op" id="8006414">,</span>&nbsp;<span class="builtintype" id="8006416">false</span><span class="op" id="8006421">}</span><span class="op" id="8006422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006425">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8006428">//&nbsp;The&nbsp;first&nbsp;udp&nbsp;test&nbsp;fails&nbsp;on&nbsp;DragonFly&nbsp;-&nbsp;see&nbsp;issue&nbsp;7473.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8006488">if</span>&nbsp;<span class="ident" id="8006491"><a href="/net/udp_test.go.html#8000767">runtime</a></span><span class="op" id="8006498">.</span><span class="ident" id="8006499">GOOS</span>&nbsp;<span class="op" id="8006504">==</span>&nbsp;<span class="string" id="8006507">&#34;dragonfly&#34;</span>&nbsp;<span class="op" id="8006519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8006523"><a href="/net/udp_test.go.html#8006295">tests</a></span>&nbsp;<span class="op" id="8006529">=</span>&nbsp;<span class="ident" id="8006531"><a href="/net/udp_test.go.html#8006295">tests</a></span><span class="op" id="8006536">[</span><span class="num" id="8006537">1</span><span class="op" id="8006538">:</span><span class="op" id="8006539">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8006545">switch</span>&nbsp;<span class="ident" id="8006552"><a href="/net/udp_test.go.html#8000767">runtime</a></span><span class="op" id="8006559">.</span><span class="ident" id="8006560">GOOS</span>&nbsp;<span class="op" id="8006565">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8006568">case</span>&nbsp;<span class="string" id="8006573">&#34;darwin&#34;</span><span class="op" id="8006581">,</span>&nbsp;<span class="string" id="8006583">&#34;dragonfly&#34;</span><span class="op" id="8006594">,</span>&nbsp;<span class="string" id="8006596">&#34;freebsd&#34;</span><span class="op" id="8006605">,</span>&nbsp;<span class="string" id="8006607">&#34;openbsd&#34;</span><span class="op" id="8006616">,</span>&nbsp;<span class="string" id="8006618">&#34;netbsd&#34;</span><span class="op" id="8006626">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8006630"><a href="/net/udp_test.go.html#8006295">tests</a></span>&nbsp;<span class="op" id="8006636">=</span>&nbsp;<span class="builtinfunc" id="8006638">append</span><span class="op" id="8006644">(</span><span class="ident" id="8006645"><a href="/net/udp_test.go.html#8006295">tests</a></span><span class="op" id="8006650">,</span>&nbsp;<span class="op" id="8006652">[</span><span class="op" id="8006653">]</span><span class="ident" id="8006654"><a href="/net/udp_test.go.html#8006235">test</a></span><span class="op" id="8006658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006663">{</span><span class="string" id="8006664">&#34;udp&#34;</span><span class="op" id="8006669">,</span>&nbsp;<span class="string" id="8006671">&#34;[localhost%&#34;</span>&nbsp;<span class="op" id="8006685">+</span>&nbsp;<span class="ident" id="8006687"><a href="/net/udp_test.go.html#8006024">ifi</a></span><span class="op" id="8006690">.</span><span class="ident" id="8006691">Name</span>&nbsp;<span class="op" id="8006696">+</span>&nbsp;<span class="string" id="8006698">&#34;]:0&#34;</span><span class="op" id="8006703">,</span>&nbsp;<span class="builtintype" id="8006705">true</span><span class="op" id="8006709">}</span><span class="op" id="8006710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006715">{</span><span class="string" id="8006716">&#34;udp6&#34;</span><span class="op" id="8006722">,</span>&nbsp;<span class="string" id="8006724">&#34;[localhost%&#34;</span>&nbsp;<span class="op" id="8006738">+</span>&nbsp;<span class="ident" id="8006740"><a href="/net/udp_test.go.html#8006024">ifi</a></span><span class="op" id="8006743">.</span><span class="ident" id="8006744">Name</span>&nbsp;<span class="op" id="8006749">+</span>&nbsp;<span class="string" id="8006751">&#34;]:0&#34;</span><span class="op" id="8006756">,</span>&nbsp;<span class="builtintype" id="8006758">true</span><span class="op" id="8006762">}</span><span class="op" id="8006763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006767">}</span><span class="op" id="8006768">...</span><span class="op" id="8006771">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8006774">case</span>&nbsp;<span class="string" id="8006779">&#34;linux&#34;</span><span class="op" id="8006786">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8006790"><a href="/net/udp_test.go.html#8006295">tests</a></span>&nbsp;<span class="op" id="8006796">=</span>&nbsp;<span class="builtinfunc" id="8006798">append</span><span class="op" id="8006804">(</span><span class="ident" id="8006805"><a href="/net/udp_test.go.html#8006295">tests</a></span><span class="op" id="8006810">,</span>&nbsp;<span class="op" id="8006812">[</span><span class="op" id="8006813">]</span><span class="ident" id="8006814"><a href="/net/udp_test.go.html#8006235">test</a></span><span class="op" id="8006818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006823">{</span><span class="string" id="8006824">&#34;udp&#34;</span><span class="op" id="8006829">,</span>&nbsp;<span class="string" id="8006831">&#34;[ip6-localhost%&#34;</span>&nbsp;<span class="op" id="8006849">+</span>&nbsp;<span class="ident" id="8006851"><a href="/net/udp_test.go.html#8006024">ifi</a></span><span class="op" id="8006854">.</span><span class="ident" id="8006855">Name</span>&nbsp;<span class="op" id="8006860">+</span>&nbsp;<span class="string" id="8006862">&#34;]:0&#34;</span><span class="op" id="8006867">,</span>&nbsp;<span class="builtintype" id="8006869">true</span><span class="op" id="8006873">}</span><span class="op" id="8006874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006879">{</span><span class="string" id="8006880">&#34;udp6&#34;</span><span class="op" id="8006886">,</span>&nbsp;<span class="string" id="8006888">&#34;[ip6-localhost%&#34;</span>&nbsp;<span class="op" id="8006906">+</span>&nbsp;<span class="ident" id="8006908"><a href="/net/udp_test.go.html#8006024">ifi</a></span><span class="op" id="8006911">.</span><span class="ident" id="8006912">Name</span>&nbsp;<span class="op" id="8006917">+</span>&nbsp;<span class="string" id="8006919">&#34;]:0&#34;</span><span class="op" id="8006924">,</span>&nbsp;<span class="builtintype" id="8006926">true</span><span class="op" id="8006930">}</span><span class="op" id="8006931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006935">}</span><span class="op" id="8006936">...</span><span class="op" id="8006939">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8006942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8006945">for</span>&nbsp;<span class="ident" id="8006949">_</span><span class="op" id="8006950">,</span>&nbsp;<span class="ident" id="8006952">tt</span>&nbsp;<span class="op" id="8006955">:=</span>&nbsp;<span class="keyword" id="8006958">range</span>&nbsp;<span class="ident" id="8006964"><a href="/net/udp_test.go.html#8006295">tests</a></span>&nbsp;<span class="op" id="8006970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8006974">c1</span><span class="op" id="8006976">,</span>&nbsp;<span class="ident" id="8006978">err</span>&nbsp;<span class="op" id="8006982">:=</span>&nbsp;<span class="ident" id="8006985"><a href="/net/dial.go.html#1338827">ListenPacket</a></span><span class="op" id="8006997">(</span><span class="ident" id="8006998"><a href="/net/udp_test.go.html#8006952">tt</a></span><span class="op" id="8007000">.</span><span class="ident" id="8007001">net</span><span class="op" id="8007004">,</span>&nbsp;<span class="ident" id="8007006"><a href="/net/udp_test.go.html#8006952">tt</a></span><span class="op" id="8007008">.</span><span class="ident" id="8007009">addr</span><span class="op" id="8007013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8007017">if</span>&nbsp;<span class="ident" id="8007020"><a href="/net/udp_test.go.html#8006978">err</a></span>&nbsp;<span class="op" id="8007024">!=</span>&nbsp;<span class="ident" id="8007027">nil</span>&nbsp;<span class="op" id="8007031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8007036">//&nbsp;It&nbsp;might&nbsp;return&nbsp;&#34;LookupHost&nbsp;returned&nbsp;no</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8007082">//&nbsp;suitable&nbsp;address&#34;&nbsp;error&nbsp;on&nbsp;some&nbsp;platforms.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8007131"><a href="/net/udp_test.go.html#8005855">t</a></span><span class="op" id="8007132">.</span><span class="ident" id="8007133">Logf</span><span class="op" id="8007137">(</span><span class="string" id="8007138">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8007163">,</span>&nbsp;<span class="ident" id="8007165"><a href="/net/udp_test.go.html#8006978">err</a></span><span class="op" id="8007168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8007173">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8007184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8007188">defer</span>&nbsp;<span class="ident" id="8007194"><a href="/net/udp_test.go.html#8006974">c1</a></span><span class="op" id="8007196">.</span><span class="ident" id="8007197">Close</span><span class="op" id="8007202">(</span><span class="op" id="8007203">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8007207">if</span>&nbsp;<span class="ident" id="8007210">la</span><span class="op" id="8007212">,</span>&nbsp;<span class="ident" id="8007214">ok</span>&nbsp;<span class="op" id="8007217">:=</span>&nbsp;<span class="ident" id="8007220"><a href="/net/udp_test.go.html#8006974">c1</a></span><span class="op" id="8007222">.</span><span class="ident" id="8007223">LocalAddr</span><span class="op" id="8007232">(</span><span class="op" id="8007233">)</span><span class="op" id="8007234">.</span><span class="op" id="8007235">(</span><span class="op" id="8007236">*</span><span class="ident" id="8007237"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="8007244">)</span><span class="op" id="8007245">;</span>&nbsp;<span class="op" id="8007247">!</span><span class="ident" id="8007248"><a href="/net/udp_test.go.html#8007214">ok</a></span>&nbsp;<span class="op" id="8007251">||</span>&nbsp;<span class="op" id="8007254">!</span><span class="ident" id="8007255"><a href="/net/udp_test.go.html#8006952">tt</a></span><span class="op" id="8007257">.</span><span class="ident" id="8007258">nameLookup</span>&nbsp;<span class="op" id="8007269">&amp;&amp;</span>&nbsp;<span class="ident" id="8007272"><a href="/net/udp_test.go.html#8007210">la</a></span><span class="op" id="8007274">.</span><span class="ident" id="8007275">Zone</span>&nbsp;<span class="op" id="8007280">==</span>&nbsp;<span class="string" id="8007283">&#34;&#34;</span>&nbsp;<span class="op" id="8007286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8007291"><a href="/net/udp_test.go.html#8005855">t</a></span><span class="op" id="8007292">.</span><span class="ident" id="8007293">Fatalf</span><span class="op" id="8007299">(</span><span class="string" id="8007300">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;zone&nbsp;identifier&#34;</span><span class="op" id="8007356">,</span>&nbsp;<span class="ident" id="8007358"><a href="/net/udp_test.go.html#8007210">la</a></span><span class="op" id="8007360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8007364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8007369">c2</span><span class="op" id="8007371">,</span>&nbsp;<span class="ident" id="8007373"><a href="/net/udp_test.go.html#8006978">err</a></span>&nbsp;<span class="op" id="8007377">:=</span>&nbsp;<span class="ident" id="8007380"><a href="/net/dial.go.html#1334377">Dial</a></span><span class="op" id="8007384">(</span><span class="ident" id="8007385"><a href="/net/udp_test.go.html#8006952">tt</a></span><span class="op" id="8007387">.</span><span class="ident" id="8007388">net</span><span class="op" id="8007391">,</span>&nbsp;<span class="ident" id="8007393"><a href="/net/udp_test.go.html#8006974">c1</a></span><span class="op" id="8007395">.</span><span class="ident" id="8007396">LocalAddr</span><span class="op" id="8007405">(</span><span class="op" id="8007406">)</span><span class="op" id="8007407">.</span><span class="ident" id="8007408">String</span><span class="op" id="8007414">(</span><span class="op" id="8007415">)</span><span class="op" id="8007416">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8007420">if</span>&nbsp;<span class="ident" id="8007423"><a href="/net/udp_test.go.html#8006978">err</a></span>&nbsp;<span class="op" id="8007427">!=</span>&nbsp;<span class="ident" id="8007430">nil</span>&nbsp;<span class="op" id="8007434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8007439"><a href="/net/udp_test.go.html#8005855">t</a></span><span class="op" id="8007440">.</span><span class="ident" id="8007441">Fatalf</span><span class="op" id="8007447">(</span><span class="string" id="8007448">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8007465">,</span>&nbsp;<span class="ident" id="8007467"><a href="/net/udp_test.go.html#8006978">err</a></span><span class="op" id="8007470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8007474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8007478">defer</span>&nbsp;<span class="ident" id="8007484"><a href="/net/udp_test.go.html#8007369">c2</a></span><span class="op" id="8007486">.</span><span class="ident" id="8007487">Close</span><span class="op" id="8007492">(</span><span class="op" id="8007493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8007497">if</span>&nbsp;<span class="ident" id="8007500">la</span><span class="op" id="8007502">,</span>&nbsp;<span class="ident" id="8007504">ok</span>&nbsp;<span class="op" id="8007507">:=</span>&nbsp;<span class="ident" id="8007510"><a href="/net/udp_test.go.html#8007369">c2</a></span><span class="op" id="8007512">.</span><span class="ident" id="8007513">LocalAddr</span><span class="op" id="8007522">(</span><span class="op" id="8007523">)</span><span class="op" id="8007524">.</span><span class="op" id="8007525">(</span><span class="op" id="8007526">*</span><span class="ident" id="8007527"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="8007534">)</span><span class="op" id="8007535">;</span>&nbsp;<span class="op" id="8007537">!</span><span class="ident" id="8007538"><a href="/net/udp_test.go.html#8007504">ok</a></span>&nbsp;<span class="op" id="8007541">||</span>&nbsp;<span class="op" id="8007544">!</span><span class="ident" id="8007545"><a href="/net/udp_test.go.html#8006952">tt</a></span><span class="op" id="8007547">.</span><span class="ident" id="8007548">nameLookup</span>&nbsp;<span class="op" id="8007559">&amp;&amp;</span>&nbsp;<span class="ident" id="8007562"><a href="/net/udp_test.go.html#8007500">la</a></span><span class="op" id="8007564">.</span><span class="ident" id="8007565">Zone</span>&nbsp;<span class="op" id="8007570">==</span>&nbsp;<span class="string" id="8007573">&#34;&#34;</span>&nbsp;<span class="op" id="8007576">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8007581"><a href="/net/udp_test.go.html#8005855">t</a></span><span class="op" id="8007582">.</span><span class="ident" id="8007583">Fatalf</span><span class="op" id="8007589">(</span><span class="string" id="8007590">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;zone&nbsp;identifier&#34;</span><span class="op" id="8007646">,</span>&nbsp;<span class="ident" id="8007648"><a href="/net/udp_test.go.html#8007500">la</a></span><span class="op" id="8007650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8007654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8007658">if</span>&nbsp;<span class="ident" id="8007661">ra</span><span class="op" id="8007663">,</span>&nbsp;<span class="ident" id="8007665">ok</span>&nbsp;<span class="op" id="8007668">:=</span>&nbsp;<span class="ident" id="8007671"><a href="/net/udp_test.go.html#8007369">c2</a></span><span class="op" id="8007673">.</span><span class="ident" id="8007674">RemoteAddr</span><span class="op" id="8007684">(</span><span class="op" id="8007685">)</span><span class="op" id="8007686">.</span><span class="op" id="8007687">(</span><span class="op" id="8007688">*</span><span class="ident" id="8007689"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="8007696">)</span><span class="op" id="8007697">;</span>&nbsp;<span class="op" id="8007699">!</span><span class="ident" id="8007700"><a href="/net/udp_test.go.html#8007665">ok</a></span>&nbsp;<span class="op" id="8007703">||</span>&nbsp;<span class="op" id="8007706">!</span><span class="ident" id="8007707"><a href="/net/udp_test.go.html#8006952">tt</a></span><span class="op" id="8007709">.</span><span class="ident" id="8007710">nameLookup</span>&nbsp;<span class="op" id="8007721">&amp;&amp;</span>&nbsp;<span class="ident" id="8007724"><a href="/net/udp_test.go.html#8007661">ra</a></span><span class="op" id="8007726">.</span><span class="ident" id="8007727">Zone</span>&nbsp;<span class="op" id="8007732">==</span>&nbsp;<span class="string" id="8007735">&#34;&#34;</span>&nbsp;<span class="op" id="8007738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8007743"><a href="/net/udp_test.go.html#8005855">t</a></span><span class="op" id="8007744">.</span><span class="ident" id="8007745">Fatalf</span><span class="op" id="8007751">(</span><span class="string" id="8007752">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;zone&nbsp;identifier&#34;</span><span class="op" id="8007808">,</span>&nbsp;<span class="ident" id="8007810"><a href="/net/udp_test.go.html#8007661">ra</a></span><span class="op" id="8007812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8007816">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8007821">if</span>&nbsp;<span class="ident" id="8007824">_</span><span class="op" id="8007825">,</span>&nbsp;<span class="ident" id="8007827">err</span>&nbsp;<span class="op" id="8007831">:=</span>&nbsp;<span class="ident" id="8007834"><a href="/net/udp_test.go.html#8007369">c2</a></span><span class="op" id="8007836">.</span><span class="ident" id="8007837">Write</span><span class="op" id="8007842">(</span><span class="op" id="8007843">[</span><span class="op" id="8007844">]</span><span class="builtintype" id="8007845">byte</span><span class="op" id="8007849">(</span><span class="string" id="8007850">&#34;UDP&nbsp;OVER&nbsp;IPV6&nbsp;LINKLOCAL&nbsp;TEST&#34;</span><span class="op" id="8007880">)</span><span class="op" id="8007881">)</span><span class="op" id="8007882">;</span>&nbsp;<span class="ident" id="8007884"><a href="/net/udp_test.go.html#8007827">err</a></span>&nbsp;<span class="op" id="8007888">!=</span>&nbsp;<span class="ident" id="8007891">nil</span>&nbsp;<span class="op" id="8007895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8007900"><a href="/net/udp_test.go.html#8005855">t</a></span><span class="op" id="8007901">.</span><span class="ident" id="8007902">Fatalf</span><span class="op" id="8007908">(</span><span class="string" id="8007909">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8007932">,</span>&nbsp;<span class="ident" id="8007934"><a href="/net/udp_test.go.html#8007827">err</a></span><span class="op" id="8007937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8007941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8007945">b</span>&nbsp;<span class="op" id="8007947">:=</span>&nbsp;<span class="builtinfunc" id="8007950">make</span><span class="op" id="8007954">(</span><span class="op" id="8007955">[</span><span class="op" id="8007956">]</span><span class="builtintype" id="8007957">byte</span><span class="op" id="8007961">,</span>&nbsp;<span class="num" id="8007963">32</span><span class="op" id="8007965">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8007969">if</span>&nbsp;<span class="ident" id="8007972">_</span><span class="op" id="8007973">,</span>&nbsp;<span class="ident" id="8007975">from</span><span class="op" id="8007979">,</span>&nbsp;<span class="ident" id="8007981">err</span>&nbsp;<span class="op" id="8007985">:=</span>&nbsp;<span class="ident" id="8007988"><a href="/net/udp_test.go.html#8006974">c1</a></span><span class="op" id="8007990">.</span><span class="ident" id="8007991">ReadFrom</span><span class="op" id="8007999">(</span><span class="ident" id="8008000"><a href="/net/udp_test.go.html#8007945">b</a></span><span class="op" id="8008001">)</span><span class="op" id="8008002">;</span>&nbsp;<span class="ident" id="8008004"><a href="/net/udp_test.go.html#8007981">err</a></span>&nbsp;<span class="op" id="8008008">!=</span>&nbsp;<span class="ident" id="8008011">nil</span>&nbsp;<span class="op" id="8008015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8008020"><a href="/net/udp_test.go.html#8005855">t</a></span><span class="op" id="8008021">.</span><span class="ident" id="8008022">Fatalf</span><span class="op" id="8008028">(</span><span class="string" id="8008029">&#34;PacketConn.ReadFrom&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8008061">,</span>&nbsp;<span class="ident" id="8008063"><a href="/net/udp_test.go.html#8007981">err</a></span><span class="op" id="8008066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8008070">}</span>&nbsp;<span class="keyword" id="8008072">else</span>&nbsp;<span class="op" id="8008077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8008082">if</span>&nbsp;<span class="ident" id="8008085">ra</span><span class="op" id="8008087">,</span>&nbsp;<span class="ident" id="8008089">ok</span>&nbsp;<span class="op" id="8008092">:=</span>&nbsp;<span class="ident" id="8008095"><a href="/net/udp_test.go.html#8007975">from</a></span><span class="op" id="8008099">.</span><span class="op" id="8008100">(</span><span class="op" id="8008101">*</span><span class="ident" id="8008102"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="8008109">)</span><span class="op" id="8008110">;</span>&nbsp;<span class="op" id="8008112">!</span><span class="ident" id="8008113"><a href="/net/udp_test.go.html#8008089">ok</a></span>&nbsp;<span class="op" id="8008116">||</span>&nbsp;<span class="op" id="8008119">!</span><span class="ident" id="8008120"><a href="/net/udp_test.go.html#8006952">tt</a></span><span class="op" id="8008122">.</span><span class="ident" id="8008123">nameLookup</span>&nbsp;<span class="op" id="8008134">&amp;&amp;</span>&nbsp;<span class="ident" id="8008137"><a href="/net/udp_test.go.html#8008085">ra</a></span><span class="op" id="8008139">.</span><span class="ident" id="8008140">Zone</span>&nbsp;<span class="op" id="8008145">==</span>&nbsp;<span class="string" id="8008148">&#34;&#34;</span>&nbsp;<span class="op" id="8008151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8008157"><a href="/net/udp_test.go.html#8005855">t</a></span><span class="op" id="8008158">.</span><span class="ident" id="8008159">Fatalf</span><span class="op" id="8008165">(</span><span class="string" id="8008166">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;zone&nbsp;identifier&#34;</span><span class="op" id="8008222">,</span>&nbsp;<span class="ident" id="8008224"><a href="/net/udp_test.go.html#8008085">ra</a></span><span class="op" id="8008226">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8008231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8008235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8008238">}</span><br>
<span class="lineno"></span><span class="op" id="8008240">}</span>
</div>
</body>
</html>
