<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3586485">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3586540">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3586594">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3586645">//&nbsp;Package&nbsp;url&nbsp;parses&nbsp;URLs&nbsp;and&nbsp;implements&nbsp;query&nbsp;escaping.</span><br>
<span class="lineno"></span><span class="comment" id="3586703">//&nbsp;See&nbsp;RFC&nbsp;3986.</span><br>
<span class="lineno"></span><span class="keyword" id="3586720">package</span>&nbsp;<span class="ident" id="3586728">url</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3586733">import</span>&nbsp;<span class="op" id="3586740">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3586743">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3586752">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3586762">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3586770">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3586781">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="3586791">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3586794">//&nbsp;Error&nbsp;reports&nbsp;an&nbsp;error&nbsp;and&nbsp;the&nbsp;operation&nbsp;and&nbsp;URL&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="3586862">type</span>&nbsp;<span class="ident" id="3586867">Error</span>&nbsp;<span class="keyword" id="3586873">struct</span>&nbsp;<span class="op" id="3586880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3586883">Op</span>&nbsp;&nbsp;<span class="builtintype" id="3586887">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3586895">URL</span>&nbsp;<span class="builtintype" id="3586899">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3586907">Err</span>&nbsp;<span class="builtintype" id="3586911">error</span><br>
<span class="lineno"></span><span class="op" id="3586917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3586920">func</span>&nbsp;<span class="op" id="3586925">(</span><span class="ident" id="3586926">e</span>&nbsp;<span class="op" id="3586928">*</span><span class="ident" id="3586929"><a href="/net/url/url.go.html#3586867">Error</a></span><span class="op" id="3586934">)</span>&nbsp;<span class="ident" id="3586936">Error</span><span class="op" id="3586941">(</span><span class="op" id="3586942">)</span>&nbsp;<span class="builtintype" id="3586944">string</span>&nbsp;<span class="op" id="3586951">{</span>&nbsp;<span class="keyword" id="3586953">return</span>&nbsp;<span class="ident" id="3586960"><a href="/net/url/url.go.html#3586926">e</a></span><span class="op" id="3586961">.</span><span class="ident" id="3586962">Op</span>&nbsp;<span class="op" id="3586965">+</span>&nbsp;<span class="string" id="3586967">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3586971">+</span>&nbsp;<span class="ident" id="3586973"><a href="/net/url/url.go.html#3586926">e</a></span><span class="op" id="3586974">.</span><span class="ident" id="3586975">URL</span>&nbsp;<span class="op" id="3586979">+</span>&nbsp;<span class="string" id="3586981">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3586986">+</span>&nbsp;<span class="ident" id="3586988"><a href="/net/url/url.go.html#3586926">e</a></span><span class="op" id="3586989">.</span><span class="ident" id="3586990">Err</span><span class="op" id="3586993">.</span><span class="ident" id="3586994">Error</span><span class="op" id="3586999">(</span><span class="op" id="3587000">)</span>&nbsp;<span class="op" id="3587002">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3587005">func</span>&nbsp;<span class="ident" id="3587010">ishex</span><span class="op" id="3587015">(</span><span class="ident" id="3587016">c</span>&nbsp;<span class="builtintype" id="3587018">byte</span><span class="op" id="3587022">)</span>&nbsp;<span class="builtintype" id="3587024">bool</span>&nbsp;<span class="op" id="3587029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587032">switch</span>&nbsp;<span class="op" id="3587039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587042">case</span>&nbsp;<span class="string" id="3587047">&#39;0&#39;</span>&nbsp;<span class="op" id="3587051">&lt;=</span>&nbsp;<span class="ident" id="3587054"><a href="/net/url/url.go.html#3587016">c</a></span>&nbsp;<span class="op" id="3587056">&amp;&amp;</span>&nbsp;<span class="ident" id="3587059"><a href="/net/url/url.go.html#3587016">c</a></span>&nbsp;<span class="op" id="3587061">&lt;=</span>&nbsp;<span class="string" id="3587064">&#39;9&#39;</span><span class="op" id="3587067">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587071">return</span>&nbsp;<span class="ident" id="3587078">true</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587084">case</span>&nbsp;<span class="string" id="3587089">&#39;a&#39;</span>&nbsp;<span class="op" id="3587093">&lt;=</span>&nbsp;<span class="ident" id="3587096"><a href="/net/url/url.go.html#3587016">c</a></span>&nbsp;<span class="op" id="3587098">&amp;&amp;</span>&nbsp;<span class="ident" id="3587101"><a href="/net/url/url.go.html#3587016">c</a></span>&nbsp;<span class="op" id="3587103">&lt;=</span>&nbsp;<span class="string" id="3587106">&#39;f&#39;</span><span class="op" id="3587109">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587113">return</span>&nbsp;<span class="ident" id="3587120">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587126">case</span>&nbsp;<span class="string" id="3587131">&#39;A&#39;</span>&nbsp;<span class="op" id="3587135">&lt;=</span>&nbsp;<span class="ident" id="3587138"><a href="/net/url/url.go.html#3587016">c</a></span>&nbsp;<span class="op" id="3587140">&amp;&amp;</span>&nbsp;<span class="ident" id="3587143"><a href="/net/url/url.go.html#3587016">c</a></span>&nbsp;<span class="op" id="3587145">&lt;=</span>&nbsp;<span class="string" id="3587148">&#39;F&#39;</span><span class="op" id="3587151">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587155">return</span>&nbsp;<span class="ident" id="3587162">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587168">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587171">return</span>&nbsp;<span class="ident" id="3587178">false</span><br>
<span class="lineno"></span><span class="op" id="3587184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3587187">func</span>&nbsp;<span class="ident" id="3587192">unhex</span><span class="op" id="3587197">(</span><span class="ident" id="3587198">c</span>&nbsp;<span class="builtintype" id="3587200">byte</span><span class="op" id="3587204">)</span>&nbsp;<span class="builtintype" id="3587206">byte</span>&nbsp;<span class="op" id="3587211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587214">switch</span>&nbsp;<span class="op" id="3587221">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587224">case</span>&nbsp;<span class="string" id="3587229">&#39;0&#39;</span>&nbsp;<span class="op" id="3587233">&lt;=</span>&nbsp;<span class="ident" id="3587236"><a href="/net/url/url.go.html#3587198">c</a></span>&nbsp;<span class="op" id="3587238">&amp;&amp;</span>&nbsp;<span class="ident" id="3587241"><a href="/net/url/url.go.html#3587198">c</a></span>&nbsp;<span class="op" id="3587243">&lt;=</span>&nbsp;<span class="string" id="3587246">&#39;9&#39;</span><span class="op" id="3587249">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587253">return</span>&nbsp;<span class="ident" id="3587260"><a href="/net/url/url.go.html#3587198">c</a></span>&nbsp;<span class="op" id="3587262">-</span>&nbsp;<span class="string" id="3587264">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587269">case</span>&nbsp;<span class="string" id="3587274">&#39;a&#39;</span>&nbsp;<span class="op" id="3587278">&lt;=</span>&nbsp;<span class="ident" id="3587281"><a href="/net/url/url.go.html#3587198">c</a></span>&nbsp;<span class="op" id="3587283">&amp;&amp;</span>&nbsp;<span class="ident" id="3587286"><a href="/net/url/url.go.html#3587198">c</a></span>&nbsp;<span class="op" id="3587288">&lt;=</span>&nbsp;<span class="string" id="3587291">&#39;f&#39;</span><span class="op" id="3587294">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587298">return</span>&nbsp;<span class="ident" id="3587305"><a href="/net/url/url.go.html#3587198">c</a></span>&nbsp;<span class="op" id="3587307">-</span>&nbsp;<span class="string" id="3587309">&#39;a&#39;</span>&nbsp;<span class="op" id="3587313">+</span>&nbsp;<span class="num" id="3587315">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587319">case</span>&nbsp;<span class="string" id="3587324">&#39;A&#39;</span>&nbsp;<span class="op" id="3587328">&lt;=</span>&nbsp;<span class="ident" id="3587331"><a href="/net/url/url.go.html#3587198">c</a></span>&nbsp;<span class="op" id="3587333">&amp;&amp;</span>&nbsp;<span class="ident" id="3587336"><a href="/net/url/url.go.html#3587198">c</a></span>&nbsp;<span class="op" id="3587338">&lt;=</span>&nbsp;<span class="string" id="3587341">&#39;F&#39;</span><span class="op" id="3587344">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587348">return</span>&nbsp;<span class="ident" id="3587355"><a href="/net/url/url.go.html#3587198">c</a></span>&nbsp;<span class="op" id="3587357">-</span>&nbsp;<span class="string" id="3587359">&#39;A&#39;</span>&nbsp;<span class="op" id="3587363">+</span>&nbsp;<span class="num" id="3587365">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587372">return</span>&nbsp;<span class="num" id="3587379">0</span><br>
<span class="lineno"></span><span class="op" id="3587381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="3587384">type</span>&nbsp;<span class="ident" id="3587389">encoding</span>&nbsp;<span class="builtintype" id="3587398">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3587403">const</span>&nbsp;<span class="op" id="3587409">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587412">encodePath</span>&nbsp;<span class="ident" id="3587423"><a href="/net/url/url.go.html#3587389">encoding</a></span>&nbsp;<span class="op" id="3587432">=</span>&nbsp;<span class="num" id="3587434">1</span>&nbsp;<span class="op" id="3587436">+</span>&nbsp;<span class="ident" id="3587438">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587444">encodeUserPassword</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587464">encodeQueryComponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587486">encodeFragment</span><br>
<span class="lineno"></span><span class="op" id="3587501">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3587504">type</span>&nbsp;<span class="ident" id="3587509">EscapeError</span>&nbsp;<span class="builtintype" id="3587521">string</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="3587529">func</span>&nbsp;<span class="op" id="3587534">(</span><span class="ident" id="3587535">e</span>&nbsp;<span class="ident" id="3587537"><a href="/net/url/url.go.html#3587509">EscapeError</a></span><span class="op" id="3587548">)</span>&nbsp;<span class="ident" id="3587550">Error</span><span class="op" id="3587555">(</span><span class="op" id="3587556">)</span>&nbsp;<span class="builtintype" id="3587558">string</span>&nbsp;<span class="op" id="3587565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587568">return</span>&nbsp;<span class="string" id="3587575">&#34;invalid&nbsp;URL&nbsp;escape&nbsp;&#34;</span>&nbsp;<span class="op" id="3587597">+</span>&nbsp;<span class="ident" id="3587599"><a href="/net/url/url.go.html#3586770">strconv</a></span><span class="op" id="3587606">.</span><span class="ident" id="3587607">Quote</span><span class="op" id="3587612">(</span><span class="builtintype" id="3587613">string</span><span class="op" id="3587619">(</span><span class="ident" id="3587620"><a href="/net/url/url.go.html#3587535">e</a></span><span class="op" id="3587621">)</span><span class="op" id="3587622">)</span><br>
<span class="lineno"></span><span class="op" id="3587624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="comment" id="3587627">//&nbsp;Return&nbsp;true&nbsp;if&nbsp;the&nbsp;specified&nbsp;character&nbsp;should&nbsp;be&nbsp;escaped&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="3587692">//&nbsp;appearing&nbsp;in&nbsp;a&nbsp;URL&nbsp;string,&nbsp;according&nbsp;to&nbsp;RFC&nbsp;3986.</span><br>
<span class="lineno"></span><span class="keyword" id="3587745">func</span>&nbsp;<span class="ident" id="3587750">shouldEscape</span><span class="op" id="3587762">(</span><span class="ident" id="3587763">c</span>&nbsp;<span class="builtintype" id="3587765">byte</span><span class="op" id="3587769">,</span>&nbsp;<span class="ident" id="3587771">mode</span>&nbsp;<span class="ident" id="3587776"><a href="/net/url/url.go.html#3587389">encoding</a></span><span class="op" id="3587784">)</span>&nbsp;<span class="builtintype" id="3587786">bool</span>&nbsp;<span class="op" id="3587791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3587794">//&nbsp;§2.3&nbsp;Unreserved&nbsp;characters&nbsp;(alphanum)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587837">if</span>&nbsp;<span class="string" id="3587840">&#39;A&#39;</span>&nbsp;<span class="op" id="3587844">&lt;=</span>&nbsp;<span class="ident" id="3587847"><a href="/net/url/url.go.html#3587763">c</a></span>&nbsp;<span class="op" id="3587849">&amp;&amp;</span>&nbsp;<span class="ident" id="3587852"><a href="/net/url/url.go.html#3587763">c</a></span>&nbsp;<span class="op" id="3587854">&lt;=</span>&nbsp;<span class="string" id="3587857">&#39;Z&#39;</span>&nbsp;<span class="op" id="3587861">||</span>&nbsp;<span class="string" id="3587864">&#39;a&#39;</span>&nbsp;<span class="op" id="3587868">&lt;=</span>&nbsp;<span class="ident" id="3587871"><a href="/net/url/url.go.html#3587763">c</a></span>&nbsp;<span class="op" id="3587873">&amp;&amp;</span>&nbsp;<span class="ident" id="3587876"><a href="/net/url/url.go.html#3587763">c</a></span>&nbsp;<span class="op" id="3587878">&lt;=</span>&nbsp;<span class="string" id="3587881">&#39;z&#39;</span>&nbsp;<span class="op" id="3587885">||</span>&nbsp;<span class="string" id="3587888">&#39;0&#39;</span>&nbsp;<span class="op" id="3587892">&lt;=</span>&nbsp;<span class="ident" id="3587895"><a href="/net/url/url.go.html#3587763">c</a></span>&nbsp;<span class="op" id="3587897">&amp;&amp;</span>&nbsp;<span class="ident" id="3587900"><a href="/net/url/url.go.html#3587763">c</a></span>&nbsp;<span class="op" id="3587902">&lt;=</span>&nbsp;<span class="string" id="3587905">&#39;9&#39;</span>&nbsp;<span class="op" id="3587909">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587913">return</span>&nbsp;<span class="ident" id="3587920">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587931">switch</span>&nbsp;<span class="ident" id="3587938"><a href="/net/url/url.go.html#3587763">c</a></span>&nbsp;<span class="op" id="3587940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587943">case</span>&nbsp;<span class="string" id="3587948">&#39;-&#39;</span><span class="op" id="3587951">,</span>&nbsp;<span class="string" id="3587953">&#39;_&#39;</span><span class="op" id="3587956">,</span>&nbsp;<span class="string" id="3587958">&#39;.&#39;</span><span class="op" id="3587961">,</span>&nbsp;<span class="string" id="3587963">&#39;~&#39;</span><span class="op" id="3587966">:</span>&nbsp;<span class="comment" id="3587968">//&nbsp;§2.3&nbsp;Unreserved&nbsp;characters&nbsp;(mark)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588008">return</span>&nbsp;<span class="ident" id="3588015">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588023">case</span>&nbsp;<span class="string" id="3588028">&#39;$&#39;</span><span class="op" id="3588031">,</span>&nbsp;<span class="string" id="3588033">&#39;&amp;&#39;</span><span class="op" id="3588036">,</span>&nbsp;<span class="string" id="3588038">&#39;+&#39;</span><span class="op" id="3588041">,</span>&nbsp;<span class="string" id="3588043">&#39;,&#39;</span><span class="op" id="3588046">,</span>&nbsp;<span class="string" id="3588048">&#39;/&#39;</span><span class="op" id="3588051">,</span>&nbsp;<span class="string" id="3588053">&#39;:&#39;</span><span class="op" id="3588056">,</span>&nbsp;<span class="string" id="3588058">&#39;;&#39;</span><span class="op" id="3588061">,</span>&nbsp;<span class="string" id="3588063">&#39;=&#39;</span><span class="op" id="3588066">,</span>&nbsp;<span class="string" id="3588068">&#39;?&#39;</span><span class="op" id="3588071">,</span>&nbsp;<span class="string" id="3588073">&#39;@&#39;</span><span class="op" id="3588076">:</span>&nbsp;<span class="comment" id="3588078">//&nbsp;§2.2&nbsp;Reserved&nbsp;characters&nbsp;(reserved)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588120">//&nbsp;Different&nbsp;sections&nbsp;of&nbsp;the&nbsp;URL&nbsp;allow&nbsp;a&nbsp;few&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588170">//&nbsp;the&nbsp;reserved&nbsp;characters&nbsp;to&nbsp;appear&nbsp;unescaped.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588220">switch</span>&nbsp;<span class="ident" id="3588227"><a href="/net/url/url.go.html#3587771">mode</a></span>&nbsp;<span class="op" id="3588232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588236">case</span>&nbsp;<span class="ident" id="3588241"><a href="/net/url/url.go.html#3587412">encodePath</a></span><span class="op" id="3588251">:</span>&nbsp;<span class="comment" id="3588253">//&nbsp;§3.3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588265">//&nbsp;The&nbsp;RFC&nbsp;allows&nbsp;:&nbsp;@&nbsp;&amp;&nbsp;=&nbsp;+&nbsp;$&nbsp;but&nbsp;saves&nbsp;/&nbsp;;&nbsp;,&nbsp;for&nbsp;assigning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588328">//&nbsp;meaning&nbsp;to&nbsp;individual&nbsp;path&nbsp;segments.&nbsp;This&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588384">//&nbsp;only&nbsp;manipulates&nbsp;the&nbsp;path&nbsp;as&nbsp;a&nbsp;whole,&nbsp;so&nbsp;we&nbsp;allow&nbsp;those</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588446">//&nbsp;last&nbsp;two&nbsp;as&nbsp;well.&nbsp;That&nbsp;leaves&nbsp;only&nbsp;?&nbsp;to&nbsp;escape.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588500">return</span>&nbsp;<span class="ident" id="3588507"><a href="/net/url/url.go.html#3587763">c</a></span>&nbsp;<span class="op" id="3588509">==</span>&nbsp;<span class="string" id="3588512">&#39;?&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588519">case</span>&nbsp;<span class="ident" id="3588524"><a href="/net/url/url.go.html#3587444">encodeUserPassword</a></span><span class="op" id="3588542">:</span>&nbsp;<span class="comment" id="3588544">//&nbsp;§3.2.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588558">//&nbsp;The&nbsp;RFC&nbsp;allows&nbsp;&#39;;&#39;,&nbsp;&#39;:&#39;,&nbsp;&#39;&amp;&#39;,&nbsp;&#39;=&#39;,&nbsp;&#39;+&#39;,&nbsp;&#39;$&#39;,&nbsp;and&nbsp;&#39;,&#39;&nbsp;in</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588620">//&nbsp;userinfo,&nbsp;so&nbsp;we&nbsp;must&nbsp;escape&nbsp;only&nbsp;&#39;@&#39;,&nbsp;&#39;/&#39;,&nbsp;and&nbsp;&#39;?&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588678">//&nbsp;The&nbsp;parsing&nbsp;of&nbsp;userinfo&nbsp;treats&nbsp;&#39;:&#39;&nbsp;as&nbsp;special&nbsp;so&nbsp;we&nbsp;must&nbsp;escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588748">//&nbsp;that&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588764">return</span>&nbsp;<span class="ident" id="3588771"><a href="/net/url/url.go.html#3587763">c</a></span>&nbsp;<span class="op" id="3588773">==</span>&nbsp;<span class="string" id="3588776">&#39;@&#39;</span>&nbsp;<span class="op" id="3588780">||</span>&nbsp;<span class="ident" id="3588783"><a href="/net/url/url.go.html#3587763">c</a></span>&nbsp;<span class="op" id="3588785">==</span>&nbsp;<span class="string" id="3588788">&#39;/&#39;</span>&nbsp;<span class="op" id="3588792">||</span>&nbsp;<span class="ident" id="3588795"><a href="/net/url/url.go.html#3587763">c</a></span>&nbsp;<span class="op" id="3588797">==</span>&nbsp;<span class="string" id="3588800">&#39;?&#39;</span>&nbsp;<span class="op" id="3588804">||</span>&nbsp;<span class="ident" id="3588807"><a href="/net/url/url.go.html#3587763">c</a></span>&nbsp;<span class="op" id="3588809">==</span>&nbsp;<span class="string" id="3588812">&#39;:&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588819">case</span>&nbsp;<span class="ident" id="3588824"><a href="/net/url/url.go.html#3587464">encodeQueryComponent</a></span><span class="op" id="3588844">:</span>&nbsp;<span class="comment" id="3588846">//&nbsp;§3.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588858">//&nbsp;The&nbsp;RFC&nbsp;reserves&nbsp;(so&nbsp;we&nbsp;must&nbsp;escape)&nbsp;everything.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588913">return</span>&nbsp;<span class="ident" id="3588920">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588928">case</span>&nbsp;<span class="ident" id="3588933"><a href="/net/url/url.go.html#3587486">encodeFragment</a></span><span class="op" id="3588947">:</span>&nbsp;<span class="comment" id="3588949">//&nbsp;§4.1</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588961">//&nbsp;The&nbsp;RFC&nbsp;text&nbsp;is&nbsp;silent&nbsp;but&nbsp;the&nbsp;grammar&nbsp;allows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3589013">//&nbsp;everything,&nbsp;so&nbsp;escape&nbsp;nothing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589050">return</span>&nbsp;<span class="ident" id="3589057">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3589065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3589068">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3589072">//&nbsp;Everything&nbsp;else&nbsp;must&nbsp;be&nbsp;escaped.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589109">return</span>&nbsp;<span class="ident" id="3589116">true</span><br>
<span class="lineno"></span><span class="op" id="3589121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="3589124">//&nbsp;QueryUnescape&nbsp;does&nbsp;the&nbsp;inverse&nbsp;transformation&nbsp;of&nbsp;QueryEscape,&nbsp;converting</span><br>
<span class="lineno"></span><span class="comment" id="3589200">//&nbsp;%AB&nbsp;into&nbsp;the&nbsp;byte&nbsp;0xAB&nbsp;and&nbsp;&#39;+&#39;&nbsp;into&nbsp;&#39;&nbsp;&#39;&nbsp;(space).&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="3589275">//&nbsp;any&nbsp;%&nbsp;is&nbsp;not&nbsp;followed&nbsp;by&nbsp;two&nbsp;hexadecimal&nbsp;digits.</span><br>
<span class="lineno"></span><span class="keyword" id="3589327">func</span>&nbsp;<span class="ident" id="3589332">QueryUnescape</span><span class="op" id="3589345">(</span><span class="ident" id="3589346">s</span>&nbsp;<span class="builtintype" id="3589348">string</span><span class="op" id="3589354">)</span>&nbsp;<span class="op" id="3589356">(</span><span class="builtintype" id="3589357">string</span><span class="op" id="3589363">,</span>&nbsp;<span class="builtintype" id="3589365">error</span><span class="op" id="3589370">)</span>&nbsp;<span class="op" id="3589372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589375">return</span>&nbsp;<span class="ident" id="3589382"><a href="/net/url/url.go.html#3589530">unescape</a></span><span class="op" id="3589390">(</span><span class="ident" id="3589391"><a href="/net/url/url.go.html#3589346">s</a></span><span class="op" id="3589392">,</span>&nbsp;<span class="ident" id="3589394"><a href="/net/url/url.go.html#3587464">encodeQueryComponent</a></span><span class="op" id="3589414">)</span><br>
<span class="lineno">115</span><span class="op" id="3589416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3589419">//&nbsp;unescape&nbsp;unescapes&nbsp;a&nbsp;string;&nbsp;the&nbsp;mode&nbsp;specifies</span><br>
<span class="lineno"></span><span class="comment" id="3589470">//&nbsp;which&nbsp;section&nbsp;of&nbsp;the&nbsp;URL&nbsp;string&nbsp;is&nbsp;being&nbsp;unescaped.</span><br>
<span class="lineno"></span><span class="keyword" id="3589525">func</span>&nbsp;<span class="ident" id="3589530">unescape</span><span class="op" id="3589538">(</span><span class="ident" id="3589539">s</span>&nbsp;<span class="builtintype" id="3589541">string</span><span class="op" id="3589547">,</span>&nbsp;<span class="ident" id="3589549">mode</span>&nbsp;<span class="ident" id="3589554"><a href="/net/url/url.go.html#3587389">encoding</a></span><span class="op" id="3589562">)</span>&nbsp;<span class="op" id="3589564">(</span><span class="builtintype" id="3589565">string</span><span class="op" id="3589571">,</span>&nbsp;<span class="builtintype" id="3589573">error</span><span class="op" id="3589578">)</span>&nbsp;<span class="op" id="3589580">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3589583">//&nbsp;Count&nbsp;%,&nbsp;check&nbsp;that&nbsp;they&#39;re&nbsp;well-formed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589628">n</span>&nbsp;<span class="op" id="3589630">:=</span>&nbsp;<span class="num" id="3589633">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589636">hasPlus</span>&nbsp;<span class="op" id="3589644">:=</span>&nbsp;<span class="ident" id="3589647">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589654">for</span>&nbsp;<span class="ident" id="3589658">i</span>&nbsp;<span class="op" id="3589660">:=</span>&nbsp;<span class="num" id="3589663">0</span><span class="op" id="3589664">;</span>&nbsp;<span class="ident" id="3589666"><a href="/net/url/url.go.html#3589658">i</a></span>&nbsp;<span class="op" id="3589668">&lt;</span>&nbsp;<span class="builtinfunc" id="3589670">len</span><span class="op" id="3589673">(</span><span class="ident" id="3589674"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3589675">)</span><span class="op" id="3589676">;</span>&nbsp;<span class="op" id="3589678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589682">switch</span>&nbsp;<span class="ident" id="3589689"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3589690">[</span><span class="ident" id="3589691"><a href="/net/url/url.go.html#3589658">i</a></span><span class="op" id="3589692">]</span>&nbsp;<span class="op" id="3589694">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589698">case</span>&nbsp;<span class="string" id="3589703">&#39;%&#39;</span><span class="op" id="3589706">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589711"><a href="/net/url/url.go.html#3589628">n</a></span><span class="op" id="3589712">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589718">if</span>&nbsp;<span class="ident" id="3589721"><a href="/net/url/url.go.html#3589658">i</a></span><span class="op" id="3589722">+</span><span class="num" id="3589723">2</span>&nbsp;<span class="op" id="3589725">&gt;=</span>&nbsp;<span class="builtinfunc" id="3589728">len</span><span class="op" id="3589731">(</span><span class="ident" id="3589732"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3589733">)</span>&nbsp;<span class="op" id="3589735">||</span>&nbsp;<span class="op" id="3589738">!</span><span class="ident" id="3589739"><a href="/net/url/url.go.html#3587010">ishex</a></span><span class="op" id="3589744">(</span><span class="ident" id="3589745"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3589746">[</span><span class="ident" id="3589747"><a href="/net/url/url.go.html#3589658">i</a></span><span class="op" id="3589748">+</span><span class="num" id="3589749">1</span><span class="op" id="3589750">]</span><span class="op" id="3589751">)</span>&nbsp;<span class="op" id="3589753">||</span>&nbsp;<span class="op" id="3589756">!</span><span class="ident" id="3589757"><a href="/net/url/url.go.html#3587010">ishex</a></span><span class="op" id="3589762">(</span><span class="ident" id="3589763"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3589764">[</span><span class="ident" id="3589765"><a href="/net/url/url.go.html#3589658">i</a></span><span class="op" id="3589766">+</span><span class="num" id="3589767">2</span><span class="op" id="3589768">]</span><span class="op" id="3589769">)</span>&nbsp;<span class="op" id="3589771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589777"><a href="/net/url/url.go.html#3589539">s</a></span>&nbsp;<span class="op" id="3589779">=</span>&nbsp;<span class="ident" id="3589781"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3589782">[</span><span class="ident" id="3589783"><a href="/net/url/url.go.html#3589658">i</a></span><span class="op" id="3589784">:</span><span class="op" id="3589785">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589791">if</span>&nbsp;<span class="builtinfunc" id="3589794">len</span><span class="op" id="3589797">(</span><span class="ident" id="3589798"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3589799">)</span>&nbsp;<span class="op" id="3589801">&gt;</span>&nbsp;<span class="num" id="3589803">3</span>&nbsp;<span class="op" id="3589805">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589812"><a href="/net/url/url.go.html#3589539">s</a></span>&nbsp;<span class="op" id="3589814">=</span>&nbsp;<span class="ident" id="3589816"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3589817">[</span><span class="num" id="3589818">0</span><span class="op" id="3589819">:</span><span class="num" id="3589820">3</span><span class="op" id="3589821">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3589827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589833">return</span>&nbsp;<span class="string" id="3589840">&#34;&#34;</span><span class="op" id="3589842">,</span>&nbsp;<span class="ident" id="3589844"><a href="/net/url/url.go.html#3587509">EscapeError</a></span><span class="op" id="3589855">(</span><span class="ident" id="3589856"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3589857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3589862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589867"><a href="/net/url/url.go.html#3589658">i</a></span>&nbsp;<span class="op" id="3589869">+=</span>&nbsp;<span class="num" id="3589872">3</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589876">case</span>&nbsp;<span class="string" id="3589881">&#39;+&#39;</span><span class="op" id="3589884">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589889"><a href="/net/url/url.go.html#3589636">hasPlus</a></span>&nbsp;<span class="op" id="3589897">=</span>&nbsp;<span class="ident" id="3589899"><a href="/net/url/url.go.html#3589549">mode</a></span>&nbsp;<span class="op" id="3589904">==</span>&nbsp;<span class="ident" id="3589907"><a href="/net/url/url.go.html#3587464">encodeQueryComponent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589931"><a href="/net/url/url.go.html#3589658">i</a></span><span class="op" id="3589932">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589937">default</span><span class="op" id="3589944">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589949"><a href="/net/url/url.go.html#3589658">i</a></span><span class="op" id="3589950">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3589955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3589958">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589962">if</span>&nbsp;<span class="ident" id="3589965"><a href="/net/url/url.go.html#3589628">n</a></span>&nbsp;<span class="op" id="3589967">==</span>&nbsp;<span class="num" id="3589970">0</span>&nbsp;<span class="op" id="3589972">&amp;&amp;</span>&nbsp;<span class="op" id="3589975">!</span><span class="ident" id="3589976"><a href="/net/url/url.go.html#3589636">hasPlus</a></span>&nbsp;<span class="op" id="3589984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589988">return</span>&nbsp;<span class="ident" id="3589995"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3589996">,</span>&nbsp;<span class="ident" id="3589998">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590007">t</span>&nbsp;<span class="op" id="3590009">:=</span>&nbsp;<span class="builtinfunc" id="3590012">make</span><span class="op" id="3590016">(</span><span class="op" id="3590017">[</span><span class="op" id="3590018">]</span><span class="builtintype" id="3590019">byte</span><span class="op" id="3590023">,</span>&nbsp;<span class="builtinfunc" id="3590025">len</span><span class="op" id="3590028">(</span><span class="ident" id="3590029"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3590030">)</span><span class="op" id="3590031">-</span><span class="num" id="3590032">2</span><span class="op" id="3590033">*</span><span class="ident" id="3590034"><a href="/net/url/url.go.html#3589628">n</a></span><span class="op" id="3590035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590038">j</span>&nbsp;<span class="op" id="3590040">:=</span>&nbsp;<span class="num" id="3590043">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590046">for</span>&nbsp;<span class="ident" id="3590050">i</span>&nbsp;<span class="op" id="3590052">:=</span>&nbsp;<span class="num" id="3590055">0</span><span class="op" id="3590056">;</span>&nbsp;<span class="ident" id="3590058"><a href="/net/url/url.go.html#3590050">i</a></span>&nbsp;<span class="op" id="3590060">&lt;</span>&nbsp;<span class="builtinfunc" id="3590062">len</span><span class="op" id="3590065">(</span><span class="ident" id="3590066"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3590067">)</span><span class="op" id="3590068">;</span>&nbsp;<span class="op" id="3590070">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590074">switch</span>&nbsp;<span class="ident" id="3590081"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3590082">[</span><span class="ident" id="3590083"><a href="/net/url/url.go.html#3590050">i</a></span><span class="op" id="3590084">]</span>&nbsp;<span class="op" id="3590086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590090">case</span>&nbsp;<span class="string" id="3590095">&#39;%&#39;</span><span class="op" id="3590098">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590103"><a href="/net/url/url.go.html#3590007">t</a></span><span class="op" id="3590104">[</span><span class="ident" id="3590105"><a href="/net/url/url.go.html#3590038">j</a></span><span class="op" id="3590106">]</span>&nbsp;<span class="op" id="3590108">=</span>&nbsp;<span class="ident" id="3590110"><a href="/net/url/url.go.html#3587192">unhex</a></span><span class="op" id="3590115">(</span><span class="ident" id="3590116"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3590117">[</span><span class="ident" id="3590118"><a href="/net/url/url.go.html#3590050">i</a></span><span class="op" id="3590119">+</span><span class="num" id="3590120">1</span><span class="op" id="3590121">]</span><span class="op" id="3590122">)</span><span class="op" id="3590123">&lt;&lt;</span><span class="num" id="3590125">4</span>&nbsp;<span class="op" id="3590127">|</span>&nbsp;<span class="ident" id="3590129"><a href="/net/url/url.go.html#3587192">unhex</a></span><span class="op" id="3590134">(</span><span class="ident" id="3590135"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3590136">[</span><span class="ident" id="3590137"><a href="/net/url/url.go.html#3590050">i</a></span><span class="op" id="3590138">+</span><span class="num" id="3590139">2</span><span class="op" id="3590140">]</span><span class="op" id="3590141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590146"><a href="/net/url/url.go.html#3590038">j</a></span><span class="op" id="3590147">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590153"><a href="/net/url/url.go.html#3590050">i</a></span>&nbsp;<span class="op" id="3590155">+=</span>&nbsp;<span class="num" id="3590158">3</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590162">case</span>&nbsp;<span class="string" id="3590167">&#39;+&#39;</span><span class="op" id="3590170">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590175">if</span>&nbsp;<span class="ident" id="3590178"><a href="/net/url/url.go.html#3589549">mode</a></span>&nbsp;<span class="op" id="3590183">==</span>&nbsp;<span class="ident" id="3590186"><a href="/net/url/url.go.html#3587464">encodeQueryComponent</a></span>&nbsp;<span class="op" id="3590207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590213"><a href="/net/url/url.go.html#3590007">t</a></span><span class="op" id="3590214">[</span><span class="ident" id="3590215"><a href="/net/url/url.go.html#3590038">j</a></span><span class="op" id="3590216">]</span>&nbsp;<span class="op" id="3590218">=</span>&nbsp;<span class="string" id="3590220">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590227">}</span>&nbsp;<span class="keyword" id="3590229">else</span>&nbsp;<span class="op" id="3590234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590240"><a href="/net/url/url.go.html#3590007">t</a></span><span class="op" id="3590241">[</span><span class="ident" id="3590242"><a href="/net/url/url.go.html#3590038">j</a></span><span class="op" id="3590243">]</span>&nbsp;<span class="op" id="3590245">=</span>&nbsp;<span class="string" id="3590247">&#39;+&#39;</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590259"><a href="/net/url/url.go.html#3590038">j</a></span><span class="op" id="3590260">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590266"><a href="/net/url/url.go.html#3590050">i</a></span><span class="op" id="3590267">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590272">default</span><span class="op" id="3590279">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590284"><a href="/net/url/url.go.html#3590007">t</a></span><span class="op" id="3590285">[</span><span class="ident" id="3590286"><a href="/net/url/url.go.html#3590038">j</a></span><span class="op" id="3590287">]</span>&nbsp;<span class="op" id="3590289">=</span>&nbsp;<span class="ident" id="3590291"><a href="/net/url/url.go.html#3589539">s</a></span><span class="op" id="3590292">[</span><span class="ident" id="3590293"><a href="/net/url/url.go.html#3590050">i</a></span><span class="op" id="3590294">]</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590299"><a href="/net/url/url.go.html#3590038">j</a></span><span class="op" id="3590300">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590306"><a href="/net/url/url.go.html#3590050">i</a></span><span class="op" id="3590307">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590318">return</span>&nbsp;<span class="builtintype" id="3590325">string</span><span class="op" id="3590331">(</span><span class="ident" id="3590332"><a href="/net/url/url.go.html#3590007">t</a></span><span class="op" id="3590333">)</span><span class="op" id="3590334">,</span>&nbsp;<span class="ident" id="3590336">nil</span><br>
<span class="lineno">170</span><span class="op" id="3590340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3590343">//&nbsp;QueryEscape&nbsp;escapes&nbsp;the&nbsp;string&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;safely&nbsp;placed</span><br>
<span class="lineno"></span><span class="comment" id="3590404">//&nbsp;inside&nbsp;a&nbsp;URL&nbsp;query.</span><br>
<span class="lineno"></span><span class="keyword" id="3590427">func</span>&nbsp;<span class="ident" id="3590432">QueryEscape</span><span class="op" id="3590443">(</span><span class="ident" id="3590444">s</span>&nbsp;<span class="builtintype" id="3590446">string</span><span class="op" id="3590452">)</span>&nbsp;<span class="builtintype" id="3590454">string</span>&nbsp;<span class="op" id="3590461">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590464">return</span>&nbsp;<span class="ident" id="3590471"><a href="/net/url/url.go.html#3590511">escape</a></span><span class="op" id="3590477">(</span><span class="ident" id="3590478"><a href="/net/url/url.go.html#3590444">s</a></span><span class="op" id="3590479">,</span>&nbsp;<span class="ident" id="3590481"><a href="/net/url/url.go.html#3587464">encodeQueryComponent</a></span><span class="op" id="3590501">)</span><br>
<span class="lineno"></span><span class="op" id="3590503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3590506">func</span>&nbsp;<span class="ident" id="3590511">escape</span><span class="op" id="3590517">(</span><span class="ident" id="3590518">s</span>&nbsp;<span class="builtintype" id="3590520">string</span><span class="op" id="3590526">,</span>&nbsp;<span class="ident" id="3590528">mode</span>&nbsp;<span class="ident" id="3590533"><a href="/net/url/url.go.html#3587389">encoding</a></span><span class="op" id="3590541">)</span>&nbsp;<span class="builtintype" id="3590543">string</span>&nbsp;<span class="op" id="3590550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590553">spaceCount</span><span class="op" id="3590563">,</span>&nbsp;<span class="ident" id="3590565">hexCount</span>&nbsp;<span class="op" id="3590574">:=</span>&nbsp;<span class="num" id="3590577">0</span><span class="op" id="3590578">,</span>&nbsp;<span class="num" id="3590580">0</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590583">for</span>&nbsp;<span class="ident" id="3590587">i</span>&nbsp;<span class="op" id="3590589">:=</span>&nbsp;<span class="num" id="3590592">0</span><span class="op" id="3590593">;</span>&nbsp;<span class="ident" id="3590595"><a href="/net/url/url.go.html#3590587">i</a></span>&nbsp;<span class="op" id="3590597">&lt;</span>&nbsp;<span class="builtinfunc" id="3590599">len</span><span class="op" id="3590602">(</span><span class="ident" id="3590603"><a href="/net/url/url.go.html#3590518">s</a></span><span class="op" id="3590604">)</span><span class="op" id="3590605">;</span>&nbsp;<span class="ident" id="3590607"><a href="/net/url/url.go.html#3590587">i</a></span><span class="op" id="3590608">++</span>&nbsp;<span class="op" id="3590611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590615">c</span>&nbsp;<span class="op" id="3590617">:=</span>&nbsp;<span class="ident" id="3590620"><a href="/net/url/url.go.html#3590518">s</a></span><span class="op" id="3590621">[</span><span class="ident" id="3590622"><a href="/net/url/url.go.html#3590587">i</a></span><span class="op" id="3590623">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590627">if</span>&nbsp;<span class="ident" id="3590630"><a href="/net/url/url.go.html#3587750">shouldEscape</a></span><span class="op" id="3590642">(</span><span class="ident" id="3590643"><a href="/net/url/url.go.html#3590615">c</a></span><span class="op" id="3590644">,</span>&nbsp;<span class="ident" id="3590646"><a href="/net/url/url.go.html#3590528">mode</a></span><span class="op" id="3590650">)</span>&nbsp;<span class="op" id="3590652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590657">if</span>&nbsp;<span class="ident" id="3590660"><a href="/net/url/url.go.html#3590615">c</a></span>&nbsp;<span class="op" id="3590662">==</span>&nbsp;<span class="string" id="3590665">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3590669">&amp;&amp;</span>&nbsp;<span class="ident" id="3590672"><a href="/net/url/url.go.html#3590528">mode</a></span>&nbsp;<span class="op" id="3590677">==</span>&nbsp;<span class="ident" id="3590680"><a href="/net/url/url.go.html#3587464">encodeQueryComponent</a></span>&nbsp;<span class="op" id="3590701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590707"><a href="/net/url/url.go.html#3590553">spaceCount</a></span><span class="op" id="3590717">++</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590723">}</span>&nbsp;<span class="keyword" id="3590725">else</span>&nbsp;<span class="op" id="3590730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590736"><a href="/net/url/url.go.html#3590565">hexCount</a></span><span class="op" id="3590744">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590757">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590761">if</span>&nbsp;<span class="ident" id="3590764"><a href="/net/url/url.go.html#3590553">spaceCount</a></span>&nbsp;<span class="op" id="3590775">==</span>&nbsp;<span class="num" id="3590778">0</span>&nbsp;<span class="op" id="3590780">&amp;&amp;</span>&nbsp;<span class="ident" id="3590783"><a href="/net/url/url.go.html#3590565">hexCount</a></span>&nbsp;<span class="op" id="3590792">==</span>&nbsp;<span class="num" id="3590795">0</span>&nbsp;<span class="op" id="3590797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590801">return</span>&nbsp;<span class="ident" id="3590808"><a href="/net/url/url.go.html#3590518">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590815">t</span>&nbsp;<span class="op" id="3590817">:=</span>&nbsp;<span class="builtinfunc" id="3590820">make</span><span class="op" id="3590824">(</span><span class="op" id="3590825">[</span><span class="op" id="3590826">]</span><span class="builtintype" id="3590827">byte</span><span class="op" id="3590831">,</span>&nbsp;<span class="builtinfunc" id="3590833">len</span><span class="op" id="3590836">(</span><span class="ident" id="3590837"><a href="/net/url/url.go.html#3590518">s</a></span><span class="op" id="3590838">)</span><span class="op" id="3590839">+</span><span class="num" id="3590840">2</span><span class="op" id="3590841">*</span><span class="ident" id="3590842"><a href="/net/url/url.go.html#3590565">hexCount</a></span><span class="op" id="3590850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590853">j</span>&nbsp;<span class="op" id="3590855">:=</span>&nbsp;<span class="num" id="3590858">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590861">for</span>&nbsp;<span class="ident" id="3590865">i</span>&nbsp;<span class="op" id="3590867">:=</span>&nbsp;<span class="num" id="3590870">0</span><span class="op" id="3590871">;</span>&nbsp;<span class="ident" id="3590873"><a href="/net/url/url.go.html#3590865">i</a></span>&nbsp;<span class="op" id="3590875">&lt;</span>&nbsp;<span class="builtinfunc" id="3590877">len</span><span class="op" id="3590880">(</span><span class="ident" id="3590881"><a href="/net/url/url.go.html#3590518">s</a></span><span class="op" id="3590882">)</span><span class="op" id="3590883">;</span>&nbsp;<span class="ident" id="3590885"><a href="/net/url/url.go.html#3590865">i</a></span><span class="op" id="3590886">++</span>&nbsp;<span class="op" id="3590889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590893">switch</span>&nbsp;<span class="ident" id="3590900">c</span>&nbsp;<span class="op" id="3590902">:=</span>&nbsp;<span class="ident" id="3590905"><a href="/net/url/url.go.html#3590518">s</a></span><span class="op" id="3590906">[</span><span class="ident" id="3590907"><a href="/net/url/url.go.html#3590865">i</a></span><span class="op" id="3590908">]</span><span class="op" id="3590909">;</span>&nbsp;<span class="op" id="3590911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590915">case</span>&nbsp;<span class="ident" id="3590920"><a href="/net/url/url.go.html#3590900">c</a></span>&nbsp;<span class="op" id="3590922">==</span>&nbsp;<span class="string" id="3590925">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3590929">&amp;&amp;</span>&nbsp;<span class="ident" id="3590932"><a href="/net/url/url.go.html#3590528">mode</a></span>&nbsp;<span class="op" id="3590937">==</span>&nbsp;<span class="ident" id="3590940"><a href="/net/url/url.go.html#3587464">encodeQueryComponent</a></span><span class="op" id="3590960">:</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590965"><a href="/net/url/url.go.html#3590815">t</a></span><span class="op" id="3590966">[</span><span class="ident" id="3590967"><a href="/net/url/url.go.html#3590853">j</a></span><span class="op" id="3590968">]</span>&nbsp;<span class="op" id="3590970">=</span>&nbsp;<span class="string" id="3590972">&#39;+&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590979"><a href="/net/url/url.go.html#3590853">j</a></span><span class="op" id="3590980">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590985">case</span>&nbsp;<span class="ident" id="3590990"><a href="/net/url/url.go.html#3587750">shouldEscape</a></span><span class="op" id="3591002">(</span><span class="ident" id="3591003"><a href="/net/url/url.go.html#3590900">c</a></span><span class="op" id="3591004">,</span>&nbsp;<span class="ident" id="3591006"><a href="/net/url/url.go.html#3590528">mode</a></span><span class="op" id="3591010">)</span><span class="op" id="3591011">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3591016"><a href="/net/url/url.go.html#3590815">t</a></span><span class="op" id="3591017">[</span><span class="ident" id="3591018"><a href="/net/url/url.go.html#3590853">j</a></span><span class="op" id="3591019">]</span>&nbsp;<span class="op" id="3591021">=</span>&nbsp;<span class="string" id="3591023">&#39;%&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3591030"><a href="/net/url/url.go.html#3590815">t</a></span><span class="op" id="3591031">[</span><span class="ident" id="3591032"><a href="/net/url/url.go.html#3590853">j</a></span><span class="op" id="3591033">+</span><span class="num" id="3591034">1</span><span class="op" id="3591035">]</span>&nbsp;<span class="op" id="3591037">=</span>&nbsp;<span class="string" id="3591039">&#34;0123456789ABCDEF&#34;</span><span class="op" id="3591057">[</span><span class="ident" id="3591058"><a href="/net/url/url.go.html#3590900">c</a></span><span class="op" id="3591059">&gt;&gt;</span><span class="num" id="3591061">4</span><span class="op" id="3591062">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3591067"><a href="/net/url/url.go.html#3590815">t</a></span><span class="op" id="3591068">[</span><span class="ident" id="3591069"><a href="/net/url/url.go.html#3590853">j</a></span><span class="op" id="3591070">+</span><span class="num" id="3591071">2</span><span class="op" id="3591072">]</span>&nbsp;<span class="op" id="3591074">=</span>&nbsp;<span class="string" id="3591076">&#34;0123456789ABCDEF&#34;</span><span class="op" id="3591094">[</span><span class="ident" id="3591095"><a href="/net/url/url.go.html#3590900">c</a></span><span class="op" id="3591096">&amp;</span><span class="num" id="3591097">15</span><span class="op" id="3591099">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3591104"><a href="/net/url/url.go.html#3590853">j</a></span>&nbsp;<span class="op" id="3591106">+=</span>&nbsp;<span class="num" id="3591109">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3591113">default</span><span class="op" id="3591120">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3591125"><a href="/net/url/url.go.html#3590815">t</a></span><span class="op" id="3591126">[</span><span class="ident" id="3591127"><a href="/net/url/url.go.html#3590853">j</a></span><span class="op" id="3591128">]</span>&nbsp;<span class="op" id="3591130">=</span>&nbsp;<span class="ident" id="3591132"><a href="/net/url/url.go.html#3590518">s</a></span><span class="op" id="3591133">[</span><span class="ident" id="3591134"><a href="/net/url/url.go.html#3590865">i</a></span><span class="op" id="3591135">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3591140"><a href="/net/url/url.go.html#3590853">j</a></span><span class="op" id="3591141">++</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3591146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3591149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3591152">return</span>&nbsp;<span class="builtintype" id="3591159">string</span><span class="op" id="3591165">(</span><span class="ident" id="3591166"><a href="/net/url/url.go.html#3590815">t</a></span><span class="op" id="3591167">)</span><br>
<span class="lineno"></span><span class="op" id="3591169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="3591172">//&nbsp;A&nbsp;URL&nbsp;represents&nbsp;a&nbsp;parsed&nbsp;URL&nbsp;(technically,&nbsp;a&nbsp;URI&nbsp;reference).</span><br>
<span class="lineno"></span><span class="comment" id="3591237">//&nbsp;The&nbsp;general&nbsp;form&nbsp;represented&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3591273">//</span><br>
<span class="lineno"></span><span class="comment" id="3591276">//&nbsp;&nbsp;&nbsp;&nbspscheme://[userinfo@]host/path[?query][#fragment]</span><br>
<span class="lineno"></span><span class="comment" id="3591328">//</span><br>
<span class="lineno">220</span><span class="comment" id="3591331">//&nbsp;URLs&nbsp;that&nbsp;do&nbsp;not&nbsp;start&nbsp;with&nbsp;a&nbsp;slash&nbsp;after&nbsp;the&nbsp;scheme&nbsp;are&nbsp;interpreted&nbsp;as:</span><br>
<span class="lineno"></span><span class="comment" id="3591407">//</span><br>
<span class="lineno"></span><span class="comment" id="3591410">//&nbsp;&nbsp;&nbsp;&nbspscheme:opaque[?query][#fragment]</span><br>
<span class="lineno"></span><span class="comment" id="3591446">//</span><br>
<span class="lineno"></span><span class="comment" id="3591449">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;Path&nbsp;field&nbsp;is&nbsp;stored&nbsp;in&nbsp;decoded&nbsp;form:&nbsp;/%47%6f%2f&nbsp;becomes&nbsp;/Go/.</span><br>
<span class="lineno">225</span><span class="comment" id="3591529">//&nbsp;A&nbsp;consequence&nbsp;is&nbsp;that&nbsp;it&nbsp;is&nbsp;impossible&nbsp;to&nbsp;tell&nbsp;which&nbsp;slashes&nbsp;in&nbsp;the&nbsp;Path&nbsp;were</span><br>
<span class="lineno"></span><span class="comment" id="3591610">//&nbsp;slashes&nbsp;in&nbsp;the&nbsp;raw&nbsp;URL&nbsp;and&nbsp;which&nbsp;were&nbsp;%2f.&nbsp;This&nbsp;distinction&nbsp;is&nbsp;rarely&nbsp;important,</span><br>
<span class="lineno"></span><span class="comment" id="3591694">//&nbsp;but&nbsp;when&nbsp;it&nbsp;is&nbsp;a&nbsp;client&nbsp;must&nbsp;use&nbsp;other&nbsp;routines&nbsp;to&nbsp;parse&nbsp;the&nbsp;raw&nbsp;URL&nbsp;or&nbsp;construct</span><br>
<span class="lineno"></span><span class="comment" id="3591779">//&nbsp;the&nbsp;parsed&nbsp;URL.&nbsp;For&nbsp;example,&nbsp;an&nbsp;HTTP&nbsp;server&nbsp;can&nbsp;consult&nbsp;req.RequestURI,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3591858">//&nbsp;an&nbsp;HTTP&nbsp;client&nbsp;can&nbsp;use&nbsp;URL{Host:&nbsp;&#34;example.com&#34;,&nbsp;Opaque:&nbsp;&#34;//example.com/Go%2f&#34;}</span><br>
<span class="lineno">230</span><span class="comment" id="3591940">//&nbsp;instead&nbsp;of&nbsp;URL{Host:&nbsp;&#34;example.com&#34;,&nbsp;Path:&nbsp;&#34;/Go/&#34;}.</span><br>
<span class="lineno"></span><span class="keyword" id="3591994">type</span>&nbsp;<span class="ident" id="3591999">URL</span>&nbsp;<span class="keyword" id="3592003">struct</span>&nbsp;<span class="op" id="3592010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3592013">Scheme</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3592022">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3592030">Opaque</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3592039">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3592049">//&nbsp;encoded&nbsp;opaque&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3592073">User</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3592082">*</span><span class="ident" id="3592083"><a href="/net/url/url.go.html#3593208">Userinfo</a></span>&nbsp;<span class="comment" id="3592092">//&nbsp;username&nbsp;and&nbsp;password&nbsp;information</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3592130">Host</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3592139">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3592149">//&nbsp;host&nbsp;or&nbsp;host:port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3592171">Path</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3592180">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3592188">RawQuery</span>&nbsp;<span class="builtintype" id="3592197">string</span>&nbsp;<span class="comment" id="3592204">//&nbsp;encoded&nbsp;query&nbsp;values,&nbsp;without&nbsp;&#39;?&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3592242">Fragment</span>&nbsp;<span class="builtintype" id="3592251">string</span>&nbsp;<span class="comment" id="3592258">//&nbsp;fragment&nbsp;for&nbsp;references,&nbsp;without&nbsp;&#39;#&#39;</span><br>
<span class="lineno"></span><span class="op" id="3592298">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span><span class="comment" id="3592301">//&nbsp;User&nbsp;returns&nbsp;a&nbsp;Userinfo&nbsp;containing&nbsp;the&nbsp;provided&nbsp;username</span><br>
<span class="lineno"></span><span class="comment" id="3592361">//&nbsp;and&nbsp;no&nbsp;password&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="3592385">func</span>&nbsp;<span class="ident" id="3592390">User</span><span class="op" id="3592394">(</span><span class="ident" id="3592395">username</span>&nbsp;<span class="builtintype" id="3592404">string</span><span class="op" id="3592410">)</span>&nbsp;<span class="op" id="3592412">*</span><span class="ident" id="3592413"><a href="/net/url/url.go.html#3593208">Userinfo</a></span>&nbsp;<span class="op" id="3592422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3592425">return</span>&nbsp;<span class="op" id="3592432">&amp;</span><span class="ident" id="3592433"><a href="/net/url/url.go.html#3593208">Userinfo</a></span><span class="op" id="3592441">{</span><span class="ident" id="3592442"><a href="/net/url/url.go.html#3592395">username</a></span><span class="op" id="3592450">,</span>&nbsp;<span class="string" id="3592452">&#34;&#34;</span><span class="op" id="3592454">,</span>&nbsp;<span class="ident" id="3592456">false</span><span class="op" id="3592461">}</span><br>
<span class="lineno">245</span><span class="op" id="3592463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3592466">//&nbsp;UserPassword&nbsp;returns&nbsp;a&nbsp;Userinfo&nbsp;containing&nbsp;the&nbsp;provided&nbsp;username</span><br>
<span class="lineno"></span><span class="comment" id="3592534">//&nbsp;and&nbsp;password.</span><br>
<span class="lineno"></span><span class="comment" id="3592551">//&nbsp;This&nbsp;functionality&nbsp;should&nbsp;only&nbsp;be&nbsp;used&nbsp;with&nbsp;legacy&nbsp;web&nbsp;sites.</span><br>
<span class="lineno">250</span><span class="comment" id="3592616">//&nbsp;RFC&nbsp;2396&nbsp;warns&nbsp;that&nbsp;interpreting&nbsp;Userinfo&nbsp;this&nbsp;way</span><br>
<span class="lineno"></span><span class="comment" id="3592670">//&nbsp;``is&nbsp;NOT&nbsp;RECOMMENDED,&nbsp;because&nbsp;the&nbsp;passing&nbsp;of&nbsp;authentication</span><br>
<span class="lineno"></span><span class="comment" id="3592733">//&nbsp;information&nbsp;in&nbsp;clear&nbsp;text&nbsp;(such&nbsp;as&nbsp;URI)&nbsp;has&nbsp;proven&nbsp;to&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3592795">//&nbsp;security&nbsp;risk&nbsp;in&nbsp;almost&nbsp;every&nbsp;case&nbsp;where&nbsp;it&nbsp;has&nbsp;been&nbsp;used.&#39;&#39;</span><br>
<span class="lineno"></span><span class="keyword" id="3592859">func</span>&nbsp;<span class="ident" id="3592864">UserPassword</span><span class="op" id="3592876">(</span><span class="ident" id="3592877">username</span><span class="op" id="3592885">,</span>&nbsp;<span class="ident" id="3592887">password</span>&nbsp;<span class="builtintype" id="3592896">string</span><span class="op" id="3592902">)</span>&nbsp;<span class="op" id="3592904">*</span><span class="ident" id="3592905"><a href="/net/url/url.go.html#3593208">Userinfo</a></span>&nbsp;<span class="op" id="3592914">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3592917">return</span>&nbsp;<span class="op" id="3592924">&amp;</span><span class="ident" id="3592925"><a href="/net/url/url.go.html#3593208">Userinfo</a></span><span class="op" id="3592933">{</span><span class="ident" id="3592934"><a href="/net/url/url.go.html#3592877">username</a></span><span class="op" id="3592942">,</span>&nbsp;<span class="ident" id="3592944"><a href="/net/url/url.go.html#3592887">password</a></span><span class="op" id="3592952">,</span>&nbsp;<span class="ident" id="3592954">true</span><span class="op" id="3592958">}</span><br>
<span class="lineno"></span><span class="op" id="3592960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3592963">//&nbsp;The&nbsp;Userinfo&nbsp;type&nbsp;is&nbsp;an&nbsp;immutable&nbsp;encapsulation&nbsp;of&nbsp;username&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3593030">//&nbsp;password&nbsp;details&nbsp;for&nbsp;a&nbsp;URL.&nbsp;An&nbsp;existing&nbsp;Userinfo&nbsp;value&nbsp;is&nbsp;guaranteed</span><br>
<span class="lineno">260</span><span class="comment" id="3593102">//&nbsp;to&nbsp;have&nbsp;a&nbsp;username&nbsp;set&nbsp;(potentially&nbsp;empty,&nbsp;as&nbsp;allowed&nbsp;by&nbsp;RFC&nbsp;2396),</span><br>
<span class="lineno"></span><span class="comment" id="3593173">//&nbsp;and&nbsp;optionally&nbsp;a&nbsp;password.</span><br>
<span class="lineno"></span><span class="keyword" id="3593203">type</span>&nbsp;<span class="ident" id="3593208">Userinfo</span>&nbsp;<span class="keyword" id="3593217">struct</span>&nbsp;<span class="op" id="3593224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3593227">username</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3593239">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3593247">password</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3593259">string</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3593267">passwordSet</span>&nbsp;<span class="builtintype" id="3593279">bool</span><br>
<span class="lineno"></span><span class="op" id="3593284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3593287">//&nbsp;Username&nbsp;returns&nbsp;the&nbsp;username.</span><br>
<span class="lineno"></span><span class="keyword" id="3593321">func</span>&nbsp;<span class="op" id="3593326">(</span><span class="ident" id="3593327">u</span>&nbsp;<span class="op" id="3593329">*</span><span class="ident" id="3593330"><a href="/net/url/url.go.html#3593208">Userinfo</a></span><span class="op" id="3593338">)</span>&nbsp;<span class="ident" id="3593340">Username</span><span class="op" id="3593348">(</span><span class="op" id="3593349">)</span>&nbsp;<span class="builtintype" id="3593351">string</span>&nbsp;<span class="op" id="3593358">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3593361">return</span>&nbsp;<span class="ident" id="3593368"><a href="/net/url/url.go.html#3593327">u</a></span><span class="op" id="3593369">.</span><span class="ident" id="3593370">username</span><br>
<span class="lineno"></span><span class="op" id="3593379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3593382">//&nbsp;Password&nbsp;returns&nbsp;the&nbsp;password&nbsp;in&nbsp;case&nbsp;it&nbsp;is&nbsp;set,&nbsp;and&nbsp;whether&nbsp;it&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="3593457">func</span>&nbsp;<span class="op" id="3593462">(</span><span class="ident" id="3593463">u</span>&nbsp;<span class="op" id="3593465">*</span><span class="ident" id="3593466"><a href="/net/url/url.go.html#3593208">Userinfo</a></span><span class="op" id="3593474">)</span>&nbsp;<span class="ident" id="3593476">Password</span><span class="op" id="3593484">(</span><span class="op" id="3593485">)</span>&nbsp;<span class="op" id="3593487">(</span><span class="builtintype" id="3593488">string</span><span class="op" id="3593494">,</span>&nbsp;<span class="builtintype" id="3593496">bool</span><span class="op" id="3593500">)</span>&nbsp;<span class="op" id="3593502">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3593505">if</span>&nbsp;<span class="ident" id="3593508"><a href="/net/url/url.go.html#3593463">u</a></span><span class="op" id="3593509">.</span><span class="ident" id="3593510">passwordSet</span>&nbsp;<span class="op" id="3593522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3593526">return</span>&nbsp;<span class="ident" id="3593533"><a href="/net/url/url.go.html#3593463">u</a></span><span class="op" id="3593534">.</span><span class="ident" id="3593535">password</span><span class="op" id="3593543">,</span>&nbsp;<span class="ident" id="3593545">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3593551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3593554">return</span>&nbsp;<span class="string" id="3593561">&#34;&#34;</span><span class="op" id="3593563">,</span>&nbsp;<span class="ident" id="3593565">false</span><br>
<span class="lineno"></span><span class="op" id="3593571">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="3593574">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;encoded&nbsp;userinfo&nbsp;information&nbsp;in&nbsp;the&nbsp;standard&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="3593646">//&nbsp;of&nbsp;&#34;username[:password]&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3593675">func</span>&nbsp;<span class="op" id="3593680">(</span><span class="ident" id="3593681">u</span>&nbsp;<span class="op" id="3593683">*</span><span class="ident" id="3593684"><a href="/net/url/url.go.html#3593208">Userinfo</a></span><span class="op" id="3593692">)</span>&nbsp;<span class="ident" id="3593694">String</span><span class="op" id="3593700">(</span><span class="op" id="3593701">)</span>&nbsp;<span class="builtintype" id="3593703">string</span>&nbsp;<span class="op" id="3593710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3593713">s</span>&nbsp;<span class="op" id="3593715">:=</span>&nbsp;<span class="ident" id="3593718"><a href="/net/url/url.go.html#3590511">escape</a></span><span class="op" id="3593724">(</span><span class="ident" id="3593725"><a href="/net/url/url.go.html#3593681">u</a></span><span class="op" id="3593726">.</span><span class="ident" id="3593727">username</span><span class="op" id="3593735">,</span>&nbsp;<span class="ident" id="3593737"><a href="/net/url/url.go.html#3587444">encodeUserPassword</a></span><span class="op" id="3593755">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3593758">if</span>&nbsp;<span class="ident" id="3593761"><a href="/net/url/url.go.html#3593681">u</a></span><span class="op" id="3593762">.</span><span class="ident" id="3593763">passwordSet</span>&nbsp;<span class="op" id="3593775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3593779"><a href="/net/url/url.go.html#3593713">s</a></span>&nbsp;<span class="op" id="3593781">+=</span>&nbsp;<span class="string" id="3593784">&#34;:&#34;</span>&nbsp;<span class="op" id="3593788">+</span>&nbsp;<span class="ident" id="3593790"><a href="/net/url/url.go.html#3590511">escape</a></span><span class="op" id="3593796">(</span><span class="ident" id="3593797"><a href="/net/url/url.go.html#3593681">u</a></span><span class="op" id="3593798">.</span><span class="ident" id="3593799">password</span><span class="op" id="3593807">,</span>&nbsp;<span class="ident" id="3593809"><a href="/net/url/url.go.html#3587444">encodeUserPassword</a></span><span class="op" id="3593827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3593830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3593833">return</span>&nbsp;<span class="ident" id="3593840"><a href="/net/url/url.go.html#3593713">s</a></span><br>
<span class="lineno"></span><span class="op" id="3593842">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="3593845">//&nbsp;Maybe&nbsp;rawurl&nbsp;is&nbsp;of&nbsp;the&nbsp;form&nbsp;scheme:path.</span><br>
<span class="lineno"></span><span class="comment" id="3593889">//&nbsp;(Scheme&nbsp;must&nbsp;be&nbsp;[a-zA-Z][a-zA-Z0-9+-.]*)</span><br>
<span class="lineno"></span><span class="comment" id="3593933">//&nbsp;If&nbsp;so,&nbsp;return&nbsp;scheme,&nbsp;path;&nbsp;else&nbsp;return&nbsp;&#34;&#34;,&nbsp;rawurl.</span><br>
<span class="lineno"></span><span class="keyword" id="3593988">func</span>&nbsp;<span class="ident" id="3593993">getscheme</span><span class="op" id="3594002">(</span><span class="ident" id="3594003">rawurl</span>&nbsp;<span class="builtintype" id="3594010">string</span><span class="op" id="3594016">)</span>&nbsp;<span class="op" id="3594018">(</span><span class="ident" id="3594019">scheme</span><span class="op" id="3594025">,</span>&nbsp;<span class="ident" id="3594027">path</span>&nbsp;<span class="builtintype" id="3594032">string</span><span class="op" id="3594038">,</span>&nbsp;<span class="ident" id="3594040">err</span>&nbsp;<span class="builtintype" id="3594044">error</span><span class="op" id="3594049">)</span>&nbsp;<span class="op" id="3594051">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594054">for</span>&nbsp;<span class="ident" id="3594058">i</span>&nbsp;<span class="op" id="3594060">:=</span>&nbsp;<span class="num" id="3594063">0</span><span class="op" id="3594064">;</span>&nbsp;<span class="ident" id="3594066"><a href="/net/url/url.go.html#3594058">i</a></span>&nbsp;<span class="op" id="3594068">&lt;</span>&nbsp;<span class="builtinfunc" id="3594070">len</span><span class="op" id="3594073">(</span><span class="ident" id="3594074"><a href="/net/url/url.go.html#3594003">rawurl</a></span><span class="op" id="3594080">)</span><span class="op" id="3594081">;</span>&nbsp;<span class="ident" id="3594083"><a href="/net/url/url.go.html#3594058">i</a></span><span class="op" id="3594084">++</span>&nbsp;<span class="op" id="3594087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3594091">c</span>&nbsp;<span class="op" id="3594093">:=</span>&nbsp;<span class="ident" id="3594096"><a href="/net/url/url.go.html#3594003">rawurl</a></span><span class="op" id="3594102">[</span><span class="ident" id="3594103"><a href="/net/url/url.go.html#3594058">i</a></span><span class="op" id="3594104">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594108">switch</span>&nbsp;<span class="op" id="3594115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594119">case</span>&nbsp;<span class="string" id="3594124">&#39;a&#39;</span>&nbsp;<span class="op" id="3594128">&lt;=</span>&nbsp;<span class="ident" id="3594131"><a href="/net/url/url.go.html#3594091">c</a></span>&nbsp;<span class="op" id="3594133">&amp;&amp;</span>&nbsp;<span class="ident" id="3594136"><a href="/net/url/url.go.html#3594091">c</a></span>&nbsp;<span class="op" id="3594138">&lt;=</span>&nbsp;<span class="string" id="3594141">&#39;z&#39;</span>&nbsp;<span class="op" id="3594145">||</span>&nbsp;<span class="string" id="3594148">&#39;A&#39;</span>&nbsp;<span class="op" id="3594152">&lt;=</span>&nbsp;<span class="ident" id="3594155"><a href="/net/url/url.go.html#3594091">c</a></span>&nbsp;<span class="op" id="3594157">&amp;&amp;</span>&nbsp;<span class="ident" id="3594160"><a href="/net/url/url.go.html#3594091">c</a></span>&nbsp;<span class="op" id="3594162">&lt;=</span>&nbsp;<span class="string" id="3594165">&#39;Z&#39;</span><span class="op" id="3594168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3594172">//&nbsp;do&nbsp;nothing</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594188">case</span>&nbsp;<span class="string" id="3594193">&#39;0&#39;</span>&nbsp;<span class="op" id="3594197">&lt;=</span>&nbsp;<span class="ident" id="3594200"><a href="/net/url/url.go.html#3594091">c</a></span>&nbsp;<span class="op" id="3594202">&amp;&amp;</span>&nbsp;<span class="ident" id="3594205"><a href="/net/url/url.go.html#3594091">c</a></span>&nbsp;<span class="op" id="3594207">&lt;=</span>&nbsp;<span class="string" id="3594210">&#39;9&#39;</span>&nbsp;<span class="op" id="3594214">||</span>&nbsp;<span class="ident" id="3594217"><a href="/net/url/url.go.html#3594091">c</a></span>&nbsp;<span class="op" id="3594219">==</span>&nbsp;<span class="string" id="3594222">&#39;+&#39;</span>&nbsp;<span class="op" id="3594226">||</span>&nbsp;<span class="ident" id="3594229"><a href="/net/url/url.go.html#3594091">c</a></span>&nbsp;<span class="op" id="3594231">==</span>&nbsp;<span class="string" id="3594234">&#39;-&#39;</span>&nbsp;<span class="op" id="3594238">||</span>&nbsp;<span class="ident" id="3594241"><a href="/net/url/url.go.html#3594091">c</a></span>&nbsp;<span class="op" id="3594243">==</span>&nbsp;<span class="string" id="3594246">&#39;.&#39;</span><span class="op" id="3594249">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594254">if</span>&nbsp;<span class="ident" id="3594257"><a href="/net/url/url.go.html#3594058">i</a></span>&nbsp;<span class="op" id="3594259">==</span>&nbsp;<span class="num" id="3594262">0</span>&nbsp;<span class="op" id="3594264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594270">return</span>&nbsp;<span class="string" id="3594277">&#34;&#34;</span><span class="op" id="3594279">,</span>&nbsp;<span class="ident" id="3594281"><a href="/net/url/url.go.html#3594003">rawurl</a></span><span class="op" id="3594287">,</span>&nbsp;<span class="ident" id="3594289">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3594296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594300">case</span>&nbsp;<span class="ident" id="3594305"><a href="/net/url/url.go.html#3594091">c</a></span>&nbsp;<span class="op" id="3594307">==</span>&nbsp;<span class="string" id="3594310">&#39;:&#39;</span><span class="op" id="3594313">:</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594318">if</span>&nbsp;<span class="ident" id="3594321"><a href="/net/url/url.go.html#3594058">i</a></span>&nbsp;<span class="op" id="3594323">==</span>&nbsp;<span class="num" id="3594326">0</span>&nbsp;<span class="op" id="3594328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594334">return</span>&nbsp;<span class="string" id="3594341">&#34;&#34;</span><span class="op" id="3594343">,</span>&nbsp;<span class="string" id="3594345">&#34;&#34;</span><span class="op" id="3594347">,</span>&nbsp;<span class="ident" id="3594349"><a href="/net/url/url.go.html#3586752">errors</a></span><span class="op" id="3594355">.</span><span class="ident" id="3594356">New</span><span class="op" id="3594359">(</span><span class="string" id="3594360">&#34;missing&nbsp;protocol&nbsp;scheme&#34;</span><span class="op" id="3594385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3594390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594395">return</span>&nbsp;<span class="ident" id="3594402"><a href="/net/url/url.go.html#3594003">rawurl</a></span><span class="op" id="3594408">[</span><span class="num" id="3594409">0</span><span class="op" id="3594410">:</span><span class="ident" id="3594411"><a href="/net/url/url.go.html#3594058">i</a></span><span class="op" id="3594412">]</span><span class="op" id="3594413">,</span>&nbsp;<span class="ident" id="3594415"><a href="/net/url/url.go.html#3594003">rawurl</a></span><span class="op" id="3594421">[</span><span class="ident" id="3594422"><a href="/net/url/url.go.html#3594058">i</a></span><span class="op" id="3594423">+</span><span class="num" id="3594424">1</span><span class="op" id="3594425">:</span><span class="op" id="3594426">]</span><span class="op" id="3594427">,</span>&nbsp;<span class="ident" id="3594429">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594435">default</span><span class="op" id="3594442">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3594447">//&nbsp;we&nbsp;have&nbsp;encountered&nbsp;an&nbsp;invalid&nbsp;character,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3594495">//&nbsp;so&nbsp;there&nbsp;is&nbsp;no&nbsp;valid&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594529">return</span>&nbsp;<span class="string" id="3594536">&#34;&#34;</span><span class="op" id="3594538">,</span>&nbsp;<span class="ident" id="3594540"><a href="/net/url/url.go.html#3594003">rawurl</a></span><span class="op" id="3594546">,</span>&nbsp;<span class="ident" id="3594548">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3594554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3594557">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594560">return</span>&nbsp;<span class="string" id="3594567">&#34;&#34;</span><span class="op" id="3594569">,</span>&nbsp;<span class="ident" id="3594571"><a href="/net/url/url.go.html#3594003">rawurl</a></span><span class="op" id="3594577">,</span>&nbsp;<span class="ident" id="3594579">nil</span><br>
<span class="lineno"></span><span class="op" id="3594583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3594586">//&nbsp;Maybe&nbsp;s&nbsp;is&nbsp;of&nbsp;the&nbsp;form&nbsp;t&nbsp;c&nbsp;u.</span><br>
<span class="lineno"></span><span class="comment" id="3594619">//&nbsp;If&nbsp;so,&nbsp;return&nbsp;t,&nbsp;c&nbsp;u&nbsp;(or&nbsp;t,&nbsp;u&nbsp;if&nbsp;cutc&nbsp;==&nbsp;true).</span><br>
<span class="lineno">320</span><span class="comment" id="3594670">//&nbsp;If&nbsp;not,&nbsp;return&nbsp;s,&nbsp;&#34;&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3594695">func</span>&nbsp;<span class="ident" id="3594700">split</span><span class="op" id="3594705">(</span><span class="ident" id="3594706">s</span>&nbsp;<span class="builtintype" id="3594708">string</span><span class="op" id="3594714">,</span>&nbsp;<span class="ident" id="3594716">c</span>&nbsp;<span class="builtintype" id="3594718">string</span><span class="op" id="3594724">,</span>&nbsp;<span class="ident" id="3594726">cutc</span>&nbsp;<span class="builtintype" id="3594731">bool</span><span class="op" id="3594735">)</span>&nbsp;<span class="op" id="3594737">(</span><span class="builtintype" id="3594738">string</span><span class="op" id="3594744">,</span>&nbsp;<span class="builtintype" id="3594746">string</span><span class="op" id="3594752">)</span>&nbsp;<span class="op" id="3594754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3594757">i</span>&nbsp;<span class="op" id="3594759">:=</span>&nbsp;<span class="ident" id="3594762"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3594769">.</span><span class="ident" id="3594770">Index</span><span class="op" id="3594775">(</span><span class="ident" id="3594776"><a href="/net/url/url.go.html#3594706">s</a></span><span class="op" id="3594777">,</span>&nbsp;<span class="ident" id="3594779"><a href="/net/url/url.go.html#3594716">c</a></span><span class="op" id="3594780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594783">if</span>&nbsp;<span class="ident" id="3594786"><a href="/net/url/url.go.html#3594757">i</a></span>&nbsp;<span class="op" id="3594788">&lt;</span>&nbsp;<span class="num" id="3594790">0</span>&nbsp;<span class="op" id="3594792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594796">return</span>&nbsp;<span class="ident" id="3594803"><a href="/net/url/url.go.html#3594706">s</a></span><span class="op" id="3594804">,</span>&nbsp;<span class="string" id="3594806">&#34;&#34;</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3594810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594813">if</span>&nbsp;<span class="ident" id="3594816"><a href="/net/url/url.go.html#3594726">cutc</a></span>&nbsp;<span class="op" id="3594821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594825">return</span>&nbsp;<span class="ident" id="3594832"><a href="/net/url/url.go.html#3594706">s</a></span><span class="op" id="3594833">[</span><span class="num" id="3594834">0</span><span class="op" id="3594835">:</span><span class="ident" id="3594836"><a href="/net/url/url.go.html#3594757">i</a></span><span class="op" id="3594837">]</span><span class="op" id="3594838">,</span>&nbsp;<span class="ident" id="3594840"><a href="/net/url/url.go.html#3594706">s</a></span><span class="op" id="3594841">[</span><span class="ident" id="3594842"><a href="/net/url/url.go.html#3594757">i</a></span><span class="op" id="3594843">+</span><span class="builtinfunc" id="3594844">len</span><span class="op" id="3594847">(</span><span class="ident" id="3594848"><a href="/net/url/url.go.html#3594716">c</a></span><span class="op" id="3594849">)</span><span class="op" id="3594850">:</span><span class="op" id="3594851">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3594854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3594857">return</span>&nbsp;<span class="ident" id="3594864"><a href="/net/url/url.go.html#3594706">s</a></span><span class="op" id="3594865">[</span><span class="num" id="3594866">0</span><span class="op" id="3594867">:</span><span class="ident" id="3594868"><a href="/net/url/url.go.html#3594757">i</a></span><span class="op" id="3594869">]</span><span class="op" id="3594870">,</span>&nbsp;<span class="ident" id="3594872"><a href="/net/url/url.go.html#3594706">s</a></span><span class="op" id="3594873">[</span><span class="ident" id="3594874"><a href="/net/url/url.go.html#3594757">i</a></span><span class="op" id="3594875">:</span><span class="op" id="3594876">]</span><br>
<span class="lineno">330</span><span class="op" id="3594878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3594881">//&nbsp;Parse&nbsp;parses&nbsp;rawurl&nbsp;into&nbsp;a&nbsp;URL&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="3594926">//&nbsp;The&nbsp;rawurl&nbsp;may&nbsp;be&nbsp;relative&nbsp;or&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="3594969">func</span>&nbsp;<span class="ident" id="3594974">Parse</span><span class="op" id="3594979">(</span><span class="ident" id="3594980">rawurl</span>&nbsp;<span class="builtintype" id="3594987">string</span><span class="op" id="3594993">)</span>&nbsp;<span class="op" id="3594995">(</span><span class="ident" id="3594996">url</span>&nbsp;<span class="op" id="3595000">*</span><span class="ident" id="3595001"><a href="/net/url/url.go.html#3591999">URL</a></span><span class="op" id="3595004">,</span>&nbsp;<span class="ident" id="3595006">err</span>&nbsp;<span class="builtintype" id="3595010">error</span><span class="op" id="3595015">)</span>&nbsp;<span class="op" id="3595017">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3595020">//&nbsp;Cut&nbsp;off&nbsp;#frag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3595038">u</span><span class="op" id="3595039">,</span>&nbsp;<span class="ident" id="3595041">frag</span>&nbsp;<span class="op" id="3595046">:=</span>&nbsp;<span class="ident" id="3595049"><a href="/net/url/url.go.html#3594700">split</a></span><span class="op" id="3595054">(</span><span class="ident" id="3595055"><a href="/net/url/url.go.html#3594980">rawurl</a></span><span class="op" id="3595061">,</span>&nbsp;<span class="string" id="3595063">&#34;#&#34;</span><span class="op" id="3595066">,</span>&nbsp;<span class="ident" id="3595068">true</span><span class="op" id="3595072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3595075">if</span>&nbsp;<span class="ident" id="3595078"><a href="/net/url/url.go.html#3594996">url</a></span><span class="op" id="3595081">,</span>&nbsp;<span class="ident" id="3595083"><a href="/net/url/url.go.html#3595006">err</a></span>&nbsp;<span class="op" id="3595087">=</span>&nbsp;<span class="ident" id="3595089"><a href="/net/url/url.go.html#3596029">parse</a></span><span class="op" id="3595094">(</span><span class="ident" id="3595095"><a href="/net/url/url.go.html#3595038">u</a></span><span class="op" id="3595096">,</span>&nbsp;<span class="ident" id="3595098">false</span><span class="op" id="3595103">)</span><span class="op" id="3595104">;</span>&nbsp;<span class="ident" id="3595106"><a href="/net/url/url.go.html#3595006">err</a></span>&nbsp;<span class="op" id="3595110">!=</span>&nbsp;<span class="ident" id="3595113">nil</span>&nbsp;<span class="op" id="3595117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3595121">return</span>&nbsp;<span class="ident" id="3595128">nil</span><span class="op" id="3595131">,</span>&nbsp;<span class="ident" id="3595133"><a href="/net/url/url.go.html#3595006">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3595138">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3595141">if</span>&nbsp;<span class="ident" id="3595144"><a href="/net/url/url.go.html#3595041">frag</a></span>&nbsp;<span class="op" id="3595149">==</span>&nbsp;<span class="string" id="3595152">&#34;&#34;</span>&nbsp;<span class="op" id="3595155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3595159">return</span>&nbsp;<span class="ident" id="3595166"><a href="/net/url/url.go.html#3594996">url</a></span><span class="op" id="3595169">,</span>&nbsp;<span class="ident" id="3595171">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3595176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3595179">if</span>&nbsp;<span class="ident" id="3595182"><a href="/net/url/url.go.html#3594996">url</a></span><span class="op" id="3595185">.</span><span class="ident" id="3595186">Fragment</span><span class="op" id="3595194">,</span>&nbsp;<span class="ident" id="3595196"><a href="/net/url/url.go.html#3595006">err</a></span>&nbsp;<span class="op" id="3595200">=</span>&nbsp;<span class="ident" id="3595202"><a href="/net/url/url.go.html#3589530">unescape</a></span><span class="op" id="3595210">(</span><span class="ident" id="3595211"><a href="/net/url/url.go.html#3595041">frag</a></span><span class="op" id="3595215">,</span>&nbsp;<span class="ident" id="3595217"><a href="/net/url/url.go.html#3587486">encodeFragment</a></span><span class="op" id="3595231">)</span><span class="op" id="3595232">;</span>&nbsp;<span class="ident" id="3595234"><a href="/net/url/url.go.html#3595006">err</a></span>&nbsp;<span class="op" id="3595238">!=</span>&nbsp;<span class="ident" id="3595241">nil</span>&nbsp;<span class="op" id="3595245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3595249">return</span>&nbsp;<span class="ident" id="3595256">nil</span><span class="op" id="3595259">,</span>&nbsp;<span class="op" id="3595261">&amp;</span><span class="ident" id="3595262"><a href="/net/url/url.go.html#3586867">Error</a></span><span class="op" id="3595267">{</span><span class="string" id="3595268">&#34;parse&#34;</span><span class="op" id="3595275">,</span>&nbsp;<span class="ident" id="3595277"><a href="/net/url/url.go.html#3594980">rawurl</a></span><span class="op" id="3595283">,</span>&nbsp;<span class="ident" id="3595285"><a href="/net/url/url.go.html#3595006">err</a></span><span class="op" id="3595288">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3595291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3595294">return</span>&nbsp;<span class="ident" id="3595301"><a href="/net/url/url.go.html#3594996">url</a></span><span class="op" id="3595304">,</span>&nbsp;<span class="ident" id="3595306">nil</span><br>
<span class="lineno"></span><span class="op" id="3595310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3595313">//&nbsp;ParseRequestURI&nbsp;parses&nbsp;rawurl&nbsp;into&nbsp;a&nbsp;URL&nbsp;structure.&nbsp;&nbsp;It&nbsp;assumes&nbsp;that</span><br>
<span class="lineno">350</span><span class="comment" id="3595385">//&nbsp;rawurl&nbsp;was&nbsp;received&nbsp;in&nbsp;an&nbsp;HTTP&nbsp;request,&nbsp;so&nbsp;the&nbsp;rawurl&nbsp;is&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="3595457">//&nbsp;only&nbsp;as&nbsp;an&nbsp;absolute&nbsp;URI&nbsp;or&nbsp;an&nbsp;absolute&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3595505">//&nbsp;The&nbsp;string&nbsp;rawurl&nbsp;is&nbsp;assumed&nbsp;not&nbsp;to&nbsp;have&nbsp;a&nbsp;#fragment&nbsp;suffix.</span><br>
<span class="lineno"></span><span class="comment" id="3595569">//&nbsp;(Web&nbsp;browsers&nbsp;strip&nbsp;#fragment&nbsp;before&nbsp;sending&nbsp;the&nbsp;URL&nbsp;to&nbsp;a&nbsp;web&nbsp;server.)</span><br>
<span class="lineno"></span><span class="keyword" id="3595643">func</span>&nbsp;<span class="ident" id="3595648">ParseRequestURI</span><span class="op" id="3595663">(</span><span class="ident" id="3595664">rawurl</span>&nbsp;<span class="builtintype" id="3595671">string</span><span class="op" id="3595677">)</span>&nbsp;<span class="op" id="3595679">(</span><span class="ident" id="3595680">url</span>&nbsp;<span class="op" id="3595684">*</span><span class="ident" id="3595685"><a href="/net/url/url.go.html#3591999">URL</a></span><span class="op" id="3595688">,</span>&nbsp;<span class="ident" id="3595690">err</span>&nbsp;<span class="builtintype" id="3595694">error</span><span class="op" id="3595699">)</span>&nbsp;<span class="op" id="3595701">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3595704">return</span>&nbsp;<span class="ident" id="3595711"><a href="/net/url/url.go.html#3596029">parse</a></span><span class="op" id="3595716">(</span><span class="ident" id="3595717"><a href="/net/url/url.go.html#3595664">rawurl</a></span><span class="op" id="3595723">,</span>&nbsp;<span class="ident" id="3595725">true</span><span class="op" id="3595729">)</span><br>
<span class="lineno"></span><span class="op" id="3595731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3595734">//&nbsp;parse&nbsp;parses&nbsp;a&nbsp;URL&nbsp;from&nbsp;a&nbsp;string&nbsp;in&nbsp;one&nbsp;of&nbsp;two&nbsp;contexts.&nbsp;&nbsp;If</span><br>
<span class="lineno"></span><span class="comment" id="3595798">//&nbsp;viaRequest&nbsp;is&nbsp;true,&nbsp;the&nbsp;URL&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;arrived&nbsp;via&nbsp;an&nbsp;HTTP&nbsp;request,</span><br>
<span class="lineno">360</span><span class="comment" id="3595877">//&nbsp;in&nbsp;which&nbsp;case&nbsp;only&nbsp;absolute&nbsp;URLs&nbsp;or&nbsp;path-absolute&nbsp;relative&nbsp;URLs&nbsp;are&nbsp;allowed.</span><br>
<span class="lineno"></span><span class="comment" id="3595957">//&nbsp;If&nbsp;viaRequest&nbsp;is&nbsp;false,&nbsp;all&nbsp;forms&nbsp;of&nbsp;relative&nbsp;URLs&nbsp;are&nbsp;allowed.</span><br>
<span class="lineno"></span><span class="keyword" id="3596024">func</span>&nbsp;<span class="ident" id="3596029">parse</span><span class="op" id="3596034">(</span><span class="ident" id="3596035">rawurl</span>&nbsp;<span class="builtintype" id="3596042">string</span><span class="op" id="3596048">,</span>&nbsp;<span class="ident" id="3596050">viaRequest</span>&nbsp;<span class="builtintype" id="3596061">bool</span><span class="op" id="3596065">)</span>&nbsp;<span class="op" id="3596067">(</span><span class="ident" id="3596068">url</span>&nbsp;<span class="op" id="3596072">*</span><span class="ident" id="3596073"><a href="/net/url/url.go.html#3591999">URL</a></span><span class="op" id="3596076">,</span>&nbsp;<span class="ident" id="3596078">err</span>&nbsp;<span class="builtintype" id="3596082">error</span><span class="op" id="3596087">)</span>&nbsp;<span class="op" id="3596089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596092">var</span>&nbsp;<span class="ident" id="3596096">rest</span>&nbsp;<span class="builtintype" id="3596101">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596110">if</span>&nbsp;<span class="ident" id="3596113"><a href="/net/url/url.go.html#3596035">rawurl</a></span>&nbsp;<span class="op" id="3596120">==</span>&nbsp;<span class="string" id="3596123">&#34;&#34;</span>&nbsp;<span class="op" id="3596126">&amp;&amp;</span>&nbsp;<span class="ident" id="3596129"><a href="/net/url/url.go.html#3596050">viaRequest</a></span>&nbsp;<span class="op" id="3596140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3596144"><a href="/net/url/url.go.html#3596078">err</a></span>&nbsp;<span class="op" id="3596148">=</span>&nbsp;<span class="ident" id="3596150"><a href="/net/url/url.go.html#3586752">errors</a></span><span class="op" id="3596156">.</span><span class="ident" id="3596157">New</span><span class="op" id="3596160">(</span><span class="string" id="3596161">&#34;empty&nbsp;url&#34;</span><span class="op" id="3596172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596176">goto</span>&nbsp;<span class="ident" id="3596181">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3596188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3596191"><a href="/net/url/url.go.html#3596068">url</a></span>&nbsp;<span class="op" id="3596195">=</span>&nbsp;<span class="builtinfunc" id="3596197">new</span><span class="op" id="3596200">(</span><span class="ident" id="3596201"><a href="/net/url/url.go.html#3591999">URL</a></span><span class="op" id="3596204">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596208">if</span>&nbsp;<span class="ident" id="3596211"><a href="/net/url/url.go.html#3596035">rawurl</a></span>&nbsp;<span class="op" id="3596218">==</span>&nbsp;<span class="string" id="3596221">&#34;*&#34;</span>&nbsp;<span class="op" id="3596225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3596229"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3596232">.</span><span class="ident" id="3596233">Path</span>&nbsp;<span class="op" id="3596238">=</span>&nbsp;<span class="string" id="3596240">&#34;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596246">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3596254">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3596258">//&nbsp;Split&nbsp;off&nbsp;possible&nbsp;leading&nbsp;&#34;http:&#34;,&nbsp;&#34;mailto:&#34;,&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3596314">//&nbsp;Cannot&nbsp;contain&nbsp;escaped&nbsp;characters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596353">if</span>&nbsp;<span class="ident" id="3596356"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3596359">.</span><span class="ident" id="3596360">Scheme</span><span class="op" id="3596366">,</span>&nbsp;<span class="ident" id="3596368"><a href="/net/url/url.go.html#3596096">rest</a></span><span class="op" id="3596372">,</span>&nbsp;<span class="ident" id="3596374"><a href="/net/url/url.go.html#3596078">err</a></span>&nbsp;<span class="op" id="3596378">=</span>&nbsp;<span class="ident" id="3596380"><a href="/net/url/url.go.html#3593993">getscheme</a></span><span class="op" id="3596389">(</span><span class="ident" id="3596390"><a href="/net/url/url.go.html#3596035">rawurl</a></span><span class="op" id="3596396">)</span><span class="op" id="3596397">;</span>&nbsp;<span class="ident" id="3596399"><a href="/net/url/url.go.html#3596078">err</a></span>&nbsp;<span class="op" id="3596403">!=</span>&nbsp;<span class="ident" id="3596406">nil</span>&nbsp;<span class="op" id="3596410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596414">goto</span>&nbsp;<span class="ident" id="3596419">Error</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3596426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3596429"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3596432">.</span><span class="ident" id="3596433">Scheme</span>&nbsp;<span class="op" id="3596440">=</span>&nbsp;<span class="ident" id="3596442"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3596449">.</span><span class="ident" id="3596450">ToLower</span><span class="op" id="3596457">(</span><span class="ident" id="3596458"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3596461">.</span><span class="ident" id="3596462">Scheme</span><span class="op" id="3596468">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3596472"><a href="/net/url/url.go.html#3596096">rest</a></span><span class="op" id="3596476">,</span>&nbsp;<span class="ident" id="3596478"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3596481">.</span><span class="ident" id="3596482">RawQuery</span>&nbsp;<span class="op" id="3596491">=</span>&nbsp;<span class="ident" id="3596493"><a href="/net/url/url.go.html#3594700">split</a></span><span class="op" id="3596498">(</span><span class="ident" id="3596499"><a href="/net/url/url.go.html#3596096">rest</a></span><span class="op" id="3596503">,</span>&nbsp;<span class="string" id="3596505">&#34;?&#34;</span><span class="op" id="3596508">,</span>&nbsp;<span class="ident" id="3596510">true</span><span class="op" id="3596514">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596518">if</span>&nbsp;<span class="op" id="3596521">!</span><span class="ident" id="3596522"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3596529">.</span><span class="ident" id="3596530">HasPrefix</span><span class="op" id="3596539">(</span><span class="ident" id="3596540"><a href="/net/url/url.go.html#3596096">rest</a></span><span class="op" id="3596544">,</span>&nbsp;<span class="string" id="3596546">&#34;/&#34;</span><span class="op" id="3596549">)</span>&nbsp;<span class="op" id="3596551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596555">if</span>&nbsp;<span class="ident" id="3596558"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3596561">.</span><span class="ident" id="3596562">Scheme</span>&nbsp;<span class="op" id="3596569">!=</span>&nbsp;<span class="string" id="3596572">&#34;&#34;</span>&nbsp;<span class="op" id="3596575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3596580">//&nbsp;We&nbsp;consider&nbsp;rootless&nbsp;paths&nbsp;per&nbsp;RFC&nbsp;3986&nbsp;as&nbsp;opaque.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3596637"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3596640">.</span><span class="ident" id="3596641">Opaque</span>&nbsp;<span class="op" id="3596648">=</span>&nbsp;<span class="ident" id="3596650"><a href="/net/url/url.go.html#3596096">rest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596658">return</span>&nbsp;<span class="ident" id="3596665"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3596668">,</span>&nbsp;<span class="ident" id="3596670">nil</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3596676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596680">if</span>&nbsp;<span class="ident" id="3596683"><a href="/net/url/url.go.html#3596050">viaRequest</a></span>&nbsp;<span class="op" id="3596694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3596699"><a href="/net/url/url.go.html#3596078">err</a></span>&nbsp;<span class="op" id="3596703">=</span>&nbsp;<span class="ident" id="3596705"><a href="/net/url/url.go.html#3586752">errors</a></span><span class="op" id="3596711">.</span><span class="ident" id="3596712">New</span><span class="op" id="3596715">(</span><span class="string" id="3596716">&#34;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="3596741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596746">goto</span>&nbsp;<span class="ident" id="3596751">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3596759">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3596762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596766">if</span>&nbsp;<span class="op" id="3596769">(</span><span class="ident" id="3596770"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3596773">.</span><span class="ident" id="3596774">Scheme</span>&nbsp;<span class="op" id="3596781">!=</span>&nbsp;<span class="string" id="3596784">&#34;&#34;</span>&nbsp;<span class="op" id="3596787">||</span>&nbsp;<span class="op" id="3596790">!</span><span class="ident" id="3596791"><a href="/net/url/url.go.html#3596050">viaRequest</a></span>&nbsp;<span class="op" id="3596802">&amp;&amp;</span>&nbsp;<span class="op" id="3596805">!</span><span class="ident" id="3596806"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3596813">.</span><span class="ident" id="3596814">HasPrefix</span><span class="op" id="3596823">(</span><span class="ident" id="3596824"><a href="/net/url/url.go.html#3596096">rest</a></span><span class="op" id="3596828">,</span>&nbsp;<span class="string" id="3596830">&#34;///&#34;</span><span class="op" id="3596835">)</span><span class="op" id="3596836">)</span>&nbsp;<span class="op" id="3596838">&amp;&amp;</span>&nbsp;<span class="ident" id="3596841"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3596848">.</span><span class="ident" id="3596849">HasPrefix</span><span class="op" id="3596858">(</span><span class="ident" id="3596859"><a href="/net/url/url.go.html#3596096">rest</a></span><span class="op" id="3596863">,</span>&nbsp;<span class="string" id="3596865">&#34;//&#34;</span><span class="op" id="3596869">)</span>&nbsp;<span class="op" id="3596871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3596875">var</span>&nbsp;<span class="ident" id="3596879">authority</span>&nbsp;<span class="builtintype" id="3596889">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3596898"><a href="/net/url/url.go.html#3596879">authority</a></span><span class="op" id="3596907">,</span>&nbsp;<span class="ident" id="3596909"><a href="/net/url/url.go.html#3596096">rest</a></span>&nbsp;<span class="op" id="3596914">=</span>&nbsp;<span class="ident" id="3596916"><a href="/net/url/url.go.html#3594700">split</a></span><span class="op" id="3596921">(</span><span class="ident" id="3596922"><a href="/net/url/url.go.html#3596096">rest</a></span><span class="op" id="3596926">[</span><span class="num" id="3596927">2</span><span class="op" id="3596928">:</span><span class="op" id="3596929">]</span><span class="op" id="3596930">,</span>&nbsp;<span class="string" id="3596932">&#34;/&#34;</span><span class="op" id="3596935">,</span>&nbsp;<span class="ident" id="3596937">false</span><span class="op" id="3596942">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3596946"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3596949">.</span><span class="ident" id="3596950">User</span><span class="op" id="3596954">,</span>&nbsp;<span class="ident" id="3596956"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3596959">.</span><span class="ident" id="3596960">Host</span><span class="op" id="3596964">,</span>&nbsp;<span class="ident" id="3596966"><a href="/net/url/url.go.html#3596078">err</a></span>&nbsp;<span class="op" id="3596970">=</span>&nbsp;<span class="ident" id="3596972"><a href="/net/url/url.go.html#3597296">parseAuthority</a></span><span class="op" id="3596986">(</span><span class="ident" id="3596987"><a href="/net/url/url.go.html#3596879">authority</a></span><span class="op" id="3596996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597000">if</span>&nbsp;<span class="ident" id="3597003"><a href="/net/url/url.go.html#3596078">err</a></span>&nbsp;<span class="op" id="3597007">!=</span>&nbsp;<span class="ident" id="3597010">nil</span>&nbsp;<span class="op" id="3597014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597019">goto</span>&nbsp;<span class="ident" id="3597024">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3597032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597036">if</span>&nbsp;<span class="ident" id="3597039"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3597046">.</span><span class="ident" id="3597047">Contains</span><span class="op" id="3597055">(</span><span class="ident" id="3597056"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3597059">.</span><span class="ident" id="3597060">Host</span><span class="op" id="3597064">,</span>&nbsp;<span class="string" id="3597066">&#34;%&#34;</span><span class="op" id="3597069">)</span>&nbsp;<span class="op" id="3597071">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3597076"><a href="/net/url/url.go.html#3596078">err</a></span>&nbsp;<span class="op" id="3597080">=</span>&nbsp;<span class="ident" id="3597082"><a href="/net/url/url.go.html#3586752">errors</a></span><span class="op" id="3597088">.</span><span class="ident" id="3597089">New</span><span class="op" id="3597092">(</span><span class="string" id="3597093">&#34;hexadecimal&nbsp;escape&nbsp;in&nbsp;host&#34;</span><span class="op" id="3597121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597126">goto</span>&nbsp;<span class="ident" id="3597131">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3597139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3597142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597145">if</span>&nbsp;<span class="ident" id="3597148"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3597151">.</span><span class="ident" id="3597152">Path</span><span class="op" id="3597156">,</span>&nbsp;<span class="ident" id="3597158"><a href="/net/url/url.go.html#3596078">err</a></span>&nbsp;<span class="op" id="3597162">=</span>&nbsp;<span class="ident" id="3597164"><a href="/net/url/url.go.html#3589530">unescape</a></span><span class="op" id="3597172">(</span><span class="ident" id="3597173"><a href="/net/url/url.go.html#3596096">rest</a></span><span class="op" id="3597177">,</span>&nbsp;<span class="ident" id="3597179"><a href="/net/url/url.go.html#3587412">encodePath</a></span><span class="op" id="3597189">)</span><span class="op" id="3597190">;</span>&nbsp;<span class="ident" id="3597192"><a href="/net/url/url.go.html#3596078">err</a></span>&nbsp;<span class="op" id="3597196">!=</span>&nbsp;<span class="ident" id="3597199">nil</span>&nbsp;<span class="op" id="3597203">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597207">goto</span>&nbsp;<span class="ident" id="3597212">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3597219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597222">return</span>&nbsp;<span class="ident" id="3597229"><a href="/net/url/url.go.html#3596068">url</a></span><span class="op" id="3597232">,</span>&nbsp;<span class="ident" id="3597234">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="3597239">Error</span><span class="op" id="3597244">:</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597247">return</span>&nbsp;<span class="ident" id="3597254">nil</span><span class="op" id="3597257">,</span>&nbsp;<span class="op" id="3597259">&amp;</span><span class="ident" id="3597260"><a href="/net/url/url.go.html#3586867">Error</a></span><span class="op" id="3597265">{</span><span class="string" id="3597266">&#34;parse&#34;</span><span class="op" id="3597273">,</span>&nbsp;<span class="ident" id="3597275"><a href="/net/url/url.go.html#3596035">rawurl</a></span><span class="op" id="3597281">,</span>&nbsp;<span class="ident" id="3597283"><a href="/net/url/url.go.html#3596078">err</a></span><span class="op" id="3597286">}</span><br>
<span class="lineno"></span><span class="op" id="3597288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3597291">func</span>&nbsp;<span class="ident" id="3597296">parseAuthority</span><span class="op" id="3597310">(</span><span class="ident" id="3597311">authority</span>&nbsp;<span class="builtintype" id="3597321">string</span><span class="op" id="3597327">)</span>&nbsp;<span class="op" id="3597329">(</span><span class="ident" id="3597330">user</span>&nbsp;<span class="op" id="3597335">*</span><span class="ident" id="3597336"><a href="/net/url/url.go.html#3593208">Userinfo</a></span><span class="op" id="3597344">,</span>&nbsp;<span class="ident" id="3597346">host</span>&nbsp;<span class="builtintype" id="3597351">string</span><span class="op" id="3597357">,</span>&nbsp;<span class="ident" id="3597359">err</span>&nbsp;<span class="builtintype" id="3597363">error</span><span class="op" id="3597368">)</span>&nbsp;<span class="op" id="3597370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3597373">i</span>&nbsp;<span class="op" id="3597375">:=</span>&nbsp;<span class="ident" id="3597378"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3597385">.</span><span class="ident" id="3597386">LastIndex</span><span class="op" id="3597395">(</span><span class="ident" id="3597396"><a href="/net/url/url.go.html#3597311">authority</a></span><span class="op" id="3597405">,</span>&nbsp;<span class="string" id="3597407">&#34;@&#34;</span><span class="op" id="3597410">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597413">if</span>&nbsp;<span class="ident" id="3597416"><a href="/net/url/url.go.html#3597373">i</a></span>&nbsp;<span class="op" id="3597418">&lt;</span>&nbsp;<span class="num" id="3597420">0</span>&nbsp;<span class="op" id="3597422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3597426"><a href="/net/url/url.go.html#3597346">host</a></span>&nbsp;<span class="op" id="3597431">=</span>&nbsp;<span class="ident" id="3597433"><a href="/net/url/url.go.html#3597311">authority</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597445">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3597453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3597456">userinfo</span><span class="op" id="3597464">,</span>&nbsp;<span class="ident" id="3597466"><a href="/net/url/url.go.html#3597346">host</a></span>&nbsp;<span class="op" id="3597471">:=</span>&nbsp;<span class="ident" id="3597474"><a href="/net/url/url.go.html#3597311">authority</a></span><span class="op" id="3597483">[</span><span class="op" id="3597484">:</span><span class="ident" id="3597485"><a href="/net/url/url.go.html#3597373">i</a></span><span class="op" id="3597486">]</span><span class="op" id="3597487">,</span>&nbsp;<span class="ident" id="3597489"><a href="/net/url/url.go.html#3597311">authority</a></span><span class="op" id="3597498">[</span><span class="ident" id="3597499"><a href="/net/url/url.go.html#3597373">i</a></span><span class="op" id="3597500">+</span><span class="num" id="3597501">1</span><span class="op" id="3597502">:</span><span class="op" id="3597503">]</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597506">if</span>&nbsp;<span class="ident" id="3597509"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3597516">.</span><span class="ident" id="3597517">Index</span><span class="op" id="3597522">(</span><span class="ident" id="3597523"><a href="/net/url/url.go.html#3597456">userinfo</a></span><span class="op" id="3597531">,</span>&nbsp;<span class="string" id="3597533">&#34;:&#34;</span><span class="op" id="3597536">)</span>&nbsp;<span class="op" id="3597538">&lt;</span>&nbsp;<span class="num" id="3597540">0</span>&nbsp;<span class="op" id="3597542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597546">if</span>&nbsp;<span class="ident" id="3597549"><a href="/net/url/url.go.html#3597456">userinfo</a></span><span class="op" id="3597557">,</span>&nbsp;<span class="ident" id="3597559"><a href="/net/url/url.go.html#3597359">err</a></span>&nbsp;<span class="op" id="3597563">=</span>&nbsp;<span class="ident" id="3597565"><a href="/net/url/url.go.html#3589530">unescape</a></span><span class="op" id="3597573">(</span><span class="ident" id="3597574"><a href="/net/url/url.go.html#3597456">userinfo</a></span><span class="op" id="3597582">,</span>&nbsp;<span class="ident" id="3597584"><a href="/net/url/url.go.html#3587444">encodeUserPassword</a></span><span class="op" id="3597602">)</span><span class="op" id="3597603">;</span>&nbsp;<span class="ident" id="3597605"><a href="/net/url/url.go.html#3597359">err</a></span>&nbsp;<span class="op" id="3597609">!=</span>&nbsp;<span class="ident" id="3597612">nil</span>&nbsp;<span class="op" id="3597616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597621">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3597630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3597634"><a href="/net/url/url.go.html#3597330">user</a></span>&nbsp;<span class="op" id="3597639">=</span>&nbsp;<span class="ident" id="3597641"><a href="/net/url/url.go.html#3592390">User</a></span><span class="op" id="3597645">(</span><span class="ident" id="3597646"><a href="/net/url/url.go.html#3597456">userinfo</a></span><span class="op" id="3597654">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3597657">}</span>&nbsp;<span class="keyword" id="3597659">else</span>&nbsp;<span class="op" id="3597664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3597668">username</span><span class="op" id="3597676">,</span>&nbsp;<span class="ident" id="3597678">password</span>&nbsp;<span class="op" id="3597687">:=</span>&nbsp;<span class="ident" id="3597690"><a href="/net/url/url.go.html#3594700">split</a></span><span class="op" id="3597695">(</span><span class="ident" id="3597696"><a href="/net/url/url.go.html#3597456">userinfo</a></span><span class="op" id="3597704">,</span>&nbsp;<span class="string" id="3597706">&#34;:&#34;</span><span class="op" id="3597709">,</span>&nbsp;<span class="ident" id="3597711">true</span><span class="op" id="3597715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597719">if</span>&nbsp;<span class="ident" id="3597722"><a href="/net/url/url.go.html#3597668">username</a></span><span class="op" id="3597730">,</span>&nbsp;<span class="ident" id="3597732"><a href="/net/url/url.go.html#3597359">err</a></span>&nbsp;<span class="op" id="3597736">=</span>&nbsp;<span class="ident" id="3597738"><a href="/net/url/url.go.html#3589530">unescape</a></span><span class="op" id="3597746">(</span><span class="ident" id="3597747"><a href="/net/url/url.go.html#3597668">username</a></span><span class="op" id="3597755">,</span>&nbsp;<span class="ident" id="3597757"><a href="/net/url/url.go.html#3587444">encodeUserPassword</a></span><span class="op" id="3597775">)</span><span class="op" id="3597776">;</span>&nbsp;<span class="ident" id="3597778"><a href="/net/url/url.go.html#3597359">err</a></span>&nbsp;<span class="op" id="3597782">!=</span>&nbsp;<span class="ident" id="3597785">nil</span>&nbsp;<span class="op" id="3597789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597794">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3597803">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597807">if</span>&nbsp;<span class="ident" id="3597810"><a href="/net/url/url.go.html#3597678">password</a></span><span class="op" id="3597818">,</span>&nbsp;<span class="ident" id="3597820"><a href="/net/url/url.go.html#3597359">err</a></span>&nbsp;<span class="op" id="3597824">=</span>&nbsp;<span class="ident" id="3597826"><a href="/net/url/url.go.html#3589530">unescape</a></span><span class="op" id="3597834">(</span><span class="ident" id="3597835"><a href="/net/url/url.go.html#3597678">password</a></span><span class="op" id="3597843">,</span>&nbsp;<span class="ident" id="3597845"><a href="/net/url/url.go.html#3587444">encodeUserPassword</a></span><span class="op" id="3597863">)</span><span class="op" id="3597864">;</span>&nbsp;<span class="ident" id="3597866"><a href="/net/url/url.go.html#3597359">err</a></span>&nbsp;<span class="op" id="3597870">!=</span>&nbsp;<span class="ident" id="3597873">nil</span>&nbsp;<span class="op" id="3597877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597882">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3597891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3597895"><a href="/net/url/url.go.html#3597330">user</a></span>&nbsp;<span class="op" id="3597900">=</span>&nbsp;<span class="ident" id="3597902"><a href="/net/url/url.go.html#3592864">UserPassword</a></span><span class="op" id="3597914">(</span><span class="ident" id="3597915"><a href="/net/url/url.go.html#3597668">username</a></span><span class="op" id="3597923">,</span>&nbsp;<span class="ident" id="3597925"><a href="/net/url/url.go.html#3597678">password</a></span><span class="op" id="3597933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3597936">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3597939">return</span><br>
<span class="lineno"></span><span class="op" id="3597946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3597949">//&nbsp;String&nbsp;reassembles&nbsp;the&nbsp;URL&nbsp;into&nbsp;a&nbsp;valid&nbsp;URL&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3598004">//&nbsp;The&nbsp;general&nbsp;form&nbsp;of&nbsp;the&nbsp;result&nbsp;is&nbsp;one&nbsp;of:</span><br>
<span class="lineno">445</span><span class="comment" id="3598049">//</span><br>
<span class="lineno"></span><span class="comment" id="3598052">//&nbsp;&nbsp;&nbsp;&nbspscheme:opaque</span><br>
<span class="lineno"></span><span class="comment" id="3598069">//&nbsp;&nbsp;&nbsp;&nbspscheme://userinfo@host/path?query#fragment</span><br>
<span class="lineno"></span><span class="comment" id="3598115">//</span><br>
<span class="lineno"></span><span class="comment" id="3598118">//&nbsp;If&nbsp;u.Opaque&nbsp;is&nbsp;non-empty,&nbsp;String&nbsp;uses&nbsp;the&nbsp;first&nbsp;form;</span><br>
<span class="lineno">450</span><span class="comment" id="3598175">//&nbsp;otherwise&nbsp;it&nbsp;uses&nbsp;the&nbsp;second&nbsp;form.</span><br>
<span class="lineno"></span><span class="comment" id="3598213">//</span><br>
<span class="lineno"></span><span class="comment" id="3598216">//&nbsp;In&nbsp;the&nbsp;second&nbsp;form,&nbsp;the&nbsp;following&nbsp;rules&nbsp;apply:</span><br>
<span class="lineno"></span><span class="comment" id="3598266">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.Scheme&nbsp;is&nbsp;empty,&nbsp;scheme:&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="3598313">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.User&nbsp;is&nbsp;nil,&nbsp;userinfo@&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno">455</span><span class="comment" id="3598358">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.Host&nbsp;is&nbsp;empty,&nbsp;host/&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="3598401">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.Scheme&nbsp;and&nbsp;u.Host&nbsp;are&nbsp;empty&nbsp;and&nbsp;u.User&nbsp;is&nbsp;nil,</span><br>
<span class="lineno"></span><span class="comment" id="3598458">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;the&nbsp;entire&nbsp;scheme://userinfo@host/&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="3598511">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.Host&nbsp;is&nbsp;non-empty&nbsp;and&nbsp;u.Path&nbsp;begins&nbsp;with&nbsp;a&nbsp;/,</span><br>
<span class="lineno"></span><span class="comment" id="3598567">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;the&nbsp;form&nbsp;host/path&nbsp;does&nbsp;not&nbsp;add&nbsp;its&nbsp;own&nbsp;/.</span><br>
<span class="lineno">460</span><span class="comment" id="3598616">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.RawQuery&nbsp;is&nbsp;empty,&nbsp;?query&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="3598664">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.Fragment&nbsp;is&nbsp;empty,&nbsp;#fragment&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="keyword" id="3598715">func</span>&nbsp;<span class="op" id="3598720">(</span><span class="ident" id="3598721">u</span>&nbsp;<span class="op" id="3598723">*</span><span class="ident" id="3598724"><a href="/net/url/url.go.html#3591999">URL</a></span><span class="op" id="3598727">)</span>&nbsp;<span class="ident" id="3598729">String</span><span class="op" id="3598735">(</span><span class="op" id="3598736">)</span>&nbsp;<span class="builtintype" id="3598738">string</span>&nbsp;<span class="op" id="3598745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3598748">var</span>&nbsp;<span class="ident" id="3598752">buf</span>&nbsp;<span class="ident" id="3598756"><a href="/net/url/url.go.html#3586743">bytes</a></span><span class="op" id="3598761">.</span><span class="ident" id="3598762">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3598770">if</span>&nbsp;<span class="ident" id="3598773"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3598774">.</span><span class="ident" id="3598775">Scheme</span>&nbsp;<span class="op" id="3598782">!=</span>&nbsp;<span class="string" id="3598785">&#34;&#34;</span>&nbsp;<span class="op" id="3598788">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3598792"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3598795">.</span><span class="ident" id="3598796">WriteString</span><span class="op" id="3598807">(</span><span class="ident" id="3598808"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3598809">.</span><span class="ident" id="3598810">Scheme</span><span class="op" id="3598816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3598820"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3598823">.</span><span class="ident" id="3598824">WriteByte</span><span class="op" id="3598833">(</span><span class="string" id="3598834">&#39;:&#39;</span><span class="op" id="3598837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3598840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3598843">if</span>&nbsp;<span class="ident" id="3598846"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3598847">.</span><span class="ident" id="3598848">Opaque</span>&nbsp;<span class="op" id="3598855">!=</span>&nbsp;<span class="string" id="3598858">&#34;&#34;</span>&nbsp;<span class="op" id="3598861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3598865"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3598868">.</span><span class="ident" id="3598869">WriteString</span><span class="op" id="3598880">(</span><span class="ident" id="3598881"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3598882">.</span><span class="ident" id="3598883">Opaque</span><span class="op" id="3598889">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3598892">}</span>&nbsp;<span class="keyword" id="3598894">else</span>&nbsp;<span class="op" id="3598899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3598903">if</span>&nbsp;<span class="ident" id="3598906"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3598907">.</span><span class="ident" id="3598908">Scheme</span>&nbsp;<span class="op" id="3598915">!=</span>&nbsp;<span class="string" id="3598918">&#34;&#34;</span>&nbsp;<span class="op" id="3598921">||</span>&nbsp;<span class="ident" id="3598924"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3598925">.</span><span class="ident" id="3598926">Host</span>&nbsp;<span class="op" id="3598931">!=</span>&nbsp;<span class="string" id="3598934">&#34;&#34;</span>&nbsp;<span class="op" id="3598937">||</span>&nbsp;<span class="ident" id="3598940"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3598941">.</span><span class="ident" id="3598942">User</span>&nbsp;<span class="op" id="3598947">!=</span>&nbsp;<span class="ident" id="3598950">nil</span>&nbsp;<span class="op" id="3598954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3598959"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3598962">.</span><span class="ident" id="3598963">WriteString</span><span class="op" id="3598974">(</span><span class="string" id="3598975">&#34;//&#34;</span><span class="op" id="3598979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3598984">if</span>&nbsp;<span class="ident" id="3598987">ui</span>&nbsp;<span class="op" id="3598990">:=</span>&nbsp;<span class="ident" id="3598993"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3598994">.</span><span class="ident" id="3598995">User</span><span class="op" id="3598999">;</span>&nbsp;<span class="ident" id="3599001"><a href="/net/url/url.go.html#3598987">ui</a></span>&nbsp;<span class="op" id="3599004">!=</span>&nbsp;<span class="ident" id="3599007">nil</span>&nbsp;<span class="op" id="3599011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3599017"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3599020">.</span><span class="ident" id="3599021">WriteString</span><span class="op" id="3599032">(</span><span class="ident" id="3599033"><a href="/net/url/url.go.html#3598987">ui</a></span><span class="op" id="3599035">.</span><span class="ident" id="3599036">String</span><span class="op" id="3599042">(</span><span class="op" id="3599043">)</span><span class="op" id="3599044">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3599050"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3599053">.</span><span class="ident" id="3599054">WriteByte</span><span class="op" id="3599063">(</span><span class="string" id="3599064">&#39;@&#39;</span><span class="op" id="3599067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3599072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3599077">if</span>&nbsp;<span class="ident" id="3599080">h</span>&nbsp;<span class="op" id="3599082">:=</span>&nbsp;<span class="ident" id="3599085"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3599086">.</span><span class="ident" id="3599087">Host</span><span class="op" id="3599091">;</span>&nbsp;<span class="ident" id="3599093"><a href="/net/url/url.go.html#3599080">h</a></span>&nbsp;<span class="op" id="3599095">!=</span>&nbsp;<span class="string" id="3599098">&#34;&#34;</span>&nbsp;<span class="op" id="3599101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3599107"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3599110">.</span><span class="ident" id="3599111">WriteString</span><span class="op" id="3599122">(</span><span class="ident" id="3599123"><a href="/net/url/url.go.html#3599080">h</a></span><span class="op" id="3599124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3599129">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3599133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3599137">if</span>&nbsp;<span class="ident" id="3599140"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3599141">.</span><span class="ident" id="3599142">Path</span>&nbsp;<span class="op" id="3599147">!=</span>&nbsp;<span class="string" id="3599150">&#34;&#34;</span>&nbsp;<span class="op" id="3599153">&amp;&amp;</span>&nbsp;<span class="ident" id="3599156"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3599157">.</span><span class="ident" id="3599158">Path</span><span class="op" id="3599162">[</span><span class="num" id="3599163">0</span><span class="op" id="3599164">]</span>&nbsp;<span class="op" id="3599166">!=</span>&nbsp;<span class="string" id="3599169">&#39;/&#39;</span>&nbsp;<span class="op" id="3599173">&amp;&amp;</span>&nbsp;<span class="ident" id="3599176"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3599177">.</span><span class="ident" id="3599178">Host</span>&nbsp;<span class="op" id="3599183">!=</span>&nbsp;<span class="string" id="3599186">&#34;&#34;</span>&nbsp;<span class="op" id="3599189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3599194"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3599197">.</span><span class="ident" id="3599198">WriteByte</span><span class="op" id="3599207">(</span><span class="string" id="3599208">&#39;/&#39;</span><span class="op" id="3599211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3599215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3599219"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3599222">.</span><span class="ident" id="3599223">WriteString</span><span class="op" id="3599234">(</span><span class="ident" id="3599235"><a href="/net/url/url.go.html#3590511">escape</a></span><span class="op" id="3599241">(</span><span class="ident" id="3599242"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3599243">.</span><span class="ident" id="3599244">Path</span><span class="op" id="3599248">,</span>&nbsp;<span class="ident" id="3599250"><a href="/net/url/url.go.html#3587412">encodePath</a></span><span class="op" id="3599260">)</span><span class="op" id="3599261">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3599264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3599267">if</span>&nbsp;<span class="ident" id="3599270"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3599271">.</span><span class="ident" id="3599272">RawQuery</span>&nbsp;<span class="op" id="3599281">!=</span>&nbsp;<span class="string" id="3599284">&#34;&#34;</span>&nbsp;<span class="op" id="3599287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3599291"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3599294">.</span><span class="ident" id="3599295">WriteByte</span><span class="op" id="3599304">(</span><span class="string" id="3599305">&#39;?&#39;</span><span class="op" id="3599308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3599312"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3599315">.</span><span class="ident" id="3599316">WriteString</span><span class="op" id="3599327">(</span><span class="ident" id="3599328"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3599329">.</span><span class="ident" id="3599330">RawQuery</span><span class="op" id="3599338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3599341">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3599344">if</span>&nbsp;<span class="ident" id="3599347"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3599348">.</span><span class="ident" id="3599349">Fragment</span>&nbsp;<span class="op" id="3599358">!=</span>&nbsp;<span class="string" id="3599361">&#34;&#34;</span>&nbsp;<span class="op" id="3599364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3599368"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3599371">.</span><span class="ident" id="3599372">WriteByte</span><span class="op" id="3599381">(</span><span class="string" id="3599382">&#39;#&#39;</span><span class="op" id="3599385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3599389"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3599392">.</span><span class="ident" id="3599393">WriteString</span><span class="op" id="3599404">(</span><span class="ident" id="3599405"><a href="/net/url/url.go.html#3590511">escape</a></span><span class="op" id="3599411">(</span><span class="ident" id="3599412"><a href="/net/url/url.go.html#3598721">u</a></span><span class="op" id="3599413">.</span><span class="ident" id="3599414">Fragment</span><span class="op" id="3599422">,</span>&nbsp;<span class="ident" id="3599424"><a href="/net/url/url.go.html#3587486">encodeFragment</a></span><span class="op" id="3599438">)</span><span class="op" id="3599439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3599442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3599445">return</span>&nbsp;<span class="ident" id="3599452"><a href="/net/url/url.go.html#3598752">buf</a></span><span class="op" id="3599455">.</span><span class="ident" id="3599456">String</span><span class="op" id="3599462">(</span><span class="op" id="3599463">)</span><br>
<span class="lineno">495</span><span class="op" id="3599465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3599468">//&nbsp;Values&nbsp;maps&nbsp;a&nbsp;string&nbsp;key&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="3599517">//&nbsp;It&nbsp;is&nbsp;typically&nbsp;used&nbsp;for&nbsp;query&nbsp;parameters&nbsp;and&nbsp;form&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="3599579">//&nbsp;Unlike&nbsp;in&nbsp;the&nbsp;http.Header&nbsp;map,&nbsp;the&nbsp;keys&nbsp;in&nbsp;a&nbsp;Values&nbsp;map</span><br>
<span class="lineno">500</span><span class="comment" id="3599638">//&nbsp;are&nbsp;case-sensitive.</span><br>
<span class="lineno"></span><span class="keyword" id="3599661">type</span>&nbsp;<span class="ident" id="3599666">Values</span>&nbsp;<span class="keyword" id="3599673">map</span><span class="op" id="3599676">[</span><span class="builtintype" id="3599677">string</span><span class="op" id="3599683">]</span><span class="op" id="3599684">[</span><span class="op" id="3599685">]</span><span class="builtintype" id="3599686">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3599694">//&nbsp;Get&nbsp;gets&nbsp;the&nbsp;first&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;given&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="3599753">//&nbsp;If&nbsp;there&nbsp;are&nbsp;no&nbsp;values&nbsp;associated&nbsp;with&nbsp;the&nbsp;key,&nbsp;Get&nbsp;returns</span><br>
<span class="lineno">505</span><span class="comment" id="3599816">//&nbsp;the&nbsp;empty&nbsp;string.&nbsp;To&nbsp;access&nbsp;multiple&nbsp;values,&nbsp;use&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span><span class="comment" id="3599876">//&nbsp;directly.</span><br>
<span class="lineno"></span><span class="keyword" id="3599889">func</span>&nbsp;<span class="op" id="3599894">(</span><span class="ident" id="3599895">v</span>&nbsp;<span class="ident" id="3599897"><a href="/net/url/url.go.html#3599666">Values</a></span><span class="op" id="3599903">)</span>&nbsp;<span class="ident" id="3599905">Get</span><span class="op" id="3599908">(</span><span class="ident" id="3599909">key</span>&nbsp;<span class="builtintype" id="3599913">string</span><span class="op" id="3599919">)</span>&nbsp;<span class="builtintype" id="3599921">string</span>&nbsp;<span class="op" id="3599928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3599931">if</span>&nbsp;<span class="ident" id="3599934"><a href="/net/url/url.go.html#3599895">v</a></span>&nbsp;<span class="op" id="3599936">==</span>&nbsp;<span class="ident" id="3599939">nil</span>&nbsp;<span class="op" id="3599943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3599947">return</span>&nbsp;<span class="string" id="3599954">&#34;&#34;</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3599958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3599961">vs</span><span class="op" id="3599963">,</span>&nbsp;<span class="ident" id="3599965">ok</span>&nbsp;<span class="op" id="3599968">:=</span>&nbsp;<span class="ident" id="3599971"><a href="/net/url/url.go.html#3599895">v</a></span><span class="op" id="3599972">[</span><span class="ident" id="3599973"><a href="/net/url/url.go.html#3599909">key</a></span><span class="op" id="3599976">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3599979">if</span>&nbsp;<span class="op" id="3599982">!</span><span class="ident" id="3599983"><a href="/net/url/url.go.html#3599965">ok</a></span>&nbsp;<span class="op" id="3599986">||</span>&nbsp;<span class="builtinfunc" id="3599989">len</span><span class="op" id="3599992">(</span><span class="ident" id="3599993"><a href="/net/url/url.go.html#3599961">vs</a></span><span class="op" id="3599995">)</span>&nbsp;<span class="op" id="3599997">==</span>&nbsp;<span class="num" id="3600000">0</span>&nbsp;<span class="op" id="3600002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600006">return</span>&nbsp;<span class="string" id="3600013">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3600017">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600020">return</span>&nbsp;<span class="ident" id="3600027"><a href="/net/url/url.go.html#3599961">vs</a></span><span class="op" id="3600029">[</span><span class="num" id="3600030">0</span><span class="op" id="3600031">]</span><br>
<span class="lineno"></span><span class="op" id="3600033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3600036">//&nbsp;Set&nbsp;sets&nbsp;the&nbsp;key&nbsp;to&nbsp;value.&nbsp;It&nbsp;replaces&nbsp;any&nbsp;existing</span><br>
<span class="lineno"></span><span class="comment" id="3600091">//&nbsp;values.</span><br>
<span class="lineno">520</span><span class="keyword" id="3600102">func</span>&nbsp;<span class="op" id="3600107">(</span><span class="ident" id="3600108">v</span>&nbsp;<span class="ident" id="3600110"><a href="/net/url/url.go.html#3599666">Values</a></span><span class="op" id="3600116">)</span>&nbsp;<span class="ident" id="3600118">Set</span><span class="op" id="3600121">(</span><span class="ident" id="3600122">key</span><span class="op" id="3600125">,</span>&nbsp;<span class="ident" id="3600127">value</span>&nbsp;<span class="builtintype" id="3600133">string</span><span class="op" id="3600139">)</span>&nbsp;<span class="op" id="3600141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3600144"><a href="/net/url/url.go.html#3600108">v</a></span><span class="op" id="3600145">[</span><span class="ident" id="3600146"><a href="/net/url/url.go.html#3600122">key</a></span><span class="op" id="3600149">]</span>&nbsp;<span class="op" id="3600151">=</span>&nbsp;<span class="op" id="3600153">[</span><span class="op" id="3600154">]</span><span class="builtintype" id="3600155">string</span><span class="op" id="3600161">{</span><span class="ident" id="3600162"><a href="/net/url/url.go.html#3600127">value</a></span><span class="op" id="3600167">}</span><br>
<span class="lineno"></span><span class="op" id="3600169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3600172">//&nbsp;Add&nbsp;adds&nbsp;the&nbsp;value&nbsp;to&nbsp;key.&nbsp;It&nbsp;appends&nbsp;to&nbsp;any&nbsp;existing</span><br>
<span class="lineno">525</span><span class="comment" id="3600229">//&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3600260">func</span>&nbsp;<span class="op" id="3600265">(</span><span class="ident" id="3600266">v</span>&nbsp;<span class="ident" id="3600268"><a href="/net/url/url.go.html#3599666">Values</a></span><span class="op" id="3600274">)</span>&nbsp;<span class="ident" id="3600276">Add</span><span class="op" id="3600279">(</span><span class="ident" id="3600280">key</span><span class="op" id="3600283">,</span>&nbsp;<span class="ident" id="3600285">value</span>&nbsp;<span class="builtintype" id="3600291">string</span><span class="op" id="3600297">)</span>&nbsp;<span class="op" id="3600299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3600302"><a href="/net/url/url.go.html#3600266">v</a></span><span class="op" id="3600303">[</span><span class="ident" id="3600304"><a href="/net/url/url.go.html#3600280">key</a></span><span class="op" id="3600307">]</span>&nbsp;<span class="op" id="3600309">=</span>&nbsp;<span class="builtinfunc" id="3600311">append</span><span class="op" id="3600317">(</span><span class="ident" id="3600318"><a href="/net/url/url.go.html#3600266">v</a></span><span class="op" id="3600319">[</span><span class="ident" id="3600320"><a href="/net/url/url.go.html#3600280">key</a></span><span class="op" id="3600323">]</span><span class="op" id="3600324">,</span>&nbsp;<span class="ident" id="3600326"><a href="/net/url/url.go.html#3600285">value</a></span><span class="op" id="3600331">)</span><br>
<span class="lineno"></span><span class="op" id="3600333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span><span class="comment" id="3600336">//&nbsp;Del&nbsp;deletes&nbsp;the&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3600383">func</span>&nbsp;<span class="op" id="3600388">(</span><span class="ident" id="3600389">v</span>&nbsp;<span class="ident" id="3600391"><a href="/net/url/url.go.html#3599666">Values</a></span><span class="op" id="3600397">)</span>&nbsp;<span class="ident" id="3600399">Del</span><span class="op" id="3600402">(</span><span class="ident" id="3600403">key</span>&nbsp;<span class="builtintype" id="3600407">string</span><span class="op" id="3600413">)</span>&nbsp;<span class="op" id="3600415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3600418">delete</span><span class="op" id="3600424">(</span><span class="ident" id="3600425"><a href="/net/url/url.go.html#3600389">v</a></span><span class="op" id="3600426">,</span>&nbsp;<span class="ident" id="3600428"><a href="/net/url/url.go.html#3600403">key</a></span><span class="op" id="3600431">)</span><br>
<span class="lineno"></span><span class="op" id="3600433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="3600436">//&nbsp;ParseQuery&nbsp;parses&nbsp;the&nbsp;URL-encoded&nbsp;query&nbsp;string&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3600498">//&nbsp;a&nbsp;map&nbsp;listing&nbsp;the&nbsp;values&nbsp;specified&nbsp;for&nbsp;each&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="3600550">//&nbsp;ParseQuery&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;map&nbsp;containing&nbsp;all&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3600612">//&nbsp;valid&nbsp;query&nbsp;parameters&nbsp;found;&nbsp;err&nbsp;describes&nbsp;the&nbsp;first&nbsp;decoding&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3600684">//&nbsp;encountered,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">540</span><span class="keyword" id="3600708">func</span>&nbsp;<span class="ident" id="3600713">ParseQuery</span><span class="op" id="3600723">(</span><span class="ident" id="3600724">query</span>&nbsp;<span class="builtintype" id="3600730">string</span><span class="op" id="3600736">)</span>&nbsp;<span class="op" id="3600738">(</span><span class="ident" id="3600739">m</span>&nbsp;<span class="ident" id="3600741"><a href="/net/url/url.go.html#3599666">Values</a></span><span class="op" id="3600747">,</span>&nbsp;<span class="ident" id="3600749">err</span>&nbsp;<span class="builtintype" id="3600753">error</span><span class="op" id="3600758">)</span>&nbsp;<span class="op" id="3600760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3600763"><a href="/net/url/url.go.html#3600739">m</a></span>&nbsp;<span class="op" id="3600765">=</span>&nbsp;<span class="builtinfunc" id="3600767">make</span><span class="op" id="3600771">(</span><span class="ident" id="3600772"><a href="/net/url/url.go.html#3599666">Values</a></span><span class="op" id="3600778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3600781"><a href="/net/url/url.go.html#3600749">err</a></span>&nbsp;<span class="op" id="3600785">=</span>&nbsp;<span class="ident" id="3600787"><a href="/net/url/url.go.html#3600824">parseQuery</a></span><span class="op" id="3600797">(</span><span class="ident" id="3600798"><a href="/net/url/url.go.html#3600739">m</a></span><span class="op" id="3600799">,</span>&nbsp;<span class="ident" id="3600801"><a href="/net/url/url.go.html#3600724">query</a></span><span class="op" id="3600806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600809">return</span><br>
<span class="lineno"></span><span class="op" id="3600816">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span><span class="keyword" id="3600819">func</span>&nbsp;<span class="ident" id="3600824">parseQuery</span><span class="op" id="3600834">(</span><span class="ident" id="3600835">m</span>&nbsp;<span class="ident" id="3600837"><a href="/net/url/url.go.html#3599666">Values</a></span><span class="op" id="3600843">,</span>&nbsp;<span class="ident" id="3600845">query</span>&nbsp;<span class="builtintype" id="3600851">string</span><span class="op" id="3600857">)</span>&nbsp;<span class="op" id="3600859">(</span><span class="ident" id="3600860">err</span>&nbsp;<span class="builtintype" id="3600864">error</span><span class="op" id="3600869">)</span>&nbsp;<span class="op" id="3600871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600874">for</span>&nbsp;<span class="ident" id="3600878"><a href="/net/url/url.go.html#3600845">query</a></span>&nbsp;<span class="op" id="3600884">!=</span>&nbsp;<span class="string" id="3600887">&#34;&#34;</span>&nbsp;<span class="op" id="3600890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3600894">key</span>&nbsp;<span class="op" id="3600898">:=</span>&nbsp;<span class="ident" id="3600901"><a href="/net/url/url.go.html#3600845">query</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600909">if</span>&nbsp;<span class="ident" id="3600912">i</span>&nbsp;<span class="op" id="3600914">:=</span>&nbsp;<span class="ident" id="3600917"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3600924">.</span><span class="ident" id="3600925">IndexAny</span><span class="op" id="3600933">(</span><span class="ident" id="3600934"><a href="/net/url/url.go.html#3600894">key</a></span><span class="op" id="3600937">,</span>&nbsp;<span class="string" id="3600939">&#34;&amp;;&#34;</span><span class="op" id="3600943">)</span><span class="op" id="3600944">;</span>&nbsp;<span class="ident" id="3600946"><a href="/net/url/url.go.html#3600912">i</a></span>&nbsp;<span class="op" id="3600948">&gt;=</span>&nbsp;<span class="num" id="3600951">0</span>&nbsp;<span class="op" id="3600953">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3600958"><a href="/net/url/url.go.html#3600894">key</a></span><span class="op" id="3600961">,</span>&nbsp;<span class="ident" id="3600963"><a href="/net/url/url.go.html#3600845">query</a></span>&nbsp;<span class="op" id="3600969">=</span>&nbsp;<span class="ident" id="3600971"><a href="/net/url/url.go.html#3600894">key</a></span><span class="op" id="3600974">[</span><span class="op" id="3600975">:</span><span class="ident" id="3600976"><a href="/net/url/url.go.html#3600912">i</a></span><span class="op" id="3600977">]</span><span class="op" id="3600978">,</span>&nbsp;<span class="ident" id="3600980"><a href="/net/url/url.go.html#3600894">key</a></span><span class="op" id="3600983">[</span><span class="ident" id="3600984"><a href="/net/url/url.go.html#3600912">i</a></span><span class="op" id="3600985">+</span><span class="num" id="3600986">1</span><span class="op" id="3600987">:</span><span class="op" id="3600988">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3600992">}</span>&nbsp;<span class="keyword" id="3600994">else</span>&nbsp;<span class="op" id="3600999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601004"><a href="/net/url/url.go.html#3600845">query</a></span>&nbsp;<span class="op" id="3601010">=</span>&nbsp;<span class="string" id="3601012">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601021">if</span>&nbsp;<span class="ident" id="3601024"><a href="/net/url/url.go.html#3600894">key</a></span>&nbsp;<span class="op" id="3601028">==</span>&nbsp;<span class="string" id="3601031">&#34;&#34;</span>&nbsp;<span class="op" id="3601034">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601039">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601054">value</span>&nbsp;<span class="op" id="3601060">:=</span>&nbsp;<span class="string" id="3601063">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601068">if</span>&nbsp;<span class="ident" id="3601071">i</span>&nbsp;<span class="op" id="3601073">:=</span>&nbsp;<span class="ident" id="3601076"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3601083">.</span><span class="ident" id="3601084">Index</span><span class="op" id="3601089">(</span><span class="ident" id="3601090"><a href="/net/url/url.go.html#3600894">key</a></span><span class="op" id="3601093">,</span>&nbsp;<span class="string" id="3601095">&#34;=&#34;</span><span class="op" id="3601098">)</span><span class="op" id="3601099">;</span>&nbsp;<span class="ident" id="3601101"><a href="/net/url/url.go.html#3601071">i</a></span>&nbsp;<span class="op" id="3601103">&gt;=</span>&nbsp;<span class="num" id="3601106">0</span>&nbsp;<span class="op" id="3601108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601113"><a href="/net/url/url.go.html#3600894">key</a></span><span class="op" id="3601116">,</span>&nbsp;<span class="ident" id="3601118"><a href="/net/url/url.go.html#3601054">value</a></span>&nbsp;<span class="op" id="3601124">=</span>&nbsp;<span class="ident" id="3601126"><a href="/net/url/url.go.html#3600894">key</a></span><span class="op" id="3601129">[</span><span class="op" id="3601130">:</span><span class="ident" id="3601131"><a href="/net/url/url.go.html#3601071">i</a></span><span class="op" id="3601132">]</span><span class="op" id="3601133">,</span>&nbsp;<span class="ident" id="3601135"><a href="/net/url/url.go.html#3600894">key</a></span><span class="op" id="3601138">[</span><span class="ident" id="3601139"><a href="/net/url/url.go.html#3601071">i</a></span><span class="op" id="3601140">+</span><span class="num" id="3601141">1</span><span class="op" id="3601142">:</span><span class="op" id="3601143">]</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601151"><a href="/net/url/url.go.html#3600894">key</a></span><span class="op" id="3601154">,</span>&nbsp;<span class="ident" id="3601156">err1</span>&nbsp;<span class="op" id="3601161">:=</span>&nbsp;<span class="ident" id="3601164"><a href="/net/url/url.go.html#3589332">QueryUnescape</a></span><span class="op" id="3601177">(</span><span class="ident" id="3601178"><a href="/net/url/url.go.html#3600894">key</a></span><span class="op" id="3601181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601185">if</span>&nbsp;<span class="ident" id="3601188"><a href="/net/url/url.go.html#3601156">err1</a></span>&nbsp;<span class="op" id="3601193">!=</span>&nbsp;<span class="ident" id="3601196">nil</span>&nbsp;<span class="op" id="3601200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601205">if</span>&nbsp;<span class="ident" id="3601208"><a href="/net/url/url.go.html#3600860">err</a></span>&nbsp;<span class="op" id="3601212">==</span>&nbsp;<span class="ident" id="3601215">nil</span>&nbsp;<span class="op" id="3601219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601225"><a href="/net/url/url.go.html#3600860">err</a></span>&nbsp;<span class="op" id="3601229">=</span>&nbsp;<span class="ident" id="3601231"><a href="/net/url/url.go.html#3601156">err1</a></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601244">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601259"><a href="/net/url/url.go.html#3601054">value</a></span><span class="op" id="3601264">,</span>&nbsp;<span class="ident" id="3601266"><a href="/net/url/url.go.html#3601156">err1</a></span>&nbsp;<span class="op" id="3601271">=</span>&nbsp;<span class="ident" id="3601273"><a href="/net/url/url.go.html#3589332">QueryUnescape</a></span><span class="op" id="3601286">(</span><span class="ident" id="3601287"><a href="/net/url/url.go.html#3601054">value</a></span><span class="op" id="3601292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601296">if</span>&nbsp;<span class="ident" id="3601299"><a href="/net/url/url.go.html#3601156">err1</a></span>&nbsp;<span class="op" id="3601304">!=</span>&nbsp;<span class="ident" id="3601307">nil</span>&nbsp;<span class="op" id="3601311">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601316">if</span>&nbsp;<span class="ident" id="3601319"><a href="/net/url/url.go.html#3600860">err</a></span>&nbsp;<span class="op" id="3601323">==</span>&nbsp;<span class="ident" id="3601326">nil</span>&nbsp;<span class="op" id="3601330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601336"><a href="/net/url/url.go.html#3600860">err</a></span>&nbsp;<span class="op" id="3601340">=</span>&nbsp;<span class="ident" id="3601342"><a href="/net/url/url.go.html#3601156">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601355">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601366">}</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601370"><a href="/net/url/url.go.html#3600835">m</a></span><span class="op" id="3601371">[</span><span class="ident" id="3601372"><a href="/net/url/url.go.html#3600894">key</a></span><span class="op" id="3601375">]</span>&nbsp;<span class="op" id="3601377">=</span>&nbsp;<span class="builtinfunc" id="3601379">append</span><span class="op" id="3601385">(</span><span class="ident" id="3601386"><a href="/net/url/url.go.html#3600835">m</a></span><span class="op" id="3601387">[</span><span class="ident" id="3601388"><a href="/net/url/url.go.html#3600894">key</a></span><span class="op" id="3601391">]</span><span class="op" id="3601392">,</span>&nbsp;<span class="ident" id="3601394"><a href="/net/url/url.go.html#3601054">value</a></span><span class="op" id="3601399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601405">return</span>&nbsp;<span class="ident" id="3601412"><a href="/net/url/url.go.html#3600860">err</a></span><br>
<span class="lineno"></span><span class="op" id="3601416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span><span class="comment" id="3601419">//&nbsp;Encode&nbsp;encodes&nbsp;the&nbsp;values&nbsp;into&nbsp;``URL&nbsp;encoded&#39;&#39;&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="3601474">//&nbsp;(&#34;bar=baz&amp;foo=quux&#34;)&nbsp;sorted&nbsp;by&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3601513">func</span>&nbsp;<span class="op" id="3601518">(</span><span class="ident" id="3601519">v</span>&nbsp;<span class="ident" id="3601521"><a href="/net/url/url.go.html#3599666">Values</a></span><span class="op" id="3601527">)</span>&nbsp;<span class="ident" id="3601529">Encode</span><span class="op" id="3601535">(</span><span class="op" id="3601536">)</span>&nbsp;<span class="builtintype" id="3601538">string</span>&nbsp;<span class="op" id="3601545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601548">if</span>&nbsp;<span class="ident" id="3601551"><a href="/net/url/url.go.html#3601519">v</a></span>&nbsp;<span class="op" id="3601553">==</span>&nbsp;<span class="ident" id="3601556">nil</span>&nbsp;<span class="op" id="3601560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601564">return</span>&nbsp;<span class="string" id="3601571">&#34;&#34;</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601578">var</span>&nbsp;<span class="ident" id="3601582">buf</span>&nbsp;<span class="ident" id="3601586"><a href="/net/url/url.go.html#3586743">bytes</a></span><span class="op" id="3601591">.</span><span class="ident" id="3601592">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601600">keys</span>&nbsp;<span class="op" id="3601605">:=</span>&nbsp;<span class="builtinfunc" id="3601608">make</span><span class="op" id="3601612">(</span><span class="op" id="3601613">[</span><span class="op" id="3601614">]</span><span class="builtintype" id="3601615">string</span><span class="op" id="3601621">,</span>&nbsp;<span class="num" id="3601623">0</span><span class="op" id="3601624">,</span>&nbsp;<span class="builtinfunc" id="3601626">len</span><span class="op" id="3601629">(</span><span class="ident" id="3601630"><a href="/net/url/url.go.html#3601519">v</a></span><span class="op" id="3601631">)</span><span class="op" id="3601632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601635">for</span>&nbsp;<span class="ident" id="3601639">k</span>&nbsp;<span class="op" id="3601641">:=</span>&nbsp;<span class="keyword" id="3601644">range</span>&nbsp;<span class="ident" id="3601650"><a href="/net/url/url.go.html#3601519">v</a></span>&nbsp;<span class="op" id="3601652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601656"><a href="/net/url/url.go.html#3601600">keys</a></span>&nbsp;<span class="op" id="3601661">=</span>&nbsp;<span class="builtinfunc" id="3601663">append</span><span class="op" id="3601669">(</span><span class="ident" id="3601670"><a href="/net/url/url.go.html#3601600">keys</a></span><span class="op" id="3601674">,</span>&nbsp;<span class="ident" id="3601676"><a href="/net/url/url.go.html#3601639">k</a></span><span class="op" id="3601677">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601683"><a href="/net/url/url.go.html#3586762">sort</a></span><span class="op" id="3601687">.</span><span class="ident" id="3601688">Strings</span><span class="op" id="3601695">(</span><span class="ident" id="3601696"><a href="/net/url/url.go.html#3601600">keys</a></span><span class="op" id="3601700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601703">for</span>&nbsp;<span class="ident" id="3601707">_</span><span class="op" id="3601708">,</span>&nbsp;<span class="ident" id="3601710">k</span>&nbsp;<span class="op" id="3601712">:=</span>&nbsp;<span class="keyword" id="3601715">range</span>&nbsp;<span class="ident" id="3601721"><a href="/net/url/url.go.html#3601600">keys</a></span>&nbsp;<span class="op" id="3601726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601730">vs</span>&nbsp;<span class="op" id="3601733">:=</span>&nbsp;<span class="ident" id="3601736"><a href="/net/url/url.go.html#3601519">v</a></span><span class="op" id="3601737">[</span><span class="ident" id="3601738"><a href="/net/url/url.go.html#3601710">k</a></span><span class="op" id="3601739">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601743">prefix</span>&nbsp;<span class="op" id="3601750">:=</span>&nbsp;<span class="ident" id="3601753"><a href="/net/url/url.go.html#3590432">QueryEscape</a></span><span class="op" id="3601764">(</span><span class="ident" id="3601765"><a href="/net/url/url.go.html#3601710">k</a></span><span class="op" id="3601766">)</span>&nbsp;<span class="op" id="3601768">+</span>&nbsp;<span class="string" id="3601770">&#34;=&#34;</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601776">for</span>&nbsp;<span class="ident" id="3601780">_</span><span class="op" id="3601781">,</span>&nbsp;<span class="ident" id="3601783">v</span>&nbsp;<span class="op" id="3601785">:=</span>&nbsp;<span class="keyword" id="3601788">range</span>&nbsp;<span class="ident" id="3601794"><a href="/net/url/url.go.html#3601730">vs</a></span>&nbsp;<span class="op" id="3601797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601802">if</span>&nbsp;<span class="ident" id="3601805"><a href="/net/url/url.go.html#3601582">buf</a></span><span class="op" id="3601808">.</span><span class="ident" id="3601809">Len</span><span class="op" id="3601812">(</span><span class="op" id="3601813">)</span>&nbsp;<span class="op" id="3601815">&gt;</span>&nbsp;<span class="num" id="3601817">0</span>&nbsp;<span class="op" id="3601819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601825"><a href="/net/url/url.go.html#3601582">buf</a></span><span class="op" id="3601828">.</span><span class="ident" id="3601829">WriteByte</span><span class="op" id="3601838">(</span><span class="string" id="3601839">&#39;&amp;&#39;</span><span class="op" id="3601842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601852"><a href="/net/url/url.go.html#3601582">buf</a></span><span class="op" id="3601855">.</span><span class="ident" id="3601856">WriteString</span><span class="op" id="3601867">(</span><span class="ident" id="3601868"><a href="/net/url/url.go.html#3601743">prefix</a></span><span class="op" id="3601874">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601879"><a href="/net/url/url.go.html#3601582">buf</a></span><span class="op" id="3601882">.</span><span class="ident" id="3601883">WriteString</span><span class="op" id="3601894">(</span><span class="ident" id="3601895"><a href="/net/url/url.go.html#3590432">QueryEscape</a></span><span class="op" id="3601906">(</span><span class="ident" id="3601907"><a href="/net/url/url.go.html#3601783">v</a></span><span class="op" id="3601908">)</span><span class="op" id="3601909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601919">return</span>&nbsp;<span class="ident" id="3601926"><a href="/net/url/url.go.html#3601582">buf</a></span><span class="op" id="3601929">.</span><span class="ident" id="3601930">String</span><span class="op" id="3601936">(</span><span class="op" id="3601937">)</span><br>
<span class="lineno"></span><span class="op" id="3601939">}</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span><span class="comment" id="3601942">//&nbsp;resolvePath&nbsp;applies&nbsp;special&nbsp;path&nbsp;segments&nbsp;from&nbsp;refs&nbsp;and&nbsp;applies</span><br>
<span class="lineno"></span><span class="comment" id="3602009">//&nbsp;them&nbsp;to&nbsp;base,&nbsp;per&nbsp;RFC&nbsp;3986.</span><br>
<span class="lineno"></span><span class="keyword" id="3602040">func</span>&nbsp;<span class="ident" id="3602045">resolvePath</span><span class="op" id="3602056">(</span><span class="ident" id="3602057">base</span><span class="op" id="3602061">,</span>&nbsp;<span class="ident" id="3602063">ref</span>&nbsp;<span class="builtintype" id="3602067">string</span><span class="op" id="3602073">)</span>&nbsp;<span class="builtintype" id="3602075">string</span>&nbsp;<span class="op" id="3602082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602085">var</span>&nbsp;<span class="ident" id="3602089">full</span>&nbsp;<span class="builtintype" id="3602094">string</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602102">if</span>&nbsp;<span class="ident" id="3602105"><a href="/net/url/url.go.html#3602063">ref</a></span>&nbsp;<span class="op" id="3602109">==</span>&nbsp;<span class="string" id="3602112">&#34;&#34;</span>&nbsp;<span class="op" id="3602115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602119"><a href="/net/url/url.go.html#3602089">full</a></span>&nbsp;<span class="op" id="3602124">=</span>&nbsp;<span class="ident" id="3602126"><a href="/net/url/url.go.html#3602057">base</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602132">}</span>&nbsp;<span class="keyword" id="3602134">else</span>&nbsp;<span class="keyword" id="3602139">if</span>&nbsp;<span class="ident" id="3602142"><a href="/net/url/url.go.html#3602063">ref</a></span><span class="op" id="3602145">[</span><span class="num" id="3602146">0</span><span class="op" id="3602147">]</span>&nbsp;<span class="op" id="3602149">!=</span>&nbsp;<span class="string" id="3602152">&#39;/&#39;</span>&nbsp;<span class="op" id="3602156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602160">i</span>&nbsp;<span class="op" id="3602162">:=</span>&nbsp;<span class="ident" id="3602165"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3602172">.</span><span class="ident" id="3602173">LastIndex</span><span class="op" id="3602182">(</span><span class="ident" id="3602183"><a href="/net/url/url.go.html#3602057">base</a></span><span class="op" id="3602187">,</span>&nbsp;<span class="string" id="3602189">&#34;/&#34;</span><span class="op" id="3602192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602196"><a href="/net/url/url.go.html#3602089">full</a></span>&nbsp;<span class="op" id="3602201">=</span>&nbsp;<span class="ident" id="3602203"><a href="/net/url/url.go.html#3602057">base</a></span><span class="op" id="3602207">[</span><span class="op" id="3602208">:</span><span class="ident" id="3602209"><a href="/net/url/url.go.html#3602160">i</a></span><span class="op" id="3602210">+</span><span class="num" id="3602211">1</span><span class="op" id="3602212">]</span>&nbsp;<span class="op" id="3602214">+</span>&nbsp;<span class="ident" id="3602216"><a href="/net/url/url.go.html#3602063">ref</a></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602221">}</span>&nbsp;<span class="keyword" id="3602223">else</span>&nbsp;<span class="op" id="3602228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602232"><a href="/net/url/url.go.html#3602089">full</a></span>&nbsp;<span class="op" id="3602237">=</span>&nbsp;<span class="ident" id="3602239"><a href="/net/url/url.go.html#3602063">ref</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602247">if</span>&nbsp;<span class="ident" id="3602250"><a href="/net/url/url.go.html#3602089">full</a></span>&nbsp;<span class="op" id="3602255">==</span>&nbsp;<span class="string" id="3602258">&#34;&#34;</span>&nbsp;<span class="op" id="3602261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602265">return</span>&nbsp;<span class="string" id="3602272">&#34;&#34;</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602279">var</span>&nbsp;<span class="ident" id="3602283">dst</span>&nbsp;<span class="op" id="3602287">[</span><span class="op" id="3602288">]</span><span class="builtintype" id="3602289">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602297">src</span>&nbsp;<span class="op" id="3602301">:=</span>&nbsp;<span class="ident" id="3602304"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3602311">.</span><span class="ident" id="3602312">Split</span><span class="op" id="3602317">(</span><span class="ident" id="3602318"><a href="/net/url/url.go.html#3602089">full</a></span><span class="op" id="3602322">,</span>&nbsp;<span class="string" id="3602324">&#34;/&#34;</span><span class="op" id="3602327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602330">for</span>&nbsp;<span class="ident" id="3602334">_</span><span class="op" id="3602335">,</span>&nbsp;<span class="ident" id="3602337">elem</span>&nbsp;<span class="op" id="3602342">:=</span>&nbsp;<span class="keyword" id="3602345">range</span>&nbsp;<span class="ident" id="3602351"><a href="/net/url/url.go.html#3602297">src</a></span>&nbsp;<span class="op" id="3602355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602359">switch</span>&nbsp;<span class="ident" id="3602366"><a href="/net/url/url.go.html#3602337">elem</a></span>&nbsp;<span class="op" id="3602371">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602375">case</span>&nbsp;<span class="string" id="3602380">&#34;.&#34;</span><span class="op" id="3602383">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3602388">//&nbsp;drop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602398">case</span>&nbsp;<span class="string" id="3602403">&#34;..&#34;</span><span class="op" id="3602407">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602412">if</span>&nbsp;<span class="builtinfunc" id="3602415">len</span><span class="op" id="3602418">(</span><span class="ident" id="3602419"><a href="/net/url/url.go.html#3602283">dst</a></span><span class="op" id="3602422">)</span>&nbsp;<span class="op" id="3602424">&gt;</span>&nbsp;<span class="num" id="3602426">0</span>&nbsp;<span class="op" id="3602428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602434"><a href="/net/url/url.go.html#3602283">dst</a></span>&nbsp;<span class="op" id="3602438">=</span>&nbsp;<span class="ident" id="3602440"><a href="/net/url/url.go.html#3602283">dst</a></span><span class="op" id="3602443">[</span><span class="op" id="3602444">:</span><span class="builtinfunc" id="3602445">len</span><span class="op" id="3602448">(</span><span class="ident" id="3602449"><a href="/net/url/url.go.html#3602283">dst</a></span><span class="op" id="3602452">)</span><span class="op" id="3602453">-</span><span class="num" id="3602454">1</span><span class="op" id="3602455">]</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602464">default</span><span class="op" id="3602471">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602476"><a href="/net/url/url.go.html#3602283">dst</a></span>&nbsp;<span class="op" id="3602480">=</span>&nbsp;<span class="builtinfunc" id="3602482">append</span><span class="op" id="3602488">(</span><span class="ident" id="3602489"><a href="/net/url/url.go.html#3602283">dst</a></span><span class="op" id="3602492">,</span>&nbsp;<span class="ident" id="3602494"><a href="/net/url/url.go.html#3602337">elem</a></span><span class="op" id="3602498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602505">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602508">if</span>&nbsp;<span class="ident" id="3602511">last</span>&nbsp;<span class="op" id="3602516">:=</span>&nbsp;<span class="ident" id="3602519"><a href="/net/url/url.go.html#3602297">src</a></span><span class="op" id="3602522">[</span><span class="builtinfunc" id="3602523">len</span><span class="op" id="3602526">(</span><span class="ident" id="3602527"><a href="/net/url/url.go.html#3602297">src</a></span><span class="op" id="3602530">)</span><span class="op" id="3602531">-</span><span class="num" id="3602532">1</span><span class="op" id="3602533">]</span><span class="op" id="3602534">;</span>&nbsp;<span class="ident" id="3602536"><a href="/net/url/url.go.html#3602511">last</a></span>&nbsp;<span class="op" id="3602541">==</span>&nbsp;<span class="string" id="3602544">&#34;.&#34;</span>&nbsp;<span class="op" id="3602548">||</span>&nbsp;<span class="ident" id="3602551"><a href="/net/url/url.go.html#3602511">last</a></span>&nbsp;<span class="op" id="3602556">==</span>&nbsp;<span class="string" id="3602559">&#34;..&#34;</span>&nbsp;<span class="op" id="3602564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3602568">//&nbsp;Add&nbsp;final&nbsp;slash&nbsp;to&nbsp;the&nbsp;joined&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602609"><a href="/net/url/url.go.html#3602283">dst</a></span>&nbsp;<span class="op" id="3602613">=</span>&nbsp;<span class="builtinfunc" id="3602615">append</span><span class="op" id="3602621">(</span><span class="ident" id="3602622"><a href="/net/url/url.go.html#3602283">dst</a></span><span class="op" id="3602625">,</span>&nbsp;<span class="string" id="3602627">&#34;&#34;</span><span class="op" id="3602629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602635">return</span>&nbsp;<span class="string" id="3602642">&#34;/&#34;</span>&nbsp;<span class="op" id="3602646">+</span>&nbsp;<span class="ident" id="3602648"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3602655">.</span><span class="ident" id="3602656">TrimLeft</span><span class="op" id="3602664">(</span><span class="ident" id="3602665"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3602672">.</span><span class="ident" id="3602673">Join</span><span class="op" id="3602677">(</span><span class="ident" id="3602678"><a href="/net/url/url.go.html#3602283">dst</a></span><span class="op" id="3602681">,</span>&nbsp;<span class="string" id="3602683">&#34;/&#34;</span><span class="op" id="3602686">)</span><span class="op" id="3602687">,</span>&nbsp;<span class="string" id="3602689">&#34;/&#34;</span><span class="op" id="3602692">)</span><br>
<span class="lineno">640</span><span class="op" id="3602694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3602697">//&nbsp;IsAbs&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;URL&nbsp;is&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="3602743">func</span>&nbsp;<span class="op" id="3602748">(</span><span class="ident" id="3602749">u</span>&nbsp;<span class="op" id="3602751">*</span><span class="ident" id="3602752"><a href="/net/url/url.go.html#3591999">URL</a></span><span class="op" id="3602755">)</span>&nbsp;<span class="ident" id="3602757">IsAbs</span><span class="op" id="3602762">(</span><span class="op" id="3602763">)</span>&nbsp;<span class="builtintype" id="3602765">bool</span>&nbsp;<span class="op" id="3602770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602773">return</span>&nbsp;<span class="ident" id="3602780"><a href="/net/url/url.go.html#3602749">u</a></span><span class="op" id="3602781">.</span><span class="ident" id="3602782">Scheme</span>&nbsp;<span class="op" id="3602789">!=</span>&nbsp;<span class="string" id="3602792">&#34;&#34;</span><br>
<span class="lineno">645</span><span class="op" id="3602795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3602798">//&nbsp;Parse&nbsp;parses&nbsp;a&nbsp;URL&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;the&nbsp;receiver.&nbsp;&nbsp;The&nbsp;provided&nbsp;URL</span><br>
<span class="lineno"></span><span class="comment" id="3602870">//&nbsp;may&nbsp;be&nbsp;relative&nbsp;or&nbsp;absolute.&nbsp;&nbsp;Parse&nbsp;returns&nbsp;nil,&nbsp;err&nbsp;on&nbsp;parse</span><br>
<span class="lineno"></span><span class="comment" id="3602935">//&nbsp;failure,&nbsp;otherwise&nbsp;its&nbsp;return&nbsp;value&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;ResolveReference.</span><br>
<span class="lineno">650</span><span class="keyword" id="3603007">func</span>&nbsp;<span class="op" id="3603012">(</span><span class="ident" id="3603013">u</span>&nbsp;<span class="op" id="3603015">*</span><span class="ident" id="3603016"><a href="/net/url/url.go.html#3591999">URL</a></span><span class="op" id="3603019">)</span>&nbsp;<span class="ident" id="3603021">Parse</span><span class="op" id="3603026">(</span><span class="ident" id="3603027">ref</span>&nbsp;<span class="builtintype" id="3603031">string</span><span class="op" id="3603037">)</span>&nbsp;<span class="op" id="3603039">(</span><span class="op" id="3603040">*</span><span class="ident" id="3603041"><a href="/net/url/url.go.html#3591999">URL</a></span><span class="op" id="3603044">,</span>&nbsp;<span class="builtintype" id="3603046">error</span><span class="op" id="3603051">)</span>&nbsp;<span class="op" id="3603053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603056">refurl</span><span class="op" id="3603062">,</span>&nbsp;<span class="ident" id="3603064">err</span>&nbsp;<span class="op" id="3603068">:=</span>&nbsp;<span class="ident" id="3603071"><a href="/net/url/url.go.html#3594974">Parse</a></span><span class="op" id="3603076">(</span><span class="ident" id="3603077"><a href="/net/url/url.go.html#3603027">ref</a></span><span class="op" id="3603080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603083">if</span>&nbsp;<span class="ident" id="3603086"><a href="/net/url/url.go.html#3603064">err</a></span>&nbsp;<span class="op" id="3603090">!=</span>&nbsp;<span class="ident" id="3603093">nil</span>&nbsp;<span class="op" id="3603097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603101">return</span>&nbsp;<span class="ident" id="3603108">nil</span><span class="op" id="3603111">,</span>&nbsp;<span class="ident" id="3603113"><a href="/net/url/url.go.html#3603064">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603118">}</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603121">return</span>&nbsp;<span class="ident" id="3603128"><a href="/net/url/url.go.html#3603013">u</a></span><span class="op" id="3603129">.</span><span class="ident" id="3603130">ResolveReference</span><span class="op" id="3603146">(</span><span class="ident" id="3603147"><a href="/net/url/url.go.html#3603056">refurl</a></span><span class="op" id="3603153">)</span><span class="op" id="3603154">,</span>&nbsp;<span class="ident" id="3603156">nil</span><br>
<span class="lineno"></span><span class="op" id="3603160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3603163">//&nbsp;ResolveReference&nbsp;resolves&nbsp;a&nbsp;URI&nbsp;reference&nbsp;to&nbsp;an&nbsp;absolute&nbsp;URI&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="3603232">//&nbsp;an&nbsp;absolute&nbsp;base&nbsp;URI,&nbsp;per&nbsp;RFC&nbsp;3986&nbsp;Section&nbsp;5.2.&nbsp;&nbsp;The&nbsp;URI&nbsp;reference</span><br>
<span class="lineno">660</span><span class="comment" id="3603302">//&nbsp;may&nbsp;be&nbsp;relative&nbsp;or&nbsp;absolute.&nbsp;&nbsp;ResolveReference&nbsp;always&nbsp;returns&nbsp;a&nbsp;new</span><br>
<span class="lineno"></span><span class="comment" id="3603373">//&nbsp;URL&nbsp;instance,&nbsp;even&nbsp;if&nbsp;the&nbsp;returned&nbsp;URL&nbsp;is&nbsp;identical&nbsp;to&nbsp;either&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3603442">//&nbsp;base&nbsp;or&nbsp;reference.&nbsp;If&nbsp;ref&nbsp;is&nbsp;an&nbsp;absolute&nbsp;URL,&nbsp;then&nbsp;ResolveReference</span><br>
<span class="lineno"></span><span class="comment" id="3603513">//&nbsp;ignores&nbsp;base&nbsp;and&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;ref.</span><br>
<span class="lineno"></span><span class="keyword" id="3603556">func</span>&nbsp;<span class="op" id="3603561">(</span><span class="ident" id="3603562">u</span>&nbsp;<span class="op" id="3603564">*</span><span class="ident" id="3603565"><a href="/net/url/url.go.html#3591999">URL</a></span><span class="op" id="3603568">)</span>&nbsp;<span class="ident" id="3603570">ResolveReference</span><span class="op" id="3603586">(</span><span class="ident" id="3603587">ref</span>&nbsp;<span class="op" id="3603591">*</span><span class="ident" id="3603592"><a href="/net/url/url.go.html#3591999">URL</a></span><span class="op" id="3603595">)</span>&nbsp;<span class="op" id="3603597">*</span><span class="ident" id="3603598"><a href="/net/url/url.go.html#3591999">URL</a></span>&nbsp;<span class="op" id="3603602">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603605">url</span>&nbsp;<span class="op" id="3603609">:=</span>&nbsp;<span class="op" id="3603612">*</span><span class="ident" id="3603613"><a href="/net/url/url.go.html#3603587">ref</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603618">if</span>&nbsp;<span class="ident" id="3603621"><a href="/net/url/url.go.html#3603587">ref</a></span><span class="op" id="3603624">.</span><span class="ident" id="3603625">Scheme</span>&nbsp;<span class="op" id="3603632">==</span>&nbsp;<span class="string" id="3603635">&#34;&#34;</span>&nbsp;<span class="op" id="3603638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603642"><a href="/net/url/url.go.html#3603605">url</a></span><span class="op" id="3603645">.</span><span class="ident" id="3603646">Scheme</span>&nbsp;<span class="op" id="3603653">=</span>&nbsp;<span class="ident" id="3603655"><a href="/net/url/url.go.html#3603562">u</a></span><span class="op" id="3603656">.</span><span class="ident" id="3603657">Scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603668">if</span>&nbsp;<span class="ident" id="3603671"><a href="/net/url/url.go.html#3603587">ref</a></span><span class="op" id="3603674">.</span><span class="ident" id="3603675">Scheme</span>&nbsp;<span class="op" id="3603682">!=</span>&nbsp;<span class="string" id="3603685">&#34;&#34;</span>&nbsp;<span class="op" id="3603688">||</span>&nbsp;<span class="ident" id="3603691"><a href="/net/url/url.go.html#3603587">ref</a></span><span class="op" id="3603694">.</span><span class="ident" id="3603695">Host</span>&nbsp;<span class="op" id="3603700">!=</span>&nbsp;<span class="string" id="3603703">&#34;&#34;</span>&nbsp;<span class="op" id="3603706">||</span>&nbsp;<span class="ident" id="3603709"><a href="/net/url/url.go.html#3603587">ref</a></span><span class="op" id="3603712">.</span><span class="ident" id="3603713">User</span>&nbsp;<span class="op" id="3603718">!=</span>&nbsp;<span class="ident" id="3603721">nil</span>&nbsp;<span class="op" id="3603725">{</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3603729">//&nbsp;The&nbsp;&#34;absoluteURI&#34;&nbsp;or&nbsp;&#34;net_path&#34;&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603773"><a href="/net/url/url.go.html#3603605">url</a></span><span class="op" id="3603776">.</span><span class="ident" id="3603777">Path</span>&nbsp;<span class="op" id="3603782">=</span>&nbsp;<span class="ident" id="3603784"><a href="/net/url/url.go.html#3602045">resolvePath</a></span><span class="op" id="3603795">(</span><span class="ident" id="3603796"><a href="/net/url/url.go.html#3603587">ref</a></span><span class="op" id="3603799">.</span><span class="ident" id="3603800">Path</span><span class="op" id="3603804">,</span>&nbsp;<span class="string" id="3603806">&#34;&#34;</span><span class="op" id="3603808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603812">return</span>&nbsp;<span class="op" id="3603819">&amp;</span><span class="ident" id="3603820"><a href="/net/url/url.go.html#3603605">url</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603828">if</span>&nbsp;<span class="ident" id="3603831"><a href="/net/url/url.go.html#3603587">ref</a></span><span class="op" id="3603834">.</span><span class="ident" id="3603835">Opaque</span>&nbsp;<span class="op" id="3603842">!=</span>&nbsp;<span class="string" id="3603845">&#34;&#34;</span>&nbsp;<span class="op" id="3603848">{</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603852"><a href="/net/url/url.go.html#3603605">url</a></span><span class="op" id="3603855">.</span><span class="ident" id="3603856">User</span>&nbsp;<span class="op" id="3603861">=</span>&nbsp;<span class="ident" id="3603863">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603869"><a href="/net/url/url.go.html#3603605">url</a></span><span class="op" id="3603872">.</span><span class="ident" id="3603873">Host</span>&nbsp;<span class="op" id="3603878">=</span>&nbsp;<span class="string" id="3603880">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603885"><a href="/net/url/url.go.html#3603605">url</a></span><span class="op" id="3603888">.</span><span class="ident" id="3603889">Path</span>&nbsp;<span class="op" id="3603894">=</span>&nbsp;<span class="string" id="3603896">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603901">return</span>&nbsp;<span class="op" id="3603908">&amp;</span><span class="ident" id="3603909"><a href="/net/url/url.go.html#3603605">url</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603914">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603917">if</span>&nbsp;<span class="ident" id="3603920"><a href="/net/url/url.go.html#3603587">ref</a></span><span class="op" id="3603923">.</span><span class="ident" id="3603924">Path</span>&nbsp;<span class="op" id="3603929">==</span>&nbsp;<span class="string" id="3603932">&#34;&#34;</span>&nbsp;<span class="op" id="3603935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603939">if</span>&nbsp;<span class="ident" id="3603942"><a href="/net/url/url.go.html#3603587">ref</a></span><span class="op" id="3603945">.</span><span class="ident" id="3603946">RawQuery</span>&nbsp;<span class="op" id="3603955">==</span>&nbsp;<span class="string" id="3603958">&#34;&#34;</span>&nbsp;<span class="op" id="3603961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603966"><a href="/net/url/url.go.html#3603605">url</a></span><span class="op" id="3603969">.</span><span class="ident" id="3603970">RawQuery</span>&nbsp;<span class="op" id="3603979">=</span>&nbsp;<span class="ident" id="3603981"><a href="/net/url/url.go.html#3603562">u</a></span><span class="op" id="3603982">.</span><span class="ident" id="3603983">RawQuery</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603995">if</span>&nbsp;<span class="ident" id="3603998"><a href="/net/url/url.go.html#3603587">ref</a></span><span class="op" id="3604001">.</span><span class="ident" id="3604002">Fragment</span>&nbsp;<span class="op" id="3604011">==</span>&nbsp;<span class="string" id="3604014">&#34;&#34;</span>&nbsp;<span class="op" id="3604017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604023"><a href="/net/url/url.go.html#3603605">url</a></span><span class="op" id="3604026">.</span><span class="ident" id="3604027">Fragment</span>&nbsp;<span class="op" id="3604036">=</span>&nbsp;<span class="ident" id="3604038"><a href="/net/url/url.go.html#3603562">u</a></span><span class="op" id="3604039">.</span><span class="ident" id="3604040">Fragment</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3604052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3604056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3604059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3604062">//&nbsp;The&nbsp;&#34;abs_path&#34;&nbsp;or&nbsp;&#34;rel_path&#34;&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604102"><a href="/net/url/url.go.html#3603605">url</a></span><span class="op" id="3604105">.</span><span class="ident" id="3604106">Host</span>&nbsp;<span class="op" id="3604111">=</span>&nbsp;<span class="ident" id="3604113"><a href="/net/url/url.go.html#3603562">u</a></span><span class="op" id="3604114">.</span><span class="ident" id="3604115">Host</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604121"><a href="/net/url/url.go.html#3603605">url</a></span><span class="op" id="3604124">.</span><span class="ident" id="3604125">User</span>&nbsp;<span class="op" id="3604130">=</span>&nbsp;<span class="ident" id="3604132"><a href="/net/url/url.go.html#3603562">u</a></span><span class="op" id="3604133">.</span><span class="ident" id="3604134">User</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604140"><a href="/net/url/url.go.html#3603605">url</a></span><span class="op" id="3604143">.</span><span class="ident" id="3604144">Path</span>&nbsp;<span class="op" id="3604149">=</span>&nbsp;<span class="ident" id="3604151"><a href="/net/url/url.go.html#3602045">resolvePath</a></span><span class="op" id="3604162">(</span><span class="ident" id="3604163"><a href="/net/url/url.go.html#3603562">u</a></span><span class="op" id="3604164">.</span><span class="ident" id="3604165">Path</span><span class="op" id="3604169">,</span>&nbsp;<span class="ident" id="3604171"><a href="/net/url/url.go.html#3603587">ref</a></span><span class="op" id="3604174">.</span><span class="ident" id="3604175">Path</span><span class="op" id="3604179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604182">return</span>&nbsp;<span class="op" id="3604189">&amp;</span><span class="ident" id="3604190"><a href="/net/url/url.go.html#3603605">url</a></span><br>
<span class="lineno"></span><span class="op" id="3604194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">695</span><span class="comment" id="3604197">//&nbsp;Query&nbsp;parses&nbsp;RawQuery&nbsp;and&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="3604260">func</span>&nbsp;<span class="op" id="3604265">(</span><span class="ident" id="3604266">u</span>&nbsp;<span class="op" id="3604268">*</span><span class="ident" id="3604269"><a href="/net/url/url.go.html#3591999">URL</a></span><span class="op" id="3604272">)</span>&nbsp;<span class="ident" id="3604274">Query</span><span class="op" id="3604279">(</span><span class="op" id="3604280">)</span>&nbsp;<span class="ident" id="3604282"><a href="/net/url/url.go.html#3599666">Values</a></span>&nbsp;<span class="op" id="3604289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604292">v</span><span class="op" id="3604293">,</span>&nbsp;<span class="ident" id="3604295">_</span>&nbsp;<span class="op" id="3604297">:=</span>&nbsp;<span class="ident" id="3604300"><a href="/net/url/url.go.html#3600713">ParseQuery</a></span><span class="op" id="3604310">(</span><span class="ident" id="3604311"><a href="/net/url/url.go.html#3604266">u</a></span><span class="op" id="3604312">.</span><span class="ident" id="3604313">RawQuery</span><span class="op" id="3604321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604324">return</span>&nbsp;<span class="ident" id="3604331"><a href="/net/url/url.go.html#3604292">v</a></span><br>
<span class="lineno"></span><span class="op" id="3604333">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="comment" id="3604336">//&nbsp;RequestURI&nbsp;returns&nbsp;the&nbsp;encoded&nbsp;path?query&nbsp;or&nbsp;opaque?query</span><br>
<span class="lineno"></span><span class="comment" id="3604397">//&nbsp;string&nbsp;that&nbsp;would&nbsp;be&nbsp;used&nbsp;in&nbsp;an&nbsp;HTTP&nbsp;request&nbsp;for&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="3604452">func</span>&nbsp;<span class="op" id="3604457">(</span><span class="ident" id="3604458">u</span>&nbsp;<span class="op" id="3604460">*</span><span class="ident" id="3604461"><a href="/net/url/url.go.html#3591999">URL</a></span><span class="op" id="3604464">)</span>&nbsp;<span class="ident" id="3604466">RequestURI</span><span class="op" id="3604476">(</span><span class="op" id="3604477">)</span>&nbsp;<span class="builtintype" id="3604479">string</span>&nbsp;<span class="op" id="3604486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604489">result</span>&nbsp;<span class="op" id="3604496">:=</span>&nbsp;<span class="ident" id="3604499"><a href="/net/url/url.go.html#3604458">u</a></span><span class="op" id="3604500">.</span><span class="ident" id="3604501">Opaque</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604509">if</span>&nbsp;<span class="ident" id="3604512"><a href="/net/url/url.go.html#3604489">result</a></span>&nbsp;<span class="op" id="3604519">==</span>&nbsp;<span class="string" id="3604522">&#34;&#34;</span>&nbsp;<span class="op" id="3604525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604529"><a href="/net/url/url.go.html#3604489">result</a></span>&nbsp;<span class="op" id="3604536">=</span>&nbsp;<span class="ident" id="3604538"><a href="/net/url/url.go.html#3590511">escape</a></span><span class="op" id="3604544">(</span><span class="ident" id="3604545"><a href="/net/url/url.go.html#3604458">u</a></span><span class="op" id="3604546">.</span><span class="ident" id="3604547">Path</span><span class="op" id="3604551">,</span>&nbsp;<span class="ident" id="3604553"><a href="/net/url/url.go.html#3587412">encodePath</a></span><span class="op" id="3604563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604567">if</span>&nbsp;<span class="ident" id="3604570"><a href="/net/url/url.go.html#3604489">result</a></span>&nbsp;<span class="op" id="3604577">==</span>&nbsp;<span class="string" id="3604580">&#34;&#34;</span>&nbsp;<span class="op" id="3604583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604588"><a href="/net/url/url.go.html#3604489">result</a></span>&nbsp;<span class="op" id="3604595">=</span>&nbsp;<span class="string" id="3604597">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3604603">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3604606">}</span>&nbsp;<span class="keyword" id="3604608">else</span>&nbsp;<span class="op" id="3604613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604617">if</span>&nbsp;<span class="ident" id="3604620"><a href="/net/url/url.go.html#3586781">strings</a></span><span class="op" id="3604627">.</span><span class="ident" id="3604628">HasPrefix</span><span class="op" id="3604637">(</span><span class="ident" id="3604638"><a href="/net/url/url.go.html#3604489">result</a></span><span class="op" id="3604644">,</span>&nbsp;<span class="string" id="3604646">&#34;//&#34;</span><span class="op" id="3604650">)</span>&nbsp;<span class="op" id="3604652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604657"><a href="/net/url/url.go.html#3604489">result</a></span>&nbsp;<span class="op" id="3604664">=</span>&nbsp;<span class="ident" id="3604666"><a href="/net/url/url.go.html#3604458">u</a></span><span class="op" id="3604667">.</span><span class="ident" id="3604668">Scheme</span>&nbsp;<span class="op" id="3604675">+</span>&nbsp;<span class="string" id="3604677">&#34;:&#34;</span>&nbsp;<span class="op" id="3604681">+</span>&nbsp;<span class="ident" id="3604683"><a href="/net/url/url.go.html#3604489">result</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3604692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3604695">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604698">if</span>&nbsp;<span class="ident" id="3604701"><a href="/net/url/url.go.html#3604458">u</a></span><span class="op" id="3604702">.</span><span class="ident" id="3604703">RawQuery</span>&nbsp;<span class="op" id="3604712">!=</span>&nbsp;<span class="string" id="3604715">&#34;&#34;</span>&nbsp;<span class="op" id="3604718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3604722"><a href="/net/url/url.go.html#3604489">result</a></span>&nbsp;<span class="op" id="3604729">+=</span>&nbsp;<span class="string" id="3604732">&#34;?&#34;</span>&nbsp;<span class="op" id="3604736">+</span>&nbsp;<span class="ident" id="3604738"><a href="/net/url/url.go.html#3604458">u</a></span><span class="op" id="3604739">.</span><span class="ident" id="3604740">RawQuery</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3604750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3604753">return</span>&nbsp;<span class="ident" id="3604760"><a href="/net/url/url.go.html#3604489">result</a></span><br>
<span class="lineno"></span><span class="op" id="3604767">}</span>
</div>
</body>
</html>
