<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7634755">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7634811">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7634865">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7634916">package</span>&nbsp;<span class="ident" id="7634924">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7634933">//&nbsp;MakeRO&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;read-only&nbsp;flag&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="7634992">func</span>&nbsp;<span class="ident" id="7634997">MakeRO</span><span class="op" id="7635003">(</span><span class="ident" id="7635004">v</span>&nbsp;<span class="ident" id="7635006">Value</span><span class="op" id="7635011">)</span>&nbsp;<span class="ident" id="7635013">Value</span>&nbsp;<span class="op" id="7635019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635022">v</span><span class="op" id="7635023">.</span><span class="ident" id="7635024">flag</span>&nbsp;<span class="op" id="7635029">|=</span>&nbsp;<span class="ident" id="7635032">flagRO</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635040">return</span>&nbsp;<span class="ident" id="7635047">v</span><br>
<span class="lineno"></span><span class="op" id="7635049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7635052">//&nbsp;IsRO&nbsp;reports&nbsp;whether&nbsp;v&#39;s&nbsp;read-only&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="7635103">func</span>&nbsp;<span class="ident" id="7635108">IsRO</span><span class="op" id="7635112">(</span><span class="ident" id="7635113">v</span>&nbsp;<span class="ident" id="7635115">Value</span><span class="op" id="7635120">)</span>&nbsp;<span class="builtintype" id="7635122">bool</span>&nbsp;<span class="op" id="7635127">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635130">return</span>&nbsp;<span class="ident" id="7635137">v</span><span class="op" id="7635138">.</span><span class="ident" id="7635139">flag</span><span class="op" id="7635143">&amp;</span><span class="ident" id="7635144">flagRO</span>&nbsp;<span class="op" id="7635151">!=</span>&nbsp;<span class="num" id="7635154">0</span><br>
<span class="lineno"></span><span class="op" id="7635156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7635159">var</span>&nbsp;<span class="ident" id="7635163">ArrayOf</span>&nbsp;<span class="op" id="7635171">=</span>&nbsp;<span class="ident" id="7635173">arrayOf</span><br>
<span class="lineno"></span><span class="keyword" id="7635181">var</span>&nbsp;<span class="ident" id="7635185">CallGC</span>&nbsp;<span class="op" id="7635192">=</span>&nbsp;<span class="op" id="7635194">&amp;</span><span class="ident" id="7635195">callGC</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7635203">const</span>&nbsp;<span class="ident" id="7635209">PtrSize</span>&nbsp;<span class="op" id="7635217">=</span>&nbsp;<span class="ident" id="7635219">ptrSize</span><br>
<span class="lineno"></span><span class="keyword" id="7635227">const</span>&nbsp;<span class="ident" id="7635233">BitsPointer</span>&nbsp;<span class="op" id="7635245">=</span>&nbsp;<span class="ident" id="7635247">bitsPointer</span><br>
<span class="lineno"></span><span class="keyword" id="7635259">const</span>&nbsp;<span class="ident" id="7635265">BitsScalar</span>&nbsp;<span class="op" id="7635276">=</span>&nbsp;<span class="ident" id="7635278">bitsScalar</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7635290">func</span>&nbsp;<span class="ident" id="7635295">FuncLayout</span><span class="op" id="7635305">(</span><span class="ident" id="7635306">t</span>&nbsp;<span class="ident" id="7635308">Type</span><span class="op" id="7635312">,</span>&nbsp;<span class="ident" id="7635314">rcvr</span>&nbsp;<span class="ident" id="7635319">Type</span><span class="op" id="7635323">)</span>&nbsp;<span class="op" id="7635325">(</span><span class="ident" id="7635326">frametype</span>&nbsp;<span class="ident" id="7635336">Type</span><span class="op" id="7635340">,</span>&nbsp;<span class="ident" id="7635342">argSize</span><span class="op" id="7635349">,</span>&nbsp;<span class="ident" id="7635351">retOffset</span>&nbsp;<span class="builtintype" id="7635361">uintptr</span><span class="op" id="7635368">,</span>&nbsp;<span class="ident" id="7635370">stack</span>&nbsp;<span class="op" id="7635376">[</span><span class="op" id="7635377">]</span><span class="builtintype" id="7635378">byte</span><span class="op" id="7635382">)</span>&nbsp;<span class="op" id="7635384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635387">var</span>&nbsp;<span class="ident" id="7635391">ft</span>&nbsp;<span class="op" id="7635394">*</span><span class="ident" id="7635395">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635402">var</span>&nbsp;<span class="ident" id="7635406">s</span>&nbsp;<span class="op" id="7635408">*</span><span class="ident" id="7635409">bitVector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635420">if</span>&nbsp;<span class="ident" id="7635423">rcvr</span>&nbsp;<span class="op" id="7635428">!=</span>&nbsp;<span class="ident" id="7635431">nil</span>&nbsp;<span class="op" id="7635435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635439">ft</span><span class="op" id="7635441">,</span>&nbsp;<span class="ident" id="7635443">argSize</span><span class="op" id="7635450">,</span>&nbsp;<span class="ident" id="7635452">retOffset</span><span class="op" id="7635461">,</span>&nbsp;<span class="ident" id="7635463">s</span>&nbsp;<span class="op" id="7635465">=</span>&nbsp;<span class="ident" id="7635467">funcLayout</span><span class="op" id="7635477">(</span><span class="ident" id="7635478">t</span><span class="op" id="7635479">.</span><span class="op" id="7635480">(</span><span class="op" id="7635481">*</span><span class="ident" id="7635482">rtype</span><span class="op" id="7635487">)</span><span class="op" id="7635488">,</span>&nbsp;<span class="ident" id="7635490">rcvr</span><span class="op" id="7635494">.</span><span class="op" id="7635495">(</span><span class="op" id="7635496">*</span><span class="ident" id="7635497">rtype</span><span class="op" id="7635502">)</span><span class="op" id="7635503">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635506">}</span>&nbsp;<span class="keyword" id="7635508">else</span>&nbsp;<span class="op" id="7635513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635517">ft</span><span class="op" id="7635519">,</span>&nbsp;<span class="ident" id="7635521">argSize</span><span class="op" id="7635528">,</span>&nbsp;<span class="ident" id="7635530">retOffset</span><span class="op" id="7635539">,</span>&nbsp;<span class="ident" id="7635541">s</span>&nbsp;<span class="op" id="7635543">=</span>&nbsp;<span class="ident" id="7635545">funcLayout</span><span class="op" id="7635555">(</span><span class="ident" id="7635556">t</span><span class="op" id="7635557">.</span><span class="op" id="7635558">(</span><span class="op" id="7635559">*</span><span class="ident" id="7635560">rtype</span><span class="op" id="7635565">)</span><span class="op" id="7635566">,</span>&nbsp;<span class="ident" id="7635568">nil</span><span class="op" id="7635571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635577">frametype</span>&nbsp;<span class="op" id="7635587">=</span>&nbsp;<span class="ident" id="7635589">ft</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635593">for</span>&nbsp;<span class="ident" id="7635597">i</span>&nbsp;<span class="op" id="7635599">:=</span>&nbsp;<span class="builtintype" id="7635602">uint32</span><span class="op" id="7635608">(</span><span class="num" id="7635609">0</span><span class="op" id="7635610">)</span><span class="op" id="7635611">;</span>&nbsp;<span class="ident" id="7635613">i</span>&nbsp;<span class="op" id="7635615">&lt;</span>&nbsp;<span class="ident" id="7635617">s</span><span class="op" id="7635618">.</span><span class="ident" id="7635619">n</span><span class="op" id="7635620">;</span>&nbsp;<span class="ident" id="7635622">i</span>&nbsp;<span class="op" id="7635624">+=</span>&nbsp;<span class="num" id="7635627">2</span>&nbsp;<span class="op" id="7635629">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635633">stack</span>&nbsp;<span class="op" id="7635639">=</span>&nbsp;<span class="builtinfunc" id="7635641">append</span><span class="op" id="7635647">(</span><span class="ident" id="7635648">stack</span><span class="op" id="7635653">,</span>&nbsp;<span class="ident" id="7635655">s</span><span class="op" id="7635656">.</span><span class="ident" id="7635657">data</span><span class="op" id="7635661">[</span><span class="ident" id="7635662">i</span><span class="op" id="7635663">/</span><span class="num" id="7635664">8</span><span class="op" id="7635665">]</span><span class="op" id="7635666">&gt;&gt;</span><span class="op" id="7635668">(</span><span class="ident" id="7635669">i</span><span class="op" id="7635670">%</span><span class="num" id="7635671">8</span><span class="op" id="7635672">)</span><span class="op" id="7635673">&amp;</span><span class="num" id="7635674">3</span><span class="op" id="7635675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635681">return</span><br>
<span class="lineno"></span><span class="op" id="7635688">}</span>
</div>
</body>
</html>
