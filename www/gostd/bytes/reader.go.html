<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2900932">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2900987">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2901041">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2901092">package</span>&nbsp;<span class="ident" id="2901100">bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2901107">import</span>&nbsp;<span class="op" id="2901114">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2901117">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2901127">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2901133">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2901148">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2901151">//&nbsp;A&nbsp;Reader&nbsp;implements&nbsp;the&nbsp;io.Reader,&nbsp;io.ReaderAt,&nbsp;io.WriterTo,&nbsp;io.Seeker,</span><br>
<span class="lineno"></span><span class="comment" id="2901226">//&nbsp;io.ByteScanner,&nbsp;and&nbsp;io.RuneScanner&nbsp;interfaces&nbsp;by&nbsp;reading&nbsp;from</span><br>
<span class="lineno">15</span><span class="comment" id="2901291">//&nbsp;a&nbsp;byte&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2901308">//&nbsp;Unlike&nbsp;a&nbsp;Buffer,&nbsp;a&nbsp;Reader&nbsp;is&nbsp;read-only&nbsp;and&nbsp;supports&nbsp;seeking.</span><br>
<span class="lineno"></span><span class="keyword" id="2901372">type</span>&nbsp;<span class="ident" id="2901377">Reader</span>&nbsp;<span class="keyword" id="2901384">struct</span>&nbsp;<span class="op" id="2901391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901394">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2901403">[</span><span class="op" id="2901404">]</span><span class="builtintype" id="2901405">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901411">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901420">int64</span>&nbsp;<span class="comment" id="2901426">//&nbsp;current&nbsp;reading&nbsp;index</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901452">prevRune</span>&nbsp;<span class="builtintype" id="2901461">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2901467">//&nbsp;index&nbsp;of&nbsp;previous&nbsp;rune;&nbsp;or&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="op" id="2901501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2901504">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;of&nbsp;the&nbsp;unread&nbsp;portion&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2901568">//&nbsp;slice.</span><br>
<span class="lineno">25</span><span class="keyword" id="2901578">func</span>&nbsp;<span class="op" id="2901583">(</span><span class="ident" id="2901584">r</span>&nbsp;<span class="op" id="2901586">*</span><span class="ident" id="2901587">Reader</span><span class="op" id="2901593">)</span>&nbsp;<span class="ident" id="2901595">Len</span><span class="op" id="2901598">(</span><span class="op" id="2901599">)</span>&nbsp;<span class="builtintype" id="2901601">int</span>&nbsp;<span class="op" id="2901605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901608">if</span>&nbsp;<span class="ident" id="2901611">r</span><span class="op" id="2901612">.</span><span class="ident" id="2901613">i</span>&nbsp;<span class="op" id="2901615">&gt;=</span>&nbsp;<span class="ident" id="2901618">int64</span><span class="op" id="2901623">(</span><span class="builtinfunc" id="2901624">len</span><span class="op" id="2901627">(</span><span class="ident" id="2901628">r</span><span class="op" id="2901629">.</span><span class="ident" id="2901630">s</span><span class="op" id="2901631">)</span><span class="op" id="2901632">)</span>&nbsp;<span class="op" id="2901634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901638">return</span>&nbsp;<span class="num" id="2901645">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901651">return</span>&nbsp;<span class="builtintype" id="2901658">int</span><span class="op" id="2901661">(</span><span class="ident" id="2901662">int64</span><span class="op" id="2901667">(</span><span class="builtinfunc" id="2901668">len</span><span class="op" id="2901671">(</span><span class="ident" id="2901672">r</span><span class="op" id="2901673">.</span><span class="ident" id="2901674">s</span><span class="op" id="2901675">)</span><span class="op" id="2901676">)</span>&nbsp;<span class="op" id="2901678">-</span>&nbsp;<span class="ident" id="2901680">r</span><span class="op" id="2901681">.</span><span class="ident" id="2901682">i</span><span class="op" id="2901683">)</span><br>
<span class="lineno">30</span><span class="op" id="2901685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2901688">func</span>&nbsp;<span class="op" id="2901693">(</span><span class="ident" id="2901694">r</span>&nbsp;<span class="op" id="2901696">*</span><span class="ident" id="2901697">Reader</span><span class="op" id="2901703">)</span>&nbsp;<span class="ident" id="2901705">Read</span><span class="op" id="2901709">(</span><span class="ident" id="2901710">b</span>&nbsp;<span class="op" id="2901712">[</span><span class="op" id="2901713">]</span><span class="builtintype" id="2901714">byte</span><span class="op" id="2901718">)</span>&nbsp;<span class="op" id="2901720">(</span><span class="ident" id="2901721">n</span>&nbsp;<span class="builtintype" id="2901723">int</span><span class="op" id="2901726">,</span>&nbsp;<span class="ident" id="2901728">err</span>&nbsp;<span class="builtintype" id="2901732">error</span><span class="op" id="2901737">)</span>&nbsp;<span class="op" id="2901739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901742">if</span>&nbsp;<span class="builtinfunc" id="2901745">len</span><span class="op" id="2901748">(</span><span class="ident" id="2901749">b</span><span class="op" id="2901750">)</span>&nbsp;<span class="op" id="2901752">==</span>&nbsp;<span class="num" id="2901755">0</span>&nbsp;<span class="op" id="2901757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901761">return</span>&nbsp;<span class="num" id="2901768">0</span><span class="op" id="2901769">,</span>&nbsp;<span class="ident" id="2901771">nil</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901779">if</span>&nbsp;<span class="ident" id="2901782">r</span><span class="op" id="2901783">.</span><span class="ident" id="2901784">i</span>&nbsp;<span class="op" id="2901786">&gt;=</span>&nbsp;<span class="ident" id="2901789">int64</span><span class="op" id="2901794">(</span><span class="builtinfunc" id="2901795">len</span><span class="op" id="2901798">(</span><span class="ident" id="2901799">r</span><span class="op" id="2901800">.</span><span class="ident" id="2901801">s</span><span class="op" id="2901802">)</span><span class="op" id="2901803">)</span>&nbsp;<span class="op" id="2901805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901809">return</span>&nbsp;<span class="num" id="2901816">0</span><span class="op" id="2901817">,</span>&nbsp;<span class="ident" id="2901819">io</span><span class="op" id="2901821">.</span><span class="ident" id="2901822">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901830">r</span><span class="op" id="2901831">.</span><span class="ident" id="2901832">prevRune</span>&nbsp;<span class="op" id="2901841">=</span>&nbsp;<span class="op" id="2901843">-</span><span class="num" id="2901844">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901847">n</span>&nbsp;<span class="op" id="2901849">=</span>&nbsp;<span class="builtinfunc" id="2901851">copy</span><span class="op" id="2901855">(</span><span class="ident" id="2901856">b</span><span class="op" id="2901857">,</span>&nbsp;<span class="ident" id="2901859">r</span><span class="op" id="2901860">.</span><span class="ident" id="2901861">s</span><span class="op" id="2901862">[</span><span class="ident" id="2901863">r</span><span class="op" id="2901864">.</span><span class="ident" id="2901865">i</span><span class="op" id="2901866">:</span><span class="op" id="2901867">]</span><span class="op" id="2901868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901871">r</span><span class="op" id="2901872">.</span><span class="ident" id="2901873">i</span>&nbsp;<span class="op" id="2901875">+=</span>&nbsp;<span class="ident" id="2901878">int64</span><span class="op" id="2901883">(</span><span class="ident" id="2901884">n</span><span class="op" id="2901885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901888">return</span><br>
<span class="lineno"></span><span class="op" id="2901895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="2901898">func</span>&nbsp;<span class="op" id="2901903">(</span><span class="ident" id="2901904">r</span>&nbsp;<span class="op" id="2901906">*</span><span class="ident" id="2901907">Reader</span><span class="op" id="2901913">)</span>&nbsp;<span class="ident" id="2901915">ReadAt</span><span class="op" id="2901921">(</span><span class="ident" id="2901922">b</span>&nbsp;<span class="op" id="2901924">[</span><span class="op" id="2901925">]</span><span class="builtintype" id="2901926">byte</span><span class="op" id="2901930">,</span>&nbsp;<span class="ident" id="2901932">off</span>&nbsp;<span class="ident" id="2901936">int64</span><span class="op" id="2901941">)</span>&nbsp;<span class="op" id="2901943">(</span><span class="ident" id="2901944">n</span>&nbsp;<span class="builtintype" id="2901946">int</span><span class="op" id="2901949">,</span>&nbsp;<span class="ident" id="2901951">err</span>&nbsp;<span class="builtintype" id="2901955">error</span><span class="op" id="2901960">)</span>&nbsp;<span class="op" id="2901962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901965">//&nbsp;cannot&nbsp;modify&nbsp;state&nbsp;-&nbsp;see&nbsp;io.ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902007">if</span>&nbsp;<span class="ident" id="2902010">off</span>&nbsp;<span class="op" id="2902014">&lt;</span>&nbsp;<span class="num" id="2902016">0</span>&nbsp;<span class="op" id="2902018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902022">return</span>&nbsp;<span class="num" id="2902029">0</span><span class="op" id="2902030">,</span>&nbsp;<span class="ident" id="2902032">errors</span><span class="op" id="2902038">.</span><span class="ident" id="2902039">New</span><span class="op" id="2902042">(</span><span class="string" id="2902043">&#34;bytes.Reader.ReadAt:&nbsp;negative&nbsp;offset&#34;</span><span class="op" id="2902081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902084">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902087">if</span>&nbsp;<span class="ident" id="2902090">off</span>&nbsp;<span class="op" id="2902094">&gt;=</span>&nbsp;<span class="ident" id="2902097">int64</span><span class="op" id="2902102">(</span><span class="builtinfunc" id="2902103">len</span><span class="op" id="2902106">(</span><span class="ident" id="2902107">r</span><span class="op" id="2902108">.</span><span class="ident" id="2902109">s</span><span class="op" id="2902110">)</span><span class="op" id="2902111">)</span>&nbsp;<span class="op" id="2902113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902117">return</span>&nbsp;<span class="num" id="2902124">0</span><span class="op" id="2902125">,</span>&nbsp;<span class="ident" id="2902127">io</span><span class="op" id="2902129">.</span><span class="ident" id="2902130">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902138">n</span>&nbsp;<span class="op" id="2902140">=</span>&nbsp;<span class="builtinfunc" id="2902142">copy</span><span class="op" id="2902146">(</span><span class="ident" id="2902147">b</span><span class="op" id="2902148">,</span>&nbsp;<span class="ident" id="2902150">r</span><span class="op" id="2902151">.</span><span class="ident" id="2902152">s</span><span class="op" id="2902153">[</span><span class="ident" id="2902154">off</span><span class="op" id="2902157">:</span><span class="op" id="2902158">]</span><span class="op" id="2902159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902162">if</span>&nbsp;<span class="ident" id="2902165">n</span>&nbsp;<span class="op" id="2902167">&lt;</span>&nbsp;<span class="builtinfunc" id="2902169">len</span><span class="op" id="2902172">(</span><span class="ident" id="2902173">b</span><span class="op" id="2902174">)</span>&nbsp;<span class="op" id="2902176">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902180">err</span>&nbsp;<span class="op" id="2902184">=</span>&nbsp;<span class="ident" id="2902186">io</span><span class="op" id="2902188">.</span><span class="ident" id="2902189">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902197">return</span><br>
<span class="lineno"></span><span class="op" id="2902204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="2902207">func</span>&nbsp;<span class="op" id="2902212">(</span><span class="ident" id="2902213">r</span>&nbsp;<span class="op" id="2902215">*</span><span class="ident" id="2902216">Reader</span><span class="op" id="2902222">)</span>&nbsp;<span class="ident" id="2902224">ReadByte</span><span class="op" id="2902232">(</span><span class="op" id="2902233">)</span>&nbsp;<span class="op" id="2902235">(</span><span class="ident" id="2902236">b</span>&nbsp;<span class="builtintype" id="2902238">byte</span><span class="op" id="2902242">,</span>&nbsp;<span class="ident" id="2902244">err</span>&nbsp;<span class="builtintype" id="2902248">error</span><span class="op" id="2902253">)</span>&nbsp;<span class="op" id="2902255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902258">r</span><span class="op" id="2902259">.</span><span class="ident" id="2902260">prevRune</span>&nbsp;<span class="op" id="2902269">=</span>&nbsp;<span class="op" id="2902271">-</span><span class="num" id="2902272">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902275">if</span>&nbsp;<span class="ident" id="2902278">r</span><span class="op" id="2902279">.</span><span class="ident" id="2902280">i</span>&nbsp;<span class="op" id="2902282">&gt;=</span>&nbsp;<span class="ident" id="2902285">int64</span><span class="op" id="2902290">(</span><span class="builtinfunc" id="2902291">len</span><span class="op" id="2902294">(</span><span class="ident" id="2902295">r</span><span class="op" id="2902296">.</span><span class="ident" id="2902297">s</span><span class="op" id="2902298">)</span><span class="op" id="2902299">)</span>&nbsp;<span class="op" id="2902301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902305">return</span>&nbsp;<span class="num" id="2902312">0</span><span class="op" id="2902313">,</span>&nbsp;<span class="ident" id="2902315">io</span><span class="op" id="2902317">.</span><span class="ident" id="2902318">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902323">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902326">b</span>&nbsp;<span class="op" id="2902328">=</span>&nbsp;<span class="ident" id="2902330">r</span><span class="op" id="2902331">.</span><span class="ident" id="2902332">s</span><span class="op" id="2902333">[</span><span class="ident" id="2902334">r</span><span class="op" id="2902335">.</span><span class="ident" id="2902336">i</span><span class="op" id="2902337">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902340">r</span><span class="op" id="2902341">.</span><span class="ident" id="2902342">i</span><span class="op" id="2902343">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902347">return</span><br>
<span class="lineno"></span><span class="op" id="2902354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="2902357">func</span>&nbsp;<span class="op" id="2902362">(</span><span class="ident" id="2902363">r</span>&nbsp;<span class="op" id="2902365">*</span><span class="ident" id="2902366">Reader</span><span class="op" id="2902372">)</span>&nbsp;<span class="ident" id="2902374">UnreadByte</span><span class="op" id="2902384">(</span><span class="op" id="2902385">)</span>&nbsp;<span class="builtintype" id="2902387">error</span>&nbsp;<span class="op" id="2902393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902396">r</span><span class="op" id="2902397">.</span><span class="ident" id="2902398">prevRune</span>&nbsp;<span class="op" id="2902407">=</span>&nbsp;<span class="op" id="2902409">-</span><span class="num" id="2902410">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902413">if</span>&nbsp;<span class="ident" id="2902416">r</span><span class="op" id="2902417">.</span><span class="ident" id="2902418">i</span>&nbsp;<span class="op" id="2902420">&lt;=</span>&nbsp;<span class="num" id="2902423">0</span>&nbsp;<span class="op" id="2902425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902429">return</span>&nbsp;<span class="ident" id="2902436">errors</span><span class="op" id="2902442">.</span><span class="ident" id="2902443">New</span><span class="op" id="2902446">(</span><span class="string" id="2902447">&#34;bytes.Reader.UnreadByte:&nbsp;at&nbsp;beginning&nbsp;of&nbsp;slice&#34;</span><span class="op" id="2902495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902498">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902501">r</span><span class="op" id="2902502">.</span><span class="ident" id="2902503">i</span><span class="op" id="2902504">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902508">return</span>&nbsp;<span class="ident" id="2902515">nil</span><br>
<span class="lineno"></span><span class="op" id="2902519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2902522">func</span>&nbsp;<span class="op" id="2902527">(</span><span class="ident" id="2902528">r</span>&nbsp;<span class="op" id="2902530">*</span><span class="ident" id="2902531">Reader</span><span class="op" id="2902537">)</span>&nbsp;<span class="ident" id="2902539">ReadRune</span><span class="op" id="2902547">(</span><span class="op" id="2902548">)</span>&nbsp;<span class="op" id="2902550">(</span><span class="ident" id="2902551">ch</span>&nbsp;<span class="builtintype" id="2902554">rune</span><span class="op" id="2902558">,</span>&nbsp;<span class="ident" id="2902560">size</span>&nbsp;<span class="builtintype" id="2902565">int</span><span class="op" id="2902568">,</span>&nbsp;<span class="ident" id="2902570">err</span>&nbsp;<span class="builtintype" id="2902574">error</span><span class="op" id="2902579">)</span>&nbsp;<span class="op" id="2902581">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902584">if</span>&nbsp;<span class="ident" id="2902587">r</span><span class="op" id="2902588">.</span><span class="ident" id="2902589">i</span>&nbsp;<span class="op" id="2902591">&gt;=</span>&nbsp;<span class="ident" id="2902594">int64</span><span class="op" id="2902599">(</span><span class="builtinfunc" id="2902600">len</span><span class="op" id="2902603">(</span><span class="ident" id="2902604">r</span><span class="op" id="2902605">.</span><span class="ident" id="2902606">s</span><span class="op" id="2902607">)</span><span class="op" id="2902608">)</span>&nbsp;<span class="op" id="2902610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902614">r</span><span class="op" id="2902615">.</span><span class="ident" id="2902616">prevRune</span>&nbsp;<span class="op" id="2902625">=</span>&nbsp;<span class="op" id="2902627">-</span><span class="num" id="2902628">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902632">return</span>&nbsp;<span class="num" id="2902639">0</span><span class="op" id="2902640">,</span>&nbsp;<span class="num" id="2902642">0</span><span class="op" id="2902643">,</span>&nbsp;<span class="ident" id="2902645">io</span><span class="op" id="2902647">.</span><span class="ident" id="2902648">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902656">r</span><span class="op" id="2902657">.</span><span class="ident" id="2902658">prevRune</span>&nbsp;<span class="op" id="2902667">=</span>&nbsp;<span class="builtintype" id="2902669">int</span><span class="op" id="2902672">(</span><span class="ident" id="2902673">r</span><span class="op" id="2902674">.</span><span class="ident" id="2902675">i</span><span class="op" id="2902676">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902679">if</span>&nbsp;<span class="ident" id="2902682">c</span>&nbsp;<span class="op" id="2902684">:=</span>&nbsp;<span class="ident" id="2902687">r</span><span class="op" id="2902688">.</span><span class="ident" id="2902689">s</span><span class="op" id="2902690">[</span><span class="ident" id="2902691">r</span><span class="op" id="2902692">.</span><span class="ident" id="2902693">i</span><span class="op" id="2902694">]</span><span class="op" id="2902695">;</span>&nbsp;<span class="ident" id="2902697">c</span>&nbsp;<span class="op" id="2902699">&lt;</span>&nbsp;<span class="ident" id="2902701">utf8</span><span class="op" id="2902705">.</span><span class="ident" id="2902706">RuneSelf</span>&nbsp;<span class="op" id="2902715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902719">r</span><span class="op" id="2902720">.</span><span class="ident" id="2902721">i</span><span class="op" id="2902722">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902727">return</span>&nbsp;<span class="builtintype" id="2902734">rune</span><span class="op" id="2902738">(</span><span class="ident" id="2902739">c</span><span class="op" id="2902740">)</span><span class="op" id="2902741">,</span>&nbsp;<span class="num" id="2902743">1</span><span class="op" id="2902744">,</span>&nbsp;<span class="ident" id="2902746">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902754">ch</span><span class="op" id="2902756">,</span>&nbsp;<span class="ident" id="2902758">size</span>&nbsp;<span class="op" id="2902763">=</span>&nbsp;<span class="ident" id="2902765">utf8</span><span class="op" id="2902769">.</span><span class="ident" id="2902770">DecodeRune</span><span class="op" id="2902780">(</span><span class="ident" id="2902781">r</span><span class="op" id="2902782">.</span><span class="ident" id="2902783">s</span><span class="op" id="2902784">[</span><span class="ident" id="2902785">r</span><span class="op" id="2902786">.</span><span class="ident" id="2902787">i</span><span class="op" id="2902788">:</span><span class="op" id="2902789">]</span><span class="op" id="2902790">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902793">r</span><span class="op" id="2902794">.</span><span class="ident" id="2902795">i</span>&nbsp;<span class="op" id="2902797">+=</span>&nbsp;<span class="ident" id="2902800">int64</span><span class="op" id="2902805">(</span><span class="ident" id="2902806">size</span><span class="op" id="2902810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902813">return</span><br>
<span class="lineno"></span><span class="op" id="2902820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2902823">func</span>&nbsp;<span class="op" id="2902828">(</span><span class="ident" id="2902829">r</span>&nbsp;<span class="op" id="2902831">*</span><span class="ident" id="2902832">Reader</span><span class="op" id="2902838">)</span>&nbsp;<span class="ident" id="2902840">UnreadRune</span><span class="op" id="2902850">(</span><span class="op" id="2902851">)</span>&nbsp;<span class="builtintype" id="2902853">error</span>&nbsp;<span class="op" id="2902859">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902862">if</span>&nbsp;<span class="ident" id="2902865">r</span><span class="op" id="2902866">.</span><span class="ident" id="2902867">prevRune</span>&nbsp;<span class="op" id="2902876">&lt;</span>&nbsp;<span class="num" id="2902878">0</span>&nbsp;<span class="op" id="2902880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902884">return</span>&nbsp;<span class="ident" id="2902891">errors</span><span class="op" id="2902897">.</span><span class="ident" id="2902898">New</span><span class="op" id="2902901">(</span><span class="string" id="2902902">&#34;bytes.Reader.UnreadRune:&nbsp;previous&nbsp;operation&nbsp;was&nbsp;not&nbsp;ReadRune&#34;</span><span class="op" id="2902964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902970">r</span><span class="op" id="2902971">.</span><span class="ident" id="2902972">i</span>&nbsp;<span class="op" id="2902974">=</span>&nbsp;<span class="ident" id="2902976">int64</span><span class="op" id="2902981">(</span><span class="ident" id="2902982">r</span><span class="op" id="2902983">.</span><span class="ident" id="2902984">prevRune</span><span class="op" id="2902992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902995">r</span><span class="op" id="2902996">.</span><span class="ident" id="2902997">prevRune</span>&nbsp;<span class="op" id="2903006">=</span>&nbsp;<span class="op" id="2903008">-</span><span class="num" id="2903009">1</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903012">return</span>&nbsp;<span class="ident" id="2903019">nil</span><br>
<span class="lineno"></span><span class="op" id="2903023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903026">//&nbsp;Seek&nbsp;implements&nbsp;the&nbsp;io.Seeker&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2903070">func</span>&nbsp;<span class="op" id="2903075">(</span><span class="ident" id="2903076">r</span>&nbsp;<span class="op" id="2903078">*</span><span class="ident" id="2903079">Reader</span><span class="op" id="2903085">)</span>&nbsp;<span class="ident" id="2903087">Seek</span><span class="op" id="2903091">(</span><span class="ident" id="2903092">offset</span>&nbsp;<span class="ident" id="2903099">int64</span><span class="op" id="2903104">,</span>&nbsp;<span class="ident" id="2903106">whence</span>&nbsp;<span class="builtintype" id="2903113">int</span><span class="op" id="2903116">)</span>&nbsp;<span class="op" id="2903118">(</span><span class="ident" id="2903119">int64</span><span class="op" id="2903124">,</span>&nbsp;<span class="builtintype" id="2903126">error</span><span class="op" id="2903131">)</span>&nbsp;<span class="op" id="2903133">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903136">r</span><span class="op" id="2903137">.</span><span class="ident" id="2903138">prevRune</span>&nbsp;<span class="op" id="2903147">=</span>&nbsp;<span class="op" id="2903149">-</span><span class="num" id="2903150">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903153">var</span>&nbsp;<span class="ident" id="2903157">abs</span>&nbsp;<span class="ident" id="2903161">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903168">switch</span>&nbsp;<span class="ident" id="2903175">whence</span>&nbsp;<span class="op" id="2903182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903185">case</span>&nbsp;<span class="num" id="2903190">0</span><span class="op" id="2903191">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903195">abs</span>&nbsp;<span class="op" id="2903199">=</span>&nbsp;<span class="ident" id="2903201">offset</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903209">case</span>&nbsp;<span class="num" id="2903214">1</span><span class="op" id="2903215">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903219">abs</span>&nbsp;<span class="op" id="2903223">=</span>&nbsp;<span class="ident" id="2903225">int64</span><span class="op" id="2903230">(</span><span class="ident" id="2903231">r</span><span class="op" id="2903232">.</span><span class="ident" id="2903233">i</span><span class="op" id="2903234">)</span>&nbsp;<span class="op" id="2903236">+</span>&nbsp;<span class="ident" id="2903238">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903246">case</span>&nbsp;<span class="num" id="2903251">2</span><span class="op" id="2903252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903256">abs</span>&nbsp;<span class="op" id="2903260">=</span>&nbsp;<span class="ident" id="2903262">int64</span><span class="op" id="2903267">(</span><span class="builtinfunc" id="2903268">len</span><span class="op" id="2903271">(</span><span class="ident" id="2903272">r</span><span class="op" id="2903273">.</span><span class="ident" id="2903274">s</span><span class="op" id="2903275">)</span><span class="op" id="2903276">)</span>&nbsp;<span class="op" id="2903278">+</span>&nbsp;<span class="ident" id="2903280">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903288">default</span><span class="op" id="2903295">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903299">return</span>&nbsp;<span class="num" id="2903306">0</span><span class="op" id="2903307">,</span>&nbsp;<span class="ident" id="2903309">errors</span><span class="op" id="2903315">.</span><span class="ident" id="2903316">New</span><span class="op" id="2903319">(</span><span class="string" id="2903320">&#34;bytes.Reader.Seek:&nbsp;invalid&nbsp;whence&#34;</span><span class="op" id="2903355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903361">if</span>&nbsp;<span class="ident" id="2903364">abs</span>&nbsp;<span class="op" id="2903368">&lt;</span>&nbsp;<span class="num" id="2903370">0</span>&nbsp;<span class="op" id="2903372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903376">return</span>&nbsp;<span class="num" id="2903383">0</span><span class="op" id="2903384">,</span>&nbsp;<span class="ident" id="2903386">errors</span><span class="op" id="2903392">.</span><span class="ident" id="2903393">New</span><span class="op" id="2903396">(</span><span class="string" id="2903397">&#34;bytes.Reader.Seek:&nbsp;negative&nbsp;position&#34;</span><span class="op" id="2903435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903438">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903441">r</span><span class="op" id="2903442">.</span><span class="ident" id="2903443">i</span>&nbsp;<span class="op" id="2903445">=</span>&nbsp;<span class="ident" id="2903447">abs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903452">return</span>&nbsp;<span class="ident" id="2903459">abs</span><span class="op" id="2903462">,</span>&nbsp;<span class="ident" id="2903464">nil</span><br>
<span class="lineno"></span><span class="op" id="2903468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903471">//&nbsp;WriteTo&nbsp;implements&nbsp;the&nbsp;io.WriterTo&nbsp;interface.</span><br>
<span class="lineno">125</span><span class="keyword" id="2903520">func</span>&nbsp;<span class="op" id="2903525">(</span><span class="ident" id="2903526">r</span>&nbsp;<span class="op" id="2903528">*</span><span class="ident" id="2903529">Reader</span><span class="op" id="2903535">)</span>&nbsp;<span class="ident" id="2903537">WriteTo</span><span class="op" id="2903544">(</span><span class="ident" id="2903545">w</span>&nbsp;<span class="ident" id="2903547">io</span><span class="op" id="2903549">.</span><span class="ident" id="2903550">Writer</span><span class="op" id="2903556">)</span>&nbsp;<span class="op" id="2903558">(</span><span class="ident" id="2903559">n</span>&nbsp;<span class="ident" id="2903561">int64</span><span class="op" id="2903566">,</span>&nbsp;<span class="ident" id="2903568">err</span>&nbsp;<span class="builtintype" id="2903572">error</span><span class="op" id="2903577">)</span>&nbsp;<span class="op" id="2903579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903582">r</span><span class="op" id="2903583">.</span><span class="ident" id="2903584">prevRune</span>&nbsp;<span class="op" id="2903593">=</span>&nbsp;<span class="op" id="2903595">-</span><span class="num" id="2903596">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903599">if</span>&nbsp;<span class="ident" id="2903602">r</span><span class="op" id="2903603">.</span><span class="ident" id="2903604">i</span>&nbsp;<span class="op" id="2903606">&gt;=</span>&nbsp;<span class="ident" id="2903609">int64</span><span class="op" id="2903614">(</span><span class="builtinfunc" id="2903615">len</span><span class="op" id="2903618">(</span><span class="ident" id="2903619">r</span><span class="op" id="2903620">.</span><span class="ident" id="2903621">s</span><span class="op" id="2903622">)</span><span class="op" id="2903623">)</span>&nbsp;<span class="op" id="2903625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903629">return</span>&nbsp;<span class="num" id="2903636">0</span><span class="op" id="2903637">,</span>&nbsp;<span class="ident" id="2903639">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903644">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903647">b</span>&nbsp;<span class="op" id="2903649">:=</span>&nbsp;<span class="ident" id="2903652">r</span><span class="op" id="2903653">.</span><span class="ident" id="2903654">s</span><span class="op" id="2903655">[</span><span class="ident" id="2903656">r</span><span class="op" id="2903657">.</span><span class="ident" id="2903658">i</span><span class="op" id="2903659">:</span><span class="op" id="2903660">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903663">m</span><span class="op" id="2903664">,</span>&nbsp;<span class="ident" id="2903666">err</span>&nbsp;<span class="op" id="2903670">:=</span>&nbsp;<span class="ident" id="2903673">w</span><span class="op" id="2903674">.</span><span class="ident" id="2903675">Write</span><span class="op" id="2903680">(</span><span class="ident" id="2903681">b</span><span class="op" id="2903682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903685">if</span>&nbsp;<span class="ident" id="2903688">m</span>&nbsp;<span class="op" id="2903690">&gt;</span>&nbsp;<span class="builtinfunc" id="2903692">len</span><span class="op" id="2903695">(</span><span class="ident" id="2903696">b</span><span class="op" id="2903697">)</span>&nbsp;<span class="op" id="2903699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2903703">panic</span><span class="op" id="2903708">(</span><span class="string" id="2903709">&#34;bytes.Reader.WriteTo:&nbsp;invalid&nbsp;Write&nbsp;count&#34;</span><span class="op" id="2903752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903755">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903758">r</span><span class="op" id="2903759">.</span><span class="ident" id="2903760">i</span>&nbsp;<span class="op" id="2903762">+=</span>&nbsp;<span class="ident" id="2903765">int64</span><span class="op" id="2903770">(</span><span class="ident" id="2903771">m</span><span class="op" id="2903772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903775">n</span>&nbsp;<span class="op" id="2903777">=</span>&nbsp;<span class="ident" id="2903779">int64</span><span class="op" id="2903784">(</span><span class="ident" id="2903785">m</span><span class="op" id="2903786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903789">if</span>&nbsp;<span class="ident" id="2903792">m</span>&nbsp;<span class="op" id="2903794">!=</span>&nbsp;<span class="builtinfunc" id="2903797">len</span><span class="op" id="2903800">(</span><span class="ident" id="2903801">b</span><span class="op" id="2903802">)</span>&nbsp;<span class="op" id="2903804">&amp;&amp;</span>&nbsp;<span class="ident" id="2903807">err</span>&nbsp;<span class="op" id="2903811">==</span>&nbsp;<span class="ident" id="2903814">nil</span>&nbsp;<span class="op" id="2903818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903822">err</span>&nbsp;<span class="op" id="2903826">=</span>&nbsp;<span class="ident" id="2903828">io</span><span class="op" id="2903830">.</span><span class="ident" id="2903831">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903846">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903849">return</span><br>
<span class="lineno"></span><span class="op" id="2903856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903859">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;reading&nbsp;from&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="2903909">func</span>&nbsp;<span class="ident" id="2903914">NewReader</span><span class="op" id="2903923">(</span><span class="ident" id="2903924">b</span>&nbsp;<span class="op" id="2903926">[</span><span class="op" id="2903927">]</span><span class="builtintype" id="2903928">byte</span><span class="op" id="2903932">)</span>&nbsp;<span class="op" id="2903934">*</span><span class="ident" id="2903935">Reader</span>&nbsp;<span class="op" id="2903942">{</span>&nbsp;<span class="keyword" id="2903944">return</span>&nbsp;<span class="op" id="2903951">&amp;</span><span class="ident" id="2903952">Reader</span><span class="op" id="2903958">{</span><span class="ident" id="2903959">b</span><span class="op" id="2903960">,</span>&nbsp;<span class="num" id="2903962">0</span><span class="op" id="2903963">,</span>&nbsp;<span class="op" id="2903965">-</span><span class="num" id="2903966">1</span><span class="op" id="2903967">}</span>&nbsp;<span class="op" id="2903969">}</span>
</div>
</body>
</html>
