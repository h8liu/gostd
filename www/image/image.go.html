<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3188843">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3188898">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3188952">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3189003">//&nbsp;Package&nbsp;image&nbsp;implements&nbsp;a&nbsp;basic&nbsp;2-D&nbsp;image&nbsp;library.</span><br>
<span class="lineno"></span><span class="comment" id="3189058">//</span><br>
<span class="lineno"></span><span class="comment" id="3189061">//&nbsp;The&nbsp;fundamental&nbsp;interface&nbsp;is&nbsp;called&nbsp;Image.&nbsp;An&nbsp;Image&nbsp;contains&nbsp;colors,&nbsp;which</span><br>
<span class="lineno"></span><span class="comment" id="3189139">//&nbsp;are&nbsp;described&nbsp;in&nbsp;the&nbsp;image/color&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="3189184">//</span><br>
<span class="lineno">10</span><span class="comment" id="3189187">//&nbsp;Values&nbsp;of&nbsp;the&nbsp;Image&nbsp;interface&nbsp;are&nbsp;created&nbsp;either&nbsp;by&nbsp;calling&nbsp;functions&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="3189265">//&nbsp;as&nbsp;NewRGBA&nbsp;and&nbsp;NewPaletted,&nbsp;or&nbsp;by&nbsp;calling&nbsp;Decode&nbsp;on&nbsp;an&nbsp;io.Reader&nbsp;containing</span><br>
<span class="lineno"></span><span class="comment" id="3189344">//&nbsp;image&nbsp;data&nbsp;in&nbsp;a&nbsp;format&nbsp;such&nbsp;as&nbsp;GIF,&nbsp;JPEG&nbsp;or&nbsp;PNG.&nbsp;Decoding&nbsp;any&nbsp;particular</span><br>
<span class="lineno"></span><span class="comment" id="3189420">//&nbsp;image&nbsp;format&nbsp;requires&nbsp;the&nbsp;prior&nbsp;registration&nbsp;of&nbsp;a&nbsp;decoder&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="3189491">//&nbsp;Registration&nbsp;is&nbsp;typically&nbsp;automatic&nbsp;as&nbsp;a&nbsp;side&nbsp;effect&nbsp;of&nbsp;initializing&nbsp;that</span><br>
<span class="lineno">15</span><span class="comment" id="3189568">//&nbsp;format&#39;s&nbsp;package&nbsp;so&nbsp;that,&nbsp;to&nbsp;decode&nbsp;a&nbsp;PNG&nbsp;image,&nbsp;it&nbsp;suffices&nbsp;to&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="3189640">//&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;_&nbsp;&#34;image/png&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3189664">//&nbsp;in&nbsp;a&nbsp;program&#39;s&nbsp;main&nbsp;package.&nbsp;The&nbsp;_&nbsp;means&nbsp;to&nbsp;import&nbsp;a&nbsp;package&nbsp;purely&nbsp;for&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="3189743">//&nbsp;initialization&nbsp;side&nbsp;effects.</span><br>
<span class="lineno"></span><span class="comment" id="3189775">//</span><br>
<span class="lineno">20</span><span class="comment" id="3189778">//&nbsp;See&nbsp;&#34;The&nbsp;Go&nbsp;image&nbsp;package&#34;&nbsp;for&nbsp;more&nbsp;details:</span><br>
<span class="lineno"></span><span class="comment" id="3189826">//&nbsp;http://golang.org/doc/articles/image_package.html</span><br>
<span class="lineno"></span><span class="keyword" id="3189879">package</span>&nbsp;<span class="ident" id="3189887">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3189894">import</span>&nbsp;<span class="op" id="3189901">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3189904">&#34;image/color&#34;</span><br>
<span class="lineno"></span><span class="op" id="3189918">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3189921">//&nbsp;Config&nbsp;holds&nbsp;an&nbsp;image&#39;s&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions.</span><br>
<span class="lineno"></span><span class="keyword" id="3189976">type</span>&nbsp;<span class="ident" id="3189981">Config</span>&nbsp;<span class="keyword" id="3189988">struct</span>&nbsp;<span class="op" id="3189995">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3189998">ColorModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3190012"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3190017">.</span><span class="ident" id="3190018">Model</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3190025">Width</span><span class="op" id="3190030">,</span>&nbsp;<span class="ident" id="3190032">Height</span>&nbsp;<span class="builtintype" id="3190039">int</span><br>
<span class="lineno"></span><span class="op" id="3190043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3190046">//&nbsp;Image&nbsp;is&nbsp;a&nbsp;finite&nbsp;rectangular&nbsp;grid&nbsp;of&nbsp;color.Color&nbsp;values&nbsp;taken&nbsp;from&nbsp;a&nbsp;color</span><br>
<span class="lineno">35</span><span class="comment" id="3190125">//&nbsp;model.</span><br>
<span class="lineno"></span><span class="keyword" id="3190135">type</span>&nbsp;<span class="ident" id="3190140">Image</span>&nbsp;<span class="keyword" id="3190146">interface</span>&nbsp;<span class="op" id="3190156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190159">//&nbsp;ColorModel&nbsp;returns&nbsp;the&nbsp;Image&#39;s&nbsp;color&nbsp;model.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3190207">ColorModel</span><span class="op" id="3190217">(</span><span class="op" id="3190218">)</span>&nbsp;<span class="ident" id="3190220"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3190225">.</span><span class="ident" id="3190226">Model</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190233">//&nbsp;Bounds&nbsp;returns&nbsp;the&nbsp;domain&nbsp;for&nbsp;which&nbsp;At&nbsp;can&nbsp;return&nbsp;non-zero&nbsp;color.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190303">//&nbsp;The&nbsp;bounds&nbsp;do&nbsp;not&nbsp;necessarily&nbsp;contain&nbsp;the&nbsp;point&nbsp;(0,&nbsp;0).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3190363">Bounds</span><span class="op" id="3190369">(</span><span class="op" id="3190370">)</span>&nbsp;<span class="ident" id="3190372"><a href="/image/geom.go.html#3185229">Rectangle</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190383">//&nbsp;At&nbsp;returns&nbsp;the&nbsp;color&nbsp;of&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190432">//&nbsp;At(Bounds().Min.X,&nbsp;Bounds().Min.Y)&nbsp;returns&nbsp;the&nbsp;upper-left&nbsp;pixel&nbsp;of&nbsp;the&nbsp;grid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190513">//&nbsp;At(Bounds().Max.X-1,&nbsp;Bounds().Max.Y-1)&nbsp;returns&nbsp;the&nbsp;lower-right&nbsp;one.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3190585">At</span><span class="op" id="3190587">(</span><span class="ident" id="3190588">x</span><span class="op" id="3190589">,</span>&nbsp;<span class="ident" id="3190591">y</span>&nbsp;<span class="builtintype" id="3190593">int</span><span class="op" id="3190596">)</span>&nbsp;<span class="ident" id="3190598"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3190603">.</span><span class="ident" id="3190604">Color</span><br>
<span class="lineno"></span><span class="op" id="3190610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3190613">//&nbsp;PalettedImage&nbsp;is&nbsp;an&nbsp;image&nbsp;whose&nbsp;colors&nbsp;may&nbsp;come&nbsp;from&nbsp;a&nbsp;limited&nbsp;palette.</span><br>
<span class="lineno"></span><span class="comment" id="3190688">//&nbsp;If&nbsp;m&nbsp;is&nbsp;a&nbsp;PalettedImage&nbsp;and&nbsp;m.ColorModel()&nbsp;returns&nbsp;a&nbsp;PalettedColorModel&nbsp;p,</span><br>
<span class="lineno">50</span><span class="comment" id="3190766">//&nbsp;then&nbsp;m.At(x,&nbsp;y)&nbsp;should&nbsp;be&nbsp;equivalent&nbsp;to&nbsp;p[m.ColorIndexAt(x,&nbsp;y)].&nbsp;If&nbsp;m&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3190841">//&nbsp;color&nbsp;model&nbsp;is&nbsp;not&nbsp;a&nbsp;PalettedColorModel,&nbsp;then&nbsp;ColorIndexAt&#39;s&nbsp;behavior&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3190917">//&nbsp;undefined.</span><br>
<span class="lineno"></span><span class="keyword" id="3190931">type</span>&nbsp;<span class="ident" id="3190936">PalettedImage</span>&nbsp;<span class="keyword" id="3190950">interface</span>&nbsp;<span class="op" id="3190960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190963">//&nbsp;ColorIndexAt&nbsp;returns&nbsp;the&nbsp;palette&nbsp;index&nbsp;of&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3191030">ColorIndexAt</span><span class="op" id="3191042">(</span><span class="ident" id="3191043">x</span><span class="op" id="3191044">,</span>&nbsp;<span class="ident" id="3191046">y</span>&nbsp;<span class="builtintype" id="3191048">int</span><span class="op" id="3191051">)</span>&nbsp;<span class="builtintype" id="3191053">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3191060"><a href="/image/image.go.html#3190140">Image</a></span><br>
<span class="lineno"></span><span class="op" id="3191066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3191069">//&nbsp;RGBA&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.RGBA&nbsp;values.</span><br>
<span class="lineno">60</span><span class="keyword" id="3191142">type</span>&nbsp;<span class="ident" id="3191147">RGBA</span>&nbsp;<span class="keyword" id="3191152">struct</span>&nbsp;<span class="op" id="3191159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3191162">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;in&nbsp;R,&nbsp;G,&nbsp;B,&nbsp;A&nbsp;order.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3191230">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*4].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3191298">Pix</span>&nbsp;<span class="op" id="3191302">[</span><span class="op" id="3191303">]</span><span class="builtintype" id="3191304">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3191311">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3191387">Stride</span>&nbsp;<span class="builtintype" id="3191394">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3191399">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3191431">Rect</span>&nbsp;<span class="ident" id="3191436"><a href="/image/geom.go.html#3185229">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="3191446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="3191449">func</span>&nbsp;<span class="op" id="3191454">(</span><span class="ident" id="3191455">p</span>&nbsp;<span class="op" id="3191457">*</span><span class="ident" id="3191458"><a href="/image/image.go.html#3191147">RGBA</a></span><span class="op" id="3191462">)</span>&nbsp;<span class="ident" id="3191464">ColorModel</span><span class="op" id="3191474">(</span><span class="op" id="3191475">)</span>&nbsp;<span class="ident" id="3191477"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3191482">.</span><span class="ident" id="3191483">Model</span>&nbsp;<span class="op" id="3191489">{</span>&nbsp;<span class="keyword" id="3191491">return</span>&nbsp;<span class="ident" id="3191498"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3191503">.</span><span class="ident" id="3191504">RGBAModel</span>&nbsp;<span class="op" id="3191514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3191517">func</span>&nbsp;<span class="op" id="3191522">(</span><span class="ident" id="3191523">p</span>&nbsp;<span class="op" id="3191525">*</span><span class="ident" id="3191526"><a href="/image/image.go.html#3191147">RGBA</a></span><span class="op" id="3191530">)</span>&nbsp;<span class="ident" id="3191532">Bounds</span><span class="op" id="3191538">(</span><span class="op" id="3191539">)</span>&nbsp;<span class="ident" id="3191541"><a href="/image/geom.go.html#3185229">Rectangle</a></span>&nbsp;<span class="op" id="3191551">{</span>&nbsp;<span class="keyword" id="3191553">return</span>&nbsp;<span class="ident" id="3191560"><a href="/image/image.go.html#3191523">p</a></span><span class="op" id="3191561">.</span><span class="ident" id="3191562">Rect</span>&nbsp;<span class="op" id="3191567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3191570">func</span>&nbsp;<span class="op" id="3191575">(</span><span class="ident" id="3191576">p</span>&nbsp;<span class="op" id="3191578">*</span><span class="ident" id="3191579"><a href="/image/image.go.html#3191147">RGBA</a></span><span class="op" id="3191583">)</span>&nbsp;<span class="ident" id="3191585">At</span><span class="op" id="3191587">(</span><span class="ident" id="3191588">x</span><span class="op" id="3191589">,</span>&nbsp;<span class="ident" id="3191591">y</span>&nbsp;<span class="builtintype" id="3191593">int</span><span class="op" id="3191596">)</span>&nbsp;<span class="ident" id="3191598"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3191603">.</span><span class="ident" id="3191604">Color</span>&nbsp;<span class="op" id="3191610">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3191613">return</span>&nbsp;<span class="ident" id="3191620"><a href="/image/image.go.html#3191576">p</a></span><span class="op" id="3191621">.</span><span class="ident" id="3191622">RGBAAt</span><span class="op" id="3191628">(</span><span class="ident" id="3191629"><a href="/image/image.go.html#3191588">x</a></span><span class="op" id="3191630">,</span>&nbsp;<span class="ident" id="3191632"><a href="/image/image.go.html#3191591">y</a></span><span class="op" id="3191633">)</span><br>
<span class="lineno"></span><span class="op" id="3191635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3191638">func</span>&nbsp;<span class="op" id="3191643">(</span><span class="ident" id="3191644">p</span>&nbsp;<span class="op" id="3191646">*</span><span class="ident" id="3191647"><a href="/image/image.go.html#3191147">RGBA</a></span><span class="op" id="3191651">)</span>&nbsp;<span class="ident" id="3191653">RGBAAt</span><span class="op" id="3191659">(</span><span class="ident" id="3191660">x</span><span class="op" id="3191661">,</span>&nbsp;<span class="ident" id="3191663">y</span>&nbsp;<span class="builtintype" id="3191665">int</span><span class="op" id="3191668">)</span>&nbsp;<span class="ident" id="3191670"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3191675">.</span><span class="ident" id="3191676">RGBA</span>&nbsp;<span class="op" id="3191681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3191684">if</span>&nbsp;<span class="op" id="3191687">!</span><span class="op" id="3191688">(</span><span class="ident" id="3191689"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3191694">{</span><span class="ident" id="3191695"><a href="/image/image.go.html#3191660">x</a></span><span class="op" id="3191696">,</span>&nbsp;<span class="ident" id="3191698"><a href="/image/image.go.html#3191663">y</a></span><span class="op" id="3191699">}</span><span class="op" id="3191700">.</span><span class="ident" id="3191701">In</span><span class="op" id="3191703">(</span><span class="ident" id="3191704"><a href="/image/image.go.html#3191644">p</a></span><span class="op" id="3191705">.</span><span class="ident" id="3191706">Rect</span><span class="op" id="3191710">)</span><span class="op" id="3191711">)</span>&nbsp;<span class="op" id="3191713">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3191717">return</span>&nbsp;<span class="ident" id="3191724"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3191729">.</span><span class="ident" id="3191730">RGBA</span><span class="op" id="3191734">{</span><span class="op" id="3191735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3191738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3191741">i</span>&nbsp;<span class="op" id="3191743">:=</span>&nbsp;<span class="ident" id="3191746"><a href="/image/image.go.html#3191644">p</a></span><span class="op" id="3191747">.</span><span class="ident" id="3191748">PixOffset</span><span class="op" id="3191757">(</span><span class="ident" id="3191758"><a href="/image/image.go.html#3191660">x</a></span><span class="op" id="3191759">,</span>&nbsp;<span class="ident" id="3191761"><a href="/image/image.go.html#3191663">y</a></span><span class="op" id="3191762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3191765">return</span>&nbsp;<span class="ident" id="3191772"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3191777">.</span><span class="ident" id="3191778">RGBA</span><span class="op" id="3191782">{</span><span class="ident" id="3191783"><a href="/image/image.go.html#3191644">p</a></span><span class="op" id="3191784">.</span><span class="ident" id="3191785">Pix</span><span class="op" id="3191788">[</span><span class="ident" id="3191789"><a href="/image/image.go.html#3191741">i</a></span><span class="op" id="3191790">+</span><span class="num" id="3191791">0</span><span class="op" id="3191792">]</span><span class="op" id="3191793">,</span>&nbsp;<span class="ident" id="3191795"><a href="/image/image.go.html#3191644">p</a></span><span class="op" id="3191796">.</span><span class="ident" id="3191797">Pix</span><span class="op" id="3191800">[</span><span class="ident" id="3191801"><a href="/image/image.go.html#3191741">i</a></span><span class="op" id="3191802">+</span><span class="num" id="3191803">1</span><span class="op" id="3191804">]</span><span class="op" id="3191805">,</span>&nbsp;<span class="ident" id="3191807"><a href="/image/image.go.html#3191644">p</a></span><span class="op" id="3191808">.</span><span class="ident" id="3191809">Pix</span><span class="op" id="3191812">[</span><span class="ident" id="3191813"><a href="/image/image.go.html#3191741">i</a></span><span class="op" id="3191814">+</span><span class="num" id="3191815">2</span><span class="op" id="3191816">]</span><span class="op" id="3191817">,</span>&nbsp;<span class="ident" id="3191819"><a href="/image/image.go.html#3191644">p</a></span><span class="op" id="3191820">.</span><span class="ident" id="3191821">Pix</span><span class="op" id="3191824">[</span><span class="ident" id="3191825"><a href="/image/image.go.html#3191741">i</a></span><span class="op" id="3191826">+</span><span class="num" id="3191827">3</span><span class="op" id="3191828">]</span><span class="op" id="3191829">}</span><br>
<span class="lineno"></span><span class="op" id="3191831">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="3191834">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3191913">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="3191937">func</span>&nbsp;<span class="op" id="3191942">(</span><span class="ident" id="3191943">p</span>&nbsp;<span class="op" id="3191945">*</span><span class="ident" id="3191946"><a href="/image/image.go.html#3191147">RGBA</a></span><span class="op" id="3191950">)</span>&nbsp;<span class="ident" id="3191952">PixOffset</span><span class="op" id="3191961">(</span><span class="ident" id="3191962">x</span><span class="op" id="3191963">,</span>&nbsp;<span class="ident" id="3191965">y</span>&nbsp;<span class="builtintype" id="3191967">int</span><span class="op" id="3191970">)</span>&nbsp;<span class="builtintype" id="3191972">int</span>&nbsp;<span class="op" id="3191976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3191979">return</span>&nbsp;<span class="op" id="3191986">(</span><span class="ident" id="3191987"><a href="/image/image.go.html#3191965">y</a></span><span class="op" id="3191988">-</span><span class="ident" id="3191989"><a href="/image/image.go.html#3191943">p</a></span><span class="op" id="3191990">.</span><span class="ident" id="3191991">Rect</span><span class="op" id="3191995">.</span><span class="ident" id="3191996">Min</span><span class="op" id="3191999">.</span><span class="ident" id="3192000">Y</span><span class="op" id="3192001">)</span><span class="op" id="3192002">*</span><span class="ident" id="3192003"><a href="/image/image.go.html#3191943">p</a></span><span class="op" id="3192004">.</span><span class="ident" id="3192005">Stride</span>&nbsp;<span class="op" id="3192012">+</span>&nbsp;<span class="op" id="3192014">(</span><span class="ident" id="3192015"><a href="/image/image.go.html#3191962">x</a></span><span class="op" id="3192016">-</span><span class="ident" id="3192017"><a href="/image/image.go.html#3191943">p</a></span><span class="op" id="3192018">.</span><span class="ident" id="3192019">Rect</span><span class="op" id="3192023">.</span><span class="ident" id="3192024">Min</span><span class="op" id="3192027">.</span><span class="ident" id="3192028">X</span><span class="op" id="3192029">)</span><span class="op" id="3192030">*</span><span class="num" id="3192031">4</span><br>
<span class="lineno">90</span><span class="op" id="3192033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3192036">func</span>&nbsp;<span class="op" id="3192041">(</span><span class="ident" id="3192042">p</span>&nbsp;<span class="op" id="3192044">*</span><span class="ident" id="3192045"><a href="/image/image.go.html#3191147">RGBA</a></span><span class="op" id="3192049">)</span>&nbsp;<span class="ident" id="3192051">Set</span><span class="op" id="3192054">(</span><span class="ident" id="3192055">x</span><span class="op" id="3192056">,</span>&nbsp;<span class="ident" id="3192058">y</span>&nbsp;<span class="builtintype" id="3192060">int</span><span class="op" id="3192063">,</span>&nbsp;<span class="ident" id="3192065">c</span>&nbsp;<span class="ident" id="3192067"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3192072">.</span><span class="ident" id="3192073">Color</span><span class="op" id="3192078">)</span>&nbsp;<span class="op" id="3192080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192083">if</span>&nbsp;<span class="op" id="3192086">!</span><span class="op" id="3192087">(</span><span class="ident" id="3192088"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3192093">{</span><span class="ident" id="3192094"><a href="/image/image.go.html#3192055">x</a></span><span class="op" id="3192095">,</span>&nbsp;<span class="ident" id="3192097"><a href="/image/image.go.html#3192058">y</a></span><span class="op" id="3192098">}</span><span class="op" id="3192099">.</span><span class="ident" id="3192100">In</span><span class="op" id="3192102">(</span><span class="ident" id="3192103"><a href="/image/image.go.html#3192042">p</a></span><span class="op" id="3192104">.</span><span class="ident" id="3192105">Rect</span><span class="op" id="3192109">)</span><span class="op" id="3192110">)</span>&nbsp;<span class="op" id="3192112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192116">return</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3192124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192127">i</span>&nbsp;<span class="op" id="3192129">:=</span>&nbsp;<span class="ident" id="3192132"><a href="/image/image.go.html#3192042">p</a></span><span class="op" id="3192133">.</span><span class="ident" id="3192134">PixOffset</span><span class="op" id="3192143">(</span><span class="ident" id="3192144"><a href="/image/image.go.html#3192055">x</a></span><span class="op" id="3192145">,</span>&nbsp;<span class="ident" id="3192147"><a href="/image/image.go.html#3192058">y</a></span><span class="op" id="3192148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192151">c1</span>&nbsp;<span class="op" id="3192154">:=</span>&nbsp;<span class="ident" id="3192157"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3192162">.</span><span class="ident" id="3192163">RGBAModel</span><span class="op" id="3192172">.</span><span class="ident" id="3192173">Convert</span><span class="op" id="3192180">(</span><span class="ident" id="3192181"><a href="/image/image.go.html#3192065">c</a></span><span class="op" id="3192182">)</span><span class="op" id="3192183">.</span><span class="op" id="3192184">(</span><span class="ident" id="3192185"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3192190">.</span><span class="ident" id="3192191">RGBA</span><span class="op" id="3192195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192198"><a href="/image/image.go.html#3192042">p</a></span><span class="op" id="3192199">.</span><span class="ident" id="3192200">Pix</span><span class="op" id="3192203">[</span><span class="ident" id="3192204"><a href="/image/image.go.html#3192127">i</a></span><span class="op" id="3192205">+</span><span class="num" id="3192206">0</span><span class="op" id="3192207">]</span>&nbsp;<span class="op" id="3192209">=</span>&nbsp;<span class="ident" id="3192211"><a href="/image/image.go.html#3192151">c1</a></span><span class="op" id="3192213">.</span><span class="ident" id="3192214">R</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192217"><a href="/image/image.go.html#3192042">p</a></span><span class="op" id="3192218">.</span><span class="ident" id="3192219">Pix</span><span class="op" id="3192222">[</span><span class="ident" id="3192223"><a href="/image/image.go.html#3192127">i</a></span><span class="op" id="3192224">+</span><span class="num" id="3192225">1</span><span class="op" id="3192226">]</span>&nbsp;<span class="op" id="3192228">=</span>&nbsp;<span class="ident" id="3192230"><a href="/image/image.go.html#3192151">c1</a></span><span class="op" id="3192232">.</span><span class="ident" id="3192233">G</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192236"><a href="/image/image.go.html#3192042">p</a></span><span class="op" id="3192237">.</span><span class="ident" id="3192238">Pix</span><span class="op" id="3192241">[</span><span class="ident" id="3192242"><a href="/image/image.go.html#3192127">i</a></span><span class="op" id="3192243">+</span><span class="num" id="3192244">2</span><span class="op" id="3192245">]</span>&nbsp;<span class="op" id="3192247">=</span>&nbsp;<span class="ident" id="3192249"><a href="/image/image.go.html#3192151">c1</a></span><span class="op" id="3192251">.</span><span class="ident" id="3192252">B</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192255"><a href="/image/image.go.html#3192042">p</a></span><span class="op" id="3192256">.</span><span class="ident" id="3192257">Pix</span><span class="op" id="3192260">[</span><span class="ident" id="3192261"><a href="/image/image.go.html#3192127">i</a></span><span class="op" id="3192262">+</span><span class="num" id="3192263">3</span><span class="op" id="3192264">]</span>&nbsp;<span class="op" id="3192266">=</span>&nbsp;<span class="ident" id="3192268"><a href="/image/image.go.html#3192151">c1</a></span><span class="op" id="3192270">.</span><span class="ident" id="3192271">A</span><br>
<span class="lineno"></span><span class="op" id="3192273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3192276">func</span>&nbsp;<span class="op" id="3192281">(</span><span class="ident" id="3192282">p</span>&nbsp;<span class="op" id="3192284">*</span><span class="ident" id="3192285"><a href="/image/image.go.html#3191147">RGBA</a></span><span class="op" id="3192289">)</span>&nbsp;<span class="ident" id="3192291">SetRGBA</span><span class="op" id="3192298">(</span><span class="ident" id="3192299">x</span><span class="op" id="3192300">,</span>&nbsp;<span class="ident" id="3192302">y</span>&nbsp;<span class="builtintype" id="3192304">int</span><span class="op" id="3192307">,</span>&nbsp;<span class="ident" id="3192309">c</span>&nbsp;<span class="ident" id="3192311"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3192316">.</span><span class="ident" id="3192317">RGBA</span><span class="op" id="3192321">)</span>&nbsp;<span class="op" id="3192323">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192326">if</span>&nbsp;<span class="op" id="3192329">!</span><span class="op" id="3192330">(</span><span class="ident" id="3192331"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3192336">{</span><span class="ident" id="3192337"><a href="/image/image.go.html#3192299">x</a></span><span class="op" id="3192338">,</span>&nbsp;<span class="ident" id="3192340"><a href="/image/image.go.html#3192302">y</a></span><span class="op" id="3192341">}</span><span class="op" id="3192342">.</span><span class="ident" id="3192343">In</span><span class="op" id="3192345">(</span><span class="ident" id="3192346"><a href="/image/image.go.html#3192282">p</a></span><span class="op" id="3192347">.</span><span class="ident" id="3192348">Rect</span><span class="op" id="3192352">)</span><span class="op" id="3192353">)</span>&nbsp;<span class="op" id="3192355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192359">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3192367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192370">i</span>&nbsp;<span class="op" id="3192372">:=</span>&nbsp;<span class="ident" id="3192375"><a href="/image/image.go.html#3192282">p</a></span><span class="op" id="3192376">.</span><span class="ident" id="3192377">PixOffset</span><span class="op" id="3192386">(</span><span class="ident" id="3192387"><a href="/image/image.go.html#3192299">x</a></span><span class="op" id="3192388">,</span>&nbsp;<span class="ident" id="3192390"><a href="/image/image.go.html#3192302">y</a></span><span class="op" id="3192391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192394"><a href="/image/image.go.html#3192282">p</a></span><span class="op" id="3192395">.</span><span class="ident" id="3192396">Pix</span><span class="op" id="3192399">[</span><span class="ident" id="3192400"><a href="/image/image.go.html#3192370">i</a></span><span class="op" id="3192401">+</span><span class="num" id="3192402">0</span><span class="op" id="3192403">]</span>&nbsp;<span class="op" id="3192405">=</span>&nbsp;<span class="ident" id="3192407"><a href="/image/image.go.html#3192309">c</a></span><span class="op" id="3192408">.</span><span class="ident" id="3192409">R</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192412"><a href="/image/image.go.html#3192282">p</a></span><span class="op" id="3192413">.</span><span class="ident" id="3192414">Pix</span><span class="op" id="3192417">[</span><span class="ident" id="3192418"><a href="/image/image.go.html#3192370">i</a></span><span class="op" id="3192419">+</span><span class="num" id="3192420">1</span><span class="op" id="3192421">]</span>&nbsp;<span class="op" id="3192423">=</span>&nbsp;<span class="ident" id="3192425"><a href="/image/image.go.html#3192309">c</a></span><span class="op" id="3192426">.</span><span class="ident" id="3192427">G</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192430"><a href="/image/image.go.html#3192282">p</a></span><span class="op" id="3192431">.</span><span class="ident" id="3192432">Pix</span><span class="op" id="3192435">[</span><span class="ident" id="3192436"><a href="/image/image.go.html#3192370">i</a></span><span class="op" id="3192437">+</span><span class="num" id="3192438">2</span><span class="op" id="3192439">]</span>&nbsp;<span class="op" id="3192441">=</span>&nbsp;<span class="ident" id="3192443"><a href="/image/image.go.html#3192309">c</a></span><span class="op" id="3192444">.</span><span class="ident" id="3192445">B</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192448"><a href="/image/image.go.html#3192282">p</a></span><span class="op" id="3192449">.</span><span class="ident" id="3192450">Pix</span><span class="op" id="3192453">[</span><span class="ident" id="3192454"><a href="/image/image.go.html#3192370">i</a></span><span class="op" id="3192455">+</span><span class="num" id="3192456">3</span><span class="op" id="3192457">]</span>&nbsp;<span class="op" id="3192459">=</span>&nbsp;<span class="ident" id="3192461"><a href="/image/image.go.html#3192309">c</a></span><span class="op" id="3192462">.</span><span class="ident" id="3192463">A</span><br>
<span class="lineno"></span><span class="op" id="3192465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="3192468">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="3192545">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="3192617">func</span>&nbsp;<span class="op" id="3192622">(</span><span class="ident" id="3192623">p</span>&nbsp;<span class="op" id="3192625">*</span><span class="ident" id="3192626"><a href="/image/image.go.html#3191147">RGBA</a></span><span class="op" id="3192630">)</span>&nbsp;<span class="ident" id="3192632">SubImage</span><span class="op" id="3192640">(</span><span class="ident" id="3192641">r</span>&nbsp;<span class="ident" id="3192643"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3192652">)</span>&nbsp;<span class="ident" id="3192654"><a href="/image/image.go.html#3190140">Image</a></span>&nbsp;<span class="op" id="3192660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192663"><a href="/image/image.go.html#3192641">r</a></span>&nbsp;<span class="op" id="3192665">=</span>&nbsp;<span class="ident" id="3192667"><a href="/image/image.go.html#3192641">r</a></span><span class="op" id="3192668">.</span><span class="ident" id="3192669">Intersect</span><span class="op" id="3192678">(</span><span class="ident" id="3192679"><a href="/image/image.go.html#3192623">p</a></span><span class="op" id="3192680">.</span><span class="ident" id="3192681">Rect</span><span class="op" id="3192685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3192688">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3192769">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3192851">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192901">if</span>&nbsp;<span class="ident" id="3192904"><a href="/image/image.go.html#3192641">r</a></span><span class="op" id="3192905">.</span><span class="ident" id="3192906">Empty</span><span class="op" id="3192911">(</span><span class="op" id="3192912">)</span>&nbsp;<span class="op" id="3192914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192918">return</span>&nbsp;<span class="op" id="3192925">&amp;</span><span class="ident" id="3192926"><a href="/image/image.go.html#3191147">RGBA</a></span><span class="op" id="3192930">{</span><span class="op" id="3192931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3192934">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192937">i</span>&nbsp;<span class="op" id="3192939">:=</span>&nbsp;<span class="ident" id="3192942"><a href="/image/image.go.html#3192623">p</a></span><span class="op" id="3192943">.</span><span class="ident" id="3192944">PixOffset</span><span class="op" id="3192953">(</span><span class="ident" id="3192954"><a href="/image/image.go.html#3192641">r</a></span><span class="op" id="3192955">.</span><span class="ident" id="3192956">Min</span><span class="op" id="3192959">.</span><span class="ident" id="3192960">X</span><span class="op" id="3192961">,</span>&nbsp;<span class="ident" id="3192963"><a href="/image/image.go.html#3192641">r</a></span><span class="op" id="3192964">.</span><span class="ident" id="3192965">Min</span><span class="op" id="3192968">.</span><span class="ident" id="3192969">Y</span><span class="op" id="3192970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192973">return</span>&nbsp;<span class="op" id="3192980">&amp;</span><span class="ident" id="3192981"><a href="/image/image.go.html#3191147">RGBA</a></span><span class="op" id="3192985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192989">Pix</span><span class="op" id="3192992">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3192997"><a href="/image/image.go.html#3192623">p</a></span><span class="op" id="3192998">.</span><span class="ident" id="3192999">Pix</span><span class="op" id="3193002">[</span><span class="ident" id="3193003"><a href="/image/image.go.html#3192937">i</a></span><span class="op" id="3193004">:</span><span class="op" id="3193005">]</span><span class="op" id="3193006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3193010">Stride</span><span class="op" id="3193016">:</span>&nbsp;<span class="ident" id="3193018"><a href="/image/image.go.html#3192623">p</a></span><span class="op" id="3193019">.</span><span class="ident" id="3193020">Stride</span><span class="op" id="3193026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3193030">Rect</span><span class="op" id="3193034">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3193038"><a href="/image/image.go.html#3192641">r</a></span><span class="op" id="3193039">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3193042">}</span><br>
<span class="lineno"></span><span class="op" id="3193044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3193047">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="3193120">func</span>&nbsp;<span class="op" id="3193125">(</span><span class="ident" id="3193126">p</span>&nbsp;<span class="op" id="3193128">*</span><span class="ident" id="3193129"><a href="/image/image.go.html#3191147">RGBA</a></span><span class="op" id="3193133">)</span>&nbsp;<span class="ident" id="3193135">Opaque</span><span class="op" id="3193141">(</span><span class="op" id="3193142">)</span>&nbsp;<span class="builtintype" id="3193144">bool</span>&nbsp;<span class="op" id="3193149">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3193152">if</span>&nbsp;<span class="ident" id="3193155"><a href="/image/image.go.html#3193126">p</a></span><span class="op" id="3193156">.</span><span class="ident" id="3193157">Rect</span><span class="op" id="3193161">.</span><span class="ident" id="3193162">Empty</span><span class="op" id="3193167">(</span><span class="op" id="3193168">)</span>&nbsp;<span class="op" id="3193170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3193174">return</span>&nbsp;<span class="builtintype" id="3193181">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3193187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3193190">i0</span><span class="op" id="3193192">,</span>&nbsp;<span class="ident" id="3193194">i1</span>&nbsp;<span class="op" id="3193197">:=</span>&nbsp;<span class="num" id="3193200">3</span><span class="op" id="3193201">,</span>&nbsp;<span class="ident" id="3193203"><a href="/image/image.go.html#3193126">p</a></span><span class="op" id="3193204">.</span><span class="ident" id="3193205">Rect</span><span class="op" id="3193209">.</span><span class="ident" id="3193210">Dx</span><span class="op" id="3193212">(</span><span class="op" id="3193213">)</span><span class="op" id="3193214">*</span><span class="num" id="3193215">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3193218">for</span>&nbsp;<span class="ident" id="3193222">y</span>&nbsp;<span class="op" id="3193224">:=</span>&nbsp;<span class="ident" id="3193227"><a href="/image/image.go.html#3193126">p</a></span><span class="op" id="3193228">.</span><span class="ident" id="3193229">Rect</span><span class="op" id="3193233">.</span><span class="ident" id="3193234">Min</span><span class="op" id="3193237">.</span><span class="ident" id="3193238">Y</span><span class="op" id="3193239">;</span>&nbsp;<span class="ident" id="3193241"><a href="/image/image.go.html#3193222">y</a></span>&nbsp;<span class="op" id="3193243">&lt;</span>&nbsp;<span class="ident" id="3193245"><a href="/image/image.go.html#3193126">p</a></span><span class="op" id="3193246">.</span><span class="ident" id="3193247">Rect</span><span class="op" id="3193251">.</span><span class="ident" id="3193252">Max</span><span class="op" id="3193255">.</span><span class="ident" id="3193256">Y</span><span class="op" id="3193257">;</span>&nbsp;<span class="ident" id="3193259"><a href="/image/image.go.html#3193222">y</a></span><span class="op" id="3193260">++</span>&nbsp;<span class="op" id="3193263">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3193267">for</span>&nbsp;<span class="ident" id="3193271">i</span>&nbsp;<span class="op" id="3193273">:=</span>&nbsp;<span class="ident" id="3193276"><a href="/image/image.go.html#3193190">i0</a></span><span class="op" id="3193278">;</span>&nbsp;<span class="ident" id="3193280"><a href="/image/image.go.html#3193271">i</a></span>&nbsp;<span class="op" id="3193282">&lt;</span>&nbsp;<span class="ident" id="3193284"><a href="/image/image.go.html#3193194">i1</a></span><span class="op" id="3193286">;</span>&nbsp;<span class="ident" id="3193288"><a href="/image/image.go.html#3193271">i</a></span>&nbsp;<span class="op" id="3193290">+=</span>&nbsp;<span class="num" id="3193293">4</span>&nbsp;<span class="op" id="3193295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3193300">if</span>&nbsp;<span class="ident" id="3193303"><a href="/image/image.go.html#3193126">p</a></span><span class="op" id="3193304">.</span><span class="ident" id="3193305">Pix</span><span class="op" id="3193308">[</span><span class="ident" id="3193309"><a href="/image/image.go.html#3193271">i</a></span><span class="op" id="3193310">]</span>&nbsp;<span class="op" id="3193312">!=</span>&nbsp;<span class="num" id="3193315">0xff</span>&nbsp;<span class="op" id="3193320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3193326">return</span>&nbsp;<span class="builtintype" id="3193333">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3193342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3193346">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3193350"><a href="/image/image.go.html#3193190">i0</a></span>&nbsp;<span class="op" id="3193353">+=</span>&nbsp;<span class="ident" id="3193356"><a href="/image/image.go.html#3193126">p</a></span><span class="op" id="3193357">.</span><span class="ident" id="3193358">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3193367"><a href="/image/image.go.html#3193194">i1</a></span>&nbsp;<span class="op" id="3193370">+=</span>&nbsp;<span class="ident" id="3193373"><a href="/image/image.go.html#3193126">p</a></span><span class="op" id="3193374">.</span><span class="ident" id="3193375">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3193383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3193386">return</span>&nbsp;<span class="builtintype" id="3193393">true</span><br>
<span class="lineno"></span><span class="op" id="3193398">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="comment" id="3193401">//&nbsp;NewRGBA&nbsp;returns&nbsp;a&nbsp;new&nbsp;RGBA&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="3193454">func</span>&nbsp;<span class="ident" id="3193459">NewRGBA</span><span class="op" id="3193466">(</span><span class="ident" id="3193467">r</span>&nbsp;<span class="ident" id="3193469"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3193478">)</span>&nbsp;<span class="op" id="3193480">*</span><span class="ident" id="3193481"><a href="/image/image.go.html#3191147">RGBA</a></span>&nbsp;<span class="op" id="3193486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3193489">w</span><span class="op" id="3193490">,</span>&nbsp;<span class="ident" id="3193492">h</span>&nbsp;<span class="op" id="3193494">:=</span>&nbsp;<span class="ident" id="3193497"><a href="/image/image.go.html#3193467">r</a></span><span class="op" id="3193498">.</span><span class="ident" id="3193499">Dx</span><span class="op" id="3193501">(</span><span class="op" id="3193502">)</span><span class="op" id="3193503">,</span>&nbsp;<span class="ident" id="3193505"><a href="/image/image.go.html#3193467">r</a></span><span class="op" id="3193506">.</span><span class="ident" id="3193507">Dy</span><span class="op" id="3193509">(</span><span class="op" id="3193510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3193513">buf</span>&nbsp;<span class="op" id="3193517">:=</span>&nbsp;<span class="builtinfunc" id="3193520">make</span><span class="op" id="3193524">(</span><span class="op" id="3193525">[</span><span class="op" id="3193526">]</span><span class="builtintype" id="3193527">uint8</span><span class="op" id="3193532">,</span>&nbsp;<span class="num" id="3193534">4</span><span class="op" id="3193535">*</span><span class="ident" id="3193536"><a href="/image/image.go.html#3193489">w</a></span><span class="op" id="3193537">*</span><span class="ident" id="3193538"><a href="/image/image.go.html#3193492">h</a></span><span class="op" id="3193539">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3193542">return</span>&nbsp;<span class="op" id="3193549">&amp;</span><span class="ident" id="3193550"><a href="/image/image.go.html#3191147">RGBA</a></span><span class="op" id="3193554">{</span><span class="ident" id="3193555"><a href="/image/image.go.html#3193513">buf</a></span><span class="op" id="3193558">,</span>&nbsp;<span class="num" id="3193560">4</span>&nbsp;<span class="op" id="3193562">*</span>&nbsp;<span class="ident" id="3193564"><a href="/image/image.go.html#3193489">w</a></span><span class="op" id="3193565">,</span>&nbsp;<span class="ident" id="3193567"><a href="/image/image.go.html#3193467">r</a></span><span class="op" id="3193568">}</span><br>
<span class="lineno"></span><span class="op" id="3193570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3193573">//&nbsp;RGBA64&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.RGBA64&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="3193650">type</span>&nbsp;<span class="ident" id="3193655">RGBA64</span>&nbsp;<span class="keyword" id="3193662">struct</span>&nbsp;<span class="op" id="3193669">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3193672">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;in&nbsp;R,&nbsp;G,&nbsp;B,&nbsp;A&nbsp;order&nbsp;and&nbsp;big-endian&nbsp;format.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3193762">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*8].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3193830">Pix</span>&nbsp;<span class="op" id="3193834">[</span><span class="op" id="3193835">]</span><span class="builtintype" id="3193836">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3193843">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3193919">Stride</span>&nbsp;<span class="builtintype" id="3193926">int</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3193931">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3193963">Rect</span>&nbsp;<span class="ident" id="3193968"><a href="/image/geom.go.html#3185229">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="3193978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3193981">func</span>&nbsp;<span class="op" id="3193986">(</span><span class="ident" id="3193987">p</span>&nbsp;<span class="op" id="3193989">*</span><span class="ident" id="3193990"><a href="/image/image.go.html#3193655">RGBA64</a></span><span class="op" id="3193996">)</span>&nbsp;<span class="ident" id="3193998">ColorModel</span><span class="op" id="3194008">(</span><span class="op" id="3194009">)</span>&nbsp;<span class="ident" id="3194011"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3194016">.</span><span class="ident" id="3194017">Model</span>&nbsp;<span class="op" id="3194023">{</span>&nbsp;<span class="keyword" id="3194025">return</span>&nbsp;<span class="ident" id="3194032"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3194037">.</span><span class="ident" id="3194038">RGBA64Model</span>&nbsp;<span class="op" id="3194050">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="keyword" id="3194053">func</span>&nbsp;<span class="op" id="3194058">(</span><span class="ident" id="3194059">p</span>&nbsp;<span class="op" id="3194061">*</span><span class="ident" id="3194062"><a href="/image/image.go.html#3193655">RGBA64</a></span><span class="op" id="3194068">)</span>&nbsp;<span class="ident" id="3194070">Bounds</span><span class="op" id="3194076">(</span><span class="op" id="3194077">)</span>&nbsp;<span class="ident" id="3194079"><a href="/image/geom.go.html#3185229">Rectangle</a></span>&nbsp;<span class="op" id="3194089">{</span>&nbsp;<span class="keyword" id="3194091">return</span>&nbsp;<span class="ident" id="3194098"><a href="/image/image.go.html#3194059">p</a></span><span class="op" id="3194099">.</span><span class="ident" id="3194100">Rect</span>&nbsp;<span class="op" id="3194105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3194108">func</span>&nbsp;<span class="op" id="3194113">(</span><span class="ident" id="3194114">p</span>&nbsp;<span class="op" id="3194116">*</span><span class="ident" id="3194117"><a href="/image/image.go.html#3193655">RGBA64</a></span><span class="op" id="3194123">)</span>&nbsp;<span class="ident" id="3194125">At</span><span class="op" id="3194127">(</span><span class="ident" id="3194128">x</span><span class="op" id="3194129">,</span>&nbsp;<span class="ident" id="3194131">y</span>&nbsp;<span class="builtintype" id="3194133">int</span><span class="op" id="3194136">)</span>&nbsp;<span class="ident" id="3194138"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3194143">.</span><span class="ident" id="3194144">Color</span>&nbsp;<span class="op" id="3194150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3194153">return</span>&nbsp;<span class="ident" id="3194160"><a href="/image/image.go.html#3194114">p</a></span><span class="op" id="3194161">.</span><span class="ident" id="3194162">RGBA64At</span><span class="op" id="3194170">(</span><span class="ident" id="3194171"><a href="/image/image.go.html#3194128">x</a></span><span class="op" id="3194172">,</span>&nbsp;<span class="ident" id="3194174"><a href="/image/image.go.html#3194131">y</a></span><span class="op" id="3194175">)</span><br>
<span class="lineno">175</span><span class="op" id="3194177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3194180">func</span>&nbsp;<span class="op" id="3194185">(</span><span class="ident" id="3194186">p</span>&nbsp;<span class="op" id="3194188">*</span><span class="ident" id="3194189"><a href="/image/image.go.html#3193655">RGBA64</a></span><span class="op" id="3194195">)</span>&nbsp;<span class="ident" id="3194197">RGBA64At</span><span class="op" id="3194205">(</span><span class="ident" id="3194206">x</span><span class="op" id="3194207">,</span>&nbsp;<span class="ident" id="3194209">y</span>&nbsp;<span class="builtintype" id="3194211">int</span><span class="op" id="3194214">)</span>&nbsp;<span class="ident" id="3194216"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3194221">.</span><span class="ident" id="3194222">RGBA64</span>&nbsp;<span class="op" id="3194229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3194232">if</span>&nbsp;<span class="op" id="3194235">!</span><span class="op" id="3194236">(</span><span class="ident" id="3194237"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3194242">{</span><span class="ident" id="3194243"><a href="/image/image.go.html#3194206">x</a></span><span class="op" id="3194244">,</span>&nbsp;<span class="ident" id="3194246"><a href="/image/image.go.html#3194209">y</a></span><span class="op" id="3194247">}</span><span class="op" id="3194248">.</span><span class="ident" id="3194249">In</span><span class="op" id="3194251">(</span><span class="ident" id="3194252"><a href="/image/image.go.html#3194186">p</a></span><span class="op" id="3194253">.</span><span class="ident" id="3194254">Rect</span><span class="op" id="3194258">)</span><span class="op" id="3194259">)</span>&nbsp;<span class="op" id="3194261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3194265">return</span>&nbsp;<span class="ident" id="3194272"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3194277">.</span><span class="ident" id="3194278">RGBA64</span><span class="op" id="3194284">{</span><span class="op" id="3194285">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3194288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3194291">i</span>&nbsp;<span class="op" id="3194293">:=</span>&nbsp;<span class="ident" id="3194296"><a href="/image/image.go.html#3194186">p</a></span><span class="op" id="3194297">.</span><span class="ident" id="3194298">PixOffset</span><span class="op" id="3194307">(</span><span class="ident" id="3194308"><a href="/image/image.go.html#3194206">x</a></span><span class="op" id="3194309">,</span>&nbsp;<span class="ident" id="3194311"><a href="/image/image.go.html#3194209">y</a></span><span class="op" id="3194312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3194315">return</span>&nbsp;<span class="ident" id="3194322"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3194327">.</span><span class="ident" id="3194328">RGBA64</span><span class="op" id="3194334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="3194338">uint16</span><span class="op" id="3194344">(</span><span class="ident" id="3194345"><a href="/image/image.go.html#3194186">p</a></span><span class="op" id="3194346">.</span><span class="ident" id="3194347">Pix</span><span class="op" id="3194350">[</span><span class="ident" id="3194351"><a href="/image/image.go.html#3194291">i</a></span><span class="op" id="3194352">+</span><span class="num" id="3194353">0</span><span class="op" id="3194354">]</span><span class="op" id="3194355">)</span><span class="op" id="3194356">&lt;&lt;</span><span class="num" id="3194358">8</span>&nbsp;<span class="op" id="3194360">|</span>&nbsp;<span class="builtintype" id="3194362">uint16</span><span class="op" id="3194368">(</span><span class="ident" id="3194369"><a href="/image/image.go.html#3194186">p</a></span><span class="op" id="3194370">.</span><span class="ident" id="3194371">Pix</span><span class="op" id="3194374">[</span><span class="ident" id="3194375"><a href="/image/image.go.html#3194291">i</a></span><span class="op" id="3194376">+</span><span class="num" id="3194377">1</span><span class="op" id="3194378">]</span><span class="op" id="3194379">)</span><span class="op" id="3194380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="3194384">uint16</span><span class="op" id="3194390">(</span><span class="ident" id="3194391"><a href="/image/image.go.html#3194186">p</a></span><span class="op" id="3194392">.</span><span class="ident" id="3194393">Pix</span><span class="op" id="3194396">[</span><span class="ident" id="3194397"><a href="/image/image.go.html#3194291">i</a></span><span class="op" id="3194398">+</span><span class="num" id="3194399">2</span><span class="op" id="3194400">]</span><span class="op" id="3194401">)</span><span class="op" id="3194402">&lt;&lt;</span><span class="num" id="3194404">8</span>&nbsp;<span class="op" id="3194406">|</span>&nbsp;<span class="builtintype" id="3194408">uint16</span><span class="op" id="3194414">(</span><span class="ident" id="3194415"><a href="/image/image.go.html#3194186">p</a></span><span class="op" id="3194416">.</span><span class="ident" id="3194417">Pix</span><span class="op" id="3194420">[</span><span class="ident" id="3194421"><a href="/image/image.go.html#3194291">i</a></span><span class="op" id="3194422">+</span><span class="num" id="3194423">3</span><span class="op" id="3194424">]</span><span class="op" id="3194425">)</span><span class="op" id="3194426">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="3194430">uint16</span><span class="op" id="3194436">(</span><span class="ident" id="3194437"><a href="/image/image.go.html#3194186">p</a></span><span class="op" id="3194438">.</span><span class="ident" id="3194439">Pix</span><span class="op" id="3194442">[</span><span class="ident" id="3194443"><a href="/image/image.go.html#3194291">i</a></span><span class="op" id="3194444">+</span><span class="num" id="3194445">4</span><span class="op" id="3194446">]</span><span class="op" id="3194447">)</span><span class="op" id="3194448">&lt;&lt;</span><span class="num" id="3194450">8</span>&nbsp;<span class="op" id="3194452">|</span>&nbsp;<span class="builtintype" id="3194454">uint16</span><span class="op" id="3194460">(</span><span class="ident" id="3194461"><a href="/image/image.go.html#3194186">p</a></span><span class="op" id="3194462">.</span><span class="ident" id="3194463">Pix</span><span class="op" id="3194466">[</span><span class="ident" id="3194467"><a href="/image/image.go.html#3194291">i</a></span><span class="op" id="3194468">+</span><span class="num" id="3194469">5</span><span class="op" id="3194470">]</span><span class="op" id="3194471">)</span><span class="op" id="3194472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="3194476">uint16</span><span class="op" id="3194482">(</span><span class="ident" id="3194483"><a href="/image/image.go.html#3194186">p</a></span><span class="op" id="3194484">.</span><span class="ident" id="3194485">Pix</span><span class="op" id="3194488">[</span><span class="ident" id="3194489"><a href="/image/image.go.html#3194291">i</a></span><span class="op" id="3194490">+</span><span class="num" id="3194491">6</span><span class="op" id="3194492">]</span><span class="op" id="3194493">)</span><span class="op" id="3194494">&lt;&lt;</span><span class="num" id="3194496">8</span>&nbsp;<span class="op" id="3194498">|</span>&nbsp;<span class="builtintype" id="3194500">uint16</span><span class="op" id="3194506">(</span><span class="ident" id="3194507"><a href="/image/image.go.html#3194186">p</a></span><span class="op" id="3194508">.</span><span class="ident" id="3194509">Pix</span><span class="op" id="3194512">[</span><span class="ident" id="3194513"><a href="/image/image.go.html#3194291">i</a></span><span class="op" id="3194514">+</span><span class="num" id="3194515">7</span><span class="op" id="3194516">]</span><span class="op" id="3194517">)</span><span class="op" id="3194518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3194521">}</span><br>
<span class="lineno"></span><span class="op" id="3194523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="3194526">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3194605">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="3194629">func</span>&nbsp;<span class="op" id="3194634">(</span><span class="ident" id="3194635">p</span>&nbsp;<span class="op" id="3194637">*</span><span class="ident" id="3194638"><a href="/image/image.go.html#3193655">RGBA64</a></span><span class="op" id="3194644">)</span>&nbsp;<span class="ident" id="3194646">PixOffset</span><span class="op" id="3194655">(</span><span class="ident" id="3194656">x</span><span class="op" id="3194657">,</span>&nbsp;<span class="ident" id="3194659">y</span>&nbsp;<span class="builtintype" id="3194661">int</span><span class="op" id="3194664">)</span>&nbsp;<span class="builtintype" id="3194666">int</span>&nbsp;<span class="op" id="3194670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3194673">return</span>&nbsp;<span class="op" id="3194680">(</span><span class="ident" id="3194681"><a href="/image/image.go.html#3194659">y</a></span><span class="op" id="3194682">-</span><span class="ident" id="3194683"><a href="/image/image.go.html#3194635">p</a></span><span class="op" id="3194684">.</span><span class="ident" id="3194685">Rect</span><span class="op" id="3194689">.</span><span class="ident" id="3194690">Min</span><span class="op" id="3194693">.</span><span class="ident" id="3194694">Y</span><span class="op" id="3194695">)</span><span class="op" id="3194696">*</span><span class="ident" id="3194697"><a href="/image/image.go.html#3194635">p</a></span><span class="op" id="3194698">.</span><span class="ident" id="3194699">Stride</span>&nbsp;<span class="op" id="3194706">+</span>&nbsp;<span class="op" id="3194708">(</span><span class="ident" id="3194709"><a href="/image/image.go.html#3194656">x</a></span><span class="op" id="3194710">-</span><span class="ident" id="3194711"><a href="/image/image.go.html#3194635">p</a></span><span class="op" id="3194712">.</span><span class="ident" id="3194713">Rect</span><span class="op" id="3194717">.</span><span class="ident" id="3194718">Min</span><span class="op" id="3194721">.</span><span class="ident" id="3194722">X</span><span class="op" id="3194723">)</span><span class="op" id="3194724">*</span><span class="num" id="3194725">8</span><br>
<span class="lineno"></span><span class="op" id="3194727">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="3194730">func</span>&nbsp;<span class="op" id="3194735">(</span><span class="ident" id="3194736">p</span>&nbsp;<span class="op" id="3194738">*</span><span class="ident" id="3194739"><a href="/image/image.go.html#3193655">RGBA64</a></span><span class="op" id="3194745">)</span>&nbsp;<span class="ident" id="3194747">Set</span><span class="op" id="3194750">(</span><span class="ident" id="3194751">x</span><span class="op" id="3194752">,</span>&nbsp;<span class="ident" id="3194754">y</span>&nbsp;<span class="builtintype" id="3194756">int</span><span class="op" id="3194759">,</span>&nbsp;<span class="ident" id="3194761">c</span>&nbsp;<span class="ident" id="3194763"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3194768">.</span><span class="ident" id="3194769">Color</span><span class="op" id="3194774">)</span>&nbsp;<span class="op" id="3194776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3194779">if</span>&nbsp;<span class="op" id="3194782">!</span><span class="op" id="3194783">(</span><span class="ident" id="3194784"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3194789">{</span><span class="ident" id="3194790"><a href="/image/image.go.html#3194751">x</a></span><span class="op" id="3194791">,</span>&nbsp;<span class="ident" id="3194793"><a href="/image/image.go.html#3194754">y</a></span><span class="op" id="3194794">}</span><span class="op" id="3194795">.</span><span class="ident" id="3194796">In</span><span class="op" id="3194798">(</span><span class="ident" id="3194799"><a href="/image/image.go.html#3194736">p</a></span><span class="op" id="3194800">.</span><span class="ident" id="3194801">Rect</span><span class="op" id="3194805">)</span><span class="op" id="3194806">)</span>&nbsp;<span class="op" id="3194808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3194812">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3194820">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3194823">i</span>&nbsp;<span class="op" id="3194825">:=</span>&nbsp;<span class="ident" id="3194828"><a href="/image/image.go.html#3194736">p</a></span><span class="op" id="3194829">.</span><span class="ident" id="3194830">PixOffset</span><span class="op" id="3194839">(</span><span class="ident" id="3194840"><a href="/image/image.go.html#3194751">x</a></span><span class="op" id="3194841">,</span>&nbsp;<span class="ident" id="3194843"><a href="/image/image.go.html#3194754">y</a></span><span class="op" id="3194844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3194847">c1</span>&nbsp;<span class="op" id="3194850">:=</span>&nbsp;<span class="ident" id="3194853"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3194858">.</span><span class="ident" id="3194859">RGBA64Model</span><span class="op" id="3194870">.</span><span class="ident" id="3194871">Convert</span><span class="op" id="3194878">(</span><span class="ident" id="3194879"><a href="/image/image.go.html#3194761">c</a></span><span class="op" id="3194880">)</span><span class="op" id="3194881">.</span><span class="op" id="3194882">(</span><span class="ident" id="3194883"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3194888">.</span><span class="ident" id="3194889">RGBA64</span><span class="op" id="3194895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3194898"><a href="/image/image.go.html#3194736">p</a></span><span class="op" id="3194899">.</span><span class="ident" id="3194900">Pix</span><span class="op" id="3194903">[</span><span class="ident" id="3194904"><a href="/image/image.go.html#3194823">i</a></span><span class="op" id="3194905">+</span><span class="num" id="3194906">0</span><span class="op" id="3194907">]</span>&nbsp;<span class="op" id="3194909">=</span>&nbsp;<span class="builtintype" id="3194911">uint8</span><span class="op" id="3194916">(</span><span class="ident" id="3194917"><a href="/image/image.go.html#3194847">c1</a></span><span class="op" id="3194919">.</span><span class="ident" id="3194920">R</span>&nbsp;<span class="op" id="3194922">&gt;&gt;</span>&nbsp;<span class="num" id="3194925">8</span><span class="op" id="3194926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3194929"><a href="/image/image.go.html#3194736">p</a></span><span class="op" id="3194930">.</span><span class="ident" id="3194931">Pix</span><span class="op" id="3194934">[</span><span class="ident" id="3194935"><a href="/image/image.go.html#3194823">i</a></span><span class="op" id="3194936">+</span><span class="num" id="3194937">1</span><span class="op" id="3194938">]</span>&nbsp;<span class="op" id="3194940">=</span>&nbsp;<span class="builtintype" id="3194942">uint8</span><span class="op" id="3194947">(</span><span class="ident" id="3194948"><a href="/image/image.go.html#3194847">c1</a></span><span class="op" id="3194950">.</span><span class="ident" id="3194951">R</span><span class="op" id="3194952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3194955"><a href="/image/image.go.html#3194736">p</a></span><span class="op" id="3194956">.</span><span class="ident" id="3194957">Pix</span><span class="op" id="3194960">[</span><span class="ident" id="3194961"><a href="/image/image.go.html#3194823">i</a></span><span class="op" id="3194962">+</span><span class="num" id="3194963">2</span><span class="op" id="3194964">]</span>&nbsp;<span class="op" id="3194966">=</span>&nbsp;<span class="builtintype" id="3194968">uint8</span><span class="op" id="3194973">(</span><span class="ident" id="3194974"><a href="/image/image.go.html#3194847">c1</a></span><span class="op" id="3194976">.</span><span class="ident" id="3194977">G</span>&nbsp;<span class="op" id="3194979">&gt;&gt;</span>&nbsp;<span class="num" id="3194982">8</span><span class="op" id="3194983">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3194986"><a href="/image/image.go.html#3194736">p</a></span><span class="op" id="3194987">.</span><span class="ident" id="3194988">Pix</span><span class="op" id="3194991">[</span><span class="ident" id="3194992"><a href="/image/image.go.html#3194823">i</a></span><span class="op" id="3194993">+</span><span class="num" id="3194994">3</span><span class="op" id="3194995">]</span>&nbsp;<span class="op" id="3194997">=</span>&nbsp;<span class="builtintype" id="3194999">uint8</span><span class="op" id="3195004">(</span><span class="ident" id="3195005"><a href="/image/image.go.html#3194847">c1</a></span><span class="op" id="3195007">.</span><span class="ident" id="3195008">G</span><span class="op" id="3195009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195012"><a href="/image/image.go.html#3194736">p</a></span><span class="op" id="3195013">.</span><span class="ident" id="3195014">Pix</span><span class="op" id="3195017">[</span><span class="ident" id="3195018"><a href="/image/image.go.html#3194823">i</a></span><span class="op" id="3195019">+</span><span class="num" id="3195020">4</span><span class="op" id="3195021">]</span>&nbsp;<span class="op" id="3195023">=</span>&nbsp;<span class="builtintype" id="3195025">uint8</span><span class="op" id="3195030">(</span><span class="ident" id="3195031"><a href="/image/image.go.html#3194847">c1</a></span><span class="op" id="3195033">.</span><span class="ident" id="3195034">B</span>&nbsp;<span class="op" id="3195036">&gt;&gt;</span>&nbsp;<span class="num" id="3195039">8</span><span class="op" id="3195040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195043"><a href="/image/image.go.html#3194736">p</a></span><span class="op" id="3195044">.</span><span class="ident" id="3195045">Pix</span><span class="op" id="3195048">[</span><span class="ident" id="3195049"><a href="/image/image.go.html#3194823">i</a></span><span class="op" id="3195050">+</span><span class="num" id="3195051">5</span><span class="op" id="3195052">]</span>&nbsp;<span class="op" id="3195054">=</span>&nbsp;<span class="builtintype" id="3195056">uint8</span><span class="op" id="3195061">(</span><span class="ident" id="3195062"><a href="/image/image.go.html#3194847">c1</a></span><span class="op" id="3195064">.</span><span class="ident" id="3195065">B</span><span class="op" id="3195066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195069"><a href="/image/image.go.html#3194736">p</a></span><span class="op" id="3195070">.</span><span class="ident" id="3195071">Pix</span><span class="op" id="3195074">[</span><span class="ident" id="3195075"><a href="/image/image.go.html#3194823">i</a></span><span class="op" id="3195076">+</span><span class="num" id="3195077">6</span><span class="op" id="3195078">]</span>&nbsp;<span class="op" id="3195080">=</span>&nbsp;<span class="builtintype" id="3195082">uint8</span><span class="op" id="3195087">(</span><span class="ident" id="3195088"><a href="/image/image.go.html#3194847">c1</a></span><span class="op" id="3195090">.</span><span class="ident" id="3195091">A</span>&nbsp;<span class="op" id="3195093">&gt;&gt;</span>&nbsp;<span class="num" id="3195096">8</span><span class="op" id="3195097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195100"><a href="/image/image.go.html#3194736">p</a></span><span class="op" id="3195101">.</span><span class="ident" id="3195102">Pix</span><span class="op" id="3195105">[</span><span class="ident" id="3195106"><a href="/image/image.go.html#3194823">i</a></span><span class="op" id="3195107">+</span><span class="num" id="3195108">7</span><span class="op" id="3195109">]</span>&nbsp;<span class="op" id="3195111">=</span>&nbsp;<span class="builtintype" id="3195113">uint8</span><span class="op" id="3195118">(</span><span class="ident" id="3195119"><a href="/image/image.go.html#3194847">c1</a></span><span class="op" id="3195121">.</span><span class="ident" id="3195122">A</span><span class="op" id="3195123">)</span><br>
<span class="lineno">210</span><span class="op" id="3195125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3195128">func</span>&nbsp;<span class="op" id="3195133">(</span><span class="ident" id="3195134">p</span>&nbsp;<span class="op" id="3195136">*</span><span class="ident" id="3195137"><a href="/image/image.go.html#3193655">RGBA64</a></span><span class="op" id="3195143">)</span>&nbsp;<span class="ident" id="3195145">SetRGBA64</span><span class="op" id="3195154">(</span><span class="ident" id="3195155">x</span><span class="op" id="3195156">,</span>&nbsp;<span class="ident" id="3195158">y</span>&nbsp;<span class="builtintype" id="3195160">int</span><span class="op" id="3195163">,</span>&nbsp;<span class="ident" id="3195165">c</span>&nbsp;<span class="ident" id="3195167"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3195172">.</span><span class="ident" id="3195173">RGBA64</span><span class="op" id="3195179">)</span>&nbsp;<span class="op" id="3195181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3195184">if</span>&nbsp;<span class="op" id="3195187">!</span><span class="op" id="3195188">(</span><span class="ident" id="3195189"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3195194">{</span><span class="ident" id="3195195"><a href="/image/image.go.html#3195155">x</a></span><span class="op" id="3195196">,</span>&nbsp;<span class="ident" id="3195198"><a href="/image/image.go.html#3195158">y</a></span><span class="op" id="3195199">}</span><span class="op" id="3195200">.</span><span class="ident" id="3195201">In</span><span class="op" id="3195203">(</span><span class="ident" id="3195204"><a href="/image/image.go.html#3195134">p</a></span><span class="op" id="3195205">.</span><span class="ident" id="3195206">Rect</span><span class="op" id="3195210">)</span><span class="op" id="3195211">)</span>&nbsp;<span class="op" id="3195213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3195217">return</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3195225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195228">i</span>&nbsp;<span class="op" id="3195230">:=</span>&nbsp;<span class="ident" id="3195233"><a href="/image/image.go.html#3195134">p</a></span><span class="op" id="3195234">.</span><span class="ident" id="3195235">PixOffset</span><span class="op" id="3195244">(</span><span class="ident" id="3195245"><a href="/image/image.go.html#3195155">x</a></span><span class="op" id="3195246">,</span>&nbsp;<span class="ident" id="3195248"><a href="/image/image.go.html#3195158">y</a></span><span class="op" id="3195249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195252"><a href="/image/image.go.html#3195134">p</a></span><span class="op" id="3195253">.</span><span class="ident" id="3195254">Pix</span><span class="op" id="3195257">[</span><span class="ident" id="3195258"><a href="/image/image.go.html#3195228">i</a></span><span class="op" id="3195259">+</span><span class="num" id="3195260">0</span><span class="op" id="3195261">]</span>&nbsp;<span class="op" id="3195263">=</span>&nbsp;<span class="builtintype" id="3195265">uint8</span><span class="op" id="3195270">(</span><span class="ident" id="3195271"><a href="/image/image.go.html#3195165">c</a></span><span class="op" id="3195272">.</span><span class="ident" id="3195273">R</span>&nbsp;<span class="op" id="3195275">&gt;&gt;</span>&nbsp;<span class="num" id="3195278">8</span><span class="op" id="3195279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195282"><a href="/image/image.go.html#3195134">p</a></span><span class="op" id="3195283">.</span><span class="ident" id="3195284">Pix</span><span class="op" id="3195287">[</span><span class="ident" id="3195288"><a href="/image/image.go.html#3195228">i</a></span><span class="op" id="3195289">+</span><span class="num" id="3195290">1</span><span class="op" id="3195291">]</span>&nbsp;<span class="op" id="3195293">=</span>&nbsp;<span class="builtintype" id="3195295">uint8</span><span class="op" id="3195300">(</span><span class="ident" id="3195301"><a href="/image/image.go.html#3195165">c</a></span><span class="op" id="3195302">.</span><span class="ident" id="3195303">R</span><span class="op" id="3195304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195307"><a href="/image/image.go.html#3195134">p</a></span><span class="op" id="3195308">.</span><span class="ident" id="3195309">Pix</span><span class="op" id="3195312">[</span><span class="ident" id="3195313"><a href="/image/image.go.html#3195228">i</a></span><span class="op" id="3195314">+</span><span class="num" id="3195315">2</span><span class="op" id="3195316">]</span>&nbsp;<span class="op" id="3195318">=</span>&nbsp;<span class="builtintype" id="3195320">uint8</span><span class="op" id="3195325">(</span><span class="ident" id="3195326"><a href="/image/image.go.html#3195165">c</a></span><span class="op" id="3195327">.</span><span class="ident" id="3195328">G</span>&nbsp;<span class="op" id="3195330">&gt;&gt;</span>&nbsp;<span class="num" id="3195333">8</span><span class="op" id="3195334">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195337"><a href="/image/image.go.html#3195134">p</a></span><span class="op" id="3195338">.</span><span class="ident" id="3195339">Pix</span><span class="op" id="3195342">[</span><span class="ident" id="3195343"><a href="/image/image.go.html#3195228">i</a></span><span class="op" id="3195344">+</span><span class="num" id="3195345">3</span><span class="op" id="3195346">]</span>&nbsp;<span class="op" id="3195348">=</span>&nbsp;<span class="builtintype" id="3195350">uint8</span><span class="op" id="3195355">(</span><span class="ident" id="3195356"><a href="/image/image.go.html#3195165">c</a></span><span class="op" id="3195357">.</span><span class="ident" id="3195358">G</span><span class="op" id="3195359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195362"><a href="/image/image.go.html#3195134">p</a></span><span class="op" id="3195363">.</span><span class="ident" id="3195364">Pix</span><span class="op" id="3195367">[</span><span class="ident" id="3195368"><a href="/image/image.go.html#3195228">i</a></span><span class="op" id="3195369">+</span><span class="num" id="3195370">4</span><span class="op" id="3195371">]</span>&nbsp;<span class="op" id="3195373">=</span>&nbsp;<span class="builtintype" id="3195375">uint8</span><span class="op" id="3195380">(</span><span class="ident" id="3195381"><a href="/image/image.go.html#3195165">c</a></span><span class="op" id="3195382">.</span><span class="ident" id="3195383">B</span>&nbsp;<span class="op" id="3195385">&gt;&gt;</span>&nbsp;<span class="num" id="3195388">8</span><span class="op" id="3195389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195392"><a href="/image/image.go.html#3195134">p</a></span><span class="op" id="3195393">.</span><span class="ident" id="3195394">Pix</span><span class="op" id="3195397">[</span><span class="ident" id="3195398"><a href="/image/image.go.html#3195228">i</a></span><span class="op" id="3195399">+</span><span class="num" id="3195400">5</span><span class="op" id="3195401">]</span>&nbsp;<span class="op" id="3195403">=</span>&nbsp;<span class="builtintype" id="3195405">uint8</span><span class="op" id="3195410">(</span><span class="ident" id="3195411"><a href="/image/image.go.html#3195165">c</a></span><span class="op" id="3195412">.</span><span class="ident" id="3195413">B</span><span class="op" id="3195414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195417"><a href="/image/image.go.html#3195134">p</a></span><span class="op" id="3195418">.</span><span class="ident" id="3195419">Pix</span><span class="op" id="3195422">[</span><span class="ident" id="3195423"><a href="/image/image.go.html#3195228">i</a></span><span class="op" id="3195424">+</span><span class="num" id="3195425">6</span><span class="op" id="3195426">]</span>&nbsp;<span class="op" id="3195428">=</span>&nbsp;<span class="builtintype" id="3195430">uint8</span><span class="op" id="3195435">(</span><span class="ident" id="3195436"><a href="/image/image.go.html#3195165">c</a></span><span class="op" id="3195437">.</span><span class="ident" id="3195438">A</span>&nbsp;<span class="op" id="3195440">&gt;&gt;</span>&nbsp;<span class="num" id="3195443">8</span><span class="op" id="3195444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195447"><a href="/image/image.go.html#3195134">p</a></span><span class="op" id="3195448">.</span><span class="ident" id="3195449">Pix</span><span class="op" id="3195452">[</span><span class="ident" id="3195453"><a href="/image/image.go.html#3195228">i</a></span><span class="op" id="3195454">+</span><span class="num" id="3195455">7</span><span class="op" id="3195456">]</span>&nbsp;<span class="op" id="3195458">=</span>&nbsp;<span class="builtintype" id="3195460">uint8</span><span class="op" id="3195465">(</span><span class="ident" id="3195466"><a href="/image/image.go.html#3195165">c</a></span><span class="op" id="3195467">.</span><span class="ident" id="3195468">A</span><span class="op" id="3195469">)</span><br>
<span class="lineno">225</span><span class="op" id="3195471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3195474">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="3195551">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="3195623">func</span>&nbsp;<span class="op" id="3195628">(</span><span class="ident" id="3195629">p</span>&nbsp;<span class="op" id="3195631">*</span><span class="ident" id="3195632"><a href="/image/image.go.html#3193655">RGBA64</a></span><span class="op" id="3195638">)</span>&nbsp;<span class="ident" id="3195640">SubImage</span><span class="op" id="3195648">(</span><span class="ident" id="3195649">r</span>&nbsp;<span class="ident" id="3195651"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3195660">)</span>&nbsp;<span class="ident" id="3195662"><a href="/image/image.go.html#3190140">Image</a></span>&nbsp;<span class="op" id="3195668">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195671"><a href="/image/image.go.html#3195649">r</a></span>&nbsp;<span class="op" id="3195673">=</span>&nbsp;<span class="ident" id="3195675"><a href="/image/image.go.html#3195649">r</a></span><span class="op" id="3195676">.</span><span class="ident" id="3195677">Intersect</span><span class="op" id="3195686">(</span><span class="ident" id="3195687"><a href="/image/image.go.html#3195629">p</a></span><span class="op" id="3195688">.</span><span class="ident" id="3195689">Rect</span><span class="op" id="3195693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3195696">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3195777">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3195859">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3195909">if</span>&nbsp;<span class="ident" id="3195912"><a href="/image/image.go.html#3195649">r</a></span><span class="op" id="3195913">.</span><span class="ident" id="3195914">Empty</span><span class="op" id="3195919">(</span><span class="op" id="3195920">)</span>&nbsp;<span class="op" id="3195922">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3195926">return</span>&nbsp;<span class="op" id="3195933">&amp;</span><span class="ident" id="3195934"><a href="/image/image.go.html#3193655">RGBA64</a></span><span class="op" id="3195940">{</span><span class="op" id="3195941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3195944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3195947">i</span>&nbsp;<span class="op" id="3195949">:=</span>&nbsp;<span class="ident" id="3195952"><a href="/image/image.go.html#3195629">p</a></span><span class="op" id="3195953">.</span><span class="ident" id="3195954">PixOffset</span><span class="op" id="3195963">(</span><span class="ident" id="3195964"><a href="/image/image.go.html#3195649">r</a></span><span class="op" id="3195965">.</span><span class="ident" id="3195966">Min</span><span class="op" id="3195969">.</span><span class="ident" id="3195970">X</span><span class="op" id="3195971">,</span>&nbsp;<span class="ident" id="3195973"><a href="/image/image.go.html#3195649">r</a></span><span class="op" id="3195974">.</span><span class="ident" id="3195975">Min</span><span class="op" id="3195978">.</span><span class="ident" id="3195979">Y</span><span class="op" id="3195980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3195983">return</span>&nbsp;<span class="op" id="3195990">&amp;</span><span class="ident" id="3195991"><a href="/image/image.go.html#3193655">RGBA64</a></span><span class="op" id="3195997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3196001">Pix</span><span class="op" id="3196004">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3196009"><a href="/image/image.go.html#3195629">p</a></span><span class="op" id="3196010">.</span><span class="ident" id="3196011">Pix</span><span class="op" id="3196014">[</span><span class="ident" id="3196015"><a href="/image/image.go.html#3195947">i</a></span><span class="op" id="3196016">:</span><span class="op" id="3196017">]</span><span class="op" id="3196018">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3196022">Stride</span><span class="op" id="3196028">:</span>&nbsp;<span class="ident" id="3196030"><a href="/image/image.go.html#3195629">p</a></span><span class="op" id="3196031">.</span><span class="ident" id="3196032">Stride</span><span class="op" id="3196038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3196042">Rect</span><span class="op" id="3196046">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3196050"><a href="/image/image.go.html#3195649">r</a></span><span class="op" id="3196051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3196054">}</span><br>
<span class="lineno"></span><span class="op" id="3196056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="3196059">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="3196132">func</span>&nbsp;<span class="op" id="3196137">(</span><span class="ident" id="3196138">p</span>&nbsp;<span class="op" id="3196140">*</span><span class="ident" id="3196141"><a href="/image/image.go.html#3193655">RGBA64</a></span><span class="op" id="3196147">)</span>&nbsp;<span class="ident" id="3196149">Opaque</span><span class="op" id="3196155">(</span><span class="op" id="3196156">)</span>&nbsp;<span class="builtintype" id="3196158">bool</span>&nbsp;<span class="op" id="3196163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3196166">if</span>&nbsp;<span class="ident" id="3196169"><a href="/image/image.go.html#3196138">p</a></span><span class="op" id="3196170">.</span><span class="ident" id="3196171">Rect</span><span class="op" id="3196175">.</span><span class="ident" id="3196176">Empty</span><span class="op" id="3196181">(</span><span class="op" id="3196182">)</span>&nbsp;<span class="op" id="3196184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3196188">return</span>&nbsp;<span class="builtintype" id="3196195">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3196201">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3196204">i0</span><span class="op" id="3196206">,</span>&nbsp;<span class="ident" id="3196208">i1</span>&nbsp;<span class="op" id="3196211">:=</span>&nbsp;<span class="num" id="3196214">6</span><span class="op" id="3196215">,</span>&nbsp;<span class="ident" id="3196217"><a href="/image/image.go.html#3196138">p</a></span><span class="op" id="3196218">.</span><span class="ident" id="3196219">Rect</span><span class="op" id="3196223">.</span><span class="ident" id="3196224">Dx</span><span class="op" id="3196226">(</span><span class="op" id="3196227">)</span><span class="op" id="3196228">*</span><span class="num" id="3196229">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3196232">for</span>&nbsp;<span class="ident" id="3196236">y</span>&nbsp;<span class="op" id="3196238">:=</span>&nbsp;<span class="ident" id="3196241"><a href="/image/image.go.html#3196138">p</a></span><span class="op" id="3196242">.</span><span class="ident" id="3196243">Rect</span><span class="op" id="3196247">.</span><span class="ident" id="3196248">Min</span><span class="op" id="3196251">.</span><span class="ident" id="3196252">Y</span><span class="op" id="3196253">;</span>&nbsp;<span class="ident" id="3196255"><a href="/image/image.go.html#3196236">y</a></span>&nbsp;<span class="op" id="3196257">&lt;</span>&nbsp;<span class="ident" id="3196259"><a href="/image/image.go.html#3196138">p</a></span><span class="op" id="3196260">.</span><span class="ident" id="3196261">Rect</span><span class="op" id="3196265">.</span><span class="ident" id="3196266">Max</span><span class="op" id="3196269">.</span><span class="ident" id="3196270">Y</span><span class="op" id="3196271">;</span>&nbsp;<span class="ident" id="3196273"><a href="/image/image.go.html#3196236">y</a></span><span class="op" id="3196274">++</span>&nbsp;<span class="op" id="3196277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3196281">for</span>&nbsp;<span class="ident" id="3196285">i</span>&nbsp;<span class="op" id="3196287">:=</span>&nbsp;<span class="ident" id="3196290"><a href="/image/image.go.html#3196204">i0</a></span><span class="op" id="3196292">;</span>&nbsp;<span class="ident" id="3196294"><a href="/image/image.go.html#3196285">i</a></span>&nbsp;<span class="op" id="3196296">&lt;</span>&nbsp;<span class="ident" id="3196298"><a href="/image/image.go.html#3196208">i1</a></span><span class="op" id="3196300">;</span>&nbsp;<span class="ident" id="3196302"><a href="/image/image.go.html#3196285">i</a></span>&nbsp;<span class="op" id="3196304">+=</span>&nbsp;<span class="num" id="3196307">8</span>&nbsp;<span class="op" id="3196309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3196314">if</span>&nbsp;<span class="ident" id="3196317"><a href="/image/image.go.html#3196138">p</a></span><span class="op" id="3196318">.</span><span class="ident" id="3196319">Pix</span><span class="op" id="3196322">[</span><span class="ident" id="3196323"><a href="/image/image.go.html#3196285">i</a></span><span class="op" id="3196324">+</span><span class="num" id="3196325">0</span><span class="op" id="3196326">]</span>&nbsp;<span class="op" id="3196328">!=</span>&nbsp;<span class="num" id="3196331">0xff</span>&nbsp;<span class="op" id="3196336">||</span>&nbsp;<span class="ident" id="3196339"><a href="/image/image.go.html#3196138">p</a></span><span class="op" id="3196340">.</span><span class="ident" id="3196341">Pix</span><span class="op" id="3196344">[</span><span class="ident" id="3196345"><a href="/image/image.go.html#3196285">i</a></span><span class="op" id="3196346">+</span><span class="num" id="3196347">1</span><span class="op" id="3196348">]</span>&nbsp;<span class="op" id="3196350">!=</span>&nbsp;<span class="num" id="3196353">0xff</span>&nbsp;<span class="op" id="3196358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3196364">return</span>&nbsp;<span class="builtintype" id="3196371">false</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3196380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3196384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3196388"><a href="/image/image.go.html#3196204">i0</a></span>&nbsp;<span class="op" id="3196391">+=</span>&nbsp;<span class="ident" id="3196394"><a href="/image/image.go.html#3196138">p</a></span><span class="op" id="3196395">.</span><span class="ident" id="3196396">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3196405"><a href="/image/image.go.html#3196208">i1</a></span>&nbsp;<span class="op" id="3196408">+=</span>&nbsp;<span class="ident" id="3196411"><a href="/image/image.go.html#3196138">p</a></span><span class="op" id="3196412">.</span><span class="ident" id="3196413">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3196421">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3196424">return</span>&nbsp;<span class="builtintype" id="3196431">true</span><br>
<span class="lineno"></span><span class="op" id="3196436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3196439">//&nbsp;NewRGBA64&nbsp;returns&nbsp;a&nbsp;new&nbsp;RGBA64&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="3196496">func</span>&nbsp;<span class="ident" id="3196501">NewRGBA64</span><span class="op" id="3196510">(</span><span class="ident" id="3196511">r</span>&nbsp;<span class="ident" id="3196513"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3196522">)</span>&nbsp;<span class="op" id="3196524">*</span><span class="ident" id="3196525"><a href="/image/image.go.html#3193655">RGBA64</a></span>&nbsp;<span class="op" id="3196532">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3196535">w</span><span class="op" id="3196536">,</span>&nbsp;<span class="ident" id="3196538">h</span>&nbsp;<span class="op" id="3196540">:=</span>&nbsp;<span class="ident" id="3196543"><a href="/image/image.go.html#3196511">r</a></span><span class="op" id="3196544">.</span><span class="ident" id="3196545">Dx</span><span class="op" id="3196547">(</span><span class="op" id="3196548">)</span><span class="op" id="3196549">,</span>&nbsp;<span class="ident" id="3196551"><a href="/image/image.go.html#3196511">r</a></span><span class="op" id="3196552">.</span><span class="ident" id="3196553">Dy</span><span class="op" id="3196555">(</span><span class="op" id="3196556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3196559">pix</span>&nbsp;<span class="op" id="3196563">:=</span>&nbsp;<span class="builtinfunc" id="3196566">make</span><span class="op" id="3196570">(</span><span class="op" id="3196571">[</span><span class="op" id="3196572">]</span><span class="builtintype" id="3196573">uint8</span><span class="op" id="3196578">,</span>&nbsp;<span class="num" id="3196580">8</span><span class="op" id="3196581">*</span><span class="ident" id="3196582"><a href="/image/image.go.html#3196535">w</a></span><span class="op" id="3196583">*</span><span class="ident" id="3196584"><a href="/image/image.go.html#3196538">h</a></span><span class="op" id="3196585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3196588">return</span>&nbsp;<span class="op" id="3196595">&amp;</span><span class="ident" id="3196596"><a href="/image/image.go.html#3193655">RGBA64</a></span><span class="op" id="3196602">{</span><span class="ident" id="3196603"><a href="/image/image.go.html#3196559">pix</a></span><span class="op" id="3196606">,</span>&nbsp;<span class="num" id="3196608">8</span>&nbsp;<span class="op" id="3196610">*</span>&nbsp;<span class="ident" id="3196612"><a href="/image/image.go.html#3196535">w</a></span><span class="op" id="3196613">,</span>&nbsp;<span class="ident" id="3196615"><a href="/image/image.go.html#3196511">r</a></span><span class="op" id="3196616">}</span><br>
<span class="lineno"></span><span class="op" id="3196618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="3196621">//&nbsp;NRGBA&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.NRGBA&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="3196696">type</span>&nbsp;<span class="ident" id="3196701">NRGBA</span>&nbsp;<span class="keyword" id="3196707">struct</span>&nbsp;<span class="op" id="3196714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3196717">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;in&nbsp;R,&nbsp;G,&nbsp;B,&nbsp;A&nbsp;order.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3196785">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*4].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3196853">Pix</span>&nbsp;<span class="op" id="3196857">[</span><span class="op" id="3196858">]</span><span class="builtintype" id="3196859">uint8</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3196866">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3196942">Stride</span>&nbsp;<span class="builtintype" id="3196949">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3196954">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3196986">Rect</span>&nbsp;<span class="ident" id="3196991"><a href="/image/geom.go.html#3185229">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="3197001">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="3197004">func</span>&nbsp;<span class="op" id="3197009">(</span><span class="ident" id="3197010">p</span>&nbsp;<span class="op" id="3197012">*</span><span class="ident" id="3197013"><a href="/image/image.go.html#3196701">NRGBA</a></span><span class="op" id="3197018">)</span>&nbsp;<span class="ident" id="3197020">ColorModel</span><span class="op" id="3197030">(</span><span class="op" id="3197031">)</span>&nbsp;<span class="ident" id="3197033"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3197038">.</span><span class="ident" id="3197039">Model</span>&nbsp;<span class="op" id="3197045">{</span>&nbsp;<span class="keyword" id="3197047">return</span>&nbsp;<span class="ident" id="3197054"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3197059">.</span><span class="ident" id="3197060">NRGBAModel</span>&nbsp;<span class="op" id="3197071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3197074">func</span>&nbsp;<span class="op" id="3197079">(</span><span class="ident" id="3197080">p</span>&nbsp;<span class="op" id="3197082">*</span><span class="ident" id="3197083"><a href="/image/image.go.html#3196701">NRGBA</a></span><span class="op" id="3197088">)</span>&nbsp;<span class="ident" id="3197090">Bounds</span><span class="op" id="3197096">(</span><span class="op" id="3197097">)</span>&nbsp;<span class="ident" id="3197099"><a href="/image/geom.go.html#3185229">Rectangle</a></span>&nbsp;<span class="op" id="3197109">{</span>&nbsp;<span class="keyword" id="3197111">return</span>&nbsp;<span class="ident" id="3197118"><a href="/image/image.go.html#3197080">p</a></span><span class="op" id="3197119">.</span><span class="ident" id="3197120">Rect</span>&nbsp;<span class="op" id="3197125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="3197128">func</span>&nbsp;<span class="op" id="3197133">(</span><span class="ident" id="3197134">p</span>&nbsp;<span class="op" id="3197136">*</span><span class="ident" id="3197137"><a href="/image/image.go.html#3196701">NRGBA</a></span><span class="op" id="3197142">)</span>&nbsp;<span class="ident" id="3197144">At</span><span class="op" id="3197146">(</span><span class="ident" id="3197147">x</span><span class="op" id="3197148">,</span>&nbsp;<span class="ident" id="3197150">y</span>&nbsp;<span class="builtintype" id="3197152">int</span><span class="op" id="3197155">)</span>&nbsp;<span class="ident" id="3197157"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3197162">.</span><span class="ident" id="3197163">Color</span>&nbsp;<span class="op" id="3197169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3197172">return</span>&nbsp;<span class="ident" id="3197179"><a href="/image/image.go.html#3197134">p</a></span><span class="op" id="3197180">.</span><span class="ident" id="3197181">NRGBAAt</span><span class="op" id="3197188">(</span><span class="ident" id="3197189"><a href="/image/image.go.html#3197147">x</a></span><span class="op" id="3197190">,</span>&nbsp;<span class="ident" id="3197192"><a href="/image/image.go.html#3197150">y</a></span><span class="op" id="3197193">)</span><br>
<span class="lineno"></span><span class="op" id="3197195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3197198">func</span>&nbsp;<span class="op" id="3197203">(</span><span class="ident" id="3197204">p</span>&nbsp;<span class="op" id="3197206">*</span><span class="ident" id="3197207"><a href="/image/image.go.html#3196701">NRGBA</a></span><span class="op" id="3197212">)</span>&nbsp;<span class="ident" id="3197214">NRGBAAt</span><span class="op" id="3197221">(</span><span class="ident" id="3197222">x</span><span class="op" id="3197223">,</span>&nbsp;<span class="ident" id="3197225">y</span>&nbsp;<span class="builtintype" id="3197227">int</span><span class="op" id="3197230">)</span>&nbsp;<span class="ident" id="3197232"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3197237">.</span><span class="ident" id="3197238">NRGBA</span>&nbsp;<span class="op" id="3197244">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3197247">if</span>&nbsp;<span class="op" id="3197250">!</span><span class="op" id="3197251">(</span><span class="ident" id="3197252"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3197257">{</span><span class="ident" id="3197258"><a href="/image/image.go.html#3197222">x</a></span><span class="op" id="3197259">,</span>&nbsp;<span class="ident" id="3197261"><a href="/image/image.go.html#3197225">y</a></span><span class="op" id="3197262">}</span><span class="op" id="3197263">.</span><span class="ident" id="3197264">In</span><span class="op" id="3197266">(</span><span class="ident" id="3197267"><a href="/image/image.go.html#3197204">p</a></span><span class="op" id="3197268">.</span><span class="ident" id="3197269">Rect</span><span class="op" id="3197273">)</span><span class="op" id="3197274">)</span>&nbsp;<span class="op" id="3197276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3197280">return</span>&nbsp;<span class="ident" id="3197287"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3197292">.</span><span class="ident" id="3197293">NRGBA</span><span class="op" id="3197298">{</span><span class="op" id="3197299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3197302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3197305">i</span>&nbsp;<span class="op" id="3197307">:=</span>&nbsp;<span class="ident" id="3197310"><a href="/image/image.go.html#3197204">p</a></span><span class="op" id="3197311">.</span><span class="ident" id="3197312">PixOffset</span><span class="op" id="3197321">(</span><span class="ident" id="3197322"><a href="/image/image.go.html#3197222">x</a></span><span class="op" id="3197323">,</span>&nbsp;<span class="ident" id="3197325"><a href="/image/image.go.html#3197225">y</a></span><span class="op" id="3197326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3197329">return</span>&nbsp;<span class="ident" id="3197336"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3197341">.</span><span class="ident" id="3197342">NRGBA</span><span class="op" id="3197347">{</span><span class="ident" id="3197348"><a href="/image/image.go.html#3197204">p</a></span><span class="op" id="3197349">.</span><span class="ident" id="3197350">Pix</span><span class="op" id="3197353">[</span><span class="ident" id="3197354"><a href="/image/image.go.html#3197305">i</a></span><span class="op" id="3197355">+</span><span class="num" id="3197356">0</span><span class="op" id="3197357">]</span><span class="op" id="3197358">,</span>&nbsp;<span class="ident" id="3197360"><a href="/image/image.go.html#3197204">p</a></span><span class="op" id="3197361">.</span><span class="ident" id="3197362">Pix</span><span class="op" id="3197365">[</span><span class="ident" id="3197366"><a href="/image/image.go.html#3197305">i</a></span><span class="op" id="3197367">+</span><span class="num" id="3197368">1</span><span class="op" id="3197369">]</span><span class="op" id="3197370">,</span>&nbsp;<span class="ident" id="3197372"><a href="/image/image.go.html#3197204">p</a></span><span class="op" id="3197373">.</span><span class="ident" id="3197374">Pix</span><span class="op" id="3197377">[</span><span class="ident" id="3197378"><a href="/image/image.go.html#3197305">i</a></span><span class="op" id="3197379">+</span><span class="num" id="3197380">2</span><span class="op" id="3197381">]</span><span class="op" id="3197382">,</span>&nbsp;<span class="ident" id="3197384"><a href="/image/image.go.html#3197204">p</a></span><span class="op" id="3197385">.</span><span class="ident" id="3197386">Pix</span><span class="op" id="3197389">[</span><span class="ident" id="3197390"><a href="/image/image.go.html#3197305">i</a></span><span class="op" id="3197391">+</span><span class="num" id="3197392">3</span><span class="op" id="3197393">]</span><span class="op" id="3197394">}</span><br>
<span class="lineno">295</span><span class="op" id="3197396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3197399">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3197478">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="3197502">func</span>&nbsp;<span class="op" id="3197507">(</span><span class="ident" id="3197508">p</span>&nbsp;<span class="op" id="3197510">*</span><span class="ident" id="3197511"><a href="/image/image.go.html#3196701">NRGBA</a></span><span class="op" id="3197516">)</span>&nbsp;<span class="ident" id="3197518">PixOffset</span><span class="op" id="3197527">(</span><span class="ident" id="3197528">x</span><span class="op" id="3197529">,</span>&nbsp;<span class="ident" id="3197531">y</span>&nbsp;<span class="builtintype" id="3197533">int</span><span class="op" id="3197536">)</span>&nbsp;<span class="builtintype" id="3197538">int</span>&nbsp;<span class="op" id="3197542">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3197545">return</span>&nbsp;<span class="op" id="3197552">(</span><span class="ident" id="3197553"><a href="/image/image.go.html#3197531">y</a></span><span class="op" id="3197554">-</span><span class="ident" id="3197555"><a href="/image/image.go.html#3197508">p</a></span><span class="op" id="3197556">.</span><span class="ident" id="3197557">Rect</span><span class="op" id="3197561">.</span><span class="ident" id="3197562">Min</span><span class="op" id="3197565">.</span><span class="ident" id="3197566">Y</span><span class="op" id="3197567">)</span><span class="op" id="3197568">*</span><span class="ident" id="3197569"><a href="/image/image.go.html#3197508">p</a></span><span class="op" id="3197570">.</span><span class="ident" id="3197571">Stride</span>&nbsp;<span class="op" id="3197578">+</span>&nbsp;<span class="op" id="3197580">(</span><span class="ident" id="3197581"><a href="/image/image.go.html#3197528">x</a></span><span class="op" id="3197582">-</span><span class="ident" id="3197583"><a href="/image/image.go.html#3197508">p</a></span><span class="op" id="3197584">.</span><span class="ident" id="3197585">Rect</span><span class="op" id="3197589">.</span><span class="ident" id="3197590">Min</span><span class="op" id="3197593">.</span><span class="ident" id="3197594">X</span><span class="op" id="3197595">)</span><span class="op" id="3197596">*</span><span class="num" id="3197597">4</span><br>
<span class="lineno"></span><span class="op" id="3197599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3197602">func</span>&nbsp;<span class="op" id="3197607">(</span><span class="ident" id="3197608">p</span>&nbsp;<span class="op" id="3197610">*</span><span class="ident" id="3197611"><a href="/image/image.go.html#3196701">NRGBA</a></span><span class="op" id="3197616">)</span>&nbsp;<span class="ident" id="3197618">Set</span><span class="op" id="3197621">(</span><span class="ident" id="3197622">x</span><span class="op" id="3197623">,</span>&nbsp;<span class="ident" id="3197625">y</span>&nbsp;<span class="builtintype" id="3197627">int</span><span class="op" id="3197630">,</span>&nbsp;<span class="ident" id="3197632">c</span>&nbsp;<span class="ident" id="3197634"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3197639">.</span><span class="ident" id="3197640">Color</span><span class="op" id="3197645">)</span>&nbsp;<span class="op" id="3197647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3197650">if</span>&nbsp;<span class="op" id="3197653">!</span><span class="op" id="3197654">(</span><span class="ident" id="3197655"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3197660">{</span><span class="ident" id="3197661"><a href="/image/image.go.html#3197622">x</a></span><span class="op" id="3197662">,</span>&nbsp;<span class="ident" id="3197664"><a href="/image/image.go.html#3197625">y</a></span><span class="op" id="3197665">}</span><span class="op" id="3197666">.</span><span class="ident" id="3197667">In</span><span class="op" id="3197669">(</span><span class="ident" id="3197670"><a href="/image/image.go.html#3197608">p</a></span><span class="op" id="3197671">.</span><span class="ident" id="3197672">Rect</span><span class="op" id="3197676">)</span><span class="op" id="3197677">)</span>&nbsp;<span class="op" id="3197679">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3197683">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3197691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3197694">i</span>&nbsp;<span class="op" id="3197696">:=</span>&nbsp;<span class="ident" id="3197699"><a href="/image/image.go.html#3197608">p</a></span><span class="op" id="3197700">.</span><span class="ident" id="3197701">PixOffset</span><span class="op" id="3197710">(</span><span class="ident" id="3197711"><a href="/image/image.go.html#3197622">x</a></span><span class="op" id="3197712">,</span>&nbsp;<span class="ident" id="3197714"><a href="/image/image.go.html#3197625">y</a></span><span class="op" id="3197715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3197718">c1</span>&nbsp;<span class="op" id="3197721">:=</span>&nbsp;<span class="ident" id="3197724"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3197729">.</span><span class="ident" id="3197730">NRGBAModel</span><span class="op" id="3197740">.</span><span class="ident" id="3197741">Convert</span><span class="op" id="3197748">(</span><span class="ident" id="3197749"><a href="/image/image.go.html#3197632">c</a></span><span class="op" id="3197750">)</span><span class="op" id="3197751">.</span><span class="op" id="3197752">(</span><span class="ident" id="3197753"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3197758">.</span><span class="ident" id="3197759">NRGBA</span><span class="op" id="3197764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3197767"><a href="/image/image.go.html#3197608">p</a></span><span class="op" id="3197768">.</span><span class="ident" id="3197769">Pix</span><span class="op" id="3197772">[</span><span class="ident" id="3197773"><a href="/image/image.go.html#3197694">i</a></span><span class="op" id="3197774">+</span><span class="num" id="3197775">0</span><span class="op" id="3197776">]</span>&nbsp;<span class="op" id="3197778">=</span>&nbsp;<span class="ident" id="3197780"><a href="/image/image.go.html#3197718">c1</a></span><span class="op" id="3197782">.</span><span class="ident" id="3197783">R</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3197786"><a href="/image/image.go.html#3197608">p</a></span><span class="op" id="3197787">.</span><span class="ident" id="3197788">Pix</span><span class="op" id="3197791">[</span><span class="ident" id="3197792"><a href="/image/image.go.html#3197694">i</a></span><span class="op" id="3197793">+</span><span class="num" id="3197794">1</span><span class="op" id="3197795">]</span>&nbsp;<span class="op" id="3197797">=</span>&nbsp;<span class="ident" id="3197799"><a href="/image/image.go.html#3197718">c1</a></span><span class="op" id="3197801">.</span><span class="ident" id="3197802">G</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3197805"><a href="/image/image.go.html#3197608">p</a></span><span class="op" id="3197806">.</span><span class="ident" id="3197807">Pix</span><span class="op" id="3197810">[</span><span class="ident" id="3197811"><a href="/image/image.go.html#3197694">i</a></span><span class="op" id="3197812">+</span><span class="num" id="3197813">2</span><span class="op" id="3197814">]</span>&nbsp;<span class="op" id="3197816">=</span>&nbsp;<span class="ident" id="3197818"><a href="/image/image.go.html#3197718">c1</a></span><span class="op" id="3197820">.</span><span class="ident" id="3197821">B</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3197824"><a href="/image/image.go.html#3197608">p</a></span><span class="op" id="3197825">.</span><span class="ident" id="3197826">Pix</span><span class="op" id="3197829">[</span><span class="ident" id="3197830"><a href="/image/image.go.html#3197694">i</a></span><span class="op" id="3197831">+</span><span class="num" id="3197832">3</span><span class="op" id="3197833">]</span>&nbsp;<span class="op" id="3197835">=</span>&nbsp;<span class="ident" id="3197837"><a href="/image/image.go.html#3197718">c1</a></span><span class="op" id="3197839">.</span><span class="ident" id="3197840">A</span><br>
<span class="lineno"></span><span class="op" id="3197842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="3197845">func</span>&nbsp;<span class="op" id="3197850">(</span><span class="ident" id="3197851">p</span>&nbsp;<span class="op" id="3197853">*</span><span class="ident" id="3197854"><a href="/image/image.go.html#3196701">NRGBA</a></span><span class="op" id="3197859">)</span>&nbsp;<span class="ident" id="3197861">SetNRGBA</span><span class="op" id="3197869">(</span><span class="ident" id="3197870">x</span><span class="op" id="3197871">,</span>&nbsp;<span class="ident" id="3197873">y</span>&nbsp;<span class="builtintype" id="3197875">int</span><span class="op" id="3197878">,</span>&nbsp;<span class="ident" id="3197880">c</span>&nbsp;<span class="ident" id="3197882"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3197887">.</span><span class="ident" id="3197888">NRGBA</span><span class="op" id="3197893">)</span>&nbsp;<span class="op" id="3197895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3197898">if</span>&nbsp;<span class="op" id="3197901">!</span><span class="op" id="3197902">(</span><span class="ident" id="3197903"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3197908">{</span><span class="ident" id="3197909"><a href="/image/image.go.html#3197870">x</a></span><span class="op" id="3197910">,</span>&nbsp;<span class="ident" id="3197912"><a href="/image/image.go.html#3197873">y</a></span><span class="op" id="3197913">}</span><span class="op" id="3197914">.</span><span class="ident" id="3197915">In</span><span class="op" id="3197917">(</span><span class="ident" id="3197918"><a href="/image/image.go.html#3197851">p</a></span><span class="op" id="3197919">.</span><span class="ident" id="3197920">Rect</span><span class="op" id="3197924">)</span><span class="op" id="3197925">)</span>&nbsp;<span class="op" id="3197927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3197931">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3197939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3197942">i</span>&nbsp;<span class="op" id="3197944">:=</span>&nbsp;<span class="ident" id="3197947"><a href="/image/image.go.html#3197851">p</a></span><span class="op" id="3197948">.</span><span class="ident" id="3197949">PixOffset</span><span class="op" id="3197958">(</span><span class="ident" id="3197959"><a href="/image/image.go.html#3197870">x</a></span><span class="op" id="3197960">,</span>&nbsp;<span class="ident" id="3197962"><a href="/image/image.go.html#3197873">y</a></span><span class="op" id="3197963">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3197966"><a href="/image/image.go.html#3197851">p</a></span><span class="op" id="3197967">.</span><span class="ident" id="3197968">Pix</span><span class="op" id="3197971">[</span><span class="ident" id="3197972"><a href="/image/image.go.html#3197942">i</a></span><span class="op" id="3197973">+</span><span class="num" id="3197974">0</span><span class="op" id="3197975">]</span>&nbsp;<span class="op" id="3197977">=</span>&nbsp;<span class="ident" id="3197979"><a href="/image/image.go.html#3197880">c</a></span><span class="op" id="3197980">.</span><span class="ident" id="3197981">R</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3197984"><a href="/image/image.go.html#3197851">p</a></span><span class="op" id="3197985">.</span><span class="ident" id="3197986">Pix</span><span class="op" id="3197989">[</span><span class="ident" id="3197990"><a href="/image/image.go.html#3197942">i</a></span><span class="op" id="3197991">+</span><span class="num" id="3197992">1</span><span class="op" id="3197993">]</span>&nbsp;<span class="op" id="3197995">=</span>&nbsp;<span class="ident" id="3197997"><a href="/image/image.go.html#3197880">c</a></span><span class="op" id="3197998">.</span><span class="ident" id="3197999">G</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3198002"><a href="/image/image.go.html#3197851">p</a></span><span class="op" id="3198003">.</span><span class="ident" id="3198004">Pix</span><span class="op" id="3198007">[</span><span class="ident" id="3198008"><a href="/image/image.go.html#3197942">i</a></span><span class="op" id="3198009">+</span><span class="num" id="3198010">2</span><span class="op" id="3198011">]</span>&nbsp;<span class="op" id="3198013">=</span>&nbsp;<span class="ident" id="3198015"><a href="/image/image.go.html#3197880">c</a></span><span class="op" id="3198016">.</span><span class="ident" id="3198017">B</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3198020"><a href="/image/image.go.html#3197851">p</a></span><span class="op" id="3198021">.</span><span class="ident" id="3198022">Pix</span><span class="op" id="3198025">[</span><span class="ident" id="3198026"><a href="/image/image.go.html#3197942">i</a></span><span class="op" id="3198027">+</span><span class="num" id="3198028">3</span><span class="op" id="3198029">]</span>&nbsp;<span class="op" id="3198031">=</span>&nbsp;<span class="ident" id="3198033"><a href="/image/image.go.html#3197880">c</a></span><span class="op" id="3198034">.</span><span class="ident" id="3198035">A</span><br>
<span class="lineno"></span><span class="op" id="3198037">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="comment" id="3198040">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="3198117">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="3198189">func</span>&nbsp;<span class="op" id="3198194">(</span><span class="ident" id="3198195">p</span>&nbsp;<span class="op" id="3198197">*</span><span class="ident" id="3198198"><a href="/image/image.go.html#3196701">NRGBA</a></span><span class="op" id="3198203">)</span>&nbsp;<span class="ident" id="3198205">SubImage</span><span class="op" id="3198213">(</span><span class="ident" id="3198214">r</span>&nbsp;<span class="ident" id="3198216"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3198225">)</span>&nbsp;<span class="ident" id="3198227"><a href="/image/image.go.html#3190140">Image</a></span>&nbsp;<span class="op" id="3198233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3198236"><a href="/image/image.go.html#3198214">r</a></span>&nbsp;<span class="op" id="3198238">=</span>&nbsp;<span class="ident" id="3198240"><a href="/image/image.go.html#3198214">r</a></span><span class="op" id="3198241">.</span><span class="ident" id="3198242">Intersect</span><span class="op" id="3198251">(</span><span class="ident" id="3198252"><a href="/image/image.go.html#3198195">p</a></span><span class="op" id="3198253">.</span><span class="ident" id="3198254">Rect</span><span class="op" id="3198258">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3198261">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3198342">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3198424">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3198474">if</span>&nbsp;<span class="ident" id="3198477"><a href="/image/image.go.html#3198214">r</a></span><span class="op" id="3198478">.</span><span class="ident" id="3198479">Empty</span><span class="op" id="3198484">(</span><span class="op" id="3198485">)</span>&nbsp;<span class="op" id="3198487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3198491">return</span>&nbsp;<span class="op" id="3198498">&amp;</span><span class="ident" id="3198499"><a href="/image/image.go.html#3196701">NRGBA</a></span><span class="op" id="3198504">{</span><span class="op" id="3198505">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3198508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3198511">i</span>&nbsp;<span class="op" id="3198513">:=</span>&nbsp;<span class="ident" id="3198516"><a href="/image/image.go.html#3198195">p</a></span><span class="op" id="3198517">.</span><span class="ident" id="3198518">PixOffset</span><span class="op" id="3198527">(</span><span class="ident" id="3198528"><a href="/image/image.go.html#3198214">r</a></span><span class="op" id="3198529">.</span><span class="ident" id="3198530">Min</span><span class="op" id="3198533">.</span><span class="ident" id="3198534">X</span><span class="op" id="3198535">,</span>&nbsp;<span class="ident" id="3198537"><a href="/image/image.go.html#3198214">r</a></span><span class="op" id="3198538">.</span><span class="ident" id="3198539">Min</span><span class="op" id="3198542">.</span><span class="ident" id="3198543">Y</span><span class="op" id="3198544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3198547">return</span>&nbsp;<span class="op" id="3198554">&amp;</span><span class="ident" id="3198555"><a href="/image/image.go.html#3196701">NRGBA</a></span><span class="op" id="3198560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3198564">Pix</span><span class="op" id="3198567">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3198572"><a href="/image/image.go.html#3198195">p</a></span><span class="op" id="3198573">.</span><span class="ident" id="3198574">Pix</span><span class="op" id="3198577">[</span><span class="ident" id="3198578"><a href="/image/image.go.html#3198511">i</a></span><span class="op" id="3198579">:</span><span class="op" id="3198580">]</span><span class="op" id="3198581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3198585">Stride</span><span class="op" id="3198591">:</span>&nbsp;<span class="ident" id="3198593"><a href="/image/image.go.html#3198195">p</a></span><span class="op" id="3198594">.</span><span class="ident" id="3198595">Stride</span><span class="op" id="3198601">,</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3198605">Rect</span><span class="op" id="3198609">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3198613"><a href="/image/image.go.html#3198214">r</a></span><span class="op" id="3198614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3198617">}</span><br>
<span class="lineno"></span><span class="op" id="3198619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3198622">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno">345</span><span class="keyword" id="3198695">func</span>&nbsp;<span class="op" id="3198700">(</span><span class="ident" id="3198701">p</span>&nbsp;<span class="op" id="3198703">*</span><span class="ident" id="3198704"><a href="/image/image.go.html#3196701">NRGBA</a></span><span class="op" id="3198709">)</span>&nbsp;<span class="ident" id="3198711">Opaque</span><span class="op" id="3198717">(</span><span class="op" id="3198718">)</span>&nbsp;<span class="builtintype" id="3198720">bool</span>&nbsp;<span class="op" id="3198725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3198728">if</span>&nbsp;<span class="ident" id="3198731"><a href="/image/image.go.html#3198701">p</a></span><span class="op" id="3198732">.</span><span class="ident" id="3198733">Rect</span><span class="op" id="3198737">.</span><span class="ident" id="3198738">Empty</span><span class="op" id="3198743">(</span><span class="op" id="3198744">)</span>&nbsp;<span class="op" id="3198746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3198750">return</span>&nbsp;<span class="builtintype" id="3198757">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3198763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3198766">i0</span><span class="op" id="3198768">,</span>&nbsp;<span class="ident" id="3198770">i1</span>&nbsp;<span class="op" id="3198773">:=</span>&nbsp;<span class="num" id="3198776">3</span><span class="op" id="3198777">,</span>&nbsp;<span class="ident" id="3198779"><a href="/image/image.go.html#3198701">p</a></span><span class="op" id="3198780">.</span><span class="ident" id="3198781">Rect</span><span class="op" id="3198785">.</span><span class="ident" id="3198786">Dx</span><span class="op" id="3198788">(</span><span class="op" id="3198789">)</span><span class="op" id="3198790">*</span><span class="num" id="3198791">4</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3198794">for</span>&nbsp;<span class="ident" id="3198798">y</span>&nbsp;<span class="op" id="3198800">:=</span>&nbsp;<span class="ident" id="3198803"><a href="/image/image.go.html#3198701">p</a></span><span class="op" id="3198804">.</span><span class="ident" id="3198805">Rect</span><span class="op" id="3198809">.</span><span class="ident" id="3198810">Min</span><span class="op" id="3198813">.</span><span class="ident" id="3198814">Y</span><span class="op" id="3198815">;</span>&nbsp;<span class="ident" id="3198817"><a href="/image/image.go.html#3198798">y</a></span>&nbsp;<span class="op" id="3198819">&lt;</span>&nbsp;<span class="ident" id="3198821"><a href="/image/image.go.html#3198701">p</a></span><span class="op" id="3198822">.</span><span class="ident" id="3198823">Rect</span><span class="op" id="3198827">.</span><span class="ident" id="3198828">Max</span><span class="op" id="3198831">.</span><span class="ident" id="3198832">Y</span><span class="op" id="3198833">;</span>&nbsp;<span class="ident" id="3198835"><a href="/image/image.go.html#3198798">y</a></span><span class="op" id="3198836">++</span>&nbsp;<span class="op" id="3198839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3198843">for</span>&nbsp;<span class="ident" id="3198847">i</span>&nbsp;<span class="op" id="3198849">:=</span>&nbsp;<span class="ident" id="3198852"><a href="/image/image.go.html#3198766">i0</a></span><span class="op" id="3198854">;</span>&nbsp;<span class="ident" id="3198856"><a href="/image/image.go.html#3198847">i</a></span>&nbsp;<span class="op" id="3198858">&lt;</span>&nbsp;<span class="ident" id="3198860"><a href="/image/image.go.html#3198770">i1</a></span><span class="op" id="3198862">;</span>&nbsp;<span class="ident" id="3198864"><a href="/image/image.go.html#3198847">i</a></span>&nbsp;<span class="op" id="3198866">+=</span>&nbsp;<span class="num" id="3198869">4</span>&nbsp;<span class="op" id="3198871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3198876">if</span>&nbsp;<span class="ident" id="3198879"><a href="/image/image.go.html#3198701">p</a></span><span class="op" id="3198880">.</span><span class="ident" id="3198881">Pix</span><span class="op" id="3198884">[</span><span class="ident" id="3198885"><a href="/image/image.go.html#3198847">i</a></span><span class="op" id="3198886">]</span>&nbsp;<span class="op" id="3198888">!=</span>&nbsp;<span class="num" id="3198891">0xff</span>&nbsp;<span class="op" id="3198896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3198902">return</span>&nbsp;<span class="builtintype" id="3198909">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3198918">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3198922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3198926"><a href="/image/image.go.html#3198766">i0</a></span>&nbsp;<span class="op" id="3198929">+=</span>&nbsp;<span class="ident" id="3198932"><a href="/image/image.go.html#3198701">p</a></span><span class="op" id="3198933">.</span><span class="ident" id="3198934">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3198943"><a href="/image/image.go.html#3198770">i1</a></span>&nbsp;<span class="op" id="3198946">+=</span>&nbsp;<span class="ident" id="3198949"><a href="/image/image.go.html#3198701">p</a></span><span class="op" id="3198950">.</span><span class="ident" id="3198951">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3198959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3198962">return</span>&nbsp;<span class="builtintype" id="3198969">true</span><br>
<span class="lineno">360</span><span class="op" id="3198974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3198977">//&nbsp;NewNRGBA&nbsp;returns&nbsp;a&nbsp;new&nbsp;NRGBA&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="3199032">func</span>&nbsp;<span class="ident" id="3199037">NewNRGBA</span><span class="op" id="3199045">(</span><span class="ident" id="3199046">r</span>&nbsp;<span class="ident" id="3199048"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3199057">)</span>&nbsp;<span class="op" id="3199059">*</span><span class="ident" id="3199060"><a href="/image/image.go.html#3196701">NRGBA</a></span>&nbsp;<span class="op" id="3199066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3199069">w</span><span class="op" id="3199070">,</span>&nbsp;<span class="ident" id="3199072">h</span>&nbsp;<span class="op" id="3199074">:=</span>&nbsp;<span class="ident" id="3199077"><a href="/image/image.go.html#3199046">r</a></span><span class="op" id="3199078">.</span><span class="ident" id="3199079">Dx</span><span class="op" id="3199081">(</span><span class="op" id="3199082">)</span><span class="op" id="3199083">,</span>&nbsp;<span class="ident" id="3199085"><a href="/image/image.go.html#3199046">r</a></span><span class="op" id="3199086">.</span><span class="ident" id="3199087">Dy</span><span class="op" id="3199089">(</span><span class="op" id="3199090">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3199093">pix</span>&nbsp;<span class="op" id="3199097">:=</span>&nbsp;<span class="builtinfunc" id="3199100">make</span><span class="op" id="3199104">(</span><span class="op" id="3199105">[</span><span class="op" id="3199106">]</span><span class="builtintype" id="3199107">uint8</span><span class="op" id="3199112">,</span>&nbsp;<span class="num" id="3199114">4</span><span class="op" id="3199115">*</span><span class="ident" id="3199116"><a href="/image/image.go.html#3199069">w</a></span><span class="op" id="3199117">*</span><span class="ident" id="3199118"><a href="/image/image.go.html#3199072">h</a></span><span class="op" id="3199119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3199122">return</span>&nbsp;<span class="op" id="3199129">&amp;</span><span class="ident" id="3199130"><a href="/image/image.go.html#3196701">NRGBA</a></span><span class="op" id="3199135">{</span><span class="ident" id="3199136"><a href="/image/image.go.html#3199093">pix</a></span><span class="op" id="3199139">,</span>&nbsp;<span class="num" id="3199141">4</span>&nbsp;<span class="op" id="3199143">*</span>&nbsp;<span class="ident" id="3199145"><a href="/image/image.go.html#3199069">w</a></span><span class="op" id="3199146">,</span>&nbsp;<span class="ident" id="3199148"><a href="/image/image.go.html#3199046">r</a></span><span class="op" id="3199149">}</span><br>
<span class="lineno"></span><span class="op" id="3199151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3199154">//&nbsp;NRGBA64&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.NRGBA64&nbsp;values.</span><br>
<span class="lineno">370</span><span class="keyword" id="3199233">type</span>&nbsp;<span class="ident" id="3199238">NRGBA64</span>&nbsp;<span class="keyword" id="3199246">struct</span>&nbsp;<span class="op" id="3199253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3199256">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;in&nbsp;R,&nbsp;G,&nbsp;B,&nbsp;A&nbsp;order&nbsp;and&nbsp;big-endian&nbsp;format.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3199346">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*8].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3199414">Pix</span>&nbsp;<span class="op" id="3199418">[</span><span class="op" id="3199419">]</span><span class="builtintype" id="3199420">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3199427">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3199503">Stride</span>&nbsp;<span class="builtintype" id="3199510">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3199515">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3199547">Rect</span>&nbsp;<span class="ident" id="3199552"><a href="/image/geom.go.html#3185229">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="3199562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="3199565">func</span>&nbsp;<span class="op" id="3199570">(</span><span class="ident" id="3199571">p</span>&nbsp;<span class="op" id="3199573">*</span><span class="ident" id="3199574"><a href="/image/image.go.html#3199238">NRGBA64</a></span><span class="op" id="3199581">)</span>&nbsp;<span class="ident" id="3199583">ColorModel</span><span class="op" id="3199593">(</span><span class="op" id="3199594">)</span>&nbsp;<span class="ident" id="3199596"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3199601">.</span><span class="ident" id="3199602">Model</span>&nbsp;<span class="op" id="3199608">{</span>&nbsp;<span class="keyword" id="3199610">return</span>&nbsp;<span class="ident" id="3199617"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3199622">.</span><span class="ident" id="3199623">NRGBA64Model</span>&nbsp;<span class="op" id="3199636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3199639">func</span>&nbsp;<span class="op" id="3199644">(</span><span class="ident" id="3199645">p</span>&nbsp;<span class="op" id="3199647">*</span><span class="ident" id="3199648"><a href="/image/image.go.html#3199238">NRGBA64</a></span><span class="op" id="3199655">)</span>&nbsp;<span class="ident" id="3199657">Bounds</span><span class="op" id="3199663">(</span><span class="op" id="3199664">)</span>&nbsp;<span class="ident" id="3199666"><a href="/image/geom.go.html#3185229">Rectangle</a></span>&nbsp;<span class="op" id="3199676">{</span>&nbsp;<span class="keyword" id="3199678">return</span>&nbsp;<span class="ident" id="3199685"><a href="/image/image.go.html#3199645">p</a></span><span class="op" id="3199686">.</span><span class="ident" id="3199687">Rect</span>&nbsp;<span class="op" id="3199692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3199695">func</span>&nbsp;<span class="op" id="3199700">(</span><span class="ident" id="3199701">p</span>&nbsp;<span class="op" id="3199703">*</span><span class="ident" id="3199704"><a href="/image/image.go.html#3199238">NRGBA64</a></span><span class="op" id="3199711">)</span>&nbsp;<span class="ident" id="3199713">At</span><span class="op" id="3199715">(</span><span class="ident" id="3199716">x</span><span class="op" id="3199717">,</span>&nbsp;<span class="ident" id="3199719">y</span>&nbsp;<span class="builtintype" id="3199721">int</span><span class="op" id="3199724">)</span>&nbsp;<span class="ident" id="3199726"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3199731">.</span><span class="ident" id="3199732">Color</span>&nbsp;<span class="op" id="3199738">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3199741">return</span>&nbsp;<span class="ident" id="3199748"><a href="/image/image.go.html#3199701">p</a></span><span class="op" id="3199749">.</span><span class="ident" id="3199750">NRGBA64At</span><span class="op" id="3199759">(</span><span class="ident" id="3199760"><a href="/image/image.go.html#3199716">x</a></span><span class="op" id="3199761">,</span>&nbsp;<span class="ident" id="3199763"><a href="/image/image.go.html#3199719">y</a></span><span class="op" id="3199764">)</span><br>
<span class="lineno"></span><span class="op" id="3199766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3199769">func</span>&nbsp;<span class="op" id="3199774">(</span><span class="ident" id="3199775">p</span>&nbsp;<span class="op" id="3199777">*</span><span class="ident" id="3199778"><a href="/image/image.go.html#3199238">NRGBA64</a></span><span class="op" id="3199785">)</span>&nbsp;<span class="ident" id="3199787">NRGBA64At</span><span class="op" id="3199796">(</span><span class="ident" id="3199797">x</span><span class="op" id="3199798">,</span>&nbsp;<span class="ident" id="3199800">y</span>&nbsp;<span class="builtintype" id="3199802">int</span><span class="op" id="3199805">)</span>&nbsp;<span class="ident" id="3199807"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3199812">.</span><span class="ident" id="3199813">NRGBA64</span>&nbsp;<span class="op" id="3199821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3199824">if</span>&nbsp;<span class="op" id="3199827">!</span><span class="op" id="3199828">(</span><span class="ident" id="3199829"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3199834">{</span><span class="ident" id="3199835"><a href="/image/image.go.html#3199797">x</a></span><span class="op" id="3199836">,</span>&nbsp;<span class="ident" id="3199838"><a href="/image/image.go.html#3199800">y</a></span><span class="op" id="3199839">}</span><span class="op" id="3199840">.</span><span class="ident" id="3199841">In</span><span class="op" id="3199843">(</span><span class="ident" id="3199844"><a href="/image/image.go.html#3199775">p</a></span><span class="op" id="3199845">.</span><span class="ident" id="3199846">Rect</span><span class="op" id="3199850">)</span><span class="op" id="3199851">)</span>&nbsp;<span class="op" id="3199853">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3199857">return</span>&nbsp;<span class="ident" id="3199864"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3199869">.</span><span class="ident" id="3199870">NRGBA64</span><span class="op" id="3199877">{</span><span class="op" id="3199878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3199881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3199884">i</span>&nbsp;<span class="op" id="3199886">:=</span>&nbsp;<span class="ident" id="3199889"><a href="/image/image.go.html#3199775">p</a></span><span class="op" id="3199890">.</span><span class="ident" id="3199891">PixOffset</span><span class="op" id="3199900">(</span><span class="ident" id="3199901"><a href="/image/image.go.html#3199797">x</a></span><span class="op" id="3199902">,</span>&nbsp;<span class="ident" id="3199904"><a href="/image/image.go.html#3199800">y</a></span><span class="op" id="3199905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3199908">return</span>&nbsp;<span class="ident" id="3199915"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3199920">.</span><span class="ident" id="3199921">NRGBA64</span><span class="op" id="3199928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="3199932">uint16</span><span class="op" id="3199938">(</span><span class="ident" id="3199939"><a href="/image/image.go.html#3199775">p</a></span><span class="op" id="3199940">.</span><span class="ident" id="3199941">Pix</span><span class="op" id="3199944">[</span><span class="ident" id="3199945"><a href="/image/image.go.html#3199884">i</a></span><span class="op" id="3199946">+</span><span class="num" id="3199947">0</span><span class="op" id="3199948">]</span><span class="op" id="3199949">)</span><span class="op" id="3199950">&lt;&lt;</span><span class="num" id="3199952">8</span>&nbsp;<span class="op" id="3199954">|</span>&nbsp;<span class="builtintype" id="3199956">uint16</span><span class="op" id="3199962">(</span><span class="ident" id="3199963"><a href="/image/image.go.html#3199775">p</a></span><span class="op" id="3199964">.</span><span class="ident" id="3199965">Pix</span><span class="op" id="3199968">[</span><span class="ident" id="3199969"><a href="/image/image.go.html#3199884">i</a></span><span class="op" id="3199970">+</span><span class="num" id="3199971">1</span><span class="op" id="3199972">]</span><span class="op" id="3199973">)</span><span class="op" id="3199974">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="3199978">uint16</span><span class="op" id="3199984">(</span><span class="ident" id="3199985"><a href="/image/image.go.html#3199775">p</a></span><span class="op" id="3199986">.</span><span class="ident" id="3199987">Pix</span><span class="op" id="3199990">[</span><span class="ident" id="3199991"><a href="/image/image.go.html#3199884">i</a></span><span class="op" id="3199992">+</span><span class="num" id="3199993">2</span><span class="op" id="3199994">]</span><span class="op" id="3199995">)</span><span class="op" id="3199996">&lt;&lt;</span><span class="num" id="3199998">8</span>&nbsp;<span class="op" id="3200000">|</span>&nbsp;<span class="builtintype" id="3200002">uint16</span><span class="op" id="3200008">(</span><span class="ident" id="3200009"><a href="/image/image.go.html#3199775">p</a></span><span class="op" id="3200010">.</span><span class="ident" id="3200011">Pix</span><span class="op" id="3200014">[</span><span class="ident" id="3200015"><a href="/image/image.go.html#3199884">i</a></span><span class="op" id="3200016">+</span><span class="num" id="3200017">3</span><span class="op" id="3200018">]</span><span class="op" id="3200019">)</span><span class="op" id="3200020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="3200024">uint16</span><span class="op" id="3200030">(</span><span class="ident" id="3200031"><a href="/image/image.go.html#3199775">p</a></span><span class="op" id="3200032">.</span><span class="ident" id="3200033">Pix</span><span class="op" id="3200036">[</span><span class="ident" id="3200037"><a href="/image/image.go.html#3199884">i</a></span><span class="op" id="3200038">+</span><span class="num" id="3200039">4</span><span class="op" id="3200040">]</span><span class="op" id="3200041">)</span><span class="op" id="3200042">&lt;&lt;</span><span class="num" id="3200044">8</span>&nbsp;<span class="op" id="3200046">|</span>&nbsp;<span class="builtintype" id="3200048">uint16</span><span class="op" id="3200054">(</span><span class="ident" id="3200055"><a href="/image/image.go.html#3199775">p</a></span><span class="op" id="3200056">.</span><span class="ident" id="3200057">Pix</span><span class="op" id="3200060">[</span><span class="ident" id="3200061"><a href="/image/image.go.html#3199884">i</a></span><span class="op" id="3200062">+</span><span class="num" id="3200063">5</span><span class="op" id="3200064">]</span><span class="op" id="3200065">)</span><span class="op" id="3200066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="3200070">uint16</span><span class="op" id="3200076">(</span><span class="ident" id="3200077"><a href="/image/image.go.html#3199775">p</a></span><span class="op" id="3200078">.</span><span class="ident" id="3200079">Pix</span><span class="op" id="3200082">[</span><span class="ident" id="3200083"><a href="/image/image.go.html#3199884">i</a></span><span class="op" id="3200084">+</span><span class="num" id="3200085">6</span><span class="op" id="3200086">]</span><span class="op" id="3200087">)</span><span class="op" id="3200088">&lt;&lt;</span><span class="num" id="3200090">8</span>&nbsp;<span class="op" id="3200092">|</span>&nbsp;<span class="builtintype" id="3200094">uint16</span><span class="op" id="3200100">(</span><span class="ident" id="3200101"><a href="/image/image.go.html#3199775">p</a></span><span class="op" id="3200102">.</span><span class="ident" id="3200103">Pix</span><span class="op" id="3200106">[</span><span class="ident" id="3200107"><a href="/image/image.go.html#3199884">i</a></span><span class="op" id="3200108">+</span><span class="num" id="3200109">7</span><span class="op" id="3200110">]</span><span class="op" id="3200111">)</span><span class="op" id="3200112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3200115">}</span><br>
<span class="lineno"></span><span class="op" id="3200117">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="comment" id="3200120">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3200199">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="3200223">func</span>&nbsp;<span class="op" id="3200228">(</span><span class="ident" id="3200229">p</span>&nbsp;<span class="op" id="3200231">*</span><span class="ident" id="3200232"><a href="/image/image.go.html#3199238">NRGBA64</a></span><span class="op" id="3200239">)</span>&nbsp;<span class="ident" id="3200241">PixOffset</span><span class="op" id="3200250">(</span><span class="ident" id="3200251">x</span><span class="op" id="3200252">,</span>&nbsp;<span class="ident" id="3200254">y</span>&nbsp;<span class="builtintype" id="3200256">int</span><span class="op" id="3200259">)</span>&nbsp;<span class="builtintype" id="3200261">int</span>&nbsp;<span class="op" id="3200265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3200268">return</span>&nbsp;<span class="op" id="3200275">(</span><span class="ident" id="3200276"><a href="/image/image.go.html#3200254">y</a></span><span class="op" id="3200277">-</span><span class="ident" id="3200278"><a href="/image/image.go.html#3200229">p</a></span><span class="op" id="3200279">.</span><span class="ident" id="3200280">Rect</span><span class="op" id="3200284">.</span><span class="ident" id="3200285">Min</span><span class="op" id="3200288">.</span><span class="ident" id="3200289">Y</span><span class="op" id="3200290">)</span><span class="op" id="3200291">*</span><span class="ident" id="3200292"><a href="/image/image.go.html#3200229">p</a></span><span class="op" id="3200293">.</span><span class="ident" id="3200294">Stride</span>&nbsp;<span class="op" id="3200301">+</span>&nbsp;<span class="op" id="3200303">(</span><span class="ident" id="3200304"><a href="/image/image.go.html#3200251">x</a></span><span class="op" id="3200305">-</span><span class="ident" id="3200306"><a href="/image/image.go.html#3200229">p</a></span><span class="op" id="3200307">.</span><span class="ident" id="3200308">Rect</span><span class="op" id="3200312">.</span><span class="ident" id="3200313">Min</span><span class="op" id="3200316">.</span><span class="ident" id="3200317">X</span><span class="op" id="3200318">)</span><span class="op" id="3200319">*</span><span class="num" id="3200320">8</span><br>
<span class="lineno">405</span><span class="op" id="3200322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3200325">func</span>&nbsp;<span class="op" id="3200330">(</span><span class="ident" id="3200331">p</span>&nbsp;<span class="op" id="3200333">*</span><span class="ident" id="3200334"><a href="/image/image.go.html#3199238">NRGBA64</a></span><span class="op" id="3200341">)</span>&nbsp;<span class="ident" id="3200343">Set</span><span class="op" id="3200346">(</span><span class="ident" id="3200347">x</span><span class="op" id="3200348">,</span>&nbsp;<span class="ident" id="3200350">y</span>&nbsp;<span class="builtintype" id="3200352">int</span><span class="op" id="3200355">,</span>&nbsp;<span class="ident" id="3200357">c</span>&nbsp;<span class="ident" id="3200359"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3200364">.</span><span class="ident" id="3200365">Color</span><span class="op" id="3200370">)</span>&nbsp;<span class="op" id="3200372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3200375">if</span>&nbsp;<span class="op" id="3200378">!</span><span class="op" id="3200379">(</span><span class="ident" id="3200380"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3200385">{</span><span class="ident" id="3200386"><a href="/image/image.go.html#3200347">x</a></span><span class="op" id="3200387">,</span>&nbsp;<span class="ident" id="3200389"><a href="/image/image.go.html#3200350">y</a></span><span class="op" id="3200390">}</span><span class="op" id="3200391">.</span><span class="ident" id="3200392">In</span><span class="op" id="3200394">(</span><span class="ident" id="3200395"><a href="/image/image.go.html#3200331">p</a></span><span class="op" id="3200396">.</span><span class="ident" id="3200397">Rect</span><span class="op" id="3200401">)</span><span class="op" id="3200402">)</span>&nbsp;<span class="op" id="3200404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3200408">return</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3200416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200419">i</span>&nbsp;<span class="op" id="3200421">:=</span>&nbsp;<span class="ident" id="3200424"><a href="/image/image.go.html#3200331">p</a></span><span class="op" id="3200425">.</span><span class="ident" id="3200426">PixOffset</span><span class="op" id="3200435">(</span><span class="ident" id="3200436"><a href="/image/image.go.html#3200347">x</a></span><span class="op" id="3200437">,</span>&nbsp;<span class="ident" id="3200439"><a href="/image/image.go.html#3200350">y</a></span><span class="op" id="3200440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200443">c1</span>&nbsp;<span class="op" id="3200446">:=</span>&nbsp;<span class="ident" id="3200449"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3200454">.</span><span class="ident" id="3200455">NRGBA64Model</span><span class="op" id="3200467">.</span><span class="ident" id="3200468">Convert</span><span class="op" id="3200475">(</span><span class="ident" id="3200476"><a href="/image/image.go.html#3200357">c</a></span><span class="op" id="3200477">)</span><span class="op" id="3200478">.</span><span class="op" id="3200479">(</span><span class="ident" id="3200480"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3200485">.</span><span class="ident" id="3200486">NRGBA64</span><span class="op" id="3200493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200496"><a href="/image/image.go.html#3200331">p</a></span><span class="op" id="3200497">.</span><span class="ident" id="3200498">Pix</span><span class="op" id="3200501">[</span><span class="ident" id="3200502"><a href="/image/image.go.html#3200419">i</a></span><span class="op" id="3200503">+</span><span class="num" id="3200504">0</span><span class="op" id="3200505">]</span>&nbsp;<span class="op" id="3200507">=</span>&nbsp;<span class="builtintype" id="3200509">uint8</span><span class="op" id="3200514">(</span><span class="ident" id="3200515"><a href="/image/image.go.html#3200443">c1</a></span><span class="op" id="3200517">.</span><span class="ident" id="3200518">R</span>&nbsp;<span class="op" id="3200520">&gt;&gt;</span>&nbsp;<span class="num" id="3200523">8</span><span class="op" id="3200524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200527"><a href="/image/image.go.html#3200331">p</a></span><span class="op" id="3200528">.</span><span class="ident" id="3200529">Pix</span><span class="op" id="3200532">[</span><span class="ident" id="3200533"><a href="/image/image.go.html#3200419">i</a></span><span class="op" id="3200534">+</span><span class="num" id="3200535">1</span><span class="op" id="3200536">]</span>&nbsp;<span class="op" id="3200538">=</span>&nbsp;<span class="builtintype" id="3200540">uint8</span><span class="op" id="3200545">(</span><span class="ident" id="3200546"><a href="/image/image.go.html#3200443">c1</a></span><span class="op" id="3200548">.</span><span class="ident" id="3200549">R</span><span class="op" id="3200550">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200553"><a href="/image/image.go.html#3200331">p</a></span><span class="op" id="3200554">.</span><span class="ident" id="3200555">Pix</span><span class="op" id="3200558">[</span><span class="ident" id="3200559"><a href="/image/image.go.html#3200419">i</a></span><span class="op" id="3200560">+</span><span class="num" id="3200561">2</span><span class="op" id="3200562">]</span>&nbsp;<span class="op" id="3200564">=</span>&nbsp;<span class="builtintype" id="3200566">uint8</span><span class="op" id="3200571">(</span><span class="ident" id="3200572"><a href="/image/image.go.html#3200443">c1</a></span><span class="op" id="3200574">.</span><span class="ident" id="3200575">G</span>&nbsp;<span class="op" id="3200577">&gt;&gt;</span>&nbsp;<span class="num" id="3200580">8</span><span class="op" id="3200581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200584"><a href="/image/image.go.html#3200331">p</a></span><span class="op" id="3200585">.</span><span class="ident" id="3200586">Pix</span><span class="op" id="3200589">[</span><span class="ident" id="3200590"><a href="/image/image.go.html#3200419">i</a></span><span class="op" id="3200591">+</span><span class="num" id="3200592">3</span><span class="op" id="3200593">]</span>&nbsp;<span class="op" id="3200595">=</span>&nbsp;<span class="builtintype" id="3200597">uint8</span><span class="op" id="3200602">(</span><span class="ident" id="3200603"><a href="/image/image.go.html#3200443">c1</a></span><span class="op" id="3200605">.</span><span class="ident" id="3200606">G</span><span class="op" id="3200607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200610"><a href="/image/image.go.html#3200331">p</a></span><span class="op" id="3200611">.</span><span class="ident" id="3200612">Pix</span><span class="op" id="3200615">[</span><span class="ident" id="3200616"><a href="/image/image.go.html#3200419">i</a></span><span class="op" id="3200617">+</span><span class="num" id="3200618">4</span><span class="op" id="3200619">]</span>&nbsp;<span class="op" id="3200621">=</span>&nbsp;<span class="builtintype" id="3200623">uint8</span><span class="op" id="3200628">(</span><span class="ident" id="3200629"><a href="/image/image.go.html#3200443">c1</a></span><span class="op" id="3200631">.</span><span class="ident" id="3200632">B</span>&nbsp;<span class="op" id="3200634">&gt;&gt;</span>&nbsp;<span class="num" id="3200637">8</span><span class="op" id="3200638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200641"><a href="/image/image.go.html#3200331">p</a></span><span class="op" id="3200642">.</span><span class="ident" id="3200643">Pix</span><span class="op" id="3200646">[</span><span class="ident" id="3200647"><a href="/image/image.go.html#3200419">i</a></span><span class="op" id="3200648">+</span><span class="num" id="3200649">5</span><span class="op" id="3200650">]</span>&nbsp;<span class="op" id="3200652">=</span>&nbsp;<span class="builtintype" id="3200654">uint8</span><span class="op" id="3200659">(</span><span class="ident" id="3200660"><a href="/image/image.go.html#3200443">c1</a></span><span class="op" id="3200662">.</span><span class="ident" id="3200663">B</span><span class="op" id="3200664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200667"><a href="/image/image.go.html#3200331">p</a></span><span class="op" id="3200668">.</span><span class="ident" id="3200669">Pix</span><span class="op" id="3200672">[</span><span class="ident" id="3200673"><a href="/image/image.go.html#3200419">i</a></span><span class="op" id="3200674">+</span><span class="num" id="3200675">6</span><span class="op" id="3200676">]</span>&nbsp;<span class="op" id="3200678">=</span>&nbsp;<span class="builtintype" id="3200680">uint8</span><span class="op" id="3200685">(</span><span class="ident" id="3200686"><a href="/image/image.go.html#3200443">c1</a></span><span class="op" id="3200688">.</span><span class="ident" id="3200689">A</span>&nbsp;<span class="op" id="3200691">&gt;&gt;</span>&nbsp;<span class="num" id="3200694">8</span><span class="op" id="3200695">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200698"><a href="/image/image.go.html#3200331">p</a></span><span class="op" id="3200699">.</span><span class="ident" id="3200700">Pix</span><span class="op" id="3200703">[</span><span class="ident" id="3200704"><a href="/image/image.go.html#3200419">i</a></span><span class="op" id="3200705">+</span><span class="num" id="3200706">7</span><span class="op" id="3200707">]</span>&nbsp;<span class="op" id="3200709">=</span>&nbsp;<span class="builtintype" id="3200711">uint8</span><span class="op" id="3200716">(</span><span class="ident" id="3200717"><a href="/image/image.go.html#3200443">c1</a></span><span class="op" id="3200719">.</span><span class="ident" id="3200720">A</span><span class="op" id="3200721">)</span><br>
<span class="lineno"></span><span class="op" id="3200723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3200726">func</span>&nbsp;<span class="op" id="3200731">(</span><span class="ident" id="3200732">p</span>&nbsp;<span class="op" id="3200734">*</span><span class="ident" id="3200735"><a href="/image/image.go.html#3199238">NRGBA64</a></span><span class="op" id="3200742">)</span>&nbsp;<span class="ident" id="3200744">SetNRGBA64</span><span class="op" id="3200754">(</span><span class="ident" id="3200755">x</span><span class="op" id="3200756">,</span>&nbsp;<span class="ident" id="3200758">y</span>&nbsp;<span class="builtintype" id="3200760">int</span><span class="op" id="3200763">,</span>&nbsp;<span class="ident" id="3200765">c</span>&nbsp;<span class="ident" id="3200767"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3200772">.</span><span class="ident" id="3200773">NRGBA64</span><span class="op" id="3200780">)</span>&nbsp;<span class="op" id="3200782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3200785">if</span>&nbsp;<span class="op" id="3200788">!</span><span class="op" id="3200789">(</span><span class="ident" id="3200790"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3200795">{</span><span class="ident" id="3200796"><a href="/image/image.go.html#3200755">x</a></span><span class="op" id="3200797">,</span>&nbsp;<span class="ident" id="3200799"><a href="/image/image.go.html#3200758">y</a></span><span class="op" id="3200800">}</span><span class="op" id="3200801">.</span><span class="ident" id="3200802">In</span><span class="op" id="3200804">(</span><span class="ident" id="3200805"><a href="/image/image.go.html#3200732">p</a></span><span class="op" id="3200806">.</span><span class="ident" id="3200807">Rect</span><span class="op" id="3200811">)</span><span class="op" id="3200812">)</span>&nbsp;<span class="op" id="3200814">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3200818">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3200826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200829">i</span>&nbsp;<span class="op" id="3200831">:=</span>&nbsp;<span class="ident" id="3200834"><a href="/image/image.go.html#3200732">p</a></span><span class="op" id="3200835">.</span><span class="ident" id="3200836">PixOffset</span><span class="op" id="3200845">(</span><span class="ident" id="3200846"><a href="/image/image.go.html#3200755">x</a></span><span class="op" id="3200847">,</span>&nbsp;<span class="ident" id="3200849"><a href="/image/image.go.html#3200758">y</a></span><span class="op" id="3200850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200853"><a href="/image/image.go.html#3200732">p</a></span><span class="op" id="3200854">.</span><span class="ident" id="3200855">Pix</span><span class="op" id="3200858">[</span><span class="ident" id="3200859"><a href="/image/image.go.html#3200829">i</a></span><span class="op" id="3200860">+</span><span class="num" id="3200861">0</span><span class="op" id="3200862">]</span>&nbsp;<span class="op" id="3200864">=</span>&nbsp;<span class="builtintype" id="3200866">uint8</span><span class="op" id="3200871">(</span><span class="ident" id="3200872"><a href="/image/image.go.html#3200765">c</a></span><span class="op" id="3200873">.</span><span class="ident" id="3200874">R</span>&nbsp;<span class="op" id="3200876">&gt;&gt;</span>&nbsp;<span class="num" id="3200879">8</span><span class="op" id="3200880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200883"><a href="/image/image.go.html#3200732">p</a></span><span class="op" id="3200884">.</span><span class="ident" id="3200885">Pix</span><span class="op" id="3200888">[</span><span class="ident" id="3200889"><a href="/image/image.go.html#3200829">i</a></span><span class="op" id="3200890">+</span><span class="num" id="3200891">1</span><span class="op" id="3200892">]</span>&nbsp;<span class="op" id="3200894">=</span>&nbsp;<span class="builtintype" id="3200896">uint8</span><span class="op" id="3200901">(</span><span class="ident" id="3200902"><a href="/image/image.go.html#3200765">c</a></span><span class="op" id="3200903">.</span><span class="ident" id="3200904">R</span><span class="op" id="3200905">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200908"><a href="/image/image.go.html#3200732">p</a></span><span class="op" id="3200909">.</span><span class="ident" id="3200910">Pix</span><span class="op" id="3200913">[</span><span class="ident" id="3200914"><a href="/image/image.go.html#3200829">i</a></span><span class="op" id="3200915">+</span><span class="num" id="3200916">2</span><span class="op" id="3200917">]</span>&nbsp;<span class="op" id="3200919">=</span>&nbsp;<span class="builtintype" id="3200921">uint8</span><span class="op" id="3200926">(</span><span class="ident" id="3200927"><a href="/image/image.go.html#3200765">c</a></span><span class="op" id="3200928">.</span><span class="ident" id="3200929">G</span>&nbsp;<span class="op" id="3200931">&gt;&gt;</span>&nbsp;<span class="num" id="3200934">8</span><span class="op" id="3200935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200938"><a href="/image/image.go.html#3200732">p</a></span><span class="op" id="3200939">.</span><span class="ident" id="3200940">Pix</span><span class="op" id="3200943">[</span><span class="ident" id="3200944"><a href="/image/image.go.html#3200829">i</a></span><span class="op" id="3200945">+</span><span class="num" id="3200946">3</span><span class="op" id="3200947">]</span>&nbsp;<span class="op" id="3200949">=</span>&nbsp;<span class="builtintype" id="3200951">uint8</span><span class="op" id="3200956">(</span><span class="ident" id="3200957"><a href="/image/image.go.html#3200765">c</a></span><span class="op" id="3200958">.</span><span class="ident" id="3200959">G</span><span class="op" id="3200960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200963"><a href="/image/image.go.html#3200732">p</a></span><span class="op" id="3200964">.</span><span class="ident" id="3200965">Pix</span><span class="op" id="3200968">[</span><span class="ident" id="3200969"><a href="/image/image.go.html#3200829">i</a></span><span class="op" id="3200970">+</span><span class="num" id="3200971">4</span><span class="op" id="3200972">]</span>&nbsp;<span class="op" id="3200974">=</span>&nbsp;<span class="builtintype" id="3200976">uint8</span><span class="op" id="3200981">(</span><span class="ident" id="3200982"><a href="/image/image.go.html#3200765">c</a></span><span class="op" id="3200983">.</span><span class="ident" id="3200984">B</span>&nbsp;<span class="op" id="3200986">&gt;&gt;</span>&nbsp;<span class="num" id="3200989">8</span><span class="op" id="3200990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3200993"><a href="/image/image.go.html#3200732">p</a></span><span class="op" id="3200994">.</span><span class="ident" id="3200995">Pix</span><span class="op" id="3200998">[</span><span class="ident" id="3200999"><a href="/image/image.go.html#3200829">i</a></span><span class="op" id="3201000">+</span><span class="num" id="3201001">5</span><span class="op" id="3201002">]</span>&nbsp;<span class="op" id="3201004">=</span>&nbsp;<span class="builtintype" id="3201006">uint8</span><span class="op" id="3201011">(</span><span class="ident" id="3201012"><a href="/image/image.go.html#3200765">c</a></span><span class="op" id="3201013">.</span><span class="ident" id="3201014">B</span><span class="op" id="3201015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3201018"><a href="/image/image.go.html#3200732">p</a></span><span class="op" id="3201019">.</span><span class="ident" id="3201020">Pix</span><span class="op" id="3201023">[</span><span class="ident" id="3201024"><a href="/image/image.go.html#3200829">i</a></span><span class="op" id="3201025">+</span><span class="num" id="3201026">6</span><span class="op" id="3201027">]</span>&nbsp;<span class="op" id="3201029">=</span>&nbsp;<span class="builtintype" id="3201031">uint8</span><span class="op" id="3201036">(</span><span class="ident" id="3201037"><a href="/image/image.go.html#3200765">c</a></span><span class="op" id="3201038">.</span><span class="ident" id="3201039">A</span>&nbsp;<span class="op" id="3201041">&gt;&gt;</span>&nbsp;<span class="num" id="3201044">8</span><span class="op" id="3201045">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3201048"><a href="/image/image.go.html#3200732">p</a></span><span class="op" id="3201049">.</span><span class="ident" id="3201050">Pix</span><span class="op" id="3201053">[</span><span class="ident" id="3201054"><a href="/image/image.go.html#3200829">i</a></span><span class="op" id="3201055">+</span><span class="num" id="3201056">7</span><span class="op" id="3201057">]</span>&nbsp;<span class="op" id="3201059">=</span>&nbsp;<span class="builtintype" id="3201061">uint8</span><span class="op" id="3201066">(</span><span class="ident" id="3201067"><a href="/image/image.go.html#3200765">c</a></span><span class="op" id="3201068">.</span><span class="ident" id="3201069">A</span><span class="op" id="3201070">)</span><br>
<span class="lineno"></span><span class="op" id="3201072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3201075">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="3201152">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno">440</span><span class="keyword" id="3201224">func</span>&nbsp;<span class="op" id="3201229">(</span><span class="ident" id="3201230">p</span>&nbsp;<span class="op" id="3201232">*</span><span class="ident" id="3201233"><a href="/image/image.go.html#3199238">NRGBA64</a></span><span class="op" id="3201240">)</span>&nbsp;<span class="ident" id="3201242">SubImage</span><span class="op" id="3201250">(</span><span class="ident" id="3201251">r</span>&nbsp;<span class="ident" id="3201253"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3201262">)</span>&nbsp;<span class="ident" id="3201264"><a href="/image/image.go.html#3190140">Image</a></span>&nbsp;<span class="op" id="3201270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3201273"><a href="/image/image.go.html#3201251">r</a></span>&nbsp;<span class="op" id="3201275">=</span>&nbsp;<span class="ident" id="3201277"><a href="/image/image.go.html#3201251">r</a></span><span class="op" id="3201278">.</span><span class="ident" id="3201279">Intersect</span><span class="op" id="3201288">(</span><span class="ident" id="3201289"><a href="/image/image.go.html#3201230">p</a></span><span class="op" id="3201290">.</span><span class="ident" id="3201291">Rect</span><span class="op" id="3201295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3201298">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3201379">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3201461">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3201511">if</span>&nbsp;<span class="ident" id="3201514"><a href="/image/image.go.html#3201251">r</a></span><span class="op" id="3201515">.</span><span class="ident" id="3201516">Empty</span><span class="op" id="3201521">(</span><span class="op" id="3201522">)</span>&nbsp;<span class="op" id="3201524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3201528">return</span>&nbsp;<span class="op" id="3201535">&amp;</span><span class="ident" id="3201536"><a href="/image/image.go.html#3199238">NRGBA64</a></span><span class="op" id="3201543">{</span><span class="op" id="3201544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3201547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3201550">i</span>&nbsp;<span class="op" id="3201552">:=</span>&nbsp;<span class="ident" id="3201555"><a href="/image/image.go.html#3201230">p</a></span><span class="op" id="3201556">.</span><span class="ident" id="3201557">PixOffset</span><span class="op" id="3201566">(</span><span class="ident" id="3201567"><a href="/image/image.go.html#3201251">r</a></span><span class="op" id="3201568">.</span><span class="ident" id="3201569">Min</span><span class="op" id="3201572">.</span><span class="ident" id="3201573">X</span><span class="op" id="3201574">,</span>&nbsp;<span class="ident" id="3201576"><a href="/image/image.go.html#3201251">r</a></span><span class="op" id="3201577">.</span><span class="ident" id="3201578">Min</span><span class="op" id="3201581">.</span><span class="ident" id="3201582">Y</span><span class="op" id="3201583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3201586">return</span>&nbsp;<span class="op" id="3201593">&amp;</span><span class="ident" id="3201594"><a href="/image/image.go.html#3199238">NRGBA64</a></span><span class="op" id="3201601">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3201605">Pix</span><span class="op" id="3201608">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3201613"><a href="/image/image.go.html#3201230">p</a></span><span class="op" id="3201614">.</span><span class="ident" id="3201615">Pix</span><span class="op" id="3201618">[</span><span class="ident" id="3201619"><a href="/image/image.go.html#3201550">i</a></span><span class="op" id="3201620">:</span><span class="op" id="3201621">]</span><span class="op" id="3201622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3201626">Stride</span><span class="op" id="3201632">:</span>&nbsp;<span class="ident" id="3201634"><a href="/image/image.go.html#3201230">p</a></span><span class="op" id="3201635">.</span><span class="ident" id="3201636">Stride</span><span class="op" id="3201642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3201646">Rect</span><span class="op" id="3201650">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3201654"><a href="/image/image.go.html#3201251">r</a></span><span class="op" id="3201655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3201658">}</span><br>
<span class="lineno"></span><span class="op" id="3201660">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span><span class="comment" id="3201663">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="3201736">func</span>&nbsp;<span class="op" id="3201741">(</span><span class="ident" id="3201742">p</span>&nbsp;<span class="op" id="3201744">*</span><span class="ident" id="3201745"><a href="/image/image.go.html#3199238">NRGBA64</a></span><span class="op" id="3201752">)</span>&nbsp;<span class="ident" id="3201754">Opaque</span><span class="op" id="3201760">(</span><span class="op" id="3201761">)</span>&nbsp;<span class="builtintype" id="3201763">bool</span>&nbsp;<span class="op" id="3201768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3201771">if</span>&nbsp;<span class="ident" id="3201774"><a href="/image/image.go.html#3201742">p</a></span><span class="op" id="3201775">.</span><span class="ident" id="3201776">Rect</span><span class="op" id="3201780">.</span><span class="ident" id="3201781">Empty</span><span class="op" id="3201786">(</span><span class="op" id="3201787">)</span>&nbsp;<span class="op" id="3201789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3201793">return</span>&nbsp;<span class="builtintype" id="3201800">true</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3201806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3201809">i0</span><span class="op" id="3201811">,</span>&nbsp;<span class="ident" id="3201813">i1</span>&nbsp;<span class="op" id="3201816">:=</span>&nbsp;<span class="num" id="3201819">6</span><span class="op" id="3201820">,</span>&nbsp;<span class="ident" id="3201822"><a href="/image/image.go.html#3201742">p</a></span><span class="op" id="3201823">.</span><span class="ident" id="3201824">Rect</span><span class="op" id="3201828">.</span><span class="ident" id="3201829">Dx</span><span class="op" id="3201831">(</span><span class="op" id="3201832">)</span><span class="op" id="3201833">*</span><span class="num" id="3201834">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3201837">for</span>&nbsp;<span class="ident" id="3201841">y</span>&nbsp;<span class="op" id="3201843">:=</span>&nbsp;<span class="ident" id="3201846"><a href="/image/image.go.html#3201742">p</a></span><span class="op" id="3201847">.</span><span class="ident" id="3201848">Rect</span><span class="op" id="3201852">.</span><span class="ident" id="3201853">Min</span><span class="op" id="3201856">.</span><span class="ident" id="3201857">Y</span><span class="op" id="3201858">;</span>&nbsp;<span class="ident" id="3201860"><a href="/image/image.go.html#3201841">y</a></span>&nbsp;<span class="op" id="3201862">&lt;</span>&nbsp;<span class="ident" id="3201864"><a href="/image/image.go.html#3201742">p</a></span><span class="op" id="3201865">.</span><span class="ident" id="3201866">Rect</span><span class="op" id="3201870">.</span><span class="ident" id="3201871">Max</span><span class="op" id="3201874">.</span><span class="ident" id="3201875">Y</span><span class="op" id="3201876">;</span>&nbsp;<span class="ident" id="3201878"><a href="/image/image.go.html#3201841">y</a></span><span class="op" id="3201879">++</span>&nbsp;<span class="op" id="3201882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3201886">for</span>&nbsp;<span class="ident" id="3201890">i</span>&nbsp;<span class="op" id="3201892">:=</span>&nbsp;<span class="ident" id="3201895"><a href="/image/image.go.html#3201809">i0</a></span><span class="op" id="3201897">;</span>&nbsp;<span class="ident" id="3201899"><a href="/image/image.go.html#3201890">i</a></span>&nbsp;<span class="op" id="3201901">&lt;</span>&nbsp;<span class="ident" id="3201903"><a href="/image/image.go.html#3201813">i1</a></span><span class="op" id="3201905">;</span>&nbsp;<span class="ident" id="3201907"><a href="/image/image.go.html#3201890">i</a></span>&nbsp;<span class="op" id="3201909">+=</span>&nbsp;<span class="num" id="3201912">8</span>&nbsp;<span class="op" id="3201914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3201919">if</span>&nbsp;<span class="ident" id="3201922"><a href="/image/image.go.html#3201742">p</a></span><span class="op" id="3201923">.</span><span class="ident" id="3201924">Pix</span><span class="op" id="3201927">[</span><span class="ident" id="3201928"><a href="/image/image.go.html#3201890">i</a></span><span class="op" id="3201929">+</span><span class="num" id="3201930">0</span><span class="op" id="3201931">]</span>&nbsp;<span class="op" id="3201933">!=</span>&nbsp;<span class="num" id="3201936">0xff</span>&nbsp;<span class="op" id="3201941">||</span>&nbsp;<span class="ident" id="3201944"><a href="/image/image.go.html#3201742">p</a></span><span class="op" id="3201945">.</span><span class="ident" id="3201946">Pix</span><span class="op" id="3201949">[</span><span class="ident" id="3201950"><a href="/image/image.go.html#3201890">i</a></span><span class="op" id="3201951">+</span><span class="num" id="3201952">1</span><span class="op" id="3201953">]</span>&nbsp;<span class="op" id="3201955">!=</span>&nbsp;<span class="num" id="3201958">0xff</span>&nbsp;<span class="op" id="3201963">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3201969">return</span>&nbsp;<span class="builtintype" id="3201976">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3201985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3201989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3201993"><a href="/image/image.go.html#3201809">i0</a></span>&nbsp;<span class="op" id="3201996">+=</span>&nbsp;<span class="ident" id="3201999"><a href="/image/image.go.html#3201742">p</a></span><span class="op" id="3202000">.</span><span class="ident" id="3202001">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3202010"><a href="/image/image.go.html#3201813">i1</a></span>&nbsp;<span class="op" id="3202013">+=</span>&nbsp;<span class="ident" id="3202016"><a href="/image/image.go.html#3201742">p</a></span><span class="op" id="3202017">.</span><span class="ident" id="3202018">Stride</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3202026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3202029">return</span>&nbsp;<span class="builtintype" id="3202036">true</span><br>
<span class="lineno"></span><span class="op" id="3202041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3202044">//&nbsp;NewNRGBA64&nbsp;returns&nbsp;a&nbsp;new&nbsp;NRGBA64&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno">475</span><span class="keyword" id="3202103">func</span>&nbsp;<span class="ident" id="3202108">NewNRGBA64</span><span class="op" id="3202118">(</span><span class="ident" id="3202119">r</span>&nbsp;<span class="ident" id="3202121"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3202130">)</span>&nbsp;<span class="op" id="3202132">*</span><span class="ident" id="3202133"><a href="/image/image.go.html#3199238">NRGBA64</a></span>&nbsp;<span class="op" id="3202141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3202144">w</span><span class="op" id="3202145">,</span>&nbsp;<span class="ident" id="3202147">h</span>&nbsp;<span class="op" id="3202149">:=</span>&nbsp;<span class="ident" id="3202152"><a href="/image/image.go.html#3202119">r</a></span><span class="op" id="3202153">.</span><span class="ident" id="3202154">Dx</span><span class="op" id="3202156">(</span><span class="op" id="3202157">)</span><span class="op" id="3202158">,</span>&nbsp;<span class="ident" id="3202160"><a href="/image/image.go.html#3202119">r</a></span><span class="op" id="3202161">.</span><span class="ident" id="3202162">Dy</span><span class="op" id="3202164">(</span><span class="op" id="3202165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3202168">pix</span>&nbsp;<span class="op" id="3202172">:=</span>&nbsp;<span class="builtinfunc" id="3202175">make</span><span class="op" id="3202179">(</span><span class="op" id="3202180">[</span><span class="op" id="3202181">]</span><span class="builtintype" id="3202182">uint8</span><span class="op" id="3202187">,</span>&nbsp;<span class="num" id="3202189">8</span><span class="op" id="3202190">*</span><span class="ident" id="3202191"><a href="/image/image.go.html#3202144">w</a></span><span class="op" id="3202192">*</span><span class="ident" id="3202193"><a href="/image/image.go.html#3202147">h</a></span><span class="op" id="3202194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3202197">return</span>&nbsp;<span class="op" id="3202204">&amp;</span><span class="ident" id="3202205"><a href="/image/image.go.html#3199238">NRGBA64</a></span><span class="op" id="3202212">{</span><span class="ident" id="3202213"><a href="/image/image.go.html#3202168">pix</a></span><span class="op" id="3202216">,</span>&nbsp;<span class="num" id="3202218">8</span>&nbsp;<span class="op" id="3202220">*</span>&nbsp;<span class="ident" id="3202222"><a href="/image/image.go.html#3202144">w</a></span><span class="op" id="3202223">,</span>&nbsp;<span class="ident" id="3202225"><a href="/image/image.go.html#3202119">r</a></span><span class="op" id="3202226">}</span><br>
<span class="lineno"></span><span class="op" id="3202228">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span><span class="comment" id="3202231">//&nbsp;Alpha&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.Alpha&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="3202306">type</span>&nbsp;<span class="ident" id="3202311">Alpha</span>&nbsp;<span class="keyword" id="3202317">struct</span>&nbsp;<span class="op" id="3202324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3202327">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;as&nbsp;alpha&nbsp;values.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3202391">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*1].</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3202459">Pix</span>&nbsp;<span class="op" id="3202463">[</span><span class="op" id="3202464">]</span><span class="builtintype" id="3202465">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3202472">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3202548">Stride</span>&nbsp;<span class="builtintype" id="3202555">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3202560">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3202592">Rect</span>&nbsp;<span class="ident" id="3202597"><a href="/image/geom.go.html#3185229">Rectangle</a></span><br>
<span class="lineno">490</span><span class="op" id="3202607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3202610">func</span>&nbsp;<span class="op" id="3202615">(</span><span class="ident" id="3202616">p</span>&nbsp;<span class="op" id="3202618">*</span><span class="ident" id="3202619"><a href="/image/image.go.html#3202311">Alpha</a></span><span class="op" id="3202624">)</span>&nbsp;<span class="ident" id="3202626">ColorModel</span><span class="op" id="3202636">(</span><span class="op" id="3202637">)</span>&nbsp;<span class="ident" id="3202639"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3202644">.</span><span class="ident" id="3202645">Model</span>&nbsp;<span class="op" id="3202651">{</span>&nbsp;<span class="keyword" id="3202653">return</span>&nbsp;<span class="ident" id="3202660"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3202665">.</span><span class="ident" id="3202666">AlphaModel</span>&nbsp;<span class="op" id="3202677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3202680">func</span>&nbsp;<span class="op" id="3202685">(</span><span class="ident" id="3202686">p</span>&nbsp;<span class="op" id="3202688">*</span><span class="ident" id="3202689"><a href="/image/image.go.html#3202311">Alpha</a></span><span class="op" id="3202694">)</span>&nbsp;<span class="ident" id="3202696">Bounds</span><span class="op" id="3202702">(</span><span class="op" id="3202703">)</span>&nbsp;<span class="ident" id="3202705"><a href="/image/geom.go.html#3185229">Rectangle</a></span>&nbsp;<span class="op" id="3202715">{</span>&nbsp;<span class="keyword" id="3202717">return</span>&nbsp;<span class="ident" id="3202724"><a href="/image/image.go.html#3202686">p</a></span><span class="op" id="3202725">.</span><span class="ident" id="3202726">Rect</span>&nbsp;<span class="op" id="3202731">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="keyword" id="3202734">func</span>&nbsp;<span class="op" id="3202739">(</span><span class="ident" id="3202740">p</span>&nbsp;<span class="op" id="3202742">*</span><span class="ident" id="3202743"><a href="/image/image.go.html#3202311">Alpha</a></span><span class="op" id="3202748">)</span>&nbsp;<span class="ident" id="3202750">At</span><span class="op" id="3202752">(</span><span class="ident" id="3202753">x</span><span class="op" id="3202754">,</span>&nbsp;<span class="ident" id="3202756">y</span>&nbsp;<span class="builtintype" id="3202758">int</span><span class="op" id="3202761">)</span>&nbsp;<span class="ident" id="3202763"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3202768">.</span><span class="ident" id="3202769">Color</span>&nbsp;<span class="op" id="3202775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3202778">return</span>&nbsp;<span class="ident" id="3202785"><a href="/image/image.go.html#3202740">p</a></span><span class="op" id="3202786">.</span><span class="ident" id="3202787">AlphaAt</span><span class="op" id="3202794">(</span><span class="ident" id="3202795"><a href="/image/image.go.html#3202753">x</a></span><span class="op" id="3202796">,</span>&nbsp;<span class="ident" id="3202798"><a href="/image/image.go.html#3202756">y</a></span><span class="op" id="3202799">)</span><br>
<span class="lineno"></span><span class="op" id="3202801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span><span class="keyword" id="3202804">func</span>&nbsp;<span class="op" id="3202809">(</span><span class="ident" id="3202810">p</span>&nbsp;<span class="op" id="3202812">*</span><span class="ident" id="3202813"><a href="/image/image.go.html#3202311">Alpha</a></span><span class="op" id="3202818">)</span>&nbsp;<span class="ident" id="3202820">AlphaAt</span><span class="op" id="3202827">(</span><span class="ident" id="3202828">x</span><span class="op" id="3202829">,</span>&nbsp;<span class="ident" id="3202831">y</span>&nbsp;<span class="builtintype" id="3202833">int</span><span class="op" id="3202836">)</span>&nbsp;<span class="ident" id="3202838"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3202843">.</span><span class="ident" id="3202844">Alpha</span>&nbsp;<span class="op" id="3202850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3202853">if</span>&nbsp;<span class="op" id="3202856">!</span><span class="op" id="3202857">(</span><span class="ident" id="3202858"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3202863">{</span><span class="ident" id="3202864"><a href="/image/image.go.html#3202828">x</a></span><span class="op" id="3202865">,</span>&nbsp;<span class="ident" id="3202867"><a href="/image/image.go.html#3202831">y</a></span><span class="op" id="3202868">}</span><span class="op" id="3202869">.</span><span class="ident" id="3202870">In</span><span class="op" id="3202872">(</span><span class="ident" id="3202873"><a href="/image/image.go.html#3202810">p</a></span><span class="op" id="3202874">.</span><span class="ident" id="3202875">Rect</span><span class="op" id="3202879">)</span><span class="op" id="3202880">)</span>&nbsp;<span class="op" id="3202882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3202886">return</span>&nbsp;<span class="ident" id="3202893"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3202898">.</span><span class="ident" id="3202899">Alpha</span><span class="op" id="3202904">{</span><span class="op" id="3202905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3202908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3202911">i</span>&nbsp;<span class="op" id="3202913">:=</span>&nbsp;<span class="ident" id="3202916"><a href="/image/image.go.html#3202810">p</a></span><span class="op" id="3202917">.</span><span class="ident" id="3202918">PixOffset</span><span class="op" id="3202927">(</span><span class="ident" id="3202928"><a href="/image/image.go.html#3202828">x</a></span><span class="op" id="3202929">,</span>&nbsp;<span class="ident" id="3202931"><a href="/image/image.go.html#3202831">y</a></span><span class="op" id="3202932">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3202935">return</span>&nbsp;<span class="ident" id="3202942"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3202947">.</span><span class="ident" id="3202948">Alpha</span><span class="op" id="3202953">{</span><span class="ident" id="3202954"><a href="/image/image.go.html#3202810">p</a></span><span class="op" id="3202955">.</span><span class="ident" id="3202956">Pix</span><span class="op" id="3202959">[</span><span class="ident" id="3202960"><a href="/image/image.go.html#3202911">i</a></span><span class="op" id="3202961">]</span><span class="op" id="3202962">}</span><br>
<span class="lineno"></span><span class="op" id="3202964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3202967">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3203046">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno">510</span><span class="keyword" id="3203070">func</span>&nbsp;<span class="op" id="3203075">(</span><span class="ident" id="3203076">p</span>&nbsp;<span class="op" id="3203078">*</span><span class="ident" id="3203079"><a href="/image/image.go.html#3202311">Alpha</a></span><span class="op" id="3203084">)</span>&nbsp;<span class="ident" id="3203086">PixOffset</span><span class="op" id="3203095">(</span><span class="ident" id="3203096">x</span><span class="op" id="3203097">,</span>&nbsp;<span class="ident" id="3203099">y</span>&nbsp;<span class="builtintype" id="3203101">int</span><span class="op" id="3203104">)</span>&nbsp;<span class="builtintype" id="3203106">int</span>&nbsp;<span class="op" id="3203110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3203113">return</span>&nbsp;<span class="op" id="3203120">(</span><span class="ident" id="3203121"><a href="/image/image.go.html#3203099">y</a></span><span class="op" id="3203122">-</span><span class="ident" id="3203123"><a href="/image/image.go.html#3203076">p</a></span><span class="op" id="3203124">.</span><span class="ident" id="3203125">Rect</span><span class="op" id="3203129">.</span><span class="ident" id="3203130">Min</span><span class="op" id="3203133">.</span><span class="ident" id="3203134">Y</span><span class="op" id="3203135">)</span><span class="op" id="3203136">*</span><span class="ident" id="3203137"><a href="/image/image.go.html#3203076">p</a></span><span class="op" id="3203138">.</span><span class="ident" id="3203139">Stride</span>&nbsp;<span class="op" id="3203146">+</span>&nbsp;<span class="op" id="3203148">(</span><span class="ident" id="3203149"><a href="/image/image.go.html#3203096">x</a></span><span class="op" id="3203150">-</span><span class="ident" id="3203151"><a href="/image/image.go.html#3203076">p</a></span><span class="op" id="3203152">.</span><span class="ident" id="3203153">Rect</span><span class="op" id="3203157">.</span><span class="ident" id="3203158">Min</span><span class="op" id="3203161">.</span><span class="ident" id="3203162">X</span><span class="op" id="3203163">)</span><span class="op" id="3203164">*</span><span class="num" id="3203165">1</span><br>
<span class="lineno"></span><span class="op" id="3203167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3203170">func</span>&nbsp;<span class="op" id="3203175">(</span><span class="ident" id="3203176">p</span>&nbsp;<span class="op" id="3203178">*</span><span class="ident" id="3203179"><a href="/image/image.go.html#3202311">Alpha</a></span><span class="op" id="3203184">)</span>&nbsp;<span class="ident" id="3203186">Set</span><span class="op" id="3203189">(</span><span class="ident" id="3203190">x</span><span class="op" id="3203191">,</span>&nbsp;<span class="ident" id="3203193">y</span>&nbsp;<span class="builtintype" id="3203195">int</span><span class="op" id="3203198">,</span>&nbsp;<span class="ident" id="3203200">c</span>&nbsp;<span class="ident" id="3203202"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3203207">.</span><span class="ident" id="3203208">Color</span><span class="op" id="3203213">)</span>&nbsp;<span class="op" id="3203215">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3203218">if</span>&nbsp;<span class="op" id="3203221">!</span><span class="op" id="3203222">(</span><span class="ident" id="3203223"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3203228">{</span><span class="ident" id="3203229"><a href="/image/image.go.html#3203190">x</a></span><span class="op" id="3203230">,</span>&nbsp;<span class="ident" id="3203232"><a href="/image/image.go.html#3203193">y</a></span><span class="op" id="3203233">}</span><span class="op" id="3203234">.</span><span class="ident" id="3203235">In</span><span class="op" id="3203237">(</span><span class="ident" id="3203238"><a href="/image/image.go.html#3203176">p</a></span><span class="op" id="3203239">.</span><span class="ident" id="3203240">Rect</span><span class="op" id="3203244">)</span><span class="op" id="3203245">)</span>&nbsp;<span class="op" id="3203247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3203251">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3203259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3203262">i</span>&nbsp;<span class="op" id="3203264">:=</span>&nbsp;<span class="ident" id="3203267"><a href="/image/image.go.html#3203176">p</a></span><span class="op" id="3203268">.</span><span class="ident" id="3203269">PixOffset</span><span class="op" id="3203278">(</span><span class="ident" id="3203279"><a href="/image/image.go.html#3203190">x</a></span><span class="op" id="3203280">,</span>&nbsp;<span class="ident" id="3203282"><a href="/image/image.go.html#3203193">y</a></span><span class="op" id="3203283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3203286"><a href="/image/image.go.html#3203176">p</a></span><span class="op" id="3203287">.</span><span class="ident" id="3203288">Pix</span><span class="op" id="3203291">[</span><span class="ident" id="3203292"><a href="/image/image.go.html#3203262">i</a></span><span class="op" id="3203293">]</span>&nbsp;<span class="op" id="3203295">=</span>&nbsp;<span class="ident" id="3203297"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3203302">.</span><span class="ident" id="3203303">AlphaModel</span><span class="op" id="3203313">.</span><span class="ident" id="3203314">Convert</span><span class="op" id="3203321">(</span><span class="ident" id="3203322"><a href="/image/image.go.html#3203200">c</a></span><span class="op" id="3203323">)</span><span class="op" id="3203324">.</span><span class="op" id="3203325">(</span><span class="ident" id="3203326"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3203331">.</span><span class="ident" id="3203332">Alpha</span><span class="op" id="3203337">)</span><span class="op" id="3203338">.</span><span class="ident" id="3203339">A</span><br>
<span class="lineno">520</span><span class="op" id="3203341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3203344">func</span>&nbsp;<span class="op" id="3203349">(</span><span class="ident" id="3203350">p</span>&nbsp;<span class="op" id="3203352">*</span><span class="ident" id="3203353"><a href="/image/image.go.html#3202311">Alpha</a></span><span class="op" id="3203358">)</span>&nbsp;<span class="ident" id="3203360">SetAlpha</span><span class="op" id="3203368">(</span><span class="ident" id="3203369">x</span><span class="op" id="3203370">,</span>&nbsp;<span class="ident" id="3203372">y</span>&nbsp;<span class="builtintype" id="3203374">int</span><span class="op" id="3203377">,</span>&nbsp;<span class="ident" id="3203379">c</span>&nbsp;<span class="ident" id="3203381"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3203386">.</span><span class="ident" id="3203387">Alpha</span><span class="op" id="3203392">)</span>&nbsp;<span class="op" id="3203394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3203397">if</span>&nbsp;<span class="op" id="3203400">!</span><span class="op" id="3203401">(</span><span class="ident" id="3203402"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3203407">{</span><span class="ident" id="3203408"><a href="/image/image.go.html#3203369">x</a></span><span class="op" id="3203409">,</span>&nbsp;<span class="ident" id="3203411"><a href="/image/image.go.html#3203372">y</a></span><span class="op" id="3203412">}</span><span class="op" id="3203413">.</span><span class="ident" id="3203414">In</span><span class="op" id="3203416">(</span><span class="ident" id="3203417"><a href="/image/image.go.html#3203350">p</a></span><span class="op" id="3203418">.</span><span class="ident" id="3203419">Rect</span><span class="op" id="3203423">)</span><span class="op" id="3203424">)</span>&nbsp;<span class="op" id="3203426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3203430">return</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3203438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3203441">i</span>&nbsp;<span class="op" id="3203443">:=</span>&nbsp;<span class="ident" id="3203446"><a href="/image/image.go.html#3203350">p</a></span><span class="op" id="3203447">.</span><span class="ident" id="3203448">PixOffset</span><span class="op" id="3203457">(</span><span class="ident" id="3203458"><a href="/image/image.go.html#3203369">x</a></span><span class="op" id="3203459">,</span>&nbsp;<span class="ident" id="3203461"><a href="/image/image.go.html#3203372">y</a></span><span class="op" id="3203462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3203465"><a href="/image/image.go.html#3203350">p</a></span><span class="op" id="3203466">.</span><span class="ident" id="3203467">Pix</span><span class="op" id="3203470">[</span><span class="ident" id="3203471"><a href="/image/image.go.html#3203441">i</a></span><span class="op" id="3203472">]</span>&nbsp;<span class="op" id="3203474">=</span>&nbsp;<span class="ident" id="3203476"><a href="/image/image.go.html#3203379">c</a></span><span class="op" id="3203477">.</span><span class="ident" id="3203478">A</span><br>
<span class="lineno"></span><span class="op" id="3203480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span><span class="comment" id="3203483">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="3203560">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="3203632">func</span>&nbsp;<span class="op" id="3203637">(</span><span class="ident" id="3203638">p</span>&nbsp;<span class="op" id="3203640">*</span><span class="ident" id="3203641"><a href="/image/image.go.html#3202311">Alpha</a></span><span class="op" id="3203646">)</span>&nbsp;<span class="ident" id="3203648">SubImage</span><span class="op" id="3203656">(</span><span class="ident" id="3203657">r</span>&nbsp;<span class="ident" id="3203659"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3203668">)</span>&nbsp;<span class="ident" id="3203670"><a href="/image/image.go.html#3190140">Image</a></span>&nbsp;<span class="op" id="3203676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3203679"><a href="/image/image.go.html#3203657">r</a></span>&nbsp;<span class="op" id="3203681">=</span>&nbsp;<span class="ident" id="3203683"><a href="/image/image.go.html#3203657">r</a></span><span class="op" id="3203684">.</span><span class="ident" id="3203685">Intersect</span><span class="op" id="3203694">(</span><span class="ident" id="3203695"><a href="/image/image.go.html#3203638">p</a></span><span class="op" id="3203696">.</span><span class="ident" id="3203697">Rect</span><span class="op" id="3203701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3203704">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3203785">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3203867">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3203917">if</span>&nbsp;<span class="ident" id="3203920"><a href="/image/image.go.html#3203657">r</a></span><span class="op" id="3203921">.</span><span class="ident" id="3203922">Empty</span><span class="op" id="3203927">(</span><span class="op" id="3203928">)</span>&nbsp;<span class="op" id="3203930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3203934">return</span>&nbsp;<span class="op" id="3203941">&amp;</span><span class="ident" id="3203942"><a href="/image/image.go.html#3202311">Alpha</a></span><span class="op" id="3203947">{</span><span class="op" id="3203948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3203951">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3203954">i</span>&nbsp;<span class="op" id="3203956">:=</span>&nbsp;<span class="ident" id="3203959"><a href="/image/image.go.html#3203638">p</a></span><span class="op" id="3203960">.</span><span class="ident" id="3203961">PixOffset</span><span class="op" id="3203970">(</span><span class="ident" id="3203971"><a href="/image/image.go.html#3203657">r</a></span><span class="op" id="3203972">.</span><span class="ident" id="3203973">Min</span><span class="op" id="3203976">.</span><span class="ident" id="3203977">X</span><span class="op" id="3203978">,</span>&nbsp;<span class="ident" id="3203980"><a href="/image/image.go.html#3203657">r</a></span><span class="op" id="3203981">.</span><span class="ident" id="3203982">Min</span><span class="op" id="3203985">.</span><span class="ident" id="3203986">Y</span><span class="op" id="3203987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3203990">return</span>&nbsp;<span class="op" id="3203997">&amp;</span><span class="ident" id="3203998"><a href="/image/image.go.html#3202311">Alpha</a></span><span class="op" id="3204003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3204007">Pix</span><span class="op" id="3204010">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3204015"><a href="/image/image.go.html#3203638">p</a></span><span class="op" id="3204016">.</span><span class="ident" id="3204017">Pix</span><span class="op" id="3204020">[</span><span class="ident" id="3204021"><a href="/image/image.go.html#3203954">i</a></span><span class="op" id="3204022">:</span><span class="op" id="3204023">]</span><span class="op" id="3204024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3204028">Stride</span><span class="op" id="3204034">:</span>&nbsp;<span class="ident" id="3204036"><a href="/image/image.go.html#3203638">p</a></span><span class="op" id="3204037">.</span><span class="ident" id="3204038">Stride</span><span class="op" id="3204044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3204048">Rect</span><span class="op" id="3204052">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3204056"><a href="/image/image.go.html#3203657">r</a></span><span class="op" id="3204057">,</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3204060">}</span><br>
<span class="lineno"></span><span class="op" id="3204062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3204065">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="3204138">func</span>&nbsp;<span class="op" id="3204143">(</span><span class="ident" id="3204144">p</span>&nbsp;<span class="op" id="3204146">*</span><span class="ident" id="3204147"><a href="/image/image.go.html#3202311">Alpha</a></span><span class="op" id="3204152">)</span>&nbsp;<span class="ident" id="3204154">Opaque</span><span class="op" id="3204160">(</span><span class="op" id="3204161">)</span>&nbsp;<span class="builtintype" id="3204163">bool</span>&nbsp;<span class="op" id="3204168">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3204171">if</span>&nbsp;<span class="ident" id="3204174"><a href="/image/image.go.html#3204144">p</a></span><span class="op" id="3204175">.</span><span class="ident" id="3204176">Rect</span><span class="op" id="3204180">.</span><span class="ident" id="3204181">Empty</span><span class="op" id="3204186">(</span><span class="op" id="3204187">)</span>&nbsp;<span class="op" id="3204189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3204193">return</span>&nbsp;<span class="builtintype" id="3204200">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3204206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3204209">i0</span><span class="op" id="3204211">,</span>&nbsp;<span class="ident" id="3204213">i1</span>&nbsp;<span class="op" id="3204216">:=</span>&nbsp;<span class="num" id="3204219">0</span><span class="op" id="3204220">,</span>&nbsp;<span class="ident" id="3204222"><a href="/image/image.go.html#3204144">p</a></span><span class="op" id="3204223">.</span><span class="ident" id="3204224">Rect</span><span class="op" id="3204228">.</span><span class="ident" id="3204229">Dx</span><span class="op" id="3204231">(</span><span class="op" id="3204232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3204235">for</span>&nbsp;<span class="ident" id="3204239">y</span>&nbsp;<span class="op" id="3204241">:=</span>&nbsp;<span class="ident" id="3204244"><a href="/image/image.go.html#3204144">p</a></span><span class="op" id="3204245">.</span><span class="ident" id="3204246">Rect</span><span class="op" id="3204250">.</span><span class="ident" id="3204251">Min</span><span class="op" id="3204254">.</span><span class="ident" id="3204255">Y</span><span class="op" id="3204256">;</span>&nbsp;<span class="ident" id="3204258"><a href="/image/image.go.html#3204239">y</a></span>&nbsp;<span class="op" id="3204260">&lt;</span>&nbsp;<span class="ident" id="3204262"><a href="/image/image.go.html#3204144">p</a></span><span class="op" id="3204263">.</span><span class="ident" id="3204264">Rect</span><span class="op" id="3204268">.</span><span class="ident" id="3204269">Max</span><span class="op" id="3204272">.</span><span class="ident" id="3204273">Y</span><span class="op" id="3204274">;</span>&nbsp;<span class="ident" id="3204276"><a href="/image/image.go.html#3204239">y</a></span><span class="op" id="3204277">++</span>&nbsp;<span class="op" id="3204280">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3204284">for</span>&nbsp;<span class="ident" id="3204288">i</span>&nbsp;<span class="op" id="3204290">:=</span>&nbsp;<span class="ident" id="3204293"><a href="/image/image.go.html#3204209">i0</a></span><span class="op" id="3204295">;</span>&nbsp;<span class="ident" id="3204297"><a href="/image/image.go.html#3204288">i</a></span>&nbsp;<span class="op" id="3204299">&lt;</span>&nbsp;<span class="ident" id="3204301"><a href="/image/image.go.html#3204213">i1</a></span><span class="op" id="3204303">;</span>&nbsp;<span class="ident" id="3204305"><a href="/image/image.go.html#3204288">i</a></span><span class="op" id="3204306">++</span>&nbsp;<span class="op" id="3204309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3204314">if</span>&nbsp;<span class="ident" id="3204317"><a href="/image/image.go.html#3204144">p</a></span><span class="op" id="3204318">.</span><span class="ident" id="3204319">Pix</span><span class="op" id="3204322">[</span><span class="ident" id="3204323"><a href="/image/image.go.html#3204288">i</a></span><span class="op" id="3204324">]</span>&nbsp;<span class="op" id="3204326">!=</span>&nbsp;<span class="num" id="3204329">0xff</span>&nbsp;<span class="op" id="3204334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3204340">return</span>&nbsp;<span class="builtintype" id="3204347">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3204356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3204360">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3204364"><a href="/image/image.go.html#3204209">i0</a></span>&nbsp;<span class="op" id="3204367">+=</span>&nbsp;<span class="ident" id="3204370"><a href="/image/image.go.html#3204144">p</a></span><span class="op" id="3204371">.</span><span class="ident" id="3204372">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3204381"><a href="/image/image.go.html#3204213">i1</a></span>&nbsp;<span class="op" id="3204384">+=</span>&nbsp;<span class="ident" id="3204387"><a href="/image/image.go.html#3204144">p</a></span><span class="op" id="3204388">.</span><span class="ident" id="3204389">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3204397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3204400">return</span>&nbsp;<span class="builtintype" id="3204407">true</span><br>
<span class="lineno"></span><span class="op" id="3204412">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span><span class="comment" id="3204415">//&nbsp;NewAlpha&nbsp;returns&nbsp;a&nbsp;new&nbsp;Alpha&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="3204470">func</span>&nbsp;<span class="ident" id="3204475">NewAlpha</span><span class="op" id="3204483">(</span><span class="ident" id="3204484">r</span>&nbsp;<span class="ident" id="3204486"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3204495">)</span>&nbsp;<span class="op" id="3204497">*</span><span class="ident" id="3204498"><a href="/image/image.go.html#3202311">Alpha</a></span>&nbsp;<span class="op" id="3204504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3204507">w</span><span class="op" id="3204508">,</span>&nbsp;<span class="ident" id="3204510">h</span>&nbsp;<span class="op" id="3204512">:=</span>&nbsp;<span class="ident" id="3204515"><a href="/image/image.go.html#3204484">r</a></span><span class="op" id="3204516">.</span><span class="ident" id="3204517">Dx</span><span class="op" id="3204519">(</span><span class="op" id="3204520">)</span><span class="op" id="3204521">,</span>&nbsp;<span class="ident" id="3204523"><a href="/image/image.go.html#3204484">r</a></span><span class="op" id="3204524">.</span><span class="ident" id="3204525">Dy</span><span class="op" id="3204527">(</span><span class="op" id="3204528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3204531">pix</span>&nbsp;<span class="op" id="3204535">:=</span>&nbsp;<span class="builtinfunc" id="3204538">make</span><span class="op" id="3204542">(</span><span class="op" id="3204543">[</span><span class="op" id="3204544">]</span><span class="builtintype" id="3204545">uint8</span><span class="op" id="3204550">,</span>&nbsp;<span class="num" id="3204552">1</span><span class="op" id="3204553">*</span><span class="ident" id="3204554"><a href="/image/image.go.html#3204507">w</a></span><span class="op" id="3204555">*</span><span class="ident" id="3204556"><a href="/image/image.go.html#3204510">h</a></span><span class="op" id="3204557">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3204560">return</span>&nbsp;<span class="op" id="3204567">&amp;</span><span class="ident" id="3204568"><a href="/image/image.go.html#3202311">Alpha</a></span><span class="op" id="3204573">{</span><span class="ident" id="3204574"><a href="/image/image.go.html#3204531">pix</a></span><span class="op" id="3204577">,</span>&nbsp;<span class="num" id="3204579">1</span>&nbsp;<span class="op" id="3204581">*</span>&nbsp;<span class="ident" id="3204583"><a href="/image/image.go.html#3204507">w</a></span><span class="op" id="3204584">,</span>&nbsp;<span class="ident" id="3204586"><a href="/image/image.go.html#3204484">r</a></span><span class="op" id="3204587">}</span><br>
<span class="lineno"></span><span class="op" id="3204589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3204592">//&nbsp;Alpha16&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.Alpha64&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="3204671">type</span>&nbsp;<span class="ident" id="3204676">Alpha16</span>&nbsp;<span class="keyword" id="3204684">struct</span>&nbsp;<span class="op" id="3204691">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3204694">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;as&nbsp;alpha&nbsp;values&nbsp;in&nbsp;big-endian&nbsp;format.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3204779">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*2].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3204847">Pix</span>&nbsp;<span class="op" id="3204851">[</span><span class="op" id="3204852">]</span><span class="builtintype" id="3204853">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3204860">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3204936">Stride</span>&nbsp;<span class="builtintype" id="3204943">int</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3204948">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3204980">Rect</span>&nbsp;<span class="ident" id="3204985"><a href="/image/geom.go.html#3185229">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="3204995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3204998">func</span>&nbsp;<span class="op" id="3205003">(</span><span class="ident" id="3205004">p</span>&nbsp;<span class="op" id="3205006">*</span><span class="ident" id="3205007"><a href="/image/image.go.html#3204676">Alpha16</a></span><span class="op" id="3205014">)</span>&nbsp;<span class="ident" id="3205016">ColorModel</span><span class="op" id="3205026">(</span><span class="op" id="3205027">)</span>&nbsp;<span class="ident" id="3205029"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3205034">.</span><span class="ident" id="3205035">Model</span>&nbsp;<span class="op" id="3205041">{</span>&nbsp;<span class="keyword" id="3205043">return</span>&nbsp;<span class="ident" id="3205050"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3205055">.</span><span class="ident" id="3205056">Alpha16Model</span>&nbsp;<span class="op" id="3205069">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span><span class="keyword" id="3205072">func</span>&nbsp;<span class="op" id="3205077">(</span><span class="ident" id="3205078">p</span>&nbsp;<span class="op" id="3205080">*</span><span class="ident" id="3205081"><a href="/image/image.go.html#3204676">Alpha16</a></span><span class="op" id="3205088">)</span>&nbsp;<span class="ident" id="3205090">Bounds</span><span class="op" id="3205096">(</span><span class="op" id="3205097">)</span>&nbsp;<span class="ident" id="3205099"><a href="/image/geom.go.html#3185229">Rectangle</a></span>&nbsp;<span class="op" id="3205109">{</span>&nbsp;<span class="keyword" id="3205111">return</span>&nbsp;<span class="ident" id="3205118"><a href="/image/image.go.html#3205078">p</a></span><span class="op" id="3205119">.</span><span class="ident" id="3205120">Rect</span>&nbsp;<span class="op" id="3205125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3205128">func</span>&nbsp;<span class="op" id="3205133">(</span><span class="ident" id="3205134">p</span>&nbsp;<span class="op" id="3205136">*</span><span class="ident" id="3205137"><a href="/image/image.go.html#3204676">Alpha16</a></span><span class="op" id="3205144">)</span>&nbsp;<span class="ident" id="3205146">At</span><span class="op" id="3205148">(</span><span class="ident" id="3205149">x</span><span class="op" id="3205150">,</span>&nbsp;<span class="ident" id="3205152">y</span>&nbsp;<span class="builtintype" id="3205154">int</span><span class="op" id="3205157">)</span>&nbsp;<span class="ident" id="3205159"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3205164">.</span><span class="ident" id="3205165">Color</span>&nbsp;<span class="op" id="3205171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205174">return</span>&nbsp;<span class="ident" id="3205181"><a href="/image/image.go.html#3205134">p</a></span><span class="op" id="3205182">.</span><span class="ident" id="3205183">Alpha16At</span><span class="op" id="3205192">(</span><span class="ident" id="3205193"><a href="/image/image.go.html#3205149">x</a></span><span class="op" id="3205194">,</span>&nbsp;<span class="ident" id="3205196"><a href="/image/image.go.html#3205152">y</a></span><span class="op" id="3205197">)</span><br>
<span class="lineno">590</span><span class="op" id="3205199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3205202">func</span>&nbsp;<span class="op" id="3205207">(</span><span class="ident" id="3205208">p</span>&nbsp;<span class="op" id="3205210">*</span><span class="ident" id="3205211"><a href="/image/image.go.html#3204676">Alpha16</a></span><span class="op" id="3205218">)</span>&nbsp;<span class="ident" id="3205220">Alpha16At</span><span class="op" id="3205229">(</span><span class="ident" id="3205230">x</span><span class="op" id="3205231">,</span>&nbsp;<span class="ident" id="3205233">y</span>&nbsp;<span class="builtintype" id="3205235">int</span><span class="op" id="3205238">)</span>&nbsp;<span class="ident" id="3205240"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3205245">.</span><span class="ident" id="3205246">Alpha16</span>&nbsp;<span class="op" id="3205254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205257">if</span>&nbsp;<span class="op" id="3205260">!</span><span class="op" id="3205261">(</span><span class="ident" id="3205262"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3205267">{</span><span class="ident" id="3205268"><a href="/image/image.go.html#3205230">x</a></span><span class="op" id="3205269">,</span>&nbsp;<span class="ident" id="3205271"><a href="/image/image.go.html#3205233">y</a></span><span class="op" id="3205272">}</span><span class="op" id="3205273">.</span><span class="ident" id="3205274">In</span><span class="op" id="3205276">(</span><span class="ident" id="3205277"><a href="/image/image.go.html#3205208">p</a></span><span class="op" id="3205278">.</span><span class="ident" id="3205279">Rect</span><span class="op" id="3205283">)</span><span class="op" id="3205284">)</span>&nbsp;<span class="op" id="3205286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205290">return</span>&nbsp;<span class="ident" id="3205297"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3205302">.</span><span class="ident" id="3205303">Alpha16</span><span class="op" id="3205310">{</span><span class="op" id="3205311">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3205314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3205317">i</span>&nbsp;<span class="op" id="3205319">:=</span>&nbsp;<span class="ident" id="3205322"><a href="/image/image.go.html#3205208">p</a></span><span class="op" id="3205323">.</span><span class="ident" id="3205324">PixOffset</span><span class="op" id="3205333">(</span><span class="ident" id="3205334"><a href="/image/image.go.html#3205230">x</a></span><span class="op" id="3205335">,</span>&nbsp;<span class="ident" id="3205337"><a href="/image/image.go.html#3205233">y</a></span><span class="op" id="3205338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205341">return</span>&nbsp;<span class="ident" id="3205348"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3205353">.</span><span class="ident" id="3205354">Alpha16</span><span class="op" id="3205361">{</span><span class="builtintype" id="3205362">uint16</span><span class="op" id="3205368">(</span><span class="ident" id="3205369"><a href="/image/image.go.html#3205208">p</a></span><span class="op" id="3205370">.</span><span class="ident" id="3205371">Pix</span><span class="op" id="3205374">[</span><span class="ident" id="3205375"><a href="/image/image.go.html#3205317">i</a></span><span class="op" id="3205376">+</span><span class="num" id="3205377">0</span><span class="op" id="3205378">]</span><span class="op" id="3205379">)</span><span class="op" id="3205380">&lt;&lt;</span><span class="num" id="3205382">8</span>&nbsp;<span class="op" id="3205384">|</span>&nbsp;<span class="builtintype" id="3205386">uint16</span><span class="op" id="3205392">(</span><span class="ident" id="3205393"><a href="/image/image.go.html#3205208">p</a></span><span class="op" id="3205394">.</span><span class="ident" id="3205395">Pix</span><span class="op" id="3205398">[</span><span class="ident" id="3205399"><a href="/image/image.go.html#3205317">i</a></span><span class="op" id="3205400">+</span><span class="num" id="3205401">1</span><span class="op" id="3205402">]</span><span class="op" id="3205403">)</span><span class="op" id="3205404">}</span><br>
<span class="lineno"></span><span class="op" id="3205406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span><span class="comment" id="3205409">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3205488">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="3205512">func</span>&nbsp;<span class="op" id="3205517">(</span><span class="ident" id="3205518">p</span>&nbsp;<span class="op" id="3205520">*</span><span class="ident" id="3205521"><a href="/image/image.go.html#3204676">Alpha16</a></span><span class="op" id="3205528">)</span>&nbsp;<span class="ident" id="3205530">PixOffset</span><span class="op" id="3205539">(</span><span class="ident" id="3205540">x</span><span class="op" id="3205541">,</span>&nbsp;<span class="ident" id="3205543">y</span>&nbsp;<span class="builtintype" id="3205545">int</span><span class="op" id="3205548">)</span>&nbsp;<span class="builtintype" id="3205550">int</span>&nbsp;<span class="op" id="3205554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205557">return</span>&nbsp;<span class="op" id="3205564">(</span><span class="ident" id="3205565"><a href="/image/image.go.html#3205543">y</a></span><span class="op" id="3205566">-</span><span class="ident" id="3205567"><a href="/image/image.go.html#3205518">p</a></span><span class="op" id="3205568">.</span><span class="ident" id="3205569">Rect</span><span class="op" id="3205573">.</span><span class="ident" id="3205574">Min</span><span class="op" id="3205577">.</span><span class="ident" id="3205578">Y</span><span class="op" id="3205579">)</span><span class="op" id="3205580">*</span><span class="ident" id="3205581"><a href="/image/image.go.html#3205518">p</a></span><span class="op" id="3205582">.</span><span class="ident" id="3205583">Stride</span>&nbsp;<span class="op" id="3205590">+</span>&nbsp;<span class="op" id="3205592">(</span><span class="ident" id="3205593"><a href="/image/image.go.html#3205540">x</a></span><span class="op" id="3205594">-</span><span class="ident" id="3205595"><a href="/image/image.go.html#3205518">p</a></span><span class="op" id="3205596">.</span><span class="ident" id="3205597">Rect</span><span class="op" id="3205601">.</span><span class="ident" id="3205602">Min</span><span class="op" id="3205605">.</span><span class="ident" id="3205606">X</span><span class="op" id="3205607">)</span><span class="op" id="3205608">*</span><span class="num" id="3205609">2</span><br>
<span class="lineno"></span><span class="op" id="3205611">}</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span><span class="keyword" id="3205614">func</span>&nbsp;<span class="op" id="3205619">(</span><span class="ident" id="3205620">p</span>&nbsp;<span class="op" id="3205622">*</span><span class="ident" id="3205623"><a href="/image/image.go.html#3204676">Alpha16</a></span><span class="op" id="3205630">)</span>&nbsp;<span class="ident" id="3205632">Set</span><span class="op" id="3205635">(</span><span class="ident" id="3205636">x</span><span class="op" id="3205637">,</span>&nbsp;<span class="ident" id="3205639">y</span>&nbsp;<span class="builtintype" id="3205641">int</span><span class="op" id="3205644">,</span>&nbsp;<span class="ident" id="3205646">c</span>&nbsp;<span class="ident" id="3205648"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3205653">.</span><span class="ident" id="3205654">Color</span><span class="op" id="3205659">)</span>&nbsp;<span class="op" id="3205661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205664">if</span>&nbsp;<span class="op" id="3205667">!</span><span class="op" id="3205668">(</span><span class="ident" id="3205669"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3205674">{</span><span class="ident" id="3205675"><a href="/image/image.go.html#3205636">x</a></span><span class="op" id="3205676">,</span>&nbsp;<span class="ident" id="3205678"><a href="/image/image.go.html#3205639">y</a></span><span class="op" id="3205679">}</span><span class="op" id="3205680">.</span><span class="ident" id="3205681">In</span><span class="op" id="3205683">(</span><span class="ident" id="3205684"><a href="/image/image.go.html#3205620">p</a></span><span class="op" id="3205685">.</span><span class="ident" id="3205686">Rect</span><span class="op" id="3205690">)</span><span class="op" id="3205691">)</span>&nbsp;<span class="op" id="3205693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205697">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3205705">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3205708">i</span>&nbsp;<span class="op" id="3205710">:=</span>&nbsp;<span class="ident" id="3205713"><a href="/image/image.go.html#3205620">p</a></span><span class="op" id="3205714">.</span><span class="ident" id="3205715">PixOffset</span><span class="op" id="3205724">(</span><span class="ident" id="3205725"><a href="/image/image.go.html#3205636">x</a></span><span class="op" id="3205726">,</span>&nbsp;<span class="ident" id="3205728"><a href="/image/image.go.html#3205639">y</a></span><span class="op" id="3205729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3205732">c1</span>&nbsp;<span class="op" id="3205735">:=</span>&nbsp;<span class="ident" id="3205738"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3205743">.</span><span class="ident" id="3205744">Alpha16Model</span><span class="op" id="3205756">.</span><span class="ident" id="3205757">Convert</span><span class="op" id="3205764">(</span><span class="ident" id="3205765"><a href="/image/image.go.html#3205646">c</a></span><span class="op" id="3205766">)</span><span class="op" id="3205767">.</span><span class="op" id="3205768">(</span><span class="ident" id="3205769"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3205774">.</span><span class="ident" id="3205775">Alpha16</span><span class="op" id="3205782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3205785"><a href="/image/image.go.html#3205620">p</a></span><span class="op" id="3205786">.</span><span class="ident" id="3205787">Pix</span><span class="op" id="3205790">[</span><span class="ident" id="3205791"><a href="/image/image.go.html#3205708">i</a></span><span class="op" id="3205792">+</span><span class="num" id="3205793">0</span><span class="op" id="3205794">]</span>&nbsp;<span class="op" id="3205796">=</span>&nbsp;<span class="builtintype" id="3205798">uint8</span><span class="op" id="3205803">(</span><span class="ident" id="3205804"><a href="/image/image.go.html#3205732">c1</a></span><span class="op" id="3205806">.</span><span class="ident" id="3205807">A</span>&nbsp;<span class="op" id="3205809">&gt;&gt;</span>&nbsp;<span class="num" id="3205812">8</span><span class="op" id="3205813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3205816"><a href="/image/image.go.html#3205620">p</a></span><span class="op" id="3205817">.</span><span class="ident" id="3205818">Pix</span><span class="op" id="3205821">[</span><span class="ident" id="3205822"><a href="/image/image.go.html#3205708">i</a></span><span class="op" id="3205823">+</span><span class="num" id="3205824">1</span><span class="op" id="3205825">]</span>&nbsp;<span class="op" id="3205827">=</span>&nbsp;<span class="builtintype" id="3205829">uint8</span><span class="op" id="3205834">(</span><span class="ident" id="3205835"><a href="/image/image.go.html#3205732">c1</a></span><span class="op" id="3205837">.</span><span class="ident" id="3205838">A</span><span class="op" id="3205839">)</span><br>
<span class="lineno"></span><span class="op" id="3205841">}</span><br>
<span class="lineno">615</span><br>
<span class="lineno"></span><span class="keyword" id="3205844">func</span>&nbsp;<span class="op" id="3205849">(</span><span class="ident" id="3205850">p</span>&nbsp;<span class="op" id="3205852">*</span><span class="ident" id="3205853"><a href="/image/image.go.html#3204676">Alpha16</a></span><span class="op" id="3205860">)</span>&nbsp;<span class="ident" id="3205862">SetAlpha16</span><span class="op" id="3205872">(</span><span class="ident" id="3205873">x</span><span class="op" id="3205874">,</span>&nbsp;<span class="ident" id="3205876">y</span>&nbsp;<span class="builtintype" id="3205878">int</span><span class="op" id="3205881">,</span>&nbsp;<span class="ident" id="3205883">c</span>&nbsp;<span class="ident" id="3205885"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3205890">.</span><span class="ident" id="3205891">Alpha16</span><span class="op" id="3205898">)</span>&nbsp;<span class="op" id="3205900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205903">if</span>&nbsp;<span class="op" id="3205906">!</span><span class="op" id="3205907">(</span><span class="ident" id="3205908"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3205913">{</span><span class="ident" id="3205914"><a href="/image/image.go.html#3205873">x</a></span><span class="op" id="3205915">,</span>&nbsp;<span class="ident" id="3205917"><a href="/image/image.go.html#3205876">y</a></span><span class="op" id="3205918">}</span><span class="op" id="3205919">.</span><span class="ident" id="3205920">In</span><span class="op" id="3205922">(</span><span class="ident" id="3205923"><a href="/image/image.go.html#3205850">p</a></span><span class="op" id="3205924">.</span><span class="ident" id="3205925">Rect</span><span class="op" id="3205929">)</span><span class="op" id="3205930">)</span>&nbsp;<span class="op" id="3205932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205936">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3205944">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3205947">i</span>&nbsp;<span class="op" id="3205949">:=</span>&nbsp;<span class="ident" id="3205952"><a href="/image/image.go.html#3205850">p</a></span><span class="op" id="3205953">.</span><span class="ident" id="3205954">PixOffset</span><span class="op" id="3205963">(</span><span class="ident" id="3205964"><a href="/image/image.go.html#3205873">x</a></span><span class="op" id="3205965">,</span>&nbsp;<span class="ident" id="3205967"><a href="/image/image.go.html#3205876">y</a></span><span class="op" id="3205968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3205971"><a href="/image/image.go.html#3205850">p</a></span><span class="op" id="3205972">.</span><span class="ident" id="3205973">Pix</span><span class="op" id="3205976">[</span><span class="ident" id="3205977"><a href="/image/image.go.html#3205947">i</a></span><span class="op" id="3205978">+</span><span class="num" id="3205979">0</span><span class="op" id="3205980">]</span>&nbsp;<span class="op" id="3205982">=</span>&nbsp;<span class="builtintype" id="3205984">uint8</span><span class="op" id="3205989">(</span><span class="ident" id="3205990"><a href="/image/image.go.html#3205883">c</a></span><span class="op" id="3205991">.</span><span class="ident" id="3205992">A</span>&nbsp;<span class="op" id="3205994">&gt;&gt;</span>&nbsp;<span class="num" id="3205997">8</span><span class="op" id="3205998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3206001"><a href="/image/image.go.html#3205850">p</a></span><span class="op" id="3206002">.</span><span class="ident" id="3206003">Pix</span><span class="op" id="3206006">[</span><span class="ident" id="3206007"><a href="/image/image.go.html#3205947">i</a></span><span class="op" id="3206008">+</span><span class="num" id="3206009">1</span><span class="op" id="3206010">]</span>&nbsp;<span class="op" id="3206012">=</span>&nbsp;<span class="builtintype" id="3206014">uint8</span><span class="op" id="3206019">(</span><span class="ident" id="3206020"><a href="/image/image.go.html#3205883">c</a></span><span class="op" id="3206021">.</span><span class="ident" id="3206022">A</span><span class="op" id="3206023">)</span><br>
<span class="lineno"></span><span class="op" id="3206025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">625</span><span class="comment" id="3206028">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="3206105">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="3206177">func</span>&nbsp;<span class="op" id="3206182">(</span><span class="ident" id="3206183">p</span>&nbsp;<span class="op" id="3206185">*</span><span class="ident" id="3206186"><a href="/image/image.go.html#3204676">Alpha16</a></span><span class="op" id="3206193">)</span>&nbsp;<span class="ident" id="3206195">SubImage</span><span class="op" id="3206203">(</span><span class="ident" id="3206204">r</span>&nbsp;<span class="ident" id="3206206"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3206215">)</span>&nbsp;<span class="ident" id="3206217"><a href="/image/image.go.html#3190140">Image</a></span>&nbsp;<span class="op" id="3206223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3206226"><a href="/image/image.go.html#3206204">r</a></span>&nbsp;<span class="op" id="3206228">=</span>&nbsp;<span class="ident" id="3206230"><a href="/image/image.go.html#3206204">r</a></span><span class="op" id="3206231">.</span><span class="ident" id="3206232">Intersect</span><span class="op" id="3206241">(</span><span class="ident" id="3206242"><a href="/image/image.go.html#3206183">p</a></span><span class="op" id="3206243">.</span><span class="ident" id="3206244">Rect</span><span class="op" id="3206248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3206251">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3206332">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3206414">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206464">if</span>&nbsp;<span class="ident" id="3206467"><a href="/image/image.go.html#3206204">r</a></span><span class="op" id="3206468">.</span><span class="ident" id="3206469">Empty</span><span class="op" id="3206474">(</span><span class="op" id="3206475">)</span>&nbsp;<span class="op" id="3206477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206481">return</span>&nbsp;<span class="op" id="3206488">&amp;</span><span class="ident" id="3206489"><a href="/image/image.go.html#3204676">Alpha16</a></span><span class="op" id="3206496">{</span><span class="op" id="3206497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3206500">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3206503">i</span>&nbsp;<span class="op" id="3206505">:=</span>&nbsp;<span class="ident" id="3206508"><a href="/image/image.go.html#3206183">p</a></span><span class="op" id="3206509">.</span><span class="ident" id="3206510">PixOffset</span><span class="op" id="3206519">(</span><span class="ident" id="3206520"><a href="/image/image.go.html#3206204">r</a></span><span class="op" id="3206521">.</span><span class="ident" id="3206522">Min</span><span class="op" id="3206525">.</span><span class="ident" id="3206526">X</span><span class="op" id="3206527">,</span>&nbsp;<span class="ident" id="3206529"><a href="/image/image.go.html#3206204">r</a></span><span class="op" id="3206530">.</span><span class="ident" id="3206531">Min</span><span class="op" id="3206534">.</span><span class="ident" id="3206535">Y</span><span class="op" id="3206536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206539">return</span>&nbsp;<span class="op" id="3206546">&amp;</span><span class="ident" id="3206547"><a href="/image/image.go.html#3204676">Alpha16</a></span><span class="op" id="3206554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3206558">Pix</span><span class="op" id="3206561">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3206566"><a href="/image/image.go.html#3206183">p</a></span><span class="op" id="3206567">.</span><span class="ident" id="3206568">Pix</span><span class="op" id="3206571">[</span><span class="ident" id="3206572"><a href="/image/image.go.html#3206503">i</a></span><span class="op" id="3206573">:</span><span class="op" id="3206574">]</span><span class="op" id="3206575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3206579">Stride</span><span class="op" id="3206585">:</span>&nbsp;<span class="ident" id="3206587"><a href="/image/image.go.html#3206183">p</a></span><span class="op" id="3206588">.</span><span class="ident" id="3206589">Stride</span><span class="op" id="3206595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3206599">Rect</span><span class="op" id="3206603">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3206607"><a href="/image/image.go.html#3206204">r</a></span><span class="op" id="3206608">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3206611">}</span><br>
<span class="lineno"></span><span class="op" id="3206613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3206616">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="3206689">func</span>&nbsp;<span class="op" id="3206694">(</span><span class="ident" id="3206695">p</span>&nbsp;<span class="op" id="3206697">*</span><span class="ident" id="3206698"><a href="/image/image.go.html#3204676">Alpha16</a></span><span class="op" id="3206705">)</span>&nbsp;<span class="ident" id="3206707">Opaque</span><span class="op" id="3206713">(</span><span class="op" id="3206714">)</span>&nbsp;<span class="builtintype" id="3206716">bool</span>&nbsp;<span class="op" id="3206721">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206724">if</span>&nbsp;<span class="ident" id="3206727"><a href="/image/image.go.html#3206695">p</a></span><span class="op" id="3206728">.</span><span class="ident" id="3206729">Rect</span><span class="op" id="3206733">.</span><span class="ident" id="3206734">Empty</span><span class="op" id="3206739">(</span><span class="op" id="3206740">)</span>&nbsp;<span class="op" id="3206742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206746">return</span>&nbsp;<span class="builtintype" id="3206753">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3206759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3206762">i0</span><span class="op" id="3206764">,</span>&nbsp;<span class="ident" id="3206766">i1</span>&nbsp;<span class="op" id="3206769">:=</span>&nbsp;<span class="num" id="3206772">0</span><span class="op" id="3206773">,</span>&nbsp;<span class="ident" id="3206775"><a href="/image/image.go.html#3206695">p</a></span><span class="op" id="3206776">.</span><span class="ident" id="3206777">Rect</span><span class="op" id="3206781">.</span><span class="ident" id="3206782">Dx</span><span class="op" id="3206784">(</span><span class="op" id="3206785">)</span><span class="op" id="3206786">*</span><span class="num" id="3206787">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206790">for</span>&nbsp;<span class="ident" id="3206794">y</span>&nbsp;<span class="op" id="3206796">:=</span>&nbsp;<span class="ident" id="3206799"><a href="/image/image.go.html#3206695">p</a></span><span class="op" id="3206800">.</span><span class="ident" id="3206801">Rect</span><span class="op" id="3206805">.</span><span class="ident" id="3206806">Min</span><span class="op" id="3206809">.</span><span class="ident" id="3206810">Y</span><span class="op" id="3206811">;</span>&nbsp;<span class="ident" id="3206813"><a href="/image/image.go.html#3206794">y</a></span>&nbsp;<span class="op" id="3206815">&lt;</span>&nbsp;<span class="ident" id="3206817"><a href="/image/image.go.html#3206695">p</a></span><span class="op" id="3206818">.</span><span class="ident" id="3206819">Rect</span><span class="op" id="3206823">.</span><span class="ident" id="3206824">Max</span><span class="op" id="3206827">.</span><span class="ident" id="3206828">Y</span><span class="op" id="3206829">;</span>&nbsp;<span class="ident" id="3206831"><a href="/image/image.go.html#3206794">y</a></span><span class="op" id="3206832">++</span>&nbsp;<span class="op" id="3206835">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206839">for</span>&nbsp;<span class="ident" id="3206843">i</span>&nbsp;<span class="op" id="3206845">:=</span>&nbsp;<span class="ident" id="3206848"><a href="/image/image.go.html#3206762">i0</a></span><span class="op" id="3206850">;</span>&nbsp;<span class="ident" id="3206852"><a href="/image/image.go.html#3206843">i</a></span>&nbsp;<span class="op" id="3206854">&lt;</span>&nbsp;<span class="ident" id="3206856"><a href="/image/image.go.html#3206766">i1</a></span><span class="op" id="3206858">;</span>&nbsp;<span class="ident" id="3206860"><a href="/image/image.go.html#3206843">i</a></span>&nbsp;<span class="op" id="3206862">+=</span>&nbsp;<span class="num" id="3206865">2</span>&nbsp;<span class="op" id="3206867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206872">if</span>&nbsp;<span class="ident" id="3206875"><a href="/image/image.go.html#3206695">p</a></span><span class="op" id="3206876">.</span><span class="ident" id="3206877">Pix</span><span class="op" id="3206880">[</span><span class="ident" id="3206881"><a href="/image/image.go.html#3206843">i</a></span><span class="op" id="3206882">+</span><span class="num" id="3206883">0</span><span class="op" id="3206884">]</span>&nbsp;<span class="op" id="3206886">!=</span>&nbsp;<span class="num" id="3206889">0xff</span>&nbsp;<span class="op" id="3206894">||</span>&nbsp;<span class="ident" id="3206897"><a href="/image/image.go.html#3206695">p</a></span><span class="op" id="3206898">.</span><span class="ident" id="3206899">Pix</span><span class="op" id="3206902">[</span><span class="ident" id="3206903"><a href="/image/image.go.html#3206843">i</a></span><span class="op" id="3206904">+</span><span class="num" id="3206905">1</span><span class="op" id="3206906">]</span>&nbsp;<span class="op" id="3206908">!=</span>&nbsp;<span class="num" id="3206911">0xff</span>&nbsp;<span class="op" id="3206916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206922">return</span>&nbsp;<span class="builtintype" id="3206929">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3206938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3206942">}</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3206946"><a href="/image/image.go.html#3206762">i0</a></span>&nbsp;<span class="op" id="3206949">+=</span>&nbsp;<span class="ident" id="3206952"><a href="/image/image.go.html#3206695">p</a></span><span class="op" id="3206953">.</span><span class="ident" id="3206954">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3206963"><a href="/image/image.go.html#3206766">i1</a></span>&nbsp;<span class="op" id="3206966">+=</span>&nbsp;<span class="ident" id="3206969"><a href="/image/image.go.html#3206695">p</a></span><span class="op" id="3206970">.</span><span class="ident" id="3206971">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3206979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206982">return</span>&nbsp;<span class="builtintype" id="3206989">true</span><br>
<span class="lineno"></span><span class="op" id="3206994">}</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span><span class="comment" id="3206997">//&nbsp;NewAlpha16&nbsp;returns&nbsp;a&nbsp;new&nbsp;Alpha16&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="3207056">func</span>&nbsp;<span class="ident" id="3207061">NewAlpha16</span><span class="op" id="3207071">(</span><span class="ident" id="3207072">r</span>&nbsp;<span class="ident" id="3207074"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3207083">)</span>&nbsp;<span class="op" id="3207085">*</span><span class="ident" id="3207086"><a href="/image/image.go.html#3204676">Alpha16</a></span>&nbsp;<span class="op" id="3207094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3207097">w</span><span class="op" id="3207098">,</span>&nbsp;<span class="ident" id="3207100">h</span>&nbsp;<span class="op" id="3207102">:=</span>&nbsp;<span class="ident" id="3207105"><a href="/image/image.go.html#3207072">r</a></span><span class="op" id="3207106">.</span><span class="ident" id="3207107">Dx</span><span class="op" id="3207109">(</span><span class="op" id="3207110">)</span><span class="op" id="3207111">,</span>&nbsp;<span class="ident" id="3207113"><a href="/image/image.go.html#3207072">r</a></span><span class="op" id="3207114">.</span><span class="ident" id="3207115">Dy</span><span class="op" id="3207117">(</span><span class="op" id="3207118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3207121">pix</span>&nbsp;<span class="op" id="3207125">:=</span>&nbsp;<span class="builtinfunc" id="3207128">make</span><span class="op" id="3207132">(</span><span class="op" id="3207133">[</span><span class="op" id="3207134">]</span><span class="builtintype" id="3207135">uint8</span><span class="op" id="3207140">,</span>&nbsp;<span class="num" id="3207142">2</span><span class="op" id="3207143">*</span><span class="ident" id="3207144"><a href="/image/image.go.html#3207097">w</a></span><span class="op" id="3207145">*</span><span class="ident" id="3207146"><a href="/image/image.go.html#3207100">h</a></span><span class="op" id="3207147">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3207150">return</span>&nbsp;<span class="op" id="3207157">&amp;</span><span class="ident" id="3207158"><a href="/image/image.go.html#3204676">Alpha16</a></span><span class="op" id="3207165">{</span><span class="ident" id="3207166"><a href="/image/image.go.html#3207121">pix</a></span><span class="op" id="3207169">,</span>&nbsp;<span class="num" id="3207171">2</span>&nbsp;<span class="op" id="3207173">*</span>&nbsp;<span class="ident" id="3207175"><a href="/image/image.go.html#3207097">w</a></span><span class="op" id="3207176">,</span>&nbsp;<span class="ident" id="3207178"><a href="/image/image.go.html#3207072">r</a></span><span class="op" id="3207179">}</span><br>
<span class="lineno"></span><span class="op" id="3207181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3207184">//&nbsp;Gray&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.Gray&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="3207257">type</span>&nbsp;<span class="ident" id="3207262">Gray</span>&nbsp;<span class="keyword" id="3207267">struct</span>&nbsp;<span class="op" id="3207274">{</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3207277">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;as&nbsp;gray&nbsp;values.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3207340">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*1].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3207408">Pix</span>&nbsp;<span class="op" id="3207412">[</span><span class="op" id="3207413">]</span><span class="builtintype" id="3207414">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3207421">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3207497">Stride</span>&nbsp;<span class="builtintype" id="3207504">int</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3207509">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3207541">Rect</span>&nbsp;<span class="ident" id="3207546"><a href="/image/geom.go.html#3185229">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="3207556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3207559">func</span>&nbsp;<span class="op" id="3207564">(</span><span class="ident" id="3207565">p</span>&nbsp;<span class="op" id="3207567">*</span><span class="ident" id="3207568"><a href="/image/image.go.html#3207262">Gray</a></span><span class="op" id="3207572">)</span>&nbsp;<span class="ident" id="3207574">ColorModel</span><span class="op" id="3207584">(</span><span class="op" id="3207585">)</span>&nbsp;<span class="ident" id="3207587"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3207592">.</span><span class="ident" id="3207593">Model</span>&nbsp;<span class="op" id="3207599">{</span>&nbsp;<span class="keyword" id="3207601">return</span>&nbsp;<span class="ident" id="3207608"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3207613">.</span><span class="ident" id="3207614">GrayModel</span>&nbsp;<span class="op" id="3207624">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="3207627">func</span>&nbsp;<span class="op" id="3207632">(</span><span class="ident" id="3207633">p</span>&nbsp;<span class="op" id="3207635">*</span><span class="ident" id="3207636"><a href="/image/image.go.html#3207262">Gray</a></span><span class="op" id="3207640">)</span>&nbsp;<span class="ident" id="3207642">Bounds</span><span class="op" id="3207648">(</span><span class="op" id="3207649">)</span>&nbsp;<span class="ident" id="3207651"><a href="/image/geom.go.html#3185229">Rectangle</a></span>&nbsp;<span class="op" id="3207661">{</span>&nbsp;<span class="keyword" id="3207663">return</span>&nbsp;<span class="ident" id="3207670"><a href="/image/image.go.html#3207633">p</a></span><span class="op" id="3207671">.</span><span class="ident" id="3207672">Rect</span>&nbsp;<span class="op" id="3207677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3207680">func</span>&nbsp;<span class="op" id="3207685">(</span><span class="ident" id="3207686">p</span>&nbsp;<span class="op" id="3207688">*</span><span class="ident" id="3207689"><a href="/image/image.go.html#3207262">Gray</a></span><span class="op" id="3207693">)</span>&nbsp;<span class="ident" id="3207695">At</span><span class="op" id="3207697">(</span><span class="ident" id="3207698">x</span><span class="op" id="3207699">,</span>&nbsp;<span class="ident" id="3207701">y</span>&nbsp;<span class="builtintype" id="3207703">int</span><span class="op" id="3207706">)</span>&nbsp;<span class="ident" id="3207708"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3207713">.</span><span class="ident" id="3207714">Color</span>&nbsp;<span class="op" id="3207720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3207723">return</span>&nbsp;<span class="ident" id="3207730"><a href="/image/image.go.html#3207686">p</a></span><span class="op" id="3207731">.</span><span class="ident" id="3207732">GrayAt</span><span class="op" id="3207738">(</span><span class="ident" id="3207739"><a href="/image/image.go.html#3207698">x</a></span><span class="op" id="3207740">,</span>&nbsp;<span class="ident" id="3207742"><a href="/image/image.go.html#3207701">y</a></span><span class="op" id="3207743">)</span><br>
<span class="lineno">685</span><span class="op" id="3207745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3207748">func</span>&nbsp;<span class="op" id="3207753">(</span><span class="ident" id="3207754">p</span>&nbsp;<span class="op" id="3207756">*</span><span class="ident" id="3207757"><a href="/image/image.go.html#3207262">Gray</a></span><span class="op" id="3207761">)</span>&nbsp;<span class="ident" id="3207763">GrayAt</span><span class="op" id="3207769">(</span><span class="ident" id="3207770">x</span><span class="op" id="3207771">,</span>&nbsp;<span class="ident" id="3207773">y</span>&nbsp;<span class="builtintype" id="3207775">int</span><span class="op" id="3207778">)</span>&nbsp;<span class="ident" id="3207780"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3207785">.</span><span class="ident" id="3207786">Gray</span>&nbsp;<span class="op" id="3207791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3207794">if</span>&nbsp;<span class="op" id="3207797">!</span><span class="op" id="3207798">(</span><span class="ident" id="3207799"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3207804">{</span><span class="ident" id="3207805"><a href="/image/image.go.html#3207770">x</a></span><span class="op" id="3207806">,</span>&nbsp;<span class="ident" id="3207808"><a href="/image/image.go.html#3207773">y</a></span><span class="op" id="3207809">}</span><span class="op" id="3207810">.</span><span class="ident" id="3207811">In</span><span class="op" id="3207813">(</span><span class="ident" id="3207814"><a href="/image/image.go.html#3207754">p</a></span><span class="op" id="3207815">.</span><span class="ident" id="3207816">Rect</span><span class="op" id="3207820">)</span><span class="op" id="3207821">)</span>&nbsp;<span class="op" id="3207823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3207827">return</span>&nbsp;<span class="ident" id="3207834"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3207839">.</span><span class="ident" id="3207840">Gray</span><span class="op" id="3207844">{</span><span class="op" id="3207845">}</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3207848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3207851">i</span>&nbsp;<span class="op" id="3207853">:=</span>&nbsp;<span class="ident" id="3207856"><a href="/image/image.go.html#3207754">p</a></span><span class="op" id="3207857">.</span><span class="ident" id="3207858">PixOffset</span><span class="op" id="3207867">(</span><span class="ident" id="3207868"><a href="/image/image.go.html#3207770">x</a></span><span class="op" id="3207869">,</span>&nbsp;<span class="ident" id="3207871"><a href="/image/image.go.html#3207773">y</a></span><span class="op" id="3207872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3207875">return</span>&nbsp;<span class="ident" id="3207882"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3207887">.</span><span class="ident" id="3207888">Gray</span><span class="op" id="3207892">{</span><span class="ident" id="3207893"><a href="/image/image.go.html#3207754">p</a></span><span class="op" id="3207894">.</span><span class="ident" id="3207895">Pix</span><span class="op" id="3207898">[</span><span class="ident" id="3207899"><a href="/image/image.go.html#3207851">i</a></span><span class="op" id="3207900">]</span><span class="op" id="3207901">}</span><br>
<span class="lineno"></span><span class="op" id="3207903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">695</span><span class="comment" id="3207906">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3207985">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="3208009">func</span>&nbsp;<span class="op" id="3208014">(</span><span class="ident" id="3208015">p</span>&nbsp;<span class="op" id="3208017">*</span><span class="ident" id="3208018"><a href="/image/image.go.html#3207262">Gray</a></span><span class="op" id="3208022">)</span>&nbsp;<span class="ident" id="3208024">PixOffset</span><span class="op" id="3208033">(</span><span class="ident" id="3208034">x</span><span class="op" id="3208035">,</span>&nbsp;<span class="ident" id="3208037">y</span>&nbsp;<span class="builtintype" id="3208039">int</span><span class="op" id="3208042">)</span>&nbsp;<span class="builtintype" id="3208044">int</span>&nbsp;<span class="op" id="3208048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208051">return</span>&nbsp;<span class="op" id="3208058">(</span><span class="ident" id="3208059"><a href="/image/image.go.html#3208037">y</a></span><span class="op" id="3208060">-</span><span class="ident" id="3208061"><a href="/image/image.go.html#3208015">p</a></span><span class="op" id="3208062">.</span><span class="ident" id="3208063">Rect</span><span class="op" id="3208067">.</span><span class="ident" id="3208068">Min</span><span class="op" id="3208071">.</span><span class="ident" id="3208072">Y</span><span class="op" id="3208073">)</span><span class="op" id="3208074">*</span><span class="ident" id="3208075"><a href="/image/image.go.html#3208015">p</a></span><span class="op" id="3208076">.</span><span class="ident" id="3208077">Stride</span>&nbsp;<span class="op" id="3208084">+</span>&nbsp;<span class="op" id="3208086">(</span><span class="ident" id="3208087"><a href="/image/image.go.html#3208034">x</a></span><span class="op" id="3208088">-</span><span class="ident" id="3208089"><a href="/image/image.go.html#3208015">p</a></span><span class="op" id="3208090">.</span><span class="ident" id="3208091">Rect</span><span class="op" id="3208095">.</span><span class="ident" id="3208096">Min</span><span class="op" id="3208099">.</span><span class="ident" id="3208100">X</span><span class="op" id="3208101">)</span><span class="op" id="3208102">*</span><span class="num" id="3208103">1</span><br>
<span class="lineno"></span><span class="op" id="3208105">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="keyword" id="3208108">func</span>&nbsp;<span class="op" id="3208113">(</span><span class="ident" id="3208114">p</span>&nbsp;<span class="op" id="3208116">*</span><span class="ident" id="3208117"><a href="/image/image.go.html#3207262">Gray</a></span><span class="op" id="3208121">)</span>&nbsp;<span class="ident" id="3208123">Set</span><span class="op" id="3208126">(</span><span class="ident" id="3208127">x</span><span class="op" id="3208128">,</span>&nbsp;<span class="ident" id="3208130">y</span>&nbsp;<span class="builtintype" id="3208132">int</span><span class="op" id="3208135">,</span>&nbsp;<span class="ident" id="3208137">c</span>&nbsp;<span class="ident" id="3208139"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3208144">.</span><span class="ident" id="3208145">Color</span><span class="op" id="3208150">)</span>&nbsp;<span class="op" id="3208152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208155">if</span>&nbsp;<span class="op" id="3208158">!</span><span class="op" id="3208159">(</span><span class="ident" id="3208160"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3208165">{</span><span class="ident" id="3208166"><a href="/image/image.go.html#3208127">x</a></span><span class="op" id="3208167">,</span>&nbsp;<span class="ident" id="3208169"><a href="/image/image.go.html#3208130">y</a></span><span class="op" id="3208170">}</span><span class="op" id="3208171">.</span><span class="ident" id="3208172">In</span><span class="op" id="3208174">(</span><span class="ident" id="3208175"><a href="/image/image.go.html#3208114">p</a></span><span class="op" id="3208176">.</span><span class="ident" id="3208177">Rect</span><span class="op" id="3208181">)</span><span class="op" id="3208182">)</span>&nbsp;<span class="op" id="3208184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208188">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3208196">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208199">i</span>&nbsp;<span class="op" id="3208201">:=</span>&nbsp;<span class="ident" id="3208204"><a href="/image/image.go.html#3208114">p</a></span><span class="op" id="3208205">.</span><span class="ident" id="3208206">PixOffset</span><span class="op" id="3208215">(</span><span class="ident" id="3208216"><a href="/image/image.go.html#3208127">x</a></span><span class="op" id="3208217">,</span>&nbsp;<span class="ident" id="3208219"><a href="/image/image.go.html#3208130">y</a></span><span class="op" id="3208220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208223"><a href="/image/image.go.html#3208114">p</a></span><span class="op" id="3208224">.</span><span class="ident" id="3208225">Pix</span><span class="op" id="3208228">[</span><span class="ident" id="3208229"><a href="/image/image.go.html#3208199">i</a></span><span class="op" id="3208230">]</span>&nbsp;<span class="op" id="3208232">=</span>&nbsp;<span class="ident" id="3208234"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3208239">.</span><span class="ident" id="3208240">GrayModel</span><span class="op" id="3208249">.</span><span class="ident" id="3208250">Convert</span><span class="op" id="3208257">(</span><span class="ident" id="3208258"><a href="/image/image.go.html#3208137">c</a></span><span class="op" id="3208259">)</span><span class="op" id="3208260">.</span><span class="op" id="3208261">(</span><span class="ident" id="3208262"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3208267">.</span><span class="ident" id="3208268">Gray</span><span class="op" id="3208272">)</span><span class="op" id="3208273">.</span><span class="ident" id="3208274">Y</span><br>
<span class="lineno"></span><span class="op" id="3208276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3208279">func</span>&nbsp;<span class="op" id="3208284">(</span><span class="ident" id="3208285">p</span>&nbsp;<span class="op" id="3208287">*</span><span class="ident" id="3208288"><a href="/image/image.go.html#3207262">Gray</a></span><span class="op" id="3208292">)</span>&nbsp;<span class="ident" id="3208294">SetGray</span><span class="op" id="3208301">(</span><span class="ident" id="3208302">x</span><span class="op" id="3208303">,</span>&nbsp;<span class="ident" id="3208305">y</span>&nbsp;<span class="builtintype" id="3208307">int</span><span class="op" id="3208310">,</span>&nbsp;<span class="ident" id="3208312">c</span>&nbsp;<span class="ident" id="3208314"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3208319">.</span><span class="ident" id="3208320">Gray</span><span class="op" id="3208324">)</span>&nbsp;<span class="op" id="3208326">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208329">if</span>&nbsp;<span class="op" id="3208332">!</span><span class="op" id="3208333">(</span><span class="ident" id="3208334"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3208339">{</span><span class="ident" id="3208340"><a href="/image/image.go.html#3208302">x</a></span><span class="op" id="3208341">,</span>&nbsp;<span class="ident" id="3208343"><a href="/image/image.go.html#3208305">y</a></span><span class="op" id="3208344">}</span><span class="op" id="3208345">.</span><span class="ident" id="3208346">In</span><span class="op" id="3208348">(</span><span class="ident" id="3208349"><a href="/image/image.go.html#3208285">p</a></span><span class="op" id="3208350">.</span><span class="ident" id="3208351">Rect</span><span class="op" id="3208355">)</span><span class="op" id="3208356">)</span>&nbsp;<span class="op" id="3208358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208362">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3208370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208373">i</span>&nbsp;<span class="op" id="3208375">:=</span>&nbsp;<span class="ident" id="3208378"><a href="/image/image.go.html#3208285">p</a></span><span class="op" id="3208379">.</span><span class="ident" id="3208380">PixOffset</span><span class="op" id="3208389">(</span><span class="ident" id="3208390"><a href="/image/image.go.html#3208302">x</a></span><span class="op" id="3208391">,</span>&nbsp;<span class="ident" id="3208393"><a href="/image/image.go.html#3208305">y</a></span><span class="op" id="3208394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208397"><a href="/image/image.go.html#3208285">p</a></span><span class="op" id="3208398">.</span><span class="ident" id="3208399">Pix</span><span class="op" id="3208402">[</span><span class="ident" id="3208403"><a href="/image/image.go.html#3208373">i</a></span><span class="op" id="3208404">]</span>&nbsp;<span class="op" id="3208406">=</span>&nbsp;<span class="ident" id="3208408"><a href="/image/image.go.html#3208312">c</a></span><span class="op" id="3208409">.</span><span class="ident" id="3208410">Y</span><br>
<span class="lineno">715</span><span class="op" id="3208412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3208415">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="3208492">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="3208564">func</span>&nbsp;<span class="op" id="3208569">(</span><span class="ident" id="3208570">p</span>&nbsp;<span class="op" id="3208572">*</span><span class="ident" id="3208573"><a href="/image/image.go.html#3207262">Gray</a></span><span class="op" id="3208577">)</span>&nbsp;<span class="ident" id="3208579">SubImage</span><span class="op" id="3208587">(</span><span class="ident" id="3208588">r</span>&nbsp;<span class="ident" id="3208590"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3208599">)</span>&nbsp;<span class="ident" id="3208601"><a href="/image/image.go.html#3190140">Image</a></span>&nbsp;<span class="op" id="3208607">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208610"><a href="/image/image.go.html#3208588">r</a></span>&nbsp;<span class="op" id="3208612">=</span>&nbsp;<span class="ident" id="3208614"><a href="/image/image.go.html#3208588">r</a></span><span class="op" id="3208615">.</span><span class="ident" id="3208616">Intersect</span><span class="op" id="3208625">(</span><span class="ident" id="3208626"><a href="/image/image.go.html#3208570">p</a></span><span class="op" id="3208627">.</span><span class="ident" id="3208628">Rect</span><span class="op" id="3208632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3208635">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3208716">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3208798">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208848">if</span>&nbsp;<span class="ident" id="3208851"><a href="/image/image.go.html#3208588">r</a></span><span class="op" id="3208852">.</span><span class="ident" id="3208853">Empty</span><span class="op" id="3208858">(</span><span class="op" id="3208859">)</span>&nbsp;<span class="op" id="3208861">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208865">return</span>&nbsp;<span class="op" id="3208872">&amp;</span><span class="ident" id="3208873"><a href="/image/image.go.html#3207262">Gray</a></span><span class="op" id="3208877">{</span><span class="op" id="3208878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3208881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208884">i</span>&nbsp;<span class="op" id="3208886">:=</span>&nbsp;<span class="ident" id="3208889"><a href="/image/image.go.html#3208570">p</a></span><span class="op" id="3208890">.</span><span class="ident" id="3208891">PixOffset</span><span class="op" id="3208900">(</span><span class="ident" id="3208901"><a href="/image/image.go.html#3208588">r</a></span><span class="op" id="3208902">.</span><span class="ident" id="3208903">Min</span><span class="op" id="3208906">.</span><span class="ident" id="3208907">X</span><span class="op" id="3208908">,</span>&nbsp;<span class="ident" id="3208910"><a href="/image/image.go.html#3208588">r</a></span><span class="op" id="3208911">.</span><span class="ident" id="3208912">Min</span><span class="op" id="3208915">.</span><span class="ident" id="3208916">Y</span><span class="op" id="3208917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208920">return</span>&nbsp;<span class="op" id="3208927">&amp;</span><span class="ident" id="3208928"><a href="/image/image.go.html#3207262">Gray</a></span><span class="op" id="3208932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208936">Pix</span><span class="op" id="3208939">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3208944"><a href="/image/image.go.html#3208570">p</a></span><span class="op" id="3208945">.</span><span class="ident" id="3208946">Pix</span><span class="op" id="3208949">[</span><span class="ident" id="3208950"><a href="/image/image.go.html#3208884">i</a></span><span class="op" id="3208951">:</span><span class="op" id="3208952">]</span><span class="op" id="3208953">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208957">Stride</span><span class="op" id="3208963">:</span>&nbsp;<span class="ident" id="3208965"><a href="/image/image.go.html#3208570">p</a></span><span class="op" id="3208966">.</span><span class="ident" id="3208967">Stride</span><span class="op" id="3208973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208977">Rect</span><span class="op" id="3208981">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3208985"><a href="/image/image.go.html#3208588">r</a></span><span class="op" id="3208986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3208989">}</span><br>
<span class="lineno"></span><span class="op" id="3208991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">735</span><span class="comment" id="3208994">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="3209067">func</span>&nbsp;<span class="op" id="3209072">(</span><span class="ident" id="3209073">p</span>&nbsp;<span class="op" id="3209075">*</span><span class="ident" id="3209076"><a href="/image/image.go.html#3207262">Gray</a></span><span class="op" id="3209080">)</span>&nbsp;<span class="ident" id="3209082">Opaque</span><span class="op" id="3209088">(</span><span class="op" id="3209089">)</span>&nbsp;<span class="builtintype" id="3209091">bool</span>&nbsp;<span class="op" id="3209096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3209099">return</span>&nbsp;<span class="builtintype" id="3209106">true</span><br>
<span class="lineno"></span><span class="op" id="3209111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="comment" id="3209114">//&nbsp;NewGray&nbsp;returns&nbsp;a&nbsp;new&nbsp;Gray&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="3209167">func</span>&nbsp;<span class="ident" id="3209172">NewGray</span><span class="op" id="3209179">(</span><span class="ident" id="3209180">r</span>&nbsp;<span class="ident" id="3209182"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3209191">)</span>&nbsp;<span class="op" id="3209193">*</span><span class="ident" id="3209194"><a href="/image/image.go.html#3207262">Gray</a></span>&nbsp;<span class="op" id="3209199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209202">w</span><span class="op" id="3209203">,</span>&nbsp;<span class="ident" id="3209205">h</span>&nbsp;<span class="op" id="3209207">:=</span>&nbsp;<span class="ident" id="3209210"><a href="/image/image.go.html#3209180">r</a></span><span class="op" id="3209211">.</span><span class="ident" id="3209212">Dx</span><span class="op" id="3209214">(</span><span class="op" id="3209215">)</span><span class="op" id="3209216">,</span>&nbsp;<span class="ident" id="3209218"><a href="/image/image.go.html#3209180">r</a></span><span class="op" id="3209219">.</span><span class="ident" id="3209220">Dy</span><span class="op" id="3209222">(</span><span class="op" id="3209223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209226">pix</span>&nbsp;<span class="op" id="3209230">:=</span>&nbsp;<span class="builtinfunc" id="3209233">make</span><span class="op" id="3209237">(</span><span class="op" id="3209238">[</span><span class="op" id="3209239">]</span><span class="builtintype" id="3209240">uint8</span><span class="op" id="3209245">,</span>&nbsp;<span class="num" id="3209247">1</span><span class="op" id="3209248">*</span><span class="ident" id="3209249"><a href="/image/image.go.html#3209202">w</a></span><span class="op" id="3209250">*</span><span class="ident" id="3209251"><a href="/image/image.go.html#3209205">h</a></span><span class="op" id="3209252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3209255">return</span>&nbsp;<span class="op" id="3209262">&amp;</span><span class="ident" id="3209263"><a href="/image/image.go.html#3207262">Gray</a></span><span class="op" id="3209267">{</span><span class="ident" id="3209268"><a href="/image/image.go.html#3209226">pix</a></span><span class="op" id="3209271">,</span>&nbsp;<span class="num" id="3209273">1</span>&nbsp;<span class="op" id="3209275">*</span>&nbsp;<span class="ident" id="3209277"><a href="/image/image.go.html#3209202">w</a></span><span class="op" id="3209278">,</span>&nbsp;<span class="ident" id="3209280"><a href="/image/image.go.html#3209180">r</a></span><span class="op" id="3209281">}</span><br>
<span class="lineno">745</span><span class="op" id="3209283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3209286">//&nbsp;Gray16&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.Gray16&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="3209363">type</span>&nbsp;<span class="ident" id="3209368">Gray16</span>&nbsp;<span class="keyword" id="3209375">struct</span>&nbsp;<span class="op" id="3209382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3209385">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;as&nbsp;gray&nbsp;values&nbsp;in&nbsp;big-endian&nbsp;format.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3209469">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*2].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209537">Pix</span>&nbsp;<span class="op" id="3209541">[</span><span class="op" id="3209542">]</span><span class="builtintype" id="3209543">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3209550">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209626">Stride</span>&nbsp;<span class="builtintype" id="3209633">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3209638">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209670">Rect</span>&nbsp;<span class="ident" id="3209675"><a href="/image/geom.go.html#3185229">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="3209685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3209688">func</span>&nbsp;<span class="op" id="3209693">(</span><span class="ident" id="3209694">p</span>&nbsp;<span class="op" id="3209696">*</span><span class="ident" id="3209697"><a href="/image/image.go.html#3209368">Gray16</a></span><span class="op" id="3209703">)</span>&nbsp;<span class="ident" id="3209705">ColorModel</span><span class="op" id="3209715">(</span><span class="op" id="3209716">)</span>&nbsp;<span class="ident" id="3209718"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3209723">.</span><span class="ident" id="3209724">Model</span>&nbsp;<span class="op" id="3209730">{</span>&nbsp;<span class="keyword" id="3209732">return</span>&nbsp;<span class="ident" id="3209739"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3209744">.</span><span class="ident" id="3209745">Gray16Model</span>&nbsp;<span class="op" id="3209757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span><span class="keyword" id="3209760">func</span>&nbsp;<span class="op" id="3209765">(</span><span class="ident" id="3209766">p</span>&nbsp;<span class="op" id="3209768">*</span><span class="ident" id="3209769"><a href="/image/image.go.html#3209368">Gray16</a></span><span class="op" id="3209775">)</span>&nbsp;<span class="ident" id="3209777">Bounds</span><span class="op" id="3209783">(</span><span class="op" id="3209784">)</span>&nbsp;<span class="ident" id="3209786"><a href="/image/geom.go.html#3185229">Rectangle</a></span>&nbsp;<span class="op" id="3209796">{</span>&nbsp;<span class="keyword" id="3209798">return</span>&nbsp;<span class="ident" id="3209805"><a href="/image/image.go.html#3209766">p</a></span><span class="op" id="3209806">.</span><span class="ident" id="3209807">Rect</span>&nbsp;<span class="op" id="3209812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3209815">func</span>&nbsp;<span class="op" id="3209820">(</span><span class="ident" id="3209821">p</span>&nbsp;<span class="op" id="3209823">*</span><span class="ident" id="3209824"><a href="/image/image.go.html#3209368">Gray16</a></span><span class="op" id="3209830">)</span>&nbsp;<span class="ident" id="3209832">At</span><span class="op" id="3209834">(</span><span class="ident" id="3209835">x</span><span class="op" id="3209836">,</span>&nbsp;<span class="ident" id="3209838">y</span>&nbsp;<span class="builtintype" id="3209840">int</span><span class="op" id="3209843">)</span>&nbsp;<span class="ident" id="3209845"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3209850">.</span><span class="ident" id="3209851">Color</span>&nbsp;<span class="op" id="3209857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3209860">return</span>&nbsp;<span class="ident" id="3209867"><a href="/image/image.go.html#3209821">p</a></span><span class="op" id="3209868">.</span><span class="ident" id="3209869">Gray16At</span><span class="op" id="3209877">(</span><span class="ident" id="3209878"><a href="/image/image.go.html#3209835">x</a></span><span class="op" id="3209879">,</span>&nbsp;<span class="ident" id="3209881"><a href="/image/image.go.html#3209838">y</a></span><span class="op" id="3209882">)</span><br>
<span class="lineno"></span><span class="op" id="3209884">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="keyword" id="3209887">func</span>&nbsp;<span class="op" id="3209892">(</span><span class="ident" id="3209893">p</span>&nbsp;<span class="op" id="3209895">*</span><span class="ident" id="3209896"><a href="/image/image.go.html#3209368">Gray16</a></span><span class="op" id="3209902">)</span>&nbsp;<span class="ident" id="3209904">Gray16At</span><span class="op" id="3209912">(</span><span class="ident" id="3209913">x</span><span class="op" id="3209914">,</span>&nbsp;<span class="ident" id="3209916">y</span>&nbsp;<span class="builtintype" id="3209918">int</span><span class="op" id="3209921">)</span>&nbsp;<span class="ident" id="3209923"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3209928">.</span><span class="ident" id="3209929">Gray16</span>&nbsp;<span class="op" id="3209936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3209939">if</span>&nbsp;<span class="op" id="3209942">!</span><span class="op" id="3209943">(</span><span class="ident" id="3209944"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3209949">{</span><span class="ident" id="3209950"><a href="/image/image.go.html#3209913">x</a></span><span class="op" id="3209951">,</span>&nbsp;<span class="ident" id="3209953"><a href="/image/image.go.html#3209916">y</a></span><span class="op" id="3209954">}</span><span class="op" id="3209955">.</span><span class="ident" id="3209956">In</span><span class="op" id="3209958">(</span><span class="ident" id="3209959"><a href="/image/image.go.html#3209893">p</a></span><span class="op" id="3209960">.</span><span class="ident" id="3209961">Rect</span><span class="op" id="3209965">)</span><span class="op" id="3209966">)</span>&nbsp;<span class="op" id="3209968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3209972">return</span>&nbsp;<span class="ident" id="3209979"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3209984">.</span><span class="ident" id="3209985">Gray16</span><span class="op" id="3209991">{</span><span class="op" id="3209992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3209995">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209998">i</span>&nbsp;<span class="op" id="3210000">:=</span>&nbsp;<span class="ident" id="3210003"><a href="/image/image.go.html#3209893">p</a></span><span class="op" id="3210004">.</span><span class="ident" id="3210005">PixOffset</span><span class="op" id="3210014">(</span><span class="ident" id="3210015"><a href="/image/image.go.html#3209913">x</a></span><span class="op" id="3210016">,</span>&nbsp;<span class="ident" id="3210018"><a href="/image/image.go.html#3209916">y</a></span><span class="op" id="3210019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3210022">return</span>&nbsp;<span class="ident" id="3210029"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3210034">.</span><span class="ident" id="3210035">Gray16</span><span class="op" id="3210041">{</span><span class="builtintype" id="3210042">uint16</span><span class="op" id="3210048">(</span><span class="ident" id="3210049"><a href="/image/image.go.html#3209893">p</a></span><span class="op" id="3210050">.</span><span class="ident" id="3210051">Pix</span><span class="op" id="3210054">[</span><span class="ident" id="3210055"><a href="/image/image.go.html#3209998">i</a></span><span class="op" id="3210056">+</span><span class="num" id="3210057">0</span><span class="op" id="3210058">]</span><span class="op" id="3210059">)</span><span class="op" id="3210060">&lt;&lt;</span><span class="num" id="3210062">8</span>&nbsp;<span class="op" id="3210064">|</span>&nbsp;<span class="builtintype" id="3210066">uint16</span><span class="op" id="3210072">(</span><span class="ident" id="3210073"><a href="/image/image.go.html#3209893">p</a></span><span class="op" id="3210074">.</span><span class="ident" id="3210075">Pix</span><span class="op" id="3210078">[</span><span class="ident" id="3210079"><a href="/image/image.go.html#3209998">i</a></span><span class="op" id="3210080">+</span><span class="num" id="3210081">1</span><span class="op" id="3210082">]</span><span class="op" id="3210083">)</span><span class="op" id="3210084">}</span><br>
<span class="lineno"></span><span class="op" id="3210086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3210089">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno">775</span><span class="comment" id="3210168">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="3210192">func</span>&nbsp;<span class="op" id="3210197">(</span><span class="ident" id="3210198">p</span>&nbsp;<span class="op" id="3210200">*</span><span class="ident" id="3210201"><a href="/image/image.go.html#3209368">Gray16</a></span><span class="op" id="3210207">)</span>&nbsp;<span class="ident" id="3210209">PixOffset</span><span class="op" id="3210218">(</span><span class="ident" id="3210219">x</span><span class="op" id="3210220">,</span>&nbsp;<span class="ident" id="3210222">y</span>&nbsp;<span class="builtintype" id="3210224">int</span><span class="op" id="3210227">)</span>&nbsp;<span class="builtintype" id="3210229">int</span>&nbsp;<span class="op" id="3210233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3210236">return</span>&nbsp;<span class="op" id="3210243">(</span><span class="ident" id="3210244"><a href="/image/image.go.html#3210222">y</a></span><span class="op" id="3210245">-</span><span class="ident" id="3210246"><a href="/image/image.go.html#3210198">p</a></span><span class="op" id="3210247">.</span><span class="ident" id="3210248">Rect</span><span class="op" id="3210252">.</span><span class="ident" id="3210253">Min</span><span class="op" id="3210256">.</span><span class="ident" id="3210257">Y</span><span class="op" id="3210258">)</span><span class="op" id="3210259">*</span><span class="ident" id="3210260"><a href="/image/image.go.html#3210198">p</a></span><span class="op" id="3210261">.</span><span class="ident" id="3210262">Stride</span>&nbsp;<span class="op" id="3210269">+</span>&nbsp;<span class="op" id="3210271">(</span><span class="ident" id="3210272"><a href="/image/image.go.html#3210219">x</a></span><span class="op" id="3210273">-</span><span class="ident" id="3210274"><a href="/image/image.go.html#3210198">p</a></span><span class="op" id="3210275">.</span><span class="ident" id="3210276">Rect</span><span class="op" id="3210280">.</span><span class="ident" id="3210281">Min</span><span class="op" id="3210284">.</span><span class="ident" id="3210285">X</span><span class="op" id="3210286">)</span><span class="op" id="3210287">*</span><span class="num" id="3210288">2</span><br>
<span class="lineno"></span><span class="op" id="3210290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="keyword" id="3210293">func</span>&nbsp;<span class="op" id="3210298">(</span><span class="ident" id="3210299">p</span>&nbsp;<span class="op" id="3210301">*</span><span class="ident" id="3210302"><a href="/image/image.go.html#3209368">Gray16</a></span><span class="op" id="3210308">)</span>&nbsp;<span class="ident" id="3210310">Set</span><span class="op" id="3210313">(</span><span class="ident" id="3210314">x</span><span class="op" id="3210315">,</span>&nbsp;<span class="ident" id="3210317">y</span>&nbsp;<span class="builtintype" id="3210319">int</span><span class="op" id="3210322">,</span>&nbsp;<span class="ident" id="3210324">c</span>&nbsp;<span class="ident" id="3210326"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3210331">.</span><span class="ident" id="3210332">Color</span><span class="op" id="3210337">)</span>&nbsp;<span class="op" id="3210339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3210342">if</span>&nbsp;<span class="op" id="3210345">!</span><span class="op" id="3210346">(</span><span class="ident" id="3210347"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3210352">{</span><span class="ident" id="3210353"><a href="/image/image.go.html#3210314">x</a></span><span class="op" id="3210354">,</span>&nbsp;<span class="ident" id="3210356"><a href="/image/image.go.html#3210317">y</a></span><span class="op" id="3210357">}</span><span class="op" id="3210358">.</span><span class="ident" id="3210359">In</span><span class="op" id="3210361">(</span><span class="ident" id="3210362"><a href="/image/image.go.html#3210299">p</a></span><span class="op" id="3210363">.</span><span class="ident" id="3210364">Rect</span><span class="op" id="3210368">)</span><span class="op" id="3210369">)</span>&nbsp;<span class="op" id="3210371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3210375">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3210383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210386">i</span>&nbsp;<span class="op" id="3210388">:=</span>&nbsp;<span class="ident" id="3210391"><a href="/image/image.go.html#3210299">p</a></span><span class="op" id="3210392">.</span><span class="ident" id="3210393">PixOffset</span><span class="op" id="3210402">(</span><span class="ident" id="3210403"><a href="/image/image.go.html#3210314">x</a></span><span class="op" id="3210404">,</span>&nbsp;<span class="ident" id="3210406"><a href="/image/image.go.html#3210317">y</a></span><span class="op" id="3210407">)</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210410">c1</span>&nbsp;<span class="op" id="3210413">:=</span>&nbsp;<span class="ident" id="3210416"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3210421">.</span><span class="ident" id="3210422">Gray16Model</span><span class="op" id="3210433">.</span><span class="ident" id="3210434">Convert</span><span class="op" id="3210441">(</span><span class="ident" id="3210442"><a href="/image/image.go.html#3210324">c</a></span><span class="op" id="3210443">)</span><span class="op" id="3210444">.</span><span class="op" id="3210445">(</span><span class="ident" id="3210446"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3210451">.</span><span class="ident" id="3210452">Gray16</span><span class="op" id="3210458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210461"><a href="/image/image.go.html#3210299">p</a></span><span class="op" id="3210462">.</span><span class="ident" id="3210463">Pix</span><span class="op" id="3210466">[</span><span class="ident" id="3210467"><a href="/image/image.go.html#3210386">i</a></span><span class="op" id="3210468">+</span><span class="num" id="3210469">0</span><span class="op" id="3210470">]</span>&nbsp;<span class="op" id="3210472">=</span>&nbsp;<span class="builtintype" id="3210474">uint8</span><span class="op" id="3210479">(</span><span class="ident" id="3210480"><a href="/image/image.go.html#3210410">c1</a></span><span class="op" id="3210482">.</span><span class="ident" id="3210483">Y</span>&nbsp;<span class="op" id="3210485">&gt;&gt;</span>&nbsp;<span class="num" id="3210488">8</span><span class="op" id="3210489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210492"><a href="/image/image.go.html#3210299">p</a></span><span class="op" id="3210493">.</span><span class="ident" id="3210494">Pix</span><span class="op" id="3210497">[</span><span class="ident" id="3210498"><a href="/image/image.go.html#3210386">i</a></span><span class="op" id="3210499">+</span><span class="num" id="3210500">1</span><span class="op" id="3210501">]</span>&nbsp;<span class="op" id="3210503">=</span>&nbsp;<span class="builtintype" id="3210505">uint8</span><span class="op" id="3210510">(</span><span class="ident" id="3210511"><a href="/image/image.go.html#3210410">c1</a></span><span class="op" id="3210513">.</span><span class="ident" id="3210514">Y</span><span class="op" id="3210515">)</span><br>
<span class="lineno"></span><span class="op" id="3210517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="3210520">func</span>&nbsp;<span class="op" id="3210525">(</span><span class="ident" id="3210526">p</span>&nbsp;<span class="op" id="3210528">*</span><span class="ident" id="3210529"><a href="/image/image.go.html#3209368">Gray16</a></span><span class="op" id="3210535">)</span>&nbsp;<span class="ident" id="3210537">SetGray16</span><span class="op" id="3210546">(</span><span class="ident" id="3210547">x</span><span class="op" id="3210548">,</span>&nbsp;<span class="ident" id="3210550">y</span>&nbsp;<span class="builtintype" id="3210552">int</span><span class="op" id="3210555">,</span>&nbsp;<span class="ident" id="3210557">c</span>&nbsp;<span class="ident" id="3210559"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3210564">.</span><span class="ident" id="3210565">Gray16</span><span class="op" id="3210571">)</span>&nbsp;<span class="op" id="3210573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3210576">if</span>&nbsp;<span class="op" id="3210579">!</span><span class="op" id="3210580">(</span><span class="ident" id="3210581"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3210586">{</span><span class="ident" id="3210587"><a href="/image/image.go.html#3210547">x</a></span><span class="op" id="3210588">,</span>&nbsp;<span class="ident" id="3210590"><a href="/image/image.go.html#3210550">y</a></span><span class="op" id="3210591">}</span><span class="op" id="3210592">.</span><span class="ident" id="3210593">In</span><span class="op" id="3210595">(</span><span class="ident" id="3210596"><a href="/image/image.go.html#3210526">p</a></span><span class="op" id="3210597">.</span><span class="ident" id="3210598">Rect</span><span class="op" id="3210602">)</span><span class="op" id="3210603">)</span>&nbsp;<span class="op" id="3210605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3210609">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3210617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210620">i</span>&nbsp;<span class="op" id="3210622">:=</span>&nbsp;<span class="ident" id="3210625"><a href="/image/image.go.html#3210526">p</a></span><span class="op" id="3210626">.</span><span class="ident" id="3210627">PixOffset</span><span class="op" id="3210636">(</span><span class="ident" id="3210637"><a href="/image/image.go.html#3210547">x</a></span><span class="op" id="3210638">,</span>&nbsp;<span class="ident" id="3210640"><a href="/image/image.go.html#3210550">y</a></span><span class="op" id="3210641">)</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210644"><a href="/image/image.go.html#3210526">p</a></span><span class="op" id="3210645">.</span><span class="ident" id="3210646">Pix</span><span class="op" id="3210649">[</span><span class="ident" id="3210650"><a href="/image/image.go.html#3210620">i</a></span><span class="op" id="3210651">+</span><span class="num" id="3210652">0</span><span class="op" id="3210653">]</span>&nbsp;<span class="op" id="3210655">=</span>&nbsp;<span class="builtintype" id="3210657">uint8</span><span class="op" id="3210662">(</span><span class="ident" id="3210663"><a href="/image/image.go.html#3210557">c</a></span><span class="op" id="3210664">.</span><span class="ident" id="3210665">Y</span>&nbsp;<span class="op" id="3210667">&gt;&gt;</span>&nbsp;<span class="num" id="3210670">8</span><span class="op" id="3210671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210674"><a href="/image/image.go.html#3210526">p</a></span><span class="op" id="3210675">.</span><span class="ident" id="3210676">Pix</span><span class="op" id="3210679">[</span><span class="ident" id="3210680"><a href="/image/image.go.html#3210620">i</a></span><span class="op" id="3210681">+</span><span class="num" id="3210682">1</span><span class="op" id="3210683">]</span>&nbsp;<span class="op" id="3210685">=</span>&nbsp;<span class="builtintype" id="3210687">uint8</span><span class="op" id="3210692">(</span><span class="ident" id="3210693"><a href="/image/image.go.html#3210557">c</a></span><span class="op" id="3210694">.</span><span class="ident" id="3210695">Y</span><span class="op" id="3210696">)</span><br>
<span class="lineno"></span><span class="op" id="3210698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3210701">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno">800</span><span class="comment" id="3210778">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="3210850">func</span>&nbsp;<span class="op" id="3210855">(</span><span class="ident" id="3210856">p</span>&nbsp;<span class="op" id="3210858">*</span><span class="ident" id="3210859"><a href="/image/image.go.html#3209368">Gray16</a></span><span class="op" id="3210865">)</span>&nbsp;<span class="ident" id="3210867">SubImage</span><span class="op" id="3210875">(</span><span class="ident" id="3210876">r</span>&nbsp;<span class="ident" id="3210878"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3210887">)</span>&nbsp;<span class="ident" id="3210889"><a href="/image/image.go.html#3190140">Image</a></span>&nbsp;<span class="op" id="3210895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3210898"><a href="/image/image.go.html#3210876">r</a></span>&nbsp;<span class="op" id="3210900">=</span>&nbsp;<span class="ident" id="3210902"><a href="/image/image.go.html#3210876">r</a></span><span class="op" id="3210903">.</span><span class="ident" id="3210904">Intersect</span><span class="op" id="3210913">(</span><span class="ident" id="3210914"><a href="/image/image.go.html#3210856">p</a></span><span class="op" id="3210915">.</span><span class="ident" id="3210916">Rect</span><span class="op" id="3210920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3210923">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3211004">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3211086">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211136">if</span>&nbsp;<span class="ident" id="3211139"><a href="/image/image.go.html#3210876">r</a></span><span class="op" id="3211140">.</span><span class="ident" id="3211141">Empty</span><span class="op" id="3211146">(</span><span class="op" id="3211147">)</span>&nbsp;<span class="op" id="3211149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211153">return</span>&nbsp;<span class="op" id="3211160">&amp;</span><span class="ident" id="3211161"><a href="/image/image.go.html#3209368">Gray16</a></span><span class="op" id="3211167">{</span><span class="op" id="3211168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3211171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211174">i</span>&nbsp;<span class="op" id="3211176">:=</span>&nbsp;<span class="ident" id="3211179"><a href="/image/image.go.html#3210856">p</a></span><span class="op" id="3211180">.</span><span class="ident" id="3211181">PixOffset</span><span class="op" id="3211190">(</span><span class="ident" id="3211191"><a href="/image/image.go.html#3210876">r</a></span><span class="op" id="3211192">.</span><span class="ident" id="3211193">Min</span><span class="op" id="3211196">.</span><span class="ident" id="3211197">X</span><span class="op" id="3211198">,</span>&nbsp;<span class="ident" id="3211200"><a href="/image/image.go.html#3210876">r</a></span><span class="op" id="3211201">.</span><span class="ident" id="3211202">Min</span><span class="op" id="3211205">.</span><span class="ident" id="3211206">Y</span><span class="op" id="3211207">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211210">return</span>&nbsp;<span class="op" id="3211217">&amp;</span><span class="ident" id="3211218"><a href="/image/image.go.html#3209368">Gray16</a></span><span class="op" id="3211224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211228">Pix</span><span class="op" id="3211231">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3211236"><a href="/image/image.go.html#3210856">p</a></span><span class="op" id="3211237">.</span><span class="ident" id="3211238">Pix</span><span class="op" id="3211241">[</span><span class="ident" id="3211242"><a href="/image/image.go.html#3211174">i</a></span><span class="op" id="3211243">:</span><span class="op" id="3211244">]</span><span class="op" id="3211245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211249">Stride</span><span class="op" id="3211255">:</span>&nbsp;<span class="ident" id="3211257"><a href="/image/image.go.html#3210856">p</a></span><span class="op" id="3211258">.</span><span class="ident" id="3211259">Stride</span><span class="op" id="3211265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211269">Rect</span><span class="op" id="3211273">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3211277"><a href="/image/image.go.html#3210876">r</a></span><span class="op" id="3211278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3211281">}</span><br>
<span class="lineno">815</span><span class="op" id="3211283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3211286">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="3211359">func</span>&nbsp;<span class="op" id="3211364">(</span><span class="ident" id="3211365">p</span>&nbsp;<span class="op" id="3211367">*</span><span class="ident" id="3211368"><a href="/image/image.go.html#3209368">Gray16</a></span><span class="op" id="3211374">)</span>&nbsp;<span class="ident" id="3211376">Opaque</span><span class="op" id="3211382">(</span><span class="op" id="3211383">)</span>&nbsp;<span class="builtintype" id="3211385">bool</span>&nbsp;<span class="op" id="3211390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211393">return</span>&nbsp;<span class="builtintype" id="3211400">true</span><br>
<span class="lineno">820</span><span class="op" id="3211405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3211408">//&nbsp;NewGray16&nbsp;returns&nbsp;a&nbsp;new&nbsp;Gray16&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="3211465">func</span>&nbsp;<span class="ident" id="3211470">NewGray16</span><span class="op" id="3211479">(</span><span class="ident" id="3211480">r</span>&nbsp;<span class="ident" id="3211482"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3211491">)</span>&nbsp;<span class="op" id="3211493">*</span><span class="ident" id="3211494"><a href="/image/image.go.html#3209368">Gray16</a></span>&nbsp;<span class="op" id="3211501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211504">w</span><span class="op" id="3211505">,</span>&nbsp;<span class="ident" id="3211507">h</span>&nbsp;<span class="op" id="3211509">:=</span>&nbsp;<span class="ident" id="3211512"><a href="/image/image.go.html#3211480">r</a></span><span class="op" id="3211513">.</span><span class="ident" id="3211514">Dx</span><span class="op" id="3211516">(</span><span class="op" id="3211517">)</span><span class="op" id="3211518">,</span>&nbsp;<span class="ident" id="3211520"><a href="/image/image.go.html#3211480">r</a></span><span class="op" id="3211521">.</span><span class="ident" id="3211522">Dy</span><span class="op" id="3211524">(</span><span class="op" id="3211525">)</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211528">pix</span>&nbsp;<span class="op" id="3211532">:=</span>&nbsp;<span class="builtinfunc" id="3211535">make</span><span class="op" id="3211539">(</span><span class="op" id="3211540">[</span><span class="op" id="3211541">]</span><span class="builtintype" id="3211542">uint8</span><span class="op" id="3211547">,</span>&nbsp;<span class="num" id="3211549">2</span><span class="op" id="3211550">*</span><span class="ident" id="3211551"><a href="/image/image.go.html#3211504">w</a></span><span class="op" id="3211552">*</span><span class="ident" id="3211553"><a href="/image/image.go.html#3211507">h</a></span><span class="op" id="3211554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3211557">return</span>&nbsp;<span class="op" id="3211564">&amp;</span><span class="ident" id="3211565"><a href="/image/image.go.html#3209368">Gray16</a></span><span class="op" id="3211571">{</span><span class="ident" id="3211572"><a href="/image/image.go.html#3211528">pix</a></span><span class="op" id="3211575">,</span>&nbsp;<span class="num" id="3211577">2</span>&nbsp;<span class="op" id="3211579">*</span>&nbsp;<span class="ident" id="3211581"><a href="/image/image.go.html#3211504">w</a></span><span class="op" id="3211582">,</span>&nbsp;<span class="ident" id="3211584"><a href="/image/image.go.html#3211480">r</a></span><span class="op" id="3211585">}</span><br>
<span class="lineno"></span><span class="op" id="3211587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3211590">//&nbsp;Paletted&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;of&nbsp;uint8&nbsp;indices&nbsp;into&nbsp;a&nbsp;given&nbsp;palette.</span><br>
<span class="lineno">830</span><span class="keyword" id="3211663">type</span>&nbsp;<span class="ident" id="3211668">Paletted</span>&nbsp;<span class="keyword" id="3211677">struct</span>&nbsp;<span class="op" id="3211684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3211687">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;as&nbsp;palette&nbsp;indices.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3211754">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*1].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211822">Pix</span>&nbsp;<span class="op" id="3211826">[</span><span class="op" id="3211827">]</span><span class="builtintype" id="3211828">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3211835">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211911">Stride</span>&nbsp;<span class="builtintype" id="3211918">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3211923">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3211955">Rect</span>&nbsp;<span class="ident" id="3211960"><a href="/image/geom.go.html#3185229">Rectangle</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3211971">//&nbsp;Palette&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;palette.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3212007">Palette</span>&nbsp;<span class="ident" id="3212015"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3212020">.</span><span class="ident" id="3212021">Palette</span><br>
<span class="lineno">840</span><span class="op" id="3212029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3212032">func</span>&nbsp;<span class="op" id="3212037">(</span><span class="ident" id="3212038">p</span>&nbsp;<span class="op" id="3212040">*</span><span class="ident" id="3212041"><a href="/image/image.go.html#3211668">Paletted</a></span><span class="op" id="3212049">)</span>&nbsp;<span class="ident" id="3212051">ColorModel</span><span class="op" id="3212061">(</span><span class="op" id="3212062">)</span>&nbsp;<span class="ident" id="3212064"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3212069">.</span><span class="ident" id="3212070">Model</span>&nbsp;<span class="op" id="3212076">{</span>&nbsp;<span class="keyword" id="3212078">return</span>&nbsp;<span class="ident" id="3212085"><a href="/image/image.go.html#3212038">p</a></span><span class="op" id="3212086">.</span><span class="ident" id="3212087">Palette</span>&nbsp;<span class="op" id="3212095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3212098">func</span>&nbsp;<span class="op" id="3212103">(</span><span class="ident" id="3212104">p</span>&nbsp;<span class="op" id="3212106">*</span><span class="ident" id="3212107"><a href="/image/image.go.html#3211668">Paletted</a></span><span class="op" id="3212115">)</span>&nbsp;<span class="ident" id="3212117">Bounds</span><span class="op" id="3212123">(</span><span class="op" id="3212124">)</span>&nbsp;<span class="ident" id="3212126"><a href="/image/geom.go.html#3185229">Rectangle</a></span>&nbsp;<span class="op" id="3212136">{</span>&nbsp;<span class="keyword" id="3212138">return</span>&nbsp;<span class="ident" id="3212145"><a href="/image/image.go.html#3212104">p</a></span><span class="op" id="3212146">.</span><span class="ident" id="3212147">Rect</span>&nbsp;<span class="op" id="3212152">}</span><br>
<span class="lineno">845</span><br>
<span class="lineno"></span><span class="keyword" id="3212155">func</span>&nbsp;<span class="op" id="3212160">(</span><span class="ident" id="3212161">p</span>&nbsp;<span class="op" id="3212163">*</span><span class="ident" id="3212164"><a href="/image/image.go.html#3211668">Paletted</a></span><span class="op" id="3212172">)</span>&nbsp;<span class="ident" id="3212174">At</span><span class="op" id="3212176">(</span><span class="ident" id="3212177">x</span><span class="op" id="3212178">,</span>&nbsp;<span class="ident" id="3212180">y</span>&nbsp;<span class="builtintype" id="3212182">int</span><span class="op" id="3212185">)</span>&nbsp;<span class="ident" id="3212187"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3212192">.</span><span class="ident" id="3212193">Color</span>&nbsp;<span class="op" id="3212199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212202">if</span>&nbsp;<span class="builtinfunc" id="3212205">len</span><span class="op" id="3212208">(</span><span class="ident" id="3212209"><a href="/image/image.go.html#3212161">p</a></span><span class="op" id="3212210">.</span><span class="ident" id="3212211">Palette</span><span class="op" id="3212218">)</span>&nbsp;<span class="op" id="3212220">==</span>&nbsp;<span class="num" id="3212223">0</span>&nbsp;<span class="op" id="3212225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212229">return</span>&nbsp;<span class="ident" id="3212236">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3212241">}</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212244">if</span>&nbsp;<span class="op" id="3212247">!</span><span class="op" id="3212248">(</span><span class="ident" id="3212249"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3212254">{</span><span class="ident" id="3212255"><a href="/image/image.go.html#3212177">x</a></span><span class="op" id="3212256">,</span>&nbsp;<span class="ident" id="3212258"><a href="/image/image.go.html#3212180">y</a></span><span class="op" id="3212259">}</span><span class="op" id="3212260">.</span><span class="ident" id="3212261">In</span><span class="op" id="3212263">(</span><span class="ident" id="3212264"><a href="/image/image.go.html#3212161">p</a></span><span class="op" id="3212265">.</span><span class="ident" id="3212266">Rect</span><span class="op" id="3212270">)</span><span class="op" id="3212271">)</span>&nbsp;<span class="op" id="3212273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212277">return</span>&nbsp;<span class="ident" id="3212284"><a href="/image/image.go.html#3212161">p</a></span><span class="op" id="3212285">.</span><span class="ident" id="3212286">Palette</span><span class="op" id="3212293">[</span><span class="num" id="3212294">0</span><span class="op" id="3212295">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3212298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3212301">i</span>&nbsp;<span class="op" id="3212303">:=</span>&nbsp;<span class="ident" id="3212306"><a href="/image/image.go.html#3212161">p</a></span><span class="op" id="3212307">.</span><span class="ident" id="3212308">PixOffset</span><span class="op" id="3212317">(</span><span class="ident" id="3212318"><a href="/image/image.go.html#3212177">x</a></span><span class="op" id="3212319">,</span>&nbsp;<span class="ident" id="3212321"><a href="/image/image.go.html#3212180">y</a></span><span class="op" id="3212322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212325">return</span>&nbsp;<span class="ident" id="3212332"><a href="/image/image.go.html#3212161">p</a></span><span class="op" id="3212333">.</span><span class="ident" id="3212334">Palette</span><span class="op" id="3212341">[</span><span class="ident" id="3212342"><a href="/image/image.go.html#3212161">p</a></span><span class="op" id="3212343">.</span><span class="ident" id="3212344">Pix</span><span class="op" id="3212347">[</span><span class="ident" id="3212348"><a href="/image/image.go.html#3212301">i</a></span><span class="op" id="3212349">]</span><span class="op" id="3212350">]</span><br>
<span class="lineno">855</span><span class="op" id="3212352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3212355">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3212434">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="3212458">func</span>&nbsp;<span class="op" id="3212463">(</span><span class="ident" id="3212464">p</span>&nbsp;<span class="op" id="3212466">*</span><span class="ident" id="3212467"><a href="/image/image.go.html#3211668">Paletted</a></span><span class="op" id="3212475">)</span>&nbsp;<span class="ident" id="3212477">PixOffset</span><span class="op" id="3212486">(</span><span class="ident" id="3212487">x</span><span class="op" id="3212488">,</span>&nbsp;<span class="ident" id="3212490">y</span>&nbsp;<span class="builtintype" id="3212492">int</span><span class="op" id="3212495">)</span>&nbsp;<span class="builtintype" id="3212497">int</span>&nbsp;<span class="op" id="3212501">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212504">return</span>&nbsp;<span class="op" id="3212511">(</span><span class="ident" id="3212512"><a href="/image/image.go.html#3212490">y</a></span><span class="op" id="3212513">-</span><span class="ident" id="3212514"><a href="/image/image.go.html#3212464">p</a></span><span class="op" id="3212515">.</span><span class="ident" id="3212516">Rect</span><span class="op" id="3212520">.</span><span class="ident" id="3212521">Min</span><span class="op" id="3212524">.</span><span class="ident" id="3212525">Y</span><span class="op" id="3212526">)</span><span class="op" id="3212527">*</span><span class="ident" id="3212528"><a href="/image/image.go.html#3212464">p</a></span><span class="op" id="3212529">.</span><span class="ident" id="3212530">Stride</span>&nbsp;<span class="op" id="3212537">+</span>&nbsp;<span class="op" id="3212539">(</span><span class="ident" id="3212540"><a href="/image/image.go.html#3212487">x</a></span><span class="op" id="3212541">-</span><span class="ident" id="3212542"><a href="/image/image.go.html#3212464">p</a></span><span class="op" id="3212543">.</span><span class="ident" id="3212544">Rect</span><span class="op" id="3212548">.</span><span class="ident" id="3212549">Min</span><span class="op" id="3212552">.</span><span class="ident" id="3212553">X</span><span class="op" id="3212554">)</span><span class="op" id="3212555">*</span><span class="num" id="3212556">1</span><br>
<span class="lineno"></span><span class="op" id="3212558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3212561">func</span>&nbsp;<span class="op" id="3212566">(</span><span class="ident" id="3212567">p</span>&nbsp;<span class="op" id="3212569">*</span><span class="ident" id="3212570"><a href="/image/image.go.html#3211668">Paletted</a></span><span class="op" id="3212578">)</span>&nbsp;<span class="ident" id="3212580">Set</span><span class="op" id="3212583">(</span><span class="ident" id="3212584">x</span><span class="op" id="3212585">,</span>&nbsp;<span class="ident" id="3212587">y</span>&nbsp;<span class="builtintype" id="3212589">int</span><span class="op" id="3212592">,</span>&nbsp;<span class="ident" id="3212594">c</span>&nbsp;<span class="ident" id="3212596"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3212601">.</span><span class="ident" id="3212602">Color</span><span class="op" id="3212607">)</span>&nbsp;<span class="op" id="3212609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212612">if</span>&nbsp;<span class="op" id="3212615">!</span><span class="op" id="3212616">(</span><span class="ident" id="3212617"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3212622">{</span><span class="ident" id="3212623"><a href="/image/image.go.html#3212584">x</a></span><span class="op" id="3212624">,</span>&nbsp;<span class="ident" id="3212626"><a href="/image/image.go.html#3212587">y</a></span><span class="op" id="3212627">}</span><span class="op" id="3212628">.</span><span class="ident" id="3212629">In</span><span class="op" id="3212631">(</span><span class="ident" id="3212632"><a href="/image/image.go.html#3212567">p</a></span><span class="op" id="3212633">.</span><span class="ident" id="3212634">Rect</span><span class="op" id="3212638">)</span><span class="op" id="3212639">)</span>&nbsp;<span class="op" id="3212641">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212645">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3212653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3212656">i</span>&nbsp;<span class="op" id="3212658">:=</span>&nbsp;<span class="ident" id="3212661"><a href="/image/image.go.html#3212567">p</a></span><span class="op" id="3212662">.</span><span class="ident" id="3212663">PixOffset</span><span class="op" id="3212672">(</span><span class="ident" id="3212673"><a href="/image/image.go.html#3212584">x</a></span><span class="op" id="3212674">,</span>&nbsp;<span class="ident" id="3212676"><a href="/image/image.go.html#3212587">y</a></span><span class="op" id="3212677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3212680"><a href="/image/image.go.html#3212567">p</a></span><span class="op" id="3212681">.</span><span class="ident" id="3212682">Pix</span><span class="op" id="3212685">[</span><span class="ident" id="3212686"><a href="/image/image.go.html#3212656">i</a></span><span class="op" id="3212687">]</span>&nbsp;<span class="op" id="3212689">=</span>&nbsp;<span class="builtintype" id="3212691">uint8</span><span class="op" id="3212696">(</span><span class="ident" id="3212697"><a href="/image/image.go.html#3212567">p</a></span><span class="op" id="3212698">.</span><span class="ident" id="3212699">Palette</span><span class="op" id="3212706">.</span><span class="ident" id="3212707">Index</span><span class="op" id="3212712">(</span><span class="ident" id="3212713"><a href="/image/image.go.html#3212594">c</a></span><span class="op" id="3212714">)</span><span class="op" id="3212715">)</span><br>
<span class="lineno"></span><span class="op" id="3212717">}</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span><span class="keyword" id="3212720">func</span>&nbsp;<span class="op" id="3212725">(</span><span class="ident" id="3212726">p</span>&nbsp;<span class="op" id="3212728">*</span><span class="ident" id="3212729"><a href="/image/image.go.html#3211668">Paletted</a></span><span class="op" id="3212737">)</span>&nbsp;<span class="ident" id="3212739">ColorIndexAt</span><span class="op" id="3212751">(</span><span class="ident" id="3212752">x</span><span class="op" id="3212753">,</span>&nbsp;<span class="ident" id="3212755">y</span>&nbsp;<span class="builtintype" id="3212757">int</span><span class="op" id="3212760">)</span>&nbsp;<span class="builtintype" id="3212762">uint8</span>&nbsp;<span class="op" id="3212768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212771">if</span>&nbsp;<span class="op" id="3212774">!</span><span class="op" id="3212775">(</span><span class="ident" id="3212776"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3212781">{</span><span class="ident" id="3212782"><a href="/image/image.go.html#3212752">x</a></span><span class="op" id="3212783">,</span>&nbsp;<span class="ident" id="3212785"><a href="/image/image.go.html#3212755">y</a></span><span class="op" id="3212786">}</span><span class="op" id="3212787">.</span><span class="ident" id="3212788">In</span><span class="op" id="3212790">(</span><span class="ident" id="3212791"><a href="/image/image.go.html#3212726">p</a></span><span class="op" id="3212792">.</span><span class="ident" id="3212793">Rect</span><span class="op" id="3212797">)</span><span class="op" id="3212798">)</span>&nbsp;<span class="op" id="3212800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212804">return</span>&nbsp;<span class="num" id="3212811">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3212814">}</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3212817">i</span>&nbsp;<span class="op" id="3212819">:=</span>&nbsp;<span class="ident" id="3212822"><a href="/image/image.go.html#3212726">p</a></span><span class="op" id="3212823">.</span><span class="ident" id="3212824">PixOffset</span><span class="op" id="3212833">(</span><span class="ident" id="3212834"><a href="/image/image.go.html#3212752">x</a></span><span class="op" id="3212835">,</span>&nbsp;<span class="ident" id="3212837"><a href="/image/image.go.html#3212755">y</a></span><span class="op" id="3212838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212841">return</span>&nbsp;<span class="ident" id="3212848"><a href="/image/image.go.html#3212726">p</a></span><span class="op" id="3212849">.</span><span class="ident" id="3212850">Pix</span><span class="op" id="3212853">[</span><span class="ident" id="3212854"><a href="/image/image.go.html#3212817">i</a></span><span class="op" id="3212855">]</span><br>
<span class="lineno"></span><span class="op" id="3212857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3212860">func</span>&nbsp;<span class="op" id="3212865">(</span><span class="ident" id="3212866">p</span>&nbsp;<span class="op" id="3212868">*</span><span class="ident" id="3212869"><a href="/image/image.go.html#3211668">Paletted</a></span><span class="op" id="3212877">)</span>&nbsp;<span class="ident" id="3212879">SetColorIndex</span><span class="op" id="3212892">(</span><span class="ident" id="3212893">x</span><span class="op" id="3212894">,</span>&nbsp;<span class="ident" id="3212896">y</span>&nbsp;<span class="builtintype" id="3212898">int</span><span class="op" id="3212901">,</span>&nbsp;<span class="ident" id="3212903">index</span>&nbsp;<span class="builtintype" id="3212909">uint8</span><span class="op" id="3212914">)</span>&nbsp;<span class="op" id="3212916">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212919">if</span>&nbsp;<span class="op" id="3212922">!</span><span class="op" id="3212923">(</span><span class="ident" id="3212924"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3212929">{</span><span class="ident" id="3212930"><a href="/image/image.go.html#3212893">x</a></span><span class="op" id="3212931">,</span>&nbsp;<span class="ident" id="3212933"><a href="/image/image.go.html#3212896">y</a></span><span class="op" id="3212934">}</span><span class="op" id="3212935">.</span><span class="ident" id="3212936">In</span><span class="op" id="3212938">(</span><span class="ident" id="3212939"><a href="/image/image.go.html#3212866">p</a></span><span class="op" id="3212940">.</span><span class="ident" id="3212941">Rect</span><span class="op" id="3212945">)</span><span class="op" id="3212946">)</span>&nbsp;<span class="op" id="3212948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3212952">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3212960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3212963">i</span>&nbsp;<span class="op" id="3212965">:=</span>&nbsp;<span class="ident" id="3212968"><a href="/image/image.go.html#3212866">p</a></span><span class="op" id="3212969">.</span><span class="ident" id="3212970">PixOffset</span><span class="op" id="3212979">(</span><span class="ident" id="3212980"><a href="/image/image.go.html#3212893">x</a></span><span class="op" id="3212981">,</span>&nbsp;<span class="ident" id="3212983"><a href="/image/image.go.html#3212896">y</a></span><span class="op" id="3212984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3212987"><a href="/image/image.go.html#3212866">p</a></span><span class="op" id="3212988">.</span><span class="ident" id="3212989">Pix</span><span class="op" id="3212992">[</span><span class="ident" id="3212993"><a href="/image/image.go.html#3212963">i</a></span><span class="op" id="3212994">]</span>&nbsp;<span class="op" id="3212996">=</span>&nbsp;<span class="ident" id="3212998"><a href="/image/image.go.html#3212903">index</a></span><br>
<span class="lineno">885</span><span class="op" id="3213004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3213007">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="3213084">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="3213156">func</span>&nbsp;<span class="op" id="3213161">(</span><span class="ident" id="3213162">p</span>&nbsp;<span class="op" id="3213164">*</span><span class="ident" id="3213165"><a href="/image/image.go.html#3211668">Paletted</a></span><span class="op" id="3213173">)</span>&nbsp;<span class="ident" id="3213175">SubImage</span><span class="op" id="3213183">(</span><span class="ident" id="3213184">r</span>&nbsp;<span class="ident" id="3213186"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3213195">)</span>&nbsp;<span class="ident" id="3213197"><a href="/image/image.go.html#3190140">Image</a></span>&nbsp;<span class="op" id="3213203">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213206"><a href="/image/image.go.html#3213184">r</a></span>&nbsp;<span class="op" id="3213208">=</span>&nbsp;<span class="ident" id="3213210"><a href="/image/image.go.html#3213184">r</a></span><span class="op" id="3213211">.</span><span class="ident" id="3213212">Intersect</span><span class="op" id="3213221">(</span><span class="ident" id="3213222"><a href="/image/image.go.html#3213162">p</a></span><span class="op" id="3213223">.</span><span class="ident" id="3213224">Rect</span><span class="op" id="3213228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3213231">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3213312">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3213394">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213444">if</span>&nbsp;<span class="ident" id="3213447"><a href="/image/image.go.html#3213184">r</a></span><span class="op" id="3213448">.</span><span class="ident" id="3213449">Empty</span><span class="op" id="3213454">(</span><span class="op" id="3213455">)</span>&nbsp;<span class="op" id="3213457">{</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213461">return</span>&nbsp;<span class="op" id="3213468">&amp;</span><span class="ident" id="3213469"><a href="/image/image.go.html#3211668">Paletted</a></span><span class="op" id="3213477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213482">Palette</span><span class="op" id="3213489">:</span>&nbsp;<span class="ident" id="3213491"><a href="/image/image.go.html#3213162">p</a></span><span class="op" id="3213492">.</span><span class="ident" id="3213493">Palette</span><span class="op" id="3213500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3213504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3213507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213510">i</span>&nbsp;<span class="op" id="3213512">:=</span>&nbsp;<span class="ident" id="3213515"><a href="/image/image.go.html#3213162">p</a></span><span class="op" id="3213516">.</span><span class="ident" id="3213517">PixOffset</span><span class="op" id="3213526">(</span><span class="ident" id="3213527"><a href="/image/image.go.html#3213184">r</a></span><span class="op" id="3213528">.</span><span class="ident" id="3213529">Min</span><span class="op" id="3213532">.</span><span class="ident" id="3213533">X</span><span class="op" id="3213534">,</span>&nbsp;<span class="ident" id="3213536"><a href="/image/image.go.html#3213184">r</a></span><span class="op" id="3213537">.</span><span class="ident" id="3213538">Min</span><span class="op" id="3213541">.</span><span class="ident" id="3213542">Y</span><span class="op" id="3213543">)</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213546">return</span>&nbsp;<span class="op" id="3213553">&amp;</span><span class="ident" id="3213554"><a href="/image/image.go.html#3211668">Paletted</a></span><span class="op" id="3213562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213566">Pix</span><span class="op" id="3213569">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3213575"><a href="/image/image.go.html#3213162">p</a></span><span class="op" id="3213576">.</span><span class="ident" id="3213577">Pix</span><span class="op" id="3213580">[</span><span class="ident" id="3213581"><a href="/image/image.go.html#3213510">i</a></span><span class="op" id="3213582">:</span><span class="op" id="3213583">]</span><span class="op" id="3213584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213588">Stride</span><span class="op" id="3213594">:</span>&nbsp;&nbsp;<span class="ident" id="3213597"><a href="/image/image.go.html#3213162">p</a></span><span class="op" id="3213598">.</span><span class="ident" id="3213599">Stride</span><span class="op" id="3213605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213609">Rect</span><span class="op" id="3213613">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3213618"><a href="/image/image.go.html#3213162">p</a></span><span class="op" id="3213619">.</span><span class="ident" id="3213620">Rect</span><span class="op" id="3213624">.</span><span class="ident" id="3213625">Intersect</span><span class="op" id="3213634">(</span><span class="ident" id="3213635"><a href="/image/image.go.html#3213184">r</a></span><span class="op" id="3213636">)</span><span class="op" id="3213637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213641">Palette</span><span class="op" id="3213648">:</span>&nbsp;<span class="ident" id="3213650"><a href="/image/image.go.html#3213162">p</a></span><span class="op" id="3213651">.</span><span class="ident" id="3213652">Palette</span><span class="op" id="3213659">,</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3213662">}</span><br>
<span class="lineno"></span><span class="op" id="3213664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3213667">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="3213740">func</span>&nbsp;<span class="op" id="3213745">(</span><span class="ident" id="3213746">p</span>&nbsp;<span class="op" id="3213748">*</span><span class="ident" id="3213749"><a href="/image/image.go.html#3211668">Paletted</a></span><span class="op" id="3213757">)</span>&nbsp;<span class="ident" id="3213759">Opaque</span><span class="op" id="3213765">(</span><span class="op" id="3213766">)</span>&nbsp;<span class="builtintype" id="3213768">bool</span>&nbsp;<span class="op" id="3213773">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213776">var</span>&nbsp;<span class="ident" id="3213780">present</span>&nbsp;<span class="op" id="3213788">[</span><span class="num" id="3213789">256</span><span class="op" id="3213792">]</span><span class="builtintype" id="3213793">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213799">i0</span><span class="op" id="3213801">,</span>&nbsp;<span class="ident" id="3213803">i1</span>&nbsp;<span class="op" id="3213806">:=</span>&nbsp;<span class="num" id="3213809">0</span><span class="op" id="3213810">,</span>&nbsp;<span class="ident" id="3213812"><a href="/image/image.go.html#3213746">p</a></span><span class="op" id="3213813">.</span><span class="ident" id="3213814">Rect</span><span class="op" id="3213818">.</span><span class="ident" id="3213819">Dx</span><span class="op" id="3213821">(</span><span class="op" id="3213822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213825">for</span>&nbsp;<span class="ident" id="3213829">y</span>&nbsp;<span class="op" id="3213831">:=</span>&nbsp;<span class="ident" id="3213834"><a href="/image/image.go.html#3213746">p</a></span><span class="op" id="3213835">.</span><span class="ident" id="3213836">Rect</span><span class="op" id="3213840">.</span><span class="ident" id="3213841">Min</span><span class="op" id="3213844">.</span><span class="ident" id="3213845">Y</span><span class="op" id="3213846">;</span>&nbsp;<span class="ident" id="3213848"><a href="/image/image.go.html#3213829">y</a></span>&nbsp;<span class="op" id="3213850">&lt;</span>&nbsp;<span class="ident" id="3213852"><a href="/image/image.go.html#3213746">p</a></span><span class="op" id="3213853">.</span><span class="ident" id="3213854">Rect</span><span class="op" id="3213858">.</span><span class="ident" id="3213859">Max</span><span class="op" id="3213862">.</span><span class="ident" id="3213863">Y</span><span class="op" id="3213864">;</span>&nbsp;<span class="ident" id="3213866"><a href="/image/image.go.html#3213829">y</a></span><span class="op" id="3213867">++</span>&nbsp;<span class="op" id="3213870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213874">for</span>&nbsp;<span class="ident" id="3213878">_</span><span class="op" id="3213879">,</span>&nbsp;<span class="ident" id="3213881">c</span>&nbsp;<span class="op" id="3213883">:=</span>&nbsp;<span class="keyword" id="3213886">range</span>&nbsp;<span class="ident" id="3213892"><a href="/image/image.go.html#3213746">p</a></span><span class="op" id="3213893">.</span><span class="ident" id="3213894">Pix</span><span class="op" id="3213897">[</span><span class="ident" id="3213898"><a href="/image/image.go.html#3213799">i0</a></span><span class="op" id="3213900">:</span><span class="ident" id="3213901"><a href="/image/image.go.html#3213803">i1</a></span><span class="op" id="3213903">]</span>&nbsp;<span class="op" id="3213905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213910"><a href="/image/image.go.html#3213780">present</a></span><span class="op" id="3213917">[</span><span class="ident" id="3213918"><a href="/image/image.go.html#3213881">c</a></span><span class="op" id="3213919">]</span>&nbsp;<span class="op" id="3213921">=</span>&nbsp;<span class="builtintype" id="3213923">true</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3213930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213934"><a href="/image/image.go.html#3213799">i0</a></span>&nbsp;<span class="op" id="3213937">+=</span>&nbsp;<span class="ident" id="3213940"><a href="/image/image.go.html#3213746">p</a></span><span class="op" id="3213941">.</span><span class="ident" id="3213942">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3213951"><a href="/image/image.go.html#3213803">i1</a></span>&nbsp;<span class="op" id="3213954">+=</span>&nbsp;<span class="ident" id="3213957"><a href="/image/image.go.html#3213746">p</a></span><span class="op" id="3213958">.</span><span class="ident" id="3213959">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3213967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3213970">for</span>&nbsp;<span class="ident" id="3213974">i</span><span class="op" id="3213975">,</span>&nbsp;<span class="ident" id="3213977">c</span>&nbsp;<span class="op" id="3213979">:=</span>&nbsp;<span class="keyword" id="3213982">range</span>&nbsp;<span class="ident" id="3213988"><a href="/image/image.go.html#3213746">p</a></span><span class="op" id="3213989">.</span><span class="ident" id="3213990">Palette</span>&nbsp;<span class="op" id="3213998">{</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214002">if</span>&nbsp;<span class="op" id="3214005">!</span><span class="ident" id="3214006"><a href="/image/image.go.html#3213780">present</a></span><span class="op" id="3214013">[</span><span class="ident" id="3214014"><a href="/image/image.go.html#3213974">i</a></span><span class="op" id="3214015">]</span>&nbsp;<span class="op" id="3214017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214022">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3214037">_</span><span class="op" id="3214038">,</span>&nbsp;<span class="ident" id="3214040">_</span><span class="op" id="3214041">,</span>&nbsp;<span class="ident" id="3214043">_</span><span class="op" id="3214044">,</span>&nbsp;<span class="ident" id="3214046">a</span>&nbsp;<span class="op" id="3214048">:=</span>&nbsp;<span class="ident" id="3214051"><a href="/image/image.go.html#3213977">c</a></span><span class="op" id="3214052">.</span><span class="ident" id="3214053">RGBA</span><span class="op" id="3214057">(</span><span class="op" id="3214058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214062">if</span>&nbsp;<span class="ident" id="3214065"><a href="/image/image.go.html#3214046">a</a></span>&nbsp;<span class="op" id="3214067">!=</span>&nbsp;<span class="num" id="3214070">0xffff</span>&nbsp;<span class="op" id="3214077">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214082">return</span>&nbsp;<span class="builtintype" id="3214089">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3214100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214103">return</span>&nbsp;<span class="builtintype" id="3214110">true</span><br>
<span class="lineno"></span><span class="op" id="3214115">}</span><br>
<span class="lineno">930</span><br>
<span class="lineno"></span><span class="comment" id="3214118">//&nbsp;NewPaletted&nbsp;returns&nbsp;a&nbsp;new&nbsp;Paletted&nbsp;with&nbsp;the&nbsp;given&nbsp;width,&nbsp;height&nbsp;and&nbsp;palette.</span><br>
<span class="lineno"></span><span class="keyword" id="3214198">func</span>&nbsp;<span class="ident" id="3214203">NewPaletted</span><span class="op" id="3214214">(</span><span class="ident" id="3214215">r</span>&nbsp;<span class="ident" id="3214217"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3214226">,</span>&nbsp;<span class="ident" id="3214228">p</span>&nbsp;<span class="ident" id="3214230"><a href="/image/image.go.html#3189904">color</a></span><span class="op" id="3214235">.</span><span class="ident" id="3214236">Palette</span><span class="op" id="3214243">)</span>&nbsp;<span class="op" id="3214245">*</span><span class="ident" id="3214246"><a href="/image/image.go.html#3211668">Paletted</a></span>&nbsp;<span class="op" id="3214255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3214258">w</span><span class="op" id="3214259">,</span>&nbsp;<span class="ident" id="3214261">h</span>&nbsp;<span class="op" id="3214263">:=</span>&nbsp;<span class="ident" id="3214266"><a href="/image/image.go.html#3214215">r</a></span><span class="op" id="3214267">.</span><span class="ident" id="3214268">Dx</span><span class="op" id="3214270">(</span><span class="op" id="3214271">)</span><span class="op" id="3214272">,</span>&nbsp;<span class="ident" id="3214274"><a href="/image/image.go.html#3214215">r</a></span><span class="op" id="3214275">.</span><span class="ident" id="3214276">Dy</span><span class="op" id="3214278">(</span><span class="op" id="3214279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3214282">pix</span>&nbsp;<span class="op" id="3214286">:=</span>&nbsp;<span class="builtinfunc" id="3214289">make</span><span class="op" id="3214293">(</span><span class="op" id="3214294">[</span><span class="op" id="3214295">]</span><span class="builtintype" id="3214296">uint8</span><span class="op" id="3214301">,</span>&nbsp;<span class="num" id="3214303">1</span><span class="op" id="3214304">*</span><span class="ident" id="3214305"><a href="/image/image.go.html#3214258">w</a></span><span class="op" id="3214306">*</span><span class="ident" id="3214307"><a href="/image/image.go.html#3214261">h</a></span><span class="op" id="3214308">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3214311">return</span>&nbsp;<span class="op" id="3214318">&amp;</span><span class="ident" id="3214319"><a href="/image/image.go.html#3211668">Paletted</a></span><span class="op" id="3214327">{</span><span class="ident" id="3214328"><a href="/image/image.go.html#3214282">pix</a></span><span class="op" id="3214331">,</span>&nbsp;<span class="num" id="3214333">1</span>&nbsp;<span class="op" id="3214335">*</span>&nbsp;<span class="ident" id="3214337"><a href="/image/image.go.html#3214258">w</a></span><span class="op" id="3214338">,</span>&nbsp;<span class="ident" id="3214340"><a href="/image/image.go.html#3214215">r</a></span><span class="op" id="3214341">,</span>&nbsp;<span class="ident" id="3214343"><a href="/image/image.go.html#3214228">p</a></span><span class="op" id="3214344">}</span><br>
<span class="lineno"></span><span class="op" id="3214346">}</span>
</div>
</body>
</html>
