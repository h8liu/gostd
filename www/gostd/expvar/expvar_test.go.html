<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>expvar</h2>
<ul>
<li><a href="/gostd/expvar/expvar.go.html">expvar.go</a></li>
<li><a href="/gostd/expvar/expvar_test.go.html" class="current">expvar_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7813214">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7813269">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7813323">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7813374">package</span>&nbsp;<span class="ident" id="7813382">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7813390">import</span>&nbsp;<span class="op" id="7813397">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7813400">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7813409">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7813426">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7813447">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7813458">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7813468">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="7813471">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="7813516">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="7813543">func</span>&nbsp;<span class="ident" id="7813548">RemoveAll</span><span class="op" id="7813557">(</span><span class="op" id="7813558">)</span>&nbsp;<span class="op" id="7813560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813563">mutex</span><span class="op" id="7813568">.</span><span class="ident" id="7813569">Lock</span><span class="op" id="7813573">(</span><span class="op" id="7813574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7813577">defer</span>&nbsp;<span class="ident" id="7813583">mutex</span><span class="op" id="7813588">.</span><span class="ident" id="7813589">Unlock</span><span class="op" id="7813595">(</span><span class="op" id="7813596">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813599">vars</span>&nbsp;<span class="op" id="7813604">=</span>&nbsp;<span class="builtinfunc" id="7813606">make</span><span class="op" id="7813610">(</span><span class="keyword" id="7813611">map</span><span class="op" id="7813614">[</span><span class="builtintype" id="7813615">string</span><span class="op" id="7813621">]</span><span class="ident" id="7813622">Var</span><span class="op" id="7813625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813628">varKeys</span>&nbsp;<span class="op" id="7813636">=</span>&nbsp;<span class="ident" id="7813638">nil</span><br>
<span class="lineno"></span><span class="op" id="7813642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7813645">func</span>&nbsp;<span class="ident" id="7813650">TestInt</span><span class="op" id="7813657">(</span><span class="ident" id="7813658">t</span>&nbsp;<span class="op" id="7813660">*</span><span class="ident" id="7813661">testing</span><span class="op" id="7813668">.</span><span class="ident" id="7813669">T</span><span class="op" id="7813670">)</span>&nbsp;<span class="op" id="7813672">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813675">RemoveAll</span><span class="op" id="7813684">(</span><span class="op" id="7813685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813688">reqs</span>&nbsp;<span class="op" id="7813693">:=</span>&nbsp;<span class="ident" id="7813696">NewInt</span><span class="op" id="7813702">(</span><span class="string" id="7813703">&#34;requests&#34;</span><span class="op" id="7813713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7813716">if</span>&nbsp;<span class="ident" id="7813719">reqs</span><span class="op" id="7813723">.</span><span class="ident" id="7813724">i</span>&nbsp;<span class="op" id="7813726">!=</span>&nbsp;<span class="num" id="7813729">0</span>&nbsp;<span class="op" id="7813731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813735">t</span><span class="op" id="7813736">.</span><span class="ident" id="7813737">Errorf</span><span class="op" id="7813743">(</span><span class="string" id="7813744">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7813765">,</span>&nbsp;<span class="ident" id="7813767">reqs</span><span class="op" id="7813771">.</span><span class="ident" id="7813772">i</span><span class="op" id="7813773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7813776">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7813779">if</span>&nbsp;<span class="ident" id="7813782">reqs</span>&nbsp;<span class="op" id="7813787">!=</span>&nbsp;<span class="ident" id="7813790">Get</span><span class="op" id="7813793">(</span><span class="string" id="7813794">&#34;requests&#34;</span><span class="op" id="7813804">)</span><span class="op" id="7813805">.</span><span class="op" id="7813806">(</span><span class="op" id="7813807">*</span><span class="ident" id="7813808">Int</span><span class="op" id="7813811">)</span>&nbsp;<span class="op" id="7813813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813817">t</span><span class="op" id="7813818">.</span><span class="ident" id="7813819">Errorf</span><span class="op" id="7813825">(</span><span class="string" id="7813826">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7813841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7813844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813848">reqs</span><span class="op" id="7813852">.</span><span class="ident" id="7813853">Add</span><span class="op" id="7813856">(</span><span class="num" id="7813857">1</span><span class="op" id="7813858">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813861">reqs</span><span class="op" id="7813865">.</span><span class="ident" id="7813866">Add</span><span class="op" id="7813869">(</span><span class="num" id="7813870">3</span><span class="op" id="7813871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7813874">if</span>&nbsp;<span class="ident" id="7813877">reqs</span><span class="op" id="7813881">.</span><span class="ident" id="7813882">i</span>&nbsp;<span class="op" id="7813884">!=</span>&nbsp;<span class="num" id="7813887">4</span>&nbsp;<span class="op" id="7813889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813893">t</span><span class="op" id="7813894">.</span><span class="ident" id="7813895">Errorf</span><span class="op" id="7813901">(</span><span class="string" id="7813902">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7813923">,</span>&nbsp;<span class="ident" id="7813925">reqs</span><span class="op" id="7813929">.</span><span class="ident" id="7813930">i</span><span class="op" id="7813931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7813934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7813938">if</span>&nbsp;<span class="ident" id="7813941">s</span>&nbsp;<span class="op" id="7813943">:=</span>&nbsp;<span class="ident" id="7813946">reqs</span><span class="op" id="7813950">.</span><span class="ident" id="7813951">String</span><span class="op" id="7813957">(</span><span class="op" id="7813958">)</span><span class="op" id="7813959">;</span>&nbsp;<span class="ident" id="7813961">s</span>&nbsp;<span class="op" id="7813963">!=</span>&nbsp;<span class="string" id="7813966">&#34;4&#34;</span>&nbsp;<span class="op" id="7813970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813974">t</span><span class="op" id="7813975">.</span><span class="ident" id="7813976">Errorf</span><span class="op" id="7813982">(</span><span class="string" id="7813983">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="7814015">,</span>&nbsp;<span class="ident" id="7814017">s</span><span class="op" id="7814018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7814021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814025">reqs</span><span class="op" id="7814029">.</span><span class="ident" id="7814030">Set</span><span class="op" id="7814033">(</span><span class="op" id="7814034">-</span><span class="num" id="7814035">2</span><span class="op" id="7814036">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7814039">if</span>&nbsp;<span class="ident" id="7814042">reqs</span><span class="op" id="7814046">.</span><span class="ident" id="7814047">i</span>&nbsp;<span class="op" id="7814049">!=</span>&nbsp;<span class="op" id="7814052">-</span><span class="num" id="7814053">2</span>&nbsp;<span class="op" id="7814055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814059">t</span><span class="op" id="7814060">.</span><span class="ident" id="7814061">Errorf</span><span class="op" id="7814067">(</span><span class="string" id="7814068">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="7814090">,</span>&nbsp;<span class="ident" id="7814092">reqs</span><span class="op" id="7814096">.</span><span class="ident" id="7814097">i</span><span class="op" id="7814098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7814101">}</span><br>
<span class="lineno"></span><span class="op" id="7814103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="7814106">func</span>&nbsp;<span class="ident" id="7814111">TestFloat</span><span class="op" id="7814120">(</span><span class="ident" id="7814121">t</span>&nbsp;<span class="op" id="7814123">*</span><span class="ident" id="7814124">testing</span><span class="op" id="7814131">.</span><span class="ident" id="7814132">T</span><span class="op" id="7814133">)</span>&nbsp;<span class="op" id="7814135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814138">RemoveAll</span><span class="op" id="7814147">(</span><span class="op" id="7814148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814151">reqs</span>&nbsp;<span class="op" id="7814156">:=</span>&nbsp;<span class="ident" id="7814159">NewFloat</span><span class="op" id="7814167">(</span><span class="string" id="7814168">&#34;requests-float&#34;</span><span class="op" id="7814184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7814187">if</span>&nbsp;<span class="ident" id="7814190">reqs</span><span class="op" id="7814194">.</span><span class="ident" id="7814195">f</span>&nbsp;<span class="op" id="7814197">!=</span>&nbsp;<span class="num" id="7814200">0.0</span>&nbsp;<span class="op" id="7814204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814208">t</span><span class="op" id="7814209">.</span><span class="ident" id="7814210">Errorf</span><span class="op" id="7814216">(</span><span class="string" id="7814217">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7814238">,</span>&nbsp;<span class="ident" id="7814240">reqs</span><span class="op" id="7814244">.</span><span class="ident" id="7814245">f</span><span class="op" id="7814246">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7814249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7814252">if</span>&nbsp;<span class="ident" id="7814255">reqs</span>&nbsp;<span class="op" id="7814260">!=</span>&nbsp;<span class="ident" id="7814263">Get</span><span class="op" id="7814266">(</span><span class="string" id="7814267">&#34;requests-float&#34;</span><span class="op" id="7814283">)</span><span class="op" id="7814284">.</span><span class="op" id="7814285">(</span><span class="op" id="7814286">*</span><span class="ident" id="7814287">Float</span><span class="op" id="7814292">)</span>&nbsp;<span class="op" id="7814294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814298">t</span><span class="op" id="7814299">.</span><span class="ident" id="7814300">Errorf</span><span class="op" id="7814306">(</span><span class="string" id="7814307">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7814322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7814325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814329">reqs</span><span class="op" id="7814333">.</span><span class="ident" id="7814334">Add</span><span class="op" id="7814337">(</span><span class="num" id="7814338">1.5</span><span class="op" id="7814341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814344">reqs</span><span class="op" id="7814348">.</span><span class="ident" id="7814349">Add</span><span class="op" id="7814352">(</span><span class="num" id="7814353">1.25</span><span class="op" id="7814357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7814360">if</span>&nbsp;<span class="ident" id="7814363">reqs</span><span class="op" id="7814367">.</span><span class="ident" id="7814368">f</span>&nbsp;<span class="op" id="7814370">!=</span>&nbsp;<span class="num" id="7814373">2.75</span>&nbsp;<span class="op" id="7814378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814382">t</span><span class="op" id="7814383">.</span><span class="ident" id="7814384">Errorf</span><span class="op" id="7814390">(</span><span class="string" id="7814391">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="7814415">,</span>&nbsp;<span class="ident" id="7814417">reqs</span><span class="op" id="7814421">.</span><span class="ident" id="7814422">f</span><span class="op" id="7814423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7814426">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7814430">if</span>&nbsp;<span class="ident" id="7814433">s</span>&nbsp;<span class="op" id="7814435">:=</span>&nbsp;<span class="ident" id="7814438">reqs</span><span class="op" id="7814442">.</span><span class="ident" id="7814443">String</span><span class="op" id="7814449">(</span><span class="op" id="7814450">)</span><span class="op" id="7814451">;</span>&nbsp;<span class="ident" id="7814453">s</span>&nbsp;<span class="op" id="7814455">!=</span>&nbsp;<span class="string" id="7814458">&#34;2.75&#34;</span>&nbsp;<span class="op" id="7814465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814469">t</span><span class="op" id="7814470">.</span><span class="ident" id="7814471">Errorf</span><span class="op" id="7814477">(</span><span class="string" id="7814478">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="7814513">,</span>&nbsp;<span class="ident" id="7814515">s</span><span class="op" id="7814516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7814519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814523">reqs</span><span class="op" id="7814527">.</span><span class="ident" id="7814528">Add</span><span class="op" id="7814531">(</span><span class="op" id="7814532">-</span><span class="num" id="7814533">2</span><span class="op" id="7814534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7814537">if</span>&nbsp;<span class="ident" id="7814540">reqs</span><span class="op" id="7814544">.</span><span class="ident" id="7814545">f</span>&nbsp;<span class="op" id="7814547">!=</span>&nbsp;<span class="num" id="7814550">0.75</span>&nbsp;<span class="op" id="7814555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814559">t</span><span class="op" id="7814560">.</span><span class="ident" id="7814561">Errorf</span><span class="op" id="7814567">(</span><span class="string" id="7814568">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="7814592">,</span>&nbsp;<span class="ident" id="7814594">reqs</span><span class="op" id="7814598">.</span><span class="ident" id="7814599">f</span><span class="op" id="7814600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7814603">}</span><br>
<span class="lineno"></span><span class="op" id="7814605">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="7814608">func</span>&nbsp;<span class="ident" id="7814613">TestString</span><span class="op" id="7814623">(</span><span class="ident" id="7814624">t</span>&nbsp;<span class="op" id="7814626">*</span><span class="ident" id="7814627">testing</span><span class="op" id="7814634">.</span><span class="ident" id="7814635">T</span><span class="op" id="7814636">)</span>&nbsp;<span class="op" id="7814638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814641">RemoveAll</span><span class="op" id="7814650">(</span><span class="op" id="7814651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814654">name</span>&nbsp;<span class="op" id="7814659">:=</span>&nbsp;<span class="ident" id="7814662">NewString</span><span class="op" id="7814671">(</span><span class="string" id="7814672">&#34;my-name&#34;</span><span class="op" id="7814681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7814684">if</span>&nbsp;<span class="ident" id="7814687">name</span><span class="op" id="7814691">.</span><span class="ident" id="7814692">s</span>&nbsp;<span class="op" id="7814694">!=</span>&nbsp;<span class="string" id="7814697">&#34;&#34;</span>&nbsp;<span class="op" id="7814700">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814704">t</span><span class="op" id="7814705">.</span><span class="ident" id="7814706">Errorf</span><span class="op" id="7814712">(</span><span class="string" id="7814713">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="7814737">,</span>&nbsp;<span class="ident" id="7814739">name</span><span class="op" id="7814743">.</span><span class="ident" id="7814744">s</span><span class="op" id="7814745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7814748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814752">name</span><span class="op" id="7814756">.</span><span class="ident" id="7814757">Set</span><span class="op" id="7814760">(</span><span class="string" id="7814761">&#34;Mike&#34;</span><span class="op" id="7814767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7814770">if</span>&nbsp;<span class="ident" id="7814773">name</span><span class="op" id="7814777">.</span><span class="ident" id="7814778">s</span>&nbsp;<span class="op" id="7814780">!=</span>&nbsp;<span class="string" id="7814783">&#34;Mike&#34;</span>&nbsp;<span class="op" id="7814790">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814794">t</span><span class="op" id="7814795">.</span><span class="ident" id="7814796">Errorf</span><span class="op" id="7814802">(</span><span class="string" id="7814803">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="7814831">,</span>&nbsp;<span class="ident" id="7814833">name</span><span class="op" id="7814837">.</span><span class="ident" id="7814838">s</span><span class="op" id="7814839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7814842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7814846">if</span>&nbsp;<span class="ident" id="7814849">s</span>&nbsp;<span class="op" id="7814851">:=</span>&nbsp;<span class="ident" id="7814854">name</span><span class="op" id="7814858">.</span><span class="ident" id="7814859">String</span><span class="op" id="7814865">(</span><span class="op" id="7814866">)</span><span class="op" id="7814867">;</span>&nbsp;<span class="ident" id="7814869">s</span>&nbsp;<span class="op" id="7814871">!=</span>&nbsp;<span class="string" id="7814874">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="7814885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814889">t</span><span class="op" id="7814890">.</span><span class="ident" id="7814891">Errorf</span><span class="op" id="7814897">(</span><span class="string" id="7814898">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="7814937">,</span>&nbsp;<span class="ident" id="7814939">s</span><span class="op" id="7814940">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7814943">}</span><br>
<span class="lineno"></span><span class="op" id="7814945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7814948">func</span>&nbsp;<span class="ident" id="7814953">TestMapCounter</span><span class="op" id="7814967">(</span><span class="ident" id="7814968">t</span>&nbsp;<span class="op" id="7814970">*</span><span class="ident" id="7814971">testing</span><span class="op" id="7814978">.</span><span class="ident" id="7814979">T</span><span class="op" id="7814980">)</span>&nbsp;<span class="op" id="7814982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814985">RemoveAll</span><span class="op" id="7814994">(</span><span class="op" id="7814995">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814998">colors</span>&nbsp;<span class="op" id="7815005">:=</span>&nbsp;<span class="ident" id="7815008">NewMap</span><span class="op" id="7815014">(</span><span class="string" id="7815015">&#34;bike-shed-colors&#34;</span><span class="op" id="7815033">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815037">colors</span><span class="op" id="7815043">.</span><span class="ident" id="7815044">Add</span><span class="op" id="7815047">(</span><span class="string" id="7815048">&#34;red&#34;</span><span class="op" id="7815053">,</span>&nbsp;<span class="num" id="7815055">1</span><span class="op" id="7815056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815059">colors</span><span class="op" id="7815065">.</span><span class="ident" id="7815066">Add</span><span class="op" id="7815069">(</span><span class="string" id="7815070">&#34;red&#34;</span><span class="op" id="7815075">,</span>&nbsp;<span class="num" id="7815077">2</span><span class="op" id="7815078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815081">colors</span><span class="op" id="7815087">.</span><span class="ident" id="7815088">Add</span><span class="op" id="7815091">(</span><span class="string" id="7815092">&#34;blue&#34;</span><span class="op" id="7815098">,</span>&nbsp;<span class="num" id="7815100">4</span><span class="op" id="7815101">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815104">colors</span><span class="op" id="7815110">.</span><span class="ident" id="7815111">AddFloat</span><span class="op" id="7815119">(</span><span class="string" id="7815120">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7815136">,</span>&nbsp;<span class="num" id="7815138">4.125</span><span class="op" id="7815143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7815146">if</span>&nbsp;<span class="ident" id="7815149">x</span>&nbsp;<span class="op" id="7815151">:=</span>&nbsp;<span class="ident" id="7815154">colors</span><span class="op" id="7815160">.</span><span class="ident" id="7815161">m</span><span class="op" id="7815162">[</span><span class="string" id="7815163">&#34;red&#34;</span><span class="op" id="7815168">]</span><span class="op" id="7815169">.</span><span class="op" id="7815170">(</span><span class="op" id="7815171">*</span><span class="ident" id="7815172">Int</span><span class="op" id="7815175">)</span><span class="op" id="7815176">.</span><span class="ident" id="7815177">i</span><span class="op" id="7815178">;</span>&nbsp;<span class="ident" id="7815180">x</span>&nbsp;<span class="op" id="7815182">!=</span>&nbsp;<span class="num" id="7815185">3</span>&nbsp;<span class="op" id="7815187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815191">t</span><span class="op" id="7815192">.</span><span class="ident" id="7815193">Errorf</span><span class="op" id="7815199">(</span><span class="string" id="7815200">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7815232">,</span>&nbsp;<span class="ident" id="7815234">x</span><span class="op" id="7815235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7815238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7815241">if</span>&nbsp;<span class="ident" id="7815244">x</span>&nbsp;<span class="op" id="7815246">:=</span>&nbsp;<span class="ident" id="7815249">colors</span><span class="op" id="7815255">.</span><span class="ident" id="7815256">m</span><span class="op" id="7815257">[</span><span class="string" id="7815258">&#34;blue&#34;</span><span class="op" id="7815264">]</span><span class="op" id="7815265">.</span><span class="op" id="7815266">(</span><span class="op" id="7815267">*</span><span class="ident" id="7815268">Int</span><span class="op" id="7815271">)</span><span class="op" id="7815272">.</span><span class="ident" id="7815273">i</span><span class="op" id="7815274">;</span>&nbsp;<span class="ident" id="7815276">x</span>&nbsp;<span class="op" id="7815278">!=</span>&nbsp;<span class="num" id="7815281">4</span>&nbsp;<span class="op" id="7815283">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815287">t</span><span class="op" id="7815288">.</span><span class="ident" id="7815289">Errorf</span><span class="op" id="7815295">(</span><span class="string" id="7815296">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7815329">,</span>&nbsp;<span class="ident" id="7815331">x</span><span class="op" id="7815332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7815335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7815338">if</span>&nbsp;<span class="ident" id="7815341">x</span>&nbsp;<span class="op" id="7815343">:=</span>&nbsp;<span class="ident" id="7815346">colors</span><span class="op" id="7815352">.</span><span class="ident" id="7815353">m</span><span class="op" id="7815354">[</span><span class="string" id="7815355">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7815371">]</span><span class="op" id="7815372">.</span><span class="op" id="7815373">(</span><span class="op" id="7815374">*</span><span class="ident" id="7815375">Float</span><span class="op" id="7815380">)</span><span class="op" id="7815381">.</span><span class="ident" id="7815382">f</span><span class="op" id="7815383">;</span>&nbsp;<span class="ident" id="7815385">x</span>&nbsp;<span class="op" id="7815387">!=</span>&nbsp;<span class="num" id="7815390">4.125</span>&nbsp;<span class="op" id="7815396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815400">t</span><span class="op" id="7815401">.</span><span class="ident" id="7815402">Errorf</span><span class="op" id="7815408">(</span><span class="string" id="7815409">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="7815454">,</span>&nbsp;<span class="ident" id="7815456">x</span><span class="op" id="7815457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7815460">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7815464">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7815517">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815566">s</span>&nbsp;<span class="op" id="7815568">:=</span>&nbsp;<span class="ident" id="7815571">colors</span><span class="op" id="7815577">.</span><span class="ident" id="7815578">String</span><span class="op" id="7815584">(</span><span class="op" id="7815585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7815588">var</span>&nbsp;<span class="ident" id="7815592">j</span>&nbsp;<span class="keyword" id="7815594">interface</span><span class="op" id="7815603">{</span><span class="op" id="7815604">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815607">err</span>&nbsp;<span class="op" id="7815611">:=</span>&nbsp;<span class="ident" id="7815614">json</span><span class="op" id="7815618">.</span><span class="ident" id="7815619">Unmarshal</span><span class="op" id="7815628">(</span><span class="op" id="7815629">[</span><span class="op" id="7815630">]</span><span class="builtintype" id="7815631">byte</span><span class="op" id="7815635">(</span><span class="ident" id="7815636">s</span><span class="op" id="7815637">)</span><span class="op" id="7815638">,</span>&nbsp;<span class="op" id="7815640">&amp;</span><span class="ident" id="7815641">j</span><span class="op" id="7815642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7815645">if</span>&nbsp;<span class="ident" id="7815648">err</span>&nbsp;<span class="op" id="7815652">!=</span>&nbsp;<span class="ident" id="7815655">nil</span>&nbsp;<span class="op" id="7815659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815663">t</span><span class="op" id="7815664">.</span><span class="ident" id="7815665">Errorf</span><span class="op" id="7815671">(</span><span class="string" id="7815672">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="7815710">,</span>&nbsp;<span class="ident" id="7815712">err</span><span class="op" id="7815715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7815718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815721">m</span><span class="op" id="7815722">,</span>&nbsp;<span class="ident" id="7815724">ok</span>&nbsp;<span class="op" id="7815727">:=</span>&nbsp;<span class="ident" id="7815730">j</span><span class="op" id="7815731">.</span><span class="op" id="7815732">(</span><span class="keyword" id="7815733">map</span><span class="op" id="7815736">[</span><span class="builtintype" id="7815737">string</span><span class="op" id="7815743">]</span><span class="keyword" id="7815744">interface</span><span class="op" id="7815753">{</span><span class="op" id="7815754">}</span><span class="op" id="7815755">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7815758">if</span>&nbsp;<span class="op" id="7815761">!</span><span class="ident" id="7815762">ok</span>&nbsp;<span class="op" id="7815765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815769">t</span><span class="op" id="7815770">.</span><span class="ident" id="7815771">Error</span><span class="op" id="7815776">(</span><span class="string" id="7815777">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="7815816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7815819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815822">red</span>&nbsp;<span class="op" id="7815826">:=</span>&nbsp;<span class="ident" id="7815829">m</span><span class="op" id="7815830">[</span><span class="string" id="7815831">&#34;red&#34;</span><span class="op" id="7815836">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815839">x</span><span class="op" id="7815840">,</span>&nbsp;<span class="ident" id="7815842">ok</span>&nbsp;<span class="op" id="7815845">:=</span>&nbsp;<span class="ident" id="7815848">red</span><span class="op" id="7815851">.</span><span class="op" id="7815852">(</span><span class="builtintype" id="7815853">float64</span><span class="op" id="7815860">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7815863">if</span>&nbsp;<span class="op" id="7815866">!</span><span class="ident" id="7815867">ok</span>&nbsp;<span class="op" id="7815870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815874">t</span><span class="op" id="7815875">.</span><span class="ident" id="7815876">Error</span><span class="op" id="7815881">(</span><span class="string" id="7815882">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="7815911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7815914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7815917">if</span>&nbsp;<span class="ident" id="7815920">x</span>&nbsp;<span class="op" id="7815922">!=</span>&nbsp;<span class="num" id="7815925">3</span>&nbsp;<span class="op" id="7815927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7815931">t</span><span class="op" id="7815932">.</span><span class="ident" id="7815933">Errorf</span><span class="op" id="7815939">(</span><span class="string" id="7815940">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7815958">,</span>&nbsp;<span class="ident" id="7815960">x</span><span class="op" id="7815961">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7815964">}</span><br>
<span class="lineno"></span><span class="op" id="7815966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7815969">func</span>&nbsp;<span class="ident" id="7815974">TestFunc</span><span class="op" id="7815982">(</span><span class="ident" id="7815983">t</span>&nbsp;<span class="op" id="7815985">*</span><span class="ident" id="7815986">testing</span><span class="op" id="7815993">.</span><span class="ident" id="7815994">T</span><span class="op" id="7815995">)</span>&nbsp;<span class="op" id="7815997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816000">RemoveAll</span><span class="op" id="7816009">(</span><span class="op" id="7816010">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7816013">var</span>&nbsp;<span class="ident" id="7816017">x</span>&nbsp;<span class="keyword" id="7816019">interface</span><span class="op" id="7816028">{</span><span class="op" id="7816029">}</span>&nbsp;<span class="op" id="7816031">=</span>&nbsp;<span class="op" id="7816033">[</span><span class="op" id="7816034">]</span><span class="builtintype" id="7816035">string</span><span class="op" id="7816041">{</span><span class="string" id="7816042">&#34;a&#34;</span><span class="op" id="7816045">,</span>&nbsp;<span class="string" id="7816047">&#34;b&#34;</span><span class="op" id="7816050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816053">f</span>&nbsp;<span class="op" id="7816055">:=</span>&nbsp;<span class="ident" id="7816058">Func</span><span class="op" id="7816062">(</span><span class="keyword" id="7816063">func</span><span class="op" id="7816067">(</span><span class="op" id="7816068">)</span>&nbsp;<span class="keyword" id="7816070">interface</span><span class="op" id="7816079">{</span><span class="op" id="7816080">}</span>&nbsp;<span class="op" id="7816082">{</span>&nbsp;<span class="keyword" id="7816084">return</span>&nbsp;<span class="ident" id="7816091">x</span>&nbsp;<span class="op" id="7816093">}</span><span class="op" id="7816094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7816097">if</span>&nbsp;<span class="ident" id="7816100">s</span><span class="op" id="7816101">,</span>&nbsp;<span class="ident" id="7816103">exp</span>&nbsp;<span class="op" id="7816107">:=</span>&nbsp;<span class="ident" id="7816110">f</span><span class="op" id="7816111">.</span><span class="ident" id="7816112">String</span><span class="op" id="7816118">(</span><span class="op" id="7816119">)</span><span class="op" id="7816120">,</span>&nbsp;<span class="string" id="7816122">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="7816133">;</span>&nbsp;<span class="ident" id="7816135">s</span>&nbsp;<span class="op" id="7816137">!=</span>&nbsp;<span class="ident" id="7816140">exp</span>&nbsp;<span class="op" id="7816144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816148">t</span><span class="op" id="7816149">.</span><span class="ident" id="7816150">Errorf</span><span class="op" id="7816156">(</span><span class="string" id="7816157">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7816183">,</span>&nbsp;<span class="ident" id="7816185">s</span><span class="op" id="7816186">,</span>&nbsp;<span class="ident" id="7816188">exp</span><span class="op" id="7816191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7816194">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816198">x</span>&nbsp;<span class="op" id="7816200">=</span>&nbsp;<span class="num" id="7816202">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7816206">if</span>&nbsp;<span class="ident" id="7816209">s</span><span class="op" id="7816210">,</span>&nbsp;<span class="ident" id="7816212">exp</span>&nbsp;<span class="op" id="7816216">:=</span>&nbsp;<span class="ident" id="7816219">f</span><span class="op" id="7816220">.</span><span class="ident" id="7816221">String</span><span class="op" id="7816227">(</span><span class="op" id="7816228">)</span><span class="op" id="7816229">,</span>&nbsp;<span class="string" id="7816231">`17`</span><span class="op" id="7816235">;</span>&nbsp;<span class="ident" id="7816237">s</span>&nbsp;<span class="op" id="7816239">!=</span>&nbsp;<span class="ident" id="7816242">exp</span>&nbsp;<span class="op" id="7816246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816250">t</span><span class="op" id="7816251">.</span><span class="ident" id="7816252">Errorf</span><span class="op" id="7816258">(</span><span class="string" id="7816259">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7816285">,</span>&nbsp;<span class="ident" id="7816287">s</span><span class="op" id="7816288">,</span>&nbsp;<span class="ident" id="7816290">exp</span><span class="op" id="7816293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7816296">}</span><br>
<span class="lineno">145</span><span class="op" id="7816298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7816301">func</span>&nbsp;<span class="ident" id="7816306">TestHandler</span><span class="op" id="7816317">(</span><span class="ident" id="7816318">t</span>&nbsp;<span class="op" id="7816320">*</span><span class="ident" id="7816321">testing</span><span class="op" id="7816328">.</span><span class="ident" id="7816329">T</span><span class="op" id="7816330">)</span>&nbsp;<span class="op" id="7816332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816335">RemoveAll</span><span class="op" id="7816344">(</span><span class="op" id="7816345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816348">m</span>&nbsp;<span class="op" id="7816350">:=</span>&nbsp;<span class="ident" id="7816353">NewMap</span><span class="op" id="7816359">(</span><span class="string" id="7816360">&#34;map1&#34;</span><span class="op" id="7816366">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816369">m</span><span class="op" id="7816370">.</span><span class="ident" id="7816371">Add</span><span class="op" id="7816374">(</span><span class="string" id="7816375">&#34;a&#34;</span><span class="op" id="7816378">,</span>&nbsp;<span class="num" id="7816380">1</span><span class="op" id="7816381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816384">m</span><span class="op" id="7816385">.</span><span class="ident" id="7816386">Add</span><span class="op" id="7816389">(</span><span class="string" id="7816390">&#34;z&#34;</span><span class="op" id="7816393">,</span>&nbsp;<span class="num" id="7816395">2</span><span class="op" id="7816396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816399">m2</span>&nbsp;<span class="op" id="7816402">:=</span>&nbsp;<span class="ident" id="7816405">NewMap</span><span class="op" id="7816411">(</span><span class="string" id="7816412">&#34;map2&#34;</span><span class="op" id="7816418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7816421">for</span>&nbsp;<span class="ident" id="7816425">i</span>&nbsp;<span class="op" id="7816427">:=</span>&nbsp;<span class="num" id="7816430">0</span><span class="op" id="7816431">;</span>&nbsp;<span class="ident" id="7816433">i</span>&nbsp;<span class="op" id="7816435">&lt;</span>&nbsp;<span class="num" id="7816437">9</span><span class="op" id="7816438">;</span>&nbsp;<span class="ident" id="7816440">i</span><span class="op" id="7816441">++</span>&nbsp;<span class="op" id="7816444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816448">m2</span><span class="op" id="7816450">.</span><span class="ident" id="7816451">Add</span><span class="op" id="7816454">(</span><span class="ident" id="7816455">strconv</span><span class="op" id="7816462">.</span><span class="ident" id="7816463">Itoa</span><span class="op" id="7816467">(</span><span class="ident" id="7816468">i</span><span class="op" id="7816469">)</span><span class="op" id="7816470">,</span>&nbsp;<span class="ident" id="7816472">int64</span><span class="op" id="7816477">(</span><span class="ident" id="7816478">i</span><span class="op" id="7816479">)</span><span class="op" id="7816480">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7816483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816486">rr</span>&nbsp;<span class="op" id="7816489">:=</span>&nbsp;<span class="ident" id="7816492">httptest</span><span class="op" id="7816500">.</span><span class="ident" id="7816501">NewRecorder</span><span class="op" id="7816512">(</span><span class="op" id="7816513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816516">rr</span><span class="op" id="7816518">.</span><span class="ident" id="7816519">Body</span>&nbsp;<span class="op" id="7816524">=</span>&nbsp;<span class="builtinfunc" id="7816526">new</span><span class="op" id="7816529">(</span><span class="ident" id="7816530">bytes</span><span class="op" id="7816535">.</span><span class="ident" id="7816536">Buffer</span><span class="op" id="7816542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816545">expvarHandler</span><span class="op" id="7816558">(</span><span class="ident" id="7816559">rr</span><span class="op" id="7816561">,</span>&nbsp;<span class="ident" id="7816563">nil</span><span class="op" id="7816566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816569">want</span>&nbsp;<span class="op" id="7816574">:=</span>&nbsp;<span class="string" id="7816577">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7816692">if</span>&nbsp;<span class="ident" id="7816695">got</span>&nbsp;<span class="op" id="7816699">:=</span>&nbsp;<span class="ident" id="7816702">rr</span><span class="op" id="7816704">.</span><span class="ident" id="7816705">Body</span><span class="op" id="7816709">.</span><span class="ident" id="7816710">String</span><span class="op" id="7816716">(</span><span class="op" id="7816717">)</span><span class="op" id="7816718">;</span>&nbsp;<span class="ident" id="7816720">got</span>&nbsp;<span class="op" id="7816724">!=</span>&nbsp;<span class="ident" id="7816727">want</span>&nbsp;<span class="op" id="7816732">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7816736">t</span><span class="op" id="7816737">.</span><span class="ident" id="7816738">Errorf</span><span class="op" id="7816744">(</span><span class="string" id="7816745">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="7816781">,</span>&nbsp;<span class="ident" id="7816783">got</span><span class="op" id="7816786">,</span>&nbsp;<span class="ident" id="7816788">want</span><span class="op" id="7816792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7816795">}</span><br>
<span class="lineno"></span><span class="op" id="7816797">}</span>
</div>
</body>
</html>
