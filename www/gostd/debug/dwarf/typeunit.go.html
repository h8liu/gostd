<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5599743">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5599799">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5599853">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5599904">package</span>&nbsp;<span class="ident" id="5599912">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5599919">import</span>&nbsp;<span class="op" id="5599926">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5599929">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5599936">&#34;strconv&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5599946">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5599949">//&nbsp;Parse&nbsp;the&nbsp;type&nbsp;units&nbsp;stored&nbsp;in&nbsp;a&nbsp;DWARF4&nbsp;.debug_types&nbsp;section.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="5600020">//&nbsp;type&nbsp;unit&nbsp;defines&nbsp;a&nbsp;single&nbsp;primary&nbsp;type&nbsp;and&nbsp;an&nbsp;8-byte&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="5600088">//&nbsp;Other&nbsp;sections&nbsp;may&nbsp;then&nbsp;use&nbsp;formRefSig8&nbsp;to&nbsp;refer&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5600154">//&nbsp;The&nbsp;typeUnit&nbsp;format&nbsp;is&nbsp;a&nbsp;single&nbsp;type&nbsp;with&nbsp;a&nbsp;signature.&nbsp;&nbsp;It&nbsp;holds</span><br>
<span class="lineno"></span><span class="comment" id="5600222">//&nbsp;the&nbsp;same&nbsp;data&nbsp;as&nbsp;a&nbsp;compilation&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5600262">type</span>&nbsp;<span class="ident" id="5600267">typeUnit</span>&nbsp;<span class="keyword" id="5600276">struct</span>&nbsp;<span class="op" id="5600283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600286">unit</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600292">toff</span>&nbsp;&nbsp;<span class="ident" id="5600298">Offset</span>&nbsp;<span class="comment" id="5600305">//&nbsp;Offset&nbsp;to&nbsp;signature&nbsp;type&nbsp;within&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600347">name</span>&nbsp;&nbsp;<span class="builtintype" id="5600353">string</span>&nbsp;<span class="comment" id="5600360">//&nbsp;Name&nbsp;of&nbsp;.debug_type&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600393">cache</span>&nbsp;<span class="ident" id="5600399">Type</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5600406">//&nbsp;Cache&nbsp;the&nbsp;type,&nbsp;nil&nbsp;to&nbsp;start.</span><br>
<span class="lineno"></span><span class="op" id="5600439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5600442">//&nbsp;Parse&nbsp;a&nbsp;.debug_types&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5600475">func</span>&nbsp;<span class="op" id="5600480">(</span><span class="ident" id="5600481">d</span>&nbsp;<span class="op" id="5600483">*</span><span class="ident" id="5600484">Data</span><span class="op" id="5600488">)</span>&nbsp;<span class="ident" id="5600490">parseTypes</span><span class="op" id="5600500">(</span><span class="ident" id="5600501">name</span>&nbsp;<span class="builtintype" id="5600506">string</span><span class="op" id="5600512">,</span>&nbsp;<span class="ident" id="5600514">types</span>&nbsp;<span class="op" id="5600520">[</span><span class="op" id="5600521">]</span><span class="builtintype" id="5600522">byte</span><span class="op" id="5600526">)</span>&nbsp;<span class="builtintype" id="5600528">error</span>&nbsp;<span class="op" id="5600534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600537">b</span>&nbsp;<span class="op" id="5600539">:=</span>&nbsp;<span class="ident" id="5600542">makeBuf</span><span class="op" id="5600549">(</span><span class="ident" id="5600550">d</span><span class="op" id="5600551">,</span>&nbsp;<span class="ident" id="5600553">unknownFormat</span><span class="op" id="5600566">{</span><span class="op" id="5600567">}</span><span class="op" id="5600568">,</span>&nbsp;<span class="ident" id="5600570">name</span><span class="op" id="5600574">,</span>&nbsp;<span class="num" id="5600576">0</span><span class="op" id="5600577">,</span>&nbsp;<span class="ident" id="5600579">types</span><span class="op" id="5600584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5600587">for</span>&nbsp;<span class="builtinfunc" id="5600591">len</span><span class="op" id="5600594">(</span><span class="ident" id="5600595">b</span><span class="op" id="5600596">.</span><span class="ident" id="5600597">data</span><span class="op" id="5600601">)</span>&nbsp;<span class="op" id="5600603">&gt;</span>&nbsp;<span class="num" id="5600605">0</span>&nbsp;<span class="op" id="5600607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600611">base</span>&nbsp;<span class="op" id="5600616">:=</span>&nbsp;<span class="ident" id="5600619">b</span><span class="op" id="5600620">.</span><span class="ident" id="5600621">off</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600627">dwarf64</span>&nbsp;<span class="op" id="5600635">:=</span>&nbsp;<span class="builtintype" id="5600638">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600646">n</span>&nbsp;<span class="op" id="5600648">:=</span>&nbsp;<span class="ident" id="5600651">b</span><span class="op" id="5600652">.</span><span class="builtintype" id="5600653">uint32</span><span class="op" id="5600659">(</span><span class="op" id="5600660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5600664">if</span>&nbsp;<span class="ident" id="5600667">n</span>&nbsp;<span class="op" id="5600669">==</span>&nbsp;<span class="num" id="5600672">0xffffffff</span>&nbsp;<span class="op" id="5600683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600688">n64</span>&nbsp;<span class="op" id="5600692">:=</span>&nbsp;<span class="ident" id="5600695">b</span><span class="op" id="5600696">.</span><span class="ident" id="5600697">uint64</span><span class="op" id="5600703">(</span><span class="op" id="5600704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5600709">if</span>&nbsp;<span class="ident" id="5600712">n64</span>&nbsp;<span class="op" id="5600716">!=</span>&nbsp;<span class="ident" id="5600719">uint64</span><span class="op" id="5600725">(</span><span class="builtintype" id="5600726">uint32</span><span class="op" id="5600732">(</span><span class="ident" id="5600733">n64</span><span class="op" id="5600736">)</span><span class="op" id="5600737">)</span>&nbsp;<span class="op" id="5600739">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600745">b</span><span class="op" id="5600746">.</span><span class="builtintype" id="5600747">error</span><span class="op" id="5600752">(</span><span class="string" id="5600753">&#34;type&nbsp;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="5600780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5600786">return</span>&nbsp;<span class="ident" id="5600793">b</span><span class="op" id="5600794">.</span><span class="ident" id="5600795">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5600802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600807">n</span>&nbsp;<span class="op" id="5600809">=</span>&nbsp;<span class="builtintype" id="5600811">uint32</span><span class="op" id="5600817">(</span><span class="ident" id="5600818">n64</span><span class="op" id="5600821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600826">dwarf64</span>&nbsp;<span class="op" id="5600834">=</span>&nbsp;<span class="builtintype" id="5600836">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5600843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600847">hdroff</span>&nbsp;<span class="op" id="5600854">:=</span>&nbsp;<span class="ident" id="5600857">b</span><span class="op" id="5600858">.</span><span class="ident" id="5600859">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600865">vers</span>&nbsp;<span class="op" id="5600870">:=</span>&nbsp;<span class="ident" id="5600873">b</span><span class="op" id="5600874">.</span><span class="builtintype" id="5600875">uint16</span><span class="op" id="5600881">(</span><span class="op" id="5600882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5600886">if</span>&nbsp;<span class="ident" id="5600889">vers</span>&nbsp;<span class="op" id="5600894">!=</span>&nbsp;<span class="num" id="5600897">4</span>&nbsp;<span class="op" id="5600899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600904">b</span><span class="op" id="5600905">.</span><span class="builtintype" id="5600906">error</span><span class="op" id="5600911">(</span><span class="string" id="5600912">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="5600941">+</span>&nbsp;<span class="ident" id="5600943">strconv</span><span class="op" id="5600950">.</span><span class="ident" id="5600951">Itoa</span><span class="op" id="5600955">(</span><span class="builtintype" id="5600956">int</span><span class="op" id="5600959">(</span><span class="ident" id="5600960">vers</span><span class="op" id="5600964">)</span><span class="op" id="5600965">)</span><span class="op" id="5600966">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5600971">return</span>&nbsp;<span class="ident" id="5600978">b</span><span class="op" id="5600979">.</span><span class="ident" id="5600980">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5600986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5600990">var</span>&nbsp;<span class="ident" id="5600994">ao</span>&nbsp;<span class="builtintype" id="5600997">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5601006">if</span>&nbsp;<span class="op" id="5601009">!</span><span class="ident" id="5601010">dwarf64</span>&nbsp;<span class="op" id="5601018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601023">ao</span>&nbsp;<span class="op" id="5601026">=</span>&nbsp;<span class="ident" id="5601028">b</span><span class="op" id="5601029">.</span><span class="builtintype" id="5601030">uint32</span><span class="op" id="5601036">(</span><span class="op" id="5601037">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5601041">}</span>&nbsp;<span class="keyword" id="5601043">else</span>&nbsp;<span class="op" id="5601048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601053">ao64</span>&nbsp;<span class="op" id="5601058">:=</span>&nbsp;<span class="ident" id="5601061">b</span><span class="op" id="5601062">.</span><span class="ident" id="5601063">uint64</span><span class="op" id="5601069">(</span><span class="op" id="5601070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5601075">if</span>&nbsp;<span class="ident" id="5601078">ao64</span>&nbsp;<span class="op" id="5601083">!=</span>&nbsp;<span class="ident" id="5601086">uint64</span><span class="op" id="5601092">(</span><span class="builtintype" id="5601093">uint32</span><span class="op" id="5601099">(</span><span class="ident" id="5601100">ao64</span><span class="op" id="5601104">)</span><span class="op" id="5601105">)</span>&nbsp;<span class="op" id="5601107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601113">b</span><span class="op" id="5601114">.</span><span class="builtintype" id="5601115">error</span><span class="op" id="5601120">(</span><span class="string" id="5601121">&#34;type&nbsp;unit&nbsp;abbrev&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="5601155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5601161">return</span>&nbsp;<span class="ident" id="5601168">b</span><span class="op" id="5601169">.</span><span class="ident" id="5601170">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5601177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601182">ao</span>&nbsp;<span class="op" id="5601185">=</span>&nbsp;<span class="builtintype" id="5601187">uint32</span><span class="op" id="5601193">(</span><span class="ident" id="5601194">ao64</span><span class="op" id="5601198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5601202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601206">atable</span><span class="op" id="5601212">,</span>&nbsp;<span class="ident" id="5601214">err</span>&nbsp;<span class="op" id="5601218">:=</span>&nbsp;<span class="ident" id="5601221">d</span><span class="op" id="5601222">.</span><span class="ident" id="5601223">parseAbbrev</span><span class="op" id="5601234">(</span><span class="ident" id="5601235">ao</span><span class="op" id="5601237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5601241">if</span>&nbsp;<span class="ident" id="5601244">err</span>&nbsp;<span class="op" id="5601248">!=</span>&nbsp;<span class="ident" id="5601251">nil</span>&nbsp;<span class="op" id="5601255">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5601260">return</span>&nbsp;<span class="ident" id="5601267">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5601273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601277">asize</span>&nbsp;<span class="op" id="5601283">:=</span>&nbsp;<span class="ident" id="5601286">b</span><span class="op" id="5601287">.</span><span class="builtintype" id="5601288">uint8</span><span class="op" id="5601293">(</span><span class="op" id="5601294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601298">sig</span>&nbsp;<span class="op" id="5601302">:=</span>&nbsp;<span class="ident" id="5601305">b</span><span class="op" id="5601306">.</span><span class="ident" id="5601307">uint64</span><span class="op" id="5601313">(</span><span class="op" id="5601314">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5601319">var</span>&nbsp;<span class="ident" id="5601323">toff</span>&nbsp;<span class="builtintype" id="5601328">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5601337">if</span>&nbsp;<span class="op" id="5601340">!</span><span class="ident" id="5601341">dwarf64</span>&nbsp;<span class="op" id="5601349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601354">toff</span>&nbsp;<span class="op" id="5601359">=</span>&nbsp;<span class="ident" id="5601361">b</span><span class="op" id="5601362">.</span><span class="builtintype" id="5601363">uint32</span><span class="op" id="5601369">(</span><span class="op" id="5601370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5601374">}</span>&nbsp;<span class="keyword" id="5601376">else</span>&nbsp;<span class="op" id="5601381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601386">to64</span>&nbsp;<span class="op" id="5601391">:=</span>&nbsp;<span class="ident" id="5601394">b</span><span class="op" id="5601395">.</span><span class="ident" id="5601396">uint64</span><span class="op" id="5601402">(</span><span class="op" id="5601403">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5601408">if</span>&nbsp;<span class="ident" id="5601411">to64</span>&nbsp;<span class="op" id="5601416">!=</span>&nbsp;<span class="ident" id="5601419">uint64</span><span class="op" id="5601425">(</span><span class="builtintype" id="5601426">uint32</span><span class="op" id="5601432">(</span><span class="ident" id="5601433">to64</span><span class="op" id="5601437">)</span><span class="op" id="5601438">)</span>&nbsp;<span class="op" id="5601440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601446">b</span><span class="op" id="5601447">.</span><span class="builtintype" id="5601448">error</span><span class="op" id="5601453">(</span><span class="string" id="5601454">&#34;type&nbsp;unit&nbsp;type&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="5601486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5601492">return</span>&nbsp;<span class="ident" id="5601499">b</span><span class="op" id="5601500">.</span><span class="ident" id="5601501">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5601508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601513">toff</span>&nbsp;<span class="op" id="5601518">=</span>&nbsp;<span class="builtintype" id="5601520">uint32</span><span class="op" id="5601526">(</span><span class="ident" id="5601527">to64</span><span class="op" id="5601531">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5601535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601540">boff</span>&nbsp;<span class="op" id="5601545">:=</span>&nbsp;<span class="ident" id="5601548">b</span><span class="op" id="5601549">.</span><span class="ident" id="5601550">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601556">d</span><span class="op" id="5601557">.</span><span class="ident" id="5601558">typeSigs</span><span class="op" id="5601566">[</span><span class="ident" id="5601567">sig</span><span class="op" id="5601570">]</span>&nbsp;<span class="op" id="5601572">=</span>&nbsp;<span class="op" id="5601574">&amp;</span><span class="ident" id="5601575">typeUnit</span><span class="op" id="5601583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601588">unit</span><span class="op" id="5601592">:</span>&nbsp;<span class="ident" id="5601594">unit</span><span class="op" id="5601598">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601604">base</span><span class="op" id="5601608">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5601612">base</span><span class="op" id="5601616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601622">off</span><span class="op" id="5601625">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5601630">boff</span><span class="op" id="5601634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601640">data</span><span class="op" id="5601644">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5601648">b</span><span class="op" id="5601649">.</span><span class="ident" id="5601650">bytes</span><span class="op" id="5601655">(</span><span class="builtintype" id="5601656">int</span><span class="op" id="5601659">(</span><span class="ident" id="5601660">Offset</span><span class="op" id="5601666">(</span><span class="ident" id="5601667">n</span><span class="op" id="5601668">)</span>&nbsp;<span class="op" id="5601670">-</span>&nbsp;<span class="op" id="5601672">(</span><span class="ident" id="5601673">b</span><span class="op" id="5601674">.</span><span class="ident" id="5601675">off</span>&nbsp;<span class="op" id="5601679">-</span>&nbsp;<span class="ident" id="5601681">hdroff</span><span class="op" id="5601687">)</span><span class="op" id="5601688">)</span><span class="op" id="5601689">)</span><span class="op" id="5601690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601696">atable</span><span class="op" id="5601702">:</span>&nbsp;<span class="ident" id="5601704">atable</span><span class="op" id="5601710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601716">asize</span><span class="op" id="5601721">:</span>&nbsp;&nbsp;<span class="builtintype" id="5601724">int</span><span class="op" id="5601727">(</span><span class="ident" id="5601728">asize</span><span class="op" id="5601733">)</span><span class="op" id="5601734">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601740">vers</span><span class="op" id="5601744">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5601748">int</span><span class="op" id="5601751">(</span><span class="ident" id="5601752">vers</span><span class="op" id="5601756">)</span><span class="op" id="5601757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601763">is64</span><span class="op" id="5601767">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5601771">dwarf64</span><span class="op" id="5601778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5601783">}</span><span class="op" id="5601784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601789">toff</span><span class="op" id="5601793">:</span>&nbsp;<span class="ident" id="5601795">Offset</span><span class="op" id="5601801">(</span><span class="ident" id="5601802">toff</span><span class="op" id="5601806">)</span><span class="op" id="5601807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601812">name</span><span class="op" id="5601816">:</span>&nbsp;<span class="ident" id="5601818">name</span><span class="op" id="5601822">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5601826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5601830">if</span>&nbsp;<span class="ident" id="5601833">b</span><span class="op" id="5601834">.</span><span class="ident" id="5601835">err</span>&nbsp;<span class="op" id="5601839">!=</span>&nbsp;<span class="ident" id="5601842">nil</span>&nbsp;<span class="op" id="5601846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5601851">return</span>&nbsp;<span class="ident" id="5601858">b</span><span class="op" id="5601859">.</span><span class="ident" id="5601860">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5601866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5601869">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5601872">return</span>&nbsp;<span class="ident" id="5601879">nil</span><br>
<span class="lineno"></span><span class="op" id="5601883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5601886">//&nbsp;Return&nbsp;the&nbsp;type&nbsp;for&nbsp;a&nbsp;type&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="5601927">func</span>&nbsp;<span class="op" id="5601932">(</span><span class="ident" id="5601933">d</span>&nbsp;<span class="op" id="5601935">*</span><span class="ident" id="5601936">Data</span><span class="op" id="5601940">)</span>&nbsp;<span class="ident" id="5601942">sigToType</span><span class="op" id="5601951">(</span><span class="ident" id="5601952">sig</span>&nbsp;<span class="ident" id="5601956">uint64</span><span class="op" id="5601962">)</span>&nbsp;<span class="op" id="5601964">(</span><span class="ident" id="5601965">Type</span><span class="op" id="5601969">,</span>&nbsp;<span class="builtintype" id="5601971">error</span><span class="op" id="5601976">)</span>&nbsp;<span class="op" id="5601978">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601981">tu</span>&nbsp;<span class="op" id="5601984">:=</span>&nbsp;<span class="ident" id="5601987">d</span><span class="op" id="5601988">.</span><span class="ident" id="5601989">typeSigs</span><span class="op" id="5601997">[</span><span class="ident" id="5601998">sig</span><span class="op" id="5602001">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602004">if</span>&nbsp;<span class="ident" id="5602007">tu</span>&nbsp;<span class="op" id="5602010">==</span>&nbsp;<span class="ident" id="5602013">nil</span>&nbsp;<span class="op" id="5602017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602021">return</span>&nbsp;<span class="ident" id="5602028">nil</span><span class="op" id="5602031">,</span>&nbsp;<span class="ident" id="5602033">fmt</span><span class="op" id="5602036">.</span><span class="ident" id="5602037">Errorf</span><span class="op" id="5602043">(</span><span class="string" id="5602044">&#34;no&nbsp;type&nbsp;unit&nbsp;with&nbsp;signature&nbsp;%v&#34;</span><span class="op" id="5602076">,</span>&nbsp;<span class="ident" id="5602078">sig</span><span class="op" id="5602081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5602084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602087">if</span>&nbsp;<span class="ident" id="5602090">tu</span><span class="op" id="5602092">.</span><span class="ident" id="5602093">cache</span>&nbsp;<span class="op" id="5602099">!=</span>&nbsp;<span class="ident" id="5602102">nil</span>&nbsp;<span class="op" id="5602106">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602110">return</span>&nbsp;<span class="ident" id="5602117">tu</span><span class="op" id="5602119">.</span><span class="ident" id="5602120">cache</span><span class="op" id="5602125">,</span>&nbsp;<span class="ident" id="5602127">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5602132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602136">b</span>&nbsp;<span class="op" id="5602138">:=</span>&nbsp;<span class="ident" id="5602141">makeBuf</span><span class="op" id="5602148">(</span><span class="ident" id="5602149">d</span><span class="op" id="5602150">,</span>&nbsp;<span class="ident" id="5602152">tu</span><span class="op" id="5602154">,</span>&nbsp;<span class="ident" id="5602156">tu</span><span class="op" id="5602158">.</span><span class="ident" id="5602159">name</span><span class="op" id="5602163">,</span>&nbsp;<span class="ident" id="5602165">tu</span><span class="op" id="5602167">.</span><span class="ident" id="5602168">off</span><span class="op" id="5602171">,</span>&nbsp;<span class="ident" id="5602173">tu</span><span class="op" id="5602175">.</span><span class="ident" id="5602176">data</span><span class="op" id="5602180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602183">r</span>&nbsp;<span class="op" id="5602185">:=</span>&nbsp;<span class="op" id="5602188">&amp;</span><span class="ident" id="5602189">typeUnitReader</span><span class="op" id="5602203">{</span><span class="ident" id="5602204">d</span><span class="op" id="5602205">:</span>&nbsp;<span class="ident" id="5602207">d</span><span class="op" id="5602208">,</span>&nbsp;<span class="ident" id="5602210">tu</span><span class="op" id="5602212">:</span>&nbsp;<span class="ident" id="5602214">tu</span><span class="op" id="5602216">,</span>&nbsp;<span class="ident" id="5602218">b</span><span class="op" id="5602219">:</span>&nbsp;<span class="ident" id="5602221">b</span><span class="op" id="5602222">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602225">t</span><span class="op" id="5602226">,</span>&nbsp;<span class="ident" id="5602228">err</span>&nbsp;<span class="op" id="5602232">:=</span>&nbsp;<span class="ident" id="5602235">d</span><span class="op" id="5602236">.</span><span class="ident" id="5602237">readType</span><span class="op" id="5602245">(</span><span class="ident" id="5602246">tu</span><span class="op" id="5602248">.</span><span class="ident" id="5602249">name</span><span class="op" id="5602253">,</span>&nbsp;<span class="ident" id="5602255">r</span><span class="op" id="5602256">,</span>&nbsp;<span class="ident" id="5602258">Offset</span><span class="op" id="5602264">(</span><span class="ident" id="5602265">tu</span><span class="op" id="5602267">.</span><span class="ident" id="5602268">toff</span><span class="op" id="5602272">)</span><span class="op" id="5602273">,</span>&nbsp;<span class="builtinfunc" id="5602275">make</span><span class="op" id="5602279">(</span><span class="keyword" id="5602280">map</span><span class="op" id="5602283">[</span><span class="ident" id="5602284">Offset</span><span class="op" id="5602290">]</span><span class="ident" id="5602291">Type</span><span class="op" id="5602295">)</span><span class="op" id="5602296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602299">if</span>&nbsp;<span class="ident" id="5602302">err</span>&nbsp;<span class="op" id="5602306">!=</span>&nbsp;<span class="ident" id="5602309">nil</span>&nbsp;<span class="op" id="5602313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602317">return</span>&nbsp;<span class="ident" id="5602324">nil</span><span class="op" id="5602327">,</span>&nbsp;<span class="ident" id="5602329">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5602334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602338">tu</span><span class="op" id="5602340">.</span><span class="ident" id="5602341">cache</span>&nbsp;<span class="op" id="5602347">=</span>&nbsp;<span class="ident" id="5602349">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602352">return</span>&nbsp;<span class="ident" id="5602359">t</span><span class="op" id="5602360">,</span>&nbsp;<span class="ident" id="5602362">nil</span><br>
<span class="lineno"></span><span class="op" id="5602366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5602369">//&nbsp;typeUnitReader&nbsp;is&nbsp;a&nbsp;typeReader&nbsp;for&nbsp;a&nbsp;tagTypeUnit.</span><br>
<span class="lineno">120</span><span class="keyword" id="5602422">type</span>&nbsp;<span class="ident" id="5602427">typeUnitReader</span>&nbsp;<span class="keyword" id="5602442">struct</span>&nbsp;<span class="op" id="5602449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602452">d</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5602456">*</span><span class="ident" id="5602457">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602463">tu</span>&nbsp;&nbsp;<span class="op" id="5602467">*</span><span class="ident" id="5602468">typeUnit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602478">b</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5602482">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602487">err</span>&nbsp;<span class="builtintype" id="5602491">error</span><br>
<span class="lineno">125</span><span class="op" id="5602497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5602500">//&nbsp;Seek&nbsp;to&nbsp;a&nbsp;new&nbsp;position&nbsp;in&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5602544">func</span>&nbsp;<span class="op" id="5602549">(</span><span class="ident" id="5602550">tur</span>&nbsp;<span class="op" id="5602554">*</span><span class="ident" id="5602555">typeUnitReader</span><span class="op" id="5602569">)</span>&nbsp;<span class="ident" id="5602571">Seek</span><span class="op" id="5602575">(</span><span class="ident" id="5602576">off</span>&nbsp;<span class="ident" id="5602580">Offset</span><span class="op" id="5602586">)</span>&nbsp;<span class="op" id="5602588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602591">tur</span><span class="op" id="5602594">.</span><span class="ident" id="5602595">err</span>&nbsp;<span class="op" id="5602599">=</span>&nbsp;<span class="ident" id="5602601">nil</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602606">doff</span>&nbsp;<span class="op" id="5602611">:=</span>&nbsp;<span class="ident" id="5602614">off</span>&nbsp;<span class="op" id="5602618">-</span>&nbsp;<span class="ident" id="5602620">tur</span><span class="op" id="5602623">.</span><span class="ident" id="5602624">tu</span><span class="op" id="5602626">.</span><span class="ident" id="5602627">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602632">if</span>&nbsp;<span class="ident" id="5602635">doff</span>&nbsp;<span class="op" id="5602640">&lt;</span>&nbsp;<span class="num" id="5602642">0</span>&nbsp;<span class="op" id="5602644">||</span>&nbsp;<span class="ident" id="5602647">doff</span>&nbsp;<span class="op" id="5602652">&gt;=</span>&nbsp;<span class="ident" id="5602655">Offset</span><span class="op" id="5602661">(</span><span class="builtinfunc" id="5602662">len</span><span class="op" id="5602665">(</span><span class="ident" id="5602666">tur</span><span class="op" id="5602669">.</span><span class="ident" id="5602670">tu</span><span class="op" id="5602672">.</span><span class="ident" id="5602673">data</span><span class="op" id="5602677">)</span><span class="op" id="5602678">)</span>&nbsp;<span class="op" id="5602680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602684">tur</span><span class="op" id="5602687">.</span><span class="ident" id="5602688">err</span>&nbsp;<span class="op" id="5602692">=</span>&nbsp;<span class="ident" id="5602694">fmt</span><span class="op" id="5602697">.</span><span class="ident" id="5602698">Errorf</span><span class="op" id="5602704">(</span><span class="string" id="5602705">&#34;%s:&nbsp;offset&nbsp;%d&nbsp;out&nbsp;of&nbsp;range;&nbsp;max&nbsp;%d&#34;</span><span class="op" id="5602741">,</span>&nbsp;<span class="ident" id="5602743">tur</span><span class="op" id="5602746">.</span><span class="ident" id="5602747">tu</span><span class="op" id="5602749">.</span><span class="ident" id="5602750">name</span><span class="op" id="5602754">,</span>&nbsp;<span class="ident" id="5602756">doff</span><span class="op" id="5602760">,</span>&nbsp;<span class="builtinfunc" id="5602762">len</span><span class="op" id="5602765">(</span><span class="ident" id="5602766">tur</span><span class="op" id="5602769">.</span><span class="ident" id="5602770">tu</span><span class="op" id="5602772">.</span><span class="ident" id="5602773">data</span><span class="op" id="5602777">)</span><span class="op" id="5602778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602782">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5602790">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602793">tur</span><span class="op" id="5602796">.</span><span class="ident" id="5602797">b</span>&nbsp;<span class="op" id="5602799">=</span>&nbsp;<span class="ident" id="5602801">makeBuf</span><span class="op" id="5602808">(</span><span class="ident" id="5602809">tur</span><span class="op" id="5602812">.</span><span class="ident" id="5602813">d</span><span class="op" id="5602814">,</span>&nbsp;<span class="ident" id="5602816">tur</span><span class="op" id="5602819">.</span><span class="ident" id="5602820">tu</span><span class="op" id="5602822">,</span>&nbsp;<span class="ident" id="5602824">tur</span><span class="op" id="5602827">.</span><span class="ident" id="5602828">tu</span><span class="op" id="5602830">.</span><span class="ident" id="5602831">name</span><span class="op" id="5602835">,</span>&nbsp;<span class="ident" id="5602837">off</span><span class="op" id="5602840">,</span>&nbsp;<span class="ident" id="5602842">tur</span><span class="op" id="5602845">.</span><span class="ident" id="5602846">tu</span><span class="op" id="5602848">.</span><span class="ident" id="5602849">data</span><span class="op" id="5602853">[</span><span class="ident" id="5602854">doff</span><span class="op" id="5602858">:</span><span class="op" id="5602859">]</span><span class="op" id="5602860">)</span><br>
<span class="lineno"></span><span class="op" id="5602862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5602865">//&nbsp;Next&nbsp;reads&nbsp;the&nbsp;next&nbsp;Entry&nbsp;from&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5602914">func</span>&nbsp;<span class="op" id="5602919">(</span><span class="ident" id="5602920">tur</span>&nbsp;<span class="op" id="5602924">*</span><span class="ident" id="5602925">typeUnitReader</span><span class="op" id="5602939">)</span>&nbsp;<span class="ident" id="5602941">Next</span><span class="op" id="5602945">(</span><span class="op" id="5602946">)</span>&nbsp;<span class="op" id="5602948">(</span><span class="op" id="5602949">*</span><span class="ident" id="5602950">Entry</span><span class="op" id="5602955">,</span>&nbsp;<span class="builtintype" id="5602957">error</span><span class="op" id="5602962">)</span>&nbsp;<span class="op" id="5602964">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602967">if</span>&nbsp;<span class="ident" id="5602970">tur</span><span class="op" id="5602973">.</span><span class="ident" id="5602974">err</span>&nbsp;<span class="op" id="5602978">!=</span>&nbsp;<span class="ident" id="5602981">nil</span>&nbsp;<span class="op" id="5602985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602989">return</span>&nbsp;<span class="ident" id="5602996">nil</span><span class="op" id="5602999">,</span>&nbsp;<span class="ident" id="5603001">tur</span><span class="op" id="5603004">.</span><span class="ident" id="5603005">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603013">if</span>&nbsp;<span class="builtinfunc" id="5603016">len</span><span class="op" id="5603019">(</span><span class="ident" id="5603020">tur</span><span class="op" id="5603023">.</span><span class="ident" id="5603024">tu</span><span class="op" id="5603026">.</span><span class="ident" id="5603027">data</span><span class="op" id="5603031">)</span>&nbsp;<span class="op" id="5603033">==</span>&nbsp;<span class="num" id="5603036">0</span>&nbsp;<span class="op" id="5603038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603042">return</span>&nbsp;<span class="ident" id="5603049">nil</span><span class="op" id="5603052">,</span>&nbsp;<span class="ident" id="5603054">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603062">e</span>&nbsp;<span class="op" id="5603064">:=</span>&nbsp;<span class="ident" id="5603067">tur</span><span class="op" id="5603070">.</span><span class="ident" id="5603071">b</span><span class="op" id="5603072">.</span><span class="ident" id="5603073">entry</span><span class="op" id="5603078">(</span><span class="ident" id="5603079">tur</span><span class="op" id="5603082">.</span><span class="ident" id="5603083">tu</span><span class="op" id="5603085">.</span><span class="ident" id="5603086">atable</span><span class="op" id="5603092">,</span>&nbsp;<span class="ident" id="5603094">tur</span><span class="op" id="5603097">.</span><span class="ident" id="5603098">tu</span><span class="op" id="5603100">.</span><span class="ident" id="5603101">base</span><span class="op" id="5603105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603108">if</span>&nbsp;<span class="ident" id="5603111">tur</span><span class="op" id="5603114">.</span><span class="ident" id="5603115">b</span><span class="op" id="5603116">.</span><span class="ident" id="5603117">err</span>&nbsp;<span class="op" id="5603121">!=</span>&nbsp;<span class="ident" id="5603124">nil</span>&nbsp;<span class="op" id="5603128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603132">tur</span><span class="op" id="5603135">.</span><span class="ident" id="5603136">err</span>&nbsp;<span class="op" id="5603140">=</span>&nbsp;<span class="ident" id="5603142">tur</span><span class="op" id="5603145">.</span><span class="ident" id="5603146">b</span><span class="op" id="5603147">.</span><span class="ident" id="5603148">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603154">return</span>&nbsp;<span class="ident" id="5603161">nil</span><span class="op" id="5603164">,</span>&nbsp;<span class="ident" id="5603166">tur</span><span class="op" id="5603169">.</span><span class="ident" id="5603170">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603178">return</span>&nbsp;<span class="ident" id="5603185">e</span><span class="op" id="5603186">,</span>&nbsp;<span class="ident" id="5603188">nil</span><br>
<span class="lineno"></span><span class="op" id="5603192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5603195">//&nbsp;clone&nbsp;returns&nbsp;a&nbsp;new&nbsp;reader&nbsp;for&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno">155</span><span class="keyword" id="5603244">func</span>&nbsp;<span class="op" id="5603249">(</span><span class="ident" id="5603250">tur</span>&nbsp;<span class="op" id="5603254">*</span><span class="ident" id="5603255">typeUnitReader</span><span class="op" id="5603269">)</span>&nbsp;<span class="ident" id="5603271">clone</span><span class="op" id="5603276">(</span><span class="op" id="5603277">)</span>&nbsp;<span class="ident" id="5603279">typeReader</span>&nbsp;<span class="op" id="5603290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603293">return</span>&nbsp;<span class="op" id="5603300">&amp;</span><span class="ident" id="5603301">typeUnitReader</span><span class="op" id="5603315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603319">d</span><span class="op" id="5603320">:</span>&nbsp;&nbsp;<span class="ident" id="5603323">tur</span><span class="op" id="5603326">.</span><span class="ident" id="5603327">d</span><span class="op" id="5603328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603332">tu</span><span class="op" id="5603334">:</span>&nbsp;<span class="ident" id="5603336">tur</span><span class="op" id="5603339">.</span><span class="ident" id="5603340">tu</span><span class="op" id="5603342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603346">b</span><span class="op" id="5603347">:</span>&nbsp;&nbsp;<span class="ident" id="5603350">makeBuf</span><span class="op" id="5603357">(</span><span class="ident" id="5603358">tur</span><span class="op" id="5603361">.</span><span class="ident" id="5603362">d</span><span class="op" id="5603363">,</span>&nbsp;<span class="ident" id="5603365">tur</span><span class="op" id="5603368">.</span><span class="ident" id="5603369">tu</span><span class="op" id="5603371">,</span>&nbsp;<span class="ident" id="5603373">tur</span><span class="op" id="5603376">.</span><span class="ident" id="5603377">tu</span><span class="op" id="5603379">.</span><span class="ident" id="5603380">name</span><span class="op" id="5603384">,</span>&nbsp;<span class="ident" id="5603386">tur</span><span class="op" id="5603389">.</span><span class="ident" id="5603390">tu</span><span class="op" id="5603392">.</span><span class="ident" id="5603393">off</span><span class="op" id="5603396">,</span>&nbsp;<span class="ident" id="5603398">tur</span><span class="op" id="5603401">.</span><span class="ident" id="5603402">tu</span><span class="op" id="5603404">.</span><span class="ident" id="5603405">data</span><span class="op" id="5603409">)</span><span class="op" id="5603410">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603413">}</span><br>
<span class="lineno"></span><span class="op" id="5603415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5603418">//&nbsp;offset&nbsp;returns&nbsp;the&nbsp;current&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="5603456">func</span>&nbsp;<span class="op" id="5603461">(</span><span class="ident" id="5603462">tur</span>&nbsp;<span class="op" id="5603466">*</span><span class="ident" id="5603467">typeUnitReader</span><span class="op" id="5603481">)</span>&nbsp;<span class="ident" id="5603483">offset</span><span class="op" id="5603489">(</span><span class="op" id="5603490">)</span>&nbsp;<span class="ident" id="5603492">Offset</span>&nbsp;<span class="op" id="5603499">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603502">return</span>&nbsp;<span class="ident" id="5603509">tur</span><span class="op" id="5603512">.</span><span class="ident" id="5603513">b</span><span class="op" id="5603514">.</span><span class="ident" id="5603515">off</span><br>
<span class="lineno"></span><span class="op" id="5603519">}</span>
</div>
</body>
</html>
