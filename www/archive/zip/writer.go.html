<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6411127">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6411182">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6411236">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6411287">package</span>&nbsp;<span class="ident" id="6411295">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6411300">import</span>&nbsp;<span class="op" id="6411307">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6411310">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6411319">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6411338">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6411348">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6411356">&#34;hash/crc32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6411370">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="6411375">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6411378">//&nbsp;TODO(adg):&nbsp;support&nbsp;zip&nbsp;file&nbsp;comments</span><br>
<span class="lineno"></span><span class="comment" id="6411418">//&nbsp;TODO(adg):&nbsp;support&nbsp;specifying&nbsp;deflate&nbsp;level</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6411466">//&nbsp;Writer&nbsp;implements&nbsp;a&nbsp;zip&nbsp;file&nbsp;writer.</span><br>
<span class="lineno">20</span><span class="keyword" id="6411506">type</span>&nbsp;<span class="ident" id="6411511">Writer</span>&nbsp;<span class="keyword" id="6411518">struct</span>&nbsp;<span class="op" id="6411525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6411528">cw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6411535">*</span><span class="ident" id="6411536"><a href="/archive/zip/writer.go.html#6420164">countWriter</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6411549">dir</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6411556">[</span><span class="op" id="6411557">]</span><span class="op" id="6411558">*</span><span class="ident" id="6411559"><a href="/archive/zip/writer.go.html#6411607">header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6411567">last</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6411574">*</span><span class="ident" id="6411575"><a href="/archive/zip/writer.go.html#6418413">fileWriter</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6411587">closed</span>&nbsp;<span class="builtintype" id="6411594">bool</span><br>
<span class="lineno">25</span><span class="op" id="6411599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6411602">type</span>&nbsp;<span class="ident" id="6411607">header</span>&nbsp;<span class="keyword" id="6411614">struct</span>&nbsp;<span class="op" id="6411621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6411624">*</span><span class="ident" id="6411625"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6411637">offset</span>&nbsp;<span class="ident" id="6411644">uint64</span><br>
<span class="lineno">30</span><span class="op" id="6411651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6411654">//&nbsp;NewWriter&nbsp;returns&nbsp;a&nbsp;new&nbsp;Writer&nbsp;writing&nbsp;a&nbsp;zip&nbsp;file&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="6411713">func</span>&nbsp;<span class="ident" id="6411718">NewWriter</span><span class="op" id="6411727">(</span><span class="ident" id="6411728">w</span>&nbsp;<span class="ident" id="6411730"><a href="/archive/zip/writer.go.html#6411370">io</a></span><span class="op" id="6411732">.</span><span class="ident" id="6411733">Writer</span><span class="op" id="6411739">)</span>&nbsp;<span class="op" id="6411741">*</span><span class="ident" id="6411742"><a href="/archive/zip/writer.go.html#6411511">Writer</a></span>&nbsp;<span class="op" id="6411749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411752">return</span>&nbsp;<span class="op" id="6411759">&amp;</span><span class="ident" id="6411760"><a href="/archive/zip/writer.go.html#6411511">Writer</a></span><span class="op" id="6411766">{</span><span class="ident" id="6411767">cw</span><span class="op" id="6411769">:</span>&nbsp;<span class="op" id="6411771">&amp;</span><span class="ident" id="6411772"><a href="/archive/zip/writer.go.html#6420164">countWriter</a></span><span class="op" id="6411783">{</span><span class="ident" id="6411784">w</span><span class="op" id="6411785">:</span>&nbsp;<span class="ident" id="6411787"><a href="/archive/zip/writer.go.html#6411310">bufio</a></span><span class="op" id="6411792">.</span><span class="ident" id="6411793">NewWriter</span><span class="op" id="6411802">(</span><span class="ident" id="6411803"><a href="/archive/zip/writer.go.html#6411728">w</a></span><span class="op" id="6411804">)</span><span class="op" id="6411805">}</span><span class="op" id="6411806">}</span><br>
<span class="lineno">35</span><span class="op" id="6411808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6411811">//&nbsp;Flush&nbsp;flushes&nbsp;any&nbsp;buffered&nbsp;data&nbsp;to&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno"></span><span class="comment" id="6411872">//&nbsp;Calling&nbsp;Flush&nbsp;is&nbsp;not&nbsp;normally&nbsp;necessary;&nbsp;calling&nbsp;Close&nbsp;is&nbsp;sufficient.</span><br>
<span class="lineno"></span><span class="keyword" id="6411945">func</span>&nbsp;<span class="op" id="6411950">(</span><span class="ident" id="6411951">w</span>&nbsp;<span class="op" id="6411953">*</span><span class="ident" id="6411954"><a href="/archive/zip/writer.go.html#6411511">Writer</a></span><span class="op" id="6411960">)</span>&nbsp;<span class="ident" id="6411962">Flush</span><span class="op" id="6411967">(</span><span class="op" id="6411968">)</span>&nbsp;<span class="builtintype" id="6411970">error</span>&nbsp;<span class="op" id="6411976">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411979">return</span>&nbsp;<span class="ident" id="6411986"><a href="/archive/zip/writer.go.html#6411951">w</a></span><span class="op" id="6411987">.</span><span class="ident" id="6411988">cw</span><span class="op" id="6411990">.</span><span class="ident" id="6411991">w</span><span class="op" id="6411992">.</span><span class="op" id="6411993">(</span><span class="op" id="6411994">*</span><span class="ident" id="6411995"><a href="/archive/zip/writer.go.html#6411310">bufio</a></span><span class="op" id="6412000">.</span><span class="ident" id="6412001">Writer</span><span class="op" id="6412007">)</span><span class="op" id="6412008">.</span><span class="ident" id="6412009">Flush</span><span class="op" id="6412014">(</span><span class="op" id="6412015">)</span><br>
<span class="lineno"></span><span class="op" id="6412017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6412020">//&nbsp;Close&nbsp;finishes&nbsp;writing&nbsp;the&nbsp;zip&nbsp;file&nbsp;by&nbsp;writing&nbsp;the&nbsp;central&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="6412093">//&nbsp;It&nbsp;does&nbsp;not&nbsp;(and&nbsp;can&nbsp;not)&nbsp;close&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno">45</span><span class="keyword" id="6412151">func</span>&nbsp;<span class="op" id="6412156">(</span><span class="ident" id="6412157">w</span>&nbsp;<span class="op" id="6412159">*</span><span class="ident" id="6412160"><a href="/archive/zip/writer.go.html#6411511">Writer</a></span><span class="op" id="6412166">)</span>&nbsp;<span class="ident" id="6412168">Close</span><span class="op" id="6412173">(</span><span class="op" id="6412174">)</span>&nbsp;<span class="builtintype" id="6412176">error</span>&nbsp;<span class="op" id="6412182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412185">if</span>&nbsp;<span class="ident" id="6412188"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6412189">.</span><span class="ident" id="6412190">last</span>&nbsp;<span class="op" id="6412195">!=</span>&nbsp;<span class="ident" id="6412198">nil</span>&nbsp;<span class="op" id="6412202">&amp;&amp;</span>&nbsp;<span class="op" id="6412205">!</span><span class="ident" id="6412206"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6412207">.</span><span class="ident" id="6412208">last</span><span class="op" id="6412212">.</span><span class="ident" id="6412213">closed</span>&nbsp;<span class="op" id="6412220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412224">if</span>&nbsp;<span class="ident" id="6412227">err</span>&nbsp;<span class="op" id="6412231">:=</span>&nbsp;<span class="ident" id="6412234"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6412235">.</span><span class="ident" id="6412236">last</span><span class="op" id="6412240">.</span><span class="builtinfunc" id="6412241">close</span><span class="op" id="6412246">(</span><span class="op" id="6412247">)</span><span class="op" id="6412248">;</span>&nbsp;<span class="ident" id="6412250"><a href="/archive/zip/writer.go.html#6412227">err</a></span>&nbsp;<span class="op" id="6412254">!=</span>&nbsp;<span class="ident" id="6412257">nil</span>&nbsp;<span class="op" id="6412261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412266">return</span>&nbsp;<span class="ident" id="6412273"><a href="/archive/zip/writer.go.html#6412227">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6412279">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412283"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6412284">.</span><span class="ident" id="6412285">last</span>&nbsp;<span class="op" id="6412290">=</span>&nbsp;<span class="ident" id="6412292">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6412297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412300">if</span>&nbsp;<span class="ident" id="6412303"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6412304">.</span><span class="ident" id="6412305">closed</span>&nbsp;<span class="op" id="6412312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412316">return</span>&nbsp;<span class="ident" id="6412323"><a href="/archive/zip/writer.go.html#6411338">errors</a></span><span class="op" id="6412329">.</span><span class="ident" id="6412330">New</span><span class="op" id="6412333">(</span><span class="string" id="6412334">&#34;zip:&nbsp;writer&nbsp;closed&nbsp;twice&#34;</span><span class="op" id="6412360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6412363">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412366"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6412367">.</span><span class="ident" id="6412368">closed</span>&nbsp;<span class="op" id="6412375">=</span>&nbsp;<span class="ident" id="6412377">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6412384">//&nbsp;write&nbsp;central&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412412">start</span>&nbsp;<span class="op" id="6412418">:=</span>&nbsp;<span class="ident" id="6412421"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6412422">.</span><span class="ident" id="6412423">cw</span><span class="op" id="6412425">.</span><span class="ident" id="6412426">count</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412433">for</span>&nbsp;<span class="ident" id="6412437">_</span><span class="op" id="6412438">,</span>&nbsp;<span class="ident" id="6412440">h</span>&nbsp;<span class="op" id="6412442">:=</span>&nbsp;<span class="keyword" id="6412445">range</span>&nbsp;<span class="ident" id="6412451"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6412452">.</span><span class="ident" id="6412453">dir</span>&nbsp;<span class="op" id="6412457">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412461">var</span>&nbsp;<span class="ident" id="6412465">buf</span>&nbsp;<span class="op" id="6412469">[</span><span class="ident" id="6412470"><a href="/archive/zip/struct.go.html#6403782">directoryHeaderLen</a></span><span class="op" id="6412488">]</span><span class="builtintype" id="6412489">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412496">b</span>&nbsp;<span class="op" id="6412498">:=</span>&nbsp;<span class="ident" id="6412501"><a href="/archive/zip/writer.go.html#6420427">writeBuf</a></span><span class="op" id="6412509">(</span><span class="ident" id="6412510"><a href="/archive/zip/writer.go.html#6412465">buf</a></span><span class="op" id="6412513">[</span><span class="op" id="6412514">:</span><span class="op" id="6412515">]</span><span class="op" id="6412516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412520"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6412521">.</span><span class="builtintype" id="6412522">uint32</span><span class="op" id="6412528">(</span><span class="builtintype" id="6412529">uint32</span><span class="op" id="6412535">(</span><span class="ident" id="6412536"><a href="/archive/zip/struct.go.html#6403480">directoryHeaderSignature</a></span><span class="op" id="6412560">)</span><span class="op" id="6412561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412565"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6412566">.</span><span class="builtintype" id="6412567">uint16</span><span class="op" id="6412573">(</span><span class="ident" id="6412574"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6412575">.</span><span class="ident" id="6412576">CreatorVersion</span><span class="op" id="6412590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412594"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6412595">.</span><span class="builtintype" id="6412596">uint16</span><span class="op" id="6412602">(</span><span class="ident" id="6412603"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6412604">.</span><span class="ident" id="6412605">ReaderVersion</span><span class="op" id="6412618">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412622"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6412623">.</span><span class="builtintype" id="6412624">uint16</span><span class="op" id="6412630">(</span><span class="ident" id="6412631"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6412632">.</span><span class="ident" id="6412633">Flags</span><span class="op" id="6412638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412642"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6412643">.</span><span class="builtintype" id="6412644">uint16</span><span class="op" id="6412650">(</span><span class="ident" id="6412651"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6412652">.</span><span class="ident" id="6412653">Method</span><span class="op" id="6412659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412663"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6412664">.</span><span class="builtintype" id="6412665">uint16</span><span class="op" id="6412671">(</span><span class="ident" id="6412672"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6412673">.</span><span class="ident" id="6412674">ModifiedTime</span><span class="op" id="6412686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412690"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6412691">.</span><span class="builtintype" id="6412692">uint16</span><span class="op" id="6412698">(</span><span class="ident" id="6412699"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6412700">.</span><span class="ident" id="6412701">ModifiedDate</span><span class="op" id="6412713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412717"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6412718">.</span><span class="builtintype" id="6412719">uint32</span><span class="op" id="6412725">(</span><span class="ident" id="6412726"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6412727">.</span><span class="ident" id="6412728">CRC32</span><span class="op" id="6412733">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412737">if</span>&nbsp;<span class="ident" id="6412740"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6412741">.</span><span class="ident" id="6412742">isZip64</span><span class="op" id="6412749">(</span><span class="op" id="6412750">)</span>&nbsp;<span class="op" id="6412752">||</span>&nbsp;<span class="ident" id="6412755"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6412756">.</span><span class="ident" id="6412757">offset</span>&nbsp;<span class="op" id="6412764">&gt;</span>&nbsp;<span class="ident" id="6412766"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span>&nbsp;<span class="op" id="6412776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6412781">//&nbsp;the&nbsp;file&nbsp;needs&nbsp;a&nbsp;zip64&nbsp;header.&nbsp;store&nbsp;maxint&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6412839">//&nbsp;32&nbsp;bit&nbsp;size&nbsp;fields&nbsp;(and&nbsp;offset&nbsp;later)&nbsp;to&nbsp;signal&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6412902">//&nbsp;zip64&nbsp;extra&nbsp;header&nbsp;should&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412943"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6412944">.</span><span class="builtintype" id="6412945">uint32</span><span class="op" id="6412951">(</span><span class="ident" id="6412952"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span><span class="op" id="6412961">)</span>&nbsp;<span class="comment" id="6412963">//&nbsp;compressed&nbsp;size</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412985"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6412986">.</span><span class="builtintype" id="6412987">uint32</span><span class="op" id="6412993">(</span><span class="ident" id="6412994"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span><span class="op" id="6413003">)</span>&nbsp;<span class="comment" id="6413005">//&nbsp;uncompressed&nbsp;size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6413030">//&nbsp;append&nbsp;a&nbsp;zip64&nbsp;extra&nbsp;block&nbsp;to&nbsp;Extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413072">var</span>&nbsp;<span class="ident" id="6413076">buf</span>&nbsp;<span class="op" id="6413080">[</span><span class="num" id="6413081">28</span><span class="op" id="6413083">]</span><span class="builtintype" id="6413084">byte</span>&nbsp;<span class="comment" id="6413089">//&nbsp;2x&nbsp;uint16&nbsp;+&nbsp;3x&nbsp;uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413117">eb</span>&nbsp;<span class="op" id="6413120">:=</span>&nbsp;<span class="ident" id="6413123"><a href="/archive/zip/writer.go.html#6420427">writeBuf</a></span><span class="op" id="6413131">(</span><span class="ident" id="6413132"><a href="/archive/zip/writer.go.html#6413076">buf</a></span><span class="op" id="6413135">[</span><span class="op" id="6413136">:</span><span class="op" id="6413137">]</span><span class="op" id="6413138">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413143"><a href="/archive/zip/writer.go.html#6413117">eb</a></span><span class="op" id="6413145">.</span><span class="builtintype" id="6413146">uint16</span><span class="op" id="6413152">(</span><span class="ident" id="6413153"><a href="/archive/zip/struct.go.html#6404540">zip64ExtraId</a></span><span class="op" id="6413165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413170"><a href="/archive/zip/writer.go.html#6413117">eb</a></span><span class="op" id="6413172">.</span><span class="builtintype" id="6413173">uint16</span><span class="op" id="6413179">(</span><span class="num" id="6413180">24</span><span class="op" id="6413182">)</span>&nbsp;<span class="comment" id="6413184">//&nbsp;size&nbsp;=&nbsp;3x&nbsp;uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413207"><a href="/archive/zip/writer.go.html#6413117">eb</a></span><span class="op" id="6413209">.</span><span class="ident" id="6413210">uint64</span><span class="op" id="6413216">(</span><span class="ident" id="6413217"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413218">.</span><span class="ident" id="6413219">UncompressedSize64</span><span class="op" id="6413237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413242"><a href="/archive/zip/writer.go.html#6413117">eb</a></span><span class="op" id="6413244">.</span><span class="ident" id="6413245">uint64</span><span class="op" id="6413251">(</span><span class="ident" id="6413252"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413253">.</span><span class="ident" id="6413254">CompressedSize64</span><span class="op" id="6413270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413275"><a href="/archive/zip/writer.go.html#6413117">eb</a></span><span class="op" id="6413277">.</span><span class="ident" id="6413278">uint64</span><span class="op" id="6413284">(</span><span class="ident" id="6413285"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413286">.</span><span class="ident" id="6413287">offset</span><span class="op" id="6413293">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413298"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413299">.</span><span class="ident" id="6413300">Extra</span>&nbsp;<span class="op" id="6413306">=</span>&nbsp;<span class="builtinfunc" id="6413308">append</span><span class="op" id="6413314">(</span><span class="ident" id="6413315"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413316">.</span><span class="ident" id="6413317">Extra</span><span class="op" id="6413322">,</span>&nbsp;<span class="ident" id="6413324"><a href="/archive/zip/writer.go.html#6413076">buf</a></span><span class="op" id="6413327">[</span><span class="op" id="6413328">:</span><span class="op" id="6413329">]</span><span class="op" id="6413330">...</span><span class="op" id="6413333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413337">}</span>&nbsp;<span class="keyword" id="6413339">else</span>&nbsp;<span class="op" id="6413344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413349"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6413350">.</span><span class="builtintype" id="6413351">uint32</span><span class="op" id="6413357">(</span><span class="ident" id="6413358"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413359">.</span><span class="ident" id="6413360">CompressedSize</span><span class="op" id="6413374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413379"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6413380">.</span><span class="builtintype" id="6413381">uint32</span><span class="op" id="6413387">(</span><span class="ident" id="6413388"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413389">.</span><span class="ident" id="6413390">UncompressedSize</span><span class="op" id="6413406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413410">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413414"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6413415">.</span><span class="builtintype" id="6413416">uint16</span><span class="op" id="6413422">(</span><span class="builtintype" id="6413423">uint16</span><span class="op" id="6413429">(</span><span class="builtinfunc" id="6413430">len</span><span class="op" id="6413433">(</span><span class="ident" id="6413434"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413435">.</span><span class="ident" id="6413436">Name</span><span class="op" id="6413440">)</span><span class="op" id="6413441">)</span><span class="op" id="6413442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413446"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6413447">.</span><span class="builtintype" id="6413448">uint16</span><span class="op" id="6413454">(</span><span class="builtintype" id="6413455">uint16</span><span class="op" id="6413461">(</span><span class="builtinfunc" id="6413462">len</span><span class="op" id="6413465">(</span><span class="ident" id="6413466"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413467">.</span><span class="ident" id="6413468">Extra</span><span class="op" id="6413473">)</span><span class="op" id="6413474">)</span><span class="op" id="6413475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413479"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6413480">.</span><span class="builtintype" id="6413481">uint16</span><span class="op" id="6413487">(</span><span class="builtintype" id="6413488">uint16</span><span class="op" id="6413494">(</span><span class="builtinfunc" id="6413495">len</span><span class="op" id="6413498">(</span><span class="ident" id="6413499"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413500">.</span><span class="ident" id="6413501">Comment</span><span class="op" id="6413508">)</span><span class="op" id="6413509">)</span><span class="op" id="6413510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413514"><a href="/archive/zip/writer.go.html#6412496">b</a></span>&nbsp;<span class="op" id="6413516">=</span>&nbsp;<span class="ident" id="6413518"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6413519">[</span><span class="num" id="6413520">4</span><span class="op" id="6413521">:</span><span class="op" id="6413522">]</span>&nbsp;<span class="comment" id="6413524">//&nbsp;skip&nbsp;disk&nbsp;number&nbsp;start&nbsp;and&nbsp;internal&nbsp;file&nbsp;attr&nbsp;(2x&nbsp;uint16)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413587"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6413588">.</span><span class="builtintype" id="6413589">uint32</span><span class="op" id="6413595">(</span><span class="ident" id="6413596"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413597">.</span><span class="ident" id="6413598">ExternalAttrs</span><span class="op" id="6413611">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413615">if</span>&nbsp;<span class="ident" id="6413618"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413619">.</span><span class="ident" id="6413620">offset</span>&nbsp;<span class="op" id="6413627">&gt;</span>&nbsp;<span class="ident" id="6413629"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span>&nbsp;<span class="op" id="6413639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413644"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6413645">.</span><span class="builtintype" id="6413646">uint32</span><span class="op" id="6413652">(</span><span class="ident" id="6413653"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span><span class="op" id="6413662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413666">}</span>&nbsp;<span class="keyword" id="6413668">else</span>&nbsp;<span class="op" id="6413673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413678"><a href="/archive/zip/writer.go.html#6412496">b</a></span><span class="op" id="6413679">.</span><span class="builtintype" id="6413680">uint32</span><span class="op" id="6413686">(</span><span class="builtintype" id="6413687">uint32</span><span class="op" id="6413693">(</span><span class="ident" id="6413694"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413695">.</span><span class="ident" id="6413696">offset</span><span class="op" id="6413702">)</span><span class="op" id="6413703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413707">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413711">if</span>&nbsp;<span class="ident" id="6413714">_</span><span class="op" id="6413715">,</span>&nbsp;<span class="ident" id="6413717">err</span>&nbsp;<span class="op" id="6413721">:=</span>&nbsp;<span class="ident" id="6413724"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6413725">.</span><span class="ident" id="6413726">cw</span><span class="op" id="6413728">.</span><span class="ident" id="6413729">Write</span><span class="op" id="6413734">(</span><span class="ident" id="6413735"><a href="/archive/zip/writer.go.html#6412465">buf</a></span><span class="op" id="6413738">[</span><span class="op" id="6413739">:</span><span class="op" id="6413740">]</span><span class="op" id="6413741">)</span><span class="op" id="6413742">;</span>&nbsp;<span class="ident" id="6413744"><a href="/archive/zip/writer.go.html#6413717">err</a></span>&nbsp;<span class="op" id="6413748">!=</span>&nbsp;<span class="ident" id="6413751">nil</span>&nbsp;<span class="op" id="6413755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413760">return</span>&nbsp;<span class="ident" id="6413767"><a href="/archive/zip/writer.go.html#6413717">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413777">if</span>&nbsp;<span class="ident" id="6413780">_</span><span class="op" id="6413781">,</span>&nbsp;<span class="ident" id="6413783">err</span>&nbsp;<span class="op" id="6413787">:=</span>&nbsp;<span class="ident" id="6413790"><a href="/archive/zip/writer.go.html#6411370">io</a></span><span class="op" id="6413792">.</span><span class="ident" id="6413793">WriteString</span><span class="op" id="6413804">(</span><span class="ident" id="6413805"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6413806">.</span><span class="ident" id="6413807">cw</span><span class="op" id="6413809">,</span>&nbsp;<span class="ident" id="6413811"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413812">.</span><span class="ident" id="6413813">Name</span><span class="op" id="6413817">)</span><span class="op" id="6413818">;</span>&nbsp;<span class="ident" id="6413820"><a href="/archive/zip/writer.go.html#6413783">err</a></span>&nbsp;<span class="op" id="6413824">!=</span>&nbsp;<span class="ident" id="6413827">nil</span>&nbsp;<span class="op" id="6413831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413836">return</span>&nbsp;<span class="ident" id="6413843"><a href="/archive/zip/writer.go.html#6413783">err</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413853">if</span>&nbsp;<span class="ident" id="6413856">_</span><span class="op" id="6413857">,</span>&nbsp;<span class="ident" id="6413859">err</span>&nbsp;<span class="op" id="6413863">:=</span>&nbsp;<span class="ident" id="6413866"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6413867">.</span><span class="ident" id="6413868">cw</span><span class="op" id="6413870">.</span><span class="ident" id="6413871">Write</span><span class="op" id="6413876">(</span><span class="ident" id="6413877"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413878">.</span><span class="ident" id="6413879">Extra</span><span class="op" id="6413884">)</span><span class="op" id="6413885">;</span>&nbsp;<span class="ident" id="6413887"><a href="/archive/zip/writer.go.html#6413859">err</a></span>&nbsp;<span class="op" id="6413891">!=</span>&nbsp;<span class="ident" id="6413894">nil</span>&nbsp;<span class="op" id="6413898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413903">return</span>&nbsp;<span class="ident" id="6413910"><a href="/archive/zip/writer.go.html#6413859">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413920">if</span>&nbsp;<span class="ident" id="6413923">_</span><span class="op" id="6413924">,</span>&nbsp;<span class="ident" id="6413926">err</span>&nbsp;<span class="op" id="6413930">:=</span>&nbsp;<span class="ident" id="6413933"><a href="/archive/zip/writer.go.html#6411370">io</a></span><span class="op" id="6413935">.</span><span class="ident" id="6413936">WriteString</span><span class="op" id="6413947">(</span><span class="ident" id="6413948"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6413949">.</span><span class="ident" id="6413950">cw</span><span class="op" id="6413952">,</span>&nbsp;<span class="ident" id="6413954"><a href="/archive/zip/writer.go.html#6412440">h</a></span><span class="op" id="6413955">.</span><span class="ident" id="6413956">Comment</span><span class="op" id="6413963">)</span><span class="op" id="6413964">;</span>&nbsp;<span class="ident" id="6413966"><a href="/archive/zip/writer.go.html#6413926">err</a></span>&nbsp;<span class="op" id="6413970">!=</span>&nbsp;<span class="ident" id="6413973">nil</span>&nbsp;<span class="op" id="6413977">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413982">return</span>&nbsp;<span class="ident" id="6413989"><a href="/archive/zip/writer.go.html#6413926">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414001">end</span>&nbsp;<span class="op" id="6414005">:=</span>&nbsp;<span class="ident" id="6414008"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6414009">.</span><span class="ident" id="6414010">cw</span><span class="op" id="6414012">.</span><span class="ident" id="6414013">count</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414021">records</span>&nbsp;<span class="op" id="6414029">:=</span>&nbsp;<span class="ident" id="6414032">uint64</span><span class="op" id="6414038">(</span><span class="builtinfunc" id="6414039">len</span><span class="op" id="6414042">(</span><span class="ident" id="6414043"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6414044">.</span><span class="ident" id="6414045">dir</span><span class="op" id="6414048">)</span><span class="op" id="6414049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414052">size</span>&nbsp;<span class="op" id="6414057">:=</span>&nbsp;<span class="ident" id="6414060">uint64</span><span class="op" id="6414066">(</span><span class="ident" id="6414067"><a href="/archive/zip/writer.go.html#6414001">end</a></span>&nbsp;<span class="op" id="6414071">-</span>&nbsp;<span class="ident" id="6414073"><a href="/archive/zip/writer.go.html#6412412">start</a></span><span class="op" id="6414078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414081">offset</span>&nbsp;<span class="op" id="6414088">:=</span>&nbsp;<span class="ident" id="6414091">uint64</span><span class="op" id="6414097">(</span><span class="ident" id="6414098"><a href="/archive/zip/writer.go.html#6412412">start</a></span><span class="op" id="6414103">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414107">if</span>&nbsp;<span class="ident" id="6414110"><a href="/archive/zip/writer.go.html#6414021">records</a></span>&nbsp;<span class="op" id="6414118">&gt;</span>&nbsp;<span class="ident" id="6414120"><a href="/archive/zip/struct.go.html#6404463">uint16max</a></span>&nbsp;<span class="op" id="6414130">||</span>&nbsp;<span class="ident" id="6414133"><a href="/archive/zip/writer.go.html#6414052">size</a></span>&nbsp;<span class="op" id="6414138">&gt;</span>&nbsp;<span class="ident" id="6414140"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span>&nbsp;<span class="op" id="6414150">||</span>&nbsp;<span class="ident" id="6414153"><a href="/archive/zip/writer.go.html#6414081">offset</a></span>&nbsp;<span class="op" id="6414160">&gt;</span>&nbsp;<span class="ident" id="6414162"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span>&nbsp;<span class="op" id="6414172">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414176">var</span>&nbsp;<span class="ident" id="6414180">buf</span>&nbsp;<span class="op" id="6414184">[</span><span class="ident" id="6414185"><a href="/archive/zip/struct.go.html#6404124">directory64EndLen</a></span>&nbsp;<span class="op" id="6414203">+</span>&nbsp;<span class="ident" id="6414205"><a href="/archive/zip/struct.go.html#6404082">directory64LocLen</a></span><span class="op" id="6414222">]</span><span class="builtintype" id="6414223">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414230">b</span>&nbsp;<span class="op" id="6414232">:=</span>&nbsp;<span class="ident" id="6414235"><a href="/archive/zip/writer.go.html#6420427">writeBuf</a></span><span class="op" id="6414243">(</span><span class="ident" id="6414244"><a href="/archive/zip/writer.go.html#6414180">buf</a></span><span class="op" id="6414247">[</span><span class="op" id="6414248">:</span><span class="op" id="6414249">]</span><span class="op" id="6414250">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6414255">//&nbsp;zip64&nbsp;end&nbsp;of&nbsp;central&nbsp;directory&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414298"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6414299">.</span><span class="builtintype" id="6414300">uint32</span><span class="op" id="6414306">(</span><span class="ident" id="6414307"><a href="/archive/zip/struct.go.html#6403597">directory64EndSignature</a></span><span class="op" id="6414330">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414334"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6414335">.</span><span class="ident" id="6414336">uint64</span><span class="op" id="6414342">(</span><span class="ident" id="6414343"><a href="/archive/zip/struct.go.html#6404124">directory64EndLen</a></span><span class="op" id="6414360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414364"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6414365">.</span><span class="builtintype" id="6414366">uint16</span><span class="op" id="6414372">(</span><span class="ident" id="6414373"><a href="/archive/zip/struct.go.html#6404371">zipVersion45</a></span><span class="op" id="6414385">)</span>&nbsp;<span class="comment" id="6414387">//&nbsp;version&nbsp;made&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414408"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6414409">.</span><span class="builtintype" id="6414410">uint16</span><span class="op" id="6414416">(</span><span class="ident" id="6414417"><a href="/archive/zip/struct.go.html#6404371">zipVersion45</a></span><span class="op" id="6414429">)</span>&nbsp;<span class="comment" id="6414431">//&nbsp;version&nbsp;needed&nbsp;to&nbsp;extract</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414462"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6414463">.</span><span class="builtintype" id="6414464">uint32</span><span class="op" id="6414470">(</span><span class="num" id="6414471">0</span><span class="op" id="6414472">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6414485">//&nbsp;number&nbsp;of&nbsp;this&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414510"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6414511">.</span><span class="builtintype" id="6414512">uint32</span><span class="op" id="6414518">(</span><span class="num" id="6414519">0</span><span class="op" id="6414520">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6414533">//&nbsp;number&nbsp;of&nbsp;the&nbsp;disk&nbsp;with&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;central&nbsp;directory</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414597"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6414598">.</span><span class="ident" id="6414599">uint64</span><span class="op" id="6414605">(</span><span class="ident" id="6414606"><a href="/archive/zip/writer.go.html#6414021">records</a></span><span class="op" id="6414613">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6414620">//&nbsp;total&nbsp;number&nbsp;of&nbsp;entries&nbsp;in&nbsp;the&nbsp;central&nbsp;directory&nbsp;on&nbsp;this&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414687"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6414688">.</span><span class="ident" id="6414689">uint64</span><span class="op" id="6414695">(</span><span class="ident" id="6414696"><a href="/archive/zip/writer.go.html#6414021">records</a></span><span class="op" id="6414703">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6414710">//&nbsp;total&nbsp;number&nbsp;of&nbsp;entries&nbsp;in&nbsp;the&nbsp;central&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414764"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6414765">.</span><span class="ident" id="6414766">uint64</span><span class="op" id="6414772">(</span><span class="ident" id="6414773"><a href="/archive/zip/writer.go.html#6414052">size</a></span><span class="op" id="6414777">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6414787">//&nbsp;size&nbsp;of&nbsp;the&nbsp;central&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414822"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6414823">.</span><span class="ident" id="6414824">uint64</span><span class="op" id="6414830">(</span><span class="ident" id="6414831"><a href="/archive/zip/writer.go.html#6414081">offset</a></span><span class="op" id="6414837">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6414845">//&nbsp;offset&nbsp;of&nbsp;start&nbsp;of&nbsp;central&nbsp;directory&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;starting&nbsp;disk&nbsp;number</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6414929">//&nbsp;zip64&nbsp;end&nbsp;of&nbsp;central&nbsp;directory&nbsp;locator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414973"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6414974">.</span><span class="builtintype" id="6414975">uint32</span><span class="op" id="6414981">(</span><span class="ident" id="6414982"><a href="/archive/zip/struct.go.html#6403558">directory64LocSignature</a></span><span class="op" id="6415005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415009"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6415010">.</span><span class="builtintype" id="6415011">uint32</span><span class="op" id="6415017">(</span><span class="num" id="6415018">0</span><span class="op" id="6415019">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6415031">//&nbsp;number&nbsp;of&nbsp;the&nbsp;disk&nbsp;with&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;zip64&nbsp;end&nbsp;of&nbsp;central&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415108"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6415109">.</span><span class="ident" id="6415110">uint64</span><span class="op" id="6415116">(</span><span class="ident" id="6415117">uint64</span><span class="op" id="6415123">(</span><span class="ident" id="6415124"><a href="/archive/zip/writer.go.html#6414001">end</a></span><span class="op" id="6415127">)</span><span class="op" id="6415128">)</span>&nbsp;<span class="comment" id="6415130">//&nbsp;relative&nbsp;offset&nbsp;of&nbsp;the&nbsp;zip64&nbsp;end&nbsp;of&nbsp;central&nbsp;directory&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415196"><a href="/archive/zip/writer.go.html#6414230">b</a></span><span class="op" id="6415197">.</span><span class="builtintype" id="6415198">uint32</span><span class="op" id="6415204">(</span><span class="num" id="6415205">1</span><span class="op" id="6415206">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6415218">//&nbsp;total&nbsp;number&nbsp;of&nbsp;disks</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415246">if</span>&nbsp;<span class="ident" id="6415249">_</span><span class="op" id="6415250">,</span>&nbsp;<span class="ident" id="6415252">err</span>&nbsp;<span class="op" id="6415256">:=</span>&nbsp;<span class="ident" id="6415259"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6415260">.</span><span class="ident" id="6415261">cw</span><span class="op" id="6415263">.</span><span class="ident" id="6415264">Write</span><span class="op" id="6415269">(</span><span class="ident" id="6415270"><a href="/archive/zip/writer.go.html#6414180">buf</a></span><span class="op" id="6415273">[</span><span class="op" id="6415274">:</span><span class="op" id="6415275">]</span><span class="op" id="6415276">)</span><span class="op" id="6415277">;</span>&nbsp;<span class="ident" id="6415279"><a href="/archive/zip/writer.go.html#6415252">err</a></span>&nbsp;<span class="op" id="6415283">!=</span>&nbsp;<span class="ident" id="6415286">nil</span>&nbsp;<span class="op" id="6415290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415295">return</span>&nbsp;<span class="ident" id="6415302"><a href="/archive/zip/writer.go.html#6415252">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6415308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6415313">//&nbsp;store&nbsp;max&nbsp;values&nbsp;in&nbsp;the&nbsp;regular&nbsp;end&nbsp;record&nbsp;to&nbsp;signal&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6415376">//&nbsp;that&nbsp;the&nbsp;zip64&nbsp;values&nbsp;should&nbsp;be&nbsp;used&nbsp;instead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415426"><a href="/archive/zip/writer.go.html#6414021">records</a></span>&nbsp;<span class="op" id="6415434">=</span>&nbsp;<span class="ident" id="6415436"><a href="/archive/zip/struct.go.html#6404463">uint16max</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415448"><a href="/archive/zip/writer.go.html#6414052">size</a></span>&nbsp;<span class="op" id="6415453">=</span>&nbsp;<span class="ident" id="6415455"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415467"><a href="/archive/zip/writer.go.html#6414081">offset</a></span>&nbsp;<span class="op" id="6415474">=</span>&nbsp;<span class="ident" id="6415476"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6415487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6415491">//&nbsp;write&nbsp;end&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415512">var</span>&nbsp;<span class="ident" id="6415516">buf</span>&nbsp;<span class="op" id="6415520">[</span><span class="ident" id="6415521"><a href="/archive/zip/struct.go.html#6403853">directoryEndLen</a></span><span class="op" id="6415536">]</span><span class="builtintype" id="6415537">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415543">b</span>&nbsp;<span class="op" id="6415545">:=</span>&nbsp;<span class="ident" id="6415548"><a href="/archive/zip/writer.go.html#6420427">writeBuf</a></span><span class="op" id="6415556">(</span><span class="ident" id="6415557"><a href="/archive/zip/writer.go.html#6415516">buf</a></span><span class="op" id="6415560">[</span><span class="op" id="6415561">:</span><span class="op" id="6415562">]</span><span class="op" id="6415563">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415566"><a href="/archive/zip/writer.go.html#6415543">b</a></span><span class="op" id="6415567">.</span><span class="builtintype" id="6415568">uint32</span><span class="op" id="6415574">(</span><span class="builtintype" id="6415575">uint32</span><span class="op" id="6415581">(</span><span class="ident" id="6415582"><a href="/archive/zip/struct.go.html#6403519">directoryEndSignature</a></span><span class="op" id="6415603">)</span><span class="op" id="6415604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415607"><a href="/archive/zip/writer.go.html#6415543">b</a></span>&nbsp;<span class="op" id="6415609">=</span>&nbsp;<span class="ident" id="6415611"><a href="/archive/zip/writer.go.html#6415543">b</a></span><span class="op" id="6415612">[</span><span class="num" id="6415613">4</span><span class="op" id="6415614">:</span><span class="op" id="6415615">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6415633">//&nbsp;skip&nbsp;over&nbsp;disk&nbsp;number&nbsp;and&nbsp;first&nbsp;disk&nbsp;number&nbsp;(2x&nbsp;uint16)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415693"><a href="/archive/zip/writer.go.html#6415543">b</a></span><span class="op" id="6415694">.</span><span class="builtintype" id="6415695">uint16</span><span class="op" id="6415701">(</span><span class="builtintype" id="6415702">uint16</span><span class="op" id="6415708">(</span><span class="ident" id="6415709"><a href="/archive/zip/writer.go.html#6414021">records</a></span><span class="op" id="6415716">)</span><span class="op" id="6415717">)</span>&nbsp;<span class="comment" id="6415719">//&nbsp;number&nbsp;of&nbsp;entries&nbsp;this&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415751"><a href="/archive/zip/writer.go.html#6415543">b</a></span><span class="op" id="6415752">.</span><span class="builtintype" id="6415753">uint16</span><span class="op" id="6415759">(</span><span class="builtintype" id="6415760">uint16</span><span class="op" id="6415766">(</span><span class="ident" id="6415767"><a href="/archive/zip/writer.go.html#6414021">records</a></span><span class="op" id="6415774">)</span><span class="op" id="6415775">)</span>&nbsp;<span class="comment" id="6415777">//&nbsp;number&nbsp;of&nbsp;entries&nbsp;total</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415805"><a href="/archive/zip/writer.go.html#6415543">b</a></span><span class="op" id="6415806">.</span><span class="builtintype" id="6415807">uint32</span><span class="op" id="6415813">(</span><span class="builtintype" id="6415814">uint32</span><span class="op" id="6415820">(</span><span class="ident" id="6415821"><a href="/archive/zip/writer.go.html#6414052">size</a></span><span class="op" id="6415825">)</span><span class="op" id="6415826">)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6415831">//&nbsp;size&nbsp;of&nbsp;directory</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415853"><a href="/archive/zip/writer.go.html#6415543">b</a></span><span class="op" id="6415854">.</span><span class="builtintype" id="6415855">uint32</span><span class="op" id="6415861">(</span><span class="builtintype" id="6415862">uint32</span><span class="op" id="6415868">(</span><span class="ident" id="6415869"><a href="/archive/zip/writer.go.html#6414081">offset</a></span><span class="op" id="6415875">)</span><span class="op" id="6415876">)</span>&nbsp;&nbsp;<span class="comment" id="6415879">//&nbsp;start&nbsp;of&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6415902">//&nbsp;skipped&nbsp;size&nbsp;of&nbsp;comment&nbsp;(always&nbsp;zero)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415944">if</span>&nbsp;<span class="ident" id="6415947">_</span><span class="op" id="6415948">,</span>&nbsp;<span class="ident" id="6415950">err</span>&nbsp;<span class="op" id="6415954">:=</span>&nbsp;<span class="ident" id="6415957"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6415958">.</span><span class="ident" id="6415959">cw</span><span class="op" id="6415961">.</span><span class="ident" id="6415962">Write</span><span class="op" id="6415967">(</span><span class="ident" id="6415968"><a href="/archive/zip/writer.go.html#6415516">buf</a></span><span class="op" id="6415971">[</span><span class="op" id="6415972">:</span><span class="op" id="6415973">]</span><span class="op" id="6415974">)</span><span class="op" id="6415975">;</span>&nbsp;<span class="ident" id="6415977"><a href="/archive/zip/writer.go.html#6415950">err</a></span>&nbsp;<span class="op" id="6415981">!=</span>&nbsp;<span class="ident" id="6415984">nil</span>&nbsp;<span class="op" id="6415988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415992">return</span>&nbsp;<span class="ident" id="6415999"><a href="/archive/zip/writer.go.html#6415950">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416004">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416008">return</span>&nbsp;<span class="ident" id="6416015"><a href="/archive/zip/writer.go.html#6412157">w</a></span><span class="op" id="6416016">.</span><span class="ident" id="6416017">cw</span><span class="op" id="6416019">.</span><span class="ident" id="6416020">w</span><span class="op" id="6416021">.</span><span class="op" id="6416022">(</span><span class="op" id="6416023">*</span><span class="ident" id="6416024"><a href="/archive/zip/writer.go.html#6411310">bufio</a></span><span class="op" id="6416029">.</span><span class="ident" id="6416030">Writer</span><span class="op" id="6416036">)</span><span class="op" id="6416037">.</span><span class="ident" id="6416038">Flush</span><span class="op" id="6416043">(</span><span class="op" id="6416044">)</span><br>
<span class="lineno"></span><span class="op" id="6416046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6416049">//&nbsp;Create&nbsp;adds&nbsp;a&nbsp;file&nbsp;to&nbsp;the&nbsp;zip&nbsp;file&nbsp;using&nbsp;the&nbsp;provided&nbsp;name.</span><br>
<span class="lineno">170</span><span class="comment" id="6416112">//&nbsp;It&nbsp;returns&nbsp;a&nbsp;Writer&nbsp;to&nbsp;which&nbsp;the&nbsp;file&nbsp;contents&nbsp;should&nbsp;be&nbsp;written.</span><br>
<span class="lineno"></span><span class="comment" id="6416181">//&nbsp;The&nbsp;name&nbsp;must&nbsp;be&nbsp;a&nbsp;relative&nbsp;path:&nbsp;it&nbsp;must&nbsp;not&nbsp;start&nbsp;with&nbsp;a&nbsp;drive</span><br>
<span class="lineno"></span><span class="comment" id="6416249">//&nbsp;letter&nbsp;(e.g.&nbsp;C:)&nbsp;or&nbsp;leading&nbsp;slash,&nbsp;and&nbsp;only&nbsp;forward&nbsp;slashes&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="6416316">//&nbsp;allowed.</span><br>
<span class="lineno"></span><span class="comment" id="6416328">//&nbsp;The&nbsp;file&#39;s&nbsp;contents&nbsp;must&nbsp;be&nbsp;written&nbsp;to&nbsp;the&nbsp;io.Writer&nbsp;before&nbsp;the&nbsp;next</span><br>
<span class="lineno">175</span><span class="comment" id="6416400">//&nbsp;call&nbsp;to&nbsp;Create,&nbsp;CreateHeader,&nbsp;or&nbsp;Close.</span><br>
<span class="lineno"></span><span class="keyword" id="6416443">func</span>&nbsp;<span class="op" id="6416448">(</span><span class="ident" id="6416449">w</span>&nbsp;<span class="op" id="6416451">*</span><span class="ident" id="6416452"><a href="/archive/zip/writer.go.html#6411511">Writer</a></span><span class="op" id="6416458">)</span>&nbsp;<span class="ident" id="6416460">Create</span><span class="op" id="6416466">(</span><span class="ident" id="6416467">name</span>&nbsp;<span class="builtintype" id="6416472">string</span><span class="op" id="6416478">)</span>&nbsp;<span class="op" id="6416480">(</span><span class="ident" id="6416481"><a href="/archive/zip/writer.go.html#6411370">io</a></span><span class="op" id="6416483">.</span><span class="ident" id="6416484">Writer</span><span class="op" id="6416490">,</span>&nbsp;<span class="builtintype" id="6416492">error</span><span class="op" id="6416497">)</span>&nbsp;<span class="op" id="6416499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6416502">header</span>&nbsp;<span class="op" id="6416509">:=</span>&nbsp;<span class="op" id="6416512">&amp;</span><span class="ident" id="6416513"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><span class="op" id="6416523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6416527">Name</span><span class="op" id="6416531">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6416535"><a href="/archive/zip/writer.go.html#6416467">name</a></span><span class="op" id="6416539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6416543">Method</span><span class="op" id="6416549">:</span>&nbsp;<span class="ident" id="6416551"><a href="/archive/zip/struct.go.html#6403410">Deflate</a></span><span class="op" id="6416558">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416564">return</span>&nbsp;<span class="ident" id="6416571"><a href="/archive/zip/writer.go.html#6416449">w</a></span><span class="op" id="6416572">.</span><span class="ident" id="6416573">CreateHeader</span><span class="op" id="6416585">(</span><span class="ident" id="6416586"><a href="/archive/zip/writer.go.html#6416502">header</a></span><span class="op" id="6416592">)</span><br>
<span class="lineno"></span><span class="op" id="6416594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6416597">//&nbsp;CreateHeader&nbsp;adds&nbsp;a&nbsp;file&nbsp;to&nbsp;the&nbsp;zip&nbsp;file&nbsp;using&nbsp;the&nbsp;provided&nbsp;FileHeader</span><br>
<span class="lineno">185</span><span class="comment" id="6416671">//&nbsp;for&nbsp;the&nbsp;file&nbsp;metadata.</span><br>
<span class="lineno"></span><span class="comment" id="6416697">//&nbsp;It&nbsp;returns&nbsp;a&nbsp;Writer&nbsp;to&nbsp;which&nbsp;the&nbsp;file&nbsp;contents&nbsp;should&nbsp;be&nbsp;written.</span><br>
<span class="lineno"></span><span class="comment" id="6416766">//&nbsp;The&nbsp;file&#39;s&nbsp;contents&nbsp;must&nbsp;be&nbsp;written&nbsp;to&nbsp;the&nbsp;io.Writer&nbsp;before&nbsp;the&nbsp;next</span><br>
<span class="lineno"></span><span class="comment" id="6416838">//&nbsp;call&nbsp;to&nbsp;Create,&nbsp;CreateHeader,&nbsp;or&nbsp;Close.</span><br>
<span class="lineno"></span><span class="keyword" id="6416881">func</span>&nbsp;<span class="op" id="6416886">(</span><span class="ident" id="6416887">w</span>&nbsp;<span class="op" id="6416889">*</span><span class="ident" id="6416890"><a href="/archive/zip/writer.go.html#6411511">Writer</a></span><span class="op" id="6416896">)</span>&nbsp;<span class="ident" id="6416898">CreateHeader</span><span class="op" id="6416910">(</span><span class="ident" id="6416911">fh</span>&nbsp;<span class="op" id="6416914">*</span><span class="ident" id="6416915"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><span class="op" id="6416925">)</span>&nbsp;<span class="op" id="6416927">(</span><span class="ident" id="6416928"><a href="/archive/zip/writer.go.html#6411370">io</a></span><span class="op" id="6416930">.</span><span class="ident" id="6416931">Writer</span><span class="op" id="6416937">,</span>&nbsp;<span class="builtintype" id="6416939">error</span><span class="op" id="6416944">)</span>&nbsp;<span class="op" id="6416946">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416949">if</span>&nbsp;<span class="ident" id="6416952"><a href="/archive/zip/writer.go.html#6416887">w</a></span><span class="op" id="6416953">.</span><span class="ident" id="6416954">last</span>&nbsp;<span class="op" id="6416959">!=</span>&nbsp;<span class="ident" id="6416962">nil</span>&nbsp;<span class="op" id="6416966">&amp;&amp;</span>&nbsp;<span class="op" id="6416969">!</span><span class="ident" id="6416970"><a href="/archive/zip/writer.go.html#6416887">w</a></span><span class="op" id="6416971">.</span><span class="ident" id="6416972">last</span><span class="op" id="6416976">.</span><span class="ident" id="6416977">closed</span>&nbsp;<span class="op" id="6416984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416988">if</span>&nbsp;<span class="ident" id="6416991">err</span>&nbsp;<span class="op" id="6416995">:=</span>&nbsp;<span class="ident" id="6416998"><a href="/archive/zip/writer.go.html#6416887">w</a></span><span class="op" id="6416999">.</span><span class="ident" id="6417000">last</span><span class="op" id="6417004">.</span><span class="builtinfunc" id="6417005">close</span><span class="op" id="6417010">(</span><span class="op" id="6417011">)</span><span class="op" id="6417012">;</span>&nbsp;<span class="ident" id="6417014"><a href="/archive/zip/writer.go.html#6416991">err</a></span>&nbsp;<span class="op" id="6417018">!=</span>&nbsp;<span class="ident" id="6417021">nil</span>&nbsp;<span class="op" id="6417025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417030">return</span>&nbsp;<span class="ident" id="6417037">nil</span><span class="op" id="6417040">,</span>&nbsp;<span class="ident" id="6417042"><a href="/archive/zip/writer.go.html#6416991">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417051">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417055"><a href="/archive/zip/writer.go.html#6416911">fh</a></span><span class="op" id="6417057">.</span><span class="ident" id="6417058">Flags</span>&nbsp;<span class="op" id="6417064">|=</span>&nbsp;<span class="num" id="6417067">0x8</span>&nbsp;<span class="comment" id="6417071">//&nbsp;we&nbsp;will&nbsp;write&nbsp;a&nbsp;data&nbsp;descriptor</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417108"><a href="/archive/zip/writer.go.html#6416911">fh</a></span><span class="op" id="6417110">.</span><span class="ident" id="6417111">CreatorVersion</span>&nbsp;<span class="op" id="6417126">=</span>&nbsp;<span class="ident" id="6417128"><a href="/archive/zip/writer.go.html#6416911">fh</a></span><span class="op" id="6417130">.</span><span class="ident" id="6417131">CreatorVersion</span><span class="op" id="6417145">&amp;</span><span class="num" id="6417146">0xff00</span>&nbsp;<span class="op" id="6417153">|</span>&nbsp;<span class="ident" id="6417155"><a href="/archive/zip/struct.go.html#6404345">zipVersion20</a></span>&nbsp;<span class="comment" id="6417168">//&nbsp;preserve&nbsp;compatibility&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417200"><a href="/archive/zip/writer.go.html#6416911">fh</a></span><span class="op" id="6417202">.</span><span class="ident" id="6417203">ReaderVersion</span>&nbsp;<span class="op" id="6417217">=</span>&nbsp;<span class="ident" id="6417219"><a href="/archive/zip/struct.go.html#6404345">zipVersion20</a></span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417234">fw</span>&nbsp;<span class="op" id="6417237">:=</span>&nbsp;<span class="op" id="6417240">&amp;</span><span class="ident" id="6417241"><a href="/archive/zip/writer.go.html#6418413">fileWriter</a></span><span class="op" id="6417251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417255">zipw</span><span class="op" id="6417259">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417266"><a href="/archive/zip/writer.go.html#6416887">w</a></span><span class="op" id="6417267">.</span><span class="ident" id="6417268">cw</span><span class="op" id="6417270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417274">compCount</span><span class="op" id="6417283">:</span>&nbsp;<span class="op" id="6417285">&amp;</span><span class="ident" id="6417286"><a href="/archive/zip/writer.go.html#6420164">countWriter</a></span><span class="op" id="6417297">{</span><span class="ident" id="6417298">w</span><span class="op" id="6417299">:</span>&nbsp;<span class="ident" id="6417301"><a href="/archive/zip/writer.go.html#6416887">w</a></span><span class="op" id="6417302">.</span><span class="ident" id="6417303">cw</span><span class="op" id="6417305">}</span><span class="op" id="6417306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417310">crc32</span><span class="op" id="6417315">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417321"><a href="/archive/zip/writer.go.html#6411356">crc32</a></span><span class="op" id="6417326">.</span><span class="ident" id="6417327">NewIEEE</span><span class="op" id="6417334">(</span><span class="op" id="6417335">)</span><span class="op" id="6417336">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417342">comp</span>&nbsp;<span class="op" id="6417347">:=</span>&nbsp;<span class="ident" id="6417350"><a href="/archive/zip/register.go.html#6402426">compressor</a></span><span class="op" id="6417360">(</span><span class="ident" id="6417361"><a href="/archive/zip/writer.go.html#6416911">fh</a></span><span class="op" id="6417363">.</span><span class="ident" id="6417364">Method</span><span class="op" id="6417370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417373">if</span>&nbsp;<span class="ident" id="6417376"><a href="/archive/zip/writer.go.html#6417342">comp</a></span>&nbsp;<span class="op" id="6417381">==</span>&nbsp;<span class="ident" id="6417384">nil</span>&nbsp;<span class="op" id="6417388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417392">return</span>&nbsp;<span class="ident" id="6417399">nil</span><span class="op" id="6417402">,</span>&nbsp;<span class="ident" id="6417404"><a href="/archive/zip/reader.go.html#6387890">ErrAlgorithm</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417418">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417421">var</span>&nbsp;<span class="ident" id="6417425">err</span>&nbsp;<span class="builtintype" id="6417429">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417436"><a href="/archive/zip/writer.go.html#6417234">fw</a></span><span class="op" id="6417438">.</span><span class="ident" id="6417439">comp</span><span class="op" id="6417443">,</span>&nbsp;<span class="ident" id="6417445"><a href="/archive/zip/writer.go.html#6417425">err</a></span>&nbsp;<span class="op" id="6417449">=</span>&nbsp;<span class="ident" id="6417451"><a href="/archive/zip/writer.go.html#6417342">comp</a></span><span class="op" id="6417455">(</span><span class="ident" id="6417456"><a href="/archive/zip/writer.go.html#6417234">fw</a></span><span class="op" id="6417458">.</span><span class="ident" id="6417459">compCount</span><span class="op" id="6417468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417471">if</span>&nbsp;<span class="ident" id="6417474"><a href="/archive/zip/writer.go.html#6417425">err</a></span>&nbsp;<span class="op" id="6417478">!=</span>&nbsp;<span class="ident" id="6417481">nil</span>&nbsp;<span class="op" id="6417485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417489">return</span>&nbsp;<span class="ident" id="6417496">nil</span><span class="op" id="6417499">,</span>&nbsp;<span class="ident" id="6417501"><a href="/archive/zip/writer.go.html#6417425">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417506">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417509"><a href="/archive/zip/writer.go.html#6417234">fw</a></span><span class="op" id="6417511">.</span><span class="ident" id="6417512">rawCount</span>&nbsp;<span class="op" id="6417521">=</span>&nbsp;<span class="op" id="6417523">&amp;</span><span class="ident" id="6417524"><a href="/archive/zip/writer.go.html#6420164">countWriter</a></span><span class="op" id="6417535">{</span><span class="ident" id="6417536">w</span><span class="op" id="6417537">:</span>&nbsp;<span class="ident" id="6417539"><a href="/archive/zip/writer.go.html#6417234">fw</a></span><span class="op" id="6417541">.</span><span class="ident" id="6417542">comp</span><span class="op" id="6417546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417550">h</span>&nbsp;<span class="op" id="6417552">:=</span>&nbsp;<span class="op" id="6417555">&amp;</span><span class="ident" id="6417556"><a href="/archive/zip/writer.go.html#6411607">header</a></span><span class="op" id="6417562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417566">FileHeader</span><span class="op" id="6417576">:</span>&nbsp;<span class="ident" id="6417578"><a href="/archive/zip/writer.go.html#6416911">fh</a></span><span class="op" id="6417580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417584">offset</span><span class="op" id="6417590">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417596">uint64</span><span class="op" id="6417602">(</span><span class="ident" id="6417603"><a href="/archive/zip/writer.go.html#6416887">w</a></span><span class="op" id="6417604">.</span><span class="ident" id="6417605">cw</span><span class="op" id="6417607">.</span><span class="ident" id="6417608">count</span><span class="op" id="6417613">)</span><span class="op" id="6417614">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417620"><a href="/archive/zip/writer.go.html#6416887">w</a></span><span class="op" id="6417621">.</span><span class="ident" id="6417622">dir</span>&nbsp;<span class="op" id="6417626">=</span>&nbsp;<span class="builtinfunc" id="6417628">append</span><span class="op" id="6417634">(</span><span class="ident" id="6417635"><a href="/archive/zip/writer.go.html#6416887">w</a></span><span class="op" id="6417636">.</span><span class="ident" id="6417637">dir</span><span class="op" id="6417640">,</span>&nbsp;<span class="ident" id="6417642"><a href="/archive/zip/writer.go.html#6417550">h</a></span><span class="op" id="6417643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417646"><a href="/archive/zip/writer.go.html#6417234">fw</a></span><span class="op" id="6417648">.</span><span class="ident" id="6417649">header</span>&nbsp;<span class="op" id="6417656">=</span>&nbsp;<span class="ident" id="6417658"><a href="/archive/zip/writer.go.html#6417550">h</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417662">if</span>&nbsp;<span class="ident" id="6417665">err</span>&nbsp;<span class="op" id="6417669">:=</span>&nbsp;<span class="ident" id="6417672"><a href="/archive/zip/writer.go.html#6417767">writeHeader</a></span><span class="op" id="6417683">(</span><span class="ident" id="6417684"><a href="/archive/zip/writer.go.html#6416887">w</a></span><span class="op" id="6417685">.</span><span class="ident" id="6417686">cw</span><span class="op" id="6417688">,</span>&nbsp;<span class="ident" id="6417690"><a href="/archive/zip/writer.go.html#6416911">fh</a></span><span class="op" id="6417692">)</span><span class="op" id="6417693">;</span>&nbsp;<span class="ident" id="6417695"><a href="/archive/zip/writer.go.html#6417665">err</a></span>&nbsp;<span class="op" id="6417699">!=</span>&nbsp;<span class="ident" id="6417702">nil</span>&nbsp;<span class="op" id="6417706">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417710">return</span>&nbsp;<span class="ident" id="6417717">nil</span><span class="op" id="6417720">,</span>&nbsp;<span class="ident" id="6417722"><a href="/archive/zip/writer.go.html#6417665">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417731"><a href="/archive/zip/writer.go.html#6416887">w</a></span><span class="op" id="6417732">.</span><span class="ident" id="6417733">last</span>&nbsp;<span class="op" id="6417738">=</span>&nbsp;<span class="ident" id="6417740"><a href="/archive/zip/writer.go.html#6417234">fw</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417744">return</span>&nbsp;<span class="ident" id="6417751"><a href="/archive/zip/writer.go.html#6417234">fw</a></span><span class="op" id="6417753">,</span>&nbsp;<span class="ident" id="6417755">nil</span><br>
<span class="lineno">230</span><span class="op" id="6417759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6417762">func</span>&nbsp;<span class="ident" id="6417767">writeHeader</span><span class="op" id="6417778">(</span><span class="ident" id="6417779">w</span>&nbsp;<span class="ident" id="6417781"><a href="/archive/zip/writer.go.html#6411370">io</a></span><span class="op" id="6417783">.</span><span class="ident" id="6417784">Writer</span><span class="op" id="6417790">,</span>&nbsp;<span class="ident" id="6417792">h</span>&nbsp;<span class="op" id="6417794">*</span><span class="ident" id="6417795"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><span class="op" id="6417805">)</span>&nbsp;<span class="builtintype" id="6417807">error</span>&nbsp;<span class="op" id="6417813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417816">var</span>&nbsp;<span class="ident" id="6417820">buf</span>&nbsp;<span class="op" id="6417824">[</span><span class="ident" id="6417825"><a href="/archive/zip/struct.go.html#6403721">fileHeaderLen</a></span><span class="op" id="6417838">]</span><span class="builtintype" id="6417839">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417845">b</span>&nbsp;<span class="op" id="6417847">:=</span>&nbsp;<span class="ident" id="6417850"><a href="/archive/zip/writer.go.html#6420427">writeBuf</a></span><span class="op" id="6417858">(</span><span class="ident" id="6417859"><a href="/archive/zip/writer.go.html#6417820">buf</a></span><span class="op" id="6417862">[</span><span class="op" id="6417863">:</span><span class="op" id="6417864">]</span><span class="op" id="6417865">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417868"><a href="/archive/zip/writer.go.html#6417845">b</a></span><span class="op" id="6417869">.</span><span class="builtintype" id="6417870">uint32</span><span class="op" id="6417876">(</span><span class="builtintype" id="6417877">uint32</span><span class="op" id="6417883">(</span><span class="ident" id="6417884"><a href="/archive/zip/struct.go.html#6403441">fileHeaderSignature</a></span><span class="op" id="6417903">)</span><span class="op" id="6417904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417907"><a href="/archive/zip/writer.go.html#6417845">b</a></span><span class="op" id="6417908">.</span><span class="builtintype" id="6417909">uint16</span><span class="op" id="6417915">(</span><span class="ident" id="6417916"><a href="/archive/zip/writer.go.html#6417792">h</a></span><span class="op" id="6417917">.</span><span class="ident" id="6417918">ReaderVersion</span><span class="op" id="6417931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417934"><a href="/archive/zip/writer.go.html#6417845">b</a></span><span class="op" id="6417935">.</span><span class="builtintype" id="6417936">uint16</span><span class="op" id="6417942">(</span><span class="ident" id="6417943"><a href="/archive/zip/writer.go.html#6417792">h</a></span><span class="op" id="6417944">.</span><span class="ident" id="6417945">Flags</span><span class="op" id="6417950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417953"><a href="/archive/zip/writer.go.html#6417845">b</a></span><span class="op" id="6417954">.</span><span class="builtintype" id="6417955">uint16</span><span class="op" id="6417961">(</span><span class="ident" id="6417962"><a href="/archive/zip/writer.go.html#6417792">h</a></span><span class="op" id="6417963">.</span><span class="ident" id="6417964">Method</span><span class="op" id="6417970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417973"><a href="/archive/zip/writer.go.html#6417845">b</a></span><span class="op" id="6417974">.</span><span class="builtintype" id="6417975">uint16</span><span class="op" id="6417981">(</span><span class="ident" id="6417982"><a href="/archive/zip/writer.go.html#6417792">h</a></span><span class="op" id="6417983">.</span><span class="ident" id="6417984">ModifiedTime</span><span class="op" id="6417996">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417999"><a href="/archive/zip/writer.go.html#6417845">b</a></span><span class="op" id="6418000">.</span><span class="builtintype" id="6418001">uint16</span><span class="op" id="6418007">(</span><span class="ident" id="6418008"><a href="/archive/zip/writer.go.html#6417792">h</a></span><span class="op" id="6418009">.</span><span class="ident" id="6418010">ModifiedDate</span><span class="op" id="6418022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418025"><a href="/archive/zip/writer.go.html#6417845">b</a></span><span class="op" id="6418026">.</span><span class="builtintype" id="6418027">uint32</span><span class="op" id="6418033">(</span><span class="num" id="6418034">0</span><span class="op" id="6418035">)</span>&nbsp;<span class="comment" id="6418037">//&nbsp;since&nbsp;we&nbsp;are&nbsp;writing&nbsp;a&nbsp;data&nbsp;descriptor&nbsp;crc32,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418087"><a href="/archive/zip/writer.go.html#6417845">b</a></span><span class="op" id="6418088">.</span><span class="builtintype" id="6418089">uint32</span><span class="op" id="6418095">(</span><span class="num" id="6418096">0</span><span class="op" id="6418097">)</span>&nbsp;<span class="comment" id="6418099">//&nbsp;compressed&nbsp;size,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418120"><a href="/archive/zip/writer.go.html#6417845">b</a></span><span class="op" id="6418121">.</span><span class="builtintype" id="6418122">uint32</span><span class="op" id="6418128">(</span><span class="num" id="6418129">0</span><span class="op" id="6418130">)</span>&nbsp;<span class="comment" id="6418132">//&nbsp;and&nbsp;uncompressed&nbsp;size&nbsp;should&nbsp;be&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418173"><a href="/archive/zip/writer.go.html#6417845">b</a></span><span class="op" id="6418174">.</span><span class="builtintype" id="6418175">uint16</span><span class="op" id="6418181">(</span><span class="builtintype" id="6418182">uint16</span><span class="op" id="6418188">(</span><span class="builtinfunc" id="6418189">len</span><span class="op" id="6418192">(</span><span class="ident" id="6418193"><a href="/archive/zip/writer.go.html#6417792">h</a></span><span class="op" id="6418194">.</span><span class="ident" id="6418195">Name</span><span class="op" id="6418199">)</span><span class="op" id="6418200">)</span><span class="op" id="6418201">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418204"><a href="/archive/zip/writer.go.html#6417845">b</a></span><span class="op" id="6418205">.</span><span class="builtintype" id="6418206">uint16</span><span class="op" id="6418212">(</span><span class="builtintype" id="6418213">uint16</span><span class="op" id="6418219">(</span><span class="builtinfunc" id="6418220">len</span><span class="op" id="6418223">(</span><span class="ident" id="6418224"><a href="/archive/zip/writer.go.html#6417792">h</a></span><span class="op" id="6418225">.</span><span class="ident" id="6418226">Extra</span><span class="op" id="6418231">)</span><span class="op" id="6418232">)</span><span class="op" id="6418233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418236">if</span>&nbsp;<span class="ident" id="6418239">_</span><span class="op" id="6418240">,</span>&nbsp;<span class="ident" id="6418242">err</span>&nbsp;<span class="op" id="6418246">:=</span>&nbsp;<span class="ident" id="6418249"><a href="/archive/zip/writer.go.html#6417779">w</a></span><span class="op" id="6418250">.</span><span class="ident" id="6418251">Write</span><span class="op" id="6418256">(</span><span class="ident" id="6418257"><a href="/archive/zip/writer.go.html#6417820">buf</a></span><span class="op" id="6418260">[</span><span class="op" id="6418261">:</span><span class="op" id="6418262">]</span><span class="op" id="6418263">)</span><span class="op" id="6418264">;</span>&nbsp;<span class="ident" id="6418266"><a href="/archive/zip/writer.go.html#6418242">err</a></span>&nbsp;<span class="op" id="6418270">!=</span>&nbsp;<span class="ident" id="6418273">nil</span>&nbsp;<span class="op" id="6418277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418281">return</span>&nbsp;<span class="ident" id="6418288"><a href="/archive/zip/writer.go.html#6418242">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418296">if</span>&nbsp;<span class="ident" id="6418299">_</span><span class="op" id="6418300">,</span>&nbsp;<span class="ident" id="6418302">err</span>&nbsp;<span class="op" id="6418306">:=</span>&nbsp;<span class="ident" id="6418309"><a href="/archive/zip/writer.go.html#6411370">io</a></span><span class="op" id="6418311">.</span><span class="ident" id="6418312">WriteString</span><span class="op" id="6418323">(</span><span class="ident" id="6418324"><a href="/archive/zip/writer.go.html#6417779">w</a></span><span class="op" id="6418325">,</span>&nbsp;<span class="ident" id="6418327"><a href="/archive/zip/writer.go.html#6417792">h</a></span><span class="op" id="6418328">.</span><span class="ident" id="6418329">Name</span><span class="op" id="6418333">)</span><span class="op" id="6418334">;</span>&nbsp;<span class="ident" id="6418336"><a href="/archive/zip/writer.go.html#6418302">err</a></span>&nbsp;<span class="op" id="6418340">!=</span>&nbsp;<span class="ident" id="6418343">nil</span>&nbsp;<span class="op" id="6418347">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418351">return</span>&nbsp;<span class="ident" id="6418358"><a href="/archive/zip/writer.go.html#6418302">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418366">_</span><span class="op" id="6418367">,</span>&nbsp;<span class="ident" id="6418369">err</span>&nbsp;<span class="op" id="6418373">:=</span>&nbsp;<span class="ident" id="6418376"><a href="/archive/zip/writer.go.html#6417779">w</a></span><span class="op" id="6418377">.</span><span class="ident" id="6418378">Write</span><span class="op" id="6418383">(</span><span class="ident" id="6418384"><a href="/archive/zip/writer.go.html#6417792">h</a></span><span class="op" id="6418385">.</span><span class="ident" id="6418386">Extra</span><span class="op" id="6418391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418394">return</span>&nbsp;<span class="ident" id="6418401"><a href="/archive/zip/writer.go.html#6418369">err</a></span><br>
<span class="lineno"></span><span class="op" id="6418405">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="keyword" id="6418408">type</span>&nbsp;<span class="ident" id="6418413">fileWriter</span>&nbsp;<span class="keyword" id="6418424">struct</span>&nbsp;<span class="op" id="6418431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418434">*</span><span class="ident" id="6418435"><a href="/archive/zip/writer.go.html#6411607">header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418443">zipw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418453"><a href="/archive/zip/writer.go.html#6411370">io</a></span><span class="op" id="6418455">.</span><span class="ident" id="6418456">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418464">rawCount</span>&nbsp;&nbsp;<span class="op" id="6418474">*</span><span class="ident" id="6418475"><a href="/archive/zip/writer.go.html#6420164">countWriter</a></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418488">comp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418498"><a href="/archive/zip/writer.go.html#6411370">io</a></span><span class="op" id="6418500">.</span><span class="ident" id="6418501">WriteCloser</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418514">compCount</span>&nbsp;<span class="op" id="6418524">*</span><span class="ident" id="6418525"><a href="/archive/zip/writer.go.html#6420164">countWriter</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418538">crc32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418548"><a href="/archive/zip/writer.go.html#6411348">hash</a></span><span class="op" id="6418552">.</span><span class="ident" id="6418553">Hash32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418561">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6418571">bool</span><br>
<span class="lineno"></span><span class="op" id="6418576">}</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span><span class="keyword" id="6418579">func</span>&nbsp;<span class="op" id="6418584">(</span><span class="ident" id="6418585">w</span>&nbsp;<span class="op" id="6418587">*</span><span class="ident" id="6418588"><a href="/archive/zip/writer.go.html#6418413">fileWriter</a></span><span class="op" id="6418598">)</span>&nbsp;<span class="ident" id="6418600">Write</span><span class="op" id="6418605">(</span><span class="ident" id="6418606">p</span>&nbsp;<span class="op" id="6418608">[</span><span class="op" id="6418609">]</span><span class="builtintype" id="6418610">byte</span><span class="op" id="6418614">)</span>&nbsp;<span class="op" id="6418616">(</span><span class="builtintype" id="6418617">int</span><span class="op" id="6418620">,</span>&nbsp;<span class="builtintype" id="6418622">error</span><span class="op" id="6418627">)</span>&nbsp;<span class="op" id="6418629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418632">if</span>&nbsp;<span class="ident" id="6418635"><a href="/archive/zip/writer.go.html#6418585">w</a></span><span class="op" id="6418636">.</span><span class="ident" id="6418637">closed</span>&nbsp;<span class="op" id="6418644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418648">return</span>&nbsp;<span class="num" id="6418655">0</span><span class="op" id="6418656">,</span>&nbsp;<span class="ident" id="6418658"><a href="/archive/zip/writer.go.html#6411338">errors</a></span><span class="op" id="6418664">.</span><span class="ident" id="6418665">New</span><span class="op" id="6418668">(</span><span class="string" id="6418669">&#34;zip:&nbsp;write&nbsp;to&nbsp;closed&nbsp;file&#34;</span><span class="op" id="6418696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418699">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418702"><a href="/archive/zip/writer.go.html#6418585">w</a></span><span class="op" id="6418703">.</span><span class="ident" id="6418704">crc32</span><span class="op" id="6418709">.</span><span class="ident" id="6418710">Write</span><span class="op" id="6418715">(</span><span class="ident" id="6418716"><a href="/archive/zip/writer.go.html#6418606">p</a></span><span class="op" id="6418717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418720">return</span>&nbsp;<span class="ident" id="6418727"><a href="/archive/zip/writer.go.html#6418585">w</a></span><span class="op" id="6418728">.</span><span class="ident" id="6418729">rawCount</span><span class="op" id="6418737">.</span><span class="ident" id="6418738">Write</span><span class="op" id="6418743">(</span><span class="ident" id="6418744"><a href="/archive/zip/writer.go.html#6418606">p</a></span><span class="op" id="6418745">)</span><br>
<span class="lineno"></span><span class="op" id="6418747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6418750">func</span>&nbsp;<span class="op" id="6418755">(</span><span class="ident" id="6418756">w</span>&nbsp;<span class="op" id="6418758">*</span><span class="ident" id="6418759"><a href="/archive/zip/writer.go.html#6418413">fileWriter</a></span><span class="op" id="6418769">)</span>&nbsp;<span class="builtinfunc" id="6418771">close</span><span class="op" id="6418776">(</span><span class="op" id="6418777">)</span>&nbsp;<span class="builtintype" id="6418779">error</span>&nbsp;<span class="op" id="6418785">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418788">if</span>&nbsp;<span class="ident" id="6418791"><a href="/archive/zip/writer.go.html#6418756">w</a></span><span class="op" id="6418792">.</span><span class="ident" id="6418793">closed</span>&nbsp;<span class="op" id="6418800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418804">return</span>&nbsp;<span class="ident" id="6418811"><a href="/archive/zip/writer.go.html#6411338">errors</a></span><span class="op" id="6418817">.</span><span class="ident" id="6418818">New</span><span class="op" id="6418821">(</span><span class="string" id="6418822">&#34;zip:&nbsp;file&nbsp;closed&nbsp;twice&#34;</span><span class="op" id="6418846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418852"><a href="/archive/zip/writer.go.html#6418756">w</a></span><span class="op" id="6418853">.</span><span class="ident" id="6418854">closed</span>&nbsp;<span class="op" id="6418861">=</span>&nbsp;<span class="ident" id="6418863">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418869">if</span>&nbsp;<span class="ident" id="6418872">err</span>&nbsp;<span class="op" id="6418876">:=</span>&nbsp;<span class="ident" id="6418879"><a href="/archive/zip/writer.go.html#6418756">w</a></span><span class="op" id="6418880">.</span><span class="ident" id="6418881">comp</span><span class="op" id="6418885">.</span><span class="ident" id="6418886">Close</span><span class="op" id="6418891">(</span><span class="op" id="6418892">)</span><span class="op" id="6418893">;</span>&nbsp;<span class="ident" id="6418895"><a href="/archive/zip/writer.go.html#6418872">err</a></span>&nbsp;<span class="op" id="6418899">!=</span>&nbsp;<span class="ident" id="6418902">nil</span>&nbsp;<span class="op" id="6418906">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418910">return</span>&nbsp;<span class="ident" id="6418917"><a href="/archive/zip/writer.go.html#6418872">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6418926">//&nbsp;update&nbsp;FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418948">fh</span>&nbsp;<span class="op" id="6418951">:=</span>&nbsp;<span class="ident" id="6418954"><a href="/archive/zip/writer.go.html#6418756">w</a></span><span class="op" id="6418955">.</span><span class="ident" id="6418956">header</span><span class="op" id="6418962">.</span><span class="ident" id="6418963">FileHeader</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418975"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6418977">.</span><span class="ident" id="6418978">CRC32</span>&nbsp;<span class="op" id="6418984">=</span>&nbsp;<span class="ident" id="6418986"><a href="/archive/zip/writer.go.html#6418756">w</a></span><span class="op" id="6418987">.</span><span class="ident" id="6418988">crc32</span><span class="op" id="6418993">.</span><span class="ident" id="6418994">Sum32</span><span class="op" id="6418999">(</span><span class="op" id="6419000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419003"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419005">.</span><span class="ident" id="6419006">CompressedSize64</span>&nbsp;<span class="op" id="6419023">=</span>&nbsp;<span class="ident" id="6419025">uint64</span><span class="op" id="6419031">(</span><span class="ident" id="6419032"><a href="/archive/zip/writer.go.html#6418756">w</a></span><span class="op" id="6419033">.</span><span class="ident" id="6419034">compCount</span><span class="op" id="6419043">.</span><span class="ident" id="6419044">count</span><span class="op" id="6419049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419052"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419054">.</span><span class="ident" id="6419055">UncompressedSize64</span>&nbsp;<span class="op" id="6419074">=</span>&nbsp;<span class="ident" id="6419076">uint64</span><span class="op" id="6419082">(</span><span class="ident" id="6419083"><a href="/archive/zip/writer.go.html#6418756">w</a></span><span class="op" id="6419084">.</span><span class="ident" id="6419085">rawCount</span><span class="op" id="6419093">.</span><span class="ident" id="6419094">count</span><span class="op" id="6419099">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419103">if</span>&nbsp;<span class="ident" id="6419106"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419108">.</span><span class="ident" id="6419109">isZip64</span><span class="op" id="6419116">(</span><span class="op" id="6419117">)</span>&nbsp;<span class="op" id="6419119">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419123"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419125">.</span><span class="ident" id="6419126">CompressedSize</span>&nbsp;<span class="op" id="6419141">=</span>&nbsp;<span class="ident" id="6419143"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419155"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419157">.</span><span class="ident" id="6419158">UncompressedSize</span>&nbsp;<span class="op" id="6419175">=</span>&nbsp;<span class="ident" id="6419177"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419189"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419191">.</span><span class="ident" id="6419192">ReaderVersion</span>&nbsp;<span class="op" id="6419206">=</span>&nbsp;<span class="ident" id="6419208"><a href="/archive/zip/struct.go.html#6404371">zipVersion45</a></span>&nbsp;<span class="comment" id="6419221">//&nbsp;requires&nbsp;4.5&nbsp;-&nbsp;File&nbsp;uses&nbsp;ZIP64&nbsp;format&nbsp;extensions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6419274">}</span>&nbsp;<span class="keyword" id="6419276">else</span>&nbsp;<span class="op" id="6419281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419285"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419287">.</span><span class="ident" id="6419288">CompressedSize</span>&nbsp;<span class="op" id="6419303">=</span>&nbsp;<span class="builtintype" id="6419305">uint32</span><span class="op" id="6419311">(</span><span class="ident" id="6419312"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419314">.</span><span class="ident" id="6419315">CompressedSize64</span><span class="op" id="6419331">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419335"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419337">.</span><span class="ident" id="6419338">UncompressedSize</span>&nbsp;<span class="op" id="6419355">=</span>&nbsp;<span class="builtintype" id="6419357">uint32</span><span class="op" id="6419363">(</span><span class="ident" id="6419364"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419366">.</span><span class="ident" id="6419367">UncompressedSize64</span><span class="op" id="6419385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6419388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6419392">//&nbsp;Write&nbsp;data&nbsp;descriptor.&nbsp;This&nbsp;is&nbsp;more&nbsp;complicated&nbsp;than&nbsp;one&nbsp;would</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6419459">//&nbsp;think,&nbsp;see&nbsp;e.g.&nbsp;comments&nbsp;in&nbsp;zipfile.c:putextended()&nbsp;and</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6419519">//&nbsp;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7073588.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6419583">//&nbsp;The&nbsp;approach&nbsp;here&nbsp;is&nbsp;to&nbsp;write&nbsp;8&nbsp;byte&nbsp;sizes&nbsp;if&nbsp;needed&nbsp;without</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6419648">//&nbsp;adding&nbsp;a&nbsp;zip64&nbsp;extra&nbsp;in&nbsp;the&nbsp;local&nbsp;header&nbsp;(too&nbsp;late&nbsp;anyway).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419712">var</span>&nbsp;<span class="ident" id="6419716">buf</span>&nbsp;<span class="op" id="6419720">[</span><span class="op" id="6419721">]</span><span class="builtintype" id="6419722">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419728">if</span>&nbsp;<span class="ident" id="6419731"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419733">.</span><span class="ident" id="6419734">isZip64</span><span class="op" id="6419741">(</span><span class="op" id="6419742">)</span>&nbsp;<span class="op" id="6419744">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419748"><a href="/archive/zip/writer.go.html#6419716">buf</a></span>&nbsp;<span class="op" id="6419752">=</span>&nbsp;<span class="builtinfunc" id="6419754">make</span><span class="op" id="6419758">(</span><span class="op" id="6419759">[</span><span class="op" id="6419760">]</span><span class="builtintype" id="6419761">byte</span><span class="op" id="6419765">,</span>&nbsp;<span class="ident" id="6419767"><a href="/archive/zip/struct.go.html#6404011">dataDescriptor64Len</a></span><span class="op" id="6419786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6419789">}</span>&nbsp;<span class="keyword" id="6419791">else</span>&nbsp;<span class="op" id="6419796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419800"><a href="/archive/zip/writer.go.html#6419716">buf</a></span>&nbsp;<span class="op" id="6419804">=</span>&nbsp;<span class="builtinfunc" id="6419806">make</span><span class="op" id="6419810">(</span><span class="op" id="6419811">[</span><span class="op" id="6419812">]</span><span class="builtintype" id="6419813">byte</span><span class="op" id="6419817">,</span>&nbsp;<span class="ident" id="6419819"><a href="/archive/zip/struct.go.html#6403905">dataDescriptorLen</a></span><span class="op" id="6419836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6419839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419842">b</span>&nbsp;<span class="op" id="6419844">:=</span>&nbsp;<span class="ident" id="6419847"><a href="/archive/zip/writer.go.html#6420427">writeBuf</a></span><span class="op" id="6419855">(</span><span class="ident" id="6419856"><a href="/archive/zip/writer.go.html#6419716">buf</a></span><span class="op" id="6419859">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419862"><a href="/archive/zip/writer.go.html#6419842">b</a></span><span class="op" id="6419863">.</span><span class="builtintype" id="6419864">uint32</span><span class="op" id="6419870">(</span><span class="ident" id="6419871"><a href="/archive/zip/struct.go.html#6403636">dataDescriptorSignature</a></span><span class="op" id="6419894">)</span>&nbsp;<span class="comment" id="6419896">//&nbsp;de-facto&nbsp;standard,&nbsp;required&nbsp;by&nbsp;OS&nbsp;X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419936"><a href="/archive/zip/writer.go.html#6419842">b</a></span><span class="op" id="6419937">.</span><span class="builtintype" id="6419938">uint32</span><span class="op" id="6419944">(</span><span class="ident" id="6419945"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419947">.</span><span class="ident" id="6419948">CRC32</span><span class="op" id="6419953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419956">if</span>&nbsp;<span class="ident" id="6419959"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419961">.</span><span class="ident" id="6419962">isZip64</span><span class="op" id="6419969">(</span><span class="op" id="6419970">)</span>&nbsp;<span class="op" id="6419972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419976"><a href="/archive/zip/writer.go.html#6419842">b</a></span><span class="op" id="6419977">.</span><span class="ident" id="6419978">uint64</span><span class="op" id="6419984">(</span><span class="ident" id="6419985"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6419987">.</span><span class="ident" id="6419988">CompressedSize64</span><span class="op" id="6420004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420008"><a href="/archive/zip/writer.go.html#6419842">b</a></span><span class="op" id="6420009">.</span><span class="ident" id="6420010">uint64</span><span class="op" id="6420016">(</span><span class="ident" id="6420017"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6420019">.</span><span class="ident" id="6420020">UncompressedSize64</span><span class="op" id="6420038">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6420041">}</span>&nbsp;<span class="keyword" id="6420043">else</span>&nbsp;<span class="op" id="6420048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420052"><a href="/archive/zip/writer.go.html#6419842">b</a></span><span class="op" id="6420053">.</span><span class="builtintype" id="6420054">uint32</span><span class="op" id="6420060">(</span><span class="ident" id="6420061"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6420063">.</span><span class="ident" id="6420064">CompressedSize</span><span class="op" id="6420078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420082"><a href="/archive/zip/writer.go.html#6419842">b</a></span><span class="op" id="6420083">.</span><span class="builtintype" id="6420084">uint32</span><span class="op" id="6420090">(</span><span class="ident" id="6420091"><a href="/archive/zip/writer.go.html#6418948">fh</a></span><span class="op" id="6420093">.</span><span class="ident" id="6420094">UncompressedSize</span><span class="op" id="6420110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6420113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420116">_</span><span class="op" id="6420117">,</span>&nbsp;<span class="ident" id="6420119">err</span>&nbsp;<span class="op" id="6420123">:=</span>&nbsp;<span class="ident" id="6420126"><a href="/archive/zip/writer.go.html#6418756">w</a></span><span class="op" id="6420127">.</span><span class="ident" id="6420128">zipw</span><span class="op" id="6420132">.</span><span class="ident" id="6420133">Write</span><span class="op" id="6420138">(</span><span class="ident" id="6420139"><a href="/archive/zip/writer.go.html#6419716">buf</a></span><span class="op" id="6420142">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420145">return</span>&nbsp;<span class="ident" id="6420152"><a href="/archive/zip/writer.go.html#6420119">err</a></span><br>
<span class="lineno"></span><span class="op" id="6420156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6420159">type</span>&nbsp;<span class="ident" id="6420164">countWriter</span>&nbsp;<span class="keyword" id="6420176">struct</span>&nbsp;<span class="op" id="6420183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420186">w</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420192"><a href="/archive/zip/writer.go.html#6411370">io</a></span><span class="op" id="6420194">.</span><span class="ident" id="6420195">Writer</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420203">count</span>&nbsp;<span class="ident" id="6420209">int64</span><br>
<span class="lineno"></span><span class="op" id="6420215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6420218">func</span>&nbsp;<span class="op" id="6420223">(</span><span class="ident" id="6420224">w</span>&nbsp;<span class="op" id="6420226">*</span><span class="ident" id="6420227"><a href="/archive/zip/writer.go.html#6420164">countWriter</a></span><span class="op" id="6420238">)</span>&nbsp;<span class="ident" id="6420240">Write</span><span class="op" id="6420245">(</span><span class="ident" id="6420246">p</span>&nbsp;<span class="op" id="6420248">[</span><span class="op" id="6420249">]</span><span class="builtintype" id="6420250">byte</span><span class="op" id="6420254">)</span>&nbsp;<span class="op" id="6420256">(</span><span class="builtintype" id="6420257">int</span><span class="op" id="6420260">,</span>&nbsp;<span class="builtintype" id="6420262">error</span><span class="op" id="6420267">)</span>&nbsp;<span class="op" id="6420269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420272">n</span><span class="op" id="6420273">,</span>&nbsp;<span class="ident" id="6420275">err</span>&nbsp;<span class="op" id="6420279">:=</span>&nbsp;<span class="ident" id="6420282"><a href="/archive/zip/writer.go.html#6420224">w</a></span><span class="op" id="6420283">.</span><span class="ident" id="6420284">w</span><span class="op" id="6420285">.</span><span class="ident" id="6420286">Write</span><span class="op" id="6420291">(</span><span class="ident" id="6420292"><a href="/archive/zip/writer.go.html#6420246">p</a></span><span class="op" id="6420293">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420296"><a href="/archive/zip/writer.go.html#6420224">w</a></span><span class="op" id="6420297">.</span><span class="ident" id="6420298">count</span>&nbsp;<span class="op" id="6420304">+=</span>&nbsp;<span class="ident" id="6420307">int64</span><span class="op" id="6420312">(</span><span class="ident" id="6420313"><a href="/archive/zip/writer.go.html#6420272">n</a></span><span class="op" id="6420314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420317">return</span>&nbsp;<span class="ident" id="6420324"><a href="/archive/zip/writer.go.html#6420272">n</a></span><span class="op" id="6420325">,</span>&nbsp;<span class="ident" id="6420327"><a href="/archive/zip/writer.go.html#6420275">err</a></span><br>
<span class="lineno"></span><span class="op" id="6420331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6420334">type</span>&nbsp;<span class="ident" id="6420339">nopCloser</span>&nbsp;<span class="keyword" id="6420349">struct</span>&nbsp;<span class="op" id="6420356">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420359"><a href="/archive/zip/writer.go.html#6411370">io</a></span><span class="op" id="6420361">.</span><span class="ident" id="6420362">Writer</span><br>
<span class="lineno"></span><span class="op" id="6420369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6420372">func</span>&nbsp;<span class="op" id="6420377">(</span><span class="ident" id="6420378">w</span>&nbsp;<span class="ident" id="6420380"><a href="/archive/zip/writer.go.html#6420339">nopCloser</a></span><span class="op" id="6420389">)</span>&nbsp;<span class="ident" id="6420391">Close</span><span class="op" id="6420396">(</span><span class="op" id="6420397">)</span>&nbsp;<span class="builtintype" id="6420399">error</span>&nbsp;<span class="op" id="6420405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420408">return</span>&nbsp;<span class="ident" id="6420415">nil</span><br>
<span class="lineno">340</span><span class="op" id="6420419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6420422">type</span>&nbsp;<span class="ident" id="6420427">writeBuf</span>&nbsp;<span class="op" id="6420436">[</span><span class="op" id="6420437">]</span><span class="builtintype" id="6420438">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6420444">func</span>&nbsp;<span class="op" id="6420449">(</span><span class="ident" id="6420450">b</span>&nbsp;<span class="op" id="6420452">*</span><span class="ident" id="6420453"><a href="/archive/zip/writer.go.html#6420427">writeBuf</a></span><span class="op" id="6420461">)</span>&nbsp;<span class="builtintype" id="6420463">uint16</span><span class="op" id="6420469">(</span><span class="ident" id="6420470">v</span>&nbsp;<span class="builtintype" id="6420472">uint16</span><span class="op" id="6420478">)</span>&nbsp;<span class="op" id="6420480">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420483"><a href="/archive/zip/writer.go.html#6411319">binary</a></span><span class="op" id="6420489">.</span><span class="ident" id="6420490">LittleEndian</span><span class="op" id="6420502">.</span><span class="ident" id="6420503">PutUint16</span><span class="op" id="6420512">(</span><span class="op" id="6420513">*</span><span class="ident" id="6420514"><a href="/archive/zip/writer.go.html#6420450">b</a></span><span class="op" id="6420515">,</span>&nbsp;<span class="ident" id="6420517"><a href="/archive/zip/writer.go.html#6420470">v</a></span><span class="op" id="6420518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6420521">*</span><span class="ident" id="6420522"><a href="/archive/zip/writer.go.html#6420450">b</a></span>&nbsp;<span class="op" id="6420524">=</span>&nbsp;<span class="op" id="6420526">(</span><span class="op" id="6420527">*</span><span class="ident" id="6420528"><a href="/archive/zip/writer.go.html#6420450">b</a></span><span class="op" id="6420529">)</span><span class="op" id="6420530">[</span><span class="num" id="6420531">2</span><span class="op" id="6420532">:</span><span class="op" id="6420533">]</span><br>
<span class="lineno"></span><span class="op" id="6420535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6420538">func</span>&nbsp;<span class="op" id="6420543">(</span><span class="ident" id="6420544">b</span>&nbsp;<span class="op" id="6420546">*</span><span class="ident" id="6420547"><a href="/archive/zip/writer.go.html#6420427">writeBuf</a></span><span class="op" id="6420555">)</span>&nbsp;<span class="builtintype" id="6420557">uint32</span><span class="op" id="6420563">(</span><span class="ident" id="6420564">v</span>&nbsp;<span class="builtintype" id="6420566">uint32</span><span class="op" id="6420572">)</span>&nbsp;<span class="op" id="6420574">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420577"><a href="/archive/zip/writer.go.html#6411319">binary</a></span><span class="op" id="6420583">.</span><span class="ident" id="6420584">LittleEndian</span><span class="op" id="6420596">.</span><span class="ident" id="6420597">PutUint32</span><span class="op" id="6420606">(</span><span class="op" id="6420607">*</span><span class="ident" id="6420608"><a href="/archive/zip/writer.go.html#6420544">b</a></span><span class="op" id="6420609">,</span>&nbsp;<span class="ident" id="6420611"><a href="/archive/zip/writer.go.html#6420564">v</a></span><span class="op" id="6420612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6420615">*</span><span class="ident" id="6420616"><a href="/archive/zip/writer.go.html#6420544">b</a></span>&nbsp;<span class="op" id="6420618">=</span>&nbsp;<span class="op" id="6420620">(</span><span class="op" id="6420621">*</span><span class="ident" id="6420622"><a href="/archive/zip/writer.go.html#6420544">b</a></span><span class="op" id="6420623">)</span><span class="op" id="6420624">[</span><span class="num" id="6420625">4</span><span class="op" id="6420626">:</span><span class="op" id="6420627">]</span><br>
<span class="lineno"></span><span class="op" id="6420629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6420632">func</span>&nbsp;<span class="op" id="6420637">(</span><span class="ident" id="6420638">b</span>&nbsp;<span class="op" id="6420640">*</span><span class="ident" id="6420641"><a href="/archive/zip/writer.go.html#6420427">writeBuf</a></span><span class="op" id="6420649">)</span>&nbsp;<span class="ident" id="6420651">uint64</span><span class="op" id="6420657">(</span><span class="ident" id="6420658">v</span>&nbsp;<span class="ident" id="6420660">uint64</span><span class="op" id="6420666">)</span>&nbsp;<span class="op" id="6420668">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420671"><a href="/archive/zip/writer.go.html#6411319">binary</a></span><span class="op" id="6420677">.</span><span class="ident" id="6420678">LittleEndian</span><span class="op" id="6420690">.</span><span class="ident" id="6420691">PutUint64</span><span class="op" id="6420700">(</span><span class="op" id="6420701">*</span><span class="ident" id="6420702"><a href="/archive/zip/writer.go.html#6420638">b</a></span><span class="op" id="6420703">,</span>&nbsp;<span class="ident" id="6420705"><a href="/archive/zip/writer.go.html#6420658">v</a></span><span class="op" id="6420706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6420709">*</span><span class="ident" id="6420710"><a href="/archive/zip/writer.go.html#6420638">b</a></span>&nbsp;<span class="op" id="6420712">=</span>&nbsp;<span class="op" id="6420714">(</span><span class="op" id="6420715">*</span><span class="ident" id="6420716"><a href="/archive/zip/writer.go.html#6420638">b</a></span><span class="op" id="6420717">)</span><span class="op" id="6420718">[</span><span class="num" id="6420719">8</span><span class="op" id="6420720">:</span><span class="op" id="6420721">]</span><br>
<span class="lineno"></span><span class="op" id="6420723">}</span>
</div>
</body>
</html>
