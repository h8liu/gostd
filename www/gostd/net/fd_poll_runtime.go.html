<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html" class="current">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3730301">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3730356">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3730410">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3730461">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;windows&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3730534">package</span>&nbsp;<span class="ident" id="3730542">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3730547">import</span>&nbsp;<span class="op" id="3730554">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3730557">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3730565">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3730576">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3730583">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3730586">//&nbsp;runtimeNano&nbsp;returns&nbsp;the&nbsp;current&nbsp;value&nbsp;of&nbsp;the&nbsp;runtime&nbsp;clock&nbsp;in&nbsp;nanoseconds.</span><br>
<span class="lineno"></span><span class="keyword" id="3730664">func</span>&nbsp;<span class="ident" id="3730669">runtimeNano</span><span class="op" id="3730680">(</span><span class="op" id="3730681">)</span>&nbsp;<span class="builtintype" id="3730683">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3730690">func</span>&nbsp;<span class="ident" id="3730695">runtime_pollServerInit</span><span class="op" id="3730717">(</span><span class="op" id="3730718">)</span><br>
<span class="lineno"></span><span class="keyword" id="3730720">func</span>&nbsp;<span class="ident" id="3730725">runtime_pollOpen</span><span class="op" id="3730741">(</span><span class="ident" id="3730742">fd</span>&nbsp;<span class="builtintype" id="3730745">uintptr</span><span class="op" id="3730752">)</span>&nbsp;<span class="op" id="3730754">(</span><span class="builtintype" id="3730755">uintptr</span><span class="op" id="3730762">,</span>&nbsp;<span class="builtintype" id="3730764">int</span><span class="op" id="3730767">)</span><br>
<span class="lineno">20</span><span class="keyword" id="3730769">func</span>&nbsp;<span class="ident" id="3730774">runtime_pollClose</span><span class="op" id="3730791">(</span><span class="ident" id="3730792">ctx</span>&nbsp;<span class="builtintype" id="3730796">uintptr</span><span class="op" id="3730803">)</span><br>
<span class="lineno"></span><span class="keyword" id="3730805">func</span>&nbsp;<span class="ident" id="3730810">runtime_pollWait</span><span class="op" id="3730826">(</span><span class="ident" id="3730827">ctx</span>&nbsp;<span class="builtintype" id="3730831">uintptr</span><span class="op" id="3730838">,</span>&nbsp;<span class="ident" id="3730840">mode</span>&nbsp;<span class="builtintype" id="3730845">int</span><span class="op" id="3730848">)</span>&nbsp;<span class="builtintype" id="3730850">int</span><br>
<span class="lineno"></span><span class="keyword" id="3730854">func</span>&nbsp;<span class="ident" id="3730859">runtime_pollWaitCanceled</span><span class="op" id="3730883">(</span><span class="ident" id="3730884">ctx</span>&nbsp;<span class="builtintype" id="3730888">uintptr</span><span class="op" id="3730895">,</span>&nbsp;<span class="ident" id="3730897">mode</span>&nbsp;<span class="builtintype" id="3730902">int</span><span class="op" id="3730905">)</span>&nbsp;<span class="builtintype" id="3730907">int</span><br>
<span class="lineno"></span><span class="keyword" id="3730911">func</span>&nbsp;<span class="ident" id="3730916">runtime_pollReset</span><span class="op" id="3730933">(</span><span class="ident" id="3730934">ctx</span>&nbsp;<span class="builtintype" id="3730938">uintptr</span><span class="op" id="3730945">,</span>&nbsp;<span class="ident" id="3730947">mode</span>&nbsp;<span class="builtintype" id="3730952">int</span><span class="op" id="3730955">)</span>&nbsp;<span class="builtintype" id="3730957">int</span><br>
<span class="lineno"></span><span class="keyword" id="3730961">func</span>&nbsp;<span class="ident" id="3730966">runtime_pollSetDeadline</span><span class="op" id="3730989">(</span><span class="ident" id="3730990">ctx</span>&nbsp;<span class="builtintype" id="3730994">uintptr</span><span class="op" id="3731001">,</span>&nbsp;<span class="ident" id="3731003">d</span>&nbsp;<span class="builtintype" id="3731005">int64</span><span class="op" id="3731010">,</span>&nbsp;<span class="ident" id="3731012">mode</span>&nbsp;<span class="builtintype" id="3731017">int</span><span class="op" id="3731020">)</span><br>
<span class="lineno">25</span><span class="keyword" id="3731022">func</span>&nbsp;<span class="ident" id="3731027">runtime_pollUnblock</span><span class="op" id="3731046">(</span><span class="ident" id="3731047">ctx</span>&nbsp;<span class="builtintype" id="3731051">uintptr</span><span class="op" id="3731058">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3731061">type</span>&nbsp;<span class="ident" id="3731066">pollDesc</span>&nbsp;<span class="keyword" id="3731075">struct</span>&nbsp;<span class="op" id="3731082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3731085">runtimeCtx</span>&nbsp;<span class="builtintype" id="3731096">uintptr</span><br>
<span class="lineno"></span><span class="op" id="3731104">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="3731107">var</span>&nbsp;<span class="ident" id="3731111">serverInit</span>&nbsp;<span class="ident" id="3731122">sync</span><span class="op" id="3731126">.</span><span class="ident" id="3731127">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3731133">func</span>&nbsp;<span class="op" id="3731138">(</span><span class="ident" id="3731139">pd</span>&nbsp;<span class="op" id="3731142">*</span><span class="ident" id="3731143">pollDesc</span><span class="op" id="3731151">)</span>&nbsp;<span class="ident" id="3731153">Init</span><span class="op" id="3731157">(</span><span class="ident" id="3731158">fd</span>&nbsp;<span class="op" id="3731161">*</span><span class="ident" id="3731162">netFD</span><span class="op" id="3731167">)</span>&nbsp;<span class="builtintype" id="3731169">error</span>&nbsp;<span class="op" id="3731175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3731178">serverInit</span><span class="op" id="3731188">.</span><span class="ident" id="3731189">Do</span><span class="op" id="3731191">(</span><span class="ident" id="3731192">runtime_pollServerInit</span><span class="op" id="3731214">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3731217">ctx</span><span class="op" id="3731220">,</span>&nbsp;<span class="ident" id="3731222">errno</span>&nbsp;<span class="op" id="3731228">:=</span>&nbsp;<span class="ident" id="3731231">runtime_pollOpen</span><span class="op" id="3731247">(</span><span class="builtintype" id="3731248">uintptr</span><span class="op" id="3731255">(</span><span class="ident" id="3731256">fd</span><span class="op" id="3731258">.</span><span class="ident" id="3731259">sysfd</span><span class="op" id="3731264">)</span><span class="op" id="3731265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3731268">if</span>&nbsp;<span class="ident" id="3731271">errno</span>&nbsp;<span class="op" id="3731277">!=</span>&nbsp;<span class="num" id="3731280">0</span>&nbsp;<span class="op" id="3731282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3731286">return</span>&nbsp;<span class="ident" id="3731293">syscall</span><span class="op" id="3731300">.</span><span class="ident" id="3731301">Errno</span><span class="op" id="3731306">(</span><span class="ident" id="3731307">errno</span><span class="op" id="3731312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3731315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3731318">pd</span><span class="op" id="3731320">.</span><span class="ident" id="3731321">runtimeCtx</span>&nbsp;<span class="op" id="3731332">=</span>&nbsp;<span class="ident" id="3731334">ctx</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3731339">return</span>&nbsp;<span class="builtintype" id="3731346">nil</span><br>
<span class="lineno"></span><span class="op" id="3731350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3731353">func</span>&nbsp;<span class="op" id="3731358">(</span><span class="ident" id="3731359">pd</span>&nbsp;<span class="op" id="3731362">*</span><span class="ident" id="3731363">pollDesc</span><span class="op" id="3731371">)</span>&nbsp;<span class="ident" id="3731373">Close</span><span class="op" id="3731378">(</span><span class="op" id="3731379">)</span>&nbsp;<span class="op" id="3731381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3731384">if</span>&nbsp;<span class="ident" id="3731387">pd</span><span class="op" id="3731389">.</span><span class="ident" id="3731390">runtimeCtx</span>&nbsp;<span class="op" id="3731401">==</span>&nbsp;<span class="num" id="3731404">0</span>&nbsp;<span class="op" id="3731406">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3731410">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3731418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3731421">runtime_pollClose</span><span class="op" id="3731438">(</span><span class="ident" id="3731439">pd</span><span class="op" id="3731441">.</span><span class="ident" id="3731442">runtimeCtx</span><span class="op" id="3731452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3731455">pd</span><span class="op" id="3731457">.</span><span class="ident" id="3731458">runtimeCtx</span>&nbsp;<span class="op" id="3731469">=</span>&nbsp;<span class="num" id="3731471">0</span><br>
<span class="lineno"></span><span class="op" id="3731473">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3731476">func</span>&nbsp;<span class="op" id="3731481">(</span><span class="ident" id="3731482">pd</span>&nbsp;<span class="op" id="3731485">*</span><span class="ident" id="3731486">pollDesc</span><span class="op" id="3731494">)</span>&nbsp;<span class="ident" id="3731496">Lock</span><span class="op" id="3731500">(</span><span class="op" id="3731501">)</span>&nbsp;<span class="op" id="3731503">{</span><br>
<span class="lineno"></span><span class="op" id="3731505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3731508">func</span>&nbsp;<span class="op" id="3731513">(</span><span class="ident" id="3731514">pd</span>&nbsp;<span class="op" id="3731517">*</span><span class="ident" id="3731518">pollDesc</span><span class="op" id="3731526">)</span>&nbsp;<span class="ident" id="3731528">Unlock</span><span class="op" id="3731534">(</span><span class="op" id="3731535">)</span>&nbsp;<span class="op" id="3731537">{</span><br>
<span class="lineno">55</span><span class="op" id="3731539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3731542">func</span>&nbsp;<span class="op" id="3731547">(</span><span class="ident" id="3731548">pd</span>&nbsp;<span class="op" id="3731551">*</span><span class="ident" id="3731552">pollDesc</span><span class="op" id="3731560">)</span>&nbsp;<span class="ident" id="3731562">Wakeup</span><span class="op" id="3731568">(</span><span class="op" id="3731569">)</span>&nbsp;<span class="op" id="3731571">{</span><br>
<span class="lineno"></span><span class="op" id="3731573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="3731576">//&nbsp;Evict&nbsp;evicts&nbsp;fd&nbsp;from&nbsp;the&nbsp;pending&nbsp;list,&nbsp;unblocking&nbsp;any&nbsp;I/O&nbsp;running&nbsp;on&nbsp;fd.</span><br>
<span class="lineno"></span><span class="comment" id="3731652">//&nbsp;Return&nbsp;value&nbsp;is&nbsp;whether&nbsp;the&nbsp;pollServer&nbsp;should&nbsp;be&nbsp;woken&nbsp;up.</span><br>
<span class="lineno"></span><span class="keyword" id="3731714">func</span>&nbsp;<span class="op" id="3731719">(</span><span class="ident" id="3731720">pd</span>&nbsp;<span class="op" id="3731723">*</span><span class="ident" id="3731724">pollDesc</span><span class="op" id="3731732">)</span>&nbsp;<span class="ident" id="3731734">Evict</span><span class="op" id="3731739">(</span><span class="op" id="3731740">)</span>&nbsp;<span class="builtintype" id="3731742">bool</span>&nbsp;<span class="op" id="3731747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3731750">if</span>&nbsp;<span class="ident" id="3731753">pd</span><span class="op" id="3731755">.</span><span class="ident" id="3731756">runtimeCtx</span>&nbsp;<span class="op" id="3731767">==</span>&nbsp;<span class="num" id="3731770">0</span>&nbsp;<span class="op" id="3731772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3731776">return</span>&nbsp;<span class="builtintype" id="3731783">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3731790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3731793">runtime_pollUnblock</span><span class="op" id="3731812">(</span><span class="ident" id="3731813">pd</span><span class="op" id="3731815">.</span><span class="ident" id="3731816">runtimeCtx</span><span class="op" id="3731826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3731829">return</span>&nbsp;<span class="builtintype" id="3731836">false</span><br>
<span class="lineno"></span><span class="op" id="3731842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="3731845">func</span>&nbsp;<span class="op" id="3731850">(</span><span class="ident" id="3731851">pd</span>&nbsp;<span class="op" id="3731854">*</span><span class="ident" id="3731855">pollDesc</span><span class="op" id="3731863">)</span>&nbsp;<span class="ident" id="3731865">Prepare</span><span class="op" id="3731872">(</span><span class="ident" id="3731873">mode</span>&nbsp;<span class="builtintype" id="3731878">int</span><span class="op" id="3731881">)</span>&nbsp;<span class="builtintype" id="3731883">error</span>&nbsp;<span class="op" id="3731889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3731892">res</span>&nbsp;<span class="op" id="3731896">:=</span>&nbsp;<span class="ident" id="3731899">runtime_pollReset</span><span class="op" id="3731916">(</span><span class="ident" id="3731917">pd</span><span class="op" id="3731919">.</span><span class="ident" id="3731920">runtimeCtx</span><span class="op" id="3731930">,</span>&nbsp;<span class="ident" id="3731932">mode</span><span class="op" id="3731936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3731939">return</span>&nbsp;<span class="ident" id="3731946">convertErr</span><span class="op" id="3731956">(</span><span class="ident" id="3731957">res</span><span class="op" id="3731960">)</span><br>
<span class="lineno"></span><span class="op" id="3731962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="3731965">func</span>&nbsp;<span class="op" id="3731970">(</span><span class="ident" id="3731971">pd</span>&nbsp;<span class="op" id="3731974">*</span><span class="ident" id="3731975">pollDesc</span><span class="op" id="3731983">)</span>&nbsp;<span class="ident" id="3731985">PrepareRead</span><span class="op" id="3731996">(</span><span class="op" id="3731997">)</span>&nbsp;<span class="builtintype" id="3731999">error</span>&nbsp;<span class="op" id="3732005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732008">return</span>&nbsp;<span class="ident" id="3732015">pd</span><span class="op" id="3732017">.</span><span class="ident" id="3732018">Prepare</span><span class="op" id="3732025">(</span><span class="string" id="3732026">&#39;r&#39;</span><span class="op" id="3732029">)</span><br>
<span class="lineno"></span><span class="op" id="3732031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3732034">func</span>&nbsp;<span class="op" id="3732039">(</span><span class="ident" id="3732040">pd</span>&nbsp;<span class="op" id="3732043">*</span><span class="ident" id="3732044">pollDesc</span><span class="op" id="3732052">)</span>&nbsp;<span class="ident" id="3732054">PrepareWrite</span><span class="op" id="3732066">(</span><span class="op" id="3732067">)</span>&nbsp;<span class="builtintype" id="3732069">error</span>&nbsp;<span class="op" id="3732075">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732078">return</span>&nbsp;<span class="ident" id="3732085">pd</span><span class="op" id="3732087">.</span><span class="ident" id="3732088">Prepare</span><span class="op" id="3732095">(</span><span class="string" id="3732096">&#39;w&#39;</span><span class="op" id="3732099">)</span><br>
<span class="lineno"></span><span class="op" id="3732101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3732104">func</span>&nbsp;<span class="op" id="3732109">(</span><span class="ident" id="3732110">pd</span>&nbsp;<span class="op" id="3732113">*</span><span class="ident" id="3732114">pollDesc</span><span class="op" id="3732122">)</span>&nbsp;<span class="ident" id="3732124">Wait</span><span class="op" id="3732128">(</span><span class="ident" id="3732129">mode</span>&nbsp;<span class="builtintype" id="3732134">int</span><span class="op" id="3732137">)</span>&nbsp;<span class="builtintype" id="3732139">error</span>&nbsp;<span class="op" id="3732145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3732148">res</span>&nbsp;<span class="op" id="3732152">:=</span>&nbsp;<span class="ident" id="3732155">runtime_pollWait</span><span class="op" id="3732171">(</span><span class="ident" id="3732172">pd</span><span class="op" id="3732174">.</span><span class="ident" id="3732175">runtimeCtx</span><span class="op" id="3732185">,</span>&nbsp;<span class="ident" id="3732187">mode</span><span class="op" id="3732191">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732194">return</span>&nbsp;<span class="ident" id="3732201">convertErr</span><span class="op" id="3732211">(</span><span class="ident" id="3732212">res</span><span class="op" id="3732215">)</span><br>
<span class="lineno"></span><span class="op" id="3732217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3732220">func</span>&nbsp;<span class="op" id="3732225">(</span><span class="ident" id="3732226">pd</span>&nbsp;<span class="op" id="3732229">*</span><span class="ident" id="3732230">pollDesc</span><span class="op" id="3732238">)</span>&nbsp;<span class="ident" id="3732240">WaitRead</span><span class="op" id="3732248">(</span><span class="op" id="3732249">)</span>&nbsp;<span class="builtintype" id="3732251">error</span>&nbsp;<span class="op" id="3732257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732260">return</span>&nbsp;<span class="ident" id="3732267">pd</span><span class="op" id="3732269">.</span><span class="ident" id="3732270">Wait</span><span class="op" id="3732274">(</span><span class="string" id="3732275">&#39;r&#39;</span><span class="op" id="3732278">)</span><br>
<span class="lineno">90</span><span class="op" id="3732280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3732283">func</span>&nbsp;<span class="op" id="3732288">(</span><span class="ident" id="3732289">pd</span>&nbsp;<span class="op" id="3732292">*</span><span class="ident" id="3732293">pollDesc</span><span class="op" id="3732301">)</span>&nbsp;<span class="ident" id="3732303">WaitWrite</span><span class="op" id="3732312">(</span><span class="op" id="3732313">)</span>&nbsp;<span class="builtintype" id="3732315">error</span>&nbsp;<span class="op" id="3732321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732324">return</span>&nbsp;<span class="ident" id="3732331">pd</span><span class="op" id="3732333">.</span><span class="ident" id="3732334">Wait</span><span class="op" id="3732338">(</span><span class="string" id="3732339">&#39;w&#39;</span><span class="op" id="3732342">)</span><br>
<span class="lineno"></span><span class="op" id="3732344">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="3732347">func</span>&nbsp;<span class="op" id="3732352">(</span><span class="ident" id="3732353">pd</span>&nbsp;<span class="op" id="3732356">*</span><span class="ident" id="3732357">pollDesc</span><span class="op" id="3732365">)</span>&nbsp;<span class="ident" id="3732367">WaitCanceled</span><span class="op" id="3732379">(</span><span class="ident" id="3732380">mode</span>&nbsp;<span class="builtintype" id="3732385">int</span><span class="op" id="3732388">)</span>&nbsp;<span class="op" id="3732390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3732393">runtime_pollWaitCanceled</span><span class="op" id="3732417">(</span><span class="ident" id="3732418">pd</span><span class="op" id="3732420">.</span><span class="ident" id="3732421">runtimeCtx</span><span class="op" id="3732431">,</span>&nbsp;<span class="ident" id="3732433">mode</span><span class="op" id="3732437">)</span><br>
<span class="lineno"></span><span class="op" id="3732439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="3732442">func</span>&nbsp;<span class="op" id="3732447">(</span><span class="ident" id="3732448">pd</span>&nbsp;<span class="op" id="3732451">*</span><span class="ident" id="3732452">pollDesc</span><span class="op" id="3732460">)</span>&nbsp;<span class="ident" id="3732462">WaitCanceledRead</span><span class="op" id="3732478">(</span><span class="op" id="3732479">)</span>&nbsp;<span class="op" id="3732481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3732484">pd</span><span class="op" id="3732486">.</span><span class="ident" id="3732487">WaitCanceled</span><span class="op" id="3732499">(</span><span class="string" id="3732500">&#39;r&#39;</span><span class="op" id="3732503">)</span><br>
<span class="lineno"></span><span class="op" id="3732505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3732508">func</span>&nbsp;<span class="op" id="3732513">(</span><span class="ident" id="3732514">pd</span>&nbsp;<span class="op" id="3732517">*</span><span class="ident" id="3732518">pollDesc</span><span class="op" id="3732526">)</span>&nbsp;<span class="ident" id="3732528">WaitCanceledWrite</span><span class="op" id="3732545">(</span><span class="op" id="3732546">)</span>&nbsp;<span class="op" id="3732548">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3732551">pd</span><span class="op" id="3732553">.</span><span class="ident" id="3732554">WaitCanceled</span><span class="op" id="3732566">(</span><span class="string" id="3732567">&#39;w&#39;</span><span class="op" id="3732570">)</span><br>
<span class="lineno"></span><span class="op" id="3732572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3732575">func</span>&nbsp;<span class="ident" id="3732580">convertErr</span><span class="op" id="3732590">(</span><span class="ident" id="3732591">res</span>&nbsp;<span class="builtintype" id="3732595">int</span><span class="op" id="3732598">)</span>&nbsp;<span class="builtintype" id="3732600">error</span>&nbsp;<span class="op" id="3732606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732609">switch</span>&nbsp;<span class="ident" id="3732616">res</span>&nbsp;<span class="op" id="3732620">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732623">case</span>&nbsp;<span class="num" id="3732628">0</span><span class="op" id="3732629">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732633">return</span>&nbsp;<span class="builtintype" id="3732640">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732645">case</span>&nbsp;<span class="num" id="3732650">1</span><span class="op" id="3732651">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732655">return</span>&nbsp;<span class="ident" id="3732662">errClosing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732674">case</span>&nbsp;<span class="num" id="3732679">2</span><span class="op" id="3732680">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732684">return</span>&nbsp;<span class="ident" id="3732691">errTimeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3732703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3732706">println</span><span class="op" id="3732713">(</span><span class="string" id="3732714">&#34;unreachable:&nbsp;&#34;</span><span class="op" id="3732729">,</span>&nbsp;<span class="ident" id="3732731">res</span><span class="op" id="3732734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3732737">panic</span><span class="op" id="3732742">(</span><span class="string" id="3732743">&#34;unreachable&#34;</span><span class="op" id="3732756">)</span><br>
<span class="lineno"></span><span class="op" id="3732758">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="3732761">func</span>&nbsp;<span class="op" id="3732766">(</span><span class="ident" id="3732767">fd</span>&nbsp;<span class="op" id="3732770">*</span><span class="ident" id="3732771">netFD</span><span class="op" id="3732776">)</span>&nbsp;<span class="ident" id="3732778">setDeadline</span><span class="op" id="3732789">(</span><span class="ident" id="3732790">t</span>&nbsp;<span class="ident" id="3732792">time</span><span class="op" id="3732796">.</span><span class="ident" id="3732797">Time</span><span class="op" id="3732801">)</span>&nbsp;<span class="builtintype" id="3732803">error</span>&nbsp;<span class="op" id="3732809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732812">return</span>&nbsp;<span class="ident" id="3732819">setDeadlineImpl</span><span class="op" id="3732834">(</span><span class="ident" id="3732835">fd</span><span class="op" id="3732837">,</span>&nbsp;<span class="ident" id="3732839">t</span><span class="op" id="3732840">,</span>&nbsp;<span class="string" id="3732842">&#39;r&#39;</span><span class="op" id="3732845">+</span><span class="string" id="3732846">&#39;w&#39;</span><span class="op" id="3732849">)</span><br>
<span class="lineno"></span><span class="op" id="3732851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="3732854">func</span>&nbsp;<span class="op" id="3732859">(</span><span class="ident" id="3732860">fd</span>&nbsp;<span class="op" id="3732863">*</span><span class="ident" id="3732864">netFD</span><span class="op" id="3732869">)</span>&nbsp;<span class="ident" id="3732871">setReadDeadline</span><span class="op" id="3732886">(</span><span class="ident" id="3732887">t</span>&nbsp;<span class="ident" id="3732889">time</span><span class="op" id="3732893">.</span><span class="ident" id="3732894">Time</span><span class="op" id="3732898">)</span>&nbsp;<span class="builtintype" id="3732900">error</span>&nbsp;<span class="op" id="3732906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3732909">return</span>&nbsp;<span class="ident" id="3732916">setDeadlineImpl</span><span class="op" id="3732931">(</span><span class="ident" id="3732932">fd</span><span class="op" id="3732934">,</span>&nbsp;<span class="ident" id="3732936">t</span><span class="op" id="3732937">,</span>&nbsp;<span class="string" id="3732939">&#39;r&#39;</span><span class="op" id="3732942">)</span><br>
<span class="lineno"></span><span class="op" id="3732944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3732947">func</span>&nbsp;<span class="op" id="3732952">(</span><span class="ident" id="3732953">fd</span>&nbsp;<span class="op" id="3732956">*</span><span class="ident" id="3732957">netFD</span><span class="op" id="3732962">)</span>&nbsp;<span class="ident" id="3732964">setWriteDeadline</span><span class="op" id="3732980">(</span><span class="ident" id="3732981">t</span>&nbsp;<span class="ident" id="3732983">time</span><span class="op" id="3732987">.</span><span class="ident" id="3732988">Time</span><span class="op" id="3732992">)</span>&nbsp;<span class="builtintype" id="3732994">error</span>&nbsp;<span class="op" id="3733000">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3733003">return</span>&nbsp;<span class="ident" id="3733010">setDeadlineImpl</span><span class="op" id="3733025">(</span><span class="ident" id="3733026">fd</span><span class="op" id="3733028">,</span>&nbsp;<span class="ident" id="3733030">t</span><span class="op" id="3733031">,</span>&nbsp;<span class="string" id="3733033">&#39;w&#39;</span><span class="op" id="3733036">)</span><br>
<span class="lineno"></span><span class="op" id="3733038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3733041">func</span>&nbsp;<span class="ident" id="3733046">setDeadlineImpl</span><span class="op" id="3733061">(</span><span class="ident" id="3733062">fd</span>&nbsp;<span class="op" id="3733065">*</span><span class="ident" id="3733066">netFD</span><span class="op" id="3733071">,</span>&nbsp;<span class="ident" id="3733073">t</span>&nbsp;<span class="ident" id="3733075">time</span><span class="op" id="3733079">.</span><span class="ident" id="3733080">Time</span><span class="op" id="3733084">,</span>&nbsp;<span class="ident" id="3733086">mode</span>&nbsp;<span class="builtintype" id="3733091">int</span><span class="op" id="3733094">)</span>&nbsp;<span class="builtintype" id="3733096">error</span>&nbsp;<span class="op" id="3733102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3733105">d</span>&nbsp;<span class="op" id="3733107">:=</span>&nbsp;<span class="ident" id="3733110">runtimeNano</span><span class="op" id="3733121">(</span><span class="op" id="3733122">)</span>&nbsp;<span class="op" id="3733124">+</span>&nbsp;<span class="builtintype" id="3733126">int64</span><span class="op" id="3733131">(</span><span class="ident" id="3733132">t</span><span class="op" id="3733133">.</span><span class="ident" id="3733134">Sub</span><span class="op" id="3733137">(</span><span class="ident" id="3733138">time</span><span class="op" id="3733142">.</span><span class="ident" id="3733143">Now</span><span class="op" id="3733146">(</span><span class="op" id="3733147">)</span><span class="op" id="3733148">)</span><span class="op" id="3733149">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3733152">if</span>&nbsp;<span class="ident" id="3733155">t</span><span class="op" id="3733156">.</span><span class="ident" id="3733157">IsZero</span><span class="op" id="3733163">(</span><span class="op" id="3733164">)</span>&nbsp;<span class="op" id="3733166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3733170">d</span>&nbsp;<span class="op" id="3733172">=</span>&nbsp;<span class="num" id="3733174">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3733177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3733180">if</span>&nbsp;<span class="ident" id="3733183">err</span>&nbsp;<span class="op" id="3733187">:=</span>&nbsp;<span class="ident" id="3733190">fd</span><span class="op" id="3733192">.</span><span class="ident" id="3733193">incref</span><span class="op" id="3733199">(</span><span class="op" id="3733200">)</span><span class="op" id="3733201">;</span>&nbsp;<span class="ident" id="3733203">err</span>&nbsp;<span class="op" id="3733207">!=</span>&nbsp;<span class="builtintype" id="3733210">nil</span>&nbsp;<span class="op" id="3733214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3733218">return</span>&nbsp;<span class="ident" id="3733225">err</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3733230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3733233">runtime_pollSetDeadline</span><span class="op" id="3733256">(</span><span class="ident" id="3733257">fd</span><span class="op" id="3733259">.</span><span class="ident" id="3733260">pd</span><span class="op" id="3733262">.</span><span class="ident" id="3733263">runtimeCtx</span><span class="op" id="3733273">,</span>&nbsp;<span class="ident" id="3733275">d</span><span class="op" id="3733276">,</span>&nbsp;<span class="ident" id="3733278">mode</span><span class="op" id="3733282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3733285">fd</span><span class="op" id="3733287">.</span><span class="ident" id="3733288">decref</span><span class="op" id="3733294">(</span><span class="op" id="3733295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3733298">return</span>&nbsp;<span class="builtintype" id="3733305">nil</span><br>
<span class="lineno"></span><span class="op" id="3733309">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
