<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5968930">package</span>&nbsp;<span class="ident" id="5968938">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5968945">//&nbsp;InstJmp&nbsp;executes&nbsp;jump&nbsp;instruction</span><br>
<span class="lineno"></span><span class="keyword" id="5968982">type</span>&nbsp;<span class="ident" id="5968987">instJmp</span>&nbsp;<span class="keyword" id="5968995">struct</span><span class="op" id="5969001">{</span><span class="op" id="5969002">}</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span><span class="comment" id="5969005">//&nbsp;I&nbsp;executes&nbsp;the&nbsp;jump&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="5969041">//&nbsp;Might&nbsp;return&nbsp;invalid&nbsp;instruction&nbsp;exception.</span><br>
<span class="lineno"></span><span class="keyword" id="5969088">func</span>&nbsp;<span class="op" id="5969093">(</span><span class="ident" id="5969094">i</span>&nbsp;<span class="op" id="5969096">*</span><span class="ident" id="5969097"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5968987">instJmp</a></span><span class="op" id="5969104">)</span>&nbsp;<span class="ident" id="5969106">I</span><span class="op" id="5969107">(</span><span class="ident" id="5969108">cpu</span>&nbsp;<span class="op" id="5969112">*</span><span class="ident" id="5969113"><a href="/lonnie.io/e8vm/arch8/cpu.go.html#5961070">cpu</a></span><span class="op" id="5969116">,</span>&nbsp;<span class="ident" id="5969118">in</span>&nbsp;<span class="builtintype" id="5969121">uint32</span><span class="op" id="5969127">)</span>&nbsp;<span class="op" id="5969129">*</span><span class="ident" id="5969130"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5965541">Excep</a></span>&nbsp;<span class="op" id="5969136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5969139">op</span>&nbsp;<span class="op" id="5969142">:=</span>&nbsp;<span class="op" id="5969145">(</span><span class="ident" id="5969146"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5969118">in</a></span>&nbsp;<span class="op" id="5969149">&gt;&gt;</span>&nbsp;<span class="num" id="5969152">30</span><span class="op" id="5969154">)</span>&nbsp;<span class="op" id="5969156">&amp;</span>&nbsp;<span class="num" id="5969158">0x3</span>&nbsp;<span class="comment" id="5969162">//&nbsp;(32:30]</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5969174">off</span>&nbsp;<span class="op" id="5969178">:=</span>&nbsp;<span class="ident" id="5969181"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5969118">in</a></span>&nbsp;<span class="op" id="5969184">&amp;</span>&nbsp;<span class="num" id="5969186">0x3fffffff</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5969199">pc</span>&nbsp;<span class="op" id="5969202">:=</span>&nbsp;<span class="ident" id="5969205"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5969108">cpu</a></span><span class="op" id="5969208">.</span><span class="ident" id="5969209">regs</span><span class="op" id="5969213">[</span><span class="ident" id="5969214"><a href="/lonnie.io/e8vm/arch8/regs.go.html#5986853">PC</a></span><span class="op" id="5969216">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5969219">to</span>&nbsp;<span class="op" id="5969222">:=</span>&nbsp;<span class="ident" id="5969225"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5969199">pc</a></span>&nbsp;<span class="op" id="5969228">+</span>&nbsp;<span class="op" id="5969230">(</span><span class="ident" id="5969231"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5969174">off</a></span>&nbsp;<span class="op" id="5969235">&lt;&lt;</span>&nbsp;<span class="num" id="5969238">2</span><span class="op" id="5969239">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5969243">switch</span>&nbsp;<span class="ident" id="5969250"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5969139">op</a></span>&nbsp;<span class="op" id="5969253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5969256">case</span>&nbsp;<span class="num" id="5969261">2</span><span class="op" id="5969262">:</span>&nbsp;<span class="comment" id="5969264">//&nbsp;j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5969271">/*&nbsp;do&nbsp;nothing&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5969289">case</span>&nbsp;<span class="num" id="5969294">3</span><span class="op" id="5969295">:</span>&nbsp;<span class="comment" id="5969297">//&nbsp;jal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5969306"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5969108">cpu</a></span><span class="op" id="5969309">.</span><span class="ident" id="5969310">regs</span><span class="op" id="5969314">[</span><span class="ident" id="5969315"><a href="/lonnie.io/e8vm/arch8/regs.go.html#5986844">RET</a></span><span class="op" id="5969318">]</span>&nbsp;<span class="op" id="5969320">=</span>&nbsp;<span class="ident" id="5969322"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5969199">pc</a></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5969326">default</span><span class="op" id="5969333">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5969337">return</span>&nbsp;<span class="ident" id="5969344"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5966122">errInvalidInst</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5969360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5969364"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5969108">cpu</a></span><span class="op" id="5969367">.</span><span class="ident" id="5969368">regs</span><span class="op" id="5969372">[</span><span class="ident" id="5969373"><a href="/lonnie.io/e8vm/arch8/regs.go.html#5986853">PC</a></span><span class="op" id="5969375">]</span>&nbsp;<span class="op" id="5969377">=</span>&nbsp;<span class="ident" id="5969379"><a href="/lonnie.io/e8vm/arch8/inst_jmp.go.html#5969219">to</a></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5969383">return</span>&nbsp;<span class="ident" id="5969390">nil</span><br>
<span class="lineno"></span><span class="op" id="5969394">}</span>
</div>
</body>
</html>
