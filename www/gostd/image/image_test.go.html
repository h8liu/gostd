<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html" class="current">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7732053">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7732108">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7732162">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7732213">package</span>&nbsp;<span class="ident" id="7732221">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7732228">import</span>&nbsp;<span class="op" id="7732235">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7732238">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7732253">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7732263">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7732266">type</span>&nbsp;<span class="ident" id="7732271">image</span>&nbsp;<span class="keyword" id="7732277">interface</span>&nbsp;<span class="op" id="7732287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732290">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732297">Opaque</span><span class="op" id="7732303">(</span><span class="op" id="7732304">)</span>&nbsp;<span class="builtintype" id="7732306">bool</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732312">Set</span><span class="op" id="7732315">(</span><span class="builtintype" id="7732316">int</span><span class="op" id="7732319">,</span>&nbsp;<span class="builtintype" id="7732321">int</span><span class="op" id="7732324">,</span>&nbsp;<span class="ident" id="7732326">color</span><span class="op" id="7732331">.</span><span class="ident" id="7732332">Color</span><span class="op" id="7732337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732340">SubImage</span><span class="op" id="7732348">(</span><span class="ident" id="7732349">Rectangle</span><span class="op" id="7732358">)</span>&nbsp;<span class="ident" id="7732360">Image</span><br>
<span class="lineno"></span><span class="op" id="7732366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7732369">func</span>&nbsp;<span class="ident" id="7732374">cmp</span><span class="op" id="7732377">(</span><span class="ident" id="7732378">t</span>&nbsp;<span class="op" id="7732380">*</span><span class="ident" id="7732381">testing</span><span class="op" id="7732388">.</span><span class="ident" id="7732389">T</span><span class="op" id="7732390">,</span>&nbsp;<span class="ident" id="7732392">cm</span>&nbsp;<span class="ident" id="7732395">color</span><span class="op" id="7732400">.</span><span class="ident" id="7732401">Model</span><span class="op" id="7732406">,</span>&nbsp;<span class="ident" id="7732408">c0</span><span class="op" id="7732410">,</span>&nbsp;<span class="ident" id="7732412">c1</span>&nbsp;<span class="ident" id="7732415">color</span><span class="op" id="7732420">.</span><span class="ident" id="7732421">Color</span><span class="op" id="7732426">)</span>&nbsp;<span class="builtintype" id="7732428">bool</span>&nbsp;<span class="op" id="7732433">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732436">r0</span><span class="op" id="7732438">,</span>&nbsp;<span class="ident" id="7732440">g0</span><span class="op" id="7732442">,</span>&nbsp;<span class="ident" id="7732444">b0</span><span class="op" id="7732446">,</span>&nbsp;<span class="ident" id="7732448">a0</span>&nbsp;<span class="op" id="7732451">:=</span>&nbsp;<span class="ident" id="7732454">cm</span><span class="op" id="7732456">.</span><span class="ident" id="7732457">Convert</span><span class="op" id="7732464">(</span><span class="ident" id="7732465">c0</span><span class="op" id="7732467">)</span><span class="op" id="7732468">.</span><span class="ident" id="7732469">RGBA</span><span class="op" id="7732473">(</span><span class="op" id="7732474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732477">r1</span><span class="op" id="7732479">,</span>&nbsp;<span class="ident" id="7732481">g1</span><span class="op" id="7732483">,</span>&nbsp;<span class="ident" id="7732485">b1</span><span class="op" id="7732487">,</span>&nbsp;<span class="ident" id="7732489">a1</span>&nbsp;<span class="op" id="7732492">:=</span>&nbsp;<span class="ident" id="7732495">cm</span><span class="op" id="7732497">.</span><span class="ident" id="7732498">Convert</span><span class="op" id="7732505">(</span><span class="ident" id="7732506">c1</span><span class="op" id="7732508">)</span><span class="op" id="7732509">.</span><span class="ident" id="7732510">RGBA</span><span class="op" id="7732514">(</span><span class="op" id="7732515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7732518">return</span>&nbsp;<span class="ident" id="7732525">r0</span>&nbsp;<span class="op" id="7732528">==</span>&nbsp;<span class="ident" id="7732531">r1</span>&nbsp;<span class="op" id="7732534">&amp;&amp;</span>&nbsp;<span class="ident" id="7732537">g0</span>&nbsp;<span class="op" id="7732540">==</span>&nbsp;<span class="ident" id="7732543">g1</span>&nbsp;<span class="op" id="7732546">&amp;&amp;</span>&nbsp;<span class="ident" id="7732549">b0</span>&nbsp;<span class="op" id="7732552">==</span>&nbsp;<span class="ident" id="7732555">b1</span>&nbsp;<span class="op" id="7732558">&amp;&amp;</span>&nbsp;<span class="ident" id="7732561">a0</span>&nbsp;<span class="op" id="7732564">==</span>&nbsp;<span class="ident" id="7732567">a1</span><br>
<span class="lineno"></span><span class="op" id="7732570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7732573">func</span>&nbsp;<span class="ident" id="7732578">TestImage</span><span class="op" id="7732587">(</span><span class="ident" id="7732588">t</span>&nbsp;<span class="op" id="7732590">*</span><span class="ident" id="7732591">testing</span><span class="op" id="7732598">.</span><span class="ident" id="7732599">T</span><span class="op" id="7732600">)</span>&nbsp;<span class="op" id="7732602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732605">testImage</span>&nbsp;<span class="op" id="7732615">:=</span>&nbsp;<span class="op" id="7732618">[</span><span class="op" id="7732619">]</span><span class="ident" id="7732620">image</span><span class="op" id="7732625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732629">NewRGBA</span><span class="op" id="7732636">(</span><span class="ident" id="7732637">Rect</span><span class="op" id="7732641">(</span><span class="num" id="7732642">0</span><span class="op" id="7732643">,</span>&nbsp;<span class="num" id="7732645">0</span><span class="op" id="7732646">,</span>&nbsp;<span class="num" id="7732648">10</span><span class="op" id="7732650">,</span>&nbsp;<span class="num" id="7732652">10</span><span class="op" id="7732654">)</span><span class="op" id="7732655">)</span><span class="op" id="7732656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732660">NewRGBA64</span><span class="op" id="7732669">(</span><span class="ident" id="7732670">Rect</span><span class="op" id="7732674">(</span><span class="num" id="7732675">0</span><span class="op" id="7732676">,</span>&nbsp;<span class="num" id="7732678">0</span><span class="op" id="7732679">,</span>&nbsp;<span class="num" id="7732681">10</span><span class="op" id="7732683">,</span>&nbsp;<span class="num" id="7732685">10</span><span class="op" id="7732687">)</span><span class="op" id="7732688">)</span><span class="op" id="7732689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732693">NewNRGBA</span><span class="op" id="7732701">(</span><span class="ident" id="7732702">Rect</span><span class="op" id="7732706">(</span><span class="num" id="7732707">0</span><span class="op" id="7732708">,</span>&nbsp;<span class="num" id="7732710">0</span><span class="op" id="7732711">,</span>&nbsp;<span class="num" id="7732713">10</span><span class="op" id="7732715">,</span>&nbsp;<span class="num" id="7732717">10</span><span class="op" id="7732719">)</span><span class="op" id="7732720">)</span><span class="op" id="7732721">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732725">NewNRGBA64</span><span class="op" id="7732735">(</span><span class="ident" id="7732736">Rect</span><span class="op" id="7732740">(</span><span class="num" id="7732741">0</span><span class="op" id="7732742">,</span>&nbsp;<span class="num" id="7732744">0</span><span class="op" id="7732745">,</span>&nbsp;<span class="num" id="7732747">10</span><span class="op" id="7732749">,</span>&nbsp;<span class="num" id="7732751">10</span><span class="op" id="7732753">)</span><span class="op" id="7732754">)</span><span class="op" id="7732755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732759">NewAlpha</span><span class="op" id="7732767">(</span><span class="ident" id="7732768">Rect</span><span class="op" id="7732772">(</span><span class="num" id="7732773">0</span><span class="op" id="7732774">,</span>&nbsp;<span class="num" id="7732776">0</span><span class="op" id="7732777">,</span>&nbsp;<span class="num" id="7732779">10</span><span class="op" id="7732781">,</span>&nbsp;<span class="num" id="7732783">10</span><span class="op" id="7732785">)</span><span class="op" id="7732786">)</span><span class="op" id="7732787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732791">NewAlpha16</span><span class="op" id="7732801">(</span><span class="ident" id="7732802">Rect</span><span class="op" id="7732806">(</span><span class="num" id="7732807">0</span><span class="op" id="7732808">,</span>&nbsp;<span class="num" id="7732810">0</span><span class="op" id="7732811">,</span>&nbsp;<span class="num" id="7732813">10</span><span class="op" id="7732815">,</span>&nbsp;<span class="num" id="7732817">10</span><span class="op" id="7732819">)</span><span class="op" id="7732820">)</span><span class="op" id="7732821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732825">NewGray</span><span class="op" id="7732832">(</span><span class="ident" id="7732833">Rect</span><span class="op" id="7732837">(</span><span class="num" id="7732838">0</span><span class="op" id="7732839">,</span>&nbsp;<span class="num" id="7732841">0</span><span class="op" id="7732842">,</span>&nbsp;<span class="num" id="7732844">10</span><span class="op" id="7732846">,</span>&nbsp;<span class="num" id="7732848">10</span><span class="op" id="7732850">)</span><span class="op" id="7732851">)</span><span class="op" id="7732852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732856">NewGray16</span><span class="op" id="7732865">(</span><span class="ident" id="7732866">Rect</span><span class="op" id="7732870">(</span><span class="num" id="7732871">0</span><span class="op" id="7732872">,</span>&nbsp;<span class="num" id="7732874">0</span><span class="op" id="7732875">,</span>&nbsp;<span class="num" id="7732877">10</span><span class="op" id="7732879">,</span>&nbsp;<span class="num" id="7732881">10</span><span class="op" id="7732883">)</span><span class="op" id="7732884">)</span><span class="op" id="7732885">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732889">NewPaletted</span><span class="op" id="7732900">(</span><span class="ident" id="7732901">Rect</span><span class="op" id="7732905">(</span><span class="num" id="7732906">0</span><span class="op" id="7732907">,</span>&nbsp;<span class="num" id="7732909">0</span><span class="op" id="7732910">,</span>&nbsp;<span class="num" id="7732912">10</span><span class="op" id="7732914">,</span>&nbsp;<span class="num" id="7732916">10</span><span class="op" id="7732918">)</span><span class="op" id="7732919">,</span>&nbsp;<span class="ident" id="7732921">color</span><span class="op" id="7732926">.</span><span class="ident" id="7732927">Palette</span><span class="op" id="7732934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732939">Transparent</span><span class="op" id="7732950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7732955">Opaque</span><span class="op" id="7732961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7732965">}</span><span class="op" id="7732966">)</span><span class="op" id="7732967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7732970">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7732973">for</span>&nbsp;<span class="ident" id="7732977">_</span><span class="op" id="7732978">,</span>&nbsp;<span class="ident" id="7732980">m</span>&nbsp;<span class="op" id="7732982">:=</span>&nbsp;<span class="keyword" id="7732985">range</span>&nbsp;<span class="ident" id="7732991">testImage</span>&nbsp;<span class="op" id="7733001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733005">if</span>&nbsp;<span class="op" id="7733008">!</span><span class="ident" id="7733009">Rect</span><span class="op" id="7733013">(</span><span class="num" id="7733014">0</span><span class="op" id="7733015">,</span>&nbsp;<span class="num" id="7733017">0</span><span class="op" id="7733018">,</span>&nbsp;<span class="num" id="7733020">10</span><span class="op" id="7733022">,</span>&nbsp;<span class="num" id="7733024">10</span><span class="op" id="7733026">)</span><span class="op" id="7733027">.</span><span class="ident" id="7733028">Eq</span><span class="op" id="7733030">(</span><span class="ident" id="7733031">m</span><span class="op" id="7733032">.</span><span class="ident" id="7733033">Bounds</span><span class="op" id="7733039">(</span><span class="op" id="7733040">)</span><span class="op" id="7733041">)</span>&nbsp;<span class="op" id="7733043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733048">t</span><span class="op" id="7733049">.</span><span class="ident" id="7733050">Errorf</span><span class="op" id="7733056">(</span><span class="string" id="7733057">&#34;%T:&nbsp;want&nbsp;bounds&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7733085">,</span>&nbsp;<span class="ident" id="7733087">m</span><span class="op" id="7733088">,</span>&nbsp;<span class="ident" id="7733090">Rect</span><span class="op" id="7733094">(</span><span class="num" id="7733095">0</span><span class="op" id="7733096">,</span>&nbsp;<span class="num" id="7733098">0</span><span class="op" id="7733099">,</span>&nbsp;<span class="num" id="7733101">10</span><span class="op" id="7733103">,</span>&nbsp;<span class="num" id="7733105">10</span><span class="op" id="7733107">)</span><span class="op" id="7733108">,</span>&nbsp;<span class="ident" id="7733110">m</span><span class="op" id="7733111">.</span><span class="ident" id="7733112">Bounds</span><span class="op" id="7733118">(</span><span class="op" id="7733119">)</span><span class="op" id="7733120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733125">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7733136">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733140">if</span>&nbsp;<span class="op" id="7733143">!</span><span class="ident" id="7733144">cmp</span><span class="op" id="7733147">(</span><span class="ident" id="7733148">t</span><span class="op" id="7733149">,</span>&nbsp;<span class="ident" id="7733151">m</span><span class="op" id="7733152">.</span><span class="ident" id="7733153">ColorModel</span><span class="op" id="7733163">(</span><span class="op" id="7733164">)</span><span class="op" id="7733165">,</span>&nbsp;<span class="ident" id="7733167">Transparent</span><span class="op" id="7733178">,</span>&nbsp;<span class="ident" id="7733180">m</span><span class="op" id="7733181">.</span><span class="ident" id="7733182">At</span><span class="op" id="7733184">(</span><span class="num" id="7733185">6</span><span class="op" id="7733186">,</span>&nbsp;<span class="num" id="7733188">3</span><span class="op" id="7733189">)</span><span class="op" id="7733190">)</span>&nbsp;<span class="op" id="7733192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733197">t</span><span class="op" id="7733198">.</span><span class="ident" id="7733199">Errorf</span><span class="op" id="7733205">(</span><span class="string" id="7733206">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7733248">,</span>&nbsp;<span class="ident" id="7733250">m</span><span class="op" id="7733251">,</span>&nbsp;<span class="ident" id="7733253">m</span><span class="op" id="7733254">.</span><span class="ident" id="7733255">At</span><span class="op" id="7733257">(</span><span class="num" id="7733258">6</span><span class="op" id="7733259">,</span>&nbsp;<span class="num" id="7733261">3</span><span class="op" id="7733262">)</span><span class="op" id="7733263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733268">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7733279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733283">m</span><span class="op" id="7733284">.</span><span class="ident" id="7733285">Set</span><span class="op" id="7733288">(</span><span class="num" id="7733289">6</span><span class="op" id="7733290">,</span>&nbsp;<span class="num" id="7733292">3</span><span class="op" id="7733293">,</span>&nbsp;<span class="ident" id="7733295">Opaque</span><span class="op" id="7733301">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733305">if</span>&nbsp;<span class="op" id="7733308">!</span><span class="ident" id="7733309">cmp</span><span class="op" id="7733312">(</span><span class="ident" id="7733313">t</span><span class="op" id="7733314">,</span>&nbsp;<span class="ident" id="7733316">m</span><span class="op" id="7733317">.</span><span class="ident" id="7733318">ColorModel</span><span class="op" id="7733328">(</span><span class="op" id="7733329">)</span><span class="op" id="7733330">,</span>&nbsp;<span class="ident" id="7733332">Opaque</span><span class="op" id="7733338">,</span>&nbsp;<span class="ident" id="7733340">m</span><span class="op" id="7733341">.</span><span class="ident" id="7733342">At</span><span class="op" id="7733344">(</span><span class="num" id="7733345">6</span><span class="op" id="7733346">,</span>&nbsp;<span class="num" id="7733348">3</span><span class="op" id="7733349">)</span><span class="op" id="7733350">)</span>&nbsp;<span class="op" id="7733352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733357">t</span><span class="op" id="7733358">.</span><span class="ident" id="7733359">Errorf</span><span class="op" id="7733365">(</span><span class="string" id="7733366">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7733412">,</span>&nbsp;<span class="ident" id="7733414">m</span><span class="op" id="7733415">,</span>&nbsp;<span class="ident" id="7733417">m</span><span class="op" id="7733418">.</span><span class="ident" id="7733419">At</span><span class="op" id="7733421">(</span><span class="num" id="7733422">6</span><span class="op" id="7733423">,</span>&nbsp;<span class="num" id="7733425">3</span><span class="op" id="7733426">)</span><span class="op" id="7733427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733432">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7733443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733447">if</span>&nbsp;<span class="op" id="7733450">!</span><span class="ident" id="7733451">m</span><span class="op" id="7733452">.</span><span class="ident" id="7733453">SubImage</span><span class="op" id="7733461">(</span><span class="ident" id="7733462">Rect</span><span class="op" id="7733466">(</span><span class="num" id="7733467">6</span><span class="op" id="7733468">,</span>&nbsp;<span class="num" id="7733470">3</span><span class="op" id="7733471">,</span>&nbsp;<span class="num" id="7733473">7</span><span class="op" id="7733474">,</span>&nbsp;<span class="num" id="7733476">4</span><span class="op" id="7733477">)</span><span class="op" id="7733478">)</span><span class="op" id="7733479">.</span><span class="op" id="7733480">(</span><span class="ident" id="7733481">image</span><span class="op" id="7733486">)</span><span class="op" id="7733487">.</span><span class="ident" id="7733488">Opaque</span><span class="op" id="7733494">(</span><span class="op" id="7733495">)</span>&nbsp;<span class="op" id="7733497">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733502">t</span><span class="op" id="7733503">.</span><span class="ident" id="7733504">Errorf</span><span class="op" id="7733510">(</span><span class="string" id="7733511">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3)&nbsp;was&nbsp;not&nbsp;opaque&#34;</span><span class="op" id="7733541">,</span>&nbsp;<span class="ident" id="7733543">m</span><span class="op" id="7733544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733549">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7733560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733564">m</span>&nbsp;<span class="op" id="7733566">=</span>&nbsp;<span class="ident" id="7733568">m</span><span class="op" id="7733569">.</span><span class="ident" id="7733570">SubImage</span><span class="op" id="7733578">(</span><span class="ident" id="7733579">Rect</span><span class="op" id="7733583">(</span><span class="num" id="7733584">3</span><span class="op" id="7733585">,</span>&nbsp;<span class="num" id="7733587">2</span><span class="op" id="7733588">,</span>&nbsp;<span class="num" id="7733590">9</span><span class="op" id="7733591">,</span>&nbsp;<span class="num" id="7733593">8</span><span class="op" id="7733594">)</span><span class="op" id="7733595">)</span><span class="op" id="7733596">.</span><span class="op" id="7733597">(</span><span class="ident" id="7733598">image</span><span class="op" id="7733603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733607">if</span>&nbsp;<span class="op" id="7733610">!</span><span class="ident" id="7733611">Rect</span><span class="op" id="7733615">(</span><span class="num" id="7733616">3</span><span class="op" id="7733617">,</span>&nbsp;<span class="num" id="7733619">2</span><span class="op" id="7733620">,</span>&nbsp;<span class="num" id="7733622">9</span><span class="op" id="7733623">,</span>&nbsp;<span class="num" id="7733625">8</span><span class="op" id="7733626">)</span><span class="op" id="7733627">.</span><span class="ident" id="7733628">Eq</span><span class="op" id="7733630">(</span><span class="ident" id="7733631">m</span><span class="op" id="7733632">.</span><span class="ident" id="7733633">Bounds</span><span class="op" id="7733639">(</span><span class="op" id="7733640">)</span><span class="op" id="7733641">)</span>&nbsp;<span class="op" id="7733643">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733648">t</span><span class="op" id="7733649">.</span><span class="ident" id="7733650">Errorf</span><span class="op" id="7733656">(</span><span class="string" id="7733657">&#34;%T:&nbsp;sub-image&nbsp;want&nbsp;bounds&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7733695">,</span>&nbsp;<span class="ident" id="7733697">m</span><span class="op" id="7733698">,</span>&nbsp;<span class="ident" id="7733700">Rect</span><span class="op" id="7733704">(</span><span class="num" id="7733705">3</span><span class="op" id="7733706">,</span>&nbsp;<span class="num" id="7733708">2</span><span class="op" id="7733709">,</span>&nbsp;<span class="num" id="7733711">9</span><span class="op" id="7733712">,</span>&nbsp;<span class="num" id="7733714">8</span><span class="op" id="7733715">)</span><span class="op" id="7733716">,</span>&nbsp;<span class="ident" id="7733718">m</span><span class="op" id="7733719">.</span><span class="ident" id="7733720">Bounds</span><span class="op" id="7733726">(</span><span class="op" id="7733727">)</span><span class="op" id="7733728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733733">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7733744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733748">if</span>&nbsp;<span class="op" id="7733751">!</span><span class="ident" id="7733752">cmp</span><span class="op" id="7733755">(</span><span class="ident" id="7733756">t</span><span class="op" id="7733757">,</span>&nbsp;<span class="ident" id="7733759">m</span><span class="op" id="7733760">.</span><span class="ident" id="7733761">ColorModel</span><span class="op" id="7733771">(</span><span class="op" id="7733772">)</span><span class="op" id="7733773">,</span>&nbsp;<span class="ident" id="7733775">Opaque</span><span class="op" id="7733781">,</span>&nbsp;<span class="ident" id="7733783">m</span><span class="op" id="7733784">.</span><span class="ident" id="7733785">At</span><span class="op" id="7733787">(</span><span class="num" id="7733788">6</span><span class="op" id="7733789">,</span>&nbsp;<span class="num" id="7733791">3</span><span class="op" id="7733792">)</span><span class="op" id="7733793">)</span>&nbsp;<span class="op" id="7733795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733800">t</span><span class="op" id="7733801">.</span><span class="ident" id="7733802">Errorf</span><span class="op" id="7733808">(</span><span class="string" id="7733809">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7733865">,</span>&nbsp;<span class="ident" id="7733867">m</span><span class="op" id="7733868">,</span>&nbsp;<span class="ident" id="7733870">m</span><span class="op" id="7733871">.</span><span class="ident" id="7733872">At</span><span class="op" id="7733874">(</span><span class="num" id="7733875">6</span><span class="op" id="7733876">,</span>&nbsp;<span class="num" id="7733878">3</span><span class="op" id="7733879">)</span><span class="op" id="7733880">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733885">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7733896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733900">if</span>&nbsp;<span class="op" id="7733903">!</span><span class="ident" id="7733904">cmp</span><span class="op" id="7733907">(</span><span class="ident" id="7733908">t</span><span class="op" id="7733909">,</span>&nbsp;<span class="ident" id="7733911">m</span><span class="op" id="7733912">.</span><span class="ident" id="7733913">ColorModel</span><span class="op" id="7733923">(</span><span class="op" id="7733924">)</span><span class="op" id="7733925">,</span>&nbsp;<span class="ident" id="7733927">Transparent</span><span class="op" id="7733938">,</span>&nbsp;<span class="ident" id="7733940">m</span><span class="op" id="7733941">.</span><span class="ident" id="7733942">At</span><span class="op" id="7733944">(</span><span class="num" id="7733945">3</span><span class="op" id="7733946">,</span>&nbsp;<span class="num" id="7733948">3</span><span class="op" id="7733949">)</span><span class="op" id="7733950">)</span>&nbsp;<span class="op" id="7733952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733957">t</span><span class="op" id="7733958">.</span><span class="ident" id="7733959">Errorf</span><span class="op" id="7733965">(</span><span class="string" id="7733966">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(3,&nbsp;3),&nbsp;want&nbsp;a&nbsp;zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7734018">,</span>&nbsp;<span class="ident" id="7734020">m</span><span class="op" id="7734021">,</span>&nbsp;<span class="ident" id="7734023">m</span><span class="op" id="7734024">.</span><span class="ident" id="7734025">At</span><span class="op" id="7734027">(</span><span class="num" id="7734028">3</span><span class="op" id="7734029">,</span>&nbsp;<span class="num" id="7734031">3</span><span class="op" id="7734032">)</span><span class="op" id="7734033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734038">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734053">m</span><span class="op" id="7734054">.</span><span class="ident" id="7734055">Set</span><span class="op" id="7734058">(</span><span class="num" id="7734059">3</span><span class="op" id="7734060">,</span>&nbsp;<span class="num" id="7734062">3</span><span class="op" id="7734063">,</span>&nbsp;<span class="ident" id="7734065">Opaque</span><span class="op" id="7734071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734075">if</span>&nbsp;<span class="op" id="7734078">!</span><span class="ident" id="7734079">cmp</span><span class="op" id="7734082">(</span><span class="ident" id="7734083">t</span><span class="op" id="7734084">,</span>&nbsp;<span class="ident" id="7734086">m</span><span class="op" id="7734087">.</span><span class="ident" id="7734088">ColorModel</span><span class="op" id="7734098">(</span><span class="op" id="7734099">)</span><span class="op" id="7734100">,</span>&nbsp;<span class="ident" id="7734102">Opaque</span><span class="op" id="7734108">,</span>&nbsp;<span class="ident" id="7734110">m</span><span class="op" id="7734111">.</span><span class="ident" id="7734112">At</span><span class="op" id="7734114">(</span><span class="num" id="7734115">3</span><span class="op" id="7734116">,</span>&nbsp;<span class="num" id="7734118">3</span><span class="op" id="7734119">)</span><span class="op" id="7734120">)</span>&nbsp;<span class="op" id="7734122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734127">t</span><span class="op" id="7734128">.</span><span class="ident" id="7734129">Errorf</span><span class="op" id="7734135">(</span><span class="string" id="7734136">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(3,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7734192">,</span>&nbsp;<span class="ident" id="7734194">m</span><span class="op" id="7734195">,</span>&nbsp;<span class="ident" id="7734197">m</span><span class="op" id="7734198">.</span><span class="ident" id="7734199">At</span><span class="op" id="7734201">(</span><span class="num" id="7734202">3</span><span class="op" id="7734203">,</span>&nbsp;<span class="num" id="7734205">3</span><span class="op" id="7734206">)</span><span class="op" id="7734207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734212">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7734227">//&nbsp;Test&nbsp;that&nbsp;taking&nbsp;an&nbsp;empty&nbsp;sub-image&nbsp;starting&nbsp;at&nbsp;a&nbsp;corner&nbsp;does&nbsp;not&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734305">m</span><span class="op" id="7734306">.</span><span class="ident" id="7734307">SubImage</span><span class="op" id="7734315">(</span><span class="ident" id="7734316">Rect</span><span class="op" id="7734320">(</span><span class="num" id="7734321">0</span><span class="op" id="7734322">,</span>&nbsp;<span class="num" id="7734324">0</span><span class="op" id="7734325">,</span>&nbsp;<span class="num" id="7734327">0</span><span class="op" id="7734328">,</span>&nbsp;<span class="num" id="7734330">0</span><span class="op" id="7734331">)</span><span class="op" id="7734332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734336">m</span><span class="op" id="7734337">.</span><span class="ident" id="7734338">SubImage</span><span class="op" id="7734346">(</span><span class="ident" id="7734347">Rect</span><span class="op" id="7734351">(</span><span class="num" id="7734352">10</span><span class="op" id="7734354">,</span>&nbsp;<span class="num" id="7734356">0</span><span class="op" id="7734357">,</span>&nbsp;<span class="num" id="7734359">10</span><span class="op" id="7734361">,</span>&nbsp;<span class="num" id="7734363">0</span><span class="op" id="7734364">)</span><span class="op" id="7734365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734369">m</span><span class="op" id="7734370">.</span><span class="ident" id="7734371">SubImage</span><span class="op" id="7734379">(</span><span class="ident" id="7734380">Rect</span><span class="op" id="7734384">(</span><span class="num" id="7734385">0</span><span class="op" id="7734386">,</span>&nbsp;<span class="num" id="7734388">10</span><span class="op" id="7734390">,</span>&nbsp;<span class="num" id="7734392">0</span><span class="op" id="7734393">,</span>&nbsp;<span class="num" id="7734395">10</span><span class="op" id="7734397">)</span><span class="op" id="7734398">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734402">m</span><span class="op" id="7734403">.</span><span class="ident" id="7734404">SubImage</span><span class="op" id="7734412">(</span><span class="ident" id="7734413">Rect</span><span class="op" id="7734417">(</span><span class="num" id="7734418">10</span><span class="op" id="7734420">,</span>&nbsp;<span class="num" id="7734422">10</span><span class="op" id="7734424">,</span>&nbsp;<span class="num" id="7734426">10</span><span class="op" id="7734428">,</span>&nbsp;<span class="num" id="7734430">10</span><span class="op" id="7734432">)</span><span class="op" id="7734433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734436">}</span><br>
<span class="lineno"></span><span class="op" id="7734438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7734441">func</span>&nbsp;<span class="ident" id="7734446">Test16BitsPerColorChannel</span><span class="op" id="7734471">(</span><span class="ident" id="7734472">t</span>&nbsp;<span class="op" id="7734474">*</span><span class="ident" id="7734475">testing</span><span class="op" id="7734482">.</span><span class="ident" id="7734483">T</span><span class="op" id="7734484">)</span>&nbsp;<span class="op" id="7734486">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734489">testColorModel</span>&nbsp;<span class="op" id="7734504">:=</span>&nbsp;<span class="op" id="7734507">[</span><span class="op" id="7734508">]</span><span class="ident" id="7734509">color</span><span class="op" id="7734514">.</span><span class="ident" id="7734515">Model</span><span class="op" id="7734520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734524">color</span><span class="op" id="7734529">.</span><span class="ident" id="7734530">RGBA64Model</span><span class="op" id="7734541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734545">color</span><span class="op" id="7734550">.</span><span class="ident" id="7734551">NRGBA64Model</span><span class="op" id="7734563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734567">color</span><span class="op" id="7734572">.</span><span class="ident" id="7734573">Alpha16Model</span><span class="op" id="7734585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734589">color</span><span class="op" id="7734594">.</span><span class="ident" id="7734595">Gray16Model</span><span class="op" id="7734606">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734612">for</span>&nbsp;<span class="ident" id="7734616">_</span><span class="op" id="7734617">,</span>&nbsp;<span class="ident" id="7734619">cm</span>&nbsp;<span class="op" id="7734622">:=</span>&nbsp;<span class="keyword" id="7734625">range</span>&nbsp;<span class="ident" id="7734631">testColorModel</span>&nbsp;<span class="op" id="7734646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734650">c</span>&nbsp;<span class="op" id="7734652">:=</span>&nbsp;<span class="ident" id="7734655">cm</span><span class="op" id="7734657">.</span><span class="ident" id="7734658">Convert</span><span class="op" id="7734665">(</span><span class="ident" id="7734666">color</span><span class="op" id="7734671">.</span><span class="ident" id="7734672">RGBA64</span><span class="op" id="7734678">{</span><span class="num" id="7734679">0x1234</span><span class="op" id="7734685">,</span>&nbsp;<span class="num" id="7734687">0x1234</span><span class="op" id="7734693">,</span>&nbsp;<span class="num" id="7734695">0x1234</span><span class="op" id="7734701">,</span>&nbsp;<span class="num" id="7734703">0x1234</span><span class="op" id="7734709">}</span><span class="op" id="7734710">)</span>&nbsp;<span class="comment" id="7734712">//&nbsp;Premultiplied&nbsp;alpha.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734738">r</span><span class="op" id="7734739">,</span>&nbsp;<span class="ident" id="7734741">_</span><span class="op" id="7734742">,</span>&nbsp;<span class="ident" id="7734744">_</span><span class="op" id="7734745">,</span>&nbsp;<span class="ident" id="7734747">_</span>&nbsp;<span class="op" id="7734749">:=</span>&nbsp;<span class="ident" id="7734752">c</span><span class="op" id="7734753">.</span><span class="ident" id="7734754">RGBA</span><span class="op" id="7734758">(</span><span class="op" id="7734759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734763">if</span>&nbsp;<span class="ident" id="7734766">r</span>&nbsp;<span class="op" id="7734768">!=</span>&nbsp;<span class="num" id="7734771">0x1234</span>&nbsp;<span class="op" id="7734778">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734783">t</span><span class="op" id="7734784">.</span><span class="ident" id="7734785">Errorf</span><span class="op" id="7734791">(</span><span class="string" id="7734792">&#34;%T:&nbsp;want&nbsp;red&nbsp;value&nbsp;0x%04x&nbsp;got&nbsp;0x%04x&#34;</span><span class="op" id="7734830">,</span>&nbsp;<span class="ident" id="7734832">c</span><span class="op" id="7734833">,</span>&nbsp;<span class="num" id="7734835">0x1234</span><span class="op" id="7734841">,</span>&nbsp;<span class="ident" id="7734843">r</span><span class="op" id="7734844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7734849">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734866">testImage</span>&nbsp;<span class="op" id="7734876">:=</span>&nbsp;<span class="op" id="7734879">[</span><span class="op" id="7734880">]</span><span class="ident" id="7734881">image</span><span class="op" id="7734886">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734890">NewRGBA64</span><span class="op" id="7734899">(</span><span class="ident" id="7734900">Rect</span><span class="op" id="7734904">(</span><span class="num" id="7734905">0</span><span class="op" id="7734906">,</span>&nbsp;<span class="num" id="7734908">0</span><span class="op" id="7734909">,</span>&nbsp;<span class="num" id="7734911">10</span><span class="op" id="7734913">,</span>&nbsp;<span class="num" id="7734915">10</span><span class="op" id="7734917">)</span><span class="op" id="7734918">)</span><span class="op" id="7734919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734923">NewNRGBA64</span><span class="op" id="7734933">(</span><span class="ident" id="7734934">Rect</span><span class="op" id="7734938">(</span><span class="num" id="7734939">0</span><span class="op" id="7734940">,</span>&nbsp;<span class="num" id="7734942">0</span><span class="op" id="7734943">,</span>&nbsp;<span class="num" id="7734945">10</span><span class="op" id="7734947">,</span>&nbsp;<span class="num" id="7734949">10</span><span class="op" id="7734951">)</span><span class="op" id="7734952">)</span><span class="op" id="7734953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734957">NewAlpha16</span><span class="op" id="7734967">(</span><span class="ident" id="7734968">Rect</span><span class="op" id="7734972">(</span><span class="num" id="7734973">0</span><span class="op" id="7734974">,</span>&nbsp;<span class="num" id="7734976">0</span><span class="op" id="7734977">,</span>&nbsp;<span class="num" id="7734979">10</span><span class="op" id="7734981">,</span>&nbsp;<span class="num" id="7734983">10</span><span class="op" id="7734985">)</span><span class="op" id="7734986">)</span><span class="op" id="7734987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734991">NewGray16</span><span class="op" id="7735000">(</span><span class="ident" id="7735001">Rect</span><span class="op" id="7735005">(</span><span class="num" id="7735006">0</span><span class="op" id="7735007">,</span>&nbsp;<span class="num" id="7735009">0</span><span class="op" id="7735010">,</span>&nbsp;<span class="num" id="7735012">10</span><span class="op" id="7735014">,</span>&nbsp;<span class="num" id="7735016">10</span><span class="op" id="7735018">)</span><span class="op" id="7735019">)</span><span class="op" id="7735020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735023">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7735026">for</span>&nbsp;<span class="ident" id="7735030">_</span><span class="op" id="7735031">,</span>&nbsp;<span class="ident" id="7735033">m</span>&nbsp;<span class="op" id="7735035">:=</span>&nbsp;<span class="keyword" id="7735038">range</span>&nbsp;<span class="ident" id="7735044">testImage</span>&nbsp;<span class="op" id="7735054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735058">m</span><span class="op" id="7735059">.</span><span class="ident" id="7735060">Set</span><span class="op" id="7735063">(</span><span class="num" id="7735064">1</span><span class="op" id="7735065">,</span>&nbsp;<span class="num" id="7735067">2</span><span class="op" id="7735068">,</span>&nbsp;<span class="ident" id="7735070">color</span><span class="op" id="7735075">.</span><span class="ident" id="7735076">NRGBA64</span><span class="op" id="7735083">{</span><span class="num" id="7735084">0xffff</span><span class="op" id="7735090">,</span>&nbsp;<span class="num" id="7735092">0xffff</span><span class="op" id="7735098">,</span>&nbsp;<span class="num" id="7735100">0xffff</span><span class="op" id="7735106">,</span>&nbsp;<span class="num" id="7735108">0x1357</span><span class="op" id="7735114">}</span><span class="op" id="7735115">)</span>&nbsp;<span class="comment" id="7735117">//&nbsp;Non-premultiplied&nbsp;alpha.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735147">r</span><span class="op" id="7735148">,</span>&nbsp;<span class="ident" id="7735150">_</span><span class="op" id="7735151">,</span>&nbsp;<span class="ident" id="7735153">_</span><span class="op" id="7735154">,</span>&nbsp;<span class="ident" id="7735156">_</span>&nbsp;<span class="op" id="7735158">:=</span>&nbsp;<span class="ident" id="7735161">m</span><span class="op" id="7735162">.</span><span class="ident" id="7735163">At</span><span class="op" id="7735165">(</span><span class="num" id="7735166">1</span><span class="op" id="7735167">,</span>&nbsp;<span class="num" id="7735169">2</span><span class="op" id="7735170">)</span><span class="op" id="7735171">.</span><span class="ident" id="7735172">RGBA</span><span class="op" id="7735176">(</span><span class="op" id="7735177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7735181">if</span>&nbsp;<span class="ident" id="7735184">r</span>&nbsp;<span class="op" id="7735186">!=</span>&nbsp;<span class="num" id="7735189">0x1357</span>&nbsp;<span class="op" id="7735196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735201">t</span><span class="op" id="7735202">.</span><span class="ident" id="7735203">Errorf</span><span class="op" id="7735209">(</span><span class="string" id="7735210">&#34;%T:&nbsp;want&nbsp;red&nbsp;value&nbsp;0x%04x&nbsp;got&nbsp;0x%04x&#34;</span><span class="op" id="7735248">,</span>&nbsp;<span class="ident" id="7735250">m</span><span class="op" id="7735251">,</span>&nbsp;<span class="num" id="7735253">0x1357</span><span class="op" id="7735259">,</span>&nbsp;<span class="ident" id="7735261">r</span><span class="op" id="7735262">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7735267">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735281">}</span><br>
<span class="lineno"></span><span class="op" id="7735283">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
