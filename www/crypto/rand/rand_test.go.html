<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7126753">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7126809">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7126863">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7126914">package</span>&nbsp;<span class="ident" id="7126922">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7126928">import</span>&nbsp;<span class="op" id="7126935">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7126938">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7126947">&#34;compress/flate&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7126965">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7126971">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7126981">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7126984">func</span>&nbsp;<span class="ident" id="7126989">TestRead</span><span class="op" id="7126997">(</span><span class="ident" id="7126998">t</span>&nbsp;<span class="op" id="7127000">*</span><span class="ident" id="7127001"><a href="/crypto/rand/rand_test.go.html#7126971">testing</a></span><span class="op" id="7127008">.</span><span class="ident" id="7127009">T</span><span class="op" id="7127010">)</span>&nbsp;<span class="op" id="7127012">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7127015">var</span>&nbsp;<span class="ident" id="7127019">n</span>&nbsp;<span class="builtintype" id="7127021">int</span>&nbsp;<span class="op" id="7127025">=</span>&nbsp;<span class="num" id="7127027">4e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7127032">if</span>&nbsp;<span class="ident" id="7127035"><a href="/crypto/rand/rand_test.go.html#7126971">testing</a></span><span class="op" id="7127042">.</span><span class="ident" id="7127043">Short</span><span class="op" id="7127048">(</span><span class="op" id="7127049">)</span>&nbsp;<span class="op" id="7127051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7127055"><a href="/crypto/rand/rand_test.go.html#7127019">n</a></span>&nbsp;<span class="op" id="7127057">=</span>&nbsp;<span class="num" id="7127059">1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7127064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7127067">b</span>&nbsp;<span class="op" id="7127069">:=</span>&nbsp;<span class="builtinfunc" id="7127072">make</span><span class="op" id="7127076">(</span><span class="op" id="7127077">[</span><span class="op" id="7127078">]</span><span class="builtintype" id="7127079">byte</span><span class="op" id="7127083">,</span>&nbsp;<span class="ident" id="7127085"><a href="/crypto/rand/rand_test.go.html#7127019">n</a></span><span class="op" id="7127086">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7127089"><a href="/crypto/rand/rand_test.go.html#7127019">n</a></span><span class="op" id="7127090">,</span>&nbsp;<span class="ident" id="7127092">err</span>&nbsp;<span class="op" id="7127096">:=</span>&nbsp;<span class="ident" id="7127099"><a href="/crypto/rand/rand_test.go.html#7126965">io</a></span><span class="op" id="7127101">.</span><span class="ident" id="7127102">ReadFull</span><span class="op" id="7127110">(</span><span class="ident" id="7127111"><a href="/crypto/rand/rand.go.html#3653025">Reader</a></span><span class="op" id="7127117">,</span>&nbsp;<span class="ident" id="7127119"><a href="/crypto/rand/rand_test.go.html#7127067">b</a></span><span class="op" id="7127120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7127123">if</span>&nbsp;<span class="ident" id="7127126"><a href="/crypto/rand/rand_test.go.html#7127019">n</a></span>&nbsp;<span class="op" id="7127128">!=</span>&nbsp;<span class="builtinfunc" id="7127131">len</span><span class="op" id="7127134">(</span><span class="ident" id="7127135"><a href="/crypto/rand/rand_test.go.html#7127067">b</a></span><span class="op" id="7127136">)</span>&nbsp;<span class="op" id="7127138">||</span>&nbsp;<span class="ident" id="7127141"><a href="/crypto/rand/rand_test.go.html#7127092">err</a></span>&nbsp;<span class="op" id="7127145">!=</span>&nbsp;<span class="ident" id="7127148">nil</span>&nbsp;<span class="op" id="7127152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7127156"><a href="/crypto/rand/rand_test.go.html#7126998">t</a></span><span class="op" id="7127157">.</span><span class="ident" id="7127158">Fatalf</span><span class="op" id="7127164">(</span><span class="string" id="7127165">&#34;ReadFull(buf)&nbsp;=&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7127189">,</span>&nbsp;<span class="ident" id="7127191"><a href="/crypto/rand/rand_test.go.html#7127019">n</a></span><span class="op" id="7127192">,</span>&nbsp;<span class="ident" id="7127194"><a href="/crypto/rand/rand_test.go.html#7127092">err</a></span><span class="op" id="7127197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7127200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7127204">var</span>&nbsp;<span class="ident" id="7127208">z</span>&nbsp;<span class="ident" id="7127210"><a href="/crypto/rand/rand_test.go.html#7126938">bytes</a></span><span class="op" id="7127215">.</span><span class="ident" id="7127216">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7127224">f</span><span class="op" id="7127225">,</span>&nbsp;<span class="ident" id="7127227">_</span>&nbsp;<span class="op" id="7127229">:=</span>&nbsp;<span class="ident" id="7127232"><a href="/crypto/rand/rand_test.go.html#7126947">flate</a></span><span class="op" id="7127237">.</span><span class="ident" id="7127238">NewWriter</span><span class="op" id="7127247">(</span><span class="op" id="7127248">&amp;</span><span class="ident" id="7127249"><a href="/crypto/rand/rand_test.go.html#7127208">z</a></span><span class="op" id="7127250">,</span>&nbsp;<span class="num" id="7127252">5</span><span class="op" id="7127253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7127256"><a href="/crypto/rand/rand_test.go.html#7127224">f</a></span><span class="op" id="7127257">.</span><span class="ident" id="7127258">Write</span><span class="op" id="7127263">(</span><span class="ident" id="7127264"><a href="/crypto/rand/rand_test.go.html#7127067">b</a></span><span class="op" id="7127265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7127268"><a href="/crypto/rand/rand_test.go.html#7127224">f</a></span><span class="op" id="7127269">.</span><span class="ident" id="7127270">Close</span><span class="op" id="7127275">(</span><span class="op" id="7127276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7127279">if</span>&nbsp;<span class="ident" id="7127282"><a href="/crypto/rand/rand_test.go.html#7127208">z</a></span><span class="op" id="7127283">.</span><span class="ident" id="7127284">Len</span><span class="op" id="7127287">(</span><span class="op" id="7127288">)</span>&nbsp;<span class="op" id="7127290">&lt;</span>&nbsp;<span class="builtinfunc" id="7127292">len</span><span class="op" id="7127295">(</span><span class="ident" id="7127296"><a href="/crypto/rand/rand_test.go.html#7127067">b</a></span><span class="op" id="7127297">)</span><span class="op" id="7127298">*</span><span class="num" id="7127299">99</span><span class="op" id="7127301">/</span><span class="num" id="7127302">100</span>&nbsp;<span class="op" id="7127306">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7127310"><a href="/crypto/rand/rand_test.go.html#7126998">t</a></span><span class="op" id="7127311">.</span><span class="ident" id="7127312">Fatalf</span><span class="op" id="7127318">(</span><span class="string" id="7127319">&#34;Compressed&nbsp;%d&nbsp;-&gt;&nbsp;%d&#34;</span><span class="op" id="7127340">,</span>&nbsp;<span class="builtinfunc" id="7127342">len</span><span class="op" id="7127345">(</span><span class="ident" id="7127346"><a href="/crypto/rand/rand_test.go.html#7127067">b</a></span><span class="op" id="7127347">)</span><span class="op" id="7127348">,</span>&nbsp;<span class="ident" id="7127350"><a href="/crypto/rand/rand_test.go.html#7127208">z</a></span><span class="op" id="7127351">.</span><span class="ident" id="7127352">Len</span><span class="op" id="7127355">(</span><span class="op" id="7127356">)</span><span class="op" id="7127357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7127360">}</span><br>
<span class="lineno"></span><span class="op" id="7127362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7127365">func</span>&nbsp;<span class="ident" id="7127370">TestReadEmpty</span><span class="op" id="7127383">(</span><span class="ident" id="7127384">t</span>&nbsp;<span class="op" id="7127386">*</span><span class="ident" id="7127387"><a href="/crypto/rand/rand_test.go.html#7126971">testing</a></span><span class="op" id="7127394">.</span><span class="ident" id="7127395">T</span><span class="op" id="7127396">)</span>&nbsp;<span class="op" id="7127398">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7127401">n</span><span class="op" id="7127402">,</span>&nbsp;<span class="ident" id="7127404">err</span>&nbsp;<span class="op" id="7127408">:=</span>&nbsp;<span class="ident" id="7127411"><a href="/crypto/rand/rand.go.html#3653025">Reader</a></span><span class="op" id="7127417">.</span><span class="ident" id="7127418">Read</span><span class="op" id="7127422">(</span><span class="builtinfunc" id="7127423">make</span><span class="op" id="7127427">(</span><span class="op" id="7127428">[</span><span class="op" id="7127429">]</span><span class="builtintype" id="7127430">byte</span><span class="op" id="7127434">,</span>&nbsp;<span class="num" id="7127436">0</span><span class="op" id="7127437">)</span><span class="op" id="7127438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7127441">if</span>&nbsp;<span class="ident" id="7127444"><a href="/crypto/rand/rand_test.go.html#7127401">n</a></span>&nbsp;<span class="op" id="7127446">!=</span>&nbsp;<span class="num" id="7127449">0</span>&nbsp;<span class="op" id="7127451">||</span>&nbsp;<span class="ident" id="7127454"><a href="/crypto/rand/rand_test.go.html#7127404">err</a></span>&nbsp;<span class="op" id="7127458">!=</span>&nbsp;<span class="ident" id="7127461">nil</span>&nbsp;<span class="op" id="7127465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7127469"><a href="/crypto/rand/rand_test.go.html#7127384">t</a></span><span class="op" id="7127470">.</span><span class="ident" id="7127471">Fatalf</span><span class="op" id="7127477">(</span><span class="string" id="7127478">&#34;Read(make([]byte,&nbsp;0))&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7127510">,</span>&nbsp;<span class="ident" id="7127512"><a href="/crypto/rand/rand_test.go.html#7127401">n</a></span><span class="op" id="7127513">,</span>&nbsp;<span class="ident" id="7127515"><a href="/crypto/rand/rand_test.go.html#7127404">err</a></span><span class="op" id="7127518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7127521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7127524"><a href="/crypto/rand/rand_test.go.html#7127401">n</a></span><span class="op" id="7127525">,</span>&nbsp;<span class="ident" id="7127527"><a href="/crypto/rand/rand_test.go.html#7127404">err</a></span>&nbsp;<span class="op" id="7127531">=</span>&nbsp;<span class="ident" id="7127533"><a href="/crypto/rand/rand.go.html#3653025">Reader</a></span><span class="op" id="7127539">.</span><span class="ident" id="7127540">Read</span><span class="op" id="7127544">(</span><span class="ident" id="7127545">nil</span><span class="op" id="7127548">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7127551">if</span>&nbsp;<span class="ident" id="7127554"><a href="/crypto/rand/rand_test.go.html#7127401">n</a></span>&nbsp;<span class="op" id="7127556">!=</span>&nbsp;<span class="num" id="7127559">0</span>&nbsp;<span class="op" id="7127561">||</span>&nbsp;<span class="ident" id="7127564"><a href="/crypto/rand/rand_test.go.html#7127404">err</a></span>&nbsp;<span class="op" id="7127568">!=</span>&nbsp;<span class="ident" id="7127571">nil</span>&nbsp;<span class="op" id="7127575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7127579"><a href="/crypto/rand/rand_test.go.html#7127384">t</a></span><span class="op" id="7127580">.</span><span class="ident" id="7127581">Fatalf</span><span class="op" id="7127587">(</span><span class="string" id="7127588">&#34;Read(nil)&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7127608">,</span>&nbsp;<span class="ident" id="7127610"><a href="/crypto/rand/rand_test.go.html#7127401">n</a></span><span class="op" id="7127611">,</span>&nbsp;<span class="ident" id="7127613"><a href="/crypto/rand/rand_test.go.html#7127404">err</a></span><span class="op" id="7127616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7127619">}</span><br>
<span class="lineno"></span><span class="op" id="7127621">}</span>
</div>
</body>
</html>
