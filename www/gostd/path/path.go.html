<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html" class="current">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4154642">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4154697">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4154751">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4154802">//&nbsp;Package&nbsp;path&nbsp;implements&nbsp;utility&nbsp;routines&nbsp;for&nbsp;manipulating&nbsp;slash-separated</span><br>
<span class="lineno"></span><span class="comment" id="4154879">//&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="4154889">package</span>&nbsp;<span class="ident" id="4154897">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4154903">import</span>&nbsp;<span class="op" id="4154910">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4154913">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="4154923">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4154926">//&nbsp;A&nbsp;lazybuf&nbsp;is&nbsp;a&nbsp;lazily&nbsp;constructed&nbsp;path&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="4154976">//&nbsp;It&nbsp;supports&nbsp;append,&nbsp;reading&nbsp;previously&nbsp;appended&nbsp;bytes,</span><br>
<span class="lineno">15</span><span class="comment" id="4155034">//&nbsp;and&nbsp;retrieving&nbsp;the&nbsp;final&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;allocate&nbsp;a&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="4155100">//&nbsp;to&nbsp;hold&nbsp;the&nbsp;output&nbsp;until&nbsp;that&nbsp;output&nbsp;diverges&nbsp;from&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4155157">type</span>&nbsp;<span class="ident" id="4155162">lazybuf</span>&nbsp;<span class="keyword" id="4155170">struct</span>&nbsp;<span class="op" id="4155177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155180">s</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4155184">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155192">buf</span>&nbsp;<span class="op" id="4155196">[</span><span class="op" id="4155197">]</span><span class="builtintype" id="4155198">byte</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155204">w</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4155208">int</span><br>
<span class="lineno"></span><span class="op" id="4155212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4155215">func</span>&nbsp;<span class="op" id="4155220">(</span><span class="ident" id="4155221">b</span>&nbsp;<span class="op" id="4155223">*</span><span class="ident" id="4155224">lazybuf</span><span class="op" id="4155231">)</span>&nbsp;<span class="ident" id="4155233">index</span><span class="op" id="4155238">(</span><span class="ident" id="4155239">i</span>&nbsp;<span class="builtintype" id="4155241">int</span><span class="op" id="4155244">)</span>&nbsp;<span class="builtintype" id="4155246">byte</span>&nbsp;<span class="op" id="4155251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155254">if</span>&nbsp;<span class="ident" id="4155257">b</span><span class="op" id="4155258">.</span><span class="ident" id="4155259">buf</span>&nbsp;<span class="op" id="4155263">!=</span>&nbsp;<span class="builtintype" id="4155266">nil</span>&nbsp;<span class="op" id="4155270">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155274">return</span>&nbsp;<span class="ident" id="4155281">b</span><span class="op" id="4155282">.</span><span class="ident" id="4155283">buf</span><span class="op" id="4155286">[</span><span class="ident" id="4155287">i</span><span class="op" id="4155288">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4155291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155294">return</span>&nbsp;<span class="ident" id="4155301">b</span><span class="op" id="4155302">.</span><span class="ident" id="4155303">s</span><span class="op" id="4155304">[</span><span class="ident" id="4155305">i</span><span class="op" id="4155306">]</span><br>
<span class="lineno"></span><span class="op" id="4155308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="4155311">func</span>&nbsp;<span class="op" id="4155316">(</span><span class="ident" id="4155317">b</span>&nbsp;<span class="op" id="4155319">*</span><span class="ident" id="4155320">lazybuf</span><span class="op" id="4155327">)</span>&nbsp;<span class="builtinfunc" id="4155329">append</span><span class="op" id="4155335">(</span><span class="ident" id="4155336">c</span>&nbsp;<span class="builtintype" id="4155338">byte</span><span class="op" id="4155342">)</span>&nbsp;<span class="op" id="4155344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155347">if</span>&nbsp;<span class="ident" id="4155350">b</span><span class="op" id="4155351">.</span><span class="ident" id="4155352">buf</span>&nbsp;<span class="op" id="4155356">==</span>&nbsp;<span class="builtintype" id="4155359">nil</span>&nbsp;<span class="op" id="4155363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155367">if</span>&nbsp;<span class="ident" id="4155370">b</span><span class="op" id="4155371">.</span><span class="ident" id="4155372">w</span>&nbsp;<span class="op" id="4155374">&lt;</span>&nbsp;<span class="builtinfunc" id="4155376">len</span><span class="op" id="4155379">(</span><span class="ident" id="4155380">b</span><span class="op" id="4155381">.</span><span class="ident" id="4155382">s</span><span class="op" id="4155383">)</span>&nbsp;<span class="op" id="4155385">&amp;&amp;</span>&nbsp;<span class="ident" id="4155388">b</span><span class="op" id="4155389">.</span><span class="ident" id="4155390">s</span><span class="op" id="4155391">[</span><span class="ident" id="4155392">b</span><span class="op" id="4155393">.</span><span class="ident" id="4155394">w</span><span class="op" id="4155395">]</span>&nbsp;<span class="op" id="4155397">==</span>&nbsp;<span class="ident" id="4155400">c</span>&nbsp;<span class="op" id="4155402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155407">b</span><span class="op" id="4155408">.</span><span class="ident" id="4155409">w</span><span class="op" id="4155410">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155416">return</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4155425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155429">b</span><span class="op" id="4155430">.</span><span class="ident" id="4155431">buf</span>&nbsp;<span class="op" id="4155435">=</span>&nbsp;<span class="builtinfunc" id="4155437">make</span><span class="op" id="4155441">(</span><span class="op" id="4155442">[</span><span class="op" id="4155443">]</span><span class="builtintype" id="4155444">byte</span><span class="op" id="4155448">,</span>&nbsp;<span class="builtinfunc" id="4155450">len</span><span class="op" id="4155453">(</span><span class="ident" id="4155454">b</span><span class="op" id="4155455">.</span><span class="ident" id="4155456">s</span><span class="op" id="4155457">)</span><span class="op" id="4155458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4155462">copy</span><span class="op" id="4155466">(</span><span class="ident" id="4155467">b</span><span class="op" id="4155468">.</span><span class="ident" id="4155469">buf</span><span class="op" id="4155472">,</span>&nbsp;<span class="ident" id="4155474">b</span><span class="op" id="4155475">.</span><span class="ident" id="4155476">s</span><span class="op" id="4155477">[</span><span class="op" id="4155478">:</span><span class="ident" id="4155479">b</span><span class="op" id="4155480">.</span><span class="ident" id="4155481">w</span><span class="op" id="4155482">]</span><span class="op" id="4155483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4155486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155489">b</span><span class="op" id="4155490">.</span><span class="ident" id="4155491">buf</span><span class="op" id="4155494">[</span><span class="ident" id="4155495">b</span><span class="op" id="4155496">.</span><span class="ident" id="4155497">w</span><span class="op" id="4155498">]</span>&nbsp;<span class="op" id="4155500">=</span>&nbsp;<span class="ident" id="4155502">c</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155505">b</span><span class="op" id="4155506">.</span><span class="ident" id="4155507">w</span><span class="op" id="4155508">++</span><br>
<span class="lineno"></span><span class="op" id="4155511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4155514">func</span>&nbsp;<span class="op" id="4155519">(</span><span class="ident" id="4155520">b</span>&nbsp;<span class="op" id="4155522">*</span><span class="ident" id="4155523">lazybuf</span><span class="op" id="4155530">)</span>&nbsp;<span class="builtintype" id="4155532">string</span><span class="op" id="4155538">(</span><span class="op" id="4155539">)</span>&nbsp;<span class="builtintype" id="4155541">string</span>&nbsp;<span class="op" id="4155548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155551">if</span>&nbsp;<span class="ident" id="4155554">b</span><span class="op" id="4155555">.</span><span class="ident" id="4155556">buf</span>&nbsp;<span class="op" id="4155560">==</span>&nbsp;<span class="builtintype" id="4155563">nil</span>&nbsp;<span class="op" id="4155567">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155571">return</span>&nbsp;<span class="ident" id="4155578">b</span><span class="op" id="4155579">.</span><span class="ident" id="4155580">s</span><span class="op" id="4155581">[</span><span class="op" id="4155582">:</span><span class="ident" id="4155583">b</span><span class="op" id="4155584">.</span><span class="ident" id="4155585">w</span><span class="op" id="4155586">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4155589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155592">return</span>&nbsp;<span class="builtintype" id="4155599">string</span><span class="op" id="4155605">(</span><span class="ident" id="4155606">b</span><span class="op" id="4155607">.</span><span class="ident" id="4155608">buf</span><span class="op" id="4155611">[</span><span class="op" id="4155612">:</span><span class="ident" id="4155613">b</span><span class="op" id="4155614">.</span><span class="ident" id="4155615">w</span><span class="op" id="4155616">]</span><span class="op" id="4155617">)</span><br>
<span class="lineno"></span><span class="op" id="4155619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="4155622">//&nbsp;Clean&nbsp;returns&nbsp;the&nbsp;shortest&nbsp;path&nbsp;name&nbsp;equivalent&nbsp;to&nbsp;path</span><br>
<span class="lineno"></span><span class="comment" id="4155681">//&nbsp;by&nbsp;purely&nbsp;lexical&nbsp;processing.&nbsp;&nbsp;It&nbsp;applies&nbsp;the&nbsp;following&nbsp;rules</span><br>
<span class="lineno"></span><span class="comment" id="4155746">//&nbsp;iteratively&nbsp;until&nbsp;no&nbsp;further&nbsp;processing&nbsp;can&nbsp;be&nbsp;done:</span><br>
<span class="lineno"></span><span class="comment" id="4155802">//</span><br>
<span class="lineno"></span><span class="comment" id="4155805">//&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;Replace&nbsp;multiple&nbsp;slashes&nbsp;with&nbsp;a&nbsp;single&nbsp;slash.</span><br>
<span class="lineno">55</span><span class="comment" id="4155857">//&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;Eliminate&nbsp;each&nbsp;.&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;current&nbsp;directory).</span><br>
<span class="lineno"></span><span class="comment" id="4155923">//&nbsp;&nbsp;&nbsp;&nbsp;3.&nbsp;Eliminate&nbsp;each&nbsp;inner&nbsp;..&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;parent&nbsp;directory)</span><br>
<span class="lineno"></span><span class="comment" id="4155994">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;along&nbsp;with&nbsp;the&nbsp;non-..&nbsp;element&nbsp;that&nbsp;precedes&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="4156048">//&nbsp;&nbsp;&nbsp;&nbsp;4.&nbsp;Eliminate&nbsp;..&nbsp;elements&nbsp;that&nbsp;begin&nbsp;a&nbsp;rooted&nbsp;path:</span><br>
<span class="lineno"></span><span class="comment" id="4156102">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;is,&nbsp;replace&nbsp;&#34;/..&#34;&nbsp;by&nbsp;&#34;/&#34;&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;path.</span><br>
<span class="lineno">60</span><span class="comment" id="4156166">//</span><br>
<span class="lineno"></span><span class="comment" id="4156169">//&nbsp;The&nbsp;returned&nbsp;path&nbsp;ends&nbsp;in&nbsp;a&nbsp;slash&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;the&nbsp;root&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="4156234">//</span><br>
<span class="lineno"></span><span class="comment" id="4156237">//&nbsp;If&nbsp;the&nbsp;result&nbsp;of&nbsp;this&nbsp;process&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,&nbsp;Clean</span><br>
<span class="lineno"></span><span class="comment" id="4156296">//&nbsp;returns&nbsp;the&nbsp;string&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">65</span><span class="comment" id="4156323">//</span><br>
<span class="lineno"></span><span class="comment" id="4156326">//&nbsp;See&nbsp;also&nbsp;Rob&nbsp;Pike,&nbsp;``Lexical&nbsp;File&nbsp;Names&nbsp;in&nbsp;Plan&nbsp;9&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="4156382">//&nbsp;Getting&nbsp;Dot-Dot&nbsp;Right,&#39;&#39;</span><br>
<span class="lineno"></span><span class="comment" id="4156410">//&nbsp;http://plan9.bell-labs.com/sys/doc/lexnames.html</span><br>
<span class="lineno"></span><span class="keyword" id="4156462">func</span>&nbsp;<span class="ident" id="4156467">Clean</span><span class="op" id="4156472">(</span><span class="ident" id="4156473">path</span>&nbsp;<span class="builtintype" id="4156478">string</span><span class="op" id="4156484">)</span>&nbsp;<span class="builtintype" id="4156486">string</span>&nbsp;<span class="op" id="4156493">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156496">if</span>&nbsp;<span class="ident" id="4156499">path</span>&nbsp;<span class="op" id="4156504">==</span>&nbsp;<span class="string" id="4156507">&#34;&#34;</span>&nbsp;<span class="op" id="4156510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156514">return</span>&nbsp;<span class="string" id="4156521">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4156526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156530">rooted</span>&nbsp;<span class="op" id="4156537">:=</span>&nbsp;<span class="ident" id="4156540">path</span><span class="op" id="4156544">[</span><span class="num" id="4156545">0</span><span class="op" id="4156546">]</span>&nbsp;<span class="op" id="4156548">==</span>&nbsp;<span class="string" id="4156551">&#39;/&#39;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156556">n</span>&nbsp;<span class="op" id="4156558">:=</span>&nbsp;<span class="builtinfunc" id="4156561">len</span><span class="op" id="4156564">(</span><span class="ident" id="4156565">path</span><span class="op" id="4156569">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4156573">//&nbsp;Invariants:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4156589">//&nbsp;&nbsp;&nbsp;&nbsp;reading&nbsp;from&nbsp;path;&nbsp;r&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;process.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4156648">//&nbsp;&nbsp;&nbsp;&nbsp;writing&nbsp;to&nbsp;buf;&nbsp;w&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;write.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4156702">//&nbsp;&nbsp;&nbsp;&nbsp;dotdot&nbsp;is&nbsp;index&nbsp;in&nbsp;buf&nbsp;where&nbsp;..&nbsp;must&nbsp;stop,&nbsp;either&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4156764">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;is&nbsp;the&nbsp;leading&nbsp;slash&nbsp;or&nbsp;it&nbsp;is&nbsp;a&nbsp;leading&nbsp;../../..&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156829">out</span>&nbsp;<span class="op" id="4156833">:=</span>&nbsp;<span class="ident" id="4156836">lazybuf</span><span class="op" id="4156843">{</span><span class="ident" id="4156844">s</span><span class="op" id="4156845">:</span>&nbsp;<span class="ident" id="4156847">path</span><span class="op" id="4156851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156854">r</span><span class="op" id="4156855">,</span>&nbsp;<span class="ident" id="4156857">dotdot</span>&nbsp;<span class="op" id="4156864">:=</span>&nbsp;<span class="num" id="4156867">0</span><span class="op" id="4156868">,</span>&nbsp;<span class="num" id="4156870">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156873">if</span>&nbsp;<span class="ident" id="4156876">rooted</span>&nbsp;<span class="op" id="4156883">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156887">out</span><span class="op" id="4156890">.</span><span class="builtinfunc" id="4156891">append</span><span class="op" id="4156897">(</span><span class="string" id="4156898">&#39;/&#39;</span><span class="op" id="4156901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156905">r</span><span class="op" id="4156906">,</span>&nbsp;<span class="ident" id="4156908">dotdot</span>&nbsp;<span class="op" id="4156915">=</span>&nbsp;<span class="num" id="4156917">1</span><span class="op" id="4156918">,</span>&nbsp;<span class="num" id="4156920">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4156923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156927">for</span>&nbsp;<span class="ident" id="4156931">r</span>&nbsp;<span class="op" id="4156933">&lt;</span>&nbsp;<span class="ident" id="4156935">n</span>&nbsp;<span class="op" id="4156937">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156941">switch</span>&nbsp;<span class="op" id="4156948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156952">case</span>&nbsp;<span class="ident" id="4156957">path</span><span class="op" id="4156961">[</span><span class="ident" id="4156962">r</span><span class="op" id="4156963">]</span>&nbsp;<span class="op" id="4156965">==</span>&nbsp;<span class="string" id="4156968">&#39;/&#39;</span><span class="op" id="4156971">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4156976">//&nbsp;empty&nbsp;path&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157001">r</span><span class="op" id="4157002">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157007">case</span>&nbsp;<span class="ident" id="4157012">path</span><span class="op" id="4157016">[</span><span class="ident" id="4157017">r</span><span class="op" id="4157018">]</span>&nbsp;<span class="op" id="4157020">==</span>&nbsp;<span class="string" id="4157023">&#39;.&#39;</span>&nbsp;<span class="op" id="4157027">&amp;&amp;</span>&nbsp;<span class="op" id="4157030">(</span><span class="ident" id="4157031">r</span><span class="op" id="4157032">+</span><span class="num" id="4157033">1</span>&nbsp;<span class="op" id="4157035">==</span>&nbsp;<span class="ident" id="4157038">n</span>&nbsp;<span class="op" id="4157040">||</span>&nbsp;<span class="ident" id="4157043">path</span><span class="op" id="4157047">[</span><span class="ident" id="4157048">r</span><span class="op" id="4157049">+</span><span class="num" id="4157050">1</span><span class="op" id="4157051">]</span>&nbsp;<span class="op" id="4157053">==</span>&nbsp;<span class="string" id="4157056">&#39;/&#39;</span><span class="op" id="4157059">)</span><span class="op" id="4157060">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4157065">//&nbsp;.&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157081">r</span><span class="op" id="4157082">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157087">case</span>&nbsp;<span class="ident" id="4157092">path</span><span class="op" id="4157096">[</span><span class="ident" id="4157097">r</span><span class="op" id="4157098">]</span>&nbsp;<span class="op" id="4157100">==</span>&nbsp;<span class="string" id="4157103">&#39;.&#39;</span>&nbsp;<span class="op" id="4157107">&amp;&amp;</span>&nbsp;<span class="ident" id="4157110">path</span><span class="op" id="4157114">[</span><span class="ident" id="4157115">r</span><span class="op" id="4157116">+</span><span class="num" id="4157117">1</span><span class="op" id="4157118">]</span>&nbsp;<span class="op" id="4157120">==</span>&nbsp;<span class="string" id="4157123">&#39;.&#39;</span>&nbsp;<span class="op" id="4157127">&amp;&amp;</span>&nbsp;<span class="op" id="4157130">(</span><span class="ident" id="4157131">r</span><span class="op" id="4157132">+</span><span class="num" id="4157133">2</span>&nbsp;<span class="op" id="4157135">==</span>&nbsp;<span class="ident" id="4157138">n</span>&nbsp;<span class="op" id="4157140">||</span>&nbsp;<span class="ident" id="4157143">path</span><span class="op" id="4157147">[</span><span class="ident" id="4157148">r</span><span class="op" id="4157149">+</span><span class="num" id="4157150">2</span><span class="op" id="4157151">]</span>&nbsp;<span class="op" id="4157153">==</span>&nbsp;<span class="string" id="4157156">&#39;/&#39;</span><span class="op" id="4157159">)</span><span class="op" id="4157160">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4157165">//&nbsp;..&nbsp;element:&nbsp;remove&nbsp;to&nbsp;last&nbsp;/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157200">r</span>&nbsp;<span class="op" id="4157202">+=</span>&nbsp;<span class="num" id="4157205">2</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157210">switch</span>&nbsp;<span class="op" id="4157217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157222">case</span>&nbsp;<span class="ident" id="4157227">out</span><span class="op" id="4157230">.</span><span class="ident" id="4157231">w</span>&nbsp;<span class="op" id="4157233">&gt;</span>&nbsp;<span class="ident" id="4157235">dotdot</span><span class="op" id="4157241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4157247">//&nbsp;can&nbsp;backtrack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157268">out</span><span class="op" id="4157271">.</span><span class="ident" id="4157272">w</span><span class="op" id="4157273">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157280">for</span>&nbsp;<span class="ident" id="4157284">out</span><span class="op" id="4157287">.</span><span class="ident" id="4157288">w</span>&nbsp;<span class="op" id="4157290">&gt;</span>&nbsp;<span class="ident" id="4157292">dotdot</span>&nbsp;<span class="op" id="4157299">&amp;&amp;</span>&nbsp;<span class="ident" id="4157302">out</span><span class="op" id="4157305">.</span><span class="ident" id="4157306">index</span><span class="op" id="4157311">(</span><span class="ident" id="4157312">out</span><span class="op" id="4157315">.</span><span class="ident" id="4157316">w</span><span class="op" id="4157317">)</span>&nbsp;<span class="op" id="4157319">!=</span>&nbsp;<span class="string" id="4157322">&#39;/&#39;</span>&nbsp;<span class="op" id="4157326">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157333">out</span><span class="op" id="4157336">.</span><span class="ident" id="4157337">w</span><span class="op" id="4157338">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157350">case</span>&nbsp;<span class="op" id="4157355">!</span><span class="ident" id="4157356">rooted</span><span class="op" id="4157362">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4157368">//&nbsp;cannot&nbsp;backtrack,&nbsp;but&nbsp;not&nbsp;rooted,&nbsp;so&nbsp;append&nbsp;..&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157431">if</span>&nbsp;<span class="ident" id="4157434">out</span><span class="op" id="4157437">.</span><span class="ident" id="4157438">w</span>&nbsp;<span class="op" id="4157440">&gt;</span>&nbsp;<span class="num" id="4157442">0</span>&nbsp;<span class="op" id="4157444">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157451">out</span><span class="op" id="4157454">.</span><span class="builtinfunc" id="4157455">append</span><span class="op" id="4157461">(</span><span class="string" id="4157462">&#39;/&#39;</span><span class="op" id="4157465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157477">out</span><span class="op" id="4157480">.</span><span class="builtinfunc" id="4157481">append</span><span class="op" id="4157487">(</span><span class="string" id="4157488">&#39;.&#39;</span><span class="op" id="4157491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157497">out</span><span class="op" id="4157500">.</span><span class="builtinfunc" id="4157501">append</span><span class="op" id="4157507">(</span><span class="string" id="4157508">&#39;.&#39;</span><span class="op" id="4157511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157517">dotdot</span>&nbsp;<span class="op" id="4157524">=</span>&nbsp;<span class="ident" id="4157526">out</span><span class="op" id="4157529">.</span><span class="ident" id="4157530">w</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157539">default</span><span class="op" id="4157546">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4157551">//&nbsp;real&nbsp;path&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4157576">//&nbsp;add&nbsp;slash&nbsp;if&nbsp;needed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157602">if</span>&nbsp;<span class="ident" id="4157605">rooted</span>&nbsp;<span class="op" id="4157612">&amp;&amp;</span>&nbsp;<span class="ident" id="4157615">out</span><span class="op" id="4157618">.</span><span class="ident" id="4157619">w</span>&nbsp;<span class="op" id="4157621">!=</span>&nbsp;<span class="num" id="4157624">1</span>&nbsp;<span class="op" id="4157626">||</span>&nbsp;<span class="op" id="4157629">!</span><span class="ident" id="4157630">rooted</span>&nbsp;<span class="op" id="4157637">&amp;&amp;</span>&nbsp;<span class="ident" id="4157640">out</span><span class="op" id="4157643">.</span><span class="ident" id="4157644">w</span>&nbsp;<span class="op" id="4157646">!=</span>&nbsp;<span class="num" id="4157649">0</span>&nbsp;<span class="op" id="4157651">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157657">out</span><span class="op" id="4157660">.</span><span class="builtinfunc" id="4157661">append</span><span class="op" id="4157667">(</span><span class="string" id="4157668">&#39;/&#39;</span><span class="op" id="4157671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4157681">//&nbsp;copy&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157700">for</span>&nbsp;<span class="op" id="4157704">;</span>&nbsp;<span class="ident" id="4157706">r</span>&nbsp;<span class="op" id="4157708">&lt;</span>&nbsp;<span class="ident" id="4157710">n</span>&nbsp;<span class="op" id="4157712">&amp;&amp;</span>&nbsp;<span class="ident" id="4157715">path</span><span class="op" id="4157719">[</span><span class="ident" id="4157720">r</span><span class="op" id="4157721">]</span>&nbsp;<span class="op" id="4157723">!=</span>&nbsp;<span class="string" id="4157726">&#39;/&#39;</span><span class="op" id="4157729">;</span>&nbsp;<span class="ident" id="4157731">r</span><span class="op" id="4157732">++</span>&nbsp;<span class="op" id="4157735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157741">out</span><span class="op" id="4157744">.</span><span class="builtinfunc" id="4157745">append</span><span class="op" id="4157751">(</span><span class="ident" id="4157752">path</span><span class="op" id="4157756">[</span><span class="ident" id="4157757">r</span><span class="op" id="4157758">]</span><span class="op" id="4157759">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4157775">//&nbsp;Turn&nbsp;empty&nbsp;string&nbsp;into&nbsp;&#34;.&#34;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157806">if</span>&nbsp;<span class="ident" id="4157809">out</span><span class="op" id="4157812">.</span><span class="ident" id="4157813">w</span>&nbsp;<span class="op" id="4157815">==</span>&nbsp;<span class="num" id="4157818">0</span>&nbsp;<span class="op" id="4157820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157824">return</span>&nbsp;<span class="string" id="4157831">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157840">return</span>&nbsp;<span class="ident" id="4157847">out</span><span class="op" id="4157850">.</span><span class="builtintype" id="4157851">string</span><span class="op" id="4157857">(</span><span class="op" id="4157858">)</span><br>
<span class="lineno">135</span><span class="op" id="4157860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4157863">//&nbsp;Split&nbsp;splits&nbsp;path&nbsp;immediately&nbsp;following&nbsp;the&nbsp;final&nbsp;slash.</span><br>
<span class="lineno"></span><span class="comment" id="4157923">//&nbsp;separating&nbsp;it&nbsp;into&nbsp;a&nbsp;directory&nbsp;and&nbsp;file&nbsp;name&nbsp;component.</span><br>
<span class="lineno"></span><span class="comment" id="4157982">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;slash&nbsp;path,&nbsp;Split&nbsp;returns&nbsp;an&nbsp;empty&nbsp;dir&nbsp;and</span><br>
<span class="lineno">140</span><span class="comment" id="4158043">//&nbsp;file&nbsp;set&nbsp;to&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="4158064">//&nbsp;The&nbsp;returned&nbsp;values&nbsp;have&nbsp;the&nbsp;property&nbsp;that&nbsp;path&nbsp;=&nbsp;dir+file.</span><br>
<span class="lineno"></span><span class="keyword" id="4158127">func</span>&nbsp;<span class="ident" id="4158132">Split</span><span class="op" id="4158137">(</span><span class="ident" id="4158138">path</span>&nbsp;<span class="builtintype" id="4158143">string</span><span class="op" id="4158149">)</span>&nbsp;<span class="op" id="4158151">(</span><span class="ident" id="4158152">dir</span><span class="op" id="4158155">,</span>&nbsp;<span class="ident" id="4158157">file</span>&nbsp;<span class="builtintype" id="4158162">string</span><span class="op" id="4158168">)</span>&nbsp;<span class="op" id="4158170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4158173">i</span>&nbsp;<span class="op" id="4158175">:=</span>&nbsp;<span class="ident" id="4158178">strings</span><span class="op" id="4158185">.</span><span class="ident" id="4158186">LastIndex</span><span class="op" id="4158195">(</span><span class="ident" id="4158196">path</span><span class="op" id="4158200">,</span>&nbsp;<span class="string" id="4158202">&#34;/&#34;</span><span class="op" id="4158205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158208">return</span>&nbsp;<span class="ident" id="4158215">path</span><span class="op" id="4158219">[</span><span class="op" id="4158220">:</span><span class="ident" id="4158221">i</span><span class="op" id="4158222">+</span><span class="num" id="4158223">1</span><span class="op" id="4158224">]</span><span class="op" id="4158225">,</span>&nbsp;<span class="ident" id="4158227">path</span><span class="op" id="4158231">[</span><span class="ident" id="4158232">i</span><span class="op" id="4158233">+</span><span class="num" id="4158234">1</span><span class="op" id="4158235">:</span><span class="op" id="4158236">]</span><br>
<span class="lineno">145</span><span class="op" id="4158238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4158241">//&nbsp;Join&nbsp;joins&nbsp;any&nbsp;number&nbsp;of&nbsp;path&nbsp;elements&nbsp;into&nbsp;a&nbsp;single&nbsp;path,&nbsp;adding&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4158312">//&nbsp;separating&nbsp;slash&nbsp;if&nbsp;necessary.&nbsp;The&nbsp;result&nbsp;is&nbsp;Cleaned;&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span><span class="comment" id="4158384">//&nbsp;all&nbsp;empty&nbsp;strings&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno">150</span><span class="keyword" id="4158418">func</span>&nbsp;<span class="ident" id="4158423">Join</span><span class="op" id="4158427">(</span><span class="ident" id="4158428">elem</span>&nbsp;<span class="op" id="4158433">...</span><span class="builtintype" id="4158436">string</span><span class="op" id="4158442">)</span>&nbsp;<span class="builtintype" id="4158444">string</span>&nbsp;<span class="op" id="4158451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158454">for</span>&nbsp;<span class="ident" id="4158458">i</span><span class="op" id="4158459">,</span>&nbsp;<span class="ident" id="4158461">e</span>&nbsp;<span class="op" id="4158463">:=</span>&nbsp;<span class="keyword" id="4158466">range</span>&nbsp;<span class="ident" id="4158472">elem</span>&nbsp;<span class="op" id="4158477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158481">if</span>&nbsp;<span class="ident" id="4158484">e</span>&nbsp;<span class="op" id="4158486">!=</span>&nbsp;<span class="string" id="4158489">&#34;&#34;</span>&nbsp;<span class="op" id="4158492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158497">return</span>&nbsp;<span class="ident" id="4158504">Clean</span><span class="op" id="4158509">(</span><span class="ident" id="4158510">strings</span><span class="op" id="4158517">.</span><span class="ident" id="4158518">Join</span><span class="op" id="4158522">(</span><span class="ident" id="4158523">elem</span><span class="op" id="4158527">[</span><span class="ident" id="4158528">i</span><span class="op" id="4158529">:</span><span class="op" id="4158530">]</span><span class="op" id="4158531">,</span>&nbsp;<span class="string" id="4158533">&#34;/&#34;</span><span class="op" id="4158536">)</span><span class="op" id="4158537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4158541">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4158544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158547">return</span>&nbsp;<span class="string" id="4158554">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4158557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4158560">//&nbsp;Ext&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;extension&nbsp;used&nbsp;by&nbsp;path.</span><br>
<span class="lineno">160</span><span class="comment" id="4158613">//&nbsp;The&nbsp;extension&nbsp;is&nbsp;the&nbsp;suffix&nbsp;beginning&nbsp;at&nbsp;the&nbsp;final&nbsp;dot</span><br>
<span class="lineno"></span><span class="comment" id="4158671">//&nbsp;in&nbsp;the&nbsp;final&nbsp;slash-separated&nbsp;element&nbsp;of&nbsp;path;</span><br>
<span class="lineno"></span><span class="comment" id="4158720">//&nbsp;it&nbsp;is&nbsp;empty&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;dot.</span><br>
<span class="lineno"></span><span class="keyword" id="4158755">func</span>&nbsp;<span class="ident" id="4158760">Ext</span><span class="op" id="4158763">(</span><span class="ident" id="4158764">path</span>&nbsp;<span class="builtintype" id="4158769">string</span><span class="op" id="4158775">)</span>&nbsp;<span class="builtintype" id="4158777">string</span>&nbsp;<span class="op" id="4158784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158787">for</span>&nbsp;<span class="ident" id="4158791">i</span>&nbsp;<span class="op" id="4158793">:=</span>&nbsp;<span class="builtinfunc" id="4158796">len</span><span class="op" id="4158799">(</span><span class="ident" id="4158800">path</span><span class="op" id="4158804">)</span>&nbsp;<span class="op" id="4158806">-</span>&nbsp;<span class="num" id="4158808">1</span><span class="op" id="4158809">;</span>&nbsp;<span class="ident" id="4158811">i</span>&nbsp;<span class="op" id="4158813">&gt;=</span>&nbsp;<span class="num" id="4158816">0</span>&nbsp;<span class="op" id="4158818">&amp;&amp;</span>&nbsp;<span class="ident" id="4158821">path</span><span class="op" id="4158825">[</span><span class="ident" id="4158826">i</span><span class="op" id="4158827">]</span>&nbsp;<span class="op" id="4158829">!=</span>&nbsp;<span class="string" id="4158832">&#39;/&#39;</span><span class="op" id="4158835">;</span>&nbsp;<span class="ident" id="4158837">i</span><span class="op" id="4158838">--</span>&nbsp;<span class="op" id="4158841">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158845">if</span>&nbsp;<span class="ident" id="4158848">path</span><span class="op" id="4158852">[</span><span class="ident" id="4158853">i</span><span class="op" id="4158854">]</span>&nbsp;<span class="op" id="4158856">==</span>&nbsp;<span class="string" id="4158859">&#39;.&#39;</span>&nbsp;<span class="op" id="4158863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158868">return</span>&nbsp;<span class="ident" id="4158875">path</span><span class="op" id="4158879">[</span><span class="ident" id="4158880">i</span><span class="op" id="4158881">:</span><span class="op" id="4158882">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4158886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4158889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158892">return</span>&nbsp;<span class="string" id="4158899">&#34;&#34;</span><br>
<span class="lineno">170</span><span class="op" id="4158902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4158905">//&nbsp;Base&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="4158947">//&nbsp;Trailing&nbsp;slashes&nbsp;are&nbsp;removed&nbsp;before&nbsp;extracting&nbsp;the&nbsp;last&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="4159015">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Base&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">175</span><span class="comment" id="4159058">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes,&nbsp;Base&nbsp;returns&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4159121">func</span>&nbsp;<span class="ident" id="4159126">Base</span><span class="op" id="4159130">(</span><span class="ident" id="4159131">path</span>&nbsp;<span class="builtintype" id="4159136">string</span><span class="op" id="4159142">)</span>&nbsp;<span class="builtintype" id="4159144">string</span>&nbsp;<span class="op" id="4159151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159154">if</span>&nbsp;<span class="ident" id="4159157">path</span>&nbsp;<span class="op" id="4159162">==</span>&nbsp;<span class="string" id="4159165">&#34;&#34;</span>&nbsp;<span class="op" id="4159168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159172">return</span>&nbsp;<span class="string" id="4159179">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4159184">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4159187">//&nbsp;Strip&nbsp;trailing&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159215">for</span>&nbsp;<span class="builtinfunc" id="4159219">len</span><span class="op" id="4159222">(</span><span class="ident" id="4159223">path</span><span class="op" id="4159227">)</span>&nbsp;<span class="op" id="4159229">&gt;</span>&nbsp;<span class="num" id="4159231">0</span>&nbsp;<span class="op" id="4159233">&amp;&amp;</span>&nbsp;<span class="ident" id="4159236">path</span><span class="op" id="4159240">[</span><span class="builtinfunc" id="4159241">len</span><span class="op" id="4159244">(</span><span class="ident" id="4159245">path</span><span class="op" id="4159249">)</span><span class="op" id="4159250">-</span><span class="num" id="4159251">1</span><span class="op" id="4159252">]</span>&nbsp;<span class="op" id="4159254">==</span>&nbsp;<span class="string" id="4159257">&#39;/&#39;</span>&nbsp;<span class="op" id="4159261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4159265">path</span>&nbsp;<span class="op" id="4159270">=</span>&nbsp;<span class="ident" id="4159272">path</span><span class="op" id="4159276">[</span><span class="num" id="4159277">0</span>&nbsp;<span class="op" id="4159279">:</span>&nbsp;<span class="builtinfunc" id="4159281">len</span><span class="op" id="4159284">(</span><span class="ident" id="4159285">path</span><span class="op" id="4159289">)</span><span class="op" id="4159290">-</span><span class="num" id="4159291">1</span><span class="op" id="4159292">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4159295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4159298">//&nbsp;Find&nbsp;the&nbsp;last&nbsp;element</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159324">if</span>&nbsp;<span class="ident" id="4159327">i</span>&nbsp;<span class="op" id="4159329">:=</span>&nbsp;<span class="ident" id="4159332">strings</span><span class="op" id="4159339">.</span><span class="ident" id="4159340">LastIndex</span><span class="op" id="4159349">(</span><span class="ident" id="4159350">path</span><span class="op" id="4159354">,</span>&nbsp;<span class="string" id="4159356">&#34;/&#34;</span><span class="op" id="4159359">)</span><span class="op" id="4159360">;</span>&nbsp;<span class="ident" id="4159362">i</span>&nbsp;<span class="op" id="4159364">&gt;=</span>&nbsp;<span class="num" id="4159367">0</span>&nbsp;<span class="op" id="4159369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4159373">path</span>&nbsp;<span class="op" id="4159378">=</span>&nbsp;<span class="ident" id="4159380">path</span><span class="op" id="4159384">[</span><span class="ident" id="4159385">i</span><span class="op" id="4159386">+</span><span class="num" id="4159387">1</span><span class="op" id="4159388">:</span><span class="op" id="4159389">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4159392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4159395">//&nbsp;If&nbsp;empty&nbsp;now,&nbsp;it&nbsp;had&nbsp;only&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159434">if</span>&nbsp;<span class="ident" id="4159437">path</span>&nbsp;<span class="op" id="4159442">==</span>&nbsp;<span class="string" id="4159445">&#34;&#34;</span>&nbsp;<span class="op" id="4159448">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159452">return</span>&nbsp;<span class="string" id="4159459">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4159464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159467">return</span>&nbsp;<span class="ident" id="4159474">path</span><br>
<span class="lineno"></span><span class="op" id="4159479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="4159482">//&nbsp;IsAbs&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;path&nbsp;is&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="4159529">func</span>&nbsp;<span class="ident" id="4159534">IsAbs</span><span class="op" id="4159539">(</span><span class="ident" id="4159540">path</span>&nbsp;<span class="builtintype" id="4159545">string</span><span class="op" id="4159551">)</span>&nbsp;<span class="builtintype" id="4159553">bool</span>&nbsp;<span class="op" id="4159558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159561">return</span>&nbsp;<span class="builtinfunc" id="4159568">len</span><span class="op" id="4159571">(</span><span class="ident" id="4159572">path</span><span class="op" id="4159576">)</span>&nbsp;<span class="op" id="4159578">&gt;</span>&nbsp;<span class="num" id="4159580">0</span>&nbsp;<span class="op" id="4159582">&amp;&amp;</span>&nbsp;<span class="ident" id="4159585">path</span><span class="op" id="4159589">[</span><span class="num" id="4159590">0</span><span class="op" id="4159591">]</span>&nbsp;<span class="op" id="4159593">==</span>&nbsp;<span class="string" id="4159596">&#39;/&#39;</span><br>
<span class="lineno"></span><span class="op" id="4159600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="4159603">//&nbsp;Dir&nbsp;returns&nbsp;all&nbsp;but&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path,&nbsp;typically&nbsp;the&nbsp;path&#39;s&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="4159684">//&nbsp;After&nbsp;dropping&nbsp;the&nbsp;final&nbsp;element&nbsp;using&nbsp;Split,&nbsp;the&nbsp;path&nbsp;is&nbsp;Cleaned&nbsp;and&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="4159766">//&nbsp;slashes&nbsp;are&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="4159790">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Dir&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="4159832">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes&nbsp;followed&nbsp;by&nbsp;non-slash&nbsp;bytes,&nbsp;Dir</span><br>
<span class="lineno">205</span><span class="comment" id="4159909">//&nbsp;returns&nbsp;a&nbsp;single&nbsp;slash.&nbsp;In&nbsp;any&nbsp;other&nbsp;case,&nbsp;the&nbsp;returned&nbsp;path&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4159991">//&nbsp;slash.</span><br>
<span class="lineno"></span><span class="keyword" id="4160001">func</span>&nbsp;<span class="ident" id="4160006">Dir</span><span class="op" id="4160009">(</span><span class="ident" id="4160010">path</span>&nbsp;<span class="builtintype" id="4160015">string</span><span class="op" id="4160021">)</span>&nbsp;<span class="builtintype" id="4160023">string</span>&nbsp;<span class="op" id="4160030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4160033">dir</span><span class="op" id="4160036">,</span>&nbsp;<span class="ident" id="4160038">_</span>&nbsp;<span class="op" id="4160040">:=</span>&nbsp;<span class="ident" id="4160043">Split</span><span class="op" id="4160048">(</span><span class="ident" id="4160049">path</span><span class="op" id="4160053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160056">return</span>&nbsp;<span class="ident" id="4160063">Clean</span><span class="op" id="4160068">(</span><span class="ident" id="4160069">dir</span><span class="op" id="4160072">)</span><br>
<span class="lineno">210</span><span class="op" id="4160074">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
