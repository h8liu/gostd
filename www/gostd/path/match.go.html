<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3684422">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3684477">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3684531">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3684582">package</span>&nbsp;<span class="ident" id="3684590">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3684596">import</span>&nbsp;<span class="op" id="3684603">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3684606">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3684616">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3684627">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3684642">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3684645">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3684706">var</span>&nbsp;<span class="ident" id="3684710">ErrBadPattern</span>&nbsp;<span class="op" id="3684724">=</span>&nbsp;<span class="ident" id="3684726">errors</span><span class="op" id="3684732">.</span><span class="ident" id="3684733">New</span><span class="op" id="3684736">(</span><span class="string" id="3684737">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3684762">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3684765">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="comment" id="3684832">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3684858">//</span><br>
<span class="lineno"></span><span class="comment" id="3684861">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno">20</span><span class="comment" id="3684873">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3684886">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno"></span><span class="comment" id="3684895">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-/&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3684952">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-/&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3685003">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno">25</span><span class="comment" id="3685043">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3685095">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3685158">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3685194">//</span><br>
<span class="lineno"></span><span class="comment" id="3685197">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno">30</span><span class="comment" id="3685217">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3685275">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3685311">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3685365">//</span><br>
<span class="lineno"></span><span class="comment" id="3685368">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno">35</span><span class="comment" id="3685438">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3685505">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="comment" id="3685522">//</span><br>
<span class="lineno"></span><span class="keyword" id="3685525">func</span>&nbsp;<span class="ident" id="3685530">Match</span><span class="op" id="3685535">(</span><span class="ident" id="3685536">pattern</span><span class="op" id="3685543">,</span>&nbsp;<span class="ident" id="3685545">name</span>&nbsp;<span class="builtintype" id="3685550">string</span><span class="op" id="3685556">)</span>&nbsp;<span class="op" id="3685558">(</span><span class="ident" id="3685559">matched</span>&nbsp;<span class="builtintype" id="3685567">bool</span><span class="op" id="3685571">,</span>&nbsp;<span class="ident" id="3685573">err</span>&nbsp;<span class="builtintype" id="3685577">error</span><span class="op" id="3685582">)</span>&nbsp;<span class="op" id="3685584">{</span><br>
<span class="lineno"></span><span class="ident" id="3685586">Pattern</span><span class="op" id="3685593">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685596">for</span>&nbsp;<span class="builtinfunc" id="3685600">len</span><span class="op" id="3685603">(</span><span class="ident" id="3685604">pattern</span><span class="op" id="3685611">)</span>&nbsp;<span class="op" id="3685613">&gt;</span>&nbsp;<span class="num" id="3685615">0</span>&nbsp;<span class="op" id="3685617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685621">var</span>&nbsp;<span class="ident" id="3685625">star</span>&nbsp;<span class="builtintype" id="3685630">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685637">var</span>&nbsp;<span class="ident" id="3685641">chunk</span>&nbsp;<span class="builtintype" id="3685647">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685656">star</span><span class="op" id="3685660">,</span>&nbsp;<span class="ident" id="3685662">chunk</span><span class="op" id="3685667">,</span>&nbsp;<span class="ident" id="3685669">pattern</span>&nbsp;<span class="op" id="3685677">=</span>&nbsp;<span class="ident" id="3685679">scanChunk</span><span class="op" id="3685688">(</span><span class="ident" id="3685689">pattern</span><span class="op" id="3685696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685700">if</span>&nbsp;<span class="ident" id="3685703">star</span>&nbsp;<span class="op" id="3685708">&amp;&amp;</span>&nbsp;<span class="ident" id="3685711">chunk</span>&nbsp;<span class="op" id="3685717">==</span>&nbsp;<span class="string" id="3685720">&#34;&#34;</span>&nbsp;<span class="op" id="3685723">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3685728">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685787">return</span>&nbsp;<span class="ident" id="3685794">strings</span><span class="op" id="3685801">.</span><span class="ident" id="3685802">Index</span><span class="op" id="3685807">(</span><span class="ident" id="3685808">name</span><span class="op" id="3685812">,</span>&nbsp;<span class="string" id="3685814">&#34;/&#34;</span><span class="op" id="3685817">)</span>&nbsp;<span class="op" id="3685819">&lt;</span>&nbsp;<span class="num" id="3685821">0</span><span class="op" id="3685822">,</span>&nbsp;<span class="ident" id="3685824">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3685834">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685875">t</span><span class="op" id="3685876">,</span>&nbsp;<span class="ident" id="3685878">ok</span><span class="op" id="3685880">,</span>&nbsp;<span class="ident" id="3685882">err</span>&nbsp;<span class="op" id="3685886">:=</span>&nbsp;<span class="ident" id="3685889">matchChunk</span><span class="op" id="3685899">(</span><span class="ident" id="3685900">chunk</span><span class="op" id="3685905">,</span>&nbsp;<span class="ident" id="3685907">name</span><span class="op" id="3685911">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3685915">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3685980">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3686050">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686070">if</span>&nbsp;<span class="ident" id="3686073">ok</span>&nbsp;<span class="op" id="3686076">&amp;&amp;</span>&nbsp;<span class="op" id="3686079">(</span><span class="builtinfunc" id="3686080">len</span><span class="op" id="3686083">(</span><span class="ident" id="3686084">t</span><span class="op" id="3686085">)</span>&nbsp;<span class="op" id="3686087">==</span>&nbsp;<span class="num" id="3686090">0</span>&nbsp;<span class="op" id="3686092">||</span>&nbsp;<span class="builtinfunc" id="3686095">len</span><span class="op" id="3686098">(</span><span class="ident" id="3686099">pattern</span><span class="op" id="3686106">)</span>&nbsp;<span class="op" id="3686108">&gt;</span>&nbsp;<span class="num" id="3686110">0</span><span class="op" id="3686111">)</span>&nbsp;<span class="op" id="3686113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686118">name</span>&nbsp;<span class="op" id="3686123">=</span>&nbsp;<span class="ident" id="3686125">t</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686130">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686145">if</span>&nbsp;<span class="ident" id="3686148">err</span>&nbsp;<span class="op" id="3686152">!=</span>&nbsp;<span class="ident" id="3686155">nil</span>&nbsp;<span class="op" id="3686159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686164">return</span>&nbsp;<span class="builtintype" id="3686171">false</span><span class="op" id="3686176">,</span>&nbsp;<span class="ident" id="3686178">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686184">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686188">if</span>&nbsp;<span class="ident" id="3686191">star</span>&nbsp;<span class="op" id="3686196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3686201">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3686242">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686263">for</span>&nbsp;<span class="ident" id="3686267">i</span>&nbsp;<span class="op" id="3686269">:=</span>&nbsp;<span class="num" id="3686272">0</span><span class="op" id="3686273">;</span>&nbsp;<span class="ident" id="3686275">i</span>&nbsp;<span class="op" id="3686277">&lt;</span>&nbsp;<span class="builtinfunc" id="3686279">len</span><span class="op" id="3686282">(</span><span class="ident" id="3686283">name</span><span class="op" id="3686287">)</span>&nbsp;<span class="op" id="3686289">&amp;&amp;</span>&nbsp;<span class="ident" id="3686292">name</span><span class="op" id="3686296">[</span><span class="ident" id="3686297">i</span><span class="op" id="3686298">]</span>&nbsp;<span class="op" id="3686300">!=</span>&nbsp;<span class="string" id="3686303">&#39;/&#39;</span><span class="op" id="3686306">;</span>&nbsp;<span class="ident" id="3686308">i</span><span class="op" id="3686309">++</span>&nbsp;<span class="op" id="3686312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686318">t</span><span class="op" id="3686319">,</span>&nbsp;<span class="ident" id="3686321">ok</span><span class="op" id="3686323">,</span>&nbsp;<span class="ident" id="3686325">err</span>&nbsp;<span class="op" id="3686329">:=</span>&nbsp;<span class="ident" id="3686332">matchChunk</span><span class="op" id="3686342">(</span><span class="ident" id="3686343">chunk</span><span class="op" id="3686348">,</span>&nbsp;<span class="ident" id="3686350">name</span><span class="op" id="3686354">[</span><span class="ident" id="3686355">i</span><span class="op" id="3686356">+</span><span class="num" id="3686357">1</span><span class="op" id="3686358">:</span><span class="op" id="3686359">]</span><span class="op" id="3686360">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686366">if</span>&nbsp;<span class="ident" id="3686369">ok</span>&nbsp;<span class="op" id="3686372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3686379">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686444">if</span>&nbsp;<span class="builtinfunc" id="3686447">len</span><span class="op" id="3686450">(</span><span class="ident" id="3686451">pattern</span><span class="op" id="3686458">)</span>&nbsp;<span class="op" id="3686460">==</span>&nbsp;<span class="num" id="3686463">0</span>&nbsp;<span class="op" id="3686465">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3686468">len</span><span class="op" id="3686471">(</span><span class="ident" id="3686472">t</span><span class="op" id="3686473">)</span>&nbsp;<span class="op" id="3686475">&gt;</span>&nbsp;<span class="num" id="3686477">0</span>&nbsp;<span class="op" id="3686479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686487">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686501">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686508">name</span>&nbsp;<span class="op" id="3686513">=</span>&nbsp;<span class="ident" id="3686515">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686522">continue</span>&nbsp;<span class="ident" id="3686531">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686549">if</span>&nbsp;<span class="ident" id="3686552">err</span>&nbsp;<span class="op" id="3686556">!=</span>&nbsp;<span class="ident" id="3686559">nil</span>&nbsp;<span class="op" id="3686563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686570">return</span>&nbsp;<span class="builtintype" id="3686577">false</span><span class="op" id="3686582">,</span>&nbsp;<span class="ident" id="3686584">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686605">return</span>&nbsp;<span class="builtintype" id="3686612">false</span><span class="op" id="3686617">,</span>&nbsp;<span class="ident" id="3686619">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686624">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686627">return</span>&nbsp;<span class="builtinfunc" id="3686634">len</span><span class="op" id="3686637">(</span><span class="ident" id="3686638">name</span><span class="op" id="3686642">)</span>&nbsp;<span class="op" id="3686644">==</span>&nbsp;<span class="num" id="3686647">0</span><span class="op" id="3686648">,</span>&nbsp;<span class="ident" id="3686650">nil</span><br>
<span class="lineno"></span><span class="op" id="3686654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3686657">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="3686731">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno">85</span><span class="keyword" id="3686763">func</span>&nbsp;<span class="ident" id="3686768">scanChunk</span><span class="op" id="3686777">(</span><span class="ident" id="3686778">pattern</span>&nbsp;<span class="builtintype" id="3686786">string</span><span class="op" id="3686792">)</span>&nbsp;<span class="op" id="3686794">(</span><span class="ident" id="3686795">star</span>&nbsp;<span class="builtintype" id="3686800">bool</span><span class="op" id="3686804">,</span>&nbsp;<span class="ident" id="3686806">chunk</span><span class="op" id="3686811">,</span>&nbsp;<span class="ident" id="3686813">rest</span>&nbsp;<span class="builtintype" id="3686818">string</span><span class="op" id="3686824">)</span>&nbsp;<span class="op" id="3686826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686829">for</span>&nbsp;<span class="builtinfunc" id="3686833">len</span><span class="op" id="3686836">(</span><span class="ident" id="3686837">pattern</span><span class="op" id="3686844">)</span>&nbsp;<span class="op" id="3686846">&gt;</span>&nbsp;<span class="num" id="3686848">0</span>&nbsp;<span class="op" id="3686850">&amp;&amp;</span>&nbsp;<span class="ident" id="3686853">pattern</span><span class="op" id="3686860">[</span><span class="num" id="3686861">0</span><span class="op" id="3686862">]</span>&nbsp;<span class="op" id="3686864">==</span>&nbsp;<span class="string" id="3686867">&#39;*&#39;</span>&nbsp;<span class="op" id="3686871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686875">pattern</span>&nbsp;<span class="op" id="3686883">=</span>&nbsp;<span class="ident" id="3686885">pattern</span><span class="op" id="3686892">[</span><span class="num" id="3686893">1</span><span class="op" id="3686894">:</span><span class="op" id="3686895">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686899">star</span>&nbsp;<span class="op" id="3686904">=</span>&nbsp;<span class="builtintype" id="3686906">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686912">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686915">inrange</span>&nbsp;<span class="op" id="3686923">:=</span>&nbsp;<span class="builtintype" id="3686926">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686933">var</span>&nbsp;<span class="ident" id="3686937">i</span>&nbsp;<span class="builtintype" id="3686939">int</span><br>
<span class="lineno"></span><span class="ident" id="3686943">Scan</span><span class="op" id="3686947">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686950">for</span>&nbsp;<span class="ident" id="3686954">i</span>&nbsp;<span class="op" id="3686956">=</span>&nbsp;<span class="num" id="3686958">0</span><span class="op" id="3686959">;</span>&nbsp;<span class="ident" id="3686961">i</span>&nbsp;<span class="op" id="3686963">&lt;</span>&nbsp;<span class="builtinfunc" id="3686965">len</span><span class="op" id="3686968">(</span><span class="ident" id="3686969">pattern</span><span class="op" id="3686976">)</span><span class="op" id="3686977">;</span>&nbsp;<span class="ident" id="3686979">i</span><span class="op" id="3686980">++</span>&nbsp;<span class="op" id="3686983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686987">switch</span>&nbsp;<span class="ident" id="3686994">pattern</span><span class="op" id="3687001">[</span><span class="ident" id="3687002">i</span><span class="op" id="3687003">]</span>&nbsp;<span class="op" id="3687005">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687009">case</span>&nbsp;<span class="string" id="3687014">&#39;\\&#39;</span><span class="op" id="3687018">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3687023">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687077">if</span>&nbsp;<span class="ident" id="3687080">i</span><span class="op" id="3687081">+</span><span class="num" id="3687082">1</span>&nbsp;<span class="op" id="3687084">&lt;</span>&nbsp;<span class="builtinfunc" id="3687086">len</span><span class="op" id="3687089">(</span><span class="ident" id="3687090">pattern</span><span class="op" id="3687097">)</span>&nbsp;<span class="op" id="3687099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3687105">i</span><span class="op" id="3687106">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3687112">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687116">case</span>&nbsp;<span class="string" id="3687121">&#39;[&#39;</span><span class="op" id="3687124">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3687129">inrange</span>&nbsp;<span class="op" id="3687137">=</span>&nbsp;<span class="builtintype" id="3687139">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687146">case</span>&nbsp;<span class="string" id="3687151">&#39;]&#39;</span><span class="op" id="3687154">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3687159">inrange</span>&nbsp;<span class="op" id="3687167">=</span>&nbsp;<span class="builtintype" id="3687169">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687177">case</span>&nbsp;<span class="string" id="3687182">&#39;*&#39;</span><span class="op" id="3687185">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687190">if</span>&nbsp;<span class="op" id="3687193">!</span><span class="ident" id="3687194">inrange</span>&nbsp;<span class="op" id="3687202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687208">break</span>&nbsp;<span class="ident" id="3687214">Scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3687222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3687226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3687229">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687232">return</span>&nbsp;<span class="ident" id="3687239">star</span><span class="op" id="3687243">,</span>&nbsp;<span class="ident" id="3687245">pattern</span><span class="op" id="3687252">[</span><span class="num" id="3687253">0</span><span class="op" id="3687254">:</span><span class="ident" id="3687255">i</span><span class="op" id="3687256">]</span><span class="op" id="3687257">,</span>&nbsp;<span class="ident" id="3687259">pattern</span><span class="op" id="3687266">[</span><span class="ident" id="3687267">i</span><span class="op" id="3687268">:</span><span class="op" id="3687269">]</span><br>
<span class="lineno"></span><span class="op" id="3687271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3687274">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3687337">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno">115</span><span class="comment" id="3687396">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3687471">func</span>&nbsp;<span class="ident" id="3687476">matchChunk</span><span class="op" id="3687486">(</span><span class="ident" id="3687487">chunk</span><span class="op" id="3687492">,</span>&nbsp;<span class="ident" id="3687494">s</span>&nbsp;<span class="builtintype" id="3687496">string</span><span class="op" id="3687502">)</span>&nbsp;<span class="op" id="3687504">(</span><span class="ident" id="3687505">rest</span>&nbsp;<span class="builtintype" id="3687510">string</span><span class="op" id="3687516">,</span>&nbsp;<span class="ident" id="3687518">ok</span>&nbsp;<span class="builtintype" id="3687521">bool</span><span class="op" id="3687525">,</span>&nbsp;<span class="ident" id="3687527">err</span>&nbsp;<span class="builtintype" id="3687531">error</span><span class="op" id="3687536">)</span>&nbsp;<span class="op" id="3687538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687541">for</span>&nbsp;<span class="builtinfunc" id="3687545">len</span><span class="op" id="3687548">(</span><span class="ident" id="3687549">chunk</span><span class="op" id="3687554">)</span>&nbsp;<span class="op" id="3687556">&gt;</span>&nbsp;<span class="num" id="3687558">0</span>&nbsp;<span class="op" id="3687560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687564">if</span>&nbsp;<span class="builtinfunc" id="3687567">len</span><span class="op" id="3687570">(</span><span class="ident" id="3687571">s</span><span class="op" id="3687572">)</span>&nbsp;<span class="op" id="3687574">==</span>&nbsp;<span class="num" id="3687577">0</span>&nbsp;<span class="op" id="3687579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687584">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3687593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687597">switch</span>&nbsp;<span class="ident" id="3687604">chunk</span><span class="op" id="3687609">[</span><span class="num" id="3687610">0</span><span class="op" id="3687611">]</span>&nbsp;<span class="op" id="3687613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687617">case</span>&nbsp;<span class="string" id="3687622">&#39;[&#39;</span><span class="op" id="3687625">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3687630">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3687652">r</span><span class="op" id="3687653">,</span>&nbsp;<span class="ident" id="3687655">n</span>&nbsp;<span class="op" id="3687657">:=</span>&nbsp;<span class="ident" id="3687660">utf8</span><span class="op" id="3687664">.</span><span class="ident" id="3687665">DecodeRuneInString</span><span class="op" id="3687683">(</span><span class="ident" id="3687684">s</span><span class="op" id="3687685">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3687690">s</span>&nbsp;<span class="op" id="3687692">=</span>&nbsp;<span class="ident" id="3687694">s</span><span class="op" id="3687695">[</span><span class="ident" id="3687696">n</span><span class="op" id="3687697">:</span><span class="op" id="3687698">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3687703">chunk</span>&nbsp;<span class="op" id="3687709">=</span>&nbsp;<span class="ident" id="3687711">chunk</span><span class="op" id="3687716">[</span><span class="num" id="3687717">1</span><span class="op" id="3687718">:</span><span class="op" id="3687719">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3687724">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3687747">notNegated</span>&nbsp;<span class="op" id="3687758">:=</span>&nbsp;<span class="builtintype" id="3687761">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687769">if</span>&nbsp;<span class="builtinfunc" id="3687772">len</span><span class="op" id="3687775">(</span><span class="ident" id="3687776">chunk</span><span class="op" id="3687781">)</span>&nbsp;<span class="op" id="3687783">&gt;</span>&nbsp;<span class="num" id="3687785">0</span>&nbsp;<span class="op" id="3687787">&amp;&amp;</span>&nbsp;<span class="ident" id="3687790">chunk</span><span class="op" id="3687795">[</span><span class="num" id="3687796">0</span><span class="op" id="3687797">]</span>&nbsp;<span class="op" id="3687799">==</span>&nbsp;<span class="string" id="3687802">&#39;^&#39;</span>&nbsp;<span class="op" id="3687806">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3687812">notNegated</span>&nbsp;<span class="op" id="3687823">=</span>&nbsp;<span class="builtintype" id="3687825">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3687835">chunk</span>&nbsp;<span class="op" id="3687841">=</span>&nbsp;<span class="ident" id="3687843">chunk</span><span class="op" id="3687848">[</span><span class="num" id="3687849">1</span><span class="op" id="3687850">:</span><span class="op" id="3687851">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3687856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3687861">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3687884">match</span>&nbsp;<span class="op" id="3687890">:=</span>&nbsp;<span class="builtintype" id="3687893">false</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3687902">nrange</span>&nbsp;<span class="op" id="3687909">:=</span>&nbsp;<span class="num" id="3687912">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687917">for</span>&nbsp;<span class="op" id="3687921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3687927">if</span>&nbsp;<span class="builtinfunc" id="3687930">len</span><span class="op" id="3687933">(</span><span class="ident" id="3687934">chunk</span><span class="op" id="3687939">)</span>&nbsp;<span class="op" id="3687941">&gt;</span>&nbsp;<span class="num" id="3687943">0</span>&nbsp;<span class="op" id="3687945">&amp;&amp;</span>&nbsp;<span class="ident" id="3687948">chunk</span><span class="op" id="3687953">[</span><span class="num" id="3687954">0</span><span class="op" id="3687955">]</span>&nbsp;<span class="op" id="3687957">==</span>&nbsp;<span class="string" id="3687960">&#39;]&#39;</span>&nbsp;<span class="op" id="3687964">&amp;&amp;</span>&nbsp;<span class="ident" id="3687967">nrange</span>&nbsp;<span class="op" id="3687974">&gt;</span>&nbsp;<span class="num" id="3687976">0</span>&nbsp;<span class="op" id="3687978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3687985">chunk</span>&nbsp;<span class="op" id="3687991">=</span>&nbsp;<span class="ident" id="3687993">chunk</span><span class="op" id="3687998">[</span><span class="num" id="3687999">1</span><span class="op" id="3688000">:</span><span class="op" id="3688001">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688008">break</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688024">var</span>&nbsp;<span class="ident" id="3688028">lo</span><span class="op" id="3688030">,</span>&nbsp;<span class="ident" id="3688032">hi</span>&nbsp;<span class="builtintype" id="3688035">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688044">if</span>&nbsp;<span class="ident" id="3688047">lo</span><span class="op" id="3688049">,</span>&nbsp;<span class="ident" id="3688051">chunk</span><span class="op" id="3688056">,</span>&nbsp;<span class="ident" id="3688058">err</span>&nbsp;<span class="op" id="3688062">=</span>&nbsp;<span class="ident" id="3688064">getEsc</span><span class="op" id="3688070">(</span><span class="ident" id="3688071">chunk</span><span class="op" id="3688076">)</span><span class="op" id="3688077">;</span>&nbsp;<span class="ident" id="3688079">err</span>&nbsp;<span class="op" id="3688083">!=</span>&nbsp;<span class="ident" id="3688086">nil</span>&nbsp;<span class="op" id="3688090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688097">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688108">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688114">hi</span>&nbsp;<span class="op" id="3688117">=</span>&nbsp;<span class="ident" id="3688119">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688126">if</span>&nbsp;<span class="ident" id="3688129">chunk</span><span class="op" id="3688134">[</span><span class="num" id="3688135">0</span><span class="op" id="3688136">]</span>&nbsp;<span class="op" id="3688138">==</span>&nbsp;<span class="string" id="3688141">&#39;-&#39;</span>&nbsp;<span class="op" id="3688145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688152">if</span>&nbsp;<span class="ident" id="3688155">hi</span><span class="op" id="3688157">,</span>&nbsp;<span class="ident" id="3688159">chunk</span><span class="op" id="3688164">,</span>&nbsp;<span class="ident" id="3688166">err</span>&nbsp;<span class="op" id="3688170">=</span>&nbsp;<span class="ident" id="3688172">getEsc</span><span class="op" id="3688178">(</span><span class="ident" id="3688179">chunk</span><span class="op" id="3688184">[</span><span class="num" id="3688185">1</span><span class="op" id="3688186">:</span><span class="op" id="3688187">]</span><span class="op" id="3688188">)</span><span class="op" id="3688189">;</span>&nbsp;<span class="ident" id="3688191">err</span>&nbsp;<span class="op" id="3688195">!=</span>&nbsp;<span class="ident" id="3688198">nil</span>&nbsp;<span class="op" id="3688202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688210">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688222">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688234">if</span>&nbsp;<span class="ident" id="3688237">lo</span>&nbsp;<span class="op" id="3688240">&lt;=</span>&nbsp;<span class="ident" id="3688243">r</span>&nbsp;<span class="op" id="3688245">&amp;&amp;</span>&nbsp;<span class="ident" id="3688248">r</span>&nbsp;<span class="op" id="3688250">&lt;=</span>&nbsp;<span class="ident" id="3688253">hi</span>&nbsp;<span class="op" id="3688256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688263">match</span>&nbsp;<span class="op" id="3688269">=</span>&nbsp;<span class="builtintype" id="3688271">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688286">nrange</span><span class="op" id="3688292">++</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688303">if</span>&nbsp;<span class="ident" id="3688306">match</span>&nbsp;<span class="op" id="3688312">!=</span>&nbsp;<span class="ident" id="3688315">notNegated</span>&nbsp;<span class="op" id="3688326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688332">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688347">case</span>&nbsp;<span class="string" id="3688352">&#39;?&#39;</span><span class="op" id="3688355">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688360">if</span>&nbsp;<span class="ident" id="3688363">s</span><span class="op" id="3688364">[</span><span class="num" id="3688365">0</span><span class="op" id="3688366">]</span>&nbsp;<span class="op" id="3688368">==</span>&nbsp;<span class="string" id="3688371">&#39;/&#39;</span>&nbsp;<span class="op" id="3688375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688381">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688396">_</span><span class="op" id="3688397">,</span>&nbsp;<span class="ident" id="3688399">n</span>&nbsp;<span class="op" id="3688401">:=</span>&nbsp;<span class="ident" id="3688404">utf8</span><span class="op" id="3688408">.</span><span class="ident" id="3688409">DecodeRuneInString</span><span class="op" id="3688427">(</span><span class="ident" id="3688428">s</span><span class="op" id="3688429">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688434">s</span>&nbsp;<span class="op" id="3688436">=</span>&nbsp;<span class="ident" id="3688438">s</span><span class="op" id="3688439">[</span><span class="ident" id="3688440">n</span><span class="op" id="3688441">:</span><span class="op" id="3688442">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688447">chunk</span>&nbsp;<span class="op" id="3688453">=</span>&nbsp;<span class="ident" id="3688455">chunk</span><span class="op" id="3688460">[</span><span class="num" id="3688461">1</span><span class="op" id="3688462">:</span><span class="op" id="3688463">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688468">case</span>&nbsp;<span class="string" id="3688473">&#39;\\&#39;</span><span class="op" id="3688477">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688482">chunk</span>&nbsp;<span class="op" id="3688488">=</span>&nbsp;<span class="ident" id="3688490">chunk</span><span class="op" id="3688495">[</span><span class="num" id="3688496">1</span><span class="op" id="3688497">:</span><span class="op" id="3688498">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688503">if</span>&nbsp;<span class="builtinfunc" id="3688506">len</span><span class="op" id="3688509">(</span><span class="ident" id="3688510">chunk</span><span class="op" id="3688515">)</span>&nbsp;<span class="op" id="3688517">==</span>&nbsp;<span class="num" id="3688520">0</span>&nbsp;<span class="op" id="3688522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688528">err</span>&nbsp;<span class="op" id="3688532">=</span>&nbsp;<span class="ident" id="3688534">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688552">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688567">fallthrough</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688582">default</span><span class="op" id="3688589">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688594">if</span>&nbsp;<span class="ident" id="3688597">chunk</span><span class="op" id="3688602">[</span><span class="num" id="3688603">0</span><span class="op" id="3688604">]</span>&nbsp;<span class="op" id="3688606">!=</span>&nbsp;<span class="ident" id="3688609">s</span><span class="op" id="3688610">[</span><span class="num" id="3688611">0</span><span class="op" id="3688612">]</span>&nbsp;<span class="op" id="3688614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688620">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688630">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688635">s</span>&nbsp;<span class="op" id="3688637">=</span>&nbsp;<span class="ident" id="3688639">s</span><span class="op" id="3688640">[</span><span class="num" id="3688641">1</span><span class="op" id="3688642">:</span><span class="op" id="3688643">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688648">chunk</span>&nbsp;<span class="op" id="3688654">=</span>&nbsp;<span class="ident" id="3688656">chunk</span><span class="op" id="3688661">[</span><span class="num" id="3688662">1</span><span class="op" id="3688663">:</span><span class="op" id="3688664">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688674">return</span>&nbsp;<span class="ident" id="3688681">s</span><span class="op" id="3688682">,</span>&nbsp;<span class="builtintype" id="3688684">true</span><span class="op" id="3688688">,</span>&nbsp;<span class="ident" id="3688690">nil</span><br>
<span class="lineno">185</span><span class="op" id="3688694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3688697">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3688776">func</span>&nbsp;<span class="ident" id="3688781">getEsc</span><span class="op" id="3688787">(</span><span class="ident" id="3688788">chunk</span>&nbsp;<span class="builtintype" id="3688794">string</span><span class="op" id="3688800">)</span>&nbsp;<span class="op" id="3688802">(</span><span class="ident" id="3688803">r</span>&nbsp;<span class="builtintype" id="3688805">rune</span><span class="op" id="3688809">,</span>&nbsp;<span class="ident" id="3688811">nchunk</span>&nbsp;<span class="builtintype" id="3688818">string</span><span class="op" id="3688824">,</span>&nbsp;<span class="ident" id="3688826">err</span>&nbsp;<span class="builtintype" id="3688830">error</span><span class="op" id="3688835">)</span>&nbsp;<span class="op" id="3688837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688840">if</span>&nbsp;<span class="builtinfunc" id="3688843">len</span><span class="op" id="3688846">(</span><span class="ident" id="3688847">chunk</span><span class="op" id="3688852">)</span>&nbsp;<span class="op" id="3688854">==</span>&nbsp;<span class="num" id="3688857">0</span>&nbsp;<span class="op" id="3688859">||</span>&nbsp;<span class="ident" id="3688862">chunk</span><span class="op" id="3688867">[</span><span class="num" id="3688868">0</span><span class="op" id="3688869">]</span>&nbsp;<span class="op" id="3688871">==</span>&nbsp;<span class="string" id="3688874">&#39;-&#39;</span>&nbsp;<span class="op" id="3688878">||</span>&nbsp;<span class="ident" id="3688881">chunk</span><span class="op" id="3688886">[</span><span class="num" id="3688887">0</span><span class="op" id="3688888">]</span>&nbsp;<span class="op" id="3688890">==</span>&nbsp;<span class="string" id="3688893">&#39;]&#39;</span>&nbsp;<span class="op" id="3688897">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688901">err</span>&nbsp;<span class="op" id="3688905">=</span>&nbsp;<span class="ident" id="3688907">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688923">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3688931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688934">if</span>&nbsp;<span class="ident" id="3688937">chunk</span><span class="op" id="3688942">[</span><span class="num" id="3688943">0</span><span class="op" id="3688944">]</span>&nbsp;<span class="op" id="3688946">==</span>&nbsp;<span class="string" id="3688949">&#39;\\&#39;</span>&nbsp;<span class="op" id="3688954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3688958">chunk</span>&nbsp;<span class="op" id="3688964">=</span>&nbsp;<span class="ident" id="3688966">chunk</span><span class="op" id="3688971">[</span><span class="num" id="3688972">1</span><span class="op" id="3688973">:</span><span class="op" id="3688974">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3688978">if</span>&nbsp;<span class="builtinfunc" id="3688981">len</span><span class="op" id="3688984">(</span><span class="ident" id="3688985">chunk</span><span class="op" id="3688990">)</span>&nbsp;<span class="op" id="3688992">==</span>&nbsp;<span class="num" id="3688995">0</span>&nbsp;<span class="op" id="3688997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3689002">err</span>&nbsp;<span class="op" id="3689006">=</span>&nbsp;<span class="ident" id="3689008">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689025">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3689034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3689037">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3689040">r</span><span class="op" id="3689041">,</span>&nbsp;<span class="ident" id="3689043">n</span>&nbsp;<span class="op" id="3689045">:=</span>&nbsp;<span class="ident" id="3689048">utf8</span><span class="op" id="3689052">.</span><span class="ident" id="3689053">DecodeRuneInString</span><span class="op" id="3689071">(</span><span class="ident" id="3689072">chunk</span><span class="op" id="3689077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689080">if</span>&nbsp;<span class="ident" id="3689083">r</span>&nbsp;<span class="op" id="3689085">==</span>&nbsp;<span class="ident" id="3689088">utf8</span><span class="op" id="3689092">.</span><span class="ident" id="3689093">RuneError</span>&nbsp;<span class="op" id="3689103">&amp;&amp;</span>&nbsp;<span class="ident" id="3689106">n</span>&nbsp;<span class="op" id="3689108">==</span>&nbsp;<span class="num" id="3689111">1</span>&nbsp;<span class="op" id="3689113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3689117">err</span>&nbsp;<span class="op" id="3689121">=</span>&nbsp;<span class="ident" id="3689123">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3689138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3689141">nchunk</span>&nbsp;<span class="op" id="3689148">=</span>&nbsp;<span class="ident" id="3689150">chunk</span><span class="op" id="3689155">[</span><span class="ident" id="3689156">n</span><span class="op" id="3689157">:</span><span class="op" id="3689158">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689161">if</span>&nbsp;<span class="builtinfunc" id="3689164">len</span><span class="op" id="3689167">(</span><span class="ident" id="3689168">nchunk</span><span class="op" id="3689174">)</span>&nbsp;<span class="op" id="3689176">==</span>&nbsp;<span class="num" id="3689179">0</span>&nbsp;<span class="op" id="3689181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3689185">err</span>&nbsp;<span class="op" id="3689189">=</span>&nbsp;<span class="ident" id="3689191">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3689206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3689209">return</span><br>
<span class="lineno"></span><span class="op" id="3689216">}</span>
</div>
</body>
</html>
