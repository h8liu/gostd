<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html" class="current">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1613084">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1613139">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1613193">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1613244">package</span>&nbsp;<span class="ident" id="1613252">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1613261">import</span>&nbsp;<span class="string" id="1613268">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1613278">//&nbsp;Note:&nbsp;the&nbsp;MemStats&nbsp;struct&nbsp;should&nbsp;be&nbsp;kept&nbsp;in&nbsp;sync&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="1613335">//&nbsp;struct&nbsp;MStats&nbsp;in&nbsp;malloc.h</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1613365">//&nbsp;A&nbsp;MemStats&nbsp;records&nbsp;statistics&nbsp;about&nbsp;the&nbsp;memory&nbsp;allocator.</span><br>
<span class="lineno"></span><span class="keyword" id="1613426">type</span>&nbsp;<span class="ident" id="1613431">MemStats</span>&nbsp;<span class="keyword" id="1613440">struct</span>&nbsp;<span class="op" id="1613447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1613450">//&nbsp;General&nbsp;statistics.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1613474">Alloc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1613485">uint64</span>&nbsp;<span class="comment" id="1613492">//&nbsp;bytes&nbsp;allocated&nbsp;and&nbsp;still&nbsp;in&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1613529">TotalAlloc</span>&nbsp;<span class="builtintype" id="1613540">uint64</span>&nbsp;<span class="comment" id="1613547">//&nbsp;bytes&nbsp;allocated&nbsp;(even&nbsp;if&nbsp;freed)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1613583">Sys</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1613594">uint64</span>&nbsp;<span class="comment" id="1613601">//&nbsp;bytes&nbsp;obtained&nbsp;from&nbsp;system&nbsp;(sum&nbsp;of&nbsp;XxxSys&nbsp;below)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1613654">Lookups</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1613665">uint64</span>&nbsp;<span class="comment" id="1613672">//&nbsp;number&nbsp;of&nbsp;pointer&nbsp;lookups</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1613702">Mallocs</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1613713">uint64</span>&nbsp;<span class="comment" id="1613720">//&nbsp;number&nbsp;of&nbsp;mallocs</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1613742">Frees</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1613753">uint64</span>&nbsp;<span class="comment" id="1613760">//&nbsp;number&nbsp;of&nbsp;frees</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1613781">//&nbsp;Main&nbsp;allocation&nbsp;heap&nbsp;statistics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1613818">HeapAlloc</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1613831">uint64</span>&nbsp;<span class="comment" id="1613838">//&nbsp;bytes&nbsp;allocated&nbsp;and&nbsp;still&nbsp;in&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1613875">HeapSys</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1613888">uint64</span>&nbsp;<span class="comment" id="1613895">//&nbsp;bytes&nbsp;obtained&nbsp;from&nbsp;system</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1613926">HeapIdle</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1613939">uint64</span>&nbsp;<span class="comment" id="1613946">//&nbsp;bytes&nbsp;in&nbsp;idle&nbsp;spans</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1613970">HeapInuse</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1613983">uint64</span>&nbsp;<span class="comment" id="1613990">//&nbsp;bytes&nbsp;in&nbsp;non-idle&nbsp;span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614017">HeapReleased</span>&nbsp;<span class="builtintype" id="1614030">uint64</span>&nbsp;<span class="comment" id="1614037">//&nbsp;bytes&nbsp;released&nbsp;to&nbsp;the&nbsp;OS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614066">HeapObjects</span>&nbsp;&nbsp;<span class="builtintype" id="1614079">uint64</span>&nbsp;<span class="comment" id="1614086">//&nbsp;total&nbsp;number&nbsp;of&nbsp;allocated&nbsp;objects</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1614125">//&nbsp;Low-level&nbsp;fixed-size&nbsp;structure&nbsp;allocator&nbsp;statistics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1614182">//&nbsp;&nbsp;&nbsp;&nbsp;Inuse&nbsp;is&nbsp;bytes&nbsp;used&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1614211">//&nbsp;&nbsp;&nbsp;&nbsp;Sys&nbsp;is&nbsp;bytes&nbsp;obtained&nbsp;from&nbsp;system.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614250">StackInuse</span>&nbsp;&nbsp;<span class="builtintype" id="1614262">uint64</span>&nbsp;<span class="comment" id="1614269">//&nbsp;bytes&nbsp;used&nbsp;by&nbsp;stack&nbsp;allocator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614303">StackSys</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1614315">uint64</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614323">MSpanInuse</span>&nbsp;&nbsp;<span class="builtintype" id="1614335">uint64</span>&nbsp;<span class="comment" id="1614342">//&nbsp;mspan&nbsp;structures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614363">MSpanSys</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1614375">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614383">MCacheInuse</span>&nbsp;<span class="builtintype" id="1614395">uint64</span>&nbsp;<span class="comment" id="1614402">//&nbsp;mcache&nbsp;structures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614424">MCacheSys</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1614436">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614444">BuckHashSys</span>&nbsp;<span class="builtintype" id="1614456">uint64</span>&nbsp;<span class="comment" id="1614463">//&nbsp;profiling&nbsp;bucket&nbsp;hash&nbsp;table</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614495">GCSys</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1614507">uint64</span>&nbsp;<span class="comment" id="1614514">//&nbsp;GC&nbsp;metadata</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614530">OtherSys</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1614542">uint64</span>&nbsp;<span class="comment" id="1614549">//&nbsp;other&nbsp;system&nbsp;allocations</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1614579">//&nbsp;Garbage&nbsp;collector&nbsp;statistics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614613">NextGC</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1614626">uint64</span>&nbsp;<span class="comment" id="1614633">//&nbsp;next&nbsp;collection&nbsp;will&nbsp;happen&nbsp;when&nbsp;HeapAlloc&nbsp;â‰¥&nbsp;this&nbsp;amount</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614696">LastGC</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1614709">uint64</span>&nbsp;<span class="comment" id="1614716">//&nbsp;end&nbsp;time&nbsp;of&nbsp;last&nbsp;collection&nbsp;(nanoseconds&nbsp;since&nbsp;1970)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614773">PauseTotalNs</span>&nbsp;<span class="builtintype" id="1614786">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614794">PauseNs</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1614807">[</span><span class="num" id="1614808">256</span><span class="op" id="1614811">]</span><span class="builtintype" id="1614812">uint64</span>&nbsp;<span class="comment" id="1614819">//&nbsp;circular&nbsp;buffer&nbsp;of&nbsp;recent&nbsp;GC&nbsp;pause&nbsp;durations,&nbsp;most&nbsp;recent&nbsp;at&nbsp;[(NumGC+255)%256]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614902">PauseEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1614915">[</span><span class="num" id="1614916">256</span><span class="op" id="1614919">]</span><span class="builtintype" id="1614920">uint64</span>&nbsp;<span class="comment" id="1614927">//&nbsp;circular&nbsp;buffer&nbsp;of&nbsp;recent&nbsp;GC&nbsp;pause&nbsp;end&nbsp;times</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614976">NumGC</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1614989">uint32</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1614997">EnableGC</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1615010">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615016">DebugGC</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1615029">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1615036">//&nbsp;Per-size&nbsp;allocation&nbsp;statistics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1615072">//&nbsp;61&nbsp;is&nbsp;NumSizeClasses&nbsp;in&nbsp;the&nbsp;C&nbsp;code.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615112">BySize</span>&nbsp;<span class="op" id="1615119">[</span><span class="num" id="1615120">61</span><span class="op" id="1615122">]</span><span class="keyword" id="1615123">struct</span>&nbsp;<span class="op" id="1615130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615134">Size</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1615142">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615151">Mallocs</span>&nbsp;<span class="builtintype" id="1615159">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615168">Frees</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1615176">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1615184">}</span><br>
<span class="lineno">60</span><span class="op" id="1615186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1615189">var</span>&nbsp;<span class="ident" id="1615193">sizeof_C_MStats</span>&nbsp;<span class="builtintype" id="1615209">uintptr</span>&nbsp;<span class="comment" id="1615217">//&nbsp;filled&nbsp;in&nbsp;by&nbsp;malloc.goc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1615245">func</span>&nbsp;<span class="ident" id="1615250">init</span><span class="op" id="1615254">(</span><span class="op" id="1615255">)</span>&nbsp;<span class="op" id="1615257">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1615260">var</span>&nbsp;<span class="ident" id="1615264">memStats</span>&nbsp;<span class="ident" id="1615273"><a href="/gostd/runtime/mem.go.html#1613431">MemStats</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1615283">if</span>&nbsp;<span class="ident" id="1615286"><a href="/gostd/runtime/mem.go.html#1615193">sizeof_C_MStats</a></span>&nbsp;<span class="op" id="1615302">!=</span>&nbsp;<span class="ident" id="1615305"><a href="/gostd/runtime/mem.go.html#1613268">unsafe</a></span><span class="op" id="1615311">.</span><span class="ident" id="1615312">Sizeof</span><span class="op" id="1615318">(</span><span class="ident" id="1615319"><a href="/gostd/runtime/mem.go.html#1615264">memStats</a></span><span class="op" id="1615327">)</span>&nbsp;<span class="op" id="1615329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1615333">println</span><span class="op" id="1615340">(</span><span class="ident" id="1615341"><a href="/gostd/runtime/mem.go.html#1615193">sizeof_C_MStats</a></span><span class="op" id="1615356">,</span>&nbsp;<span class="ident" id="1615358"><a href="/gostd/runtime/mem.go.html#1613268">unsafe</a></span><span class="op" id="1615364">.</span><span class="ident" id="1615365">Sizeof</span><span class="op" id="1615371">(</span><span class="ident" id="1615372"><a href="/gostd/runtime/mem.go.html#1615264">memStats</a></span><span class="op" id="1615380">)</span><span class="op" id="1615381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615385"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1615392">(</span><span class="string" id="1615393">&#34;MStats&nbsp;vs&nbsp;MemStatsType&nbsp;size&nbsp;mismatch&#34;</span><span class="op" id="1615431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1615434">}</span><br>
<span class="lineno">70</span><span class="op" id="1615436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1615439">//&nbsp;ReadMemStats&nbsp;populates&nbsp;m&nbsp;with&nbsp;memory&nbsp;allocator&nbsp;statistics.</span><br>
<span class="lineno"></span><span class="keyword" id="1615501">func</span>&nbsp;<span class="ident" id="1615506">ReadMemStats</span><span class="op" id="1615518">(</span><span class="ident" id="1615519">m</span>&nbsp;<span class="op" id="1615521">*</span><span class="ident" id="1615522"><a href="/gostd/runtime/mem.go.html#1613431">MemStats</a></span><span class="op" id="1615530">)</span>&nbsp;<span class="op" id="1615532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1615535">//&nbsp;Have&nbsp;to&nbsp;acquire&nbsp;worldsema&nbsp;to&nbsp;stop&nbsp;the&nbsp;world,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1615584">//&nbsp;because&nbsp;stoptheworld&nbsp;can&nbsp;only&nbsp;be&nbsp;used&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1615629">//&nbsp;one&nbsp;goroutine&nbsp;at&nbsp;a&nbsp;time,&nbsp;and&nbsp;there&nbsp;might&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1615677">//&nbsp;a&nbsp;pending&nbsp;garbage&nbsp;collection&nbsp;already&nbsp;calling&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615730"><a href="/gostd/runtime/sema.go.html#1702898">semacquire</a></span><span class="op" id="1615740">(</span><span class="op" id="1615741">&amp;</span><span class="ident" id="1615742"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791594">worldsema</a></span><span class="op" id="1615751">,</span>&nbsp;<span class="builtintype" id="1615753">false</span><span class="op" id="1615758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615761">gp</span>&nbsp;<span class="op" id="1615764">:=</span>&nbsp;<span class="ident" id="1615767"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1615771">(</span><span class="op" id="1615772">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615775"><a href="/gostd/runtime/mem.go.html#1615761">gp</a></span><span class="op" id="1615777">.</span><span class="ident" id="1615778"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1615779">.</span><span class="ident" id="1615780"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787994">gcing</a></span>&nbsp;<span class="op" id="1615786">=</span>&nbsp;<span class="num" id="1615788">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615791"><a href="/gostd/runtime/stubs.go.html#1741035">onM</a></span><span class="op" id="1615794">(</span><span class="ident" id="1615795"><a href="/gostd/runtime/stubs.go.html#1742794">stoptheworld</a></span><span class="op" id="1615807">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615811"><a href="/gostd/runtime/mem.go.html#1615761">gp</a></span><span class="op" id="1615813">.</span><span class="ident" id="1615814"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1615815">.</span><span class="ident" id="1615816"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788547">ptrarg</a></span><span class="op" id="1615822">[</span><span class="num" id="1615823">0</span><span class="op" id="1615824">]</span>&nbsp;<span class="op" id="1615826">=</span>&nbsp;<span class="ident" id="1615828"><a href="/gostd/runtime/stubs.go.html#1743320">noescape</a></span><span class="op" id="1615836">(</span><span class="ident" id="1615837"><a href="/gostd/runtime/mem.go.html#1613268">unsafe</a></span><span class="op" id="1615843">.</span><span class="ident" id="1615844">Pointer</span><span class="op" id="1615851">(</span><span class="ident" id="1615852"><a href="/gostd/runtime/mem.go.html#1615519">m</a></span><span class="op" id="1615853">)</span><span class="op" id="1615854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615857"><a href="/gostd/runtime/stubs.go.html#1741035">onM</a></span><span class="op" id="1615860">(</span><span class="ident" id="1615861"><a href="/gostd/runtime/stubs.go.html#1742466">readmemstats_m</a></span><span class="op" id="1615875">)</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615879"><a href="/gostd/runtime/mem.go.html#1615761">gp</a></span><span class="op" id="1615881">.</span><span class="ident" id="1615882"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1615883">.</span><span class="ident" id="1615884"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787994">gcing</a></span>&nbsp;<span class="op" id="1615890">=</span>&nbsp;<span class="num" id="1615892">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615895"><a href="/gostd/runtime/mem.go.html#1615761">gp</a></span><span class="op" id="1615897">.</span><span class="ident" id="1615898"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1615899">.</span><span class="ident" id="1615900"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788007">locks</a></span><span class="op" id="1615905">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615909"><a href="/gostd/runtime/sema.go.html#1703982">semrelease</a></span><span class="op" id="1615919">(</span><span class="op" id="1615920">&amp;</span><span class="ident" id="1615921"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791594">worldsema</a></span><span class="op" id="1615930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615933"><a href="/gostd/runtime/stubs.go.html#1741035">onM</a></span><span class="op" id="1615936">(</span><span class="ident" id="1615937"><a href="/gostd/runtime/stubs.go.html#1742773">starttheworld</a></span><span class="op" id="1615950">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615953"><a href="/gostd/runtime/mem.go.html#1615761">gp</a></span><span class="op" id="1615955">.</span><span class="ident" id="1615956"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1615957">.</span><span class="ident" id="1615958"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788007">locks</a></span><span class="op" id="1615963">--</span><br>
<span class="lineno"></span><span class="op" id="1615966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1615969">//&nbsp;Implementation&nbsp;of&nbsp;runtime/debug.WriteHeapDump</span><br>
<span class="lineno"></span><span class="keyword" id="1616018">func</span>&nbsp;<span class="ident" id="1616023">writeHeapDump</span><span class="op" id="1616036">(</span><span class="ident" id="1616037">fd</span>&nbsp;<span class="builtintype" id="1616040">uintptr</span><span class="op" id="1616047">)</span>&nbsp;<span class="op" id="1616049">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1616052"><a href="/gostd/runtime/sema.go.html#1702898">semacquire</a></span><span class="op" id="1616062">(</span><span class="op" id="1616063">&amp;</span><span class="ident" id="1616064"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791594">worldsema</a></span><span class="op" id="1616073">,</span>&nbsp;<span class="builtintype" id="1616075">false</span><span class="op" id="1616080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1616083">gp</span>&nbsp;<span class="op" id="1616086">:=</span>&nbsp;<span class="ident" id="1616089"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1616093">(</span><span class="op" id="1616094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1616097"><a href="/gostd/runtime/mem.go.html#1616083">gp</a></span><span class="op" id="1616099">.</span><span class="ident" id="1616100"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1616101">.</span><span class="ident" id="1616102"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787994">gcing</a></span>&nbsp;<span class="op" id="1616108">=</span>&nbsp;<span class="num" id="1616110">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1616113"><a href="/gostd/runtime/stubs.go.html#1741035">onM</a></span><span class="op" id="1616116">(</span><span class="ident" id="1616117"><a href="/gostd/runtime/stubs.go.html#1742794">stoptheworld</a></span><span class="op" id="1616129">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1616133"><a href="/gostd/runtime/mem.go.html#1616083">gp</a></span><span class="op" id="1616135">.</span><span class="ident" id="1616136"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1616137">.</span><span class="ident" id="1616138"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788525">scalararg</a></span><span class="op" id="1616147">[</span><span class="num" id="1616148">0</span><span class="op" id="1616149">]</span>&nbsp;<span class="op" id="1616151">=</span>&nbsp;<span class="ident" id="1616153"><a href="/gostd/runtime/mem.go.html#1616037">fd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1616157"><a href="/gostd/runtime/stubs.go.html#1741035">onM</a></span><span class="op" id="1616160">(</span><span class="ident" id="1616161"><a href="/gostd/runtime/stubs.go.html#1742488">writeheapdump_m</a></span><span class="op" id="1616176">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1616180"><a href="/gostd/runtime/mem.go.html#1616083">gp</a></span><span class="op" id="1616182">.</span><span class="ident" id="1616183"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1616184">.</span><span class="ident" id="1616185"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787994">gcing</a></span>&nbsp;<span class="op" id="1616191">=</span>&nbsp;<span class="num" id="1616193">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1616196"><a href="/gostd/runtime/mem.go.html#1616083">gp</a></span><span class="op" id="1616198">.</span><span class="ident" id="1616199"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1616200">.</span><span class="ident" id="1616201"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788007">locks</a></span><span class="op" id="1616206">++</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1616210"><a href="/gostd/runtime/sema.go.html#1703982">semrelease</a></span><span class="op" id="1616220">(</span><span class="op" id="1616221">&amp;</span><span class="ident" id="1616222"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791594">worldsema</a></span><span class="op" id="1616231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1616234"><a href="/gostd/runtime/stubs.go.html#1741035">onM</a></span><span class="op" id="1616237">(</span><span class="ident" id="1616238"><a href="/gostd/runtime/stubs.go.html#1742773">starttheworld</a></span><span class="op" id="1616251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1616254"><a href="/gostd/runtime/mem.go.html#1616083">gp</a></span><span class="op" id="1616256">.</span><span class="ident" id="1616257"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1616258">.</span><span class="ident" id="1616259"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788007">locks</a></span><span class="op" id="1616264">--</span><br>
<span class="lineno"></span><span class="op" id="1616267">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
