<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="7527059">package</span>&nbsp;<span class="ident" id="7527067">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7527074">import</span>&nbsp;<span class="op" id="7527081">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7527084">&#34;testing&#34;</span><br>
<span class="lineno">5</span><span class="op" id="7527094">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7527097">func</span>&nbsp;<span class="ident" id="7527102">TestVirtMemory</span><span class="op" id="7527116">(</span><span class="ident" id="7527117">t</span>&nbsp;<span class="op" id="7527119">*</span><span class="ident" id="7527120"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527084">testing</a></span><span class="op" id="7527127">.</span><span class="ident" id="7527128">T</span><span class="op" id="7527129">)</span>&nbsp;<span class="op" id="7527131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527134">as</span>&nbsp;<span class="op" id="7527137">:=</span>&nbsp;<span class="keyword" id="7527140">func</span><span class="op" id="7527144">(</span><span class="ident" id="7527145">cond</span>&nbsp;<span class="builtintype" id="7527150">bool</span><span class="op" id="7527154">,</span>&nbsp;<span class="ident" id="7527156">s</span>&nbsp;<span class="builtintype" id="7527158">string</span><span class="op" id="7527164">,</span>&nbsp;<span class="ident" id="7527166">args</span>&nbsp;<span class="op" id="7527171">...</span><span class="keyword" id="7527174">interface</span><span class="op" id="7527183">{</span><span class="op" id="7527184">}</span><span class="op" id="7527185">)</span>&nbsp;<span class="op" id="7527187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7527191">if</span>&nbsp;<span class="op" id="7527194">!</span><span class="ident" id="7527195"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527145">cond</a></span>&nbsp;<span class="op" id="7527200">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527205"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527117">t</a></span><span class="op" id="7527206">.</span><span class="ident" id="7527207">Fatalf</span><span class="op" id="7527213">(</span><span class="ident" id="7527214"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527156">s</a></span><span class="op" id="7527215">,</span>&nbsp;<span class="ident" id="7527217"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527166">args</a></span><span class="op" id="7527221">...</span><span class="op" id="7527224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527235">eo</span>&nbsp;<span class="op" id="7527238">:=</span>&nbsp;<span class="keyword" id="7527241">func</span><span class="op" id="7527245">(</span><span class="ident" id="7527246">cond</span>&nbsp;<span class="builtintype" id="7527251">bool</span><span class="op" id="7527255">,</span>&nbsp;<span class="ident" id="7527257">s</span>&nbsp;<span class="builtintype" id="7527259">string</span><span class="op" id="7527265">,</span>&nbsp;<span class="ident" id="7527267">args</span>&nbsp;<span class="op" id="7527272">...</span><span class="keyword" id="7527275">interface</span><span class="op" id="7527284">{</span><span class="op" id="7527285">}</span><span class="op" id="7527286">)</span>&nbsp;<span class="op" id="7527288">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7527292">if</span>&nbsp;<span class="ident" id="7527295"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527246">cond</a></span>&nbsp;<span class="op" id="7527300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527305"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527117">t</a></span><span class="op" id="7527306">.</span><span class="ident" id="7527307">Fatalf</span><span class="op" id="7527313">(</span><span class="ident" id="7527314"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527257">s</a></span><span class="op" id="7527315">,</span>&nbsp;<span class="ident" id="7527317"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527267">args</a></span><span class="op" id="7527321">...</span><span class="op" id="7527324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527335">m</span>&nbsp;<span class="op" id="7527337">:=</span>&nbsp;<span class="ident" id="7527340"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309431">newPhyMemory</a></span><span class="op" id="7527352">(</span><span class="num" id="7527353">8</span>&nbsp;<span class="op" id="7527355">*</span>&nbsp;<span class="ident" id="7527357"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><span class="op" id="7527365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527368">p1</span>&nbsp;<span class="op" id="7527371">:=</span>&nbsp;<span class="ident" id="7527374"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527335">m</a></span><span class="op" id="7527375">.</span><span class="ident" id="7527376">Page</span><span class="op" id="7527380">(</span><span class="num" id="7527381">1</span><span class="op" id="7527382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527385">p2</span>&nbsp;<span class="op" id="7527388">:=</span>&nbsp;<span class="ident" id="7527391"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527335">m</a></span><span class="op" id="7527392">.</span><span class="ident" id="7527393">Page</span><span class="op" id="7527397">(</span><span class="num" id="7527398">2</span><span class="op" id="7527399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527402">p3</span>&nbsp;<span class="op" id="7527405">:=</span>&nbsp;<span class="ident" id="7527408"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527335">m</a></span><span class="op" id="7527409">.</span><span class="ident" id="7527410">Page</span><span class="op" id="7527414">(</span><span class="num" id="7527415">3</span><span class="op" id="7527416">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527420">pte1</span>&nbsp;<span class="op" id="7527425">:=</span>&nbsp;<span class="ident" id="7527428"><a href="/lonnie.io/e8vm/arch8/page_table.go.html#5306743">ptEntry</a></span><span class="op" id="7527435">(</span><span class="num" id="7527436">2</span>&nbsp;<span class="op" id="7527438">*</span>&nbsp;<span class="ident" id="7527440"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><span class="op" id="7527448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527451"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527420">pte1</a></span><span class="op" id="7527455">.</span><span class="ident" id="7527456">setBit</span><span class="op" id="7527462">(</span><span class="ident" id="7527463"><a href="/lonnie.io/e8vm/arch8/page_table.go.html#5306768">pteValid</a></span><span class="op" id="7527471">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527475"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527368">p1</a></span><span class="op" id="7527477">.</span><span class="ident" id="7527478">WriteWord</span><span class="op" id="7527487">(</span><span class="num" id="7527488">0</span><span class="op" id="7527489">,</span>&nbsp;<span class="builtintype" id="7527491">uint32</span><span class="op" id="7527497">(</span><span class="ident" id="7527498"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527420">pte1</a></span><span class="op" id="7527502">)</span><span class="op" id="7527503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527506"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527420">pte1</a></span>&nbsp;<span class="op" id="7527511">+=</span>&nbsp;<span class="ident" id="7527514"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527524"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527368">p1</a></span><span class="op" id="7527526">.</span><span class="ident" id="7527527">WriteWord</span><span class="op" id="7527536">(</span><span class="num" id="7527537">4</span><span class="op" id="7527538">*</span><span class="num" id="7527539">10</span><span class="op" id="7527541">,</span>&nbsp;<span class="builtintype" id="7527543">uint32</span><span class="op" id="7527549">(</span><span class="ident" id="7527550"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527420">pte1</a></span><span class="op" id="7527554">)</span><span class="op" id="7527555">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7527559">for</span>&nbsp;<span class="ident" id="7527563">i</span>&nbsp;<span class="op" id="7527565">:=</span>&nbsp;<span class="builtintype" id="7527568">uint32</span><span class="op" id="7527574">(</span><span class="num" id="7527575">0</span><span class="op" id="7527576">)</span><span class="op" id="7527577">;</span>&nbsp;<span class="ident" id="7527579"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527563">i</a></span>&nbsp;<span class="op" id="7527581">&lt;</span>&nbsp;<span class="num" id="7527583">4</span><span class="op" id="7527584">;</span>&nbsp;<span class="ident" id="7527586"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527563">i</a></span><span class="op" id="7527587">++</span>&nbsp;<span class="op" id="7527590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527594">pte</span>&nbsp;<span class="op" id="7527598">:=</span>&nbsp;<span class="ident" id="7527601"><a href="/lonnie.io/e8vm/arch8/page_table.go.html#5306743">ptEntry</a></span><span class="op" id="7527608">(</span><span class="op" id="7527609">(</span><span class="ident" id="7527610"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527563">i</a></span>&nbsp;<span class="op" id="7527612">+</span>&nbsp;<span class="num" id="7527614">4</span><span class="op" id="7527615">)</span>&nbsp;<span class="op" id="7527617">*</span>&nbsp;<span class="ident" id="7527619"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><span class="op" id="7527627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527631"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527594">pte</a></span><span class="op" id="7527634">.</span><span class="ident" id="7527635">setBit</span><span class="op" id="7527641">(</span><span class="ident" id="7527642"><a href="/lonnie.io/e8vm/arch8/page_table.go.html#5306768">pteValid</a></span><span class="op" id="7527650">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527654"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527385">p2</a></span><span class="op" id="7527656">.</span><span class="ident" id="7527657">WriteWord</span><span class="op" id="7527666">(</span><span class="num" id="7527667">4</span><span class="op" id="7527668">*</span><span class="ident" id="7527669"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527563">i</a></span><span class="op" id="7527670">,</span>&nbsp;<span class="builtintype" id="7527672">uint32</span><span class="op" id="7527678">(</span><span class="ident" id="7527679"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527594">pte</a></span><span class="op" id="7527682">)</span><span class="op" id="7527683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527687"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527402">p3</a></span><span class="op" id="7527689">.</span><span class="ident" id="7527690">WriteWord</span><span class="op" id="7527699">(</span><span class="num" id="7527700">4</span><span class="op" id="7527701">*</span><span class="op" id="7527702">(</span><span class="num" id="7527703">3</span><span class="op" id="7527704">-</span><span class="ident" id="7527705"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527563">i</a></span><span class="op" id="7527706">)</span><span class="op" id="7527707">,</span>&nbsp;<span class="builtintype" id="7527709">uint32</span><span class="op" id="7527715">(</span><span class="ident" id="7527716"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527594">pte</a></span><span class="op" id="7527719">)</span><span class="op" id="7527720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7527723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527727">vm</span>&nbsp;<span class="op" id="7527730">:=</span>&nbsp;<span class="ident" id="7527733"><a href="/lonnie.io/e8vm/arch8/virt_memory.go.html#5317310">newVirtMemory</a></span><span class="op" id="7527746">(</span><span class="ident" id="7527747"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527335">m</a></span><span class="op" id="7527748">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527751"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527727">vm</a></span><span class="op" id="7527753">.</span><span class="ident" id="7527754">SetTable</span><span class="op" id="7527762">(</span><span class="ident" id="7527763"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><span class="op" id="7527771">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7527775">//&nbsp;page&nbsp;0,&nbsp;1,&nbsp;2,&nbsp;3&nbsp;is&nbsp;mapped&nbsp;to&nbsp;4,&nbsp;5,&nbsp;6,&nbsp;7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7527819">//&nbsp;page&nbsp;B+0,&nbsp;B+1,&nbsp;B+2,&nbsp;B+3&nbsp;is&nbsp;mapped&nbsp;to&nbsp;7,&nbsp;6,&nbsp;5,&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7527871">//&nbsp;where&nbsp;B&nbsp;=&nbsp;10&nbsp;*&nbsp;1024</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527895">w</span>&nbsp;<span class="op" id="7527897">:=</span>&nbsp;<span class="builtintype" id="7527900">uint32</span><span class="op" id="7527906">(</span><span class="num" id="7527907">0x37215a40</span><span class="op" id="7527917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527920">off</span>&nbsp;<span class="op" id="7527924">:=</span>&nbsp;<span class="builtintype" id="7527927">uint32</span><span class="op" id="7527933">(</span><span class="num" id="7527934">324</span><span class="op" id="7527937">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7527941">for</span>&nbsp;<span class="ident" id="7527945">i</span>&nbsp;<span class="op" id="7527947">:=</span>&nbsp;<span class="builtintype" id="7527950">uint32</span><span class="op" id="7527956">(</span><span class="num" id="7527957">0</span><span class="op" id="7527958">)</span><span class="op" id="7527959">;</span>&nbsp;<span class="ident" id="7527961"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527945">i</a></span>&nbsp;<span class="op" id="7527963">&lt;</span>&nbsp;<span class="num" id="7527965">4</span><span class="op" id="7527966">;</span>&nbsp;<span class="ident" id="7527968"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527945">i</a></span><span class="op" id="7527969">++</span>&nbsp;<span class="op" id="7527972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527976">wd</span>&nbsp;<span class="op" id="7527979">:=</span>&nbsp;<span class="ident" id="7527982"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527895">w</a></span>&nbsp;<span class="op" id="7527984">+</span>&nbsp;<span class="ident" id="7527986"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527945">i</a></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7527990">e</span>&nbsp;<span class="op" id="7527992">:=</span>&nbsp;<span class="ident" id="7527995"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527727">vm</a></span><span class="op" id="7527997">.</span><span class="ident" id="7527998">WriteWord</span><span class="op" id="7528007">(</span><span class="ident" id="7528008"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527920">off</a></span><span class="op" id="7528011">+</span><span class="ident" id="7528012"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527945">i</a></span><span class="op" id="7528013">*</span><span class="ident" id="7528014"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><span class="op" id="7528022">,</span>&nbsp;<span class="num" id="7528024">0</span><span class="op" id="7528025">,</span>&nbsp;<span class="ident" id="7528027"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527976">wd</a></span><span class="op" id="7528029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528033"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527134">as</a></span><span class="op" id="7528035">(</span><span class="ident" id="7528036"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527990">e</a></span>&nbsp;<span class="op" id="7528038">==</span>&nbsp;<span class="ident" id="7528041">nil</span><span class="op" id="7528044">,</span>&nbsp;<span class="string" id="7528046">&#34;write&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7528063">,</span>&nbsp;<span class="ident" id="7528065"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527990">e</a></span><span class="op" id="7528066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528070">w2</span><span class="op" id="7528072">,</span>&nbsp;<span class="ident" id="7528074"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527990">e</a></span>&nbsp;<span class="op" id="7528076">:=</span>&nbsp;<span class="ident" id="7528079"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527727">vm</a></span><span class="op" id="7528081">.</span><span class="ident" id="7528082">ReadWord</span><span class="op" id="7528090">(</span><span class="op" id="7528091">(</span><span class="num" id="7528092">10</span><span class="op" id="7528094">*</span><span class="num" id="7528095">1024</span><span class="op" id="7528099">+</span><span class="op" id="7528100">(</span><span class="num" id="7528101">3</span><span class="op" id="7528102">-</span><span class="ident" id="7528103"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527945">i</a></span><span class="op" id="7528104">)</span><span class="op" id="7528105">)</span><span class="op" id="7528106">*</span><span class="ident" id="7528107"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><span class="op" id="7528115">+</span><span class="ident" id="7528116"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527920">off</a></span><span class="op" id="7528119">,</span>&nbsp;<span class="num" id="7528121">0</span><span class="op" id="7528122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528126"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527134">as</a></span><span class="op" id="7528128">(</span><span class="ident" id="7528129"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527990">e</a></span>&nbsp;<span class="op" id="7528131">==</span>&nbsp;<span class="ident" id="7528134">nil</span><span class="op" id="7528137">,</span>&nbsp;<span class="string" id="7528139">&#34;read&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7528155">,</span>&nbsp;<span class="ident" id="7528157"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527990">e</a></span><span class="op" id="7528158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528162"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527235">eo</a></span><span class="op" id="7528164">(</span><span class="ident" id="7528165"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528070">w2</a></span>&nbsp;<span class="op" id="7528168">!=</span>&nbsp;<span class="ident" id="7528171"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527976">wd</a></span><span class="op" id="7528173">,</span>&nbsp;<span class="string" id="7528175">&#34;expect&nbsp;0x%08x,&nbsp;got&nbsp;0x%08x&#34;</span><span class="op" id="7528202">,</span>&nbsp;<span class="ident" id="7528204"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527976">wd</a></span><span class="op" id="7528206">,</span>&nbsp;<span class="ident" id="7528208"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528070">w2</a></span><span class="op" id="7528210">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528217">b</span>&nbsp;<span class="op" id="7528219">:=</span>&nbsp;<span class="builtintype" id="7528222">byte</span><span class="op" id="7528226">(</span><span class="num" id="7528227">0x54</span><span class="op" id="7528231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528234"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527920">off</a></span>&nbsp;<span class="op" id="7528238">=</span>&nbsp;<span class="num" id="7528240">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7528245">for</span>&nbsp;<span class="ident" id="7528249">i</span>&nbsp;<span class="op" id="7528251">:=</span>&nbsp;<span class="builtintype" id="7528254">uint32</span><span class="op" id="7528260">(</span><span class="num" id="7528261">0</span><span class="op" id="7528262">)</span><span class="op" id="7528263">;</span>&nbsp;<span class="ident" id="7528265"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528249">i</a></span>&nbsp;<span class="op" id="7528267">&lt;</span>&nbsp;<span class="num" id="7528269">4</span><span class="op" id="7528270">;</span>&nbsp;<span class="ident" id="7528272"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528249">i</a></span><span class="op" id="7528273">++</span>&nbsp;<span class="op" id="7528276">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528280">bt</span>&nbsp;<span class="op" id="7528283">:=</span>&nbsp;<span class="ident" id="7528286"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528217">b</a></span>&nbsp;<span class="op" id="7528288">+</span>&nbsp;<span class="builtintype" id="7528290">byte</span><span class="op" id="7528294">(</span><span class="ident" id="7528295"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528249">i</a></span><span class="op" id="7528296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528300">e</span>&nbsp;<span class="op" id="7528302">:=</span>&nbsp;<span class="ident" id="7528305"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527727">vm</a></span><span class="op" id="7528307">.</span><span class="ident" id="7528308">WriteByte</span><span class="op" id="7528317">(</span><span class="ident" id="7528318"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527920">off</a></span><span class="op" id="7528321">+</span><span class="ident" id="7528322"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528249">i</a></span><span class="op" id="7528323">*</span><span class="ident" id="7528324"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><span class="op" id="7528332">,</span>&nbsp;<span class="num" id="7528334">0</span><span class="op" id="7528335">,</span>&nbsp;<span class="ident" id="7528337"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528280">bt</a></span><span class="op" id="7528339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528343"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527134">as</a></span><span class="op" id="7528345">(</span><span class="ident" id="7528346"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528300">e</a></span>&nbsp;<span class="op" id="7528348">==</span>&nbsp;<span class="ident" id="7528351">nil</span><span class="op" id="7528354">,</span>&nbsp;<span class="string" id="7528356">&#34;write&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7528373">,</span>&nbsp;<span class="ident" id="7528375"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528300">e</a></span><span class="op" id="7528376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528380">b2</span><span class="op" id="7528382">,</span>&nbsp;<span class="ident" id="7528384"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528300">e</a></span>&nbsp;<span class="op" id="7528386">:=</span>&nbsp;<span class="ident" id="7528389"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527727">vm</a></span><span class="op" id="7528391">.</span><span class="ident" id="7528392">ReadByte</span><span class="op" id="7528400">(</span><span class="op" id="7528401">(</span><span class="num" id="7528402">10</span><span class="op" id="7528404">*</span><span class="num" id="7528405">1024</span><span class="op" id="7528409">+</span><span class="op" id="7528410">(</span><span class="num" id="7528411">3</span><span class="op" id="7528412">-</span><span class="ident" id="7528413"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528249">i</a></span><span class="op" id="7528414">)</span><span class="op" id="7528415">)</span><span class="op" id="7528416">*</span><span class="ident" id="7528417"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><span class="op" id="7528425">+</span><span class="ident" id="7528426"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527920">off</a></span><span class="op" id="7528429">,</span>&nbsp;<span class="num" id="7528431">0</span><span class="op" id="7528432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528436"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527134">as</a></span><span class="op" id="7528438">(</span><span class="ident" id="7528439"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528300">e</a></span>&nbsp;<span class="op" id="7528441">==</span>&nbsp;<span class="ident" id="7528444">nil</span><span class="op" id="7528447">,</span>&nbsp;<span class="string" id="7528449">&#34;read&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7528465">,</span>&nbsp;<span class="ident" id="7528467"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528300">e</a></span><span class="op" id="7528468">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528472"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7527235">eo</a></span><span class="op" id="7528474">(</span><span class="ident" id="7528475"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528380">b2</a></span>&nbsp;<span class="op" id="7528478">!=</span>&nbsp;<span class="ident" id="7528481"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528280">bt</a></span><span class="op" id="7528483">,</span>&nbsp;<span class="string" id="7528485">&#34;expect&nbsp;0x%02x,&nbsp;got&nbsp;0x%02x&#34;</span><span class="op" id="7528512">,</span>&nbsp;<span class="ident" id="7528514"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528280">bt</a></span><span class="op" id="7528516">,</span>&nbsp;<span class="ident" id="7528518"><a href="/lonnie.io/e8vm/arch8/virt_memory_test.go.html#7528380">b2</a></span><span class="op" id="7528520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528523">}</span><br>
<span class="lineno"></span><span class="op" id="7528525">}</span>
</div>
</body>
</html>
