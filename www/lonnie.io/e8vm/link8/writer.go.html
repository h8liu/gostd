<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5376776">package</span>&nbsp;<span class="ident" id="5376784">link8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5376791">import</span>&nbsp;<span class="op" id="5376798">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5376801">&#34;bytes&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5376811">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span><span class="op" id="5376829">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5376832">type</span>&nbsp;<span class="ident" id="5376837">writer</span>&nbsp;<span class="keyword" id="5376844">struct</span>&nbsp;<span class="op" id="5376851">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376854">buf</span>&nbsp;<span class="op" id="5376858">*</span><span class="ident" id="5376859"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376801">bytes</a></span><span class="op" id="5376864">.</span><span class="ident" id="5376865">Buffer</span><br>
<span class="lineno"></span><span class="op" id="5376872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5376875">func</span>&nbsp;<span class="ident" id="5376880">newWriter</span><span class="op" id="5376889">(</span><span class="op" id="5376890">)</span>&nbsp;<span class="op" id="5376892">*</span><span class="ident" id="5376893"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376837">writer</a></span>&nbsp;<span class="op" id="5376900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376903">ret</span>&nbsp;<span class="op" id="5376907">:=</span>&nbsp;<span class="builtinfunc" id="5376910">new</span><span class="op" id="5376913">(</span><span class="ident" id="5376914"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376837">writer</a></span><span class="op" id="5376920">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5376923"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376903">ret</a></span><span class="op" id="5376926">.</span><span class="ident" id="5376927">buf</span>&nbsp;<span class="op" id="5376931">=</span>&nbsp;<span class="builtinfunc" id="5376933">new</span><span class="op" id="5376936">(</span><span class="ident" id="5376937"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376801">bytes</a></span><span class="op" id="5376942">.</span><span class="ident" id="5376943">Buffer</span><span class="op" id="5376949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5376952">return</span>&nbsp;<span class="ident" id="5376959"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376903">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5376963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5376966">func</span>&nbsp;<span class="op" id="5376971">(</span><span class="ident" id="5376972">w</span>&nbsp;<span class="op" id="5376974">*</span><span class="ident" id="5376975"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376837">writer</a></span><span class="op" id="5376981">)</span>&nbsp;<span class="ident" id="5376983">writeU32</span><span class="op" id="5376991">(</span><span class="ident" id="5376992">u</span>&nbsp;<span class="builtintype" id="5376994">uint32</span><span class="op" id="5377000">)</span>&nbsp;<span class="op" id="5377002">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377005">var</span>&nbsp;<span class="ident" id="5377009">b</span>&nbsp;<span class="op" id="5377011">[</span><span class="num" id="5377012">4</span><span class="op" id="5377013">]</span><span class="builtintype" id="5377014">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377020"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376811">binary</a></span><span class="op" id="5377026">.</span><span class="ident" id="5377027">LittleEndian</span><span class="op" id="5377039">.</span><span class="ident" id="5377040">PutUint32</span><span class="op" id="5377049">(</span><span class="ident" id="5377050"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377009">b</a></span><span class="op" id="5377051">[</span><span class="op" id="5377052">:</span><span class="op" id="5377053">]</span><span class="op" id="5377054">,</span>&nbsp;<span class="ident" id="5377056"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376992">u</a></span><span class="op" id="5377057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377060">_</span><span class="op" id="5377061">,</span>&nbsp;<span class="ident" id="5377063">e</span>&nbsp;<span class="op" id="5377065">:=</span>&nbsp;<span class="ident" id="5377068"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376972">w</a></span><span class="op" id="5377069">.</span><span class="ident" id="5377070">buf</span><span class="op" id="5377073">.</span><span class="ident" id="5377074">Write</span><span class="op" id="5377079">(</span><span class="ident" id="5377080"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377009">b</a></span><span class="op" id="5377081">[</span><span class="op" id="5377082">:</span><span class="op" id="5377083">]</span><span class="op" id="5377084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377087">if</span>&nbsp;<span class="ident" id="5377090"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377063">e</a></span>&nbsp;<span class="op" id="5377092">!=</span>&nbsp;<span class="ident" id="5377095">nil</span>&nbsp;<span class="op" id="5377099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5377103">panic</span><span class="op" id="5377108">(</span><span class="string" id="5377109">&#34;buf&nbsp;write&#34;</span><span class="op" id="5377120">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5377123">}</span><br>
<span class="lineno"></span><span class="op" id="5377125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5377128">func</span>&nbsp;<span class="op" id="5377133">(</span><span class="ident" id="5377134">w</span>&nbsp;<span class="op" id="5377136">*</span><span class="ident" id="5377137"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376837">writer</a></span><span class="op" id="5377143">)</span>&nbsp;<span class="ident" id="5377145">writeBareFunc</span><span class="op" id="5377158">(</span><span class="ident" id="5377159">f</span>&nbsp;<span class="op" id="5377161">*</span><span class="ident" id="5377162"><a href="/lonnie.io/e8vm/link8/func.go.html#5366652">Func</a></span><span class="op" id="5377166">)</span>&nbsp;<span class="op" id="5377168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377171">if</span>&nbsp;<span class="builtinfunc" id="5377174">len</span><span class="op" id="5377177">(</span><span class="ident" id="5377178"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377159">f</a></span><span class="op" id="5377179">.</span><span class="ident" id="5377180">links</span><span class="op" id="5377185">)</span>&nbsp;<span class="op" id="5377187">!=</span>&nbsp;<span class="num" id="5377190">0</span>&nbsp;<span class="op" id="5377192">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5377196">panic</span><span class="op" id="5377201">(</span><span class="string" id="5377202">&#34;not&nbsp;a&nbsp;bare&nbsp;function&#34;</span><span class="op" id="5377223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5377226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377230">for</span>&nbsp;<span class="ident" id="5377234">_</span><span class="op" id="5377235">,</span>&nbsp;<span class="ident" id="5377237">i</span>&nbsp;<span class="op" id="5377239">:=</span>&nbsp;<span class="keyword" id="5377242">range</span>&nbsp;<span class="ident" id="5377248"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377159">f</a></span><span class="op" id="5377249">.</span><span class="ident" id="5377250">insts</span>&nbsp;<span class="op" id="5377256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377260"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377134">w</a></span><span class="op" id="5377261">.</span><span class="ident" id="5377262">writeU32</span><span class="op" id="5377270">(</span><span class="ident" id="5377271"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377237">i</a></span><span class="op" id="5377272">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5377275">}</span><br>
<span class="lineno"></span><span class="op" id="5377277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5377280">func</span>&nbsp;<span class="op" id="5377285">(</span><span class="ident" id="5377286">w</span>&nbsp;<span class="op" id="5377288">*</span><span class="ident" id="5377289"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376837">writer</a></span><span class="op" id="5377295">)</span>&nbsp;<span class="ident" id="5377297">bytes</span><span class="op" id="5377302">(</span><span class="op" id="5377303">)</span>&nbsp;<span class="op" id="5377305">[</span><span class="op" id="5377306">]</span><span class="builtintype" id="5377307">byte</span>&nbsp;<span class="op" id="5377312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377315">return</span>&nbsp;<span class="ident" id="5377322"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377286">w</a></span><span class="op" id="5377323">.</span><span class="ident" id="5377324">buf</span><span class="op" id="5377327">.</span><span class="ident" id="5377328">Bytes</span><span class="op" id="5377333">(</span><span class="op" id="5377334">)</span><br>
<span class="lineno">40</span><span class="op" id="5377336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5377339">func</span>&nbsp;<span class="ident" id="5377344">writeVar</span><span class="op" id="5377352">(</span><span class="ident" id="5377353">w</span>&nbsp;<span class="op" id="5377355">*</span><span class="ident" id="5377356"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376837">writer</a></span><span class="op" id="5377362">,</span>&nbsp;<span class="ident" id="5377364">v</span>&nbsp;<span class="op" id="5377366">*</span><span class="ident" id="5377367"><a href="/lonnie.io/e8vm/link8/var.go.html#5375977">Var</a></span><span class="op" id="5377370">)</span>&nbsp;<span class="op" id="5377372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377375"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377353">w</a></span><span class="op" id="5377376">.</span><span class="ident" id="5377377">buf</span><span class="op" id="5377380">.</span><span class="ident" id="5377381">Write</span><span class="op" id="5377386">(</span><span class="builtinfunc" id="5377387">make</span><span class="op" id="5377391">(</span><span class="op" id="5377392">[</span><span class="op" id="5377393">]</span><span class="builtintype" id="5377394">byte</span><span class="op" id="5377398">,</span>&nbsp;<span class="ident" id="5377400"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377364">v</a></span><span class="op" id="5377401">.</span><span class="ident" id="5377402">prePad</span><span class="op" id="5377408">)</span><span class="op" id="5377409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377412"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377353">w</a></span><span class="op" id="5377413">.</span><span class="ident" id="5377414">buf</span><span class="op" id="5377417">.</span><span class="ident" id="5377418">Write</span><span class="op" id="5377423">(</span><span class="ident" id="5377424"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377364">v</a></span><span class="op" id="5377425">.</span><span class="ident" id="5377426">buf</span><span class="op" id="5377429">.</span><span class="ident" id="5377430">Bytes</span><span class="op" id="5377435">(</span><span class="op" id="5377436">)</span><span class="op" id="5377437">)</span><br>
<span class="lineno">45</span><span class="op" id="5377439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5377442">func</span>&nbsp;<span class="ident" id="5377447">writeFunc</span><span class="op" id="5377456">(</span><span class="ident" id="5377457">w</span>&nbsp;<span class="op" id="5377459">*</span><span class="ident" id="5377460"><a href="/lonnie.io/e8vm/link8/writer.go.html#5376837">writer</a></span><span class="op" id="5377466">,</span>&nbsp;<span class="ident" id="5377468">p</span>&nbsp;<span class="op" id="5377470">*</span><span class="ident" id="5377471"><a href="/lonnie.io/e8vm/link8/package.go.html#5371347">Package</a></span><span class="op" id="5377478">,</span>&nbsp;<span class="ident" id="5377480">f</span>&nbsp;<span class="op" id="5377482">*</span><span class="ident" id="5377483"><a href="/lonnie.io/e8vm/link8/func.go.html#5366652">Func</a></span><span class="op" id="5377487">)</span>&nbsp;<span class="op" id="5377489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377492">cur</span>&nbsp;<span class="op" id="5377496">:=</span>&nbsp;<span class="num" id="5377499">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377502">var</span>&nbsp;<span class="ident" id="5377506">curLink</span>&nbsp;<span class="op" id="5377514">*</span><span class="ident" id="5377515"><a href="/lonnie.io/e8vm/link8/func.go.html#5366521">link</a></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377521">var</span>&nbsp;<span class="ident" id="5377525">curIndex</span>&nbsp;<span class="builtintype" id="5377534">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377539">updateCur</span>&nbsp;<span class="op" id="5377549">:=</span>&nbsp;<span class="keyword" id="5377552">func</span><span class="op" id="5377556">(</span><span class="op" id="5377557">)</span>&nbsp;<span class="op" id="5377559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377563">if</span>&nbsp;<span class="ident" id="5377566"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377492">cur</a></span>&nbsp;<span class="op" id="5377570">&lt;</span>&nbsp;<span class="builtinfunc" id="5377572">len</span><span class="op" id="5377575">(</span><span class="ident" id="5377576"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377480">f</a></span><span class="op" id="5377577">.</span><span class="ident" id="5377578">links</span><span class="op" id="5377583">)</span>&nbsp;<span class="op" id="5377585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377590"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377506">curLink</a></span>&nbsp;<span class="op" id="5377598">=</span>&nbsp;<span class="ident" id="5377600"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377480">f</a></span><span class="op" id="5377601">.</span><span class="ident" id="5377602">links</span><span class="op" id="5377607">[</span><span class="ident" id="5377608"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377492">cur</a></span><span class="op" id="5377611">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377616"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377525">curIndex</a></span>&nbsp;<span class="op" id="5377625">=</span>&nbsp;<span class="builtintype" id="5377627">int</span><span class="op" id="5377630">(</span><span class="ident" id="5377631"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377506">curLink</a></span><span class="op" id="5377638">.</span><span class="ident" id="5377639">offset</span>&nbsp;<span class="op" id="5377646">&gt;&gt;</span>&nbsp;<span class="num" id="5377649">2</span><span class="op" id="5377650">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5377654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5377657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377661"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377539">updateCur</a></span><span class="op" id="5377670">(</span><span class="op" id="5377671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377674">for</span>&nbsp;<span class="ident" id="5377678">i</span><span class="op" id="5377679">,</span>&nbsp;<span class="ident" id="5377681">inst</span>&nbsp;<span class="op" id="5377686">:=</span>&nbsp;<span class="keyword" id="5377689">range</span>&nbsp;<span class="ident" id="5377695"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377480">f</a></span><span class="op" id="5377696">.</span><span class="ident" id="5377697">insts</span>&nbsp;<span class="op" id="5377703">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377707">if</span>&nbsp;<span class="ident" id="5377710"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377506">curLink</a></span>&nbsp;<span class="op" id="5377718">!=</span>&nbsp;<span class="ident" id="5377721">nil</span>&nbsp;<span class="op" id="5377725">&amp;&amp;</span>&nbsp;<span class="ident" id="5377728"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377678">i</a></span>&nbsp;<span class="op" id="5377730">==</span>&nbsp;<span class="ident" id="5377733"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377525">curIndex</a></span>&nbsp;<span class="op" id="5377742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377747">fill</span>&nbsp;<span class="op" id="5377752">:=</span>&nbsp;<span class="ident" id="5377755"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377506">curLink</a></span><span class="op" id="5377762">.</span><span class="ident" id="5377763">offset</span>&nbsp;<span class="op" id="5377770">&amp;</span>&nbsp;<span class="num" id="5377772">0x3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377779">if</span>&nbsp;<span class="ident" id="5377782"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377747">fill</a></span>&nbsp;<span class="op" id="5377787">==</span>&nbsp;<span class="ident" id="5377790"><a href="/lonnie.io/e8vm/link8/func.go.html#5367925">FillLink</a></span>&nbsp;<span class="op" id="5377799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377805">if</span>&nbsp;<span class="op" id="5377808">(</span><span class="ident" id="5377809"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377681">inst</a></span>&nbsp;<span class="op" id="5377814">&gt;&gt;</span>&nbsp;<span class="num" id="5377817">31</span><span class="op" id="5377819">)</span>&nbsp;<span class="op" id="5377821">!=</span>&nbsp;<span class="num" id="5377824">0x1</span>&nbsp;<span class="op" id="5377828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5377835">panic</span><span class="op" id="5377840">(</span><span class="string" id="5377841">&#34;not&nbsp;a&nbsp;jump&#34;</span><span class="op" id="5377853">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5377859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5377865">if</span>&nbsp;<span class="op" id="5377868">(</span><span class="ident" id="5377869"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377681">inst</a></span>&nbsp;<span class="op" id="5377874">&amp;</span>&nbsp;<span class="num" id="5377876">0x3fffffff</span><span class="op" id="5377886">)</span>&nbsp;<span class="op" id="5377888">!=</span>&nbsp;<span class="num" id="5377891">0</span>&nbsp;<span class="op" id="5377893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5377900">panic</span><span class="op" id="5377905">(</span><span class="string" id="5377906">&#34;already&nbsp;filled&#34;</span><span class="op" id="5377922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5377928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377935">pc</span>&nbsp;<span class="op" id="5377938">:=</span>&nbsp;<span class="ident" id="5377941"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377480">f</a></span><span class="op" id="5377942">.</span><span class="ident" id="5377943">addr</span>&nbsp;<span class="op" id="5377948">+</span>&nbsp;<span class="builtintype" id="5377950">uint32</span><span class="op" id="5377956">(</span><span class="ident" id="5377957"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377678">i</a></span><span class="op" id="5377958">)</span><span class="op" id="5377959">*</span><span class="num" id="5377960">4</span>&nbsp;<span class="op" id="5377962">+</span>&nbsp;<span class="num" id="5377964">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5377970">target</span>&nbsp;<span class="op" id="5377977">:=</span>&nbsp;<span class="ident" id="5377980"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377468">p</a></span><span class="op" id="5377981">.</span><span class="ident" id="5377982">requires</span><span class="op" id="5377990">[</span><span class="ident" id="5377991"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377506">curLink</a></span><span class="op" id="5377998">.</span><span class="ident" id="5377999">pkg</span><span class="op" id="5378002">]</span><span class="op" id="5378003">.</span><span class="ident" id="5378004">Func</span><span class="op" id="5378008">(</span><span class="ident" id="5378009"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377506">curLink</a></span><span class="op" id="5378016">.</span><span class="ident" id="5378017">sym</span><span class="op" id="5378020">)</span><span class="op" id="5378021">.</span><span class="ident" id="5378022">addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378031"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377681">inst</a></span>&nbsp;<span class="op" id="5378036">|=</span>&nbsp;<span class="op" id="5378039">(</span><span class="ident" id="5378040"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377970">target</a></span>&nbsp;<span class="op" id="5378047">-</span>&nbsp;<span class="ident" id="5378049"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377935">pc</a></span><span class="op" id="5378051">)</span>&nbsp;<span class="op" id="5378053">&gt;&gt;</span>&nbsp;<span class="num" id="5378056">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378061">}</span>&nbsp;<span class="keyword" id="5378063">else</span>&nbsp;<span class="keyword" id="5378068">if</span>&nbsp;<span class="ident" id="5378071"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377747">fill</a></span>&nbsp;<span class="op" id="5378076">==</span>&nbsp;<span class="ident" id="5378079"><a href="/lonnie.io/e8vm/link8/func.go.html#5368038">FillHigh</a></span>&nbsp;<span class="op" id="5378088">||</span>&nbsp;<span class="ident" id="5378091"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377747">fill</a></span>&nbsp;<span class="op" id="5378096">==</span>&nbsp;<span class="ident" id="5378099"><a href="/lonnie.io/e8vm/link8/func.go.html#5367990">FillLow</a></span>&nbsp;<span class="op" id="5378107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378113">if</span>&nbsp;<span class="op" id="5378116">(</span><span class="ident" id="5378117"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377681">inst</a></span>&nbsp;<span class="op" id="5378122">&amp;</span>&nbsp;<span class="num" id="5378124">0xffff</span><span class="op" id="5378130">)</span>&nbsp;<span class="op" id="5378132">!=</span>&nbsp;<span class="num" id="5378135">0</span>&nbsp;<span class="op" id="5378137">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5378144">panic</span><span class="op" id="5378149">(</span><span class="string" id="5378150">&#34;already&nbsp;filled&#34;</span><span class="op" id="5378166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378179">pkg</span>&nbsp;<span class="op" id="5378183">:=</span>&nbsp;<span class="ident" id="5378186"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377468">p</a></span><span class="op" id="5378187">.</span><span class="ident" id="5378188">requires</span><span class="op" id="5378196">[</span><span class="ident" id="5378197"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377506">curLink</a></span><span class="op" id="5378204">.</span><span class="ident" id="5378205">pkg</span><span class="op" id="5378208">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378214">sym</span>&nbsp;<span class="op" id="5378218">:=</span>&nbsp;<span class="ident" id="5378221"><a href="/lonnie.io/e8vm/link8/writer.go.html#5378179">pkg</a></span><span class="op" id="5378224">.</span><span class="ident" id="5378225">symbols</span><span class="op" id="5378232">[</span><span class="ident" id="5378233"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377506">curLink</a></span><span class="op" id="5378240">.</span><span class="ident" id="5378241">sym</span><span class="op" id="5378244">]</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378250">var</span>&nbsp;<span class="ident" id="5378254">v</span>&nbsp;<span class="builtintype" id="5378256">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378267">switch</span>&nbsp;<span class="ident" id="5378274"><a href="/lonnie.io/e8vm/link8/writer.go.html#5378214">sym</a></span><span class="op" id="5378277">.</span><span class="ident" id="5378278">Type</span>&nbsp;<span class="op" id="5378283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378289">case</span>&nbsp;<span class="ident" id="5378294"><a href="/lonnie.io/e8vm/link8/symbol.go.html#5374825">SymFunc</a></span><span class="op" id="5378301">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378308"><a href="/lonnie.io/e8vm/link8/writer.go.html#5378254">v</a></span>&nbsp;<span class="op" id="5378310">=</span>&nbsp;<span class="ident" id="5378312"><a href="/lonnie.io/e8vm/link8/writer.go.html#5378179">pkg</a></span><span class="op" id="5378315">.</span><span class="ident" id="5378316">Func</span><span class="op" id="5378320">(</span><span class="ident" id="5378321"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377506">curLink</a></span><span class="op" id="5378328">.</span><span class="ident" id="5378329">sym</span><span class="op" id="5378332">)</span><span class="op" id="5378333">.</span><span class="ident" id="5378334">addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378343">case</span>&nbsp;<span class="ident" id="5378348"><a href="/lonnie.io/e8vm/link8/symbol.go.html#5374841">SymVar</a></span><span class="op" id="5378354">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378361"><a href="/lonnie.io/e8vm/link8/writer.go.html#5378254">v</a></span>&nbsp;<span class="op" id="5378363">=</span>&nbsp;<span class="ident" id="5378365"><a href="/lonnie.io/e8vm/link8/writer.go.html#5378179">pkg</a></span><span class="op" id="5378368">.</span><span class="ident" id="5378369">Var</span><span class="op" id="5378372">(</span><span class="ident" id="5378373"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377506">curLink</a></span><span class="op" id="5378380">.</span><span class="ident" id="5378381">sym</span><span class="op" id="5378384">)</span><span class="op" id="5378385">.</span><span class="ident" id="5378386">addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378395">default</span><span class="op" id="5378402">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5378409">panic</span><span class="op" id="5378414">(</span><span class="string" id="5378415">&#34;bug&#34;</span><span class="op" id="5378420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5378433">if</span>&nbsp;<span class="ident" id="5378436"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377747">fill</a></span>&nbsp;<span class="op" id="5378441">==</span>&nbsp;<span class="ident" id="5378444"><a href="/lonnie.io/e8vm/link8/func.go.html#5368038">FillHigh</a></span>&nbsp;<span class="op" id="5378453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378460"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377681">inst</a></span>&nbsp;<span class="op" id="5378465">|=</span>&nbsp;<span class="ident" id="5378468"><a href="/lonnie.io/e8vm/link8/writer.go.html#5378254">v</a></span>&nbsp;<span class="op" id="5378470">&gt;&gt;</span>&nbsp;<span class="num" id="5378473">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378480">}</span>&nbsp;<span class="keyword" id="5378482">else</span>&nbsp;<span class="op" id="5378487">{</span>&nbsp;<span class="comment" id="5378489">//&nbsp;fillLow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378505"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377681">inst</a></span>&nbsp;<span class="op" id="5378510">|=</span>&nbsp;<span class="ident" id="5378513"><a href="/lonnie.io/e8vm/link8/writer.go.html#5378254">v</a></span>&nbsp;<span class="op" id="5378515">&amp;</span>&nbsp;<span class="num" id="5378517">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378528">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378533">}</span>&nbsp;<span class="keyword" id="5378535">else</span>&nbsp;<span class="op" id="5378540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5378546">panic</span><span class="op" id="5378551">(</span><span class="string" id="5378552">&#34;invalid&nbsp;fill&#34;</span><span class="op" id="5378566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378577"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377492">cur</a></span><span class="op" id="5378580">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378586"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377539">updateCur</a></span><span class="op" id="5378595">(</span><span class="op" id="5378596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5378605"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377457">w</a></span><span class="op" id="5378606">.</span><span class="ident" id="5378607">writeU32</span><span class="op" id="5378615">(</span><span class="ident" id="5378616"><a href="/lonnie.io/e8vm/link8/writer.go.html#5377681">inst</a></span><span class="op" id="5378620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5378623">}</span><br>
<span class="lineno">105</span><span class="op" id="5378625">}</span>
</div>
</body>
</html>
