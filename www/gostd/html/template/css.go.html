<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html" class="current">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4882653">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4882708">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4882762">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4882813">package</span>&nbsp;<span class="ident" id="4882821">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4882831">import</span>&nbsp;<span class="op" id="4882838">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4882841">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4882850">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4882857">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4882868">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4882883">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4882886">//&nbsp;endsWithCSSKeyword&nbsp;reports&nbsp;whether&nbsp;b&nbsp;ends&nbsp;with&nbsp;an&nbsp;ident&nbsp;that</span><br>
<span class="lineno">15</span><span class="comment" id="4882950">//&nbsp;case-insensitively&nbsp;matches&nbsp;the&nbsp;lower-case&nbsp;kw.</span><br>
<span class="lineno"></span><span class="keyword" id="4882999">func</span>&nbsp;<span class="ident" id="4883004">endsWithCSSKeyword</span><span class="op" id="4883022">(</span><span class="ident" id="4883023">b</span>&nbsp;<span class="op" id="4883025">[</span><span class="op" id="4883026">]</span><span class="builtintype" id="4883027">byte</span><span class="op" id="4883031">,</span>&nbsp;<span class="ident" id="4883033">kw</span>&nbsp;<span class="builtintype" id="4883036">string</span><span class="op" id="4883042">)</span>&nbsp;<span class="builtintype" id="4883044">bool</span>&nbsp;<span class="op" id="4883049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4883052">i</span>&nbsp;<span class="op" id="4883054">:=</span>&nbsp;<span class="builtinfunc" id="4883057">len</span><span class="op" id="4883060">(</span><span class="ident" id="4883061"><a href="/gostd/html/template/css.go.html#4883023">b</a></span><span class="op" id="4883062">)</span>&nbsp;<span class="op" id="4883064">-</span>&nbsp;<span class="builtinfunc" id="4883066">len</span><span class="op" id="4883069">(</span><span class="ident" id="4883070"><a href="/gostd/html/template/css.go.html#4883033">kw</a></span><span class="op" id="4883072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4883075">if</span>&nbsp;<span class="ident" id="4883078"><a href="/gostd/html/template/css.go.html#4883052">i</a></span>&nbsp;<span class="op" id="4883080">&lt;</span>&nbsp;<span class="num" id="4883082">0</span>&nbsp;<span class="op" id="4883084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4883088">//&nbsp;Too&nbsp;short.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4883104">return</span>&nbsp;<span class="builtintype" id="4883111">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4883118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4883121">if</span>&nbsp;<span class="ident" id="4883124"><a href="/gostd/html/template/css.go.html#4883052">i</a></span>&nbsp;<span class="op" id="4883126">!=</span>&nbsp;<span class="num" id="4883129">0</span>&nbsp;<span class="op" id="4883131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4883135">r</span><span class="op" id="4883136">,</span>&nbsp;<span class="ident" id="4883138">_</span>&nbsp;<span class="op" id="4883140">:=</span>&nbsp;<span class="ident" id="4883143"><a href="/gostd/html/template/css.go.html#4882868">utf8</a></span><span class="op" id="4883147">.</span><span class="ident" id="4883148"><a href="/gostd/unicode/utf8/utf8.go.html#1810995">DecodeLastRune</a></span><span class="op" id="4883162">(</span><span class="ident" id="4883163"><a href="/gostd/html/template/css.go.html#4883023">b</a></span><span class="op" id="4883164">[</span><span class="op" id="4883165">:</span><span class="ident" id="4883166"><a href="/gostd/html/template/css.go.html#4883052">i</a></span><span class="op" id="4883167">]</span><span class="op" id="4883168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4883172">if</span>&nbsp;<span class="ident" id="4883175"><a href="/gostd/html/template/css.go.html#4883659">isCSSNmchar</a></span><span class="op" id="4883186">(</span><span class="ident" id="4883187"><a href="/gostd/html/template/css.go.html#4883135">r</a></span><span class="op" id="4883188">)</span>&nbsp;<span class="op" id="4883190">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4883195">//&nbsp;Too&nbsp;long.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4883211">return</span>&nbsp;<span class="builtintype" id="4883218">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4883226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4883229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4883232">//&nbsp;Many&nbsp;CSS&nbsp;keywords,&nbsp;such&nbsp;as&nbsp;&#34;!important&#34;&nbsp;can&nbsp;have&nbsp;characters&nbsp;encoded,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4883305">//&nbsp;but&nbsp;the&nbsp;URI&nbsp;production&nbsp;does&nbsp;not&nbsp;allow&nbsp;that&nbsp;according&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4883365">//&nbsp;http://www.w3.org/TR/css3-syntax/#TOK-URI</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4883411">//&nbsp;This&nbsp;does&nbsp;not&nbsp;attempt&nbsp;to&nbsp;recognize&nbsp;encoded&nbsp;keywords.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4883481">//&nbsp;given&nbsp;&#34;\75\72\6c&#34;&nbsp;and&nbsp;&#34;url&#34;&nbsp;this&nbsp;return&nbsp;false.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4883532">return</span>&nbsp;<span class="builtintype" id="4883539">string</span><span class="op" id="4883545">(</span><span class="ident" id="4883546"><a href="/gostd/html/template/css.go.html#4882841">bytes</a></span><span class="op" id="4883551">.</span><span class="ident" id="4883552"><a href="/gostd/bytes/bytes.go.html#1405925">ToLower</a></span><span class="op" id="4883559">(</span><span class="ident" id="4883560"><a href="/gostd/html/template/css.go.html#4883023">b</a></span><span class="op" id="4883561">[</span><span class="ident" id="4883562"><a href="/gostd/html/template/css.go.html#4883052">i</a></span><span class="op" id="4883563">:</span><span class="op" id="4883564">]</span><span class="op" id="4883565">)</span><span class="op" id="4883566">)</span>&nbsp;<span class="op" id="4883568">==</span>&nbsp;<span class="ident" id="4883571"><a href="/gostd/html/template/css.go.html#4883033">kw</a></span><br>
<span class="lineno">35</span><span class="op" id="4883574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4883577">//&nbsp;isCSSNmchar&nbsp;reports&nbsp;whether&nbsp;rune&nbsp;is&nbsp;allowed&nbsp;anywhere&nbsp;in&nbsp;a&nbsp;CSS&nbsp;identifier.</span><br>
<span class="lineno"></span><span class="keyword" id="4883654">func</span>&nbsp;<span class="ident" id="4883659">isCSSNmchar</span><span class="op" id="4883670">(</span><span class="ident" id="4883671">r</span>&nbsp;<span class="builtintype" id="4883673">rune</span><span class="op" id="4883677">)</span>&nbsp;<span class="builtintype" id="4883679">bool</span>&nbsp;<span class="op" id="4883684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4883687">//&nbsp;Based&nbsp;on&nbsp;the&nbsp;CSS3&nbsp;nmchar&nbsp;production&nbsp;but&nbsp;ignores&nbsp;multi-rune&nbsp;escape</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4883757">//&nbsp;sequences.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4883772">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-nmchar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4883824">return</span>&nbsp;<span class="string" id="4883831">&#39;a&#39;</span>&nbsp;<span class="op" id="4883835">&lt;=</span>&nbsp;<span class="ident" id="4883838"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4883840">&amp;&amp;</span>&nbsp;<span class="ident" id="4883843"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4883845">&lt;=</span>&nbsp;<span class="string" id="4883848">&#39;z&#39;</span>&nbsp;<span class="op" id="4883852">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4883857">&#39;A&#39;</span>&nbsp;<span class="op" id="4883861">&lt;=</span>&nbsp;<span class="ident" id="4883864"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4883866">&amp;&amp;</span>&nbsp;<span class="ident" id="4883869"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4883871">&lt;=</span>&nbsp;<span class="string" id="4883874">&#39;Z&#39;</span>&nbsp;<span class="op" id="4883878">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4883883">&#39;0&#39;</span>&nbsp;<span class="op" id="4883887">&lt;=</span>&nbsp;<span class="ident" id="4883890"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4883892">&amp;&amp;</span>&nbsp;<span class="ident" id="4883895"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4883897">&lt;=</span>&nbsp;<span class="string" id="4883900">&#39;9&#39;</span>&nbsp;<span class="op" id="4883904">||</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4883909"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4883911">==</span>&nbsp;<span class="string" id="4883914">&#39;-&#39;</span>&nbsp;<span class="op" id="4883918">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4883923"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4883925">==</span>&nbsp;<span class="string" id="4883928">&#39;_&#39;</span>&nbsp;<span class="op" id="4883932">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4883937">//&nbsp;Non-ASCII&nbsp;cases&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="4883965">0x80</span>&nbsp;<span class="op" id="4883970">&lt;=</span>&nbsp;<span class="ident" id="4883973"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4883975">&amp;&amp;</span>&nbsp;<span class="ident" id="4883978"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4883980">&lt;=</span>&nbsp;<span class="num" id="4883983">0xd7ff</span>&nbsp;<span class="op" id="4883990">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="4883995">0xe000</span>&nbsp;<span class="op" id="4884002">&lt;=</span>&nbsp;<span class="ident" id="4884005"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4884007">&amp;&amp;</span>&nbsp;<span class="ident" id="4884010"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4884012">&lt;=</span>&nbsp;<span class="num" id="4884015">0xfffd</span>&nbsp;<span class="op" id="4884022">||</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="4884027">0x10000</span>&nbsp;<span class="op" id="4884035">&lt;=</span>&nbsp;<span class="ident" id="4884038"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4884040">&amp;&amp;</span>&nbsp;<span class="ident" id="4884043"><a href="/gostd/html/template/css.go.html#4883671">r</a></span>&nbsp;<span class="op" id="4884045">&lt;=</span>&nbsp;<span class="num" id="4884048">0x10ffff</span><br>
<span class="lineno"></span><span class="op" id="4884057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4884060">//&nbsp;decodeCSS&nbsp;decodes&nbsp;CSS3&nbsp;escapes&nbsp;given&nbsp;a&nbsp;sequence&nbsp;of&nbsp;stringchars.</span><br>
<span class="lineno"></span><span class="comment" id="4884127">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;change,&nbsp;it&nbsp;returns&nbsp;the&nbsp;input,&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice</span><br>
<span class="lineno">55</span><span class="comment" id="4884204">//&nbsp;backed&nbsp;by&nbsp;a&nbsp;new&nbsp;array.</span><br>
<span class="lineno"></span><span class="comment" id="4884230">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-stringchar&nbsp;defines&nbsp;stringchar.</span><br>
<span class="lineno"></span><span class="keyword" id="4884305">func</span>&nbsp;<span class="ident" id="4884310">decodeCSS</span><span class="op" id="4884319">(</span><span class="ident" id="4884320">s</span>&nbsp;<span class="op" id="4884322">[</span><span class="op" id="4884323">]</span><span class="builtintype" id="4884324">byte</span><span class="op" id="4884328">)</span>&nbsp;<span class="op" id="4884330">[</span><span class="op" id="4884331">]</span><span class="builtintype" id="4884332">byte</span>&nbsp;<span class="op" id="4884337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4884340">i</span>&nbsp;<span class="op" id="4884342">:=</span>&nbsp;<span class="ident" id="4884345"><a href="/gostd/html/template/css.go.html#4882841">bytes</a></span><span class="op" id="4884350">.</span><span class="ident" id="4884351"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="4884360">(</span><span class="ident" id="4884361"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4884362">,</span>&nbsp;<span class="string" id="4884364">&#39;\\&#39;</span><span class="op" id="4884368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4884371">if</span>&nbsp;<span class="ident" id="4884374"><a href="/gostd/html/template/css.go.html#4884340">i</a></span>&nbsp;<span class="op" id="4884376">==</span>&nbsp;<span class="op" id="4884379">-</span><span class="num" id="4884380">1</span>&nbsp;<span class="op" id="4884382">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4884386">return</span>&nbsp;<span class="ident" id="4884393"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4884396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884399">//&nbsp;The&nbsp;UTF-8&nbsp;sequence&nbsp;for&nbsp;a&nbsp;codepoint&nbsp;is&nbsp;never&nbsp;longer&nbsp;than&nbsp;1&nbsp;+&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884467">//&nbsp;number&nbsp;hex&nbsp;digits&nbsp;need&nbsp;to&nbsp;represent&nbsp;that&nbsp;codepoint,&nbsp;so&nbsp;len(s)&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884539">//&nbsp;upper&nbsp;bound&nbsp;on&nbsp;the&nbsp;output&nbsp;length.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4884577">b</span>&nbsp;<span class="op" id="4884579">:=</span>&nbsp;<span class="builtinfunc" id="4884582">make</span><span class="op" id="4884586">(</span><span class="op" id="4884587">[</span><span class="op" id="4884588">]</span><span class="builtintype" id="4884589">byte</span><span class="op" id="4884593">,</span>&nbsp;<span class="num" id="4884595">0</span><span class="op" id="4884596">,</span>&nbsp;<span class="builtinfunc" id="4884598">len</span><span class="op" id="4884601">(</span><span class="ident" id="4884602"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4884603">)</span><span class="op" id="4884604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4884607">for</span>&nbsp;<span class="builtinfunc" id="4884611">len</span><span class="op" id="4884614">(</span><span class="ident" id="4884615"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4884616">)</span>&nbsp;<span class="op" id="4884618">!=</span>&nbsp;<span class="num" id="4884621">0</span>&nbsp;<span class="op" id="4884623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4884627">i</span>&nbsp;<span class="op" id="4884629">:=</span>&nbsp;<span class="ident" id="4884632"><a href="/gostd/html/template/css.go.html#4882841">bytes</a></span><span class="op" id="4884637">.</span><span class="ident" id="4884638"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="4884647">(</span><span class="ident" id="4884648"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4884649">,</span>&nbsp;<span class="string" id="4884651">&#39;\\&#39;</span><span class="op" id="4884655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4884659">if</span>&nbsp;<span class="ident" id="4884662"><a href="/gostd/html/template/css.go.html#4884627">i</a></span>&nbsp;<span class="op" id="4884664">==</span>&nbsp;<span class="op" id="4884667">-</span><span class="num" id="4884668">1</span>&nbsp;<span class="op" id="4884670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4884675"><a href="/gostd/html/template/css.go.html#4884627">i</a></span>&nbsp;<span class="op" id="4884677">=</span>&nbsp;<span class="builtinfunc" id="4884679">len</span><span class="op" id="4884682">(</span><span class="ident" id="4884683"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4884684">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4884688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4884692"><a href="/gostd/html/template/css.go.html#4884577">b</a></span><span class="op" id="4884693">,</span>&nbsp;<span class="ident" id="4884695"><a href="/gostd/html/template/css.go.html#4884320">s</a></span>&nbsp;<span class="op" id="4884697">=</span>&nbsp;<span class="builtinfunc" id="4884699">append</span><span class="op" id="4884705">(</span><span class="ident" id="4884706"><a href="/gostd/html/template/css.go.html#4884577">b</a></span><span class="op" id="4884707">,</span>&nbsp;<span class="ident" id="4884709"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4884710">[</span><span class="op" id="4884711">:</span><span class="ident" id="4884712"><a href="/gostd/html/template/css.go.html#4884627">i</a></span><span class="op" id="4884713">]</span><span class="op" id="4884714">...</span><span class="op" id="4884717">)</span><span class="op" id="4884718">,</span>&nbsp;<span class="ident" id="4884720"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4884721">[</span><span class="ident" id="4884722"><a href="/gostd/html/template/css.go.html#4884627">i</a></span><span class="op" id="4884723">:</span><span class="op" id="4884724">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4884728">if</span>&nbsp;<span class="builtinfunc" id="4884731">len</span><span class="op" id="4884734">(</span><span class="ident" id="4884735"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4884736">)</span>&nbsp;<span class="op" id="4884738">&lt;</span>&nbsp;<span class="num" id="4884740">2</span>&nbsp;<span class="op" id="4884742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4884747">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4884755">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884759">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884812">//&nbsp;escape&nbsp;::=&nbsp;unicode&nbsp;|&nbsp;&#39;\&#39;&nbsp;[#x20-#x7E#x80-#xD7FF#xE000-#xFFFD#x10000-#x10FFFF]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4884894">if</span>&nbsp;<span class="ident" id="4884897"><a href="/gostd/html/template/css.go.html#4885609">isHex</a></span><span class="op" id="4884902">(</span><span class="ident" id="4884903"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4884904">[</span><span class="num" id="4884905">1</span><span class="op" id="4884906">]</span><span class="op" id="4884907">)</span>&nbsp;<span class="op" id="4884909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884914">//&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-unicode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4884969">//&nbsp;&nbsp;&nbsp;unicode&nbsp;::=&nbsp;&#39;\&#39;&nbsp;[0-9a-fA-F]{1,6}&nbsp;wc?</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885014">j</span>&nbsp;<span class="op" id="4885016">:=</span>&nbsp;<span class="num" id="4885019">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4885024">for</span>&nbsp;<span class="ident" id="4885028"><a href="/gostd/html/template/css.go.html#4885014">j</a></span>&nbsp;<span class="op" id="4885030">&lt;</span>&nbsp;<span class="builtinfunc" id="4885032">len</span><span class="op" id="4885035">(</span><span class="ident" id="4885036"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4885037">)</span>&nbsp;<span class="op" id="4885039">&amp;&amp;</span>&nbsp;<span class="ident" id="4885042"><a href="/gostd/html/template/css.go.html#4885014">j</a></span>&nbsp;<span class="op" id="4885044">&lt;</span>&nbsp;<span class="num" id="4885046">7</span>&nbsp;<span class="op" id="4885048">&amp;&amp;</span>&nbsp;<span class="ident" id="4885051"><a href="/gostd/html/template/css.go.html#4885609">isHex</a></span><span class="op" id="4885056">(</span><span class="ident" id="4885057"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4885058">[</span><span class="ident" id="4885059"><a href="/gostd/html/template/css.go.html#4885014">j</a></span><span class="op" id="4885060">]</span><span class="op" id="4885061">)</span>&nbsp;<span class="op" id="4885063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885069"><a href="/gostd/html/template/css.go.html#4885014">j</a></span><span class="op" id="4885070">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4885076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885081">r</span>&nbsp;<span class="op" id="4885083">:=</span>&nbsp;<span class="ident" id="4885086"><a href="/gostd/html/template/css.go.html#4885776">hexDecode</a></span><span class="op" id="4885095">(</span><span class="ident" id="4885096"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4885097">[</span><span class="num" id="4885098">1</span><span class="op" id="4885099">:</span><span class="ident" id="4885100"><a href="/gostd/html/template/css.go.html#4885014">j</a></span><span class="op" id="4885101">]</span><span class="op" id="4885102">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4885107">if</span>&nbsp;<span class="ident" id="4885110"><a href="/gostd/html/template/css.go.html#4885081">r</a></span>&nbsp;<span class="op" id="4885112">&gt;</span>&nbsp;<span class="ident" id="4885114"><a href="/gostd/html/template/css.go.html#4882857">unicode</a></span><span class="op" id="4885121">.</span><span class="ident" id="4885122"><a href="/gostd/unicode/letter.go.html#1821536">MaxRune</a></span>&nbsp;<span class="op" id="4885130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885136"><a href="/gostd/html/template/css.go.html#4885081">r</a></span><span class="op" id="4885137">,</span>&nbsp;<span class="ident" id="4885139"><a href="/gostd/html/template/css.go.html#4885014">j</a></span>&nbsp;<span class="op" id="4885141">=</span>&nbsp;<span class="ident" id="4885143"><a href="/gostd/html/template/css.go.html#4885081">r</a></span><span class="op" id="4885144">/</span><span class="num" id="4885145">16</span><span class="op" id="4885147">,</span>&nbsp;<span class="ident" id="4885149"><a href="/gostd/html/template/css.go.html#4885014">j</a></span><span class="op" id="4885150">-</span><span class="num" id="4885151">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4885156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885161">n</span>&nbsp;<span class="op" id="4885163">:=</span>&nbsp;<span class="ident" id="4885166"><a href="/gostd/html/template/css.go.html#4882868">utf8</a></span><span class="op" id="4885170">.</span><span class="ident" id="4885171"><a href="/gostd/unicode/utf8/utf8.go.html#1813107">EncodeRune</a></span><span class="op" id="4885181">(</span><span class="ident" id="4885182"><a href="/gostd/html/template/css.go.html#4884577">b</a></span><span class="op" id="4885183">[</span><span class="builtinfunc" id="4885184">len</span><span class="op" id="4885187">(</span><span class="ident" id="4885188"><a href="/gostd/html/template/css.go.html#4884577">b</a></span><span class="op" id="4885189">)</span><span class="op" id="4885190">:</span><span class="builtinfunc" id="4885191">cap</span><span class="op" id="4885194">(</span><span class="ident" id="4885195"><a href="/gostd/html/template/css.go.html#4884577">b</a></span><span class="op" id="4885196">)</span><span class="op" id="4885197">]</span><span class="op" id="4885198">,</span>&nbsp;<span class="ident" id="4885200"><a href="/gostd/html/template/css.go.html#4885081">r</a></span><span class="op" id="4885201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4885206">//&nbsp;The&nbsp;optional&nbsp;space&nbsp;at&nbsp;the&nbsp;end&nbsp;allows&nbsp;a&nbsp;hex</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4885255">//&nbsp;sequence&nbsp;to&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;literal&nbsp;hex.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4885303">//&nbsp;string(decodeCSS([]byte(`\A&nbsp;B`)))&nbsp;==&nbsp;&#34;\nB&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885352"><a href="/gostd/html/template/css.go.html#4884577">b</a></span><span class="op" id="4885353">,</span>&nbsp;<span class="ident" id="4885355"><a href="/gostd/html/template/css.go.html#4884320">s</a></span>&nbsp;<span class="op" id="4885357">=</span>&nbsp;<span class="ident" id="4885359"><a href="/gostd/html/template/css.go.html#4884577">b</a></span><span class="op" id="4885360">[</span><span class="op" id="4885361">:</span><span class="builtinfunc" id="4885362">len</span><span class="op" id="4885365">(</span><span class="ident" id="4885366"><a href="/gostd/html/template/css.go.html#4884577">b</a></span><span class="op" id="4885367">)</span><span class="op" id="4885368">+</span><span class="ident" id="4885369"><a href="/gostd/html/template/css.go.html#4885161">n</a></span><span class="op" id="4885370">]</span><span class="op" id="4885371">,</span>&nbsp;<span class="ident" id="4885373"><a href="/gostd/html/template/css.go.html#4886172">skipCSSSpace</a></span><span class="op" id="4885385">(</span><span class="ident" id="4885386"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4885387">[</span><span class="ident" id="4885388"><a href="/gostd/html/template/css.go.html#4885014">j</a></span><span class="op" id="4885389">:</span><span class="op" id="4885390">]</span><span class="op" id="4885391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4885395">}</span>&nbsp;<span class="keyword" id="4885397">else</span>&nbsp;<span class="op" id="4885402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4885407">//&nbsp;`\\`&nbsp;decodes&nbsp;to&nbsp;`\`&nbsp;and&nbsp;`\&#34;`&nbsp;to&nbsp;`&#34;`.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885450">_</span><span class="op" id="4885451">,</span>&nbsp;<span class="ident" id="4885453">n</span>&nbsp;<span class="op" id="4885455">:=</span>&nbsp;<span class="ident" id="4885458"><a href="/gostd/html/template/css.go.html#4882868">utf8</a></span><span class="op" id="4885462">.</span><span class="ident" id="4885463"><a href="/gostd/unicode/utf8/utf8.go.html#1809912">DecodeRune</a></span><span class="op" id="4885473">(</span><span class="ident" id="4885474"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4885475">[</span><span class="num" id="4885476">1</span><span class="op" id="4885477">:</span><span class="op" id="4885478">]</span><span class="op" id="4885479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885484"><a href="/gostd/html/template/css.go.html#4884577">b</a></span><span class="op" id="4885485">,</span>&nbsp;<span class="ident" id="4885487"><a href="/gostd/html/template/css.go.html#4884320">s</a></span>&nbsp;<span class="op" id="4885489">=</span>&nbsp;<span class="builtinfunc" id="4885491">append</span><span class="op" id="4885497">(</span><span class="ident" id="4885498"><a href="/gostd/html/template/css.go.html#4884577">b</a></span><span class="op" id="4885499">,</span>&nbsp;<span class="ident" id="4885501"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4885502">[</span><span class="num" id="4885503">1</span><span class="op" id="4885504">:</span><span class="num" id="4885505">1</span><span class="op" id="4885506">+</span><span class="ident" id="4885507"><a href="/gostd/html/template/css.go.html#4885453">n</a></span><span class="op" id="4885508">]</span><span class="op" id="4885509">...</span><span class="op" id="4885512">)</span><span class="op" id="4885513">,</span>&nbsp;<span class="ident" id="4885515"><a href="/gostd/html/template/css.go.html#4884320">s</a></span><span class="op" id="4885516">[</span><span class="num" id="4885517">1</span><span class="op" id="4885518">+</span><span class="ident" id="4885519"><a href="/gostd/html/template/css.go.html#4885453">n</a></span><span class="op" id="4885520">:</span><span class="op" id="4885521">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4885525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4885528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4885531">return</span>&nbsp;<span class="ident" id="4885538"><a href="/gostd/html/template/css.go.html#4884577">b</a></span><br>
<span class="lineno">100</span><span class="op" id="4885540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4885543">//&nbsp;isHex&nbsp;reports&nbsp;whether&nbsp;the&nbsp;given&nbsp;character&nbsp;is&nbsp;a&nbsp;hex&nbsp;digit.</span><br>
<span class="lineno"></span><span class="keyword" id="4885604">func</span>&nbsp;<span class="ident" id="4885609">isHex</span><span class="op" id="4885614">(</span><span class="ident" id="4885615">c</span>&nbsp;<span class="builtintype" id="4885617">byte</span><span class="op" id="4885621">)</span>&nbsp;<span class="builtintype" id="4885623">bool</span>&nbsp;<span class="op" id="4885628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4885631">return</span>&nbsp;<span class="string" id="4885638">&#39;0&#39;</span>&nbsp;<span class="op" id="4885642">&lt;=</span>&nbsp;<span class="ident" id="4885645"><a href="/gostd/html/template/css.go.html#4885615">c</a></span>&nbsp;<span class="op" id="4885647">&amp;&amp;</span>&nbsp;<span class="ident" id="4885650"><a href="/gostd/html/template/css.go.html#4885615">c</a></span>&nbsp;<span class="op" id="4885652">&lt;=</span>&nbsp;<span class="string" id="4885655">&#39;9&#39;</span>&nbsp;<span class="op" id="4885659">||</span>&nbsp;<span class="string" id="4885662">&#39;a&#39;</span>&nbsp;<span class="op" id="4885666">&lt;=</span>&nbsp;<span class="ident" id="4885669"><a href="/gostd/html/template/css.go.html#4885615">c</a></span>&nbsp;<span class="op" id="4885671">&amp;&amp;</span>&nbsp;<span class="ident" id="4885674"><a href="/gostd/html/template/css.go.html#4885615">c</a></span>&nbsp;<span class="op" id="4885676">&lt;=</span>&nbsp;<span class="string" id="4885679">&#39;f&#39;</span>&nbsp;<span class="op" id="4885683">||</span>&nbsp;<span class="string" id="4885686">&#39;A&#39;</span>&nbsp;<span class="op" id="4885690">&lt;=</span>&nbsp;<span class="ident" id="4885693"><a href="/gostd/html/template/css.go.html#4885615">c</a></span>&nbsp;<span class="op" id="4885695">&amp;&amp;</span>&nbsp;<span class="ident" id="4885698"><a href="/gostd/html/template/css.go.html#4885615">c</a></span>&nbsp;<span class="op" id="4885700">&lt;=</span>&nbsp;<span class="string" id="4885703">&#39;F&#39;</span><br>
<span class="lineno">105</span><span class="op" id="4885707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4885710">//&nbsp;hexDecode&nbsp;decodes&nbsp;a&nbsp;short&nbsp;hex&nbsp;digit&nbsp;sequence:&nbsp;&#34;10&#34;&nbsp;-&gt;&nbsp;16.</span><br>
<span class="lineno"></span><span class="keyword" id="4885771">func</span>&nbsp;<span class="ident" id="4885776">hexDecode</span><span class="op" id="4885785">(</span><span class="ident" id="4885786">s</span>&nbsp;<span class="op" id="4885788">[</span><span class="op" id="4885789">]</span><span class="builtintype" id="4885790">byte</span><span class="op" id="4885794">)</span>&nbsp;<span class="builtintype" id="4885796">rune</span>&nbsp;<span class="op" id="4885801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885804">n</span>&nbsp;<span class="op" id="4885806">:=</span>&nbsp;<span class="string" id="4885809">&#39;\x00&#39;</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4885817">for</span>&nbsp;<span class="ident" id="4885821">_</span><span class="op" id="4885822">,</span>&nbsp;<span class="ident" id="4885824">c</span>&nbsp;<span class="op" id="4885826">:=</span>&nbsp;<span class="keyword" id="4885829">range</span>&nbsp;<span class="ident" id="4885835"><a href="/gostd/html/template/css.go.html#4885786">s</a></span>&nbsp;<span class="op" id="4885837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885841"><a href="/gostd/html/template/css.go.html#4885804">n</a></span>&nbsp;<span class="op" id="4885843">&lt;&lt;=</span>&nbsp;<span class="num" id="4885847">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4885851">switch</span>&nbsp;<span class="op" id="4885858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4885862">case</span>&nbsp;<span class="string" id="4885867">&#39;0&#39;</span>&nbsp;<span class="op" id="4885871">&lt;=</span>&nbsp;<span class="ident" id="4885874"><a href="/gostd/html/template/css.go.html#4885824">c</a></span>&nbsp;<span class="op" id="4885876">&amp;&amp;</span>&nbsp;<span class="ident" id="4885879"><a href="/gostd/html/template/css.go.html#4885824">c</a></span>&nbsp;<span class="op" id="4885881">&lt;=</span>&nbsp;<span class="string" id="4885884">&#39;9&#39;</span><span class="op" id="4885887">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885892"><a href="/gostd/html/template/css.go.html#4885804">n</a></span>&nbsp;<span class="op" id="4885894">|=</span>&nbsp;<span class="builtintype" id="4885897">rune</span><span class="op" id="4885901">(</span><span class="ident" id="4885902"><a href="/gostd/html/template/css.go.html#4885824">c</a></span>&nbsp;<span class="op" id="4885904">-</span>&nbsp;<span class="string" id="4885906">&#39;0&#39;</span><span class="op" id="4885909">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4885913">case</span>&nbsp;<span class="string" id="4885918">&#39;a&#39;</span>&nbsp;<span class="op" id="4885922">&lt;=</span>&nbsp;<span class="ident" id="4885925"><a href="/gostd/html/template/css.go.html#4885824">c</a></span>&nbsp;<span class="op" id="4885927">&amp;&amp;</span>&nbsp;<span class="ident" id="4885930"><a href="/gostd/html/template/css.go.html#4885824">c</a></span>&nbsp;<span class="op" id="4885932">&lt;=</span>&nbsp;<span class="string" id="4885935">&#39;f&#39;</span><span class="op" id="4885938">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885943"><a href="/gostd/html/template/css.go.html#4885804">n</a></span>&nbsp;<span class="op" id="4885945">|=</span>&nbsp;<span class="builtintype" id="4885948">rune</span><span class="op" id="4885952">(</span><span class="ident" id="4885953"><a href="/gostd/html/template/css.go.html#4885824">c</a></span><span class="op" id="4885954">-</span><span class="string" id="4885955">&#39;a&#39;</span><span class="op" id="4885958">)</span>&nbsp;<span class="op" id="4885960">+</span>&nbsp;<span class="num" id="4885962">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4885967">case</span>&nbsp;<span class="string" id="4885972">&#39;A&#39;</span>&nbsp;<span class="op" id="4885976">&lt;=</span>&nbsp;<span class="ident" id="4885979"><a href="/gostd/html/template/css.go.html#4885824">c</a></span>&nbsp;<span class="op" id="4885981">&amp;&amp;</span>&nbsp;<span class="ident" id="4885984"><a href="/gostd/html/template/css.go.html#4885824">c</a></span>&nbsp;<span class="op" id="4885986">&lt;=</span>&nbsp;<span class="string" id="4885989">&#39;F&#39;</span><span class="op" id="4885992">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4885997"><a href="/gostd/html/template/css.go.html#4885804">n</a></span>&nbsp;<span class="op" id="4885999">|=</span>&nbsp;<span class="builtintype" id="4886002">rune</span><span class="op" id="4886006">(</span><span class="ident" id="4886007"><a href="/gostd/html/template/css.go.html#4885824">c</a></span><span class="op" id="4886008">-</span><span class="string" id="4886009">&#39;A&#39;</span><span class="op" id="4886012">)</span>&nbsp;<span class="op" id="4886014">+</span>&nbsp;<span class="num" id="4886016">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886021">default</span><span class="op" id="4886028">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4886033">panic</span><span class="op" id="4886038">(</span><span class="ident" id="4886039"><a href="/gostd/html/template/css.go.html#4882850">fmt</a></span><span class="op" id="4886042">.</span><span class="ident" id="4886043"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="4886050">(</span><span class="string" id="4886051">&#34;Bad&nbsp;hex&nbsp;digit&nbsp;in&nbsp;%q&#34;</span><span class="op" id="4886072">,</span>&nbsp;<span class="ident" id="4886074"><a href="/gostd/html/template/css.go.html#4885786">s</a></span><span class="op" id="4886075">)</span><span class="op" id="4886076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4886080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4886083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886086">return</span>&nbsp;<span class="ident" id="4886093"><a href="/gostd/html/template/css.go.html#4885804">n</a></span><br>
<span class="lineno"></span><span class="op" id="4886095">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="4886098">//&nbsp;skipCSSSpace&nbsp;returns&nbsp;a&nbsp;suffix&nbsp;of&nbsp;c,&nbsp;skipping&nbsp;over&nbsp;a&nbsp;single&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="4886167">func</span>&nbsp;<span class="ident" id="4886172">skipCSSSpace</span><span class="op" id="4886184">(</span><span class="ident" id="4886185">c</span>&nbsp;<span class="op" id="4886187">[</span><span class="op" id="4886188">]</span><span class="builtintype" id="4886189">byte</span><span class="op" id="4886193">)</span>&nbsp;<span class="op" id="4886195">[</span><span class="op" id="4886196">]</span><span class="builtintype" id="4886197">byte</span>&nbsp;<span class="op" id="4886202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886205">if</span>&nbsp;<span class="builtinfunc" id="4886208">len</span><span class="op" id="4886211">(</span><span class="ident" id="4886212"><a href="/gostd/html/template/css.go.html#4886185">c</a></span><span class="op" id="4886213">)</span>&nbsp;<span class="op" id="4886215">==</span>&nbsp;<span class="num" id="4886218">0</span>&nbsp;<span class="op" id="4886220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886224">return</span>&nbsp;<span class="ident" id="4886231"><a href="/gostd/html/template/css.go.html#4886185">c</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4886234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4886237">//&nbsp;wc&nbsp;::=&nbsp;#x9&nbsp;|&nbsp;#xA&nbsp;|&nbsp;#xC&nbsp;|&nbsp;#xD&nbsp;|&nbsp;#x20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886277">switch</span>&nbsp;<span class="ident" id="4886284"><a href="/gostd/html/template/css.go.html#4886185">c</a></span><span class="op" id="4886285">[</span><span class="num" id="4886286">0</span><span class="op" id="4886287">]</span>&nbsp;<span class="op" id="4886289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886292">case</span>&nbsp;<span class="string" id="4886297">&#39;\t&#39;</span><span class="op" id="4886301">,</span>&nbsp;<span class="string" id="4886303">&#39;\n&#39;</span><span class="op" id="4886307">,</span>&nbsp;<span class="string" id="4886309">&#39;\f&#39;</span><span class="op" id="4886313">,</span>&nbsp;<span class="string" id="4886315">&#39;&nbsp;&#39;</span><span class="op" id="4886318">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886322">return</span>&nbsp;<span class="ident" id="4886329"><a href="/gostd/html/template/css.go.html#4886185">c</a></span><span class="op" id="4886330">[</span><span class="num" id="4886331">1</span><span class="op" id="4886332">:</span><span class="op" id="4886333">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886336">case</span>&nbsp;<span class="string" id="4886341">&#39;\r&#39;</span><span class="op" id="4886345">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4886349">//&nbsp;This&nbsp;differs&nbsp;from&nbsp;CSS3&#39;s&nbsp;wc&nbsp;production&nbsp;because&nbsp;it&nbsp;contains&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4886415">//&nbsp;probable&nbsp;spec&nbsp;error&nbsp;whereby&nbsp;wc&nbsp;contains&nbsp;all&nbsp;the&nbsp;single&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4886480">//&nbsp;sequences&nbsp;in&nbsp;nl&nbsp;(newline)&nbsp;but&nbsp;not&nbsp;CRLF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886525">if</span>&nbsp;<span class="builtinfunc" id="4886528">len</span><span class="op" id="4886531">(</span><span class="ident" id="4886532"><a href="/gostd/html/template/css.go.html#4886185">c</a></span><span class="op" id="4886533">)</span>&nbsp;<span class="op" id="4886535">&gt;=</span>&nbsp;<span class="num" id="4886538">2</span>&nbsp;<span class="op" id="4886540">&amp;&amp;</span>&nbsp;<span class="ident" id="4886543"><a href="/gostd/html/template/css.go.html#4886185">c</a></span><span class="op" id="4886544">[</span><span class="num" id="4886545">1</span><span class="op" id="4886546">]</span>&nbsp;<span class="op" id="4886548">==</span>&nbsp;<span class="string" id="4886551">&#39;\n&#39;</span>&nbsp;<span class="op" id="4886556">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886561">return</span>&nbsp;<span class="ident" id="4886568"><a href="/gostd/html/template/css.go.html#4886185">c</a></span><span class="op" id="4886569">[</span><span class="num" id="4886570">2</span><span class="op" id="4886571">:</span><span class="op" id="4886572">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4886576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886580">return</span>&nbsp;<span class="ident" id="4886587"><a href="/gostd/html/template/css.go.html#4886185">c</a></span><span class="op" id="4886588">[</span><span class="num" id="4886589">1</span><span class="op" id="4886590">:</span><span class="op" id="4886591">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4886594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886597">return</span>&nbsp;<span class="ident" id="4886604"><a href="/gostd/html/template/css.go.html#4886185">c</a></span><br>
<span class="lineno">145</span><span class="op" id="4886606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4886609">//&nbsp;isCSSSpace&nbsp;reports&nbsp;whether&nbsp;b&nbsp;is&nbsp;a&nbsp;CSS&nbsp;space&nbsp;char&nbsp;as&nbsp;defined&nbsp;in&nbsp;wc.</span><br>
<span class="lineno"></span><span class="keyword" id="4886679">func</span>&nbsp;<span class="ident" id="4886684">isCSSSpace</span><span class="op" id="4886694">(</span><span class="ident" id="4886695">b</span>&nbsp;<span class="builtintype" id="4886697">byte</span><span class="op" id="4886701">)</span>&nbsp;<span class="builtintype" id="4886703">bool</span>&nbsp;<span class="op" id="4886708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886711">switch</span>&nbsp;<span class="ident" id="4886718"><a href="/gostd/html/template/css.go.html#4886695">b</a></span>&nbsp;<span class="op" id="4886720">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886723">case</span>&nbsp;<span class="string" id="4886728">&#39;\t&#39;</span><span class="op" id="4886732">,</span>&nbsp;<span class="string" id="4886734">&#39;\n&#39;</span><span class="op" id="4886738">,</span>&nbsp;<span class="string" id="4886740">&#39;\f&#39;</span><span class="op" id="4886744">,</span>&nbsp;<span class="string" id="4886746">&#39;\r&#39;</span><span class="op" id="4886750">,</span>&nbsp;<span class="string" id="4886752">&#39;&nbsp;&#39;</span><span class="op" id="4886755">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886759">return</span>&nbsp;<span class="builtintype" id="4886766">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4886772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886775">return</span>&nbsp;<span class="builtintype" id="4886782">false</span><br>
<span class="lineno"></span><span class="op" id="4886788">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="4886791">//&nbsp;cssEscaper&nbsp;escapes&nbsp;HTML&nbsp;and&nbsp;CSS&nbsp;special&nbsp;characters&nbsp;using&nbsp;\&lt;hex&gt;+&nbsp;escapes.</span><br>
<span class="lineno"></span><span class="keyword" id="4886868">func</span>&nbsp;<span class="ident" id="4886873">cssEscaper</span><span class="op" id="4886883">(</span><span class="ident" id="4886884">args</span>&nbsp;<span class="op" id="4886889">...</span><span class="keyword" id="4886892">interface</span><span class="op" id="4886901">{</span><span class="op" id="4886902">}</span><span class="op" id="4886903">)</span>&nbsp;<span class="builtintype" id="4886905">string</span>&nbsp;<span class="op" id="4886912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4886915">s</span><span class="op" id="4886916">,</span>&nbsp;<span class="ident" id="4886918">_</span>&nbsp;<span class="op" id="4886920">:=</span>&nbsp;<span class="ident" id="4886923"><a href="/gostd/html/template/content.go.html#4871796">stringify</a></span><span class="op" id="4886932">(</span><span class="ident" id="4886933"><a href="/gostd/html/template/css.go.html#4886884">args</a></span><span class="op" id="4886937">...</span><span class="op" id="4886940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886943">var</span>&nbsp;<span class="ident" id="4886947">b</span>&nbsp;<span class="ident" id="4886949"><a href="/gostd/html/template/css.go.html#4882841">bytes</a></span><span class="op" id="4886954">.</span><span class="ident" id="4886955"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4886963">written</span>&nbsp;<span class="op" id="4886971">:=</span>&nbsp;<span class="num" id="4886974">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4886977">for</span>&nbsp;<span class="ident" id="4886981">i</span><span class="op" id="4886982">,</span>&nbsp;<span class="ident" id="4886984">r</span>&nbsp;<span class="op" id="4886986">:=</span>&nbsp;<span class="keyword" id="4886989">range</span>&nbsp;<span class="ident" id="4886995"><a href="/gostd/html/template/css.go.html#4886915">s</a></span>&nbsp;<span class="op" id="4886997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887001">var</span>&nbsp;<span class="ident" id="4887005">repl</span>&nbsp;<span class="builtintype" id="4887010">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887019">switch</span>&nbsp;<span class="ident" id="4887026"><a href="/gostd/html/template/css.go.html#4886984">r</a></span>&nbsp;<span class="op" id="4887028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887032">case</span>&nbsp;<span class="num" id="4887037">0</span><span class="op" id="4887038">:</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887043"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887048">=</span>&nbsp;<span class="string" id="4887050">`\0`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887057">case</span>&nbsp;<span class="string" id="4887062">&#39;\t&#39;</span><span class="op" id="4887066">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887071"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887076">=</span>&nbsp;<span class="string" id="4887078">`\9`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887085">case</span>&nbsp;<span class="string" id="4887090">&#39;\n&#39;</span><span class="op" id="4887094">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887099"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887104">=</span>&nbsp;<span class="string" id="4887106">`\a`</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887113">case</span>&nbsp;<span class="string" id="4887118">&#39;\f&#39;</span><span class="op" id="4887122">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887127"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887132">=</span>&nbsp;<span class="string" id="4887134">`\c`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887141">case</span>&nbsp;<span class="string" id="4887146">&#39;\r&#39;</span><span class="op" id="4887150">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887155"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887160">=</span>&nbsp;<span class="string" id="4887162">`\d`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4887169">//&nbsp;Encode&nbsp;HTML&nbsp;specials&nbsp;as&nbsp;hex&nbsp;so&nbsp;the&nbsp;output&nbsp;can&nbsp;be&nbsp;embedded</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4887232">//&nbsp;in&nbsp;HTML&nbsp;attributes&nbsp;without&nbsp;further&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887282">case</span>&nbsp;<span class="string" id="4887287">&#39;&#34;&#39;</span><span class="op" id="4887290">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887295"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887300">=</span>&nbsp;<span class="string" id="4887302">`\22`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887310">case</span>&nbsp;<span class="string" id="4887315">&#39;&amp;&#39;</span><span class="op" id="4887318">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887323"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887328">=</span>&nbsp;<span class="string" id="4887330">`\26`</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887338">case</span>&nbsp;<span class="string" id="4887343">&#39;\&#39;&#39;</span><span class="op" id="4887347">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887352"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887357">=</span>&nbsp;<span class="string" id="4887359">`\27`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887367">case</span>&nbsp;<span class="string" id="4887372">&#39;(&#39;</span><span class="op" id="4887375">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887380"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887385">=</span>&nbsp;<span class="string" id="4887387">`\28`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887395">case</span>&nbsp;<span class="string" id="4887400">&#39;)&#39;</span><span class="op" id="4887403">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887408"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887413">=</span>&nbsp;<span class="string" id="4887415">`\29`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887423">case</span>&nbsp;<span class="string" id="4887428">&#39;+&#39;</span><span class="op" id="4887431">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887436"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887441">=</span>&nbsp;<span class="string" id="4887443">`\2b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887451">case</span>&nbsp;<span class="string" id="4887456">&#39;/&#39;</span><span class="op" id="4887459">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887464"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887469">=</span>&nbsp;<span class="string" id="4887471">`\2f`</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887479">case</span>&nbsp;<span class="string" id="4887484">&#39;:&#39;</span><span class="op" id="4887487">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887492"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887497">=</span>&nbsp;<span class="string" id="4887499">`\3a`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887507">case</span>&nbsp;<span class="string" id="4887512">&#39;;&#39;</span><span class="op" id="4887515">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887520"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887525">=</span>&nbsp;<span class="string" id="4887527">`\3b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887535">case</span>&nbsp;<span class="string" id="4887540">&#39;&lt;&#39;</span><span class="op" id="4887543">:</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887548"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887553">=</span>&nbsp;<span class="string" id="4887555">`\3c`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887563">case</span>&nbsp;<span class="string" id="4887568">&#39;&gt;&#39;</span><span class="op" id="4887571">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887576"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887581">=</span>&nbsp;<span class="string" id="4887583">`\3e`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887591">case</span>&nbsp;<span class="string" id="4887596">&#39;\\&#39;</span><span class="op" id="4887600">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887605"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887610">=</span>&nbsp;<span class="string" id="4887612">`\\`</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887619">case</span>&nbsp;<span class="string" id="4887624">&#39;{&#39;</span><span class="op" id="4887627">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887632"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887637">=</span>&nbsp;<span class="string" id="4887639">`\7b`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887647">case</span>&nbsp;<span class="string" id="4887652">&#39;}&#39;</span><span class="op" id="4887655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887660"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887665">=</span>&nbsp;<span class="string" id="4887667">`\7d`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887675">default</span><span class="op" id="4887682">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887687">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4887698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887702"><a href="/gostd/html/template/css.go.html#4886947">b</a></span><span class="op" id="4887703">.</span><span class="ident" id="4887704"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4887715">(</span><span class="ident" id="4887716"><a href="/gostd/html/template/css.go.html#4886915">s</a></span><span class="op" id="4887717">[</span><span class="ident" id="4887718"><a href="/gostd/html/template/css.go.html#4886963">written</a></span><span class="op" id="4887725">:</span><span class="ident" id="4887726"><a href="/gostd/html/template/css.go.html#4886981">i</a></span><span class="op" id="4887727">]</span><span class="op" id="4887728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887732"><a href="/gostd/html/template/css.go.html#4886947">b</a></span><span class="op" id="4887733">.</span><span class="ident" id="4887734"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4887745">(</span><span class="ident" id="4887746"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span><span class="op" id="4887750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887754"><a href="/gostd/html/template/css.go.html#4886963">written</a></span>&nbsp;<span class="op" id="4887762">=</span>&nbsp;<span class="ident" id="4887764"><a href="/gostd/html/template/css.go.html#4886981">i</a></span>&nbsp;<span class="op" id="4887766">+</span>&nbsp;<span class="ident" id="4887768"><a href="/gostd/html/template/css.go.html#4882868">utf8</a></span><span class="op" id="4887772">.</span><span class="ident" id="4887773"><a href="/gostd/unicode/utf8/utf8.go.html#1812711">RuneLen</a></span><span class="op" id="4887780">(</span><span class="ident" id="4887781"><a href="/gostd/html/template/css.go.html#4886984">r</a></span><span class="op" id="4887782">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887786">if</span>&nbsp;<span class="ident" id="4887789"><a href="/gostd/html/template/css.go.html#4887005">repl</a></span>&nbsp;<span class="op" id="4887794">!=</span>&nbsp;<span class="string" id="4887797">`\\`</span>&nbsp;<span class="op" id="4887802">&amp;&amp;</span>&nbsp;<span class="op" id="4887805">(</span><span class="ident" id="4887806"><a href="/gostd/html/template/css.go.html#4886963">written</a></span>&nbsp;<span class="op" id="4887814">==</span>&nbsp;<span class="builtinfunc" id="4887817">len</span><span class="op" id="4887820">(</span><span class="ident" id="4887821"><a href="/gostd/html/template/css.go.html#4886915">s</a></span><span class="op" id="4887822">)</span>&nbsp;<span class="op" id="4887824">||</span>&nbsp;<span class="ident" id="4887827"><a href="/gostd/html/template/css.go.html#4885609">isHex</a></span><span class="op" id="4887832">(</span><span class="ident" id="4887833"><a href="/gostd/html/template/css.go.html#4886915">s</a></span><span class="op" id="4887834">[</span><span class="ident" id="4887835"><a href="/gostd/html/template/css.go.html#4886963">written</a></span><span class="op" id="4887842">]</span><span class="op" id="4887843">)</span>&nbsp;<span class="op" id="4887845">||</span>&nbsp;<span class="ident" id="4887848"><a href="/gostd/html/template/css.go.html#4886684">isCSSSpace</a></span><span class="op" id="4887858">(</span><span class="ident" id="4887859"><a href="/gostd/html/template/css.go.html#4886915">s</a></span><span class="op" id="4887860">[</span><span class="ident" id="4887861"><a href="/gostd/html/template/css.go.html#4886963">written</a></span><span class="op" id="4887868">]</span><span class="op" id="4887869">)</span><span class="op" id="4887870">)</span>&nbsp;<span class="op" id="4887872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887877"><a href="/gostd/html/template/css.go.html#4886947">b</a></span><span class="op" id="4887878">.</span><span class="ident" id="4887879"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="4887888">(</span><span class="string" id="4887889">&#39;&nbsp;&#39;</span><span class="op" id="4887892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4887896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4887899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887902">if</span>&nbsp;<span class="ident" id="4887905"><a href="/gostd/html/template/css.go.html#4886963">written</a></span>&nbsp;<span class="op" id="4887913">==</span>&nbsp;<span class="num" id="4887916">0</span>&nbsp;<span class="op" id="4887918">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887922">return</span>&nbsp;<span class="ident" id="4887929"><a href="/gostd/html/template/css.go.html#4886915">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4887932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4887935"><a href="/gostd/html/template/css.go.html#4886947">b</a></span><span class="op" id="4887936">.</span><span class="ident" id="4887937"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4887948">(</span><span class="ident" id="4887949"><a href="/gostd/html/template/css.go.html#4886915">s</a></span><span class="op" id="4887950">[</span><span class="ident" id="4887951"><a href="/gostd/html/template/css.go.html#4886963">written</a></span><span class="op" id="4887958">:</span><span class="op" id="4887959">]</span><span class="op" id="4887960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4887963">return</span>&nbsp;<span class="ident" id="4887970"><a href="/gostd/html/template/css.go.html#4886947">b</a></span><span class="op" id="4887971">.</span><span class="ident" id="4887972"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="4887978">(</span><span class="op" id="4887979">)</span><br>
<span class="lineno"></span><span class="op" id="4887981">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="4887984">var</span>&nbsp;<span class="ident" id="4887988">expressionBytes</span>&nbsp;<span class="op" id="4888004">=</span>&nbsp;<span class="op" id="4888006">[</span><span class="op" id="4888007">]</span><span class="builtintype" id="4888008">byte</span><span class="op" id="4888012">(</span><span class="string" id="4888013">&#34;expression&#34;</span><span class="op" id="4888025">)</span><br>
<span class="lineno"></span><span class="keyword" id="4888027">var</span>&nbsp;<span class="ident" id="4888031">mozBindingBytes</span>&nbsp;<span class="op" id="4888047">=</span>&nbsp;<span class="op" id="4888049">[</span><span class="op" id="4888050">]</span><span class="builtintype" id="4888051">byte</span><span class="op" id="4888055">(</span><span class="string" id="4888056">&#34;mozbinding&#34;</span><span class="op" id="4888068">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4888071">//&nbsp;cssValueFilter&nbsp;allows&nbsp;innocuous&nbsp;CSS&nbsp;values&nbsp;in&nbsp;the&nbsp;output&nbsp;including&nbsp;CSS</span><br>
<span class="lineno">225</span><span class="comment" id="4888145">//&nbsp;quantities&nbsp;(10px&nbsp;or&nbsp;25%),&nbsp;ID&nbsp;or&nbsp;class&nbsp;literals&nbsp;(#foo,&nbsp;.bar),&nbsp;keyword&nbsp;values</span><br>
<span class="lineno"></span><span class="comment" id="4888224">//&nbsp;(inherit,&nbsp;blue),&nbsp;and&nbsp;colors&nbsp;(#888).</span><br>
<span class="lineno"></span><span class="comment" id="4888263">//&nbsp;It&nbsp;filters&nbsp;out&nbsp;unsafe&nbsp;values,&nbsp;such&nbsp;as&nbsp;those&nbsp;that&nbsp;affect&nbsp;token&nbsp;boundaries,</span><br>
<span class="lineno"></span><span class="comment" id="4888340">//&nbsp;and&nbsp;anything&nbsp;that&nbsp;might&nbsp;execute&nbsp;scripts.</span><br>
<span class="lineno"></span><span class="keyword" id="4888384">func</span>&nbsp;<span class="ident" id="4888389">cssValueFilter</span><span class="op" id="4888403">(</span><span class="ident" id="4888404">args</span>&nbsp;<span class="op" id="4888409">...</span><span class="keyword" id="4888412">interface</span><span class="op" id="4888421">{</span><span class="op" id="4888422">}</span><span class="op" id="4888423">)</span>&nbsp;<span class="builtintype" id="4888425">string</span>&nbsp;<span class="op" id="4888432">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4888435">s</span><span class="op" id="4888436">,</span>&nbsp;<span class="ident" id="4888438">t</span>&nbsp;<span class="op" id="4888440">:=</span>&nbsp;<span class="ident" id="4888443"><a href="/gostd/html/template/content.go.html#4871796">stringify</a></span><span class="op" id="4888452">(</span><span class="ident" id="4888453"><a href="/gostd/html/template/css.go.html#4888404">args</a></span><span class="op" id="4888457">...</span><span class="op" id="4888460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4888463">if</span>&nbsp;<span class="ident" id="4888466"><a href="/gostd/html/template/css.go.html#4888438">t</a></span>&nbsp;<span class="op" id="4888468">==</span>&nbsp;<span class="ident" id="4888471"><a href="/gostd/html/template/content.go.html#4870312">contentTypeCSS</a></span>&nbsp;<span class="op" id="4888486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4888490">return</span>&nbsp;<span class="ident" id="4888497"><a href="/gostd/html/template/css.go.html#4888435">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4888500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4888503">b</span><span class="op" id="4888504">,</span>&nbsp;<span class="ident" id="4888506">id</span>&nbsp;<span class="op" id="4888509">:=</span>&nbsp;<span class="ident" id="4888512"><a href="/gostd/html/template/css.go.html#4884310">decodeCSS</a></span><span class="op" id="4888521">(</span><span class="op" id="4888522">[</span><span class="op" id="4888523">]</span><span class="builtintype" id="4888524">byte</span><span class="op" id="4888528">(</span><span class="ident" id="4888529"><a href="/gostd/html/template/css.go.html#4888435">s</a></span><span class="op" id="4888530">)</span><span class="op" id="4888531">)</span><span class="op" id="4888532">,</span>&nbsp;<span class="builtinfunc" id="4888534">make</span><span class="op" id="4888538">(</span><span class="op" id="4888539">[</span><span class="op" id="4888540">]</span><span class="builtintype" id="4888541">byte</span><span class="op" id="4888545">,</span>&nbsp;<span class="num" id="4888547">0</span><span class="op" id="4888548">,</span>&nbsp;<span class="num" id="4888550">64</span><span class="op" id="4888552">)</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4888556">//&nbsp;CSS3&nbsp;error&nbsp;handling&nbsp;is&nbsp;specified&nbsp;as&nbsp;honoring&nbsp;string&nbsp;boundaries&nbsp;per</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4888627">//&nbsp;http://www.w3.org/TR/css3-syntax/#error-handling&nbsp;:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4888682">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Malformed&nbsp;declarations.&nbsp;User&nbsp;agents&nbsp;must&nbsp;handle&nbsp;unexpected</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4888749">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tokens&nbsp;encountered&nbsp;while&nbsp;parsing&nbsp;a&nbsp;declaration&nbsp;by&nbsp;reading&nbsp;until</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4888821">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;declaration,&nbsp;while&nbsp;observing&nbsp;the&nbsp;rules&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4888887">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matching&nbsp;pairs&nbsp;of&nbsp;(),&nbsp;[],&nbsp;{},&nbsp;&#34;&#34;,&nbsp;and&nbsp;&#39;&#39;,&nbsp;and&nbsp;correctly&nbsp;handling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4888960">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escapes.&nbsp;For&nbsp;example,&nbsp;a&nbsp;malformed&nbsp;declaration&nbsp;may&nbsp;be&nbsp;missing&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4889031">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;property,&nbsp;colon&nbsp;(:)&nbsp;or&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4889069">//&nbsp;So&nbsp;we&nbsp;need&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;values&nbsp;do&nbsp;not&nbsp;have&nbsp;mismatched&nbsp;bracket</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4889140">//&nbsp;or&nbsp;quote&nbsp;characters&nbsp;to&nbsp;prevent&nbsp;the&nbsp;browser&nbsp;from&nbsp;restarting&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4889211">//&nbsp;inside&nbsp;a&nbsp;string&nbsp;that&nbsp;might&nbsp;embed&nbsp;JavaScript&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4889267">for</span>&nbsp;<span class="ident" id="4889271">i</span><span class="op" id="4889272">,</span>&nbsp;<span class="ident" id="4889274">c</span>&nbsp;<span class="op" id="4889276">:=</span>&nbsp;<span class="keyword" id="4889279">range</span>&nbsp;<span class="ident" id="4889285"><a href="/gostd/html/template/css.go.html#4888503">b</a></span>&nbsp;<span class="op" id="4889287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4889291">switch</span>&nbsp;<span class="ident" id="4889298"><a href="/gostd/html/template/css.go.html#4889274">c</a></span>&nbsp;<span class="op" id="4889300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4889304">case</span>&nbsp;<span class="num" id="4889309">0</span><span class="op" id="4889310">,</span>&nbsp;<span class="string" id="4889312">&#39;&#34;&#39;</span><span class="op" id="4889315">,</span>&nbsp;<span class="string" id="4889317">&#39;\&#39;&#39;</span><span class="op" id="4889321">,</span>&nbsp;<span class="string" id="4889323">&#39;(&#39;</span><span class="op" id="4889326">,</span>&nbsp;<span class="string" id="4889328">&#39;)&#39;</span><span class="op" id="4889331">,</span>&nbsp;<span class="string" id="4889333">&#39;/&#39;</span><span class="op" id="4889336">,</span>&nbsp;<span class="string" id="4889338">&#39;;&#39;</span><span class="op" id="4889341">,</span>&nbsp;<span class="string" id="4889343">&#39;@&#39;</span><span class="op" id="4889346">,</span>&nbsp;<span class="string" id="4889348">&#39;[&#39;</span><span class="op" id="4889351">,</span>&nbsp;<span class="string" id="4889353">&#39;\\&#39;</span><span class="op" id="4889357">,</span>&nbsp;<span class="string" id="4889359">&#39;]&#39;</span><span class="op" id="4889362">,</span>&nbsp;<span class="string" id="4889364">&#39;`&#39;</span><span class="op" id="4889367">,</span>&nbsp;<span class="string" id="4889369">&#39;{&#39;</span><span class="op" id="4889372">,</span>&nbsp;<span class="string" id="4889374">&#39;}&#39;</span><span class="op" id="4889377">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4889382">return</span>&nbsp;<span class="ident" id="4889389"><a href="/gostd/html/template/escape.go.html#4907571">filterFailsafe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4889406">case</span>&nbsp;<span class="string" id="4889411">&#39;-&#39;</span><span class="op" id="4889414">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4889419">//&nbsp;Disallow&nbsp;&lt;!--&nbsp;or&nbsp;--&gt;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4889447">//&nbsp;--&nbsp;should&nbsp;not&nbsp;appear&nbsp;in&nbsp;valid&nbsp;identifiers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4889496">if</span>&nbsp;<span class="ident" id="4889499"><a href="/gostd/html/template/css.go.html#4889271">i</a></span>&nbsp;<span class="op" id="4889501">!=</span>&nbsp;<span class="num" id="4889504">0</span>&nbsp;<span class="op" id="4889506">&amp;&amp;</span>&nbsp;<span class="ident" id="4889509"><a href="/gostd/html/template/css.go.html#4888503">b</a></span><span class="op" id="4889510">[</span><span class="ident" id="4889511"><a href="/gostd/html/template/css.go.html#4889271">i</a></span><span class="op" id="4889512">-</span><span class="num" id="4889513">1</span><span class="op" id="4889514">]</span>&nbsp;<span class="op" id="4889516">==</span>&nbsp;<span class="string" id="4889519">&#39;-&#39;</span>&nbsp;<span class="op" id="4889523">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4889529">return</span>&nbsp;<span class="ident" id="4889536"><a href="/gostd/html/template/escape.go.html#4907571">filterFailsafe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4889554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4889558">default</span><span class="op" id="4889565">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4889570">if</span>&nbsp;<span class="ident" id="4889573"><a href="/gostd/html/template/css.go.html#4889274">c</a></span>&nbsp;<span class="op" id="4889575">&lt;</span>&nbsp;<span class="num" id="4889577">0x80</span>&nbsp;<span class="op" id="4889582">&amp;&amp;</span>&nbsp;<span class="ident" id="4889585"><a href="/gostd/html/template/css.go.html#4883659">isCSSNmchar</a></span><span class="op" id="4889596">(</span><span class="builtintype" id="4889597">rune</span><span class="op" id="4889601">(</span><span class="ident" id="4889602"><a href="/gostd/html/template/css.go.html#4889274">c</a></span><span class="op" id="4889603">)</span><span class="op" id="4889604">)</span>&nbsp;<span class="op" id="4889606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4889612"><a href="/gostd/html/template/css.go.html#4888506">id</a></span>&nbsp;<span class="op" id="4889615">=</span>&nbsp;<span class="builtinfunc" id="4889617">append</span><span class="op" id="4889623">(</span><span class="ident" id="4889624"><a href="/gostd/html/template/css.go.html#4888506">id</a></span><span class="op" id="4889626">,</span>&nbsp;<span class="ident" id="4889628"><a href="/gostd/html/template/css.go.html#4889274">c</a></span><span class="op" id="4889629">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4889634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4889638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4889641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4889644"><a href="/gostd/html/template/css.go.html#4888506">id</a></span>&nbsp;<span class="op" id="4889647">=</span>&nbsp;<span class="ident" id="4889649"><a href="/gostd/html/template/css.go.html#4882841">bytes</a></span><span class="op" id="4889654">.</span><span class="ident" id="4889655"><a href="/gostd/bytes/bytes.go.html#1405925">ToLower</a></span><span class="op" id="4889662">(</span><span class="ident" id="4889663"><a href="/gostd/html/template/css.go.html#4888506">id</a></span><span class="op" id="4889665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4889668">if</span>&nbsp;<span class="ident" id="4889671"><a href="/gostd/html/template/css.go.html#4882841">bytes</a></span><span class="op" id="4889676">.</span><span class="ident" id="4889677"><a href="/gostd/bytes/bytes.go.html#1397659">Index</a></span><span class="op" id="4889682">(</span><span class="ident" id="4889683"><a href="/gostd/html/template/css.go.html#4888506">id</a></span><span class="op" id="4889685">,</span>&nbsp;<span class="ident" id="4889687"><a href="/gostd/html/template/css.go.html#4887988">expressionBytes</a></span><span class="op" id="4889702">)</span>&nbsp;<span class="op" id="4889704">!=</span>&nbsp;<span class="op" id="4889707">-</span><span class="num" id="4889708">1</span>&nbsp;<span class="op" id="4889710">||</span>&nbsp;<span class="ident" id="4889713"><a href="/gostd/html/template/css.go.html#4882841">bytes</a></span><span class="op" id="4889718">.</span><span class="ident" id="4889719"><a href="/gostd/bytes/bytes.go.html#1397659">Index</a></span><span class="op" id="4889724">(</span><span class="ident" id="4889725"><a href="/gostd/html/template/css.go.html#4888506">id</a></span><span class="op" id="4889727">,</span>&nbsp;<span class="ident" id="4889729"><a href="/gostd/html/template/css.go.html#4888031">mozBindingBytes</a></span><span class="op" id="4889744">)</span>&nbsp;<span class="op" id="4889746">!=</span>&nbsp;<span class="op" id="4889749">-</span><span class="num" id="4889750">1</span>&nbsp;<span class="op" id="4889752">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4889756">return</span>&nbsp;<span class="ident" id="4889763"><a href="/gostd/html/template/escape.go.html#4907571">filterFailsafe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4889779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4889782">return</span>&nbsp;<span class="builtintype" id="4889789">string</span><span class="op" id="4889795">(</span><span class="ident" id="4889796"><a href="/gostd/html/template/css.go.html#4888503">b</a></span><span class="op" id="4889797">)</span><br>
<span class="lineno"></span><span class="op" id="4889799">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
