<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1481509">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1481565">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1481619">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1481670">//&nbsp;Network&nbsp;service&nbsp;port&nbsp;manipulations</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1481709">package</span>&nbsp;<span class="ident" id="1481717">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1481722">//&nbsp;parsePort&nbsp;parses&nbsp;port&nbsp;as&nbsp;a&nbsp;network&nbsp;service&nbsp;port&nbsp;number&nbsp;for&nbsp;both</span><br>
<span class="lineno">10</span><span class="comment" id="1481789">//&nbsp;TCP&nbsp;and&nbsp;UDP.</span><br>
<span class="lineno"></span><span class="keyword" id="1481805">func</span>&nbsp;<span class="ident" id="1481810">parsePort</span><span class="op" id="1481819">(</span><span class="ident" id="1481820">net</span><span class="op" id="1481823">,</span>&nbsp;<span class="ident" id="1481825">port</span>&nbsp;<span class="builtintype" id="1481830">string</span><span class="op" id="1481836">)</span>&nbsp;<span class="op" id="1481838">(</span><span class="builtintype" id="1481839">int</span><span class="op" id="1481842">,</span>&nbsp;<span class="builtintype" id="1481844">error</span><span class="op" id="1481849">)</span>&nbsp;<span class="op" id="1481851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1481854">p</span><span class="op" id="1481855">,</span>&nbsp;<span class="ident" id="1481857">i</span><span class="op" id="1481858">,</span>&nbsp;<span class="ident" id="1481860">ok</span>&nbsp;<span class="op" id="1481863">:=</span>&nbsp;<span class="ident" id="1481866"><a href="/net/parse.go.html#1477870">dtoi</a></span><span class="op" id="1481870">(</span><span class="ident" id="1481871"><a href="/net/port.go.html#1481825">port</a></span><span class="op" id="1481875">,</span>&nbsp;<span class="num" id="1481877">0</span><span class="op" id="1481878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1481881">if</span>&nbsp;<span class="op" id="1481884">!</span><span class="ident" id="1481885"><a href="/net/port.go.html#1481860">ok</a></span>&nbsp;<span class="op" id="1481888">||</span>&nbsp;<span class="ident" id="1481891"><a href="/net/port.go.html#1481857">i</a></span>&nbsp;<span class="op" id="1481893">!=</span>&nbsp;<span class="builtinfunc" id="1481896">len</span><span class="op" id="1481899">(</span><span class="ident" id="1481900"><a href="/net/port.go.html#1481825">port</a></span><span class="op" id="1481904">)</span>&nbsp;<span class="op" id="1481906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1481910">var</span>&nbsp;<span class="ident" id="1481914">err</span>&nbsp;<span class="builtintype" id="1481918">error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1481926"><a href="/net/port.go.html#1481854">p</a></span><span class="op" id="1481927">,</span>&nbsp;<span class="ident" id="1481929"><a href="/net/port.go.html#1481914">err</a></span>&nbsp;<span class="op" id="1481933">=</span>&nbsp;<span class="ident" id="1481935"><a href="/net/lookup.go.html#1456793">LookupPort</a></span><span class="op" id="1481945">(</span><span class="ident" id="1481946"><a href="/net/port.go.html#1481820">net</a></span><span class="op" id="1481949">,</span>&nbsp;<span class="ident" id="1481951"><a href="/net/port.go.html#1481825">port</a></span><span class="op" id="1481955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1481959">if</span>&nbsp;<span class="ident" id="1481962"><a href="/net/port.go.html#1481914">err</a></span>&nbsp;<span class="op" id="1481966">!=</span>&nbsp;<span class="ident" id="1481969">nil</span>&nbsp;<span class="op" id="1481973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1481978">return</span>&nbsp;<span class="num" id="1481985">0</span><span class="op" id="1481986">,</span>&nbsp;<span class="ident" id="1481988"><a href="/net/port.go.html#1481914">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1481994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1481997">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1482000">if</span>&nbsp;<span class="ident" id="1482003"><a href="/net/port.go.html#1481854">p</a></span>&nbsp;<span class="op" id="1482005">&lt;</span>&nbsp;<span class="num" id="1482007">0</span>&nbsp;<span class="op" id="1482009">||</span>&nbsp;<span class="ident" id="1482012"><a href="/net/port.go.html#1481854">p</a></span>&nbsp;<span class="op" id="1482014">&gt;</span>&nbsp;<span class="num" id="1482016">0xFFFF</span>&nbsp;<span class="op" id="1482023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1482027">return</span>&nbsp;<span class="num" id="1482034">0</span><span class="op" id="1482035">,</span>&nbsp;<span class="op" id="1482037">&amp;</span><span class="ident" id="1482038"><a href="/net/net.go.html#1473565">AddrError</a></span><span class="op" id="1482047">{</span><span class="string" id="1482048">&#34;invalid&nbsp;port&#34;</span><span class="op" id="1482062">,</span>&nbsp;<span class="ident" id="1482064"><a href="/net/port.go.html#1481825">port</a></span><span class="op" id="1482068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1482071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1482074">return</span>&nbsp;<span class="ident" id="1482081"><a href="/net/port.go.html#1481854">p</a></span><span class="op" id="1482082">,</span>&nbsp;<span class="ident" id="1482084">nil</span><br>
<span class="lineno"></span><span class="op" id="1482088">}</span>
</div>
</body>
</html>
