<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html" class="current">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3396218">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3396274">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3396328">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3396379">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3396457">package</span>&nbsp;<span class="ident" id="3396465">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3396470">import</span>&nbsp;<span class="op" id="3396477">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3396480">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3396490">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3396496">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3396507">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3396514">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="3396517">func</span>&nbsp;<span class="ident" id="3396522">unixSocket</span><span class="op" id="3396532">(</span><span class="ident" id="3396533">net</span>&nbsp;<span class="builtintype" id="3396537">string</span><span class="op" id="3396543">,</span>&nbsp;<span class="ident" id="3396545">laddr</span><span class="op" id="3396550">,</span>&nbsp;<span class="ident" id="3396552">raddr</span>&nbsp;<span class="ident" id="3396558"><a href="/gostd/net/sock_posix.go.html#3361249">sockaddr</a></span><span class="op" id="3396566">,</span>&nbsp;<span class="ident" id="3396568">mode</span>&nbsp;<span class="builtintype" id="3396573">string</span><span class="op" id="3396579">,</span>&nbsp;<span class="ident" id="3396581">deadline</span>&nbsp;<span class="ident" id="3396590"><a href="/gostd/net/unixsock_posix.go.html#3396507">time</a></span><span class="op" id="3396594">.</span><span class="ident" id="3396595"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="3396599">)</span>&nbsp;<span class="op" id="3396601">(</span><span class="op" id="3396602">*</span><span class="ident" id="3396603"><a href="/gostd/net/fd_unix.go.html#3257361">netFD</a></span><span class="op" id="3396608">,</span>&nbsp;<span class="builtintype" id="3396610">error</span><span class="op" id="3396615">)</span>&nbsp;<span class="op" id="3396617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3396620">var</span>&nbsp;<span class="ident" id="3396624">sotype</span>&nbsp;<span class="builtintype" id="3396631">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3396636">switch</span>&nbsp;<span class="ident" id="3396643"><a href="/gostd/net/unixsock_posix.go.html#3396533">net</a></span>&nbsp;<span class="op" id="3396647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3396650">case</span>&nbsp;<span class="string" id="3396655">&#34;unix&#34;</span><span class="op" id="3396661">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3396665"><a href="/gostd/net/unixsock_posix.go.html#3396624">sotype</a></span>&nbsp;<span class="op" id="3396672">=</span>&nbsp;<span class="ident" id="3396674"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3396681">.</span><span class="ident" id="3396682"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2592030">SOCK_STREAM</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3396695">case</span>&nbsp;<span class="string" id="3396700">&#34;unixgram&#34;</span><span class="op" id="3396710">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3396714"><a href="/gostd/net/unixsock_posix.go.html#3396624">sotype</a></span>&nbsp;<span class="op" id="3396721">=</span>&nbsp;<span class="ident" id="3396723"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3396730">.</span><span class="ident" id="3396731"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2591788">SOCK_DGRAM</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3396743">case</span>&nbsp;<span class="string" id="3396748">&#34;unixpacket&#34;</span><span class="op" id="3396760">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3396764"><a href="/gostd/net/unixsock_posix.go.html#3396624">sotype</a></span>&nbsp;<span class="op" id="3396771">=</span>&nbsp;<span class="ident" id="3396773"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3396780">.</span><span class="ident" id="3396781"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2591990">SOCK_SEQPACKET</a></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3396797">default</span><span class="op" id="3396804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3396808">return</span>&nbsp;<span class="builtintype" id="3396815">nil</span><span class="op" id="3396818">,</span>&nbsp;<span class="ident" id="3396820"><a href="/gostd/net/net.go.html#3342949">UnknownNetworkError</a></span><span class="op" id="3396839">(</span><span class="ident" id="3396840"><a href="/gostd/net/unixsock_posix.go.html#3396533">net</a></span><span class="op" id="3396843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3396846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3396850">switch</span>&nbsp;<span class="ident" id="3396857"><a href="/gostd/net/unixsock_posix.go.html#3396568">mode</a></span>&nbsp;<span class="op" id="3396862">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3396865">case</span>&nbsp;<span class="string" id="3396870">&#34;dial&#34;</span><span class="op" id="3396876">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3396880">if</span>&nbsp;<span class="ident" id="3396883"><a href="/gostd/net/unixsock_posix.go.html#3396545">laddr</a></span>&nbsp;<span class="op" id="3396889">!=</span>&nbsp;<span class="builtintype" id="3396892">nil</span>&nbsp;<span class="op" id="3396896">&amp;&amp;</span>&nbsp;<span class="ident" id="3396899"><a href="/gostd/net/unixsock_posix.go.html#3396545">laddr</a></span><span class="op" id="3396904">.</span><span class="ident" id="3396905"><a href="/gostd/net/sock_posix.go.html#3361446">isWildcard</a></span><span class="op" id="3396915">(</span><span class="op" id="3396916">)</span>&nbsp;<span class="op" id="3396918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3396923"><a href="/gostd/net/unixsock_posix.go.html#3396545">laddr</a></span>&nbsp;<span class="op" id="3396929">=</span>&nbsp;<span class="builtintype" id="3396931">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3396937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3396941">if</span>&nbsp;<span class="ident" id="3396944"><a href="/gostd/net/unixsock_posix.go.html#3396552">raddr</a></span>&nbsp;<span class="op" id="3396950">!=</span>&nbsp;<span class="builtintype" id="3396953">nil</span>&nbsp;<span class="op" id="3396957">&amp;&amp;</span>&nbsp;<span class="ident" id="3396960"><a href="/gostd/net/unixsock_posix.go.html#3396552">raddr</a></span><span class="op" id="3396965">.</span><span class="ident" id="3396966"><a href="/gostd/net/sock_posix.go.html#3361446">isWildcard</a></span><span class="op" id="3396976">(</span><span class="op" id="3396977">)</span>&nbsp;<span class="op" id="3396979">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3396984"><a href="/gostd/net/unixsock_posix.go.html#3396552">raddr</a></span>&nbsp;<span class="op" id="3396990">=</span>&nbsp;<span class="builtintype" id="3396992">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3396998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397002">if</span>&nbsp;<span class="ident" id="3397005"><a href="/gostd/net/unixsock_posix.go.html#3396552">raddr</a></span>&nbsp;<span class="op" id="3397011">==</span>&nbsp;<span class="builtintype" id="3397014">nil</span>&nbsp;<span class="op" id="3397018">&amp;&amp;</span>&nbsp;<span class="op" id="3397021">(</span><span class="ident" id="3397022"><a href="/gostd/net/unixsock_posix.go.html#3396624">sotype</a></span>&nbsp;<span class="op" id="3397029">!=</span>&nbsp;<span class="ident" id="3397032"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3397039">.</span><span class="ident" id="3397040"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2591788">SOCK_DGRAM</a></span>&nbsp;<span class="op" id="3397051">||</span>&nbsp;<span class="ident" id="3397054"><a href="/gostd/net/unixsock_posix.go.html#3396545">laddr</a></span>&nbsp;<span class="op" id="3397060">==</span>&nbsp;<span class="builtintype" id="3397063">nil</span><span class="op" id="3397066">)</span>&nbsp;<span class="op" id="3397068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397073">return</span>&nbsp;<span class="builtintype" id="3397080">nil</span><span class="op" id="3397083">,</span>&nbsp;<span class="ident" id="3397085"><a href="/gostd/net/net.go.html#3341102">errMissingAddress</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3397105">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397108">case</span>&nbsp;<span class="string" id="3397113">&#34;listen&#34;</span><span class="op" id="3397121">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397124">default</span><span class="op" id="3397131">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397135">return</span>&nbsp;<span class="builtintype" id="3397142">nil</span><span class="op" id="3397145">,</span>&nbsp;<span class="ident" id="3397147"><a href="/gostd/net/unixsock_posix.go.html#3396480">errors</a></span><span class="op" id="3397153">.</span><span class="ident" id="3397154"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="3397157">(</span><span class="string" id="3397158">&#34;unknown&nbsp;mode:&nbsp;&#34;</span>&nbsp;<span class="op" id="3397175">+</span>&nbsp;<span class="ident" id="3397177"><a href="/gostd/net/unixsock_posix.go.html#3396568">mode</a></span><span class="op" id="3397181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3397184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3397188">fd</span><span class="op" id="3397190">,</span>&nbsp;<span class="ident" id="3397192">err</span>&nbsp;<span class="op" id="3397196">:=</span>&nbsp;<span class="ident" id="3397199"><a href="/gostd/net/sock_posix.go.html#3361809">socket</a></span><span class="op" id="3397205">(</span><span class="ident" id="3397206"><a href="/gostd/net/unixsock_posix.go.html#3396533">net</a></span><span class="op" id="3397209">,</span>&nbsp;<span class="ident" id="3397211"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3397218">.</span><span class="ident" id="3397219"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2552178">AF_UNIX</a></span><span class="op" id="3397226">,</span>&nbsp;<span class="ident" id="3397228"><a href="/gostd/net/unixsock_posix.go.html#3396624">sotype</a></span><span class="op" id="3397234">,</span>&nbsp;<span class="num" id="3397236">0</span><span class="op" id="3397237">,</span>&nbsp;<span class="builtintype" id="3397239">false</span><span class="op" id="3397244">,</span>&nbsp;<span class="ident" id="3397246"><a href="/gostd/net/unixsock_posix.go.html#3396545">laddr</a></span><span class="op" id="3397251">,</span>&nbsp;<span class="ident" id="3397253"><a href="/gostd/net/unixsock_posix.go.html#3396552">raddr</a></span><span class="op" id="3397258">,</span>&nbsp;<span class="ident" id="3397260"><a href="/gostd/net/unixsock_posix.go.html#3396581">deadline</a></span><span class="op" id="3397268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397271">if</span>&nbsp;<span class="ident" id="3397274"><a href="/gostd/net/unixsock_posix.go.html#3397192">err</a></span>&nbsp;<span class="op" id="3397278">!=</span>&nbsp;<span class="builtintype" id="3397281">nil</span>&nbsp;<span class="op" id="3397285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397289">return</span>&nbsp;<span class="builtintype" id="3397296">nil</span><span class="op" id="3397299">,</span>&nbsp;<span class="ident" id="3397301"><a href="/gostd/net/unixsock_posix.go.html#3397192">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3397306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397309">return</span>&nbsp;<span class="ident" id="3397316"><a href="/gostd/net/unixsock_posix.go.html#3397188">fd</a></span><span class="op" id="3397318">,</span>&nbsp;<span class="builtintype" id="3397320">nil</span><br>
<span class="lineno">50</span><span class="op" id="3397324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3397327">func</span>&nbsp;<span class="ident" id="3397332">sockaddrToUnix</span><span class="op" id="3397346">(</span><span class="ident" id="3397347">sa</span>&nbsp;<span class="ident" id="3397350"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3397357">.</span><span class="ident" id="3397358"><a href="/gostd/syscall/syscall_unix.go.html#2547075">Sockaddr</a></span><span class="op" id="3397366">)</span>&nbsp;<span class="ident" id="3397368"><a href="/gostd/net/net.go.html#3334179">Addr</a></span>&nbsp;<span class="op" id="3397373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397376">if</span>&nbsp;<span class="ident" id="3397379">s</span><span class="op" id="3397380">,</span>&nbsp;<span class="ident" id="3397382">ok</span>&nbsp;<span class="op" id="3397385">:=</span>&nbsp;<span class="ident" id="3397388"><a href="/gostd/net/unixsock_posix.go.html#3397347">sa</a></span><span class="op" id="3397390">.</span><span class="op" id="3397391">(</span><span class="op" id="3397392">*</span><span class="ident" id="3397393"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3397400">.</span><span class="ident" id="3397401"><a href="/gostd/syscall/syscall_unix.go.html#2547383">SockaddrUnix</a></span><span class="op" id="3397413">)</span><span class="op" id="3397414">;</span>&nbsp;<span class="ident" id="3397416"><a href="/gostd/net/unixsock_posix.go.html#3397382">ok</a></span>&nbsp;<span class="op" id="3397419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397423">return</span>&nbsp;<span class="op" id="3397430">&amp;</span><span class="ident" id="3397431"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3397439">{</span><span class="ident" id="3397440"><a href="/gostd/net/unixsock.go.html#3395520">Name</a></span><span class="op" id="3397444">:</span>&nbsp;<span class="ident" id="3397446"><a href="/gostd/net/unixsock_posix.go.html#3397379">s</a></span><span class="op" id="3397447">.</span><span class="ident" id="3397448"><a href="/gostd/syscall/syscall_unix.go.html#2547406">Name</a></span><span class="op" id="3397452">,</span>&nbsp;<span class="ident" id="3397454"><a href="/gostd/net/unixsock.go.html#3395533">Net</a></span><span class="op" id="3397457">:</span>&nbsp;<span class="string" id="3397459">&#34;unix&#34;</span><span class="op" id="3397465">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3397468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397471">return</span>&nbsp;<span class="builtintype" id="3397478">nil</span><br>
<span class="lineno"></span><span class="op" id="3397482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3397485">func</span>&nbsp;<span class="ident" id="3397490">sockaddrToUnixgram</span><span class="op" id="3397508">(</span><span class="ident" id="3397509">sa</span>&nbsp;<span class="ident" id="3397512"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3397519">.</span><span class="ident" id="3397520"><a href="/gostd/syscall/syscall_unix.go.html#2547075">Sockaddr</a></span><span class="op" id="3397528">)</span>&nbsp;<span class="ident" id="3397530"><a href="/gostd/net/net.go.html#3334179">Addr</a></span>&nbsp;<span class="op" id="3397535">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397538">if</span>&nbsp;<span class="ident" id="3397541">s</span><span class="op" id="3397542">,</span>&nbsp;<span class="ident" id="3397544">ok</span>&nbsp;<span class="op" id="3397547">:=</span>&nbsp;<span class="ident" id="3397550"><a href="/gostd/net/unixsock_posix.go.html#3397509">sa</a></span><span class="op" id="3397552">.</span><span class="op" id="3397553">(</span><span class="op" id="3397554">*</span><span class="ident" id="3397555"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3397562">.</span><span class="ident" id="3397563"><a href="/gostd/syscall/syscall_unix.go.html#2547383">SockaddrUnix</a></span><span class="op" id="3397575">)</span><span class="op" id="3397576">;</span>&nbsp;<span class="ident" id="3397578"><a href="/gostd/net/unixsock_posix.go.html#3397544">ok</a></span>&nbsp;<span class="op" id="3397581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397585">return</span>&nbsp;<span class="op" id="3397592">&amp;</span><span class="ident" id="3397593"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3397601">{</span><span class="ident" id="3397602"><a href="/gostd/net/unixsock.go.html#3395520">Name</a></span><span class="op" id="3397606">:</span>&nbsp;<span class="ident" id="3397608"><a href="/gostd/net/unixsock_posix.go.html#3397541">s</a></span><span class="op" id="3397609">.</span><span class="ident" id="3397610"><a href="/gostd/syscall/syscall_unix.go.html#2547406">Name</a></span><span class="op" id="3397614">,</span>&nbsp;<span class="ident" id="3397616"><a href="/gostd/net/unixsock.go.html#3395533">Net</a></span><span class="op" id="3397619">:</span>&nbsp;<span class="string" id="3397621">&#34;unixgram&#34;</span><span class="op" id="3397631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3397634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397637">return</span>&nbsp;<span class="builtintype" id="3397644">nil</span><br>
<span class="lineno"></span><span class="op" id="3397648">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="3397651">func</span>&nbsp;<span class="ident" id="3397656">sockaddrToUnixpacket</span><span class="op" id="3397676">(</span><span class="ident" id="3397677">sa</span>&nbsp;<span class="ident" id="3397680"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3397687">.</span><span class="ident" id="3397688"><a href="/gostd/syscall/syscall_unix.go.html#2547075">Sockaddr</a></span><span class="op" id="3397696">)</span>&nbsp;<span class="ident" id="3397698"><a href="/gostd/net/net.go.html#3334179">Addr</a></span>&nbsp;<span class="op" id="3397703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397706">if</span>&nbsp;<span class="ident" id="3397709">s</span><span class="op" id="3397710">,</span>&nbsp;<span class="ident" id="3397712">ok</span>&nbsp;<span class="op" id="3397715">:=</span>&nbsp;<span class="ident" id="3397718"><a href="/gostd/net/unixsock_posix.go.html#3397677">sa</a></span><span class="op" id="3397720">.</span><span class="op" id="3397721">(</span><span class="op" id="3397722">*</span><span class="ident" id="3397723"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3397730">.</span><span class="ident" id="3397731"><a href="/gostd/syscall/syscall_unix.go.html#2547383">SockaddrUnix</a></span><span class="op" id="3397743">)</span><span class="op" id="3397744">;</span>&nbsp;<span class="ident" id="3397746"><a href="/gostd/net/unixsock_posix.go.html#3397712">ok</a></span>&nbsp;<span class="op" id="3397749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397753">return</span>&nbsp;<span class="op" id="3397760">&amp;</span><span class="ident" id="3397761"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3397769">{</span><span class="ident" id="3397770"><a href="/gostd/net/unixsock.go.html#3395520">Name</a></span><span class="op" id="3397774">:</span>&nbsp;<span class="ident" id="3397776"><a href="/gostd/net/unixsock_posix.go.html#3397709">s</a></span><span class="op" id="3397777">.</span><span class="ident" id="3397778"><a href="/gostd/syscall/syscall_unix.go.html#2547406">Name</a></span><span class="op" id="3397782">,</span>&nbsp;<span class="ident" id="3397784"><a href="/gostd/net/unixsock.go.html#3395533">Net</a></span><span class="op" id="3397787">:</span>&nbsp;<span class="string" id="3397789">&#34;unixpacket&#34;</span><span class="op" id="3397801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3397804">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397807">return</span>&nbsp;<span class="builtintype" id="3397814">nil</span><br>
<span class="lineno"></span><span class="op" id="3397818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3397821">func</span>&nbsp;<span class="ident" id="3397826">sotypeToNet</span><span class="op" id="3397837">(</span><span class="ident" id="3397838">sotype</span>&nbsp;<span class="builtintype" id="3397845">int</span><span class="op" id="3397848">)</span>&nbsp;<span class="builtintype" id="3397850">string</span>&nbsp;<span class="op" id="3397857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397860">switch</span>&nbsp;<span class="ident" id="3397867"><a href="/gostd/net/unixsock_posix.go.html#3397838">sotype</a></span>&nbsp;<span class="op" id="3397874">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397877">case</span>&nbsp;<span class="ident" id="3397882"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3397889">.</span><span class="ident" id="3397890"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2592030">SOCK_STREAM</a></span><span class="op" id="3397901">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397905">return</span>&nbsp;<span class="string" id="3397912">&#34;unix&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397920">case</span>&nbsp;<span class="ident" id="3397925"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3397932">.</span><span class="ident" id="3397933"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2591788">SOCK_DGRAM</a></span><span class="op" id="3397943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397947">return</span>&nbsp;<span class="string" id="3397954">&#34;unixgram&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397966">case</span>&nbsp;<span class="ident" id="3397971"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3397978">.</span><span class="ident" id="3397979"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2591990">SOCK_SEQPACKET</a></span><span class="op" id="3397993">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3397997">return</span>&nbsp;<span class="string" id="3398004">&#34;unixpacket&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3398018">default</span><span class="op" id="3398025">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3398029">panic</span><span class="op" id="3398034">(</span><span class="string" id="3398035">&#34;sotypeToNet&nbsp;unknown&nbsp;socket&nbsp;type&#34;</span><span class="op" id="3398068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3398071">}</span><br>
<span class="lineno"></span><span class="op" id="3398073">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="keyword" id="3398076">func</span>&nbsp;<span class="op" id="3398081">(</span><span class="ident" id="3398082">a</span>&nbsp;<span class="op" id="3398084">*</span><span class="ident" id="3398085"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3398093">)</span>&nbsp;<span class="ident" id="3398095">family</span><span class="op" id="3398101">(</span><span class="op" id="3398102">)</span>&nbsp;<span class="builtintype" id="3398104">int</span>&nbsp;<span class="op" id="3398108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3398111">return</span>&nbsp;<span class="ident" id="3398118"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3398125">.</span><span class="ident" id="3398126"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2552178">AF_UNIX</a></span><br>
<span class="lineno"></span><span class="op" id="3398134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="3398137">func</span>&nbsp;<span class="op" id="3398142">(</span><span class="ident" id="3398143">a</span>&nbsp;<span class="op" id="3398145">*</span><span class="ident" id="3398146"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3398154">)</span>&nbsp;<span class="ident" id="3398156">isWildcard</span><span class="op" id="3398166">(</span><span class="op" id="3398167">)</span>&nbsp;<span class="builtintype" id="3398169">bool</span>&nbsp;<span class="op" id="3398174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3398177">return</span>&nbsp;<span class="ident" id="3398184"><a href="/gostd/net/unixsock_posix.go.html#3398143">a</a></span>&nbsp;<span class="op" id="3398186">==</span>&nbsp;<span class="builtintype" id="3398189">nil</span>&nbsp;<span class="op" id="3398193">||</span>&nbsp;<span class="ident" id="3398196"><a href="/gostd/net/unixsock_posix.go.html#3398143">a</a></span><span class="op" id="3398197">.</span><span class="ident" id="3398198"><a href="/gostd/net/unixsock.go.html#3395520">Name</a></span>&nbsp;<span class="op" id="3398203">==</span>&nbsp;<span class="string" id="3398206">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3398209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3398212">func</span>&nbsp;<span class="op" id="3398217">(</span><span class="ident" id="3398218">a</span>&nbsp;<span class="op" id="3398220">*</span><span class="ident" id="3398221"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3398229">)</span>&nbsp;<span class="ident" id="3398231">sockaddr</span><span class="op" id="3398239">(</span><span class="ident" id="3398240">family</span>&nbsp;<span class="builtintype" id="3398247">int</span><span class="op" id="3398250">)</span>&nbsp;<span class="op" id="3398252">(</span><span class="ident" id="3398253"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3398260">.</span><span class="ident" id="3398261"><a href="/gostd/syscall/syscall_unix.go.html#2547075">Sockaddr</a></span><span class="op" id="3398269">,</span>&nbsp;<span class="builtintype" id="3398271">error</span><span class="op" id="3398276">)</span>&nbsp;<span class="op" id="3398278">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3398281">if</span>&nbsp;<span class="ident" id="3398284"><a href="/gostd/net/unixsock_posix.go.html#3398218">a</a></span>&nbsp;<span class="op" id="3398286">==</span>&nbsp;<span class="builtintype" id="3398289">nil</span>&nbsp;<span class="op" id="3398293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3398297">return</span>&nbsp;<span class="builtintype" id="3398304">nil</span><span class="op" id="3398307">,</span>&nbsp;<span class="builtintype" id="3398309">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3398314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3398317">return</span>&nbsp;<span class="op" id="3398324">&amp;</span><span class="ident" id="3398325"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3398332">.</span><span class="ident" id="3398333"><a href="/gostd/syscall/syscall_unix.go.html#2547383">SockaddrUnix</a></span><span class="op" id="3398345">{</span><span class="ident" id="3398346"><a href="/gostd/syscall/syscall_unix.go.html#2547406">Name</a></span><span class="op" id="3398350">:</span>&nbsp;<span class="ident" id="3398352"><a href="/gostd/net/unixsock_posix.go.html#3398218">a</a></span><span class="op" id="3398353">.</span><span class="ident" id="3398354"><a href="/gostd/net/unixsock.go.html#3395520">Name</a></span><span class="op" id="3398358">}</span><span class="op" id="3398359">,</span>&nbsp;<span class="builtintype" id="3398361">nil</span><br>
<span class="lineno"></span><span class="op" id="3398365">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="3398368">//&nbsp;UnixConn&nbsp;is&nbsp;an&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Conn&nbsp;interface&nbsp;for&nbsp;connections</span><br>
<span class="lineno"></span><span class="comment" id="3398439">//&nbsp;to&nbsp;Unix&nbsp;domain&nbsp;sockets.</span><br>
<span class="lineno"></span><span class="keyword" id="3398466">type</span>&nbsp;<span class="ident" id="3398471">UnixConn</span>&nbsp;<span class="keyword" id="3398480">struct</span>&nbsp;<span class="op" id="3398487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398490"><a href="/gostd/net/net.go.html#3336184">conn</a></span><br>
<span class="lineno">105</span><span class="op" id="3398495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3398498">func</span>&nbsp;<span class="ident" id="3398503">newUnixConn</span><span class="op" id="3398514">(</span><span class="ident" id="3398515">fd</span>&nbsp;<span class="op" id="3398518">*</span><span class="ident" id="3398519"><a href="/gostd/net/fd_unix.go.html#3257361">netFD</a></span><span class="op" id="3398524">)</span>&nbsp;<span class="op" id="3398526">*</span><span class="ident" id="3398527"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span>&nbsp;<span class="op" id="3398536">{</span>&nbsp;<span class="keyword" id="3398538">return</span>&nbsp;<span class="op" id="3398545">&amp;</span><span class="ident" id="3398546"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3398554">{</span><span class="ident" id="3398555"><a href="/gostd/net/net.go.html#3336184">conn</a></span><span class="op" id="3398559">{</span><span class="ident" id="3398560"><a href="/gostd/net/unixsock_posix.go.html#3398515">fd</a></span><span class="op" id="3398562">}</span><span class="op" id="3398563">}</span>&nbsp;<span class="op" id="3398565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3398568">//&nbsp;ReadFromUnix&nbsp;reads&nbsp;a&nbsp;packet&nbsp;from&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b.&nbsp;&nbsp;It</span><br>
<span class="lineno">110</span><span class="comment" id="3398639">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b&nbsp;and&nbsp;the&nbsp;source&nbsp;address&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3398710">//&nbsp;the&nbsp;packet.</span><br>
<span class="lineno"></span><span class="comment" id="3398725">//</span><br>
<span class="lineno"></span><span class="comment" id="3398728">//&nbsp;ReadFromUnix&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;an&nbsp;error&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="3398793">//&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and</span><br>
<span class="lineno">115</span><span class="comment" id="3398860">//&nbsp;SetReadDeadline.</span><br>
<span class="lineno"></span><span class="keyword" id="3398880">func</span>&nbsp;<span class="op" id="3398885">(</span><span class="ident" id="3398886">c</span>&nbsp;<span class="op" id="3398888">*</span><span class="ident" id="3398889"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3398897">)</span>&nbsp;<span class="ident" id="3398899">ReadFromUnix</span><span class="op" id="3398911">(</span><span class="ident" id="3398912">b</span>&nbsp;<span class="op" id="3398914">[</span><span class="op" id="3398915">]</span><span class="builtintype" id="3398916">byte</span><span class="op" id="3398920">)</span>&nbsp;<span class="op" id="3398922">(</span><span class="ident" id="3398923">n</span>&nbsp;<span class="builtintype" id="3398925">int</span><span class="op" id="3398928">,</span>&nbsp;<span class="ident" id="3398930">addr</span>&nbsp;<span class="op" id="3398935">*</span><span class="ident" id="3398936"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3398944">,</span>&nbsp;<span class="ident" id="3398946">err</span>&nbsp;<span class="builtintype" id="3398950">error</span><span class="op" id="3398955">)</span>&nbsp;<span class="op" id="3398957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3398960">if</span>&nbsp;<span class="op" id="3398963">!</span><span class="ident" id="3398964"><a href="/gostd/net/unixsock_posix.go.html#3398886">c</a></span><span class="op" id="3398965">.</span><span class="ident" id="3398966"><a href="/gostd/net/net.go.html#3336227">ok</a></span><span class="op" id="3398968">(</span><span class="op" id="3398969">)</span>&nbsp;<span class="op" id="3398971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3398975">return</span>&nbsp;<span class="num" id="3398982">0</span><span class="op" id="3398983">,</span>&nbsp;<span class="builtintype" id="3398985">nil</span><span class="op" id="3398988">,</span>&nbsp;<span class="ident" id="3398990"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3398997">.</span><span class="ident" id="3398998"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3399006">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399009"><a href="/gostd/net/unixsock_posix.go.html#3398923">n</a></span><span class="op" id="3399010">,</span>&nbsp;<span class="ident" id="3399012">sa</span><span class="op" id="3399014">,</span>&nbsp;<span class="ident" id="3399016"><a href="/gostd/net/unixsock_posix.go.html#3398946">err</a></span>&nbsp;<span class="op" id="3399020">:=</span>&nbsp;<span class="ident" id="3399023"><a href="/gostd/net/unixsock_posix.go.html#3398886">c</a></span><span class="op" id="3399024">.</span><span class="ident" id="3399025"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3399027">.</span><span class="ident" id="3399028"><a href="/gostd/net/fd_unix.go.html#3262995">readFrom</a></span><span class="op" id="3399036">(</span><span class="ident" id="3399037"><a href="/gostd/net/unixsock_posix.go.html#3398912">b</a></span><span class="op" id="3399038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399041">switch</span>&nbsp;<span class="ident" id="3399048">sa</span>&nbsp;<span class="op" id="3399051">:=</span>&nbsp;<span class="ident" id="3399054"><a href="/gostd/net/unixsock_posix.go.html#3399012">sa</a></span><span class="op" id="3399056">.</span><span class="op" id="3399057">(</span><span class="keyword" id="3399058">type</span><span class="op" id="3399062">)</span>&nbsp;<span class="op" id="3399064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399067">case</span>&nbsp;<span class="op" id="3399072">*</span><span class="ident" id="3399073"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3399080">.</span><span class="ident" id="3399081"><a href="/gostd/syscall/syscall_unix.go.html#2547383">SockaddrUnix</a></span><span class="op" id="3399093">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399097">if</span>&nbsp;<span class="ident" id="3399100"><a href="/gostd/net/unixsock_posix.go.html#3399048">sa</a></span><span class="op" id="3399102">.</span><span class="ident" id="3399103"><a href="/gostd/syscall/syscall_unix.go.html#2547406">Name</a></span>&nbsp;<span class="op" id="3399108">!=</span>&nbsp;<span class="string" id="3399111">&#34;&#34;</span>&nbsp;<span class="op" id="3399114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399119"><a href="/gostd/net/unixsock_posix.go.html#3398930">addr</a></span>&nbsp;<span class="op" id="3399124">=</span>&nbsp;<span class="op" id="3399126">&amp;</span><span class="ident" id="3399127"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3399135">{</span><span class="ident" id="3399136"><a href="/gostd/net/unixsock.go.html#3395520">Name</a></span><span class="op" id="3399140">:</span>&nbsp;<span class="ident" id="3399142"><a href="/gostd/net/unixsock_posix.go.html#3399048">sa</a></span><span class="op" id="3399144">.</span><span class="ident" id="3399145"><a href="/gostd/syscall/syscall_unix.go.html#2547406">Name</a></span><span class="op" id="3399149">,</span>&nbsp;<span class="ident" id="3399151"><a href="/gostd/net/unixsock.go.html#3395533">Net</a></span><span class="op" id="3399154">:</span>&nbsp;<span class="ident" id="3399156"><a href="/gostd/net/unixsock_posix.go.html#3397826">sotypeToNet</a></span><span class="op" id="3399167">(</span><span class="ident" id="3399168"><a href="/gostd/net/unixsock_posix.go.html#3398886">c</a></span><span class="op" id="3399169">.</span><span class="ident" id="3399170"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3399172">.</span><span class="ident" id="3399173"><a href="/gostd/net/fd_unix.go.html#3257527">sotype</a></span><span class="op" id="3399179">)</span><span class="op" id="3399180">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3399184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3399187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399190">return</span><br>
<span class="lineno"></span><span class="op" id="3399197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="3399200">//&nbsp;ReadFrom&nbsp;implements&nbsp;the&nbsp;PacketConn&nbsp;ReadFrom&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3399255">func</span>&nbsp;<span class="op" id="3399260">(</span><span class="ident" id="3399261">c</span>&nbsp;<span class="op" id="3399263">*</span><span class="ident" id="3399264"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3399272">)</span>&nbsp;<span class="ident" id="3399274">ReadFrom</span><span class="op" id="3399282">(</span><span class="ident" id="3399283">b</span>&nbsp;<span class="op" id="3399285">[</span><span class="op" id="3399286">]</span><span class="builtintype" id="3399287">byte</span><span class="op" id="3399291">)</span>&nbsp;<span class="op" id="3399293">(</span><span class="builtintype" id="3399294">int</span><span class="op" id="3399297">,</span>&nbsp;<span class="ident" id="3399299"><a href="/gostd/net/net.go.html#3334179">Addr</a></span><span class="op" id="3399303">,</span>&nbsp;<span class="builtintype" id="3399305">error</span><span class="op" id="3399310">)</span>&nbsp;<span class="op" id="3399312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399315">if</span>&nbsp;<span class="op" id="3399318">!</span><span class="ident" id="3399319"><a href="/gostd/net/unixsock_posix.go.html#3399261">c</a></span><span class="op" id="3399320">.</span><span class="ident" id="3399321"><a href="/gostd/net/net.go.html#3336227">ok</a></span><span class="op" id="3399323">(</span><span class="op" id="3399324">)</span>&nbsp;<span class="op" id="3399326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399330">return</span>&nbsp;<span class="num" id="3399337">0</span><span class="op" id="3399338">,</span>&nbsp;<span class="builtintype" id="3399340">nil</span><span class="op" id="3399343">,</span>&nbsp;<span class="ident" id="3399345"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3399352">.</span><span class="ident" id="3399353"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3399361">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399364">n</span><span class="op" id="3399365">,</span>&nbsp;<span class="ident" id="3399367">addr</span><span class="op" id="3399371">,</span>&nbsp;<span class="ident" id="3399373">err</span>&nbsp;<span class="op" id="3399377">:=</span>&nbsp;<span class="ident" id="3399380"><a href="/gostd/net/unixsock_posix.go.html#3399261">c</a></span><span class="op" id="3399381">.</span><span class="ident" id="3399382"><a href="/gostd/net/unixsock_posix.go.html#3398899">ReadFromUnix</a></span><span class="op" id="3399394">(</span><span class="ident" id="3399395"><a href="/gostd/net/unixsock_posix.go.html#3399283">b</a></span><span class="op" id="3399396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399399">return</span>&nbsp;<span class="ident" id="3399406"><a href="/gostd/net/unixsock_posix.go.html#3399364">n</a></span><span class="op" id="3399407">,</span>&nbsp;<span class="ident" id="3399409"><a href="/gostd/net/unixsock_posix.go.html#3399367">addr</a></span><span class="op" id="3399413">.</span><span class="ident" id="3399414"><a href="/gostd/net/unixsock.go.html#3395798">toAddr</a></span><span class="op" id="3399420">(</span><span class="op" id="3399421">)</span><span class="op" id="3399422">,</span>&nbsp;<span class="ident" id="3399424"><a href="/gostd/net/unixsock_posix.go.html#3399373">err</a></span><br>
<span class="lineno"></span><span class="op" id="3399428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3399431">//&nbsp;ReadMsgUnix&nbsp;reads&nbsp;a&nbsp;packet&nbsp;from&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b&nbsp;and</span><br>
<span class="lineno">140</span><span class="comment" id="3399500">//&nbsp;the&nbsp;associated&nbsp;out-of-band&nbsp;data&nbsp;into&nbsp;oob.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3399571">//&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b,&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;oob,&nbsp;the&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="3399642">//&nbsp;that&nbsp;were&nbsp;set&nbsp;on&nbsp;the&nbsp;packet,&nbsp;and&nbsp;the&nbsp;source&nbsp;address&nbsp;of&nbsp;the&nbsp;packet.</span><br>
<span class="lineno"></span><span class="keyword" id="3399712">func</span>&nbsp;<span class="op" id="3399717">(</span><span class="ident" id="3399718">c</span>&nbsp;<span class="op" id="3399720">*</span><span class="ident" id="3399721"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3399729">)</span>&nbsp;<span class="ident" id="3399731">ReadMsgUnix</span><span class="op" id="3399742">(</span><span class="ident" id="3399743">b</span><span class="op" id="3399744">,</span>&nbsp;<span class="ident" id="3399746">oob</span>&nbsp;<span class="op" id="3399750">[</span><span class="op" id="3399751">]</span><span class="builtintype" id="3399752">byte</span><span class="op" id="3399756">)</span>&nbsp;<span class="op" id="3399758">(</span><span class="ident" id="3399759">n</span><span class="op" id="3399760">,</span>&nbsp;<span class="ident" id="3399762">oobn</span><span class="op" id="3399766">,</span>&nbsp;<span class="ident" id="3399768">flags</span>&nbsp;<span class="builtintype" id="3399774">int</span><span class="op" id="3399777">,</span>&nbsp;<span class="ident" id="3399779">addr</span>&nbsp;<span class="op" id="3399784">*</span><span class="ident" id="3399785"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3399793">,</span>&nbsp;<span class="ident" id="3399795">err</span>&nbsp;<span class="builtintype" id="3399799">error</span><span class="op" id="3399804">)</span>&nbsp;<span class="op" id="3399806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399809">if</span>&nbsp;<span class="op" id="3399812">!</span><span class="ident" id="3399813"><a href="/gostd/net/unixsock_posix.go.html#3399718">c</a></span><span class="op" id="3399814">.</span><span class="ident" id="3399815"><a href="/gostd/net/net.go.html#3336227">ok</a></span><span class="op" id="3399817">(</span><span class="op" id="3399818">)</span>&nbsp;<span class="op" id="3399820">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399824">return</span>&nbsp;<span class="num" id="3399831">0</span><span class="op" id="3399832">,</span>&nbsp;<span class="num" id="3399834">0</span><span class="op" id="3399835">,</span>&nbsp;<span class="num" id="3399837">0</span><span class="op" id="3399838">,</span>&nbsp;<span class="builtintype" id="3399840">nil</span><span class="op" id="3399843">,</span>&nbsp;<span class="ident" id="3399845"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3399852">.</span><span class="ident" id="3399853"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3399861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399864"><a href="/gostd/net/unixsock_posix.go.html#3399759">n</a></span><span class="op" id="3399865">,</span>&nbsp;<span class="ident" id="3399867"><a href="/gostd/net/unixsock_posix.go.html#3399762">oobn</a></span><span class="op" id="3399871">,</span>&nbsp;<span class="ident" id="3399873"><a href="/gostd/net/unixsock_posix.go.html#3399768">flags</a></span><span class="op" id="3399878">,</span>&nbsp;<span class="ident" id="3399880">sa</span><span class="op" id="3399882">,</span>&nbsp;<span class="ident" id="3399884"><a href="/gostd/net/unixsock_posix.go.html#3399795">err</a></span>&nbsp;<span class="op" id="3399888">:=</span>&nbsp;<span class="ident" id="3399891"><a href="/gostd/net/unixsock_posix.go.html#3399718">c</a></span><span class="op" id="3399892">.</span><span class="ident" id="3399893"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3399895">.</span><span class="ident" id="3399896"><a href="/gostd/net/fd_unix.go.html#3263587">readMsg</a></span><span class="op" id="3399903">(</span><span class="ident" id="3399904"><a href="/gostd/net/unixsock_posix.go.html#3399743">b</a></span><span class="op" id="3399905">,</span>&nbsp;<span class="ident" id="3399907"><a href="/gostd/net/unixsock_posix.go.html#3399746">oob</a></span><span class="op" id="3399910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399913">switch</span>&nbsp;<span class="ident" id="3399920">sa</span>&nbsp;<span class="op" id="3399923">:=</span>&nbsp;<span class="ident" id="3399926"><a href="/gostd/net/unixsock_posix.go.html#3399880">sa</a></span><span class="op" id="3399928">.</span><span class="op" id="3399929">(</span><span class="keyword" id="3399930">type</span><span class="op" id="3399934">)</span>&nbsp;<span class="op" id="3399936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399939">case</span>&nbsp;<span class="op" id="3399944">*</span><span class="ident" id="3399945"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3399952">.</span><span class="ident" id="3399953"><a href="/gostd/syscall/syscall_unix.go.html#2547383">SockaddrUnix</a></span><span class="op" id="3399965">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399969">if</span>&nbsp;<span class="ident" id="3399972"><a href="/gostd/net/unixsock_posix.go.html#3399920">sa</a></span><span class="op" id="3399974">.</span><span class="ident" id="3399975"><a href="/gostd/syscall/syscall_unix.go.html#2547406">Name</a></span>&nbsp;<span class="op" id="3399980">!=</span>&nbsp;<span class="string" id="3399983">&#34;&#34;</span>&nbsp;<span class="op" id="3399986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399991"><a href="/gostd/net/unixsock_posix.go.html#3399779">addr</a></span>&nbsp;<span class="op" id="3399996">=</span>&nbsp;<span class="op" id="3399998">&amp;</span><span class="ident" id="3399999"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3400007">{</span><span class="ident" id="3400008"><a href="/gostd/net/unixsock.go.html#3395520">Name</a></span><span class="op" id="3400012">:</span>&nbsp;<span class="ident" id="3400014"><a href="/gostd/net/unixsock_posix.go.html#3399920">sa</a></span><span class="op" id="3400016">.</span><span class="ident" id="3400017"><a href="/gostd/syscall/syscall_unix.go.html#2547406">Name</a></span><span class="op" id="3400021">,</span>&nbsp;<span class="ident" id="3400023"><a href="/gostd/net/unixsock.go.html#3395533">Net</a></span><span class="op" id="3400026">:</span>&nbsp;<span class="ident" id="3400028"><a href="/gostd/net/unixsock_posix.go.html#3397826">sotypeToNet</a></span><span class="op" id="3400039">(</span><span class="ident" id="3400040"><a href="/gostd/net/unixsock_posix.go.html#3399718">c</a></span><span class="op" id="3400041">.</span><span class="ident" id="3400042"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3400044">.</span><span class="ident" id="3400045"><a href="/gostd/net/fd_unix.go.html#3257527">sotype</a></span><span class="op" id="3400051">)</span><span class="op" id="3400052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3400056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3400059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400062">return</span><br>
<span class="lineno">155</span><span class="op" id="3400069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3400072">//&nbsp;WriteToUnix&nbsp;writes&nbsp;a&nbsp;packet&nbsp;to&nbsp;addr&nbsp;via&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload&nbsp;from&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="3400146">//</span><br>
<span class="lineno"></span><span class="comment" id="3400149">//&nbsp;WriteToUnix&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;an&nbsp;error&nbsp;with</span><br>
<span class="lineno">160</span><span class="comment" id="3400213">//&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3400280">//&nbsp;SetWriteDeadline.&nbsp;&nbsp;On&nbsp;packet-oriented&nbsp;connections,&nbsp;write&nbsp;timeouts</span><br>
<span class="lineno"></span><span class="comment" id="3400349">//&nbsp;are&nbsp;rare.</span><br>
<span class="lineno"></span><span class="keyword" id="3400362">func</span>&nbsp;<span class="op" id="3400367">(</span><span class="ident" id="3400368">c</span>&nbsp;<span class="op" id="3400370">*</span><span class="ident" id="3400371"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3400379">)</span>&nbsp;<span class="ident" id="3400381">WriteToUnix</span><span class="op" id="3400392">(</span><span class="ident" id="3400393">b</span>&nbsp;<span class="op" id="3400395">[</span><span class="op" id="3400396">]</span><span class="builtintype" id="3400397">byte</span><span class="op" id="3400401">,</span>&nbsp;<span class="ident" id="3400403">addr</span>&nbsp;<span class="op" id="3400408">*</span><span class="ident" id="3400409"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3400417">)</span>&nbsp;<span class="op" id="3400419">(</span><span class="ident" id="3400420">n</span>&nbsp;<span class="builtintype" id="3400422">int</span><span class="op" id="3400425">,</span>&nbsp;<span class="ident" id="3400427">err</span>&nbsp;<span class="builtintype" id="3400431">error</span><span class="op" id="3400436">)</span>&nbsp;<span class="op" id="3400438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400441">if</span>&nbsp;<span class="op" id="3400444">!</span><span class="ident" id="3400445"><a href="/gostd/net/unixsock_posix.go.html#3400368">c</a></span><span class="op" id="3400446">.</span><span class="ident" id="3400447"><a href="/gostd/net/net.go.html#3336227">ok</a></span><span class="op" id="3400449">(</span><span class="op" id="3400450">)</span>&nbsp;<span class="op" id="3400452">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400456">return</span>&nbsp;<span class="num" id="3400463">0</span><span class="op" id="3400464">,</span>&nbsp;<span class="ident" id="3400466"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3400473">.</span><span class="ident" id="3400474"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3400482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400485">if</span>&nbsp;<span class="ident" id="3400488"><a href="/gostd/net/unixsock_posix.go.html#3400368">c</a></span><span class="op" id="3400489">.</span><span class="ident" id="3400490"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3400492">.</span><span class="ident" id="3400493"><a href="/gostd/net/fd_unix.go.html#3257544">isConnected</a></span>&nbsp;<span class="op" id="3400505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400509">return</span>&nbsp;<span class="num" id="3400516">0</span><span class="op" id="3400517">,</span>&nbsp;<span class="op" id="3400519">&amp;</span><span class="ident" id="3400520"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3400527">{</span><span class="ident" id="3400528"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3400530">:</span>&nbsp;<span class="string" id="3400532">&#34;write&#34;</span><span class="op" id="3400539">,</span>&nbsp;<span class="ident" id="3400541"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3400544">:</span>&nbsp;<span class="ident" id="3400546"><a href="/gostd/net/unixsock_posix.go.html#3400368">c</a></span><span class="op" id="3400547">.</span><span class="ident" id="3400548"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3400550">.</span><span class="ident" id="3400551"><a href="/gostd/net/fd_unix.go.html#3257562">net</a></span><span class="op" id="3400554">,</span>&nbsp;<span class="ident" id="3400556"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3400560">:</span>&nbsp;<span class="ident" id="3400562"><a href="/gostd/net/unixsock_posix.go.html#3400403">addr</a></span><span class="op" id="3400566">,</span>&nbsp;<span class="ident" id="3400568"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3400571">:</span>&nbsp;<span class="ident" id="3400573"><a href="/gostd/net/net.go.html#3341315">ErrWriteToConnected</a></span><span class="op" id="3400592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3400595">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400598">if</span>&nbsp;<span class="ident" id="3400601"><a href="/gostd/net/unixsock_posix.go.html#3400403">addr</a></span>&nbsp;<span class="op" id="3400606">==</span>&nbsp;<span class="builtintype" id="3400609">nil</span>&nbsp;<span class="op" id="3400613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400617">return</span>&nbsp;<span class="num" id="3400624">0</span><span class="op" id="3400625">,</span>&nbsp;<span class="op" id="3400627">&amp;</span><span class="ident" id="3400628"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3400635">{</span><span class="ident" id="3400636"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3400638">:</span>&nbsp;<span class="string" id="3400640">&#34;write&#34;</span><span class="op" id="3400647">,</span>&nbsp;<span class="ident" id="3400649"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3400652">:</span>&nbsp;<span class="ident" id="3400654"><a href="/gostd/net/unixsock_posix.go.html#3400368">c</a></span><span class="op" id="3400655">.</span><span class="ident" id="3400656"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3400658">.</span><span class="ident" id="3400659"><a href="/gostd/net/fd_unix.go.html#3257562">net</a></span><span class="op" id="3400662">,</span>&nbsp;<span class="ident" id="3400664"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3400668">:</span>&nbsp;<span class="builtintype" id="3400670">nil</span><span class="op" id="3400673">,</span>&nbsp;<span class="ident" id="3400675"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3400678">:</span>&nbsp;<span class="ident" id="3400680"><a href="/gostd/net/net.go.html#3341102">errMissingAddress</a></span><span class="op" id="3400697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3400700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400703">if</span>&nbsp;<span class="ident" id="3400706"><a href="/gostd/net/unixsock_posix.go.html#3400403">addr</a></span><span class="op" id="3400710">.</span><span class="ident" id="3400711"><a href="/gostd/net/unixsock.go.html#3395533">Net</a></span>&nbsp;<span class="op" id="3400715">!=</span>&nbsp;<span class="ident" id="3400718"><a href="/gostd/net/unixsock_posix.go.html#3397826">sotypeToNet</a></span><span class="op" id="3400729">(</span><span class="ident" id="3400730"><a href="/gostd/net/unixsock_posix.go.html#3400368">c</a></span><span class="op" id="3400731">.</span><span class="ident" id="3400732"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3400734">.</span><span class="ident" id="3400735"><a href="/gostd/net/fd_unix.go.html#3257527">sotype</a></span><span class="op" id="3400741">)</span>&nbsp;<span class="op" id="3400743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400747">return</span>&nbsp;<span class="num" id="3400754">0</span><span class="op" id="3400755">,</span>&nbsp;<span class="ident" id="3400757"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3400764">.</span><span class="ident" id="3400765"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2600282">EAFNOSUPPORT</a></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3400779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3400782">sa</span>&nbsp;<span class="op" id="3400785">:=</span>&nbsp;<span class="op" id="3400788">&amp;</span><span class="ident" id="3400789"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3400796">.</span><span class="ident" id="3400797"><a href="/gostd/syscall/syscall_unix.go.html#2547383">SockaddrUnix</a></span><span class="op" id="3400809">{</span><span class="ident" id="3400810"><a href="/gostd/syscall/syscall_unix.go.html#2547406">Name</a></span><span class="op" id="3400814">:</span>&nbsp;<span class="ident" id="3400816"><a href="/gostd/net/unixsock_posix.go.html#3400403">addr</a></span><span class="op" id="3400820">.</span><span class="ident" id="3400821"><a href="/gostd/net/unixsock.go.html#3395520">Name</a></span><span class="op" id="3400825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400828">return</span>&nbsp;<span class="ident" id="3400835"><a href="/gostd/net/unixsock_posix.go.html#3400368">c</a></span><span class="op" id="3400836">.</span><span class="ident" id="3400837"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3400839">.</span><span class="ident" id="3400840"><a href="/gostd/net/fd_unix.go.html#3265101">writeTo</a></span><span class="op" id="3400847">(</span><span class="ident" id="3400848"><a href="/gostd/net/unixsock_posix.go.html#3400393">b</a></span><span class="op" id="3400849">,</span>&nbsp;<span class="ident" id="3400851"><a href="/gostd/net/unixsock_posix.go.html#3400782">sa</a></span><span class="op" id="3400853">)</span><br>
<span class="lineno"></span><span class="op" id="3400855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="3400858">//&nbsp;WriteTo&nbsp;implements&nbsp;the&nbsp;PacketConn&nbsp;WriteTo&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3400911">func</span>&nbsp;<span class="op" id="3400916">(</span><span class="ident" id="3400917">c</span>&nbsp;<span class="op" id="3400919">*</span><span class="ident" id="3400920"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3400928">)</span>&nbsp;<span class="ident" id="3400930">WriteTo</span><span class="op" id="3400937">(</span><span class="ident" id="3400938">b</span>&nbsp;<span class="op" id="3400940">[</span><span class="op" id="3400941">]</span><span class="builtintype" id="3400942">byte</span><span class="op" id="3400946">,</span>&nbsp;<span class="ident" id="3400948">addr</span>&nbsp;<span class="ident" id="3400953"><a href="/gostd/net/net.go.html#3334179">Addr</a></span><span class="op" id="3400957">)</span>&nbsp;<span class="op" id="3400959">(</span><span class="ident" id="3400960">n</span>&nbsp;<span class="builtintype" id="3400962">int</span><span class="op" id="3400965">,</span>&nbsp;<span class="ident" id="3400967">err</span>&nbsp;<span class="builtintype" id="3400971">error</span><span class="op" id="3400976">)</span>&nbsp;<span class="op" id="3400978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400981">if</span>&nbsp;<span class="op" id="3400984">!</span><span class="ident" id="3400985"><a href="/gostd/net/unixsock_posix.go.html#3400917">c</a></span><span class="op" id="3400986">.</span><span class="ident" id="3400987"><a href="/gostd/net/net.go.html#3336227">ok</a></span><span class="op" id="3400989">(</span><span class="op" id="3400990">)</span>&nbsp;<span class="op" id="3400992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400996">return</span>&nbsp;<span class="num" id="3401003">0</span><span class="op" id="3401004">,</span>&nbsp;<span class="ident" id="3401006"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3401013">.</span><span class="ident" id="3401014"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3401022">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3401025">a</span><span class="op" id="3401026">,</span>&nbsp;<span class="ident" id="3401028">ok</span>&nbsp;<span class="op" id="3401031">:=</span>&nbsp;<span class="ident" id="3401034"><a href="/gostd/net/unixsock_posix.go.html#3400948">addr</a></span><span class="op" id="3401038">.</span><span class="op" id="3401039">(</span><span class="op" id="3401040">*</span><span class="ident" id="3401041"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3401049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401052">if</span>&nbsp;<span class="op" id="3401055">!</span><span class="ident" id="3401056"><a href="/gostd/net/unixsock_posix.go.html#3401028">ok</a></span>&nbsp;<span class="op" id="3401059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401063">return</span>&nbsp;<span class="num" id="3401070">0</span><span class="op" id="3401071">,</span>&nbsp;<span class="op" id="3401073">&amp;</span><span class="ident" id="3401074"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3401081">{</span><span class="string" id="3401082">&#34;write&#34;</span><span class="op" id="3401089">,</span>&nbsp;<span class="ident" id="3401091"><a href="/gostd/net/unixsock_posix.go.html#3400917">c</a></span><span class="op" id="3401092">.</span><span class="ident" id="3401093"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3401095">.</span><span class="ident" id="3401096"><a href="/gostd/net/fd_unix.go.html#3257562">net</a></span><span class="op" id="3401099">,</span>&nbsp;<span class="ident" id="3401101"><a href="/gostd/net/unixsock_posix.go.html#3400948">addr</a></span><span class="op" id="3401105">,</span>&nbsp;<span class="ident" id="3401107"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3401114">.</span><span class="ident" id="3401115"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><span class="op" id="3401121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3401124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401127">return</span>&nbsp;<span class="ident" id="3401134"><a href="/gostd/net/unixsock_posix.go.html#3400917">c</a></span><span class="op" id="3401135">.</span><span class="ident" id="3401136"><a href="/gostd/net/unixsock_posix.go.html#3400381">WriteToUnix</a></span><span class="op" id="3401147">(</span><span class="ident" id="3401148"><a href="/gostd/net/unixsock_posix.go.html#3400938">b</a></span><span class="op" id="3401149">,</span>&nbsp;<span class="ident" id="3401151"><a href="/gostd/net/unixsock_posix.go.html#3401025">a</a></span><span class="op" id="3401152">)</span><br>
<span class="lineno">190</span><span class="op" id="3401154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3401157">//&nbsp;WriteMsgUnix&nbsp;writes&nbsp;a&nbsp;packet&nbsp;to&nbsp;addr&nbsp;via&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload</span><br>
<span class="lineno"></span><span class="comment" id="3401224">//&nbsp;from&nbsp;b&nbsp;and&nbsp;the&nbsp;associated&nbsp;out-of-band&nbsp;data&nbsp;from&nbsp;oob.&nbsp;&nbsp;It&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3401292">//&nbsp;the&nbsp;number&nbsp;of&nbsp;payload&nbsp;and&nbsp;out-of-band&nbsp;bytes&nbsp;written.</span><br>
<span class="lineno">195</span><span class="keyword" id="3401348">func</span>&nbsp;<span class="op" id="3401353">(</span><span class="ident" id="3401354">c</span>&nbsp;<span class="op" id="3401356">*</span><span class="ident" id="3401357"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3401365">)</span>&nbsp;<span class="ident" id="3401367">WriteMsgUnix</span><span class="op" id="3401379">(</span><span class="ident" id="3401380">b</span><span class="op" id="3401381">,</span>&nbsp;<span class="ident" id="3401383">oob</span>&nbsp;<span class="op" id="3401387">[</span><span class="op" id="3401388">]</span><span class="builtintype" id="3401389">byte</span><span class="op" id="3401393">,</span>&nbsp;<span class="ident" id="3401395">addr</span>&nbsp;<span class="op" id="3401400">*</span><span class="ident" id="3401401"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3401409">)</span>&nbsp;<span class="op" id="3401411">(</span><span class="ident" id="3401412">n</span><span class="op" id="3401413">,</span>&nbsp;<span class="ident" id="3401415">oobn</span>&nbsp;<span class="builtintype" id="3401420">int</span><span class="op" id="3401423">,</span>&nbsp;<span class="ident" id="3401425">err</span>&nbsp;<span class="builtintype" id="3401429">error</span><span class="op" id="3401434">)</span>&nbsp;<span class="op" id="3401436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401439">if</span>&nbsp;<span class="op" id="3401442">!</span><span class="ident" id="3401443"><a href="/gostd/net/unixsock_posix.go.html#3401354">c</a></span><span class="op" id="3401444">.</span><span class="ident" id="3401445"><a href="/gostd/net/net.go.html#3336227">ok</a></span><span class="op" id="3401447">(</span><span class="op" id="3401448">)</span>&nbsp;<span class="op" id="3401450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401454">return</span>&nbsp;<span class="num" id="3401461">0</span><span class="op" id="3401462">,</span>&nbsp;<span class="num" id="3401464">0</span><span class="op" id="3401465">,</span>&nbsp;<span class="ident" id="3401467"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3401474">.</span><span class="ident" id="3401475"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3401483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401486">if</span>&nbsp;<span class="ident" id="3401489"><a href="/gostd/net/unixsock_posix.go.html#3401354">c</a></span><span class="op" id="3401490">.</span><span class="ident" id="3401491"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3401493">.</span><span class="ident" id="3401494"><a href="/gostd/net/fd_unix.go.html#3257527">sotype</a></span>&nbsp;<span class="op" id="3401501">==</span>&nbsp;<span class="ident" id="3401504"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3401511">.</span><span class="ident" id="3401512"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2591788">SOCK_DGRAM</a></span>&nbsp;<span class="op" id="3401523">&amp;&amp;</span>&nbsp;<span class="ident" id="3401526"><a href="/gostd/net/unixsock_posix.go.html#3401354">c</a></span><span class="op" id="3401527">.</span><span class="ident" id="3401528"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3401530">.</span><span class="ident" id="3401531"><a href="/gostd/net/fd_unix.go.html#3257544">isConnected</a></span>&nbsp;<span class="op" id="3401543">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401547">return</span>&nbsp;<span class="num" id="3401554">0</span><span class="op" id="3401555">,</span>&nbsp;<span class="num" id="3401557">0</span><span class="op" id="3401558">,</span>&nbsp;<span class="op" id="3401560">&amp;</span><span class="ident" id="3401561"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3401568">{</span><span class="ident" id="3401569"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3401571">:</span>&nbsp;<span class="string" id="3401573">&#34;write&#34;</span><span class="op" id="3401580">,</span>&nbsp;<span class="ident" id="3401582"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3401585">:</span>&nbsp;<span class="ident" id="3401587"><a href="/gostd/net/unixsock_posix.go.html#3401354">c</a></span><span class="op" id="3401588">.</span><span class="ident" id="3401589"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3401591">.</span><span class="ident" id="3401592"><a href="/gostd/net/fd_unix.go.html#3257562">net</a></span><span class="op" id="3401595">,</span>&nbsp;<span class="ident" id="3401597"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3401601">:</span>&nbsp;<span class="ident" id="3401603"><a href="/gostd/net/unixsock_posix.go.html#3401395">addr</a></span><span class="op" id="3401607">,</span>&nbsp;<span class="ident" id="3401609"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3401612">:</span>&nbsp;<span class="ident" id="3401614"><a href="/gostd/net/net.go.html#3341315">ErrWriteToConnected</a></span><span class="op" id="3401633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3401636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401639">if</span>&nbsp;<span class="ident" id="3401642"><a href="/gostd/net/unixsock_posix.go.html#3401395">addr</a></span>&nbsp;<span class="op" id="3401647">!=</span>&nbsp;<span class="builtintype" id="3401650">nil</span>&nbsp;<span class="op" id="3401654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401658">if</span>&nbsp;<span class="ident" id="3401661"><a href="/gostd/net/unixsock_posix.go.html#3401395">addr</a></span><span class="op" id="3401665">.</span><span class="ident" id="3401666"><a href="/gostd/net/unixsock.go.html#3395533">Net</a></span>&nbsp;<span class="op" id="3401670">!=</span>&nbsp;<span class="ident" id="3401673"><a href="/gostd/net/unixsock_posix.go.html#3397826">sotypeToNet</a></span><span class="op" id="3401684">(</span><span class="ident" id="3401685"><a href="/gostd/net/unixsock_posix.go.html#3401354">c</a></span><span class="op" id="3401686">.</span><span class="ident" id="3401687"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3401689">.</span><span class="ident" id="3401690"><a href="/gostd/net/fd_unix.go.html#3257527">sotype</a></span><span class="op" id="3401696">)</span>&nbsp;<span class="op" id="3401698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401703">return</span>&nbsp;<span class="num" id="3401710">0</span><span class="op" id="3401711">,</span>&nbsp;<span class="num" id="3401713">0</span><span class="op" id="3401714">,</span>&nbsp;<span class="ident" id="3401716"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3401723">.</span><span class="ident" id="3401724"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2600282">EAFNOSUPPORT</a></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3401739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3401743">sa</span>&nbsp;<span class="op" id="3401746">:=</span>&nbsp;<span class="op" id="3401749">&amp;</span><span class="ident" id="3401750"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3401757">.</span><span class="ident" id="3401758"><a href="/gostd/syscall/syscall_unix.go.html#2547383">SockaddrUnix</a></span><span class="op" id="3401770">{</span><span class="ident" id="3401771"><a href="/gostd/syscall/syscall_unix.go.html#2547406">Name</a></span><span class="op" id="3401775">:</span>&nbsp;<span class="ident" id="3401777"><a href="/gostd/net/unixsock_posix.go.html#3401395">addr</a></span><span class="op" id="3401781">.</span><span class="ident" id="3401782"><a href="/gostd/net/unixsock.go.html#3395520">Name</a></span><span class="op" id="3401786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401790">return</span>&nbsp;<span class="ident" id="3401797"><a href="/gostd/net/unixsock_posix.go.html#3401354">c</a></span><span class="op" id="3401798">.</span><span class="ident" id="3401799"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3401801">.</span><span class="ident" id="3401802"><a href="/gostd/net/fd_unix.go.html#3265622">writeMsg</a></span><span class="op" id="3401810">(</span><span class="ident" id="3401811"><a href="/gostd/net/unixsock_posix.go.html#3401380">b</a></span><span class="op" id="3401812">,</span>&nbsp;<span class="ident" id="3401814"><a href="/gostd/net/unixsock_posix.go.html#3401383">oob</a></span><span class="op" id="3401817">,</span>&nbsp;<span class="ident" id="3401819"><a href="/gostd/net/unixsock_posix.go.html#3401743">sa</a></span><span class="op" id="3401821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3401824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401827">return</span>&nbsp;<span class="ident" id="3401834"><a href="/gostd/net/unixsock_posix.go.html#3401354">c</a></span><span class="op" id="3401835">.</span><span class="ident" id="3401836"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3401838">.</span><span class="ident" id="3401839"><a href="/gostd/net/fd_unix.go.html#3265622">writeMsg</a></span><span class="op" id="3401847">(</span><span class="ident" id="3401848"><a href="/gostd/net/unixsock_posix.go.html#3401380">b</a></span><span class="op" id="3401849">,</span>&nbsp;<span class="ident" id="3401851"><a href="/gostd/net/unixsock_posix.go.html#3401383">oob</a></span><span class="op" id="3401854">,</span>&nbsp;<span class="builtintype" id="3401856">nil</span><span class="op" id="3401859">)</span><br>
<span class="lineno">210</span><span class="op" id="3401861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3401864">//&nbsp;CloseRead&nbsp;shuts&nbsp;down&nbsp;the&nbsp;reading&nbsp;side&nbsp;of&nbsp;the&nbsp;Unix&nbsp;domain&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="3401936">//&nbsp;Most&nbsp;callers&nbsp;should&nbsp;just&nbsp;use&nbsp;Close.</span><br>
<span class="lineno"></span><span class="keyword" id="3401975">func</span>&nbsp;<span class="op" id="3401980">(</span><span class="ident" id="3401981">c</span>&nbsp;<span class="op" id="3401983">*</span><span class="ident" id="3401984"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3401992">)</span>&nbsp;<span class="ident" id="3401994">CloseRead</span><span class="op" id="3402003">(</span><span class="op" id="3402004">)</span>&nbsp;<span class="builtintype" id="3402006">error</span>&nbsp;<span class="op" id="3402012">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402015">if</span>&nbsp;<span class="op" id="3402018">!</span><span class="ident" id="3402019"><a href="/gostd/net/unixsock_posix.go.html#3401981">c</a></span><span class="op" id="3402020">.</span><span class="ident" id="3402021"><a href="/gostd/net/net.go.html#3336227">ok</a></span><span class="op" id="3402023">(</span><span class="op" id="3402024">)</span>&nbsp;<span class="op" id="3402026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402030">return</span>&nbsp;<span class="ident" id="3402037"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3402044">.</span><span class="ident" id="3402045"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3402053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402056">return</span>&nbsp;<span class="ident" id="3402063"><a href="/gostd/net/unixsock_posix.go.html#3401981">c</a></span><span class="op" id="3402064">.</span><span class="ident" id="3402065"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3402067">.</span><span class="ident" id="3402068"><a href="/gostd/net/fd_unix.go.html#3262289">closeRead</a></span><span class="op" id="3402077">(</span><span class="op" id="3402078">)</span><br>
<span class="lineno"></span><span class="op" id="3402080">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="3402083">//&nbsp;CloseWrite&nbsp;shuts&nbsp;down&nbsp;the&nbsp;writing&nbsp;side&nbsp;of&nbsp;the&nbsp;Unix&nbsp;domain&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="3402156">//&nbsp;Most&nbsp;callers&nbsp;should&nbsp;just&nbsp;use&nbsp;Close.</span><br>
<span class="lineno"></span><span class="keyword" id="3402195">func</span>&nbsp;<span class="op" id="3402200">(</span><span class="ident" id="3402201">c</span>&nbsp;<span class="op" id="3402203">*</span><span class="ident" id="3402204"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3402212">)</span>&nbsp;<span class="ident" id="3402214">CloseWrite</span><span class="op" id="3402224">(</span><span class="op" id="3402225">)</span>&nbsp;<span class="builtintype" id="3402227">error</span>&nbsp;<span class="op" id="3402233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402236">if</span>&nbsp;<span class="op" id="3402239">!</span><span class="ident" id="3402240"><a href="/gostd/net/unixsock_posix.go.html#3402201">c</a></span><span class="op" id="3402241">.</span><span class="ident" id="3402242"><a href="/gostd/net/net.go.html#3336227">ok</a></span><span class="op" id="3402244">(</span><span class="op" id="3402245">)</span>&nbsp;<span class="op" id="3402247">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402251">return</span>&nbsp;<span class="ident" id="3402258"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3402265">.</span><span class="ident" id="3402266"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3402274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402277">return</span>&nbsp;<span class="ident" id="3402284"><a href="/gostd/net/unixsock_posix.go.html#3402201">c</a></span><span class="op" id="3402285">.</span><span class="ident" id="3402286"><a href="/gostd/net/net.go.html#3336199">fd</a></span><span class="op" id="3402288">.</span><span class="ident" id="3402289"><a href="/gostd/net/fd_unix.go.html#3262366">closeWrite</a></span><span class="op" id="3402299">(</span><span class="op" id="3402300">)</span><br>
<span class="lineno"></span><span class="op" id="3402302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="3402305">//&nbsp;DialUnix&nbsp;connects&nbsp;to&nbsp;the&nbsp;remote&nbsp;address&nbsp;raddr&nbsp;on&nbsp;the&nbsp;network&nbsp;net,</span><br>
<span class="lineno"></span><span class="comment" id="3402374">//&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;unix&#34;,&nbsp;&#34;unixgram&#34;&nbsp;or&nbsp;&#34;unixpacket&#34;.&nbsp;&nbsp;If&nbsp;laddr&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="3402444">//&nbsp;nil,&nbsp;it&nbsp;is&nbsp;used&nbsp;as&nbsp;the&nbsp;local&nbsp;address&nbsp;for&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3402504">func</span>&nbsp;<span class="ident" id="3402509">DialUnix</span><span class="op" id="3402517">(</span><span class="ident" id="3402518">net</span>&nbsp;<span class="builtintype" id="3402522">string</span><span class="op" id="3402528">,</span>&nbsp;<span class="ident" id="3402530">laddr</span><span class="op" id="3402535">,</span>&nbsp;<span class="ident" id="3402537">raddr</span>&nbsp;<span class="op" id="3402543">*</span><span class="ident" id="3402544"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3402552">)</span>&nbsp;<span class="op" id="3402554">(</span><span class="op" id="3402555">*</span><span class="ident" id="3402556"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3402564">,</span>&nbsp;<span class="builtintype" id="3402566">error</span><span class="op" id="3402571">)</span>&nbsp;<span class="op" id="3402573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402576">switch</span>&nbsp;<span class="ident" id="3402583"><a href="/gostd/net/unixsock_posix.go.html#3402518">net</a></span>&nbsp;<span class="op" id="3402587">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402590">case</span>&nbsp;<span class="string" id="3402595">&#34;unix&#34;</span><span class="op" id="3402601">,</span>&nbsp;<span class="string" id="3402603">&#34;unixgram&#34;</span><span class="op" id="3402613">,</span>&nbsp;<span class="string" id="3402615">&#34;unixpacket&#34;</span><span class="op" id="3402627">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402630">default</span><span class="op" id="3402637">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402641">return</span>&nbsp;<span class="builtintype" id="3402648">nil</span><span class="op" id="3402651">,</span>&nbsp;<span class="op" id="3402653">&amp;</span><span class="ident" id="3402654"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3402661">{</span><span class="ident" id="3402662"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3402664">:</span>&nbsp;<span class="string" id="3402666">&#34;dial&#34;</span><span class="op" id="3402672">,</span>&nbsp;<span class="ident" id="3402674"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3402677">:</span>&nbsp;<span class="ident" id="3402679"><a href="/gostd/net/unixsock_posix.go.html#3402518">net</a></span><span class="op" id="3402682">,</span>&nbsp;<span class="ident" id="3402684"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3402688">:</span>&nbsp;<span class="ident" id="3402690"><a href="/gostd/net/unixsock_posix.go.html#3402537">raddr</a></span><span class="op" id="3402695">,</span>&nbsp;<span class="ident" id="3402697"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3402700">:</span>&nbsp;<span class="ident" id="3402702"><a href="/gostd/net/net.go.html#3342949">UnknownNetworkError</a></span><span class="op" id="3402721">(</span><span class="ident" id="3402722"><a href="/gostd/net/unixsock_posix.go.html#3402518">net</a></span><span class="op" id="3402725">)</span><span class="op" id="3402726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3402729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402732">return</span>&nbsp;<span class="ident" id="3402739"><a href="/gostd/net/unixsock_posix.go.html#3402787">dialUnix</a></span><span class="op" id="3402747">(</span><span class="ident" id="3402748"><a href="/gostd/net/unixsock_posix.go.html#3402518">net</a></span><span class="op" id="3402751">,</span>&nbsp;<span class="ident" id="3402753"><a href="/gostd/net/unixsock_posix.go.html#3402530">laddr</a></span><span class="op" id="3402758">,</span>&nbsp;<span class="ident" id="3402760"><a href="/gostd/net/unixsock_posix.go.html#3402537">raddr</a></span><span class="op" id="3402765">,</span>&nbsp;<span class="ident" id="3402767"><a href="/gostd/net/net.go.html#3342276">noDeadline</a></span><span class="op" id="3402777">)</span><br>
<span class="lineno">240</span><span class="op" id="3402779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3402782">func</span>&nbsp;<span class="ident" id="3402787">dialUnix</span><span class="op" id="3402795">(</span><span class="ident" id="3402796">net</span>&nbsp;<span class="builtintype" id="3402800">string</span><span class="op" id="3402806">,</span>&nbsp;<span class="ident" id="3402808">laddr</span><span class="op" id="3402813">,</span>&nbsp;<span class="ident" id="3402815">raddr</span>&nbsp;<span class="op" id="3402821">*</span><span class="ident" id="3402822"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3402830">,</span>&nbsp;<span class="ident" id="3402832">deadline</span>&nbsp;<span class="ident" id="3402841"><a href="/gostd/net/unixsock_posix.go.html#3396507">time</a></span><span class="op" id="3402845">.</span><span class="ident" id="3402846"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="3402850">)</span>&nbsp;<span class="op" id="3402852">(</span><span class="op" id="3402853">*</span><span class="ident" id="3402854"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3402862">,</span>&nbsp;<span class="builtintype" id="3402864">error</span><span class="op" id="3402869">)</span>&nbsp;<span class="op" id="3402871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3402874">fd</span><span class="op" id="3402876">,</span>&nbsp;<span class="ident" id="3402878">err</span>&nbsp;<span class="op" id="3402882">:=</span>&nbsp;<span class="ident" id="3402885"><a href="/gostd/net/unixsock_posix.go.html#3396522">unixSocket</a></span><span class="op" id="3402895">(</span><span class="ident" id="3402896"><a href="/gostd/net/unixsock_posix.go.html#3402796">net</a></span><span class="op" id="3402899">,</span>&nbsp;<span class="ident" id="3402901"><a href="/gostd/net/unixsock_posix.go.html#3402808">laddr</a></span><span class="op" id="3402906">,</span>&nbsp;<span class="ident" id="3402908"><a href="/gostd/net/unixsock_posix.go.html#3402815">raddr</a></span><span class="op" id="3402913">,</span>&nbsp;<span class="string" id="3402915">&#34;dial&#34;</span><span class="op" id="3402921">,</span>&nbsp;<span class="ident" id="3402923"><a href="/gostd/net/unixsock_posix.go.html#3402832">deadline</a></span><span class="op" id="3402931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402934">if</span>&nbsp;<span class="ident" id="3402937"><a href="/gostd/net/unixsock_posix.go.html#3402878">err</a></span>&nbsp;<span class="op" id="3402941">!=</span>&nbsp;<span class="builtintype" id="3402944">nil</span>&nbsp;<span class="op" id="3402948">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402952">return</span>&nbsp;<span class="builtintype" id="3402959">nil</span><span class="op" id="3402962">,</span>&nbsp;<span class="op" id="3402964">&amp;</span><span class="ident" id="3402965"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3402972">{</span><span class="ident" id="3402973"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3402975">:</span>&nbsp;<span class="string" id="3402977">&#34;dial&#34;</span><span class="op" id="3402983">,</span>&nbsp;<span class="ident" id="3402985"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3402988">:</span>&nbsp;<span class="ident" id="3402990"><a href="/gostd/net/unixsock_posix.go.html#3402796">net</a></span><span class="op" id="3402993">,</span>&nbsp;<span class="ident" id="3402995"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3402999">:</span>&nbsp;<span class="ident" id="3403001"><a href="/gostd/net/unixsock_posix.go.html#3402815">raddr</a></span><span class="op" id="3403006">,</span>&nbsp;<span class="ident" id="3403008"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3403011">:</span>&nbsp;<span class="ident" id="3403013"><a href="/gostd/net/unixsock_posix.go.html#3402878">err</a></span><span class="op" id="3403016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3403019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403022">return</span>&nbsp;<span class="ident" id="3403029"><a href="/gostd/net/unixsock_posix.go.html#3398503">newUnixConn</a></span><span class="op" id="3403040">(</span><span class="ident" id="3403041"><a href="/gostd/net/unixsock_posix.go.html#3402874">fd</a></span><span class="op" id="3403043">)</span><span class="op" id="3403044">,</span>&nbsp;<span class="builtintype" id="3403046">nil</span><br>
<span class="lineno"></span><span class="op" id="3403050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="comment" id="3403053">//&nbsp;UnixListener&nbsp;is&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket&nbsp;listener.&nbsp;&nbsp;Clients&nbsp;should</span><br>
<span class="lineno"></span><span class="comment" id="3403119">//&nbsp;typically&nbsp;use&nbsp;variables&nbsp;of&nbsp;type&nbsp;Listener&nbsp;instead&nbsp;of&nbsp;assuming&nbsp;Unix</span><br>
<span class="lineno"></span><span class="comment" id="3403188">//&nbsp;domain&nbsp;sockets.</span><br>
<span class="lineno"></span><span class="keyword" id="3403207">type</span>&nbsp;<span class="ident" id="3403212">UnixListener</span>&nbsp;<span class="keyword" id="3403225">struct</span>&nbsp;<span class="op" id="3403232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403235">fd</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3403240">*</span><span class="ident" id="3403241"><a href="/gostd/net/fd_unix.go.html#3257361">netFD</a></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403248">path</span>&nbsp;<span class="builtintype" id="3403253">string</span><br>
<span class="lineno"></span><span class="op" id="3403260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3403263">//&nbsp;ListenUnix&nbsp;announces&nbsp;on&nbsp;the&nbsp;Unix&nbsp;domain&nbsp;socket&nbsp;laddr&nbsp;and&nbsp;returns&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3403333">//&nbsp;Unix&nbsp;listener.&nbsp;&nbsp;The&nbsp;network&nbsp;net&nbsp;must&nbsp;be&nbsp;&#34;unix&#34;&nbsp;or&nbsp;&#34;unixpacket&#34;.</span><br>
<span class="lineno">260</span><span class="keyword" id="3403400">func</span>&nbsp;<span class="ident" id="3403405">ListenUnix</span><span class="op" id="3403415">(</span><span class="ident" id="3403416">net</span>&nbsp;<span class="builtintype" id="3403420">string</span><span class="op" id="3403426">,</span>&nbsp;<span class="ident" id="3403428">laddr</span>&nbsp;<span class="op" id="3403434">*</span><span class="ident" id="3403435"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3403443">)</span>&nbsp;<span class="op" id="3403445">(</span><span class="op" id="3403446">*</span><span class="ident" id="3403447"><a href="/gostd/net/unixsock_posix.go.html#3403212">UnixListener</a></span><span class="op" id="3403459">,</span>&nbsp;<span class="builtintype" id="3403461">error</span><span class="op" id="3403466">)</span>&nbsp;<span class="op" id="3403468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403471">switch</span>&nbsp;<span class="ident" id="3403478"><a href="/gostd/net/unixsock_posix.go.html#3403416">net</a></span>&nbsp;<span class="op" id="3403482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403485">case</span>&nbsp;<span class="string" id="3403490">&#34;unix&#34;</span><span class="op" id="3403496">,</span>&nbsp;<span class="string" id="3403498">&#34;unixpacket&#34;</span><span class="op" id="3403510">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403513">default</span><span class="op" id="3403520">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403524">return</span>&nbsp;<span class="builtintype" id="3403531">nil</span><span class="op" id="3403534">,</span>&nbsp;<span class="op" id="3403536">&amp;</span><span class="ident" id="3403537"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3403544">{</span><span class="ident" id="3403545"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3403547">:</span>&nbsp;<span class="string" id="3403549">&#34;listen&#34;</span><span class="op" id="3403557">,</span>&nbsp;<span class="ident" id="3403559"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3403562">:</span>&nbsp;<span class="ident" id="3403564"><a href="/gostd/net/unixsock_posix.go.html#3403416">net</a></span><span class="op" id="3403567">,</span>&nbsp;<span class="ident" id="3403569"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3403573">:</span>&nbsp;<span class="ident" id="3403575"><a href="/gostd/net/unixsock_posix.go.html#3403428">laddr</a></span><span class="op" id="3403580">,</span>&nbsp;<span class="ident" id="3403582"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3403585">:</span>&nbsp;<span class="ident" id="3403587"><a href="/gostd/net/net.go.html#3342949">UnknownNetworkError</a></span><span class="op" id="3403606">(</span><span class="ident" id="3403607"><a href="/gostd/net/unixsock_posix.go.html#3403416">net</a></span><span class="op" id="3403610">)</span><span class="op" id="3403611">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3403614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403617">if</span>&nbsp;<span class="ident" id="3403620"><a href="/gostd/net/unixsock_posix.go.html#3403428">laddr</a></span>&nbsp;<span class="op" id="3403626">==</span>&nbsp;<span class="builtintype" id="3403629">nil</span>&nbsp;<span class="op" id="3403633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403637">return</span>&nbsp;<span class="builtintype" id="3403644">nil</span><span class="op" id="3403647">,</span>&nbsp;<span class="op" id="3403649">&amp;</span><span class="ident" id="3403650"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3403657">{</span><span class="ident" id="3403658"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3403660">:</span>&nbsp;<span class="string" id="3403662">&#34;listen&#34;</span><span class="op" id="3403670">,</span>&nbsp;<span class="ident" id="3403672"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3403675">:</span>&nbsp;<span class="ident" id="3403677"><a href="/gostd/net/unixsock_posix.go.html#3403416">net</a></span><span class="op" id="3403680">,</span>&nbsp;<span class="ident" id="3403682"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3403686">:</span>&nbsp;<span class="builtintype" id="3403688">nil</span><span class="op" id="3403691">,</span>&nbsp;<span class="ident" id="3403693"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3403696">:</span>&nbsp;<span class="ident" id="3403698"><a href="/gostd/net/net.go.html#3341102">errMissingAddress</a></span><span class="op" id="3403715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3403718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403721">fd</span><span class="op" id="3403723">,</span>&nbsp;<span class="ident" id="3403725">err</span>&nbsp;<span class="op" id="3403729">:=</span>&nbsp;<span class="ident" id="3403732"><a href="/gostd/net/unixsock_posix.go.html#3396522">unixSocket</a></span><span class="op" id="3403742">(</span><span class="ident" id="3403743"><a href="/gostd/net/unixsock_posix.go.html#3403416">net</a></span><span class="op" id="3403746">,</span>&nbsp;<span class="ident" id="3403748"><a href="/gostd/net/unixsock_posix.go.html#3403428">laddr</a></span><span class="op" id="3403753">,</span>&nbsp;<span class="builtintype" id="3403755">nil</span><span class="op" id="3403758">,</span>&nbsp;<span class="string" id="3403760">&#34;listen&#34;</span><span class="op" id="3403768">,</span>&nbsp;<span class="ident" id="3403770"><a href="/gostd/net/net.go.html#3342276">noDeadline</a></span><span class="op" id="3403780">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403783">if</span>&nbsp;<span class="ident" id="3403786"><a href="/gostd/net/unixsock_posix.go.html#3403725">err</a></span>&nbsp;<span class="op" id="3403790">!=</span>&nbsp;<span class="builtintype" id="3403793">nil</span>&nbsp;<span class="op" id="3403797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403801">return</span>&nbsp;<span class="builtintype" id="3403808">nil</span><span class="op" id="3403811">,</span>&nbsp;<span class="op" id="3403813">&amp;</span><span class="ident" id="3403814"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3403821">{</span><span class="ident" id="3403822"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3403824">:</span>&nbsp;<span class="string" id="3403826">&#34;listen&#34;</span><span class="op" id="3403834">,</span>&nbsp;<span class="ident" id="3403836"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3403839">:</span>&nbsp;<span class="ident" id="3403841"><a href="/gostd/net/unixsock_posix.go.html#3403416">net</a></span><span class="op" id="3403844">,</span>&nbsp;<span class="ident" id="3403846"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3403850">:</span>&nbsp;<span class="ident" id="3403852"><a href="/gostd/net/unixsock_posix.go.html#3403428">laddr</a></span><span class="op" id="3403857">,</span>&nbsp;<span class="ident" id="3403859"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3403862">:</span>&nbsp;<span class="ident" id="3403864"><a href="/gostd/net/unixsock_posix.go.html#3403725">err</a></span><span class="op" id="3403867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3403870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403873">return</span>&nbsp;<span class="op" id="3403880">&amp;</span><span class="ident" id="3403881"><a href="/gostd/net/unixsock_posix.go.html#3403212">UnixListener</a></span><span class="op" id="3403893">{</span><span class="ident" id="3403894"><a href="/gostd/net/unixsock_posix.go.html#3403721">fd</a></span><span class="op" id="3403896">,</span>&nbsp;<span class="ident" id="3403898"><a href="/gostd/net/unixsock_posix.go.html#3403721">fd</a></span><span class="op" id="3403900">.</span><span class="ident" id="3403901"><a href="/gostd/net/fd_unix.go.html#3257582">laddr</a></span><span class="op" id="3403906">.</span><span class="ident" id="3403907"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="3403913">(</span><span class="op" id="3403914">)</span><span class="op" id="3403915">}</span><span class="op" id="3403916">,</span>&nbsp;<span class="builtintype" id="3403918">nil</span><br>
<span class="lineno"></span><span class="op" id="3403922">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="3403925">//&nbsp;AcceptUnix&nbsp;accepts&nbsp;the&nbsp;next&nbsp;incoming&nbsp;call&nbsp;and&nbsp;returns&nbsp;the&nbsp;new</span><br>
<span class="lineno"></span><span class="comment" id="3403990">//&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3404005">func</span>&nbsp;<span class="op" id="3404010">(</span><span class="ident" id="3404011">l</span>&nbsp;<span class="op" id="3404013">*</span><span class="ident" id="3404014"><a href="/gostd/net/unixsock_posix.go.html#3403212">UnixListener</a></span><span class="op" id="3404026">)</span>&nbsp;<span class="ident" id="3404028">AcceptUnix</span><span class="op" id="3404038">(</span><span class="op" id="3404039">)</span>&nbsp;<span class="op" id="3404041">(</span><span class="op" id="3404042">*</span><span class="ident" id="3404043"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3404051">,</span>&nbsp;<span class="builtintype" id="3404053">error</span><span class="op" id="3404058">)</span>&nbsp;<span class="op" id="3404060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3404063">if</span>&nbsp;<span class="ident" id="3404066"><a href="/gostd/net/unixsock_posix.go.html#3404011">l</a></span>&nbsp;<span class="op" id="3404068">==</span>&nbsp;<span class="builtintype" id="3404071">nil</span>&nbsp;<span class="op" id="3404075">||</span>&nbsp;<span class="ident" id="3404078"><a href="/gostd/net/unixsock_posix.go.html#3404011">l</a></span><span class="op" id="3404079">.</span><span class="ident" id="3404080"><a href="/gostd/net/unixsock_posix.go.html#3403235">fd</a></span>&nbsp;<span class="op" id="3404083">==</span>&nbsp;<span class="builtintype" id="3404086">nil</span>&nbsp;<span class="op" id="3404090">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3404094">return</span>&nbsp;<span class="builtintype" id="3404101">nil</span><span class="op" id="3404104">,</span>&nbsp;<span class="ident" id="3404106"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3404113">.</span><span class="ident" id="3404114"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3404122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3404125">fd</span><span class="op" id="3404127">,</span>&nbsp;<span class="ident" id="3404129">err</span>&nbsp;<span class="op" id="3404133">:=</span>&nbsp;<span class="ident" id="3404136"><a href="/gostd/net/unixsock_posix.go.html#3404011">l</a></span><span class="op" id="3404137">.</span><span class="ident" id="3404138"><a href="/gostd/net/unixsock_posix.go.html#3403235">fd</a></span><span class="op" id="3404140">.</span><span class="ident" id="3404141"><a href="/gostd/net/fd_unix.go.html#3266187">accept</a></span><span class="op" id="3404147">(</span><span class="op" id="3404148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3404151">if</span>&nbsp;<span class="ident" id="3404154"><a href="/gostd/net/unixsock_posix.go.html#3404129">err</a></span>&nbsp;<span class="op" id="3404158">!=</span>&nbsp;<span class="builtintype" id="3404161">nil</span>&nbsp;<span class="op" id="3404165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3404169">return</span>&nbsp;<span class="builtintype" id="3404176">nil</span><span class="op" id="3404179">,</span>&nbsp;<span class="ident" id="3404181"><a href="/gostd/net/unixsock_posix.go.html#3404129">err</a></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3404186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3404189">c</span>&nbsp;<span class="op" id="3404191">:=</span>&nbsp;<span class="ident" id="3404194"><a href="/gostd/net/unixsock_posix.go.html#3398503">newUnixConn</a></span><span class="op" id="3404205">(</span><span class="ident" id="3404206"><a href="/gostd/net/unixsock_posix.go.html#3404125">fd</a></span><span class="op" id="3404208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3404211">return</span>&nbsp;<span class="ident" id="3404218"><a href="/gostd/net/unixsock_posix.go.html#3404189">c</a></span><span class="op" id="3404219">,</span>&nbsp;<span class="builtintype" id="3404221">nil</span><br>
<span class="lineno"></span><span class="op" id="3404225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="comment" id="3404228">//&nbsp;Accept&nbsp;implements&nbsp;the&nbsp;Accept&nbsp;method&nbsp;in&nbsp;the&nbsp;Listener&nbsp;interface;&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3404297">//&nbsp;waits&nbsp;for&nbsp;the&nbsp;next&nbsp;call&nbsp;and&nbsp;returns&nbsp;a&nbsp;generic&nbsp;Conn.</span><br>
<span class="lineno"></span><span class="keyword" id="3404352">func</span>&nbsp;<span class="op" id="3404357">(</span><span class="ident" id="3404358">l</span>&nbsp;<span class="op" id="3404360">*</span><span class="ident" id="3404361"><a href="/gostd/net/unixsock_posix.go.html#3403212">UnixListener</a></span><span class="op" id="3404373">)</span>&nbsp;<span class="ident" id="3404375">Accept</span><span class="op" id="3404381">(</span><span class="op" id="3404382">)</span>&nbsp;<span class="op" id="3404384">(</span><span class="ident" id="3404385">c</span>&nbsp;<span class="ident" id="3404387"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="3404391">,</span>&nbsp;<span class="ident" id="3404393">err</span>&nbsp;<span class="builtintype" id="3404397">error</span><span class="op" id="3404402">)</span>&nbsp;<span class="op" id="3404404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3404407">c1</span><span class="op" id="3404409">,</span>&nbsp;<span class="ident" id="3404411"><a href="/gostd/net/unixsock_posix.go.html#3404393">err</a></span>&nbsp;<span class="op" id="3404415">:=</span>&nbsp;<span class="ident" id="3404418"><a href="/gostd/net/unixsock_posix.go.html#3404358">l</a></span><span class="op" id="3404419">.</span><span class="ident" id="3404420"><a href="/gostd/net/unixsock_posix.go.html#3404028">AcceptUnix</a></span><span class="op" id="3404430">(</span><span class="op" id="3404431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3404434">if</span>&nbsp;<span class="ident" id="3404437"><a href="/gostd/net/unixsock_posix.go.html#3404393">err</a></span>&nbsp;<span class="op" id="3404441">!=</span>&nbsp;<span class="builtintype" id="3404444">nil</span>&nbsp;<span class="op" id="3404448">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3404452">return</span>&nbsp;<span class="builtintype" id="3404459">nil</span><span class="op" id="3404462">,</span>&nbsp;<span class="ident" id="3404464"><a href="/gostd/net/unixsock_posix.go.html#3404393">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3404469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3404472">return</span>&nbsp;<span class="ident" id="3404479"><a href="/gostd/net/unixsock_posix.go.html#3404407">c1</a></span><span class="op" id="3404481">,</span>&nbsp;<span class="builtintype" id="3404483">nil</span><br>
<span class="lineno"></span><span class="op" id="3404487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span><span class="comment" id="3404490">//&nbsp;Close&nbsp;stops&nbsp;listening&nbsp;on&nbsp;the&nbsp;Unix&nbsp;address.&nbsp;&nbsp;Already&nbsp;accepted</span><br>
<span class="lineno"></span><span class="comment" id="3404554">//&nbsp;connections&nbsp;are&nbsp;not&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="3404585">func</span>&nbsp;<span class="op" id="3404590">(</span><span class="ident" id="3404591">l</span>&nbsp;<span class="op" id="3404593">*</span><span class="ident" id="3404594"><a href="/gostd/net/unixsock_posix.go.html#3403212">UnixListener</a></span><span class="op" id="3404606">)</span>&nbsp;<span class="ident" id="3404608">Close</span><span class="op" id="3404613">(</span><span class="op" id="3404614">)</span>&nbsp;<span class="builtintype" id="3404616">error</span>&nbsp;<span class="op" id="3404622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3404625">if</span>&nbsp;<span class="ident" id="3404628"><a href="/gostd/net/unixsock_posix.go.html#3404591">l</a></span>&nbsp;<span class="op" id="3404630">==</span>&nbsp;<span class="builtintype" id="3404633">nil</span>&nbsp;<span class="op" id="3404637">||</span>&nbsp;<span class="ident" id="3404640"><a href="/gostd/net/unixsock_posix.go.html#3404591">l</a></span><span class="op" id="3404641">.</span><span class="ident" id="3404642"><a href="/gostd/net/unixsock_posix.go.html#3403235">fd</a></span>&nbsp;<span class="op" id="3404645">==</span>&nbsp;<span class="builtintype" id="3404648">nil</span>&nbsp;<span class="op" id="3404652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3404656">return</span>&nbsp;<span class="ident" id="3404663"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3404670">.</span><span class="ident" id="3404671"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3404679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3404683">//&nbsp;The&nbsp;operating&nbsp;system&nbsp;doesn&#39;t&nbsp;clean&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3404725">//&nbsp;the&nbsp;file&nbsp;that&nbsp;announcing&nbsp;created,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3404766">//&nbsp;we&nbsp;have&nbsp;to&nbsp;clean&nbsp;it&nbsp;up&nbsp;ourselves.</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3404804">//&nbsp;There&#39;s&nbsp;a&nbsp;race&nbsp;here--we&nbsp;can&#39;t&nbsp;know&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3404847">//&nbsp;sure&nbsp;whether&nbsp;someone&nbsp;else&nbsp;has&nbsp;come&nbsp;along</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3404892">//&nbsp;and&nbsp;replaced&nbsp;our&nbsp;socket&nbsp;name&nbsp;already--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3404935">//&nbsp;but&nbsp;this&nbsp;sequence&nbsp;(remove&nbsp;then&nbsp;close)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3404977">//&nbsp;is&nbsp;at&nbsp;least&nbsp;compatible&nbsp;with&nbsp;the&nbsp;auto-remove</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3405025">//&nbsp;sequence&nbsp;in&nbsp;ListenUnix.&nbsp;&nbsp;It&#39;s&nbsp;only&nbsp;non-Go</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3405071">//&nbsp;programs&nbsp;that&nbsp;can&nbsp;mess&nbsp;us&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3405105">if</span>&nbsp;<span class="ident" id="3405108"><a href="/gostd/net/unixsock_posix.go.html#3404591">l</a></span><span class="op" id="3405109">.</span><span class="ident" id="3405110"><a href="/gostd/net/unixsock_posix.go.html#3403248">path</a></span><span class="op" id="3405114">[</span><span class="num" id="3405115">0</span><span class="op" id="3405116">]</span>&nbsp;<span class="op" id="3405118">!=</span>&nbsp;<span class="string" id="3405121">&#39;@&#39;</span>&nbsp;<span class="op" id="3405125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3405129"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3405136">.</span><span class="ident" id="3405137"><a href="/gostd/syscall/zsyscall_linux_amd64.go.html#2636865">Unlink</a></span><span class="op" id="3405143">(</span><span class="ident" id="3405144"><a href="/gostd/net/unixsock_posix.go.html#3404591">l</a></span><span class="op" id="3405145">.</span><span class="ident" id="3405146"><a href="/gostd/net/unixsock_posix.go.html#3403248">path</a></span><span class="op" id="3405150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3405153">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3405156">return</span>&nbsp;<span class="ident" id="3405163"><a href="/gostd/net/unixsock_posix.go.html#3404591">l</a></span><span class="op" id="3405164">.</span><span class="ident" id="3405165"><a href="/gostd/net/unixsock_posix.go.html#3403235">fd</a></span><span class="op" id="3405167">.</span><span class="ident" id="3405168"><a href="/gostd/net/fd_unix.go.html#3261468">Close</a></span><span class="op" id="3405173">(</span><span class="op" id="3405174">)</span><br>
<span class="lineno"></span><span class="op" id="3405176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3405179">//&nbsp;Addr&nbsp;returns&nbsp;the&nbsp;listener&#39;s&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3405227">func</span>&nbsp;<span class="op" id="3405232">(</span><span class="ident" id="3405233">l</span>&nbsp;<span class="op" id="3405235">*</span><span class="ident" id="3405236"><a href="/gostd/net/unixsock_posix.go.html#3403212">UnixListener</a></span><span class="op" id="3405248">)</span>&nbsp;<span class="ident" id="3405250">Addr</span><span class="op" id="3405254">(</span><span class="op" id="3405255">)</span>&nbsp;<span class="ident" id="3405257"><a href="/gostd/net/net.go.html#3334179">Addr</a></span>&nbsp;<span class="op" id="3405262">{</span>&nbsp;<span class="keyword" id="3405264">return</span>&nbsp;<span class="ident" id="3405271"><a href="/gostd/net/unixsock_posix.go.html#3405233">l</a></span><span class="op" id="3405272">.</span><span class="ident" id="3405273"><a href="/gostd/net/unixsock_posix.go.html#3403235">fd</a></span><span class="op" id="3405275">.</span><span class="ident" id="3405276"><a href="/gostd/net/fd_unix.go.html#3257582">laddr</a></span>&nbsp;<span class="op" id="3405282">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="comment" id="3405285">//&nbsp;SetDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;associated&nbsp;with&nbsp;the&nbsp;listener.</span><br>
<span class="lineno"></span><span class="comment" id="3405348">//&nbsp;A&nbsp;zero&nbsp;time&nbsp;value&nbsp;disables&nbsp;the&nbsp;deadline.</span><br>
<span class="lineno"></span><span class="keyword" id="3405392">func</span>&nbsp;<span class="op" id="3405397">(</span><span class="ident" id="3405398">l</span>&nbsp;<span class="op" id="3405400">*</span><span class="ident" id="3405401"><a href="/gostd/net/unixsock_posix.go.html#3403212">UnixListener</a></span><span class="op" id="3405413">)</span>&nbsp;<span class="ident" id="3405415">SetDeadline</span><span class="op" id="3405426">(</span><span class="ident" id="3405427">t</span>&nbsp;<span class="ident" id="3405429"><a href="/gostd/net/unixsock_posix.go.html#3396507">time</a></span><span class="op" id="3405433">.</span><span class="ident" id="3405434"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="3405438">)</span>&nbsp;<span class="op" id="3405440">(</span><span class="ident" id="3405441">err</span>&nbsp;<span class="builtintype" id="3405445">error</span><span class="op" id="3405450">)</span>&nbsp;<span class="op" id="3405452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3405455">if</span>&nbsp;<span class="ident" id="3405458"><a href="/gostd/net/unixsock_posix.go.html#3405398">l</a></span>&nbsp;<span class="op" id="3405460">==</span>&nbsp;<span class="builtintype" id="3405463">nil</span>&nbsp;<span class="op" id="3405467">||</span>&nbsp;<span class="ident" id="3405470"><a href="/gostd/net/unixsock_posix.go.html#3405398">l</a></span><span class="op" id="3405471">.</span><span class="ident" id="3405472"><a href="/gostd/net/unixsock_posix.go.html#3403235">fd</a></span>&nbsp;<span class="op" id="3405475">==</span>&nbsp;<span class="builtintype" id="3405478">nil</span>&nbsp;<span class="op" id="3405482">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3405486">return</span>&nbsp;<span class="ident" id="3405493"><a href="/gostd/net/unixsock_posix.go.html#3396496">syscall</a></span><span class="op" id="3405500">.</span><span class="ident" id="3405501"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3405509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3405512">return</span>&nbsp;<span class="ident" id="3405519"><a href="/gostd/net/unixsock_posix.go.html#3405398">l</a></span><span class="op" id="3405520">.</span><span class="ident" id="3405521"><a href="/gostd/net/unixsock_posix.go.html#3403235">fd</a></span><span class="op" id="3405523">.</span><span class="ident" id="3405524"><a href="/gostd/net/fd_poll_runtime.go.html#3256482">setDeadline</a></span><span class="op" id="3405535">(</span><span class="ident" id="3405536"><a href="/gostd/net/unixsock_posix.go.html#3405427">t</a></span><span class="op" id="3405537">)</span><br>
<span class="lineno"></span><span class="op" id="3405539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="comment" id="3405542">//&nbsp;File&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;underlying&nbsp;os.File,&nbsp;set&nbsp;to&nbsp;blocking</span><br>
<span class="lineno"></span><span class="comment" id="3405608">//&nbsp;mode.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when&nbsp;finished.</span><br>
<span class="lineno"></span><span class="comment" id="3405678">//&nbsp;Closing&nbsp;l&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not&nbsp;affect&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="3405743">//</span><br>
<span class="lineno"></span><span class="comment" id="3405746">//&nbsp;The&nbsp;returned&nbsp;os.File&#39;s&nbsp;file&nbsp;descriptor&nbsp;is&nbsp;different&nbsp;from&nbsp;the</span><br>
<span class="lineno">340</span><span class="comment" id="3405810">//&nbsp;connection&#39;s.&nbsp;&nbsp;Attempting&nbsp;to&nbsp;change&nbsp;properties&nbsp;of&nbsp;the&nbsp;original</span><br>
<span class="lineno"></span><span class="comment" id="3405876">//&nbsp;using&nbsp;this&nbsp;duplicate&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the&nbsp;desired&nbsp;effect.</span><br>
<span class="lineno"></span><span class="keyword" id="3405940">func</span>&nbsp;<span class="op" id="3405945">(</span><span class="ident" id="3405946">l</span>&nbsp;<span class="op" id="3405948">*</span><span class="ident" id="3405949"><a href="/gostd/net/unixsock_posix.go.html#3403212">UnixListener</a></span><span class="op" id="3405961">)</span>&nbsp;<span class="ident" id="3405963">File</span><span class="op" id="3405967">(</span><span class="op" id="3405968">)</span>&nbsp;<span class="op" id="3405970">(</span><span class="ident" id="3405971">f</span>&nbsp;<span class="op" id="3405973">*</span><span class="ident" id="3405974"><a href="/gostd/net/unixsock_posix.go.html#3396490">os</a></span><span class="op" id="3405976">.</span><span class="ident" id="3405977"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="3405981">,</span>&nbsp;<span class="ident" id="3405983">err</span>&nbsp;<span class="builtintype" id="3405987">error</span><span class="op" id="3405992">)</span>&nbsp;<span class="op" id="3405994">{</span>&nbsp;<span class="keyword" id="3405996">return</span>&nbsp;<span class="ident" id="3406003"><a href="/gostd/net/unixsock_posix.go.html#3405946">l</a></span><span class="op" id="3406004">.</span><span class="ident" id="3406005"><a href="/gostd/net/unixsock_posix.go.html#3403235">fd</a></span><span class="op" id="3406007">.</span><span class="ident" id="3406008"><a href="/gostd/net/fd_unix.go.html#3268610">dup</a></span><span class="op" id="3406011">(</span><span class="op" id="3406012">)</span>&nbsp;<span class="op" id="3406014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3406017">//&nbsp;ListenUnixgram&nbsp;listens&nbsp;for&nbsp;incoming&nbsp;Unix&nbsp;datagram&nbsp;packets&nbsp;addressed</span><br>
<span class="lineno">345</span><span class="comment" id="3406088">//&nbsp;to&nbsp;the&nbsp;local&nbsp;address&nbsp;laddr.&nbsp;&nbsp;The&nbsp;network&nbsp;net&nbsp;must&nbsp;be&nbsp;&#34;unixgram&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3406156">//&nbsp;The&nbsp;returned&nbsp;connection&#39;s&nbsp;ReadFrom&nbsp;and&nbsp;WriteTo&nbsp;methods&nbsp;can&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span><span class="comment" id="3406226">//&nbsp;to&nbsp;receive&nbsp;and&nbsp;send&nbsp;packets&nbsp;with&nbsp;per-packet&nbsp;addressing.</span><br>
<span class="lineno"></span><span class="keyword" id="3406285">func</span>&nbsp;<span class="ident" id="3406290">ListenUnixgram</span><span class="op" id="3406304">(</span><span class="ident" id="3406305">net</span>&nbsp;<span class="builtintype" id="3406309">string</span><span class="op" id="3406315">,</span>&nbsp;<span class="ident" id="3406317">laddr</span>&nbsp;<span class="op" id="3406323">*</span><span class="ident" id="3406324"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3406332">)</span>&nbsp;<span class="op" id="3406334">(</span><span class="op" id="3406335">*</span><span class="ident" id="3406336"><a href="/gostd/net/unixsock_posix.go.html#3398471">UnixConn</a></span><span class="op" id="3406344">,</span>&nbsp;<span class="builtintype" id="3406346">error</span><span class="op" id="3406351">)</span>&nbsp;<span class="op" id="3406353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3406356">switch</span>&nbsp;<span class="ident" id="3406363"><a href="/gostd/net/unixsock_posix.go.html#3406305">net</a></span>&nbsp;<span class="op" id="3406367">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3406370">case</span>&nbsp;<span class="string" id="3406375">&#34;unixgram&#34;</span><span class="op" id="3406385">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3406388">default</span><span class="op" id="3406395">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3406399">return</span>&nbsp;<span class="builtintype" id="3406406">nil</span><span class="op" id="3406409">,</span>&nbsp;<span class="op" id="3406411">&amp;</span><span class="ident" id="3406412"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3406419">{</span><span class="ident" id="3406420"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3406422">:</span>&nbsp;<span class="string" id="3406424">&#34;listen&#34;</span><span class="op" id="3406432">,</span>&nbsp;<span class="ident" id="3406434"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3406437">:</span>&nbsp;<span class="ident" id="3406439"><a href="/gostd/net/unixsock_posix.go.html#3406305">net</a></span><span class="op" id="3406442">,</span>&nbsp;<span class="ident" id="3406444"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3406448">:</span>&nbsp;<span class="ident" id="3406450"><a href="/gostd/net/unixsock_posix.go.html#3406317">laddr</a></span><span class="op" id="3406455">,</span>&nbsp;<span class="ident" id="3406457"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3406460">:</span>&nbsp;<span class="ident" id="3406462"><a href="/gostd/net/net.go.html#3342949">UnknownNetworkError</a></span><span class="op" id="3406481">(</span><span class="ident" id="3406482"><a href="/gostd/net/unixsock_posix.go.html#3406305">net</a></span><span class="op" id="3406485">)</span><span class="op" id="3406486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3406489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3406492">if</span>&nbsp;<span class="ident" id="3406495"><a href="/gostd/net/unixsock_posix.go.html#3406317">laddr</a></span>&nbsp;<span class="op" id="3406501">==</span>&nbsp;<span class="builtintype" id="3406504">nil</span>&nbsp;<span class="op" id="3406508">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3406512">return</span>&nbsp;<span class="builtintype" id="3406519">nil</span><span class="op" id="3406522">,</span>&nbsp;<span class="op" id="3406524">&amp;</span><span class="ident" id="3406525"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3406532">{</span><span class="ident" id="3406533"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3406535">:</span>&nbsp;<span class="string" id="3406537">&#34;listen&#34;</span><span class="op" id="3406545">,</span>&nbsp;<span class="ident" id="3406547"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3406550">:</span>&nbsp;<span class="ident" id="3406552"><a href="/gostd/net/unixsock_posix.go.html#3406305">net</a></span><span class="op" id="3406555">,</span>&nbsp;<span class="ident" id="3406557"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3406561">:</span>&nbsp;<span class="builtintype" id="3406563">nil</span><span class="op" id="3406566">,</span>&nbsp;<span class="ident" id="3406568"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3406571">:</span>&nbsp;<span class="ident" id="3406573"><a href="/gostd/net/net.go.html#3341102">errMissingAddress</a></span><span class="op" id="3406590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3406593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3406596">fd</span><span class="op" id="3406598">,</span>&nbsp;<span class="ident" id="3406600">err</span>&nbsp;<span class="op" id="3406604">:=</span>&nbsp;<span class="ident" id="3406607"><a href="/gostd/net/unixsock_posix.go.html#3396522">unixSocket</a></span><span class="op" id="3406617">(</span><span class="ident" id="3406618"><a href="/gostd/net/unixsock_posix.go.html#3406305">net</a></span><span class="op" id="3406621">,</span>&nbsp;<span class="ident" id="3406623"><a href="/gostd/net/unixsock_posix.go.html#3406317">laddr</a></span><span class="op" id="3406628">,</span>&nbsp;<span class="builtintype" id="3406630">nil</span><span class="op" id="3406633">,</span>&nbsp;<span class="string" id="3406635">&#34;listen&#34;</span><span class="op" id="3406643">,</span>&nbsp;<span class="ident" id="3406645"><a href="/gostd/net/net.go.html#3342276">noDeadline</a></span><span class="op" id="3406655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3406658">if</span>&nbsp;<span class="ident" id="3406661"><a href="/gostd/net/unixsock_posix.go.html#3406600">err</a></span>&nbsp;<span class="op" id="3406665">!=</span>&nbsp;<span class="builtintype" id="3406668">nil</span>&nbsp;<span class="op" id="3406672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3406676">return</span>&nbsp;<span class="builtintype" id="3406683">nil</span><span class="op" id="3406686">,</span>&nbsp;<span class="op" id="3406688">&amp;</span><span class="ident" id="3406689"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3406696">{</span><span class="ident" id="3406697"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3406699">:</span>&nbsp;<span class="string" id="3406701">&#34;listen&#34;</span><span class="op" id="3406709">,</span>&nbsp;<span class="ident" id="3406711"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3406714">:</span>&nbsp;<span class="ident" id="3406716"><a href="/gostd/net/unixsock_posix.go.html#3406305">net</a></span><span class="op" id="3406719">,</span>&nbsp;<span class="ident" id="3406721"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3406725">:</span>&nbsp;<span class="ident" id="3406727"><a href="/gostd/net/unixsock_posix.go.html#3406317">laddr</a></span><span class="op" id="3406732">,</span>&nbsp;<span class="ident" id="3406734"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3406737">:</span>&nbsp;<span class="ident" id="3406739"><a href="/gostd/net/unixsock_posix.go.html#3406600">err</a></span><span class="op" id="3406742">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3406745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3406748">return</span>&nbsp;<span class="ident" id="3406755"><a href="/gostd/net/unixsock_posix.go.html#3398503">newUnixConn</a></span><span class="op" id="3406766">(</span><span class="ident" id="3406767"><a href="/gostd/net/unixsock_posix.go.html#3406596">fd</a></span><span class="op" id="3406769">)</span><span class="op" id="3406770">,</span>&nbsp;<span class="builtintype" id="3406772">nil</span><br>
<span class="lineno"></span><span class="op" id="3406776">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
